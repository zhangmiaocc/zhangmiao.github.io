<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[AIç”ŸæˆBGMéŸ³ä¹è°ƒç ”]]></title>
    <url>%2Fposts%2Ff928d1c8.html</url>
    <content type="text"><![CDATA[AIç”ŸæˆBGM BGMçŒ« â€¢ å¯ä»¥é€šè¿‡BGMçŒ«å¹³å° http://bgmcat.com/home ç”ŸæˆAIéŸ³ä¹ â€¢ ä½¿ç”¨æè¿° : æˆ‘èµ°åœ¨ç”°é—´çš„é©¬è·¯ä¸Š,å¬ç€å°æ­Œæ›²,è·³ç€èµ° â€¢ æç¤º : é»˜è®¤ç”Ÿæˆçš„bgmæ˜¯æ²¡æœ‰å•†ç”¨ç‰ˆæƒçš„,å¯ä»¥é€šè¿‡è´­ä¹°ä¸“ä¸šåˆ›ä½œè€…ä¼šå‘˜æˆ–å•æ›²è´­ä¹°å•†ä¸šç”¨é€”,ç›®å‰æ„Ÿè§‰æ²¡å¿…è¦è´­ä¹° Mubert â€¢ å¯ä»¥é€šè¿‡mubertå¹³å° https://mubert.com/render?authBy=google â½£æˆAIâ¾³ä¹ â€¢ ä½¿â½¤æè¿° : I was walking on the road in the field, listening to little songs, dancing (è§„å®šåªèƒ½ä½¿â½¤è‹±â½‚) BGMåŽ»é™¤â¼ˆå£°Spleeter â€¢ é€šè¿‡ https://makenweb.com/SpleeterGUI å¯ä»¥ä¸‹è½½å…è´¹çš„Windowsç‰ˆæœ¬(2022-10-12),MACâ½†å¯¹åº”è½¯ä»¶ã€‚ â€¢ é€šè¿‡ https://bbs.huaweicloud.com/forum/thread-117164-1-1.html é“¾æŽ¥æ•™ç¨‹(2021-03-30æœ‰ç‚¹è¿‡æ—¶), è°ƒâ½¤çš„æ˜¯Spleeteråº“,è°ƒâ½¤çš„æµç¨‹å’ŒWindowsç‰ˆè½¯ä»¶å‘½ä»¤â¼€è‡´,â½†é¡»æ­å»ºä½¿â½¤äº†. Moises å¯ä»¥é€šè¿‡ https://studio.moises.ai/library/ å®žçŽ°â¾³è½¨åˆ†ç¦»,ä¸‹è½½åŽ»é™¤â¼ˆå£°åŽçš„â½‚ä»¶,é¢„æœŸæ•ˆæžœæ²¡é—®é¢˜ (ç¼ºç‚¹:å…è´¹ç‰ˆ5æ¬¡/å•â½‰/å•è´¦å·) vocalremover â€¢ é€šè¿‡ https://vocalremover.org/zh/ å¯ä»¥åˆ†ç¦»äººå£°å’ŒéŸ³ä¹,ç•Œé¢å¦‚ä¸‹å›¾ â€¢ ä¼˜ç‚¹ : ä½¿ç”¨æˆæœ¬ä½Ž,ä¸éœ€è¦æœ¬åœ°å®‰è£…å„ç§pythonåº“,ç›´æŽ¥åœ¨çº¿ä¸Šä¼ /ä¸‹è½½éŸ³é¢‘æ–‡ä»¶ å…è´¹æ¬¡æ•°æ— é™åˆ¶,æ²¡æœ‰å¿…é¡»å¼€é€šåŒ…æœˆåŒ…å¹´æˆ–è€…å•æ¬¡ä»˜è´¹çš„é™åˆ¶ uvr5 â€¢ æœ€æ–°æ–¹å¼uvr5, githubå¼€æºåº“ https://github.com/A/Anjok07/ultimatevocalremovergui â€¢ å¦‚æžœvocalremoverä¸å¯ç”¨æ—¶, å¯ç”¨è¿™ç§æ–¹æ¡ˆ, å…è´¹ã€‚ â€¢ ä¼˜ç‚¹: 1 : ç¨³å®šæ€§ã€‚ä¸å†å—ç½‘é¡µå½±å“, åŽŸåŽ»é™¤äººå£°æ–¹æ¡ˆvocalremoverä¸Šåˆé¢‘ç¹å‡ºçŽ°ä¸Žvpnå†²çª,çŸ­æš‚æ€§æ— æ³•ä½¿ç”¨,çŽ°å·²æ¢å¤ 2 : ç®€æ·æ€§ã€‚ä½¿ç”¨uvr5è½¬æ¢,å¯ä»¥æ‰¹é‡é€‰æ‹©å¤šä¸ªæœ¬åœ°æ–‡ä»¶,æ— é¡»åœ¨ç½‘é¡µä¸­å¤§é‡ä¸Šä¼ åŽŸéŸ³é¢‘/ä¸‹è½½æ–°éŸ³é¢‘çš„ä¼ è¾“è¿‡ç¨‹äº† 3 : é«˜æ•ˆæ€§ã€‚ä½¿ç”¨æœ¬åœ°è½¯ä»¶æ‰§è¡Œè½¬æ¢, ä¾é æœ¬åœ°GPU, æ‰§è¡Œæ•ˆçŽ‡æ›´å¿« â€¢ ä½¿ç”¨è¯´æ˜Ž : 1 ä¸ºè¾“å…¥ç›®å½•(å¯æ‰¹é‡) 2ä¸ºè¾“å‡ºç›®å½• 3 ä¸ºè¾“å‡ºæ–‡ä»¶æ ¼å¼ 4 ä¸ºè¾“å‡ºè®¡ç®—æ¨¡åž‹ 5 ä¸ºä½¿ç”¨GPUåªå¯¼å‡ºåŽ»é™¤äººå£°éŸ³é¢‘ 6 ä¸ºå¼€å§‹è½¬æ¢ 7 ä¸ºè½¬æ¢å®Œæˆ ç»“è®º â€¢ ä½¿ç”¨ bgmçŒ« http://bgmcat.com/home + vocalremover https://vocalremover.org/zh/ çš„æ–¹å¼,å¯ä»¥å¾—åˆ°æ— äººå£°æ°´å°çš„AIéŸ³é¢‘,å…è´¹ä¸”æ— æ¬¡æ•°é™åˆ¶ã€‚ â€¢ ä»¥60sæ—¶é•¿éŸ³é¢‘å·¦å³,èµ°å®Œä¸€å¥—æµç¨‹4ã€5åˆ†é’Ÿ,å³å¯å¾—åˆ°æ— æ°´å°AIéŸ³é¢‘ â€¢ ç”ŸæˆAIéŸ³é¢‘çš„æ–¹å¼åŒ…æ‹¬ä½†ä¸é™äºŽbgmçŒ«, åŽ»é™¤æ°´å°æ–¹å¼vocalremoverå¯ä»¥å…è´¹æ— é™æ¬¡ä½¿ç”¨ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter WebåŠ è½½æ…¢é—®é¢˜ä¼˜åŒ–å’Œè§£å†³æ–¹æ¡ˆ]]></title>
    <url>%2Fposts%2Feea7bb08.html</url>
    <content type="text"><![CDATA[ä¼˜åŒ–é‡ç‚¹é¡¹å°†ä»¥ä¸‹èµ„æºæœ¬åœ°åŒ–ï¼Œæ‰“åŒ…åˆ°é¡¹ç›®ä¸­ canvaskit.jså’Œcanvaskit.wasm KFOmCnqEu92Fr1Me5WZLCzYlKw.ttf css2?family=Noto_Sans+SC psï¼šæœ€åˆcanvaskitèµ„æºä¸Šä¼ åˆ°é˜¿é‡Œäº‘ï¼Œé‡‡ç”¨å›½å†…é•œåƒèµ„æºåŠ è½½ã€‚è¿™æ¬¡ä¸ºäº†ä¿é™©èµ·è§ï¼Œä¹Ÿæ”¾å…¥åˆ°æœ¬åœ°ã€‚å¥½å¤„ï¼šåªè¦æœåŠ¡å™¨æ­£å¸¸èƒ½è®¿é—®ï¼Œè¿™äº›èµ„æºæ–‡ä»¶å°±èƒ½å¤Ÿæ­£å¸¸åŠ è½½æˆåŠŸï¼Œæœ€å¤§ç¨‹åº¦ä¸Šè§„é¿é¡µé¢åŠ è½½å¼‚å¸¸çš„é£Žé™©ï¼æœ€ç»ˆé¡¹ç›®ä¸­æ·»åŠ ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š index.htmlæ–‡ä»¶ä¸­æ›´æ”¹canvaskitåŠ è½½æ–¹å¼ä¸ºæœ¬åœ° ä¸‹è½½ç›¸å…³ä¸‹è½½canvaskit.wasmå’Œcanvaskit.jshttps://unpkg.com/canvaskit-wasm@0.35.0/bin/canvaskit.jshttps://unpkg.com/canvaskit-wasm@0.35.0/bin/canvaskit.wasmä¸‹è½½åœ°å€æ–¹å¼èŽ·å–ï¼šF12 -&gt;Network ä¸‹è½½KFOmCnqEu92Fr1Me5WZLCzYlKw.ttfhttps://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Me5WZLCzYlKw.ttf ä¸‹è½½å­—ä½“CSShttps://fonts.googleapis.com/css2?family=Noto+Sans+SCä¸‹è½½çš„æ ·å¼ä¿å­˜åœ¨æœ¬åœ°ï¼Œå‘½åä¸º localfonts.cssæ›´æ”¹CSSä¸­å¼•ç”¨çš„woff2å­—ä½“æ–‡ä»¶ï¼Œæ›´æ”¹ä¸ºæœ¬åœ°è·¯å¾„ å­—ä½“æ–‡ä»¶æ‰¹é‡ä¸‹è½½1curl -O https://fonts.gstatic.com/s/notosanssc/v26/k3kXo84MPvpLmixcA63oeALhLIiP-Q-87KaAaH7rzeAODp22mF0qmF4CSjmPC6A0Rg5g1igg1w.[1-120].woff2 ä¸‹è½½çš„æ–‡ä»¶è£…å…¥åˆ°woff2æ–‡ä»¶å¤¹æ”¾åœ¨ web/canvaskit è·¯å¾„ä¸‹ é…ç½®ç›¸å…³æ‰§è¡Œflutter build webæ‰“åŒ…å‘½ä»¤åŽç”Ÿæˆbuild/webæ–‡ä»¶ç”±äºŽæ‰“åŒ…åŽçš„æ–‡ä»¶èµ„æºå¼•ç”¨è¿˜æ˜¯urlé“¾æŽ¥å½¢å¼ï¼Œæ•…éœ€è¦ä¿®æ”¹build/webç›®å½•ä¸‹çš„main.dart.js æ›¿æ¢è¿œç«¯è·¯å¾„ä¸ºæœ¬åœ°è·¯å¾„å°†https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Me5WZLCzYlKw.ttfæ›¿æ¢æˆcanvaskit/KFOmCnqEu92Fr1Me5WZLCzYlKw.ttf å°†https://fonts.googleapis.com/css2?family=&quot;+A.bF(o,&quot; &quot;,&quot;+&quot;)æ›¿æ¢æˆcanvaskit/localfonts.css è„šæœ¬è‡ªåŠ¨æ‰“åŒ…&amp;æ›¿æ¢èµ„æºå¼•ç”¨è·¯å¾„flutter_build.shè„šæœ¬è‡ªåŠ¨æ‰“åŒ…ä»¥åŠæ‰“å®ŒåŒ…åŽä¿®æ”¹build/webç›®å½•ä¸‹çš„main.dart.jsä¸­èµ„æºå¼•ç”¨è·¯å¾„æ›¿æ¢æˆæœ¬åœ°è·¯å¾„ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788#!/bin/zshBLACK="\033[30m"RED="\033[31m"GREEN="\033[32m"YELLOW="\033[33m"BLUE="\033[34m"PINK="\033[35m"CYAN="\033[36m"WHITE="\033[37m"NORMAL="\033[0;39m"END="\033[0m"# æŒ‡å®šæ–‡ä»¶è·¯å¾„filepath="./build/web/main.dart.js"function chooseBuildTypeFunc &#123; echo echo "[$RED 1 $END]$CYAN æž„å»ºreleaseåŒ…$END" echo "[$CYAN q $END] é€€å‡º" echo echo "$GREENè¯·è¾“å…¥å¯¹åº”çš„æ•°å­—æˆ–qé€€å‡º:$END" read param echo # æ£€æµ‹ç©ºæ ¼æ˜¯å¦å­˜åœ¨ if [[ -z $param ]]; then echo "$REDè¾“å…¥æœ‰è¯¯,è¯·é‡æ–°è¾“å…¥$END" chooseCommitTypeFunc; return fi if [ $param = "1" ]; then buildFunc; elif [ $param = "q" ]; then echo else echo "$REDè¾“å…¥æœ‰è¯¯,è¯·é‡æ–°è¾“å…¥$END" echo chooseCommitTypeFunc; fi&#125;function buildFunc &#123; # å¼€å§‹æ‰“åŒ… flutter build web --web-renderer canvaskit --dart-define=BROWSER_IMAGE_DECODING_ENABLED=false --release # ç»“æŸæ‰“åŒ… # å®šä¹‰ URL old_url="https:\/\/fonts.gstatic.com\/s\/roboto\/v20" new_url="canvaskit" # ä½¿ç”¨ sed å‘½ä»¤æŸ¥æ‰¾å¹¶æ›¿æ¢ URL sed -i '' "s~$old_url~$new_url~g" $filepath # å®šä¹‰å­—ç¬¦ä¸² old_string="https:\/\/fonts.googleapis.com\/css2?family=" new_string="canvaskit\/localfonts.css" # ä½¿ç”¨ sed å‘½ä»¤æŸ¥æ‰¾å¹¶æ›¿æ¢å­—ç¬¦ä¸² # æˆ‘ä»¬ä½¿ç”¨ "|" ä½œä¸ºå®šç•Œç¬¦ï¼Œè€Œä¸æ˜¯å¸¸ç”¨çš„ "/" sed -i '' "s|$old_string|$new_string|g" $filepath # å®šä¹‰æ‰€æœ‰å¯èƒ½çš„å­—æ¯ LETTERS=(&#123;a..z&#125; &#123;A..Z&#125;) # ä½¿ç”¨ for å¾ªçŽ¯éåŽ†æ‰€æœ‰å­—æ¯ for letter in "$&#123;LETTERS[@]&#125;"; do # ä½¿ç”¨ grep æ¥åŒ¹é…å­—ç¬¦ä¸² if grep -Fq "+A.b$&#123;letter&#125;(o,\" \",\"+\")" $filepath; then # å®šä¹‰å­—ç¬¦ä¸² old_string="+A.b$letter(o,\" \",\"+\")" new_string="" # ä½¿ç”¨ perl çš„ -i é€‰é¡¹è¿›è¡ŒåŽŸåœ°ç¼–è¾‘ï¼ˆç›´æŽ¥ä¿®æ”¹æ–‡ä»¶ï¼‰ # ä½¿ç”¨ \Q...\E å°†ç›®æ ‡å­—ç¬¦ä¸²è§†ä¸ºæ–‡å­—è€Œä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼ perl -i -pe 's/\Q'$old_string'\E/'$new_string'/g' $filepath break # åœæ­¢å¾ªçŽ¯ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»æ‰¾åˆ°äº†åŒ¹é…çš„å­—ç¬¦ä¸² fi done echo "$CYAN============================ SUCCESS ============================$END"&#125;chooseBuildTypeFunc;]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutterçŠ¶æ€ç®¡ç†Providerå’ŒGetåˆ†æž]]></title>
    <url>%2Fposts%2F7ff52b5f.html</url>
    <content type="text"><![CDATA[æ–‡/ Nayutaï¼ŒCFUG ç¤¾åŒº çŠ¶æ€ç®¡ç†ä¸€ç›´æ˜¯ Flutter å¼€å‘ä¸­ä¸€ä¸ªç«çƒ­çš„è¯é¢˜ã€‚è°ˆåˆ°çŠ¶æ€ç®¡ç†æ¡†æž¶ï¼Œç¤¾åŒºä¹Ÿæœ‰è¯¸å¦‚æœ‰ä»¥ Getã€Provider ä¸ºä»£è¡¨çš„å¤šç§æ–¹æ¡ˆï¼Œå®ƒä»¬æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ã€‚ é¢å¯¹è¿™ä¹ˆå¤šçš„é€‰æ‹©ï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼šã€Œæˆ‘éœ€è¦ä½¿ç”¨çŠ¶æ€ç®¡ç†ä¹ˆï¼Ÿå“ªç§æ¡†æž¶æ›´é€‚åˆæˆ‘ï¼Ÿã€ æœ¬æ–‡å°†ä»Žä½œè€…çš„å®žé™…å¼€å‘ç»éªŒå‡ºå‘ï¼Œåˆ†æžçŠ¶æ€ç®¡ç†è§£å†³çš„é—®é¢˜ä»¥åŠæ€è·¯ï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ åšå‡ºé€‰æ‹©ã€‚ ä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€ç®¡ç†ï¼Ÿé¦–å…ˆï¼Œä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€ç®¡ç†ï¼Ÿ æ ¹æ®ç¬”è€…çš„ç»éªŒï¼Œè¿™æ˜¯å› ä¸º Flutter åŸºäºŽ å£°æ˜Žå¼ æž„å»º UI ï¼Œ ä½¿ç”¨çŠ¶æ€ç®¡ç†çš„ç›®çš„ä¹‹ä¸€å°±æ˜¯è§£å†³ã€Œå£°æ˜Žå¼ã€å¼€å‘å¸¦æ¥çš„é—®é¢˜ã€‚ ã€Œå£°æ˜Žå¼ã€å¼€å‘æ˜¯ä¸€ç§åŒºåˆ«äºŽä¼ åŽŸç”Ÿçš„æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰åœ¨åŽŸç”Ÿå¼€å‘ä¸­å¬åˆ°è¿‡çŠ¶æ€ç®¡ç†ï¼Œé‚£å¦‚ä½•ç†è§£ã€Œå£°æ˜Žå¼ã€å¼€å‘å‘¢ï¼Ÿ ã€Œå£°æ˜Žå¼ã€VSã€Œå‘½ä»¤å¼ã€åˆ†æžä»¥æœ€ç»å…¸çš„çš„è®¡æ•°å™¨ä¾‹å­åˆ†æžï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šç‚¹å‡»å³ä¸‹è§’æŒ‰é’®ï¼Œæ˜¾ç¤ºçš„æ–‡æœ¬æ•°å­—åŠ ä¸€ã€‚ Android ä¸­å¯ä»¥è¿™ä¹ˆå®žçŽ°ï¼šå½“å³ä¸‹è§’æŒ‰é’®ç‚¹ä¸­æ—¶ï¼Œ æ‹¿åˆ° TextView çš„å¯¹è±¡ï¼Œæ‰‹åŠ¨è®¾ç½®å…¶å±•ç¤ºçš„æ–‡æœ¬ã€‚ å®žçŽ°ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314// ä¸€ã€å®šä¹‰å±•ç¤ºçš„å†…å®¹private int mCount =0; // äºŒã€ä¸­é—´å±•ç¤ºæ•°å­—çš„æŽ§ä»¶ TextViewprivate TextView mTvCount; // ä¸‰ã€å…³è” TextView ä¸Ž xml ä¸­çš„ç»„ä»¶mTvCount = findViewById(R.id.tv_count) // å››ã€ç‚¹å‡»æŒ‰é’®æŽ§åˆ¶ç»„ä»¶æ›´æ–°private void increase( )&#123; mCount++; mTvCounter.setText(mCount.toString()); &#125; è€Œåœ¨ Flutter ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿å˜é‡å¢žåŠ ä¹‹åŽè°ƒç”¨ setState((){}) å³å¯ã€‚setState ä¼šåˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œä½¿å¾—ä¸­é—´å±•ç¤ºçš„å€¼è¿›è¡Œå˜æ›´ã€‚ 12345678910// ä¸€ã€å£°æ˜Žå˜é‡int _counter =0; // äºŒã€å±•ç¤ºå˜é‡ Text('$_counter')// ä¸‰ã€å˜é‡å¢žåŠ ï¼Œæ›´æ–°ç•Œé¢setState(() &#123; _counter++; &#125;); å¯ä»¥å‘çŽ°ï¼ŒFlutter ä¸­åªå¯¹ _counter å±žæ€§è¿›è¡Œäº†ä¿®æ”¹ï¼Œå¹¶æ²¡æœ‰å¯¹ Text ç»„ä»¶è¿›è¡Œä»»ä½•çš„æ“ä½œï¼Œæ•´ä¸ªç•Œé¢éšç€çŠ¶æ€çš„æ”¹å˜è€Œæ”¹å˜ã€‚ æ‰€ä»¥åœ¨ Flutter ä¸­æœ‰è¿™ä¹ˆä¸€ç§è¯´æ³•: UI = f(state): ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒçŠ¶æ€ (state) å°±æ˜¯ _counter çš„å€¼ï¼Œè°ƒç”¨ setState é©±åŠ¨ f build æ–¹æ³•ç”Ÿæˆæ–°çš„ UIã€‚ é‚£ä¹ˆï¼Œå£°æ˜Žå¼æœ‰å“ªäº›ä¼˜åŠ¿ï¼Œå¹¶å¸¦æ¥äº†å“ªäº›é—®é¢˜å‘¢ï¼Ÿ ä¼˜åŠ¿: è®©å¼€å‘è€…æ‘†è„±ç»„ä»¶çš„ç¹çæŽ§åˆ¶ï¼Œèšç„¦äºŽçŠ¶æ€å¤„ç† ä¹ æƒ¯ Flutter å¼€å‘ä¹‹åŽï¼Œå›žåˆ°åŽŸç”Ÿå¹³å°å¼€å‘ï¼Œä½ ä¼šå‘çŽ°å½“å¤šä¸ªç»„ä»¶ä¹‹é—´ç›¸äº’å…³è”æ—¶ï¼Œå¯¹äºŽ View çš„æŽ§åˆ¶éžå¸¸éº»çƒ¦ã€‚ è€Œåœ¨ Flutter ä¸­æˆ‘ä»¬åªéœ€è¦å¤„ç†å¥½çŠ¶æ€å³å¯ (å¤æ‚åº¦è½¬ç§»åˆ°äº†çŠ¶æ€ -&gt; UI çš„æ˜ å°„ï¼Œä¹Ÿå°±æ˜¯ Widget çš„æž„å»º)ã€‚åŒ…æ‹¬ Jetpack Composeã€Swift ç­‰æŠ€æœ¯çš„æœ€æ–°å‘å±•ï¼Œä¹Ÿæ˜¯åœ¨æœç€ã€Œå£°æ˜Žå¼ã€çš„æ–¹å‘æ¼”è¿›ã€‚ å£°æ˜Žå¼å¼€å‘å¸¦æ¥çš„é—®é¢˜ æ²¡æœ‰ä½¿ç”¨çŠ¶æ€ç®¡ç†ï¼Œç›´æŽ¥ã€Œå£°æ˜Žå¼ã€å¼€å‘çš„æ—¶å€™ï¼Œé‡åˆ°çš„é—®é¢˜æ€»ç»“æœ‰ä¸‰ä¸ª: é€»è¾‘å’Œé¡µé¢ UI è€¦åˆï¼Œå¯¼è‡´æ— æ³•å¤ç”¨/å•å…ƒæµ‹è¯•ã€ä¿®æ”¹æ··ä¹±ç­‰ éš¾ä»¥è·¨ç»„ä»¶ (è·¨é¡µé¢) è®¿é—®æ•°æ® æ— æ³•è½»æ¾çš„æŽ§åˆ¶åˆ·æ–°èŒƒå›´ (é¡µé¢ setState çš„å˜åŒ–ä¼šå¯¼è‡´å…¨å±€é¡µé¢çš„å˜åŒ–) æŽ¥ä¸‹æ¥ï¼Œæˆ‘å…ˆå¸¦é¢†å¤§å®¶é€ä¸ªäº†è§£è¿™äº›é—®é¢˜ï¼Œä¸‹ä¸€ç« å‘å¤§å®¶è¯¦ç»†æè¿°çŠ¶æ€ç®¡ç†æ¡†æž¶å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ã€‚ 1) é€»è¾‘å’Œé¡µé¢ UI è€¦åˆï¼Œå¯¼è‡´æ— æ³•å¤ç”¨/å•å…ƒæµ‹è¯•ã€ä¿®æ”¹æ··ä¹±ç­‰ ä¸€å¼€å§‹ä¸šåŠ¡ä¸å¤æ‚çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„ä»£ç éƒ½ç›´æŽ¥å†™åˆ° widget ä¸­ï¼Œéšç€ä¸šåŠ¡è¿­ä»£ï¼Œ æ–‡ä»¶è¶Šæ¥è¶Šå¤§ï¼Œå…¶ä»–å¼€å‘è€…å¾ˆéš¾ç›´è§‚åœ°æ˜Žç™½é‡Œé¢çš„ä¸šåŠ¡é€»è¾‘ã€‚ å¹¶ä¸”ä¸€äº›é€šç”¨é€»è¾‘ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚çŠ¶æ€çš„å¤„ç†ã€åˆ†é¡µç­‰ï¼Œåœ¨ä¸åŒçš„é¡µé¢æ¥å›žç²˜è´´ã€‚ è¿™ä¸ªé—®é¢˜åœ¨åŽŸç”Ÿä¸ŠåŒæ ·å­˜åœ¨ï¼ŒåŽé¢ä¹Ÿè¡ç”Ÿäº†è¯¸å¦‚ MVP è®¾è®¡æ¨¡å¼çš„æ€è·¯åŽ»è§£å†³ã€‚ 2) éš¾ä»¥è·¨ç»„ä»¶ (è·¨é¡µé¢) è®¿é—®æ•°æ® ç¬¬äºŒç‚¹åœ¨äºŽè·¨ç»„ä»¶äº¤äº’ï¼Œæ¯”å¦‚åœ¨ Widget ç»“æž„ä¸­ï¼Œ ä¸€ä¸ªå­ç»„ä»¶æƒ³è¦å±•ç¤ºçˆ¶ç»„ä»¶ä¸­çš„ name å­—æ®µï¼Œ å¯èƒ½éœ€è¦å±‚å±‚è¿›è¡Œä¼ é€’ã€‚ åˆæˆ–è€…æ˜¯è¦åœ¨ä¸¤ä¸ªé¡µé¢ä¹‹é—´å…±äº«ç­›é€‰æ•°æ®ï¼Œ å¹¶æ²¡æœ‰ä¸€ä¸ªå¾ˆä¼˜é›…çš„æœºåˆ¶åŽ»è§£å†³è¿™ç§è·¨é¡µé¢çš„æ•°æ®è®¿é—®ã€‚ 3) æ— æ³•è½»æ¾çš„æŽ§åˆ¶åˆ·æ–°èŒƒå›´ (é¡µé¢ setState çš„å˜åŒ–ä¼šå¯¼è‡´å…¨å±€é¡µé¢çš„å˜åŒ–) æœ€åŽä¸€ä¸ªé—®é¢˜ä¹Ÿæ˜¯ä¸Šé¢æåˆ°çš„ä¼˜ç‚¹ï¼Œå¾ˆå¤šåœºæ™¯æˆ‘ä»¬åªæ˜¯éƒ¨åˆ†çŠ¶æ€çš„ä¿®æ”¹ï¼Œä¾‹å¦‚æŒ‰é’®çš„é¢œè‰²ã€‚ ä½†æ˜¯æ•´ä¸ªé¡µé¢çš„ setState ä¼šä½¿å¾—å…¶ä»–ä¸éœ€è¦å˜åŒ–çš„åœ°æ–¹ä¹Ÿè¿›è¡Œé‡å»ºï¼Œ å¸¦æ¥ä¸å¿…è¦çš„å¼€é”€ã€‚ Providerã€Get çŠ¶æ€ç®¡ç†æ¡†æž¶è®¾è®¡åˆ†æžFlutter ä¸­çŠ¶æ€ç®¡ç†æ¡†æž¶çš„æ ¸å¿ƒåœ¨äºŽè¿™ä¸‰ä¸ªé—®é¢˜çš„è§£å†³æ€è·¯ï¼Œ ä¸‹é¢ä¸€èµ·çœ‹çœ‹ Providerã€Get æ˜¯å¦‚ä½•è§£å†³çš„ï¼š è§£å†³é€»è¾‘å’Œé¡µé¢ UI è€¦åˆé—®é¢˜ä¼ ç»Ÿçš„åŽŸç”Ÿå¼€å‘åŒæ ·å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼ŒActivity æ–‡ä»¶ä¹Ÿå¯èƒ½éšç€è¿­ä»£å˜å¾—éš¾ä»¥ç»´æŠ¤ï¼Œ è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ MVP æ¨¡å¼è¿›è¡Œè§£è€¦ã€‚ ç®€å•æ¥è¯´å°±æ˜¯å°† View ä¸­çš„é€»è¾‘ä»£ç æŠ½ç¦»åˆ° Presenter å±‚ï¼Œ View åªè´Ÿè´£è§†å›¾çš„æž„å»ºã€‚ è¿™ä¹Ÿæ˜¯ Flutter ä¸­å‡ ä¹Žæ‰€æœ‰çŠ¶æ€ç®¡ç†æ¡†æž¶çš„è§£å†³æ€è·¯ï¼Œ ä¸Šå›¾çš„ Presenter ä½ å¯ä»¥è®¤ä¸ºæ˜¯ Get ä¸­çš„ GetControllerã€ Provider ä¸­çš„ ChangeNotifier æˆ–è€… Bloc ä¸­çš„ Blocã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå…·ä½“åšæ³•ä¸Š Flutter å’ŒåŽŸç”Ÿ MVP æ¡†æž¶æœ‰æ‰€ä¸åŒã€‚ æˆ‘ä»¬çŸ¥é“åœ¨ç»å…¸ MVP æ¨¡å¼ä¸­ï¼Œ ä¸€èˆ¬ View å’Œ Presenter ä»¥æŽ¥å£å®šä¹‰è‡ªèº«è¡Œä¸º (action)ï¼Œ ç›¸äº’æŒæœ‰æŽ¥å£è¿›è¡Œè°ƒç”¨ ã€‚ ä½† Flutter ä¸­ä¸å¤ªé€‚åˆè¿™ä¹ˆåšï¼Œ ä»Ž Presenter â†’ View å…³ç³»ä¸Š View åœ¨ Flutter ä¸­å¯¹åº” Widgetï¼Œ ä½†åœ¨ Flutter ä¸­ Widget åªæ˜¯ç”¨æˆ·å£°æ˜Ž UI çš„é…ç½®ï¼Œ ç›´æŽ¥æŽ§åˆ¶ Widget å®žä¾‹å¹¶ä¸æ˜¯å¥½çš„åšæ³•ã€‚ è€Œåœ¨ä»Ž View â†’ Presenter çš„å…³ç³»ä¸Šï¼Œ Widget å¯ä»¥ç¡®å®žå¯ä»¥ç›´æŽ¥æŒæœ‰ Presenterï¼Œ ä½†æ˜¯è¿™æ ·åˆä¼šå¸¦æ¥éš¾ä»¥æ•°æ®é€šä¿¡çš„é—®é¢˜ã€‚ è¿™ä¸€ç‚¹ä¸åŒçŠ¶æ€ç®¡ç†æ¡†æž¶çš„è§£å†³æ€è·¯ä¸ä¸€æ ·ï¼Œä»Žå®žçŽ°ä¸Šä»–ä»¬å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼š é€šè¿‡ Flutter æ ‘æœºåˆ¶ è§£å†³ï¼Œä¾‹å¦‚ Providerï¼› é€šè¿‡ ä¾èµ–æ³¨å…¥ï¼Œä¾‹å¦‚ Getã€‚ 1) é€šè¿‡ Flutter æ ‘æœºåˆ¶å¤„ç† V â†’ P çš„èŽ·å– 1234567891011121314151617abstract class Element implements BuildContext &#123; /// å½“å‰ Element çš„çˆ¶èŠ‚ç‚¹ Element? _parent; &#125;abstract class BuildContext &#123; /// æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹ä¸­çš„Tç±»åž‹çš„State T findAncestorState0fType&lt;T extends State&gt;( ); /// éåŽ†å­å…ƒç´ çš„elementå¯¹è±¡ void visitChildElements(ElementVisitor visitor); /// æŸ¥æ‰¾çˆ¶èŠ‚ç‚¹ä¸­çš„Tç±»åž‹çš„ InheritedWidget ä¾‹å¦‚ MediaQuery ç­‰ T dependOnInheritedWidget0fExactType&lt;T extends InheritedWidget&gt;(&#123; Object aspect &#125;); â€¦â€¦&#125; Element å®žçŽ°äº†çˆ¶ç±» BuildContext ä¸­æ“ä½œæ ‘ç»“æž„çš„æ–¹æ³• æˆ‘ä»¬çŸ¥é“ Flutter ä¸­å­˜åœ¨ä¸‰æ£µæ ‘ï¼ŒWidgetã€Element å’Œ RenderObjectã€‚ æ‰€è°“çš„ Widget æ ‘å…¶å®žåªæ˜¯æˆ‘ä»¬æè¿°ç»„ä»¶åµŒå¥—å…³ç³»çš„ä¸€ç§è¯´æ³•ï¼Œæ˜¯ä¸€ç§è™šæ‹Ÿçš„ç»“æž„ã€‚ ä½† Element å’Œ RenderObject åœ¨è¿è¡Œæ—¶å®žé™…å­˜åœ¨ï¼Œ å¯ä»¥çœ‹åˆ° Element ç»„ä»¶ä¸­åŒ…å«äº† _parent å±žæ€§ï¼Œå­˜æ”¾å…¶çˆ¶èŠ‚ç‚¹ã€‚ è€Œå®ƒå®žçŽ°äº† BuildContext æŽ¥å£ï¼ŒåŒ…å«äº†è¯¸å¤šå¯¹äºŽæ ‘ç»“æž„æ“ä½œçš„æ–¹æ³•ï¼Œ ä¾‹å¦‚ findAncestorStateOfTypeï¼Œå‘ä¸ŠæŸ¥æ‰¾çˆ¶èŠ‚ç‚¹ï¼› visitChildElements éåŽ†å­èŠ‚ç‚¹ã€‚ åœ¨ä¸€å¼€å§‹çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ context.findAncestorStateOfType ä¸€å±‚ä¸€å±‚åœ°å‘ä¸ŠæŸ¥æ‰¾åˆ°éœ€è¦çš„ Element å¯¹è±¡ï¼Œ èŽ·å– Widget æˆ–è€… State åŽå³å¯å–å‡ºéœ€è¦çš„å˜é‡ã€‚ provider ä¹Ÿæ˜¯å€ŸåŠ©äº†è¿™æ ·çš„æœºåˆ¶ï¼Œå®Œæˆäº† View -&gt; Presenter çš„èŽ·å–ã€‚ é€šè¿‡ Provider.of èŽ·å–é¡¶å±‚ Provider ç»„ä»¶ä¸­çš„ Present å¯¹è±¡ã€‚ æ˜¾ç„¶ï¼Œæ‰€æœ‰ Provider ä»¥ä¸‹çš„ Widget èŠ‚ç‚¹ï¼Œ éƒ½å¯ä»¥é€šè¿‡è‡ªèº«çš„ context è®¿é—®åˆ° Provider ä¸­çš„ Presenterï¼Œ å¾ˆå¥½åœ°è§£å†³äº†è·¨ç»„ä»¶çš„é€šä¿¡é—®é¢˜ã€‚ 2) é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼è§£å†³ V â†’ P æ ‘æœºåˆ¶å¾ˆä¸é”™ï¼Œä½†ä¾èµ–äºŽ contextï¼Œè¿™ä¸€ç‚¹æœ‰æ—¶å¾ˆè®©äººæŠ“ç‹‚ã€‚ æˆ‘ä»¬çŸ¥é“ Dart æ˜¯ä¸€ç§å•çº¿ç¨‹çš„æ¨¡åž‹ï¼Œ æ‰€ä»¥ä¸å­˜åœ¨å¤šçº¿ç¨‹ä¸‹å¯¹äºŽå¯¹è±¡è®¿é—®çš„ç«žæ€é—®é¢˜ã€‚ åŸºäºŽæ­¤ Get å€ŸåŠ©ä¸€ä¸ªå…¨å±€å•ä¾‹çš„ Map å­˜å‚¨å¯¹è±¡ã€‚ é€šè¿‡ä¾èµ–æ³¨å…¥çš„æ–¹å¼ï¼Œå®žçŽ°äº†å¯¹ Presenter å±‚çš„èŽ·å–ã€‚ è¿™æ ·åœ¨ä»»æ„çš„ç±»ä¸­éƒ½å¯ä»¥èŽ·å–åˆ° Presenterã€‚ è¿™ä¸ª Map å¯¹åº”çš„ key æ˜¯ runtimeType + tagï¼Œ å…¶ä¸­ tag æ˜¯å¯é€‰å‚æ•°ï¼Œè€Œ value å¯¹åº” Objectï¼Œ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥å­˜å…¥ä»»ä½•ç±»åž‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨ä»»æ„ä½ç½®èŽ·å–ã€‚ è§£å†³éš¾ä»¥è·¨ç»„ä»¶ (è·¨é¡µé¢) è®¿é—®æ•°æ®çš„é—®é¢˜è¿™ä¸ªé—®é¢˜å…¶å®žå’Œä¸Šä¸€éƒ¨åˆ†çš„æ€è€ƒåŸºæœ¬ç±»ä¼¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹ä¸¤ç§æ–¹æ¡ˆç‰¹ç‚¹ï¼š Provider ä¾èµ–æ ‘æœºåˆ¶ï¼Œå¿…é¡»åŸºäºŽ context æä¾›äº†å­ç»„ä»¶è®¿é—®ä¸Šå±‚çš„èƒ½åŠ› Get å…¨å±€å•ä¾‹ï¼Œä»»æ„ä½ç½®å¯ä»¥å­˜å– å­˜åœ¨ç±»åž‹é‡å¤ï¼Œå†…å­˜å›žæ”¶é—®é¢˜ è§£å†³é«˜å±‚çº§ setState å¼•èµ·ä¸å¿…è¦åˆ·æ–°çš„é—®é¢˜æœ€åŽå°±æ˜¯æˆ‘ä»¬æåˆ°çš„é«˜å±‚çº§ setState å¼•èµ·ä¸å¿…è¦åˆ·æ–°çš„é—®é¢˜ï¼Œ Flutter é€šè¿‡é‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼è§£å†³ï¼Œå…¶å…³é”®åœ¨äºŽä¸¤æ­¥ï¼š è§‚å¯Ÿè€…åŽ»è®¢é˜…è¢«è§‚å¯Ÿçš„å¯¹è±¡ï¼› è¢«è§‚å¯Ÿçš„å¯¹è±¡é€šçŸ¥è§‚å¯Ÿè€…ã€‚ ç³»ç»Ÿä¹Ÿæä¾›äº† ValueNotifier ç­‰ç»„ä»¶çš„å®žçŽ°ï¼š 123456789101112/// å£°æ˜Žå¯èƒ½å˜åŒ–çš„æ•°æ®ValueNotifier&lt;int&gt; _statusNotifier = ValueNotifier(0); ValueListenableBuilder&lt;int&gt;( // å»ºç«‹ä¸Ž _statusNotifier çš„ç»‘å®šå…³ç³» valueListenable: _statusNotifier, builder: (c, data, _) &#123; return Text('$data'); &#125;)///æ•°æ®å˜åŒ–é©±åŠ¨ ValueListenableBuilder å±€éƒ¨åˆ·æ–° _statusNotifier.value += 1; äº†è§£åˆ°æœ€åŸºç¡€çš„è§‚å¯Ÿè€…æ¨¡å¼åŽï¼Œçœ‹çœ‹ä¸åŒæ¡†æž¶ä¸­æä¾›çš„ç»„ä»¶ï¼š æ¯”å¦‚ Provider ä¸­æä¾›äº† ChangeNotifierProvider: 1234567891011121314151617181920212223class Counter extend ChangeNotifier &#123; int count = 0; /// è°ƒç”¨æ­¤æ–¹æ³•æ›´æ–°æ‰€æœ‰è§‚å¯ŸèŠ‚ç‚¹ void increment() &#123; count++; notifyListeners(); &#125;&#125;void main() &#123; runApp( ChangeNotifierProvider( /// è¿”å›žä¸€ä¸ªå®žçŽ° ChangeNotifier æŽ¥å£çš„å¯¹è±¡ create: (_) =&gt; Counter(), child: const MyApp( ), ), ); &#125;/// å­èŠ‚ç‚¹é€šè¿‡ Consumer èŽ·å– Counter å¯¹è±¡ Consumer&lt;Counter&gt;( builder:(_, counter, _) =&gt; Text(counter.count.toString()) è¿˜æ˜¯ä¹‹å‰è®¡æ•°å™¨çš„ä¾‹å­ï¼Œè¿™é‡Œ Counter ç»§æ‰¿äº† ChangeNotifier é€šè¿‡é¡¶å±‚çš„ Provider è¿›è¡Œå­˜å‚¨ã€‚ å­èŠ‚ç‚¹é€šè¿‡ Consumer å³å¯èŽ·å–å®žä¾‹ï¼Œ è°ƒç”¨äº† increment æ–¹æ³•ä¹‹åŽï¼Œåªæœ‰å¯¹åº”çš„ Text ç»„ä»¶è¿›è¡Œå˜åŒ–ã€‚ åŒæ ·çš„åŠŸèƒ½ï¼Œåœ¨ Get ä¸­ï¼Œ åªéœ€è¦æå‰è°ƒç”¨ Get.put æ–¹æ³•å­˜å‚¨ Counter å¯¹è±¡ï¼Œ ä¸º GetBuilder ç»„ä»¶æŒ‡å®š Counter ä½œä¸ºæ³›åž‹ã€‚ å› ä¸º Get åŸºäºŽå•ä¾‹ï¼Œæ‰€ä»¥ GetBuilder å¯ä»¥ç›´æŽ¥é€šè¿‡æ³›åž‹èŽ·å–åˆ°å­˜å…¥çš„å¯¹è±¡ï¼Œ å¹¶åœ¨ builder æ–¹æ³•ä¸­æš´éœ²ã€‚è¿™æ · Counter ä¾¿ä¸Žç»„ä»¶å»ºç«‹äº†ç›‘å¬å…³ç³»ï¼Œ ä¹‹åŽ Counter çš„å˜åŠ¨ï¼Œåªä¼šé©±åŠ¨ä»¥å®ƒä½œä¸ºæ³›åž‹çš„ GetBuilder ç»„ä»¶æ›´æ–°ã€‚ 123456789101112131415class Counter extends GetxController &#123; int count = 0; void increase() &#123; count++; update(); &#125;&#125;/// æå‰è¿›è¡Œå­˜å‚¨final counter = Get.put(Counter( )); /// ç›´æŽ¥é€šè¿‡æ³›åž‹èŽ·å–å­˜å‚¨å¥½çš„å®žä¾‹GetBuilder&lt;Counter&gt;( builder: (Counter counter) =&gt; Text('$&#123;counter.count&#125;') ); å®žè·µä¸­çš„å¸¸è§é—®é¢˜åœ¨ä½¿ç”¨è¿™äº›æ¡†æž¶è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹çš„é—®é¢˜ï¼š Provider ä¸­ context å±‚çº§è¿‡é«˜123456789101112131415class MyApp extends StatelessWidget &#123; const MyApp(&#123;Key? key&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; return Provider( create: (_) =&gt; const Count(), child: MaterialApp( home: Scaffold( body: Center(child: Text('$&#123;Provider.of&lt;Counter&gt;(context).count&#125;')), ), ), ); &#125;&#125; å¦‚ä»£ç æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬ç›´æŽ¥å°† Provider ä¸Žç»„ä»¶åµŒå¥—äºŽåŒä¸€å±‚çº§æ—¶ï¼Œ è¿™æ—¶ä»£ç ä¸­çš„ Provider.of(context) è¿è¡Œæ—¶æŠ›å‡º ProviderNotFoundExceptionã€‚ å› ä¸ºæ­¤å¤„æˆ‘ä»¬ä½¿ç”¨çš„ context æ¥è‡ªäºŽ MyAppï¼Œ ä½† Provider çš„ element èŠ‚ç‚¹ä½äºŽ MyApp çš„ä¸‹æ–¹ï¼Œ æ‰€ä»¥ Provider.of(context) æ— æ³•èŽ·å–åˆ° Provider èŠ‚ç‚¹ã€‚ è¿™ä¸ªé—®é¢˜å¯ä»¥æœ‰ä¸¤ç§æ”¹æ³•ï¼Œå¦‚ä¸‹æ–¹ä»£ç æ‰€ç¤ºï¼š æ”¹æ³• 1: é€šè¿‡åµŒå¥— Builder ç»„ä»¶ï¼Œä½¿ç”¨å­èŠ‚ç‚¹çš„ context è®¿é—®: 12345678910111213141516171819class MyApp extends StatelessWidget &#123; const MyApp(&#123;Key? key&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; return Provider( create: (_) =&gt; const Count(), child: MaterialApp( home: Scaffold( body: Center( child: Builder(builder: (builderContext) &#123; return Text('$&#123;Provider.of&lt;Counter&gt;(builderContext).count&#125;'); &#125;), ), ), ), ); &#125;&#125; æ”¹æ³• 2: å°† Provider æè‡³é¡¶å±‚: 123456789101112131415161718192021void main() &#123; runApp( Provider( create: (_) =&gt; Counter(), child: const MyApp(), ), );&#125;class MyApp extends StatelessWidget &#123; const MyApp(&#123;Key? key&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; return MaterialApp( home: Scaffold( body: Center(child: Text('$&#123;Provider.of&lt;Counter&gt;(context).count&#125;')), ), ); &#125;&#125; Get ç”±äºŽå…¨å±€å•ä¾‹å¸¦æ¥çš„é—®é¢˜æ­£å¦‚å‰é¢æåˆ° Get é€šè¿‡å…¨å±€å•ä¾‹ï¼Œé»˜è®¤ä»¥ runtimeType ä¸º key è¿›è¡Œå¯¹è±¡çš„å­˜å‚¨ï¼Œ éƒ¨åˆ†åœºæ™¯å¯èƒ½èŽ·å–åˆ°çš„å¯¹è±¡ä¸ç¬¦åˆé¢„æœŸï¼Œä¾‹å¦‚å•†å“è¯¦æƒ…é¡µä¹‹é—´è·³è½¬ã€‚ ç”±äºŽä¸åŒçš„è¯¦æƒ…é¡µå®žä¾‹å¯¹åº”çš„æ˜¯åŒä¸€ Classï¼Œå³ runtimeType ç›¸åŒã€‚ å¦‚æžœä¸æ·»åŠ  tag å‚æ•°ï¼Œåœ¨æŸä¸ªé¡µé¢è°ƒç”¨ Get.find ä¼šèŽ·å–åˆ°å…¶å®ƒé¡µé¢å·²ç»å­˜å‚¨è¿‡çš„å¯¹è±¡ã€‚ åŒæ—¶ Get ä¸­ä¸€å®šè¦æ³¨æ„è€ƒè™‘åˆ°å¯¹è±¡çš„å›žæ”¶ï¼Œä¸ç„¶å¾ˆæœ‰å¯èƒ½å¼•èµ·å†…å­˜æ³„æ¼ã€‚ è¦ä¹ˆæ‰‹åŠ¨åœ¨é¡µé¢ dispose çš„æ—¶å€™åš delete æ“ä½œï¼Œ è¦ä¹ˆå®Œå…¨ä½¿ç”¨ Get ä¸­æä¾›çš„ç»„ä»¶ï¼Œä¾‹å¦‚ GetBuilderï¼Œ å®ƒä¼šåœ¨ dispose ä¸­é‡Šæ”¾ã€‚ GetBuilder ä¸­åœ¨ dispose é˜¶æ®µè¿›è¡Œå›žæ”¶: 1234567891011121314151617@overridevoid dispose() &#123; super.dispose(); widget.dispose?.call(this); if (_isCreator! || widget.assignId) &#123; if (widget.autoRemove &amp;&amp; GetInstance().isRegistered&lt;T&gt;(tag: widget.tag)) &#123; GetInstance().delete&lt;T&gt;(tag: widget.tag); &#125; &#125; _remove?.call(); controller = null; _isCreator = null; _remove = null; _filter = null;&#125; Get ä¸Ž Provider ä¼˜ç¼ºç‚¹æ€»ç»“é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘å‘å¤§å®¶ä»‹ç»äº†çŠ¶æ€ç®¡ç†çš„å¿…è¦æ€§ã€å®ƒè§£å†³äº† Flutter å¼€å‘ä¸­çš„å“ªäº›é—®é¢˜ä»¥åŠæ˜¯å¦‚ä½•è§£å†³çš„ï¼Œ ä¸Žæ­¤åŒæ—¶ï¼Œæˆ‘ä¹Ÿä¸ºå¤§å®¶æ€»ç»“äº†åœ¨å®žè·µä¸­å¸¸è§çš„é—®é¢˜ç­‰ï¼Œçœ‹åˆ°è¿™é‡Œä½ å¯èƒ½è¿˜ä¼šæœ‰äº›ç–‘æƒ‘ï¼Œåˆ°åº•æ˜¯å¦éœ€è¦ä½¿ç”¨çŠ¶æ€ç®¡ç†ï¼Ÿ åœ¨æˆ‘çœ‹æ¥ï¼Œæ¡†æž¶æ˜¯ä¸ºäº†è§£å†³é—®é¢˜è€Œå­˜åœ¨ã€‚æ‰€ä»¥è¿™å–å†³äºŽä½ æ˜¯å¦ä¹Ÿåœ¨ç»åŽ†ä¸€å¼€å§‹æå‡ºçš„é‚£äº›é—®é¢˜ã€‚ å¦‚æžœæœ‰ï¼Œé‚£ä¹ˆä½ å¯ä»¥å°è¯•ä½¿ç”¨çŠ¶æ€ç®¡ç†è§£å†³ï¼›å¦‚æžœæ²¡æœ‰ï¼Œåˆ™æ²¡å¿…è¦è¿‡åº¦è®¾è®¡ï¼Œä¸ºäº†ä½¿ç”¨è€Œä½¿ç”¨ã€‚ å…¶æ¬¡ï¼Œå¦‚æžœä½¿ç”¨çŠ¶æ€ç®¡ç†ï¼Œé‚£ä¹ˆ Get å’Œ Provider å“ªä¸ªæ›´å¥½ï¼Ÿ è¿™ä¸¤ä¸ªæ¡†æž¶å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œæˆ‘è®¤ä¸ºå¦‚æžœä½ æˆ–è€…ä½ çš„å›¢é˜ŸåˆšæŽ¥è§¦ Flutterï¼Œ ä½¿ç”¨ Provider èƒ½å¸®åŠ©ä½ ä»¬æ›´å¿«ç†è§£ Flutter çš„æ ¸å¿ƒæœºåˆ¶ã€‚ è€Œå¦‚æžœå·²ç»å¯¹ Flutter çš„åŽŸç†æœ‰äº†è§£ï¼ŒGet ä¸°å¯Œçš„åŠŸèƒ½å’Œç®€æ´çš„ APIï¼Œ åˆ™èƒ½å¸®åŠ©ä½ å¾ˆå¥½åœ°æé«˜å¼€å‘æ•ˆçŽ‡ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutterAPPç”Ÿå‘½å‘¨æœŸç›‘å¬]]></title>
    <url>%2Fposts%2Fb07d1684.html</url>
    <content type="text"><![CDATA[State çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®šä¹‰äº† Widget çš„åŠ è½½åˆ°æž„å»ºçš„å…¨è¿‡ç¨‹ï¼Œå¯ä»¥åˆ©ç”¨å…¶å›žè°ƒæœºåˆ¶æ ¹æ® Widget çš„çŠ¶æ€é€‰æ‹©åˆé€‚çš„æ—¶æœºåšåˆé€‚çš„äº‹æƒ…ã€‚è€Œ APP çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ™å®šä¹‰äº† APP ä»Žå¯åŠ¨åˆ°é€€å‡ºçš„å…¨è¿‡ç¨‹ã€‚ å¦‚æžœæƒ³åœ¨å¯¹åº”çš„ APP çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ä¸­åšç›¸åº”çš„å¤„ç†ï¼Œæ¯”å¦‚ APP ä»ŽåŽå°è¿›å…¥å‰å°ã€ä»Žå‰å°é€€åˆ°åŽå°ï¼Œæˆ–æ˜¯åœ¨ UI ç»˜åˆ¶å®ŒåŽåšä¸€äº›å¤„ç†ï¼Œåˆ™å¯ä»¥åº”ç”¨ WidgetsBindingObserver ç±»æ¥å®žçŽ°ã€‚ WidgetsBindingObserver ä¸­çš„å›žè°ƒæ–¹æ³• 1234567891011121314151617181920212223242526// Accessibility ç›¸å…³ç‰¹æ€§å›žè°ƒvoid didChangeAccessibilityFeatures() &#123; &#125;// App ç”Ÿå‘½å‘¨æœŸæ”¹å˜å›žè°ƒvoid didChangeAppLifecycleState(AppLifecycleState state) &#123; &#125;// æœ¬åœ°åŒ–è¯­è¨€æ”¹å˜å›žè°ƒvoid didChangeLocales(List&lt;Locale&gt; locale) &#123; &#125;// ç³»ç»Ÿçª—å£ç›¸å…³æ”¹å˜å›žè°ƒvoid didChangeMetrics() &#123; &#125;// ç³»ç»Ÿäº®åº¦æ”¹å˜å›žè°ƒvoid didChangePlatformBrightness() &#123; &#125;// æ–‡æœ¬ç¼©æ”¾ç³»æ•°æ”¹å˜å›žè°ƒvoid didChangeTextScaleFactor() &#123; &#125;// å†…å­˜ä¸è¶³è­¦å‘Šå›žè°ƒvoid didHaveMemoryPressure() &#123; &#125;// é¡µé¢ popFuture&lt;bool&gt; didPopRoute() =&gt; Future&lt;bool&gt;.value(false);// é¡µé¢ pushFuture&lt;bool&gt; didPushRoute(String route) =&gt; Future&lt;bool&gt;.value(false); è¦ä½¿ç”¨ä»¥ä¸Šå›žè°ƒæ–¹æ³•ï¼Œåªéœ€é€šè¿‡ç»™ WidgetsBindingObserver å•ä¾‹å¯¹è±¡è®¾ç½®ç›‘å¬å™¨å³å¯ç›‘å¬ç›¸å…³å›žè°ƒæ–¹æ³• ç”Ÿå‘½å‘¨æœŸå›žè°ƒdidChangeAppLifecycleState å›žè°ƒæ–¹æ³•ä¸­ï¼Œæœ‰ä¸€ä¸ªå‚æ•°ç±»åž‹ä¸º AppLifecycleState çš„æžšä¸¾ç±»ï¼Œè¿™ä¸ªæžšä¸¾ç±»æ˜¯ Flutter å¯¹ App ç”Ÿå‘½å‘¨æœŸçŠ¶æ€çš„å°è£…ï¼Œå¸¸ç”¨çš„çŠ¶æ€åŒ…æ‹¬ inactiveã€pausedã€resumed inactiveï¼šå¤„åœ¨ä¸æ´»åŠ¨çŠ¶æ€ï¼Œæ— æ³•å¤„ç†ç”¨æˆ·å“åº” pausedï¼šä¸å¯è§ä¸”ä¸èƒ½å“åº”ç”¨æˆ·çš„è¾“å…¥ï¼Œä½†åœ¨åŽå°ç»§ç»­æ´»åŠ¨ä¸­ resumedï¼šå¯è§çš„ï¼Œä¸”èƒ½å“åº”ç”¨æˆ·çš„è¾“å…¥ 123456789101112131415161718192021222324252627class AppLifecycleReactor extends StatefulWidget &#123; const AppLifecycleReactor(&#123; Key key &#125;) : super(key: key); @override _AppLifecycleReactorState createState() =&gt; _AppLifecycleReactorState();&#125;class _AppLifecycleReactorState extends State&lt;AppLifecycleReactor&gt; with WidgetsBindingObserver &#123; @override void initState() &#123; super.initState(); WidgetsBinding.instance.addObserver(this);// æ³¨å†Œç›‘å¬å™¨ &#125; @override void dispose() &#123; WidgetsBinding.instance.removeObserver(this);// ç§»é™¤ç›‘å¬å™¨ super.dispose(); &#125; AppLifecycleState _notification; @override void didChangeAppLifecycleState(AppLifecycleState state) &#123; print("$state"); &#125;&#125; å¯ä»¥è¯•ç€åˆ‡æ¢ä¸‹å‰åŽå°ï¼Œè§‚å¯Ÿä¸‹æŽ§åˆ¶å°è¾“å‡ºçš„ App çŠ¶æ€ ä»Žå‰å°é€€åˆ°åŽå°ï¼ŒæŽ§åˆ¶å°æ‰“å°çš„ App ç”Ÿå‘½å‘¨æœŸå˜åŒ–å¦‚ä¸‹ï¼š AppLifecycleState.resumed-&gt;AppLifecycleState.inactive-&gt;AppLifecycleState.paused ä»ŽåŽå°åˆ‡æ¢å›žå‰å°ï¼ŒæŽ§åˆ¶å°æ‰“å°çš„ App ç”Ÿå‘½å‘¨æœŸå˜åŒ–å¦‚ä¸‹ï¼š AppLifecycleState.paused-&gt;AppLifecycleState.inactive-&gt;AppLifecycleState.resumed å¸§ç»˜åˆ¶å›žè°ƒæœ‰æ—¶é™¤äº†éœ€è¦ç›‘å¬ App çš„ç”Ÿå‘½å‘¨æœŸå›žè°ƒå¤–ï¼Œè¿˜éœ€è¦åœ¨ç»„ä»¶å®Œæˆæ¸²æŸ“åŽåšä¸€äº›ä¸Žæ˜¾ç¤ºç›¸å…³çš„å…¶ä»–å¤„ç†ï¼Œæ¯”å¦‚åˆ‡æ¢çº¿ç¨‹ç­‰ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ WidgetsBinding æ¥å®žçŽ° WidgetsBinding æä¾›äº†å•æ¬¡ Frame ç»˜åˆ¶å›žè°ƒåŠå®žæ—¶ Frame ç»˜åˆ¶å›žè°ƒä¸¤ç§æœºåˆ¶ å•æ¬¡ Frame ç»˜åˆ¶å›žè°ƒï¼šé€šè¿‡ addPostFrameCallback å®žçŽ°ã€‚åœ¨å½“å‰ Frame ç»˜åˆ¶å®ŒåŽè¿›è¡Œå›žè°ƒï¼Œä¸”åªä¼šå›žè°ƒä¸€æ¬¡ï¼Œå¦‚æžœéœ€è¦å¤šæ¬¡å›žè°ƒåˆ™éœ€è®¾ç½®å¤šæ¬¡ 123WidgetsBindingObserver.instance.addPostFrameCallback((_)&#123; print("addPostFrameCallback ç»˜åˆ¶å›žè°ƒ"); // åªå›žè°ƒä¸€æ¬¡&#125;); å®žæ—¶ Frame ç»˜åˆ¶å›žè°ƒï¼šé€šè¿‡ addPersistentFrameCallback å®žçŽ°ã€‚åœ¨æ¯æ¬¡ç»˜åˆ¶ Frame ç»“æŸåŽè¿›è¡Œå›žè°ƒ 123WidgetsBindingObserver.instance.addPersistentFrameCallback((_)&#123; print("addPersistentFrameCallback ç»˜åˆ¶å›žè°ƒ"); // æ¯å¸§éƒ½å›žè°ƒ&#125;);]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå‡çº§åˆ°æŒ‡å®šç‰ˆæœ¬]]></title>
    <url>%2Fposts%2F7a75b9fc.html</url>
    <content type="text"><![CDATA[ä¸€ã€é€šè¿‡å‘½ä»¤ï¼š1234567æŸ¥çœ‹ç‰ˆæœ¬ï¼š flutter --versionæ£€æŸ¥çŽ¯å¢ƒï¼šflutter doctoræŸ¥çœ‹æ¸ é“ï¼šflutter channelåˆ‡æ¢æ¸ é“ï¼ˆstable, beta, dev, masterï¼‰ï¼šflutter channel stableå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼šflutter upgrade å‡çº§åˆ°æŒ‡å®šç‰ˆæœ¬ï¼šflutter upgrade v2.5.0å›žé€€åˆ°æŒ‡å®šç‰ˆæœ¬ï¼šflutter downgrade v2.5.0 äºŒã€é€šè¿‡gitå›žé€€ç‰ˆæœ¬ï¼š1ã€è¿›å…¥flutter githubæ‰¾åˆ°è¦å›žé€€çš„ç‰ˆæœ¬ 2ã€cdè¿›å…¥åˆ°å­˜æ”¾flutter sdkç›®å½•ï¼Œè¿è¡Œå›žé€€æŒ‡ä»¤ git reset â€“hard [commit_id] ä¾‹å¦‚-&gt; git reset â€“hard 4cc385b4b84ac2f816d939a49ea1f328c4e0b48e 3ã€æŸ¥çœ‹flutterç‰ˆæœ¬ æŸ¥çœ‹ç‰ˆæœ¬-&gt; flutter doctor æˆ–è€… flutter â€“version]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter3.0 é‡ç£…å‘å¸ƒ]]></title>
    <url>%2Fposts%2F216218f9.html</url>
    <content type="text"><![CDATA[é¢ è¦†å¼€å‘è€…å¼€å‘æ–¹å¼çš„Flutter Flutterçš„è¯žç”Ÿæ˜¯ä¸ºäº†å½»åº•æ”¹å˜åº”ç”¨ç¨‹åºå¼€å‘æ–¹å¼ï¼šå°†Webçš„è¿­ä»£å¼€å‘æ¨¡å¼ä¸Žç¡¬ä»¶åŠ é€Ÿå›¾å½¢æ¸²æŸ“å’Œåƒç´ çº§æŽ§åˆ¶ç›¸ç»“åˆï¼Œè¿™äº›ä»¥å‰å¯æ˜¯æ¸¸æˆçš„ä¸“åˆ©ï¼Œè€ŒçŽ°åœ¨å®ƒè¢«æ¥è¿›è¡Œåº”ç”¨å¼€å‘ã€‚è‡ªä»ŽFlutter 1.0æµ‹è¯•ç‰ˆå‘å¸ƒä»¥æ¥ï¼Œè°·æ­Œå¯¹å…¶ä¸æ–­åœ°è¿›è¡Œä¼˜åŒ–ï¼Œè®©Flutterçš„åŠŸèƒ½æ—¥è¶‹å®Œå–„ï¼Œæ¯”å¦‚æ·»åŠ äº†æ–°çš„æ¡†æž¶åŠŸèƒ½å’Œå°éƒ¨ä»¶ã€ä¸Žåº•å±‚å¹³å°è¿›è¡Œæ›´åŠ æ·±å…¥çš„é›†æˆã€æä¾›äº†ä¸°å¯Œçš„è½¯ä»¶åŒ…åº“ï¼Œå¹¶ä¸”åœ¨æ€§èƒ½å’Œå·¥å…·ä¸Šä¹Ÿåšäº†è®¸å¤šçš„æ”¹è¿›ã€‚ ä»Ž1.0åˆ°3.0ç‰ˆæœ¬ï¼ŒFlutterè¢«è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…ä½¿ç”¨æ¥æž„å»ºåº”ç”¨ç¨‹åºã€‚æ®è°·æ­Œæœ€æ–°ç”¨æˆ·ç ”ç©¶æŠ¥å‘Šæ˜¾ç¤ºï¼š 91%çš„å¼€å‘äººå‘˜è®¤ä¸ºFlutterèƒ½ç¼©çŸ­æž„å»ºå’Œå‘å¸ƒåº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„æ—¶é—´ï¼› 85%çš„å¼€å‘äººå‘˜è®¤ä¸ºFlutterä½¿ä»–ä»¬çš„åº”ç”¨ç¨‹åºæ›´ç¾Žè§‚ï¼› 85%çš„äººè®¤å¯Flutterèƒ½ä½¿ä»–ä»¬åœ¨æ›´å¤šçš„å¹³å°ä¸Šå‘å¸ƒä»–ä»¬çš„åº”ç”¨ç¨‹åºã€‚ å®žçŽ°â€œå¤§ä¸€ç»Ÿâ€ï¼Œä¸€ä¸ªFlutterï¼Œæ¨ªè·¨iOSã€Androidã€Webã€Windowsã€macOSã€Linuxå…­å¤§å¹³å° Flutter 3.0ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§ä½¿ç”¨Dartç¼–ç¨‹è¯­è¨€ä¸ºå…­å¤§é¢å‘æ¶ˆè´¹è€…çš„ä¸»æµå¹³å°ï¼ˆiOSã€Androidã€Webã€Windowsã€macOSã€Linuxï¼‰ç›®æ ‡ç¼–å†™åº”ç”¨ç¨‹åºçš„æ–¹æ³•ã€‚åŸºäºŽFlutter 3ï¼Œå¼€å‘è€…èƒ½æ‹¥æœ‰ä»Žå•ä¸ªä»£ç åº“ä¸ºå…­ä¸ªå¹³å°æž„å»ºåº”ç”¨ç¨‹åºçš„ä½“éªŒï¼Œè¿™å°†ä½¿å…¶ç”Ÿäº§åŠ›å¤§å¤§æé«˜ã€‚ ä¸åŒäºŽä¹‹å‰çš„ç‰ˆæœ¬ï¼ŒFlutter 3æ–°å¢žäº†å¯¹macOSå’ŒLinuxåº”ç”¨ç¨‹åºçš„ç¨³å®šæ”¯æŒã€‚æ·»åŠ æ–°å¹³å°çš„æ”¯æŒå¹¶ä¸åƒæˆ‘ä»¬æƒ³è±¡ä¸­é‚£ä¹ˆç®€å•ï¼Œå…¶éœ€è¦çš„ä¸ä»…ä»…æ˜¯æ¸²æŸ“åƒç´ ï¼Œè¿˜éœ€è¦åšå¾ˆå¤šå…¶ä»–çš„å·¥ä½œï¼Œæ¯”å¦‚æ–°çš„è¾“å…¥å’Œäº¤äº’æ¨¡åž‹ã€ç¼–è¯‘å’Œç”Ÿæˆæ”¯æŒã€å¯è®¿é—®æ€§å’Œå›½é™…åŒ–ä»¥åŠç‰¹å®šäºŽå¹³å°çš„é›†æˆç­‰ã€‚Flutterä¸ä»…è®©ç”¨æˆ·èƒ½çµæ´»åœ°å……åˆ†åˆ©ç”¨åº•å±‚æ“ä½œç³»ç»Ÿï¼ŒåŒæ—¶èƒ½å¤Ÿæ ¹æ®éœ€è¦å…±äº«å°½å¯èƒ½å¤šçš„UIã€‚ å…·ä½“æ¥çœ‹ï¼Œåœ¨macOSä¸Šï¼ŒFlutter3å¯ä»¥é€šè¿‡é€šç”¨äºŒè¿›åˆ¶æž„å»ºæ–¹å¼æ”¯æŒè‹±ç‰¹å°”å’ŒApple Siliconï¼Œå…è®¸åº”ç”¨æ‰“åŒ…åœ¨è¿™ä¸¤ç§æž¶æž„ä¸Šæœ¬æœºè¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚åŒæ—¶ï¼Œç”±äºŽDartå¯¹Apple Siliconçš„æ”¯æŒï¼Œç¼–è¯‘é€Ÿåº¦ä¹Ÿå°†æ›´å¿«ã€‚åœ¨Linuxä¸Šï¼ŒCanonicalå’Œè°·æ­Œåˆä½œæä¾›äº†ä¸€ä¸ªé«˜åº¦é›†æˆä¸”åœ¨åŒç±»ä¸­æœ€ä½³çš„å¼€å‘é€‰é¡¹ã€‚ å¦å¤–ï¼ŒFlutter 3 è¿˜æ”¹è¿›äº†è®¸å¤šåŸºç¡€åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ€§èƒ½æ”¹è¿›ã€Material You æ”¯æŒå’Œç”Ÿäº§åŠ›æ›´æ–°ã€‚ é™¤äº†ä¸Šè¿°æ‰€æåˆ°çš„å†…å®¹ï¼Œåœ¨æ–°ç‰ˆæœ¬ä¸­ï¼ŒFlutterå¯ä»¥åœ¨è‹¹æžœèŠ¯ç‰‡ä¸Šè¿›è¡ŒåŽŸç”Ÿå¼€å‘ã€‚è™½ç„¶Flutterè‡ªå‘å¸ƒä»¥æ¥ï¼Œä¸€ç›´ä¸Žæ­è½½M1èŠ¯ç‰‡çš„è‹¹æžœè®¾å¤‡å…¼å®¹ï¼Œä½†FlutterçŽ°åœ¨å……åˆ†åˆ©ç”¨äº†Dartå¯¹AppleèŠ¯ç‰‡çš„æ”¯æŒï¼Œå¯ä»¥åœ¨M1é©±åŠ¨çš„è®¾å¤‡ä¸Šå®žçŽ°æ›´å¿«çš„ç¼–è¯‘ï¼Œå¹¶æ”¯æŒmacOSåº”ç”¨ç¨‹åºçš„é€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ å¦å¤–ï¼Œéšç€è°·æ­Œçš„Material Design 3åœ¨Flutter 3è¿™ä¸ªç‰ˆæœ¬ä¸­åŸºæœ¬å·²ç»å®Œæˆï¼Œå¼€å‘äººå‘˜èƒ½å¤Ÿåˆ©ç”¨é€‚åº”æ€§å¼ºçš„è·¨å¹³å°è®¾è®¡ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿæä¾›åŠ¨æ€é…è‰²æ–¹æ¡ˆå’Œæ›´æ–°çš„è§†è§‰ç»„ä»¶ï¼š Flutteræ˜¯ç”±Darté©±åŠ¨çš„ï¼ŒDartæ˜¯ä¸€ç§ç”¨äºŽå¤šå¹³å°å¼€å‘çš„é«˜ç”Ÿäº§åŠ›ã€å¯ç§»æ¤çš„è¯­è¨€ã€‚è°·æ­Œåœ¨Dartä¸­æ·»åŠ äº†ä¸€äº›æ–°çš„è¯­è¨€åŠŸèƒ½ã€‚è¿™äº›æ–°çš„è¯­è¨€åŠŸèƒ½å¸¦æ¥çš„å¥½å¤„é¢‡å¤šï¼Œæ¯”å¦‚èƒ½å¤Ÿå‡å°‘æ¨¡æ¿ã€æé«˜å¯è¯»æ€§ã€æä¾›å®žéªŒæ€§çš„RISC-Væ”¯æŒï¼Œä»¥åŠå‡çº§çš„linterå’Œæ–°çš„æ–‡æ¡£ç­‰ã€‚åœ¨ä¸“ç”¨çš„åšå®¢ä¸­å¯ä»¥èŽ·å¾—å…³äºŽDart 2.17æ‰€æœ‰æ–°æ›´æ”¹çš„ç»†èŠ‚ï¼Œå¯é€šè¿‡é“¾æŽ¥æŸ¥çœ‹https://medium.com/dartlang Firebaseå’ŒFlutteræ·±åº¦é›†æˆ å½“ç„¶ï¼Œæž„å»ºåº”ç”¨çš„ä¸ä»…ä»…æ˜¯UIæ¡†æž¶ã€‚ä¸€å¥—å…¨é¢çš„å·¥å…·åœ¨æž„å»ºã€å¼€å‘å’Œæ“ä½œåº”ç”¨ä¸­ä¹Ÿæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œæ¯”å¦‚èº«ä»½éªŒè¯ã€æ•°æ®å‚¨å­˜ã€äº‘åŠŸèƒ½å’Œè®¾å¤‡æµ‹è¯•ç­‰æœåŠ¡ã€‚è€ŒåŒ…æ‹¬Sentryã€AppWriteå’ŒAWS Amplifyåœ¨å†…çš„å¾ˆå¤šæœåŠ¡éƒ½æ”¯æŒFlutterã€‚ è°·æ­Œæä¾›çš„åº”ç”¨æœåŠ¡Firebaseä½¿ç”¨çŽ‡å¾ˆé«˜ï¼Œåœ¨SlashDataçš„å¼€å‘è€…åŸºå‡†æµ‹è¯•ä¸­ï¼Œæœ‰62%çš„Flutterå¼€å‘è€…è¡¨ç¤ºä¼šåœ¨å¼€å‘åº”ç”¨ç¨‹åºæ—¶ä½¿ç”¨Firebaseã€‚å› æ­¤ï¼Œåœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè°·æ­Œä¸€ç›´è‡´åŠ›äºŽå°†Flutterä¸ŽFirebaseæ›´å¥½åœ°ç»“åˆï¼Œä»¥åˆ›é€ ä¸€æµçš„çš„Flutteré›†æˆã€‚ä¸ºæ­¤ï¼Œè°·æ­Œå°†Flutterä¸­çš„Firebaseæ’ä»¶æå‡åˆ°1.0ï¼ˆç”¨äºŽæ·»åŠ æ›´å¥½çš„æ–‡æ¡£å’Œå·¥å…·ï¼‰ï¼Œä»¥åŠæä¾›åƒFlutterFire UIè¿™æ ·çš„æ–°å°éƒ¨ä»¶ï¼ˆä¸ºå¼€å‘äººå‘˜æä¾›å¯é‡ç”¨çš„UIç”¨äºŽèº«ä»½éªŒè¯å’Œé…ç½®æ–‡ä»¶å±å¹•ï¼‰ã€‚ ä»Šå¤©ï¼Œè°·æ­Œå®£å¸ƒå°†Flutterå’ŒFirebaseçš„é›†æˆä½œä¸ºFirebaseäº§å“çš„æ ¸å¿ƒï¼Œæ­£åœ¨å°†æºä»£ç å’Œæ–‡æ¡£ç§»åŠ¨åˆ°Firebaseä¸»å­˜å‚¨åº“å’Œç«™ç‚¹ä¸­ï¼Œè€Œä¸”è°·æ­Œæœ‰å¯èƒ½ä¸ŽAndroidå’ŒiOSåŒæ­¥å‘å±•Firebaseå¯¹Flutterçš„æ”¯æŒã€‚ æ­¤å¤–ï¼Œä¸ºäº†ä½¿ç”¨Crashlyticsï¼ˆFirebaseå¹¿å—æ¬¢è¿Žçš„å®žæ—¶å´©æºƒæŠ¥å‘Šè§£å†³æœåŠ¡ï¼‰è°·æ­Œè¿˜è¿›è¡Œäº†ä»¥ä¸‹é‡å¤§æ”¹è¿›ã€‚ é€šè¿‡æ›´æ–°Flutter Crashlyticsæ’ä»¶ï¼Œå¯ä»¥è®©ç”¨æˆ·å®žæ—¶è·Ÿè¸ªè‡´å‘½çš„é”™è¯¯ï¼Œä»Žè€Œä¸ºç”¨æˆ·æä¾›ä¸Žå…¶ä»–iOSæˆ–Androidå¼€å‘äººå‘˜ç›¸åŒçš„åŠŸèƒ½é›†ï¼› å‡çº§Crashlyticsåˆ†æžç®¡é“ï¼Œä»¥æ”¹è¿›Flutterå´©æºƒçš„èšç±»åˆ†æžï¼Œä»Žè€Œæ›´å¿«åœ°å¯¹é—®é¢˜è¿›è¡Œåˆ†ç±»ã€ä¼˜å…ˆæŽ’åºå’Œä¿®å¤ï¼› ç®€åŒ–äº†æ’ä»¶è®¾ç½®è¿‡ç¨‹ï¼Œå› æ­¤åªéœ€å‡ ä¸ªæ­¥éª¤å³å¯ä»Žç”¨æˆ·çš„Dartä»£ç ä¸­å¯åŠ¨å¹¶è¿è¡ŒCrashlyticsã€‚ Flutterä¼‘é—²æ¸¸æˆå·¥å…·åŒ… å¯¹äºŽå¤§å¤šæ•°å¼€å‘è€…æ¥è¯´ï¼ŒFlutteråªæ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¡†æž¶ã€‚ä½†æ˜¯ï¼Œåœ¨ä¼‘é—²æ¸¸æˆå¼€å‘é¢†åŸŸä¹Ÿæœ‰Flutterçš„ä¸€ç•ªå¤©åœ°ã€‚å›´ç»•ä¼‘é—²æ¸¸æˆå¼€å‘çš„ç¤¾åŒºä¹Ÿåœ¨ä¸æ–­å£®å¤§ï¼Œå¾ˆå¤šå¼€å‘è€…åˆ©ç”¨Flutteræä¾›çš„ç¡¬ä»¶åŠ é€Ÿå›¾å½¢æ”¯æŒå’ŒFlameç­‰å¼€æºæ¸¸æˆå¼•æ“Žã€‚ ä¸ºäº†è®©ä¼‘é—²æ¸¸æˆå¼€å‘è€…èƒ½å¤Ÿæ›´èƒ½æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œåœ¨ä»Šå¤©çš„I/Oå¤§ä¼šä¸Šï¼Œè°·æ­Œå®£å¸ƒå‘å¸ƒFlutter Casual Games Toolkitï¼Œå®ƒä¸ä»…æä¾›äº†ä¸€ä¸ªæ¨¡æ¿å’Œæœ€ä½³å®žè·µçš„å…¥é—¨å·¥å…·åŒ…ï¼Œè¿˜èƒ½å¸¦æ¥å¹¿å‘Šå’Œäº‘æœåŠ¡çš„è‰¯å¥½ä½“éªŒã€‚ è™½ç„¶Flutterå¹¶ä¸æ˜¯ä¸ºé«˜å¼ºåº¦çš„3DåŠ¨ä½œæ¸¸æˆè€Œç”Ÿçš„ï¼Œä½†æ˜¯æœ‰è·¨åº¦æ˜¯å¸¸æœ‰çš„äº‹ï¼Œå³ä½¿æ˜¯ä¸€äº›æ¸¸æˆä¹Ÿè½¬å‘Flutterçš„éžæ¸¸æˆUIï¼Œæ¯”å¦‚åƒPUBG Mobileè¿™æ ·æ‹¥æœ‰æ•°äº¿ç”¨æˆ·çš„æµè¡Œæ¸¸æˆã€‚é‚£ä¹ˆè°·æ­Œèƒ½æŠŠæŠ€æœ¯å‘å±•åˆ°ä»€ä¹ˆç¨‹åº¦å‘¢ï¼Ÿä¸ºäº†å¾—åˆ°è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œè°·æ­Œåˆ›å»ºäº†ä¸€ä¸ªæœ‰è¶£çš„å¼¹çƒæ¸¸æˆï¼ˆç”±Firebaseå’ŒFlutterçš„ç½‘ç»œæ”¯æŒæä¾›æ”¯æŒï¼‰ã€‚ I/Oå¼¹çƒæ¸¸æˆä¸­è®¾è®¡äº†ä¸€ä¸ªå¸¦æœ‰å››ä¸ªå‰ç¥¥ç‰©ï¼ˆFlutterçš„Dashã€Firebaseçš„Sparkyã€Androidæœºå™¨äººå’ŒChromeçš„æé¾™ï¼‰çš„å®šåˆ¶æ¡Œå­ã€‚çŽ©å®¶èƒ½åœ¨æ¸¸æˆä¸­ä¸Žåˆ«äººä¸€æ•™é«˜ä¸‹ï¼Œè°·æ­Œé€šè¿‡è¿™ç§æ–¹å¼æ¥å±•ç¤ºFlutterå¤šåŠŸèƒ½æ€§ï¼Œè¿™å¾ˆæœ‰è¶£ã€‚ Snearhè®¤ä¸ºï¼Œæ¸¸æˆå¼€å‘å’Œä¼ä¸šå¼€å‘å¯¹æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒæœ‰ç€å…±åŒçš„è¿½æ±‚ï¼Œè€ŒFlutterå›¢é˜Ÿä¸€ç›´åœ¨åŠªåŠ›è§£å†³ç•Œé¢å¡é¡¿ç­‰é—®é¢˜ï¼Œæœ€ç»ˆè®©æ¡†æž¶èƒ½å¤Ÿæ›´é€‚ç”¨äºŽå„ç§ç±»åž‹çš„åº”ç”¨ç¨‹åºã€‚ ã€Œä¸€å¥—ä»£ç ï¼Œåˆ°å¤„è¿è¡Œã€ï¼Œä»Ž Flutter 3 å¼€å§‹ ä½œä¸ºä¸€æ¬¾å¼€æºå·¥å…·ï¼ŒFlutterä¸ä»…ä»…æ˜¯è°·æ­Œçš„æ¡†æž¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸šç•Œå¼€å‘è€…éƒ½èƒ½ä½¿ç”¨çš„äº§å“ã€‚æ— è®ºæ˜¯é€šè¿‡è´¡çŒ®æ–°çš„ä»£ç æˆ–æ–‡æ¡£ã€åˆ›å»ºèµ‹äºˆæ ¸å¿ƒæ¡†æž¶æ–°çš„è¶…èƒ½åŠ›çš„è½¯ä»¶åŒ…ã€ç¼–å†™æŒ‡å¯¼ä»–äººçš„ä¹¦ç±å’ŒåŸ¹è®­è¯¾ç¨‹ï¼Œè¿˜æ˜¯å¸®åŠ©ç»„ç»‡æ´»åŠ¨å’Œç”¨æˆ·ç»„ç­‰ç­‰ï¼Œäººäººéƒ½å¯ä»¥å‚ä¸Žå…¶ä¸­ã€‚Flutter 3çš„å‘å¸ƒå¤§å¤§åœ°æé«˜äº†å¼€å‘è€…çš„æ•ˆçŽ‡ï¼Œä¹Ÿç»ˆè®©å¤§å®¶éƒ½å®žçŽ°äº†ã€Œä¸€å¥—ä»£ç ï¼Œåˆ°å¤„è¿è¡Œã€çš„æ¢¦æƒ³ã€‚ åŽŸæ–‡åœ°å€ï¼šhttps://medium.com/flutter/introducing-flutter-3-5eb69151622f å‚è€ƒåœ°å€ï¼šhttps://juejin.cn/post/7096617842023333925]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutteræ··åˆå¼€å‘ç»„ä»¶åŒ–æž¶æž„]]></title>
    <url>%2Fposts%2F187f2070.html</url>
    <content type="text"><![CDATA[èƒŒæ™¯ Flutterçš„å››ç§å·¥ç¨‹ç±»åž‹ Flutterå·¥ç¨‹Pubä¾èµ–ç®¡ç† FlutterModuleé›†æˆåˆ°Native Flutterä¸ŽNativeé€šä¿¡ Flutterç»„ä»¶åŒ–å·¥ç¨‹ åŽåº ä¸€ã€èƒŒæ™¯Flutter åœ¨ç›®å‰è·¨å¹³å°æ–¹æ¡ˆä¸­æœ‰æ›´å¥½çš„å¹³å°ä¸€è‡´æ€§ä»¥åŠæ›´ä¼˜çš„ä½“éªŒã€‚ä½†å¯¹äºŽæœ¬èº«å·²æœ‰æˆç†Ÿçš„ä¸šåŠ¡ä»£ç çš„é¡¹ç›®æ¥è¯´ï¼Œæ›´å¤šçš„æ˜¯é‡‡ç”¨æ··åˆæ ˆçš„æ–¹å¼ï¼Œåœ¨ä¸å˜æ›´åŽŸæœ‰ App ä¸šåŠ¡çš„åŸºç¡€ä¸Šï¼Œå°† Flutter èƒ½åŠ›æ‰©å±•ä¸ºå­æ¨¡å—è¿›è¡ŒæŽ¥å…¥å’Œå¼€å‘ã€‚è¿™æ ·å¹¶ä¸å½±å“åŽŸæœ‰çš„ä¸šåŠ¡å’ŒåŽŸç”Ÿèƒ½åŠ›ï¼Œåˆå¯ä»¥ç»“åˆä¸šåŠ¡éœ€æ±‚è¿›è¡ŒæŠ€æœ¯é€‰æ‹©ã€‚ äºŒã€Flutter çš„å››ç§å·¥ç¨‹ç±»åž‹2.1. Flutter Applicationæ ‡å‡†çš„Flutter Appå·¥ç¨‹ï¼ŒåŒ…å«æ ‡å‡†çš„Dartå±‚ä¸ŽNativeå¹³å°å±‚ 2.2. Flutter ModuleFlutterç»„ä»¶å·¥ç¨‹ï¼Œä»…åŒ…å«Dartå±‚å®žçŽ°ï¼ŒNativeå¹³å°å±‚å­å·¥ç¨‹ä¸ºé€šè¿‡Flutterè‡ªåŠ¨ç”Ÿæˆçš„éšè—å·¥ç¨‹ 2.3. Flutter PluginFlutterå¹³å°æ’ä»¶å·¥ç¨‹ï¼ŒåŒ…å«Dartå±‚ä¸ŽNativeå¹³å°å±‚çš„å®žçŽ° 2.4. Flutter PackageFlutterçº¯Dartæ’ä»¶å·¥ç¨‹ï¼Œä»…åŒ…å«Dartå±‚çš„å®žçŽ°ï¼Œå¾€å¾€å®šä¹‰ä¸€äº›å…¬å…±Widget ä¸‰ã€Flutterå·¥ç¨‹Pubä¾èµ–ç®¡ç†Flutterå·¥ç¨‹ä¹‹é—´çš„ä¾èµ–ç®¡ç†æ˜¯é€šè¿‡Pubæ¥ç®¡ç†çš„ï¼Œä¾èµ–çš„äº§ç‰©æ˜¯ç›´æŽ¥æºç ä¾èµ–ï¼Œè¿™ç§ä¾èµ–æ–¹å¼å’ŒIOSä¸­çš„Podæœ‰ç‚¹åƒï¼Œéƒ½å¯ä»¥è¿›è¡Œä¾èµ–åº“ç‰ˆæœ¬å·çš„åŒºé—´é™å®šä¸ŽGitè¿œç¨‹ä¾èµ–ç­‰ï¼Œå…¶ä¸­å…·ä½“å£°æ˜Žä¾èµ–æ˜¯åœ¨pubspec.yamlæ–‡ä»¶ä¸­ï¼Œå…¶ä¸­çš„ä¾èµ–ç¼–å†™æ˜¯åŸºäºŽYAMLè¯­æ³•ï¼ŒYAMLæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥ç¼–å†™æ–‡ä»¶é…ç½®çš„è¯­è¨€ã€‚ å£°æ˜Žä¾èµ–åŽï¼Œé€šè¿‡è¿è¡Œflutter packages getå‘½åï¼Œä¼šä»Žè¿œç¨‹æˆ–æœ¬åœ°æ‹‰å–å¯¹åº”çš„ä¾èµ–ï¼ŒåŒæ—¶ä¼šç”Ÿæˆpubspec.lockæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å’ŒIOSä¸­çš„Podfile.lockæžå…¶ç›¸ä¼¼ï¼Œä¼šåœ¨æœ¬åœ°é”å®šå½“å‰ä¾èµ–çš„åº“ä»¥åŠå¯¹åº”ç‰ˆæœ¬å·ï¼Œåªæœ‰å½“æ‰§è¡Œflutter packages upgradeæ—¶ï¼Œè¿™æ—¶æ‰ä¼šæ›´æ–°ã€‚ å››ã€Flutter module é›†æˆåˆ° Nativeä¸Šè¿°è¯´çš„å¦‚æžœæˆ‘ä»¬è¦åˆ©ç”¨Flutteræ¥å¼€å‘æˆ‘ä»¬çŽ°æœ‰Nativeå·¥ç¨‹ä¸­çš„ä¸€ä¸ªæ¨¡å—æˆ–åŠŸèƒ½ï¼Œè‚¯å®šå¾—ä¸èƒ½æ”¹å˜Nativeçš„å·¥ç¨‹ç»“æž„ä»¥åŠä¸å½±å“çŽ°æœ‰çš„å¼€å‘æµç¨‹ï¼Œé‚£ä¹ˆï¼Œä»¥ä½•ç§æ–¹å¼è¿›è¡Œæ··åˆå¼€å‘å‘¢ï¼Ÿ 4.1 Flutteræ··åˆå¼€å‘æ¨¡å¼Flutteræ··åˆå¼€å‘æ¨¡å¼ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š Flutter App æˆ‘ä»¬å¯ä»¥ç›´æŽ¥å¿½ç•¥ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¼€å‘å…¨æ–°çš„Flutter Appå·¥ç¨‹ã€‚ å¯¹äºŽFlutter Moduleï¼Œå®˜æ–¹æä¾›çš„æœ¬åœ°ä¾èµ–ä¾¿æ˜¯ä½¿ç”¨Flutter Moduleä¾èµ–åˆ°Native Appçš„ï¼Œè€Œå¯¹äºŽFlutterå·¥ç¨‹æ¥è¯´ï¼Œæž„å»ºFlutterå·¥ç¨‹å¿…é¡»å¾—æœ‰ä¸ªmain.dartä¸»å…¥å£ï¼Œæ°å¥½Flutter Moduleä¸­ä¹Ÿæœ‰ä¸»å…¥å£ã€‚ 4.2 Flutter Moduleçš„åˆ›å»ºæ–¹å¼Flutter moduleåˆ›å»ºæ–¹å¼ä¸€èˆ¬æœ‰ä¸¤ç§ï¼š aã€é€šè¿‡å‘½ä»¤æ¥åˆ›å»º flutter create -t module â€“org com.vhall.module vhall_flutter_module 123456789101112131415161718Creating project vhall_flutter_module... vhall_flutter_module/test/widget_test.dart (created) vhall_flutter_module/vhall_flutter_module.iml (created) vhall_flutter_module/.gitignore (created) vhall_flutter_module/.metadata (created) vhall_flutter_module/pubspec.yaml (created) vhall_flutter_module/README.md (created) vhall_flutter_module/lib/main.dart (created) vhall_flutter_module/vhall_flutter_module_android.iml (created) vhall_flutter_module/analysis_options.yaml (created) vhall_flutter_module/.idea/libraries/Dart_SDK.xml (created) vhall_flutter_module/.idea/modules.xml (created) vhall_flutter_module/.idea/workspace.xml (created)Running &quot;flutter pub get&quot; in vhall_flutter_module... 1,226msWrote 12 files.All done!Your module code is in vhall_flutter_module/lib/main.dart. bã€ä½¿ç”¨ As åˆ›å»º Flutter Module åœ¨ As ä¸­é€‰æ‹© File-&gt;New-&gt;New Flutter Projectï¼Œé€‰æ‹© Flutter Module åˆ›å»º Flutter Module å­é¡¹ç›® 4.3 æ·»åŠ Flutterçš„ä¸¤ç§ä¾èµ–æ–¹å¼4.3.1 å°†Flutteræ·»åŠ åˆ°åŽŸç”Ÿå·¥ç¨‹ä¸­ï¼Œ æœ‰ä¸¤ç§æ–¹å¼ï¼šaã€ä»¥aarçš„æ–¹å¼é›†æˆåˆ°çŽ°æœ‰Androidé¡¹ç›®ä¸­ åˆ›å»ºå¥½ Flutter Module ä¹‹åŽéœ€è¦å°†å…¶ç¼–è¯‘æˆ aar çš„å½¢å¼ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œ aar çš„ç¼–è¯‘ï¼š cd vhall_flutter_module flutter build aar åœ¨ Android ä¸­ä¹Ÿå¯ä»¥é€šè¿‡ As å·¥å…·æ¥ç¼–è¯‘ aarï¼Œé€‰æ‹© Build-&gt;Flutter-&gt;Build AAR æ¥è¿›è¡Œ aar çš„ç¼–è¯‘ã€‚ ç„¶åŽæ ¹æ®æç¤ºåœ¨ä¸»é¡¹ç›®å·¥ç¨‹çš„ build.grade æ–‡ä»¶ä¸­è¿›è¡Œç›¸å…³é…ç½®ï¼Œå‚è€ƒå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344ðŸ’ª Building with sound null safety ðŸ’ªRunning Gradle task &apos;assembleAarDebug&apos;... 22.2sâœ“ Built build/host/outputs/repo.Running Gradle task &apos;assembleAarProfile&apos;... 46.1sâœ“ Built build/host/outputs/repo.Running Gradle task &apos;assembleAarRelease&apos;... 37.2sâœ“ Built build/host/outputs/repo.Consuming the Module 1. Open &lt;host&gt;/app/build.gradle 2. Ensure you have the repositories configured, otherwise add them: String storageUrl = System.env.FLUTTER_STORAGE_BASE_URL ?: &quot;https://storage.googleapis.com&quot; repositories &#123; maven &#123; url &apos;/Users/zhangmiao/Documents/project/hybrid/vhall_flutter_module/build/host/outputs/repo&apos; &#125; maven &#123; url &quot;$storageUrl/download.flutter.io&quot; &#125; &#125; 3. Make the host app depend on the Flutter module: dependencies &#123; debugImplementation &apos;com.vhall.module.vhall_flutter_module:flutter_debug:1.0&apos; profileImplementation &apos;com.vhall.module.vhall_flutter_module:flutter_profile:1.0&apos; releaseImplementation &apos;com.vhall.module.vhall_flutter_module:flutter_release:1.0&apos; &#125; 4. Add the `profile` build type: android &#123; buildTypes &#123; profile &#123; initWith debug &#125; &#125; &#125;To learn more, visit https://flutter.dev/go/build-aar ä¼˜ç‚¹ï¼š ä¾èµ–ä¸€ä¸ªåŒ…å« Flutter äº§ç‰©çš„ aar åŒ…ï¼Œè¿™ä¸ªçš„å¥½å¤„å°±æ˜¯å…¶ä»–ä¸å¼€å‘ flutter çš„åŒå­¦å¯ä»¥ä¸ç”¨é…ç½® flutter çŽ¯å¢ƒï¼Œå®ƒå’Œå…¶ä»–æ¨¡å—åŒ…æ— å¼‚ bã€ä»¥ Flutet module çš„æ–¹å¼é›†æˆåˆ°çŽ°æœ‰ Android é¡¹ç›®ä¸­ åœ¨ setting.gradle æ–‡ä»¶ä¸­é…ç½® flutter module å¦‚ä¸‹ï¼š 12345setBinding(new Binding([gradle: this]))evaluate(new File( settingsDir, &apos;../vhall_flutter_module/.android/include_flutter.groovy&apos;)) åœ¨ app é¡¹ç›®çš„ build.gradle ä¾èµ– flutter module æ¨¡å— 123dependencies &#123; implementation project(&apos;:flutter&apos;)&#125; ç¼ºç‚¹ï¼š éœ€è¦ flutter çŽ¯å¢ƒï¼Œå¹¶ä¸”å„ä¸ªå¼€å‘äººå‘˜çŽ¯å¢ƒä¸ä¸€è‡´ï¼Œå¯¼è‡´é›†æˆå› ä¸ºç‰ˆæœ¬ä¸ä¸€è‡´æŠ¥å„ç§é”™è¯¯ 4.3.2æœ¬åœ°ä¾èµ–çš„åŽŸç†Android åœ¨Androidä¸­æœ¬åœ°ä¾èµ–æ–¹å¼ä¸ºï¼š åœ¨settings.gradleä¸­æ³¨å…¥include_flutter.groovyè„šæœ¬ åœ¨éœ€è¦ä¾èµ–çš„appä¸­build.gradleæ·»åŠ project(â€˜:flutterâ€™)ä¾èµ– å¯¹äºŽAndroidçš„æœ¬åœ°ä¾èµ–ï¼Œä¸»è¦æ˜¯ç”±include_flutter.groovyå’Œflutter.gradleè¿™ä¸¤ä¸ªè„šæœ¬è´Ÿè´£Flutterçš„æœ¬åœ°ä¾èµ–å’Œäº§ç‰©æž„å»ºã€‚ aã€include_flutter.groovy åœ¨settings.gradleä¸­æ³¨å…¥æ—¶ï¼Œåˆ†åˆ«ç»‘å®šäº†å½“å‰æ‰§è¡ŒGradleçš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒä¸Žæ‰§è¡Œinclude_flutter.groovyè„šæœ¬ï¼Œè¯¥è„šæœ¬åªåšäº†ä¸‹é¢ä¸‰ä»¶äº‹ï¼š include FlutterModuleä¸­çš„.android/Flutterå·¥ç¨‹ include FlutterModuleä¸­çš„.flutter-pluginsæ–‡ä»¶ä¸­åŒ…å«çš„Flutterå·¥ç¨‹è·¯å¾„ä¸‹çš„android module é…ç½®æ‰€æœ‰å·¥ç¨‹çš„build.gradleé…ç½®æ‰§è¡Œé˜¶æ®µéƒ½ä¾èµ–äºŽ:flutterå·¥ç¨‹ï¼Œä¹Ÿå³å®ƒæœ€å…ˆæ‰§è¡Œé…ç½®é˜¶æ®µ å…¶ä¸­.flutter-pluginsæ–‡ä»¶ï¼Œæ˜¯æ ¹æ®å½“å‰ä¾èµ–è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œé‡Œé¢åŒ…å«äº†å½“å‰Flutterå·¥ç¨‹æ‰€ä¾èµ–ï¼ˆç›´æŽ¥ä¾èµ–å’Œä¼ é€’ä¾èµ–ï¼‰çš„Flutterå­å·¥ç¨‹ä¸Žç»å¯¹è·¯å¾„çš„K-Vå…³ç³»ï¼Œå­å·¥ç¨‹å¯èƒ½æ˜¯ä¸€ä¸ªFlutter Pluginæˆ–è€…æ˜¯ä¸€ä¸ªFlutter Packageã€‚ bã€flutter.gradle è¯¥è„šæœ¬ä½äºŽFlutter SDKä¸­ï¼Œå†…å®¹çœ‹èµ·æ¥å¾ˆé•¿ï¼Œå…¶å®žä¸»è¦åšäº†ä¸‹é¢ä¸‰ä»¶äº‹ï¼š é€‰æ‹©ç¬¦åˆå¯¹åº”æž¶æž„çš„Flutterå¼•æ“Žï¼ˆflutter.soï¼‰ è§£æžä¸Šè¿°.flutter-pluginsæ–‡ä»¶ï¼ŒæŠŠå¯¹åº”çš„android moduleæ·»åŠ åˆ°Nativeå·¥ç¨‹çš„ä¾èµ–ä¸­ï¼ˆä¸Šè¿°çš„includeå…¶å®žä¸ºè¿™æ­¥åšå‡†å¤‡ï¼‰ Hook mergeAssets/processResources Taskï¼Œé¢„å…ˆæ‰§è¡ŒFlutterTaskï¼Œè°ƒç”¨flutterå‘½ä»¤ç¼–è¯‘Dartå±‚ä»£ç æž„å»ºå‡ºflutter_assetsäº§ç‰©ï¼Œå¹¶æ‹·è´åˆ°assetsç›®å½•ä¸‹ æœ‰äº†ä¸Šè¿°ä¸‰æ­¥ï¼Œåˆ™ç›´æŽ¥åœ¨Nativeå·¥ç¨‹ä¸­è¿è¡Œæž„å»ºå³å¯è‡ªåŠ¨æž„å»ºFlutterå·¥ç¨‹ä¸­çš„ä»£ç å¹¶è‡ªåŠ¨æ‹·è´äº§ç‰©åˆ°Nativeä¸­ IOS åœ¨IOSä¸­æœ¬åœ°ä¾èµ–æ–¹å¼ä¸ºï¼š åœ¨Podfileä¸­é€šè¿‡eval bindingç‰¹æ€§æ³¨å…¥podhelper.rbè„šæœ¬ï¼Œåœ¨pod install/updateæ—¶ä¼šæ‰§è¡Œå®ƒ åœ¨IOSæž„å»ºé˜¶æ®µBuild Phasesä¸­æ³¨å…¥æž„å»ºæ—¶éœ€è¦æ‰§è¡Œçš„xcode_backend.shè„šæœ¬ å¯¹äºŽIOSçš„æœ¬åœ°ä¾èµ–ï¼Œä¸»è¦æ˜¯ç”±podhelper.rbå’Œxcode_backend.shè¿™ä¸¤ä¸ªè„šæœ¬è´Ÿè´£Flutterçš„Podæœ¬åœ°ä¾èµ–å’Œäº§ç‰©æž„å»º aã€podhelper.rb å› Podfileæ˜¯é€šè¿‡rubyè¯­è¨€å†™çš„ï¼Œæ‰€ä»¥è¯¥è„šæœ¬ä¹Ÿæ˜¯rubyè„šæœ¬ï¼Œè¯¥è„šæœ¬åœ¨pod install/updateæ—¶ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼š Podæœ¬åœ°ä¾èµ–Flutterå¼•æ“Žï¼ˆFlutter.frameworkï¼‰ä¸ŽFlutteræ’ä»¶æ³¨å†Œè¡¨ï¼ˆFlutterPluginRegistrantï¼‰ Podæœ¬åœ°æºç ä¾èµ–.flutter-pluginsæ–‡ä»¶ä¸­åŒ…å«çš„Flutterå·¥ç¨‹è·¯å¾„ä¸‹çš„ioså·¥ç¨‹ åœ¨pod installæ‰§è¡Œå®ŒåŽpost_installä¸­ï¼ŒèŽ·å–å½“å‰targetå·¥ç¨‹å¯¹è±¡ï¼Œå¯¼å…¥Generated.xcconfigé…ç½®ï¼Œè¿™äº›é…ç½®éƒ½ä¸ºçŽ¯å¢ƒå˜é‡é…ç½®ï¼Œä¸»è¦ä¸ºæž„å»ºé˜¶æ®µxcode_backend.shè„šæœ¬æ‰§è¡Œåšå‡†å¤‡ ä¸Šè¿°äº‹æƒ…å³å¯ä¿è¯Flutterå·¥ç¨‹ä»¥åŠä¼ é€’ä¾èµ–çš„éƒ½é€šè¿‡podæœ¬åœ°ä¾èµ–è¿›Nativeå·¥ç¨‹äº†ï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯æž„å»ºäº† bã€xcode_backend.sh è¯¥Shellè„šæœ¬ä½äºŽFlutter SDKä¸­ï¼Œè¯¥è„šæœ¬ä¸»è¦å°±åšäº†ä¸¤ä»¶äº‹ï¼š è°ƒç”¨flutterå‘½ä»¤ç¼–è¯‘æž„å»ºå‡ºäº§ç‰©ï¼ˆApp.frameworkã€flutter_assetsï¼‰ æŠŠäº§ç‰©ï¼ˆ.frameworkã€flutter_assetsï¼‰æ‹·è´åˆ°å¯¹åº”XCodeæž„å»ºäº§ç‰©ä¸­ï¼Œå¯¹åº”äº§ç‰©ç›®å½•ä¸ºï¼š*$HOME/Library/Developer/Xcode/DerivedData/${AppName}** ä¸Šè¿°ä¸¤ä¸ªé™æ€åº“*.frameworkæ˜¯æ‹·è´åˆ°${BUILT_PRODUCTS_DIR}â€/â€œ${PRODUCT_NAME}â€.app/Frameworksâ€ç›®å½•ä¸‹ flutter_assetsæ‹·è´åˆ°${BUILT_PRODUCTS_DIR}â€/â€œ${PRODUCT_NAME}â€.appâ€ç›®å½•ä¸‹ åœ¨XCodeå·¥ç¨‹ä¸­ï¼Œå¯¹åº”çš„æ˜¯åœ¨${AppName}/Products/${AppName}.app 4.4 åŽŸç”ŸæŽ¥å…¥ flutter é¡µé¢flutter ä¾èµ–æä¾›äº† FlutterActivity æ¥ç›´æŽ¥åŠ è½½ flutter é¡µé¢ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ¸…å•æ–‡ä»¶ä¸­é…ç½®è¯¥ Activity ï¼š ï¼ˆé€šå¸¸æˆ‘ä»¬ä¼šåˆ›å»ºä¸€ä¸ª Activity ç»§æ‰¿ FlutterActivityï¼‰ 123456&lt;activity android:name=&quot;io.flutter.embedding.android.FlutterActivity&quot; android:theme=&quot;@style/Theme.Vhall_app&quot; android:configChanges=&quot;orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode&quot; android:hardwareAccelerated=&quot;true&quot; android:windowSoftInputMode=&quot;adjustResize&quot;/&gt; ä¸‰ç§æ‰“å¼€flutteré¡µé¢çš„æ–¹å¼ï¼š 1ï¼‰æ™®é€šè·³è½¬ï¼š 12345678myButton.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; startActivity( FlutterActivity.createDefaultIntent(currentActivity) ); &#125;&#125;); 2ï¼‰è®¾ç½®è·¯ç”±çš„æ–¹å¼è·³è½¬ï¼š 1234567891011myButton.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; startActivity( FlutterActivity .withNewEngine() .initialRoute(&quot;/my_route&quot;) .build(currentActivity) ); &#125;&#125;); ä¸Šè¿°ä»£ç ä¼šåœ¨å†…éƒ¨åˆ›å»ºè‡ªå·±çš„ FlutterEngine å®žä¾‹ï¼Œæ¯ä¸ª FlutterActivity éƒ½åˆ›å»ºè‡ªå·±çš„ FlutterEngineï¼Œè¿™æ„å‘³ç€å¯åŠ¨ä¸€ä¸ªæ ‡å‡†çš„ FlutterActivity ä¼šåœ¨ç•Œé¢å¯è§æ—¶å‡ºçŽ°ä¸€çŸ­æš‚çš„å»¶è¿Ÿï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨é¢„ç¼“å­˜çš„ FlutterEngine æ¥å‡å°å…¶å»¶è¿Ÿï¼Œå®žé™…ä¸Šåœ¨å†…éƒ¨ä¼šå…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨é¢„ç¼“å­˜çš„ FlutterEngineï¼Œå¦‚æžœå­˜åœ¨åˆ™ä½¿ç”¨è¯¥ FlutterEngineï¼Œå¦åˆ™ç»§ç»­ä½¿ç”¨éžé¢„ç¼“å­˜çš„ FlutterEngineã€‚ 3ï¼‰ç¼“å­˜ Flutter å¼•æ“Žæ–¹å¼è·³è½¬ï¼š 123456789101112131415161718192021222324252627public class MyApplication extends Application &#123; public FlutterEngine flutterEngine; @Override public void onCreate() &#123; super.onCreate(); // Instantiate a FlutterEngine. flutterEngine = new FlutterEngine(this); // Start executing Dart code to pre-warm the FlutterEngine. flutterEngine.getDartExecutor().executeDartEntrypoint(DartExecutor.DartEntrypoint.createDefault()); // Cache the FlutterEngine to be used by FlutterActivity. FlutterEngineCache.getInstance().put(&quot;my_engine_id&quot;, flutterEngine); &#125;&#125;myButton.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View view) &#123; startActivity( LoginFlutterActivity .withCachedEngine(&quot;my_engine_id&quot;) .build(MainActivity.this) ); &#125;&#125;); äº”ã€Flutterä¸ŽNativeé€šä¿¡5.1Platform ChannelPlatform Channelä¸ºDartå’Œå¹³å°ä¹‹é—´æä¾›äº†ç›¸äº’é€šä¿¡çš„æœºåˆ¶ï¼Œå°†Flutterã€Androidã€iOSè¿žæŽ¥èµ·æ¥ã€‚ åœ¨ç§»åŠ¨H5å¼€å‘ä¸­ï¼Œwebviewè‡ªèº«æä¾›çš„åŠŸèƒ½å¾€å¾€ä¸å¤Ÿç”¨ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº†jsbridgeï¼Œå³webä¸Žnativeä¹‹é—´è¿›è¡Œæ•°æ®äº¤äº’çš„ä¸€ç§æ–¹æ³•,å¯ä»¥æ–¹ä¾¿çš„å°†nativeçš„åŠŸèƒ½æ‰©å±•ç»™webviewä½¿ç”¨ï¼Œä»Žè€Œå¯ä»¥å¿«é€Ÿå¼€å‘ã€‚åœ¨Flutterä¸­ï¼Œä¹Ÿå­˜åœ¨å’Œjsbridgeä¸€æ ·çš„ç”¨æ³•ï¼Œé‚£å°±æ˜¯Platform Channelï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Platform Channelï¼Œå°†Flutterå’ŒNativeæ–¹ä¾¿çš„è¿žæŽ¥åœ¨ä¸€èµ·ï¼Œæž¶æž„å›¾å¦‚ä¸‹: åœ¨Channelä¸­ clientå‘é€ä¿¡æ¯ hostæŽ¥å—ä¿¡æ¯å¹¶è¿”å›žç»“æžœ è€Œä¸”æ¶ˆæ¯å’Œå“åº”æ˜¯ä»¥å¼‚æ­¥æ–¹å¼ä¼ é€’çš„ Flutterå’ŒNatvieå¯ä»¥äº’ä¸ºclientå’Œhostï¼Œä¿¡æ¯ä¼ é€’æ˜¯åŒå‘çš„ 5.2 ä¸‰ç§ä¸åŒç±»åž‹çš„Platform ChannelFlutterå®šä¹‰äº†ä¸‰ç§ä¸åŒç±»åž‹çš„Platform Channelç”¨äºŽFlutterä¸ŽHost Appå¹³å°è¿›è¡Œé€šä¿¡ï¼Œå®ƒä»¬åˆ†åˆ« BasicMessageChannelï¼šç”¨äºŽæ•°æ®ä¼ é€’ï¼Œå¯ä»¥åŒå‘çš„è¯·æ±‚æ•°æ®ã€‚ MethodChannelï¼šç”¨äºŽä¼ é€’æ–¹æ³•è°ƒç”¨ï¼Œå³Flutterç«¯å¯ä»¥è°ƒç”¨Platformç«¯çš„æ–¹æ³•å¹¶é€šè¿‡ResultæŽ¥å£å›žè°ƒç»“æžœæ•°æ®ã€‚ EventChannel: ç”¨äºŽä¼ é€’äº‹ä»¶ï¼Œå³Flutterç«¯ç›‘å¬Platformç«¯çš„å®žæ—¶æ¶ˆæ¯ï¼Œä¸€æ—¦Platformç«¯äº§ç”Ÿäº†æ•°æ®ï¼Œç«‹å³å›žè°ƒåˆ°Flutterç«¯ã€‚ å…¶æž„é€ æ–¹æ³•éƒ½éœ€æŒ‡å®šä¸€ä¸ªé€šé“æ ‡è¯†ã€è§£ç¼–ç å™¨ä»¥åŠ BinaryMessengerï¼ŒBinaryMessenger æ˜¯ä¸€ä¸ª Flutter ä¸Žå¹³å°çš„é€šä¿¡å·¥å…·ï¼Œç”¨æ¥ä¼ é€’äºŒè¿›åˆ¶æ•°æ®ã€è®¾ç½®å¯¹åº”çš„æ¶ˆæ¯å¤„ç†å™¨ç­‰ã€‚ è§£ç¼–ç å™¨æœ‰ä¸¤ç§åˆ†åˆ«æ˜¯ MethodCodec å’Œ MessageCodecï¼Œå‰è€…å¯¹åº”æ–¹æ³•åŽè€…å¯¹åº”æ¶ˆæ¯ï¼ŒBasicMessageChannel ä½¿ç”¨çš„æ˜¯ MessageCodecï¼ŒMethodChannel å’Œ EventChannel ä½¿ç”¨çš„æ˜¯ MethodCodecã€‚ 5.3 å¹³å°æ•°æ®ç±»åž‹å¯¹ç…§Platform Channel æä¾›ä¸åŒçš„æ¶ˆæ¯è§£ç æœºåˆ¶ï¼Œå¦‚ StandardMessageCodec æä¾›åŸºæœ¬æ•°æ®ç±»åž‹çš„è§£ç¼–ç ã€JSONMessageCodec æ”¯æŒ Json çš„è§£ç¼–ç ç­‰ï¼Œåœ¨å¹³å°ä¹‹é—´é€šä¿¡æ—¶éƒ½ä¼šè‡ªåŠ¨è½¬æ¢ï¼Œå„å¹³å°æ•°æ®ç±»åž‹å¯¹ç…§å¦‚ä¸‹ï¼š å…­ã€Flutterç»„ä»¶åŒ–å·¥ç¨‹6.1 èƒŒæ™¯å‰é¢è®²äº†Flutterå’ŒNativeçš„æ··åˆå¼€å‘æ¨¡å¼ï¼ŒFlutterä½œä¸ºNativeå·¥ç¨‹çš„ä¸€ä¸ªModuleå­˜åœ¨ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆçš„å°†Flutterå’ŒNativeè¿›è¡Œç‰©ç†éš”ç¦»ï¼Œä½†éšç€Flutteræ‰¿è½½çš„ä¸šåŠ¡è¶Šæ¥è¶Šå¤šï¼Œä¸ŽNativeäº¤äº’çš„æŽ¥å£å˜çš„è¶Šæ¥è¶Šå¤šï¼Œå¸¦æ¥äº†å¾ˆå¤šç®¡ç†é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬è¿«åˆ‡éœ€è¦é‡‡ç”¨æ–°çš„å¼€å‘æ¨¡å¼ï¼Œå³Flutterçš„ç»„ä»¶åŒ–å¼€å‘æ–¹æ¡ˆã€‚ 6.2 ç»„ä»¶åŒ–çš„ä¼˜åŠ¿é‡‡ç”¨ç»„ä»¶åŒ–å¼€å‘Flutterï¼Œå°†ä¼šæœ‰å¦‚ä¸‹çš„ä¼˜åŠ¿ï¼š å°†åŠŸèƒ½æ¨¡å—åŒ–ï¼Œç›¸äº’ç‹¬ç«‹ï¼Œæ–¹ä¾¿ç®¡ç† æ¨¡å—ä¹‹é—´äº’ä¸å½±å“ï¼Œè€¦åˆä½Žï¼Œä¸€äº›ä¸Žä¸šåŠ¡æ— å…³çš„æ¨¡å—å¯ä»¥å¼€æºå‡ºæ¥ï¼Œä¾›å…¶ä»–APPä½¿ç”¨ï¼Œæä¾›ä»£ç çš„å¤ç”¨ã€‚ é‡‡ç”¨ç»„ä»¶åŒ–å¼€å‘ï¼Œå¼€å‘æ—¶äº’ä¸å½±å“ï¼Œå¯ä»¥æé«˜å¼€å‘æ•ˆçŽ‡ã€‚ æ–¹ä¾¿å•å…ƒæµ‹è¯• 6.3 ç»„ä»¶åŒ–æž¶æž„ç»„ä»¶åˆ’åˆ†ï¼Œé€šè¿‡Flutter Moduleä½œä¸ºæ‰€æœ‰é€šè¿‡Flutterå®žçŽ°çš„æ¨¡å—æˆ–åŠŸèƒ½çš„èšåˆå…¥å£ï¼Œé€šè¿‡å®ƒè¿›è¡ŒFlutterå±‚åˆ°Nativeå±‚çš„åŒå‘å…³è”ã€‚è€ŒFlutterå¼€å‘ä»£ç å†™åœ¨å“ªé‡Œå‘¢ï¼Ÿå½“ç„¶å¯ä»¥ç›´æŽ¥å†™åœ¨Flutter Moduleä¸­ï¼Œè¿™æ²¡é—®é¢˜ï¼Œè€Œå¦‚æžœåŽç»­å¼€å‘äº†å¤šä¸ªæ¨¡å—ã€ç»„ä»¶ï¼Œæˆ‘ä»¬çš„Dartä»£ç æ€»ä¸å¯èƒ½å…¨éƒ¨å†™åœ¨Flutter Moduleä¸­lib/å§ï¼Œå¦‚æžœåœ¨lib/ç›®å½•ä¸‹å†å»ºç«‹å­ç›®å½•è¿›è¡Œæ¨¡å—åŒºåˆ†ï¼Œè¿™ä¸å¤±ä¸ºä¸€ç§æœ€ç®€å•çš„æ–¹å¼ï¼Œä¸è¿‡è¿™ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œæ‰€æœ‰æ¨¡å—å…±ç”¨ä¸€ä¸ªè¿œç¨‹Gitåœ°å€ï¼Œé¦–å…ˆåœ¨ç»„ä»¶å¼€å‘éš”ç¦»ä¸Šå®Œå…¨è€¦åˆäº†ï¼Œå…¶æ¬¡å„ä¸ªæ¨¡å—ç»„ä»¶æ²¡æœ‰å•ç‹¬çš„ç‰ˆæœ¬å·æˆ–Tagï¼Œä¸”åŽç»­æ¨¡å—ç»„ä»¶çš„å¢žå¤šï¼Œå¸¦æ¥æ›´å¤šçš„æµ‹è¯•å›žå½’æˆæœ¬ã€‚ æ­£ç¡®çš„ç»„ä»¶åŒ–æ–¹å¼ä¸ºä¸€ä¸ªç»„ä»¶æœ‰ä¸€ä¸ªç‹¬ç«‹çš„è¿œç¨‹Gitåœ°å€ç®¡ç†ï¼Œè¿™æ ·å„ä¸ªç»„ä»¶åœ¨å‘æ­£å¼ç‰ˆæ—¶éƒ½æœ‰ä¸€ä¸ªç‰ˆæœ¬å·å’ŒTagï¼Œä¸”åœ¨å„ä¸ªç»„ä»¶å¼€å‘ä¸Šå®Œå…¨éš”ç¦»ï¼ŒåŽç»­ç»„ä»¶çš„å¢žå¤šä¸å½±å“å…¶å®ƒç»„ä»¶ï¼ŒæŸä¸ªç»„ä»¶æ–°å¢žéœ€æ±‚è€Œä¸éœ€å›žå½’å…¶å®ƒç»„ä»¶ï¼Œå¸¦æ¥æ›´ä½Žçš„æµ‹è¯•æˆæœ¬ã€‚ å‰é¢æåˆ°Flutter Pluginå¯ä»¥æœ‰å¯¹åº”Dartå±‚ä»£ç ä¸Žå¹³å°å±‚çš„å®žçŽ°ï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·è®¾è®¡ï¼Œä¸€ä¸ªç»„ä»¶å¯¹åº”ä¸€ä¸ªFlutter Pluginï¼Œä¸€ä¸ªFlutter Pluginä¸ºä¸€ä¸ªå®Œæ•´çš„Flutterå·¥ç¨‹ï¼Œæœ‰ç‹¬ç«‹çš„Gitåœ°å€ï¼Œè€Œè¿™äº›ç»„ä»¶ä¹‹é—´ä¸èƒ½äº’ç›¸ä¾èµ–ï¼Œä¿æŒé›¶è€¦åˆï¼Œæ‰€ä»¥è¿™äº›ç»„ä»¶éƒ½åœ¨ä¸šåŠ¡å±‚ï¼Œå¯ä»¥å«åšä¸šåŠ¡ç»„ä»¶ï¼Œè¿™äº›ä¸šåŠ¡ç»„ä»¶ä¹‹é—´çš„é€šä¿¡å’Œå…¬å…±æœåŠ¡å¯ä»¥å†åˆ’åˆ†ä¸€å±‚åŸºç¡€å±‚ï¼Œå¯ä»¥å«åšåŸºç¡€ç»„ä»¶ï¼Œæ‰€æœ‰ä¸šåŠ¡ç»„ä»¶ä¾èµ–åŸºç¡€å±‚ï¼Œè€ŒFlutter Moduleä½œä¸ºèšåˆå±‚ä¾èµ–äºŽæ‰€æœ‰Flutterç»„ä»¶ï¼Œè¿™äº›Flutterå·¥ç¨‹ä¹‹é—´çš„ä¾èµ–æ­£æ˜¯é€šè¿‡Pubä¾èµ–è¿›è¡Œç®¡ç†çš„ã€‚ æ‰€ä»¥ï¼Œç»¼åˆä¸Šè¿°ï¼Œæ•´ä½“çš„ç»„ä»¶åŒ–æž¶æž„å¯ä»¥è®¾è®¡ä¸ºï¼š 6.4ä¸šåŠ¡ç»„ä»¶ä¸ŽåŸºç¡€ç»„ä»¶çš„å®šä½å¯¹äºŽä¸Šé¢çš„åŸºç¡€ç»„ä»¶æ¯”å¦‚è¿˜å¯ä»¥è¿›è¡Œæ›´ç»†ç²’åº¦çš„åˆ’åˆ†ï¼Œä¸è¿‡ä¸å»ºè®®åˆ’åˆ†å¤ªå¤šï¼Œå¯¹äºŽä¸ŽNativeå¹³å°å±‚çš„é€šä¿¡ï¼Œæ¯ä¸ªä¸šåŠ¡ç»„ä»¶å¯¹åº”ä¸€ä¸ªChannelï¼Œå½“ç„¶å†…éƒ¨è¿˜å¯ä»¥è¿›è¡Œæ›´ç»†ç²’åº¦çš„Channelè¿›è¡Œåˆ’åˆ†ï¼Œè¿™ä¸ªChannelä¸»è¦æ˜¯è´Ÿè´£Nativeå±‚æœåŠ¡çš„æä¾›ï¼Œè®©Flutterå±‚æ¶ˆè´¹ã€‚è€Œå¯¹äºŽNativeå±‚è°ƒç”¨Flutterå±‚çš„Apiï¼Œåº”è¯¥å°½å¯èƒ½å°‘ï¼Œéœ€è¦è°ƒä¹Ÿåªæœ‰å‡ºçŽ°ä¸€äº›å€¼å›žè°ƒæ—¶ã€‚ å› ä¸ºFlutterçš„å‡ºçŽ°æœ€æœ¬è´¨çš„å°±æ˜¯ä¸€æ¬¡å¼€å‘ä¸¤ç«¯è¿è¡Œï¼Œè€Œå¦‚æžœæœ‰å¤ªå¤šè¿™ç§ä¾èµ–äºŽå¹³å°å±‚çš„å®žçŽ°ï¼Œåè€Œå‡ºçŽ°è¿èƒŒäº†ï¼Œæœ€åŽåªæ˜¯UIå†™äº†ä¸€ä»½è€Œå·²ã€‚å¯¹äºŽå¹³å°å±‚çš„å®žçŽ°ä¹Ÿè¦å°½é‡ä¿æŒä¸€ä¸ªåŽŸåˆ™ï¼Œå³ï¼š å°½é‡è®©Nativeå¹³å°å±‚æˆä¸ºæœåŠ¡å±‚ï¼Œè®©Flutterå±‚æˆä¸ºæ¶ˆè´¹å±‚è°ƒç”¨Nativeå±‚çš„æœåŠ¡ï¼Œå³Dartè°ƒç”¨Nativeçš„Apiï¼Œè¿™æ ·å½“ä¸¤ç«¯å¼€å‘äººå‘˜ç¼–å†™å¥½ä¸€è‡´åŸºç¡€çš„æœåŠ¡æŽ¥å£åŽï¼ŒFlutterçš„å¼€å‘äººå‘˜å³å¯å¹³æ»‘ä½¿ç”¨å’Œå¼€å‘ã€‚ ä¸ƒã€åŽåºå¯¹äºŽçŽ°æœ‰å·¥ç¨‹ä½¿ç”¨Flutterè¿›è¡Œæ··åˆå¼€å‘ï¼Œå‘ç‚¹è¿˜æ˜¯æœ‰çš„ï¼Œæ¯”å¦‚æ€§èƒ½ã€é¡µé¢æ ˆç®¡ç†ç­‰æ–¹é¢ï¼ŒåŠ ä¸Šç›®å‰Flutterä¸Šä¸€äº›åŸºç¡€åº“ä¸æˆç†Ÿï¼Œå¯¹äºŽé¡¹ç›®å†…çš„é‡è¦é¡µé¢ä»¥åŠåŠ¨æ€åŒ–å¼ºåº¦æ¯”è¾ƒé«˜çš„é¡µé¢ï¼Œç›®å‰è¿˜æ˜¯ä¸å»ºè®®ä½¿ç”¨Flutterè¿›è¡Œå¼€å‘ï¼Œå¦‚æžœè¦ä½¿ç”¨ä¹Ÿé¡»åšå¥½é™çº§æ–¹æ¡ˆï¼Œç›¸åå¯ä»¥ä½¿ç”¨ç¨å¾®è½»é‡çº§ç‚¹çš„é¡µé¢ï¼Œä¸”åœ¨è®¾è®¡æ—¶å¯¹äºŽFlutterä¸ŽNativeå±‚çš„é€šä¿¡ï¼Œåº”è¯¥è®©Flutterä½œä¸ºæ¶ˆè´¹å±‚æ¶ˆè´¹Nativeå±‚æä¾›çš„æœåŠ¡ï¼ŒNativeç«¯åº”åšå°½é‡å°‘çš„æ”¹åŠ¨ç­‰ç­‰ã€‚ä¸Žçº¯åŽŸç”Ÿå¼€å‘æˆ–çº¯ Flutter å¼€å‘ç›¸æ¯”ï¼Œæ··åˆå¼€å‘ç”±äºŽéœ€è¦æ‰“é€šåŽŸç”Ÿå’Œ Flutter çš„æ•°æ®å’ŒæœåŠ¡ï¼Œéœ€è¦æœ‰å¤§é‡æ¡¥æŽ¥å®žçŽ°ï¼Œå„ä¸ªæ¨¡å—äº’ç›¸åä½œä¹Ÿéœ€è¦è€ƒè™‘å„ç§å¼‚å¸¸æˆ–é™çº§çš„æƒ…å†µã€‚ å‚è€ƒï¼šå°† Flutter module é›†æˆåˆ° Android é¡¹ç›® https://flutter.cn/docs/development/add-to-app/android/project-setupå°† Flutter module é›†æˆåˆ° iOS é¡¹ç›® https://flutter.cn/docs/development/add-to-app/ios/project-setupåœ¨ Android åº”ç”¨ä¸­æ·»åŠ  Flutter é¡µé¢https://flutter.cn/docs/development/add-to-app/android/add-flutter-screenåœ¨ iOS åº”ç”¨ä¸­æ·»åŠ  Flutter é¡µé¢ https://flutter.cn/docs/development/add-to-app/ios/add-flutter-screenAdd-to-App Samples https://github.com/flutter/samples/blob/beface247a/add_to_app/README.md]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€æ–°æŠ€æœ¯ã€‘åˆåŒå’å•æ¥äº†ç³»åˆ—ä¸‰]]></title>
    <url>%2Fposts%2F477750ac.html</url>
    <content type="text"><![CDATA[1. åœ¨ Android æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œ ARM åº”ç”¨è¿™ç®—æ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„æ¶ˆæ¯äº†ï¼Œä¹‹å‰åœ¨å®žé™…åº”ç”¨å¼€å‘ä¸­ï¼Œå› ä¸ºæ¨¡æ‹Ÿå™¨ç¼ºå°‘å¯¹ arm çš„æ”¯æŒï¼ŒåŸºæœ¬ä¸Šéƒ½ä½¿ç”¨çœŸæœºè¿›è¡Œå¼€å‘ä¸Žè°ƒè¯•ã€‚éšç€ Android 11é¢„è§ˆç‰ˆçš„å‘å¸ƒAndroid 11 ç³»ç»Ÿæ˜ åƒèƒ½å¤Ÿåœ¨ä¸å½±å“æ•´ä¸ªç³»ç»Ÿçš„å‰æä¸‹ï¼Œç›´æŽ¥å°† ARM æŒ‡ä»¤è½¬æ¢æˆ x86 æŒ‡ä»¤ã€‚å¼€å‘è€…æ— éœ€æ­å»ºé«˜è´Ÿè½½çš„ ARM çŽ¯å¢ƒå³å¯æ‰§è¡Œ ARM äºŒè¿›åˆ¶æ–‡ä»¶å¹¶è¿›è¡Œæµ‹è¯•ã€‚ è¯¦æƒ…ï¼šåœ¨ Android æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œ ARM åº”ç”¨ 2. å¤§åŽ‚å¯¹å¤–æ–‡ç« åˆ†äº«æºç¨‹æŠ€æœ¯ æºç¨‹Android 10é€‚é…è¸©å‘æŒ‡å—æ–°ç‰ˆæœ¬é€‚é…ä¸€ç›´æ˜¯ Android å¼€å‘è€…çš„ç—›æ¥šä¹‹ä¸€ï¼Œä½†æ˜¯è¿™ä»¶äº‹å¦‚æžœé•¿æœŸä¸å‡å°±ä¼šè¶Šæ¥è¶Šå›°éš¾ã€‚åŠ ä¸ŠçŽ°åœ¨åº”ç”¨å¸‚åœºæ¯”è¾ƒå¼ºåŠ¿ï¼Œæ‰€ä»¥ä¿æŒä¸€ä¸ªè¾ƒé«˜çš„ç‰ˆæœ¬çš„é€‚é…æ˜¯æœ‰å¿…è¦çš„ã€‚æºç¨‹æ—…è¡Œåˆ†äº«äº†ä»–ä»¬ä»ŽAPI 26 åˆ° 29 çš„é€‚é…ç»éªŒï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸€æ³¢ã€‚å…¨ç½‘æœ€è¯¦ï¼æš—é»‘æ¨¡å¼åœ¨ Trip.com App çš„å®žè·µ æš—é»‘æ¨¡å¼ä¹Ÿæœ€è¿‘çš„ä¸€ä¸ªéžå¸¸çƒ­é—¨çš„è¯é¢˜ï¼Œç”šè‡³å¾®ä¿¡æ”¯æŒæš—é»‘æ¨¡å¼éƒ½æˆä¸ºçƒ­ç‚¹äº†ã€‚å¦‚æžœä½ å¯¹è¿™æ–¹é¢æ„Ÿå…´è¶£ï¼Œæˆ–è€…åˆšå¥½æœ‰æš—é»‘å®žè·µçš„éœ€æ±‚ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹è¿™ä¸€ç¯‡ç”±æºç¨‹ UED å›¢é˜Ÿ+ç ”å‘å›¢é˜Ÿæ’°å†™çš„æ–‡ç« ã€‚æˆ‘ä¸ªäººå…¶å®žä¸€ç›´æ²¡æœ‰ä½“éªŒè¿‡æš—é»‘æ¨¡å¼ï¼Œæ¯•ç«Ÿæ²¡é€‚é…çš„ app å¤ªå¤šäº†ï¼Œæ‰€ä»¥æˆ‘ä¸è®¤ä¸ºæŠŠæ‰‹æœºåˆ‡æ¢ä¸ºæš—é»‘æ¨¡å¼æœ‰å¾ˆå¥½çš„çš„ä½“éªŒâ€¦ Google å¼€å‘è€…åœ¨ Android å¼€å‘ä¸­ä½¿ç”¨åç¨‹ | èƒŒæ™¯ä»‹ç»å¯ä»¥çœ‹ä¸€ä¸‹å®˜æ–¹çš„æ–‡ç« äº†è§£ä¸‹åç¨‹çš„ä¸€äº›èƒŒæ™¯çŸ¥è¯†ï¼Œç”¨æ¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Œä»¥åŠæ€§èƒ½ç›¸å…³çš„ä¸€äº›çŸ¥è¯†ã€‚ å­—èŠ‚è·³åŠ¨æŠ€æœ¯å›¢é˜ŸæŠ–éŸ³åŒ…å¤§å°ä¼˜åŒ–-èµ„æºä¼˜åŒ–å¯ä»¥çœ‹ä¸‹æŠ–éŸ³å›¢é˜Ÿä¸ºäº†å‡å°‘ apk çš„ä½“ç§¯ï¼Œé’ˆå¯¹èµ„æºè¿™ä¸€æ–¹é¢åšäº†å“ªäº›æžè‡´çš„äº‹æƒ…ã€‚å¦å¤– apk ä½“ç§¯ä¼˜åŒ–ä¹Ÿå¯ä»¥çœ‹ä¸‹ jsonchao çš„æ–‡ç« ï¼šå¹çˆ†ç³»åˆ—ï¼šæ·±å…¥æŽ¢ç´¢AndroidåŒ…ä½“ç§¯ä¼˜åŒ– ç™¾åº¦ APP æŠ€æœ¯Gradle ä¸Ž Android æž„å»ºå…¥é—¨å†™äº†ä¸€ç¯‡ Gradle æž„å»ºå…¥é—¨çš„æ–‡ç« ï¼Œå…¶å®žå¾ˆå¤šåŒå­¦éƒ½éžå¸¸å®³æ€• Gradleï¼Œè¿™ç¯‡æ–‡ç« ä¼šç»™å¤§å®¶è§£é‡Šä¸ºä»€ä¹ˆéœ€è¦ Gradleï¼Œä»¥åŠ Gradle ç›¸å…³çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼Œå¸®ä½ æ›´å¥½çš„äº†è§£ç›¸å…³çŸ¥è¯†ï¼Œæ¯”è¾ƒè½»æ¾ï¼Œå¯ä»¥ä¸€çœ‹ã€‚ è¥¿ç“œæŠ€æœ¯å›¢é˜ŸAwCookieManager.nativeGetCookie crash æŽ’æŸ¥åˆ†äº«äº†è¥¿ç“œçš„ä¸€ä¸ªCookieManager.getCookie(String url) è¿‡ç¨‹ä¸­çš„ native crashï¼Œåˆ†æžè¿‡ç¨‹è¾ƒä¸ºå¤æ‚ï¼Œä¸è¿‡ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼Œè§£å†³æ–¹æ¡ˆæ¶‰åŠåˆ° hookï¼Œè¥¿ç“œç”¨äº†è‡ªç ”çš„æ–¹æ¡ˆï¼Œå¼€æºçš„ lancet åº”è¯¥ä¹Ÿèƒ½åšåˆ°ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿä¼šæåˆ° lancetã€‚ åŽ†å²åˆ†äº«(ç‚¹å‡»å¯ç›´æŽ¥è®¿é—®)ï¼š è…¾è®¯Bugly:å¯¹å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•çš„ä¸€ç‚¹ç†è§£ çˆ±å¥‡è‰ºï¼šå®‰å“APPå´©æºƒæ•èŽ·æ–¹æ¡ˆâ€”â€”xCrash å­—èŠ‚è·³åŠ¨ï¼šæ·±å…¥ç†è§£Gradleæ¡†æž¶ä¹‹ä¸€ï¼šPlugin, Extension, buildSrc ç™¾åº¦APPæŠ€æœ¯ï¼šAndroid H5é¦–å±ä¼˜åŒ–å®žè·µ äº¬ä¸œæŠ€æœ¯ï¼šä»»æ„URLè·³è½¬æ¼æ´žä¿®å¤ä¸ŽJDKä¸­getHost()æ–¹æ³•ä¹‹é—´çš„å‘ æ”¯ä»˜å®å®¢æˆ·ç«¯æž¶æž„è§£æžï¼šAndroid å®¢æˆ·ç«¯å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ä¹‹ã€Œåžƒåœ¾å›žæ”¶ã€ æ”¯ä»˜å® App æž„å»ºä¼˜åŒ–è§£æžï¼šé€šè¿‡å®‰è£…åŒ…é‡æŽ’å¸ƒä¼˜åŒ– Android ç«¯å¯åŠ¨æ€§èƒ½ æ”¯ä»˜å® App æž„å»ºä¼˜åŒ–è§£æžï¼šAndroid åŒ…å¤§å°æžè‡´åŽ‹ç¼© æœç‹ï¼šæ·±å…¥ç†è§£Flutterå¤šçº¿ç¨‹ æºç¨‹ï¼šä»Žæ™ºè¡Œ Android é¡¹ç›®çœ‹ç»„ä»¶åŒ–æž¶æž„å®žè·µ Google: Flutter æ‚¨éœ€è¦çŸ¥é“çš„çŸ¥è¯†ç‚¹ | FAQãƒ»ç¬¬ä¸‰æœŸ å­—èŠ‚è·³åŠ¨ï¼šäºŒç»´ç æ‰«æä¼˜åŒ– ç½‘æ˜“ä¼ åª’æŠ€æœ¯å›¢é˜Ÿï¼šAOPæŠ€æœ¯åœ¨å®¢æˆ·ç«¯çš„åº”ç”¨ä¸Žå®žè·µ ç½‘æ˜“å¤§æ•°æ®|äº’è”ç½‘äº§å“å†³ç­–ç§˜ç¬ˆ: ABæµ‹è¯• é«˜å¾·ï¼šAndroid Native å†…å­˜æ³„æ¼ç³»ç»ŸåŒ–è§£å†³æ–¹æ¡ˆ ä¾‹è¯´ Constraint Layoutï¼ˆä¸‰ï¼‰â€”â€” æ€§èƒ½æµ‹è¯• Android Pä¹‹Smart Linkify ç™¾åº¦Appç»„ä»¶åŒ–ä¹‹è·¯ ç™¾åº¦Appç½‘ç»œæ·±åº¦ä¼˜åŒ–ç³»åˆ—ã€Šä¸‰ã€‹å¼±ç½‘ä¼˜åŒ– å¤´æ¡| æ·±å…¥ç†è§£gradleæ¡†æž¶ä¹‹äºŒï¼šä¾èµ–å®žçŽ°åˆ†æž ç¾Žå›¢| Probeï¼šAndroidçº¿ä¸ŠOOMé—®é¢˜å®šä½ç»„ä»¶ ç¾Žå›¢|Androidé™æ€ä»£ç æ‰«ææ•ˆçŽ‡ä¼˜åŒ–ä¸Žå®žè·µ å¤´æ¡|å¼€æº | Sceneï¼šAndroid å¼€æºé¡µé¢å¯¼èˆªå’Œç»„åˆæ¡†æž¶ ç½‘æ˜“æ–°é—»å®¢æˆ·ç«¯ H5 ç§’å¼€ä¼˜åŒ– è§£å†³æ”¯ä»˜å®åŒ…ä½“ç§¯ä¼˜åŒ–çš„é—ç•™é—®é¢˜ï¼šè¿è¡Œæ—¶èŽ·å–dexpc Androidç¯‡ | çˆ±å¥‡è‰ºAppå¯åŠ¨ä¼˜åŒ–å®žè·µåˆ†äº« äºŒç»´ç æ‰«æä¼˜åŒ–åŠçˆ±å¥‡è‰ºAppçš„å®žè·µ è…¾è®¯ Buglyï¼šåŠ¨æ€ä¸‹å‘ so åº“åœ¨ Android APK å®‰è£…åŒ…ç˜¦èº«æ–¹é¢çš„åº”ç”¨ å¤©çŒ«ç²¾çµï¼šå²ä¸Šæœ€å…¨Androidæ¸²æŸ“æœºåˆ¶è®²è§£ï¼ˆé•¿æ–‡æºç æ·±åº¦å‰–æžï¼‰ èŠ±æ¤’Androidç«¯è‡ªåŠ¨åŒ–æµ‹è¯•å®žè·µ ä¸€ç§ç®€å•ä¼˜é›…çš„TextViewè¡Œé—´è·é€‚é…æ–¹æ¡ˆ Android 10åˆ†åŒºå­˜å‚¨ä»‹ç»åŠç™¾åº¦APPé€‚é…å®žè·µ æŠ–éŸ³BoostMultiDexä¼˜åŒ–å®žè·µï¼šAndroidä½Žç‰ˆæœ¬ä¸ŠAPPé¦–æ¬¡å¯åŠ¨æ—¶é—´å‡å°‘80% æŠ–éŸ³BoostMultiDexä¼˜åŒ–å®žè·µï¼šAndroidä½Žç‰ˆæœ¬ä¸ŠAPPé¦–æ¬¡å¯åŠ¨æ—¶é—´å‡å°‘80%ï¼ˆäºŒï¼‰ 4. ä¸€ä¸ª Android ä¼˜ç§€åšä¸»çš„æ–‡ç« åˆé›†https://github.com/yangkun19921001/Blog æ¯”è¾ƒé€‚åˆç³»ç»Ÿæ€§çš„å¤ä¹ ï¼Œè€Œä¸”ä½œè€…åº”è¯¥æ¯”è¾ƒç²¾é€šéŸ³è§†é¢‘ï¼Œæˆ‘çŸ¥é“å¾ˆå¤šåŒå­¦å¯¹éŸ³è§†é¢‘å¾ˆå¥½å¥‡ï¼Œè‹¦äºŽæ²¡æœ‰ä»€ä¹ˆå…¥é—¨çš„ä¹¦ç±ç­‰ï¼Œä¸å¦¨çœ‹ä¸‹è¿™ä½ä½œè€…ç³»åˆ—æ–‡ç« ã€‚ 5. ä¸€ä¸ªAndroid é¢è¯•é¢˜åˆé›†è¿™æ˜¯ä¸€ä¸ªå›½å¤–å¼€å‘è€…ç»´æŠ¤çš„ä»“åº“ï¼Œæ‰€ä»¥é—®é¢˜ä»¥åŠç›¸å…³é—®é¢˜è§£ç­”çš„åšå®¢éƒ½æ˜¯å¤–æ–‡ã€‚ https://github.com/MindorksOpenSource/android-interview-questionsä¸Šè¿°é—®é¢˜åœ¨æˆ‘ä»¬çœ‹æ¥ä¸ä¸€å®šèƒ½ä½œä¸ºé¢è¯•é¢˜ï¼Œä½†æ˜¯æœ‰äº›é—®é¢˜è¿˜æ˜¯å¯ä»¥ç”¨æ¥å·®ç¼ºè¡¥æ¼çš„ï¼Œä¹Ÿèƒ½å¸®åŠ©å¤§å®¶å‘çŽ°ä¸€äº›å†™çš„æ¯”è¾ƒå¥½çš„å¤–æ–‡åšå®¢ã€‚ 6. lancet ï¼šä¸€ä¸ª hook åº“https://github.com/eleme/lancetè¿™ä¸ªåº“éžå¸¸ä¹…äº†å“ˆï¼Œé¥¿äº†ä¹ˆå¯¹å¤–å¼€æºçš„ï¼Œä½†æ˜¯å¥½åƒå¼€å‘è€…å…³æ³¨åº¦å¹¶ä¸é«˜ã€‚å®žé™…ä¸Šè¿˜æ˜¯éžå¸¸å¥½ç”¨çš„ï¼Œæˆ‘ä»¬ä¼ ç»Ÿæ„ä¹‰ hook çš„æƒ³æ³•ï¼Œéƒ½æ˜¯æ¢æŽ‰æŸä¸ªå®žçŽ°ã€‚ æ¯”å¦‚ A ç±»ï¼Œæœ‰ä¸ª b æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ bæ–¹æ³•è¿”å›žå€¼ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šè€ƒè™‘ hook ä¸€äº›å¯¹è±¡ï¼Œç”±è¿™äº›å¯¹è±¡å¯¼è‡´ b æ–¹æ³•çš„æ‰§è¡Œè¿”å›žé€»è¾‘å‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯è¿™ç§hook å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“æ‰¾åˆ°çªç ´å£ã€‚ è€Œ lancet çš„æ¦‚å¿µå°±å¾ˆæœ‰æ„æ€äº†ï¼Œå®ƒä¸ä¿®æ”¹ bæ–¹æ³•ï¼Œä»–ä¿®æ”¹æ‰€æœ‰è°ƒç”¨ b æ–¹æ³•çš„åœ°æ–¹ï¼ŒæŠŠå¯¹b æ–¹æ³•çš„è°ƒç”¨hook åˆ°ä½ å‡†å¤‡å¥½çš„æ–¹æ³•ä¸­ï¼Œæ‰€ä»¥ä½ å¯ä»¥éšæ„çš„æŽ§åˆ¶è¿”å›žå€¼ï¼Œå½“ç„¶è¿™ç§ hook è‚¯å®šæ˜¯åŸºäºŽç¼–è¯‘æœŸä¿®æ”¹å­—èŠ‚ç çš„ï¼Œä¼˜åŠ¿å°±æ˜¯ä¸€å®šèƒ½æ¢åˆ°ï¼Œåªè¦æ˜¯å‚ä¸Žç¼–è¯‘çš„ä»£ç ã€‚ æˆ‘è¯´çš„å¯èƒ½å¤§å®¶ä¸å¤ªå®¹æ˜“ç†è§£ï¼Œè¿˜æ˜¯å»ºè®®å¤§å®¶äº†è§£ä¸‹è¿™ä¸ªåº“çš„åŽŸç†ï¼Œç¡®å®žæ˜¯ hook çš„ä¸€ä¸ªéžå¸¸å¥½çš„æ–°æ€è·¯ã€‚ 7. å¥‡æ€å¦™æƒ³è§åˆ°ä¸€ä¸ªåº“æ˜¯è¿™æ ·çš„: https://github.com/m-zylab/SketchyComponentä¸»è¦æ˜¯æ‰‹ç»˜é£Žï¼Œç›¸ä¿¡å¤§å®¶æ ¹æ®ä¹‹å‰çš„ç°ç™½åŒ–çš„æ–‡ç« ï¼šAppé»‘ç™½åŒ–å®žçŽ°æŽ¢ç´¢ï¼Œæœ‰ä¸€è¡Œä»£ç å®žçŽ°çš„æ–¹æ¡ˆå—ï¼Ÿ éƒ½çŸ¥é“æˆ‘ä»¬å¯ä»¥åŸºäºŽæ¢è‚¤çš„æ–¹æ¡ˆæŠŠä¸€äº›æŽ§ä»¶æ¢æˆæˆ‘ä»¬è‡ªå·±çš„ï¼Œé‚£ä¹ˆå‡è®¾æˆ‘ä»¬å¯ä»¥æä¾›æ‰‹ç»˜é£Žæ ¼çš„ï¼šTextView,Buttonâ€¦ç­‰ï¼Œæ˜¯ä¸æ˜¯æœ‰å¯èƒ½å¯ä»¥å°†ä¸€ä¸ª app çž¬é—´å˜æˆæ‰‹ç»˜é£Žæ ¼ï¼Ÿ 8. éšä¾¿æ’­æŠ¥appcomapt 1.1.0 ç‰ˆæœ¬åœ¨ android 5.0,5.1çš„è®¾å¤‡ä¸Šå¯èƒ½ä¼šé€ æˆ webview å´©æºƒè¿™æ˜¯å‘¨å…­çš„æ—¶å€™ä¸€ä¸ªæœ‹å‹é‡åˆ°çš„é—®é¢˜ï¼ŒæŸ¥äº†ä¸‹å‘çŽ°çš„ã€‚è¿™æ˜¯ä¸ªå®˜æ–¹bug:https://issuetracker.google.com/issues/141132133 ä¸€äº›è§£å†³æ–¹æ¡ˆï¼šhttps://stackoverflow.com/questions/41025200/android-view-inflateexception-error-inflating-class-android-webkit-webview/49024931#49024931å¦‚æžœä½ å‡çº§1.1.0è¦è°¨æ…Žã€‚ å¥½äº†ï¼Œç¥å¤§å®¶å…ƒæ°”æ»¡æ»¡ï¼]]></content>
      <categories>
        <category>æ–°æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>æ–°æŠ€æœ¯</tag>
        <tag>å¤§åŽ‚å¯¹å¤–åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€æ–°æŠ€æœ¯ã€‘åˆåŒå’å•æ¥äº†ç³»åˆ—äºŒ]]></title>
    <url>%2Fposts%2F2e3f2830.html</url>
    <content type="text"><![CDATA[1. Android å¼€å‘è€…å³°ä¼šä¸€äº›èµ„æºå¤§å®¶å¯ä»¥åœ¨ B ç«™çœ‹åˆ°æ‰€æœ‰çš„å†…å®¹ï¼š https://space.bilibili.com/64169458/channel/detail?cid=91608 æœ‰ä¸ªå€¼å¾—å…³æ³¨çš„æ˜¯ï¼Œå®˜æ–¹å›žå¤äº†ä¸€äº› Android å¼€å‘çš„é—®é¢˜ï¼šä¸€äº›æ–°æŠ€æœ¯éƒ½æœ‰æ¶‰åŠï¼Œæ¯”å¦‚ ViewPager2 æ­£å¼å‘å¸ƒï¼Œå…³äºŽ Camerax,Camera2,Camera1 ä¹‹é—´å¦‚ä½•é€‰æ‹©ï¼Œä»¥åŠKotlinï¼ŒJetpack Compose ç›¸å…³é—®é¢˜ã€‚ æˆ‘å½“æ—¶æ¯”è¾ƒå¥½å¥‡çš„ä¸€ä¸ªé—®é¢˜æ˜¯è¿™ä¸ªï¼š æŒºå¥‡æ€ªçš„ï¼Œéš¾é“å®˜æ–¹ app ä¼šè€ƒè™‘åªç”¨ä¸€ä¸ª Activity ä¹ˆï¼Ÿ è¯¦ç»†çš„å¤§å®¶ç›´æŽ¥çœ‹è¿™é‡Œï¼šAndroid å¼€å‘è€…å³°ä¼š 2019 å¸¸è§é—®é¢˜è§£ç­” 2. ç™¾åº¦å¯¹å¤–å¼€æºæ–‡ç« è¯¦æƒ…é¡µ webview+recyclerview+ä¸€äº›åŽŸç”ŸæŽ§ä»¶è”åŠ¨æ•ˆæžœhttps://github.com/baiduapp-tec/ELinkageScroll å¦‚æžœå¤§å®¶æ¯ç¯‡æŽ¨æ–‡éƒ½çœ‹çš„è¯ï¼Œè¿™ä¸ªåº“æˆ‘ä¸Šæ¬¡å·²ç»ä¸“é—¨ä»‹ç»è¿‡å•¦ã€‚ è¿™ä¸ªæ•ˆæžœä½¿ç”¨éžå¸¸å¹¿ï¼ŒåŸºæœ¬æ‰€æœ‰çš„èµ„è®¯ç±» app éƒ½æœ‰ï¼Œæ„Ÿè°¢ç™¾åº¦å¼€æºã€‚ åŽ†å²ç±»ä¼¼æ–‡ç« ï¼šå¤§åŽ‚çš„æ–‡ç« è¯¦æƒ…é¡µ WebViewä¸Ž RecyclerViewå¦‚ä½•è¿žè´¯æ»‘åŠ¨çš„ï¼Ÿ å¦å¤–æ„Ÿè°¢ã€Œthis èœ—ç‰›ã€è¿™ä½æœ‹å‹ç•™è¨€è¯´é“ QMUIä¹Ÿæœ‰è¿™ä¸ªæ•ˆæžœï¼Œè¿˜åŽå°ç»™æˆ‘å‘äº†ä¸ªæˆªå›¾ï¼Œæˆ‘ä¹Ÿç»™å¤§å®¶è¡¥å……ä¸Šï¼Œå¤§å®¶å¯ä»¥ä¸€èµ·å‚è€ƒã€‚ https://qmuiteam.com/android https://github.com/Tencent/QMUI_Android ä¹‹å‰çš„ç³»åˆ—æˆ‘ä¹Ÿç»™å¤§å®¶æŽ¨èè¿‡ QMUIï¼Œè¿™æ ·çš„å¤§åŽ‚å‡ºçš„ç±»åº“è¿˜æ˜¯å¯ä»¥å…³æ³¨ä¸‹ï¼Œå°¤å…¶é’ˆå¯¹ä¸ªäººå¼€å‘è€…ï¼Œåœ¨å¿«é€Ÿè¿­ä»£è‡ªå·±é¡¹ç›®çš„æ—¶å€™è¿˜æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ 3. å¤§åŽ‚å¯¹å¤–æ–‡ç« åˆ†äº«ç™¾åº¦ App æŠ€æœ¯ä¸€ç§ç®€å•ä¼˜é›…çš„TextViewè¡Œé—´è·é€‚é…æ–¹æ¡ˆ ä»¥å‰ç”¨ TextViewå°±æ€•UI è·Ÿæˆ‘ä»¬çº ç»“è¡Œé«˜ï¼Œå› ä¸ºåœ¨ Android é‡Œé¢æ²¡æœ‰ä¸€ä¸ªéžå¸¸æ˜Žç¡®çš„ lineHeight æ¦‚å¿µï¼Œç™¾åº¦è¿™è¾¹åˆ†äº«äº†è‡ªå·±çš„è§£å†³æ–¹æ¡ˆï¼Œè¿˜æ˜¯å­¦åˆ°äº†ä¸€äº›æ–°çŸ¥è¯†çš„ï¼Œæ–‡ç« ä¸­æåˆ°çš„LineHeightSpanæˆ‘ä¹‹å‰å°±ä¸çŸ¥é“ï¼Œè¿˜æ˜¯å­¦åˆ°äº†ã€‚ æ–¹æ¡ˆå¯¹äºŽä¸­æ–‡çš„æ”¯æŒè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œå€¼å¾—å€Ÿé‰´ã€‚Android 10åˆ†åŒºå­˜å‚¨ä»‹ç»åŠç™¾åº¦APPé€‚é…å®žè·µè¿™ä¸ªå°±ä¸ç”¨ä»‹ç»äº†å§ï¼Œæ ‡é¢˜å¾ˆæ¸…æ™°ã€‚ å­—èŠ‚è·³åŠ¨æŠ€æœ¯å›¢é˜Ÿ æŠ–éŸ³BoostMultiDexä¼˜åŒ–å®žè·µï¼šAndroidä½Žç‰ˆæœ¬ä¸ŠAPPé¦–æ¬¡å¯åŠ¨æ—¶é—´å‡å°‘80% æŠ–éŸ³BoostMultiDexä¼˜åŒ–å®žè·µï¼šAndroidä½Žç‰ˆæœ¬ä¸ŠAPPé¦–æ¬¡å¯åŠ¨æ—¶é—´å‡å°‘80%ï¼ˆäºŒï¼‰ ä»‹ç»äº†æŠ–éŸ³å›¢é˜Ÿè‡ªç ”çš„ä¸€ä¸ªé’ˆå¯¹ 4.x çº§ä»¥ä¸‹æœºåž‹å¯¹äºŽ MultiDex çš„ä¼˜åŒ–ã€‚ç›®å‰è¿˜æ²¡æœ‰å¼€æºï¼Œå¤§å®¶å¯ä»¥äº†è§£ä¸‹åŽŸç†ï¼ŒåŽç»­å¼€æºæˆ‘ä¹Ÿä¼šå‘¨çŸ¥å¤§å®¶çš„ã€‚æ­¤å¤–ç›¸å…³çŸ¥è¯†ä¹Ÿå¯ä»¥å­¦ä¹ ä¸‹ï¼šAndroid ä¸€ç§åœ¨Dalvikè™šæ‹Ÿæœºä¸Šå¤šDexåŠ è½½ä¼˜åŒ–çš„æ–¹æ¡ˆhttps://blog.csdn.net/sbsujjbcy/article/details/53381663 Google å¼€å‘è€…Room ä¸­çš„æ•°æ®åº“å…³ç³»å¯¹äºŽ Room ä½¿ç”¨è€…ï¼Œå¦‚æžœä½ å¯¹ 1 å¯¹ 1ï¼Œ1 å¯¹Nï¼ŒN å¯¹ N ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„å¯ä»¥å­¦ä¹ ä¸‹ã€‚ åŽ†å²åˆ†äº«(ç‚¹å‡»å¯ç›´æŽ¥è®¿é—®)ï¼š è…¾è®¯Bugly:å¯¹å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•çš„ä¸€ç‚¹ç†è§£ çˆ±å¥‡è‰ºï¼šå®‰å“APPå´©æºƒæ•èŽ·æ–¹æ¡ˆâ€”â€”xCrash å­—èŠ‚è·³åŠ¨ï¼šæ·±å…¥ç†è§£Gradleæ¡†æž¶ä¹‹ä¸€ï¼šPlugin, Extension, buildSrc ç™¾åº¦APPæŠ€æœ¯ï¼šAndroid H5é¦–å±ä¼˜åŒ–å®žè·µ äº¬ä¸œæŠ€æœ¯ï¼šä»»æ„URLè·³è½¬æ¼æ´žä¿®å¤ä¸ŽJDKä¸­getHost()æ–¹æ³•ä¹‹é—´çš„å‘ æ”¯ä»˜å®å®¢æˆ·ç«¯æž¶æž„è§£æžï¼šAndroid å®¢æˆ·ç«¯å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ä¹‹ã€Œåžƒåœ¾å›žæ”¶ã€ æ”¯ä»˜å® App æž„å»ºä¼˜åŒ–è§£æžï¼šé€šè¿‡å®‰è£…åŒ…é‡æŽ’å¸ƒä¼˜åŒ– Android ç«¯å¯åŠ¨æ€§èƒ½ æ”¯ä»˜å® App æž„å»ºä¼˜åŒ–è§£æžï¼šAndroid åŒ…å¤§å°æžè‡´åŽ‹ç¼© æœç‹ï¼šæ·±å…¥ç†è§£Flutterå¤šçº¿ç¨‹ æºç¨‹ï¼šä»Žæ™ºè¡Œ Android é¡¹ç›®çœ‹ç»„ä»¶åŒ–æž¶æž„å®žè·µ Google: Flutter æ‚¨éœ€è¦çŸ¥é“çš„çŸ¥è¯†ç‚¹ | FAQãƒ»ç¬¬ä¸‰æœŸ å­—èŠ‚è·³åŠ¨ï¼šäºŒç»´ç æ‰«æä¼˜åŒ– ç½‘æ˜“ä¼ åª’æŠ€æœ¯å›¢é˜Ÿï¼šAOPæŠ€æœ¯åœ¨å®¢æˆ·ç«¯çš„åº”ç”¨ä¸Žå®žè·µ ç½‘æ˜“å¤§æ•°æ®|äº’è”ç½‘äº§å“å†³ç­–ç§˜ç¬ˆ: ABæµ‹è¯• é«˜å¾·ï¼šAndroid Native å†…å­˜æ³„æ¼ç³»ç»ŸåŒ–è§£å†³æ–¹æ¡ˆ ä¾‹è¯´ Constraint Layoutï¼ˆä¸‰ï¼‰â€”â€” æ€§èƒ½æµ‹è¯• Android Pä¹‹Smart Linkify ç™¾åº¦Appç»„ä»¶åŒ–ä¹‹è·¯ ç™¾åº¦Appç½‘ç»œæ·±åº¦ä¼˜åŒ–ç³»åˆ—ã€Šä¸‰ã€‹å¼±ç½‘ä¼˜åŒ– å¤´æ¡ | æ·±å…¥ç†è§£gradleæ¡†æž¶ä¹‹äºŒï¼šä¾èµ–å®žçŽ°åˆ†æž ç¾Žå›¢| Probeï¼šAndroidçº¿ä¸ŠOOMé—®é¢˜å®šä½ç»„ä»¶ ç¾Žå›¢|Androidé™æ€ä»£ç æ‰«ææ•ˆçŽ‡ä¼˜åŒ–ä¸Žå®žè·µ å¤´æ¡| å¼€æº | Sceneï¼šAndroid å¼€æºé¡µé¢å¯¼èˆªå’Œç»„åˆæ¡†æž¶ ç½‘æ˜“æ–°é—»å®¢æˆ·ç«¯ H5 ç§’å¼€ä¼˜åŒ– è§£å†³æ”¯ä»˜å®åŒ…ä½“ç§¯ä¼˜åŒ–çš„é—ç•™é—®é¢˜ï¼šè¿è¡Œæ—¶èŽ·å–dexpc Androidç¯‡ | çˆ±å¥‡è‰ºAppå¯åŠ¨ä¼˜åŒ–å®žè·µåˆ†äº« äºŒç»´ç æ‰«æä¼˜åŒ–åŠçˆ±å¥‡è‰ºAppçš„å®žè·µ è…¾è®¯ Buglyï¼šåŠ¨æ€ä¸‹å‘ so åº“åœ¨ Android APK å®‰è£…åŒ…ç˜¦èº«æ–¹é¢çš„åº”ç”¨ å¤©çŒ«ç²¾çµï¼šå²ä¸Šæœ€å…¨Androidæ¸²æŸ“æœºåˆ¶è®²è§£ï¼ˆé•¿æ–‡æºç æ·±åº¦å‰–æžï¼‰ èŠ±æ¤’Androidç«¯è‡ªåŠ¨åŒ–æµ‹è¯•å®žè·µ 4. Github æ‰¾ Android é¡¹ç›®å§¿åŠ¿ä¸Šæ¬¡æœ‰åŒå­¦ç•™è¨€é—®æˆ‘æ€Žä¹ˆåœ¨ Github æ‰¾ Androidé¡¹ç›®ï¼Œå¤§å®¶èƒ½æƒ³åˆ°çš„è‚¯å®šæ˜¯çœ‹ trending:https://github.com/trending/java ä¸è¿‡çŽ°åœ¨èƒ½ä¸Š trending çš„ Android é¡¹ç›®å¤ªå°‘äº†ï¼Œæ¯•ç«Ÿå’Œ Java é¡¹ç›®åœ¨ä¸€ä¸ªåˆ†ç±»ã€‚å…¶å®ž Github æœ‰ä¸»é¢˜çš„æ¦‚å¿µï¼Œç›´æŽ¥é€‰æ‹© Android ä¸»é¢˜å°±å¯ä»¥äº†ï¼šhttps://github.com/topics/android å¯ä»¥çœ‹åˆ°æœ‰9W+é¡¹ç›®ã€‚ ä¹Ÿå¯ä»¥æŒ‰æ¡ä»¶ç­›é€‰ï¼š 5. ä¸€äº›Android é€†å‘*æ”»é˜²*ç›¸å…³çš„è¯é¢˜æœ‰è¿™ä¹ˆä¸€ä¸ªä»“åº“ï¼šhttps://github.com/Hack-with-Github/Awesome-Hackingçœ‹åå­—å¤§å®¶å°±çŸ¥é“ä»‹ç»å•¥äº†ï¼Œæ˜¯ä¸€ä¸ªå®‰å…¨ç›¸å…³çš„ä»“åº“æ±‡æ€»ï¼Œé‡Œé¢åŒ…å«äº†å¤ªå¤šçš„å­é¡¹ç›®ï¼Œä¾‹å¦‚æœ‰äº›å·¥å…·ä¸çŸ¥é“åœ¨å“ªä¸‹è½½ï¼Œåœ¨è¿™é‡Œé¢å¾ˆå¥½æ‰¾ï¼šhttps://github.com/carpedm20/awesome-hacking 6. æ’­æŠ¥ä¸€äº›æœ€è¿‘å‘çŽ°æ›´æ–°çš„å¼€æºåº“LeakCanary ä¸å†ä½¿ç”¨ hahaæˆ‘ä»¬ç†Ÿæ‚‰çš„ LeakCanary å·²ç»ä¸å†ä½¿ç”¨ä¹‹å‰çš„ haha åšå†…å­˜åˆ†æžï¼Œæ¢æˆäº†è‡ªç ”çš„ Sharkã€‚https://square.github.io/leakcanary/shark/ RxJava å·²ç»æ›´æ–°äº† 3.0.0 ç‰ˆæœ¬https://github.com/ReactiveX/RxJavaä¸è¿‡ Retrofit2 æš‚æ—¶è¿˜æ— æ³•ä½¿ç”¨ RxJava3ï¼Œå› ä¸ºç›¸å…³ Adapter åº“è¿˜æœªé€‚é… RxJava3ã€‚ å¥½äº†ï¼Œç¥å¤§å®¶å…ƒæ°”æ»¡æ»¡ï¼]]></content>
      <categories>
        <category>æ–°æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>æ–°æŠ€æœ¯</tag>
        <tag>å¤§åŽ‚å¯¹å¤–åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€æ–°æŠ€æœ¯ã€‘åˆåŒå’å•æ¥äº†ç³»åˆ—ä¸€]]></title>
    <url>%2Fposts%2F3eabe808.html</url>
    <content type="text"><![CDATA[ä¸€äº›ä¸­æ–‡ç‹¬ç«‹åšå®¢åˆ†äº«ç›®å‰éšç€ç§»åŠ¨ç«¯çš„å…´èµ·ï¼Œæ—©æœŸçš„å¾ˆå¤šä¸­æ–‡ PC åšå®¢å·²ç»å¾ˆå°‘æœ‰äººåŽ»é˜…è¯»äº†ï¼Œä¹Ÿå¾ˆéš¾è¢«å¤§å®¶æ‰€å‘çŽ°ã€‚ å› ä¸ºæˆ‘ä¹‹å‰å…³æ³¨ä¸€ä¸ªå°ä¼™çš„åˆ›ä¸šå®žéªŒï¼Œæ¯”è¾ƒå¥½å¥‡ä»–æœ€ç»ˆä¼šä¸ä¼šæˆåŠŸï¼Œä¹Ÿå¥½å¥‡ä»–çš„çµæ„Ÿï¼Œä»–çš„ä¸‹ä¸€ä¸ªäº§å“æ˜¯ä¸€ä¸ªä¸­æ–‡åšå®¢ç›¸å…³çš„ RSS äº§å“ã€‚ æ‰€ä»¥ä»–æ”¶é›†äº†ä¸€æ³¢ä¸­æ–‡åšå®¢åˆ—è¡¨ï¼ŒæŽ¨èç»™å¤§å®¶ï¼š https://github.com/timqian/chinese-independent-blogs å¤§æ¦‚æœ‰ 300 å¤šä½ä¸­æ–‡åšå®¢åˆ—è¡¨ï¼Œå¶å°”è¯»ä¸€äº›è¿™ä¸Šé¢çš„æ–‡ç« ï¼Œåº”è¯¥è¿˜æ˜¯èƒ½æ¿€å‘ä¸å°‘çµæ„Ÿçš„ã€‚ å…¶å®žå¦‚æžœè¿™äº›ç‹¬ç«‹åšå®¢æ•°é‡å¤Ÿå¤šï¼Œå¯ä»¥èšåˆèµ·æ¥ï¼Œåšä¸€ä¸ªé˜…è¯» appï¼Œæ”¯æŒè®¢é˜…ä¹Ÿæ˜¯ä¸é”™çš„ã€‚ å®˜æ–¹å‘å¸ƒçš„ä»£ç æ£€ç´¢å·¥å…·å®žé™…ä½¿ç”¨èµ·æ¥ï¼Œå®žåœ¨å¤ªå¥½ç”¨äº†ï¼Œå¼ºçƒˆæŽ¨èä¸‹ã€‚ æ³¨æ„ï¼šéœ€è¦ç½‘ç»œè‰¯å¥½ã€‚ https://cs.android.com/ å…¶ä»–ä¸€äº›åœ¨çº¿æºç é˜…è¯»å·¥å…·ï¼š https://www.androidos.net.cn/sourcecode http://aospxref.com/ å­—èŠ‚è·³åŠ¨å¼€æºä¸€ç³»åˆ—æ’ä»¶https://github.com/bytedance/ByteX åŸºæœ¬éƒ½æ˜¯ç¼–è¯‘æ—¶å­—èŠ‚ç ç›¸å…³çš„ï¼Œç›®å‰åº”ç”¨äºŽå¤šæ¬¾å­—èŠ‚è·³åŠ¨äº§å“ä¸Šã€‚ access-inline-pluginï¼ˆaccessæ–¹æ³•å†…è”ï¼‰ shrink-r-pluginï¼ˆRæ–‡ä»¶ç˜¦èº«å’Œæ— ç”¨èµ„æºæ£€æŸ¥ï¼‰ closeable-check-pluginï¼ˆæ–‡ä»¶æµçš„closeæ£€æŸ¥ï¼‰ const-inline-pluginï¼ˆå¸¸é‡å†…è”ï¼‰ field-assign-opt-pluginï¼ˆä¼˜åŒ–å¤šä½™èµ‹å€¼æŒ‡ä»¤ï¼‰ getter-setter-inline-plugin ï¼ˆgetterå’Œsetteræ–¹æ³•å†…è”ï¼‰ method-call-opt-pluginï¼ˆå¹²å‡€åœ°åˆ é™¤æŸäº›æ–¹æ³•è°ƒç”¨ï¼Œå¦‚Log.dï¼‰ coverage-pluginï¼ˆçº¿ä¸Šä»£ç è¦†ç›–çŽ‡ï¼‰ refer-check-pluginï¼ˆæ£€æŸ¥æ˜¯å¦æœ‰è°ƒç”¨ä¸å­˜åœ¨çš„æ–¹æ³•å’Œå¼•ç”¨ä¸å­˜åœ¨çš„å­—æ®µï¼‰ serialization-check-pluginï¼ˆåºåˆ—åŒ–æ£€æŸ¥ï¼‰ SourceFileKillerï¼ˆåˆ é™¤SourceFileå’Œè¡Œå·å±žæ€§ï¼‰ ä¸€æ–¹é¢è¿™ä¸ªå¯ä»¥æŽ¥å…¥ï¼Œåšä¸€äº›äº§å“ä¸Šçš„å®‰å…¨ã€ä¼˜åŒ–ã€‚ å¦ä¸€æ–¹é¢æ˜¯å­¦ä¹ çš„å¥½èµ„æ–™ï¼Œå¦‚æžœéƒ½èƒ½çœ‹æ˜Žç™½ï¼ŒAS çš„ Transform å’Œå­—èŠ‚ç ç®—æ˜¯å·²ç»çŽ©è½¬äº†ã€‚ ç›¸å…³çš„å¼€æºé¡¹ç›®å°±æ˜¯æ»´æ»´çš„ booster: https://github.com/didi/booster å¤§åŽ‚å¯¹å¤–åˆ†äº«1. äºŒç»´ç æ‰«æä¼˜åŒ–åŠçˆ±å¥‡è‰ºAppçš„å®žè·µ è¯´äº†ä¸€äº›æ–¹æ¡ˆï¼Œå®žè·µè¿˜æ˜¯ä¹‹å‰å­—èŠ‚è·³åŠ¨ç»™å‡ºçš„æ–¹æ¡ˆæ›´é€‚åˆï¼š å­—èŠ‚è·³åŠ¨ï¼šäºŒç»´ç æ‰«æä¼˜åŒ– 2. è…¾è®¯ Buglyï¼šåŠ¨æ€ä¸‹å‘ so åº“åœ¨ Android APK å®‰è£…åŒ…ç˜¦èº«æ–¹é¢çš„åº”ç”¨ åŠ¨æ€ä¸‹å‘ soåº“ï¼Œæ˜¯å‡å°‘ apk ä½“ç§¯éžå¸¸æ˜Žæ˜¾çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œä¹‹å‰åœ¨ç™¾åº¦çš„æ—¶å€™ï¼Œä¹Ÿæžè¿‡è¿™æ ·çš„æ–¹æ¡ˆï¼Œä¸€åº¦æ˜¯ç˜¦èº«é»‘ç§‘æŠ€ï¼Œå½“ç„¶å‘ä¹Ÿä¸å°‘ï¼Œso è¿™çŽ©æ„æžä¸å¥½å´©æºƒå°±æ¯”è¾ƒå¤šï¼Œå¦‚æžœéœ€è¦å¯ä»¥å‚è€ƒç›®å‰ä¸€äº›æ’ä»¶åŒ–æ–¹æ¡ˆã€çƒ­ä¿®æ–¹æ¡ˆåŽ»åšã€‚ 3. å¤©çŒ«ç²¾çµï¼šå²ä¸Šæœ€å…¨Androidæ¸²æŸ“æœºåˆ¶è®²è§£ï¼ˆé•¿æ–‡æºç æ·±åº¦å‰–æžï¼‰ æ©â€¦æŠ€æœ¯æ–‡ç« è¿˜æ˜¯å¾ˆèµžçš„ã€‚ 4. èŠ±æ¤’Androidç«¯è‡ªåŠ¨åŒ–æµ‹è¯•å®žè·µ Android æµ‹è¯•ä¸€ç›´è¢«å¿½ç•¥ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰å¤ªå¤šè¿™æ–¹é¢æ¶‰çŒŽï¼Œå½“ç„¶è¿˜æ˜¯å€¼å¾—äº†è§£ä¸‹ã€‚ å¥½äº†ï¼Œç¥å¤§å®¶å…ƒæ°”æ»¡æ»¡ï¼]]></content>
      <categories>
        <category>æ–°æŠ€æœ¯</category>
      </categories>
      <tags>
        <tag>æ–°æŠ€æœ¯</tag>
        <tag>å¤§åŽ‚å¯¹å¤–åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šè€å¤§ä¸å°ã€‹è§‚åŽæ„Ÿ]]></title>
    <url>%2Fposts%2Fe984f211.html</url>
    <content type="text"><![CDATA[ç”µå½±é‡Œå¯¹è‡ªå·±æ„Ÿè§¦æœ€æ·±çš„ä¸€å¥è¯æ˜¯çˆ¸çˆ¸åœ¨ç—…åºŠä¸Šå¯¹ä»–å¤§å„¿å­é›·å­è¯´çš„ï¼šâ€˜â€™æˆ‘èµ°äº†ï¼Œæˆ‘å¯¹å°ç¡•ä¸€ç™¾ä¸ªæ”¾å¿ƒï¼Œä»–æœ‰ä¸ªæ²Ÿæ²ŸåŽåŽçš„ï¼Œè¿˜æœ‰ä½ è¿™ä¸ªå“¥ï¼Œå¯æ˜¯ï¼Œå¤§ç£Šå­ï¼Œæˆ‘èµ°äº†ä½ è¿˜æœ‰è°å•Šï¼Ÿâ€˜â€™ å†æœ‰ä¸¤å¹´å°±å¥”ä¸‰äº†ï¼Œè‡ªå·±ä¸€ç›´åŒ—æ¼‚åœ¨å¤–ï¼Œçˆ¸å¦ˆèº«ä½“ä¸€ç›´æ˜¯è‡ªå·±æ¯”è¾ƒæ‹…å¿ƒçš„ï¼Œæ€»æ˜¯æŠŠæœ€å¥½çš„éƒ½ç»™æˆ‘ä»¬ï¼Œä»–ä»¬è‡ªå·±çš„æ¯›ç—…åªæ˜¯ä¸ç»å¸¸è·Ÿåšå„¿å¥³çš„è¯´ã€‚é™ªä¼´å®¶äººçš„æ—¶é—´ä¹Ÿæ˜¯å±ˆæŒ‡å¯æ•°ï¼Œè‡ªå·±ä¸æ˜¯ä¸€ä¸ªç§°èŒçš„å„¿å­ï¼Œåªå¸Œæœ›è‡ªå·±åŠªåŠ›çš„è„šæ­¥èƒ½è¶…è¶Šçˆ¶æ¯æ…¢æ…¢å˜è€çš„é€Ÿåº¦ã€‚ å°±åƒå‰§é‡Œçš„çˆ¸çˆ¸å¿ç€èƒƒç™Œæ™šæœŸçš„ç–¼ç—›ä¸è®©å®¶é‡Œçš„å­©å­çŸ¥é“ä¸€æ ·ï¼Œç”¨ç”Ÿå‘½åœ¨ä¸ºè‡ªå·±çš„å„¿å­é“ºè·¯ï¼Œå­˜ä¸‹äº†é‚£ä¸¤å¼ é“¶è¡Œå¡ã€‚ çœŸæ­£æˆ³åˆ°æˆ‘æ³ªç‚¹çš„æ˜¯å¼Ÿå¼Ÿå†™ç»™å“¥å“¥çš„é‚£å°è¯´ä¸å‡ºå£çš„äº›è¯ï¼Œå†å›é€†çš„å­©å­å†…å¿ƒæ·±å¤„éƒ½å­˜åœ¨ç€æœ€çœŸæŒšã€æœ€çº¯ç²¹çš„æ„Ÿæƒ…ï¼Œåªæ˜¯æœ‰äº›æ—¶å€™ä¸ä¼šè¡¨è¾¾å‡ºæ¥ï¼Œæ¯”å¦‚çˆ¶äº²ç—…åºŠæ¡Œå­ä¸Šçš„ä¸€æ¯æ°´ï¼›æ—©ä¸Šå–‚äº†çˆ¶äº²ç”Ÿå‰æ€»å–‚çš„çŒ«ã€‚å…¶å®žç”Ÿæ´»ä¸­çœŸçš„æœ‰å¥½å¤šæƒ…æ„Ÿéš¾ä»¥ç”¨è¯­è¨€è¡¨è¾¾å‡ºæ¥ï¼Œä½†æ˜¯æˆ‘ä»¬å½¼æ­¤éƒ½çœŸè¯šï¼Œéƒ½æ„¿æ„ä»˜å‡ºã€‚ å…³äºŽå“¥å“¥çš„å‹æƒ…å’Œçˆ±æƒ…ã€‚ä»–èƒ½æœ‰ä¸€ä¸ªçœŸæ­£ä¸ç¦»ä¸å¼ƒçš„å¥½å“¥ä»¬ï¼Œåœ¨ä»–éœ€è¦çš„æ—¶å€™æŒºèº«è€Œå‡ºï¼ŒçœŸçš„æŒºå¹¸è¿çš„ã€‚åŒ…æ‹¬å…„å¼Ÿè¯´çš„é‚£å¥è¯â€œæœ‰çš„äººæ˜¯é è„¸æ´»ç€ï¼Œè€Œæœ‰çš„äººæ˜¯ä¸ºäº†è„¸æ´»ç€ã€‚â€ æˆå¹´äººçš„ä¸–ç•Œå¯èƒ½å°±æ˜¯è¿™æ ·å§ï¼Œæœ‰ç”Ÿæ´»çš„é‡æ‹…è¿žæ‹çˆ±çš„å‹‡æ°”éƒ½æ²¡æœ‰ï¼Œä½†æœ€åŽä»–ä¿©åœ¨ä¸€èµ·çœŸçš„å¾ˆå¼€å¿ƒã€‚ æ•´ä½“è€Œè¨€çœ‹å®Œè¿™éƒ¨ç”µå½±ï¼Œ ä¸æ˜¯èŒä¸šçš„ç”µå½±è¯„è®ºã€‚ å¯ä»¥è¯´è¿™éƒ¨ç”µå½±åˆ¶ä½œå¾ˆæˆåŠŸäº†ã€‚ ä¸€ä¸ªæ²¡æœ‰ä¸Šè¿‡å¤§å­¦çš„å“¥å“¥ï¼Œä¸€ä¸ªé’æ˜¥æœŸå›é€†çš„å¼Ÿå¼Ÿï¼Œå’Œä¸€ä¸ªä¸ºäº†å®¶åŠªåŠ›çš„çˆ¶äº²ã€‚ æˆå¹´äººçš„ä¸–ç•Œï¼Œæ²¡æœ‰å®¹æ˜“äºŒå­—ï¼Œæ¯ä¸ªäººéƒ½æœ‰åŽ‹åŠ›ï¼Œå“¥å“¥è§‰å¾—å¼Ÿå¼Ÿä¸äº‰æ°”ï¼ŒåŽ»è·Ÿå·²æ•…çš„çˆ¶äº²èŠèŠå¤©ï¼Œæ”¶æ‹¾æ”¶æ‹¾å¿ƒæƒ…è¿˜æ˜¯å†æ¬¡å›žåˆ°å®¶ã€‚ å¼Ÿå¼Ÿä»Žæœ€åˆçš„ä¸è¡¨è¾¾çˆ±å’Œä¸æŽ¥å—è¿™äº›çˆ±ï¼Œå˜æˆäº†ä¸€ä¸ªæ‡‚äº‹çš„å­©å­ï¼Œæ¯ä¸ªå­©å­å¹´å°‘çš„æ—¶å€™éƒ½ä¼šç»åŽ†å›é€†æ—¶å€™ã€‚åŽæ¥ä¹Ÿä¼šå‘çŽ°ï¼Œå½“åˆæ˜¯æœ‰å¤šä¹ˆä¸æ‡‚äº‹ã€‚ å¼Ÿå¼Ÿæ‰“é‚£ä¸ªå­©å­ï¼Œé”™äº†ä¹ˆï¼Ÿæ²¡é”™ï¼Œå¯¹äº†ä¹ˆï¼Ÿä¸å¯¹ã€‚ä»¥å‰æ‰“æž¶æ˜¯å‘æ³„æƒ…ç»ªï¼ŒçŽ°åœ¨æ‰“æž¶æ˜¯æ‰“é’±ï¼ŒæŒºå¥½ä¸€å¥è¯ï¼ŒçŽ°åœ¨å­©å­çœ‹äº†å¯ä»¥æƒ³ä¸€æƒ³ï¼Œæ‰“é‚£ä¸ªæž¶ä¸ºäº†ä»€ä¹ˆï¼Ÿ æ•´ä¸ªå‰§å¯ä»¥è¯´çŽ¯çŽ¯ç›¸æ‰£ï¼Œä»Žæœ€åˆå“¥å“¥æ¯å¤©éƒ½ç»™é‚£ä¸ªæµæµªæ±‰é’±ï¼Œæ˜¯å‚»ä¹ˆï¼Ÿåªæ˜¯æ´»çš„ä¹è§‚è€Œå·²ã€‚ å¼Ÿå¼Ÿé€ƒå­¦æ‰“æ¸¸æˆï¼Œæ²¡æœ‰å…‰ä¸ºäº†æ‰“æ¸¸æˆï¼Œæ‰“æ¸¸æˆå¾—çš„å¥–å“ä¹ŸåŽ»é€ç»™äº†çˆ¶äº²ï¼Œå”¯ä¸€ä¸€ä¸ªè¿‡é”™å°±æ˜¯æ²¡æœ‰å½“ç€é¢å«ä»–ä¸€å£°çˆ¸ã€‚ å“¥å“¥åªè¦ç‚¹ç‚¹å¤´ï¼Œå°±èƒ½å¾—åˆ°ä¸€ä»½æŒ£é’±çš„å·¥ä½œï¼Œä½†æ˜¯ä»–æ²¡æœ‰ï¼Œä»–æ´»ç€è¦ç€ä¸€å¼ è„¸ï¼Œå¯ä»¥é€šè¿‡è‡ªå·±çš„åŠªåŠ›åŽ»æŒ£è¿™ä¸ªé’±ï¼Œä½†ä¸æƒ³é æ„Ÿæƒ…æ¥æŒ£è¿™ä¸ªé’±ã€‚ ä¸€ä¸ªç®€å•çš„æ•…äº‹ï¼Œå¾ˆæ¸©æš–ï¼ŒæºäºŽç”Ÿæ´»ã€‚ é‡Œé¢æœ‰å¥è¯æŒºå¥½ï¼Œæœ‰äººæ˜¯é è„¸æ´»ç€ï¼Œæœ‰äººä¸ºäº†è„¸æ´»ç€ã€‚]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åä¸ªæ€ç»´æ–¹å¼å¦‚ä½•æ”¹å˜æˆ‘çš„äººç”Ÿ]]></title>
    <url>%2Fposts%2Fbdeaaf0.html</url>
    <content type="text"><![CDATA[1ã€ä½ ä¸éœ€è¦æ˜¯ä¸ªå¤©æ‰ï¼Œæ‰æœ‰èµ„æ ¼åˆ†äº«çŸ¥è¯†â€”â€”ã€ŠShow Your Workã€‹2ã€é™¤äº†ç›®æ ‡ï¼Œè¿˜è¦å…³æ³¨å®žçŽ°ç›®æ ‡çš„ä½“ç³»ï¼Œäº«å—æå‡è‡ªæˆ‘çš„è¿‡ç¨‹3ã€1%å®šå¾‹ï¼šæ¯å¤©æå‡1%â€”â€”ã€ŠAtomic Habitsã€‹4ã€å¤šæ ·åŒ–æ”¶å…¥æ¥æº5ã€ä½ è§‰å¾—å¾ˆæ™®é€šçš„äº‹æƒ…ï¼Œåœ¨åˆ«äººçœ‹æ¥å¯èƒ½ä¼šå¾ˆäº†ä¸èµ·â€”â€”ã€ŠAnything You Wantã€‹6ã€æ¯æ—¥é‡ç‚¹ï¼šæ¢³ç†å¾…åŠžäº‹é¡¹çš„ä¼˜å…ˆçº§â€”â€”ã€ŠMake Timeã€‹7ã€å‹‡æ•¢åŽ»åšï¼šä¸ä¸€å®šè¦éµå¾ªæ—¢å®šè§„åˆ™åŽ»è¿‡äººç”Ÿâ€”â€”ã€ŠDo What You Canâ€™tã€‹8ã€å®¶åº­ã€ä¸ªäººã€å·¥ä½œçš„å¹³è¡¡â€”â€”ã€Šå¹³è¡¡çš„æ™ºæ…§ã€‹9ã€æ‰¾ä¸ªäººè°ˆè°ˆå¿ƒâ€”â€”ã€Šä½ å½“åƒé¸Ÿé£žå¾€ä½ çš„å±±ã€‹ã€ã€Šä¹Ÿè®¸ä½ è¯¥æ‰¾äººèŠèŠã€‹10ã€æˆåŠŸçš„å…¬å¼â€”â€”Y2bï¼šAli Abdaal]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 2.8 å‘å¸ƒ | æ€§èƒ½åŠå·¥å…·é“¾ä¼˜åŒ–ã€Firebase åŠŸèƒ½ã€WebView 3.0]]></title>
    <url>%2Fposts%2F7916835e.html</url>
    <content type="text"><![CDATA[å®˜æ–¹å‘å¸ƒè¯´æ˜Žï¼šmedium.com/flutter/whaâ€¦ åŒ—åŠçƒçš„å†¬æ„å·²è‡³ï¼Œé»„å¶ä¸Žæ°”æ¸©å‡éšé£Žè€Œè½ï¼Œè€Œå¹´ç»ˆçš„æœ€åŽä¸€ä¸ªç¨³å®šç‰ˆæœ¬å·²æ‚„ç„¶æ¥åˆ°ä½ çš„é¢å‰ã€‚ è®©æˆ‘ä»¬å‘ Flutter 2.8 æ‰“å£°æ‹›å‘¼ï½ž æœ¬æ¬¡æ›´æ–°åŒ…å«äº† 207 ä½è´¡çŒ®è€…å’Œ 178 ä½å®¡æ ¸è€… çš„è¾›å‹¤åŠ³ä½œï¼Œ æ‰€æœ‰äººå…±åŒäº§å‡ºäº† 2424 ä¸ª PRï¼Œå…³é—­äº† 2976 ä¸ª issueã€‚ åœ¨æ­¤ç‰¹åˆ«æ„Ÿè°¢æœ¬æ¬¡å‘å¸ƒä¸­æœ€çªå‡ºçš„ç¤¾åŒºè´¡çŒ®è€…ï¼šæ¥è‡ª Very Good Ventures çš„ Flutter å¼€å‘å·¥ç¨‹å¸ˆ Bartosz Selwesiukï¼Œ ä»–ä¸“æ³¨äºŽ Web å¹³å°çš„ camera æ’ä»¶å¹¶æäº¤äº† 23 ä¸ª PRã€‚ ä»¥ä¸Šçš„æ‰€æœ‰äº§å‡ºè®© Flutter engine å’Œ DevTools éƒ½æœ‰äº†éžå¸¸æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼Œ åŒæ—¶å¸¦æ¥çš„è¿˜æœ‰ Google ç§»åŠ¨ç«¯å¹¿å‘Š SDK Flutter ç‰ˆæœ¬çš„ç¨³å®šç‰ˆå‘å¸ƒã€ ä¸€ç³»åˆ—é’ˆå¯¹ Firebase çš„æ–°åŠŸèƒ½å’Œä¼˜åŒ–ã€Flutter WebView 3.0ã€ æ–°çš„ Flutter Favorite packageã€å‘æ¡Œé¢ç«¯ Stable è¿ˆå‡ºçš„ä¸€å¤§æ­¥ï¼Œ ä»¥åŠæ”¯æŒæ›´å¤š package çš„æ–°ç‰ˆæœ¬ DartPadã€‚ è™½ç„¶è¿™æ˜¯ä»Šå¹´æœ€åŽä¸€ä¸ªç¨³å®šç‰ˆæœ¬ï¼Œä½†å®ƒå¹¶ä¸æ˜¯æœ€ä¸é‡è¦çš„ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ï¼ æ€§èƒ½Flutter çš„é¦–è¦ç›®æ ‡æ˜¯ä¸€å¦‚æ—¢å¾€åœ°ä¿è¯å…¶è´¨é‡ã€‚ æˆ‘ä»¬èŠ±è´¹äº†å¤§é‡æ—¶é—´ä»¥ç¡®ä¿ Flutter åœ¨å¤šç§å¤šæ ·çš„è®¾å¤‡ä¸Šéƒ½èƒ½æµç•…ä¸”ç¨³å®šåœ°è¿è¡Œã€‚ åº”ç”¨å¯åŠ¨æœ¬æ¬¡æ›´æ–°ä¼˜åŒ–äº†åº”ç”¨å¯åŠ¨çš„å»¶è¿Ÿã€‚ æˆ‘ä»¬åœ¨æ‹¥æœ‰ä¸€ç™¾ä¸‡è¡Œä»¥ä¸Šçš„ä»£ç é‡çš„ GPay åº”ç”¨ä¸Šè¿›è¡Œäº†æµ‹è¯•ï¼Œä»¥ç¡®ä¿æ”¹åŠ¨åœ¨å®žé™…ç”Ÿäº§çš„åº”ç”¨ä¸Šæœ‰æ•ˆã€‚ è¿™äº›æ”¹åŠ¨å°† GPay åœ¨ä½Žç«¯ Android è®¾å¤‡ä¸Šå¯åŠ¨çš„æ—¶é—´å‡å°‘äº†çº¦ 50%ï¼Œé«˜ç«¯è®¾å¤‡ä¸Šå‡å°‘äº†çº¦ 10%ã€‚ æˆ‘ä»¬å¯¹ Flutter è°ƒç”¨ Dart VM çš„ GC ç­–ç•¥ä¹Ÿåšäº†ä¸€äº›æ”¹è¿›ï¼Œä»¥æ­¤é¿å…åœ¨ç¨‹åºå¯åŠ¨æœŸé—´å‡ºçŽ°ä¸åˆæ—¶å®œçš„ GCã€‚ ä¾‹å¦‚ï¼Œåœ¨ Android è®¾å¤‡ä¸Šæ¸²æŸ“å‡ºç¬¬ä¸€å¸§å‰ï¼ŒFlutter ä»…åœ¨ TRIM_LEVEL_RUNNING_CRITYCAL åŠé«˜äºŽå…¶ç­‰çº§çš„ä¿¡å·å‡ºçŽ°æ—¶ï¼Œé€šçŸ¥ Dart VM æœ‰å†…å­˜åŽ‹åŠ› ã€‚ åœ¨æœ¬åœ°æµ‹è¯•ä¸­ï¼Œä½Žç«¯ Android è®¾å¤‡çš„åˆå§‹å¸§å‡ºçŽ°é—´éš”æ—¶é—´æœ€å¤šå‡å°‘äº†çº¦ 300msã€‚ åœ¨å…ˆå‰çš„ Flutter ç‰ˆæœ¬ä¸­ï¼Œ å‡ºäºŽè°¨æ…Žè€ƒè™‘ ï¼Œ åœ¨åˆ›å»º PlatformView æ—¶ä¼šé˜»å¡žå¹³å°çº¿ç¨‹ã€‚ åœ¨ç»è¿‡ä»”ç»†çš„æŽ¨ç†å’Œæµ‹è¯•åŽ ï¼Œ æˆ‘ä»¬åˆ é™¤äº†éƒ¨åˆ†åºåˆ—åŒ–çš„æ­¥éª¤ï¼Œä½¿å¾— GPay åœ¨ä½Žç«¯è®¾å¤‡ä¸Šçš„å¯åŠ¨æ—¶é—´è‡³å°‘å‡å°‘äº† 100msã€‚ é•¿ä¹…ä»¥æ¥ï¼Œåœ¨åˆå§‹åŒ–é¦–ä¸ª Dart isolate å‰åˆå§‹åŒ–é»˜è®¤çš„å­—ä½“ç®¡ç†å™¨ä¼šå¼•å…¥äººä¸ºçš„å»¶è¿Ÿã€‚ ç”±äºŽå®ƒæ˜¯é¦–è¦çš„å»¶è¿Ÿç“¶é¢ˆï¼Œæ‰€ä»¥ å°†é»˜è®¤å­—ä½“ç®¡ç†å™¨çš„åˆå§‹åŒ–å»¶è¿Ÿ åˆ°ä¸Žé¦–ä¸ª Dart isolate åŒæ—¶è¿è¡Œï¼Œé™ä½Žäº†å¯åŠ¨çš„å»¶è¿Ÿï¼Œå¹¶è®©ä¸Šè¿°çš„æ‰€æœ‰å¯åŠ¨ä¼˜åŒ–çš„è¡¨çŽ°æ›´åŠ æ˜Žæ˜¾ã€‚ åº”ç”¨å†…å­˜ç”±äºŽ Flutter ä¼šå°½å¯èƒ½å¿«åœ°åŠ è½½ Dart VM çš„æœåŠ¡ isolateï¼Œ å¹¶å°†å…¶å’Œç»‘å®šåœ¨åº”ç”¨å†…çš„ AOT ä»£ç ä¸€å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œ è¿™ä¼šå¯¼è‡´ Flutter å¼€å‘äººå‘˜åœ¨éƒ¨åˆ†å†…å­˜ æœ‰é™åˆ¶çš„è®¾å¤‡ä¸Šéš¾ä»¥è¿½è¸ªå†…å­˜æŒ‡æ ‡ ã€‚ åœ¨ Flutter 2.8 ç‰ˆæœ¬ä¸­ï¼ŒAndroid è®¾å¤‡ä¸Š Dart VM çš„æœåŠ¡ isolate å·²è¢«æ‹†åˆ†è‡³å•ç‹¬çš„ bundle ä¸­ ï¼Œ å¯ä»¥å•ç‹¬åŠ è½½ï¼Œå‡å°‘äº†åœ¨å…¶åŠ è½½å‰çº¦ 40MB çš„å†…å­˜ä½¿ç”¨ã€‚ åŽŸæœ¬ Dart VM å‘æ“ä½œç³»ç»Ÿå‘é€ AOT ç¨‹åºçš„å†…å­˜ç”¨é‡çš„é€šçŸ¥ï¼Œ å·²è½¬ç”±ä¸€ä¸ªæ— éœ€å¤šæ¬¡è¯»å–çš„æ–‡ä»¶æ”¯æŒï¼ŒåŽç»­çš„å†…å­˜å ç”¨é‡è¿›ä¸€æ­¥å‡å°‘äº†çº¦ 10%ã€‚ å› æ­¤ï¼Œå…ˆå‰ä¿å­˜äº†æ–‡ä»¶æ•°æ®æ‹·è´çš„å†…å­˜å¯ä»¥å›žæ”¶å¹¶ç”¨äºŽå…¶ä»–ç”¨é€”ã€‚ æ€§èƒ½åˆ†æžæŸäº›åœºæ™¯ä¸‹ï¼Œå¼€å‘è€…å¸Œæœ›èƒ½åŒæ—¶çœ‹åˆ° Flutter å’Œ Android çš„æ€§èƒ½è¿½è¸ªäº‹ä»¶ï¼Œ åˆæˆ–è€…æ˜¯åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹æŸ¥çœ‹è¿½è¸ªäº‹ä»¶æ¥æ›´å¥½åœ°äº†è§£åº”ç”¨çš„æ€§èƒ½é—®é¢˜ã€‚ ä¸ºäº†è¿™ä¸€éœ€æ±‚ï¼ŒFlutter 2.8 çŽ°åœ¨å¯ä»¥é€‰æ‹©åœ¨åº”ç”¨å¯åŠ¨åŽï¼Œ å°†æ€§èƒ½è¿½è¸ªäº‹ä»¶å‘é€è‡³ Android çš„äº‹ä»¶è®°å½•å™¨ï¼Œåœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ä¹ŸåŒæ ·å¦‚æ­¤ã€‚ æ­¤å¤–ï¼Œä¸€äº›å¼€å‘äººå‘˜æƒ³è¦æ›´å¤šçš„å…³äºŽå…‰æ …ç¼“å­˜è¡Œä¸ºçš„æ€§èƒ½è·Ÿè¸ªä¿¡æ¯ï¼Œ ä»¥å‡å°‘åˆ¶ä½œåŠ¨ç”»æ•ˆæžœæ—¶çš„å¡é¡¿ï¼Œè¿™å…è®¸ Flutter å¿«é€Ÿåœ°å¯¹æ˜‚è´µçš„ã€é‡å¤ä½¿ç”¨çš„å›¾ç‰‡è¿›è¡Œå¤ç”¨è€Œä¸æ˜¯é‡æ–°ç»˜åˆ¶ã€‚ æ€§èƒ½è·Ÿè¸ªä¸­çš„æ–°çš„ æµäº‹ä»¶è®©å¼€å‘äººå‘˜å¯ä»¥è·Ÿè¸ªå…‰æ …ç¼“å­˜å›¾ç‰‡çš„ç”Ÿå‘½å‘¨æœŸã€‚ Flutter DevToolså¯¹äºŽè°ƒè¯•æ€§èƒ½é—®é¢˜ï¼Œæ–°ç‰ˆçš„ DevTools æ·»åŠ äº†ä¸€ä¸ªæ–°çš„ã€Œå¢žå¼ºè·Ÿè¸ªã€åŠŸèƒ½ï¼Œ ç”¨æ¥å¸®åŠ©å¼€å‘è€…è¯Šæ–­æ¶ˆè€—è¾ƒå¤§çš„æž„å»ºã€å¸ƒå±€å’Œç»˜åˆ¶æ“ä½œå¼•èµ·çš„ UI å¡é¡¿ã€‚ å¯ç”¨ä»»ä½•ä¸€ä¸ªè¿½è¸ªåŠŸèƒ½åŽï¼Œæ—¶é—´è½´ä¸­å°†è§†æƒ…å†µå±•ç¤º Widget çš„æž„å»ºã€RenderObject å¸ƒå±€å’Œ RenderObject ç»˜åˆ¶çš„äº‹ä»¶ã€‚ æ­¤å¤–ï¼Œæ–°ç‰ˆçš„ DevTools å¢žåŠ äº†åº”ç”¨ç¨‹åºå¯åŠ¨æ€§èƒ½çš„åˆ†æžæ”¯æŒã€‚ è¯¥é…ç½®æ–‡ä»¶åŒ…å«ä»Ž Dart VM åˆå§‹åŒ–åˆ°ç¬¬ä¸€ä¸ª Flutter å¸§æ¸²æŸ“çš„ CPU æ ·æœ¬ã€‚ åœ¨ä½ æŒ‰ä¸‹ã€ŒProfile app start upã€æŒ‰é’®å¹¶åŠ è½½åº”ç”¨ç¨‹åºå¯åŠ¨é…ç½®æ–‡ä»¶åŽï¼Œ ä½ å°†çœ‹åˆ°ä¸ºé…ç½®æ–‡ä»¶é€‰æ‹©äº†ã€ŒAppStartUpã€ç”¨æˆ·æ ‡ç­¾ã€‚ ä½ è¿˜å¯ä»¥é€šè¿‡åœ¨å¯ç”¨ç”¨æˆ·æ ‡ç­¾åˆ—è¡¨ä¸­é€‰æ‹©æ­¤ç”¨æˆ·æ ‡ç­¾è¿‡æ»¤å™¨ï¼ˆå¦‚æžœå­˜åœ¨ï¼‰æ¥åŠ è½½åº”ç”¨ç¨‹åºå¯åŠ¨é…ç½®æ–‡ä»¶ã€‚ é€‰æ‹©æ­¤æ ‡ç­¾ä¼šæ˜¾ç¤ºä½ çš„åº”ç”¨ç¨‹åºå¯åŠ¨çš„ä¸ªäººèµ„æ–™æ•°æ®ã€‚ Web å¹³å°çš„å¹³å°è§†å›¾ (PlatformView)ä¸ä»…ä»…æ˜¯ Android å’Œ iOS å¹³å°èŽ·å¾—äº†æ€§èƒ½æå‡ï¼Œæœ¬æ¬¡å‘å¸ƒåŒæ—¶åŒ…å«äº†å¯¹ Flutter Web å¹³å°è§†å›¾çš„æ€§èƒ½ä¼˜åŒ–ã€‚ å¹³å°è§†å›¾æ˜¯ä»Žå®¿ä¸»å¹³å°å‘ Flutter åµŒå…¥ UI ç»„ä»¶çš„åª’ä»‹ã€‚ Flutter Web ä½¿ç”¨ HtmlElementView widget å®žçŽ°äº†è¿™ä¸€åŠŸèƒ½ï¼Œè®©ä½ èƒ½åœ¨ Flutter Web åº”ç”¨ä¸­åµŒå…¥ HTML å…ƒç´ ã€‚ å¦‚æžœä½ æ­£åœ¨ä½¿ç”¨ google_maps_flutter æ’ä»¶æˆ– video_player æ’ä»¶çš„ç½‘ç»œç‰ˆæœ¬ï¼Œ æˆ–è€…ä½ æ­£åœ¨éµå¾ª Flutter å›¢é˜Ÿå…³äºŽ å¦‚ä½•ä¼˜åŒ–ç½‘ç»œä¸Šæ˜¾ç¤ºå›¾åƒ çš„å»ºè®®ï¼Œé‚£ä¹ˆä½ æ­£åœ¨ä½¿ç”¨å¹³å°è§†å›¾ã€‚ åœ¨ä¹‹å‰ç‰ˆæœ¬çš„ Flutter ä¸­ï¼ŒåµŒå…¥å¹³å°è§†å›¾ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ canvasï¼Œæ¯åµŒå…¥ä¸€ä¸ªå¹³å°è§†å›¾éƒ½ä¼šæ–°å¢žä¸€ä¸ª canvasã€‚ åˆ›å»ºé¢å¤–çš„ canvas æ˜¯ååˆ†æ¶ˆè€—æ€§èƒ½çš„æ“ä½œï¼Œå› ä¸ºæ¯ä¸ª canvas çš„å¤§å°éƒ½ä¸Žæ•´ä¸ªçª—å£ç›¸ç­‰ã€‚ åœ¨ Flutter 2.8 ä¸­ï¼Œå°† å¤ç”¨ä¸ºå…ˆå‰çš„å¹³å°è§†å›¾åˆ›å»ºçš„ canvas ï¼Œ å› æ­¤ï¼Œä½ ä¸ä¼šåœ¨åº”ç”¨ç¨‹åºçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…äº§ç”Ÿæ¯ç§’ 60 å€çš„æˆæœ¬ï¼Œè€Œæ˜¯åªæœ‰ä¸€æ¬¡åˆ›å»ºçš„æˆæœ¬ã€‚ è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ Web åº”ç”¨ç¨‹åºä¸­æ‹¥æœ‰å¤šä¸ª HtmlElementView å®žä¾‹è€Œä¸ä¼šé™ä½Žæ€§èƒ½ï¼Œ åŒæ—¶è¿˜å¯ä»¥å‡å°‘ä½¿ç”¨å¹³å°è§†å›¾æ—¶çš„æ»šåŠ¨å¡é¡¿ã€‚ ç”Ÿæ€Flutter ä¸ä»…ä»…æ˜¯æ¡†æž¶ã€å¼•æ“Žå’Œå·¥å…·â€”â€”pub.dev ä¸ŠçŽ°æœ‰è¶…è¿‡ 2w ä¸ªä¸Ž Flutter å…¼å®¹çš„åŒ…å’Œæ’ä»¶ï¼Œè€Œä¸”æ¯å¤©éƒ½åœ¨å¢žåŠ ã€‚ Flutter å¼€å‘äººå‘˜å¤§é‡çš„æ—¥å¸¸æ“ä½œä¹Ÿæ˜¯åºžå¤§çš„ç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œ æ‰€ä»¥è®©æˆ‘ä»¬æ¥çœ‹çœ‹è‡ªä¸Šä¸€ä¸ªç‰ˆæœ¬ä»¥æ¥ Flutter ç”Ÿæ€ç³»ç»Ÿä¸­æœ‰ä»€ä¹ˆæ”¹å˜ã€‚ é€‚ç”¨äºŽ Flutter å¹¿å‘Šçš„ Google å¹¿å‘Šé¦–å…ˆä¹Ÿæ˜¯æœ€é‡è¦çš„æ˜¯ï¼Œ Google Mobile SDK for Flutter å·²äºŽ 11 æœˆæ­£å¼å‘å¸ƒ ã€‚ æ­¤ç‰ˆæœ¬æ”¯æŒ 5 ç§å¹¿å‘Šæ ¼å¼ï¼Œé›†æˆäº† AdMob å’Œ Ad Manager æ”¯æŒï¼Œ å¹¶åŒ…å«ä¸€ä¸ªæ–°çš„ä¸­è½¬åŠŸèƒ½çš„æµ‹è¯•ç‰ˆï¼Œå¯ä»¥å¸®åŠ©ä½ ä¼˜åŒ–å¹¿å‘Šå±•çŽ°çš„æ•ˆæžœã€‚ æœ‰å…³å°† Google Ads é›†æˆåˆ° Flutter åº”ç”¨ç¨‹åºä»¥åŠå…¶ä»–è´§å¸åŒ–é€‰é¡¹çš„æ›´å¤šä¿¡æ¯ï¼Œ è¯·æŸ¥çœ‹ flutter.dev ä¸Šçš„é¡µé¢ ã€‚ WebView 3.0è¿™æ¬¡ Flutter é™„å¸¦çš„å¦ä¸€ä¸ªæ–°ç‰ˆæœ¬æ˜¯ webview_flutter æ’ä»¶ çš„ 3.0 ç‰ˆæœ¬ã€‚ å› ä¸ºæ–°åŠŸèƒ½çš„æ•°é‡å¢žåŠ ï¼Œæˆ‘ä»¬æå‡äº†ä¸»è¦ç‰ˆæœ¬å·ï¼Œä½†ä¹Ÿå› ä¸º Web è§†å›¾åœ¨ Android ä¸Šçš„å·¥ä½œæ–¹å¼å¯èƒ½å‘ç”Ÿäº†é‡å¤§å˜åŒ–ã€‚ åœ¨ä¹‹å‰çš„ webview_flutter ç‰ˆæœ¬ä¸­ï¼ŒHybrid composition å·²ç»å¯ç”¨ï¼Œä½†ä¸æ˜¯é»˜è®¤çš„ã€‚ è€ŒçŽ°åœ¨å®ƒä¿®å¤äº†å…ˆå‰é»˜è®¤ä»¥è™šæ‹Ÿæ˜¾ç¤ºæ¨¡å¼è¿è¡Œçš„è®¸å¤šé—®é¢˜ã€‚ æ ¹æ®ç”¨æˆ·åé¦ˆå’Œæˆ‘ä»¬çš„é—®é¢˜è·Ÿè¸ªï¼Œæˆ‘ä»¬è®¤ä¸ºæ˜¯æ—¶å€™è®© Hybrid composition æˆä¸ºé»˜è®¤è®¾ç½®äº†ã€‚ æ­¤å¤–ï¼Œwebview_flutter è¿˜å¢žåŠ äº†ä¸€äº›å‘¼å£°æžé«˜çš„åŠŸèƒ½ï¼š æ”¯æŒä½¿ç”¨ POST å’Œ GET æ¥åŠ è½½å†…å®¹ åŠ è½½æ–‡ä»¶æˆ–å­—ç¬¦ä¸²å†…å®¹ä¸º HTML æ”¯æŒé€æ˜ŽèƒŒæ™¯ åœ¨åŠ è½½å†…å®¹å‰è®¾ç½® Cookies æ­¤å¤–ï¼Œåœ¨ 3.0 ç‰ˆæœ¬ä¸­ï¼Œwebview_flutter ä¸ºæ–°å¹³å°æä¾›äº†åˆæ­¥æ”¯æŒï¼šFlutter Webã€‚ å·²ç»æœ‰å¾ˆå¤šäººè¦æ±‚èƒ½å¤Ÿåœ¨ Flutter Web åº”ç”¨ç¨‹åºä¸­æ‰˜ç®¡ Web è§†å›¾ï¼Œ è¿™å…è®¸å¼€å‘è€…åˆ©ç”¨å•ä¸ªæºä»£ç åº“æž„å»ºç§»åŠ¨æˆ– Web åº”ç”¨ç¨‹åºã€‚ åœ¨ Flutter Web åº”ç”¨ç¨‹åºä¸­æ‰˜ç®¡ Web è§†å›¾æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ ä»Žç¼–å†™ä»£ç çš„è§’åº¦æ¥çœ‹ï¼Œå…¶å®žæ˜¯ä¸€æ ·çš„ï¼š 12345678910111213141516171819202122232425262728293031import 'package:flutter/foundation.dart';import 'package:flutter/material.dart';import 'package:webview_flutter/webview_flutter.dart';import 'package:webview_flutter_web/webview_flutter_web.dart';void main() &#123; runApp(const MaterialApp(home: HomePage()));&#125;class HomePage extends StatefulWidget &#123; const HomePage(&#123;Key? key&#125;) : super(key: key); @override State&lt;HomePage&gt; createState() =&gt; _HomePageState();&#125;class _HomePageState extends State&lt;HomePage&gt; &#123; @override void initState() &#123; super.initState(); // required while web support is in preview if (kIsWeb) WebView.platform = WebWebViewPlatform(); &#125; @override Widget build(BuildContext context) =&gt; Scaffold( appBar: AppBar(title: const Text('Flutter WebView example')), body: const WebView(initialUrl: 'https://flutter.dev'), ;&#125; åœ¨ Flutter Web ä¸Šè¿è¡Œæ—¶ï¼Œå®ƒä¼šæŒ‰ä½ çš„é¢„æœŸå·¥ä½œï¼š è¯·æ³¨æ„ï¼Œå½“å‰ webview_flutter çš„ web å®žçŽ°æœ‰è®¸å¤šé™åˆ¶ï¼Œå› ä¸ºå®ƒæ˜¯ä½¿ç”¨ iframe æž„å»ºçš„ï¼Œ iframe ä»…æ”¯æŒç®€å•çš„ URL åŠ è½½ï¼Œæ— æ³•æŽ§åˆ¶åŠ è½½çš„å†…å®¹æˆ–ä¸ŽåŠ è½½çš„å†…å®¹äº¤äº’ã€‚ ä½†æ˜¯ï¼Œç”±äºŽéœ€æ±‚å‘¼å£°å¤ªé«˜ï¼Œæˆ‘ä»¬å†³å®šå°† webview_flutter_web ä½œä¸ºæœªç»è®¤å¯çš„æ’ä»¶æä¾›ã€‚ å¦‚æžœä½ æƒ³å°è¯•ä¸€ä¸‹ï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°ä½ çš„ pubspec.yaml ä¸­ï¼š 123dependencies: webview_flutter: ^3.0.0 webview_flutter_web: ^0.1.0 # æ˜¾å¼ä¾èµ–æœªç»è®¤å¯çš„æ’ä»¶ å¦‚æžœä½ å¯¹ webview_flutter v3.0 æœ‰ä»»ä½•åé¦ˆï¼Œæ— è®ºæ˜¯å¦æ˜¯å…³äºŽ Web å¹³å°ï¼Œ è¯·å°†é—®é¢˜è®°å½•åœ¨ Flutter ä»“åº“ä¸­ ã€‚ æ­¤å¤–ï¼Œå¦‚æžœä½ ä¹‹å‰æ²¡æœ‰ä½¿ç”¨è¿‡ webview æˆ–è€…ä½ æƒ³å¤ä¹ ä¸€ä¸‹ï¼Œ è¯·æŸ¥çœ‹æ–°çš„ webview codelab ï¼Œ å®ƒå°†å¸¦ä½ é€æ­¥å®Œæˆåœ¨ Flutter åº”ç”¨ç¨‹åºä¸­æ‰˜ç®¡ web å†…å®¹çš„è¿‡ç¨‹ã€‚ Flutter FavoritesFlutter ç”Ÿæ€ç³»ç»Ÿå§”å‘˜ä¼šå†æ¬¡å¬å¼€ä¼šè®®ï¼Œå°†ä»¥ä¸‹ package æŒ‡å®šä¸º Flutter Favorite çš„ packageï¼š æ–°è·¯ç”± APIï¼ˆåˆå Navigator 2ï¼‰çš„ä¸‰ä¸ªè‡ªå®šä¹‰è·¯ç”± packageï¼š beamer ã€ routemaster å’Œ go_router ï¼› drift ï¼Œ å¯¹ Flutter å’Œ Dart å·²ç»åŠŸèƒ½å¼ºå¤§ä¸”æµè¡Œçš„å“åº”å¼æŒä¹…æ€§åº“çš„é‡å‘½åï¼ŒåŸºäºŽ sqlite æž„å»ºï¼› freezed ï¼Œ ä¸€ä¸ª Dartã€Œè¯­è¨€è¡¥ä¸ã€ï¼Œä¸ºå®šä¹‰æ¨¡åž‹ã€å…‹éš†å¯¹è±¡ã€æ¨¡å¼åŒ¹é…ç­‰æä¾›ç®€å•çš„è¯­æ³•ï¼› dart_code_metrics ï¼› ä»¥åŠæœ‰ç€æ¼‚äº®ç•Œé¢çš„ packageï¼š flex_color_scheme ã€ flutter_svg ã€ feedback ã€ toggle_switch å’Œ auto_size_text ã€‚ ç¥è´ºè¿™äº› package çš„ä½œè€…ï¼Œå¹¶æ„Ÿè°¢ä½ é€šè¿‡ä½ çš„è¾›å‹¤å·¥ä½œæ”¯æŒ Flutter ç¤¾åŒºã€‚ å¦‚æžœä½ æœ‰å…´è¶£æåä½ æœ€å–œæ¬¢çš„ Flutter åŒ…åŠ å…¥ Flutter Favorite å˜‰å¥–ï¼Œ è¯·æŒ‰ç…§ Flutter Favorite è®¡åˆ’é¡µé¢ ä¸Šçš„æŒ‡å—å’Œè¯´æ˜Žè¿›è¡Œæ“ä½œã€‚ ç‰¹å®šå¹³å°çš„æ’ä»¶ (plugin package)å¦‚æžœä½ æ˜¯æ’ä»¶ä½œè€…ï¼Œä½ å¿…é¡»å†³å®šä½ å°†æ”¯æŒå“ªäº›å¹³å°ã€‚ å¦‚æžœä½ æ­£åœ¨ä½¿ç”¨ç‰¹å®šäºŽå¹³å°çš„åŽŸç”Ÿä»£ç æž„å»ºæ’ä»¶ï¼Œ ä½ å¯ä»¥ ä½¿ç”¨é¡¹ç›® pubspec.yaml ä¸­çš„ pluginClass å±žæ€§ æ¥å®žçŽ°ï¼Œè¯¥å±žæ€§å°†æŒ‡å®šæä¾›åŽŸç”ŸåŠŸèƒ½çš„åŽŸç”Ÿç±»åï¼š 12345678flutter: plugin: platforms: android: package: com.example.hello pluginClass: HelloPlugin ios: pluginClass: HelloPlugin ç„¶è€Œï¼Œéšç€ Dart FFI å˜å¾—æ›´åŠ æˆç†Ÿï¼Œæœ‰å¯èƒ½ä½¿ç”¨ 100% çš„ Dart å®žçŽ°ç‰¹å®šå¹³å°çš„åŠŸèƒ½ï¼Œ å°±åƒ path_provider_windows package æ‰€åšçš„é‚£æ ·ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æ²¡æœ‰ä»»ä½•æœ¬åœ°ç±»å¯ä»¥ä½¿ç”¨ï¼Œ ä½†ä½ ä»ç„¶å¸Œæœ›å°†ä½ çš„åŒ…æŒ‡å®šä¸ºä»…æ”¯æŒæŸäº›å¹³å°ã€‚ æ­¤æ—¶ä½ å¯ä»¥æ”¹ç”¨ dartPluginClass å±žæ€§ï¼š 123456flutter: plugin: implements: hello platforms: windows: dartPluginClass: HelloPluginWindows ç»è¿‡è¿™æ ·çš„è®¾ç½®åŽï¼Œå³ä½¿ä½ æ²¡æœ‰ä»»ä½•æœ¬æœºä»£ç ï¼Œä¹Ÿå¯ä»¥ä¸ºç‰¹å®šå¹³å°å®šåˆ¶æ’ä»¶ã€‚ ä½ è¿˜å¿…é¡»æä¾› Dart æ’ä»¶çš„ç±»ï¼Œ æœ‰å…³è¯¦ç»†å†…å®¹ï¼Œä½ å¯ä»¥åœ¨ flutter.dev ä¸Šçš„ä»… Dart å¹³å°å®žçŽ°æ–‡æ¡£ ä¸­è¿›è¡Œæ‰©å±•é˜…è¯»ã€‚ æ¡Œé¢å¹³å°Flutter 2.8 ç‰ˆæœ¬åœ¨ Windowsã€macOS å’Œ Linux ç¨³å®šç‰ˆæœ¬çš„é“è·¯ä¸Šåˆè¿ˆå‡ºäº†ä¸€å¤§æ­¥ã€‚ æˆ‘ä»¬çš„ç›®æ ‡è´¨é‡æ ‡å‡†å¾ˆé«˜ï¼ŒåŒ…æ‹¬å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æ”¯æŒï¼Œ ä¾‹å¦‚ æ–°çš„ä¸­æ–‡è¾“å…¥æ³•æ”¯æŒ ã€ éŸ©è¯­è¾“å…¥æ³•æ”¯æŒ ä»¥åŠåˆšåˆšåˆå¹¶çš„ Kanjiï¼ˆæ—¥æ–‡ï¼‰è¾“å…¥æ³• æ”¯æŒã€‚ æˆ–è€…ï¼Œå°±åƒæˆ‘ä»¬åœ¨ç´§å¯†æž„å»º Windows è¾…åŠ©åŠŸèƒ½çš„æ”¯æŒ ä¸€æ ·ã€‚ å¯¹äºŽ Flutter æ¥è¯´ï¼Œåœ¨ Stable æ¸ é“çš„ desktop ä¸Šè¿è¡Œæ˜¯ä¸å¤Ÿçš„ï¼Œ å®ƒå¿…é¡»åœ¨ä¸–ç•Œå„åœ°çš„è¯­è¨€å’Œæ–‡åŒ–ä»¥åŠä¸åŒèƒ½åŠ›çš„è®¾å¤‡ä¸Šè¿è¡Œè‰¯å¥½ã€‚ æˆ‘ä»¬è¿˜æ²¡æœ‰è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„ç›®æ ‡ï¼Œä½†æœªæ¥å¯æœŸï¼ å…¶ä¸­ä¸€ä¸ªä¾‹å­æ˜¯æˆ‘ä»¬é‡æž„äº† Flutter å¤„ç†é”®ç›˜äº‹ä»¶ä»¥å…è®¸åŒæ­¥å“åº”çš„æž¶æž„ã€‚ è¿™ä½¿ widget èƒ½å¤Ÿå¤„ç†æŒ‰é”®å¹¶æ‹¦æˆªå®ƒåœ¨æ•´ä¸ª widget tree ä¸­çš„å…¶ä½™éƒ¨åˆ†ä¸­çš„ä¼ é€’ã€‚ æˆ‘ä»¬åœ¨ Flutter 2.5 ä¸­å®Œæˆäº†è¿™é¡¹å·¥ä½œçš„è½åœ°ï¼Œå¹¶åœ¨ Flutter 2.8 ä¸­ä¿®å¤äº†è®¸å¤šé—®é¢˜ã€‚ è¿™æ˜¯å¯¹æˆ‘ä»¬å¦‚ä½•å¤„ç†ç‰¹å®šäºŽè®¾å¤‡çš„é”®ç›˜è¾“å…¥çš„æ–¹å¼çš„é‡æ–°è®¾è®¡ï¼Œ å’Œé‡æž„ Flutter å¤„ç†æ–‡æœ¬ç¼–è¾‘æ–¹å¼çš„æŒç»­å·¥ä½œçš„è¡¥å……ï¼Œ æ‰€æœ‰è¿™äº›éƒ½æ˜¯ç”¨é”®ç›˜è¿™æ ·è¾“å…¥å¯†é›†åž‹çš„æ¡Œé¢åº”ç”¨ç¨‹åºæ‰€å¿…éœ€çš„ã€‚ æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åœ¨ç»§ç»­ å‘ Flutter æ‰©å±•è§†è§‰å¯†åº¦çš„å®šä¹‰ ï¼Œ æš´éœ²å¯¹è¯æ¡†å¯¹é½æ–¹å¼çš„è®¾ç½®ï¼Œä»¥ä¾¿å¼€å‘è€…å¯ä»¥å®žçŽ°æ›´åŠ å‹å¥½çš„æ¡Œé¢ UIã€‚ æœ€åŽï¼ŒFlutter å›¢é˜Ÿå¹¶ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ä¸ºäº† Flutter desktop ä»˜å‡ºå¿ƒè¡€çš„å›¢é˜Ÿã€‚ ä¸¾ä¸ªä¾‹å­ï¼ŒCanonical çš„æ¡Œé¢å›¢é˜Ÿæ­£åœ¨ä¸Ž Invertase åˆä½œï¼Œ åœ¨ Linux å’Œ Windows ä¸Šå¼€å‘æœ€æµè¡Œçš„ Flutter Firebase æ’ä»¶ã€‚ ä½ å¯ä»¥åœ¨ Invertase åšå®¢ä¸Š é˜…è¯»æœ‰å…³é¢„è§ˆç‰ˆçš„æ›´å¤šä¿¡æ¯ã€‚ DartPadå¦‚æžœæ²¡æœ‰å·¥å…·çš„æ”¹è¿›ï¼Œé‚£ä¹ˆè¿™ä¸ª Flutter æ–°ç‰ˆæœ¬çš„å‘å¸ƒæ˜¯ä¸å®Œæ•´çš„ã€‚ æˆ‘ä»¬å°†é‡ç‚¹ä»‹ç» DartPad çš„æ”¹è¿›ï¼Œå…¶ä¸­æœ€å¤§çš„æ”¹è¿›æ˜¯å¯¹æ›´å¤šè½¯ä»¶åŒ…çš„æ”¯æŒã€‚ äº‹å®žä¸Šï¼Œç›®å‰å…±æœ‰ 23 ä¸ª package å¯ä¾›å¯¼å…¥ä½¿ç”¨ã€‚é™¤äº†å‡ ä¸ª Firebase æœåŠ¡ä¹‹å¤–ï¼Œè¯¥åˆ—è¡¨è¿˜åŒ…æ‹¬è¯¸å¦‚ blocã€charactersã€collectionã€google_fonts å’Œ flutter_riverpod ç­‰æµè¡Œçš„ packageã€‚ DartPad å›¢é˜Ÿä¼šç»§ç»­æ·»åŠ æ–°çš„ packageï¼Œå¦‚æžœä½ æƒ³æŸ¥çœ‹å½“å‰æ”¯æŒå“ªäº›è½¯ä»¶åŒ…ï¼Œå¯ä»¥å•å‡»å³ä¸‹è§’çš„ä¿¡æ¯å›¾æ ‡ã€‚ å¦‚æžœä½ æƒ³äº†è§£éšç€æ—¶é—´çš„æŽ¨ç§»å‘ DartPad æ·»åŠ æ–°åŒ…çš„è®¡åˆ’ï¼Œ è¯·æŸ¥çœ‹ Dart wiki ä¸Šçš„è¿™ç¯‡æ–‡ç«  ã€‚ è¿˜æœ‰å¦ä¸€ä¸ªæ–°çš„ DartPad åŠŸèƒ½ä¹Ÿéžå¸¸æ–¹ä¾¿ã€‚ åœ¨æ­¤ä¹‹å‰ï¼ŒDartPad æ€»æ˜¯ä»¥è¿è¡Œæœ€æ–°çš„ stable ç‰ˆæœ¬è¿è¡Œã€‚ åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨çŠ¶æ€æ ä¸­æ–°çš„ æ¸ é“èœå• æ¥åˆ‡æ¢æœ€æ–°çš„ Beta æ¸ é“ç‰ˆæœ¬ä»¥åŠä¹‹å‰çš„ stable ç‰ˆæœ¬ï¼ˆç§°ä¸ºâ€œæ—§æ¸ é“â€ï¼‰ã€‚ å¦‚æžœä½ æ­£åœ¨æ’°å†™ä¸€ç¯‡åšå®¢æ–‡ç« ï¼Œè€Œæœ€æ–°çš„ç¨³å®šç‰ˆæœ¬è¿˜ä¸å¤Ÿæ–°ï¼Œè¿™å°†éžå¸¸æœ‰ç”¨ã€‚ ï¼ˆå…¶å®žæ–¹ä¾¿äº†åˆ‡æ¢ä¸åŒçš„æ¸ é“è¿›è¡Œè°ƒè¯•å’Œ BUG éªŒè¯ã€‚ï¼‰ ç§»é™¤ Dev æ¸ é“Flutterã€Œæ¸ é“ã€å†³å®šäº† Flutter æ¡†æž¶å’Œå¼•æ“Žåœ¨ä½ çš„å¼€å‘æœºå™¨ä¸Šå˜åŒ–çš„é€Ÿåº¦ï¼Œ stable ä»£è¡¨æœ€å°‘çš„å˜æ›´ï¼Œè€Œ master ä»£è¡¨æœ€å¤šã€‚ å—åˆ°å›¢é˜Ÿèµ„æºçš„é™åˆ¶ï¼Œæˆ‘ä»¬æœ€è¿‘å°†åœæ­¢æ›´æ–° dev æ¸ é“ã€‚ è™½ç„¶æˆ‘ä»¬ç¡®å®žæ”¶åˆ°äº†ä¸€äº›ç›¸å…³çš„é—®é¢˜ï¼Œä½†æˆ‘ä»¬å‘çŽ°åªæœ‰ä¸åˆ° 3% çš„ Flutter å¼€å‘äººå‘˜ä½¿ç”¨ dev æ¸ é“ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å†³å®šå¯åŠ¨æ­£å¼åœç”¨ dev æ¸ é“çš„è¿›ç¨‹ã€‚ è™½ç„¶å¾ˆå°‘æœ‰å¼€å‘äººå‘˜ä½¿ç”¨ dev æ¸ é“ï¼Œä½† Flutter å·¥ç¨‹å¸ˆéœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´å’Œç²¾åŠ›æ¥ç»´æŠ¤å®ƒã€‚ å¦‚æžœä½ å°†æ‰€æœ‰æ—¶é—´éƒ½èŠ±åœ¨ stable æ¸ é“ä¸Šï¼ˆæ­£å¦‚è¶…è¿‡ 90% çš„ Flutter å¼€å‘äººå‘˜æ‰€åšçš„é‚£æ ·ï¼‰ï¼Œ é‚£ä¹ˆè¿™é¡¹æ”¹åŠ¨å°†ä¸ä¼šå½±å“ä½ çš„æ—¥å¸¸å¼€å‘ã€‚ é€šè¿‡æ”¾å¼ƒå®ƒï¼Œä½ å¯ä»¥å°‘åšä¸€ä¸ªå†³å®šï¼Œè€Œ Flutter å›¢é˜Ÿå¯ä»¥å°†æ—¶é—´å’Œç²¾åŠ›èŠ±åœ¨å…¶ä»–äº‹æƒ…ä¸Šã€‚ ä½ å¯ä»¥ä½¿ç”¨ flutter channel å‘½ä»¤æ¥å†³å®šä½ æƒ³è¦å“ªä¸ªæ¸ é“ã€‚ ä»¥ä¸‹æ˜¯ Flutter å›¢é˜Ÿå¯¹æ¯ä¸ªæ¸ é“çš„çœ‹æ³•ï¼š Stable æ¸ é“ ä»£è¡¨æˆ‘ä»¬æ‹¥æœ‰çš„æœ€é«˜è´¨é‡çš„æž„å»ºã€‚å®ƒä»¬æ¯å­£åº¦ï¼ˆå¤§è‡´ï¼‰å‘å¸ƒä¸€æ¬¡ï¼Œå¹¶é’ˆå¯¹ä¸­é—´çš„å…³é”®é—®é¢˜è¿›è¡Œçƒ­ä¿®å¤ã€‚ è¿™æ˜¯ã€Œæ…¢ã€é€šé“ï¼šå®‰å…¨ã€æˆç†Ÿã€é•¿æœŸæœåŠ¡ã€‚ Beta æ¸ é“ ä¸ºé‚£äº›ä¹ æƒ¯äºŽæ›´å¿«èŠ‚å¥çš„å¼€å‘è€…æä¾›äº†ä¸€ç§å¿«é€Ÿè°ƒæ•´çš„æ›¿ä»£æ–¹æ¡ˆã€‚ ç›®å‰æ¯æœˆå‘å¸ƒï¼Œå‘å¸ƒå‰ç¨³å®šã€‚è¿™æ˜¯ã€Œå¿«é€Ÿã€é€šé“ã€‚å¦‚æžœ dev æ¸ é“æ­£åœ¨æ»¡è¶³ beta æ¸ é“æ— æ³•æ»¡è¶³çš„éœ€æ±‚ï¼Œ æˆ‘ä»¬å¯èƒ½ä¼šæ”¹å˜æˆ‘ä»¬å¯¹ beta æ¸ é“çš„çœ‹æ³•æ¥æ»¡è¶³è¿™äº›éœ€æ±‚ ï¼ˆä¾‹å¦‚ï¼ŒåŠ é€Ÿå‘å¸ƒ beta çš„èŠ‚å¥æˆ–é™ä½Žæˆ‘ä»¬å¯¹ beta æ‰§è¡Œçš„æµ‹è¯•å’Œçƒ­ä¿®å¤çº§åˆ«ï¼‰ã€‚ Master æ¸ é“ æ˜¯æˆ‘ä»¬æ´»è·ƒçš„å¼€å‘æ¸ é“ã€‚æˆ‘ä»¬ä¸æä¾›å¯¹è¯¥æ¸ é“çš„æ”¯æŒï¼Œä½†æˆ‘ä»¬é’ˆå¯¹å®ƒè¿è¡Œäº†ä¸€å¥—å…¨é¢çš„å•å…ƒæµ‹è¯•ã€‚ å¯¹äºŽå¯¹ä¸ç¨³å®šçš„æž„å»ºæ„Ÿåˆ°æ»¡æ„çš„è´¡çŒ®è€…æˆ–é«˜çº§å¼€å‘è€…è€Œè¨€ï¼Œè¿™æ˜¯é€‚åˆä»–ä»¬çš„æ¸ é“ã€‚ åœ¨è¿™ä¸ªé¢‘é“ä¸Šï¼Œæˆ‘ä»¬è·‘å¾—å¾ˆå¿«ï¼Œæ‰“ç ´äº†ä¸€äº›ä¸œè¥¿ï¼ˆç„¶åŽä¼šå¾ˆå¿«åœ°ä¿®å¤å®ƒä»¬ï¼‰ã€‚ å½“æˆ‘ä»¬åœ¨æœªæ¥å‡ ä¸ªæœˆåœç”¨ dev æ¸ é“æ—¶ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ beta æˆ– master æ¸ é“ï¼Œ è¿™å–å†³äºŽä½ å¯¹å˜æ›´çš„å®¹å¿åº¦ä»¥åŠä½ å¯¹æœ€æ–°å’Œæœ€å¥½çš„ SDK çš„å¹³è¡¡ç‚¹ã€‚ ç ´åæ€§æ›´æ”¹ä¸Žå¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬åŠªåŠ›å‡å°‘æ¯ä¸ªç‰ˆæœ¬ä¸­ç ´åæ€§æ›´æ”¹çš„æ•°é‡ã€‚ åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼ŒFlutter 2.8 é™¤äº†å·²è¿‡æœŸå¹¶æ ¹æ®æˆ‘ä»¬çš„ é‡å¤§å˜æ›´æ”¿ç­– è¢«åˆ é™¤çš„å·²å¼ƒç”¨ API ä¹‹å¤–ï¼Œæ²¡æœ‰é‡å¤§å˜æ›´ã€‚ 90292 Remove autovalidate deprecations 90293 Remove FloatingHeaderSnapConfiguration.vsync deprecation 90294 Remove AndroidViewController.id deprecation 90295 Remove BottomNavigationBarItem.title deprecation 90296 Remove deprecated text input formatting classes å¦‚æžœä½ ä»åœ¨ä½¿ç”¨è¿™äº› API å¹¶æƒ³äº†è§£å¦‚ä½•è¿ç§»ä»£ç ï¼Œä½ å¯ä»¥é˜…è¯» flutter.dev ä¸Šçš„è¿ç§»æŒ‡å— ã€‚ ä¸Žå¾€å¸¸ä¸€æ ·ï¼Œéžå¸¸æ„Ÿè°¢ç¤¾åŒº è´¡çŒ®äº†æµ‹è¯•ç”¨ä¾‹ ï¼Œ å¸®åŠ©æˆ‘ä»¬è¯†åˆ«è¿™äº›é‡å¤§æ›´æ”¹ã€‚ æ€»ç»“åœ¨æˆ‘ä»¬ç»“æŸ 2021 å¹´å¹¶å±•æœ› 2022 å¹´ä¹‹é™…ï¼ŒFlutter å›¢é˜Ÿè¦å¯¹æ•´ä¸ª Flutter ç¤¾åŒºçš„å·¥ä½œå’Œæ”¯æŒè¡¨ç¤ºæ„Ÿè°¢ã€‚ è¯šç„¶ï¼Œæˆ‘ä»¬æ­£åœ¨ä¸ºä¸–ç•Œä¸Šè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜æž„å»º Flutterï¼Œ ä½†å¦‚æžœæ²¡æœ‰ä½ å’Œæ¯ä½å¼€å‘è€…çš„å­˜åœ¨ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•ç»´æŠ¤å¹¶æž„å»ºå®ƒã€‚ Flutter ç¤¾åŒºä¸Žä¼—ä¸åŒï¼Œæˆ‘ä»¬æ„Ÿè°¢ä½ æ‰€åšçš„ä¸€åˆ‡ã€‚ ç¥ä½ å‡æœŸæ„‰å¿«ï¼Œæˆ‘ä»¬æ–°çš„ä¸€å¹´è§ï¼]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Jetpack Compose å…¥é—¨å­¦ä¹ ]]></title>
    <url>%2Fposts%2F7b2baf2a.html</url>
    <content type="text"><![CDATA[ç®€ä»‹ Jetpack Composeï¼šåˆ©ç”¨å£°æ˜Žå¼ç¼–ç¨‹æž„å»ºAndroidåŽŸç”Ÿç•Œé¢ï¼ˆUIï¼‰çš„ å·¥å…·åŒ… ä¼˜åŠ¿ æ›´å°‘çš„ä»£ç ã€ä»£ç é‡é”å‡ å¼ºå¤§çš„å·¥å…·/ç»„ä»¶æ”¯æŒ ç›´è§‚çš„ Kotlin API ç®€å•æ˜“ç”¨ ç¼–ç¨‹æ€æƒ³ å£°æ˜Žæ€§ç¼–ç¨‹èŒƒå¼ï¼šå£°æ˜Žæ€§çš„å‡½æ•°æž„å»ºä¸€ä¸ªç®€å•çš„ç•Œé¢ç»„ä»¶ï¼Œæ— éœ€ä¿®æ”¹ä»»ä½• XML å¸ƒå±€ï¼Œä¹Ÿä¸éœ€è¦ä½¿ç”¨å¸ƒå±€ç¼–è¾‘å™¨ï¼Œåªéœ€è¦è°ƒç”¨ Jetpack Compose å‡½æ•°æ¥å£°æ˜Žæƒ³è¦çš„å…ƒç´ ï¼ŒCompose ç¼–è¯‘å™¨å³ä¼šå®ŒæˆåŽé¢çš„æ‰€æœ‰å·¥ä½œã€‚ ç®€å•çš„ç»„åˆå‡½æ•° 1234@Composablefun Greeting(name: String) &#123; Text(text = "Hello $name!")&#125; å£°æ˜Žæ€§èŒƒå¼è½¬å˜ï¼šåœ¨ Compose çš„å£°æ˜Žæ€§æ–¹æ³•ä¸­ï¼Œå¾®ä»¶ç›¸å¯¹æ— çŠ¶æ€ï¼Œå¹¶ä¸”ä¸æä¾› setter æˆ– getter å‡½æ•°ã€‚å®žé™…ä¸Šï¼Œå¾®ä»¶ä¸ä¼šä»¥å¯¹è±¡å½¢å¼æä¾›ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨å¸¦æœ‰ä¸åŒå‚æ•°çš„åŒä¸€å¯ç»„åˆå‡½æ•°æ¥æ›´æ–°ç•Œé¢ã€‚è¿™ä½¿å¾—å‘æž¶æž„æ¨¡å¼ï¼ˆå¦‚ ViewModelï¼‰æä¾›çŠ¶æ€å˜å¾—å¾ˆå®¹æ˜“ï¼Œå¦‚åº”ç”¨æž¶æž„æŒ‡å—ä¸­æ‰€è¿°ã€‚ç„¶åŽï¼Œå¯ç»„åˆé¡¹è´Ÿè´£åœ¨æ¯æ¬¡å¯è§‚å¯Ÿæ•°æ®æ›´æ–°æ—¶å°†å½“å‰åº”ç”¨çŠ¶æ€è½¬æ¢ä¸ºç•Œé¢ã€‚ åŠ¨æ€ ï¼šç»„åˆå‡½æ•°æ˜¯ç”¨ Kotlin è€Œä¸æ˜¯ XML ç¼–å†™ é‡ç»„ï¼šåœ¨ Compose ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ–°æ•°æ®å†æ¬¡è°ƒç”¨å¯ç»„åˆå‡½æ•°ã€‚è¿™æ ·åšä¼šå¯¼è‡´å‡½æ•°è¿›è¡Œé‡ç»„ â€“ ç³»ç»Ÿä¼šæ ¹æ®éœ€è¦ä½¿ç”¨æ–°æ•°æ®é‡æ–°ç»˜åˆ¶å‡½æ•°å‘å‡ºçš„å¾®ä»¶ã€‚Compose æ¡†æž¶å¯ä»¥æ™ºèƒ½åœ°ä»…é‡ç»„å·²æ›´æ”¹çš„ç»„ä»¶ã€‚ å¯ç»„åˆå‡½æ•°å¯ä»¥æŒ‰ä»»ä½•é¡ºåºæ‰§è¡Œ å¯ç»„åˆå‡½æ•°å¯ä»¥å¹¶è¡Œè¿è¡Œ é‡ç»„ä¼šè·³è¿‡å°½å¯èƒ½å¤šçš„å†…å®¹ é‡ç»„æ˜¯ä¹è§‚çš„æ“ä½œ å¯ç»„åˆå‡½æ•°å¯èƒ½ä¼šéžå¸¸é¢‘ç¹åœ°è¿è¡Œ å¼€å‘çŽ¯å¢ƒ Arctic Fox 2020-3-1 ç‰ˆæœ¬ä»¥ä¸Šï¼Œä¸‹è½½æœ€æ–°AndroidStudio ComposeAppä»…æ”¯æŒKotlin æœ€ä½Žsdk ç‰ˆæœ¬ä¸º21ï¼ŒAndroid 5.0 Gradle Composeç›¸å…³ä¾èµ– 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162plugins &#123; id 'com.android.application' id 'kotlin-android'&#125;android &#123; compileSdk 31 defaultConfig &#123; applicationId "com.zm.myjetpackcompose" minSdk 21 targetSdk 31 versionCode 1 versionName "1.0" testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner" vectorDrawables &#123; useSupportLibrary true &#125; &#125; buildTypes &#123; release &#123; minifyEnabled false proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro' &#125; &#125; compileOptions &#123; sourceCompatibility JavaVersion.VERSION_1_8 targetCompatibility JavaVersion.VERSION_1_8 &#125; kotlinOptions &#123; jvmTarget = '1.8' useIR = true &#125; buildFeatures &#123; compose true &#125; composeOptions &#123; kotlinCompilerExtensionVersion compose_version kotlinCompilerVersion '1.5.21' &#125; packagingOptions &#123; resources &#123; excludes += '/META-INF/&#123;AL2.0,LGPL2.1&#125;' &#125; &#125;&#125;dependencies &#123; implementation 'androidx.core:core-ktx:1.3.2' implementation 'androidx.appcompat:appcompat:1.2.0' implementation 'com.google.android.material:material:1.3.0' implementation "androidx.compose.ui:ui:$compose_version" implementation "androidx.compose.material:material:$compose_version" implementation "androidx.compose.ui:ui-tooling-preview:$compose_version" implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.3.1' implementation 'androidx.activity:activity-compose:1.3.0-alpha06' testImplementation 'junit:junit:4.+' androidTestImplementation 'androidx.test.ext:junit:1.1.2' androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0' androidTestImplementation "androidx.compose.ui:ui-test-junit4:$compose_version" debugImplementation "androidx.compose.ui:ui-tooling:$compose_version"&#125; éœ€è¦å®‰è£…æœ€æ–°Java11ï¼Œ java 8 çŽ¯å¢ƒä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ 12345Android Gradle plugin requires Java 11 to run. You are currently using Java 1.8. You can try some of the following options: - changing the IDE settings. - changing the JAVA_HOME environment variable. - changing `org.gradle.java.home` in `gradle.properties`. @Previewç”Ÿæ•ˆï¼Œåˆ™çŽ¯å¢ƒæ­£å¸¸ UIå¸ƒå±€@Composeæ‰€æœ‰å…³äºŽæž„å»ºViewçš„æ–¹æ³•éƒ½å¿…é¡»æ·»åŠ @Composeæ³¨è§£æ‰å¯ä»¥ã€‚å¹¶ä¸”@Composeåç¨‹çš„Suspendçš„ä½¿ç”¨æ–¹æ³•æ¯”è¾ƒç±»ä¼¼,è¢«@Composeæ³¨è§£çš„æ–¹æ³•åªèƒ½åœ¨åŒæ ·è¢«@Comopseè§£çš„æ–¹æ³•ä¸­æ‰èƒ½è¢«è°ƒç”¨ã€‚ 1234@Composablefun Greeting(name: String) &#123; Text(text = "Hello $name!")&#125; @Preview@Previewæ³¨è§£çš„æ–¹æ³•å¯ä»¥åœ¨ä¸è¿è¡ŒAppçš„æƒ…å†µä¸‹å°±å¯ä»¥ç¡®è®¤å¸ƒå±€çš„æƒ…å†µã€‚å¸¸ç”¨çš„å‚æ•°: name: String: ä¸ºè¯¥Previewå‘½åï¼Œè¯¥åå­—ä¼šåœ¨å¸ƒå±€é¢„è§ˆä¸­æ˜¾ç¤ºã€‚ showBackground: Boolean: æ˜¯å¦æ˜¾ç¤ºèƒŒæ™¯ï¼Œtrueä¸ºæ˜¾ç¤ºã€‚ backgroundColor: Long: è®¾ç½®èƒŒæ™¯çš„é¢œè‰²ã€‚ showDecoration: Boolean: æ˜¯å¦æ˜¾ç¤ºStatusbarå’ŒToolbarï¼Œtrueä¸ºæ˜¾ç¤ºã€‚ group: String: ä¸ºè¯¥Previewè®¾ç½®groupåå­—ï¼Œå¯ä»¥åœ¨UIä¸­ä»¥groupä¸ºå•ä½æ˜¾ç¤ºã€‚ fontScale: Float: å¯ä»¥åœ¨é¢„è§ˆä¸­å¯¹å­—ä½“æ”¾å¤§ï¼ŒèŒƒå›´æ˜¯ä»Ž0.01ã€‚ widthDp: Int: åœ¨Composeä¸­æ¸²æŸ“çš„æœ€å¤§å®½åº¦ï¼Œå•ä½ä¸ºdpã€‚ heightDp: Int: åœ¨Composeä¸­æ¸²æŸ“çš„æœ€å¤§é«˜åº¦ï¼Œå•ä½ä¸ºdpã€‚ä¸Šé¢çš„å‚æ•°éƒ½æ˜¯å¯é€‰å‚æ•°ï¼Œè¿˜æœ‰åƒèƒŒæ™¯è®¾ç½®ç­‰çš„å‚æ•°å¹¶ä¸æ˜¯å¯¹å®žé™…çš„Appè¿›è¡Œè®¾ç½®ï¼Œåªæ˜¯å¯¹Previewä¸­çš„èƒŒæ™¯è¿›è¡Œè®¾ç½®ï¼Œä¸ºäº†æ›´å®¹æ˜“çœ‹æ¸…å¸ƒå±€ã€‚1234567@Preview(showBackground = true,name = "Text UI",backgroundColor = 0xFF888888)@Composableprivate fun DefaultPreview() &#123; MyJetpackComposeTheme &#123; Greeting("Android") &#125;&#125; setContentsetContentçš„ä½œç”¨æ˜¯å’ŒLayout/Viewä¸­çš„setContentViewæ˜¯ä¸€æ ·çš„ã€‚setContentçš„æ–¹æ³•ä¹Ÿæ˜¯æœ‰@Composeæ³¨è§£çš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œåœ¨setContentä¸­å†™å…¥å…³äºŽUIçš„@Compopseæ–¹æ³•ï¼Œå³å¯åœ¨Activityä¸­æ˜¾ç¤ºã€‚ 1234567891011override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContent &#123; MyJetpackComposeTheme &#123; // A surface container using the 'background' color from the theme Surface(color = MaterialTheme.colors.background) &#123; Greeting("Android") &#125; &#125; &#125; &#125; Themeåœ¨åˆ›å»ºæ–°çš„Composeé¡¹ç›®æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªTheme.ktæ–‡ä»¶ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ›´æ”¹é¢œè‰²æ¥å®Œæˆå¯¹ä¸»é¢˜é¢œè‰²çš„è®¾ç½®ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243package com.zm.myjetpackcompose.ui.themeimport androidx.compose.foundation.isSystemInDarkThemeimport androidx.compose.material.MaterialThemeimport androidx.compose.material.darkColorsimport androidx.compose.material.lightColorsimport androidx.compose.runtime.Composableprivate val DarkColorPalette = darkColors( primary = Purple200, primaryVariant = Purple700, secondary = Teal200)private val LightColorPalette = lightColors( primary = Purple500, primaryVariant = Purple700, secondary = Teal200 /* Other default colors to override background = Color.White, surface = Color.White, onPrimary = Color.White, onSecondary = Color.Black, onBackground = Color.Black, onSurface = Color.Black, */)@Composablefun MyJetpackComposeTheme(darkTheme: Boolean = isSystemInDarkTheme(), content: @Composable() () -&gt; Unit) &#123; val colors = if (darkTheme) &#123; DarkColorPalette &#125; else &#123; LightColorPalette &#125; MaterialTheme( colors = colors, typography = Typography, shapes = Shapes, content = content )&#125; ModifierModifieræ˜¯å„ä¸ªComposeçš„UIç»„ä»¶ä¸€å®šä¼šç”¨åˆ°çš„ä¸€ä¸ªç±»ã€‚å®ƒæ˜¯è¢«ç”¨äºŽè®¾ç½®UIçš„æ‘†æ”¾ä½ç½®ï¼Œpaddingç­‰ä¿¡æ¯çš„ç±»ã€‚ padding è®¾ç½®å„ä¸ªUIçš„padding1234Modifier.padding(10.dp) // ç»™ä¸Šä¸‹å·¦å³è®¾ç½®æˆåŒä¸€ä¸ªå€¼Modifier.padding(10.dp, 11.dp, 12.dp, 13.dp) // åˆ†åˆ«ä¸ºä¸Šä¸‹å·¦å³è®¾å€¼Modifier.padding(10.dp, 11.dp) // åˆ†åˆ«ä¸ºä¸Šä¸‹å’Œå·¦å³è®¾å€¼Modifier.padding(InnerPadding(10.dp, 11.dp, 12.dp, 13.dp))// åˆ†åˆ«ä¸ºä¸Šä¸‹å·¦å³è®¾å€¼ plus å¯ä»¥æŠŠå…¶ä»–çš„ModifieråŠ å…¥åˆ°å½“å‰çš„Modifierä¸­ã€‚1Modifier.plus(otherModifier) // æŠŠotherModifierçš„ä¿¡æ¯åŠ å…¥åˆ°çŽ°æœ‰çš„modifierä¸­ fillMaxHeightã€fillMaxWidthã€fillMaxSize ç±»ä¼¼äºŽmatch_parentã€å¡«å……æ•´ä¸ªçˆ¶layoutã€‚1Modifier.fillMaxHeight() // å¡«å……æ•´ä¸ªé«˜åº¦ widthã€heighã€size è®¾ç½®Contentçš„å®½åº¦å’Œé«˜åº¦ã€‚123Modifier.width(2.dp) // è®¾ç½®å®½åº¦Modifier.height(3.dp) // è®¾ç½®é«˜åº¦Modifier.size(4.dp, 5.dp) // è®¾ç½®é«˜åº¦å’Œå®½åº¦ å¤åˆ¶ä»£ç  widthIn, heightIn, sizeIn è®¾ç½®Contentçš„å®½åº¦å’Œé«˜åº¦çš„æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚123Modifier.widthIn(2.dp) // è®¾ç½®æœ€å¤§å®½åº¦Modifier.heightIn(3.dp) // è®¾ç½®æœ€å¤§é«˜åº¦Modifier.sizeIn(4.dp, 5.dp, 6.dp, 7.dp) // è®¾ç½®æœ€å¤§æœ€å°çš„å®½åº¦å’Œé«˜åº¦ gravity åœ¨Columnä¸­å…ƒç´ çš„ä½ç½®ã€‚123Modifier.gravity(Alignment.CenterHorizontally) // æ¨ªå‘å±…ä¸­Modifier.gravity(Alignment.Start) // æ¨ªå‘å±…å·¦Modifier.gravity(Alignment.End) // æ¨ªå‘å±…å³ rtlã€ltr å¼€å§‹å¸ƒå±€UIçš„æ–¹å‘ã€‚123456789Modifier.rtl // ä»Žå³åˆ°å·¦Modifier.ltr // ä»Žå·¦åˆ°å³Modifierçš„æ–¹æ³•éƒ½è¿”å›žModifierçš„å®žä¾‹çš„é“¾å¼è°ƒç”¨ï¼Œæ‰€ä»¥åªè¦è¿žç»­è°ƒç”¨æƒ³è¦ä½¿ç”¨çš„æ–¹æ³•å³å¯ã€‚@Composablefun Greeting(name: String) &#123; Text(text = "Hello $name!", modifier = Modifier.padding(20.dp).fillMaxSize())&#125; Columnï¼ŒRow Column çº¿æ€§å¸ƒå±€ â‰ˆ Android LinearLayout-VERTICALRow æ°´å¹³å¸ƒå±€ â‰ˆ Android LinearLayout-HORIZONTAL Columnå’ŒRowå¯ä»¥ç†è§£ä¸ºåœ¨View/Layoutä½“ç³»ä¸­çš„çºµå‘å’Œæ¨ªå‘çš„ViewGroupã€‚ Modifier ç”¨ä¸Šè¿°çš„æ–¹æ³•ä¼ å…¥å·²ç»æŒ‰éœ€æ±‚è®¾ç½®å¥½çš„Modifierå³å¯ã€‚ Arrangement.Horizontal, Arrangement.Vertical éœ€è¦ç»™Rowä¼ å…¥Arrangement.Horizontalï¼Œä¸ºColumnä¼ å…¥Arrangement.Verticalã€‚ è¿™äº›å€¼å†³å®šå¦‚ä½•å¸ƒç½®å†…éƒ¨UIç»„ä»¶ã€‚å¯ä¼ å…¥çš„å€¼ä¸ºCenter, Start, End, SpaceEvenly, SpaceBetween, SpaceAroundã€‚ Alignment.Vertical, Alignment.Horizontal éœ€è¦ç»™Rowä¼ å…¥Alignment.Verticalï¼Œä¸ºColumnä¼ å…¥Alignment.Horizontalã€‚ ä½¿ç”¨æ–¹æ³•å’ŒModifierçš„gravityä¸­ä¼ å…¥å‚æ•°çš„ç”¨æ³•æ˜¯ä¸€æ ·çš„. @Composable ColumnScope.() -&gt; Unit éœ€è¦ä¼ å…¥æ ‡æœ‰@Composeçš„UIæ–¹æ³•ã€‚ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä¼šæœ‰lamdaå‡½æ•°çš„å†™æ³•æ¥å®žçŽ°ã€‚12345Column &#123; Row(modifier = Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.SpaceAround, verticalAlignment = Alignment.CenterVertically) &#123; Text(text = "Hello $name!") &#125; &#125; Boxå¸§å¸ƒå±€â‰ˆAndroid FrameLayoutï¼Œå¯å°†ä¸€ä¸ªå…ƒç´ æ”¾åœ¨å¦ä¸€ä¸ªå…ƒç´ ä¸Šï¼Œå¦‚éœ€åœ¨ Row ä¸­è®¾ç½®å­é¡¹çš„ä½ç½®ï¼Œè¯·è®¾ç½® horizontalArrangement å’Œ verticalAlignment å‚æ•°ã€‚å¯¹äºŽ Columnï¼Œè¯·è®¾ç½® verticalArrangement å’Œ horizontalAlignment å‚æ•° ConstraintLayoutéœ€è¦å¼•å…¥implementation &quot;androidx.constraintlayout:constraintlayout-compose:1.0.0-beta02&quot; åˆ—è¡¨ å¯ä»¥æ»šåŠ¨çš„å¸ƒå±€ 12345678//æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ verticalScroll() ä¿®é¥°ç¬¦ä½¿ Column å¯æ»šåŠ¨ï¼Œä½†ä»¥ä¸Šå¸ƒå±€å¹¶æ— æ³•å®žçŽ°é‡ç”¨ï¼Œå¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜ Column( modifier = Modifier.verticalScroll(rememberScrollState()) ) &#123; messages.forEach &#123; message -&gt; MessageRow(message) &#125; &#125; LazyColumn/LazyRow == RecylerView/listView åˆ—è¡¨å¸ƒå±€ï¼Œè§£å†³äº†æ»šåŠ¨æ—¶çš„æ€§èƒ½é—®é¢˜ï¼ŒLazyColumnå’ŒLazyRowä¹‹é—´çš„åŒºåˆ«å°±åœ¨äºŽå®ƒä»¬çš„åˆ—è¡¨é¡¹å¸ƒå±€å’Œæ»šåŠ¨æ–¹å‘ä¸åŒã€‚ å†…è¾¹è· 12345LazyColumn( contentPadding = PaddingValues(horizontal = 16.dp, vertical = 8.dp), ) &#123; // ... &#125; itemé—´è· 12345LazyColumn( verticalArrangement = Arrangement.spacedBy(4.dp), ) &#123; // ... &#125; æµ®åŠ¨åˆ—è¡¨çš„æµ®åŠ¨æ ‡é¢˜ï¼Œä½¿ç”¨ LazyColumn å®žçŽ°ç²˜æ€§æ ‡é¢˜ï¼Œå¯ä»¥ä½¿ç”¨stickyHeader()å‡½æ•° 123456789101112@Composable fun ListWithHeader(items: List&lt;Item&gt;) &#123; LazyColumn &#123; stickyHeader &#123; Header() &#125; items(items) &#123; item -&gt; ItemRow(item) &#125; &#125; &#125; ç½‘æ ¼å¸ƒå±€LazyVerticalGrid 12345678910@Composablefun PhotoGrid(photos: List&lt;Photo&gt;) &#123; LazyVerticalGrid( cells = GridCells.Adaptive(minSize = 128.dp) ) &#123; items(photos) &#123; photo -&gt; PhotoItem(photo) &#125; &#125;&#125; è‡ªå®šä¹‰å¸ƒå±€é€šè¿‡é‡ç»„åŸºç¡€å¸ƒå±€å®žçŽ°Canvasç»˜åˆ¶123456789101112Canvas(modifier = Modifier.fillMaxSize()) &#123; val canvasWidth = size.width val canvasHeight = size.height //drawCircle ç”»åœ† //drawRectangle ç”»çŸ©å½¢ //drawLine //ç”»çº¿ drawCircle( color = Color.DarkGray, center = Offset(x = canvasWidth / 2, y = canvasHeight / 2), radius = size.minDimension / 4 ) &#125; ç»“æŸè¯­ Composeæ•´ä½“æ¥çœ‹ï¼Œå¸ƒå±€å®žçŽ°ä¸Šç›¸å¯¹äºŽxmlæ›´åŠ ç®€å•é«˜æ•ˆï¼Œä¹Ÿæ˜¯å®˜æ–¹æ—¥åŽåŠ›æŽ¨çš„å¼€å‘æ–¹å¼ã€‚ Composeå†™æ³•ä¸ŽFlutterä»£ç ä¸Šæœ‰å¾ˆé«˜çš„ç›¸ä¼¼ä¹‹å¤„ï¼Œéƒ½æ˜¯é€šè¿‡å“åº”å¼çš„å¿«é€Ÿæ­å»ºUIå¸ƒå±€ã€‚ï¼ˆPSï¼šå“åº”å¼çš„UIå¼€å‘æ¨¡å¼åœ¨å¤§å‰ç«¯çš„å„ä¸ªè¯­è¨€ä¸­è¶Šæ¥è¶Šç›¸ä¼¼äº†ï¼‰ å‚è€ƒæ–‡çŒ®https://developer.android.com/jetpack/compose]]></content>
      <categories>
        <category>Android</category>
        <category>Jetpack</category>
      </categories>
      <tags>
        <tag>Kotlin</tag>
        <tag>Jetpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Alfredè¿›é˜¶æ•™ç¨‹ï¼Œè‡ªå®šä¹‰Workflows]]></title>
    <url>%2Fposts%2Ffa126efb.html</url>
    <content type="text"><![CDATA[åœ¨ä¸Šä¸€ç¯‡ã€ŠMacè£…æœºå¿…å¤‡-Alfredçš„åŸºç¡€ä½¿ç”¨æ•™ç¨‹ã€‹ä¸­ï¼Œå·²ä¸ºå¤§å®¶ä»‹ç»äº†Alfredçš„åŸºç¡€åŠŸèƒ½ã€‚å…¶å®žé™¤äº†Alfredå·²æœ‰çš„åŠŸèƒ½å¤–ï¼ŒAlfredè¿˜æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å·¥ä½œæµã€‚ é€šè¿‡è®¾ç½®å¥½è§¦å‘å™¨ã€è¾“å…¥ã€æ“ä½œã€å®žç”¨ç¨‹åºã€è¾“å‡ºï¼Œå°±å¯ä»¥è‡ªç”±æ­å»ºå·¥ä½œæµã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„çƒ­é”®å·¥ä½œæµï¼Œç”¨æ¥ä¸€é”®å¯åŠ¨æˆ‘æ¯å¤©å¤šæ¬¡ä½¿ç”¨çš„ä¸€äº›åº”ç”¨ç¨‹åºå’Œç½‘é¡µã€‚ è¿›å…¥Alfredçš„åå¥½è®¾ç½®ä¸­çš„workflows*æ ‡ç­¾é¡µï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„â€œ+â€ï¼Œç„¶åŽé€‰æ‹©Templates &gt; Files and Apps &gt; Launch file group from hotkey*ï¼Œåˆ›å»ºä¸€ä¸ªç”¨çƒ­é”®æ‰“å¼€çš„å·¥ä½œæµã€‚ ç„¶åŽä¸ºä½ çš„å·¥ä½œæµç¼–è¾‘åç§°ã€å›¾æ ‡ç­‰ä¿¡æ¯ï¼Œä¾¿äºŽè¯†åˆ«ã€‚ï¼ˆå›¾æ ‡å¯ä»¥ç›´æŽ¥æ‹–å…¥ï¼‰ ç¼–è¾‘å®ŒæˆåŽï¼Œç‚¹å‡»å³ä¸‹è§’çš„Saveå³å¯åˆ›å»ºå‡ºä¸€ä¸ªåä¸ºworkçš„å·¥ä½œæµã€‚å·¦è¾¹å›¾æ ‡æ˜¯çƒ­é”®ï¼Œå³è¾¹å›¾æ ‡æ˜¯ä½ è¦åˆ›å»ºçš„åŠ¨ä½œã€‚ åŒå‡»å·¦è¾¹å›¾æ ‡ï¼Œæ‰“å¼€çƒ­é”®è®¾ç½®çª—å£ï¼Œé€‰ä¸­è¾“å…¥æ¡†ï¼Œç›´æŽ¥åœ¨é”®ç›˜ä¸Šé”®å…¥ä½ æƒ³è¦è®¾ç½®çš„çƒ­é”®ï¼Œç„¶åŽä¿å­˜ã€‚ åŒå‡»å³ä¾§å›¾æ ‡ï¼Œæ‰“å¼€åŠ¨ä½œè®¾ç½®çª—å£ï¼Œä½ å¯ä»¥é€‰æ‹©ä¸€æ¬¡å¯åŠ¨å¤šä¸ªMacè½¯ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚æˆ‘æƒ³è¦ä¸€æ¬¡æ‰“å¼€AndroidStudioã€Safariã€Sourcetreeä¸‰ä¸ªåº”ç”¨ç¨‹åºï¼Œç›´æŽ¥å°†å®ƒä»¬æ‹–å…¥æ­¤çª—å£å³å¯ã€‚ Alfredé™¤äº†èƒ½è®¾ç½®æ‰“å¼€å¤šä¸ªMacè½¯ä»¶å¤–ï¼Œè¿˜å¯ä»¥è®¾ç½®æ‰“å¼€å¤šä¸ªç½‘é¡µã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³åŒæ—¶æ‰“å¼€é©¬å¯è èç½‘ç«™ï¼Œå¯ä»¥åœ¨çª—å£ä»»æ„ä½ç½®å³é”®ï¼Œé€‰æ‹©Actions &gt; Open URLã€‚ åœ¨å¼¹çª—ä¸­å°†é©¬å¯è èçš„ç½‘å€ https://zhangmiao.cc/ å¤åˆ¶ç²˜è´´è¿›åŽ»ï¼Œå¹¶é€‰å¥½é»˜è®¤æµè§ˆå™¨ï¼Œä¿å­˜å³å¯ã€‚ æœ€åŽå†æŠŠè¿™ä¸ªæ–°çš„åŠ¨ä½œé“¾æŽ¥åˆ°çƒ­é”®çš„åŽé¢ï¼Œå³å®Œæˆæ‰“å¼€é©¬å¯è èç½‘ç«™çš„è®¾ç½®äº†ã€‚ äº†è§£Alfredçš„å·¥ä½œæµç¨‹ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ è½»æ¾å®Œæˆå„ç§é‡å¤ä»»åŠ¡ï¼Œè®©ä½ ä»¥å‰æ‰€æœªæœ‰çš„æ–¹å¼åœ¨Macä¸Šæé«˜æ•ˆçŽ‡ï¼]]></content>
      <categories>
        <category>Mac</category>
        <category>Alfred</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>Alfred</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macè£…æœºå¿…å¤‡Alfred]]></title>
    <url>%2Fposts%2Fd083e6c8.html</url>
    <content type="text"><![CDATA[å®‰è£…Alfred å¿«æ·é”®è®¾ç½®ä¸ºäº†å¿«é€Ÿæ‰“å¼€Alfredï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå®ƒè®¾ç½®ä¸€ä¸ªå¿«æ·é”®ï¼Œæ‰“å¼€Alfredåå¥½è®¾ç½®çš„Generalé€‰é¡¹å¡ï¼Œé€‰ä¸­Alfred Hotkeyè¾“å…¥æ¡†ï¼Œç›´æŽ¥ä½¿ç”¨é”®ç›˜é”®å…¥ä½ å–œæ¬¢çš„å¿«æ·é”®å³å¯ã€‚ æˆ‘ä½¿ç”¨çš„alt+ç©ºæ ¼é”®ï¼Œå½“åˆè®¾ç½®æ—¶ï¼Œç”±äºŽè¿™ä¸ªå¿«æ·é”®è¢«Macç³»ç»Ÿçš„Spotlightå ç”¨äº†ï¼Œæ— æ³•è®¾ç½®æˆåŠŸã€‚å¦‚é‡åˆ°ç›¸åŒçš„æƒ…å†µï¼Œéœ€è¦å…ˆåˆ°ç³»ç»Ÿåå¥½è®¾ç½®-é”®ç›˜-å¿«æ·é”®-èšç„¦ä¸­å–æ¶ˆå‹¾é€‰alt+ç©ºæ ¼é”®æ‰“å¼€â€œèšç„¦â€æœç´¢çš„è®¾ç½®ï¼Œç„¶åŽå†è¿”å›žåˆ°Alfredä¸­è®¾ç½®å³å¯ã€‚ è‡ªå®šä¹‰å¤–è§‚è¿›å…¥Appearanceé€‰é¡¹å¡ï¼ŒAlfredä¸ºæˆ‘ä»¬æä¾›äº†å‡ ç§å¤–è§‚æ ·å¼ï¼Œå¦‚æžœä½ éƒ½ä¸å–œæ¬¢ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å¤–è§‚ã€‚ç‚¹å‡»å·¦ä¸‹è§’çš„â€œ+â€ï¼Œåˆ›å»ºä½ çš„ä¸“å±žæ ·å¼ã€‚é€šè¿‡åŒå‡»ç›¸åº”çš„ç»„ä»¶ï¼Œå³å¯æ‰“å¼€ç³»ç»Ÿçš„è°ƒè‰²å™¨ï¼Œå¯ä»¥è‡ªç”±çš„æ­é…è‡ªå·±å–œæ¬¢çš„é¢œè‰²ã€‚ è¿›å…¥Featuresé€‰é¡¹å¡ï¼Œåœ¨å·¦ä¾§åˆ—è¡¨ä¸­ï¼Œç½—åˆ—çš„æ˜¯Alfredçš„åŸºç¡€åŠŸèƒ½ï¼ŒåŒ…æ‹¬é»˜è®¤æœç´¢ã€æ–‡ä»¶æœç´¢ã€ç½‘é¡µæœç´¢ã€ç½‘é¡µä¹¦ç­¾ã€è®¡ç®—å™¨ã€å­—å…¸ã€è”ç³»äººã€å‰ªè´´æ¿ã€iTunesã€ç³»ç»Ÿæ“ä½œã€ç»ˆç«¯ç­‰ã€‚ é»˜è®¤æœç´¢ï¼ˆDefault Resultsï¼‰ Essentialså’ŒExtrasè®¾ç½®æˆ‘ä»¬çš„æœç´¢ç±»åž‹ï¼Œå¯ä»¥è®¾ç½®æœç´¢åº”ç”¨ç¨‹åºã€è”ç³»äººã€åå¥½è®¾ç½®ã€æ–‡ä»¶å¤¹ã€æ–‡æœ¬æ–‡ä»¶ã€åŽ‹ç¼©æ–‡ä»¶ã€æ–‡æ¡£ã€å›¾ç‰‡ã€è„šæœ¬ç­‰ã€‚ Unintelligentå»ºè®®ä¸è¦å‹¾é€‰ï¼Œä¼šå½±å“æˆ‘ä»¬çš„æœç´¢é€Ÿåº¦ä»¥åŠæœç´¢ç»“æžœã€‚ Search Scopeå¯ä»¥è®¾ç½®Alfredçš„æœç´¢èŒƒå›´ï¼Œç‚¹å‡»å³ä¸Šè§’çš„â€+â€ï¼Œå¯ä»¥æ·»åŠ å…¶ä»–çš„æœç´¢èŒƒå›´ï¼›æˆ–è€…é€‰ä¸­æŸé¡¹ï¼ŒæŒ‰Deleteé”®ç§»é™¤è¯¥æœç´¢èŒƒå›´ã€‚ æ–‡ä»¶æœç´¢ï¼ˆFile Searchï¼‰é»˜è®¤æœç´¢ä¼šæœç´¢å‡ºæ‰€æœ‰ç±»åž‹çš„å†…å®¹ï¼ŒåŒ…æ‹¬é‚®ä»¶ã€è”ç³»äººç­‰å…¶ä»–å†…å®¹ï¼Œéƒ½æ˜¯æˆ‘æ ¹æœ¬ä¸æƒ³æœç´¢åˆ°çš„æ–‡ä»¶ç±»åž‹ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨æ–‡ä»¶æœç´¢ï¼ŒæŠŠä¸€äº›ä¸éœ€è¦çš„ç±»åž‹è¿‡æ»¤æŽ‰ã€‚ ç©ºæ ¼é”® + å…³é”®å­—ï¼šæ–‡ä»¶æœç´¢ find + å…³é”®å­—ï¼šæ‰“å¼€æ–‡ä»¶æ‰€åœ¨çš„Finder in + å…³é”®å­—ï¼šæœç´¢æ–‡ä»¶å†…å®¹ä¸­å¸¦æœ‰è¯¥å…³é”®å­—çš„æ–‡ä»¶ ç½‘é¡µæœç´¢ï¼ˆWeb Searchï¼‰è¿™æ˜¯å°ç¼–ä½¿ç”¨é¢‘çŽ‡æœ€é«˜çš„åŠŸèƒ½ï¼Œæœ‰äº†å®ƒï¼Œå†ä¹Ÿä¸æ€•è®°ä¸ä½ç½‘å€äº†ã€‚Alfredä¸­å·²ç»é»˜è®¤è®¾ç½®äº†å¾ˆå¤šå›½å¤–çš„ç½‘ç«™ï¼Œä½†å¤§å¤šæ•°éƒ½æ˜¯ç”¨ä¸ä¸Šçš„ï¼Œä¸éœ€è¦çš„åªè¦å–æ¶ˆå‹¾é€‰å°±è¡Œã€‚ç‚¹å‡»å³ä¸‹è§’çš„â€œAdd Custom Searchâ€ï¼Œå³å¯æ·»åŠ æ–°çš„ç½‘ç«™æœç´¢ã€‚ æ¯”å¦‚æ·»åŠ é©¬å¯è èç½‘ç«™ï¼Œåªè¦åˆ°é©¬å¯è èçš„æœç´¢é¡µé¢éšä¾¿æœç´¢ä¸€ä¸ªå†…å®¹ï¼Œç„¶åŽå¤åˆ¶ç»“æžœé¡µé¢çš„ç½‘å€ï¼ŒæŠŠå…·ä½“çš„å†…å®¹æ”¹æˆ{query}å³å¯ï¼Œå…³é”®å­—å¡«å†™macblï¼Œç„¶åŽä¿å­˜ã€‚ é©¬å¯è èï¼šhttps://www.macbl.com/search/{query} ç™¾åº¦ï¼šhttps://www.baidu.com/s?ie=utf-8&amp;f=8&amp;wd={query} Dribbbleï¼šhttps://dribbble.com/search?q={query} ä½¿ç”¨æ—¶ï¼Œåœ¨Alfredä¸­è¾“å…¥ macbl Alfredï¼ŒæŒ‰å›žè½¦é”®å³å¯æ‰“å¼€é©¬å¯è èæœç´¢é¡µé¢ï¼Œæ‰¾åˆ°Alfredå•¦ï¼ å‰ªè´´æ¿ï¼ˆClipboardï¼‰å‰ªè´´æ¿åŠŸèƒ½æ˜¯æˆ‘é€‰æ‹©Alfredçš„ä¸»è¦åŽŸå› ï¼Œå¯ä»¥æŸ¥çœ‹Alfredçš„æ‰€æœ‰å‰ªè´´åŽ†å²è®°å½•ï¼ŒèŠ‚çœäº†é‡å¤æ“ä½œçš„æ—¶é—´ï¼Œéžå¸¸å¼ºå¤§ ç³»ç»Ÿæ“ä½œï¼ˆSystemï¼‰ç”¨ç®€å•çš„å‘½ä»¤ï¼Œæ¥æŽ§åˆ¶ç³»ç»Ÿæ“ä½œï¼Œæ¯”å¦‚æœ€å¸¸ç”¨çš„æ¸…ç©ºåžƒåœ¾æ¡¶(enptytrash)ï¼Œä¼‘çœ (sleep)ï¼Œå¼ºåˆ¶é€€å‡ºåº”ç”¨ç¨‹åº(forcequit)ç­‰ï¼Œå¿«æ·é”®éƒ½å¯ä»¥è‡ªç”±è®¾ç½®ã€‚]]></content>
      <categories>
        <category>Mac</category>
        <category>Alfred</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>Alfred</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå®Œæ•´å­¦ä¹ è·¯çº¿è§£è¯»]]></title>
    <url>%2Fposts%2F829f290.html</url>
    <content type="text"><![CDATA[å‰è¨€Flutter ä½œä¸ºä¸€é—¨æ–°çš„æŠ€æœ¯ï¼Œç¡®å®žç›¸å…³çš„èµ„æ–™ä¹¦ç±ä¸å¤ªå¤šã€‚ä½†å°± Flutter ç”Ÿæ€çš„å½±å“åŠ›è€Œè¨€ï¼Œå·²ç»æ˜¯è¶Šæ¥è¶Šå¼ºäº†ã€‚è­¬å¦‚ï¼Œåœ¨ StackOverflow ç½‘ç«™ä¸Š2021å¹´åº¦æœ€å—æ¬¢è¿Žçš„æŠ€æœ¯ä¸­ï¼ŒDart è¯­è¨€æŽ’åœ¨äº†ç¬¬7ä½ã€‚éšç€è°·æ­Œå¯¹ Flutter è·¨å¹³å°è§£å†³æ–¹æ¡ˆçš„æŽ¨è¿›ï¼Œä¼°è®¡ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…ä½¿ç”¨ Flutter æž„å»ºä»–ä»¬çš„åº”ç”¨ã€‚ å­¦ä¹ çº¿è·¯æ€ç»´å¯¼å›¾å…ˆä¸Šä¸€ä»½æ€ç»´å¯¼å›¾ï¼Œè®©å¤§å®¶æœ‰ä¸ªæ•´ä½“è®¤è¯†ã€‚ Dartè¯­è¨€åœ¨å­¦ä¹  Dart è¯­è¨€å‰ï¼Œè‹¥æ²¡æœ‰ä»»ä½•ç¼–ç¨‹åŸºç¡€ï¼Œå»ºè®®å…ˆäº†è§£ä¸€ä¸‹è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ã€‚Dart ä½œä¸ºä¸€é—¨çŽ°ä»£åŒ–çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œå…·å¤‡äº†å¸‚é¢ä¸Šå¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€çš„ç‰¹ç‚¹ï¼Œå…·ä½“æ¥è¯´ä¼šåˆ†ä¸ºä¸‹é¢è¿™äº›å†…å®¹ï¼š å˜é‡å®šä¹‰ã€èµ‹å€¼ï¼šè¿™æ˜¯æœ€åŸºç¡€çš„éƒ¨åˆ†ï¼Œè‡³å°‘è¦çŸ¥é“ä»€ä¹ˆæ˜¯å˜é‡ï¼Œå¦‚ä½•èµ‹å€¼ã€‚finalï¼Œvar å’Œ const çš„åŒºåˆ«ã€‚ åŸºæœ¬æ•°å­¦è¿ç®—ï¼šåŠ ã€å‡ã€ä¹˜ã€é™¤ã€æ•´é™¤ã€å–ä½™ç­‰è¿ç®—ï¼› æ¡ä»¶åˆ†æ”¯ï¼šifâ€¦else ifâ€¦else æŽ§åˆ¶ç¨‹åºé€»è¾‘èµ°å‘ï¼Œæˆ–æ˜¯ switch åˆ†æ”¯ï¼› å¾ªçŽ¯ï¼šä½¿ç”¨å¾ªçŽ¯å®Œæˆé‡å¤æ€§çš„å·¥ä½œï¼› å®¹å™¨ç±»ï¼šå¦‚Listã€Map å’Œ Set çš„åº”ç”¨ï¼› å‡½æ•°å’Œå‚æ•°ï¼šä¸€ä¸ªæ˜¯ä½¿ç”¨å‡½æ•°ç¼–å†™å¯å¤ç”¨çš„é€»è¾‘å¤„ç†ä»£ç ï¼ŒäºŒæ˜¯éœ€è¦æ³¨æ„åœ¨ Dart ä¸­å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ã€‚åŒæ—¶éœ€è¦åŒºåˆ†å‡½æ•°çš„å‘½åå‚æ•°ã€å¯é€‰å‚æ•°çš„ä½¿ç”¨ï¼› é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šäº†è§£é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ¦‚å¿µå’Œæ€æƒ³ï¼Œèƒ½å¤Ÿåˆç†åœ°ä½¿ç”¨ç±»æ¥å°è£…ä»£ç æé«˜å¤ç”¨æ€§å’Œé™ä½Žè€¦åˆï¼› ç»§æ‰¿ã€å¤šæ€å’ŒæŠ½è±¡ç±»ï¼šè¿™æ˜¯æé«˜ä»£ç å¤ç”¨ã€é™ä½Žä»£ç è€¦åˆåº¦ååˆ†é‡è¦çš„æ¦‚å¿µï¼Œå»ºè®®æ˜¯å¤šçœ‹çœ‹ä¸€äº›æºç å’Œè®¾è®¡æ€æƒ³ï¼ˆå¦‚è®¾è®¡æ¨¡å¼ï¼‰ï¼Œç„¶åŽåœ¨é‡åˆ°å¤æ‚ä¸šåŠ¡çš„æ—¶å€™å…ˆæ€è€ƒå¦‚ä½•æŠ½è±¡å’Œç»„ç»‡ä»£ç ç»“æž„ã€‚ mixinï¼šmixin æä¾›äº†ä¸€ç§æ›´ä¸ºçµæ´»çš„ä»£ç å¤ç”¨æ–¹å¼ï¼Œå¯ä»¥å°†åŠŸèƒ½ç»„åˆåˆ°çŽ°æœ‰ç±»ä¸­ï¼Œä»Žè€Œé¿å…äº†ç»§æ‰¿çš„ä¸€äº›ç¼ºç‚¹ã€‚ æ³›åž‹ï¼šä½¿ç”¨æ³›åž‹æ¥åšå·¥å…·ç±»æ˜¯å†å¥½ä¸è¿‡çš„é€‰æ‹©äº†ï¼Œé€šè¿‡æ³›åž‹å¯ä»¥ä¸€å¥—ä»£ç å¤„ç†å¤šç§æ•°æ®ç±»åž‹ã€‚ Futureï¼šæœ‰ç‚¹ç±»ä¼¼å‰ç«¯çš„ promiseï¼Œé€šè¿‡ Future å¯ä»¥è®©å¼‚æ­¥ç¼–ç¨‹å˜å¾—æ›´åŠ ç®€å•ã€‚ null safetyï¼šç©ºå®‰å…¨çŽ°åœ¨åŸºæœ¬ä¸Šæ˜¯é«˜çº§è¯­è¨€çš„æ ‡é…äº†ã€‚é€šè¿‡ç©ºå®‰å…¨å¯ä»¥è®©å›¢é˜Ÿéµå¾ªåŒä¸€ä¸ªè§„èŒƒï¼Œæé«˜äº†ä»£ç çš„å¥å£®æ€§ã€‚ Flutterç»„ä»¶ä½œä¸ºä¸€ä¸ªåˆæ ¼çš„App å¼€å‘ï¼Œèƒ½å¤Ÿå°†ä¸€ä¸ªUI ç•Œé¢è¿˜åŽŸå‡ºæ¥æ˜¯åŸºæœ¬çš„è¦æ±‚ã€‚å»ºè®®ä¸€å¼€å§‹éœ€è¦ç†Ÿæ‚‰Flutteræ¡†æž¶æä¾›çš„è‡ªå¸¦ç»„ä»¶ï¼Œç„¶åŽå¯ä»¥é€šè¿‡è‡ªå¸¦çš„ç»„ä»¶ç»„åˆæˆä¸ºè‡ªå·±çš„è‡ªå®šä¹‰ç»„ä»¶ã€‚è¿™éƒ¨åˆ†å†…å®¹åŒ…æ‹¬ï¼š è¿è¡Œ Hello World ç¨‹åºï¼Œè·‘é€šæ•´ä¸ªåº”ç”¨ã€‚ äº†è§£åº”ç”¨ç¨‹åºçš„ç»“æž„ï¼ŒçŸ¥é“å¦‚ä½•è®¾è®¡ä½ çš„ä»£ç ç›®å½•ç»“æž„ã€‚ å¸ƒå±€ç±»ç»„ä»¶ï¼šå¦‚ Containerï¼ŒSizedBoxï¼ŒPaddingï¼ŒStackï¼ŒListViewï¼ŒGridView ç­‰ç»„ä»¶ã€‚ ä¸šåŠ¡ç±»ç»„ä»¶ï¼šå¦‚ TextFieldï¼ŒæŒ‰é’®ï¼Œæ–‡æœ¬ï¼Œå›¾ç‰‡ï¼Œå›¾æ ‡ç­‰ç»„ä»¶ã€‚ è‡ªå®šä¹‰ç»„ä»¶ï¼šåˆ©ç”¨å¸ƒå±€ç±»ç»„ä»¶å’Œä¸šåŠ¡ç±»ç»„ä»¶ç»„åˆï¼Œæž„æˆè‡ªå·±çš„å¯å¤ç”¨çš„ç»„ä»¶ã€‚ è‡ªæœ‰ç»„ä»¶åº“ï¼šæ ¹æ®äº§å“ç‰¹æ€§å’Œå…¬å¸éœ€è¦ï¼ŒæŠ½å–å¤ç”¨çš„ç»„ä»¶æž„æˆè‡ªæœ‰çš„ç»„ä»¶åº“ï¼Œä»Žè€Œæå‡æ•´ä¸ªå…¬å¸çš„å¼€å‘æ•ˆçŽ‡ã€‚ è¡¨å•åº”ç”¨ä¸­ï¼Œè¡¨å•åœ¨ç•Œé¢ä¸­å‡ºçŽ°çš„é¢‘çŽ‡å¾ˆé«˜ã€‚å¦‚ä½•å¤„ç†è¡¨å•å¯¹å¼€å‘æ•ˆçŽ‡çš„å½±å“å¾ˆå¤§ã€‚å»ºè®®å¯ä»¥ä¸€å¼€å§‹ä»Žç®€å•çš„è¡¨å•é¡µé¢å¼€å§‹ï¼Œä¾‹å¦‚ç™»å½•é¡µã€æ³¨å†Œé¡µã€‚ç„¶åŽå†åšä¸€äº›å¤æ‚çš„è¡¨å•é¡µé¢ï¼Œå…·ä½“å¦‚ä¸‹ï¼š ç®€å•è¡¨å•é¡µé¢çš„å®žçŽ°ï¼šç™»å½•é¡µã€æ³¨å†Œé¡µã€ç»‘å®šæ‰‹æœºå·è¿™ç±»çš„é¡µé¢ï¼› ä¸åŒè¡¨å•çš„å®žçŽ°ï¼šä¾‹å¦‚æ™®é€šæ–‡æœ¬ã€å¯†ç ã€æ•°å­—ã€æ—¥æœŸã€å•é€‰ã€å¤šé€‰ç­‰è¡¨å•çš„å®žçŽ°ï¼› è¡¨å•æ ¡éªŒï¼šå°è£…è¡¨å•æ ¡éªŒåº“ï¼Œå°†é€šç”¨çš„æ ¡éªŒè§„åˆ™æ”¾ç½®åœ¨æ ¡éªŒåº“ä¸­ï¼Œæ¯”å¦‚é•¿åº¦ã€æ‰‹æœºå·æ ¡éªŒã€å¯†ç å¼ºåº¦æ ¡éªŒã€æ—¥æœŸæ ¼å¼æ ¡éªŒç­‰ç­‰ã€‚é€šè¿‡å‰ç«¯çš„æå‰æ ¡éªŒå¯ä»¥é¿å…åŽç«¯è¯·æ±‚åŽ‹åŠ›ï¼Œä¹Ÿèƒ½å¤Ÿæå‡ç”¨æˆ·ä½“éªŒã€‚ è¡¨å•å°è£…ï¼šå°è£…ä¸€å¥—é€šç”¨çš„è¡¨å•ç»„ä»¶ï¼Œä¾›æ•´ä¸ªå›¢é˜Ÿå¤ç”¨ï¼Œæé«˜ç”Ÿäº§æ•ˆçŽ‡ï¼Œä¹Ÿèƒ½å‡å°‘ bug çš„äº§ç”Ÿã€‚ çŠ¶æ€ç®¡ç†çŠ¶æ€ç®¡ç†æ˜¯ Flutter çš„æ ¸å¿ƒï¼Œå¦‚ä½•å¤„ç†æ•°æ®å®žä½“ã€ä¸šåŠ¡é€»è¾‘ã€ç•Œé¢ä¹‹é—´çš„å…³ç³»å¯¹ä»£ç çš„å¯ç»´æŠ¤æ€§ååˆ†å…³é”®ï¼Œè€Œè¿™éƒ½ä¾èµ–äºŽçŠ¶æ€ç®¡ç†çš„å®žçŽ°ã€‚å¯¹äºŽçŠ¶æ€ç®¡ç†ï¼Œå»ºè®®æŒ‰å¦‚ä¸‹æ–¹å¼å­¦ä¹ ï¼š æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„åŒºåˆ«ï¼Œå¯ä»¥é˜…è¯»ä¸€ä¸‹StatefulWidget å’Œ StatelessWidgetçš„æºç ï¼Œä¼šæœ‰æ›´æ·±åˆ»çš„ç†è§£ã€‚ ç†è§£ç»„ä»¶çš„æ¸²æŸ“æœºåˆ¶ï¼šè™½ç„¶æˆ‘ä»¬å¼€å‘ä¸­å¾ˆå°‘å…³æ³¨ç»„ä»¶å¦‚ä½•æ¸²æŸ“ï¼Œä½†æ˜¯å½“åº”ç”¨çŠ¶æ€ç®¡ç†æ’ä»¶æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡æ¸²æŸ“æœºåˆ¶èƒ½å¤ŸçŸ¥é“çŠ¶æ€æ•°æ®æ›´æ–°æ—¶å¦‚ä½•å‡å°‘åˆ·æ–°çš„èŒƒå›´ï¼Œå®žçŽ°å±€éƒ¨åˆ·æ–°ï¼Œä»Žè€Œæå‡æ€§èƒ½ã€‚ ä¸»æµçŠ¶æ€æ’ä»¶åº”ç”¨ï¼šå¯¹æ¯”ä¸»æµçŠ¶æ€æ’ä»¶ï¼Œä»Žä¸­é€‰æ‹©ä¸€ä¸ªåˆé€‚è‡ªå·±å›¢é˜Ÿçš„åº”ç”¨ã€‚å¯¹äºŽé•¿æœŸç”¨çš„çŠ¶æ€ç®¡ç†æ’ä»¶ï¼Œå»ºè®®æ·±å…¥äº†è§£å…·ä½“çš„å®žçŽ°æœºåˆ¶ï¼Œä»¥ä¾¿å†é‡åˆ°é—®é¢˜æ—¶èƒ½å¤Ÿå¿«é€Ÿå®šä½ï¼Œå¿«é€Ÿè§£å†³ã€‚ æŒ‰éœ€åˆ·æ–°ï¼šç›¸æ¯” setState è¿™ç§ç®€å•ç²—æš´çš„å…¨å±€æ›´æ–°ï¼ŒçŠ¶æ€ç®¡ç†æ’ä»¶çš„ä¸€å¤§ä¼˜åŠ¿å°±æ˜¯å¯ä»¥å®žçŽ°å±€éƒ¨åˆ·æ–°ã€‚é€šè¿‡æŒ‰éœ€åˆ·æ–°å¯ä»¥æžå¤§åœ°æé«˜é¡µé¢çš„æµç•…åº¦ã€‚ å…³äºŽçŠ¶æ€ç®¡ç†çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡é˜…è¯»ä¸‹é¢ä¸¤ç¯‡æ–‡ç« æ¥è¿›è¡Œäº†è§£ï¼š ðŸš©ðŸš©ðŸš©å»ºè®®æ”¶è—FlutterçŠ¶æ€ç®¡ç†æ’ä»¶å“ªå®¶å¼ºï¼Ÿè¯·çœ‹å²›ä¸Šç å†œçš„æŽ’è¡Œæ¦œï¼Flutter å…¥é—¨ä¸Žå®žæˆ˜ï¼ˆä¹åäºŒï¼‰ï¼šçŠ¶æ€ç®¡ç†ç³»åˆ—å¤§æ±‡æ€» ç½‘ç»œè¯·æ±‚App çš„ä¸šåŠ¡åŠŸèƒ½å¼€å‘ï¼Œç›¸å½“ä¸€éƒ¨åˆ†å·¥ä½œæ˜¯åœ¨ä¸Žå’ŒåŽç«¯å¯¹æŽ¥å£ã€è”è°ƒæŽ¥å£ã€‚äº†è§£ä¸ŽåŽç«¯çš„æ•°æ®äº¤äº’ï¼Œå°è£…å¥½ç½‘ç»œè¯·æ±‚åº“éžå¸¸é‡è¦ã€‚è¿™é‡Œå»ºè®®æŒ‰å¦‚ä¸‹çš„æ–¹å¼è¿›è¡Œå­¦ä¹ ï¼š JSON æ•°æ®çš„è®¤è¯†ï¼šè¿™ä¸ªå…¶å®žå¾ˆç®€å•ï¼ŒåŸºæœ¬ä¸Šä¸€çœ‹å°±æ˜Žç™½ã€‚ä½†æ›´é‡è¦çš„æ˜¯å’ŒåŽç«¯çº¦å®šè¿”å›žæ•°æ®çš„æ ¼å¼ï¼Œé¿å…æ¯ä¸ªæŽ¥å£çš„æ ¼å¼éƒ½ä¸åŒï¼Œé‚£æ ·å¾ˆéš¾åšç»Ÿä¸€å°è£…ã€‚ JSON æ•°æ®è½¬å¯¹è±¡ï¼šæ›¾å‡ ä½•æ—¶ï¼Œæˆ‘æ˜¯ç›´æŽ¥æ‹¿ JSON å¯¹è±¡ï¼ˆå®žé™…å·²ç»è½¬æˆ Map äº†ï¼‰çš„ key åŽ»å–æ‰€éœ€çš„å€¼çš„ã€‚ç»“æžœé­å—äº†æƒ¨ç—›çš„æ•™è®­ï¼Œæ¯”å¦‚åŽç«¯é—®é¢˜å˜æˆ null äº†ä¼šå¯¼è‡´é—ªé€€ã€‚è€Œä¸”æ¯æ¬¡éƒ½éœ€è¦æ•² keyçš„åç§°ï¼Œç¼–ç æ•ˆçŽ‡æžä½Žã€‚è€Œå°† JSON æ•°æ®è½¬ä¸ºå¯¹è±¡ï¼Œä¸€æ–¹é¢æ˜¯å¯¹è±¡å¯ä»¥åœ¨æ•´ä¸ªå·¥ç¨‹é‡Œå¤ç”¨ï¼ŒäºŒæ˜¯å¯ä»¥é€šè¿‡å¯¹è±¡å±žæ€§è®¿é—®ï¼Œç¼–ç æœ‰æç¤ºã€‚åŒæ—¶ï¼Œå¯ä»¥åº”ç”¨ null safety å±žæ€§ç›´æŽ¥çŸ¥é“å“ªä¸ªå±žæ€§æ˜¯å¦å¯èƒ½ä¸ºç©ºã€‚ RESTfulæŽ¥å£è°ƒè¯•ï¼šæ—©æœŸçš„æŽ¥å£éƒ½æ˜¯ GET å’Œ POST è¯·æ±‚ï¼Œä½†æ˜¯å…¶å®žè¯­ä¹‰ä¸Šå¹¶ä¸æ˜Žç¡®ã€‚å»ºè®®æ˜¯ç»Ÿä¸€å’ŒåŽç«¯çº¦å®šä½¿ç”¨ RESTful é£Žæ ¼æŽ¥å£ã€‚ Mock æ•°æ®ï¼šåŽç«¯æŽ¥å£æ²¡å‡ºæ¥ä¹‹å‰ï¼Œä½¿ç”¨ Mock æ•°æ®æ¥å®Œæˆä¸šåŠ¡é€»è¾‘çš„æ¨¡æ‹Ÿéžå¸¸é‡è¦ã€‚å»ºè®® Mock çš„æ•°æ®èŽ·å–æŽ¥å£å’ŒåŽç«¯çš„æŽ¥å£ä¿æŒä¸€è‡´ï¼ˆç»Ÿä¸€å®žçŽ°ç›¸åŒçš„æŽ¥å£ï¼‰ï¼Œè¿™æ ·åœ¨åŽç«¯æŽ¥å£å°±ç»ªåŽå¯ä»¥ç›´æŽ¥åˆ‡æ¢æŽ¥å£å®žçŽ°ç±»å°±å¯ä»¥äº†ã€‚ ç½‘ç»œè¯·æ±‚æ’ä»¶ä½¿ç”¨ä¸Žå°è£…ï¼šFlutter ç›®å‰æœ€ä¸ºæµè¡Œçš„ç½‘ç»œè¯·æ±‚æ’ä»¶æ˜¯ Dioï¼Œå¯¹åº”çš„å°è£…ç‰ˆæœ¬æœ‰ Retrofitã€‚å»ºè®®ä¸è¦ä¸Šæ¥ä¸€å¼€å§‹å°±æœ‰ç”¨å°è£…å¥½çš„ç‰ˆæœ¬ã€‚è€Œæ˜¯è‡ªå·±ä¸€ä¸ªä¸ªè°ƒè¯•ï¼Œç„¶åŽå°è¯•è‡ªå·±å°è£…ï¼Œè¿™æ ·ä¼šæ›´å¥½åœ°ç†è§£å°è£…çš„è¿‡ç¨‹ã€‚ Headers å’Œ Cookieï¼šApp å’Œæµè§ˆå™¨ä¸åŒï¼Œæµè§ˆå™¨ä¼šè‡ªå·±ç®¡ç†Cookieã€‚è€Œ App éœ€è¦è‡ªå·±ç®¡ç† Cookieã€‚å› æ­¤æœ‰å¿…è¦äº†è§£å¦‚ä½•è®¾ç½®è¯·æ±‚å¤´Headersï¼Œä»¥åŠå¦‚ä½•èŽ·å–åŽç«¯çš„ Cookie å¹¶å›žå†™åˆ°Headers é‡Œé¢ã€‚ å“åº”å¼ç¼–ç¨‹å½“ä½ å¯¹ç•Œé¢ã€çŠ¶æ€ç®¡ç†ã€ç½‘ç»œè¯·æ±‚éƒ½æŽŒæ¡å·®ä¸å¤šåˆ°æ—¶å€™ï¼Œä½¿ç”¨ Flutter å¼€å‘åŸºæœ¬çš„ App å°±åŸºæœ¬æ²¡é—®é¢˜äº†ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦è€ƒè™‘åº”ç”¨ç»“æž„å¦‚ä½•ä¼˜åŒ–ã€‚å¯¹äºŽDart è€Œè¨€ï¼Œæä¾›äº† Stream å’Œ StreamListener è¿™æ ·çš„å·¥å…·æ¥é€šè¿‡æµçš„æ–¹å¼é©±åŠ¨å…³è”ä¸šåŠ¡æˆ–ç•Œé¢æ›´æ–°ï¼Œå®žçŽ°å“åº”å¼ç¼–ç¨‹ã€‚è¿™é‡Œé¢å…¸åž‹çš„æ˜¯ BLoC æ¨¡å¼ ï¼ˆBLoC ä¹Ÿå¯ä»¥ç”¨äºŽçŠ¶æ€ç®¡ç†ï¼‰ã€‚äº†è§£ä¸€ä¸‹ BLoC çš„ç†å¿µå¯¹è®¾è®¡æ•´ä¸ªåº”ç”¨ç¨‹åºæ¡†æž¶ååˆ†æœ‰å¸®åŠ©ã€‚ åŠ¨ç”»å½“ä½ æŽŒæ¡ä¸Šè¿°çš„åŸºæœ¬æŠ€èƒ½åŽï¼Œä½ çœ‹åˆ°åˆ«äºº App çš„é…·ç‚«åŠ¨æ•ˆæ—¶è‚¯å®šå¿ƒç—’ç—’ï¼Œæƒ³è‡ªå·±å¶å°”ä¹Ÿèƒ½çŽ©ä¸€ä¸‹è¿™ç±»é«˜å¤§ä¸Šçš„ä¸œè¥¿ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦äº†è§£åŠ¨ç”»çš„å®žçŽ°äº†ï¼ŒFlutter æä¾›äº†å¾ˆå¤šåŠ¨ç”»æž„å»ºæ–¹å¼ï¼Œæ¯”å¦‚ï¼š åŸºç¡€åŠ¨ç”»ç»„ä»¶ï¼šä¾‹å¦‚ AnimatedContainerï¼ŒAnimatedOpacity ç­‰ç­‰ï¼Œé€šè¿‡è¿™äº›ç»„ä»¶å¯ä»¥å®žçŽ°ç®€å•ä½†æœ‰è¶£çš„åŠ¨ç”»ã€‚ åŠ¨ç”»å¤ç”¨ï¼šä½¿ç”¨ AnimatedBuilder å¯ä»¥æž„å»ºå¯å¤ç”¨çš„åŠ¨æ•ˆã€‚ åŠ¨ç”»æ›²çº¿ï¼šFlutter è‡ªå¸¦äº†å¾ˆå¤šåŠ¨ç”»æ›²çº¿æ•ˆæžœï¼Œå¦‚æžœä¸æ»¡è¶³ä¹Ÿå¯ä»¥å®žçŽ°è‡ªå®šä¹‰æ›²çº¿ã€‚æœ‰äº†åŠ¨ç”»æ›²çº¿ï¼Œä½ å°±å¯ä»¥å®šä¹‰ä¸€äº›è‡ªå·±çš„åŠ¨ç”»è¿‡æ¸¡æ•ˆæžœäº†ã€‚ åŠ¨ç”»æ’ä»¶ï¼špub.devä¸Šä¹Ÿæä¾›äº†å¾ˆå¤šåŠ¨ç”»æ’ä»¶ï¼Œä¾‹å¦‚Lottie å°±å¯ä»¥å°† AE çš„åŠ¨ç”»è½¬æ¢ä¸º Flutter åŠ¨ç”»ã€‚å¦‚ä½•æŸ¥æ‰¾åŠ¨ç”»æ’ä»¶ï¼Œè¿™éœ€è¦æ‡‚å¾—æœç´¢ï¼Œæ¯”å¦‚æœç´¢å…³é”®å­— Animationï¼Œæˆ–è€…ç»å¸¸é€›ä¸€äº›æŠ€æœ¯ç¤¾åŒºï¼Œä¼šè®©ä½ çš„è§†é‡Žå¼€æ‹“å¾ˆå¤šï¼Œä¹Ÿè®¸ï¼Œä¸ç»æ„é—´å°±èƒ½å‘çŽ°ä¸€ä¸ªé…·ç‚«çš„æ’ä»¶ã€‚ ç»˜å›¾å½“ä½ çš„åŠ¨ç”»éƒ½èƒ½æžå®šçš„æ—¶å€™ï¼Œä½ ä¼šå‘çŽ°äº§å“å’Œè®¾è®¡å¯èƒ½å·²ç»å¯¹ä½ åˆ®ç›®æƒ³çœ‹äº†ï¼Œè¿™ä¸ªæ—¶å€™ä»–ä»¬æå‡ºçš„äº¤äº’æˆ–è€…ç•Œé¢æ•ˆæžœä¼šæé«˜ï¼ˆåƒä¸‡åˆ«è§‰å¾—å‡çº§è‡ªå·±çš„æŠ€èƒ½æ˜¯åœ¨ç»™è‡ªå·±æŒ–å‘ï¼‰ã€‚æ¯”å¦‚ï¼Œå¯èƒ½ä¼šå‡ºä¸€ä¸ªå¥‡æ€ªçš„å¤–å½¢ï¼Œç„¶åŽéœ€è¦ä½ å®žçŽ°ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°ç»˜å›¾äº†ã€‚ç»˜å›¾å…¶å®žéœ€è¦æŒºé«˜çš„æ•°å­¦çŸ¥è¯†è¾…åŠ©çš„ï¼Œä½ å¯èƒ½éœ€è¦æå‰å¤ä¹ ä¸€ä¸‹é«˜ç­‰æ•°å­¦ã€çº¿æ€§ä»£æ•°çŸ¥è¯†ðŸ˜œðŸ˜œðŸ˜œ â€”â€” æ‰€ä»¥å¤§åŽ‚ç­›é€‰å­¦æ ¡å’Œå­¦åŽ†å…¶å®žä¹Ÿæœ‰ä¸€å®šçš„é“ç†çš„ï¼Œè¿™äº›ç­›é€‰å‡ºæ¥çš„äººçš„åŸºç¡€çŸ¥è¯†ä¸€èˆ¬éƒ½ä¸ä¼šå·®ã€‚ ClipPathï¼šè‡ªå®šä¹‰è£å‰ªè·¯å¾„å¯¹äºŽç»˜åˆ¶æœ‰è§„å¾‹çš„å½¢çŠ¶æ¥è¯´å¯ä»¥è½»æ¾æžå®šï¼Œå½“ç„¶æœ‰äº›å¤æ‚çš„å¯èƒ½éœ€è¦ä¸€äº›è´å¡žå°”æ›²çº¿çŸ¥è¯†ã€‚ CustomPaintå’Œ Canvasï¼šä½¿ç”¨ CustomPaint å’Œ Canvas å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°ç»˜å›¾ï¼ŒåŒ…æ‹¬ä½ æƒ³æžä¸ªå°æ¸¸æˆä¹Ÿè¡Œã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªä¹Ÿæ˜¯å¾ˆçƒ§è„‘çš„ä¸€çŽ¯ï¼Œè¯´åˆ°åº•ï¼Œæ•°å­¦çœŸçš„å¾ˆé‡è¦ï¼ è®¡ç®—æœºå›¾å½¢å­¦ï¼ˆCGï¼‰ï¼šè¿™ç®—æ˜¯ç»˜å›¾çš„ç†è®ºæ”¯æ’‘ï¼Œæœ‰è®¡ç®—æœºå›¾å½¢å­¦çŸ¥è¯†çš„æ”¯æ’‘ï¼Œä¼šè®©ä½ ç»˜åˆ¶è‡ªå®šä¹‰å›¾å½¢æ—¶å€™å¾—å¿ƒåº”æ‰‹ã€‚ æœ¬åœ°æ•°æ®å­˜å‚¨éšç€ç½‘ç»œçš„å‡çº§ï¼Œæœ¬åœ°æ•°æ®å­˜å‚¨å¯èƒ½ä¸åƒä¹‹å‰é‚£ä¹ˆé‡è¦ã€‚ä½†æ˜¯ï¼Œä¸è®ºæ˜¯å¯¹ç”¨æˆ·ä½“éªŒè¿˜æ˜¯å‡è½»åŽç«¯åŽ‹åŠ›éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚è­¬å¦‚ï¼Œå¾®ä¿¡å°±æŠŠæ•´ä¸ªä¸ªäººçš„èŠå¤©è®°å½•å­˜å‚¨åœ¨äº†æœ¬åœ° â€”â€” æ—¢èŠ‚çœäº†æœåŠ¡å™¨çš„å­˜å‚¨ç©ºé—´å’ŒåŠ è½½è¯·æ±‚é‡ï¼Œè¿˜èƒ½å¤Ÿå¯¹å¤–å®£ç§°æ˜¯â€œä¿æŠ¤ä¸ªäººéšç§â€ã€‚æœ¬åœ°å­˜å‚¨ä¸»è¦æœ‰ä¸‰ä¸ªæ–¹é¢ï¼š ç®€å•é”®å€¼å¯¹çš„å­˜å‚¨ï¼šå¯ä»¥å­˜å‚¨ä¸€äº›é…ç½®ä¿¡æ¯ã€ç™»å½•ä¼šè¯ä¿¡æ¯ï¼Œé¿å…åå¤ä»ŽæœåŠ¡å™¨è¯»å–ã€‚åœ¨ Flutter é€šå¸¸æ˜¯ä½¿ç”¨ SharedPreferences å®žçŽ°ã€‚ æ–‡ä»¶å­˜å‚¨ï¼šæ¯”å¦‚åº”ç”¨å†…ä¸‹è½½çš„æ–‡ä»¶ç®¡ç†ï¼Œæ—¥å¿—æ–‡ä»¶ç­‰ï¼Œå¯ä»¥ä½¿ç”¨æ–‡ä»¶ç®¡ç†å®žçŽ°ã€‚é€šå¸¸ä¼šä½¿ç”¨åˆ° path_provider æ’ä»¶å®žçŽ°ã€‚ å…³ç³»åž‹æ•°æ®åº“ï¼šç§»åŠ¨ç«¯å¤§éƒ¨åˆ†éƒ½é‡‡ç”¨äº† SQLite æ•°æ®åº“ï¼ŒSQLite çš„æ•°æ®åº“æ“ä½œè¯­æ³•å’Œ MySQL è¿™ç±»çš„æ ‡å‡† SQL åŸºæœ¬ä¸€è‡´ï¼Œå¯ä»¥ç”¨äºŽå­˜å‚¨å…³ç³»æ•°æ®ã€‚åœ¨Flutter ä¸­ä¹Ÿæœ‰ä¸å°‘å°è£…å¥½çš„æ’ä»¶ï¼Œæ¯”å¦‚ sqfliteã€‚ é¡µé¢å¯¼èˆªå®žé™…ä¸Šé¡µé¢å¯¼èˆªåœ¨ä¸€å¼€å§‹å°±ä¼šç”¨åˆ°ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè‡ªå¸¦çš„å¯¼èˆªå’Œè·¯ç”±ç®¡ç†éƒ½èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ã€‚å¯¹äºŽè·¯ç”±å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼è¿›é˜¶ï¼š è‡ªå¸¦è·¯ç”±çš„æŽŒæ¡ï¼šæ¯”å¦‚åŒ¿åè·¯ç”±ï¼Œå‘½åè·¯ç”±ï¼Œè·¯ç”±ä¼ å‚ï¼Œè·¯ç”±æ‹¦æˆªç­‰ï¼› è·¯ç”±æ’ä»¶çš„åº”ç”¨ï¼šäº†è§£å¦‚ fluroã€GetX çš„è·¯ç”±ç®¡ç†çš„ä¼˜ç¼ºç‚¹ï¼Œé€‰æ‹©ä½¿ç”¨è‡ªå¸¦çš„è·¯ç”±ç®¡ç†è¿˜æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚ 2.0è·¯ç”±ï¼šè¿™ä¸ªå¦‚æžœæ˜¯åœ¨ Webç«¯çš„è¯å»ºè®®äº†è§£ä¸€ä¸‹ï¼ŒApp ç«¯ä¸ªäººæ„Ÿè§‰æœ‰ç‚¹é‡ï¼Œå­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜ã€‚å½“ç„¶ï¼Œå› ä¸ºåˆšå‡ºæ¥æ²¡å¤šä¹…ï¼Œä¼°è®¡ä»¥åŽä¹Ÿä¼šæœ‰ç®€å•æ˜“ç”¨çš„æ’ä»¶å¸®åŠ©æˆ‘ä»¬ä½¿ç”¨ã€‚ è‡ªæœ‰æ’ä»¶å¦‚æžœä½ çš„å…¬å¸ä¸šåŠ¡æ¡çº¿æ¯”è¾ƒå¤šï¼Œä¹Ÿè®¸æ­¤æ—¶å·²ç»æˆä¸ºå…¬å¸å¤§ç¥žçš„ä½ ä¼šè¢«é‚€è¯·åšåŸºç¡€è®¾æ–½å»ºè®¾ï¼Œæˆ–è€…æ˜¯ä½ è‡ªå·±æƒ³ä¸ºå¼€æºç¤¾åŒºåšåšè´¡çŒ®ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æž„å»ºè‡ªæœ‰æ’ä»¶æˆ–å¼€æºæ’ä»¶äº†ã€‚Flutter æä¾›äº†æ’ä»¶æž„å»ºæ¨¡æ¿å·¥ç¨‹ï¼Œä½ å¯ä»¥æŒ‰æ­¥éª¤æž„å»ºè‡ªæœ‰æ’ä»¶ï¼Œç„¶åŽä¾›æ•´ä¸ªå…¬å¸çš„å„ä¸ªä¸šåŠ¡æ¡çº¿ä½¿ç”¨ï¼Œæé«˜å„ä¸ªä¸šåŠ¡æ¡çº¿çš„ç”Ÿäº§åŠ›ã€‚ åŽŸç”Ÿäº¤äº’åŽŸç”Ÿäº¤äº’åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š Flutterä¸ºåŽŸç”Ÿæä¾›æœåŠ¡ Flutter ä½¿ç”¨åŽŸç”Ÿæä¾›çš„æŽ¥å£ åŽŸç”Ÿé¡µé¢ä¸Ž Flutter é¡µé¢ä¹‹é—´çš„è·³è½¬ è¿™å—å¯¹äºŽæ··ç¼–çš„åº”ç”¨æ¥è¯´æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œæ­¤æ—¶ä½ çš„çŸ¥è¯†ä½“ç³»éœ€è¦å‡çº§äº†ï¼Œä½ éœ€è¦å­¦ä¹ å®‰å“çš„ kotlin å¼€å‘ï¼ŒiOS çš„ Swift å¼€å‘ï¼ˆå‘ƒï¼Œæœ¬æ¥æƒ³ä¸€ç«™å¼æžå®šï¼Œç»“æžœåˆç»•å›žæ¥äº†ï¼‰ã€‚å½“ç„¶ï¼Œåˆ°è¿™ä¸ªé˜¶æ®µï¼Œç›¸ä¿¡è¿™äº›å·²ç»éš¾ä¸å€’ä½ äº†ï¼ åº”ç”¨å‘å¸ƒæ­å–œä½ ï¼ä½ çš„åº”ç”¨å¯ä»¥åœ¨å„å¤§åº”ç”¨å¸‚åœºä¸Šæž¶äº†ï¼è®°å¾—æˆ‘çš„ç¬¬ä¸€ä¸ªåº”ç”¨åœ¨ AppStoreè¿‡å®¡çš„æ—¶å€™åˆ«æå¤šå…´å¥‹äº†ï¼ˆä¹‹å‰è¢«æ‹’äº†å¥½å‡ æ¬¡ðŸ˜‚ðŸ˜‚ðŸ˜‚ï¼‰ï¼å¦‚ä½•è¿›è¡Œåº”ç”¨æ‰“åŒ…è¿™ä¸ªæœç´¢ä¸€ä¸‹å°±èƒ½æžå®šäº†ï¼Œä½†æ˜¯å¦‚ä½•åº”å¯¹AppStore æ¯å¹´éƒ½å˜çš„å®¡æŸ¥è§„åˆ™ä¹Ÿæ˜¯ä¸€åœºæ–—æ™ºæ–—å‹‡çš„è¿‡ç¨‹ã€‚ è€Œå®‰å“ï¼Œå¦‚æžœæžå®šç¢Žç‰‡åŒ–çš„æ“ä½œç³»ç»Ÿåˆ†å¸ƒä¹Ÿæ˜¯å¤´ç–¼çš„ä¸€ä»¶äº‹æƒ…ã€‚å»ºè®®æå‰åœ¨åº”ç”¨å†…åšåº”ç”¨ç»Ÿè®¡ï¼Œä»¥åŠå¼‚å¸¸ä¸ŠæŠ¥ï¼Œé¿å…å‘å¸ƒåŽåœ¨ç”¨æˆ·æœºå™¨ä¸Šå‡ºçŽ°å¥‡æ€ªçš„é—®é¢˜ã€‚ åŽç»­æŠ€æœ¯æ°¸æ— æ­¢å¢ƒï¼Œå†å¾€åŽï¼Œä½ å¯èƒ½ä¼šæ·±å…¥åŽ»åšæ€§èƒ½ä¼˜åŒ–ã€åº”ç”¨æž¶æž„è®¾è®¡ã€‚è¿™äº›æ–¹é¢å¾ˆå¤§ç¨‹åº¦é ä¸ªäººå¹³æ—¶çš„ç§¯ç´¯ï¼Œå¤šè¾“å…¥æ–°çš„çŸ¥è¯†ï¼ŒåŒæ—¶äº†è§£å…¶ä»–çš„åº”ç”¨æ¡†æž¶å’Œç‰¹æ€§ï¼ˆä¸é™äºŽ Dartï¼Œæ¯”å¦‚ Java çš„ Spring æ¡†æž¶ï¼ŒWeb ç«¯çš„ Reactã€Vueï¼‰éƒ½ä¼šè®©ä½ å¯¹å½“å‰çš„åº”ç”¨æž¶æž„è®¾è®¡æœ‰æ–°çš„è®¤è¯†ã€‚æ‰©å……è§†é‡Žå’ŒæŠ€æœ¯æ·±åº¦ï¼Œä¹Ÿè®¸ä½ å°±æ˜¯ä¸‹ä¸€ä¸ª CTO çš„äººé€‰ðŸ’ªðŸ»ðŸ’ªðŸ»ðŸ’ªðŸ»ï¼ï¼ï¼]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå¦‚ä½•å¼€å‘webç«¯]]></title>
    <url>%2Fposts%2Fb683bca5.html</url>
    <content type="text"><![CDATA[flutterå¼€å‘ç§»åŠ¨ç«¯ä¸Žå¼€å‘webç«¯æœ‰äº›åŒºåˆ«ï¼Œå¼€å‘ç§»åŠ¨ç«¯ä¼šæ¶‰åŠåˆ°å„è‡ªåŽŸç”Ÿç³»ç»Ÿé‡Œç‰¹æœ‰çš„ä¸€äº›å†…å®¹ï¼ŒiOSç«¯ä¸ŽAndroidé€šè¿‡æ’ä»¶çš„å½¢å¼å¼•å…¥çš„é¡¹ç›®å½“ä¸­ï¼Œä½†ä¸éœ€è¦è€ƒè™‘å“åº”å¼å¸ƒå±€ã€‚è€Œwebç«¯å¼€å‘éœ€è¦è€ƒè™‘åˆ°çª—å£çš„å¤§å°å˜åŒ–ï¼Œéœ€è¦è€ƒè™‘å“åº”å¼å¸ƒå±€ã€‚ å¼€å¯å¯¹webå¼€å‘çš„æ”¯æŒflutterå¼€å‘è¦æ”¯æŒwebï¼Œéœ€è¦åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ‰“å¼€æ”¯æŒçš„å¹³å°ï¼ˆä»¥ä¸‹åˆ—ä¸¾äº†å„ä¸ªå¹³å°æ”¯æŒçš„å‘½ä»¤è¡Œï¼‰ï¼š flutter config â€”enable-web-desktopflutter config â€”enable-windows-desktopflutter config â€”enable-macos-desktopflutter config â€”enable-linux-desktop ä¹‹åŽå†æ¬¡è¾“å…¥ flutter configæ£€æµ‹å¼€å¯çš„æƒ…å†µï¼Œå¦‚æžœæ£€æµ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºåˆ™è¡¨ç¤ºå¼€å¯æˆåŠŸã€‚ è¿™æ—¶å€™å¯ä»¥åˆ›å»ºé¡¹ç›®äº†ï¼Œåˆ›å»ºçš„æ—¶å€™å‹¾é€‰Webé€‰é¡¹å³å¯ã€‚ webå¼€å‘çš„æ³¨æ„äº‹é¡¹æ”¯æŒå“åº”å¼å¸ƒå±€çš„æŽ§ä»¶A. MediaQueryå“åº”å¼å¸ƒå±€çš„æœ¬è´¨æ˜¯ç›‘å¬æµè§ˆå™¨å®½é«˜çš„å˜åŒ–è¿›è€Œä¿®æ”¹UIçš„æ ·å¼ï¼Œæ‰€ä»¥éœ€è¦èƒ½å¤Ÿç›‘å¬å®½é«˜çš„å˜åŒ–ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨MediaQueryæŽ§ä»¶ã€‚MediaQueryæŽ§ä»¶ç»§æ‰¿è‡ªInheritedWidgetï¼Œé€šè¿‡MediaQuery.of(context).sizeçš„æ–¹å¼å®žæ—¶èŽ·å–åˆ°æµè§ˆå™¨å®½é«˜çš„å˜åŒ–ï¼Œè¿›è€Œå¯¹å…¨å±€çš„UIè¿›è¡Œè°ƒæ•´ã€‚ B. LayoutBuilderLayoutBuilderæ˜¯MediaQueryçš„ç®€åŒ–ç‰ˆæœ¬ï¼Œå¯ä»¥å®žæ—¶ç›‘æŽ§çˆ¶æŽ§ä»¶å°ºå¯¸çš„å˜åŒ–ï¼ˆä¸æ˜¯æµè§ˆå™¨å®½é«˜çš„å˜åŒ–ï¼‰ï¼Œè¿›è€Œå¯¹å½“å‰æŽ§ä»¶çš„UIè¿›è¡Œè°ƒæ•´ã€‚ C. AspectRatioè¿™æ˜¯ä¸€ä¸ªæŒ‡å®šå®½é«˜æ¯”ä¾‹çš„æŽ§ä»¶ï¼Œä¼šéšç€æµè§ˆå™¨å®½åº¦å˜åŒ–è¿›è¡Œç­‰æ¯”ä¾‹ç¼©å°æˆ–è€…æ”¾å¤§ã€‚å¦‚æžœè¦ä¿è¯æŸä¸ªæŽ§ä»¶çš„å®½é«˜ä¿æŒä¸€è‡´ï¼Œåˆ™éœ€è¦ä½¿ç”¨AspectRatioã€‚ D. Flexible ä¸Ž ExpandedFlexibleä¸ŽExpandedæ˜¯ç”¨åœ¨Rowæˆ–è€…Columnä¸­çš„æŽ§ä»¶ï¼Œå‰è€…å¯ä»¥ç”¨æ¥æŽ§åˆ¶æŽ§ä»¶åœ¨Rowæˆ–è€…Columnä¸­å ç”¨çš„æ¯”ä¾‹ï¼ŒåŽè€…åˆ™ç”¨æ¥å¡«å……Rowæˆ–è€…Columnä¸­å‰©ä½™çš„ç©ºé—´ã€‚ E. FractionallySizedBoxè¿™æ˜¯ä¸€ä¸ªè®¾ç½®å ä½æ¯”ä¾‹çš„æŽ§ä»¶ï¼Œè·ŸAspectRatioç±»ä¼¼ï¼Œå¯ä»¥è®¾ç½®å æœ‰çˆ¶æŽ§ä»¶å¤šå¤§æ¯”ä¾‹ã€‚ å“åº”å¼å¸ƒå±€æ”¯æŒçš„å¼€æºåº“A. responsive_frameworkè¿™ä¸ªåº“æ”¯æŒå±å¹•å°ºå¯¸å˜åŒ–æ—¶å¯¹æ‰€ç”¨æŽ§ä»¶è¿›è¡Œç¼©æ”¾æŽ§åˆ¶æˆ–è€…è¿›è¡Œå®žæ—¶UIè°ƒæ•´ï¼Œæ”¯æŒæ‰‹æœºã€å¹³æ¿ã€ç”µè„‘å°ºå¯¸çš„è®¾ç½®ï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚æ”¯æŒç¼©æ”¾æŽ§åˆ¶æ˜¯å…¶æœ€å¤§äº®ç‚¹ã€‚ B. responsive_builderè¿™ä¸ªåº“æ”¯æŒå±å¹•å°ºå¯¸çš„å˜åŒ–æ—¶å¯¹æ‰€æœ‰æŽ§ä»¶è¿›è¡Œå®žæ—¶UIè°ƒæ•´ï¼Œå¹¶èƒ½æ£€æµ‹ç§»åŠ¨ç«¯æ¨ªç«–å±å˜åŒ–ã€‚ å¼•ç”¨å¼€æºåº“çš„æ³¨æ„ç‚¹å¦‚æžœè¦åšåˆ°å¼€å‘webçš„æ—¶å€™ä¹Ÿéœ€è¦æ”¯æŒç§»åŠ¨ç«¯ï¼Œåœ¨å¼•å…¥å¼€æºåº“æ—¶è¦æ³¨æ„å…¶æ”¯æŒçš„å¹³å°ç§ç±»ã€‚å¦‚ä¸‹å›¾ä¸­æ”¯æŒçš„å¹³å°å°±åŒ…å«äº†å®‰å“ã€iOSã€Linuxã€MacOSã€Webä»¥åŠwindowsã€‚æœ€å¥½å¼•å…¥çš„å¼€æºåº“æ”¯æŒå…¨å¹³å°ã€‚ å‚è€ƒèµ„æ–™ï¼šhttps://betterprogramming.pub/how-to-build-responsive-apps-with-flutter-widgets-review-b22c6dec6904https://medium.com/flutter-community/seven-things-you-should-know-before-starting-with-flutter-web-8e48555d819e]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter cached_network_image å›¾ç‰‡åŠ è½½æµç¨‹åˆ†æž]]></title>
    <url>%2Fposts%2Fa931c363.html</url>
    <content type="text"><![CDATA[ä½¿ç”¨ç»„ä»¶CachedNetworkImageå¯ä»¥æ”¯æŒç›´æŽ¥ä½¿ç”¨æˆ–è€…é€šè¿‡ImageProviderã€‚ å¼•å…¥ä¾èµ– 12dependencies: cached_network_image: ^3.1.0 æ‰§è¡Œflutter pub getï¼Œé¡¹ç›®ä¸­ä½¿ç”¨ Import it 1import 'package:cached_network_image/cached_network_image.dart'; æ·»åŠ å ä½å›¾ 12345CachedNetworkImage( imageUrl: "http://via.placeholder.com/350x150", placeholder: (context, url) =&gt; CircularProgressIndicator(), errorWidget: (context, url, error) =&gt; Icon(Icons.error), ), è¿›åº¦æ¡å±•ç¤º 123456CachedNetworkImage( imageUrl: "http://via.placeholder.com/350x150", progressIndicatorBuilder: (context, url, downloadProgress) =&gt; CircularProgressIndicator(value: downloadProgress.progress), errorWidget: (context, url, error) =&gt; Icon(Icons.error), ), åŽŸç”Ÿç»„ä»¶Imageé…åˆ 1Image(image: CachedNetworkImageProvider(url)) ä½¿ç”¨å ä½å›¾å¹¶æä¾›providerç»™å…¶ä»–ç»„ä»¶ä½¿ç”¨ 1234567891011121314CachedNetworkImage( imageUrl: "http://via.placeholder.com/200x150", imageBuilder: (context, imageProvider) =&gt; Container( decoration: BoxDecoration( image: DecorationImage( image: imageProvider, fit: BoxFit.cover, colorFilter: ColorFilter.mode(Colors.red, BlendMode.colorBurn)), ), ), placeholder: (context, url) =&gt; CircularProgressIndicator(), errorWidget: (context, url, error) =&gt; Icon(Icons.error),), è¿™æ ·å°±å¯ä»¥åŠ è½½ç½‘ç»œå›¾ç‰‡äº†ï¼Œè€Œä¸”ï¼Œå›¾ç‰‡åŠ è½½å®Œæˆæ—¶ï¼Œå°±è¢«ç¼“å­˜åˆ°æœ¬åœ°äº†ï¼Œé¦–å…ˆçœ‹ä¸‹å›¾ç‰‡çš„åŠ è½½æµç¨‹ å®˜ç½‘è¯´äº†ï¼Œå®ƒçŽ°åœ¨ä¸åŒ…å«ç¼“å­˜ï¼Œç¼“å­˜åŠŸèƒ½å®žé™…ä¸Šæ˜¯å¦ä¸€ä¸ªåº“flutter_cache_managerä¸­å®žçŽ°çš„ åŽŸç†åŠ è½½&amp;æ˜¾ç¤º è¿™é‡Œæˆ‘ä»¬ä»…æ¢³ç†å›¾ç‰‡åŠ è½½å’Œç¼“å­˜çš„ä¸»æµç¨‹ï¼Œå¯¹äºŽä¸€äº›å…¶ä»–åˆ†æ”¯æµç¨‹ï¼Œæˆ–æ— å…³å‚æ•°ä¸åšè¿‡å¤šåˆ†æž é¦–å…ˆï¼Œé¡µé¢ä¸Šä½¿ç”¨çš„æž„é€ å‡½æ•°æŽ¥æ”¶äº†ä¸€ä¸ªå¿…ä¼ å‚æ•°imageUrlï¼Œç”¨äºŽç”ŸæˆImageProvideræä¾›å›¾ç‰‡åŠ è½½ 1234567891011121314151617181920212223242526272829303132333435363738class CachedNetworkImage extends StatelessWidget&#123; /// imageæä¾› final CachedNetworkImageProvider _image; /// æž„é€ å‡½æ•° CachedNetworkImage(&#123; Key key, @required this.imageUrl, /// çœç•¥éƒ¨åˆ† this.cacheManager, /// ... &#125;) : assert(imageUrl != null), /// ... _image = CachedNetworkImageProvider( imageUrl, headers: httpHeaders, cacheManager: cacheManager, cacheKey: cacheKey, imageRenderMethodForWeb: imageRenderMethodForWeb, maxWidth: maxWidthDiskCache, maxHeight: maxHeightDiskCache, ), super(key: key); @override Widget build(BuildContext context) &#123; var octoPlaceholderBuilder = placeholder != null ? _octoPlaceholderBuilder : null; var octoProgressIndicatorBuilder = progressIndicatorBuilder != null ? _octoProgressIndicatorBuilder : null; /// ... return OctoImage( image: _image, /// ... ); &#125;&#125; è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œæž„é€ å‡½æ•°åˆå§‹åŒ–äº†ä¸€ä¸ªæœ¬åœ°å˜é‡_image ç±»åž‹æ˜¯CachedNetworkImageProviderï¼Œå®ƒç»§æ‰¿ImageProvideræä¾›å›¾ç‰‡åŠ è½½ï¼Œçœ‹ä¸‹å®ƒçš„æž„é€ å‡½æ•° 123456789101112131415161718192021222324252627282930313233/// æä¾›ç½‘ç»œå›¾ç‰‡åŠ è½½Providerå¹¶ç¼“å­˜abstract class CachedNetworkImageProvider extends ImageProvider&lt;CachedNetworkImageProvider&gt; &#123; /// Creates an object that fetches the image at the given URL. const factory CachedNetworkImageProvider( String url, &#123; int maxHeight, int maxWidth, String cacheKey, double scale, @Deprecated('ErrorListener is deprecated, use listeners on the imagestream') ErrorListener errorListener, Map&lt;String, String&gt; headers, BaseCacheManager cacheManager, ImageRenderMethodForWeb imageRenderMethodForWeb, &#125;) = image_provider.CachedNetworkImageProvider; /// å¯é€‰cacheManager. é»˜è®¤ä½¿ç”¨ DefaultCacheManager() /// å½“è¿è¡Œåœ¨webæ—¶,cacheManageræ²¡æœ‰ä½¿ç”¨. BaseCacheManager get cacheManager; /// è¯·æ±‚url. String get url; /// ç¼“å­˜key String get cacheKey; /// ... @override ImageStreamCompleter load( CachedNetworkImageProvider key, DecoderCallback decode);&#125; å®ƒçš„æž„é€ å‡½æ•°è°ƒç”¨äº†image_provider.CachedNetworkImageProviderçš„å®žä¾‹åœ¨_image_provider_io.dartä¸­æ˜¯åŠ è½½çš„å…·ä½“å®žçŽ°ç±» 123456789101112131415161718192021222324252627282930313233343536373839404142/// IO implementation of the CachedNetworkImageProvider; the ImageProvider to/// load network images using a cache.class CachedNetworkImageProvider extends ImageProvider&lt;image_provider.CachedNetworkImageProvider&gt; implements image_provider.CachedNetworkImageProvider &#123; /// Creates an ImageProvider which loads an image from the [url], using the [scale]. /// When the image fails to load [errorListener] is called. const CachedNetworkImageProvider( this.url, &#123; /// ... &#125;) : assert(url != null), assert(scale != null); @override final BaseCacheManager cacheManager; /// ... @override Future&lt;CachedNetworkImageProvider&gt; obtainKey( ImageConfiguration configuration) &#123; return SynchronousFuture&lt;CachedNetworkImageProvider&gt;(this); &#125; /// æ ¸å¿ƒæ–¹æ³•åŠ è½½å›¾ç‰‡å…¥å£ @override ImageStreamCompleter load( image_provider.CachedNetworkImageProvider key, DecoderCallback decode) &#123; final chunkEvents = StreamController&lt;ImageChunkEvent&gt;(); /// å¤šå›¾åŠ è½½ return MultiImageStreamCompleter( codec: _loadAsync(key, chunkEvents, decode), chunkEvents: chunkEvents.stream, scale: key.scale, informationCollector: () sync* &#123; yield DiagnosticsProeperty&lt;ImageProvider&gt;( 'Image provider: $this \n Image key: $key', this, style: DiagnosticsTreeStyle.errorProperty, ); &#125;, ); &#125; è¿™é‡Œçš„loadæ–¹æ³•å³æ˜¯å›¾ç‰‡åŠ è½½çš„å¯åŠ¨å…¥å£ï¼Œå®ƒä¼šåœ¨é¡µé¢å¯è§æ—¶è¢«è°ƒç”¨ å®ƒè¿”å›žäº†ä¸€ä¸ªMultiImageStreamCompleterä¼ å…¥_loadAsyncï¼Œçœ‹ä¸‹è¿™ä¸ªæ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940414243 /// å¼‚æ­¥åŠ è½½ Stream&lt;ui.Codec&gt; _loadAsync( CachedNetworkImageProvider key, StreamController&lt;ImageChunkEvent&gt; chunkEvents, DecoderCallback decode, ) async* &#123; assert(key == this); try &#123; /// é»˜è®¤ç¼“å­˜ç®¡ç†å™¨ var mngr = cacheManager ?? DefaultCacheManager(); assert( mngr is ImageCacheManager || (maxWidth == null &amp;&amp; maxHeight == null), 'To resize the image with a CacheManager the ' 'CacheManager needs to be an ImageCacheManager. maxWidth and ' 'maxHeight will be ignored when a normal CacheManager is used.'); /// ä¸‹è½½é€»è¾‘æ”¾åœ¨ImageCacheManagerï¼Œå¾—åˆ°ä¸‹è½½stream var stream = mngr is ImageCacheManager ? mngr.getImageFile(key.url, maxHeight: maxHeight, maxWidth: maxWidth, withProgress: true, headers: headers, key: key.cacheKey) : mngr.getFileStream(key.url, withProgress: true, headers: headers, key: key.cacheKey); await for (var result in stream) &#123; if (result is FileInfo) &#123; var file = result.file; var bytes = await file.readAsBytes(); var decoded = await decode(bytes); /// ä¸‹è½½å®Œæˆè¿”å›žç»“æžœ yield decoded; &#125; &#125; &#125; catch (e) &#123; /// ... &#125; finally &#123; await chunkEvents.close(); &#125; &#125;&#125; è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°äº†é»˜è®¤ç¼“å­˜ç®¡ç†å™¨cacheManageråˆ›å»ºçš„åœ°æ–¹ï¼Œä¸ºDefaultCacheManagerï¼Œé‚£ä¹ˆå®ƒå¦‚ä½•ç¼“å­˜çš„å‘¢ï¼ŒåŽè¾¹å†åˆ†æžã€‚ ä¸‹è½½çš„é€»è¾‘ä¹Ÿæ˜¯æ”¾åœ¨äº†ImageCacheManagerä¸‹äº†ï¼Œè¿”å›žç»“æžœæ˜¯ä¸€ä¸ªstreamå®Œæˆå¤šå›¾ä¸‹è½½çš„æ”¯æŒï¼Œä¸‹è½½å®Œæˆé€šè¿‡yield è¿”å›žç»™uiè§£ç æœ€ç»ˆæ˜¾ç¤ºã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273MultiImageStreamCompleter`æ”¯æŒå¤šå›¾åŠ è½½ç»§æ‰¿è‡ª`ImageStreamCompleter/// An ImageStreamCompleter with support for loading multiple images.class MultiImageStreamCompleter extends ImageStreamCompleter &#123; /// The constructor to create an MultiImageStreamCompleter. The [codec] /// should be a stream with the images that should be shown. The /// [chunkEvents] should indicate the [ImageChunkEvent]s of the first image /// to show. MultiImageStreamCompleter(&#123; @required Stream&lt;ui.Codec&gt; codec, @required double scale, Stream&lt;ImageChunkEvent&gt; chunkEvents, InformationCollector informationCollector, &#125;) : assert(codec != null), _informationCollector = informationCollector, _scale = scale &#123; /// æ˜¾ç¤ºé€»è¾‘ codec.listen((event) &#123; if (_timer != null) &#123; _nextImageCodec = event; &#125; else &#123; _handleCodecReady(event); &#125; &#125;, onError: (dynamic error, StackTrace stack) &#123; reportError( context: ErrorDescription('resolving an image codec'), exception: error, stack: stack, informationCollector: informationCollector, silent: true, ); &#125;); /// ... &#125; &#125; /// å¤„ç†è§£ç å®Œæˆ void _handleCodecReady(ui.Codec codec) &#123; _codec = codec; assert(_codec != null); if (hasListeners) &#123; _decodeNextFrameAndSchedule(); &#125; &#125; /// è§£ç ä¸‹ä¸€å¸§å¹¶ç»˜åˆ¶ Future&lt;void&gt; _decodeNextFrameAndSchedule() async &#123; try &#123; _nextFrame = await _codec.getNextFrame(); &#125; catch (exception, stack) &#123; reportError( context: ErrorDescription('resolving an image frame'), exception: exception, stack: stack, informationCollector: _informationCollector, silent: true, ); return; &#125; if (_codec.frameCount == 1) &#123; // ImageStreamCompleter listeners removed while waiting for next frame to // be decoded. // There's no reason to emit the frame without active listeners. if (!hasListeners) &#123; return; &#125; // This is not an animated image, just return it and don't schedule more // frames. _emitFrame(ImageInfo(image: _nextFrame.image, scale: _scale)); return; &#125; _scheduleAppFrame(); &#125;&#125; è¿™é‡Œåšäº†æ˜¾ç¤ºé€»è¾‘ï¼Œå’Œæœ€ç»ˆè½¬åŒ–æˆflutterä¸Šå¸§çš„å¤„ç†ï¼Œ_scheduleAppFrameå®Œæˆå‘é€å¸§çš„å¤„ç† ä¸‹è½½&amp;ç¼“å­˜ä¸Šè¾¹çš„mngrè°ƒç”¨äº†ImageCacheManagerä¸­çš„getImageFileæ–¹æ³•çŽ°åœ¨å°±åˆ°äº†flutter_cache_managerè¿™ä¸ªä¸‰æ–¹åº“å½“ä¸­ï¼Œå®ƒæ˜¯è¢«éšå¼ä¾èµ–çš„ï¼Œæ–‡ä»¶æ˜¯image_cache_manager.dart 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586mixin ImageCacheManager on BaseCacheManager &#123; Stream&lt;FileResponse&gt; getImageFile( String url, &#123; String key, Map&lt;String, String&gt; headers, bool withProgress, int maxHeight, int maxWidth, &#125;) async* &#123; if (maxHeight == null &amp;&amp; maxWidth == null) &#123; yield* getFileStream(url, key: key, headers: headers, withProgress: withProgress); return; &#125; /// ... &#125; /// ...&#125;getFileStream`æ–¹æ³•å®žçŽ°åœ¨å­ç±»`cache_manager.dart`æ–‡ä»¶ä¸­çš„`CacheManagerclass CacheManager implements BaseCacheManager &#123; /// ç¼“å­˜ç®¡ç† CacheStore _store; /// Get the underlying store helper CacheStore get store =&gt; _store; /// ä¸‹è½½ç®¡ç† WebHelper _webHelper; /// Get the underlying web helper WebHelper get webHelper =&gt; _webHelper; /// ä»Žä¸‹è½½æˆ–è€…ç¼“å­˜è¯»å–fileè¿”å›žstream @override Stream&lt;FileResponse&gt; getFileStream(String url, &#123;String key, Map&lt;String, String&gt; headers, bool withProgress&#125;) &#123; key ??= url; final streamController = StreamController&lt;FileResponse&gt;(); _pushFileToStream( streamController, url, key, headers, withProgress ?? false); return streamController.stream; &#125; Future&lt;void&gt; _pushFileToStream(StreamController streamController, String url, String key, Map&lt;String, String&gt; headers, bool withProgress) async &#123; key ??= url; FileInfo cacheFile; try &#123; /// ç¼“å­˜åˆ¤æ–­ cacheFile = await getFileFromCache(key); if (cacheFile != null) &#123; /// æœ‰ç¼“å­˜ç›´æŽ¥è¿”å›ž streamController.add(cacheFile); withProgress = false; &#125; &#125; catch (e) &#123; print( 'CacheManager: Failed to load cached file for $url with error:\n$e'); &#125; /// æ²¡æœ‰ç¼“å­˜æˆ–è€…è¿‡æœŸä¸‹è½½ if (cacheFile == null || cacheFile.validTill.isBefore(DateTime.now())) &#123; try &#123; await for (var response in _webHelper.downloadFile(url, key: key, authHeaders: headers)) &#123; if (response is DownloadProgress &amp;&amp; withProgress) &#123; streamController.add(response); &#125; if (response is FileInfo) &#123; streamController.add(response); &#125; &#125; &#125; catch (e) &#123; assert(() &#123; print( 'CacheManager: Failed to download file from $url with error:\n$e'); return true; &#125;()); if (cacheFile == null &amp;&amp; streamController.hasListener) &#123; streamController.addError(e); &#125; &#125; &#125; unawaited(streamController.close()); &#125;&#125; ç¼“å­˜åˆ¤æ–­é€»è¾‘åœ¨CacheStoreæä¾›ä¸¤çº§ç¼“å­˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263class CacheStore &#123; Duration cleanupRunMinInterval = const Duration(seconds: 10); /// æœªä¸‹è½½å®Œæˆç¼“å­˜ final _futureCache = &lt;String, Future&lt;CacheObject&gt;&gt;&#123;&#125;; /// å·²ä¸‹è½½å®Œç¼“å­˜ final _memCache = &lt;String, CacheObject&gt;&#123;&#125;; /// ... Future&lt;FileInfo&gt; getFile(String key, &#123;bool ignoreMemCache = false&#125;) async &#123; final cacheObject = await retrieveCacheData(key, ignoreMemCache: ignoreMemCache); if (cacheObject == null || cacheObject.relativePath == null) &#123; return null; &#125; final file = await fileSystem.createFile(cacheObject.relativePath); return FileInfo( file, FileSource.Cache, cacheObject.validTill, cacheObject.url, ); &#125; Future&lt;void&gt; putFile(CacheObject cacheObject) async &#123; _memCache[cacheObject.key] = cacheObject; await _updateCacheDataInDatabase(cacheObject); &#125; Future&lt;CacheObject&gt; retrieveCacheData(String key, &#123;bool ignoreMemCache = false&#125;) async &#123; /// åˆ¤æ–­æ˜¯å¦å·²ç¼“å­˜è¿‡ if (!ignoreMemCache &amp;&amp; _memCache.containsKey(key)) &#123; if (await _fileExists(_memCache[key])) &#123; return _memCache[key]; &#125; &#125; /// æœªç¼“å­˜çš„ å·²åŠ å…¥futureCacheä¸­çš„keyç›´æŽ¥è¿”å›ž if (!_futureCache.containsKey(key)) &#123; final completer = Completer&lt;CacheObject&gt;(); /// æœªåŠ å…¥çš„æ·»åŠ åˆ°futureCache unawaited(_getCacheDataFromDatabase(key).then((cacheObject) async &#123; if (cacheObject != null &amp;&amp; !await _fileExists(cacheObject)) &#123; final provider = await _cacheInfoRepository; await provider.delete(cacheObject.id); cacheObject = null; &#125; _memCache[key] = cacheObject; completer.complete(cacheObject); unawaited(_futureCache.remove(key)); &#125;)); _futureCache[key] = completer.future; &#125; return _futureCache[key]; &#125; /// ... /// æ›´æ–°åˆ°æ•°æ®åº“ Future&lt;dynamic&gt; _updateCacheDataInDatabase(CacheObject cacheObject) async &#123; final provider = await _cacheInfoRepository; return provider.updateOrInsert(cacheObject); &#125;&#125; _cacheInfoRepositoryç¼“å­˜ä»“åº“æ˜¯CacheObjectProviderä½¿ç”¨çš„æ•°æ®åº“ç¼“å­˜å¯¹è±¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172class CacheObjectProvider extends CacheInfoRepository with CacheInfoRepositoryHelperMethods &#123; Database db; String _path; String databaseName; CacheObjectProvider(&#123;String path, this.databaseName&#125;) : _path = path; /// æ‰“å¼€ @override Future&lt;bool&gt; open() async &#123; if (!shouldOpenOnNewConnection()) &#123; return openCompleter.future; &#125; var path = await _getPath(); await File(path).parent.create(recursive: true); db = await openDatabase(path, version: 3, onCreate: (Database db, int version) async &#123; await db.execute(''' create table $_tableCacheObject ( $&#123;CacheObject.columnId&#125; integer primary key, $&#123;CacheObject.columnUrl&#125; text, $&#123;CacheObject.columnKey&#125; text, $&#123;CacheObject.columnPath&#125; text, $&#123;CacheObject.columnETag&#125; text, $&#123;CacheObject.columnValidTill&#125; integer, $&#123;CacheObject.columnTouched&#125; integer, $&#123;CacheObject.columnLength&#125; integer ); create unique index $_tableCacheObject$&#123;CacheObject.columnKey&#125; ON $_tableCacheObject ($&#123;CacheObject.columnKey&#125;); '''); &#125;, onUpgrade: (Database db, int oldVersion, int newVersion) async &#123; /// ... return opened(); &#125; @override Future&lt;dynamic&gt; updateOrInsert(CacheObject cacheObject) &#123; if (cacheObject.id == null) &#123; return insert(cacheObject); &#125; else &#123; return update(cacheObject); &#125; &#125; @override Future&lt;CacheObject&gt; insert(CacheObject cacheObject, &#123;bool setTouchedToNow = true&#125;) async &#123; var id = await db.insert( _tableCacheObject, cacheObject.toMap(setTouchedToNow: setTouchedToNow), ); return cacheObject.copyWith(id: id); &#125; @override Future&lt;CacheObject&gt; get(String key) async &#123; List&lt;Map&gt; maps = await db.query(_tableCacheObject, columns: null, where: '$&#123;CacheObject.columnKey&#125; = ?', whereArgs: [key]); if (maps.isNotEmpty) &#123; return CacheObject.fromMap(maps.first.cast&lt;String, dynamic&gt;()); &#125; return null; &#125; @override Future&lt;int&gt; delete(int id) &#123; return db.delete(_tableCacheObject, where: '$&#123;CacheObject.columnId&#125; = ?', whereArgs: [id]); &#125;&#125; å¯è§æ•°æ®åº“ç¼“å­˜çš„æ˜¯CacheObjectå¯¹è±¡ï¼Œä¿å­˜äº†urlã€keyã€relativePathç­‰ä¿¡æ¯ 12345678910class CacheObject &#123; static const columnId = '_id'; static const columnUrl = 'url'; static const columnKey = 'key'; static const columnPath = 'relativePath'; static const columnETag = 'eTag'; static const columnValidTill = 'validTill'; static const columnTouched = 'touched'; static const columnLength = 'length';&#125; æ²¡æœ‰ç¼“å­˜ä¸‹è°ƒç”¨äº†_webHelper.downloadFileæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130class WebHelper &#123; WebHelper(this._store, FileService fileFetcher) : _memCache = &#123;&#125;, fileFetcher = fileFetcher ?? HttpFileService(); final CacheStore _store; @visibleForTesting final FileService fileFetcher; final Map&lt;String, BehaviorSubject&lt;FileResponse&gt;&gt; _memCache; final Queue&lt;QueueItem&gt; _queue = Queue(); ///Download the file from the url Stream&lt;FileResponse&gt; downloadFile(String url, &#123;String key, Map&lt;String, String&gt; authHeaders, bool ignoreMemCache = false&#125;) &#123; key ??= url; if (!_memCache.containsKey(key) || ignoreMemCache) &#123; var subject = BehaviorSubject&lt;FileResponse&gt;(); _memCache[key] = subject; /// ä¸‹è½½æˆ–è€…åŠ å…¥é˜Ÿåˆ— unawaited(_downloadOrAddToQueue(url, key, authHeaders)); &#125; return _memCache[key].stream; &#125; Future&lt;void&gt; _downloadOrAddToQueue( String url, String key, Map&lt;String, String&gt; authHeaders, ) async &#123; //å¦‚æžœå¤ªå¤šè¯·æ±‚è¢«æ‰§è¡Œï¼ŒåŠ å…¥é˜Ÿåˆ—ç­‰å¾… if (concurrentCalls &gt;= fileFetcher.concurrentFetches) &#123; _queue.add(QueueItem(url, key, authHeaders)); return; &#125; concurrentCalls++; var subject = _memCache[key]; try &#123; await for (var result in _updateFile(url, key, authHeaders: authHeaders)) &#123; subject.add(result); &#125; &#125; catch (e, stackTrace) &#123; subject.addError(e, stackTrace); &#125; finally &#123; concurrentCalls--; await subject.close(); _memCache.remove(key); _checkQueue(); &#125; &#125; ///ä¸‹è½½èµ„æº Stream&lt;FileResponse&gt; _updateFile(String url, String key, &#123;Map&lt;String, String&gt; authHeaders&#125;) async* &#123; var cacheObject = await _store.retrieveCacheData(key); cacheObject = cacheObject == null ? CacheObject(url, key: key) : cacheObject.copyWith(url: url); /// è¯·æ±‚å¾—åˆ°response final response = await _download(cacheObject, authHeaders); yield* _manageResponse(cacheObject, response); &#125; Stream&lt;FileResponse&gt; _manageResponse( CacheObject cacheObject, FileServiceResponse response) async* &#123; /// ... if (statusCodesNewFile.contains(response.statusCode)) &#123; int savedBytes; await for (var progress in _saveFile(newCacheObject, response)) &#123; savedBytes = progress; yield DownloadProgress( cacheObject.url, response.contentLength, progress); &#125; newCacheObject = newCacheObject.copyWith(length: savedBytes); &#125; /// åŠ å…¥ç¼“å­˜ unawaited(_store.putFile(newCacheObject).then((_) &#123; if (newCacheObject.relativePath != oldCacheObject.relativePath) &#123; _removeOldFile(oldCacheObject.relativePath); &#125; &#125;)); final file = await _store.fileSystem.createFile( newCacheObject.relativePath, ); yield FileInfo( file, FileSource.Online, newCacheObject.validTill, newCacheObject.url, ); &#125; Stream&lt;int&gt; _saveFile(CacheObject cacheObject, FileServiceResponse response) &#123; var receivedBytesResultController = StreamController&lt;int&gt;(); unawaited(_saveFileAndPostUpdates( receivedBytesResultController, cacheObject, response, )); return receivedBytesResultController.stream; &#125; Future _saveFileAndPostUpdates( StreamController&lt;int&gt; receivedBytesResultController, CacheObject cacheObject, FileServiceResponse response) async &#123; /// æ ¹æ®è·¯å¾„åˆ›å»ºfile final file = await _store.fileSystem.createFile(cacheObject.relativePath); try &#123; var receivedBytes = 0; /// å†™æ–‡ä»¶ final sink = file.openWrite(); await response.content.map((s) &#123; receivedBytes += s.length; receivedBytesResultController.add(receivedBytes); return s; &#125;).pipe(sink); &#125; catch (e, stacktrace) &#123; receivedBytesResultController.addError(e, stacktrace); &#125; await receivedBytesResultController.close(); &#125;&#125; æ€»ç»“cached_network_imageå›¾ç‰‡åŠ è½½æµç¨‹ä¾èµ–ImageProviderï¼Œç¼“å­˜å’Œä¸‹è½½é€»è¾‘æ”¾åœ¨å¦ä¸€ä¸ªåº“flutter_cache_managerä¸‹è½½æ–‡ä»¶åœ¨WebHelperä¸­æä¾›é˜Ÿåˆ—ç®¡ç†ï¼Œä¾èµ–ä¼ å…¥FileServiceåšå…·ä½“èŽ·å–æ–‡ä»¶æ–¹ä¾¿æ‰©å±•é»˜è®¤å®žçŽ°HttpFileServiceï¼Œä¸‹è½½å®ŒæˆåŽè·¯å¾„ä¿å­˜åœ¨CacheObjectä¿å­˜åœ¨sqfliteæ•°æ®åº“]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åŒ—äº¬çŽ¯çƒå½±åŸŽæ¸¸çŽ©æ”»ç•¥]]></title>
    <url>%2Fposts%2Fcf2918cf.html</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šæ‰¹åˆ¤æ€§æ€ç»´ã€‹éšç¬”è®°]]></title>
    <url>%2Fposts%2F7bd80167.html</url>
    <content type="text"><![CDATA[Why?ç„¶è€Œåœ¨è¿™æ ·ä¸€ä¸ªä¿¡æ¯è¿‡è½½çš„æ—¶ä»£é‡Œï¼Œå½¢å½¢è‰²è‰²çš„å£°éŸ³ä¸Žè§‚ç‚¹é±¼é¾™æ··æ‚ã€‚ç”Ÿæ´»åœ¨ä¿¡æ¯æ´ªæµä¸­çš„æˆ‘ä»¬ï¼Œåº”è¯¥å¦‚ä½•é¿å…éšæ³¢é€æµï¼Œåšåˆ°çœŸæ­£çš„ç‹¬ç«‹æ€è€ƒï¼Ÿ æˆ–è®¸å¯ä»¥äº†è§£ä¸€ä¸‹â€œCriticalThinkingâ€â€”â€”ã€Œæ‰¹åˆ¤æ€§æ€ç»´ã€ã€‚ What?æ‰¹åˆ¤æ€§æ€ç»´æ˜¯ä»¥ä¸€ç§åˆç†çš„ã€åæ€çš„ã€å¿ƒçµå¼€æ”¾çš„æ–¹å¼è¿›è¡Œæ€è€ƒï¼Œä»Žè€Œèƒ½å¤Ÿæ¸…æ™°å‡†ç¡®åœ°è¡¨è¾¾ã€é€»è¾‘ä¸¥è°¨åœ°æŽ¨ç†ã€åˆç†åœ°è®ºè¯ï¼Œä»¥åŠåŸ¹å…»æ€è¾¨ç²¾ç¥žã€‚ åœ¨æ‰¹åˆ¤æ€§æ€ç»´çš„æƒ…æ„Ÿå€¾å‘æ–¹é¢ï¼Œç§‘å—ç‰¹(Jï¼ŽKurland)äºŽ1995å¹´æå‡ºï¼šæ‰¹åˆ¤æ€§æ€ç»´ä¸Žè¿‡åˆ†æƒ…æ„Ÿä¸»ä¹‰ã€æ™ºåŠ›æ‡’æƒ°å’Œå°é—­æ€ç»´ç›¸åï¼Œå®ƒå…³æ³¨è¯æ®ã€æ™ºåŠ›ã€è¯šå®žå’Œå¼€æ”¾æ€ç»´ã€‚å› æ­¤æ‰¹åˆ¤æ€§æ€ç»´å¼ºè°ƒä¾é è¯æ®è€Œéžæƒ…æ„Ÿï¼Œå…¨é¢è€ƒè™‘å„ç§å¯èƒ½çš„è§‚ç‚¹å’Œè§£é‡Šï¼Œè­¦æƒ•ä¸ªäººåŠ¨æœºå’Œåè§çš„å½±å“ï¼Œæ›´å…³æ³¨å¯»æ±‚çœŸç†ï¼Œä¸æ‹’ç»éžæµè¡Œçš„è§‚ç‚¹ï¼Œæ„è¯†åˆ°è‡ªå·±çš„åè§ã€æ­§è§†ï¼Œè‡ªè§‰é¿å…æˆ–å‡å°‘è¿™äº›åè§å¯¹åˆ¤æ–­çš„å½±å“ã€‚æ­¤å¤–ï¼Œå…·æœ‰æ‰¹åˆ¤æ€§æ€ç»´å¹¶ä¸æ„å‘³ç€æ€»æ˜¯å¯¹ä»»ä½•äººå’Œä»»ä½•äº‹æŒå¦å®šæ€åº¦å’Œå¹æ¯›æ±‚ç–µï¼Œæ‰¹åˆ¤ç²¾ç¥žæ„å‘³ç€æ•é”çš„æ€ç»´ã€å¥½å¥‡çš„æŽ¢ç©¶ã€å¯¹æŽ¨ç†çš„çƒ­æƒ…ã€å¯¹å¯é ä¿¡æ¯çš„æ¸´æœ›ã€‚ How?å½“æˆ‘ä»¬é¢å¯¹å¤–ç•Œä¿¡æ¯æˆ–æ˜¯ä»–äººçš„è®ºè¯æ—¶ï¼Œå¯ä»¥åœ¨è„‘æµ·é‡Œæ€è€ƒè¿™äº›é—®é¢˜ï¼š å‡†ç¡®åœ°è¯´, å®ƒçš„ä¸­å¿ƒè®®é¢˜å’Œè§‚ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ æˆ‘å…¨éƒ¨åŒæ„ã€éƒ¨åˆ†åŒæ„è¿˜æ˜¯ä¸è®¤åŒå®ƒçš„è§‚ç‚¹ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ å®ƒçš„ç»“è®ºå®žé™…ä¸Šæ˜¯å»ºç«‹åœ¨æŸç§å‡è®¾ä¸Šå—ï¼Ÿå¦‚æžœæ˜¯ï¼Œè¿™å‡è®¾åˆç†å—ï¼Ÿ å®ƒçš„ç»“è®ºæ˜¯å¦ä»…åœ¨æŸäº›æ¡ä»¶ä¸‹æœ‰æ•ˆï¼Œå¦‚æžœæ˜¯ï¼Œé‚£æ˜¯ä»€ä¹ˆï¼Ÿ æˆ‘éœ€è¦é™å®šæˆ–è§£é‡Šè®ºè¿°ä¸­çš„å…³é”®è¯è¯­çš„æ„æ€å—ï¼Ÿ ä»€ä¹ˆæ ·çš„ç†ç”±æ”¯æŒæˆ‘é‡‡å–è¿™æ ·çš„ç«‹åœºï¼Ÿ å¯¹æ–¹ä¼šç”¨ä»€ä¹ˆæ ·çš„ç†ç”±æ¥åé©³æˆ–å‰Šå¼±æˆ‘çš„ç«‹åœºï¼Ÿ æˆ‘è¯¥æ€Žæ ·æ‰¿è®¤æˆ–åé©³ä»–ä»¬çš„è§‚ç‚¹ï¼Ÿ å½“æˆ‘ä»¬éœ€è¦è¡¨è¾¾è‡ªå·±çš„è§‚ç‚¹ã€å»ºæž„è‡ªå·±çš„è®ºè¯æ—¶ï¼Œå¯ä»¥éµå¾ªä»¥ä¸‹çš„æ–¹æ³•ï¼š ç¡®å®šé—®é¢˜ï¼Œç†æ¸…æ¦‚å¿µï¼Œæœ‰ç›®çš„æ€§æ€è€ƒï¼› é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæ˜Žç¡®æœ‰å“ªäº›ä¸åŒè§’åº¦çš„è®ºç‚¹å’Œçœ‹æ³•ï¼ˆè¿™äº›è§’åº¦æœ‰ä½•ä¸åŒï¼Ÿæ˜¯å¦å­˜åœ¨ç›¸åº”çš„ç†è®ºæˆ–æ¡†æž¶ï¼Ÿå¦‚ä½•åˆ©ç”¨è¿™äº›ä¸åŒçš„è§‚ç‚¹æ¥è§£é‡Šé—®é¢˜ï¼Ÿï¼‰ï¼› ä»Žä¸åŒçš„è§’åº¦ã€æ­£åä¸¤æ–¹é¢æ¥è¯„ä¼°è®ºç‚¹å’Œè®ºæ®ï¼ˆä¿¡æ¯æ˜¯å¦å¯é ï¼Ÿæ˜¯å¦åˆ‡é¢˜ã€ç›¸å…³ï¼Ÿæ˜¯å¦å……è¶³ï¼Œæ˜¯å¦å­˜åœ¨åè§æˆ–ä¸åˆç†çš„éšå«å‡è®¾ç­‰ï¼‰ï¼› ç»¼åˆä¸åŒè§’åº¦çš„æ€è€ƒï¼Œå¾—å‡ºè‡ªå·±çš„ç»“è®ºï¼ˆå¹¶åæ€è‡ªå·±çš„ç†ç”±æ˜¯å¦ç›¸å…³ã€å……è¶³ï¼Ÿæ˜¯å¦å­˜åœ¨åè§ï¼Ÿæœ‰ä½•ä¼˜åŠ¿å’ŒåŠ£åŠ¿ç­‰ï¼‰ã€‚]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter 2.5 é‡å¤§æ”¹ç‰ˆå‘å¸ƒ]]></title>
    <url>%2Fposts%2F1a5e05d8.html</url>
    <content type="text"><![CDATA[åŽŸæ–‡é“¾æŽ¥ medium.com/flutter/whaâ€¦ Flutter 2.5 æ˜¯ Flutter ç‰ˆæœ¬åŽ†å²ä¸ŠæŽ’åç¬¬äºŒçš„å¤§ç‰ˆæœ¬æ›´æ–°ï¼Œè¯¥ç‰ˆæœ¬ï¼š å…³é—­äº† 4600 ä¸ª issuesï¼› åˆå¹¶äº† 252 contributors å’Œ 216 reviewers çš„ 3932 ä¸ª PRï¼› å›žé¡¾è¿‡åŽ»ä¸€å¹´ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ 1337 ä½ contributors åˆ›å»ºäº† 21,072 ä¸ª PR è¿™æ ·åºžå¤§çš„æ•°æ®ï¼Œå…¶ä¸­æœ‰15,172 ä¸ªè¢«åˆå¹¶ã€‚ äº‹å®žä¸Šè¯¥ç‰ˆæœ¬ä¾ç„¶æ˜¯å¯¹æ€§èƒ½å’Œå¼€å‘å·¥å…·è¿›è¡Œäº†æ”¹è¿›ï¼ŒåŒæ—¶è¿˜æœ‰å¢žåŠ è®¸å¤šæ–°åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š å¯¹ Android çš„å…¨å±æ”¯æŒã€æ›´å¤š Material Youï¼ˆä¹Ÿç§°ä¸º v3ï¼‰æ”¯æŒï¼› æ›´æ–°æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ä»¥æ”¯æŒå¯åˆ‡æ¢çš„é”®ç›˜å¿«æ·é”®ï¼› Widget Inspector å¯æŸ¥é˜…æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼› Visual Studio Code é¡¹ç›®ä¸­å¯¹æ·»åŠ ä¾èµ–é¡¹å¢žåŠ æ–°çš„æ”¯æŒï¼› IntelliJ/Android Studio ä¸­æ–°å¢žæµ‹è¯•è¿è¡ŒèŽ·å–è¦†ç›–çŽ‡ä¿¡æ¯ï¼› ä¸€ä¸ªå…¨æ–°çš„åº”ç”¨ç¨‹åºæ¨¡æ¿ï¼Œä¸º Flutter åº”ç”¨ç¨‹åºæä¾›æ›´å¥½çš„å¼€å‘åŸºç¡€ï¼› æ€§èƒ½ï¼šiOS ç€è‰²å™¨é¢„çƒ­ã€å¼‚æ­¥ä»»åŠ¡ã€GC å’Œæ¶ˆæ¯ä¼ é€’#25644 ä¸­çš„ç¬¬ä¸€ä¸ª PR å°±æ˜¯ç”¨äºŽç¦»çº¿è®­ç»ƒè¿è¡Œ Metal ç€è‰²å™¨é¢„ç¼–è¯‘ï¼Œå¦‚åŸºå‡†æµ‹è¯•æ‰€ç¤ºï¼Œå®ƒå°†æœ€åæƒ…å†µçš„å¸§å…‰æ …åŒ–æ—¶é—´å‡å°‘äº† 2/3 ç§’ï¼Œå°†ç¬¬ 99 ä¸ªç™¾åˆ†ä½å¸§å‡å°‘äº†ä¸€åŠã€‚ ç„¶è€Œç€è‰²å™¨é¢„çƒ­åªæ˜¯å¡é¡¿çš„æ¥æºä¹‹ä¸€ï¼Œåœ¨ä¹‹å‰çš„ç‰ˆæœ¬å¤„ç†æ¥è‡ªç½‘ç»œã€æ–‡ä»¶ç³»ç»Ÿã€æ’ä»¶æˆ–å…¶ä»– isolate çš„å¼‚æ­¥äº‹ä»¶éƒ½å¯èƒ½ä¼šä¸­æ–­åŠ¨ç”»ï¼Œè¿™æ˜¯å¦ä¸€ä¸ªå¡é¡¿çš„æ¥æºã€‚ æ‰€ä»¥ #25789 æ”¹è¿›äº†è°ƒåº¦ç­–ç•¥ï¼Œåœ¨æ­¤ç‰ˆæœ¬ isolate çš„ UI äº‹ä»¶å¾ªçŽ¯é‡Œï¼Œå¸§å¤„ç†çŽ°åœ¨ä¼˜å…ˆäºŽå¤„ç†å…¶ä»–å¼‚æ­¥äº‹ä»¶ï¼Œä»Žè€Œåœ¨æµ‹è¯•ä¸­æ¶ˆé™¤äº†æ­¤ç±»çš„å¡é¡¿ã€‚ å¦ä¸€ä¸ªå¯¼è‡´å¡é¡¿çš„åŽŸå› æ˜¯åžƒåœ¾æ”¶é›†å™¨ (GC) æš‚åœ UI çº¿ç¨‹ä»¥å›žæ”¶å†…å­˜ã€‚ ä»¥å‰æŸäº›å›¾åƒçš„å†…å­˜åœ¨å“åº” Dart VM çš„ GC æ‰§è¡Œæ—¶ä¼šå»¶è¿Ÿå›žæ”¶ï¼Œä½œä¸ºæ—©æœŸç‰ˆæœ¬ä¸­çš„è§£å†³æ–¹æ³•ï¼ŒFlutter å¼•æ“Žä¼šé€šè¿‡ Dart VM çš„ GC å›žæ”¶æš—ç¤ºå›¾åƒå†…å­˜å¯ä»¥å›žæ”¶ï¼Œè¿™åœ¨ç†è®ºä¸Šå¯ä»¥å®žçŽ°äº†æ›´åŠæ—¶çš„å†…å­˜å›žæ”¶ã€‚ ä¸å¹¸çš„æ˜¯è¿™ä¹Ÿå¯¼è‡´äº†å¤ªå¤šçš„ä¸»è¦ GCï¼Œå¹¶ä¸”æœ‰æ—¶ä»ç„¶æ— æ³•è¶³å¤Ÿå¿«åœ°å›žæ”¶å†…å­˜ï¼Œä»¥é¿å…å†…å­˜å—é™è®¾å¤‡ä¸Šçš„ä½Žå†…å­˜æƒ…å†µï¼Œè€Œåœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­æœªä½¿ç”¨çš„å›¾åƒçš„å†…å­˜è¢«æ€¥åˆ‡åœ°å›žæ”¶ï¼ˆ#26219ã€#82883ã€#84740ï¼‰ï¼Œå¤§å¤§å‡å°‘äº† GCã€‚ ä¾‹å¦‚åœ¨ä¸€é¡¹æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œæ’­æ”¾ 20 ç§’åŠ¨ç”» GIF ä»Žéœ€è¦ 400 å¤šæ¬¡ GC å˜ä¸ºåªéœ€è¦ 4 æ¬¡ï¼Œæ›´å°‘çš„ä¸»è¦ GC æ„å‘³ç€æ¶‰åŠå›¾åƒå‡ºçŽ°å’Œæ¶ˆå¤±çš„åŠ¨ç”»å°†å‡å°‘å¡é¡¿ï¼Œå¹¶æ¶ˆè€—æ›´å°‘çš„ CPU å’ŒåŠŸçŽ‡ã€‚ Flutter 2.5 çš„å¦ä¸€ä¸ªæ€§èƒ½æ”¹è¿›æ˜¯åœ¨ Dart å’Œ Objective-C/Swift (iOS) æˆ– Dart å’Œ Java/Kotlin (Android) ä¹‹é—´å‘é€æ¶ˆæ¯æ—¶çš„å»¶è¿Ÿã€‚ é€šå¸¸ä½œä¸ºè°ƒæ•´ æ¶ˆæ¯é¢‘é“çš„ä¸€éƒ¨åˆ†ï¼Œä»Žæ¶ˆæ¯ç¼–è§£ç å™¨ä¸­åˆ é™¤ä¸å¿…è¦çš„å‰¯æœ¬å¯å°†å»¶è¿Ÿå‡å°‘é«˜è¾¾ 50% ï¼Œå½“ç„¶å…·ä½“å–å†³äºŽæ¶ˆæ¯å¤§å°å’Œè®¾å¤‡ï¼ˆ#25988ï¼Œ#26331ï¼‰ã€‚ ä½ å¯ä»¥åœ¨æ­¤é“¾æŽ¥èŽ·å–åˆ°æ›´å¤šå…³äºŽå¹³å°é€šé“æ€§èƒ½çš„ä¿¡æ¯ï¼š medium.com/flutter/impâ€¦ Dart 2.14ï¼šæ ¼å¼ã€è¯­è¨€ç‰¹æ€§ã€å‘å¸ƒå’Œ linting å¼€ç®±å³ç”¨æ­¤ç‰ˆæœ¬çš„ Flutter å’Œ Dart 2.14 ä¸€èµ·å‘å¸ƒã€‚ æ–°ç‰ˆæœ¬çš„ Dart å¸¦æœ‰æ–°çš„æ ¼å¼ï¼Œä½¿çº§è” æ›´åŠ æ¸…æ™°ï¼Œæ–°çš„ pub æ”¯æŒå¿½ç•¥æ–‡ä»¶ï¼Œä»¥åŠæ–°çš„è¯­è¨€åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä¸‰é‡ç§»ä½è¿ç®—ç¬¦çš„å›žå½’ã€‚ æ­¤å¤– Dart 2.14 åˆ›å»ºäº†ä¸€ç»„æ ‡å‡†çš„ lintï¼Œåœ¨æ–°çš„ Dart å’Œ Flutter é¡¹ç›®ä¹‹é—´å…±äº«ï¼Œå¼€ç®±å³ç”¨ã€‚ å¼€å‘è€…ä¸ä»…ä¼šåœ¨åˆ›å»ºæ–°çš„ Dart æˆ– Flutter é¡¹ç›®æ—¶èŽ·å¾—è¿™äº› lintï¼Œè€Œä¸”åªéœ€å‡ ä¸ªæ­¥éª¤å°±å¯ä»¥å°†ç›¸åŒçš„åˆ†æžæ·»åŠ åˆ°çŽ°æœ‰åº”ç”¨ç¨‹åºä¸­ã€‚ åˆå¹¶è¿ç§»lintï¼šflutter.dev/docs/releasâ€¦ æœ‰å…³è¿™äº› lint çš„è¯¦ç»†ä¿¡æ¯ã€æ–°è¯­è¨€åŠŸèƒ½ç­‰ï¼Œè¯·æŸ¥çœ‹ medium.com/dartlang/anâ€¦ Frameworkï¼šAndroid å…¨å±ã€Material You &amp; æ–‡æœ¬ç¼–è¾‘å¿«æ·æ–¹å¼ä»Ž #81303 å¼€å§‹, æˆ‘ä»¬ä¿®å¤äº† Android ä¸€ç³»åˆ—ä¸Žå…¨å±æ¨¡å¼ç›¸å…³çš„é—®é¢˜ï¼Œæ­¤æ›´æ”¹è¿˜æ·»åŠ äº†ä¸€ç§åœ¨å…¶ä»–æ¨¡å¼ä¸‹æ”¶å¬å…¨å±æ›´æ”¹çš„æ–¹æ³•ã€‚ ä¾‹å¦‚ç”¨æˆ·ä¸Žåº”ç”¨äº’åŠ¨æ—¶ï¼Œå½“ç³»ç»Ÿ UI è¿”å›žæ—¶ï¼Œå¼€å‘äººå‘˜çŽ°åœ¨å¯ä»¥ç¼–å†™ä»£ç åœ¨è¿”å›žå…¨å±æ—¶æ‰§è¡Œå…¶ä»–æ“ä½œã€‚ æ–°çš„ Android å…¨å±æ¨¡å¼ï¼šæ™®é€šæ¨¡å¼ï¼ˆå·¦ï¼‰ã€è¾¹åˆ°è¾¹æ¨¡å¼ï¼ˆä¸­ï¼‰ã€å¸¦æœ‰è‡ªå®šä¹‰ SystemUIOverlayStyle çš„è¾¹åˆ°è¾¹ï¼ˆå³ï¼‰ åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¯¹æ–° Material Youï¼ˆåˆå v3ï¼‰çš„è§„èŒƒå¢žåŠ äº†æ”¯æŒï¼ŒåŒ…æ‹¬å¯¹æµ®åŠ¨æ“ä½œæŒ‰é’®å¤§å°å’Œä¸»é¢˜çš„æ›´æ–°ï¼ˆ#86441ï¼‰ï¼Œåœ¨MaterialState.scrolledUnder å¯ä»¥ä½¿ç”¨ Demo ä¸­çš„ç¤ºä¾‹ä»£ç æŸ¥çœ‹çš„æ–°çŠ¶æ€ PR å¼ä¾‹ ( #79999 )ã€‚ æ–°çš„ MaterialState.scrolledUnder çŠ¶æ€åœ¨èµ·ä½œç”¨ å¦ä¸€ä¸ªæ”¹è¿›æ˜¯æ·»åŠ äº† scroll metrics notificationsï¼ˆ#85221ã€#85499ï¼‰ï¼Œå³ä½¿ç”¨æˆ·æ²¡æœ‰æ»šåŠ¨ï¼Œå®ƒä¹Ÿä¼šæä¾›å¯æ»šåŠ¨åŒºåŸŸçš„é€šçŸ¥ï¼Œä¾‹å¦‚ä¸‹é¢æ˜¾ç¤ºäº† ListView æ ¹æ®çš„åŸºç¡€å¤§å°é€‚å½“åœ°å‡ºçŽ°æˆ–æ¶ˆå¤±æ»šåŠ¨æ¡ï¼š åœ¨è¿™ç§æƒ…å†µä¸‹ä¸å¿…ç¼–å†™ä»»ä½•ä»£ç ï¼Œä½†å¦‚æžœæƒ³æ•èŽ· ScrollMetricNotification æ›´æ”¹ï¼Œåˆ™å¯ä»¥é€šè¿‡æ­¤ç›‘å¬æ¥å®Œæˆã€‚ ç‰¹åˆ«æ„Ÿè°¢ç¤¾åŒºè´¡çŒ®è€…xu-baoolinï¼Œä»–ä¸ºæ­¤ä»˜å‡ºäº†åŠªåŠ›å¹¶æå‡ºäº†ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚ å¦ä¸€ä¸ªå‡ºè‰²çš„ç¤¾åŒºè´¡çŒ®æ˜¯ä¸º ScaffoldMessenger ï¼Œ ä½ å¯èƒ½è¿˜è®°å¾— Flutter 2.0 å¼€å§‹ ScaffoldMessenger ä½œä¸ºä¸€ä¸ªæ›´å¼ºå¤§çš„æ–¹å¼æ¥æ˜¾ç¤º SnackBars ï¼Œ åœ¨å±å¹•çš„åº•éƒ¨ä¸ºç”¨æˆ·æä¾›é€šçŸ¥ï¼Œè€Œåœ¨ Flutter 2.5 ä¸­ï¼ŒçŽ°åœ¨å¯ä»¥åœ¨ Scaffold çš„é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªæ¨ªå¹…ï¼Œè¯¥æ¨ªå¹…ä¼šä¸€ç›´ä¿æŒåˆ°ç”¨æˆ·å…³é—­å®ƒä¸ºæ­¢ã€‚ åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡è°ƒç”¨ä»¥ä¸‹ showMaterialBanner æ–¹æ³•æ¥èŽ·å¾—æ­¤è¡Œä¸º ScaffoldMessenger ï¼š 1234567891011121314151617181920212223242526272829class HomePage extends StatelessWidget &#123; const HomePage(&#123;Key? key&#125;) : super(key: key); @override Widget build(BuildContext context) =&gt; Scaffold( appBar: AppBar( title: const Text('The MaterialBanner is below'), ), body: Center( child: ElevatedButton( child: const Text('Show MaterialBanner'), onPressed: () =&gt; ScaffoldMessenger.of(context).showMaterialBanner( MaterialBanner( content: const Text('Hello, I am a Material Banner'), leading: const Icon(Icons.info), backgroundColor: Colors.yellow, actions: [ TextButton( child: const Text('Dismiss'), onPressed: () =&gt; ScaffoldMessenger.of(context) .hideCurrentMaterialBanner(), ), ], ), ), ), ), );&#125;å¤åˆ¶ä»£ç  Material æŒ‡å—è§„å®š å¼€å‘è€…çš„åº”ç”¨æ¨ªå¹…ä¸€æ¬¡åªèƒ½æ˜¾ç¤ºä¸€ä¸ªï¼Œå› æ­¤å¦‚æžœä½ è°ƒç”¨å¤šæ¬¡ showMaterialBannerï¼ŒScaffoldMessenger å®ƒå°†ç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œåœ¨å‰ä¸€ä¸ªæ¨ªå¹…å·²è¢«å…³é—­ä¹‹åŽï¼Œå†æ˜¾ç¤ºä¸€ä¸ªæ–°æ¨ªå¹…ã€‚ æ„Ÿè°¢ Calamity210 å¯¹ Flutter ä¸­çš„ Material æ”¯æŒåšå‡ºäº†å¦‚æ­¤å‡ºè‰²çš„è¡¥å……ï¼ åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†æ–‡æœ¬ç¼–è¾‘é”®ç›˜å¿«æ·é”®å¯è¦†ç›–çš„åŠŸèƒ½ #85381ï¼Œè¿™æ˜¯åœ¨ Flutter 2.0 åŠå…¶æ–°çš„æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½çš„åŸºç¡€ä¸Šè¿›ä¸€æ­¥æž„å»ºï¼Œä¾‹å¦‚æ–‡æœ¬é€‰æ‹©ä»¥åŠèƒ½å¤Ÿåœ¨å¤„ç†é”®ç›˜äº‹ä»¶åŽåœæ­¢å®ƒçš„ä¼ æ’­ã€‚ å¦‚æžœæ‚¨å¸Œæœ› Ctrl-A æ‰§è¡Œä¸€äº›è‡ªå®šä¹‰æ“ä½œè€Œä¸æ˜¯é€‰æ‹©æ‰€æœ‰æ–‡æœ¬ã€‚ DefaultTextEditingShortcuts ç±»åŒ…å«æ¯ä¸ªå¹³å°ä¸Šå—æ”¯æŒçš„é”®ç›˜å¿«æ·é”®åˆ—è¡¨ï¼Œå¦‚æžœå¼€å‘è€…æƒ³è¦†ç›–ä»»ä½•å†…å®¹ï¼Œå¯ä»¥ä½¿ç”¨ Flutter çš„çŽ°æœ‰ Shortcuts å°†ä»»ä½•å¿«æ·æ–¹å¼é‡æ–°æ˜ å°„åˆ°çŽ°æœ‰æˆ–è‡ªå®šä¹‰æ„å›¾ã€‚ API å‚è€ƒ: api.flutter.dev/flutter/widâ€¦ æ’ä»¶ï¼šç›¸æœºã€å›¾åƒé€‰æ‹©å™¨å’Œ plus æ’ä»¶å¦ä¸€ä¸ªå…·æœ‰æœ‰å¾ˆå¤šæ”¹è¿›çš„æ’ä»¶æ˜¯ç›¸æœºæ’ä»¶ï¼š #3795 [ç›¸æœº] android-rework ç¬¬ 1 éƒ¨åˆ†ï¼šæ”¯æŒ Android ç›¸æœºåŠŸèƒ½çš„åŸºç±» #3796 [ç›¸æœº] android-rework ç¬¬ 2 éƒ¨åˆ†ï¼šAndroid è‡ªåŠ¨å¯¹ç„¦åŠŸèƒ½ #3797 [camera] android-rework part 3ï¼šAndroidæ›å…‰ç›¸å…³åŠŸèƒ½ #3798 [ç›¸æœº] android-rework ç¬¬ 4 éƒ¨åˆ†ï¼šAndroid é—ªå…‰å’Œå˜ç„¦åŠŸèƒ½ #3799 [ç›¸æœº] android-rework ç¬¬ 5 éƒ¨åˆ†ï¼šAndroid FPS èŒƒå›´ã€åˆ†è¾¨çŽ‡å’Œä¼ æ„Ÿå™¨æ–¹å‘åŠŸèƒ½ #4039 [ç›¸æœº] android-rework ç¬¬ 6 éƒ¨åˆ†ï¼šAndroid æ›å…‰å’Œç„¦ç‚¹åŠŸèƒ½ #4052 [camera] android-rework part 7ï¼šAndroidé™å™ªåŠŸèƒ½ #4054 [ç›¸æœº] android-rework ç¬¬ 8 éƒ¨åˆ†ï¼šæœ€ç»ˆå®žçŽ°çš„æ”¯æŒæ¨¡å— #4010 [camera] åœ¨ iOS ä¸Šä¸è§¦å‘è®¾å¤‡æ–¹å‘ #4158 [ç›¸æœº] ä¿®å¤åæ ‡æ—‹è½¬ä»¥åœ¨ iOS ä¸Šè®¾ç½®ç„¦ç‚¹å’Œæ›å…‰ç‚¹ #4197 [ç›¸æœº] ä¿®å¤ç›¸æœºé¢„è§ˆå¹¶ä¸æ€»æ˜¯åœ¨æ–¹å‘æ”¹å˜æ—¶é‡å»º #3992 [camera] è®¾ç½®ä¸å—æ”¯æŒçš„ FocusMode æ—¶é˜²æ­¢å´©æºƒ #4151 [camera] å¼•å…¥camera_webåŒ… image_picker æ’ä»¶ ä¹Ÿåšäº†å¾ˆå¤šå·¥ä½œï¼Œä¸“æ³¨äºŽç«¯åˆ°ç«¯çš„ç›¸æœºä½“éªŒï¼š #3898 [image_picker] å›¾åƒé€‰æ‹©å™¨ä¿®å¤ç›¸æœºè®¾å¤‡ #3956 [image_picker] å°†ç›¸æœºæ•èŽ·çš„å­˜å‚¨ä½ç½®æ›´æ”¹ä¸º Android ä¸Šçš„å†…éƒ¨ç¼“å­˜ï¼Œä»¥ç¬¦åˆæ–°çš„ Google Play å­˜å‚¨è¦æ±‚ #4001 [image_picker] åˆ é™¤äº†å¯¹ç›¸æœºæƒé™çš„å†—ä½™è¯·æ±‚ #4019 [image_picker] å½“ç›¸æœºæ˜¯ source æ—¶ä¿®å¤æ—‹è½¬ è¿™é¡¹å·¥ä½œæ”¹è¿›äº† Android çš„ç›¸æœºå’Œ image_picker æ’ä»¶çš„åŠŸèƒ½å’Œç¨³å¥æ€§ã€‚ æ­¤å¤–ä½ ä¼šæ³¨æ„åˆ° æ‘„åƒå¤´æ’ä»¶ çš„æ—©æœŸç‰ˆæœ¬å¯ç”¨äºŽç½‘ç»œæ”¯æŒ ( #4151 )ã€‚ æ­¤é¢„è§ˆä¸ºåœ¨ Web ä¸ŠæŸ¥çœ‹ç›¸æœºé¢„è§ˆã€æ‹ç…§ã€ä½¿ç”¨é—ªå…‰ç¯å’Œç¼©æ”¾æŽ§ä»¶æä¾›åŸºæœ¬æ”¯æŒï¼Œå®ƒç›®å‰è¿˜ä¸æ˜¯è¢«è®¤å¯çš„æ’ä»¶ï¼Œå› æ­¤æ‚¨éœ€è¦æ˜Žç¡®æ·»åŠ å®ƒä»¥åœ¨æ‰èƒ½åœ¨ web ä¸­ä½¿ç”¨ã€‚ è¯¦ç»†å†…å®¹: pub.dev/packages/caâ€¦ åœ¨æ­¤ç‰ˆæœ¬çš„ Flutter ä¸­ï¼ŒFlutter å›¢é˜Ÿçš„æ¯ä¸ªç›¸åº”æ’ä»¶çŽ°åœ¨éƒ½å¸¦æœ‰ä¸€ä¸ªç±»ä¼¼ ç”µæ±  çš„å»ºè®®ï¼š æ­¤å¤–ï¼Œç”±äºŽè¿™äº›æ’ä»¶ä¸å†è¢«ç§¯æžç»´æŠ¤ï¼Œå®ƒä»¬ä¸å†è¢«æ ‡è®°ä¸º Flutter æœ€å–œæ¬¢çš„æ’ä»¶ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ä»¥ä¸‹æ’ä»¶çš„ plus ç‰ˆæœ¬ï¼š Flutter DevToolsï¼šæ€§èƒ½ã€Widget æ£€æŸ¥å™¨å’Œ Polishé¦–å…ˆæœ€é‡è¦çš„æ˜¯ DevTools ä¸­å¢žåŠ åˆ©ç”¨å¼•æ“Žæ›´æ–°çš„æ”¯æŒï¼ˆ#26205ã€#26233ã€#26237ã€#26970ã€#27074ã€#26617ï¼‰ã€‚ å…¶ä¸­ä¸€ç»„æ›´æ–°ä½¿ Flutter èƒ½å¤Ÿæ›´å¥½åœ°å°†è·Ÿè¸ªäº‹ä»¶ä¸Žç‰¹å®šæ¡†æž¶ç›¸å…³è”ï¼Œè¿™æœ‰åŠ©äºŽå¼€å‘äººå‘˜ç¡®å®šæ¡†æž¶å¯èƒ½è¶…å‡ºé¢„ç®—çš„åŽŸå› ã€‚ å¯ä»¥åœ¨ DevTools Frames å›¾è¡¨ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œè¯¥å›¾è¡¨å·²è¢«é‡å»ºä¸ºâ€œå®žæ—¶â€ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºå‘ˆçŽ°æ—¶å¡«å……åœ¨æ­¤å›¾è¡¨ä¸­ï¼Œä»Žæ­¤å›¾è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå¸§å¯¼èˆªåˆ°è¯¥å¸§çš„æ—¶é—´çº¿äº‹ä»¶ï¼š Flutter å¼•æ“ŽçŽ°åœ¨è¿˜å¯ä»¥è¯†åˆ«æ—¶é—´çº¿ä¸­çš„ç€è‰²å™¨ç¼–è¯‘äº‹ä»¶ï¼ŒFlutter DevTools ä½¿ç”¨è¿™äº›äº‹ä»¶æ¥å¸®åŠ©è¯Šæ–­åº”ç”¨ç¨‹åºä¸­çš„ç€è‰²å™¨ç¼–è¯‘å¡é¡¿ã€‚ å€ŸåŠ©è¿™é¡¹æ–°åŠŸèƒ½ï¼ŒDevTools ä¼šæ£€æµ‹ä½•æ—¶å› ç€è‰²å™¨ç¼–è¯‘ä¸¢å¤±å¸§ï¼Œä»¥ä¾¿å¯ä»¥è§£å†³å¡é¡¿é—®é¢˜ã€‚ åœ¨ flutter run æ—¶ä¸Ž --purge-persistent-cache æ ‡å¿—ä¸€èµ·ä½¿ç”¨ï¼Œè¿™ä¼šæ¸…é™¤ç¼“å­˜ä»¥ç¡®ä¿é‡çŽ°ç”¨æˆ·åœ¨ â€œé¦–æ¬¡è¿è¡Œâ€ æˆ– â€œé‡æ–°æ‰“å¼€â€ (iOS) ä½“éªŒä¸­çœ‹åˆ°çš„çŽ¯å¢ƒã€‚ æ­¤åŠŸèƒ½ä»åœ¨å¼€å‘ä¸­ï¼Œå¦‚æžœæœ‰ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥æŸ¥é˜…ï¼šb.corp.google.com/issues/new?â€¦ æ­¤å¤–è·Ÿè¸ªåº”ç”¨ç¨‹åºä¸­çš„ CPU æ€§èƒ½é—®é¢˜æ—¶ï¼Œå¯èƒ½ä¼šè¢«æ¥è‡ª Dart å’Œ Flutter åº“æˆ–å¼•æ“Žæœ¬æœºä»£ç çš„åˆ†æžæ•°æ®æ·¹æ²¡ï¼Œå¦‚æžœæƒ³å…³é—­å…¶ä¸­ä»»ä½•ä¸€ä¸ªä»¥ä¸“æ³¨äºŽæ‚¨è‡ªå·±çš„ä»£ç ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ–°çš„ CPU Profiler åŠŸèƒ½ #3236 æ¥å®žçŽ°ï¼Œè¯¥åŠŸèƒ½å¯ä»¥ä»Žè¿™äº›æ¥æºä¸­éšè—åˆ†æžå™¨ä¿¡æ¯ã€‚ å¯¹äºŽæ²¡æœ‰è¿‡æ»¤æŽ‰çš„ä»»ä½•ç±»åˆ«ï¼Œå®ƒä»¬çŽ°åœ¨å·²ç»è¿›è¡Œäº†é¢œè‰²ç¼–ç ï¼ˆ#3310ã€#3324ï¼‰ï¼Œä»¥ä¾¿å¯ä»¥è½»æ¾æŸ¥çœ‹ CPU å¸§å›¾è¡¨æ¥è‡ªç³»ç»Ÿçš„å“ªäº›éƒ¨åˆ†ã€‚ å½©è‰²æ¡†æž¶å›¾ï¼Œç”¨äºŽè¯†åˆ«åº”ç”¨ä¸­çš„åº”ç”¨ã€åŽŸç”Ÿã€Dart å’Œ Flutter ä»£ç æ´»åŠ¨ æ€§èƒ½å¹¶ä¸æ—¶è°ƒè¯•çš„å”¯ä¸€å› ç´ ï¼Œæ­¤ç‰ˆæœ¬çš„ DevTools é™„å¸¦äº†å¯¹ Widget Inspector çš„æ›´æ–°ï¼Œå…è®¸å°†é¼ æ ‡æ‚¬åœåœ¨ Widget æ—¶è¯„ä¼°å¯¹è±¡ã€è§†å›¾å±žæ€§ã€å°éƒ¨ä»¶çŠ¶æ€ç­‰ã€‚ è€Œå½“é€‰æ‹©ä¸€ä¸ª Widget æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å¡«å……åœ¨æ–°çš„å°éƒ¨ä»¶æ£€æŸ¥å™¨æŽ§åˆ¶å°ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å…¶ä¸­æµè§ˆ Widget çš„å±žæ€§ã€‚ åœ¨æ–­ç‚¹å¤„æš‚åœæ—¶è¿˜å¯ä»¥ä»ŽæŽ§åˆ¶å°è®¡ç®—è¡¨è¾¾å¼ã€‚ é™¤äº†æ–°åŠŸèƒ½å¤– Widget Inspector è¿˜è¿›è¡Œäº†ç¿»æ–°ï¼Œä¸ºäº†è®© DevTools æˆä¸ºäº†è§£å’Œè°ƒè¯• Flutter åº”ç”¨ç¨‹åºçš„æ›´æœ‰ç”¨ï¼Œæˆ‘ä»¬ä¸ŽèŠ¬å…°çš„ä¸€å®¶åˆ›æ„æŠ€æœ¯æœºæž„Codemateåˆä½œè¿›è¡Œäº†ä¸€äº›æ›´æ–°ã€‚ åœ¨æ­¤å±å¹•æˆªå›¾ä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹æ›´æ”¹ï¼š æ›´å¥½åœ°ä¼ è¾¾è°ƒè¯•åˆ‡æ¢æŒ‰é’®çš„ä½œç”¨â€”â€”è¿™äº›æŒ‰é’®å…·æœ‰æ–°å›¾æ ‡ã€é¢å‘ä»»åŠ¡çš„æ ‡ç­¾ï¼Œä»¥åŠæè¿°å®ƒä»¬çš„ä½œç”¨å’Œä½•æ—¶ä½¿ç”¨å®ƒä»¬çš„ä¸°å¯Œå·¥å…·æç¤ºï¼Œæ¯ä¸ªå·¥å…·æç¤ºè¿›ä¸€æ­¥é“¾æŽ¥åˆ°è¯¥åŠŸèƒ½çš„è¯¦ç»†æ–‡æ¡£ã€‚ æ›´å®¹æ˜“æ‰«æå’Œå®šä½æ„Ÿå…´è¶£çš„ Widgetsâ€”â€”Flutter æ¡†æž¶ä¸­å¸¸ç”¨çš„ Widget çŽ°åœ¨åœ¨æ£€æŸ¥å™¨å·¦ä¾§çš„ Widget æ ‘è§†å›¾ä¸­æ˜¾ç¤ºå›¾æ ‡ï¼Œå®ƒä»¬æ ¹æ®ç±»åˆ«è¿›ä¸€æ­¥è¿›è¡Œé¢œè‰²ç¼–ç ï¼Œä¾‹å¦‚å¸ƒå±€ Widget æ˜¾ç¤ºä¸ºè“è‰²ï¼Œè€Œå†…å®¹Widget æ˜¾ç¤ºä¸ºç»¿è‰²ã€‚æ­¤å¤–æ¯ä¸ªæ–‡æœ¬ Widget çŽ°åœ¨æ˜¾ç¤ºå…¶å†…å®¹çš„é¢„è§ˆã€‚ å¯¹é½å¸ƒå±€èµ„æºç®¡ç†å™¨å’Œå°éƒ¨ä»¶æ ‘çš„é…è‰²æ–¹æ¡ˆ- çŽ°åœ¨å¯ä»¥æ›´è½»æ¾åœ°ä»Žå¸ƒå±€èµ„æºç®¡ç†å™¨å’Œ Widget æ ‘ä¸­è¯†åˆ«ç›¸åŒçš„ Widgetã€‚ä¾‹å¦‚å±å¹•æˆªå›¾ä¸­çš„â€œåˆ—â€ Widget ä½äºŽå¸ƒå±€æµè§ˆå™¨ä¸­çš„è“è‰²èƒŒæ™¯ä¸Šï¼Œå¹¶ä¸”åœ¨ Widget æ ‘è§†å›¾ä¸­å…·æœ‰è“è‰²å›¾æ ‡ã€‚ IntelliJ/Android Studioï¼šé›†æˆæµ‹è¯•ã€æµ‹è¯•è¦†ç›–çŽ‡å’Œå›¾æ ‡é¢„è§ˆFlutter çš„ IntelliJ/Android Studio æ’ä»¶åœ¨æ­¤ç‰ˆæœ¬ä¸­ä¹Ÿè¿›è¡Œäº†è®¸å¤šæ”¹è¿›ï¼Œé¦–å…ˆæ˜¯è¿è¡Œé›†æˆæµ‹è¯•çš„èƒ½åŠ› ( #5459 )ã€‚ é›†æˆæµ‹è¯•æ˜¯åœ¨è®¾å¤‡ä¸Šè¿è¡Œçš„æ•´ä¸ªåº”ç”¨ç¨‹åºæµ‹è¯•ï¼Œä½äºŽ integration_test ç›®å½•ä¸­ï¼Œå¹¶ä½¿ç”¨ä¸ŽtestWidgets() å•å…ƒæµ‹è¯•ç›¸åŒçš„åŠŸèƒ½ã€‚ è¦å°†é›†æˆæµ‹è¯•æ·»åŠ åˆ°é¡¹ç›®ï¼Œè¯· æŒ‰ç…§ flutter.dev ä¸Šçš„è¯´æ˜Žè¿›è¡Œæ“ä½œï¼Œè¦å°†æµ‹è¯•ä¸Ž IntelliJ æˆ– Android Studio è¿žæŽ¥ï¼Œè¯·æ·»åŠ å¯åŠ¨é›†æˆæµ‹è¯•çš„è¿è¡Œé…ç½®å¹¶è¿žæŽ¥è®¾å¤‡ä»¥ä¾›æµ‹è¯•ä½¿ç”¨ï¼Œè¿è¡Œé…ç½®å¯ä»¥è®©å¼€å‘è€…è¿è¡Œæµ‹è¯•ï¼ŒåŒ…æ‹¬è®¾ç½®æ–­ç‚¹ã€æ­¥è¿›ç­‰ã€‚ æ­¤å¤–ï¼ŒFlutter æœ€æ–°çš„ IJ/AS æ’ä»¶å…è®¸æŸ¥çœ‹å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è¿è¡Œçš„è¦†ç›–çŽ‡ä¿¡æ¯ï¼Œå¯ä»¥ä»Žâ€œè°ƒè¯•â€æŒ‰é’®æ—è¾¹çš„å·¥å…·æ æŒ‰é’®è®¿é—®å®ƒï¼š è¦†ç›–ä¿¡æ¯åœ¨ç¼–è¾‘å™¨çš„è£…è®¢çº¿ä¸­ä½¿ç”¨çº¢è‰²å’Œç»¿è‰²æ¡æ˜¾ç¤ºï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ç¬¬ 9-13 è¡Œè¢«æµ‹è¯•ï¼Œä½†ç¬¬ 3 å’Œ 4 è¡Œæ²¡æœ‰è¢«æµ‹è¯•ã€‚ æœ€æ–°ç‰ˆæœ¬è¿˜åŒ…æ‹¬é¢„è§ˆæ¥è‡ª pub.dev åŒ…ä¸­ä½¿ç”¨çš„å›¾æ ‡çš„æ–°åŠŸèƒ½ï¼Œè¿™äº›åŒ…æ˜¯å›´ç»• TrueType å­—ä½“æ–‡ä»¶ï¼ˆ#5504ã€#5595ã€#5677ã€#5704ï¼‰æž„å»ºçš„ï¼Œå°±åƒ Material å’Œ Cupertino å›¾æ ‡æ”¯æŒé¢„è§ˆä¸€æ ·ã€‚ è¦å¯ç”¨å›¾æ ‡é¢„è§ˆï¼Œæ‚¨éœ€è¦å‘Šè¯‰æ’ä»¶æ‚¨æ­£åœ¨ä½¿ç”¨å“ªäº›è½¯ä»¶åŒ…ï¼Œsettings/preferences ä¸­æœ‰ä¸€ä¸ªæ–°çš„æ–‡æœ¬å­—æ®µï¼š è¯·æ³¨æ„ï¼Œå¦‚å±å¹•æˆªå›¾ä¸­çš„ç¤ºä¾‹ä»£ç æ‰€ç¤ºï¼Œæ­¤è®¾ç½®ä»…é€‚ç”¨äºŽåœ¨ç±»ä¸­å®šä¹‰ä¸ºé™æ€å¸¸é‡çš„å›¾æ ‡ï¼Œå®ƒä¸é€‚ç”¨äºŽè¡¨è¾¾å¼ï¼Œä¾‹å¦‚ LineIcons.addressBook() or LineIcons.values[&#39;code&#39;] ã€‚ Visual Studio Codeï¼šä¾èµ–é¡¹ã€Fix All å’Œ Test RunnerFlutter çš„ Visual Studio Code æ’ä»¶ä¹Ÿåœ¨æ­¤ç‰ˆæœ¬ä¸­å¾—åˆ°äº†æ”¹è¿›ï¼Œä¸¤ä¸ªæ–°å‘½ä»¤ â€œDart: Add Dependencyâ€ and â€œDart: Add Dev Dependencyâ€ (#3306, #3474)ã€‚ è¿™äº›å‘½ä»¤æä¾›çš„åŠŸèƒ½ç±»ä¼¼äºŽJeroen Meijer çš„ Pubspec Assist æ’ä»¶ï¼Œæ–°å‘½ä»¤å¼€ç®±å³ç”¨ï¼Œå¹¶æä¾›å®šæœŸä»Ž pub.dev èŽ·å–çš„åŒ…ç±»åž‹è¿‡æ»¤åˆ—è¡¨ã€‚ å¼€å‘è€…å¯èƒ½è¿˜å¯¹é€‚ç”¨äºŽ Dart æ–‡ä»¶çš„â€œFix Allâ€å‘½ä»¤ï¼ˆ#3445ã€#3469ï¼‰æ„Ÿå…´è¶£ï¼Œå¹¶ä¸”å¯ä»¥ä¸€æ­¥ä¿®å¤æ‰€æœ‰ä¸Ždart fixç›¸åŒçš„é—®é¢˜ã€‚ è¿™ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ  source.fixAll åˆ° editor.codeActionsOnSave çš„ VS Code è®¾ç½®æ¥è®¾ç½®ä¸ºåœ¨ä¿å­˜æ—¶è¿è¡Œï¼Œæˆ–è€…æƒ³å°è¯•é¢„è§ˆåŠŸèƒ½ï¼Œå¯ä»¥å¯ç”¨è¯¥ dart.previewVsCodeTestRunner è®¾ç½®å¹¶æŸ¥çœ‹é€šè¿‡æ–°çš„ Visual Studio Code æµ‹è¯•è¿è¡Œç¨‹åºè¿è¡Œçš„ Dart å’Œ Flutter æµ‹è¯•ã€‚ Visual Studio Code æµ‹è¯•è¿è¡Œå™¨çœ‹èµ·æ¥ä¸Žå½“å‰çš„ Dart å’Œ Flutter æµ‹è¯•è¿è¡Œå™¨ç•¥æœ‰ä¸åŒï¼Œå®ƒå°†è·¨ä¼šè¯ä¿ç•™ç»“æžœã€‚Visual Studio Code æµ‹è¯•è¿è¡Œå™¨è¿˜æ·»åŠ äº†æ–°çš„è£…è®¢çº¿å›¾æ ‡ï¼Œæ˜¾ç¤ºæµ‹è¯•çš„æœ€åŽçŠ¶æ€ï¼Œå¯ä»¥å•å‡»ä»¥è¿è¡Œæµ‹è¯•ï¼ˆæˆ–å³é”®å•å‡»ä»¥èŽ·å–ä¸Šä¸‹æ–‡èœå•ï¼‰ã€‚ åœ¨å³å°†å‘å¸ƒçš„ç‰ˆæœ¬ä¸­ï¼ŒçŽ°æœ‰çš„ Dart å’Œ Flutter æµ‹è¯•è¿è¡Œå™¨å°†è¢«ç§»é™¤ï¼Œä»¥æ”¯æŒæ–°çš„ Visual Studio Code æµ‹è¯•è¿è¡Œå™¨ã€‚ å·¥å…·ï¼šå¼‚å¸¸ã€æ–°åº”ç”¨æ¨¡æ¿å’Œ Pigeon 1.0åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œè°ƒè¯•å™¨çŽ°åœ¨å¯ä»¥åœ¨æœªå¤„ç†çš„å¼‚å¸¸ä¸Šæ­£ç¡®ä¸­æ–­ï¼Œè€Œè¿™äº›å¼‚å¸¸ä»¥å‰æ—¶è¢« framework æ•èŽ· ( #17007 )ã€‚ è¿™æ”¹å–„äº†è°ƒè¯•ä½“éªŒï¼Œå› ä¸ºè°ƒè¯•å™¨çŽ°åœ¨å¯ä»¥ç›´æŽ¥æŒ‡å‘ä»–ä»¬åœ¨ä»£ç ä¸­çš„æŠ›å‡ºè¡Œï¼Œè€Œä¸æ˜¯æŒ‡å‘æ¡†æž¶æ·±å¤„çš„éšæœºè¡Œã€‚ ä¸€ä¸ªç›¸å…³çš„æ–°åŠŸèƒ½ä½¿å¼€å‘è€…èƒ½å¤Ÿå†³å®š FutureBuilder æ˜¯å¦åº”è¯¥é‡æ–°æŠ›å‡ºæˆ–åžä¸‹é”™è¯¯ (#84308ï¼‰ï¼Œè¿™åº”è¯¥ä¼šä¸ºå¼€å‘è€…æä¾›å¤§é‡é¢å¤–çš„ä¾‹å¤–æƒ…å†µï¼Œä»¥å¸®åŠ©è¿½è¸ª Flutter åº”ç”¨ç¨‹åºä¸­çš„é—®é¢˜ã€‚ è‡ª Flutter è¯žç”Ÿä»¥æ¥ï¼Œå°±å‡ºçŽ°äº† Counter åº”ç”¨æ¨¡æ¿ï¼Œå®ƒå…·æœ‰è®¸å¤šä¼˜ç‚¹ï¼š å®ƒå±•ç¤ºäº† Dart è¯­è¨€çš„è®¸å¤šç‰¹æ€§ï¼› å±•ç¤ºäº†å‡ ä¸ªå…³é”®çš„ Flutter æ¦‚å¿µï¼Œå¹¶ä¸”å®ƒè¶³å¤Ÿå°ï¼› å¯ä»¥æ”¾å…¥å•ä¸ªæ–‡ä»¶ä¸­ï¼Œå³ä½¿æœ‰å¾ˆå¤šçš„è§£é‡Šæ€§è¯„è®ºï¼› ç„¶è€Œå®ƒæ²¡æœ‰ä¸ºFlutter åº”ç”¨ç¨‹åºæä¾›ä¸€ä¸ªç‰¹åˆ«å¥½çš„èµ·ç‚¹ï¼Œåœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤æä¾›äº†ä¸€ä¸ªæ–°æ¨¡æ¿ ( #83530 )ï¼š 1$ flutter create -t skeleton my_app éª¨æž¶æ¨¡æ¿ç”Ÿæˆä¸€ä¸ªéµå¾ªç¤¾åŒºæœ€ä½³å®žè·µçš„ä¸¤é¡µåˆ—è¡¨è§†å›¾ï¼Œå®ƒçš„å¼€å‘ç»è¿‡å¤§é‡å†…éƒ¨å’Œå¤–éƒ¨å®¡æŸ¥ï¼Œä¸ºæž„å»ºç”Ÿäº§è´¨é‡åº”ç”¨ç¨‹åºæä¾›äº†æ›´å¥½çš„åŸºç¡€ï¼Œå¹¶æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š ç”¨äºŽ ChangeNotifier åè°ƒå¤šä¸ª Widget é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ arb æ–‡ä»¶ç”Ÿæˆæœ¬åœ°åŒ– åŒ…æ‹¬ç¤ºä¾‹å›¾åƒå¹¶ä¸ºå›¾åƒèµ„äº§å»ºç«‹ 1xã€2x å’Œ 3x æ–‡ä»¶å¤¹ ä½¿ç”¨â€œåŠŸèƒ½ä¼˜å…ˆâ€çš„æ–‡ä»¶å¤¹ç»„ç»‡ æ”¯æŒå…±äº«é¦–é€‰é¡¹ æ”¯æŒæ˜Žæš—ä¸»é¢˜ æ”¯æŒå¤šé¡µé¢é—´å¯¼èˆª éšç€æ—¶é—´çš„æŽ¨ç§»ï¼Œéšç€ Flutter æœ€ä½³å®žè·µçš„å‘å±•é¢„è®¡è¿™ä¸ªæ–°æ¨¡æ¿ä¹Ÿä¼šéšä¹‹å‘å±•ã€‚ å¦ä¸€æ–¹é¢ï¼Œå¦‚æžœä½ æ­£åœ¨å¼€å‘æ’ä»¶è€Œä¸æ˜¯åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¯¹ Pigeon çš„ 1.0 ç‰ˆæœ¬æ„Ÿå…´è¶£ã€‚ Pigeon æ˜¯ä¸€ä¸ªä»£ç ç”Ÿæˆå·¥å…·ï¼Œç”¨äºŽåœ¨ Flutter åŠå…¶ä¸»æœºå¹³å°ä¹‹é—´ç”Ÿæˆç±»åž‹å®‰å…¨çš„äº’æ“ä½œä»£ç ï¼Œå®ƒå…è®¸å®šä¹‰æ’ä»¶ API çš„æè¿°ï¼Œå¹¶ä¸º Dartã€Java å’Œ Objective-Cï¼ˆåˆ†åˆ«å¯ç”¨äºŽ Kotlin å’Œ Swiftï¼‰ç”Ÿæˆæ¡†æž¶ä»£ç ã€‚ Flutter å›¢é˜Ÿçš„ä¸€äº›æ’ä»¶ä¸­å·²ç»ä½¿ç”¨äº† Pigeonï¼Œåœ¨æ­¤ç‰ˆæœ¬ä¸­å®ƒæä¾›äº†æ›´å¤šæœ‰ç”¨çš„é”™è¯¯æ¶ˆæ¯ï¼Œå¢žåŠ äº†å¯¹æ³›åž‹ã€åŽŸå§‹æ•°æ®ç±»åž‹ä½œä¸ºå‚æ•°å’Œè¿”å›žç±»åž‹ä»¥åŠå¤šä¸ªå‚æ•°çš„æ”¯æŒï¼Œé¢„è®¡å¼€å‘è€…å°†æ¥ä¼šæ›´é¢‘ç¹åœ°ä½¿ç”¨å®ƒã€‚ é‡å¤§æ›´æ”¹å’Œå¼ƒç”¨ä»¥ä¸‹æ˜¯ Flutter 2.5 ç‰ˆæœ¬ä¸­çš„é‡å¤§å˜åŒ–ï¼š é»˜è®¤æ‹–åŠ¨æ»šåŠ¨è®¾å¤‡ åœ¨ v2.2 ä¹‹åŽåˆ é™¤äº†å¼ƒç”¨çš„ API å¼•å…¥åŒ…ï¼šflutter_lints ThemeData çš„ accent å±žæ€§å·²è¢«å¼ƒç”¨ GestureRecognizer Cleanup ç”¨ collate æ›¿æ¢ AnimationSheetBuilder.display ä½¿ç”¨ HTML æ’æ§½åœ¨ Web ä¸­å‘ˆçŽ°å¹³å°è§†å›¾ å°† LogicalKeySet è¿ç§»åˆ° SingleActivator éšç€ç»§ç»­æ›´æ–° Flutter Fixï¼ˆåœ¨æ‚¨çš„ IDE ä¸­å’Œé€šè¿‡dart fixå‘½ä»¤å¯ç”¨ï¼‰ï¼Œæ€»å…±æœ‰ 157 æ¡è§„åˆ™æ¥è‡ªåŠ¨è¿ç§»å—è¿™äº›æˆ–è¿‡åŽ»çš„é‡å¤§æ›´æ”¹ä»¥åŠä»»ä½•å¼ƒç”¨å½±å“çš„ä»£ç ã€‚ æ­¤å¤–éšç€ Flutter 2.5 çš„å‘å¸ƒï¼Œæˆ‘ä»¬å°†å¼ƒç”¨2020 å¹´ 9 æœˆå®£å¸ƒçš„å¯¹ iOS 8 çš„æ”¯æŒã€‚æ”¾å¼ƒå¯¹å¸‚åœºä»½é¢ä¸åˆ° 1% çš„ iOS 8 çš„æ”¯æŒï¼Œä½¿ Flutter å›¢é˜Ÿèƒ½å¤Ÿä¸“æ³¨äºŽæ›´å¹¿æ³›ä½¿ç”¨çš„æ–°å¹³å°ï¼Œå¼ƒç”¨æ„å‘³ç€è¿™äº›å¹³å°å¯ä»¥å·¥ä½œï¼Œä½†æˆ‘ä»¬ä¸ä¼šåœ¨è¿™äº›å¹³å°ä¸Šæµ‹è¯• Flutter çš„æ–°ç‰ˆæœ¬æˆ–æ’ä»¶ã€‚ æ‚¨å¯ä»¥åœ¨ flutter.dev ä¸ŠæŸ¥çœ‹å½“å‰æ”¯æŒçš„ Flutter å¹³å°åˆ—è¡¨: flutter.dev/docs/develoâ€¦]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[èƒ½é‡å±‚çº§ï¼ˆæ­£/è´Ÿï¼‰]]></title>
    <url>%2Fposts%2F4caf75c5.html</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GooglePlayæ–°å¢žä»˜æ¬¾åŠŸèƒ½ä¸€è§ˆè¡¨]]></title>
    <url>%2Fposts%2F5fd712a2.html</url>
    <content type="text"><![CDATA[éšç€ç§»åŠ¨è¡Œä¸šå…¨çƒåŒ–ï¼ŒGoogle Play ä¹Ÿé™†ç»­åŠ å…¥å„ç§ä¸åŒçš„ä»˜æ¬¾æ–¹å¼ï¼Œè®©ç”¨æˆ·å¯ä»¥é€‰æ‹©å–œå¥½çš„ä»˜æ¬¾æ–¹å¼ã€‚è¯·æ³¨æ„ï¼ŒGoogle Play å¸å·çš„å›½å®¶/åœ°åŒºè®¾ç½®ä¼šå½±å“èƒ½é€‰æ‹©çš„ä»˜æ¬¾æ–¹å¼ã€‚ å¦‚æžœè¦æ›´æ”¹å›½å®¶/åœ°åŒºï¼Œæ‚¨éœ€è¦åœ¨ Google Play ä¸­è®¾ç½®ä¸€ä¸ªæ–°çš„å›½å®¶/åœ°åŒºã€‚è¦è®¾ç½®æ–°çš„å›½å®¶/åœ°åŒºï¼Œç”¨æˆ·å¿…é¡»ä½äºŽç›¸åº”å›½å®¶/åœ°åŒºï¼Œå¹¶ä¸”åœ¨æ–°çš„å›½å®¶/åœ°åŒºæœ‰å—æ”¯æŒçš„ä»˜æ¬¾æ–¹å¼ã€‚ è¯·æ³¨æ„: æ‚¨æ¯å¹´åªèƒ½æ›´æ”¹ä¸€æ¬¡ Play å›½å®¶/åœ°åŒºè®¾ç½®ã€‚å› æ­¤ï¼Œå¦‚æžœæ‚¨æ›´æ”¹å›½å®¶/åœ°åŒºï¼Œåˆ™åœ¨ 1 å¹´ä¹‹å†…æ— æ³•æ”¹å›žä¹‹å‰çš„å›½å®¶/åœ°åŒºã€‚ æ‚¨æ›´æ”¹å›½å®¶/åœ°åŒºåŽï¼Œå°†æ— æ³•åœ¨æ–°çš„å›½å®¶/åœ°åŒºä½¿ç”¨æ‚¨åœ¨ä¹‹å‰çš„å›½å®¶/åœ°åŒºæ‹¥æœ‰çš„ Google Play ä½™é¢ã€‚ æ‚¨å¯èƒ½ä¼šæ— æ³•å†äº«ç”¨æŸäº›å›¾ä¹¦ã€ç”µå½±ã€ç”µè§†èŠ‚ç›®ã€æ¸¸æˆå’Œåº”ç”¨ã€‚ ä»¥ä¸‹åˆ—ä¸¾ Google Play ä¸­éƒ¨åˆ†é‡‡ç”¨ä¸­æ–‡è¯­è¨€çš„å›½å®¶/åœ°åŒºå¸¸ç”¨çš„ä»˜æ¬¾æ–¹å¼: ä¸­å›½é¦™æ¸¯åœ°åŒº ä¿¡ç”¨å¡åŠå€Ÿè®°å¡: ç»´è¨ã€ä¸‡äº‹è¾¾ã€åŠç¾Žå›½è¿é€šå¡ æ‰‹æœºä»£æ‰£ï¼Œå‚ä¸Žçš„è¿è¥å•†æœ‰: 3 CSL/1O1O Smartone ä¸­å›½ç§»åŠ¨é¦™æ¸¯ SUN Mobile Telin Octopus O ! ePay AlipayHK â€“ *new!*** Google Play ç¤¼å“å¡ è‹¥æƒ³ä½¿ç”¨ç¤¼å“å¡æˆ–ä¿ƒé”€ä»£ç ï¼Œæ‚¨æ‰€å±…ä½çš„å›½å®¶/åœ°åŒºä¸Ž Google Play å¸å·çš„å›½å®¶/åœ°åŒºè®¾ç½®å¿…é¡»ä¸Žæä¾›ç¤¼å“å¡æˆ–ä¿ƒé”€ä»£ç çš„å›½å®¶/åœ°åŒºä¸€è‡´ï¼Œå¦åˆ™ä¼šæ— æ³•å……å€¼åŠäº¤æ˜“ã€‚ PayPal æ–°åŠ å¡ ä¿¡ç”¨å¡åŠå€Ÿè®°å¡: å¨è¨ã€ä¸‡äº‹è¾¾ã€åŠç¾Žå›½è¿é€šå¡ æ‰‹æœºä»£æ‰£ï¼Œå‚ä¸Žçš„è¿è¥å•†æœ‰: M1 SingTel StarHub PayPal é©¬æ¥è¥¿äºš ä¿¡ç”¨å¡åŠå€Ÿè®°å¡: å¨è¨ã€ä¸‡äº‹è¾¾ã€åŠç¾Žå›½è¿é€šå¡ æ‰‹æœºä»£æ‰£ï¼Œå‚ä¸Žçš„è¿è¥å•†æœ‰: Celcom Digi Maxis U Mobile webe Yes Touch â€˜n Go Wallet Google Play ç¤¼å“å¡ è‹¥æƒ³ä½¿ç”¨ç¤¼å“å¡æˆ–ä¿ƒé”€ä»£ç ï¼Œæ‚¨æ‰€å±…ä½çš„å›½å®¶/åœ°åŒºä¸Ž Google Play å¸å·çš„å›½å®¶/åœ°åŒºè®¾ç½®å¿…é¡»ä¸Žæä¾›ç¤¼å“å¡æˆ–ä¿ƒé”€ä»£ç çš„å›½å®¶/åœ°åŒºä¸€è‡´ï¼Œå¦åˆ™ä¼šæ— æ³•å……å€¼åŠäº¤æ˜“ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android12ä¸Šå…¨æ–°çš„åº”ç”¨å¯åŠ¨ç”»é¢]]></title>
    <url>%2Fposts%2F8c53fca7.html</url>
    <content type="text"><![CDATA[æ—©æœŸçš„Androidä¸ŠAppçš„å¯åŠ¨é€Ÿåº¦å¸¸ä¸ºäººè¯Ÿç—…ï¼Œå¦‚ä»Šçš„å¯åŠ¨è¡¨çŽ°å·²ä¸é€ŠiOSã€‚Googleé’ˆå¯¹ç³»ç»Ÿçš„ä¸æ–­ä¼˜åŒ–ç»å¯¹åŠŸä¸å¯æ²¡ï¼Œä»Ž8.0ç‹¬ç«‹å‡ºæ¥çš„SplashWindowï¼Œåˆ°12ä¸ŠæŽ¨å‡ºçš„å…¨æ–°SplashScreenã€‚ åœ¨Appçš„ä¸»è¦å†…å®¹å±•ç¤ºä¹‹å‰ï¼ŒæŒ‰ç…§éœ€æ±‚çš„ä¸åŒï¼Œæˆ–å¤šæˆ–å°‘ä¼šå…ˆå±•ç¤ºè¿™æ ·å‡ ä¸ªç”»é¢ã€‚ ç”»é¢ ç”¨é€” Splash Screen å±•ç¤ºå“ç‰ŒLogoæˆ–Slogan Advertisement Screen å±•ç¤ºèŠ‚æ—¥æ´»åŠ¨æˆ–æ—¥å¸¸å¹¿å‘Š Guide Screen æ¼”ç¤ºé‡ç‚¹åŠŸèƒ½ï¼Œä¸€èˆ¬åªå±•ç¤ºä¸€æ¬¡ 1 å‰è¨€æˆ‘ä»¬å¸¸å¸¸èŠ±è´¹ç²¾åŠ›åŽ»æ‰“é€ å¼•å¯¼ç”»é¢æˆ–å¹¿å‘Šç”»é¢ï¼Œè€Œä½œä¸ºç¬¬ä¸€å°è±¡çš„å¯åŠ¨ç”»é¢å´å®¹æ˜“è¢«å¿½è§†ã€‚å›žæƒ³ä¸‹ä»¥å‰éƒ½æ˜¯æ€Žä¹ˆå¤„ç†è¿™ä¸ªç”»é¢çš„ï¼š ä¸€èˆ¬é€šè¿‡è®¾ç½®windowSplashscreenContentå±žæ€§æ¥å±•ç¤ºUIæä¾›çš„å¯åŠ¨å›¾ï¼Œç³»ç»Ÿå°†ä¸ºå®ƒåˆ›å»ºä¸“é—¨çš„Window å‡ä½¿å¿˜è®°è®¾ç½®è¿™ä¸ªå±žæ€§çš„è¯ï¼Œé»˜è®¤çš„ç™½è‰²èƒŒæ™¯å°†å¯¼è‡´å¯åŠ¨è¿‡ç¨‹ä¸­ä¼šæœ‰ä¸ªç™½ç”»é¢ä¸€é—ªè€Œè¿‡ è¦åŽ»æŽ‰è¿™ä¸ªçªå…€çš„ç™½ç”»é¢å¯ä¸èƒ½ç®€å•åœ°è®¾ç½®Backgroundä¸ºnullï¼Œä¸ç„¶ä¸€é—ªè€Œè¿‡çš„åˆä¼šå˜æˆé»‘ç”»é¢ æœ€ç»ˆå‘çŽ°windowDisablePreviewå±žæ€§å¯ä»¥å½»åº•å…³é—­è¿™ä¸ªç”»é¢ï¼Œè¿™æ ·ä¸€æ¥ç¡®å®žæ²¡æœ‰ä»»ä½•çªå…€çš„ç”»é¢ä¸€é—ªè€Œè¿‡äº† ä½†è¿™åˆä¼šå¸¦æ¥å¯åŠ¨â€å˜æ…¢â€çš„å‰¯ä½œç”¨ï¼Œå› ä¸ºç”¨æ¥è¿‡æ¸¡çš„å¯åŠ¨ç”»é¢è¢«å…³é—­ä¹‹åŽï¼ŒAppæç”»å‰å±å¹•å‡ ä¹Žæ²¡æœ‰ä»€ä¹ˆå˜åŒ–ã€‚å³ä¾¿Appæ€§èƒ½æ²¡æœ‰åŠ£åŒ–ï¼Œä½†ä¸ºäº†ç•™ä½ç”¨æˆ·ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¾—å¥½å¥½å¯¹å¾…è¿™ä¸ªå¯åŠ¨ç”»é¢ã€‚ ç„¶è€ŒçŽ°æœ‰çš„windowSplashscreenContentå¯ä¾›å®šåˆ¶çš„ç©ºé—´ç€å®žæœ‰é™ã€‚ä¹Ÿè®¸å®˜æ–¹ä¹Ÿæ³¨æ„åˆ°äº†è¿™ç‚¹ï¼Œä¾¿ç²¾å¿ƒè®¾è®¡äº†Splash Screen APIï¼Œå¹¶åœ¨Android 12é‡Œé‡ç£…æŽ¨å‡ºã€‚ æœ‰äº†è¿™ä¸ªå…¨æ–°ç‰¹æ€§çš„å¸®åŠ©ï¼Œå¯åŠ¨ç”»é¢çš„å®šåˆ¶å°†æ›´åŠ è‡ªç”±ã€æ–¹ä¾¿ã€‚å…ˆæ¥çœ‹ä¸‹é‡‡ç”¨SplashScreen API å¿«é€Ÿå®šåˆ¶çš„å¯åŠ¨æ•ˆæžœã€‚ ä¸‹é¢å°†é€æ­¥æ¼”ç¤ºå…¨æ–°SplashScreenå¯ä¾›å®šåˆ¶çš„å„ä¸ªæ–¹é¢ã€‚ 2 å®šåˆ¶è¿›å…¥æ•ˆæžœé‡‡ç”¨xmlå³å¯å¿«é€Ÿå®šåˆ¶å„å¼è¿›å…¥æ•ˆæžœã€‚ 2.1 é»˜è®¤çš„å¯åŠ¨æ•ˆæžœé»˜è®¤æƒ…å†µä¸‹å¯åŠ¨ç”»é¢å°†å±•ç¤ºç™½è‰²èƒŒæ™¯å’ŒLauncherä¸Šçš„Adaptive Iconï¼Œä¹Ÿæ˜¯ä¸é”™çš„ï¼Œæ¯”ä»¥å‰çš„ç™½ç”»é¢è¦å¥½å¾ˆå¤šã€‚ 2.2 è‡ªå®šä¹‰é™æ€Iconæ›¿æ¢Iconä¸ºAdaptive Iconçš„å‰æ™¯å›¾ï¼ŒèƒŒæ™¯è‰²å¾®è°ƒä¸ºç±³é»„è‰²ã€‚ 123&lt;item name="android:windowSplashScreenBackground"&gt;@color/newSplashScreenColor&lt;/item&gt;&lt;item name="android:windowSplashScreenAnimatableIcon"&gt;@drawable/ic_kotlin_hero_new&lt;/item&gt;å¤åˆ¶ä»£ç  2.3 è‡ªå®šä¹‰IconèƒŒæ™¯Iconè‰²è°ƒå’Œç”»é¢èƒŒæ™¯è‰²çš„å¯¹æ¯”ä¸å¤Ÿæ˜Žæ˜¾çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ·»åŠ IconèƒŒæ™¯è‰²åŠ å¼ºè¾¨è¯†åº¦ã€‚ 12&lt;item name=â€android:windowSplashScreenIconBackgroundâ€&gt;@color/newSplashIconMaskColor&lt;/item&gt;å¤åˆ¶ä»£ç  2.4 è‡ªå®šä¹‰å“ç‰ŒLogoæ·»åŠ å“ç‰ŒLogoå¯ä»¥å±•ç¤ºä¼ä¸šå½¢è±¡æˆ–Sloganï¼Œä½¿å¾—å¯åŠ¨ç”»é¢æ›´ä¸ºå®Œæ•´å’Œç²¾ç»†ã€‚ 12&lt;item name=â€android:windowSplashScreenBrandingImageâ€&gt;@drawable/ic_tm_brand_newer&lt;/item&gt;å¤åˆ¶ä»£ç  2.5 è‡ªå®šä¹‰åŠ¨ç”»IconåŠ¨ç”»å½¢å¼çš„Iconå¯ä»¥å¢žæ·»è®¾è®¡å’Œåˆ›æ„ï¼Œä½¿å¾—å¯åŠ¨æµç¨‹æ›´åŠ æµç•…å’Œæœ‰è¶£ã€‚ 123&lt;item name="android:windowSplashScreenAnimatableIcon"&gt;@drawable/ic_kotlin_hero_new_animated_rotate&lt;/item&gt;&lt;item name="android:windowSplashScreenAnimationDuration"&gt;@integer/icon_animator_duration&lt;/item&gt;å¤åˆ¶ä»£ç  æ¯”å¦‚è®©æœºå™¨äººå›¾æ ‡æ—‹è½¬èµ·æ¥ã€‚ å†æ¯”å¦‚è®©æœºå™¨äººåœ¨Kotlinä¸Šä¾§æ»‘ã€‚ æˆ–è€…è®©å‡ ä½•å›¾æ¡ˆæ‹¼å‡‘å‡ºå­—æ¯Kä¹‹åŽå’Œæœºå™¨äººæ±‡åˆï¼Œè±¡å¾ç€Androidå’ŒKotlinçš„å¼ºå¼ºè”åˆã€‚ æ³¨æ„ï¼š åŠ¨ç”»Iconçš„æ—¶é•¿ä¸Šé™ä¸º1000msã€‚ å›¾æ ‡çš„è¿›å…¥åŠ¨ç”»å¯ä»¥å®šåˆ¶ï¼Œä½†ç”±ç³»ç»ŸæŽ§åˆ¶ï¼Œä¸å¯ä»¥è¢«ç›‘å¬å’Œé¢å¤–å¤„ç†ã€‚ 2.6 å»¶é•¿å¯åŠ¨ç”»é¢ The splash screen is dismissed as soon as your app draws its first frame. If you need to load a small amount of data such as in-app theme settings from a local disk asynchronously, you can use ViewTreeObserver.OnPreDrawListener to suspend the app to draw its first frame. åŽå°æ•°æ®çš„åŠ è½½éš¾å…è€—æ—¶ï¼Œå¯åŠ¨ç”»é¢ç»“æŸäº†ä¸»è¦å†…å®¹ä»æœªåŠ è½½å¥½çš„è¯ï¼Œä½“éªŒä¸æ˜¯å¤ªå¥½ã€‚èƒ½å¤ŸæŽ§åˆ¶å¯åŠ¨ç”»é¢çš„æŒç»­æ—¶æ—¶é•¿å°±å¥½äº†ã€‚ çŽ°æœ‰çš„ViewTreeObserverçš„OnPreDrawListenerå›žè°ƒæ˜¯å¯ä»¥æŒ‚èµ·æç”»çš„ï¼Œå¦‚æžœæˆ‘ä»¬åœ¨æ•°æ®å‡†å¤‡å¥½ä¹‹åŽå†æ”¾è¡Œæç”»ï¼Œå°±å¯ä»¥é—´æŽ¥åœ°å»¶é•¿å¯åŠ¨ç”»é¢çš„æ˜¾ç¤ºã€‚ æ¯”å¦‚Activityåˆå§‹åŒ–2såŽæ‰æ”¾è¡Œæç”»ã€‚ 123456789101112131415161718192021222324252627282930313233class SplashActivity : AppCompatActivity() &#123; override fun onCreate(savedInstanceState: Bundle?) &#123; ... keepSplashScreenLonger() &#125; private fun keepSplashScreenLonger() &#123; // ç›‘å¬Content Viewçš„æç”»æ—¶æœº val content: View = findViewById(android.R.id.content) content.viewTreeObserver.addOnPreDrawListener( object : ViewTreeObserver.OnPreDrawListener &#123; override fun onPreDraw(): Boolean &#123; // å‡†å¤‡å¥½äº†æç”»æ”¾è¡Œï¼Œåä¹‹æŒ‚èµ· return if (viewModel.isDataReady()) &#123; content.viewTreeObserver.removeOnPreDrawListener(this) true &#125; else &#123; false &#125; &#125; &#125; ) &#125;&#125;class MyViewModel(application: Application): AndroidViewModel(application) &#123; companion object &#123; const val WORK_DURATION = 2000L &#125; private val initTime = SystemClock.uptimeMillis() fun isDataReady() = SystemClock.uptimeMillis() - initTime &gt; WORK_DURATION&#125;å¤åˆ¶ä»£ç  çœ‹ä¸€ä¸‹æ•ˆæžœï¼Œå‘çŽ°å¯åŠ¨ç”»é¢çš„å±•ç¤ºæ—¶é—´ç¡®å®žå˜é•¿äº†ã€‚ 3 å®šåˆ¶é€€å‡ºæ•ˆæžœå½“Appçš„ç¬¬ä¸€å¸§å¼€å§‹æç”»ï¼ŒSplashScreenå°†ä¼šé€€å‡ºå±•ç¤ºã€‚ä¸ºäº†ä¸°å¯Œé€€å‡ºçŽ¯èŠ‚çš„ä½“éªŒï¼Œç³»ç»Ÿä¹Ÿå¼€æ”¾äº†ç›¸åº”çš„å…¥å£ï¼Œå³ç”»é¢é€€å‡ºçš„å›žè°ƒã€‚åœ¨è¿™ä¸ªå›žè°ƒé‡Œå¯ä»¥å¼€å§‹é€€å‡ºæ•ˆæžœçš„å®šåˆ¶ï¼ŒåŒ…æ‹¬æ•´ä½“çš„é€€å‡ºåŠ¨ç”»å’Œå›¾æ ‡çš„é€€å‡ºåŠ¨ç”»ã€‚ 3.1 ç›‘å¬å¯åŠ¨ç”»é¢çš„é€€å‡ºå‘SplashScreenæ³¨å†ŒOnExitAnimationListeneræŽ¥å£å³å¯ç›‘å¬å¯åŠ¨ç”»é¢çš„é€€å‡ºã€‚ 1234567891011121314override fun onCreate(savedInstanceState: Bundle?) &#123; ... customizeSplashScreenExit()&#125;private fun customizeSplashScreenExit() &#123; splashScreen.setOnExitAnimationListener &#123; splashScreenView -&gt; Log.d("Splash", "SplashScreen#onSplashScreenExit view:$splashScreenView") sleep(1000) Log.d("Splash", "SplashScreen#remove after sleeping") splashScreenView.remove() &#125;&#125;å¤åˆ¶ä»£ç  å¯ä»¥çœ‹åˆ°å¯åŠ¨ç”»é¢å±•ç¤ºä¹‹åŽï¼Œä¸ä½œå®šåˆ¶çš„é»˜è®¤æƒ…å†µä¸‹å°±æ˜¯å…¨å±ä¸€ä¸‹å†æ¶ˆå¤±ã€‚ æ—¥å¿—å¦‚ä¸‹ï¼š 123456Splash : Activity:com.example.splash.MainActivity@f70c0d0 Activity:com.example.splash.MainActivity@f70c0d0 onCreateSplash : Activity:com.example.splash.MainActivity@f70c0d0 onStartSplash : Activity:com.example.splash.MainActivity@f70c0d0 onResumeSplash : SplashScreen#onSplashScreenExit view:android.window.SplashScreenView&#123;18339d5 V.E...... ........ 0,0-1080,2280&#125;Splash : SplashScreen#remove after sleepingå¤åˆ¶ä»£ç  ä¸€å®šè®°å¾—è°ƒç”¨removeåŠæ—¶ç§»é™¤å¯åŠ¨ç”»é¢ï¼Œå¦åˆ™SplashScreenä¼šé•¿æ—¶é—´ç›–åœ¨ä¸»ç”»é¢ä¸Šï¼Œå¤§æ¦‚åœ¨5så·¦å³ã€‚ å¦å¤–ï¼Œå›žè°ƒçš„æ³¨å†Œéœ€è¦æ”¾åœ¨Activity#onResumeå‰ï¼Œä¸ç„¶ç›‘å¬ä¸åˆ°ã€‚ 3.2 å®šåˆ¶æ•´ä½“çš„é€€å‡ºåŠ¨ç”»å¯ä»¥ç»™å¯åŠ¨ç”»é¢çš„æ•´ä½“è®¾ç½®TRANSLATEã€SCALEã€ROTATEã€ALPHAç­‰å„ç§åŠ¨ç”»ï¼Œä½¿å¾—é€€å‡ºæ›´åŠ è‡ªç„¶ã€‚ æ¯”å¦‚ç»™SplashScreenåŠ ä¸Šä¸€ä¸ªç¼©å°å‡ºå±å¹•çš„åŠ¨ç”»ã€‚ 1234567891011121314151617181920212223private fun customizeSplashScreenExit() &#123; splashScreen.setOnExitAnimationListener &#123; splashScreenView -&gt; showSplashExitAnimator(splashScreenView) &#125;&#125;private fun showSplashExitAnimator(splashScreenView: SplashScreenView) &#123; val path = Path() path.moveTo(1.0f, 1.0f) path.lineTo(0f, 0f) val scaleOut = ObjectAnimator.ofFloat( splashScreenView, View.SCALE_X, View.SCALE_Y, path ) ... scaleOut.doOnEnd &#123; splashScreenView.remove() &#125; scaleOut.start()&#125;å¤åˆ¶ä»£ç  åˆæˆ–è€…ä»Žä¸Šæ–¹å¹³ç§»å‡ºå±å¹•çš„åŠ¨ç”»ã€‚ 1234567891011private fun showSplashExitAnimator(splashScreenView: SplashScreenView) &#123; val slideUp = ObjectAnimator.ofFloat( splashScreenView, View.TRANSLATION_Y, 0f, -splashScreenView.height.toFloat() ) ... slideUp.start()&#125;å¤åˆ¶ä»£ç  3.3 å®šåˆ¶å›¾æ ‡çš„é€€å‡ºåŠ¨ç”»å½“ç„¶ä¹Ÿå¯ä»¥ç»™å›¾æ ‡å•ç‹¬åŠ ä¸ŠåŠ¨ç”»ï¼Œæ¯”å¦‚å°†Iconä¸Šæ»‘ã€‚ 123456789101112131415161718private fun customizeSplashScreenExit() &#123; splashScreen.setOnExitAnimationListener &#123; splashScreenView -&gt; showSplashIconExitAnimator(splashScreenView) &#125;&#125;private fun showSplashIconExitAnimator(splashScreenView: SplashScreenView) &#123; val iconView = splashScreenView.iconView ?: return val slideUp = ObjectAnimator.ofFloat( splashScreenView.iconView, View.TRANSLATION_Y, 0f, -iconView.height * 2.toFloat() ) ... slideUp.start()&#125;å¤åˆ¶ä»£ç  3.4 é€€å‡ºåŠ¨ç”»çš„é€‚å½“æ—¶é•¿é’ˆå¯¹é€€å‡ºåŠ¨ç”»çš„å®šåˆ¶å®˜æ–¹è¿˜æœ‰ä¸€æ®µè¡¥å……è¯´æ˜Žã€‚ By the start of this callback, the animated vector drawable on the splash screen has begun. Depending on the duration of the app launch, the drawable might be in the middle of its animation. Use SplashScreenView.getIconAnimationStart to know when the animation started. You can calculate the remaining duration of the icon animation. ç®€è¨€ä¹‹ï¼Œé€€å‡ºç”»é¢å›žè°ƒçš„æ—¶å€™IconåŠ¨ç”»å¯èƒ½è¿›è¡Œåˆ°äº†ä¸€åŠï¼Œæœ€å¥½è®¡ç®—IconåŠ¨ç”»çš„å‰©ä½™æ—¶é•¿æ¥æ‰§è¡Œé€€å‡ºåŠ¨ç”»ã€‚ åŽŸå› åœ¨äºŽè®¾å¤‡æ€§èƒ½ä¼šå½±å“Appæç”»çš„æ—©æ™šï¼Œè€Œç¬¬ä¸€å¸§æç”»çš„æ—¶å€™ä¸Šè¿°çš„é€€å‡ºå›žè°ƒå°†è¢«æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ€§èƒ½çš„ä¼˜åŠ£ä¼šå½±å“å¯åŠ¨ç”»é¢é€€å‡ºçš„å›žè°ƒæ—¶æœºã€‚ æ€§èƒ½å¥½çš„è¯ï¼Œç”»é¢é€€å‡ºçš„å›žè°ƒè¾ƒæ—©ã€‚æ­¤æ—¶IconåŠ¨ç”»å°šåœ¨è¿›è¡Œå½“ä¸­ï¼Œå¯ä»¥å°†IconåŠ¨ç”»çš„é¢„è®¾æ—¶é•¿çš„å‰©ä½™æ—¶é—´äº¤æŽ¥ç»™é€€å‡ºæ•ˆæžœæ¥æ‰§è¡Œ æ€§èƒ½å·®çš„è¯ï¼Œç”»é¢é€€å‡ºçš„å›žè°ƒç¨æ™šã€‚IconåŠ¨ç”»æ—©å·²ç»ç»“æŸï¼Œä¸ºäº†è®©ç”¨æˆ·å°½æ—©çœ‹åˆ°ç”»é¢å†…å®¹ï¼Œå°±ä¸è¯¥å†æ‰§è¡Œé€€å‡ºæ•ˆæžœäº†è€Œæ˜¯ç›´æŽ¥é€€å‡º ä¸èƒ½ä¸ºäº†å±•ç¤ºæ•ˆæžœè€Œè®©ç”¨æˆ·ä¹…ç­‰ï¼Œå¦åˆ™ä¼šå¼„å·§æˆæ‹™ã€‚ å€ŸåŠ©SplashScreenViewçš„iconAnimationStartMilliså’ŒiconAnimationDurationMillisæ–¹æ³•å¯ä»¥æŽ¨ç®—å‡ºIconåŠ¨ç”»çš„å‰©ä½™æ—¶é•¿ã€‚ *æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œçš„ç¼˜æ•…ï¼Œå¤§éƒ¨åˆ†æ—¶å€™æˆ‘çš„Demoåœ¨å¯åŠ¨ç”»é¢é€€å‡ºçš„æ—¶å€™IconåŠ¨ç”»éƒ½ç»“æŸäº†ï¼Œå°‘éƒ¨åˆ†æƒ…å†µä¸‹åŠ¨ç”»è¿˜å‰©ä½™ä¸€ç‚¹æ—¶é—´ï¼Œå¯èƒ½å®žæœºçš„æƒ…å†µä¼šä¸ä¸€æ ·ã€‚ 12345678910111213141516171819202122private fun showSplashIconExitAnimator(splashScreenView: SplashScreenView) &#123; slideUp.duration = getRemainingDuration(splashScreenView) ...&#125;fun getRemainingDuration(splashScreenView: SplashScreenView): Long &#123; // å–å¾—IconåŠ¨ç”»çš„æ—¶é•¿ val animationDuration = splashScreenView.iconAnimationDurationMillis // å–å¾—IconåŠ¨ç”»çš„å¼€å§‹æ—¶åˆ» val animationStart = splashScreenView.iconAnimationStartMillis // å†ç»“åˆå½“å‰æ—¶é—´è®¡ç®—å‡ºIconåŠ¨ç”»çš„å‰©ä½™æ—¶é•¿ // 1. æ—¶é•¿ä¸ºè´Ÿåˆ™å›ºå®šä¸º0mså³ç›´æŽ¥é€€å‡º // 2. æ—¶é•¿ä¸ºæ­£åˆ™é‡‡ç”¨è¯¥æ—¶é•¿æ‰§è¡Œé€€å‡ºåŠ¨ç”» return if (animationDuration != null &amp;&amp; animationStart != null) &#123; (animationDuration - SystemClock.uptimeMillis() + animationStart) .coerceAtLeast(0L) &#125; else &#123; 0L &#125;&#125;å¤åˆ¶ä»£ç  4 SplashScreenç›¸å…³API4.1 ç±»å’ŒæŽ¥å£ ç±»/æŽ¥å£ ä½œç”¨ SplashScreen å¯åŠ¨ç”»é¢ç®¡ç†æŽ¥å£ï¼Œé€šè¿‡Activity#getSplashScreenå–å¾— OnExitAnimationListener å¯åŠ¨ç”»é¢é€€å‡ºçš„å›žè°ƒæŽ¥å£ï¼Œé€šè¿‡SplashScreen#setOnExitAnimationListeneræ³¨å†Œ SplashScreenView å¯åŠ¨ç”»é¢åŒ…å«çš„è§†å›¾ï¼Œç”¨ä»¥å®šåˆ¶æ•´ä½“æˆ–Iconçš„é€€å‡ºåŠ¨ç”» 4.2 å±žæ€§ attr ä½œç”¨ å¤‡æ³¨ splashScreenTheme æŒ‡å®šSplashScreenç›¸å…³çš„Style å­˜åœ¨ä¸€ç‚¹é—®é¢˜æ¯”å¦‚brandå›¾ç‰‡ä¼šä¸æ˜¾ç¤º windowSplashScreenBackground å®šåˆ¶å¯åŠ¨ç”»é¢çš„èƒŒæ™¯ é»˜è®¤ä»ŽwindowBackgroundé‡Œè¯»å– windowSplashScreenBrandingImage æŒ‡å®šå¯åŠ¨ç”»é¢åº•éƒ¨çš„å“ç‰Œå›¾æ ‡ - windowSplashScreenAnimatedIcon æŒ‡å®šIconï¼Œæ”¯æŒé™æ€æˆ–åŠ¨ç”»Drawable - windowSplashScreenAnimationDuration æŒ‡å®šåŠ¨ç”»Iconæ—¶é•¿ ä¸Šé™1000ms windowSplashScreenIconBackgroundColor è¡¥å……IconèƒŒæ™¯è‰² - æ³¨æ„ï¼šwindowSplashscreenContentæ˜¯8.0ç‰ˆæœ¬æ–°å¢žçš„å®šåˆ¶å¯åŠ¨ç”»é¢çš„å±žæ€§ï¼Œè‡ª12å¼€å§‹åºŸå¼ƒäº†ï¼Œä½¿ç”¨windowSplashscreenAnimatedIconæ›¿ä»£ 4.3 SplashScreençš„æž„æˆ 5 æ³¨æ„éœ€è¦å°é²œSplashScreençš„è¯ï¼Œéœ€è¦åœ¨Android 12ä¸Šå¼€å‘ï¼Œå¹¶åšå¦‚ä¸‹å¿…è¦é…ç½®ã€‚ compileSdkVersionå’ŒtargetSdkVersionå£°æ˜Žä¸ºS android:exported=&quot;true&quot;ï¼Œæ˜Žç¤ºå£°æ˜Žå¯åŠ¨ç”»é¢çš„å¯è§æ€§ï¼Œå¦åˆ™ä¼šå®‰è£…å¤±è´¥ å¦å¤–å¯åŠ¨é¡µçš„Iconæ— è®ºæ˜¯é™æ€çš„è¿˜æ˜¯åŠ¨ç”»æ•ˆæžœçš„ï¼Œéƒ½åº”éµå¾ªAdaptive Iconçš„è§„èŒƒï¼Œä¸ç„¶Iconä¼šå‘ç”Ÿå˜å½¢ã€‚ 6 ç»“è¯­Android 12ä¸Šå…¨æ–°çš„SplashScreen APIéžå¸¸ç®€å•æ¸…æ™°ï¼Œæ•´ä¸ªå®šåˆ¶è¿‡ç¨‹éžå¸¸æµç•…ï¼ ç›¸ä¿¡åœ¨å…¨æ–°çš„APIåŠ æŒä¸‹ï¼ŒAPPçš„å¯åŠ¨ç”»é¢å¯ä»¥è¿¸å‘å‡ºæ›´å¤šç‰¹è‰²çš„ã€å¥½çŽ©çš„åˆ›æ„ã€‚ å¿«å¿«å°è¯•èµ·æ¥ï¼Œç»™ä½ çš„ç”¨æˆ·ç•™ä¸‹ç¬¬ä¸€çœ¼çš„å¥½å°è±¡~ æœ¬æ–‡DEMOgithub.com/ellisonchanâ€¦ å‚è€ƒèµ„æ–™æ¬¢è¿Žä½“éªŒ | Android 12 å¼€å‘è€…é¢„è§ˆç‰ˆ 3 SplashScreençš„å®˜æ–¹æ–‡æ¡£ SplashScreen API SplashScreenç›¸å…³attr è½¬è‡ªTechMerger https://juejin.cn/post/6962706834889113614]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»£ç å®žä¾‹å±•ç¤ºJavaå’ŒKotlinæœ‰å“ªäº›åŒºåˆ«]]></title>
    <url>%2Fposts%2F24470fc.html</url>
    <content type="text"><![CDATA[è‡ªä»Žè°·æ­Œ I/O 2017å®£å¸ƒå°†æ”¯æŒ Kotlin ä½œä¸º Android å¼€å‘çš„ First-Class è¯­è¨€ï¼Œç›¸ä¿¡å„ä½ç¨‹åºå‘˜çš„æœ‹å‹åœˆéƒ½è¢«Kotlinçš„æ¶ˆæ¯è½°ç‚¸äº†å§ï¼Œæ”¯æŒJavaçš„â€œå®ˆæ—§æ´¾â€è®¤ä¸ºJavaå°†ç¨³åéœ¸ä¸»åœ°ä½ä¸åŠ¨æ‘‡ï¼Œæ”¯æŒKotlinçš„â€œç»´æ–°æ´¾â€è®¤ä¸ºKotlinå¾ˆå¯èƒ½ä¼šæŠŠJavaæ‹‰ä¸‹é©¬ã€‚å…¶å®žï¼Œç¬”è€…è®¤ä¸ºæ–°è¯­è¨€çš„å‡ºçŽ°å¯¹äºŽç¨‹åºå‘˜æ¥è¯´å¹¶ä¸æ˜¯ä¸€ä»¶æ–°é²œäº‹å„¿ï¼Œç¨‹åºå‘˜å§‹ç»ˆè·µè¡Œç€â€œæ´»åˆ°è€ï¼Œå­¦åˆ°è€â€ï¼ŒçœŸæ­£èƒ½å¤Ÿå¯¹ç¨‹åºå‘˜äº§ç”Ÿå½±å“çš„æ–°è¯­è¨€çš„ä½¿ç”¨å’Œæ€§èƒ½ã€‚ æ˜“ç”¨æ€§ã€‚ åœ¨è¯­æ³•ç³–çš„åŠ æŒä¸‹ï¼Œkotlinèƒ½å¤Ÿç”¨æ›´çŸ­çš„ä»£ç å®žçŽ°æ›´å¤šçš„åŠŸèƒ½ã€‚è¿™æ˜¯java æ— æ³•æ¯”æ‹Ÿçš„ã€‚æ‰€è°“ä»£ç é‡è¶Šå°‘ï¼Œå‡ºbugçš„å¯èƒ½æ€§å°±è¶Šä½Žã€‚ kotlinç‰¹æœ‰çš„æ‰©å±•å±žæ€§ï¼Œä¸å†éœ€è¦javaå·¥å…·ç±»ï¼Œå¯¹å¼€å‘æ›´åŠ å‹å¥½ã€‚ æ¯”å¦‚æˆ‘ä»¬æƒ³å®žçŽ°å­—ç¬¦ä¸²åˆ¤ç©ºæ“ä½œï¼Œåœ¨javaä¸­éœ€è¦å†™ä¸€ä¸ªStringUtilç±»ï¼Œè¿™æ ·å…¶ä»–å¼€å‘åŒå­¦æƒ³å®žçŽ°è¯¥åŠŸèƒ½çš„æ—¶å€™ï¼Œå¯èƒ½å¹¶ä¸çŸ¥é“å·²ç»æœ‰äººå®žçŽ°äº†è¯¥åŠŸèƒ½ï¼Œå­˜åœ¨é‡å¤é€ è½®å­çš„å¯èƒ½ã€‚é€šè¿‡æ‰©å±•å±žæ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„çœ‹å‡ºStringç±»éƒ½å­˜åœ¨å“ªäº›æ–¹æ³•ã€‚ javaä¸­çš„beanç±»æ€»æ˜¯éœ€è¦ä½¿ç”¨æ’ä»¶ç”Ÿæˆsetter getteræ–¹æ³•ã€‚kotlinä¸­çš„dataå…³é”®å­—å¯ä»¥è§£å†³è¿™ç±»é—®é¢˜ï¼Œdataç±»åœ¨ç¼–è¯‘æœŸè‡ªåŠ¨ç”Ÿæˆgetter setteræ–¹æ³•ã€‚ è§„èŒƒæ€§ã€‚å·¥ç¨‹é¡¹ç›®éƒ½æ˜¯éœ€è¦æŒ‡å®šå¼€å‘è§„èŒƒçš„ã€‚æ¯”å¦‚å˜é‡å‘½åç­‰ã€‚åœ¨javaä¸­ï¼Œæ–¹æ³•é‡è½½çš„æ—¶å€™ä¼šç”Ÿæˆ@Overrideæ³¨è§£ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯å¼ºåˆ¶çº¦æŸçš„ã€‚kotlinçš„æ–¹æ³•é‡‡ç”¨overrideå…³é”®å­—è¿›è¡Œäº†å¼ºåˆ¶çº¦æŸã€‚ å†æ¯”å¦‚TODOã€‚javaä¸­çš„TODOæ˜¯ä»¥æ³¨é‡Šçš„å½¢å¼å­˜åœ¨ï¼Œå³ä½¿æ²¡æœ‰å®žçŽ°TODOå¤„çš„ä»£ç ï¼Œä¹Ÿæ²¡ä»€ä¹ˆè¿è¡Œæ—¶é—®é¢˜ã€‚kotlinçš„TODOå½¢å¼å¦‚ä¸‹ï¼š 123fun main(args: Array&lt;String&gt;) &#123; TODO()&#125; kotlin TODOçš„å®žçŽ° 12@kotlin.internal.InlineOnlypublic inline fun TODO(): Nothing = throw NotImplementedError() å¯ä»¥çœ‹åˆ°è¿è¡Œæ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ æ€è€ƒï¼šè¿™é‡Œä¸ºä»€ä¹ˆä¸åœ¨ç¼–è¯‘æœŸæŠ›å‡ºå¼‚å¸¸å‘¢ï¼Ÿ å®‰å…¨æ€§ã€‚javaä¸­è™½ç„¶æœ‰@Nullable @NotNullç­‰æ³¨è§£ã€‚ä½†æ˜¯ä¸ä¼šåœ¨ç¼–è¯‘æœŸèµ·ä½œç”¨ï¼Œè€Œæ˜¯åœ¨è¿è¡ŒæœŸæŠ›å‡ºå¼‚å¸¸ã€‚kotlinåœ¨å£°æ˜Žå˜é‡çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šå˜é‡æ˜¯å¦ä¸ºç©ºï¼Œè°ƒç”¨å¯ä¸ºç©ºå¯¹è±¡æ—¶ï¼Œéœ€è¦è¿›è¡Œç©ºåˆ¤æ–­ã€‚ è·¨å¹³å°ã€‚javaåœ¨jvmçš„ååŠ©ä¸‹è™½ç„¶ä¹Ÿæ˜¯è·¨å¹³å°è¯­è¨€ï¼Œä½†æ˜¯ä¸èƒ½åƒkotlinä¸€æ ·å¯ä»¥æ—¢å¯ä»¥ç¼–è¯‘æˆclasså­—èŠ‚ç ï¼Œåˆå¯ä»¥ç¼–è¯‘æˆjsã€‚ ç¼–è¯‘é€Ÿåº¦ã€‚åªæœ‰å…¨é‡ç¼–è¯‘ä¸‹ï¼Œkotlinæ¯”javaæ…¢ã€‚å¢žé‡ç¼–è¯‘ä¸‹ï¼Œä¸¤è€…å‡ ä¹Žæ²¡æœ‰å·®è·ã€‚ å…¶ä»–kotlinç‰¹æ€§ã€‚æ‡’åŠ è½½ã€é«˜é˜¶å‡½æ•°ã€åç¨‹ã€inlineæ“ä½œç¬¦ã€è¿ç®—ç¬¦é‡è½½ã€é»˜è®¤å‚æ•°ç­‰ã€‚ GitHub ç”¨æˆ·amitshekhariitbhuåœ¨GitHubä¸Šè´´å›¾åˆ†äº«äº†Javaå’ŒKotlinçš„è¯­æ³•åŒºåˆ«ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä¸€èµ·æ¥çœ‹ä¸€ä¸‹å§! æ‰“å°æ—¥å¿—123// javaSystem.out.print("Hello Word");System.out.println("Hello Word"); 123// Kotlinprint("Hello Word")println("Hello Word") å®šä¹‰å˜é‡å’Œå¸¸é‡123// javaString name = "Hello Word";final String name = "Hello Word"; 123// Kotlinvar name = "Hello Word"val name = "Hello Word" nullå£°æ˜Ž123// javaString otherName;otherName = null; 123// kotlin var otherName : String?otherName = null ç©ºåˆ¤æ–­1234// javaif (text != null) &#123; int length = text.length();&#125; 1234// kotlin text?.let &#123; val length = text.length&#125; å­—ç¬¦ä¸²æ‹¼æŽ¥1234// javaString firstName = "Android";String lastName = "ZM";String message = "My name is: " + firstName + " " + lastName; 1234// kotlin val firstName = "Android"val lastName = "ZM"val message = "My name is: $firstName $lastName" æ¢è¡Œ1234// javaString text = "First Line\n" + "Second Line\n" + "Third Line"; 123456// kotlin val text = """ |First Line |Second Line |Third Line """.trimMargin() ä¸‰å…ƒè¡¨è¾¾å¼12// javaString text = x &gt; 5 ? "x &gt; 5" : "x &lt;= 5"; 1234// kotlin val text = if (x &gt; 5) "x &gt; 5" else "x &lt;= 5" æ“ä½œç¬¦1234567// javafinal int andResult = a &amp; b;final int orResult = a | b;final int xorResult a ^ b;final int rightShift = a &gt;&gt; 2;final int leftShift = a &lt;&lt; 2;final int unsignedRightShift = a &gt;&gt;&gt; 2; 123456val andResult = a and b;val orResult = a or b;val xorResult a xor b;val rightShift = a shr 2;val leftShift = a shl 2;val unsignedRightShift = a ushr 2; ç±»åž‹åˆ¤æ–­å’Œè½¬æ¢(å£°æ˜Žå¼)12// javaCar car = (Car) object; 12// kotlin var car = object as Car ç±»åž‹åˆ¤æ–­å’Œè½¬æ¢(éšå¼)1234// javaif (object instanceof Car) &#123; Car car = (Car) object;&#125; 1234// kotlin if (object is Car) &#123; var car = object // smart casting&#125; å¤šé‡æ¡ä»¶12// javaif (score &gt;= 0 &amp;&amp; score &lt;= 300) &#123; &#125; 12// kotlin if (score in 0..300) &#123; &#125; æ›´çµæ´»çš„caseè¯­å¥12345678910111213141516171819202122232425// javaint score = // some score;String grade;switch (score) &#123; case 10: case 9: grade = "Excellent"; break; case 8: case 7: case 6: grade = "Good"; break; case 5: case 4: grade = "Ok"; break; case 3: case 2: case 1: grade = "Fail"; break; default: grade = "Fail"; &#125; 123456789// kotlin var score = // some scorevar grade = when (score) &#123; 9, 10 -&gt; "Excellent" in 6..8 -&gt; "Good" 4, 5 -&gt; "Ok" in 1..3 -&gt; "Fail" else -&gt; "Fail"&#125; forå¾ªçŽ¯1234567891011121314// javafor (int i = 1; i &lt;= 10 ; i++) &#123; &#125;for (int i = 1; i &lt; 10 ; i++) &#123; &#125;for (int i = 10; i &gt;= 0 ; i--) &#123; &#125;for (int i = 1; i &lt;= 10 ; i+=2) &#123; &#125;for (int i = 10; i &gt;= 0 ; i-=2) &#123; &#125;for (String item : collection) &#123; &#125;for (Map.Entry&lt;String, String&gt; entry: map.entrySet()) &#123; &#125; 1234567891011121314// kotlin for (i in 1..10) &#123; &#125;for (i in 1 until 10) &#123; &#125;for (i in 10 downTo 0) &#123; &#125;for (i in 1..10 step 2) &#123; &#125;for (i in 10 downTo 1 step 2) &#123; &#125;for (item in collection) &#123; &#125;for ((key, value) in map) &#123; &#125; æ›´æ–¹ä¾¿çš„é›†åˆæ“ä½œ1234567891011121314// javafinal List&lt;Integer&gt; listOfNumber = Arrays.asList(1, 2, 3, 4);final Map&lt;Integer, String&gt; keyValue = new HashMap&lt;Integer, String&gt;();map.put(1, "Amit");map.put(2, "Ali");map.put(3, "Mindorks");// Java 9final List&lt;Integer&gt; listOfNumber = List.of(1, 2, 3, 4);final Map&lt;Integer, String&gt; keyValue = Map.of(1, "Amit", 2, "Ali", 3, "Mindorks"); 12345// kotlin val listOfNumber = listOf(1, 2, 3, 4)val keyValue = mapOf(1 to "Amit", 2 to "Ali", 3 to "Mindorks") éåŽ†123456789101112131415161718// java// Java 7 and belowfor (Car car : cars) &#123; System.out.println(car.speed);&#125;// Java 8+cars.forEach(car -&gt; System.out.println(car.speed));// Java 7 and belowfor (Car car : cars) &#123; if (car.speed &gt; 100) &#123; System.out.println(car.speed); &#125;&#125;// Java 8+cars.stream().filter(car -&gt; car.speed &gt; 100).forEach(car -&gt; System.out.println(car.speed)); 1234567// kotlincars.forEach &#123; println(it.speed)&#125;cars.filter &#123; it.speed &gt; 100 &#125; .forEach &#123; println(it.speed)&#125; æ–¹æ³•å®šä¹‰1234567// javavoid doSomething() &#123; // logic here&#125;void doSomething(int... numbers) &#123; // logic here&#125; 123456fun doSomething() &#123; // logic here&#125;fun doSomething(vararg numbers: Int) &#123; // logic here&#125; å¸¦è¿”å›žå€¼çš„æ–¹æ³•12345// javaint getScore() &#123; // logic here return score;&#125; 12345678fun getScore(): Int &#123; // logic here return score&#125;// as a single-expression functionfun getScore(): Int = score æ— ç»“æŸç¬¦å·12345// javaint getScore(int value) &#123; // logic here return 2 * value;&#125; 12345678fun getScore(value: Int): Int &#123; // logic here return 2 * value&#125;// as a single-expression functionfun getScore(value: Int): Int = 2 * value constructoræž„é€ å™¨123456789101112// javapublic class Utils &#123; private Utils() &#123; // This utility class is not publicly instantiable &#125; public static int getScore(int value) &#123; return 2 * value; &#125; &#125; 123456789101112131415161718192021// kotlinclass Utils private constructor() &#123; companion object &#123; fun getScore(value: Int): Int &#123; return 2 * value &#125; &#125;&#125;// other way is also thereobject Utils &#123; fun getScore(value: Int): Int &#123; return 2 * value &#125;&#125; Get Setæž„é€ å™¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// javapublic class Developer &#123; private String name; private int age; public Developer(String name, int age) &#123; this.name = name; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public boolean equals(Object o) &#123; if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; Developer developer = (Developer) o; if (age != developer.age) return false; return name != null ? name.equals(developer.name) : developer.name == null; &#125; @Override public int hashCode() &#123; int result = name != null ? name.hashCode() : 0; result = 31 * result + age; return result; &#125; @Override public String toString() &#123; return "Developer&#123;" + "name='" + name + '\'' + ", age=" + age + '&#125;'; &#125;&#125; 12// kotlindata class Developer(var name: String, var age: Int) ç±»æ–¹æ³•1234567891011121314// javapublic class Utils &#123; private Utils() &#123; // This utility class is not publicly instantiable &#125; public static int triple(int value) &#123; return 3 * value; &#125; &#125;int result = Utils.triple(3); 123456// kotlinfun Int.triple(): Int &#123; return this * 3&#125;var result = 3.triple() æžšä¸¾1234567891011121314151617// javapublic enum Direction &#123; NORTH(1), SOUTH(2), WEST(3), EAST(4); int direction; Direction(int direction) &#123; this.direction = direction; &#125; public int getDirection() &#123; return direction; &#125; &#125; 1234567// kotlinenum class Direction(val direction: Int) &#123; NORTH(1), SOUTH(2), WEST(3), EAST(4);&#125; å®šä¹‰æœªåˆå§‹åŒ–çš„å¯¹è±¡12// javaPerson person; 12// kotlininternal lateinit var person: Person æŽ’åº12345678910// javaList&lt;Profile&gt; profiles = loadProfiles(context);Collections.sort(profiles, new Comparator&lt;Profile&gt;() &#123; @Override public int compare(Profile profile1, Profile profile2) &#123; if (profile1.getAge() &gt; profile2.getAge()) return 1; if (profile1.getAge() &lt; profile2.getAge()) return -1; return 0; &#125;&#125;); 1234567// kotlinval profile = loadProfiles(context)profile.sortedWith(Comparator(&#123; profile1, profile2 -&gt; if (profile1.age &gt; profile2.age) return@Comparator 1 if (profile1.age &lt; profile2.age) return@Comparator -1 return@Comparator 0&#125;)) åŒ¿åç±»1234567891011121314// java AsyncTask&lt;Void, Void, Profile&gt; task = new AsyncTask&lt;Void, Void, Profile&gt;() &#123; @Override protected Profile doInBackground(Void... voids) &#123; // fetch profile from API or DB return null; &#125; @Override protected void onPreExecute() &#123; super.onPreExecute(); // do something &#125;&#125;; 123456789101112// kotlinval task = object : AsyncTask&lt;Void, Void, Profile&gt;() &#123; override fun doInBackground(vararg voids: Void): Profile? &#123; // fetch profile from API or DB return null &#125; override fun onPreExecute() &#123; super.onPreExecute() // do something &#125;&#125; åˆå§‹åŒ–å—123456// javapublic class User &#123; &#123; //Initialization block System.out.println("Init block"); &#125;&#125; 123456// kotlin class User &#123; init &#123; // Initialization block println("Init block") &#125; &#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Branch deferred deep link æ·±åº¦é“¾æŽ¥]]></title>
    <url>%2Fposts%2F4f2dc96b.html</url>
    <content type="text"><![CDATA[Branch å®žçŽ°Androidç«¯ deferred deep link å®˜ç½‘sdkæ–‡æ¡£åœ°å€ï¼šhttps://docs.branch.io/apps/android/1. Configure Branchï¼ˆé…ç½®Branchï¼‰ 2. Install Branch Import the Branch SDK to your build.gradle 1234567 // required for all Android apps implementation 'io.branch.sdk.android:library:3.+' // required if your app is in the Google Play Store implementation 'com.google.android.gms:play-services-appindexing:9.+' // App indexing implementation 'com.google.android.gms:play-services-ads:9+' // GAID matching123456 3.Configure app Add Branch to your AndroidManifest.xml 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.eneff.branch.example.android"&gt; &lt;uses-permission android:name="android.permission.INTERNET" /&gt; &lt;application android:allowBackup="true" android:name="com.eneff.branch.example.android.CustomApplicationClass" android:icon="@mipmap/ic_launcher" android:label="@string/app_name" android:supportsRtl="true" android:theme="@style/AppTheme"&gt; &lt;!-- Launcher Activity to handle incoming Branch intents --&gt; &lt;activity android:name=".LauncherActivity" android:launchMode="singleTask" android:label="@string/app_name" android:theme="@style/AppTheme.NoActionBar"&gt; &lt;intent-filter&gt; &lt;action android:name="android.intent.action.MAIN" /&gt; &lt;category android:name="android.intent.category.LAUNCHER" /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; &lt;activity android:name=".intelsports.ShareShowActivity"&gt; &lt;!-- Branch App Links (optional) --&gt; &lt;intent-filter android:autoVerify="true"&gt; &lt;action android:name="android.intent.action.VIEW" /&gt; &lt;category android:name="android.intent.category.DEFAULT" /&gt; &lt;category android:name="android.intent.category.BROWSABLE" /&gt; &lt;data android:scheme="olp" android:host="sports.app.link" /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; &lt;!-- Branch init --&gt; &lt;meta-data android:name="io.branch.sdk.BranchKey" android:value="key_live_kaFuWw8WvY7yn1d9yYiP8gokwqjV0Sw" /&gt; &lt;!-- Branch install referrer tracking (optional) --&gt; &lt;receiver android:name="io.branch.referral.InstallListener" android:exported="true"&gt; &lt;intent-filter&gt; &lt;action android:name="com.android.vending.INSTALL_REFERRER" /&gt; &lt;/intent-filter&gt; &lt;/receiver&gt; &lt;/application&gt;&lt;/manifest&gt;123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051 Replace the following with values from your Branch Dashboard App settings and Link settings example.app.linkkey_live_kaFuWw8WvY7yn1d9yYiP8gokwqjV0Sw ä»¥ä¸Šæ˜¯Branchçš„é…ç½®ä¿¡æ¯è®¾ç½®ï¼ŒæŽ¥ä¸‹æ¥è¿›è¡ŒBranchçš„åˆå§‹åŒ–å·¥ä½œ 4.Initialize Branch Add Branch to your LauncherActivity.java 123456789101112131415161718192021222324252627282930313233public class LauncherActivity extends AppCompatActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_launcher); &#125; @Override public void onStart() &#123; super.onStart(); // Branch init Branch.getInstance().initSession(new Branch.BranchReferralInitListener() &#123; @Override public void onInitFinished(JSONObject referringParams, BranchError error) &#123; if (error == null) &#123; Log.i("BRANCH SDK", referringParams.toString()); // Retrieve deeplink keys from 'referringParams' and evaluate the values to determine where to route the user // Check '+clicked_branch_link' before deciding whether to use your Branch routing logic &#125; else &#123; Log.i("BRANCH SDK", error.getMessage()); &#125; &#125; &#125;, this.getIntent().getData(), this); &#125; @Override public void onNewIntent(Intent intent) &#123; this.setIntent(intent); &#125;&#125;1234567891011121314151617181920212223242526272829303132 5.Load Branch Add Branch to your CustomApplicationClass.java 12345678910111213public class CustomApplicationClass extends Application &#123; @Override public void onCreate() &#123; super.onCreate(); // Branch logging for debugging Branch.enableDebugMode(); // Branch object initialization Branch.getAutoInstance(this); &#125;&#125;123456789101112 6.Test deep link 1234567891011121314151617BranchUniversalObject buo = new BranchUniversalObject(); LinkProperties lp = new LinkProperties() .addControlParameter("custom1", "data1") //ä¼ å…¥è‡ªå®šä¹‰æ•°æ® .addControlParameter("custom2", "data2");buo.generateShortUrl(this, lp, new Branch.BranchLinkCreateListener() &#123; @Override public void onLinkCreate(String url, BranchError error) &#123; if (error == null) &#123; //å¾—åˆ°çŸ­é“¾æŽ¥ï¼Œç”¨äºŽåˆ†äº« Log.i("BRANCH SDK", "got my Branch link to share: " + url); &#125; &#125;&#125;);12345678910111213141516 ä½¿ç”¨ç¬¬ä¸‰æ–¹åˆ†äº«æˆ–ç³»ç»Ÿè‡ªå¸¦åˆ†äº«å·¥å…·ï¼Œå°†ä»¥ä¸ŠçŸ­é“¾æŽ¥urlåˆ†äº«å³å¯ã€‚ 7.Read deep link(è¯»å–depplinkä¸­æºå¸¦çš„æ•°æ®) åœ¨è¦å¯åŠ¨çš„ShareShowActivityæˆ–LauncherActivity onStartæ–¹æ³•ä¸­å®žçŽ°ã€‚å³å¯è¯»å–å‡ºJSONObjectä¸­ç›¸åº”æ•°æ® 1234567891011121314151617// listener (within Main Activity's onStart)Branch.getInstance().initSession(new Branch.BranchReferralInitListener() &#123; @Override public void onInitFinished(JSONObject referringParams, BranchError error) &#123; if (error == null) &#123; Log.i("BRANCH SDK", referringParams.toString()); &#125; else &#123; Log.i("BRANCH SDK", error.getMessage()); &#125; &#125;&#125;, this.getIntent().getData(), this);// latestJSONObject sessionParams = Branch.getInstance().getLatestReferringParams();// first è‹¥è®¾å¤‡æœªå®‰è£…appï¼Œç”¨æˆ·å®‰è£…appåŽç¬¬ä¸€æ¬¡å¯åŠ¨å³å¯èŽ·å–deep linkä¸­çš„æ•°æ®JSONObject installParams = Branch.getInstance().getFirstReferringParams();]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Jetpack ViewModel]]></title>
    <url>%2Fposts%2F837f0209.html</url>
    <content type="text"><![CDATA[å®˜æ–¹æ–‡æ¡£ ViewModelæ¦‚è§ˆViewModelç±»æ—¨åœ¨ä»¥æ³¨é‡ç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼å­˜å‚¨å’Œç®¡ç†ç•Œé¢ç›¸å…³çš„æ•°æ®ã€‚ViewModelç±»è®©æ•°æ®å¯åœ¨å‘ç”Ÿå±å¹•æ—‹è½¬ç­‰é…ç½®æ›´æ”¹åŽç»§ç»­å­˜åœ¨ã€‚ Android æ¡†æž¶å¯ä»¥ç®¡ç†ç•Œé¢æŽ§åˆ¶å™¨ï¼ˆå¦‚ Activity å’Œ Fragmentï¼‰çš„ç”Ÿå‘½å‘¨æœŸã€‚Android æ¡†æž¶å¯èƒ½ä¼šå†³å®šé”€æ¯æˆ–é‡æ–°åˆ›å»ºç•Œé¢æŽ§åˆ¶å™¨ï¼Œä»¥å“åº”å®Œå…¨ä¸å—æ‚¨æŽ§åˆ¶çš„æŸäº›ç”¨æˆ·æ“ä½œæˆ–è®¾å¤‡äº‹ä»¶ã€‚ å¦‚æžœç³»ç»Ÿé”€æ¯æˆ–é‡æ–°åˆ›å»ºç•Œé¢æŽ§åˆ¶å™¨ï¼Œåˆ™å­˜å‚¨åœ¨å…¶ä¸­çš„ä»»ä½•ä¸´æ—¶æ€§ç•Œé¢ç›¸å…³æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚ä¾‹å¦‚ï¼Œåº”ç”¨çš„æŸä¸ª Activity ä¸­å¯èƒ½åŒ…å«ç”¨æˆ·åˆ—è¡¨ã€‚å› é…ç½®æ›´æ”¹è€Œé‡æ–°åˆ›å»º Activity åŽï¼Œæ–° Activity å¿…é¡»é‡æ–°æå–ç”¨æˆ·åˆ—è¡¨ã€‚å¯¹äºŽç®€å•çš„æ•°æ®ï¼ŒActivity å¯ä»¥ä½¿ç”¨ onSaveInstanceState() æ–¹æ³•ä»Ž onCreate() ä¸­çš„æ†ç»‘åŒ…æ¢å¤å…¶æ•°æ®ï¼Œä½†æ­¤æ–¹æ³•ä»…é€‚åˆå¯ä»¥åºåˆ—åŒ–å†ååºåˆ—åŒ–çš„å°‘é‡æ•°æ®ï¼Œè€Œä¸é€‚åˆæ•°é‡å¯èƒ½è¾ƒå¤§çš„æ•°æ®ï¼Œå¦‚ç”¨æˆ·åˆ—è¡¨æˆ–ä½å›¾ã€‚ å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œç•Œé¢æŽ§åˆ¶å™¨ç»å¸¸éœ€è¦è¿›è¡Œå¼‚æ­¥è°ƒç”¨ï¼Œè¿™äº›è°ƒç”¨å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ‰èƒ½è¿”å›žç»“æžœã€‚ç•Œé¢æŽ§åˆ¶å™¨éœ€è¦ç®¡ç†è¿™äº›è°ƒç”¨ï¼Œå¹¶ç¡®ä¿ç³»ç»Ÿåœ¨å…¶é”€æ¯åŽæ¸…ç†è¿™äº›è°ƒç”¨ä»¥é¿å…æ½œåœ¨çš„å†…å­˜æ³„éœ²ã€‚æ­¤é¡¹ç®¡ç†éœ€è¦å¤§é‡çš„ç»´æŠ¤å·¥ä½œï¼Œå¹¶ä¸”åœ¨å› é…ç½®æ›´æ”¹è€Œé‡æ–°åˆ›å»ºå¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä¼šé€ æˆèµ„æºçš„æµªè´¹ï¼Œå› ä¸ºå¯¹è±¡å¯èƒ½éœ€è¦é‡æ–°å‘å‡ºå·²ç»å‘å‡ºè¿‡çš„è°ƒç”¨ã€‚ è¯¸å¦‚ Activity å’Œ Fragment ä¹‹ç±»çš„ç•Œé¢æŽ§åˆ¶å™¨ä¸»è¦ç”¨äºŽæ˜¾ç¤ºç•Œé¢æ•°æ®ã€å¯¹ç”¨æˆ·æ“ä½œåšå‡ºå“åº”æˆ–å¤„ç†æ“ä½œç³»ç»Ÿé€šä¿¡ï¼ˆå¦‚æƒé™è¯·æ±‚ï¼‰ã€‚å¦‚æžœè¦æ±‚ç•Œé¢æŽ§åˆ¶å™¨ä¹Ÿè´Ÿè´£ä»Žæ•°æ®åº“æˆ–ç½‘ç»œåŠ è½½æ•°æ®ï¼Œé‚£ä¹ˆä¼šä½¿ç±»è¶Šå‘è†¨èƒ€ã€‚ä¸ºç•Œé¢æŽ§åˆ¶å™¨åˆ†é…è¿‡å¤šçš„è´£ä»»å¯èƒ½ä¼šå¯¼è‡´å•ä¸ªç±»å°è¯•è‡ªå·±å¤„ç†åº”ç”¨çš„æ‰€æœ‰å·¥ä½œï¼Œè€Œä¸æ˜¯å°†å·¥ä½œå§”æ‰˜ç»™å…¶ä»–ç±»ã€‚ä»¥è¿™ç§æ–¹å¼ä¸ºç•Œé¢æŽ§åˆ¶å™¨åˆ†é…è¿‡å¤šçš„è´£ä»»ä¹Ÿä¼šå¤§å¤§å¢žåŠ æµ‹è¯•çš„éš¾åº¦ã€‚ ä»Žç•Œé¢æŽ§åˆ¶å™¨é€»è¾‘ä¸­åˆ†ç¦»å‡ºè§†å›¾æ•°æ®æ‰€æœ‰æƒçš„åšæ³•æ›´æ˜“è¡Œä¸”æ›´é«˜æ•ˆã€‚ å®žçŽ°ViewModelæž¶æž„ç»„ä»¶ä¸ºç•Œé¢æŽ§åˆ¶å™¨æä¾›äº† ViewModel è¾…åŠ©ç¨‹åºç±»ï¼Œè¯¥ç±»è´Ÿè´£ä¸ºç•Œé¢å‡†å¤‡æ•°æ®ã€‚ åœ¨é…ç½®æ›´æ”¹æœŸé—´ä¼šè‡ªåŠ¨ä¿ç•™ ViewModel å¯¹è±¡ï¼Œä»¥ä¾¿å®ƒä»¬å­˜å‚¨çš„æ•°æ®ç«‹å³å¯ä¾›ä¸‹ä¸€ä¸ª Activity æˆ– Fragment å®žä¾‹ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ‚¨éœ€è¦åœ¨åº”ç”¨ä¸­æ˜¾ç¤ºç”¨æˆ·åˆ—è¡¨ï¼Œè¯·ç¡®ä¿å°†èŽ·å–å’Œä¿ç•™è¯¥ç”¨æˆ·åˆ—è¡¨çš„è´£ä»»åˆ†é…ç»™ ViewModelï¼Œè€Œä¸æ˜¯ Activity æˆ– Fragmentï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ‰€ç¤ºï¼š 12345678910111213141516 public class MyViewModel extends ViewModel &#123; private MutableLiveData&lt;List&lt;User&gt;&gt; users; public LiveData&lt;List&lt;User&gt;&gt; getUsers() &#123; if (users == null) &#123; users = new MutableLiveData&lt;List&lt;User&gt;&gt;(); loadUsers(); &#125; return users; &#125; private void loadUsers() &#123; // Do an asynchronous operation to fetch users. &#125; &#125; 123456789101112131415 ç„¶åŽï¼Œæ‚¨å¯ä»¥ä»Ž Activity è®¿é—®è¯¥åˆ—è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213 public class MyActivity extends AppCompatActivity &#123; public void onCreate(Bundle savedInstanceState) &#123; // Create a ViewModel the first time the system calls an activity's onCreate() method. // Re-created activities receive the same MyViewModel instance created by the first activity. MyViewModel model = ViewModelProviders.of(this).get(MyViewModel.class); model.getUsers().observe(this, users -&gt; &#123; // update UI &#125;); &#125; &#125; 123456789101112 å¦‚æžœé‡æ–°åˆ›å»ºäº†è¯¥ Activityï¼Œå®ƒæŽ¥æ”¶çš„ MyViewModel å®žä¾‹ä¸Žç¬¬ä¸€ä¸ª Activity åˆ›å»ºçš„å®žä¾‹ç›¸åŒã€‚å½“æ‰€æœ‰è€… Activity å®Œæˆæ—¶ï¼Œæ¡†æž¶ä¼šè°ƒç”¨ ViewModel å¯¹è±¡çš„ onCleared() æ–¹æ³•ï¼Œä»¥ä¾¿å®ƒå¯ä»¥æ¸…ç†èµ„æºã€‚ æ³¨æ„ï¼šViewModel ç»ä¸èƒ½å¼•ç”¨è§†å›¾ã€Lifecycle æˆ–å¯èƒ½å­˜å‚¨å¯¹ Activity ä¸Šä¸‹æ–‡çš„å¼•ç”¨çš„ä»»ä½•ç±»ã€‚ ViewModel å¯¹è±¡å­˜åœ¨çš„æ—¶é—´æ¯”è§†å›¾æˆ– LifecycleOwners çš„ç‰¹å®šå®žä¾‹å­˜åœ¨çš„æ—¶é—´æ›´é•¿ã€‚è¿™è¿˜æ„å‘³ç€ï¼Œæ‚¨å¯ä»¥æ›´è½»æ¾åœ°ç¼–å†™æ¶µç›– ViewModel çš„æµ‹è¯•ï¼Œå› ä¸ºå®ƒä¸äº†è§£è§†å›¾å’Œ Lifecycle å¯¹è±¡ã€‚ViewModel å¯¹è±¡å¯ä»¥åŒ…å« LifecycleObserversï¼Œå¦‚ LiveData å¯¹è±¡ã€‚ä½†æ˜¯ï¼ŒViewModel å¯¹è±¡ç»ä¸èƒ½è§‚å¯Ÿå¯¹ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥åž‹å¯è§‚å¯Ÿå¯¹è±¡ï¼ˆå¦‚ LiveData å¯¹è±¡ï¼‰çš„æ›´æ”¹ã€‚ å¦‚æžœ ViewModel éœ€è¦ Application ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚ï¼Œä¸ºäº†æŸ¥æ‰¾ç³»ç»ŸæœåŠ¡ï¼‰ï¼Œå®ƒå¯ä»¥æ‰©å±• AndroidViewModel ç±»å¹¶è®¾ç½®ç”¨äºŽæŽ¥æ”¶ Application çš„æž„é€ å‡½æ•°ï¼Œå› ä¸º Application ç±»ä¼šæ‰©å±• Contextã€‚ ViewModelçš„ç”Ÿå‘½å‘¨æœŸViewModel å¯¹è±¡å­˜åœ¨çš„æ—¶é—´èŒƒå›´æ˜¯èŽ·å– ViewModel æ—¶ä¼ é€’ç»™ ViewModelProvider çš„ Lifecycleã€‚ViewModel å°†ä¸€ç›´ç•™åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°é™å®šå…¶å­˜åœ¨æ—¶é—´èŒƒå›´çš„ Lifecycle æ°¸ä¹…æ¶ˆå¤±ï¼šå¯¹äºŽ Activityï¼Œæ˜¯åœ¨ Activity å®Œæˆæ—¶ï¼›è€Œå¯¹äºŽ Fragmentï¼Œæ˜¯åœ¨ Fragment åˆ†ç¦»æ—¶ã€‚ å›¾ 1 è¯´æ˜Žäº† Activity ç»åŽ†å±å¹•æ—‹è½¬è€ŒåŽç»“æŸçš„è¿‡ç¨‹ä¸­æ‰€å¤„çš„å„ç§ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ã€‚è¯¥å›¾è¿˜åœ¨å…³è”çš„ Activity ç”Ÿå‘½å‘¨æœŸçš„æ—è¾¹æ˜¾ç¤ºäº† ViewModel çš„ç”Ÿå‘½å‘¨æœŸã€‚æ­¤å›¾è¡¨è¯´æ˜Žäº† Activity çš„å„ç§çŠ¶æ€ã€‚è¿™äº›åŸºæœ¬çŠ¶æ€åŒæ ·é€‚ç”¨äºŽ Fragment çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‚¨é€šå¸¸åœ¨ç³»ç»Ÿé¦–æ¬¡è°ƒç”¨ Activity å¯¹è±¡çš„ onCreate() æ–¹æ³•æ—¶è¯·æ±‚ ViewModelã€‚ç³»ç»Ÿå¯èƒ½ä¼šåœ¨ Activity çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…å¤šæ¬¡è°ƒç”¨ onCreate()ï¼Œå¦‚åœ¨æ—‹è½¬è®¾å¤‡å±å¹•æ—¶ã€‚ViewModel å­˜åœ¨çš„æ—¶é—´èŒƒå›´æ˜¯ä»Žæ‚¨é¦–æ¬¡è¯·æ±‚ ViewModel ç›´åˆ° Activity å®Œæˆå¹¶é”€æ¯ã€‚ åœ¨ Fragment ä¹‹é—´å…±äº«æ•°æ®Activity ä¸­çš„ä¸¤ä¸ªæˆ–æ›´å¤š Fragment éœ€è¦ç›¸äº’é€šä¿¡æ˜¯ä¸€ç§å¾ˆå¸¸è§çš„æƒ…å†µã€‚æƒ³è±¡ä¸€ä¸‹ä¸»ä»Ž Fragment çš„å¸¸è§æƒ…å†µï¼Œå‡è®¾æ‚¨æœ‰ä¸€ä¸ª Fragmentï¼Œåœ¨è¯¥ Fragment ä¸­ï¼Œç”¨æˆ·ä»Žåˆ—è¡¨ä¸­é€‰æ‹©ä¸€é¡¹ï¼Œè¿˜æœ‰å¦ä¸€ä¸ª Fragmentï¼Œç”¨äºŽæ˜¾ç¤ºé€‰å®šé¡¹çš„å†…å®¹ã€‚è¿™ç§æƒ…å†µä¸å¤ªå®¹æ˜“å¤„ç†ï¼Œå› ä¸ºè¿™ä¸¤ä¸ª Fragment éƒ½éœ€è¦å®šä¹‰æŸç§æŽ¥å£æè¿°ï¼Œå¹¶ä¸”æ‰€æœ‰è€… Activity å¿…é¡»å°†ä¸¤è€…ç»‘å®šåœ¨ä¸€èµ·ã€‚æ­¤å¤–ï¼Œè¿™ä¸¤ä¸ª Fragment éƒ½å¿…é¡»å¤„ç†å¦ä¸€ä¸ª Fragment å°šæœªåˆ›å»ºæˆ–ä¸å¯è§çš„æƒ…å†µã€‚ å¯ä»¥ä½¿ç”¨ ViewModel å¯¹è±¡è§£å†³è¿™ä¸€å¸¸è§çš„éš¾ç‚¹ã€‚è¿™ä¸¤ä¸ª Fragment å¯ä»¥ä½¿ç”¨å…¶ Activity èŒƒå›´å…±äº« ViewModel æ¥å¤„ç†æ­¤ç±»é€šä¿¡ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ä»£ç æ‰€ç¤ºï¼š 12345678910111213141516171819202122232425262728293031323334 public class SharedViewModel extends ViewModel &#123; private final MutableLiveData&lt;Item&gt; selected = new MutableLiveData&lt;Item&gt;(); public void select(Item item) &#123; selected.setValue(item); &#125; public LiveData&lt;Item&gt; getSelected() &#123; return selected; &#125; &#125; public class MasterFragment extends Fragment &#123; private SharedViewModel model; public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class); itemSelector.setOnClickListener(item -&gt; &#123; model.select(item); &#125;); &#125; &#125; public class DetailFragment extends Fragment &#123; public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); SharedViewModel model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class); model.getSelected().observe(this, &#123; item -&gt; // Update the UI. &#125;); &#125; &#125; 123456789101112131415161718192021222324252627282930313233 æ­¤æ–¹æ³•å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š Activity ä¸éœ€è¦æ‰§è¡Œä»»ä½•æ“ä½œï¼Œä¹Ÿä¸éœ€è¦å¯¹æ­¤é€šä¿¡æœ‰ä»»ä½•äº†è§£ã€‚ é™¤äº† SharedViewModel çº¦å®šä¹‹å¤–ï¼ŒFragment ä¸éœ€è¦ç›¸äº’äº†è§£ã€‚å¦‚æžœå…¶ä¸­ä¸€ä¸ª Fragment æ¶ˆå¤±ï¼Œå¦ä¸€ä¸ª Fragment å°†ç»§ç»­ç…§å¸¸å·¥ä½œã€‚ æ¯ä¸ª Fragment éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œä¸å—å¦ä¸€ä¸ª Fragment çš„ç”Ÿå‘½å‘¨æœŸçš„å½±å“ã€‚å¦‚æžœä¸€ä¸ª Fragment æ›¿æ¢å¦ä¸€ä¸ª Fragmentï¼Œç•Œé¢å°†ç»§ç»­å·¥ä½œè€Œæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ å°†åŠ è½½å™¨æ›¿æ¢ä¸º ViewModelè¯¸å¦‚ CursorLoader ä¹‹ç±»çš„åŠ è½½å™¨ç±»ç»å¸¸ç”¨äºŽä½¿åº”ç”¨ç•Œé¢ä¸­çš„æ•°æ®ä¸Žæ•°æ®åº“ä¿æŒåŒæ­¥ã€‚æ‚¨å¯ä»¥å°† ViewModel ä¸Žä¸€äº›å…¶ä»–ç±»ä¸€èµ·ä½¿ç”¨æ¥æ›¿æ¢åŠ è½½å™¨ã€‚ä½¿ç”¨ ViewModel å¯å°†ç•Œé¢æŽ§åˆ¶å™¨ä¸Žæ•°æ®åŠ è½½æ“ä½œåˆ†ç¦»ï¼Œè¿™æ„å‘³ç€ç±»ä¹‹é—´çš„å¼ºå¼•ç”¨æ›´å°‘ã€‚ åœ¨ä½¿ç”¨åŠ è½½å™¨çš„ä¸€ç§å¸¸è§æ–¹æ³•ä¸­ï¼Œåº”ç”¨å¯èƒ½ä¼šä½¿ç”¨ CursorLoader è§‚å¯Ÿæ•°æ®åº“çš„å†…å®¹ã€‚å½“æ•°æ®åº“ä¸­çš„å€¼å‘ç”Ÿæ›´æ”¹æ—¶ï¼ŒåŠ è½½å™¨ä¼šè‡ªåŠ¨è§¦å‘æ•°æ®çš„é‡æ–°åŠ è½½å¹¶æ›´æ–°ç•Œé¢ï¼šViewModel ä¸Ž Room å’Œ LiveData ä¸€èµ·ä½¿ç”¨å¯æ›¿æ¢åŠ è½½å™¨ã€‚ViewModel ç¡®ä¿æ•°æ®åœ¨è®¾å¤‡é…ç½®æ›´æ”¹åŽä»ç„¶å­˜åœ¨ã€‚Room åœ¨æ•°æ®åº“å‘ç”Ÿæ›´æ”¹æ—¶é€šçŸ¥ LiveDataï¼ŒLiveData è¿›è€Œä½¿ç”¨ä¿®è®¢åŽçš„æ•°æ®æ›´æ–°ç•Œé¢ã€‚ ç¤ºä¾‹å®˜æ–¹ç¤ºä¾‹]]></content>
      <categories>
        <category>Android</category>
        <category>Jetpack</category>
      </categories>
      <tags>
        <tag>Kotlin</tag>
        <tag>Jetpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Jetpack]]></title>
    <url>%2Fposts%2Ff1035a2c.html</url>
    <content type="text"><![CDATA[Jetpackæ˜¯ä¸€å¥—åº“ã€å·¥å…·å’ŒæŒ‡å—ï¼Œå¯å¸®åŠ©å¼€å‘è€…æ›´è½»æ¾åœ°ç¼–å†™ä¼˜è´¨åº”ç”¨ã€‚è¿™äº›ç»„ä»¶å¯å¸®åŠ©æ‚¨éµå¾ªæœ€ä½³åšæ³•ã€è®©æ‚¨æ‘†è„±ç¼–å†™æ ·æ¿ä»£ç åœ°å·¥ä½œå¹¶ç®€åŒ–å¤æ‚ä»»åŠ¡ï¼Œä»¥ä¾¿å°†ç²¾åŠ›é›†ä¸­æ”¾åœ¨æ‰€éœ€ä»£ç ä¸Šã€‚ JetpackåŒ…å«ä¸Žå¹³å°APIè§£é™¤æ†ç»‘åœ°androidx.*è½¯ä»¶åŒ…åº“ã€‚è¿™æ„å‘³ç€ï¼Œå®ƒå¯ä»¥æä¾›å‘åŽå…¼å®¹æ€§ï¼Œä¸”æ¯”Androidå¹³å°åœ°æ›´æ–°é¢‘çŽ‡æ›´é«˜ï¼Œä¸€æ¬¡ç¡®ä¿æ‚¨å§‹ç»ˆå¯ä»¥èŽ·å–æœ€æ–°ä¸”æœ€å¥½åœ°Jetpackç»„ä»¶ç‰ˆæœ¬ã€‚ Android Jetpackç»„ä»¶Android Jetpackç»„ä»¶æ˜¯åº“çš„é›†åˆï¼Œè¿™äº›åº“æ˜¯ä¸ºååŒå·¥ä½œè€Œæž„å»ºçš„ï¼Œä¸è¿‡ä¹Ÿå¯ä»¥å•ç‹¬é‡‡ç”¨ï¼ŒåŒæ—¶åˆ©ç”¨Kotlinè¯­è¨€åŠŸèƒ½å¸®åŠ©æ‚¨æé«˜å·¥ä½œæ•ˆçŽ‡ï¼Œå¯å…¨éƒ¨ä½¿ç”¨ï¼Œä¹Ÿå¯æ··åˆæ­é…ï¼ åŸºç¡€ï¼ˆFoundationï¼‰åŸºç¡€ç»„ä»¶å¯æä¾›æ¨ªå‘åŠŸèƒ½ï¼Œä¾‹å…¥å‘åŽå…¼å®¹æ€§ã€æµ‹è¯•å’ŒKotlinè¯­è¨€æ”¯æŒã€‚ Android KTXç¼–å†™æ›´ç®€æ´ã€æƒ¯ç”¨çš„kotlinä»£ç  AppCompatåœ¨è¾ƒä½Žç‰ˆæœ¬çš„Androidç³»ç»Ÿä¸Šæ°å½“åœ°é™çº§ Autoæœ‰åŠ©äºŽå¼€å‘Android Autoåº”ç”¨åœ°ç»„ä»¶ æ£€æµ‹ä»ŽAndroid Studioä¸­å¿«é€Ÿæ£€æµ‹åŸºäºŽKotlinæˆ–Javaçš„ä»£ç  å¤šDexå¤„ç†ä¸ºå…·æœ‰å¤šä¸ªdexæ–‡ä»¶çš„åº”ç”¨æä¾›æ”¯æŒ å®‰å…¨æŒ‰ç…§å®‰å…¨æœ€ä½³åšæ³•è¯»å†™åŠ å¯†æ–‡ä»¶å’Œå…±äº«åå¥½è®¾ç½® æµ‹è¯•ç”¨äºŽå•å…ƒå’Œè¿è¡Œæ—¶ç•Œé¢æµ‹è¯•çš„Androidæµ‹è¯•æ¡†æž¶ TVæœ‰åŠ©äºŽå¼€å‘Android TVåº”ç”¨çš„ç»„ä»¶ Wear OS by Googleè°·æ­Œæœ‰åŠ©äºŽå¼€å‘Wearåº”ç”¨çš„ç»„ä»¶ æž¶æž„ï¼ˆArchitectureï¼‰æž¶æž„ç»„ä»¶å¯å¸®åŠ©æ‚¨è®¾è®¡æ–‡ä»¶ã€å¯æµ‹è¯•ä¸”æ˜“ç»´æŠ¤çš„åº”ç”¨ã€‚ æ•°æ®ç»‘å®šä»¥å£°æ˜Žæ–¹æ³•å°†å¯è§‚å¯Ÿæ•°æ®ç»‘å®šåˆ°ç•Œé¢å…ƒç´  Lifecyclesç®¡ç†æ‚¨çš„Activityå’ŒFragmentç”Ÿå‘½å‘¨æœŸ LiveDataåœ¨åº•å±‚æ•°æ®åº“æ›´æ”¹æ—¶é€šçŸ¥è§†å›¾ Navigatonå¤„ç†åº”ç”¨å†…å¯¼èˆªæ‰€éœ€çš„ä¸€åˆ‡ Pagingé€æ­¥ä»Žæ‚¨çš„æ•°æ®æºæŒ‰éœ€åŠ è½½ä¿¡æ¯ Roomæµç•…åœ°è®¿é—®SQLiteæ•°æ®åº“ ViewModelä»¥æ³¨é‡ç”Ÿå‘½å‘¨æœŸåœ°æ–¹å¼ç®¡ç†ç•Œé¢ç›¸å…³çš„æ•°æ® WorkManager ç®¡ç†æ‚¨çš„AndroidåŽå°ä½œä¸š è¡Œä¸ºï¼ˆBehaviorï¼‰è¡Œä¸ºç»„ä»¶å¯å¸®åŠ©æ‚¨çš„åº”ç”¨ä¸Žæ ‡å‡†AndroidæœåŠ¡ï¼ˆå¦‚é€šçŸ¥ã€æƒé™ã€åˆ†äº«å’ŒGoogleåŠ©ç†ï¼‰ç›¸é›†æˆã€‚ CameraXè½»æ¾åœ°å‘åº”ç”¨ä¸­æ·»åŠ ç›¸æœºåŠŸèƒ½ ä¸‹è½½ç®¡ç†å™¨å®‰æŽ’å’Œç®¡ç†å¤§é‡ä¸‹è½½ä»»åŠ¡ åª’ä½“å’Œæ’­æ”¾ç”¨äºŽåª’ä½“æ’­æ”¾å’Œè·¯ç”±ï¼ˆåŒ…æ‹¬Google Castï¼‰åœ°å‘åŽå…¼å®¹API é€šçŸ¥æä¾›å‘åŽå…¼å®¹çš„é€šçŸ¥APIï¼Œæ”¯æŒWearå’ŒAuto æƒé™ç”¨äºŽæ£€æŸ¥å’Œè¯·æ±‚åº”ç”¨æƒé™çš„å…¼å®¹æ€§API åå¥½è®¾ç½®åˆ›å»ºäº¤äº’å¼è®¾ç½®å±å¹• å…±äº«æä¾›é€‚åˆåº”ç”¨æ“ä½œæ çš„å…±äº«æ“ä½œ åˆ‡ç‰‡åˆ›å»ºå¯åœ¨åº”ç”¨å¤–éƒ¨æ˜¾ç¤ºåº”ç”¨æ•°æ®çš„çµæ´»ç•Œé¢å…ƒç´  ç•Œé¢ï¼ˆUIï¼‰ç•Œé¢ç»„ä»¶å¯æä¾›å¾®ä»¶å’Œè¾…åŠ©ç¨‹åºï¼Œè®©æ‚¨çš„åº”ç”¨ä¸ä»…ç®€å•æ˜“ç”¨ï¼Œè¿˜èƒ½å¸¦æ¥æ„‰æ‚¦ä½“éªŒã€‚äº†è§£æœ‰åŠ©äºŽç®€åŒ–ç•Œé¢å¼€å‘çš„Jetpack Composeã€‚ åŠ¨ç”»å’Œè¿‡æ¸¡ç§»åŠ¨å¾®ä»¶å’Œåœ¨å±å¹•ä¹‹é—´è¿‡æ¸¡ è¡¨æƒ…ç¬¦å·åœ¨æ—§ç‰ˆå¹³å°ä¸Šå¯ç”¨æœ€æ–°çš„è¡¨æƒ…ç¬¦å·å­—ä½“ Fragmentç»„ä»¶åŒ–ç•Œé¢çš„åŸºæœ¬å•ä½ å¸ƒå±€ä½¿ç”¨ä¸åŒçš„ç®—æ³•å¸ƒç½®å¾®ä»¶ è°ƒè‰²æ¿ä»Žè°ƒè‰²æ¿ä¸­æå–æœ‰ç”¨çš„ä¿¡æ¯ -]]></content>
      <categories>
        <category>Android</category>
        <category>Jetpack</category>
      </categories>
      <tags>
        <tag>Kotlin</tag>
        <tag>Jetpack</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinå…¥é—¨]]></title>
    <url>%2Fposts%2F749a22ae.html</url>
    <content type="text"><![CDATA[æ³¨æ„ï¼š Kotlin çŽ°ä½œä¸º Android ç¬¬ä¸€å¼€å‘è¯­è¨€ï¼ŒAndroidStudio ä½œä¸º Google çš„äº²å„¿å­ï¼Œå¯¹ Kotlin è¿›è¡Œäº†å®Œç¾Žçš„æ”¯æŒï¼Œå¼€å‘æç¤ºåº”æœ‰å°½æœ‰ï¼Œå› æ­¤ä¸‹é¢æ‰€æœ‰çš„æ¼”ç¤ºä»£ç éƒ½æ˜¯è·‘åœ¨ AndroidStudio ä¸Šçš„ Kotlin ä»‹ç»å®˜ç½‘å¯¹ Kotlin çš„ä»‹ç»ï¼šA modern programming languagethat makes developers happier. ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šKotlin æ˜¯ä¸€é—¨è®©å¼€å‘è€…æ›´å¼€å¿ƒçš„çŽ°ä»£ç¨‹åºè®¾è®¡è¯­è¨€ ã€‚ ç”± JetBrains å…¬å¸å¼€å‘å’Œè®¾è®¡ï¼Œå®ƒä¹Ÿæ˜¯ä¸€é—¨åŸºäºŽ JVM çš„é™æ€è¯­è¨€ã€‚ é—®é¢˜åœ¨å­¦ä¹  Kotlin çš„æ—¶å€™æˆ‘å¿ƒé‡Œä¼šæœ‰ä¸€äº›ç–‘é—®ðŸ¤”ï¸ ï¼Ÿ 1ã€Android æ“ä½œç³»ç»Ÿæ˜¯ç”± Google å¼€å‘å‡ºæ¥çš„ï¼Œä¸ºå•¥ JetBrains ä½œä¸ºä¸€ä¸ªç¬¬ä¸‰æ–¹å…¬å¸ï¼Œå´èƒ½è®¾è®¡å‡ºä¸€é—¨è¯­è¨€æ¥å¼€å‘ Android åº”ç”¨ç¨‹åºï¼Ÿ å› ä¸º Java è™šæ‹Ÿæœºï¼ˆAndroid ä¸­å« ARTï¼Œä¸€ç§åŸºäºŽ Java è™šæ‹Ÿæœºä¼˜åŒ–çš„è™šæ‹Ÿæœºï¼‰å¹¶ä¸ç›´æŽ¥å’Œä½ ç¼–å†™çš„è¿™é—¨è¯­è¨€çš„æºä»£ç æ‰“äº¤é“ï¼Œè€Œæ˜¯å’Œä½ ç¼–è¯‘ä¹‹åŽçš„ class å­—èŠ‚ç æ–‡ä»¶æ‰“äº¤é“ã€‚åŸºäºŽ JVM çš„è¯­è¨€ï¼Œå¦‚ Kotlinï¼ŒGroovyç­‰ï¼Œå®ƒä»¬éƒ½ä¼šæœ‰å„è‡ªçš„ç¼–è¯‘å™¨ï¼ŒæŠŠæºæ–‡ä»¶ç¼–è¯‘æˆ class å­—èŠ‚ç æ–‡ä»¶ï¼ŒJava è™šæ‹Ÿæœºä¸å…³å¿ƒ class å­—èŠ‚ç æ–‡ä»¶æ˜¯ä»Žå“ªé‡Œç¼–è¯‘è€Œæ¥ï¼Œåªè¦ç¬¦åˆè§„æ ¼çš„ class å­—èŠ‚ç æ–‡ä»¶ï¼Œå®ƒéƒ½èƒ½è¯†åˆ«ï¼Œæ­£æ˜¯å› ä¸ºè¿™ä¸ªåŽŸå› ï¼ŒJetBrains æ‰èƒ½ä»¥ä¸€ä¸ªç¬¬ä¸‰æ–¹å…¬å¸è®¾è®¡å‡ºä¸€é—¨æ¥å¼€å‘ Android åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹è¯­è¨€ 2ã€ä¸ºå•¥æœ‰äº† Java æ¥å¼€å‘ Android åº”ç”¨ç¨‹åºï¼ŒGoogle è¿˜è¦æŽ¨èä½¿ç”¨ Kotlin æ¥å¼€å‘ï¼Ÿ åŽŸå› æœ‰å¾ˆå¤šï¼Œåˆ—ä¸¾ä¸»è¦çš„å‡ ç‚¹ï¼š 1ï¼‰ã€Kotlin è¯­æ³•æ›´åŠ ç®€æ´ï¼Œä½¿ç”¨ Kotlin å¼€å‘çš„ä»£ç é‡å¯èƒ½ä¼šæ¯” Java å¼€å‘çš„å‡å°‘ 50% ç”šè‡³æ›´å¤š 2ï¼‰ã€Kotlin çš„è¯­æ³•æ›´åŠ é«˜çº§ï¼Œç›¸æ¯”äºŽ Java è€æ—§çš„è¯­æ³•ï¼ŒKotlin å¢žåŠ äº†å¾ˆå¤šçŽ°ä»£é«˜çº§è¯­è¨€çš„è¯­æ³•ç‰¹æ€§ï¼Œå¤§å¤§æå‡äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆçŽ‡ 3ï¼‰ã€Kotlin å’Œ Java æ˜¯ 100% å…¼å®¹çš„ï¼ŒKotlin å¯ä»¥ç›´æŽ¥è°ƒç”¨ Java ç¼–å†™çš„ä»£ç ï¼Œä¹Ÿå¯ä»¥æ— ç¼ä½¿ç”¨ Java ç¬¬ä¸‰æ–¹å¼€æºåº“ï¼Œè¿™ä½¿å¾— Kotlin åœ¨åŠ å…¥äº†è¯¸å¤šæ–°ç‰¹æ€§çš„åŒæ—¶ï¼Œè¿˜ç»§æ‰¿äº† Java çš„å…¨éƒ¨è´¢å¯Œ 3ã€ä¸ºå•¥ Kotlin ä¸­è¦æ˜¾ç¤ºçš„åŽ»å£°æ˜Žä¸€ä¸ªéžæŠ½è±¡ç±»å¯ç»§æ‰¿ï¼Œè€Œä¸åƒ Java é‚£æ ·å®šä¹‰çš„ç±»é»˜è®¤å¯ç»§æ‰¿ï¼Ÿ å› ä¸ºä¸€ä¸ªç±»é»˜è®¤å¯è¢«ç»§æ‰¿çš„è¯ï¼Œå®ƒæ— æ³•é¢„çŸ¥å­ç±»ä¼šå¦‚ä½•åŽ»å®žçŽ°ï¼Œå› æ­¤å­˜åœ¨ä¸€äº›æœªçŸ¥çš„é£Žé™©ã€‚ç±»æ¯” val å…³é”®å­—æ˜¯åŒæ ·çš„é“ç†ï¼Œåœ¨ Java ä¸­ï¼Œé™¤éžä½ ä¸»åŠ¨ç»™å˜é‡å£°æ˜Ž final å…³é”®å­—ï¼Œå¦åˆ™è¿™ä¸ªå˜é‡å°±æ˜¯å¯å˜çš„ï¼Œéšç€é¡¹ç›®å¤æ‚åº¦å¢žåŠ ï¼Œå¤šäººåä½œå¼€å‘ï¼Œä½ æ°¸è¿œä¸çŸ¥é“ä¸€ä¸ªå¯å˜çš„å˜é‡ä¼šåœ¨ä»€ä¹ˆæ—¶å€™è¢«è°ä¿®æ”¹äº†ï¼Œå³ä½¿å®ƒåŽŸæœ¬ä¸åº”è¯¥ä¿®æ”¹ï¼Œä¹Ÿå¾ˆéš¾åŽ»æŽ’æŸ¥é—®é¢˜ã€‚å› æ­¤ Kotlin è¿™æ ·çš„è®¾è®¡æ˜¯ä¸ºäº†è®©ç¨‹åºæ›´åŠ çš„å¥å£®ï¼Œä¹Ÿæ›´ç¬¦åˆé«˜è´¨é‡ç¼–ç çš„è§„èŒƒ ä¸‹é¢æˆ‘ä»¬å°±æ­£å¼è¿›å…¥åˆ° Kotlin çš„å­¦ä¹  ä¸€ã€å˜é‡å’Œå‡½æ•°1ã€å˜é‡1ï¼‰ã€ä½¿ç”¨ valï¼ˆvalue çš„ç®€å†™ï¼‰å…³é”®å­—æ¥å£°æ˜Žä¸€ä¸ªä¸å¯å˜çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯åªè¯»å˜é‡ï¼Œè¿™ç§å˜é‡åˆå§‹èµ‹å€¼åŽå°±ä¸èƒ½é‡æ–°èµ‹å€¼äº†ï¼Œå¯¹åº” Java ä¸­çš„ final å˜é‡ 2ï¼‰ã€ä½¿ç”¨ var ï¼ˆvariable çš„ç®€å†™ï¼‰å…³é”®å­—ç”¨æ¥å£°æ˜Žä¸€ä¸ªå¯å˜çš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯å¯è¯»å†™å˜é‡ï¼Œè¿™ç§å˜é‡åˆå§‹èµ‹åˆå€¼åŽä»ç„¶å¯ä»¥é‡æ–°è¢«èµ‹å€¼ï¼Œå¯¹åº” Java ä¸­çš„éž final å˜é‡ 3ï¼‰ã€Kotlin ä¸­çš„æ¯ä¸€è¡Œä»£ç éƒ½ä¸ç”¨åŠ  ï¼› 12345678910111213//åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬ä¼šè¿™ä¹ˆå®šä¹‰int a = 10;boolean b = true//åœ¨ Kotlin ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå®šä¹‰ï¼Œå½“ç»™å˜é‡èµ‹å€¼åŽï¼ŒKotlin ç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»åž‹æŽ¨å¯¼//å®šä¹‰ä¸€ä¸ªä¸å¯å˜çš„å˜é‡ a val a = 10//å®šä¹‰ä¸€ä¸ªå¯å˜çš„å˜é‡ bvar b = true//å¦‚æžœæˆ‘ä»¬æ˜¾ç¤ºçš„ç»™å˜é‡æŒ‡å®šç±»åž‹ï¼ŒKotlin å°±ä¸ä¼šè¿›è¡Œç±»åž‹æŽ¨å¯¼äº†val a: Int = 10var b: Boolean = "erdai" å¦‚æžœä½ è§‚å¯Ÿçš„ä»”ç»†ä¼šå‘çŽ°ï¼Œä¸Šè¿°ä»£ç  Kotlin å®šä¹‰å˜é‡ç»™å˜é‡æ˜¾ç¤ºçš„æŒ‡å®šç±»åž‹æ—¶ï¼Œä½¿ç”¨çš„éƒ½æ˜¯é¦–å­—æ¯å¤§å°çš„ Intï¼ŒBooleanï¼Œè€Œåœ¨ Java ä¸­éƒ½æ˜¯å°å†™çš„ intï¼Œbooleanï¼Œè¿™è¡¨æ˜Žï¼š Kotlin å®Œå…¨æŠ›å¼ƒäº† Java ä¸­çš„åŸºæœ¬æ•°æ®ç±»åž‹ï¼Œå…¨éƒ¨éƒ½æ˜¯å¯¹è±¡æ•°æ®ç±»åž‹ã€‚ ä¸‹é¢ç»™å‡ºä¸€ä¸ª Java å’Œ Kotlin æ•°æ®ç±»åž‹å¯¹ç…§è¡¨ï¼š Java åŸºæœ¬æ•°æ®ç±»åž‹ Kotlin å¯¹è±¡æ•°æ®ç±»åž‹ æ•°æ®ç±»åž‹è¯´æ˜Ž byte Byte å­—èŠ‚åž‹ short Short çŸ­æ•´åž‹ int Int æ•´åž‹ long Long é•¿æ•´åž‹ float Float å•ç²¾åº¦æµ®ç‚¹æ•° double Double åŒç²¾åº¦æµ®ç‚¹æ•° char Char å­—ç¬¦åž‹ boolean Boolean å¸ƒå°”åž‹ 2ã€å¸¸é‡Kotlin ä¸­å®šä¹‰ä¸€ä¸ªå¸¸é‡éœ€è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ 1ï¼‰ã€ä½¿ç”¨ const val æ¥ä¿®é¥°ï¼Œå¹¶åˆå§‹åŒ– 2ï¼‰ã€ä¿®é¥°çš„ç±»åž‹åªèƒ½æ˜¯å­—ç¬¦ä¸²å’ŒåŸºç¡€å¯¹è±¡ç±»åž‹ 3ï¼‰ã€åªèƒ½ä¿®é¥°é¡¶å±‚çš„å¸¸é‡ï¼Œobject ä¿®é¥°çš„æˆå‘˜ï¼Œcompanion object çš„æˆå‘˜ï¼Œè¿™äº›æ¦‚å¿µåŽé¢è¿˜ä¼šè®²åˆ° 1234567891011121314//å®šä¹‰ä¸€ä¸ªé¡¶å±‚çš„å¸¸é‡ï¼Œè¿™ä¸ªå¸¸é‡ä¸æ”¾åœ¨ä»»ä½•çš„ç±»ä¸­const val CONSTANT = "This is a constant"//å®šä¹‰ä¸€ä¸ª object ä¿®é¥°çš„å•ä¾‹ç±»ï¼Œç±»ä¸­å®šä¹‰ä¸€ä¸ªå¸¸é‡object SingeTon &#123; const val CONSTANT = "This is a constant"&#125;class KotlinPractice &#123; //å®šä¹‰ä¸€ä¸ª companion object ä¿®é¥°çš„ä¼´ç”Ÿå¯¹è±¡ï¼Œé‡Œé¢å®šä¹‰ä¸€ä¸ªå¸¸é‡ companion object&#123; const val CONSTANT = "This is a constant" &#125;&#125; 3ã€å‡½æ•°1ï¼‰ã€å‡½æ•°å’Œæ–¹æ³•æ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼Œåœ¨ Java ä¸­æˆ‘ä»¬ä¹ æƒ¯å«æ–¹æ³• (method)ï¼Œä½†æ˜¯ Kotlin ä¸­å°±éœ€è¦å«å‡½æ•° (function) 2ï¼‰ã€å‡½æ•°æ˜¯è¿è¡Œä»£ç çš„è½½ä½“,åƒæˆ‘ä»¬ä½¿ç”¨è¿‡çš„ main å‡½æ•°å°±æ˜¯ä¸€ä¸ªå‡½æ•° Kotlin ä¸­å®šä¹‰è¯­æ³•çš„è§„åˆ™ï¼š 123456789101112fun methodName(param1: Int, param2: Int): Int &#123; return 0&#125;//ä¸‹é¢è¿™ä¸¤ä¸ªæ–¹æ³•æ•ˆæžœæ˜¯ä¸€æ ·çš„fun methodName1(params: Int,params2: Int): Unit&#123;&#125;fun methodName1(params: Int,params2: Int)&#123;&#125; ä¸Šè¿°å‡½æ•°è¯­æ³•è§£é‡Šï¼š fun ( function çš„ç¼©å†™ ) æ˜¯å®šä¹‰ä¸€ä¸ªå‡½æ•°çš„å…³é”®å­—ï¼Œæ— è®ºä½ å®šä¹‰ä»€ä¹ˆå‡½æ•°ï¼Œéƒ½è¦ç”¨ fun æ¥å£°æ˜Ž å‡½æ•°åç§°å¯ä»¥éšä¾¿å–ï¼Œå°±åƒ Java é‡Œé¢å®šä¹‰å‡½æ•°åä¸€æ · å‡½æ•°åé‡Œé¢çš„å‚æ•°å¯ä»¥æœ‰ä»»æ„å¤šä¸ªï¼Œå‚æ•°çš„å£°æ˜Žæ ¼å¼ä¸ºï¼šâ€å‚æ•°åâ€ï¼šâ€å‚æ•°ç±»åž‹â€ å‚æ•°ååŽé¢è¿™éƒ¨åˆ†ä»£è¡¨è¿”å›žå€¼ï¼Œæˆ‘ä»¬è¿™è¿”å›žçš„æ˜¯ä¸€ä¸ª Int ç±»åž‹çš„å€¼ï¼Œè¿™éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œå¦‚æžœä¸å®šä¹‰ï¼Œé»˜è®¤è¿”å›žå€¼ä¸º Unitï¼Œä¸” Unit å¯çœç•¥ å®žè·µä¸€ä¸‹ï¼š 1234567891011121314fun main() &#123; val number1 = 15 val number2 = 20 val maxNumber = largeNumber(number1,number2) println(maxNumber)&#125;fun largeNumber(number1: Int,number2: Int) : Int&#123; //è°ƒç”¨é¡¶å±‚ max å‡½æ•°è®¡ç®—ä¸¤è€…ä¸­çš„æœ€å¤§å€¼ return max(number1,number2)&#125;//æ‰“å°ç»“æžœ20 Kotlin è¯­æ³•ç³–ï¼šå½“ä¸€ä¸ªå‡½æ•°ä½“ä¸­åªæœ‰ä¸€è¡Œä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç¼–å†™å‡½æ•°ä½“ï¼Œå¯ä»¥å°†å”¯ä¸€çš„ä¸€è¡Œä»£ç å†™åœ¨å‡½æ•°å®šä¹‰çš„å°¾éƒ¨ï¼Œä¸­é—´ç”¨ = è¿žæŽ¥å³å¯ é‚£ä¹ˆä¸Šè¿° largeNumber è¿™ä¸ªå‡½æ•°æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹ï¼š 1234//æ ¹æ®ä¸Šè¿°è¯­æ³•ç³–ï¼Œæˆ‘ä»¬çœç•¥äº†å‡½æ•°ä½“çš„ &#123;&#125; å’Œ return å…³é”®å­—ï¼Œå¢žå‡çš„ = è¿žæŽ¥fun largeNumber(number1: Int,number2: Int) : Int = max(number1,number2)//æ ¹æ® Kotlin ç±»åž‹æŽ¨å¯¼æœºåˆ¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŠŠå‡½æ•°çš„è¿”å›žå€¼ç»™çœç•¥ï¼Œæœ€ç»ˆå˜æˆäº†è¿™æ ·fun largeNumber(number1: Int,number2: Int) = max(number1,number2) äºŒã€ç¨‹åºçš„é€»è¾‘æŽ§åˆ¶1ã€if æ¡ä»¶è¯­å¥1ï¼‰ã€Kotlin ä¸­çš„ if æ¡ä»¶è¯­å¥é™¤äº†ç»§æ‰¿äº† Java ä¸­ if æ¡ä»¶è¯­å¥çš„æ‰€æœ‰ç‰¹æ€§ï¼Œä¸”å¯ä»¥æŠŠæ¯ä¸€ä¸ªæ¡ä»¶ä¸­çš„æœ€åŽä¸€è¡Œä»£ç ä½œä¸ºè¿”å›žå€¼ æˆ‘ä»¬æ”¹é€ ä¸€ä¸‹ä¸Šè¿° largeNumber å‡½æ•°çš„å†…éƒ¨å®žçŽ°ï¼š 1234567891011//Kotlin ä¸­æŠŠæ¯ä¸€ä¸ªæ¡ä»¶ä¸­çš„æœ€åŽä¸€è¡Œä»£ç ä½œä¸ºè¿”å›žå€¼fun largeNumber(number1: Int,number2: Int) : Int&#123; return if(number1 &gt; number2)&#123; number1 &#125;else &#123; number2 &#125;&#125;//æ ¹æ®ä¸Šé¢å­¦ä¹ çš„è¯­æ³•ç³–å’Œ Kotlin ç±»åž‹æŽ¨å¯¼æœºåˆ¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç®€å†™ largeNumber å‡½æ•°ï¼Œæœ€ç»ˆå˜æˆäº†è¿™æ ·fun largeNumber(number1: Int,number2: Int) = if(number1 &gt; number2) number1 else number 2 2ã€when æ¡ä»¶è¯­å¥ç±»æ¯” Java ä¸­çš„ Switch è¯­å¥å­¦ä¹ ï¼ŒJava ä¸­çš„ Switch å¹¶ä¸æ€Žä¹ˆå¥½ç”¨ï¼š 1ï¼‰ã€Switch è¯­å¥åªèƒ½æ”¯æŒä¸€äº›ç‰¹å®šçš„ç±»åž‹ï¼Œå¦‚æ•´åž‹ï¼ŒçŸ­äºŽæ•´åž‹ï¼Œå­—ç¬¦ä¸²ï¼Œæžšä¸¾ç±»åž‹ã€‚å¦‚æžœæˆ‘ä»¬ä½¿ç”¨çš„å¹¶éžè¿™å‡ ç§ç±»åž‹ï¼ŒSwitch å¹¶ä¸å¯ç”¨ 2ï¼‰ã€Switch è¯­å¥çš„ case æ¡ä»¶éƒ½è¦åœ¨æœ€åŽåŠ ä¸Šä¸€ä¸ª break è¿™äº›é—®é¢˜åœ¨ Kotlin ä¸­éƒ½å¾—åˆ°äº†è§£å†³ï¼Œè€Œä¸” Kotlin è¿˜åŠ å…¥äº†è®¸å¤šå¼ºå¤§çš„æ–°ç‰¹æ€§ï¼š 1ï¼‰ã€when æ¡ä»¶è¯­å¥ä¹Ÿæ˜¯æœ‰è¿”å›žå€¼çš„ï¼Œå’Œ if æ¡ä»¶è¯­å¥ç±»ä¼¼ï¼Œæ¡ä»¶ä¸­çš„æœ€åŽä¸€è¡Œä»£ç ä½œä¸ºè¿”å›žå€¼ 2ï¼‰ã€when æ¡ä»¶è¯­å¥å…è®¸ä¼ å…¥ä»»æ„ç±»åž‹çš„å‚æ•° 3ï¼‰ã€when æ¡ä»¶ä½“ä¸­æ¡ä»¶æ ¼å¼ï¼šåŒ¹é…å€¼ -&gt; { æ‰§è¡Œé€»è¾‘ } 4ï¼‰ã€when æ¡ä»¶è¯­å¥å’Œ if æ¡ä»¶è¯­å¥ä¸€æ ·ï¼Œå½“æ¡ä»¶ä½“é‡Œé¢åªæœ‰ä¸€è¡Œä»£ç çš„æ—¶å€™ï¼Œæ¡ä»¶ä½“çš„ {} å¯çœç•¥ 123456789101112131415//when ä¸­æœ‰å‚æ•°çš„æƒ…å†µfun getScore(name: String) = when (name) &#123; "tom" -&gt; 99 "jim" -&gt; 80 "lucy" -&gt; 70 else -&gt; 0&#125;//when ä¸­æ— å‚æ•°çš„æƒ…å†µï¼ŒKotin ä¸­åˆ¤æ–­å­—ç¬¦ä¸²æˆ–è€…å¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œç›´æŽ¥ä½¿ç”¨ == æ“ä½œç¬¦å³å¯fun getScore(name: String) = when &#123; name == "tom" -&gt; 99 name == "jim" -&gt; 80 name =="lucy" -&gt; 70 else -&gt; 0&#125; 3ã€å¾ªçŽ¯è¯­å¥ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§å¾ªçŽ¯ï¼š 1ï¼‰ã€while å¾ªçŽ¯ï¼Œè¿™ç§å¾ªçŽ¯å’Œ Java æ²¡æœ‰ä»»ä½•åŒºåˆ« 2ï¼‰ã€for å¾ªçŽ¯ï¼ŒJava ä¸­å¸¸ç”¨çš„å¾ªçŽ¯æœ‰ï¼šfor-iï¼Œfor-eachï¼ŒKotlin ä¸­ä¸»è¦æ˜¯ï¼šfor-in åŒºé—´ 1ï¼‰ã€ä½¿ç”¨ .. è¡¨ç¤ºåˆ›å»ºä¸¤ç«¯éƒ½æ˜¯é—­åŒºé—´çš„å‡åºåŒºé—´ 2ï¼‰ã€ä½¿ç”¨ until è¡¨ç¤ºåˆ›å»ºå·¦ç«¯æ˜¯é—­åŒºé—´å³ç«¯æ˜¯å¼€åŒºé—´çš„å‡åºåŒºé—´ 3ï¼‰ã€ä½¿ç”¨ downTo è¡¨ç¤ºåˆ›å»ºä¸¤ç«¯éƒ½æ˜¯é—­åŒºé—´çš„é™åºåŒºé—´ 4ï¼‰ã€åœ¨åŒºé—´çš„åŽé¢åŠ ä¸Š step ï¼Œè¡¨ç¤ºè·³è¿‡å‡ ä¸ªå…ƒç´  12345678910111213141516171819202122232425262728293031323334353637383940//æ³¨æ„: Kotlin ä¸­å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²å†…åµŒè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯åœ¨å­—ç¬¦ä¸²ä¸­å¯ä»¥å¼•ç”¨å˜é‡ï¼ŒåŽç»­è¿˜ä¼šè®²åˆ°//æƒ…å†µ1fun main() &#123; //ä½¿ç”¨ .. è¡¨ç¤ºåˆ›å»ºä¸¤ç«¯éƒ½æ˜¯é—­åŒºé—´çš„å‡åºåŒºé—´ for (i in 0..10)&#123; print("$i ") &#125;&#125;//æ‰“å°ç»“æžœ0 1 2 3 4 5 6 7 8 9 10//æƒ…å†µ2fun main() &#123; //ä½¿ç”¨ until è¡¨ç¤ºåˆ›å»ºå·¦ç«¯æ˜¯é—­åŒºé—´å³ç«¯æ˜¯å¼€åŒºé—´çš„å‡åºåŒºé—´ for (i in 0 until 10)&#123; print("$i ") &#125;&#125;//æ‰“å°ç»“æžœ0 1 2 3 4 5 6 7 8 9//æƒ…å†µ3fun main() &#123; //ä½¿ç”¨ downTo è¡¨ç¤ºåˆ›å»ºä¸¤ç«¯éƒ½æ˜¯é—­åŒºé—´çš„é™åºåŒºé—´ for (i in 10 downTo 0)&#123; print("$i ") &#125;&#125;//æ‰“å°ç»“æžœ10 9 8 7 6 5 4 3 2 1 0//æƒ…å†µ4fun main() &#123; //ä½¿ç”¨ downTo è¡¨ç¤ºåˆ›å»ºä¸¤ç«¯éƒ½æ˜¯é—­åŒºé—´çš„é™åºåŒºé—´,æ¯æ¬¡åœ¨è·³è¿‡3ä¸ªå…ƒç´  for (i in 10 downTo 0 step 3)&#123; print("$i ") &#125;&#125;//æ‰“å°ç»“æžœ10 7 4 1 ä¸‰ã€é¢å‘å¯¹è±¡ç¼–ç¨‹å¯¹äºŽé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç†è§£ï¼šé¢å‘å¯¹è±¡çš„è¯­è¨€æ˜¯å¯ä»¥åˆ›å»ºç±»çš„ï¼Œç±»æ˜¯å¯¹äº‹ç‰©ä¸€ç§çš„å°è£…ï¼Œä¾‹å¦‚äººï¼Œæ±½è½¦æˆ‘ä»¬éƒ½å¯ä»¥æŠŠä»–ä»¬å°è£…æˆç±»ï¼Œç±»åé€šå¸¸æ˜¯åè¯ï¼Œç±»ä¸­æœ‰è‡ªå·±çš„å­—æ®µå’Œå‡½æ•°ï¼Œå­—æ®µè¡¨ç¤ºè¯¥ç±»æ‹¥æœ‰çš„å±žæ€§ï¼Œé€šå¸¸ä¹Ÿæ˜¯åè¯ï¼Œå°±åƒäººå¯ä»¥æ‹¥æœ‰å§“åå’Œå¹´é¾„ï¼Œæ±½è½¦å¯ä»¥æ‹¥æœ‰å“ç‰Œå’Œä»·æ ¼ï¼Œå‡½æ•°è¡¨ç¤ºè¯¥ç±»æ‹¥æœ‰é‚£äº›è¡Œä¸ºï¼Œä¸€èˆ¬ä¸ºåŠ¨è¯ï¼Œå°±åƒäººéœ€è¦åƒé¥­ç¡è§‰ï¼Œæ±½è½¦å¯ä»¥é©¾é©¶å’Œä¿å…»ï¼Œé€šè¿‡è¿™ç§ç±»çš„å°è£…ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é€‚å½“çš„åœ°æ–¹åˆ›å»ºè¿™äº›ç±»ï¼Œç„¶åŽè°ƒç”¨ä»–ä»¬çš„å­—æ®µå’Œå‡½æ•°æ¥æ»¡è¶³å®žé™…çš„ç¼–ç¨‹éœ€æ±‚ï¼Œè¿™å°±æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹æœ€åŸºæœ¬çš„æ€æƒ³ 1ã€ç±»ä¸Žå¯¹è±¡æˆ‘ä»¬ä½¿ç”¨ AndroidStudio åˆ›å»ºä¸€ä¸ª Person ç±»ï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¾“å…¥ Person ï¼Œé€‰æ‹©Classï¼Œå¯¹è¯æ¡†é»˜è®¤æƒ…å†µä¸‹è‡ªåŠ¨é€‰ä¸­çš„æ˜¯åˆ›å»ºä¸€ä¸ªFileï¼ŒFile é€šå¸¸æ˜¯ç”¨äºŽç¼–å†™ Kotlin é¡¶å±‚å‡½æ•°å’Œæ‰©å±•å‡½æ•°ç­‰ï¼Œå¦‚ä¸‹å›¾ï¼š 1ï¼‰ã€å½“æˆ‘ä»¬åœ¨ç±»ä¸­åˆ›å»ºå±žæ€§çš„æ—¶å€™ï¼ŒKotlin ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»º get å’Œ set æ–¹æ³• 2ï¼‰ã€Kotlin ä¸­å®žä¾‹åŒ–å¯¹è±¡å’Œ Java ç±»ä¼¼ï¼Œä½†æ˜¯æŠŠ new å…³é”®å­—ç»™åŽ»æŽ‰äº† 3ï¼‰ã€ä¸€èˆ¬åœ¨ç±»ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨ var å…³é”®å­—åŽ»å®šä¹‰ä¸€ä¸ªå±žæ€§ï¼Œå› ä¸ºå±žæ€§ä¸€èˆ¬æ˜¯å¯å˜çš„ï¼Œå¦‚æžœä½ ç¡®å®šæŸä¸ªå±žæ€§ä¸éœ€è¦æ”¹å˜ï¼Œåˆ™ç”¨ val 1234567891011121314151617class Person &#123; var name = "" var age = 0 fun sleep()&#123; println("$name is sleep, He is $age years old.") &#125;&#125;fun main() &#123; val person = Person() person.name = "erdai" person.age = 20 person.sleep()&#125;//æ‰“å°ç»“æžœerdai is sleep, He is 20 years old. 2ã€ç»§æ‰¿ä¸Žæž„é€ å‡½æ•°ç»§æ‰¿1ï¼‰ã€Kotlin ä¸­è§„å®šï¼Œå¦‚æžœè¦å£°æ˜Žä¸€ä¸ªéžæŠ½è±¡ç±»å¯ç»§æ‰¿ï¼Œå¿…é¡»åŠ ä¸Š open å…³é”®å­—ï¼Œå¦åˆ™ä¸å¯ç»§æ‰¿ï¼Œè¿™ç‚¹å’Œ Java ä¸­ä¸åŒï¼ŒJava ä¸­çš„ç±»é»˜è®¤æ˜¯å¯è¢«ç»§æ‰¿çš„ï¼ŒEffective Java è¿™æœ¬ä¹¦ä¸­æåˆ°ï¼šå¦‚æžœä¸€ä¸ªç±»ä¸æ˜¯ä¸“é—¨ä¸ºç»§æ‰¿è€Œè®¾è®¡çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä¸»åŠ¨å°†å®ƒåŠ ä¸Š final å£°æ˜Žï¼Œç¦æ­¢ä»–å¯ä»¥è¢«ç»§æ‰¿ 2ï¼‰ã€Kotlinä¸­çš„ç»§æ‰¿å’Œå®žçŽ°éƒ½æ˜¯ç”¨ : è¡¨ç¤º 123456789101112131415//å£°æ˜Ž Person ç±»å¯ä»¥è¢«ç»§æ‰¿open class Person &#123; var name = "" var age = 0 fun sleep() &#123; println("$name is sleep, He is $age years old.") &#125;&#125;//å®šä¹‰ Student ç»§æ‰¿ Person ç±»//ä¸ºå•¥ Person åŽé¢ä¼šæœ‰ä¸€ä¸ªæ‹¬å·å‘¢ï¼Ÿå› ä¸ºå­ç±»çš„æž„é€ å‡½æ•°å¿…é¡»è°ƒç”¨çˆ¶ç±»ä¸­çš„æž„é€ å‡½æ•°ï¼Œåœ¨ Java ä¸­ï¼Œå­ç±»çš„æž„é€ å‡½æ•°ä¼šéšå¼çš„åŽ»è°ƒç”¨class Student : Person()&#123; &#125; æž„é€ å‡½æ•°1ï¼‰ã€ä¸»æž„é€ å‡½æ•°çš„ç‰¹ç‚¹æ˜¯æ²¡æœ‰å‡½æ•°ä½“ï¼Œç›´æŽ¥è·Ÿåœ¨ç±»åçš„åŽé¢å³å¯ï¼Œå¦‚æžœéœ€è¦åœ¨ä¸»æž„é€ å‡½æ•°é‡Œé¢åšé€»è¾‘ï¼Œå¤å†™ init å‡½æ•°å³å¯ 2ï¼‰ã€ä¸»æž„é€ å‡½æ•°ä¸­å£°æ˜Žæˆ val æˆ–è€… var çš„å‚æ•°å°†è‡ªåŠ¨æˆä¸ºè¯¥ç±»çš„å­—æ®µï¼Œå¦‚æžœä¸åŠ ï¼Œé‚£ä¹ˆè¯¥å­—æ®µçš„ä½œç”¨åŸŸä»…é™å®šåœ¨ä¸»æž„é€ å‡½æ•°ä¸­ 3ï¼‰ã€æ¬¡æž„é€ å‡½æ•°æ˜¯é€šè¿‡ constructor å…³é”®å­—æ¥å®šä¹‰çš„ 4ï¼‰ã€å½“ä¸€ä¸ªç±»æ²¡æœ‰æ˜¾ç¤ºçš„å®šä¹‰ä¸»æž„é€ å‡½æ•°ï¼Œä½†æ˜¯å®šä¹‰äº†æ¬¡æž„é€ å‡½æ•°æ—¶ï¼Œé‚£ä¹ˆè¢«ç»§æ‰¿çš„ç±»åŽé¢ä¸éœ€è¦åŠ  () 123456789101112131415161718192021222324252627282930313233343536373839404142//å®šä¹‰ Student ç±»ï¼Œå®šä¹‰ä¸»æž„é€ å‡½æ•°ï¼Œå®šä¹‰å±žæ€§ sno å’Œ grade, ç»§æ‰¿ Person ç±»class Student(var sno: String, var grade: Int) : Person() &#123; //åšä¸€äº›åˆå§‹åŒ–çš„é€»è¾‘ init &#123; name = "erdai" age = 20 &#125; //å£°æ˜Žå¸¦ä¸€ä¸ªå‚æ•°çš„æ¬¡æž„é€ å‡½æ•° constructor(sno: String): this(sno,8)&#123; &#125; //å£°æ˜Žä¸€ä¸ªæ— å‚çš„æ¬¡æž„é€ å‡½æ•° constructor(): this("123",7)&#123; &#125; fun printInfo()&#123; println("I am $name, $age yeas old, sno: $sno, grade: $grade") &#125;&#125;fun main() &#123; val student1 = Student() val student2 = Student("456") val student3 = Student("789",9) student1.printInfo() student2.printInfo() student3.printInfo()&#125;//æ‰“å°ç»“æžœI am erdai, 20 yeas old, sno: 123, grade: 7I am erdai, 20 yeas old, sno: 456, grade: 8I am erdai, 20 yeas old, sno: 789, grade: 9//ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼šå½“ä¸€ä¸ªç±»æ²¡æœ‰æ˜¾ç¤ºçš„å®šä¹‰ä¸»æž„é€ å‡½æ•°ï¼Œä½†æ˜¯å®šä¹‰äº†æ¬¡æž„é€ å‡½æ•°æ—¶ï¼Œé‚£ä¹ˆè¢«ç»§æ‰¿çš„ç±»åŽé¢ä¸éœ€è¦åŠ  ()class Student : Person&#123; constructor() : super()&#123; &#125;&#125; 3ã€æŽ¥å£1ï¼‰ã€Kotlin å’Œ Java ä¸­å®šä¹‰æŽ¥å£æ²¡æœ‰ä»»ä½•åŒºåˆ« 12345678910111213141516171819202122232425262728293031323334353637//å®šä¹‰æŽ¥å£ä¸­çš„ä¸€ç³»åˆ—çš„æŠ½è±¡è¡Œä¸º Kotlin ä¸­å¢žåŠ äº†æŽ¥å£ä¸­å®šä¹‰çš„å‡½æ•°å¯ä»¥æœ‰é»˜è®¤å®žçŽ°ï¼Œå…¶å®ž Java åœ¨ JDK1.8 ä¹‹åŽä¹Ÿå¼€å§‹æ”¯æŒè¿™ä¸ªåŠŸèƒ½interface Study&#123; fun readBooks() //å¦‚æžœå­ç±»æ²¡æœ‰é‡å†™è¿™ä¸ªæ–¹æ³•,é‚£ä¹ˆå°±ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„é»˜è®¤å®žçŽ° fun doHomework()&#123; println("do homework default implementation") &#125;&#125;//å®šä¹‰ä¸€ä¸ªå¯è¢«ç»§æ‰¿çš„ People ç±»ï¼Œæœ‰ name å’Œ age ä¸¤ä¸ªå±žæ€§open class People(val name: String,val age: Int)&#123;&#125;//å®šä¹‰ä¸€ä¸ª Student ç±»ï¼Œç»§æ‰¿ People ç±»ï¼Œå®žçŽ° Study æŽ¥å£class Student(name: String, age: Int) : People(name, age),Study&#123; override fun readBooks() &#123; println("$name is read book") &#125;&#125;//å®šä¹‰çš„ä¸€ä¸ªæ–¹æ³• ç„¶åŽåœ¨mainå‡½æ•°è°ƒç”¨fun doStudy(study: Study)&#123; study.readBooks() study.doHomework()&#125;//mainå‡½æ•°è°ƒç”¨fun main()&#123; val student = Student("erdai",20) //è¿™é‡Œstudentå®žçŽ°äº†StudyæŽ¥å£,è¿™ç§å«åšé¢å‘æŽ¥å£ç¼–ç¨‹,ä¹Ÿå¯ä»¥ç§°ä¸ºå¤šæ€ doStydy(student)&#125;//æ‰“å°ç»“æžœerdai is read bookdo homework default implementation 4ã€å‡½æ•°çš„å¯è§æ€§ä¿®é¥°ç¬¦ ä¿®é¥°ç¬¦ Java Kotlin public æ‰€æœ‰ç±»å¯è§ æ‰€æœ‰ç±»å¯è§(é»˜è®¤) private å½“å‰ç±»å¯è§ å½“å‰ç±»å¯è§ protected å½“å‰ç±»,å­ç±»,åŒä¸€ä¸ªåŒ…ä¸‹çš„å¯è§ å½“å‰ç±»å’Œå­ç±»å¯è§ default åŒä¸€ä¸ªåŒ…ä¸‹çš„å¯è§(é»˜è®¤) æ—  internal æ—  åŒä¸€ä¸ªæ¨¡å—ä¸­çš„ç±»å¯è§ 5ã€æ•°æ®ç±»ä¸Žå•ä¾‹ç±»æ•°æ®ç±»1ï¼‰ã€åœ¨ Java ä¸­ï¼Œæ•°æ®ç±»é€šå¸¸éœ€è¦é‡å†™ equals( )ï¼ŒhashCode( )ï¼ŒtoString( ) è¿™å‡ ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ equals( ) æ–¹æ³•ç”¨äºŽåˆ¤æ–­ä¸¤ä¸ªæ•°æ®ç±»æ˜¯å¦ç›¸ç­‰ã€‚hashCode( ) æ–¹æ³•ä½œä¸º equals( ) çš„é…å¥—æ–¹æ³•ï¼Œä¹Ÿéœ€è¦ä¸€èµ·é‡å†™ï¼Œå¦åˆ™ä¼šå¯¼è‡´ hash ç›¸å…³çš„ç³»ç»Ÿç±»æ— æ³•æ­£å¸¸å·¥ä½œï¼ŒtoString( ) æ–¹æ³•åˆ™ç”¨äºŽæä¾›æ›´æ¸…æ™°çš„è¾“å…¥æ—¥å¿—ï¼Œå¦åˆ™ä¸€ä¸ªæ•°æ®ç±»é»˜è®¤æ‰“å°å‡ºæ¥çš„æ˜¯ä¸€è¡Œå†…å­˜åœ°å€ 2ï¼‰ã€åœ¨ Kotlin ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ data å…³é”®å­—åŽ»ä¿®é¥°ä¸€ä¸ªç±»ï¼ŒKotlin å°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆ Java éœ€è¦é‡å†™çš„é‚£äº›æ–¹æ³• 12345678910111213141516171819202122232425262728293031//åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬ä¼šè¿™ä¹ˆå†™public class Cellphone &#123; String brand; double price; @Override public boolean equals(Object o) &#123; if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; Cellphone cellphone = (Cellphone) o; return Double.compare(cellphone.price, price) == 0 &amp;&amp; Objects.equals(brand, cellphone.brand); &#125; @Override public int hashCode() &#123; return Objects.hash(brand, price); &#125; @Override public String toString() &#123; return "Cellphone&#123;" + "brand='" + brand + '\'' + ", price=" + price + '&#125;'; &#125;&#125;//åœ¨ Kotlin ä¸­ï¼Œä½ ä¼šå‘çŽ°æ˜¯å¦‚æ­¤çš„ç®€æ´data class Cellphone(val brand: String, val price: Double) å•ä¾‹ç±»1ï¼‰ã€Kotlin ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨ object å…³é”®å­—åŽ»æ›¿æ¢ class å…³é”®å­—å°±å¯ä»¥åŽ»å®šä¹‰ä¸€ä¸ªå•ä¾‹ç±»äº† 2ï¼‰ã€è°ƒç”¨å•ä¾‹ç±»ä¸­çš„æ–¹æ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç›´æŽ¥ä½¿ç”¨ç±»å . ä¸Šæ–¹æ³•å°±å¯ä»¥äº†ï¼Œç±»ä¼¼äºŽ Java ä¸­çš„é™æ€æ–¹æ³•è°ƒç”¨æ–¹å¼ 12345678910111213141516171819202122232425262728//javaä¸­å•ä¾‹ æ‡’æ±‰å¼public class Singleton&#123; private static Singleton instance; public synchronized static Singleton getInstace() &#123; if(instance == null)&#123; instance = new Singleton(); &#125; return instance; &#125; public void singleonTest()&#123; System.out.println("singletonTest in Java is called."); &#125;&#125;//Kotlinä¸­çš„å•ä¾‹object Singleton&#123; fun singletonTest()&#123; println("singletonTest in Kotlin is called.") &#125;&#125;fun main() &#123; Singleton.singletonTest()&#125;//æ‰“å°ç»“æžœsingletonTest in Kotlin is called. Lambda ç¼–ç¨‹Kotlin ä»Žç¬¬ä¸€ä¸ªç‰ˆæœ¬å°±å¼€å§‹æ”¯æŒäº† Lambda ç¼–ç¨‹ï¼Œå¹¶ä¸” Kotlin ä¸­çš„ Lambda è¡¨è¾¾å¼æžä¸ºå¼ºå¤§ï¼Œæœ¬ç« æˆ‘ä»¬å­¦ä¹  Lambda ç¼–ç¨‹çš„ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼š 1ï¼‰ã€ç®€å•æ¥è¯´ï¼ŒLambda å°±æ˜¯ä¸€æ®µå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’çš„ä»£ç ï¼Œå®ƒå¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¿”å›žå€¼ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ 2ï¼‰ã€Lambda å®Œæ•´çš„è¡¨è¾¾å¼çš„è¯­æ³•ç»“æž„ï¼š{ å‚æ•°å1ï¼šå‚æ•°ç±»åž‹ï¼Œå‚æ•°å2ï¼šå‚æ•°ç±»åž‹ -&gt; å‡½æ•°ä½“ } 3ï¼‰ã€å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ç®€åŒ–å½¢å¼çš„è¯­æ³•ç»“æž„ï¼Œç›´æŽ¥å°±æ˜¯ä¸€ä¸ªå‡½æ•°ä½“ï¼š{å‡½æ•°ä½“}ï¼Œè¿™ç§æƒ…å†µæ˜¯å½“ Lambda è¡¨è¾¾å¼çš„å‚æ•°åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‚æ•°ç»™çœç•¥ï¼Œé»˜è®¤ä¼šæœ‰ä¸ª it å‚æ•° 4ï¼‰ã€Kotlin ä¸­è§„å®šï¼Œå½“ Lambda è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°çš„æœ€åŽä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Lambda è¡¨è¾¾å¼ç§»åˆ°å‡½æ•°æ‹¬å·çš„å¤–é¢ 5ï¼‰ã€Kotlin ä¸­è§„å®šï¼Œå½“ Lambda è¡¨è¾¾å¼æ˜¯å‡½æ•°çš„å”¯ä¸€å‚æ•°çš„æ—¶å€™ï¼Œå‡½æ•°çš„æ‹¬å·å¯ä»¥çœç•¥ 1ã€é›†åˆçš„åˆ›å»ºå’ŒéåŽ†1ï¼‰ã€ä¸å¯å˜é›†åˆï¼šåœ¨é›†åˆåˆå§‹åŒ–ä¹‹åŽï¼Œæˆ‘ä»¬ä¸èƒ½å¯¹å…¶è¿›è¡Œå¢žåˆ æ”¹æ“ä½œ 2ï¼‰ã€å¯å˜é›†åˆï¼šåœ¨é›†åˆåˆå§‹åŒ–ä¹‹åŽï¼Œæˆ‘ä»¬è¿˜èƒ½å¯¹å…¶è¿›è¡Œå¢žåˆ æ”¹æ“ä½œ ä¸å¯å˜é›†åˆ å¯å˜é›†åˆ listOf mutableListOf setOf mutableSetOf mapOf mutableMapOf 1234567891011121314151617181920212223242526272829303132333435363738//List é›†åˆ //å®šä¹‰ä¸€ä¸ªä¸å¯å˜ List é›†åˆval list1 = listOf("Apple","Banana","Orange","Pear","Grape")//å®šä¹‰ä¸€ä¸ªå¯å˜ List é›†åˆval list2 = mutableListOf("Apple","Banana","Orange","Pear","Grape")//æ·»åŠ å…ƒç´ list2.add("Watermelon")for (i in list2) &#123; print("$i ")&#125;//æ‰“å°ç»“æžœApple Banana Orange Pear Grape Watermelon//Set é›†åˆå’Œ List é›†åˆç”¨æ³•å®Œå…¨ä¸€æ ·//å®šä¹‰ä¸€ä¸ªä¸å¯å˜ Set é›†åˆval set1 = setOf("Apple","Banana","Orange","Pear","Grape")//å®šä¹‰ä¸€ä¸ªå¯å˜ Set é›†åˆval set2 = mutableSetOf("Apple","Banana","Orange","Pear","Grape")//æ·»åŠ å…ƒç´ set2.add("Watermelon")for (i in set2) &#123; print("$i ")&#125;//æ‰“å°ç»“æžœApple Banana Orange Pear Grape Watermelon//Map é›†åˆ//å®šä¹‰ä¸€ä¸ªä¸å¯å˜ Map é›†åˆval map1 = mapOf("Apple" to 1,"Banana" to 2,"Orange" to 3, "Pear" to 4,"Grape" to 5)//å®šä¹‰ä¸€ä¸ªå¯å˜ Map é›†åˆval map2 = mutableMapOf("Apple" to 1,"Banana" to 2,"Orange" to 3, "Pear" to 4,"Grape" to 5)//å½“å‰ key å­˜åœ¨åˆ™ä¿®æ”¹å…ƒç´ ï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ å…ƒç´ map1["Watermelon"] = 6for ((key,value) in map1) &#123; print("$key: $value ")&#125;//æ‰“å°ç»“æžœApple: 1 Banana: 2 Orange: 3 Pear: 4 Grape: 5 Watermelon: 6 2ã€é›†åˆçš„å‡½æ•°å¼ API12345678910111213141516171819202122232425262728293031323334353637383940414243//å®šä¹‰ä¸€ä¸ªä¸å¯å˜ List é›†åˆval list1 = listOf("Apple","Banana","Orange","Pear","Grape","Watermelon")//çŽ°åœ¨æˆ‘æƒ³æ‰“å°é›†åˆä¸­è‹±æ–‡åå­—æœ€é•¿çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåš//æ–¹å¼1var maxLengthFruit = ""for (fruit in list1) &#123; if(fruit.length &gt; maxLengthFruit.length)&#123; maxLengthFruit = fruit &#125;&#125;print(maxLengthFruit)//æ‰“å°ç»“æžœWatermelon//ä½†æ˜¯å¦‚æžœä½¿ç”¨å‡½æ•°å¼ Api å°†ä¼šå˜å¾—æ›´åŠ ç®€å•, maxBy å‡½æ•°ä¼šæ ¹æ®ä½ çš„æ¡ä»¶éåŽ†å¾—åˆ°ç¬¦åˆæ¡ä»¶çš„æœ€å¤§å€¼//æ–¹å¼2val maxLengthFruit = list1.maxBy &#123; it.length&#125;print(maxLengthFruit)//æ‰“å°ç»“æžœWatermelon//é€šè¿‡ maxBy å‡½æ•°ç»“åˆ Lambda è¡¨è¾¾å¼è¯­æ³•ç»“æž„ï¼Œæˆ‘ä»¬æ¥å‰–æžæ–¹å¼2è¿™ç§å†™æ³•çš„åŽŸç†, å¦‚ä¸‹æ‰€ç¤º//1val list1 = listOf("Apple","Banana","Orange","Pear","Grape","Watermelon")val lambda = &#123;fruit: String -&gt; fruit.length&#125;//maxBy å‡½æ•°å®žé™…ä¸ŠæŽ¥æ”¶çš„æ˜¯ä¸€ä¸ªå‡½æ•°ç±»åž‹çš„å‚æ•°ï¼ŒåŽç»­è®²é«˜é˜¶å‡½æ•°çš„æ—¶å€™ä¼šè®²åˆ°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¿™é‡Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª Lambda è¡¨è¾¾å¼val maxLengthFruit = list1.maxBy(lambda)//2 æ›¿æ¢ lambdaval maxLengthFruit = list1.maxBy(&#123;fruit: String -&gt; fruit.length&#125;)//3 Kotlin ä¸­è§„å®šï¼Œå½“ Lambda è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°çš„æœ€åŽä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Lambda è¡¨è¾¾å¼ç§»åˆ°å‡½æ•°æ‹¬å·çš„å¤–é¢val maxLengthFruit = list1.maxBy()&#123;fruit: String -&gt; fruit.length&#125;//4 Kotlin ä¸­è§„å®šï¼Œå½“ Lambda è¡¨è¾¾å¼æ˜¯å‡½æ•°çš„å”¯ä¸€å‚æ•°çš„æ—¶å€™ï¼Œå‡½æ•°çš„æ‹¬å·å¯ä»¥çœç•¥val maxLengthFruit = list1.maxBy&#123;fruit: String -&gt; fruit.length&#125;//5 å½“ Lambda è¡¨è¾¾å¼çš„å‚æ•°åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå‚æ•°ç»™çœç•¥ï¼Œé»˜è®¤ä¼šæœ‰ä¸ª it å‚æ•°val maxLengthFruit = list1.maxBy&#123; it.length &#125;//ç»è¿‡ä¸Šé¢ 1-&gt;2-&gt;3-&gt;4-&gt;5 è¿™å‡ ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°äº† 5 çš„è¿™ç§å†™æ³• é›†åˆä¸­è¿˜æœ‰å¾ˆå¤šè¿™æ ·çš„å‡½æ•°å¼ Apiï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ list é›†åˆæ¥å®žè·µä¸€ä¸‹å…¶ä»–çš„ä¸€äº›å‡½æ•°å¼ Apiï¼š 12345678910111213141516171819202122val list = listOf("Apple","Banana","Orange","Pear","Grape","Watermelon")//1//é€šè¿‡ map æ“ä½œï¼ŒæŠŠä¸€ä¸ªå…ƒç´ æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ val newList = list.map&#123; it.toUpperCase()&#125;for (s in newList) &#123; print("$s ")&#125;//æ‰“å°ç»“æžœAPPLE BANANA ORANGE PEAR GRAPE WATERMELON //2//é€šè¿‡ filter ç­›é€‰æ“ä½œï¼Œç­›é€‰é•¿åº¦å°äºŽç­‰äºŽ5çš„å­—ç¬¦ä¸²val newList = list.filter &#123; it.length &lt;= 5&#125;for (s in newList) &#123; print("$s ")&#125;//æ‰“å°ç»“æžœApple Pear Grape 3ã€Java å‡½æ•°å¼ API çš„ä½¿ç”¨1ï¼‰ã€Kotlin ä¸­è°ƒç”¨ Java æ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•°å¼ Api ,ä½†å¿…é¡»æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š1ã€å¾—æ˜¯ç”¨ Java ç¼–å†™çš„æŽ¥å£ 2ã€æŽ¥å£ä¸­åªæœ‰ä¸€ä¸ªå¾…å®žçŽ°çš„æ–¹æ³• 2)ã€Kotlin ä¸­å†™åŒ¿åå†…éƒ¨ç±»å’Œ Java æœ‰ä¸€ç‚¹åŒºåˆ«ï¼ŒKotlin ä¸­å› ä¸ºæŠ›å¼ƒäº† new å…³é”®å­—ï¼Œæ”¹ç”¨ object å…³é”®å­—å°±å¯ä»¥äº† 1234567891011121314151617181920212223242526272829303132333435363738//java ä¸­çš„åŒ¿åå†…éƒ¨ç±»new Thread(new Runnable() &#123; @Override public void run() &#123; &#125;&#125;).start();//Kotlin ä¸­å¯ä»¥è¿™ä¹ˆå†™Thread(object : Runnable&#123; override fun run() &#123; &#125;&#125;).start()/** * æˆ‘ä»¬æŽ¥ç€æ¥ç®€åŒ– Kotlin ä¸­çš„å†™æ³• * å› ä¸º Runnable ç±»ä¸­åªæœ‰ä¸€ä¸ªå¾…å®žçŽ°æ–¹æ³•ï¼Œå³ä½¿è¿™é‡Œæ²¡æœ‰æ˜¾ç¤ºçš„é‡å†™ run() æ–¹æ³•ï¼Œ * Kotlin ä¹Ÿèƒ½æ˜Žç™½åŽé¢çš„ Lambda è¡¨è¾¾å¼å°±æ˜¯è¦åœ¨ run() æ–¹æ³•ä¸­å®žçŽ°çš„å†…å®¹ */Thread(Runnable&#123; &#125;).start()//å› ä¸ºæ˜¯å•æŠ½è±¡æ–¹æ³•æŽ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŽ¥å£åè¿›è¡Œçœç•¥Thread(&#123; &#125;).start()//å½“ Lambda è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°çš„æœ€åŽä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Lambda è¡¨è¾¾å¼ç§»åˆ°å‡½æ•°æ‹¬å·çš„å¤–é¢Thread()&#123; &#125;.start()//å½“ Lambda è¡¨è¾¾å¼æ˜¯å‡½æ•°çš„å”¯ä¸€å‚æ•°çš„æ—¶å€™ï¼Œå‡½æ•°çš„æ‹¬å·å¯ä»¥çœç•¥Thread&#123; &#125;.start() å››ã€ç©ºæŒ‡é’ˆæ£€æŸ¥Android ç³»ç»Ÿä¸Šå¥”æºƒæœ€é«˜çš„å¼‚å¸¸å°±æ˜¯ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆNullPointerExceptionï¼‰ï¼Œé€ æˆè¿™ç§çŽ°è±¡çš„ä¸»è¦åŽŸå› æ˜¯å› ä¸ºç©ºæŒ‡é’ˆæ˜¯ä¸€ç§ä¸å—ç¼–ç¨‹è¯­è¨€æ£€æŸ¥çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼Œåªèƒ½ç”±ç¨‹åºå‘˜ä¸»åŠ¨é€šè¿‡é€»è¾‘åˆ¤æ–­æ¥é¿å…ï¼Œä½†å³ä½¿åœ¨å‡ºè‰²çš„ç¨‹åºå‘˜ï¼Œä¹Ÿä¸å¯èƒ½å°†æ‰€æœ‰æ½œåœ¨çš„ç©ºæŒ‡é’ˆå¼‚å¸¸éƒ½è€ƒè™‘åˆ°ã€‚ä½†æ˜¯è¿™ç§æƒ…å†µåœ¨ Kotlin ä¸Šå¾—åˆ°äº†å¾ˆå¥½çš„è§£å†³ï¼ŒKotlin æŠŠç©ºæŒ‡é’ˆå¼‚å¸¸æå‰åˆ°äº†ç¼–è¯‘æœŸåŽ»æ£€æŸ¥ï¼Œè¿™æ ·çš„åšæ³•å‡ ä¹Žæœç»äº†ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä½†æ˜¯è¿™æ ·å­ä¼šå¯¼è‡´ä»£ç å˜å¾—æ¯”è¾ƒéš¾å†™ï¼Œä¸è¿‡ Kotlin æä¾›äº†ä¸€ç³»åˆ—çš„è¾…åŠ©å·¥å…·ï¼Œè®©æˆ‘ä»¬èƒ½è½»æ¾çš„å¤„ç†å„ç§åˆ¤ç©ºçš„æƒ…å†µï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥å­¦ä¹ å®ƒ 1ã€å¯ç©ºç±»åž‹ç³»ç»Ÿå’Œåˆ¤ç©ºè¾…åŠ©å·¥å…·1ï¼‰ã€åœ¨ç±»åž‹åŽé¢åŠ ä¸Š ? ï¼Œè¡¨ç¤ºå¯ç©ºç±»åž‹ï¼ŒKotlin é»˜è®¤æ‰€æœ‰çš„å‚æ•°å’Œå˜é‡ä¸å¯ä¸ºç©º 2ï¼‰ã€åœ¨å¯¹è±¡è°ƒç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨ ?. æ“ä½œç¬¦ï¼Œå®ƒè¡¨ç¤ºå¦‚æžœå½“å‰å¯¹è±¡ä¸ä¸ºç©ºåˆ™è°ƒç”¨ï¼Œä¸ºç©ºåˆ™ä»€ä¹ˆéƒ½ä¸åš 3ï¼‰ã€?: æ“ä½œç¬¦è¡¨ç¤ºå¦‚æžœå·¦è¾¹çš„ç»“æžœä¸ä¸ºç©ºï¼Œè¿”å›žå·¦è¾¹çš„ç»“æžœï¼Œå¦åˆ™è¿”å›žå³è¾¹çš„ç»“æžœ 4ï¼‰ã€åœ¨å¯¹è±¡åŽé¢åŠ  !! æ“ä½œç¬¦è¡¨ç¤ºå‘Šè¯‰Kotlinæˆ‘è¿™é‡Œä¸€å®šä¸ä¼šä¸ºç©º,ä½ ä¸ç”¨è¿›è¡Œæ£€æµ‹äº†ï¼Œå¦‚æžœä¸ºç©ºï¼Œåˆ™æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ 5ï¼‰ã€let å‡½æ•°ï¼Œæä¾›å‡½æ•°å¼ Apiï¼Œå¹¶æŠŠå½“å‰è°ƒç”¨çš„å¯¹è±¡å½“ä½œå‚æ•°ä¼ é€’åˆ° Lambda è¡¨è¾¾å¼ä¸­ æƒ…å†µ1ï¼š åœ¨ç±»åž‹åŽé¢åŠ ä¸Š ? ï¼Œè¡¨ç¤ºå¯ç©ºç±»åž‹ï¼ŒKotlin é»˜è®¤æ‰€æœ‰çš„å‚æ•°å’Œå˜é‡ä¸å¯ä¸ºç©º 1234567891011interface Study&#123; fun readBooks() fun domeHomework()&#123; println("do homework default implementation") &#125;&#125;fun doStudy(study: Study)&#123; study.readBooks() study.domeHomework()&#125; ä¸Šé¢è¿™æ®µä»£ç æ˜¯ä¸ä¼šå‡ºçŽ°ç©ºæŒ‡é’ˆå¼‚å¸¸çš„ï¼Œå¦‚æžœä½ å°è¯•å‘ doStudy è¿™ä¸ªæ–¹æ³•ä¼ é€’ä¸€ä¸ª null ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼š å› æ­¤è¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¯ç©ºç±»åž‹ï¼ŒæŠŠ Study æ”¹æˆ Studyï¼Ÿï¼Œå¦‚ä¸‹å›¾ï¼š ä½ ä¼šå‘çŽ°è™½ç„¶è°ƒç”¨ doStudy æ–¹æ³•ä¸æŠ¥é”™äº†ï¼Œä½†æ˜¯ doStudy å†…éƒ¨çš„è°ƒç”¨å´æŠ¥é”™äº†ï¼Œå› ä¸ºæ­¤æ—¶ doStudy æŽ¥å—ä¸€ä¸ªå¯ç©ºçš„ç±»åž‹å‚æ•°ï¼Œå¯èƒ½ä¼šé€ æˆå†…éƒ¨çš„ç©ºæŒ‡é’ˆï¼Œ Kotlin ç¼–è¯‘å™¨ä¸å…è®¸è¿™ç§æƒ…å†µå­˜åœ¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿›è¡Œå¦‚ä¸‹æ”¹é€ å°±å¥½äº†ï¼š 123456fun doStudy(study: Study?)&#123; if(study != null)&#123; study.readBooks() study.domeHomework() &#125;&#125; æƒ…å†µ2ï¼š åœ¨å¯¹è±¡è°ƒç”¨çš„æ—¶å€™ï¼Œä½¿ç”¨ ?. æ“ä½œç¬¦ï¼Œå®ƒè¡¨ç¤ºå¦‚æžœå½“å‰å¯¹è±¡ä¸ä¸ºç©ºåˆ™è°ƒç”¨ï¼Œä¸ºç©ºåˆ™ä»€ä¹ˆéƒ½ä¸åš é’ˆå¯¹ä¸Šé¢çš„ doStudy æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿™ä¹ˆåšï¼š 1234fun doStudy(study: Study?)&#123; study?.readBooks() study?.domeHomework()&#125; æƒ…å†µ3ï¼š ?: æ“ä½œç¬¦è¡¨ç¤ºå¦‚æžœå·¦è¾¹çš„ç»“æžœä¸ä¸ºç©ºï¼Œè¿”å›žå·¦è¾¹çš„ç»“æžœï¼Œå¦åˆ™è¿”å›žå³è¾¹çš„ç»“æžœ 123456789//å¹³æ—¶æˆ‘ä»¬å¯èƒ½å†™è¿™æ ·çš„ä»£ç val a = if (b != null) &#123; b&#125; else &#123; c&#125;//ä½¿ç”¨ ?: æ“ä½œç¬¦å¯ä»¥ç®€åŒ–æˆè¿™æ ·val a = b ?: c æƒ…å†µ4ï¼š åœ¨å¯¹è±¡åŽé¢åŠ  !! æ“ä½œç¬¦è¡¨ç¤ºå‘Šè¯‰Kotlinæˆ‘è¿™é‡Œä¸€å®šä¸ä¼šä¸ºç©º,ä½ ä¸ç”¨è¿›è¡Œæ£€æµ‹äº†ï¼Œå¦‚æžœä¸ºç©ºï¼Œåˆ™æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ 12345678910111213141516171819202122//ä¸‹é¢è¿™æ®µä»£ç ç¼–è¯‘é€šä¸è¿‡ï¼Œå› ä¸º printName æ–¹æ³•é‡Œçš„ name å¹¶ä¸çŸ¥é“ä½ åœ¨å¤–é¢åšäº†éžç©ºåˆ¤æ–­val name: String? = "erdai"fun printName()&#123; val upperCaseName = name.toUpperCase() print(upperCaseName)&#125;fun main() &#123; if(name != null)&#123; printName() &#125;&#125;//å› æ­¤åœ¨ä¸Šé¢è¿™ç§æ˜Žç¡®ä¸ä¼šä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ !! æ“ä½œç¬¦ï¼Œæ”¹é€ ä¸€ä¸‹ printName æ–¹æ³•//åŒæ—¶è¦æé†’ä¸€ä¸‹è‡ªå·±ï¼Œæ˜¯å¦å­˜åœ¨æ›´å¥½çš„å®žçŽ°æ–¹å¼ï¼Œå› ä¸ºä½¿ç”¨è¿™ç§æ“ä½œç¬¦ï¼Œè¿˜æ˜¯ä¼šå­˜åœ¨æ½œåœ¨çš„ç©ºæŒ‡é’ˆå¼‚å¸¸fun printName()&#123; val upperCaseName = name!!.toUpperCase() print(upperCaseName)&#125;//æ‰“å°ç»“æžœERDAI æƒ…å†µ5ï¼š let å‡½æ•°ï¼Œæä¾›å‡½æ•°å¼ Apiï¼Œå¹¶æŠŠå½“å‰è°ƒç”¨çš„å¯¹è±¡å½“ä½œå‚æ•°ä¼ é€’åˆ° Lambda è¡¨è¾¾å¼ä¸­ 1234567891011121314151617181920212223242526272829303132333435//è¿™æ˜¯æˆ‘ä»¬æƒ…å†µ2 å®žçŽ°çš„æ–¹å¼ï¼Œä½†æ˜¯å¦‚æžœè¿™ç§è°ƒç”¨æ–¹å¼ä¸€å¤šï¼Œä¼šæ˜¾å¾—ç‰¹åˆ«å•°å—¦ï¼Œä¾‹å¦‚ï¼šfun doStudy(study: Study?)&#123; study?.readBooks() study?.domeHomework() study?.a() study?.b()&#125;//ä¸Šé¢è¿™ç§æƒ…å†µç­‰åŒäºŽå¦‚ä¸‹ä»£ç :fun doStudy(study: Study?)&#123; if(study != null)&#123; study?.readBooks() &#125; if(study != null)&#123; study?.domeHomework() &#125; if(study != null)&#123; study?.a() &#125; if(study != null)&#123; study?.b() &#125;&#125;//è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ let å‡½æ•°æ¥æ“ä½œäº†fun doStudy(study: Study?)&#123; study?.let&#123; it.readBooks() it.domeHomework() it.a() it.b() &#125;&#125; äº”ã€Kotlinä¸­çš„å°é­”æœ¯1ã€å­—ç¬¦ä¸²çš„å†…åµŒè¡¨è¾¾å¼1ï¼‰ã€Kotlin ä¸­ï¼Œå­—ç¬¦ä¸²é‡Œé¢å¯ä»¥ä½¿ç”¨ ${} å¼•ç”¨å˜é‡å€¼å’Œè¡¨è¾¾å¼ï¼Œå½“ {} é‡Œé¢åªæœ‰ä¸€ä¸ªå˜é‡ï¼Œéžè¡¨è¾¾å¼æ—¶ï¼Œ{}ä¹Ÿå¯ä»¥åŽ»æŽ‰ 1234567fun main() &#123; val a = "erdai" val b = "666" print("$a $&#123;a + b&#125;")&#125;//æ‰“å°ç»“æžœerdai erdai666 2ã€å‡½æ•°çš„å‚æ•°é»˜è®¤å€¼1ï¼‰ã€å®šä¹‰ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡½æ•°çš„å‚æ•°æ·»åŠ ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¿™æ ·å­æˆ‘ä»¬å°±ä¸éœ€è¦åŽ»ä¼ é‚£ä¸ªå‚æ•° 2ï¼‰ã€åœ¨æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ key value çš„å½¢å¼æ¥ä¼ å‚ 12345678910111213141516171819202122232425//æƒ…å†µ1ï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡½æ•°çš„å‚æ•°æ·»åŠ ä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¿™æ ·å­æˆ‘ä»¬å°±ä¸éœ€è¦åŽ»ä¼ é‚£ä¸ªå‚æ•°fun printParams(name: String,age: Int = 20)&#123; print("I am $name, $age years old.")&#125;fun main() &#123; printParams("erdai")&#125;//æ‰“å°ç»“æžœI am erdai, 20 years old.//å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©è¦†ç›–é»˜è®¤å‚æ•°fun main() &#123; printParams("erdai",25)&#125;//æ‰“å°ç»“æžœI am erdai, 25 years old.//æƒ…å†µ2ï¼šåœ¨æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ key value çš„å½¢å¼æ¥ä¼ å‚fun main() &#123; //æ³¨æ„ printParams æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°æ˜¯ name ,ç¬¬äºŒä¸ªæ‰æ˜¯ age, ä½†æ˜¯é€šè¿‡ key value çš„å½¢å¼æ¥ä¼ å‚å°±ä¸ä¼šå‡ºçŽ°å‚æ•°é¡ºåºé—®é¢˜ printParams(age = 19,name = "erdai666")&#125;//æ‰“å°ç»“æžœI am erdai666, 19 years old. å°æŠ€å·§ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°çš„å‚æ•°é»˜è®¤å€¼æ¥ä»£æ›¿æ¬¡æž„é€ å‡½æ•°ï¼Œä½¿ç”¨ä¸»æž„é€ å‡½æ•°å°±å¥½äº† å…­ã€æ ‡å‡†å‡½æ•°å’Œé™æ€æ–¹æ³•1ã€æ ‡å‡†å‡½æ•°letï¼Œalsoï¼Œwithï¼Œrun å’Œ apply1ï¼‰ã€let å‡½æ•°ï¼Œå¿…é¡»è®©æŸä¸ªå¯¹è±¡è°ƒç”¨ï¼ŒæŽ¥æ”¶ä¸€ä¸ª Lambda è¡¨è¾¾å¼å‚æ•°ï¼ŒLambda è¡¨è¾¾å¼ä¸­çš„å‚æ•°ä¸ºå½“å‰è°ƒç”¨è€…ï¼Œä¸”æœ€åŽä¸€è¡Œä»£ç ä½œä¸ºè¿”å›žå€¼ 2ï¼‰ã€also å‡½æ•°ï¼Œå¿…é¡»è®©æŸä¸ªå¯¹è±¡è°ƒç”¨ï¼ŒæŽ¥æ”¶ä¸€ä¸ª Lambda è¡¨è¾¾å¼å‚æ•°ï¼ŒLambda è¡¨è¾¾å¼ä¸­çš„å‚æ•°ä¸ºå½“å‰è°ƒç”¨è€…ï¼Œæ— æ³•æŒ‡å®šè¿”å›žå€¼ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›žçš„æ˜¯å½“å‰è°ƒç”¨å¯¹è±¡æœ¬èº« 3ï¼‰ã€with å‡½æ•°ï¼ŒæŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºä»»æ„ç±»åž‹å‚æ•°ï¼Œç¬¬äºŒä¸ªä¸º Lambda è¡¨è¾¾å¼å‚æ•°ï¼ŒLambda è¡¨è¾¾å¼ä¸­æ‹¥æœ‰ç¬¬ä¸€ä¸ªå‚æ•°çš„ä¸Šä¸‹æ–‡ this ï¼Œä¸”æœ€åŽä¸€è¡Œä»£ç ä½œä¸ºè¿”å›žå€¼ 4ï¼‰ã€run å‡½æ•°ï¼Œå¿…é¡»è®©æŸä¸ªå¯¹è±¡è°ƒç”¨ï¼ŒæŽ¥æ”¶ä¸€ä¸ª Lambda è¡¨è¾¾å¼å‚æ•°ï¼ŒLambda è¡¨è¾¾å¼ä¸­æ‹¥æœ‰å½“å‰è°ƒç”¨å¯¹è±¡çš„ä¸Šä¸‹æ–‡ this ï¼Œä¸”æœ€åŽä¸€è¡Œä»£ç ä½œä¸ºè¿”å›žå€¼ 5ï¼‰ã€apply å‡½æ•°ï¼Œå¿…é¡»è®©æŸä¸ªå¯¹è±¡è°ƒç”¨ï¼ŒæŽ¥æ”¶ä¸€ä¸ª Lambda è¡¨è¾¾å¼å‚æ•°ï¼ŒLambda è¡¨è¾¾å¼ä¸­æ‹¥æœ‰å½“å‰è°ƒç”¨å¯¹è±¡çš„ä¸Šä¸‹æ–‡ this ï¼Œæ— æ³•æŒ‡å®šè¿”å›žå€¼ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›žçš„æ˜¯å½“å‰è°ƒç”¨å¯¹è±¡æœ¬èº« æ³¨æ„ï¼šåœ¨Lambda è¡¨è¾¾å¼ä¸­ï¼Œæ‹¥æœ‰å¯¹è±¡çš„ä¸Šä¸‹æ–‡ thisï¼Œå’Œæ‹¥æœ‰è¯¥å¯¹è±¡æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡ this å¯çœç•¥ï¼Œè€Œæ‹¥æœ‰è¯¥å¯¹è±¡æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å‚æ•°åï¼Œå¦‚æžœä¸å†™è¯¥å‚æ•°ï¼Œé»˜è®¤ä¼šæœ‰ä¸ª it å‚æ•° ä¸‹é¢é€šè¿‡ä»£ç æ¥æ„Ÿå—ä¸€ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081/** * æƒ…å†µ1ï¼šlet å‡½æ•° * 1ã€åˆ›å»ºä¸€ä¸ª StringBuilder å¯¹è±¡è°ƒç”¨ let å‡½æ•°ï¼ŒLambda è¡¨è¾¾å¼ä¸­çš„å‚æ•°ä¸º StringBuilder å¯¹è±¡ * 2ã€å½“ Lambda è¡¨è¾¾å¼ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™å¯çœç•¥ï¼Œé»˜è®¤ä¼šæœ‰ä¸ª it çš„å‚æ•°ï¼Œè¿”å›žå€¼å³ä¸º Lambda è¡¨è¾¾å¼ä¸­æœ€åŽä¸€è¡Œä»£ç  */fun main() &#123; val name = "erdai" val age = 20 val returnValue = StringBuilder().let &#123; it.append(name).append(" ").append(age) &#125; println(returnValue)&#125;//æ‰“å°ç»“æžœerdai 20/** * æƒ…å†µ2ï¼šalso å‡½æ•° * 1ã€åˆ›å»ºä¸€ä¸ª StringBuilder å¯¹è±¡è°ƒç”¨ also å‡½æ•°ï¼ŒLambda è¡¨è¾¾å¼ä¸­çš„å‚æ•°ä¸º StringBuilder å¯¹è±¡ * 2ã€å½“ Lambda è¡¨è¾¾å¼ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°çš„æ—¶å€™å¯çœç•¥ï¼Œé»˜è®¤ä¼šæœ‰ä¸ª it çš„å‚æ•°ï¼Œæ— æ³•æŒ‡å®šè¿”å›žå€¼ï¼Œè¿”å›žè°ƒç”¨å¯¹è±¡æœ¬èº« */fun main() &#123; val name = "erdai" val age = 20 val stringBuilder = StringBuilder().also &#123; it.append(name).append(" ").append(age) &#125; println(stringBuilder.toString())&#125;//æ‰“å°ç»“æžœerdai 20/** * æƒ…å†µ3ï¼šwith å‡½æ•° * 1ã€æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸º StringBuilder å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸º Lambda è¡¨è¾¾å¼ï¼Œ * 2ã€Lambda è¡¨è¾¾å¼ä¸­æ‹¥æœ‰ StringBuilder å¯¹è±¡çš„ä¸Šä¸‹æ–‡ this, è¿”å›žå€¼å³ä¸º Lambda è¡¨è¾¾å¼ä¸­çš„æœ€åŽä¸€è¡Œä»£ç  */fun main() &#123; val name = "erdai" val age = 20 val returnValue = with(StringBuilder()) &#123; append(name).append(" ").append(age) &#125; println(returnValue)&#125;//æ‰“å°ç»“æžœerdai 20/** * æƒ…å†µ4ï¼šrun å‡½æ•° * 1ã€åˆ›å»ºä¸€ä¸ª StringBuilder å¯¹è±¡è°ƒç”¨ also å‡½æ•°ï¼ŒLambda è¡¨è¾¾å¼ä¸­æ‹¥æœ‰ StringBuilder å¯¹è±¡çš„ä¸Šä¸‹æ–‡ this * 2ã€è¿”å›žå€¼å³ä¸º Lambda è¡¨è¾¾å¼ä¸­çš„æœ€åŽä¸€è¡Œä»£ç  */fun main() &#123; val name = "erdai" val age = 20 val returnValue = StringBuilder().run &#123; append(name).append(" ").append(age) &#125; println(returnValue)&#125;//æ‰“å°ç»“æžœerdai 20/** * æƒ…å†µ5ï¼šapply å‡½æ•° * 1ã€åˆ›å»ºä¸€ä¸ª StringBuilder å¯¹è±¡è°ƒç”¨ apply å‡½æ•°ï¼ŒLambda è¡¨è¾¾å¼ä¸­æ‹¥æœ‰ StringBuilder å¯¹è±¡çš„ä¸Šä¸‹æ–‡ this * 2ã€æ— æ³•æŒ‡å®šè¿”å›žå€¼ï¼Œè¿”å›žè°ƒç”¨å¯¹è±¡æœ¬èº« */fun main() &#123; val name = "erdai" val age = 20 val stringBuilder = StringBuilder().apply &#123; append(name).append(" ").append(age) &#125; println(stringBuilder.toString())&#125;//æ‰“å°ç»“æžœerdai 20 å…¶å®žä¸Šé¢ 5 ä¸ªæ ‡å‡†å‡½æ•°æœ‰å¾ˆå¤šç›¸ä¼¼çš„åœ°æ–¹ï¼Œæˆ‘ä»¬éœ€æžæ¸…æ¥šå®ƒä»¬å·®å¼‚ä¹‹å¤„ï¼Œä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªå›¾è¡¨æ¥æ€»ç»“ä¸€ä¸‹ï¼š æ ‡å‡†å‡½æ•° å‡½æ•°å‚æ•° æ˜¯å¦æ˜¯æ‰©å±•å‡½æ•° è¿”å›žå€¼ T.let it æ˜¯ æœ€åŽä¸€è¡Œä»£ç  T.also it æ˜¯ å¯¹è±¡æœ¬èº« with this å¦ æœ€åŽä¸€è¡Œä»£ç  T.run this æ˜¯ æœ€åŽä¸€è¡Œä»£ç  T.apply this æ˜¯ å¯¹è±¡æœ¬èº« 2ã€å®šä¹‰é™æ€æ–¹æ³•Kotlin ä¸­æ²¡æœ‰ç›´æŽ¥æä¾›å®šä¹‰ä¸ºé™æ€æ–¹æ³•çš„å…³é”®å­—ï¼Œä½†æ˜¯æä¾›äº†ä¸€äº›ç±»ä¼¼çš„è¯­æ³•ç‰¹æ€§æ¥æ”¯æŒé™æ€æ–¹æ³•è°ƒç”¨çš„å†™æ³• 1ï¼‰ã€ä½¿ç”¨ companion object ä¸ºä¸€ä¸ªç±»åˆ›å»ºä¸€ä¸ªä¼´ç”Ÿç±»ï¼Œç„¶åŽè°ƒç”¨è¿™ä¸ªä¼´ç”Ÿç±»çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸å«é™æ€æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥å½“ä½œé™æ€æ–¹æ³•è°ƒç”¨ 2ï¼‰ã€ä½¿ç”¨ object å…³é”®å­—å®šä¹‰ä¸€ä¸ªå•ä¾‹ç±»ï¼Œé€šè¿‡å•ä¾‹ç±»ï¼ŒåŽ»è°ƒç”¨æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿä¸å«é™æ€æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥å½“ä½œé™æ€æ–¹æ³•è°ƒç”¨ 3ï¼‰ã€å¦‚æžœæƒ³å®šä¹‰çœŸæ­£çš„é™æ€æ–¹æ³•ï¼ŒKotlin ä¸­ä¹Ÿæä¾›äº†ä¸¤ç§æ–¹å¼ï¼š1ã€ä½¿ç”¨ @JvmStatic æ³¨è§£ï¼Œä¸”æ³¨è§£åªèƒ½åŠ åœ¨ä¼´ç”Ÿç±»å’Œå•ä¾‹ç±»ä¸Šçš„æ–¹æ³•ä¸Šé¢ 2ã€å®šä¹‰é¡¶å±‚æ–¹æ³• 4ï¼‰ã€é¡¶å±‚æ–¹æ³•å°±æ˜¯ä¸å®šä¹‰åœ¨ä»»ä½•ç±»ä¸­çš„æ–¹æ³•ï¼Œé¡¶å±‚æ–¹æ³•åœ¨ä»»ä½•ä½ç½®éƒ½èƒ½è¢«è°ƒç”¨åˆ°ï¼ŒKotlin ç¼–è¯‘å™¨ä¼šæŠŠæ‰€æœ‰çš„é¡¶å±‚æ–¹æ³•ç¼–è¯‘æˆé™æ€æ–¹æ³• 5ï¼‰ã€å¦‚æžœåœ¨ Java ä¸­è°ƒç”¨é¡¶å±‚æ–¹æ³•ï¼ŒJava é»˜è®¤æ˜¯æ²¡æœ‰é¡¶å±‚æ–¹æ³•çš„æ¦‚å¿µçš„ï¼ŒKotlin ç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªæˆ‘ä»¬å®šä¹‰è¿™ä¸ªæ–‡ä»¶çš„ Java ç±»ï¼Œä¾‹å¦‚æˆ‘åœ¨ Kotlin ä¸­çš„ Util.kt æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ªé¡¶å±‚æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šç”Ÿæˆä¸€ä¸ª UtilKt çš„ Java ç±»ä¾›åœ¨ Java ä¸­è°ƒç”¨ 6ï¼‰ã€åœ¨ Kotlin ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ å•ä¾‹ï¼Œä¼´ç”Ÿç±»å’Œé¡¶å±‚æ–¹æ³•ï¼Œ@JvmStatic æ³¨è§£ç”¨çš„æ¯”è¾ƒå°‘ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364//åœ¨ Java ä¸­æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ªé™æ€æ–¹æ³•public class Util &#123; public static void doAction()&#123; System.out.println("do something"); &#125;&#125;//Kotlin ä¸­ç±»ä¼¼è¿™æ ·é™æ€è°ƒç”¨å¤šç§å¤šæ ·//æƒ…å†µ1ï¼šä½¿ç”¨ companion object ä¸ºä¸€ä¸ªç±»åˆ›å»ºä¸€ä¸ªä¼´ç”Ÿç±»fun main() &#123; Util.doAction()&#125;class Util&#123; companion object&#123; fun doAction()&#123; println("do something") &#125; &#125;&#125;//æ‰“å°ç»“æžœdo something//æƒ…å†µ2ï¼šä½¿ç”¨ object å…³é”®å­—å®šä¹‰ä¸€ä¸ªå•ä¾‹ç±»fun main() &#123; Util.doAction()&#125;object Util &#123; fun doAction() &#123; println("do something") &#125;&#125;//æ‰“å°ç»“æžœdo something//æƒ…å†µ3ï¼š1ã€ä½¿ç”¨ @JvmStatic æ³¨è§£ 2ã€å®šä¹‰é¡¶å±‚æ–¹æ³•//1//å•ä¾‹ç±»object Util &#123; @JvmStatic fun doAction() &#123; println("do something") &#125;&#125;//ä¼´ç”Ÿç±»class Util &#123; companion object&#123; fun doAction() &#123; println("do something") &#125; &#125;&#125;//2 ä½¿ç”¨ AndroidStudio æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨å¼¹æ¡†ä¸­é€‰æ‹© File å³å¯ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ª File ä¸­ç¼–å†™ä¸€ä¸ªé¡¶å±‚æ–¹æ³•//é¡¶å±‚æ–¹æ³•åœ¨ä»»ä½•ä½ç½®éƒ½èƒ½è°ƒç”¨åˆ°fun doAction()&#123; println("do something")&#125; ä¸Šè¿°ä»£ç å¤§å®¶å¯ä»¥å°† Kotlin æ–‡ä»¶è½¬æ¢æˆ Java æ–‡ä»¶çœ‹ä¸€ä¸‹ï¼Œä½ å°±ä¼šå‘çŽ°å®šä¹‰çœŸæ­£çš„é™æ€æ–¹æ³•å’Œéžé™æ€æ–¹æ³•çš„åŒºåˆ« ä¸ƒã€å»¶è¿Ÿåˆå§‹åŒ–å’Œå¯†å°ç±»1ã€å¯¹å˜é‡å»¶è¿Ÿåˆå§‹åŒ–1ï¼‰ã€ä½¿ç”¨ lateinit å…³é”®å­—å¯¹ä¸€ä¸ªå˜é‡å»¶è¿Ÿåˆå§‹åŒ– ä½¿ç”¨ lateinit å…³é”®å­—æ³¨æ„äº‹é¡¹ï¼š 1ã€åªèƒ½ä½œç”¨äºŽ var å±žæ€§ï¼Œä¸”è¯¥å±žæ€§æ²¡æœ‰è‡ªå®šä¹‰ get å’Œ set æ–¹æ³• 2ã€è¯¥å±žæ€§å¿…é¡»æ˜¯éžç©ºç±»åž‹ï¼Œä¸”ä¸èƒ½æ˜¯åŽŸç”Ÿç±»åž‹ 2ï¼‰ã€å½“ä½ å¯¹ä¸€ä¸ªå˜é‡ä½¿ç”¨äº† lateinit å…³é”®å­—ï¼ŒKotlin ç¼–è¯‘å™¨å°±ä¸ä¼šåœ¨åŽ»æ£€æŸ¥è¿™ä¸ªå˜é‡æ˜¯å¦ä¼šä¸ºç©ºäº†ï¼Œæ­¤æ—¶ä½ è¦ç¡®ä¿å®ƒåœ¨è¢«è°ƒç”¨ä¹‹å‰å·²ç»åˆå§‹åŒ–äº†ï¼Œå¦åˆ™ç¨‹åºè¿è¡Œçš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œå¯ä»¥ä½¿ç”¨ ::object.isInitialized è¿™ç§å›ºå®šçš„è¯­æ³•ç»“æž„åˆ¤æ–­å˜é‡æ˜¯å¦å·²ç»åˆå§‹åŒ– 3ï¼‰ã€ä½¿ç”¨ by lazy å¯¹ä¸€ä¸ªå˜é‡å»¶è¿Ÿåˆå§‹åŒ– ä½¿ç”¨ by lazy æ³¨æ„äº‹é¡¹ï¼š 1ã€åªèƒ½ä½œç”¨äºŽ val å±žæ€§ 12345678910111213141516171819202122232425262728293031323334//æƒ…å†µ1ï¼šä½¿ç”¨ lateinit å…³é”®å­—å¯¹ä¸€ä¸ªå˜é‡å»¶è¿Ÿåˆå§‹åŒ–lateinit var name: Stringfun main() &#123; name = "erdai" println(name)&#125;//æ‰“å°ç»“æžœerdai//æƒ…å†µ2: ä½¿ç”¨ ::object.isInitialized è¿™ç§å›ºå®šçš„è¯­æ³•ç»“æž„åˆ¤æ–­å˜é‡æ˜¯å¦å·²ç»åˆå§‹åŒ–lateinit var name: Stringfun main() &#123; if(::name.isInitialized)&#123; println(name) &#125;else&#123; println("name not been initialized") &#125;&#125;//æ‰“å°ç»“æžœname not been initialized//æƒ…å†µ3: ä½¿ç”¨ by lazy å¯¹ä¸€ä¸ªå˜é‡å»¶è¿Ÿåˆå§‹åŒ–//ç‰¹ç‚¹ï¼šè¯¥å±žæ€§è°ƒç”¨çš„æ—¶å€™æ‰ä¼šåˆå§‹åŒ–ï¼Œä¸” lazy åŽé¢çš„ Lambda è¡¨è¾¾å¼åªä¼šæ‰§è¡Œä¸€æ¬¡val name: String by lazy &#123; "erdai"&#125;fun main() &#123; println(name)&#125;//æ‰“å°ç»“æžœerdai 2ã€ä½¿ç”¨å¯†å°ç±»ä¼˜åŒ–ä»£ç å¯†å°ç±»èƒ½ä½¿æˆ‘ä»¬å†™å‡ºæ›´åŠ è§„èŒƒå’Œå®‰å…¨çš„ä»£ç  1ï¼‰ã€ä½¿ç”¨ sealed class å®šä¹‰ä¸€ä¸ªå¯†å°ç±» 2ï¼‰ã€å¯†å°ç±»åŠå…¶å­ç±»ï¼Œåªèƒ½å®šä¹‰åœ¨åŒä¸€ä¸ªæ–‡ä»¶çš„é¡¶å±‚ä½ç½® 3ï¼‰ã€å¯†å°ç±»å¯è¢«ç»§æ‰¿ 4ï¼‰ã€å½“æˆ‘ä»¬ä½¿ç”¨æ¡ä»¶è¯­å¥çš„æ—¶å€™ï¼Œéœ€è¦å®žçŽ°å¯†å°ç±»æ‰€æœ‰å­ç±»çš„æƒ…å†µï¼Œé¿å…å†™å‡ºæ°¸è¿œä¸ä¼šæ‰§è¡Œçš„ä»£ç  123456789101112131415161718192021222324252627//åœ¨ä½¿ç”¨å¯†å°ç±»ä¹‹å‰æˆ‘ä»¬å¯èƒ½ä¼šå†™å‡ºè¿™ç§ä»£ç interface Resultclass Success : Resultclass Failure : Result/** * é‚£ä¹ˆæ­¤æ—¶å¦‚æžœæˆ‘æ–°å¢žä¸€ä¸ªç±»å®žçŽ° Result æŽ¥å£ï¼Œç¼–è¯‘å™¨å¹¶ä¸ä¼šæç¤ºæˆ‘ä»¬åŽ»æ–°å¢žæ–°çš„æ¡ä»¶åˆ†æ”¯ * å¦‚æžœæˆ‘ä»¬æ²¡æœ‰æ–°å¢žç›¸åº”çš„æ¡ä»¶åˆ†æ”¯ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºçŽ°æ‰§è¡Œ else çš„æƒ…å†µ * å…¶å®žè¿™ä¸ª else å°±æ˜¯ä¸€ä¸ªæ— ç”¨åˆ†æ”¯ï¼Œè¿™ä»…ä»…æ˜¯ä¸ºäº†æ»¡è¶³ç¼–è¯‘å™¨çš„è¦æ±‚ */fun getResultMsg(result: Result) = when (result)&#123; is Success -&gt; "Success" is Failure -&gt; "Failure" else -&gt; throw RuntimeException()&#125;//åœ¨ä½¿ç”¨å¯†å°ç±»ä¹‹åŽsealed class Resultclass Success : Result()class Failure : Result()/** * æ­¤æ—¶æˆ‘ä»¬å°±é¿å…äº†å†™ else åˆ†æ”¯ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æžœæˆ‘æ–°å¢žä¸€ä¸ªç±»å®žçŽ° Result å¯†å°ç±» * ç¼–è¯‘å™¨å°±ä¼šæç¤ºå¼‚å¸¸ï¼Œéœ€è¦ when åŽ»æ–°å¢žç›¸åº”çš„æ¡ä»¶åˆ†æ”¯ */fun getResultMsg(result: Result) = when (result)&#123; is Success -&gt; "Success" is Failure -&gt; "Failure"&#125; å…«ã€æ‰©å±•å‡½æ•°å’Œè¿ç®—ç¬¦1ã€å¤§æœ‰ç”¨é€”çš„æ‰©å±•å‡½æ•°æ‰©å±•å‡½æ•°å…è®¸æˆ‘ä»¬åŽ»æ‰©å±•ä¸€ä¸ªç±»çš„å‡½æ•°ï¼Œè¿™ç§ç‰¹æ€§æ˜¯ Java ä¸­æ‰€æ²¡æœ‰çš„ 1ï¼‰ã€æ‰©å±•å‡½æ•°çš„è¯­æ³•ç»“æž„å¦‚ä¸‹ï¼š 123fun ClassName.methodName(params1: Int, params2: Int) : Int&#123; &#125; ç›¸æ¯”äºŽæ™®é€šçš„å‡½æ•°ï¼Œæ‰©å±•å‡½æ•°åªéœ€è¦åœ¨å‡½æ•°å‰é¢åŠ ä¸Šä¸€ä¸ª ClassName. çš„è¯­æ³•ç»“æž„ï¼Œå°±è¡¨ç¤ºæŠŠè¯¥å‡½æ•°æ·»åŠ åˆ°æŒ‡å®šçš„ç±»ä¸­ 2ï¼‰ã€ä¸€èˆ¬æˆ‘ä»¬è¦å®šä¹‰å“ªä¸ªç±»çš„æ‰©å±•å‡½æ•°ï¼Œæˆ‘ä»¬å°±å®šä¹‰ä¸€ä¸ªåŒåçš„ Kotlin æ–‡ä»¶ï¼Œä¾¿äºŽåŽç»­æŸ¥æ‰¾ï¼Œè™½ç„¶è¯´ä¹Ÿå¯ä»¥å®šä¹‰åœ¨ä»»ä½•ä¸€ä¸ªç±»ä¸­ï¼Œä½†æ˜¯æ›´æŽ¨èå°†å®ƒå®šä¹‰æˆé¡¶å±‚æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥è®©æ‰©å±•æ–¹æ³•æ‹¥æœ‰å…¨å±€çš„è®¿é—®åŸŸ 3ï¼‰ã€æ‰©å±•å‡½æ•°é»˜è®¤æ‹¥æœ‰è¿™ä¸ªç±»çš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒ ä¾‹å¦‚æˆ‘ä»¬çŽ°åœ¨è¦ç»™ String è¿™ä¸ªç±»æ‰©å±•ä¸€ä¸ª printString æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ–°å»ºä¸€ä¸ª String.kt çš„æ–‡ä»¶ï¼Œç„¶åŽåœ¨è¿™ä¸ªæ–‡ä»¶ä¸‹é¢ç¼–å†™æ‰©å±•å‡½æ•°ï¼š 12345678910fun String.printString()&#123; println(this)&#125;fun main() &#123; val name = "erdai" name.printString()&#125;//æ‰“å°ç»“æžœerdai 2ã€æœ‰è¶£çš„è¿ç®—ç¬¦é‡è½½Kotlin çš„è¿ç®—ç¬¦é‡è½½å…è®¸æˆ‘ä»¬è®©ä»»æ„ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œç›¸åŠ ï¼Œæˆ–è€…æ˜¯è¿›è¡Œå…¶ä»–æ›´å¤šçš„è¿ç®—æ“ä½œ 1ï¼‰è¿ç®—ç¬¦é‡è½½ä½¿ç”¨çš„æ˜¯ operator å…³é”®å­—ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æŒ‡å®šå‡½æ•°å‰é¢åŠ ä¸Š operator å…³é”®å­—ï¼Œå°±å¯ä»¥å®žçŽ°è¿ç®—ç¬¦é‡è½½çš„åŠŸèƒ½äº†ã€‚ ä¸Šé¢æ‰€è¯´çš„æŒ‡å®šå‡½æ•°æœ‰ä¸‹é¢è¿™äº›ï¼Œå¦‚å›¾ï¼š 2ï¼‰ä¾‹å¦‚æˆ‘çŽ°åœ¨è¦å®žçŽ°ä¸¤ä¸ªå¯¹è±¡ç›¸åŠ çš„åŠŸèƒ½ï¼Œå®ƒçš„è¯­æ³•ç»“æž„å¦‚ä¸‹ï¼š 12345class Obj &#123; operator fun plus(obj: Obj): Obj&#123; //do something &#125;&#125; ä¸‹é¢æˆ‘ä»¬æ¥å®žçŽ°ä¸€ä¸ªé‡‘é’±ç›¸åŠ çš„ä¾‹å­ï¼š 123456789101112131415161718192021222324252627class Money(val value: Int) &#123; //å®žçŽ°è¿ç®—ç¬¦é‡è½½ Money + Money operator fun plus(money: Money): Money &#123; val sum = value + money.value return Money(sum) &#125; //å®žçŽ°è¿ç®—ç¬¦é‡è½½ Money + Int operator fun plus(money: Int): Money&#123; val sum = value + money return Money(sum) &#125;&#125;fun main() &#123; val money1 = Money(15) val money2 = Money(20) val money3 = money1 + money2 val money4 = money3 + 15 println(money3.value) print(money4.value)&#125;//æ‰“å°ç»“æžœ3550 ä¹ã€é«˜é˜¶å‡½æ•°è¯¦è§£é«˜é˜¶å‡½æ•°å’Œ Lambda è¡¨è¾¾å¼æ˜¯å¯†ä¸å¯åˆ†çš„ï¼Œåœ¨ä¹‹å‰çš„ç« èŠ‚ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ä¸€äº› å‡½æ•°å¼ Api çš„ç”¨æ³•ï¼Œä½ ä¼šå‘çŽ°ï¼Œå®ƒä»¬éƒ½ä¼šæœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šéœ€è¦ä¼ å…¥ä¸€ä¸ª Lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ã€‚åƒè¿™ç§æŽ¥æ”¶ Lambda è¡¨è¾¾å¼çš„å‡½æ•°æˆ‘ä»¬å°±å¯ä»¥ç§°ä¹‹ä¸ºå…·æœ‰å‡½æ•°å¼ç¼–ç¨‹é£Žæ ¼çš„ Apiï¼Œè€Œå¦‚æžœä½ è¦å®šä¹‰è‡ªå·±çš„å‡½æ•°å¼ Apiï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨é«˜é˜¶å‡½æ•°æ¥å®žçŽ°äº† 1ã€å®šä¹‰é«˜é˜¶å‡½æ•°1ï¼‰é«˜é˜¶å‡½æ•°çš„å®šä¹‰ï¼šä¸€ä¸ªå‡½æ•°æŽ¥æ”¶å¦å¤–ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œæˆ–è€…è¿”å›žå€¼ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç§°ä¹‹ä¸ºé«˜é˜¶å‡½æ•° Kotlin ä¸­æ–°å¢žäº†å‡½æ•°ç±»åž‹ï¼Œå¦‚æžœæˆ‘ä»¬å°†è¿™ç§å‡½æ•°ç±»åž‹æ·»åŠ åˆ°ä¸€ä¸ªå‡½æ•°çš„å‚æ•°å£°æ˜Žæˆ–è€…è¿”å›žå€¼ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•° 2ï¼‰å‡½æ•°ç±»åž‹çš„è¯­æ³•è§„åˆ™å¦‚ä¸‹ 123(String,Int) -&gt; Unit//æˆ–è€…å¦‚ä¸‹() -&gt; Unit -&gt; çš„å·¦è¾¹å£°æ˜Žå‡½æ•°æŽ¥æ”¶ä»€ä¹ˆç±»åž‹çš„å‚æ•°ï¼Œ-&gt; çš„å³è¾¹å£°æ˜Žçš„æ˜¯å‡½æ•°çš„è¿”å›žå€¼ï¼ŒçŽ°åœ¨æˆ‘ä»¬æ¥å£°æ˜Žä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼š 123fun example(func: (String,Int) -&gt; Unit) &#123; //do something&#125; 3ï¼‰é«˜é˜¶å‡½æ•°çš„è°ƒç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å‚æ•°ååŽé¢åŠ ä¸Šä¸€å¯¹æ‹¬å·ï¼Œä¼ å…¥å¯¹åº”ç±»åž‹çš„å‚æ•°å³å¯ï¼Œä¾‹å¦‚ä»¥ä¸Šé¢å®šä¹‰çš„è¿™ä¸ªé«˜é˜¶å‡½æ•°ä¸ºä¾‹å­ï¼š 1234fun example(func: (String,Int) -&gt; Unit) &#123; //å‡½æ•°ç±»åž‹è°ƒç”¨ func("erdai",666)&#125; ä¸‹é¢æˆ‘ä»¬å°±æ¥å®žè·µä¸€ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940//æˆ‘ä»¬ä½¿ç”¨é«˜é˜¶å‡½æ•°æ¥èŽ·å–ä¸¤ä¸ªæ•°ç›¸åŠ çš„å’Œfun numberPlus(num1: Int,num2: Int,func: (Int,Int) -&gt; Int): Int&#123; val sum = func(num1,num2) return sum&#125;fun plus(num1: Int,num2: Int): Int&#123; return num1 + num2&#125;fun minus(num1: Int,num2: Int): Int&#123; return num1 - num2&#125;//è°ƒç”¨é«˜é˜¶å‡½æ•°çš„ä¸¤ç§æ–¹å¼//æ–¹å¼1ï¼šæˆå‘˜å¼•ç”¨ï¼Œä½¿ç”¨ ::plusï¼Œ::minusè¿™ç§å†™æ³•å¼•ç”¨ä¸€ä¸ªå‡½æ•°fun main() &#123; val numberPlus = numberPlus(10, 20, ::plus) val numberMinus = numberPlus(10, 20, ::minus) println(numberPlus) println(numberMinus)&#125;//æ‰“å°ç»“æžœ30-10//æ–¹å¼2ï¼šä½¿ç”¨ Lambda è¡¨è¾¾å¼çš„å†™æ³•fun main() &#123; val numberPlus = numberPlus(10, 20)&#123; num1,num2 -&gt; num1 + num2 &#125; val numberMinus = numberPlus(10, 20)&#123; num1,num2 -&gt; num1 - num2 &#125; println(numberPlus) println(numberMinus)&#125;//æ‰“å°ç»“æžœ30-10 å…¶ä¸­ä½¿ç”¨ Lambda è¡¨è¾¾å¼çš„å†™æ³•æ˜¯é«˜é˜¶å‡½æ•°ä¸­æœ€æ™®éçš„è°ƒç”¨æ–¹å¼ 2ã€å†…è”å‡½æ•°çš„ä½œç”¨1ï¼‰å†…è”å‡½æ•°å¯ä»¥æ¶ˆé™¤ Lambda è¡¨è¾¾å¼è¿è¡Œæ—¶å¸¦æ¥çš„å¼€é”€ Kotlin ä»£ç æœ€ç»ˆè¿˜æ˜¯ä¼šè½¬æ¢æˆ Java å­—èŠ‚ç æ–‡ä»¶ï¼Œä¸¾ä¸ªðŸŒ°ï¼š 1234567891011121314151617181920212223242526272829fun numberPlus(num1: Int,num2: Int,func: (Int,Int) -&gt; Int): Int&#123; val sum = func(num1,num2) return sum&#125;fun main() &#123; val num1 = 10 val num2 = 20 val numberPlus = numberPlus(num1, num2)&#123; num1,num2 -&gt; num1 + num2 &#125;&#125;//ä¸Šé¢è¿™äº›ä»£ç æœ€ç»ˆè½¬æ¢æˆ Java ä»£ç å¤§æ¦‚ä¼šå˜æˆè¿™æ ·ï¼špublic static int numberPlus(int num1, int num2, Function operation)&#123; int sum = (int) operation.invoke(num1,num2); return sum;&#125;public static void main()&#123; int num1 = 10; int num2 = 20; int sum = numberPlus(num1,num2,new Function()&#123; @Override public Integer invoke(Integer num1,Integer num2)&#123; return num1 + num2; &#125; &#125;);&#125; å¯ä»¥çœ‹åˆ°ï¼Œè½¬æ¢ä¹‹åŽï¼ŒnumberPlus å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°å˜æˆäº†ä¸€ä¸ª Function æŽ¥å£ï¼Œè¿™æ˜¯ä¸€ç§ Kotlin çš„å†…ç½®æŽ¥å£ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªå¾…å®žçŽ°çš„ invoke å‡½æ•°ï¼Œè€Œ numberPlus å‡½æ•°å…¶å®žå°±æ˜¯è°ƒç”¨äº† Function æŽ¥å£çš„ invoke å‡½æ•°ï¼Œå¹¶æŠŠ num1 å’Œ num2 ä¼ äº†è¿›åŽ»ã€‚ä¹‹å‰çš„ Lambda è¡¨è¾¾å¼åœ¨è¿™é‡Œå˜æˆäº† Function æŽ¥å£çš„åŒ¿åç±»å®žçŽ°ï¼Œè¿™å°±æ˜¯ Lambda è¡¨è¾¾å¼çš„åº•å±‚è½¬æ¢é€»è¾‘ï¼Œå› æ­¤æˆ‘ä»¬æ¯è°ƒç”¨ä¸€æ¬¡ Lambda è¡¨è¾¾å¼ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åŒ¿åç±»å®žä¾‹ï¼Œè¿™æ ·å°±ä¼šé€ æˆé¢å¤–çš„å†…å­˜å’Œæ€§èƒ½å¼€é”€ã€‚ä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨å†…è”å‡½æ•°ï¼Œå°±å¯ä»¥å¾ˆå¥½çš„åŽ»è§£å†³è¿™ä¸ªé—®é¢˜ 2ï¼‰å®šä¹‰é«˜é˜¶å‡½æ•°æ—¶åŠ ä¸Š inline å…³é”®å­—ä¿®é¥°ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°ç§°ä¹‹ä¸ºå†…è”å‡½æ•° 12345//å®šä¹‰ä¸€ä¸ªå†…è”å‡½æ•°inline fun numberPlus(num1: Int,num2: Int,func: (Int,Int) -&gt; Int): Int&#123; val sum = func(num1,num2) return sum&#125; é‚£è¿™é‡Œæˆ‘å°±ä¼šæœ‰ä¸ªç–‘é—®ï¼Œä¸ºå•¥å†…è”å‡½æ•°èƒ½æ¶ˆé™¤ Lambda è¡¨è¾¾å¼è¿è¡Œæ—¶å¸¦æ¥çš„å¼€é”€å‘¢ï¼Ÿ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦åŽ»å‰–æžä¸€ä¸‹å†…è”å‡½æ•°çš„å·¥ä½œåŽŸç†äº†ï¼Œå¦‚ä¸‹ï¼š 123456789101112inline fun numberPlus(num1: Int,num2: Int,func: (Int,Int) -&gt; Int): Int&#123; val sum = func(num1,num2) return sum&#125;fun main() &#123; val num1 = 10 val num2 = 20 val numberPlus = numberPlus(num1, num2)&#123; num1,num2 -&gt; num1 + num2 &#125;&#125; ç¬¬ä¸€æ­¥æ›¿æ¢è¿‡ç¨‹ï¼šKotlin ç¼–è¯‘å™¨ä¼šæŠŠ Lambda è¡¨è¾¾å¼ä¸­çš„ä»£ç æ›¿æ¢åˆ°å‡½æ•°ç±»åž‹å‚æ•°è°ƒç”¨çš„åœ°æ–¹ ï¼Œå¦‚ä¸‹å›¾ï¼š æ›¿æ¢åŽä»£ç å˜æˆäº†è¿™æ ·ï¼š 12345678910inline fun numberPlus(num1: Int,num2: Int,func: (Int,Int) -&gt; Int): Int&#123; val sum = num1 + num2 return sum&#125;fun main() &#123; val num1 = 10 val num2 = 20 val numberPlus = numberPlus(num1, num2);&#125; ç¬¬äºŒæ­¥æ›¿æ¢è¿‡ç¨‹ï¼šKotlin ç¼–è¯‘å™¨ä¼šæŠŠå†…è”å‡½æ•°ä¸­çš„å…¨éƒ¨ä»£ç æ›¿æ¢åˆ°å‡½æ•°è°ƒç”¨çš„åœ°æ–¹ ï¼Œå¦‚ä¸‹å›¾ï¼š æ›¿æ¢åŽä»£ç å˜æˆäº†è¿™æ ·ï¼š 12345fun main() &#123; val num1 = 10 val num2 = 20 val numberPlus = num1 + num2&#125; ä¸Šè¿°æ­¥éª¤å°±æ˜¯å†…è”å‡½æ•°çš„ä¸€ä¸ªå·¥ä½œæµç¨‹ï¼šKotlin ç¼–è¯‘å™¨ä¼šæŠŠå†…è”å‡½æ•°ä¸­çš„ä»£ç åœ¨ç¼–è¯‘çš„æ—¶å€™è‡ªåŠ¨æ›¿æ¢åˆ°è°ƒç”¨å®ƒçš„åœ°æ–¹ ï¼Œè¿™æ ·ä¹Ÿå°±ä¸å­˜åœ¨è¿è¡Œæ—¶çš„å¼€é”€äº† 3ï¼‰ä½¿ç”¨ noinline å…³é”®å­—ä¿®é¥°çš„å‡½æ•°ç±»åž‹å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°ç±»åž‹å‚æ•°ä¸éœ€è¦è¿›è¡Œå†…è” ä¸€èˆ¬ä½¿ç”¨ noinline å…³é”®å­—ï¼Œæ˜¯åœ¨ä¸€ä¸ªå†…è”å‡½æ•°ä¸­å­˜åœ¨å¤šä¸ªå‡½æ•°ç±»åž‹çš„å‚æ•° 1234//ä½¿ç”¨å†…è”å‡½æ•°å®šä¹‰çš„é«˜é˜¶å‡½æ•°ï¼Œå…¶é‡Œé¢çš„å‡½æ•°ç±»åž‹å‚æ•°éƒ½ä¼šè¿›è¡Œå†…è”ï¼Œå› æ­¤è¿™é‡Œä½¿ç”¨ noinline è¡¨ç¤ºæˆ‘è¿™ä¸ªå‡½æ•°ç±»åž‹å‚æ•°ä¸éœ€è¦å†…è”inline fun inlineTest(block1: () -&gt; Unit, noinline block2: () -&gt; Unit)&#123; &#125; å‰é¢æˆ‘ä»¬è®²åˆ°ï¼Œä½¿ç”¨å†…è”å‡½æ•°èƒ½å‡å°‘è¿è¡Œæ—¶å¼€é”€ï¼Œä¸ºå•¥çŽ°åœ¨åˆè¦å‡ºæ¥ä¸ª noinline å…³é”®å­—å®šä¹‰ä¸éœ€è¦å†…è”å‘¢ï¼ŸåŽŸå› å¦‚ä¸‹ï¼š 1ã€å†…è”å‡½æ•°åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šè¿›è¡Œä»£ç æ›¿æ¢ï¼Œå› æ­¤å®ƒæ²¡æœ‰çœŸæ­£çš„å‚æ•°å±žæ€§ï¼Œå®ƒçš„å‡½æ•°ç±»åž‹å‚æ•°åªèƒ½ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå†…è”å‡½æ•°ï¼Œè€Œéžå†…è”å‡½æ•°çš„å‡½æ•°ç±»åž‹å‚æ•°å¯ä»¥è‡ªç”±çš„ä¼ é€’ç»™å…¶ä»–ä»»ä½•å‡½æ•° 2ã€å†…è”å‡½æ•°æ‰€å¼•ç”¨çš„ Lambda è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨ return å…³é”®å­—æ¥è¿›è¡Œå‡½æ•°è¿”å›žï¼Œéžå†…è”å‡½æ•°æ‰€å¼•ç”¨çš„ Lambda è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨ return@Method è¯­æ³•ç»“æž„æ¥è¿›è¡Œå±€éƒ¨è¿”å›ž 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566//æƒ…å†µ1ï¼šéžå†…è”å‡½æ•°æ‰€å¼•ç”¨çš„ Lambda è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨ return å…³é”®å­—æ¥è¿›è¡Œå±€éƒ¨è¿”å›ž//å®šä¹‰ä¸€ä¸ªéžå†…è”çš„é«˜é˜¶å‡½æ•°fun printString(str: String, block: (String) -&gt; Unit)&#123; println("printString start...") block(str) println("printString end...")&#125;fun main() &#123; println("main start...") val str = "" printString(str)&#123; println("lambda start...") /** * 1ï¼Œéžå†…è”å‡½æ•°ä¸èƒ½ç›´æŽ¥ä½¿ç”¨ return å…³é”®å­—è¿›è¡Œå±€éƒ¨è¿”å›ž * 2ï¼Œéœ€è¦ä½¿ç”¨ return@printString è¿›è¡Œå±€éƒ¨è¿”å›ž */ if (str.isEmpty())return@printString println(it) println("lambda end...") &#125; println("main end...")&#125;//æ‰“å°ç»“æžœmain start...printString start...lambda start...printString end...main end...//æƒ…å†µ2ï¼šå†…è”å‡½æ•°æ‰€å¼•ç”¨çš„ Lambda è¡¨è¾¾å¼å¯ä»¥ä½¿ç”¨ return å…³é”®å­—æ¥è¿›è¡Œå‡½æ•°è¿”å›ž//å®šä¹‰ä¸€ä¸ªéžå†…è”çš„é«˜é˜¶å‡½æ•°inline fun printString(str: String, block: (String) -&gt; Unit)&#123; println("printString start...") block(str) println("printString end...")&#125;fun main() &#123; println("main start...") val str = "" printString(str)&#123; println("lambda start...") if (str.isEmpty())return println(it) println("lambda end...") &#125; println("main end...")&#125;//å› ä¸ºå†…è”å‡½æ•°ä¼šè¿›è¡Œä»£ç æ›¿æ¢ï¼Œå› æ­¤è¿™ä¸ª return å°±ç›¸å½“äºŽå¤–å±‚å‡½æ•°è°ƒç”¨çš„ä¸€ä¸ªè¿”å›žï¼Œå¦‚ä¸‹ä»£ç ï¼šfun main() &#123; println("main start...") val str = "" println("printString start...") println("lambda start...") if (str.isEmpty())return println(str) println("lambda end...") println("printString end...") println("main end...")&#125;//æ‰“å°ç»“æžœmain start...printString start...lambda start... 4ï¼‰ã€ä½¿ç”¨ crossinline å…³é”®å­—ä¿è¯å†…è”å‡½æ•°çš„ Lambda è¡¨è¾¾å¼ä¸­ä¸€å®šä¸ä¼šä½¿ç”¨ return å…³é”®å­—ï¼Œä½†æ˜¯è¿˜æ˜¯å¯ä»¥ä½¿ç”¨ return@Method è¯­æ³•ç»“æž„è¿›è¡Œå±€éƒ¨è¿”å›žï¼Œå…¶ä»–æ–¹é¢å’Œå†…è”å‡½æ•°ç‰¹æ€§ä¸€è‡´ ä¸¾ä¸ªä½¿ç”¨ crossinline åœºæ™¯çš„ðŸŒ° ï¼š ä¸Šé¢å›¾ç‰‡ä¸­çš„ä»£ç æŠ¥é”™äº†ï¼Œç¼–è¯‘å™¨æç¤ºæˆ‘ä»¬çš„å¤§è‡´åŽŸå› æ˜¯ï¼šè¿™ä¸ªåœ°æ–¹ä¸èƒ½ä½¿ç”¨ inline ,å› ä¸ºå®ƒå¯èƒ½åŒ…å«éžå±€éƒ¨çš„ return è¿”å›žï¼Œæ·»åŠ  crossinline ä¿®é¥°ç¬¦åŽ»ä¿®é¥°è¿™ä¸ªå‡½æ•°ç±»åž‹çš„å‚æ•°ã€‚ ä¸ºå•¥å‘¢ï¼Ÿæˆ‘ä»¬æ¥åˆ†æžä¸€ä¸‹ï¼š æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Runnable å¯¹è±¡ï¼Œåœ¨ Runnable ä¸­çš„ Lambda è¡¨è¾¾å¼ä¸­è°ƒç”¨äº†å‡½æ•°ç±»åž‹å‚æ•°ï¼ŒLambda è¡¨è¾¾å¼åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šè¢«è½¬æ¢æˆåŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼ï¼Œå†…è”å‡½æ•°å…è®¸æˆ‘ä»¬åœ¨ Lambda è¡¨è¾¾å¼ä¸­ä½¿ç”¨ return å…³é”®å­—è¿›è¡Œå‡½æ•°è¿”å›žï¼Œä½†æ˜¯ç”±äºŽæˆ‘ä»¬æ˜¯åœ¨åŒ¿åç±»ä¸­è°ƒç”¨çš„å‡½æ•°ç±»åž‹å‚æ•°ï¼Œæ­¤æ—¶æ˜¯ä¸å¯èƒ½è¿›è¡Œå¤–å±‚è°ƒç”¨å‡½æ•°è¿”å›žçš„ï¼Œæœ€å¤šæ˜¯åœ¨åŒ¿åå‡½æ•°ä¸­è¿›è¡Œè¿”å›žï¼Œå› æ­¤è¿™é‡Œå°±æç¤ºäº†é”™è¯¯ï¼ŒçŸ¥é“äº†åŽŸå› é‚£æˆ‘ä»¬ä½¿ç”¨ crossinline å…³é”®å­—æ¥ä¿®æ”¹ä¸€ä¸‹ 12345678910111213141516171819202122232425inline fun runRunnable(crossinline block: () -&gt; Unit) &#123; println("runRunnable start...") val runnable = Runnable &#123; block() &#125; runnable.run() println("runRunnable end...")&#125;fun main() &#123; println("main start...") runRunnable &#123; println("lambda start...") return@runRunnable println("lambda end...") &#125; println("main end...")&#125;//æ‰“å°ç»“æžœmain start...runRunnable start...lambda start...runRunnable end...main end... åã€æ³›åž‹å’Œå§”æ‰˜1ã€æ³›åž‹çš„åŸºæœ¬ç”¨æ³•1ï¼‰ã€é¦–å…ˆæˆ‘ä»¬è§£é‡Šä¸‹ä»€ä¹ˆæ˜¯æ³›åž‹ï¼Œæ³›åž‹å°±æ˜¯å‚æ•°åŒ–ç±»åž‹ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸æŒ‡å®šå…·ä½“ç±»åž‹çš„æƒ…å†µä¸‹è¿›è¡Œç¼–ç¨‹ã€‚æˆ‘ä»¬åœ¨å®šä¹‰ä¸€ä¸ªç±»ï¼Œæ–¹æ³•ï¼Œæˆ–è€…æŽ¥å£çš„æ—¶å€™ï¼Œç»™ä»–ä»¬åŠ ä¸Šä¸€ä¸ªç±»åž‹å‚æ•°ï¼Œå°±æ˜¯ä¸ºè¿™ä¸ªç±»ï¼Œæ–¹æ³•ï¼Œæˆ–è€…æŽ¥å£æ·»åŠ äº†ä¸€ä¸ªæ³›åž‹ 1234567891011121314151617181920212223242526//1ã€å®šä¹‰ä¸€ä¸ªæ³›åž‹ç±»ï¼Œåœ¨ç±»ååŽé¢ä½¿ç”¨ &lt;T&gt; è¿™ç§è¯­æ³•ç»“æž„å°±æ˜¯ä¸ºè¿™ä¸ªç±»å®šä¹‰ä¸€ä¸ªæ³›åž‹class MyClass&lt;T&gt;&#123; fun method(params: T) &#123; &#125;&#125;//æ³›åž‹è°ƒç”¨val myClass = MyClass&lt;Int&gt;()myClass.method(12)//2ã€å®šä¹‰ä¸€ä¸ªæ³›åž‹æ–¹æ³•ï¼Œåœ¨æ–¹æ³•åçš„å‰é¢åŠ ä¸Š &lt;T&gt; è¿™ç§è¯­æ³•ç»“æž„å°±æ˜¯ä¸ºè¿™ä¸ªæ–¹æ³•å®šä¹‰ä¸€ä¸ªæ³›åž‹class MyClass&#123; fun &lt;T&gt; method(params: T)&#123; &#125;&#125;//æ³›åž‹è°ƒç”¨val myClass = MyClass()myClass.method&lt;Int&gt;(12)//æ ¹æ® Kotlin ç±»åž‹æŽ¨å¯¼æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ³›åž‹ç»™çœç•¥myClass.method(12)//3ã€å®šä¹‰ä¸€ä¸ªæ³›åž‹æŽ¥å£ï¼Œåœ¨æŽ¥å£ååŽé¢åŠ ä¸Š &lt;T&gt; è¿™ç§è¯­æ³•ç»“æž„å°±æ˜¯ä¸ºè¿™ä¸ªæŽ¥å£å®šä¹‰ä¸€ä¸ªæ³›åž‹interface MyInterface&lt;T&gt;&#123; fun interfaceMethod(params: T)&#125; ä¸Šé¢çš„ T ä¸æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥æ˜¯ä»»æ„å•è¯å’Œå­—æ¯ï¼Œä½†æ˜¯å®šä¹‰çš„æ³›åž‹å°½é‡åšåˆ°è§åçŸ¥ä¹‰ 2ï¼‰ã€ä¸ºæ³›åž‹æŒ‡å®šä¸Šç•Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;T : Class&gt; è¿™ç§è¯­æ³•ç»“æž„ï¼Œå¦‚æžœä¸æŒ‡å®šæ³›åž‹çš„ä¸Šç•Œï¼Œé»˜è®¤ä¸º Any? ç±»åž‹ 123456class MyClass&#123; //æˆ‘ä»¬æŒ‡å®šäº†æ³›åž‹çš„ä¸Šç•Œä¸º Number, é‚£ä¹ˆæˆ‘ä»¬å°±åªèƒ½ä¼ å…¥æ•°å­—ç±»åž‹çš„å‚æ•°äº† fun &lt;T : Number&gt; method(params: T) &#123; &#125;&#125; 2ã€ç±»å§”æ‰˜å’Œå§”æ‰˜å±žæ€§å§”æ‰˜æ¨¡å¼çš„æ„ä¹‰ï¼šåœ¨äºŽæˆ‘ä»¬å¤§éƒ¨åˆ†æ–¹æ³•å®žçŽ°å¯ä»¥è°ƒç”¨è¾…åŠ©å¯¹è±¡åŽ»å®žçŽ°ï¼Œå°‘éƒ¨åˆ†æ–¹æ³•çš„å®žçŽ°ç”±è‡ªå·±æ¥é‡å†™ï¼Œç”šè‡³åŠ å…¥ä¸€äº›è‡ªå·±ç‹¬æœ‰çš„æ–¹æ³•ï¼Œä½¿æˆ‘ä»¬è¿™ä¸ªç±»å˜æˆä¸€ä¸ªå…¨æ–°æ•°æ®ç»“æž„çš„ç±» 1ï¼‰ã€ç±»å§”æ‰˜æ ¸å¿ƒæ€æƒ³å°±æ˜¯æŠŠä¸€ä¸ªç±»çš„å…·ä½“å®žçŽ°å§”æ‰˜ç»™å¦å¤–ä¸€ä¸ªç±»ï¼Œä½¿ç”¨ by å…³é”®å­—è¿›è¡Œå§”æ‰˜ 12345678910111213141516171819202122232425//å®šä¹‰ä¸€ä¸ª MySet ç±»ï¼Œå®ƒé‡Œé¢çš„å…·ä½“å®žçŽ°éƒ½å§”æ‰˜ç»™äº† HashSet è¿™ä¸ªç±»ï¼Œè¿™æ˜¯æ˜¯ç±»å§”æ‰˜class MySet&lt;T&gt;(val helperSet: HashSet&lt;T&gt;) : Set&lt;T&gt;&#123; override val size: Int get() = helperSet.size override fun contains(element: T) = helperSet.contains(element) override fun containsAll(elements: Collection&lt;T&gt;) = helperSet.containsAll(elements) override fun isEmpty() = helperSet.isEmpty() override fun iterator() = helperSet.iterator()&#125;/** * å¦‚æžœæˆ‘ä»¬ä½¿ç”¨ by å…³é”®å­—ï¼Œä¸Šé¢çš„ä»£ç å°†ä¼šå˜å¾—éžå¸¸æ•´æ´ï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥å¯¹æŸä¸ªæ–¹æ³•è¿›è¡Œé‡å†™æˆ–è€…æ–°å¢žæ–¹æ³• * é‚£ä¹ˆ MySet å°±å˜æˆäº†ä¸€ä¸ªå…¨æ–°çš„æ•°æ®ç»“æž„ç±» */class MySet&lt;T&gt;(val helperSet: HashSet&lt;T&gt;) : Set&lt;T&gt; by helperSet&#123; fun helloWord()&#123; println("Hello World") &#125; override fun isEmpty() = false&#125; 2ï¼‰ã€å±žæ€§å§”æ‰˜çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¸€ä¸ªå±žæ€§çš„å…·ä½“å®žçŽ°å§”æ‰˜ç»™å¦ä¸€ä¸ªç±»åŽ»å®Œæˆ å±žæ€§å§”æ‰˜çš„è¯­æ³•ç»“æž„å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940/*** ä½¿ç”¨ by å…³é”®å­—è¿žæŽ¥äº†å·¦è¾¹çš„ p å±žæ€§å’Œå³è¾¹çš„ Delegate å®žä¾‹* è¿™ç§å†™æ³•å°±ä»£è¡¨ç€å°† p å±žæ€§çš„å…·ä½“å®žçŽ°å§”æ‰˜ç»™äº† Delegate åŽ»å®Œæˆ*/class MyClass&#123; var p by Delegate()&#125;/*** ä¸‹é¢æ˜¯ä¸€ä¸ªè¢«å§”æ‰˜ç±»çš„ä»£ç å®žçŽ°æ¨¡ç‰ˆ* ä¸€ã€getValue æ–¹æ³•å’ŒsetValue æ–¹æ³•å¿…é¡»ä½¿ç”¨ operator å…³é”®å­—ä¿®é¥°* * äºŒã€getValue æ–¹æ³•ä¸»è¦æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š* 1ã€ç¬¬ä¸€ä¸ªå‚æ•°è¡¨æ˜Ž Delegate ç±»çš„å§”æ‰˜åŠŸèƒ½å¯ä»¥åœ¨ä»€ä¹ˆç±»ä¸­ä½¿ç”¨* 2ã€ç¬¬äºŒä¸ªå‚æ•° KProperty&lt;*&gt; æ˜¯ Kotlin ä¸­çš„ä¸€ä¸ªå±žæ€§æ“ä½œç±»ï¼Œ* å¯ç”¨äºŽèŽ·å–å„ç§å±žæ€§çš„ç›¸å…³å€¼ï¼Œ&lt;*&gt;è¿™ç§æ³›åž‹çš„å†™æ³•ç±»ä¼¼ Java çš„* &lt;?&gt;ï¼Œè¡¨ç¤ºæˆ‘ä¸å…³å¿ƒæ³›åž‹çš„å…·ä½“ç±»åž‹** ä¸‰ã€setValue æ–¹æ³•ä¹Ÿæ˜¯ç›¸ä¼¼çš„ï¼ŒæŽ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š* 1ã€å‰é¢ä¸¤ä¸ªå‚æ•°å’Œ getValue æ˜¯ä¸€æ ·çš„* 2ã€ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºå…·ä½“è¦èµ‹å€¼ç»™å§”æ‰˜å±žæ€§çš„å€¼ï¼Œè¿™ä¸ªå‚æ•°çš„ç±»åž‹å¿…é¡»å’Œ* getValue æ–¹æ³•è¿”å›žå€¼çš„ç±»åž‹ä¿æŒä¸€è‡´*** ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼šç”¨ val å®šä¹‰çš„å˜é‡ä¸éœ€è¦å®žçŽ° setValue æ–¹æ³•ï¼Œå› ä¸º val* å…³é”®å­—å£°æ˜Žçš„å±žæ€§åªå¯è¯»ï¼Œèµ‹å€¼ä¹‹åŽå°±ä¸èƒ½æ›´æ”¹äº†*/class Delegate&#123; var propValue: Any? = null operator fun getValue(any: Any?,prop: KProperty&lt;*&gt;): Any?&#123; return propValue &#125; operator fun setValue(any: Any?,prop: KProperty&lt;*&gt;,value: Any?)&#123; propValue = value &#125;&#125; åä¸€ã€ä½¿ç”¨ infix å‡½æ•°æž„å»ºæ›´å¯è¯»çš„è¯­æ³•infix å‡½æ•°è¯­æ³•ç»“æž„å¯è¯»æ€§é«˜ï¼Œç›¸æ¯”äºŽè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ›´æŽ¥è¿‘äºŽä½¿ç”¨è‹±è¯­ A to B è¿™æ ·çš„è¯­æ³•ç»“æž„ ä¾‹å¦‚æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¼šä½¿ç”¨ï¼š A.to(B) è¿™ç§ç»“æž„ï¼Œä½†æ˜¯ä½¿ç”¨ infix å‡½æ•°æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼šA to Bï¼Œè¿™ç§è¯­æ³•æˆ‘ä»¬åœ¨è®² Map çš„æ—¶å€™ç”¨è¿‡ 12//å®šä¹‰ä¸€ä¸ªä¸å¯å˜ Map é›†åˆval map1 = mapOf("Apple" to 1,"Banana" to 2,"Orange" to 3, "Pear" to 4,"Grape" to 5) 1ï¼‰ã€åœ¨å‡½æ•°å‰é¢åŠ ä¸Š infix å…³é”®å­—ï¼Œå°±å¯ä»¥å£°æ˜Žè¿™æ˜¯ä¸€ä¸ª infix å‡½æ•° 123456789//å¯¹ String å¢žåŠ ä¸€ä¸ªæ‰©å±•çš„ infix å‡½æ•°ï¼Œæœ€ç»ˆè°ƒç”¨çš„è¿˜æ˜¯ String çš„ startsWith å‡½æ•°infix fun String.beginWith(string: String) = startsWith(string)fun main() &#123; val name = "erdai" println(name beginWith "er")&#125;//æ‰“å°ç»“æžœtrue æˆ‘ä»¬å†æ¥å®žçŽ°ä¸€ä¸ªåˆå§‹åŒ– Map æ—¶é‡Œé¢ä¼ å…¥ A to B è¿™ç§ infix å‡½æ•° 123456789//è¿™æ˜¯ A to B çš„æºç å®žçŽ°public infix fun &lt;A, B&gt; A.to(that: B): Pair&lt;A, B&gt; = Pair(this, that)//æˆ‘ä»¬ä»¿ç…§å®ƒå†™ä¸€ä¸ªpublic infix fun &lt;A,B&gt; A.with(that: B): Pair&lt;A,B&gt; = Pair(this,that)fun main() &#123; val map = mapOf("Apple" with 1,"Banana" with 2,"Orange" with 3,"Pear" with 4,"Grape" with 5)&#125; åäºŒã€ä½¿ç”¨ DSL æž„å»ºä¸“æœ‰çš„è¯­æ³•ç»“æž„1ï¼‰ã€DSL ä»‹ç» DSLè‹±æ–‡å…¨ç§°ï¼šdomain specific languageï¼Œä¸­æ–‡ç¿»è¯‘å³é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œä¾‹å¦‚ï¼šHTMLï¼ŒXMLç­‰ DSL è¯­è¨€ ç‰¹ç‚¹ è§£å†³ç‰¹å®šé¢†åŸŸçš„ä¸“æœ‰é—®é¢˜ å®ƒä¸Žç³»ç»Ÿç¼–ç¨‹è¯­è¨€èµ°çš„æ˜¯ä¸¤ä¸ªæžç«¯ï¼Œç³»ç»Ÿç¼–ç¨‹è¯­è¨€æ˜¯å¸Œæœ›è§£å†³æ‰€æœ‰çš„é—®é¢˜ï¼Œæ¯”å¦‚ Java è¯­è¨€å¸Œæœ›èƒ½åš Android å¼€å‘ï¼Œåˆå¸Œæœ›èƒ½åšåŽå°å¼€å‘ï¼Œå®ƒå…·æœ‰æ¨ªå‘æ‰©å±•çš„ç‰¹æ€§ã€‚è€Œ DSL å…·æœ‰çºµå‘æ·±å…¥è§£å†³ç‰¹å®šé¢†åŸŸä¸“æœ‰é—®é¢˜çš„ç‰¹æ€§ã€‚ æ€»çš„æ¥è¯´ï¼ŒDSL çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼šâ€œæ±‚ä¸“ä¸æ±‚å…¨ï¼Œè§£å†³ç‰¹å®šé¢†åŸŸçš„é—®é¢˜â€ã€‚ 2ï¼‰Kotin DSL é¦–å…ˆä»‹ç»ä¸€ä¸‹Gradleï¼šGradle æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªåŠ¨åŒ–æž„å»ºå·¥å…·ï¼Œæ˜¯ä¸€ç§åŸºäºŽ Groovy æˆ– Kotin çš„ DSLã€‚æˆ‘ä»¬çš„ Android åº”ç”¨å°±æ˜¯ä½¿ç”¨ Gradle æž„å»ºçš„ï¼Œå› æ­¤åŽç»­å†™è„šæœ¬ï¼Œå†™æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Kotlin åŽ»ç¼–å†™ï¼Œè€Œä¸” AndroidStudio å¯¹ Kotlin çš„æ”¯æŒå¾ˆå‹å¥½ï¼Œå„ç§æç¤ºï¼Œå†™èµ·æ¥å¾ˆçˆ½ã€‚ å¯¹äºŽæˆ‘ä»¬ Android å¼€å‘ï¼Œåœ¨ build.gradle æ–‡ä»¶é‡Œé¢æ·»åŠ ä¾èµ–çš„æ–¹å¼å¾ˆå¸¸è§ï¼š 1234dependencies &#123; implementation 'androidx.core:core-ktx:1.3.2' implementation 'androidx.appcompat:appcompat:1.2.0'&#125; ä¸Šé¢è¿™ç§å†™æ³•æ˜¯ä¸€ç§åŸºäºŽ Groovy çš„ DSLï¼Œä¸‹é¢æˆ‘ä»¬å°±ä½¿ç”¨ Kotlin æ¥å®žçŽ°ä¸€ä¸ªç±»ä¼¼çš„ DSLï¼š 12345678910111213141516171819class Dependency &#123; fun implementation(lib: String)&#123; &#125;&#125;fun dependencies(block: Dependency.() -&gt; Unit)&#123; val dependency = Dependency() dependency.block()&#125;fun main() &#123; //å› ä¸º Groovy å’Œ Kotlin è¯­æ³•ä¸åŒï¼Œå› æ­¤å†™æ³•ä¼šæœ‰ä¸€ç‚¹åŒºåˆ« dependencies &#123; implementation ("androidx.core:core-ktx:1.3.2") implementation ("androidx.appcompat:appcompat:1.2.0") &#125;&#125; åä¸‰ã€Java ä¸Ž Kotlin ä»£ç ä¹‹é—´çš„è½¬æ¢Java ä»£ç è½¬ Kotlin ä»£ç æ–¹å¼æœ‰2ï¼š 1ï¼‰ã€ç›´æŽ¥å°† Java ä»£ç å¤åˆ¶åˆ° Kotlin æ–‡ä»¶ä¸­ï¼ŒAndroidStudio ä¼šå‡ºæ¥æç¤ºæ¡†è¯¢é—®ä½ æ˜¯å¦è½¬æ¢ 2ï¼‰ã€æ‰“å¼€è¦è½¬æ¢çš„ Java æ–‡ä»¶ï¼Œåœ¨å¯¼èˆªæ ç‚¹å‡» Code -&gt; Convert Java File to Kotlin File Kotlin ä»£ç è½¬ Java ä»£ç æ‰“å¼€å½“å‰éœ€è¦è½¬æ¢çš„ Kotlin æ–‡ä»¶ï¼Œåœ¨å¯¼èˆªæ ç‚¹å‡» Tools -&gt; Kotlin -&gt;Show Kotlin Bytecode ï¼Œä¼šå‡ºæ¥å¦‚ä¸‹ç•Œé¢ï¼š ç‚¹å‡» Decompile å°±å¯ä»¥æŠŠ Kotlin å­—èŠ‚ç æ–‡ä»¶åç¼–è¯‘æˆ Java ä»£ç äº† åå››ã€æ€»ç»“æœ¬ç¯‡æ–‡ç« å¾ˆé•¿ï¼Œæˆ‘ä»¬ä»‹ç»äº† Kotlin å¤§éƒ¨åˆ†çŸ¥è¯†ç‚¹ï¼ŒæŒ‰ç…§æ–‡ç« å¼€å¤´çš„æ€ç»´å¯¼å›¾ï¼Œæˆ‘ä»¬å°±åªå‰©ä¸‹ Kotlin æ³›åž‹é«˜çº§ç‰¹æ€§å’Œ Kotlin æºç¨‹æ²¡æœ‰è®²äº†ï¼Œè¿™ä¸¤éƒ¨åˆ†ç›¸å¯¹æ¥è¯´æ¯”è¾ƒéš¾ï¼Œå’‹ä»¬åŽç»­åœ¨æ¥ä»”ç»†åˆ†æžã€‚ç›¸ä¿¡ä½ å¦‚æžœä»Žå¤´çœ‹åˆ°è¿™é‡Œï¼Œæ”¶èŽ·ä¸€å®šå¾ˆå¤šï¼Œå¦‚æžœè§‰å¾—æˆ‘å†™å¾—è¿˜ä¸é”™ï¼Œè¯·ç»™æˆ‘ç‚¹ä¸ªèµžå§ðŸ¤ è½¬å‘ï¼šhttps://juejin.cn/post/6942251919662383134]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlin5ç§å•åˆ—æ¨¡å¼]]></title>
    <url>%2Fposts%2F44748309.html</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å­¦ä¹ Kotlinè¿™é—¨è¯­è¨€ï¼Œåœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œè¿ç”¨åˆ°äº†å•ä¾‹æ¨¡å¼ã€‚å› ä¸ºå…¶è¡¨è¾¾æ–¹å¼ä¸ŽJavaæ˜¯ä¸åŒçš„ã€‚æ‰€ä»¥å¯¹ä¸åŒå•ä¾‹æ¨¡å¼çš„å®žçŽ°è¿›è¡Œäº†åˆ†åˆ«æŽ¢è®¨ã€‚ä¸»è¦å•ä¾‹æ¨¡å¼å®žçŽ°å¦‚ä¸‹ï¼š é¥¿æ±‰å¼ æ‡’æ±‰å¼ çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼ åŒé‡æ ¡éªŒé”å¼ é™æ€å†…éƒ¨ç±»å¼ PS:è¯¥ç¯‡æ–‡ç« ä¸è®¨è®ºå•ä¾‹æ¨¡å¼çš„è¿ç”¨åœºæ™¯ä¸Žå„ç§æ¨¡å¼ä¸‹çš„å•ä¾‹æ¨¡å¼çš„ä¼˜ç¼ºç‚¹ã€‚åªè®¨è®ºåœ¨Javaä¸‹ä¸åŒå•ä¾‹æ¨¡å¼ä¸‹çš„å¯¹åº”Kotlinå®žçŽ°ã€‚ ä¸€ã€é¥¿æ±‰å¼å®žçŽ°12345678910111213//Javaå®žçŽ°public class SingletonDemo &#123; private static SingletonDemo instance=new SingletonDemo(); private SingletonDemo()&#123; &#125; public static SingletonDemo getInstance()&#123; return instance; &#125;&#125;//Kotlinå®žçŽ°object SingletonDemo è¿™é‡Œå¾ˆå¤šå°ä¼™ä¼´ï¼Œå°±åƒäº†ä¸€æƒŠã€‚æˆ‘é ä¸€ä¸ªobject å…³é”®å­—å°±å®Œæˆç›¸åŒçš„åŠŸèƒ½ï¼Ÿä¸€è¡Œä»£ç ï¼Ÿ Kotlinçš„å¯¹è±¡å£°æ˜Ž å­¦ä¹ äº†Kotlinçš„å°ä¼™ä¼´è‚¯å®šçŸ¥é“,åœ¨Kotlinä¸­ç±»æ²¡æœ‰é™æ€æ–¹æ³•ã€‚å¦‚æžœä½ éœ€è¦å†™ä¸€ä¸ªå¯ä»¥æ— éœ€ç”¨ä¸€ä¸ªç±»çš„å®žä¾‹æ¥è°ƒç”¨ï¼Œä½†éœ€è¦è®¿é—®ç±»å†…éƒ¨çš„å‡½æ•°ï¼ˆä¾‹å¦‚ï¼Œå·¥åŽ‚æ–¹æ³•,å•ä¾‹ç­‰ï¼‰ï¼Œä½ å¯ä»¥æŠŠè¯¥ç±»å£°æ˜Žä¸ºä¸€ä¸ªå¯¹è±¡ã€‚ è¯¥å¯¹è±¡ä¸Žå…¶ä»–è¯­è¨€çš„é™æ€æˆå‘˜æ˜¯ç±»ä¼¼çš„ã€‚å¦‚æžœä½ æƒ³äº†è§£Kotlinå¯¹è±¡å£°æ˜Žçš„æ›´å¤šå†…å®¹ã€‚è¯·ç‚¹å‡»- - - ä¼ é€é—¨(https://www.kotlincn.net/docs/reference/object-declarations.html#%E4%BC%B4%E7%94%9F%E5%AF%B9%E8%B1%A1) åˆ°è¿™é‡Œï¼Œå¦‚æžœè¿˜æ˜¯æœ‰å¾ˆå¤šå°ä¼™ä¼´ä¸æ˜¯å¾ˆç›¸ä¿¡ä¸€è¡Œä»£ç å°±èƒ½è§£å†³è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸‹æ–¹å¼æŸ¥çœ‹Kotlinçš„å­—èŠ‚ç ã€‚ æŸ¥çœ‹Kotlinå¯¹åº”å­—èŠ‚ç  æˆ‘ä»¬è¿›å…¥æˆ‘ä»¬çš„Android Studioé€‰æ‹©Toolså·¥å…·æ ï¼Œé€‰æ‹©â€Kotlinâ€,é€‰æ‹©â€œShow Kotlin Bytecodeâ€ é€‰æ‹©è¿‡åŽå°±ä¼šè¿›å…¥åˆ°ä¸‹æ–¹ç•Œé¢ï¼š ç‚¹å‡»â€œDecompileâ€ æ ¹æ®å­—èŠ‚ç å¾—åˆ°ä»¥ä¸‹ä»£ç  12345678public final class SingletonDemo &#123; public static final SingletonDemo INSTANCE; private SingletonDemo()&#123;&#125; static &#123; SingletonDemo var0 = new SingletonDemo(); INSTANCE = var0; &#125;&#125; é€šè¿‡ä»¥ä¸Šä»£ç ï¼Œæˆ‘ä»¬äº†è§£äº‹å®žå°±æ˜¯è¿™ä¸ªæ ·å­çš„ï¼Œä½¿ç”¨Kotlinâ€objectâ€è¿›è¡Œå¯¹è±¡å£°æ˜Žä¸Žæˆ‘ä»¬çš„é¥¿æ±‰å¼å•ä¾‹çš„ä»£ç æ˜¯ç›¸åŒçš„ã€‚ äºŒã€æ‡’æ±‰å¼123456789101112131415161718192021222324252627//Javaå®žçŽ°public class SingletonDemo &#123; private static SingletonDemo instance; private SingletonDemo()&#123;&#125; public static SingletonDemo getInstance()&#123; if(instance==null)&#123; instance=new SingletonDemo(); &#125; return instance; &#125;&#125;//Kotlinå®žçŽ°class SingletonDemo private constructor() &#123; companion object &#123; private var instance: SingletonDemo? = null get() &#123; if (field == null) &#123; field = SingletonDemo() &#125; return field &#125; fun get(): SingletonDemo&#123; //ç»†å¿ƒçš„å°ä¼™ä¼´è‚¯å®šå‘çŽ°äº†ï¼Œè¿™é‡Œä¸ç”¨getInstanceä½œä¸ºä¸ºæ–¹æ³•åï¼Œæ˜¯å› ä¸ºåœ¨ä¼´ç”Ÿå¯¹è±¡å£°æ˜Žæ—¶ï¼Œå†…éƒ¨å·²æœ‰getInstanceæ–¹æ³•ï¼Œæ‰€ä»¥åªèƒ½å–å…¶ä»–åå­— return instance!! &#125; &#125;&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘çŽ°åœ¨Kotlinå®žçŽ°ä¸­ï¼Œæˆ‘ä»¬è®©å…¶ä¸»æž„é€ å‡½æ•°ç§æœ‰åŒ–å¹¶è‡ªå®šä¹‰äº†å…¶å±žæ€§è®¿é—®å™¨ï¼Œå…¶ä½™å†…å®¹å¤§åŒå°å¼‚ã€‚ å¦‚æžœæœ‰å°ä¼™ä¼´ä¸æ¸…æ¥šKotlinæž„é€ å‡½æ•°çš„ä½¿ç”¨æ–¹å¼ã€‚è¯·ç‚¹å‡» - - - æž„é€ å‡½æ•°(https://www.kotlincn.net/docs/reference/classes.html) ä¸æ¸…æ¥šKotlinçš„å±žæ€§ä¸Žè®¿é—®å™¨ï¼Œè¯·ç‚¹å‡» - - -å±žæ€§å’Œå­—æ®µ(https://www.kotlincn.net/docs/reference/properties.html) ä¸‰ã€çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼123456789101112131415161718192021222324252627//Javaå®žçŽ°public class SingletonDemo &#123; private static SingletonDemo instance; private SingletonDemo()&#123;&#125; public static synchronized SingletonDemo getInstance()&#123;//ä½¿ç”¨åŒæ­¥é” if(instance==null)&#123; instance=new SingletonDemo(); &#125; return instance; &#125;&#125;//Kotlinå®žçŽ°class SingletonDemo private constructor() &#123; companion object &#123; private var instance: SingletonDemo? = null get() &#123; if (field == null) &#123; field = SingletonDemo() &#125; return field &#125; @Synchronized fun get(): SingletonDemo&#123; return instance!! &#125; &#125;&#125; å¤§å®¶éƒ½çŸ¥é“åœ¨ä½¿ç”¨æ‡’æ±‰å¼ä¼šå‡ºçŽ°çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ä½¿ç”¨åŒæ­¥é”ï¼Œåœ¨Kotlinä¸­ï¼Œå¦‚æžœä½ éœ€è¦å°†æ–¹æ³•å£°æ˜Žä¸ºåŒæ­¥ï¼Œéœ€è¦æ·»åŠ @Synchronizedæ³¨è§£ã€‚ å››ã€åŒé‡æ ¡éªŒé”å¼ï¼ˆDouble Check)12345678910111213141516171819202122//Javaå®žçŽ°public class SingletonDemo &#123; private volatile static SingletonDemo instance; private SingletonDemo()&#123;&#125; public static SingletonDemo getInstance()&#123; if(instance==null)&#123; synchronized (SingletonDemo.class)&#123; if(instance==null)&#123; instance=new SingletonDemo(); &#125; &#125; &#125; return instance; &#125;&#125;//kotlinå®žçŽ°class SingletonDemo private constructor() &#123; companion object &#123; val instance: SingletonDemo by lazy(mode = LazyThreadSafetyMode.SYNCHRONIZED) &#123; SingletonDemo() &#125; &#125;&#125; å“‡ï¼å°ä¼™ä¼´ä»¬æƒŠå–œä¸ï¼Œæ„Ÿä¸æ„ŸåŠ¨å•Šã€‚æˆ‘ä»¬å±…ç„¶å‡ è¡Œä»£ç å°±å®žçŽ°äº†å¤šè¡Œçš„Javaä»£ç ã€‚å…¶ä¸­æˆ‘ä»¬è¿ç”¨åˆ°äº†Kotlinçš„å»¶è¿Ÿå±žæ€§ Lazyã€‚ Lazyæ˜¯æŽ¥å—ä¸€ä¸ª lambda å¹¶è¿”å›žä¸€ä¸ª Lazy å®žä¾‹çš„å‡½æ•°ï¼Œè¿”å›žçš„å®žä¾‹å¯ä»¥ä½œä¸ºå®žçŽ°å»¶è¿Ÿå±žæ€§çš„å§”æ‰˜ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨ get() ä¼šæ‰§è¡Œå·²ä¼ é€’ç»™ lazy() çš„ lambda è¡¨è¾¾å¼å¹¶è®°å½•ç»“æžœï¼Œ åŽç»­è°ƒç”¨ get() åªæ˜¯è¿”å›žè®°å½•çš„ç»“æžœã€‚ è¿™é‡Œè¿˜æœ‰æœ‰ä¸¤ä¸ªé¢å¤–çš„çŸ¥è¯†ç‚¹ã€‚ é«˜é˜¶å‡½æ•°ï¼Œé«˜é˜¶å‡½æ•°æ˜¯å°†å‡½æ•°ç”¨ä½œå‚æ•°æˆ–è¿”å›žå€¼çš„å‡½æ•°ï¼ˆæˆ‘å¾ˆçº ç»“æˆ‘åˆ°åº•è®²ä¸è®²ï¼Œå“Žï¼‰ã€‚å¤§å®¶è¿˜æ˜¯çœ‹è¿™ä¸ª â€”é«˜é˜¶å‡½æ•°(https://www.kotlincn.net/docs/reference/lambdas.html) å§”æ‰˜å±žæ€§(https://www.kotlincn.net/docs/reference/delegated-properties.html) å¦‚æžœä½ äº†è§£ä»¥ä¸ŠçŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ç›´æŽ¥æ¥çœ‹Lazyçš„å†…éƒ¨å®žçŽ°ã€‚ Lazyå†…éƒ¨å®žçŽ° 123456public fun &lt;T&gt; lazy(mode: LazyThreadSafetyMode, initializer: () -&gt; T): Lazy&lt;T&gt; = when (mode) &#123; LazyThreadSafetyMode.SYNCHRONIZED -&gt; SynchronizedLazyImpl(initializer) LazyThreadSafetyMode.PUBLICATION -&gt; SafePublicationLazyImpl(initializer) LazyThreadSafetyMode.NONE -&gt; UnsafeLazyImpl(initializer) &#125; è§‚å¯Ÿä¸Šè¿°ä»£ç ï¼Œå› ä¸ºæˆ‘ä»¬ä¼ å…¥çš„mode = LazyThreadSafetyMode.SYNCHRONIZEDï¼Œé‚£ä¹ˆä¼šç›´æŽ¥èµ° SynchronizedLazyImplï¼Œæˆ‘ä»¬ç»§ç»­è§‚å¯ŸSynchronizedLazyImplã€‚ LazyæŽ¥å£ SynchronizedLazyImplå®žçŽ°äº†LazyæŽ¥å£ï¼ŒLazyå…·ä½“æŽ¥å£å¦‚ä¸‹ï¼š1234567public interface Lazy&lt;out T&gt; &#123; //å½“å‰å®žä¾‹åŒ–å¯¹è±¡ï¼Œä¸€æ—¦å®žä¾‹åŒ–åŽï¼Œè¯¥å¯¹è±¡ä¸ä¼šå†æ”¹å˜ public val value: T //è¿”å›žtrueè¡¨ç¤ºï¼Œå·²ç»å»¶è¿Ÿå®žä¾‹åŒ–è¿‡äº†ï¼Œfalse è¡¨ç¤ºï¼Œæ²¡æœ‰è¢«å®žä¾‹åŒ–ï¼Œ //ä¸€æ—¦æ–¹æ³•è¿”å›žtrueï¼Œè¯¥æ–¹æ³•ä¼šä¸€ç›´è¿”å›žtrue,ä¸”ä¸ä¼šå†ç»§ç»­å®žä¾‹åŒ– public fun isInitialized(): Boolean&#125; ç»§ç»­æŸ¥çœ‹SynchronizedLazyImplï¼Œå…·ä½“å®žçŽ°å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930private class SynchronizedLazyImpl&lt;out T&gt;(initializer: () -&gt; T, lock: Any? = null) : Lazy&lt;T&gt;, Serializable &#123; private var initializer: (() -&gt; T)? = initializer @Volatile private var _value: Any? = UNINITIALIZED_VALUE // final field is required to enable safe publication of constructed instance private val lock = lock ?: this override val value: T get() &#123; val _v1 = _value //åˆ¤æ–­æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡ï¼Œå¦‚æžœåˆå§‹åŒ–è¿‡ç›´æŽ¥è¿”å›žï¼Œä¸åœ¨è°ƒç”¨é«˜çº§å‡½æ•°å†…éƒ¨é€»è¾‘ if (_v1 !== UNINITIALIZED_VALUE) &#123; @Suppress("UNCHECKED_CAST") return _v1 as T &#125; return synchronized(lock) &#123; val _v2 = _value if (_v2 !== UNINITIALIZED_VALUE) &#123; @Suppress("UNCHECKED_CAST") (_v2 as T) &#125; else &#123; val typedValue = initializer!!()//è°ƒç”¨é«˜çº§å‡½æ•°èŽ·å–å…¶è¿”å›žå€¼ _value = typedValue //å°†è¿”å›žå€¼èµ‹å€¼ç»™_value,ç”¨äºŽä¸‹æ¬¡åˆ¤æ–­æ—¶ï¼Œç›´æŽ¥è¿”å›žé«˜çº§å‡½æ•°çš„è¿”å›žå€¼ initializer = null typedValue &#125; &#125; &#125; //çœç•¥éƒ¨åˆ†ä»£ç &#125; é€šè¿‡ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬å‘çŽ° SynchronizedLazyImpl è¦†ç›–äº†LazyæŽ¥å£çš„valueå±žæ€§ï¼Œå¹¶ä¸”é‡æ–°äº†å…¶å±žæ€§è®¿é—®å™¨ã€‚å…¶å…·ä½“é€»è¾‘ä¸ŽJavaçš„åŒé‡æ£€éªŒæ˜¯ç±»ä¼¼çš„ã€‚ åˆ°é‡Œè¿™é‡Œå…¶å®žå¤§å®¶è¿˜æ˜¯è‚¯å®šæœ‰ç–‘é—®ï¼Œæˆ‘è¿™é‡Œåªæ˜¯å®žä¾‹åŒ–äº†SynchronizedLazyImplå¯¹è±¡ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå€¼çš„èŽ·å–ï¼Œå®ƒæ˜¯æ€Žä¹ˆæ‹¿åˆ°é«˜é˜¶å‡½æ•°çš„è¿”å›žå€¼å‘¢ï¼Ÿã€‚è¿™é‡Œåˆæ¶‰åŠåˆ°äº†å§”æ‰˜å±žæ€§ã€‚ å§”æ‰˜å±žæ€§è¯­æ³•æ˜¯ï¼šval/var &lt;å±žæ€§å&gt;: &lt;ç±»åž‹&gt; by &lt;è¡¨è¾¾å¼&gt;ã€‚åœ¨ by åŽé¢çš„è¡¨è¾¾å¼æ˜¯è¯¥ å§”æ‰˜ï¼Œ å› ä¸ºå±žæ€§å¯¹åº”çš„ get()ï¼ˆå’Œ set()ï¼‰ä¼šè¢«å§”æ‰˜ç»™å®ƒçš„ getValue() å’Œ setValue() æ–¹æ³•ã€‚å±žæ€§çš„å§”æ‰˜ä¸å¿…å®žçŽ°ä»»ä½•çš„æŽ¥å£ï¼Œä½†æ˜¯éœ€è¦æä¾›ä¸€ä¸ª getValue() å‡½æ•°ï¼ˆå’Œ setValue()â€”â€”å¯¹äºŽ var å±žæ€§ï¼‰ã€‚ è€ŒLazy.ktæ–‡ä»¶ä¸­ï¼Œå£°æ˜Žäº†LazyæŽ¥å£çš„getValueæ‰©å±•å‡½æ•°ã€‚æ•…åœ¨æœ€ç»ˆèµ‹å€¼çš„æ—¶å€™ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚ 123@kotlin.internal.InlineOnly//è¿”å›žåˆå§‹åŒ–çš„å€¼ã€‚public inline operator fun &lt;T&gt; Lazy&lt;T&gt;.getValue(thisRef: Any?, property: KProperty&lt;*&gt;): T = value äº”ã€é™æ€å†…éƒ¨ç±»å¼12345678910111213141516171819202122//Javaå®žçŽ°public class SingletonDemo &#123; private static class SingletonHolder&#123; private static SingletonDemo instance=new SingletonDemo(); &#125; private SingletonDemo()&#123; System.out.println("Singleton has loaded"); &#125; public static SingletonDemo getInstance()&#123; return SingletonHolder.instance; &#125;&#125;//kotlinå®žçŽ°class SingletonDemo private constructor() &#123; companion object &#123; val instance = SingletonHolder.holder &#125; private object SingletonHolder &#123; val holder= SingletonDemo() &#125;&#125; é™æ€å†…éƒ¨ç±»çš„å®žçŽ°æ–¹å¼ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ã€‚Kotlinä¸ŽJavaå®žçŽ°åŸºæœ¬é›·åŒã€‚ è¡¥å……åœ¨è¯¥ç¯‡æ–‡ç« ç»“æŸåŽï¼Œæœ‰å¾ˆå¤šå°ä¼™ä¼´å’¨è¯¢ï¼Œå¦‚ä½•åœ¨Kotlinç‰ˆçš„Double Checkï¼Œç»™å•ä¾‹æ·»åŠ ä¸€ä¸ªå±žæ€§ï¼Œè¿™é‡Œæˆ‘ç»™å¤§å®¶æä¾›äº†ä¸€ä¸ªå®žçŽ°çš„æ–¹å¼ã€‚ 12345678910class SingletonDemo private constructor(private val property: Int) &#123;//è¿™é‡Œå¯ä»¥æ ¹æ®å®žé™…éœ€æ±‚å‘ç”Ÿæ”¹å˜ companion object &#123; @Volatile private var instance: SingletonDemo? = null fun getInstance(property: Int) = instance ?: synchronized(this) &#123; instance ?: SingletonDemo(property).also &#123; instance = it &#125; &#125; &#125;&#125; å…¶ä¸­å…³äºŽ?:æ“ä½œç¬¦ï¼Œå¦‚æžœ ?: å·¦ä¾§è¡¨è¾¾å¼éžç©ºï¼Œå°±è¿”å›žå…¶å·¦ä¾§è¡¨è¾¾å¼ï¼Œå¦åˆ™è¿”å›žå³ä¾§è¡¨è¾¾å¼ã€‚è¯·æ³¨æ„ï¼Œå½“ä¸”ä»…å½“å·¦ä¾§ä¸ºç©ºæ—¶ï¼Œæ‰ä¼šå¯¹å³ä¾§è¡¨è¾¾å¼æ±‚å€¼ã€‚ è§‚å¯Ÿä»£ç æˆ‘ä»¬å¯ä»¥å‘çŽ°å¤§è‡´ä¸Šå’Œæˆ‘ä»¬çš„Javaä¸­çš„Double checkæ˜¯ä¸€æ ·çš„ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinå§”æ‰˜]]></title>
    <url>%2Fposts%2Fa7864737.html</url>
    <content type="text"><![CDATA[å§”æ‰˜æ¨¡å¼æ˜¯è½¯ä»¶è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€é¡¹åŸºæœ¬æŠ€å·§ã€‚åœ¨å§”æ‰˜æ¨¡å¼ä¸­ï¼Œæœ‰ä¸¤ä¸ªå¯¹è±¡å‚ä¸Žå¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼ŒæŽ¥å—è¯·æ±‚çš„å¯¹è±¡å°†è¯·æ±‚å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡æ¥å¤„ç†ã€‚ Kotlin ç›´æŽ¥æ”¯æŒå§”æ‰˜æ¨¡å¼ï¼Œæ›´åŠ ä¼˜é›…ï¼Œç®€æ´ã€‚Kotlin é€šè¿‡å…³é”®å­— by å®žçŽ°å§”æ‰˜ã€‚ ç±»å§”æ‰˜ç±»çš„å§”æ‰˜å³ä¸€ä¸ªç±»ä¸­å®šä¹‰çš„æ–¹æ³•å®žé™…æ˜¯è°ƒç”¨å¦ä¸€ä¸ªç±»çš„å¯¹è±¡çš„æ–¹æ³•æ¥å®žçŽ°çš„ã€‚ ä»¥ä¸‹å®žä¾‹ä¸­æ´¾ç”Ÿç±» Derived ç»§æ‰¿äº†æŽ¥å£ Base æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶ä¸”å§”æ‰˜ä¸€ä¸ªä¼ å…¥çš„ Base ç±»çš„å¯¹è±¡æ¥æ‰§è¡Œè¿™äº›æ–¹æ³•ã€‚ 1234567891011121314151617// åˆ›å»ºæŽ¥å£interface Base &#123; fun print()&#125;// å®žçŽ°æ­¤æŽ¥å£çš„è¢«å§”æ‰˜çš„ç±»class BaseImpl(val x: Int) : Base &#123; override fun print() &#123; print(x) &#125;&#125;// é€šè¿‡å…³é”®å­— by å»ºç«‹å§”æ‰˜ç±»class Derived(b: Base) : Base by bfun main(args: Array&lt;String&gt;) &#123; val b = BaseImpl(10) Derived(b).print() // è¾“å‡º 10&#125; åœ¨ Derived å£°æ˜Žä¸­ï¼Œby å­å¥è¡¨ç¤ºï¼Œå°† b ä¿å­˜åœ¨ Derived çš„å¯¹è±¡å®žä¾‹å†…éƒ¨ï¼Œè€Œä¸”ç¼–è¯‘å™¨å°†ä¼šç”Ÿæˆç»§æ‰¿è‡ª Base æŽ¥å£çš„æ‰€æœ‰æ–¹æ³•, å¹¶å°†è°ƒç”¨è½¬å‘ç»™ bã€‚ å±žæ€§å§”æ‰˜å±žæ€§å§”æ‰˜æŒ‡çš„æ˜¯ä¸€ä¸ªç±»çš„æŸä¸ªå±žæ€§å€¼ä¸æ˜¯åœ¨ç±»ä¸­ç›´æŽ¥è¿›è¡Œå®šä¹‰ï¼Œè€Œæ˜¯å°†å…¶æ‰˜ä»˜ç»™ä¸€ä¸ªä»£ç†ç±»ï¼Œä»Žè€Œå®žçŽ°å¯¹è¯¥ç±»çš„å±žæ€§ç»Ÿä¸€ç®¡ç†ã€‚ å±žæ€§å§”æ‰˜è¯­æ³•æ ¼å¼ï¼š 1val/var &lt;å±žæ€§å&gt;: &lt;ç±»åž‹&gt; by &lt;è¡¨è¾¾å¼&gt; var/valï¼šå±žæ€§ç±»åž‹(å¯å˜/åªè¯») å±žæ€§åï¼šå±žæ€§åç§° ç±»åž‹ï¼šå±žæ€§çš„æ•°æ®ç±»åž‹ è¡¨è¾¾å¼ï¼šå§”æ‰˜ä»£ç†ç±» by å…³é”®å­—ä¹‹åŽçš„è¡¨è¾¾å¼å°±æ˜¯å§”æ‰˜, å±žæ€§çš„ get() æ–¹æ³•(ä»¥åŠset() æ–¹æ³•)å°†è¢«å§”æ‰˜ç»™è¿™ä¸ªå¯¹è±¡çš„ getValue() å’Œ setValue() æ–¹æ³•ã€‚å±žæ€§å§”æ‰˜ä¸å¿…å®žçŽ°ä»»ä½•æŽ¥å£, ä½†å¿…é¡»æä¾› getValue() å‡½æ•°(å¯¹äºŽ varå±žæ€§,è¿˜éœ€è¦ setValue() å‡½æ•°)ã€‚ å®šä¹‰ä¸€ä¸ªè¢«å§”æ‰˜çš„ç±»è¯¥ç±»éœ€è¦åŒ…å« getValue() æ–¹æ³•å’Œ setValue() æ–¹æ³•ï¼Œä¸”å‚æ•° thisRef ä¸ºè¿›è¡Œå§”æ‰˜çš„ç±»çš„å¯¹è±¡ï¼Œprop ä¸ºè¿›è¡Œå§”æ‰˜çš„å±žæ€§çš„å¯¹è±¡ã€‚ 1234567891011121314151617181920212223import kotlin.reflect.KProperty// å®šä¹‰åŒ…å«å±žæ€§å§”æ‰˜çš„ç±»class Example &#123; var p: String by Delegate()&#125;// å§”æ‰˜çš„ç±»class Delegate &#123; operator fun getValue(thisRef: Any?, property: KProperty&lt;*&gt;): String &#123; return "$thisRef, è¿™é‡Œå§”æ‰˜äº† $&#123;property.name&#125; å±žæ€§" &#125; operator fun setValue(thisRef: Any?, property: KProperty&lt;*&gt;, value: String) &#123; println("$thisRef çš„ $&#123;property.name&#125; å±žæ€§èµ‹å€¼ä¸º $value") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val e = Example() println(e.p) // è®¿é—®è¯¥å±žæ€§ï¼Œè°ƒç”¨ getValue() å‡½æ•° e.p = "Runoob" // è°ƒç”¨ setValue() å‡½æ•° println(e.p)&#125; è¾“å‡ºç»“æžœä¸ºï¼š 123Example@433c675d, è¿™é‡Œå§”æ‰˜äº† p å±žæ€§Example@433c675d çš„ p å±žæ€§èµ‹å€¼ä¸º RunoobExample@433c675d, è¿™é‡Œå§”æ‰˜äº† p å±žæ€§ æ ‡å‡†å§”æ‰˜Kotlin çš„æ ‡å‡†åº“ä¸­å·²ç»å†…ç½®äº†å¾ˆå¤šå·¥åŽ‚æ–¹æ³•æ¥å®žçŽ°å±žæ€§çš„å§”æ‰˜ã€‚ å»¶è¿Ÿå±žæ€§ Lazylazy() æ˜¯ä¸€ä¸ªå‡½æ•°, æŽ¥å—ä¸€ä¸ª Lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°, è¿”å›žä¸€ä¸ª Lazy å®žä¾‹çš„å‡½æ•°ï¼Œè¿”å›žçš„å®žä¾‹å¯ä»¥ä½œä¸ºå®žçŽ°å»¶è¿Ÿå±žæ€§çš„å§”æ‰˜ï¼š ç¬¬ä¸€æ¬¡è°ƒç”¨ get() ä¼šæ‰§è¡Œå·²ä¼ é€’ç»™ lazy() çš„ lamda è¡¨è¾¾å¼å¹¶è®°å½•ç»“æžœï¼Œ åŽç»­è°ƒç”¨ get() åªæ˜¯è¿”å›žè®°å½•çš„ç»“æžœã€‚ 123456789val lazyValue: String by lazy &#123; println("computed!") // ç¬¬ä¸€æ¬¡è°ƒç”¨è¾“å‡ºï¼Œç¬¬äºŒæ¬¡è°ƒç”¨ä¸æ‰§è¡Œ "Hello"&#125;fun main(args: Array&lt;String&gt;) &#123; println(lazyValue) // ç¬¬ä¸€æ¬¡æ‰§è¡Œï¼Œæ‰§è¡Œä¸¤æ¬¡è¾“å‡ºè¡¨è¾¾å¼ println(lazyValue) // ç¬¬äºŒæ¬¡æ‰§è¡Œï¼Œåªè¾“å‡ºè¿”å›žå€¼&#125; æ‰§è¡Œè¾“å‡ºç»“æžœï¼š 123computed!HelloHello å¯è§‚å¯Ÿå±žæ€§ Observableobservable å¯ä»¥ç”¨äºŽå®žçŽ°è§‚å¯Ÿè€…æ¨¡å¼ã€‚ Delegates.observable() å‡½æ•°æŽ¥å—ä¸¤ä¸ªå‚æ•°: ç¬¬ä¸€ä¸ªæ˜¯åˆå§‹åŒ–å€¼, ç¬¬äºŒä¸ªæ˜¯å±žæ€§å€¼å˜åŒ–äº‹ä»¶çš„å“åº”å™¨(handler)ã€‚ åœ¨å±žæ€§èµ‹å€¼åŽä¼šæ‰§è¡Œäº‹ä»¶çš„å“åº”å™¨(handler)ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼šè¢«èµ‹å€¼çš„å±žæ€§ã€æ—§å€¼å’Œæ–°å€¼ï¼š 1234567891011121314import kotlin.properties.Delegatesclass User &#123; var name: String by Delegates.observable("åˆå§‹å€¼") &#123; prop, old, new -&gt; println("æ—§å€¼ï¼š$old -&gt; æ–°å€¼ï¼š$new") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val user = User() user.name = "ç¬¬ä¸€æ¬¡èµ‹å€¼" user.name = "ç¬¬äºŒæ¬¡èµ‹å€¼"&#125; æ‰§è¡Œè¾“å‡ºç»“æžœï¼š 12æ—§å€¼ï¼šåˆå§‹å€¼ -&gt; æ–°å€¼ï¼šç¬¬ä¸€æ¬¡èµ‹å€¼æ—§å€¼ï¼šç¬¬ä¸€æ¬¡èµ‹å€¼ -&gt; æ–°å€¼ï¼šç¬¬äºŒæ¬¡èµ‹å€¼ æŠŠå±žæ€§å‚¨å­˜åœ¨æ˜ å°„ä¸­ä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹æ˜¯åœ¨ä¸€ä¸ªæ˜ å°„ï¼ˆmapï¼‰é‡Œå­˜å‚¨å±žæ€§çš„å€¼ã€‚ è¿™ç»å¸¸å‡ºçŽ°åœ¨åƒè§£æž JSON æˆ–è€…åšå…¶ä»–â€åŠ¨æ€â€äº‹æƒ…çš„åº”ç”¨ä¸­ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨æ˜ å°„å®žä¾‹è‡ªèº«ä½œä¸ºå§”æ‰˜æ¥å®žçŽ°å§”æ‰˜å±žæ€§ã€‚ 12345678910111213141516class Site(val map: Map&lt;String, Any?&gt;) &#123; val name: String by map val url: String by map&#125;fun main(args: Array&lt;String&gt;) &#123; // æž„é€ å‡½æ•°æŽ¥å—ä¸€ä¸ªæ˜ å°„å‚æ•° val site = Site(mapOf( "name" to "èœé¸Ÿæ•™ç¨‹", "url" to "www.runoob.com" )) // è¯»å–æ˜ å°„å€¼ println(site.name) println(site.url)&#125; æ‰§è¡Œè¾“å‡ºç»“æžœï¼š 12èœé¸Ÿæ•™ç¨‹www.runoob.com å¦‚æžœä½¿ç”¨ var å±žæ€§ï¼Œéœ€è¦æŠŠ Map æ¢æˆ MutableMapï¼š 12345678910111213141516171819202122232425class Site(val map: MutableMap&lt;String, Any?&gt;) &#123; val name: String by map val url: String by map&#125;fun main(args: Array&lt;String&gt;) &#123; var map:MutableMap&lt;String, Any?&gt; = mutableMapOf( "name" to "èœé¸Ÿæ•™ç¨‹", "url" to "www.runoob.com" ) val site = Site(map) println(site.name) println(site.url) println("--------------") map.put("name", "Google") map.put("url", "www.google.com") println(site.name) println(site.url)&#125; æ‰§è¡Œè¾“å‡ºç»“æžœï¼š 12345èœé¸Ÿæ•™ç¨‹www.runoob.com--------------Googlewww.google.com Not NullnotNull é€‚ç”¨äºŽé‚£äº›æ— æ³•åœ¨åˆå§‹åŒ–é˜¶æ®µå°±ç¡®å®šå±žæ€§å€¼çš„åœºåˆã€‚ 123456class Foo &#123; var notNullBar: String by Delegates.notNull&lt;String&gt;()&#125;foo.notNullBar = "bar"println(foo.notNullBar) éœ€è¦æ³¨æ„ï¼Œå¦‚æžœå±žæ€§åœ¨èµ‹å€¼å‰å°±è¢«è®¿é—®çš„è¯åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ å±€éƒ¨å§”æ‰˜å±žæ€§ä½ å¯ä»¥å°†å±€éƒ¨å˜é‡å£°æ˜Žä¸ºå§”æ‰˜å±žæ€§ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ä¸€ä¸ªå±€éƒ¨å˜é‡æƒ°æ€§åˆå§‹åŒ–ï¼š 1234567fun example(computeFoo: () -&gt; Foo) &#123; val memoizedFoo by lazy(computeFoo) if (someCondition &amp;&amp; memoizedFoo.isValid()) &#123; memoizedFoo.doSomething() &#125;&#125; memoizedFoo å˜é‡åªä¼šåœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶è®¡ç®—ã€‚ å¦‚æžœ someCondition å¤±è´¥ï¼Œé‚£ä¹ˆè¯¥å˜é‡æ ¹æœ¬ä¸ä¼šè®¡ç®—ã€‚ å±žæ€§å§”æ‰˜è¦æ±‚å¯¹äºŽåªè¯»å±žæ€§(ä¹Ÿå°±æ˜¯è¯´valå±žæ€§), å®ƒçš„å§”æ‰˜å¿…é¡»æä¾›ä¸€ä¸ªåä¸ºgetValue()çš„å‡½æ•°ã€‚è¯¥å‡½æ•°æŽ¥å—ä»¥ä¸‹å‚æ•°ï¼š thisRef â€”â€” å¿…é¡»ä¸Žå±žæ€§æ‰€æœ‰è€…ç±»åž‹ï¼ˆå¯¹äºŽæ‰©å±•å±žæ€§â€”â€”æŒ‡è¢«æ‰©å±•çš„ç±»åž‹ï¼‰ç›¸åŒæˆ–è€…æ˜¯å®ƒçš„è¶…ç±»åž‹ property â€”â€” å¿…é¡»æ˜¯ç±»åž‹ KProperty&lt;*&gt; æˆ–å…¶è¶…ç±»åž‹ è¿™ä¸ªå‡½æ•°å¿…é¡»è¿”å›žä¸Žå±žæ€§ç›¸åŒçš„ç±»åž‹ï¼ˆæˆ–å…¶å­ç±»åž‹ï¼‰ã€‚ å¯¹äºŽä¸€ä¸ªå€¼å¯å˜(mutable)å±žæ€§(ä¹Ÿå°±æ˜¯è¯´,var å±žæ€§),é™¤ getValue()å‡½æ•°ä¹‹å¤–,å®ƒçš„å§”æ‰˜è¿˜å¿…é¡» å¦å¤–å†æä¾›ä¸€ä¸ªåä¸ºsetValue()çš„å‡½æ•°, è¿™ä¸ªå‡½æ•°æŽ¥å—ä»¥ä¸‹å‚æ•°: property â€”â€” å¿…é¡»æ˜¯ç±»åž‹ KProperty&lt;*&gt; æˆ–å…¶è¶…ç±»åž‹new value â€”â€” å¿…é¡»å’Œå±žæ€§åŒç±»åž‹æˆ–è€…æ˜¯å®ƒçš„è¶…ç±»åž‹ã€‚ ç¿»è¯‘è§„åˆ™åœ¨æ¯ä¸ªå§”æ‰˜å±žæ€§çš„å®žçŽ°çš„èƒŒåŽï¼ŒKotlin ç¼–è¯‘å™¨éƒ½ä¼šç”Ÿæˆè¾…åŠ©å±žæ€§å¹¶å§”æ‰˜ç»™å®ƒã€‚ ä¾‹å¦‚ï¼Œå¯¹äºŽå±žæ€§ propï¼Œç”Ÿæˆéšè—å±žæ€§ prop$delegateï¼Œè€Œè®¿é—®å™¨çš„ä»£ç åªæ˜¯ç®€å•åœ°å§”æ‰˜ç»™è¿™ä¸ªé™„åŠ å±žæ€§ï¼š 1234567891011class C &#123; var prop: Type by MyDelegate()&#125;// è¿™æ®µæ˜¯ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„ç›¸åº”ä»£ç ï¼šclass C &#123; private val prop$delegate = MyDelegate() var prop: Type get() = prop$delegate.getValue(this, this::prop) set(value: Type) = prop$delegate.setValue(this, this::prop, value)&#125; Kotlin ç¼–è¯‘å™¨åœ¨å‚æ•°ä¸­æä¾›äº†å…³äºŽ prop çš„æ‰€æœ‰å¿…è¦ä¿¡æ¯ï¼šç¬¬ä¸€ä¸ªå‚æ•° this å¼•ç”¨åˆ°å¤–éƒ¨ç±» C çš„å®žä¾‹è€Œ this::prop æ˜¯ KProperty ç±»åž‹çš„åå°„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æè¿° prop è‡ªèº«ã€‚ æä¾›å§”æ‰˜é€šè¿‡å®šä¹‰ provideDelegate æ“ä½œç¬¦ï¼Œå¯ä»¥æ‰©å±•åˆ›å»ºå±žæ€§å®žçŽ°æ‰€å§”æ‰˜å¯¹è±¡çš„é€»è¾‘ã€‚ å¦‚æžœ by å³ä¾§æ‰€ä½¿ç”¨çš„å¯¹è±¡å°† provideDelegate å®šä¹‰ä¸ºæˆå‘˜æˆ–æ‰©å±•å‡½æ•°ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨è¯¥å‡½æ•°æ¥ åˆ›å»ºå±žæ€§å§”æ‰˜å®žä¾‹ã€‚ provideDelegate çš„ä¸€ä¸ªå¯èƒ½çš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨åˆ›å»ºå±žæ€§æ—¶ï¼ˆè€Œä¸ä»…åœ¨å…¶ getter æˆ– setter ä¸­ï¼‰æ£€æŸ¥å±žæ€§ä¸€è‡´æ€§ã€‚ ä¾‹å¦‚ï¼Œå¦‚æžœè¦åœ¨ç»‘å®šä¹‹å‰æ£€æŸ¥å±žæ€§åç§°ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š 123456789101112131415161718class ResourceLoader&lt;T&gt;(id: ResourceID&lt;T&gt;) &#123; operator fun provideDelegate( thisRef: MyUI, prop: KProperty&lt;*&gt; ): ReadOnlyProperty&lt;MyUI, T&gt; &#123; checkProperty(thisRef, prop.name) // åˆ›å»ºå§”æ‰˜ &#125; private fun checkProperty(thisRef: MyUI, name: String) &#123; â€¦â€¦ &#125;&#125;fun &lt;T&gt; bindResource(id: ResourceID&lt;T&gt;): ResourceLoader&lt;T&gt; &#123; â€¦â€¦ &#125;class MyUI &#123; val image by bindResource(ResourceID.image_id) val text by bindResource(ResourceID.text_id)&#125; provideDelegate çš„å‚æ•°ä¸Ž getValue ç›¸åŒï¼š thisRef â€”â€” å¿…é¡»ä¸Ž å±žæ€§æ‰€æœ‰è€… ç±»åž‹ï¼ˆå¯¹äºŽæ‰©å±•å±žæ€§â€”â€”æŒ‡è¢«æ‰©å±•çš„ç±»åž‹ï¼‰ç›¸åŒæˆ–è€…æ˜¯å®ƒçš„è¶…ç±»åž‹ property â€”â€” å¿…é¡»æ˜¯ç±»åž‹ KProperty&lt;*&gt; æˆ–å…¶è¶…ç±»åž‹ã€‚ åœ¨åˆ›å»º MyUI å®žä¾‹æœŸé—´ï¼Œä¸ºæ¯ä¸ªå±žæ€§è°ƒç”¨ provideDelegate æ–¹æ³•ï¼Œå¹¶ç«‹å³æ‰§è¡Œå¿…è¦çš„éªŒè¯ã€‚ å¦‚æžœæ²¡æœ‰è¿™ç§æ‹¦æˆªå±žæ€§ä¸Žå…¶å§”æ‰˜ä¹‹é—´çš„ç»‘å®šçš„èƒ½åŠ›ï¼Œä¸ºäº†å®žçŽ°ç›¸åŒçš„åŠŸèƒ½ï¼Œ ä½ å¿…é¡»æ˜¾å¼ä¼ é€’å±žæ€§åï¼Œè¿™ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼š 12345678910111213// æ£€æŸ¥å±žæ€§åç§°è€Œä¸ä½¿ç”¨â€œprovideDelegateâ€åŠŸèƒ½class MyUI &#123; val image by bindResource(ResourceID.image_id, "image") val text by bindResource(ResourceID.text_id, "text")&#125;fun &lt;T&gt; MyUI.bindResource( id: ResourceID&lt;T&gt;, propertyName: String): ReadOnlyProperty&lt;MyUI, T&gt; &#123; checkProperty(this, propertyName) // åˆ›å»ºå§”æ‰˜&#125; åœ¨ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œä¼šè°ƒç”¨ provideDelegate æ–¹æ³•æ¥åˆå§‹åŒ–è¾…åŠ©çš„ prop$delegate å±žæ€§ã€‚ æ¯”è¾ƒå¯¹äºŽå±žæ€§å£°æ˜Ž val prop: Type by MyDelegate() ç”Ÿæˆçš„ä»£ç ä¸Ž ä¸Šé¢ï¼ˆå½“ provideDelegate æ–¹æ³•ä¸å­˜åœ¨æ—¶ï¼‰ç”Ÿæˆçš„ä»£ç ï¼š 123456789101112class C &#123; var prop: Type by MyDelegate()&#125;// è¿™æ®µä»£ç æ˜¯å½“â€œprovideDelegateâ€åŠŸèƒ½å¯ç”¨æ—¶// ç”±ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç ï¼šclass C &#123; // è°ƒç”¨â€œprovideDelegateâ€æ¥åˆ›å»ºé¢å¤–çš„â€œdelegateâ€å±žæ€§ private val prop$delegate = MyDelegate().provideDelegate(this, this::prop) val prop: Type get() = prop$delegate.getValue(this, this::prop)&#125; è¯·æ³¨æ„ï¼ŒprovideDelegate æ–¹æ³•åªå½±å“è¾…åŠ©å±žæ€§çš„åˆ›å»ºï¼Œå¹¶ä¸ä¼šå½±å“ä¸º getter æˆ– setter ç”Ÿæˆçš„ä»£ç ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinå¯¹è±¡è¡¨è¾¾å¼å’Œå¯¹è±¡å£°æ˜Ž]]></title>
    <url>%2Fposts%2Fa056c2ad.html</url>
    <content type="text"><![CDATA[Kotlin ç”¨å¯¹è±¡è¡¨è¾¾å¼å’Œå¯¹è±¡å£°æ˜Žæ¥å®žçŽ°åˆ›å»ºä¸€ä¸ªå¯¹æŸä¸ªç±»åšäº†è½»å¾®æ”¹åŠ¨çš„ç±»çš„å¯¹è±¡ï¼Œä¸”ä¸éœ€è¦åŽ»å£°æ˜Žä¸€ä¸ªæ–°çš„å­ç±»ã€‚ å¯¹è±¡è¡¨è¾¾å¼é€šè¿‡å¯¹è±¡è¡¨è¾¾å¼å®žçŽ°ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»çš„å¯¹è±¡ç”¨äºŽæ–¹æ³•çš„å‚æ•°ä¸­ï¼š 12345678window.addMouseListener(object : MouseAdapter() &#123; override fun mouseClicked(e: MouseEvent) &#123; // ... &#125; override fun mouseEntered(e: MouseEvent) &#123; // ... &#125;&#125;) å¯¹è±¡å¯ä»¥ç»§æ‰¿äºŽæŸä¸ªåŸºç±»ï¼Œæˆ–è€…å®žçŽ°å…¶ä»–æŽ¥å£: 123456789open class A(x: Int) &#123; public open val y: Int = x&#125;interface B &#123;â€¦â€¦&#125;val ab: A = object : A(1), B &#123; override val y = 15&#125; å¦‚æžœè¶…ç±»åž‹æœ‰ä¸€ä¸ªæž„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»ä¼ é€’å‚æ•°ç»™å®ƒã€‚å¤šä¸ªè¶…ç±»åž‹å’ŒæŽ¥å£å¯ä»¥ç”¨é€—å·åˆ†éš”ã€‚ é€šè¿‡å¯¹è±¡è¡¨è¾¾å¼å¯ä»¥è¶Šè¿‡ç±»çš„å®šä¹‰ç›´æŽ¥å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼š 12345678fun main(args: Array&lt;String&gt;) &#123; val site = object &#123; var name: String = "èœé¸Ÿæ•™ç¨‹" var url: String = "www.runoob.com" &#125; println(site.name) println(site.url)&#125; è¯·æ³¨æ„ï¼ŒåŒ¿åå¯¹è±¡å¯ä»¥ç”¨ä½œåªåœ¨æœ¬åœ°å’Œç§æœ‰ä½œç”¨åŸŸä¸­å£°æ˜Žçš„ç±»åž‹ã€‚å¦‚æžœä½ ä½¿ç”¨åŒ¿åå¯¹è±¡ä½œä¸ºå…¬æœ‰å‡½æ•°çš„ è¿”å›žç±»åž‹æˆ–è€…ç”¨ä½œå…¬æœ‰å±žæ€§çš„ç±»åž‹ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°æˆ–å±žæ€§çš„å®žé™…ç±»åž‹ ä¼šæ˜¯åŒ¿åå¯¹è±¡å£°æ˜Žçš„è¶…ç±»åž‹ï¼Œå¦‚æžœä½ æ²¡æœ‰å£°æ˜Žä»»ä½•è¶…ç±»åž‹ï¼Œå°±ä¼šæ˜¯ Anyã€‚åœ¨åŒ¿åå¯¹è±¡ ä¸­æ·»åŠ çš„æˆå‘˜å°†æ— æ³•è®¿é—®ã€‚ 12345678910111213141516class C &#123; // ç§æœ‰å‡½æ•°ï¼Œæ‰€ä»¥å…¶è¿”å›žç±»åž‹æ˜¯åŒ¿åå¯¹è±¡ç±»åž‹ private fun foo() = object &#123; val x: String = "x" &#125; // å…¬æœ‰å‡½æ•°ï¼Œæ‰€ä»¥å…¶è¿”å›žç±»åž‹æ˜¯ Any fun publicFoo() = object &#123; val x: String = "x" &#125; fun bar() &#123; val x1 = foo().x // æ²¡é—®é¢˜ val x2 = publicFoo().x // é”™è¯¯ï¼šæœªèƒ½è§£æžçš„å¼•ç”¨â€œxâ€ &#125;&#125; åœ¨å¯¹è±¡è¡¨è¾¾ä¸­å¯ä»¥æ–¹ä¾¿çš„è®¿é—®åˆ°ä½œç”¨åŸŸä¸­çš„å…¶ä»–å˜é‡: 123456789101112131415fun countClicks(window: JComponent) &#123; var clickCount = 0 var enterCount = 0 window.addMouseListener(object : MouseAdapter() &#123; override fun mouseClicked(e: MouseEvent) &#123; clickCount++ &#125; override fun mouseEntered(e: MouseEvent) &#123; enterCount++ &#125; &#125;) // â€¦â€¦&#125; å¯¹è±¡å£°æ˜ŽKotlin ä½¿ç”¨ object å…³é”®å­—æ¥å£°æ˜Žä¸€ä¸ªå¯¹è±¡ã€‚ Kotlin ä¸­æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„é€šè¿‡å¯¹è±¡å£°æ˜Žæ¥èŽ·å¾—ä¸€ä¸ªå•ä¾‹ã€‚ 12345678object DataProviderManager &#123; fun registerDataProvider(provider: DataProvider) &#123; // â€¦â€¦ &#125; val allDataProviders: Collection&lt;DataProvider&gt; get() = // â€¦â€¦&#125; å¼•ç”¨è¯¥å¯¹è±¡ï¼Œæˆ‘ä»¬ç›´æŽ¥ä½¿ç”¨å…¶åç§°å³å¯ï¼š 1DataProviderManager.registerDataProvider(â€¦â€¦) å½“ç„¶ä½ ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªå˜é‡æ¥èŽ·å–èŽ·å–è¿™ä¸ªå¯¹è±¡ï¼Œå½“æ—¶å½“ä½ å®šä¹‰ä¸¤ä¸ªä¸åŒçš„å˜é‡æ¥èŽ·å–è¿™ä¸ªå¯¹è±¡æ—¶ï¼Œä½ ä¼šå‘çŽ°ä½ å¹¶ä¸èƒ½å¾—åˆ°ä¸¤ä¸ªä¸åŒçš„å˜é‡ã€‚ä¹Ÿå°±æ˜¯è¯´é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬èŽ·å¾—ä¸€ä¸ªå•ä¾‹ã€‚ 1234var data1 = DataProviderManagervar data2 = DataProviderManagerdata1.name = "test"print("data1 name = $&#123;data2.name&#125;") å®žä¾‹ä»¥ä¸‹å®žä¾‹ä¸­ï¼Œä¸¤ä¸ªå¯¹è±¡éƒ½è¾“å‡ºäº†åŒä¸€ä¸ª url åœ°å€ï¼š 1234567891011object Site &#123; var url:String = "" val name: String = "èœé¸Ÿæ•™ç¨‹"&#125;fun main(args: Array&lt;String&gt;) &#123; var s1 = Site var s2 = Site s1.url = "www.runoob.com" println(s1.url) println(s2.url)&#125; è¾“å‡ºç»“æžœä¸º: 12www.runoob.comwww.runoob.com å¯¹è±¡å¯ä»¥æœ‰è¶…ç±»åž‹ï¼š 123456789object DefaultListener : MouseAdapter() &#123; override fun mouseClicked(e: MouseEvent) &#123; // â€¦â€¦ &#125; override fun mouseEntered(e: MouseEvent) &#123; // â€¦â€¦ &#125;&#125; ä¸Žå¯¹è±¡è¡¨è¾¾å¼ä¸åŒï¼Œå½“å¯¹è±¡å£°æ˜Žåœ¨å¦ä¸€ä¸ªç±»çš„å†…éƒ¨æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡å¹¶ä¸èƒ½é€šè¿‡å¤–éƒ¨ç±»çš„å®žä¾‹è®¿é—®åˆ°è¯¥å¯¹è±¡ï¼Œè€Œåªèƒ½é€šè¿‡ç±»åæ¥è®¿é—®ï¼ŒåŒæ ·è¯¥å¯¹è±¡ä¹Ÿä¸èƒ½ç›´æŽ¥è®¿é—®åˆ°å¤–éƒ¨ç±»çš„æ–¹æ³•å’Œå˜é‡ã€‚ 1234567891011121314class Site &#123; var name = "èœé¸Ÿæ•™ç¨‹" object DeskTop&#123; var url = "www.runoob.com" fun showName()&#123; print&#123;"desk legs $name"&#125; // é”™è¯¯ï¼Œä¸èƒ½è®¿é—®åˆ°å¤–éƒ¨ç±»çš„æ–¹æ³•å’Œå˜é‡ &#125; &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; var site = Site() site.DeskTop.url // é”™è¯¯ï¼Œä¸èƒ½é€šè¿‡å¤–éƒ¨ç±»çš„å®žä¾‹è®¿é—®åˆ°è¯¥å¯¹è±¡ Site.DeskTop.url // æ­£ç¡®&#125; ä¼´ç”Ÿå¯¹è±¡ç±»å†…éƒ¨çš„å¯¹è±¡å£°æ˜Žå¯ä»¥ç”¨ companion å…³é”®å­—æ ‡è®°ï¼Œè¿™æ ·å®ƒå°±ä¸Žå¤–éƒ¨ç±»å…³è”åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æŽ¥é€šè¿‡å¤–éƒ¨ç±»è®¿é—®åˆ°å¯¹è±¡çš„å†…éƒ¨å…ƒç´ ã€‚ 1234567class MyClass &#123; companion object Factory &#123; fun create(): MyClass = MyClass() &#125;&#125;val instance = MyClass.create() // è®¿é—®åˆ°å¯¹è±¡çš„å†…éƒ¨å…ƒç´  æˆ‘ä»¬å¯ä»¥çœç•¥æŽ‰è¯¥å¯¹è±¡çš„å¯¹è±¡åï¼Œç„¶åŽä½¿ç”¨ Companion æ›¿ä»£éœ€è¦å£°æ˜Žçš„å¯¹è±¡åï¼š 123456class MyClass &#123; companion object &#123; &#125;&#125;val x = MyClass.Companion æ³¨æ„ï¼šä¸€ä¸ªç±»é‡Œé¢åªèƒ½å£°æ˜Žä¸€ä¸ªå†…éƒ¨å…³è”å¯¹è±¡ï¼Œå³å…³é”®å­— companion åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚ è¯·ä¼´ç”Ÿå¯¹è±¡çš„æˆå‘˜çœ‹èµ·æ¥åƒå…¶ä»–è¯­è¨€çš„é™æ€æˆå‘˜ï¼Œä½†åœ¨è¿è¡Œæ—¶ä»–ä»¬ä»ç„¶æ˜¯çœŸå®žå¯¹è±¡çš„å®žä¾‹æˆå‘˜ã€‚ä¾‹å¦‚è¿˜å¯ä»¥å®žçŽ°æŽ¥å£ï¼š 12345678910interface Factory&lt;T&gt; &#123; fun create(): T&#125;class MyClass &#123; companion object : Factory&lt;MyClass&gt; &#123; override fun create(): MyClass = MyClass() &#125;&#125; å¯¹è±¡è¡¨è¾¾å¼å’Œå¯¹è±¡å£°æ˜Žä¹‹é—´çš„è¯­ä¹‰å·®å¼‚å¯¹è±¡è¡¨è¾¾å¼å’Œå¯¹è±¡å£°æ˜Žä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦çš„è¯­ä¹‰å·®åˆ«ï¼š å¯¹è±¡è¡¨è¾¾å¼æ˜¯åœ¨ä½¿ç”¨ä»–ä»¬çš„åœ°æ–¹ç«‹å³æ‰§è¡Œçš„ å¯¹è±¡å£°æ˜Žæ˜¯åœ¨ç¬¬ä¸€æ¬¡è¢«è®¿é—®åˆ°æ—¶å»¶è¿Ÿåˆå§‹åŒ–çš„ ä¼´ç”Ÿå¯¹è±¡çš„åˆå§‹åŒ–æ˜¯åœ¨ç›¸åº”çš„ç±»è¢«åŠ è½½ï¼ˆè§£æžï¼‰æ—¶ï¼Œä¸Ž Java é™æ€åˆå§‹åŒ–å™¨çš„è¯­ä¹‰ç›¸åŒ¹é…]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinæžšä¸¾ç±»]]></title>
    <url>%2Fposts%2Fcfa629be.html</url>
    <content type="text"><![CDATA[æžšä¸¾ç±»æœ€åŸºæœ¬çš„ç”¨æ³•æ˜¯å®žçŽ°ä¸€ä¸ªç±»åž‹å®‰å…¨çš„æžšä¸¾ã€‚ æžšä¸¾å¸¸é‡ç”¨é€—å·åˆ†éš”,æ¯ä¸ªæžšä¸¾å¸¸é‡éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ 123enum class Color&#123; RED,BLACK,BLUE,GREEN,WHITE&#125; æžšä¸¾åˆå§‹åŒ–æ¯ä¸€ä¸ªæžšä¸¾éƒ½æ˜¯æžšä¸¾ç±»çš„å®žä¾‹ï¼Œå®ƒä»¬å¯ä»¥è¢«åˆå§‹åŒ–ï¼š 12345enum class Color(val rgb: Int) &#123; RED(0xFF0000), GREEN(0x00FF00), BLUE(0x0000FF)&#125; é»˜è®¤åç§°ä¸ºæžšä¸¾å­—ç¬¦åï¼Œå€¼ä»Ž0å¼€å§‹ã€‚è‹¥éœ€è¦æŒ‡å®šå€¼ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å…¶æž„é€ å‡½æ•°ï¼š 1234enum class Shape(value:Int)&#123; ovel(100), rectangle(200)&#125; æžšä¸¾è¿˜æ”¯æŒä»¥å£°æ˜Žè‡ªå·±çš„åŒ¿åç±»åŠç›¸åº”çš„æ–¹æ³•ã€ä»¥åŠè¦†ç›–åŸºç±»çš„æ–¹æ³•ã€‚å¦‚ï¼š 1234567891011enum class ProtocolState &#123; WAITING &#123; override fun signal() = TALKING &#125;, TALKING &#123; override fun signal() = WAITING &#125;; abstract fun signal(): ProtocolState&#125; å¦‚æžœæžšä¸¾ç±»å®šä¹‰ä»»ä½•æˆå‘˜ï¼Œè¦ä½¿ç”¨åˆ†å·å°†æˆå‘˜å®šä¹‰ä¸­çš„æžšä¸¾å¸¸é‡å®šä¹‰åˆ†éš”å¼€ ä½¿ç”¨æžšä¸¾å¸¸é‡Kotlin ä¸­çš„æžšä¸¾ç±»å…·æœ‰åˆæˆæ–¹æ³•ï¼Œå…è®¸éåŽ†å®šä¹‰çš„æžšä¸¾å¸¸é‡ï¼Œå¹¶é€šè¿‡å…¶åç§°èŽ·å–æžšä¸¾å¸¸æ•°ã€‚ 12EnumClass.valueOf(value: String): EnumClass // è½¬æ¢æŒ‡å®š name ä¸ºæžšä¸¾å€¼ï¼Œè‹¥æœªåŒ¹é…æˆåŠŸï¼Œä¼šæŠ›å‡ºIllegalArgumentExceptionEnumClass.values(): Array&lt;EnumClass&gt; // ä»¥æ•°ç»„çš„å½¢å¼ï¼Œè¿”å›žæžšä¸¾å€¼ èŽ·å–æžšä¸¾ç›¸å…³ä¿¡æ¯ï¼š 12val name: String //èŽ·å–æžšä¸¾åç§°val ordinal: Int //èŽ·å–æžšä¸¾å€¼åœ¨æ‰€æœ‰æžšä¸¾æ•°ç»„ä¸­å®šä¹‰çš„é¡ºåº å®žä¾‹12345678910111213enum class Color&#123; RED,BLACK,BLUE,GREEN,WHITE&#125;fun main(args: Array&lt;String&gt;) &#123; var color:Color=Color.BLUE println(Color.values()) println(Color.valueOf("RED")) println(color.name) println(color.ordinal)&#125; è‡ª Kotlin 1.1 èµ·ï¼Œå¯ä»¥ä½¿ç”¨ enumValues&lt;T&gt;() å’Œ enumValueOf&lt;T&gt;() å‡½æ•°ä»¥æ³›åž‹çš„æ–¹å¼è®¿é—®æžšä¸¾ç±»ä¸­çš„å¸¸é‡ ï¼š 1234567891011enum class RGB &#123; RED, GREEN, BLUE &#125;inline fun &lt;reified T : Enum&lt;T&gt;&gt; printAllValues() &#123; print(enumValues&lt;T&gt;().joinToString &#123; it.name &#125;)&#125;fun main(args: Array&lt;String&gt;) &#123; printAllValues&lt;RGB&gt;() // è¾“å‡º RED, GREEN, BLUE&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinæ³›åž‹]]></title>
    <url>%2Fposts%2F6f6a6f9c.html</url>
    <content type="text"><![CDATA[Kotlin æ³›åž‹æ³›åž‹ï¼Œå³ â€œå‚æ•°åŒ–ç±»åž‹â€ï¼Œå°†ç±»åž‹å‚æ•°åŒ–ï¼Œå¯ä»¥ç”¨åœ¨ç±»ï¼ŒæŽ¥å£ï¼Œæ–¹æ³•ä¸Šã€‚ ä¸Ž Java ä¸€æ ·ï¼ŒKotlin ä¹Ÿæä¾›æ³›åž‹ï¼Œä¸ºç±»åž‹å®‰å…¨æä¾›ä¿è¯ï¼Œæ¶ˆé™¤ç±»åž‹å¼ºè½¬çš„çƒ¦æ¼ã€‚ å£°æ˜Žä¸€ä¸ªæ³›åž‹ç±»: 123class Box&lt;T&gt;(t: T) &#123; var value = t&#125; åˆ›å»ºç±»çš„å®žä¾‹æ—¶æˆ‘ä»¬éœ€è¦æŒ‡å®šç±»åž‹å‚æ•°: 123val box: Box&lt;Int&gt; = Box&lt;Int&gt;(1)// æˆ–è€…val box = Box(1) // ç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»åž‹æŽ¨æ–­ï¼Œ1 ç±»åž‹ Intï¼Œæ‰€ä»¥ç¼–è¯‘å™¨çŸ¥é“æˆ‘ä»¬è¯´çš„æ˜¯ Box&lt;Int&gt;ã€‚ ä»¥ä¸‹å®žä¾‹å‘æ³›åž‹ç±» Box ä¼ å…¥æ•´åž‹æ•°æ®å’Œå­—ç¬¦ä¸²ï¼š 1234567891011class Box&lt;T&gt;(t : T) &#123; var value = t&#125;fun main(args: Array&lt;String&gt;) &#123; var boxInt = Box&lt;Int&gt;(10) var boxString = Box&lt;String&gt;("Runoob") println(boxInt.value) println(boxString.value)&#125; è¾“å‡ºç»“æžœä¸ºï¼š 1210Runoob å®šä¹‰æ³›åž‹ç±»åž‹å˜é‡ï¼Œå¯ä»¥å®Œæ•´åœ°å†™æ˜Žç±»åž‹å‚æ•°ï¼Œå¦‚æžœç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æŽ¨å®šç±»åž‹å‚æ•°ï¼Œä¹Ÿå¯ä»¥çœç•¥ç±»åž‹å‚æ•°ã€‚ Kotlin æ³›åž‹å‡½æ•°çš„å£°æ˜Žä¸Ž Java ç›¸åŒï¼Œç±»åž‹å‚æ•°è¦æ”¾åœ¨å‡½æ•°åçš„å‰é¢ï¼š 12345fun &lt;T&gt; boxIn(value: T) = Box(value)// ä»¥ä¸‹éƒ½æ˜¯åˆæ³•è¯­å¥val box4 = boxIn&lt;Int&gt;(1)val box5 = boxIn(1) // ç¼–è¯‘å™¨ä¼šè¿›è¡Œç±»åž‹æŽ¨æ–­ åœ¨è°ƒç”¨æ³›åž‹å‡½æ•°æ—¶ï¼Œå¦‚æžœå¯ä»¥æŽ¨æ–­å‡ºç±»åž‹å‚æ•°ï¼Œå¯ä»¥çœç•¥æ³›åž‹å‚æ•°ã€‚ ä»¥ä¸‹å®žä¾‹åˆ›å»ºäº†æ³›åž‹å‡½æ•° doPrintlnï¼Œå‡½æ•°æ ¹æ®ä¼ å…¥çš„ä¸åŒç±»åž‹åšç›¸åº”å¤„ç†ï¼š 123456789101112131415161718fun main(args: Array&lt;String&gt;) &#123; val age = 23 val name = "runoob" val bool = true doPrintln(age) // æ•´åž‹ doPrintln(name) // å­—ç¬¦ä¸² doPrintln(bool) // å¸ƒå°”åž‹&#125;fun &lt;T&gt; doPrintln(content: T) &#123; when (content) &#123; is Int -&gt; println("æ•´åž‹æ•°å­—ä¸º $content") is String -&gt; println("å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ï¼š$&#123;content.toUpperCase()&#125;") else -&gt; println("T ä¸æ˜¯æ•´åž‹ï¼Œä¹Ÿä¸æ˜¯å­—ç¬¦ä¸²") &#125;&#125; è¾“å‡ºç»“æžœä¸ºï¼š 123æ•´åž‹æ•°å­—ä¸º 23å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ï¼šRUNOOBT ä¸æ˜¯æ•´åž‹ï¼Œä¹Ÿä¸æ˜¯å­—ç¬¦ä¸² æ³›åž‹çº¦æŸæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³›åž‹çº¦æŸæ¥è®¾å®šä¸€ä¸ªç»™å®šå‚æ•°å…è®¸ä½¿ç”¨çš„ç±»åž‹ã€‚ Kotlin ä¸­ä½¿ç”¨ : å¯¹æ³›åž‹çš„ç±»åž‹ä¸Šé™è¿›è¡Œçº¦æŸã€‚ æœ€å¸¸è§çš„çº¦æŸæ˜¯ä¸Šç•Œ(upper bound)ï¼š 123fun &lt;T : Comparable&lt;T&gt;&gt; sort(list: List&lt;T&gt;) &#123; // â€¦â€¦&#125; Comparable çš„å­ç±»åž‹å¯ä»¥æ›¿ä»£ Tã€‚ ä¾‹å¦‚: 12sort(listOf(1, 2, 3)) // OKã€‚Int æ˜¯ Comparable&lt;Int&gt; çš„å­ç±»åž‹sort(listOf(HashMap&lt;Int, String&gt;())) // é”™è¯¯ï¼šHashMap&lt;Int, String&gt; ä¸æ˜¯ Comparable&lt;HashMap&lt;Int, String&gt;&gt; çš„å­ç±»åž‹ é»˜è®¤çš„ä¸Šç•Œæ˜¯ Any?ã€‚ å¯¹äºŽå¤šä¸ªä¸Šç•Œçº¦æŸæ¡ä»¶ï¼Œå¯ä»¥ç”¨ where å­å¥ï¼š 12345fun &lt;T&gt; copyWhenGreater(list: List&lt;T&gt;, threshold: T): List&lt;String&gt; where T : CharSequence, T : Comparable&lt;T&gt; &#123; return list.filter &#123; it &gt; threshold &#125;.map &#123; it.toString() &#125;&#125; åž‹å˜Kotlin ä¸­æ²¡æœ‰é€šé…ç¬¦ç±»åž‹ï¼Œå®ƒæœ‰ä¸¤ä¸ªå…¶ä»–çš„ä¸œè¥¿ï¼šå£°æ˜Žå¤„åž‹å˜ï¼ˆdeclaration-site varianceï¼‰ä¸Žç±»åž‹æŠ•å½±ï¼ˆtype projectionsï¼‰ã€‚ å£°æ˜Žå¤„åž‹å˜å£°æ˜Žå¤„çš„ç±»åž‹å˜å¼‚ä½¿ç”¨åå˜æ³¨è§£ä¿®é¥°ç¬¦ï¼šinã€outï¼Œæ¶ˆè´¹è€… in, ç”Ÿäº§è€… outã€‚ ä½¿ç”¨ out ä½¿å¾—ä¸€ä¸ªç±»åž‹å‚æ•°åå˜ï¼Œåå˜ç±»åž‹å‚æ•°åªèƒ½ç”¨ä½œè¾“å‡ºï¼Œå¯ä»¥ä½œä¸ºè¿”å›žå€¼ç±»åž‹ä½†æ˜¯æ— æ³•ä½œä¸ºå…¥å‚çš„ç±»åž‹ï¼š 12345678910111213// å®šä¹‰ä¸€ä¸ªæ”¯æŒåå˜çš„ç±»class Runoob&lt;out A&gt;(val a: A) &#123; fun foo(): A &#123; return a &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; var strCo: Runoob&lt;String&gt; = Runoob("a") var anyCo: Runoob&lt;Any&gt; = Runoob&lt;Any&gt;("b") anyCo = strCo println(anyCo.foo()) // è¾“å‡º a&#125; in ä½¿å¾—ä¸€ä¸ªç±»åž‹å‚æ•°é€†å˜ï¼Œé€†å˜ç±»åž‹å‚æ•°åªèƒ½ç”¨ä½œè¾“å…¥ï¼Œå¯ä»¥ä½œä¸ºå…¥å‚çš„ç±»åž‹ä½†æ˜¯æ— æ³•ä½œä¸ºè¿”å›žå€¼çš„ç±»åž‹ï¼š 1234567891011// å®šä¹‰ä¸€ä¸ªæ”¯æŒé€†å˜çš„ç±»class Runoob&lt;in A&gt;(a: A) &#123; fun foo(a: A) &#123; &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; var strDCo = Runoob("a") var anyDCo = Runoob&lt;Any&gt;("b") strDCo = anyDCo&#125; æ˜Ÿå·æŠ•å°„æœ‰äº›æ—¶å€™, ä½ å¯èƒ½æƒ³è¡¨ç¤ºä½ å¹¶ä¸çŸ¥é“ç±»åž‹å‚æ•°çš„ä»»ä½•ä¿¡æ¯, ä½†æ˜¯ä»ç„¶å¸Œæœ›èƒ½å¤Ÿå®‰å…¨åœ°ä½¿ç”¨å®ƒ. è¿™é‡Œæ‰€è°“â€å®‰å…¨åœ°ä½¿ç”¨â€æ˜¯æŒ‡, å¯¹æ³›åž‹ç±»åž‹å®šä¹‰ä¸€ä¸ªç±»åž‹æŠ•å°„, è¦æ±‚è¿™ä¸ªæ³›åž‹ç±»åž‹çš„æ‰€æœ‰çš„å®žä½“å®žä¾‹, éƒ½æ˜¯è¿™ä¸ªæŠ•å°„çš„å­ç±»åž‹ã€‚ å¯¹äºŽè¿™ä¸ªé—®é¢˜, Kotlin æä¾›äº†ä¸€ç§è¯­æ³•, ç§°ä¸º æ˜Ÿå·æŠ•å°„(star-projection): å‡å¦‚ç±»åž‹å®šä¹‰ä¸º Foo , å…¶ä¸­ T æ˜¯ä¸€ä¸ªåå˜çš„ç±»åž‹å‚æ•°, ä¸Šç•Œ(upper bound)ä¸º TUpper ,Foo&lt;&gt; ç­‰ä»·äºŽ Foo . å®ƒè¡¨ç¤º, å½“ T æœªçŸ¥æ—¶, ä½ å¯ä»¥å®‰å…¨åœ°ä»Ž Foo&lt;&gt; ä¸­ è¯»å–TUpper ç±»åž‹çš„å€¼. å‡å¦‚ç±»åž‹å®šä¹‰ä¸º Foo , å…¶ä¸­ T æ˜¯ä¸€ä¸ªåå‘åå˜çš„ç±»åž‹å‚æ•°, Foo&lt;&gt; ç­‰ä»·äºŽ Foo . å®ƒè¡¨ç¤º, å½“ T æœªçŸ¥æ—¶, ä½ ä¸èƒ½å®‰å…¨åœ°å‘ Foo&lt;&gt; å†™å…¥ ä»»ä½•ä¸œè¥¿. å‡å¦‚ç±»åž‹å®šä¹‰ä¸º Foo , å…¶ä¸­ T æ˜¯ä¸€ä¸ªåå˜çš„ç±»åž‹å‚æ•°, ä¸Šç•Œ(upper bound)ä¸º TUpper , å¯¹äºŽè¯»å–å€¼çš„åœºåˆ, Foo&lt;*&gt; ç­‰ä»·äºŽ Foo , å¯¹äºŽå†™å…¥å€¼çš„åœºåˆ, ç­‰ä»·äºŽ Foo . å¦‚æžœä¸€ä¸ªæ³›åž‹ç±»åž‹ä¸­å­˜åœ¨å¤šä¸ªç±»åž‹å‚æ•°, é‚£ä¹ˆæ¯ä¸ªç±»åž‹å‚æ•°éƒ½å¯ä»¥å•ç‹¬çš„æŠ•å°„. æ¯”å¦‚, å¦‚æžœç±»åž‹å®šä¹‰ä¸ºinterface Function&lt;in T, out U&gt; , é‚£ä¹ˆå¯ä»¥å‡ºçŽ°ä»¥ä¸‹å‡ ç§æ˜Ÿå·æŠ•å°„: Function&lt;*, String&gt; , ä»£è¡¨ Function&lt;in Nothing, String&gt; ; Function&lt;Int, *&gt; , ä»£è¡¨ Function&lt;Int, out Any?&gt; ; Function&lt;, &gt; , ä»£è¡¨ Function&lt;in Nothing, out Any?&gt; . æ³¨æ„: æ˜Ÿå·æŠ•å°„ä¸Ž Java çš„åŽŸç”Ÿç±»åž‹(raw type)éžå¸¸ç±»ä¼¼, ä½†å¯ä»¥å®‰å…¨ä½¿ç”¨ ç¬”è®°å…³äºŽæ˜Ÿå·æŠ•å°„ï¼Œå…¶å®žå°±æ˜¯*ä»£æŒ‡äº†æ‰€æœ‰ç±»åž‹ï¼Œç›¸å½“äºŽAny? ç»™æ–‡ä¸­è¡¥ä¸ªä¾‹å­æ–¹ä¾¿ç†è§£ï¼š 12345678910111213141516class A&lt;T&gt;(val t: T, val t2 : T, val t3 : T)class Apple(var name : String)fun main(args: Array&lt;String&gt;) &#123; //ä½¿ç”¨ç±» val a1: A&lt;*&gt; = A(12, "String", Apple("è‹¹æžœ")) val a2: A&lt;Any?&gt; = A(12, "String", Apple("è‹¹æžœ")) //å’Œa1æ˜¯ä¸€æ ·çš„ val apple = a1.t3 //å‚æ•°ç±»åž‹ä¸ºAny println(apple) val apple2 = apple as Apple //å¼ºè½¬æˆAppleç±» println(apple2.name) //ä½¿ç”¨æ•°ç»„ val l:ArrayList&lt;*&gt; = arrayListOf("String",1,1.2f,Apple("è‹¹æžœ")) for (item in l)&#123; println(item) &#125;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinæ•°æ®ç±»ä¸Žå¯†å°ç±»]]></title>
    <url>%2Fposts%2F2fd9bfca.html</url>
    <content type="text"><![CDATA[æ•°æ®ç±»Kotlin å¯ä»¥åˆ›å»ºä¸€ä¸ªåªåŒ…å«æ•°æ®çš„ç±»ï¼Œå…³é”®å­—ä¸º dataï¼š 1data class User(val name: String, val age: Int) ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨çš„ä»Žä¸»æž„é€ å‡½æ•°ä¸­æ ¹æ®æ‰€æœ‰å£°æ˜Žçš„å±žæ€§æå–ä»¥ä¸‹å‡½æ•°ï¼š equals() / hashCode() toString() æ ¼å¼å¦‚ &quot;User(name=John, age=42)&quot; componentN() functions å¯¹åº”äºŽå±žæ€§ï¼ŒæŒ‰å£°æ˜Žé¡ºåºæŽ’åˆ— copy() å‡½æ•° å¦‚æžœè¿™äº›å‡½æ•°åœ¨ç±»ä¸­å·²ç»è¢«æ˜Žç¡®å®šä¹‰äº†ï¼Œæˆ–è€…ä»Žè¶…ç±»ä¸­ç»§æ‰¿è€Œæ¥ï¼Œå°±ä¸å†ä¼šç”Ÿæˆã€‚ ä¸ºäº†ä¿è¯ç”Ÿæˆä»£ç çš„ä¸€è‡´æ€§ä»¥åŠæœ‰æ„ä¹‰ï¼Œæ•°æ®ç±»éœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š ä¸»æž„é€ å‡½æ•°è‡³å°‘åŒ…å«ä¸€ä¸ªå‚æ•°ã€‚ æ‰€æœ‰çš„ä¸»æž„é€ å‡½æ•°çš„å‚æ•°å¿…é¡»æ ‡è¯†ä¸ºval æˆ–è€… var ; æ•°æ®ç±»ä¸å¯ä»¥å£°æ˜Žä¸º abstract, open, sealed æˆ–è€… inner; æ•°æ®ç±»ä¸èƒ½ç»§æ‰¿å…¶ä»–ç±» (ä½†æ˜¯å¯ä»¥å®žçŽ°æŽ¥å£)ã€‚ å¤åˆ¶å¤åˆ¶ä½¿ç”¨ copy() å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°å¤åˆ¶å¯¹è±¡å¹¶ä¿®æ”¹éƒ¨åˆ†å±žæ€§, å¯¹äºŽä¸Šæ–‡çš„ User ç±»ï¼Œå…¶å®žçŽ°ä¼šç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š 1fun copy(name: String = this.name, age: Int = this.age) = User(name, age) å®žä¾‹ä½¿ç”¨ copy ç±»å¤åˆ¶ User æ•°æ®ç±»ï¼Œå¹¶ä¿®æ”¹ age å±žæ€§: 12345678910data class User(val name: String, val age: Int)fun main(args: Array&lt;String&gt;) &#123; val jack = User(name = "Jack", age = 1) val olderJack = jack.copy(age = 2) println(jack) println(olderJack)&#125; è¾“å‡ºç»“æžœä¸ºï¼š 12User(name=Jack, age=1)User(name=Jack, age=2) æ•°æ®ç±»ä»¥åŠè§£æž„å£°æ˜Žç»„ä»¶å‡½æ•°å…è®¸æ•°æ®ç±»åœ¨è§£æž„å£°æ˜Žä¸­ä½¿ç”¨ï¼š 123val jane = User("Jane", 35)val (name, age) = janeprintln("$name, $age years of age") // prints "Jane, 35 years of age" æ ‡å‡†æ•°æ®ç±»æ ‡å‡†åº“æä¾›äº† Pair å’Œ Triple ã€‚åœ¨å¤§å¤šæ•°æƒ…å½¢ä¸­ï¼Œå‘½åæ•°æ®ç±»æ˜¯æ›´å¥½çš„è®¾è®¡é€‰æ‹©ï¼Œå› ä¸ºè¿™æ ·ä»£ç å¯è¯»æ€§æ›´å¼ºè€Œä¸”æä¾›äº†æœ‰æ„ä¹‰çš„åå­—å’Œå±žæ€§ã€‚ å¯†å°ç±»å¯†å°ç±»ç”¨æ¥è¡¨ç¤ºå—é™çš„ç±»ç»§æ‰¿ç»“æž„ï¼šå½“ä¸€ä¸ªå€¼ä¸ºæœ‰é™å‡ ç§çš„ç±»åž‹, è€Œä¸èƒ½æœ‰ä»»ä½•å…¶ä»–ç±»åž‹æ—¶ã€‚åœ¨æŸç§æ„ä¹‰ä¸Šï¼Œä»–ä»¬æ˜¯æžšä¸¾ç±»çš„æ‰©å±•ï¼šæžšä¸¾ç±»åž‹çš„å€¼é›†åˆ ä¹Ÿæ˜¯å—é™çš„ï¼Œä½†æ¯ä¸ªæžšä¸¾å¸¸é‡åªå­˜åœ¨ä¸€ä¸ªå®žä¾‹ï¼Œè€Œå¯†å°ç±» çš„ä¸€ä¸ªå­ç±»å¯ä»¥æœ‰å¯åŒ…å«çŠ¶æ€çš„å¤šä¸ªå®žä¾‹ã€‚ å£°æ˜Žä¸€ä¸ªå¯†å°ç±»ï¼Œä½¿ç”¨ sealed ä¿®é¥°ç±»ï¼Œå¯†å°ç±»å¯ä»¥æœ‰å­ç±»ï¼Œä½†æ˜¯æ‰€æœ‰çš„å­ç±»éƒ½å¿…é¡»è¦å†…åµŒåœ¨å¯†å°ç±»ä¸­ã€‚ sealed ä¸èƒ½ä¿®é¥° interface ,abstract class(ä¼šæŠ¥ warning,ä½†æ˜¯ä¸ä¼šå‡ºçŽ°ç¼–è¯‘é”™è¯¯) 12345678910sealed class Exprdata class Const(val number: Double) : Expr()data class Sum(val e1: Expr, val e2: Expr) : Expr()object NotANumber : Expr()fun eval(expr: Expr): Double = when (expr) &#123; is Const -&gt; expr.number is Sum -&gt; eval(expr.e1) + eval(expr.e2) NotANumber -&gt; Double.NaN&#125; ä½¿ç”¨å¯†å°ç±»çš„å…³é”®å¥½å¤„åœ¨äºŽä½¿ç”¨ when è¡¨è¾¾å¼ çš„æ—¶å€™ï¼Œå¦‚æžœèƒ½å¤Ÿ éªŒè¯è¯­å¥è¦†ç›–äº†æ‰€æœ‰æƒ…å†µï¼Œå°±ä¸éœ€è¦ä¸ºè¯¥è¯­å¥å†æ·»åŠ ä¸€ä¸ª else å­å¥äº†ã€‚ 123456fun eval(expr: Expr): Double = when(expr) &#123; is Expr.Const -&gt; expr.number is Expr.Sum -&gt; eval(expr.e1) + eval(expr.e2) Expr.NotANumber -&gt; Double.NaN // ä¸å†éœ€è¦ `else` å­å¥ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»è¦†ç›–äº†æ‰€æœ‰çš„æƒ…å†µ&#125; ç¬”è®°æˆ‘çš„ç†è§£å¯†å°ç±»å°±æ˜¯ä¸€ç§ä¸“é—¨ç”¨æ¥é…åˆ when è¯­å¥ä½¿ç”¨çš„ç±»ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚åœ¨ Android ä¸­æˆ‘ä»¬æœ‰ä¸€ä¸ª viewï¼Œæˆ‘ä»¬çŽ°åœ¨æƒ³é€šè¿‡ when è¯­å¥è®¾ç½®é’ˆå¯¹ view è¿›è¡Œä¸¤ç§æ“ä½œï¼šæ˜¾ç¤ºå’Œéšè—ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿™æ ·åšï¼š 12345678sealed class UiOp &#123; object Show: UiOp() object Hide: UiOp()&#125; fun execute(view: View, op: UiOp) = when (op) &#123; UiOp.Show -&gt; view.visibility = View.VISIBLE UiOp.Hide -&gt; view.visibility = View.GONE&#125; ä»¥ä¸ŠåŠŸèƒ½å…¶å®žå®Œå…¨å¯ä»¥ç”¨æžšä¸¾å®žçŽ°ï¼Œä½†æ˜¯å¦‚æžœæˆ‘ä»¬çŽ°åœ¨æƒ³åŠ ä¸¤ä¸ªæ“ä½œï¼šæ°´å¹³å¹³ç§»å’Œçºµå‘å¹³ç§»ï¼Œå¹¶ä¸”è¿˜è¦æºå¸¦ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚å¹³ç§»äº†å¤šå°‘è·ç¦»ï¼Œå¹³ç§»è¿‡ç¨‹çš„åŠ¨ç”»ç±»åž‹ç­‰æ•°æ®ï¼Œç”¨æžšä¸¾æ˜¾ç„¶å°±ä¸å¤ªå¥½åŠžäº†ï¼Œè¿™æ—¶å¯†å°ç±»çš„ä¼˜åŠ¿å°±å¯ä»¥å‘æŒ¥äº†ï¼Œä¾‹å¦‚ï¼š 123456789101112131415sealed class UiOp &#123; object Show: UiOp() object Hide: UiOp() class TranslateX(val px: Float): UiOp() class TranslateY(val px: Float): UiOp()&#125; fun execute(view: View, op: UiOp) = when (op) &#123; UiOp.Show -&gt; view.visibility = View.VISIBLE UiOp.Hide -&gt; view.visibility = View.GONE is UiOp.TranslateX -&gt; view.translationX = op.px // è¿™ä¸ª when è¯­å¥åˆ†æ”¯ä¸ä»…å‘Šè¯‰ view è¦æ°´å¹³ç§»åŠ¨ï¼Œè¿˜å‘Šè¯‰ view éœ€è¦ç§»åŠ¨å¤šå°‘è·ç¦»ï¼Œè¿™æ˜¯æžšä¸¾ç­‰ Java ä¼ ç»Ÿæ€æƒ³ä¸å®¹æ˜“å®žçŽ°çš„ is UiOp.TranslateY -&gt; view.translationY = op.px&#125; ä»¥ä¸Šä»£ç ä¸­ï¼ŒTranslateX æ˜¯ä¸€ä¸ªç±»ï¼Œå®ƒå¯ä»¥æºå¸¦å¤šäºŽä¸€ä¸ªçš„ä¿¡æ¯ï¼Œæ¯”å¦‚é™¤äº†å‘Šè¯‰ view éœ€è¦æ°´å¹³å¹³ç§»ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å‘Šè¯‰ view å¹³ç§»å¤šå°‘åƒç´ ï¼Œç”šè‡³è¿˜å¯ä»¥å‘Šè¯‰ view å¹³ç§»çš„åŠ¨ç”»ç±»åž‹ç­‰ä¿¡æ¯ï¼Œæˆ‘æƒ³è¿™å¤§æ¦‚å°±æ˜¯å¯†å°ç±»å‡ºçŽ°çš„æ„ä¹‰å§ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æžœ when è¯­å¥çš„åˆ†æ”¯ä¸éœ€è¦æºå¸¦é™¤â€œæ˜¾ç¤ºæˆ–éšè—viewä¹‹å¤–çš„å…¶å®ƒä¿¡æ¯â€æ—¶ï¼ˆå³åªéœ€è¦è¡¨æ˜Ž when è¯­å¥åˆ†æ”¯ï¼Œä¸éœ€è¦æºå¸¦é¢å¤–æ•°æ®æ—¶ï¼‰ï¼Œç”¨ object å…³é”®å­—åˆ›å»ºå•ä¾‹å°±å¯ä»¥äº†ï¼Œå¹¶ä¸”æ­¤æ—¶ when å­å¥ä¸éœ€è¦ä½¿ç”¨ is å…³é”®å­—ã€‚åªæœ‰éœ€è¦æºå¸¦é¢å¤–ä¿¡æ¯æ—¶æ‰å®šä¹‰å¯†å°ç±»çš„å­ç±»ï¼Œè€Œä¸”ä½¿ç”¨äº†å¯†å°ç±»å°±ä¸éœ€è¦ä½¿ç”¨ else å­å¥ï¼Œæ¯å½“æˆ‘ä»¬å¤šå¢žåŠ ä¸€ä¸ªå¯†å°ç±»çš„å­ç±»æˆ–å•ä¾‹ï¼Œç¼–è¯‘å™¨å°±ä¼šåœ¨ when è¯­å¥ä¸­ç»™å‡ºæç¤ºï¼Œå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µå°±åŠæ—¶å‘çŽ°é”™è¯¯ï¼Œè¿™ä¹Ÿæ˜¯ä»¥å¾€ switch-case è¯­å¥å’Œæžšä¸¾ä¸å…·å¤‡çš„åŠŸèƒ½ã€‚ æœ€åŽï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æŠŠè¿™ä¸€ç»„æ“ä½œå°è£…æˆä¸€ä¸ªå‡½æ•°ï¼Œä»¥ä¾¿æ—¥åŽè°ƒç”¨ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617// å…ˆå°è£…ä¸€ä¸ªUIæ“ä½œåˆ—è¡¨class Ui(val uiOps: List = emptyList()) &#123; operator fun plus(uiOp: UiOp) = Ui(uiOps + uiOp)&#125;// å®šä¹‰ä¸€ç»„æ“ä½œval ui = Ui() + UiOp.Show + UiOp.TranslateX(20f) + UiOp.TranslateY(40f) + UiOp.Hide// å®šä¹‰è°ƒç”¨çš„å‡½æ•°fun run(view: View, ui: Ui) &#123; ui.uiOps.forEach &#123; execute(view, it) &#125;&#125;run(view, ui) // æœ€ç»ˆè°ƒç”¨]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinæ‰©å±•]]></title>
    <url>%2Fposts%2F36cafa9f.html</url>
    <content type="text"><![CDATA[Kotlin æ‰©å±•Kotlin å¯ä»¥å¯¹ä¸€ä¸ªç±»çš„å±žæ€§å’Œæ–¹æ³•è¿›è¡Œæ‰©å±•ï¼Œä¸”ä¸éœ€è¦ç»§æ‰¿æˆ–ä½¿ç”¨ Decorator æ¨¡å¼ã€‚ æ‰©å±•æ˜¯ä¸€ç§é™æ€è¡Œä¸ºï¼Œå¯¹è¢«æ‰©å±•çš„ç±»ä»£ç æœ¬èº«ä¸ä¼šé€ æˆä»»ä½•å½±å“ã€‚ æ‰©å±•å‡½æ•°æ‰©å±•å‡½æ•°å¯ä»¥åœ¨å·²æœ‰ç±»ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œä¸ä¼šå¯¹åŽŸç±»åšä¿®æ”¹ï¼Œæ‰©å±•å‡½æ•°å®šä¹‰å½¢å¼ï¼š 123fun receiverType.functionName(params)&#123; body&#125; receiverTypeï¼šè¡¨ç¤ºå‡½æ•°çš„æŽ¥æ”¶è€…ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°æ‰©å±•çš„å¯¹è±¡ functionNameï¼šæ‰©å±•å‡½æ•°çš„åç§° paramsï¼šæ‰©å±•å‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥ä¸ºNULL ä»¥ä¸‹å®žä¾‹æ‰©å±• User ç±» ï¼š 1234567891011class User(var name:String)/**æ‰©å±•å‡½æ•°**/fun User.Print()&#123; print("ç”¨æˆ·å $name")&#125;fun main(arg:Array&lt;String&gt;)&#123; var user = User("Runoob") user.Print()&#125; å®žä¾‹æ‰§è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 1ç”¨æˆ·å Runoob ä¸‹é¢ä»£ç ä¸º MutableList æ·»åŠ ä¸€ä¸ªswap å‡½æ•°ï¼š 123456789101112131415// æ‰©å±•å‡½æ•° swap,è°ƒæ¢ä¸åŒä½ç½®çš„å€¼fun MutableList&lt;Int&gt;.swap(index1: Int, index2: Int) &#123; val tmp = this[index1] // this å¯¹åº”è¯¥åˆ—è¡¨ this[index1] = this[index2] this[index2] = tmp&#125;fun main(args: Array&lt;String&gt;) &#123; val l = mutableListOf(1, 2, 3) // ä½ç½® 0 å’Œ 2 çš„å€¼åšäº†äº’æ¢ l.swap(0, 2) // 'swap()' å‡½æ•°å†…çš„ 'this' å°†æŒ‡å‘ 'l' çš„å€¼ println(l.toString())&#125; å®žä¾‹æ‰§è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 1[3, 2, 1] thiså…³é”®å­—æŒ‡ä»£æŽ¥æ”¶è€…å¯¹è±¡(receiver object)(ä¹Ÿå°±æ˜¯è°ƒç”¨æ‰©å±•å‡½æ•°æ—¶, åœ¨ç‚¹å·ä¹‹å‰æŒ‡å®šçš„å¯¹è±¡å®žä¾‹)ã€‚ æ‰©å±•å‡½æ•°æ˜¯é™æ€è§£æžçš„æ‰©å±•å‡½æ•°æ˜¯é™æ€è§£æžçš„ï¼Œå¹¶ä¸æ˜¯æŽ¥æ”¶è€…ç±»åž‹çš„è™šæ‹Ÿæˆå‘˜ï¼Œåœ¨è°ƒç”¨æ‰©å±•å‡½æ•°æ—¶ï¼Œå…·ä½“è¢«è°ƒç”¨çš„çš„æ˜¯å“ªä¸€ä¸ªå‡½æ•°ï¼Œç”±è°ƒç”¨å‡½æ•°çš„çš„å¯¹è±¡è¡¨è¾¾å¼æ¥å†³å®šçš„ï¼Œè€Œä¸æ˜¯åŠ¨æ€çš„ç±»åž‹å†³å®šçš„: 123456789101112131415open class Cclass D: C()fun C.foo() = "c" // æ‰©å±•å‡½æ•° foofun D.foo() = "d" // æ‰©å±•å‡½æ•° foofun printFoo(c: C) &#123; println(c.foo()) // ç±»åž‹æ˜¯ C ç±»&#125;fun main(arg:Array&lt;String&gt;)&#123; printFoo(D())&#125; å®žä¾‹æ‰§è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 1c è‹¥æ‰©å±•å‡½æ•°å’Œæˆå‘˜å‡½æ•°ä¸€è‡´ï¼Œåˆ™ä½¿ç”¨è¯¥å‡½æ•°æ—¶ï¼Œä¼šä¼˜å…ˆä½¿ç”¨æˆå‘˜å‡½æ•°ã€‚ 12345678910class C &#123; fun foo() &#123; println("æˆå‘˜å‡½æ•°") &#125;&#125;fun C.foo() &#123; println("æ‰©å±•å‡½æ•°") &#125;fun main(arg:Array&lt;String&gt;)&#123; var c = C() c.foo()&#125; å®žä¾‹æ‰§è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 1æˆå‘˜å‡½æ•° æ‰©å±•ä¸€ä¸ªç©ºå¯¹è±¡åœ¨æ‰©å±•å‡½æ•°å†…ï¼Œ å¯ä»¥é€šè¿‡ this æ¥åˆ¤æ–­æŽ¥æ”¶è€…æ˜¯å¦ä¸º NULL,è¿™æ ·ï¼Œå³ä½¿æŽ¥æ”¶è€…ä¸º NULL,ä¹Ÿå¯ä»¥è°ƒç”¨æ‰©å±•å‡½æ•°ã€‚ä¾‹å¦‚: 12345678910fun Any?.toString(): String &#123; if (this == null) return "null" // ç©ºæ£€æµ‹ä¹‹åŽï¼Œâ€œthisâ€ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºéžç©ºç±»åž‹ï¼Œæ‰€ä»¥ä¸‹é¢çš„ toString() // è§£æžä¸º Any ç±»çš„æˆå‘˜å‡½æ•° return toString()&#125;fun main(arg:Array&lt;String&gt;)&#123; var t = null println(t.toString())&#125; å®žä¾‹æ‰§è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 1null æ‰©å±•å±žæ€§ é™¤äº†å‡½æ•°ï¼ŒKotlin ä¹Ÿæ”¯æŒå±žæ€§å¯¹å±žæ€§è¿›è¡Œæ‰©å±•: 12val &lt;T&gt; List&lt;T&gt;.lastIndex: Int get() = size - 1 æ‰©å±•å±žæ€§å…è®¸å®šä¹‰åœ¨ç±»æˆ–è€…kotlinæ–‡ä»¶ä¸­ï¼Œä¸å…è®¸å®šä¹‰åœ¨å‡½æ•°ä¸­ã€‚åˆå§‹åŒ–å±žæ€§å› ä¸ºå±žæ€§æ²¡æœ‰åŽç«¯å­—æ®µï¼ˆbacking fieldï¼‰ï¼Œæ‰€ä»¥ä¸å…è®¸è¢«åˆå§‹åŒ–ï¼Œåªèƒ½ç”±æ˜¾å¼æä¾›çš„ getter/setter å®šä¹‰ã€‚ 1val Foo.bar = 1 // é”™è¯¯ï¼šæ‰©å±•å±žæ€§ä¸èƒ½æœ‰åˆå§‹åŒ–å™¨ æ‰©å±•å±žæ€§åªèƒ½è¢«å£°æ˜Žä¸º valã€‚ ä¼´ç”Ÿå¯¹è±¡çš„æ‰©å±•å¦‚æžœä¸€ä¸ªç±»å®šä¹‰æœ‰ä¸€ä¸ªä¼´ç”Ÿå¯¹è±¡ ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ºä¼´ç”Ÿå¯¹è±¡å®šä¹‰æ‰©å±•å‡½æ•°å’Œå±žæ€§ã€‚ ä¼´ç”Ÿå¯¹è±¡é€šè¿‡â€ç±»å.â€å½¢å¼è°ƒç”¨ä¼´ç”Ÿå¯¹è±¡ï¼Œä¼´ç”Ÿå¯¹è±¡å£°æ˜Žçš„æ‰©å±•å‡½æ•°ï¼Œé€šè¿‡ç”¨ç±»åé™å®šç¬¦æ¥è°ƒç”¨ï¼š 123456789101112131415class MyClass &#123; companion object &#123; &#125; // å°†è¢«ç§°ä¸º "Companion"&#125;fun MyClass.Companion.foo() &#123; println("ä¼´éšå¯¹è±¡çš„æ‰©å±•å‡½æ•°")&#125;val MyClass.Companion.no: Int get() = 10fun main(args: Array&lt;String&gt;) &#123; println("no:$&#123;MyClass.no&#125;") MyClass.foo()&#125; å®žä¾‹æ‰§è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 12no:10ä¼´éšå¯¹è±¡çš„æ‰©å±•å‡½æ•° æ‰©å±•çš„ä½œç”¨åŸŸé€šå¸¸æ‰©å±•å‡½æ•°æˆ–å±žæ€§å®šä¹‰åœ¨é¡¶çº§åŒ…ä¸‹: 123package foo.barfun Baz.goo() &#123; â€¦â€¦ &#125; è¦ä½¿ç”¨æ‰€å®šä¹‰åŒ…ä¹‹å¤–çš„ä¸€ä¸ªæ‰©å±•, é€šè¿‡importå¯¼å…¥æ‰©å±•çš„å‡½æ•°åè¿›è¡Œä½¿ç”¨: 123456789package com.example.usageimport foo.bar.goo // å¯¼å…¥æ‰€æœ‰åä¸º goo çš„æ‰©å±• // æˆ–è€…import foo.bar.* // ä»Ž foo.bar å¯¼å…¥ä¸€åˆ‡fun usage(baz: Baz) &#123; baz.goo()&#125; æ‰©å±•å£°æ˜Žä¸ºæˆå‘˜åœ¨ä¸€ä¸ªç±»å†…éƒ¨ä½ å¯ä»¥ä¸ºå¦ä¸€ä¸ªç±»å£°æ˜Žæ‰©å±•ã€‚ åœ¨è¿™ä¸ªæ‰©å±•ä¸­ï¼Œæœ‰ä¸ªå¤šä¸ªéšå«çš„æŽ¥å—è€…ï¼Œå…¶ä¸­æ‰©å±•æ–¹æ³•å®šä¹‰æ‰€åœ¨ç±»çš„å®žä¾‹ç§°ä¸ºåˆ†å‘æŽ¥å—è€…ï¼Œè€Œæ‰©å±•æ–¹æ³•çš„ç›®æ ‡ç±»åž‹çš„å®žä¾‹ç§°ä¸ºæ‰©å±•æŽ¥å—è€…ã€‚ 1234567891011121314151617181920212223class D &#123; fun bar() &#123; println("D bar") &#125;&#125;class C &#123; fun baz() &#123; println("C baz") &#125; fun D.foo() &#123; bar() // è°ƒç”¨ D.bar baz() // è°ƒç”¨ C.baz &#125; fun caller(d: D) &#123; d.foo() // è°ƒç”¨æ‰©å±•å‡½æ•° &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val c: C = C() val d: D = D() c.caller(d)&#125; å®žä¾‹æ‰§è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 12D barC baz åœ¨ C ç±»å†…ï¼Œåˆ›å»ºäº† D ç±»çš„æ‰©å±•ã€‚æ­¤æ—¶ï¼ŒC è¢«æˆä¸ºåˆ†å‘æŽ¥å—è€…ï¼Œè€Œ D ä¸ºæ‰©å±•æŽ¥å—è€…ã€‚ä»Žä¸Šä¾‹ä¸­ï¼Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œåœ¨æ‰©å±•å‡½æ•°ä¸­ï¼Œå¯ä»¥è°ƒç”¨æ´¾å‘æŽ¥æ”¶è€…çš„æˆå‘˜å‡½æ•°ã€‚ å‡å¦‚åœ¨è°ƒç”¨æŸä¸€ä¸ªå‡½æ•°ï¼Œè€Œè¯¥å‡½æ•°åœ¨åˆ†å‘æŽ¥å—è€…å’Œæ‰©å±•æŽ¥å—è€…å‡å­˜åœ¨ï¼Œåˆ™ä»¥æ‰©å±•æŽ¥æ”¶è€…ä¼˜å…ˆï¼Œè¦å¼•ç”¨åˆ†å‘æŽ¥æ”¶è€…çš„æˆå‘˜ä½ å¯ä»¥ä½¿ç”¨é™å®šçš„ this è¯­æ³•ã€‚ 1234567891011121314151617181920212223class D &#123; fun bar() &#123; println("D bar") &#125;&#125;class C &#123; fun bar() &#123; println("C bar") &#125; // ä¸Ž D ç±» çš„ bar åŒå fun D.foo() &#123; bar() // è°ƒç”¨ D.bar()ï¼Œæ‰©å±•æŽ¥æ”¶è€…ä¼˜å…ˆ this@C.bar() // è°ƒç”¨ C.bar() &#125; fun caller(d: D) &#123; d.foo() // è°ƒç”¨æ‰©å±•å‡½æ•° &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val c: C = C() val d: D = D() c.caller(d)&#125; å®žä¾‹æ‰§è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 12D barC bar ä»¥æˆå‘˜çš„å½¢å¼å®šä¹‰çš„æ‰©å±•å‡½æ•°, å¯ä»¥å£°æ˜Žä¸º open , è€Œä¸”å¯ä»¥åœ¨å­ç±»ä¸­è¦†ç›–. ä¹Ÿå°±æ˜¯è¯´, åœ¨è¿™ç±»æ‰©å±•å‡½æ•°çš„æ´¾ å‘è¿‡ç¨‹ä¸­, é’ˆå¯¹åˆ†å‘æŽ¥å—è€…æ˜¯è™šæ‹Ÿçš„(virtual), ä½†é’ˆå¯¹æ‰©å±•æŽ¥å—è€…ä»ç„¶æ˜¯é™æ€çš„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637open class D &#123;&#125;class D1 : D() &#123;&#125;open class C &#123; open fun D.foo() &#123; println("D.foo in C") &#125; open fun D1.foo() &#123; println("D1.foo in C") &#125; fun caller(d: D) &#123; d.foo() // è°ƒç”¨æ‰©å±•å‡½æ•° &#125;&#125;class C1 : C() &#123; override fun D.foo() &#123; println("D.foo in C1") &#125; override fun D1.foo() &#123; println("D1.foo in C1") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; C().caller(D()) // è¾“å‡º "D.foo in C" C1().caller(D()) // è¾“å‡º "D.foo in C1" â€”â€” åˆ†å‘æŽ¥æ”¶è€…è™šæ‹Ÿè§£æž C().caller(D1()) // è¾“å‡º "D.foo in C" â€”â€” æ‰©å±•æŽ¥æ”¶è€…é™æ€è§£æž&#125; å®žä¾‹æ‰§è¡Œè¾“å‡ºç»“æžœä¸ºï¼š 123D.foo in CD.foo in C1D.foo in C]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KotlinæŽ¥å£]]></title>
    <url>%2Fposts%2F404317d3.html</url>
    <content type="text"><![CDATA[Kotlin æŽ¥å£Kotlin æŽ¥å£ä¸Ž Java 8 ç±»ä¼¼ï¼Œä½¿ç”¨ interface å…³é”®å­—å®šä¹‰æŽ¥å£ï¼Œå…è®¸æ–¹æ³•æœ‰é»˜è®¤å®žçŽ°ï¼š 1234567interface MyInterface &#123; fun bar() // æœªå®žçŽ° fun foo() &#123; //å·²å®žçŽ° // å¯é€‰çš„æ–¹æ³•ä½“ println("foo") &#125;&#125; å®žçŽ°æŽ¥å£ä¸€ä¸ªç±»æˆ–è€…å¯¹è±¡å¯ä»¥å®žçŽ°ä¸€ä¸ªæˆ–å¤šä¸ªæŽ¥å£ã€‚ 12345class Child : MyInterface &#123; override fun bar() &#123; // æ–¹æ³•ä½“ &#125;&#125; å®žä¾‹12345678910111213141516171819interface MyInterface &#123; fun bar() fun foo() &#123; // å¯é€‰çš„æ–¹æ³•ä½“ println("foo") &#125;&#125;class Child : MyInterface &#123; override fun bar() &#123; // æ–¹æ³•ä½“ println("bar") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val c = Child() c.foo(); c.bar(); &#125; è¾“å‡ºç»“æžœä¸ºï¼š 12foobar æŽ¥å£ä¸­çš„å±žæ€§æŽ¥å£ä¸­çš„å±žæ€§åªèƒ½æ˜¯æŠ½è±¡çš„ï¼Œä¸å…è®¸åˆå§‹åŒ–å€¼ï¼ŒæŽ¥å£ä¸ä¼šä¿å­˜å±žæ€§å€¼ï¼Œå®žçŽ°æŽ¥å£æ—¶ï¼Œå¿…é¡»é‡å†™å±žæ€§ï¼š 1234567interface MyInterface&#123; var name:String //name å±žæ€§, æŠ½è±¡çš„&#125; class MyImpl:MyInterface&#123; override var name: String = "runoob" //é‡å†™å±žæ€§&#125; å®žä¾‹12345678910111213141516171819202122interface MyInterface &#123; var name:String //name å±žæ€§, æŠ½è±¡çš„ fun bar() fun foo() &#123; // å¯é€‰çš„æ–¹æ³•ä½“ println("foo") &#125;&#125;class Child : MyInterface &#123; override var name: String = "runoob" //é‡å†™å±žæ€§ override fun bar() &#123; // æ–¹æ³•ä½“ println("bar") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val c = Child() c.foo(); c.bar(); println(c.name) &#125; è¾“å‡ºç»“æžœä¸ºï¼š 123foobarrunoob å‡½æ•°é‡å†™å®žçŽ°å¤šä¸ªæŽ¥å£æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°åŒä¸€æ–¹æ³•ç»§æ‰¿å¤šä¸ªå®žçŽ°çš„é—®é¢˜ã€‚ä¾‹å¦‚: å®žä¾‹123456789101112131415161718192021222324252627282930interface A &#123; fun foo() &#123; print("A") &#125; // å·²å®žçŽ° fun bar() // æœªå®žçŽ°ï¼Œæ²¡æœ‰æ–¹æ³•ä½“ï¼Œæ˜¯æŠ½è±¡çš„&#125; interface B &#123; fun foo() &#123; print("B") &#125; // å·²å®žçŽ° fun bar() &#123; print("bar") &#125; // å·²å®žçŽ°&#125; class C : A &#123; override fun bar() &#123; print("bar") &#125; // é‡å†™&#125; class D : A, B &#123; override fun foo() &#123; super&lt;A&gt;.foo() super&lt;B&gt;.foo() &#125; override fun bar() &#123; super&lt;B&gt;.bar() &#125;&#125; fun main(args: Array&lt;String&gt;) &#123; val d = D() d.foo(); d.bar();&#125; è¾“å‡ºç»“æžœä¸ºï¼š 1ABbar å®žä¾‹ä¸­æŽ¥å£ A å’Œ B éƒ½å®šä¹‰äº†æ–¹æ³• foo() å’Œ bar()ï¼Œ ä¸¤è€…éƒ½å®žçŽ°äº† foo(), B å®žçŽ°äº† bar()ã€‚å› ä¸º C æ˜¯ä¸€ä¸ªå®žçŽ°äº† A çš„å…·ä½“ç±»ï¼Œæ‰€ä»¥å¿…é¡»è¦é‡å†™ bar() å¹¶å®žçŽ°è¿™ä¸ªæŠ½è±¡æ–¹æ³•ã€‚ ç„¶è€Œï¼Œå¦‚æžœæˆ‘ä»¬ä»Ž A å’Œ B æ´¾ç”Ÿ Dï¼Œæˆ‘ä»¬éœ€è¦å®žçŽ°å¤šä¸ªæŽ¥å£ç»§æ‰¿çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¹¶æŒ‡æ˜Ž D åº”è¯¥å¦‚ä½•å®žçŽ°å®ƒä»¬ã€‚è¿™ä¸€è§„åˆ™ æ—¢é€‚ç”¨äºŽç»§æ‰¿å•ä¸ªå®žçŽ°ï¼ˆbar()ï¼‰çš„æ–¹æ³•ä¹Ÿé€‚ç”¨äºŽç»§æ‰¿å¤šä¸ªå®žçŽ°ï¼ˆfoo()ï¼‰çš„æ–¹æ³•ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinç»§æ‰¿]]></title>
    <url>%2Fposts%2F8ca7e9b.html</url>
    <content type="text"><![CDATA[Kotlin ç»§æ‰¿Kotlin ä¸­æ‰€æœ‰ç±»éƒ½ç»§æ‰¿è¯¥ Any ç±»ï¼Œå®ƒæ˜¯æ‰€æœ‰ç±»çš„è¶…ç±»ï¼Œå¯¹äºŽæ²¡æœ‰è¶…ç±»åž‹å£°æ˜Žçš„ç±»æ˜¯é»˜è®¤è¶…ç±»ï¼š 1class Example // ä»Ž Any éšå¼ç»§æ‰¿ Any é»˜è®¤æä¾›äº†ä¸‰ä¸ªå‡½æ•°ï¼š 12345equals()hashCode()toString() æ³¨æ„ï¼šAny ä¸æ˜¯ java.lang.Objectã€‚ å¦‚æžœä¸€ä¸ªç±»è¦è¢«ç»§æ‰¿ï¼Œå¯ä»¥ä½¿ç”¨ open å…³é”®å­—è¿›è¡Œä¿®é¥°ã€‚ 123open class Base(p: Int) // å®šä¹‰åŸºç±»class Derived(p: Int) : Base(p) æž„é€ å‡½æ•°å­ç±»æœ‰ä¸»æž„é€ å‡½æ•°å¦‚æžœå­ç±»æœ‰ä¸»æž„é€ å‡½æ•°ï¼Œ åˆ™åŸºç±»å¿…é¡»åœ¨ä¸»æž„é€ å‡½æ•°ä¸­ç«‹å³åˆå§‹åŒ–ã€‚ 12345678910111213141516open class Person(var name : String, var age : Int)&#123;// åŸºç±»&#125;class Student(name : String, age : Int, var no : String, var score : Int) : Person(name, age) &#123;&#125;// æµ‹è¯•fun main(args: Array&lt;String&gt;) &#123; val s = Student("Runoob", 18, "S12346", 89) println("å­¦ç”Ÿåï¼š $&#123;s.name&#125;") println("å¹´é¾„ï¼š $&#123;s.age&#125;") println("å­¦ç”Ÿå·ï¼š $&#123;s.no&#125;") println("æˆç»©ï¼š $&#123;s.score&#125;")&#125; è¾“å‡ºç»“æžœï¼š 1234å­¦ç”Ÿåï¼š Runoobå¹´é¾„ï¼š 18å­¦ç”Ÿå·ï¼š S12346æˆç»©ï¼š 89 å­ç±»æ²¡æœ‰ä¸»æž„é€ å‡½æ•°å¦‚æžœå­ç±»æ²¡æœ‰ä¸»æž„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»åœ¨æ¯ä¸€ä¸ªäºŒçº§æž„é€ å‡½æ•°ä¸­ç”¨ super å…³é”®å­—åˆå§‹åŒ–åŸºç±»ï¼Œæˆ–è€…åœ¨ä»£ç†å¦ä¸€ä¸ªæž„é€ å‡½æ•°ã€‚åˆå§‹åŒ–åŸºç±»æ—¶ï¼Œå¯ä»¥è°ƒç”¨åŸºç±»çš„ä¸åŒæž„é€ æ–¹æ³•ã€‚ 12345678class Student : Person &#123; constructor(ctx: Context) : super(ctx) &#123; &#125; constructor(ctx: Context, attrs: AttributeSet) : super(ctx,attrs) &#123; &#125;&#125; å®žä¾‹12345678910111213141516171819202122232425/**ç”¨æˆ·åŸºç±»**/open class Person(name:String)&#123; /**æ¬¡çº§æž„é€ å‡½æ•°**/ constructor(name:String,age:Int):this(name)&#123; //åˆå§‹åŒ– println("-------åŸºç±»æ¬¡çº§æž„é€ å‡½æ•°---------") &#125;&#125;/**å­ç±»ç»§æ‰¿ Person ç±»**/class Student:Person&#123; /**æ¬¡çº§æž„é€ å‡½æ•°**/ constructor(name:String,age:Int,no:String,score:Int):super(name,age)&#123; println("-------ç»§æ‰¿ç±»æ¬¡çº§æž„é€ å‡½æ•°---------") println("å­¦ç”Ÿåï¼š $&#123;name&#125;") println("å¹´é¾„ï¼š $&#123;age&#125;") println("å­¦ç”Ÿå·ï¼š $&#123;no&#125;") println("æˆç»©ï¼š $&#123;score&#125;") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; var s = Student("Runoob", 18, "S12345", 89)&#125; è¾“å‡ºç»“æžœï¼š 123456-------åŸºç±»æ¬¡çº§æž„é€ å‡½æ•°----------------ç»§æ‰¿ç±»æ¬¡çº§æž„é€ å‡½æ•°---------å­¦ç”Ÿåï¼š Runoobå¹´é¾„ï¼š 18å­¦ç”Ÿå·ï¼š S12345æˆç»©ï¼š 89 é‡å†™åœ¨åŸºç±»ä¸­ï¼Œä½¿ç”¨funå£°æ˜Žå‡½æ•°æ—¶ï¼Œæ­¤å‡½æ•°é»˜è®¤ä¸ºfinalä¿®é¥°ï¼Œä¸èƒ½è¢«å­ç±»é‡å†™ã€‚å¦‚æžœå…è®¸å­ç±»é‡å†™è¯¥å‡½æ•°ï¼Œé‚£ä¹ˆå°±è¦æ‰‹åŠ¨æ·»åŠ  open ä¿®é¥°å®ƒ, å­ç±»é‡å†™æ–¹æ³•ä½¿ç”¨ override å…³é”®è¯ï¼š 1234567891011121314151617181920/**ç”¨æˆ·åŸºç±»**/open class Person&#123; open fun study()&#123; // å…è®¸å­ç±»é‡å†™ println("æˆ‘æ¯•ä¸šäº†") &#125;&#125;/**å­ç±»ç»§æ‰¿ Person ç±»**/class Student : Person() &#123; override fun study()&#123; // é‡å†™æ–¹æ³• println("æˆ‘åœ¨è¯»å¤§å­¦") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val s = Student() s.study();&#125; è¾“å‡ºç»“æžœä¸º: 1æˆ‘åœ¨è¯»å¤§å­¦ å¦‚æžœæœ‰å¤šä¸ªç›¸åŒçš„æ–¹æ³•ï¼ˆç»§æ‰¿æˆ–è€…å®žçŽ°è‡ªå…¶ä»–ç±»ï¼Œå¦‚Aã€Bç±»ï¼‰ï¼Œåˆ™å¿…é¡»è¦é‡å†™è¯¥æ–¹æ³•ï¼Œä½¿ç”¨superèŒƒåž‹åŽ»é€‰æ‹©æ€§åœ°è°ƒç”¨çˆ¶ç±»çš„å®žçŽ°ã€‚ 12345678910111213141516171819202122open class A &#123; open fun f () &#123; print("A") &#125; fun a() &#123; print("a") &#125;&#125;interface B &#123; fun f() &#123; print("B") &#125; //æŽ¥å£çš„æˆå‘˜å˜é‡é»˜è®¤æ˜¯ open çš„ fun b() &#123; print("b") &#125;&#125;class C() : A() , B&#123; override fun f() &#123; super&lt;A&gt;.f()//è°ƒç”¨ A.f() super&lt;B&gt;.f()//è°ƒç”¨ B.f() &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val c = C() c.f();&#125; C ç»§æ‰¿è‡ª a() æˆ– b(), C ä¸ä»…å¯ä»¥ä»Ž A æˆ–åˆ™ B ä¸­ç»§æ‰¿å‡½æ•°ï¼Œè€Œä¸” C å¯ä»¥ç»§æ‰¿ A()ã€B() ä¸­å…±æœ‰çš„å‡½æ•°ã€‚æ­¤æ—¶è¯¥å‡½æ•°åœ¨ä¸­åªæœ‰ä¸€ä¸ªå®žçŽ°ï¼Œä¸ºäº†æ¶ˆé™¤æ­§ä¹‰ï¼Œè¯¥å‡½æ•°å¿…é¡»è°ƒç”¨A()å’ŒB()ä¸­è¯¥å‡½æ•°çš„å®žçŽ°ï¼Œå¹¶æä¾›è‡ªå·±çš„å®žçŽ°ã€‚ è¾“å‡ºç»“æžœä¸º: 1AB å±žæ€§é‡å†™å±žæ€§é‡å†™ä½¿ç”¨ override å…³é”®å­—ï¼Œå±žæ€§å¿…é¡»å…·æœ‰å…¼å®¹ç±»åž‹ï¼Œæ¯ä¸€ä¸ªå£°æ˜Žçš„å±žæ€§éƒ½å¯ä»¥é€šè¿‡åˆå§‹åŒ–ç¨‹åºæˆ–è€…getteræ–¹æ³•è¢«é‡å†™ï¼š 1234567open class Foo &#123; open val x: Int get &#123; â€¦â€¦ &#125;&#125;class Bar1 : Foo() &#123; override val x: Int = â€¦â€¦&#125; ä½ å¯ä»¥ç”¨ä¸€ä¸ªvarå±žæ€§é‡å†™ä¸€ä¸ªvalå±žæ€§ï¼Œä½†æ˜¯åè¿‡æ¥ä¸è¡Œã€‚å› ä¸ºvalå±žæ€§æœ¬èº«å®šä¹‰äº†getteræ–¹æ³•ï¼Œé‡å†™ä¸ºvarå±žæ€§ä¼šåœ¨è¡ç”Ÿç±»ä¸­é¢å¤–å£°æ˜Žä¸€ä¸ªsetteræ–¹æ³• ä½ å¯ä»¥åœ¨ä¸»æž„é€ å‡½æ•°ä¸­ä½¿ç”¨ override å…³é”®å­—ä½œä¸ºå±žæ€§å£°æ˜Žçš„ä¸€éƒ¨åˆ†: 123456789interface Foo &#123; val count: Int&#125;class Bar1(override val count: Int) : Fooclass Bar2 : Foo &#123; override var count: Int = 0&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinç±»å’Œå¯¹è±¡]]></title>
    <url>%2Fposts%2Fe6f2df3b.html</url>
    <content type="text"><![CDATA[ç±»å®šä¹‰Kotlin ç±»å¯ä»¥åŒ…å«ï¼šæž„é€ å‡½æ•°å’Œåˆå§‹åŒ–ä»£ç å—ã€å‡½æ•°ã€å±žæ€§ã€å†…éƒ¨ç±»ã€å¯¹è±¡å£°æ˜Žã€‚ Kotlin ä¸­ä½¿ç”¨å…³é”®å­— class å£°æ˜Žç±»ï¼ŒåŽé¢ç´§è·Ÿç±»åï¼š 123class Runoob &#123; // ç±»åä¸º Runoob // å¤§æ‹¬å·å†…æ˜¯ç±»ä½“æž„æˆ&#125; æˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰ä¸€ä¸ªç©ºç±»ï¼š 1class Empty å¯ä»¥åœ¨ç±»ä¸­å®šä¹‰æˆå‘˜å‡½æ•°ï¼š 123class Runoob() &#123; fun foo() &#123; print("Foo") &#125; // æˆå‘˜å‡½æ•°&#125; ç±»çš„å±žæ€§å±žæ€§å®šä¹‰ç±»çš„å±žæ€§å¯ä»¥ç”¨å…³é”®å­— var å£°æ˜Žä¸ºå¯å˜çš„ï¼Œå¦åˆ™ä½¿ç”¨åªè¯»å…³é”®å­— val å£°æ˜Žä¸ºä¸å¯å˜ã€‚ 12345class Runoob &#123; var name: String = â€¦â€¦ var url: String = â€¦â€¦ var city: String = â€¦â€¦&#125; æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨æ™®é€šå‡½æ•°é‚£æ ·ä½¿ç”¨æž„é€ å‡½æ•°åˆ›å»ºç±»å®žä¾‹ï¼š 1val site = Runoob() // Kotlin ä¸­æ²¡æœ‰ new å…³é”®å­— è¦ä½¿ç”¨ä¸€ä¸ªå±žæ€§ï¼Œåªè¦ç”¨åç§°å¼•ç”¨å®ƒå³å¯ 12site.name // ä½¿ç”¨ . å·æ¥å¼•ç”¨site.url Koltin ä¸­çš„ç±»å¯ä»¥æœ‰ä¸€ä¸ª ä¸»æž„é€ å™¨ï¼Œä»¥åŠä¸€ä¸ªæˆ–å¤šä¸ªæ¬¡æž„é€ å™¨ï¼Œä¸»æž„é€ å™¨æ˜¯ç±»å¤´éƒ¨çš„ä¸€éƒ¨åˆ†ï¼Œä½äºŽç±»åç§°ä¹‹åŽ: 1class Person constructor(firstName: String) &#123;&#125; å¦‚æžœä¸»æž„é€ å™¨æ²¡æœ‰ä»»ä½•æ³¨è§£ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•å¯è§åº¦ä¿®é¥°ç¬¦ï¼Œé‚£ä¹ˆconstructorå…³é”®å­—å¯ä»¥çœç•¥ã€‚ 12class Person(firstName: String) &#123;&#125; getter å’Œ setterå±žæ€§å£°æ˜Žçš„å®Œæ•´è¯­æ³•ï¼š 123var &lt;propertyName&gt;[: &lt;PropertyType&gt;] [= &lt;property_initializer&gt;] [&lt;getter&gt;] [&lt;setter&gt;] getter å’Œ setter éƒ½æ˜¯å¯é€‰ å¦‚æžœå±žæ€§ç±»åž‹å¯ä»¥ä»Žåˆå§‹åŒ–è¯­å¥æˆ–è€…ç±»çš„æˆå‘˜å‡½æ•°ä¸­æŽ¨æ–­å‡ºæ¥ï¼Œé‚£å°±å¯ä»¥çœåŽ»ç±»åž‹ï¼Œvalä¸å…è®¸è®¾ç½®setterå‡½æ•°ï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»çš„ã€‚ 1234var allByDefault: Int? // é”™è¯¯: éœ€è¦ä¸€ä¸ªåˆå§‹åŒ–è¯­å¥, é»˜è®¤å®žçŽ°äº† getter å’Œ setter æ–¹æ³•var initialized = 1 // ç±»åž‹ä¸º Int, é»˜è®¤å®žçŽ°äº† getter å’Œ setterval simple: Int? // ç±»åž‹ä¸º Int ï¼Œé»˜è®¤å®žçŽ° getter ï¼Œä½†å¿…é¡»åœ¨æž„é€ å‡½æ•°ä¸­åˆå§‹åŒ–val inferredType = 1 // ç±»åž‹ä¸º Int ç±»åž‹,é»˜è®¤å®žçŽ° getter å®žä¾‹ä»¥ä¸‹å®žä¾‹å®šä¹‰äº†ä¸€ä¸ª Person ç±»ï¼ŒåŒ…å«ä¸¤ä¸ªå¯å˜å˜é‡ lastName å’Œ noï¼ŒlastName ä¿®æ”¹äº† getter æ–¹æ³•ï¼Œno ä¿®æ”¹äº† setter æ–¹æ³•ã€‚ 1234567891011121314151617181920212223242526272829303132333435class Person &#123; var lastName: String = "zhang" get() = field.toUpperCase() // å°†å˜é‡èµ‹å€¼åŽè½¬æ¢ä¸ºå¤§å†™ set var no: Int = 100 get() = field // åŽç«¯å˜é‡ set(value) &#123; if (value &lt; 10) &#123; // å¦‚æžœä¼ å…¥çš„å€¼å°äºŽ 10 è¿”å›žè¯¥å€¼ field = value &#125; else &#123; field = -1 // å¦‚æžœä¼ å…¥çš„å€¼å¤§äºŽç­‰äºŽ 10 è¿”å›ž -1 &#125; &#125; var heiht: Float = 145.4f private set&#125;// æµ‹è¯•fun main(args: Array&lt;String&gt;) &#123; var person: Person = Person() person.lastName = "wang" println("lastName:$&#123;person.lastName&#125;") person.no = 9 println("no:$&#123;person.no&#125;") person.no = 20 println("no:$&#123;person.no&#125;")&#125; è¾“å‡ºç»“æžœä¸ºï¼š 123lastName:WANGno:9no:-1 Kotlin ä¸­ç±»ä¸èƒ½æœ‰å­—æ®µã€‚æä¾›äº† Backing Fields(åŽç«¯å˜é‡) æœºåˆ¶,å¤‡ç”¨å­—æ®µä½¿ç”¨fieldå…³é”®å­—å£°æ˜Ž,field å…³é”®è¯åªèƒ½ç”¨äºŽå±žæ€§çš„è®¿é—®å™¨ï¼Œå¦‚ä»¥ä¸Šå®žä¾‹ï¼š 123456789var no: Int = 100 get() = field // åŽç«¯å˜é‡ set(value) &#123; if (value &lt; 10) &#123; // å¦‚æžœä¼ å…¥çš„å€¼å°äºŽ 10 è¿”å›žè¯¥å€¼ field = value &#125; else &#123; field = -1 // å¦‚æžœä¼ å…¥çš„å€¼å¤§äºŽç­‰äºŽ 10 è¿”å›ž -1 &#125; &#125; éžç©ºå±žæ€§å¿…é¡»åœ¨å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–,kotlinæä¾›äº†ä¸€ç§å¯ä»¥å»¶è¿Ÿåˆå§‹åŒ–çš„æ–¹æ¡ˆ,ä½¿ç”¨ lateinit å…³é”®å­—æè¿°å±žæ€§ï¼š 1234567891011public class MyTest &#123; lateinit var subject: TestSubject @SetUp fun setup() &#123; subject = TestSubject() &#125; @Test fun test() &#123; subject.method() // dereference directly &#125;&#125; ä¸»æž„é€ å™¨ä¸»æž„é€ å™¨ä¸­ä¸èƒ½åŒ…å«ä»»ä½•ä»£ç ï¼Œåˆå§‹åŒ–ä»£ç å¯ä»¥æ”¾åœ¨åˆå§‹åŒ–ä»£ç æ®µä¸­ï¼Œåˆå§‹åŒ–ä»£ç æ®µä½¿ç”¨ init å…³é”®å­—ä½œä¸ºå‰ç¼€ã€‚ 12345class Person constructor(firstName: String) &#123; init &#123; println("FirstName is $firstName") &#125;&#125; æ³¨æ„ï¼šä¸»æž„é€ å™¨çš„å‚æ•°å¯ä»¥åœ¨åˆå§‹åŒ–ä»£ç æ®µä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç±»ä¸»ä½“nå®šä¹‰çš„å±žæ€§åˆå§‹åŒ–ä»£ç ä¸­ä½¿ç”¨ã€‚ ä¸€ç§ç®€æ´è¯­æ³•ï¼Œå¯ä»¥é€šè¿‡ä¸»æž„é€ å™¨æ¥å®šä¹‰å±žæ€§å¹¶åˆå§‹åŒ–å±žæ€§å€¼ï¼ˆå¯ä»¥æ˜¯varæˆ–valï¼‰ï¼š 123class People(val firstName: String, val lastName: String) &#123; //...&#125; å¦‚æžœæž„é€ å™¨æœ‰æ³¨è§£ï¼Œæˆ–è€…æœ‰å¯è§åº¦ä¿®é¥°ç¬¦ï¼Œè¿™æ—¶constructorå…³é”®å­—æ˜¯å¿…é¡»çš„ï¼Œæ³¨è§£å’Œä¿®é¥°ç¬¦è¦æ”¾åœ¨å®ƒä¹‹å‰ã€‚ å®žä¾‹åˆ›å»ºä¸€ä¸ª Runoobç±»ï¼Œå¹¶é€šè¿‡æž„é€ å‡½æ•°ä¼ å…¥ç½‘ç«™åï¼š 12345678910111213141516171819202122class Runoob constructor(name: String) &#123; // ç±»åä¸º Runoob // å¤§æ‹¬å·å†…æ˜¯ç±»ä½“æž„æˆ var url: String = "http://www.runoob.com" var country: String = "CN" var siteName = name init &#123; println("åˆå§‹åŒ–ç½‘ç«™å: $&#123;name&#125;") &#125; fun printTest() &#123; println("æˆ‘æ˜¯ç±»çš„å‡½æ•°") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val runoob = Runoob("èœé¸Ÿæ•™ç¨‹") println(runoob.siteName) println(runoob.url) println(runoob.country) runoob.printTest()&#125; è¾“å‡ºç»“æžœä¸ºï¼š 12345åˆå§‹åŒ–ç½‘ç«™å: èœé¸Ÿæ•™ç¨‹èœé¸Ÿæ•™ç¨‹http://www.runoob.comCNæˆ‘æ˜¯ç±»çš„å‡½æ•° æ¬¡æž„é€ å‡½æ•°ç±»ä¹Ÿå¯ä»¥æœ‰äºŒçº§æž„é€ å‡½æ•°ï¼Œéœ€è¦åŠ å‰ç¼€ constructor: 12345class Person &#123; constructor(parent: Person) &#123; parent.children.add(this) &#125;&#125; å¦‚æžœç±»æœ‰ä¸»æž„é€ å‡½æ•°ï¼Œæ¯ä¸ªæ¬¡æž„é€ å‡½æ•°éƒ½è¦ï¼Œæˆ–ç›´æŽ¥æˆ–é—´æŽ¥é€šè¿‡å¦ä¸€ä¸ªæ¬¡æž„é€ å‡½æ•°ä»£ç†ä¸»æž„é€ å‡½æ•°ã€‚åœ¨åŒä¸€ä¸ªç±»ä¸­ä»£ç†å¦ä¸€ä¸ªæž„é€ å‡½æ•°ä½¿ç”¨ this å…³é”®å­—ï¼š 12345class Person(val name: String) &#123; constructor (name: String, age:Int) : this(name) &#123; // åˆå§‹åŒ–... &#125;&#125; å¦‚æžœä¸€ä¸ªéžæŠ½è±¡ç±»æ²¡æœ‰å£°æ˜Žæž„é€ å‡½æ•°(ä¸»æž„é€ å‡½æ•°æˆ–æ¬¡æž„é€ å‡½æ•°)ï¼Œå®ƒä¼šäº§ç”Ÿä¸€ä¸ªæ²¡æœ‰å‚æ•°çš„æž„é€ å‡½æ•°ã€‚æž„é€ å‡½æ•°æ˜¯ public ã€‚å¦‚æžœä½ ä¸æƒ³ä½ çš„ç±»æœ‰å…¬å…±çš„æž„é€ å‡½æ•°ï¼Œä½ å°±å¾—å£°æ˜Žä¸€ä¸ªç©ºçš„ä¸»æž„é€ å‡½æ•°ï¼š 12class DontCreateMe private constructor () &#123;&#125; æ³¨æ„ï¼šåœ¨ JVM è™šæ‹Ÿæœºä¸­ï¼Œå¦‚æžœä¸»æž„é€ å‡½æ•°çš„æ‰€æœ‰å‚æ•°éƒ½æœ‰é»˜è®¤å€¼ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªé™„åŠ çš„æ— å‚çš„æž„é€ å‡½æ•°ï¼Œè¿™ä¸ªæž„é€ å‡½æ•°ä¼šç›´æŽ¥ä½¿ç”¨é»˜è®¤å€¼ã€‚è¿™ä½¿å¾— Kotlin å¯ä»¥æ›´ç®€å•çš„ä½¿ç”¨åƒ Jackson æˆ–è€… JPA è¿™æ ·ä½¿ç”¨æ— å‚æž„é€ å‡½æ•°æ¥åˆ›å»ºç±»å®žä¾‹çš„åº“ã€‚ 12&gt; class Customer(val customerName: String = "")&gt; å®žä¾‹1234567891011121314151617181920212223242526class Runoob constructor(name: String) &#123; // ç±»åä¸º Runoob // å¤§æ‹¬å·å†…æ˜¯ç±»ä½“æž„æˆ var url: String = "http://www.runoob.com" var country: String = "CN" var siteName = name init &#123; println("åˆå§‹åŒ–ç½‘ç«™å: $&#123;name&#125;") &#125; // æ¬¡æž„é€ å‡½æ•° constructor (name: String, alexa: Int) : this(name) &#123; println("Alexa æŽ’å $alexa") &#125; fun printTest() &#123; println("æˆ‘æ˜¯ç±»çš„å‡½æ•°") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val runoob = Runoob("èœé¸Ÿæ•™ç¨‹", 10000) println(runoob.siteName) println(runoob.url) println(runoob.country) runoob.printTest()&#125; è¾“å‡ºç»“æžœä¸ºï¼š 123456åˆå§‹åŒ–ç½‘ç«™å: èœé¸Ÿæ•™ç¨‹Alexa æŽ’å 10000èœé¸Ÿæ•™ç¨‹http://www.runoob.comCNæˆ‘æ˜¯ç±»çš„å‡½æ•° æŠ½è±¡ç±»æŠ½è±¡æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç‰¹å¾ä¹‹ä¸€ï¼Œç±»æœ¬èº«ï¼Œæˆ–ç±»ä¸­çš„éƒ¨åˆ†æˆå‘˜ï¼Œéƒ½å¯ä»¥å£°æ˜Žä¸ºabstractçš„ã€‚æŠ½è±¡æˆå‘˜åœ¨ç±»ä¸­ä¸å­˜åœ¨å…·ä½“çš„å®žçŽ°ã€‚ æ³¨æ„ï¼šæ— éœ€å¯¹æŠ½è±¡ç±»æˆ–æŠ½è±¡æˆå‘˜æ ‡æ³¨openæ³¨è§£ã€‚ 1234567open class Base &#123; open fun f() &#123;&#125;&#125;abstract class Derived : Base() &#123; override abstract fun f()&#125; åµŒå¥—ç±»æˆ‘ä»¬å¯ä»¥æŠŠç±»åµŒå¥—åœ¨å…¶ä»–ç±»ä¸­ï¼Œçœ‹ä»¥ä¸‹å®žä¾‹ï¼š 1234567891011class Outer &#123; // å¤–éƒ¨ç±» private val bar: Int = 1 class Nested &#123; // åµŒå¥—ç±» fun foo() = 2 &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val demo = Outer.Nested().foo() // è°ƒç”¨æ ¼å¼ï¼šå¤–éƒ¨ç±».åµŒå¥—ç±».åµŒå¥—ç±»æ–¹æ³•/å±žæ€§ println(demo) // == 2&#125; å†…éƒ¨ç±»å†…éƒ¨ç±»ä½¿ç”¨ inner å…³é”®å­—æ¥è¡¨ç¤ºã€‚ å†…éƒ¨ç±»ä¼šå¸¦æœ‰ä¸€ä¸ªå¯¹å¤–éƒ¨ç±»çš„å¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥å†…éƒ¨ç±»å¯ä»¥è®¿é—®å¤–éƒ¨ç±»æˆå‘˜å±žæ€§å’Œæˆå‘˜å‡½æ•°ã€‚ 12345678910111213141516171819class Outer &#123; private val bar: Int = 1 var v = "æˆå‘˜å±žæ€§" /**åµŒå¥—å†…éƒ¨ç±»**/ inner class Inner &#123; fun foo() = bar // è®¿é—®å¤–éƒ¨ç±»æˆå‘˜ fun innerTest() &#123; var o = this@Outer //èŽ·å–å¤–éƒ¨ç±»çš„æˆå‘˜å˜é‡ println("å†…éƒ¨ç±»å¯ä»¥å¼•ç”¨å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œä¾‹å¦‚ï¼š" + o.v) &#125; &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val demo = Outer().Inner().foo() println(demo) // 1 val demo2 = Outer().Inner().innerTest() println(demo2) // å†…éƒ¨ç±»å¯ä»¥å¼•ç”¨å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œä¾‹å¦‚ï¼šæˆå‘˜å±žæ€§&#125; ä¸ºäº†æ¶ˆé™¤æ­§ä¹‰ï¼Œè¦è®¿é—®æ¥è‡ªå¤–éƒ¨ä½œç”¨åŸŸçš„ thisï¼Œæˆ‘ä»¬ä½¿ç”¨this@labelï¼Œå…¶ä¸­ @label æ˜¯ä¸€ä¸ª ä»£æŒ‡ this æ¥æºçš„æ ‡ç­¾ã€‚ åŒ¿åå†…éƒ¨ç±»ä½¿ç”¨å¯¹è±¡è¡¨è¾¾å¼æ¥åˆ›å»ºåŒ¿åå†…éƒ¨ç±»ï¼š 123456789101112131415161718192021222324252627class Test &#123; var v = "æˆå‘˜å±žæ€§" fun setInterFace(test: TestInterFace) &#123; test.test() &#125;&#125;/** * å®šä¹‰æŽ¥å£ */interface TestInterFace &#123; fun test()&#125;fun main(args: Array&lt;String&gt;) &#123; var test = Test() /** * é‡‡ç”¨å¯¹è±¡è¡¨è¾¾å¼æ¥åˆ›å»ºæŽ¥å£å¯¹è±¡ï¼Œå³åŒ¿åå†…éƒ¨ç±»çš„å®žä¾‹ã€‚ */ test.setInterFace(object : TestInterFace &#123; override fun test() &#123; println("å¯¹è±¡è¡¨è¾¾å¼åˆ›å»ºåŒ¿åå†…éƒ¨ç±»çš„å®žä¾‹") &#125; &#125;)&#125; ç±»çš„ä¿®é¥°ç¬¦ç±»çš„ä¿®é¥°ç¬¦åŒ…æ‹¬ classModifier å’ŒaccessModifier: classModifier: ç±»å±žæ€§ä¿®é¥°ç¬¦ï¼Œæ ‡ç¤ºç±»æœ¬èº«ç‰¹æ€§ã€‚ 12345abstract // æŠ½è±¡ç±» final // ç±»ä¸å¯ç»§æ‰¿ï¼Œé»˜è®¤å±žæ€§enum // æžšä¸¾ç±»open // ç±»å¯ç»§æ‰¿ï¼Œç±»é»˜è®¤æ˜¯finalçš„annotation // æ³¨è§£ç±» accessModifier: è®¿é—®æƒé™ä¿®é¥°ç¬¦ 1234private // ä»…åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­å¯è§protected // åŒä¸€ä¸ªæ–‡ä»¶ä¸­æˆ–å­ç±»å¯è§public // æ‰€æœ‰è°ƒç”¨çš„åœ°æ–¹éƒ½å¯è§internal // åŒä¸€ä¸ªæ¨¡å—ä¸­å¯è§ å®žä¾‹12345678// æ–‡ä»¶åï¼šexample.ktpackage fooprivate fun foo() &#123;&#125; // åœ¨ example.kt å†…å¯è§public var bar: Int = 5 // è¯¥å±žæ€§éšå¤„å¯è§internal val baz = 6 // ç›¸åŒæ¨¡å—å†…å¯è§]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinå¾ªçŽ¯æŽ§åˆ¶]]></title>
    <url>%2Fposts%2Fe596bfcf.html</url>
    <content type="text"><![CDATA[For å¾ªçŽ¯for å¾ªçŽ¯å¯ä»¥å¯¹ä»»ä½•æä¾›è¿­ä»£å™¨ï¼ˆiteratorï¼‰çš„å¯¹è±¡è¿›è¡ŒéåŽ†ï¼Œè¯­æ³•å¦‚ä¸‹: 1for (item in collection) print(item) å¾ªçŽ¯ä½“å¯ä»¥æ˜¯ä¸€ä¸ªä»£ç å—: 123for (item: Int in ints) &#123; // â€¦â€¦&#125; å¦‚ä¸Šæ‰€è¿°ï¼Œfor å¯ä»¥å¾ªçŽ¯éåŽ†ä»»ä½•æä¾›äº†è¿­ä»£å™¨çš„å¯¹è±¡ã€‚ å¦‚æžœä½ æƒ³è¦é€šè¿‡ç´¢å¼•éåŽ†ä¸€ä¸ªæ•°ç»„æˆ–è€…ä¸€ä¸ª listï¼Œä½ å¯ä»¥è¿™ä¹ˆåšï¼š 123for (i in array.indices) &#123; print(array[i])&#125; æ³¨æ„è¿™ç§â€åœ¨åŒºé—´ä¸ŠéåŽ†â€ä¼šç¼–è¯‘æˆä¼˜åŒ–çš„å®žçŽ°è€Œä¸ä¼šåˆ›å»ºé¢å¤–å¯¹è±¡ã€‚ æˆ–è€…ä½ å¯ä»¥ç”¨åº“å‡½æ•° withIndexï¼š 123for ((index, value) in array.withIndex()) &#123; println("the element at $index is $value")&#125; å®žä¾‹å¯¹é›†åˆè¿›è¡Œè¿­ä»£ï¼š 12345678910fun main(args: Array&lt;String&gt;) &#123; val items = listOf("apple", "banana", "kiwi") for (item in items) &#123; println(item) &#125; for (index in items.indices) &#123; println("item at $index is $&#123;items[index]&#125;") &#125;&#125; è¾“å‡ºç»“æžœï¼š 123456applebananakiwiitem at 0 is appleitem at 1 is bananaitem at 2 is kiwi while ä¸Ž doâ€¦while å¾ªçŽ¯whileæ˜¯æœ€åŸºæœ¬çš„å¾ªçŽ¯ï¼Œå®ƒçš„ç»“æž„ä¸ºï¼š 123while( å¸ƒå°”è¡¨è¾¾å¼ ) &#123; //å¾ªçŽ¯å†…å®¹&#125; doâ€¦while å¾ªçŽ¯ å¯¹äºŽ while è¯­å¥è€Œè¨€ï¼Œå¦‚æžœä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™ä¸èƒ½è¿›å…¥å¾ªçŽ¯ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å³ä½¿ä¸æ»¡è¶³æ¡ä»¶ï¼Œä¹Ÿè‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚ doâ€¦while å¾ªçŽ¯å’Œ while å¾ªçŽ¯ç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯ï¼Œdoâ€¦while å¾ªçŽ¯è‡³å°‘ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ 123do &#123; //ä»£ç è¯­å¥&#125;while(å¸ƒå°”è¡¨è¾¾å¼); å®žä¾‹123456789101112fun main(args: Array&lt;String&gt;) &#123; println("----while ä½¿ç”¨-----") var x = 5 while (x &gt; 0) &#123; println( x--) &#125; println("----do...while ä½¿ç”¨-----") var y = 5 do &#123; println(y--) &#125; while(y&gt;0)&#125; è¾“å‡ºç»“æžœï¼š 123456789101154321----do...while ä½¿ç”¨-----54321 è¿”å›žå’Œè·³è½¬Kotlin æœ‰ä¸‰ç§ç»“æž„åŒ–è·³è½¬è¡¨è¾¾å¼ï¼š returnã€‚é»˜è®¤ä»Žæœ€ç›´æŽ¥åŒ…å›´å®ƒçš„å‡½æ•°æˆ–è€…åŒ¿åå‡½æ•°è¿”å›žã€‚ breakã€‚ç»ˆæ­¢æœ€ç›´æŽ¥åŒ…å›´å®ƒçš„å¾ªçŽ¯ã€‚ continueã€‚ç»§ç»­ä¸‹ä¸€æ¬¡æœ€ç›´æŽ¥åŒ…å›´å®ƒçš„å¾ªçŽ¯ã€‚ åœ¨å¾ªçŽ¯ä¸­ Kotlin æ”¯æŒä¼ ç»Ÿçš„ break å’Œ continue æ“ä½œç¬¦ã€‚ 1234567fun main(args: Array&lt;String&gt;) &#123; for (i in 1..10) &#123; if (i==3) continue // i ä¸º 3 æ—¶è·³è¿‡å½“å‰å¾ªçŽ¯ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡å¾ªçŽ¯ println(i) if (i&gt;5) break // i ä¸º 6 æ—¶ è·³å‡ºå¾ªçŽ¯ &#125;&#125; è¾“å‡ºç»“æžœï¼š 1234512456 Break å’Œ Continue æ ‡ç­¾åœ¨ Kotlin ä¸­ä»»ä½•è¡¨è¾¾å¼éƒ½å¯ä»¥ç”¨æ ‡ç­¾ï¼ˆlabelï¼‰æ¥æ ‡è®°ã€‚ æ ‡ç­¾çš„æ ¼å¼ä¸ºæ ‡è¯†ç¬¦åŽè·Ÿ @ ç¬¦å·ï¼Œä¾‹å¦‚ï¼šabc@ã€fooBar@éƒ½æ˜¯æœ‰æ•ˆçš„æ ‡ç­¾ã€‚ è¦ä¸ºä¸€ä¸ªè¡¨è¾¾å¼åŠ æ ‡ç­¾ï¼Œæˆ‘ä»¬åªè¦åœ¨å…¶å‰åŠ æ ‡ç­¾å³å¯ã€‚ 123loop@ for (i in 1..100) &#123; // â€¦â€¦&#125; çŽ°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ ‡ç­¾é™åˆ¶ break æˆ–è€…continueï¼š 12345loop@ for (i in 1..100) &#123; for (j in 1..100) &#123; if (â€¦â€¦) break@loop &#125;&#125; æ ‡ç­¾é™åˆ¶çš„ break è·³è½¬åˆ°åˆšå¥½ä½äºŽè¯¥æ ‡ç­¾æŒ‡å®šçš„å¾ªçŽ¯åŽé¢çš„æ‰§è¡Œç‚¹ã€‚ continue ç»§ç»­æ ‡ç­¾æŒ‡å®šçš„å¾ªçŽ¯çš„ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚ æ ‡ç­¾å¤„è¿”å›žKotlin æœ‰å‡½æ•°å­—é¢é‡ã€å±€éƒ¨å‡½æ•°å’Œå¯¹è±¡è¡¨è¾¾å¼ã€‚å› æ­¤ Kotlin çš„å‡½æ•°å¯ä»¥è¢«åµŒå¥—ã€‚ æ ‡ç­¾é™åˆ¶çš„ return å…è®¸æˆ‘ä»¬ä»Žå¤–å±‚å‡½æ•°è¿”å›žã€‚ æœ€é‡è¦çš„ä¸€ä¸ªç”¨é€”å°±æ˜¯ä»Ž lambda è¡¨è¾¾å¼ä¸­è¿”å›žã€‚å›žæƒ³ä¸€ä¸‹æˆ‘ä»¬è¿™ä¹ˆå†™çš„æ—¶å€™ï¼š 123456fun foo() &#123; ints.forEach &#123; if (it == 0) return print(it) &#125;&#125; è¿™ä¸ª return è¡¨è¾¾å¼ä»Žæœ€ç›´æŽ¥åŒ…å›´å®ƒçš„å‡½æ•°å³ foo ä¸­è¿”å›žã€‚ ï¼ˆæ³¨æ„ï¼Œè¿™ç§éžå±€éƒ¨çš„è¿”å›žåªæ”¯æŒä¼ ç»™å†…è”å‡½æ•°çš„ lambda è¡¨è¾¾å¼ã€‚ï¼‰ å¦‚æžœæˆ‘ä»¬éœ€è¦ä»Ž lambda è¡¨è¾¾å¼ä¸­è¿”å›žï¼Œæˆ‘ä»¬å¿…é¡»ç»™å®ƒåŠ æ ‡ç­¾å¹¶ç”¨ä»¥é™åˆ¶ returnã€‚ 123456fun foo() &#123; ints.forEach lit@ &#123; if (it == 0) return@lit print(it) &#125;&#125; çŽ°åœ¨ï¼Œå®ƒåªä¼šä»Ž lambda è¡¨è¾¾å¼ä¸­è¿”å›žã€‚é€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨éšå¼æ ‡ç­¾æ›´æ–¹ä¾¿ã€‚ è¯¥æ ‡ç­¾ä¸ŽæŽ¥å—è¯¥ lambda çš„å‡½æ•°åŒåã€‚ 123456fun foo() &#123; ints.forEach &#123; if (it == 0) return@forEach print(it) &#125;&#125; æˆ–è€…ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°æ›¿ä»£ lambda è¡¨è¾¾å¼ã€‚ åŒ¿åå‡½æ•°å†…éƒ¨çš„ return è¯­å¥å°†ä»Žè¯¥åŒ¿åå‡½æ•°è‡ªèº«è¿”å›ž 123456fun foo() &#123; ints.forEach(fun(value: Int) &#123; if (value == 0) return print(value) &#125;)&#125; å½“è¦è¿”ä¸€ä¸ªå›žå€¼çš„æ—¶å€™ï¼Œè§£æžå™¨ä¼˜å…ˆé€‰ç”¨æ ‡ç­¾é™åˆ¶çš„ returnï¼Œå³ 1return@a 1 æ„ä¸ºâ€ä»Žæ ‡ç­¾ @a è¿”å›ž 1â€ï¼Œè€Œä¸æ˜¯â€è¿”å›žä¸€ä¸ªæ ‡ç­¾æ ‡æ³¨çš„è¡¨è¾¾å¼ (@a 1)â€ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinæ¡ä»¶æŽ§åˆ¶]]></title>
    <url>%2Fposts%2F7370c7df.html</url>
    <content type="text"><![CDATA[IF è¡¨è¾¾å¼ä¸€ä¸ª if è¯­å¥åŒ…å«ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼å’Œä¸€æ¡æˆ–å¤šæ¡è¯­å¥ã€‚ 1234567891011121314// ä¼ ç»Ÿç”¨æ³•var max = a if (a &lt; b) max = b// ä½¿ç”¨ else var max: Intif (a &gt; b) &#123; max = a&#125; else &#123; max = b&#125; // ä½œä¸ºè¡¨è¾¾å¼val max = if (a &gt; b) a else b æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠ IF è¡¨è¾¾å¼çš„ç»“æžœèµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚ 1234567val max = if (a &gt; b) &#123; print("Choose a") a&#125; else &#123; print("Choose b") b&#125; è¿™ä¹Ÿè¯´æ˜Žæˆ‘ä¹Ÿä¸éœ€è¦åƒJavaé‚£ç§æœ‰ä¸€ä¸ªä¸‰å…ƒæ“ä½œç¬¦ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥ç®€å•å®žçŽ°ï¼š 1val c = if (condition) a else b å®žä¾‹123456789101112131415fun main(args: Array&lt;String&gt;) &#123; var x = 0 if(x&gt;0)&#123; println("x å¤§äºŽ 0") &#125;else if(x==0)&#123; println("x ç­‰äºŽ 0") &#125;else&#123; println("x å°äºŽ 0") &#125; var a = 1 var b = 2 val c = if (a&gt;=b) a else b println("c çš„å€¼ä¸º $c")&#125; è¾“å‡ºç»“æžœä¸ºï¼š 12x ç­‰äºŽ 0c çš„å€¼ä¸º 2 ä½¿ç”¨åŒºé—´ä½¿ç”¨ in è¿ç®—ç¬¦æ¥æ£€æµ‹æŸä¸ªæ•°å­—æ˜¯å¦åœ¨æŒ‡å®šåŒºé—´å†…ï¼ŒåŒºé—´æ ¼å¼ä¸º x..y ï¼š å®žä¾‹ 1234567fun main(args: Array&lt;String&gt;) &#123; val x = 5 val y = 9 if (x in 1..8) &#123; println("x åœ¨åŒºé—´å†…") &#125;&#125; è¾“å‡ºç»“æžœä¸ºï¼š 1x åœ¨åŒºé—´å†… When è¡¨è¾¾å¼when å°†å®ƒçš„å‚æ•°å’Œæ‰€æœ‰çš„åˆ†æ”¯æ¡ä»¶é¡ºåºæ¯”è¾ƒï¼Œç›´åˆ°æŸä¸ªåˆ†æ”¯æ»¡è¶³æ¡ä»¶ã€‚ when æ—¢å¯ä»¥è¢«å½“åšè¡¨è¾¾å¼ä½¿ç”¨ä¹Ÿå¯ä»¥è¢«å½“åšè¯­å¥ä½¿ç”¨ã€‚å¦‚æžœå®ƒè¢«å½“åšè¡¨è¾¾å¼ï¼Œç¬¦åˆæ¡ä»¶çš„åˆ†æ”¯çš„å€¼å°±æ˜¯æ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ï¼Œå¦‚æžœå½“åšè¯­å¥ä½¿ç”¨ï¼Œ åˆ™å¿½ç•¥ä¸ªåˆ«åˆ†æ”¯çš„å€¼ã€‚ when ç±»ä¼¼å…¶ä»–è¯­è¨€çš„ switch æ“ä½œç¬¦ã€‚å…¶æœ€ç®€å•çš„å½¢å¼å¦‚ä¸‹ï¼š 1234567when (x) &#123; 1 -&gt; print("x == 1") 2 -&gt; print("x == 2") else -&gt; &#123; // æ³¨æ„è¿™ä¸ªå— print("x ä¸æ˜¯ 1 ï¼Œä¹Ÿä¸æ˜¯ 2") &#125;&#125; åœ¨ when ä¸­ï¼Œelse åŒ switch çš„ defaultã€‚å¦‚æžœå…¶ä»–åˆ†æ”¯éƒ½ä¸æ»¡è¶³æ¡ä»¶å°†ä¼šæ±‚å€¼ else åˆ†æ”¯ã€‚ å¦‚æžœå¾ˆå¤šåˆ†æ”¯éœ€è¦ç”¨ç›¸åŒçš„æ–¹å¼å¤„ç†ï¼Œåˆ™å¯ä»¥æŠŠå¤šä¸ªåˆ†æ”¯æ¡ä»¶æ”¾åœ¨ä¸€èµ·ï¼Œç”¨é€—å·åˆ†éš”ï¼š 1234when (x) &#123; 0, 1 -&gt; print("x == 0 or x == 1") else -&gt; print("otherwise")&#125; æˆ‘ä»¬ä¹Ÿå¯ä»¥æ£€æµ‹ä¸€ä¸ªå€¼åœ¨ï¼ˆinï¼‰æˆ–è€…ä¸åœ¨ï¼ˆ!inï¼‰ä¸€ä¸ªåŒºé—´æˆ–è€…é›†åˆä¸­ï¼š 123456when (x) &#123; in 1..10 -&gt; print("x is in the range") in validNumbers -&gt; print("x is valid") !in 10..20 -&gt; print("x is outside the range") else -&gt; print("none of the above")&#125; å¦ä¸€ç§å¯èƒ½æ€§æ˜¯æ£€æµ‹ä¸€ä¸ªå€¼æ˜¯ï¼ˆisï¼‰æˆ–è€…ä¸æ˜¯ï¼ˆ!isï¼‰ä¸€ä¸ªç‰¹å®šç±»åž‹çš„å€¼ã€‚æ³¨æ„ï¼š ç”±äºŽæ™ºèƒ½è½¬æ¢ï¼Œä½ å¯ä»¥è®¿é—®è¯¥ç±»åž‹çš„æ–¹æ³•å’Œå±žæ€§è€Œæ— éœ€ ä»»ä½•é¢å¤–çš„æ£€æµ‹ã€‚ 1234fun hasPrefix(x: Any) = when(x) &#123; is String -&gt; x.startsWith("prefix") else -&gt; false&#125; when ä¹Ÿå¯ä»¥ç”¨æ¥å–ä»£ if-else ifé“¾ã€‚ å¦‚æžœä¸æä¾›å‚æ•°ï¼Œæ‰€æœ‰çš„åˆ†æ”¯æ¡ä»¶éƒ½æ˜¯ç®€å•çš„å¸ƒå°”è¡¨è¾¾å¼ï¼Œè€Œå½“ä¸€ä¸ªåˆ†æ”¯çš„æ¡ä»¶ä¸ºçœŸæ—¶åˆ™æ‰§è¡Œè¯¥åˆ†æ”¯ï¼š 12345when &#123; x.isOdd() -&gt; print("x is odd") x.isEven() -&gt; print("x is even") else -&gt; print("x is funny")&#125; å®žä¾‹1234567891011121314151617181920fun main(args: Array&lt;String&gt;) &#123; var x = 0 when (x) &#123; 0, 1 -&gt; println("x == 0 or x == 1") else -&gt; println("otherwise") &#125; when (x) &#123; 1 -&gt; println("x == 1") 2 -&gt; println("x == 2") else -&gt; &#123; // æ³¨æ„è¿™ä¸ªå— println("x ä¸æ˜¯ 1 ï¼Œä¹Ÿä¸æ˜¯ 2") &#125; &#125; when (x) &#123; in 0..10 -&gt; println("x åœ¨è¯¥åŒºé—´èŒƒå›´å†…") else -&gt; println("x ä¸åœ¨è¯¥åŒºé—´èŒƒå›´å†…") &#125;&#125; è¾“å‡ºç»“æžœï¼š 123x == 0 or x == 1x ä¸æ˜¯ 1 ï¼Œä¹Ÿä¸æ˜¯ 2x åœ¨è¯¥åŒºé—´èŒƒå›´å†… when ä¸­ä½¿ç”¨ in è¿ç®—ç¬¦æ¥åˆ¤æ–­é›†åˆå†…æ˜¯å¦åŒ…å«æŸå®žä¾‹ï¼š 1234567fun main(args: Array&lt;String&gt;) &#123; val items = setOf("apple", "banana", "kiwi") when &#123; "orange" in items -&gt; println("juicy") "apple" in items -&gt; println("apple is fine too") &#125;&#125; è¾“å‡ºç»“æžœï¼š 1apple is fine too]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android_Materialç»„ä»¶ä½¿ç”¨è¯¦è§£]]></title>
    <url>%2Fposts%2F389c1508.html</url>
    <content type="text"><![CDATA[Androidå®˜æ–¹ä¸ºå¼€å‘è€…æä¾›äº†è®¸å¤šä¸°å¯Œçš„UIæŽ§ä»¶ï¼ŒMaterial ç»„ä»¶å°±æ˜¯åŒ…å«äº†è¿™äº›æŽ§ä»¶çš„ä¸€å¥—å·¥å…·ï¼Œå¤šæ•°æ—¶å€™ä½¿ç”¨å®ƒå¯ä»¥æ»¡è¶³æˆ‘ä»¬æ—¥å¸¸å¼€å‘UIçš„éœ€æ±‚ï¼Œæé«˜æ•ˆçŽ‡ã€‚ç›®å‰Android Material ç»„ä»¶å·²ç»æ›´æ–°äº†1.2.0ç¨³å®šç‰ˆï¼Œèµ¶ç´§æ¥äº†è§£ä¸€æ³¢ã€‚ å¯¼å…¥ä¾èµ–ï¼Œå°±å¯ä»¥å¼€å§‹äº†ã€‚ 1implementation 'com.google.android.material:material:1.2.0' MaterialButtonæˆ‘ä»¬å¹³æ—¶å†™å¸ƒå±€ï¼Œå½“é‡åˆ°æŒ‰é’®éœ€è¦åœ†è§’ã€æˆ–è€…æè¾¹ç­‰ï¼Œé€šå¸¸çš„æ–¹æ³•æ˜¯æ–°å»ºä¸€ä¸ªxmlæ–‡ä»¶ï¼Œåœ¨shapeæ ‡ç­¾ä¸‹å†™ï¼Œç„¶åŽé€šè¿‡android:backgroundæˆ–setBackground(drawable)è®¾ç½®ã€‚ è¿™æœ¬æ¥æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯UIè®¾è®¡å¸ˆä¼šå–œæ¬¢çœ‹èµ·æ¥å’Œåˆ«äººä¸ä¸€æ ·çš„æ•ˆæžœï¼Œä¹Ÿè®¸æ˜¯ä¸ºäº†å®¡ï¼ˆzhuangï¼‰ç¾Žï¼ˆbiï¼‰ï¼Œä¾‹å¦‚è¿™ä¸ªé¡µé¢ç”¨4dpçš„åœ†è§’ï¼Œé‚£ä¸ªé¡µé¢ç”¨10dpçš„åœ†è§’ï¼Œè¦æœ‰æè¾¹ï¼Œé¢œè‰²è¿˜ä¸å¤ªä¸€æ ·â€¦â€¦å¦‚æžœæˆ‘ä»¬æ¯ä¸ªç•Œé¢éƒ½æ–°å»ºä¸ªxmlå†™shapeï¼Œé‚£ä¹ˆåŽæœŸé¡¹ç›®å¤§äº†ï¼Œç»´æŠ¤èµ·æ¥å°±åƒæ— åº•æ´žâ€¦â€¦ é‚£ä¹ˆæœ‰æ²¡æœ‰è¿™æ ·ä¸€ä¸ªæŽ§ä»¶ï¼Œèƒ½åœ¨xmlç›´æŽ¥é…ç½®åœ†è§’ã€æè¾¹å±žæ€§ï¼Œæ»¡è¶³å¹³æ—¶å¼€å‘çš„åŸºæœ¬UIéœ€æ±‚ï¼Ÿå½“ç„¶æœ‰ï¼ŒGitHubä¸Šç¬¬ä¸‰æ–¹çš„åº“å¤§æŠŠã€‚ä¸è¿‡Googleå®˜æ–¹åœ¨SDK28çš„æ—¶å€™ä¹ŸæŽ¨å‡ºäº†ä¸€ä¸ªæ–°æŽ§ä»¶ â€”â€” MaterialButtonï¼Œä½†æ˜¯æˆ‘å‘çŽ°å¾ˆå¤šäººè¿˜ä¸çŸ¥é“ï¼Œä»Šå¤©å°±æ¥å®‰åˆ©ä¸‹ã€‚ å…ˆæ¥çœ‹ä¸€æ³¢æ•ˆæžœå›¾ï¼š æŒ‰åŽ‹æ°´æ³¢çº¹ï¼Œæ”¯æŒè®¾ç½®æ³¢çº¹é¢œè‰²ã€‚ MaterialButtonç»§æ‰¿AppCompatButtonï¼Œåœ¨åŽŸæ¥Buttonçš„åŸºç¡€ä¸Šåšäº†ä¸€äº›æ‰©å±•ï¼Œå¦‚åœ†è§’ã€æè¾¹ã€å‰ç½®å’ŒåŽç½®iconï¼ˆiconæ”¯æŒè®¾ç½®Sizeã€Tintã€Paddingã€Gravityç­‰ï¼‰ï¼Œè¿˜æ”¯æŒæŒ‰åŽ‹æ°´æ³¢çº¹å¹¶ä¸”è®¾ç½®colorï¼ŒåŸºæœ¬èƒ½æ»¡è¶³æ—¥å¸¸çš„éœ€æ±‚ã€‚ å…¬å¼€å±žæ€§å¦‚ä¸‹ï¼š å…³äºŽbackgroundåœ¨1.2ç‰ˆæœ¬ä»¥å‰ï¼ŒMaterialButtonåªèƒ½é€šè¿‡app:backgroundTintå±žæ€§è®¾ç½®èƒŒæ™¯è‰²ï¼Œè¯¥å±žæ€§æŽ¥æ”¶color state listã€‚ä¸èƒ½é€šè¿‡android:backgroundè®¾ç½®è‡ªå®šä¹‰drawableã€‚ 1.2ç‰ˆæœ¬åŽï¼Œå®˜æ–¹å·²ä¿®å¤æ­¤é—®é¢˜ã€‚å¦‚æžœæœªè®¾ç½®è‡ªå®šä¹‰èƒŒæ™¯ï¼Œåˆ™ MaterialShapeDrawable ä»å°†ç”¨ä½œé»˜è®¤èƒŒæ™¯ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœæŒ‰é’®èƒŒæ™¯æ˜¯çº¯è‰²ï¼Œå¯ä»¥é€šè¿‡app:backgroundTintæŒ‡å®šï¼›å¦‚æžœæŒ‰é’®èƒŒæ™¯æ˜¯æ¸å˜è‰²ï¼Œåˆ™éœ€è¦è‡ªå·±å®šä¹‰drawableï¼Œç„¶åŽé€šè¿‡android:backgroundè®¾ç½®ã€‚ æ³¨æ„ï¼šå¦‚æžœè¦ä½¿ç”¨android:backgroundè®¾ç½®èƒŒæ™¯ï¼Œåˆ™éœ€è¦å°†backgroundTintè®¾ç½®ä¸º@emptyï¼Œå¦åˆ™backgroundä¸ä¼šç”Ÿæ•ˆã€‚ 123&lt;com.google.android.material.button.MaterialButton android:background=â€@drawable/custom_backgroundâ€ app:backgroundTint=â€@emptyâ€ /&gt; æŒ‡å®š@emptyåŽï¼ŒAndroid Studioä¼šå‡ºçŽ°çº¢è‰²è­¦å‘Šï¼Œå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå¿½ç•¥å°±å¥½ã€‚ä¸è¿‡æ—¢ç„¶å·²ç»è‡ªå®šä¹‰drawableï¼Œå°±æ²¡å¿…è¦ä½¿ç”¨MaterialButtonï¼Œç›´æŽ¥ç”¨æ™®é€šçš„Buttonç”šè‡³ç”¨TextViewå°±å¥½äº†ã€‚ å…³äºŽinsetTopã€insetBottomçœ‹ä¸‹é¢çš„ä»£ç ï¼š 1234567&lt;com.google.android.material.button.MaterialButton android:id="@+id/btn1" android:layout_width="150dp" android:layout_height="50dp" android:textColor="@android:color/white" android:textSize="18sp"/&gt; xmlé¢„è§ˆå›¾ï¼š æœ‰æ²¡æœ‰æ„Ÿè§‰æ€ªæ€ªçš„ï¼Ÿè²Œä¼¼buttonä¸Šä¸‹å¤šäº†ä¸€ä¸ªpaddingï¼å’¦ï¼ä»£ç é‡Œé¢æ˜Žæ˜Žæ²¡æœ‰è®¾ç½®paddingå•Šï¼ çœ‹äº†æºç å‘çŽ°ï¼ŒMaterialButtoné»˜è®¤åœ¨styleæŒ‡å®šäº†insetTopå’ŒinsetBottomä¸º6dpï¼Œä½¿å¾—heightçœ‹èµ·æ¥å¹¶æ²¡æœ‰Buttonå®žé™…è®¾ç½®å€¼ä¸€æ ·é«˜ï¼Œå¯ä»¥åœ¨xmlå°†MaterialButtonçš„insetTopå’ŒinsetBottoméƒ½è®¾ç½®ä¸º0dpï¼Œè¿™æ ·MaterialButtonçš„é«˜åº¦å°±å’Œå®žé™…è®¾ç½®çš„é«˜åº¦ä¸€è‡´äº†ã€‚ å…³äºŽé˜´å½±MDç»„ä»¶é»˜è®¤éƒ½æ˜¯è‡ªå¸¦é˜´å½±çš„ï¼ŒMaterialButtonä¹Ÿä¸ä¾‹å¤–ã€‚ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸æƒ³è¦æŒ‰é’®æœ‰é˜´å½±ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å¯ä»¥æŒ‡å®šstyleä¸ºstyle=â€@style/Widget.MaterialComponents.Button.UnelevatedButtonâ€ï¼Œè¿™æ ·å°±èƒ½åŽ»æŽ‰é˜´å½±ï¼Œè®©è§†å›¾çœ‹èµ·æ¥æ‰å¹³åŒ–ã€‚ å…³äºŽthemeåœ¨MDC1.1.0ä»¥åŽï¼Œä½¿ç”¨MaterialButtonå¯èƒ½ä¼šå‡ºçŽ°é—ªé€€çš„é—®é¢˜ï¼ŒåŽŸå› å°±æ˜¯ä½¿ç”¨äº†MDæŽ§ä»¶ï¼Œä½†æ˜¯æœªå°†themè®¾ç½®ä¸ºMaterialComponentsã€‚è§£å†³æ–¹æ³•å¯ä»¥æœ‰å‡ ç§ï¼š å…ˆåœ¨style.xmlè‡ªå®šä¹‰MaterialComponents_Theme 1234&lt;style name="MaterialComponents_Theme" parent="Theme.MaterialComponents.Light.NoActionBar"&gt; &lt;!-- Customize your theme here. --&gt; ...&lt;/style&gt; æ–¹æ³•ä¸€ï¼šAndroidManifesté‡ŒapplicationèŠ‚ç‚¹ä¸‹é…ç½®ï¼Œä½œç”¨åŸŸä¸ºæ•´ä¸ªåº”ç”¨ 123&lt;application ... android:theme=&quot;@style/MaterialComponents_Theme&quot;/&gt; æ–¹æ³•äºŒï¼šåªåœ¨å½“å‰activityé…ç½®ï¼Œä½œç”¨åŸŸä¸ºå½“å‰activity 123&lt;activity ... android:theme="@style/MaterialComponents_Theme"/&gt; æ–¹æ³•ä¸‰ï¼šä¸ºæ¯ä¸ªåœ¨ä½¿ç”¨åˆ°MDæŽ§ä»¶çš„åœ°æ–¹é…ç½®ï¼Œä½œç”¨åŸŸåªé’ˆå¯¹å½“å‰æŽ§ä»¶ 123&lt;com.google.android.material.button.MaterialButton ... android:theme="@style/Theme.MaterialComponents.Light.NoActionBar" /&gt; å…³äºŽåœ¨Android Studioä¸­é¢„è§ˆå¦‚ä¸‹ä»£ç  12345678910111213141516&lt;com.google.android.material.button.MaterialButton android:id="@+id/btn_send" style="@style/Widget.MaterialComponents.Button.UnelevatedButton" android:layout_width="@dimen/dp_80" android:layout_height="@dimen/dp_30" android:layout_marginStart="@dimen/dp_12" android:insetTop="0dp" android:insetBottom="0dp" android:padding="0dp" android:text="@string/dispatch_room_text_upper_mic" android:textColor="@color/white" android:textSize="@dimen/font_12" app:backgroundTint="@color/c_6D56FF" app:cornerRadius="@dimen/dp_15" app:layout_constraintBottom_toBottomOf="@id/iv_head" app:layout_constraintStart_toEndOf="@id/iv_head" /&gt; xmlé¢„è§ˆ å¯ä»¥çœ‹åˆ°xmlé¢„è§ˆæ•ˆæžœå’Œä»£ç æ˜¯ä¸åŒ¹é…çš„ï¼Œè¿™æ—¶å€™å¯ä»¥å°†é¢„è§ˆçš„ä¸»é¢˜æŒ‡å®šä¸ºMaterialComponents è¿™æ ·æ•ˆæžœå°±å’Œxmlä»£ç ä¸€è‡´äº† ShapeableImageViewæ¥æ³¢æ•ˆæžœå›¾ï¼š ä»¥å¾€æˆ‘ä»¬å®žçŽ°å›¾ç‰‡åœ†è§’ã€æè¾¹ç­‰éœ€æ±‚ï¼Œå¤šæ•°æ—¶å€™æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹æˆ–è€…è‡ªå®šä¹‰ï¼ŒGlideä¹Ÿæœ‰ä¸ªæ‰©å±•åº“ï¼Œèƒ½å¾ˆè½»æ¾å¸®æˆ‘ä»¬å®žçŽ°ã€‚ä¸è¿‡åœ¨MDC1.2.0ä¸­ï¼Œå·²ç»æœ‰äº†ä¸€å¥—å®˜æ–¹çš„å®žçŽ°æ–¹æ¡ˆã€‚é‚£å°±æ˜¯ShapeableImageViewã€‚ ShapeableImageViewç»§æ‰¿è‡ªImageViewï¼Œå¯ä»¥ä¸ºimageæ·»åŠ æè¾¹å¤§å°ã€é¢œè‰²ï¼Œä»¥åŠåœ†è§’ã€è£åˆ‡ç­‰ï¼Œè¿™å¾—ç›ŠäºŽå®ƒæ–°å¢žäº†ä¸€ä¸ªå±žæ€§shapeAppearanceï¼Œå…·ä½“å®žçŽ°åœ¨ShapeAppearanceModelï¼Œå¯ä»¥é€šè¿‡styleæ¥é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»£ç å®žçŽ°ã€‚ styleé…ç½®ï¼š1234567891011&lt;style name=&quot;StyleShapeAppearanceImage&quot; parent=&quot;&quot;&gt; &lt;item name=&quot;cornerFamily&quot;&gt;rounded&lt;/item&gt; &lt;item name=&quot;cornerSize&quot;&gt;16dp&lt;/item&gt; &lt;item name=&quot;cornerSizeTopRight&quot;&gt;10dp&lt;/item&gt; &lt;item name=&quot;cornerSizeBottomRight&quot;&gt;0dp&lt;/item&gt;&lt;/style&gt; ...&lt;com.google.android.material.imageview.ShapeableImageView app:shapeAppearance=&quot;@style/StyleShapeAppearanceImage&quot; ... /&gt; ä»£ç è®¾ç½®ï¼š123456789101112imageView?.shapeAppearanceModel = ShapeAppearanceModel.builder() .setAllCorners(CornerFamily.ROUNDED,20f) .setTopLeftCorner(CornerFamily.CUT,RelativeCornerSize(0.3f)) .setTopRightCorner(CornerFamily.CUT,RelativeCornerSize(0.3f)) .setBottomRightCorner(CornerFamily.CUT,RelativeCornerSize(0.3f)) .setBottomLeftCorner(CornerFamily.CUT,RelativeCornerSize(0.3f)) .setAllCornerSizes(ShapeAppearanceModel.PILL) .setTopLeftCornerSize(20f) .setTopRightCornerSize(RelativeCornerSize(0.5f)) .setBottomLeftCornerSize(10f) .setBottomRightCornerSize(AbsoluteCornerSize(30f)) .build() ä»£ç æŽ¥æ”¶ä¸€ä¸ªShapeAppearanceModelï¼Œé€šè¿‡æž„å»ºè€…æ¨¡å¼å®žçŽ°ï¼ŒsetTopLeftè¡¨ç¤ºå¤„ç†å·¦ä¸Šè§’ï¼Œå…¶ä»–åŒç†ã€‚ cornerSizeè¡¨ç¤ºè®¾ç½®çš„å¤§å°ï¼Œæœ‰RelativeCornerSizeå’ŒAbsoluteCornerSizeï¼ŒRelativeCornerSizeæž„é€ æ–¹æ³•æŽ¥æ”¶ä¸€ä¸ªç™¾åˆ†æ¯”ï¼ŒèŒƒå›´0-1ï¼›AbsoluteCornerSizeæž„é€ æ–¹æ³•æŽ¥æ”¶ä¸€ä¸ªå…·ä½“æ•°å€¼ï¼Œè¿™ä¸ªæ•°å€¼å°±æ˜¯åœ†è§’çš„æ•°å€¼ã€‚ è¿™é‡Œè¿˜æœ‰ä¸ªCornerFamilyï¼Œå®ƒè¡¨ç¤ºå¤„ç†çš„æ–¹å¼ï¼Œæœ‰ROUNDEDå’ŒCUTä¸¤ç§ï¼ŒROUNDEDæ˜¯åœ†è§’ï¼ŒCUTæ˜¯ç›´æŽ¥å°†åœ†è§’éƒ¨åˆ†è£åˆ‡æŽ‰ã€‚setAllCornerSizes(ShapeAppearanceModel.PILL)å¯ä»¥ç›´æŽ¥å®žçŽ°åœ†å½¢æ•ˆæžœã€‚ å…³äºŽStrokeShapeableImageViewæŒ‡å®šstrokeWidthæè¾¹çš„æ—¶å€™ï¼Œå…¶æè¾¹ä¼šè¢«è¦†ç›–æŽ‰ä¸€åŠï¼Œå¦‚strokeWidth=4dpï¼Œä¸Šä¸‹å·¦å³ä¼šè¢«è¦†ç›–ï¼Œå®žé™…çš„æ•ˆæžœæ˜¯åªæœ‰2dpè¢«æ˜¾ç¤ºã€‚å¦‚å›¾ï¼Œ githubæœ‰äººåé¦ˆäº†ç±»ä¼¼é—®é¢˜(https://github.com/material-components/material-components-android/issues/1489)ï¼Œæˆ‘çš„å¤„ç†æ–¹æ³•æ˜¯åœ¨è®¾ç½®äº†strokeWidthçš„åŒæ—¶ï¼Œè®¾ç½®ç›¸åº”çš„padingï¼Œè¿™æ ·æè¾¹å°±ä¸ä¼šè¢«è¦†ç›–äº†ã€‚ 1234&lt;com.google.android.material.imageview.ShapeableImageView ... app:strokeWidth=&quot;4dp&quot; android:padding=&quot;4dp&quot; Slider(åŠ å¼ºç‰ˆçš„SeekBar) Sliderçš„çˆ¶ç±»BaseSliderï¼Œç›´æŽ¥ç»§æ‰¿Viewï¼Œé‡æ–°å®žçŽ°é€»è¾‘ã€‚æ­¤å¤–BaseSliderè¿˜æœ‰ä¸ªå­ç±»RangeSliderï¼Œç”¨å®ƒæ¥å®žçŽ°å›¾1æ•ˆæžœ2 Sliderå¯ä»¥å®žçŽ°æ»‘å—å¤´éƒ¨æ•°å­—å˜åŒ–æ•ˆæžœï¼Œè¿˜å¯ä»¥å®žçŽ°ç±»ä¼¼åˆ»åº¦å°ºæ•ˆæžœï¼Œæ¯”åŽŸç”Ÿçš„SeekBaråŠ å¼ºäº†ä¸å°‘ã€‚ å¸¸ç”¨å±žæ€§å¦‚ä¸‹ï¼š å…¶ä»–å±žæ€§è¿˜æœ‰haloColorã€haloRadiusã€thumbColorç­‰ï¼Œç”¨æ¥é…ç½®ä¸€äº›å¤–è§‚ BottomNavigationView BottomNavigationViewç›¸æ¯”ä¹‹å‰è¦å®Œå–„äº†å¾ˆå¤šï¼Œå¯ä»¥è®¾ç½®iconå¤§å°ï¼Œæ·»åŠ çº¢ç‚¹å’Œæœªè¯»æ¶ˆæ¯æ•°ï¼Œä»¥åŠè¶…è¿‡3ä¸ªitemï¼Œåˆ‡æ¢æ•ˆæžœä¹Ÿä¸ä¼šå‡ºçŽ°é—®é¢˜ï¼Œé€šè¿‡LabelVisibilityMode.LABEL_VISIBILITY_LABELEDæŒ‡å®šã€‚ ä»¥ä¸Šä¸»è¦åˆ—ä¸¾äº†å‡ ä¸ªå¸¸ç”¨çš„æŽ§ä»¶ï¼ŒåŸºæœ¬å¯ä»¥æ»¡è¶³ä¸€äº›UIå¼€å‘äº†ï¼Œæ›´å¤šå…³äºŽMDCçš„å†…å®¹ï¼Œå¤§å®¶å¯ä»¥åˆ°githubåŽ»äº†è§£ material-components-androidï¼š https://github.com/material-components/material-components-android å‚è€ƒæ–‡ç« ï¼š https://mp.weixin.qq.com/s/PZD8RxrqP7_RAjXIo345aQ]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KotlinåŸºæœ¬æ•°æ®ç±»åž‹]]></title>
    <url>%2Fposts%2F83cba390.html</url>
    <content type="text"><![CDATA[Kotlin çš„åŸºæœ¬æ•°å€¼ç±»åž‹åŒ…æ‹¬ Byteã€Shortã€Intã€Longã€Floatã€Double ç­‰ã€‚ä¸åŒäºŽ Java çš„æ˜¯ï¼Œå­—ç¬¦ä¸å±žäºŽæ•°å€¼ç±»åž‹ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®ç±»åž‹ã€‚ ç±»åž‹ ä½å®½åº¦ Double 64 Float 32 Long 64 Int 32 Short 16 Byte 8 å­—é¢å¸¸é‡ä¸‹é¢æ˜¯æ‰€æœ‰ç±»åž‹çš„å­—é¢å¸¸é‡ï¼š åè¿›åˆ¶ï¼š123 é•¿æ•´åž‹ä»¥å¤§å†™çš„ L ç»“å°¾ï¼š123L 16 è¿›åˆ¶ä»¥ 0x å¼€å¤´ï¼š0x0F 2 è¿›åˆ¶ä»¥ 0b å¼€å¤´ï¼š0b00001011 æ³¨æ„ï¼š8è¿›åˆ¶ä¸æ”¯æŒ Kotlin åŒæ—¶ä¹Ÿæ”¯æŒä¼ ç»Ÿç¬¦å·è¡¨ç¤ºçš„æµ®ç‚¹æ•°å€¼ï¼š Doubles é»˜è®¤å†™æ³•: 123.5, 123.5e10 Floats ä½¿ç”¨ f æˆ–è€… F åŽç¼€ï¼š123.5f ä½ å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ä½¿æ•°å­—å¸¸é‡æ›´æ˜“è¯»ï¼š 12345val oneMillion = 1_000_000val creditCardNumber = 1234_5678_9012_3456Lval socialSecurityNumber = 999_99_9999Lval hexBytes = 0xFF_EC_DE_5Eval bytes = 0b11010010_01101001_10010100_10010010 æ¯”è¾ƒä¸¤ä¸ªæ•°å­—Kotlin ä¸­æ²¡æœ‰åŸºç¡€æ•°æ®ç±»åž‹ï¼Œåªæœ‰å°è£…çš„æ•°å­—ç±»åž‹ï¼Œä½ æ¯å®šä¹‰çš„ä¸€ä¸ªå˜é‡ï¼Œå…¶å®ž Kotlin å¸®ä½ å°è£…äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ä¸ä¼šå‡ºçŽ°ç©ºæŒ‡é’ˆã€‚æ•°å­—ç±»åž‹ä¹Ÿä¸€æ ·ï¼Œæ‰€ä»¥åœ¨æ¯”è¾ƒä¸¤ä¸ªæ•°å­—çš„æ—¶å€™ï¼Œå°±æœ‰æ¯”è¾ƒæ•°æ®å¤§å°å’Œæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒçš„åŒºåˆ«äº†ã€‚ åœ¨ Kotlin ä¸­ï¼Œä¸‰ä¸ªç­‰å· === è¡¨ç¤ºæ¯”è¾ƒå¯¹è±¡åœ°å€ï¼Œä¸¤ä¸ª == è¡¨ç¤ºæ¯”è¾ƒä¸¤ä¸ªå€¼å¤§å°ã€‚ 123456789101112fun main(args: Array&lt;String&gt;) &#123; val a: Int = 10000 println(a === a) // trueï¼Œå€¼ç›¸ç­‰ï¼Œå¯¹è±¡åœ°å€ç›¸ç­‰ //ç»è¿‡äº†è£…ç®±ï¼Œåˆ›å»ºäº†ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ val boxedA: Int? = a val anotherBoxedA: Int? = a //è™½ç„¶ç»è¿‡äº†è£…ç®±ï¼Œä½†æ˜¯å€¼æ˜¯ç›¸ç­‰çš„ï¼Œéƒ½æ˜¯10000 println(boxedA === anotherBoxedA) // falseï¼Œå€¼ç›¸ç­‰ï¼Œå¯¹è±¡åœ°å€ä¸ä¸€æ · println(boxedA == anotherBoxedA) // trueï¼Œå€¼ç›¸ç­‰&#125; ç±»åž‹è½¬æ¢ç”±äºŽä¸åŒçš„è¡¨ç¤ºæ–¹å¼ï¼Œè¾ƒå°ç±»åž‹å¹¶ä¸æ˜¯è¾ƒå¤§ç±»åž‹çš„å­ç±»åž‹ï¼Œè¾ƒå°çš„ç±»åž‹ä¸èƒ½éšå¼è½¬æ¢ä¸ºè¾ƒå¤§çš„ç±»åž‹ã€‚ è¿™æ„å‘³ç€åœ¨ä¸è¿›è¡Œæ˜¾å¼è½¬æ¢çš„æƒ…å†µä¸‹æˆ‘ä»¬ä¸èƒ½æŠŠ Byte åž‹å€¼èµ‹ç»™ä¸€ä¸ª Int å˜é‡ã€‚ 12val b: Byte = 1 // OK, å­—é¢å€¼æ˜¯é™æ€æ£€æµ‹çš„val i: Int = b // é”™è¯¯ æˆ‘ä»¬å¯ä»¥ä»£ç”¨å…¶toInt()æ–¹æ³•ã€‚ 12val b: Byte = 1 // OK, å­—é¢å€¼æ˜¯é™æ€æ£€æµ‹çš„val i: Int = b.toInt() // OK æ¯ç§æ•°æ®ç±»åž‹éƒ½æœ‰ä¸‹é¢çš„è¿™äº›æ–¹æ³•ï¼Œå¯ä»¥è½¬åŒ–ä¸ºå…¶å®ƒçš„ç±»åž‹ï¼š 1234567toByte(): BytetoShort(): ShorttoInt(): InttoLong(): LongtoFloat(): FloattoDouble(): DoubletoChar(): Char æœ‰äº›æƒ…å†µä¸‹ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨è‡ªåŠ¨ç±»åž‹è½¬åŒ–çš„ï¼Œå‰ææ˜¯å¯ä»¥æ ¹æ®ä¸Šä¸‹æ–‡çŽ¯å¢ƒæŽ¨æ–­å‡ºæ­£ç¡®çš„æ•°æ®ç±»åž‹è€Œä¸”æ•°å­¦æ“ä½œç¬¦ä¼šåšç›¸åº”çš„é‡è½½ã€‚ä¾‹å¦‚ä¸‹é¢æ˜¯æ­£ç¡®çš„ï¼š 1val l = 1L + 3 // Long + Int =&gt; Long ä½æ“ä½œç¬¦å¯¹äºŽIntå’ŒLongç±»åž‹ï¼Œè¿˜æœ‰ä¸€ç³»åˆ—çš„ä½æ“ä½œç¬¦å¯ä»¥ä½¿ç”¨ï¼Œåˆ†åˆ«æ˜¯ï¼š 1234567shl(bits) â€“ å·¦ç§»ä½ (Javaâ€™s &lt;&lt;)shr(bits) â€“ å³ç§»ä½ (Javaâ€™s &gt;&gt;)ushr(bits) â€“ æ— ç¬¦å·å³ç§»ä½ (Javaâ€™s &gt;&gt;&gt;)and(bits) â€“ ä¸Žor(bits) â€“ æˆ–xor(bits) â€“ å¼‚æˆ–inv() â€“ åå‘ å­—ç¬¦å’Œ Java ä¸ä¸€æ ·ï¼ŒKotlin ä¸­çš„ Char ä¸èƒ½ç›´æŽ¥å’Œæ•°å­—æ“ä½œï¼ŒChar å¿…éœ€æ˜¯å•å¼•å· â€˜ åŒ…å«èµ·æ¥çš„ã€‚æ¯”å¦‚æ™®é€šå­—ç¬¦ â€˜0â€™ï¼Œâ€™aâ€™ã€‚ 12345fun check(c: Char) &#123; if (c == 1) &#123; // é”™è¯¯ï¼šç±»åž‹ä¸å…¼å®¹ // â€¦â€¦ &#125;&#125; å­—ç¬¦å­—é¢å€¼ç”¨å•å¼•å·æ‹¬èµ·æ¥: â€˜1â€™ã€‚ ç‰¹æ®Šå­—ç¬¦å¯ä»¥ç”¨åæ–œæ è½¬ä¹‰ã€‚ æ”¯æŒè¿™å‡ ä¸ªè½¬ä¹‰åºåˆ—ï¼š\tã€ \bã€\nã€\rã€&#39;ã€&quot;ã€\ å’Œ $ã€‚ ç¼–ç å…¶ä»–å­—ç¬¦è¦ç”¨ Unicode è½¬ä¹‰åºåˆ—è¯­æ³•ï¼šâ€™\uFF00â€™ã€‚ æˆ‘ä»¬å¯ä»¥æ˜¾å¼æŠŠå­—ç¬¦è½¬æ¢ä¸º Int æ•°å­—ï¼š 12345fun decimalDigitValue(c: Char): Int &#123; if (c !in '0'..'9') throw IllegalArgumentException("Out of range") return c.toInt() - '0'.toInt() // æ˜¾å¼è½¬æ¢ä¸ºæ•°å­—&#125; å½“éœ€è¦å¯ç©ºå¼•ç”¨æ—¶ï¼Œåƒæ•°å­—ã€å­—ç¬¦ä¼šè¢«è£…ç®±ã€‚è£…ç®±æ“ä½œä¸ä¼šä¿ç•™åŒä¸€æ€§ã€‚ å¸ƒå°”å¸ƒå°”ç”¨ Boolean ç±»åž‹è¡¨ç¤ºï¼Œå®ƒæœ‰ä¸¤ä¸ªå€¼ï¼štrue å’Œ falseã€‚ è‹¥éœ€è¦å¯ç©ºå¼•ç”¨å¸ƒå°”ä¼šè¢«è£…ç®±ã€‚ å†…ç½®çš„å¸ƒå°”è¿ç®—æœ‰ï¼š 123|| â€“ çŸ­è·¯é€»è¾‘æˆ–&amp;&amp; â€“ çŸ­è·¯é€»è¾‘ä¸Ž! - é€»è¾‘éž æ•°ç»„æ•°ç»„ç”¨ç±» Array å®žçŽ°ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€ä¸ª size å±žæ€§åŠ get å’Œ set æ–¹æ³•ï¼Œç”±äºŽä½¿ç”¨ [] é‡è½½äº† get å’Œ set æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ ‡å¾ˆæ–¹ä¾¿çš„èŽ·å–æˆ–è€…è®¾ç½®æ•°ç»„å¯¹åº”ä½ç½®çš„å€¼ã€‚ æ•°ç»„çš„åˆ›å»ºä¸¤ç§æ–¹å¼ï¼šä¸€ç§æ˜¯ä½¿ç”¨å‡½æ•°arrayOf()ï¼›å¦å¤–ä¸€ç§æ˜¯ä½¿ç”¨å·¥åŽ‚å‡½æ•°ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬åˆ†åˆ«æ˜¯ä¸¤ç§æ–¹å¼åˆ›å»ºäº†ä¸¤ä¸ªæ•°ç»„ï¼š 12345678910fun main(args: Array&lt;String&gt;) &#123; //[1,2,3] val a = arrayOf(1, 2, 3) //[0,2,4] val b = Array(3, &#123; i -&gt; (i * 2) &#125;) //è¯»å–æ•°ç»„å†…å®¹ println(a[0]) // è¾“å‡ºç»“æžœï¼š1 println(b[1]) // è¾“å‡ºç»“æžœï¼š2&#125; å¦‚ä¸Šæ‰€è¿°ï¼Œ[] è¿ç®—ç¬¦ä»£è¡¨è°ƒç”¨æˆå‘˜å‡½æ•° get() å’Œ set()ã€‚ æ³¨æ„: ä¸Ž Java ä¸åŒçš„æ˜¯ï¼ŒKotlin ä¸­æ•°ç»„æ˜¯ä¸åå˜çš„ï¼ˆinvariantï¼‰ã€‚ é™¤äº†ç±»Arrayï¼Œè¿˜æœ‰ByteArray, ShortArray, IntArrayï¼Œç”¨æ¥è¡¨ç¤ºå„ä¸ªç±»åž‹çš„æ•°ç»„ï¼ŒçœåŽ»äº†è£…ç®±æ“ä½œï¼Œå› æ­¤æ•ˆçŽ‡æ›´é«˜ï¼Œå…¶ç”¨æ³•åŒArrayä¸€æ ·ï¼š 12val x: IntArray = intArrayOf(1, 2, 3)x[0] = x[1] + x[2] å­—ç¬¦ä¸²å’Œ Java ä¸€æ ·ï¼ŒString æ˜¯ä¸å¯å˜çš„ã€‚æ–¹æ‹¬å· [] è¯­æ³•å¯ä»¥å¾ˆæ–¹ä¾¿çš„èŽ·å–å­—ç¬¦ä¸²ä¸­çš„æŸä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ for å¾ªçŽ¯æ¥éåŽ†ï¼š 123for (c in str) &#123; println(c)&#125; Kotlin æ”¯æŒä¸‰ä¸ªå¼•å· â€œâ€â€ æ‰©èµ·æ¥çš„å­—ç¬¦ä¸²ï¼Œæ”¯æŒå¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š 1234567fun main(args: Array&lt;String&gt;) &#123; val text = """ å¤šè¡Œå­—ç¬¦ä¸² å¤šè¡Œå­—ç¬¦ä¸² """ println(text) // è¾“å‡ºæœ‰ä¸€äº›å‰ç½®ç©ºæ ¼&#125; String å¯ä»¥é€šè¿‡ trimMargin() æ–¹æ³•æ¥åˆ é™¤å¤šä½™çš„ç©ºç™½ã€‚ 123456789fun main(args: Array&lt;String&gt;) &#123; val text = """ |å¤šè¡Œå­—ç¬¦ä¸² |èœé¸Ÿæ•™ç¨‹ |å¤šè¡Œå­—ç¬¦ä¸² |Runoob """.trimMargin() println(text) // å‰ç½®ç©ºæ ¼åˆ é™¤äº†&#125; é»˜è®¤ | ç”¨ä½œè¾¹ç•Œå‰ç¼€ï¼Œä½†ä½ å¯ä»¥é€‰æ‹©å…¶ä»–å­—ç¬¦å¹¶ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œæ¯”å¦‚ trimMargin(â€œ&gt;â€)ã€‚ å­—ç¬¦ä¸²æ¨¡æ¿å­—ç¬¦ä¸²å¯ä»¥åŒ…å«æ¨¡æ¿è¡¨è¾¾å¼ ï¼Œå³ä¸€äº›å°æ®µä»£ç ï¼Œä¼šæ±‚å€¼å¹¶æŠŠç»“æžœåˆå¹¶åˆ°å­—ç¬¦ä¸²ä¸­ã€‚ æ¨¡æ¿è¡¨è¾¾å¼ä»¥ç¾Žå…ƒç¬¦ï¼ˆ$ï¼‰å¼€å¤´ï¼Œç”±ä¸€ä¸ªç®€å•çš„åå­—æž„æˆ: 12345fun main(args: Array&lt;String&gt;) &#123; val i = 10 val s = "i = $i" // æ±‚å€¼ç»“æžœä¸º "i = 10" println(s)&#125; æˆ–è€…ç”¨èŠ±æ‹¬å·æ‰©èµ·æ¥çš„ä»»æ„è¡¨è¾¾å¼: 12345fun main(args: Array&lt;String&gt;) &#123; val s = "runoob" val str = "$s.length is $&#123;s.length&#125;" // æ±‚å€¼ç»“æžœä¸º "runoob.length is 6" println(str)&#125; åŽŸç”Ÿå­—ç¬¦ä¸²å’Œè½¬ä¹‰å­—ç¬¦ä¸²å†…éƒ¨éƒ½æ”¯æŒæ¨¡æ¿ã€‚ å¦‚æžœä½ éœ€è¦åœ¨åŽŸç”Ÿå­—ç¬¦ä¸²ä¸­è¡¨ç¤ºå­—é¢å€¼ $ å­—ç¬¦ï¼ˆå®ƒä¸æ”¯æŒåæ–œæ è½¬ä¹‰ï¼‰ï¼Œä½ å¯ä»¥ç”¨ä¸‹åˆ—è¯­æ³•ï¼š 123456fun main(args: Array&lt;String&gt;) &#123; val price = """ $&#123;'$'&#125;9.99 """ println(price) // æ±‚å€¼ç»“æžœä¸º $9.99&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KotlinåŸºç¡€è¯­æ³•]]></title>
    <url>%2Fposts%2Fa90cf00c.html</url>
    <content type="text"><![CDATA[Kotlin æ–‡ä»¶ä»¥ .kt ä¸ºåŽç¼€ã€‚ åŒ…å£°æ˜Žä»£ç æ–‡ä»¶çš„å¼€å¤´ä¸€èˆ¬ä¸ºåŒ…çš„å£°æ˜Žï¼š 123456package com.runoob.mainimport java.util.*fun test() &#123;&#125;class Runoob &#123;&#125; kotlinæºæ–‡ä»¶ä¸éœ€è¦ç›¸åŒ¹é…çš„ç›®å½•å’ŒåŒ…ï¼Œæºæ–‡ä»¶å¯ä»¥æ”¾åœ¨ä»»ä½•æ–‡ä»¶ç›®å½•ã€‚ ä»¥ä¸Šä¾‹ä¸­ test() çš„å…¨åæ˜¯ com.runoob.main.testã€Runoob çš„å…¨åæ˜¯ com.runoob.main.Runoobã€‚ å¦‚æžœæ²¡æœ‰æŒ‡å®šåŒ…ï¼Œé»˜è®¤ä¸º default åŒ…ã€‚ é»˜è®¤å¯¼å…¥æœ‰å¤šä¸ªåŒ…ä¼šé»˜è®¤å¯¼å…¥åˆ°æ¯ä¸ª Kotlin æ–‡ä»¶ä¸­ï¼š kotlin.* kotlin.annotation.* kotlin.collections.* kotlin.comparisons.* kotlin.io.* kotlin.ranges.* kotlin.sequences.* kotlin.text.* å‡½æ•°å®šä¹‰å‡½æ•°å®šä¹‰ä½¿ç”¨å…³é”®å­— funï¼Œå‚æ•°æ ¼å¼ä¸ºï¼šå‚æ•° : ç±»åž‹ 123fun sum(a: Int, b: Int): Int &#123; // Int å‚æ•°ï¼Œè¿”å›žå€¼ Int return a + b&#125; è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°ä½“ï¼Œè¿”å›žç±»åž‹è‡ªåŠ¨æŽ¨æ–­ï¼š 123fun sum(a: Int, b: Int) = a + bpublic fun sum(a: Int, b: Int): Int = a + b // public æ–¹æ³•åˆ™å¿…é¡»æ˜Žç¡®å†™å‡ºè¿”å›žç±»åž‹ æ— è¿”å›žå€¼çš„å‡½æ•°(ç±»ä¼¼Javaä¸­çš„void)ï¼š 123456789fun printSum(a: Int, b: Int): Unit &#123; print(a + b)&#125;// å¦‚æžœæ˜¯è¿”å›ž Unitç±»åž‹ï¼Œåˆ™å¯ä»¥çœç•¥(å¯¹äºŽpublicæ–¹æ³•ä¹Ÿæ˜¯è¿™æ ·)ï¼špublic fun printSum(a: Int, b: Int) &#123; print(a + b)&#125; å¯å˜é•¿å‚æ•°å‡½æ•°å‡½æ•°çš„å˜é•¿å‚æ•°å¯ä»¥ç”¨ vararg å…³é”®å­—è¿›è¡Œæ ‡è¯†ï¼š 12345678910fun vars(vararg v:Int)&#123; for(vt in v)&#123; print(vt) &#125;&#125;// æµ‹è¯•fun main(args: Array&lt;String&gt;) &#123; vars(1,2,3,4,5) // è¾“å‡º12345&#125; lambda(åŒ¿åå‡½æ•°)lambdaè¡¨è¾¾å¼ä½¿ç”¨å®žä¾‹ï¼š 12345// æµ‹è¯•fun main(args: Array&lt;String&gt;) &#123; val sumLambda: (Int, Int) -&gt; Int = &#123;x,y -&gt; x+y&#125; println(sumLambda(1,2)) // è¾“å‡º 3&#125; å®šä¹‰å¸¸é‡ä¸Žå˜é‡å¯å˜å˜é‡å®šä¹‰ï¼švar å…³é”®å­— 1var &lt;æ ‡è¯†ç¬¦&gt; : &lt;ç±»åž‹&gt; = &lt;åˆå§‹åŒ–å€¼&gt; ä¸å¯å˜å˜é‡å®šä¹‰ï¼šval å…³é”®å­—ï¼Œåªèƒ½èµ‹å€¼ä¸€æ¬¡çš„å˜é‡(ç±»ä¼¼Javaä¸­finalä¿®é¥°çš„å˜é‡) 1val &lt;æ ‡è¯†ç¬¦&gt; : &lt;ç±»åž‹&gt; = &lt;åˆå§‹åŒ–å€¼&gt; å¸¸é‡ä¸Žå˜é‡éƒ½å¯ä»¥æ²¡æœ‰åˆå§‹åŒ–å€¼,ä½†æ˜¯åœ¨å¼•ç”¨å‰å¿…é¡»åˆå§‹åŒ– ç¼–è¯‘å™¨æ”¯æŒè‡ªåŠ¨ç±»åž‹åˆ¤æ–­,å³å£°æ˜Žæ—¶å¯ä»¥ä¸æŒ‡å®šç±»åž‹,ç”±ç¼–è¯‘å™¨åˆ¤æ–­ã€‚ 12345678val a: Int = 1val b = 1 // ç³»ç»Ÿè‡ªåŠ¨æŽ¨æ–­å˜é‡ç±»åž‹ä¸ºIntval c: Int // å¦‚æžœä¸åœ¨å£°æ˜Žæ—¶åˆå§‹åŒ–åˆ™å¿…é¡»æä¾›å˜é‡ç±»åž‹c = 1 // æ˜Žç¡®èµ‹å€¼var x = 5 // ç³»ç»Ÿè‡ªåŠ¨æŽ¨æ–­å˜é‡ç±»åž‹ä¸ºIntx += 1 // å˜é‡å¯ä¿®æ”¹ æ³¨é‡ŠKotlin æ”¯æŒå•è¡Œå’Œå¤šè¡Œæ³¨é‡Šï¼Œå®žä¾‹å¦‚ä¸‹ï¼š 1234// è¿™æ˜¯ä¸€ä¸ªå•è¡Œæ³¨é‡Š/* è¿™æ˜¯ä¸€ä¸ªå¤šè¡Œçš„ å—æ³¨é‡Šã€‚ */ ä¸Ž Java ä¸åŒ, Kotlin ä¸­çš„å—æ³¨é‡Šå…è®¸åµŒå¥—ã€‚ å­—ç¬¦ä¸²æ¨¡æ¿$ è¡¨ç¤ºä¸€ä¸ªå˜é‡åæˆ–è€…å˜é‡å€¼ $varName è¡¨ç¤ºå˜é‡å€¼ ${varName.fun()} è¡¨ç¤ºå˜é‡çš„æ–¹æ³•è¿”å›žå€¼: 1234567var a = 1// æ¨¡æ¿ä¸­çš„ç®€å•åç§°ï¼šval s1 = "a is $a" a = 2// æ¨¡æ¿ä¸­çš„ä»»æ„è¡¨è¾¾å¼ï¼šval s2 = "$&#123;s1.replace("is", "was")&#125;, but now is $a" NULLæ£€æŸ¥æœºåˆ¶Kotlinçš„ç©ºå®‰å…¨è®¾è®¡å¯¹äºŽå£°æ˜Žå¯ä¸ºç©ºçš„å‚æ•°ï¼Œåœ¨ä½¿ç”¨æ—¶è¦è¿›è¡Œç©ºåˆ¤æ–­å¤„ç†ï¼Œæœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼Œå­—æ®µåŽåŠ !!åƒJavaä¸€æ ·æŠ›å‡ºç©ºå¼‚å¸¸ï¼Œå¦ä¸€ç§å­—æ®µåŽåŠ ?å¯ä¸åšå¤„ç†è¿”å›žå€¼ä¸º nullæˆ–é…åˆ?:åšç©ºåˆ¤æ–­å¤„ç† 12345678//ç±»åž‹åŽé¢åŠ ?è¡¨ç¤ºå¯ä¸ºç©ºvar age: String? = "23" //æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸val ages = age!!.toInt()//ä¸åšå¤„ç†è¿”å›ž nullval ages1 = age?.toInt()//ageä¸ºç©ºè¿”å›ž-1val ages2 = age?.toInt() ?: -1 å½“ä¸€ä¸ªå¼•ç”¨å¯èƒ½ä¸º null å€¼æ—¶, å¯¹åº”çš„ç±»åž‹å£°æ˜Žå¿…é¡»æ˜Žç¡®åœ°æ ‡è®°ä¸ºå¯ä¸º nullã€‚ å½“ str ä¸­çš„å­—ç¬¦ä¸²å†…å®¹ä¸æ˜¯ä¸€ä¸ªæ•´æ•°æ—¶, è¿”å›ž null: 123fun parseInt(str: String): Int? &#123; // ...&#125; ä»¥ä¸‹å®žä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ä¸€ä¸ªè¿”å›žå€¼å¯ä¸º null çš„å‡½æ•°: 12345678910111213fun main(args: Array&lt;String&gt;) &#123; if (args.size &lt; 2) &#123; print("Two integers expected") return &#125; val x = parseInt(args[0]) val y = parseInt(args[1]) // ç›´æŽ¥ä½¿ç”¨ `x * y` ä¼šå¯¼è‡´é”™è¯¯, å› ä¸ºå®ƒä»¬å¯èƒ½ä¸º null. if (x != null &amp;&amp; y != null) &#123; // åœ¨è¿›è¡Œè¿‡ null å€¼æ£€æŸ¥ä¹‹åŽ, x å’Œ y çš„ç±»åž‹ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸ºéž null å˜é‡ print(x * y) &#125;&#125; ç±»åž‹æ£€æµ‹åŠè‡ªåŠ¨ç±»åž‹è½¬æ¢æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ is è¿ç®—ç¬¦æ£€æµ‹ä¸€ä¸ªè¡¨è¾¾å¼æ˜¯å¦æŸç±»åž‹çš„ä¸€ä¸ªå®žä¾‹(ç±»ä¼¼äºŽJavaä¸­çš„instanceofå…³é”®å­—)ã€‚ 1234567891011121314fun getStringLength(obj: Any): Int? &#123; if (obj is String) &#123; // åšè¿‡ç±»åž‹åˆ¤æ–­ä»¥åŽï¼Œobjä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è½¬æ¢ä¸ºStringç±»åž‹ return obj.length &#125; //åœ¨è¿™é‡Œè¿˜æœ‰ä¸€ç§æ–¹æ³•ï¼Œä¸ŽJavaä¸­instanceofä¸åŒï¼Œä½¿ç”¨!is // if (obj !is String)&#123; // // XXX // &#125; // è¿™é‡Œçš„objä»ç„¶æ˜¯Anyç±»åž‹çš„å¼•ç”¨ return null&#125; æˆ–è€… 123456fun getStringLength(obj: Any): Int? &#123; if (obj !is String) return null // åœ¨è¿™ä¸ªåˆ†æ”¯ä¸­, `obj` çš„ç±»åž‹ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸º `String` return obj.length&#125; ç”šè‡³è¿˜å¯ä»¥ 123456fun getStringLength(obj: Any): Int? &#123; // åœ¨ `&amp;&amp;` è¿ç®—ç¬¦çš„å³ä¾§, `obj` çš„ç±»åž‹ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸º `String` if (obj is String &amp;&amp; obj.length &gt; 0) return obj.length return null&#125; åŒºé—´åŒºé—´è¡¨è¾¾å¼ç”±å…·æœ‰æ“ä½œç¬¦å½¢å¼ .. çš„ rangeTo å‡½æ•°è¾…ä»¥ in å’Œ !in å½¢æˆã€‚ åŒºé—´æ˜¯ä¸ºä»»ä½•å¯æ¯”è¾ƒç±»åž‹å®šä¹‰çš„ï¼Œä½†å¯¹äºŽæ•´åž‹åŽŸç”Ÿç±»åž‹ï¼Œå®ƒæœ‰ä¸€ä¸ªä¼˜åŒ–çš„å®žçŽ°ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨åŒºé—´çš„ä¸€äº›ç¤ºä¾‹: 123456789101112131415161718for (i in 1..4) print(i) // è¾“å‡ºâ€œ1234â€for (i in 4..1) print(i) // ä»€ä¹ˆéƒ½ä¸è¾“å‡ºif (i in 1..10) &#123; // ç­‰åŒäºŽ 1 &lt;= i &amp;&amp; i &lt;= 10 println(i)&#125;// ä½¿ç”¨ step æŒ‡å®šæ­¥é•¿for (i in 1..4 step 2) print(i) // è¾“å‡ºâ€œ13â€for (i in 4 downTo 1 step 2) print(i) // è¾“å‡ºâ€œ42â€// ä½¿ç”¨ until å‡½æ•°æŽ’é™¤ç»“æŸå…ƒç´ for (i in 1 until 10) &#123; // i in [1, 10) æŽ’é™¤äº† 10 println(i)&#125; å®žä¾‹æµ‹è¯•1234567891011121314151617fun main(args: Array&lt;String&gt;) &#123; print("å¾ªçŽ¯è¾“å‡ºï¼š") for (i in 1..4) print(i) // è¾“å‡ºâ€œ1234â€ println("\n----------------") print("è®¾ç½®æ­¥é•¿ï¼š") for (i in 1..4 step 2) print(i) // è¾“å‡ºâ€œ13â€ println("\n----------------") print("ä½¿ç”¨ downToï¼š") for (i in 4 downTo 1 step 2) print(i) // è¾“å‡ºâ€œ42â€ println("\n----------------") print("ä½¿ç”¨ untilï¼š") // ä½¿ç”¨ until å‡½æ•°æŽ’é™¤ç»“æŸå…ƒç´  for (i in 1 until 4) &#123; // i in [1, 4) æŽ’é™¤äº† 4 print(i) &#125; println("\n----------------")&#125; è¾“å‡ºç»“æžœï¼š 12345678å¾ªçŽ¯è¾“å‡ºï¼š1234----------------è®¾ç½®æ­¥é•¿ï¼š13----------------ä½¿ç”¨ downToï¼š42----------------ä½¿ç”¨ untilï¼š123----------------]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinä½¿ç”¨å‘½ä»¤è¡Œç¼–è¯‘]]></title>
    <url>%2Fposts%2Fc0feb7da.html</url>
    <content type="text"><![CDATA[Kotlin ä½¿ç”¨å‘½ä»¤è¡Œç¼–è¯‘Kotlin å‘½ä»¤è¡Œç¼–è¯‘å·¥å…·ä¸‹è½½åœ°å€ï¼šhttps://github.com/JetBrains/kotlin/releases/tag/v1.1.2-2ï¼Œç›®å‰æœ€æ–°ä¸º 1.1.2-2ã€‚ ä½ å¯ä»¥é€‰æ‹©ä¸€ä¸ªæœ€æ–°çš„ç¨³å®šç‰ˆä¸‹è½½ã€‚ ä¸‹è½½å®ŒæˆåŽï¼Œè§£åŽ‹åˆ°æŒ‡å®šç›®å½•ï¼Œç„¶åŽå°† bin ç›®å½•æ·»åŠ åˆ°ç³»ç»ŸçŽ¯å¢ƒå˜é‡ã€‚bin ç›®å½•åŒ…å«ç¼–è¯‘å’Œè¿è¡Œ Kotlin æ‰€éœ€çš„è„šæœ¬ã€‚ SDKMAN!åœ¨ OS Xã€Linuxã€Cygwinã€FreeBSD å’Œ Solaris ç³»ç»Ÿä¸Šä¹Ÿå¯ä»¥ä½¿ç”¨æ›´ç®€å•çš„å®‰è£…æ–¹æ³•ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 123$ curl -s https://get.sdkman.io | bash$ sdk install kotlin Homebrewåœ¨ OS X ä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ Homebrew å®‰è£…ï¼š 12$ brew update$ brew install kotlin MacPortså¦‚æžœä½ æ˜¯ MacPorts ç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š 1$ sudo port install kotlin åˆ›å»ºå’Œè¿è¡Œç¬¬ä¸€ä¸ªç¨‹åºåˆ›å»ºä¸€ä¸ªåä¸º hello.kt æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š hello.ktfun main(args: Array) { println(â€œHello, World!â€) } ä½¿ç”¨ Kotlin ç¼–è¯‘å™¨ç¼–è¯‘åº”ç”¨: 1$ kotlinc hello.kt -include-runtime -d hello.jar -d: ç”¨æ¥è®¾ç½®ç¼–è¯‘è¾“å‡ºçš„åç§°ï¼Œå¯ä»¥æ˜¯ class æˆ– .jar æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›®å½•ã€‚ -include-runtime : è®© .jar æ–‡ä»¶åŒ…å« Kotlin è¿è¡Œåº“ï¼Œä»Žè€Œå¯ä»¥ç›´æŽ¥è¿è¡Œã€‚ å¦‚æžœä½ æƒ³çœ‹æ‰€æœ‰çš„å¯ç”¨é€‰é¡¹ï¼Œè¿è¡Œ: 1$ kotlinc -help è¿è¡Œåº”ç”¨ 12$ java -jar hello.jarHello, World! ç¼–è¯‘æˆåº“è‹¥éœ€è¦å°†ç”Ÿæˆçš„ jar åŒ…ä¾›å…¶ä»– Kotlin ç¨‹åºä½¿ç”¨ï¼Œå¯æ— éœ€åŒ…å« Kotlin çš„è¿è¡Œåº“ï¼š 1$ kotlinc hello.kt -d hello.jar ç”±äºŽè¿™æ ·ç”Ÿæˆçš„ .jar æ–‡ä»¶ä¸åŒ…å« Kotlin è¿è¡Œåº“ï¼Œæ‰€ä»¥ä½ åº”è¯¥ç¡®ä¿å½“å®ƒè¢«ä½¿ç”¨æ—¶ï¼Œè¿è¡Œæ—¶åœ¨ä½ çš„ classpath ä¸Šã€‚ ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ kotlin å‘½ä»¤æ¥è¿è¡Œ Kotlin ç¼–è¯‘å™¨ç”Ÿæˆçš„ .jar æ–‡ä»¶ 1$ kotlin -classpath hello.jar HelloKt HelloKt ä¸ºç¼–è¯‘å™¨ä¸º hello.kt æ–‡ä»¶ç”Ÿæˆçš„é»˜è®¤ç±»åã€‚ è¿è¡Œ REPLï¼ˆäº¤äº’å¼è§£é‡Šå™¨ï¼‰æˆ‘ä»¬å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤å¾—åˆ°ä¸€ä¸ªå¯äº¤äº’çš„ shellï¼Œç„¶åŽè¾“å…¥ä»»ä½•æœ‰æ•ˆçš„ Kotlin ä»£ç ï¼Œå¹¶ç«‹å³çœ‹åˆ°ç»“æžœ ä½¿ç”¨å‘½ä»¤è¡Œæ‰§è¡Œè„šæœ¬Kotlin ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªè„šæœ¬è¯­è¨€ä½¿ç”¨ï¼Œæ–‡ä»¶åŽç¼€åä¸º .kts ã€‚ ä¾‹å¦‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåä¸º list_folders.ktsï¼Œä»£ç å¦‚ä¸‹ï¼š 1234import java.io.Fileval folders = File(args[0]).listFiles &#123; file -&gt; file.isDirectory() &#125;folders?.forEach &#123; folder -&gt; println(folder) &#125; æ‰§è¡Œæ—¶é€šè¿‡ -script é€‰é¡¹è®¾ç½®ç›¸åº”çš„è„šæœ¬æ–‡ä»¶ã€‚ 12$ kotlinc -script list_folders.kts &lt;path_to_folder&gt;$ kotlinc -script list_folders.kts]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinæ•™ç¨‹]]></title>
    <url>%2Fposts%2F17a38a8.html</url>
    <content type="text"><![CDATA[Kotlin æ•™ç¨‹Kotlin æ˜¯ä¸€ç§åœ¨ Java è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„é™æ€ç±»åž‹ç¼–ç¨‹è¯­è¨€ï¼Œè¢«ç§°ä¹‹ä¸º Android ä¸–ç•Œçš„Swiftï¼Œç”± JetBrains è®¾è®¡å¼€å‘å¹¶å¼€æºã€‚ Kotlin å¯ä»¥ç¼–è¯‘æˆJavaå­—èŠ‚ç ï¼Œä¹Ÿå¯ä»¥ç¼–è¯‘æˆ JavaScriptï¼Œæ–¹ä¾¿åœ¨æ²¡æœ‰ JVM çš„è®¾å¤‡ä¸Šè¿è¡Œã€‚ åœ¨Google I/O 2017ä¸­ï¼ŒGoogle å®£å¸ƒ Kotlin æˆä¸º Android å®˜æ–¹å¼€å‘è¯­è¨€ã€‚ Kotlin ç¨‹åºKotlin ç¨‹åºæ–‡ä»¶ä»¥ .kt ç»“å°¾ï¼Œå¦‚ï¼šhello.kt ã€app.ktã€‚ æœ€ç®€ç‰ˆ12345package hello // å¯é€‰çš„åŒ…å¤´ fun main(args: Array&lt;String&gt;) &#123; // åŒ…çº§å¯è§çš„å‡½æ•°ï¼ŒæŽ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä½œä¸ºå‚æ•° println("Hello World!") // åˆ†å·å¯ä»¥çœç•¥&#125; é¢å‘å¯¹è±¡123456789class Greeter(val name: String) &#123; fun greet() &#123; println("Hello, $name") &#125;&#125; fun main(args: Array&lt;String&gt;) &#123; Greeter("World!").greet() // åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä¸ç”¨ new å…³é”®å­—&#125; ä¸ºä»€ä¹ˆé€‰æ‹© Kotlinï¼Ÿ ç®€æ´: å¤§å¤§å‡å°‘æ ·æ¿ä»£ç çš„æ•°é‡ã€‚ å®‰å…¨: é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ç­‰æ•´ä¸ªç±»çš„é”™è¯¯ã€‚ äº’æ“ä½œæ€§: å……åˆ†åˆ©ç”¨ JVMã€Android å’Œæµè§ˆå™¨çš„çŽ°æœ‰åº“ã€‚ å·¥å…·å‹å¥½: å¯ç”¨ä»»ä½• Java IDE æˆ–è€…ä½¿ç”¨å‘½ä»¤è¡Œæž„å»ºã€‚ å‚è€ƒé“¾æŽ¥ å®˜æ–¹ç½‘ç«™ å®˜æ–¹ç¤ºä¾‹ å®˜æ–¹ç½‘ç«™ - ä¸­æ–‡ç¿»è¯‘ Kotlin å®˜æ–¹åœ¨çº¿å·¥å…· Kotlin åœ¨çº¿å·¥å…·]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutteræ’ä»¶å¼€å‘æŒ‡å—]]></title>
    <url>%2Fposts%2Ff946bb65.html</url>
    <content type="text"><![CDATA[Flutteræ’ä»¶å¼€å‘åˆ›å»ºæ’ä»¶ç›®å½•1234flutter create -i objc -a java --template=plugin demo-i, è¡¨ç¤ºæŒ‡å®šiOSçš„è¯­è¨€, objc, swift-a, è¡¨ç¤ºæŒ‡å®šå®‰å“çš„è¯­è¨€, java, kotlin é€šè¿‡ä¸Šé¢å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºdemoçš„pluginæ¨¡æ¿, å¹¶ç”Ÿæˆä»¥ä¸‹ç›®å½•ç»“æž„ ç›®å½•ç»“æž„12345- android // æ’ä»¶ç›¸å…³ Android ä»£ç - ios // æ’ä»¶ç›¸å…³ iOS ä»£ç - lib // æ’ä»¶ç›¸å…³ Dart ä»£ç - example // ç¤ºä¾‹é¡¹ç›®, ç”¨äºŽè°ƒè¯•å½“å‰å¼€å‘çš„æ’ä»¶- pubspec.yaml // æ’ä»¶é…ç½®æ–‡ä»¶ exampleç›®å½•exampleç›®å½•, æ˜¯ä¸€ä¸ªç¤ºä¾‹é¡¹ç›®, ç”¨äºŽè°ƒè¯•å½“å‰å¼€å‘çš„æ’ä»¶ åœ¨example/lib/main.dartä¸­, é»˜è®¤ç”Ÿæˆä¸€äº›ç¤ºä¾‹ä»£ç . ä»£ç å¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950import 'package:flutter/material.dart';import 'dart:async';import 'package:flutter/services.dart';import 'package:demo/demo.dart';void main() =&gt; runApp(MyApp());class MyApp extends StatefulWidget &#123; @override _MyAppState createState() =&gt; _MyAppState();&#125;class _MyAppState extends State&lt;MyApp&gt; &#123; String _platformVersion = 'Unknown'; @override void initState() &#123; super.initState(); initPlatformState(); &#125; Future&lt;void&gt; initPlatformState() async &#123; String platformVersion; try &#123; platformVersion = await Demo.platformVersion; &#125; on PlatformException &#123; platformVersion = 'Failed to get platform version.'; &#125; if (!mounted) return; setState(() &#123; _platformVersion = platformVersion; &#125;); &#125; @override Widget build(BuildContext context) &#123; return MaterialApp( home: Scaffold( appBar: AppBar( title: const Text('Plugin example app'), ), body: Center( child: Text('Running on: $_platformVersion\n'), ), ), ); &#125;&#125; ç¤ºä¾‹ä¸­çš„ä»£ç , Demo.platformVersion, å®žé™…ä¸Šæ˜¯è°ƒç”¨äº†libç›®å½•ä¸­, Demoç±»çš„getæ–¹æ³•platformVersion, ä¹Ÿå°±æ˜¯æˆ‘ä»¬å†™çš„æ’ä»¶ä»£ç  libç›®å½•libç›®å½•, ä¸»è¦ç”¨æ¥å­˜æ”¾, å¼€å‘çš„æ’ä»¶æ‰€éœ€è¦çš„dartä»£ç  åœ¨lib/demo.dart, ä¸­å¯ä»¥æ‰¾åˆ°é»˜è®¤ç”Ÿæˆçš„ç¤ºä¾‹ä»£ç , ä»£ç å¦‚ä¸‹: 123456789101112import 'dart:async';import 'package:flutter/services.dart';class Demo &#123; static const MethodChannel _channel = const MethodChannel('demo') static Future&lt;String&gt; get platformVersion async &#123; final String version = await _channel.invokeMethod('getPlatformVersion'); return version; &#125;&#125; ä»¥ä¸Šä»£ç , åˆ›å»ºäº†ä¸€ä¸ªåå­—ä¸ºdemoçš„MethodChannelå¯¹è±¡, å¹¶æä¾›ä¸€ä¸ªget platformVersionæ–¹æ³•, åœ¨è¯¥æ–¹æ³•ä¸­è°ƒç”¨invokeMethodæ–¹æ³•, åŽ»è°ƒç”¨åŽŸç”Ÿä»£ç ä¸­, åå­—ä¸ºgetPlatformVersionçš„æ–¹æ³•. MethodChannelflutterä¸ŽåŽŸç”Ÿçš„äº¤äº’, å¯ä»¥é€šè¿‡MethodChannelæ¥å®žçŽ°, MethodChannelæ˜¯åŒå‘çš„, é€šè¿‡å®ƒå¯ä»¥åœ¨flutterä¸­è°ƒç”¨åŽŸç”Ÿä»£ç , ä¹Ÿå¯ä»¥åœ¨åŽŸç”Ÿä»£ç è°ƒç”¨flutterä»£ç  iosç›®å½•iosç›®å½•, ä¸»è¦ç”¨æ¥å­˜æ”¾, å¼€å‘çš„æ’ä»¶æ‰€éœ€è¦çš„iOSä»£ç  åœ¨iosç›®å½•ä¸­, ios/Classes/DemoPlugin.m, ä¸­å¯ä»¥æ‰¾åˆ°getPlatformVersionå¯¹åº”çš„åŽŸç”Ÿä»£ç , ä»£ç å¦‚ä¸‹: 1234567891011121314151617181920#import &quot;DemoPlugin.h&quot;@implementation DemoPlugin+ (void)registerWithRegistrar:(NSObject&lt;FlutterPluginRegistrar&gt;*)registrar &#123; FlutterMethodChannel* channel = [FlutterMethodChannel methodChannelWithName:@&quot;demo&quot; binaryMessenger:[registrar messenger]]; DemoPlugin* instance = [[DemoPlugin alloc] init]; [registrar addMethodCallDelegate:instance channel:channel];&#125;- (void)handleMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result &#123; if ([@&quot;getPlatformVersion&quot; isEqualToString:call.method]) &#123; result([@&quot;iOS &quot; stringByAppendingString:[[UIDevice currentDevice] systemVersion]]); &#125; else &#123; result(FlutterMethodNotImplemented); &#125;&#125;@end androidç›®å½•androidç›®å½•, ä¸»è¦ç”¨æ¥å­˜æ”¾, å¼€å‘çš„æ’ä»¶æ‰€éœ€è¦çš„androidä»£ç  åœ¨androidç›®å½•ä¸­, android/src/main/java/com/example/demo/DemoPlugin.java, ä¸­å¯ä»¥æ‰¾åˆ°getPlatformVersionå¯¹åº”çš„åŽŸç”Ÿä»£ç , ä»£ç å¦‚ä¸‹: 12345678910111213141516171819202122232425package com.example.demo;import io.flutter.plugin.common.MethodCall;import io.flutter.plugin.common.MethodChannel;import io.flutter.plugin.common.MethodChannel.MethodCallHandler;import io.flutter.plugin.common.MethodChannel.Result;import io.flutter.plugin.common.PluginRegistry.Registrar;/** DemoPlugin */public class DemoPlugin implements MethodCallHandler &#123; /** Plugin registration. */ public static void registerWith(Registrar registrar) &#123; final MethodChannel channel = new MethodChannel(registrar.messenger(), "demo"); channel.setMethodCallHandler(new DemoPlugin()); &#125; @Override public void onMethodCall(MethodCall call, Result result) &#123; if (call.method.equals("getPlatformVersion")) &#123; result.success("Android " + android.os.Build.VERSION.RELEASE); &#125; else &#123; result.notImplemented(); &#125; &#125;&#125; åŽŸç”Ÿä»£ç åŽŸç”Ÿä»£ç ä¸­, ä¹Ÿéƒ½åˆ›å»ºä¸€ä¸ªåä¸ºdemoçš„MethodChannelå¯¹è±¡. (ä¸Žlibç›®ä¸­çš„dartä»£ç ä¸­çš„MethodChannelåå­—ä¸€è‡´). é€šè¿‡æ³¨å†Œ, ç›‘å¬è¯¥channelçš„å›žè°ƒ. åœ¨å›žè°ƒä¸­é€šè¿‡åˆ¤æ–­call.methodçš„å€¼, æ¥åŒºåˆ†flutterä¸­è°ƒç”¨çš„å“ªä¸ªæ–¹æ³•. å¦‚ç¤ºä¾‹ä¸­åˆ¤æ–­æ˜¯å¦ç­‰äºŽgetPlatformVersion, å¹¶åœ¨å½“ä¸­æ‰§è¡Œå¯¹åº”çš„åŽŸç”Ÿä»£ç , èŽ·å–è®¾å¤‡ç›¸å…³çš„ç³»ç»Ÿç‰ˆæœ¬. å…¶ä»–å¦å¤–, åœ¨flutterä¸­, å¦‚æžœæƒ³ä½¿ç”¨åŽŸç”Ÿçš„è§†å›¾, éœ€è¦ä½¿ç”¨flutterçš„UiKitViewå’ŒAndroidView.]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter - ç›‘è§†é¡µé¢çš„åˆ‡æ¢(RouteObserver & RouteAware)]]></title>
    <url>%2Fposts%2F97bcffb.html</url>
    <content type="text"><![CDATA[ç»å¸¸æ€§çš„ï¼Œæˆ‘ä»¬éœ€è¦ç›‘è§†é¡µé¢çš„åˆ‡æ¢ï¼Œç”¨ä»¥åœ¨åˆé€‚çš„æ—¶å€™å¯¹æŽ§ä»¶è¿›è¡ŒåŠ¨ç”»æš‚åœæˆ–è€…èµ„æºé‡Šæ”¾ã€‚ ä¸¾ä¸ªæ —å­ï¼šç›¸æœºæ‹ç…§æ˜¯æˆ‘ä»¬éœ€è¦ç»å¸¸ç”¨åˆ°çš„åŠŸèƒ½ï¼Œä½†æ˜¯å½“æˆ‘ä»¬åœ¨åˆ‡æ¢åˆ°ç›¸æœºé…ç½®é¡µé¢æ—¶ï¼Œéœ€è¦æš‚åœå½“å‰ç›¸æœºé¢„è§ˆï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±éœ€è¦ç›‘è§†é¡µé¢çš„è·¯ç”±å˜åŒ–æƒ…å†µï¼Œåˆæˆ–è€…ç”¨æˆ·å›žåˆ°åº”ç”¨æ¡Œé¢ï¼Œæ­¤æ—¶ä¹Ÿéœ€è¦å¯¹ç›¸æœºè¿›è¡Œæš‚åœï¼Œè¿”å›žåˆæ¢å¤ç›¸æœºã€‚ åœ¨è¿™é‡Œä¸»è¦å…³ç³»åˆ°ä¸‹é¢ä¸¤ä¸ªæ–¹é¢çš„ï¼š AppStateLifeRecycle - ä»Šå¤©æˆ‘ä»¬ä¸è¯´è¿™ä¸ªï¼› RouteAware å…ˆçœ‹çœ‹RouteAwareæ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Ÿ 12345678910111213141516171819/// An interface for objects that are aware of their current [Route].////// This is used with [RouteObserver] to make a widget aware of changes to the/// [Navigator]&apos;s session history.abstract class RouteAware &#123; /// Called when the top route has been popped off, and the current route /// shows up. void didPopNext() &#123; &#125; /// Called when the current route has been pushed. void didPush() &#123; &#125; /// Called when the current route has been popped off. void didPop() &#123; &#125; /// Called when a new route has been pushed, and the current route is no /// longer visible. void didPushNext() &#123; &#125;&#125; ä¸Šé¢æäº¤åˆ°4ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«éƒ½æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå‡å¦‚æœ‰3ä¸ªé¡µé¢ï¼Œåˆ†åˆ«æ˜¯Aã€Bã€Cï¼Œè·³è½¬é€»è¾‘ç”±A-&gt;B-&gt;Cï¼Œè€ŒRouteAwareä½¿ç”¨withæ··æ·†åœ¨Bä¸­ã€‚ didPopNextï¼šåœ¨Cé¡µé¢å…³é—­åŽï¼ŒBé¡µé¢è°ƒèµ·è¯¥æ–¹æ³•ï¼› didPush: å½“ç”±Aæ‰“å¼€Bé¡µé¢æ—¶ï¼ŒBé¡µé¢è°ƒèµ·è¯¥æ–¹æ³•ï¼› didPop: å½“Bé¡µé¢å…³é—­æ—¶ï¼ŒBé¡µé¢è°ƒèµ·è¯¥æ–¹æ³•ï¼› didPushNext: å½“ä»ŽBé¡µé¢æ‰“å¼€Cé¡µé¢æ—¶ï¼Œè¯¥æ–¹æ³•è¢«è°ƒèµ·ã€‚ å¦‚ä½•ä½¿ç”¨ï¼Ÿ ä½¿ç”¨withå…³é”®å­—åœ¨Stateç±»ä¸­ä½¿ç”¨ï¼Œä½¿ç”¨å‰åœ¨MaterialAppä¸­å®šä¹‰ä¸€ä¸ªRouteObserverå¯¹è±¡ã€‚å¦‚ä¸‹ï¼š 12345678910final RouteObserver&lt;PageRoute&gt; routeObserver = RouteObserver(); class MyApp extends StatelessWidget &#123; ... \\æ­¤å¤„çœç•¥ä¸€äº›ä»£ç  Widget _buildMaterialApp() =&gt; MaterialApp( initialRoute: &apos;/&apos;, navigatorObservers: [routeObserver], //æ·»åŠ è·¯ç”±è§‚å¯Ÿè€… onGenerateRoute: _onGenerateRoute);&#125; åœ¨Bé¡µé¢ä¸­æ··æ·†RouteAware, å¹¶æ³¨å†ŒRouteObserverå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142class B extends StatefulWidget &#123; B(&#123;Key key&#125;) : super(key: key);&#125; class BState extends State&lt;B&gt; with RouteAware &#123; @override void didChangeDependencies() &#123; routeObserver.subscribe(this, ModalRoute.of(context)); //è®¢é˜… super.didChangeDependencies(); &#125; @override void didPush() &#123; debugPrint(&quot;------&gt; didPush&quot;); super.didPush(); &#125; @override void didPop() &#123; debugPrint(&quot;------&gt; didPop&quot;); super.didPop(); &#125; @override void didPopNext() &#123; debugPrint(&quot;------&gt; didPopNext&quot;); super.didPopNext(); &#125; @override void didPushNext() &#123; debugPrint(&quot;------&gt; didPushNext&quot;); super.didPushNext(); &#125; @override void dispose() &#123; routeObserver.unsubscribe(this); //å–æ¶ˆè®¢é˜… super.dispose(); &#125;&#125; æ€»ç»“ : è·¯ç”±è§‚å¯Ÿè€…æ·»åŠ è®¢é˜…ä¸Žå–æ¶ˆè®¢é˜…å¿…é¡»æˆå¯¹å‡ºçŽ°ï¼› ä¸€äº›å¯¹è±¡åœ¨ä½¿ç”¨åŽä¸€å®šè¦è®°å¾—åŠæ—¶é‡Šæ”¾èµ„æºã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutterBoostæ··åˆå¼€å‘å®žè·µä¸Žæºç è§£æž]]></title>
    <url>%2Fposts%2Fdd9d0434.html</url>
    <content type="text"><![CDATA[1. ç®€ä»‹Flutter Boost æ˜¯é—²é±¼å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ª Flutter æ··åˆå¼€å‘æ¡†æž¶ï¼Œé¡¹ç›®èƒŒæ™¯å¯ä»¥çœ‹çœ‹é—²é±¼çš„è¿™ç¯‡æ–‡ç« ï¼šç ä¸Šç”¨å®ƒå¼€å§‹Flutteræ··åˆå¼€å‘â€”â€”FlutterBoostã€‚ æ–‡ç« ä¸­ä¸»è¦è®²è¿°äº†å¤šå¼•æ“Žå­˜åœ¨ä¸€äº›å®žé™…é—®é¢˜ï¼Œæ‰€ä»¥é—²é±¼ç›®å‰é‡‡ç”¨çš„æ··åˆæ–¹æ¡ˆæ˜¯å…±äº«åŒä¸€ä¸ªå¼•æ“Žçš„æ–¹æ¡ˆã€‚è€Œ Flutter Boost çš„ Feature å¦‚ä¸‹ï¼š å¯å¤ç”¨é€šç”¨åž‹æ··åˆæ–¹æ¡ˆ æ”¯æŒæ›´åŠ å¤æ‚çš„æ··åˆæ¨¡å¼ï¼Œæ¯”å¦‚æ”¯æŒä¸»é¡µTabè¿™ç§æƒ…å†µ æ— ä¾µå…¥æ€§æ–¹æ¡ˆï¼šä¸å†ä¾èµ–ä¿®æ”¹Flutterçš„æ–¹æ¡ˆ æ”¯æŒé€šç”¨é¡µé¢ç”Ÿå‘½å‘¨æœŸ ç»Ÿä¸€æ˜Žç¡®çš„è®¾è®¡æ¦‚å¿µ Flutter Boost é‡‡ç”¨å…±äº«å¼•æ“Žçš„æ¨¡å¼æ¥å®žçŽ°ï¼Œä¸»è¦æ€è·¯æ˜¯ç”± Native å®¹å™¨ Container é€šè¿‡æ¶ˆæ¯é©±åŠ¨ Flutter é¡µé¢å®¹å™¨ Containerï¼Œä»Žè€Œè¾¾åˆ° Native Container ä¸Ž Flutter Container çš„åŒæ­¥ç›®çš„ã€‚ç®€å•çš„ç†è§£ï¼Œé—²é±¼æƒ³åšåˆ°æŠŠ Flutter å®¹å™¨åšæˆæµè§ˆå™¨çš„æ„Ÿè§‰ã€‚å¡«å†™ä¸€ä¸ªé¡µé¢åœ°å€ï¼Œç„¶åŽç”±å®¹å™¨åŽ»ç®¡ç†é¡µé¢çš„ç»˜åˆ¶ã€‚åœ¨ Native ä¾§æˆ‘ä»¬åªéœ€è¦å…³å¿ƒå¦‚æžœåˆå§‹åŒ–å®¹å™¨ï¼Œç„¶åŽè®¾ç½®å®¹å™¨å¯¹åº”çš„é¡µé¢æ ‡å¿—å³å¯ã€‚ é‰´äºŽç½‘ä¸Šæ²¡æœ‰ç›¸å…³çš„æŽ¥å…¥æ–‡æ¡£å’Œä½¿ç”¨æ•™ç¨‹ï¼Œæˆ‘è¿™å‡ å¤©ä¹Ÿæ°å¥½æŠ½ç©ºç ”ç©¶äº†ä¸€ä¸‹ï¼Œé‚æ•´ç†æˆæ–‡ï¼Œä»…ä¾›å‚è€ƒã€‚ç”±äºŽç¯‡å¹…åŽŸå› ï¼Œæœ¬æ–‡åªç ”ç©¶ Android ç«¯çš„æŽ¥å…¥ä¸Žæºç ï¼ŒiOS çš„éƒ¨åˆ†åŽç»­æœ‰æœºä¼šåˆ™è¡¥å……æ–‡ç« æ¥è®²è§£ã€‚ æ³¨ï¼šæœ¬æ–‡æŽ¥å…¥çš„ Flutter Boost ç‰ˆæœ¬ä¸º 1.12.13ï¼Œå¯¹åº”æ”¯æŒçš„ Flutter SDK ç‰ˆæœ¬ä¸º 1.12.13-hotfixesï¼Œæ˜¯ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬ã€‚ä½† Flutter Boost ç‰ˆæœ¬æ›´æ–°ä¹‹åŽï¼ŒæŽ¥å…¥æ–¹å¼å’Œä½¿ç”¨æ–¹å¼å¯èƒ½ä¼šæœ‰ä¸€äº›æ”¹å˜ï¼Œæ•…å‚è€ƒæœ¬æ–‡æ—¶è¯·è®¤å‡† 1.12.13 ç‰ˆæœ¬ã€‚ 2. æŽ¥å…¥2.1 åˆ›å»º Flutter Moduleåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯å·¥ç¨‹ç›®å½•å¦‚ä¸‹ç»“æž„æ‰€ç¤ºï¼š 1234--- flutter_hybrid --- flutter_module --- FlutterHybridAndroid --- FlutterHybridiOS å³ï¼ŒiOS å·¥ç¨‹ä¸Ž Android å·¥ç¨‹ä¸Ž flutter_module ç›®å½•åœ¨åŒä¸€å±‚çº§ã€‚å¦‚æ­¤ï¼Œæ–¹ä¾¿ç®¡ç†ï¼ŒåŒæ—¶ä¹Ÿä¿è¯åŽç»­é›†æˆä»£ç ä¸­è·¯å¾„çš„ä¸€è‡´æ€§ã€‚ æŽ¥ç€ï¼Œæˆ‘ä»¬æ¥åˆ›å»º Flutter Moduleï¼š 12cd flutter_hybridflutter create -t module flutter_module éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœè¦åˆ›å»ºæ”¯æŒ Android X çš„ flutter moduleï¼Œå‘½ä»¤ä¸Šéœ€è¦åŠ ä¸Š --androidx å‚æ•°ï¼Œå³ï¼š 1flutter create --androidx -t module flutter_module æ³¨ï¼šå¦‚æžœå®‰è£…ä¾èµ–è¿‡æ…¢ï¼Œå¯ä»¥åˆ‡æ¢ä¸ºå›½å†…çš„ä¾èµ–é•œåƒæºã€‚ 12export PUB_HOSTED_URL=https://pub.flutter-io.cnexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ–°ç‰ˆçš„ Android Studio æ¥å¯è§†åŒ–åˆ›å»ºä¸€ä¸ª Flutter Module ï¼ˆéœ€ 3.6.1 ä»¥ä¸Šç‰ˆæœ¬ï¼Œå¹¶ç»™ IDE è£…ä¸Š Flutter ä¸Ž Dart æ’ä»¶ï¼‰ï¼Œå…·ä½“æ–¹æ³•å¯ä»¥è§å®˜ç½‘ä»‹ç»ï¼ˆhttps://flutter.dev/docs/development/add-to-app/android/project-setupï¼‰ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚ä½†ä¸ªäººå»ºè®®ä½¿ç”¨æœ¬æ–‡ä»‹ç»çš„æ›´ä¸ºé€šç”¨çš„æ–¹æ³•åŽ»åˆ›å»ºå¹¶é›†æˆ Flutter Moduleã€‚ 2.2 é›†æˆ Flutter Moduleåˆ›å»ºå¥½ Flutter Module ä¹‹åŽï¼Œéœ€è¦åœ¨ Native å·¥ç¨‹ä¸­é›†æˆ flutter_moduleã€‚å…·ä½“æœ‰ä¸¤ç§æ–¹å¼ï¼š æºç ä¾èµ– arr ä¾èµ– 2.2.1 æºç ä¾èµ–é›†æˆæºç ä¾èµ–çš„ä¼˜ç‚¹æ˜¯å¼€å‘ã€è°ƒè¯•æ–¹ä¾¿ï¼Œä¹Ÿå°±æ˜¯åœ¨ Android å·¥ç¨‹çš„ settings.gradle å’Œ app ç›®å½•ä¸‹çš„ build.gradle æ–‡ä»¶ä¸­åŠ å…¥å¯¹ flutter_module çš„ä¾èµ–å³å¯ã€‚ é¦–å…ˆï¼Œåœ¨ settings.gradle æ–‡ä»¶ä¸­ï¼Œå¢žåŠ ä»¥ä¸‹ä»£ç ï¼š 1234567include &apos;:app&apos; // å·²å­˜åœ¨çš„å†…å®¹setBinding(new Binding([gradle: this])) evaluate(new File( settingsDir.parentFile, &apos;flutter_module/.android/include_flutter.groovy&apos; )) setBinding ä¸Ž evaluate å¢žåŠ ä¹‹åŽæˆ‘ä»¬å°±å¯ä»¥åœ¨ app/build.gradle ä¸­å¢žåŠ  :flutter ä¾èµ–ï¼š 12345...dependencies &#123; implementation project(&apos;:flutter&apos;)...&#125; åŒæ—¶ä¹Ÿéœ€è¦åœ¨è¯¥æ–‡ä»¶ä¸­çš„ android() é…ç½®æŒ‡å®šä¸€ä¸‹ç¼–è¯‘æ—¶çš„ Java ç‰ˆæœ¬ä¸º Java 8ï¼Œå¦åˆ™ä¼šæŠ¥é”™ 1234compileOptions &#123; sourceCompatibility 1.8 targetCompatibility 1.8&#125; æœ€åŽæ‰§è¡Œä¸€ä¸‹ gradle sync ä¸‹è½½ä¾èµ–åº“ã€‚å¦‚æžœé›†æˆæˆåŠŸï¼Œä¼šåœ¨å·¦ä¾§çš„é¡¹ç›®ç›®å½•ä¸­çœ‹åˆ°ä¸Žé¡¹ç›®åŒçº§çš„ flutter_module æ–‡ä»¶å¤¹ã€‚ 2.2.2 arr ä¾èµ–é›†æˆå¦‚æžœéœ€è¦ç”¨è¿œç¨‹æ‰“åŒ…ï¼Œè€Œè¿œç¨‹çš„æœºå™¨ä¸Šæ²¡æœ‰ flutter çŽ¯å¢ƒï¼Œå°±å¯ä»¥æŠŠ flutter æ‰“åŒ…æˆ arr æ–‡ä»¶è¿›è¡Œä¾èµ–ã€‚ç”Ÿæˆ aar æ–‡ä»¶ä¹‹åŽå†åœ¨ä¸»å·¥ç¨‹é‡Œå¼•ç”¨ï¼Œflutter aar ä¸­åŒ…å«äº† flutter sdk çš„ä»£ç ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ˜¯ä¸éœ€è¦flutter çŽ¯å¢ƒçš„ï¼Œä¹Ÿé€‚åˆç¬¬ä¸‰æ–¹å¿«é€ŸæŽ¥å…¥ã€‚ 12cd .android/./gradlew flutter:assembleDebug 2.3 æ·»åŠ  Flutter Boost ä¾èµ–é¦–å…ˆåœ¨ Flutter Module é¡¹ç›®ä¸­åŠ å…¥ flutter-boost ä¾èµ–ï¼Œå³åœ¨ pubspec.yaml æ–‡ä»¶ä¸­çš„ dev_dependencies é…ç½®å¢žåŠ  flutter-boost ä¾èµ–ï¼š 12345dev_dependencies: flutter_boost: git: url: 'https://github.com/alibaba/flutter_boost.git' ref: '1.12.13' ä»¥ä¸Š flutter boost æ”¯æŒ AndroidXï¼Œå¦‚æžœæƒ³æ”¯æŒ supportï¼Œåˆ™éœ€è¦åˆ‡æ¢åˆ†æ”¯ï¼š 1234flutter_boost: git: url: 'https://github.com/alibaba/flutter_boost.git' ref: 'task/task_v1.12.13_support_hotfixes' ç¼–è¾‘å®Œä¹‹åŽåœ¨ flutter_module ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–ã€‚ 1flutter packages get ä¹‹åŽåœ¨ Android å·¥ç¨‹ä¸­çš„ app ç›®å½•ä¸‹çš„ build.gradle æ–‡ä»¶ä¸­å¢žåŠ  :flutter_boost ä¾èµ–ï¼Œ 12345dependencies &#123; ... implementation project(&apos;:flutter&apos;) implementation project(&apos;:flutter_boost&apos;)&#125; å› ä¸º Flutter Boost æ˜¯ä»¥ Flutter Plugin çš„å½¢å¼é›†æˆåˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­æ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åšä¸€äº›å·¥ä½œï¼Œé¦–å…ˆåœ¨ app ç›®å½•ä¸‹çš„ build.gradle æ–‡ä»¶çš„å¤´éƒ¨å¢žåŠ ä»¥ä¸‹ä»£ç ï¼š 12345678910111213141516171819202122def localProperties = new Properties()def localPropertiesFile = rootProject.file(&apos;local.properties&apos;)if (localPropertiesFile.exists()) &#123; localPropertiesFile.withReader(&apos;UTF-8&apos;) &#123; reader -&gt; localProperties.load(reader) &#125;&#125;def flutterRoot = localProperties.getProperty(&apos;flutter.sdk&apos;)if (flutterRoot == null) &#123; throw new GradleException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)&#125;def flutterVersionCode = localProperties.getProperty(&apos;flutter.versionCode&apos;)if (flutterVersionCode == null) &#123; flutterVersionCode = &apos;1&apos;&#125;def flutterVersionName = localProperties.getProperty(&apos;flutter.versionName&apos;)if (flutterVersionName == null) &#123; flutterVersionName = &apos;1.0&apos;&#125; è¿™éœ€è¦æˆ‘ä»¬åœ¨ Android å·¥ç¨‹ä¸‹çš„ local.properties æ–‡ä»¶ä¸­æŒ‡å®šä»¥ä¸‹æˆ‘ä»¬æœ¬åœ°çš„ Flutter SDK çš„ä½ç½®ï¼ˆæ²¡æœ‰æ”¹æ–‡ä»¶å°±æ–°å»ºä¸€ä¸ªï¼‰ï¼š 1flutter.sdk = /Users/airing/flutter æœ€åŽå†åœ¨å·¥ç¨‹ç›®å½•ä¸‹çš„ settings.gradle ä¸­å¢žåŠ ä»¥ä¸‹ä»£ç å¼•å…¥ flutter-pluginï¼š 12345678910111213def flutterProjectRoot = rootProject.projectDir.parentFile.toPath()def plugins = new Properties()def pluginsFile = new File(flutterProjectRoot.toFile(), &apos;.flutter-plugins&apos;)if (pluginsFile.exists()) &#123; pluginsFile.withReader(&apos;UTF-8&apos;) &#123; reader -&gt; plugins.load(reader) &#125;&#125;plugins.each &#123; name, path -&gt; def pluginDirectory = flutterProjectRoot.resolve(path).resolve(&apos;android&apos;).toFile() include &quot;:$name&quot; project(&quot;:$name&quot;).projectDir = pluginDirectory&#125; åŒæ ·çš„ï¼Œä¿®æ”¹å®Œ Android å·¥ç¨‹çš„ä¾èµ–ä¹‹åŽï¼Œéœ€è¦ gradle sync ä¸€ä¸‹ã€‚ è‡³æ­¤ï¼ŒFlutter Boost é›†æˆæˆåŠŸã€‚æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ Flutter Boost è¿›è¡Œæ··åˆå¼€å‘ã€‚è€Œæ··åˆå¼€å‘ï¼Œä¸»è¦æ¶‰åŠåˆ°ä¸¤ä¸ªåœºæ™¯ï¼š åœ¨ Native é¡¹ç›®ä¸­åŠ å…¥ Flutter é¡µé¢ï¼Œå³ Add a single Flutter screenã€‚ åœ¨ Native é¡µé¢ä¸­åµŒå…¥ Flutter æ¨¡å—ï¼Œå³ Add a Flutter Fragmentã€‚ è¿™ä¸¤ç§æ–¹å¼åœ¨ Flutter çš„å®˜ç½‘ä¸Šéƒ½æœ‰å®žè·µè®²è§£ï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦çœ‹çœ‹å¦‚æžœä½¿ç”¨ Flutter boost ç©¶ç«Ÿè¦å¦‚ä½•å®žçŽ°çš„ï¼Œå¹¶é¡ºä¾¿æŽ¢ç©¶ä¸€ä¸‹å…¶å®žçŽ°åŽŸç†ã€‚ 3. æ··åˆå¼€å‘1ï¼š Flutter View 3.1 åœ¨ Flutter Module ä¸­ä½¿ç”¨ Flutter Boosté¦–å…ˆå¼•å…¥ä¾èµ– 1import &apos;package:flutter_boost/flutter_boost.dart&apos;; éšåŽåœ¨ main æ–¹æ³•ä¸­è¿è¡Œçš„ rootWidget ä¸­æ³¨å†Œä¸¤ä¸ªæ–°çš„é¡µé¢ï¼Œä»¥ä¾¿ Native å·¥ç¨‹å¯ä»¥è·³è½¬è¿‡æ¥ã€‚ 12345678910111213141516171819202122232425262728293031323334import 'package:flutter/material.dart';import 'package:flutter_boost/flutter_boost.dart';import 'simple_page_widgets.dart';void main() &#123; runApp(MyApp());&#125;class MyApp extends StatefulWidget &#123; @override _MyAppState createState() =&gt; _MyAppState();&#125;class _MyAppState extends State&lt;MyApp&gt; &#123; @override void initState() &#123; super.initState(); FlutterBoost.singleton.registerPageBuilders(&#123; 'first': (pageName, params, _) =&gt; FirstRouteWidget(), 'second': (pageName, params, _) =&gt; SecondRouteWidget(), &#125;); &#125; @override Widget build(BuildContext context) &#123; return MaterialApp( title: 'Flutter Boost example', builder: FlutterBoost.init(), home: Container( color:Colors.white )); &#125;&#125; ä»£ç å¾ˆç®€å•ï¼š åœ¨ initState çš„æ—¶å€™ä½¿ç”¨ FlutterBoost.singleton.registerPageBuilders æ³¨å†Œé¡µé¢ åœ¨ bulider ä¸­åˆå§‹åŒ– FlutterBoostã€‚ 3.2 åœ¨ Android å·¥ç¨‹ä¸­ä½¿ç”¨ Flutter Booståœ¨ Android é¡¹ç›®ä¸­å¢žåŠ ä¸€ä¸ª Flutter é¡µé¢ï¼Œå³æ˜¯æ·»åŠ ä¸€ä¸ª Flutter Activityï¼ˆiOS å³æ˜¯æ·»åŠ ä¸€ä¸ªæ–°çš„ FlutterViewControllerï¼Œè¿™é‡Œä¸å†èŠ±ç¯‡å¹…åŽ»è®²è§£ iOS çš„å®žçŽ°äº†ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±åŽ»é˜…è¯» Flutter Boost çš„ç¤ºä¾‹ä»£ç å’Œæºç ï¼‰ã€‚ è¿™é‡Œæˆ‘ä»¬åœ¨ AndroidManifest.xml çš„ Application é…ç½®ä¸­æ·»åŠ ä¸€ä¸ª Flutter Boost Activityï¼š 12345678&lt;activity android:name="com.idlefish.flutterboost.containers.BoostFlutterActivity" android:theme="@style/Theme.AppCompat" android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density" android:hardwareAccelerated="true" android:windowSoftInputMode="adjustResize" &gt; &lt;meta-data android:name="io.flutter.embedding.android.SplashScreenDrawable" android:resource="@drawable/page_loading"/&gt;&lt;/activity&gt; é™¤æ­¤ä¹‹å¤–è¿˜éœ€è¦åœ¨ AndroidManifest.xml ä¸­æ·»åŠ  flutterEmbedding ç‰ˆæœ¬è®¾ç½®ï¼š 123&lt;meta-data android:name="flutterEmbedding" android:value="2"&gt;&lt;/meta-data&gt; æŽ¥ç€è¦è¿›è¡Œåˆå§‹åŒ– FlutterBoost çš„å·¥ä½œï¼Œå»ºè®®åœ¨ Application çš„ onCreate æ–¹æ³•ä¸­åˆå§‹åŒ–ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class MyApplication extends Application &#123; @Override public void onCreate() &#123; super.onCreate(); INativeRouter router = new INativeRouter() &#123; @Override public void openContainer(Context context, String url, Map&lt;String, Object&gt; urlParams, int requestCode, Map&lt;String, Object&gt; exts) &#123; String assembleUrl=Utils.assembleUrl(url,urlParams); PageRouter.openPageByUrl(context,assembleUrl, urlParams); &#125; &#125;; FlutterBoost.BoostLifecycleListener boostLifecycleListener= new FlutterBoost.BoostLifecycleListener()&#123; @Override public void beforeCreateEngine() &#123; &#125; @Override public void onEngineCreated() &#123; &#125; @Override public void onPluginsRegistered() &#123; &#125; @Override public void onEngineDestroy() &#123; &#125; &#125;; Platform platform = new FlutterBoost .ConfigBuilder(this,router) .isDebug(true) .whenEngineStart(FlutterBoost.ConfigBuilder.ANY_ACTIVITY_CREATED) .renderMode(FlutterView.RenderMode.texture) .lifecycleListener(boostLifecycleListener) .build(); FlutterBoost.instance().init(platform); &#125;&#125; FlutterBoost åœ¨ Android å·¥ç¨‹ä¸­åˆå§‹åŒ–éœ€è¦è¿›è¡Œ 4 æ­¥å·¥ä½œï¼š æ³¨å†Œè·¯ç”±è·³è½¬æ–¹æ³•ï¼ˆåŽç»­ä¼šè¯´ PageRouter çš„å®žçŽ°ï¼‰ å¢žåŠ  flutter boost çš„ç”Ÿå‘½å‘¨æœŸç›‘å¬å‡½æ•°ï¼Œå¯ä»¥åœ¨ Flutter Engine åˆ›å»ºä¹‹å‰ã€åˆ›å»ºä¹‹åŽã€é”€æ¯ä¹‹åŽä¸Ž Flutter Plugin æ³¨å†Œä¹‹åŽå›žè°ƒäº‹ä»¶ã€‚ å£°æ˜Ž Flutter boost é…ç½®ï¼ŒæŠŠè·¯ç”±å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°é…ç½®ä¸Šã€‚ åˆå§‹åŒ– Flutter boostã€‚ æŽ¥ç€è¦åœ¨ Android å·¥ç¨‹ä¸­å®žçŽ°ä¸€ä¸ªé¡µé¢è·¯ç”±çš„å·¥å…·ç±» PageRouterï¼Œè¿™é‡Œç›´æŽ¥æ‘†ä¸Š Flutter Boost ç¤ºä¾‹ä»£ç ä¸­çš„å®žçŽ°äº†ï¼Œæ¯”è¾ƒå…¨é¢ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public class PageRouter &#123; public final static Map&lt;String, String&gt; pageName = new HashMap&lt;String, String&gt;() &#123;&#123; put("first", "first"); put("second", "second"); put("tab", "tab"); put("sample://flutterPage", "flutterPage"); &#125;&#125;; public static final String NATIVE_PAGE_URL = "sample://nativePage"; public static final String FLUTTER_PAGE_URL = "sample://flutterPage"; public static final String FLUTTER_FRAGMENT_PAGE_URL = "sample://flutterFragmentPage"; public static boolean openPageByUrl(Context context, String url, Map params) &#123; return openPageByUrl(context, url, params, 0); &#125; public static boolean openPageByUrl(Context context, String url, Map params, int requestCode) &#123; String path = url.split("\\?")[0]; Log.i("openPageByUrl",path); try &#123; if (pageName.containsKey(path)) &#123; Intent intent = BoostFlutterActivity.withNewEngine().url(pageName.get(path)).params(params) .backgroundMode(BoostFlutterActivity.BackgroundMode.opaque).build(context); if(context instanceof Activity)&#123; Activity activity=(Activity)context; activity.startActivityForResult(intent,requestCode); &#125;else&#123; context.startActivity(intent); &#125; return true; &#125; else if (url.startsWith(FLUTTER_FRAGMENT_PAGE_URL)) &#123; context.startActivity(new Intent(context, FlutterFragmentPageActivity.class)); return true; &#125; else if (url.startsWith(NATIVE_PAGE_URL)) &#123; context.startActivity(new Intent(context, NativePageActivity.class)); return true; &#125; return false; &#125; catch (Throwable t) &#123; return false; &#125; &#125;&#125; 3.3 åœ¨ Native é¡¹ç›®ä¸­æ‰“å¼€ Flutter é¡µé¢è°ƒç”¨æ¯”è¾ƒç®€å•ï¼Œåœ¨ Native é¡µé¢ä¸Šçš„æŒ‰é’®ç»‘å®šä¸Š onClick ç›‘å¬æ¥å®žçŽ°ç‚¹å‡»æ‰“å¼€æˆ‘ä»¬æ³¨å†Œçš„ Flutter ä¸­çš„ first é¡µé¢ï¼Œè¿˜å¯ä»¥é¡ºä¾¿ä¼ ä¸Šä¸€ä¸ª map å‚æ•°ï¼š 12345678@Overridepublic void onClick(View v) &#123; Map params = new HashMap(); params.put("test1","v_test1"); params.put("test2","v_test2"); PageRouter.openPageByUrl(this, "first", params);&#125; æˆ‘ä»¬å›žé¡¾ä¸€ä¸‹æˆ‘ä»¬åœ¨ 3.1 ä¸­ Flutter ä¸­æ³¨å†Œé¡µé¢çš„ä»£ç ï¼Œå‘çŽ°æœ‰ä¸€ä¸ª params å‚æ•°ï¼Œæ²¡é”™é‚£å°±æ˜¯ Native æ‰“å¼€ Flutter æ—¶ä¼ è¿‡æ¥çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°å‡ºæ¥æˆ–è€…ä¼ ç»™ widget åšé¢å¤–çš„å¤„ç†ï¼š 12345678FlutterBoost.singleton.registerPageBuilders(&#123; 'first': (pageName, params, _) =&gt; &#123; print("flutterPage params:$params"); return FirstRouteWidget(params:params); &#125;, 'second': (pageName, params, _) =&gt; SecondRouteWidget(),&#125;); 3.4 åœ¨ Flutter é¡µé¢ä¸­æ‰“å¼€ Native é¡µé¢åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜ä¼šé‡åˆ°ä¸€ç§åœºæ™¯ï¼Œåœ¨ Native ä¸­æ‰“å¼€ Flutter é¡µé¢ä¹‹åŽï¼Œæˆ‘ä»¬ Flutter ä¸­çš„ä¸šåŠ¡åˆéœ€è¦å†æ‰“å¼€ä¸€ä¸ªæ–°çš„ Native é¡µé¢ï¼Œé‚£éœ€è¦æ€Žä¹ˆåšï¼Ÿåœ¨ Flutter ä¸­ä½¿ç”¨ FlutterBoost.singleton.open å³å¯ï¼Œå¦‚ä¸‹ï¼š 123456// åŽé¢çš„å‚æ•°ä¼šåœ¨nativeçš„IPlatform.startActivityæ–¹æ³•å›žè°ƒä¸­æ‹¼æŽ¥åˆ°urlçš„queryéƒ¨åˆ†ã€‚// ä¾‹å¦‚ï¼šsample://nativePage?aaa=bbbonTap: () =&gt; FlutterBoost.singleton .open("sample://nativePage", urlParams: &lt;dynamic,dynamic&gt;&#123; "query": &#123;"aaa": "bbb"&#125;&#125;), å½“ç„¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¸å•å•æ”¯æŒæ‰“å¼€ Native é¡µé¢ï¼Œä¹Ÿå¯ä»¥æ‰“å¼€ä¸€ä¸ªæ–°çš„ Flutter é¡µé¢ï¼Œåªéœ€è¦å†™å¥½è·¯ç”±åå°±å¥½ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ æ³¨ï¼šå¾—ç›ŠäºŽ Flutter çš„ JIT ç¼–è¯‘æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ flutter attach å‘½ä»¤æ¥å®žçŽ° hot reload åŠŸèƒ½ï¼Œåœ¨å¼€å‘ Flutter é¡µé¢æ—¶æ— éœ€é‡æ–°ç¼–è¯‘å·¥ç¨‹ã€‚ 4. æ··åˆå¼€å‘2ï¼šFlutter Fragment æˆ‘ä»¬å‡è®¾å·¥ç¨‹ä¸­å­˜åœ¨ä¸€ä¸ª Activityï¼Œé…ç½®å¦‚ä¸‹ï¼š 12345678&lt;activity android:name=".FlutterFragmentPageActivity" android:theme="@style/Theme.AppCompat" android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale|layoutDirection|fontScale|screenLayout|density" android:hardwareAccelerated="true" android:windowSoftInputMode="adjustResize"&gt; &lt;meta-data android:name="io.flutter.embedding.android.SplashScreenDrawable" android:resource="@drawable/page_loading"/&gt;&lt;/activity&gt; è€Œå¯¹åº” layout ä¸­æˆ‘ä»¬è¦åŠ å…¥ä¸€ä¸ª FrameLayout ç»„ä»¶ä½œä¸ºå ä½ç¬¦ï¼š 12345&lt;FrameLayout android:layout_width="match_parent" android:layout_height="0dp" android:layout_weight="1" android:id="@+id/fragment_stub"/&gt; æœ€åŽï¼Œåœ¨ä»£ç ä¸­æ‹¿åˆ°å¯¹åº” url çš„ Flutter widgetï¼Œå¡žåˆ°å ä½ç»„ä»¶é‡Œå³å¯ï¼š 12345678@Overridepublic void onClick(View v) &#123; FlutterFragment mFragment = new FlutterFragment.NewEngineFragmentBuilder().url("flutterFragment").build(); getSupportFragmentManager() .beginTransaction() .replace(R.id.fragment_stub, mFragment) .commit();&#125; 5. Flutter Boost æºç è§£æžæœ¬èŠ‚ä¸»è¦ç®€å•åˆ†æžä¸€ä¸‹ Flutter Boost çš„åŽŸç†ï¼Œåªæœ‰çŸ¥æ ¹çŸ¥åº•æ‰èƒ½ç”¨å¾—å¾—å¿ƒåº”æ‰‹ã€‚ç”±äºŽç¯‡å¹…é—®é¢˜ï¼Œä¸å¯èƒ½å…¨éƒ¨çš„æºç éƒ½åˆ†æžä¸€éï¼Œæœ¬èŠ‚åªåˆ†æžå…·æœ‰ä»£è¡¨æ€§çš„æºç ï¼Œå…¶ä½™çš„åŽŸç†åŸºæœ¬ä¸€è‡´ï¼Œç•™ç»™è¯»è€…è‡ªè¡Œé˜…è¯»ã€‚ é‚£æœ¬èŠ‚å°±ä»Ž Dart ç«¯åˆ‡å…¥ï¼Œå…³æ³¨å…¶ä¸­ä¸¤ä¸ª apiï¼Œä¸€ä¸ªæ˜¯æ³¨å†Œé¡µé¢çš„ registerPageBuildersï¼Œå¦ä¸€ä¸ªæ˜¯æ‰“å¼€é¡µé¢çš„ openï¼Œçœ‹çœ‹ Flutter Boost æ˜¯å¦‚ä½•å®žçŽ°å®ƒä»¬çš„ã€‚ 5.1 æ³¨å†Œé¡µé¢æˆ‘ä»¬åœ¨ä½¿ç”¨ Flutter Boost çš„æµç¨‹ä¸­ï¼Œç¬¬ä¸€æ­¥æ˜¯è¦åœ¨ Flutter ä¸­æ³¨å†Œé¡µé¢ï¼Œè°ƒç”¨äº† registerPageBuilders å‡½æ•°ï¼Œé‚£æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•å®žçŽ°çš„ã€‚ åœ¨ flutter_boost.dart æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å°±æ‰¾åˆ°äº†è¿™ä¸ªå‡½æ•°çš„å…¥å£ï¼š 1234///Register a map buildersvoid registerPageBuilders(Map&lt;String, PageBuilder&gt; builders) &#123; ContainerCoordinator.singleton.registerPageBuilders(builders);&#125; å®ƒè°ƒç”¨äº† ContainerCoordinator å•ä¾‹çš„ registerPageBuildersï¼Œé‚£æˆ‘ä»¬æŽ¥ç€çœ‹ container_coordinator.dart æ–‡ä»¶ä¸­è¿™ä¸ªå‡½æ•°çš„å®žçŽ°ï¼š 123456789final Map&lt;String, PageBuilder&gt; _pageBuilders = &lt;String, PageBuilder&gt;&#123;&#125;; PageBuilder _defaultPageBuilder;///Register page builder for a key.void registerPageBuilder(String pageName, PageBuilder builder) &#123; if (pageName != null &amp;&amp; builder != null) &#123; _pageBuilders[pageName] = builder; &#125;&#125; å…¶ä¸­ PageBuilder æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å®šä¹‰ï¼Œæ˜¯ä¸€ä¸ª Widgetï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å…¶å®žå°±å°†æˆ‘ä»¬æ³¨å†Œçš„ Widget å¡žåˆ°ä¸€ä¸ª Map é‡Œï¼Œè€Œæˆ‘ä»¬æŒ‡å®šçš„è·¯ç”±åï¼Œå°±æ˜¯å®ƒçš„ keyã€‚é‚£æˆ‘ä»¬æŽ¥ç€è¦å…³æ³¨çš„æ˜¯ _pageBuilders å®šä¹‰å¥½ä¹‹åŽä¼šæ€Žä¹ˆè¢«ä½¿ç”¨ï¼Ÿ 123456789101112131415161718192021222324252627BoostContainerSettings _createContainerSettings( String name, Map params, String pageId) &#123; Widget page; final BoostContainerSettings routeSettings = BoostContainerSettings( uniqueId: pageId, name: name, params: params, builder: (BuildContext ctx) &#123; //Try to build a page using keyed builder. if (_pageBuilders[name] != null) &#123; page = _pageBuilders[name](name, params, pageId); &#125; //Build a page using default builder. if (page == null &amp;&amp; _defaultPageBuilder != null) &#123; page = _defaultPageBuilder(name, params, pageId); &#125; assert(page != null); Logger.log('build widget:$page for page:$name($pageId)'); return page; &#125;); return routeSettings; &#125; å¯ä»¥å‘çŽ°ï¼Œå®ƒåœ¨ _createContainerSettings ä¸­ build widget ä¹‹åŽè¿”å›žä¸€ä¸ª routeSettingï¼Œè¯¥å˜é‡åœ¨ _nativeContainerWillShow ä¸­è¢« pushContainer è°ƒç”¨ï¼Œè€Œ _nativeContainerWillShow ä¼šåœ¨ _onMethodCall ä¸­è¢«è°ƒç”¨ã€‚ 123456789101112131415161718192021222324bool _nativeContainerWillShow(String name, Map params, String pageId) &#123; if (FlutterBoost.containerManager?.containsContainer(pageId) != true) &#123; FlutterBoost.containerManager ?.pushContainer(_createContainerSettings(name, params, pageId)); &#125; return true; &#125;Future&lt;dynamic&gt; _onMethodCall(MethodCall call) &#123; Logger.log("onMetohdCall $&#123;call.method&#125;"); switch (call.method) &#123; // çœç•¥æ— å…³ä»£ç  case "willShowPageContainer": &#123; String pageName = call.arguments["pageName"]; Map params = call.arguments["params"]; String uniqueId = call.arguments["uniqueId"]; _nativeContainerWillShow(pageName, params, uniqueId); &#125; break; &#125; // çœç•¥æ— å…³ä»£ç &#125; ä»¥ä¸Šä¸¤æ®µä»£ç çš„ä½œç”¨æ˜¯å½“ Dart ç«¯ç›‘å¬åˆ°æ¥è‡ª Native çš„é€šä¿¡ä¹‹åŽï¼Œå¦‚æžœ Native ä¼ é€’äº†ä¸€ä¸ªè¦æ‰“å¼€ä¸€ä¸ªé¡µé¢å®¹å™¨çš„ä¿¡æ¯ï¼ˆwillShowPageContainerï¼‰ä¹‹åŽï¼ŒFlutterBoost çš„å®¹å™¨ç®¡ç†å™¨å°±ä¼šæ ¹æ®ç”¨æˆ·æ³¨å†Œé…ç½®çš„è·¯ç”±é¡µé¢åŽ»æ‰“å¼€ä¸€ä¸ªæ–°çš„å®¹å™¨ã€‚è€Œè¿™é‡Œçš„ pushContainer ä¸»è¦åšä¸€äº›è·¯ç”±ç®¡ç†å’Œç»‘å®šç›‘å¬ç­‰æ“ä½œï¼Œæˆ‘ä»¬å°±ä¸å†ç»†çœ‹è¿™éƒ¨åˆ†çš„é€»è¾‘äº†ï¼Œä¸»è¦è¿˜æ˜¯çœ‹çœ‹ _onMethodCall çš„ Native ä¸Ž Dart çš„äº’ç›¸é€šä¿¡ã€‚ 5.2 é€šä¿¡12345678910ContainerCoordinator(BoostChannel channel) &#123; assert(_instance == null); _instance = this; channel.addEventListener("lifecycle", (String name, Map arguments) =&gt; _onChannelEvent(arguments)); channel.addMethodHandler((MethodCall call) =&gt; _onMethodCall(call)); &#125; Flutter Boost ä¸­è´Ÿè´£é€šä¿¡çš„æ˜¯ BoostChannelï¼Œå®ƒçš„æœ¬è´¨ä¸Šæ˜¯ MethodChannel çš„ä¸€å±‚å°è£…ï¼Œè€Œ MethodChannel æ˜¯ Native ä¸Ž Flutter é€šä¿¡çš„æ–¹æ¡ˆä¹‹ä¸€ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±æŸ¥é˜… MethodChannel ç›¸å…³çš„èµ„æ–™åŠ ä»¥äº†è§£ã€‚ å¯ä»¥é˜…è¯» Flutter å®˜ç½‘å¯¹ MethodChannel çš„ä»‹ç»ï¼šhttps://flutter.dev/docs/development/platform-integration/platform-channels 5.3 æ‰“å¼€é¡µé¢æœ€åŽæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªæ‰“å¼€é¡µé¢çš„å‡½æ•° openï¼Œå®ƒçš„å®žçŽ°åœ¨åº“ä¸­ä¹Ÿå®¹æ˜“æ‰¾åˆ°ï¼š 12345678Future&lt;Map&lt;dynamic, dynamic&gt;&gt; open(String url, &#123;Map&lt;dynamic, dynamic&gt; urlParams, Map&lt;dynamic, dynamic&gt; exts&#125;) &#123; Map&lt;dynamic, dynamic&gt; properties = new Map&lt;dynamic, dynamic&gt;(); properties["url"] = url; properties["urlParams"] = urlParams; properties["exts"] = exts; return channel.invokeMethod&lt;Map&lt;dynamic, dynamic&gt;&gt;('openPage', properties); &#125; å¯ä»¥å‘çŽ°ï¼Œå®ƒçš„å·¥ä½œå…¶å®žå°±æ˜¯åŒ…è£…å¥½å‚æ•°åŽæŠŠ openPage çš„æ¶ˆæ¯å‘é€ç»™ Nativeã€‚é‚£æˆ‘ä»¬å†æ¥çœ‹çœ‹ Native ä¾§æŽ¥å—åˆ°è¿™ä¸ªæ¶ˆæ¯ä¹‹åŽä½œä½•å¤„ç†å§ï¼åœ¨ Android ä¾§çš„ Flutter Boost æºç ä¸­å¯ä»¥æ‰¾åˆ° FlutterBoostPlugin.java è¿™ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ MethodChannel çš„é€»è¾‘æ¥ç›‘å¬ Dart ä¾§çš„æ¶ˆæ¯ï¼š 123456789101112131415161718192021222324252627282930313233class BoostMethodHandler implements MethodChannel.MethodCallHandler &#123; @Override public void onMethodCall(MethodCall methodCall, final MethodChannel.Result result) &#123; FlutterViewContainerManager mManager = (FlutterViewContainerManager) FlutterBoost.instance().containerManager(); switch (methodCall.method) &#123; // çœç•¥æ— å…³çš„åˆ†æ”¯ case "openPage": &#123; try &#123; Map&lt;String, Object&gt; params = methodCall.argument("urlParams"); Map&lt;String, Object&gt; exts = methodCall.argument("exts"); String url = methodCall.argument("url"); mManager.openContainer(url, params, exts, new FlutterViewContainerManager.OnResult() &#123; @Override public void onResult(Map&lt;String, Object&gt; rlt) &#123; if (result != null) &#123; result.success(rlt); &#125; &#125; &#125;); &#125; catch (Throwable t) &#123; result.error("open page error", t.getMessage(), t); &#125; &#125; break; default: &#123; result.notImplemented(); &#125; &#125; &#125; &#125; åœ¨æ”¶åˆ°æ¥è‡ª Dart çš„ openPage æ¶ˆæ¯åŽï¼ŒAndroid ä¾§çš„å®¹å™¨ç®¡ç†å™¨ï¼ˆFlutterViewContainerManangerï¼‰ä¼šæ ¹æ® Dart ä¾§æºå¸¦æ¥çš„é…ç½®æ•°æ®æ‰“å¼€ä¸€ä¸ªå®¹å™¨ï¼Œè€Œè¿™ä¸ª openContainer é€šè¿‡é˜…è¯»æºç ï¼Œå¯ä»¥å‘çŽ°å®ƒæœ€åŽæ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±åœ¨ä¸šåŠ¡ä¾§å®žçŽ°ã€‚å›žçœ‹æˆ‘ä»¬åœ¨ 3.2 èŠ‚ä¸­åœ¨ Android ä¸­åˆå§‹åŒ– Flutter Boost ç¬¬ä¸€æ­¥å·¥ä½œï¼Œåšçš„å°±æ˜¯å®žçŽ°è¿™ä¸ª openContainerï¼Œè€Œå®ƒæœ€åŽäº¤ç”±æˆ‘ä»¬å°è£…çš„ PageRouter å·¥å…·ç±»æ¥å®žçŽ°äº†ï¼Œå³ context.startActivity()ã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬åœ¨ Android å·¥ç¨‹ä¸­é›†æˆäº† Flutter Boost æ¥å®žçŽ° Flutter åœ¨ Android é¡¹ç›®ä¸­çš„æ··åˆå¼€å‘ã€‚æœ¬æ–‡åªæ˜¯åˆæ­¥åˆ†æžäº†ä¸‹ Flutter Boost çš„æºç ï¼ŒåŽç»­æœ‰æœºä¼šä¼šè¡¥ä¸Šè¯¦ç»†çš„åˆ†æžã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutterUnitå¼€æºç¯‡]]></title>
    <url>%2Fposts%2Fd75d6183.html</url>
    <content type="text"><![CDATA[FlutterUnit ä¸‹è½½ä½“éªŒ: FlutterUnit.apk ä¸‹è½½ FlutterUnit macç‰ˆ ä¸‹è½½ Githubä»“åº“åœ°å€ Androidä¸‹è½½é“¾æŽ¥: http://photo.toly1994.com/release/FlutterUnit.apk Macä¸‹è½½é“¾æŽ¥: http://photo.toly1994.com/release$flutter_unit_mac.zip âœ¨ Flutter Unit macç‰ˆæ”¯æŒ å½“å‰Flutter ç‰ˆæœ¬ 12345a1@toly ~ % flutter --versionFlutter 1.17.0 â€¢ channel stable â€¢ https://github.com/flutter/flutter.gitFramework â€¢ revision e6b34c2b5c (5 days ago) â€¢ 2020-05-02 11:39:18 -0700Engine â€¢ revision 540786dd51Tools â€¢ Dart 2.8.1 Flutter Unit å‘¨è¾¹ ðŸ”¥ Flutter Unit æ›´æ–°è®°å½• ä¸€ã€ç»„ä»¶çš„å±•ç¤ºé¡µé¢1. 210+ç»„ä»¶æ”¶å½• Flutteræºç ä¸­çš„å¯ç”¨çš„ç»„ä»¶ä¸€å…±350ä¸ªå·¦å³ï¼Œçº·ç¹å¤æ‚ï¼Œä¹Ÿæ²¡æœ‰æ˜Žç¡®çš„åˆ†ç±»æ ‡å‡†FlutterUnit å¯¹å¤§å¤§å°å°ï¼Œå¸¸ç”¨ä¸å¸¸ç”¨çš„ç»„ä»¶èƒ½æ”¶çš„å°½é‡æ”¶å½•ã€‚å¹¶æ ¹æ®ä¸ªäººæ„Ÿè§‰è¿›è¡Œè¯„æ˜Ÿç›®å‰æ”¶å½•ç»„ä»¶213ä¸ªï¼Œæ¯ä¸ªéƒ½æœ‰è‡³å°‘ä¸€ä¸ªæ¼”ç¤ºå±•çŽ°å’Œä»£ç å±•ç¤ºã€‚ . . . 2. ç»„ä»¶è¯¦æƒ…é¡µ 213ä¸ªç»„ä»¶å…¨éƒ¨éƒ½æœ‰è¯¦æƒ…é¡µã€‚å¯¹äºŽé‡è¦çš„ç»„ä»¶ä¼šè¯¦ç»†å±•çŽ°ä¸€èˆ¬éƒ½ä¼šæœ‰æŸä¸ªæ¼”ç¤ºå¯¹åº”çš„ç»„ä»¶å’Œå±žæ€§,å°½é‡åšåˆ°ç»†è‡´ï¼Œå¦‚æžœæœ‰éœ€è¦è¡¥å……ï¼Œæ¬¢è¿Žè”ç³»æˆ‘ã€‚æœ€é‡è¦çš„æ˜¯: æ‰€æœ‰çš„æ¼”ç¤ºå±•çŽ°éƒ½æ˜¯Flutterçš„ç»„ä»¶å½¢æˆçš„ï¼Œè€Œéžå›¾ç‰‡ï¼Œè¿™å°±æ„å‘³ç€å¯æ“ä½œæ€§æ›´é«˜ã€‚ . . . 3. ç»„ä»¶çš„å¯æ“ä½œæ€§ å¯¹ä¸€äº›æ“ä½œäº¤äº’çš„ç»„ä»¶æˆ–æœ‰å¯æ“ä½œæ€§çš„æŸäº›ç»„ä»¶ï¼Œæä¾›æ“ä½œæ¼”ç¤º . . . 4. ç›¸å…³ç»„ä»¶çš„å…³è”åˆ‡æ¢ ç›¸å…³ç»„ä»¶é€šè¿‡link to å¯ä»¥è¿›è¡Œåˆ‡æ¢, æ»¡è¶³ä½ çš„æŽ¢ç´¢æ¬²ã€‚å¦‚æžœæœ‰çš„å…³è”æœªåŠ å…¥ï¼Œæ¬¢è¿Žè”ç³»æˆ‘ï¼Œå¯¹æˆ‘æ¥è¯´ï¼ŒåŠ ä¸ªæ•°å­—å°±è¡Œäº†ã€‚ . . . 5. ä»£ç çš„æŸ¥çœ‹å’Œåˆ†äº« æ¿€åŠ¨äººå¿ƒçš„æ˜¯ï¼Œä½ å¯ä»¥é€šè¿‡å³ä¾§çš„å›¾æ ‡å±•å¼€/éšè— å®žçŽ°ä¸‹é¢æ•ˆæžœçš„ä»£ç å¹¶ä¸”æ”¯æŒåˆ†äº«ï¼Œå¦‚æžœä½ æƒ³äº²è‡ªä½“éªŒï¼Œsoï¼Œeasy ! è€Œä¸”ä»£ç é«˜äº®æ ·å¼å¯ä»¥è‡ªå®šä¹‰ã€‚ . . . äºŒã€å…¨å±€é…ç½®1. é¢œè‰²ä¸»é¢˜ åªæä¾›å…«ç§é¢œè‰²ï¼Œå¯åœ¨å³æ»‘èœå•é¡µçš„æˆ‘çš„ä¸»é¢˜é…ç½®,å¯ä»¥æ‹“å±• . . . 2.å­—ä½“é…ç½® æ”¯æŒå…¨å±€å­—ä½“è®¾ç½®,å¯ä»¥æ‹“å±• . . . 3.itemæ ·å¼è®¾ç½® æ”¯æŒitemæ ·å¼è®¾ç½®ï¼Œå¯ä»¥æ‹“å±•ï¼Œæ”¯æŒå¾é›†ï¼Œè¯¦è§Flutter Unit 1.0 å¾é›†æ–¹æ¡ˆ . . . 4.ä»£ç é¢æ¿é£Žæ ¼è®¾ç½® æ”¯æŒä»£ç é£Žæ ¼è®¾ç½®ï¼Œå¯ä»¥æ‹“å±•ï¼Œæ”¯æŒå¾é›†ï¼Œè¯¦è§Flutter Unit 1.0 å¾é›†æ–¹æ¡ˆ . . ä¸‰ã€æœç´¢ä¸Žæ”¶è—åŠŸèƒ½1.æœç´¢åŠŸèƒ½ ç”±äºŽFlutterä¸­Widgetæ¯”è¾ƒæ‚ä¹±ï¼Œä¸å¤ªå¥½åˆ†ç±»ï¼Œæ‰€ä»¥æœç´¢æ˜¯éžå¸¸é‡è¦çš„å¦å¤–å¯ä»¥æ ¹æ®æ˜Ÿçº§è¿›è¡Œè¿‡æ»¤ï¼Œæ”¯æŒå¤šé€‰ã€‚ç›®å‰æ­£åœ¨è€ƒè™‘æ ¹æ®åŠŸèƒ½åˆ†ç±»ï¼Œä¹‹åŽä¼šæœ‰æ‰€å®Œå–„ã€‚ . . . 2.æœè—åŠŸèƒ½ æœè—é¡µåšå¾—æ¯”è¾ƒç®€é™‹ï¼ŒåŽé¢æ‰“ç®—åšæ”¶è—å¤¹ï¼Œå¯ä»¥è‡ªå·±åˆ›å»ºçš„é‚£ç§ã€‚ . . . FlutterUnit 1.0ç›®å‰åŸºæœ¬å°±æ˜¯è¿™ä¹ˆå¤šåŠŸèƒ½ï¼Œå¯ä»¥åœ¨Githubä¸­ä¸‹è½½æ‰“åŒ…åŽçš„apkçŽ©çŽ©å¸Œæœ›èƒ½å¯¹ä½ çš„Flutterå­¦ä¹ æœ‰æ‰€å¸®åŠ©ã€‚ 3.å…³äºŽæˆ‘ä¸Žé¡¹ç›® ä¸å¤šè¯´ï¼Œéƒ½åœ¨å›¾é‡Œã€‚ . . . Flutter Unit Bug - Feature 2020-4-16 123fixed &quot; ä¿®æ”¹æ ·å¼æ— æ³•ç‚¹å‡»çš„é—®é¢˜ã€‚fixed &quot; ä¸€äº›å·²çŸ¥æ–‡æ¡ˆçš„é”™è¯¯ã€‚fixed &quot; heroåŠ¨ç”»é—ªçŽ°ä¸åŒæ­¥é—®é¢˜ã€‚ 2020-4-17 123456fixed &quot; è¿›å…¥æ”¶è—é¡µï¼Œå†å›žåˆ°é¦–é¡µï¼Œé¡¶éƒ¨æ˜¾ç¤ºä¸åŒæ­¥çš„é—®é¢˜ã€‚fixed &quot; ä¸»é¡µitemåŒå‡»é»‘å±é—®é¢˜ã€‚feature &quot; æ”¯æŒè¯¦æƒ…é¡µã€ç›¸å…³é“¾æŽ¥çš„æ ˆç®¡ç†ã€‘, &quot; å³: ç‚¹å‡»å¤šä¸ªé“¾æŽ¥ï¼Œä¸ç›´æŽ¥è¿”å›žä¸»é¡µ. 2020-4-18 1234feature &quot; å°å½©è›‹: ã€é•¿æŒ‰ã€‘åº•éƒ¨æ ã€æœ€å·¦ä¾§æŒ‰é’®ã€‘,æ‰“å¼€å·¦è¾¹èœå•æ  &quot; ã€é•¿æŒ‰ã€‘åº•éƒ¨æ ã€æœ€å³ä¾§æŒ‰é’®ã€‘,æ‰“å¼€å³è¾¹èœå•æ fixed &quot; æ”¶è—é›†çš„AppBarèƒŒæ™¯è‰²åŒä¸»é¡µé€‰ä¸­è‰²ã€‚ 2020-4-19 1234optimize &quot; æ·»åŠ æ”¶å½•ã€LayoutBuilderã€‘ç»„ä»¶optimize &quot; æ·»åŠ æ”¶å½•ã€IgnorePointerã€‘ç»„ä»¶optimize &quot; æ·»åŠ æ”¶å½•ã€AbsorbPointerã€‘ç»„ä»¶optimize &quot; æ·»åŠ æ”¶å½•ã€BackdropFilterã€‘ç»„ä»¶ ä½œè€…ï¼šå¼ é£Žæ·ç‰¹çƒˆ é“¾æŽ¥ï¼šhttps://juejin.im/post/5e94e4d3f265da480836b943 è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒï¼Œéžå•†ä¸šè½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[flutter ListViewå–æ¶ˆå¤´éƒ¨ç©ºç™½]]></title>
    <url>%2Fposts%2Fc3648888.html</url>
    <content type="text"><![CDATA[ListViewå¤´éƒ¨æœ‰ä¸€æ®µç©ºç™½åŒºåŸŸï¼Œæ˜¯å› ä¸ºå½“ListViewæ²¡æœ‰å’ŒAppBarä¸€èµ·ä½¿ç”¨æ—¶ï¼Œå¤´éƒ¨ä¼šæœ‰ä¸€ä¸ªpaddingï¼Œä¸ºäº†åŽ»æŽ‰paddingï¼Œå¯ä»¥ä½¿ç”¨MediaQuery.removePadding: 1234567891011121314151617Widget _rubbishList()&#123; return MediaQuery.removePadding( removeTop: true, context: context, child: Container( margin: EdgeInsets.only(left: 20,right: 20), height: ScreenUtil().setHeight(700), child: ListView.builder( itemCount: rubbishList.length, itemBuilder: (context,index)&#123; return _cardItem(index); &#125; ) ) ); &#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå¸¸è§æ•°æ®ç±»åž‹åŠæ•°æ®ç±»åž‹è½¬æ¢]]></title>
    <url>%2Fposts%2F87ca1d5.html</url>
    <content type="text"><![CDATA[ç®€ä»‹æ—¢ç„¶ Dart æ˜¯ä¸€é—¨è¯­è¨€ï¼Œé‚£ä¹ˆå°±å’Œæˆ‘ä»¬æ‰€çŸ¥é“è¯­è¨€ä¸€æ ·ï¼Œæœ‰åŸºæœ¬çš„æ•°æ®ç±»åž‹ä»¥åŠå¸¸è§çš„æµç¨‹å¤„ç†è¯­æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥äº†è§£ä¸‹ã€‚ Dart çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯å¯¹è±¡ï¼ŒåŒ…æ‹¬æ•°å­—ï¼Œå‡½æ•°ç­‰ã€‚å®ƒä»¬éƒ½ç»§æ‰¿è‡ª Object ï¼Œé»˜è®¤æ˜¯éƒ½æ˜¯ nullï¼ˆåŒ…æ‹¬æ•°å­—ï¼‰ï¼Œæ‰€ä»¥æ•°å­—ï¼Œå­—ç¬¦ä¸²éƒ½å¯ä»¥è°ƒç”¨å„ç§æ–¹æ³•ã€‚ å¸¸äº®ä¸Žå˜é‡å˜é‡ä½¿ç”¨ var å£°æ˜Žå˜é‡ï¼Œå¯èµ‹äºˆä¸åŒç±»åž‹çš„å€¼ï¼›æœªåˆå§‹åŒ–æ—¶ï¼Œé»˜è®¤å€¼ä¸º null ï¼›ä½¿ç”¨ final å£°æ˜Žä¸€ä¸ªåªèƒ½èµ‹å€¼ä¸€æ¬¡çš„å˜é‡ 12345678910111213141516171819void main()&#123; // å£°æ˜Žä¸€ä¸ªå˜é‡ a var a; print(a); // æ‰“å° a çš„å€¼ï¼Œæ˜¾ç¤ºä¸º null a = 10; print(a); // æ‰“å°å‡ºæ¥çš„ç»“æžœä¸º 10 a = "æµ‹è¯•å­—ç¬¦ä¸²"; print(a); // æ‰“å°å‡ºæ¥çš„ç»“æžœä¸º æµ‹è¯•å­—ç¬¦ä¸² a = 30; print(a); // æ‰“å°å‡ºæ¥çš„ç»“æžœä¸º 30 final b = 10; b = 20; // è¿™ä¸ªä¼šæŠ¥é”™ï¼Œæœ‰æç¤ºï¼š [dart] 'b', a final variable, can only be set once. &#125; å¸¸é‡åœ¨ dart ä¸­ä½¿ç”¨ const å£°æ˜Žå¸¸é‡ï¼›ä½¿ç”¨ const å£°æ˜Žçš„å¿…é¡»æ˜¯ç¼–è¯‘æœŸå¸¸é‡ã€‚ 1234void main()&#123; const a = 10; a = 20; // è¿™é‡Œä¹Ÿä¼šæŠ¥é”™ï¼š[dart] Constant variables can't be assigned a value.&#125; åœ¨ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ° dart çš„ä¸€äº›ç®€å•çš„è¯­æ³•ã€‚å…¶å®žå’Œ js è›®åƒï¼Œå£°æ˜Žçš„å˜é‡çš„æ•°æ®ç±»åž‹æ˜¯éšä¾¿åŽ»æ”¹å˜çš„ï¼Œæ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„æ•°æ®ç±»åž‹ï¼ˆä¾‹å¦‚ï¼šjava è¿™ç§è¯­è¨€ï¼‰ã€‚å…¶æ¬¡å°±æ˜¯ final å’Œ const éƒ½å¯ä»¥å£°æ˜Žå˜é‡ï¼Œå¹¶ä¸”å£°æ˜Žäº†å˜é‡ä¹‹åŽéƒ½ä¸èƒ½ä¿®æ”¹ã€‚ è¿™é‡Œç®€å•çš„è¯´ä¸‹ final ä¸Ž const çš„åŒºåˆ«ï¼š final è¦æ±‚å˜é‡åªèƒ½åˆå§‹åŒ–ä¸€æ¬¡ï¼Œå¹¶ä¸è¦æ±‚èµ‹çš„å€¼ä¸€å®šæ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œå¯ä»¥æ˜¯å¸¸é‡ä¹Ÿå¯ä»¥ä¸æ˜¯ã€‚è€Œ const è¦æ±‚åœ¨å£°æ˜Žæ—¶åˆå§‹åŒ–ï¼Œå¹¶ä¸”èµ‹å€¼å¿…éœ€ä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚ Dartä¸­çš„å†…ç½®ç±»åž‹åœ¨Dart æœ‰å‡ ç§å†…ç½®çš„æ•°æ®ç±»åž‹ï¼šæ•°å€¼åž‹-Numberã€å¸ƒå°”åž‹-booleanã€é”®å€¼å¯¹-Mapã€å­—ç¬¦ä¸²-Stringã€åˆ—è¡¨-Listã€å…¶ä»–ç±»åž‹-Runesã€Symbols æ•°å€¼åž‹Dart ä¸­åªæä¾›äº†ä¸¤ç§ç±»åž‹ï¼š num1ã€æ•´å½¢int2ã€æµ®ç‚¹åž‹double 1234567891011void main()&#123; num a = 10; // æ•´å½¢ a = 20.1; // æµ®ç‚¹åž‹ int i = 10; i = 10.1; // è¿™ä¸ªåœ°æ–¹ä¼šæŠ¥é”™ï¼Œå› ä¸ºå°† int åž‹çš„æ•°æ®æ”¹ä¸º double åž‹ double d = 20.1; d = 20; // è¿™ä¸ªåœ°æ–¹ä¼šæŠ¥é”™ï¼Œå› ä¸ºå°† double åž‹çš„æ•°æ®æ”¹ä¸º int åž‹&#125; ä»Žä¸Šé¢å¯ä»¥çœ‹åˆ°å¦‚æžœæ˜¯ä½¿ç”¨ num å£°æ˜Žçš„å˜é‡ï¼Œå¯ä»¥éšæ„çš„è½¬æ¢ç±»åž‹ï¼Œä½†æ˜¯å¦‚æžœæ˜¯ä½¿ç”¨äº†int æˆ–è€… double æ˜Žç¡®çš„å£°æ˜Žï¼Œé‚£ä¹ˆå°±ä¸èƒ½è½¬æ¢äº† æ•°å€¼åž‹çš„æ“ä½œè¿ç®—ç¬¦ï¼š +ã€ - ã€* ã€/ ã€ ~/ ã€ % å¸¸ç”¨å±žæ€§ï¼š isNaNã€isEvenã€isOdd å¸¸ç”¨æ–¹æ³•ï¼šabs()ã€round()ã€floorl()ã€ceil()ã€toInt()ã€toDouble() 123456789101112// ç”±äºŽå¸¸ç”¨çš„æ–¹æ³•åœ¨å…¶ä»–è¯­è¨€ä¸­éƒ½æœ‰ï¼Œå°±ä¸è¿‡åŽ»çš„èµ˜è¿°ï¼Œä¸‹é¢åˆ—å‡ºä¸€äº›ç‰¹æ®Šçš„void main()&#123; int i = 10; double d = 20.1; print(i/d); // 0.49751243781094523 print(i~/d); // 0 è¿™ä¸ªæ“ä½œæ˜¯å–æ•´ print( i.isOdd ); // åˆ¤æ–­æ˜¯å¥‡æ•° print( i.isEven ); // åˆ¤æ–­æ˜¯å¶æ•°&#125; ä¸€äº›å¸¸è§çš„è½¬æ¢123456789101112131415// String -&gt; intvar one = int.parse('1');assert(one == 1); // String -&gt; doublevar onePointOne = double.parse('1.1');assert(onePointOne == 1.1); // int -&gt; StringString oneAsString = 1.toString();assert(oneAsString == '1'); // double -&gt; StringString piAsString = 3.14159.toStringAsFixed(2);assert(piAsString == '3.14'); å­—ç¬¦ä¸²åœ¨ dart ä¸­å±…ç„¶å¯ä»¥ä½¿ç”¨ å•å¼•å· å’Œ åŒå¼•å·å£°æ˜Žå­—ç¬¦ä¸²ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ã€‚1234void main()&#123; String string = 'å•å¼•å·å£°æ˜Žå­—ç¬¦ä¸²'; String string1 = "åŒå¼•å·å£°æ˜Žå­—ç¬¦ä¸²";&#125; åœ¨ String ä¸­å•ã€åŒå¼•å·äº’ç›¸åµŒå¥—çš„æƒ…å†µ123456789101112void main()&#123; String str = 'å•å¼•å·ä¸­çš„"åŒå¼•å·"'; String str1 = "åŒå¼•å·ä¸­çš„'å•å¼•å·'"; print(str); print(str1); String str2 = 'å•å¼•å·ä¸­çš„ \'å•å¼•å·\' '; String str3 = "åŒå¼•å·ä¸­çš„ \"åŒå¼•å·\" "; print(str2); print(str3);&#125; å­—ç¬¦ä¸²æ‹¼æŽ¥çš„æ–¹å¼ä¸‹é¢åˆ—å‡º dart ä¸­æ‹¼æŽ¥å­—ç¬¦ä¸²çš„å„ç§éªšæ“ä½œï¼ˆé»‘é­”æ³•ï¼‰ã€‚12345678910111213141516171819202122232425262728void main()&#123; // ä½¿ç”¨çš„æ˜¯ç©ºæ ¼æ‹¼æŽ¥ï¼Œå¤šä¸ªç©ºæ ¼ä¹Ÿå¯ä»¥ String str1 = 'å•å¼•å·ç©ºæ ¼å­—ç¬¦ä¸²' 'æ‹¼æŽ¥' '~'; // å•å¼•å·å­—ç¬¦ä¸²ç©ºæ ¼æ‹¼æŽ¥~ // ä½¿ç”¨æ¢è¡Œç¬¦ä»¥åŠç©ºæ ¼ String str2 = 'å•å¼•å·ç¬¦ä¸²' 'æ¢è¡Œäº†' 'å†åŠ ç©ºæ ¼' 'æ‹¼æŽ¥'; // å•å¼•å·ç¬¦ä¸²æ¢è¡Œäº†å†åŠ ç©ºæ ¼æ‹¼æŽ¥ // å•åŒå¼•å· ç©ºæ ¼æ‹¼æŽ¥ String str3 = "å•åŒå¼•å·ç©ºæ ¼å­—ç¬¦ä¸²" 'æ‹¼æŽ¥' "~"; // å•åŒå¼•å·å­—ç¬¦ä¸²ç©ºæ ¼æ‹¼æŽ¥~ // å•åŒå¼•å· æ¢è¡Œç¬¦ä»¥åŠç©ºæ ¼ String str4 = "å•åŒå¼•å·ç¬¦ä¸²" 'æ¢è¡Œäº†' 'å†åŠ ç©ºæ ¼' 'æ‹¼æŽ¥'; // å•åŒå¼•å·ç¬¦ä¸²æ¢è¡Œäº†å†åŠ ç©ºæ ¼æ‹¼æŽ¥ String str5 = ''' ä½¿ç”¨3ä¸ªå•å¼•å·ã€ çœ‹åˆ°æˆ‘ä½¿ç”¨äº†ä¹ˆ '''; String str6 = """ ä½¿ç”¨3ä¸ªåŒå¼•å·ã€ çœ‹åˆ°æˆ‘ä½¿ç”¨äº†ä¹ˆ """; String str7 = "ç®—äº†ï¼Œè¿˜æ˜¯æ­£å¸¸ä¸€ç‚¹" + "ï¼Œä½¿ç”¨ + æ¥æ‹¼æŽ¥";&#125; ä»Žä¸Šé¢å¯ä»¥çœ‹åˆ° dart ä¸­å¯ä»¥ä½¿ç”¨ç©ºæ ¼æ¥åšä¸ºæ‹¼æŽ¥ã€‚æ‰€ä»¥æˆ‘ä»¬ç»§ç»­ç ”ç©¶ä¸‹ã€‚123456789101112131415161718192021222324void main()&#123; // æ‹¼æŽ¥å­—ç¬¦ä¸²ï¼Œ è¾“å‡ºï¼šå•å¼•å·ç©ºæ ¼ æˆ–è€… åŒå¼•å·ç©ºæ ¼ String blockStr = 'å•å¼•å·''ç©ºæ ¼'; String blockStr1 = 'å•å¼•å·' 'ç©ºæ ¼'; String blockStr2 = "åŒå¼•å·""ç©ºæ ¼"; String blockStr3 = "åŒå¼•å·" "ç©ºæ ¼"; // ä¸‹é¢è¿™ä¸¤ç§æƒ…å†µä¼šæŠ¥é”™ // String blockStr4 = 'å•å¼•å·''''ç©ºæ ¼'; // String blockStr5 = "åŒå¼•å·""""ç©ºæ ¼"; // æµ‹è¯•ä¸­é—´æ·»åŠ å­—ç¬¦ String blockStr6 = 'å•å¼•å·''_''ç©ºæ ¼'; // è¾“å‡ºï¼šå•å¼•å·_ç©ºæ ¼ String blockStr7 = "åŒå¼•å·""#""ç©ºæ ¼"; // æ³¨æ„ä¸èƒ½ä½¿ç”¨ $ï¼Œ$ä¼šæŠ¥é”™, è¾“å‡ºï¼šå•å¼•å·#ç©ºæ ¼ // å•åŒå¼•å·æ··åˆä½¿ç”¨ String blockStr8 = 'å•""""å¼•å·'; // è¾“å‡ºï¼šå•""""å¼•å· String blockStr9 = 'å•""_""å¼•å·'; // è¾“å‡ºï¼šå•""_""å¼•å· // å•åŒå¼•å·æ··åˆä½¿ç”¨ String blockStr10 = "åŒ''''å¼•å·"; // è¾“å‡ºï¼šåŒ''''å¼•å· String blockStr11 = "åŒ''_''å¼•å·"; // è¾“å‡ºï¼šåŒ''_''å¼•å·&#125; ${è¡¨è¾¾å¼}çš„ä½¿ç”¨ç±»ä¼¼äºŽJSä¸­ ES6 ä¸Šé¢çš„è¡¨è¾¾å¼çš„ä½¿ç”¨ï¼Œæ„Ÿè§‰æ˜¯ç›¸é€šçš„ã€‚ 12345678void main()&#123; var flag = false; var str = "æµ‹è¯•å­—ç¬¦ä¸²"; print("æˆ‘ä»¬æ¥éªŒè¯å­—ç¬¦ä¸²ï¼š$&#123;str&#125;" "ç„¶åŽçœ‹çœ‹æˆ‘ä»¬çš„ flagï¼š$&#123;flag&#125;"); // æœ€åŽè¾“å‡ºçš„ç»“æžœä¸ºï¼šæˆ‘ä»¬æ¥éªŒè¯å­—ç¬¦ä¸²ï¼šæµ‹è¯•å­—ç¬¦ä¸²ç„¶åŽçœ‹çœ‹æˆ‘ä»¬çš„ flagï¼šfalse&#125; å¸ƒå°”å€¼assert æ˜¯è¯­è¨€å†…ç½®çš„æ–­è¨€å‡½æ•°ï¼Œä»…åœ¨æ£€æŸ¥æ¨¡å¼ä¸‹æœ‰æ•ˆåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œ é™¤éžæ¡ä»¶ä¸ºçœŸï¼Œå¦åˆ™ä¼šå¼•å‘å¼‚å¸¸ã€‚(æ–­è¨€å¤±è´¥åˆ™ç¨‹åºç«‹åˆ»ç»ˆæ­¢)ã€‚ 123456789101112131415// æ£€æŸ¥æ˜¯å¦ä¸ºç©ºvar fullName = '';assert(fullName.isEmpty); // ä¸º0æ£€æŸ¥var hitPoints = 0;assert(hitPoints &lt;= 0); // æ£€æŸ¥æ˜¯å¦ä¸º null.var unicorn;assert(unicorn == null); // æ£€æŸ¥æ˜¯å¦ä¸º NaN.var iMeantToDoThis = 0 / 0;assert(iMeantToDoThis.isNaN); Liståˆ—è¡¨å®žä¾‹åŒ– List çš„æ–¹æ³•å¦‚ä¸‹123456789101112void main()&#123; // ä½¿ç”¨æž„é€ åˆ›å»º var list = new List(); //åˆ›å»ºä¸€ä¸ªintç±»åž‹çš„list List intlist = [1, 2, 3]; // åˆ›å»ºä¸€ä¸ªå¸¸é‡Listï¼Œ ä¸å¯ä»¥æ”¹å˜çš„List List constList = const[10, 7, 23]; &#125; dart ä¸­æ•°ç»„å¸¸ç”¨çš„æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940void main()&#123; // åœ¨æ•°ç»„ä¸­å¯ä»¥å­˜æ”¾å¤šä¸ªä¸åŒç±»åž‹çš„å¯¹è±¡ var list = [1, 2, 3, 'Flutter', true]; print(list); // è¾“å‡ºçš„ç»“æžœï¼š[1, 2, 3, Flutter, true] // ä¿®æ”¹æ•°ç»„ä¸‹æ ‡ä¸º2 çš„å€¼ list[2] = 'Dart'; print(list); // è¾“å‡ºçš„ç»“æžœï¼š[1, 2, Dart, Flutter, true] // èŽ·å–æ•°ç»„çš„é•¿åº¦ print(list.length); // è¾“å‡ºçš„ç»“æžœï¼š5 // å‘æ•°ç»„ä¸­æ·»åŠ å…ƒç´  list.add("value"); print(list); // è¾“å‡ºçš„ç»“æžœï¼š[1, 2, Dart, Flutter, true, value] // å‘æ•°ç»„ä¸­çš„æŒ‡å®šä½ç½®æ·»åŠ å…ƒç´  list.insert(1, 'element'); print(list); // è¾“å‡ºçš„ç»“æžœï¼š[1, element, 2, Dart, Flutter, true, value] // ç§»é™¤æ•°ç»„ä¸­çš„å…ƒç´  list.remove("value"); print(list); // è¾“å‡ºçš„ç»“æžœï¼š[1, element, 2, Dart, Flutter, true] // ç§»é™¤æ•°ç»„ä¸­æŒ‡å®šçš„å…ƒç´  list.removeAt(1); print(list); // è¾“å‡ºçš„ç»“æžœï¼š[1, 2, Dart, Flutter, true] // åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦æœ‰æŸä¸ªå…ƒç´  print(list.indexOf("element")); // è¾“å‡ºç»“æžœï¼š-1 // å¯ä»¥ä½¿ç”¨ sort() å‡½æ•°æ¥æŽ’åº, ä½†æ˜¯ç”±äºŽæˆ‘ä»¬ä½¿ç”¨å®šä¹‰çš„æ•°ç»„ç±»åž‹ä¸ä¸€æ ·ï¼Œå°±ä¸èƒ½ä½¿ç”¨ var intlist = [1, 2, 5, 6 ,3]; // æ ¹æ®è¯­æ³•æç¤ºï¼š List.sort([(int, int) â†’ int compare]) â†’ void intlist.sort( (a, b) =&gt; a.compareTo(b) ); print(intlist); // è¾“å‡ºç»“æžœï¼š[1, 2, 3, 5, 6] &#125; map é›†åˆåˆ›å»º Map é›†åˆ1234567891011void main()&#123; // åˆ›å»ºMap var language = &#123;'fisrt': 'dart', 'second': 'java'&#125;; // åˆ›å»ºä¸å¯å˜çš„ Map var constLanguage = const &#123;'fisrt': 'dart', 'second': 'java'&#125;; // é€šè¿‡æž„é€ å™¨åˆ›å»º var initLanguage = new Map();&#125; Map ä¸­å¸¸ç”¨çš„æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536void main()&#123; // åˆ›å»ºMap var map = &#123;'fisrt': 'dart', 'second': 'java'&#125;; // èŽ·å–é•¿åº¦ print(map.length); // è¾“å‡ºç»“æžœï¼š2 // åˆ¤æ–­æ˜¯å¦ä¸ºç©º print(map.isEmpty); // è¾“å‡ºç»“æžœï¼šfalse print(map.isNotEmpty); // è¾“å‡ºç»“æžœï¼štrue // èŽ·å–åˆ°æ‰€æœ‰çš„ key print(map.keys); // è¾“å‡ºç»“æžœï¼š(fisrt, second) // èŽ·å–åˆ°æ‰€æœ‰çš„ values print(map.values); // è¾“å‡ºç»“æžœï¼š(dart, java) // åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªkey print(map.containsKey("key")); // è¾“å‡ºç»“æžœï¼šfalse // åˆ¤æ–­æ˜¯å¦åŒ…å«æŸä¸ªvalue print(map.containsValue("key")); // è¾“å‡ºç»“æžœï¼šfalse // æ·»åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ è¿›åŽ» map['third'] = 'key'; print(map); // è¾“å‡ºç»“æžœï¼š&#123;fisrt: dart, second: java, third: key&#125; // å¾ªçŽ¯æ‰“å° ä»£ç æç¤ºï¼šMap.forEach((String, String) â†’ void f) â†’ void map.forEach( (key, value) =&gt; getMap(key, value) );&#125; void getMap(key, value)&#123; print("key:$&#123;key&#125;, value:$&#123;value&#125;");&#125; dynamic å…³é”®å­—è¿™ä¸ªå…³é”®å­—å°±ç±»ä¼¼å®šä¹‰æˆ‘ä»¬åœ¨ JS ä¸­å®šä¹‰å˜é‡çš„æƒ…å†µã€‚å…ˆçœ‹ä¸‹é¢çš„ä»£ç  12345678910void main()&#123; // a çš„æ•°æ®ç±»åž‹å¯ä»¥éšæ„æ”¹å˜ï¼Œè¿™ç§ç±»åž‹å°±æ˜¯ dynamic var a ; a = 10; a = "dart"; // è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ dynamic å£°æ˜Ž dynamic d = 10; d = 'dart';&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[flutteræŠ“åŒ…]]></title>
    <url>%2Fposts%2F832de89a.html</url>
    <content type="text"><![CDATA[flutteræŠ“åŒ…æŸ¥çœ‹dioæ–‡æ¡£å‘çŽ°éœ€è¦è®¾ç½®ä»£ç† 12345678(dio.httpClientAdapter as DefaultHttpClientAdapter).onHttpClientCreate = (HttpClient client) &#123; client.findProxy = (uri) &#123; //proxy all request to localhost:8888 return "PROXY 192.168.8.84:8888"; &#125;; // ä½ ä¹Ÿå¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªæ–°çš„HttpClientå®žä¾‹è¿”å›žã€‚ // return new HttpClient(SecurityContext); &#125;;]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå¸¸è§ç¬¬ä¸‰æ–¹æ’ä»¶]]></title>
    <url>%2Fposts%2F9c7b53c1.html</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124# ç½‘ç»œè¯·æ±‚æ¡†æž¶dio: ^3.0.7# spshared_preferences: ^0.5.6# å¾®ä¿¡sdkfluwx: ^1.2.1+1# swiper è½®æ’­æ’ä»¶flutter_swiper: ^1.1.6# ä¸ªæŽ¨ sdkgetuiflut: ^0.1.6# Flutter è°ƒè¯•å·¥å…·flutter_flipperkit: ^0.0.21# flipper sqfliteè°ƒè¯•flipperkit_sqflite_driver: 0.0.2# jsonç”Ÿæˆjson_annotation: ^2.2.0# ä¸‹è½½å™¨flutter_downloader: 1.1.7# èŽ·å–ç³»ç»Ÿè·¯å¾„path_provider: ^1.3.0# ç³»ç»Ÿæƒé™ç®¡ç†permission_handler: ^4.3.0# é€šçŸ¥æƒé™ç®¡ç†notification_permissions: ^0.4.4# webviewflutter_webview_plugin: ^0.3.4# å”¤èµ·å…¶ä»–appurl_launcher: ^5.0.2# growingio ç»Ÿè®¡flutter_growingio_track:path: plugins/flutter_growingio_track-2.6.4# è®¾å¤‡ä¿¡æ¯device_info: ^0.4.0# ç”Ÿæˆuuiduuid: 2.0.2# äº‹ä»¶ä¼ é€’event_bus: ^1.1.0# loading æ ·å¼ç»„ä»¶flutter_spinkit: ^4.0.0# qq sdkflutter_qq: ^0.0.5# ä»£ç åŒ…ä¿¡æ¯package_info: ^0.4.0+6# çŠ¶æ€ç®¡ç†provider: ^3.0.0+1# é€‰æ‹©å™¨flutter_picker: ^1.0.13# å›¾ç‰‡è£å‰ªimage_cropper: ^1.0.2# å›¾ç‰‡é€‰æ‹©image_picker: ^0.6.1+2# è·¯ç”±æ¡†æž¶fluro: ^1.5.1# pdfæµè§ˆå™¨flutter_full_pdf_viewer: ^1.0.4# é¿å…è¾“å…¥æ¡†è¢«é”®ç›˜é®æŒ¡keyboard_avoider: ^0.1.2# å±å¹•é€‚é… https://github.com/OpenFlutter/flutter_screenutilflutter_screenutil: ^1.1.0# Toastæ’ä»¶ https://github.com/OpenFlutter/flutter_oktoastoktoast: ^2.2.0# æ—¥æœŸé€‰æ‹©å™¨flutter_cupertino_date_picker: ^1.0.12# å°çº¢ç‚¹æ’ä»¶ badge https://pub.dev/packages/flutter_badgeflutter_badge: ^0.0.1# è‡ªå®šä¹‰ä¸Šæ‹‰åŠ è½½å’Œä¸‹æ‹‰åˆ·æ–°æ•ˆæžœ flutter_easyrefresh å‰æï¼šå¿…é¡»æ˜¯ä¸€ä¸ªListViewflutter_easyrefresh: ^1.2.7# éŸ³é¢‘æ’­æ”¾æ’ä»¶: https://pub.flutter-io.cn/packages/audioplayersaudioplayers: ^0.13.2# å½•éŸ³: https://pub.flutter-io.cn/packages/audio_recorderaudio_recorder:path: plugins/audio_recorder-1.0.1# ç€‘å¸ƒæµæ’ä»¶ https://github.com/letsar/flutter_staggered_grid_viewflutter_staggered_grid_view: ^0.3.0# å›¾ç‰‡æµè§ˆå™¨: https://pub.flutter-io.cn/packages/photo_viewphoto_view: ^0.9.0# æ•°æ®åŠ è§£å¯†encrypt: 3.3.1# ç½‘ç»œçŠ¶æ€æ’ä»¶connectivity: ^0.4.8+2connectivity: ^0.4.8+2# è…¾è®¯imdim:path: plugins/dim# sqlsqflite: ^1.1.7+1# å¯Œæ–‡æœ¬è¾“å…¥extended_text_field: 0.4.9# å¯Œæ–‡æœ¬å±•ç¤ºextended_text: ^0.6.6# æŒ¯åŠ¨vibration: 1.2.2# å¼¹å‡ºæ°”æ³¡w_popup_menu: ^0.2.5# é«˜å¾·-ä»…åœ°å›¾amap_map_fluttify:path: plugins/amap_map_fluttify-develop3# amap_map_fluttify: 0.18.2+c038d50# é«˜å¾·-ä»…å®šä½amap_location_fluttify: 0.8.11+481e45c# å›¾ç‰‡ç¼“å­˜cached_network_image: 2.0.0-rc.1# iOS å†…è´­flutter_inapp_purchase: ^2.1.0# èŽ·å–è®¾å¤‡id: https://pub.flutter-io.cn/packages/unique_idsunique_ids: 1.0.10# èŽ·å–è®¾å¤‡user_agentflutter_user_agent:path: plugins/flutter_user_agent-1.2.1# é¢œè‰²æ’ä»¶color: 2.1.1# æ¶ˆæ¯ä¸Šä¸‹è½®æ’­(è·‘é©¬ç¯)marquee: 1.3.1# ä¸ºSVGè·¯å¾„å’Œä»£ç ç”Ÿæˆåˆ›å»ºä¸€ä¸ªçº¯Dartè§£æžåº“path_parsing: 0.1.4# å¼‚å¸¸æ•èŽ·åŠæ—¥å¿—æ‰“å°# https://pub.flutter-io.cn/packages/sentrysentry: 3.0.1# åŸºäºŽdioçš„ç½‘ç»œè¯·æ±‚æ—¥å¿—dio_log: ^1.3.3# æ”¯ä»˜ä»£ç æµ‹è¯•iap_pay:git: url: https://gitee.com/Steven_Hu/iap_pay.git ref: master]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[flutterå›½é™…åŒ–æœ¬åœ°åŒ–]]></title>
    <url>%2Fposts%2Fd1969579.html</url>
    <content type="text"><![CDATA[æºç åœ°å€ å®‰è£…ï¼Œé…ç½®å’Œä½¿ç”¨å®‰è£…å°†æ­¤æ·»åŠ åˆ°åŒ…çš„pubspec.yamlæ–‡ä»¶ä¸­ï¼š 12dependencies: flutter_translate: &lt;latest version&gt; ä»Žå‘½ä»¤è¡Œï¼ˆæˆ–ä»Žæ‚¨çš„ç¼–è¾‘å™¨ï¼‰å®‰è£…è½¯ä»¶åŒ…ï¼š 1flutter pub get ç»„æ€å¯¼å…¥flutter_translateï¼š 1å¯¼å…¥ &apos;packageï¼šflutter_translate / flutter_translate.dart&apos; ; å°†jsonæœ¬åœ°åŒ–æ–‡ä»¶æ”¾ç½®åœ¨é¡¹ç›®ä¸­æ‚¨é€‰æ‹©çš„æ–‡ä»¶å¤¹ä¸­ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œflutter_translateå°†assets/i18nåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ç›®å½•ä¸­æœç´¢æœ¬åœ°åŒ–æ–‡ä»¶ã€‚ åœ¨ä¸­å£°æ˜Žæ‚¨çš„èµ„äº§æœ¬åœ°åŒ–ç›®å½• pubspec.yaml 123flutter: assets: - assets/i18n åœ¨ä¸»å‡½æ•°ä¸­ï¼Œåˆ›å»ºæœ¬åœ°åŒ–å§”æ‰˜å¹¶å¯åŠ¨åº”ç”¨ï¼Œç„¶åŽå°†å…¶ä¸ŽLocalizedAppåŒ…è£…åœ¨ä¸€èµ· 12345678void main() async&#123; var delegate = await LocalizationDelegate.create( fallbackLocale: &apos;en_US&apos;, supportedLocales: [&apos;en_US&apos;, &apos;es&apos;, &apos;fa&apos;]); runApp(LocalizedApp(delegate, MyApp()));&#125; å¦‚æžœæœ¬åœ°åŒ–æ–‡ä»¶çš„èµ„äº§ç›®å½•ä¸Žé»˜è®¤ç›®å½•ï¼ˆassets/i18nï¼‰ä¸åŒï¼Œåˆ™éœ€è¦æŒ‡å®šå®ƒï¼š 1234var delegate = await LocalizationDelegate.create( ... basePath: &apos;assets/i18n/&apos; ... ç¤ºä¾‹MyAppï¼š 123456789101112131415161718192021222324 class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; var localizationDelegate = LocalizedApp.of(context).delegate; return LocalizationProvider( state: LocalizationProvider.of(context).state, child: MaterialApp( title: 'Flutter Translate Demo', localizationsDelegates: [ GlobalMaterialLocalizations.delegate, GlobalWidgetsLocalizations.delegate, localizationDelegate ], supportedLocales: localizationDelegate.supportedLocales, locale: localizationDelegate.currentLocale, theme: ThemeData(primarySwatch: Colors.blue), home: MyHomePage(), ), ); &#125;&#125; ç”¨æ³•ç¿»è¯‘ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š 1translate(&apos;your.localization.key&apos;); 1translate(&apos;your.localization.key&apos;, args: &#123;&apos;argName1&apos;: argValue1, &apos;argName2&apos;: argValue2&#125;); è¿›è¡Œå¤šå…ƒç¿»è¯‘ï¼š 1translatePlural(&apos;plural.demo&apos;, yourNumericValue); JSONï¼š 1234567"plural": &#123; "demo": &#123; "0": "Please start pushing the 'plus' button.", "1": "You have pushed the button one time.", "else": "You have pushed the button &#123;&#123;value&#125;&#125; times." &#125;&#125; æ›´æ”¹è¯­è¨€ï¼š 12345678@overrideWidget build(BuildContext context) &#123;... ... changeLocale(context, 'en_US'); ......&#125; è‡ªåŠ¨ä¿å­˜å’Œè¿˜åŽŸæ‰€é€‰çš„è¯­è¨€çŽ¯å¢ƒFlutter Translateå¯ä»¥è‡ªåŠ¨ä¿å­˜é€‰å®šçš„è¯­è¨€çŽ¯å¢ƒï¼Œå¹¶åœ¨åº”ç”¨ç¨‹åºé‡æ–°å¯åŠ¨åŽå°†å…¶è¿˜åŽŸã€‚ è¿™å¯ä»¥é€šè¿‡åœ¨å§”æ‰˜åˆ›å»ºæœŸé—´ä¼ é€’ITranslatePreferencesçš„å®žçŽ°æ¥å®Œæˆï¼š 1234var delegate = await LocalizationDelegate.create( ... preferences: TranslatePreferences() ... ä½¿ç”¨shared_preferencesåŒ…çš„ç¤ºä¾‹å®žçŽ°ï¼š 12345678910111213141516171819202122232425262728import &apos;dart:ui&apos;;import &apos;package:flutter_translate/flutter_translate.dart&apos;;import &apos;package:shared_preferences/shared_preferences.dart&apos;;class TranslatePreferences implements ITranslatePreferences&#123; static const String _selectedLocaleKey = &apos;selected_locale&apos;; @override Future&lt;Locale&gt; getPreferredLocale() async &#123; final preferences = await SharedPreferences.getInstance(); if(!preferences.containsKey(_selectedLocaleKey)) return null; var locale = preferences.getString(_selectedLocaleKey); return localeFromString(locale); &#125; @override Future savePreferredLocale(Locale locale) async &#123; final preferences = await SharedPreferences.getInstance(); await preferences.setString(_selectedLocaleKey, localeToString(locale)); &#125;&#125; å¹¶ä¸”ä¸è¦å¿˜è®°åœ¨pubspec.yamlä¸­å¼•ç”¨shared_preferencesåŒ… 12dependencies: shared_preferences: &lt;latest version&gt; #####]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterçˆ¶å­ç»„ä»¶é€šä¿¡]]></title>
    <url>%2Fposts%2Fa44860d6.html</url>
    <content type="text"><![CDATA[çˆ¶-&gt;å­ å®šä¹‰çˆ¶ç»„ä»¶å˜é‡ dataï¼Œåœ¨å­ç»„ä»¶Childçš„æž„é€ æ–¹æ³•ä¸­æŠŠdataå€¼ä¼ è¿›åŽ»ï¼Œå­ç»„ä»¶æŽ¥æ”¶dataã€‚ çˆ¶-&gt;å­ å­ç»„ä»¶æŽ¥æ”¶callBackå¹¶è°ƒç”¨callBackå°†dataå€¼ä¼ è¿‡åŽ»ã€‚ çˆ¶ç»„ä»¶å®šä¹‰onChangedï¼Œç»‘å®šåˆ°callBackä¸­ï¼ŒæŽ¥æ”¶å­ç»„ä»¶ä¼ è¿‡æ¥çš„dataå€¼ã€‚ 123456789101112131415161718192021222324252627282930class ParentState extends State&lt;Parent&gt; &#123; String data = "çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼"; void onChanged(val)&#123; setState(() &#123; data = val; &#125;); &#125; @override Widget build(BuildContext context) &#123; ...... //çœç•¥éžå…³é”®ä»£ç  new Child(data: data,callBack: (value)=&gt;onChanged(value)), &#125;&#125;class child extends StatefulWidget &#123; childTwo(&#123;Key key, this.data, this.callBack&#125;) : super(key: key); final callBack; String data; @override void initState() &#123; data = widget.data; super.initState(); &#125; ...... //çœç•¥éžå…³é”®ä»£ç  widget.callBack(data);&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterè‡ªå®šä¹‰è½®æ’­å›¾Banner]]></title>
    <url>%2Fposts%2F2f3abe95.html</url>
    <content type="text"><![CDATA[widget_banner.dart123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185import 'dart:async';import 'package:ajbaby/enum/enum_indicator_style.dart';import 'package:ajbaby/route_manager.dart';import 'package:flutter/material.dart';import 'package:flutter_screenutil/flutter_screenutil.dart';/* * è‡ªå®šä¹‰banner */// ignore: must_be_immutableclass CustomBanner extends StatefulWidget &#123; List&lt;String&gt; images; double height; ValueChanged&lt;int&gt; onTap; IndicatorStyle indicatorStyleStr; CustomBanner(&#123; Key key, @required this.images, @required this.indicatorStyleStr, this.height = 375, this.onTap, &#125;) : super(key: key); @override _CustomBannerState createState() =&gt; _CustomBannerState();&#125;class _CustomBannerState extends State&lt;CustomBanner&gt; &#123; PageController _pageController; int _curIndex; Timer _timer; @override void initState() &#123; super.initState(); _curIndex = widget.images.length * 5; _pageController = PageController(initialPage: _curIndex); _initTimer(); &#125; @override void dispose() &#123; // TODO: implement dispose super.dispose();// _cancelTimer(); &#125; @override Widget build(BuildContext context) &#123; return Stack( alignment: Alignment.bottomCenter, children: &lt;Widget&gt;[ _buildPageView(), _buildIndicator(), ], ); &#125; Widget _buildIndicator() &#123; var length = widget.images.length; return Positioned( bottom: 5, child: Row( children: widget.images.map((s) &#123; return Padding(padding: const EdgeInsets.symmetric(horizontal: 3.0), child: _indicatorStyle(s, length)); &#125;).toList(), ), ); &#125; Widget _indicatorStyle(s, length) &#123; switch (widget.indicatorStyleStr) &#123; case IndicatorStyle.circle: return Container( child: ClipOval( child: Container( width: ScreenUtil().setWidth(8), height: ScreenUtil().setHeight(8), color: s == widget.images[_curIndex % length] ? Color(0xFFFF5F6D) : Color(0xFFE0E0E0), ), )); break; case IndicatorStyle.line: return Container( child: ClipRRect( borderRadius: BorderRadius.circular(10.0), child: Container( width: ScreenUtil().setWidth(20), height: ScreenUtil().setHeight(3), color: s == widget.images[_curIndex % length] ? Color(0xFFFF5F6D) : Color(0xFFE0E0E0), ), )); break; &#125; return null; &#125; Widget _buildPageView() &#123; var length = widget.images.length; return Container( height: ScreenUtil().setHeight(widget.height), child: PageView.builder( controller: _pageController, onPageChanged: (index) &#123; setState(() &#123; _curIndex = index; if (index == 0) &#123; _curIndex = length; _changePage(); &#125; &#125;); &#125;, itemBuilder: (context, index) &#123; return GestureDetector( onPanDown: (details) &#123; _cancelTimer(); &#125;, onTap: () &#123; //å¼¹å‡ºè·¯ç”±ï¼Œè·³è½¬åˆ°å…¶ä»–é¡µé¢ Navigator.of(context).pushNamed(RouteNames.productDetails);// Scaffold.of(context).showSnackBar(// SnackBar(// content: Text('å½“å‰ page ä¸º $&#123;index % length&#125;'),// duration: Duration(milliseconds: 500),// ),// ); &#125;, child: Image.network( widget.images[index % length], fit: BoxFit.cover, ), ); &#125;, ), ); &#125; /// ç‚¹å‡»åˆ°å›¾ç‰‡çš„æ—¶å€™å–æ¶ˆå®šæ—¶ä»»åŠ¡ _cancelTimer() &#123; if (_timer != null) &#123; _timer.cancel(); _timer = null; _initTimer(); &#125; &#125; /// åˆå§‹åŒ–å®šæ—¶ä»»åŠ¡ _initTimer() &#123; if (_timer == null) &#123; _timer = Timer.periodic(Duration(seconds: 3), (t) &#123; _curIndex++; _pageController.animateToPage( _curIndex, duration: Duration(milliseconds: 300), curve: Curves.linear, ); &#125;); &#125; &#125; /// åˆ‡æ¢é¡µé¢ï¼Œå¹¶åˆ·æ–°å°åœ†ç‚¹ _changePage() &#123; Timer(Duration(milliseconds: 350), () &#123; _pageController.jumpToPage(_curIndex); &#125;); &#125;&#125; å¼•ç”¨12345child: CustomBanner( images: _imgData, indicatorStyleStr: IndicatorStyle.line, height: double.infinity,),]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterè‡ªå®šä¹‰TabBar]]></title>
    <url>%2Fposts%2F251aa72f.html</url>
    <content type="text"><![CDATA[custom_tabbar.dart12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182import 'package:ajbaby/res/colors.dart';import 'package:flutter/material.dart';// ignore: must_be_immutableclass CustomTabBar extends StatefulWidget implements PreferredSizeWidget &#123; Color containerBgColor; Color labelColor; Color unselectedLabelColor; Color indicatorColor; TabController tabController; List&lt;Widget&gt; tabsList = new List&lt;Widget&gt;(); List&lt;Widget&gt; tabBarViewsList = new List&lt;Widget&gt;(); // @requiredå£°æ˜Žå¿…ä¼ å‚æ•° CustomTabBar(&#123; Key key, @required this.tabsList, @required this.tabBarViewsList, @required this.tabController, this.containerBgColor = YColors.color_FFFFFF, this.labelColor = YColors.color_FF5F6D, this.unselectedLabelColor = YColors.color_858585, this.indicatorColor = YColors.color_FF5F6D, &#125;) : super(key: key); @override _CustomTabBarState createState() &#123; return _CustomTabBarState(); &#125; @override // TODO: implement preferredSize Size get preferredSize =&gt; null;&#125;class _CustomTabBarState extends State&lt;CustomTabBar&gt; with AutomaticKeepAliveClientMixin &#123; @override void initState() &#123; super.initState(); &#125; @override void dispose() &#123; super.dispose();// widget.tabController.dispose(); &#125; @override Widget build(BuildContext context) &#123; super.build(context); return Scaffold( appBar: PreferredSize( child: Container( color: widget.containerBgColor, child: TabBar( isScrollable: true, controller: widget.tabController, tabs: widget.tabsList, labelColor: widget.labelColor, unselectedLabelColor: widget.unselectedLabelColor, indicatorColor: widget.indicatorColor, ), ), preferredSize: Size.fromHeight(kToolbarHeight)), body: TabBarView( controller: widget.tabController, children: widget.tabBarViewsList, ), ); &#125; @override // TODO: implement wantKeepAlive bool get wantKeepAlive =&gt; true;&#125; å¼•ç”¨12345body: CustomTabBar( tabsList: _tabsList, tabBarViewsList: _tabBarViewsList, tabController: _tabController,),]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterä¸­ç®¡ç†è·¯ç”±æ ˆçš„æ–¹æ³•å’Œåº”ç”¨]]></title>
    <url>%2Fposts%2Fbe45d28e.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡é¦–å…ˆè®²çš„Flutterä¸­çš„è·¯ç”±ï¼Œç„¶åŽä¸»è¦è®²ä¸‹Flutterä¸­æ ˆç®¡ç†çš„å‡ ç§æ–¹æ³•ã€‚ äº†è§£ä¸‹Routeå’ŒNavigator ç®€å•çš„è·¯ç”± å‘½åè·¯ç”± è‡ªå®šä¹‰è·¯ç”± Flutterä¸­ä½¿ç”¨çš„è·¯ç”±åœºæ™¯ Flutterä¸­çš„è·¯ç”±æ ˆç®¡ç† å®žæˆ˜ äº†è§£ä¸‹Routeå’ŒNavigatoråœ¨Flutterä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒå±å¹•æˆ–è€…é¡µé¢ä¹‹é—´è¿›è¡Œåˆ‡æ¢å’Œå‘é€æ•°æ®,è¿™äº›â€œscreensâ€æˆ–è€…â€œpagesâ€è¢«ç§°ä¸ºRoute(è·¯ç”±),æ˜¯ç”±ä¸€ä¸ªNavigatorçš„å°éƒ¨ä»¶è¿›è¡Œç®¡ç†ã€‚ Navigatorå¯ä»¥ç®¡ç†åŒ…å«è‹¥å¹²Routeå¯¹è±¡çš„å †æ ˆï¼Œå¹¶æä¾›äº†ç®¡ç†çš„æ–¹æ³•ï¼Œå¹³å¸¸æˆ‘ä»¬ç»å¸¸ç”¨çš„å°±æ˜¯[Navigator.push]å’Œ[Navigator.pop]ã€‚ å°½ç®¡æˆ‘ä»¬å¯ä»¥è‡ªå·±ç›´æŽ¥åˆ›å»ºä¸€ä¸ªnavigator,ä½†æ˜¯å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªWidgetsAppæˆ–è€…MaterialApp,Flutterä¼šè‡ªåŠ¨é»˜è®¤åˆ›å»ºä¸€ä¸ªNavigatorã€‚ æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æ˜¯ä½¿ç”¨ç”±[WidgetsApp]æˆ–è€…[MaterialApp]æ‰€åˆ›å»ºçš„Navigatorå°±è¡Œäº†ï¼Œç„¶åŽé€šè¿‡è°ƒç”¨[Navigator.of] æ¥æ‹¿åˆ°å½“å‰çš„Navigatorçš„çŠ¶æ€NavigatorState,ç„¶åŽè°ƒç”¨å®ƒçš„popæˆ–è€…pushæ–¹æ³•ã€‚ ç®€å•çš„è·¯ç”±æ¯”å¦‚è¦å¯¼èˆªåˆ°ä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª[MaterialPageRoute]çš„å®žä¾‹ï¼Œç„¶åŽè°ƒç”¨Navigator.of(context).push()æ–¹æ³•å°±å°†æ–°é¡µé¢æ·»åŠ åˆ°å †æ ˆçš„é¡¶éƒ¨ã€‚ è¿”å›žä¸Šä¸€ä¸ªé¡µé¢ï¼Œåˆ™è°ƒç”¨Navigator.pop(context)å°±å¯ä»¥ä»Žå †æ ˆä¸­åˆ é™¤è¿™ä¸ªå±å¹•; 12345Navigator.of(context) .push(new MaterialPageRoute(builder: (context) &#123; return new DetailPage(); &#125;)); Navigator.pop(context); å‘½åè·¯ç”±å¦‚æžœæ¯æ¬¡è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„è·¯ç”±é¡µé¢ï¼Œéƒ½è¦è·Ÿä¸Šé¢ä¸€æ ·çš„å†™æ³•ï¼Œåˆ›å»ºMaterialPageRouteå®žä¾‹ç„¶åŽè°ƒç”¨pushæ–¹æ³•ï¼Œè¿™æ ·çš„è¯å°±å¤ªéº»çƒ¦äº†ã€‚ æ‰€ä»¥ï¼ŒFlutteræä¾›äº†å¦å¤–ä¸€ç§æ–¹å¼æ¥ç®¡ç†è·¯ç”±ï¼Œå¯ä»¥ä½¿ç”¨å‘½åè·¯ç”±ï¼Œç„¶åŽä½¿ç”¨Navigator.pushNamedï¼ˆï¼‰æ–¹æ³•æ¥å¼¹å‡ºè·¯ç”±ã€‚ åˆ›å»ºMaterialAppçš„æ—¶å€™éœ€è¦ä¼ å…¥ä¸€ä¸ªrouteså‚æ•°ï¼Œroutesæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªMap&lt;String,WidgetBuilder&gt;,keyå€¼å¯¹åº”è‡ªå®šä¹‰çš„è·¯å¾„åå­—ï¼Œvalueå€¼ä¼šæ˜ å°„åˆ°å¯¹åº”çš„WidgetBuilder,æˆ‘ä»¬å¯ä»¥åœ¨WidgetBuilderä¸­åˆ›å»ºå¯¹åº”çš„é¡µé¢ã€‚ Navigator.pushNamed()æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼ˆBuildContextï¼ŒString),ç¬¬ä¸€ä¸ªæ˜¯ä¸Šä¸‹æ–‡ï¼Œç¬¬äºŒä¸ªæ˜¯åœ¨è·¯ç”±ä¸­é¢„å®šä¹‰çš„stringã€‚ ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼šå½“pushä¸€ä¸ªä¸å­˜åœ¨çš„è·¯ç”±é¡µé¢çš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œæç¤ºæ“ä½œã€‚å¯ä»¥ä½¿ç”¨UnknownRouteçš„å±žæ€§ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œ å½“pushä¸€ä¸ªä¸å­˜åœ¨çš„è·¯ç”±çš„æ—¶å€™ï¼Œä¼šè·³è½¬åˆ°NotFoundPageçš„é¡µé¢ã€‚ 12345678910111213141516171819202122232425262728293031void main() =&gt; runApp(new MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( routes: &#123; //Map&lt;String, WidgetBuilder&gt; "/splash": (context) =&gt; new SplashPage(), "/login": (context) =&gt; new LoginPage(), "/home": (context) =&gt; new HomePage(), "/detail": (context) =&gt; new DetailPage(), &#125;, onUnknownRoute: (RouteSettings setting) &#123; String name = setting.name; print("onUnknownRoute:$name"); return new MaterialPageRoute(builder: (context) &#123; return new NotFoundPage(); &#125;); &#125;, title: 'Flutter Demo', theme: new ThemeData( primarySwatch: Colors.blue, ), home: new SplashPage(), ); &#125;&#125;//å¼¹å‡ºè·¯ç”±ï¼Œè·³è½¬åˆ°å…¶ä»–é¡µé¢ Navigator.of(context).pushNamed("/detail"); è‡ªå®šä¹‰è·¯ç”±æ¯”å¦‚æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨çš„æ˜¯MaterialPageRouteï¼Œåœ¨é¡µé¢åˆ‡æ¢çš„æ—¶å€™ï¼Œä¼šæœ‰é»˜è®¤çš„è‡ªé€‚åº”å¹³å°çš„è¿‡æ¸¡åŠ¨ç”»ã€‚ å¦‚æžœæƒ³è‡ªå®šä¹‰é¡µé¢çš„è¿›åœºå’Œå‡ºåœºåŠ¨ç”»ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨PageRouteBuilderæ¥åˆ›å»ºè·¯ç”±ã€‚ PageRouteBuilderæ˜¯ä¸»è¦çš„éƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯â€œpageBuilderâ€ï¼Œç”¨æ¥åˆ›å»ºæ‰€è¦è·³è½¬åˆ°çš„é¡µé¢ï¼Œå¦ä¸€ä¸ªæ˜¯â€œtransitionsBuilderâ€ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰çš„è½¬åœºæ•ˆæžœã€‚ 1234567891011PageRouteBuilder(&#123; RouteSettings settings, @required this.pageBuilder,//æž„é€ é¡µé¢ this.transitionsBuilder = _defaultTransitionsBuilder,//åˆ›å»ºè½¬åœºåŠ¨ç”» this.transitionDuration = const Duration(milliseconds: 300),//è½¬åœºåŠ¨ç”»çš„æŒç»­æ—¶é—´ this.opaque = true,//æ˜¯å¦æ˜¯é€æ˜Žçš„ this.barrierDismissible = false,//ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚AlertDialogä¹Ÿæ˜¯åˆ©ç”¨PageRouteBuilderè¿›è¡Œåˆ›å»ºçš„ï¼ŒbarrierDismissibleè‹¥ä¸ºfalseï¼Œç‚¹å‡»å¯¹è¯æ¡†å‘¨å›´ï¼Œå¯¹è¯æ¡†ä¸ä¼šå…³é—­ï¼›è‹¥ä¸ºtrueï¼Œç‚¹å‡»å¯¹è¯æ¡†å‘¨å›´ï¼Œå¯¹è¯æ¡†è‡ªåŠ¨å…³é—­ã€‚ this.barrierColor, this.barrierLabel, this.maintainState = true,&#125; åªä¿®æ”¹å•ç‹¬ä¸€ä¸ªé¡µé¢çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œå¯ä»¥è¿™æ ·æ“ä½œï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼Œ 12345678910111213141516171819//è‡ªå®šä¹‰è·³è½¬åŠ¨ç”»Navigator.push( context, PageRouteBuilder( opaque: false, pageBuilder: (BuildContext context, _, __) &#123; return new HomePage(); &#125;, transitionsBuilder: (___, Animation&lt;double&gt; animation, ____, Widget child) &#123; return FadeTransition( opacity: animation, child: RotationTransition( turns: Tween&lt;double&gt;(begin: 0.5, end: 1.0) .animate(animation), child: child, ), ); &#125;)); Flutterä¸­ä½¿ç”¨çš„è·¯ç”±åœºæ™¯åœ¨Flutterä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨åˆ°è¿™äº›æ–¹æ³•ï¼Œä¾‹å¦‚[showDialog()], [showMenu()], and [showModalBottomSheet()]ç­‰ï¼Œè¿™äº›æ–¹æ³•å…¶å®žæœ¬è´¨ä¸Šæ˜¯åˆ›å»ºäº†ä¸€ä¸ªè·¯ç”±çš„é¡µé¢åŽï¼Œå¹¶è°ƒç”¨Navigatorçš„pushæ–¹æ³•åŽ»pushåˆ°å½“å‰çš„å±å¹•ä¸Šã€‚ showDialog()å…¶å®žæ˜¯è°ƒç”¨äº†showGeneralDialog()ï¼Œæ‰€ä»¥ä¸‹é¢è´´äº†showGeneralDialogçš„æºç ï¼Œå¯ä»¥çœ‹å‡ºï¼Œä¹Ÿæ˜¯åˆ©ç”¨äº†Navigatorçš„pushæ–¹æ³•çš„ã€‚ è¿™é‡Œæ’ä¸€ä¸‹ï¼Œå…³äºŽå¯¹è¯æ¡†çš„ä½¿ç”¨ï¼Œæ¯”å¦‚åˆ—è¡¨å¯¹è¯æ¡†ï¼Œè‡ªå®šä¹‰å¯¹è¯æ¡†çš„ä½¿ç”¨å’Œè¸©å‘ï¼Œå¯ä»¥çœ‹ä¸‹æˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼šFlutterä¹‹Dialogä½¿ç”¨å’Œè¸©å‘ 123456789101112131415161718Future&lt;T&gt; showGeneralDialog&lt;T&gt;(&#123; @required BuildContext context, @required RoutePageBuilder pageBuilder, bool barrierDismissible, String barrierLabel, Color barrierColor, Duration transitionDuration, RouteTransitionsBuilder transitionBuilder,&#125;) &#123; return Navigator.of(context, rootNavigator: true).push&lt;T&gt;(_DialogRoute&lt;T&gt;( pageBuilder: pageBuilder, barrierDismissible: barrierDismissible, barrierLabel: barrierLabel, barrierColor: barrierColor, transitionDuration: transitionDuration, transitionBuilder: transitionBuilder, ));&#125; Flutterä¸­çš„è·¯ç”±æ ˆç®¡ç†ç›¸ä¿¡å¤§å®¶å¯¹æ ˆStackéƒ½æœ‰ä¸€å®šçš„äº†è§£ï¼Œpushæ–¹æ³•æ˜¯å°†å…ƒç´ æ·»åŠ åˆ°å †æ ˆçš„é¡¶éƒ¨ï¼Œpopæ–¹æ³•æ˜¯åˆ é™¤é¡¶éƒ¨å…ƒç´ ã€‚ ä¸‹é¢ç”¨å›¾æ–‡çš„æ–¹å¼æ¥è®²è§£Flutterä¸­å‡ ä¸ªç®¡ç†æ ˆçš„æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«ã€‚ pushï¼ˆï¼‰push()ï¼Œå°±æ˜¯ç›´æŽ¥å°†ä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°å †æ ˆçš„é¡¶éƒ¨ã€‚ è¿™ä¸ªæ–¹æ³•å¾ˆç®€å•ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¼šç»å¸¸ç”¨åˆ°ã€‚æ¯”å¦‚ä»ŽScreen1ä¸­åˆ©ç”¨navigatorçš„pushæ–¹æ³•ï¼Œå°†Screen2çš„è·¯ç”±å¼¹åˆ°å †æ ˆçš„é¡¶éƒ¨ã€‚å †æ ˆçš„æƒ…å†µå¦‚ä¸‹å›¾ï¼š å¯ä»¥åˆ©ç”¨ä¸‹é¢çš„ä¸¤ä¸ªpushæ–¹æ³•ï¼Œå®žçŽ°è¿™ä¸ªç›®çš„ã€‚ 12Navigator.of(context).pushNamed("/111");Navigator.of(context).push(route); pop()pop(), å°±æ˜¯å°†å †æ ˆçš„é¡¶éƒ¨å…ƒç´ è¿›è¡Œåˆ é™¤ï¼Œå›žé€€åˆ°ä¸Šä¸€ä¸ªç•Œé¢ã€‚ æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨Screen2ä¸­åˆ©ç”¨pop()å°†é¡¶éƒ¨çš„Screen2ä»Žå †æ ˆä¸­ç§»é™¤ï¼Œä¹‹åŽçš„å †æ ˆå¦‚ä¸‹å›¾ï¼š 1Navigator.of(context).pop(); æ³¨æ„ï¼š å½“åˆ©ç”¨push()è·³è½¬åˆ°ä¸€ä¸ªä½¿ç”¨Scaffoldçš„é¡µé¢çš„æ—¶å€™ï¼ŒScaffoldä¼šè‡ªåŠ¨åœ¨å…¶AppBarä¸Šæ·»åŠ ä¸€ä¸ªâ€œ åŽé€€ â€æŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®ä¼šè‡ªåŠ¨è°ƒç”¨Navigator.pop()ã€‚ åœ¨Androidä¸­ï¼ŒæŒ‰ä¸‹è®¾å¤‡åŽé€€æŒ‰é’®ä¹Ÿä¼šè‡ªåŠ¨è°ƒç”¨Navigator.pop()ã€‚ pushReplacementNamed()å’ŒpopAndPushNamed()æœ‰ä¸‹é¢çš„è¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬è¿›å…¥åˆ°Screen3é¡µé¢åŽï¼Œè¦è·³è½¬åˆ°Screen4é¡µé¢ï¼Œä¸è¿‡ç‚¹å‡»è¿”å›žæŒ‰é’®ï¼Œå¹¶ä¸æƒ³å›žé€€åˆ°Screen3é¡µé¢ã€‚ä¹Ÿå°±æ˜¯æƒ³å°†Screen4çš„å…ƒç´ æ’å…¥æ ˆé¡¶çš„åŒæ—¶ï¼Œå°†Screen3çš„å…ƒç´ å¤œè¿›è¡Œç§»é™¤ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦ç”¨åˆ°pushReplacementNamed()æˆ–è€…popAndPushNamed(),pushReplacement()éƒ½å¯ä»¥å®žçŽ°è¿™ä¸ªç›®çš„ã€‚ 123Navigator.of(context).pushReplacementNamed('/screen4');Navigator.popAndPushNamed(context, '/screen4');Navigator.of(context).pushReplacement(newRoute); pushNamedAndRemoveUntil()ä¸€èˆ¬ä¼šæœ‰è¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬åœ¨å·²ç»ç™»å½•çš„æƒ…å†µä¸‹ï¼Œåœ¨è®¾ç½®ç•Œé¢ä¼šæœ‰ä¸ªé€€å‡ºç”¨æˆ·ç™»å½•çš„æŒ‰é’®ï¼Œç‚¹å‡»åŽä¼šæ³¨é”€ç”¨æˆ·é€€å‡ºç™»å½•ï¼Œå¹¶ä¸”ä¼šè·³è½¬åˆ°ç™»å½•ç•Œé¢ã€‚é‚£ä¹ˆè·¯ç”±æ ˆçš„å˜åŒ–åº”è¯¥ä¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚æžœåªæ˜¯ç®€å•çš„è¿›è¡Œpushä¸€ä¸ªLoginScreençš„æ“ä½œçš„è¯ï¼Œé‚£ä¹ˆæŒ‰è¿”å›žé”®çš„è¯ï¼Œä¼šå›žåˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼Œè¿™æ ·çš„é€»è¾‘æ˜¯ä¸å¯¹çš„ã€‚ æ‰€ä»¥æˆ‘ä»¬åº”è¯¥åˆ é™¤æŽ‰è·¯ç”±æ ˆä¸­çš„æ‰€æœ‰routeï¼Œç„¶åŽå†å¼¹å‡ºLoginScreenã€‚è¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°pushNamedAndRemoveUntil()æˆ–è€…pushAndRemoveUntil()äº†ã€‚ 12345678typedef RoutePredicate = bool Function(Route&lt;dynamic&gt; route);//ç¬¬ä¸€ä¸ªå‚æ•°contextæ˜¯ä¸Šä¸‹æ–‡çš„contextï¼Œ//ç¬¬äºŒä¸ªå‚æ•°newRouteNameæ˜¯æ–°çš„è·¯ç”±æ‰€å‘½åçš„è·¯å¾„//ç¬¬ä¸‰ä¸ªå‚æ•°predicateï¼Œè¿”å›žå€¼æ˜¯boolç±»åž‹ï¼ŒæŒ‰ç…§æˆ‘çš„ç†è§£ï¼Œå°±æ˜¯ç”¨æ¥åˆ¤æ–­Untilæ‰€ç»“//æŸçš„æ—¶æœºï¼Œå¦‚æžœä¸ºfalseçš„è¯ï¼Œå°±ä¼šä¸€ç›´ç»§ç»­æ‰§è¡ŒRemoveçš„æ“ä½œï¼Œç›´åˆ°ä¸ºtrueçš„æ—¶å€™ï¼Œåœæ­¢Removeæ“ä½œï¼Œç„¶åŽæ‰æ‰§è¡Œpushæ“ä½œã€‚ static Future&lt;T&gt; pushNamedAndRemoveUntil&lt;T extends Object&gt;(BuildContext context, String newRouteName, RoutePredicate predicate) &#123; return Navigator.of(context).pushNamedAndRemoveUntil&lt;T&gt;(newRouteName, predicate); &#125; å¦‚æžœæƒ³åœ¨å¼¹å‡ºæ–°è·¯ç”±ä¹‹å‰ï¼Œåˆ é™¤è·¯ç”±æ ˆä¸­çš„æ‰€æœ‰è·¯ç”±ï¼Œé‚£å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¿™ç§å†™æ³•ï¼Œ(Route route) =&gt; falseï¼Œè¿™æ ·èƒ½ä¿è¯æŠŠä¹‹å‰æ‰€æœ‰çš„è·¯ç”±éƒ½è¿›è¡Œåˆ é™¤ï¼Œç„¶åŽæ‰pushæ–°çš„è·¯ç”±ã€‚ 1Navigator.of(context).pushNamedAndRemoveUntil('/LoginScreen', (Route&lt;dynamic&gt; route) =&gt; false); å¦‚æžœæƒ³åœ¨å¼¹å‡ºæ–°è·¯ç”±ä¹‹å‰ï¼Œåˆ é™¤è·¯ç”±æ ˆä¸­çš„éƒ¨åˆ†è·¯ç”±ã€‚æ¯”å¦‚åªå¼¹å‡ºScreen1è·¯ç”±ä¸Šé¢çš„Screen3å’ŒScreen2ï¼Œç„¶åŽå†pushæ–°çš„Screen4ï¼Œå †æ ˆçš„æƒ…å†µå¦‚ä¸‹å›¾ï¼š åˆ©ç”¨ModalRoute.withName(name)ï¼Œæ¥æ‰§è¡Œåˆ¤æ–­ï¼Œå¯ä»¥çœ‹ä¸‹é¢çš„æºç ï¼Œå½“æ‰€ä¼ çš„nameè·Ÿå †æ ˆä¸­çš„è·¯ç”±æ‰€å®šä¹‰çš„æ—¶å€™ï¼Œä¼šè¿”å›žtrueå€¼ï¼Œä¸åŒ¹é…çš„è¯ï¼Œåˆ™è¿”å›žfalseã€‚ 12345678910Navigator.of(context).pushNamedAndRemoveUntil('/screen4',ModalRoute.withName('/screen1')); //ModalRoute.withNameçš„æºç  static RoutePredicate withName(String name) &#123; return (Route&lt;dynamic&gt; route) &#123; return !route.willHandlePopInternally &amp;&amp; route is ModalRoute &amp;&amp; route.settings.name == name; &#125;; &#125; popUntil()popUntil()æ–¹æ³•çš„è¿‡ç¨‹å…¶å®žè·Ÿä¸Šé¢å·®ä¸å¤šï¼Œå°±æ˜¯æ˜¯å°‘äº†pushä¸€ä¸ªæ–°é¡µé¢çš„æ“ä½œï¼Œåªæ˜¯å•çº¯çš„è¿›è¡Œç§»é™¤è·¯ç”±æ“ä½œã€‚ 12popUntil(RoutePredicate predicate);Navigator.of(context).popUntil(ModalRoute.withName("/XXX")); å®žæˆ˜è¿™é‡Œå†™äº†ä¸€ä¸ªDemoï¼Œå°†ä¸Šé¢çš„å‡ ç§ç®¡ç†æ ˆçš„ç”¨æ³•éƒ½è¿ç”¨äº†ä¸€ä¸‹ã€‚ 1234567891011121314151617181920212223242526class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return new MaterialApp( routes: &#123; //Map&lt;String, WidgetBuilder&gt; "/splash": (context) =&gt; new SplashPage(), "/login": (context) =&gt; new LoginPage(), "/home": (context) =&gt; new HomePage(), "/detail": (context) =&gt; new DetailPage(), &#125;, onUnknownRoute: (RouteSettings setting) &#123; String name = setting.name; print("onUnknownRoute:$name"); return new MaterialPageRoute(builder: (context) &#123; return new NotFoundPage(); &#125;); &#125;, title: 'Flutter Demo', theme: new ThemeData( primarySwatch: Colors.blue, ), home: new SplashPage(), ); &#125;&#125; é¦–å…ˆæ˜¯å®šä¹‰åœ¨MaterialAppä¸­å®šä¹‰å¤šä¸ªè·¯ç”±ï¼ŒDemoä¸­æœ‰å¤šä¸ªè·¯ç”±: SplashPage å¯åŠ¨é¡µé¢ï¼Œè®¾ç½®2ç§’åŽè‡ªåŠ¨è·³è½¬åˆ°LoginPage LoginPage ç™»å½•é¡µé¢ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œæ¨¡ä»¿ç™»å½•æˆåŠŸçš„åŠ¨ä½œå¹¶è·³è½¬åˆ°HomePage HomePage ä¸»é¡µï¼Œæ˜¾ç¤ºä¸€ä¸ªåˆ—è¡¨ï¼Œç‚¹å‡»åˆ—è¡¨é¡¹è·³è½¬åˆ°DetailPage DetailPage è¯¦ç»†ä¿¡æ¯é¡µé¢ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªé€€å‡ºç™»å½•çš„æŒ‰é’® NotFoundPage å½“æ²¡æœ‰è·¯ç”±å¯ä»¥åŒ¹é…çš„æ—¶å€™ï¼Œå¼¹å‡ºè¿™ä¸ªé¡µé¢ ä¸‹é¢ç®€å•è®²ä¸€ä¸‹ä»£ç ï¼š SplashPage-&gt;LoginPage,LoginPage-&gt;HomePageç”¨çš„éƒ½æ˜¯pushReplacementNamed()ã€‚å› ä¸ºè·³åˆ°ç™»å½•ç•Œé¢åŽï¼Œä¸éœ€è¦è¿”å›žåˆ°SplashPageï¼Œæ‰€ä»¥éœ€è¦å°†SplashPageä»Žè·¯ç”±æ ˆä¸­ç§»é™¤ã€‚LoginPage-&gt;HomePageï¼Œä¹Ÿæ˜¯åŒæ ·çš„é“ç†ã€‚ 12Navigator.of(context).pushReplacementNamed("/login");Navigator.of(context).pushReplacementNamed("/home"); HomePage-&gt;DetailPageä½¿ç”¨çš„æ˜¯ç®€å•çš„pushNamed()å°±å¯ä»¥äº†ï¼Œæ²¡å¿…è¦ç§»é™¤HomePageï¼Œå› ä¸ºä»ŽDetailPageç‚¹å‡»è¿”å›žåŽï¼Œéœ€è¦è¿”å›žåˆ°HomePageç•Œé¢ã€‚ 123456//ä¸‹é¢çš„ä¸¤ç§å†™æ³•éƒ½æ˜¯å¯ä»¥çš„Navigator.of(context).pushNamed("/detail");Navigator.of(context) .push(new MaterialPageRoute(builder: (context) &#123; return new DetailPage(); &#125;)); DetailPage-&gt;LoginPageåˆ©ç”¨çš„æ˜¯ä»ŽDetailPageç‚¹å‡»é€€å‡ºç™»å½•æŒ‰é’®ï¼Œä¼šå¼¹å‡ºè·¯ç”±æ ˆä¸­çš„æ‰€æœ‰è·¯ç”±é¡µé¢ï¼Œç„¶åŽå†å°†LoginPageçš„è·¯ç”±æ’å…¥åˆ°æ ˆé¡¶ã€‚è¿™æ ·çš„è¯ï¼Œè·¯ç”±æ ˆä¸­å°±åªå‰©ä¸‹LoginPageäº†ï¼Œè‹¥æ˜¯ç‚¹å‡»è¿”å›žæŒ‰é’®çš„è¯ï¼Œé»˜è®¤å°±ä¼šé€€å‡ºåº”ç”¨ç¨‹åºäº†ï¼Œå› ä¸ºå †æ ˆä¸ºç©ºäº†ã€‚ 1Navigator.of(context).pushNamedAndRemoveUntil("/login", (Route&lt;dynamic&gt; route) =&gt; false);]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterè‡ªå®šä¹‰å¯¼èˆªæ AppBar]]></title>
    <url>%2Fposts%2F16d03859.html</url>
    <content type="text"><![CDATA[è‡ªå®šä¹‰AppBaræºç ä¸­å¯ä»¥çœ‹åˆ°,AppBaråªæ˜¯å®žçŽ°äº† PreferredSizeWidgetæŽ¥å£ 1class AppBar extends StatefulWidget implements PreferredSizeWidget é‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥ä»Žè¿™è¿›è¡Œå…¥æ‰‹ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªå®žçŽ°äº† PreferredSizeWidgetçš„Widgetå…·ä½“ä»£ç å¹¶ä¸å¤šï¼Œæ¯”ä½ æƒ³è±¡çš„ç®€å•ï¼Œç›´æŽ¥ä¸Šä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586import 'package:flutter/material.dart';import 'package:flutter_screenutil/flutter_screenutil.dart';/// è¿™æ˜¯ä¸€ä¸ªå¯ä»¥æŒ‡å®šSafeAreaåŒºåŸŸèƒŒæ™¯è‰²çš„AppBar/// PreferredSizeWidgetæä¾›æŒ‡å®šé«˜åº¦çš„æ–¹æ³•/// å¦‚æžœæ²¡æœ‰çº¦æŸå…¶é«˜åº¦ï¼Œåˆ™ä¼šä½¿ç”¨PreferredSizeWidgetæŒ‡å®šçš„é«˜åº¦// ignore: must_be_immutableclass CustomAppbar extends StatefulWidget implements PreferredSizeWidget &#123; final double contentHeight; //ä»Žå¤–éƒ¨æŒ‡å®šé«˜åº¦ Color navigationBarBackgroundColor; //è®¾ç½®å¯¼èˆªæ èƒŒæ™¯çš„é¢œè‰² Widget leadingWidget; Widget trailingWidget; String title; CustomAppbar(&#123; @required this.leadingWidget, @required this.title, this.contentHeight = 44, this.navigationBarBackgroundColor = Colors.white, this.trailingWidget, &#125;) : super(); @override State&lt;StatefulWidget&gt; createState() &#123; return new _CustomAppbarState(); &#125; @override Size get preferredSize =&gt; new Size.fromHeight(contentHeight);&#125;/// è¿™é‡Œæ²¡æœ‰ç›´æŽ¥ç”¨SafeAreaï¼Œè€Œæ˜¯ç”¨ContaineråŒ…è£…äº†ä¸€å±‚/// å› ä¸ºç›´æŽ¥ç”¨SafeAreaï¼Œä¼šæŠŠé¡¶éƒ¨çš„statusBaråŒºåŸŸç•™å‡ºç©ºç™½/// å¤–å±‚Containerä¼šå¡«å……SafeAreaï¼ŒæŒ‡å®šå¤–å±‚ContainerèƒŒæ™¯è‰²ä¹Ÿä¼šè¦†ç›–åŽŸæ¥SafeAreaçš„é¢œè‰²/// var statusheight = MediaQuery.of(context).padding.top; èŽ·å–çŠ¶æ€æ é«˜åº¦class _CustomAppbarState extends State&lt;CustomAppbar&gt; &#123; @override void initState() &#123; super.initState(); &#125; @override Widget build(BuildContext context) &#123; return new Container( color: widget.navigationBarBackgroundColor, child: new SafeArea( top: true, child: new Container( decoration: new UnderlineTabIndicator( borderSide: BorderSide(width: 1.0, color: Color(0xFFeeeeee)), ), height: widget.contentHeight, child: new Stack( alignment: Alignment.center, children: &lt;Widget&gt;[ Positioned( left: 0, child: new Container( padding: const EdgeInsets.only(left: 5), child: widget.leadingWidget, ), ), new Container( child: new Text( widget.title, style: new TextStyle( fontSize: ScreenUtil().setSp(33, allowFontScalingSelf: true), color: Color(0xFF333333), fontWeight: FontWeight.w600), ), ), Positioned( right: 0, child: new Container( padding: const EdgeInsets.only(right: 5), child: widget.trailingWidget, ), ), ], )), ), ); &#125;&#125; å¼•ç”¨çš„åœ°æ–¹:12345appBar: new CustomAppbar( title: 'æ—¥åŽ†', leadingWidget: leftBarButtonItemWidget(), trailingWidget: rightBarButtonItemsWidget(), ) leftBarButtonItemWidget() rightBarButtonItemsWidget()ä¸¤ä¸ªæ–¹æ³•æ˜¯æˆ‘è‡ªå®šä¹‰çš„å¯¼èˆªæ æŒ‰é’®ï¼Œå®žçŽ°è‡ªå·±éœ€è¦çš„å³å¯ã€‚å€¼å¾—è¯´çš„æ˜¯ï¼Œå¯ä»¥å°†leadingWidgetè®¾ç½®ä¸ºéž@requiredçš„ï¼Œåœ¨è‡ªå®šä¹‰çš„AppBaré‡Œé¢åšå¥½å¤„ç†å³å¯,å¦å¤–åœ¨ä¸Šé¢çš„ä»£ç ä¸­å¹¶æ²¡æœ‰é™åˆ¶å¯¼èˆªæ ä¸Šæ¯ä¸ªWidgetæ‰€å ç”¨çš„æœ€å¤§ç©ºé—´ï¼Œå¦‚æžœä½ çš„å¯¼èˆªæ å­ç»„ä»¶å¯èƒ½å¾ˆå®½ï¼Œæå‰è¿›è¡Œå¦¥å–„å¤„ç†æ˜¯ä¸ªå¥½ä¸»æ„ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[flutterå±å¹•é€‚é…æ–¹æ¡ˆ]]></title>
    <url>%2Fposts%2F1aaabac1.html</url>
    <content type="text"><![CDATA[flutter_ScreenUtil flutter å±å¹•é€‚é…æ–¹æ¡ˆï¼Œè®©ä½ çš„UIåœ¨ä¸åŒå°ºå¯¸çš„å±å¹•ä¸Šéƒ½èƒ½æ˜¾ç¤ºåˆç†çš„å¸ƒå±€! github: https://github.com/OpenFlutter/flutter_screenutil ä½¿ç”¨æ–¹æ³•:å®‰è£…ä¾èµ–ï¼šå®‰è£…ä¹‹å‰è¯·æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ 12345dependencies: flutter: sdk: flutter # æ·»åŠ ä¾èµ– flutter_screenutil: ^1.0.2 åœ¨æ¯ä¸ªä½¿ç”¨çš„åœ°æ–¹å¯¼å…¥åŒ…ï¼š1import &apos;package:flutter_screenutil/flutter_screenutil.dart&apos;; å±žæ€§ å±žæ€§ ç±»åž‹ é»˜è®¤å€¼ æè¿° width double 1080px è®¾è®¡ç¨¿ä¸­è®¾å¤‡çš„å®½åº¦,å•ä½px height double 1920px è®¾è®¡ç¨¿ä¸­è®¾å¤‡çš„é«˜åº¦,å•ä½px allowFontScaling bool false è®¾ç½®å­—ä½“å¤§å°æ˜¯å¦æ ¹æ®ç³»ç»Ÿçš„â€œå­—ä½“å¤§å°â€è¾…åŠ©é€‰é¡¹æ¥è¿›è¡Œç¼©æ”¾ åˆå§‹åŒ–å¹¶è®¾ç½®é€‚é…å°ºå¯¸åŠå­—ä½“å¤§å°æ˜¯å¦æ ¹æ®ç³»ç»Ÿçš„â€œå­—ä½“å¤§å°â€è¾…åŠ©é€‰é¡¹æ¥è¿›è¡Œç¼©æ”¾åœ¨ä½¿ç”¨ä¹‹å‰è¯·è®¾ç½®å¥½è®¾è®¡ç¨¿çš„å®½åº¦å’Œé«˜åº¦ï¼Œä¼ å…¥è®¾è®¡ç¨¿çš„å®½åº¦å’Œé«˜åº¦(å•ä½px)ä¸€å®šåœ¨MaterialAppçš„homeä¸­çš„é¡µé¢è®¾ç½®(å³å…¥å£æ–‡ä»¶ï¼Œåªéœ€è®¾ç½®ä¸€æ¬¡),ä»¥ä¿è¯åœ¨æ¯æ¬¡ä½¿ç”¨ä¹‹å‰è®¾ç½®å¥½äº†é€‚é…å°ºå¯¸: 12345678910//å¡«å…¥è®¾è®¡ç¨¿ä¸­è®¾å¤‡çš„å±å¹•å°ºå¯¸//é»˜è®¤ width : 1080px , height:1920px , allowFontScaling:falseScreenUtil.init(context);//å‡å¦‚è®¾è®¡ç¨¿æ˜¯æŒ‰iPhone6çš„å°ºå¯¸è®¾è®¡çš„(iPhone6 750*1334) ScreenUtil.init(context, width: 750, height: 1334);//è®¾ç½®å­—ä½“å¤§å°æ ¹æ®ç³»ç»Ÿçš„â€œå­—ä½“å¤§å°â€è¾…åŠ©é€‰é¡¹æ¥è¿›è¡Œç¼©æ”¾,é»˜è®¤ä¸ºfalseScreenUtil.init(context, width: 750, height: 1334, allowFontScaling: true); ä½¿ç”¨ï¼šé€‚é…å°ºå¯¸ï¼šä¼ å…¥è®¾è®¡ç¨¿çš„pxå°ºå¯¸ï¼š æ ¹æ®å±å¹•å®½åº¦é€‚é… width: ScreenUtil().setWidth(540), æ ¹æ®å±å¹•é«˜åº¦é€‚é… height: ScreenUtil().setHeight(200), æ³¨æ„ é«˜åº¦ä¹Ÿæ ¹æ®setWidthæ¥åšé€‚é…å¯ä»¥ä¿è¯ä¸å˜å½¢(å½“ä½ æƒ³è¦ä¸€ä¸ªæ­£æ–¹å½¢çš„æ—¶å€™) setHeightæ–¹æ³•ä¸»è¦æ˜¯åœ¨é«˜åº¦ä¸Šè¿›è¡Œé€‚é…, åœ¨ä½ æƒ³æŽ§åˆ¶UIä¸Šä¸€å±çš„é«˜åº¦ä¸Žå®žé™…ä¸­æ˜¾ç¤ºä¸€æ ·æ—¶ä½¿ç”¨. ä¾‹å¦‚: 1234567891011//UIä¸Šæ˜¯é•¿æ–¹å½¢:Container( width: ScreenUtil().setWidth(375), height: ScreenUtil().setHeight(200), ), //å¦‚æžœä½ æƒ³æ˜¾ç¤ºä¸€ä¸ªæ­£æ–¹å½¢:Container( width: ScreenUtil().setWidth(300), height: ScreenUtil().setWidth(300), ), é€‚é…å­—ä½“:ä¼ å…¥è®¾è®¡ç¨¿çš„pxå°ºå¯¸ï¼š 1234567891011121314151617181920212223//ä¼ å…¥å­—ä½“å¤§å°ï¼Œé»˜è®¤ä¸æ ¹æ®ç³»ç»Ÿçš„â€œå­—ä½“å¤§å°â€è¾…åŠ©é€‰é¡¹æ¥è¿›è¡Œç¼©æ”¾(å¯åœ¨åˆå§‹åŒ–ScreenUtilæ—¶è®¾ç½®allowFontScaling)ScreenUtil().setSp(28) //ä¼ å…¥å­—ä½“å¤§å°ï¼Œæ ¹æ®ç³»ç»Ÿçš„â€œå­—ä½“å¤§å°â€è¾…åŠ©é€‰é¡¹æ¥è¿›è¡Œç¼©æ”¾(å¦‚æžœæŸä¸ªåœ°æ–¹ä¸éµå¾ªå…¨å±€çš„allowFontScalingè®¾ç½®) ScreenUtil().setSp(24, allowFontScalingSelf: true) //for example:Column( crossAxisAlignment: CrossAxisAlignment.start, children: &lt;Widget&gt;[ Text(&apos;æˆ‘çš„æ–‡å­—å¤§å°åœ¨è®¾è®¡ç¨¿ä¸Šæ˜¯24pxï¼Œä¸ä¼šéšç€ç³»ç»Ÿçš„æ–‡å­—ç¼©æ”¾æ¯”ä¾‹å˜åŒ–&apos;, style: TextStyle( color: Colors.black, fontSize: ScreenUtil().setSp(24), )), Text(&apos;æˆ‘çš„æ–‡å­—å¤§å°åœ¨è®¾è®¡ç¨¿ä¸Šæ˜¯24pxï¼Œä¼šéšç€ç³»ç»Ÿçš„æ–‡å­—ç¼©æ”¾æ¯”ä¾‹å˜åŒ–&apos;, style: TextStyle( color: Colors.black, fontSize: ScreenUtil() .setSp(24, allowFontScalingSelf: true))), ], ) å…¶ä»–ç›¸å…³apiï¼š123456789ScreenUtil.pixelRatio //è®¾å¤‡çš„åƒç´ å¯†åº¦ScreenUtil.screenWidth //è®¾å¤‡å®½åº¦ScreenUtil.screenHeight //è®¾å¤‡é«˜åº¦ScreenUtil.bottomBarHeight //åº•éƒ¨å®‰å…¨åŒºè·ç¦»ï¼Œé€‚ç”¨äºŽå…¨é¢å±ä¸‹é¢æœ‰æŒ‰é”®çš„ScreenUtil.statusBarHeight //çŠ¶æ€æ é«˜åº¦ åˆ˜æµ·å±ä¼šæ›´é«˜ å•ä½pxScreenUtil.textScaleFactor //ç³»ç»Ÿå­—ä½“ç¼©æ”¾æ¯”ä¾‹ScreenUtil().scaleWidth // å®žé™…å®½åº¦çš„dpä¸Žè®¾è®¡ç¨¿pxçš„æ¯”ä¾‹ScreenUtil().scaleHeight // å®žé™…é«˜åº¦çš„dpä¸Žè®¾è®¡ç¨¿pxçš„æ¯”ä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155import 'package:flutter/material.dart';import 'package:flutter_screenutil/flutter_screenutil.dart';void main() =&gt; runApp( MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return MaterialApp( debugShowCheckedModeBanner: false, title: 'Flutter_ScreenUtil', theme: ThemeData( primarySwatch: Colors.blue, ), home: MyHomePage(), ); &#125;&#125;class MyHomePage extends StatefulWidget &#123; MyHomePage(&#123;Key key, this.title&#125;) : super(key: key); final String title; @override _MyHomePageState createState() =&gt; _MyHomePageState();&#125;class _MyHomePageState extends State&lt;MyHomePage&gt; &#123; @override Widget build(BuildContext context) &#123; //è®¾ç½®é€‚é…å°ºå¯¸ (å¡«å…¥è®¾è®¡ç¨¿ä¸­è®¾å¤‡çš„å±å¹•å°ºå¯¸) æ­¤å¤„å‡å¦‚è®¾è®¡ç¨¿æ˜¯æŒ‰iPhone6çš„å°ºå¯¸è®¾è®¡çš„(iPhone6 750*1334) ScreenUtil.init(context, width: 750, height: 1334, allowFontScaling: false); ScreenUtil.init(context); ScreenUtil.init(context, width: 750, height: 1334, allowFontScaling: false); return ExampleWidget(title: 'FlutterScreenUtilç¤ºä¾‹'); &#125;&#125;class ExampleWidget extends StatefulWidget &#123; const ExampleWidget(&#123;Key key, this.title&#125;) : super(key: key); final String title; @override _ExampleWidgetState createState() =&gt; _ExampleWidgetState();&#125;class _ExampleWidgetState extends State&lt;ExampleWidget&gt; &#123; @override Widget build(BuildContext context) &#123; printScreenInformation(); return Scaffold( appBar: AppBar( title: Text(widget.title), ), body: SingleChildScrollView( child: Column( crossAxisAlignment: CrossAxisAlignment.center, children: &lt;Widget&gt;[ Row( children: &lt;Widget&gt;[ Container( padding: EdgeInsets.all(ScreenUtil().setWidth(10)), width: ScreenUtil().setWidth(375), height: ScreenUtil().setHeight(200), color: Colors.red, child: Text( 'æˆ‘çš„å®½åº¦:$&#123;ScreenUtil().setWidth(375)&#125;dp \n' 'æˆ‘çš„é«˜åº¦:$&#123;ScreenUtil().setHeight(200)&#125;dp', style: TextStyle( color: Colors.white, fontSize: ScreenUtil().setSp(24)), ), ), Container( padding: EdgeInsets.all(ScreenUtil().setWidth(10)), width: ScreenUtil().setWidth(375), height: ScreenUtil().setHeight(200), color: Colors.blue, child: Text( 'æˆ‘çš„å®½åº¦:$&#123;ScreenUtil().setWidth(375)&#125;dp \n' 'æˆ‘çš„é«˜åº¦:$&#123;ScreenUtil().setHeight(200)&#125;dp', style: TextStyle( color: Colors.white, fontSize: ScreenUtil().setSp(24))), ), ], ), Text('è®¾å¤‡å®½åº¦:$&#123;ScreenUtil.screenWidth&#125;px'), Text('è®¾å¤‡é«˜åº¦:$&#123;ScreenUtil.screenHeight&#125;px'), Text('è®¾å¤‡å®½åº¦:$&#123;ScreenUtil.screenWidthDp&#125;dp'), Text('è®¾å¤‡é«˜åº¦:$&#123;ScreenUtil.screenHeightDp&#125;dp'), Text('è®¾å¤‡çš„åƒç´ å¯†åº¦:$&#123;ScreenUtil.pixelRatio&#125;'), Text('åº•éƒ¨å®‰å…¨åŒºè·ç¦»:$&#123;ScreenUtil.bottomBarHeight&#125;dp'), Text('çŠ¶æ€æ é«˜åº¦:$&#123;ScreenUtil.statusBarHeight&#125;dp'), Text( 'å®žé™…å®½åº¦çš„dpä¸Žè®¾è®¡ç¨¿pxçš„æ¯”ä¾‹:$&#123;ScreenUtil().scaleWidth&#125;', textAlign: TextAlign.center, ), Text( 'å®žé™…é«˜åº¦çš„dpä¸Žè®¾è®¡ç¨¿pxçš„æ¯”ä¾‹:$&#123;ScreenUtil().scaleHeight&#125;', textAlign: TextAlign.center, ), SizedBox( height: ScreenUtil().setHeight(100), ), Text('ç³»ç»Ÿçš„å­—ä½“ç¼©æ”¾æ¯”ä¾‹:$&#123;ScreenUtil.textScaleFactor&#125;'), Column( crossAxisAlignment: CrossAxisAlignment.start, children: &lt;Widget&gt;[ Text('æˆ‘çš„æ–‡å­—å¤§å°åœ¨è®¾è®¡ç¨¿ä¸Šæ˜¯24pxï¼Œä¸ä¼šéšç€ç³»ç»Ÿçš„æ–‡å­—ç¼©æ”¾æ¯”ä¾‹å˜åŒ–', style: TextStyle( color: Colors.black, fontSize: ScreenUtil().setSp(24), )), Text('æˆ‘çš„æ–‡å­—å¤§å°åœ¨è®¾è®¡ç¨¿ä¸Šæ˜¯24pxï¼Œä¼šéšç€ç³»ç»Ÿçš„æ–‡å­—ç¼©æ”¾æ¯”ä¾‹å˜åŒ–', style: TextStyle( color: Colors.black, fontSize: ScreenUtil() .setSp(24, allowFontScalingSelf: true))), ], ) ], ), ), floatingActionButton: FloatingActionButton( child: Icon(Icons.title), onPressed: () &#123; ScreenUtil.init(context, width: 1500, height: 1334, allowFontScaling: false); setState(() &#123;&#125;); &#125;, ), ); &#125; void printScreenInformation() &#123; print('è®¾å¤‡å®½åº¦:$&#123;ScreenUtil.screenWidth&#125;'); //Device width print('è®¾å¤‡é«˜åº¦:$&#123;ScreenUtil.screenHeight&#125;'); //Device height print('è®¾å¤‡çš„åƒç´ å¯†åº¦:$&#123;ScreenUtil.pixelRatio&#125;'); //Device pixel density print( 'åº•éƒ¨å®‰å…¨åŒºè·ç¦»:$&#123;ScreenUtil.bottomBarHeight&#125;dp'); //Bottom safe zone distanceï¼Œsuitable for buttons with full screen print( 'çŠ¶æ€æ é«˜åº¦:$&#123;ScreenUtil.statusBarHeight&#125;dp'); //Status bar height , Notch will be higher Unit px print('å®žé™…å®½åº¦çš„dpä¸Žè®¾è®¡ç¨¿pxçš„æ¯”ä¾‹:$&#123;ScreenUtil().scaleWidth&#125;'); print('å®žé™…é«˜åº¦çš„dpä¸Žè®¾è®¡ç¨¿pxçš„æ¯”ä¾‹:$&#123;ScreenUtil().scaleHeight&#125;'); print( 'å®½åº¦å’Œå­—ä½“ç›¸å¯¹äºŽè®¾è®¡ç¨¿æ”¾å¤§çš„æ¯”ä¾‹:$&#123;ScreenUtil().scaleWidth * ScreenUtil.pixelRatio&#125;'); print('é«˜åº¦ç›¸å¯¹äºŽè®¾è®¡ç¨¿æ”¾å¤§çš„æ¯”ä¾‹:$&#123;ScreenUtil().scaleHeight * ScreenUtil.pixelRatio&#125;'); print('ç³»ç»Ÿçš„å­—ä½“ç¼©æ”¾æ¯”ä¾‹:$&#123;ScreenUtil.textScaleFactor&#125;'); &#125;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter_BottomNavigationBaråˆ‡æ¢é¡µé¢é˜²æ­¢é¡µé¢é‡ç»˜]]></title>
    <url>%2Fposts%2F88ab6b09.html</url>
    <content type="text"><![CDATA[å¼€å§‹å°è¯•ç”¨flutterå¼€å‘ï¼Œflutterç‰ˆæœ¬1.0ï¼Œå†™ç±»ä¼¼å¾®ä¿¡åº•éƒ¨tabåˆ‡æ¢ç•Œé¢æ—¶å‘çŽ°ç•Œé¢è€è¢«é‡ç½®ï¼Œç½‘ä¸Šæ‰¾äº†ä¸€åœˆè¯´ä¿æŒçŠ¶æ€éœ€è¦å­é¡µé¢mixin AutomaticKeepAliveClientMixinï¼Œç„¶åŽé‡å†™ 12@override bool get wantKeepAlive =&gt; true; ä½†å‘çŽ°éœ€è¦é…åˆå…¶ä»–ç»„ä»¶ï¼Œä¸æ˜¯éšä¾¿mixinå°±æœ‰ç”¨çš„ï¼Œå°è¯•å‡ ç§å†™æ³•æ€»ç»“BottomNavigationBar+List+AutomaticKeepAliveClientMixinæ˜¯æ²¡æœ‰ç”¨çš„ é¦–å…ˆå°è¯•BottomNavigationBar+Listå®žçŽ°çš„é¡µé¢åˆ‡æ¢ä¿æŒçŠ¶æ€ï¼Œä¸€èˆ¬åˆšå¼€å§‹å­¦éƒ½ä¼šè¿™ä¹ˆå†™ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950void main() =&gt; runApp(MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) =&gt; MaterialApp( title: "demo", home: MainPage(), );&#125;class MainPage extends StatefulWidget &#123; @override State&lt;StatefulWidget&gt; createState() =&gt; MainPageState();&#125;class MainPageState extends State&lt;MainPage&gt; &#123; int _currentIndex; List&lt;Widget&gt; _pages; @override void initState() &#123; super.initState(); _currentIndex = 0; _pages = List()..add(FirstPage("ç¬¬ä¸€é¡µ"))..add(SecondPage("ç¬¬äºŒé¡µ"))..add(ThirdPage("ç¬¬ä¸‰é¡µ")); &#125; @override Widget build(BuildContext context) =&gt; Scaffold( body: _pages[_currentIndex], bottomNavigationBar: BottomNavigationBar( items: getItems(), currentIndex: _currentIndex, onTap: onTap, ), ); List&lt;BottomNavigationBarItem&gt; getItems() &#123; return [ BottomNavigationBarItem(icon: Icon(Icons.home), title: Text("Home")), BottomNavigationBarItem(icon: Icon(Icons.adb), title: Text("Adb")), BottomNavigationBarItem(icon: Icon(Icons.person), title: Text("Person")) ]; &#125; void onTap(int index) &#123; setState(() &#123; _currentIndex = index; &#125;); &#125;&#125; å­é¡µé¢ä»£ç ,ä¸‰ä¸ªç•Œé¢ä¸€æ ·ï¼š 1234567891011121314151617181920212223242526272829303132333435class FirstPage extends StatefulWidget &#123; String _title; FirstPage(this._title); @override State&lt;StatefulWidget&gt; createState() =&gt; FirstPageState();&#125;class FirstPageState extends State&lt;FirstPage&gt; with AutomaticKeepAliveClientMixin&#123; int _count = 0; @override bool get wantKeepAlive =&gt; true; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text(widget._title), ), body: Center( child: Text(widget._title + ":ç‚¹ä¸€ä¸‹åŠ 1ï¼š$_count"), ), floatingActionButton: FloatingActionButton( heroTag: widget._title, child: Icon(Icons.add), onPressed: add), ); &#125; void add() &#123; setState(() &#123; _count++; &#125;); &#125;&#125; ç»“æžœæ— æ³•å®žçŽ°ä¿æŒé¡µé¢ 2.ç¬¬äºŒç§BottomNavigationBar+PageViewï¼Œä¸Žandroidçš„ViewPagerç±»ä¼¼,ç•Œé¢å°æ”¹åŠ¨ä¸€ä¸‹ï¼Œæ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„ç•Œé¢ ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869void main() =&gt; runApp(MyApp());class MyApp extends StatelessWidget &#123; @override Widget build(BuildContext context) =&gt; MaterialApp( title: "demo", home: MainPage(), );&#125;class MainPage extends StatefulWidget &#123; @override State&lt;StatefulWidget&gt; createState() =&gt; MainPageState();&#125;class MainPageState extends State&lt;MainPage&gt; &#123; int _currentIndex; List&lt;Widget&gt; _pages; PageController _controller; @override void initState() &#123; super.initState(); _currentIndex = 0; _pages = List() ..add(FirstPage("ç¬¬ä¸€é¡µ")) ..add(SecondPage("ç¬¬äºŒé¡µ")) ..add(ThirdPage("ç¬¬ä¸‰é¡µ")); _controller = PageController(initialPage: 0); &#125; @override void dispose() &#123; super.dispose(); _controller.dispose(); &#125; @override Widget build(BuildContext context) =&gt; Scaffold( body: PageView.builder( physics: NeverScrollableScrollPhysics(),//viewPageç¦æ­¢å·¦å³æ»‘åŠ¨ onPageChanged: _pageChange, controller: _controller, itemCount: _pages.length, itemBuilder: (context, index) =&gt; _pages[index]), bottomNavigationBar: BottomNavigationBar( items: getItems(), currentIndex: _currentIndex, onTap: onTap, ), ); List&lt;BottomNavigationBarItem&gt; getItems() &#123; return [ BottomNavigationBarItem(icon: Icon(Icons.home), title: Text("Home")), BottomNavigationBarItem(icon: Icon(Icons.adb), title: Text("Adb")), BottomNavigationBarItem(icon: Icon(Icons.person), title: Text("Person")) ]; &#125; void onTap(int index) &#123; _controller.jumpToPage(index); &#125; void _pageChange(int index) &#123; if (index != _currentIndex) &#123; setState(() &#123; _currentIndex = index; &#125;); &#125; &#125;&#125; å­ç•Œé¢ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546class FirstPage extends StatefulWidget &#123; String _title; FirstPage(this._title); @override State&lt;StatefulWidget&gt; createState() =&gt; FirstPageState();&#125;class FirstPageState extends State&lt;FirstPage&gt; with AutomaticKeepAliveClientMixin &#123; int _count = 0; @override bool get wantKeepAlive =&gt; true; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text(widget._title), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Text(widget._title + ":ç‚¹ä¸€ä¸‹åŠ 1ï¼š$_count"), MaterialButton( child: Text("è·³è½¬"), color: Colors.pink, onPressed: () =&gt; Navigator.push(context, MaterialPageRoute(builder: (context) =&gt; NewPage()))) ], ), ), floatingActionButton: FloatingActionButton( heroTag: widget._title, child: Icon(Icons.add), onPressed: add), ); &#125; void add() &#123; setState(() &#123; _count++; &#125;); &#125;&#125; éœ€è¦è·³è½¬çš„ä¸€ä¸ªç•Œé¢ï¼š 1234567891011class NewPage extends StatelessWidget &#123; @override Widget build(BuildContext context) =&gt; Scaffold( appBar: AppBar( title: Text("æ–°çš„ç•Œé¢"), ), body: Center( child: Text("æˆ‘æ˜¯ä¸€ä¸ªæ–°çš„ç•Œé¢"), ), );&#125; çŒ›ä¸€çœ‹æ•ˆæžœå‡ºæ¥äº†ï¼Œå·¦å³åˆ‡æ¢ç•Œé¢æ²¡æœ‰é—®é¢˜ï¼Œç»“æžœè·³è½¬æ–°ç•Œé¢æ—¶åˆå‡ºçŽ°æ–°é—®é¢˜ï¼Œå½“ç¬¬ä¸€é¡µè·³è½¬æ–°çš„ç•Œé¢å†è¿”å›žï¼Œå†åˆ‡ç¬¬äºŒã€ä¸‰é¡µå‘çŽ°é‡ç½®äº†ï¼Œå†åˆ‡å›žç¬¬ä¸€é¡µå‘çŽ°é¡µè¢«é‡ç½®äº†ã€‚ å‘ç”Ÿè¿™ç§æƒ…å†µéœ€è¦åœ¨é‡å†™Widget build(BuildContext context)æ—¶è°ƒç”¨ä¸‹çˆ¶ç±»build(context)æ–¹æ³•ï¼Œå±€éƒ¨ä»£ç ï¼š 12345678910111213141516171819202122232425@override Widget build(BuildContext context) &#123; //åœ¨è¿™è¾¹åŠ ä¸Šsuper.build(context); super.build(context); return Scaffold( appBar: AppBar( title: Text(widget._title), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Text(widget._title + ":ç‚¹ä¸€ä¸‹åŠ 1ï¼š$_count"), MaterialButton( child: Text("è·³è½¬"), color: Colors.pink, onPressed: () =&gt; Navigator.push(context, MaterialPageRoute(builder: (context) =&gt; NewPage()))) ], ), ), floatingActionButton: FloatingActionButton( heroTag: widget._title, child: Icon(Icons.add), onPressed: add), ); &#125; è¿™ç§å¸ƒå±€æ ·å¼ç½‘ä¸Šè¿˜æœ‰ä¸€ç§ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯BottomNavigationBar+IndexedStack( )ï¼Œè¿™è¾¹å°±ä¸è´´å‡ºæ¥äº† ç»è¿‡é•¿æœŸæµ‹è¯•BottomNavigationBar+TabBarViewæ–¹æ¡ˆè¡Œä¸é€šï¼ŒåŽæœŸä¼šé‡åˆ°å…¶ä»–é—®é¢˜ï¼Œç›®å‰æœ€å¥½ç”¨è¿˜æ˜¯viewpageå’ŒIndexedStackã€‚ æœ€åŽåƒè¿™ç§å¤šé¡µé¢ä½¿ç”¨FloatingActionButtonï¼Œç”¨å®ƒè·³è½¬æ–°ç•Œé¢æ˜¯ä¸€å®šè¦è®¾ç½®heroTagï¼Œè¦ä¸ç„¶è·³è½¬ä¼šé»‘å±æŠ¥é”™]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter_tabBarViewåˆ‡æ¢é¡µé¢é˜²æ­¢é¡µé¢é‡ç»˜]]></title>
    <url>%2Fposts%2Fdffd90b2.html</url>
    <content type="text"><![CDATA[è¢«é‡ç»˜çš„tabé¡µè¦ æ··å…¥AutomaticKeepAliveClientMixin12// with æ··å…¥class DevicePageLayout extends WidgetState&lt;DevicePage&gt; with AutomaticKeepAliveClientMixin å®žçŽ°wantKeepAliveæ–¹æ³• ï¼Œè¿”å›žå€¼æ”¹æˆtrue123@override// TODO: implement wantKeepAlivebool get wantKeepAlive =&gt; true; buildä¸­åŠ å…¥ super.build(context);1234@overrideWidget build(BuildContext context) &#123; super.build(context); // TODO: implement build]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Studio 3.6 æ­£å¼ç‰ˆç»ˆäºŽå‘å¸ƒäº†]]></title>
    <url>%2Fposts%2Faaf10946.html</url>
    <content type="text"><![CDATA[å¦‚é¢˜ï¼ŒAndroid Studio 3.6 æ­£å¼ç‰ˆç»ˆäºŽå‘å¸ƒäº†ï¼Œå€¼å¾—å…´å¥‹å‘€ï¼Œæ¯•ç«Ÿ 3.5 å¤§ç‰ˆæœ¬æ›´æ–°ä¹Ÿå·²ç»å·®ä¸å¤šåŠå¹´äº†ï¼Œæ’’èŠ±æ’’èŠ±ï¼è¿™æ¬¡æ›´æ–°åˆæ›´æ–°äº†ä»€ä¹ˆå‘¢ï¼Ÿ åŒ…æ‹¬æœ‰è®¾è®¡ã€å¼€å‘ã€æž„å»ºã€æµ‹è¯•ã€ä¼˜åŒ–ç­‰å¤šæ–¹é¢ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ Release Notes å†™äº†äº›ä»€ä¹ˆå§ï¼ Release Notesæˆ‘ä»¬å¾ˆé«˜å…´å®£å¸ƒ Android Studio 3.6 å‘å¸ƒç¨³å®šç‰ˆæœ¬äº†ï¼Œè¯¥ç‰ˆæœ¬å†…æœ‰ä¸€äº›é’ˆå¯¹æ€§çš„æ–°ç‰¹æ€§ï¼Œä¸»è¦è§£å†³äº†åœ¨ä»£ç ç¼–è¾‘å’Œè°ƒè¯•ç”¨ä¾‹ä¸­çš„è´¨é‡é—®é¢˜ã€‚è¿™æ˜¯æˆ‘ä»¬åœ¨ Project Marble ç»“æŸä¹‹åŽçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå…¶é‡ç‚¹æ˜¯æž„å»ºå¼ºå¤§çš„é›†æˆå¼€å‘çŽ¯å¢ƒï¼ˆIDEï¼‰çš„åŸºæœ¬åŠŸèƒ½å’Œæµã€‚æˆ‘ä»¬ä»Ž Project Marble ä¸­å­¦åˆ°äº†å¾ˆå¤šï¼Œåœ¨ Android Studio 3.6 ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€å°éƒ¨åˆ†åŠŸèƒ½ï¼Œå®Œå–„çš„çŽ°æœ‰åŠŸèƒ½ï¼Œå¹¶èŠ±è´¹äº†å¾ˆå¤§çš„ç²¾åŠ›æ¥è§£å†³é”™è¯¯å¹¶æ”¹å–„åŸºç¡€æ€§èƒ½ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬è¾¾åˆ°åŽ»å¹´è®¾å®šçš„é«˜è´¨é‡æ ‡å‡†ã€‚ Android Studio 3.6 çš„ä¸€äº›äº®ç‚¹åŒ…æ‹¬ä¸€ç§ä½¿ç”¨ XML å¿«é€Ÿè®¾è®¡ã€å¼€å‘å’Œé¢„è§ˆåº”ç”¨å¸ƒå±€çš„æ–°æ–¹æ³•ï¼Œåœ¨è®¾è®¡ç¼–è¾‘å™¨ä¸­æä¾›äº†æ–°çš„æ‹†åˆ†è§†å›¾ã€‚æ­¤å¤–ï¼Œæ‚¨ä¸å†éœ€è¦æ‰‹åŠ¨é”®å…¥ GPS åæ ‡æ¥æµ‹è¯•åº”ç”¨çš„ä½ç½®ï¼Œå› ä¸ºæˆ‘ä»¬çŽ°åœ¨å°† Google åœ°å›¾ç›´æŽ¥åµŒå…¥åˆ° Android æ¨¡æ‹Ÿå™¨æ‰©å±•æŽ§åˆ¶é¢æ¿ä¸­ã€‚æœ€åŽï¼Œé€šè¿‡é’ˆå¯¹ç‰‡æ®µå’Œæ´»åŠ¨çš„è‡ªåŠ¨å†…å­˜æ³„æ¼æ£€æµ‹ï¼Œæˆ‘ä»¬ç®€åŒ–äº†åº”ç”¨å¹¶æŸ¥æ‰¾ Bugã€‚æˆ‘ä»¬å¸Œæœ›æ‰€æœ‰è¿™äº›åŠŸèƒ½å¯ä»¥å¸®åŠ©æ‚¨åœ¨ Android ä¸Šå¼€å‘æ—¶æ›´å¿«ä¹ã€æ›´é«˜æ•ˆã€‚ æ„Ÿè°¢åœ¨é¢„è§ˆç‰ˆä¸­æä¾›æ—©æœŸåé¦ˆçš„ç”¨æˆ·ã€‚æ‚¨çš„åé¦ˆå¸®åŠ©æˆ‘ä»¬è¿­ä»£å’Œæ”¹è¿› Android Studio 3.6 ä¸­çš„åŠŸèƒ½ã€‚å¦‚æžœæ‚¨å·²å‡†å¤‡å¥½è¿ŽæŽ¥ä¸‹ä¸€ä¸ªç¨³å®šç‰ˆæœ¬ï¼Œå¹¶ä¸”æƒ³è¦ä½¿ç”¨ä¸€ç»„æ–°çš„ç”Ÿäº§åŠ›åŠŸèƒ½ï¼ŒAndroid Studio 3.6 å·²å‡†å¤‡å¥½ä¸‹è½½ï¼Œä»¥ä¾¿æ‚¨å…¥é—¨ã€‚ ä»¥ä¸‹æ˜¯ Android Studio 3.6 ä¸­ç”±ä¸»è¦å¼€å‘äººå‘˜æµç»„ç»‡çš„å…¨éƒ¨æ–°åŠŸèƒ½åˆ—è¡¨ã€‚ è®¾è®¡åœ¨è®¾è®¡ç¼–è¾‘å™¨ä¸­æ‹†åˆ†è§†å›¾è®¾è®¡ç¼–è¾‘å™¨ï¼ˆå¦‚å¸ƒå±€ç¼–è¾‘å™¨å’Œå¯¼èˆªç¼–è¾‘å™¨ï¼‰çŽ°åœ¨æä¾›â€æ‹†åˆ†â€è§†å›¾ï¼Œä½¿æ‚¨èƒ½å¤ŸåŒæ—¶æŸ¥çœ‹ UI çš„â€è®¾è®¡å’Œä»£ç â€è§†å›¾ã€‚æ‹†åˆ†è§†å›¾å°†æ›¿æ¢å’Œæ”¹è¿›è¾ƒæ—©çš„â€é¢„è§ˆâ€çª—å£ï¼Œå¹¶å¯ä»¥é€ä¸ªæ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œä»¥ä¿ç•™ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚ç¼©æ”¾å› å­å’Œè®¾è®¡è§†å›¾é€‰é¡¹ï¼‰ï¼Œå› æ­¤æ‚¨å¯ä»¥é€‰æ‹©æœ€é€‚åˆæ¯ä¸ªç”¨ä¾‹çš„è§†å›¾ã€‚è¦å¯ç”¨æ‹†åˆ†è§†å›¾ï¼Œè¯·å•å‡»ç¼–è¾‘å™¨çª—å£å³ä¸Šè§’çš„â€æ‹†åˆ†â€å›¾æ ‡ã€‚ é¢œè‰²é€‰å–å™¨èµ„æºé€‰é¡¹å¡åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›æ›´è½»æ¾åœ°åº”ç”¨å·²å®šä¹‰ä¸ºé¢œè‰²èµ„æºçš„é¢œè‰²ã€‚åœ¨ Android Studio 3.6 ä¸­ï¼Œé¢œè‰²é€‰å–å™¨å°†å¡«å……åº”ç”¨ä¸­çš„é¢œè‰²èµ„æºï¼Œä»¥ä¾¿å¿«é€Ÿé€‰æ‹©å’Œæ›¿æ¢é¢œè‰²èµ„æºå€¼ã€‚é¢œè‰²é€‰å–å™¨å¯åœ¨è®¾è®¡å·¥å…·å’Œ XML ç¼–è¾‘å™¨ä¸­è®¿é—®ã€‚ å¼€å‘è§†å›¾ç»‘å®šè§†å›¾ç»‘å®šæ˜¯ä¸€é¡¹åŠŸèƒ½ï¼Œå…è®¸æ‚¨åœ¨å¼•ç”¨ä»£ç ä¸­çš„è§†å›¾æ—¶æä¾›ç¼–è¯‘æ—¶å®‰å…¨æ€§ï¼Œä»Žè€Œæ›´è½»æ¾åœ°ç¼–å†™ä¸Žè§†å›¾äº¤äº’çš„ä»£ç ã€‚å¯ç”¨åŽï¼Œè§†å›¾ç»‘å®šå°†ä¸ºæ¯ä¸ªæ¨¡å—ä¸­å­˜åœ¨çš„ XML å¸ƒå±€æ–‡ä»¶ç”Ÿæˆä¸€ä¸ªç»‘å®šç±»ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè§†å›¾ç»‘å®šå°†æ›¿æ¢ findViewByIdã€‚æ‚¨å¯ä»¥å¼•ç”¨å…·æœ‰ ID çš„æ‰€æœ‰è§†å›¾ï¼Œè¿™äº›è§†å›¾æ²¡æœ‰ç©ºæŒ‡é’ˆæˆ–ç±»å¼ºåˆ¶è½¬æ¢å¼‚å¸¸çš„é£Žé™©ã€‚è¿™äº›å·®å¼‚æ„å‘³ç€å¸ƒå±€å’Œä»£ç ä¹‹é—´çš„ä¸å…¼å®¹å°†å¯¼è‡´ç”Ÿæˆåœ¨ç¼–è¯‘æ—¶å¤±è´¥ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚è¦åœ¨é¡¹ç›®ä¸­å¯ç”¨è§†å›¾ç»‘å®šï¼Œè¯·åœ¨æ¯ä¸ªæ¨¡å—çš„ç”Ÿæˆä¸­åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ã€‚ 123android &#123; viewBinding.enabled = true&#125; Android NDK ä¿®æ”¹Android Studio ä¸­çš„ä»¥ä¸‹ Android NDK åŠŸèƒ½ä»¥å‰åœ¨ Java ä¸­æ”¯æŒï¼ŒçŽ°åœ¨ Kotlin ä¹Ÿæ”¯æŒï¼š ä»Ž JNI å£°æ˜Žå¯¼èˆªåˆ° C/C++ ä¸­çš„ç›¸åº”å®žçŽ°å‡½æ•°ã€‚é€šè¿‡å°†é¼ æ ‡æ‚¬åœåœ¨æ‰˜ç®¡æºä»£ç æ–‡ä»¶ä¸­è¡Œå·é™„è¿‘çš„ C æˆ–C++é¡¹æ ‡è®°ä¸Šï¼ŒæŸ¥çœ‹æ­¤æ˜ å°„ã€‚ è‡ªåŠ¨ä¸º JNI å£°æ˜Žåˆ›å»ºå­˜æ ¹å®žçŽ°å‡½æ•°ã€‚é¦–å…ˆå®šä¹‰ JNI å£°æ˜Žï¼Œç„¶åŽåœ¨è¦æ¿€æ´»çš„ C/C++ æ–‡ä»¶ä¸­é”®å…¥â€jniâ€æˆ–æ–¹æ³•åç§°ã€‚ IntelliJ å¹³å°æ›´æ”¹Android Studio 3.6 åŒ…æ‹¬ IntelliJ 2019.2 å¹³å°ç‰ˆæœ¬ã€‚æ­¤ IntelliJ ç‰ˆæœ¬åŒ…æ‹¬è®¸å¤šæ”¹è¿›ï¼Œä»Žæ–°çš„æœåŠ¡å·¥å…·çª—å£åˆ°å¤§å¤§ç¼©çŸ­çš„å¯åŠ¨æ—¶é—´ã€‚ åº”ç”¨æ›´æ”¹çŽ°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡å•å‡»â€åº”ç”¨ä»£ç æ›´æ”¹â€æˆ–â€åº”ç”¨æ›´æ”¹å¹¶é‡æ–°å¯åŠ¨æ´»åŠ¨â€æ¥æ·»åŠ ç±»ï¼Œç„¶åŽå°†è¯¥ä»£ç æ›´æ”¹éƒ¨ç½²åˆ°æ­£åœ¨è¿è¡Œçš„åº”ç”¨ã€‚ æž„å»ºAndroid Gradle Plugin (AGP) updatesAndroid Gradle æ’ä»¶ 3.6 åŠæ›´é«˜ç‰ˆæœ¬åŒ…æ‹¬å¯¹ Maven å‘å¸ƒ Gradle æ’ä»¶çš„æ”¯æŒï¼Œè¯¥æ’ä»¶å…è®¸æ‚¨å°†æž„å»ºé¡¹ç›®å‘å¸ƒåˆ° Apache Maven å­˜å‚¨åº“ã€‚Android Gradle æ’ä»¶ä¸ºåº”ç”¨æˆ–åº“æ¨¡å—ä¸­çš„æ¯ä¸ªç”Ÿæˆå˜ä½“é¡¹ç›®åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥ç»„ä»¶å°†å‡ºç‰ˆç‰©è‡ªå®šä¹‰åˆ° Maven å­˜å‚¨åº“ã€‚æ­¤æ›´æ”¹å°†æ›´è½»æ¾åœ°ç®¡ç†å„ç§ç›®æ ‡çš„å‘å¸ƒç”Ÿå‘½å‘¨æœŸã€‚ æ­¤å¤–ï¼ŒAndroid Gradle æ’ä»¶åœ¨å¤§åž‹é¡¹ç›®çš„æ³¨é‡Šå¤„ç†/KAPT æ–¹é¢å–å¾—äº†æ˜¾è‘—çš„æ€§èƒ½æ”¹è¿›ã€‚è¿™æ˜¯ç”± AGP çŽ°åœ¨ç›´æŽ¥ç”Ÿæˆ R ç±»å­—èŠ‚ç ï¼Œè€Œä¸æ˜¯ .java æ–‡ä»¶å¼•èµ·çš„ã€‚ æ–°çš„æ‰“åŒ…å·¥å…·Android æž„å»ºå›¢é˜Ÿä¸æ–­è¿›è¡Œæ›´æ”¹ä»¥æé«˜ç”Ÿæˆæ€§èƒ½ï¼Œåœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬å°†é»˜è®¤æ‰“åŒ…å·¥å…·æ›´æ”¹ä¸º zipflinger ä»¥è¿›è¡Œè°ƒè¯•ç”Ÿæˆã€‚ç”¨æˆ·åº”è¯¥çœ‹åˆ°ç”Ÿæˆé€Ÿåº¦çš„æé«˜ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½® android.useNewApkCreator_false åœ¨æ‚¨çš„åˆ†çº§ä¸­æ¢å¤ä½¿ç”¨æ—§çš„æ‰“åŒ…å·¥å…·ã€‚ æµ‹è¯•Android æ¨¡æ‹Ÿå™¨ - Google åœ°å›¾Android æ¨¡æ‹Ÿå™¨ 29.2.12 ä¸ºåº”ç”¨å¼€å‘äººå‘˜æä¾›äº†ä¸€ç§ä¸Žæ¨¡æ‹Ÿè®¾å¤‡ä½ç½®è¿›è¡ŒæŽ¥å£çš„æ–°æ–¹å¼ã€‚æˆ‘ä»¬åœ¨æ‰©å±•æŽ§ä»¶èœå•ä¸­åµŒå…¥äº† Google åœ°å›¾ç”¨æˆ·ç•Œé¢ï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°æŒ‡å®šä½ç½®ï¼Œå¹¶æž„å»ºæ¥è‡ªä½ç½®å¯¹çš„è·¯ç”±ã€‚å¯ä»¥ä¿å­˜å•ä¸ªç‚¹å¹¶å°†å…¶é‡æ–°å‘é€åˆ°è®¾å¤‡ä½œä¸ºè™šæ‹Ÿä½ç½®ï¼Œè€Œè·¯ç”±å¯ä»¥é€šè¿‡é”®å…¥åœ°å€æˆ–å•å‡»ä¸¤ä¸ªç‚¹æ¥ç”Ÿæˆã€‚å½“è·¯çº¿ä¸Šçš„ä½ç½®å‘é€åˆ°æ¥å®¾ OS æ—¶ï¼Œå¯ä»¥å®žæ—¶é‡æ’­è¿™äº›è·¯ç”±ã€‚ å¤šå±æ”¯æŒæ¨¡æ‹Ÿå™¨ 29.1.10 åŒ…æ‹¬å¯¹å¤šä¸ªè™šæ‹Ÿæ˜¾ç¤ºå™¨çš„åˆæ­¥æ”¯æŒã€‚ç”±äºŽæœ‰æ›´å¤šçš„è®¾å¤‡å…·æœ‰å¤šä¸ªæ˜¾ç¤ºå™¨ï¼Œå› æ­¤åœ¨å„ç§å¤šæ˜¾ç¤ºå™¨é…ç½®ä¸Šæµ‹è¯•åº”ç”¨éžå¸¸é‡è¦ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡è®¾ç½®èœå•ï¼ˆæ‰©å±•æŽ§ä»¶å’Œè®¾ç½®ï¼‰é…ç½®å¤šä¸ªæ˜¾ç¤ºå™¨ã€‚ SDK æ–­ç‚¹ç»­ä¼ å½“ä½¿ç”¨ Android Studio SDK ç®¡ç†å™¨ä¸‹è½½ Android SDK ç»„ä»¶å’Œå·¥å…·æ—¶ï¼ŒAndroid Studio çŽ°åœ¨å…è®¸æ‚¨æ¢å¤ä¸­æ–­çš„ä¸‹è½½ï¼ˆä¾‹å¦‚ï¼Œç”±äºŽç½‘ç»œé—®é¢˜ï¼‰ï¼Œè€Œä¸æ˜¯ä»Žä¸€å¼€å§‹å°±é‡æ–°å¯åŠ¨ä¸‹è½½ã€‚å½“äº’è”ç½‘è¿žæŽ¥ä¸å¯é æ—¶ï¼Œæ­¤å¢žå¼ºåŠŸèƒ½å¯¹äºŽå¤§åž‹ä¸‹è½½ï¼ˆå¦‚ Android æ¨¡æ‹Ÿå™¨æˆ–ç³»ç»Ÿæ˜ åƒï¼‰ç‰¹åˆ«æœ‰ç”¨ã€‚ å¯¼å…¥çš„ APK å¯ä»¥è‡ªåŠ¨æ›´æ–°Android Studio å…è®¸æ‚¨å¯¼å…¥å¤–éƒ¨æž„å»ºçš„ APK æ¥è°ƒè¯•å’Œåˆ†æžå®ƒä»¬ã€‚ä»¥å‰ï¼Œå½“å¯¹è¿™äº› APK è¿›è¡Œæ›´æ”¹æ—¶ï¼Œæ‚¨å¿…é¡»å†æ¬¡æ‰‹åŠ¨å¯¼å…¥å®ƒä»¬å¹¶é‡æ–°é™„åŠ ç¬¦å·å’Œæºã€‚Android Studio 3.6 çŽ°åœ¨ä¼šè‡ªåŠ¨æ£€æµ‹å¯¹å¯¼å…¥çš„ APK æ–‡ä»¶æ‰€åšçš„æ›´æ”¹ï¼Œå¹¶ä¸ºæ‚¨æä¾›å°±åœ°é‡æ–°å¯¼å…¥è¯¥æ–‡ä»¶çš„é€‰é¡¹ã€‚ ä¼˜åŒ–å†…å­˜æŽ¢æŸ¥å™¨ä¸­çš„æ³„æ¼æ£€æµ‹æ ¹æ®åé¦ˆï¼Œæˆ‘ä»¬åœ¨å†…å­˜æŽ¢æŸ¥å™¨ä¸­æ·»åŠ äº†æ£€æµ‹å¯èƒ½æ³„æ¼çš„æ´»åŠ¨å’Œç‰‡æ®µå®žä¾‹çš„èƒ½åŠ›ã€‚è¦å¼€å§‹ä½¿ç”¨ï¼Œè¯·åœ¨å†…å­˜æŽ¢æŸ¥å™¨ä¸­æ•èŽ·æˆ–å¯¼å…¥å †è½¬å‚¨æ–‡ä»¶ï¼Œå¹¶é€‰ä¸­â€æ´»åŠ¨/ç¢Žç‰‡æ³„æ¼â€å¤é€‰æ¡†ä»¥ç”Ÿæˆç»“æžœã€‚æœ‰å…³ Android Studio å¦‚ä½•æ£€æµ‹æ³„æ¼çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æˆ‘ä»¬çš„æ–‡æ¡£ã€‚ åœ¨ APK åˆ†æžå™¨ä¸­åŽ»è§£ç±»å’Œæ–¹æ³•å­—èŠ‚ç ä½¿ç”¨ APK åˆ†æžå™¨æ£€æŸ¥ DEX æ–‡ä»¶æ—¶ï¼ŒçŽ°åœ¨å¯ä»¥å–æ¶ˆåˆ†ç±»å’Œæ–¹æ³•å­—èŠ‚ç ã€‚åœ¨ DEX æ–‡ä»¶æŸ¥çœ‹å™¨ä¸­ï¼ŒåŠ è½½è¦åˆ†æžçš„ APK çš„ ProGuard æ˜ å°„æ–‡ä»¶ã€‚åŠ è½½åŽï¼Œæ‚¨å°†èƒ½å¤Ÿé€šè¿‡é€‰æ‹©â€æ˜¾ç¤ºå­—èŠ‚ç â€å³é”®å•å‡»è¦æ£€æŸ¥çš„ç±»æˆ–æ–¹æ³•ã€‚ æ¦‚æ‹¬åœ°è¯´ï¼ŒAndroid Studio 3.6 åŒ…æ‹¬è¿™äº›æ–°çš„å¢žå¼ºåŠŸèƒ½å’ŒåŠŸèƒ½è®¾è®¡ è®¾è®¡ç¼–è¾‘å™¨ä¸­çš„æ‹†åˆ†è§†å›¾ é¢œè‰²é€‰å–å™¨èµ„æºé€‰é¡¹å¡å·² å¼€å‘ è§†å›¾ç»‘å®š NDK ä¿®æ”¹ Intelli Jå¹³å°æ›´æ”¹ Add classes with Apply Changes æž„å»º Android Gradle Plugin (AGP) å‡çº§ æ–°çš„æ‰“åŒ…å·¥å…· æµ‹è¯• Androidæ¨¡æ‹Ÿå™¨Google Maps UI å¤šæ˜¾ç¤ºå™¨æ”¯æŒ å¯æ¢å¤çš„SDKä¸‹è½½ å¯¼å…¥çš„APKçš„å°±åœ°æ›´æ–° ä¼˜åŒ–å†…å­˜æŽ¢æŸ¥å™¨ä¸­çš„æ³„æ¼æ£€æµ‹ åœ¨APKåˆ†æžå™¨ä¸­åæ··æ·†ç±»å’Œæ–¹æ³•å­—èŠ‚ç  å°†Kotlinæ¥æºé™„åŠ åˆ°å¯¼å…¥çš„APK ä¸‹è½½ä»Žä¸‹è½½é¡µé¢ä¸‹è½½ Android Studio 3.6ã€‚å¦‚æžœæ‚¨ä½¿ç”¨çš„æ˜¯æ—©æœŸç‰ˆæœ¬çš„ Android Studioï¼Œåˆ™åªéœ€å°†å…¶æ›´æ–°ä¸ºæœ€æ–°ç‰ˆæœ¬çš„ Android Studioã€‚è¦ä½¿ç”¨ä¸Šè¿° Android Emulator åŠŸèƒ½ï¼Œè¯·ç¡®ä¿æ‚¨è‡³å°‘è¿è¡Œé€šè¿‡ Android Studio SDK ç®¡ç†å™¨ä¸‹è½½çš„ Android Emulator v29.2.12ã€‚ Google ä¸‹è½½åœ°å€]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android Tips</tag>
        <tag>Android Studio</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterä¸èƒ½çƒ­åŠ è½½ï¼Œçƒ­é‡è½½æŒ‰é’®ä¸ºç°è‰²]]></title>
    <url>%2Fposts%2F628bd6da.html</url>
    <content type="text"><![CDATA[å‰è¨€ï¼ŒFlutterçš„çƒ­é‡è½½(hot reload)åŠŸèƒ½å¯ä»¥å¸®åŠ©æ‚¨åœ¨æ— éœ€é‡æ–°å¯åŠ¨åº”ç”¨çš„æƒ…å†µä¸‹å¿«é€Ÿã€è½»æ¾åœ°è¿›è¡Œæµ‹è¯•ã€æž„å»ºç”¨æˆ·ç•Œé¢ã€æ·»åŠ åŠŸèƒ½ä»¥åŠä¿®å¤é”™è¯¯ã€‚ é€šè¿‡å°†æ›´æ–°åŽçš„æºä»£ç æ–‡ä»¶æ³¨å…¥æ­£åœ¨è¿è¡Œçš„Dartè™šæ‹Ÿæœºï¼ˆVMï¼‰ä¸­æ¥å®žçŽ°çƒ­é‡è½½ã€‚ åœ¨è™šæ‹Ÿæœºä½¿ç”¨æ–°çš„çš„å­—æ®µå’Œå‡½æ•°æ›´æ–°ç±»åŽï¼ŒFlutteræ¡†æž¶ä¼šè‡ªåŠ¨é‡æ–°æž„å»ºwidgetæ ‘ï¼Œä»¥ä¾¿æ‚¨å¿«é€ŸæŸ¥çœ‹æ›´æ”¹çš„æ•ˆæžœã€‚ è¦çƒ­é‡è½½ä¸€ä¸ªFlutteråº”ç”¨ç¨‹åº: ä»Žå—æ”¯æŒçš„IntelliJ IDE ã€Android Studio æˆ–ç»ˆç«¯çª—å£è¿è¡Œåº”ç”¨ç¨‹åºã€‚ç‰©ç†æœºæˆ–è™šæ‹Ÿå™¨éƒ½å¯ä»¥è¿è¡Œã€‚ ä¿®æ”¹é¡¹ç›®ä¸­çš„ä¸€ä¸ªDartæ–‡ä»¶ã€‚å¤§å¤šæ•°ç±»åž‹çš„ä»£ç æ›´æ”¹å¯ä»¥é‡æ–°åŠ è½½; æœ‰å…³éœ€è¦å®Œå…¨é‡æ–°å¯åŠ¨çš„æ›´æ”¹åˆ—è¡¨ï¼Œè¯·å‚é˜…é™åˆ¶ã€‚ å¦‚æžœæ‚¨ä½¿ç”¨çš„æ˜¯IntelliJ IDE ã€Android Studio ï¼Œè¯·é€‰æ‹©Save All (cmd-s/ctrl-s)ï¼‰ï¼Œæˆ–è€…å•å‡»å·¥å…·æ ä¸Šçš„Hot ReloadæŒ‰é’®ã€‚ ä¸€ã€çŽ°è±¡ï¼šFlutter ä¸èƒ½çƒ­åŠ è½½ çƒ­é‡è½½æŒ‰é’®ç°è‰²ï¼Œæ— æ³•ç‚¹å‡»ã€‚ äºŒã€åˆ†æžåŽŸå› ï¼šç»ˆç«¯flutter doctor æ˜¾ç¤º NO_PROXY is not set æ²¡æœ‰è®¾ç½®æ— ä»£ç†çš„ç«¯å£ âžœ ~ flutter doctor Doctor summary (to see all details, run flutter doctor -v): [âœ“] Flutter(Channel stable, v1.7.8, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN) [âœ“] Android toolchain - develop for Android devices (Android SDK version 29.0.1) [âœ“] Xcode - develop for iOS and macOS (Xcode 10.2.1) [âœ“] iOS tools - develop for iOS devices [âœ“] Android Studio (version 3.5) [âœ“] VS Code (version 1.41.1) [!] Proxy Configuration ! NO_PROXY is not set [âœ“] Connected device (1 available) ! Doctor found issues in 1 category. é‡ç‚¹åœ¨äºŽï¼šNO_PROXY is not set ä¸‰ã€è§£å†³æ–¹æ¡ˆï¼šè®¾ç½® NO_PROXYå³å¯ 1.å¯åŠ¨ç»ˆç«¯ 2.è¿›å…¥å½“å‰ç”¨æˆ·çš„homeç›®å½• cd ~ æˆ–è€… cd /users/YourMacUserName 3.è¾“å…¥touch .bash_profile æŸ¥çœ‹å’Œç¼–è¾‘.bash_profileæ–‡ä»¶ 1.ç»ˆç«¯è¾“å…¥open -e .bash_profile 2.ç¼–è¾‘æ–‡ä»¶ï¼Œæ–°å¢ž 1export no_proxy="localhost,127.0.0.1" 3.å…³é—­ä¿å­˜ æœ€åŽæ›´æ–°é…ç½®çš„çŽ¯å¢ƒå˜é‡ è¾“å…¥: 1source .bash_profile ä¸æ‡‚è¿™å—çš„è¯ï¼Œçœ‹è¿™é‡Œè®¾ç½®Mac ç»ˆç«¯èµ°ä»£ç† æ“ä½œå¦‚ä¸‹ï¼š âžœ ~ cd ~ âžœ ~ touch .bash_profile âžœ ~ open -e .bash_profile âžœ ~ source .bash_profile âžœ ~ flutter doctor Doctor summary (to see all details, run flutter doctor -v): [âœ“] Flutter (Channel stable, v1.7.8, on Mac OS X 10.14.3 18D109, locale zh-Hans-CN) [âœ“] Android toolchain - develop for Android devices (Android SDK version 29.0.1) [âœ“] Xcode - develop for iOS and macOS (Xcode 10.2.1) [âœ“] iOS tools - develop for iOS devices [âœ“] Android Studio (version 3.5) [âœ“] VS Code (version 1.41.1) [âœ“] Proxy Configuration [âœ“] Connected device (1 available) â€¢ No issues found! âžœ ~ å››ã€éªŒè¯è¿è¡Œæ—¶ï¼Œçƒ­é‡è½½æŒ‰é’®å˜ä¸ºæ©™è‰²ï¼Œå¯ä»¥ç‚¹å‡»ã€‚ å¿«æ·é”®ä¿å­˜ç¼–è¾‘æ—¶ï¼Œè‡ªåŠ¨é‡è½½ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SourceTree_push_remote:Invalid_username_or_password.]]></title>
    <url>%2Fposts%2F44ceee89.html</url>
    <content type="text"><![CDATA[åœ¨ç½‘ç»œé‡Œé¢ç§»é™¤å°±è¡Œäº†Â· å†æŽ¨å°±ä¼šè¦ä½ é‡æ–°è¾“å…¥äº†ã€‚æœ‰ç‚¹ä¸äººæ€§åŒ–ï¼Œ mark ä¸€ä¸‹ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€æ–‡è¯»æ‡‚ Android Debug è°ƒè¯•]]></title>
    <url>%2Fposts%2Fa9889f48.html</url>
    <content type="text"><![CDATA[ä¸€ã€æ‰“ä¸Šæ–­ç‚¹ï¼Œå¯åŠ¨debugæ¨¡å¼é¦–å…ˆåœ¨æˆ‘ä»¬éœ€è¦æ‰“æ–­ç‚¹çš„ä»£ç è¡Œæ•°ä¸Šç¨å¾®åå³ï¼Œç‚¹å‡»é¼ æ ‡å·¦é”®ï¼Œå¦‚å›¾ï¼š ç‚¹å‡»å°çˆ¬è™«æŒ‰é’®ï¼Œå¯åŠ¨debugæ¨¡å¼ã€‚ è¿è¡ŒæˆåŠŸåŽå¦‚ä¸‹ã€‚å¯ä»¥çœ‹åˆ°çº¢è‰²æ¡†å†…ï¼Œä»Žä¸‹å¾€ä¸Šçš„é¡ºåºè¿è¡Œæ–¹æ³•ï¼Œä¸€ç›´é˜»å¡žåœ¨æˆ‘ä»¬æ‰“æ–­ç‚¹çš„æ–¹æ³•é‡Œï¼›ç»¿è‰²æ¬¾å†…ï¼Œåˆ™æ˜¯å±•ç¤ºç›®å‰é˜»å¡žæ–¹æ³•å†…å˜é‡å’Œå‚æ•°çš„æ•°å€¼ã€‚ äºŒã€æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·åˆ†è§£debugçš„æ¯ä¸ªæŒ‰é’®æ“ä½œ2.1ã€Step Overï¼ˆF8ï¼‰ è¿™ä¸ªæŒ‰é’®çš„æ„æ€ï¼šç¨‹åºå‘ä¸‹ä¸€æ­¥æ‰§è¡Œï¼Œä½†æ˜¯è¦æ³¨æ„ï¼Œè¿™ä¸ªæŒ‰é’®ä¸ä¼šä¸»åŠ¨è¿›å…¥æ–¹æ³•ä½“å†…ï¼Œè€Œæ˜¯ä¼šç›´æŽ¥è¿è¡Œå®Œæ•´ä¸ªæ–¹æ³•åŽç›´æŽ¥è¿è¡Œä¸‹ä¸€æ­¥ã€‚ä¾‹å¦‚ï¼šæˆ‘å½“å‰è¿è¡Œçš„debugï¼Œå¦‚æžœä¸€ç›´ç‚¹å‡»è¿™ä¸ªæŒ‰é’®çš„è¯ï¼Œä»–ä¼šåœ¨onCreate()æ–¹æ³•å†…ï¼Œæ‰§è¡Œå®Œadd(),å†æ‰§è¡Œå®Œsub(),ç„¶åŽç›´æŽ¥ç»“æŸï¼Œå¹¶ä¸ä¼šè¿›addå’Œsubæ–¹æ³•å†…åŽ»æ‰“å°ã€‚ 2.2ã€Step Intoï¼ˆF7ï¼‰ è¿™ä¸ªæŒ‰é’®çš„æ„æ€ï¼šç¨‹åºå‘ä¸‹ä¸€æ­¥æ‰§è¡Œï¼Œå’ŒStep Overçš„åŒºåˆ«æ˜¯å¦‚æžœè¯¥è¡Œæœ‰æ–¹æ³•è°ƒç”¨ä¸”ä¸ºè‡ªå®šä¹‰æ–¹æ³•ï¼Œåˆ™è¿è¡Œè¿›å…¥è‡ªå®šä¹‰æ–¹æ³•ï¼ˆä¸ä¼šè¿›å…¥å®˜æ–¹ç±»åº“çš„æ–¹æ³•ï¼‰ã€‚ ä¾‹å¦‚ï¼šæˆ‘å½“å‰è¿è¡Œçš„debugï¼Œå¦‚æžœä½ æƒ³è¿›å…¥åˆ°add()æ–¹æ³•é‡Œï¼Œé‚£ä¹ˆç‚¹å‡»Step Intoã€‚å‡å¦‚æˆ‘çš„add()æ–¹æ³•é‡Œï¼Œè¿˜è°ƒç”¨äº†å…¶ä»–çš„è‡ªå®šä¹‰æ–¹æ³•ï¼Œå¦‚æžœæ­¤æ—¶ä½ éƒ½æƒ³è¿›å…¥å„ä¸ªæ–¹æ³•æŸ¥çœ‹åˆ™ç»§ç»­ç”¨Step Intoï¼Œå‡å¦‚ä½ åªæƒ³åœç•™åœ¨add()æ–¹æ³•é‡Œï¼Œå…¶ä»–æ–¹æ³•åªéœ€è¦å¾—åˆ°ä¸ªè¿”å›žå€¼çš„è¯ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥ç”¨Step Over; 2.3ã€Force Step Into ä»Žå­—é¢æ„æ€ä¸Šä½ ä¹Ÿèƒ½çœ‹å¾—å‡ºæ¥ï¼šå¯ä»¥è¿›å…¥åŒ…æ‹¬å®˜æ–¹ç±»åº“åœ¨å†…çš„ä»»ä½•æ–¹æ³•ã€‚ä¸€èˆ¬æˆ‘è®¤ä¸ºè¿™ä¸ªæ¯”è¾ƒé€‚åˆç ”ç©¶æºç ã€‚ 2.4ã€Step out å‡å¦‚æ­¤æ—¶è°ƒè¯•åœ¨add()æ–¹æ³•é‡Œï¼Œå¦‚æžœæˆ‘ä»¬è§‰å¾—add()æ–¹æ³•æ²¡æœ‰é—®é¢˜ï¼Œæƒ³è·³å‡ºè¿™ä¸ªæ–¹æ³•ç»§ç»­debugå…¶ä»–æ–­ç‚¹æ—¶ï¼Œé‚£ä¹ˆç‚¹å‡»Step outï¼Œè·³å‡ºè¯¥æ–¹æ³•ã€‚ 2.5ã€Run to Cursor ä»Žå­—é¢æ„æ€ä¸Šçœ‹ï¼Œä»–æ˜¯ç§»åŠ¨åˆ°ä¸‹ä¸ªæ–­ç‚¹çš„æ„æ€ã€‚ç»è¿‡æµ‹è¯•å¦‚ä¸‹: 1ã€å‡å¦‚åœ¨æˆ‘ä»¬å½“å‰è¿è¡Œçš„debugï¼Œå¦‚æžœè¿˜åœ¨onCreate()æ–¹æ³•å†…ï¼Œå½“å‰æ–­ç‚¹åœ¨add()æ–¹æ³•æ—¶ï¼Œç‚¹å‡»Run to Cursorï¼Œæ–­ç‚¹ç¡®å®žä¼šç§»åŠ¨åˆ°ä¸‹ä¸ªæ–­ç‚¹åœç•™åœ¨sub()æ–¹æ³•ã€‚ 2ã€å¦‚æžœæ­¤æ—¶æˆ‘ä»¬å·²ç»è¿›å…¥åˆ°add()æ–¹æ³•ä½“å†…ï¼Œç‚¹å‡»Run to Cursor,æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œä»–åªæ˜¯è¿è¡Œå®Œä¸€æ¬¡forå¾ªçŽ¯åŽï¼Œç»§ç»­å µå¡žã€‚å¦‚ä¸‹å›¾ï¼š æ‰€ä»¥æˆ‘æ€»ç»“ä¸ºï¼ŒRun to Cursoræ˜¯åœ¨å½“å‰æ–¹æ³•ä½“å†…ï¼Œè¿è¡Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ã€‚ï¼ˆå¦‚æžœæœ‰è¯¯ï¼Œè¯·å¤§ä½¬åŠæ—¶çº æ­£ï¼‰ï¼› é‚£ä¹ˆæ­¤æ—¶ï¼Œå¦‚æžœæˆ‘ä»¬å·²ç»åœ¨add()æ–¹æ³•å†…ï¼Œå°±æ˜¯æƒ³ç›´æŽ¥è¿è¡Œåˆ°ä¸‹ä¸ªæ–­ç‚¹sub()ä¸Šï¼Œæ€Žä¹ˆæ“ä½œå‘¢ï¼Ÿç‚¹å‡»Resume Program è¿™ä¸ªæŒ‰é’®ä¸ä¼šç®¡ä½ åœ¨ä¸åœ¨æ–¹æ³•å†…ï¼Œç›´æŽ¥å›žåˆ°ä¸‹ä¸€æ­¥æ–­ç‚¹ä¸Šã€‚ ä¸‰ã€Debugè¿›é˜¶ç”¨æ³•ã€‚3.1ã€Watcheså¦‚æžœæˆ‘ä»¬åœ¨debugçš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºçŽ°å¾ˆå¤šå˜é‡ï¼Œè€Œæˆ‘ä»¬å°±æƒ³è§‚å¯Ÿé‚£ä¹ˆå‡ ä¸ªå˜é‡ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä»–åŠ åˆ°watchesé‡Œã€‚æ¯”å¦‚æˆ‘add()æ–¹æ³•é‡Œçš„å˜é‡iï¼Œ æ–¹æ³•1ï¼šåœ¨æˆ‘ä»¬è§‚å¯Ÿçš„Variablesé‡Œï¼Œæ‰¾åˆ°é‚£ä¸ªå˜é‡å³é”®ï¼Œé€‰æ‹©Add to Watches æ–¹æ³•2ï¼šåœ¨æˆ‘ä»¬çš„Watchesç•Œé¢ï¼Œç‚¹å‡»+å·ï¼Œåœ¨è¾“å…¥æ¡†å†…ï¼Œè¾“å…¥iï¼Œè¿›è¡Œæœç´¢ï¼Œä¹Ÿèƒ½æ·»åŠ åˆ°Watchesï¼Œæ–¹ä¾¿æˆ‘ä»¬debugè°ƒè¯• 3.2ã€Set Valueæ¯”å¦‚åœ¨æˆ‘ä»¬çš„add()æ–¹æ³•é‡Œï¼Œæœ‰ä¸€ä¸ªforå¾ªçŽ¯ï¼Œæ­£å¸¸è°ƒè¯•æ˜¯æ¯æ¬¡éƒ½ä¼šä»Ži=0çš„æ—¶å€™è¿›è¡Œè°ƒè¯•ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³ç›´æŽ¥ä»Ži=5çš„æ—¶å€™è¿›è¡Œè°ƒè¯•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨Variablesç•Œé¢ï¼Œæ‰¾åˆ°é‚£ä¸ªå˜é‡å€¼ï¼Œå³é”®é€‰æ‹©Set ValueåŽï¼Œè¾“å…¥æˆ‘ä»¬5ï¼Œå°±èƒ½è·³è¿‡å‰å‡ æ¬¡å¾ªçŽ¯ã€‚ 3.3ã€æŸ¥çœ‹æ‰€æœ‰æ–­ç‚¹å¼€å‘ä¸­ä½ æ‰“äº†å¾ˆå¤šæ–­ç‚¹å¿˜è®°å–æ¶ˆçš„æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç‚¹å‡»View BreakpointsæŸ¥çœ‹æ‰€æœ‰æ–­ç‚¹ æ‰“å¼€å¦‚ä¸‹ç•Œé¢ï¼š 3.4ã€åœæ­¢debugè°ƒè¯• 3.5ã€å·²ç»è¿è¡Œçš„ç¨‹åºï¼Œé¿å…é‡æ–°è¿è¡Œç¨‹åºçš„æƒ…å†µä¸‹ï¼Œæ€Žä¹ˆæ·»åŠ debugè°ƒè¯•ã€‚è¿™é‡Œå¤šè¯´å‡ å¥ï¼Œå› ä¸ºæ˜¯åœ¨å·²ç»è¿è¡Œçš„ç¨‹åºä¸Šï¼Œæ·»åŠ debugè°ƒè¯•ï¼Œé‚£ä¹ˆæ¯”å¦‚è¿›å…¥ä¸€ä¸ªé¡µé¢ï¼ŒonCreate()æ–¹æ³•é‡Œçš„ä»£ç ï¼Œéƒ½å·²ç»å…¨éƒ¨æ‰§è¡Œå®Œäº†ï¼Œæ¯”å¦‚æˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œéœ€è¦è¿è¡Œçš„æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•é‡Œæˆ‘ä»¬æ‰èƒ½æ·»åŠ debugè°ƒè¯•ã€‚æ¯”å¦‚é¦–å…ˆæ˜¯ä¸€ä¸ªæ­£å¸¸è¿è¡Œçš„ç¨‹åºï¼Œæˆ‘ä»¬ç»™ç‚¹å‡»äº‹ä»¶é‡ŒåŠ æ–­ç‚¹ã€‚ ç„¶åŽï¼Œç‚¹å‡»Attach Debugger to Android Process å¼¹å‡ºå¦‚ä¸‹é¡µé¢ï¼Œç‚¹å‡»OKå°±è¡Œäº†ï¼Œç‚¹å‡»æŒ‰é’®å°±èƒ½è¿›è¡Œdebugè°ƒè¯•äº†]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidè·³è½¬åˆ°åº”ç”¨å•†åº—è¯¦æƒ…é¡µé¢]]></title>
    <url>%2Fposts%2F916b091e.html</url>
    <content type="text"><![CDATA[Androidåº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæœ‰éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šæŽ¨å¹¿æ—¶è·³è½¬åˆ°åº”ç”¨å¸‚åœºä¸‹è½½åº”ç”¨ï¼Œè·³è½¬åˆ°åº”ç”¨å¸‚åœºç»™è‡ªå·±çš„åº”ç”¨æ‰“åˆ†ï¼Œè·³è½¬åˆ°åº”ç”¨å¸‚åœºæ›´æ–°è‡ªå·±çš„åº”ç”¨ã€‚é‚£å¦‚ä½•è·³è½¬åˆ°åº”ç”¨å¸‚åœºå‘¢ï¼Ÿ å¯èƒ½è·³è½¬çš„æ–¹æ³•å¤§å®¶éƒ½æ˜¯çŸ¥é“çš„ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š 123456789public static void goToMarket(Context context, String packageName) &#123; Uri uri = Uri.parse("market://details?id=" + packageName); Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri); try &#123; context.startActivity(goToMarket); &#125; catch (ActivityNotFoundException e) &#123; e.printStackTrace(); &#125;&#125; æ­¤æ–¹æ³•æ”¯æŒåº”ç”¨å®ã€360æ‰‹æœºåŠ©æ‰‹ã€è±Œè±†èšã€å°ç±³å•†åº—ç­‰ä¸»æµçš„åº”ç”¨å¸‚åœºï¼Œå½“æ‰‹æœºä¸Šé¢è£…æœ‰å¤šä¸ªåº”ç”¨å¸‚åœºæ—¶ï¼Œåˆ™ä¼šå¼¹å‡ºèœå•è®©ç”¨æˆ·é€‰æ‹©è°ƒè½¬åˆ°å“ªä¸ªå¸‚åœºã€‚é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œå¦‚æžœè¿™ä¹ˆç®€å•å°±ç»“æŸäº†ï¼Œæ€Žä¹ˆè¿˜ä¼šæœ‰è¿™ç¯‡æ–‡ç« å‘¢ï¼Ÿ åœ¨çº¢ç±³Note2ä¸Šæµ‹è¯•æ—¶å‘çŽ°ï¼Œè°ƒç”¨æ­¤æ–¹æ³•é»˜è®¤æ˜¯ç›´æŽ¥è°ƒè½¬åˆ°å°ç±³å¸‚åœºï¼Œé‚£å¦‚æžœåœ¨å°ç±³æ‰‹æœºä¸Šï¼Œæƒ³è¦è·³è½¬åˆ°åº”ç”¨å®æˆ–è€…å…¶ä»–çš„åº”ç”¨å¸‚åœºæ€Žä¹ˆåŠžå‘¢ï¼Œæ–¹æ³•è‡ªç„¶æ˜¯æœ‰çš„ï¼Œå¦‚ä¸‹ï¼š 12345678910public static void goToMarket(Context context, String packageName) &#123; Uri uri = Uri.parse("market://details?id=" + packageName); Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri); try &#123; goToMarket.setClassName("com.tencent.android.qqdownloader", "com.tencent.pangu.link.LinkProxyActivity"); context.startActivity(goToMarket); &#125; catch (ActivityNotFoundException e) &#123; e.printStackTrace(); &#125;&#125; çœ‹èµ·æ¥å¥½åƒå’Œç¬¬ä¸€ä¸ªæ–¹æ³•æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œæ˜¯çš„ï¼Œåªéœ€è¦ç»™å¤šè°ƒç”¨goToMarket.setClassName()æ–¹æ³•ï¼Œè®¾ç½®æŒ‡å®šçš„åº”ç”¨åŽ»å¤„ç†è¿™ä¸ªIntentäº‹ä»¶ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨å°ç±³æ‰‹æœºä¸Šè·³è½¬åˆ°åº”ç”¨å®çš„åº”ç”¨è¯¦æƒ…é¡µé¢ï¼Œè€Œä¸”ï¼Œä¸Šä¸€ä¸ªæ–¹æ³•å¦‚æžœåœ¨æ‰‹æœºä¸Šè£…æœ‰å¤šä¸ªåº”ç”¨å¸‚åœºæ—¶ï¼Œä¼šå¼¹å‡ºèœå•è®©ç”¨æˆ·é€‰æ‹©ï¼Œå¦‚æžœå·²ç»ç¡®å®šå¥½è¦è·³è½¬åˆ°å“ªä¸ªåº”ç”¨å¸‚åœºæ—¶ï¼Œä¹Ÿå¯ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œç›´æŽ¥è·³è½¬ï¼ŒçœåŽ»ä¸­é—´ç”¨æˆ·é€‰æ‹©çš„çŽ¯èŠ‚ã€‚ ä½†æ˜¯ä¸Šé¢æ–¹æ³•çš„æ€è·¯ä¼¼ä¹Žå¹¶ä¸èƒ½å¯¹æ‰€æœ‰çš„åº”ç”¨å¸‚åœºæœ‰æ•ˆï¼Œå“ªå¤©äº§å“ç»ç†æå‡ºè¦è·³è½¬åˆ°ä¸‰æ˜Ÿçš„åº”ç”¨å¸‚åœºï¼Œæ¯•ç«Ÿä¸‰æ˜Ÿæ‰‹æœºåœ¨å›½å†…çš„å æœ‰çŽ‡è¿˜æ˜¯æŽ’å‰å‡ ä½çš„ï¼Œå†ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œå‘çŽ°æ‡µé€¼äº†ï¼Œä¸‰æ˜Ÿå¸‚åœºç«Ÿç„¶ä¸æ”¯æŒè¿™ç§æ–¹å¼ï¼Œéš¾æ€ªä¸‰æ˜Ÿæ‰‹æœºåœ¨å›½å†…å¸‚åœºèŠ‚èŠ‚è´¥é€€ã€‚ä¸è¿‡å†ç¬”è€…çš„åŠªåŠ›ä¸‹ç»ˆäºŽæ‰¾åˆ°äº†å¦‚ä¸‹æ–¹æ³•ï¼š 1234567891011public static void goToSamsungappsMarket(Context context, String packageName) &#123; Uri uri = Uri.parse("http://www.samsungapps.com/appquery/appDetail.as?appId=" + packageName); Intent goToMarket = new Intent(); goToMarket.setClassName("com.sec.android.app.samsungapps", "com.sec.android.app.samsungapps.Main"); goToMarket.setData(uri); try &#123; context.startActivity(goToMarket); &#125; catch (ActivityNotFoundException e) &#123; e.printStackTrace(); &#125;&#125; ä¸è¿‡ï¼ŒåŽæ¥å‘çŽ°åœ¨ä¹è§†æ‰‹æœºä¸Šé¢ï¼Œä¹è§†çš„åº”ç”¨å¸‚åœºä¹Ÿæ˜¯ä¸æ”¯æŒgoToMarket()æ–¹æ³•çš„ï¼Œæ‰€ä»¥åˆä¸“é—¨è°ƒç ”äº†è·³è½¬ä¹è§†åº”ç”¨å¸‚åœºçš„æ–¹æ³•ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š 1234567void goToLeTVStoreDetail(Context context, String packageName) &#123; Intent intent = new Intent(); intent.setClassName("com.letv.app.appstore", "com.letv.app.appstore.appmodule.details.DetailsActivity"); intent.setAction("com.letv.app.appstore.appdetailactivity"); intent.putExtra("packageName", packageName); context.startActivity(intent); &#125; ä»¥ä¸Šæ–¹æ³•ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°æœ‰éœ€è¦çš„äººã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * è·³è½¬åˆ°è°·æ­Œåº”ç”¨å¸‚åœº * * @param context * @param packageName */public static void goToGoogleMarket(Context context, String packageName) &#123; try &#123; Intent intent = new Intent(Intent.ACTION_VIEW); intent.setData(Uri.parse("market://details?id=" + packageName)); intent.setPackage("com.android.vending");//è¿™é‡Œå¯¹åº”çš„æ˜¯è°·æ­Œå•†åº—ï¼Œè·³è½¬åˆ«çš„å•†åº—æ”¹æˆå¯¹åº”çš„å³å¯ if (intent.resolveActivity(context.getPackageManager()) != null) &#123; context.startActivity(intent); &#125; else &#123;//æ²¡æœ‰åº”ç”¨å¸‚åœºï¼Œé€šè¿‡æµè§ˆå™¨è·³è½¬åˆ°Google Play Intent intent2 = new Intent(Intent.ACTION_VIEW); intent2.setData(Uri.parse("https://play.google.com/store/apps/details?id=" + packageName)); if (intent2.resolveActivity(context.getPackageManager()) != null) &#123; context.startActivity(intent2); &#125; else &#123; //æ²¡æœ‰Google Play ä¹Ÿæ²¡æœ‰æµè§ˆå™¨ &#125; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125;/** * è·³è½¬åˆ°ä¸‰æ˜Ÿåº”ç”¨å¸‚åœº * * @param context * @param packageName */public static void goToSamsungappsMarket(Context context, String packageName) &#123; try &#123; Uri uri = Uri.parse("http://www.samsungapps.com/appquery/appDetail.as?appId=" + packageName); Intent goToMarket = new Intent(); goToMarket.setClassName("com.sec.android.app.samsungapps", "com.sec.android.app.samsungapps.Main"); goToMarket.setData(uri); context.startActivity(goToMarket); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TextViewå­—ä½“å¤§å°è‡ªé€‚åº”]]></title>
    <url>%2Fposts%2F14fca390.html</url>
    <content type="text"><![CDATA[æè¿°åœ¨è¿›è¡Œandroid å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°TextView ä¸­æ–‡æœ¬æ˜¾ç¤ºä¸å…¨çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™æƒ³æ ¹æ®æ–‡æœ¬çš„é•¿åº¦è‡ªåŠ¨æ”¹å˜å­—ä½“å¤§å°ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ—¶å€™è‡ªå®šä¹‰View ï¼Œä½†æ˜¯å‘¢åœ¨Android O ä¸­å·²ç»æä¾›äº†å®žçŽ°æ–¹å¼ï¼Œå¹¶ä¸”æ‹¥æœ‰å…¼å®¹åº“ï¼Œæœ€ä½Žæ”¯æŒåˆ°API 14,è¿™çž¬é—´å°±çˆ½åˆ°æˆ‘äº†ï¼Œä¸å¤šBB äº†ï¼Œç›´æŽ¥çœ‹å®žçŽ°ã€‚ é‡ç‚¹æ³¨æ„ï¼šå¦‚æžœä»£ç ä¸­è®¾ç½®äº†ä»¥ä¸‹çš„ä»£ç ï¼Œä¸ç”Ÿæ•ˆã€‚ 1android:singleLine="true" å¿…é¡»è®¾ç½®çš„å±žæ€§æ˜¯ï¼š 1android:maxLines="1" æ•ˆæžœå›¾æ²¡æœ‰æ•ˆæžœå›¾ï¼Œå¦‚æžœä½ ç”¨è¿‡ä»Šæ—¥å¤´æ¡æ·»åŠ é¢‘é“çš„è¯ï¼Œè¿™é‡Œå°±ä¸ä¼šéª‚æˆ‘äº†ã€‚ é€šè¿‡ä»£ç æ–¹å¼åœ¨ä»£ç ä¸­è°ƒç”¨å‡½æ•° setAutoSizeTextTypeWithDefaults(@AutoSizeTextType int autoSizeTextType) å¹¶æŒ‡å®šå‚æ•°ä¸º AUTO_SIZE_TEXT_TYPE_UNIFORMæ¥è®¾ç½®é»˜è®¤å€¼ã€‚å¦‚æžœä½ ä¸æƒ³å¯ç”¨è‡ªåŠ¨è°ƒæ•´å­—ä½“å¤§å°çš„åŠŸèƒ½ï¼Œåˆ™å¯ä»¥è®¾ç½®å‚æ•°ä¸º AUTO_SIZE_TEXT_TYPE_NONE. 1textView.setAutoSizeTextTypeWithDefaults(TextView.AUTO_SIZE_TEXT_TYPE_UNIFORM); æˆ–è€…è®¾ç½®ç²’åº¦ï¼ˆè®¾ç½®æœ€å¤§åªå’Œæœ€å°å€¼ï¼Œå¹¶ä¸”æŒ‡å®šæ¯æ¬¡è°ƒæ•´çš„å¢žé‡å€¼ï¼‰ï¼š 12//autoSizeMinTextSize æœ€å°å€¼ï¼›autoSizeMaxTextSizeï¼šæœ€å¤§å€¼ï¼›autoSizeStepGranularityï¼šå¢žé‡ï¼›unitï¼šç±»åž‹ï¼Œæ­¤å¤„æŒ‡å®šçš„æ˜¯sptextView.setAutoSizeTextTypeUniformWithConfiguration(10,17,1,TypedValue.COMPLEX_UNIT_SP); é€šè¿‡xml æ–¹å¼(æŽ¨èçš„æ–¹å¼)1234567891011&lt;TextView android:id="@+id/title" android:layout_width="wrap_content" android:layout_height="wrap_content" android:gravity="center" android:layout_gravity="center" app:autoSizeTextType="uniform" app:autoSizeMinTextSize="3sp" app:autoSizeMaxTextSize="15sp" app:autoSizeStepGranularity="1sp" android:maxLines="1"/&gt;]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­å¸¸ç”¨çš„åŠ å¯†æ–¹å¼]]></title>
    <url>%2Fposts%2Fcaa299cc.html</url>
    <content type="text"><![CDATA[ä¸€ã€RsaåŠ å¯†1ã€RSAæ˜¯ç¬¬ä¸€ç§æ—¢å¯ä»¥ç”¨äºŽæ•°æ®åŠ å¯†ï¼Œä¹Ÿå¯ä»¥ç”¨äºŽæ•°å­—ç­¾åçš„ç®—æ³•ï¼›2ã€ç®—æ³•åŽŸç†ï¼š1ï¼‰ã€éšæœºäº§ç”Ÿä¸¤ä¸ªå¤§çš„è´¨æ•°mã€nä¸”mï¼=nï¼Œè®¡ç®—K1=mnï¼› 2)ã€é€‰æ‹©ä¸€ä¸ªå¤§äºŽ1å°äºŽk1çš„è‡ªç„¶æ•°k2ï¼Œk2å¿…é¡»ä¸Ž(m-1)(n-1)äº’ä¸ºç´ æ•°ï¼› 3)ã€è®¡ç®—å¾—åˆ°dâ€”&gt;d x k2=1(mod(m-1)(n-1)); 4)ã€é”€æ¯mnï¼› æœ€ç»ˆäº§ç”Ÿçš„k1å’Œk2ä¸ºâ€œå…¬é’¥â€ï¼Œdä¸ºâ€œç§é’¥â€ï¼Œå‘é€æ–¹ä½¿ç”¨k1è¿›è¡ŒåŠ å¯†ï¼ŒæŽ¥æ”¶æ–¹ä½¿ç”¨dè¿›è¡Œè§£å¯†ã€‚ 3ã€æ³¨æ„ï¼š1ã€RSAçš„å®‰å…¨æ€§ä¾èµ–äºŽå¤§æ•°åˆ†è§£ï¼Œå°äºŽ1024ä½çš„k1è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼› 2ã€RSAçš„è®¡ç®—é€Ÿåº¦æ…¢ã€‚ 4ã€ä½¿ç”¨1ã€ç”Ÿæˆå¯†é’¥å¯¹ 1234567891011121314151617/** * éšæœºç”ŸæˆRSAå¯†é’¥å¯¹ * * @param keyLength å¯†é’¥é•¿åº¦ï¼ŒèŒƒå›´ï¼š512ï½ž2048 * ä¸€èˆ¬1024 * @return */public static KeyPair generateRSAKeyPair(int keyLength) &#123; try &#123; KeyPairGenerator kpg = KeyPairGenerator.getInstance(RSA); kpg.initialize(keyLength); return kpg.genKeyPair(); &#125; catch (NoSuchAlgorithmException e) &#123; e.printStackTrace(); return null; &#125;&#125; 2ã€å…¬é’¥åŠ å¯† 123456789101112131415/** * ç”¨å…¬é’¥å¯¹å­—ç¬¦ä¸²è¿›è¡ŒåŠ å¯† * * @param data åŽŸæ–‡ */ public static byte[] encryptByPublicKey(byte[] data, byte[] publicKey) throws Exception &#123; // å¾—åˆ°å…¬é’¥ X509EncodedKeySpec keySpec = new X509EncodedKeySpec(publicKey); KeyFactory kf = KeyFactory.getInstance(RSA); PublicKey keyPublic = kf.generatePublic(keySpec); // åŠ å¯†æ•°æ® Cipher cp = Cipher.getInstance(ECB_PKCS1_PADDING); cp.init(Cipher.ENCRYPT_MODE, keyPublic); return cp.doFinal(data); &#125; 3ã€ç§é’¥åŠ å¯† 1234567891011121314151617/** * ç§é’¥åŠ å¯† * * @param data å¾…åŠ å¯†æ•°æ® * @param privateKey å¯†é’¥ * @return byte[] åŠ å¯†æ•°æ® */ public static byte[] encryptByPrivateKey(byte[] data, byte[] privateKey) throws Exception &#123; // å¾—åˆ°ç§é’¥ PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(privateKey); KeyFactory kf = KeyFactory.getInstance(RSA); PrivateKey keyPrivate = kf.generatePrivate(keySpec); // æ•°æ®åŠ å¯† Cipher cipher = Cipher.getInstance(ECB_PKCS1_PADDING); cipher.init(Cipher.ENCRYPT_MODE, keyPrivate); return cipher.doFinal(data); &#125; æœ‰åŠ å¯†è‡ªç„¶ä¹Ÿå¾—æœ‰è§£å¯† 1ã€å…¬é’¥è§£å¯† 1234567891011121314151617/** * å…¬é’¥è§£å¯† * * @param data å¾…è§£å¯†æ•°æ® * @param publicKey å¯†é’¥ * @return byte[] è§£å¯†æ•°æ® */ public static byte[] decryptByPublicKey(byte[] data, byte[] publicKey) throws Exception &#123; // å¾—åˆ°å…¬é’¥ X509EncodedKeySpec keySpec = new X509EncodedKeySpec(publicKey); KeyFactory kf = KeyFactory.getInstance(RSA); PublicKey keyPublic = kf.generatePublic(keySpec); // æ•°æ®è§£å¯† Cipher cipher = Cipher.getInstance(ECB_PKCS1_PADDING); cipher.init(Cipher.DECRYPT_MODE, keyPublic); return cipher.doFinal(data); &#125; 2ã€ç§é’¥è§£å¯† 123456789101112131415/** * ä½¿ç”¨ç§é’¥è¿›è¡Œè§£å¯† */ public static byte[] decryptByPrivateKey(byte[] encrypted, byte[] privateKey) throws Exception &#123; // å¾—åˆ°ç§é’¥ PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(privateKey); KeyFactory kf = KeyFactory.getInstance(RSA); PrivateKey keyPrivate = kf.generatePrivate(keySpec); // è§£å¯†æ•°æ® Cipher cp = Cipher.getInstance(ECB_PKCS1_PADDING); cp.init(Cipher.DECRYPT_MODE, keyPrivate); byte[] arr = cp.doFinal(encrypted); return arr; &#125; ç”¨åˆ°çš„å…¨å±€å˜é‡ 12345678910// éžå¯¹ç§°åŠ å¯†å¯†é’¥ç®—æ³• public static final String RSA = "RSA"; //åŠ å¯†å¡«å……æ–¹å¼ public static final String ECB_PKCS1_PADDING = "RSA/ECB/PKCS1Padding"; //ç§˜é’¥é»˜è®¤é•¿åº¦ public static final int DEFAULT_KEY_SIZE = 2048; // å½“è¦åŠ å¯†çš„å†…å®¹è¶…è¿‡bufferSizeï¼Œåˆ™é‡‡ç”¨partSplitè¿›è¡Œåˆ†å—åŠ å¯† public static final byte[] DEFAULT_SPLIT = "#PART#".getBytes(); // å½“å‰ç§˜é’¥æ”¯æŒåŠ å¯†çš„æœ€å¤§å­—èŠ‚æ•° public static final int DEFAULT_BUFFERSIZE = (DEFAULT_KEY_SIZE / 8) - 11; å…³äºŽåŠ å¯†å¡«å……æ–¹å¼ï¼šä¹‹å‰ä»¥ä¸ºä¸Šé¢è¿™äº›æ“ä½œå°±èƒ½å®žçŽ°rsaåŠ è§£å¯†ï¼Œä»¥ä¸ºä¸‡äº‹å¤§å‰äº†ï¼Œå‘µå‘µï¼Œè¿™äº‹è¿˜æ²¡å®Œï¼Œæ‚²å‰§è¿˜æ˜¯å‘ç”Ÿäº†ï¼ŒAndroidè¿™è¾¹åŠ å¯†è¿‡çš„æ•°æ®ï¼ŒæœåŠ¡å™¨ç«¯æ­»æ´»è§£å¯†ä¸äº†ï¼ŒåŽŸæ¥androidç³»ç»Ÿçš„RSAå®žçŽ°æ˜¯&quot;RSA/None/NoPadding&quot;ï¼Œè€Œæ ‡å‡†JDKå®žçŽ°æ˜¯&quot;RSA/None/PKCS1Padding&quot;ï¼Œè¿™é€ æˆäº†åœ¨androidæœºä¸ŠåŠ å¯†åŽæ— æ³•åœ¨æœåŠ¡å™¨ä¸Šè§£å¯†çš„åŽŸå› ï¼Œæ‰€ä»¥åœ¨å®žçŽ°çš„æ—¶å€™è¿™ä¸ªä¸€å®šè¦æ³¨æ„ã€‚ äºŒã€DESåŠ å¯†1ã€ç®€å•ä»‹ç»DESæ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œæ‰€è°“å¯¹ç§°åŠ å¯†ç®—æ³•å³ï¼šåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ç›¸åŒå¯†é’¥çš„ç®—æ³•ã€‚DESåŠ å¯†ç®—æ³•å‡ºè‡ªIBMçš„ç ”ç©¶ï¼ŒåŽæ¥è¢«ç¾Žå›½æ”¿åºœæ­£å¼é‡‡ç”¨ï¼Œä¹‹åŽå¼€å§‹å¹¿æ³›æµä¼ ï¼Œä½†æ˜¯è¿‘äº›å¹´ä½¿ç”¨è¶Šæ¥è¶Šå°‘ï¼Œå› ä¸ºDESä½¿ç”¨56ä½å¯†é’¥ï¼Œä»¥çŽ°ä»£è®¡ç®—èƒ½åŠ›ï¼Œ24å°æ—¶å†…å³å¯è¢«ç ´è§£ã€‚ åˆ’é‡ç‚¹ ï¼šDESä¸å¤ªå®‰å…¨ã€‚2ã€é™æ€ç§˜é’¥DESåŠ å¯†æ–¹å¼ä½¿ç”¨1ï¼‰ã€DESåŠ å¯†ä»£ç  123456789101112131415161718/** *DES åŠ å¯† * * @param message åŽŸæ–‡ * @param key å¯†é’¥,é•¿åº¦ä¸èƒ½å¤Ÿå°äºŽ8ä½ * @return * @throws Exception */ public static String desEncrypt(String message, String key) throws Exception &#123; Cipher cipher = Cipher.getInstance("DES/CBC/PKCS5Padding"); DESKeySpec desKeySpec = new DESKeySpec(key.getBytes("UTF-8")); SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("DES"); SecretKey secretKey = keyFactory.generateSecret(desKeySpec); IvParameterSpec iv = new IvParameterSpec(key.getBytes("UTF-8")); cipher.init(Cipher.ENCRYPT_MODE, secretKey, iv); byte[] encryptbyte = cipher.doFinal(message.getBytes()); return new String(Base64.encode(encryptbyte, Base64.DEFAULT)).trim(); &#125; 2ã€DESè§£å¯†ä»£ç  1234567891011121314151617181920/** * DESè§£å¯† * * @param message å¯†æ–‡ * @param key å¯†é’¥,é•¿åº¦ä¸èƒ½å¤Ÿå°äºŽ8ä½ * @return * @throws Exception */ public static String desDecrypt(String message, String key) throws Exception &#123; byte[] bytesrc = Base64.decode(message.getBytes(), Base64.DEFAULT); Cipher cipher = Cipher.getInstance("DES/CBC/PKCS5Padding"); DESKeySpec desKeySpec = new DESKeySpec(key.getBytes("UTF-8")); SecretKeyFactory keyFactory = SecretKeyFactory.getInstance("DES"); SecretKey secretKey = keyFactory.generateSecret(desKeySpec); IvParameterSpec iv = new IvParameterSpec(key.getBytes("UTF-8")); cipher.init(Cipher.DECRYPT_MODE, secretKey, iv); byte[] retByte = cipher.doFinal(bytesrc); return new String(retByte); &#125; 3ã€åŠ¨æ€ç§˜é’¥åŠ å¯†æ–¹å¼1ã€DESåŠ å¯†å¸¸ç”¨çš„å¸¸é‡ 123456789 private final static String HEX = "0123456789ABCDEF"; //DESæ˜¯åŠ å¯†æ–¹å¼ CBCæ˜¯å·¥ä½œæ¨¡å¼ PKCS5Paddingæ˜¯å¡«å……æ¨¡å¼ private final static String TRANSFORMATION = "DES/CBC/PKCS5Padding"; //åˆå§‹åŒ–å‘é‡å‚æ•°ï¼ŒAES ä¸º16bytes. DES ä¸º8bytes. private final static String IVPARAMETERSPEC = "01020304"; //DESæ˜¯åŠ å¯†æ–¹å¼ private final static String ALGORITHM = "DES";// SHA1PRNG å¼ºéšæœºç§å­ç®—æ³•, è¦åŒºåˆ«4.2ä»¥ä¸Šç‰ˆæœ¬çš„è°ƒç”¨æ–¹æ³• private static final String SHA1PRNG = "SHA1PRNG"; 2ã€åŠ¨æ€ç”Ÿæˆç§˜é’¥ 123456789101112131415161718192021222324252627282930 /** ç”Ÿæˆéšæœºæ•°ï¼Œå¯ä»¥å½“åšåŠ¨æ€çš„å¯†é’¥ åŠ å¯†å’Œè§£å¯†çš„å¯†é’¥å¿…é¡»ä¸€è‡´ï¼Œä¸ç„¶å°†ä¸èƒ½è§£å¯†*/ public static String generateKey() &#123; try &#123; SecureRandom localSecureRandom = SecureRandom.getInstance(SHA1PRNG); byte[] bytes_key = new byte[20]; localSecureRandom.nextBytes(bytes_key); String str_key = toHex(bytes_key); return str_key; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return null; &#125; //äºŒè¿›åˆ¶è½¬å­—ç¬¦ public static String toHex(byte[] buf) &#123; if (buf == null) return ""; StringBuffer result = new StringBuffer(2 * buf.length); for (int i = 0; i &lt; buf.length; i++) &#123; appendHex(result, buf[i]); &#125; return result.toString(); &#125; private static void appendHex(StringBuffer sb, byte b) &#123; sb.append(HEX.charAt((b &gt;&gt; 4) &amp; 0x0f)).append(HEX.charAt(b &amp; 0x0f)); &#125; 3ã€å¤„ç†ç§˜é’¥ æ–¹å¼ä¸€ã€ 12345678910111213141516171819// å¯¹å¯†é’¥è¿›è¡Œå¤„ç† private static Key getRawKey(String key) throws Exception &#123; KeyGenerator kgen = KeyGenerator.getInstance(ALGORITHM); //for android SecureRandom sr = null; // åœ¨4.2ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼ŒSecureRandomèŽ·å–æ–¹å¼å‘ç”Ÿäº†æ”¹å˜ if (android.os.Build.VERSION.SDK_INT &gt;= 17) &#123; sr = SecureRandom.getInstance(SHA1PRNG, "Crypto"); &#125; else &#123; sr = SecureRandom.getInstance(SHA1PRNG); &#125; // for Java // secureRandom = SecureRandom.getInstance(SHA1PRNG); sr.setSeed(key.getBytes()); kgen.init(64, sr); //DESå›ºå®šæ ¼å¼ä¸º64bitsï¼Œå³8bytesã€‚ SecretKey skey = kgen.generateKey(); byte[] raw = skey.getEncoded(); return new SecretKeySpec(raw, ALGORITHM); &#125; æ–¹å¼äºŒ 123456/ å¯¹å¯†é’¥è¿›è¡Œå¤„ç† private static Key getRawKey(String key) throws Exception &#123; DESKeySpec dks = new DESKeySpec(key.getBytes()); SecretKeyFactory keyFactory = SecretKeyFactory.getInstance(ALGORITHM); return keyFactory.generateSecret(dks); &#125; 4ã€åŠ å¯†å®žçŽ° 123456789101112131415161718192021222324252627282930/** * DESç®—æ³•ï¼ŒåŠ å¯† * * @param data å¾…åŠ å¯†å­—ç¬¦ä¸² * @param key åŠ å¯†ç§é’¥ï¼Œé•¿åº¦ä¸èƒ½å¤Ÿå°äºŽ8ä½ * @return åŠ å¯†åŽçš„å­—èŠ‚æ•°ç»„ï¼Œä¸€èˆ¬ç»“åˆBase64ç¼–ç ä½¿ç”¨ */ public static String encode(String key, String data) &#123; return encode(key, data.getBytes()); &#125; /** * DESç®—æ³•ï¼ŒåŠ å¯† * * @param data å¾…åŠ å¯†å­—ç¬¦ä¸² * @param key åŠ å¯†ç§é’¥ï¼Œé•¿åº¦ä¸èƒ½å¤Ÿå°äºŽ8ä½ * @return åŠ å¯†åŽçš„å­—èŠ‚æ•°ç»„ï¼Œä¸€èˆ¬ç»“åˆBase64ç¼–ç ä½¿ç”¨ */ public static String encode(String key, byte[] data) &#123; try &#123; Cipher cipher = Cipher.getInstance(TRANSFORMATION); IvParameterSpec iv = new IvParameterSpec(IVPARAMETERSPEC.getBytes()); cipher.init(Cipher.ENCRYPT_MODE, getRawKey(key), iv); byte[] bytes = cipher.doFinal(data); return Base64.encodeToString(bytes, Base64.DEFAULT); &#125; catch (Exception e) &#123; return null; &#125; &#125; 5ã€è§£å¯†å®žçŽ° 123456789101112131415161718192021222324252627282930/** * èŽ·å–ç¼–ç åŽçš„å€¼ * * @param key * @param data * @return */ public static String decode(String key, String data) &#123; return decode(key, Base64.decode(data, Base64.DEFAULT)); &#125; /** * DESç®—æ³•ï¼Œè§£å¯† * * @param data å¾…è§£å¯†å­—ç¬¦ä¸² * @param key è§£å¯†ç§é’¥ï¼Œé•¿åº¦ä¸èƒ½å¤Ÿå°äºŽ8ä½ * @return è§£å¯†åŽçš„å­—èŠ‚æ•°ç»„ */ public static String decode(String key, byte[] data) &#123; try &#123; Cipher cipher = Cipher.getInstance(TRANSFORMATION); IvParameterSpec iv = new IvParameterSpec(IVPARAMETERSPEC.getBytes()); cipher.init(Cipher.DECRYPT_MODE, getRawKey(key), iv); byte[] original = cipher.doFinal(data); String originalString = new String(original); return originalString; &#125; catch (Exception e) &#123; return null; &#125; &#125; ä¸‰ã€AESåŠ å¯†1ã€ç®€å•ä»‹ç»é«˜çº§åŠ å¯†æ ‡å‡† 2ã€åŠ å¯†ä½¿ç”¨æ–¹æ³•1ã€AESç”¨åˆ°çš„å¸¸é‡ 1234567private final static String HEX = "0123456789ABCDEF"; //AESæ˜¯åŠ å¯†æ–¹å¼ CBCæ˜¯å·¥ä½œæ¨¡å¼ PKCS5Paddingæ˜¯å¡«å……æ¨¡å¼ private static final String CBC_PKCS5_PADDING = "AES/CBC/PKCS5Padding"; //AES åŠ å¯† private static final String AES = "AES"; // SHA1PRNG å¼ºéšæœºç§å­ç®—æ³•, è¦åŒºåˆ«4.2ä»¥ä¸Šç‰ˆæœ¬çš„è°ƒç”¨æ–¹æ³• private static final String SHA1PRNG="SHA1PRNG"; 2ã€åŠ¨æ€ç”Ÿæˆç§˜é’¥ 123456789101112public static String generateKey() &#123; try &#123; SecureRandom localSecureRandom = SecureRandom.getInstance(SHA1PRNG); byte[] bytes_key = new byte[20]; localSecureRandom.nextBytes(bytes_key); String str_key = toHex(bytes_key); return str_key; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return null; &#125; 3ã€å¯¹ç§˜é’¥è¿›è¡Œå¤„ç† 123456789101112131415161718192021222324252627private static byte[] getRawKey(byte[] seed) throws Exception &#123; KeyGenerator kgen = KeyGenerator.getInstance(AES); //for android SecureRandom sr = null; // åœ¨4.2ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼ŒSecureRandomèŽ·å–æ–¹å¼å‘ç”Ÿäº†æ”¹å˜ int sdk_version = android.os.Build.VERSION.SDK_INT; // Android 6.0 ä»¥ä¸Š if(sdk_version&gt;23)&#123; sr = SecureRandom.getInstance(SHA1PRNG,new CryptoProvider()); //4.2åŠä»¥ä¸Š &#125;else if(android.os.Build.VERSION.SDK_INT &gt;= 17)&#123; sr = SecureRandom.getInstance(SHA1PRNG, "Crypto"); &#125;else &#123; sr = SecureRandom.getInstance(SHA1PRNG); &#125; // for Java // secureRandom = SecureRandom.getInstance(SHA1PRNG); sr.setSeed(seed); //256 bits or 128 bits,192bits kgen.init(128, sr); //AESä¸­128ä½å¯†é’¥ç‰ˆæœ¬æœ‰10ä¸ªåŠ å¯†å¾ªçŽ¯ï¼Œ192æ¯”ç‰¹å¯†é’¥ç‰ˆæœ¬æœ‰12ä¸ªåŠ å¯†å¾ªçŽ¯ï¼Œ256æ¯”ç‰¹å¯†é’¥ç‰ˆæœ¬åˆ™æœ‰14ä¸ªåŠ å¯†å¾ªçŽ¯ã€‚ SecretKey skey = kgen.generateKey(); byte[] raw = skey.getEncoded(); return raw; &#125; 4ã€åŠ å¯† 123456789101112public static String encrypt(String key, String cleartext) &#123; if (TextUtils.isEmpty(cleartext)) &#123; return cleartext; &#125; try &#123; byte[] result = encrypt(key, cleartext.getBytes()); return new String(Base64.encode(result,Base64.DEFAULT)); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return null; &#125; æˆ–è€… 12345678private static byte[] encrypt(String key, byte[] clear) throws Exception &#123; byte[] raw = getRawKey(key.getBytes()); SecretKeySpec skeySpec = new SecretKeySpec(raw, AES); Cipher cipher = Cipher.getInstance(CBC_PKCS5_PADDING); cipher.init(Cipher.ENCRYPT_MODE, skeySpec, new IvParameterSpec(new byte[cipher.getBlockSize()])); byte[] encrypted = cipher.doFinal(clear); return encrypted; &#125; 5ã€è§£å¯† 12345678910111213public static String decrypt(String key, String encrypted) &#123; if (TextUtils.isEmpty(encrypted)) &#123; return encrypted; &#125; try &#123; byte[] enc = Base64.decode(encrypted,Base64.DEFAULT); byte[] result = decrypt(key, enc); return new String(result); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return null; &#125; æˆ–è€… 12345678private static byte[] decrypt(String key, byte[] encrypted) throws Exception &#123; byte[] raw = getRawKey(key.getBytes()); SecretKeySpec skeySpec = new SecretKeySpec(raw, AES); Cipher cipher = Cipher.getInstance(CBC_PKCS5_PADDING); cipher.init(Cipher.DECRYPT_MODE, skeySpec, new IvParameterSpec(new byte[cipher.getBlockSize()])); byte[] decrypted = cipher.doFinal(encrypted); return decrypted; &#125; 6ã€è¾…åŠ©æ–¹æ³• 1234567891011121314151617181920212223242526272829 //äºŒè¿›åˆ¶è½¬å­—ç¬¦ public static String toHex(byte[] buf) &#123; if (buf == null) return ""; StringBuffer result = new StringBuffer(2 * buf.length); for (int i = 0; i &lt; buf.length; i++) &#123; appendHex(result, buf[i]); &#125; return result.toString(); &#125; private static void appendHex(StringBuffer sb, byte b) &#123; sb.append(HEX.charAt((b &gt;&gt; 4) &amp; 0x0f)).append(HEX.charAt(b &amp; 0x0f)); &#125;// å¢žåŠ  CryptoProvider ç±» public static class CryptoProvider extends Provider &#123; /** * Creates a Provider and puts parameters */ public CryptoProvider() &#123; super("Crypto", 1.0, "HARMONY (SHA1 digest; SecureRandom; SHA1withDSA signature)"); put("SecureRandom.SHA1PRNG", "org.apache.harmony.security.provider.crypto.SHA1PRNG_SecureRandomImpl"); put("SecureRandom.SHA1PRNG ImplementedIn", "Software"); &#125; &#125; æœ¬æ–‡å‚è€ƒï¼š ã€Šå®‰å“AESåŠ è§£å¯†(å…¼å®¹Android7.0)ã€‹ ã€ŠAndroidæ•°æ®åŠ å¯†ä¹‹RsaåŠ å¯†ã€‹]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çƒ­ä¿®å¤åŽŸç†]]></title>
    <url>%2Fposts%2F181c4c4a.html</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ’ä»¶åŒ–åŽŸç†]]></title>
    <url>%2Fposts%2F60f13ddc.html</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç¨‹åºçŒ¿]]></title>
    <url>%2Fposts%2F8266392b.html</url>
    <content type="text"><![CDATA[â€‹ â€œå…ˆç”Ÿä¸çŸ¥ä½•è®¸äººä¹Ÿï¼Œäº¦ä¸è¯¦å…¶å§“å­—ã€‚æ—¶å¹´äºŒåæœ‰äºŒï¼Œè‹±ä¿Šæœ—é€¸ï¼Œç§€å‘è“¬å‹ƒã€‚å§‹å…¥ITå¤§åŽ‚ï¼Œæœä¹æ™šäº”ï¼Œæ—¥é£Ÿä¸‰é¤ã€‚å¥½è¯»ä¹¦ï¼Œæ›°ã€ŠXè¯­è¨€å…¥é—¨ã€‹ã€ã€ŠXè¯­è¨€åº”ç”¨å®žè·µã€‹ã€ã€ŠXè¯­è¨€é«˜é˜¶ç¼–ç¨‹ã€‹ã€‚ â€‹ æ¬¡å¹´ï¼ŒäºŒåæœ‰ä¸‰ï¼Œè‹±ä¿Šå°šå¯ï¼Œç„¶å¯¡è¨€å°‘è¯­ï¼Œèº«å½±é£„å¿½ï¼Œç§€å‘æ—¥ç–ã€‚ä¸€äººä¸€çƒŸä¸€Computerï¼Œé•¿åä¸èµ·ï¼Œæ—¥å¤ä¸€æ—¥ã€‚æ‰€è§‚è€…ï¼Œã€Šç¼–ç¨‹è¯­è¨€çš„ç§‘å­¦ä¸Žè‰ºæœ¯ã€‹ã€ã€Šç¼–ç¨‹ä¹‹ç¾Žã€‹ã€ã€Šç¼–ç¨‹ä¹‹é“ã€‹ã€ã€Šç¼–ç¨‹ä¹‹ç¦…ã€‹ã€‚ â€‹ è€Œä»Šå¹´çº¦ä¸‰åï¼Œä¸å¤ä¿Šé€¸ã€‚å…¶ç›®ï¼Œç‚¯ç‚¯ç„¶æœ‰æ‰€è™‘ï¼Œå…¶èƒŒï¼Œæ—¥ç›Šä½å»ï¼Œå…¶å‘ï¼Œéšçº¦å¯è§åœ°ä¸­æµ·ã€‚å¸¸æŒæ¯ï¼Œä¸Žæ²¸æ°´æž¸æžä¸ºä¼´ï¼Œå—œä¹¦ï¼Œç„¶æ‰€è¯»è€…ä¸Žä¼—ä¸åŒï¼Œå”¤ä½œã€Šé¢ˆæ¤Žç—…åº·å¤æŒ‡å—ã€‹ã€‚ â€‹ è§‚å…¶çŠ¶ï¼Œæ—¶äººä¸è§£ã€‚æˆ–æ›°ï¼Œå¿…ä¸ºç¨‹åºçŒ¿ä¹Ÿï¼â€]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidçŸ¥è¯†ç‚¹æ€»ç»“]]></title>
    <url>%2Fposts%2F28ca84cb.html</url>
    <content type="text"><![CDATA[Androidè¿›é˜¶éƒ¨åˆ† Android åŸºç¡€éƒ¨åˆ† Flutteréƒ¨åˆ† Java éƒ¨åˆ† è®¾è®¡æ¨¡å¼ æ•°æ®ç»“æž„/ç®—æ³•éƒ¨åˆ† ç»™å‡ºä¸€å¼ å®Œæ•´çš„æ€»ç»“å›¾ æ€ç»´å¯¼å›¾é«˜æ¸…ç‰ˆåœ°å€ï¼šprocesson]]></content>
      <categories>
        <category>Android</category>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[androidé‡‡ç”¨ChromeIntentæ–¹å¼å®žçŽ°ä»Žæµè§ˆå™¨å¯åŠ¨åº”ç”¨]]></title>
    <url>%2Fposts%2F8e25ebb8.html</url>
    <content type="text"><![CDATA[åœ¨å¾ˆå¤šåº”ç”¨ä¸­éœ€è¦æˆ‘ä»¬ä»Žæµè§ˆå™¨ä¸­ç›´æŽ¥å¯åŠ¨åº”ç”¨ï¼Œè€Œç½‘ä¸Šå¤§å¤šæ•°é‡‡ç”¨çš„æ˜¯schemeçš„æ–¹å¼ï¼Œå³åœ¨å¯åŠ¨activityçš„mainfestæ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹å­—æ®µï¼š 12345678&lt;activity android:name="com.example.MainActivity"&gt; &lt;intent-filter&gt; &lt;action android:name="android.intent.action.VIEW" /&gt; &lt;category android:name="android.intent.category.DEFAULT" /&gt; &lt;category android:name="android.intent.category.BROWSABLE" /&gt; &lt;data android:scheme="example" android:host="test" /&gt; &lt;/intent-filter&gt;&lt;/activity&gt; ç„¶åŽåœ¨ç½‘é¡µçš„è¿žæŽ¥è®¾ç½®ä¸ºexample://test/â€¦ æ¥å¯åŠ¨åº”ç”¨ï¼Œä½†æ˜¯å¦‚æžœæ‰‹æœºä¸­æ²¡æœ‰åº”ç”¨ï¼Œè¯¥urlä¼šè·³è½¬åˆ°ä¸€ä¸ªé”™è¯¯çš„ç•Œé¢ã€‚ googleå®˜æ–¹åœ¨chromeä¸­æŽ¨å‡ºäº†ä¸€ç§Android Intentsçš„æ–¹å¼æ¥å®žçŽ°åº”ç”¨å¯åŠ¨ï¼Œé€šè¿‡åœ¨iframeä¸­è®¾ç½®srcä¸ºçš„æ–¹å¼ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ã€‚ 12345678intent:HOST/URI-path // Optional host#Intent;package=[string];action=[string];category=[string];component=[string]; scheme=[string];end; æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªaæ ‡ç­¾ä¸º 1&lt;pre name="code" class="html"&gt;&lt;pre name="code" class="html"&gt;&lt;a href="intent://zhangmiao/#Intent;scheme=myapp;package=com.what.ever.myapp;end"&gt;Do Whatever&lt;/a&gt; ç„¶åŽåœ¨mainfestæ–‡ä»¶ä¸­å®šä¹‰è¦å¯åŠ¨çš„activity 1234567891011&lt;activity android:name=".TestUrlScheme" &gt; &lt;intent-filter&gt; &lt;!-- æ˜¾ç¤ºæ•°æ® --&gt; &lt;action android:name="android.intent.action.VIEW" /&gt; &lt;category android:name="android.intent.category.DEFAULT" /&gt; &lt;!-- å®šä¹‰æˆæµè§ˆå™¨ç±»åž‹ï¼Œæœ‰URLéœ€è¦å¤„ç†æ—¶ä¼šè¿‡æ»¤ --&gt; &lt;category android:name="android.intent.category.BROWSABLE" /&gt; &lt;!-- æ‰“å¼€ä»¥whateveråè®®çš„URL,è¿™ä¸ªè‡ªå·±éšä¾¿å®šä¹‰ã€‚ --&gt; &lt;data android:scheme="myapp" android:host="zhangmiao" android:path="/" /&gt; &lt;/intent-filter&gt;&lt;/activity&gt; ç„¶åŽåœ¨æµè§ˆå™¨ä¸­ç‚¹å‡»aæ ‡ç­¾ï¼Œå°±å¯ä»¥å¯åŠ¨åº”ç”¨ç¨‹åºçš„å¯¹åº”activityäº†ï¼Œå¦‚æžœæ‰‹æœºä¸­æ²¡æœ‰ç›¸åº”çš„åº”ç”¨ï¼Œé‚£ä¹ˆæ˜¯å¦ä¼šè·³è½¬åˆ°é”™è¯¯é¡µé¢å‘¢ï¼Œå°†aæ ‡ç­¾è®¾ç½®ä¸º 1&lt;a href="intent://whatever/#Intent;scheme=myapp;package=com.what.ever.myapp;S.browser_fallback_url=http%3A%2F%2Fzxing.org;end"&gt;Do Whatever&lt;/a&gt; è¿™æ ·å¦‚æžœæ²¡æœ‰å¯¹åº”åº”ç”¨ï¼Œè¯¥é“¾æŽ¥å°±ä¼šè·³è½¬åˆ°S.browser_fallback_urlæŒ‡å®šçš„urlä¸Šã€‚ å…¶ä¸­å‚æ•°çš„ç±»åž‹å¦‚ä¸‹ 123456789String =&gt; 'S'Boolean =&gt;'B'Byte =&gt; 'b'Character =&gt; 'c'Double =&gt; 'd'Float =&gt; 'f'Integer =&gt; 'i'Long =&gt; 'l'Short =&gt; 's' 1intent://RequestType/?name=zhangmiao&amp;age=18#Intent;scheme=appname;package=com.example.appname;S.browser_fallback_url=http%3A%2F%2Fzxing.org;end ç„¶åŽåœ¨å¯åŠ¨activityçš„onCreateå‡½æ•°ä¸­åˆ©ç”¨bundleæŽ¥æ”¶å‚æ•°å°±è¡Œäº† 12345678910111213Bundle parametros = getIntent().getExtras();if (extras != null)&#123; String name = extras.getString("name"); Integer age = extras.getInt("age"); if (name!=null &amp;&amp; age!=null) &#123; //do whatever you have to //... &#125;&#125;else&#123; //no extras, get over it!!&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidæ¸å˜è‰²xmlæ–‡ä»¶]]></title>
    <url>%2Fposts%2F2851801a.html</url>
    <content type="text"><![CDATA[åœ¨drawableç›®å½•ä¸‹æ–°å»ºdrawable resource fileï¼Œä¿®æ”¹xmlä»£ç  1234567891011121314151617181920&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" &gt; &lt;!-- android:startColor="#aa000000" æ¸å˜èµ·å§‹è‰²å€¼ android:centerColor="" æ¸å˜ä¸­é—´è‰²å€¼ android:endColor="#ffffffff" æ¸å˜ç»“æŸé¢œè‰² android:angle="45" æ¸å˜çš„æ–¹å‘ é»˜è®¤ä¸º0 ä»Žåšå‘å³ ï¼Œ90æ—¶ä»Žä¸‹å‘ä¸Š å¿…é¡»ä¸º45çš„æ•´æ•°å€ android:type="radial" æ¸å˜ç±»åž‹ æœ‰ä¸‰ç§ çº¿æ€§linear æ”¾å°„æ¸å˜radial æ‰«æçº¿æ€§æ¸å˜sweep android:centerX="0.5" æ¸å˜ä¸­å¿ƒç›¸å¯¹Xåæ ‡åªæœ‰æ¸å˜ç±»åž‹ä¸ºæ”¾å°„æ¸å˜æ—¶æœ‰æ•ˆ android:centerY="0.5" æ¸å˜ä¸­å¿ƒç›¸å¯¹Yåæ ‡åªæœ‰æ¸å˜ç±»åž‹ä¸ºæ”¾å°„æ¸å˜æ—¶æœ‰æ•ˆ android:gradientRadius="100" æ¸å˜åŠå¾„ éžçº¿æ€§æ”¾å°„æœ‰æ•ˆ --&gt; &lt;gradient android:startColor="#b7bbd9" android:endColor="#5CACEE" android:angle="90" /&gt;&lt;/shape&gt;]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ—¥å¸¸ä»£ç å†™ä½œè§„èŒƒåŠä¼˜åŒ–å»ºè®®]]></title>
    <url>%2Fposts%2Fa54cde26.html</url>
    <content type="text"><![CDATA[æ‰¹é‡æ•°æ®å¤„ç†æ¯æ¬¡è¯»å–æ•°æ®æ—¶ï¼Œæ‰¹é‡è¯»å–ï¼Œç„¶åŽåœ¨åº”ç”¨ä¸­è¿›è¡Œåˆ†ç»„ã€åˆ†å‘ï¼Œä¾‹å¦‚ï¼š è®¢å•åˆ—è¡¨é¡µæ¶‰åŠåˆ°ç”¨æˆ·ã€è®¢å•ã€å•†å“ç­‰è¡¨ï¼Œæ‰¹é‡æŠŠå½“å‰é¡µçš„è®¢å•ã€ç”¨æˆ·ã€å•†å“ä¸€æ¬¡æ€§è¯»å–å›žæ¥ï¼Œç„¶åŽåœ¨åº”ç”¨ä¸­è¿›è¡Œæ•°æ®çš„ç»„è£…ï¼Œä»¥å‡å°‘sqlè¯·æ±‚é‡ï¼Œé™ä½Žæ•°æ®åº“åŽ‹åŠ›ï¼ŒåŠ å¿«æ“ä½œå“åº”é€Ÿåº¦ã€‚ çº¿ç¨‹æ± çš„ä½¿ç”¨å»ºè®®å°½é‡é¿å…ä½¿ç”¨ 1@Async æ³¨è§£ï¼Œå› ä¸ºè¿™ä¸ªæ˜¯å…±äº«äº†Springæä¾›çš„çº¿ç¨‹æ± ï¼Œå¤§é‡ä½¿ç”¨çš„æ—¶å€™ï¼Œå®¹æ˜“é€ æˆçº¿ç¨‹æ± æº¢å‡ºï¼Œå»ºè®®ä½¿ç”¨è‡ªå®šä¹‰çš„çº¿ç¨‹æ± ï¼Œå¹¶ä¸”ä¼°ç®—å¥½ä»¥ä¸‹å‚æ•°ï¼š æ ¸å¿ƒçº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•° å­˜æ´»æ—¶é•¿ ä»»åŠ¡é˜Ÿåˆ—åŠé•¿åº¦ è‡ªå®šä¹‰ThreadFactoryï¼ŒæŒ‡å®šçº¿ç¨‹åç§° æ ¹æ®ä¸šåŠ¡æŒ‡å®šæ‹’ç»ç­–ç•¥ HashMapä¸è¦åœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ä½¿ç”¨åº”ç”¨é»˜è®¤éƒ½æ˜¯å¤šçº¿ç¨‹çŽ¯å¢ƒçš„ï¼Œæ‰€ä»¥åœ¨å®šä¹‰HashMapå¯¹è±¡çš„æ—¶å€™ä¸€å®šè¦æ¸…æ¥šçš„çŸ¥é“å½“å‰æœ‰æ²¡æœ‰å¤šçº¿ç¨‹çš„é—®é¢˜ æŽ§åˆ¶æ•°æ®é‡å¤§å°æ¯æ¬¡æ“ä½œæ•°æ®çš„æ—¶å€™ï¼Œä¸€å®šè¦æ¸…æ¥šçš„çŸ¥é“å½“å‰æ“ä½œçš„æ•°æ®å¯èƒ½çš„é‡ï¼Œå¹¶æ¸…æ¥šçš„çŸ¥é“æœ€å¤§çš„é‡æ˜¯å¤šå°‘ã€æœªæ¥çš„å¢žé•¿æ•°æ®å’Œç©ºé—´ï¼Œä»¥é˜²æ­¢å¼•èµ·å†…å­˜ä¸è¶³ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿçš„å†…å­˜å¤§éƒ¨åˆ†æ˜¯4-8ä¸ªGï¼› é™¤éžèƒ½ç¡®å®šæ•°æ®é‡æœ‰é™ä¸”ä¸å¢žé•¿ï¼Œå¦åˆ™éƒ½åº”è¯¥åˆ†æ‰¹æ“ä½œï¼Œä¿è¯æ¯æ‰¹æ•°æ®çš„æœ‰é™æ€§ï¼Œä»¥é˜²éšç€æ•°æ®é‡å¤§åŽé€ æˆç³»ç»Ÿé£Žé™©ã€‚ å¯¹äºŽéœ€è¦è¾ƒé•¿æ—¶é—´çš„ä¸šåŠ¡ï¼Œæ¯”å¦‚å¯¼å…¥æ•°æ®ã€è°ƒç”¨ç¬¬ä¸‰æ–¹æŽ¥å£ä¹‹ç±»ï¼Œæœ€å¥½åšæˆä»»åŠ¡ç±»åž‹ æ•°æ®å’Œæ“ä½œçš„å®‰å…¨æ€§ã€å¯è¿½æº¯æ€§ Appç«¯ï¼šä¸å…è®¸é€šè¿‡å‰ç«¯ä¼ å…¥ç”¨æˆ·IDæ¥æ“ä½œå¯¹åº”ç”¨æˆ·çš„æ•°æ®ï¼›å¯¹ç”¨æˆ·çš„ç§æœ‰æ•°æ®æ“ä½œï¼Œä¸€å®šè¦æ£€æŸ¥å½“å‰æ•°æ®æ˜¯å¦å±žäºŽå½“å‰ç”¨æˆ·ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽï¼šåœ°å€ã€è®¢å•ã€å…³æ³¨ã€è´­ç‰©è½¦ã€è¯„è®ºã€ä¸ªäººä¿¡æ¯ã€è´¦æˆ·ä½™é¢ç­‰ Backendç«¯ï¼šåŽå°å¯¹ç”¨æˆ·çš„æ“ä½œæœ‰æƒé™æ ¡éªŒï¼Œå½“å‰æ˜¯åŸºäºŽURLåšçš„ï¼Œæ‰€ä»¥è¦ç¡®ä¿å½“å‰æ“ä½œçš„æ•°æ®ä¸€å®šè¦åœ¨æŸä¸ªurlä¹‹ä¸‹ï¼Œæ¯”å¦‚èœå•urlæ˜¯/ic/itemï¼Œé‚£ä¹ˆç‚¹å¼€è¿™ä¸ªèœå•ä»¥åŽå±•çŽ°çš„ç•Œé¢é‡Œæ‰€æœ‰çš„æ“ä½œå¯¹åº”çš„urlï¼Œéƒ½è¦åœ¨/ic/itemè¿™ä¸ªurlä¹‹åŽï¼ˆä¹‹ä¸‹ï¼‰ï¼Œæ¯”å¦‚/ic/item/to-addï¼Œ/ic/item/do-add/_ajax ä¸Šä¼ åˆ°OSSçš„å†…å®¹ï¼Œå¦‚æžœæ˜¯å…¬å¸ç§æœ‰çš„ï¼Œä¸€å®šä¸èƒ½ä½¿ç”¨å…¬æœ‰è¯»æƒé™ä¸Šä¼ ï¼Œä»¥é˜²é€ æˆä¿¡æ¯æ³„éœ²ã€‚ å…³é”®é…ç½®ä¸è¦ç›´æŽ¥å†™åœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œå½“å‰æˆ‘ä»¬æ˜¯å†™çš„å¯åŠ¨è„šæœ¬é‡Œï¼ˆé…ç½®ä¸­å¿ƒè¿˜æ²¡æœ‰åšï¼‰ å…³é”®æ•°æ®çš„æ“ä½œå’Œä¿®æ”¹ï¼Œä¸€å®šè¦æœ‰å¯¹åº”çš„æ“ä½œæ—¥å¿—çš„è®°å½•ï¼Œä»¥ç¡®ä¿å¯è¿½æº¯ å®šæ—¶ä»»åŠ¡ å¦‚æžœæ˜¯å®šæ—¶æ‰§è¡Œçš„ï¼Œçº¦å®šåªåœ¨æ•´ç‚¹æˆ–åŠç‚¹çš„æ—¶å€™æ‰§è¡Œï¼Œä»¥ä¾¿å¤§å®¶åœ¨å‘å¸ƒç³»ç»Ÿçš„æ—¶å€™èƒ½çŸ¥é“åœ¨å“ªäº›æ—¶é—´ç‚¹é¿å…å‘å¸ƒï¼› å¦‚æžœè¦æ˜¯å¯¹è¿‡åŽ»ä¸€æ®µæ—¶é—´çš„æ•°æ®è¿›è¡Œå®šæ—¶å¤„ç†ï¼Œè¯·ç¡®ä¿å¤„ç†çš„æ•°æ®çš„æ—¶é—´èŒƒå›´å¤§ä¸¤ä¸ªï¼ˆæˆ–æ›´é•¿æ—¶é—´ï¼‰æˆ–ä»¥ä¸Šçš„å®šæ—¶æ‰§è¡Œæ—¶é—´å·®å†…ï¼Œä»¥ä¾¿è®©å½“å‰å¤„ç†çš„æ•°æ®èƒ½è¦†ç›–åˆ°ä¸Šä¸€æ¬¡å®šæ—¶æ‰§è¡Œçš„æ•°æ®èŒƒå›´ï¼Œä»¥ä¾¿ä¸Šæ¬¡æœªæ‰§è¡Œæˆ–æ‰§è¡Œå¤±è´¥æ—¶ï¼Œèƒ½åšé‡è¯•å¤„ç† Appç«¯ä¸åšä»»åŠ¡å®šæ—¶ä»»åŠ¡ï¼Œä»¥ç¡®ä¿APPç«¯ç³»ç»Ÿçš„ç¨³å®š æ ¹æ®è‡ªèº«ä¸šåŠ¡æƒ…å†µï¼Œå¯ä»¥è€ƒè™‘æ”¾åˆ°redisé˜Ÿåˆ—é‡ŒåŽ»ï¼Œç„¶åŽç”±å¤šå°æœºå­ä¸€èµ·è·‘è¿™ä¸ªé˜Ÿåˆ—é‡Œçš„æ•°æ®ï¼Œè¿™æ ·çš„è¯å³ä½¿æœåŠ¡å™¨é¢‘ç¹é‡å¯ä¹Ÿä¸ä¼šä¸­æ–­ä»»åŠ¡ã€‚ é…ç½®çš„å†…å¤–ç½‘ä¹‹åˆ†ä¸ºäº†åŠ é€Ÿæ“ä½œçš„æ‰§è¡Œé€Ÿåº¦ï¼Œåœ¨èƒ½ä½¿ç”¨å†…ç½‘çš„æ—¶å€™ï¼Œä¸€å®šä½¿ç”¨å†…ç½‘è¿žæŽ¥ï¼Œä¾‹å¦‚ï¼šRedis/Mysql/OSSç­‰ï¼Œè¯·å¤§å®¶åœ¨æ·»åŠ æˆ–ä¿®æ”¹çº¿ä¸Šæˆ–æµ‹è¯•çŽ¯å¢ƒé…ç½®çš„æ—¶å€™ï¼Œä¸€å®šè¦äº†è§£å½“å‰æ˜¯å¦å¯ä»¥ä½¿ç”¨å†…ç½‘ã€‚ å¤–éƒ¨æœåŠ¡è°ƒç”¨å¦‚æžœæœ‰å¯¹å¤–éƒ¨æœåŠ¡çš„è°ƒç”¨ï¼Œä¸€å®šè¦æƒ³å¥½å¦‚æžœæœåŠ¡ä¸å¯ç”¨ã€æœåŠ¡å“åº”æ—¶é—´è¿‡é•¿ã€æˆ–è€…æœåŠ¡å“åº”ç»“æžœæœ‰é”™ï¼Œä¼šä¸ä¼šå¯¹ç³»ç»Ÿé€ æˆåŽ‹åŠ›æˆ–å½±å“ï¼›å°¤å…¶æ˜¯å½“è¯¥è°ƒç”¨åœ¨äº‹åŠ¡æ–¹æ³•ä¸­æ—¶ï¼Œæœ‰å¯èƒ½é€ æˆäº‹åŠ¡æ—¶é—´è¿‡é•¿ï¼Œæ•°æ®åº“è¿žæŽ¥è¢«å æ»¡ï¼Œç³»ç»Ÿä¸å¯ç”¨ã€‚ äº‹åŠ¡å¤„ç† è¦æ¸…æ¥šçš„ç†è§£å½“å‰æ“ä½œæ˜¯å¦éœ€è¦äº‹åŠ¡ï¼Œèƒ½é¿å…äº‹åŠ¡æ“ä½œçš„å°±ä¸è¦ä½¿ç”¨äº‹åŠ¡ å¦‚æžœæ˜¯ä½¿ç”¨äº‹åŠ¡ï¼Œé‚£å°±éœ€è¦æ¸…æ¥šçš„çŸ¥é“ä»€ä¹ˆæ—¶å€™å¯ä»¥è¿”å›žç»“æžœï¼Œä»€ä¹ˆæ—¶å€™åº”è¯¥æŠ›å‡ºå¼‚å¸¸ï¼Œä»¥ä½¿äº‹åŠ¡ç”Ÿæ•ˆ äº‹åŠ¡ä¸­å°½é‡é¿å…é•¿æ—¶æ“ä½œ å»¶è¿Ÿæˆ–å¼‚æ­¥ç»™å‡ºä¸å¿…è¦çš„æ•°æ®å¯¹äºŽéžå¿…è¦çš„æ•°æ®ï¼Œå¯ä»¥å»¶è¿Ÿæˆ–å¼‚æ­¥ç»™å‡ºï¼Œä»¥åŠ å¿«æ“ä½œçš„å“åº”é€Ÿåº¦ã€‚ä¾‹å¦‚ä¹‹å‰åŽå°çš„è®¢å•è¯¦æƒ…é¡µï¼Œé™¤äº†åŠ é€Ÿè®¢å•ç›¸å…³æ•°æ®å¤–ï¼Œè¿˜ä¼šåŠ è½½è®¢å•çš„ç‰©æµä¿¡æ¯ï¼Œé€ æˆæ•´ä¸ªè®¢å•è¯¦æƒ…é¡µå“åº”æ—¶é—´è¶…é•¿ï¼ŒåŽæ¥ä¼˜åŒ–äº†ä¸€ä¸‹ï¼Œå»¶è¿ŸåŠ è½½ç‰©æµä¿¡æ¯ï¼Œæ•´ä¸ªå“åº”é€Ÿåº¦å°±æžå¤§çš„æå‡äº†ï¼›åˆæ¯”å¦‚å‰ç«¯å¾ˆå¤šé¡µé¢éƒ½æœ‰ä¼˜æœ‰æŽ¨èæ•°æ®ï¼Œä¸ºäº†æ˜¾ç¤ºé¡µé¢ï¼Œé™¤äº†è¦è¯»å–å¿…è¦çš„æ•°æ®ï¼Œè¿˜è¦ç­‰å¾…æŽ¨èæ•°æ®çš„è¿”å›žæ‰èƒ½æ˜¾ç¤ºé¡µé¢ï¼Œå°±é€ æˆäº†æ•´ä¸ªé¡µé¢çš„å“åº”è¿‡æ…¢ã€‚ å¼‚æ­¥å¤„ç†ï¼ŒåŠ å¿«å“åº”é€Ÿåº¦ å¯¹äºŽæœ‰å¤šä¸ªé•¿æ—¶æ“ä½œï¼Œä½†æ˜¯äº’ç›¸ä¹‹é—´æ²¡æœ‰ä¾èµ–çš„ï¼Œå¯ä»¥è®©æ¯ä¸ªæ“ä½œå¼‚æ­¥å¤„ç†ï¼Œç„¶åŽåœ¨æœ€åŽå†ç­‰å¾…æ‰€æœ‰çš„æ“ä½œç»“æžœè¿”å›žï¼Œæ±‡æ€»ç»“æžœï¼Œå†è¾“å‡ºï¼Œä»¥åŠ å¿«æ“ä½œçš„å“åº”é€Ÿåº¦ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œå°½é‡ä½¿ç”¨æ¶ˆæ¯ç³»ç»Ÿ å¹‚ç­‰æ€§è‡ªå·±å†™çš„æ–¹æ³•ã€æŽ¥å£ï¼Œç‰¹åˆ«æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸šåŠ¡ï¼Œä¸€å®šè¦å¤„ç†å¥½å¹‚ç­‰æ€§ï¼Œä¸ç®¡æ˜¯æ¶ˆæ¯çš„æ¶ˆè´¹è¿˜æ˜¯å¯¹å¤–æš´éœ²çš„APIç­‰ç­‰ã€‚ ç¼“å­˜çš„ä½¿ç”¨ å¯¹äºŽè€—æ—¶çš„æ“ä½œï¼Œèƒ½ä½¿ç”¨ç¼“å­˜çš„å°½é‡ä½¿ç”¨ç¼“å­˜ å¯¹äºŽå˜åŠ¨ä¸é¢‘ç¹ä½†æ˜¯ä½¿ç”¨é¢‘ç¹çš„ï¼Œå¯ä»¥ä½¿ç”¨ç¼“å­˜ å¯¹äºŽä¸ä¼šå˜çš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼Œä½†æ˜¯è¦æ³¨æ„ç¼“å­˜æ•°æ®é‡çš„å¤§å°ï¼Œä»¥å…é€ æˆå†…å­˜åŽ‹åŠ› æ•°æ®åº“ç´¢å¼•å†™sqlæŸ¥æ•°æ®çš„æ—¶å€™ï¼Œé™¤äº†è¦è€ƒè™‘æ•°æ®é‡å¤–ï¼Œè¦æ£€æŸ¥æ˜¯å¦æœ‰å¯¹åº”çš„ç´¢å¼•ä½¿ç”¨ï¼Œé˜²æ­¢æŸ¥è¯¢è¿‡æ…¢ã€‚ ä¸€èˆ¬ä¸€ä¸ªè¡¨çš„ç´¢å¼•ä¸è¦è¶…è¿‡6ä¸ªï¼Œç´¢å¼•åº”å»ºç«‹åœ¨ç¦»æ•£åº¦æ¯”è¾ƒé«˜ä¸”åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­å‡ºçŽ°é¢‘åº¦è¾ƒé«˜çš„å­—æ®µä¸Šï¼Œç´¢å¼•å°½é‡åœ¨å»ºè¡¨çš„æ—¶å€™è€ƒè™‘å¥½ï¼ŒåŽæœŸæ•°æ®é‡å¤§äº†å†åŠ ç´¢å¼•çš„è¯ä¼šæ¯”è¾ƒå›°éš¾ã€‚ å…¶ä»– ä½¿ç”¨é›†åˆæ—¶ï¼Œä¼°ç®—å‡ºå¯èƒ½éœ€è¦çš„å®¹é‡ï¼Œå¹¶ä»¥æ­¤æŒ‡å®šé›†åˆçš„å®¹é‡ï¼Œä»¥é¿å…é¢‘ç¹æ‰©å®¹ å­—ç¬¦ä¸²æ‹¼æŽ¥æ—¶ï¼Œå»ºè®®ä½¿ç”¨StringBuilderï¼ˆJava8ä¸­ä¼šè‡ªåŠ¨ä½¿ç”¨ï¼‰ æ•°æ®åº“ä¸­å­˜å‚¨æ—¶é—´ï¼Œå»ºè®®ç”¨æ—¶é—´æˆ³ï¼ˆ10ä½ï¼Œåˆ°ç§’ï¼‰ï¼Œé‰´äºŽåŽ†å²é—®é¢˜ï¼Œå¦‚æžœæ—§è¡¨ä½¿ç”¨çš„æ˜¯dateTimeï¼Œé‚£ä¹ˆåŽç»­æ—§è¡¨åŠ æ—¶é—´å­—æ®µæ—¶ä¹Ÿç”¨dateTimeç±»åž‹ã€‚ è¯»å–æ•°æ®åº“æ—¶é—´ä»¥åŠå’Œå‰ç«¯äº¤äº’æ—¶ï¼Œæ³¨æ„æ—¶åŒºçš„é—®é¢˜ æ•°æ®åº“ä¸­å­˜å‚¨é‡‘é¢ï¼Œéƒ½ä½¿ç”¨åˆ†ï¼Œè®¡ç®—è¿‡ç¨‹æ¶‰åŠå–èˆæ—¶ä¸èƒ½ç²¾ç¡®åˆ°åˆ†ï¼Œæ€»å’Œä¼šå‡ºçŽ°å·®è· è°ƒç”¨æ–¹æ³•éƒ½æ£€æŸ¥è¿”å›žç»“æžœï¼›æä¾›æ–¹æ³•æ—¶å°½é‡é¿å…nullç»“æžœè¿”å›žï¼ŒåŒºåˆ†é›†åˆå’Œæ™®é€šå¯¹è±¡ï¼Œå¤„ç†å¥½è¿”å›žå€¼ä¸º null çš„æƒ…å†µ æ–¹æ³•å’Œå˜é‡å‘½åæ˜¯ç›´è§‚ä¸”å’Œå®ƒæ‰€å¯¹åº”çš„ä¸šåŠ¡æ„ä¹‰ä¸€è‡³ å¯¹äºŽä¸šåŠ¡é€»è¾‘ï¼Œè¦å†™å¥½æ³¨é‡Šï¼Œæè¿°æ¸…æ¥šä»£ç æ‰€å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸”æ³¨é‡Šå’Œä»£ç é€»è¾‘è¦çœŸçš„ä¸€è‡´ï¼Œå¯¹äºŽ map ä¸€å®šè¦æ³¨é‡Šå¥½ key å’Œ value åˆ†åˆ«å¯¹åº”ä»€ä¹ˆ å…³é”®çš„ä¸šåŠ¡è¦è®°å½•å¥½æ—¥å¿—ï¼Œè°ï¼Œä»€ä¹ˆæ—¶å€™ï¼Œåšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œæ•°æ®å˜åŒ–æƒ…å†µ logger.error æ³¨æ„å¤šä¸ªå‚æ•°ï¼Œå¯èƒ½ä¸¢å¤±å †æ ˆ å¼‚å¸¸å¤„ç†ï¼šåªæ•èŽ·è‡ªå·±å¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œä¸èƒ½å¤„ç†çš„ä¸è¦æ•èŽ· java7 å¼€å§‹ï¼ŒjdkæŽ’åºç®—æ³•å·²æ”¹å˜ï¼Œéœ€è¦æ»¡è¶³ï¼šè‡ªåæ€§ï¼Œä¼ é€’æ€§ï¼Œå¯¹ç§°æ€§ é›†åˆç±»åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œä½¿ç”¨ CollectionUtil ä¸è¦ä½¿ç”¨ size() &gt; 0 å®šæœŸreviewå®šæœŸçš„åŽ»APMç³»ç»Ÿä¸­æˆ–Kibanaä¸­æ£€æŸ¥æ“ä½œçš„å“åº”é€Ÿåº¦å’Œè€—æ—¶å¤„]]></content>
      <categories>
        <category>Java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è§„èŒƒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯]]></title>
    <url>%2Fposts%2Ff66419fe.html</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidæ··æ·†ä½¿ç”¨æ‰‹å†Œ]]></title>
    <url>%2Fposts%2F635b293f.html</url>
    <content type="text"><![CDATA[é¦–å…ˆï¼Œè¿™é‡Œè¯´çš„çš„æ··æ·†å…¶å®žæ˜¯åŒ…æ‹¬äº†ä»£ç åŽ‹ç¼©ã€ä»£ç æ··æ·†ä»¥åŠèµ„æºåŽ‹ç¼©ç­‰çš„ä¼˜åŒ–è¿‡ç¨‹ã€‚ä¾é  ProGuardï¼Œæ··æ·†æµç¨‹å°†ä¸»é¡¹ç›®ä»¥åŠä¾èµ–åº“ä¸­æœªè¢«ä½¿ç”¨çš„ç±»ã€ç±»æˆå‘˜ã€æ–¹æ³•ã€å±žæ€§ç§»é™¤ï¼Œè¿™æœ‰åŠ©äºŽè§„é¿64Kæ–¹æ³•æ•°çš„ç“¶é¢ˆï¼›åŒæ—¶ï¼Œå°†ç±»ã€ç±»æˆå‘˜ã€æ–¹æ³•é‡å‘½åä¸ºæ— æ„ä¹‰çš„ç®€çŸ­åç§°ï¼Œå¢žåŠ äº†é€†å‘å·¥ç¨‹çš„éš¾åº¦ã€‚è€Œä¾é  Gradle çš„ Android æ’ä»¶ï¼Œæˆ‘ä»¬å°†ç§»é™¤æœªè¢«ä½¿ç”¨çš„èµ„æºï¼Œå¯ä»¥æœ‰æ•ˆå‡å° apk å®‰è£…åŒ…å¤§å°ã€‚ æœ¬æ–‡ç”±ä¸¤éƒ¨åˆ†æž„æˆï¼š ç¬¬ä¸€éƒ¨åˆ†ç»™å‡ºæ··æ·†çš„æœ€ä½³å®žè·µï¼ŒåŠ›æ±‚è®©é›¶åŸºç¡€çš„æ–°æ‰‹éƒ½å¯ä»¥ç›´æŽ¥ä½¿ç”¨æ··æ·†ï¼› ç¬¬äºŒéƒ¨åˆ†ä¼šä»‹ç»ä¸€ä¸‹æ··æ·†çš„æ•´ä½“ã€è‡ªå®šä¹‰æ··æ·†è§„åˆ™çš„è¯­æ³•ä¸Žå®žè·µã€è‡ªå®šä¹‰èµ„æºä¿æŒçš„è§„åˆ™ç­‰ã€‚ ä¸€ã€Androidæ··æ·†æœ€ä½³å®žè·µ1. æ··æ·†é…ç½®ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œapp module çš„ build.gradle æ–‡ä»¶é»˜è®¤ä¼šæœ‰å¦‚ä¸‹ç»“æž„ï¼š 12345678android &#123; buildTypes &#123; release &#123; minifyEnabled false proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' &#125; &#125;&#125; å› ä¸ºå¼€å¯æ··æ·†ä¼šä½¿ç¼–è¯‘æ—¶é—´å˜é•¿ï¼Œæ‰€ä»¥debugæ¨¡å¼ä¸‹ä¸åº”è¯¥å¼€å¯ã€‚æˆ‘ä»¬éœ€è¦åšçš„æ˜¯ï¼š å°†releaseä¸‹minifyEnabledçš„å€¼æ”¹ä¸ºtrueï¼Œæ‰“å¼€æ··æ·†ï¼› åŠ ä¸ŠshrinkResources trueï¼Œæ‰“å¼€èµ„æºåŽ‹ç¼©ã€‚ ä¿®æ”¹åŽæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 123456789android &#123; buildTypes &#123; release &#123; minifyEnabled true shrinkResources true proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' &#125; &#125;&#125; 2. è‡ªå®šä¹‰æ··æ·†è§„åˆ™åœ¨ app module ä¸‹é»˜è®¤ç”Ÿæˆäº†é¡¹ç›®çš„è‡ªå®šä¹‰æ··æ·†è§„åˆ™æ–‡ä»¶ proguard-rules.proï¼Œå¤šæ–¹è°ƒç ”åŽï¼Œä¸€ä»½é€‚ç”¨äºŽå¤§éƒ¨åˆ†é¡¹ç›®çš„æ··æ·†è§„åˆ™æœ€ä½³å®žè·µå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142#æŒ‡å®šåŽ‹ç¼©çº§åˆ«-optimizationpasses 5#ä¸è·³è¿‡éžå…¬å…±çš„åº“çš„ç±»æˆå‘˜-dontskipnonpubliclibraryclassmembers#æ··æ·†æ—¶é‡‡ç”¨çš„ç®—æ³•-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*#æŠŠæ··æ·†ç±»ä¸­çš„æ–¹æ³•åä¹Ÿæ··æ·†äº†-useuniqueclassmembernames#ä¼˜åŒ–æ—¶å…è®¸è®¿é—®å¹¶ä¿®æ”¹æœ‰ä¿®é¥°ç¬¦çš„ç±»å’Œç±»çš„æˆå‘˜ -allowaccessmodification#å°†æ–‡ä»¶æ¥æºé‡å‘½åä¸ºâ€œSourceFileâ€å­—ç¬¦ä¸²-renamesourcefileattribute SourceFile#ä¿ç•™è¡Œå·-keepattributes SourceFile,LineNumberTable#ä¿æŒæ³›åž‹-keepattributes Signature#ä¿æŒæ‰€æœ‰å®žçŽ° Serializable æŽ¥å£çš„ç±»æˆå‘˜-keepclassmembers class * implements java.io.Serializable &#123; static final long serialVersionUID; private static final java.io.ObjectStreamField[] serialPersistentFields; private void writeObject(java.io.ObjectOutputStream); private void readObject(java.io.ObjectInputStream); java.lang.Object writeReplace(); java.lang.Object readResolve();&#125;#Fragmentä¸éœ€è¦åœ¨AndroidManifest.xmlä¸­æ³¨å†Œï¼Œéœ€è¦é¢å¤–ä¿æŠ¤ä¸‹-keep public class * extends android.support.v4.app.Fragment-keep public class * extends android.app.Fragment# ä¿æŒæµ‹è¯•ç›¸å…³çš„ä»£ç -dontnote junit.framework.**-dontnote junit.runner.**-dontwarn android.test.**-dontwarn android.support.test.**-dontwarn org.junit.** çœŸæ­£é€šç”¨çš„ã€éœ€è¦æ·»åŠ çš„å°±æ˜¯ä¸Šé¢è¿™äº›ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œéœ€è¦æ¯ä¸ªé¡¹ç›®æ ¹æ®è‡ªèº«çš„éœ€æ±‚æ·»åŠ ä¸€äº›æ··æ·†è§„åˆ™ï¼š ç¬¬ä¸‰æ–¹åº“æ‰€éœ€çš„æ··æ·†è§„åˆ™ã€‚æ­£è§„çš„ç¬¬ä¸‰æ–¹åº“ä¸€èˆ¬éƒ½ä¼šåœ¨æŽ¥å…¥æ–‡æ¡£ä¸­å†™å¥½æ‰€éœ€æ··æ·†è§„åˆ™ï¼Œä½¿ç”¨æ—¶æ³¨æ„æ·»åŠ ã€‚ åœ¨è¿è¡Œæ—¶åŠ¨æ€æ”¹å˜çš„ä»£ç ï¼Œä¾‹å¦‚åå°„ã€‚æ¯”è¾ƒå…¸åž‹çš„ä¾‹å­å°±æ˜¯ä¼šä¸Ž json ç›¸äº’è½¬æ¢çš„å®žä½“ç±»ã€‚å‡å¦‚é¡¹ç›®å‘½åè§„èŒƒè¦æ±‚å®žä½“ç±»éƒ½è¦æ”¾åœ¨modelåŒ…ä¸‹çš„è¯ï¼Œå¯ä»¥æ·»åŠ ç±»ä¼¼è¿™æ ·çš„ä»£ç æŠŠæ‰€æœ‰å®žä½“ç±»éƒ½ä¿æŒä½ï¼š-keep public class **.*Model*.** {*;} JNIä¸­è°ƒç”¨çš„ç±»ã€‚ WebViewä¸­JavaScriptè°ƒç”¨çš„æ–¹æ³• Layoutå¸ƒå±€ä½¿ç”¨çš„Viewæž„é€ å‡½æ•°ã€android:onClickç­‰ã€‚ 3. æ£€æŸ¥æ··æ·†ç»“æžœæ··æ·†è¿‡çš„åŒ…å¿…é¡»è¿›è¡Œæ£€æŸ¥ï¼Œé¿å…å› æ··æ·†å¼•å…¥çš„bugã€‚ ä¸€æ–¹é¢ï¼Œéœ€è¦ä»Žä»£ç å±‚é¢æ£€æŸ¥ã€‚ä½¿ç”¨ä¸Šæ–‡çš„é…ç½®è¿›è¡Œæ··æ·†æ‰“åŒ…åŽåœ¨ &lt;module-name&gt;/build/outputs/mapping/release/ ç›®å½•ä¸‹ä¼šè¾“å‡ºä»¥ä¸‹æ–‡ä»¶ï¼š dump.txtæè¿°APKæ–‡ä»¶ä¸­æ‰€æœ‰ç±»çš„å†…éƒ¨ç»“æž„ mapping.txtæä¾›æ··æ·†å‰åŽç±»ã€æ–¹æ³•ã€ç±»æˆå‘˜ç­‰çš„å¯¹ç…§è¡¨ seeds.txtåˆ—å‡ºæ²¡æœ‰è¢«æ··æ·†çš„ç±»å’Œæˆå‘˜ usage.txtåˆ—å‡ºè¢«ç§»é™¤çš„ä»£ç  æˆ‘ä»¬å¯ä»¥æ ¹æ® seeds.txt æ–‡ä»¶æ£€æŸ¥æœªè¢«æ··æ·†çš„ç±»å’Œæˆå‘˜ä¸­æ˜¯å¦å·²åŒ…å«æ‰€æœ‰æœŸæœ›ä¿ç•™çš„ï¼Œå†æ ¹æ® usage.txt æ–‡ä»¶æŸ¥çœ‹æ˜¯å¦æœ‰è¢«è¯¯ç§»é™¤çš„ä»£ç ã€‚ å¦ä¸€æ–¹é¢ï¼Œéœ€è¦ä»Žæµ‹è¯•æ–¹é¢æ£€æŸ¥ã€‚å°†æ··æ·†è¿‡çš„åŒ…è¿›è¡Œå…¨æ–¹é¢æµ‹è¯•ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ bug äº§ç”Ÿã€‚ 4. è§£å‡ºæ··æ·†æ ˆæ··æ·†åŽçš„ç±»ã€æ–¹æ³•åç­‰ç­‰éš¾ä»¥é˜…è¯»ï¼Œè¿™å›ºç„¶ä¼šå¢žåŠ é€†å‘å·¥ç¨‹çš„éš¾åº¦ï¼Œä½†å¯¹è¿½è¸ªçº¿ä¸Š crash ä¹Ÿé€ æˆäº†é˜»ç¢ã€‚æˆ‘ä»¬æ‹¿åˆ° crash çš„å †æ ˆä¿¡æ¯åŽä¼šå‘çŽ°å¾ˆéš¾å®šä½ï¼Œè¿™æ—¶éœ€è¦å°†æ··æ·†åè§£ã€‚ åœ¨ &lt;sdk-root&gt;/tools/proguard/ è·¯å¾„ä¸‹æœ‰é™„å¸¦çš„çš„åè§£å·¥å…·ï¼ˆWindow ç³»ç»Ÿä¸º proguardgui.batï¼ŒMac æˆ– Linux ç³»ç»Ÿä¸º proguardgui.shï¼‰ã€‚ è¿™é‡Œä»¥ Window å¹³å°ä¸ºä¾‹ã€‚åŒå‡»è¿è¡Œ proguardgui.bat åŽï¼Œå¯ä»¥çœ‹åˆ°å·¦ä¾§çš„ä¸€è¡Œèœå•ã€‚ç‚¹å‡» ReTraceï¼Œé€‰æ‹©è¯¥æ··æ·†åŒ…å¯¹åº”çš„ mapping æ–‡ä»¶ï¼ˆæ··æ·†åŽåœ¨ &lt;module-name&gt;/build/outputs/mapping/release/ è·¯å¾„ä¸‹ä¼šç”Ÿæˆ mapping.txt æ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨æ˜¯æä¾›æ··æ·†å‰åŽç±»ã€æ–¹æ³•ã€ç±»æˆå‘˜ç­‰çš„å¯¹ç…§è¡¨ï¼‰ï¼Œå†å°† crash çš„ stack trace é»è´´è¿›è¾“å…¥æ¡†ä¸­ï¼Œç‚¹å‡»å³ä¸‹è§’çš„ ReTrace ï¼Œæ··æ·†åŽçš„å †æ ˆä¿¡æ¯å°±æ˜¾ç¤ºå‡ºæ¥äº†ã€‚ ä»¥ä¸Šä½¿ç”¨ GUI ç¨‹åºè¿›è¡Œæ“ä½œï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯åˆ©ç”¨è¯¥è·¯å¾„ä¸‹çš„ retrace å·¥å…·é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œåè§£ï¼Œå‘½ä»¤æ˜¯ 1retrace.bat|retrace.sh [-verbose] mapping.txt [&lt;stacktrace_file&gt;] ä¾‹å¦‚ï¼š 1retrace.bat -verbose mapping.txt obfuscated_trace.txt æ³¨æ„äº‹é¡¹ï¼š æ‰€æœ‰åœ¨ AndroidManifest.xml æ¶‰åŠåˆ°çš„ç±»å·²ç»è‡ªåŠ¨è¢«ä¿æŒï¼Œå› æ­¤ä¸ç”¨ç‰¹æ„åŽ»æ·»åŠ è¿™å—æ··æ·†è§„åˆ™ã€‚ï¼ˆå¾ˆå¤šè€çš„æ··æ·†æ–‡ä»¶é‡Œä¼šåŠ ï¼ŒçŽ°åœ¨å·²ç»æ²¡å¿…è¦ï¼‰ proguard-android.txt å·²ç»å­˜åœ¨ä¸€äº›é»˜è®¤æ··æ·†è§„åˆ™ï¼Œæ²¡å¿…è¦åœ¨ proguard-rules.pro é‡å¤æ·»åŠ ï¼Œè¯¥æ–‡ä»¶å…·ä½“è§„åˆ™è§é™„å½•1ï¼š äºŒã€æ··æ·†ç®€ä»‹Androidä¸­çš„â€œæ··æ·†â€å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯ Java ä»£ç çš„ä¼˜åŒ–ä¸Žæ··æ·†ï¼Œä¾é  proguard æ··æ·†å™¨æ¥å®žçŽ°ï¼›å¦ä¸€éƒ¨åˆ†æ˜¯èµ„æºåŽ‹ç¼©ï¼Œå°†ç§»é™¤é¡¹ç›®åŠä¾èµ–çš„åº“ä¸­æœªè¢«ä½¿ç”¨çš„èµ„æº(èµ„æºåŽ‹ç¼©ä¸¥æ ¼æ„ä¹‰ä¸Šè·Ÿæ··æ·†æ²¡å•¥å…³ç³»ï¼Œä½†ä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šæ”¾ä¸€èµ·è®²)ã€‚ 1. ä»£ç åŽ‹ç¼© ä»£ç æ··æ·†æ˜¯åŒ…å«äº†ä»£ç åŽ‹ç¼©ã€ä¼˜åŒ–ã€æ··æ·†ç­‰ä¸€ç³»åˆ—è¡Œä¸ºçš„è¿‡ç¨‹ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ··æ·†è¿‡ç¨‹ä¼šæœ‰å¦‚ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š åŽ‹ç¼©ã€‚ç§»é™¤æ— æ•ˆçš„ç±»ã€ç±»æˆå‘˜ã€æ–¹æ³•ã€å±žæ€§ç­‰ï¼› ä¼˜åŒ–ã€‚åˆ†æžå’Œä¼˜åŒ–æ–¹æ³•çš„äºŒè¿›åˆ¶ä»£ç ï¼›æ ¹æ®proguard-android-optimize.txtä¸­çš„æè¿°ï¼Œä¼˜åŒ–å¯èƒ½ä¼šé€ æˆä¸€äº›æ½œåœ¨é£Žé™©ï¼Œä¸èƒ½ä¿è¯åœ¨æ‰€æœ‰ç‰ˆæœ¬çš„Dalvikä¸Šéƒ½æ­£å¸¸è¿è¡Œã€‚ æ··æ·†ã€‚æŠŠç±»åã€å±žæ€§åã€æ–¹æ³•åæ›¿æ¢ä¸ºç®€çŸ­ä¸”æ— æ„ä¹‰çš„åç§°ï¼› é¢„æ ¡éªŒã€‚æ·»åŠ é¢„æ ¡éªŒä¿¡æ¯ã€‚è¿™ä¸ªé¢„æ ¡éªŒæ˜¯ä½œç”¨åœ¨Javaå¹³å°ä¸Šçš„ï¼ŒAndroidå¹³å°ä¸Šä¸éœ€è¦è¿™é¡¹åŠŸèƒ½ï¼ŒåŽ»æŽ‰ä¹‹åŽè¿˜å¯ä»¥åŠ å¿«æ··æ·†é€Ÿåº¦ã€‚ è¿™å››ä¸ªæµç¨‹é»˜è®¤å¼€å¯ã€‚ åœ¨ Android é¡¹ç›®ä¸­æˆ‘ä»¬å¯ä»¥é€‰æ‹©å°†â€œä¼˜åŒ–â€å’Œâ€œé¢„æ ¡éªŒâ€å…³é—­ï¼Œå¯¹åº”å‘½ä»¤æ˜¯-dontoptimizeã€-dontpreverifyï¼ˆå½“ç„¶ï¼Œé»˜è®¤çš„ proguard-android.txt æ–‡ä»¶å·²åŒ…å«è¿™ä¸¤æ¡æ··æ·†å‘½ä»¤ï¼Œä¸éœ€è¦å¼€å‘è€…é¢å¤–é…ç½®ï¼‰ã€‚ 2. èµ„æºåŽ‹ç¼©èµ„æºåŽ‹ç¼©å°†ç§»é™¤é¡¹ç›®åŠä¾èµ–çš„åº“ä¸­æœªè¢«ä½¿ç”¨çš„èµ„æºï¼Œè¿™åœ¨å‡å°‘ apk åŒ…ä½“ç§¯ä¸Šä¼šæœ‰ä¸é”™çš„æ•ˆæžœï¼Œä¸€èˆ¬å»ºè®®å¼€å¯ã€‚å…·ä½“åšæ³•æ˜¯åœ¨ build.grade æ–‡ä»¶ä¸­ï¼Œå°† shrinkResources å±žæ€§è®¾ç½®ä¸º trueã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰åœ¨ç”¨minifyEnabled trueå¼€å¯äº†ä»£ç åŽ‹ç¼©åŽï¼Œèµ„æºåŽ‹ç¼©æ‰ä¼šç”Ÿæ•ˆã€‚ èµ„æºåŽ‹ç¼©åŒ…å«äº†â€œåˆå¹¶èµ„æºâ€å’Œâ€œç§»é™¤èµ„æºâ€ä¸¤ä¸ªæµç¨‹ã€‚ â€œåˆå¹¶èµ„æºâ€æµç¨‹ä¸­ï¼Œåç§°ç›¸åŒçš„èµ„æºè¢«è§†ä¸ºé‡å¤èµ„æºä¼šè¢«åˆå¹¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸€æµç¨‹ä¸å—shrinkResourceså±žæ€§æŽ§åˆ¶ï¼Œä¹Ÿæ— æ³•è¢«ç¦æ­¢ï¼Œ gradle å¿…ç„¶ä¼šåšè¿™é¡¹å·¥ä½œï¼Œå› ä¸ºå‡å¦‚ä¸åŒé¡¹ç›®ä¸­å­˜åœ¨ç›¸åŒåç§°çš„èµ„æºå°†å¯¼è‡´é”™è¯¯ã€‚gradle åœ¨å››å¤„åœ°æ–¹å¯»æ‰¾é‡å¤èµ„æºï¼š src/main/res/ è·¯å¾„ ä¸åŒçš„æž„å»ºç±»åž‹ï¼ˆdebugã€releaseç­‰ç­‰ï¼‰ ä¸åŒçš„æž„å»ºæ¸ é“ é¡¹ç›®ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ åˆå¹¶èµ„æºæ—¶æŒ‰ç…§å¦‚ä¸‹ä¼˜å…ˆçº§é¡ºåºï¼š 1ä¾èµ– -&gt; main -&gt; æ¸ é“ -&gt; æž„å»ºç±»åž‹ ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚é‡å¤èµ„æºåŒæ—¶å­˜åœ¨äºŽmainæ–‡ä»¶å¤¹å’Œä¸åŒæ¸ é“ä¸­ï¼Œgradle ä¼šé€‰æ‹©ä¿ç•™æ¸ é“ä¸­çš„èµ„æºã€‚ åŒæ—¶ï¼Œå¦‚æžœé‡å¤èµ„æºåœ¨åŒä¸€å±‚æ¬¡å‡ºçŽ°ï¼Œæ¯”å¦‚src/main/res/ å’Œ src/main/res2/ï¼Œåˆ™ gradle æ— æ³•å®Œæˆèµ„æºåˆå¹¶ï¼Œè¿™æ—¶ä¼šæŠ¥èµ„æºåˆå¹¶é”™è¯¯ã€‚ â€œç§»é™¤èµ„æºâ€æµç¨‹åˆ™è§åçŸ¥æ„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç±»ä¼¼ä»£ç ï¼Œæ··æ·†èµ„æºç§»é™¤ä¹Ÿå¯ä»¥å®šä¹‰å“ªäº›èµ„æºéœ€è¦è¢«ä¿ç•™ï¼Œè¿™ç‚¹åœ¨ä¸‹æ–‡ç»™å‡ºã€‚ ä¸‰ã€è‡ªå®šä¹‰æ··æ·†è§„åˆ™åœ¨ä¸Šæ–‡â€œæ··æ·†é…ç½®â€ä¸­æœ‰è¿™æ ·ä¸€è¡Œä»£ç  1proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' è¿™è¡Œä»£ç å®šä¹‰äº†æ··æ·†è§„åˆ™ç”±ä¸¤éƒ¨åˆ†æž„æˆï¼šä½äºŽ SDK çš„ tools/proguard/ æ–‡ä»¶å¤¹ä¸­çš„ proguard-android.txt çš„å†…å®¹ä»¥åŠé»˜è®¤æ”¾ç½®äºŽæ¨¡å—æ ¹ç›®å½•çš„ proguard-rules.pro çš„å†…å®¹ã€‚å‰è€…æ˜¯ SDK æä¾›çš„é»˜è®¤æ··æ·†æ–‡ä»¶ï¼ˆå†…å®¹è§é™„å½•1ï¼‰ï¼ŒåŽè€…æ˜¯å¼€å‘è€…è‡ªå®šä¹‰æ··æ·†è§„åˆ™çš„åœ°æ–¹ã€‚ 1. å¸¸è§æ··æ·†å‘½ä»¤ï¼š optimizationpasses dontoptimize dontusemixedcaseclassnames dontskipnonpubliclibraryclasses dontpreverify dontwarn verbose optimizations keep keepnames keepclassmembers keepclassmembernames keepclasseswithmembers keepclasseswithmembernames åœ¨ç¬¬ä¸€éƒ¨åˆ† Android æ··æ·†æœ€ä½³å®žè·µä¸­å·²ä»‹ç»éƒ¨åˆ†éœ€è¦ä½¿ç”¨åˆ°çš„æ··æ·†å‘½ä»¤ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼Œè¯¦æƒ…è¯·æŸ¥é˜…å®˜ç½‘ã€‚éœ€è¦ç‰¹åˆ«ä»‹ç»çš„æ˜¯ä¸Žä¿æŒç›¸å…³å…ƒç´ ä¸å‚ä¸Žæ··æ·†çš„è§„åˆ™ç›¸å…³çš„å‡ ç§å‘½ä»¤ï¼š å‘½ä»¤ ä½œç”¨ -keep é˜²æ­¢ç±»å’Œæˆå‘˜è¢«ç§»é™¤æˆ–è€…è¢«é‡å‘½å -keepnames é˜²æ­¢ç±»å’Œæˆå‘˜è¢«é‡å‘½å -keepclassmembers é˜²æ­¢æˆå‘˜è¢«ç§»é™¤æˆ–è€…è¢«é‡å‘½å -keepnames é˜²æ­¢æˆå‘˜è¢«é‡å‘½å -keepclasseswithmembers é˜²æ­¢æ‹¥æœ‰è¯¥æˆå‘˜çš„ç±»å’Œæˆå‘˜è¢«ç§»é™¤æˆ–è€…è¢«é‡å‘½å -keepclasseswithmembernames é˜²æ­¢æ‹¥æœ‰è¯¥æˆå‘˜çš„ç±»å’Œæˆå‘˜è¢«é‡å‘½å 2. ä¿æŒå…ƒç´ ä¸å‚ä¸Žæ··æ·†çš„è§„åˆ™å½¢å¦‚ï¼š 123[ä¿æŒå‘½ä»¤] [ç±»] &#123; [æˆå‘˜] &#125; â€œç±»â€ä»£è¡¨ç±»ç›¸å…³çš„é™å®šæ¡ä»¶ï¼Œå®ƒå°†æœ€ç»ˆå®šä½åˆ°æŸäº›ç¬¦åˆè¯¥é™å®šæ¡ä»¶çš„ç±»ã€‚å®ƒçš„å†…å®¹å¯ä»¥ä½¿ç”¨ï¼š å…·ä½“çš„ç±» è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublicã€protectedã€privateï¼‰ é€šé…ç¬¦*ï¼ŒåŒ¹é…ä»»æ„é•¿åº¦å­—ç¬¦ï¼Œä½†ä¸å«åŒ…ååˆ†éš”ç¬¦(.) é€šé…ç¬¦**ï¼ŒåŒ¹é…ä»»æ„é•¿åº¦å­—ç¬¦ï¼Œå¹¶ä¸”åŒ…å«åŒ…ååˆ†éš”ç¬¦(.) extendsï¼Œå³å¯ä»¥æŒ‡å®šç±»çš„åŸºç±» implementï¼ŒåŒ¹é…å®žçŽ°äº†æŸæŽ¥å£çš„ç±» $ï¼Œå†…éƒ¨ç±» â€œæˆå‘˜â€ä»£è¡¨ç±»æˆå‘˜ç›¸å…³çš„é™å®šæ¡ä»¶ï¼Œå®ƒå°†æœ€ç»ˆå®šä½åˆ°æŸäº›ç¬¦åˆè¯¥é™å®šæ¡ä»¶çš„ç±»æˆå‘˜ã€‚å®ƒçš„å†…å®¹å¯ä»¥ä½¿ç”¨ï¼š åŒ¹é…æ‰€æœ‰æž„é€ å™¨ åŒ¹é…æ‰€æœ‰åŸŸ åŒ¹é…æ‰€æœ‰æ–¹æ³• é€šé…ç¬¦*ï¼ŒåŒ¹é…ä»»æ„é•¿åº¦å­—ç¬¦ï¼Œä½†ä¸å«åŒ…ååˆ†éš”ç¬¦(.) é€šé…ç¬¦**ï¼ŒåŒ¹é…ä»»æ„é•¿åº¦å­—ç¬¦ï¼Œå¹¶ä¸”åŒ…å«åŒ…ååˆ†éš”ç¬¦(.) é€šé…ç¬¦***ï¼ŒåŒ¹é…ä»»æ„å‚æ•°ç±»åž‹ â€¦ï¼ŒåŒ¹é…ä»»æ„é•¿åº¦çš„ä»»æ„ç±»åž‹å‚æ•°ã€‚æ¯”å¦‚void test(â€¦)å°±èƒ½åŒ¹é…ä»»æ„ void test(String a) æˆ–è€…æ˜¯ void test(int a, String b) è¿™äº›æ–¹æ³•ã€‚ è®¿é—®ä¿®é¥°ç¬¦ï¼ˆpublicã€protectedã€privateï¼‰ ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚éœ€è¦å°†name.huihui.teståŒ…ä¸‹æ‰€æœ‰ç»§æ‰¿Activityçš„publicç±»åŠå…¶æž„é€ å‡½æ•°éƒ½ä¿æŒä½ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š 123-keep public class name.huihui.test.** extends Android.app.Activity &#123; &lt;init&gt;&#125; 3. å¸¸ç”¨çš„è‡ªå®šä¹‰æ··æ·†è§„åˆ™ ä¸æ··æ·†æŸä¸ªç±» 1-keep public class name.huihui.example.Test &#123; *; &#125; ä¸æ··æ·†æŸä¸ªåŒ…æ‰€æœ‰çš„ç±» 1-keep class name.huihui.test.** &#123; *; &#125; ä¸æ··æ·†æŸä¸ªç±»çš„å­ç±» 1-keep public class * extends name.huihui.example.Test &#123; *; &#125; ä¸æ··æ·†æ‰€æœ‰ç±»åä¸­åŒ…å«äº†â€œmodelâ€çš„ç±»åŠå…¶æˆå‘˜ 1-keep public class **.*model*.** &#123;*;&#125; ä¸æ··æ·†æŸä¸ªæŽ¥å£çš„å®žçŽ° 1-keep class * implements name.huihui.example.TestInterface &#123; *; &#125; ä¸æ··æ·†æŸä¸ªç±»çš„æž„é€ æ–¹æ³• 123-keepclassmembers class name.huihui.example.Test &#123; public &lt;init&gt;(); &#125; ä¸æ··æ·†æŸä¸ªç±»çš„ç‰¹å®šçš„æ–¹æ³• 123-keepclassmembers class name.huihui.example.Test &#123; public void test(java.lang.String); &#125; ä¸æ··æ·†æŸä¸ªç±»çš„å†…éƒ¨ç±» 123-keep class name.huihui.example.Test$* &#123; *; &#125; å››ã€è‡ªå®šä¹‰èµ„æºä¿æŒè§„åˆ™1. keep.xmlç”¨shrinkResources trueå¼€å¯èµ„æºåŽ‹ç¼©åŽï¼Œæ‰€æœ‰æœªè¢«ä½¿ç”¨çš„èµ„æºé»˜è®¤è¢«ç§»é™¤ã€‚å‡å¦‚ä½ éœ€è¦å®šä¹‰å“ªäº›èµ„æºå¿…é¡»è¢«ä¿ç•™ï¼Œåœ¨ res/raw/ è·¯å¾„ä¸‹åˆ›å»ºä¸€ä¸ª xml æ–‡ä»¶ï¼Œä¾‹å¦‚ keep.xmlã€‚ é€šè¿‡ä¸€äº›å±žæ€§çš„è®¾ç½®å¯ä»¥å®žçŽ°å®šä¹‰èµ„æºä¿æŒçš„éœ€æ±‚ï¼Œå¯é…ç½®çš„å±žæ€§æœ‰ï¼š tools:keep å®šä¹‰å“ªäº›èµ„æºéœ€è¦è¢«ä¿ç•™ï¼ˆèµ„æºä¹‹é—´ç”¨â€œ,â€éš”å¼€ï¼‰ tools:discard å®šä¹‰å“ªäº›èµ„æºéœ€è¦è¢«ç§»é™¤ï¼ˆèµ„æºä¹‹é—´ç”¨â€œ,â€éš”å¼€ï¼‰ tools:shrinkMode å¼€å¯ä¸¥æ ¼æ¨¡å¼ å½“ä»£ç ä¸­é€šè¿‡ Resources.getIdentifier() ç”¨åŠ¨æ€çš„å­—ç¬¦ä¸²æ¥èŽ·å–å¹¶ä½¿ç”¨èµ„æºæ—¶ï¼Œæ™®é€šçš„èµ„æºå¼•ç”¨æ£€æŸ¥å°±å¯èƒ½ä¼šæœ‰é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç ä¼šå¯¼è‡´æ‰€æœ‰ä»¥â€œimg_â€å¼€å¤´çš„èµ„æºéƒ½è¢«æ ‡è®°ä¸ºå·²ä½¿ç”¨ã€‚ 12String name = String.format("img_%1d", angle + 1);res = getResources().getIdentifier(name, "drawable", getPackageName()); æˆ‘ä»¬å¯ä»¥è®¾ç½® tools:shrinkMode ä¸º strict æ¥å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œä½¿åªæœ‰ç¡®å®žè¢«ä½¿ç”¨çš„èµ„æºè¢«ä¿ç•™ã€‚ ä»¥ä¸Šå°±æ˜¯è‡ªå®šä¹‰èµ„æºä¿æŒè§„åˆ™ç›¸å…³çš„é…ç½®ï¼Œä¸¾ä¸ªä¾‹å­ï¼š 12345&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;resources xmlns:tools="http://schemas.android.com/tools" tools:keep="@layout/l_used*_c,@layout/l_used_a,@layout/l_used_b*" tools:discard="@layout/unused2" tools:shrinkMode="strict"/&gt; 2. ç§»é™¤æ›¿ä»£èµ„æºä¸€äº›æ›¿ä»£èµ„æºï¼Œä¾‹å¦‚å¤šè¯­è¨€æ”¯æŒçš„ strings.xmlï¼Œå¤šåˆ†è¾¨çŽ‡æ”¯æŒçš„ layout.xml ç­‰ï¼Œåœ¨æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨åˆä¸æƒ³åˆ é™¤æŽ‰æ—¶ï¼Œå¯ä»¥ä½¿ç”¨èµ„æºåŽ‹ç¼©å°†å®ƒä»¬ç§»é™¤ã€‚ æˆ‘ä»¬ä½¿ç”¨ resConfig å±žæ€§æ¥æŒ‡å®šéœ€è¦æ”¯æŒçš„å±žæ€§ï¼Œä¾‹å¦‚ 123456android &#123; defaultConfig &#123; ... resConfigs "en", "fr" &#125;&#125; å…¶ä»–æœªæ˜¾å¼å£°æ˜Žçš„è¯­è¨€èµ„æºå°†è¢«ç§»é™¤ã€‚ å‚è€ƒèµ„æ–™ Shrink Your Code and Resources proguard Androidå®‰å…¨æ”»é˜²æˆ˜ï¼Œåç¼–è¯‘ä¸Žæ··æ·†æŠ€æœ¯å®Œå…¨è§£æžï¼ˆä¸‹ï¼‰ Androidæ··æ·†ä»Žå…¥é—¨åˆ°ç²¾é€š Androidä»£ç æ··æ·†ä¹‹ProGuard é™„å½• proguard-android.txtæ–‡ä»¶å†…å®¹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768#åŒ…åä¸æ··åˆå¤§å°å†™-dontusemixedcaseclassnames#ä¸è·³è¿‡éžå…¬å…±çš„åº“çš„ç±»-dontskipnonpubliclibraryclasses#æ··æ·†æ—¶è®°å½•æ—¥å¿—-verbose#å…³é—­é¢„æ ¡éªŒ-dontpreverify#ä¸ä¼˜åŒ–è¾“å…¥çš„ç±»æ–‡ä»¶-dontoptimize#ä¿æŠ¤æ³¨è§£-keepattributes *Annotation*#ä¿æŒæ‰€æœ‰æ‹¥æœ‰æœ¬åœ°æ–¹æ³•çš„ç±»ååŠæœ¬åœ°æ–¹æ³•å-keepclasseswithmembernames class * &#123; native &lt;methods&gt;;&#125;#ä¿æŒè‡ªå®šä¹‰Viewçš„getå’Œsetç›¸å…³æ–¹æ³•-keepclassmembers public class * extends android.view.View &#123; void set*(***); *** get*();&#125;#ä¿æŒActivityä¸­ViewåŠå…¶å­ç±»å…¥å‚çš„æ–¹æ³•-keepclassmembers class * extends android.app.Activity &#123; public void *(android.view.View);&#125;#æžšä¸¾-keepclassmembers enum * &#123; **[] $VALUES; public *;&#125;#Parcelable-keepclassmembers class * implements android.os.Parcelable &#123; public static final android.os.Parcelable$Creator CREATOR;&#125;#Ræ–‡ä»¶çš„é™æ€æˆå‘˜-keepclassmembers class **.R$* &#123; public static &lt;fields&gt;;&#125;-dontwarn android.support.**#keepç›¸å…³æ³¨è§£-keep class android.support.annotation.Keep-keep @android.support.annotation.Keep class * &#123;*;&#125;-keepclasseswithmembers class * &#123; @android.support.annotation.Keep &lt;methods&gt;;&#125;-keepclasseswithmembers class * &#123; @android.support.annotation.Keep &lt;fields&gt;;&#125;-keepclasseswithmembers class * &#123; @android.support.annotation.Keep &lt;init&gt;(...);&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Activityæ ‡ç­¾å±žæ€§]]></title>
    <url>%2Fposts%2F9bf9542d.html</url>
    <content type="text"><![CDATA[Activity æ˜¯ Android ç³»ç»Ÿå››å¤§åº”ç”¨ç»„ä»¶ä¹‹ä¸€ï¼Œç”¨æˆ·å¯ä¸Ž Activity æä¾›çš„å±å¹•è¿›è¡Œäº¤äº’ï¼Œä»¥æ‰§è¡Œæ‹¨æ‰“ç”µè¯ã€æ‹æ‘„ç…§ç‰‡ã€å‘é€ç”µå­é‚®ä»¶ç­‰æ“ä½œ å¼€å‘è€…å¿…é¡»åœ¨æ¸…å•æ–‡ä»¶ä¸­å£°æ˜Žè¦ä½¿ç”¨çš„ Activityï¼Œè¿™æ ·ç³»ç»Ÿæ‰èƒ½è®¿é—®å®ƒã€‚å£°æ˜Žæ–¹å¼æ˜¯åœ¨ &lt; application &gt; å…ƒç´ ä¸­æ·»åŠ  &lt; activity &gt; å­å…ƒç´  123456789101112&lt;application android:allowBackup="true" android:icon="@mipmap/ic_launcher" android:label="@string/app_name" android:supportsRtl="true" android:theme="@style/AppTheme"&gt; &lt;activity android:name=".Example"&gt; &lt;/activity&gt; &lt;/application&gt; å¯ä»¥ä¸º&lt; activity &gt;å…ƒç´ è®¾ç½®å¤šä¸ªå±žæ€§å€¼ä»¥å®šä¹‰ UI é£Žæ ¼æˆ–è€…è¿è¡Œå±žæ€§ã€‚ android:name å±žæ€§æ˜¯å”¯ä¸€å¿…éœ€çš„å±žæ€§ï¼Œç”¨äºŽæŒ‡å®š Activity çš„ç±»å &lt; activity &gt;åŒ…å«çš„å±žæ€§å¦‚ä¸‹æ‰€ç¤º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849&lt;activity android:allowEmbedded=["true" | "false"] android:allowTaskReparenting=["true" | "false"] android:alwaysRetainTaskState=["true" | "false"] android:autoRemoveFromRecents=["true" | "false"] android:banner="drawable resource" android:clearTaskOnLaunch=["true" | "false"] android:configChanges=["mcc", "mnc", "locale", "touchscreen", "keyboard", "keyboardHidden", "navigation", "screenLayout", "fontScale", "uiMode", "orientation", "screenSize", "smallestScreenSize"] android:documentLaunchMode=["intoExisting" | "always" | "none" | "never"] android:enabled=["true" | "false"] android:excludeFromRecents=["true" | "false"] android:exported=["true" | "false"] android:finishOnTaskLaunch=["true" | "false"] android:hardwareAccelerated=["true" | "false"] android:icon="drawable resource" android:label="string resource" android:launchMode=["standard" | "singleTop" | "singleTask" | "singleInstance"] android:maxRecents="integer" android:multiprocess=["true" | "false"] android:name="string" android:noHistory=["true" | "false"] android:parentActivityName="string" android:permission="string" android:process="string" android:relinquishTaskIdentity=["true" | "false"] android:resizeableActivity=["true" | "false"] android:screenOrientation=["unspecified" | "behind" | "landscape" | "portrait" | "reverseLandscape" | "reversePortrait" | "sensorLandscape" | "sensorPortrait" | "userLandscape" | "userPortrait" | "sensor" | "fullSensor" | "nosensor" | "user" | "fullUser" | "locked"] android:stateNotNeeded=["true" | "false"] android:supportsPictureInPicture=["true" | "false"] android:taskAffinity="string" android:theme="resource or theme" android:uiOptions=["none" | "splitActionBarWhenNarrow"] android:windowSoftInputMode=["stateUnspecified", "stateUnchanged", "stateHidden", "stateAlwaysHidden", "stateVisible", "stateAlwaysVisible", "adjustUnspecified", "adjustResize", "adjustPan"] &gt; &lt;/activity&gt; ä¸€ã€android:allowEmbedded**è¡¨ç¤ºè¯¥ Activity å¯ä½œä¸ºå¦ä¸€ Activity çš„åµŒå…¥å¼å­é¡¹å¯åŠ¨ã€‚ å®ƒå°¤å…¶é€‚ç”¨äºŽå­é¡¹æ‰€åœ¨çš„å®¹å™¨ï¼ˆå¦‚ Displayï¼‰ä¸ºå¦ä¸€ Activity æ‰€æ‹¥æœ‰çš„æƒ…å†µã€‚ ä¾‹å¦‚ï¼Œç”¨äºŽ Wear è‡ªå®šä¹‰é€šçŸ¥çš„ Activity å¿…é¡»å£°æ˜Žæ­¤é¡¹ï¼Œä»¥ä¾¿ Wear åœ¨å…¶ä¸Šä¸‹æ–‡æµä¸­æ˜¾ç¤º Activityï¼ŒåŽè€…ä½äºŽå¦ä¸€è¿›ç¨‹ä¸­ã€‚è¯¥å±žæ€§çš„é»˜è®¤å€¼ä¸º false äºŒã€android:allowTaskReparentingå½“å¯åŠ¨ Activity çš„ä»»åŠ¡æŽ¥ä¸‹æ¥è½¬è‡³å‰å°æ—¶ï¼ŒActivity æ˜¯å¦èƒ½ä»Žè¯¥ä»»åŠ¡è½¬ç§»è‡³ä¸Žå…¶æœ‰äº²å’Œå…³ç³»çš„ä»»åŠ¡ã€‚â€œtrueâ€è¡¨ç¤ºå®ƒå¯ä»¥è½¬ç§»ï¼Œâ€œfalseâ€è¡¨ç¤ºå®ƒä»é¡»ç•™åœ¨å¯åŠ¨å®ƒçš„ä»»åŠ¡å¤„ã€‚å¦‚æžœæœªè®¾ç½®è¯¥å±žæ€§ï¼Œåˆ™å¯¹ Activity é‡‡ç”¨ç”± &lt; application &gt; å…ƒç´ çš„ allowTaskReparenting å±žæ€§è®¾ç½®çš„å€¼ã€‚ é»˜è®¤å€¼ä¸ºâ€œfalseâ€ æ­£å¸¸æƒ…å†µä¸‹ï¼Œå½“ Activity å¯åŠ¨æ—¶ï¼Œä¼šä¸Žå¯åŠ¨å®ƒçš„ä»»åŠ¡å…³è”ï¼Œå¹¶åœ¨å…¶æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ä¸€ç›´ç•™åœ¨è¯¥ä»»åŠ¡å¤„ã€‚å¯ä»¥åˆ©ç”¨è¯¥å±žæ€§å¼ºåˆ¶ Activity åœ¨å…¶å½“å‰ä»»åŠ¡ä¸å†æ˜¾ç¤ºæ—¶å°†å…¶çˆ¶é¡¹æ›´æ”¹ä¸ºä¸Žå…¶æœ‰äº²å’Œå…³ç³»çš„ä»»åŠ¡ã€‚è¯¥å±žæ€§é€šå¸¸ç”¨äºŽä½¿åº”ç”¨çš„ Activity è½¬ç§»è‡³ä¸Žè¯¥åº”ç”¨å…³è”çš„ä¸»ä»»åŠ¡ä¾‹å¦‚ï¼Œå¦‚æžœç”µå­é‚®ä»¶åŒ…å«ç½‘é¡µé“¾æŽ¥ï¼Œåˆ™ç‚¹å‡»é“¾æŽ¥ä¼šè°ƒå‡ºå¯æ˜¾ç¤ºç½‘é¡µçš„ Activityã€‚ è¯¥ Activity ç”±æµè§ˆå™¨åº”ç”¨å®šä¹‰ï¼Œä½†ä½œä¸ºç”µå­é‚®ä»¶ä»»åŠ¡çš„ä¸€éƒ¨åˆ†å¯åŠ¨ã€‚ å¦‚æžœå°†å…¶çˆ¶é¡¹æ›´æ”¹ä¸ºæµè§ˆå™¨ä»»åŠ¡ï¼Œå®ƒä¼šåœ¨æµè§ˆå™¨ä¸‹ä¸€æ¬¡è½¬è‡³å‰å°æ—¶æ˜¾ç¤ºï¼Œå½“ç”µå­é‚®ä»¶ä»»åŠ¡å†æ¬¡è½¬è‡³å‰å°æ—¶åˆ™ä¼šæ¶ˆå¤± Activity çš„äº²å’Œå…³ç³»ç”± taskAffinity å±žæ€§å®šä¹‰ã€‚ ä»»åŠ¡çš„äº²å’Œå…³ç³»é€šè¿‡è¯»å–å…¶æ ¹ Activity çš„äº²å’Œå…³ç³»æ¥ç¡®å®šã€‚å› æ­¤ï¼ŒæŒ‰ç…§å®šä¹‰ï¼Œæ ¹ Activity å§‹ç»ˆä½äºŽå…·æœ‰ç›¸åŒäº²å’Œå…³ç³»çš„ä»»åŠ¡ä¹‹ä¸­ã€‚ ç”±äºŽå…·æœ‰â€œsingleTaskâ€æˆ–â€œsingleInstanceâ€å¯åŠ¨æ¨¡å¼çš„ Activity åªèƒ½ä½äºŽä»»åŠ¡çš„æ ¹ï¼Œå› æ­¤æ›´æ”¹çˆ¶é¡¹ä»…é™äºŽâ€œstandardâ€å’Œâ€œsingleTopâ€æ¨¡å¼ ä¸‰ã€android:alwaysRetainTaskStateç³»ç»Ÿæ˜¯å¦å§‹ç»ˆä¿æŒ Activity æ‰€åœ¨ä»»åŠ¡çš„çŠ¶æ€ ï¼Œâ€œtrueâ€è¡¨ç¤ºä¿æŒï¼Œâ€œfalseâ€è¡¨ç¤ºå…è®¸ç³»ç»Ÿåœ¨ç‰¹å®šæƒ…å†µä¸‹å°†ä»»åŠ¡é‡ç½®åˆ°å…¶åˆå§‹çŠ¶æ€ã€‚ é»˜è®¤å€¼ä¸ºâ€œfalseâ€ã€‚è¯¥å±žæ€§åªå¯¹ä»»åŠ¡çš„æ ¹ Activity æœ‰æ„ä¹‰ï¼Œå¯¹äºŽæ‰€æœ‰å…¶ä»– Activityï¼Œå‡å¿½ç•¥è¯¥å±žæ€§ æ­£å¸¸æƒ…å†µä¸‹ï¼Œå½“ç”¨æˆ·ä»Žä¸»å±å¹•é‡æ–°é€‰æ‹©æŸä¸ªä»»åŠ¡æ—¶ï¼Œç³»ç»Ÿä¼šåœ¨ç‰¹å®šæƒ…å†µä¸‹æ¸…é™¤è¯¥ä»»åŠ¡ï¼ˆä»Žæ ¹ Activity ä¹‹ä¸Šçš„å †æ ˆä¸­ç§»é™¤æ‰€æœ‰ Activityï¼‰ã€‚ ç³»ç»Ÿé€šå¸¸ä¼šåœ¨ç”¨æˆ·ä¸€æ®µæ—¶é—´ï¼ˆå¦‚ 30 åˆ†é’Ÿï¼‰å†…æœªè®¿é—®ä»»åŠ¡æ—¶æ‰§è¡Œæ­¤æ“ä½œ ä¸è¿‡ï¼Œå¦‚æžœè¯¥å±žæ€§çš„å€¼æ˜¯â€œtrueâ€ï¼Œåˆ™æ— è®ºç”¨æˆ·å¦‚ä½•åˆ°è¾¾ä»»åŠ¡ï¼Œå°†å§‹ç»ˆè¿”å›žåˆ°æœ€åŽçŠ¶æ€çš„ä»»åŠ¡ã€‚ ä¾‹å¦‚ï¼Œåœ¨ç½‘ç»œæµè§ˆå™¨è¿™ç±»å­˜åœ¨å¤§é‡ç”¨æˆ·ä¸æ„¿å¤±åŽ»çš„çŠ¶æ€ï¼ˆå¦‚å¤šä¸ªæ‰“å¼€çš„æ ‡ç­¾ï¼‰çš„åº”ç”¨ä¸­ï¼Œè¯¥å±žæ€§ä¼šå¾ˆæœ‰ç”¨ å››ã€android:autoRemoveFromRecentsç”±å…·æœ‰è¯¥å±žæ€§çš„ Activity å¯åŠ¨çš„ä»»åŠ¡æ˜¯å¦ä¸€ç›´ä¿ç•™åœ¨æ¦‚è§ˆå±å¹•ä¸­ï¼Œç›´è‡³ä»»åŠ¡ä¸­çš„æœ€åŽä¸€ä¸ª Activity å®Œæˆä¸ºæ­¢ã€‚ è‹¥ä¸º trueï¼Œåˆ™è‡ªåŠ¨ä»Žæ¦‚è§ˆå±å¹•ä¸­ç§»é™¤ä»»åŠ¡ã€‚ å®ƒä¼šæ›¿æ¢è°ƒç”¨æ–¹ä½¿ç”¨çš„ FLAG_ACTIVITY_RETAIN_IN_RECENTS äº”ã€android:bannerä¸€ç§ä¸ºå…¶å…³è”é¡¹æä¾›æ‰©å±•å›¾å½¢åŒ–æ¨ªå¹…çš„å¯ç»˜åˆ¶èµ„æºã€‚ å°†å…¶ä¸Ž &lt; activity &gt; æ ‡è®°è”ç”¨å¯ä¸ºç‰¹å®š Activity æä¾›é»˜è®¤æ¨ªå¹…ï¼Œä¹Ÿå¯ä¸Ž &lt; application &gt; æ ‡è®°è”ç”¨ï¼Œä¸ºæ‰€æœ‰åº”ç”¨ Activity æä¾›æ¨ªå¹… ç³»ç»Ÿä½¿ç”¨æ¨ªå¹…åœ¨ Android TV ä¸»å±å¹•ä¸­è¡¨ç¤ºåº”ç”¨ã€‚ ç”±äºŽæ¨ªå¹…åªæ˜¾ç¤ºåœ¨ä¸»å±å¹•ä¸­ï¼Œå› æ­¤åªåº”ç”±åŒ…å«çš„ Activity èƒ½å¤Ÿå¤„ç† CATEGORY_LEANBACK_LAUNCHER Intent çš„åº”ç”¨æŒ‡å®š å¿…é¡»å°†è¯¥å±žæ€§è®¾ç½®ä¸ºå¯¹åŒ…å«å›¾åƒçš„å¯ç»˜åˆ¶èµ„æºçš„å¼•ç”¨ï¼ˆä¾‹å¦‚ â€œ@drawable/bannerâ€ï¼‰ï¼Œè¯¥å±žæ€§æ²¡æœ‰é»˜è®¤å€¼ å…­ã€android:clearTaskOnLaunchæ˜¯å¦æ¯å½“ä»Žä¸»å±å¹•é‡æ–°å¯åŠ¨ä»»åŠ¡æ—¶éƒ½ä»Žä¸­ç§»é™¤æ ¹ Activity ä¹‹å¤–çš„æ‰€æœ‰ Activity ï¼Œâ€œtrueâ€è¡¨ç¤ºå§‹ç»ˆå°†ä»»åŠ¡æ¸…é™¤åˆ°åªå‰©å…¶æ ¹ Activityï¼Œâ€œfalseâ€è¡¨ç¤ºä¸åšæ¸…é™¤ã€‚ é»˜è®¤å€¼ä¸ºâ€œfalseâ€ã€‚è¯¥å±žæ€§åªå¯¹å¯åŠ¨æ–°ä»»åŠ¡çš„ Activityï¼ˆæ ¹ Activityï¼‰æœ‰æ„ä¹‰ï¼›å¯¹äºŽä»»åŠ¡ä¸­çš„æ‰€æœ‰å…¶ä»– Activityï¼Œå‡å¿½ç•¥è¯¥å±žæ€§ å½“å€¼ä¸ºâ€œtrueâ€æ—¶ï¼Œæ¯æ¬¡ç”¨æˆ·å†æ¬¡å¯åŠ¨ä»»åŠ¡æ—¶ï¼Œæ— è®ºç”¨æˆ·æœ€åŽåœ¨ä»»åŠ¡ä¸­æ­£åœ¨æ‰§è¡Œå“ªä¸ª Activityï¼Œä¹Ÿæ— è®ºç”¨æˆ·æ˜¯ä½¿ç”¨è¿”å›žè¿˜æ˜¯ä¸»å±å¹•æŒ‰é’®ç¦»å¼€ï¼Œéƒ½ä¼šå°†ç”¨æˆ·è½¬è‡³ä»»åŠ¡çš„æ ¹ Activityã€‚ å½“å€¼ä¸ºâ€œfalseâ€æ—¶ï¼Œå¯åœ¨æŸäº›æƒ…å†µä¸‹æ¸…é™¤ä»»åŠ¡ä¸­çš„ Activityï¼ˆè¯·å‚é˜… alwaysRetainTaskState å±žæ€§ï¼‰ï¼Œä½†å¹¶éžä¸€å¾‹å¯ä»¥ ä¾‹å¦‚ï¼Œå‡å®šæœ‰äººä»Žä¸»å±å¹•å¯åŠ¨äº† Activity Pï¼Œç„¶åŽä»Žé‚£é‡Œè½¬åˆ° Activity Qã€‚è¯¥ç”¨æˆ·æŽ¥ç€æŒ‰äº†ä¸»å±å¹•æŒ‰é’®ï¼Œç„¶åŽè¿”å›žåˆ° Activity Pã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œç”¨æˆ·å°†çœ‹åˆ° Activity Qï¼Œå› ä¸ºé‚£æ˜¯å…¶æœ€åŽåœ¨ P çš„ä»»åŠ¡ä¸­æ‰§è¡Œçš„ Activityã€‚ ä¸è¿‡ï¼Œå¦‚æžœ P å°†æ­¤æ ‡å¿—è®¾ç½®ä¸ºâ€œtrueâ€ï¼Œåˆ™å½“ç”¨æˆ·æŒ‰ä¸‹ä¸»å±å¹•å°†ä»»åŠ¡è½¬å…¥åŽå°æ—¶ï¼Œå…¶ä¸Šçš„æ‰€æœ‰ Activityï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º Qï¼‰éƒ½ä¼šè¢«ç§»é™¤ï¼Œ å› æ­¤ç”¨æˆ·è¿”å›žä»»åŠ¡æ—¶åªä¼šçœ‹åˆ° P å¦‚æžœè¯¥å±žæ€§å’Œ allowTaskReparenting çš„å€¼å‡ä¸ºâ€œtrueâ€ï¼Œåˆ™å¦‚ä¸Šæ‰€è¿°ï¼Œä»»ä½•å¯ä»¥æ›´æ”¹çˆ¶é¡¹çš„ Activity éƒ½å°†è½¬ç§»åˆ°ä¸Žå…¶æœ‰äº²å’Œå…³ç³»çš„ä»»åŠ¡ï¼Œå…¶ä½™ Activity éšå³è¢«ç§»é™¤ ä¸ƒã€android:configChangesåˆ—å‡º Activity å°†è‡ªè¡Œå¤„ç†çš„é…ç½®æ›´æ”¹ã€‚åœ¨è¿è¡Œæ—¶å‘ç”Ÿé…ç½®æ›´æ”¹æ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå…³é—­ Activity ç„¶åŽå°†å…¶é‡æ–°å¯åŠ¨ï¼Œä½†ä½¿ç”¨è¯¥å±žæ€§å£°æ˜Žé…ç½®å°†é˜»æ­¢ Activity é‡æ–°å¯åŠ¨ã€‚ Activity ä¼šä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œå¹¶ä¸”ç³»ç»Ÿä¼šè°ƒç”¨å…¶ onConfigurationChanged() æ–¹æ³•ã€‚åº”é¿å…ä½¿ç”¨è¯¥å±žæ€§ï¼Œå¹¶ä¸”åªåº”åœ¨ä¸‡ä¸å¾—å·²çš„æƒ…å†µä¸‹ä½¿ç”¨ å±žæ€§å€¼ è¯´æ˜Ž mcc IMSI ç§»åŠ¨å›½å®¶/åœ°åŒºä»£ç  (MCC) å‘ç”Ÿäº†å˜åŒ– - æ£€æµ‹åˆ°äº† SIM å¹¶æ›´æ–°äº† MCC mnc IMSI ç§»åŠ¨ç½‘ç»œä»£ç  (MNC) å‘ç”Ÿäº†å˜åŒ– - æ£€æµ‹åˆ°äº† SIM å¹¶æ›´æ–°äº† MNC locale è¯­è¨€åŒºåŸŸå‘ç”Ÿäº†å˜åŒ– â€” ç”¨æˆ·ä¸ºæ–‡æœ¬é€‰æ‹©äº†æ–°çš„æ˜¾ç¤ºè¯­è¨€ touchscreen è§¦æ‘¸å±å‘ç”Ÿäº†å˜åŒ–ï¼ˆè¿™ç§æƒ…å†µé€šå¸¸æ°¸è¿œä¸ä¼šå‘ç”Ÿï¼‰ keyboard é”®ç›˜ç±»åž‹å‘ç”Ÿäº†å˜åŒ– â€” ä¾‹å¦‚ï¼Œç”¨æˆ·æ’å…¥äº†ä¸€ä¸ªå¤–ç½®é”®ç›˜ keyboardHidden é”®ç›˜æ— éšœç¢åŠŸèƒ½å‘ç”Ÿäº†å˜åŒ– â€” ä¾‹å¦‚ï¼Œç”¨æˆ·æ˜¾ç¤ºäº†ç¡¬ä»¶é”®ç›˜ navigation å¯¼èˆªç±»åž‹ï¼ˆè½¨è¿¹çƒ/æ–¹å‘é”®ï¼‰å‘ç”Ÿäº†å˜åŒ–ï¼ˆè¿™ç§æƒ…å†µé€šå¸¸æ°¸è¿œä¸ä¼šå‘ç”Ÿï¼‰ screenLayout å±å¹•å¸ƒå±€å‘ç”Ÿäº†å˜åŒ– â€” è¿™å¯èƒ½æ˜¯ç”±æ¿€æ´»äº†å…¶ä»–æ˜¾ç¤ºæ–¹å¼æ‰€è‡´ fontScale å­—ä½“ç¼©æ”¾ç³»æ•°å‘ç”Ÿäº†å˜åŒ– â€” ç”¨æˆ·é€‰æ‹©äº†æ–°çš„å…¨å±€å­—å· uiMode ç”¨æˆ·ç•Œé¢æ¨¡å¼å‘ç”Ÿäº†å˜åŒ– â€” è¿™å¯èƒ½æ˜¯å› ç”¨æˆ·å°†è®¾å¤‡æ”¾å…¥æ¡Œé¢/è½¦è½½åŸºåº§æˆ–å¤œé—´æ¨¡å¼å‘ç”Ÿå˜åŒ–æ‰€è‡´ã€‚ è¯·å‚é˜… UiModeManagerã€‚ æ­¤é¡¹ä¸º API çº§åˆ« 8 ä¸­æ–°å¢žé…ç½® orientation å±å¹•æ–¹å‘å‘ç”Ÿäº†å˜åŒ– â€” ç”¨æˆ·æ—‹è½¬äº†è®¾å¤‡ã€‚æ³¨ï¼šå¦‚æžœæ‚¨çš„åº”ç”¨é¢å‘ API çº§åˆ« 13 æˆ–æ›´é«˜çº§åˆ«ï¼ˆæŒ‰ç…§ minSdkVersion å’Œ targetSdkVersion å±žæ€§æ‰€å£°æ˜Žçš„çº§åˆ«ï¼‰ï¼Œåˆ™è¿˜åº”å£°æ˜Ž â€œscreenSizeâ€ é…ç½®ï¼Œå› ä¸ºå½“è®¾å¤‡åœ¨æ¨ªå‘ä¸Žçºµå‘ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œè¯¥é…ç½®ä¹Ÿä¼šå‘ç”Ÿå˜åŒ– screenSize å½“å‰å¯ç”¨å±å¹•å°ºå¯¸å‘ç”Ÿäº†å˜åŒ–ã€‚å®ƒè¡¨ç¤ºå½“å‰å¯ç”¨å°ºå¯¸ç›¸å¯¹äºŽå½“å‰çºµæ¨ªæ¯”çš„å˜åŒ–ï¼Œå› æ­¤ä¼šåœ¨ç”¨æˆ·åœ¨æ¨ªå‘ä¸Žçºµå‘ä¹‹é—´åˆ‡æ¢æ—¶å‘ç”Ÿå˜åŒ–ã€‚ ä¸è¿‡ï¼Œå¦‚æžœæ‚¨çš„åº”ç”¨é¢å‘ API çº§åˆ« 12 æˆ–æ›´ä½Žçº§åˆ«ï¼Œåˆ™ Activity å§‹ç»ˆä¼šè‡ªè¡Œå¤„ç†æ­¤é…ç½®å˜æ›´ï¼ˆå³ä¾¿æ˜¯åœ¨ Android 3.2 æˆ–æ›´é«˜ç‰ˆæœ¬çš„è®¾å¤‡ä¸Šè¿è¡Œï¼Œæ­¤é…ç½®å˜æ›´ä¹Ÿä¸ä¼šé‡æ–°å¯åŠ¨ Activityï¼‰ã€‚æ­¤é¡¹ä¸º API çº§åˆ« 13 ä¸­æ–°å¢žé…ç½® smallestScreenSize ç‰©ç†å±å¹•å°ºå¯¸å‘ç”Ÿäº†å˜åŒ–ã€‚å®ƒè¡¨ç¤ºä¸Žæ–¹å‘æ— å…³çš„å°ºå¯¸å˜åŒ–ï¼Œå› æ­¤åªæœ‰åœ¨å®žé™…ç‰©ç†å±å¹•å°ºå¯¸å‘ç”Ÿå˜åŒ–ï¼ˆå¦‚åˆ‡æ¢åˆ°å¤–éƒ¨æ˜¾ç¤ºå™¨ï¼‰æ—¶æ‰ä¼šå˜åŒ–ã€‚ å¯¹æ­¤é…ç½®çš„å˜æ›´å¯¹åº”äºŽsmallestWidth é…ç½®çš„å˜åŒ–ã€‚ ä¸è¿‡ï¼Œå¦‚æžœæ‚¨çš„åº”ç”¨é¢å‘ API çº§åˆ« 12 æˆ–æ›´ä½Žçº§åˆ«ï¼Œåˆ™ Activity å§‹ç»ˆä¼šè‡ªè¡Œå¤„ç†æ­¤é…ç½®å˜æ›´ï¼ˆå³ä¾¿æ˜¯åœ¨ Android 3.2 æˆ–æ›´é«˜ç‰ˆæœ¬çš„è®¾å¤‡ä¸Šè¿è¡Œï¼Œæ­¤é…ç½®å˜æ›´ä¹Ÿä¸ä¼šé‡æ–°å¯åŠ¨ Activityï¼‰ã€‚æ­¤é¡¹ä¸º API çº§åˆ« 13 ä¸­æ–°å¢žé…ç½® layoutDirection å¸ƒå±€æ–¹å‘å‘ç”Ÿäº†å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œä»Žä»Žå·¦è‡³å³ (LTR) æ›´æ”¹ä¸ºä»Žå³è‡³å·¦ (RTL)ã€‚ æ­¤é¡¹ä¸º API çº§åˆ« 17 ä¸­æ–°å¢žé…ç½® æ‰€æœ‰è¿™äº›é…ç½®å˜æ›´éƒ½å¯èƒ½å½±å“åº”ç”¨çœ‹åˆ°çš„èµ„æºå€¼ã€‚ å› æ­¤ï¼Œè°ƒç”¨ onConfigurationChanged() æ—¶ï¼Œé€šå¸¸æœ‰å¿…è¦å†æ¬¡èŽ·å–æ‰€æœ‰èµ„æºï¼ˆåŒ…æ‹¬è§†å›¾å¸ƒå±€ã€å¯ç»˜åˆ¶å¯¹è±¡ç­‰ï¼‰ä»¥æ­£ç¡®å¤„ç†å˜åŒ– å…«ã€android:documentLaunchModeæŒ‡å®šæ¯æ¬¡å¯åŠ¨ä»»åŠ¡æ—¶åº”å¦‚ä½•å‘å…¶ä¸­æ·»åŠ æ–°çš„ Activity å®žä¾‹ã€‚ è¯¥å±žæ€§å…è®¸ç”¨æˆ·è®©å¤šä¸ªæ¥è‡ªåŒä¸€åº”ç”¨çš„æ–‡æ¡£å‡ºçŽ°åœ¨æ¦‚è§ˆå±å¹•ä¸­è¯¥å±žæ€§æœ‰å››ä¸ªå€¼ï¼Œä¼šåœ¨ç”¨æˆ·ä½¿ç”¨è¯¥åº”ç”¨æ‰“å¼€æ–‡æ¡£æ—¶äº§ç”Ÿä»¥ä¸‹æ•ˆæžœï¼š å±žæ€§å€¼ è¯´æ˜Ž intoExisting Activity ä¼šä¸ºæ–‡æ¡£é‡å¤ä½¿ç”¨çŽ°æœ‰ä»»åŠ¡ã€‚ä½¿ç”¨è¯¥å€¼ä¸Žä¸è®¾ç½® FLAG_ACTIVITY_MULTIPLE_TASK æ ‡å¿—ã€ä½†è®¾ç½® FLAG_ACTIVITY_NEW_DOCUMENT æ ‡å¿—æ‰€äº§ç”Ÿçš„æ•ˆæžœç›¸åŒï¼Œå¦‚ä½¿ç”¨ Intent æ ‡å¿—æ·»åŠ ä»»åŠ¡ä¸­æ‰€è¿° always Activity ä¸ºæ–‡æ¡£åˆ›å»ºæ–°ä»»åŠ¡ï¼Œå³ä¾¿æ–‡æ¡£å·²æ‰“å¼€ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ è¿™ä¸ŽåŒæ—¶è®¾ç½® FLAG_ACTIVITY_NEW_DOCUMENT å’Œ FLAG_ACTIVITY_MULTIPLE_TASK æ ‡å¿—çš„æ•ˆæžœç›¸åŒ none è¯¥ Activity ä¸ä¼šä¸º Activity åˆ›å»ºæ–°ä»»åŠ¡ã€‚è¿™æ˜¯é»˜è®¤å€¼ï¼Œå®ƒåªä¼šåœ¨è®¾ç½®äº† FLAG_ACTIVITY_NEW_TASK æ—¶åˆ›å»ºæ–°ä»»åŠ¡ã€‚ æ¦‚è§ˆå±å¹•å°†æŒ‰å…¶é»˜è®¤æ–¹å¼å¯¹å¾…æ­¤ Activityï¼šä¸ºåº”ç”¨æ˜¾ç¤ºå•ä¸ªä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡å°†ä»Žç”¨æˆ·ä¸Šæ¬¡è°ƒç”¨çš„ä»»æ„ Activity å¼€å§‹ç»§ç»­æ‰§è¡Œ never å³ä½¿ Intent åŒ…å« FLAG_ACTIVITY_NEW_DOCUMENTï¼Œè¯¥ Activity ä¹Ÿä¸ä¼šå¯åŠ¨åˆ°æ–°æ–‡æ¡£ä¹‹ä¸­ã€‚ è®¾ç½®æ­¤å€¼ä¼šæ›¿ä»£ FLAG_ACTIVITY_NEW_DOCUMENT å’Œ FLAG_ACTIVITY_MULTIPLE_TASK æ ‡å¿—çš„è¡Œä¸ºï¼ˆå¦‚æžœåœ¨ Activity ä¸­è®¾ç½®äº†å…¶ä¸­ä¸€ä¸ªæ ‡å¿—ï¼‰ï¼Œå¹¶ä¸”æ¦‚è§ˆå±å¹•å°†ä¸ºåº”ç”¨æ˜¾ç¤ºå•ä¸ªä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡å°†ä»Žç”¨æˆ·ä¸Šæ¬¡è°ƒç”¨çš„ä»»æ„ Activity å¼€å§‹ç»§ç»­æ‰§è¡Œ å¯¹äºŽé™¤â€œnoneâ€å’Œâ€œneverâ€ä»¥å¤–çš„å€¼ï¼Œå¿…é¡»ä½¿ç”¨ launchMode=â€standardâ€ å®šä¹‰ Activityã€‚ å¦‚æžœæœªæŒ‡å®šæ­¤å±žæ€§ï¼Œåˆ™ä½¿ç”¨ documentLaunchMode=â€noneâ€ ä¹ã€android:enabledç³»ç»Ÿæ˜¯å¦å¯å°† Activity å®žä¾‹åŒ– â€” â€œtrueâ€ è¡¨ç¤ºå¯ä»¥ï¼Œâ€œfalseâ€è¡¨ç¤ºä¸å¯ä»¥ã€‚ é»˜è®¤å€¼ä¸ºâ€œtrueâ€ &lt; application &gt; å…ƒç´ å…·æœ‰è‡ªå·±çš„ enabled å±žæ€§ï¼Œè¯¥å±žæ€§é€‚ç”¨äºŽæ‰€æœ‰åº”ç”¨ç»„ä»¶ï¼ŒåŒ…æ‹¬ Activityã€‚ &lt; application &gt; å’Œ &lt; activity &gt; å±žæ€§å¿…é¡»éƒ½æ˜¯â€œtrueâ€ï¼ˆå› ä¸ºå®ƒä»¬éƒ½é»˜è®¤ä½¿ç”¨è¯¥å€¼ï¼‰ï¼Œç³»ç»Ÿæ‰èƒ½å°† Activity å®žä¾‹åŒ–ã€‚ å¦‚æžœä»»ä½•ä¸€ä¸ªå±žæ€§æ˜¯â€œfalseâ€ï¼Œåˆ™æ— æ³•è¿›è¡Œå®žä¾‹åŒ– åã€android:excludeFromRecentsæ˜¯å¦åº”å°†è¯¥ Activity å¯åŠ¨çš„ä»»åŠ¡æŽ’é™¤åœ¨æœ€è¿‘ä½¿ç”¨çš„åº”ç”¨åˆ—è¡¨ï¼ˆå³æ¦‚è§ˆå±å¹•ï¼‰ä¹‹å¤–ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è¯¥ Activity æ˜¯æ–°ä»»åŠ¡çš„æ ¹ Activity æ—¶ï¼Œæ­¤å±žæ€§ç¡®å®šä»»åŠ¡æ˜¯å¦åº”å‡ºçŽ°åœ¨æœ€è¿‘ä½¿ç”¨çš„åº”ç”¨åˆ—è¡¨ä¸­ã€‚ å¦‚æžœåº”å°†ä»»åŠ¡æŽ’é™¤åœ¨åˆ—è¡¨ä¹‹å¤–ï¼Œè¯·è®¾ç½®â€œtrueâ€ï¼Œå¦‚æžœåº”å°†å…¶åŒ…æ‹¬åœ¨å†…ï¼Œåˆ™è®¾ç½®â€œfalseâ€ã€‚ é»˜è®¤å€¼ä¸ºâ€œfalseâ€ åä¸€ã€android:exportedActivity æ˜¯å¦å¯ç”±å…¶ä»–åº”ç”¨çš„ç»„ä»¶å¯åŠ¨ ï¼Œâ€œtrueâ€è¡¨ç¤ºå¯ä»¥ï¼Œâ€œfalseâ€è¡¨ç¤ºä¸å¯ä»¥ã€‚è‹¥ä¸ºâ€œfalseâ€ï¼Œåˆ™ Activity åªèƒ½ç”±åŒä¸€åº”ç”¨çš„ç»„ä»¶æˆ–ä½¿ç”¨åŒä¸€ç”¨æˆ· ID çš„ä¸åŒåº”ç”¨å¯åŠ¨ é»˜è®¤å€¼å–å†³äºŽ Activity æ˜¯å¦åŒ…å« Intent è¿‡æ»¤å™¨ã€‚æ²¡æœ‰ä»»ä½•è¿‡æ»¤å™¨æ„å‘³ç€ Activity åªèƒ½é€šè¿‡æŒ‡å®šå…¶ç¡®åˆ‡çš„ç±»åç§°è¿›è¡Œè°ƒç”¨ã€‚ è¿™æ„å‘³ç€ Activity ä¸“ä¾›åº”ç”¨å†…éƒ¨ä½¿ç”¨ï¼ˆå› ä¸ºå…¶ä»–åº”ç”¨ä¸çŸ¥æ™“å…¶ç±»åç§°ï¼‰ã€‚ å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼ä¸ºâ€œfalseâ€ã€‚å¦ä¸€æ–¹é¢ï¼Œè‡³å°‘å­˜åœ¨ä¸€ä¸ªè¿‡æ»¤å™¨æ„å‘³ç€ Activity ä¸“ä¾›å¤–éƒ¨ä½¿ç”¨ï¼Œå› æ­¤é»˜è®¤å€¼ä¸ºâ€œtrueâ€ è¯¥å±žæ€§å¹¶éžé™åˆ¶ Activity å¯¹å…¶ä»–åº”ç”¨å¼€æ”¾åº¦çš„å”¯ä¸€æ‰‹æ®µã€‚ æ‚¨è¿˜å¯ä»¥åˆ©ç”¨æƒé™æ¥é™åˆ¶å“ªäº›å¤–éƒ¨å®žä½“å¯ä»¥è°ƒç”¨ Activityï¼ˆè¯·å‚é˜… permission å±žæ€§ï¼‰ åäºŒã€android:finishOnTaskLaunchæ¯å½“ç”¨æˆ·å†æ¬¡å¯åŠ¨å…¶ä»»åŠ¡ï¼ˆåœ¨ä¸»å±å¹•ä¸Šé€‰æ‹©ä»»åŠ¡ï¼‰æ—¶ï¼Œæ˜¯å¦åº”å…³é—­ï¼ˆå®Œæˆï¼‰çŽ°æœ‰ Activity å®žä¾‹ï¼Œâ€œtrueâ€è¡¨ç¤ºåº”å…³é—­ï¼Œâ€œfalseâ€è¡¨ç¤ºä¸åº”å…³é—­ã€‚ é»˜è®¤å€¼ä¸ºâ€œfalseâ€å¦‚æžœè¯¥å±žæ€§å’Œ allowTaskReparenting å‡ä¸ºâ€œtrueâ€ï¼Œåˆ™ä¼˜å…ˆä½¿ç”¨è¯¥å±žæ€§ã€‚ Activity çš„äº²å’Œå…³ç³»ä¼šè¢«å¿½ç•¥ã€‚ ç³»ç»Ÿä¸æ˜¯æ›´æ”¹ Activity çš„çˆ¶é¡¹ï¼Œè€Œæ˜¯å°†å…¶é”€æ¯ åä¸‰ã€android:hardwareAcceleratedæ˜¯å¦åº”ä¸ºæ­¤ Activity å¯ç”¨ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ï¼Œâ€œtrueâ€è¡¨ç¤ºåº”å¯ç”¨ï¼Œâ€œfalseâ€è¡¨ç¤ºä¸åº”å¯ç”¨ã€‚ é»˜è®¤å€¼ä¸ºâ€œfalseâ€ ä»Ž Android 3.0 å¼€å§‹ï¼Œä¸ºåº”ç”¨æä¾›äº†ç¡¬ä»¶åŠ é€Ÿ OpenGL æ¸²æŸ“å™¨ï¼Œä»¥æ”¹å–„è®¸å¤šå¸¸è§ 2D å›¾å½¢è¿ç®—çš„æ€§èƒ½ã€‚ å¯ç”¨ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“å™¨æ—¶ï¼ŒCanvasã€Paintã€Xfermodeã€ColorFilterã€Shader å’Œ Camera ä¸­çš„å¤§å¤šæ•°è¿ç®—éƒ½ä¼šå¾—åˆ°åŠ é€Ÿã€‚è¿™å¯ä»¥æé«˜åŠ¨ç”»ã€æ»šåŠ¨çš„æµç•…åº¦å’Œæ€»ä½“å“åº”é€Ÿåº¦ï¼Œå³ä¾¿æ˜¯å¹¶ä¸æ˜Žç¡®ä½¿ç”¨æ¡†æž¶ OpenGL åº“çš„åº”ç”¨ä¹Ÿä¼šå—ç›Šã€‚ ç”±äºŽå¯ç”¨ç¡¬ä»¶åŠ é€Ÿä¼šå¢žåŠ èµ„æºæ¶ˆè€—ï¼Œå› æ­¤åº”ç”¨å°†å ç”¨æ›´å¤šå†…å­˜ è¯·æ³¨æ„ï¼Œå¹¶éžæ‰€æœ‰ OpenGL 2D è¿ç®—éƒ½ä¼šå¾—åˆ°åŠ é€Ÿã€‚å¦‚æžœå¯ç”¨ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“å™¨ï¼Œè¯·å¯¹åº”ç”¨è¿›è¡Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿å…¶åœ¨åˆ©ç”¨æ¸²æŸ“å™¨æ—¶ä¸ä¼šå‡ºé”™ åå››ã€android:iconActivity çš„å›¾æ ‡ã€‚è¯¥å›¾æ ‡ä¼šåœ¨éœ€è¦åœ¨å±å¹•ä¸Šè¡¨ç¤º Activity æ—¶æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚ ä¾‹å¦‚ï¼Œä»£è¡¨å¯åŠ¨ä»»åŠ¡çš„ Activity çš„å›¾æ ‡æ˜¾ç¤ºåœ¨å¯åŠ¨å™¨çª—å£ä¸­ã€‚è¯¥å›¾æ ‡é€šå¸¸é™„å¸¦æ ‡ç­¾ï¼ˆè¯·å‚é˜… android:label å±žæ€§ï¼‰ å¿…é¡»å°†è¯¥å±žæ€§è®¾ç½®ä¸ºå¯¹åŒ…å«å›¾åƒå®šä¹‰çš„å¯ç»˜åˆ¶èµ„æºçš„å¼•ç”¨ã€‚ å¦‚æžœæœªè®¾ç½®è¯¥å±žæ€§ï¼Œåˆ™æ”¹ä¸ºä½¿ç”¨ä¸ºåº”ç”¨æ•´ä½“æŒ‡å®šçš„å›¾æ ‡ï¼ˆè¯·å‚é˜… &lt; application &gt; å…ƒç´ çš„ icon å±žæ€§ï¼‰ è¿™ä¸ª Activity çš„å›¾æ ‡ â€” æ— è®ºè®¾ç½®äºŽæ­¤å¤„è¿˜æ˜¯ç”± &lt; application &gt; å…ƒç´ è®¾ç½® â€” åŒæ—¶ä¹Ÿæ˜¯ Activity æ‰€æœ‰ Intent è¿‡æ»¤å™¨çš„é»˜è®¤å›¾æ ‡ï¼ˆè¯·å‚é˜… &lt; intent-filter &gt; å…ƒç´ çš„ icon å±žæ€§ï¼‰ åäº”ã€android:labelä¸€ç§å¯ç”±ç”¨æˆ·è¯»å–çš„ Activity æ ‡ç­¾ã€‚è¯¥æ ‡ç­¾ä¼šåœ¨å¿…é¡»å°† Activity å‘ˆçŽ°ç»™ç”¨æˆ·æ—¶æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ å®ƒé€šå¸¸ä¸Ž Activity å›¾æ ‡ä¸€å¹¶æ˜¾ç¤º å¦‚æžœæœªè®¾ç½®è¯¥å±žæ€§ï¼Œåˆ™æ”¹ä¸ºä½¿ç”¨ä¸ºåº”ç”¨æ•´ä½“è®¾ç½®çš„æ ‡ç­¾ï¼ˆè¯·å‚é˜… &lt; application &gt; å…ƒç´ çš„ label å±žæ€§ï¼‰ è¿™ä¸ª Activity çš„æ ‡ç­¾ â€” æ— è®ºè®¾ç½®äºŽæ­¤å¤„è¿˜æ˜¯ç”± &lt; application &gt; å…ƒç´ è®¾ç½® â€” åŒæ—¶ä¹Ÿæ˜¯ Activity æ‰€æœ‰ Intent è¿‡æ»¤å™¨çš„é»˜è®¤æ ‡ç­¾ï¼ˆè¯·å‚é˜… &lt; intent-filter &gt; å…ƒç´ çš„ label å±žæ€§ï¼‰ åº”å°†è¯¥æ ‡ç­¾è®¾ç½®ä¸ºå¯¹å­—ç¬¦ä¸²èµ„æºçš„å¼•ç”¨ï¼Œä»¥ä¾¿å¯ä»¥åƒç”¨æˆ·ç•Œé¢ä¸­çš„å…¶ä»–å­—ç¬¦ä¸²é‚£æ ·è¿›è¡Œæœ¬åœ°åŒ–ã€‚ä¸è¿‡ï¼Œä¸ºä¾¿äºŽå¼€å‘åº”ç”¨ï¼Œä¹Ÿå¯å°†å…¶è®¾ç½®ä¸ºåŽŸå§‹å­—ç¬¦ä¸² åå…­ã€android:launchModeæœ‰å…³åº”å¦‚ä½•å¯åŠ¨ Activity çš„æŒ‡ä»¤ã€‚å…±æœ‰å››ç§æ¨¡å¼ä¸Ž Intent å¯¹è±¡ä¸­çš„ Activity æ ‡å¿—ï¼ˆFLAG_ACTIVITY_ å¸¸é‡*ï¼‰ååŒå·¥ä½œï¼Œä»¥ç¡®å®šåœ¨è°ƒç”¨ Activity å¤„ç† Intent æ—¶åº”æ‰§è¡Œçš„æ“ä½œã€‚ è¿™äº›æ¨¡å¼æ˜¯ï¼šstandard ã€singleTop ã€singleTask ã€singleInstanceé»˜è®¤æ¨¡å¼æ˜¯â€œstandardâ€**** å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œè¿™äº›æ¨¡å¼åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œâ€œstandardâ€å’Œâ€œsingleTopâ€Activity ä¸ºä¸€ç±»ï¼Œâ€œsingleTaskâ€å’Œâ€œsingleInstanceâ€ä¸ºå¦ä¸€ç±»ã€‚ä½¿ç”¨â€œstandardâ€æˆ–â€œsingleTopâ€å¯åŠ¨æ¨¡å¼çš„ Activity å¯å¤šæ¬¡å®žä¾‹åŒ–ã€‚ å®žä¾‹å¯å½’å±žä»»ä½•ä»»åŠ¡ï¼Œå¹¶ä¸”å¯ä»¥ä½äºŽ Activity å †æ ˆä¸­çš„ä»»ä½•ä½ç½®ã€‚ å®ƒä»¬é€šå¸¸å¯åŠ¨åˆ°åä¸º startActivity() çš„ä»»åŠ¡ä¹‹ä¸­ï¼ˆé™¤éž Intent å¯¹è±¡åŒ…å« FLAG_ACTIVITY_NEW_TASK æŒ‡ä»¤ï¼Œåœ¨æ­¤æƒ…å†µä¸‹ä¼šé€‰æ‹©å…¶ä»–ä»»åŠ¡ï¼Œè¯·å‚é˜… taskAffinity å±žæ€§ï¼‰ ç›¸æ¯”ä¹‹ä¸‹ï¼Œâ€œsingleTaskâ€å’Œâ€œsingleInstanceâ€Activity åªèƒ½å¯åŠ¨ä»»åŠ¡ã€‚ å®ƒä»¬å§‹ç»ˆä½äºŽ Activity å †æ ˆçš„æ ¹ä½ç½®ã€‚æ­¤å¤–ï¼Œè®¾å¤‡ä¸€æ¬¡åªèƒ½ä¿ç•™ä¸€ä¸ª Activity å®žä¾‹ â€” åªå…è®¸ä¸€ä¸ªæ­¤ç±»ä»»åŠ¡ â€œstandardâ€å’Œâ€œsingleTopâ€æ¨¡å¼åªåœ¨ä¸€ä¸ªæ–¹é¢æœ‰å·®å¼‚ï¼š æ¯æ¬¡â€œstandardâ€Activity æœ‰æ–°çš„ Intent æ—¶ï¼Œç³»ç»Ÿéƒ½ä¼šåˆ›å»ºæ–°çš„ç±»å®žä¾‹æ¥å“åº”è¯¥ Intentã€‚æ¯ä¸ªå®žä¾‹å¤„ç†å•ä¸ª Intentã€‚åŒç†ï¼Œä¹Ÿå¯åˆ›å»ºæ–°çš„â€œsingleTopâ€Activity å®žä¾‹æ¥å¤„ç†æ–°çš„ Intentã€‚ ä¸è¿‡ï¼Œå¦‚æžœç›®æ ‡ä»»åŠ¡åœ¨å…¶å †æ ˆé¡¶éƒ¨å·²æœ‰ä¸€ä¸ª Activity å®žä¾‹ï¼Œé‚£ä¹ˆè¯¥å®žä¾‹å°†æŽ¥æ”¶æ–° Intentï¼ˆé€šè¿‡è°ƒç”¨ onNewIntent()ï¼‰ï¼›æ­¤æ—¶ä¸ä¼šåˆ›å»ºæ–°å®žä¾‹ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ â€” ä¾‹å¦‚ï¼Œå¦‚æžœâ€œsingleTopâ€çš„ä¸€ä¸ªçŽ°æœ‰å®žä¾‹è™½åœ¨ç›®æ ‡ä»»åŠ¡å†…ï¼Œä½†æœªå¤„äºŽå †æ ˆé¡¶éƒ¨ï¼Œæˆ–è€…è™½ç„¶ä½äºŽå †æ ˆé¡¶éƒ¨ï¼Œä½†ä¸åœ¨ç›®æ ‡ä»»åŠ¡ä¸­ â€” åˆ™ç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°å®žä¾‹å¹¶å°†å…¶æŽ¨é€åˆ°å †æ ˆä¸Š åŒç†ï¼Œå¦‚æžœæ‚¨å‘ä¸Šå¯¼èˆªåˆ°å½“å‰å †æ ˆä¸Šçš„æŸä¸ª Activityï¼Œè¯¥è¡Œä¸ºç”±çˆ¶ Activity çš„å¯åŠ¨æ¨¡å¼å†³å®šã€‚ å¦‚æžœçˆ¶ Activity æœ‰å¯åŠ¨æ¨¡å¼ singleTopï¼ˆæˆ– up Intent åŒ…å« FLAG_ACTIVITY_CLEAR_TOPï¼‰ï¼Œåˆ™ç³»ç»Ÿä¼šå°†è¯¥çˆ¶é¡¹ç½®äºŽå †æ ˆé¡¶éƒ¨ï¼Œå¹¶ä¿ç•™å…¶çŠ¶æ€ã€‚ å¯¼èˆª Intent ç”±çˆ¶ Activity çš„ onNewIntent() æ–¹æ³•æŽ¥æ”¶ã€‚ å¦‚æžœçˆ¶ Activity æœ‰å¯åŠ¨æ¨¡å¼ standardï¼ˆå¹¶ä¸” up Intent ä¸åŒ…å« FLAG_ACTIVITY_CLEAR_TOPï¼‰ï¼Œåˆ™ç³»ç»Ÿä¼šå°†å½“å‰ Activity åŠå…¶çˆ¶é¡¹åŒæ—¶å¼¹å‡ºå †æ ˆï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„çˆ¶ Activity å®žä¾‹æ¥æŽ¥æ”¶å¯¼èˆª Intent â€œsingleTaskâ€å’Œâ€œsingleInstanceâ€æ¨¡å¼åŒæ ·åªåœ¨ä¸€ä¸ªæ–¹é¢æœ‰å·®å¼‚ï¼š â€œsingleTaskâ€Activity å…è®¸å…¶ä»– Activity æˆä¸ºå…¶ä»»åŠ¡çš„ç»„æˆéƒ¨åˆ†ã€‚ å®ƒå§‹ç»ˆä½äºŽå…¶ä»»åŠ¡çš„æ ¹ä½ç½®ï¼Œä½†å…¶ä»– Activityï¼ˆå¿…ç„¶æ˜¯â€œstandardâ€å’Œâ€œsingleTopâ€Activityï¼‰å¯ä»¥å¯åŠ¨åˆ°è¯¥ä»»åŠ¡ä¸­ã€‚ ç›¸åï¼Œâ€œsingleInstanceâ€Activity åˆ™ä¸å…è®¸å…¶ä»– Activity æˆä¸ºå…¶ä»»åŠ¡çš„ç»„æˆéƒ¨åˆ†ã€‚å®ƒæ˜¯ä»»åŠ¡ä¸­å”¯ä¸€çš„ Activityã€‚ å¦‚æžœå®ƒå¯åŠ¨å¦ä¸€ä¸ª Activityï¼Œç³»ç»Ÿä¼šå°†è¯¥ Activity åˆ†é…ç»™å…¶ä»–ä»»åŠ¡ â€” å°±å¥½åƒ Intent ä¸­åŒ…å« FLAG_ACTIVITY_NEW_TASK ä¸€æ ·ã€‚ ç”¨ä¾‹ å¯åŠ¨æ¨¡å¼ å¤šä¸ªå®žä¾‹ï¼Ÿ æ³¨é‡Š å¤§å¤šæ•° Activity çš„æ­£å¸¸å¯åŠ¨ standard æ˜¯ é»˜è®¤å€¼ã€‚ç³»ç»Ÿå§‹ç»ˆä¼šåœ¨ç›®æ ‡ä»»åŠ¡ä¸­åˆ›å»ºæ–°çš„ Activity å®žä¾‹å¹¶å‘å…¶ä¼ é€ Intent å¤§å¤šæ•° Activity çš„æ­£å¸¸å¯åŠ¨ singleTop æœ‰æ¡ä»¶ å¦‚æžœç›®æ ‡ä»»åŠ¡çš„é¡¶éƒ¨å·²å­˜åœ¨ä¸€ä¸ª Activity å®žä¾‹ï¼Œåˆ™ç³»ç»Ÿä¼šé€šè¿‡è°ƒç”¨è¯¥å®žä¾‹çš„ onNewIntent() æ–¹æ³•å‘å…¶ä¼ é€ Intentï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°çš„ Activity å®žä¾‹ ä¸“ç”¨å¯åŠ¨ï¼ˆä¸å»ºè®®ç”¨ä½œå¸¸è§„ç”¨é€”ï¼‰ singleTask å¦ ç³»ç»Ÿåœ¨æ–°ä»»åŠ¡çš„æ ¹ä½ç½®åˆ›å»º Activity å¹¶å‘å…¶ä¼ é€ Intentã€‚ ä¸è¿‡ï¼Œå¦‚æžœå·²å­˜åœ¨ä¸€ä¸ª Activity å®žä¾‹ï¼Œåˆ™ç³»ç»Ÿä¼šé€šè¿‡è°ƒç”¨è¯¥å®žä¾‹çš„ onNewIntent() æ–¹æ³•å‘å…¶ä¼ é€ Intentï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°çš„ Activity å®žä¾‹ ä¸“ç”¨å¯åŠ¨ï¼ˆä¸å»ºè®®ç”¨ä½œå¸¸è§„ç”¨é€”ï¼‰ singleInstance å¦ ä¸Žâ€œsingleTaskâ€â€ç›¸åŒï¼Œåªæ˜¯ç³»ç»Ÿä¸ä¼šå°†ä»»ä½•å…¶ä»– Activity å¯åŠ¨åˆ°åŒ…å«å®žä¾‹çš„ä»»åŠ¡ä¸­ã€‚ è¯¥ Activity å§‹ç»ˆæ˜¯å…¶ä»»åŠ¡å”¯ä¸€ä»…æœ‰çš„æˆå‘˜ å¦‚ä¸Šè¡¨æ‰€ç¤ºï¼Œstandard æ˜¯é»˜è®¤æ¨¡å¼ï¼Œå¹¶ä¸”é€‚ç”¨äºŽå¤§å¤šæ•°çš„ Activity ç±»åž‹ã€‚å¯¹è®¸å¤šç±»åž‹çš„ Activity è€Œè¨€ï¼ŒSingleTop ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§å¹¶ä¸”æœ‰ç”¨çš„å¯åŠ¨æ¨¡å¼ã€‚ å…¶ä»–æ¨¡å¼ â€” singleTask å’Œ singleInstance ä¸é€‚åˆå¤§å¤šæ•°åº”ç”¨å› ä¸ºå®ƒä»¬æ‰€å½¢æˆçš„äº¤äº’æ¨¡å¼å¯èƒ½è®©ç”¨æˆ·æ„Ÿåˆ°é™Œç”Ÿï¼Œå¹¶ä¸”ä¸Žå¤§å¤šæ•°å…¶ä»–åº”ç”¨è¿¥å¼‚ã€‚ æ— è®ºé€‰æ‹©å“ªä¸€ç§å¯åŠ¨æ¨¡å¼ï¼Œè¯·åŠ¡å¿…åœ¨å¯åŠ¨æœŸé—´ä»¥åŠä½¿ç”¨è¿”å›žæŒ‰é’®ä»Žå…¶ä»– Activity å’Œä»»åŠ¡è¿”å›žè¯¥ Activity æ—¶å¯¹å…¶è¿›è¡Œæ˜“ç”¨æ€§æµ‹è¯•ã€‚ åä¸ƒã€android:maxRecentsæ¦‚è§ˆå±å¹•ä¸­ä½äºŽæ­¤ Activity æ ¹ä½ç½®çš„ä»»åŠ¡æ•°ä¸Šé™ã€‚ è¾¾åˆ°è¯¥æ¡ç›®æ•°æ—¶ï¼Œç³»ç»Ÿä¼šä»Žæ¦‚è§ˆå±å¹•ä¸­ç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„å®žä¾‹ã€‚ è¯¥å€¼å¿…é¡»æ˜¯æ•´æ•°ï¼Œæœ‰æ•ˆå€¼ä¸º 1-50ï¼ˆä½Žå†…å­˜è®¾å¤‡ä½¿ç”¨ 25ï¼‰ï¼Œé»˜è®¤å€¼ä¸º 16 åå…«ã€android:multiprocessæ˜¯å¦å¯ä»¥å°† Activity å®žä¾‹å¯åŠ¨åˆ°å¯åŠ¨è¯¥å®žä¾‹çš„ç»„ä»¶è¿›ç¨‹å†… ï¼Œâ€œtrueâ€è¡¨ç¤ºå¯ä»¥ï¼Œâ€œfalseâ€è¡¨ç¤ºä¸å¯ä»¥ã€‚é»˜è®¤å€¼ä¸ºâ€œfalseâ€æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ–°çš„ Activity å®žä¾‹ä¼šå¯åŠ¨åˆ°å®šä¹‰å®ƒçš„åº”ç”¨è¿›ç¨‹å†…ï¼Œå› æ­¤æ‰€æœ‰ Activity å®žä¾‹éƒ½åœ¨åŒä¸€è¿›ç¨‹å†…è¿è¡Œã€‚ ä¸è¿‡ï¼Œå¦‚æžœè¯¥æ ‡å¿—è®¾ç½®ä¸ºâ€œtrueâ€ï¼ŒActivity å®žä¾‹ä¾¿å¯åœ¨å¤šä¸ªè¿›ç¨‹å†…è¿è¡Œï¼Œè¿™æ ·ç³»ç»Ÿå°±èƒ½åœ¨ä»»ä½•ä½¿ç”¨å®žä¾‹çš„åœ°æ–¹åˆ›å»ºå®žä¾‹ï¼ˆå‰ææ˜¯æƒé™å…è®¸è¿™æ ·åšï¼‰ï¼Œä½†è¿™å‡ ä¹Žæ¯«æ— å¿…è¦æ€§æˆ–å¯å–ä¹‹å¤„ åä¹ã€android:nameå®žçŽ° Activity çš„ç±»çš„åç§°ï¼Œæ˜¯ Activity çš„å­ç±»ã€‚ è¯¥å±žæ€§å€¼åº”ä¸ºå®Œå…¨é™å®šç±»åç§°ï¼ˆä¾‹å¦‚ï¼Œâ€œcom.example.project.ExtracurricularActivityâ€ï¼‰ã€‚ä¸è¿‡ï¼Œä¸ºäº†ç®€ä¾¿èµ·è§ï¼Œå¦‚æžœåç§°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¥ç‚¹ï¼ˆä¾‹å¦‚ï¼Œâ€œ.ExtracurricularActivityâ€ï¼‰ï¼Œåˆ™åç§°å°†è¿½åŠ åˆ° &lt; manifest &gt; å…ƒç´ ä¸­æŒ‡å®šçš„è½¯ä»¶åŒ…åç§°ã€‚å¼€å‘è€…å¿…é¡»æŒ‡å®šè¯¥åç§° äºŒåã€android:noHistoryå½“ç”¨æˆ·ç¦»å¼€ Activity å¹¶ä¸”å…¶åœ¨å±å¹•ä¸Šä¸å†å¯è§æ—¶ï¼Œæ˜¯å¦åº”ä»Ž Activity å †æ ˆä¸­å°†å…¶ç§»é™¤å¹¶è°ƒç”¨å…¶ finish() æ–¹æ³•ã€‚é»˜è®¤å€¼ä¸ºâ€œfalseâ€ï¼Œâ€œtrueâ€å€¼è¡¨ç¤º Activity ä¸ä¼šç•™ä¸‹åŽ†å²è½¨è¿¹ã€‚ å®ƒä¸ä¼šç•™åœ¨ä»»åŠ¡çš„ Activity å †æ ˆå†…ï¼Œå› æ­¤ç”¨æˆ·å°†æ— æ³•è¿”å›ž Activityã€‚ åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå¦‚æžœå¯åŠ¨å¦ä¸€ä¸ª Activity æ¥èŽ·å–è¯¥ Activity çš„ç»“æžœï¼Œç³»ç»Ÿæ°¸è¿œä¸ä¼šè°ƒç”¨ onActivityResult()ã€‚è¯¥å±žæ€§æ˜¯åœ¨ API çº§åˆ« 3 å¼•å…¥çš„ äºŒåä¸€ã€android:parentActivityNameActivity é€»è¾‘çˆ¶é¡¹çš„ç±»åç§°ã€‚æ­¤å¤„çš„åç§°å¿…é¡»ä¸Žä¸ºç›¸åº” &lt; activity &gt; å…ƒç´ çš„ android:name å±žæ€§æŒ‡å®šçš„ç±»åç§°ä¸€è‡´ ç³»ç»Ÿä¼šè¯»å–è¯¥å±žæ€§ï¼Œä»¥ç¡®å®šå½“ç”¨æˆ·æŒ‰ä¸‹æ“ä½œæ ä¸­çš„â€œå‘ä¸Šâ€æŒ‰é’®æ—¶åº”è¯¥å¯åŠ¨å“ªä¸€ä¸ª Activityã€‚ ç³»ç»Ÿè¿˜å¯ä»¥åˆ©ç”¨è¿™äº›ä¿¡æ¯é€šè¿‡ TaskStackBuilder åˆæˆ Activity çš„è¿”å›žæ ˆ è¯¥å±žæ€§æ˜¯åœ¨ API çº§åˆ« 16 å¼•å…¥çš„ï¼Œè¦æ”¯æŒ API çº§åˆ« 4 - 16ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸º â€œandroid.support.PARENT_ACTIVITYâ€œ æŒ‡å®šå€¼çš„ &lt; meta-data &gt; å…ƒç´ æ¥å£°æ˜Žçˆ¶ Activityã€‚ä¾‹å¦‚ï¼š 123456789&lt;activity android:name="com.example.app.ChildActivity" android:label="@string/title_child_activity" android:parentActivityName="com.example.app.MainActivity" &gt; &lt;!-- Parent activity meta-data to support API level 4+ --&gt; &lt;meta-data android:name="android.support.PARENT_ACTIVITY" android:value="com.example.app.MainActivity" /&gt;&lt;/activity&gt; äºŒåäºŒã€android:permissionå®¢æˆ·ç«¯å¯åŠ¨ Activity æˆ–ä»¥å…¶ä»–æ–¹å¼ä»¤å…¶å“åº” Intent è€Œå¿…é¡»å…·å¤‡çš„æƒé™çš„åç§°ã€‚ å¦‚æžœç³»ç»Ÿå°šæœªå‘ startActivity() æˆ– startActivityForResult() çš„è°ƒç”¨æ–¹æŽˆäºˆæŒ‡å®šæƒé™ï¼Œå…¶ Intent å°†ä¸ä¼šä¼ é€’ç»™ Activityå¦‚æžœæœªè®¾ç½®è¯¥å±žæ€§ï¼Œåˆ™å¯¹ Activity åº”ç”¨ &lt; application &gt; å…ƒç´ çš„ permission å±žæ€§è®¾ç½®çš„æƒé™ã€‚ å¦‚æžœè¿™ä¸¤ä¸ªå±žæ€§å‡æœªè®¾ç½®ï¼Œåˆ™ Activity ä¸å—æƒé™ä¿æŠ¤ äºŒåä¸‰ã€android:processåº”åœ¨å…¶ä¸­è¿è¡Œ Activity çš„è¿›ç¨‹çš„åç§°ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œåº”ç”¨çš„æ‰€æœ‰ç»„ä»¶éƒ½åœ¨ä¸ºåº”ç”¨åˆ›å»ºçš„é»˜è®¤è¿›ç¨‹åç§°å†…è¿è¡Œï¼Œæ— éœ€ä½¿ç”¨è¯¥å±žæ€§ã€‚ ä½†åœ¨å¿…è¦æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥å±žæ€§æ›¿æ¢é»˜è®¤è¿›ç¨‹åç§°ï¼Œä»¥ä¾¿è®©åº”ç”¨ç»„ä»¶æ•£å¸ƒåˆ°å¤šä¸ªè¿›ç¨‹ä¸­ å¦‚æžœä¸ºè¯¥å±žæ€§åˆ†é…çš„åç§°ä»¥å†’å·ï¼ˆâ€œ:â€ï¼‰å¼€å¤´ï¼Œåˆ™ä¼šåœ¨éœ€è¦æ—¶åˆ›å»ºåº”ç”¨ä¸“ç”¨çš„æ–°è¿›ç¨‹ï¼Œå¹¶ä¸” Activity ä¼šåœ¨è¯¥è¿›ç¨‹ä¸­è¿è¡Œã€‚å¦‚æžœè¿›ç¨‹åç§°ä»¥å°å†™å­—ç¬¦å¼€å¤´ï¼ŒActivity å°†åœ¨è¯¥åç§°çš„å…¨å±€è¿›ç¨‹ä¸­è¿è¡Œï¼Œå‰ææ˜¯å®ƒæ‹¥æœ‰ç›¸åº”çš„æƒé™ã€‚è¿™å¯ä»¥è®©ä¸åŒåº”ç”¨ä¸­çš„ç»„ä»¶å…±äº«ä¸€ä¸ªè¿›ç¨‹ï¼Œä»Žè€Œå‡å°‘èµ„æºå ç”¨ &lt; application &gt; å…ƒç´ çš„ process å±žæ€§å¯ä¸ºæ‰€æœ‰ç»„ä»¶è®¾ç½®ä¸€ä¸ªä¸åŒçš„é»˜è®¤è¿›ç¨‹åç§° äºŒåå››ã€android:relinquishTaskIdentityActivity æ˜¯å¦å°†å…¶ä»»åŠ¡æ ‡è¯†ç¬¦äº¤ç»™ä»»åŠ¡æ ˆä¸­åœ¨å…¶ä¹‹ä¸Šçš„ Activityã€‚ å¦‚æžœä»»åŠ¡æ ¹ Activity çš„è¯¥å±žæ€§è®¾ç½®ä¸ºâ€œtrueâ€ï¼Œåˆ™ä»»åŠ¡ä¼šç”¨å…¶å†…çš„ä¸‹ä¸€ä¸ª Activity çš„ Intent æ›¿æ¢åŸºæœ¬ Intentã€‚ å¦‚æžœä¸‹ä¸€ä¸ª Activity çš„è¯¥å±žæ€§ä¹Ÿè®¾ç½®ä¸ºâ€œtrueâ€ï¼Œåˆ™è¯¥ Activity ä¼šå°†åŸºæœ¬ Intent ç»™äºˆå…¶åœ¨åŒä¸€ä»»åŠ¡ä¸­å¯åŠ¨çš„ä»»ä½• Activityã€‚ ç³»ç»Ÿç»§ç»­ä¸ºæ¯ä¸ª Activity æ‰§è¡Œæ­¤è¿‡ç¨‹ï¼Œç›´è‡³é‡åˆ°çš„æŸä¸ª Activity å°†è¯¥å±žæ€§è®¾ç½®ä¸ºâ€œfalseâ€ä¸ºæ­¢ã€‚ é»˜è®¤å€¼ä¸ºâ€œfalseâ€ å¦‚æžœè¯¥å±žæ€§è®¾ç½®ä¸ºâ€œtrueâ€ï¼Œåˆ™ Activity è¿˜å¯åˆ©ç”¨ ActivityManager.TaskDescription æ¥æ›´æ”¹æ¦‚è§ˆå±å¹•ä¸­çš„æ ‡ç­¾ã€é¢œè‰²å’Œå›¾æ ‡ äºŒåäº”ã€android:resizeableActivityæŒ‡å®šåº”ç”¨æ˜¯å¦æ”¯æŒå¤šçª—å£æ˜¾ç¤ºã€‚æ‚¨å¯ä»¥åœ¨ &lt; activity &gt; æˆ– &lt; application &gt; å…ƒç´ ä¸­è®¾ç½®è¯¥å±žæ€§ å¦‚æžœå°†è¯¥å±žæ€§è®¾ç½®ä¸º trueï¼Œåˆ™ç”¨æˆ·å¯ä»¥åˆ†å±å’Œè‡ªç”±å½¢çŠ¶æ¨¡å¼å¯åŠ¨ Activityã€‚ å¦‚æžœå°†è¯¥å±žæ€§è®¾ç½®ä¸º falseï¼ŒActivity å°†ä¸æ”¯æŒå¤šçª—å£æ¨¡å¼ã€‚ å¦‚æžœè¯¥å€¼ä¸º falseï¼Œä¸”ç”¨æˆ·å°è¯•åœ¨å¤šçª—å£æ¨¡å¼ä¸‹å¯åŠ¨ Activityï¼Œè¯¥ Activity å°†å…¨å±æ˜¾ç¤º è¯¥å±žæ€§æ˜¯åœ¨ API çº§åˆ« 24 æ·»åŠ çš„ï¼Œå¦‚æžœåº”ç”¨é¢å‘ API çº§åˆ« 24 æˆ–æ›´é«˜çº§åˆ«ï¼Œä½†æœªå¯¹è¯¥å±žæ€§æŒ‡å®šå€¼ï¼Œåˆ™è¯¥å±žæ€§çš„å€¼é»˜è®¤è®¾ä¸º true äºŒåå…­ã€android:screenOrientationActivity åœ¨è®¾å¤‡ä¸Šçš„æ˜¾ç¤ºæ–¹å‘ã€‚å¦‚æžœ Activity æ˜¯åœ¨å¤šçª—å£æ¨¡å¼ä¸‹è¿è¡Œï¼Œç³»ç»Ÿä¼šå¿½ç•¥è¯¥å±žæ€§å…¶å€¼å¯ä»¥æ˜¯ä¸‹åˆ—ä»»ä¸€å­—ç¬¦ä¸²ï¼š å±žæ€§å€¼ è¯´æ˜Ž unspecified é»˜è®¤å€¼ã€‚ç”±ç³»ç»Ÿé€‰æ‹©æ–¹å‘ã€‚åœ¨ä¸åŒè®¾å¤‡ä¸Šï¼Œç³»ç»Ÿä½¿ç”¨çš„æ”¿ç­–ä»¥åŠåŸºäºŽæ”¿ç­–åœ¨ç‰¹å®šä¸Šä¸‹æ–‡æ‰€åšçš„é€‰æ‹©å¯èƒ½æœ‰æ‰€å·®å¼‚ behind ä¸Ž Activity æ ˆä¸­ç´§æŽ¥ç€å®ƒçš„ Activity çš„æ–¹å‘ç›¸åŒ landscape æ¨ªå‘æ–¹å‘ï¼ˆæ˜¾ç¤ºçš„å®½åº¦å¤§äºŽé«˜åº¦ï¼‰ portrait çºµå‘æ–¹å‘ï¼ˆæ˜¾ç¤ºçš„é«˜åº¦å¤§äºŽå®½åº¦ï¼‰ reverseLandscape ä¸Žæ­£å¸¸æ¨ªå‘æ–¹å‘ç›¸åçš„æ¨ªå‘æ–¹å‘ã€‚API çº§åˆ« 9 ä¸­çš„æ–°å¢žé…ç½® reversePortrait ä¸Žæ­£å¸¸çºµå‘æ–¹å‘ç›¸åçš„çºµå‘æ–¹å‘ã€‚API çº§åˆ« 9 ä¸­çš„æ–°å¢žé…ç½® sensorLandscape æ¨ªå‘æ–¹å‘ï¼Œä½†æ ¹æ®è®¾å¤‡ä¼ æ„Ÿå™¨ï¼Œå¯ä»¥æ˜¯æ­£å¸¸æˆ–åå‘çš„æ¨ªå‘æ–¹å‘ã€‚API çº§åˆ« 9 ä¸­çš„æ–°å¢žé…ç½® sensorPortrait çºµå‘æ–¹å‘ï¼Œä½†æ ¹æ®è®¾å¤‡ä¼ æ„Ÿå™¨ï¼Œå¯ä»¥æ˜¯æ­£å¸¸æˆ–åå‘çš„çºµå‘æ–¹å‘ã€‚API çº§åˆ« 9 ä¸­çš„æ–°å¢žé…ç½® userLandscape æ¨ªå‘æ–¹å‘ï¼Œä½†æ ¹æ®è®¾å¤‡ä¼ æ„Ÿå™¨å’Œç”¨æˆ·çš„ä¼ æ„Ÿå™¨é¦–é€‰é¡¹ï¼Œå¯ä»¥æ˜¯æ­£å¸¸æˆ–åå‘çš„æ¨ªå‘æ–¹å‘ã€‚ å¦‚æžœç”¨æˆ·é”å®šäº†åŸºäºŽä¼ æ„Ÿå™¨çš„æ—‹è½¬ï¼Œå…¶è¡Œä¸ºä¸Ž landscape ç›¸åŒï¼Œå¦åˆ™ï¼Œå…¶è¡Œä¸ºä¸Ž sensorLandscape ç›¸åŒã€‚API çº§åˆ« 18 ä¸­çš„æ–°å¢žé…ç½® userPortrait çºµå‘æ–¹å‘ï¼Œä½†æ ¹æ®è®¾å¤‡ä¼ æ„Ÿå™¨å’Œç”¨æˆ·çš„ä¼ æ„Ÿå™¨é¦–é€‰é¡¹ï¼Œå¯ä»¥æ˜¯æ­£å¸¸æˆ–åå‘çš„çºµå‘æ–¹å‘ã€‚ å¦‚æžœç”¨æˆ·é”å®šäº†åŸºäºŽä¼ æ„Ÿå™¨çš„æ—‹è½¬ï¼Œå…¶è¡Œä¸ºä¸Ž portrait ç›¸åŒï¼Œå¦åˆ™ï¼Œå…¶è¡Œä¸ºä¸Ž sensorPortrait ç›¸åŒã€‚API çº§åˆ« 18 ä¸­çš„æ–°å¢žé…ç½® sensor æ–¹å‘ç”±è®¾å¤‡æ–¹å‘ä¼ æ„Ÿå™¨å†³å®šã€‚æ˜¾ç¤ºæ–¹å‘å–å†³äºŽç”¨æˆ·å¦‚ä½•æ‰‹æŒè®¾å¤‡ï¼Œå®ƒä¼šåœ¨ç”¨æˆ·æ—‹è½¬è®¾å¤‡æ—¶å‘ç”Ÿå˜åŒ–ã€‚ ä½†ä¸€äº›è®¾å¤‡é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šæ—‹è½¬åˆ°æ‰€æœ‰å››ç§å¯èƒ½çš„æ–¹å‘ã€‚è¦å…è®¸å…¨éƒ¨å››ç§æ–¹å‘ï¼Œè¯·ä½¿ç”¨ â€œfullSensorâ€ fullSensor æ–¹å‘ç”± 4 ç§æ–¹å‘ä¸­ä»»ä¸€æ–¹å‘çš„è®¾å¤‡æ–¹å‘ä¼ æ„Ÿå™¨å†³å®šã€‚è¿™ä¸Ž â€œsensorâ€ ç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯å®ƒå…è®¸æ‰€æœ‰ 4 ç§å¯èƒ½çš„å±å¹•æ–¹å‘ï¼Œæ— è®ºè®¾å¤‡æ­£å¸¸æƒ…å†µä¸‹é‡‡ç”¨ä»€ä¹ˆæ–¹å‘ï¼ˆä¾‹å¦‚ï¼Œä¸€äº›è®¾å¤‡æ­£å¸¸æƒ…å†µä¸‹ä¸ä½¿ç”¨åå‘çºµå‘æˆ–åå‘æ¨ªå‘ï¼Œä½†å®ƒæ”¯æŒè¿™äº›æ–¹å‘ï¼‰ã€‚ API çº§åˆ« 9 ä¸­çš„æ–°å¢žé…ç½® nosensor å†³å®šæ–¹å‘æ—¶ä¸è€ƒè™‘ç‰©ç†æ–¹å‘ä¼ æ„Ÿå™¨ã€‚ä¼ æ„Ÿå™¨ä¼šè¢«å¿½ç•¥ï¼Œå› æ­¤æ˜¾ç¤ºä¸ä¼šéšç”¨æˆ·å¯¹è®¾å¤‡çš„ç§»åŠ¨è€Œæ—‹è½¬ã€‚ é™¤äº†è¿™ä¸ªåŒºåˆ«ï¼Œç³»ç»Ÿåœ¨é€‰æ‹©æ–¹å‘æ—¶ä½¿ç”¨çš„æ”¿ç­–ä¸Žâ€œunspecifiedâ€è®¾ç½®ç›¸åŒ user ç”¨æˆ·å½“å‰çš„é¦–é€‰æ–¹å‘ fullUser å¦‚æžœç”¨æˆ·é”å®šäº†åŸºäºŽä¼ æ„Ÿå™¨çš„æ—‹è½¬ï¼Œå…¶è¡Œä¸ºä¸Ž user ç›¸åŒï¼Œå¦åˆ™ï¼Œå…¶è¡Œä¸ºä¸Ž fullSensor ç›¸åŒï¼Œå…è®¸æ‰€æœ‰ 4 ç§å¯èƒ½çš„å±å¹•æ–¹å‘ã€‚ API çº§åˆ« 18 ä¸­çš„æ–°å¢žé…ç½® locked å°†æ–¹å‘é”å®šåœ¨å…¶å½“å‰çš„ä»»æ„æ—‹è½¬æ–¹å‘ã€‚API çº§åˆ« 18 ä¸­çš„æ–°å¢žé…ç½® å¦‚æžœå£°æ˜Žå…¶ä¸­ä¸€ä¸ªæ¨ªå‘æˆ–çºµå‘å€¼ï¼Œç³»ç»Ÿå°†å…¶è§†ä¸ºå¯¹ Activity è¿è¡Œæ–¹å‘çš„ç¡¬æ€§è¦æ±‚ã€‚ å› æ­¤ï¼Œå£°æ˜Žçš„å€¼æ”¯æŒé€šè¿‡ Google Play ä¹‹ç±»çš„æœåŠ¡è¿›è¡Œè¿‡æ»¤ï¼Œè¿™æ ·å°±èƒ½å°†åº”ç”¨åªæä¾›ç»™æ”¯æŒ Activity æ‰€è¦æ±‚æ–¹å‘çš„è®¾å¤‡ã€‚ ä¾‹å¦‚ï¼Œå¦‚æžœå£°æ˜Žäº† â€œlandscapeâ€ã€â€reverseLandscapeâ€ æˆ– â€œsensorLandscapeâ€ï¼Œåˆ™åº”ç”¨å°†åªæä¾›ç»™æ”¯æŒæ¨ªå‘æ–¹å‘çš„è®¾å¤‡ã€‚ ä¸è¿‡ï¼Œè¿˜åº”é€šè¿‡ &lt; uses-feature &gt; å…ƒç´ æ˜Žç¡®å£°æ˜Žï¼Œåº”ç”¨è¦æ±‚é‡‡ç”¨çºµå‘æˆ–æ¨ªå‘æ–¹å‘ã€‚ ä¾‹å¦‚ï¼Œ&lt; uses-feature android:name=â€android.hardware.screen.portraitâ€/ &gt;ã€‚è¿™çº¯ç²¹æ˜¯ Google Playï¼ˆä»¥åŠå…¶ä»–æ”¯æŒå®ƒçš„æœåŠ¡ï¼‰æä¾›çš„ä¸€ç§è¿‡æ»¤è¡Œä¸ºï¼Œå¹³å°æœ¬èº«å¹¶ä¸èƒ½æŽ§åˆ¶å½“è®¾å¤‡ä»…æ”¯æŒç‰¹å®šæ–¹å‘æ—¶åº”ç”¨èƒ½å¦å®‰è£… äºŒåä¸ƒã€android:stateNotNeededèƒ½å¦åœ¨ä¸ä¿å­˜ Activity çŠ¶æ€çš„æƒ…å†µä¸‹å°†å…¶ç»ˆæ­¢å¹¶æˆåŠŸé‡æ–°å¯åŠ¨ ï¼Œâ€œtrueâ€è¡¨ç¤ºå¯åœ¨ä¸è€ƒè™‘å…¶ä¹‹å‰çŠ¶æ€çš„æƒ…å†µä¸‹é‡æ–°å¯åŠ¨ï¼Œâ€œfalseâ€è¡¨ç¤ºéœ€è¦ä¹‹å‰çŠ¶æ€ã€‚ é»˜è®¤å€¼ä¸ºâ€œfalseâ€ æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸ºä¿å­˜èµ„æºè€Œæš‚æ—¶å…³é—­ Activity å‰ï¼Œç³»ç»Ÿä¼šè°ƒç”¨å…¶ onSaveInstanceState() æ–¹æ³•ã€‚ è¯¥æ–¹æ³•å°† Activity çš„å½“å‰çŠ¶æ€å­˜å‚¨åœ¨ä¸€ä¸ª Bundle å¯¹è±¡ä¸­ï¼Œç„¶åŽåœ¨ Activity é‡æ–°å¯åŠ¨æ—¶å°†å…¶ä¼ é€’ç»™ onCreate()ã€‚ å¦‚æžœè¯¥å±žæ€§è®¾ç½®ä¸ºâ€œtrueâ€ï¼Œç³»ç»Ÿå¯èƒ½ä¸ä¼šè°ƒç”¨ onSaveInstanceState()ï¼Œå¹¶ä¸”ä¼šå‘ onCreate() ä¼ é€’ null è€Œä¸æ˜¯ Bundleï¼Œè¿™ä¸Žå®ƒåœ¨ Activity é¦–æ¬¡å¯åŠ¨æ—¶å®Œå…¨ä¸€æ · â€œtrueâ€è®¾ç½®å¯ç¡®ä¿ Activity èƒ½å¤Ÿåœ¨æœªä¿ç•™çŠ¶æ€æ—¶é‡æ–°å¯åŠ¨ã€‚ ä¾‹å¦‚ï¼Œæ˜¾ç¤ºä¸»å±å¹•çš„ Activity å¯ä»¥ä½¿ç”¨è¯¥è®¾ç½®æ¥ç¡®ä¿å…¶ç”±äºŽæŸç§åŽŸå› å´©æºƒæ—¶ä¸ä¼šè¢«ç§»é™¤ äºŒåå…«ã€android:supportsPictureInPictureæŒ‡å®š Activity æ˜¯å¦æ”¯æŒç”»ä¸­ç”»æ˜¾ç¤ºã€‚å¦‚æžœ android:resizeableActivity æ˜¯ falseï¼Œç³»ç»Ÿä¼šå¿½ç•¥è¯¥å±žæ€§ã€‚è¯¥å±žæ€§æ˜¯åœ¨ API çº§åˆ« 24 æ·»åŠ çš„ äºŒåä¹ã€android:taskAffinityä¸Ž Activity æœ‰ç€äº²å’Œå…³ç³»çš„ä»»åŠ¡ã€‚ä»Žæ¦‚å¿µä¸Šè®²ï¼Œå…·æœ‰ç›¸åŒäº²å’Œå…³ç³»çš„ Activity å½’å±žåŒä¸€ä»»åŠ¡ï¼ˆä»Žç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œåˆ™æ˜¯å½’å±žåŒä¸€â€œåº”ç”¨â€ï¼‰ã€‚ ä»»åŠ¡çš„äº²å’Œå…³ç³»ç”±å…¶æ ¹ Activity çš„äº²å’Œå…³ç³»ç¡®å®š äº²å’Œå…³ç³»ç¡®å®šä¸¤ä»¶äº‹ - Activity æ›´æ”¹åˆ°çš„çˆ¶é¡¹ä»»åŠ¡ï¼ˆè¯·å‚é˜… allowTaskReparenting å±žæ€§ï¼‰å’Œé€šè¿‡ FLAG_ACTIVITY_NEW_TASK æ ‡å¿—å¯åŠ¨ Activity æ—¶å°†ç”¨æ¥å®¹çº³å®ƒçš„ä»»åŠ¡ é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ä¸­çš„æ‰€æœ‰ Activity éƒ½å…·æœ‰ç›¸åŒçš„äº²å’Œå…³ç³»ã€‚æ‚¨å¯ä»¥è®¾ç½®è¯¥å±žæ€§æ¥ä»¥ä¸åŒæ–¹å¼ç»„åˆå®ƒä»¬ï¼Œç”šè‡³å¯ä»¥å°†åœ¨ä¸åŒåº”ç”¨ä¸­å®šä¹‰çš„ Activity ç½®äºŽåŒä¸€ä»»åŠ¡å†…ã€‚ è¦æŒ‡å®š Activity ä¸Žä»»ä½•ä»»åŠ¡å‡æ— äº²å’Œå…³ç³»ï¼Œè¯·å°†å…¶è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸² å¦‚æžœæœªè®¾ç½®è¯¥å±žæ€§ï¼Œåˆ™ Activity ç»§æ‰¿ä¸ºåº”ç”¨è®¾ç½®çš„äº²å’Œå…³ç³»ï¼ˆè¯·å‚é˜… &lt; application &gt; å…ƒç´ çš„ taskAffinity å±žæ€§ï¼‰ã€‚ åº”ç”¨é»˜è®¤äº²å’Œå…³ç³»çš„åç§°æ˜¯ &lt; manifest &gt; å…ƒç´ è®¾ç½®çš„è½¯ä»¶åŒ…åç§° ä¸‰åã€android:themeå¯¹å®šä¹‰ Activity æ€»ä½“ä¸»é¢˜çš„æ ·å¼èµ„æºçš„å¼•ç”¨ã€‚å®ƒä¼šè‡ªåŠ¨å°† Activity çš„ä¸Šä¸‹æ–‡è®¾ç½®ä¸ºä½¿ç”¨è¯¥ä¸»é¢˜ï¼Œå®ƒè¿˜å¯ä»¥å¼•å‘ Activity å¯åŠ¨å‰çš„â€œå¯åŠ¨â€åŠ¨ç”»ä»¥æ›´åŠ ç¬¦åˆ Activity çš„å®žé™…å¤–è§‚ å¦‚æžœæœªè®¾ç½®è¯¥å±žæ€§ï¼Œåˆ™ Activity ç»§æ‰¿é€šè¿‡ &lt; application &gt; å…ƒç´ çš„ theme å±žæ€§ä¸ºåº”ç”¨æ•´ä½“è®¾ç½®çš„ä¸»é¢˜ã€‚ å¦‚æžœè¯¥å±žæ€§ä¹Ÿæœªè®¾ç½®ï¼Œåˆ™ä½¿ç”¨é»˜è®¤ç³»ç»Ÿä¸»é¢˜ ä¸‰åä¸€ã€android:uiOptionsé’ˆå¯¹ Activity UI çš„é™„åŠ é€‰é¡¹ï¼Œè¯¥å±žæ€§æ˜¯åœ¨ API çº§åˆ« 14 æ·»åŠ çš„ï¼Œå¿…é¡»æ˜¯ä¸‹åˆ—å€¼ä¹‹ä¸€ å±žæ€§å€¼ è¯´æ˜Ž none æ— é™„åŠ  UI é€‰é¡¹ã€‚è¿™æ˜¯é»˜è®¤å€¼ splitActionBarWhenNarrow å½“æ°´å¹³ç©ºé—´å—é™æ—¶ï¼ˆä¾‹å¦‚åœ¨æ‰‹æŒè®¾å¤‡ä¸Šçš„çºµå‘æ¨¡å¼ä¸‹æ—¶ï¼‰åœ¨å±å¹•åº•éƒ¨æ·»åŠ ä¸€ä¸ªæ ä»¥æ˜¾ç¤ºåº”ç”¨æ ï¼ˆä¹Ÿç§°ä¸ºæ“ä½œæ ï¼‰ä¸­çš„æ“ä½œé¡¹ï¼‰ã€‚ åº”ç”¨æ ä¸æ˜¯ä»¥å°‘é‡æ“ä½œé¡¹å½¢å¼å‡ºçŽ°åœ¨å±å¹•é¡¶éƒ¨çš„åº”ç”¨æ ä¸­ï¼Œè€Œæ˜¯åˆ†æˆäº†é¡¶éƒ¨å¯¼èˆªåŒºå’Œåº•éƒ¨æ“ä½œé¡¹æ ã€‚ è¿™å¯ä»¥ç¡®ä¿æ“ä½œé¡¹ä»¥åŠé¡¶éƒ¨çš„å¯¼èˆªå’Œæ ‡é¢˜å…ƒç´ éƒ½èƒ½èŽ·å¾—åˆç†çš„ç©ºé—´ã€‚ èœå•é¡¹ä¸ä¼šæ‹†åˆ†åˆ°ä¸¤ä¸ªæ ä¸­ï¼Œå®ƒä»¬å§‹ç»ˆä¸€èµ·å‡ºçŽ° ä¸‰åäºŒã€android:windowSoftInputModeActivity çš„ä¸»çª—å£ä¸ŽåŒ…å«å±å¹•è½¯é”®ç›˜çš„çª—å£çš„äº¤äº’æ–¹å¼ã€‚ è¯¥å±žæ€§æ˜¯åœ¨ API çº§åˆ« 3 å¼•å…¥çš„è¯¥å±žæ€§çš„è®¾ç½®å½±å“ä¸¤ä¸ªæ–¹é¢ï¼š å½“ Activity æˆä¸ºç”¨æˆ·æ³¨æ„çš„ç„¦ç‚¹æ—¶è½¯é”®ç›˜çš„çŠ¶æ€ â€” éšè—è¿˜æ˜¯å¯è§ã€‚ å¯¹ Activity ä¸»çª—å£æ‰€åšçš„è°ƒæ•´ â€” æ˜¯å¦å°†å…¶å°ºå¯¸è°ƒå°ä»¥ä¸ºè½¯é”®ç›˜è…¾å‡ºç©ºé—´ï¼Œæˆ–è€…å½“çª—å£éƒ¨åˆ†è¢«è½¯é”®ç›˜é®æŒ¡æ—¶æ˜¯å¦å¹³ç§»å…¶å†…å®¹ä»¥ä½¿å½“å‰ç„¦ç‚¹å¯è§ è¯¥è®¾ç½®å¿…é¡»æ˜¯ä¸‹è¡¨æ‰€åˆ—çš„å€¼ä¹‹ä¸€ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªâ€œstateâ€¦â€å€¼åŠ ä¸Šä¸€ä¸ªâ€œadjustâ€¦â€å€¼çš„ç»„åˆã€‚ åœ¨ä»»ä¸€ç»„ä¸­è®¾ç½®å¤šä¸ªå€¼ï¼ˆä¾‹å¦‚ï¼Œå¤šä¸ªâ€œstateâ€¦â€å€¼ï¼‰éƒ½ä¼šäº§ç”Ÿæœªå®šä¹‰ç»“æžœã€‚å„å€¼ä¹‹é—´ä½¿ç”¨åž‚ç›´æ¡â€œ | â€åˆ†éš” 1&lt;activity android:windowSoftInputMode="stateVisible|adjustResize" . . . &gt; å±žæ€§å€¼ è¯´æ˜Ž stateUnspecified ä¸æŒ‡å®šè½¯é”®ç›˜çš„çŠ¶æ€ï¼ˆéšè—è¿˜æ˜¯å¯è§ï¼‰ã€‚ å°†ç”±ç³»ç»Ÿé€‰æ‹©åˆé€‚çš„çŠ¶æ€ï¼Œæˆ–ä¾èµ–ä¸»é¢˜ä¸­çš„è®¾ç½®ã€‚è¿™æ˜¯å¯¹è½¯é”®ç›˜è¡Œä¸ºçš„é»˜è®¤è®¾ç½® stateUnchanged å½“ Activity è½¬è‡³å‰å°æ—¶ä¿ç•™è½¯é”®ç›˜æœ€åŽæ‰€å¤„çš„ä»»ä½•çŠ¶æ€ï¼Œæ— è®ºæ˜¯å¯è§è¿˜æ˜¯éšè— stateHidden å½“ç”¨æˆ·é€‰æ‹© Activity æ—¶ â€” ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç”¨æˆ·ç¡®å®žæ˜¯å‘å‰å¯¼èˆªåˆ° Activityï¼Œè€Œä¸æ˜¯å› ç¦»å¼€å¦ä¸€ Activity è€Œè¿”å›žæ—¶ â€” éšè—è½¯é”®ç›˜ stateAlwaysHidden å½“ Activity çš„ä¸»çª—å£æœ‰è¾“å…¥ç„¦ç‚¹æ—¶å§‹ç»ˆéšè—è½¯é”®ç›˜ stateVisible åœ¨æ­£å¸¸çš„é€‚å®œæƒ…å†µä¸‹ï¼ˆå½“ç”¨æˆ·å‘å‰å¯¼èˆªåˆ° Activity çš„ä¸»çª—å£æ—¶ï¼‰æ˜¾ç¤ºè½¯é”®ç›˜ stateAlwaysVisible å½“ç”¨æˆ·é€‰æ‹© Activity æ—¶ â€” ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç”¨æˆ·ç¡®å®žæ˜¯å‘å‰å¯¼èˆªåˆ° Activityï¼Œè€Œä¸æ˜¯å› ç¦»å¼€å¦ä¸€ Activity è€Œè¿”å›žæ—¶ â€” æ˜¾ç¤ºè½¯é”®ç›˜ adjustUnspecified ä¸æŒ‡å®š Activity çš„ä¸»çª—å£æ˜¯å¦è°ƒæ•´å°ºå¯¸ä»¥ä¸ºè½¯é”®ç›˜è…¾å‡ºç©ºé—´ï¼Œæˆ–è€…çª—å£å†…å®¹æ˜¯å¦è¿›è¡Œå¹³ç§»ä»¥åœ¨å±å¹•ä¸Šæ˜¾éœ²å½“å‰ç„¦ç‚¹ã€‚ ç³»ç»Ÿä¼šæ ¹æ®çª—å£çš„å†…å®¹æ˜¯å¦å­˜åœ¨ä»»ä½•å¯æ»šåŠ¨å…¶å†…å®¹çš„å¸ƒå±€è§†å›¾æ¥è‡ªåŠ¨é€‰æ‹©å…¶ä¸­ä¸€ç§æ¨¡å¼ã€‚ å¦‚æžœå­˜åœ¨è¿™æ ·çš„è§†å›¾ï¼Œçª—å£å°†è¿›è¡Œå°ºå¯¸è°ƒæ•´ï¼Œå‰ææ˜¯å¯é€šè¿‡æ»šåŠ¨åœ¨è¾ƒå°åŒºåŸŸå†…çœ‹åˆ°çª—å£çš„æ‰€æœ‰å†…å®¹ã€‚è¿™æ˜¯å¯¹ä¸»çª—å£è¡Œä¸ºçš„é»˜è®¤è®¾ç½® adjustResize å§‹ç»ˆè°ƒæ•´ Activity ä¸»çª—å£çš„å°ºå¯¸æ¥ä¸ºå±å¹•ä¸Šçš„è½¯é”®ç›˜è…¾å‡ºç©ºé—´ adjustPan ä¸è°ƒæ•´ Activity ä¸»çª—å£çš„å°ºå¯¸æ¥ä¸ºè½¯é”®ç›˜è…¾å‡ºç©ºé—´ï¼Œ è€Œæ˜¯è‡ªåŠ¨å¹³ç§»çª—å£çš„å†…å®¹ï¼Œä½¿å½“å‰ç„¦ç‚¹æ°¸è¿œä¸è¢«é”®ç›˜é®ç›–ï¼Œè®©ç”¨æˆ·å§‹ç»ˆéƒ½èƒ½çœ‹åˆ°å…¶è¾“å…¥çš„å†…å®¹ã€‚ è¿™é€šå¸¸ä¸å¦‚å°ºå¯¸è°ƒæ­£å¯å–ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½éœ€è¦å…³é—­è½¯é”®ç›˜ä»¥åˆ°è¾¾è¢«é®ç›–çš„çª—å£éƒ¨åˆ†æˆ–ä¸Žè¿™äº›éƒ¨åˆ†è¿›è¡Œäº¤äº’]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽRecyclerViewçš„è§£æž]]></title>
    <url>%2Fposts%2Fe545b7b2.html</url>
    <content type="text"><![CDATA[å‰è¨€è™½ç„¶åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¤§ä¼™æˆ–å¤šæˆ–å°‘éƒ½ä¼šæŽ¥è§¦åˆ° RecyclerViewï¼Œä½†é€šå¸¸ï¼Œä¹Ÿå°±æ˜¯å†™å†™ adapterï¼Œç”¨ä¸ªç³»ç»Ÿæä¾›çš„ LayoutManagerï¼Œå†™å†™ç‚¹å‡»äº‹ä»¶ï¼Œå¤„ç†å¤„ç†å¤æ‚çš„ item å¸ƒå±€ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å…¶å®žå¹¶ä¸ä¼šåŽ»æŽ¥è§¦åˆ° RecyclerView çš„å¤§éƒ¨åˆ†å…¶ä»–åŠŸèƒ½ï¼Œæ¯”å¦‚è‡ªå®šä¹‰ LayoutManager ï¼Œè‡ªå®šä¹‰ Item åŠ¨ç”»ï¼Œè‡ªå®šä¹‰è¾¹ç•Œæ ·å¼ï¼Œè‡ªå®šä¹‰æ»‘åŠ¨æ•ˆæžœï¼Œè‡ªå®šä¹‰å›žæ”¶ç­–ç•¥ç­‰ç­‰ä¹‹ç±»çš„åŠŸèƒ½ã€‚ é‚£ä¹ˆï¼Œæœ¬ç¯‡å°±ä¸“é—¨æ¥è¯•ç”¨ä¸‹è¿™äº›åŠŸèƒ½ï¼ŒåŠ›æ±‚å°† RecyclerView æ”¯æŒçš„æ‰€æœ‰åŠŸèƒ½éƒ½è¯•ä¸€éï¼Œåªæœ‰æ¸…æ¥šäº†è¿™ä¸ªæŽ§ä»¶éƒ½æ”¯æŒå“ªäº›åŠŸèƒ½æ•ˆæžœï¼Œé‚£ä¹ˆåˆ†æžèµ·å®ƒçš„æž¶æž„ã€åŽŸç†æ‰ä¼šæœ‰ä¸€ä¸ªæ¯”è¾ƒæ¸…æ™°çš„è„‰ç»œã€‚ ç›®å½•ç”±äºŽæœ¬ç¯‡ç¯‡å¹…ç‰¹é•¿ï¼Œç‰¹æ„åšäº†ä¸ªç›®å½•ï¼Œè®©å¤§ä¼™å¯¹æœ¬ç¯‡å†…å®¹å…ˆæœ‰ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚ å¦å¤–ï¼Œç”±äºŽæœ‰äº›å¹³å°å¯èƒ½ä¸æ”¯æŒ `` è§£æžï¼Œæ‰€ä»¥å»ºè®®å¤§ä¼™å¯å€ŸåŠ©æœ¬ç¯‡ç›®å½•ï¼Œæˆ–å¹³å°çš„ç›®å½•ç´¢å¼•è¿›è¡Œå¿«é€ŸæŸ¥é˜…ã€‚ 1.LayoutManager 1.1 LinearLayoutManager åŸºæœ¬æ•ˆæžœä»‹ç» findFirstCompletelyVisibleItemPosition() findFirstVisibleItemPosition() findLastCompletelyVisibleItemPosition() findLastVisibleItemPosition() setRecycleChildrenOnDetach() 1.2 GridLayoutManager åŸºæœ¬æ•ˆæžœä»‹ç» setSpanSizeLookUp() 1.3 StaggeredGridLayoutManager åŸºæœ¬æ•ˆæžœä»‹ç» setFullSpan() findXXX() ç³»åˆ—æ–¹æ³•ä»‹ç» 2.ViewHolder getAdapterPosition() getLayoutPosition() setIsRecyclable() 3.LayoutParams 4.Adapter åŸºæœ¬ç”¨æ³•ä»‹ç» onViewRecycled() onViewAttachedFromWindow() onViewDetachedFromWindow() onAttachedToRecyclerView() onDetachedFromRecyclerView() registerAdapterDataObserver() unregisterAdapterDataObserver() 5.RecyclerView addOnItemTouchListener() addOnScrollListener() setHasFixedSize() setLayoutFrozen() setPreserveFocusAfterLayout() findChildViewUnder() findContainingItemView() findContainingViewHolder() findViewHolderXXX() 6.Recycler setItemViewCacheSize() setViewCacheExtension() setRecycledViewPool() setRecyclerListener() 7.ItemAnimator SimpleItemAnimator DefaultItemAnimator 8.ItemDecoration DividerItemDecoration ItemTouchHelper FastScroller 9.OnFlingListener SnapHelper LinearSnapHelper PagerSnapHelper æ­£æ–‡é˜…è¯»é¡»çŸ¥ï¼š æœ¬ç¯‡åŠ›æ±‚åˆ—ä¸¾ RecyclerView æ‰€æœ‰åŠŸèƒ½çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œç”±äºŽç¯‡å¹…åŽŸå› ï¼Œå¹¶ä¸ä¼šå°†å®žçŽ°ä»£ç å…¨éƒ¨è´´å‡ºï¼Œåªè´´å‡ºå…³é”®éƒ¨åˆ†çš„ä»£ç ã€‚ æœ¬ç¯‡æ‰€ä½¿ç”¨çš„ RecyclerView çš„ç‰ˆæœ¬æ˜¯ 26.0.0ã€‚ ä¸‹åˆ—æ ‡é¢˜ä¸­ï¼Œä½†å‡¡æ˜¯æ–œä½“å­—ï¼Œè¡¨ç¤ºè¯¥çŸ¥è¯†ç‚¹ç›®å‰æš‚æ—¶æ²¡ç†æ¸…æ¥šï¼Œç•™å¾…åŽç»­ç»§ç»­è¡¥å……ã€‚ 1. LayoutManagerRecyclerView çš„ support åŒ…é‡Œé»˜è®¤æä¾›äº†ä¸‰ä¸ª LayoutManagerï¼Œåˆ†åˆ«æ˜¯ä¸‹åˆ—ä¸‰ä¸ªï¼Œå¯ç”¨äºŽå®žçŽ°å¤§éƒ¨åˆ†åœºæ™¯çš„å¸ƒå±€éœ€æ±‚ï¼šçº¿æ€§å¸ƒå±€ã€ç½‘æ ¼å¸ƒå±€ã€ç€‘å¸ƒæµå¸ƒå±€ç­‰ç­‰ã€‚ 1.1 LinearLayoutManagerçº¿æ€§å¸ƒå±€ï¼Œç”¨å®ƒå¯ä»¥æ¥å®žçŽ°æ¨ªç«–è‡ªç”±åˆ‡æ¢çš„çº¿æ€§å¸ƒå±€ï¼Œå…ˆæ¥çœ‹çœ‹å®ƒçš„æž„é€ å‡½æ•°ï¼š 1234567891011121314public class LinearLayoutManager extends RecyclerView.LayoutManager implements ItemTouchHelper.ViewDropHandler, RecyclerView.SmoothScroller.ScrollVectorProvider &#123; public LinearLayoutManager(Context context) &#123; this(context, VERTICAL, false); &#125; public LinearLayoutManager(Context context, int orientation, boolean reverseLayout) &#123; ... &#125; public LinearLayoutManager(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123; ... &#125;&#125; æ€»å…±ä¸‰ä¸ªï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹çœ‹å®ƒä»¬å„è‡ªçš„ä½¿ç”¨åœºæ™¯ï¼š ç¬¬ä¸€ä¸ªæž„é€ å‡½æ•° 123//ç”¨æ³•(åœ¨Activityé‡Œåˆå§‹åŒ–æŽ§ä»¶åŽ)ï¼šLinearLayoutManager layoutManager = new LinearLayoutManager(this);mRecyclerView.setLayoutManager(layoutManager); å¾ˆç®€å•ï¼Œè¿™ç§æ—¶å€™é»˜è®¤å°±æ˜¯ç«–ç›´æ–¹å‘çš„çº¿æ€§å¸ƒå±€ï¼Œæ•ˆæžœå›¾ï¼š åœ¨ Tv åº”ç”¨ä¸­ï¼Œè¿™ç§ç«–ç›´æ–¹å‘çš„ LinearLayoutManager ä½¿ç”¨åœºæ™¯å¤§å¤šéƒ½æ˜¯ç”¨äºŽæ˜¾ç¤ºèœå•é¡¹ï¼Œä½¿ç”¨é¢‘çŽ‡å¹¶ä¸æ˜¯ç‰¹åˆ«é«˜ï¼Œä½†åœ¨æ‰‹æœºåº”ç”¨ä¸­ï¼Œè¿™ç§çš„ä½¿ç”¨é¢‘çŽ‡ç®—æ˜¯ç‰¹åˆ«é«˜çš„äº†ï¼Œå‡ ä¹Žæ¯ä¸ª app éƒ½ä¼šæœ‰ç«–ç›´æ–¹å‘çš„æ»‘åŠ¨åˆ—è¡¨æŽ§ä»¶ã€‚ ç¬¬äºŒä¸ªæž„é€ å‡½æ•° 1234//ç”¨æ³•(åœ¨Activityé‡Œåˆå§‹åŒ–æŽ§ä»¶åŽ)ï¼š//ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ç”¨äºŽæŒ‡å®šæ–¹å‘æ˜¯ç«–ç›´è¿˜æ˜¯æ°´å¹³ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ç”¨äºŽæŒ‡å®šæ˜¯å¦ä»Žå³åˆ°å·¦å¸ƒå±€ï¼ŒåŸºæœ¬éƒ½æ˜¯falseï¼Œæˆ‘ä»¬çš„ä¹ æƒ¯éƒ½æ˜¯å·¦åˆ°å³çš„æŽ’åˆ—æ–¹å¼LinearLayoutManager layoutManager = new LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, false);mRecyclerView.setLayoutManager(layoutManager); ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ç”¨äºŽæŒ‡å®šæ–¹å‘æ˜¯ç«–ç›´è¿˜æ˜¯æ°´å¹³ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ç”¨äºŽæŒ‡å®šæ˜¯å¦ä»Žå³åˆ°å·¦å¸ƒå±€ï¼ŒåŸºæœ¬éƒ½æ˜¯falseï¼Œæˆ‘ä»¬çš„ä¹ æƒ¯éƒ½æ˜¯å·¦åˆ°å³çš„æŽ’åˆ—æ–¹å¼ï¼Œæ¥çœ‹çœ‹æ•ˆæžœï¼š åœ¨ Tv åº”ç”¨ä¸­ï¼Œè¿™ç§å¸ƒå±€å°±æ¯”è¾ƒå¸¸è§äº†ï¼Œå¸¸è§çš„è¿˜æœ‰ç½‘æ ¼å¸ƒå±€ï¼Œå¤šè¡Œå¸ƒå±€ç­‰ç­‰ï¼›è€Œåœ¨æ‰‹æœºåº”ç”¨ä¸­ï¼Œæ°´å¹³æ»‘åŠ¨çš„åˆ—è¡¨æŽ§ä»¶ä¹Ÿè¿˜æ˜¯æœ‰ï¼Œä½†ä¼šæ¯”ç«–ç›´çš„å°‘è§ä¸€äº›ã€‚ ç¬¬ä¸‰ä¸ªæž„é€ å‡½æ•° 12345678//xmlæ–‡ä»¶ï¼š&lt;android.support.v7.widget.RecyclerView android:id="@+id/recycler_main" android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="horizontal" app:layoutManager="LinearLayoutManager" /&gt; è¿™ç§æ–¹å¼åŸºæœ¬æ²¡è§è¿‡å§ï¼Œæˆ‘ä¹Ÿæ˜¯çœ‹äº† LinearLayoutManager æºç çš„æž„é€ å‡½æ•°ï¼Œæ‰å‘çŽ°ï¼ŒåŽŸæ¥è¿˜æœ‰è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ç›´æŽ¥åœ¨ xml å¸ƒå±€æ–‡ä»¶ä¸­æŒ‡å®š RecyclerView çš„ LayoutManagerï¼Œè¿™æ—¶å€™ï¼Œandroid:orientation å°±æ˜¯ç”¨æ¥æŒ‡å®š LinearLayoutManager çš„å¸ƒå±€æ–¹å‘äº†ã€‚ é‚£ä¹ˆä½¿ç”¨è¿™ç§ xml æ–¹å¼æ—¶ï¼Œè¿˜æœ‰å“ªäº›å±žæ€§å¯ä»¥é…ç½®å‘¢ï¼Ÿç›´æŽ¥åŽ»çœ‹å¯¹åº”çš„ LayoutManager çš„æºç å°±æ¸…æ¥šäº†ï¼Œæ¯”å¦‚ï¼š 123456789101112131415161718192021//LinearLayoutManager.java/** * Constructor used when layout manager is set in XML by RecyclerView attribute * "layoutManager". Defaults to vertical orientation. * * @attr ref android.support.v7.recyclerview.R.styleable#RecyclerView_android_orientation * @attr ref android.support.v7.recyclerview.R.styleable#RecyclerView_reverseLayout * @attr ref android.support.v7.recyclerview.R.styleable#RecyclerView_stackFromEnd *///ä¸Šé¢æ˜¯æºç çš„æ³¨é‡Šï¼Œå½“åœ¨ xml ä¸­é€šè¿‡ app:layoutManager="LinearLayoutManager" ä¹‹åŽï¼Œé‚£ä¹ˆæ­¤æ—¶å°±è¿˜å¯ä»¥å†ä½¿ç”¨ä¸‰ä¸ªå±žæ€§æ¥é…ç½® LinearLayoutManager,å¦‚ä¸‹ï¼š//android:orientation="horizontal"//app:reverseLayout="false"//app:stackFromEnd="false"public LinearLayoutManager(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123; Properties properties = getProperties(context, attrs, defStyleAttr, defStyleRes); setOrientation(properties.orientation); setReverseLayout(properties.reverseLayout); setStackFromEnd(properties.stackFromEnd); setAutoMeasureEnabled(true);&#125; å¦å¤–ä¸¤ä¸ª LayoutManager åŒç†ã€‚ ä»¥ä¸Šï¼Œä»…ä»…å°±æ˜¯ LinearLayoutManager æ”¯æŒçš„å¸ƒå±€æ ·å¼ï¼Œæˆ‘ä»¬åªéœ€è¦è®¾ç½®å¸ƒå±€æ–¹å‘åŽï¼Œå…¶ä»–éƒ½ä¸ç”¨ç®¡äº†ã€‚é‚£ä¹ˆï¼ŒLinearLayoutManager æ˜¯å¦è¿˜æœ‰æä¾›å…¶ä»–ä¸€äº›å¯é€‰åŠŸèƒ½æ¥è®©æˆ‘ä»¬ä½¿ç”¨å‘¢ï¼ŸæŽ¥ä¸‹åŽ»å°±ä¸€èµ·å†çœ‹çœ‹ï¼š setOrientation() ç”¨äºŽè®¾ç½®å¸ƒå±€æ–¹å‘ï¼Œå¦‚æžœä¸é€šè¿‡æž„é€ å‡½æ•°æ¥æŒ‡å®šï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¯¥æ–¹æ³•æŒ‡å®šï¼Œå°±ä¸¤ä¸ªå€¼ï¼šLinearLayoutManager.HORIZONTALLinearLayoutManager.VERTICAL findFirstCompletelyVisibleItemPosition() findFirstVisibleItemPosition() findLastCompletelyVisibleItemPosition() findLastVisibleItemPosition() ä¸Šè¿°å››ä¸ªæ–¹æ³•ä½œç”¨ä»Žæ–¹æ³•å‘½åå°±å¯ä»¥å¾ˆç›´è§‚çš„ç†è§£äº†ï¼Œä½†æœ‰äº›ç»†èŠ‚éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š ä¸¤ä¸ªæŸ¥æ‰¾å…¨éƒ¨å¯è§çš„ item æ–¹æ³•å¹¶ä¸æ˜¯æˆ‘ä»¬æ­£å¸¸æ„ä¹‰ä¸Šçš„å…¨éƒ¨å¯è§ï¼Œè€Œæ˜¯æŒ‡åœ¨å¸ƒå±€æ–¹å‘ä¸Šæ˜¯å¦å·²å…¨éƒ¨å¯è§ã€‚è¯´å¾—ç™½ç‚¹ï¼Œå¦‚æžœæ˜¯ HORIZONTAL æ°´å¹³æ ·å¼ï¼Œå¦‚ä¸Šå›¾ï¼Œé‚£ä¹ˆå®ƒåªä¼šåŽ»è®¡ç®—å·¦å³æ–¹å‘ä¸Šæ˜¯å¦å…¨éƒ¨å¯è§æ¥åˆ¤å®šï¼Œæ¯”å¦‚æˆ‘ä»¬ç‰¹æ„åœ¨ä»£ç ä¸­é€šè¿‡ layout_marginTop=â€-100dpâ€ æ¥å°†æŽ§ä»¶ç§»å‡ºå±å¹•ä¸€éƒ¨åˆ†ï¼Œå¦‚ä¸‹ï¼š æ­¤æ—¶ï¼ŒæŒ‰ç…§æˆ‘ä»¬æ­£å¸¸æ„ä¹‰ä¸Šæ¥ç†è§£æ˜¯æ²¡æœ‰ä¸€ä¸ª item å¤„äºŽå…¨éƒ¨å¯è§çš„ï¼Œå› ä¸ºæ¯ä¸ª item çš„ä¸ŠåŠéƒ¨åˆ†éƒ½è¢«ç§»å‡ºå±å¹•äº†ã€‚ä½†æ˜¯è°ƒç”¨é‚£ä¸¤ä¸ªæŸ¥æ‰¾å…¨éƒ¨å¯è§çš„ item æ–¹æ³•ï¼Œä»ç„¶ä¼šè¿”å›ž 0 å’Œ 4ï¼Œå› ä¸ºå®ƒåªåŽ»åˆ¤æ–­æ°´å¹³æ–¹å‘æ˜¯å¦å…¨éƒ¨å¯è§ã€‚ findFirst å°±æ˜¯åˆ¤æ–­å·¦è¾¹ç¬¬ä¸€ä¸ª item çš„å·¦è¾¹ç•Œæ˜¯å¦å¯è§ï¼ŒfindLast å°±æ˜¯åˆ¤æ–­å³è¾¹æœ€åŽä¸€ä¸ª item çš„å³è¾¹ç•Œæ˜¯å¦å¯è§ã€‚å¦‚æžœå¸ƒå±€æ–¹å‘æ˜¯ç«–ç›´çš„ï¼Œé‚£ä¹ˆåŒæ ·çš„é“ç†ã€‚è¿™ç‚¹ç»†èŠ‚éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚ è¿˜æœ‰å¦å¤–ä¸¤ä¸ªæŸ¥æ‰¾ç¬¬ä¸€ä¸ªæˆ–æœ€åŽä¸€ä¸ªå¯è§çš„ item æ–¹æ³•ä¹Ÿæœ‰ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æžœè¿™ä¸ª item æ˜¯æœ‰è®¾ç½®äº† ItemDecorationï¼Œé‚£ä¹ˆå¦‚æžœ ItemDecoration è¿™éƒ¨åˆ†åŒºåŸŸæ˜¯å¯è§çš„ï¼Œä¹Ÿä¼šåˆ¤å®šè¯¥ item æ˜¯å¯è§çš„ã€‚ setRecycleChildrenOnDetach() 12345678910111213141516/** * Set whether LayoutManager will recycle its children when it is detached from * RecyclerView. * &lt;p&gt; * If you are using a &#123;@link RecyclerView.RecycledViewPool&#125;, it might be a good idea to set * this flag to &lt;code&gt;true&lt;/code&gt; so that views will be available to other RecyclerViews * immediately. * &lt;p&gt; * Note that, setting this flag will result in a performance drop if RecyclerView * is restored. * * @param recycleChildrenOnDetach Whether children should be recycled in detach or not. */public void setRecycleChildrenOnDetach(boolean recycleChildrenOnDetach) &#123; mRecycleChildrenOnDetach = recycleChildrenOnDetach;&#125; å…ˆæ¥çœ‹çœ‹æºç æ³¨é‡Šï¼Œæ³¨é‡Šé‡Œè¯´äº†ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥è®¾ç½®ï¼Œå½“å®ƒï¼ˆLinearLayoutManagerï¼‰ä»Ž RecyclerView ä¸Šé¢ detached æ—¶æ˜¯å¦è¦å›žæ”¶æ‰€æœ‰çš„ itemã€‚è€Œä¸”ï¼Œå®ƒè¿˜å»ºè®®æˆ‘ä»¬ï¼Œå¦‚æžœæˆ‘ä»¬é¡¹ç›®é‡Œæœ‰å¤ç”¨ RecyclerViewPool çš„è¯ï¼Œé‚£ä¹ˆå¼€å¯è¿™ä¸ªåŠŸèƒ½ä¼šæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¾…åŠ©ï¼Œå®ƒå¯ä»¥å°†è¿™äº› item å›žæ”¶èµ·æ¥ç»™å…¶ä»– RecyclerView ç”¨ã€‚æœ€åŽï¼Œè¿˜æŒ‡æ˜Žäº†ä¸€ç‚¹ï¼Œå¼€å¯è¿™ä¸ªåŠŸèƒ½çš„è¯ï¼Œå½“ RecyclerView æ¢å¤æ—¶ï¼Œä¹Ÿå°±æ˜¯ä»Ž detached åˆå˜å›ž attachedï¼Œé‚£ä¹ˆä¼šæ¶ˆè€—ä¸€å®šçš„æ€§èƒ½æ¥ç»˜åˆ¶ã€‚ æœ‰ä¸¤ç§åœºæ™¯ä¼šå¯¼è‡´ LinearLayoutManager ä»Ž RecyclerView ä¸Šè¢« detachedï¼Œä¸€ç§æ˜¯ï¼šsetLayoutManager()ï¼Œè€Œå¦å¤–ä¸€ç§æ˜¯ï¼šRecyclerView ä»Žè§†å›¾æ ‘ä¸Šè¢« remove æŽ‰ã€‚ ä½†ç»è¿‡æµ‹è¯•ï¼ˆä½ ä¹Ÿå¯ä»¥åŽ»çœ‹æºç ï¼‰ï¼ŒsetLayoutManager() æ—¶ï¼Œå¦‚æžœä¹‹å‰æœ‰è®¾ç½®è¿‡ LayoutMangerï¼Œé‚£ä¹ˆå†…éƒ¨ä¼šè‡ªåŠ¨å…ˆåŽ»å°†ä¹‹å‰ LayoutManager çš„æ‰€æœ‰ item å›žæ”¶ï¼Œç„¶åŽå†ç»™æ–°çš„ LayoutManager å¤ç”¨ã€‚æ­¤æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢è¯´äº†æœ‰ä¸¤ç§åœºæ™¯ä¼šè§¦å‘åˆ°è¯¥æ–¹æ³•å¼€å¯çš„å›žæ”¶å·¥ä½œï¼Œä½†å®žé™…ä¸Šï¼Œç¬¬ä¸€ç§åœºæ™¯å†…éƒ¨é»˜è®¤çš„å·¥ä½œä¸­å°±åŒ…å«äº†å›žæ”¶å·¥ä½œï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰é€šè¿‡è¿™ä¸ªæ–¹æ³•æ¥å¼€å¯å¹¶æ²¡æœ‰ä»»ä½•å½±å“ã€‚åªæœ‰ç¬¬äºŒç§åœºæ™¯ä¸‹ï¼Œè¦ä¸è¦åŽ»å¤„ç†å›žæ”¶å·¥ä½œæ‰æ˜¯ç”±è¯¥æ–¹æ³•æ¥æŽ§åˆ¶ã€‚ æ‰€ä»¥æˆ‘æ€€ç–‘æ˜¯ä¸æ˜¯ Google å·¥ç¨‹å¸ˆå¤ªæ‡’äº†ï¼Œæ²¡æœ‰åŒæ­¥æ›´æ–°è¿™ä¸ªæ–¹æ³•çš„æ³¨é‡Šã€‚æ³¨é‡Šçš„ç¬¬ä¸€å¥ when åŽé¢åº”è¯¥æ”¹æˆï¼š 1Set whether LayoutManager will recycle its children when RecyclerView is detached from Window. æˆ‘è§‰å¾—è¿™æ ·æ‰æ¯”è¾ƒåˆç†ä¸€ç‚¹ï¼Œä½†çº¯å±žä¸ªäººè§‚ç‚¹å“ˆï¼Œä¹Ÿè®¸æ˜¯æˆ‘æŸä¸ªåœ°æ–¹ç†è§£é”™äº†ã€‚ é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å¼€å¯çš„å›žæ”¶å·¥ä½œåˆ°åº•æœ‰ä»€ä¹ˆä½¿ç”¨åœºæ™¯å‘¢ï¼Ÿ è¿™ç±»åœºæ™¯è¿˜æ˜¯æœ‰çš„ï¼Œæˆ‘ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚å½“å‰é¡µé¢æ˜¯é€šè¿‡ ViewPager + Fragment æ¥å®žçŽ°çš„ï¼Œæ¯ä¸ª Fragment é‡Œåˆæœ‰ RecyclerView æŽ§ä»¶ï¼Œé‚£ä¹ˆå¦‚æžœå½“é¡µé¢å¸ƒå±€ä¿¡æ¯éœ€è¦æ›´æ–°æ—¶ï¼Œæœ‰æ—¶å€™æ˜¯ç›´æŽ¥æš´åŠ›çš„é€šè¿‡ ViewPager çš„ setAdapter() æ¥åˆ·æ–°ï¼Œé‚£ä¹ˆæ­¤æ—¶ï¼Œæ—§çš„ fragment å…¶å®žå°±å…¨è¢«ç§»é™¤æŽ‰äº†ï¼Œç„¶åŽ new äº†æ–°çš„ fragment ç»˜åˆ¶æ–°çš„å¸ƒå±€ä¿¡æ¯ã€‚ è¿™æ ·ï¼Œæ–°çš„ fragment é‡Œæ–°çš„ RecyclerView çš„ item å°±åˆéœ€è¦å…¨éƒ¨é‡æ–°åˆ›å»ºäº†ï¼Œå¦‚æžœç”¨è¿™ä¸ªæ–¹æ³•å¼€å¯äº†å›žæ”¶å·¥ä½œï¼Œé‚£ä¹ˆå½“æ—§çš„ fragment è¢«ç§»é™¤æ—¶ä¼šè§¦å‘åˆ° RecyclerView çš„ detachedFromWindow çš„å›žè°ƒï¼Œé‚£ä¹ˆæ­¤æ—¶è¿™ä¸ªå›žæ”¶å·¥ä½œå°±ä¼šåŽ»å°† item å›žæ”¶åˆ° RecyclerViewPool ä¸­ï¼Œå¦‚æžœæ–°çš„ fragment é‡Œçš„ RecyclerView å¤ç”¨äº†è¿™ä¸ª RecyclerViewPoolï¼Œå°±å¯ä»¥çœæŽ‰é‡æ–°åˆ›å»º item çš„æ¶ˆè€—ï¼Œè¾¾åˆ°ç›´æŽ¥å¤ç”¨ item çš„æ•ˆæžœã€‚ å°ç»“ä¸€ä¸‹ï¼Œå…¶å®žä¹Ÿå°±æ˜¯ RecyclerView æœ‰æ›´æ¢æ–°çš„å®žä¾‹å¯¹è±¡æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å¼€å¯çš„å›žæ”¶å·¥ä½œæ˜¯æœ‰ä¸€å®šçš„å¥½å¤„çš„ã€‚ä½†å¦‚æžœåŒä¸€ä¸ª RecyclerView å®žä¾‹å¯¹è±¡å­˜åœ¨ä»Ž attached åˆ° detached åˆåˆ° attached çš„åœºæ™¯ï¼Œé»˜è®¤æ²¡æœ‰å¼€å¯å›žæ”¶å·¥ä½œæ—¶ï¼Œç”±äºŽ item ä¸€ç›´éƒ½é™„ç€åœ¨ RecyclerView ä¸Šï¼Œæ‰€ä»¥å½“é‡æ–° attached æ—¶å°±å¯ä»¥ç›´æŽ¥æ˜¾ç¤ºå‡ºæ¥äº†ã€‚ä½†å¦‚æžœç”¨è¯¥æ–¹æ³•å¼€å¯äº†å›žæ”¶å·¥ä½œï¼Œç­‰äºŽæ˜¯è¦é‡æ–°åœ¨ onBind ä¸€æ¬¡äº†ï¼Œè¿™ç‚¹ä¹Ÿæ˜¯åœ¨æ³¨é‡Šä¸­æœ‰æåˆ°çš„ã€‚ æ‰€ä»¥ï¼Œè¿™æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œæœ‰å¥½æœ‰åï¼Œæœ‰ç¬¦åˆçš„åœºæ™¯ä¸‹å†åŽ»å¼€å¯ä½¿ç”¨å§ã€‚ RecyclerView å†…åµŒ RecyclerView å¦å¤–ï¼ŒLayoutManager é‡Œè¿˜æœ‰è®¸å¤š public çš„æŽ¥å£ï¼Œè¿™äº›æ–¹æ³•æ¶‰åŠçš„æ–¹é¢æ˜¯ RecyclerView å†…åµŒ RecyclerView çš„åœºæ™¯ï¼Œæ¯”å¦‚ï¼šcollectInitialPrefetchPositions()setInitialPrefetchItemCount()ç­‰ç­‰ï¼Œä½†ç›®å‰è¿˜æ²¡æžæ‡‚è¿™äº›ç›¸å…³æ–¹æ³•çš„ç”¨æ³•åŠæ•ˆæžœï¼Œç­‰å¾…åŽç»­è¡¥å……ã€‚ 1.2 GridLayoutManagerç½‘æ ¼æ ·å¼çš„å¸ƒå±€ç®¡ç†å™¨ï¼ŒåŒæ ·ï¼Œå…ˆæ¥çœ‹çœ‹å®ƒçš„æž„é€ å‡½æ•°ï¼š 123456789101112131415161718//æ³¨æ„çœ‹ï¼ŒGridLayoutManager æ˜¯ç»§æ‰¿çš„ LinearLayoutManger çš„public class GridLayoutManager extends LinearLayoutManager &#123; public GridLayoutManager(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123; super(context, attrs, defStyleAttr, defStyleRes); ... &#125; public GridLayoutManager(Context context, int spanCount) &#123; super(context); setSpanCount(spanCount); &#125; public GridLayoutManager(Context context, int spanCount, int orientation, boolean reverseLayout) &#123; super(context, orientation, reverseLayout); setSpanCount(spanCount); &#125; &#125; GridLayoutManager ç»§æ‰¿è‡ª LinearLayoutManagerï¼Œ å¹¶åœ¨å®ƒçš„ç»§æ‰¿ä¸Šè¡¥å……äº† spanCount çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯è¯´ LinearLayoutManager æ˜¯åªæ”¯æŒçº¿æ€§å¸ƒå±€ï¼Œè¦ä¹ˆä¸€è¡Œï¼Œè¦ä¹ˆä¸€åˆ—ã€‚è€Œ GridLayoutManager è¡¥å……äº† spanCount æ¦‚å¿µåŽï¼Œæ”¯æŒå¤šè¡Œæˆ–è€…å¤šåˆ—ï¼Œè¿™å°±æ˜¯ç½‘æ ¼å¸ƒå±€äº†ã€‚ ä½¿ç”¨æ–¹é¢è·Ÿ LinearLayoutManager åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯åœ¨æž„é€ å‡½æ•°å†…éœ€è¦å¤šä¼ ä¸€ä¸ª spanCount å‚æ•°ï¼Œæ¥æŒ‡å®šå¤šå°‘è¡Œæˆ–å¤šå°‘åˆ—ï¼Œæ¥çœ‹çœ‹æ•ˆæžœå›¾ï¼š 2 è¡Œ 12GridLayoutManager gridLayoutManager = new GridLayoutManager(this, 2, LinearLayoutManager.HORIZONTAL, false);mRecyclerView.setLayoutManager(gridLayoutManager); 4 åˆ— 12GridLayoutManager gridLayoutManager = new GridLayoutManager(this, 4);mRecyclerView.setLayoutManager(gridLayoutManager); è¿™ç§ç½‘æ ¼å¸ƒå±€ä¸ç®¡æ˜¯ Tv åº”ç”¨è¿˜æ˜¯æ‰‹æœºåº”ç”¨éƒ½æŒºå¸¸è§çš„ï¼ŒTv ä¸Šç»å¸¸éœ€è¦æœ‰å¤šè¡Œæˆ–å¤šåˆ—çš„å½¢å¼æ¥å±•ç¤ºå„ä¸ªå¡ä½ä¿¡æ¯ï¼Œè€Œæ‰‹æœºä¸Šä¸€äº›ç±»ä¼¼äºŽä¹å®«æ ¼ä¹‹ç±»çš„å¸ƒå±€ä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªå®žçŽ°ã€‚ ä½†æœ‰ä¸€äº›ç»†èŠ‚åŒæ ·éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š å¦‚æžœæŒ‡å®š HORIZONTAL æ ·å¼ï¼Œå³ä»¥å¤šè¡Œå½¢å¼è¿›è¡Œå¸ƒå±€ï¼Œé‚£ä¹ˆ item å¸ƒå±€çš„é¡ºåºåˆ™æ˜¯ä»¥ç«–ç›´æ–¹å‘æ¥è¿›è¡Œï¼Œå¦‚ä¸Šå›¾ä¸­æ ‡æ³¨çš„ item åºå·ï¼Œå¹¶ä¸”ï¼Œæ­¤æ—¶çš„ RecyclerView åªæ”¯æŒæ°´å¹³æ–¹å‘çš„æ»‘åŠ¨ï¼Œä¸æ”¯æŒç«–ç›´æ–¹å‘ã€‚å¦‚æžœæŒ‡å®š VERTICAL æ ·å¼ï¼Œåˆ™ç›¸åã€‚ å…¶å®žæƒ³æƒ³ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼ŒGridLayoutManager æ˜¯ç»§æ‰¿è‡ª LinearLayoutManagerï¼Œåªæ˜¯åœ¨å®ƒåŸºç¡€ä¸Šè¡¥å……äº† spanCount æ¦‚å¿µï¼Œæ»‘åŠ¨çš„å®žçŽ°è¿˜æ˜¯å»¶ç”¨ LinearLayoutManager çš„é€»è¾‘ï¼Œé‚£ä¹ˆå¦‚æžœæŒ‡å®šæ°´å¹³æ ·å¼ï¼Œè‡ªç„¶å°±åªæœ‰æ°´å¹³æ–¹å‘å¯æ»‘åŠ¨ã€‚ å½“è®¾ç½®æˆæ°´å¹³æ ·å¼ï¼Œæ°´å¹³æ–¹å‘å¯æ»‘åŠ¨çš„è¯ï¼Œé‚£ä¹ˆæ°´å¹³æ–¹å‘çš„é•¿åº¦è‡ªç„¶å°±æ˜¯å¯æ ¹æ® item æ•°é‡åŠ¨æ€å¢žåŠ çš„ï¼Œæ­¤æ—¶è‡ªç„¶è¦æŒ‰ç…§ç«–ç›´æ–¹å‘æ¥è¿›è¡Œ item å¸ƒå±€ï¼Œå¦åˆ™è¿˜ä»¥è¡Œä¸ºä¼˜å…ˆçš„è¯ï¼Œå“ªé‡ŒçŸ¥é“å°½å¤´æ˜¯å“ªé‡Œï¼Œä»€ä¹ˆæ—¶å€™è¯¥æ¢è¡Œå¸ƒå±€äº†ã€‚ è¿˜æœ‰ä¸€ç‚¹ç»†èŠ‚éœ€è¦æ³¨æ„ï¼Œå½“ä½¿ç”¨ GridLayoutManager æ—¶ï¼ŒRecyclerView çš„å®½é«˜åœ¨ match_parent å’Œ wrap_content ä¸¤ç§æƒ…å†µä¸‹çš„è¡¨çŽ°å®Œå…¨ä¸ä¸€æ ·ï¼Œå…·ä½“è¡¨çŽ°æ€Žæ ·ï¼Œæœ‰å…´è¶£çš„å¯ä»¥åŽ»è¯•ä¸€ä¸‹ï¼Œè¿™é‡Œå°±ç®€å•ä¸¾ä¸ªä¾‹å­ç»™å¤§ä¼™æœ‰ä¸ªç›´è§‚å°è±¡ï¼š 4 åˆ—ï¼ŒRecycerView å®½é«˜ä¸º wrap_content æ¨¡å¼ï¼Œitem è®¾ç½®å…·ä½“å®½é«˜æ•°å€¼ 4 åˆ—ï¼ŒRecyclerView å®½é«˜ä¸º match_parent æ¨¡å¼ï¼Œitem è®¾ç½®å…·ä½“å®½é«˜æ•°å€¼ ç®€å•ç‚¹è¯´ï¼Œå°±æ˜¯åœ¨ match_parent æ¨¡å¼ä¸‹ï¼Œå¦‚æžœæŒ‡å®šäº†æ°´å¹³æ ·å¼ï¼Œé‚£ä¹ˆåœ¨ç«–ç›´æ–¹å‘ä¸Šï¼ŒGridLayoutManager ä¼šä¿è¯è®©æ‰€æœ‰è¡Œéƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œå¦‚æžœ item æŒ‡å®šäº†å…·ä½“å®½é«˜ï¼Œå…¨éƒ¨æ˜¾ç¤ºå‡ºæ¥è¿˜ä¸è¶³ä»¥é“ºæ»¡ RecyclerViewï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨å°†å‰©ä½™ç©ºé—´å¹³å‡åˆ†é…åˆ°æ¯ä¸ª item ä¹‹é—´çš„é—´éš™ã€‚ å¦‚æžœ RecyclerView é«˜åº¦ä¸è¶³ä»¥è®©æ‰€æœ‰è¡Œéƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºçŽ° item é‡å çŽ°è±¡ã€‚è¿™å°±æ˜¯åœ¨ match_parent ä¸‹çš„è¡¨çŽ°ï¼Œè‡³äºŽ wrap_content åˆ™å®Œå…¨æ ¹æ® item è®¾å®šçš„å®½é«˜æ¥è€ƒè™‘äº†ï¼Œä¸ä¼šå†æœ‰è‡ªåŠ¨åˆ†é…å‰©ä½™ç©ºé—´æˆ–è€… Item é‡å ä¹‹ç±»çš„å·¥ä½œäº†ã€‚ æ‰€ä»¥ï¼Œä½¿ç”¨ GridLayoutManager æ—¶ï¼ŒRecyclerView çš„å®½é«˜æ¨¡å¼éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚ setSpanCount() é€šè¿‡æž„é€ å‡½æ•°æŒ‡å®šäº† spanCount åŽä¹Ÿè¿˜å¯ä»¥ç»§ç»­é€šè¿‡è¯¥æ–¹æ³•è¿›è¡Œä¿®æ”¹ LinearLayoutManager çš„æ–¹æ³• ç”±äºŽæ˜¯ç»§æ‰¿å…³ç³»ï¼Œæ‰€æœ‰ LinearLayoutManager ä¸­çš„å››ä¸ª findFirstCompletelyVisibleItemPosition() æ–¹æ³•ä¸€æ ·å¯ä»¥ä½¿ç”¨ï¼Œä½†åœ¨ LinearLayoutManager ä¸€èŠ‚ä¸­å¯¹è¿™å››ä¸ªæ–¹æ³•æ‰€è®²çš„æ³¨æ„äº‹é¡¹åœ¨è¿™é‡Œå°±æ›´åŠ æ˜Žæ˜¾äº†ï¼Œä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚ setSpanSizeLookup() é€šå¸¸æƒ…å†µä¸‹ï¼Œç½‘æ ¼å¸ƒå±€æ ·å¼ä¸‹ï¼Œæ¯ä¸ªå°æ ¼çš„å¤§å°åŸºæœ¬éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†å¦‚æžœæˆ‘ä»¬æƒ³å®žçŽ°å¦‚ä¸‹çš„æ•ˆæžœå‘¢ï¼š åŒºåˆ«äºŽå¸¸è§çš„ç½‘æ ¼å¸ƒå±€ï¼Œè¿™é‡Œæœ‰çš„å°æ ¼å°±å æ®äº†å¤šä¸ªç½‘æ ¼ï¼Œè¿™ç§æ•ˆæžœå°±å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•æ¥å®žçŽ°äº†ã€‚ ä¸Šè¿°å¸ƒå±€æ˜¯è®¾å®šäº† HORIZONTAL æ°´å¹³æ–¹å‘çš„ GridLayoutManagerï¼Œå¹¶ä¸”è®¾å®šä¸º 3 è¡Œï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ª item å æ®ä¸€ä¸ªå°æ ¼ï¼ŒæŒ‰ç…§ç«–ç›´æ–¹å‘ä¾æ¬¡å¸ƒå±€ã€‚ é€šè¿‡ setSpanSizeLookup() æ–¹æ³•å°±å¯ä»¥è‡ªå®šä¹‰ä¸ºæ¯ä¸ª item æŒ‡å®šå®ƒåœ¨ç«–ç›´æ–¹å‘è¦å æ®å¤šå°‘ä¸ªå°æ ¼ï¼Œæœ€å¤šä¸è¶…è¿‡è®¾å®šçš„è¡Œæ•°ï¼Œä¸Šè¿°ä¾‹å­ä¸­æ¯ä¸ª item æœ€å¤šå°±åªèƒ½å æ® 3 è¡Œçš„é«˜åº¦ã€‚å¦‚æžœåœ¨è¯¥åˆ—çš„å‰©ä½™ç©ºé—´ä¸è¶³ item è®¾å®šå æ®çš„è¡Œæ•°ï¼Œé‚£ä¹ˆä¼šå°†è¯¥åˆ—å‰©ä½™çš„ç©ºé—´ç©ºé—²å‡ºæ¥ï¼Œå°†è¯¥ item ç§»åˆ°ä¸‹åˆ—è¿›è¡Œå¸ƒå±€ã€‚ åŒæ ·çš„é“ç†ï¼Œå½“è®¾å®šä¸º VERTICAL ç«–ç›´æ–¹å‘çš„æ ·å¼æ—¶ï¼Œé‚£ä¹ˆå¯ä»¥è‡ªå®šä¹‰ä¸ºæ¯ä¸ª item è®¾å®šè¦å æ®çš„åˆ—æ•°ï¼Œæœ€å¤šä¸è¶…è¿‡æŒ‡å®šçš„åˆ—æ•°ã€‚ ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324GridLayoutManager gridLayoutManager = new GridLayoutManager(this, 3, LinearLayoutManager.HORIZONTAL, false);//è‡ªå®šä¹‰itemå æ®çš„å°æ ¼å¤§å°æ—¶éœ€è¦é‡å†™ getSpanSize()ï¼Œè¿”å›žå€¼å°±æ˜¯å æ®çš„å°æ ¼æ•°é‡gridLayoutManager.setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() &#123; @Override public int getSpanSize(int position) &#123; //ä»¥ä¸‹ä»£ç ä»…ä¸ºä¸Šå›¾ç¤ºä¾‹ä¸ºå†™ï¼Œå…·ä½“åœºæ™¯ä¸­åº”è¯¥æ ¹æ®éœ€æ±‚å…·ä½“ç¼–å†™ if (position == 3) &#123; return 2; &#125; if (position == 7) &#123; return 3; &#125; return 1; &#125; //è¿™ä¸ªæ–¹æ³•ä¹Ÿå¾ˆé‡è¦ï¼Œä½†æˆ‘è¿˜æ²¡æžæ¸…æ¥šå®ƒçš„å…·ä½“æ•ˆæžœï¼Œä»Žæ³¨é‡Šä¸Šæ¥çœ‹ï¼Œè¯¥æ–¹æ³•æ˜¯ç”¨äºŽæŒ‡å®š item åœ¨è¯¥è¡Œæˆ–è¯¥åˆ—ä¸Šå…·ä½“å“ªä¸ªä½ç½®ï¼Œæ¯”å¦‚å°†GridLayoutManagerè®¾ç½®ä¸º3è¡Œæ°´å¹³æ ·å¼ï¼Œé‚£ä¹ˆç¬¬1ä¸ªå¡ä½å°±æ˜¯åœ¨ç¬¬ä¸€åˆ—çš„ 0 ä½ç½®ï¼Œç¬¬2ä¸ªå¡ä½ 1ï¼Œä¸€æ¬¡ç±»æŽ¨ã€‚ä½†è¯¥æ–¹æ³•å…·ä½“è¢«è°ƒç”¨çš„åœºæ™¯è¿˜æ²¡ç†æ¸… @Override public int getSpanIndex(int position, int spanCount) &#123; return super.getSpanIndex(position, spanCount); &#125;&#125;);//å®˜æ–¹å»ºè®®è¯´ï¼Œå¦‚æžœå»¶ç”¨é»˜è®¤çš„ getSpanIndxe() çš„å®žçŽ°é€»è¾‘çš„è¯ï¼Œé‚£ä¹ˆå»ºè®®è°ƒç”¨ä¸‹è¿°æ–¹æ³•æ¥è¿›è¡Œä¼˜åŒ–ï¼Œå¦åˆ™æ¯æ¬¡å¸ƒå±€è®¡ç®—æ—¶ä¼šå¾ˆè€—æ€§èƒ½ã€‚ gridLayoutManager.getSpanSizeLookup().setSpanIndexCacheEnabled(true);mRecyclerView.setLayoutManager(gridLayoutManager); è™½ç„¶æä¾›äº†è¯¥æ–¹æ³•è®©ç½‘æ ¼å¸ƒå±€å¯ä»¥æ›´åŠ å¤šæ ·åŒ–å¸ƒå±€ï¼Œä½†ä»ç„¶æ— æ³•æ»¡è¶³ä¸€äº›åœºæ™¯ï¼Œæ¯”å¦‚å½“è®¾å®šä¸ºå¤šè¡Œçš„æ ·å¼æ—¶ï¼Œæ­¤æ—¶å°±åªæ”¯æŒè‡ªå®šä¹‰æ¯ä¸ª item å æ®çš„è¡Œæ•°ï¼Œåªæœ‰è¡Œæ•°ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰çš„å¡ä½é¡¶å¤šåªä¼šåœ¨é«˜åº¦æ–¹é¢ä¸ä¸€æ ·ï¼ŒåŒä¸€åˆ—çš„å¡ä½çš„å®½åº¦éƒ½æ˜¯ä¸€æ ·çš„ã€‚é‚£ä¹ˆï¼Œå¦‚æžœéœ€æ±‚æ˜¯äº”èŠ±å…«é—¨çš„ç½‘æ ¼å¸ƒå±€ï¼Œæ¯ä¸ªå¡ä½éƒ½æœ‰å¯èƒ½å æ®å¤šè¡Œçš„æƒ…å†µä¸‹åˆå æ®å¤šåˆ—ï¼Œç”¨è¿™ä¸ªå°±æ²¡æ³•å®žçŽ°äº†ã€‚ 1.3 StaggeredGridLayoutManagerè‹±æ–‡ç›´è¯‘è¿‡æ¥æ˜¯ï¼šäº¤é”™å¼çš„ç½‘æ ¼å¸ƒå±€ç®¡ç†è€…ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯å–œæ¬¢ç½‘ä¸Šå¤§ä¼™çš„è¯´æ³•ï¼šç€‘å¸ƒæµã€‚ é¦–å…ˆï¼Œä¹Ÿè¿˜æ˜¯æ¥çœ‹çœ‹å®ƒçš„æž„é€ æ–¹æ³•ï¼š 12345678910public class StaggeredGridLayoutManager extends RecyclerView.LayoutManager implements RecyclerView.SmoothScroller.ScrollVectorProvider &#123; public StaggeredGridLayoutManager(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123; ... &#125; public StaggeredGridLayoutManager(int spanCount, int orientation) &#123; ... &#125;&#125; åªæœ‰ä¸¤ä¸ªæž„é€ æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªè·Ÿ LinearLayoutManager ä¸€æ ·ï¼Œç”¨äºŽåœ¨ xml å¸ƒå±€æ–‡ä»¶ä¸­ç›´æŽ¥æŒ‡å®š LayoutManager æ—¶ç”¨çš„ã€‚ ç¬¬äºŒä¸ªæž„é€ æ–¹æ³•æ‰æ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨å®ƒçš„å…¥å£ï¼Œä¸¤ä¸ªå‚æ•°ï¼Œè¯´ç™½ç‚¹å°±æ˜¯ç”¨æ¥è®¾ç½®æˆå¤šè¡Œçš„ç€‘å¸ƒæµæˆ–è€…å¤šåˆ—çš„ç€‘å¸ƒæµæ ·å¼ã€‚ è¿™é‡Œé¡ºä¾¿æä¸€ç‚¹ä¸æ€Žä¹ˆé‡è¦çš„ï¼Œæ³¨æ„åˆ°æ²¡æœ‰ï¼Œè¿™é‡Œçš„æž„é€ æ–¹æ³•æ˜¯ä¸éœ€è¦ Contextï¼Œé‚£ä¹ˆä¸ºå•¥å¦å¤–ä¸¤ä¸ª LayoutManager å´éœ€è¦å‘¢ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒä¹ˆï¼Ÿ å“ˆå“ˆå“ˆï¼Œç­”æ¡ˆæ˜¯æ²¡å•¥ä¸åŒï¼ŒLinearLayoutManager å®žé™…ä¸Šä¹Ÿæ˜¯ä¸éœ€è¦ Context çš„ï¼Œçœ‹çœ‹å®ƒçš„æºç å°±ä¼šå‘çŽ°å®ƒæ ¹æœ¬æ²¡ä½¿ç”¨è¿™ä¸ªå‚æ•°ï¼Œå¯èƒ½æ˜¯æ—©æœŸç‰ˆæœ¬æœ‰éœ€è¦ç”¨åˆ°ï¼Œç„¶åŽæ–°ç‰ˆä¸éœ€è¦äº†ï¼Œä¸ºäº†è®©å¼€å‘è€…å…¼å®¹æ—§ä»£ç ï¼Œå°±ä¸€ç›´ç•™ç€çš„å§ã€‚ ç«–ç›´æ–¹å‘ç€‘å¸ƒæµ 12StaggeredGridLayoutManager staggeredGridLayoutManager = new StaggeredGridLayoutManager(3, StaggeredGridLayoutManager.VERTICAL);mRecyclerView.setLayoutManager(staggeredGridLayoutManager); ç€‘å¸ƒæµçš„æ ·å¼åœ¨æ‰‹æœºåº”ç”¨ä¸Šæ¯”è¾ƒå¸¸è§ï¼Œå°¤å…¶å›¾ç‰‡æŸ¥çœ‹ç›¸å…³çš„åº”ç”¨ï¼Œåœ¨ Tv åº”ç”¨ä¸Šè¿™ç§ç€‘å¸ƒæµå¸ƒå±€å°±æ¯”è¾ƒå°‘è§äº†ã€‚ ç€‘å¸ƒæµçš„æ–¹å‘å¯ä»¥é€‰æ‹©æ°´å¹³æˆ–è€…ç«–ç›´ï¼Œä¸¤è€…åªæ˜¯æ–¹å‘ä¸Šçš„åŒºåˆ«è€Œå·²ï¼Œæ°´å¹³æ–¹å‘çš„æ•ˆæžœå›¾å°±ä¸è´´äº†ã€‚ æœ‰ç‚¹ç»†èŠ‚éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œç€‘å¸ƒæµæ ·å¼åœ¨å¸ƒå±€ item æ—¶ï¼Œå¹¶ä¸æ˜¯è¯´ä¸€å®šæŒ‰ç…§æŸä¸ªæ–¹å‘æŸä¸ªé¡ºåºæ¥å¸ƒå±€ã€‚å½“è®¾å®šä¸ºç«–ç›´æ–¹å‘æ—¶ï¼Œä»¥æ°´å¹³æ–¹å‘ä¸ºé¡ºåºï¼Œå¯»æ‰¾æ°´å¹³æ–¹å‘ä¸Šæœ€é è¿‘é¡¶ç«¯çš„ä½ç½®æ¥å¸ƒå±€ itemï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯è¯´ä¸€å®šæŒ‰ç…§ç¬¬ 1 åˆ—ã€ç¬¬ 2 åˆ—ã€ç¬¬ 3 åˆ—è¿™ç§é¡ºåºæ¥å¸ƒå±€ã€‚ ç€‘å¸ƒæµæ ·å¼å’Œç½‘æ ¼æ ·å¼çš„åŒºåˆ« ä¹Ÿè®¸æœ‰äººä¼šç–‘æƒ‘ï¼Œç€‘å¸ƒæµå°±æ˜¯è®¾ç½®ä¸‹å‡ è¡Œæˆ–è€…å‡ åˆ—ï¼Œç„¶åŽè®¾å®šä¸‹æ–¹å‘è€Œå·²ã€‚ç½‘æ ¼æ ·å¼æ—¶ä¸ä¹Ÿä¸€æ ·æ˜¯è®¾ç½®ä¸‹å‡ è¡Œæˆ–å‡ åˆ—ï¼Œä¹Ÿä¸€æ ·æ˜¯è¦å†è®¾ç½®ä¸ªæ–¹å‘ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆç€‘å¸ƒæµä¸å¯ä»¥ç›´æŽ¥ç”¨ç½‘æ ¼æ ·å¼æ¥å®žçŽ°å‘¢ï¼Ÿå®ƒä»¬ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆï¼Ÿ æœ‰åŽ»å°è¯•è¿‡çš„å°±æ¸…æ¥šäº†ï¼Œè¿™æ˜¯ä¸¤ç§å®Œå…¨ä¸ä¸€æ ·çš„å¸ƒå±€æ ·å¼ã€‚ä¸‹é¢ä»¥ä¸¤è€…éƒ½è®¾ç½®ä¸ºç«–ç›´æ–¹å‘å¤šåˆ—çš„æ ·å¼æ¥åŒºåˆ†ï¼š ç½‘æ ¼æ ·å¼æ¯ä¸€è¡Œä¸­çš„æ‰€æœ‰ item é«˜åº¦æ˜¯ä¸€è‡´çš„ï¼Œä¸åŒè¡Œå¯ä»¥ä¸ä¸€æ ·ï¼Œä½†åŒè¡Œçš„éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤å®ƒå°±å®žçŽ°ä¸äº†ç€‘å¸ƒæµçš„æ ·å¼äº†ï¼›ç€‘å¸ƒæµæ‰€æœ‰çš„ item é«˜åº¦éƒ½å…è®¸ä¸ä¸€æ ·ï¼Œæ‰€æœ‰èƒ½å®žçŽ°ç€‘å¸ƒæµæ ·å¼ã€‚ ç½‘æ ¼æ ·å¼æ”¯æŒ item å æ®å¤šåˆ—çš„å®½åº¦ï¼›ç€‘å¸ƒæµæ”¯æŒ item å æ®æ€»åˆ—æ•°çš„å®½åº¦ï¼Œä¸æ”¯æŒåªå æ®å…¶ä¸­å‡ åˆ—ã€‚ å½“è®¾ç½®ä¸ºæ°´å¹³æ–¹å‘æ ·å¼æ—¶ï¼Œä»¥ä¸Šç»“è®ºä¸­è¡Œåˆ—å¯¹è°ƒï¼Œå®½åº¦é«˜åº¦å¯¹è°ƒã€‚ setFullSpan() è¯¥æ–¹æ³•æ˜¯ StaggeredGridLayoutManager å†…éƒ¨ç±» LayoutParams çš„æ–¹æ³•ï¼Œç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥è®¾ç½® item æ˜¯å¦è¦å æ®æ€»å®½åº¦æˆ–æ€»é«˜åº¦ï¼Œå½“ç€‘å¸ƒæµä¸­æœ‰æŸä¸ª item éœ€è¦æ¨ªç©¿çš„åœºæ™¯æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ•ˆæžœå¦‚ä¸‹ï¼š setOrientation() setSpanCount() ä¸è§£é‡Šï¼Œä¸Šé¢ä¸¤ä¸ª LayoutManager ä¸­ä»‹ç»è¿‡äº†ã€‚ findFirstCompletelyVisibleItemPositions() findFirstVisibleItemPositions() findLastCompletelyVisibleItemPositions() findLastVisibleItemPositions() ä½œç”¨è·Ÿ LinearLayoutManager çš„ä¸€æ ·ï¼Œä½†æœ‰äº›è®¸åŒºåˆ«ï¼Œå› ä¸ºè¿™é‡Œéœ€è¦ä¼ å…¥ int[] ç±»åž‹çš„å‚æ•°ï¼Œè¿”å›žçš„ç»“æžœä¹Ÿæ˜¯ int[] ç±»åž‹çš„ã€‚ å°±ä»¥ä¸Šä¸Šå›¾çš„å¸ƒå±€ä¸ºä¾‹ï¼Œæ¥çœ‹ä¸‹æ‰“å‡ºæ¥çš„æ—¥å¿—ï¼š å¾—åˆ°çš„ç»“æžœæ˜¯ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„å¤§å°å°±æ˜¯æž„é€ æ–¹æ³•ä¸­ä¼ å…¥çš„ spanCountã€‚ ç®€å•ç‚¹è¯´ï¼Œä¸Šé¢å››ä¸ªæ–¹æ³•çš„ä½œç”¨ï¼Œæ˜¯ä»¥æ¯è¡Œæˆ–æ¯åˆ—ä¸ºå•ä½æ¥å¯»æ‰¾ç›¸å¯¹åº”çš„é¦–ä¸ªï¼ˆæœ«ä¸ªï¼‰å¯è§æˆ–å®Œå…¨å¯è§çš„ itemã€‚ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿ æˆ‘æƒ³äº†æƒ³ï¼Œè¿˜æ˜¯æƒ³ä¸å‡ºæ¯”è¾ƒåˆç†çš„è§£é‡Šï¼Œå¤§æ¦‚ç¡¬å¥—äº†ä¸‹ï¼Œæ„Ÿè§‰ä¹Ÿè®¸æ˜¯å› ä¸ºç€‘å¸ƒæµçš„å¸ƒå±€ä¸‹æ˜¯æ²¡åŠžæ³•ç¡®å®š item çš„å¤§å°çš„ï¼Œå¦‚æžœè¿˜åƒ LinearLayoutManager åªå¯»æ‰¾é¦–ä¸ªæˆ–æœ«ä¸ªå®Œå…¨å¯è§çš„ item æ—¶ï¼Œä¹Ÿè®¸å®ƒå¹¶ä¸æ˜¯å¤„äºŽå½“å‰å±çš„æœ€é¡¶éƒ¨æˆ–æœ€åº•éƒ¨ï¼Œå°±åƒä¸Šå›¾æ—¥å¿—ä¸­çš„ position=7 çš„ itemï¼Œå®ƒè™½ç„¶æ˜¯æœ€åŽå®Œå…¨å¯è§çš„ itemï¼Œä½†å¹¶ä¸æ˜¯ä½äºŽæœ€åº•éƒ¨ï¼Œæœ€åº•éƒ¨æ˜¯ 6 çš„ itemã€‚ åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œå¦‚æžœæˆ‘ä»¬çš„éœ€æ±‚æ˜¯è¦æ‰¾åˆ°å¤„äºŽæœ€åº•éƒ¨çš„ item æ—¶ï¼Œå¦‚æžœè¿˜åªæ˜¯åƒ LinearLayoutManager åªå¯»æ‰¾æœ€åŽå®Œå…¨å¯è§çš„ item æ—¶ï¼Œå°±æ²¡åŠžæ³•åšåˆ°äº†ã€‚é‚£ä¹ˆï¼Œå¦‚æžœä½ æƒ³è¯´ï¼Œé‚£å¹²è„†å°†å¯»æ‰¾æœ€åŽä¸€ä¸ªå®Œå…¨å¯è§ item æ”¹æˆå¯»æ‰¾ä½äºŽæœ€åº•éƒ¨çš„å®Œå…¨å¯è§çš„ itemï¼Œä¸å°±å¥½äº†ã€‚é‚£å¦‚æžœè¿™æ—¶æˆ‘çš„éœ€æ±‚æ˜¯è¦å¯»æ‰¾æœ€åŽä¸€ä¸ª item è€Œä¸æ˜¯æœ€åº•éƒ¨çš„å‘¢ï¼Ÿ æ‰€ä»¥ï¼Œç€‘å¸ƒæµå®ƒç›´æŽ¥ä»¥æ¯è¡Œæˆ–æ¯åˆ—ä¸ºå•ä½ï¼Œå°†è¯¥è¡Œ/åˆ—çš„é¦–ï¼ˆæœ«ï¼‰ä¸ªå¯è§æˆ–å®Œå…¨å¯è§çš„ item ä¿¡æ¯éƒ½å…¨éƒ¨ç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬éœ€è¦å“ªäº›æ•°æ®ï¼Œæ˜¯æœ€åŽä¸€ä¸ªï¼Œè¿˜æ˜¯æœ€åº•éƒ¨ä¸€ä¸ªï¼Œå°±è‡ªè¡ŒåŽ»å¤„ç†è¿™äº›ä¿¡æ¯å¥½äº†ã€‚ ä»¥ä¸Šï¼Œçº¯å±žä¸ªäººè§‚ç‚¹ã€‚ setGapStrategy() invalidateSpanAssignments() è¿™ä¸¤ä¸ªæ–¹æ³•è¿˜æ²¡ç†æ¸…å®ƒä»¬æ˜¯å¹²å˜›ç”¨çš„ï¼Œç½‘ä¸Šæœ‰èµ„æ–™è¯´æ˜¯ç”¨äºŽè§£å†³æ»‘åŠ¨æ—¶ item è‡ªåŠ¨å˜æ¢ä½ç½®ä»¥åŠé¡¶éƒ¨ç•™ç™½é—®é¢˜ï¼Œä½†æˆ‘ä¸æ˜¯å¾ˆæ¸…æ¥šï¼ŒåŽç»­æœ‰æ—¶é—´å†ç»§ç»­æŸ¥è¯ã€‚ 2. ViewHolderViewHolder å¤§ä¼™ä¹Ÿä¸é™Œç”Ÿäº†ï¼Œä½†æ²¡æƒ³åˆ°æˆ‘ä¼šå•ç‹¬å¼€ä¸ªå°èŠ‚æ¥è®²å§ï¼Œä¹Ÿæ˜¯ï¼Œå¹³æ—¶ä½¿ç”¨æ—¶é¡¶å¤šå°±æ˜¯ç»§æ‰¿å®ƒï¼Œç„¶åŽé‡å†™ä¸€ä¸‹æž„é€ æ–¹æ³•è€Œå·²ï¼Œä½†å…¶å®žï¼Œå®ƒæœ¬èº«æºå¸¦ç€å¾ˆå¤šä¿¡æ¯ï¼Œåˆ©ç”¨å¾—å½“çš„è¯ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å¤„ç†å¾ˆå¤šäº‹æƒ…ã€‚ getAdapterPosition() getLayoutPosition() å°†è¿™ä¸¤ä¸ªæ”¾åœ¨ä¸€èµ·è®²ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªå¾ˆç±»ä¼¼ï¼Œä¸ç†æ¸…å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«çš„è¯ï¼Œå¾ˆå®¹æ˜“æžä¹±ï¼Œæºç ä¸­çš„æ³¨é‡Šå…¶å®žå·²ç»è¯´å¾—å¾ˆæ¸…æ¥šäº†ã€‚ åœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œè¿™ä¸¤ä¸ªçš„å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†åœ¨æ¶‰åŠåˆ°åˆ·æ–°æ—¶ï¼Œç”±äºŽ Android æ˜¯æ¯éš” 16.6 ms åˆ·æ–°ä¸€æ¬¡å±å¹•ï¼Œå¦‚æžœåœ¨æŸä¸€å¸§å¼€å§‹æ—¶ï¼Œadapter å…³è”çš„æ•°æ®æºå‘ç”Ÿçš„å˜åŒ–ï¼Œitem è¢«ç§»é™¤æˆ–è€…æ–°å¢žäº†ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šè°ƒç”¨ notifyDataSetChanged() æˆ–è€… notifyItemç³»åˆ—() æ–¹æ³•æ¥åˆ·æ–°ï¼Œä½† RecyclerView ä¼šç›´åˆ°ä¸‹ä¸ªå¸§æ¥çš„æ—¶å€™æ‰ä¼šåŽ»åˆ·æ–°ç•Œé¢ã€‚ é‚£ä¹ˆï¼Œä»Žè°ƒç”¨äº† notifyDataSetChanged() åˆ°ç•Œé¢åˆ·æ–°è¿™ä¹‹é—´å°±ä¼šå­˜åœ¨ä¸€å®šçš„æ—¶é—´å·®ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œæ•°æ®æºä¸Žç•Œé¢å‘ˆçŽ°çš„ Item å°±ä¸æ˜¯ä¸€è‡´æ€§çš„äº†ï¼Œå¦‚æžœè¿™æ—¶å€™æœ‰éœ€è¦åŒºåˆ†å®žé™…æ•°æ®æºçš„ Item å’Œç•Œé¢å‘ˆçŽ° Item çš„éœ€æ±‚ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ–¹æ³•å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ getLayoutPosition()ï¼šè¿”å›žçš„ä¸€ç›´æ˜¯ç•Œé¢ä¸Šå‘ˆçŽ°çš„ Item çš„ä½ç½®ä¿¡æ¯ï¼Œå³ä½¿æŸä¸ª Item å·²ç»ä»Žæ•°æ®æºä¸­è¢«ç§»é™¤ã€‚ getAdapterPosition()ï¼šå½“æ•°æ®æºå‘ç”Ÿå˜åŒ–ï¼Œä¸”ç•Œé¢å·²ç»åˆ·æ–°è¿‡åŽå³ onBindViewHolder() å·²ç»è¢«è°ƒç”¨äº†åŽï¼Œè¿”å›žçš„å€¼è·Ÿ getLayoutPosition() ä¸€è‡´ï¼›ä½†å½“æ•°æ®æºå‘ç”Ÿå˜åŒ–ï¼Œä¸”åœ¨ onBindViewHolder() è¢«è°ƒç”¨ä¹‹å‰ï¼Œå¦‚æžœè°ƒç”¨äº† notifyDataSetChanged(), é‚£ä¹ˆå°†è¿”å›žæ— æ•ˆçš„ä½ç½®æ ‡å¿— -1ï¼›å¦‚æžœè°ƒç”¨äº† notifyItemç³»åˆ—()ï¼Œé‚£ä¹ˆå°†è¿”å›ž Item åœ¨æ•°æ®æºä¸­çš„ä½ç½®ä¿¡æ¯ã€‚ ç¤ºä¾‹åœºæ™¯ï¼š 12345678910111213141516171819202122232425262728mDataList.remove(0);//1. åœºæ™¯1mAdapter.notifyDataSetChanged();logPosition();//2. åœºæ™¯2mAdapter.notifyItemRemove(0);logPosition();//3. åœºæ™¯3mAdapter.notifyItemRemove(0);mRecyclerView.post(new Runnable() &#123; @Override public void run() &#123; logPosition(); &#125;&#125;)private void logPosition() &#123; for (int i = 0; i &lt; mRecyclerView.getChildCount(); i++) &#123; View view = mRecyclerView.getChildAt(i); int layPosi = mRecyclerView.findContainingViewHolder(view).getLayoutPosition(); int adapterPosi = mRecyclerView.findContainingViewHolder(view).getAdapterPosition(); int oldPosi = mRecyclerView.findContainingViewHolder(view).getOldPosition(); LogUtils.d(TAG, "getLayoutPosition = " + layPosi); LogUtils.d(TAG, "getAdapterPosition = " + adapterPosi); &#125;&#125; åœºæ™¯1ï¼šç”±äºŽæ•°æ®æºå‘ç”Ÿå˜åŒ–åŽï¼Œè°ƒç”¨äº† notifyDataSetChanged()ï¼Œåœ¨è¿™ä¹‹åŽé©¬ä¸ŠåŽ»éåŽ†ç•Œé¢ä¸Šçš„ Item å…ƒç´ ï¼Œåˆ†åˆ«è¾“å‡º ViewHolder çš„å‡ ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆæ‰“æ—¥å¿—çš„æ—¶é—´ç‚¹è‚¯å®šæ˜¯åœ¨ç•Œé¢åˆ·æ–°ä¹‹å‰ï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ°è¿™äº›æ–¹æ³•çš„åŒºåˆ«ï¼š 0 position çš„ Item æ˜Žæ˜Žå·²ç»ä»Žæ•°æ®æºä¸­è¢«ç§»é™¤æŽ‰äº†ï¼Œä½†ç”±äºŽæ—¥å¿—æ‰“å°çš„æ—¶æœºæ˜¯åœ¨ç•Œé¢åˆ·æ–°ä¹‹å‰ï¼Œå› æ­¤å¯ä»¥çœ‹åˆ°é€šè¿‡ getLayoutPosition() èŽ·å–åˆ°çš„æ˜¯ç•Œé¢ä¸Šè¿˜æœªåˆ·æ–°ä¹‹å‰çš„ Item çš„ä¿¡æ¯ï¼Œè€Œç”±äºŽæ˜¯è°ƒç”¨äº† notifyDataSetChanged() åŽ»é€šçŸ¥ï¼Œå› æ­¤ getAdapterPosition() å¯¹äºŽæ‰€æœ‰ Item éƒ½è¿”å›žæ— æ•ˆçš„ä½ç½®æ ‡å¿— -1ã€‚ åœºæ™¯2ï¼šåŒç†ï¼Œè¿™æ¬¡ä¹Ÿæ˜¯åœ¨æ•°æ®æºå‘ç”Ÿå˜åŒ–ï¼Œç•Œé¢åˆ·æ–°ä¹‹å‰å°±åŽ»æ‰“å°æ—¥å¿—äº†ï¼Œä½†æ˜¯æ˜¯é€šè¿‡ notifyItemRemove() é€šçŸ¥ï¼Œè¿™ä¸ªæ—¶å€™ getAdapterPosition() æ–¹æ³•è¿”å›žçš„å€¼è·Ÿä¸Šé¢å°±æœ‰æ‰€å·®åˆ«äº†ï¼š ç”±äºŽè¿™æ¬¡æ˜¯é€šè¿‡ notifyItemRemove() æ–¹æ³•æ¥é€šçŸ¥çš„ï¼Œå› æ­¤ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡ getAdapterPositon() æ¥èŽ·å–åˆ°ç•Œé¢è¿˜æœªåˆ·æ–°ä¹‹å‰çš„ Item çš„å®žé™…åœ¨æ•°æ®æºä¸­çš„ position ä¿¡æ¯ã€‚position = 0 çš„ Item ç”±äºŽå·²ç»ä»Žæ•°æ®æºä¸­ç§»é™¤ï¼Œå› æ­¤è¿”å›ž -1ï¼Œä¹‹åŽçš„æ‰€æœ‰ Item ä½ç½®è‡ªåŠ¨å‘å‰ç§» 1 ä½ã€‚ åœºæ™¯3ï¼šä¸Šé¢è®²è§£æ—¶ä¸€ç›´å¼ºè°ƒè¯´ï¼Œåªæœ‰åœ¨æ•°æ®æºå‘ç”Ÿå˜åŒ–ä¸”ç•Œé¢åˆ·æ–°ä¹‹å‰ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ‰ä¼šæœ‰æ‰€åŒºåˆ«ï¼Œæ‰€ä»¥åœºæ™¯ 3 å°±æ¥æ¨¡æ‹Ÿä¸€ä¸‹ï¼Œé€šè¿‡ mRecyclerView.post() çš„å·¥ä½œç”±äºŽæ¶ˆæ¯é˜Ÿåˆ—çš„åŒæ­¥å±éšœæœºåˆ¶ä¼šè¢«å»¶è¿Ÿåˆ°ä¸‹ä¸€å¸§çš„å±å¹•åˆ·æ–°ä¹‹åŽæ‰æ‰§è¡Œï¼ˆè¯¦æƒ…ç¿»çœ‹æˆ‘çš„åŽ†å²åšå®¢ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥æ¥æ¯”è¾ƒä¸‹ä¸¤æ¬¡æ—¥å¿—çš„åŒºåˆ«ï¼Œä½ å°±æ¸…æ¥šäº†ï¼š å·¦è¾¹çš„æ—¥å¿—æ˜¯åœºæ™¯ 2 æ‰€æ‰“çš„æ—¥å¿—ï¼Œå³è¾¹çš„æ—¥å¿—æ˜¯åœºæ™¯ 3 ä¸‹çš„æ—¥å¿—ã€‚ç”±äºŽåœºæ™¯ 3 å°†æ—¥å¿—çš„æ‰§è¡Œæ—¶æœºå»¶è¿Ÿåˆ°ä¸‹ä¸€å¸§çš„ç•Œé¢åˆ·æ–°ä¹‹åŽï¼Œæ‰€æœ‰ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç•Œé¢åˆ·æ–°ä¹‹åŽï¼ŒåŽŸæœ¬çš„ç¬¬ä¸€ä¸ª Item å°±è¢«ç§»é™¤æŽ‰äº†ã€‚æ—¢ç„¶ç•Œé¢å·²ç»åˆ·æ–°äº†ï¼Œé‚£ä¹ˆæ•°æ®æºå’Œç•Œé¢çš„å‘ˆçŽ°å…¶å®žå°±æ˜¯ä¸€è‡´çš„äº†ï¼Œæ‰€ä»¥ getLayoutPosition() è¿”å›žçš„å€¼å°±è·Ÿ getAdapterPosition() æ˜¯ä¸€è‡´çš„äº†ã€‚ å°ç»“ï¼šè¯´å¾—ç™½ç‚¹ï¼ŒgetLayoutPosition() ä¼šè¿”å›ž Item åœ¨ç•Œé¢ä¸Šå‘ˆçŽ°çš„ä½ç½®ä¿¡æ¯ï¼Œä¸ç®¡æ•°æ®æºæœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œç•Œé¢æ˜¯å¦å·²åˆ·æ–°ï¼Œæ€»ä¹‹ä½ åœ¨ç•Œé¢ä¸Šçœ‹åˆ°çš„ Item åœ¨å“ªä¸ªä½ç½®ï¼Œè¿™ä¸ªæ–¹æ³•å°±ä¼šè¿”å›žé‚£ä¸ªä½ç½®ä¿¡æ¯ï¼Œæ³¨é‡Šé‡Œä¹Ÿè¯´äº†ï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•å³å¯ã€‚ getAdapterPosition() çš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œå½“æ•°æ®æºå‘ç”Ÿå˜åŒ–ï¼Œä¸”ç•Œé¢åˆ·æ–°ä¹‹å‰ï¼Œä½ åˆéœ€è¦èŽ·å– Item åœ¨æ•°æ®æºä¸­çš„å®žé™…ä½ç½®æ—¶æ‰éœ€è¦è€ƒè™‘ä½¿ç”¨è¯¥æ–¹æ³•ã€‚å¦å¤–ï¼Œä½¿ç”¨è¯¥æ–¹æ³•æ—¶ï¼Œè¿˜è¦æ³¨æ„ä½ æ˜¯ç”¨å“ªç§ notifyXXX æ¥é€šçŸ¥åˆ·æ–°ã€‚è¿™ä¸ªæ–¹æ³•çš„å®žé™…åº”ç”¨åœºæ™¯æˆ‘è¿˜æ²¡é‡åˆ°è¿‡ï¼ŒåŽç»­æœ‰ç”¨åˆ°å†ç»§ç»­è¡¥å……ã€‚ getOldPosition() è¿™ä¸ªçœ‹æ³¨é‡Šè¯´æ˜¯ç”¨äºŽå¤„ç†åŠ¨ç”»æ—¶ç”¨çš„ï¼Œä½†è¿˜æ²¡æ‰¾åˆ°ç›¸å…³çš„åœºæ™¯ï¼Œä¹Ÿæ²¡ç†è§£å…·ä½“æœ‰å•¥æ ·ï¼ŒåŽç»­å†ç»§ç»­ç ”ç©¶ã€‚ getItemId() è¿”å›žåœ¨ adapter ä¸­é€šè¿‡ getItemId(int position) ä¸ºè¯¥ item ç”Ÿæˆçš„ idï¼Œæ²¡æœ‰åœ¨ adapter é‡å†™é‚£ä¸ªæ–¹æ³•çš„è¯ï¼Œå°±è¿”å›ž RecyclerView.NO_IDã€‚ ç”¨é€”åœ¨ adapter ä¸€èŠ‚è®²è§£ã€‚ getItemViewType() è¿”å›žåœ¨ adapter ä¸­é€šè¿‡ getItemViewType() ä¸ºè¯¥ item è®¾å®šçš„ typeï¼Œæ²¡æœ‰åœ¨ adapter é‡å†™é‚£ä¸ªæ–¹æ³•çš„è¯ï¼Œé»˜è®¤å°±æ˜¯å•ä¸€ç±»åž‹çš„ item typeã€‚ item type æ˜¯ç”¨äºŽå®žçŽ°ä¸åŒ item æ ·å¼ã€‚ setIsRecyclable() RecyclerView æœ€å¤§çš„ç‰¹æ€§å°±æ˜¯å®ƒå†…éƒ¨å®žçŽ°äº†ä¸€å¥—é«˜æ•ˆçš„å›žæ”¶å¤ç”¨æœºåˆ¶ï¼Œè€Œå›žæ”¶å¤ç”¨æ˜¯ä»¥ ViewHolder ä¸ºå•ä½è¿›è¡Œç®¡ç†çš„ï¼Œæ¯ä¸ª item éƒ½ä¼šå¯¹åº”ä¸€ä¸ª ViewHolderï¼Œé»˜è®¤éƒ½æ˜¯ä¼šå‚ä¸Žè¿›å›žæ”¶å¤ç”¨æœºåˆ¶ä¸­ã€‚ ä½†å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•æ¥æ ‡å¿—è¯¥ ViewHolder ä¸ä¼šè¢«å›žæ”¶ 3. LayoutParamsRecyclerView è‡ªå®šä¹‰äº† LayoutParams å†…éƒ¨ç±»ï¼Œåœ¨æ¯ä¸ª Item çš„ LayoutParams æºå¸¦äº†ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œéœ€è¦çš„è¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¿™é‡Œæ¥èŽ·å–è¿™äº›ä¿¡æ¯ã€‚ 123456789public static class LayoutParams extends android.view.ViewGroup.MarginLayoutParams &#123; ... public boolean viewNeedsUpdate() &#123;...&#125; public boolean isViewInvalid() &#123;...&#125; public boolean isItemRemoved() &#123;...&#125; public boolean isItemChanged() &#123;...&#125; public int getViewLayoutPosition() &#123;...&#125; public int getViewAdapterPosition() &#123;...&#125;&#125; å…¬å¼€çš„æŽ¥å£æœ‰ä»¥ä¸Šå‡ ä¸ªï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ LayoutParams èŽ·å–åˆ° item çš„ position ä¿¡æ¯ã€çŠ¶æ€ä¿¡æ¯ï¼Œæ˜¯å¦éœ€è¦åˆ·æ–°ï¼Œæ˜¯å¦è¢«ç§»é™¤ç­‰ç­‰ã€‚ æ›´å¤šçš„åº”ç”¨åœºæ™¯ç•™å¾…åŽç»­è¡¥å……ã€‚ 4. Adapteradapter å¤§ä¼™è‚¯å®šæ˜¯æœ€ç†Ÿæ‚‰çš„äº†ï¼Œå†™ RecyclerView æ‰“äº¤é“æœ€å¤šçš„ä¹Ÿå°±æ˜¯ adapter äº†ï¼Œæ‰€ä»¥ä¸€äº›åŸºæœ¬çŸ¥è¯†æˆ‘å°±ä¸€ç¬”å¸¦è¿‡äº†ï¼Œæœ¬èŠ‚ç€é‡ä»‹ç»å„ç§å¯é€‰åŠŸèƒ½ã€‚ onCreateViewHolder() onBindViewHolder() getItemCount() RecyclerView.ViewHolder ä»¥ä¸Šæ˜¯å†™ä¸€ä¸ª adapter æ—¶å¿…é¡»å®žçŽ°çš„å››ç‚¹ï¼Œå®ƒä»¬å†³å®šäº† item é•¿å•¥æ ·ï¼Œå¡«å……å•¥æ•°æ®ï¼Œä»¥åŠæœ‰å¤šå°‘ä¸ª itemï¼Œæœ‰äº†è¿™äº›ä¿¡æ¯ï¼Œä¸€ä¸ª RecyclerView åˆ—è¡¨ä¹Ÿå°±å‡ºæ¥äº†ã€‚ notifyDataSetChanged() notifyItemChanged() notifyItemXXX() ç³»åˆ— ä»¥ä¸Šæ˜¯ç”¨äºŽåˆ·æ–° itemï¼Œå½“æ•°æ®æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æ‰‹åŠ¨åŽ»åˆ·æ–° itemã€‚å®˜æ–¹è¯´äº†ï¼Œ item çš„æ›´æ–°åˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯æ•°æ®éœ€è¦æ›´æ–°ï¼Œè¿™ç±»åˆ·æ–°ä¸æ¶‰åŠåˆ° item çš„ä½ç½®å˜åŒ–ï¼›è€Œå¦ä¸€ç§å±žäºŽç»“æž„åˆ·æ–°ï¼Œå°±æ˜¯æ¶‰åŠåˆ° item çš„ä½ç½®å˜åŒ–ã€‚ ä½¿ç”¨ notifyDataSetChanged() æ—¶ï¼Œå®ƒä¸ç®¡ä½ åˆ†å“ªç§å½¢å¼çš„åˆ·æ–°ï¼Œå¼ºåˆ¶æ‰€æœ‰ item é‡æ–°ç»‘å®šæ•°æ®ï¼Œé‡æ–°å¸ƒå±€æ“ä½œã€‚ ä»¥ä¸Šéƒ½å±žäºŽå¸¸ç”¨çš„åŸºæœ¬åŠŸèƒ½ï¼Œä¸€å¥è¯å¸¦è¿‡ï¼Œä¸‹é¢ä»‹ç»ä¸€äº›å¯é€‰åŠŸèƒ½ï¼š onViewRecycled() onViewAttachedFromWindow() onViewDetachedFromWindow() onAttachedToRecyclerView() onDetachedFromRecyclerView() è¿™äº›æ–¹æ³•åŸºæœ¬éƒ½æ˜¯ item æˆ– adapter çš„ä¸€äº›ç”Ÿå‘½å‘¨æœŸçš„å›žè°ƒï¼Œæ‰€ä»¥åˆ†åˆ«æ¥çœ‹çœ‹æ¯ä¸ªæ–¹æ³•éƒ½æ˜¯ä»€ä¹ˆæ—¶å€™ä¼šè¢«å›žè°ƒçš„ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†ä»€ä¹ˆåœºæ™¯ï¼Œåšäº›å•¥å·¥ä½œï¼š onViewRecycled()ï¼šå½“ ViewHolder å·²ç»ç¡®è®¤è¢«å›žæ”¶ï¼Œä¸”è¦æ”¾è¿› RecyclerViewPool ä¸­å‰ï¼Œè¯¥æ–¹æ³•ä¼šè¢«å›žè°ƒã€‚ é¦–å…ˆéœ€è¦æ˜Žç¡®ï¼ŒRecyclerView çš„å›žæ”¶æœºåˆ¶åœ¨å·¥ä½œæ—¶ï¼Œä¼šå…ˆå°†ç§»å‡ºå±å¹•çš„ ViewHolder æ”¾è¿›ä¸€çº§ç¼“å­˜ä¸­ï¼Œå½“ä¸€çº§ç¼“å­˜ç©ºé—´å·²æ»¡æ—¶ï¼Œæ‰ä¼šè€ƒè™‘å°†ä¸€çº§ç¼“å­˜ä¸­å·²æœ‰çš„ ViewHolder ç§»åˆ° RecyclerViewPool ä¸­åŽ»ã€‚æ‰€ä»¥ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰åˆšè¢«ç§»å‡ºå±å¹•çš„ ViewHoder éƒ½ä¼šå›žè°ƒè¯¥æ–¹æ³•ã€‚ å¦å¤–ï¼Œæ³¨é‡Šä¸­ä¹Ÿè¯´äº†ï¼Œè¯¥æ–¹æ³•çš„å›žè°ƒæ˜¯åœ¨ ViewHolder æ”¾è¿› RecyclerViewPool ä¸­å‰ï¼Œè€Œ ViewHolder åœ¨æ”¾è¿› Pool ä¸­æ—¶ä¼šè¢« resetï¼Œå› ä¸ºä¸Šä¸€èŠ‚ä¸­ä¹Ÿè¯´è¿‡ï¼Œå…¶å®ž ViewHolder æœ¬èº«æºå¸¦ç€å¾ˆå¤šä¿¡æ¯ã€‚é‚£ä¹ˆï¼Œåœ¨è¯¥æ–¹æ³•å›žè°ƒæ—¶ï¼Œè¿™äº›ä¿¡æ¯è¿˜æ²¡è¢«é‡ç½®æŽ‰ï¼Œå®˜æ–¹å»ºè®®æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œé‡Šæ”¾ä¸€äº›è€—å†…å­˜èµ„æºçš„å·¥ä½œï¼Œå¦‚ bitmap çš„é‡Šæ”¾ã€‚ onViewAttachedFromWindow()onViewDetachedFromWindow()ï¼š RecyclerView æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ª ViewGroupï¼Œé‚£ä¹ˆå®ƒçš„ Item è¦æ˜¾ç¤ºå‡ºæ¥ï¼Œè‡ªç„¶è¦ addView() è¿›æ¥ï¼Œç§»å‡ºå±å¹•æ—¶ï¼Œè‡ªç„¶è¦ removeView() å‡ºåŽ»ï¼Œå¯¹åº”çš„å°±æ˜¯è¿™ä¸¤ä¸ªæ–¹æ³•çš„å›žè°ƒã€‚ æ‰€ä»¥ï¼Œå½“ Item ç§»å‡ºå±å¹•æ—¶ï¼ŒonViewRecycled() ä¸ä¸€å®šä¼šå›žè°ƒï¼Œä½† onViewDetachedFromWindow() è‚¯å®šä¼šå›žè°ƒã€‚ç›¸åï¼Œå½“ Item ç§»è¿›å±å¹•å†…æ—¶ï¼Œå¦ä¸€ä¸ªæ–¹æ³•åˆ™ä¼šå›žè°ƒã€‚ é‚£ä¹ˆï¼Œå…¶å®žï¼Œåœ¨ä¸€å®šåœºæ™¯ä¸‹ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸¤ä¸ªå›žè°ƒæ¥å¤„ç†ä¸€äº› Item ç§»å‡ºå±å¹•ï¼Œç§»è¿›å±å¹•æ‰€éœ€è¦çš„å·¥ä½œã€‚ä¸ºä»€ä¹ˆè¯´ä¸€å®šåœºæ™¯ä¸‹å‘¢ï¼Œå› ä¸ºå¦‚æžœè°ƒç”¨äº† notifyDataSetChanged() çš„è¯ï¼Œä¼šè§¦å‘æ‰€æœ‰ Item çš„ detached å›žè°ƒå…ˆè§¦å‘å†è§¦å‘ onAttached å›žè°ƒã€‚ onAttachedToRecyclerView()onDetachedFromRecyclerView()ï¼š è¿™ä¸¤ä¸ªå›žè°ƒåˆ™æ˜¯å½“ RecyclerView è°ƒç”¨äº† setAdapter() æ—¶ä¼šè§¦å‘ï¼Œæ—§çš„ adapter å›žè°ƒ onDetachedï¼Œæ–°çš„ adapter å›žè°ƒ onAttachedã€‚ æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨è¿™é‡Œæ¥åšä¸€äº›èµ„æºå›žæ”¶å·¥ä½œï¼Œæ›´å¤šå…¶ä»–åº”ç”¨åœºæ™¯ç•™å¾…åŽç»­è¡¥å……ã€‚ registerAdapterDataObserver() unregisterAdapterDataObserver() ç”¨äºŽæ³¨å†Œç›‘å¬ notifyXXX() ç³»åˆ—æ–¹æ³•çš„äº‹ä»¶ï¼Œå½“è°ƒç”¨äº† notifyXXX() ç³»åˆ—çš„æ–¹æ³•æ—¶ï¼Œæ³¨å†Œç›‘å¬åŽå°±å¯ä»¥æŽ¥æ”¶åˆ°å›žè°ƒã€‚ setHasStableIds() getItemId() è¿™ä¸¤æ–¹æ³•çœ‹æ³¨é‡Šæ˜¯è¯´ç”¨äºŽå›žæ”¶å¤ç”¨æœºåˆ¶ä¸­ï¼Œç»™ ViewHoler è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œä½†å…·ä½“çš„ä½¿ç”¨åœºæ™¯è¿˜ä¸æ¸…æ¥šï¼ŒåŽç»­æœ‰ç”¨åˆ°ï¼Œå†è¡¥å……ã€‚ å¦ï¼ŒsetHasStableIds() å¿…é¡»åœ¨ setAdapter() æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸ã€‚ 5. RecyclerView5.1 addOnItemTouchListener()å’‹ä¸€çœ‹åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘è¿˜ä»¥ä¸º RecyclerView ä¹ŸæŠŠ item çš„ç‚¹å‡»äº‹ä»¶å°è£…å¥½äº†ï¼Œç»ˆäºŽä¸ç”¨æˆ‘ä»¬è‡ªå·±åŽ»å†™äº†å‘¢ã€‚çœ‹äº†ä¸‹æºç æ³¨é‡Šæ‰å‘çŽ°ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯ç”¨äºŽæ ¹æ®æƒ…å†µæ˜¯å¦æ‹¦æˆªè§¦å±äº‹ä»¶çš„åˆ†å‘ã€‚å…ˆçœ‹ä¸€ä¸‹å®ƒçš„å‚æ•°ç±»åž‹ï¼šOnItemTouchListener 12345public interface OnItemTouchListener &#123; boolean onInterceptTouchEvent(RecyclerView rv, MotionEvent e); void onTouchEvent(RecyclerView rv, MotionEvent e); void onRequestDisallowInterceptTouchEvent(boolean disallowIntercept);&#125; æ˜¯ä¸æ˜¯æ„Ÿè§‰æŽ¥å£é‡Œçš„æ–¹æ³•å¾ˆç†Ÿæ‚‰ï¼Œæ²¡é”™ï¼Œå°±æ˜¯è§¦å±äº‹ä»¶åˆ†å‘æµç¨‹ä¸­çš„æ‹¦æˆªå’Œå¤„ç†çš„ä¸¤ä¸ªæ–¹æ³•ã€‚ é€šå¸¸æˆ‘ä»¬éƒ½è¯´åœ¨è‡ªå®šä¹‰ View ä¸­é‡å†™è¿™å‡ ä¸ªæ–¹æ³•æ¥å°†è§¦å±äº‹ä»¶æ‹¦æˆªï¼Œäº¤ç”±è‡ªå·±å¤„ç†ã€‚RecyclerView ä¹Ÿæ˜¯ä¸€ä¸ª Viewï¼Œå¦‚æžœä½ æœ‰ RecyclerView éœ€è¦æ‹¦æˆªè§¦å±äº‹ä»¶è‡ªå·±å¤„ç†çš„éœ€æ±‚ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€‰æ‹©ç»§æ‰¿ RecyclerViewï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚ 5.2 addOnScrollListener()RecyclerView æ˜¯ä¸€ä¸ªåˆ—è¡¨æŽ§ä»¶ï¼Œè‡ªç„¶ä¼šæ¶‰åŠåˆ°æ»‘åŠ¨ï¼Œæ‰€ä»¥å®ƒæä¾›äº†æ»‘åŠ¨çŠ¶æ€çš„ç›‘å¬æŽ¥å£ï¼Œå½“æˆ‘ä»¬éœ€è¦åœ¨æ»‘åŠ¨çŠ¶æ€å˜åŒ–æ—¶ç›¸å¯¹åº”çš„å·¥ä½œæ—¶ï¼Œå¯ä»¥è°ƒç”¨è¯¥æ–¹æ³•æ³¨å†Œæ»‘åŠ¨ç›‘å¬ã€‚æ¥çœ‹çœ‹å®ƒçš„å‚æ•°ï¼šOnScrollListener 1234567891011public abstract static class OnScrollListener &#123; /** * Callback method to be invoked when RecyclerView's scroll state changes. * * @param recyclerView The RecyclerView whose scroll state has changed. * @param newState The updated scroll state. One of &#123;@link #SCROLL_STATE_IDLE&#125;, * &#123;@link #SCROLL_STATE_DRAGGING&#125; or &#123;@link #SCROLL_STATE_SETTLING&#125;. */ public void onScrollStateChanged(RecyclerView recyclerView, int newState)&#123;&#125; public void onScrolled(RecyclerView recyclerView, int dx, int dy)&#123;&#125;&#125; onScrolled()ï¼šæ»‘åŠ¨çš„å®žçŽ°æœ¬è´¨ä¸Šå°±æ˜¯æ¯ä¸€å¸§æ—¶è¦ä¹ˆé€šè¿‡åŠ¨ç”»ï¼Œè¦ä¹ˆé€šè¿‡ä¿®æ”¹å±žæ€§ï¼Œä¸€å¸§å¸§å†…å¤„ç†ä¸€å°æ®µæ»‘åŠ¨ï¼Œæ•´ä¸ªè¿‡ç¨‹è¿žèµ·æ¥å°±æ˜¯ä¸€ä¸ªæµç•…çš„æ»‘åŠ¨æ•ˆæžœã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯æ¯å¸§å†…å¤„ç†çš„æ»‘åŠ¨è·ç¦»ï¼Œç†æƒ³çŠ¶æ€ä¸‹ï¼Œæ¯å¸§éƒ½ä¼šå›žè°ƒä¸€æ¬¡ï¼Œç›´åˆ°æ»‘åŠ¨ç»“æŸã€‚ å¦‚æžœæƒ³å¾—åˆ°æ»‘åŠ¨çš„è·ç¦»ï¼Œæ–¹å‘çš„è¯ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•é‡Œåšã€‚ onScrollStateChanged()ï¼šè¯¥æ–¹æ³•åˆ™æ˜¯æ»‘åŠ¨çŠ¶æ€å˜åŒ–æ—¶çš„å›žè°ƒï¼Œä¸€å…±è®¾ç½®äº†ä¸‰ç§çŠ¶æ€ï¼š SCROLL_STATE_IDLEï¼šåœæ­¢æ»‘åŠ¨æ—¶çš„çŠ¶æ€ SCROLL_STATE_DRAGGINGï¼šæ‰‹æŒ‡æ‹–åŠ¨æ—¶çš„çŠ¶æ€ SCROLL_STATE_SETTLINGï¼šæƒ¯æ€§æ»‘åŠ¨æ—¶çš„çŠ¶æ€ï¼ˆè¿™æ˜¯æˆ‘çš„ç†è§£ï¼‰ åœ¨æ‰‹æœºåº”ç”¨ä¸Šå’Œ Tv åº”ç”¨ä¸Šï¼Œè¿™äº›çŠ¶æ€çš„å›žè°ƒè¿˜æ˜¯æœ‰æ‰€åŒºåˆ«çš„ï¼Œæ‰€ä»¥åˆ†å¼€æ¥è¯´ä¸€ä¸‹ï¼š æ‰‹æœºåº”ç”¨ï¼š æ‰‹æœºä¸Šçš„ RecyclerView åˆ—è¡¨æŽ§ä»¶ï¼Œé€šå¸¸éƒ½æ˜¯é€šå¸¸æ‰‹æŒ‡æ‹–åŠ¨æ¥è§¦å‘æ»‘åŠ¨çš„ï¼Œå› æ­¤åœ¨æ‰‹æŒ‡è§¦æ‘¸å¹¶æ‹–åŠ¨çš„é‚£ä¸ªæ—¶åˆ»ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«å›žè°ƒï¼Œå‚æ•°ä¼ å…¥ SCROLL_STATE_DRAGGING è¡¨ç¤ºè¿›å…¥æ‹–åŠ¨çŠ¶æ€ã€‚ å½“æ‰‹æŒ‡æ”¾å¼€çš„æ—¶å€™ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼Œä¸€æ˜¯æ‰‹æŒ‡æ”¾å¼€åŽ RecyclerView åˆæ ¹æ®æƒ¯æ€§æ»‘åŠ¨äº†ä¸€æ®µè·ç¦»ï¼Œåªè¦æœ‰ç¨å¾®æ»‘åŠ¨å°±ç®—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™è¿›å…¥æƒ¯æ€§æ»‘åŠ¨æ—¶è¯¥æ–¹æ³•ä¼šè¢«å›žè°ƒï¼Œå‚æ•°ä¼ å…¥ SCROLL_STATE_SETTLING è¡¨ç¤ºè¿›å…¥äº†æƒ¯æ€§æ»‘åŠ¨çŠ¶æ€ã€‚å½“æœ€ç»ˆåœæ­¢æ»‘åŠ¨åŽï¼Œè¯¥æ–¹æ³•è¿˜ä¼šè¢«å›žè°ƒï¼Œå‚æ•°ä¼ å…¥ SCROLL_STATE_IDLEã€‚ å¦å¤–ä¸€ç§æƒ…å†µæ˜¯ï¼Œæ‰‹æŒ‡æ”¾å¼€åŽï¼ŒRecyclerView å¹¶æ²¡æœ‰ä»»ä½•æ»‘åŠ¨äº†ï¼Œé€šå¸¸æ˜¯æ‰‹æŒ‡å¾ˆæ…¢çš„æ‹–åŠ¨æƒ…å†µä¸‹æ”¾å¼€ï¼Œè¿™æ—¶å€™è¯¥æ–¹æ³•å°±ä¼šåªå›žè°ƒä¸€æ¬¡ï¼Œå‚æ•°ä¼ å…¥ SCROLL_STATE_IDLEï¼Œå› ä¸ºåœ¨æ‰‹æŒ‡è¿˜æ²¡æ”¾å¼€å‰å°±å·²ç»åœæ­¢æ»‘åŠ¨äº†ï¼Œæ”¾å¼€åŽæ›´ä¸ä¼šæ»‘åŠ¨ï¼Œæ‰€ä»¥ç›´æŽ¥è¿›å…¥åœæ­¢æ»‘åŠ¨çŠ¶æ€ã€‚ æ‰€ä»¥ï¼Œåœ¨æ‰‹æœºåº”ç”¨ä¸Šï¼ŒReyclerView çš„æ»‘åŠ¨çŠ¶æ€å˜åŒ–æœ‰ä¸¤ç§ï¼Œä¸€æ˜¯ä»Ž SCROLL_STATE_DRAGGING åˆ° SCROLL_STATE_SETTLING å†åˆ° SCROLL_STATE_IDLEï¼›å¦å¤–ä¸€ç§æ˜¯ç›´æŽ¥ä»Ž SCROLL_STATE_DRAGGING åˆ° SCROLL_STATE_IDLEã€‚ Tv åº”ç”¨ï¼š ç”±äºŽ Tv åº”ç”¨æ²¡æœ‰è§¦æ‘¸äº‹ä»¶ï¼Œåªæœ‰é¥æŽ§å™¨äº‹ä»¶ï¼Œå› æ­¤ RecyclerView æ»‘åŠ¨çš„è§¦å‘éƒ½æ˜¯ç”±é¥æŽ§å™¨æ–¹å‘é”®æ“ä½œåŽç”±äºŽç„¦ç‚¹çš„å˜åŒ–æ¥è§¦å‘çš„ï¼Œæ‰€ä»¥åœ¨ Tv åº”ç”¨ä¸Šä¸ä¼šæœ‰ SCROLL_STATE_DRAGGING è¿™ä¸ªçŠ¶æ€ã€‚ æ¯æ¬¡æ»‘åŠ¨éƒ½æ˜¯ä»Ž SCROLL_STATE_SETTLING åˆ° SCROLL_STATE_IDLEã€‚ ä¸¤è€…æœ‰æ‰€åŒºåˆ«ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æžœä»Žäº‹ Tv åº”ç”¨å¼€å‘çš„è¯ã€‚ 5.3 setHasFixedSize()çœ‹æ–¹æ³•æ³¨é‡Šï¼Œå®ƒæ˜¯è¯´ï¼Œå½“ä½ èƒ½å¤Ÿç¡®å®šåŽç»­é€šè¿‡ notifyItemXXX() ç³»åˆ—æ–¹æ³•æ¥åˆ·æ–°ç•Œé¢æ—¶ï¼ŒRecyclerView æŽ§ä»¶çš„å®½é«˜ä¸ä¼šå› ä¸º item è€Œå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•æ¥è®© ReyclerView æ¯æ¬¡åˆ·æ–°ç•Œé¢æ—¶ä¸ç”¨åŽ»é‡æ–°è®¡ç®—å®ƒæœ¬èº«çš„å®½é«˜ã€‚ ä»Žä»£ç å±‚é¢ä¸Šæ¥çœ‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è°ƒç”¨è¯¥æ–¹æ³•è®¾ç½®äº†åŽï¼Œä¹‹åŽé€šè¿‡ notifyItemXXX() ç³»åˆ—æ–¹æ³•åˆ·æ–°ç•Œé¢æ—¶ï¼ŒRecyclerView çš„ onMeasure(), onLayout() å°±ä¸ä¼šè¢«è°ƒç”¨äº†ï¼Œè€Œæ˜¯ç›´æŽ¥è°ƒç”¨ LayoutManager çš„ onMeasure()ã€‚ ä½†è¿™æ ·åšå…·ä½“æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œæé«˜æ€§èƒ½ä¸€ç‚¹ï¼Œä½†å…¶ä»–çš„å°±ä¸æ¸…æ¥šäº†ã€‚æƒ³äº†æƒ³ï¼Œå½“ ReyclerView æŽ§ä»¶çš„å®½é«˜æ¨¡å¼æ˜¯ match_parent æ—¶ï¼Œå…¶å®žè¿™ä¸ªæ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼Œå› ä¸ºæ­¤æ—¶å®ƒçš„å®½é«˜å°±ä¸ä¼šå—åˆ° item çš„å› ç´ å½±å“äº†ã€‚å¦‚æžœæ¨¡å¼ä¸º wrap_contentï¼Œé‚£è¿™ä¸ªæ–¹æ³•å°±ä¸è¦ç”¨äº†ã€‚ 5.4 setLayoutFrozen()è¿™æ–¹æ³•å¯ä»¥ç¦æŽ‰ RecyclerView çš„å¸ƒå±€è¯·æ±‚æ“ä½œï¼Œè€Œ RecyclerView çš„æ»‘åŠ¨ï¼Œitem çš„æ·»åŠ æˆ–ç§»é™¤æœ¬è´¨ä¸Šéƒ½ä¼šè§¦å‘ RecyclerView çš„é‡æ–°æµ‹é‡ã€å¸ƒå±€æ“ä½œã€‚ æ‰€ä»¥ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå…¶å®žç­‰æ•ˆäºŽå…³é—­äº† ReyclerView çš„åˆ·æ–°ï¼Œä¸ç®¡æ•°æ®æºå‘ç”Ÿäº†ä½•ç§å˜åŒ–ï¼Œä¸ç®¡ç”¨æˆ·æ»‘åŠ¨äº†å¤šé•¿è·ç¦»ï¼Œéƒ½ä¸ä¼šåŽ»åˆ·æ–°ç•Œé¢ï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯ä¸å“åº”ä¸€æ ·ï¼Œä½†ç­‰åˆ°å†æ¬¡è°ƒç”¨è¯¥æ–¹æ³•å‚æ•°ä¼ å…¥ false åŽï¼Œå°±ä¼šç«‹é©¬åŽ»æ ¹æ®å˜åŒ–åŽçš„æ•°æ®æºæ¥åˆ·æ–°ç•Œé¢äº†ã€‚ ä½¿ç”¨åœºæ™¯è¿˜æ˜¯æœ‰çš„ï¼Œå‡å¦‚æœ‰äº›åœºæ™¯æš‚æ—¶ä¸æƒ³è®© RecyclerView åŽ»åˆ·æ–°ï¼Œæ¯”å¦‚æ­¤æ—¶æœ‰å…¶ä»–åŠ¨ç”»æ•ˆæžœæ­£åœ¨æ‰§è¡Œä¸­ï¼ŒRecyclerView åˆ·æ–°å¤šå°‘ä¼šæœ‰äº›è€—æ—¶ï¼Œä¸‡ä¸€å¯¼è‡´äº†å½“å‰åŠ¨ç”»çš„å¡é¡¿ï¼Œé‚£ä¹ˆä½“éªŒå°±ä¸å¥½äº†ã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥æš‚æ—¶å°† ReyclerView çš„åˆ·æ–°å…³é—­æŽ‰ï¼Œä½†åŽé¢è®°å¾—è¦é‡æ–°å¼€å¯ã€‚ 5.5 setPreserveFocusAfterLayout()è¿™ä¸ªè¿˜æ²¡æžæ¸…å®ƒçš„åº”ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Œæ³¨é‡Šæ˜¯è¯´ï¼Œå½“åœ¨è¿›è¡Œå¸ƒå±€å·¥ä½œæ—¶ï¼Œæœ‰äº›æ—¶å€™ï¼Œä¼šç”±äºŽ item çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæˆ–è€…ç”±äºŽåŠ¨ç”»ç­‰åŽŸå› ï¼Œå¯¼è‡´ç„¦ç‚¹ä¸¢å¤±ã€‚é€šè¿‡è¯¥æ–¹æ³•å¯ä»¥å†è¿™äº›å·¥ä½œä¹‹åŽï¼Œå†ç»§ç»­ä¿æŒä¹‹å‰ item çš„ç„¦ç‚¹çŠ¶æ€ã€‚è¿™ä¸ªæ–¹æ³•é»˜è®¤å°±æ˜¯å¼€å¯çš„ã€‚ ä½†æˆ‘æµ‹è¯•äº†ä¸‹ï¼Œä¸ç®¡æœ‰æ²¡æœ‰å¼€å¯è¿™ä¸ªæ–¹æ³•ï¼ŒnotifyDataSetChanged() æ—¶ï¼Œç„¦ç‚¹ä»ç„¶ä¼šä¹±é£˜ï¼ŒåŽç»­å†ç»§ç»­æŸ¥è¯ã€‚ 5.6 findChildViewUnder()æ–¹æ³•å‚æ•°æ˜¯ (float x, float y)ï¼Œä½œç”¨æ˜¯æŸ¥æ‰¾æŒ‡å®šåæ ‡ç‚¹ (x, y) è½äºŽ RecyclerView çš„å“ªä¸ªå­ View ä¸Šé¢ï¼Œè¿™é‡Œçš„åæ ‡ç‚¹æ˜¯ä»¥ RecyclerView æŽ§ä»¶ä½œä¸ºåæ ‡è½´ï¼Œå¹¶ä¸æ˜¯ä»¥å±å¹•å·¦ä¸Šè§’ä½œä¸ºåæ ‡åŽŸç‚¹ã€‚ å…·ä½“åº”ç”¨åœºæ™¯ï¼Œç›®å‰è¿˜æ²¡é‡åˆ°è¿‡ï¼ŒåŽç»­è¡¥å……ã€‚ 5.7 findContainingItemView()è¯¥æ–¹æ³•å‚æ•°æ˜¯ ï¼ˆView viewï¼‰ï¼Œä½œç”¨æ­£å¦‚å‘½åä¸Šçš„ç†è§£ï¼ŒæŸ¥æ‰¾å«æœ‰æŒ‡å®š View çš„ ItemViewï¼Œè€Œ ItemView æ˜¯æŒ‡ RecyclerView çš„ç›´æŽ¥å­ Viewã€‚ é€šå¸¸ï¼ŒRecyclerView çš„ Item å¸ƒå±€éƒ½ä¸ä¼šç®€å•åˆ°ç›´æŽ¥å°±æ˜¯ä¸€ä¸ªå…·ä½“çš„ TextViewï¼Œå¾€å¾€éƒ½æŒºå¤æ‚çš„ï¼Œæ¯”å¦‚ï¼š Item å¸ƒå±€çš„ç»“æž„è‡³å°‘å¦‚ä¸‹ï¼š 1234&lt;RelativeLayout&gt; &lt;ImageView/&gt; &lt;TextView/&gt;&lt;/RelativeLayout&gt; è¿™ç§ item å·²ç»ç®—æ˜¯å¾ˆç®€å•çš„äº†ï¼Œé‚£ä¹ˆå¦‚æžœæˆ‘ä»¬å½“å‰æ‹¿åˆ°çš„æ˜¯ TextView å¯¹è±¡ï¼Œé€šè¿‡è¯¥æ–¹æ³•å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ª TextView çš„æ ¹å¸ƒå±€ï¼Œå³ RecyclerView çš„ç›´æŽ¥å­ Viewï¼Œè¿™é‡Œæ˜¯ RelativeLayout å¯¹è±¡ã€‚ åº”ç”¨åœºæ™¯ï¼š æˆ‘æƒ³åˆ°ä¸€ç§åº”ç”¨åœºæ™¯ï¼Œé€šå¸¸æˆ‘ä»¬ç‚¹å‡»äº‹ä»¶éƒ½æ˜¯ä½œç”¨äºŽå…·ä½“çš„æŸä¸ª Viewï¼Œæ¯”å¦‚ä¸Šé¢çš„ TextViewï¼Œé‚£æˆ‘ä»¬åœ¨ç‚¹å‡»äº‹ä»¶çš„å›žè°ƒä¸­å°±åªèƒ½æ‹¿åˆ° TextView å¯¹è±¡è€Œå·²ã€‚è€Œé€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°è¿™ä¸ª TextView æ‰€å±žçš„ ItemViewã€‚æ‹¿åˆ° ItemView ä¹‹åŽå¯ä»¥åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ çœ‹éœ€æ±‚åœºæ™¯ï¼Œåæ­£æ€»æœ‰äº›åœºæ™¯æ˜¯éœ€è¦ç”¨åˆ°æ ¹å¸ƒå±€çš„ã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ï¼ŒRecyclerView å†…éƒ¨å…¶å®žè‡ªå®šä¹‰äº†ä¸€ä¸ª LayoutParamsï¼Œä½œç”¨äºŽå®ƒçš„ç›´æŽ¥å­ Viewã€‚æ‰€ä»¥åªè¦æˆ‘ä»¬å¯ä»¥æ‹¿åˆ° RecyclerView çš„ç›´æŽ¥å­ Viewï¼Œå°±å¯ä»¥æ‹¿åˆ°å®ƒå¯¹åº”çš„ LayoutParamsï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ LayoutParams æ‹¿åˆ°ä¸€äº›è¿™ä¸ª item çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ position ç­‰ç­‰ã€‚ 5.8 findContainingViewHolder()è¯¥æ–¹æ³•å‚æ•°æ˜¯ ï¼ˆView viewï¼‰ï¼Œä½œç”¨è·Ÿä¸Šè¿°æ–¹æ³•ç±»ä¼¼ï¼Œç”¨äºŽæŸ¥æ‰¾å«æœ‰æŒ‡å®š View çš„ ItemView æ‰€å¯¹åº”çš„ ViewHolderã€‚ è¿™é‡Œå°±ä¸å±•å¼€ä»‹ç»äº†ï¼Œè¯¥æ–¹æ³•è·Ÿä¸Šè¿°çš„æ–¹æ³•åŸºæœ¬ä¸€æ¨¡ä¸€æ ·ï¼ŒåŒºåˆ«å°±ä»…ä»…æ˜¯ä¸€ä¸ªç”¨äºŽæŸ¥æ‰¾ ItemViewï¼Œä¸€ä¸ªç”¨äºŽæŸ¥æ‰¾ ItemView å¯¹åº”çš„ ViewHolerã€‚ è‡³äºŽåº”ç”¨åœºæ™¯ï¼Œæ‹¿åˆ° ViewHolder èƒ½åšçš„äº‹å°±æ›´å¤šäº†ï¼Œè€Œæ˜¯ LayoutParams æä¾›çš„ä¿¡æ¯å…¶å®žå†…éƒ¨ä¹Ÿæ˜¯åŽ» ViewHolder ä¸­æ‹¿çš„ï¼Œæ‰€ä»¥å®žé™…ä¸Š Item æºå¸¦çš„å„ç§ä¿¡æ¯åŸºæœ¬éƒ½åœ¨ ViewHolder ä¸Šé¢äº†ã€‚ 5.9 findViewHolderXXX()æ—¢ç„¶ ViewHolder æºå¸¦ç€å¤§é‡ Item çš„ç›¸å…³ä¿¡æ¯ï¼ŒRecyclerView è‡ªç„¶ä¹Ÿå°±æä¾›äº†å„ç§æ–¹å¼æ¥èŽ·å– ViewHolderï¼Œè¿™ä¸ªç³»åˆ—çš„æ–¹æ³•å¦‚ä¸‹ï¼š findViewHolderForAdapterPosition() findViewHolderForLayoutPosition() findViewHolderForItemId() findContainingViewHolder() é€šè¿‡ position, id, view éƒ½å¯ä»¥èŽ·å–åˆ°å¯¹åº”çš„ ViewHolder å¯¹è±¡ã€‚ 6. RecyclerRecycler æ˜¯ RecyclerView çš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œä¸»è¦èŒè´£å°±æ˜¯å¤„ç†å›žæ”¶å¤ç”¨ç›¸å…³å·¥ä½œçš„ã€‚ å›žæ”¶å¤ç”¨çš„å•ä½æ˜¯ ViewHolderï¼Œè‡³äºŽ Item ç§»å‡ºå±å¹•æ˜¯æ€Žæ ·å›žæ”¶ï¼Œå›žæ”¶åˆ°å“ªé‡Œï¼ŒItem ç§»è¿›å±å¹•æ—¶æ˜¯æ€Žæ ·å¤ç”¨ï¼Œæ•´ä¸ªæµç¨‹æ˜¯å…ˆå¤ç”¨å†å›žæ”¶ï¼Œè¿˜æ˜¯å…ˆå›žæ”¶å†å¤ç”¨ï¼Œè¿˜æ˜¯ä¸¤è¾¹åŒæ—¶è¿›è¡Œç­‰ç­‰ä¸€ç³»åˆ—çš„å·¥ä½œéƒ½æ˜¯äº¤ç”± Recycler æ¥å¤„ç†ã€‚ å…³äºŽå›žæ”¶å¤ç”¨æœºåˆ¶çš„éƒ¨åˆ†åŽŸç†ï¼ŒåŸºäºŽæ»‘åŠ¨åœºæ™¯è§£æžRecyclerViewçš„å›žæ”¶å¤ç”¨æœºåˆ¶åŽŸç†](https://www.jianshu.com/p/9306b365da57)ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å…ˆåŽ»çœ‹çœ‹ã€‚ æœ¬ç¯‡ä¾§é‡ç‚¹æ˜¯ä»‹ç»å„ä¸ªæŽ¥å£çš„å«ä¹‰å’Œä½¿ç”¨åœºæ™¯ï¼Œè‡³äºŽå›žæ”¶å¤ç”¨æœºåˆ¶ï¼ŒåŽç»­è‚¯å®šè¿˜ä¼šç»§ç»­æ·±å…¥åŽ»åˆ†æžï¼Œæ•¬è¯·æœŸå¾…ã€‚ 6.1 setItemViewCacheSize()æœ‰çœ‹åˆ°ä¸Šé¢é“¾æŽ¥é‚£ç¯‡æ–‡ç« çš„åº”è¯¥å°±æ¸…æ¥šï¼Œå½“ item è¢«ç§»å‡ºå±å¹•å¤–æ—¶ï¼Œå…¶å®žè¿™ä¸ª item çš„ ViewHolder ä¼šè¢«å›žæ”¶æŽ‰ï¼Œè€Œ Recycler é‡Œæœ‰ä¸€ç§åˆ†çº§ç¼“å­˜çš„æ¦‚å¿µã€‚ åˆ†çº§ç¼“å­˜ï¼Œè¯´å¾—ç™½ç‚¹ï¼Œå°±æ˜¯ä¸åŒçš„å®¹å™¨ï¼Œå®¹å™¨ä¹‹é—´æœ‰ä¼˜å…ˆçº§ï¼Œå›žæ”¶æ—¶å…ˆå°† ViewHolder ç¼“å­˜åˆ°é«˜ä¼˜å…ˆçº§çš„å®¹å™¨ä¸­ï¼Œå®¹å™¨æ»¡äº†çš„è¯ï¼Œé‚£å°±å°†å®¹å™¨è…¾å‡ºä¸ªä½ç½®æ¥ï¼Œè¢«è…¾å‡ºæ¥çš„ ViewHolder è¿™æ—¶å°±å¯ä»¥æ”¾åˆ°ä¼˜å…ˆçº§è¾ƒä½Žçš„å®¹å™¨ä¸­ã€‚åˆ†çº§ç¼“å­˜çš„æ¦‚å¿µå°±æ˜¯è¿™æ ·ã€‚ ç§»å‡ºå±å¹•çš„ ViewHolder ä¼šè¢«ç¼“å­˜åˆ°ä¸¤ä¸ªå®¹å™¨ä¸­ï¼ŒæŒ‰ä¼˜å…ˆçº§é«˜åˆ°ä½Žåˆ†åˆ«æ˜¯ï¼šmCachedViews å’Œ mRecyclerPool è¯¥æ–¹æ³•å°±æ˜¯ç”¨äºŽè®¾ç½® mCachedViews å®¹å™¨çš„å¤§å°ï¼Œé»˜è®¤å€¼ä¸º 2ï¼Œå¯é€šè¿‡è¯¥æ–¹æ³•éšæ—¶æ”¹å˜ç¼“å­˜å®¹å™¨çš„å¤§å°ã€‚ åº”ç”¨åœºæ™¯ï¼š è¦æžæ¸…æ¥šåº”ç”¨åœºæ™¯ï¼Œé‚£å¾—å…ˆæ˜Žç™½ mCachedViews è¿™ä¸€çº§çš„ç¼“å­˜æœ‰ä»€ä¹ˆä½œç”¨ï¼Œå»ºè®®è¿˜æ˜¯åˆ°ä¸Šé¢ç»™å‡ºçš„é“¾æŽ¥çš„é‚£ç¯‡æ–‡ç« çœ‹ä¸€çœ‹ï¼Œå°±æ˜Žç™½äº†ã€‚ è¿™é‡Œå¤§æ¦‚è¯´ä¸€ä¸‹ï¼Œä¸ªäººå¯¹äºŽ mCachedViews è¿™ä¸€çº§ç¼“å­˜çš„ç†è§£ï¼šè¿™ä¸€çº§çš„ç¼“å­˜ä»…ä»…å°±åªæ˜¯ç”¨æ¥ç¼“å­˜è€Œå·²ï¼Œé‡Œé¢å­˜å‚¨çš„ ViewHolder å¹¶æ²¡æœ‰é€šç”¨çš„èƒ½åŠ›ã€‚æ¢å¥è¯è¯´ä¹Ÿå°±æ˜¯ï¼Œåªæœ‰åŽŸæ¥ä½ç½®çš„ Item å¯å¤ç”¨è¿™çº§å®¹å™¨é‡Œçš„ ViewHolderï¼Œå…¶ä»–ä½ç½®çš„ Item æ²¡åŠžæ³•ä½¿ç”¨ã€‚æ•ˆæžœå°±å¥½åƒæ˜¯ ViewPager ä¹‹ç±»çš„ç¼“å­˜ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘æ‰è¯´å®ƒä»…ä»…åªæœ‰ç¼“å­˜çš„åŠŸèƒ½ã€‚ è¿™æ ·èƒ½è¾¾åˆ°çš„æ•ˆæžœå°±æ˜¯ï¼šå½“æŸä¸ª Item åˆšè¢«ç§»å‡ºå±å¹•å¤–ï¼Œä¸‹ä¸€æ­¥åˆç«‹é©¬ç§»è¿›å±å¹•æ—¶ï¼Œæ­¤æ—¶å¹¶ä¸ä¼šåŽ»è§¦å‘åˆ° Adapter çš„ onBindXXX çš„è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸€çº§ç¼“å­˜é‡Œçš„ ViewHolder å¯ç›´æŽ¥ addView åˆ° RecyclerView ä¸Šé¢ï¼Œä¸éœ€è¦é‡æ–°åŽ»è®¾ç½®æ•°æ®ï¼Œå› ä¸ºå®ƒåŽŸæœ¬æºå¸¦çš„æ•°æ®éƒ½è¿˜å¤„äºŽæ­£å¸¸çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰è¢«é‡ç½®æŽ‰ã€‚ 6.2 setViewCacheExtension()å½“ Item è¦è¢«ç§»è¿›å±å¹•æ—¶ï¼ŒRecycler ä¼šå…ˆåŽ»é‚£äº›ä¸éœ€è¦é‡æ–°è°ƒç”¨ onBindViewHolder() çš„ç¼“å­˜å®¹å™¨ä¸­å¯»æ‰¾æ˜¯å¦æœ‰å¯ç›´æŽ¥å¤ç”¨çš„ Itemï¼Œå¦‚æžœæ²¡æ‰¾åˆ°ï¼Œé‚£ä¹ˆä¼šæŽ¥ç€è°ƒç”¨å¼€å‘è€…è‡ªå®šä¹‰æ‰©å±•çš„å¤ç”¨å·¥ä½œï¼Œå¦‚æžœåœ¨è¿™é‡Œä¹Ÿæ²¡æ‰¾åˆ°ï¼Œé‚£ä¹ˆæ‰ä¼šåŽ» RecyclerViewPool ä¸­æ ¹æ® type æ¥å¯»æ‰¾å¯å¤ç”¨çš„ï¼Œå†æ²¡æ‰¾åˆ°æœ€åŽå°±ç›´æŽ¥è°ƒç”¨ onCreateViewHolder() æ–°å»ºä¸€ä¸ªæ¥ä½¿ç”¨ã€‚ å…ˆæ¥çœ‹çœ‹å¼€å‘è€…è¦æ€Žä¹ˆè‡ªå®šä¹‰æ‰©å±•ï¼š 12345678910111213/** * æˆ‘åˆ äº†ä¸€äº›æ³¨é‡Šï¼Œç•™ä¸‹ä¸€äº›å›°æƒ‘çš„ç‚¹ * 1. Note that, Recycler never sends Views to this method to be cached. It is developers * responsibility to decide whether they want to keep their Views in this custom cache * or let the default recycling policy handle it. */public abstract static class ViewCacheExtension &#123; /** * 2.This method should not create a new View. Instead, it is expected to return * an already created View that can be re-used for the given type and position. */ public abstract View getViewForPositionAndType(Recycler recycler, int position, int type);&#125; çœ‹ç€å¥½åƒå¾ˆç®€å•æ˜¯å§ï¼Œå°±åªéœ€è¦å®žçŽ°ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›žæŒ‡å®š position å’Œ type ä¸‹çš„ Item çš„ View å³å¯ï¼Œç½‘ä¸Šæ‰€æœ‰åˆ†æžåˆ°å›žæ”¶å¤ç”¨æœºåˆ¶æ—¶ä¹Ÿå…¨éƒ¨éƒ½æ˜¯è¿™ä¹ˆä¸€ç¬”å¸¦è¿‡ã€‚ ä½†å®žé™…ä¸Šï¼Œå­˜åœ¨å¾ˆå¤šå›°æƒ‘ç‚¹ï¼Œè¿™ä¸ªåˆ°åº•è¯¥æ€Žä¹ˆç”¨ï¼Ÿ æ³¨é‡Š 1 é‡Œè¯´äº†ï¼ŒRecycler æ°¸è¿œä¹Ÿä¸ä¼šå°† ItemView å‘é€åˆ°è¿™ä¸ªç±»é‡Œæ¥ç¼“å­˜ï¼Œç„¶åŽè¿˜è¯´ç”±å¼€å‘è€…è‡ªè¡Œå†³å®šæ˜¯è¦è‡ªå·±ç»´æŠ¤è¿™äº›ç¼“å­˜è¿˜è¯´äº¤ç”± Recycler æ¥å¤„ç†ã€‚ å›°æƒ‘1ï¼šäº¤ç”± Recycler æ¥å¤„ç†æˆ‘èƒ½ç†è§£ï¼Œæ¯•ç«Ÿ Recycler åªåœ¨å¤ç”¨çš„è¿‡ç¨‹ä¸­å¼€äº†ä¸ªæŽ¥å£ç»™å¼€å‘è€…æ‰©å±•ä½¿ç”¨ï¼Œä½†å›žæ”¶çš„è¿‡ç¨‹å¹¶æ²¡æœ‰å¼€ä»»ä½•æŽ¥å£ç»™å¼€å‘è€…æ‰©å±•ã€‚ä¹Ÿæ­£æ˜¯åŸºäºŽè¿™ç‚¹ï¼Œæˆ‘å°±ä¸ç†è§£å®˜æ–¹è¯´çš„è®©å¼€å‘è€…è‡ªè¡Œç»´æŠ¤ï¼Œæ€Žä¹ˆç»´æŠ¤ï¼Ÿ æ³¨é‡Š 2 ä¸­ï¼Œå®˜æ–¹å‘Šè¯‰æˆ‘ä»¬åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œä¸è¦åŽ»æ–°å»ºä¸€ä¸ªæ–°çš„ ItemViewï¼Œè€Œæ˜¯ç›´æŽ¥ä»Žæ—§çš„é‡Œé¢æ‹¿ä¸€ä¸ªå¤ç”¨ã€‚ å›°æƒ‘2ï¼šæˆ‘åˆä¸çŸ¥é“æ€Žä¹ˆè‡ªå·±åŽ»ç»´æŠ¤ ViewHolderï¼Œé‚£ä¸æ–°å»ºä¸€ä¸ª ItemView åˆè¯¥å¦‚ä½•ä½¿ç”¨ï¼Œç›´æŽ¥å€ŸåŠ© Recyclerï¼Ÿä½† Recycler ä¸æ˜¯åªå¼€æ”¾äº† getViewForPosition()ï¼Ÿæœ¬æ¥å†…éƒ¨åœ¨å¤ç”¨æ—¶å°±æ˜¯è‡ªå·±è°ƒäº†è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨èµ°åˆ°å¼€å‘è€…æ‰©å±•è‡ªå®šä¹‰æ‰©å±•çš„æµç¨‹æ—¶å†é‡æ–°è°ƒä¸€ä¸‹ï¼Ÿé‚£ä¸æ˜¯å°±é™·å…¥åµŒå¥—å¾ªçŽ¯é‡Œäº†ï¼Ÿæœ‰ä»€ä¹ˆæ„ä¹‰æˆ–è€…åº”ç”¨åœºæ™¯ä¹ˆï¼Ÿ æœ€æœ€å›°æƒ‘çš„ä¸€ç‚¹ï¼Œå›½å†…å±…ç„¶æ‰¾ä¸åˆ°ä»»ä½•ä¸€ç¯‡è®²è§£å¦‚ä½•ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰ç¼“å­˜çš„ç›¸å…³æ–‡ç« ï¼ï¼Ÿ ä¸æ¸…æ¥šæ˜¯ç”±äºŽä»–ä»¬æ–‡ç« çš„æ ‡é¢˜å¤ªè¿‡æŠ½è±¡æ²¡åŠ å…¥æˆ‘çš„å…³é”®è¯è¿‡æ»¤ä¸­ï¼Œè¿˜æ˜¯æˆ‘å…³é”®è¯æå–å¤ªçƒ‚ï¼Œæ€»ä¹‹å°±æ˜¯æ‰¾ä¸åˆ°ä»»ä½•ä¸€ç¯‡ç›¸å…³æ–‡ç« ã€‚æ‰€ä»¥ï¼Œè¿™å°èŠ‚å…ˆåŸ‹ä¸ªå‘ï¼Œæˆ‘æ‰“ç®—åŽç»­æŠ½æ—¶é—´è‡ªå·±æ¥ç ”ç©¶ä¸€ä¸‹ï¼Œåˆ°åº•åº”è¯¥å¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰ RecyclerView çš„ç¼“å­˜ç­–ç•¥ï¼Œåˆ°åº•éƒ½æœ‰å“ªäº›åº”ç”¨åœºæ™¯ã€‚ 6.3 setRecycledViewPool()æœ€åŽä¸€çº§ç¼“å­˜å°±æ˜¯ RecyclerViewPoolï¼Œè¿™ä¸ªå®¹å™¨æœ‰ä¸‰ä¸ªç‰¹æ€§ï¼š ç¼“å­˜åˆ° RecyclerViewPool ä¸­çš„ ViewHolderï¼Œæºå¸¦çš„ä¿¡æ¯éƒ½ä¼šè¢«é‡ç½®ï¼Œå› æ­¤ä»Žè¿™ä¸ªå®¹å™¨ä¸­å– ViewHolder åŽ»å¤ç”¨æ—¶ï¼Œéƒ½ä¼šè§¦å‘ onBindViewHolder() é‡æ–°ç»‘å®šæ•°æ®ã€‚ å¤šä¸ª RecyclerView å¯å…±ç”¨åŒä¸€ä¸ª RecyclerViewPool å®¹å™¨ã€‚ è¯¥å®¹å™¨ä»¥ Item çš„ type åŒºåˆ†ç¼“å­˜ï¼Œæ¯ç§ type çš„é»˜è®¤å­˜å‚¨å®¹é‡ä¸º 5ã€‚ ä¸€èˆ¬å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹è¿™ä¸ªç¼“å­˜å®¹å™¨çš„å¤§å°ï¼Œæˆ–è€…éœ€è¦è®¾ç½®å¤šä¸ª RecyclerView å…±ç”¨ä¸€ä¸ª RecyclerViewPool æ—¶æ‰éœ€è¦è°ƒç”¨åˆ°è¯¥æ–¹æ³•ã€‚å¹¶ä¸”ï¼Œå®˜æ–¹åœ¨æ³¨é‡Šä¸­ä¹Ÿç»™å‡ºä¸€ç§åº”ç”¨åœºæ™¯ï¼šä½¿ç”¨ ViewPager æ—¶å„é¡µé¢ä¸­çš„ RecyclerView æœ‰ç›¸åŒçš„ Item å¸ƒå±€ç»“æž„ã€‚ åº”ç”¨åœºæ™¯ï¼š æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ï¼Œå°±ä¸ç”¨å®˜æ–¹ç»™çš„ä¾‹å­äº†ï¼Œæˆ‘é¢å¤–è¡¥å……ä¸€ç§åœºæ™¯ï¼šç•Œé¢ä¸Šå­˜åœ¨å¤šè¡Œå¯åˆ†åˆ«å·¦å³æ»‘åŠ¨çš„åˆ—è¡¨æŽ§ä»¶ï¼Œå³æ¯è¡Œæ˜¯ä¸€ä¸ª RecyclerViewï¼Œæ¯è¡Œé‡Œçš„ Item å¸ƒå±€æ ·å¼ä¸€è‡´ï¼Œè¿™æ—¶å€™å°±å¯ä»¥è®©æ¯ä¸€è¡Œçš„ RecyclerView å…±ç”¨ä¸€ä¸ª RecyclerViewPool ç¼“å­˜æ± äº†ï¼Œå¦‚ä¸‹ï¼š ä»¥ä¸Šå¸ƒå±€çš„å®žçŽ°æ˜¯å¤–å±‚ä¸€ä¸ªç«–ç›´æ–¹å‘çš„ RecyclerViewï¼Œå®ƒçš„æ¯ä¸€ä¸ª Item éƒ½æ˜¯å æ®ä¸€è¡Œçš„æ°´å¹³æ–¹å‘çš„ RecyclerViewï¼Œä¹Ÿå°±æ˜¯åµŒå¥— RecyclerView çš„æ–¹å¼ï¼Œå®žçŽ°å¯ä¸Šä¸‹æ»‘åŠ¨ä¸”æ¯ä¸€è¡Œå‡å¯å·¦å³æ»‘åŠ¨çš„æ•ˆæžœã€‚ è¿™é‡Œçš„æ¯ä¸€è¡Œçš„ RecyclerView é‡Œçš„æ¯ä¸ª Item é¡¹çš„æ ·å¼å‡ä¸€è‡´ï¼Œé‚£ä¹ˆè¿™ç§åœºæ™¯ä¸‹ï¼Œå¯ä»¥è®©æ¯ä¸€è¡Œçš„ RecyclerView éƒ½å…±ç”¨åŒä¸€ä¸ª RecyclerViewPool ç¼“å­˜æ± ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œå½“æŸä¸€è¡Œè¢«ç§»å‡ºå±å¹•æ—¶ï¼Œå¯ä»¥å°†è¿™ä¸€è¡Œçš„æ¯ä¸ªå¡ä½éƒ½å›žæ”¶èµ·æ¥ï¼Œä¾›å…¶ä»–è¡Œä½¿ç”¨ï¼Œè€Œä¸è‡³äºŽæ¯ä¸€è¡Œæ¯æ¬¡éƒ½æ˜¯é‡æ–°åˆ›å»ºã€‚ ä½†æœ‰äº›æ³¨æ„äº‹é¡¹ï¼š å¤–å±‚ RecyclerView ç¼“å­˜å¤ç”¨çš„åº”è¯¥ä»…ä»…æ˜¯æ¯ä¸€è¡Œçš„ RecyclerView æŽ§ä»¶è€Œå·²ï¼Œä¸åº”è¯¥åŒ…æ‹¬æ¯ä¸€è¡Œ RecyclerView å†…éƒ¨çš„å¡ä½æŽ§ä»¶ï¼Œå› ä¸ºå„è¡Œå¡ä½çš„ä¸ªæ•°å¹¶ä¸ä¸€å®šç›¸åŒã€‚ å¯¹äºŽå¤–å±‚ RecyclerView æ¥è¯´ï¼Œå®ƒçš„ Item æ˜¯æ¯ä¸€è¡Œçš„ RecyclerView æŽ§ä»¶ï¼Œæ‰€ä»¥å½“æŸä¸€è¡Œè¢«ç§»å‡ºå±å¹•æ—¶ï¼Œå®ƒä»…ä»…æ˜¯å°†è¿™ä¸€è¡Œçš„ RecyclerView æŽ§ä»¶ä»Žå®ƒæœ¬èº« remove æŽ‰ï¼Œå¹¶å›žæ”¶èµ·æ¥ã€‚å› æ­¤ï¼Œæ­¤æ—¶è¿™ä¸€è¡Œçš„ RecyclerView è¿˜æ˜¯æºå¸¦ç€å®ƒçš„å¡ä½å­ View çš„ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åŽ»å°†è¿™äº›å¡ä½å›žæ”¶ã€å¹¶ä»Žçˆ¶æŽ§ä»¶ä¸Š remove æŽ‰ã€‚ è¿™ä¸ªæ“ä½œå¯ä»¥åœ¨å¤–å±‚ RecyclerView çš„ adapter çš„ onViewRecycled() å›žè°ƒä¸­è¿›è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨å†…å±‚æ¯ä¸ª RecyclerView çš„ adapter çš„ onViewDetachedFromWindow() å›žè°ƒä¸­è¿›è¡Œã€‚ ç§»é™¤å¹¶å›žæ”¶å¡ä½å¯é€šè¿‡ setAdapter(null) é…åˆ RecyclerView æœ¬èº«çš„ removeAllView() æˆ–è€… LayoutManager çš„ removeAllView() å®žçŽ° ã€‚æˆ–è€…ç›´æŽ¥ä½¿ç”¨ LinearLayoutManager çš„ setRecycleChildrenOnDetach() åŠŸèƒ½ã€‚ 6.4 setRecyclerListener()12345678910//RecyclerView$Recycler#void dispatchViewRecycled(ViewHolder holder) &#123; if (mRecyclerListener != null) &#123; mRecyclerListener.onViewRecycled(holder); &#125; if (mAdapter != null) &#123; mAdapter.onViewRecycled(holder); &#125; ...&#125; æ‰€ä»¥ï¼Œè¿™ä¸ªæ–¹æ³•è®¾ç½®çš„ç›‘å¬ Item çš„å›žæ”¶ï¼Œå›žè°ƒçš„æ—¶æœºè·Ÿ adapter çš„ onViewRecycled() ä¸€æ¨¡ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨ mCachedViews å®¹å™¨æ»¡äº†ä¹‹åŽï¼Œæ”¾å…¥ RecyclerViewPool ä¹‹å‰è¢«å›žè°ƒã€‚ 7. ItemAnimatorRecyclerView æ˜¯æ”¯æŒå¯¹æ¯ä¸ª item åšå„ç§å„æ ·åŠ¨ç”»çš„ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™æ‰è¯¥åŽ»æ‰§è¡Œè¿™äº› item åŠ¨ç”»å‘¢ï¼Ÿè¯´ç™½äº†ï¼Œä¹Ÿå°±æ˜¯ adapter æ•°æ®æºå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œé‚£ä¹ˆå˜åŒ–çš„æ–¹å¼æ— å¤–ä¹Žå°±æ˜¯å››ç§ï¼šadd, remove, change, moveã€‚ç›¸å¯¹åº”çš„ï¼Œä¹Ÿå°±æ˜¯è¿™äº›çŠ¶æ€æ—¶çš„ item åŠ¨ç”»ã€‚ æ‰€ä»¥å½“è¦è‡ªå®šä¹‰å®žçŽ° ItemAnimator æ—¶ï¼Œéœ€è¦å®žçŽ°çš„æ–¹æ³•å¦‚ä¸‹ï¼š 12345678public abstract boolean animateAppearance(@NonNull ViewHolder viewHolder, @Nullable ItemHolderInfo preLayoutInfo, @NonNull ItemHolderInfo postLayoutInfo); public abstract boolean animateDisappearance(@NonNull ViewHolder viewHolder, @Nullable ItemHolderInfo preLayoutInfo, @NonNull ItemHolderInfo postLayoutInfo);public abstract boolean animatePersistence(@NonNull ViewHolder viewHolder, @NonNull ItemHolderInfo preLayoutInfo, @NonNull ItemHolderInfo postLayoutInfo);public abstract boolean animateChange(@NonNull ViewHolder oldHolder, @NonNull ViewHolder newHolder, @NonNull ItemHolderInfo preLayoutInfo, @NonNull ItemHolderInfo postLayoutInfo);public abstract void runPendingAnimations();public abstract void endAnimation(ViewHolder item);public abstract void endAnimations();public abstract boolean isRunning(); çœ‹èµ·æ¥ï¼Œè¦å®žçŽ°ä¸€ä¸ªè‡ªå®šä¹‰çš„ Item å¥½åƒå¾ˆå¤æ‚ï¼Œè¦å®žçŽ°è¿™ä¹ˆå¤šæ–¹æ³•ã€‚ç½‘ä¸Šè¿™æ–¹é¢çš„æ–‡ç« å·²ç»éžå¸¸å¤šäº†ï¼Œä¹Ÿéƒ½è·Ÿä½ è¯´æ¸…äº†æ¯ä¸ªæ–¹æ³•çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Œåœ¨è¿™é‡Œå†™äº›ä»€ä¹ˆï¼Œç”šè‡³æµç¨‹éƒ½å¸®ä½ åˆ—å‡ºæ¥äº†ã€‚ ä½†å¤§ä¼™ä¼šä¸ä¼šå¥½å¥‡ï¼Œè¿™å¸®ç‰›äººæ˜¯å’‹è¿™ä¹ˆæ¸…æ¥šçš„å‘¢ï¼Ÿ å…¶å®žï¼ŒGoogle å†…éƒ¨å·²ç»å°è£…å¥½äº†ä¸€ä¸ªé»˜è®¤åŠ¨ç”»çš„å®žçŽ°ï¼Œæœ‰æ—¶é—´å¤§ä¼™å¯ä»¥è‡ªå·±è¿‡ä¸€ä¸‹æºç ï¼Œçœ‹çœ‹é»˜è®¤åŠ¨ç”»æ˜¯æ€Žä¹ˆåšçš„ï¼Œç†è§£æ¸…æ¥šäº†åŽï¼Œä¸¾ä¸€åä¸‰ä¸‹ï¼Œå…¶å®žä¹Ÿå°±æ‡‚äº†ã€‚ æˆ‘ç›®å‰ä¹Ÿä¸æ‡‚ï¼Œä½†æˆ‘å°±æ˜¯å¸¦ç€è¿™ä¹ˆä¸€ç§æƒ³æ³•ï¼Œä¹Ÿæ˜¯æ‰“ç®—è¿™ä¹ˆåŽ»åšçš„ã€‚è™½ç„¶è·Ÿç€å¤§ç¥žçš„æ–‡ç« ï¼Œæœ€åŽç¡®å®žèƒ½å®žçŽ°æƒ³è¦çš„æ•ˆæžœï¼Œä½†å…¶å®žæŽŒæ¡å¹¶ä¸æ˜¯å¾ˆç‰¢ï¼Œå¹¶ä¸å¤§æ¸…æ¥šä¸ºä»€ä¹ˆéœ€è¦è¿™ä¹ˆå†™ï¼Œåªæ˜¯å› ä¸ºå¤§ç¥žè¯´è¿™é‡Œè¿™ä¹ˆå†™ï¼Œç„¶åŽå°±è¿™ä¹ˆå†™äº†ã€‚ æ‰€ä»¥ï¼Œæœ‰æ—¶é—´æœ‰ç²¾åŠ›ï¼Œè¿˜æ˜¯å»ºè®®æ·±å…¥æºç ä¸­åŽ»å­¦ä¹ ï¼Œè‡ªå·±æ¢³ç†å‡ºæ¥çš„çŸ¥è¯†ç»ˆå½’æ˜¯è‡ªå·±çš„ã€‚ 7.1 SimpleItemAnimatorå½“ adapter æ•°æ®æºå‘ç”Ÿå˜åŒ–ï¼Œé€šçŸ¥äº† RecyclerView åŽ»åˆ·æ–°ç•Œé¢æ—¶ï¼ŒRecyclerView ä¼šåŽ»é€šçŸ¥ ItemAnimaotr æ­¤æ—¶ç›¸åº”çš„åŠ¨ç”»è¡Œä¸ºã€‚ æ¯”å¦‚ add äº†ä¸€ä¸ª Itemï¼Œé‚£ä¹ˆå°±ä¼šåŽ»è§¦å‘ ItemAnimator çš„ animateAppearance() æ–¹æ³•ï¼Œå¹¶å°†è¿™ä¸ª ItemView åœ¨åˆ·æ–°å‰åŽä¸åŒçš„ä¿¡æ¯ï¼Œå¦‚é»˜è®¤æºå¸¦çš„ä¿¡æ¯æ˜¯ RecyclerView å†…éƒ¨ç±» ItemHolderInfoï¼Œè¿™ä¸ªç±»é‡Œæœ‰å…³äºŽè¿™ä¸ª Item çš„åæ ‡ä¿¡æ¯ã€‚ é‚£ä¹ˆï¼Œå¼€å‘è€…å°±å¯ä»¥åœ¨è¿™äº›å›žè°ƒæ–¹æ³•é‡Œè‡ªè¡Œåˆ¤æ–­åˆ·æ–°å‰åŽçš„ Item çš„ä¸åŒä¿¡æ¯æ¥å†³å®šæ˜¯å¦éœ€è¦è¿›è¡Œç›¸å¯¹åº”çš„åŠ¨ç”»ã€‚ è€Œ SimpleItemAnimator å…¶å®žå°±æ˜¯å¸®å¿™å¤„ç†è¿™ä»¶äº‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒåœ¨å››ä¸ªå›žè°ƒä¸­ï¼Œå¦‚ animateAppearance() ä¸­ï¼Œæ ¹æ® Item å‰åŽçš„åæ ‡ä¿¡æ¯æ¥åˆ¤æ–­è¯¥ Item éœ€è¦è¿›è¡Œçš„åŠ¨ç”»ç±»åž‹ã€‚ æ¯”å¦‚ animateAppearance()ï¼š 1234567891011@Overridepublic boolean animateAppearance(@NonNull ViewHolder viewHolder, @Nullable ItemHolderInfo preLayoutInfo, @NonNull ItemHolderInfo postLayoutInfo) &#123; if (preLayoutInfo != null &amp;&amp; (preLayoutInfo.left != postLayoutInfo.left || preLayoutInfo.top != postLayoutInfo.top)) &#123; // slide items in if before/after locations differ return animateMove(viewHolder, preLayoutInfo.left, preLayoutInfo.top, postLayoutInfo.left, postLayoutInfo.top); &#125; else &#123; return animateAdd(viewHolder); &#125;&#125; å¯¹äºŽ RecyclerView å›žè°ƒäº† animateAppearance() æ–¹æ³•åŽï¼ŒSimpleItemAnimator å†…éƒ¨å¯¹å…¶è¿›è¡Œçš„åˆ†ç±»ï¼Œæ ¹æ®å‚æ•°åˆ¤æ–­ï¼Œæœ€ç»ˆæ˜¯è¦æ‰§è¡Œ animateMove() ç±»åž‹çš„åŠ¨ç”»ï¼Œè¿˜æ˜¯æ‰§è¡Œ animateAdd() ç±»åž‹çš„åŠ¨ç”»ã€‚ åŒç†ï¼Œå¯¹äºŽå¦å¤–ä¸‰ä¸ªå›žè°ƒæ–¹æ³•ï¼ŒSimpleItemAnimator å†…éƒ¨åŒæ ·å¯¹å…¶è¿›è¡Œäº†å°è£…å¤„ç†ï¼Œç®€å•çš„é€šè¿‡åˆ·æ–°å‰åŽ Item çš„åæ ‡ä¿¡æ¯æ¥è¿›è¡ŒåŠ¨ç”»ç±»åž‹çš„åŒºåˆ†ã€‚ æ‰€ä»¥ï¼Œè¿™ä¸ªç±»å¹¶æ²¡æœ‰å®žçŽ°ä»»ä½•åŠ¨ç”»çš„é€»è¾‘ï¼Œå®ƒåªæ˜¯å°†åŠ¨ç”»çš„å‡†å¤‡å·¥ä½œåšå¥½ï¼Œç®€åŒ–å¼€å‘è€…å¼€å‘ã€‚æ‰€ä»¥ï¼Œå¦‚æžœæƒ³è¦è‡ªå®šä¹‰ ItemAnimatorï¼Œå…¶å®žæ²¡å¿…è¦ä»Žé›¶å¼€å§‹ç»§æ‰¿è‡ª ItemAnimator è‡ªå·±å†™ï¼Œæ˜¯å¯ä»¥å€ŸåŠ© SimpleItemAnimator è¿™ä¸ªç±»çš„ã€‚ 7.2 DefaultItemAnimatorRecyclerView é»˜è®¤æœ‰æä¾› Item çš„åŠ¨ç”»ï¼Œè€Œ SimpleItemAnimator åªæ˜¯å¤„ç†è·ŸåŠ¨ç”»æ— å…³çš„å‡†å¤‡å·¥ä½œï¼Œé‚£ä¹ˆå…·ä½“çš„é»˜è®¤åŠ¨ç”»çš„å®žçŽ°å°±æ˜¯åœ¨ DefaultItemAnimator è¿™ä¸ªç±»ä¸­å®žçŽ°çš„äº†ã€‚ å…ˆçœ‹ä¸€ä¸‹è¿™ä¸ªç±»çš„ç»“æž„ï¼š å®ƒæ˜¯ç»§æ‰¿è‡ª SimpleItemAnimator çš„ï¼Œæˆ‘ä»¬å¦‚æžœæƒ³è¦è‡ªå®šä¹‰å®žçŽ°ä¸€äº› Item åŠ¨ç”»ï¼Œéœ€è¦å†™çš„ä¸œè¥¿ï¼Œå¤§æ¦‚å°±è·Ÿä¸Šå›¾ç±»ä¼¼ã€‚ æƒ³è¦è‡ªå®šä¹‰ Item åŠ¨ç”»ï¼ŒçœŸçš„å¯ä»¥æ¥å‚è€ƒã€å€Ÿé‰´è¿™ä¸ªç±»çš„å®žçŽ°ï¼Œèƒ½å­¦åˆ°çš„ä¸œè¥¿å¾ˆå¤šã€‚ æˆ‘ä¹Ÿè¿˜æ²¡æ·±å…¥åŽ»ä»”ç»†å­¦ä¹ ï¼Œå¤§æ¦‚è¿‡äº†ä¸€çœ¼ï¼Œè¿™é‡Œå°±å¤§æ¦‚è¯´ä¸‹ï¼š è¿™ä¸ªç±»ç”¨äº†å¾ˆå¤šé›†åˆæ¥ç»´æŠ¤å„ç§ä¸åŒç±»åž‹çš„åŠ¨ç”»ï¼Œåœ¨å››ä¸ª animateXXX() æ–¹æ³•ä¸­é€šè¿‡é›†åˆè®°å½•ç›¸å¯¹åº”ç±»åž‹çš„åŠ¨ç”»å’Œåšäº†åŠ¨ç”»çš„åˆå§‹åŒ–å·¥ä½œã€‚ ç„¶åŽåœ¨ runPendingAnimations() æ–¹æ³•ä¸­ï¼Œä¾æ¬¡éåŽ†è¿™äº›é›†åˆï¼Œå°†è®°å½•çš„åŠ¨ç”»å–å‡ºæ¥æ‰§è¡Œï¼ŒåŠ¨ç”»çš„å®žçŽ°æ–¹å¼æ˜¯é€šè¿‡ View.animate() æ–¹å¼å®žçŽ°ï¼Œè¿™ç§æ–¹å¼çš„åŠ¨ç”»æœ¬è´¨ä¸Šæ˜¯å€ŸåŠ©äº† ValueAnimator æœºåˆ¶ï¼Œåœ¨æ¯å¸§çš„å›žè°ƒè¿‡ç¨‹ä¸­æ‰‹åŠ¨è°ƒç”¨ setXXX() æ¥å®žçŽ°çš„åŠ¨ç”»æ•ˆæžœã€‚å…·ä½“åˆ†æžå¯å‚è€ƒä¸€ç¯‡æ–‡ç« ï¼šView.animate()åŠ¨ç”»ViewPropertyAnimatoråŽŸç†è§£æžã€‚ å¤§ä½“ä¸Šçš„æµç¨‹åŽŸç†å°±æ˜¯è¿™æ ·ï¼Œå½“ç„¶ï¼Œè¿™ä¸ªç±»åšçš„äº‹è‚¯å®šä¸æ­¢è¿™äº›ï¼Œè¿˜åŒ…æ‹¬äº†é›†åˆçš„æ¸…ç†ç»´æŠ¤å·¥ä½œï¼ŒåŠ¨ç”»çš„ç»´æŠ¤ç­‰ç­‰ï¼Œæ‰€ä»¥å¾ˆå€¼å¾—åŽ»å€Ÿé‰´å­¦ä¹ ä¸€ç•ªã€‚ä½†è¿™é‡Œå°±åªç»™å‡ºå¤§æ¦‚çš„æµç¨‹ï¼Œæœ¬ç¯‡é‡ç‚¹ä¸åœ¨è¿™é‡Œã€‚ ä¸‹é¢å°±æ¥åˆ—ä¸¾ä¸‹ï¼Œé»˜è®¤å®žçŽ°çš„å„ç±»åž‹çš„åŠ¨ç”»åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼š animateAdd -&gt; é€æ˜Žåº¦ 0 ~ 1 çš„åŠ¨ç”»ï¼Œé»˜è®¤åŠ¨ç”»æ—¶é•¿ 120 ms animateChange -&gt; æ¶‰åŠä¸¤ä¸ª ItemViewï¼Œæ—§çš„è·Ÿæ–°çš„ï¼Œé»˜è®¤åŠ¨ç”»æ—¶é•¿ 250ms æ—§ ItemViewï¼šé€æ˜Žåº¦ä»ŽåŽŸæœ‰å€¼ ~ 0ï¼Œä½ç½®ä»ŽåŽŸåæ ‡ç§»åŠ¨åˆ°æ–° ItemView åæ ‡çš„åŠ¨ç”»ç»„åˆ æ–° ItemViewï¼šé€æ˜Žåº¦ä»Ž 0 ~ 1ï¼Œä½ç½®ä»Žæ—§ ItemView åæ ‡ç§»åŠ¨åˆ°æ–°åæ ‡çš„åŠ¨ç”»ç»„åˆ animateMove -&gt; ä»ŽåŽŸåæ ‡ä½ç½®ç§»åŠ¨åˆ°æ–°åæ ‡ä½ç½®çš„ç§»åŠ¨åŠ¨ç”»ï¼Œé»˜è®¤åŠ¨ç”»æ—¶é•¿ 250 ms animateRemove -&gt; ä»ŽåŽŸæœ‰é€æ˜Žåº¦ ~ 0 çš„åŠ¨ç”»ï¼Œé»˜è®¤åŠ¨ç”»æ—¶é•¿ 120 ms æ‰€ä»¥ï¼ŒRecyclerView é»˜è®¤çš„ Item åŠ¨ç”»å…¶å®žä¹Ÿå°±é€æ˜Žåº¦å’Œç§»åŠ¨åŠ¨ç”»ä¸¤ç§ï¼Œè€Œä¸”å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½åªæ˜¯å•ä¸€çš„åŠ¨ç”»ï¼Œåªæœ‰ change ç±»åž‹æ—¶æ‰ä¼šæ˜¯ç»„åˆåŠ¨ç”»ã€‚ æ•ˆæžœå±•ç¤ºï¼š é¦–å…ˆï¼Œå¯é€šè¿‡ä¸‹åˆ—æ–¹å¼ä¿®æ”¹åŠ¨ç”»æ—¶é•¿ï¼Œè¿™é‡Œå°†åŠ¨ç”»æ—¶é•¿å»¶é•¿ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ•ˆæžœ 1mRecyclerView.getItemAnimator().setAddDuration(1000); å¯ä»¥çœ‹åˆ°ï¼ŒåŠ¨ç”»åŸºæœ¬å°±åªæœ‰é€æ˜Žåº¦åŠ¨ç”»è·Ÿç§»åŠ¨åŠ¨ç”»ä¸¤ç§ã€‚ å¦å¤–ï¼Œåªæœ‰é€šè¿‡ notifyItemXXX() æ–¹å¼æ›´æ–°æ•°æ®æºæ—¶æ‰ä¼šè§¦å‘åŠ¨ç”»è¡Œä¸ºï¼Œå¦‚æžœæ˜¯é€šè¿‡ notifyDataSetChange() æ–¹å¼ï¼Œåˆ™ä¸ä¼šè§¦å‘åŠ¨ç”»ã€‚ 8. ItemDecorationRecyclerView æ”¯æŒä¸ºæ¯ä¸ª Item ä¹‹é—´è‡ªå®šä¹‰é—´éš”æ ·å¼ï¼Œæ˜¯è¦ç©ºæ®µè·ç¦»ï¼Œè¿˜æ˜¯è¦ä»¥åˆ†å‰²çº¿éš”å¼€ï¼Œè¿˜æ˜¯è¦å”¯ç¾Žå”¯å¹»çš„è¾¹æ¡†ï¼Œæƒ³é•¿å•¥æ ·éƒ½è¡Œï¼Œè‡ªå·±å†™å¾—å‡ºæ¥å°±å¯ä»¥äº†ï¼Œå®ƒç»™æˆ‘ä»¬æä¾›äº†è¿™ä¸ªæŽ¥å£ã€‚ æœ¬èŠ‚å°±å…ˆä»‹ç»ä¸‹ç³»ç»Ÿå†…ç½®çš„å‡ ç§æ ·å¼ï¼Œå†…ç½®é‡Œä¸€å…±æœ‰ä¸‰ä¸ªç±»ç»§æ‰¿è¯¥ç±»ï¼Œåˆ†åˆ«æ˜¯ DividerItemDecorationï¼ŒItemTouchHelperï¼ŒFastScrollerã€‚å‰ä¸¤ä¸ªéƒ½æ˜¯ public æƒé™ï¼Œæœ€åŽä¸€ä¸ªåŒ…æƒé™ï¼Œä¸‹é¢åˆ†åˆ«çœ‹çœ‹å®ƒä»¬éƒ½æœ‰å“ªäº›æ•ˆæžœï¼Œæœ€åŽå†æ¥çœ‹çœ‹å¦‚ä½•è‡ªå®šä¹‰ã€‚ 8.1 DividerItemDecorationçœ‹ä¸€ä¸‹è¿™ä¸ªç±»çš„æ³¨é‡Šï¼š 123456789101112131415161718192021222324/** * DividerItemDecoration is a &#123;@link RecyclerView.ItemDecoration&#125; that can be used as a divider * between items of a &#123;@link LinearLayoutManager&#125;. It supports both &#123;@link #HORIZONTAL&#125; and * &#123;@link #VERTICAL&#125; orientations. * &lt;pre&gt; * mDividerItemDecoration = new DividerItemDecoration(recyclerView.getContext(), * mLayoutManager.getOrientation()); * recyclerView.addItemDecoration(mDividerItemDecoration); * &lt;/pre&gt; */public class DividerItemDecoration extends RecyclerView.ItemDecoration &#123; /** * Sets the &#123;@link Drawable&#125; for this divider. * * @param drawable Drawable that should be used as a divider. */ public void setDrawable(@NonNull Drawable drawable) &#123; if (drawable == null) &#123; throw new IllegalArgumentException("Drawable cannot be null."); &#125; mDivider = drawable; &#125; ...&#125; æ€Žä¹ˆç”¨ï¼Œç±»æ³¨é‡Šä¹Ÿç»™æˆ‘ä»¬ç¤ºä¾‹äº†ï¼Œæœ‰ç‚¹å¯æƒœçš„æ˜¯ï¼Œå®ƒåªèƒ½ç”¨äºŽ LinearLayoutManager è¿™ç§å¸ƒå±€ï¼Œè€Œ GridLayoutManager ç»§æ‰¿è‡ª LinearLayoutManagerï¼Œæ‰€ä»¥å®ƒä¹Ÿå¯ä»¥ç”¨ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ƒåªæœ‰ä¸€ä¸ªæ–¹å‘ä¼šç”Ÿæ•ˆã€‚æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å’Œæ•ˆæžœï¼š 123456789DividerItemDecoration itemDecoration = new DividerItemDecoration(mContext, LinearLayoutManager.HORIZONTAL);itemDecoration.setDrawable(getResources().getDrawable(R.drawable.divider_space));mRecyclerView.addItemDecoration(itemDecoration);//R.drawable.divider_space&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;size android:width="20dp" android:height="20dp"/&gt;&lt;/shape&gt; æˆ‘ä»¬åœ¨ xml ä¸­å†™å®½åº¦ä¸º 20dp çš„ç©ºéš™ï¼Œç„¶åŽè°ƒç”¨ setDrawable() åº”ç”¨ï¼Œçœ‹çœ‹æ•ˆæžœï¼š è¿™æ ·å°±å¯ä»¥è¾¾åˆ°å°† item éš”ç¦»å¼€çš„æ•ˆæžœäº†ï¼Œä¸­é—´è¿™ä¸ªç©ºéš™çš„æ ·å¼ä½ å¯ä»¥è‡ªå·±é€šè¿‡ xml å†™ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨å›¾ç‰‡ï¼Œéƒ½å¯ä»¥ï¼Œåªè¦æ˜¯ Drawable ç±»åž‹çš„å³å¯ã€‚ è™½ç„¶è¯´ï¼ŒRecyclerView ä¸åƒ ListView åªè¦è®¾ç½®ä¸ªå±žæ€§å°±å¯ä»¥è¾¾åˆ°è®¾ç½® Item ä¹‹é—´ç©ºéš™çš„æ ·å¼ï¼Œä½†å®ƒä¹Ÿå†…ç½®äº†åŸºæœ¬çš„å®žçŽ°ï¼Œå…¶å®žä¹Ÿå·²ç»æ–¹ä¾¿äº†æˆ‘ä»¬çš„ä½¿ç”¨ã€‚ 8.2 ItemTouchHelperè¿™æ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œä¹Ÿæ˜¯ Google ä¸ºäº†æ–¹ä¾¿å¼€å‘äººå‘˜å®žçŽ° item çš„æ‹–æ‹½å’Œç§»åŠ¨ç­‰ç­‰æ•ˆæžœæ‰€æä¾›çš„ä¸€ä¸ªè¾…åŠ©å·¥å…·ç±»ã€‚å€ŸåŠ©è¿™ä¸ªç±»å¯ä»¥å¾ˆå®¹æ˜“å®žçŽ° item çš„ä¾§æ»‘åˆ é™¤ã€é•¿æŒ‰æ‹–æ‹½ç­‰åŠŸèƒ½ã€‚ ç”±äºŽè¿™éƒ¨åˆ†æˆ‘æ²¡æœ‰ç ”ç©¶è¿‡ï¼Œæ—¥å¸¸ä¹Ÿè¾ƒå°‘æŽ¥è§¦ï¼Œæ‰€ä»¥æš‚æ—¶å…ˆä»Žç½‘ä¸Šæœç´¢ä¸€ç¯‡æ–‡ç« ï¼Œä»¥ä¸‹çš„æ•ˆæžœå›¾æ¥è‡ªå¤§ç¥žçš„åšå®¢ï¼Œä¼šç»™å‡ºé“¾æŽ¥ï¼Œä¾µæƒåˆ ã€‚åŽç»­æœ‰æŽ¥è§¦ç›¸å…³éœ€æ±‚æ—¶å†è‡ªè¡Œæ¥ç ”ç©¶ä¸€ç•ªã€‚ æŽ¨èåšå®¢ï¼š ItemTouchHelperæºç åˆ†æž 8.3 FastScrollerè¿™ä¸ªç±»ä¹Ÿæ˜¯ç»§æ‰¿è‡ª ItemDecorationï¼Œä½†å®ƒçš„ç±»æƒé™åªæ˜¯åŒ…æƒé™ï¼Œä¸å¼€æ”¾ç»™å¤–éƒ¨ä½¿ç”¨ï¼Œç¨å¾®çœ‹äº†ä¸‹æ³¨é‡Šï¼Œè¯´æ˜¯ç”¨æ¥å¤„ç†åŠ¨ç”»ä»¥åŠå¿«é€Ÿæ»‘åŠ¨ç›¸å…³çš„æ”¯æŒï¼Œå…·ä½“åŽŸç†æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ç”Ÿæ•ˆï¼Œç•™å¾…åŽç»­æ·±å…¥ç ”ç©¶æ—¶å†æ¥åˆ†æžã€‚ 8.4 è‡ªå®šä¹‰ItemDecorationä¸Šé¢è¯´è¿‡ç³»ç»Ÿé»˜è®¤æä¾›çš„ DividerItemDecoration åªæ”¯æŒç”¨äºŽ LinearLayoutManagerï¼Œè€Œå¦‚æžœç”¨äºŽ GridLayoutManager æ—¶ï¼Œåªæœ‰ä¸€ä¸ªæ–¹å‘ä¼šç”Ÿæ•ˆï¼Œé‚£ä¹ˆä¸‹é¢æˆ‘ä»¬å°±ä»¥ GridLayoutManager ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹ï¼Œå¦‚ä½•è‡ªå®šä¹‰å†™ ItemDecorationã€‚ ç”¨ GridLayoutManager å®žçŽ°ä¸€ä¸ªå››åˆ—çš„å¸ƒå±€ï¼Œç„¶åŽè®©é™¤äº†å››ä¸ªè¾¹çš„ Item å¤–ï¼Œå†…éƒ¨çš„æ¯ä¸ª Item ä¹‹é—´ç›¸äº’é—´éš” 20 dp çš„ç©ºéš™ã€‚ä¸ºäº†èƒ½æ›´æ˜Žæ˜¾çœ‹å‡ºï¼Œå°† 20dp çš„ç©ºéš™ç”¨çº¢è‰²ç»˜åˆ¶å‡ºæ¥ã€‚ å…ˆæ¥çœ‹ä¸‹æ•ˆæžœï¼š 4 åˆ—å¸ƒå±€ &amp; 2 è¡Œå¸ƒå±€ ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667public class MyItemDecoration extends RecyclerView.ItemDecoration &#123; private int spanCount;//å‡ è¡Œæˆ–å‡ åˆ— private int orientation;//æ–¹å‘ private int itemSpace;//ç©ºéš™å¤§å° private Rect mBounds = new Rect(); private Paint mPaint;//ç”¨æ¥å°†ç©ºéš™ç»˜åˆ¶æˆçº¢è‰²çš„ç”»ç¬” public MyItemDecoration(GridLayoutManager gridLayoutManager) &#123; spanCount = gridLayoutManager.getSpanCount(); orientation = gridLayoutManager.getOrientation(); initPaint(); &#125; private void initPaint() &#123; mPaint = new Paint(); mPaint.setAntiAlias(true); mPaint.setColor(Color.RED); &#125; public void setItemSpace(int space) &#123; itemSpace = space; &#125; @Override public void onDraw(Canvas c, RecyclerView parent, RecyclerView.State state) &#123; c.save(); final int childCount = parent.getChildCount(); for (int i = 0; i &lt; childCount; i++) &#123; final View child = parent.getChildAt(i); parent.getLayoutManager().getDecoratedBoundsWithMargins(child, mBounds); c.drawRect(mBounds, mPaint); &#125; c.restore(); &#125; @Override public void getItemOffsets(Rect outRect, View view, RecyclerView parent, RecyclerView.State state) &#123; //èŽ·å–å½“å‰viewçš„layoutPosition int itemPosition = parent.getChildLayoutPosition(view); //è®¡ç®—è¯¥Viewä½äºŽå“ªä¸€è¡Œå“ªä¸€åˆ— int positionOfGroup = itemPosition % spanCount; int itemGroup = itemPosition / spanCount; //æ ¹æ®ä¸åŒæ–¹å‘è¿›è¡Œä¸åŒå¤„ç†ï¼Œæœ€ç»ˆæ•ˆæžœéƒ½è¦å®žçŽ°é™¤å››å‘¨çš„View å¤–ï¼Œå†…éƒ¨çš„Viewä¹‹é—´æ¨ªç«–éƒ½ä»¥ç›¸åŒç©ºéš™é—´éš”å¼€ //å®žçŽ°æ–¹å¼ï¼Œä»¥æ°´å¹³æ–¹å‘ä¸ºä¾‹ï¼š //æ¯ä¸ªviewçš„leftå’Œbottoméƒ½è®¾ç½®ç›¸åŒé—´éš™ //åŽ»æŽ‰ç¬¬1åˆ—çš„leftï¼Œå’Œæœ€åŽä¸€è¡Œçš„bottomï¼Œä¹Ÿå°±å®žçŽ°äº†é™¤å››å‘¨å¤–å†…éƒ¨viewéƒ½ä»¥ç›¸åŒé—´éš™ç©ºéš”å¼€ if (orientation == LinearLayoutManager.HORIZONTAL) &#123; outRect.set(itemSpace, 0, 0, itemSpace); if (itemGroup == 0) &#123; outRect.left = 0; &#125; if (positionOfGroup == (spanCount - 1)) &#123; outRect.bottom = 0; &#125; &#125; else if (orientation == LinearLayoutManager.VERTICAL) &#123; outRect.set(0, itemSpace, itemSpace, 0); if (itemGroup == 0) &#123; outRect.top = 0; &#125; if (positionOfGroup == (spanCount - 1)) &#123; outRect.right = 0; &#125; &#125; &#125;&#125; æ³¨æ„äº‹é¡¹ï¼šç”±äºŽ GridLayoutManager ä¼šæ ¹æ®è®¾ç½®çš„ Orientation æ–¹å‘ï¼Œé»˜è®¤ä¸º VERTICAL æ•°å€¼æ–¹å‘ï¼Œä»¥åŠ RecyclerView çš„å®½é«˜æ¨¡å¼æ¥å†³å®šæ˜¯å¦è‡ªåŠ¨å°†æŸä¸€æ–¹å‘çš„ç©ºéš™å¹³å‡åˆ†é…ç»™å„ Itemï¼Œè¿™ç‚¹éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚ ä»¥ä¸Šçš„ä¾‹å­æƒ³è¯´æ˜Žï¼Œå¦‚æžœè¦è‡ªå®šä¹‰å†™ Iiem é—´çš„ç©ºéš™ï¼Œé‚£ä¹ˆå…³é”®ç‚¹åœ¨äºŽé‡å†™ä¸¤ä¸ªæ–¹æ³•ï¼š getItemOffsets() onDraw() ç¬¬ 1 ä¸ªæ–¹æ³•ä¼šæºå¸¦å¾ˆå¤šå‚æ•°ï¼Œæœ€é‡è¦çš„æ˜¯ outRect è¿™ä¸ªå‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ª Rect ç±»åž‹çš„å¯¹è±¡ï¼Œé‡å†™è¿™ä¸ªæ–¹æ³•å¹¶è®¾ç½®äº†è¿™ä¸ª outRect çš„ left, top, right, bottomï¼Œå°±ç›¸å½“äºŽè®¾ç½®äº†å¯¹åº”è¿™ä¸ª view çš„å››å‘¨åˆ†åˆ«æœ‰å¤šå¤§çš„ç©ºéš™ã€‚ å…¶ä»–çš„å‚æ•°æ˜¯ç”¨æ¥ç»™æˆ‘ä»¬è¾…åŠ©ä½¿ç”¨ï¼Œå¦‚æžœä¸éœ€è¦åŒºåˆ†å¯¹å¾…ï¼Œæ¯ä¸ª item çš„å››å‘¨éƒ½æ˜¯åŒæ ·çš„é—´éš”ç©ºéš™ï¼Œé‚£ç›´æŽ¥è®¾ç½® outRect å³å¯ã€‚ å¦‚æžœéœ€è¦åƒä¸Šè¿°ä¾‹å­é‚£æ ·ï¼Œè¦æ±‚å››å‘¨çš„ Item çš„é—´éš™è¦åŒºåˆ«äºŽå†…éƒ¨ item çš„é—´éš™ï¼Œé‚£ä¹ˆå°±éœ€è¦åˆ¤æ–­å‡ºè¿™ä¸ª View çš„ä½ç½®ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å…¶ä»–å‚æ•°è¾…åŠ©é…åˆå®žçŽ°ã€‚ onDraw() è¿™ä¸ªæ–¹æ³•å°±æ˜¯ç”¨äºŽç»˜åˆ¶ï¼Œæ³¨æ„è¿™ä¸ªæ–¹æ³•å‚æ•°åªç»™äº† RecyclerViewï¼Œè€Œç»˜åˆ¶ item çš„ Decoration æ˜¯é’ˆå¯¹äºŽæ¯ä¸ª item è€Œè¨€çš„ï¼Œæ‰€ä»¥å†…éƒ¨éœ€è¦é€šè¿‡éåŽ†å­ View æ¥å¯¹æ¯ä¸ª item è¿›è¡Œç»˜åˆ¶æ“ä½œã€‚ å½“ç„¶ï¼Œæˆ‘è¿™é‡Œå†™å¾—å¾ˆç²—ç³™ï¼Œè€ƒè™‘åˆ°æ€§èƒ½ä¼˜åŒ–æ–¹é¢ï¼Œç»˜åˆ¶è¿‡åº¦æ–¹é¢ç­‰ç­‰å› ç´ ï¼Œé€šå¸¸æ˜¯éœ€è¦ä½¿ç”¨åˆ° canvas.clipRect()ã€‚è¿™éƒ¨åˆ†ä»£ç å»ºè®®å¯ä»¥å‚è€ƒ DividerItemDecoration å†…éƒ¨çš„å®žçŽ°ã€‚ 9. OnFlingListenerRecyclerView æ˜¯å¯æ»‘åŠ¨æŽ§ä»¶ï¼Œåœ¨å¹³å¸¸ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å°±æ˜¯ä¸Šæ»‘ï¼Œä¸‹æ»‘ï¼Œå·¦è¾¹æ»‘æ»‘ï¼Œå³è¾¹æ»‘æ»‘ï¼Œèƒ½å¤Ÿåˆ·æ–°æ›´å¤šåˆ—è¡¨å³å¯ï¼Œé€šå¸¸éƒ½æ²¡å¤ªè¿‡åŽ»æ³¨æ„åˆ°æ»‘åŠ¨çš„ç»†èŠ‚ã€‚ ä½†å…¶å®žï¼Œæ»‘åŠ¨ç­–ç•¥ä¹Ÿæ˜¯æ”¯æŒå¤šæ ·åŒ–çš„ã€‚ æ¯”å¦‚ï¼Œå¦‚æžœæƒ³è¦å®žçŽ°ä¸ç®¡ä»¥å¤šå¤§çš„åŠ é€Ÿåº¦æ»‘åŠ¨ï¼Œæ»‘å¤šé•¿è·ç¦»ï¼Œæœ€ç»ˆåœä¸‹æ¥æ—¶éƒ½ç³»ç»Ÿæœ‰ä¸ª ItemView æ˜¯å±…ä¸­æ˜¾ç¤ºçš„æ•ˆæžœã€‚ å†æ¯”å¦‚ï¼Œåªå¸Œæœ›ç¿»é¡µæ»‘åŠ¨ï¼Œå½“æ‰‹æŒ‡æ»‘åŠ¨è·ç¦»å°äºŽç¿»é¡µæ—¶ï¼Œè‡ªåŠ¨æ»‘å›žåŽŸä½è¿›è¡Œç¿»é¡µç­‰ç­‰ã€‚ è¿™äº›æ»‘åŠ¨ç­–ç•¥å…¶å®žå°±å¯ä»¥ç›´æŽ¥å€ŸåŠ©å†…ç½®çš„ä¸¤ä¸ªç±»æ¥å®žçŽ°ï¼šLinearSnapHelper å’Œ PagerSnapHelper psï¼šæœ¬æ¥ä»¥ä¸ºè¿™ç§æ»‘åŠ¨ç­–ç•¥ä¹Ÿæ˜¯æ”¯æŒç”±ç„¦ç‚¹è§¦å‘çš„æ»‘åŠ¨è¡Œä¸ºçš„ï¼Œæœ€åŽæµ‹è¯•æ—¶æ‰å‘çŽ°ï¼ŒåŽŸæ¥åªæ”¯æŒæ‰‹æŒ‡è§¦æ‘¸å¼çš„æ»‘åŠ¨è¡Œä¸ºã€‚ç”±äºŽæˆ‘æ˜¯æž Tv åº”ç”¨å¼€å‘çš„ï¼ŒTv åº”ç”¨æ²¡æœ‰è§¦æ‘¸äº‹ä»¶ï¼Œåªæœ‰é¥æŽ§å™¨äº‹ä»¶ï¼Œæ»‘åŠ¨æ˜¯ç”±äºŽç„¦ç‚¹çš„å˜åŒ–è§¦å‘çš„æ»‘åŠ¨è¡Œä¸ºã€‚è€Œåœ¨ Tv ä¸Šï¼ŒItem å±…ä¸­çš„éœ€æ±‚ä¹Ÿéžå¸¸å¸¸è§ï¼Œä½†åˆ©ç”¨è¿™ä¸ªæ˜¯æ— æ³•å®žçŽ°çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘å°±å…ˆä¸æ‰“ç®—æ·±å…¥äº†è§£è¿™å—äº†ï¼ŒåŽç»­æœ‰æ—¶é—´å†æ¥æ…¢æ…¢ç ”ç©¶ã€‚é™„ä¸Šé¸¿ç¥žå…¬ä¼—å·ä¸­çš„ä¸€ç¯‡æ–‡ç« ï¼Œå¤§ä¼™çœ‹è¿™ç¯‡å°±è¡Œäº†ã€‚ Androidä¸­ä½¿ç”¨RecyclerView + SnapHelperå®žçŽ°ç±»ä¼¼ViewPageræ•ˆæžœ 9.1 SnapHelper9.2 LinearSnapHelper9.3 PagerSnapHelper]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>RecyclerView</tag>
        <tag>View</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidåˆ¤æ–­å½“å‰åº”ç”¨æ˜¯å¦å¼€å¯æ¶ˆæ¯é€šçŸ¥]]></title>
    <url>%2Fposts%2F7299f542.html</url>
    <content type="text"><![CDATA[å½“APPæœ‰æŽ¨é€åŠŸèƒ½æ—¶ï¼Œéœ€è¦åˆ¤æ–­å½“å‰appåœ¨æ‰‹æœºä¸­æ˜¯å¦å¼€å¯äº†å…è®¸æ¶ˆæ¯æŽ¨é€ï¼Œå¦åˆ™å³ä½¿æ·»åŠ äº†æŽ¨é€ä»£ç ä»ç„¶æ”¶ä¸åˆ°é€šçŸ¥ 12345678910private boolean isNotificationEnabled(Context context) &#123; boolean isOpened = false; try &#123; isOpened = NotificationManagerCompat.from(context).areNotificationsEnabled(); &#125; catch (Exception e) &#123; e.printStackTrace(); isOpened = false; &#125; return isOpened; &#125; Api24ä»¥ä¸Šï¼ŒNotificationManagerCompatä¸­æä¾›äº†areNotificationsEnabled()æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¸­å·²ç»å¯¹API19ä»¥ä¸‹ï¼ŒAPI19-24ï¼ŒAPI24ä»¥ä¸Šï¼Œè¿™ä¸‰ç§æƒ…å†µåšäº†åˆ¤æ–­ã€‚ç›´æŽ¥ä½¿ç”¨å…¶è¿”å›žå€¼å³å¯ã€‚ è¯¥æ–¹æ³•å¦‚æžœè¿”å›žtrueè¡¨ç¤ºæ‰“å¼€äº†æ¶ˆæ¯é€šçŸ¥ï¼Œå¦‚æžœè¿”å›žfalseåˆ™æ²¡æœ‰æ‰“å¼€ã€‚æ²¡æœ‰æ‰“å¼€åˆ™è·³è½¬è®¾ç½®ç•Œé¢ã€‚ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819private void gotoSet() &#123; Intent intent = new Intent(); if (Build.VERSION.SDK_INT &gt;= 26) &#123; // android 8.0å¼•å¯¼ intent.setAction("android.settings.APP_NOTIFICATION_SETTINGS"); intent.putExtra("android.provider.extra.APP_PACKAGE", getPackageName()); &#125; else if (Build.VERSION.SDK_INT &gt;= 21) &#123; // android 5.0-7.0 intent.setAction("android.settings.APP_NOTIFICATION_SETTINGS"); intent.putExtra("app_package", getPackageName()); intent.putExtra("app_uid", getApplicationInfo().uid); &#125; else &#123; // å…¶ä»– intent.setAction("android.settings.APPLICATION_DETAILS_SETTINGS"); intent.setData(Uri.fromParts("package", getPackageName(), null)); &#125; intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); startActivity(intent); &#125; æˆ‘ä»¬å¯ä»¥åœ¨Activityçš„onCreateä¸­è¿›è¡Œåˆ¤æ–­ï¼š 123456//åˆ¤æ–­è¯¥appæ˜¯å¦æ‰“å¼€äº†é€šçŸ¥ï¼Œå¦‚æžœæ²¡æœ‰çš„è¯å°±æ‰“å¼€æ‰‹æœºè®¾ç½®é¡µé¢if (!isNotificationEnabled()) &#123; gotoSet();&#125; else &#123; //å½“å‰appå…è®¸æ¶ˆæ¯é€šçŸ¥&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidè°ƒç”¨ç³»ç»Ÿåˆ†äº«]]></title>
    <url>%2Fposts%2Fc19f18fd.html</url>
    <content type="text"><![CDATA[èŽ·å–Androidç³»ç»Ÿåˆ†äº«åˆ—è¡¨123456789101112131415161718192021public List&lt;AppInfoVo&gt; getShareApps(Context context) &#123; PackageManager packageManager = context.getPackageManager(); List&lt;AppInfoVo&gt; appInfoVos = new ArrayList&lt;AppInfoVo&gt;(); List&lt;ResolveInfo&gt; resolveInfos = new ArrayList&lt;ResolveInfo&gt;(); Intent intent = new Intent(Intent.ACTION_SEND, null); intent.addCategory(Intent.CATEGORY_DEFAULT); intent.setType("*/*"); PackageManager pManager = context.getPackageManager(); resolveInfos = pManager.queryIntentActivities(intent, PackageManager .COMPONENT_ENABLED_STATE_DEFAULT); for (int i = 0; i &lt; resolveInfos.size(); i++) &#123; AppInfoVo appInfoVo = new AppInfoVo(); ResolveInfo resolveInfo = resolveInfos.get(i); appInfoVo.setAppName(resolveInfo.loadLabel(packageManager).toString()); appInfoVo.setIcon(resolveInfo.loadIcon(packageManager)); appInfoVo.setPackageName(resolveInfo.activityInfo.packageName); appInfoVo.setLauncherName(resolveInfo.activityInfo.name); appInfoVos.add(appInfoVo); &#125; return appInfoVos; &#125; åˆ†äº«æ–‡æœ¬ä¿¡æ¯1234Intent intent = new Intent(Intent.ACTION_SEND);intent.setType("text/plain");intent.putExtra(Intent.EXTRA_TEXT,"This is a text");startActivity(Intent.createChooser(intent,"Share")); åˆ†äº«å•å¼ å›¾ç‰‡1234567String path = Environment.getExternalStorageDirectory() + File.separator;//sdæ ¹ç›®å½•File file = new File(path, "test" + ".png");//è¿™é‡Œtest.pngæ˜¯sdå¡æ ¹ç›®å½•ä¸‹çš„ä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶Uri imageUri = Uri.fromFile(file);Intent intent = new Intent(Intent.ACTION_SEND);intent.setType("image/*");intent.putExtra(Intent.EXTRA_STREAM, imageUri);startActivity(Intent.createChooser(intent, "Share")); åˆ†äº«è§†é¢‘12345678910String path = Environment.getExternalStorageDirectory() + File.separator;//sdæ ¹ç›®å½•File file = new File(path, "test" + ".mp4");Uri audioUri = Uri.fromFile(file);ComponentName comp = new ComponentName("com.tencent.mobileqq", "com.tencent.mobileqq.activity.JumpActivity");Intent shareIntent = new Intent();shareIntent.setComponent(comp);shareIntent.setAction(Intent.ACTION_SEND);shareIntent.putExtra(Intent.EXTRA_STREAM, audioUri);shareIntent.setType("audio/*");startActivity(Intent.createChooser(shareIntent, "åˆ†äº«è§†é¢‘")); åˆ†äº«å¤šä¸ªæ–‡ä»¶1234567891011121314String path = Environment.getExternalStorageDirectory() + File.separator;//sdæ ¹ç›®å½•ArrayList&lt;Uri&gt; imageUris = new ArrayList&lt;&gt;();File file = new File(path, "test" + ".png");File file2 = new File(path, "test2" + ".png");Uri imageUri = Uri.fromFile(file);Uri imageUri2 = Uri.fromFile(file2);imageUris.add(imageUri);imageUris.add(imageUri2);Intent intent = new Intent(Intent.ACTION_SEND_MULTIPLE);intent.setType("image/*");intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM,imageUris);startActivity(Intent.createChooser(intent, "Share")); æŒ‡å®šåˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹1234567ComponentName comp = new ComponentName("com.tencent.mm", "com.tencent.mm.ui.tools.ShareImgUI");Intent shareIntent = new Intent();shareIntent.setComponent(comp); shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE);shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUris);shareIntent.setType("image/*");startActivity(Intent.createChooser(shareIntent, "åˆ†äº«å¤šå¼ å›¾ç‰‡")); æŒ‡å®šåˆ†äº«åˆ°å¾®ä¿¡æœ‹å‹åœˆ1234567ComponentName comp = new ComponentName("com.tencent.mm", "com.tencent.mm.ui.tools.ShareToTimeLineUI");Intent shareIntent = new Intent();shareIntent.setComponent(comp);shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE); shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUris);shareIntent.setType("image/*");startActivity(Intent.createChooser(shareIntent, "åˆ†äº«å¤šå¼ å›¾ç‰‡")); æŒ‡å®šåˆ†äº«åˆ°QQå¥½å‹1234567ComponentName comp = new ComponentName("com.tencent.mobileqq", "com.tencent.mobileqq.activity.JumpActivity");Intent shareIntent = new Intent();shareIntent.setComponent(comp);shareIntent.setAction(Intent.ACTION_SEND_MULTIPLE); shareIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, imageUris);shareIntent.setType("image/*");startActivity(Intent.createChooser(shareIntent, "åˆ†äº«å¤šå¼ å›¾ç‰‡")); è§†é¢‘æŒ‡å®šåˆ†äº«åˆ°QQç©ºé—´12345678910String path = Environment.getExternalStorageDirectory() + File.separator;//sdæ ¹ç›®å½•File file = new File(path, "test" + ".mp4");Uri audioUri = Uri.fromFile(file);ComponentName comp = new ComponentName("com.qzone", "com.qzonex.module.maxvideo.activity.QzonePublishVideoActivity");Intent shareIntent = new Intent();shareIntent.setComponent(comp);shareIntent.setAction(Intent.ACTION_SEND);shareIntent.putExtra(Intent.EXTRA_STREAM, audioUri);shareIntent.setType("video/*");startActivity(Intent.createChooser(shareIntent, "åˆ†äº«è§†é¢‘")); åˆ†äº«åˆ°æŒ‡å®šç¨‹åºåªè¦èŽ·å¾—åŒ…åå’Œç›¸åº”Activityå³å¯ å¾®ä¿¡æœ‹å‹åœˆâ€œcom.tencent.mmâ€â€œcom.tencent.mm.ui.tools.ShareToTimeLineUIâ€ å¾®ä¿¡æœ‹å‹â€œcom.tencent.mmâ€â€œcom.tencent.mm.ui.tools.ShareImgUIâ€ QQå¥½å‹â€œcom.tencent.mobileqqâ€â€œcom.tencent.mobileqq.activity.JumpActivityâ€ QQç©ºé—´åˆ†äº«è§†é¢‘â€œcom.qzoneâ€â€œcom.qzonex.module.maxvideo.activity.QzonePublishVideoActivityâ€ QQç©ºé—´åˆ†äº«å›¾ç‰‡ã€æ–‡å­—â€œcom.qzoneâ€â€œcom.qzonex.module.operation.ui.QZonePublishMoodActivityâ€ æ–°æµªå¾®åšâ€œcom.sina.weiboâ€â€œcom.sina.weibo.composerinde.ComposerDispatchActivityâ€]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>åˆ†äº«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤§ç¥žè¿›é˜¶ä¹‹è·¯è‡ªå®šä¹‰View]]></title>
    <url>%2Fposts%2F37e124c4.html</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰Viewå®šä¹‰åœ¨Androidç³»ç»Ÿä¸­ï¼Œç•Œé¢ä¸­æ‰€æœ‰èƒ½çœ‹åˆ°çš„å…ƒç´ éƒ½æ˜¯Viewã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒAndroidç³»ç»Ÿä¸ºå¼€å‘è€…æä¾›äº†å¾ˆå¤šViewï¼Œæ¯”å¦‚ç”¨äºŽå±•ç¤ºæ–‡æœ¬ä¿¡æ¯çš„TextViewï¼Œç”¨äºŽå±•ç¤ºå›¾ç‰‡çš„ImageViewç­‰ç­‰ã€‚ä½†æœ‰æ—¶ï¼Œè¿™å¹¶ä¸èƒ½æ»¡è¶³å¼€å‘è€…çš„éœ€æ±‚ï¼Œä¾‹å¦‚ï¼Œå¼€å‘è€…æƒ³è¦ç”¨ä¸€ä¸ªé¥¼çŠ¶å›¾æ¥å±•ç¤ºä¸€ç»„æ•°æ®ï¼Œè¿™æ—¶å¦‚æžœç”¨ç³»ç»Ÿæä¾›çš„Viewå°±ä¸èƒ½å®žçŽ°äº†ï¼Œåªèƒ½é€šè¿‡è‡ªå®šä¹‰Viewæ¥å®žçŽ°ã€‚é‚£åˆ°åº•ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰Viewå‘¢ï¼Ÿ è‡ªå®šä¹‰Viewå°±æ˜¯é€šè¿‡ç»§æ‰¿Viewæˆ–è€…Viewçš„å­ç±»ï¼Œå¹¶åœ¨æ–°çš„ç±»é‡Œé¢å®žçŽ°ç›¸åº”çš„å¤„ç†é€»è¾‘ï¼ˆé‡å†™ç›¸åº”çš„æ–¹æ³•ï¼‰ï¼Œä»¥è¾¾åˆ°è‡ªå·±æƒ³è¦çš„æ•ˆæžœã€‚ ç»§æ‰¿ç»“æž„Androidä¸­çš„æ‰€æœ‰UIå…ƒç´ éƒ½æ˜¯Viewçš„å­ç±»ï¼š PSï¼šç”±äºŽæ¶‰åŠçš„ç±»å¤ªå¤šï¼Œå¦‚æžœå°†æ‰€æœ‰æ¶‰åŠåˆ°çš„ç±»å…¨éƒ¨åŠ åˆ°ç±»å›¾é‡Œé¢ï¼Œç±»å›¾å°†ååˆ†å¤§ï¼Œæ‰€ä»¥æ­¤å¤„åªåˆ—å‡ºäº†Viewçš„ç›´æŽ¥å­ç±»ã€‚ è§†å›¾ä½“ç³»ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼Android Viewä½“ç³»å¦‚ä¸‹ï¼š ä»”ç»†è§‚å¯Ÿï¼Œä½ ä¼šå‘çŽ°ï¼ŒAndroid Viewçš„ä½“ç³»ç»“æž„å’Œè®¾è®¡æ¨¡å¼ä¸­çš„ç»„åˆæ¨¡å¼çš„ç»“æž„å¦‚å‡ºä¸€è¾™ï¼š Android Viewä½“ç³»ç»“æž„ä¸­çš„ViewGroupå¯¹åº”äºŽç»„åˆæ¨¡å¼ä¸­æŠ½è±¡æž„ä»¶ï¼ˆComponentå’ŒCompositeï¼‰ï¼ŒAndroid Viewä½“ç³»ç»“æž„ä¸­çš„Viewå¯¹åº”äºŽç»„åˆæ¨¡å¼ä¸­çš„å¶å­æž„ä»¶ï¼ˆLeafï¼‰ï¼š ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰Viewå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¼€å‘è€…å¸¸å¸¸ä¼šå› ä¸ºä¸‹é¢å››ä¸ªåŽŸå› åŽ»è‡ªå®šä¹‰Viewï¼š è®©ç•Œé¢æœ‰ç‰¹å®šçš„æ˜¾ç¤ºé£Žæ ¼ã€æ•ˆæžœ è®©æŽ§ä»¶å…·æœ‰ç‰¹æ®Šçš„äº¤äº’æ–¹å¼ ä¼˜åŒ–å¸ƒå±€ å°è£… è®©ç•Œé¢æœ‰ç‰¹å®šçš„æ˜¾ç¤ºé£Žæ ¼ã€æ•ˆæžœé»˜è®¤æƒ…å†µä¸‹ï¼ŒAndroidç³»ç»Ÿä¸ºå¼€å‘è€…æä¾›äº†å¾ˆå¤šæŽ§ä»¶ï¼Œä½†æœ‰æ—¶ï¼Œè¿™å¹¶ä¸èƒ½æ»¡è¶³å¼€å‘è€…çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œå¼€å‘è€…æƒ³è¦ç”¨ä¸€ä¸ªé¥¼çŠ¶å›¾æ¥å±•ç¤ºä¸€ç»„æ•°æ®ï¼Œè¿™æ—¶å¦‚æžœç”¨ç³»ç»Ÿæä¾›çš„Viewå°±ä¸èƒ½å®žçŽ°äº†ï¼Œåªèƒ½é€šè¿‡è‡ªå®šä¹‰Viewæ¥å®žçŽ°ã€‚ è®©æŽ§ä»¶å…·æœ‰ç‰¹æ®Šçš„äº¤äº’æ–¹å¼é»˜è®¤æƒ…å†µä¸‹ï¼ŒAndroidç³»ç»Ÿä¸ºå¼€å‘è€…æä¾›çš„æŽ§ä»¶éƒ½æœ‰å±žäºŽå®ƒä»¬è‡ªå·±çš„ç‰¹å®šçš„äº¤äº’æ–¹å¼ï¼Œä½†æœ‰æ—¶ï¼ŒæŽ§ä»¶çš„é»˜è®¤äº¤äº’æ–¹å¼å¹¶ä¸èƒ½æ»¡è¶³å¼€å‘è€…çš„éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œå¼€å‘è€…æƒ³è¦ç¼©æ”¾ImageViewä¸­çš„å›¾ç‰‡å†…å®¹ï¼Œè¿™æ—¶å¦‚æžœç”¨ç³»ç»Ÿæä¾›çš„ImageViewå°±ä¸èƒ½å®žçŽ°äº†ï¼Œåªèƒ½é€šè¿‡è‡ªå®šä¹‰ImageViewæ¥å®žçŽ°ã€‚ ä¼˜åŒ–å¸ƒå±€æœ‰æ—¶ï¼Œæœ‰äº›å¸ƒå±€å¦‚æžœç”¨ç³»ç»Ÿæä¾›çš„æŽ§ä»¶å®žçŽ°èµ·æ¥ç›¸å½“å¤æ‚ï¼Œéœ€è¦å„ç§åµŒå¥—ï¼Œè™½ç„¶æœ€ç»ˆä¹Ÿèƒ½å®žçŽ°äº†æƒ³è¦çš„æ•ˆæžœï¼Œä½†æ€§èƒ½æžå·®ï¼Œæ­¤æ—¶å°±å¯ä»¥é€šè¿‡è‡ªå®šä¹‰Viewæ¥å‡å°‘åµŒå¥—å±‚çº§ã€ä¼˜åŒ–å¸ƒå±€ã€‚ å°è£…æœ‰äº›æŽ§ä»¶å¯èƒ½åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œå¦‚å¤§å¤šæ•°Appé‡Œé¢çš„åº•éƒ¨Tabï¼Œåƒè¿™æ ·çš„ç»å¸¸è¢«ç”¨åˆ°çš„æŽ§ä»¶å°±å¯ä»¥é€šè¿‡è‡ªå®šä¹‰Viewå°†å®ƒä»¬å°è£…èµ·æ¥ï¼Œä»¥ä¾¿åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ã€‚ å¦‚ä½•è‡ªå®šä¹‰Viewåœ¨è¯´ã€Œå¦‚ä½•è‡ªå®šä¹‰Viewï¼Ÿã€ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ã€Œè‡ªå®šä¹‰Viewéƒ½åŒ…æ‹¬å“ªäº›å†…å®¹ã€ï¼Ÿ è‡ªå®šä¹‰ViewåŒ…æ‹¬ä¸‰éƒ¨åˆ†å†…å®¹ï¼š å¸ƒå±€ï¼ˆLayoutï¼‰ ç»˜åˆ¶ï¼ˆDrawingï¼‰ è§¦æ‘¸åé¦ˆï¼ˆEvent Handlingï¼‰ å¸ƒå±€é˜¶æ®µï¼šç¡®å®šViewçš„ä½ç½®å’Œå°ºå¯¸ã€‚ ç»˜åˆ¶é˜¶æ®µï¼šç»˜åˆ¶Viewçš„å†…å®¹ã€‚ è§¦æ‘¸åé¦ˆï¼šç¡®å®šç”¨æˆ·ç‚¹å‡»äº†å“ªé‡Œã€‚ å…¶ä¸­å¸ƒå±€é˜¶æ®µåŒ…æ‹¬æµ‹é‡ï¼ˆmeasureï¼‰å’Œå¸ƒå±€ï¼ˆlayoutï¼‰ä¸¤ä¸ªè¿‡ç¨‹ï¼Œå¦å¤–ï¼Œå¸ƒå±€é˜¶æ®µæ˜¯ä¸ºç»˜åˆ¶å’Œè§¦æ‘¸åé¦ˆé˜¶æ®µåšæ”¯æŒçš„ï¼Œå®ƒå¹¶æ²¡æœ‰ä»€ä¹ˆç›´æŽ¥ä½œç”¨ã€‚æ­£æ˜¯å› ä¸ºåœ¨å¸ƒå±€é˜¶æ®µç¡®å®šäº† View çš„å°ºå¯¸å’Œä½ç½®ï¼Œç»˜åˆ¶é˜¶æ®µæ‰çŸ¥é“å¾€å“ªé‡Œç»˜åˆ¶ï¼Œè§¦æ‘¸åé¦ˆé˜¶æ®µæ‰çŸ¥é“ç”¨æˆ·ç‚¹çš„æ˜¯å“ªé‡Œã€‚ åœ¨è‡ªå®šä¹‰Viewå’Œè‡ªå®šä¹‰ViewGroupä¸­ï¼Œå¸ƒå±€å’Œç»˜åˆ¶æµç¨‹è™½ç„¶æ•´ä½“ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†åœ¨ç»†èŠ‚æ–¹é¢ï¼Œè‡ªå®šä¹‰Viewå’Œè‡ªå®šä¹‰ViewGroupè¿˜æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥ï¼ŒæŽ¥ä¸‹æ¥åˆ†ä¸¤ç±»è¿›è¡Œè®¨è®ºï¼š è‡ªå®šä¹‰Viewå¸ƒå±€ã€ç»˜åˆ¶æµç¨‹ è‡ªå®šä¹‰ViewGroupå¸ƒå±€ã€ç»˜åˆ¶æµç¨‹ è‡ªå®šä¹‰Viewå¸ƒå±€ã€ç»˜åˆ¶æµç¨‹ã€Œè‡ªå®šä¹‰ View å¸ƒå±€ã€ç»˜åˆ¶ã€ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š æµ‹é‡é˜¶æ®µï¼ˆmeasureï¼‰ å¸ƒå±€é˜¶æ®µï¼ˆlayoutï¼‰ ç»˜åˆ¶é˜¶æ®µï¼ˆdrawï¼‰ è‡ªå®šä¹‰Viewæµ‹é‡é˜¶æ®µåœ¨Viewçš„æµ‹é‡é˜¶æ®µä¼šæ‰§è¡Œä¸¤ä¸ªæ–¹æ³•ï¼ˆåœ¨æµ‹é‡é˜¶æ®µï¼ŒViewçš„çˆ¶Viewä¼šé€šè¿‡è°ƒç”¨ View çš„measure()æ–¹æ³•å°†çˆ¶Viewå¯¹Viewå°ºå¯¸è¦æ±‚ä¼ è¿›æ¥ã€‚ç´§æŽ¥ç€Viewçš„measure()æ–¹æ³•ä¼šåšä¸€äº›å‰ç½®å’Œä¼˜åŒ–å·¥ä½œï¼Œç„¶åŽè°ƒç”¨Viewçš„onMeasure()æ–¹æ³•ï¼Œå¹¶é€šè¿‡onMeasure()æ–¹æ³•å°†çˆ¶Viewå¯¹Viewçš„å°ºå¯¸è¦æ±‚ä¼ å…¥ã€‚åœ¨è‡ªå®šä¹‰Viewä¸­ï¼Œåªæœ‰éœ€è¦ä¿®æ”¹Viewçš„å°ºå¯¸çš„æ—¶å€™æ‰éœ€è¦é‡å†™onMeasure()æ–¹æ³•ã€‚åœ¨onMeasure()æ–¹æ³•ä¸­æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œç›¸åº”çš„é€»è¾‘å¤„ç†ï¼Œå¹¶åœ¨æœ€åŽé€šè¿‡è°ƒç”¨setMeasuredDimension()æ–¹æ³•å‘ŠçŸ¥çˆ¶Viewè‡ªå·±çš„æœŸæœ›å°ºå¯¸ï¼‰ï¼š measure() onMeasure() measure()ï¼šè°ƒåº¦æ–¹æ³•ï¼Œä¸»è¦åšä¸€äº›å‰ç½®å’Œä¼˜åŒ–å·¥ä½œï¼Œå¹¶æœ€ç»ˆä¼šè°ƒç”¨onMeasure()æ–¹æ³•æ‰§è¡Œå®žé™…çš„æµ‹é‡å·¥ä½œï¼› onMeasure()ï¼šå®žé™…æ‰§è¡Œæµ‹é‡ä»»åŠ¡çš„æ–¹æ³•ï¼Œä¸»è¦ç”¨ä¸Žæµ‹é‡Viewå°ºå¯¸å’Œä½ç½®ã€‚åœ¨è‡ªå®šä¹‰Viewçš„onMeasure()æ–¹æ³•ä¸­ï¼ŒViewæ ¹æ®è‡ªå·±çš„ç‰¹æ€§å’Œçˆ¶Viewå¯¹è‡ªå·±çš„å°ºå¯¸è¦æ±‚ç®—å‡ºè‡ªå·±çš„æœŸæœ›å°ºå¯¸ï¼Œå¹¶é€šè¿‡setMeasuredDimension()æ–¹æ³•å‘ŠçŸ¥çˆ¶Viewè‡ªå·±çš„æœŸæœ›å°ºå¯¸ã€‚ onMeasure()è®¡ç®—ViewæœŸæœ›å°ºå¯¸æ–¹æ³•å¦‚ä¸‹ï¼š å‚è€ƒçˆ¶Viewçš„å¯¹Viewçš„å°ºå¯¸è¦æ±‚å’Œå®žé™…ä¸šåŠ¡éœ€æ±‚è®¡ç®—å‡ºViewçš„æœŸæœ›å°ºå¯¸ï¼š è§£æžwidthMeasureSpec è§£æžheightMeasureSpec å°†ã€Œæ ¹æ®å®žé™…ä¸šåŠ¡éœ€æ±‚è®¡ç®—å‡ºViewçš„å°ºå¯¸ã€æ ¹æ®ã€Œçˆ¶Viewçš„å¯¹Viewçš„å°ºå¯¸è¦æ±‚ã€è¿›è¡Œç›¸åº”çš„ä¿®æ­£å¾—å‡ºViewçš„æœŸæœ›å°ºå¯¸ï¼ˆé€šè¿‡è°ƒç”¨resolveSize()æ–¹æ³•ï¼‰ é€šè¿‡setMeasuredDimension()ä¿å­˜Viewçš„æœŸæœ›å°ºå¯¸ï¼ˆå®žé™…ä¸Šæ˜¯é€šè¿‡setMeasuredDimension()å‘ŠçŸ¥çˆ¶Viewè‡ªå·±çš„æœŸæœ›å°ºå¯¸ï¼‰; æ³¨æ„ï¼š å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™é‡Œçš„æœŸæœ›å°ºå¯¸å°±æ˜¯Viewçš„æœ€ç»ˆå°ºå¯¸ã€‚ä¸è¿‡æœ€ç»ˆViewçš„æœŸæœ›å°ºå¯¸å’Œå®žé™…å°ºå¯¸æ˜¯ä¸æ˜¯ä¸€æ ·è¿˜è¦çœ‹å®ƒçš„çˆ¶Viewä¼šä¸ä¼šåŒæ„ã€‚Viewçš„çˆ¶Viewæœ€ç»ˆä¼šé€šè¿‡è°ƒç”¨Viewçš„layout()æ–¹æ³•å‘ŠçŸ¥Viewçš„å®žé™…å°ºå¯¸ï¼Œå¹¶ä¸”åœ¨layout()æ–¹æ³•ä¸­Viewéœ€è¦å°†è¿™ä¸ªå®žé™…å°ºå¯¸ä¿å­˜ä¸‹æ¥ï¼Œä»¥ä¾¿ç»˜åˆ¶é˜¶æ®µå’Œè§¦æ‘¸åé¦ˆé˜¶æ®µä½¿ç”¨ï¼Œè¿™ä¹Ÿæ˜¯Viewéœ€è¦åœ¨layout()æ–¹æ³•ä¸­ä¿å­˜è‡ªå·±å®žé™…å°ºå¯¸çš„åŽŸå› â€”â€”å› ä¸ºç»˜åˆ¶é˜¶æ®µå’Œè§¦æ‘¸åé¦ˆé˜¶æ®µè¦ä½¿ç”¨å•Šï¼ è‡ªå®šä¹‰Viewå¸ƒå±€é˜¶æ®µåœ¨Viewçš„å¸ƒå±€é˜¶æ®µä¼šæ‰§è¡Œä¸¤ä¸ªæ–¹æ³•ï¼ˆåœ¨å¸ƒå±€é˜¶æ®µï¼ŒViewçš„çˆ¶Viewä¼šé€šè¿‡è°ƒç”¨Viewçš„layout()æ–¹æ³•å°†Viewçš„å®žé™…å°ºå¯¸ï¼ˆçˆ¶Viewæ ¹æ®Viewçš„æœŸæœ›å°ºå¯¸ç¡®å®šçš„Viewçš„å®žé™…å°ºå¯¸ï¼‰ä¼ ç»™Viewï¼ŒViewéœ€è¦åœ¨layout()æ–¹æ³•ä¸­å°†è‡ªå·±çš„å®žé™…å°ºå¯¸ä¿å­˜ï¼ˆé€šè¿‡è°ƒç”¨Viewçš„setFrame()æ–¹æ³•ä¿å­˜ï¼Œåœ¨setFrame()æ–¹æ³•ä¸­ï¼Œåˆä¼šé€šè¿‡è°ƒç”¨onSizeChanged()æ–¹æ³•å‘ŠçŸ¥å¼€å‘è€…Viewçš„å°ºå¯¸ä¿®æ”¹äº†ï¼‰ä»¥ä¾¿åœ¨ç»˜åˆ¶å’Œè§¦æ‘¸åé¦ˆé˜¶æ®µä½¿ç”¨ã€‚ä¿å­˜Viewçš„å®žé™…å°ºå¯¸ä¹‹åŽï¼ŒViewçš„layout()æ–¹æ³•åˆä¼šè°ƒç”¨Viewçš„onLayout()æ–¹æ³•ï¼Œä¸è¿‡Viewçš„onLayout()æ–¹æ³•æ˜¯ä¸€ä¸ªç©ºå®žçŽ°ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å­Viewï¼‰ï¼š layout() onLayout() layout()ï¼šä¿å­˜Viewçš„å®žé™…å°ºå¯¸ã€‚è°ƒç”¨setFrame()æ–¹æ³•ä¿å­˜Viewçš„å®žé™…å°ºå¯¸ï¼Œè°ƒç”¨onSizeChanged()é€šçŸ¥å¼€å‘è€…Viewçš„å°ºå¯¸æ›´æ”¹äº†ï¼Œå¹¶æœ€ç»ˆä¼šè°ƒç”¨onLayout()æ–¹æ³•è®©å­Viewå¸ƒå±€ï¼ˆå¦‚æžœæœ‰å­Viewçš„è¯ã€‚å› ä¸ºè‡ªå®šä¹‰Viewä¸­æ²¡æœ‰å­Viewï¼Œæ‰€ä»¥è‡ªå®šä¹‰Viewçš„onLayout()æ–¹æ³•æ˜¯ä¸€ä¸ªç©ºå®žçŽ°ï¼‰ï¼› onLayout()ï¼šç©ºå®žçŽ°ï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼Œå› ä¸ºå®ƒæ²¡æœ‰å­Viewã€‚å¦‚æžœæ˜¯ViewGroupçš„è¯ï¼Œåœ¨onLayout()æ–¹æ³•ä¸­éœ€è¦è°ƒç”¨å­Viewçš„layout()æ–¹æ³•ï¼Œå°†å­Viewçš„å®žé™…å°ºå¯¸ä¼ ç»™å®ƒä»¬ï¼Œè®©å­Viewä¿å­˜è‡ªå·±çš„å®žé™…å°ºå¯¸ã€‚å› æ­¤ï¼Œåœ¨è‡ªå®šä¹‰Viewä¸­ï¼Œä¸éœ€é‡å†™æ­¤æ–¹æ³•ï¼Œåœ¨è‡ªå®šä¹‰ViewGroupä¸­ï¼Œéœ€é‡å†™æ­¤æ–¹æ³•ã€‚ æ³¨æ„ï¼š layout()&amp;onLayout()å¹¶ä¸æ˜¯ã€Œè°ƒåº¦ã€ä¸Žã€Œå®žé™…åšäº‹ã€çš„å…³ç³»ï¼Œlayout()å’ŒonLayout()å‡åšäº‹ï¼Œåªä¸è¿‡èŒè´£ä¸åŒã€‚ è‡ªå®šä¹‰Viewç»˜åˆ¶é˜¶æ®µåœ¨Viewçš„ç»˜åˆ¶é˜¶æ®µä¼šæ‰§è¡Œä¸€ä¸ªæ–¹æ³•â€”â€”draw()ï¼Œdraw()æ˜¯ç»˜åˆ¶é˜¶æ®µçš„æ€»è°ƒåº¦æ–¹æ³•ï¼Œåœ¨å…¶ä¸­ä¼šè°ƒç”¨ç»˜åˆ¶èƒŒæ™¯çš„æ–¹æ³•drawBackground()ã€ç»˜åˆ¶ä¸»ä½“çš„æ–¹æ³•onDraw()ã€ç»˜åˆ¶å­Viewçš„æ–¹æ³•dispatchDraw()å’Œç»˜åˆ¶å‰æ™¯çš„æ–¹æ³•onDrawForeground()ã€‚ draw()ï¼šç»˜åˆ¶é˜¶æ®µçš„æ€»è°ƒåº¦æ–¹æ³•ï¼Œåœ¨å…¶ä¸­ä¼šè°ƒç”¨ç»˜åˆ¶èƒŒæ™¯çš„æ–¹æ³•drawBackground()ã€ç»˜åˆ¶ä¸»ä½“çš„æ–¹æ³•onDraw()ã€ç»˜åˆ¶å­Viewçš„æ–¹æ³•dispatchDraw()å’Œç»˜åˆ¶å‰æ™¯çš„æ–¹æ³•onDrawForeground()ï¼› drawBackground()ï¼šç»˜åˆ¶èƒŒæ™¯çš„æ–¹æ³•ï¼Œä¸èƒ½é‡å†™ï¼Œåªèƒ½é€šè¿‡xmlå¸ƒå±€æ–‡ä»¶æˆ–è€…setBackground()æ¥è®¾ç½®æˆ–ä¿®æ”¹èƒŒæ™¯ï¼› onDraw()ï¼šç»˜åˆ¶Viewä¸»ä½“å†…å®¹çš„æ–¹æ³•ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨è‡ªå®šä¹‰Viewçš„æ—¶å€™ï¼Œåªç”¨å®žçŽ°è¯¥æ–¹æ³•å³å¯ï¼› dispatchDraw()ï¼šç»˜åˆ¶å­Viewçš„æ–¹æ³•ã€‚åŒonLayout()æ–¹æ³•ä¸€æ ·ï¼Œåœ¨è‡ªå®šä¹‰Viewä¸­å®ƒæ˜¯ç©ºå®žçŽ°ï¼Œä»€ä¹ˆä¹Ÿä¸åšã€‚ä½†åœ¨è‡ªå®šä¹‰ViewGroupä¸­ï¼Œå®ƒä¼šè°ƒç”¨ViewGroup.drawChild()æ–¹æ³•ï¼Œåœ¨ViewGroup.drawChild()æ–¹æ³•ä¸­åˆä¼šè°ƒç”¨æ¯ä¸€ä¸ªå­Viewçš„View.draw()è®©å­Viewè¿›è¡Œè‡ªæˆ‘ç»˜åˆ¶ï¼› onDrawForeground()ï¼šç»˜åˆ¶Viewå‰æ™¯çš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæƒ³è¦åœ¨ä¸»ä½“å†…å®¹ä¹‹ä¸Šç»˜åˆ¶ä¸œè¥¿çš„æ—¶å€™å°±å¯ä»¥åœ¨è¯¥æ–¹æ³•ä¸­å®žçŽ°ã€‚ æ³¨æ„ï¼š Androidé‡Œé¢çš„ç»˜åˆ¶éƒ½æ˜¯æŒ‰é¡ºåºçš„ï¼Œå…ˆç»˜åˆ¶çš„å†…å®¹ä¼šè¢«åŽç»˜åˆ¶çš„ç›–ä½ã€‚å¦‚ï¼Œä½ åœ¨é‡å çš„ä½ç½®ã€Œå…ˆç”»åœ†å†ç”»æ–¹ã€å’Œã€Œå…ˆç”»æ–¹å†ç”»åœ†ã€æ‰€å‘ˆçŽ°å‡ºæ¥çš„ç»“æžœæ˜¯ä¸åŒçš„ï¼Œå…·ä½“è¡¨çŽ°ä¸ºä¸‹è¡¨ï¼š è‡ªå®šä¹‰Viewå¸ƒå±€ã€ç»˜åˆ¶æµç¨‹æ—¶åºå›¾ è‡ªå®šä¹‰ViewGroupå¸ƒå±€ã€ç»˜åˆ¶æµç¨‹ã€Œè‡ªå®šä¹‰ViewGroupå¸ƒå±€ã€ç»˜åˆ¶ã€ä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼š æµ‹é‡é˜¶æ®µï¼ˆmeasureï¼‰ å¸ƒå±€é˜¶æ®µï¼ˆlayoutï¼‰ ç»˜åˆ¶é˜¶æ®µï¼ˆdrawï¼‰ è‡ªå®šä¹‰ViewGroupæµ‹é‡é˜¶æ®µåŒè‡ªå®šä¹‰Viewä¸€æ ·ï¼Œåœ¨è‡ªå®šä¹‰ViewGroupçš„æµ‹é‡é˜¶æ®µä¼šæ‰§è¡Œä¸¤ä¸ªæ–¹æ³•ï¼š measure() onMeasure() measure()ï¼šè°ƒåº¦æ–¹æ³•ï¼Œä¸»è¦åšä¸€äº›å‰ç½®å’Œä¼˜åŒ–å·¥ä½œï¼Œå¹¶æœ€ç»ˆä¼šè°ƒç”¨onMeasure()æ–¹æ³•æ‰§è¡Œå®žé™…çš„æµ‹é‡å·¥ä½œï¼› onMeasure() ï¼šå®žé™…æ‰§è¡Œæµ‹é‡ä»»åŠ¡çš„æ–¹æ³•ï¼Œä¸Žè‡ªå®šä¹‰Viewä¸åŒï¼Œåœ¨è‡ªå®šä¹‰ViewGroupçš„ onMeasure() æ–¹æ³•ä¸­ï¼ŒViewGroupä¼šé€’å½’è°ƒç”¨å­Viewçš„measure()æ–¹æ³•ï¼Œå¹¶é€šè¿‡measure()å°†ViewGroupå¯¹å­Viewçš„å°ºå¯¸è¦æ±‚ï¼ˆViewGroupä¼šæ ¹æ®å¼€å‘è€…å¯¹å­Viewçš„å°ºå¯¸è¦æ±‚ã€è‡ªå·±çš„çˆ¶Viewï¼ˆViewGroupçš„çˆ¶Viewï¼‰ å¯¹è‡ªå·±çš„å°ºå¯¸è¦æ±‚å’Œè‡ªå·±çš„å¯ç”¨ç©ºé—´è®¡ç®—å‡ºè‡ªå·±å¯¹å­Viewçš„å°ºå¯¸è¦æ±‚ï¼‰ä¼ å…¥ï¼Œå¯¹å­Viewè¿›è¡Œæµ‹é‡ï¼Œå¹¶æŠŠæµ‹é‡ç»“æžœä¸´æ—¶ä¿å­˜ï¼Œä»¥ä¾¿åœ¨å¸ƒå±€é˜¶æ®µä½¿ç”¨ã€‚æµ‹é‡å‡ºå­Viewçš„å®žé™…å°ºå¯¸ä¹‹åŽï¼ŒViewGroupä¼šæ ¹æ®å­Viewçš„å®žé™…å°ºå¯¸è®¡ç®—å‡ºè‡ªå·±çš„æœŸæœ›å°ºå¯¸ï¼Œå¹¶é€šè¿‡setMeasuredDimension()æ–¹æ³•å‘ŠçŸ¥çˆ¶Viewï¼ˆViewGroup çš„çˆ¶ Viewï¼‰è‡ªå·±çš„æœŸæœ›å°ºå¯¸ã€‚ å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š è¿è¡Œå‰ï¼Œå¼€å‘è€…åœ¨xmlä¸­å†™å…¥å¯¹ViewGroupå’ŒViewGroupå­Viewçš„å°ºå¯¸è¦æ±‚layout_xxx ViewGroupåœ¨è‡ªå·±çš„onMeasure()æ–¹æ³•ä¸­ï¼Œæ ¹æ®å¼€å‘è€…åœ¨xmlä¸­å†™çš„å¯¹ViewGroupå­Viewçš„å°ºå¯¸è¦æ±‚ã€è‡ªå·±çš„çˆ¶Viewï¼ˆViewGroupçš„çˆ¶Viewï¼‰ å¯¹è‡ªå·±çš„å°ºå¯¸è¦æ±‚å’Œè‡ªå·±çš„å¯ç”¨ç©ºé—´è®¡ç®—å‡ºè‡ªå·±å¯¹å­Viewçš„å°ºå¯¸è¦æ±‚ï¼Œå¹¶è°ƒç”¨æ¯ä¸ªå­Viewçš„measure()å°†ViewGroupå¯¹å­Viewçš„å°ºå¯¸è¦æ±‚ä¼ å…¥ï¼Œæµ‹é‡å­Viewå°ºå¯¸ ViewGroupåœ¨å­Viewè®¡ç®—å‡ºæœŸæœ›å°ºå¯¸ä¹‹åŽï¼ˆåœ¨ViewGroupçš„onMeasure()æ–¹æ³•ä¸­ï¼ŒViewGroupé€’å½’è°ƒç”¨æ¯ä¸ªå­Viewçš„measure()æ–¹æ³•ï¼Œå­Viewåœ¨è‡ªå·±çš„onMeasure()æ–¹æ³•ä¸­ä¼šé€šè¿‡è°ƒç”¨setMeasuredDimension()æ–¹æ³•å‘ŠçŸ¥çˆ¶Viewï¼ˆViewGroupï¼‰è‡ªå·±çš„æœŸæœ›å°ºå¯¸ï¼‰ï¼Œå¾—å‡ºå­Viewçš„å®žé™…å°ºå¯¸å’Œä½ç½®ï¼Œå¹¶æš‚æ—¶ä¿å­˜è®¡ç®—ç»“æžœï¼Œä»¥ä¾¿å¸ƒå±€é˜¶æ®µä½¿ç”¨ ViewGroupæ ¹æ®å­Viewçš„å°ºå¯¸å’Œä½ç½®è®¡ç®—è‡ªå·±çš„æœŸæœ›å°ºå¯¸ï¼Œå¹¶é€šè¿‡setMeasuredDimension()æ–¹æ³•å‘ŠçŸ¥çˆ¶Viewè‡ªå·±çš„æœŸæœ›å°ºå¯¸ã€‚å¦‚æžœæƒ³è¦åšçš„æ›´å¥½ï¼Œå¯ä»¥åœ¨ã€ŒViewGroupæ ¹æ®å­Viewçš„å°ºå¯¸å’Œä½ç½®è®¡ç®—å‡ºè‡ªå·±çš„æœŸæœ›å°ºå¯¸ã€ä¹‹åŽï¼Œå†ç»“åˆViewGroupçš„çˆ¶Viewå¯¹ViewGroupçš„å°ºå¯¸è¦æ±‚è¿›è¡Œä¿®æ­£ï¼ˆé€šè¿‡resolveSize()æ–¹æ³•ï¼‰ï¼Œè¿™æ ·å¾—å‡ºçš„ViewGroupçš„æœŸæœ›å°ºå¯¸æ›´ç¬¦åˆViewGroupçš„çˆ¶Viewå¯¹ViewGroupçš„å°ºå¯¸è¦æ±‚ è‡ªå®šä¹‰ViewGroupå¸ƒå±€é˜¶æ®µåŒè‡ªå®šä¹‰ View ä¸€æ ·ï¼Œåœ¨è‡ªå®šä¹‰ ViewGroup çš„å¸ƒå±€é˜¶æ®µä¼šæ‰§è¡Œä¸¤ä¸ªæ–¹æ³•ï¼š layout() onLayout() layout()ï¼šä¿å­˜ViewGroupçš„å®žé™…å°ºå¯¸ã€‚è°ƒç”¨setFrame()æ–¹æ³•ä¿å­˜ViewGroupçš„å®žé™…å°ºå¯¸ï¼Œè°ƒç”¨onSizeChanged()é€šçŸ¥å¼€å‘è€…ViewGroupçš„å°ºå¯¸æ›´æ”¹äº†ï¼Œå¹¶æœ€ç»ˆä¼šè°ƒç”¨onLayout()æ–¹æ³•è®©å­Viewå¸ƒå±€ï¼› onLayout()ï¼šViewGroupä¼šé€’å½’è°ƒç”¨æ¯ä¸ªå­Viewçš„layout()æ–¹æ³•ï¼ŒæŠŠæµ‹é‡é˜¶æ®µè®¡ç®—å‡ºçš„å­Viewçš„å®žé™…å°ºå¯¸å’Œä½ç½®ä¼ ç»™å­Viewï¼Œè®©å­Viewä¿å­˜è‡ªå·±çš„å®žé™…å°ºå¯¸å’Œä½ç½®ã€‚ è‡ªå®šä¹‰ViewGroupç»˜åˆ¶é˜¶æ®µåŒè‡ªå®šä¹‰Viewä¸€æ ·ï¼Œåœ¨è‡ªå®šä¹‰ViewGroupçš„ç»˜åˆ¶é˜¶æ®µä¼šæ‰§è¡Œä¸€ä¸ªæ–¹æ³•â€”â€”draw()ã€‚draw()æ˜¯ç»˜åˆ¶é˜¶æ®µçš„æ€»è°ƒåº¦æ–¹æ³•ï¼Œåœ¨å…¶ä¸­ä¼šè°ƒç”¨ç»˜åˆ¶èƒŒæ™¯çš„æ–¹æ³• drawBackground()ã€ç»˜åˆ¶ä¸»ä½“çš„æ–¹æ³•onDraw()ã€ç»˜åˆ¶å­Viewçš„æ–¹æ³• dispatchDraw()å’Œç»˜åˆ¶å‰æ™¯çš„æ–¹æ³•onDrawForeground()ï¼š draw()ï¼šç»˜åˆ¶é˜¶æ®µçš„æ€»è°ƒåº¦æ–¹æ³•ï¼Œåœ¨å…¶ä¸­ä¼šè°ƒç”¨ç»˜åˆ¶èƒŒæ™¯çš„æ–¹æ³•drawBackground()ã€ç»˜åˆ¶ä¸»ä½“çš„æ–¹æ³•onDraw()ã€ç»˜åˆ¶å­Viewçš„æ–¹æ³•dispatchDraw()å’Œç»˜åˆ¶å‰æ™¯çš„æ–¹æ³•onDrawForeground()ï¼› åœ¨ViewGroupä¸­ï¼Œä½ ä¹Ÿå¯ä»¥é‡å†™ç»˜åˆ¶ä¸»ä½“çš„æ–¹æ³•onDraw()ã€ç»˜åˆ¶å­Viewçš„æ–¹æ³•dispatchDraw()å’Œç»˜åˆ¶å‰æ™¯çš„æ–¹æ³•onDrawForeground()ã€‚ä½†å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ViewGroupæ˜¯ä¸éœ€è¦é‡å†™ä»»ä½•ç»˜åˆ¶æ–¹æ³•çš„ã€‚å› ä¸ºé€šå¸¸æƒ…å†µä¸‹ï¼ŒViewGroupçš„è§’è‰²æ˜¯å®¹å™¨ï¼Œä¸€ä¸ªé€æ˜Žçš„å®¹å™¨ï¼Œå®ƒåªæ˜¯ç”¨æ¥ç››æ”¾å­Viewçš„ã€‚ è‡ªå®šä¹‰ViewGroupå¸ƒå±€ã€ç»˜åˆ¶æµç¨‹æ—¶åºå›¾ è‡ªå®šä¹‰Viewæ­¥éª¤ è‡ªå®šä¹‰å±žæ€§çš„å£°æ˜Žä¸ŽèŽ·å– é‡å†™æµ‹é‡é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonMeasure()ï¼‰ é‡å†™å¸ƒå±€é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonLayout()ï¼ˆä»…ViewGroupéœ€è¦é‡å†™ï¼‰ï¼‰ é‡å†™ç»˜åˆ¶é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonDraw()ç»˜åˆ¶ä¸»ä½“ã€dispatchDraw()ç»˜åˆ¶å­Viewå’ŒonDrawForeground() ç»˜åˆ¶å‰æ™¯ï¼‰ onTouchEvent() onInterceptTouchEvent()ï¼ˆä»…ViewGroupæœ‰æ­¤æ–¹æ³•ï¼‰ å®žæˆ˜æ¼”ç»ƒè‡ªå®šä¹‰Viewè‡ªå®šä¹‰Viewçš„ç»˜åˆ¶å†…å®¹ è‡ªå®šä¹‰Viewï¼Œå®ƒçš„å†…å®¹æ˜¯ã€Œä¸‰ä¸ªåŠå¾„ä¸åŒã€é¢œè‰²ä¸åŒçš„åŒå¿ƒåœ†ã€ï¼Œæ•ˆæžœå›¾å¦‚ä¸‹ï¼š è‡ªå®šä¹‰å±žæ€§çš„å£°æ˜Žä¸ŽèŽ·å– 1234567891011//åœ¨ xml ä¸­è‡ªå®šä¹‰ View å±žæ€§&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;resources&gt; &lt;!--CircleView--&gt; &lt;declare-styleable name="CircleView"&gt; &lt;attr name="circle_radius" format="dimension" /&gt; &lt;attr name="outer_circle_color" format="reference|color" /&gt; &lt;attr name="middle_circle_color" format="reference|color" /&gt; &lt;attr name="inner_circle_color" format="reference|color" /&gt; &lt;/declare-styleable&gt;&lt;/resources&gt; 1234567//åœ¨ View æž„é€ å‡½æ•°ä¸­èŽ·å–è‡ªå®šä¹‰ View å±žæ€§TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.CircleView);mRadius = typedArray.getDimension(R.styleable.CircleView_circle_radius, getResources().getDimension(R.dimen.avatar_size));mOuterCircleColor = typedArray.getColor(R.styleable.CircleView_outer_circle_color, getResources().getColor(R.color.purple_500));mMiddleCircleColor = typedArray.getColor(R.styleable.CircleView_middle_circle_color, getResources().getColor(R.color.purple_500));mInnerCircleColor = typedArray.getColor(R.styleable.CircleView_inner_circle_color, getResources().getColor(R.color.purple_500));typedArray.recycle(); é‡å†™æµ‹é‡é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonMeasure()ï¼‰ ç”±äºŽä¸éœ€è¦è‡ªå®šä¹‰Viewçš„å°ºå¯¸ï¼Œæ‰€ä»¥ï¼Œä¸ç”¨é‡å†™è¯¥æ–¹æ³•ã€‚ é‡å†™å¸ƒå±€é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonLayout()ï¼ˆä»… ViewGroup éœ€è¦é‡å†™ï¼‰ï¼‰ ç”±äºŽæ²¡æœ‰å­Viewéœ€è¦å¸ƒå±€ï¼Œæ‰€ä»¥ï¼Œä¸ç”¨é‡å†™è¯¥æ–¹æ³•ã€‚ é‡å†™ç»˜åˆ¶é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonDraw()ç»˜åˆ¶ä¸»ä½“ã€dispatchDraw()ç»˜åˆ¶å­Viewå’ŒonDrawForeground()ç»˜åˆ¶å‰æ™¯ï¼‰ 12345678910//é‡å†™ onDraw() æ–¹æ³•ï¼Œè‡ªå®šä¹‰ View å†…å®¹@Overrideprotected void onDraw(Canvas canvas) &#123; mPaint.setColor(mOuterCircleColor); canvas.drawCircle(mRadius, mRadius, mRadius, mPaint); mPaint.setColor(mMiddleCircleColor); canvas.drawCircle(mRadius, mRadius, mRadius * 2/3, mPaint); mPaint.setColor(mInnerCircleColor); canvas.drawCircle(mRadius, mRadius, mRadius/3, mPaint);&#125; onTouchEvent() ç”±äºŽViewä¸éœ€è¦å’Œç”¨æˆ·äº¤äº’ï¼Œæ‰€ä»¥ï¼Œä¸ç”¨é‡å†™è¯¥æ–¹æ³•ã€‚ onInterceptTouchEvent()ï¼ˆä»…ViewGroupæœ‰æ­¤æ–¹æ³•ï¼‰ ViewGroupçš„æ–¹æ³•ã€‚ æœ€ç»ˆæ•ˆæžœå¦‚ä¸‹ï¼š æ­¤æ—¶ï¼Œå³ä½¿ä½ åœ¨xmlä¸­å°†CircleViewçš„å®½ã€é«˜å£°æ˜Žä¸ºã€Œmatch_parentã€ï¼Œä½ ä¼šå‘çŽ°æœ€ç»ˆçš„æ˜¾ç¤ºæ•ˆæžœéƒ½æ˜¯ä¸€æ ·çš„ã€‚ ä¸»è¦åŽŸå› æ˜¯ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒViewçš„onMeasure()æ–¹æ³•åœ¨é€šè¿‡setMeasuredDimension()å‘ŠçŸ¥çˆ¶Viewè‡ªå·±çš„æœŸæœ›å°ºå¯¸æ—¶ï¼Œä¼šè°ƒç”¨getDefaultSize()æ–¹æ³•ã€‚åœ¨getDefaultSize()æ–¹æ³•ä¸­ï¼Œåˆä¼šè°ƒç”¨getSuggestedMinimumWidth()å’ŒgetSuggestedMinimumHeight()èŽ·å–å»ºè®®çš„æœ€å°å®½åº¦å’Œæœ€å°é«˜åº¦ï¼Œå¹¶æ ¹æ®æœ€å°å°ºå¯¸å’Œçˆ¶Viewå¯¹è‡ªå·±çš„å°ºå¯¸è¦æ±‚è¿›è¡Œä¿®æ­£ã€‚ æœ€ä¸»è¦çš„æ˜¯ï¼Œåœ¨getDefaultSize()æ–¹æ³•ä¸­ä¿®æ­£çš„æ—¶å€™ï¼Œä¼šå°†MeasureSpec.AT_MOSTå’ŒMeasureSpec.EXACTLYä¸€è§†åŒä»ï¼Œç›´æŽ¥è¿”å›žçˆ¶Viewå¯¹Viewçš„å°ºå¯¸è¦æ±‚ï¼š 12345678910111213141516171819202122232425262728293031323334//1. é»˜è®¤ onMeasure çš„å¤„ç†protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec), getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));&#125;//2. getSuggestedMinimumWidth()protected int getSuggestedMinimumWidth() &#123; return (mBackground == null) ? mMinWidth : max(mMinWidth, mBackground.getMinimumWidth());&#125;//3. getSuggestedMinimumHeight()protected int getSuggestedMinimumHeight() &#123; return (mBackground == null) ? mMinHeight : max(mMinHeight, mBackground.getMinimumHeight());&#125;//4. getDefaultSize()public static int getDefaultSize(int size, int measureSpec) &#123; int result = size; int specMode = MeasureSpec.getMode(measureSpec); int specSize = MeasureSpec.getSize(measureSpec); switch (specMode) &#123; case MeasureSpec.UNSPECIFIED: result = size; break; case MeasureSpec.AT_MOST: case MeasureSpec.EXACTLY: //MeasureSpec.AT_MOSTã€MeasureSpec.EXACTLY ä¸€è§†åŒä» result = specSize; break; &#125; return result;&#125; æ­£æ˜¯å› ä¸ºåœ¨getDefaultSize()æ–¹æ³•ä¸­å¤„ç†çš„æ—¶å€™ï¼Œå°†MeasureSpec.AT_MOSTå’ŒMeasureSpec.EXACTLYä¸€è§†åŒä»ï¼Œæ‰€ä»¥æ‰æœ‰äº†ä¸Šé¢ã€Œåœ¨xmlä¸­åº”ç”¨CircleViewçš„æ—¶å€™ï¼Œæ— è®ºå°†CircleViewçš„å°ºå¯¸è®¾ç½®ä¸ºmatch_parentè¿˜æ˜¯wrap_contentæ•ˆæžœéƒ½ä¸€æ ·ã€çš„çŽ°è±¡ã€‚ å…·ä½“åˆ†æžå¦‚ä¸‹ï¼š æ³¨ï¼š ä¸Šè¡¨ä¸­ï¼Œã€ŒViewçš„çˆ¶Viewå¯¹Viewçš„å°ºå¯¸è¦æ±‚ã€æ˜¯Viewçš„çˆ¶Viewæ ¹æ®ã€Œå¼€å‘è€…å¯¹å­Viewçš„å°ºå¯¸è¦æ±‚ã€ã€ã€Œè‡ªå·±çš„çˆ¶Viewï¼ˆViewçš„çˆ¶Viewçš„çˆ¶Viewï¼‰ å¯¹è‡ªå·±çš„å°ºå¯¸è¦æ±‚ã€å’Œã€Œè‡ªå·±çš„å¯ç”¨ç©ºé—´ã€è®¡ç®—å‡ºè‡ªå·±å¯¹å­Viewçš„å°ºå¯¸è¦æ±‚ã€‚ å¦å¤–ï¼Œç”±æ‰§è¡Œç»“æžœå¯çŸ¥ï¼Œä¸Šè¡¨ä¸­çš„specSizeå®žé™…ä¸Šç­‰äºŽViewçš„å°ºå¯¸ï¼š 12019-08-13 17:28:26.855 16024-16024/com.smart.a03_view_custom_view_example E/TAG: Widthï¼ˆgetWidth()ï¼‰: 1080 Heightï¼ˆgetHeight()ï¼‰: 1584 è‡ªå®šä¹‰Viewçš„å°ºå¯¸å’Œç»˜åˆ¶å†…å®¹ è‡ªå®šä¹‰Viewï¼Œå®ƒçš„å†…å®¹æ˜¯ã€Œä¸‰ä¸ªåŠå¾„ä¸åŒã€é¢œè‰²ä¸åŒçš„åŒå¿ƒåœ†ã€ï¼Œæ•ˆæžœå›¾å¦‚ä¸‹ï¼š è‡ªå®šä¹‰å±žæ€§çš„å£°æ˜Žä¸ŽèŽ·å– 1234567891011//åœ¨ xml ä¸­è‡ªå®šä¹‰ View å±žæ€§&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;resources&gt; &lt;!--CircleView--&gt; &lt;declare-styleable name="CircleView"&gt; &lt;attr name="circle_radius" format="dimension" /&gt; &lt;attr name="outer_circle_color" format="reference|color" /&gt; &lt;attr name="middle_circle_color" format="reference|color" /&gt; &lt;attr name="inner_circle_color" format="reference|color" /&gt; &lt;/declare-styleable&gt;&lt;/resources&gt; 1234567//åœ¨ View æž„é€ å‡½æ•°ä¸­èŽ·å–è‡ªå®šä¹‰ View å±žæ€§TypedArray typedArray = context.obtainStyledAttributes(attrs, R.styleable.CircleView);mRadius = typedArray.getDimension(R.styleable.CircleView_circle_radius, getResources().getDimension(R.dimen.avatar_size));mOuterCircleColor = typedArray.getColor(R.styleable.CircleView_outer_circle_color, getResources().getColor(R.color.purple_500));mMiddleCircleColor = typedArray.getColor(R.styleable.CircleView_middle_circle_color, getResources().getColor(R.color.purple_500));mInnerCircleColor = typedArray.getColor(R.styleable.CircleView_inner_circle_color, getResources().getColor(R.color.purple_500));typedArray.recycle(); é‡å†™æµ‹é‡é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonMeasure()ï¼‰ 1234567891011121314//onMeasure()@Overrideprotected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; //2.1 æ ¹æ® View ç‰¹ç‚¹æˆ–ä¸šåŠ¡éœ€æ±‚è®¡ç®—å‡º View çš„å°ºå¯¸ mWidth = (int)(mRadius * 2); mHeight = (int)(mRadius * 2); //2.2 é€šè¿‡ resolveSize() æ–¹æ³•ä¿®æ­£ç»“æžœ mWidth = resolveSize(mWidth, widthMeasureSpec); mHeight = resolveSize(mHeight, heightMeasureSpec); //2.3 é€šè¿‡ setMeasuredDimension() ä¿å­˜ View çš„æœŸæœ›å°ºå¯¸ï¼ˆé€šè¿‡ setMeasuredDimension() å‘ŠçŸ¥çˆ¶ View çš„æœŸæœ›å°ºå¯¸ï¼‰ setMeasuredDimension(mWidth, mHeight);&#125; é‡å†™å¸ƒå±€é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonLayout()ï¼ˆä»…ViewGroupéœ€è¦é‡å†™ï¼‰ï¼‰ ç”±äºŽæ²¡æœ‰å­Viewéœ€è¦å¸ƒå±€ï¼Œæ‰€ä»¥ï¼Œä¸ç”¨é‡å†™è¯¥æ–¹æ³•ã€‚ é‡å†™ç»˜åˆ¶é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonDraw()ç»˜åˆ¶ä¸»ä½“ã€dispatchDraw()ç»˜åˆ¶å­Viewå’ŒonDrawForeground()ç»˜åˆ¶å‰æ™¯ï¼‰ 12345678910// é‡å†™ onDraw() æ–¹æ³•ï¼Œè‡ªå®šä¹‰ View å†…å®¹@Overrideprotected void onDraw(Canvas canvas) &#123; mPaint.setColor(mOuterCircleColor); canvas.drawCircle(mRadius, mRadius, mRadius, mPaint); mPaint.setColor(mMiddleCircleColor); canvas.drawCircle(mRadius, mRadius, mRadius * 2/3, mPaint); mPaint.setColor(mInnerCircleColor); canvas.drawCircle(mRadius, mRadius, mRadius/3, mPaint);&#125; onTouchEvent() ç”±äºŽViewä¸éœ€è¦å’Œç”¨æˆ·äº¤äº’ï¼Œæ‰€ä»¥ï¼Œä¸ç”¨é‡å†™è¯¥æ–¹æ³•ã€‚ onInterceptTouchEvent()ï¼ˆä»… ViewGroup æœ‰æ­¤æ–¹æ³•ï¼‰ ViewGroupçš„æ–¹æ³•ã€‚ æœ€ç»ˆæ•ˆæžœå¦‚ä¸‹ï¼š å½“åœ¨xmlä¸­å°†MeasuredCircleViewçš„å®½ã€é«˜å£°æ˜Žä¸ºã€Œmatch_parentã€æ—¶ï¼Œæ˜¾ç¤ºæ•ˆæžœè·ŸCircleViewæ˜¾ç¤ºæ•ˆæžœä¸€æ ·ã€‚ ä½†æ˜¯ï¼Œå½“åœ¨xmlä¸­å°†MeasuredCircleViewçš„å®½ã€é«˜å£°æ˜Žä¸ºã€Œwrap_contentã€æ—¶ï¼Œæ˜¾ç¤ºæ•ˆæžœæ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š å…¶å®žï¼Œä¹Ÿå¾ˆå¥½ç†è§£ï¼š è‡ªå®šä¹‰ViewGroupè‡ªå®šä¹‰ViewGroupï¼Œæ ‡ç­¾å¸ƒå±€ï¼Œæ•ˆæžœå›¾å¦‚ä¸‹ï¼š æ— è®ºæ˜¯è‡ªå®šä¹‰Viewè¿˜æ˜¯è‡ªå®šä¹‰ViewGroupï¼Œå¤§è‡´çš„æµç¨‹éƒ½æ˜¯ä¸€æ ·çš„ï¼š è‡ªå®šä¹‰å±žæ€§çš„å£°æ˜Žä¸ŽèŽ·å– é‡å†™æµ‹é‡é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonMeasure()ï¼‰ é‡å†™å¸ƒå±€é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonLayout()ï¼ˆä»… ViewGroup éœ€è¦é‡å†™ï¼‰ï¼‰ é‡å†™ç»˜åˆ¶é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonDraw() ç»˜åˆ¶ä¸»ä½“ã€dispatchDraw() ç»˜åˆ¶å­ View å’Œ onDrawForeground() ç»˜åˆ¶å‰æ™¯ï¼‰ onTouchEvent() onInterceptTouchEvent()ï¼ˆä»… ViewGroup æœ‰æ­¤æ–¹æ³•ï¼‰ åªä¸è¿‡ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒViewGroupä¸éœ€è¦ã€Œè‡ªå®šä¹‰å±žæ€§ã€å’Œã€Œé‡å†™ç»˜åˆ¶é˜¶æ®µç›¸å…³æ–¹æ³•ã€ï¼Œä½†æœ‰äº›æ—¶å€™è¿˜æ˜¯éœ€è¦çš„ï¼Œå¦‚ï¼Œå¼€å‘è€…æƒ³åœ¨ViewGroupçš„æ‰€æœ‰å­Viewä¸Šæ–¹ç»˜åˆ¶ä¸€äº›å†…å®¹ï¼Œå°±å¯ä»¥é€šè¿‡é‡å†™ViewGroupçš„onDrawForeground()æ¥å®žçŽ°ã€‚ è‡ªå®šä¹‰å±žæ€§çš„å£°æ˜Žä¸ŽèŽ·å– åœ¨è‡ªå®šä¹‰ViewGroupä¸­ã€Œè‡ªå®šä¹‰å±žæ€§çš„å£°æ˜Žä¸ŽèŽ·å–ã€çš„æ–¹æ³•ä¸Žåœ¨è‡ªå®šä¹‰Viewä¸­ã€Œè‡ªå®šä¹‰å±žæ€§çš„å£°æ˜Žä¸ŽèŽ·å–ã€çš„æ–¹æ³•ä¸€æ ·ï¼Œä¸”å› ä¸ºå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåœ¨è‡ªå®šä¹‰ViewGroupä¸­æ˜¯ä¸éœ€è¦è‡ªå®šä¹‰å±žæ€§çš„ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™é‡Œå°±ä¸è‡ªå®šä¹‰å±žæ€§äº†ã€‚ é‡å†™æµ‹é‡é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonMeasure()ï¼‰ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546//2. é‡å†™æµ‹é‡é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonMeasure()ï¼‰ï¼›@Overrideprotected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; //2.1 è§£æž ViewGroup çš„çˆ¶ View å¯¹ ViewGroup çš„å°ºå¯¸è¦æ±‚ int widthMode = MeasureSpec.getMode(widthMeasureSpec); int widthSize = MeasureSpec.getSize(widthMeasureSpec); int heightMode = MeasureSpec.getMode(widthMeasureSpec); int heightSize = MeasureSpec.getSize(widthMeasureSpec); //2.2 ViewGroup æ ¹æ®ã€Œå¼€å‘è€…åœ¨ xml ä¸­å†™çš„å¯¹ ViewGroup å­ View çš„å°ºå¯¸è¦æ±‚ã€ã€ã€Œè‡ªå·±çš„çˆ¶ Viewï¼ˆViewGroup çš„çˆ¶ Viewï¼‰å¯¹è‡ªå·±çš„å°ºå¯¸è¦æ±‚ã€å’Œ //ã€Œè‡ªå·±çš„å¯ç”¨ç©ºé—´ã€è®¡ç®—å‡ºè‡ªå·±å¯¹å­ View çš„å°ºå¯¸è¦æ±‚ï¼Œå¹¶å°†è¯¥å°ºå¯¸è¦æ±‚é€šè¿‡å­ View çš„ measure() æ–¹æ³•ä¼ ç»™å­ Viewï¼Œè®©å­ View æµ‹é‡è‡ªå·±ï¼ˆViewï¼‰çš„æœŸæœ›å°ºå¯¸ //å…·ä½“ä»£ç æŸ¥çœ‹åŽŸæ–‡... //2.3 ViewGroup æš‚æ—¶ä¿å­˜å­ View çš„å°ºå¯¸ï¼Œä»¥ä¾¿å¸ƒå±€é˜¶æ®µå’Œç»˜åˆ¶é˜¶æ®µä½¿ç”¨ Rect childBound; if(mChildrenBounds.size() &lt;= i)&#123; childBound = new Rect(); mChildrenBounds.add(childBound); &#125;else&#123; childBound = mChildrenBounds.get(i); &#125; //æ­¤å¤„ä¸èƒ½ç”¨ child.getxxx() èŽ·å–å­ View çš„å°ºå¯¸å€¼ï¼Œå› ä¸ºå­ View åªæ˜¯é‡äº†å°ºå¯¸ï¼Œè¿˜æ²¡æœ‰å¸ƒå±€ï¼Œè¿™äº›å€¼éƒ½æ˜¯ 0// childBound.set(child.getLeft(), child.getTop(), child.getRight(), child.getBottom()); childBound.set(lineWidthUsed, heightUsed, lineWidthUsed + child.getMeasuredWidth(), heightUsed + child.getMeasuredHeight()); lineWidthUsed += child.getMeasuredWidth() + mItemSpace; widthUsed = Math.max(lineWidthUsed, widthUsed); lineHeight = Math.max(lineHeight, child.getMeasuredHeight()); &#125; //2.4 ViewGroup å°†ã€Œæ ¹æ®å­ View çš„å®žé™…å°ºå¯¸è®¡ç®—å‡ºçš„è‡ªå·±ï¼ˆViewGroupï¼‰çš„å°ºå¯¸ã€ç»“åˆã€Œè‡ªå·±çˆ¶ View å¯¹è‡ªå·±çš„å°ºå¯¸è¦æ±‚ã€è¿›è¡Œä¿®æ­£ï¼Œå¹¶é€š //è¿‡ setMeasuredDimension() æ–¹æ³•å‘ŠçŸ¥çˆ¶ View è‡ªå·±çš„æœŸæœ›å°ºå¯¸ int measuredWidth = resolveSize(widthUsed, widthMeasureSpec); int measuredHeight = resolveSize((heightUsed + lineHeight + getPaddingBottom()), heightMeasureSpec); setMeasuredDimension(measuredWidth, measuredHeight);&#125;//é‡å†™generateLayoutParams()//2.2.1 åœ¨è‡ªå®šä¹‰ ViewGroup ä¸­è°ƒç”¨ measureChildWithMargins() æ–¹æ³•è®¡ç®— ViewGroup å¯¹å­ View çš„å°ºå¯¸è¦æ±‚æ—¶ï¼Œ//å¿…é¡»åœ¨ ViewGroup ä¸­é‡å†™ generateLayoutParams() æ–¹æ³•ï¼Œå› ä¸º measureChildWithMargins() æ–¹æ³•ä¸­ç”¨åˆ°äº† MarginLayoutParamsï¼Œ//å¦‚æžœä¸é‡å†™ generateLayoutParams() æ–¹æ³•ï¼Œé‚£è°ƒç”¨ measureChildWithMargins() æ–¹æ³•æ—¶ï¼ŒMarginLayoutParams å°±ä¸º nullï¼Œ//æ‰€ä»¥åœ¨è‡ªå®šä¹‰ ViewGroup ä¸­è°ƒç”¨ measureChildWithMargins() æ–¹æ³•æ—¶ï¼Œå¿…é¡»é‡å†™ generateLayoutParams() æ–¹æ³•ã€‚@Overridepublic LayoutParams generateLayoutParams(AttributeSet attrs) &#123; return new MarginLayoutParams(getContext(), attrs);&#125; é‡å†™å¸ƒå±€é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonLayout()ï¼ˆä»…ViewGroupéœ€è¦é‡å†™ï¼‰ï¼‰ 12345678910//é‡å†™å¸ƒå±€é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonLayout()ï¼ˆä»… ViewGroup éœ€è¦é‡å†™ï¼‰ï¼‰ï¼›@Overrideprotected void onLayout(boolean changed, int l, int t, int r, int b) &#123; for (int i = 0; i &lt; getChildCount(); i++) &#123; //åº”ç”¨æµ‹é‡é˜¶æ®µè®¡ç®—å‡ºçš„å­ View çš„å°ºå¯¸å€¼å¸ƒå±€å­ View View child = getChildAt(i); Rect childBound = mChildrenBounds.get(i); child.layout(childBound.left, childBound.top, childBound.right, childBound.bottom); &#125;&#125; é‡å†™ç»˜åˆ¶é˜¶æ®µç›¸å…³æ–¹æ³•ï¼ˆonDraw()ç»˜åˆ¶ä¸»ä½“ã€dispatchDraw()ç»˜åˆ¶å­Viewå’ŒonDrawForeground()ç»˜åˆ¶å‰æ™¯ï¼‰ é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ViewGroupæ—¶æ˜¯ä¸éœ€è¦é‡å†™ä»»ä½•ç»˜åˆ¶é˜¶æ®µçš„æ–¹æ³•çš„ï¼Œå› ä¸ºViewGroupçš„è§’è‰²æ˜¯å®¹å™¨ï¼Œä¸€ä¸ªé€æ˜Žçš„å®¹å™¨ï¼Œå®ƒåªæ˜¯ç”¨æ¥ç››æ”¾å­Viewçš„ã€‚ æ³¨æ„ï¼š é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨View Groupçš„dispatchDraw()æ–¹æ³•ï¼Œæ‰€ä»¥ä¸éœ€è¦é‡å†™è¯¥æ–¹æ³• å‡ºäºŽæ•ˆçŽ‡çš„è€ƒè™‘ï¼ŒViewGroupé»˜è®¤ä¼šç»•è¿‡draw()æ–¹æ³•ï¼Œæ¢è€Œç›´æŽ¥æ‰§è¡ŒdispatchDraw()ï¼Œä»¥æ­¤æ¥ç®€åŒ–ç»˜åˆ¶æµç¨‹ã€‚æ‰€ä»¥å¦‚æžœä½ è‡ªå®šä¹‰äº†ä¸€ä¸ªViewGroupï¼Œå¹¶ä¸”éœ€è¦åœ¨å®ƒçš„é™¤dispatchDraw()æ–¹æ³•ä»¥å¤–çš„ä»»ä½•ä¸€ä¸ªç»˜åˆ¶æ–¹æ³•å†…ç»˜åˆ¶å†…å®¹ï¼Œä½ å¯èƒ½ä¼šéœ€è¦è°ƒç”¨View.setWillNotDraw(false)æ–¹æ³•æ¥åˆ‡æ¢åˆ°å®Œæ•´çš„ç»˜åˆ¶æµç¨‹ï¼ˆæ˜¯ã€Œå¯èƒ½ã€è€Œä¸æ˜¯ã€Œå¿…é¡»ã€çš„åŽŸå› æ˜¯ï¼Œæœ‰äº›ViewGroupæ˜¯å·²ç»è°ƒç”¨è¿‡setWillNotDraw(false)äº†çš„ï¼Œä¾‹å¦‚ScrollViewï¼‰ã€‚é™¤äº†å¯ä»¥é€šè¿‡è°ƒç”¨View.setWillNotDraw(false)æ–¹æ³•æ¥åˆ‡æ¢åˆ°å®Œæ•´çš„ç»˜åˆ¶æµç¨‹ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥é€šè¿‡ç»™ViewGroupè®¾ç½®èƒŒæ™¯æ¥åˆ‡æ¢åˆ°å®Œæ•´çš„ç»˜åˆ¶æµç¨‹ onTouchEvent() ç”±äºŽViewGroupä¸éœ€è¦å’Œç”¨æˆ·äº¤äº’ï¼Œæ‰€ä»¥ï¼Œä¸ç”¨é‡å†™è¯¥æ–¹æ³•ã€‚ onInterceptTouchEvent()ï¼ˆä»…ViewGroupæœ‰æ­¤æ–¹æ³•ï¼‰ ç”±äºŽViewGroupä¸éœ€è¦å’Œç”¨æˆ·äº¤äº’ä¸”ViewGroupä¸éœ€è¦æ‹¦æˆªå­Viewçš„MotionEventï¼Œæ‰€ä»¥ï¼Œä¸ç”¨é‡å†™è¯¥æ–¹æ³•ã€‚ æœ€ç»ˆæ•ˆæžœå¦‚ä¸‹ï¼š æ€»ç»“è‡ªå®šä¹‰ViewåŒ…æ‹¬ä¸‰éƒ¨åˆ†å†…å®¹ï¼š å¸ƒå±€ï¼ˆLayoutï¼‰ ç»˜åˆ¶ï¼ˆDrawingï¼‰ è§¦æ‘¸åé¦ˆï¼ˆEvent Handlingï¼‰ å…¶ä¸­å¸ƒå±€é˜¶æ®µç¡®å®šäº†Viewçš„ä½ç½®å’Œå°ºå¯¸ï¼Œè¯¥é˜¶æ®µä¸»è¦æ˜¯ä¸ºäº†åŽé¢çš„ç»˜åˆ¶å’Œè§¦æ‘¸åé¦ˆåšæ”¯æŒï¼›ç»˜åˆ¶é˜¶æ®µä¸»è¦ç”¨äºŽç»˜åˆ¶Viewçš„å†…å®¹ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªç”¨å®žçŽ°OnDrawæ–¹æ³•ï¼ˆWhereï¼‰æ–¹æ³•ã€æŒ‰ç…§æŒ‡å®šé¡ºåºè°ƒç”¨ç›¸å…³APIï¼ˆHowï¼‰å³å¯å®žçŽ°è‡ªå®šä¹‰ç»˜åˆ¶ï¼ˆWhatï¼‰ï¼‰ï¼›è§¦æ‘¸åé¦ˆé˜¶æ®µç¡®å®šäº†ç”¨æˆ·ç‚¹å‡»äº†å“ªé‡Œï¼Œä¸‰è€…ç›¸è¾…ç›¸æˆï¼Œç¼ºä¸€ä¸å¯ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>View</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»Ž0åˆ°1ä¼˜é›…å®žçŽ°æ²‰æµ¸å¼çŠ¶æ€æ ]]></title>
    <url>%2Fposts%2Fd649dac6.html</url>
    <content type="text"><![CDATA[ImmersionStatusBar 1. æ¦‚è¿°çŽ°åœ¨å¸‚é¢ä¸Šç»å¤§å¤šæ•°APPéƒ½å®žçŽ°äº†æ²‰æµ¸å¼çŠ¶æ€æ çš„æ•ˆæžœï¼Œè¯¥æ•ˆæžœå¯ä»¥æžå¤§åœ°æå‡ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚ä½†æ˜¯ï¼ŒAPPé»˜è®¤çš„æƒ…å†µä¸‹åªæ˜¯è®¾å®šä¸€ä¸ªå›ºå®šçš„çŠ¶æ€æ é¢œè‰²ï¼Œé‚£ä¹ˆå°±éœ€è¦æˆ‘ä»¬é€šè¿‡ä»£ç åŽ»åŠ¨æ€ä¿®æ”¹çŠ¶æ€æ é¢œè‰²çš„ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•åŽ»å®žçŽ°å‘¢ï¼Ÿ é¦–å…ˆæ¥è¯´ï¼Œä»ŽAndroid 4.4å¼€å§‹æ‰èƒ½å®žçŽ°æ²‰æµ¸å¼çŠ¶æ€æ çš„ï¼Œæ‰€ä»¥å¦‚æžœæ‚¨çš„APPä¹Ÿæ”¯æŒAndroid 4.4ä»¥ä¸‹ç‰ˆæœ¬ï¼Œé‚£è¿˜éœ€è¦å¯¹Android 4.4ä»¥ä¸‹ç‰ˆæœ¬åšâ€œä¸æ”¯æŒæ²‰æµ¸å¼çŠ¶æ€æ â€å¤„ç†ã€‚ é‚£ä¹ˆï¼Œä»ŽAndroid 4.4å¼€å§‹ï¼Œå¤§æ¦‚å¯ä»¥åˆ†æˆä¸‰ä¸ªé˜¶æ®µæ¥å®žçŽ°æ²‰æµ¸å¼çŠ¶æ€æ ï¼š Android4.4(API 19) - Android 5.0(API 21)ï¼šè¿™ä¸ªé˜¶æ®µçš„å®žçŽ°æ–¹å¼ä¸ºï¼šé€šè¿‡FLAG_TRANSLUCENT_STATUSè®¾ç½®çŠ¶æ€æ ä¸ºé€æ˜Žå¹¶ä¸”ä¸ºå…¨å±æ¨¡å¼ï¼Œç„¶åŽé€šè¿‡æ·»åŠ ä¸€ä¸ªä¸ŽStatusBarä¸€æ ·å¤§å°çš„Viewï¼Œå°†Viewçš„èƒŒæ™¯è®¾ç½®ä¸ºè¦è®¾ç½®çš„é¢œè‰²ï¼Œä»Žè€Œå®žçŽ°æ²‰æµ¸å¼ã€‚ Android 5.0(API 21) - Android 6.0(API 23)ï¼š ä»ŽAndroid 5.0å¼€å§‹ï¼ŒåŠ å…¥äº†ä¸€ä¸ªé‡è¦çš„å±žæ€§android:statusBarColorå’Œæ–¹æ³•setStatusBarColor()ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬å°±å¯ä»¥è½»æ¾å®žçŽ°æ²‰æµ¸å¼çŠ¶æ€æ ã€‚ä½†æ˜¯åœ¨Android 6.0ä»¥ä¸‹ç‰ˆæœ¬å®˜æ–¹ä¸æ”¯æŒè®¾ç½®çŠ¶æ€æ çš„æ–‡å­—å’Œå›¾æ ‡é¢œè‰²ï¼Œç›®å‰åªæœ‰å°ç±³å’Œé­…æ—çš„ROMæä¾›äº†æ”¯æŒã€‚ Android 6.0(API 23)ä»¥ä¸Šç‰ˆæœ¬ï¼šå…¶å®žAndroid 6.0ä»¥ä¸Šçš„å®žçŽ°æ–¹å¼å’ŒAndroid 5.0+ æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«æ˜¯ä»ŽAndroid 6.0å¼€å§‹ï¼Œå®˜æ–¹æ”¯æŒæ”¹å˜çŠ¶æ€æ çš„æ–‡å­—å’Œå›¾æ ‡çš„é¢œè‰²ã€‚ 2. å®žçŽ°æ–¹æ¡ˆ2.1 å‰æœŸå·¥ä½œä¸ºäº†å®žçŽ°æ²‰æµ¸å¼çŠ¶æ€æ çš„æ•ˆæžœï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›å‰æœŸå·¥ä½œï¼Œå¦‚ä¸‹ï¼š 2.1.1 ä¿®æ”¹åº”ç”¨ä¸»é¢˜ä¸ºäº†æ›´å¥½åœ°æ¼”ç¤ºæ²‰æµ¸å¼çŠ¶æ€æ çš„æ•ˆæžœï¼Œæˆ‘ä»¬ä¿®æ”¹åº”ç”¨çš„ä¸»é¢˜ï¼Œä½¿å…¶ä¸è¦æ˜¾ç¤ºAndroidé»˜è®¤çš„æ ‡é¢˜æ ã€‚ æ‰“å¼€styles.xmlæ–‡ä»¶ï¼Œå¯ä»¥æ”¹æˆå¦‚ä¸‹ä»£ç ï¼Œå¹¶ä¸”å°†colorPrimaryç­‰é¢œè‰²è®¾ç½®åˆ æŽ‰ï¼š 12&lt;style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt;&lt;/style&gt; 2.1.2 èŽ·å–çŠ¶æ€æ é«˜åº¦æ–°å»ºä¸€ä¸ªStatusBarUtils.javaæ–‡ä»¶ï¼Œåœ¨é‡Œé¢æ·»åŠ ä¸€ä¸ªèŽ·å–çŠ¶æ€æ é«˜åº¦çš„æ–¹æ³•ï¼Œä»¥åŽæˆ‘ä»¬éƒ½ä¼šç”¨çš„åˆ°è¿™ä¸ªæ–¹æ³•ã€‚ä¹‹åŽæˆ‘ä»¬çš„æ ¸å¿ƒä»£ç ä¹Ÿåœ¨è¿™ä¸ªå·¥å…·ç±»é‡Œå®žçŽ°ã€‚ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415public class StatusBarUtils &#123; public static int getHeight(Context context) &#123; int statusBarHeight = 0; try &#123; int resourceId = context.getResources().getIdentifier("status_bar_height", "dimen", "android"); if (resourceId &gt; 0) &#123; statusBarHeight = context.getResources().getDimensionPixelSize(resourceId); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return statusBarHeight; &#125;&#125; ä¸‹é¢æˆ‘ä»¬å°±æŒ‰ç…§ä»Žé«˜ç‰ˆæœ¬åˆ°ä½Žç‰ˆæœ¬çš„é¡ºåºæ¥è®²è§£å¦‚ä½•æ›´ä¼˜é›…åœ°å®žçŽ°æ²‰æµ¸å¼çŠ¶æ€æ ã€‚ 2.2 Android 5.0+2.2.1 è®¾ç½®çŠ¶æ€æ é¢œè‰²åœ¨StatusBarUtilsç±»é‡Œæ·»åŠ å¦‚ä¸‹æ–¹æ³•ï¼Œå®žçŽ°è®¾ç½®çŠ¶æ€æ é¢œè‰²çš„åŠŸèƒ½ï¼š 123456789public static void setColor(@NonNull Window window, @ColorInt int color) &#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION); window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE); window.setStatusBarColor(color); &#125;&#125; ä¿®æ”¹çŠ¶æ€æ é¢œè‰²çš„åŠŸèƒ½å…¶å®žå°±æ˜¯å¯¹Windowè¿›è¡Œæ“ä½œï¼Œè€Œè¯¥Windowå¯ä»¥æ˜¯Activityæˆ–Dialogç­‰æŒæœ‰çš„Windowï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å°è£…äº†ä¸€ä¸ªä¼ é€’Windowçš„æ–¹æ³•ã€‚ ä¸ºäº†ä¾¿äºŽå¯¹Activityç›´æŽ¥æ“ä½œï¼Œå¯ä»¥å†å¢žåŠ ä¸€ä¸ªå¦‚ä¸‹æ–¹æ³•ï¼š 12345public static void setColor(Context context, @ColorInt int color) &#123; if (context instanceof Activity) &#123; setColor(((Activity) context).getWindow(), color); &#125;&#125; ä¸‹é¢æµ‹è¯•ä¸€ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªActivityï¼Œå°†å…¶å¸ƒå±€èƒŒæ™¯è®¾ç½®ä¸ºæŸä¸ªé¢œè‰²ï¼Œä¾‹å¦‚ä¸»é¢˜è‰²ï¼Œå¸ƒå±€ä»£ç å¦‚ä¸‹ï¼š 12345678&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical" android:background="@color/colorPrimaryDark"&gt;&lt;/LinearLayout&gt; åœ¨æ²¡è®¾ç½®çŠ¶æ€æ é¢œè‰²æ—¶ï¼Œå±•ç¤ºæ•ˆæžœå¦‚ä¸‹ï¼š æŽ¥ä¸‹æ¥åœ¨Activityçš„onCreate()æ–¹æ³•é‡Œè°ƒç”¨è®¾ç½®çŠ¶æ€æ é¢œè‰²çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_color); StatusBarUtils.setColor(this, getResources().getColor(R.color.colorPrimaryDark));&#125; å±•ç¤ºæ•ˆæžœå¦‚ä¸‹ï¼š è¿™æ ·çŠ¶æ€æ å’Œå†…å®¹çš„é¢œè‰²å°±å¯ä»¥ä¸€æ ·å•¦ï¼ 2.2.2 è®¾ç½®çŠ¶æ€æ æ–‡å­—é¢œè‰²ä¸‹é¢æˆ‘ä»¬æŠŠèƒŒæ™¯å’ŒçŠ¶æ€æ é¢œè‰²æ”¹æˆçº¯ç»¿è‰²ï¼ˆ#00FF00ï¼‰ï¼Œçœ‹çœ‹æ•ˆæžœï¼š å‘çŽ°é¢œè‰²å¥½äº®å•Šï¼ŒçŠ¶æ€æ é‡Œçš„æ–‡å­—éƒ½çœ‹ä¸æ¸…äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯å¯ä»¥å°†çŠ¶æ€æ æ–‡å­—çš„é¢œè‰²æ”¹æˆæ·±è‰²çš„ï¼Œå®˜æ–¹ä¹Ÿä»…æ”¯æŒè®¾ç½®çŠ¶æ€æ æ–‡å­—å’Œå›¾æ ‡çš„æ·±è‰²æ¨¡å¼å’Œæµ…è‰²æ¨¡å¼ï¼Œä½†æ˜¯å®˜æ–¹ä»…åœ¨Android 6.0ä»¥ä¸Šç‰ˆæœ¬æä¾›æ”¯æŒã€‚è®¾ç½®ä»£ç å¦‚ä¸‹ï¼š 1234567891011private static void setTextDark(Window window, boolean isDark) &#123; if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.M) &#123; View decorView = window.getDecorView(); int systemUiVisibility = decorView.getSystemUiVisibility(); if (isDark) &#123; decorView.setSystemUiVisibility(systemUiVisibility | View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR); &#125; else &#123; decorView.setSystemUiVisibility(systemUiVisibility &amp; ~View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR); &#125; &#125;&#125; åŒæ ·å†å¢žåŠ ä¸€ä¸ªå¯¹Activityçš„æ”¯æŒï¼š 12345public static void setTextDark(Context context, boolean isDark) &#123; if (context instanceof Activity) &#123; setTextDark(((Activity) context).getWindow(), isDark); &#125;&#125; ä¸ºäº†èƒ½å¤Ÿæ ¹æ®çŠ¶æ€æ èƒŒæ™¯é¢œè‰²çš„æ·±æµ…è€Œè‡ªåŠ¨è®¾ç½®æ–‡å­—çš„é¢œè‰²ï¼Œæˆ‘ä»¬å†æ–°å¢žä¸€ä¸ªåˆ¤æ–­é¢œè‰²æ·±æµ…çš„æ–¹æ³•ï¼š 123public static boolean isDarkColor(@ColorInt int color) &#123; return ColorUtils.calculateLuminance(color) &lt; 0.5;&#125; ç„¶åŽåœ¨setColor()æ–¹æ³•é‡Œæ–°å¢žä¸€è¡Œè®¾ç½®çŠ¶æ€æ æ–‡å­—é¢œè‰²çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š 12345678910public static void setColor(@NonNull Window window, @ColorInt int color) &#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION); window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE); window.setStatusBarColor(color); setTextDark(window, !isDarkColor(color)); &#125;&#125; è¿è¡Œä¸€ä¸‹ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæžœäº†ï¼š ä¸Šé¢æ˜¯Android 6.0ä»¥ä¸Šç‰ˆæœ¬çš„å®žçŽ°ï¼Œé‚£ä¹ˆå¯¹äºŽAndroid 6.0ä»¥ä¸‹çš„æ‰‹æœºæ€Žä¹ˆåŠžå‘¢ï¼Ÿç›®å‰Android 5.0-6.0çš„æ‰‹æœºåªæœ‰å°ç±³MIUIå’Œé­…æ—Flymeç³»ç»Ÿæä¾›äº†æ”¯æŒã€‚å°ç±³MIUIçš„è®¾ç½®æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910111213private static void setMIUIDark(Window window, boolean isDark) &#123; try &#123; Class&lt;? extends Window&gt; clazz = window.getClass(); int darkModeFlag; Class&lt;?&gt; layoutParams = Class.forName("android.view.MiuiWindowManager$LayoutParams"); Field field = layoutParams.getField("EXTRA_FLAG_STATUS_BAR_DARK_MODE"); darkModeFlag = field.getInt(layoutParams); Method extraFlagField = clazz.getMethod("setExtraFlags", int.class, int.class); extraFlagField.invoke(window, isDark ? darkModeFlag : 0, darkModeFlag); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;&#125; é­…æ—Flymeçš„è®¾ç½®æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324private static void setFlymeDark(Window window, boolean isDark) &#123; if (window != null) &#123; try &#123; WindowManager.LayoutParams lp = window.getAttributes(); Field darkFlag = WindowManager.LayoutParams.class .getDeclaredField("MEIZU_FLAG_DARK_STATUS_BAR_ICON"); Field meizuFlags = WindowManager.LayoutParams.class .getDeclaredField("meizuFlags"); darkFlag.setAccessible(true); meizuFlags.setAccessible(true); int bit = darkFlag.getInt(null); int value = meizuFlags.getInt(lp); if (isDark) &#123; value |= bit; &#125; else &#123; value &amp;= ~bit; &#125; meizuFlags.setInt(lp, value); window.setAttributes(lp); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; ç„¶åŽåœ¨setTextDark()æ–¹æ³•ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718192021private static void setTextDark(Window window, boolean isDark) &#123; if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.M) &#123; View decorView = window.getDecorView(); int systemUiVisibility = decorView.getSystemUiVisibility(); if (isDark) &#123; decorView.setSystemUiVisibility(systemUiVisibility | View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR); &#125; else &#123; decorView.setSystemUiVisibility(systemUiVisibility &amp; ~View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR); &#125; &#125; else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; switch (OSUtils.getRomType()) &#123; case MIUI: setMIUIDark(window, isDark); break; case Flyme: setFlymeDark(window, isDark); break; default: &#125; &#125;&#125; Android 6.0ä»¥ä¸‹è¿è¡Œæ•ˆæžœåŒä¸Šï¼Œæˆ‘å°±ä¸ç»™å¤§å®¶æˆªå›¾äº†ã€‚ 2.2.3 è®¾ç½®çŠ¶æ€æ é€æ˜Žå½“æˆ‘ä»¬APPçš„èƒŒæ™¯æ˜¯ä¸€å¼ å›¾ç‰‡æ—¶ï¼Œæœªè®¾ç½®æ²‰æµ¸å¼çŠ¶æ€æ çš„æ•ˆæžœå¦‚ä¸‹ï¼š è¿™æ—¶ä¸€èˆ¬æˆ‘ä»¬éœ€è¦å°†å›¾ç‰‡é¡¶åˆ°çŠ¶æ€æ é‡Œï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªå†…å®¹å¸ƒå±€é¡¶åˆ°çŠ¶æ€æ é‡Œï¼Œå¹¶è®¾ç½®çŠ¶æ€æ çš„é¢œè‰²é€æ˜Žï¼Œæ‰èƒ½å®žçŽ°æ²‰æµ¸å¼çŠ¶æ€æ çš„æ•ˆæžœã€‚ é‚£ä¹ˆï¼Œåœ¨æˆ‘ä»¬çš„StatusBarUtilsç±»é‡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123456789public static void setTransparent(@NonNull Window window) &#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION); window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN); window.setStatusBarColor(Color.TRANSPARENT); &#125;&#125; åŒæ ·é’ˆå¯¹Activityï¼Œå¢žåŠ å¦‚ä¸‹æ–¹æ³•ï¼š 12345public static void setTransparent(Context context) &#123; if (context instanceof Activity) &#123; setTransparent(((Activity) context).getWindow()); &#125;&#125; æœ€åŽåœ¨Activityçš„onCreate()æ–¹æ³•é‡Œè®¾ç½®ä¸€ä¸‹ï¼š 123456@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_transparent); StatusBarUtils.setTransparent(this);&#125; è¿è¡Œï¼Œæ˜¾ç¤ºæ•ˆæžœå¦‚ä¸‹ï¼š é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå¤§å®¶åœ¨å®žçŽ°å¸ƒå±€æ—¶ä¸è¦å¿˜äº†æŠŠçŠ¶æ€æ çš„é«˜åº¦ä¹Ÿè€ƒè™‘è¿›åŽ»ã€‚ ä»¥ä¸Šå°±æ˜¯Android 5.0ä»¥ä¸Šæ²‰æµ¸å¼çŠ¶æ€æ çš„å®žçŽ°äº†ã€‚ 2.3 Android 4.4+ä¸‹é¢é’ˆå¯¹Android 4.4-5.0çš„æ‰‹æœºè¿›è¡Œå®žçŽ°ã€‚å®žçŽ°åŽŸç†æ˜¯å°†å†…å®¹å¸ƒå±€è®¾ä¸ºå…¨å±ï¼Œç„¶åŽåœ¨å¸ƒå±€çš„é¡¶éƒ¨æ·»åŠ ä¸€ä¸ªå’ŒçŠ¶æ€æ ä¸€æ ·é«˜åº¦çš„Viewï¼Œå°†è¯¥Viewçš„èƒŒæ™¯è®¾ç½®æˆæˆ‘ä»¬æƒ³è¦çš„é¢œè‰²ã€‚å½“éœ€è¦å°†çŠ¶æ€æ è®¾ç½®çº¯é¢œè‰²æ—¶ï¼Œä¸ºäº†å’ŒAndroid 5.0ä»¥ä¸Šç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œæˆ‘ä»¬å¯¹å†…å®¹å¸ƒå±€çš„ä¸Šè¾¹è®¾ç½®ä¸€ä¸ªpaddingï¼Œå¤§å°ä¸ºçŠ¶æ€æ çš„é«˜åº¦ã€‚ ä¸ºäº†èƒ½å¤ç”¨è¿™ä¸ªViewï¼Œæˆ‘ä»¬æ–°å¢žä¸€ä¸ªè‡ªå®šä¹‰çš„IDï¼Œåœ¨valuesæ–‡ä»¶å¤¹ä¸‹æ–°å»ºids.xmlæ–‡ä»¶ï¼Œæ–°å¢žä»£ç å¦‚ä¸‹ï¼š 1234&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;resources&gt; &lt;item name="fake_status_bar_view" type="id"/&gt;&lt;/resources&gt; ç„¶åŽåœ¨StatusBarUtilsç±»é‡Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031private static final int FAKE_STATUS_BAR_VIEW_ID = R.id.fake_status_bar_view;@RequiresApi(api = Build.VERSION_CODES.KITKAT)public static void setColor(@NonNull Window window, @ColorInt int color, boolean isTransparent) &#123; Context context = window.getContext(); window.addFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION); ViewGroup decorView = (ViewGroup) window.getDecorView(); View contentView = decorView.findViewById(android.R.id.content); if (contentView != null) &#123; contentView.setPadding(0, isTransparent ? 0 : getHeight(context), 0, 0); &#125; View fakeStatusBarView = decorView.findViewById(FAKE_STATUS_BAR_VIEW_ID); if (fakeStatusBarView != null) &#123; fakeStatusBarView.setBackgroundColor(color); if (fakeStatusBarView.getVisibility() == View.GONE) &#123; fakeStatusBarView.setVisibility(View.VISIBLE); &#125; &#125; else &#123; // ç»˜åˆ¶ä¸€ä¸ªå’ŒçŠ¶æ€æ ä¸€æ ·é«˜çš„çŸ©å½¢ View statusBarView = new View(context); FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, getHeight(context)); statusBarView.setLayoutParams(layoutParams); statusBarView.setBackgroundColor(color); statusBarView.setId(FAKE_STATUS_BAR_VIEW_ID); decorView.addView(statusBarView); &#125;&#125; 2.3.1 è®¾ç½®çŠ¶æ€æ é¢œè‰²åœ¨è®¾ç½®çº¯é¢œè‰²æ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†è¯¥é¢œè‰²ä¸Žé»‘è‰²è¿›è¡Œ1:1çš„æ··åˆã€‚ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾ç½®å‘¢ï¼Ÿå› ä¸ºçŠ¶æ€æ çš„æ–‡å­—å’Œå›¾æ ‡é¢œè‰²é»˜è®¤æ˜¯ç™½è‰²çš„ï¼Œå¹¶ä¸”åœ¨Android 5.0ä»¥ä¸‹æ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œæ‰€ä»¥å¦‚æžœä¿®æ”¹æˆè¾ƒæµ…çš„é¢œè‰²ï¼Œå°±ä¼šå¯¼è‡´çŠ¶æ€æ æ–‡å­—çœ‹ä¸æ¸…çš„çŽ°è±¡ï¼Œå› æ­¤åšä¸€ä¸ªæ¯”è¾ƒæš—çš„æµ®å±‚æ•ˆæžœæ›´å¥½ä¸€äº›ã€‚ é‚£ä¹ˆå°†setColor()æ–¹æ³•æ”¹æˆå¦‚ä¸‹ä»£ç ï¼š 123456789101112public static void setColor(@NonNull Window window, @ColorInt int color) &#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION); window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE); window.setStatusBarColor(color); setTextDark(window, !isDarkColor(color)); &#125; else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123; setColor(window, ColorUtils.blendARGB(Color.TRANSPARENT, color, 0.5f), false); &#125;&#125; å±•ç¤ºæ•ˆæžœå¦‚ä¸‹ï¼š 2.3.2 è®¾ç½®çŠ¶æ€æ é€æ˜Žåœ¨è®¾ç½®çŠ¶æ€æ é€æ˜Žæ—¶ï¼Œä¸ºäº†ä¹Ÿèƒ½æ¸…æ¥šåœ°çœ‹æ¸…çŠ¶æ€æ çš„æ–‡å­—ï¼Œæˆ‘ä»¬ç›´æŽ¥è®¾ç½®çŠ¶æ€æ çš„é¢œè‰²ä¸º50%é€æ˜Žåº¦çš„é»‘è‰²ã€‚ äºŽæ˜¯ï¼Œä¿®æ”¹setTransparent()æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011public static void setTransparent(@NonNull Window window) &#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_STATUS); window.clearFlags(WindowManager.LayoutParams.FLAG_TRANSLUCENT_NAVIGATION); window.getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN); window.setStatusBarColor(Color.TRANSPARENT); &#125; else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) &#123; setColor(window, 0x80000000, true); &#125;&#125; å±•ç¤ºæ•ˆæžœå¦‚ä¸‹ï¼š è¿™æ ·ï¼ŒAndroid 4.4ä»¥ä¸Šçš„æ‰‹æœºå°±é€‚é…å®Œæ¯•äº†ã€‚ 3. ç‰¹æ®Šåœºæ™¯çŽ°åœ¨æ¥é’ˆå¯¹ä¸€äº›ç‰¹æ®Šåœºæ™¯è¿›è¡Œé€‚é…ï¼Œæ¯”å¦‚å¯åŠ¨é¡µã€åˆ˜æµ·å±å’Œå¼¹çª—ç­‰ç­‰ã€‚ 3.1 å¯åŠ¨é¡µå¯¹äºŽå¯åŠ¨é¡µï¼Œä¸€èˆ¬éƒ½ä¼šæŠŠçŠ¶æ€æ æ”¶ä¸ŠåŽ»ï¼Œè¿™éœ€è¦é€‚é…åˆ˜æµ·å±ï¼Œå¦åˆ™åˆ˜æµ·åŒºåŸŸä¼šæ˜¾ç¤ºé»‘çš„ä¸€ç‰‡ã€‚å…¶å®žAndroid Pä»¥ä¸Šæä¾›äº†é€‚é…åˆ˜æµ·å±çš„æ–¹æ³•ï¼Œåœ¨å¯åŠ¨é¡µActivityæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345678910111213@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_splash); StatusBarUtils.setTransparent(this); // é€‚é…åˆ˜æµ·å± if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) &#123; WindowManager.LayoutParams layoutParams = getWindow().getAttributes(); layoutParams.layoutInDisplayCutoutMode = WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES; getWindow().setAttributes(layoutParams); &#125;&#125; ä½†æ˜¯ä¸€äº›æ‰‹æœºåŽ‚å•†çš„åˆ˜æµ·å±æ‰‹æœºç³»ç»Ÿç‰ˆæœ¬æ˜¯ä½ŽäºŽAndroid Pçš„ï¼Œä¸è¿‡ä¹Ÿéƒ½æä¾›äº†é€‚é…çš„æ–¹æ³•ã€‚é€‚é…æ–¹å¼æ˜¯åœ¨AndroidManifest.xmlæ–‡ä»¶é‡Œçš„applicationæ ‡ç­¾ä¸‹æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123456789101112&lt;!-- å…è®¸ç»˜åˆ¶åˆ°å°ç±³åˆ˜æµ·å±æœºåž‹çš„åˆ˜æµ·åŒºåŸŸ --&gt;&lt;meta-data android:name="notch.config" android:value="portrait" /&gt;&lt;!-- å…è®¸ç»˜åˆ¶åˆ°åŽä¸ºåˆ˜æµ·å±æœºåž‹çš„åˆ˜æµ·åŒºåŸŸ --&gt;&lt;meta-data android:name="android.notch_support" android:value="true" /&gt;&lt;!-- å…è®¸ç»˜åˆ¶åˆ°oppoã€vivoåˆ˜æµ·å±æœºåž‹çš„åˆ˜æµ·åŒºåŸŸ --&gt;&lt;meta-data android:name="android.max_aspect" android:value="2.2" /&gt; å¦å¤–ï¼Œå¯¹äºŽAndroid 5.0ä»¥ä¸‹çš„æ‰‹æœºï¼Œé€‚é…å®Œåˆ˜æµ·å±åŽä¼šåœ¨é¡¶éƒ¨å¤šä¸€å—é»‘è‰²åŠé€æ˜Žçš„Viewï¼Œé‚£æˆ‘ä»¬å°†å…¶æ”¹æˆå…¨é€æ˜Žçš„ï¼Œä¿®æ”¹onCreate()æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_splash); StatusBarUtils.setTransparent(this); // é€‚é…åˆ˜æµ·å± if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.P) &#123; WindowManager.LayoutParams layoutParams = getWindow().getAttributes(); layoutParams.layoutInDisplayCutoutMode = WindowManager.LayoutParams.LAYOUT_IN_DISPLAY_CUTOUT_MODE_SHORT_EDGES; getWindow().setAttributes(layoutParams); &#125; // é€‚é…Android 4.4 if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) &#123; StatusBarUtils.setColor(getWindow(), Color.TRANSPARENT, true); &#125;&#125; è¿™æ ·ï¼Œå¯åŠ¨é¡µçš„æ•ˆæžœå°±é€‚é…å¥½äº†ï¼Œæ•ˆæžœå¦‚ä¸‹ï¼š 3.2 å¼¹çª—å¯¹äºŽå¼¹çª—ï¼Œåªæœ‰å…¨å±å¼¹çª—æ‰èƒ½ä¿®æ”¹çŠ¶æ€æ æ–‡å­—çš„é¢œè‰²ã€‚è¯¦è§Androidéžå…¨å±çš„Windowæ— æ³•è®¾ç½®SYSTEM_UI_FLAG_LIGHT_STATUS_BARé—®é¢˜åˆ†æžã€‚ 4.å‚è€ƒ Androidå…³äºŽæ²‰æµ¸å¼çŠ¶æ€æ æ€»ç»“ MIUI 9 &amp; 10â€œçŠ¶æ€æ é»‘è‰²å­—ç¬¦â€å®žçŽ°æ–¹æ³•å˜æ›´é€šçŸ¥ é­…æ—å¼€æ”¾å¹³å° - çŠ¶æ€æ å˜è‰² ç®€æ´æ˜Žäº†çš„åˆ˜æµ·å±é€‚é…æ–¹æ¡ˆ]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>æ²‰æµ¸å¼çŠ¶æ€æ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå¯¹äºŽæœ‰æ—¶é—´æˆ³å’ŒtokenéªŒè¯çš„ç½‘ç»œè¯·æ±‚çš„å¤„ç†]]></title>
    <url>%2Fposts%2F86cc3f20.html</url>
    <content type="text"><![CDATA[æœ‰äº›é¡¹ç›®ä¸ºäº†æé«˜å®‰å…¨æ€§ï¼Œè®¾è®¡æŽ¥å£æ—¶å¢žåŠ äº†æ—¶é—´æˆ³å’Œtokenæ•ˆéªŒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š æ—¶é—´æˆ³ä¸Šè¡¨ä¸­çš„å‚æ•°æ—¶é—´æˆ³å¿…é¡»ä¸ŽæœåŠ¡å™¨å½“å‰æ—¶é—´å¯¹åº”ï¼Œå‰åŽä¸èƒ½è¶…è¿‡10ç§’ï¼Œè¶…è¿‡åˆ™è¯·æ±‚å¤±è´¥ï¼š ä½ è‚¯å®šæƒ³é—®ï¼Œå¦‚æžœæ‰‹æœºç³»ç»Ÿæ—¶é—´ä¸æ­£ç¡®ï¼Œæ¯”æœåŠ¡å™¨å¿«äº†æˆ–æ…¢äº†10ç§’ä»¥ä¸Šï¼Œé‚£ä¸æ¯æ¬¡éƒ½ä¼šè¯·æ±‚å¤±è´¥å—ï¼Ÿåˆ«ç€æ€¥ï¼Œè¿™æ ·çš„æŽ¥å£è®¾è®¡ï¼Œè‚¯å®šä¼šæœ‰ä¸€ä¸ªèŽ·å–æœåŠ¡å™¨æ—¶é—´æˆ³çš„æŽ¥å£ï¼š æ€è·¯æ˜¯è¿™æ ·çš„ï¼Œæ¯æ¬¡APPå¯åŠ¨çš„æ—¶å€™èŽ·å–ä¸€æ¬¡æœåŠ¡å™¨æ—¶é—´æˆ³ï¼Œç„¶åŽä¸Žæ‰‹æœºæœ¬åœ°æ—¶é—´ç›¸å‡ï¼Œè®¡ç®—å‡ºå·®é¢ï¼Œå¹¶ä¿å­˜ï¼›å½“å…¶ä»–çš„ç½‘ç»œè¯·æ±‚éœ€è¦ä¼ å…¥æ—¶é—´æˆ³å‚æ•°æ—¶ï¼Œç”¨ä¿å­˜çš„æ—¶é—´å·®é¢åŠ ä¸Šæ‰‹æœºå½“å‰æ—¶é—´ï¼Œå°±å¯ä»¥å¾—åˆ°æ­£ç¡®çš„æ—¶é—´æˆ³äº†ï¼š æ—¶é—´å·® = èŽ·å–çš„æœåŠ¡å™¨æ—¶é—´æˆ³ - æ‰‹æœºå½“å‰æ—¶é—´ æ—¶é—´æˆ³ = æ‰‹æœºå½“å‰æ—¶é—´ + æ—¶é—´å·® å½“ç„¶ï¼ŒçŽ°åœ¨çš„æ‰‹æœºå¤§éƒ¨åˆ†éƒ½æ˜¯è”ç½‘èŽ·å–æ—¶é—´ï¼Œå¾ˆå°‘ä¼šå‡ºçŽ°æ¯”æ ‡å‡†æ—¶é—´å·®10ç§’ä»¥ä¸Šçš„æƒ…å†µï¼ŒæœåŠ¡å™¨çš„æ—¶é—´ä¹Ÿæ˜¯æ ‡å‡†æ—¶é—´ï¼Œå› æ­¤ï¼Œåªä¼ å…¥æ‰‹æœºçš„å½“å‰æ—¶é—´ä¹Ÿèƒ½ç¬¦åˆ90%çš„æƒ…å†µã€‚ é‚£å‰©ä¸‹çš„æƒ…å†µæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ â€‹ 1ã€ç½‘é€Ÿæ…¢çš„æ—¶å€™ï¼Œè¯·æ±‚æ—¶é—´å’Œè¯»å–æ—¶é—´ä¼šæ¯”è¾ƒé•¿ï¼Œå¾ˆå¯èƒ½ä¼šè¶…è¿‡10ç§’ï¼› â€‹ 2ã€å‡ºå›½ç”¨æˆ·æˆ–å›½å¤–ç”¨æˆ·ï¼Œä¸åœ¨ä¸€ä¸ªæ—¶åŒºï¼› â€‹ 3ã€ç”¨æˆ·ä¸»åŠ¨æˆ–è¢«åŠ¨è°ƒæ•´äº†æ‰‹æœºç³»ç»Ÿæ—¶é—´ã€‚ è¿™äº›æƒ…å†µä¸‹ï¼Œå¦‚æžœåªä¼ å…¥æ‰‹æœºçš„å½“å‰æ—¶é—´ï¼Œæ˜¯æ— æ³•è¯·æ±‚åˆ°æ­£ç¡®çš„æ•°æ®çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦è®¡ç®—æ—¶é—´å·®ã€‚ è‡³äºŽæ¯æ¬¡APPå¯åŠ¨çš„æ—¶å€™èŽ·å–ä¸€æ¬¡æœåŠ¡å™¨æ—¶é—´æˆ³ï¼Œè¿™ä¸ªæ—¶æœºå¯¹ä¸å¯¹å‘¢ï¼Ÿ ç”¨æˆ·åœ¨ä½¿ç”¨Appçš„è¿‡ç¨‹ä¸­ï¼Œå¾ˆå°‘ä¼šå‡ºçŽ°ç³»ç»Ÿæ—¶é—´çš„è°ƒæ•´ï¼Œå¦‚æžœæ°å·§èµ¶ä¸Šï¼Œå¯ä»¥åœ¨æŽ¥æ”¶åˆ°æ—¶é—´æˆ³è¶…æœŸçš„é”™è¯¯ç åŽï¼Œæç¤ºç”¨æˆ·é€€å‡ºAPPé‡æ–°å¯åŠ¨ä¸€æ¬¡ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ³¨å†Œæ—¶é—´è°ƒæ•´çš„å¹¿æ’­æŽ¥æ”¶è€…ï¼ŒæŽ¥æ”¶åˆ°æ—¶é—´è°ƒæ•´åŽï¼Œé‡æ–°è®¡ç®—ä¸€æ¬¡æ—¶é—´å·®ã€‚ è‡³äºŽç½‘é€Ÿæ…¢çš„æƒ…å†µè¿˜æ˜¯ä¸èƒ½è§£å†³ï¼ŒåŠ ä¸Šæç¤ºç”¨æˆ·é‡å¯APPå’Œæ³¨å†Œå¹¿æ’­æŽ¥æ”¶è€…è¿™äº›ä¸å¤ªä¼˜é›…çš„æ“ä½œï¼Œæˆ‘ä»¬è¦å¯»æ‰¾å…¶ä»–çš„æ€è·¯ã€‚ æ€Žä¹ˆèƒ½å½»åº•å¹¶ä¸”ä¼˜é›…çš„è§£å†³æ—¶é—´æˆ³è¶…æœŸçš„é—®é¢˜å‘¢ï¼Ÿ å…¶å®žæˆ‘ä»¬ä¸å¿…æ¯æ¬¡APPå¯åŠ¨éƒ½è¯·æ±‚ä¸€æ¬¡æœåŠ¡å™¨æ—¶é—´æˆ³ï¼Œåªæœ‰æ”¶åˆ°æ—¶é—´æˆ³è¶…æœŸçš„é”™è¯¯ä¹‹åŽï¼Œæ‰æœ‰å¿…è¦èŽ·å–ï¼Œæ­¤æ—¶è®¡ç®—å‡ºæ—¶é—´å·®ï¼Œå¹¶ä¿å­˜ï¼Œä»¥åŽæ‰€æœ‰çš„è¯·æ±‚éƒ½å¯ä»¥ç”¨è¿™ä¸ªæ—¶é—´å·®äº†ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡å†æ”¶åˆ°æ—¶é—´æˆ³è¶…æœŸçš„é”™è¯¯ï¼Œå†èŽ·å–ä¸€æ¬¡å³å¯ã€‚è‡³äºŽè¿™ä¸ªé”™è¯¯çš„è¯·æ±‚ï¼Œå¯ä»¥åœ¨è®¡ç®—å‡ºæ—¶é—´å·®ä¹‹åŽï¼Œå†é‡æ–°è¯·æ±‚ä¸€æ¬¡ã€‚ è·Ÿç€ä¸Šè¿°çš„æ€è·¯ï¼Œæˆ‘ä»¬è‡ªç„¶è€Œç„¶æƒ³åˆ°åœ¨è¯·æ±‚å›žè°ƒåŸºç±»é‡Œç­›é€‰è¿™ä¸ªæ—¶é—´æˆ³è¶…æœŸé”™è¯¯ï¼Œç­›é€‰å‡ºè¿™ä¸ªé”™è¯¯åŽï¼ŒåŒæ­¥è¯·æ±‚ä¸€æ¬¡æœåŠ¡å™¨æ—¶é—´æˆ³ï¼Œå†è¿›è¡Œä¸€æ¬¡ä¹‹å‰çš„è¯·æ±‚ã€‚æƒ³æƒ³å°±å¾ˆå›°éš¾ï¼Œå› ä¸ºè¦ä¿è¯åœ¨å­çº¿ç¨‹é‡Œå®Œæˆï¼Œè¿˜è¦è®°ä½ä¹‹å‰çš„è¯·æ±‚æ˜¯ä»€ä¹ˆï¼Œè¿™æ¡è·¯èµ°ä¸é€šã€‚ ä¸å–å…³å­äº†ï¼Œokhttpçš„æ‹¦æˆªå™¨å¯ä»¥è§£å†³ä»¥ä¸Šé—®é¢˜ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263Interceptor interceptor = new Interceptor() &#123; @Override public Response intercept(Chain chain) throws IOException &#123; Request request = chain.request(); Response response= chain.proceed(request); ResponseBody body = response.body(); BufferedSource source = body.source(); source.request(Long.MAX_VALUE); Buffer buffer = source.buffer(); Charset charset = Charset.forName("UTF-8"); String json = buffer.clone().readString(charset); BaseBean baseBean = gson.fromJson(json, BaseBean.class); String code = baseBean.getCode(); if (code.equals("0210")) &#123;// æ—¶é—´æˆ³è¶…æœŸ // åŒæ­¥è¯·æ±‚æ—¶é—´æˆ³ Request timeRequest = new Request.Builder() .url("http://uc.hivoice.cn:80/timestamp.jsp") .build(); Response timeResponse = chain.proceed(timeRequest); int timeCode = timeResponse.code(); if (timeCode == 200) &#123; // è®¡ç®—æ—¶é—´å·® String timestamp = timeResponse.body().string().trim(); long dTime = System.currentTimeMillis() / 1000 - Long.parseLong(timestamp); SpUtil.setDTime(dTime); // æž„å»ºæ–°çš„è¯·æ±‚ FormBody.Builder builder = new FormBody.Builder(); FormBody formBody = (FormBody) request.body(); List&lt;String&gt; param = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; formBody.size(); i++) &#123; String name = formBody.encodedName(i); if (name.equals("timestamp")) &#123; builder.add("timestamp", timestamp); param.add(timestamp); &#125; else if (!name.equals("signature")) &#123; String value = formBody.encodedValue(i); param.add(value); builder.add(name, value); &#125; &#125; String signature = SignUtil.getSignature(param); builder.add("signature", signature); Request newRequest = request.newBuilder().method("POST", builder.build()).build(); response = chain.proceed(newRequest); &#125; &#125; return response; &#125;&#125;; OkHttpClient httpClient = new OkHttpClient.Builder() .addInterceptor(interceptor) .build(); ä¸Šè¿°æ˜¯é’ˆå¯¹postè¯·æ±‚ï¼Œè€ƒè™‘åˆ°è¿™ç±»è¯·æ±‚å¤šå°‘postè¯·æ±‚å°±æ²¡æœ‰åŒºåˆ†ï¼Œå®žé™…é¡¹ç›®ä¸­å¦‚æžœæœ‰getè¯·æ±‚ä¹Ÿä¼šå‘ç”Ÿæ—¶é—´æˆ³è¶…æ—¶é—®é¢˜ï¼Œå¿…é¡»è¦åšåŒºåˆ†ã€‚ Tokentokenä¹Ÿæ˜¯è¿™æ ·ï¼Œå¾€å¾€æ˜¯APPå¯åŠ¨çš„æ—¶å€™èŽ·å–ä¸€æ¬¡ï¼Œä¿å­˜ä¸‹æ¥ï¼ŒåŽé¢çš„è¯·æ±‚ä¼ å…¥è¿™ä¸ªå‚æ•°å³å¯ã€‚ ä½†æ˜¯æœ‰äº›æƒ…å†µä¸‹ï¼Œä¼šé”™è¿‡è¿™ä¸ªèŽ·å–æ—¶æœºï¼š â€‹ 1ã€APPå¯åŠ¨æ—¶æ‰‹æœºæ²¡æœ‰è”ç½‘ï¼Œå¯åŠ¨ä»¥åŽæ‰è”ç½‘ï¼› â€‹ 2ã€ç”¨æˆ·å¯åŠ¨APPä»¥åŽä¸€ç›´æ²¡æœ‰é€€å‡ºï¼Œç›´åˆ°tokenè¿‡æœŸã€‚ å¯¹äºŽç¬¬ä¸€ç§æƒ…å†µï¼Œæœ‰äººè¯´å¯ä»¥æ³¨å†Œå¹¿æ’­æŽ¥æ”¶è€…ï¼Œç›‘æµ‹æ‰‹æœºçš„ç½‘ç»œçŠ¶æ€ï¼Œå¦‚æžœå¯åŠ¨çš„æ—¶å€™æ²¡æœ‰ç½‘ç»œåˆ™ç”¨æˆ·è”ç½‘ä»¥åŽå†èŽ·å–tokenï¼Œè¿™ä¸ªæ€è·¯æ˜¯å¯¹çš„ï¼Œä½†æ˜¯æœ‰ä¸€ç§æƒ…å†µæ˜¯ç›‘æµ‹ä¸åˆ°ç½‘ç»œå˜åŒ–çš„ï¼Œå³ç”¨æˆ·ç”¨å®‰å…¨ç®¡å®¶ä¹‹ç±»çš„è½¯ä»¶ç¦äº†APPçš„ç½‘ç»œçš„æƒ…å†µã€‚ å½“ç„¶ï¼Œå¯ä»¥æç¤ºç”¨æˆ·é€€å‡ºAPPï¼Œé‡æ–°è¿›å…¥ã€‚ä½†æ˜¯å‰é¢è¯´è¿‡ï¼Œè¿™æ ·åšä¸å¤ªä¼˜é›…ï¼Œè€Œä¸”ä¸»æµAPPä¹Ÿæ²¡æœ‰å‘çŽ°è¿‡è¿™ç§æƒ…å†µã€‚ ç»¼ä¸Šæ‰€è¿°ï¼ŒtokenéªŒè¯å¤±è´¥çš„å¤„ç†ä¹Ÿåº”è¯¥ç”¨okhttpçš„æ‹¦æˆªå™¨å¤„ç†ï¼Œæ€è·¯å’Œæ­¥éª¤ä¸Žæ—¶é—´æˆ³ä¸€è‡´ï¼Œä¸å†é‡å¤ã€‚ å…³äºŽæ€§èƒ½æœ‰äººå¯èƒ½ä¼šæ‹…å¿ƒæ€§èƒ½é—®é¢˜ï¼Œè‚¯å®šä¼šæœ‰å½±å“ï¼Œä½†æ˜¯å½±å“æžå…¶æœ‰é™ï¼Œå› ä¸ºå®˜æ–¹å‡ºå“çš„æ—¥å¿—æ‹¦æˆªå™¨ä¹Ÿæ˜¯è¿™ä¹ˆåšçš„ï¼Œçœ‹ä¸å‡ºæœ‰ä»€ä¹ˆå½±å“ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>æ—¶é—´æˆ³è¶…æœŸ</tag>
        <tag>tokenæ•ˆéªŒå¤±è´¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼äºŒåä¸€ä¹‹æ¡¥æŽ¥æ¨¡å¼]]></title>
    <url>%2Fposts%2Fbf1f23e5.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ æ¡¥æŽ¥æ¨¡å¼ ä»‹ç»æ¡¥æŽ¥æ¨¡å¼ï¼ˆBridgePatternï¼‰ä¹Ÿç§°ä¸ºæ¡¥æ¢æ¨¡å¼ï¼Œæ˜¯ç»“æž„åž‹æ¨¡å¼ä¹‹ä¸€ã€‚åœ¨çŽ°å®žç”Ÿæ´»ä¸­å¤§å®¶éƒ½çŸ¥é“ â€æ¡¥æ¢â€œ æ˜¯è¿žæŽ¥æ²³é“ä¸¤å²¸çš„ä¸»è¦äº¤é€šæž¢çº½ï¼Œç®€è€Œè¨€ä¹‹å…¶ä½œç”¨å°±æ˜¯è¿žæŽ¥æ²³çš„ä¸¤è¾¹ï¼Œè€Œæˆ‘ä»¬çš„æ¡¥æŽ¥æ¨¡å¼ä¸ŽçŽ°å®žä¸­çš„æƒ…å†µå¾ˆç›¸ä¼¼ï¼Œä¹Ÿæ˜¯æ‰¿æ‹…ç€è¿žæŽ¥ â€ä¸¤è¾¹â€œ çš„ä½œç”¨ï¼Œé‚£ä¹ˆå…·ä½“æ˜¯å“ªä¸¤è¾¹å‘¢ï¼Ÿè¿™é‡Œå…ˆä¸ç€æ€¥ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å®šä¹‰å§ã€‚ å®šä¹‰å°†æŠ½è±¡éƒ¨åˆ†ä¸Žå®žçŽ°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°è¿›è¡Œå˜åŒ–ã€‚ ä½¿ç”¨åœºæ™¯ä»Žæ¨¡å¼çš„å®šä¹‰ä¸­æˆ‘ä»¬å¤§è‡´å¯ä»¥äº†è§£åˆ°ï¼Œè¿™é‡Œçš„ â€æ¡¥æ¢â€œ çš„ä½œç”¨å…¶å®žå°±æ˜¯è¿žæŽ¥ â€æŠ½è±¡éƒ¨åˆ†â€œ ä¸Ž â€œå®žçŽ°éƒ¨åˆ†â€ï¼Œä½†æ˜¯äº‹å®žä¸Šï¼Œä»»ä½•å¤šç»´åº¦å˜åŒ–ç±»æˆ–è€…è¯´å¤šä¸ªæ ‘çŠ¶ç±»ä¹‹é—´çš„è€¦åˆéƒ½å¯ä»¥ä½¿ç”¨æ¡¥æŽ¥æ¨¡å¼æ¥å®žçŽ°è§£è€¦ã€‚ UML ç±»å›¾ Abstraction: æŠ½è±¡éƒ¨åˆ† RefinedAbstraction: ä¼˜åŒ–çš„æŠ½è±¡éƒ¨åˆ† Implementor: å®žçŽ°éƒ¨åˆ† ConcreteImplementorA/B: å®žçŽ°éƒ¨åˆ†çš„å…·ä½“å®žçŽ°ã€‚ Client: å®¢æˆ·ç±»ï¼Œå®¢æˆ·ç«¯ç¨‹åºã€‚ ä»£ç ç¤ºä¾‹éœ€æ±‚èƒŒæ™¯: æˆ‘ä»¬åŽ»åº—é‡Œé¢ä¹°å’–å•¡ï¼Œå¯¹ä¸åŒçš„å’–å•¡ä¸åŒçš„å®šä¹‰ã€‚ å’–å•¡æŠ½è±¡ç±»: 1234567891011121314public abstract class coffee &#123; protected CoffeeAdditives impl; public coffee(CoffeeAdditives impl) &#123; this.impl = impl; &#125; /** * åˆ¶ä½œä»€ä¹ˆå¾—å’–å•¡ç”±å­ç±»å†³å®š */ public abstract void makeCoffee();&#125; å¤§æ¯å’–å•¡åˆ¶ä½œå…·ä½“ç±»: 1234567891011public class LargeCoffee extends coffee&#123; public LargeCoffee(CoffeeAdditives impl) &#123; super(impl); &#125; @Override public void makeCoffee() &#123; System.out.println("åˆ¶ä½œå¤§æ¯å’–å•¡-&gt;" + impl.addSomething()); &#125;&#125; å°æ¯å’–å•¡åˆ¶ä½œå…·ä½“ç±»: 12345678910public class SmallCoffee extends coffee &#123; public SmallCoffee(CoffeeAdditives impl) &#123; super(impl); &#125; @Override public void makeCoffee() &#123; System.out.println("åˆ¶ä½œå°æ¯å’–å•¡"+ impl.addSomething()); &#125;&#125; å’–å•¡åŠ ç³–/åŽŸå‘³æŠ½è±¡ç±»: 1234public interface CoffeeAdditives &#123; public String addSomething();&#125; å’–å•¡åŠ ç³–/åŽŸå‘³å…·ä½“ç±»: 1234567891011121314public class Ordinary implements CoffeeAdditives &#123; @Override public String addSomething() &#123; return "åŽŸå‘³"; &#125;&#125;å¤åˆ¶ä»£ç public class Sugar implements CoffeeAdditives &#123; @Override public String addSomething() &#123; return "åŠ ç³–"; &#125;&#125; test: 1234567891011121314151617181920@Testpublic void testBridge()&#123; //åŽŸå‘³ CoffeeAdditives coffeeAdditives = new Ordinary(); //åŠ ç³– CoffeeAdditives coffeeAdditives1 = new Sugar(); //å¤§æ¯åŽŸå‘³ LargeCoffee largeCoffee = new LargeCoffee(coffeeAdditives); largeCoffee.makeCoffee(); //å°æ¯åŽŸå‘³ SmallCoffee smallCoffee = new SmallCoffee(coffeeAdditives); smallCoffee.makeCoffee(); //å¤§æ¯åŠ ç³– LargeCoffee largeCoffee2 = new LargeCoffee(coffeeAdditives1); largeCoffee2.makeCoffee(); //å°æ¯åŠ ç³– SmallCoffee smallCoffee3 = new SmallCoffee(coffeeAdditives1); smallCoffee3.makeCoffee();&#125; output: 1234åˆ¶ä½œå¤§æ¯å’–å•¡-&gt;åŽŸå‘³åˆ¶ä½œå°æ¯å’–å•¡åŽŸå‘³åˆ¶ä½œå¤§æ¯å’–å•¡-&gt;åŠ ç³–åˆ¶ä½œå°æ¯å’–å•¡åŠ ç³– ä»Žä¸Šé¢ä»£ç å¯ä»¥çŸ¥é“ï¼Œä¸ç®¡ Coffee å˜åŒ–äº†è¿˜æ˜¯ CoffeeAdditives å˜åŒ–äº†ï¼Œå…¶ç›¸å¯¹äºŽå¯¹æ–¹è€Œè¨€éƒ½æ˜¯ç‹¬ç«‹çš„æ²¡æœ‰ä»€ä¹ˆè¿‡å¤šçš„äº¤é›†ï¼Œä¸¤è€…ä¹‹é—´å”¯ä¸€çš„è”ç³»å°±æ˜¯ Coffee ä¸­ä¿æŒçš„å¯¹ Coffeeadditives çš„å¼•ç”¨ï¼Œå°±æ˜¯å¼€å¤´ä»‹ç»æ‰€è¯´çš„æž¢çº½ï¼Œè¿™å°±æ˜¯æ¡¥æŽ¥æ¨¡å¼çš„ç®€å•ç¤ºä¾‹ã€‚ æ€»ç»“ä¼˜ç‚¹: åˆ†ç¦»æŠ½è±¡ä¸Žå®žçŽ°ã€çµæ´»çš„æ‰©å±•ã€‚ ç¼ºç‚¹: ä¸å®¹æ˜“è®¾è®¡ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>æ¡¥æŽ¥æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼äºŒåä¹‹å¤–è§‚æ¨¡å¼]]></title>
    <url>%2Fposts%2F3b61575f.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ å¤–è§‚æ¨¡å¼ ä»‹ç»å¤–è§‚æ¨¡å¼ (Facade) åœ¨å¼€å‘è¿‡ç¨‹ä¸­çš„è¿ç”¨è¯„çŽ‡éžå¸¸é«˜ï¼Œå°¤å…¶æ˜¯åœ¨çŽ°é˜¶æ®µï¼Œå„ç§ç¬¬ä¸‰æ–¹ SDK â€œå……æ–¥â€ åœ¨æˆ‘ä»¬å‘¨è¾¹ï¼Œè€Œè¿™äº› SDK å¤§å¤šä¼šä½¿ç”¨å¤–è§‚æ¨¡å¼ã€‚é€šè¿‡ä¸€ä¸ªå¤–è§‚ç±»ä½¿å¾—æ•´ä¸ªç³»ç»Ÿçš„æŽ¥å£åªæœ‰ä¸€ä¸ªç»Ÿä¸€çš„é«˜å±‚æŽ¥å£ï¼Œè¿™æ ·èƒ½å¤Ÿé™ä½Žç”¨æˆ·çš„ä½¿ç”¨æˆæœ¬ï¼Œä¹Ÿå¯¹ç”¨æˆ·å±è”½äº†å¾ˆå¤šå®žçŽ°ç»†èŠ‚ã€‚å½“ç„¶ï¼Œåœ¨æˆ‘ä»¬çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¤–è§‚æ¨¡å¼ä¹Ÿæ˜¯æˆ‘ä»¬å°è£… API çš„å¸¸ç”¨æ‰‹æ®µï¼Œä¾‹å¦‚ï¼Œç½‘è·¯æ¨¡å—ã€å›¾ç‰‡æ¨¡å—ï¼Œå¯èƒ½ä½ å·²ç»åœ¨å¼€å‘ä¸­è¿ç”¨æ— æ•°æ¬¡å¤–è§‚æ¨¡å¼ï¼Œåªæ˜¯æ²¡æœ‰åœ¨ç†è®ºä¸­è®¤è¯†å®ƒï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥å­¦ä¹ å®ƒã€‚ å®šä¹‰è¦æ±‚ä¸€ä¸ªå­ç³»ç»Ÿçš„å¤–éƒ¨ä¸Žå…¶å†…éƒ¨çš„é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¯¹è±¡è¿›è¡Œã€‚é—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æŽ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºŽä½¿ç”¨ã€‚ ä½¿ç”¨åœºæ™¯ ä¸ºä¸€ä¸ªå¤æ‚å­ç³»ç»Ÿæä¾›ä¸€ä¸ªç®€å•æŽ¥å£ã€‚å­ç³»ç»Ÿå¾€å¾€å› ä¸ºä¸æ–­æ¼”åŒ–è€Œå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œç”šè‡³å¯èƒ½è¢«æ›¿æ¢ã€‚å¤§å¤šæ•°æ¨¡å¼ä½¿ç”¨æ—¶éƒ½ä¼šäº§ç”Ÿæ›´å¤šã€æ›´å°çš„ç±»ï¼Œè¿™ä½¿å­ç³»ç»Ÿæ›´å…·å¯é‡ç”¨æ€§çš„åŒæ—¶ä¹Ÿæ›´å®¹æ˜“å¯¹å­ç³»ç»Ÿè¿›è¡Œå®šåˆ¶ã€ä¿®æ”¹ï¼Œè¿™ç§æ˜“å˜æ€§ä½¿å¾—éšè—å­ç³»ç»Ÿçš„å…·ä½“å®žçŽ°å˜å¾—å°¤ä¸ºé‡è¦ã€‚Facade å¯ä»¥æä¾›ä¸€ä¸ªç®€å•ç»Ÿä¸€çš„æŽ¥å£ï¼Œå¯¹å¤–éšè—å­ç³»ç»Ÿçš„å…·ä½“å®žçŽ°ã€éš”ç¦»å˜åŒ–ã€‚ å½“ä½ éœ€è¦æž„å»ºä¸€ä¸ªå±‚æ¬¡ç»“æž„çš„å­ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨ Facade æ¨¡å¼å®šä¹‰å­ç³»ç»Ÿä¸­æ¯å±‚çš„å…¥å£ç‚¹ã€‚å¦‚æžœå­ç³»ç»Ÿä¹‹é—´æ˜¯ç›¸äº’ä¾èµ–çš„ï¼Œä½ å¯ä»¥è®©å®ƒä»¬ä»…é€šè¿‡ Facade æŽ¥å£è¿›è¡Œé€šä¿¡ï¼Œä»Žè€Œç®€åŒ–äº†å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ UML ç±»å›¾ Facade: ç³»ç»Ÿå¯¹å¤–çš„ç»Ÿä¸€æŽ¥å£ï¼Œç³»ç»Ÿå†…éƒ¨ç³»ç»Ÿåœ°å·¥ä½œã€‚ ä»£ç ç¤ºä¾‹éœ€æ±‚èƒŒæ™¯:æ‰‹æœºçš„å¤–è§‚æ¨¡å¼ï¼ˆç”µè¯åŠŸèƒ½ï¼ŒçŸ­ä¿¡åŠŸèƒ½ï¼ŒGPS, æ‹ç…§ï¼‰ æ‰‹æœºæŠ½è±¡ç±»: 1234567891011121314151617181920212223242526public abstract class AbstractMobile &#123; /** * å®šä¹‰ä¸€ä¸ªæ‰“ç”µè¯åŠŸèƒ½ */ protected Phone phone = null; /** * å®šä¹‰ä¸€ä¸ªæ‹ç…§åŠŸèƒ½ */ protected ICamera camera = null; public AbstractMobile(Phone phone, ICamera camera) &#123; this.phone = phone; this.camera = camera; &#125; public abstract void dail(); public abstract void videoChat(); public abstract void hangup(); public abstract void takePicture(); public abstract void stop();&#125; æ‰‹æœºå®žçŽ°ç±»: 12345678910111213141516171819202122232425262728293031323334353637public class MobilePhone extends AbstractMobile &#123; public MobilePhone(Phone phone, ICamera camera) &#123; super(phone, camera); &#125; public void dail() &#123; phone.dail(); &#125; ; @Override public void videoChat() &#123; System.out.println("è§†é¢‘èŠå¤©å‘¼å«ä¸­..."); camera.openCamera(); &#125; @Override public void hangup() &#123; phone.hangup(); &#125; @Override public void takePicture() &#123; camera.takePicture(); &#125; @Override public void stop() &#123; camera.stop(); phone.hangup(); &#125;&#125; åŠŸèƒ½æŽ¥å£ç±» 1234567891011public interface Phone &#123; /** * æ‰“ç”µè¯ */ public void dail(); /** * æŒ‚æ–­ */ public void hangup();&#125; 1234567891011121314151617public interface ICamera &#123; /** * æ‰“å¼€ç›¸æœºé¢„è§ˆ */ public void openCamera(); /** * æ‹ç…§ */ public void takePicture(); /** * å…³é—­ç›¸æœº */ public void stop();&#125; åŠŸèƒ½å®žçŽ°ç±»: 12345678910111213141516public class CameraImpl implements ICamera &#123; @Override public void openCamera() &#123; System.out.println("æ‰“å¼€ç›¸æœº"); &#125; @Override public void takePicture() &#123; System.out.println("æ‹ç…§"); &#125; @Override public void stop() &#123; System.out.println("å…³é—­ç›¸æœº"); &#125;&#125; 1234567891011public class PhoneImpl implements Phone &#123; @Override public void dail() &#123; System.out.println("æ‰“ç”µè¯"); &#125; @Override public void hangup() &#123; System.out.println("æŒ‚æ–­ç”µè¯"); &#125;&#125; test: 123456789101112@Testpublic void testFacade()&#123; Phone phone = new PhoneImpl(); ICamera camera = new CameraImpl(); MobilePhone mobilePhone = new MobilePhone(phone,camera); mobilePhone.dail(); mobilePhone.videoChat(); mobilePhone.takePicture(); mobilePhone.stop();&#125; output: 123456æ‰“ç”µè¯è§†é¢‘èŠå¤©å‘¼å«ä¸­...æ‰“å¼€ç›¸æœºæ‹ç…§å…³é—­ç›¸æœºæŒ‚æ–­ç”µè¯ ä»Žä¸Šè¿°ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œå¤–è§‚æ¨¡å¼å°±æ˜¯ç»Ÿä¸€æŽ¥å£å°è£…ã€‚å°†å­ç³»ç»Ÿçš„é€»è¾‘ã€äº¤äº’éšè—èµ·æ¥ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æŽ¥å£ï¼Œæ˜¯çš„ç³»ç»Ÿæ›´åŠ æ˜“ç”¨ï¼ŒåŒæ—¶ä¹Ÿå¯¹å¤–éšè—äº†å…·ä½“çš„å®žçŽ°ï¼Œè¿™æ ·å³ä½¿å…·ä½“çš„å­ç³»ç»Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œç”¨æˆ·ä¹Ÿä¸ä¼šçŸ¥é“ï¼Œå› ä¸ºç”¨æˆ·ä½¿ç”¨çš„æ˜¯ Facade é«˜å±‚æ¬¡æŽ¥å£ï¼Œå†…éƒ¨çš„å˜åŒ–å¯¹äºŽç”¨æˆ·æ¥è¯´å¹¶ä¸å¯è§ã€‚è¿™æ ·ä¸€æ¥å°±å°†å˜åŒ–éš”ç¦»å¼€æ¥ï¼Œä½¿å¾—ç³»ç»Ÿæ›´ä¸ºçµæ´»ã€‚ æ€»ç»“å¤–è§‚æ¨¡å¼æ˜¯ä¸€ä¸ªä½¿ç”¨é¢‘çŽ‡è¾ƒé«˜çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒçš„ç²¾é«“å°±åœ¨äºŽ â€å°è£…â€œ äºŒå­—ã€‚é€šè¿‡ä¸€ä¸ªé«˜å±‚æ¬¡ç»“æž„ä¸ºç”¨æˆ·æä¾›ç»Ÿä¸€çš„ API å…¥å£ï¼Œä½¿å¾—ç”¨æˆ·é€šè¿‡ä¸€ä¸ªç±»åž‹å°±åŸºæœ¬èƒ½å¤Ÿæ“ä½œæ•´ä¸ªç³»ç»Ÿï¼Œè¿™æ ·å‡å°‘äº†ç”¨æˆ·çš„æˆæœ¬ï¼Œä¹Ÿèƒ½å¤Ÿæå‡ç³»ç»Ÿçš„çµæ´»æ€§ã€‚ ä¼˜ç‚¹: å¯¹å®¢æˆ·ç¨‹åºéšè—å­ç³»ç»Ÿç»†èŠ‚ï¼Œå› è€Œå‡å°‘äº†å®¢æˆ·å¯¹äºŽå­ç³»ç»Ÿçš„è€¦åˆï¼Œèƒ½å¤Ÿæ‹¥æŠ±å˜åŒ–ã€‚ å¤–è§‚ç±»å¯¹å­ç³»ç»Ÿçš„æŽ¥å£å°è£…ï¼Œä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºŽä½¿ç”¨ã€‚ ç¼ºç‚¹: å¤–è§‚ç±»æŽ¥å£è†¨èƒ€ã€‚ç”±äºŽå­ç³»ç»Ÿçš„æŽ¥å£éƒ½æœ‰å¤–è§‚ç±»ç»Ÿä¸€å¯¹å¤–æš´éœ²ï¼Œä½¿å¾—å¤–è§‚ç±»çš„ API æŽ¥å£è¾ƒå¤šï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢žåŠ äº†ç”¨æˆ·ä½¿ç”¨æˆæœ¬ã€‚ å¤–è§‚ç±»æ²¡æœ‰éµå¾ªå¼€é—­åŽŸåˆ™ï¼Œå½“ä¸šåŠ¡å‡ºçŽ°æ›´æ¢æ—¶ï¼Œå¯èƒ½éœ€è¦ç›´æŽ¥ä¿®æ”¹å¤–è§‚ç±»ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å¤–è§‚æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åä¹ä¹‹äº«å…ƒæ¨¡å¼]]></title>
    <url>%2Fposts%2F7a00ed5e.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ äº«å…ƒæ¨¡å¼ ä»‹ç»äº«å…ƒæ¨¡å¼æ˜¯å¯¹è±¡æ± çš„ä¸€ç§å®žçŽ°ï¼Œäº«å…ƒæ¨¡å¼ç”¨æ¥å°½å¯èƒ½å‡å°‘å†…å­˜ä½¿ç”¨é‡ï¼Œå®ƒé€‚åˆç”¨äºŽå¯èƒ½å­˜åœ¨å¤§é‡é‡å¤å¯¹è±¡çš„åœºæ™¯ï¼Œæ¥ç¼“å­˜å¯å…±äº«çš„å¯¹è±¡ï¼Œè¾¾åˆ°å¯¹è±¡å…±äº«ã€é¿å…åˆ›å»ºè¿‡å¤šå¯¹è±¡çš„æ•ˆæžœï¼Œè¿™æ ·ä¸€æ¥å°±å¯ä»¥æå‡æ€§èƒ½ã€é¿å…å†…å­˜ç§»é™¤ç­‰ã€‚ å®šä¹‰ä½¿ç”¨å…±äº«å¯¹è±¡å¯ä»¥æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦çš„å¯¹è±¡ã€‚ ä½¿ç”¨åœºæ™¯ ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡çš„ç›¸ä¼¼å¯¹è±¡ã€‚ ç»†ç²’åº¦çš„å¯¹è±¡éƒ½å…·å¤‡è¾ƒæŽ¥è¿‘çš„å¤–éƒ¨çŠ¶æ€ï¼Œè€Œä¸”å†…éƒ¨çŠ¶æ€ä¸ŽçŽ¯å¢ƒæ— å…³ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹è±¡æ²¡æœ‰ç‰¹å®šèº«ä»½ã€‚ éœ€è¦ç¼“å†²æ± çš„åœºæ™¯ã€‚ UML ç±»å›¾ Flyweiget : äº«å…ƒå¯¹è±¡æŠ½è±¡åŸºç±»æˆ–è€…æŽ¥å£ ConcreteFlyweiget: å…·ä½“çš„äº«å…ƒå¯¹è±¡ã€‚ FlyweigetFactory: äº«å…ƒå·¥åŽ‚ï¼Œè´Ÿè´£ç®¡ç†äº«å…ƒå¯¹è±¡æ± å’Œåˆ›å»ºäº«å…ƒå¯¹è±¡ã€‚ ä»£ç ç¤ºä¾‹éœ€æ±‚èƒŒæ™¯: è¿‡å¹´å›žå®¶ä¹°è½¦ç¥¨ï¼Œå¦‚æžœåœ¨å¹¶å‘ 1W äººæ¬¡åŒæ—¶ http è¯·æ±‚æ•°æ®ï¼Œå¦‚æžœåŽå°æ¯æ¬¡éƒ½é‡æ–°åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢çš„è½¦ç¥¨ç»“æžœï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šé€ æˆå¤§é‡é‡å¤å¯¹è±¡çš„åˆ›å»ºã€é”€æ¯ã€ä½¿å¾— GC ä»»åŠ¡ç¹é‡ã€å†…å­˜é«˜å±…ä¸ä¸‹ã€‚ å±•ç¤ºè½¦ç¥¨ä¿¡æ¯æŽ¥å£ 123public interface Ticket &#123; public void showTicketInfo(String info);&#125; å±•ç¤ºè½¦ç¥¨å…·ä½“å®žçŽ°: 12345678910111213141516171819public class TrainTicket implements Ticket &#123; public String from; public String to; public String bunk; public int price; public TrainTicket(String from, String to) &#123; this.from = from; this.to = to; &#125; @Override public void showTicketInfo(String info) &#123; bunk = info; price = new Random().nextInt(300); System.out.println("è´­ä¹°ä»Ž" + from + " -&gt; " + to + "çš„ " + bunk + " ç«è½¦ç¥¨ ï¼Œä»·æ ¼ï¼š" + price); &#125;&#125; è½¦ç¥¨ä¿¡æ¯ç®¡ç†: 12345678910111213141516171819public class TicketFactory &#123; static Map&lt;String, Ticket&gt; sTicketMap = new ConcurrentHashMap&lt;&gt;(); public static Ticket getTicket(String from, String to) &#123; String key = from + "-" + to; if (sTicketMap.containsKey(key)) &#123; //ä½¿ç”¨å·²ç»å­˜åœ¨çš„å¯¹è±¡ System.out.println("ä½¿ç”¨å­˜åœ¨çš„å¯¹è±¡ = [" + from + "], to = [" + to + "]"); return sTicketMap.get(key); &#125; else &#123; System.out.println("åˆ›å»ºå¯¹è±¡ = [" + from + "], to = [" + to + "]"); TrainTicket trainTicket = new TrainTicket(from, to); sTicketMap.put(key, trainTicket); return trainTicket; &#125; &#125;&#125; test: 1234567891011121314151617@Testpublic void testFlaweiget()&#123; Ticket ticket1 = TicketFactory.getTicket("åŒ—äº¬", "ä¸Šæµ·"); ticket1.showTicketInfo("ä¸Šé“º"); Ticket ticket7 = TicketFactory.getTicket("åŒ—äº¬", "ä¸Šæµ·"); ticket7.showTicketInfo("ä¸‹é“º"); Ticket ticket2 = TicketFactory.getTicket("åŒ—äº¬", "ä¸Šæµ·"); ticket2.showTicketInfo("ä¸Šé“º"); Ticket ticket3 = TicketFactory.getTicket("åŒ—äº¬", "ä¸Šæµ·"); ticket3.showTicketInfo("ä¸Šé“º"); Ticket ticket4 = TicketFactory.getTicket("åŒ—äº¬", "æˆéƒ½"); ticket4.showTicketInfo("ä¸‹é“º"); Ticket ticket5 = TicketFactory.getTicket("åŒ—äº¬", "ä¸Šæµ·"); ticket5.showTicketInfo("ä¸Šé“º"); Ticket ticket6 = TicketFactory.getTicket("åŒ—äº¬", "ä¸Šæµ·"); ticket6.showTicketInfo("ä¸Šé“º");&#125; output: 1234567891011121314åˆ›å»ºå¯¹è±¡ = [åŒ—äº¬], to = [ä¸Šæµ·]è´­ä¹°ä»ŽåŒ—äº¬ -&gt; ä¸Šæµ·çš„ ä¸Šé“º ç«è½¦ç¥¨ ï¼Œä»·æ ¼ï¼š36ä½¿ç”¨å­˜åœ¨çš„å¯¹è±¡ = [åŒ—äº¬], to = [ä¸Šæµ·]è´­ä¹°ä»ŽåŒ—äº¬ -&gt; ä¸Šæµ·çš„ ä¸‹é“º ç«è½¦ç¥¨ ï¼Œä»·æ ¼ï¼š261ä½¿ç”¨å­˜åœ¨çš„å¯¹è±¡ = [åŒ—äº¬], to = [ä¸Šæµ·]è´­ä¹°ä»ŽåŒ—äº¬ -&gt; ä¸Šæµ·çš„ ä¸Šé“º ç«è½¦ç¥¨ ï¼Œä»·æ ¼ï¼š100ä½¿ç”¨å­˜åœ¨çš„å¯¹è±¡ = [åŒ—äº¬], to = [ä¸Šæµ·]è´­ä¹°ä»ŽåŒ—äº¬ -&gt; ä¸Šæµ·çš„ ä¸Šé“º ç«è½¦ç¥¨ ï¼Œä»·æ ¼ï¼š247åˆ›å»ºå¯¹è±¡ = [åŒ—äº¬], to = [æˆéƒ½]è´­ä¹°ä»ŽåŒ—äº¬ -&gt; æˆéƒ½çš„ ä¸‹é“º ç«è½¦ç¥¨ ï¼Œä»·æ ¼ï¼š224ä½¿ç”¨å­˜åœ¨çš„å¯¹è±¡ = [åŒ—äº¬], to = [ä¸Šæµ·]è´­ä¹°ä»ŽåŒ—äº¬ -&gt; ä¸Šæµ·çš„ ä¸Šé“º ç«è½¦ç¥¨ ï¼Œä»·æ ¼ï¼š262ä½¿ç”¨å­˜åœ¨çš„å¯¹è±¡ = [åŒ—äº¬], to = [ä¸Šæµ·]è´­ä¹°ä»ŽåŒ—äº¬ -&gt; ä¸Šæµ·çš„ ä¸Šé“º ç«è½¦ç¥¨ ï¼Œä»·æ ¼ï¼š114 ä»Žä¸Šé¢çš„æŸ¥è¯¢ç»“æžœå¾—çŸ¥ï¼Œå¦‚æžœå·²ç»æŸ¥è¯¢äº†å°±ä½¿ç”¨ç¼“å­˜ï¼Œæ²¡æœ‰å°±åˆ›å»ºå¯¹è±¡ã€‚ æ€»ç»“äº«å…ƒæ¨¡å¼æ˜¯å®žçŽ°æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å®ƒçš„ä½œç”¨åœ¨æŸäº›åœºæ™¯ç¡®å®žæžå…¶é‡è¦çš„ã€‚å®ƒå¯ä»¥å¤§å¤§å‡å°‘åº”ç”¨ç¨‹åºåˆ›å»ºçš„å¯¹è±¡ï¼Œé™ä½Žç¨‹åºå†…å­˜çš„å ç”¨ï¼Œå¢žå¼ºç¨‹åºçš„æ€§èƒ½ï¼Œä½†å®ƒåŒæ—¶ä¹Ÿæé«˜äº†ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œéœ€è¦åˆ†ç¦»å‡ºå¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€ï¼Œè€Œä¸”å¤–éƒ¨çŠ¶æ€å…·æœ‰å›ºåŒ–ç‰¹æ€§ï¼Œä¸åº”è¯¥éšå†…éƒ¨çŠ¶æ€æ”¹å˜è€Œæ”¹å˜ï¼Œå¦åˆ™å¯¼è‡´ç³»ç»Ÿçš„é€»è¾‘æ··ä¹±ã€‚ äº«å…ƒæ¨¡å¼çš„æœ‰ç‚¹åœ¨äºŽå¤§å¹…åº¦åœ°é™ä½Žå†…å­˜ä¸­å¯¹è±¡çš„æ•°é‡ã€‚ä½†æ˜¯ï¼Œå®ƒåšåˆ°è¿™ä¸€ç‚¹æ‰€ä»˜å‡ºçš„ä»£ä»·ä¹Ÿæ˜¯å¾ˆé«˜çš„ã€‚ äº«å…ƒæ¨¡å¼ä½¿å¾—ç³»ç»Ÿæ›´åŠ å¤æ‚ã€‚ä¸ºäº†ä½¿å¯¹è±¡å¯ä»¥å…±äº«ï¼Œéœ€è¦å°†ä¸€äº›çŠ¶æ€å¤–éƒ¨åŒ–ï¼Œè¿™ä½¿å¾—ç¨‹åºçš„é€»è¾‘å¤æ‚åŒ–ã€‚ äº«å…ƒæ¨¡å¼å°†äº«å…ƒå¯¹è±¡çš„çŠ¶æ€å¤–éƒ¨åŒ–ï¼Œè€Œè¯»å–å¤–éƒ¨çŠ¶æ€ä½¿å¾—è¿è¡Œæ—¶é—´ç¨å¾®å˜é•¿ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>äº«å…ƒæ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åå…«ä¹‹è£…é¥°æ¨¡å¼]]></title>
    <url>%2Fposts%2F9cdd1e4f.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ è£…é¥°æ¨¡å¼ ä»‹ç»è£…é¥°æ¨¡å¼ (ä¹Ÿç§°ä¸º Decorator Pattern) ä¹Ÿç§°ä¸ºåŒ…è£…æ¨¡å¼ï¼Œå±žäºŽç»“æž„åž‹æ¨¡å¼ä¹‹ä¸€ï¼Œå…¶ä½¿ç”¨ä¸€ç§å¯¹å®¢æˆ·ç«¯é€æ˜Žçš„æ–¹å¼æ¥åŠ¨æ€çš„æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ç»§æ‰¿å…³ç³»çš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆä¹‹ä¸€ã€‚åœ¨çŽ°å®žç”Ÿæ´»ä¸­ä½ ä¹Ÿçœ‹è§å¾ˆå¤šè£…é¥°æ¨¡å¼çš„ä¾‹å­ï¼Œæˆ–è€…å¯ä»¥å¤§èƒ†åœ°è¯´è£…é¥°æ¨¡å¼æ— å¤„ä¸åœ¨ï¼Œå°±æ‹¿äººæ¥è¯´ï¼Œäººéœ€è¦å„å¼å„æ ·çš„è¡£ç€ï¼Œä¸ç®¡ä½ ç©¿ç€æ€Žä¹ˆï¼Œä½†æ˜¯ï¼Œå¯¹äºŽä¸ªäººçš„æœ¬è´¨æ¥è¯´æ˜¯ä¸å˜çš„ï¼Œå……å…¶é‡åªæ˜¯åœ¨å¤–é¢æŠ«ä¸Šä¸€å±‚ â€œé®ç¾žç‰©â€ è€Œå·²ï¼Œè¿™å°±æ˜¯è£…é¥°æ¨¡å¼ã€‚ å®šä¹‰åŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡ç”°çˆ±å†›ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±æ˜¯å¢žåŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚ ä½¿ç”¨åœºæ™¯éœ€è¦é€æ˜Žä¸”åŠ¨æ€åœ°æ‰©å±•ç±»çš„åŠŸèƒ½æ—¶ã€‚ UML ç±»å›¾ Component: æŠ½è±¡ç»„ä»¶ï¼Œå¯ä»¥è¯•ä¸€ä¸ªæŽ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå…¶å……å½“çš„å°±æ˜¯è¢«è£…é¥°çš„åŽŸå§‹å¯¹è±¡ã€‚ ConcreteComponent: ç»„ä»¶å…·ä½“å®žçŽ°ç±»ï¼Œè¯¥ç±»æ˜¯ Component ç±»çš„åŸºæœ¬å®žçŽ°ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬è£…é¥°çš„å…·ä½“å¯¹è±¡ã€‚ Decorator: æŠ½è±¡è£…é¥°è€…ã€‚ ConcreteDecorator: è£…é¥°è€…å…·ä½“å®žçŽ°ç±» ä»£ç ç¤ºä¾‹ä¸šåŠ¡èƒŒæ™¯: ä¸º boy ç©¿è¡£ å®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„ç©¿è¡£è¡Œä¸º: 1234567public abstract class Person &#123; /** * Person ä¸‹æœ‰ä¸€ä¸ªç©¿ç€çš„æŠ½è±¡æ–¹æ³• */ public abstract void dressed();&#125; å£°æ˜Žä¸€ä¸ªå…·ä½“è¡Œä¸ºå®žçŽ°: 123456public class Boy extends Person &#123; @Override public void dressed() &#123; System.out.println("ç”·å­©ç©¿ç€å†…è£¤"); &#125;&#125; å®šä¹‰ä¸€ä¸ªç”¨æ¥è£…é¥°å…·ä½“è¡Œä¸ºçš„æŠ½è±¡: 12345678910111213public abstract class PersonCloth extends Person &#123; protected Person person ; public PersonCloth(Person person) &#123; this.person = person; &#125; @Override public void dressed() &#123; person.dressed(); &#125;&#125; å…·ä½“è£…é¥°å®žçŽ°: 12345678910111213141516171819202122232425262728public class ExpensiveCloth extends PersonCloth &#123; public ExpensiveCloth(Person person) &#123; super(person); &#125; @Override public void dressed() &#123; super.dressed(); //ç©¿çŸ­è¢– dressShirt(); //ç©¿çš®è¡£ dressLeather(); //ç©¿ç‰›ä»”è£¤ dressJean(); &#125; private void dressShirt() &#123; System.out.println("ç©¿ä¸ŠçŸ­è¢–"); &#125; private void dressLeather() &#123; System.out.println("ç©¿ä¸Šçš®è¡£"); &#125; private void dressJean() &#123; System.out.println("ç©¿ä¸Šç‰›ä»”è£¤"); &#125;&#125; 123456789101112131415public class CheapCloth extends PersonCloth &#123; public CheapCloth(Person person) &#123; super(person); &#125; @Override public void dressed() &#123; super.dressed(); dressShorts(); &#125; private void dressShorts() &#123; System.out.println("ç©¿æ¡çŸ­è£¤"); &#125;&#125; test: 1234567891011121314@Testpublic void testDecorator()&#123; //é¦–å…ˆå¾—æœ‰ä¸€ä¸ªç”·å­© Person person = new Boy(); //å…ˆç©¿ä¸Šä¾¿å®œçš„è¡£æœ PersonCloth cheapCloth = new CheapCloth(person); cheapCloth.dressed(); //æˆ–è€…åœ¨ç©¿ä¸Šæœ‰ç‚¹æ¡£æ¬¡çš„è¡£æœ PersonCloth personCloth = new ExpensiveCloth(person); personCloth.dressed();&#125; output: 1234567ç”·å­©ç©¿ç€å†…è£¤ç©¿æ¡çŸ­è£¤ç”·å­©ç©¿ç€å†…è£¤ç©¿ä¸ŠçŸ­è¢–ç©¿ä¸Šçš®è¡£ç©¿ä¸Šç‰›ä»”è£¤ æ€»ç»“è£…é¥°æ¨¡å¼å’Œæˆ‘ä»¬å‰é¢è®²çš„ ä»£ç†æ¨¡å¼ æœ‰ç‚¹ç±»ä¼¼ï¼Œæœ‰æ—¶å€™ç”šè‡³å®¹æ˜“æ··æ·†ï¼Œå€’ä¸æ˜¯è¯´ä¼šæŠŠä»£ç†å½“æˆè£…é¥°ï¼Œè€Œæ˜¯å¸¸å¸¸ä¼šæ˜¯å°†è£…é¥°çœ‹ä½œä»£ç†ï¼Œè£…é¥°æ¨¡å¼æ˜¯ä»¥å¯¹å®¢æˆ·ç«¯é€æ˜Žçš„æ–¹å¼æ‰©å±•å¯¹è±¡çš„åŠŸèƒ½ï¼Œæ˜¯ç»§æ‰¿å…³ç³»çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼›è€Œä»£ç†æ¨¡å¼åˆ™æ˜¯ç»™ä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶æœ‰ä»£ç†å¯¹è±¡æ¥æŽ§åˆ¶å¯¹åŽŸæœ‰çš„å¯¹è±¡çš„å¼•ç”¨ã€‚è£…é¥°æ¨¡å¼åº”è¯¥ä¸ºæ‰€è£…é¥°çš„å¯¹è±¡å¢žå¼ºåŠŸèƒ½ï¼›ä»£ç†æ¨¡å¼å¯¹ä»£ç†çš„å¯¹è±¡æ–½åŠ æŽ§åˆ¶ï¼Œä½†ä¸å¯¹å¯¹è±¡æœ¬èº«çš„åŠŸèƒ½è¿›è¡Œå¢žå¼ºã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>è£…é¥°æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åä¸ƒä¹‹é€‚é…å™¨æ¨¡å¼]]></title>
    <url>%2Fposts%2F16194dff.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ é€‚é…å™¨æ¨¡å¼ ä»‹ç»é€‚é…å™¨æ¨¡å¼åœ¨æˆ‘ä»¬å¼€å‘ä¸­ä½¿ç”¨çŽ‡æžé«˜ï¼Œä»Žæœ€æ—©çš„ ListViewã€GridView åˆ°çŽ°åœ¨çš„ RecyclerView éƒ½éœ€è¦ä½¿ç”¨ Adapter ï¼Œå¹¶ä¸”åœ¨å¼€å‘ä¸­æˆ‘ä»¬é‡åˆ°çš„ä¼˜åŒ–é—®é¢˜ï¼Œå‡ºé”™æ¦‚çŽ‡è¾ƒå¤§çš„åœ°æ–¹ä¹ŸåŸºæœ¬éƒ½å‡ºåœ¨ Adapter,è¿™æ˜¯ä¸€ä¸ªè®©äººåˆçˆ±åˆæ¨çš„è§’è‰²ã€‚ è¯´åˆ°åº•ï¼Œé€‚é…å™¨æ˜¯å°†ä¸¤ä¸ªä¸å…¼å®¹çš„ç±»èžåˆåˆ°ä¸€èµ·ï¼Œå®ƒæœ‰ç‚¹åƒç²˜åˆå‰‚ï¼Œå°†ä¸åŒçš„ä¸œè¥¿é€šè¿‡ä¸€ç§è½¬æ¢ä½¿å¾—å®ƒä»¬èƒ½å¤Ÿåä½œèµ·æ¥ã€‚ä¾‹å¦‚ï¼Œç»å¸¸ç¢°åˆ°è¦ä¸¤ä¸ªæ²¡æœ‰å…³ç³»çš„ç±»åž‹ä¹‹é—´è¿›è¡Œäº¤äº’ï¼Œç¬¬ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ä¿®æ”¹å„è‡ªç±»çš„æŽ¥å£ï¼Œä½†æ˜¯å¦‚æžœæ²¡æœ‰æºä»£ç æˆ–è€…æˆ‘ä»¬ä¸æ„¿æ„ä¸ºäº†ä¸€ä¸ªåº”ç”¨è€Œä¿®æ”¹å„è‡ªçš„æŽ¥å£ï¼Œæ­¤æ—¶æ€Žä¹ˆåŠžï¼Ÿè¿™ç§æƒ…å†µæˆ‘ä»¬å¾€å¾€ä¼šä½¿ç”¨ä¸€ä¸ª Adapter,åœ¨è¿™ä¸¤ç§æŽ¥å£ä¹‹é—´åˆ›å»ºä¸€ä¸ª â€œæ··è¡€å„¿â€ æŽ¥å£ï¼Œè¿™ä¸ª Adapter ä¼šå°†è¿™ä¸¤ä¸ªæŽ¥å£è¿›è¡Œå…¼å®¹ï¼Œåœ¨ä¸ä¿®æ”¹åŽŸæœ‰ä»£ç çš„æƒ…å†µä¸‹æ»¡è¶³éœ€æ±‚ã€‚ å®šä¹‰ é€‚é…å™¨æ¨¡å¼æŠŠä¸€ä¸ªç±»çš„æŽ¥å£å˜æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æŽ¥å£ï¼Œä»Žè€Œä½¿åŽŸæœ¬å› æŽ¥å£ä¸åŒ¹é…è€Œæ— æ³•åœ¨ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªç±»èƒ½å¤Ÿåœ¨ä¸€èµ·å·¥ä½œã€‚ ä½¿ç”¨åœºæ™¯ ç³»ç»Ÿéœ€è¦ä½¿ç”¨çŽ°æœ‰çš„ç±»ï¼Œè€Œæ­¤ç±»çš„æŽ¥å£ä¸ç¬¦åˆç³»ç»Ÿçš„éœ€è¦ï¼Œå³æŽ¥å£ä¸å…¼å®¹ã€‚ æƒ³è¦å»ºç«‹ä¸€ä¸ªå¯ä»¥é‡å¤ä½¿ç”¨çš„ç±»ï¼Œç”¨äºŽä¸€äº›å½¼æ­¤ä¹‹é—´æ²¡æœ‰å¤ªå¤§å…³è”çš„ç±»ï¼ŒåŒ…æ‹¬ä¸€äº›å¯èƒ½åœ¨å°†æ¥å¼•è¿›çš„ç±»ä¸€èµ·å·¥ä½œã€‚ éœ€è¦ç»Ÿä¸€çš„è¾“å‡ºæŽ¥å£ï¼Œè€Œè¾“å…¥ç«¯çš„ç±»åž‹ä¸å¯é¢„çŸ¥ã€‚ UML ç±»å›¾ Target: ç›®æ ‡è§’è‰²ï¼Œä¹Ÿå°±æ˜¯æ‰€æœŸå¾…å¾—åˆ°çš„æŽ¥å£ã€‚æ³¨æ„ï¼šç”±äºŽè¿™é‡Œè®¨è®ºçš„æ˜¯ç±»é€‚é…å™¨ï¼Œå› æ­¤ç›®æ ‡ä¸å¯ä»¥æ˜¯ç±»ã€‚ Adaptee: çŽ°åœ¨éœ€è¦é€‚é…çš„æŽ¥å£ã€‚ Adapter: é€‚é…å™¨è§’è‰²ï¼Œä¹Ÿæ˜¯æœ¬æ¨¡å¼çš„æ ¸å¿ƒã€‚é€‚é…å™¨æŠŠæºæŽ¥å£æ¢æˆç›®æ ‡æŽ¥å£ï¼Œå½“ç„¶ï¼Œè¿™ä¸€è§’è‰²ä¸å¯ä»¥æ˜¯æŽ¥å£ï¼Œè€Œå¿…é¡»æ˜¯å…·ä½“ç±»ã€‚ ä»£ç ç¤ºä¾‹ç®€å•ç¤ºä¾‹é€‚é…å™¨æ¨¡åˆ†ä¸ºä¸¤ç§ï¼Œå³ç±»é€‚é…å™¨å’Œå¯¹è±¡é€‚é…å™¨ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ç±»é€‚é…å™¨ã€‚ ä¸šåŠ¡èƒŒæ™¯: ç”¨ç”µæºæŽ¥å£åšä¾‹å­ï¼Œç¬”è®°æœ¬ç”µè„‘çš„ç”µæºä¸€èˆ¬æ˜¯ 5V ç”µåŽ‹ï¼Œä½†æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­çš„ç”µçº¿ç”µåŽ‹ä¸€èˆ¬éƒ½æ˜¯ 220V ã€‚è¿™ä¸ªæ—¶å€™å°±å‡ºçŽ°äº†ä¸åŒ¹é…çš„çŠ¶å†µï¼Œåœ¨è½¯ä»¶å¼€å‘ä¸­æˆ‘ä»¬ç§°ä¸ºæŽ¥å£ä¸å…¼å®¹ï¼Œæ­¤æ—¶å°±éœ€è¦é€‚é…å™¨æ¥è¿›è¡Œä¸€ä¸ªæŽ¥å£è½¬æ¢ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­æœ‰ä¸€å¥è¯æ­£å¥½ä½“çŽ°äº†è¿™ç‚¹ï¼šä»»ä½•é—®é¢˜éƒ½å¯ä»¥åŠ ä¸€ä¸ªä¸­é—´å±‚æ¥è§£å†³ã€‚è¿™ä¸ªå±‚æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºè¿™é‡Œçš„ Apapter å±‚ï¼Œé€šè¿‡è¿™å±‚æ¥è¿›è¡Œä¸€ä¸ªæŽ¥å£è½¬æ¢å°±è¾¾åˆ°äº†å…¼å®¹çš„ç›®çš„ã€‚ åœ¨ä¸Šè¿°ç”µæºæŽ¥å£è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ 5V ç”µåŽ‹å°±æ˜¯ Target æŽ¥å£ï¼Œ220V ç”µåŽ‹å°±æ˜¯ Adapter ç±»ï¼Œè€Œå°†ç”µåŽ‹ä»Ž 220V è½¬æ¢åˆ° 5V å°±æ˜¯ Adapterã€‚ ç±»é€‚é…å™¨: target: 1234public interface FiveVolt &#123; int getVolt5();&#125; Adapter è§’è‰²ï¼Œéœ€è¦è¢«è½¬æ¢çš„å¯¹è±¡ 123456public class Volt220 &#123; public int getVolt220()&#123; return 220; &#125;&#125; Adapter è§’è‰²ï¼Œå°† 220 -&gt; 5 V çš„ç”µåŽ‹: 123456public class VoltAdapter extends Volt220 implements FiveVolt &#123; @Override public int getVolt5() &#123; return 5; &#125;&#125; test: 12345@Testpublic void testAdapter1()&#123; VoltAdapter voltAdapter = new VoltAdapter(); System.out.println("voltAdapter:"+voltAdapter.getVolt5());&#125; output: 1voltAdapter:5 Target è§’è‰²ç»™å‡ºäº†éœ€è¦çš„ç›®æ ‡æŽ¥å£ï¼Œè€Œ Adapter ç±»åˆ™æ˜¯éœ€è¦è¢«è½¬æ¢çš„å¯¹è±¡ã€‚Adapter åˆ™æ˜¯å°† Volt220 è½¬æ¢æˆ Target çš„æŽ¥å£ã€‚å¯¹åº”çš„ Target çš„ç›®æ ‡æ˜¯è¦èŽ·å– 5V çš„è¾“å‡ºç”µåŽ‹ï¼Œè€Œ Adapter çœŸæ­£è¾“å‡ºç”µåŽ‹æ˜¯ 220V ï¼Œæ­¤æ—¶å°±éœ€è¦ç”µæºé€‚é…å™¨ç±»å°† 220V ç”µåŽ‹è½¬æ¢ä¸º 5V ç”µåŽ‹ï¼Œè§£å†³æŽ¥å£ä¸å…¼å®¹çš„é—®é¢˜ã€‚ å¯¹è±¡é€‚é…å™¨: æˆ‘ä»¬åªéœ€è¦å˜æ¢ä¸‹ Adapter å¯¹è±¡ï¼Œå¦‚ä¸‹: 123456789101112131415161718public class VoltAdapter extends Volt220 implements FiveVolt &#123; private Volt220 mVolt220; public VoltAdapter(Volt220 mVolt220) &#123; this.mVolt220 = mVolt220; &#125; @Override public int getVolt220() &#123; return mVolt220.getVolt220(); &#125; @Override public int getVolt5() &#123; return 5; &#125;&#125; test / output: 12345 VoltAdapter voltAdapter = new VoltAdapter(new Volt220()); System.out.println("voltAdapter:"+voltAdapter.getVolt5());voltAdapter:5 è¿™ç§å®žçŽ°æ–¹å¼ç›´æŽ¥å°†è¦è¢«é€‚é…çš„å¯¹è±¡ä¼ é€’åˆ° Adapter ä¸­ï¼Œä½¿ç”¨ç»„åˆçš„å½¢å¼æ˜¯å¸çº³æŽ¥å£å…¼å®¹çš„æ•ˆæžœã€‚è¿™æ¯”ç±»é€‚é…å™¨æ–¹å¼æ›´ä¸ºçµæ´»ï¼Œå®ƒçš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯è¢«é€‚é…çš„å¯¹è±¡ä¸­çš„æ–¹æ³•ä¸ä¼šæš´éœ²å‡ºæ¥ï¼Œè€Œç±»é€‚é…ç”±äºŽç»§æ‰¿äº†è¢«é€‚é…å¯¹è±¡ï¼Œå› æ­¤ï¼Œè¢«é€‚é…å¯¹è±¡ç±»çš„å‡½æ•°åœ¨ Adapter ç±»ä¸­ä¹Ÿéƒ½å«æœ‰ï¼Œè¿™ä½¿å¾— Adapter ç±»å‡ºçŽ°äº†ä¸€äº›å¥‡æ€ªçš„æŽ¥å£ï¼Œç”¨æˆ·ä½¿ç”¨æˆæœ¬è¾ƒé«˜ï¼Œå› æ­¤ï¼Œå¯¹è±¡é€‚é…å™¨æ¨¡å¼æ›´åŠ çµæ´»ã€å®žç”¨ã€‚ æ€»ç»“Adapter æ¨¡å¼çš„ç»å…¸å®žçŽ°åœ¨äºŽå°†åŽŸæœ¬ä¸å…¼å®¹çš„æŽ¥å£èžåˆåœ¨ä¸€èµ·ï¼Œä½¿ä¹‹èƒ½å¤Ÿå¾ˆå¥½çš„è¿›è¡Œåˆä½œã€‚ä½†æ˜¯ï¼Œåœ¨å®žé™…å¼€å‘ä¸­ï¼ŒAdapter æ¨¡å¼ä¹Ÿæœ‰ä¸€äº›çµæ´»çš„å®žçŽ°ã€‚ä¾‹å¦‚ ListView ä¸­çš„éš”ç¦»å˜åŒ–ï¼Œä½¿å¾—æ•´ä¸ª UI æž¶æž„å˜å¾—æ›´çµæ´»ï¼Œèƒ½å¤Ÿæ‹¥æŠ±å˜åŒ–ã€‚Adapter æ¨¡å¼åœ¨å¼€å‘ä¸­è¿ç”¨éžå¸¸å¹¿æ³›ï¼Œå› æ­¤ï¼ŒæŽŒæ¡ Adapter æ¨¡å¼æ˜¯éžå¸¸å¿…è¦çš„ã€‚ ä¼˜ç‚¹: æ›´å¥½çš„å¤ç”¨æ€§ï¼Œç³»ç»Ÿéœ€è¦ä½¿ç”¨çŽ°æœ‰çš„ç±»ï¼Œè€Œæ­¤ç±»çš„æŽ¥å£ä¸ç¬¦åˆç³»ç»Ÿçš„éœ€è¦ã€‚é‚£ä¹ˆé€šè¿‡é€‚é…å™¨æ¨¡å¼å°±å¯ä»¥è®©è¿™äº›åŠŸèƒ½å¾—åˆ°æ›´å¥½çš„å¤ç”¨ã€‚ æ›´å¥½çš„æ‰©å±•æ€§ï¼Œåœ¨å®žçŽ°é€‚é…å™¨åŠŸèƒ½çš„æ—¶å€™ï¼Œå¯ä»¥è°ƒç”¨è‡ªå·±å¼€å‘çš„åŠŸèƒ½ï¼Œä»Žè€Œè‡ªç„¶åœ°æ‰©å±•ç³»ç»Ÿçš„åŠŸèƒ½ã€‚ ç¼ºç‚¹: è¿‡å¤šåœ°ä½¿ç”¨é€‚é…å™¨ï¼Œä¼šè®©ç³»ç»Ÿéžå¸¸å‡Œä¹±ï¼Œä¸æ˜“æ•´ä½“æŠŠæ¡ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>é€‚é…å™¨æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åå…­ä¹‹ç»„åˆæ¨¡å¼]]></title>
    <url>%2Fposts%2Ff6bae352.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ ç»„åˆæ¨¡å¼ ä»‹ç»ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰ä¹Ÿç§°ä¸ºéƒ¨åˆ†æ•´ä½“æ¨¡å¼ (Part Whole Pattern) ï¼Œå±žäºŽç»“æž„æ€§è®¾è®¡æ¨¡å¼ï¼Œç»„åˆæ¨¡å¼æ¯”è¾ƒç®€å•ï¼Œå®ƒå°†ä¸€ç»„ç›¸ä¼¼çš„å¯¹è±¡çœ‹åšä¸€ä¸ªå¯¹è±¡å¤„ç†ï¼Œå¹¶æ ¹æ®ä¸€ä¸ªæ ‘çŠ¶ç»“æž„æ¥ç»„åˆå¯¹è±¡ï¼Œç„¶åŽæä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ–¹æ³•åŽ»è®¿é—®ç›¸åº”çš„å¯¹è±¡ï¼Œä»¥æ­¤å¿½ç•¥æŽ‰å¯¹è±¡ä¸Žå¯¹è±¡é›†åˆä¹‹é—´çš„å·®åˆ«ã€‚ å®šä¹‰å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æž„ä»¥è¡¨ç¤º â€éƒ¨åˆ†-æ•´ä½“â€œ çš„å±‚æ¬¡ç»“æž„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹æ•´ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚ ä½¿ç”¨åœºæ™¯ è¡¨ç¤ºå¯¹è±¡çš„ â€éƒ¨åˆ†-æ•´ä½“â€œ å±‚æ¬¡ç»“æž„æ—¶ã€‚ ä»Žä¸€ä¸ªæ•´ä½“ä¸­èƒ½å¤Ÿç‹¬ç«‹å‡ºéƒ¨åˆ†æ¨¡å—æˆ–åŠŸèƒ½çš„åœºæ™¯ã€‚ UML ç±»å›¾ Component: æŠ½è±¡æ ¹èŠ‚ç‚¹ï¼Œä¸ºç»„åˆä¸­çš„å¯¹è±¡å£°æ˜ŽæŽ¥å£ã€‚åœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œå®žçŽ°æ‰€æœ‰ç±»å…±æœ‰æŽ¥å£çš„ç¼ºçœè¡Œä¸ºã€‚å£°æ˜Žä¸€ä¸ªæŽ¥å£ç”¨äºŽè®¿é—®å’Œç®¡ç† Component çš„å­èŠ‚ç‚¹ã€‚å¯åœ¨é€’å½’ç»“æž„ä¸­å®šä¹‰ä¸€ä¸ªæŽ¥å£ï¼Œç”¨äºŽè®¿é—®ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼Œå¹¶åœ¨åˆé€‚çš„æƒ…å†µä¸‹å®žçŽ°å®ƒã€‚ Composite: å®šä¹‰æœ‰å­èŠ‚ç‚¹çš„é‚£äº›æžå¹²èŠ‚ç‚¹çš„è¡Œä¸ºï¼Œå­˜å‚¨å­èŠ‚ç‚¹ï¼Œåœ¨ Component æŽ¥å£ä¸­å®žçŽ°ä¸Žå­èŠ‚ç‚¹æœ‰å…³çš„æ“ä½œã€‚ Leaf: åœ¨ç»„åˆä¸­è¡¨ç¤ºå¶å­èŠ‚ç‚¹å¯¹è±¡ï¼Œå¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œåœ¨ç»„åˆä¸­å®šä¹‰èŠ‚ç‚¹å¯¹è±¡çš„è¡Œä¸ºã€‚ Client: é€šè¿‡ Component æŽ¥å£æ“çºµç»„åˆèŠ‚ç‚¹çš„å¯¹è±¡ã€‚ ä»£ç ç¤ºä¾‹ç®€å•ç¤ºä¾‹æŠ½è±¡æ ¹èŠ‚ç‚¹: 12345678910111213141516171819202122232425262728293031323334353637public abstract class Component &#123; /** * èŠ‚ç‚¹åç§° */ protected String name; public Component(String name) &#123; this.name = name; &#125; /** * å…·ä½“çš„é€»è¾‘æ–¹æ³•ç”±å­ç±»å®žçŽ° */ public abstract void doSomething(); /** * æ·»åŠ å­èŠ‚ç‚¹ * @param component */ public abstract void addChild(Component component); /** * ç§»é™¤å­èŠ‚ç‚¹ * @param component */ public abstract void removeChild(Component component); /** * èŽ·å–å­èŠ‚ç‚¹ * @param index * @return */ public abstract Component getChildren(int index);&#125; æžå¹²èŠ‚ç‚¹: 123456789101112131415161718192021222324252627282930313233343536public class Composite extends Component &#123; /** * å­˜å‚¨èŠ‚ç‚¹çš„å®¹å™¨ */ private List&lt;Component&gt; mLists = new ArrayList&lt;&gt;(); public Composite(String name) &#123; super(name); &#125; @Override public void doSomething() &#123; System.out.println("name: " + name); if (mLists != null &amp;&amp; mLists.size() &gt; 0) &#123; for (Component component : mLists) &#123; component.doSomething(); &#125; &#125; &#125; @Override public void addChild(Component component) &#123; mLists.add(component); &#125; @Override public void removeChild(Component component) &#123; mLists.remove(component); &#125; @Override public Component getChildren(int index) &#123; return mLists.get(index); &#125;&#125; å¶å­èŠ‚ç‚¹: 1234567891011121314151617181920212223242526public class Leaf extends Component &#123; public Leaf(String name) &#123; super(name); &#125; @Override public void doSomething() &#123; System.out.println("name: " + name); &#125; @Override public void addChild(Component component) &#123; throw new UnsupportedOperationException("å¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹"); &#125; @Override public void removeChild(Component component) &#123; throw new UnsupportedOperationException("å¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹"); &#125; @Override public Component getChildren(int index) &#123; throw new UnsupportedOperationException("å¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹"); &#125;&#125; test: 1234567891011121314151617181920212223@Testpublic void testComponent() &#123; //æž„é€ ä¸€ä¸ªæ ¹èŠ‚ç‚¹ Component root = new Composite("Root"); //æž„é€ æžå¹²èŠ‚ç‚¹ Component branchA = new Composite("branchA"); Component branchB = new Composite("branchB"); //æž„é€ å¶å­èŠ‚ç‚¹ Component leafA = new Leaf("leafA"); Component leafB = new Leaf("LeafB"); //å°†å¶å­èŠ‚ç‚¹æ·»åŠ è‡³æžå¹²èŠ‚ç‚¹ä¸­ branchA.addChild(leafA); branchB.addChild(leafB); //å°†æžå¹²èŠ‚ç‚¹æ·»åŠ è¿›è·ŸèŠ‚ç‚¹ root.addChild(branchA); root.addChild(branchB); root.doSomething();&#125; output: 12345name: Rootname: branchAname: leafAname: branchBname: LeafB å®žæˆ˜ ä¸šåŠ¡èƒŒæ™¯: ç”¨ä»£ç è¡¨ç¤ºæ–‡ä»¶å¤¹è·Ÿæ–‡ä»¶çš„ç»„åˆå…³ç³»; æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æŠ½è±¡ç±»: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public abstract class Dir &#123; /** * å£°æ˜Žä¸€ä¸ª List æˆå‘˜å˜é‡å­˜å‚¨æ–‡ä»¶å¤¹ä¸‹é¢æ‰€æœ‰å…ƒç´  */ protected List&lt;Dir&gt; mDirs = new ArrayList&lt;&gt;(); /** * å½“å‰æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åç§° */ protected String name; public Dir(String name) &#123; this.name = name; &#125; /** * æ·»åŠ ä¸€ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ * @param dir */ public abstract void addDir(Dir dir); /** * ç§»é™¤ä¸€ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ * @param dir */ public abstract void removeDir(Dir dir); /** * æ¸…ç©ºæ–‡ä»¶å¤¹ä¸‹é¢æ‰€æœ‰çš„å…ƒç´  */ public abstract void clear(); /** * è¾“å‡ºæ–‡ä»¶å¤¹ä¸‹ç›®å½•ç»“æž„ */ public abstract void print(); /** * èŽ·å–æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶æˆ–å­æ–‡ä»¶å¤¹ */ public abstract List&lt;Dir&gt; getFiles(); /** * èŽ·å–æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹åç§° * @return */ public String getName()&#123; return name; &#125;&#125; å…·ä½“æ–‡ä»¶å¤¹ç±»: 12345678910111213141516171819202122232425262728293031323334353637383940public class Folder extends Dir &#123; public Folder(String name) &#123; super(name); &#125; @Override public void addDir(Dir dir) &#123; mDirs.add(dir); &#125; @Override public void removeDir(Dir dir) &#123; mDirs.remove(dir); &#125; @Override public void clear() &#123; mDirs.clear(); &#125; @Override public void print() &#123; System.out.print(getName() + " ("); Iterator&lt;Dir&gt; iterator = mDirs.iterator(); while (iterator.hasNext()) &#123; Dir dir = iterator.next(); dir.print(); if (iterator.hasNext()) &#123; System.out.print(", "); &#125; &#125; System.out.print(")"); &#125; @Override public List&lt;Dir&gt; getFiles() &#123; return mDirs; &#125;&#125; å…·ä½“æ–‡ä»¶ç±»: 123456789101112131415161718192021222324252627282930public class File extends Dir &#123; public File(String name) &#123; super(name); &#125; @Override public void addDir(Dir dir) &#123; throw new UnsupportedOperationException("æ–‡ä»¶å¯¹è±¡ä¸æ”¯æŒè¯¥æ“ä½œ"); &#125; @Override public void removeDir(Dir dir) &#123; throw new UnsupportedOperationException("æ–‡ä»¶å¯¹è±¡ä¸æ”¯æŒè¯¥æ“ä½œ"); &#125; @Override public void clear() &#123; throw new UnsupportedOperationException("æ–‡ä»¶å¯¹è±¡ä¸æ”¯æŒè¯¥æ“ä½œ"); &#125; @Override public void print() &#123; System.out.println("name: "+name); &#125; @Override public List&lt;Dir&gt; getFiles() &#123; throw new UnsupportedOperationException("æ–‡ä»¶å¯¹è±¡ä¸æ”¯æŒè¯¥æ“ä½œ"); &#125;&#125; test: 1234567891011121314151617181920212223242526272829303132333435@Testpublic void testComponent2()&#123; //æž„é€ ä¸€ä¸ªç›®å½•å¯¹è±¡è¡¨ç¤º sdcard ç›˜è·Ÿç›®å½• Dir diskSdcard = new Folder("sdcard"); // sdcard ä¸‹æœ‰ä¸€ä¸ªæ–‡ä»¶ diskSdcard.addDir(new File("bug.log")); //sdcard ä¸‹è¿˜æœ‰ä¸€ä¸ªå­ç›®å½• android Dir android = new Folder("android"); //android ç›®å½•ä¸‹æœ‰ä¸€ä¸ªç›®å½• Dir data = new Folder("data"); data.addDir(new File("2019-09-14.log")); android.addDir(data); diskSdcard.addDir(android); //sdcard ä¸‹è¿˜æœ‰ä¸€ä¸ªå­ç›®å½• baidu Dir baidu = new Folder("baidu"); //android ç›®å½•ä¸‹æœ‰ä¸€ä¸ªç›®å½• Dir cache = new Folder("cache"); cache.addDir(new File("offline.baidu")); baidu.addDir(cache); diskSdcard.addDir(baidu); //sdcard ä¸‹è¿˜æœ‰ä¸€ä¸ªå­ç›®å½• downloads Dir downloads = new Folder("downloads"); //android ç›®å½•ä¸‹æœ‰ä¸€ä¸ªç›®å½• Dir f360 = new Folder("360"); f360.addDir(new File("360.log")); downloads.addDir(f360); diskSdcard.addDir(downloads); //æ‰“å°æ–‡ä»¶ç»“æž„ diskSdcard.print();&#125; output: 12345678sdcard ( //æ–‡ä»¶ name: bug.log, //æ–‡ä»¶å¤¹ android (data (name: 2019-09-14.log)), baidu (cache (name: offline.baidu)), downloads (360 (name: 360.log))) è¿™é‡Œæˆ‘ä»¬ä»¥æ‹¬å·ä½œä¸ºä¸€ä¸ªæ–‡ä»¶å¤¹çš„å†…å®¹èŒƒå›´ï¼Œå¦‚ä¸Šè¾“å‡ºæ‰€ä»¥ adcard ä¸‹æ–‡ä»¶å¤¹æœ‰ 3 ä¸ªå­æ–‡ä»¶å¤¹ Androidã€baiduã€downloads å­æ–‡ä»¶å¤¹ï¼Œä»¥åŠä¸€ä¸ª bug.log æ–‡ä»¶ï¼Œè€Œåœ¨ 3 ä¸ªå­æ–‡ä»¶å¤¹ä¸­è¿˜å„è‡ªåŒ…å«å­æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œä¸€ä¸ªå…¸åž‹çš„æ ‘çŠ¶åµŒå¥—è§£è€¦ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç»„åˆæ¨¡å¼ã€‚ æ€»ç»“ä¼˜ç‚¹: ç»„åˆæ¨¡å¼å¯ä»¥æ¸…æ¥šåœ°å®šä¹‰åˆ†å±‚æ¬¡çš„å¤æ‚å¯¹è±¡ï¼Œè¡¨ç¤ºå¯¹è±¡çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å±‚æ¬¡ï¼Œå®ƒè®©é«˜å±‚æ¨¡å—å¿½ç•¥äº†å±‚æ¬¡çš„å·®å¼‚ï¼Œæ–¹ä¾¿å¯¹æ•´ä¸ªå±‚æ¬¡ç»“æž„è¿›è¡ŒæŽ§åˆ¶ã€‚ é«˜å±‚æ¨¡å—å¯ä»¥ä¸€è‡´åœ°ä½¿ç”¨ä¸€ä¸ªç»„åˆç»“æž„æˆ–å…¶ä¸­å•ä¸ªå¯¹è±¡ï¼Œä¸å¿…å…³å¿ƒå¤„ç†çš„æ˜¯å•ä¸ªå¯¹è±¡è¿˜æ˜¯æ•´ä¸ªç»„åˆç»“æž„ï¼Œç®€åŒ–äº†é«˜å±‚æ¨¡å—çš„ä»£ç ã€‚ åœ¨ç»„åˆæ¨¡å¼ä¸­å¢žåŠ äº†æ–°çš„æžå¹²æž„ä»¶å’Œå¶å­æž„ä»¶éƒ½å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»å¯¹çŽ°æœ‰ç±»åº“è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œç¬¦åˆ â€œå¼€é—­åŽŸåˆ™â€ã€‚ ç»„åˆæ¨¡å¼ä¸ºæ ‘çŠ¶ç»“æž„çš„é¢å‘å¯¹è±¡å®žçŽ°æä¾›äº†ä¸€ç§çµæ´»çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å¶å­å¯¹è±¡å’Œæ ‘å¹²å¯¹è±¡çš„é€’å½’ç»„åˆï¼Œå¯ä»¥å½¢æˆå¤æ‚çš„æ ‘å½¢ç»“æž„ï¼Œä½†å¯¹æ ‘å½¢ç»“æž„çš„æŽ§åˆ¶å´éžå¸¸ç®€å•ã€‚ ç¼ºç‚¹: æ—©æ–°å¢žæž„ä»¶æ—¶ä¸å¥½å¯¹æ ‘å¹²ä¸­çš„æž„ä»¶ç±»åž‹è¿›è¡Œé™åˆ¶ï¼Œä¸èƒ½ä¾èµ–ç±»åž‹ç³»ç»Ÿæ¥æ–½åŠ è¿™äº›çº¦æŸï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒä»¬éƒ½æ¥è‡ªäºŽæƒ³å¬çš„æŠ½è±¡å±‚ï¼Œæ­¤æ—¶ï¼Œå¿…é¡»è¿›è¡Œç±»åž‹æ£€æŸ¥æ¥å®žçŽ°ï¼Œè¿™ä¸ªå®žçŽ°è¿‡ç¨‹è¾ƒä¸ºå¤æ‚ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>ç»„åˆæ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åäº”ä¹‹ä»£ç†æ¨¡å¼]]></title>
    <url>%2Fposts%2F6e2d1f5e.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ ä»£ç†æ¨¡å¼ ä»‹ç»ä»£ç†æ¨¡å¼ (Proxy Pattren) ä¹Ÿç§°ä¸ºå§”æ‰˜æ¨¡å¼ï¼Œæ˜¯å±žäºŽç»“æž„åž‹è®¾è®¡æ¨¡å¼ï¼Œå…¶é‡è¦æ€§ä¸è¨€è€Œå–»ï¼Œç›¸ä¿¡åœ¨çœ‹è¿‡æœ¬ç¯‡æ–‡ç« ä¹‹åŽä¼šå‘çŽ°ä¸å°‘è®¾è®¡æ¨¡å¼ä¸­éƒ½æœ‰ä»£ç†æ¨¡å¼çš„å½±å­ã€‚é‚£ä¹ˆä½•ä¸ºä»£ç†æ¨¡å¼ï¼Ÿå…¶å®žä»£ç†åœ¨æˆ‘ä»¬æ—¥å¸¸ç”Ÿæ´»ä¸­å¹¶ä¸å°‘è§ï¼Œå¯¹äºŽç¨‹åºå‘˜æ¥è¯´æœ€å¸¸æŽ¥è§¦çš„èŽ«è¿‡äºŽä»£ç†ä¸Šç½‘äº†ï¼Œè¿žä¸Šä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œå°±å¯ä»¥è½»æ¾ç•…æ¸¸å…¨ä¸–ç•Œçš„ç½‘ç»œï¼›æ€»è€Œè¨€ä¹‹ï¼Œä¹Ÿè®¸ä½ å¹¶ä¸ç•™æ„ï¼Œä½†æ˜¯ä»£ç†æ˜¯æ— å¤„ä¸åœ¨ï¼ŒçŽ°å®žç”Ÿæ´»å¦‚æ­¤ï¼Œæˆ‘ä»¬çš„ Code ä¸–ç•Œé‡Œä¹Ÿæ˜¯å¦‚æ­¤ï¼æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬æ¥æŽ¢ç©¶ä¸‹ä»£ç†æ¨¡å¼å€’æ˜¯æœ‰å¤šæ™®éã€‚ä¸‹é¢é¦–å…ˆçœ‹ä¸‹ä»£ç†æ¨¡å¼çš„å®šä¹‰å§ã€‚ å®šä¹‰ä¸ºå…¶å®ƒå¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æŽ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ ä½¿ç”¨åœºæ™¯å½“æ— æ³•æˆ–ä¸æƒ³ç›´æŽ¥è®¿é—®æŸä¸ªå¯¹è±¡å­˜åœ¨å›°éš¾æ—¶å¯ä»¥é€šè¿‡ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥é—´æŽ¥è®¿é—®ï¼Œä¸ºäº†ä¿è¯å®¢æˆ·ç«¯ä½¿ç”¨çš„é€æ˜Žæ€§ï¼Œå§”æ‰˜å¯¹è±¡ä¸Žä»£ç†å¯¹è±¡éœ€è¦å®žçŽ°ç›¸åŒçš„æŽ¥å£ã€‚ UML ç±»å›¾ Subject: æŠ½è±¡ä¸»é¢˜ç±»ï¼›è¯¥ç±»çš„ä¸»è¦èŒè´£æ˜¯å£°æ˜ŽçœŸå®žä¸»é¢˜ä¸Žä»£ç†çš„å…±åŒæŽ¥å£æ–¹æ³•ï¼Œè¯¥ç±»æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæŽ¥å£ã€‚ RealSubject: çœŸå®žä¸»é¢˜ç±»ï¼›è¯¥ç±»ä¹Ÿç§°ä¸ºè¢«å§”æ‰˜ç±»æˆ–è¢«ä»£ç†ç±»ï¼Œè¯¥ç±»å®šä¹‰äº†ä»£ç†æ‰€è¡¨ç¤ºçš„çœŸå®žå¯¹è±¡ï¼Œç”±å…¶æ‰§è¡Œå…·ä½“çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•ï¼Œè€Œå®¢æˆ·ç±»åˆ™é€šè¿‡ä»£ç†ç±»é—´æŽ¥åœ°è°ƒç”¨çœŸå®žä¸»é¢˜ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚ ProxySubject: ä»£ç†ç±»ï¼›è¯¥ç±»ä¹Ÿç§°ä¸ºå§”æ‰˜ç±»æˆ–ä»£ç†ç±»ï¼Œè¯¥ç±»æŒæœ‰ä¸€ä¸ªå¯¹çœŸå®žä¸»é¢˜ç±»çš„å¼•ç”¨ï¼Œåœ¨å…¶æ‰€å®žçŽ°çš„æŽ¥å£æ–¹æ³•ä¸­è°ƒç”¨çœŸå®žä¸»é¢˜ç±»ä¸­ç›¸åº”çš„æŽ¥å£æ–¹æ³•æ‰§è¡Œï¼Œä»¥æ­¤èµ·åˆ°ä»£ç†çš„ä½œç”¨ã€‚ Client: å®¢æˆ·ç±»ï¼Œå³ä½¿ç”¨ä»£ç†ç±»çš„ç±»åž‹ã€‚ ä»£ç ç¤ºä¾‹ä»£ç†æ¨¡å¼å¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼Œä¸€æ˜¯é™æ€ä»£ç†ï¼Œè€Œæ˜¯åŠ¨æ€ä»£ç†ã€‚é™æ€ä»£ç†æ˜¯åªæœ‰å…·ä½“çš„ä»£ç†å¯¹è±¡ï¼Œè€ŒåŠ¨æ€ä»£ç†åˆ™ä¸Žé™æ€ä»£ç†ç›¸åï¼Œé€šè¿‡åå°„æœºåˆ¶åŠ¨æ€åœ°ç”Ÿæˆä»£ç†è€…çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨ code é˜¶æ®µåŽ‹æ ¹ä¸éœ€è¦çŸ¥é“ä»£ç†å¯¹è±¡æ˜¯è°ï¼Œä»£ç†è°å°†ä¼šåœ¨æ‰§è¡Œé˜¶æ®µå†³å®šã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸‹å§ ç®€å•ç¤ºä¾‹é™æ€ä»£ç†ä¸šåŠ¡èƒŒæ™¯: X ç¨‹åºå‘˜åœ¨å…¬å¸ä¸Šç­æ—¶ï¼Œé‡è§äº†å…¬å¸æ‹–æ¬ å·¥èµ„ç”šè‡³å…‹æ‰£å·¥èµ„çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹ X ç¨‹åºå‘˜è¿˜æ˜¯é€šè¿‡æ³•å¾‹é€”å¾„æ¥è§£å†³é—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦è¯·ä¸€ä¸ªå¾‹å¸ˆæ¥ä½œä¸ºè‡ªå·±çš„è¯‰è®¼ä»£ç†äººï¼Œå…ˆçœ‹ä¸‹é¢çš„ä»£ç ç¤ºä¾‹å§ è¯‰è®¼æŽ¥å£ç±»: 12345678910111213141516171819202122public interface ILawsuit &#123; /** * æäº¤ç”³è¯· */ void submit(); /** * ä¸¾è¡Œä¸¾è¯ */ void burden(); /** * å¼€å§‹è¾©æŠ¤ */ void defend(); /** * è¯‰è®¼å®Œæˆ */ void finish();&#125; å…·ä½“è¯‰è®¼äººï¼ˆXç¨‹åºå‘˜ï¼‰: 123456789101112131415161718192021222324public class XProgrammer implements ILawsuit &#123; @Override public void submit() &#123; System.out.println("è€æ¿æ¬  X ç¨‹åºå‘˜å·¥èµ„ï¼Œç”³è¯·ä»²è£!"); &#125; @Override public void burden() &#123; System.out.println("è¿™æ˜¯åˆåŒä¹¦å’Œè¿‡åŽ»ä¸€å¹´çš„é“¶è¡Œå·¥èµ„æµæ°´"); &#125; @Override public void defend() &#123; System.out.println("è¯æ®ç¡®å‡¿ï¼ä¸éœ€è¦å†è¯´ä»€ä¹ˆäº†ï¼"); &#125; @Override public void finish() &#123; System.out.println("è¯‰è®¼æˆåŠŸï¼åˆ¤å†³è€æ¿å³æ—¥èµ· 7 å¤©å†…ç»“ç®—å·¥èµ„ï¼"); &#125;&#125; Xç¨‹åºå‘˜è¯·çš„å¾‹å¸ˆï¼ˆä»£ç†å¯¹è±¡ï¼‰: 123456789101112131415161718192021222324252627282930public class ProxyLawyer implements ILawsuit &#123; /** * æŒæœ‰ä¸€ä¸ªå…·ä½“è¢«ä»£ç†è€…çš„å¼•ç”¨ï¼Œè¿™é‡Œå°±æ˜¯ X ç¨‹åºå‘˜ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒ Y ç¨‹åºå‘˜ åªæ˜¯å…·ä½“è¯´æ˜Žã€‚ */ private ILawsuit mLawsuit; public ProxyLawyer(ILawsuit lawsuit) &#123; mLawsuit = lawsuit; &#125; @Override public void submit() &#123; mLawsuit.submit(); &#125; @Override public void burden() &#123; mLawsuit.burden(); &#125; @Override public void defend() &#123; mLawsuit.defend(); &#125; @Override public void finish() &#123; mLawsuit.finish(); &#125;&#125; test: 123456789101112131415@Testpublic void testProxy()&#123; //X ç¨‹åºå‘˜ ILawsuit lawsuit = new XProgrammer(); //ç¨‹åºå‘˜è¯·çš„å¾‹å¸ˆï¼ŒæŠŠè‡ªå·±çš„äº‹åŠ¡äº¤äºŽå¾‹å¸ˆæ¥å¤„ç† ILawsuit proxyLawyer = new ProxyLawyer(lawsuit); //å¾‹å¸ˆå¼€å§‹å¤„ç† proxyLawyer.submit(); proxyLawyer.burden(); proxyLawyer.defend(); proxyLawyer.finish();&#125; output: 1234è€æ¿æ¬  X ç¨‹åºå‘˜å·¥èµ„ï¼Œç”³è¯·ä»²è£!è¿™æ˜¯åˆåŒä¹¦å’Œè¿‡åŽ»ä¸€å¹´çš„é“¶è¡Œå·¥èµ„æµæ°´è¯æ®ç¡®å‡¿ï¼ä¸éœ€è¦å†è¯´ä»€ä¹ˆäº†ï¼è¯‰è®¼æˆåŠŸï¼åˆ¤å†³è€æ¿å³æ—¥èµ· 7 å¤©å†…ç»“ç®—å·¥èµ„ï¼ åŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†å…¶å®žä¹Ÿå¾ˆç®€å•ï¼ŒJava ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå¾ˆä¾¿æ·çš„åŠ¨æ€ä»£ç†æŽ¥å£ InvocationHandler ,å®žçŽ°è¯¥æŽ¥å£éœ€è¦é‡å†™å…¶è°ƒç”¨æ–¹æ³• invokeã€‚ ä¸‹é¢æˆ‘ä»¬å°±ä¸Šé¢çš„ç¤ºä¾‹æ¥ç¨åŠ æ”¹åŠ¨ä¸€ä¸‹: åŠ¨æ€ä»£ç†ç±»(è¿™é‡Œå¯ä»¥ç†è§£ä¸ºå¾‹å¸ˆå¯¹è±¡) 1234567891011121314151617public class DynamicProxy implements InvocationHandler &#123; /** * ä»£ç†è€…çš„å¼•ç”¨ï¼ˆè¿™é‡Œå¯ä»¥ç†è§£ä¸º X ç¨‹åºå‘˜ï¼‰ */ private Object object; public DynamicProxy(Object object) &#123; this.object = object; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; //é€šè¿‡åå°„è°ƒç”¨å…¶ä»£ç†è€…çš„æ–¹æ³• return method.invoke(object,args); &#125;&#125; test: 123456789101112131415161718192021@Testpublic void testDynamicProxy()&#123; //X ç¨‹åºå‘˜ ILawsuit lawsuit = new XProgrammer(); //æž„é€ ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡ï¼ˆç¨‹åºå‘˜è¯·çš„å¾‹å¸ˆï¼ŒæŠŠè‡ªå·±çš„äº‹åŠ¡äº¤äºŽå¾‹å¸ˆæ¥å¤„ç†ï¼‰ DynamicProxy dynamicProxy = new DynamicProxy(lawsuit); //æ‹¿åˆ°ä»£ç†è€…èº«ä¸Šçš„ ClassLoader ClassLoader classLoader = lawsuit.getClass().getClassLoader(); //åŠ¨æ€çš„æž„é€ ä¸€ä¸ªä»£ç†è€…å¾‹å¸ˆå‡ºæ¥ ILawsuit proxyLawyer = (ILawsuit) Proxy.newProxyInstance(classLoader, new Class[]&#123;ILawsuit.class&#125;, dynamicProxy); //å¾‹å¸ˆå¼€å§‹å¤„ç† proxyLawyer.submit(); proxyLawyer.burden(); proxyLawyer.defend(); proxyLawyer.finish();&#125; output: 1234è€æ¿æ¬  X ç¨‹åºå‘˜å·¥èµ„ï¼Œç”³è¯·ä»²è£!è¿™æ˜¯åˆåŒä¹¦å’Œè¿‡åŽ»ä¸€å¹´çš„é“¶è¡Œå·¥èµ„æµæ°´è¯æ®ç¡®å‡¿ï¼ä¸éœ€è¦å†è¯´ä»€ä¹ˆäº†ï¼è¯‰è®¼æˆåŠŸï¼åˆ¤å†³è€æ¿å³æ—¥èµ· 7 å¤©å†…ç»“ç®—å·¥èµ„ï¼ è¿è¡Œç»“æžœå’Œé™æ€ä»£ç†ä¸€æ ·ï¼Œç”±æ­¤å¯è§åŠ¨æ€ä»£ç†é€šè¿‡ä¸€ä¸ªä»£ç†ç±»æ¥ä»£ç† N å¤šä¸ªè¢«ä»£ç†ç±»ï¼Œå…¶æœ¬è´¨æ˜¯å¯¹ä»£ç†è€…ä¸Žè¢«ä»£ç†è€…è¿›è¡Œè§£è€¦ï¼Œä½¿ä¸¤è€…æ²¡æœ‰ç›´æŽ¥çš„è€¦åˆå…³ç³»ã€‚ç›¸å¯¹è€Œè¨€é™æ€ä»£ç†åˆ™æ˜¯èƒ½ä¸ºç»™å®šæŽ¥å£ä¸‹çš„å®žçŽ°ç±»åšä»£ç†ï¼Œå¦‚æžœæŽ¥å£ä¸åŒé‚£ä¹ˆå°±éœ€è¦é‡æ–°å®šä¹‰ä¸åŒçš„ä»£ç†ç±»ï¼Œæœ€ä¸ºå¤æ‚ï¼Œä½†æ˜¯é™æ€ä»£ç†æ›´ç¬¦åˆé¢å‘å¯¹è±¡åŽŸåˆ™ã€‚åœ¨å¼€å‘æ—¶å…·ä½“ä½¿ç”¨å“ªç§æ–¹å¼æ¥å®žçŽ°ä»£ç†ï¼Œå°±çœ‹è‡ªå·±çš„åå¥½äº†ã€‚ æ€»ç»“ä»£ç†æ¨¡å¼åº”ç”¨å¹¿æ³›ï¼Œåœ¨åŽé¢çš„ç»“æž„åž‹æ¨¡å¼ä¸­ï¼Œä½ éƒ½å¯ä»¥çœ‹åˆ°ä»£ç†æ¨¡å¼çš„å½±å­ï¼Œæœ‰äº›æ¨¡å¼å•ç‹¬ä½œä¸ºä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå€’ä¸å¦‚è¯´æ˜¯å¯¹ä»£ç†æ¨¡å¼çš„ä¸€ç§é’ˆå¯¹æ€§ä¼˜åŒ–ã€‚è€Œä¸”ä»£ç†æ¨¡å¼å‡ ä¹Žæ²¡æœ‰ç¼ºç‚¹å¯è¨€ï¼Œå®ƒæ˜¯ç»†åˆ†åŒ–è‡³å¾ˆå°çš„ä¸€ç§æ¨¡å¼ï¼Œå¦‚æžœéžå¾—è¯´ä¸€ä¸ªç¼ºç‚¹çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯è®¾è®¡æ¨¡å¼çš„é€šç—…ï¼Œå¯¹ç±»çš„å¢žåŠ ã€‚ä¸è¿‡åœ¨è¿™ç§å­°ä¼˜å­°åŠ£çš„å±€åŠ¿ä¸‹ï¼Œå°±ç®—å¯¹ç±»çš„ç¨å¾®å¢žåŠ åˆæœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Œæ˜¯å§ï¼Ÿ]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>ä»£ç†æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åå››ä¹‹ä¸­ä»‹è€…æ¨¡å¼]]></title>
    <url>%2Fposts%2F386c7d9.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ ä¸­ä»‹è€…æ¨¡å¼ ä»‹ç»ä¸­ä»‹è€…æ¨¡å¼ (Mediator Pattern) ä¹Ÿç§°ä¸ºè°ƒè§£è€…æ¨¡å¼æˆ–è°ƒåœè€…æ¨¡å¼ï¼ŒMediator æœ¬èº«å°±æœ‰è°ƒåœè€…å’Œè°ƒè§£è€…çš„æ„æ€ã€‚åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­è°ƒåœè€…æˆ–è°ƒè§£è€…è¿™ä¸ªè§’è‰²æˆ‘ä»¬è§å¾—æ¯”è¾ƒå¤šçš„æ˜¯ â€å’Œäº‹ä½¬â€œï¼Œä¹Ÿå°±æ˜¯è¯´è°ƒè§£ä¸¤ä¸ªæœ‰äº‰ç«¯çš„äººçš„è§’è‰²ã€‚ å®šä¹‰ä¸­ä»‹è€…æ¨¡å¼åŒ…è£…äº†ä¸€ç³»åˆ—å¯¹è±¡ç›¸äº’ä½œç”¨çš„æ–¹å¼ï¼Œä½¿å¾—è¿™äº›å¯¹è±¡ä¸å¿…ç›¸äº’æ˜Žæ˜¾ä½œç”¨ã€‚ä»Žè€Œä½¿ä»–ä»¬å¯ä»¥æ¾æ•£å¶åˆã€‚å½“æŸäº›å¯¹è±¡ä¹‹é—´çš„ä½œç”¨å‘ç”Ÿæ”¹å˜æ—¶ï¼Œä¸ä¼šç«‹å³å½±å“å…¶ä»–çš„ä¸€äº›å¯¹è±¡ä¹‹é—´çš„ä½œç”¨ï¼Œä¿è¯è¿™äº›ä½œç”¨å¯ä»¥å½¼æ­¤ç‹¬ç«‹å˜åŒ–ã€‚ä¸­ä»‹è€…æ¨¡å¼å°†å¤šå¯¹å¤šçš„ç›¸äº’ä½œç”¨è½¬åŒ–ä¸ºä¸€å¯¹å¤šçš„ç›¸äº’ä½œç”¨ã€‚ä¸­ä»‹è€…æ¨¡å¼å°†å¯¹è±¡çš„è¡Œä¸ºå’Œåä½œæŠ½è±¡åŒ–ï¼ŒæŠŠå¯¹è±¡åœ¨å°å°ºåº¦çš„è¡Œä¸ºä¸Šä¸Žå…¶ä»–å¯¹è±¡çš„ç›¸äº’ä½œç”¨åˆ†å¼€å¤„ç†ã€‚ ä½¿ç”¨åœºæ™¯å½“å¯¹è±¡ä¹‹é—´çš„äº¤äº’æ“ä½œå¾ˆå¤šä¸”æ¯ä¸ªå¯¹è±¡çš„è¡Œä¸ºæ“ä½œéƒ½ä¾èµ–å½¼æ­¤æ—¶ï¼Œä¸ºé˜²æ­¢åœ¨ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºæ—¶ï¼ŒåŒæ—¶æ¶‰åŠä¿®æ”¹å¾ˆå¤šå…¶ä»–å¯¹è±¡çš„è¡Œä¸ºï¼Œå¯é‡‡ç”¨ä¸­ä»‹è€…æ¨¡å¼æ¥è§£å†³ç´§è€¦åˆé—®é¢˜ã€‚è¯¥æ¨¡å¼å°†å¯¹è±¡ä¹‹é—´çš„å¤šå¯¹å¤šå˜æˆä¸€å¯¹å¤šå…³ç³»ï¼Œä¸­ä»‹è€…å¯¹è±¡å°†ç³»ç»Ÿä»Žç½‘çŠ¶ç»“æž„å˜æˆä»¥è°ƒè§£è€…ä¸ºä¸­å¿ƒçš„æ˜Ÿå½¢ç»“æž„ï¼Œè¾¾åˆ°é™ä½Žç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œæé«˜å¯æ‰©å±•æ€§çš„ä½œç”¨ã€‚ UML ç±»å›¾ Mediator: æŠ½è±¡ä¸­ä»‹è€…è§’è‰²ï¼Œå®šä¹‰äº†åŒäº‹å¯¹è±¡åˆ°ä¸­ä»‹è€…å¯¹è±¡çš„æŽ¥å£ï¼Œä¸€èˆ¬ä»¥æŠ½è±¡ç±»çš„æ–¹å¼å®žçŽ°ã€‚ ConcreteMediator: å…·ä½“ä¸­ä»‹è€…è§’è‰²ï¼Œç»§æ‰¿äºŽæŠ½è±¡ä¸­ä»‹è€…ï¼Œå®žçŽ°äº†çˆ¶ç±»å®šä¹‰çš„æ–¹æ³•ï¼Œå®ƒä»Žå…·ä½“çš„åŒäº‹å¯¹è±¡æŽ¥æ”¶æ¶ˆæ¯ï¼Œå‘å…·ä½“åŒäº‹å¯¹è±¡å‘å‡ºå‘½ä»¤ã€‚ Colleague: æŠ½è±¡åŒäº‹ç±»è§’è‰²ï¼Œå®šä¹‰äº†ä¸­ä»‹è€…å¯¹è±¡çš„æŽ¥å£ï¼Œå®ƒåªçŸ¥é“ä¸­ä»‹è€…è€Œä¸çŸ¥é“å…¶å®ƒçš„åŒäº‹å¯¹è±¡ã€‚ ConcreteColleagueA/B: å…·ä½“åŒäº‹ç±»è§’è‰²ï¼Œç»§æ‰¿äºŽæŠ½è±¡åŒäº‹ç±»ï¼Œæ¯ä¸ªå…·ä½“åŒäº‹ç±»éƒ½çŸ¥é“æœ¬èº«åœ¨å°èŒƒå›´å†…çš„è¡Œä¸ºï¼Œè€Œä¸çŸ¥é“å®ƒåœ¨å¤§èŒƒå›´å†…çš„ç›®çš„ã€‚ ä»£ç ç¤ºä¾‹ç®€å•ç¤ºä¾‹ä¸­ä»‹æŠ½è±¡ç±»: 12345678910111213141516171819202122232425public abstract class Mediator &#123; /** * å…·ä½“åŒäº‹ç±» A */ protected ConcreteColleagueA concreteColleagueA; /** * å…·ä½“åŒäº‹ç±» B */ protected ConcreteColleagueB concreteColleagueB; /** * æŠ½è±¡ä¸­ä»‹æ–¹æ³•ã€å­ç±»å®žçŽ° */ public abstract void method(); public void setConcreteColleagueA(ConcreteColleagueA concreteColleagueA)&#123; this.concreteColleagueA = concreteColleagueA; &#125; public void setConcreteColleagueA(ConcreteColleagueB concreteColleagueB)&#123; this.concreteColleagueB = concreteColleagueB; &#125;&#125; å…·ä½“ä¸­ä»‹è€…: 12345678public class ConcreteMediator extends Mediator &#123; @Override public void method() &#123; concreteColleagueA.action(); concreteColleagueB.action(); &#125;&#125;å¤åˆ¶ä»£ç  æŠ½è±¡åŒäº‹: 123456789101112131415public abstract class Colleague &#123; /** * ä¸­ä»‹è€…å¯¹è±¡ */ protected Mediator mediator; /** * åŒäº‹è§’è‰²å…·ä½“è¡Œä¸ºï¼Œç”±å­ç±»å®žçŽ° */ public abstract void action(); public Colleague(Mediator mediator) &#123; this.mediator = mediator; &#125;&#125; å…·ä½“åŒäº‹å®žçŽ°ç±»A/B 1234567891011public class ConcreteColleagueA extends Colleague &#123; public ConcreteColleagueA(Mediator mediator) &#123; super(mediator); &#125; @Override public void action() &#123; System.out.println("ConcreteColleagueA å°†ä¿¡æ¯é€’äº¤ç»™ä¸­ä»‹è€…å¤„ç†"); &#125;&#125; 123456789public class ConcreteColleagueB extends Colleague &#123; public ConcreteColleagueB(Mediator mediator) &#123; super(mediator); &#125; public void action() &#123; System.out.println("ConcreteColleagueB å°†ä¿¡æ¯é€’äº¤ç»™ä¸­ä»‹è€…å¤„ç†"); &#125;&#125; test 1234567@Testpublic void testMediator()&#123; ConcreteMediator mediator = new ConcreteMediator(); mediator.setConcreteColleagueA(new ConcreteColleagueA(mediator)); mediator.setConcreteColleagueB(new ConcreteColleagueB(mediator)); mediator.method();&#125; output 12ConcreteColleagueA å°†ä¿¡æ¯é€’äº¤ç»™ä¸­ä»‹è€…å¤„ç†ConcreteColleagueB å°†ä¿¡æ¯é€’äº¤ç»™ä¸­ä»‹è€…å¤„ç† å®žæˆ˜éœ€æ±‚: ç”¨ä»£ç æ¼”ç¤ºç”µè„‘ä¸­çš„ä¸»æ¿æ€Žä¹ˆæŠŠ CPUã€å†…å­˜ã€æ˜¾å¡ã€IO è®¾å¤‡ ç­‰ç»„åˆåœ¨ä¸€èµ·çš„,å¹¶æŽ§åˆ¶ä»–ä»¬æ’­æ”¾éŸ³è§†é¢‘æ•°æ®ï¼Ÿç”¨ä¸­ä»‹è€…æ¨¡å¼ æŠ½è±¡ä¸­ä»‹ç±»: 12345678public abstract class Mediator &#123; /** * åŒäº‹å¯¹è±¡æ”¹å˜æ—¶é€šçŸ¥ä¸­ä»‹è€…çš„æ–¹æ³• * åœ¨åŒäº‹å¯¹è±¡æ”¹å˜æ—¶ç”±ä¸­ä»‹è€…åŽ»é€šçŸ¥å…¶å®ƒåŒäº‹å¯¹è±¡ */ public abstract void changed(Colleague c);&#125; å…·ä½“æŠ½è±¡ä¸­ä»‹ç±»: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182public class MainBoard extends Mediator &#123; /** * å…‰é©±è®¾å¤‡ */ private CDDevice cdDevice; /** * CPU */ private CPU cpu; /** * å£°å¡è®¾å¤‡ */ private SoundCard soundCard; /** * å…‰é©±è®¾å¤‡ */ private GraphicsCard graphicsCard; @Override public void changed(Colleague c) &#123; //å¦‚æžœæ˜¯å…‰é©±è¯»å–äº†æ•°æ® if (c == cdDevice)&#123; handleCD((CDDevice)c); &#125; //å¦‚æžœ CPU å¤„ç†å®Œæ•°æ® if (c == cpu)&#123; handleCPU((CPU)c); &#125; &#125; /** * å¤„ç† CPU è¯»å–æ•°æ®åŽä¸Žå…¶å®ƒè®¾å¤‡çš„äº¤äº’ * @param cpu */ private void handleCPU(CPU cpu) &#123; this.soundCard.soundPlay(cpu.getDataSound()); this.graphicsCard.videoPlay(cpu.getDataVideo()); &#125; /** * å¤„ç†å…‰é©±è¯»å–æ•°æ®åŽä¸Žå…¶å®ƒè®¾å¤‡çš„äº¤äº’ * @param cdDevice */ private void handleCD(CDDevice cdDevice) &#123; this.cpu.decodeData(cdDevice.read()); &#125; /** * è®¾ç½® CPU */ public void setCPU(CPU cpu)&#123; this.cpu = cpu; &#125; /** * è®¾ç½® CD */ public void setCdDevice(CDDevice cdDevice)&#123; this.cdDevice = cdDevice; &#125; /** * è®¾ç½®å£°å¡ */ public void setSoundCard(SoundCard soundCard)&#123; this.soundCard = soundCard; &#125; /** * è®¾ç½®æ˜¾å¡ */ public void setGraphicsCard(GraphicsCard graphicsCard)&#123; this.graphicsCard = graphicsCard; &#125;&#125; æŠ½è±¡åŒäº‹: 12345678910111213141516171819202122public class CDDevice extends Colleague &#123; private String videoData;//è§†é¢‘æ•°æ® public CDDevice(Mediator mediator) &#123; super(mediator); &#125; /** * è¯»å–è§†é¢‘æ•°æ® * @return */ public String read()&#123; return videoData; &#125; /** * åŠ è½½è§†é¢‘æ•°æ® */ public void load()&#123; videoData = "è§†é¢‘æ•°æ®,éŸ³é¢‘æ•°æ®"; mediator.changed(this); &#125;&#125; cpuã€GraphicsCard,SoundCard, è¿™å‡ ä¸ªå®žçŽ°éƒ½å·®ä¸å¤šå°±ä¸åœ¨è´´ä»£ç äº†ã€‚ æ“ä½œç±»: 12345678910111213141516171819202122232425@Testpublic void testMediator2()&#123; //æž„é€ ä¸»æ¿å¯¹è±¡--ä¹Ÿå°±æ˜¯ä¸­ä»‹è€… MainBoard mainBoard = new MainBoard(); //åˆ†åˆ«æž„é€ é›¶éƒ¨ä»¶ CPU cpu = new CPU(mainBoard); CDDevice cdDevice = new CDDevice(mainBoard); GraphicsCard graphicsCard = new GraphicsCard(mainBoard); SoundCard soundCard = new SoundCard(mainBoard); //å°†å„ä¸ªé›¶éƒ¨ä»¶å®‰è£…åˆ°ä¸»æ¿èº«ä¸Š mainBoard.setCdDevice(cdDevice); mainBoard.setCPU(cpu); mainBoard.setGraphicsCard(graphicsCard); mainBoard.setSoundCard(soundCard); //å®‰è£…å®ŒæˆåŽï¼Œå¼€å§‹æ’­æ”¾è§†é¢‘ã€‚ cdDevice.load();&#125; output: 12éŸ³é¢‘ = [éŸ³é¢‘æ•°æ®]è§†é¢‘ = [è§†é¢‘æ•°æ®] ä»Žä¸Šè¿°ç¨‹åºæ¼”ç¤ºä¸­å¤§å®¶å¯ä»¥æ˜Žç™½ï¼Œä¸­ä»‹è€…æ¨¡å¼å°±æ˜¯ç”¨æ¥åè°ƒå¤šä¸ªå¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œå°±åƒä¸Šé¢å®žä¾‹ä¸­çš„ä¸»æ¿ï¼Œå¦‚æžœæ²¡æœ‰ä¸»æ¿è¿™ä¸ªä¸­ä»‹è€…ï¼Œé‚£ä¹ˆè®¡ç®—æœºé‡Œçš„æ²¡ä¸€ä¸ªé›¶éƒ¨ä»¶éƒ½è¦ä¸Žå…¶å®ƒé›¶éƒ¨ä»¶å»ºç«‹å…³è”ï¼Œæ¯”å¦‚ CPU è¦ä¸Žå†…å­˜äº¤äº’ã€CPU è¦ä¸Žæ˜¾å¡äº¤äº’ã€CPU è¦ä¸Ž IO è®¾å¤‡äº¤äº’ç­‰ï¼Œè¿™ä¹ˆä¸€æ¥å°±ä¼šæž„æˆä¸€ä¸ªé”™ç»¼å¤æ‚çš„ç½‘çŠ¶å›¾ï¼Œè€Œä¸­ä»‹è€…æ¨¡å¼çš„å‡ºçŽ°åˆ™æ˜¯å°†è¿™ä¸€ä¸ªé”™ç»¼å¤æ‚çš„ç½‘çŠ¶å›¾ç¼–ç¨‹ä¸€ä¸ªç»“æž„æ¸…æ™°çš„æ˜ŸçŠ¶å›¾ï¼Œå…¶ä¸­å¿ƒå°±æ˜¯ä¸­ä»‹è€…ã€‚ æ€»ç»“åœ¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€é‡Œï¼Œä¸€ä¸ªç±»å¿…ç„¶ä¼šä¸Žå…¶ä»–ç±»äº§ç”Ÿä¾èµ–å…³ç³»ï¼Œå¦‚æžœè¿™ç§ä¾èµ–å…³ç³»å¦‚ç½‘çŠ¶èˆ¬é”™ç»¼å¤æ‚ï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šå½±å“æˆ‘ä»¬çš„ä»£ç æ‰§è¡Œæ•ˆçŽ‡ï¼Œé€‚å½“çš„ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼å¯ä»¥å¯¹è¿™ç§ä¾èµ–å…³ç³»è§£è€¦ä½¿é€»è¾‘ç»“æž„æ¸…æ™°ï¼Œä½†æ˜¯ï¼Œå¦‚æžœå‡ ä¸ªç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»å¹¶ä¸å¤æ‚ï¼Œä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼åè€Œä½¿å¾—åŽŸæœ¬ä¸å¤æ‚çš„é€»è¾‘ç»“æž„å˜å¾—å¤æ‚ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨å†³å®šä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼ä¹‹å‰è¦å¤šè€ƒè™‘æƒè¡¡åˆ©å¼Šã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>ä¸­ä»‹è€…æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åä¸‰ä¹‹è®¿é—®è€…æ¨¡å¼]]></title>
    <url>%2Fposts%2Ffa7c7db8.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ è®¿é—®è€…æ¨¡å¼ ä»‹ç»è®¿é—®è€…æ¨¡å¼æ˜¯ä¸€ç§å°†æ•°æ®æ“ä½œä¸Žæ•°æ®ç»“æž„åˆ†ç¦»çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒæ˜¯ ã€Šè®¾è®¡æ¨¡å¼ã€‹ä¸­è¾ƒä¸ºå¤æ‚çš„ä¸€ä¸ªï¼Œä½†å®ƒçš„ä½¿ç”¨é¢‘çŽ‡å¹¶ä¸é«˜ï¼Œæ­£å¦‚ã€Šè®¾è®¡æ¨¡å¼ã€‹çš„ä½œè€… GOF å¯¹è®¿é—®è€…æ¨¡å¼çš„æè¿°ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ å¹¶ä¸éœ€è¦ä½¿ç”¨è®¿é—®è€…æ¨¡å¼ï¼Œä½†æ˜¯å½“ä½ ä¸€æ—¦éœ€è¦ä½¿ç”¨å®ƒæ—¶ï¼Œé‚£ä½ å°±æ˜¯çœŸæ­£çš„éœ€è¦å®ƒäº†ã€‚ è®¿é—®è€…æ¨¡å¼çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼Œè½¯ä»¶ç³»ç»Ÿä¸­æ‹¥æœ‰ä¸€ä¸ªç”±è®¸å¤šå¯¹è±¡æž„æˆçš„ã€æ¯”è¾ƒç¨³å®šçš„å¯¹è±¡ç»“æž„ï¼Œè¿™äº›å¯¹è±¡çš„ç±»éƒ½æ‹¥æœ‰ä¸€ä¸ª accept æ–¹æ³•ç”¨æ¥æŽ¥å—è®¿é—®è€…å¯¹è±¡çš„è®¿é—®ã€‚è®¿é—®è€…æ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œå®ƒæ‹¥æœ‰ä¸€ä¸ª visit æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å¯¹è®¿é—®åˆ°çš„å¯¹è±¡ç»“æž„ä¸­ä¸åŒç±»åž‹çš„å…ƒç´ åšå‡ºä¸åŒçš„å¤„ç†ã€‚åœ¨å¯¹è±¡ç»“æž„çš„ä¸€æ¬¡è®¿é—®è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éåŽ†æ•´ä¸ªå¯¹è±¡ç»“æž„ï¼Œå¯¹æ¯ä¸€ä¸ªå…ƒç´ éƒ½å®žæ–½ accept æ–¹æ³•ï¼Œåœ¨æ¯ä¸€ä¸ªå…ƒç´ çš„ accept æ–¹æ³•ä¸­ä¼šè°ƒåŠ¨è®¿é—®è€…çš„ visit æ–¹æ³•ï¼Œä»Žè€Œä½¿è®¿é—®è€…å¾—åˆ°ä»¥å¤„ç†å¯¹è±¡ç»“æž„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹å¯¹è±¡ç»“æž„è®¾è®¡ä¸åŒçš„è®¿é—®è€…ç±»æ¥å®Œæˆä¸åŒçš„æ“ä½œï¼Œè¾¾åˆ°åŒºåˆ«å¯¹å¾…çš„æ•ˆæžœã€‚ å®šä¹‰ å°è£…ä¸€äº›ä½œç”¨äºŽæŸç§æ•°æ®ç»“æž„ä¸­çš„å„å…ƒç´ çš„æ“ä½œï¼Œå®ƒå¯ä»¥åœ¨ä¸æ”¹å˜è¿™ä¸ªæ•°æ®ç»“æž„çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºŽè¿™äº›å…ƒç´ çš„æ–°çš„æ“ä½œã€‚ ä½¿ç”¨åœºæ™¯ å¯¹è±¡ç»“æž„æ¯”è¾ƒç¨³å®šï¼Œä½†ç»å¸¸éœ€è¦åœ¨æ­¤å¯¹è±¡è¿›è¡Œå¾ˆå¤šä¸åŒçš„å¹¶ä¸”ä¸ç›¸å…³çš„æ“ä½œã€‚ éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡ç»“æž„ä¸­çš„å¯¹è±¡è¿›è¡Œå¾ˆå¤šä¸åŒçš„å¹¶ä¸”ä¸ç›¸å…³çš„æ“ä½œï¼Œè€Œéœ€è¦é¿å…è¿™äº›æ“ä½œ â€œæ±¡æŸ“â€ è¿™äº›å¯¹è±¡çš„ç±»ï¼Œä¹Ÿä¸å¸Œæœ›åœ¨å¢žåŠ æ–°æ“ä½œæ—¶ä¿®æ”¹è¿™äº›ç±»ã€‚ UML ç±»å›¾ Visitorï¼šæŽ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå®ƒå®šä¹‰äº†å¯¹æ¯ä¸€ä¸ªå…ƒç´  (Element) è®¿é—®çš„è¡Œä¸ºï¼Œå®ƒçš„å‚æ•°å°±æ˜¯å¯ä»¥è®¿é—®çš„å…ƒç´ ï¼Œå®ƒçš„æ–¹æ³•ä¸ªæ•°ç†è®ºä¸Šæ¥è®²ä¸Žå…ƒç´ ä¸ªæ•°æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤ï¼Œè®¿é—®è€…æ¨¡å¼è¦æ±‚å…ƒç´ çš„ç±»æ—è¦ç¨³å®šï¼Œå¦‚æžœç»å¸¸æ·»åŠ ã€ç§»é™¤å…ƒç´ ç±»ï¼Œå¿…ç„¶ä¼šå¯¼è‡´é¢‘ç¹åœ°ä¿®æ”¹ Visitor æŽ¥å£ï¼Œå¦‚æžœå‡ºçŽ°è¿™ç§æƒ…å†µï¼Œåˆ™è¯´æ˜Žä¸é€‚åˆä½¿ç”¨è®¿é—®è€…æ¨¡å¼ã€‚ ConcreteVisitor: å…·ä½“çš„è®¿é—®è€…ï¼Œå®ƒéœ€è¦ç»™å‡ºå¯¹æ¯ä¸€ä¸ªå…ƒç´ ç±»è®¿é—®æ—¶æ‰€äº§ç”Ÿçš„å…·ä½“è¡Œä¸ºã€‚ ElementAã€ElementB: å…·ä½“çš„å…ƒç´ ç±»ï¼Œå®ƒæä¾›æŽ¥å—è®¿é—®æ–¹æ³•çš„å…·ä½“å®žçŽ°ï¼Œè€Œè¿™ä¸ªå…·ä½“çš„å®žçŽ°ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯ä½¿ç”¨è®¿é—®è€…æä¾›çš„è®¿é—®è¯¥å…ƒç´ ç±»çš„æ–¹æ³•ã€‚ ObjectStructure: å®šä¹‰å½“ä¸­æ‰€æåˆ°çš„å¯¹è±¡ç»“æž„ï¼Œå¯¹è±¡ç»“æž„æ˜¯ä¸€ä¸ªæŠ½è±¡è¡¨è¿°ï¼Œå®ƒå†…éƒ¨ç®¡ç†äº†å…ƒç´ é›†åˆï¼Œå¹¶ä¸”å¯ä»¥è¿­ä»£è¿™äº›å…ƒç´ ä¾›è®¿é—®è€…è®¿é—®ã€‚ ä»£ç ç¤ºä¾‹ è®¿é—®è€…æ¨¡å¼æ˜¯ä¸€ä¸ªç»“æž„ã€æ¦‚å¿µéƒ½è¾ƒä¸ºå¤æ‚çš„æ¨¡å¼ï¼Œä½¿ç”¨é¢‘çŽ‡ä¹Ÿä¸é«˜ï¼Œä½†æ˜¯å¹¶ä¸ä»£è¡¨å¯ä»¥å°†å®ƒçš„ä½œç”¨å¿½ç•¥ï¼Œå½“æœ‰åˆé€‚çš„åœºæ™¯æ—¶ï¼Œè®¿é—®è€…æ¨¡å¼ä¼šå¸¦æ¥æ„å‘ä¸åˆ°çš„çµæ´»æ€§ï¼Œä¸‹é¢æˆ‘ä»¬å°±ä»¥ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹è¯´æ˜Žä¸‹ï¼š ç®€å•ç¤ºä¾‹éœ€æ±‚: å…¬å¸çš„é¢†å¯¼å±‚å¹´åº•å¯¹å‘˜å·¥è¿›è¡Œç»©æ•ˆè€ƒæ ¸ï¼Œä½†æ˜¯æ¯ä¸ªé¢†å¯¼å¯¹äºŽå‘˜å·¥çš„å…³æ³¨ç‚¹ä¸åŒï¼Œæ‰€ä»¥è¦ä¸åŒçš„è®¿é—®å¤„ç†ã€‚ å‘˜å·¥æŠ½è±¡ç±» 12345678910111213141516171819public abstract class Staff &#123; public String name; /** * å‘˜å·¥ kpi */ public int kpi; public Staff(String name) &#123; this.name = name; kpi = new Random().nextInt(10); &#125; /** * æŽ¥å—å…¬å¸é¢†å¯¼å±‚å¯¹å‘˜çš„è®¿é—® * @param visitor */ public abstract void accept(Visitor visitor);&#125; Staff ç±»å®šä¹‰äº†å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯åŠä¸€ä¸ª accept æ–¹æ³•ï¼Œè¡¨ç¤ºæŽ¥å—å…¬å¸é¢†å¯¼çš„è®¿é—®ï¼Œç”±å­ç±»å…·ä½“å®žçŽ°ï¼Œä¸‹é¢æ¥çœ‹çœ‹ï¼Œå…·ä½“å®žçŽ°ã€‚ ç¨‹åºå‘˜ï¼š 123456789101112131415161718public class Engineer extends Staff &#123; public Engineer(String name) &#123; super(name); &#125; @Override public void accept(Visitor visitor) &#123; visitor.visit(this); &#125; /** * å·¥ç¨‹å¸ˆè¿™ä¸€å¹´å†™çš„ä»£ç é‡ */ public int getCodeLines()&#123; return new Random().nextInt(10 * 10000); &#125;&#125; ç»ç†: 1234567891011121314151617181920public class Manager extends Staff&#123; public Manager(String name) &#123; super(name); &#125; @Override public void accept(Visitor visitor) &#123; visitor.visit(this); &#125; /** * ä¸€å¹´åšçš„äº§å“æ•°é‡ * @return */ public int getProducts()&#123; return new Random().nextInt(10); &#125;&#125; åœ¨ç¨‹åºå‘˜ã€ç»ç†ç±»ä¸­æ·»åŠ äº†å„è‡ªçš„å®žçŽ°ï¼Œå› ä¸ºä»–ä»¬çš„å·®å¼‚æ€§æ‰èƒ½ä½¿å¾—è®¿é—®è€…æ¨¡å¼å‘æŒ¥å®ƒçš„å·¥ä½œã€‚Staffã€Engineerã€Manager è¿™ 3 ä¸ªç±»å°±æ˜¯å¯¹è±¡ç»“æž„ï¼Œè¿™äº›ç±»ç›¸å¯¹ç¨³å®šï¼Œä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚ å‘˜å·¥æŠ¥è¡¨: 123456789101112131415161718192021public class BusinesssReport &#123; private List&lt;Staff&gt; mStaff = new ArrayList&lt;&gt;(); public BusinesssReport()&#123; mStaff.add(new Manager("DevYK ç»ç†")); mStaff.add(new Engineer("IOS å·¥ç¨‹å¸ˆ")); mStaff.add(new Engineer("Android å·¥ç¨‹å¸ˆ")); mStaff.add(new Engineer("Java å·¥ç¨‹å¸ˆ")); mStaff.add(new Engineer("C++ å·¥ç¨‹å¸ˆ")); &#125; /** * ä¸ºè®¿é—®è€…å±•ç¤ºæŠ¥è¡¨ */ public void showReport(Visitor visitor)&#123; for (Staff staff : mStaff) &#123; staff.accept(visitor); &#125; &#125;&#125; å…¬å¸é¢†å¯¼å±‚æŠ½è±¡è®¿é—®è€…å°è£…: 123456789101112public interface Visitor &#123; /** * è®¿é—®å·¥ç¨‹å¸ˆç±»åž‹ */ public void visit(Engineer engineer); /** * è®¿é—®ç»ç†ç±»åž‹ */ public void visit(Manager leader);&#125; CEO è®¿é—®å‘˜å·¥å®žçŽ°: 123456789101112public class CEOVisitor implements Visitor &#123; @Override public void visit(Engineer engineer) &#123; System.out.println("engineer = [" + "name: " + engineer.name + " kpi: " + engineer.kpi + "]"); &#125; @Override public void visit(Manager leader) &#123; System.out.println("leader = [" + "name: " + leader.name + " kpi: " + leader.kpi + " äº§å“æ•°é‡ï¼š" + leader.getProducts() + "]"); &#125;&#125; CTO è®¿é—®å‘˜å·¥å®žçŽ° 1234567891011public class CTOVisitor implements Visitor &#123; @Override public void visit(Engineer engineer) &#123; System.out.println("engineer = [" + engineer.name + " ä»£ç è¡Œæ•°ï¼š"+engineer.getCodeLines()+"]"); &#125; @Override public void visit(Manager leader) &#123; System.out.println("leader = [" + leader.name + " äº§å“æ•°é‡ï¼š"+leader.getProducts()+"]"); &#125;&#125; Client å®¢æˆ·ç«¯ä»£ç  â€“ã€‹å¹´æ€»è¿›è¡Œè®¿é—® 1234567891011@Testpublic void textVisitor()&#123; //æž„å»ºæŠ¥è¡¨ BusinesssReport businesssReport = new BusinesssReport(); //ç»™ CEO æ±‡æŠ¥çš„æŠ¥è¡¨ System.out.println("&gt;&gt;&gt;&gt;&gt;&gt;&gt;ç»™ CEO æ±‡æŠ¥çš„æŠ¥è¡¨"); businesssReport.showReport(new CEOVisitor()); //ç»™ CTO æ±‡æŠ¥çš„æŠ¥è¡¨ System.out.println("&gt;&gt;&gt;&gt;&gt;&gt;&gt;ç»™ CTO æ±‡æŠ¥çš„æŠ¥è¡¨"); businesssReport.showReport(new CTOVisitor());&#125; å®¢æˆ·ç«¯ä»£ç ä¸­ï¼Œé¦–å…ˆæž„å»ºäº†ä¸€ä¸ªæŠ¥è¡¨å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­ç»´æŠ¤äº†æ‰€æœ‰å‘˜å·¥çš„é›†åˆï¼Œç„¶åŽé€šè¿‡æŠ¥è¡¨ç±»çš„ showReport å‡½æ•°ä¸º Visitor å¯¹è±¡æä¾›ä¸€ä¸ªè®¿é—®æŽ¥å£ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­æŸ¥çœ‹æ‰€æœ‰å‘˜å·¥ä¿¡æ¯ï¼Œç„¶åŽè°ƒç”¨å‘˜å·¥çš„ accept å‡½æ•°æŽ¥å—å…¬å¸é¢†å¯¼å±‚çš„è®¿é—®ï¼Œæ¯ä¸ªè®¿é—®è€…å¯¹ä¸åŒèŒä½çš„å‘˜å·¥è°ƒç”¨å¯¹åº”çš„ visit å‡½æ•°å®žçŽ°ä¸åŒçš„æ“ä½œã€‚ç»©æ•ˆå¦‚ä¸‹ï¼š ouput: 12345678910111213&gt;&gt;&gt;&gt;&gt;&gt;&gt;ç»™ CEO æ±‡æŠ¥çš„æŠ¥è¡¨leader = [name: DevYK ç»ç† kpi: 6 äº§å“æ•°é‡ï¼š6]engineer = [name: IOS å·¥ç¨‹å¸ˆ kpi: 3]engineer = [name: Android å·¥ç¨‹å¸ˆ kpi: 1]engineer = [name: Java å·¥ç¨‹å¸ˆ kpi: 3]engineer = [name: C++ å·¥ç¨‹å¸ˆ kpi: 9]&gt;&gt;&gt;&gt;&gt;&gt;&gt;ç»™ CTO æ±‡æŠ¥çš„æŠ¥è¡¨leader = [DevYK ç»ç† äº§å“æ•°é‡ï¼š4]engineer = [IOS å·¥ç¨‹å¸ˆ ä»£ç è¡Œæ•°ï¼š81491]engineer = [Android å·¥ç¨‹å¸ˆ ä»£ç è¡Œæ•°ï¼š25627]engineer = [Java å·¥ç¨‹å¸ˆ ä»£ç è¡Œæ•°ï¼š61337]engineer = [C++ å·¥ç¨‹å¸ˆ ä»£ç è¡Œæ•°ï¼š51714] åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œ Staff æ‰®æ¼”äº† Element è§’è‰²ï¼Œè€Œ Engineer å’Œ Manager éƒ½æ˜¯ ConcreteElement; CEOVisitor å’Œ CTOVisitor éƒ½æ˜¯å…·ä½“çš„è®¿é—®è€… Visitor å¯¹è±¡å®žçŽ°ï¼›è€Œ BusinessReport å°±æ˜¯ ObjectStructure; Client å°±æ˜¯å®¢æˆ·ç«¯ä»£ç ï¼Œè¯¦ç»†ç»“æž„å¯ä»¥ä¸‹ä¸‹é¢çš„ UML ç±»å›¾ æ€»ç»“ä¼˜ç‚¹: å„è‡ªè§’è‰²èŒè´£åˆ†æ˜Žï¼Œç¬¦åˆå•ä¸€èŒè´£åŽŸåˆ™ï¼› å…·æœ‰ä¼˜ç§€çš„å¯æ‰©å±•æ€§ï¼› ä½¿å¾—æ•°æ®ç»“æž„å’Œä½œç”¨äºŽç»“æž„ä¸Šçš„æ“ä½œè§£è€¦ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚ çµæ´»æ€§ã€‚ ç¼ºç‚¹ï¼š å…·ä½“å…ƒç´ å¯¹è®¿é—®è€…å…¬å¸ƒç»†èŠ‚ï¼Œè¿åäº†è¿ªç±³ç‰¹åŽŸåˆ™ï¼› å…·ä½“å…ƒç´ å˜æ›´æ—¶å¯¼è‡´ä¿®æ”¹æˆæœ¬å¤§ï¼› è¿åäº†ä¾èµ–å¯¼è‡´åŽŸåˆ™ï¼Œä¸ºäº†è¾¾åˆ° â€œåŒºåˆ«å¯¹å¾…â€ è€Œä¾èµ–äº†å…·ä½“ç±»ï¼Œæ²¡æœ‰ä¾èµ–æŠ½è±¡ï¼› åœ¨ä½¿ç”¨è¯¥æ¨¡å¼ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥æ˜Žç¡®å®ƒçš„ä½¿ç”¨åœºæ™¯ã€å®ƒèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ç­‰ï¼Œä»¥æ­¤æ¥é¿å…æ»¥ç”¨è®¾è®¡æ¨¡å¼ã€‚æ‰€ä»¥ï¼Œåœ¨å­¦ä¹ è®¾è®¡æ¨¡å¼æ—¶ï¼Œä¸€å®šè¦ç†è§£æ¨¡å¼çš„é€‚ç”¨æ€§åŠä¼˜ç¼ºç‚¹ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>è®¿é—®è€…æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åäºŒä¹‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼]]></title>
    <url>%2Fposts%2Fafa4869b.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ ä»‹ç»åœ¨é¢å‘å¯¹è±¡å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šé‡åˆ°è¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªç®—æ³•æ‰€éœ€çš„å…³é”®æ­¥éª¤ï¼Œå¹¶ç¡®å®šäº†è¿™äº›æ­¥éª¤çš„æ‰§è¡Œé¡ºåºï¼Œä½†æ˜¯ï¼ŒæŸäº›æ­¥éª¤çš„å…·ä½“å®žçŽ°æ˜¯æœªçŸ¥çš„ï¼Œæˆ–è€…è¯´æŸäº›æ­¥éª¤çš„å®žçŽ°æ˜¯ä¼šéšç€çŽ¯å¢ƒçš„å˜åŒ–è€Œæ”¹å˜çš„ï¼Œä¾‹å¦‚ï¼Œæ‰§è¡Œç¨‹åºçš„æµç¨‹å¤§è‡´å¦‚ä¸‹: æ£€æŸ¥ä»£ç çš„æ­£ç¡®æ€§ï¼› é“¾æŽ¥ç›¸å…³çš„ç±»åº“ï¼› ç¼–è¯‘ç›¸å…³ä»£ç ï¼› æ‰§è¡Œç¨‹åºï¼› å¯¹äºŽä¸åŒçš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œä¸Šè¿° 4 ä¸ªæ­¥éª¤éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯ï¼Œå®ƒä»¬çš„æ‰§è¡Œæµç¨‹æ˜¯å›ºå®šçš„ï¼Œè¿™ç±»é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯è¿™ä»¬è¿™ç¯‡çš„ä¸»è¦å†…å®¹ - æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€‚ å®šä¹‰å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­ç®—æ³•çš„æ¡†æž¶ï¼Œå°†ä¸€äº›æ­¥éª¤äº¤äºŽå­ç±»å…·ä½“å®žçŽ°ï¼Œä½¿å¾—å­ç±»å¯ä»¥æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æž„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ ä½¿ç”¨åœºæ™¯ å¤šä¸ªå­ç±»æœ‰å…¬æœ‰çš„æ–¹æ³•ï¼Œå¹¶ä¸”é€»è¾‘åŸºæœ¬ç›¸åŒæ—¶ã€‚ é‡è¦ã€å¤æ‚çš„ç®—æ³•ï¼Œå¯ä»¥æŠŠæ ¸å¿ƒç®—æ³•è®¾è®¡ä¸ºæ¨¡æ¿æ–¹æ³•ï¼Œå‘¨è¾¹çš„ç›¸å…³ç»†èŠ‚åŠŸèƒ½åˆ™ç”±å„ä¸ªå­ç±»å®žçŽ°ã€‚ é‡æž„æ—¶ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ä¸ªç»å¸¸ä½¿ç”¨çš„æ¨¡å¼ï¼ŒæŠŠç›¸åŒçš„ä»£ç æŠ½å–åˆ°çˆ¶ç±»ä¸­ï¼Œç„¶åŽé€šè¿‡é’©å­å‡½æ•°çº¦æŸå…¶è¡Œä¸ºã€‚ UML ç±»å›¾ AbsTemplate: æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†ä¸€å¥—ç®—æ³•æ¡†æž¶ã€‚ ConcreteImplA: å…·ä½“å®žçŽ°ç±» Aã€‚ ConcreteImpleB: å…·ä½“å®žçŽ°ç±» Bã€‚ ä»£ç ç¤ºä¾‹æ¨¡æ¿æ–¹æ³•æ¨¡å¼å®žé™…ä¸Šæ˜¯å°è£…ä¸€ä¸ªå›ºå®šæµç¨‹ï¼Œå°±åƒæ˜¯ä¸€å¥—æ‰§è¡Œæ¨¡æ¿ä¸€æ ·ï¼Œç¬¬ä¸€æ­¥è¯¥åšä»€ä¹ˆï¼Œç¬¬äºŒæ­¥è¯¥åšä»€ä¹ˆéƒ½å·²ç»åœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰å¥½ã€‚è€Œå­ç±»å¯ä»¥æœ‰ä¸åŒçš„ç®—æ³•å®žçŽ°ï¼Œåœ¨æ¡†æž¶ä¸è¢«ä¿®æ”¹çš„æƒ…å†µä¸‹å®žçŽ°æŸäº›æ­¥éª¤çš„ç®—æ³•æ›¿æ¢ï¼Œä¸‹é¢å°±å°±ä»¥ç®€å•ç¤ºä¾‹æ¥è¯´æ˜Žä¸€ä¸‹ã€‚ ç®€å•ç¤ºä¾‹éœ€æ±‚ï¼š ç”¨ä»£ç ç®€è¦æè¿°å¼€æœºè¿‡ç¨‹ å®šä¹‰æŠ½è±¡çš„æ¨¡æ¿ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public abstract class AbstractComputer &#123; /** * å¼€å¯ç”µæº */ protected void powerOn()&#123; System.out.println("å¼€å¯ç”µæº"); &#125; /** * ç¡¬ä»¶æ£€æŸ¥ */ protected void checkHardware()&#123; System.out.println("ç¡¬ä»¶æ£€æŸ¥"); &#125; /** * åŠ è½½ç³»ç»Ÿ */ protected void loadSystem()&#123; System.out.println("åŠ è½½ç³»ç»Ÿ"); &#125; /** * å±å¹•æ˜¾ç¤º */ protected void showScreen()&#123; System.out.println("å±å¹•æ˜¾ç¤º"); &#125; /** * è¾“å…¥ç”¨æˆ·ä¿¡æ¯ */ protected void login()&#123; System.out.println("å¯†ç éªŒè¯æˆåŠŸï¼Œè¿›å…¥ä¸»é¡µé¢ã€‚"); &#125; /** * å¯åŠ¨è®¡ç®—æœºæ–¹æ³•ï¼Œæ­¥éª¤å›ºå®šä¸ºå¼€å¯ç”µæºã€ç¡¬ä»¶æ£€æŸ¥ã€åŠ è½½ç³»ç»Ÿã€å±å¹•æ˜¾ç¤ºã€ç™»å½•ã€‚è®¾è®¡ä¸º final é˜²æ­¢è¢«é‡å†™ */ public final void startUp()&#123; System.out.println("------&gt;&gt;&gt;&gt;&gt;&gt;&gt; startup "); powerOn(); checkHardware(); loadSystem(); showScreen(); login(); System.out.println("------&gt;&gt;&gt;&gt;&gt;&gt;&gt; Successful"); &#125;&#125; æŠ½è±¡æ¨¡æ¿å®žçŽ° A 12345678public class CoderComputer extends AbstractComputer &#123; @Override protected void login() &#123; System.out.println("å¯†ç è¾“å…¥å®Œæˆï¼Œäº¤äºŽç³»ç»Ÿæ£€æŸ¥ã€‚"); super.login(); &#125;&#125; æŠ½è±¡æ¨¡æ¿å®žçŽ° B 1234567891011121314public class MilitaryComputer extends AbstractComputer &#123; @Override protected void checkHardware() &#123; super.checkHardware(); System.out.println("æ£€æŸ¥é˜²ç«å¢™"); &#125; @Override protected void login() &#123; System.out.println("è§†ç½‘è†œæ‰«æ \n è§†ç½‘è†œéªŒè¯æˆåŠŸ"); super.login(); &#125;&#125; test 123456789@Testpublic void testTemplate()&#123; AbstractComputer abstractComputerA = new CoderComputer(); abstractComputerA.startUp(); AbstractComputer abstractComputerB = new MilitaryComputer(); abstractComputerB.startUp();&#125; output 123456789101112131415161718192021ç¨‹åºå‘˜ç”µè„‘å¯åŠ¨æµç¨‹------&gt;&gt;&gt;&gt;&gt;&gt;&gt; startup å¼€å¯ç”µæºç¡¬ä»¶æ£€æŸ¥åŠ è½½ç³»ç»Ÿå±å¹•æ˜¾ç¤ºå¯†ç è¾“å…¥å®Œæˆï¼Œäº¤äºŽç³»ç»Ÿæ£€æŸ¥ã€‚å¯†ç éªŒè¯æˆåŠŸï¼Œè¿›å…¥ä¸»é¡µé¢ã€‚------&gt;&gt;&gt;&gt;&gt;&gt;&gt; Successfulå†›ç”¨ç”µè„‘å¯åŠ¨æµç¨‹------&gt;&gt;&gt;&gt;&gt;&gt;&gt; startup å¼€å¯ç”µæºç¡¬ä»¶æ£€æŸ¥æ£€æŸ¥é˜²ç«å¢™åŠ è½½ç³»ç»Ÿå±å¹•æ˜¾ç¤ºè§†ç½‘è†œæ‰«æ è§†ç½‘è†œéªŒè¯æˆåŠŸå¯†ç éªŒè¯æˆåŠŸï¼Œè¿›å…¥ä¸»é¡µé¢ã€‚------&gt;&gt;&gt;&gt;&gt;&gt;&gt; Successful é€šè¿‡ä¸Šé¢çš„æ¨¡æ¿ä¾‹å­å¯ä»¥çœ‹åˆ° ï¼Œåœ¨ startUp æ–¹æ³•ä¸­æœ‰ä¸€äº›å›ºå®šçš„æ‰§è¡Œé¡ºåºï¼Œä½†æ˜¯ï¼Œä¸åŒçš„åœºæ™¯æ‰§è¡Œå®žçŽ°çš„æ­¥éª¤å„ä¸ç›¸åŒï¼Œå› æ­¤å­ç±»éœ€è¦å¤å†™ç›¸åº”çš„æ–¹æ³•æ¥è¿›è¡Œè‡ªå®šä¹‰å¤„ç†ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ startUp ä¸º final æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æ¨¡æ¿çš„æ‰§è¡Œé¡ºåºä¸è¢«å¤–éƒ¨æ›´æ”¹ï¼Œå­ç±»æ›´æ”¹æŸä¸€æ—¶åˆ»æ‰§è¡Œçš„å…·ä½“å®žçŽ°ï¼Œè¿™æ ·å°±ä¿è¯äº†æ•´ä¸ªé€»è¾‘æµç¨‹çš„ç¨³å®šæ€§ã€‚ æ€»ç»“æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç”¨ 4 ä¸ªå­—æ¦‚æ‹¬å°±æ˜¯ï¼šæµç¨‹å°è£…ã€‚ä¹Ÿå°±æ˜¯æŠŠæŸä¸ªå›ºå®šçš„æµç¨‹å°è£…åˆ°ä¸€ä¸ª final å‡½æ•°ä¸­ï¼Œå¹¶è®©å­ç±»èƒ½å¤Ÿå®šåˆ¶è¿™ä¸ªæµç¨‹ä¸­çš„æŸäº›æˆ–è€…æ‰€æœ‰æ­¥éª¤ï¼Œè¿™å°±è¦æ±‚çˆ¶ç±»æå–å…±ç”¨çš„ä»£ç ï¼Œæå‡ä»£ç å¤ç”¨çŽ‡ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†æ›´å¥½çš„å¯æ‰©å±•æ€§ã€‚ ä¼˜ç‚¹: å°è£…ä¸å˜éƒ¨åˆ†ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†ã€‚ æå–å…¬å…±éƒ¨åˆ†ä»£ç ï¼Œä¾¿äºŽç»´æŠ¤ã€‚ ç¼ºç‚¹: æ¨¡æ¿æ–¹æ³•ä¼šå¸¦æ¥ä»£ç é˜…è¯»çš„éš¾åº¦ï¼Œä¼šè®©ç”¨æˆ·è§‰å¾—éš¾ä»¥ç†è§£ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åä¸€ä¹‹è¿­ä»£å™¨æ¨¡å¼]]></title>
    <url>%2Fposts%2F1cfae984.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ è¿­ä»£å™¨æ¨¡å¼ ä»‹ç»è¿­ä»£å™¨æ¨¡å¼ (Iterator Pattern) åˆç§°ä¸ºæ¸¸æ ‡ (Cursor) æ¨¡å¼ ï¼Œæ˜¯è¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚è¿­ä»£å™¨æ¨¡å¼ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤è€çš„è®¾è®¡æ¨¡å¼ï¼Œå…¶æºäºŽå¯¹å®¹å™¨çš„è®¿é—®ï¼Œæ¯”å¦‚ Java çš„ List ã€Map ã€æ•°ç»„ç­‰ï¼Œæˆ‘ä»¬çŸ¥é“å¯¹å®¹å™¨å¯¹è±¡çš„è®¿é—®å¿…ç„¶ä¼šè®¾è®¡éåŽ†ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†éåŽ†çš„æ–¹æ³•å°è£…åœ¨å®¹å™¨ä¸­ï¼Œæˆ–è€…ä¸æä¾›éåŽ†æ–¹æ³•ã€‚å¦‚æžœæˆ‘ä»¬å°†éåŽ†çš„æ–¹æ³•å°è£…åˆ°å®¹å™¨ä¸­ï¼Œé‚£ä¹ˆå¯¹äºŽå®¹å™¨ç±»æ¥è¯´å°±æ‰¿æ‹…äº†è¿‡å¤šçš„åŠŸèƒ½ï¼Œå®¹å™¨ç±»ä¸ä»…ä»…è¦ç»´æŠ¤è‡ªèº«å†…éƒ¨çš„æ•°æ®å…ƒç´ è€Œä¸”è¿˜è¦å¯¹å¤–æä¾›éåŽ†çš„æŽ¥å£æ–¹æ³•ï¼Œå› ä¸ºéåŽ†çŠ¶æ€çš„å­˜å‚¨é—®é¢˜è¿˜ä¸èƒ½å¯¹åŒä¸€ä¸ªå®¹å™¨åŒæ—¶è¿›è¡Œå¤šä¸ªéåŽ†æ“ä½œï¼Œå¦‚æžœæˆ‘ä»¬ä¸æä¾›éåŽ†æ–¹æ³•è€Œè®©ä½¿ç”¨è€…è‡ªå·±åŽ»å®žçŽ°ï¼Œåˆä¼šè®©å®¹å™¨å†…éƒ¨ç»†èŠ‚æš´éœ²æ— é—ï¼Œæ­£å› äºŽæ­¤ï¼Œè¿­ä»£æ¨¡å¼åº”è¿è€Œç”Ÿï¼Œåœ¨å®¢æˆ·è®¿é—®ç±»ä¸Žå®¹å™¨ä½“ä¹‹é—´æ’å…¥äº†ä¸€ä¸ªç¬¬ä¸‰è€… - è¿­ä»£å™¨ï¼Œå¾ˆå¥½åœ°è§£å†³äº†ä¸Šé¢æ‰€è¿°çš„å¼Šç«¯ã€‚ å®šä¹‰æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªå®¹å™¨å¯¹è±¡ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸éœ€è¦æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚ ä½¿ç”¨åœºæ™¯éåŽ†ä¸€ä¸ªå®¹å™¨å¯¹è±¡æ—¶ã€‚ UML ç±»å›¾ Iterator: è¿­ä»£å™¨æŽ¥å£ã€‚è¿­ä»£å™¨æŽ¥å£è´Ÿè´£å®šä¹‰ã€è®¿é—®å’ŒéåŽ†å…ƒç´ çš„æŽ¥å£ã€‚ Concrete Iterator: å…·ä½“è¿­ä»£å™¨ç±»ã€‚å…·ä½“è¿­ä»£å™¨ç±»çš„ç›®çš„ä¸»è¦æ˜¯å®žçŽ°è¿­ä»£å™¨æŽ¥å£ï¼Œå¹¶è®°å½•éåŽ†çš„å½“å‰ä½ç½®ã€‚ Aggregate: å®¹å™¨æŽ¥å£ã€‚å®¹å™¨æŽ¥å£è´Ÿè´£æä¾›åˆ›å»ºå…·ä½“è¿­ä»£å™¨è§’è‰²çš„æŽ¥å£ã€‚ Concrete Aggregate: å…·ä½“å®¹å™¨ç±»ã€‚å…·ä½“è¿­ä»£å™¨è§’è‰²ä¸Žè¯¥å®¹å™¨ç›¸å…³è”ã€‚ Client: å®¢æˆ·ç±»ã€‚ ä»£ç ç¤ºä¾‹ç®€å•ç¤ºä¾‹è¿­ä»£å™¨æŽ¥å£ 1234567891011121314public interface Iterator&lt;T&gt; &#123; /** * æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´  * @return true è¡¨ç¤ºæœ‰ï¼Œfalse è¡¨ç¤ºæ²¡æœ‰ */ boolean hasNext(); /** * è¿”å›žå½“å‰ä½ç½®çš„å…ƒç´ å¹¶å°†ä½ç½®ç§»åŠ¨åˆ°ä¸‹ä¸€ä½ * @return */ T next();&#125; å…·ä½“è¿­ä»£å™¨ç±» 123456789101112131415161718192021222324252627282930public class ConcreteIterator&lt;T&gt; implements Iterator&lt;T&gt; &#123; /** * æ¨¡æ‹Ÿç”¨ä¸€ä¸ª List */ private List&lt;T&gt; mList = new ArrayList&lt;&gt;(); private int cursor = 0; public ConcreteIterator(List&lt;T&gt; list) &#123; this.mList = list; &#125; @Override public boolean hasNext() &#123; return cursor != mList.size(); &#125; @Override public T next() &#123; //å®šä¹‰ä¸€ä¸ªä¸´æ—¶å˜é‡ T obj = null; if (this.hasNext()) &#123; obj = this.mList.get(cursor++); &#125; return obj; &#125;&#125; å®¹å™¨æŽ¥å£ 123456789101112131415161718192021public interface Aggregate&lt;T&gt; &#123; /** * æ·»åŠ ä¸€ä¸ªå¯¹è±¡ * @param t */ void add(T t); /** * åˆ é™¤çš„å¯¹è±¡ * @param t */ void remove(T t); /** * èŽ·å–å®¹å™¨çš„è¿­ä»£å™¨ * @return */ Iterator&lt;T&gt; iterator();&#125; å…·ä½“å®¹å™¨ç±» 1234567891011121314151617181920212223public class ConcreteAggregate&lt;T&gt; implements Aggregate&lt;T&gt;&#123; /** * æ¨¡æ‹Ÿå…·ä½“å®¹å™¨ */ private List&lt;T&gt; mLists = new ArrayList&lt;&gt;(); @Override public void add(T t) &#123; mLists.add(t); &#125; @Override public void remove(T t) &#123; mLists.remove(t); &#125; @Override public Iterator&lt;T&gt; iterator() &#123; return new ConcreteIterator&lt;T&gt;(mLists); &#125;&#125; å®¢æˆ·ç±» 12345678910111213141516@Testpublic void testIterators() &#123; //åˆ›å»ºå®¹å™¨ Aggregate&lt;String&gt; aggregate = new ConcreteAggregate&lt;&gt;(); aggregate.add("1"); aggregate.add("2"); aggregate.add("3"); aggregate.add("4"); //æ‹¿åˆ°å®¹å™¨è¿­ä»£å™¨ï¼Œä½¿ç”¨è¿­ä»£å™¨éåŽ† Iterator&lt;String&gt; iterator = aggregate.iterator(); while (iterator.hasNext()) &#123; System.out.println("Aggregate: " + iterator.next()); &#125;&#125; Output: 1234Aggregate: 1Aggregate: 2Aggregate: 3Aggregate: 4 æ€»ç»“å¯¹äºŽè¿­ä»£å™¨æ¨¡å¼æ¥è¯´ï¼Œå…¶è‡ªèº«ä¼˜ç‚¹å¾ˆæ˜Žæ˜¾ä¹Ÿå¾ˆå•ä¸€ï¼Œæ”¯æŒä»¥ä¸åŒçš„æ–¹å¼åŽ»éåŽ†ä¸€ä¸ªå®¹å™¨å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªéåŽ†ï¼Œå¼±åŒ–äº†å®¹å™¨ç±»ä¸ŽéåŽ†ç®—æ³•ä¹‹é—´çš„å…³ç³»ï¼Œå…¶ç¼ºç‚¹å°±æ˜¯å¯¹ç±»æ–‡ä»¶çš„å¢žåŠ ã€‚ å¤§å®¶ä¹Ÿå¯èƒ½ä¼šæƒ³åˆ°å…¶ä»–è¯­è¨€ï¼Œå¦‚ C++ã€Python ã€PHP ç­‰ï¼Œä»–ä»¬å†…éƒ¨ä¹Ÿæœ‰ä¼—å¤šå®¹å™¨ä½“çš„å®šä¹‰ï¼Œå½“ç„¶ï¼Œä¹Ÿæœ‰ç›¸åº”çš„è¿­ä»£å™¨ã€‚è¿­ä»£å™¨æ¨¡å¼å‘å±•è‡³ä»Šï¼Œå‡ ä¹Žæ¯ä¸€ç§é«˜çº§è¯­è¨€éƒ½æœ‰ç›¸åº”çš„å†…ç½®å®žçŽ°ï¼Œå¯¹äºŽå¼€å‘è€…è€Œè¨€ï¼Œå·²ç»æžå°‘ä¼šåŽ»è‡ªå·±å®žçŽ°è¿­ä»£å™¨äº†ï¼Œå› æ­¤ï¼Œå¯¹äºŽè¿­ä»£å™¨æ¨¡å¼åœ¨äºŽäº†è§£è€Œéžåº”ç”¨ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>è¿­ä»£å™¨æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼åä¹‹å¤‡å¿˜å½•æ¨¡å¼]]></title>
    <url>%2Fposts%2F6afac2a.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ å¤‡å¿˜å½•æ¨¡å¼ ä»‹ç»å¤‡å¿˜å½•æ¨¡å¼å±žäºŽè¡Œä¸ºæ¨¡å¼ï¼Œè¯¥æ¨¡å¼ç”¨äºŽä¿å­˜å¯¹è±¡å½“å‰çŠ¶æ€ï¼Œå¹¶ä¸”åœ¨ä¹‹åŽå¯ä»¥å†æ¬¡æ¢å¤åˆ°æ­¤çŠ¶æ€ï¼Œè¿™æœ‰ç‚¹åƒæˆ‘ä»¬å¹³æ—¶å£å¤´ç¦… â€æœ‰æ²¡æœ‰åŽæ‚”è¯â€œ ã€‚å¤‡å¿˜å½•æ¨¡å¼å®žçŽ°çš„æ–¹å¼éœ€è¦ä¿è¯è¢«ä¿å­˜çš„å¯¹è±¡çŠ¶æ€ä¸èƒ½è¢«å¯¹è±¡å¤–éƒ¨è®¿é—®ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¿æŠ¤å¥½è¢«ä¿å­˜çš„è¿™äº›å¯¹è±¡çŠ¶æ€çš„å®Œæ•´æ€§ä»¥åŠå†…éƒ¨å®žçŽ°ä¸å‘å¤–æš´éœ²ã€‚ å®šä¹‰åœ¨ä¸ç ´åå°é—­çš„å‰æä¸‹ï¼Œæ•èŽ·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œè¿™æ ·ï¼Œä»¥åŽå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŽŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚ ä½¿ç”¨åœºæ™¯ éœ€è¦ä¿å­˜ä¸€ä¸ªå¯¹è±¡åœ¨æŸä¸€ä¸ªæ—¶åˆ»çš„çŠ¶æ€æˆ–éƒ¨åˆ†çŠ¶æ€ã€‚ å¦‚æžœç”¨ä¸€ä¸ªæŽ¥å£æ¥è®©å…¶ä»–å¯¹è±¡å¾—åˆ°è¿™äº›çŠ¶æ€ï¼Œå°†ä¼šæš´éœ²å¯¹è±¡çš„å®žçŽ°ç»†èŠ‚å¹¶ç ´åå¯¹è±¡çš„å°è£…æ€§ï¼Œä¸€ä¸ªå¯¹è±¡ä¸å¸Œæœ›å¤–ç•Œç›´æŽ¥è®¿é—®å…¶å†…éƒ¨çŠ¶æ€ï¼Œé€šè¿‡ä¸­é—´å¯¹è±¡å¯ä»¥é—´æŽ¥è®¿é—®å…¶å†…éƒ¨çŠ¶æ€ã€‚ UML ç±»å›¾ Originator: è´Ÿè´£åˆ›å»ºä¸€ä¸ªå¤‡å¿˜å½•ï¼Œå¯ä»¥è®°å½•ã€æ¢å¤è‡ªèº«çš„å†…éƒ¨çŠ¶æ€ã€‚åŒæ—¶ Originator è¿˜å¯ä»¥æ ¹æ®éœ€è¦å†³å®š Memento å­˜å‚¨è‡ªèº«çš„å“ªäº›å†…éƒ¨çŠ¶æ€ã€‚ Memento: å¤‡å¿˜å½•è§’è‰²ï¼Œç”¨äºŽå­˜å‚¨ Originator çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥é˜²æ­¢ Originator ä»¥å¤–çš„å¯¹è±¡è®¿é—® Mementoã€‚ Caretaker: è´Ÿè´£å­˜å‚¨å¤‡å¿˜å½•ï¼Œä¸èƒ½å¯¹å¤‡å¿˜å½•çš„å†…å®¹è¿›è¡Œæ“ä½œå’Œè®¿é—®ï¼Œåªèƒ½å¤Ÿå°†å¤‡å¿˜å½•ä¼ é€’ç»™å…¶å®ƒå¯¹è±¡ã€‚ ä»£ç ç¤ºä¾‹éœ€æ±‚: å¼€å‘ä¸€æ¬¾ç®€å•è®°äº‹æœ¬, åŒ…æ‹¬æ’¤é”€ã€é‡åšåŠŸèƒ½ã€‚ ä»£ç : è´Ÿè´£ç®¡ç†è®°äº‹æœ¬çš„å¯¹è±¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class NoteCaretaker &#123; /** * æœ€å¤§å­˜å‚¨å®¹é‡ */ private static final int MAX = 50; /** * åˆå§‹åŒ– 50 ä¸ªå®¹é‡ */ private List&lt;Memorandum&gt; mMemorandumLists = new ArrayList&lt;&gt;(MAX); /** * å­˜æ¡£ä½ç½® */ private int mIndex = 0; /** * ä¿å­˜å¤‡å¿˜å½•åˆ°è®°å½•åˆ—è¡¨ä¸­ */ public void saveMemorandum(Memorandum memorandum) &#123; if (mMemorandumLists.size() &gt; MAX)&#123; mMemorandumLists.remove(0); &#125; mMemorandumLists.add(memorandum); mIndex = mMemorandumLists.size() - 1; &#125; /** * èŽ·å–ä¸Šä¸€ä¸ªå­˜æ¡£ä¿¡æ¯ï¼Œç›¸å½“äºŽæ’¤é”€åŠŸèƒ½ */ public Memorandum getPrevMemorandum()&#123; mIndex = mIndex &gt; 0 ? --mIndex : mIndex; return mMemorandumLists.get(mIndex); &#125; /** * èŽ·å–ä¸‹ä¸€ä¸ªå­˜æ¡£ä¿¡æ¯ */ public Memorandum getNextMemorandum()&#123; mIndex = mIndex &lt; mMemorandumLists.size() - 1? ++mIndex : mIndex; return mMemorandumLists.get(mIndex); &#125;&#125; åœ¨ NodeCaretaker ä¸­ä¼šç»´æŠ¤ä¸€ä¸ªå¤‡å¿˜å½•åˆ—è¡¨ï¼Œç„¶åŽä½¿ç”¨ mIndex æ ‡è¯†ç¼–è¾‘å™¨å½“å‰æ‰€åœ¨çš„è®°å½•ç‚¹ï¼Œé€šè¿‡ getPrev getNext åˆ†åˆ«èŽ·å–ä¸Šä¸€ä¸ªã€ä¸‹ä¸€ä¸ªè®°å½•ç‚¹çš„å¤‡å¿˜å½•ï¼Œä»¥æ­¤æ¥è¾¾åˆ°æ’¤é”€ã€é‡åšçš„åŠŸèƒ½ã€‚ 1234567891011121314151617181920212223242526272829303132333435public class NodeEditText extends EditText &#123; public NodeEditText(Context context) &#123; super(context); &#125; public NodeEditText(Context context, AttributeSet attrs) &#123; super(context, attrs); &#125; public NodeEditText(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); &#125; /** * åˆ›å»ºå¤‡å¿˜å½•å¯¹è±¡ï¼Œå³å­˜å‚¨ç¼–è¾‘å™¨çš„æŒ‡å®šæ•°æ® * @return */ public Memorandum createMemorandum()&#123; Memorandum memorandum = new Memorandum(); memorandum.text = getText().toString().trim(); memorandum.cursor = getSelectionStart(); return memorandum; &#125; /** * ä»Žå¤‡å¿˜å½•ä¸­æ¢å¤æ•°æ® */ public void restore(Memorandum memorandum)&#123; setText(memorandum.text); setSelection(memorandum.cursor); &#125;&#125; è‡ªå®šä¹‰ä¸€ä¸ªè®°äº‹æœ¬ç¼–è¾‘å™¨ï¼Œæ·»åŠ 2ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«æ˜¯ createMemorandum ã€restore å‡½æ•°ã€‚createMemorandum å‡½æ•°æ˜¯åˆ›å»ºä¸€ä¸ªå­˜å‚¨äº†ç¼–è¾‘å™¨æ–‡æœ¬ï¼Œå…‰æ ‡ä½ç½®æ•°æ®çš„ Memorandum å¯¹è±¡ï¼Œå¹¶ä¸”è¿”å›žç»™å®¢æˆ·ç«¯ï¼›restore å‡½æ•°æ˜¯ä»Ž Memorandum å¯¹è±¡ä¸­æ¢å¤ç¼–è¾‘å™¨çš„æ–‡æœ¬å’Œå…‰æ ‡ä½ç½®ã€‚ å¤‡å¿˜å½•æ¨¡å¼å°±ä»‹ç»åˆ°è¿™é‡Œäº†ï¼Œä¸»è¦è¿˜æ˜¯è¦æ˜Žç¡®æ¯ä¸ªç±»çš„èŒè´£ï¼Œéµä»Žé¢å‘å¯¹è±¡å…­å¤§åŽŸåˆ™å¼€å‘ã€‚ æ€»ç»“ä¼˜ç‚¹ï¼š ç»™ç”¨æˆ·æä¾›äº†ä¸€ç§å¯ä»¥æ¢å¤çŠ¶æ€çš„æœºåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨æˆ·èƒ½å¤Ÿæ¯”è¾ƒæ–¹ä¾¿çš„å›žåˆ°æŸä¸ªåŽ†å²çš„çŠ¶æ€ã€‚ å®žçŽ°äº†ä¿¡æ¯çš„å°è£…ï¼Œä½¿å¾—ç”¨æˆ·ä¸éœ€è¦å…³å¿ƒçŠ¶æ€çš„ä¿å­˜ç»†èŠ‚ã€‚ ç¼ºç‚¹ï¼š æ¶ˆè€—èµ„æºï¼Œå¦‚æžœç±»çš„æˆå‘˜å˜é‡è¿‡å¤šï¼ŒåŠ¿å¿…ä¼šå ç”¨æ¯”è¾ƒå¤§çš„èµ„æºï¼Œè€Œä¸”æ¯ä¸€æ¬¡ä¿å­˜éƒ½ä¼šæ¶ˆè€—ä¸€å®šçš„å†…å­˜ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å¤‡å¿˜å½•æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹ä¹‹è§‚å¯Ÿè€…æ¨¡å¼]]></title>
    <url>%2Fposts%2F871a12ed.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ è§‚å¯Ÿè€…æ¨¡å¼ ä»‹ç»è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ä¸ªä½¿ç”¨çŽ‡éžå¸¸é«˜çš„æ¨¡å¼ï¼Œå®ƒæœ€å¸¸ç”¨çš„åœ°æ–¹æ˜¯ GUI ç³»ç»Ÿã€è®¢é˜…-å‘å¸ƒï¼Œå› ä¸ºè¿™ä¸ªæ¨¡å¼çš„ä¸€ä¸ªé‡è¦ä½œç”¨å°±æ˜¯è§£è€¦ï¼Œå°†è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…è§£è€¦ï¼Œä½¿å¾—å¥¹ä»¬ä¹‹é—´çš„ä¾èµ–æ€§æ›´å°ï¼Œç”šè‡³åšåˆ°æ¯«æ— ä¾èµ–ã€‚ä»¥ GUI ç³»ç»Ÿæ¥è¯´ï¼Œåº”ç”¨çš„ UI å…·æœ‰æ˜“å˜æ€§ï¼Œå°¤å…¶æ˜¯å‰æœŸéšç€ä¸šåŠ¡çš„æ”¹å˜æˆ–è€…äº§å“çš„éœ€æ±‚æ›´æ”¹ï¼Œåº”ç”¨ç•Œé¢ä¹Ÿä¼šç»å¸¸æ€§å˜åŒ–ï¼Œä½†æ˜¯ä¸šåŠ¡é€»è¾‘åŸºæœ¬å˜åŒ–ä¸å¤§ï¼Œæ­¤æ—¶ï¼Œ GUI ç³»ç»Ÿéœ€è¦ä¸€å¥—æœºåˆ¶æ¥åº”å¯¹è¿™ç§æƒ…å†µï¼Œä½¿å¾— UI å±‚ä¸Žå…·ä½“çš„ä¸šåŠ¡é€»è¾‘è§£è€¦ï¼Œè§‚å¯Ÿè€…æ¨¡å¼æ­¤æ—¶å°±æ´¾ä¸Šç”¨åœºäº†ã€‚ å®šä¹‰å®šä¹‰å¯¹è±¡é—´ä¸€ç§ 1 å¯¹ N çš„å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œåˆ™æ‰€æœ‰ä¾èµ–äºŽå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚ ä½¿ç”¨åœºæ™¯ å…³è”è¡Œä¸ºåœºæ™¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…³è”è¡Œä¸ºæ˜¯å¯æ‹†åˆ†çš„ï¼Œè€Œä¸æ˜¯ â€œç»„åˆâ€ å…³ç³»ã€‚ äº‹ä»¶å¤šçº§è§¦å‘åœºæ™¯ã€‚ è·¨ç³»ç»Ÿçš„æ¶ˆæ¯äº¤æ¢åœºæ™¯ï¼Œå¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶æ€»çº¿çš„æ¶ˆæ¯æœºåˆ¶ã€‚ UML ç±»å›¾ Subject : æŠ½è±¡ä¸»é¢˜ï¼Œä¹Ÿå°±æ˜¯è¢«è§‚å¯Ÿè€…çš„è§’è‰²ï¼ŒæŠ½è±¡ä¸»é¢˜è§’è‰²æŠŠæ‰€æœ‰è§‚å¯Ÿè€… å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åœ¨ä¸€ä¸ªé›†åˆé‡Œï¼Œæ¯ä¸ªä¸»é¢˜éƒ½å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„è§‚å¯Ÿè€…ï¼ŒæŠ½è±¡ä¸»é¢˜æä¾›ä¸€ä¸ªæŽ¥å£ï¼Œå¯ä»¥å¢žåŠ å’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡ã€‚ ConcreteSubject: å…·ä½“ä¸»é¢˜ï¼Œè¯¥è§’è‰²å°†æœ‰å…³çŠ¶æ€å­˜å…¥å…·ä½“è§‚å¯Ÿè€…å¯¹è±¡ï¼Œåœ¨å…·ä½“ä¸»é¢˜çš„å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œç»™æ‰€æœ‰æ³¨å†Œè¿‡çš„è§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ï¼Œå…·ä½“ä¸»é¢˜è§’è‰²åˆå«åšå…·ä½“è¢«è§‚å¯Ÿè€…è§’è‰²ã€‚ Observer: æŠ½è±¡è§‚å¯Ÿè€…ï¼Œè¯¥è§’è‰²å®žçŽ°æŠ½è±¡è§‚å¯Ÿè€…è§’è‰²æ‰€å®šä¹‰çš„æ›´æ–°æŽ¥å£ï¼Œä»¥ä¾¿åœ¨ä¸»é¢˜çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°è‡ªèº«çš„çŠ¶æ€ã€‚ å®žæˆ˜éœ€æ±‚ï¼šè®¢é˜…æŸç½‘ç«™æŠ€æœ¯æ–‡ç« ï¼Œæœ‰æ›´æ–°å°±æŽ¨é€ã€‚ å®šä¹‰ä¸€ä¸ªè§‚å¯Ÿè€…å¯¹è±¡ - ç”¨æˆ· 1234567891011121314151617181920212223242526public class Coder implements Observer &#123; private String name; public Coder(String name) &#123; this.name = name; &#125; /** * æœ‰æ›´æ–°å°†æ‰§è¡Œ * @param o * @param arg */ @Override public void update(Observable o, Object arg) &#123; System.out.println("o = [" + o + "], arg = [" + name + " " + (String) arg + "]"); &#125; @Override public String toString() &#123; return "Coder&#123;" + "name='" + name + '\'' + '&#125;'; &#125;&#125; å®šä¹‰è¢«è§‚å¯Ÿè€…å¯¹è±¡ - æŠ€æœ¯ç½‘ç«™ 123456789101112public class JueJ extends Observable &#123; /** * æŽ¨é€ * @param content */ public void post(String content)&#123; //æ ‡è¯†çŠ¶æ€æˆ–è€…å†…å®¹éœ€è¦å‘ç”Ÿæ”¹å˜ setChanged(); //é€šçŸ¥æ‰€æœ‰è®¢é˜…è€… notifyObservers(content); &#125;&#125; æµ‹è¯•ï¼š 123456789101112131415161718@Testpublic void testObserver()&#123; //åˆ›å»ºè¢«è§‚å¯Ÿè€…--ã€‹æŠ€æœ¯ç½‘ç«™ JueJ jueJ = new JueJ(); //åˆ›å»ºè§‚å¯Ÿè€… Coder coderA = new Coder("A"); Coder coderB = new Coder("B"); Coder coderC = new Coder("C"); //äº§ç”Ÿè®¢é˜…å…³ç³»ï¼ŒåŠ å…¥è¢«è§‚å¯Ÿè€…åˆ—è¡¨ä¸­ï¼Œæœ‰æ›´æ–°å°±æŽ¨é€ç»™å®ƒä»¬ jueJ.addObserver(coderA); jueJ.addObserver(coderB); jueJ.addObserver(coderC); //æœ‰æ›´æ–°äº†ï¼Œé€šçŸ¥è§‚å¯Ÿè€…ä»¬ jueJ.post("Dev_YK: æ›´æ–°äº†ä¸€ç¯‡è®¾è®¡æ¨¡å¼æ–‡ç« ï¼Œç‚¹å‡»è¿›è¡ŒæŸ¥çœ‹ã€‚" );&#125; Output: 123o = [com.devyk.android_dp_code.observer.JueJ@48533e64], arg = [C Dev_YK: æ›´æ–°äº†ä¸€ç¯‡è®¾è®¡æ¨¡å¼æ–‡ç« ï¼Œç‚¹å‡»è¿›è¡ŒæŸ¥çœ‹ã€‚]o = [com.devyk.android_dp_code.observer.JueJ@48533e64], arg = [B Dev_YK: æ›´æ–°äº†ä¸€ç¯‡è®¾è®¡æ¨¡å¼æ–‡ç« ï¼Œç‚¹å‡»è¿›è¡ŒæŸ¥çœ‹ã€‚]o = [com.devyk.android_dp_code.observer.JueJ@48533e64], arg = [A Dev_YK: æ›´æ–°äº†ä¸€ç¯‡è®¾è®¡æ¨¡å¼æ–‡ç« ï¼Œç‚¹å‡»è¿›è¡ŒæŸ¥çœ‹ã€‚] å¯ä»¥çœ‹åˆ°æ‰€æœ‰è®¢é˜…äº†æŸæŠ€æœ¯ç½‘ç«™çš„ç”¨æˆ·éƒ½æ”¶åˆ°äº†é€šçŸ¥æ›´æ–°ï¼Œä¸€å¯¹å¤šçš„è®¢é˜…-å‘å¸ƒç³»ç»Ÿå°±å®Œæˆäº†ã€‚ æ€»ç»“è§‚å¯Ÿè€…æ¨¡å¼ä¸»è¦çš„ä½œç”¨å°±æ˜¯è§£è€¦ï¼Œå°†è§‚å¯Ÿè€…ä¸Žè¢«è§‚å¯Ÿè€…å®Œå…¨éš”ç¦»ï¼Œåªä¾èµ–äºŽ Observe å’Œ Observable æŠ½è±¡ã€‚ ä¼˜ç‚¹ï¼š è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆï¼Œåº”å¯¹ä¸šåŠ¡å˜åŒ–ã€‚ å¢žå¼ºç³»ç»Ÿçµæ´»æ€§ï¼Œå¯æ‰©å±•æ€§ã€‚ ç¼ºç‚¹ï¼š åœ¨åº”ç”¨è§‚å¯Ÿè€…æ¨¡å¼æ—¶éœ€è¦è€ƒè™‘ä¸€ä¸‹å¼€å‘æ•ˆçŽ‡å’Œè¿è¡Œæ•ˆçŽ‡é—®é¢˜ï¼Œç¨‹åºä¸­åŒ…æ‹¬ä¸€ä¸ªè¢«è§‚å¯Ÿè€…ã€å¤šä¸ªè§‚å¯Ÿè€…ã€å¼€å‘å’Œè°ƒè¯•ç­‰å†…å®¹ä¼šæ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”åœ¨ Java ä¸­æ¶ˆæ¯çš„é€šçŸ¥é»˜è®¤æ˜¯é¡ºåºæ‰§è¡Œï¼Œä¸€ä¸ªè§‚å¯Ÿè€…å¡é¡¿ï¼Œä¼šå½±å“æ•´ä½“çš„æ‰§è¡Œæ•ˆçŽ‡ï¼Œåœ¨è¿™ä¸ªæƒ…å†µä¸‹ï¼Œä¸€èˆ¬è€ƒè™‘ä½¿ç”¨å¼‚æ­¥æ–¹å¼ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>è§‚å¯Ÿè€…æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼å…«ä¹‹è´£ä»»é“¾æ¨¡å¼]]></title>
    <url>%2Fposts%2F61fa11d3.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ è´£ä»»é“¾æ¨¡å¼ ä»‹ç»è´£ä»»é“¾æ¨¡å¼ (Iterator Pattern) ,å±žäºŽè¡Œä¸ºåž‹è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚ä»€ä¹ˆæ˜¯ â€œé“¾â€ ï¼Ÿæˆ‘ä»¬å°†å¤šä¸ªèŠ‚ç‚¹é¦–å°¾ç›¸è¿žæ‰€æž„æˆçš„æ¨¡åž‹ç§°ä¸ºé“¾ ã€‚å°±å¥½æ¯”ç”Ÿæ´»ä¸­ä¸€ä¸ªä¸ªé“åœ†çŽ¯ä¸€ä¸ªè¿žè¿™ä¸€ä¸ªçŽ¯çŽ¯ç›¸æ‰£ä¸€æ ·ã€‚ å®šä¹‰ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»Žè€Œé¿å…äº†è¯·æ±‚çš„å‘é€è€…å’ŒæŽ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚å°†è¿™äº›å¯¹è±¡è¿žæˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°å¤„ç†ä¸ºæ­¢ã€‚ ä½¿ç”¨åœºæ™¯ å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œä½†æ˜¯å…·ä½“ç”±å“ªä¸ªå¯¹è±¡å¤„ç†åˆ™åœ¨è¿è¡Œæ—¶åŠ¨æ€å†³å®šã€‚ åœ¨è¯·æ±‚å¤„ç†è€…ä¸æ˜Žç¡®çš„æƒ…å†µä¸‹å‘å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæäº¤ä¸€ä¸ªè¯·æ±‚ã€‚ éœ€è¦åŠ¨æ€æŒ‡å®šä¸€ç»„å¯¹è±¡å¤„ç†è¯·æ±‚ã€‚ UML ç±»å›¾ Handler : æŠ½è±¡å¤„ç†è€…è§’è‰²ï¼Œå£°æ˜Žä¸€ä¸ªè¯·æ±‚å¤„ç†çš„æ–¹æ³•ï¼Œå¹¶åœ¨å…¶ä¸­ä¿æŒä¸€ä¸ªå¯¹ä¸‹ä¸€ä¸ªå¤„ç†èŠ‚ç‚¹ Handler çš„å¼•ç”¨ã€‚ ConcreteHandler: å…·ä½“å¤„ç†è§’è‰²ï¼Œå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œå¦‚æžœä¸èƒ½å¤„ç†åˆ™å°†è¯¥è¯·æ±‚è½¬å‘ç»™ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ å®žæˆ˜ç®€å•ç¤ºä¾‹1ï¼š å®šä¹‰æŠ½è±¡å¤„ç†è€…: 12345678910111213141516171819202122232425262728293031323334353637public abstract class Handler &#123; private String TAG = getClass().getSimpleName(); /** * ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥è´Ÿè´£å¤„ç† */ public Handler nextHandler; /** * å¼€å§‹å¤„ç†è¯·æ±‚ */ public final void handlerRequest(HandlerRequest handlerRequest)&#123; if (getHandlerRequestLevel() == handlerRequest.getRequestLevel())&#123; handler(handlerRequest); &#125;else &#123; if (nextHandler != null) &#123; nextHandler.handlerRequest(handlerRequest); &#125;else &#123; Log.i(TAG,"å½“å‰äº‹ä»¶"+handlerRequest.getRequestLevel() + "éƒ½ä¸å¤„ç†"); &#125; &#125; &#125; /** * å…·ä½“å¤„ç†æ–¹å¼ * @param handlerRequest */ protected abstract void handler(HandlerRequest handlerRequest); /** * èŽ·å–å¤„ç†å¯¹è±¡çš„å¤„ç†çº§åˆ« * @return */ protected abstract int getHandlerRequestLevel();&#125; å®šä¹‰æŠ½è±¡è¯·æ±‚è€…ï¼š 1234567891011121314151617181920212223public abstract class HandlerRequest &#123; /** * å¤„ç†å¯¹è±¡ */ private Object obj; public HandlerRequest(Object obj) &#123; this.obj = obj; &#125; /** * èŽ·å–å¤„ç†å¯¹è±¡å†…å®¹ */ public Object getContent()&#123; return obj; &#125; /** * èŽ·å–è¯·æ±‚çº§åˆ« */ public abstract int getRequestLevel();&#125; å®šä¹‰å…·ä½“å¤„ç†è€…ï¼š 123456789101112131415public class HandlerA extends Handler &#123; private String TAG = getClass().getSimpleName(); @Override protected void handler(HandlerRequest handlerRequest) &#123; System.out.println("handlerRequest = [" +TAG + " " + (String) handlerRequest.getContent() + "]"); &#125; @Override protected int getHandlerRequestLevel() &#123; return 1; &#125;&#125; 1234567891011121314public class HandlerB extends Handler &#123; private String TAG = getClass().getSimpleName(); @Override protected void handler(HandlerRequest handlerRequest) &#123; System.out.println("handlerRequest = [" + TAG + " " +(String) handlerRequest.getContent() + "]"); &#125; @Override protected int getHandlerRequestLevel() &#123; return 2; &#125;&#125; å®šä¹‰å…·ä½“è¯·æ±‚è€…ï¼š 12345678910public class RequestA extends HandlerRequest &#123; public RequestA(Object obj) &#123; super(obj); &#125; @Override public int getRequestLevel() &#123; return 1; &#125;&#125; 12345678910public class RequestB extends HandlerRequest &#123; public RequestB(Object obj) super(obj); &#125; @Override public int getRequestLevel() &#123; return 2; &#125;&#125; å®šä¹‰ Client æµ‹è¯•ï¼š 123456789101112131415161718192021/** * å®¢æˆ·å¤„ç† */@Testpublic void testIterator() &#123; //æž„é€ å¤„ç†å¯¹è±¡ Handler handlerA = new HandlerA(); Handler handlerB = new HandlerB(); //äº¤ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å¤„ç† handlerA.nextHandler = handlerB; //æž„é€ è¯·æ±‚å¯¹è±¡ HandlerRequest handlerRequestA = new RequestA("A"); HandlerRequest handlerRequestB = new RequestB("B"); //å‘èµ·è¯·æ±‚ handlerA.handlerRequest(handlerRequestA); handlerA.handlerRequest(handlerRequestB);&#125; Output: 12handlerRequest = [HandlerA A]handlerRequest = [HandlerB B] ä»Žæµ‹è¯•ä»£ç å¯ä»¥çœ‹åˆ° ï¼Œæˆ‘ä»¬çš„ handlerA çš„ä¸‹ä¸€ä¸ªè¯·æ±‚äº¤ç»™äº† handlerBï¼Œé‚£ä¹ˆåœ¨å‘èµ·è¯·æ±‚çš„æ—¶å€™å†…éƒ¨å°±ä¼šåˆ¤æ–­ï¼Œå¦‚æžœå½“å‰å‘èµ·è¯·æ±‚çš„çº§åˆ«è·Ÿå¤„ç†äº‹ä»¶çš„çº§åˆ«ä¸ç¬¦åˆçš„è¯ ï¼Œå°±äº¤ç»™ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ¥åˆ¤æ–­ï¼Œå¦‚æžœéƒ½æ²¡æœ‰æ‰¾åˆ°å°±æŠ¥ç©ºã€‚ å®žæˆ˜ç¤ºä¾‹2ï¼š åœ¨ Android ä¸­æˆ‘ä»¬çŸ¥é“ Broadcast å¯ä»¥åˆ†ä¸º 2 ç§ï¼Œä¸€ç§æ˜¯æ™®é€šå¹¿æ’­ï¼Œä¸€ç§æ˜¯æœ‰åºå¹¿æ’­ï¼Œæ™®é€šå¹¿æ’­æ˜¯å¼‚æ­¥çš„ï¼Œå‘å‡ºæ—¶å¯ä»¥è¢«æ‰€æœ‰çš„æŽ¥æ”¶è€…æ”¶åˆ°ï¼›è€Œæœ‰åºå¹¿æ’­åˆ™æ˜¯æ ¹æ®ä¼˜å…ˆçº§ä¾æ¬¡ä¼ æ’­çš„ï¼Œç›´åˆ°æŽ¥æ”¶è€…å°†å…¶å¤„ç†ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—æœ‰åºå¹¿æ’­è·Ÿæˆ‘ä»¬çš„è´£ä»»é“¾æ¨¡å¼å¾ˆç›¸ä¼¼ï¼Œé€šè¿‡å¹¿æ’­ä¹Ÿèƒ½è¾¾åˆ°å®žçŽ°è´£ä»»é“¾äº‹ä»¶çš„å¤„ç†ï¼Œä¸‹é¢å…ˆçœ‹ä»£ç ï¼š å…ˆåŠ¨æ€æ³¨å†Œ 3 ä¸ªå¹¿æ’­ 12345678910111213141516private void registerOrderBroadcast() &#123; IntentFilter filter = new IntentFilter(); filter.addAction("com.it.dp_order"); filter.setPriority(1000); IntentFilter filterB = new IntentFilter(); filterB.addAction("com.it.dp_order"); filterB.setPriority(500); registerReceiver(new ReceiverB(),filterB); IntentFilter filterC = new IntentFilter(); filterC.addAction("com.it.dp_order"); filterC.setPriority(100); registerReceiver(new ReceiverC(),filterC); registerReceiver(new ReceiverA(),filter);&#125; 12345678910111213141516171819202122232425public class ReceiverA extends BroadcastReceiver &#123; @Override public void onReceive(Context context, Intent intent) &#123; if (intent == null) &#123; return; &#125; int limit = intent.getIntExtra("limit", -1); if (limit == 100) &#123; if (intent.getStringExtra("MEG") != null) &#123; Log.i("ReceiverA","æˆ‘å¤„ç†äº†"); Toast.makeText(context,intent.getStringExtra("MEG"),Toast.LENGTH_SHORT).show(); &#125; //å¤„ç†äº‹ä»¶ï¼Œç»ˆæ­¢å¹¿æ’­ abortBroadcast(); &#125; else &#123; Log.i("ReceiverA","æˆ‘ä¸å¤„ç†ï¼Œåˆ†å‘ä¸‹åŽ»"); //æ·»åŠ ä¿¡æ¯ï¼Œç»§ç»­åˆ†å‘ï¼Œç›´åˆ°ä»»åŠ¡å¤„ç† Bundle bundle = new Bundle(); bundle.putInt("limit",1000); bundle.putString("MEG","ä¸­åˆå•¦ï¼Œè¯¥åƒé¥­äº†ï¼"); setResultExtras(bundle); &#125; &#125;&#125; â€¦å…¶å®ƒ 2 ä¸ªå¹¿æ’­çœç•¥ å†…éƒ¨ä»£ç åªæœ‰ limit == ? ä¸ä¸€æ · å‘é€ä¸€ä¸ªæœ‰åºå¹¿æ’­ï¼š 12345678public void order(View view) &#123; Intent intent = new Intent(); intent.setAction("com.it.dp_order"); intent.putExtra("limit",1000); intent.putExtra("MEG","ä¸­åˆäº†ï¼Œè¯¥åƒé¥­äº†"); sendOrderedBroadcast(intent,null);&#125; Output: 1232019-09-08 13:40:41.551 28992-28992/com.devyk.android_dp_code I/ReceiverA: æˆ‘ä¸å¤„ç†ï¼Œåˆ†å‘ä¸‹åŽ»2019-09-08 13:40:41.557 28992-28992/com.devyk.android_dp_code I/ReceiverB: æˆ‘ä¸å¤„ç†ï¼Œåˆ†å‘ä¸‹åŽ»2019-09-08 13:40:41.574 28992-28992/com.devyk.android_dp_code I/ReceiverC: æˆ‘å¤„ç†äº† è¿™é‡Œæˆ‘ä»¬åŠ¨æ€æ³¨å†Œäº† 3 ä¸ªå¹¿æ’­ï¼Œä¼˜å…ˆçº§è¶Šé«˜è¶Šå…ˆæ”¶åˆ° Aï¼ŒB éƒ½ä¸ç¬¦åˆè¦æ±‚ï¼Œæ‰€ä»¥ä¸‹å‘ä¸‹åŽ»ï¼Œæœ€åŽåœ¨ C æŽ¥æ”¶è€…é‡Œé¢å¤„ç†ã€‚ æ€»ç»“ä¼˜ç‚¹ï¼š å¯ä»¥å¯¹è¯·æ±‚è€…å’Œå¤„ç†è€…å…³ç³»è§£è€¦ï¼Œæé«˜ä»£ç çµæ´»æ€§ã€‚ ç¼ºç‚¹ï¼š å¯¹é“¾ä¸­è¯·æ±‚å¤„ç†è€…çš„éåŽ†ï¼Œå¦‚æžœå¤„ç†è€…å¤ªå¤šï¼Œé‚£ä¹ˆéåŽ†ä¼šå½±å“ä¸€å®šçš„æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›é€’å½’è°ƒç”¨ä¸­ï¼Œè¦æ…Žç”¨ã€‚ ä½†æ€»ä½“æ¥è¯´ï¼Œä¼˜ç‚¹æ˜¯å¤§äºŽç¼ºç‚¹çš„ï¼Œç¼ºç‚¹ç›¸å¯¹äºŽä¼˜ç‚¹æ¥è¯´è¿˜æ˜¯å¯æŽ§çš„ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>è´£ä»»é“¾æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¸ƒä¹‹çŠ¶æ€æ¨¡å¼]]></title>
    <url>%2Fposts%2F1942adf8.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ çŠ¶æ€æ¨¡å¼ ä»‹ç»çŠ¶æ€æ¨¡å¼ä¸­çš„è¡Œä¸ºæ˜¯ç”±çŠ¶æ€æ¥å†³å®šçš„ï¼Œä¸åŒçš„çŠ¶æ€ä¸‹æœ‰ä¸åŒçš„è¡Œä¸ºã€‚çŠ¶æ€æ¨¡å¼å’Œç­–ç•¥æ¨¡å¼çš„ç»“æž„å‡ ä¹Žå®Œå…¨ä¸€æ ·ï¼Œä½†å®ƒä»¬çš„ç›®çš„ã€æœ¬è´¨å´å®Œå…¨ä¸ä¸€æ ·ã€‚çŠ¶æ€æ¨¡å¼çš„è¡Œä¸ºæ˜¯å¹³è¡Œçš„ã€ä¸å¯æ›¿æ¢çš„ï¼Œç­–ç•¥æ¨¡å¼çš„è¡Œä¸ºæ˜¯å½¼æ­¤ç‹¬ç«‹ã€å¯ç›¸äº’æ›¿æ¢çš„ã€‚ç”¨ä¸€å¥è¯æ¥è¡¨è¿°ï¼ŒçŠ¶æ€æ¨¡å¼æŠŠå¯¹è±¡çš„è¡Œä¸ºåŒ…è£…åœ¨ä¸åŒçš„çŠ¶æ€å¯¹è±¡é‡Œï¼Œæ¯ä¸€ä¸ªçŠ¶æ€å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå…±åŒæŠ½è±¡çŠ¶æ€çš„åŸºç±»ã€‚çŠ¶æ€æ¨¡å¼çš„æ„å›¾æ˜¯è®©ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨æ”¹å˜çš„æ—¶å€™ï¼Œå…¶è¡Œä¸ºä¹Ÿéšä¹‹æ”¹å˜ã€‚ å®šä¹‰å½“ä¸€ä¸ªå¯¹è±¡çš„å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶å…è®¸æ”¹å˜å…¶è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥åƒæ˜¯æ”¹å˜äº†å…¶ç±»ã€‚ ä½¿ç”¨åœºæ™¯ ä¸€ä¸ªå¯¹è±¡çš„è¡Œä¸ºå–å†³äºŽå®ƒçš„çŠ¶æ€ï¼Œå¹¶ä¸”å®ƒå¿…é¡»åœ¨è¿è¡Œæ—¶æ ¹æ®çŠ¶æ€æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚ ä»£ç ä¸­åŒ…å«å¤§é‡ä¸Žå¯¹è±¡çŠ¶æ€æœ‰å…³çš„æ¡ä»¶è¯­å¥ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ªæ“ä½œä¸­å«æœ‰åºžå¤§çš„åˆ†æ”¯è¯­å¥ (if-else / switch-case) , ä¸”è¿™äº›åˆ†æ”¯ä¾èµ–äºŽè¯¥å¯¹è±¡çš„çŠ¶æ€ã€‚ çŠ¶æ€æ¨¡å¼å°†æ¯ä¸€ä¸ªæ¡ä»¶åˆ†æ”¯æ”¾å…¥ä¸€ä¸ªç‹¬ç«‹çš„ç±»ä¸­ï¼Œè¿™ä½¿å¾—ä½ å¯ä»¥æ ¹æ®å¯¹è±¡è‡ªèº«çš„çŠ¶æ€ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸€å¯¹è±¡å¯ä»¥ä¸ä¾èµ–äºŽå…¶ä»–å¯¹è±¡è€Œç‹¬ç«‹å˜åŒ–ï¼Œè¿™æ ·é€šè¿‡å¤šæ€æ¥åŽ»é™¤è¿‡å¤šçš„ã€é‡å¤çš„ if - else ç­‰åˆ†æ”¯è¯­å¥ã€‚ UML ç±»å›¾ Context: çŽ¯å¢ƒç±»ï¼Œå®šä¹‰å®¢æˆ·æ„Ÿå…´è¶£çš„æŽ¥å£ï¼Œç»´æŠ¤ä¸€ä¸ª State å­ç±»çš„å®žä¾‹ï¼Œè¿™ä¸ªå®žä¾‹å®šä¹‰äº†å¯¹è±¡çš„å½“å‰çŠ¶æ€ã€‚ State: æŠ½è±¡çŠ¶æ€ç±»æˆ–è€…çŠ¶æ€æŽ¥å£ï¼Œå®šä¹‰ä¸€ä¸ªæˆ–è€…ä¸€ç»„æŽ¥å£ï¼Œè¡¨ç¤ºè¯¥çŠ¶æ€ä¸‹çš„è¡Œä¸ºã€‚ ConcreteStateAã€ConcreteStateB: å…·ä½“çŠ¶æ€ç±»ï¼Œæ¯ä¸€ä¸ªå…·ä½“çš„çŠ¶æ€ç±»å®žçŽ°æŠ½è±¡ State ä¸­å®šä¹‰çš„æŽ¥å£ï¼Œä»Žè€Œè¾¾åˆ°ä¸åŒçŠ¶æ€ä¸‹çš„ä¸åŒè¡Œä¸ºã€‚ å®žæˆ˜åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°çŠ¶æ€æ¨¡å¼æœ€å¸¸è§çš„åœ°æ–¹åº”è¯¥æ˜¯ç”¨æˆ·ç™»å½•ç³»ç»Ÿã€‚åœ¨ç”¨æˆ·ç™»å½•å’Œæœªç™»å½•çš„æƒ…å†µä¸‹ï¼Œå¯¹äºŽåŒä¸€äº‹ä»¶çš„å¤„ç†è¡Œä¸ºæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¾‹å¦‚ï¼Œåœ¨æ·˜å®ä¸­ï¼Œç”¨æˆ·åœ¨æœªç™»å½•çš„æƒ…å†µä¸‹ç‚¹å‡»è´­ä¹°ï¼Œæ­¤æ—¶ä¼šå…ˆè®©ç”¨æˆ·ç™»å½•ï¼Œç„¶åŽåœ¨åšè´­ä¹°æ”¯ä»˜çš„æ“ä½œã€‚ ä¸‹é¢æˆ‘ä»¬å°±ç”¨çŠ¶æ€æ¨¡å¼æ¥ç®€å•å®žçŽ°è¿™ä¸ªè¿‡ç¨‹ï¼Œé¦–å…ˆåˆ›å»º 2 ä¸ª Activity , ä¸€ä¸ªæ˜¯ LoginActivity, ä¸€ä¸ªæ˜¯ HomeActivity , HomeActivity æ˜¯åº”ç”¨å…¥å£ï¼Œæœ‰è´­ä¹°å’Œæ³¨é”€ç”¨æˆ·åŠŸèƒ½ã€‚ 12345678910111213141516//æŠ½å–å…¬å…±çš„çŠ¶æ€ç±»public interface IUserState &#123; /** * è´­ç‰© * @param id */ void Shopping(Context context,int id); /** * æ³¨é”€ * @param context * @param token */ void loginOut(Context context,String token);&#125; 1234567891011121314151617//å…·ä½“ç™»å½•çŠ¶æ€å®žçŽ°ç±»public class LoginState implements IUserState &#123; private String TAG = getClass().getSimpleName(); @Override public void Shopping(Context context,int id) &#123; Log.i(TAG, "è´­ä¹°å•†å“-ã€‹" + id + " å³å°†æ”¯ä»˜"); Toast.makeText(context,"è´­ä¹°å•†å“-ã€‹" + id + " å³å°†æ”¯ä»˜",Toast.LENGTH_LONG).show(); &#125; @Override public void loginOut(Context context,String token) &#123; Log.i(TAG, "é€€å‡ºç³»ç»ŸæˆåŠŸ"); LoginContext.getInstance().setState(new LoginOutState()); Toast.makeText(context,"é€€å‡ºç³»ç»ŸæˆåŠŸ",Toast.LENGTH_LONG).show(); &#125;&#125; 123456789101112131415161718192021222324//å…·ä½“æœªç™»å½•çŠ¶æ€å®žçŽ°ç±»public class LoginOutState implements IUserState &#123; private String TAG = getClass().getSimpleName(); @Override public void Shopping(Context context, int id) &#123; gotoLogin(context); &#125; private void gotoLogin(Context context) &#123; Intent intent = new Intent(context, LoginActivity.class); intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); context.startActivity(intent); &#125; @Override public void loginOut(Context context, String token) &#123; Log.i(TAG, "å·²ç»æ˜¯é€€å‡ºçŠ¶æ€"); &#125;&#125; Context ç™»å½•çŠ¶æ€ç®¡ç†ç±»: 123456789101112131415161718192021222324252627282930313233343536public class LoginContext &#123; /** * ç”¨æˆ·çŠ¶æ€ é»˜è®¤æœªç™»å½• */ private IUserState mIuserState = new LoginOutState(); private LoginContext() &#123; &#125; public void shopping(Context context,int id) &#123; mIuserState.Shopping(context,id); &#125; public void loginOut(Context context)&#123; mIuserState.loginOut(context); &#125; /** * é™æ€å†…éƒ¨ç±»å•ä¾‹ */ private static class LoginHolder &#123; private static LoginContext loginContext = new LoginContext(); &#125; public static LoginContext getInstance() &#123; return LoginHolder.loginContext; &#125; /** * æ³¨å…¥ç”¨æˆ·çš„çŠ¶æ€ * @param userState */ public void setState(IUserState userState)&#123; this.mIuserState = userState; &#125;&#125; UI æ“ä½œ 12345678910111213141516171819202122232425public class LoginActivity extends Activity &#123; private EditText mUser; private EditText mPwd; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_login); mUser = findViewById(R.id.etUser); mPwd = findViewById(R.id.etPwd); &#125; public void login(View view) &#123; if (mUser.getText().toString().trim().equals("123456") &amp;&amp; mPwd.getText().toString().trim().equals("123456")) &#123; LoginContext.getInstance().setState(new LoginState()); Toast.makeText(getApplicationContext(), "ç™»å½•æˆåŠŸ", Toast.LENGTH_LONG).show(); startActivity(new Intent(this, HomeActivity.class)); finish(); &#125; &#125;&#125; 1234567891011121314151617public class HomeActivity extends Activity &#123; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_home); &#125; public void logout(View view) &#123; LoginContext.getInstance().setState(new LogoutState()); &#125; public void shopping(View view) &#123; LoginContext.getInstance().shopping(getApplicationContext(),199); &#125;&#125; ç”¨æˆ·é»˜è®¤æ˜¯æœªç™»å½•çŠ¶æ€ï¼Œæ­¤æ—¶ç”¨æˆ·åœ¨ HomeActivity ç•Œé¢ç‚¹å‡»è´­ç‰©æ—¶ï¼Œä¼šå…ˆè·³è½¬åˆ° LoginActivity é¡µé¢ï¼Œç„¶åŽç™»å½•æˆåŠŸä¹‹åŽåœ¨è¿”å›žåˆ° HomeActivity é¡µé¢ï¼Œæ­¤æ—¶ï¼Œç”¨æˆ·å†æ¬¡ç‚¹å‡»è´­ç‰©å°±å¯ä»¥å®žçŽ°è¯¥åŠŸèƒ½äº†ã€‚ æ€»ç»“çŠ¶æ€æ¨¡å¼çš„å…³é”®ç‚¹åœ¨äºŽä¸åŒçš„çŠ¶æ€ä¸‹å¯¹äºŽåŒä¸€è¡Œä¸ºæœ‰ä¸åŒçš„å“åº”ï¼Œè¿™å…¶å®žå°±æ˜¯ä¸€ä¸ªå°† if~else ç”¨å¤šæ€æ¥å®žçŽ°çš„ä¸€ä¸ªå…·ä½“ç¤ºä¾‹ï¼Œæ¨¡å¼çš„è¿ç”¨ä¸€å®šè¦è€ƒè™‘æ‰€å¤„çš„æƒ…æ™¯ä»¥åŠä½ è¦è§£å†³çš„é—®é¢˜ï¼Œåªæœ‰ç¬¦åˆç‰¹å®šçš„åœºæ™¯æ‰å»ºè®®ä½¿ç”¨å¯¹åº”çš„æ¨¡å¼ã€‚ ä¼˜ç‚¹ï¼š State æ¨¡å¼å°†æ‰€æœ‰ä¸Žä¸€ä¸ªç‰¹æ€§çš„çŠ¶æ€ç›¸å…³çš„è¡Œä¸ºéƒ½æ”¾å…¥ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ä¸­ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•æ¥ç»„ç»‡ä¸Žç‰¹å®šçŠ¶æ€ç›¸å…³çš„ä»£ç ï¼Œå°†ç¹ççš„çŠ¶æ€åˆ¤æ–­è½¬æ¢æˆç»“æž„æ¸…æ™°çš„çŠ¶æ€ç±»æ—ï¼Œåœ¨é¿å…ä»£ç è†¨èƒ€çš„åŒæ—¶ä¹Ÿä¿è¯äº†å¯æ‰©å±•æ€§ä¸Žå¯ç»´æŠ¤æ€§ã€‚ ç¼ºç‚¹ï¼š çŠ¶æ€æ¨¡å¼çš„ä½¿ç”¨å¿…ç„¶ä¼šå¢žåŠ ç³»ç»Ÿç±»å’Œå¯¹è±¡çš„ä¸ªæ•°ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>çŠ¶æ€æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼å…­ä¹‹ç­–ç•¥æ¨¡å¼]]></title>
    <url>%2Fposts%2F12c9315d.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ ç­–ç•¥æ¨¡å¼ ä»‹ç»åœ¨è½¯ä»¶å¼€å‘ä¸­å¸¸å¸¸é‡è§è¿™æ ·çš„é—®é¢˜ï¼šå®žçŽ°æŸä¸ªåŠŸèƒ½å¯ä»¥æœ‰å¤šç§ç®—æ³•æˆ–è€…ç­–ç•¥ï¼Œæˆ‘ä»¬æ ¹æ®å®žé™…æƒ…å†µé€‰æ‹©ä¸åŒçš„ç®—æ³•æˆ–è€…ç­–ç•¥æ¥å®Œæˆè¯¥åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼ŒæŽ’åºç®—æ³•ï¼Œå¯ä»¥æœ‰å¤šç§çš„å®žçŽ°æ–¹å¼ã€‚ é‚£ä¹ˆï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œåº”è¯¥æ€Žä¹ˆå¤„ç†ï¼Ÿæ˜¯å°†è¿™äº›ç®—æ³•å†™åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªå…·ä½“çš„æŽ’åºç®—æ³•ï¼›è¿˜æ˜¯å°†è¿™äº›æŽ’åºç®—æ³•å°è£…åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œé€šè¿‡ ifâ€¦else æˆ–è€… case ç­‰æ¡ä»¶åˆ¤æ–­è¯­å¥æ¥é€‰æ‹©å…·ä½“çš„ç®—æ³•ã€‚è¿™ 2 ç§å®žçŽ°æ–¹æ³•æˆ‘ä»¬éƒ½å¯ä»¥ç§°ä¹‹ä¸ºç¡¬ç¼–ç ã€‚å½“ç„¶ï¼Œè¿™æ ·æ˜¯å¯ä»¥å®žçŽ°éœ€æ±‚ï¼Œä½†æ˜¯ï¼Œå½“å¾ˆå¤šç®—æ³•åœ¨ä¸€ä¸ªç±»æ—¶ï¼Œè¿™ä¸ªç±»å°±ä¼šå˜å¾—å¾ˆè‡ƒè‚¿ï¼Œç»´æŠ¤æˆæœ¬å°±ä¼šå˜é«˜ï¼Œå¹¶ä¸”åœ¨ç»´æŠ¤æ—¶å®¹æ˜“å‘ç”Ÿé”™è¯¯ï¼Œå¦‚æžœæˆ‘ä»¬éœ€è¦æ–°å¢žæˆ–è€…ä¿®æ”¹ç®—æ³•ç±»çš„æºç ï¼Œè¿™ä¸ªå°±éœ€è¦åŠ¨å°è£…å¥½çš„ç±»ï¼Œé‚£ä¹ˆè¿™å°±è¿èƒŒäº†å•ä¸€èŒè´£å’Œå¼€é—­åŽŸåˆ™äº†ã€‚ å¦‚æžœå°†è¿™äº›ç®—æ³•æˆ–è€…ç­–ç•¥æŠ½è±¡å‡ºæ¥ï¼Œæä¾›ç»Ÿä¸€çš„æŽ¥å£ï¼Œä¸åŒçš„ç®—æ³•æˆ–è€…ç­–ç•¥æœ‰ä¸åŒçš„å®žçŽ°ç±»ï¼Œè¿™æ ·åœ¨ç¨‹åºå®¢æˆ·ç«¯å°±å¯ä»¥é€šè¿‡æ³¨å…¥ä¸åŒçš„å®žçŽ°å¯¹è±¡æ¥å®žçŽ°ç®—æ³•æˆ–è€…ç­–ç•¥çš„åŠ¨æ€æ›¿æ¢ï¼Œè¿™ç§æ¨¡å¼çš„å¯æ‰©å±•æ€§ï¼Œå¯ç»´æŠ¤æ€§ä¹Ÿå°±æ›´é«˜ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦å­¦ä¹ çš„ç­–ç•¥æ¨¡å¼ã€‚ å®šä¹‰ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œè€Œä¸”ä½¿ä»–ä»¬è¿˜å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºŽä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œç‹¬ç«‹å˜åŒ–ã€‚ ä½¿ç”¨åœºæ™¯ é’ˆå¯¹åŒä¸€ç±»åž‹é—®é¢˜çš„å¤šç§å¤„ç†æ–¹å¼ï¼Œä»…ä»…æ˜¯å…·ä½“è¡Œä¸ºæœ‰å·®åˆ«æ—¶ã€‚ éœ€è¦å®‰å…¨çš„å°è£…å¤šç§åŒä¸€ç±»åž‹æ“ä½œæ—¶ã€‚ å‡ºçŽ°åŒä¸€æŠ½è±¡ç±»æœ‰å¤šä¸ªå­ç±»ï¼Œè€Œåˆéœ€è¦ä½¿ç”¨ if-else æˆ–è€… switch-case æ¥é€‰æ‹©å…·ä½“å­ç±»æ—¶ã€‚ UML ç±»å›¾ Context ï¼šç”¨æ¥æ“ä½œç­–ç•¥çš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒ Stragety : ç­–ç•¥çš„æŠ½è±¡ ConcreteStragetyA, ConcreteStragetyB å…·ä½“ç­–ç•¥å®žçŽ°ã€‚ ç®€å•ç¤ºä¾‹éœ€æ±‚ï¼šå¯¹äº¤é€šå·¥å…·è®¡ç®—è½¦è´¹ï¼Œä¸€èˆ¬è½¿è½¦ï¼Œä¸­ç­‰è½¿è½¦ï¼Œè±ªåŽè½¿è½¦ã€‚ 12345678910111213 /* * è®¡ç®—è´¹ç”¨æŽ¥å£ * */public interface ICalculateStrategy &#123; /** * æŒ‰è·ç¦»è®¡ç®—è½¦è´¹ * @param km å…¬é‡Œæ•° * @return */ int calculatePrice(int km);&#125; å„ç§è½¦çš„è®¡ç®—æ–¹å¼ 12345678910111213//æ™®é€šè½¦public class GeneralCar implements ICalculateStrategy &#123; @Override public int calculatePrice(int km) &#123; if (km &gt; 0 &amp;&amp; km &lt;= 5) return 5; if (km &gt; 5 &amp;&amp; km &lt;= 7) return 7; if (km &gt; 7 &amp;&amp; km &lt;= 10) return 10; return 10; &#125;&#125; 12345678910111213//ä¸­çº§è½¦public class MediumCar implements ICalculateStrategy &#123; @Override public int calculatePrice(int km) &#123; if (km &gt; 0 &amp;&amp; km &lt;= 5) return 6; if (km &gt; 5 &amp;&amp; km &lt;= 7) return 9; if (km &gt; 7 &amp;&amp; km &lt;= 10) return 12; return 12; &#125;&#125; 12345678910111213//é«˜çº§è½¦public class LuxuryCar implements ICalculateStrategy &#123; @Override public int calculatePrice(int km) &#123; if (km &gt; 0 &amp;&amp; km &lt;= 5) return 8; if (km &gt; 5 &amp;&amp; km &lt;= 7) return 13; if (km &gt; 7 &amp;&amp; km &lt;= 10) return 15; return 13; &#125;&#125; æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªæ“ä½œ Context ç­–ç•¥çš„ç±» 123456789101112131415161718192021public class TransportationCalculator &#123; /** * äº¤é€šå·¥å…·è®¡ç®—è´¹ç”¨ç­–ç•¥ç±» */ private ICalculateStrategy iCalculateStrategy = new GeneralCar(); /** * è®¾ç½®ç­–ç•¥ * @param calculateStrategy */ public void setStrategy(ICalculateStrategy calculateStrategy) &#123; this. iCalculateStrategy = calculateStrategy; &#125; public int calcu(int km)&#123; return iCalculateStrategy.calculatePrice(km); &#125;&#125; æµ‹è¯•ï¼š 12345678910111213@Testpublic void test8()&#123; TransportationCalculator transportationCalculator = new TransportationCalculator(); System.out.println("æ™®é€šè½¦ 1 km RMB:" + transportationCalculator.calcu(5)); transportationCalculator.setStrategy(new MediumCar()); System.out.println("ä¸­çº§è½¦ 1 km RMB:" + transportationCalculator.calcu(5)); transportationCalculator.setStrategy(new LuxuryCar()); System.out.println("è±ªåŽè½¦ 1 km RMB:" + transportationCalculator.calcu(5)); &#125; Output: 123æ™®é€šè½¦ 1 km RMB:5ä¸­çº§è½¦ 1 km RMB:6è±ªåŽè½¦ 1 km RMB:8 æœ‰æ²¡æœ‰å‘çŽ°è¿™ç§å†™æ³•ä¸ä»…ç»“æž„å˜å¾—æ¸…æ™°ï¼Œè€Œä¸”è¿˜æ˜“ç»´æŠ¤ï¼Œæ‰©å±•æ€§ä¹Ÿå¾ˆå¼ºã€‚ æ€»ç»“ç­–ç•¥æ¨¡å¼ä¸»è¦ç”¨æ¥åˆ†ç¦»ç®—æ³•ï¼Œåœ¨ç›¸åŒçš„è¡Œä¸ºæŠ½è±¡ä¸‹æœ‰ä¸åŒçš„å…·ä½“å®žçŽ°ç­–ç•¥ã€‚åœ¨è¿™ä¸ªæ¨¡å¼å¾ˆå¥½åœ°æ¼”ç¤ºäº†å¼€é—­åŽŸåˆ™ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰æŽ¥å£æŠ½è±¡ï¼Œæ³¨å…¥ä¸åŒçš„å®žçŽ°ï¼Œä»Žè€Œè¾¾åˆ°å¾ˆå¥½çš„å¯æ‰©å±•æ€§ã€‚ ä¼˜ç‚¹ï¼š ç»“æž„æ¸…æ™°æ˜Žäº†ã€ä½¿ç”¨ç®€å•ç›´è§‚ï¼› è€¦åˆåº¦ç›¸å¯¹è€Œè¨€è¾ƒä½Žï¼Œæ‰©å±•æ–¹ä¾¿ï¼› æ“ä½œå°è£…ä¹Ÿæ›´ä¸ºå½»åº•ï¼Œæ•°æ®æ›´ä¸ºå®‰å…¨ï¼› ç¼ºç‚¹ï¼š éšç€ç­–ç•¥çš„å¢žåŠ ï¼Œå­ç±»ä¹Ÿä¼šå˜å¾—ç¹å¤š]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>ç­–ç•¥æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼äº”ä¹‹æŠ½è±¡å·¥åŽ‚æ¨¡å¼]]></title>
    <url>%2Fposts%2F1ef33906.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ æŠ½è±¡å·¥åŽ‚æ¨¡å¼ ä»‹ç»æŠ½è±¡å·¥åŽ‚æ¨¡å¼ (Abstract Factory Pattern) ä¹Ÿæ˜¯åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚ä¸Šä¸€ç¯‡è®²è§£äº† å·¥åŽ‚æ–¹æ³•æ¨¡å¼ ,é‚£ä¹ˆè¿™ä¸ªæŠ½è±¡å·¥åŽ‚åˆæ˜¯æ€Žä¹ˆä¸€å›žäº‹å‘¢ï¼Ÿå¤§å®¶è”æƒ³ä¸€ä¸‹åƒæ˜¯ç”Ÿæ´»ä¸­çš„å·¥åŽ‚è‚¯å®šéƒ½æ˜¯å…·ä½“çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå·¥åŽ‚éƒ½ä¼šç”Ÿäº§æŸä¸€ç§å…·ä½“çš„äº§å“ï¼Œé‚£ä¹ˆæŠ½è±¡å·¥åŽ‚æ„å‘³ç€ç”Ÿäº§å‡ºæ¥çš„äº§å“æ˜¯ä¸ç¡®å®šçš„ï¼Œé‚£è¿™å²‚ä¸æ˜¯å¾ˆå¥‡æ€ªï¼ŸæŠ½è±¡å·¥åŽ‚æ¨¡å¼èµ·æºäºŽä»¥å‰å¯¹ä¸åŒæ“ä½œç³»ç»Ÿçš„å›¾å½¢åŒ–è§£å†³æ–¹æ¡ˆï¼Œå¦‚ä¸åŒæ“ä½œç³»ç»Ÿä¸­çš„æŒ‰é’®å’Œæ–‡æœ¬æ¡†æŽ§ä»¶å…¶å®žçŽ°ä¸åŒï¼Œå±•ç¤ºæ•ˆæžœä¹Ÿä¸ä¸€æ ·ï¼Œå¯¹äºŽæ¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œå…¶æœ¬èº«å°±æž„æˆä¸€ä¸ªäº§å“ç±»ï¼Œè€ŒæŒ‰é’®ä¸Žæ–‡æœ¬æ¡†æŽ§ä»¶ä¹Ÿæž„æˆä¸€ä¸ªäº§å“ç±»ï¼Œä¸¤ç§äº§å“ç±»ä¸¤ç§å˜åŒ–ï¼Œå„è‡ªæœ‰è‡ªå·±çš„ç‰¹æ€§ï¼Œå¦‚ Android ä¸­çš„ Button å’Œ TextView ã€IOS ä¸­çš„ Button ã€å’Œ TextView ã€ Window Phone ä¸­çš„ Button å’Œ TextView ç­‰ã€‚ å®šä¹‰ä¸ºåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–è€…ç›¸äº’ä¾èµ–çš„å¯¹è±¡æä¾›ä¸€ä¸ªå€Ÿå£ï¼Œè€Œä¸éœ€è¦åˆ¶å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚ ä½¿ç”¨åœºæ™¯ä¸€ä¸ªå¯¹è±¡å¦‚æœ‰ç›¸åŒçš„çº¦æŸæ—¶å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥åŽ‚æ¨¡å¼ã€‚æ˜¯ä¸æ˜¯å¬èµ·æ¥å¾ˆæŠ½è±¡ ï¼Ÿ ä¸¾ä¸ªä¾‹å­ï¼ŒAndroid ã€IOS ã€Window Phone ä¸‹éƒ½æœ‰çŸ­ä¿¡è½¯ä»¶å’Œæ‹¨å·è½¯ä»¶ï¼Œä¸¤è€…éƒ½å±žäºŽè½¯ä»¶çš„èŒƒç•´ï¼Œä½†æ˜¯ï¼Œå®ƒä»¬æ‰€åœ¨çš„æ“ä½œç³»ç»Ÿå¹³å°ä¸ä¸€æ ·ï¼Œå³ä¾¿æ˜¯åŒä¸€å®¶å…¬å¸å‡ºå“çš„è½¯ä»¶ï¼Œå…¶ä»£ç å®žçŽ°é€»è¾‘ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œè¿™æ—¶å€™å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨æŠ½è±¡å·¥åŽ‚æ–¹æ³•æ¨¡å¼æ¥äº§ç”Ÿ Android ã€IOS ã€Window Phone ä¸‹çŸ­ä¿¡è½¯ä»¶å’Œæ‹¨å·è½¯ä»¶ã€‚ ç±»å›¾ AbstractFactory ï¼šæŠ½è±¡å·¥åŽ‚è§’è‰²ï¼Œå®ƒå£°æ˜Žäº†ä¸€ç»„ç”¨äºŽåˆ›å»ºä¸€ç§äº§å“çš„æ–¹æ³•ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ç§äº§å“ï¼Œå¦‚ä¸Šå›¾ä¸­çš„ AbstractFactory ä¸­å°±å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«åˆ›å»ºäº§å“ A å’Œäº§å“ B ã€‚ ConcreteFactory : å…·ä½“å·¥åŽ‚è§’è‰²ï¼Œå®ƒå®žçŽ°äº†åœ¨æŠ½è±¡å·¥åŽ‚ä¸­å®šä¹‰çš„åˆ›å»ºäº§å“çš„æ–¹æ³•ï¼Œç”Ÿæˆä¸€ç»„å…·ä½“äº§å“ï¼Œè¿™äº›äº§å“æž„æˆäº†ä¸€ä¸ªäº§å“ç§ç±»ï¼Œæ¯ä¸€ä¸ªäº§å“éƒ½ä½äºŽæŸä¸ªäº§å“ç­‰çº§ç»“æž„ä¸­ï¼Œå¦‚ä¸Šè¿°ç±»å›¾ä¸­çš„ ConcreteFactory1 ã€ConcreteFactory2ã€‚ AbstractProduct: æŠ½è±¡äº§å“è§’è‰²ï¼Œå®ƒä¸ºæ¯ç§äº§å“å£°æ˜ŽæŽ¥å£ï¼Œæ¯”å¦‚ä¸Šè¿°ç±»å›¾ä¸­çš„ AbstractProduct A, AbstractProduct Bã€‚ ConcreteProduct: å…·ä½“äº§å“è§’è‰²ï¼Œå®ƒå®šä¹‰å…·ä½“å·¥åŽ‚ç”Ÿäº§çš„å…·ä½“äº§å“å¯¹è±¡ï¼Œå®žçŽ°æŠ½è±¡äº§å“æŽ¥å£ä¸­å£°æ˜Žçš„ä¸šåŠ¡æ–¹æ³•ï¼Œå¦‚ä¸Šå›¾çš„ ConcreteProductA1 , ConcreteProductA2 , ConcreteProductB1 ,ConcreteProductB2. ä»£ç ç¤ºä¾‹å…¶å®žæˆ‘ä»¬å¹³æ—¶åœ¨å¼€å‘ä¸­åº”è¯¥å¾ˆå°‘ç”¨åˆ°æŠ½è±¡å·¥åŽ‚æ¨¡å¼ï¼Œä¸€ä¸ªå¾ˆé‡è¦çš„åŽŸå› æ˜¯ï¼Œå…¶ç›¸å¯¹äºŽå…¶ä»–ä¸¤ç§å·¥åŽ‚æ¨¡å¼æ¥è¯´ç•¥æ˜¾å¤æ‚ï¼Œå¯¹äºŽæ•´ä½“æž¶æž„è€Œè¨€ä¿®æ”¹è¾ƒå¤§ä¸”ä¸æ˜“æ–½å±•ã€‚ä¸€ä¸ªå¾ˆå…¸åž‹çš„ä¾‹å­é€‚ç”¨äºŽæ•°æ®åº“æ¨¡åž‹çš„æž„å»ºï¼Œä¸è¿‡å¯¹äºŽè¿™å—æ¥è®²ï¼Œå¤§å¤šè¯´è®¾è®¡æ¨¡å¼éƒ½èƒ½åº”ç”¨åˆ°å…¶ä¸­ï¼Œå¯¹äºŽ Android å¼€å‘è€…æ¥è¯´ï¼ŒæŠ½è±¡å·¥åŽ‚çš„ä¸€ä¸ªæ›´å¥½åœ°åº”ç”¨æ˜¯åœ¨ä¸»é¢˜ä¿®æ”¹ä¸Šï¼Œå‡å¦‚åœ¨é¡¹ç›®ä¸­éœ€è¦å¼•å…¥ä¸€å¥—ä¸»é¢˜åˆ‡æ¢çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆä½¿ç”¨æŠ½è±¡å·¥åŽ‚æ¥æž„å»ºä¸»é¢˜æ¡†æž¶å†é€‚åˆä¸è¿‡äº†ï¼Œä¸‹é¢å°±ä»¥ä¸€ä¸ªä»£ç ç¤ºä¾‹åœ¨è¯´æ˜Žå§ï¼š 12345678910111213141516171819/**æŠ½è±¡ä¸»é¢˜å·¥åŽ‚ç±»*/public abstract class AbstractThemeFactory &#123; protected Context mContext; public AbstractThemeFactory(Context mContext) &#123; this.mContext = mContext; &#125; /** * åˆ›å»ºä¸»é¢˜æŒ‰é’® */ public abstract ThemeButton createButton(); /** * åˆ›å»ºä¸»é¢˜æ ‡é¢˜æ  */ public abstract ThemeToolbar createToolbar();&#125; æŠ½è±¡ä¸»é¢˜å·¥åŽ‚ä¸­åªå®šä¹‰äº†åˆ›å»º UI å…ƒç´ çš„æŠ½è±¡æ–¹æ³•ï¼Œè€Œå…·ä½“å®žçŽ°åˆ™ç”±ä¸åŒçš„å­ç±»åŽ»å®Œæˆã€‚ 12345678910111213141516/**æš—è‰²ç³»ä¸»é¢˜å·¥åŽ‚*/public class DarkThemeFactory extends AbstractThemeFactory &#123; public DarkThemeFactory(Context mContext) &#123; super(mContext); &#125; @Override public ThemeButton createButton() &#123; return new ButtonDrak(mContext); &#125; @Override public ThemeToolbar createToolbar() &#123; return new ToolbarDrak(mContext); &#125;&#125; 12345678910111213141516/**äº®è‰²ç³»ä¸»é¢˜å·¥åŽ‚*/public class LightThemeFactory extends AbstractThemeFactory &#123; public LightThemeFactory(Context mContext) &#123; super(mContext); &#125; @Override public ThemeButton createButton() &#123; return new ButtonLight(mContext); &#125; @Override public ThemeToolbar createToolbar() &#123; return new ToolbarLight(mContext); &#125;&#125; å¯¹äºŽ Dark ï¼Œ Light éƒ½å®žçŽ°äº†å„è‡ªçš„ä¸»é¢˜å…ƒç´ ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹ UI å…ƒç´ æŠ½è±¡ç±» 123456789101112131415161718192021222324252627282930//æŠ½è±¡ä¸»é¢˜æ ‡é¢˜æ é¢œè‰²abstract class ThemeToolbar extends Toolbar &#123; public ThemeToolbar(Context context) &#123; super(context); initIcon(); initTextColor(); initBackgroundColor() ; &#125; /** * åˆå§‹åŒ–å›¾æ ‡ */ public abstract void initIcon(); /** * åˆå§‹è¯æŒ‰é’®é¢œè‰² */ public abstract void initTextColor(); /** * åˆå§‹åŒ–æŒ‰é’®é¢œè‰² */ public abstract void initBackgroundColor();&#125; 12345678910111213141516171819202122//æŠ½è±¡ä¸»é¢˜æŒ‰é’®ç±»abstract class ThemeButton extends Button &#123; public ThemeButton(Context context) &#123; super(context); initTextColor(); initBackgroundColor() ; &#125; /** * åˆå§‹è¯æŒ‰é’®é¢œè‰² */ public abstract void initTextColor(); /** * åˆå§‹åŒ–æŒ‰é’®é¢œè‰² */ public abstract void initBackgroundColor();&#125; ä¸»é¢˜é¢œè‰²å®žçŽ°ç±»ï¼Œæˆ‘è¿™é‡Œå°±é‚£ä¸€ä¸ªä¸¾ä¾‹ 1234567891011121314class ButtonDark extends ThemeButton &#123; public ButtonDark(Context mContext) &#123; super(mContext); &#125; @Override public void initTextColor() &#123; setTextColor(mContext.getResources().getColor(R.color.dark_color)); &#125; @Override public void initBackgroundColor() &#123; setBackgroundColor(mContext.getResources().getColor(R.color.dark_color)); &#125;&#125; ä½¿ç”¨ï¼š 12345DarkThemeFactory darkThemeFactory = new DarkThemeFactory(getContext();//åˆ›å»ºæš—è‰²ä¸»é¢˜æŒ‰é’®ThemeButton button = darkThemeFactory.createButton();//åˆ›å»ºäº®è‰²ä¸»é¢˜æ ‡é¢˜æ ThemeToolbar toolbar = darkThemeFactory.createToolbar(); å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼ŒæŠ½è±¡å·¥åŽ‚æ¨¡å¼çš„ç»“æž„ç›¸å¯¹äºŽç®€å•å·¥åŽ‚å’Œå·¥åŽ‚æ–¹æ³•æ¨¡å¼æ¥è¯´è¦å¤æ‚çš„å¤šï¼Œä½†æ˜¯å…¶æœ¬èº«ä¹Ÿæ˜¯åº”ç”¨äºŽè¾ƒä¸ºå¤æ‚åœºæ™¯çš„è§£è€¦ï¼Œæ¯”å¦‚ä¸Šè¿°äº‹ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°±åº”å¯¹äº†å¤šä¸ªå±‚é¢çš„å˜åŒ–ï¼Œå› æ­¤åœ¨å®žé™…é¡¹ç›®å¼€å‘ä¸­æ˜¯å¦ä½¿ç”¨æŠ½è±¡å·¥åŽ‚æ¨¡å¼è¿˜éœ€è¦çœ‹å…·ä½“æƒ…å†µã€‚ æ€»ç»“ä¼˜ç‚¹ï¼š ä¸€ä¸ªæ˜¾è‘—çš„ä¼˜ç‚¹æ˜¯åˆ†ç¦»æŽ¥å£ä¸Žå®žçŽ°ï¼Œå®¢æˆ·ç«¯ä½¿ç”¨æŠ½è±¡å·¥åŽ‚æ¥åˆ›å»ºéœ€è¦çš„å¯¹è±¡ï¼Œè€Œå®¢æˆ·ç«¯æ ¹æœ¬å°±ä¸çŸ¥é“å…·ä½“å®žçŽ°æ˜¯è°ï¼Œå®¢æˆ·ç«¯åªæ˜¯é¢å‘äº§å“æŽ¥å£ç¼–ç¨‹è€Œå·²ï¼Œä½¿å…¶ä»Žå…·ä½“çš„äº§å“å®žçŽ°ä¸­è§£è€¦ï¼ŒåŒæ—¶åŸºäºŽæŽ¥å£ä¸Žå®žçŽ°çš„åˆ†ç¦»ï¼Œä½¿æŠ½è±¡å·¥åŽ‚æ–¹æ³•æ¨¡å¼åœ¨åˆ‡æ¢äº§å“ç±»æ—¶æ›´åŠ çµæ´»ï¼Œå®¹æ˜“ã€‚ ç¼ºç‚¹ï¼š éšç€äº§å“ç±»çš„å¢žåŠ ï¼ŒæŠ½è±¡å·¥åŽ‚ä¹Ÿå¾—ä¿®æ”¹ï¼Œç›¸å½“äºŽæ‰€æœ‰çš„å…·ä½“å·¥åŽ‚éƒ½å¾—ä¿®æ”¹ï¼Œä¸æ˜“æ‰©å±•æ–°çš„äº§å“ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>æŠ½è±¡å·¥åŽ‚æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼å››ä¹‹å·¥åŽ‚æ–¹æ³•æ¨¡å¼]]></title>
    <url>%2Fposts%2F3319c3e.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ å·¥åŽ‚æ–¹æ³•æ¨¡å¼ ä»‹ç»å·¥åŽ‚æ¨¡å¼ ( Factory Pattern ) ï¼Œæ˜¯åˆ›å»ºåž‹è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚å·¥åŽ‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§ç»“æž„ç®€å•çš„æ¨¡å¼ï¼Œå…¶åœ¨æˆ‘ä»¬å¹³æ—¶å¼€å‘ä¸­åº”ç”¨å¾ˆå¹¿æ³›ï¼Œä¹Ÿè®¸ä½ å¹¶ä¸çŸ¥é“ï¼Œä½†æ˜¯ä½ å·²ç»ä½¿ç”¨äº†æ— æ•°æ¬¡æ”¹æ¨¡å¼äº†ï¼Œå¦‚ Android ä¸­çš„ Activity é‡Œå„ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œä»¥ onCreate æ–¹æ³•ä¸ºä¾‹ï¼Œå®ƒå°±å¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå·¥åŽ‚æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­å¯ä»¥æž„é€ æˆ‘ä»¬çš„ View,å¹¶é€šè¿‡ setContentView è¿”å›žç»™ Framework å¤„ç†ã€‚ å®šä¹‰å®šä¹‰ä¸€ä¸ªç”¨äºŽåˆ›å»ºå¯¹è±¡çš„æŽ¥å£ï¼Œè®©å­ç±»å†³å®šå®žä¾‹åŒ–å“ªä¸ªç±»ã€‚ ä½¿ç”¨åœºæ™¯åœ¨ä»»ä½•éœ€è¦ç”Ÿæˆå¤æ‚å¯¹è±¡çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨å·¥åŽ‚æ–¹æ³•æ¨¡å¼ã€‚å¤æ‚å¯¹è±¡é€‚åˆä½¿ç”¨å·¥åŽ‚æ¨¡å¼ï¼Œç”¨ new å°±å¯ä»¥å®Œæˆåˆ›å»ºçš„å¯¹è±¡æ— éœ€ä½¿ç”¨ Factory ã€‚ å·¥åŽ‚æ¨¡å¼ä»£ç ç¤ºä¾‹éœ€æ±‚ï¼šæ ¹æ®ç”¨æˆ·ä¸åŒçš„æƒé™ï¼ŒåŒ¹é…ä¸åŒçš„ä¸šåŠ¡æ¨¡å—ã€‚ å®šä¹‰ä¸€ä¸ªæŠ½è±¡çš„ä¸šåŠ¡æ¨¡å—ç±» 123456789public abstract class IModule &#123; /** * æ ¹æ®ä¸åŒçš„æƒé™ æ‹¿åˆ°åŠŸèƒ½æ¨¡å— * @param permission * @return */ public abstract List&lt;IFunctionModule&gt; getMoudleFun(String permission);&#125; å…·ä½“åŠŸèƒ½çš„å®žçŽ°ç±» 1234567public class PlayMusicImpl implements IFunctionModule &#123; private String TAG = getClass().getSimpleName(); @Override public void function() &#123; Log.i(TAG,"æ’­æ”¾éŸ³ä¹"); &#125;&#125; 12345678910public class PlayVideoImpl implements IFunctionModule &#123; public String TAG = getClass().getSimpleName(); @Override public void function() &#123; Log.i(TAG,"æ’­æ”¾è§†é¢‘"); &#125;&#125; 12345678910public class NewsImpl implements IFunctionModule &#123; private String TAG = getClass().getSimpleName(); @Override public void function() &#123; Log.i(TAG, "çœ‹æ–°é—»"); &#125;&#125; å…·ä½“åŠŸèƒ½æ¨¡å—å·¥åŽ‚å¼€å§‹ç”Ÿäº§éœ€è¦çš„æ¨¡å— 1234567891011121314151617181920public class FunModuleFactor extends IModule &#123; @Overridepublic List&lt;IFunctionModule&gt; getMoudleFun(String permission) &#123; switch (permission) &#123; case "VIP": List&lt;IFunctionModule&gt; vipLists = new ArrayList&lt;&gt;(); vipLists.add(new PlayMusicImpl()); vipLists.add(new PlayVideoImpl()); vipLists.add(new NewsImpl()); return vipLists; default: List&lt;IFunctionModule&gt; kipLists = new ArrayList&lt;&gt;(); kipLists.add(new PlayMusicImpl()); kipLists.add(new NewsImpl()); return kipLists; &#125; &#125;&#125; ä½¿ç”¨ï¼š 12345678910@Testpublic void test7() &#123; FunModuleFactor funModuleFactor = new FunModuleFactor(); List&lt;IFunctionModule&gt; vip = funModuleFactor.getMoudleFun("VIP"); System.out.println("VIP:" + vip.size()); List&lt;IFunctionModule&gt; kip = funModuleFactor.getMoudleFun("KIP"); System.out.println("KIP:" + kip.size());&#125; è¾“å‡º: 12VIP:3KIP:2 æ ¹æ®ä¸Šé¢ä»£ç å¯çŸ¥ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ¨¡å—ç±» IMoudleï¼ŒFunModuleFactory å®žçŽ°äº† IModule ,å¤–éƒ¨å¯ä»¥é€šè¿‡ä¸åŒçš„æƒé™æ¥ç»„è£…å¯¹åº”çš„ä¸šåŠ¡åŠŸèƒ½ã€‚ä¹Ÿå°±å®žçŽ°äº†è¿™ä¸ªéœ€æ±‚ã€‚ æ€»ç»“æ€»çš„æ¥è¯´ï¼Œå·¥åŽ‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è®¾è®¡æ¨¡å¼ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œæ¯æ¬¡æˆ‘ä»¬ä¸ºå·¥åŽ‚æ–¹æ³•æ¨¡å¼æ·»åŠ ä¸€ä¸ªæ–°çš„æ¨¡å—éƒ½è¦ç¼–å†™æ–°çš„æ¨¡å—ç±»ï¼ŒåŒæ—¶å¼•å…¥æŠ½è±¡å±‚ï¼Œè¿™å¿…ç„¶ä¼šå¯¼è‡´ç±»ç»“æž„çš„å¤æ‚åŒ–ï¼Œæ‰€ä»¥ï¼Œåœ¨æŸäº›æƒ…å†µæ¯”è¾ƒç®€å•æ—¶ï¼Œæ˜¯å¦ä½¿ç”¨å·¥åŽ‚æ¨¡å¼ï¼Œéœ€è¦è‡ªå·±æƒè¡¡åˆ©å¼Šäº†ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å·¥åŽ‚æ–¹æ³•æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¸‰ä¹‹åŽŸåž‹æ¨¡å¼]]></title>
    <url>%2Fposts%2F7a86e223.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ åŽŸåž‹æ¨¡å¼ ä»‹ç»åŽŸåž‹æ¨¡å¼æ˜¯ä¸€ä¸ªåˆ›å»ºåž‹çš„æ¨¡å¼ã€‚åŽŸåž‹äºŒå­—è¡¨æ˜Žäº†è¯¥æ¨¡å¼åº”è¯¥æœ‰ä¸€ä¸ªæ¨¡æ¿å®žä¾‹ï¼Œç”¨æˆ·ä»Žè¿™ä¸ªæ¨¡æ¿å¯¹è±¡ä¸­å¤åˆ¶å‡ºä¸€ä¸ªå†…éƒ¨å±žæ€§ä¸€è‡´å¹¶ä¸”å†…å­˜åœ°å€ä¸åŒçš„å¯¹è±¡ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„ â€œå…‹éš†â€ ã€‚è¢«å¤åˆ¶çš„å®žä¾‹å°±æ˜¯æˆ‘ä»¬æ‰€ç§°çš„ â€œåŽŸåž‹â€ ï¼Œè¿™ä¸ªåŽŸåž‹æ˜¯å¯å®šåˆ¶çš„ã€‚åŽŸåž‹æ¨¡å¼å¤šç”¨äºŽåˆ›å»ºå¤æ‚çš„æˆ–è€…æž„é€ è€—æ—¶çš„å®žä¾‹ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹ï¼Œå¤åˆ¶ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å®žä¾‹å¯ä½¿ç¨‹åºè¿è¡Œæ›´é«˜æ•ˆã€‚ å®šä¹‰ç”¨åŽŸåž‹å®žä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶é€šè¿‡å¤åˆ¶è¿™äº›åŽŸåž‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ ä½¿ç”¨åœºæ™¯ ç±»åˆå§‹åŒ–éœ€è¦æ¶ˆè€—éžå¸¸å¤šçš„èµ„æºï¼Œè¿™ä¸ªèµ„æºåŒ…æ‹¬æ•°æ®ã€ç¡¬ä»¶èµ„æºç­‰ï¼Œé€šè¿‡åŽŸåž‹å¤åˆ¶é¿å…è¿™äº›æ¶ˆè€—ã€‚ é€šè¿‡ new äº§ç”Ÿä¸€ä¸ªå¯¹è±¡éœ€è¦éžå¸¸ç¹ççš„æ•°æ®å‡†å¤‡å’Œè®¿é—®æƒé™ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨åŽŸåž‹æ¨¡å¼ã€‚ ä¸€ä¸ªå¯¹è±¡éœ€è¦æä¾›ç»™å…¶å®ƒå¯¹è±¡è®¿é—®ï¼Œè€Œä¸”å„ä¸ªè°ƒç”¨è€…å¯èƒ½éƒ½éœ€è¦ä¿®æ”¹å…¶å€¼æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŽŸåž‹æ¨¡å¼å¤åˆ¶å¤šä¸ªå¯¹è±¡ä¾›è°ƒç”¨è€…ä½¿ç”¨ï¼Œæ—¢ä¿æŠ¤æ€§æ‹·è´ã€‚ UML ç±»å›¾ Client: å®¢æˆ·ç«¯ç”¨æˆ·ã€‚ Prototype: æŠ½è±¡ç±»æˆ–è€…æŽ¥å£ï¼Œå£°æ˜Žå…·å¤‡ clone èƒ½åŠ›ã€‚ ConcreatePrototype: å…·ä½“çš„åŽŸåž‹ç±» åŽŸåž‹æ¨¡å¼çš„ç®€å•å®žçŽ°ä¸‹é¢ä»¥ç®€å•çš„æ–‡æ¡£ copy ä¸ºä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹åŽŸåž‹æ¨¡å¼ã€‚ éœ€æ±‚ï¼šæœ‰ä¸€ä¸ªæ–‡æ¡£ï¼Œæ–‡æ¡£ä¸­åŒ…å«äº†æ–‡å­—å’Œå›¾ç‰‡ï¼Œç”¨æˆ·ç»è¿‡äº†é•¿æ—¶é—´çš„å†…å®¹ç¼–è¾‘åŽï¼Œæ‰“ç®—å¯¹è¯¥æ–‡æ¡£åšè¿›ä¸€æ­¥çš„ç¼–è¾‘ï¼Œä½†æ˜¯ï¼Œè¿™ä¸ªç¼–è¾‘åŽçš„æ–‡æ¡£æ˜¯å¦ä¼šè¢«é‡‡ç”¨è¿˜ä¸ç¡®å®šï¼Œå› æ­¤ï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œç”¨æˆ·éœ€è¦å°†å½“å‰æ–‡æ¡£ copy ä¸€ä»½ï¼Œç„¶åŽå†åœ¨æ–‡æ¡£å‰¯æœ¬ä¸Šè¿›è¡Œä¿®æ”¹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/***è¿™é‡Œä»£è¡¨æ˜¯å…·ä½“åŽŸåž‹ç±»*/public class WordDocument implements Cloneable &#123; /** * æ–‡æœ¬ */ private String mTxt; /** * å›¾ç‰‡ååˆ—è¡¨ */ private List&lt;String&gt; mImagePath = new ArrayList&lt;&gt;(); public String getmTxt() &#123; return mTxt; &#125; public void setmTxt(String mTxt) &#123; this.mTxt = mTxt; &#125; public List&lt;String&gt; getImagePath() &#123; return mImagePath; &#125; public void addImagepath(String imagepath) &#123; mImagePath.add(imagepath); &#125; /** * æ‰“å°æ–‡æ¡£å†…å®¹ */ public void println()&#123; System.out.println("---------------- start ----------------"); System.out.println("txt: " + mTxt); System.out.println("mImagePath: "); for (String path : mImagePath) &#123; System.out.println("path: " + path); &#125; System.out.println("----------------- end ----------------"); &#125; /** * å£°æ˜Žå…·å¤‡ clone èƒ½åŠ› * @return clone çš„å¯¹è±¡ */ @Override protected WordDocument clone() &#123; try &#123; WordDocument document = (WordDocument)super.clone(); document.mTxt = this.mTxt; document.mImagePath = this.mImagePath; return document; &#125; catch (CloneNotSupportedException e) &#123; e.printStackTrace(); &#125; return null; &#125;&#125; Test: 123456789101112131415161718192021222324252627282930313233@Testpublic void test4()&#123; //1. æž„å»ºæ–‡æ¡£å¯¹è±¡ WordDocument wordDocument = new WordDocument(); //2. ç¼–è¾‘æ–‡æ¡£ wordDocument.setmTxt("ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”"); wordDocument.addImagepath("/sdcard/image.png"); wordDocument.addImagepath("/sdcard/image2.png"); wordDocument.addImagepath("/sdcard/image3.png"); //æ‰“å°æ–‡æ¡£å†…å®¹ wordDocument.println(); System.out.println("--------------------å¼€å§‹clone-----\n\n"); //ä»¥åŽŸå§‹æ–‡æ¡£ä¸ºå‡†ï¼Œcopy å‰¯æœ¬ WordDocument cloneDoc = wordDocument.clone(); System.out.println(" æ‰“å°å‰¯æœ¬ï¼Œçœ‹çœ‹æ•°æ® \n\n"); //æ‰“å°å‰¯æœ¬ï¼Œçœ‹çœ‹æ•°æ® cloneDoc.println(); //åœ¨å‰¯æœ¬æ–‡æ¡£ä¸Šä¿®æ”¹ cloneDoc.setmTxt("å‰¯å¥”ä¸Šä¿®æ”¹æ–‡æ¡£ï¼šè€é¾™çŽ‹å“­äº†"); System.out.println(" æ‰“å°ä¿®æ”¹åŽçš„å‰¯æœ¬ \n\n"); //æ‰“å°ä¿®æ”¹åŽçš„å‰¯æœ¬ cloneDoc.println(); System.out.println("----çœ‹ä¼šä¸ä¼šå½±å“åŽŸå§‹æ–‡æ¡£-----\n\n"); //çœ‹ä¼šä¸ä¼šå½±å“åŽŸå§‹æ–‡æ¡£ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ wordDocument.println(); System.out.println("å†…å­˜åœ°å€ï¼š\nwordDocument: "+wordDocument.toString() +"\n" + "cloneDoc: "+cloneDoc.toString());&#125; Output: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051---------------- start ----------------txt: ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.png----------------- end ------------------------------------å¼€å§‹clone----- æ‰“å°å‰¯æœ¬ï¼Œçœ‹çœ‹æ•°æ® ---------------- start ----------------txt: ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.png----------------- end ---------------- æ‰“å°ä¿®æ”¹åŽçš„å‰¯æœ¬ ---------------- start ----------------txt: å‰¯å¥”ä¸Šä¿®æ”¹æ–‡æ¡£ï¼šè€é¾™çŽ‹å“­äº†mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.png----------------- end --------------------çœ‹ä¼šä¸ä¼šå½±å“åŽŸå§‹æ–‡æ¡£--------------------- start ----------------txt: ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.png----------------- end ---------------- å†…å­˜åœ°å€ï¼šwordDocument: com.devyk.android_dp_code.prototype.WordDocument@48533e64cloneDoc: com.devyk.android_dp_code.prototype.WordDocument@64a294a6 ä»Žä¸Šé¢ä»£ç è·Ÿæ‰“å°å¯ä»¥çœ‹å‡º cloneDoc æ˜¯é€šè¿‡ wordDocument.clone() åˆ›å»ºçš„å¹¶ä¸” cloneDoc ç¬¬ä¸€æ¬¡è¾“å‡ºå’Œ wordDocument åŽŸå§‹æ–‡æ¡£æ•°æ®ä¸€æ ·ï¼Œæ—¢ cloneDoc æ˜¯ wordDocument çš„ä¸€ä»½å‰¯æœ¬æ–‡ä»¶ã€‚éš¾é“è¿™æ ·å°±å®Œäº†å—ï¼Ÿä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æ³¨æ„è¿™é‡Œçš„ mImagePath å­—æ®µï¼ŒåŽŸå§‹å¯¹è±¡çš„ clone æ–¹æ³•è¿™é‡Œç›¸å½“æŠŠå¼•ç”¨åœ°å€å¤åˆ¶ç»™äº† clone å‡ºæ¥çš„å¯¹è±¡ï¼Œå¦‚æžœè¿™ 2 ä¸ªå¯¹è±¡ä¸­çš„ä»»æ„ä¸€ä¸ªå¯¹å…¶ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±ä¼šå¯¹åŽŸå§‹æ•°æ®é€ æˆç ´åï¼Œå¤±åŽ»äº†å¯¹æ•°æ®çš„ä¿æŠ¤ã€‚é‚£ä¹ˆæ€Žä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¯·ç»§ç»­å¾€ä¸‹æµè§ˆï¼ˆæ³¨æ„ï¼šé€šè¿‡ clone çš„å¯¹è±¡å¹¶ä¸ä¼šæ‰§è¡Œ æž„é€ å‡½æ•°ï¼ï¼‰ æµ…æ‹·è´å’Œæ·±æ‹·è´ä¸Šè¿°åŽŸåž‹æ¨¡å¼çš„å®žçŽ°å®žé™…ä¸Šåªæ˜¯ä¸€ä¸ªæµ…æ‹·è´ï¼Œä¹Ÿç§°ä¸ºå½±å­æ‹·è´ã€‚è¿™ä»½æ‹·è´å®žé™…ä¸Šå¹¶ä¸æ˜¯å°†åŽŸå§‹æ–‡æ¡£çš„æ‰€æœ‰å­—æ®µéƒ½é‡æ–°æž„é€ äº†ä¸€ä»½ï¼Œè€Œæ˜¯å‰¯æœ¬æ–‡æ¡£çš„å­—æ®µå¼•ç”¨åŽŸå§‹æ–‡æ¡£çš„å­—æ®µã€‚ æˆ‘ä»¬çŸ¥é“ A å¼•ç”¨ B é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è®¤ä¸º A,B éƒ½æŒ‡å‘åŒä¸€ä¸ªåœ°å€ï¼Œå½“ä¿®æ”¹ A æ—¶ B ä¹Ÿä¼šéšä¹‹æ”¹å˜ï¼Œ B ä¿®æ”¹æ—¶ A ä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚æˆ‘ä»¬ç›´æŽ¥çœ‹ä¸‹é¢ä»£ç ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526272829303132333435@Testpublic void test4() &#123; //1. æž„å»ºæ–‡æ¡£å¯¹è±¡ WordDocument wordDocument = new WordDocument(); //2. ç¼–è¾‘æ–‡æ¡£ wordDocument.setmTxt("ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”"); wordDocument.addImagepath("/sdcard/image.png"); wordDocument.addImagepath("/sdcard/image2.png"); wordDocument.addImagepath("/sdcard/image3.png"); //æ‰“å°æ–‡æ¡£å†…å®¹ wordDocument.println(); System.out.println("--------------------å¼€å§‹clone-----\n\n"); //ä»¥åŽŸå§‹æ–‡æ¡£ä¸ºå‡†ï¼Œcopy å‰¯æœ¬ WordDocument cloneDoc = wordDocument.clone(); System.out.println(" æ‰“å°å‰¯æœ¬ï¼Œçœ‹çœ‹æ•°æ® \n\n"); //æ‰“å°å‰¯æœ¬ï¼Œçœ‹çœ‹æ•°æ® cloneDoc.println(); //åœ¨å‰¯æœ¬æ–‡æ¡£ä¸Šä¿®æ”¹ cloneDoc.setmTxt("å‰¯å¥”ä¸Šä¿®æ”¹æ–‡æ¡£ï¼šè€é¾™çŽ‹å“­äº†"); cloneDoc.addImagepath("/sdcard/å‰¯æœ¬å‘ç”Ÿæ”¹å˜"); System.out.println(" æ‰“å°ä¿®æ”¹åŽçš„å‰¯æœ¬ \n\n"); //æ‰“å°ä¿®æ”¹åŽçš„å‰¯æœ¬ cloneDoc.println(); System.out.println("----çœ‹ä¼šä¸ä¼šå½±å“åŽŸå§‹æ–‡æ¡£-----\n\n"); //çœ‹ä¼šä¸ä¼šå½±å“åŽŸå§‹æ–‡æ¡£ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ wordDocument.println(); System.out.println("å†…å­˜åœ°å€ï¼š\nwordDocument: " + wordDocument.toString() + "\n" + "cloneDoc: " + cloneDoc.toString());&#125; æ³¨æ„çœ‹å‰¯æœ¬æ–‡æ¡£ï¼Œæˆ‘æ‰‹åŠ¨è°ƒç”¨ addImagepath æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å›¾ç‰‡åœ°å€ã€‚é‚£ä¹ˆå¤§å®¶çŒœåŽŸå§‹æ–‡æ¡£ä¼šå‘ç”Ÿæ”¹å˜å—ï¼Ÿè¯·çœ‹ä¸‹é¢çš„è¾“å‡ºï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253---------------- start ----------------txt: ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.png----------------- end ------------------------------------å¼€å§‹clone----- æ‰“å°å‰¯æœ¬ï¼Œçœ‹çœ‹æ•°æ® ---------------- start ----------------txt: ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.png----------------- end ---------------- æ‰“å°ä¿®æ”¹åŽçš„å‰¯æœ¬ ---------------- start ----------------txt: å‰¯å¥”ä¸Šä¿®æ”¹æ–‡æ¡£ï¼šè€é¾™çŽ‹å“­äº†mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.pngpath: /sdcard/å‰¯æœ¬å‘ç”Ÿæ”¹å˜----------------- end --------------------çœ‹ä¼šä¸ä¼šå½±å“åŽŸå§‹æ–‡æ¡£--------------------- start ----------------txt: ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.pngpath: /sdcard/å‰¯æœ¬å‘ç”Ÿæ”¹å˜----------------- end ----------------å†…å­˜åœ°å€ï¼šwordDocument: com.devyk.android_dp_code.prototype.WordDocument@48533e64cloneDoc: com.devyk.android_dp_code.prototype.WordDocument@64a294a6 æ³¨æ„çœ‹æˆ‘ä»¬å‰¯æœ¬æ·»åŠ çš„å›¾ç‰‡åœ°å€æ˜¯ä¸æ˜¯å½±å“äº†åŽŸå§‹æ–‡æ¡£çš„å›¾ç‰‡åœ°å€æ•°æ®ï¼Œé‚£ä¹ˆè¿™æ˜¯æ€Žä¹ˆå›žäº‹å‹’ï¼Ÿå¯¹ C++ äº†è§£çš„åŒå­¦åº”è¯¥æ·±æœ‰ä½“ä¼šï¼Œè¿™æ˜¯å› ä¸ºä¸Šæ–‡ä¸­ cloneDoc åªæ˜¯è¿›è¡Œäº†æµ…æ‹·è´ï¼Œå›¾ç‰‡åˆ—è¡¨ mImagePath åªæ˜¯å•çº¯çš„æŒ‡å‘äº† this.mImagePath , å¹¶æ²¡æœ‰é‡æ–°æž„é€ ä¸€ä¸ª mImagePath å¯¹è±¡ï¼Œå°±åƒå¼€å§‹ä»‹ç»æµ…/æ·±æ‹·è´ä¸€æ ·ï¼Œ Aï¼ŒB å¯¹è±¡å…¶å®žæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œæ‰€ä»¥ä¸ç®¡ Aï¼ŒB ä¸­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ”¹äº†æŒ‡å‘åœ°å€çš„æ•°æ®é‚£ä¹ˆéƒ½ä¼šéšä¹‹å‘ç”Ÿæ”¹å˜ï¼Œé‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿç­”æ¡ˆå°±æ˜¯é‡‡å–æ·±æ‹·è´ï¼Œå³åœ¨æ‹·è´å¯¹è±¡æ—¶ï¼Œå¯¹äºŽå¼•ç”¨åž‹çš„å­—æ®µä¹Ÿè¦é‡‡ç”¨æ‹·è´çš„å½¢å¼ï¼Œè€Œä¸æ˜¯å•çº¯å¼•ç”¨å½¢å¼ï¼Œä¸‹é¢æˆ‘ä»¬ä¿®æ”¹ clone ä»£ç ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314151617/** * å£°æ˜Žå…·å¤‡ clone èƒ½åŠ› * @return clone çš„å¯¹è±¡ */@Overridepublic WordDocument clone() &#123; try &#123; WordDocument document = (WordDocument)super.clone(); document.mTxt = this.mTxt; //è¿›è¡Œæ·±æ‹·è´ document.mImagePath = (ArrayList&lt;String&gt;) this.mImagePath.clone(); return document; &#125; catch (CloneNotSupportedException e) &#123; e.printStackTrace(); &#125; return null;&#125; å†æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹è¾“å‡ºç±»å®¹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152---------------- start ----------------txt: ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.png----------------- end ------------------------------------å¼€å§‹clone----- æ‰“å°å‰¯æœ¬ï¼Œçœ‹çœ‹æ•°æ® ---------------- start ----------------txt: ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.png----------------- end ---------------- æ‰“å°ä¿®æ”¹åŽçš„å‰¯æœ¬ ---------------- start ----------------txt: å‰¯å¥”ä¸Šä¿®æ”¹æ–‡æ¡£ï¼šè€é¾™çŽ‹å“­äº†mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.pngpath: /sdcard/å‰¯æœ¬å‘ç”Ÿæ”¹å˜----------------- end --------------------çœ‹ä¼šä¸ä¼šå½±å“åŽŸå§‹æ–‡æ¡£--------------------- start ----------------txt: ä»Šå¤©æ˜¯ä¸€ä¸ªå¥½å¤©æ°”mImagePath: path: /sdcard/image.pngpath: /sdcard/image2.pngpath: /sdcard/image3.png----------------- end ----------------å†…å­˜åœ°å€ï¼šwordDocument: com.devyk.android_dp_code.prototype.WordDocument@48533e64cloneDoc: com.devyk.android_dp_code.prototype.WordDocument@64a294a6 é€šè¿‡è¾“å‡ºå†…å®¹ï¼Œæ·±æ‹·è´è§£å†³äº†ä¸Šè¿°é—®é¢˜ã€‚ åŽŸåž‹æ¨¡å¼æ˜¯ä¸€ä¸ªéžå¸¸ç®€å•çš„ä¸€ä¸ªæ¨¡å¼ï¼Œå®ƒçš„æ ¸å¿ƒé—®é¢˜å°±æ˜¯å¯¹åŽŸå§‹å¯¹è±¡è¿›è¡Œæ‹·è´ï¼Œåœ¨è¿™ä¸ªæ¨¡å¼çš„ä½¿ç”¨è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„ä¸€ç‚¹å°±æ˜¯ æ·±/æµ…æ‹·è´çš„é—®é¢˜ã€‚åœ¨å®žé™…å¼€å‘ä¸­ï¼Œä¸ºäº†å‡å°‘ä¸å¿…è¦çš„éº»çƒ¦ï¼Œå»ºè®®å¤§å®¶éƒ½ä½¿ç”¨æ·±æ‹·è´ã€‚ è¿™é‡Œå¦‚æžœå¯¹æ·±æµ…æ‹·è´æ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹æŽ˜é‡‘ä¸Šè¿™ç¯‡æ–‡ç« ï¼Œä¸è¿‡æ˜¯ JS ä»£ç (äº†è§£åŽŸç†å°±å¯ä»¥äº†)ï¼Œå¾ˆç«çš„ä¸€ç¯‡æ–‡ç« å€¼å¾—å­¦ä¹ ä¸€ä¸‹ æºç ä¸­çš„åŽŸåž‹æ¨¡å¼ ArrayList åˆšåˆšæˆ‘ä»¬ clone æ–‡æ¡£å¯çŸ¥ï¼Œè¿›è¡Œçš„ ArrayList clone ï¼Œé‚£ä¹ˆ ArrayList clone å…·ä½“æ˜¯æ€Žä¹ˆå®žçŽ°çš„ï¼Ÿæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸‹ï¼š 12345678910111213public Object clone() &#123; try &#123; //1. ArrayList&lt;?&gt; v = (ArrayList&lt;?&gt;) super.clone(); //2. v.elementData = Arrays.copyOf(elementData, size); v.modCount = 0; return v; &#125; catch (CloneNotSupportedException e) &#123; // this shouldn't happen, since we are Cloneable throw new InternalError(e); &#125;&#125; ä»£ç ä¸­ç¬¬ä¸€æ­¥é¦–å…ˆè¿›è¡Œè‡ªèº«çš„ clone ,ç„¶åŽåœ¨å¯¹è‡ªèº«çš„æ•°æ®è¿›è¡Œ copy . Intent ä¸‹é¢ä»¥ Intent æ¥åˆ†æžæºç ä¸­çš„åŽŸåž‹æ¨¡å¼ï¼Œé¦–å…ˆçœ‹å¦‚ä¸‹ä»£ç  12345678910public static Intent toSMS()&#123; Uri uri = Uri.parse("smsto:11202"); Intent preIntent = new Intent(Intent.ACTION_SENDTO,uri); preIntent.putExtra("sms_body","test"); //clone return (Intent) preIntent.clone(); &#125; ä»Žä»£ç ä¸­å¯ä»¥çœ‹åˆ° preIntent.clone(); æ–¹æ³•æ‹·è´äº†ä¸€ä¸ªå¯¹è±¡ Intent ,ç„¶åŽæ‰§è¡Œè·³è½¬ Activity,è·³è½¬çš„å†…å®¹ä¸ŽåŽŸåž‹æ•°æ®ä¸€è‡´ã€‚ æˆ‘ä»¬ç»§ç»­çœ‹ Intent clone å…·ä½“å®žçŽ°ï¼š 12345/***è¿›è¡Œ clone **/ @Override public Object clone() &#123; return new Intent(this); &#125; 12345678910111213141516171819202122232425262728/** * Copy constructor. */ public Intent(Intent o) &#123; this.mAction = o.mAction; this.mData = o.mData; this.mType = o.mType; this.mPackage = o.mPackage; this.mComponent = o.mComponent; this.mFlags = o.mFlags; this.mContentUserHint = o.mContentUserHint; this.mLaunchToken = o.mLaunchToken; if (o.mCategories != null) &#123; this.mCategories = new ArraySet&lt;String&gt;(o.mCategories); &#125; if (o.mExtras != null) &#123; this.mExtras = new Bundle(o.mExtras); &#125; if (o.mSourceBounds != null) &#123; this.mSourceBounds = new Rect(o.mSourceBounds); &#125; if (o.mSelector != null) &#123; this.mSelector = new Intent(o.mSelector); &#125; if (o.mClipData != null) &#123; this.mClipData = new ClipData(o.mClipData); &#125; &#125; å¯ä»¥çœ‹åˆ° clone æ–¹æ³•å®žé™…ä¸Šåœ¨å†…éƒ¨å¹¶æ²¡æœ‰è°ƒç”¨ super.clone() æ¥å®žçŽ°æ‹·è´å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡ new Intent(this)ã€‚ åœ¨å¼€å§‹æˆ‘ä»¬æåˆ°è¿‡ï¼Œä½¿ç”¨ clone å’Œ new éœ€è¦æ ¹æ®æž„é€ å¯¹è±¡çš„æˆæœ¬æ¥å†³å®šï¼Œå¦‚æžœå¯¹è±¡çš„æž„é€ æˆæœ¬æ¯”è¾ƒé«˜æˆ–è€…æž„é€ éº»çƒ¦ï¼Œé‚£ä¹ˆä½¿ç”¨ clone å‡½æ•°æ•ˆçŽ‡è¾ƒé«˜ï¼Œåä¹‹å¯ä»¥ä½¿ç”¨ new å…³é”®å­—çš„å½¢å¼ã€‚è¿™å°±æ˜¯å’Œ C++ ä¸­çš„ copy æž„é€ å‡½æ•°å®Œå…¨ä¸€è‡´ï¼Œå°†åŽŸå§‹å¯¹è±¡ä½œä¸ºæž„é€ å‡½æ•°çš„å‚æ•°ï¼Œç„¶åŽåœ¨æž„é€ å‡½æ•°å†…å°†åŽŸå§‹å¯¹è±¡æ•°æ®æŒ¨ä¸ª copy , åˆ°æ­¤ï¼Œæ•´ä¸ª clone è¿‡ç¨‹å°±å®Œæˆäº†ã€‚ æ€»ç»“åŽŸåž‹æ¨¡å¼æœ¬è´¨å°±æ˜¯å¯¹è±¡ copy ,ä¸Ž C++ ä¸­çš„æ‹·è´æž„é€ å‡½æ•°ç›¸ä¼¼ï¼Œä»–ä»¬ä¹‹å‰å®¹æ˜“å‡ºçŽ°çš„é—®é¢˜ä¹Ÿéƒ½æ˜¯æ·±æ‹·è´ã€æµ…æ‹·è´ã€‚ä½¿ç”¨åŽŸåž‹æ¨¡å¼å¯ä»¥è§£å†³æž„å»ºå¤æ‚å¯¹è±¡çš„èµ„æºæ¶ˆè€—é—®é¢˜ï¼Œèƒ½å¤Ÿåœ¨æŸäº›åœºæ™¯ä¸‹æå‡åˆ›å»ºçˆ±ä½ å¯¹è±¡çš„æ•ˆçŽ‡ã€‚è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ç”¨é€”ï¼Œå°±æ˜¯ä¿æŠ¤æ€§æ‹·è´ï¼Œä¹Ÿå°±æ˜¯æŸä¸ªå¯¹è±¡å¯¹å¤–å¯èƒ½åªæ˜¯åªè¯»æ¨¡å¼ã€‚ ä¼˜ç‚¹ï¼š åŽŸåž‹æ¨¡å¼æ˜¯åœ¨å†…å­˜ä¸­äºŒè¿›åˆ¶æµçš„ copy, è¦æ¯” new ä¸€ä¸ªå¯¹è±¡æ€§èƒ½å¥½å¾ˆå¤šï¼Œç‰¹åˆ«æ˜¯è¦åœ¨ä¸€ä¸ªå¾ªçŽ¯ä½“å†…äº§ç”Ÿå¤§é‡çš„å¯¹è±¡æ—¶ï¼ŒåŽŸåž‹æ¨¡å¼å¯ä»¥æ›´å¥½åœ°ä½“çŽ°å…¶ä¼˜ç‚¹ã€‚ ç¼ºç‚¹ï¼š è¿™æ—¢æ˜¯å®ƒçš„æœ‰ç‚¹ä¹Ÿæ˜¯ç¼ºç‚¹ï¼Œç›´æŽ¥åœ¨å†…å­˜ä¸­æ‹·è´ï¼Œæž„é€ å‡½æ•°æ—¶ä¸ä¼šæ‰§è¡Œçš„ï¼Œåœ¨å®žé™…å¼€å‘ä¸­åº”è¯¥æ³¨æ„è¿™ä¸ªæ½œåœ¨çš„é—®é¢˜ã€‚ ç‰¹åˆ«æ„Ÿè°¢ã€Š Android æºç è®¾è®¡æ¨¡å¼è§£æžä¸Žå®žæˆ˜ ã€‹]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>åŽŸåž‹æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼äºŒä¹‹å»ºé€ è€…æ¨¡å¼]]></title>
    <url>%2Fposts%2F8bd761ec.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ å»ºé€ è€…æ¨¡å¼ ä»‹ç»Builder æ¨¡å¼æ˜¯ä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚å¯¹è±¡çš„åˆ›å»ºåž‹æ¨¡å¼ï¼Œå®ƒå…è®¸ç”¨æˆ·åœ¨ä¸çŸ¥é“å†…éƒ¨æž„å»ºç»†èŠ‚çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ›´ç²¾ç»†çš„æŽ§åˆ¶å¯¹è±¡çš„æž„é€ æµç¨‹ï¼Œè¯¥æ¨¡å¼æ˜¯ä¸ºäº†å°†æž„å»ºå¤æ‚å¯¹è±¡çš„è¿‡ç¨‹å’Œå®ƒçš„éƒ¨ä»¶è§£è€¦ï¼Œä½¿å¾—æž„å»ºè¿‡ç¨‹å’Œåˆ›å»ºè¿‡ç¨‹éš”ç¦»å¼€æ¥ã€‚ å®šä¹‰å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æž„å»ºä¸Žå®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æž„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚ ä½¿ç”¨åœºæ™¯ ç›¸åŒçš„æ–¹æ³•ï¼Œä¸åŒçš„æ‰§è¡Œé¡ºåºï¼Œäº§ç”Ÿä¸åŒçš„äº‹ä»¶ç»“æžœæ—¶ã€‚ å½“åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡ç‰¹åˆ«å¤æ‚ï¼Œå¦‚å‚æ•°å¤šï¼Œä¸”å¾ˆå¤šå‚æ•°éƒ½å…·æœ‰é»˜è®¤å€¼æ—¶ã€‚ ç®€å•ä»£ç ç¤ºä¾‹è¿™é‡Œæ¯”å¦‚æˆ‘ä»¬ç¬¬ä¸€æ¬¡åˆå§‹åŒ–åº”ç”¨çš„æ—¶å€™ï¼Œéœ€è¦åˆå§‹åŒ–ä¸€äº›äº‹ç‰©ï¼Œæ¯”å¦‚é»˜è®¤è®°ä½å¯†ç ï¼Œè‡ªåŠ¨ç™»å½•ï¼Œå¼€æœºç™»å½•ï¼Œå´©æºƒé‡å¯ç­‰ç­‰ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192package com.devyk.android_dp_code.builder;/** * &lt;pre&gt; * author : devyk on 2019-09-01 16:48 * blog : https://juejin.im/user/578259398ac2470061f3a3fb/posts * github : https://github.com/yangkun19921001 * mailbox : yang1001yk@gmail.com * desc : This is LoginManager * &lt;/pre&gt; */public class LoginManager &#123; /** * è®°ä½å¯†ç  */ public boolean isSavePwd; /** * è‡ªåŠ¨ç™»å½• */ public boolean isAutoLogin; /** * å¼€æœºè‡ªå¯åŠ¨ */ public boolean isBootLauncher; /** * å´©æºƒé‡å¯ */ public boolean isCrashOnRestart; public LoginManager(Builder builder)&#123; this.isAutoLogin = builder.isAutoLogin; this.isBootLauncher = builder.isBootLauncher; this.isCrashOnRestart = builder.isCrashOnRestart; this.isSavePwd = builder.isSavePwd; &#125; public static class Builder&#123; /** * è®°ä½å¯†ç  */ boolean isSavePwd; /** * è‡ªåŠ¨ç™»å½• */ boolean isAutoLogin; /** * å¼€æœºè‡ªå¯åŠ¨ */ boolean isBootLauncher; /** * å´©æºƒé‡å¯ */ boolean isCrashOnRestart; //é»˜è®¤å±žæ€§ public Builder()&#123; this.isSavePwd = false; this.isAutoLogin = false; this.isBootLauncher = false; this.isCrashOnRestart = false; &#125; public Builder isSavePwd(boolean savePwd)&#123; this.isSavePwd = savePwd; return this; &#125; public Builder isAutoLogin(boolean autoLogin)&#123; this.isAutoLogin = autoLogin; return this; &#125; public Builder isBootLauncher(boolean bootLauncher)&#123; this.isBootLauncher = bootLauncher; return this; &#125; public Builder isCrashOnRestart(boolean onReStartApp)&#123; this.isCrashOnRestart = onReStartApp; return this; &#125; /** * æœ€åŽæž„å»ºå‡ºæ¥ * @return */ public LoginManager build()&#123; return new LoginManager(this); &#125; &#125;&#125; ä½¿ç”¨ï¼š 12345678//ç›´æŽ¥é“¾å¼è°ƒç”¨ LoginManager loginManager = new LoginManager.Builder() .isAutoLogin(true) .isBootLauncher(true) .isCrashOnRestart(true) .build(); System.out.printf("loginManager:"+loginManager.toString()); Output: 1loginManager:LoginManager&#123;isSavePwd=false, isAutoLogin=true, isBootLauncher=true, isCrashOnRestart=true&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œé€šè¿‡å…·ä½“çš„ Builder ç±»æ¥å…·ä½“æž„å»º LoginManager éœ€è¦çš„å±žæ€§ï¼Œæœ€åŽé€šè¿‡é“¾å¼è°ƒç”¨ï¼Œç»“æž„å˜å¾—æ›´åŠ æ¸…æ™°ï¼Œæ›´åŠ å®¹æ˜“æŽ§åˆ¶ã€‚ Android æºç ä¸­ AlertDialog çš„ Builder æ¨¡å¼å…¨é¢è§£æžåœ¨ Android æºç ä¸­ï¼Œæœ€å¸¸ç”¨ä¹‹ä¸€çš„ Builder æ¨¡å¼ AlertDialog.Builder, é€šè¿‡ Builder æ¥æž„å»ºå¤æ‚çš„ AlertDialog å¯¹è±¡ã€‚è¯·å…ˆçœ‹å®ƒçš„ä½¿ç”¨æ–¹å¼: 12345678910111213141516171819private void showAlertDialog(Context context) &#123; new AlertDialog.Builder(context)// ä»¥ä¸‹é€šè¿‡ Builder é“¾å¼è°ƒç”¨æž„é€ æ•°æ® .setIcon(R.drawable.ic_launcher_background) .setMessage("æµ‹è¯•æ•°æ®") .setTitle("æç¤º") .setPositiveButton("å–æ¶ˆ", new DialogInterface.OnClickListener() &#123; @Override public void onClick(DialogInterface dialog, int which) &#123; &#125; &#125;).setNegativeButton("ç¡®è®¤", new DialogInterface.OnClickListener() &#123; @Override public void onClick(DialogInterface dialog, int which) &#123; &#125; &#125;).create()//æœ€åŽä¸€æ­¥å°±æ˜¯åœ¨ Builder ä¸­æž„å»ºå‡º AlerDialog å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–æ•°æ® .show(); // æ˜¾ç¤º&#125; ä»Ž AlertDialog.Builder(context) å¯ä»¥çœ‹å‡º AlertDialog æ˜¯ä¸€ä¸ª Builder å»ºé€ è€…æ¨¡å¼ï¼Œé€šè¿‡ Builder å¯¹è±¡ï¼Œç»„è£… Dialog çš„å„ä¸ªéƒ¨åˆ†ï¼Œå°† Dialog çš„æž„é€ å’Œè¡¨ç¤ºè¿›è¡Œåˆ†ç¦»ã€‚ä¸‹é¢è¯·çœ‹ AlertDialog Builder çš„ç›¸å…³æºç ï¼› 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132import com.android.internal.R;public class AlertDialog extends Dialog implements DialogInterface &#123; //æŽ¥æ”¶Builderæˆå‘˜å˜é‡ P ä¸­çš„å„ä¸ªå‚æ•° private AlertController mAlert; ....ä»£ç çœç•¥ protected AlertDialog(Context context, boolean cancelable, OnCancelListener cancelListener) &#123; this(context, 0); setCancelable(cancelable); setOnCancelListener(cancelListener); &#125; //æž„é€ å‡½æ•° protected AlertDialog(Context context, @StyleRes int themeResId) &#123; this(context, themeResId, true); &#125; // æž„é€  AlertDialog AlertDialog(Context context, @StyleRes int themeResId, boolean createContextThemeWrapper) &#123; super(context, createContextThemeWrapper ? resolveDialogTheme(context, themeResId) : 0, createContextThemeWrapper); mWindow.alwaysReadCloseOnTouchAttr(); mAlert = AlertController.create(getContext(), this, getWindow()); &#125; static @StyleRes int resolveDialogTheme(Context context, @StyleRes int themeResId) &#123; if (themeResId == THEME_TRADITIONAL) &#123; return R.style.Theme_Dialog_Alert; &#125; else if (themeResId == THEME_HOLO_DARK) &#123; return R.style.Theme_Holo_Dialog_Alert; &#125; else if (themeResId == THEME_HOLO_LIGHT) &#123; return R.style.Theme_Holo_Light_Dialog_Alert; &#125; else if (themeResId == THEME_DEVICE_DEFAULT_DARK) &#123; return R.style.Theme_DeviceDefault_Dialog_Alert; &#125; else if (themeResId == THEME_DEVICE_DEFAULT_LIGHT) &#123; return R.style.Theme_DeviceDefault_Light_Dialog_Alert; &#125; else if (ResourceId.isValid(themeResId)) &#123; // start of real resource IDs. return themeResId; &#125; else &#123; final TypedValue outValue = new TypedValue(); context.getTheme().resolveAttribute(R.attr.alertDialogTheme, outValue, true); return outValue.resourceId; &#125; &#125; //å®žé™…ä¸Šè°ƒç”¨çš„æ˜¯ mAlert çš„ setTitle æ–¹æ³• @Override public void setTitle(CharSequence title) &#123; super.setTitle(title); mAlert.setTitle(title); &#125; /** * @see Builder#setCustomTitle(View) * * //å®žé™…ä¸Šè°ƒç”¨çš„æ˜¯ mAlert çš„ setCustomTitle æ–¹æ³• */ public void setCustomTitle(View customTitleView) &#123; mAlert.setCustomTitle(customTitleView); &#125; /** * å®žé™…ä¸Šè°ƒç”¨çš„ mAlert çš„ setMessage æ–¹æ³• * @param message */ public void setMessage(CharSequence message) &#123; mAlert.setMessage(message); &#125;// ################################ BUilder ä¸º AlertDialog æž„å»ºçš„å†…éƒ¨ç±» ############################################## public static class Builder &#123; //å­˜å‚¨ AlertDialog çš„å„ä¸ªå‚æ•°ï¼Œå¦‚æžœ title,message,icon private final AlertController.AlertParams P; public Builder(Context context) &#123; this(context, resolveDialogTheme(context, ResourceId.ID_NULL)); &#125; public Builder(Context context, int themeResId) &#123; P = new AlertController.AlertParams(new ContextThemeWrapper( context, resolveDialogTheme(context, themeResId))); &#125; /** * è®¾ç½®æ ‡ç­¾å¤´éƒ¨æç¤º */ public Builder setTitle(@StringRes int titleId) &#123; P.mTitle = P.mContext.getText(titleId); return this; &#125; ..... å…¶å®ƒå±žæ€§å…ˆçœç•¥ ä»£ç éƒ½å¤§åŒå°å¼‚ çœ‹æ‡‚ä¸€ä¸ªå°±åŸºæœ¬æ‡‚äº† /** * Creates an &#123;@link AlertDialog&#125; with the arguments supplied to this * builder. * * è¿™é‡Œæ‰æ˜¯çœŸæ­£æž„å»º AlertDialog çš„åœ°æ–¹ï¼Œé€šè¿‡ Builder æ¥æž„å»ºå‡ºæ¥çš„æ•°æ® p ä¼ é€’å‚æ•° * &lt;p&gt; */ public AlertDialog create() &#123; //å®žä¾‹åŒ– AlertDialog ä¼ å‚ final AlertDialog dialog = new AlertDialog(P.mContext, 0, false); //å°† p ä¸­çš„å‚æ•°åº”ç”¨åˆ° dialog ä¸­çš„ mAlert å¯¹è±¡ä¸­ P.apply(dialog.mAlert); dialog.setCancelable(P.mCancelable); if (P.mCancelable) &#123; dialog.setCanceledOnTouchOutside(true); &#125; dialog.setOnCancelListener(P.mOnCancelListener); dialog.setOnDismissListener(P.mOnDismissListener); if (P.mOnKeyListener != null) &#123; dialog.setOnKeyListener(P.mOnKeyListener); &#125; return dialog; &#125; &#125; ...&#125; ä¸Šè¿°ä»£ç ä¸­ï¼ŒBuilder ç±»å¯ä»¥è®¾ç½® AlertDialog ä¸­çš„ title , message , buttom ç­‰å‚æ•°ï¼Œè¿™äº›å‚æ•°éƒ½å­˜å‚¨åœ¨ Builder æˆå‘˜å˜é‡ p ä¸­ï¼Œp ä¸­åŒ…å«äº†ä¸Ž AlertDialog è§†å›¾ä¸­å¯¹åº”çš„æˆå‘˜å˜é‡ã€‚åœ¨è°ƒç”¨ Builder ç±»çš„ create å‡½æ•°æ—¶ï¼Œæ­¤æ—¶æ‰çœŸæ­£çš„åˆ›å»º AlertDialog,å¹¶ä¸”å°† Builder p ä¿å­˜çš„å‚æ•°äº¤äºŽ AlertDialog mAlert å¯¹è±¡ä¸­ï¼Œæ—¢ p.apply(mAlert);æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹ apply æºç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142 public void apply(AlertController dialog) &#123; if (mCustomTitleView != null) &#123; dialog.setCustomTitle(mCustomTitleView); &#125; else &#123; if (mTitle != null) &#123; dialog.setTitle(mTitle); &#125; if (mIcon != null) &#123; dialog.setIcon(mIcon); &#125; if (mIconId != 0) &#123; dialog.setIcon(mIconId); &#125; if (mIconAttrId != 0) &#123; dialog.setIcon(dialog.getIconAttributeResId(mIconAttrId)); &#125; &#125; //èµ‹å€¼ if (mMessage != null) &#123; dialog.setMessage(mMessage); &#125; .... // å¦‚æžœè®¾ç½®äº† ListView åˆ™è¡¨ç¤ºå¤šé€‰åˆ—è¡¨ï¼Œæ­¤æ—¶åˆ›å»ºä¸€ä¸ª ListView if ((mItems != null) || (mCursor != null) || (mAdapter != null)) &#123; createListView(dialog); &#125; //æœ€åŽå°† mView Dialog ä¸­ if (mView != null) &#123; if (mViewSpacingSpecified) &#123; dialog.setView(mView, mViewSpacingLeft, mViewSpacingTop, mViewSpacingRight, mViewSpacingBottom); &#125; else &#123; dialog.setView(mView); &#125; &#125; else if (mViewLayoutResId != 0) &#123; dialog.setView(mViewLayoutResId); &#125; &#125; åœ¨ apply å‡½æ•°ä¸­ï¼Œåªæ˜¯å°† AlertParams å‚æ•°è®¾ç½®åˆ° AlertControler ä¸­ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ show å°±èƒ½æ˜¾ç¤ºå¯¹è¯æ¡†äº†ï¼Œæˆ‘ä»¬å…·ä½“æ¥çœ‹ä¸‹ show çš„æºç å®žçŽ°: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/** * å¼€å§‹æ˜¾ç¤º Dialog */public void show() &#123; //å¦‚æžœå·²ç»æ˜¾ç¤ºå‡ºæ¥äº† åˆ™è¿”å›ž if (mShowing) &#123; if (mDecor != null) &#123; if (mWindow.hasFeature(Window.FEATURE_ACTION_BAR)) &#123; mWindow.invalidatePanelMenu(Window.FEATURE_ACTION_BAR); &#125; mDecor.setVisibility(View.VISIBLE); &#125; return; &#125; mCanceled = false; // 1. onCreate ç”Ÿå‘½å‘¨æœŸæ–¹æ³• if (!mCreated) &#123; dispatchOnCreate(null); &#125; else &#123; final Configuration config = mContext.getResources().getConfiguration(); mWindow.getDecorView().dispatchConfigurationChanged(config); &#125; // 2. onStart ç”Ÿå‘½å‘¨æœŸæ–¹æ³• onStart(); //3. èŽ·å– Window DecorView mDecor = mWindow.getDecorView(); if (mActionBar == null &amp;&amp; mWindow.hasFeature(Window.FEATURE_ACTION_BAR)) &#123; final ApplicationInfo info = mContext.getApplicationInfo(); mWindow.setDefaultIcon(info.icon); mWindow.setDefaultLogo(info.logo); mActionBar = new WindowDecorActionBar(this); &#125; //4. èŽ·å–å¸ƒå±€å‚æ•° WindowManager.LayoutParams l = mWindow.getAttributes(); if ((l.softInputMode &amp; WindowManager.LayoutParams.SOFT_INPUT_IS_FORWARD_NAVIGATION) == 0) &#123; WindowManager.LayoutParams nl = new WindowManager.LayoutParams(); nl.copyFrom(l); nl.softInputMode |= WindowManager.LayoutParams.SOFT_INPUT_IS_FORWARD_NAVIGATION; l = nl; &#125; //5. å°† mDecor æ·»åŠ åˆ° WindowManager ä¸­ mWindowManager.addView(mDecor, l); mShowing = true; //é€šçŸ¥å¯ä»¥æ˜¾ç¤ºäº† sendShowMessage();&#125; åœ¨ show() ä¸­ä¸»è¦åšäº†å¦‚ä¸‹å‡ ä¸ªäº‹å„¿ï¼š é€šè¿‡dispatchOnCreate å‡½æ•°è°ƒç”¨ AlertDialog ç”Ÿå‘½å‘¨æœŸ onCreate å‡½æ•°ï¼› ç„¶åŽåœ¨è°ƒç”¨ onStart æœ€åŽé€šè¿‡ windowManager æŠŠ Dialog çš„ DecorView æ·»åŠ è¿›åŽ» é‚£ä¹ˆæŒ‰ç…§æž„å»ºï¼Œå†…å®¹è§†å›¾åº”è¯¥æ˜¯åœ¨ç”Ÿå‘½å‘¨æœŸçš„ onCreate é‡Œé¢ 12345678910111213@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); mAlert.installContent(); &#125;public void installContent() &#123; int contentView = selectContentView(); //è®¾ç½®æ¡†å£å†…å®¹è§†å›¾ mWindow.setContentView(contentView); //åˆå§‹åŒ– AlertDialog å…¶å®ƒå­è§†å›¾çš„å†…å®¹ setupView(); &#125; è™½ç„¶ installContent ä»£ç å°‘ï¼Œä½†æ˜¯åŠå…¶é‡è¦ï¼Œå®ƒè°ƒç”¨äº† Window å¯¹è±¡çš„ setContentView, æ­¤å¤„çš„ setContentView ä¸Ž Activity setContentView ä¸­çš„å®žçŽ°ä¸€æ¨¡ä¸€æ ·ï¼Œéƒ½æ˜¯è°ƒç”¨ window çš„æ–¹æ³•ã€‚ æœ€åŽ setupView å°±æ˜¯åˆå§‹åŒ– AlertDialog å¸ƒå±€ä¸­å„ä¸ªå‚æ•°ï¼Œåœ¨è°ƒç”¨å®Œè¯¥å‡½æ•°ä¹‹åŽ Dialog çš„è§†å›¾å†…å®¹å°±å…¨éƒ¨æ˜¾ç¤ºå®Œæ¯•äº†ï¼Œè€Œè¿™äº›å„åŒºåŸŸçš„è§†å›¾éƒ½å±žäºŽ mAlertDialogLayout å¸ƒå±€ä¸­çš„å­ View ,Window å¯¹è±¡å…³è”äº†mAlertDialogLayout çš„æ•´ä¸ªå¸ƒå±€æ ‘ï¼Œå½“è°ƒç”¨å®Œ setupView ä¹‹åŽæ•´ä¸ªè§†å›¾æ ‘çš„æ•°æ®ä¹Ÿå°±å¡«å……å®Œæ¯•ï¼Œå½“ç”¨æˆ·è°ƒç”¨ show å‡½æ•°æ—¶ï¼Œ WindowManager ä¼šå°† window å¯¹è±¡çš„ DecorView (ä¹Ÿå°±æ˜¯ mAlertDialogLayout å¯¹åº”çš„è§†å›¾)æ·»åŠ åˆ°ç”¨æˆ·çš„çª—å£ä¸Šï¼Œå¹¶ä¸”æ˜¾ç¤ºå‡ºæ¥ã€‚åˆ°è¿™é‡Œ Dialog å°±å‡ºçŽ°åœ¨äº†æ‰‹æœºå±å¹•ä¸­ã€‚ å®žæˆ˜ç»è¿‡ç®€å•ç¤ºä¾‹ä¸Žåˆ†æžæºç ä¸­çš„ Builder æ¨¡å¼ï¼Œç›¸ä¿¡å¤§å®¶å¯¹å»ºé€ è€…æ¨¡å¼å·²ç»æœ‰äº†ä¸€å®šäº†è§£äº†ï¼ŒçŽ°åœ¨æˆ‘ä»¬å°± Builder æ¨¡å¼æ¥å¯¹ImageLoader ç¤ºä¾‹ æ”¹é€ ã€‚è¯·çœ‹æ”¹é€ åŽçš„ ImageLoader 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104//å¢žåŠ äº† Builder é…ç½®ç±»/** * &lt;pre&gt; * author : devyk on 2019-09-01 19:03 * blog : https://juejin.im/user/578259398ac2470061f3a3fb/posts * github : https://github.com/yangkun19921001 * mailbox : yang1001yk@gmail.com * desc : This is ImageLoaderConfig * &lt;/pre&gt; */public class ImageLoaderConfig &#123; /** * å›¾ç‰‡ç¼“å­˜å¯¹è±¡ */ public IImageCache imageCache = new MemoryCache(); /** * å…è®¸æœ€å¤§çº¿ç¨‹æ•°é‡ */ public int threadCount = -1; /** * å¤±è´¥æ˜¾ç¤ºçš„å›¾ç‰‡é…ç½® */ public int errorIcon = -1; /** * å›¾ç‰‡ä¸‹è½½ */ public IDownloader downloader = new HttpURLConnectionDownloaderImp(); private ImageLoaderConfig() &#123; &#125; /** * é…ç½® Builder */ public static class Builder &#123; /** * å›¾ç‰‡ç¼“å­˜å¯¹è±¡ */ IImageCache imageCache = new MemoryCache(); /** * å…è®¸æœ€å¤§çº¿ç¨‹æ•°é‡ */ int threadCount = Runtime.getRuntime().availableProcessors() + 1; /** * å¤±è´¥æ˜¾ç¤ºçš„å›¾ç‰‡é…ç½® */ int errorIcon = -1; /** * å›¾ç‰‡ä¸‹è½½ */ IDownloader downloader = new HttpURLConnectionDownloaderImp(); //è®¾ç½®çº¿ç¨‹æ•°é‡ public Builder setThreadCount(int threadCount) &#123; this.threadCount = threadCount; return this; &#125; //è®¾ç½®ç¼“å­˜ public Builder setCache(IImageCache iImageCache) &#123; this.imageCache = iImageCache; return this; &#125; //å›¾ç‰‡ä¸‹è½½ public Builder setDownLoader(IDownloader iDownloader) &#123; this.downloader = iDownloader; return this; &#125; //è®¾ç½®æ˜¾ç¤ºå¤±è´¥çš„å›¾ç‰‡ public Builder setLoaderErrorIcon(int icon) &#123; this.errorIcon = icon; return this; &#125; private void applyConfig(ImageLoaderConfig config) &#123; config.errorIcon = this.errorIcon; config.imageCache = this.imageCache; config.threadCount = this.threadCount; config.downloader = this.downloader; &#125; /** * æ ¹æ®å·²ç»è®¾ç½®å¥½çš„å±žæ€§åˆ›å»ºé…ç½®å¥½å¯¹è±¡ */ public ImageLoaderConfig create() &#123; ImageLoaderConfig config = new ImageLoaderConfig(); applyConfig(config); return config; &#125; &#125;&#125; é€šè¿‡ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ° ImageLoader éœ€è¦çš„ä¸šåŠ¡ï¼Œéƒ½å¯ä»¥åœ¨ ImageLoaderConfig Builder é…ç½®ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120/** * &lt;pre&gt; * author : devyk on 2019-08-27 00:11 * blog : https://juejin.im/user/578259398ac2470061f3a3fb/posts * github : https://github.com/yangkun19921001 * mailbox : yang1001yk@gmail.com * desc : This is ImageLoader * &lt;/pre&gt; */public class ImageLoader &#123; private String TAG = getClass().getSimpleName(); /** * é»˜è®¤å†…å­˜ç¼“å­˜ */ private IImageCache mCache; /** * å›¾ç‰‡ä¸‹è½½ */ private IDownloader mImageDownloader; /** * çº¿ç¨‹æ±  */ private ExecutorService mExecutorService; /** * ä¸»çº¿ç¨‹ç®¡ç† */ private Handler mHandler = new Handler(Looper.getMainLooper()); /** * æ˜¾ç¤ºå¤±è´¥çš„å›¾ç‰‡ */ private int mErrorIcon ; private static ImageLoader instance; private ImageLoaderConfig imageLoaderConfig; public static ImageLoader getInstance() &#123; if (instance == null) instance = new ImageLoader(); return instance; &#125; private ImageLoader() &#123; &#125; public void init(ImageLoaderConfig imageLoaderConfig) &#123; this.imageLoaderConfig = imageLoaderConfig; checkConfig(); &#125; private void checkConfig() &#123; if (imageLoaderConfig == null) return; if (imageLoaderConfig.imageCache == null) &#123; //å›¾ç‰‡ç¼“å­˜ this.mCache = new MemoryCache(); &#125; else &#123; this.mCache = imageLoaderConfig.imageCache; &#125; if (imageLoaderConfig.threadCount != -1) &#123; //çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ•°æ®é‡ä¸º CPU çš„æ•°é‡ this.mExecutorService = Executors.newFixedThreadPool(imageLoaderConfig.threadCount); &#125; if (imageLoaderConfig.errorIcon != -1) this.mErrorIcon = imageLoaderConfig.errorIcon; //å›¾ç‰‡ä¸‹è½½ this.mImageDownloader = imageLoaderConfig.downloader; &#125; /** * åŠ è½½å›¾ç‰‡ */ public void loadImage(final String url, final ImageView imageView) &#123; Bitmap bitmap = mCache.get(url); if (bitmap != null) &#123; imageView.setImageBitmap(bitmap); return; &#125; imageView.setTag(url); //å¦‚æžœå†…å­˜ç¼“å­˜ä¸­æ²¡æœ‰å›¾ç‰‡ï¼Œå°±å¼€å¯ç½‘ç»œè¯·æ±‚åŽ»ä¸‹è½½ mExecutorService.submit(new Runnable() &#123; @Override public void run() &#123; Bitmap imager = mImageDownloader.downLoader(url); if (imager == null) return; if (imageView.getTag().equals(url)) &#123; displayImage(imager, imageView); &#125; mCache.put(url, imager); &#125; &#125;); &#125; /** * æ˜¾ç¤ºå›¾ç‰‡ * * @param downBitmap * @param imageView */ private void displayImage(final Bitmap downBitmap, final ImageView imageView) &#123; mHandler.post(new Runnable() &#123; @Override public void run() &#123; Log.i(TAG, "ä¸‹è½½å›¾ç‰‡"); imageView.setImageBitmap(downBitmap); &#125; &#125;); &#125;&#125; ä½¿ç”¨ï¼š 123456789101112/** * åˆå§‹åŒ–é…ç½® */public void config() &#123; ImageLoaderConfig config = new ImageLoaderConfig.Builder() .setCache(new DoubleCache(getApplicationContext())) .setLoaderErrorIcon(R.drawable.ic_launcher_background) .setThreadCount(10) .setDownLoader(new HttpURLConnectionDownloaderImp()) .create(); ImageLoader.getInstance().init(config);&#125; é€šè¿‡é…ç½®ä¹‹åŽå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œå„ç§ setter å‡½æ•°ä¸ä¼šå†ç”¨æˆ·è°ƒç”¨ ImageLoader æ–¹æ³•æ—¶å‡ºçŽ°åœ¨è§†é‡Žä¸­ï¼Œå®ƒå·²ç»è¢«éš”ç¦»åˆ°äº† Builder æ¨¡å¼ä¸­ã€‚æ¸…æ™°ã€ç®€å•çš„ API ä¹Ÿæ˜¯ä¸€ä¸ªå¼€æºåº“å¿…é¡»è¦ä¿è¯çš„åœ°æ–¹ã€‚ æ€»ç»“Builder æ¨¡å¼åœ¨ Android æºç ï¼Œå¼€æºåº“ï¼ˆOkhttpâ€¦ï¼‰ç­‰å¸¸ç”¨ï¼Œå°†é…ç½®çš„æž„å»ºå’Œè¡¨ç¤ºåˆ†ç¦»å¼€æ¥ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å°†é…ç½®ä»Žç›®æ ‡ç±»ä¸­éš”ç¦»å‡ºæ¥ï¼Œé¿å…è¿‡å¤šçš„ setter,Builder æ¨¡å¼æ¯”è¾ƒå¸¸è§çš„å®žçŽ°å½¢å¼å°±æ˜¯é“¾å¼è°ƒç”¨ï¼Œè¿™æ ·ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ï¼Œæ˜“æ‡‚ã€‚ ä¼˜ç‚¹ï¼š è‰¯å¥½çš„å°è£…æ€§ï¼Œä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥æ˜¯å®¢æœç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆç»†èŠ‚ã€‚ ç‹¬ç«‹ï¼Œæ˜“æ‰©å±•ã€‚ ç¼ºç‚¹ï¼š ä¼šäº§ç”Ÿå¤šä½™çš„ Builder å¯¹è±¡ï¼Œæ¶ˆè€—å†…å­˜ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å»ºé€ è€…æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¸€ä¹‹å•åˆ—æ¨¡å¼]]></title>
    <url>%2Fposts%2Fed2ac199.html</url>
    <content type="text"><![CDATA[é€šè¿‡ç†è®º,ä»£ç ç¤ºä¾‹,Androidæºç æ¥å­¦ä¹ å•åˆ—æ¨¡å¼ ä»‹ç»å•ä¾‹æ¨¡å¼æ˜¯åº”ç”¨æœ€ä¸ºå¹¿æ³›çš„æ¨¡å¼ä¹‹ä¸€ï¼Œä¹Ÿå¯èƒ½æ˜¯å¾ˆå¤šå…¥é—¨æˆ–åˆçº§å·¥ç¨‹å¸ˆå”¯ä¸€ä¼šä½¿ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹å§ï¼Œåœ¨åº”ç”¨è¿™ä¸ªæ¨¡å¼æ—¶ï¼Œå•ä¾‹å¯¹è±¡çš„ç±»å¿…é¡»ä¿è¯åªæœ‰ä¸€ä¸ªå®žä¾‹å­˜åœ¨ã€‚è®¸å¤šæ—¶å€™æ•´ä¸ªç³»ç»Ÿåªéœ€è¦æ‹¥æœ‰ä¸€ä¸ªå®žä¾‹ç±»ã€‚æœ‰åˆ©äºŽæˆ‘ä»¬çš„è°ƒç”¨ï¼Œé¿å…ä¸€ä¸ªç›¸åŒçš„ç±»é‡å¤åˆ›å»ºå®žä¾‹ï¼Œæ¯”å¦‚ä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œå›¾ç‰‡è¯·æ±‚/ä¸‹è½½ï¼Œæ•°æ®åº“æ“ä½œç­‰ï¼Œå¦‚æžœé¢‘ç¹åˆ›å»ºåŒä¸€ä¸ªç›¸åŒå¯¹è±¡çš„è¯ï¼Œå¾ˆæ¶ˆè€—èµ„æºï¼Œå› æ­¤ï¼Œæ²¡æœ‰ç†ç”±è®©å®ƒä»¬æž„é€ å¤šä¸ªå®žä¾‹ã€‚å…¨å±€éƒ½éœ€è¦ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼Œé¿å…é‡å¤åˆ›å»ºï¼Œå°±å¯ä»¥ç”¨å•ä¾‹ï¼Œè¿™å°±æ˜¯å•ä¾‹ä½¿ç”¨åœºæ™¯ã€‚ å®šä¹‰ç¡®ä¿æŸä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®žä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®žä¾‹ã€‚ ä½¿ç”¨åœºæ™¯åº”ç”¨ä¸­é‡å¤ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼Œä¸ºäº†é¿å…å¤šæ¬¡åˆ›å»ºäº§ç”Ÿçš„èµ„æºæ¶ˆè€—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨å•ä¾‹è®¾è®¡æ¨¡å¼ã€‚ å•ä¾‹ UML ç±»å›¾ å®žçŽ°å•ä¾‹æ¨¡å¼ä¸»è¦æœ‰å¦‚ä¸‹å‡ ä¸ªå…³é”®ç‚¹: æž„é€ å‡½æ•°ä¸å¯¹å¤–å¼€æ”¾ï¼Œä¸€èˆ¬ä¸º private; é€šè¿‡ä¸€ä¸ªé™æ€æ–¹æ³•æˆ–è€…æžšä¸¾è¿”å›žå•ä¾‹å¯¹è±¡ï¼› ç¡®ä¿å•ä¾‹ç±»çš„å¯¹è±¡æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œå°¤å…¶æ˜¯åœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ï¼› ç¡®ä¿å•ä¾‹ç±»å¯¹è±¡åœ¨ååºåˆ—åŒ–æ—¶ä¸ä¼šè¢«é‡æ–°æž„å»ºå¯¹è±¡ã€‚ å•ä¾‹ç¤ºä¾‹é¥¿æ±‰å¼å•ä¾‹æ¨¡å¼æ˜¯è®¾è®¡æ¨¡å¼ä¸­æ¯”è¾ƒç®€å•çš„ï¼Œåªæœ‰ä¸€ä¸ªå•ä¾‹ç±»ï¼Œæ²¡æœ‰å…¶ä»–å±‚æ¬¡ç»“æž„ä¸ŽæŠ½è±¡ã€‚è¯¥æ¨¡å¼éœ€è¦ç¡®ä¿è¯¥ç±»åªèƒ½ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œé€šå¸¸æ˜¯è¯¥ç±»éœ€è¦æ¶ˆè€—è¾ƒå¤šçš„èµ„æºæˆ–è€…æ²¡æœ‰å¤šä¸ªå®žä¾‹çš„æƒ…å†µã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š 12345678910111213public class DaoManager &#123; /** * é¥¿æ±‰å¼å•ä¾‹ */ private static DaoManager instance = new DaoManager(); private DaoManager()&#123;&#125; public static DaoManager getInstance()&#123; return instance; &#125;&#125; æµ‹è¯• 12345678910111213@Testpublic void test()&#123; String dao = DaoManager.getInstance().toString(); String dao1 = DaoManager.getInstance().toString(); String dao2 = DaoManager.getInstance().toString(); String dao3 = DaoManager.getInstance().toString(); System.out.println(dao); System.out.println(dao1); System.out.println(dao2); System.out.println(dao3);&#125; Output 1234com.devyk.android_dp_code.singleton.DaoManager@28ba21f3com.devyk.android_dp_code.singleton.DaoManager@28ba21f3com.devyk.android_dp_code.singleton.DaoManager@28ba21f3com.devyk.android_dp_code.singleton.DaoManager@28ba21f3 ä»Žä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ° DaoManager ä¸èƒ½é€šè¿‡ new çš„å½¢å¼æž„é€ å¯¹è±¡ï¼Œåªèƒ½é€šè¿‡ getInstance() æ‹¿åˆ°å®žä¾‹ï¼Œè€Œ DaoManager å¯¹è±¡æ˜¯é™æ€çš„ï¼Œé‚£ä¹ˆåœ¨å£°æ˜Žçš„æ—¶å€™å·²ç»åˆå§‹åŒ–äº†ï¼Œè¿™å°±ä¿è¯äº†å¯¹è±¡çš„å”¯ä¸€æ€§ï¼Œä»Žè¾“å…¥ç»“æžœä¸­å‘çŽ°ï¼Œ DaoManager å››æ¬¡è¾“å‡ºçš„åœ°å€éƒ½æ˜¯ä¸€æ ·çš„ã€‚è¿™ä¸ªå®žçŽ°çš„æ ¸å¿ƒåœ¨ä¸Žå°† DaoManager ç±»çš„æž„é€ æ–¹æ³•ç§æœ‰åŒ–ï¼Œä½¿å¾—å¤–éƒ¨ç¨‹åºä¸èƒ½é€šè¿‡æž„é€ æ¥ new å¯¹è±¡ï¼Œåªèƒ½é€šè¿‡ getInstance() æ¥è¿”å›žä¸€ä¸ªå¯¹è±¡ã€‚ æ‡’æ±‰æ¨¡å¼æ‡’æ±‰æ¨¡å¼æ˜¯å£°æ˜Žäº†ä¸€ä¸ªé™æ€å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨ç¬¬ä¸€è°ƒç”¨çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œä¸Šé¢çš„é¥¿æ±‰çº¸åˆ™æ˜¯åœ¨å£°æ˜Žçš„æ—¶å€™å·²ç»åˆå§‹åŒ–äº†ã€‚æ‡’æ±‰å¼çš„å®žçŽ°å¦‚ä¸‹ï¼š 1234567891011121314151617public class DaoManager2 &#123; private static DaoManager2 instance; private DaoManager2()&#123;&#125; /** * ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼ * @return */ public static synchronized DaoManager2 getInstance()&#123; if (null == instance) &#123; instance = new DaoManager2(); &#125; return instance; &#125;&#125; ç»†å¿ƒçš„è¯»è€…å¯èƒ½å·²ç»å‘çŽ°äº†ï¼ŒgetInstance() æ–¹æ³•ä¸­æ·»åŠ äº† synchronized å…³é”®å­—ï¼Œ getInstance æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•ï¼Œä¿è¯äº†åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹å•ä¾‹å¯¹è±¡å”¯ä¸€æ€§ã€‚ç»†æƒ³ä¸‹ï¼Œå¤§å®¶å¯èƒ½ä¼šå‘çŽ°ä¸€ä¸ªé—®é¢˜ï¼Œå³ä½¿ instance å·²ç»è¢«åˆå§‹åŒ–ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿›è¡ŒåŒæ­¥æ£€æŸ¥ï¼Œè¿™æ ·ä¼šæ¶ˆè€—ä¸å¿…è¦çš„èµ„æºï¼Œè¿™ä¹Ÿæ˜¯æ‡’æ±‰å•ä¾‹æ¨¡å¼å­˜åœ¨çš„æœ€å¤§é—®é¢˜ã€‚ æœ€åŽæ€»ç»“ä¸€ä¸‹ï¼Œæ‡’æ±‰å•ä¾‹æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯å•ä¾‹åªæœ‰å†ä½¿ç”¨çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸ŠèŠ‚çº¦äº†èµ„æºï¼›ç¼ºç‚¹æ˜¯ç¬¬ä¸€æ¬¡åŠ è½½æ—¶éœ€è¦è¿›è¡Œåˆå§‹åŒ–ï¼Œååº”ç¨æ…¢ï¼Œæœ€å¤§çš„é—®é¢˜å°±æ˜¯æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™ getInstance éƒ½è¿›è¡ŒåŒæ­¥ï¼Œé€ æˆä¸å¿…è¦çš„å¼€é”€ã€‚è¿™ç§æ¨¡å¼ä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨ã€‚ Double Check Lock å®žçŽ°å•ä¾‹DCL æ–¹å¼å®žçŽ°å•ä¾‹æ¨¡å¼çš„æœ‰ç‚¹æ˜¯æ—¢èƒ½å¤Ÿåœ¨éœ€è¦æ—¶åˆå§‹åŒ–å•ä¾‹ï¼Œåˆèƒ½ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¸”å•ä¾‹å¯¹è±¡åˆå§‹åŒ–åŽè°ƒç”¨ instance ä¸è¿›è¡ŒåŒæ­¥é”ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122public class DaoManager3 &#123; private static DaoManager3 sinstance; private DaoManager3() &#123; &#125; /** * ä¿è¯çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼ * * @return */ public static DaoManager3 getInstance() &#123; if (null == sinstance) &#123; synchronized (DaoManager3.class) &#123; if (null == instance) sinstance = new DaoManager3(); &#125; &#125; return sinstance; &#125;&#125; æœ¬æ®µä»£ç çš„äº®ç‚¹å°±åœ¨äºŽ getInstance æ–¹æ³•ä¸Šï¼Œå¯ä»¥çœ‹åˆ° getInstance æ–¹æ³•å¯¹ instance è¿›è¡Œäº†ä¸¤æ¬¡åˆ¤ç©ºï¼›ç¬¬ä¸€å±‚åˆ¤æ–­ä¸»è¦æ˜¯ä¸ºäº†é¿å…ä¸å¿…è¦çš„åŒæ­¥ï¼Œç¬¬äºŒå±‚çš„åˆ¤æ–­åˆ™æ˜¯ä¸ºäº†åœ¨ null çš„æƒ…å†µä¸‹åˆ›å»ºå®žä¾‹ã€‚æ˜¯ä¸æ˜¯çœ‹èµ·æ¥æœ‰ç‚¹è¿·ç³Šï¼Œä¸‹é¢åœ¨æ¥è§£é‡Šä¸‹ï¼š 1sinstance = new DaoManager3(); è¿™ä¸ªæ­¥éª¤ï¼Œå…¶å®žåœ¨jvmé‡Œé¢çš„æ‰§è¡Œåˆ†ä¸ºä¸‰æ­¥ï¼š åœ¨å †å†…å­˜å¼€è¾Ÿå†…å­˜ç©ºé—´; åœ¨å †å†…å­˜ä¸­å®žä¾‹åŒ– DaoManager3 é‡Œé¢çš„å„ä¸ªå‚æ•°; æŠŠå¯¹è±¡æŒ‡å‘å †å†…å­˜ç©ºé—´; ç”±äºŽåœ¨ JDK 1.5 ä»¥å‰ Java ç¼–è¯‘å™¨å…è®¸å¤„ç†å™¨ä¹±åºæ‰§è¡Œï¼Œä»¥åŠ JMM æ— æ³•ä¿è¯ Cache, å¯„å­˜å™¨ï¼ˆJava å†…å­˜æ¨¡åž‹ï¼‰ä¿è¯æŒ‰ç…§ 1ï¼Œ2ï¼Œ3 çš„é¡ºåºæ‰§è¡Œã€‚æ‰€ä»¥å¯èƒ½åœ¨ 2 è¿˜æ²¡æ‰§è¡Œæ—¶å°±å…ˆæ‰§è¡Œäº† 3ï¼Œå¦‚æžœæ­¤æ—¶å†è¢«åˆ‡æ¢åˆ°çº¿ç¨‹ B ä¸Šï¼Œç”±äºŽæ‰§è¡Œäº† 3ï¼Œsinstance å·²ç»éžç©ºäº†ï¼Œä¼šè¢«ç›´æŽ¥æ‹¿å‡ºæ¥ç”¨ï¼Œè¿™æ ·çš„è¯ï¼Œå°±ä¼šå‡ºçŽ°å¼‚å¸¸ã€‚è€Œä¸”ä¸æ˜“å¤çŽ°ä¸æ˜“è·Ÿè¸ªæ˜¯ä¸€ä¸ªéšè—çš„ BUGã€‚ ä¸è¿‡åœ¨ JDK 1.5 ä¹‹åŽï¼Œå®˜æ–¹ä¹Ÿå‘çŽ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ•…è€Œå…·ä½“åŒ–äº† volatile ï¼Œå³åœ¨ JDK 1.6 ä»¥åŽï¼Œåªè¦å®šä¹‰ä¸º private volatile static DaoManager3 sinstance ; å°±å¯è§£å†³ DCL å¤±æ•ˆé—®é¢˜ã€‚volatile ç¡®ä¿ sinstance æ¯æ¬¡å‡åœ¨ä¸»å†…å­˜ä¸­è¯»å–ï¼Œè¿™æ ·è™½ç„¶ä¼šç‰ºç‰²ä¸€ç‚¹æ•ˆçŽ‡ï¼Œä½†ä¹Ÿæ— ä¼¤å¤§é›…ã€‚ DCL ä¼˜ç‚¹ï¼šèµ„æºåˆ©ç”¨çŽ‡é«˜ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œ getInstance æ—¶å•ä¾‹å¯¹è±¡æ‰ä¼šè¢«å®žä¾‹åŒ–ï¼Œæ•ˆçŽ‡é«˜ã€‚ DCL ç¼ºç‚¹ï¼šç¬¬ä¸€æ¬¡åŠ è½½æ—¶ï¼Œååº”ç¨æ…¢ï¼Œä¹Ÿç”±äºŽ Java å†…å­˜æ¨¡åž‹çš„åŽŸå› å¶å°”ä¼šå¤±è´¥ã€‚åœ¨é«˜å¹¶å‘çŽ¯å¢ƒä¸‹ä¹Ÿæœ‰ä¸€å®šçš„ç¼ºé™·ï¼Œè™½ç„¶å‘ç”Ÿæ¦‚çŽ‡å¾ˆå°ã€‚ DCL æ¨¡å¼æ˜¯ä½¿ç”¨æœ€å¤šçš„æ¨¡å¼ï¼Œå®ƒèƒ½å¤Ÿåœ¨éœ€è¦æ—¶æ‰è¢«å®žä¾‹åŒ–ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹ä¿è¯å•ä¾‹å¯¹è±¡çš„å”¯ä¸€æ€§ï¼Œé™¤éžä½ çš„ä»£ç åœ¨å¹¶å‘åœºæ™¯æ¯”è¾ƒå¤æ‚æˆ–è€…ä½ŽäºŽ JDK 6 ç‰ˆæœ¬ä¸‹ä½¿ç”¨ï¼Œå¦åˆ™ï¼Œè¿™ç§æ–¹å¼ä¸€èˆ¬èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ã€‚ é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼DCL è™½ç„¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³äº†èµ„æºæ¶ˆè€—ã€å¤šä½™çš„åŒæ­¥ã€çº¿ç¨‹å®‰å…¨ç­‰é—®é¢˜ï¼Œä½†æ˜¯ï¼Œå®ƒè¿˜æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹å‡ºçŽ°å¤±æ•ˆçš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜è¢«ç§°ä¸ºåŒé‡æ£€æŸ¥é”å®šå¤±æ•ˆï¼Œåœ¨ã€ŠJava å¹¶å‘ç¼–ç¨‹å®žè·µã€‹ä¸€ä¹¦çš„æœ€åŽè°ˆåˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶æŒ‡å‡ºè¿™ç§ â€œä¼˜åŒ–â€ æ˜¯ä¸‘é™‹çš„ï¼Œä¸èµžæˆä½¿ç”¨ã€‚è€Œå»ºè®®ä½¿ç”¨å¦‚ä¸‹çš„ä»£ç æ›¿ä»£ã€‚ 12345678910111213141516public class DaoManager4 &#123; private DaoManager4()&#123;&#125; public static DaoManager4 getInstance()&#123; return DaoManager4Holder.sInstance; &#125; /** * é™æ€å†…éƒ¨ç±» * */ private static class DaoManager4Holder&#123; private static final DaoManager4 sInstance = new DaoManager4(); &#125;&#125; é‚£ä¹ˆï¼Œé™æ€å†…éƒ¨ç±»åˆæ˜¯å¦‚ä½•å®žçŽ°çº¿ç¨‹å®‰å…¨çš„å‘¢ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸‹ç±»çš„åŠ è½½æ—¶æœºã€‚ ç±»åŠ è½½æ—¶æœºï¼šJAVA è™šæ‹Ÿæœºåœ¨æœ‰ä¸”ä»…æœ‰çš„ 5 ç§åœºæ™¯ä¸‹ä¼šå¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ã€‚ é‡åˆ° newã€getstaticã€setstatic æˆ–è€… invokestatic è¿™4ä¸ªå­—èŠ‚ç æŒ‡ä»¤æ—¶ï¼Œå¯¹åº”çš„ java ä»£ç åœºæ™¯ä¸ºï¼šnew ä¸€ä¸ªå…³é”®å­—æˆ–è€…ä¸€ä¸ªå®žä¾‹åŒ–å¯¹è±¡æ—¶ã€è¯»å–æˆ–è®¾ç½®ä¸€ä¸ªé™æ€å­—æ®µæ—¶ ( final ä¿®é¥°ã€å·²åœ¨ç¼–è¯‘æœŸæŠŠç»“æžœæ”¾å…¥å¸¸é‡æ± çš„é™¤å¤–)ã€è°ƒç”¨ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•æ—¶ã€‚ ä½¿ç”¨ java.lang.reflect åŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨çš„æ—¶å€™ï¼Œå¦‚æžœç±»æ²¡è¿›è¡Œåˆå§‹åŒ–ï¼Œéœ€è¦å…ˆè°ƒç”¨å…¶åˆå§‹åŒ–æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ã€‚ å½“åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå¦‚æžœå…¶çˆ¶ç±»è¿˜æœªè¿›è¡Œåˆå§‹åŒ–ï¼Œä¼šå…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚ å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œç”¨æˆ·éœ€è¦æŒ‡å®šä¸€ä¸ªè¦æ‰§è¡Œçš„ä¸»ç±»(åŒ…å«main()æ–¹æ³•çš„ç±»)ï¼Œè™šæ‹Ÿæœºä¼šå…ˆåˆå§‹åŒ–è¿™ä¸ªç±»ã€‚ å½“ä½¿ç”¨ JDK 1.7 ç­‰åŠ¨æ€è¯­è¨€æ”¯æŒæ—¶ï¼Œå¦‚æžœä¸€ä¸ª java.lang.invoke.MethodHandle å®žä¾‹æœ€åŽçš„è§£æžç»“æžœ REF_getStaticã€REF_putStaticã€REF_invokeStatic çš„æ–¹æ³•å¥æŸ„ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•å¥æŸ„æ‰€å¯¹åº”çš„ç±»æ²¡æœ‰è¿›è¡Œè¿‡åˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶åˆå§‹åŒ–ã€‚ è¿™ 5 ç§æƒ…å†µè¢«ç§°ä¸ºæ˜¯ç±»çš„ä¸»åŠ¨å¼•ç”¨ï¼Œæ³¨æ„ï¼Œè¿™é‡Œã€Šè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­ä½¿ç”¨çš„é™å®šè¯æ˜¯â€æœ‰ä¸”ä»…æœ‰â€ï¼Œé‚£ä¹ˆï¼Œé™¤æ­¤ä¹‹å¤–çš„æ‰€æœ‰å¼•ç”¨ç±»éƒ½ä¸ä¼šå¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œç§°ä¸ºè¢«åŠ¨å¼•ç”¨ã€‚é™æ€å†…éƒ¨ç±»å°±å±žäºŽè¢«åŠ¨å¼•ç”¨çš„è¡Œåˆ—ã€‚ æˆ‘ä»¬å†å›žå¤´çœ‹ä¸‹ getInstance() æ–¹æ³•ï¼Œè°ƒç”¨çš„æ˜¯ DaoManager4Holder.sInstance ï¼Œå–çš„æ˜¯DaoManager4Holder é‡Œçš„ sInstance å¯¹è±¡ï¼Œè·Ÿä¸Šé¢é‚£ä¸ª DCL æ–¹æ³•ä¸åŒçš„æ˜¯ ï¼ŒgetInstance()æ–¹æ³•å¹¶æ²¡æœ‰å¤šæ¬¡åŽ» new å¯¹è±¡ï¼Œæ•…ä¸ç®¡å¤šå°‘ä¸ªçº¿ç¨‹åŽ»è°ƒç”¨ getInstance() æ–¹æ³•ï¼Œå–çš„éƒ½æ˜¯åŒä¸€ä¸ªsInstance å¯¹è±¡ï¼Œè€Œä¸ç”¨åŽ»é‡æ–°åˆ›å»ºã€‚å½“ getInstance() æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒDaoManager4Holder æ‰åœ¨ DaoManager4 çš„è¿è¡Œæ—¶å¸¸é‡æ± é‡Œï¼ŒæŠŠç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æŽ¥å¼•ç”¨ï¼Œè¿™æ—¶é™æ€å¯¹è±¡sInstance ä¹ŸçœŸæ­£è¢«åˆ›å»ºï¼Œç„¶åŽå†è¢« getInstance() æ–¹æ³•è¿”å›žå‡ºåŽ»ï¼Œè¿™ç‚¹åŒé¥¿æ±‰æ¨¡å¼ã€‚é‚£ä¹ˆsInstance åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­åˆæ˜¯å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨çš„å‘¢ï¼Ÿåœ¨ã€Šæ·±å…¥ç†è§£JAVAè™šæ‹Ÿæœºã€‹ä¸­ï¼Œæœ‰è¿™ä¹ˆä¸€å¥è¯: è™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„ () æ–¹æ³•åœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸­è¢«æ­£ç¡®åœ°åŠ é”ã€åŒæ­¥ï¼Œå¦‚æžœå¤šä¸ªçº¿ç¨‹åŒæ—¶åŽ»åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹åŽ»æ‰§è¡Œè¿™ä¸ªç±»çš„ () æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹éƒ½éœ€è¦é˜»å¡žç­‰å¾…ï¼Œç›´åˆ°æ´»åŠ¨çº¿ç¨‹æ‰§è¡Œ () æ–¹æ³•å®Œæ¯•ã€‚å¦‚æžœåœ¨ä¸€ä¸ªç±»çš„ () æ–¹æ³•ä¸­æœ‰è€—æ—¶å¾ˆé•¿çš„æ“ä½œï¼Œå°±å¯èƒ½é€ æˆå¤šä¸ªè¿›ç¨‹é˜»å¡ž (éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…¶ä»–çº¿ç¨‹è™½ç„¶ä¼šè¢«é˜»å¡žï¼Œä½†å¦‚æžœæ‰§è¡Œ () æ–¹æ³•åŽï¼Œå…¶ä»–çº¿ç¨‹å”¤é†’ä¹‹åŽä¸ä¼šå†æ¬¡è¿›å…¥ () æ–¹æ³•ã€‚åŒä¸€ä¸ªåŠ è½½å™¨ä¸‹ï¼Œä¸€ä¸ªç±»åž‹åªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚)ï¼Œåœ¨å®žé™…åº”ç”¨ä¸­ï¼Œè¿™ç§é˜»å¡žå¾€å¾€æ˜¯å¾ˆéšè”½çš„ã€‚ æ•…è€Œï¼Œå¯ä»¥çœ‹å‡º sInstance åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥è¯´é™æ€å†…éƒ¨ç±»å½¢å¼çš„å•ä¾‹å¯ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿèƒ½ä¿è¯å•ä¾‹çš„å”¯ä¸€æ€§ï¼ŒåŒæ—¶ä¹Ÿå»¶è¿Ÿäº†å•ä¾‹çš„å®žä¾‹åŒ–ã€‚ é‚£ä¹ˆï¼Œæ˜¯ä¸æ˜¯å¯ä»¥è¯´é™æ€å†…éƒ¨ç±»å•ä¾‹å°±æ˜¯æœ€å®Œç¾Žçš„å•ä¾‹æ¨¡å¼äº†å‘¢ï¼Ÿå…¶å®žä¸ç„¶ï¼Œé™æ€å†…éƒ¨ç±»ä¹Ÿæœ‰ç€ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œå°±æ˜¯ä¼ å‚çš„é—®é¢˜ï¼Œç”±äºŽæ˜¯é™æ€å†…éƒ¨ç±»çš„å½¢å¼åŽ»åˆ›å»ºå•ä¾‹çš„ï¼Œæ•…å¤–éƒ¨æ— æ³•ä¼ é€’å‚æ•°è¿›åŽ»ï¼Œä¾‹å¦‚ Context è¿™ç§å‚æ•°ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åˆ›å»ºå•ä¾‹æ—¶ï¼Œå¯ä»¥åœ¨é™æ€å†…éƒ¨ç±»ä¸Ž DCL æ¨¡å¼é‡Œè‡ªå·±æ–Ÿé…Œã€‚ æžšä¸¾å•ä¾‹å‰é¢è®²è§£äº†å‡ ä¸ªå•ä¾‹æ¨¡å¼çš„å®žçŽ°æ–¹å¼ï¼Œè¿™å‡ ä¸ªå®žçŽ°æ–¹å¼ä¸æ˜¯ç¨æ˜¾éº»çƒ¦å°±æ˜¯ä¼šåœ¨æŸç§æƒ…å†µä¸‹å‡ºçŽ°é—®é¢˜ï¼Œé‚£ä¹ˆè¿˜æœ‰æ²¡æœ‰æ›´ç®€å•çš„å®žçŽ°æ–¹å¼å‹’ï¼Ÿ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸‹é¢çš„å®žçŽ°æ–¹å¼ã€‚ 12345678public enum DaoManager5 &#123; INSTANCE; public void doSomething()&#123; Log.i("DAO-&gt;","æžšä¸¾å•ä¾‹"); &#125;&#125; æ²¡é”™ï¼Œå°±æ˜¯æžšä¸¾å•ä¾‹ï¼ å†™æ³•ç®€å•ç®€å•æ˜¯æžšä¸¾å•ä¾‹æœ€å¤§çš„ä¼˜ç‚¹ï¼Œæžšä¸¾åœ¨ Java ä¸­ä¸Žæ™®é€šçš„ç±»æ—¶ä¸€æ ·çš„ï¼Œä¸ä»…èƒ½å¤Ÿæ‹¥æœ‰å­—æ®µï¼Œè¿˜èƒ½å¤Ÿæ‹¥æœ‰è‡ªå·±çš„æ–¹æ³•ã€‚æœ€é‡è¦çš„æ˜¯é»˜è®¤æžšä¸¾å®žä¾‹çš„åˆ›å»ºæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”åœ¨ä»»ä½•æƒ…å†µä¸‹å®ƒéƒ½æ˜¯ä¸€ä¸ªå•ä¾‹ã€‚ ä¼˜ç‚¹ï¼šæžšä¸¾æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸”èƒ½é˜²æ­¢é€šè¿‡åå°„å’Œååºåˆ—åŒ–åˆ›å»ºå®žä¾‹ã€‚ ç¼ºç‚¹ï¼šå¯¹ JDK ç‰ˆæœ¬æœ‰é™åˆ¶è¦æ±‚ï¼Œéžæ‡’åŠ è½½ã€‚ ä½¿ç”¨å®¹å™¨å®žçŽ°å•ä¾‹æ¨¡å¼å­¦ä¹ äº†ä¸Šé¢ 5 å¤§å•ä¾‹æ¨¡å¼ï¼Œæœ€åŽåœ¨æ¥ä»‹ç»ä¸€ç§å®¹å™¨å•ä¾‹æ¨¡å¼ï¼Œè¯·çœ‹ä¸‹é¢ä»£ç å®žçŽ°ï¼š 12345678910111213141516171819public class DaoManager6 &#123; /** * å®šä¹‰ä¸€ä¸ªå®¹å™¨ */ private static Map&lt;String,Object&gt; singletonMap = new HashMap&lt;&gt;(); private DaoManager6()&#123;&#125; public static void initDao(String key,Object instance)&#123; if (!singletonMap.containsKey(key))&#123; singletonMap.put(key,instance); &#125; &#125; public static Object getDao(String key)&#123; return singletonMap.get(key); &#125;&#125; åœ¨ç¨‹åºçš„åˆå§‹ï¼Œå¯ä»¥å°†å•ä¾‹ç±»åž‹æ³¨å…¥åˆ°ç»Ÿä¸€ç®¡ç†ç±»ä¸­ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™æ ¹æ® key èŽ·å–å¯¹åº”å•ä¾‹å¯¹è±¡ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨æ—¶å¯ä»¥é€šè¿‡ç»Ÿä¸€çš„æŽ¥å£è¿›è¡ŒèŽ·å–æ“ä½œï¼Œé™ä½Žäº†ç”¨æˆ·çš„ä½¿ç”¨æˆæœ¬ï¼Œä¹Ÿå¯¹ç”¨æˆ·éšè—äº†å…·ä½“å®žçŽ°ï¼Œé™ä½Žäº†è€¦åˆåº¦ã€‚ Android æºç ä¸­å•ä¾‹æ¨¡å¼Android æºç ä¸­æ¶‰åŠäº†å¤§é‡çš„å•ä¾‹æ¨¡å¼ï¼Œè¿™é‡Œå°±æ‹¿è¾ƒä¸ºç†Ÿæ‚‰çš„ context.getSystemService(String name); å®¹å™¨å•ä¾‹æ¨¡å¼ï¼Œä»¥ Context.LAYOUT_INFLATER_SERVICE ä¸¾ä¾‹ã€‚ ä»Ž setContentView å…¥å£ï¼Œå…¨æ–¹ä½åˆ†æž LayoutInflater æ€»ç»“å•ä¾‹æ¨¡å¼åœ¨åº”ç”¨ä¸­æ—¶å±žäºŽä½¿ç”¨é¢‘çŽ‡æœ€é«˜çš„ä¸€ç§è®¾è®¡æ¨¡å¼äº†ï¼Œä½†æ˜¯ç”±äºŽå®¢æˆ·ç«¯é€šå¸¸æ²¡æœ‰é«˜å¹¶å‘çš„æƒ…å†µï¼Œå› æ­¤ï¼Œé€‰æ‹©å“ªç§å®žçŽ°æ–¹å¼å¹¶ä¸ä¼šæœ‰å¤ªå¤§çš„å½±å“ã€‚å½“ç„¶ï¼Œè€ƒè™‘æ•ˆçŽ‡å’Œå¹¶å‘çš„åœºæ™¯è¿˜æ˜¯æŽ¨èå¤§å®¶ä½¿ç”¨ DCL æˆ– é™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ã€‚ æ³¨æ„ï¼šå¦‚æžœå•ä¾‹å¯¹è±¡å¿…é¡»æŒæœ‰å‚æ•°çš„è¯ï¼Œé‚£ä¹ˆæœ€å¥½å»ºè®®ä½¿ç”¨å¼±å¼•ç”¨æ¥æŽ¥æ”¶å‚æ•°ï¼Œå¦‚æžœæ˜¯ Context çº§åˆ«çš„ç±»åž‹ï¼Œå»ºè®®ä½¿ç”¨ context.getApplication() å¦åˆ™å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼; æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œè°¢è°¢ï¼]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å•åˆ—æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡ä»£ç ç¤ºä¾‹æ¥å­¦ä¹ é¢å‘å¯¹è±¡å…­å¤§åŽŸåˆ™]]></title>
    <url>%2Fposts%2F6a4629d8.html</url>
    <content type="text"><![CDATA[åœ¨é˜…è¯» Android ç³»ç»Ÿåº•å±‚æºç æˆ–è€…å¼€æºæ¡†æž¶æºç æ—¶ï¼Œå‘çŽ°å†…éƒ¨å¤§é‡çš„è®¾è®¡æ¨¡å¼ï¼Œå¦‚æžœä½ å¯¹è®¾è®¡æ¨¡å¼ä¸æ‡‚çš„è¯ï¼Œé‚£ä¹ˆé˜…è¯»æºç çœŸçš„æ˜¯å¯¸æ­¥éš¾è¡Œã€‚é‚£ä¹ˆè¿™ç¯‡æ–‡ç« æˆ‘ä»¬å…ˆæ¥å­¦ä¹ é¢å‘å¯¹è±¡çš„å…­å¤§åŽŸåˆ™ï¼Œè®¾è®¡æ¨¡å¼å¤§æ¦‚ 23 ç§ï¼ŒåŽé¢æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥å­¦ä¹ å®ƒã€‚ å•ä¸€èŒè´£åŽŸåˆ™å•ä¸€èŒè´£åŽŸåˆ™çš„è‹±æ–‡åç§°æ˜¯ Single Responsibility Principle ï¼Œç¼©å†™æ˜¯ SRP ã€‚ SRP çš„å®šä¹‰æ˜¯ï¼šå°±ä¸€ä¸ªç±»è€Œè¨€ï¼Œåº”è¯¥ä»…æœ‰ä¸€ä¸ªå¼•èµ·å˜åŒ–çš„åŽŸå› ã€‚ç®€å•çš„æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ªç±»ä¸­åº”è¯¥æ˜¯ä¸€ç»„ç›¸å…³æ€§å¾ˆé«˜çš„å‡½æ•°ã€æ•°æ®çš„å°è£…ã€‚å•ä¸€èŒè´£çš„åˆ’åˆ†ç•Œé™ä¹Ÿå¹¶ä¸æ˜¯é‚£ä¹ˆçš„æ¸…æ™°ï¼Œå¾ˆå¤šæ—¶å€™éƒ½æ˜¯é ä¸ªäººç»éªŒæ¥ç»™å®šç•Œé™ï¼Œå½“ç„¶ï¼Œæœ€å¤§çš„çš„é—®é¢˜å°±æ˜¯å¯¹èŒè´£çš„å®šä¹‰ï¼Œä»€ä¹ˆæ˜¯ç±»çš„èŒè´£ï¼Œä»¥åŠæ€Žä¹ˆåˆ’åˆ†ç±»çš„èŒè´£ã€‚ ä¸‹é¢æˆ‘ä»¬å°±ä»¥ å›¾ç‰‡åŠ è½½åº“ çš„ä¾‹å­ä»£ç æ¥å¯¹ç±»çš„èŒè´£ç®€å•è¯´æ˜Žä¸‹ï¼Œåœ¨è®¾è®¡ä¸€ä¸ªå›¾ç‰‡åŠ è½½åº“ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¤§æ¦‚ç”»ä¸‹ UML ç±»å›¾ï¼Œæœ‰äº† UML å›¾ä¹‹åŽå†™ä»£ç å°±èƒ½æ›´åŠ çš„æ¸…æ™°ã€‚ ä»Žä¸Šé¢ UML ç±»å›¾å¯ä»¥çœ‹å‡º ImageLoader åªè´Ÿè´£åŠ è½½å›¾ç‰‡ï¼ŒMemoryCache å®žçŽ° IImageCache è´Ÿè´£å¾€å†…å­˜ä¸­å­˜/å–ç¼“å­˜ï¼Œåˆ°è¿™é‡Œä¹Ÿè®¸æœ‰çš„åŒå­¦å¯¹å•ä¸€èŒè´£æœ‰äº†ä¸€å®šæ¦‚å¿µäº†ï¼Œç›¸ä¿¡çœ‹å®Œä¸‹é¢çš„ä»£ç ï¼Œä½ å·²ç»å¯¹å•ä¸€èŒè´£æŽŒæ¡çš„å·®ä¸å¤šäº†ï¼Œç›´æŽ¥ä¸Šä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384public class ImageLoader &#123; /** * å†…å­˜ç¼“å­˜ */ private IImageCache mMemoryCache; /** * å›¾ç‰‡ä¸‹è½½ */ private IDownloader mImageDownloader; /** * çº¿ç¨‹æ±  */ private ExecutorService mExecutorService; /** * ä¸»çº¿ç¨‹ç®¡ç† */ private Handler mHandler = new Handler(Looper.getMainLooper()); private static ImageLoader instance; public static ImageLoader getInstance() &#123; if (instance == null) instance = new ImageLoader(); return instance; &#125; public ImageLoader() &#123; //å›¾ç‰‡ç¼“å­˜ this. mMemoryCache = new MemoryCache(); //å›¾ç‰‡ä¸‹è½½ this.mImageDownloader = new HttpURLConnectionDownloaderImp(); //çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ•°æ®é‡ä¸º CPU çš„æ•°é‡ this.mExecutorService = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors()); &#125; /** * åŠ è½½å›¾ç‰‡ */ public void loadImage(final String url, final ImageView imageView) &#123; Bitmap bitmap = mMemoryCache.get(url); if (bitmap != null) &#123; imageView.setImageBitmap(bitmap); return; &#125; imageView.setTag(url); //å¦‚æžœå†…å­˜ç¼“å­˜ä¸­æ²¡æœ‰å›¾ç‰‡ï¼Œå°±å¼€å¯ç½‘ç»œè¯·æ±‚åŽ»ä¸‹è½½ mExecutorService.submit(new Runnable() &#123; @Override public void run() &#123; Bitmap imager = mImageDownloader.downLoader(url); if (imager == null) return; if (imageView.getTag().equals(url)) &#123; displayImage(imager, imageView); &#125; mMemoryCache.put(url,imager); &#125; &#125;); &#125; /** * æ˜¾ç¤ºå›¾ç‰‡ * * @param downBitmap * @param imageView */ private void displayImage(final Bitmap downBitmap, final ImageView imageView) &#123; mHandler.post(new Runnable() &#123; @Override public void run() &#123; imageView.setImageBitmap(downBitmap); &#125; &#125;); &#125;&#125; 123456789101112131415161718192021222324252627282930313233public class MemoryCache implements IImageCache &#123; /** * åˆå§‹åŒ–å†…å­˜ç¼“å­˜ */ private LruCache&lt;String, Bitmap&gt; mMemoryLru; public MemoryCache() &#123; init(); &#125; private void init() &#123; int currentMaxMemory = (int) (Runtime.getRuntime().maxMemory() / 1024); //å†…å­˜ç¼“å­˜çš„å¤§å° int cacheSize = currentMaxMemory / 4; mMemoryLru = new LruCache&lt;String, Bitmap&gt;(cacheSize) &#123; @Override protected int sizeOf(String key, Bitmap value) &#123; return value.getRowBytes() * value.getHeight() / 1024; &#125; &#125;; &#125; @Override public void put(String url, Bitmap bitmap) &#123; mMemoryLru.put(url,bitmap); &#125; @Override public Bitmap get(String url) &#123; return mMemoryLru.get(url); &#125;&#125; é€šè¿‡ä¸Šé¢ä»£ç å¯ä»¥çœ‹å‡º ImageLoader è´Ÿè´£å›¾ç‰‡åŠ è½½çš„é€»è¾‘ï¼Œè€Œ MemoryCache è´Ÿè´£ç¼“å­˜ï¼Œè¿™ 2 ä¸ªç±»èŒè´£åˆ†æ˜Žï¼Œå°±åƒå…¬å¸é‡Œé¢ä¸åŒéƒ¨é—¨å¹²ä¸åŒçš„æ´»ä¸€æ ·ã€‚ä½†æ˜¯ï¼Œå¦‚æžœè¿™ 2 ç±»å†™åœ¨ä¸€èµ·çš„è¯ï¼Œç¼ºç‚¹ä¸€ä¸‹å°±å‡ºæ¥äº†ï¼Œä¸ä»…åŠŸèƒ½èŒè´£ä¸åˆ†æ˜Žï¼Œè€Œä¸”ä»£ç ä¹Ÿæ¯”è¾ƒè‡ƒè‚¿ï¼Œè€¦åˆå¤ªé‡ã€‚ çŽ°åœ¨è™½ç„¶ä»£ç ç»“æž„å˜å¾—æ¸…æ™°ï¼ŒèŒè´£ä¹Ÿåˆ†æ˜Žäº†ï¼Œä½†æ˜¯å¯æ‰©å±•æ€§è¿˜éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥æ…¢æ…¢ä¼˜åŒ–å§ã€‚ å¼€é—­åŽŸåˆ™å¼€é—­åŽŸåˆ™è‹±æ–‡å…¨ç§°æ˜¯ Open Close Principle,ç¼©å†™ OCP ï¼Œå®ƒæ˜¯ Java ä¸–ç•Œé‡Œæœ€åŸºç¡€çš„è®¾è®¡åŽŸåˆ™ï¼Œå®ƒæŒ‡å¯¼æˆ‘ä»¬å¦‚ä½•å»ºç«‹ä¸€ä¸ªç¨³å®šçš„ã€çµæ´»çš„ç³»ç»Ÿã€‚ å¼€é—­åŽŸåˆ™çš„å®šä¹‰æ˜¯ï¼šè½¯ä»¶ä¸­çš„å¯¹è±¡ (ç±»ã€æ¨¡å—ã€å‡½æ•°ç­‰) åº”è¯¥å¯¹äºŽæ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œä½†æ˜¯ï¼Œå¯¹äºŽä¿®æ”¹æ˜¯å°é—­çš„ è¿™å°±æ˜¯å¼€æ”¾-å…³é—­åŽŸåˆ™ã€‚ ä¸Šä¸€å°èŠ‚çš„ ImageLoader èŒè´£å•ä¸€ï¼Œç»“æž„æ¸…æ™°ï¼Œåº”è¯¥ç®—æ˜¯ä¸€ä¸ªä¸é”™çš„å¼€å§‹äº†ï¼Œä½†æ˜¯ Android ä¸­åº”ç”¨å†…å­˜æ˜¯æœ‰é™åˆ¶çš„ï¼Œå½“åº”ç”¨é‡æ–°å¯åŠ¨ï¼Œé‚£ä¹ˆåŽŸæœ‰çš„ç¼“å­˜å°±ä¸åœ¨äº†ã€‚çŽ°åœ¨æˆ‘ä»¬åŠ ä¸Šæœ¬åœ°ç£ç›˜ç¼“å­˜ï¼Œä¸ºäº†éµä»Žå¼€é—­åŽŸåˆ™çš„æ€æƒ³ï¼Œæˆ‘åˆå¯¹ ImageLoader é‡æ–°è®¾è®¡äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263public class ImageLoader &#123; private String TAG = getClass().getSimpleName(); /** * é»˜è®¤å†…å­˜ç¼“å­˜ */ private IImageCache mMemoryCache; /** * çº¿ç¨‹æ±  */ private ExecutorService mExecutorService; /** * ä¸»çº¿ç¨‹ç®¡ç† */ private Handler mHandler = new Handler(Looper.getMainLooper()); private static ImageLoader instance; public static ImageLoader getInstance() &#123; if (instance == null) instance = new ImageLoader(); return instance; &#125; public ImageLoader() &#123; mMemoryCache = new MemoryCache(); //çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ•°æ®é‡ä¸º CPU çš„æ•°é‡ mExecutorService = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors()); &#125; /** * ç”¨æˆ·é…ç½®ç¼“å­˜ç­–ç•¥ * * @param imageCache */ public void setImageCache(IImageCache imageCache) &#123; this.mMemoryCache = imageCache; &#125; /** * åŠ è½½å›¾ç‰‡ */ public void loadImage(final String url, final ImageView imageView) &#123; ..... &#125; /** * æ˜¾ç¤ºå›¾ç‰‡ * * @param downBitmap * @param imageView */ private void displayImage(final Bitmap downBitmap, final ImageView imageView) &#123; ..... &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990//ç£ç›˜ç¼“å­˜public class DiskCache implements IImageCache &#123; private DiskLruCache mDiskLruCache; private static final int MAX_SIZE = 10 * 1024 * 1024;//10MB //IOç¼“å­˜æµå¤§å° private static final int IO_BUFFER_SIZE = 8 * 1024; //ç¼“å­˜ä¸ªæ•° private static final int DISK_CACHE_INDEX = 0; public DiskCache(Context context) &#123; try &#123; File cacheDir = CacheUtils.getDiskCacheDir(context, "bitmapCache"); if (!cacheDir.exists()) &#123; cacheDir.mkdirs(); &#125; mDiskLruCache = DiskLruCache.open(cacheDir, ImageLoaderUtils.getAppVersion(context), 1, MAX_SIZE); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; @Override public void put(String url, Bitmap bitmap) &#123; OutputStream outputStream = null; DiskLruCache.Snapshot snapshot = null; BufferedOutputStream out = null; BufferedInputStream in = null; String key = ImageLoaderUtils.hashKeyForDisk(url); try &#123; snapshot = mDiskLruCache.get(key); if (snapshot != null) &#123; DiskLruCache.Editor editor = mDiskLruCache.edit(key); if (editor != null) &#123; outputStream = editor.newOutputStream(DISK_CACHE_INDEX); InputStream inputStream = ImageLoaderUtils.bitmap2InputStream(bitmap, 50); in = new BufferedInputStream(inputStream, IO_BUFFER_SIZE); out = new BufferedOutputStream(outputStream, IO_BUFFER_SIZE); int b; while ((b = in.read()) != -1) &#123; out.write(b); &#125; editor.commit(); &#125; &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (snapshot != null) &#123; snapshot.close(); &#125; if (out != null) &#123; out.close(); &#125; if (in != null) &#123; in.close(); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125; @Override public Bitmap get(String url) &#123; //é€šè¿‡keyå€¼åœ¨ç¼“å­˜ä¸­æ‰¾åˆ°å¯¹åº”çš„Bitmap Bitmap bitmap = null; String key = ImageLoaderUtils.hashKeyForDisk(url); try &#123; DiskLruCache.Snapshot snapshot = mDiskLruCache.get(key); if (snapshot == null) return null; //å¾—åˆ°æ–‡ä»¶è¾“å…¥æµ InputStream fileInputStream = snapshot.getInputStream(DISK_CACHE_INDEX); if (fileInputStream != null) bitmap = BitmapFactory.decodeStream(fileInputStream); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return bitmap; &#125;&#125; 123456789101112131415161718192021222324252627282930313233343536public class DoubleCache implements IImageCache &#123; private String TAG = getClass().getSimpleName(); /** * å†…å­˜ç¼“å­˜ */ private IImageCache mMemoryCache; /** * ç£ç›˜ç¼“å­˜ */ private IImageCache mDiskCache; public DoubleCache(Context context) &#123; this.mMemoryCache = new MemoryCache(); this.mDiskCache = new DiskCache(context); &#125; @Override public void put(String key, Bitmap bitmap) &#123; mMemoryCache.put(key, bitmap); mDiskCache.put(key, bitmap); &#125; @Override public Bitmap get(String url) &#123; Bitmap bitmap = mMemoryCache.get(url); if (bitmap != null) &#123; Log.i(TAG,"ä½¿ç”¨å†…å­˜ç¼“å­˜"); return bitmap; &#125; Log.i(TAG,"ä½¿ç”¨ç£ç›˜ç¼“å­˜"); return mDiskCache.get(url); &#125;&#125; 123456789101112public interface IImageCache &#123; /** * å­˜å›¾ç‰‡ */ void put(String url, Bitmap bitmap); /** * èŽ·å–å›¾ç‰‡ */ Bitmap get(String url);&#125; IImageCache æŽ¥å£ç®€å•å®šä¹‰äº† å­˜å‚¨/èŽ·å– ä¸¤ä¸ªå‡½æ•°ï¼Œç¼“å­˜çš„ url å°±æ˜¯å›¾ç‰‡ç½‘ç»œåœ°å€ï¼Œå€¼å°±æ˜¯ç¼“å­˜çš„å›¾ç‰‡ï¼Œç»è¿‡è¿™æ¬¡é‡æž„æˆ‘ä»¬æ‰©å±•äº†å†…å­˜/ç£ç›˜ç¼“å­˜ï¼Œç»†å¿ƒçš„åŒå­¦å¯èƒ½æ³¨æ„åˆ°äº†ï¼Œ ImageLoader ç±»ä¸­å¢žåŠ äº†ä¸€ä¸ª setImageCache (IImageCache cache) å‡½æ•°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¯¥å‡½æ•°æ¥è®¾ç½®ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸è¯´çš„ä¾èµ–æ³¨å…¥ã€‚ä¸‹é¢çœ‹çœ‹æ€Žä¹ˆé…ç½®: 1234567891011121314151617public void config() &#123; //ä½¿ç”¨åŒç¼“å­˜ ImageLoader.getInstance().setImageCache(new DoubleCache(getApplicationContext())); //ç”¨æˆ·è‡ªå®šä¹‰ ImageLoader.getInstance().setImageCache(new IImageCache() &#123; @Override public void put(String url, Bitmap bitmap) &#123; &#125; @Override public Bitmap get(String url) &#123; return null; &#125; &#125;); &#125; åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œé€šè¿‡ setImageCache() æ–¹æ³•æ³¨å…¥ä¸åŒçš„ç¼“å­˜å®žçŽ°ï¼Œè¿™æ ·ä¸ä»…èƒ½å¤Ÿä½¿ ImageLoader æ›´ç®€å•ï¼Œå¥å£®ï¼Œä¹Ÿä½¿å¾— ImageLoader çš„å¯æ‰©å±•æ€§ï¼Œçµæ´»æ€§èƒ½é«˜ï¼ŒMemoryCache ã€DiskCache ã€DoubleCache ç¼“å­˜å›¾ç‰‡çš„å…·ä½“å®žçŽ°å®Œå…¨ä¸€æ ·ï¼Œä½†æ˜¯ï¼Œä»–ä»¬çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯éƒ½å®žçŽ°äº† ImageCache æŽ¥å£ï¼Œå¹¶ä¸”é€šè¿‡ setImageCache() æ³¨å…¥åˆ° IImageCache ä¸­ï¼Œè¿™æ ·å°±å®žçŽ°äº†åƒå˜ä¸‡åŒ–çš„ç¼“å­˜ç­–ç•¥ï¼Œä¸”æ‰©å±•ä¸ä¼šå¯¼è‡´å†…éƒ¨çš„ä¿®æ”¹ï¼Œå“ˆå“ˆï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä¹‹å‰æ‰€è¯´çš„å¼€é—­åŽŸåˆ™ã€‚ é‡Œæ°æ›¿æ¢åŽŸåˆ™é‡Œæ°æ›¿æ¢åŽŸåˆ™è‹±æ–‡å…¨ç§°æ˜¯ Liskov Substitution Principle , ç¼©å†™æ˜¯ LSPã€‚LSP çš„ç¬¬ä¸€ç§å®šä¹‰æ˜¯ï¼šå¦‚æžœå¯¹æ¯ä¸€ä¸ªç±»åž‹ä¸º S çš„å¯¹è±¡ O1, éƒ½æœ‰ç±»åž‹ä¸º T çš„å¯¹è±¡ O2, ä½¿å¾—ä»¥ T å®šä¹‰çš„æ‰€æœ‰ç¨‹åº P åœ¨æ‰€æœ‰çš„å¯¹è±¡ O1éƒ½æ›¿æ¢æˆ O2 æ—¶ï¼Œç¨‹åº P çš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»åž‹ S æ˜¯ç±»åž‹ T çš„å­ç±»åž‹ã€‚ä¸Šé¢è¿™ç§æè¿°ç¡®å®žæœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œæˆ‘ä»¬å†æ¥çœ‹ç¬¬äºŒç§é‡Œæ°æ›¿æ¢åŽŸåˆ™å®šä¹‰ï¼šæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜Žåœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œé¢å‘å¯¹è±¡è¯­è¨€çš„ä¸‰å¤§ç‰¹ç‚¹æ˜¯ ç»§æ‰¿ï¼Œå°è£…ï¼Œå¤šæ€ï¼Œé‡Œæ°æ›¿æ¢åŽŸåˆ™å°±æ˜¯ä¾èµ–äºŽ ç»§æ‰¿ï¼Œå¤šæ€è¿™ä¸¤å¤§ç‰¹æ€§ã€‚é‡Œæ°æ›¿æ¢åŽŸåˆ™é€šä¿—æ¥è¯´çš„è¯å°±æ˜¯ï¼Œåªè¦çˆ¶ç±»èƒ½å‡ºçŽ°çš„åœ°æ–¹å­ç±»å°±å¯ä»¥å‡ºçŽ°ï¼Œè€Œä¸”æ›¿æ¢ä¸ºå­ç±»ä¹Ÿä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯æˆ–å¼‚å¸¸ï¼Œä½¿ç”¨è€…å¯èƒ½æ ¹æœ¬ä¸ç”¨çŸ¥é“æ˜¯çˆ¶ç±»è¿˜æ˜¯å­ç±»ï¼Œä½†æ˜¯åè¿‡æ¥å°±ä¸è¡Œäº†ï¼Œæœ‰å­ç±»å‡ºçŽ°çš„åœ°æ–¹ï¼Œçˆ¶ç±»å°±ä¸ä¸€å®šèƒ½é€‚åº”ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œå…¶å®žæœ€ç»ˆæ€»ç»“å°±ä¸¤ä¸ªå­—ï¼šæŠ½è±¡ã€‚ ä¸ºäº†æˆ‘ä»¬èƒ½å¤Ÿæ·±å…¥ç†è§£ç›´æŽ¥çœ‹ä¸‹é¢ä»£ç ç¤ºä¾‹å§: â€‹ 123456789101112131415161718192021222324//æ¡†å£ç±»public class Window&#123; public void show(View view)&#123; view.draw(); &#125;&#125;//å»ºç«‹è§†å›¾å¯¹è±¡ï¼Œæµ‹é‡è§†å›¾çš„å®½é«˜ä¸ºå…¬ç”¨ä»£ç ï¼Œç»˜åˆ¶å®žçŽ°äº¤ç»™å…·ä½“çš„å­ç±»pubic abstract class View&#123; public abstract void draw(); public vid measure(int width,int height)&#123; //æµ‹é‡è§†å›¾å¤§å° &#125;&#125;public class ImageView extends View&#123; draw&#123; //ç»˜åˆ¶å›¾ç‰‡ &#125;&#125;... extends View&#123; ...&#125; ä¸Šè¿°ç¤ºä¾‹ä»£ç ä¸­ï¼Œ Window ä¾èµ–äºŽ View , è€Œ View å®šä¹‰äº†ä¸€ä¸ªè§†å›¾æŠ½è±¡ï¼Œ measure æ˜¯å„ä¸ªå­ç±»å…±äº«çš„æ–¹æ³•ï¼Œå­ç±»é€šè¿‡é‡å†™ View çš„draw æ–¹æ³•å®žçŽ°å…·æœ‰å„è‡ªç‰¹è‰²çš„åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œï¼Œè¿™ä¸ªåŠŸèƒ½å°±æ˜¯ç»˜åˆ¶è‡ªèº«çš„å†…å®¹ï¼Œåœ¨ä»»ä½•ç»§æ‰¿ View ç±»çš„å­ç±»éƒ½å¯ä»¥ä¼ é€’ç»™ show å‡½æ•°ï¼Œè¿™å°±æ˜¯æ‰€è¯´çš„é‡Œæ°æ›¿æ¢ã€‚ é‡Œæ°æ›¿æ¢åŽŸåˆ™çš„æ ¸å¿ƒåŽŸç†æ˜¯æŠ½è±¡ï¼ŒæŠ½è±¡åˆä¾èµ–äºŽç»§æ‰¿è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨ OOP å½“ä¸­ï¼Œç»§æ‰¿çš„ä¼˜ç¼ºç‚¹éƒ½ç›¸å½“æ˜Žæ˜¾ï¼Œä¼˜ç‚¹ï¼š ä»£ç å¤ç”¨ï¼Œå‡å°‘åˆ›å»ºç±»çš„æˆæœ¬ï¼Œæ¯ä¸ªå­ç±»éƒ½æ‹¥æœ‰çˆ¶ç±»çš„æ–¹æ³•å’Œå±žæ€§ï¼› å­ç±»äºŽçˆ¶ç±»åŸºæœ¬ç›¸ä¼¼ï¼Œä½†åˆä¸Žçˆ¶ç±»æœ‰æ‰€åŒºåˆ«ï¼› æé«˜ä»£ç çš„å¯æ‰©å±•æ€§ï¼› ç»§æ‰¿çš„ç¼ºç‚¹ï¼š ç»§æ‰¿æ˜¯ä¾µå…¥æ€§çš„ï¼Œåªè¦ç»§æ‰¿å°±å¿…é¡»æ‹¥æœ‰çˆ¶ç±»çš„æ‰€æœ‰å±žæ€§å’Œæ–¹æ³•ï¼› å¯èƒ½é€ æˆå­ç±»ä»£ç å†—ä½™ï¼Œçµæ´»æ€§é™ä½Žï¼Œå› ä¸ºå­ç±»å¿…é¡»æ‹¥æœ‰çˆ¶ç±»çš„å±žæ€§å’Œæ–¹æ³•ã€‚ äº‹åŠ¡éƒ½æ˜¯éƒ½åˆ©å’Œå¼Šï¼Œé¡»åˆç†åˆ©ç”¨ã€‚ ç»§ç»­æ‹¿ä¸Šé¢çš„ ImageLoader ç¼“å­˜ç­–ç•¥æ¥è¯´æ˜Žé‡Œæ°æ›¿æ¢åŽŸåˆ™ï¼Œç”¨æˆ·åªéœ€è¦æŒ‡å®šå…·ä½“çš„ç¼“å­˜å¯¹è±¡å°±å¯ä»¥é€šè¿‡ ImageCache çš„ setImageCache() å‡½æ•°å°±å¯ä»¥æ›¿æ¢ ImageLoader çš„ç¼“å­˜ç­–ç•¥ï¼Œè¿™å°±ä½¿å¾— ImageLoader çš„ç¼“å­˜ç³»ç»Ÿæœ‰äº†æ— é™çš„å¯èƒ½æ€§ï¼Œä¹Ÿä¿è¯äº†å¯æ‰©å±•æ€§ã€‚ å¼€é—­å’Œé‡Œæ°å¾€å¾€æ˜¯ç”Ÿä¸–ç›¸ä¾ï¼Œä¸ç¦»ä¸å¼ƒï¼Œé€šè¿‡é‡Œæ°æ›¿æ¢æ¥è¾¾åˆ°ç¨‹åºçš„æ‰©å±•ï¼Œå¯¹ä¿®æ”¹çš„å…³é—­æ•ˆæžœã€‚ç„¶è€Œï¼Œè¿™ä¸¤ä¸ªåŽŸåˆ™éƒ½åŒæ—¶å¼ºè°ƒäº†ä¸€ä¸ª OOP çš„é‡è¦æ€§ - æŠ½è±¡ï¼Œå› æ­¤ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿ç”¨æŠ½è±¡æ˜¯èµ°å‘ä»£ç ä¼˜åŒ–çš„é‡è¦ä¸€æ­¥ã€‚ ä¾èµ–å€’ç½®åŽŸåˆ™ä¾èµ–å€’ç½®åŽŸåˆ™è‹±æ–‡å…¨ç§°æ˜¯ Dependence Inversion Principle, ç®€å†™ DIP ã€‚ä¾èµ–å€’ç½®åŽŸåˆ™æŒ‡ä»£äº†ä¸€ç§ç‰¹å®šçš„è§£è€¦å½¢å¼ï¼Œä½¿å¾—é«˜å±‚æ¬¡çš„æ¨¡å—ä¸ä¾èµ–äºŽåº•å±‚æ¬¡æ¨¡å—çš„å®žçŽ°ç»†èŠ‚çš„ç›®çš„ï¼Œä¾èµ–æ¨¡å—è¢«é¢ å€’äº†ã€‚è¿™ä¸ªæ¦‚å¿µæœ‰ç‚¹ä¸å¥½ç†è§£ï¼Œè¿™åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€å‹’ï¼Ÿ ä¾èµ–å€’ç½®æœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–åº•å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–èµ·æŠ½è±¡ï¼› æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼› ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ï¼› åœ¨ Java è¯­è¨€ä¸­ï¼ŒæŠ½è±¡å°±æ˜¯æŽ¥å£æˆ–æŠ½è±¡ç±»ï¼Œä¸¤è€…éƒ½æ˜¯ä¸èƒ½ç›´æŽ¥è¢«å®žä¾‹åŒ–çš„ï¼›ç»†èŠ‚å°±æ˜¯å®žçŽ°ç±»ï¼Œå…¶ç‰¹ç‚¹å°±æ˜¯å¯ä»¥ç›´æŽ¥å®žä¾‹åŒ–ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŠ ä¸Šä¸€ä¸ª new å…³é”®å­—äº§ç”Ÿä¸€ä¸ªå¯¹è±¡ã€‚é«˜å±‚æ¨¡å—å°±æ˜¯è°ƒç”¨ç«¯ï¼Œåº•å±‚æ¨¡å—å°±æ˜¯å…·ä½“å®žçŽ°ç±»ã€‚ä¾èµ–å€’ç½®åŽŸåˆ™åœ¨ Java è¯­è¨€ä¸­çš„è¡¨çŽ°å°±æ˜¯: æ¨¡å—é—´çš„ä¾èµ–é€šè¿‡æŠ½è±¡å‘ç”Ÿï¼Œå®žçŽ°ç±»ä¹‹é—´ä¸å‘ç”Ÿç›´æŽ¥çš„ä¾èµ–å…³ç³»ï¼Œå…¶ä¾èµ–å…³ç³»æ˜¯é€šè¿‡æŽ¥å£æˆ–æŠ½è±¡ç±»äº§ç”Ÿçš„ ï¼Œè¿™åˆæ˜¯ä¸€ä¸ªå°†ç†è®ºæŠ½è±¡åŒ–çš„å®žä¾‹ï¼Œå…¶å®žä¸€å¥è¯å¯ä»¥æ¦‚æ‹¬ï¼šé¢å‘æŽ¥å£ç¼–ç¨‹ï¼Œæˆ–è€…è¯´æ˜¯é¢å‘æŠ½è±¡ç¼–ç¨‹ï¼Œé¢å‘æŽ¥å£ç¼–ç¨‹æ˜¯é¢å‘å¯¹è±¡ç²¾é«“ä¹‹ä¸€ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢ä¸¤èŠ‚å¼ºè°ƒçš„æŠ½è±¡ã€‚ è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä»¥ ImageLoader æ¥è¯´æ˜Žï¼Œå…ˆçœ‹ä¸‹é¢ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class ImageLoader &#123; private String TAG = getClass().getSimpleName(); /** * é»˜è®¤å†…å­˜ç¼“å­˜(ç›´æŽ¥ä¾èµ–äºŽç»†èŠ‚ï¼Œè€Œä¸æ˜¯æŠ½è±¡) */ private MemoryCache mMemoryCache; /** * çº¿ç¨‹æ±  */ private ExecutorService mExecutorService; /** * ä¸»çº¿ç¨‹ç®¡ç† */ private Handler mHandler = new Handler(Looper.getMainLooper()); private static ImageLoader instance; public static ImageLoader getInstance() &#123; if (instance == null) instance = new ImageLoader(); return instance; &#125; public ImageLoader() &#123; mMemoryCache = new MemoryCache(); //çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ•°æ®é‡ä¸º CPU çš„æ•°é‡ mExecutorService = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors()); &#125; /** * ç”¨æˆ·é…ç½®ç¼“å­˜ç­–ç•¥ * * @param imageCache */ public void setImageCache(MemoryCache imageCache) &#123; this.mMemoryCache = imageCache; &#125;...&#125; ä¸Šé¢ä»£ç  ImageLoader ç›´æŽ¥ä¾èµ–äºŽç»†èŠ‚ MemoryCache ï¼Œå¦‚æžœæ¡†æž¶å‡çº§éœ€æœ‰å¤šçº§ç¼“å­˜ä¹Ÿå°±æ˜¯å†…å­˜ + SD å¡ç¼“å­˜ç­–ç•¥ï¼Œé‚£ä¹ˆå°±åˆéœ€è¦æ”¹ ImageLoader ä¸­çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class ImageLoader &#123; private String TAG = getClass().getSimpleName(); /** * é»˜è®¤å†…å­˜ç¼“å­˜(ç›´æŽ¥ä¾èµ–äºŽç»†èŠ‚ï¼Œè€Œä¸æ˜¯æŠ½è±¡) */ private DoubleCache mMemoryCache; /** * çº¿ç¨‹æ±  */ private ExecutorService mExecutorService; /** * ä¸»çº¿ç¨‹ç®¡ç† */ private Handler mHandler = new Handler(Looper.getMainLooper()); private static ImageLoader instance; public static ImageLoader getInstance() &#123; if (instance == null) instance = new ImageLoader(); return instance; &#125; public ImageLoader() &#123; mMemoryCache = new DoubleCache(); //çº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ•°æ®é‡ä¸º CPU çš„æ•°é‡ mExecutorService = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors()); &#125; /** * ç”¨æˆ·é…ç½®ç¼“å­˜ç­–ç•¥ * * @param imageCache */ public void setImageCache(DoubleCache imageCache) &#123; this.mMemoryCache = imageCache; &#125;...&#125; åœ¨ ImageLoader ä¸­æˆ‘ä»¬æŠŠé»˜è®¤å†…å­˜ç¼“å­˜æ”¹æˆäº†åŒç¼“å­˜ï¼Œè¿™æ ·ä¸ä»…è¿èƒŒäº†æ²¡æœ‰å¼€é—­åŽŸåˆ™ï¼Œä¹Ÿæ²¡æœ‰ä¾èµ–äºŽæŠ½è±¡ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»£ç æ‰æ˜¯æ­£ç¡®çš„ï¼š 1234567891011121314151617181920212223242526272829public class ImageLoader &#123; private String TAG = getClass().getSimpleName(); /** * é»˜è®¤å†…å­˜ç¼“å­˜ é»˜è®¤ä¾èµ–äºŽæŠ½è±¡ */ private IImageCache mMemoryCache; private static ImageLoader instance; public static ImageLoader getInstance() &#123; if (instance == null) instance = new ImageLoader(); return instance; &#125; public ImageLoader() &#123; ... &#125; /** * ç”¨æˆ·é…ç½®ç¼“å­˜ç­–ç•¥ æ³¨å…¥æŠ½è±¡ç±» * * @param imageCache */ public void setImageCache(IImageCache imageCache) &#123; this.mMemoryCache = imageCache; &#125;&#125; åœ¨è¿™é‡Œå®žçŽ°ç±»æ²¡æœ‰å‘ç”Ÿç›´æŽ¥çš„ä¾èµ–ï¼Œè€Œæ˜¯é€šè¿‡æŠ½è±¡å‘ç”Ÿçš„ä¾èµ–ã€‚æ»¡è¶³äº†ä¾èµ–å€’ç½®åŸºæœ¬åŽŸåˆ™ï¼Œæƒ³è¦è®©ç¨‹åºæ›´ä¸ºçµæ´»ï¼Œé‚£ä¹ˆæŠ½è±¡å°±æ˜¯è¿ˆå‡ºçµæ´»çš„ç¬¬ä¸€æ­¥ã€‚ æŽ¥å£éš”ç¦»åŽŸåˆ™æŽ¥å£éš”ç¦»åŽŸåˆ™è‹±æ–‡å…¨ç§°æ˜¯ InterfaceSegregation Principles, ç¼©å†™ ISP ã€‚æŽ¥å£éš”ç¦»åŽŸåˆ™çš„ç›®çš„æ˜¯ç³»ç»Ÿè§£è€¦ï¼Œä»Žè€Œå®¹æ˜“é‡æž„ã€æ›´æ”¹å’Œé‡æ–°éƒ¨ç½²ã€‚è¯´ç™½äº†å°±æ˜¯è®©å®¢æœç«¯ä¾èµ–çš„æŽ¥å£å°½å¯èƒ½åœ°å°ï¼Œè¿™æ ·è¯´å¯èƒ½è¿˜æœ‰ç‚¹æŠ½è±¡ï¼Œè¿˜æ˜¯ä»¥ä¸€ä¸ªç¤ºä¾‹è¯´æ˜Žä¸€ä¸‹ æœªä¼˜åŒ–çš„æŽ¥å£ 12345678910111213141516171819202122232425262728293031323334353637public class DiskCache implements IImageCache &#123; private DiskLruCache mDiskLruCache; private static final int MAX_SIZE = 10 * 1024 * 1024;//10MB //IOç¼“å­˜æµå¤§å° private static final int IO_BUFFER_SIZE = 8 * 1024; //ç¼“å­˜ä¸ªæ•° private static final int DISK_CACHE_INDEX = 0; @Override public void put(String url, Bitmap bitmap) &#123; ..... &#125; &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; if (snapshot != null) &#123; snapshot.close(); &#125; if (out != null) &#123; out.close(); &#125; if (in != null) &#123; in.close(); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; å¯ä»¥çœ‹è§ä¸Šé¢ä¸€æ®µä»£ç è™½ç„¶åŠŸèƒ½è¾¾åˆ°äº†è¦æ±‚ï¼Œä½†æ˜¯å„ç§ tryâ€¦catch åµŒå¥—ï¼Œä¸ç»å½±å“ä»£ç ç¾Žè§‚ï¼Œè€Œä¸”å¯è¯»æ€§å·®ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ Cloaseable è¿™ä¸ªç±»çš„å®žçŽ°å·®ä¸å¤š 160 å¤šä¸ªå®žçŽ°ç±»ï¼Œå¦‚æžœæ¯ä¸ªç±»éƒ½ close é‚£ä¸çš„ç–¯äº†ï¼Œæˆ‘ä»¬ç›´æŽ¥æŠ½å–ä¸€ä¸ª CloseUtils å¦‚ä¸‹ï¼š 123456789101112131415161718public class CloaseUtils &#123; public static void close(Closeable... closeable) &#123; if (closeable != null) &#123; try &#123; if (closeable.length == 1)&#123; closeable[0].close(); return; &#125; for (int i = 0; i &lt; closeable.length; i++) &#123; closeable[i].close(); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; æ”¯æŒåŒæ—¶å…³é—­ä¸€ä¸ªï¼Œæˆ–å¤šä¸ªå®žçŽ°ç±»çš„ closeã€‚ æ”¹é€ ä¹‹åŽçš„ä»£ç ï¼š 123456789101112131415161718192021222324public class DiskCache implements IImageCache &#123; private DiskLruCache mDiskLruCache; private static final int MAX_SIZE = 10 * 1024 * 1024;//10MB //IOç¼“å­˜æµå¤§å° private static final int IO_BUFFER_SIZE = 8 * 1024; //ç¼“å­˜ä¸ªæ•° private static final int DISK_CACHE_INDEX = 0; @Override public void put(String url, Bitmap bitmap) &#123; ..... &#125; &#125; &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; CloaseUtils.close(snapshot,out,in); &#125; &#125;&#125; æ˜¯ä¸æ˜¯æ¸…çˆ½å¤šäº†ï¼Œä¸€è¡Œä»£ç è§£å†³äº†åˆšåˆšå·®ä¸å¤š 10 è¡Œä»£ç çš„é€»è¾‘ã€‚è€Œä¸”è¿™é‡ŒåŸºæœ¬åŽŸç†å°±æ˜¯ä¾èµ–äºŽ Closeable æŠ½è±¡ï¼Œè€Œä¸æ˜¯å…·ä½“å®žçŽ°ç±»ï¼ˆè¿™ä¸å°±æ˜¯æˆ‘ä»¬åˆšåˆšæ‰è¯´äº†çš„ä¾èµ–å€’ç½®åŽŸåˆ™å˜›ï¼‰ï¼Œå¹¶ä¸”å»ºç«‹åœ¨æœ€å°åŒ–ä¾èµ–åŽŸåˆ™çš„åŸºç¡€ä¸Šï¼Œå®ƒåªéœ€è¦çŸ¥é“è¿™ä¸ªå¯¹è±¡æ˜¯å¦å…³é—­ï¼Œå…¶å®ƒä¸€æ¦‚ä¸å…³å¿ƒï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„æŽ¥å£éš”ç¦»åŽŸåˆ™ã€‚ è¿ªç±³ç‰¹åŽŸåˆ™è¿ªç±³ç‰¹åŽŸåˆ™è‹±æ–‡çš„å…¨ç§°ä¸º Law of Demeter , ç¼©å†™æ˜¯ LOD , ä¹Ÿç§°ä¸ºæœ€å°‘çŸ¥è¯†åŽŸåˆ™ã€‚è™½ç„¶åå­—ä¸åŒï¼Œä½†æè¿°çš„æ˜¯åŒä¸€ä¸ªåŽŸåˆ™ï¼šä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„çš„äº†è§£ã€‚é€šä¿—çš„å°†ï¼Œä¸€ä¸ªç±»åº”è¯¥å¯¹è‡ªå·±éœ€è¦è€¦åˆæˆ–è°ƒç”¨çš„ç±»çŸ¥é“çš„æœ€å°‘ï¼Œç±»çš„å†…éƒ¨å¦‚ä½•å®žçŽ°ä¸Žè°ƒç”¨è€…æˆ–è€…ä¾èµ–è€…æ²¡æœ‰å…³ç³»ï¼Œè°ƒç”¨è€…æˆ–è€…ä¾èµ–ç€åªéœ€è¦çŸ¥é“å®ƒéœ€è¦çš„æ–¹æ³•å³å¯ï¼Œå…¶ä»–çš„å¯ä¸€æ¦‚ä¸ç”¨ç®¡ã€‚ç±»ä¸Žç±»ä¹‹é—´å…³ç³»å¯†åˆ‡ï¼Œè€¦åˆåº¦å°±è¶Šå¤§ï¼Œå½“ä¸€ä¸ªç±»å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯¹å¦ä¸€ä¸ªç±»çš„å½±å“ä¹Ÿè¶Šå¤§ã€‚ ä¸‹é¢ä»¥ä¸€ä¸ªç§Ÿæˆ¿ä¾‹å­è¯´æ˜Ž: 123456789101112/**æˆ¿å­*/public class Room &#123; //é¢ç§¯ public float area; //ä»·é’± public float price; public Room(float area,float price)&#123; this.area = area; this.price = price; &#125;&#125; 1234567891011121314/**ä¸­ä»‹*/public class Mediator&#123; List &lt;Room&gt; mRooms = new ArrayList&lt;Room&gt;(); public Mediator()&#123; for(i = 0; i &lt; 5 ; i ++)&#123; mRoom.add(new Room(14 + i,(14 + i) * 150)); &#125; &#125; public List&lt;Room&gt; getAllRooms()&#123; return mRooms; &#125;&#125; 1234567891011121314151617/**ç§Ÿå®¢**/public class Tenant &#123; public void rentRoom(float roomArea,float roomPrice,Mediator mediator)&#123; List&lt;Room&gt; rooms = mediator.getAllRooms(); for(Room room : rooms)&#123; if(isSuitable(roomArea,roomPrice,room))&#123; Log.i(TAG,"ç§Ÿåˆ°æˆ¿å­äº†"); bread; &#125; &#125; &#125; //ç§Ÿé‡‘è¦å°äºŽç­‰äºŽæŒ‡å®šçš„å€¼ï¼Œé¢ç§¯è¦å¤§äºŽç­‰äºŽæŒ‡å®šçš„å€¼ public boolean isSuitable(float roomArea,float roomPrice,Room room)&#123; return room.price &lt;= roomPrice &amp;&amp; room.area &gt;= roomArea; &#125;&#125; ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒTenant ä¸ä»…ä¾èµ–äº† Mediator ç±»ï¼Œè¿˜éœ€è¦é¢‘ç¹å¾—äºŽ Room ç±»æ‰“äº¤é“ã€‚ç§Ÿå®¢åªæ˜¯æ‰¾ä¸€ä¸ªæˆ¿å­è€Œå·²ï¼Œå¦‚æžœæŠŠè¿™äº›åŠŸèƒ½éƒ½æ”¾åœ¨ Tenant ç±»é‡Œé¢ï¼Œé‚£ä¸­ä»‹éƒ½æ²¡æœ‰å­˜åœ¨æ„Ÿäº†å§ï¼Ÿè€¦åˆå¤ªé‡äº†ï¼Œæˆ‘ä»¬åªéœ€è¦è·Ÿä¸­ä»‹é€šä¿¡å°±è¡Œäº†ï¼Œç»§ç»­é‡æž„ä»£ç ï¼› 1234567891011121314151617181920212223//ä¸­ä»‹public class Mediator&#123; List&lt;Room&gt; mRooms = new ArrayList&lt;Room&gt;(); /**æž„é€ æˆ¿å­**/ public Mediator()&#123; for(i = 0; i &lt; 5 ; i ++)&#123; mRoom.add(new Room(14 + i,(14 + i) * 150)); &#125; &#125; public Room rentOut(float area,float price)&#123; for(Room room : mRooms)&#123; if(isSuitable(area,price,room))&#123; return room; &#125; &#125; return null; &#125;public boolean isSuitable(float area,float price ,Room room)&#123; return room.price &lt;= price &amp;&amp; room.area &gt;= area &#125;&#125; 1234567//ç§Ÿå®¢public class Tenant&#123; /**æ˜¯å¦ç§Ÿåˆ°æˆ¿å­äº†*/ public Room rentRoom(float roomArea,float roomPrice,Mediator mediator)&#123; return mediator.rentOut(roomArea,roomPrice); &#125;&#125; æ ¹æ®ä¸Šé¢çš„é‡æž„ä¼˜åŒ–ï¼Œæˆ‘ä»¬å¾—å‡ºç»“æž„ï¼Œç§Ÿå®¢åªéœ€è¦è·Ÿä¸­ä»‹é€šä¿¡ï¼Œä¸»è¦å…³å¿ƒä¸­ä»‹é‚£é‡Œæœ‰æ²¡æœ‰æˆ‘éœ€è¦çš„æˆ¿å­ï¼Œè€Œä¸­ä»‹å‹’å°±åŽ»ä»–çš„èµ„æºåº“é‡Œé¢åŽ»æ‰¾ï¼Œæœ‰æ²¡æœ‰ç§Ÿå®¢éœ€è¦çš„æˆ¿å­ï¼Œæ¯ä¸ªå¯¹è±¡åšçš„äº‹å„¿æ˜Žç¡®ã€‚â€œåªä¸Žç›´æŽ¥æœ‰å…³ç³»çš„è”ç³»â€ è¿™ç®€å•çš„å‡ ä¸ªå­—å°±èƒ½å¤Ÿå°†æˆ‘ä»¬ä»Žå¤æ‚çš„å…³ç³»ç½‘ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œä½¿ç¨‹åºè€¦åˆåº¦æ›´ä½Žï¼Œç¨³å®šæ€§æ›´å¥½ã€‚ æ€»ç»“ä»Žå…­å¤§åŽŸåˆ™ä¸­æˆ‘ä»¬å¾—å‡ºäº†é‡è¦çš„ç»“è®ºï¼Œå°±æ˜¯ä¸€å®šè¦æœ‰æŠ½è±¡çš„æ€ç»´ï¼Œé¢å‘æŠ½è±¡æˆ–é¢å‘æŽ¥å£ç¼–ç¨‹ã€‚åœ¨åº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ€éš¾çš„ä¸æ˜¯å®Œæˆå¼€å‘å·¥ä½œï¼Œè€Œæ˜¯åŽç»­çš„ç»´æŠ¤å’Œè¿­ä»£å·¥ä½œæ˜¯å¦æ‹¥æœ‰å¯å˜æ€§ï¼Œæ‰©å±•æ€§ï¼Œåœ¨ä¸ç ´åç³»ç»Ÿçš„ç¨³å®šæ€§å‰æä¸‹ä¾ç„¶ä¿æŒ äºŒé«˜ä¸€ä½ŽåŽŸåˆ™ï¼ˆé«˜æ‰©å±•ï¼Œé«˜å†…èšï¼Œä½Žè€¦åˆï¼‰ åœ¨ç»åŽ†å¤šä¸ªç‰ˆæœ¬çš„è¿­ä»£é¡¹ç›®ä¾ç„¶ä¿æŒæ¸…æ™°ï¼Œçµæ´»ï¼Œç¨³å®šçš„ç³»ç»Ÿæž¶æž„ã€‚å½“ç„¶è¿™æ˜¯æˆ‘ä»¬ä¸€ä¸ªæ¯”è¾ƒç†æƒ³çš„æƒ…å†µï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å¾€è¿™ä¸ªæ–¹å‘åŽ»å®žçŽ°åŠªåŠ›ï¼Œå°±ç›¸å½“äºŽæŽ¥å£ï¼ˆæƒ³æ³•ï¼‰å‡ºæ¥äº†ï¼Œæˆ‘ä»¬è¦åŽ»å®žçŽ°ï¼ˆæŽ¥å£å®žçŽ°ç±»ï¼‰å®ƒï¼Œéµå¾ªé¢å‘å¯¹è±¡å…­å¤§åŽŸåˆ™å°±æ˜¯æˆ‘ä»¬èµ°å‘çµæ´»è½¯ä»¶ä¹‹è·¯æ‰€è¿ˆå‡ºçš„ç¬¬ä¸€æ­¥ï¼ŒåŠ æ²¹ï¼ ç‰¹åˆ«æ„Ÿè°¢ã€Š Android æºç è®¾è®¡æ¨¡å¼è§£æžä¸Žå®žæˆ˜ ã€‹]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
        <tag>å…­å¤§åŽŸåˆ™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æŽ¨èä¸€æ³¢æœ€è¿‘å­¦ä¹ Gradleçš„é¡¹ç›®]]></title>
    <url>%2Fposts%2F8f5f13d7.html</url>
    <content type="text"><![CDATA[æœ€æ–°æžäº†å¥½ä¹…çš„ Gradleï¼Œè¯´èµ· Gradle è¿™ä¸ªä¸œè¥¿ä¹Ÿå¾ˆå¥‡æ€ªï¼Œæ˜Žæ˜Žåœ¨ gradle æ–‡ä»¶å†…æ˜¯æ”¯æŒå„ç§æˆ‘ä»¬ç†Ÿæ‚‰çš„ä»£ç çš„ï¼Œæ¯”å¦‚ Javaï¼ŒGroovyï¼Œä½†æ˜¯å°±æ˜¯åœ¨é‡Œé¢å†™å‡ ä¸ªåŠŸèƒ½æžå…¶è´¹åŠ²ï¼Œæ€»ä½“è€Œè¨€ï¼Œè¿˜æ˜¯å¯¹å…¶åŽŸç†ç¼ºä¹è®¤è¯†å¯¼è‡´çš„ã€‚ å†è€…ï¼Œæˆ‘ä»¬åœ¨ç ”ç©¶å¾ˆå¤šæŠ€æœ¯æ—¶ï¼ŒåŸºæœ¬éƒ½ç¦»ä¸å¼€ Gradle ç›¸å…³çš„çŸ¥è¯†ï¼Œæ¯”å¦‚ç¼–è¯‘ç›¸å…³ï¼Œçƒ­ä¿®å¤ï¼Œæ’ä»¶åŒ–ï¼Œå¾ˆå¤šæ€§èƒ½ä¼˜åŒ–ç›¸å…³ï¼Œåæ­£ä½ æƒ³å¹²æ¶‰æ•´ä¸ªæ‰“åŒ…æµç¨‹ï¼Œæˆ–è€…åœ¨ç¼–è¯‘æœŸé—´æžç‚¹å°åŠ¨ä½œï¼Œæˆ–å¤šæˆ–å°‘æ˜¯è¦äº†è§£ç›¸å…³çŸ¥è¯†çš„ã€‚ å¥½äº†ï¼Œä¸‹é¢å°±æŽ¨èä¸€äº›å­¦ä¹ èµ„æºï¼ŒåŸºæœ¬ä¸Šè¶³å¤Ÿå¤§å®¶ç³»ç»Ÿæ€§å­¦ä¹ äº†ï¼Œå½“ç„¶å‰ææ˜¯ä½ æ„¿æ„çœ‹å“ˆâ€¦ å®˜æ–¹ç”¨æˆ·æ‰‹å†Œå¦‚æžœè‹±æ–‡è¶³å¤Ÿå¥½çš„è¯ï¼Œå½“ç„¶é¦–é€‰å®˜ç½‘äº†ï¼š https://docs.gradle.org/current/userguide/getting_started.html è€Œä¸”å®˜ç½‘ä¹Ÿæä¾›äº† user guide pdf çš„ä¸‹è½½ï¼š https://docs.gradle.org/current/userguide/userguide.pdf æƒ³ç¦»çº¿çœ‹å¾ˆæ–¹ä¾¿ã€‚ Gradle User Guide ä¸­æ–‡ç‰ˆhttps://github.com/DONGChuan/GradleUserGuide æ²¡é”™ï¼Œæ€»æœ‰å¯çˆ±çš„äººï¼Œä¼šæ„¿æ„ç¿»è¯‘ user guideç„¶åŽåˆ†äº«å‡ºæ¥ï¼Œå½“ç„¶äº†ï¼Œå› ä¸ºæ˜¯ç¿»è¯‘ï¼Œæ‰€ä»¥å†…å®¹å¹¶ä¸æ˜¯æœ€æ–°çš„ï¼Œä¸è¿‡å€’æ˜¯ä¸å½±å“å‰æœŸçš„å­¦ä¹ ï¼Œå¯ä»¥è¾¹æ•²è¾¹å­¦ï¼Œé‡åˆ°æœ‰é—®é¢˜çš„ï¼Œæœä¸€ä¸‹è§£å†³å°±è¡Œäº†ã€‚ é˜…è¯»åœ°å€ï¼š https://dongchuan.gitbooks.io/gradle-user-guide-/ ä¸€ä¸ªä¸é”™çš„å…¥é—¨ç³»åˆ—å¦‚æžœä½ å°±æ˜¯æƒ³å•çº¯çš„å…ˆå…¥ä¸ªé—¨ï¼Œé‚£ä¹ˆå¯ä»¥èŠ±ç‚¹æ—¶é—´çœ‹è¿™ä¸ªç³»åˆ—ï¼š https://www.cnblogs.com/davenkin/p/gradle-learning-1.html å¯¹åº”æºç : https://github.com/davenkin/gradle-learning å¾ˆæ—©çš„æ–‡ç« äº†ï¼Œä¸è¿‡ä¾ç„¶é€‚åˆå…¥é—¨ã€‚ ä¸€ä¸ªéžå¸¸æ£’çš„æ·±å…¥ç³»åˆ—github åœ°å€ï¼š https://github.com/5A59/android-training å½“ç„¶ä¹Ÿå¯ä»¥åœ¨æŽ˜é‡‘ä¸Šçœ‹æ•´ä¸ªç³»åˆ—ï¼š ã€Android ä¿®ç‚¼æ‰‹å†Œã€‘Gradle ç¯‡ â€“ Gradle çš„åŸºæœ¬ä½¿ç”¨ https://juejin.im/post/5cd441f851882554b86d088b æŽŒæ¡ gradle çš„åŸºæœ¬ä½¿ç”¨ äº†è§£ gradle åŠ android gradle plugin äº†è§£ gradle æž„å»ºé˜¶æ®µåŠç”Ÿå‘½å‘¨æœŸå›žè°ƒ æŽŒæ¡ Taskï¼ŒTransform ç­‰æ¦‚å¿µ å­¦ä¼šè‡ªå®šä¹‰ taskï¼Œè‡ªå®šä¹‰ gradle æ’ä»¶ ã€Android ä¿®ç‚¼æ‰‹å†Œã€‘Gradle ç¯‡ â€“ Android Gradle Plugin ä¸»è¦æµç¨‹åˆ†æž https://juejin.im/post/5cd640526fb9a03232199a05 äº†è§£ android gradle plugin çš„æž„å»ºæµç¨‹ äº†è§£ android gradle plugin çš„ä¸»è¦ task çš„å®žçŽ° å­¦ä¼š hook android æž„å»ºæµç¨‹ï¼Œæ·»åŠ è‡ªå·±æƒ³è¦çš„åŠŸèƒ½ ã€Android ä¿®ç‚¼æ‰‹å†Œã€‘Gradle ç¯‡ â€“ Android Gradle Plugin ä¸»è¦ Task åˆ†æž https://juejin.im/post/5ce913735188254e8309290b äº†è§£ android gradle plugin ä¸­å„ä¸ª task ä½œç”¨ äº†è§£ android gradle plugin ä¸­ä¸»è¦ task çš„å®žçŽ° ã€Android ä¿®ç‚¼æ‰‹å†Œã€‘Gradle ç¯‡ â€“ Gradle æºç åˆ†æž https://juejin.im/post/5cf3e4dfe51d454d56535790 äº†è§£ gradle çš„å®žçŽ°åŽŸç† è¿™ç®—çš„ä¸Šæ˜¯å†™çš„éžå¸¸æ·±å…¥è€Œä¸”å®žç”¨çš„ä¸€ä¸ªç³»åˆ—äº†ï¼Œä»Ž åŸºæœ¬ä½¿ç”¨-&gt; å¸¸è§ APIï¼ˆTask,Transformï¼Œæ’ä»¶-&gt; æ‰“åŒ…è¿‡ç¨‹task åˆ†æž-&gt; æ ¸å¿ƒ task æºç åˆ†æž-&gt; gradle æºç åˆ†æž è¶…èµžâ€¦ æœ€åŽï¼Œå…³äºŽä¸€äº›é’ˆå¯¹æ€§çš„çŸ¥è¯†ï¼Œæ¯”å¦‚ä½ å·²ç»å¾ˆæ˜Žç¡®äº†è¦è‡ªå®šä¹‰ä¸€ä¸ª Transform å­ç±»çš„ï¼Œæœç´¢å°±ok äº†ï¼Œwanandroid ä¸Šä¹Ÿæ”¶å½•äº†ä¸€å¤§æ‰¹å¥½æ–‡ã€‚ ä»¥ä¸Šå·²ç»è¶³å¤Ÿå¤§å®¶ç³»ç»Ÿæ€§å­¦ä¹ æ•´ä¸ª Gradle çš„çŸ¥è¯†äº†ï¼Œå›žè§ï¼ è½¬è‡ªé¸¿æ´‹å¤§ç¥žï¼šhttps://mp.weixin.qq.com/s/TVuF8_304DZQ1wbe1vm1ag]]></content>
  </entry>
  <entry>
    <title><![CDATA[é©¬äº‘å¸ä»»æŒ¥æ³ªæ´’çŽ°åœºï¼Œæ ¸å¿ƒè§‚ç‚¹æ€»ç»“ä»–æ‰€æƒ³]]></title>
    <url>%2Fposts%2Fa1768e04.html</url>
    <content type="text"><![CDATA[åŽ»å¹´ï¼Œåœ¨æ•™å¸ˆèŠ‚é‚£å¤©ï¼Œé˜¿é‡Œå·´å·´é›†å›¢åˆ›å§‹äººé©¬äº‘ä»Šå¤©å…¬å¼€ä¿¡å®£å¸ƒï¼šä¸€å¹´åŽçš„é˜¿é‡Œå·´å·´20å‘¨å¹´ä¹‹é™…ï¼Œå³2019å¹´9æœˆ10æ—¥ï¼Œä¹Ÿå°±æ˜¯æ˜¨å¤©ï¼Œä»–å°†ä¸å†æ‹…ä»»é›†å›¢è‘£äº‹å±€ä¸»å¸­ï¼Œå´ç•™ä¸‹å¥å¥è§¦åŠ¨å¿ƒçµçš„è¯ï¼ 1ã€æˆ‘æœ€é—æ†¾çš„é”™è¯¯01å¹´ï¼Œæˆ‘çŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼Œæˆ‘å‘Šè¯‰æˆ‘çš„18ä½å…±åŒåˆ›ä¸šåŒä»ï¼Œä»–ä»¬åªèƒ½åšå°ç»„ç»ç†ï¼Œè€Œæ‰€æœ‰çš„å‰¯æ€»è£éƒ½å¾—ä»Žå¤–é¢è˜è¯·ã€‚ çŽ°åœ¨åå¹´è¿‡åŽ»äº†ï¼Œæˆ‘ä»Žå¤–é¢è˜è¯·çš„äººæ‰éƒ½èµ°äº†ï¼Œè€Œæˆ‘ä¹‹å‰æ›¾æ€€ç–‘è¿‡å…¶èƒ½åŠ›çš„äººéƒ½æˆäº†å‰¯æ€»æˆ–è‘£äº‹ã€‚ æˆ‘ç›¸ä¿¡ä¸¤ä¸ªä¿¡æ¡ï¼šæ€åº¦æ¯”èƒ½åŠ›é‡è¦ï¼Œé€‰æ‹©åŒæ ·ä¹Ÿæ¯”èƒ½åŠ›é‡è¦ï¼ 2ã€ ä¸èƒ½ç»Ÿä¸€äººçš„æ€æƒ³ï¼Œä½†å¯ä»¥ç»Ÿä¸€äººçš„ç›®æ ‡åƒä¸‡ä¸è¦ç›¸ä¿¡ä½ èƒ½ç»Ÿä¸€äººçš„æ€æƒ³ï¼Œé‚£æ˜¯ä¸å¯èƒ½çš„ã€‚ 30%çš„äººæ°¸è¿œä¸å¯èƒ½ç›¸ä¿¡ä½ ï¼Œä¸è¦è®©ä½ çš„åŒäº‹ä¸ºä½ å¹²æ´»ï¼Œè€Œè®©ä»–ä»¬ä¸ºæˆ‘ä»¬çš„å…±åŒç›®æ ‡å¹²æ´»ã€‚ å›¢ç»“åœ¨ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ä¸‹ï¼Œè¦æ¯”å›¢ç»“åœ¨ä¸€ä¸ªäººå‘¨å›´å®¹æ˜“çš„å¤šã€‚ 3ã€ ç»†èŠ‚å¥½çš„äººæ ¼å±€ä¸€èˆ¬éƒ½å·®â‘ æœ‰äººè§‰å¾—æˆ‘ç‰›ï¼Œ6åˆ†é’Ÿè¯´æœäº†å­™æ­£ä¹‰ï¼Œå…¶å®žæ˜¯ä»–è¯´æœäº†æˆ‘ã€‚è§å­™æ­£ä¹‰ä¹‹å‰ï¼Œæˆ‘åœ¨ç¡…è°·è‡³å°‘è¢«æ‹’ç»äº†40æ¬¡ã€‚ â‘¡åšä¼ä¸šèµ¢åœ¨ç»†èŠ‚ï¼Œè¾“åœ¨æ ¼å±€ã€‚ â‘¢æ ¼å±€ï¼Œâ€œæ ¼â€æ˜¯äººæ ¼ï¼Œâ€œå±€â€æ˜¯èƒ¸æ€€ï¼Œç»†èŠ‚å¥½çš„äººæ ¼å±€ä¸€èˆ¬éƒ½å·®ï¼Œæ ¼å±€å¥½çš„äººä»Žæ¥ä¸é‡ç»†èŠ‚ï¼Œä¸¤ä¸ªéƒ½å¹²å¥½ï¼Œé‚£å«å¤ªæœ‰æ‰ï¼ 4ã€ é¢†å¯¼æ¯”å‘˜å·¥å¤šä»€ä¹ˆï¼Ÿé¢†å¯¼æ°¸è¿œä¸è¦è·Ÿä¸‹å±žæ¯”æŠ€èƒ½ï¼Œä¸‹å±žè‚¯å®šæ¯”ä½ å¼ºï¼›å¦‚æžœä¸æ¯”ä½ å¼ºï¼Œè¯´æ˜Žä½ è¯·é”™äººäº†ã€‚ â‘ è¦æ¯”çœ¼å…‰ï¼šæ¯”ä»–çœ‹å¾—è¿œï¼› â‘¡è¦æ¯”èƒ¸æ€€ï¼šé¢†å¯¼çš„èƒ¸æ€€æ˜¯å§”å±ˆæ’‘å¤§çš„ï¼Œè¦èƒ½å®¹äººæ‰€ä¸å®¹ï¼› â‘¢è¦æ¯”å®žåŠ›ï¼šæŠ—å¤±è´¥çš„èƒ½åŠ›æ¯”ä»–å¼ºï¼›ä¸€ä¸ªä¼˜ç§€çš„é¢†å¯¼äººçš„ç´ è´¨å°±æ˜¯çœ¼å…‰ã€èƒ¸æ€€å’Œå®žåŠ›ã€‚ 5ã€ ä¸­å›½å•†äººåƒä¸‡åˆ«åœ¨â€œçº¢é“â€ä¸Šæ··â‘ äººä¸€è¾ˆå­è¦æ˜Žç™½é’±å’Œæƒä¸¤ä¸ªä¸œè¥¿æ˜¯ç»å¯¹ä¸è¦ç¢°åœ¨ä¸€èµ·ï¼Œå½“äº†å®˜æ°¸è¿œä¸è¦æƒ³æœ‰é’±ï¼Œå½“äº†å•†äººåƒä¸‡åˆ«æƒ³æƒï¼› â‘¡é’±å’Œæƒè¿™ä¸¤ä¸ªä¸œè¥¿ç¢°åœ¨ä¸€èµ·å°±æ˜¯ç‚¸è¯å’Œé›·ç®¡ç¢°åœ¨ä¸€èµ·ï¼Œå¿…ç„¶è¦çˆ†ç‚¸ï¼› â‘¢èƒ¡é›ªå²©çš„æ‚²å“€å°±åœ¨äºŽä»–æ˜¯çº¢é¡¶å•†äººï¼› â‘£ä¸­å›½å•†äººåƒä¸‡åˆ«åœ¨â€œçº¢é“â€ä¸Šæ··ã€‚ 6ã€ å¹´è½»äººå¿…é¡»æ€è€ƒçš„4å¤§é—®é¢˜â‘ ä»€ä¹ˆæ˜¯å¤±è´¥ï¼Ÿæ”¾å¼ƒå°±æ˜¯æœ€å¤§çš„å¤±è´¥ã€‚ â‘¡ä»€ä¹ˆå«åšå¼ºï¼Ÿç»åŽ†è®¸å¤šç£¨éš¾ã€å§”å±ˆã€ä¸çˆ½ï¼Œä½ æ‰çŸ¥é“ä»€ä¹ˆå«åšå¼ºã€‚ â‘¢ä½ çš„èŒè´£æ˜¯ä»€ä¹ˆï¼Ÿæ¯”åˆ«äººå¤šå‹¤å¥‹ä¸€ç‚¹ã€å¤šåŠªåŠ›ä¸€ç‚¹ã€å¤šä¸€ç‚¹ç†æƒ³ï¼Œè¿™å°±æ˜¯ä½ çš„èŒè´£ã€‚ â‘£å‚»ç“œç”¨å˜´è®²è¯ï¼Œèªæ˜Žäººç”¨è„‘è¢‹è®²è¯ï¼Œæ™ºè€…ç”¨å¿ƒè®²è¯ã€‚ 7ã€ äººç”Ÿåœ¨ä¸–åœ¨åšäººï¼Œä¸æ˜¯åšäº‹æˆ‘è·Ÿè‡ªå·±è®²æˆ‘ä»¬åˆ°è¿™ä¸ªä¸–ç•Œä¸Šä¸æ˜¯æ¥å·¥ä½œçš„ï¼Œæˆ‘ä»¬æ˜¯æ¥äº«å—äººç”Ÿçš„ï¼Œæˆ‘ä»¬æ˜¯æ¥åšäººä¸æ˜¯åšäº‹ã€‚ å¦‚æžœä¸€è¾ˆå­éƒ½åšäº‹çš„è¯ï¼Œå¿˜äº†åšäººï¼Œå°†æ¥ä¸€å®šä¼šåŽæ‚”ã€‚ ä¸ç®¡äº‹ä¸šå¤šæˆåŠŸã€å¤šä¼Ÿå¤§ã€å¤šäº†ä¸èµ·ï¼Œè®°ä½æˆ‘ä»¬åˆ°è¿™ä¸ªä¸–ç•Œå°±æ˜¯äº«å—ç»åŽ†è¿™ä¸ªäººç”Ÿçš„ä½“éªŒã€‚ å¿™ç€åšäº‹ä¸€å®šä¼šåŽæ‚”ã€‚ 8ã€ é«˜æ‰‹çš„ç«žäº‰è®ºâ‘ ä¸€å®šè¦äº‰å¾—ä½ æ­»æˆ‘æ´»çš„å•†æˆ˜ï¼Œæ˜¯æœ€æ„šè ¢çš„ã€‚ â‘¡çœ¼ç›ä¸­å…¨æ˜¯æ•Œäººï¼Œå¤–é¢å°±å…¨æ˜¯æ•Œäººã€‚ â‘¢ç«žäº‰çš„æ—¶å€™ä¸è¦å¸¦ä»‡æ¨ï¼Œå¸¦ä»‡æ¨ä¸€å®šå¤±è´¥ã€‚ â‘£ç«žäº‰ä¹è¶£å°±åƒä¸‹æ£‹ä¸€æ ·ï¼Œä½ è¾“äº†ï¼Œæˆ‘ä»¬å†æ¥è¿‡ï¼Œä¸¤ä¸ªæ£‹æ‰‹ä¸èƒ½æ‰“æž¶ã€‚ â‘¤çœŸæ­£åšä¼ä¸šæ˜¯æ²¡æœ‰ä»‡äººçš„ï¼Œå¿ƒä¸­æ— æ•Œï¼Œå¤©ä¸‹æ— æ•Œã€‚ 9ã€ åˆ«æŠŠæŠ±æ€¨å½“ä¹ æƒ¯äººæ˜¯é€€åŒ–æœ€ä¸¥é‡çš„åŠ¨ç‰©ã€‚è·Ÿå…½æ¯”äººå¾ˆâ€œå¼±è‚¢â€ï¼Œå’Œç‹—æ¯”äººå¾ˆâ€œé—»ç›²â€ï¼Œä½†äººç±»â€œè¿›åŒ–â€äº†æŠ±æ€¨ã€‚ å¶å°”ä¸ºä¹‹æ— å¤§ç¢ï¼Œä½†å½“æŠ±æ€¨æˆä¹ æƒ¯ï¼Œå°±å¦‚å–æµ·æ°´ï¼Œå–çš„è¶Šå¤šæ¸´å¾—è¶ŠåŽ‰å®³ã€‚ æœ€åŽå‘çŽ°ï¼Œèµ°åœ¨æˆåŠŸè·¯ä¸Šçš„ï¼Œéƒ½æ˜¯äº›ä¸æŠ±æ€¨çš„â€œå‚»å­ä»¬â€ã€‚ ä¸–ç•Œä¸ä¼šè®°å¾—ä½ è¯´äº†ä»€ä¹ˆï¼Œä½†ä¸€å®šä¸ä¼šå¿˜è®°ä½ åšäº†ä»€ä¹ˆï¼ 10ã€ ç»™åˆåˆ›ä¼ä¸šè€…çš„å¿ å‘Šâ‘ å¤§å®¶çœ‹ä¸æ¸…çš„æœºä¼šï¼Œæ‰æ˜¯çœŸæ­£çš„æœºä¼šã€‚ â‘¡è®©å‘˜å·¥ç¬‘ç€å¹²æ´»ã€‚ â‘¢å®¢æˆ·ç¬¬ä¸€ã€å‘˜å·¥ç¬¬äºŒã€è‚¡ä¸œç¬¬ä¸‰ã€‚ â‘£æŠ¢åœ¨å˜åŒ–ä¹‹å‰å…ˆå˜ã€‚ â‘¤å¿˜æŽ‰moneyï¼Œå¿˜æŽ‰èµšé’±ã€‚ â‘¥å°èªæ˜Žä¸å¦‚å‚»åšæŒã€‚ â‘¦å¿ƒæ€å†³å®šå§¿æ€ï¼Œå§¿æ€å†³å®šçŠ¶æ€ã€‚ 11ã€ è°ˆåˆ›ä¸šâ‘ ä¸€ä¸ªå¥½çš„ä¸œè¥¿å¾€å¾€æ˜¯è¯´ä¸æ¸…æ¥šçš„ï¼Œè¯´å¾—æ¸…æ¥šçš„å¾€å¾€ä¸æ˜¯å¥½ä¸œè¥¿ï¼ â‘¡åˆ›ä¸šè¦æ‰¾æœ€åˆé€‚çš„äººï¼Œä¸ä¸€å®šè¦æ‰¾æœ€æˆåŠŸçš„äººã€‚ â‘¢è¿™ä¸–ç•Œæœ€ä¸å¯é çš„ä¸œè¥¿å°±æ˜¯å…³ç³»ã€‚ â‘£å…è´¹æ˜¯ä¸–ç•Œä¸Šæœ€æ˜‚è´µçš„ä¸œè¥¿ã€‚ â‘¤ä»Šå¤©å¾ˆæ®‹é…·ï¼Œæ˜Žå¤©æ›´æ®‹é…·ï¼ŒåŽå¤©å¾ˆç¾Žå¥½ã€‚ 12ã€ â€œå››ä¸â€åˆ›ä¸šæ™ºæ…§â‘ åˆ›ä¸šæœ€æ€•å°±æ˜¯çœ‹ä¸è§ï¼Œçœ‹ä¸èµ·ï¼Œçœ‹ä¸æ‡‚ï¼Œè·Ÿä¸ä¸Šï¼› â‘¡çœ‹ä¸è§å¯¹æ‰‹åœ¨å“ªé‡Œï¼Œçœ‹ä¸èµ·å¯¹æ‰‹ï¼Œçœ‹ä¸æ‡‚å¯¹æ‰‹ä¸ºä»€ä¹ˆå¯ä»¥å˜å¾—é‚£ä¹ˆå¼ºï¼Œç„¶åŽå°±è·Ÿä¸ä¸Šäº†ï¼› â‘¢å³ä½¿å¯¹æ‰‹å¾ˆå¼±å°ï¼Œä¹Ÿä¸€å®šè¦æŠŠå¯¹æ–¹çœ‹çš„å¾ˆå¼ºå¤§ï¼Œå³ä½¿å¯¹æ‰‹å¾ˆå¼ºå¤§ï¼Œä¹Ÿä¸ä¸€å®šè¦æŠŠè‡ªå·±çœ‹çš„å¾ˆå¼±å°ã€‚ 13ã€ å½“ä½ å†³å®šè¦åˆ›ä¸šæ—¶ä¾¿æ„å‘³ç€ï¼š â‘ æ²¡æœ‰äº†ç¨³å®šçš„æ”¶å…¥ï¼›â‘¡æ²¡æœ‰äº†è¯·å‡çš„æƒåˆ©ï¼›â‘¢æ²¡æœ‰äº†å¾—çº¢åŒ…çš„æœºä¼šã€‚ ç„¶è€Œå´æ›´æ„å‘³ç€ï¼š â‘ æ”¶å…¥ä¸å†å—é™åˆ¶ï¼›â‘¡æ—¶é—´è¿ç”¨æ›´æœ‰æ•ˆï¼›â‘¢æ‰‹å¿ƒå‘ä¸‹ä¸æ±‚äººã€‚ æƒ³æ³•è‹¥ä¸åŒï¼Œç»“æžœä¾¿ä¸åŒï¼›é€‰æ‹©ä¸ä¸€æ ·ï¼Œç”Ÿæ´»æ‰å˜æ ·ã€‚ 14ã€è°ˆæœºä¼šå¦‚æžœä¸€ä¸ªæ–¹æ¡ˆæœ‰90%çš„äººè¯´â€œå¥½â€çš„è¯ï¼Œæˆ‘ä¸€å®šè¦æŠŠå®ƒæ‰”åˆ°åžƒåœ¾æ¡¶é‡ŒåŽ»ã€‚ å› ä¸ºè¿™ä¹ˆå¤šäººè¯´å¥½çš„æ–¹æ¡ˆï¼Œå¿…ç„¶æœ‰å¾ˆå¤šäººåœ¨åšäº†ï¼Œæœºä¼šè‚¯å®šä¸ä¼šæ˜¯æˆ‘ä»¬çš„äº†ã€‚]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android_build.gradleé…ç½®è¯¦è§£]]></title>
    <url>%2Fposts%2Faaeab884.html</url>
    <content type="text"><![CDATA[Android Studioæ˜¯é‡‡ç”¨gradleæ¥æž„å»ºé¡¹ç›®çš„ï¼Œgradleæ˜¯åŸºäºŽgroovyè¯­è¨€çš„ï¼Œå¦‚æžœåªæ˜¯ç”¨å®ƒæž„å»ºæ™®é€šAndroidé¡¹ç›®çš„è¯ï¼Œæ˜¯å¯ä»¥ä¸åŽ»å­¦groovyçš„ã€‚å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªAndroidé¡¹ç›®æ—¶ä¼šåŒ…å«ä¸¤ä¸ªAndroid build.gradleé…ç½®è¯¦è§£æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š ä¸€ã€Projectçš„build.gradleæ–‡ä»¶ï¼šå¯¹åº”çš„build.gradleä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031// Top-level build file where you can add configuration options common to all sub-projects/modules.buildscript &#123;//è¿™é‡Œæ˜¯gradleè„šæœ¬æ‰§è¡Œæ‰€éœ€ä¾èµ–ï¼Œåˆ†åˆ«æ˜¯å¯¹åº”çš„mavenåº“å’Œæ’ä»¶ repositories &#123; google()//ä»ŽAndroid Studio3.0åŽæ–°å¢žäº†google()é…ç½®ï¼Œå¯ä»¥å¼•ç”¨googleä¸Šçš„å¼€æºé¡¹ç›® jcenter()//æ˜¯ä¸€ä¸ªç±»ä¼¼äºŽgithubçš„ä»£ç æ‰˜ç®¡ä»“åº“ï¼Œå£°æ˜Žäº†jcenter()é…ç½®ï¼Œå¯ä»¥è½»æ¾å¼•ç”¨ jcenterä¸Šçš„å¼€æºé¡¹ç›® &#125; dependencies &#123; classpath 'com.android.tools.build:gradle:3.0.0'////æ­¤å¤„æ˜¯androidçš„æ’ä»¶gradleï¼Œgradleæ˜¯ä¸€ä¸ªå¼ºå¤§çš„é¡¹ç›®æž„å»ºå·¥å…· // NOTE: Do not place your application dependencies here; they belong // in the individual module build.gradle files &#125;&#125;allprojects &#123;//è¿™é‡Œæ˜¯é¡¹ç›®æœ¬èº«éœ€è¦çš„ä¾èµ–ï¼Œæ¯”å¦‚é¡¹ç›®æ‰€éœ€çš„mavenåº“ repositories &#123; google() jcenter() &#125;&#125;// è¿è¡Œgradle cleanæ—¶ï¼Œæ‰§è¡Œæ­¤å¤„å®šä¹‰çš„taskä»»åŠ¡ã€‚// è¯¥ä»»åŠ¡ç»§æ‰¿è‡ªDeleteï¼Œåˆ é™¤æ ¹ç›®å½•ä¸­çš„buildç›®å½•ã€‚// ç›¸å½“äºŽæ‰§è¡ŒDelete.delete(rootProject.buildDir)ã€‚// gradleä½¿ç”¨groovyè¯­è¨€ï¼Œè°ƒç”¨methodæ—¶å¯ä»¥ä¸ç”¨åŠ ï¼ˆï¼‰ã€‚task clean(type: Delete) &#123; delete rootProject.buildDir&#125; buildscript{}é—­åŒ…é‡Œæ˜¯gradleè„šæœ¬æ‰§è¡Œæ‰€éœ€ä¾èµ–ï¼Œåˆ†åˆ«æ˜¯å¯¹åº”çš„mavenåº“å’Œæ’ä»¶ã€‚ allprojects{}é—­åŒ…é‡Œæ˜¯é¡¹ç›®æœ¬èº«éœ€è¦çš„ä¾èµ–ï¼Œæ¯”å¦‚é¡¹ç›®æ‰€éœ€çš„mavenåº“ã€‚ task clean(type: Delete){}æ˜¯è¿è¡Œgradle cleanæ—¶ï¼Œæ‰§è¡Œæ­¤å¤„å®šä¹‰çš„taskä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡ç»§æ‰¿è‡ªDeleteï¼Œåˆ é™¤æ ¹ç›®å½•ä¸­çš„buildç›®å½•ã€‚å…¶ä¸­buildscriptåŒ…å«repositoriesé—­åŒ…å’Œdependenciesé—­åŒ…ã€‚ repositories{}é—­åŒ…ï¼šé…ç½®è¿œç¨‹ä»“åº“è¯¥é—­åŒ…ä¸­å£°æ˜Žäº†jcenter()å’Œgoogle()çš„é…ç½®ï¼Œå…¶ä¸­jcenteræ˜¯ä¸€ä¸ªä»£ç æ‰˜ç®¡ä»“åº“ï¼Œä¸Šé¢æ‰˜ç®¡äº†å¾ˆå¤šAndroidå¼€æºé¡¹ç›®ï¼Œåœ¨è¿™é‡Œé…ç½®äº†jcenteråŽæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­æ–¹ä¾¿å¼•ç”¨jcenterä¸Šçš„å¼€æºé¡¹ç›®ï¼Œä»ŽAndroid Studio3.0åŽæ–°å¢žäº†google()é…ç½®ï¼Œå¯ä»¥å¼•ç”¨googleä¸Šçš„å¼€æºé¡¹ç›®ã€‚ dependencies{}é—­åŒ…ï¼šé…ç½®æž„å»ºå·¥å…·è¯¥é—­åŒ…ä½¿ç”¨classpathå£°æ˜Žäº†ä¸€ä¸ªGradleæ’ä»¶ï¼Œç”±äºŽGradleå¹¶ä¸åªæ˜¯ç”¨æ¥æž„å»ºAndroidé¡¹ç›®ï¼Œå› æ­¤æ­¤å¤„å¼•å…¥ç›¸å…³æ’ä»¶æ¥æž„å»ºAndroidé¡¹ç›®ï¼Œå…¶ä¸­â€™3.0.0â€™ä¸ºè¯¥æ’ä»¶çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥æ ¹æ®æœ€æ–°çš„ç‰ˆæœ¬å·æ¥è°ƒæ•´ã€‚ äºŒã€Moduleçš„build.gradleæ–‡ä»¶ï¼šä»Žæ–‡ä»¶å†…å®¹å¯ä»¥çœ‹å‡ºï¼Œä¸»è¦åˆ†ä¸ºä¸‰å¤§éƒ¨åˆ†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 1ã€apply pluginï¼š12345// å£°æ˜Žæ˜¯Androidç¨‹åºï¼Œ//com.android.application è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¨¡å—//com.android.library æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªåº“æ¨¡å—//è€Œè¿™åŒºåˆ«ï¼šå‰è€…å¯ä»¥ç›´æŽ¥è¿è¡Œï¼ŒåŽç€æ˜¯ä¾é™„åˆ«çš„åº”ç”¨ç¨‹åºè¿è¡Œapply plugin: 'com.android.application' æ–‡ä»¶ä¸­ç¬¬ä¸€è¡Œä½¿ç”¨apply pluginè¡¨ç¤ºåº”ç”¨äº†ä¸€ä¸ªæ’ä»¶ï¼Œè¯¥æ’ä»¶ä¸€èˆ¬æœ‰ä¸¤ç§å€¼å¯é€‰ï¼š â€˜com.android.applicationâ€™ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—ä¸ºåº”ç”¨ç¨‹åºæ¨¡å—ï¼Œå¯ä»¥ç›´æŽ¥è¿è¡Œï¼Œæ‰“åŒ…å¾—åˆ°çš„æ˜¯.apkæ–‡ä»¶ â€˜com.android.libraryâ€™ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—ä¸ºåº“æ¨¡å—ï¼Œåªèƒ½ä½œä¸ºä»£ç åº“ä¾é™„äºŽåˆ«çš„åº”ç”¨ç¨‹åºæ¨¡å—æ¥è¿è¡Œï¼Œæ‰“åŒ…å¾—åˆ°çš„æ˜¯.aaræ–‡ä»¶ 2ã€android{}é—­åŒ…ï¼šè¿™ä¸ªé—­åŒ…ä¸»è¦ä¸ºäº†é…ç½®é¡¹ç›®æž„å»ºçš„å„ç§å±žæ€§ï¼š 2.1ã€æ·»åŠ signingConfigs{}é—­åŒ…ï¼š1234567891011121314signingConfigs &#123;// è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½® release &#123;// çº¿ä¸ŠçŽ¯å¢ƒ keyAlias 'test' keyPassword '123456' storeFile file('test.keystore') storePassword '123456' &#125; debug &#123;// å¼€å‘çŽ¯å¢ƒ keyAlias 'test' keyPassword '123456' storeFile file('test.keystore') storePassword '123456' &#125;&#125; å¯ä»¥æ‰‹åŠ¨æ·»åŠ ç­¾åé…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Project Structure é€‰ä¸­appï¼Œç‚¹å‡»Singingæ·»åŠ ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç­¾åé…ç½®å®ŒæˆåŽå¯ä»¥æ–¹ä¾¿å¸¦ç­¾åæ‰“åŒ…ï¼Œåœ¨moduleçš„Build Variantsä¸­æœ‰ä¸¤ä¸ªTypeï¼Œåˆ†åˆ«æ˜¯debugå’Œreleaseï¼Œå¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ªç±»åž‹è¿›è¡Œæ‰“åŒ…ï¼Œå¹¶ä¸”ä»–ä»¬ä¼šåˆ©ç”¨å„è‡ªé…ç½®çš„Keyè¿›è¡Œæ‰“åŒ…ï¼Œæ‰§è¡Œ Run appæˆ–è€…Build-&gt;Build apkå°±ä¼šè‡ªåŠ¨åœ¨module name/app/build/outputs/apkè·¯å¾„ä¸‹ç”ŸæˆApkæ–‡ä»¶ã€‚å¦ä¸€ç§æ‰“åŒ…æ–¹å¼æ˜¯Build-&gt;Generate Signed APKå¡«å†™ç­¾åä¿¡æ¯ç”ŸæˆApkã€‚ 2.2ã€compileSdkVersionï¼šè®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬2.3ã€buildToolsVersionï¼šè®¾ç½®ç¼–è¯‘æ—¶ä½¿ç”¨çš„æž„å»ºå·¥å…·çš„ç‰ˆæœ¬ï¼ŒAndroid Studio3.0åŽåŽ»é™¤æ­¤é¡¹é…ç½® 2.4ã€defaultConfig{}é—­åŒ…ï¼š123456789compileSdkVersion 27//è®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬defaultConfig &#123; applicationId "com.billy.myapplication"//é¡¹ç›®çš„åŒ…å minSdkVersion 16//é¡¹ç›®æœ€ä½Žå…¼å®¹çš„ç‰ˆæœ¬ targetSdkVersion 27//é¡¹ç›®çš„ç›®æ ‡ç‰ˆæœ¬ versionCode 1//ç‰ˆæœ¬å· versionName "1.0"//ç‰ˆæœ¬åç§° testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"//è¡¨æ˜Žè¦ä½¿ç”¨AndroidJUnitRunnerè¿›è¡Œå•å…ƒæµ‹è¯•&#125; applicationIdï¼šæŒ‡å®šäº†é¡¹ç›®çš„åŒ…åã€‚ minSdkVersionï¼šæŒ‡å®šé¡¹ç›®æœ€ä½Žå…¼å®¹çš„ç‰ˆæœ¬ï¼Œå¦‚æžœè®¾å¤‡å°äºŽè¿™ä¸ªç‰ˆæœ¬æˆ–è€…å¤§äºŽmaxSdkVersion(ä¸€èˆ¬ä¸ç”¨)å°†æ— æ³•å®‰è£…è¿™ä¸ªåº”ç”¨ï¼Œè¿™é‡ŒæŒ‡å®šä¸º16ï¼Œè¡¨ç¤ºæœ€ä½Žå…¼å®¹åˆ°Android 4.1ç³»ç»Ÿã€‚ targetSdkVersionï¼šæŒ‡å®šé¡¹ç›®çš„ç›®æ ‡ç‰ˆæœ¬ï¼Œè¡¨ç¤ºåœ¨è¯¥ç›®æ ‡ç‰ˆæœ¬ä¸Šå·²ç»åšè¿‡å……åˆ†æµ‹è¯•ï¼Œç³»ç»Ÿä¼šä¸ºè¯¥åº”ç”¨å¯åŠ¨ä¸€äº›å¯¹åº”è¯¥ç›®æ ‡ç³»ç»Ÿçš„æœ€æ–°åŠŸèƒ½ç‰¹æ€§ï¼ŒAndroidç³»ç»Ÿå¹³å°çš„è¡Œä¸ºå˜æ›´ï¼Œåªæœ‰targetSdkVersionçš„å±žæ€§å€¼è¢«è®¾ç½®ä¸ºå¤§äºŽæˆ–ç­‰äºŽè¯¥ç³»ç»Ÿå¹³å°çš„APIç‰ˆæœ¬æ—¶ï¼Œæ‰ä¼šç”Ÿæ•ˆã€‚ä¾‹å¦‚ï¼Œè‹¥æŒ‡å®štargetSdkVersionå€¼ä¸º22ï¼Œåˆ™è¡¨ç¤ºè¯¥ç¨‹åºæœ€é«˜åªåœ¨Android5.1ç‰ˆæœ¬ä¸Šåšè¿‡å……åˆ†æµ‹è¯•ï¼Œåœ¨Android6.0ç³»ç»Ÿä¸Šï¼ˆå¯¹åº”targetSdkVersionä¸º23ï¼‰æ‹¥æœ‰çš„æ–°ç‰¹æ€§å¦‚ç³»ç»Ÿè¿è¡Œæ—¶æƒé™ç­‰åŠŸèƒ½å°±ä¸ä¼šè¢«å¯ç”¨ã€‚ versionCodeï¼šè¡¨ç¤ºç‰ˆæœ¬å·ï¼Œä¸€èˆ¬æ¯æ¬¡æ‰“åŒ…ä¸Šçº¿æ—¶è¯¥å€¼åªèƒ½å¢žåŠ ï¼Œæ‰“åŒ…åŽçœ‹ä¸è§ã€‚ versionNameï¼šè¡¨ç¤ºç‰ˆæœ¬åç§°ï¼Œå±•ç¤ºåœ¨åº”ç”¨å¸‚åœºä¸Šã€‚ testInstrumentationRunner â€œandroid.support.test.runner.AndroidJUnitRunnerâ€è¡¨æ˜Žè¦ä½¿ç”¨AndroidJUnitRunnerè¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ 2.5ã€ buildTypes{}é—­åŒ…ï¼šè¿™ä¸ªé—­åŒ…ä¸»è¦æŒ‡å®šç”Ÿæˆå®‰è£…æ–‡ä»¶çš„ä¸»è¦é…ç½®ï¼Œä¸€èˆ¬åŒ…å«ä¸¤ä¸ªå­é—­åŒ…ï¼Œä¸€ä¸ªæ˜¯debugé—­åŒ…ï¼Œç”¨äºŽæŒ‡å®šç”Ÿæˆæµ‹è¯•ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®ï¼Œå¯ä»¥å¿½ç•¥ä¸å†™ï¼›å¦ä¸€ä¸ªæ˜¯releaseé—­åŒ…ï¼Œç”¨äºŽæŒ‡å®šç”Ÿæˆæ­£å¼ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®ã€‚ä¸¤è€…èƒ½é…ç½®çš„å‚æ•°ç›¸åŒï¼Œæœ€å¤§çš„åŒºåˆ«é»˜è®¤å±žæ€§é…ç½®ä¸ä¸€æ ·ï¼Œä¸¤ç§æ¨¡å¼æ”¯æŒçš„å±žæ€§é…ç½®å¦‚ä¸‹å›¾ï¼š 123456789101112131415161718192021222324252627buildTypes &#123;// ç”Ÿäº§/æµ‹è¯•çŽ¯å¢ƒé…ç½® release &#123;// ç”Ÿäº§çŽ¯å¢ƒ buildConfigField("boolean", "LOG_DEBUG", "false")//é…ç½®Logæ—¥å¿— buildConfigField("String", "URL_PERFIX", "\"https://release.cn/\"")// é…ç½®URLå‰ç¼€ minifyEnabled false//æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·† proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'//æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶ signingConfig signingConfigs.release//è®¾ç½®ç­¾åä¿¡æ¯ pseudoLocalesEnabled false//æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€çŽ¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š zipAlignEnabled true//æ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢žåŠ è¿è¡Œæ•ˆçŽ‡ applicationIdSuffix 'test'//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š versionNameSuffix 'test'//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š &#125; debug &#123;// æµ‹è¯•çŽ¯å¢ƒ buildConfigField("boolean", "LOG_DEBUG", "true")//é…ç½®Logæ—¥å¿— buildConfigField("String", "URL_PERFIX", "\"https://test.com/\"")// é…ç½®URLå‰ç¼€ minifyEnabled false//æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·† proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'//æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶ signingConfig signingConfigs.debug//è®¾ç½®ç­¾åä¿¡æ¯ debuggable false//æ˜¯å¦æ”¯æŒæ–­ç‚¹è°ƒè¯• jniDebuggable false//æ˜¯å¦å¯ä»¥è°ƒè¯•NDKä»£ç  renderscriptDebuggable false//æ˜¯å¦å¼€å¯æ¸²æŸ“è„šæœ¬å°±æ˜¯ä¸€äº›cå†™çš„æ¸²æŸ“æ–¹æ³• zipAlignEnabled true//æ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢žåŠ è¿è¡Œæ•ˆçŽ‡ pseudoLocalesEnabled false//æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€çŽ¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š applicationIdSuffix 'test'//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š versionNameSuffix 'test'//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š &#125;&#125; release{}é—­åŒ…å’Œdebug{}é—­åŒ…ä¸¤è€…èƒ½é…ç½®çš„å‚æ•°ç›¸åŒï¼Œæœ€å¤§çš„åŒºåˆ«é»˜è®¤å±žæ€§é…ç½®ä¸ä¸€æ ·ï¼š minifyEnabledï¼šè¡¨æ˜Žæ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†ï¼Œtrueè¡¨ç¤ºå¯¹ä»£ç è¿›è¡Œæ··æ·†ï¼Œfalseè¡¨ç¤ºå¯¹ä»£ç ä¸è¿›è¡Œæ··æ·†ï¼Œé»˜è®¤çš„æ˜¯falseã€‚ proguardFilesï¼šæŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶ï¼Œè¿™é‡ŒæŒ‡å®šäº†proguard-android.txtæ–‡ä»¶å’Œproguard-rules.proæ–‡ä»¶ä¸¤ä¸ªæ–‡ä»¶ï¼Œproguard-android.txtæ–‡ä»¶ä¸ºé»˜è®¤çš„æ··æ·†æ–‡ä»¶ï¼Œé‡Œé¢å®šä¹‰äº†ä¸€äº›é€šç”¨çš„æ··æ·†è§„åˆ™ã€‚proguard-rules.proæ–‡ä»¶ä½äºŽå½“å‰é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­å®šä¹‰ä¸€äº›é¡¹ç›®ç‰¹æœ‰çš„æ··æ·†è§„åˆ™ã€‚ buildConfigFieldï¼šç”¨äºŽè§£å†³Betaç‰ˆæœ¬æœåŠ¡å’ŒReleaseç‰ˆæœ¬æœåŠ¡åœ°å€ä¸åŒæˆ–è€…ä¸€äº›Logæ‰“å°éœ€æ±‚æŽ§åˆ¶çš„ã€‚ä¾‹å¦‚ï¼šé…ç½®buildConfigField(â€œbooleanâ€, â€œLOG_DEBUGâ€, â€œtrueâ€)ï¼Œè¿™ä¸ªæ–¹æ³•æŽ¥æ”¶ä¸‰ä¸ªéžç©ºçš„å‚æ•°ï¼Œç¬¬ä¸€ä¸ªï¼šç¡®å®šå€¼çš„ç±»åž‹ï¼Œç¬¬äºŒä¸ªï¼šæŒ‡å®škeyçš„åå­—ï¼Œç¬¬ä¸‰ä¸ªï¼šä¼ å€¼ï¼Œè°ƒç”¨çš„æ—¶å€™BuildConfig.LOG_DEBUGå³å¯è°ƒç”¨ã€‚ debuggableï¼šè¡¨ç¤ºæ˜¯å¦æ”¯æŒæ–­ç‚¹è°ƒè¯•ï¼Œreleaseé»˜è®¤ä¸ºfalseï¼Œdebugé»˜è®¤ä¸ºtrueã€‚ jniDebuggableï¼šè¡¨ç¤ºæ˜¯å¦å¯ä»¥è°ƒè¯•NDKä»£ç ï¼Œä½¿ç”¨lldbè¿›è¡Œcå’Œc++ä»£ç è°ƒè¯•ï¼Œreleaseé»˜è®¤ä¸ºfalse signingConfigï¼šè®¾ç½®ç­¾åä¿¡æ¯ï¼Œé€šè¿‡signingConfigs.releaseæˆ–è€…signingConfigs.debugï¼Œé…ç½®ç›¸åº”çš„ç­¾åï¼Œä½†æ˜¯æ·»åŠ æ­¤é…ç½®å‰å¿…é¡»å…ˆæ·»åŠ signingConfigsé—­åŒ…ï¼Œæ·»åŠ ç›¸åº”çš„ç­¾åä¿¡æ¯ã€‚ renderscriptDebuggableï¼šè¡¨ç¤ºæ˜¯å¦å¼€å¯æ¸²æŸ“è„šæœ¬å°±æ˜¯ä¸€äº›cå†™çš„æ¸²æŸ“æ–¹æ³•ï¼Œé»˜è®¤ä¸ºfalseã€‚ renderscriptOptimLevelï¼šè¡¨ç¤ºæ¸²æŸ“ç­‰çº§ï¼Œé»˜è®¤æ˜¯3ã€‚ pseudoLocalesEnabledï¼šæ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€çŽ¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤šã€‚ applicationIdSuffixï¼šå’ŒdefaultConfigä¸­é…ç½®æ˜¯ä¸€çš„ï¼Œè¿™é‡Œæ˜¯åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤šã€‚ versionNameSuffixï¼šè¡¨ç¤ºæ·»åŠ ç‰ˆæœ¬åç§°çš„åŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤šã€‚ zipAlignEnabledï¼šè¡¨ç¤ºæ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢žåŠ è¿è¡Œæ•ˆçŽ‡ï¼Œreleaseå’Œdebugé»˜è®¤éƒ½ä¸ºtrueã€‚ 2.6ã€sourceSets{}é—­åŒ…ï¼šé…ç½®ç›®å½•æŒ‡å‘12345sourceSets &#123;//ç›®å½•æŒ‡å‘é…ç½® main &#123; jniLibs.srcDirs = ['libs']//æŒ‡å®šlibåº“ç›®å½• &#125;&#125; é…ç½® jniLibs.srcDirs = [â€˜libsâ€™]ï¼Œå¯ä»¥åœ¨Android studioçš„Androidè§†å›¾ä¸‹ç”ŸæˆjniLibsæ–‡ä»¶å¤¹ï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å­˜æ”¾jaråŒ…å’Œåº“æ–‡ä»¶ï¼Œå…¶ä¸­Androidè§†å›¾ä¸‹çš„jniLibså’Œprojectè§†å›¾ä¸‹çš„libsæŒ‡å‘åŒä¸€æ–‡ä»¶å¤¹ï¼ˆappâ†’libsï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2.7ã€packagingOptions{}é—­åŒ…ï¼šæ‰“åŒ…æ—¶çš„ç›¸å…³é…ç½®å½“é¡¹ç›®ä¸­ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“è¶Šæ¥è¶Šå¤šæ—¶ï¼Œæœ‰å¯èƒ½ä¼šå‡ºçŽ°ä¸¤ä¸ªä¾èµ–åº“ä¸­å­˜åœ¨åŒä¸€ä¸ªï¼ˆåç§°ï¼‰æ–‡ä»¶ã€‚å¦‚æžœè¿™æ ·ï¼ŒGradleåœ¨æ‰“åŒ…æ—¶å°±ä¼šæç¤ºé”™è¯¯ï¼ˆè­¦å‘Šï¼‰ã€‚é‚£ä¹ˆå°±å¯ä»¥æ ¹æ®æç¤ºï¼Œç„¶åŽä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å°†é‡å¤çš„æ–‡ä»¶å‰”é™¤ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯é€šè¿‡excludeåŽ»é™¤é‡å¤çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š 123456789101112packagingOptions&#123; //pickFirstsåšç”¨æ˜¯ å½“æœ‰é‡å¤æ–‡ä»¶æ—¶ æ‰“åŒ…ä¼šæŠ¥é”™ è¿™æ ·é…ç½®ä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶æ‰“åŒ…è¿›å…¥apk // è¡¨ç¤ºå½“apkä¸­æœ‰é‡å¤çš„META-INFç›®å½•ä¸‹æœ‰é‡å¤çš„LICENSEæ–‡ä»¶æ—¶ åªç”¨ç¬¬ä¸€ä¸ª è¿™æ ·æ‰“åŒ…å°±ä¸ä¼šæŠ¥é”™ pickFirsts = ['META-INF/LICENSE'] //mergesä½•å¿… å½“å‡ºçŽ°é‡å¤æ–‡ä»¶æ—¶ åˆå¹¶é‡å¤çš„æ–‡ä»¶ ç„¶åŽæ‰“åŒ…å…¥apk //è¿™ä¸ªæ˜¯æœ‰é»˜è®¤å€¼å¾— merges = [] è¿™æ ·ä¼šæŠŠé»˜é»˜è®¤å€¼åŽ»æŽ‰ æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ åœ¨é»˜è®¤å€¼åŽæ·»åŠ  merge 'META-INF/LICENSE' //è¿™ä¸ªæ˜¯åœ¨åŒæ—¶ä½¿ç”¨butterknifeã€dagger2åšçš„ä¸€ä¸ªå¤„ç†ã€‚åŒç†ï¼Œé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œåªè¦æ ¹æ®gradleçš„æç¤ºï¼Œåšç±»ä¼¼å¤„ç†å³å¯ã€‚ exclude 'META-INF/services/javax.annotation.processing.Processor'&#125; 2.8ã€productFlavors{}é—­åŒ…ï¼šå¤šä¸ªæ¸ é“é…ç½®è¿™ä¸ªé…ç½®æ˜¯ç»å¸¸ä¼šä½¿ç”¨åˆ°çš„ï¼Œé€šå¸¸åœ¨é€‚é…å¤šä¸ªæ¸ é“çš„æ—¶å€™ï¼Œéœ€è¦ä¸ºç‰¹å®šçš„æ¸ é“åšéƒ¨åˆ†ç‰¹æ®Šçš„å¤„ç†ï¼Œæ¯”å¦‚è®¾ç½®ä¸åŒçš„åŒ…åã€åº”ç”¨åç­‰ã€‚åœºæ™¯ï¼šå½“æˆ‘ä»¬ä½¿ç”¨å‹ç›Ÿç»Ÿè®¡æ—¶ï¼Œé€šå¸¸éœ€è¦è®¾ç½®ä¸€ä¸ªæ¸ é“IDï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨productFlavorsæ¥ç”Ÿæˆå¯¹åº”æ¸ é“ä¿¡æ¯çš„åŒ…ï¼Œå¦‚ï¼š 123456789101112131415161718android &#123; productFlavors &#123; wandoujia &#123; //è±Œè±†èšæ¸ é“åŒ…é…ç½® manifestPlaceholders = [UMENG_CHANNEL_VALUE: "wandoujia"] //manifestPlaceholdersçš„ä½¿ç”¨åœ¨åŽç»­ç« èŠ‚ï¼ˆAndroidManifesté‡Œçš„å ä½ç¬¦ï¼‰ä¸­ä»‹ç» &#125; xiaomi &#123; manifestPlaceholders = [UMENG_CHANNEL_VALUE: "xiaomi"] applicationId "com.wiky.gradle.xiaomi" //é…ç½®åŒ…å &#125; _360 &#123; manifestPlaceholders = [UMENG_CHANNEL_VALUE: "_360"] &#125; //... &#125; &#125; å½“ç„¶ä¹Ÿæœ‰æ›´ç®€æ´çš„æ–¹å¼ï¼š 12345678910111213android &#123; productFlavors &#123; wandoujia &#123;&#125; xiaomi &#123;&#125; _360 &#123;&#125; //... &#125; productFlavors.all &#123; //æ‰¹é‡ä¿®æ”¹ï¼Œç±»ä¼¼ä¸€ä¸ªå¾ªåºéåŽ† flavor -&gt; flavor.manifestPlaceholders = [UMENG_CHANNEL_VALUE: name] &#125;&#125; é…ç½®å®Œä¹‹åŽï¼Œåœ¨å‘½ä»¤è¡Œçª—å£ä¸­ï¼ˆTerminalï¼‰ä¸­è¾“å…¥gradlew assembleReleaseï¼ˆwindowsï¼‰å³å¯å¼€å§‹æ‰“åŒ…ï¼Œåœ¨Macç³»ç»Ÿä¸­å¯¹åº”æŒ‡ä»¤åº”è¯¥æ˜¯./gradlew assembleReleaseã€‚å½“ç„¶ï¼Œå¦‚æžœæƒ³è¦debugç‰ˆæœ¬çš„åŒ…ï¼Œå°†æŒ‡ä»¤ä¸­assembleReleaseæ”¹ä¸ºassembleDebugå³å¯ã€‚æœ€åŽç”Ÿæˆçš„åŒ…è¿˜æ˜¯åœ¨app/build/outputs/apkä¸­ï¼Œé»˜è®¤å‘½åæ ¼å¼å¦‚app-wandoujia-release-unsigned.apkï¼Œåœ¨moduleçš„Build Variantsä¸­å¯ä»¥é€‰æ‹©ç›¸åº”çš„æ¸ é“ã€‚æ³¨ï¼šAndroid Studio3.0éœ€åœ¨ä¸»appçš„build.gradleé‡Œé¢çš„defaultConfig {targetSdkVersionï¼š*minSdkVersion ï¼š*versionCodeï¼š*versionName ï¼š*//ç‰ˆæœ¬ååŽé¢æ·»åŠ ä¸€å¥è¯ï¼Œæ„æ€å°±æ˜¯flavor dimension å®ƒçš„ç»´åº¦å°±æ˜¯è¯¥ç‰ˆæœ¬å·ï¼Œè¿™æ ·ç»´åº¦å°±æ˜¯éƒ½æ˜¯ç»Ÿä¸€çš„äº†flavorDimensions â€œversionCodeâ€} 2.9ã€lintOptions{}é—­åŒ…ï¼šä»£ç æ‰«æåˆ†æžLint æ˜¯Android Studio æä¾›çš„ ä»£ç æ‰«æåˆ†æžå·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬å‘çŽ°ä»£ç ç»“æž„/è´¨é‡é—®é¢˜ï¼ŒåŒæ—¶æä¾›ä¸€äº›è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦æˆ‘ä»¬æ‰‹å†™æµ‹è¯•ç”¨ä¾‹ã€‚ Lint å‘çŽ°çš„æ¯ä¸ªé—®é¢˜éƒ½æœ‰æè¿°ä¿¡æ¯å’Œç­‰çº§ï¼ˆå’Œæµ‹è¯•å‘çŽ° bug å¾ˆç›¸ä¼¼ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®šä½é—®é¢˜ï¼ŒåŒæ—¶æŒ‰ç…§ä¸¥é‡ç¨‹åº¦è¿›è¡Œè§£å†³ã€‚ 12345//ç¨‹åºåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šæ£€æŸ¥lintï¼Œæœ‰ä»»ä½•é”™è¯¯æç¤ºä¼šåœæ­¢buildï¼Œæˆ‘ä»¬å¯ä»¥å…³é—­è¿™ä¸ªå¼€å…³lintOptions &#123; abortOnError false //å³ä½¿æŠ¥é”™ä¹Ÿä¸ä¼šåœæ­¢æ‰“åŒ… checkReleaseBuilds false //æ‰“åŒ…releaseç‰ˆæœ¬çš„æ—¶å€™è¿›è¡Œæ£€æµ‹&#125; 3ã€dependencies{}é—­åŒ…ï¼šè¯¥é—­åŒ…å®šä¹‰äº†é¡¹ç›®çš„ä¾èµ–å…³ç³»ï¼Œä¸€èˆ¬é¡¹ç›®éƒ½æœ‰ä¸‰ç§ä¾èµ–æ–¹å¼ï¼šæœ¬åœ°ä¾èµ–ã€åº“ä¾èµ–å’Œè¿œç¨‹ä¾èµ–ã€‚æœ¬åœ°ä¾èµ–å¯ä»¥å¯¹æœ¬åœ°çš„jaråŒ…æˆ–ç›®å½•æ·»åŠ ä¾èµ–å…³ç³»ï¼Œåº“ä¾èµ–å¯ä»¥å¯¹é¡¹ç›®ä¸­çš„åº“æ¨¡å—æ·»åŠ ä¾èµ–å…³ç³»ï¼Œè¿œç¨‹ä¾èµ–å¯ä»¥å¯¹jceneråº“ä¸Šçš„å¼€æºé¡¹ç›®æ·»åŠ ä¾èµ–å…³ç³»ã€‚ä»ŽAndroid Studio3.0åŽcompileå¼•å…¥åº“ä¸åœ¨ä½¿ç”¨ï¼Œè€Œæ˜¯é€šè¿‡apiå’Œimplementationï¼Œapiå®Œå…¨ç­‰åŒäºŽä»¥å‰çš„compileï¼Œç”¨apiå¼•å…¥çš„åº“æ•´ä¸ªé¡¹ç›®éƒ½å¯ä»¥ä½¿ç”¨ï¼Œç”¨implementationå¼•å…¥çš„åº“åªæœ‰å¯¹åº”çš„Moduleèƒ½ä½¿ç”¨ï¼Œå…¶ä»–Moduleä¸èƒ½ä½¿ç”¨ï¼Œç”±äºŽä¹‹å‰çš„é¡¹ç›®ç»Ÿä¸€ç”¨compileä¾èµ–ï¼Œå¯¼è‡´çš„æƒ…å†µå°±æ˜¯æ¨¡å—è€¦åˆæ€§å¤ªé«˜ï¼Œä¸åˆ©äºŽé¡¹ç›®æ‹†è§£ï¼Œä½¿ç”¨implementationä¹‹åŽè™½ç„¶ä½¿ç”¨èµ·æ¥å¤æ‚äº†ä½†æ˜¯åšåˆ°é™ä½Žå¶åˆå…´æé«˜å®‰å…¨æ€§ã€‚ 12345678dependencies &#123;//é¡¹ç›®çš„ä¾èµ–å…³ç³» implementation fileTree(include: ['*.jar'], dir: 'libs')//æœ¬åœ°jaråŒ…ä¾èµ– implementation 'com.android.support:appcompat-v7:27.1.1'//è¿œç¨‹ä¾èµ– implementation 'com.android.support.constraint:constraint-layout:1.1.2' testImplementation 'junit:junit:4.12'//å£°æ˜Žæµ‹è¯•ç”¨ä¾‹åº“ androidTestImplementation 'com.android.support.test:runner:1.0.2' androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'&#125; implementation fileTree(include: [â€˜*.jarâ€™], dir: â€˜libsâ€™)ï¼šimplementation fileTreeæ˜¯ä¸€ä¸ªæœ¬åœ°ä¾èµ–å£°æ˜Žï¼Œè¡¨ç¤ºå°†libsç›®å½•ä¸‹æ‰€æœ‰.jaråŽç¼€çš„æ–‡ä»¶éƒ½æ·»åŠ åˆ°é¡¹ç›®çš„æž„å»ºè·¯å¾„å½“ä¸­ã€‚ implementation â€˜com.android.support:appcompat-v7:27.1.1â€™ï¼šimplementationè¯­å¥ä¸º è¿œç¨‹ä¾èµ–å£°æ˜Žï¼Œâ€™com.android.support:appcompat-v7:27.1.1â€™ä¸ºä¸€ä¸ªæ ‡å‡†çš„è¿œç¨‹ä¾èµ–åº“æ ¼å¼ï¼Œå…¶ä¸­com.android.supportä¸ºåŸŸåéƒ¨åˆ†ï¼Œç”¨äºŽåŒºåˆ†ä¸åŒå…¬å¸çš„åº“ï¼›appcompat-v7ä¸ºç»„ä»¶åç§°ï¼Œç”¨äºŽåŒºåˆ†åŒä¸€ä¸ªå…¬å¸çš„ä¸åŒåº“ï¼›27.1.1ä¸ºç‰ˆæœ¬å·ï¼Œç”¨äºŽåŒºåˆ†åŒä¸€ä¸ªåº“çš„ä¸åŒç‰ˆæœ¬ã€‚åŠ ä¸Šè¿™å¥å£°æ˜ŽåŽï¼ŒGradleåœ¨æž„å»ºé¡¹ç›®æ—¶ä¼šå…ˆæ£€æŸ¥ä¸€ä¸‹æœ¬åœ°æ˜¯å¦å·²ç»ç¼“å­˜è¿‡è¯¥åº“ï¼Œè‹¥æ²¡æœ‰ç¼“å­˜åˆ™è‡ªåŠ¨è”ç½‘ä¸‹è½½ï¼Œä¸‹è½½åŽè‡ªåŠ¨æ·»åŠ åˆ°é¡¹ç›®çš„æž„å»ºè·¯å¾„ä¸­åŽ»ã€‚ testImplementationå’ŒandroidTestImplementationï¼šè¡¨ç¤ºå£°æ˜Žæµ‹è¯•ç”¨ä¾‹åº“ã€‚ Moduleå®Œæ•´çš„build.gradleé…ç½®å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111// å£°æ˜Žæ˜¯Androidç¨‹åºï¼Œ//com.android.application è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¨¡å—//com.android.library æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªåº“æ¨¡å—//è€Œè¿™åŒºåˆ«ï¼šå‰è€…å¯ä»¥ç›´æŽ¥è¿è¡Œï¼ŒåŽç€æ˜¯ä¾é™„åˆ«çš„åº”ç”¨ç¨‹åºè¿è¡Œapply plugin: 'com.android.application'android &#123; signingConfigs &#123;// è‡ªåŠ¨åŒ–æ‰“åŒ…é…ç½® release &#123;// çº¿ä¸ŠçŽ¯å¢ƒ keyAlias 'test' keyPassword '123456' storeFile file('test.jks') storePassword '123456' &#125; debug &#123;// å¼€å‘çŽ¯å¢ƒ keyAlias 'test' keyPassword '123456' storeFile file('test.jks') storePassword '123456' &#125; &#125; compileSdkVersion 27//è®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬ defaultConfig &#123; applicationId "com.billy.myapplication"//é¡¹ç›®çš„åŒ…å minSdkVersion 16//é¡¹ç›®æœ€ä½Žå…¼å®¹çš„ç‰ˆæœ¬ targetSdkVersion 27//é¡¹ç›®çš„ç›®æ ‡ç‰ˆæœ¬ versionCode 1//ç‰ˆæœ¬å· versionName "1.0"//ç‰ˆæœ¬åç§° flavorDimensions "versionCode" testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"//è¡¨æ˜Žè¦ä½¿ç”¨AndroidJUnitRunnerè¿›è¡Œå•å…ƒæµ‹è¯• &#125; buildTypes &#123;// ç”Ÿäº§/æµ‹è¯•çŽ¯å¢ƒé…ç½® release &#123;// ç”Ÿäº§çŽ¯å¢ƒ buildConfigField("boolean", "LOG_DEBUG", "false")//é…ç½®Logæ—¥å¿— buildConfigField("String", "URL_PERFIX", "\"https://release.cn/\"")// é…ç½®URLå‰ç¼€ minifyEnabled false//æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·† proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'//æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶ signingConfig signingConfigs.release//è®¾ç½®ç­¾åä¿¡æ¯ pseudoLocalesEnabled false//æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€çŽ¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š zipAlignEnabled true//æ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢žåŠ è¿è¡Œæ•ˆçŽ‡ applicationIdSuffix 'test'//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š versionNameSuffix 'test'//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š &#125; debug &#123;// æµ‹è¯•çŽ¯å¢ƒ buildConfigField("boolean", "LOG_DEBUG", "true")//é…ç½®Logæ—¥å¿— buildConfigField("String", "URL_PERFIX", "\"https://test.com/\"")// é…ç½®URLå‰ç¼€ minifyEnabled false//æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·† proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'//æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶ signingConfig signingConfigs.debug//è®¾ç½®ç­¾åä¿¡æ¯ debuggable false//æ˜¯å¦æ”¯æŒæ–­ç‚¹è°ƒè¯• jniDebuggable false//æ˜¯å¦å¯ä»¥è°ƒè¯•NDKä»£ç  renderscriptDebuggable false//æ˜¯å¦å¼€å¯æ¸²æŸ“è„šæœ¬å°±æ˜¯ä¸€äº›cå†™çš„æ¸²æŸ“æ–¹æ³• zipAlignEnabled true//æ˜¯å¦å¯¹APKåŒ…æ‰§è¡ŒZIPå¯¹é½ä¼˜åŒ–ï¼Œå‡å°zipä½“ç§¯ï¼Œå¢žåŠ è¿è¡Œæ•ˆçŽ‡ pseudoLocalesEnabled false//æ˜¯å¦åœ¨APKä¸­ç”Ÿæˆä¼ªè¯­è¨€çŽ¯å¢ƒï¼Œå¸®åŠ©å›½é™…åŒ–çš„ä¸œè¥¿ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š applicationIdSuffix 'test'//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š versionNameSuffix 'test'//åœ¨applicationId ä¸­æ·»åŠ äº†ä¸€ä¸ªåŽç¼€ï¼Œä¸€èˆ¬ä½¿ç”¨çš„ä¸å¤š &#125; &#125; sourceSets &#123;//ç›®å½•æŒ‡å‘é…ç½® main &#123; jniLibs.srcDirs = ['libs']//æŒ‡å®šlibåº“ç›®å½• &#125; &#125; packagingOptions&#123;//æ‰“åŒ…æ—¶çš„ç›¸å…³é…ç½® //pickFirstsåšç”¨æ˜¯ å½“æœ‰é‡å¤æ–‡ä»¶æ—¶ æ‰“åŒ…ä¼šæŠ¥é”™ è¿™æ ·é…ç½®ä¼šä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶æ‰“åŒ…è¿›å…¥apk // è¡¨ç¤ºå½“apkä¸­æœ‰é‡å¤çš„META-INFç›®å½•ä¸‹æœ‰é‡å¤çš„LICENSEæ–‡ä»¶æ—¶ åªç”¨ç¬¬ä¸€ä¸ª è¿™æ ·æ‰“åŒ…å°±ä¸ä¼šæŠ¥é”™ pickFirsts = ['META-INF/LICENSE'] //mergesä½•å¿… å½“å‡ºçŽ°é‡å¤æ–‡ä»¶æ—¶ åˆå¹¶é‡å¤çš„æ–‡ä»¶ ç„¶åŽæ‰“åŒ…å…¥apk //è¿™ä¸ªæ˜¯æœ‰é»˜è®¤å€¼å¾— merges = [] è¿™æ ·ä¼šæŠŠé»˜é»˜è®¤å€¼åŽ»æŽ‰ æ‰€ä»¥æˆ‘ä»¬ç”¨ä¸‹é¢è¿™ç§æ–¹å¼ åœ¨é»˜è®¤å€¼åŽæ·»åŠ  merge 'META-INF/LICENSE' //è¿™ä¸ªæ˜¯åœ¨åŒæ—¶ä½¿ç”¨butterknifeã€dagger2åšçš„ä¸€ä¸ªå¤„ç†ã€‚åŒç†ï¼Œé‡åˆ°ç±»ä¼¼çš„é—®é¢˜ï¼Œåªè¦æ ¹æ®gradleçš„æç¤ºï¼Œåšç±»ä¼¼å¤„ç†å³å¯ã€‚ exclude 'META-INF/services/javax.annotation.processing.Processor' &#125; productFlavors &#123; wandoujia &#123;&#125; xiaomi &#123;&#125; _360 &#123;&#125; &#125; productFlavors.all &#123; //æ‰¹é‡ä¿®æ”¹ï¼Œç±»ä¼¼ä¸€ä¸ªå¾ªåºéåŽ† flavor -&gt; flavor.manifestPlaceholders = [IFLYTEK_CHANNEL: name] &#125; //ç¨‹åºåœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šæ£€æŸ¥lintï¼Œæœ‰ä»»ä½•é”™è¯¯æç¤ºä¼šåœæ­¢buildï¼Œæˆ‘ä»¬å¯ä»¥å…³é—­è¿™ä¸ªå¼€å…³ lintOptions &#123; abortOnError false //å³ä½¿æŠ¥é”™ä¹Ÿä¸ä¼šåœæ­¢æ‰“åŒ… checkReleaseBuilds false //æ‰“åŒ…releaseç‰ˆæœ¬çš„æ—¶å€™è¿›è¡Œæ£€æµ‹ &#125;&#125;dependencies &#123; //é¡¹ç›®çš„ä¾èµ–å…³ç³» implementation fileTree(include: ['*.jar'], dir: 'libs') //æœ¬åœ°jaråŒ…ä¾èµ– implementation 'com.android.support:appcompat-v7:27.1.1' //è¿œç¨‹ä¾èµ– implementation 'com.android.support.constraint:constraint-layout:1.1.2' testImplementation 'junit:junit:4.12' //å£°æ˜Žæµ‹è¯•ç”¨ä¾‹åº“ androidTestImplementation 'com.android.support.test:runner:1.0.2' androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2'&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Gradle</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android_Studio_3.5ï¼šç¨³æ­¥æŽ¨è¿›ProjectMarbleè®¡åˆ’]]></title>
    <url>%2Fposts%2F4fc3338f.html</url>
    <content type="text"><![CDATA[æˆ‘ä»¬åœ¨ Android Studio 3.5 ä¸­å¼•å…¥äº†è®¸å¤šè´¨é‡å˜æ›´ï¼Œè¯·å‚é˜…ã€ŠAndroid Studio 3.5 Beta çŽ°å·²å‘å¸ƒã€‹æˆ–è€… Android Studio ç‰ˆæœ¬è¯´æ˜Žï¼ŒæŸ¥çœ‹å®Œæ•´ç‰ˆå˜æ›´åˆ—è¡¨ã€‚å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥å…ˆé˜…è¯»ä¸€ä¸‹è¿™ç¯‡æ–‡ç« æˆ–æ”¶çœ‹ä¸‹æ–¹è§†é¢‘ï¼Œå¿«é€Ÿäº†è§£ä¸€ä¸‹å…¶ä¸­çš„è‹¥å¹²é‡è¦å˜æ›´: è…¾è®¯è§†é¢‘é“¾æŽ¥: v.qq.com/x/page/w091â€¦ Bilibili è§†é¢‘é“¾æŽ¥: www.bilibili.com/video/av657â€¦ ç³»ç»Ÿå¥åº·Project Marble è®¡åˆ’ä¸­ç³»ç»Ÿå¥åº·æ–¹é¢çš„æ”¹è¿›åŒ…æ‹¬: å†…å­˜æ€§èƒ½ã€è¾“å…¥ä¸Žç”¨æˆ·ç•Œé¢å†»ç»“ã€æž„å»ºé€Ÿåº¦ã€CPU ä½¿ç”¨ä»¥åŠ I/O æ€§èƒ½ã€‚æˆ‘ä»¬é’ˆå¯¹è¿™äº”ç‚¹åˆ†åˆ«è®¾è®¡äº†æ–°çš„ç›‘æµ‹æœºåˆ¶ï¼Œä»¥ä¾¿åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ›´å‡†ç¡®åœ°è¯†åˆ«é—®é¢˜ï¼Œæ­¤å¤–ï¼Œæµç¨‹ä¸Šçš„ä¼˜åŒ–ä¹Ÿè®©å›¢é˜Ÿå¾—ä»¥æ›´å¥½åœ°åˆ†æžç”¨æˆ·åé¦ˆï¼Œä»Žå¼€å‘è€…è‡ªæ„¿åˆ†äº«çš„ç»Ÿè®¡æ•°æ®å’Œé”™è¯¯æŠ¥å‘Šä¸­èŽ·å–æ›´å¤šæ´žè§ã€‚ å°½ç®¡ç³»ç»Ÿå¥åº·çš„è®¸å¤šä¼˜åŒ–é¡¹å¯èƒ½å¹¶ä¸ä¸ºå¤§å®¶æ‰€ç†ŸçŸ¥ï¼Œä¸è¿‡å…¶ä¸­è¿˜æ˜¯æœ‰å‡ ä¸ªæ¯”è¾ƒæ˜Žæ˜¾çš„å˜æ›´ï¼Œå…¶ä¸­åŒ…æ‹¬: è‡ªåŠ¨æŽ¨èå†…å­˜è®¾ç½® åœ¨ Android Studio 3.5 ä¸­ï¼ŒIDE ä¼šè¯†åˆ«å‡ºä¸€ä¸ªåº”ç”¨é¡¹ç›®åœ¨ RAM å®¹é‡æ›´é«˜çš„æœºå™¨ä¸Šä½•æ—¶éœ€è¦æ›´å¤šçš„ RAMï¼Œå¹¶åœ¨é€šçŸ¥å¼€å‘è€…å¢žåŠ å†…å­˜å †å¤§å°ï¼›æˆ–è€…æ‚¨ä¹Ÿå¯ä»¥åœ¨ Appearance &amp; Behavior â†’ Memory Settings ä¸‹è‡ªè¡Œè°ƒæ•´è®¾ç½®ã€‚ ç”¨æˆ·ç•Œé¢å†»ç»“ åœ¨ Project Marble è®¡åˆ’å¼€å‘æœŸé—´ï¼Œæˆ‘ä»¬åœ¨äº§å“åˆ†æžæ•°æ®ä¸­å‘çŽ° IDE ä¸­çš„ XML ä»£ç ç¼–è¾‘é€Ÿåº¦æ˜Žæ˜¾è¾ƒæ…¢ã€‚æˆ‘ä»¬åŸºäºŽè¿™ä¸ªæ•°æ®ç‚¹ä¼˜åŒ–äº† XML è¾“å…¥ï¼Œä½¿å¾— Android Studio 3.5 çš„æ€§èƒ½è¡¨çŽ°æœ‰äº†æžå¤§çš„æå‡ã€‚ä»Žä»¥ä¸‹ä¸¤å¼ å›¾ä¸­æ‚¨å¯ä»¥å‘çŽ°ï¼Œå¾—ç›ŠäºŽè¾“å…¥å»¶è¿Ÿçš„æ”¹è¿›ï¼Œä½¿ç”¨ XML ç¼–è¾‘æ•°æ®ç»‘å®šè¡¨è¾¾å¼çš„é€Ÿåº¦æ˜Žæ˜¾åŠ å¿«äº†ã€‚ æ”¹è¿›å‰: åœ¨ Android Studio 3.4 ä¸­ç¼–è¾‘ä»£ç  æ”¹è¿›åŽ: åœ¨ Android Studio 3.5 ä¸­ç¼–è¾‘ä»£ç  æž„å»ºé€Ÿåº¦ ä¸ºäº†æé«˜ Android Studio 3.5 çš„æž„å»ºé€Ÿåº¦ï¼Œæˆ‘ä»¬é‡‡å–äº†è®¸å¤šæŽªæ–½ï¼Œå…¶ä¸­æœ€ä¸ºé‡è¦çš„ä¸€é¡¹å˜æ›´æ˜¯ä¸ºé¡¶çº§æ³¨é‡Šå¤„ç†å™¨æ·»åŠ å¢žé‡æž„å»ºæ”¯æŒï¼Œè¿™äº›å¤„ç†å™¨åŒ…æ‹¬ Glideã€AndroidX data bindingã€Daggerã€Realm å’Œ Kotlin (KAPT)ã€‚å¢žé‡æ”¯æŒèƒ½å¤Ÿæ˜¾è‘—æé«˜æž„å»ºé€Ÿåº¦ã€‚æ›´å¤šå†…å®¹ï¼Œè¯·é˜…è¯»ã€Šåœ¨ Android Studio ä¸­åŠ å¿«æž„å»ºé€Ÿåº¦ã€‹ã€‚ ç£ç›˜ I/O æ–‡ä»¶è®¿é—®é€Ÿåº¦ Android Studio çš„è®¸å¤šç”¨æˆ·éƒ½åœ¨ä½¿ç”¨å¾®è½¯æ——ä¸‹çš„ Windows ç³»ç»Ÿã€‚æˆ‘ä»¬å‘çŽ°ä¸Žå…¶ä»–å¹³å°ç›¸æ¯”ï¼ŒWindows çš„ç£ç›˜ I/O æ–‡ä»¶è®¿é—®è€—æ—¶æ˜Žæ˜¾æ›´ä¹…ã€‚æ·±åº¦åˆ†æžæ•°æ®åŽï¼Œæˆ‘ä»¬å‘çŽ°åœ¨ä¸€äº›æ€æ¯’ç¨‹åºåœ¨é»˜è®¤è®¾ç½®ä¸‹ï¼Œå¹¶æœªå°† Android Studio çš„æž„å»ºè¾“å‡ºæ–‡ä»¶å¤¹ (build output folder) æŽ’é™¤åœ¨æ‰«æèŒƒå›´ä¹‹å¤–ã€‚åœ¨ Android Studio 3.5 ä¸­ï¼Œä¸€æ—¦ç³»ç»Ÿç›‘æµ‹åˆ°è¿™ä¸ªæƒ…å†µï¼ŒStudio å°†é€šè¿‡å¼¹çª—å¼•å¯¼æ‚¨è¿›è¡Œæœ€ä¼˜è®¾ç½®ã€‚ ç‰¹æ€§ä¼˜åŒ–é™¤æ”¹å–„ç³»ç»Ÿå¥åº·ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜é‡æ–°æ£€æŸ¥äº†ä¸€äº›å…³é”®ç”¨æˆ·æµç¨‹ï¼Œ ä¿®å¤äº†ä¸€äº›é”™è¯¯ä»¥åŠè‹¥å¹²å¯¼è‡´ä¸è‰¯ç”¨æˆ·ä½“éªŒçš„é—®é¢˜ï¼Œæ¶‰åŠé¢†åŸŸåŒ…æ‹¬: æ•°æ®ç»‘å®šã€å¸ƒå±€ã€Chrome OS æ”¯æŒå’Œé¡¹ç›®å‡çº§ï¼Œè€Œåº”ç”¨éƒ¨ç½²æµåˆ™æ˜¯å…¶ä¸­è¾ƒä¸ºå…³é”®çš„ä¸€é¡¹æ”¹è¿›ã€‚ Apply Changes åœ¨ Project Marble è®¡åˆ’æœŸé—´ï¼Œæˆ‘ä»¬ç§»é™¤äº† Instant Runï¼Œç„¶åŽåœ¨ Android Studio 3.5 ä¸­é‡æ–°æž„å»ºå¹¶å®žçŽ°äº†ä¸€ä¸ªæ›´åŠ å®žç”¨çš„æ›¿ä»£æ–¹æ¡ˆï¼Œå³ Apply Changesã€‚Apply Changes ä½¿ç”¨ Android Oreo åŠä»¥ä¸Šç‰ˆæœ¬ä¸­çš„å¹³å°ç‰¹å®š API æ¥ç¡®ä¿å¯é ä¸”ä¸€è‡´çš„ç³»ç»Ÿè¡Œä¸ºã€‚ä¸Ž Instant Run çš„æœºåˆ¶ä¸åŒï¼Œæ›´æ”¹ç³»ç»Ÿé…ç½®å¹¶ä¸ä¼šé‡å†™æ‚¨çš„ APK æ–‡ä»¶ã€‚ä¸ºäº†æ”¯æŒæ­¤é¡¹å˜æ›´ï¼Œæˆ‘ä»¬é‡æž„äº†æ•´ä¸ªéƒ¨ç½²ç®¡é“ï¼Œä»¥æ­¤æå‡éƒ¨ç½²é€Ÿåº¦ï¼›ä¸Žæ­¤åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¾®è°ƒäº†å·¥å…·æ ä¸­çš„è¿è¡Œä¸Žéƒ¨ç½²æŒ‰é’®ï¼Œå¸Œæœ›å€Ÿæ­¤ä¸ºæ‚¨æä¾›æ›´ä¸ºç²¾ç®€çš„å¼€å‘ä½“éªŒã€‚ æ€»ç»“ä¸€ä¸‹ï¼ŒAndroid Studio 3.5 å…±ä¿®å¤å‡ ç™¾ä¸ªé”™è¯¯ï¼Œå¹¶é’ˆå¯¹ä»¥ä¸‹æ ¸å¿ƒé¢†åŸŸå¼•å…¥äº†è‹¥å¹²å…³é”®å˜æ›´: ç³»ç»Ÿå¥åº· å†…å­˜è®¾ç½® å†…å­˜ä½¿ç”¨æŠ¥å‘Š å‡å°‘å¼‚å¸¸ ç”¨æˆ·ç•Œé¢å†»ç»“ æž„å»ºé€Ÿåº¦ IDE é€Ÿåº¦ Lint ä»£ç åˆ†æž I/O æ–‡ä»¶è®¿é—® æ¨¡æ‹Ÿå™¨ CPU ä½¿ç”¨ ç‰¹æ€§ä¼˜åŒ– Apply Changes Gradle åŒæ­¥ é¡¹ç›®æ›´æ–° å¸ƒå±€ç¼–è¾‘å™¨ æ•°æ®ç»‘å®š åº”ç”¨éƒ¨ç½² C++ æ”¹è¿› Intellij 2019 å¹³å°å‡çº§ åŠ¨æ€ç‰¹æ€§æ”¯æŒä¹‹æ¡ä»¶äº¤ä»˜ æ¨¡æ‹Ÿå™¨å¯¹å¯æŠ˜å è®¾å¤‡åŠ Google Pixel è®¾å¤‡çš„æ”¯æŒ Chrome OS æ”¯æŒ æ›´å¤šå†…å®¹ï¼Œè¯·å‚é˜… Android Studio ç‰ˆæœ¬è¯´æ˜Žï¼Œæˆ–é˜…è¯»ä¸‹åˆ—ä¸Ž Project Marble è®¡åˆ’ç›¸å…³çš„æ·±åº¦å­¦ä¹ ä¸“æ æˆ–æ”¶çœ‹ Google I/O ä¸“é¢˜åˆ†äº«ä¼š: Project Marble è®¡åˆ’: Apply Changesï¼š medium.com/androiddeveâ€¦ åœ¨ Android Studio ä¸­åŠ å¿«æž„å»ºé€Ÿåº¦ï¼š medium.com/androiddeveâ€¦ Android æ¨¡æ‹Ÿå™¨: Project Marble è®¡åˆ’æ”¹è¿›é¡¹ï¼š medium.com/androiddeveâ€¦ Android Studio Project Marble è®¡åˆ’: Lint æ€§èƒ½ï¼š medium.com/androiddeveâ€¦ Android Studio Project Marble è®¡åˆ’: å¸ƒå±€ç¼–è¾‘å™¨ï¼š medium.com/androiddeveâ€¦ Google I/O: Marble è®¡åˆ’ â€” Android å¼€å‘å·¥å…·æœ‰å“ªäº›æ›´æ–°? www.youtube.com/watch?v=8rfâ€¦ è‡ªæ„¿æ•°æ®åˆ†äº«ä¸Žåé¦ˆæˆ‘ä»¬åŸºäºŽå¼€å‘è€…æäº¤çš„åé¦ˆä¸ŽæŒ‡æ ‡æ•°æ®ï¼Œåˆ¤æ–­ Android Studio ä¸­æœ‰å“ªäº›å†…å®¹é€‚ç”¨äºŽ Project Marble è®¡åˆ’ï¼Œå¹¶å†³å®šå…·ä½“çš„ä¼˜åŒ–é¡¹ç›®å’Œå®žçŽ°æ‰‹æ®µã€‚å¼€å‘è€…å¯è‡ªæ„¿åœ¨ Android Studio å†…å‹¾é€‰æ•°æ®åˆ†äº«ï¼Œæ”¶é›†ä¸Šæ¥çš„æ•°æ®å°†å¸®åŠ©å›¢é˜Ÿåˆ¤å®šäº§å“æ˜¯å¦å«æœ‰æ³¢åŠå…¨ä½“ç”¨æˆ·çš„é—®é¢˜ï¼ŒæŽ¥ç€åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè°ƒæ•´åŠŸèƒ½å¼€å‘å·¥ä½œçš„é¡ºåºï¼Œä¼˜å…ˆè§£å†³æœ€ä»¤ç”¨æˆ·å¤´ç–¼çš„é—®é¢˜ã€‚ä¸ºäº†èŽ·å–æœ€ä¼˜æ´žè§ï¼Œæˆ‘ä»¬åœ¨äº§å“æ•´åˆäº†å¤šç§ä¸åŒçš„åé¦ˆæ¸ é“ï¼ŒæŒ‡æ ‡æ•°æ®åˆ†äº«æ˜¯å…¶ä¸­æœ€åŸºæœ¬çš„ä¸€æ¬¾åé¦ˆå·¥å…·ï¼Œæ‚¨å¯é€šè¿‡ä»¥ä¸‹è·¯å¾„åœ¨ Android Studio ä¸­å¯ç”¨è¯¥åŠŸèƒ½ Preferences /Settings â†’ Appearance &amp; Behavior â†’ Data Sharingã€‚ ä¸çŸ¥é“æ‚¨ä»Šå¹´æ˜¯å¦ç•™æ„åˆ° IDE å³ä¸‹è§’çš„ç”¨æˆ·å¿ƒæƒ…æ ‡å¿—ã€‚Android Studio é€šè¿‡è¿™ä¸ªå°å°çš„å¿ƒæƒ…æ ‡å¿—ï¼Œäº†è§£ç”¨æˆ·çš„ä½¿ç”¨æ„Ÿå—ï¼Œå¹¶èŽ·å–ä¸Žå®žé™…ç”¨ä¾‹ç›¸å…³çš„åé¦ˆã€‚è¿™æ˜¯ç”¨æˆ·å‘å›¢é˜Ÿæäº¤é”™è¯¯æŠ¥å‘Šæœ€å¿«çš„é€”å¾„ã€‚ å³åˆ»ä½“éªŒä¸‹è½½ è¯·å‰å¾€ä¸‹è½½é¡µé¢ï¼ŒèŽ·å– Android Studio 3.5ã€‚å¦‚æžœæ‚¨å½“å‰æ­£åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬çš„ Android Studioï¼Œè¯·ç›´æŽ¥è¿›è¡Œå‡çº§æ“ä½œå³å¯ã€‚ å¦‚éœ€ä½¿ç”¨ä¸Šè¿° Android æ¨¡æ‹Ÿå™¨ç‰¹æ€§ï¼Œè¯·ç¡®ä¿æ‚¨æ­£åœ¨è¿è¡Œé€šè¿‡ Android Studio SDK ç®¡ç†å™¨ä¸‹è½½çš„ Android æ¨¡æ‹Ÿå™¨ v29.1.9 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ éžå¸¸æ„Ÿè°¢å¤§å®¶ç»§ç»­è¸Šè·ƒåé¦ˆï¼Œä¸Žæˆ‘ä»¬åˆ†äº«æ‚¨çš„æ‰€æ„Ÿæ‰€æƒ³ï¼Œå»ºè®®ä¸Žæ„è§ï¼Œæˆ–è€…ä»»ä½•æ‚¨æœŸæœ›çœ‹åˆ°çš„æ–°ç‰¹æ€§ã€‚å¦‚æžœæ‚¨é‡åˆ°ä»»ä½•é”™è¯¯æˆ–é—®é¢˜ï¼Œè¯·æäº¤é”™è¯¯æŠ¥å‘Šï¼Œæˆ–åœ¨è¯„è®ºåŒºç•™è¨€ã€‚ ç‚¹å‡»è¿™é‡Œæäº¤äº§å“åé¦ˆå»ºè®®]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android Tips</tag>
        <tag>Android Studio</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨æµè§ˆå™¨è¾“å…¥URLå›žè½¦ä¹‹åŽå‘ç”Ÿäº†ä»€ä¹ˆ]]></title>
    <url>%2Fposts%2Fd674143a.html</url>
    <content type="text"><![CDATA[å‰è¨€è¿™ä¸ªé—®é¢˜å·²ç»æ˜¯è€ç”Ÿå¸¸è°ˆäº†ï¼Œæ›´æ˜¯ç»å¸¸è¢«ä½œä¸ºé¢è¯•çš„åŽ‹è½´é¢˜å‡ºçŽ°ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šæ–‡ç« ï¼Œä½†æœ€è¿‘é—²çš„æ— èŠï¼Œç„¶åŽå°±è‡ªå·±åšäº†ä¸€ç¯‡ç¬”è®°ï¼Œæ„Ÿè§‰æ¯”ä¹‹å‰ç†è§£æ›´é€å½»äº†ã€‚ è¿™ç¯‡ç¬”è®°æ˜¯æˆ‘è¿™ä¸¤å¤©çœ‹äº†æ•°åç¯‡æ–‡ç« æ€»ç»“å‡ºæ¥çš„ï¼Œæ‰€ä»¥ç›¸å¯¹å…¨é¢ä¸€ç‚¹ï¼Œä½†ç”±äºŽæˆ‘æ˜¯åšå‰ç«¯çš„ï¼Œæ‰€ä»¥ä¼šæ¯”è¾ƒé‡ç‚¹åˆ†æžæµè§ˆå™¨æ¸²æŸ“é¡µé¢é‚£ä¸€éƒ¨åˆ†ï¼Œè‡³äºŽå…¶ä»–éƒ¨åˆ†æˆ‘ä¼šç½—åˆ—å‡ºå…³é”®è¯ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡ŒæŸ¥é˜…. æ³¨æ„ï¼šæœ¬æ–‡çš„æ­¥éª¤æ˜¯å»ºç«‹åœ¨ï¼Œè¯·æ±‚çš„æ˜¯ä¸€ä¸ªç®€å•çš„ HTTP è¯·æ±‚ï¼Œæ²¡æœ‰ HTTPSã€HTTP2ã€æœ€ç®€å•çš„ DNSã€æ²¡æœ‰ä»£ç†ã€å¹¶ä¸”æœåŠ¡å™¨æ²¡æœ‰ä»»ä½•é—®é¢˜çš„åŸºç¡€ä¸Šï¼Œå°½ç®¡è¿™æ˜¯ä¸åˆ‡å®žé™…çš„ã€‚ å¤§è‡´æµç¨‹ URL è§£æž DNS æŸ¥è¯¢ TCP è¿žæŽ¥ å¤„ç†è¯·æ±‚ æŽ¥å—å“åº” æ¸²æŸ“é¡µé¢ URL è§£æžåœ°å€è§£æžï¼šé¦–å…ˆåˆ¤æ–­ä½ è¾“å…¥çš„æ˜¯ä¸€ä¸ªåˆæ³•çš„ URL è¿˜æ˜¯ä¸€ä¸ªå¾…æœç´¢çš„å…³é”®è¯ï¼Œå¹¶ä¸”æ ¹æ®ä½ è¾“å…¥çš„å†…å®¹è¿›è¡Œè‡ªåŠ¨å®Œæˆã€å­—ç¬¦ç¼–ç ç­‰æ“ä½œã€‚ HSTSç”±äºŽå®‰å…¨éšæ‚£ï¼Œä¼šä½¿ç”¨ HSTS å¼ºåˆ¶å®¢æˆ·ç«¯ä½¿ç”¨ HTTPS è®¿é—®é¡µé¢ã€‚è¯¦è§ï¼šä½ æ‰€ä¸çŸ¥é“çš„ HSTS[1]ã€‚ å…¶ä»–æ“ä½œæµè§ˆå™¨è¿˜ä¼šè¿›è¡Œä¸€äº›é¢å¤–çš„æ“ä½œï¼Œæ¯”å¦‚å®‰å…¨æ£€æŸ¥ã€è®¿é—®é™åˆ¶ï¼ˆä¹‹å‰å›½äº§æµè§ˆå™¨é™åˆ¶ 996.icuï¼‰ã€‚ æ£€æŸ¥ç¼“å­˜ DNS æŸ¥è¯¢åŸºæœ¬æ­¥éª¤ 1. æµè§ˆå™¨ç¼“å­˜æµè§ˆå™¨ä¼šå…ˆæ£€æŸ¥æ˜¯å¦åœ¨ç¼“å­˜ä¸­ï¼Œæ²¡æœ‰åˆ™è°ƒç”¨ç³»ç»Ÿåº“å‡½æ•°è¿›è¡ŒæŸ¥è¯¢ã€‚ 2. æ“ä½œç³»ç»Ÿç¼“å­˜æ“ä½œç³»ç»Ÿä¹Ÿæœ‰è‡ªå·±çš„ DNSç¼“å­˜ï¼Œä½†åœ¨è¿™ä¹‹å‰ï¼Œä¼šå‘æ£€æŸ¥åŸŸåæ˜¯å¦å­˜åœ¨æœ¬åœ°çš„ Hosts æ–‡ä»¶é‡Œï¼Œæ²¡æœ‰åˆ™å‘ DNS æœåŠ¡å™¨å‘é€æŸ¥è¯¢è¯·æ±‚ã€‚ 3. è·¯ç”±å™¨ç¼“å­˜è·¯ç”±å™¨ä¹Ÿæœ‰è‡ªå·±çš„ç¼“å­˜ã€‚ 4. ISP DNS ç¼“å­˜ISP DNS å°±æ˜¯åœ¨å®¢æˆ·ç«¯ç”µè„‘ä¸Šè®¾ç½®çš„é¦–é€‰ DNS æœåŠ¡å™¨ï¼Œå®ƒä»¬åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¼šæœ‰ç¼“å­˜ã€‚ æ ¹åŸŸåæœåŠ¡å™¨æŸ¥è¯¢åœ¨å‰é¢æ‰€æœ‰æ­¥éª¤æ²¡æœ‰ç¼“å­˜çš„æƒ…å†µä¸‹ï¼Œæœ¬åœ° DNS æœåŠ¡å™¨ä¼šå°†è¯·æ±‚è½¬å‘åˆ°äº’è”ç½‘ä¸Šçš„æ ¹åŸŸï¼Œä¸‹é¢è¿™ä¸ªå›¾å¾ˆå¥½çš„è¯ é‡Šäº†æ•´ä¸ªæµç¨‹ï¼š æ ¹åŸŸåæœåŠ¡å™¨ï¼ˆç»´åŸºç™¾ç§‘ï¼‰ éœ€è¦æ³¨æ„çš„ç‚¹ é€’å½’æ–¹å¼ï¼šä¸€è·¯æŸ¥ä¸‹åŽ»ä¸­é—´ä¸è¿”å›žï¼Œå¾—åˆ°æœ€ç»ˆç»“æžœæ‰è¿”å›žä¿¡æ¯ï¼ˆæµè§ˆå™¨åˆ°æœ¬åœ°DNSæœåŠ¡å™¨çš„è¿‡ç¨‹ï¼‰ è¿­ä»£æ–¹å¼ï¼Œå°±æ˜¯æœ¬åœ°DNSæœåŠ¡å™¨åˆ°æ ¹åŸŸåæœåŠ¡å™¨æŸ¥è¯¢çš„æ–¹å¼ã€‚ ä»€ä¹ˆæ˜¯ DNS åŠ«æŒ å‰ç«¯ dns-prefetch ä¼˜åŒ– TCP è¿žæŽ¥TCP/IP åˆ†ä¸ºå››å±‚ï¼Œåœ¨å‘é€æ•°æ®æ—¶ï¼Œæ¯å±‚éƒ½è¦å¯¹æ•°æ®è¿›è¡Œå°è£…ï¼š 1. åº”ç”¨å±‚ï¼šå‘é€ HTTP è¯·æ±‚åœ¨å‰é¢çš„æ­¥éª¤æˆ‘ä»¬å·²ç»å¾—åˆ°æœåŠ¡å™¨çš„ IP åœ°å€ï¼Œæµè§ˆå™¨ä¼šå¼€å§‹æž„é€ ä¸€ä¸ª HTTP æŠ¥æ–‡ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š è¯·æ±‚æŠ¥å¤´ï¼ˆRequest Headerï¼‰ï¼šè¯·æ±‚æ–¹æ³•ã€ç›®æ ‡åœ°å€ã€éµå¾ªçš„åè®®ç­‰ç­‰ è¯·æ±‚ä¸»ä½“ï¼ˆå…¶ä»–å‚æ•°ï¼‰ å…¶ä¸­éœ€è¦æ³¨æ„çš„ç‚¹ï¼š æµè§ˆå™¨åªèƒ½å‘é€ GETã€POST æ–¹æ³•ï¼Œè€Œæ‰“å¼€ç½‘é¡µä½¿ç”¨çš„æ˜¯ GET æ–¹æ³• 2. ä¼ è¾“å±‚ï¼šTCP ä¼ è¾“æŠ¥æ–‡ä¼ è¾“å±‚ä¼šå‘èµ·ä¸€æ¡åˆ°è¾¾æœåŠ¡å™¨çš„ TCP è¿žæŽ¥ï¼Œä¸ºäº†æ–¹ä¾¿ä¼ è¾“ï¼Œä¼šå¯¹æ•°æ®è¿›è¡Œåˆ†å‰²ï¼ˆä»¥æŠ¥æ–‡æ®µä¸ºå•ä½ï¼‰ï¼Œå¹¶æ ‡è®°ç¼–å·ï¼Œæ–¹ä¾¿æœåŠ¡å™¨æŽ¥å—æ—¶èƒ½å¤Ÿå‡†ç¡®åœ°è¿˜åŽŸæŠ¥æ–‡ä¿¡æ¯ã€‚ åœ¨å»ºç«‹è¿žæŽ¥å‰ï¼Œä¼šå…ˆè¿›è¡Œ TCP ä¸‰æ¬¡æ¡æ‰‹ã€‚ â€œ å…³äºŽ TCP/IP ä¸‰æ¬¡æ¡æ‰‹ï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šæ®µå­å’Œå›¾ç‰‡ç”ŸåŠ¨åœ°æè¿°äº†ã€‚ ç›¸å…³çŸ¥è¯†ç‚¹ï¼š SYN æ³›æ´ªæ”»å‡» â€ 3. ç½‘ç»œå±‚ï¼šIPåè®®æŸ¥è¯¢Macåœ°å€å°†æ•°æ®æ®µæ‰“åŒ…ï¼Œå¹¶åŠ å…¥æºåŠç›®æ ‡çš„IPåœ°å€ï¼Œå¹¶ä¸”è´Ÿè´£å¯»æ‰¾ä¼ è¾“è·¯çº¿ã€‚ åˆ¤æ–­ç›®æ ‡åœ°å€æ˜¯å¦ä¸Žå½“å‰åœ°å€å¤„äºŽåŒä¸€ç½‘ç»œä¸­ï¼Œæ˜¯çš„è¯ç›´æŽ¥æ ¹æ® Mac åœ°å€å‘é€ï¼Œå¦åˆ™ä½¿ç”¨è·¯ç”±è¡¨æŸ¥æ‰¾ä¸‹ä¸€è·³åœ°å€ï¼Œä»¥åŠä½¿ç”¨ ARP åè®®æŸ¥è¯¢å®ƒçš„ Mac åœ°å€ã€‚ â€œ æ³¨æ„ï¼šåœ¨ OSI å‚è€ƒæ¨¡åž‹ä¸­ ARP åè®®ä½äºŽé“¾è·¯å±‚ï¼Œä½†åœ¨ TCP/IP ä¸­ï¼Œå®ƒä½äºŽç½‘ç»œå±‚ã€‚ â€ 4. é“¾è·¯å±‚ï¼šä»¥å¤ªç½‘åè®®ä»¥å¤ªç½‘åè®® æ ¹æ®ä»¥å¤ªç½‘åè®®å°†æ•°æ®åˆ†ä¸ºä»¥â€œå¸§â€ä¸ºå•ä½çš„æ•°æ®åŒ…ï¼Œæ¯ä¸€å¸§åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š æ ‡å¤´ï¼šæ•°æ®åŒ…çš„å‘é€è€…ã€æŽ¥å—è€…ã€æ•°æ®ç±»åž‹ æ•°æ®ï¼šæ•°æ®åŒ…å…·ä½“å†…å®¹ Mac åœ°å€ ä»¥å¤ªç½‘è§„å®šäº†è¿žå…¥ç½‘ç»œçš„æ‰€æœ‰è®¾å¤‡éƒ½å¿…é¡»å…·å¤‡â€œç½‘å¡â€æŽ¥å£ï¼Œæ•°æ®åŒ…éƒ½æ˜¯ä»Žä¸€å—ç½‘å¡ä¼ é€’åˆ°å¦ä¸€å—ç½‘å¡ï¼Œç½‘å¡çš„åœ°å€å°±æ˜¯ Mac åœ°å€ã€‚æ¯ä¸€ä¸ª Mac åœ°å€éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå…·å¤‡äº†ä¸€å¯¹ä¸€çš„èƒ½åŠ›ã€‚ å¹¿æ’­ å‘é€æ•°æ®çš„æ–¹æ³•å¾ˆåŽŸå§‹ï¼Œç›´æŽ¥æŠŠæ•°æ®é€šè¿‡ ARP åè®®ï¼Œå‘æœ¬ç½‘ç»œçš„æ‰€æœ‰æœºå™¨å‘é€ï¼ŒæŽ¥æ”¶æ–¹æ ¹æ®æ ‡å¤´ä¿¡æ¯ä¸Žè‡ªèº« Mac åœ°å€æ¯”è¾ƒï¼Œä¸€è‡´å°±æŽ¥å—ï¼Œå¦åˆ™ä¸¢å¼ƒã€‚ æ³¨æ„ï¼šæŽ¥æ”¶æ–¹å›žåº”æ˜¯å•æ’­ã€‚ â€œ ç›¸å…³çŸ¥è¯†ç‚¹ï¼š ARP æ”»å‡» â€ æœåŠ¡å™¨æŽ¥å—è¯·æ±‚æŽ¥å—è¿‡ç¨‹å°±æ˜¯æŠŠä»¥ä¸Šæ­¥éª¤é€†è½¬è¿‡æ¥ï¼Œå‚è§ä¸Šå›¾ã€‚ æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¤§è‡´æµç¨‹ HTTPDæœ€å¸¸è§çš„ HTTPD æœ‰ Linux ä¸Šå¸¸ç”¨çš„ Apache å’Œ Nginxï¼Œä»¥åŠ Windows ä¸Šçš„ IISã€‚ å®ƒä¼šç›‘å¬å¾—åˆ°çš„è¯·æ±‚ï¼Œç„¶åŽå¼€å¯ä¸€ä¸ªå­è¿›ç¨‹åŽ»å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚ å¤„ç†è¯·æ±‚æŽ¥å— TCP æŠ¥æ–‡åŽï¼Œä¼šå¯¹è¿žæŽ¥è¿›è¡Œå¤„ç†ï¼Œå¯¹HTTPåè®®è¿›è¡Œè§£æžï¼ˆè¯·æ±‚æ–¹æ³•ã€åŸŸåã€è·¯å¾„ç­‰ï¼‰ï¼Œå¹¶ä¸”è¿›è¡Œä¸€äº›éªŒè¯ï¼š éªŒè¯æ˜¯å¦é…ç½®è™šæ‹Ÿä¸»æœº éªŒè¯è™šæ‹Ÿä¸»æœºæ˜¯å¦æŽ¥å—æ­¤æ–¹æ³• éªŒè¯è¯¥ç”¨æˆ·å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ï¼ˆæ ¹æ® IP åœ°å€ã€èº«ä»½ä¿¡æ¯ç­‰ï¼‰ é‡å®šå‘å‡å¦‚æœåŠ¡å™¨é…ç½®äº† HTTP é‡å®šå‘ï¼Œå°±ä¼šè¿”å›žä¸€ä¸ª 301æ°¸ä¹…é‡å®šå‘å“åº”ï¼Œæµè§ˆå™¨å°±ä¼šæ ¹æ®å“åº”ï¼Œé‡æ–°å‘é€ HTTP è¯·æ±‚ï¼ˆé‡æ–°æ‰§è¡Œä¸Šé¢çš„è¿‡ç¨‹ï¼‰ã€‚ â€œ å…³äºŽæ›´å¤šï¼šè¯¦è§è¿™ç¯‡æ–‡ç« [2] â€ URL é‡å†™ç„¶åŽä¼šæŸ¥çœ‹ URL é‡å†™è§„åˆ™ï¼Œå¦‚æžœè¯·æ±‚çš„æ–‡ä»¶æ˜¯çœŸå®žå­˜åœ¨çš„ï¼Œæ¯”å¦‚å›¾ç‰‡ã€htmlã€cssã€jsæ–‡ä»¶ç­‰ï¼Œåˆ™ä¼šç›´æŽ¥æŠŠè¿™ä¸ªæ–‡ä»¶è¿”å›žã€‚ å¦åˆ™æœåŠ¡å™¨ä¼šæŒ‰ç…§è§„åˆ™æŠŠè¯·æ±‚é‡å†™åˆ° ä¸€ä¸ª REST é£Žæ ¼çš„ URL ä¸Šã€‚ ç„¶åŽæ ¹æ®åŠ¨æ€è¯­è¨€çš„è„šæœ¬ï¼Œæ¥å†³å®šè°ƒç”¨ä»€ä¹ˆç±»åž‹çš„åŠ¨æ€æ–‡ä»¶è§£é‡Šå™¨æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚ ä»¥ PHP è¯­è¨€çš„ MVC æ¡†æž¶ä¸¾ä¾‹ï¼Œå®ƒé¦–å…ˆä¼šåˆå§‹åŒ–ä¸€äº›çŽ¯å¢ƒçš„å‚æ•°ï¼Œæ ¹æ® URL ç”±ä¸Šåˆ°ä¸‹åœ°åŽ»åŒ¹é…è·¯ç”±ï¼Œç„¶åŽè®©è·¯ç”±æ‰€å®šä¹‰çš„æ–¹æ³•åŽ»å¤„ç†è¯·æ±‚ã€‚ æµè§ˆå™¨æŽ¥å—å“åº”æµè§ˆå™¨æŽ¥æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„å“åº”èµ„æºåŽï¼Œä¼šå¯¹èµ„æºè¿›è¡Œåˆ†æžã€‚ é¦–å…ˆæŸ¥çœ‹ Response headerï¼Œæ ¹æ®ä¸åŒçŠ¶æ€ç åšä¸åŒçš„äº‹ï¼ˆæ¯”å¦‚ä¸Šé¢æåˆ°çš„é‡å®šå‘ï¼‰ã€‚ å¦‚æžœå“åº”èµ„æºè¿›è¡Œäº†åŽ‹ç¼©ï¼ˆæ¯”å¦‚ gzipï¼‰ï¼Œè¿˜éœ€è¦è¿›è¡Œè§£åŽ‹ã€‚ ç„¶åŽï¼Œå¯¹å“åº”èµ„æºåšç¼“å­˜ã€‚ æŽ¥ä¸‹æ¥ï¼Œæ ¹æ®å“åº”èµ„æºé‡Œçš„ MIME[3] ç±»åž‹åŽ»è§£æžå“åº”å†…å®¹ï¼ˆæ¯”å¦‚ HTMLã€Imageå„æœ‰ä¸åŒçš„è§£æžæ–¹å¼ï¼‰ã€‚ æµè§ˆå™¨å†…æ ¸ ä¸åŒçš„æµè§ˆå™¨å†…æ ¸ï¼Œæ¸²æŸ“è¿‡ç¨‹ä¹Ÿä¸å®Œå…¨ç›¸åŒï¼Œä½†å¤§è‡´æµç¨‹éƒ½å·®ä¸å¤šã€‚ åŸºæœ¬æµç¨‹ 6.1. HTML è§£æžé¦–å…ˆè¦çŸ¥é“æµè§ˆå™¨è§£æžæ˜¯ä»Žä¸Šå¾€ä¸‹ä¸€è¡Œä¸€è¡Œåœ°è§£æžçš„ã€‚ è§£æžçš„è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼š â‘  è§£ç ï¼ˆencodingï¼‰ ä¼ è¾“å›žæ¥çš„å…¶å®žéƒ½æ˜¯ä¸€äº›äºŒè¿›åˆ¶å­—èŠ‚æ•°æ®ï¼Œæµè§ˆå™¨éœ€è¦æ ¹æ®æ–‡ä»¶æŒ‡å®šç¼–ç ï¼ˆä¾‹å¦‚UTF-8ï¼‰è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯HTML ä»£ç ã€‚ â‘¡ é¢„è§£æžï¼ˆpre-parsingï¼‰ é¢„è§£æžåšçš„äº‹æƒ…æ˜¯æå‰åŠ è½½èµ„æºï¼Œå‡å°‘å¤„ç†æ—¶é—´ï¼Œå®ƒä¼šè¯†åˆ«ä¸€äº›ä¼šè¯·æ±‚èµ„æºçš„å±žæ€§ï¼Œæ¯”å¦‚imgæ ‡ç­¾çš„srcå±žæ€§ï¼Œå¹¶å°†è¿™ä¸ªè¯·æ±‚åŠ åˆ°è¯·æ±‚é˜Ÿåˆ—ä¸­ã€‚ â‘¢ ç¬¦å·åŒ–ï¼ˆTokenizationï¼‰ ç¬¦å·åŒ–æ˜¯è¯æ³•åˆ†æžçš„è¿‡ç¨‹ï¼Œå°†è¾“å…¥è§£æžæˆç¬¦å·ï¼ŒHTML ç¬¦å·åŒ…æ‹¬ï¼Œå¼€å§‹æ ‡ç­¾ã€ç»“æŸæ ‡ç­¾ã€å±žæ€§åå’Œå±žæ€§å€¼ã€‚ å®ƒé€šè¿‡ä¸€ä¸ªçŠ¶æ€æœºåŽ»è¯†åˆ«ç¬¦å·çš„çŠ¶æ€ï¼Œæ¯”å¦‚é‡åˆ°&lt;ï¼Œ&gt;çŠ¶æ€éƒ½ä¼šäº§ç”Ÿå˜åŒ–ã€‚ â‘£ æž„å»ºæ ‘ï¼ˆtree constructionï¼‰ â€œ æ³¨æ„ï¼šç¬¦å·åŒ–å’Œæž„å»ºæ ‘æ˜¯å¹¶è¡Œæ“ä½œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦è§£æžåˆ°ä¸€ä¸ªå¼€å§‹æ ‡ç­¾ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª DOM èŠ‚ç‚¹ã€‚ â€ åœ¨ä¸Šä¸€æ­¥ç¬¦å·åŒ–ä¸­ï¼Œè§£æžå™¨èŽ·å¾—è¿™äº›æ ‡è®°ï¼Œç„¶åŽä»¥åˆé€‚çš„æ–¹æ³•åˆ›å»ºDOMå¯¹è±¡å¹¶æŠŠè¿™äº›ç¬¦å·æ’å…¥åˆ°DOMå¯¹è±¡ä¸­ã€‚ 1&lt;html&gt;&lt;head&gt; &lt;title&gt;Web page parsing&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt; &lt;h1&gt;Web page parsing&lt;/h1&gt; &lt;p&gt;This is an example Web page.&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æµè§ˆå™¨å®¹é”™è¿›åˆ¶ ä½ ä»Žæ¥æ²¡æœ‰åœ¨æµè§ˆå™¨çœ‹è¿‡ç±»ä¼¼â€è¯­æ³•æ— æ•ˆâ€çš„é”™è¯¯ï¼Œè¿™æ˜¯å› ä¸ºæµè§ˆå™¨åŽ»çº æ­£é”™è¯¯çš„è¯­æ³•ï¼Œç„¶åŽç»§ç»­å·¥ä½œã€‚ äº‹ä»¶ å½“æ•´ä¸ªè§£æžçš„è¿‡ç¨‹å®Œæˆä»¥åŽï¼Œæµè§ˆå™¨ä¼šé€šè¿‡DOMContentLoadedäº‹ä»¶æ¥é€šçŸ¥DOMè§£æžå®Œæˆã€‚ 6.2. CSS è§£æžä¸€æ—¦æµè§ˆå™¨ä¸‹è½½äº† CSSï¼ŒCSS è§£æžå™¨å°±ä¼šå¤„ç†å®ƒé‡åˆ°çš„ä»»ä½• CSSï¼Œæ ¹æ®è¯­æ³•è§„èŒƒ[4]è§£æžå‡ºæ‰€æœ‰çš„ CSS å¹¶è¿›è¡Œæ ‡è®°åŒ–ï¼Œç„¶åŽæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªè§„åˆ™è¡¨ã€‚ CSS åŒ¹é…è§„åˆ™ åœ¨åŒ¹é…ä¸€ä¸ªèŠ‚ç‚¹å¯¹åº”çš„ CSS è§„åˆ™æ—¶ï¼Œæ˜¯æŒ‰ç…§ä»Žå³åˆ°å·¦çš„é¡ºåºçš„ï¼Œä¾‹å¦‚ï¼šdiv p { font-size :14px }ä¼šå…ˆå¯»æ‰¾æ‰€æœ‰çš„pæ ‡ç­¾ç„¶åŽåˆ¤æ–­å®ƒçš„çˆ¶å…ƒç´ æ˜¯å¦ä¸ºdivã€‚ æ‰€ä»¥æˆ‘ä»¬å†™ CSS æ—¶ï¼Œå°½é‡ç”¨ id å’Œ classï¼Œåƒä¸‡ä¸è¦è¿‡åº¦å±‚å ã€‚ 6.3. æ¸²æŸ“æ ‘å…¶å®žè¿™å°±æ˜¯ä¸€ä¸ª DOM æ ‘å’Œ CSS è§„åˆ™æ ‘åˆå¹¶çš„è¿‡ç¨‹ã€‚ â€œ æ³¨æ„ï¼šæ¸²æŸ“æ ‘ä¼šå¿½ç•¥é‚£äº›ä¸éœ€è¦æ¸²æŸ“çš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚è®¾ç½®äº†display:noneçš„èŠ‚ç‚¹ã€‚ â€ è®¡ç®— é€šè¿‡è®¡ç®—è®©ä»»ä½•å°ºå¯¸å€¼éƒ½å‡å°‘åˆ°ä¸‰ä¸ªå¯èƒ½ä¹‹ä¸€ï¼šautoã€ç™¾åˆ†æ¯”ã€pxï¼Œæ¯”å¦‚æŠŠremè½¬åŒ–ä¸ºpxã€‚ çº§è” æµè§ˆå™¨éœ€è¦ä¸€ç§æ–¹æ³•æ¥ç¡®å®šå“ªäº›æ ·å¼æ‰çœŸæ­£éœ€è¦åº”ç”¨åˆ°å¯¹åº”å…ƒç´ ï¼Œæ‰€ä»¥å®ƒä½¿ç”¨ä¸€ä¸ªå«åšspecificityçš„å…¬å¼ï¼Œè¿™ä¸ªå…¬å¼ä¼šé€šè¿‡ï¼š æ ‡ç­¾åã€classã€id æ˜¯å¦å†…è”æ ·å¼ !important ç„¶åŽå¾—å‡ºä¸€ä¸ªæƒé‡å€¼ï¼Œå–æœ€é«˜çš„é‚£ä¸ªã€‚ æ¸²æŸ“é˜»å¡ž å½“é‡åˆ°ä¸€ä¸ªscriptæ ‡ç­¾æ—¶ï¼ŒDOM æž„å»ºä¼šè¢«æš‚åœï¼Œç›´è‡³è„šæœ¬å®Œæˆæ‰§è¡Œï¼Œç„¶åŽç»§ç»­æž„å»º DOM æ ‘ã€‚ ä½†å¦‚æžœ JS ä¾èµ– CSS æ ·å¼ï¼Œè€Œå®ƒè¿˜æ²¡æœ‰è¢«ä¸‹è½½å’Œæž„å»ºæ—¶ï¼Œæµè§ˆå™¨å°±ä¼šå»¶è¿Ÿè„šæœ¬æ‰§è¡Œï¼Œç›´è‡³ CSS Rules è¢«æž„å»ºã€‚ æ‰€æœ‰æˆ‘ä»¬çŸ¥é“ï¼š CSS ä¼šé˜»å¡ž JS æ‰§è¡Œ JS ä¼šé˜»å¡žåŽé¢çš„ DOM è§£æž ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œåº”è¯¥ä»¥ä¸‹åŽŸåˆ™ï¼š CSS èµ„æºæŽ’åœ¨ JavaScript èµ„æºå‰é¢ JS æ”¾åœ¨ HTML æœ€åº•éƒ¨ï¼Œä¹Ÿå°±æ˜¯ &lt;/body&gt;å‰ å¦å¤–ï¼Œå¦‚æžœè¦æ”¹å˜é˜»å¡žæ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨ defer ä¸Ž asyncï¼Œè¯¦è§ï¼šè¿™ç¯‡æ–‡ç« [5] 6.4. å¸ƒå±€ä¸Žç»˜åˆ¶ç¡®å®šæ¸²æŸ“æ ‘ç§æ‰€æœ‰èŠ‚ç‚¹çš„å‡ ä½•å±žæ€§ï¼Œæ¯”å¦‚ï¼šä½ç½®ã€å¤§å°ç­‰ç­‰ï¼Œæœ€åŽè¾“å…¥ä¸€ä¸ªç›’å­æ¨¡åž‹ï¼Œå®ƒèƒ½ç²¾å‡†åœ°æ•èŽ·åˆ°æ¯ä¸ªå…ƒç´ åœ¨å±å¹•å†…çš„å‡†ç¡®ä½ç½®ä¸Žå¤§å°ã€‚ ç„¶åŽéåŽ†æ¸²æŸ“æ ‘ï¼Œè°ƒç”¨æ¸²æŸ“å™¨çš„ paint() æ–¹æ³•åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå…¶å†…å®¹ã€‚ 6.5. åˆå¹¶æ¸²æŸ“å±‚æŠŠä»¥ä¸Šç»˜åˆ¶çš„æ‰€æœ‰å›¾ç‰‡åˆå¹¶ï¼Œæœ€ç»ˆè¾“å‡ºä¸€å¼ å›¾ç‰‡ã€‚ 6.6. å›žæµä¸Žé‡ç»˜å›žæµ(reflow) å½“æµè§ˆå™¨å‘çŽ°æŸä¸ªéƒ¨åˆ†å‘çŽ°å˜åŒ–å½±å“äº†å¸ƒå±€æ—¶ï¼Œéœ€è¦å€’å›žåŽ»é‡æ–°æ¸²æŸ“ï¼Œä¼šä»Žhtmlæ ‡ç­¾å¼€å§‹é€’å½’å¾€ä¸‹ï¼Œé‡æ–°è®¡ç®—ä½ç½®å’Œå¤§å°ã€‚ reflowåŸºæœ¬æ˜¯æ— æ³•é¿å…çš„ï¼Œå› ä¸ºå½“ä½ æ»‘åŠ¨ä¸€ä¸‹é¼ æ ‡ã€resize çª—å£ï¼Œé¡µé¢å°±ä¼šäº§ç”Ÿå˜åŒ–ã€‚ é‡ç»˜(repaint) æ”¹å˜äº†æŸä¸ªå…ƒç´ çš„èƒŒæ™¯è‰²ã€æ–‡å­—é¢œè‰²ç­‰ç­‰ä¸ä¼šå½±å“å‘¨å›´å…ƒç´ çš„ä½ç½®å˜åŒ–æ—¶ï¼Œå°±ä¼šå‘ç”Ÿé‡ç»˜ã€‚ æ¯æ¬¡é‡ç»˜åŽï¼Œæµè§ˆå™¨è¿˜éœ€è¦åˆå¹¶æ¸²æŸ“å±‚å¹¶è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚ å›žæµçš„æˆæœ¬è¦æ¯”é‡ç»˜é«˜å¾ˆå¤šï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°½é‡é¿å…äº§ç”Ÿå›žæµã€‚ æ¯”å¦‚ï¼š display:none ä¼šè§¦å‘å›žæµï¼Œè€Œ visibility:hidden åªä¼šè§¦å‘é‡ç»˜ã€‚ 6.7. JavaScript ç¼–è¯‘æ‰§è¡Œå¤§è‡´æµç¨‹ å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š 1. è¯æ³•åˆ†æžJS è„šæœ¬åŠ è½½å®Œæ¯•åŽï¼Œä¼šé¦–å…ˆè¿›å…¥è¯­æ³•åˆ†æžé˜¶æ®µï¼Œå®ƒé¦–å…ˆä¼šåˆ†æžä»£ç å—çš„è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œä¸æ­£ç¡®åˆ™æŠ›å‡ºâ€œè¯­æ³•é”™è¯¯â€ï¼Œåœæ­¢æ‰§è¡Œã€‚ å‡ ä¸ªæ­¥éª¤ï¼š åˆ†è¯ï¼Œä¾‹å¦‚å°†var a = 2ï¼Œï¼Œåˆ†æˆvarã€aã€=ã€2è¿™æ ·çš„è¯æ³•å•å…ƒã€‚ è§£æžï¼Œå°†è¯æ³•å•å…ƒè½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚ ä»£ç ç”Ÿæˆï¼Œå°†æŠ½è±¡è¯­æ³•æ ‘è½¬æ¢æˆæœºå™¨æŒ‡ä»¤ã€‚ 2. é¢„ç¼–è¯‘JS æœ‰ä¸‰ç§è¿è¡ŒçŽ¯å¢ƒï¼š å…¨å±€çŽ¯å¢ƒ å‡½æ•°çŽ¯å¢ƒ eval æ¯è¿›å…¥ä¸€ä¸ªä¸åŒçš„è¿è¡ŒçŽ¯å¢ƒéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ ¹æ®ä¸åŒçš„ä¸Šä¸‹æ–‡çŽ¯å¢ƒï¼Œå½¢æˆä¸€ä¸ªå‡½æ•°è°ƒç”¨æ ˆï¼Œæ ˆåº•æ°¸è¿œæ˜¯å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ ˆé¡¶åˆ™æ°¸è¿œæ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡çš„è¿‡ç¨‹ä¸­ï¼Œä¸»è¦åšäº†ä»¥ä¸‹ä¸‰ä»¶äº‹ï¼š åˆ›å»ºå˜é‡å¯¹è±¡ å‚æ•°ã€å‡½æ•°ã€å˜é‡ å»ºç«‹ä½œç”¨åŸŸé“¾ ç¡®è®¤å½“å‰æ‰§è¡ŒçŽ¯å¢ƒæ˜¯å¦èƒ½è®¿é—®å˜é‡ ç¡®å®š This æŒ‡å‘ 3. æ‰§è¡ŒJS çº¿ç¨‹ è™½ç„¶ JS æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†å®žé™…ä¸Šå‚ä¸Žå·¥ä½œçš„çº¿ç¨‹ä¸€å…±æœ‰å››ä¸ªï¼š â€œ å…¶ä¸­ä¸‰ä¸ªåªæ˜¯ååŠ©ï¼Œåªæœ‰ JS å¼•æ“Žçº¿ç¨‹æ˜¯çœŸæ­£æ‰§è¡Œçš„ â€ JS å¼•æ“Žçº¿ç¨‹ï¼šä¹Ÿå« JS å†…æ ¸ï¼Œè´Ÿè´£è§£æžæ‰§è¡Œ JS è„šæœ¬ç¨‹åºçš„ä¸»çº¿ç¨‹ï¼Œä¾‹å¦‚ V8 å¼•æ“Ž äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼šå±žäºŽæµè§ˆå™¨å†…æ ¸çº¿ç¨‹ï¼Œä¸»è¦ç”¨äºŽæŽ§åˆ¶äº‹ä»¶ï¼Œä¾‹å¦‚é¼ æ ‡ã€é”®ç›˜ç­‰ï¼Œå½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå°±ä¼šæŠŠäº‹ä»¶çš„å¤„ç†å‡½æ•°æŽ¨è¿›äº‹ä»¶é˜Ÿåˆ—ï¼Œç­‰å¾… JS å¼•æ“Žçº¿ç¨‹æ‰§è¡Œ å®šæ—¶å™¨è§¦å‘çº¿ç¨‹ï¼šä¸»è¦æŽ§åˆ¶setIntervalå’ŒsetTimeoutï¼Œç”¨æ¥è®¡æ—¶ï¼Œè®¡æ—¶å®Œæ¯•åŽï¼Œåˆ™æŠŠå®šæ—¶å™¨çš„å¤„ç†å‡½æ•°æŽ¨è¿›äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾… JS å¼•æ“Žçº¿ç¨‹ã€‚ HTTP å¼‚æ­¥è¯·æ±‚çº¿ç¨‹ï¼šé€šè¿‡XMLHttpRequestè¿žæŽ¥åŽï¼Œé€šè¿‡æµè§ˆå™¨æ–°å¼€çš„ä¸€ä¸ªçº¿ç¨‹ï¼Œç›‘æŽ§readyStateçŠ¶æ€å˜æ›´æ—¶ï¼Œå¦‚æžœè®¾ç½®äº†è¯¥çŠ¶æ€çš„å›žè°ƒå‡½æ•°ï¼Œåˆ™å°†è¯¥çŠ¶æ€çš„å¤„ç†å‡½æ•°æŽ¨è¿›äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“Žçº¿ç¨‹æ‰§è¡Œã€‚ æ³¨ï¼šæµè§ˆå™¨å¯¹åŒä¸€åŸŸåçš„å¹¶å‘è¿žæŽ¥æ•°æ˜¯æœ‰é™çš„ï¼Œé€šå¸¸ä¸º 6 ä¸ªã€‚ å®ä»»åŠ¡ åˆ†ä¸ºï¼š åŒæ­¥ä»»åŠ¡ï¼šæŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡å®ŒæˆåŽï¼Œæ‰èƒ½æ‰§è¡ŒåŽä¸€ä¸ªä»»åŠ¡ å¼‚æ­¥ä»»åŠ¡ï¼šä¸ç›´æŽ¥æ‰§è¡Œï¼Œåªæœ‰æ»¡è¶³è§¦å‘æ¡ä»¶æ—¶ï¼Œç›¸å…³çš„çº¿ç¨‹å°†è¯¥å¼‚æ­¥ä»»åŠ¡æŽ¨è¿›ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…JSå¼•æ“Žä¸»çº¿ç¨‹ä¸Šçš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•æ—¶æ‰å¼€å§‹æ‰§è¡Œï¼Œä¾‹å¦‚å¼‚æ­¥Ajaxã€DOMäº‹ä»¶ï¼ŒsetTimeoutç­‰ã€‚ å¾®ä»»åŠ¡ å¾®ä»»åŠ¡æ˜¯ES6å’ŒNodeçŽ¯å¢ƒä¸‹çš„ï¼Œä¸»è¦ API æœ‰ï¼šPromiseï¼Œprocess.nextTickã€‚ å¾®ä»»åŠ¡çš„æ‰§è¡Œåœ¨å®ä»»åŠ¡çš„åŒæ­¥ä»»åŠ¡ä¹‹åŽï¼Œåœ¨å¼‚æ­¥ä»»åŠ¡ä¹‹å‰ã€‚ ä»£ç ä¾‹å­ 1234console.log(&apos;1&apos;); // å®ä»»åŠ¡ åŒæ­¥setTimeout(function() &#123; console.log(&apos;2&apos;); // å®ä»»åŠ¡ å¼‚æ­¥&#125;)new Promise(function(resolve) &#123; console.log(&apos;3&apos;); // å®ä»»åŠ¡ åŒæ­¥ resolve();&#125;).then(function() &#123; console.log(&apos;4&apos;) // å¾®ä»»åŠ¡&#125;)console.log(&apos;5&apos;) // å®ä»»åŠ¡ åŒæ­¥ ä»¥ä¸Šä»£ç è¾“å‡ºé¡ºåºä¸ºï¼š1,3,5,4,2 å‚è€ƒæ–‡æ¡£ [1] ä½ æ‰€ä¸çŸ¥é“çš„ HSTS: http://t.cn/AiR8pTqx [2] è¯¦è§è¿™ç¯‡æ–‡ç« : http://t.cn/AiR8pnEC [3] MIME: http://t.cn/AiR8prtm [4] è¯­æ³•è§„èŒƒ: http://t.cn/AiR80GdO [5] è¿™ç¯‡æ–‡ç« : http://t.cn/AiR80c1k [6] what-happens-when-zh_CN: http://t.cn/AiR80xb5 [7] Tags to DOM:http://t.cn/AiR80djX [8] å½»åº•ç†è§£æµè§ˆå™¨çš„ç¼“å­˜æœºåˆ¶: http://t.cn/AiR8Ovob [9] æµè§ˆå™¨çš„å·¥ä½œåŽŸç†ï¼šæ–°å¼ç½‘ç»œæµè§ˆå™¨å¹•åŽæ­ç§˜: http://t.cn/AiR8Oz06 [10] æ·±å…¥æµ…å‡ºæµè§ˆå™¨æ¸²æŸ“åŽŸç†: http://t.cn/AiR8O4fO [11] jså¼•æ“Žçš„æ‰§è¡Œè¿‡ç¨‹ï¼ˆä¸€ï¼‰:http://t.cn/AiR8Ot3s]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>tips</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Googleç»ˆäºŽå‘å¸ƒäº†Android 10æ­£å¼ç‰ˆ]]></title>
    <url>%2Fposts%2F3609d6c4.html</url>
    <content type="text"><![CDATA[å‰è¨€9æœˆ4å·å‡Œæ™¨ï¼ŒGoogleç»ˆäºŽå‘å¸ƒäº†Android 10æ­£å¼ç‰ˆï¼ å…¨æ–°çš„Logoï¼Œä¾ç„¶æ²¿ç”¨ç»å…¸æœºå™¨äººï¼Œä½†åœ¨å›¾æ ‡ï¼Œé¢œè‰²åŠç»†èŠ‚ä¸Šéƒ½æœ‰æ˜Žæ˜¾å˜åŠ¨ã€‚æ–°çš„è®¾è®¡æ˜¯ä¸ºäº†æ›´åŠ çŽ°ä»£ï¼Œæ›´åŠ æ˜“ç”¨ã€‚ç‰¹åˆ«æ˜¯æ–‡å­—ä»Žç»¿è‰²æ”¹ä¸ºäº†é»‘è‰²ï¼Œè¿™æ ·çš„å˜æ›´å¯¹è§†è§‰éšœç¢è€…æ›´åŠ å‹å¥½ã€‚ é™¤äº†Logoçš„å˜åŒ–ï¼Œæ–°ç‰ˆAndroidç³»ç»Ÿçš„å‘½åä¹Ÿæœ‰é‡å¤§å˜åŠ¨ã€‚çŽ°æœ‰çš„å‘½åè§„åˆ™æ˜¯å®‰è£…è‹±æ–‡å­—æ¯é¡ºåºä¾æ¬¡é€‰åŒºç”œå“æˆ–é›¶é£Ÿæ¥å‘½åã€‚å¦‚æžœä»Ž09å¹´çš„Cupcakeç®—èµ·ï¼Œä¸ç®—08å¹´å¼€å§‹çš„alphaå’Œbeatæµ‹è¯•ç‰ˆï¼Œåˆ°çŽ°åœ¨å·²ç»ç”¨äº†10å¹´ã€‚ åœ¨æ–°çš„ç‰ˆæœ¬ä¸­å°†æ‰“ç ´ç”œå“ï¼Œé›¶é£Ÿçš„å‘½åè§„åˆ™ï¼Œå¯èƒ½æ”¹ä¸ºAndroid 10ã€‚Davidè¡¨ç¤ºï¼šâ€œæ”¹å˜å‘½åæ˜¯ä¸ºäº†é¿å…å…¨çƒä¸åŒåœ°åŒºçš„è¯¯è§£ï¼ŒæŸäº›è¯­è¨€é‡ŒLå’ŒRæ˜¯æ²¡æœ‰åŒºåˆ†çš„ã€‚å¦å¤–æœ‰äº›åœ°æ–¹é¦…é¥¼ä¹Ÿä¸æ˜¯ç”œç‚¹ï¼Œæ£‰èŠ±ç³–è™½ç„¶å‘³é“ä¸é”™ï¼Œä½†æ˜¯åœ¨ä¸–ç•Œä¸Šæœ‰å¾ˆå¤šåœ°åŒºæ˜¯ä¸å—æ¬¢è¿Žçš„é£Ÿç‰©ã€‚â€ 1. åˆ›æ–°ä½“éªŒæœ¬æ¬¡Android 10å¸¦æ¥äº†å…¨æ–°çš„ç”¨æˆ·ä½“éªŒï¼ŒåŒ…æ‹¬ï¼š æš—é»‘ä¸»é¢˜ æ™ºèƒ½å›žå¤ 5Gç½‘ç»œæ”¯æŒ å¯æŠ˜å  1.1 æš—é»‘ä¸»é¢˜å¯¹äºŽç”¨æˆ·æ¥è¯´ï¼ˆç‰¹åˆ«æ˜¯ä½Žè§†åŠ› &amp; å¼ºå…‰æ•æ„Ÿï¼‰ï¼Œå¯æé«˜å±å¹•å†…å®¹å¯è§åº¦ &amp; ä¿æŠ¤æ€§ã€‚ 1.2 æ™ºèƒ½å›žå¤ ä½¿ç”¨æœºå™¨å­¦ä¹ æ¥é¢„æµ‹ä½ åœ¨å›žå¤ä¿¡æ¯æ—¶å¯èƒ½ä¼šè¯´äº›ä»€ä¹ˆï¼Œä»Žè€Œæä¾›å¯¹ä¿¡æ¯çš„å›žå¤å»ºè®® &amp; å»ºè®®æ“ä½œ å¦‚æœ‹å‹çº¦åƒé¥­ï¼ŒGoogleä¼šå»ºè®®ä½ å‘é€å›žåº”çŸ­ä¿¡ &amp; åœ¨ Google åœ°å›¾ä¸­ç›´æŽ¥æ˜¾ç¤ºä½ç½®ä¿¡æ¯ æ³¨ï¼šæœ¬åœ¨ Android P ä¸­å·²æä¾›ï¼Œä½†ä»…é™äºŽè°·æ­Œä¸“ç”¨çš„åº”ç”¨ç¨‹åºï¼›æœ¬æ¬¡Android 10 ä¸­ï¼Œå·²å†…ç½®åˆ°æ•´ä¸ªé€šçŸ¥ç³»ç»Ÿä¸­ã€‚ 1.3 5Gç½‘ç»œé’ˆå¯¹ä¹‹å‰å·²å…¬å¸ƒçš„5Gç½‘ç»œï¼ŒAndroid 10å¢žåŠ äº†å¯¹5Gç½‘ç»œé€šä¿¡æ”¯æŒï¼ˆæä¾›äº†æ£€æµ‹è¿žæŽ¥æ€§çš„APIï¼‰ï¼Œä»Žè€Œä½¿å¾—ç”¨æˆ·å¯ä»¥èŽ·å¾—æ›´åŠ å¿«é€Ÿçš„ç½‘ç»œå†²å‡‰ä½“éªŒã€‚ 1.4 å¯æŠ˜å æ”¯æŒé’ˆå¯¹åº”ç”¨ç¨‹åºçª—å£çš„å¤šä»»åŠ¡å¤„ç†ï¼ŒAndroid 10å¢žåŠ äº†å¯¹å¯æŠ˜å å±çš„æ”¯æŒï¼šè®¾å¤‡æŠ˜å  / å±•å¼€æ—¶æä¾›å±å¹•è¿žç»­æ€§æ¥ç»´æŠ¤åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œé€šè¿‡ä¼˜åŒ–å¯æŠ˜å è®¾å¤‡ï¼Œä¸ºå½“ä»Šçš„åˆ›æ–°è®¾å¤‡æä¾›æ— ç¼ä½“éªŒã€‚ 2. éšç§ä¿æŠ¤è¿‘å¹´æ¥ï¼ŒGoogleå¯¹äºŽç”¨æˆ·çš„éšç§ä¿æŠ¤ååˆ†çœ‹é‡ã€‚Android 10æ›´æ–°ä¸­ï¼Œå¯¹äºŽéšç§ä¿æŠ¤ä¹Ÿæ˜¯æ ¸å¿ƒå…³æ³¨ç‚¹ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ï¼š 3. å®‰å…¨åŠ å¼ºç”±äºŽAndroidç¢Žç‰‡åŒ–ï¼Œç³»ç»Ÿçš„å®‰å…¨æ€§ä¸€ç›´è¢«è¯Ÿç—…ã€‚åœ¨Android 10ä¸­ï¼Œå¼•å…¥äº†æ›´å¤šçš„ç¡®å®šç”¨æˆ·å®‰å…¨çš„ç‰¹æ€§ï¼Œå…·ä½“å¦‚ä¸‹ï¼š 4. ç³»ç»Ÿä¼˜åŒ–ä¸»è¦åŒ…æ‹¬ARTä¼˜åŒ– &amp; ç¥žç»ç½‘ç»œå‡çº§ 4.1 ARTä¼˜åŒ–ARTè¿è¡Œæ—¶çš„æ”¹è¿›å¯ä»¥å¸®åŠ©æ‚¨çš„åº”ç”¨ç¨‹åºå¯åŠ¨å¾—æ›´å¿«ã€æ¶ˆè€—æ›´å°‘çš„å†…å­˜ã€è¿è¡Œå¾—æ›´æµç•…ã€‚Googleå¯¹ARTè¿›è¡Œäº†ä¼˜åŒ–ï¼š åœ¨è¿è¡Œå‰ï¼Œå°±é¢„å…ˆç¼–è¯‘åº”ç”¨ç¨‹åºçš„éƒ¨åˆ† åœ¨è¿è¡Œæ—¶ï¼Œåˆ†ä»£åžƒåœ¾æ”¶é›†ä½¿åžƒåœ¾æ”¶é›†åœ¨æ—¶é—´ &amp; CPUæ–¹é¢æ›´é«˜æ•ˆï¼Œå‡å°‘jankï¼Œå¹¶å¸®åŠ©åº”ç”¨ç¨‹åºåœ¨ä½Žç«¯è®¾å¤‡ä¸Šæ›´å¥½åœ°è¿è¡Œã€‚ ä»¥ä¸‹æ˜¯ä¼˜åŒ–å¯¹æ¯”ï¼š 4.2 ç¥žç»ç½‘ç»œå‡çº§ å¢žåŠ äº†å¤§é‡åœ¨ç¥žç»ç½‘ç»œæ–¹é¢çš„æ–°æ“ä½œï¼ŒåŒ…æ‹¬ARGMAXã€ARGMINã€é‡åŒ–LSTM &amp; ä¸€ç³»åˆ—æ€§èƒ½ä¼˜åŒ– è¿™ä½¿å¾—åŠ é€Ÿæ›´å¤§èŒƒå›´çš„æ¨¡åž‹å¥ å®šäº†åŸºç¡€ï¼Œæ¯”å¦‚ç”¨äºŽç›®æ ‡æ£€æµ‹å’Œå›¾åƒåˆ†å‰²çš„æ¨¡åž‹ æ­£åœ¨ä¸Žç¡¬ä»¶ä¾›åº”å•†å’Œæµè¡Œçš„æœºå™¨å­¦ä¹ æ¡†æž¶ï¼ˆå¦‚TensorFlowï¼‰åˆä½œï¼Œä¼˜åŒ–å’ŒæŽ¨å‡ºå¯¹NNAPI 1.2çš„æ”¯æŒ å…³äºŽæ›´æ–°æŽ¨é€ Googleé¦–å…ˆé¢å‘è‡ªèº«çš„Pixelç³»åˆ—è®¾å¤‡æŽ¨é€ å¯¹äºŽå›½å†…ï¼Œå°ç±³æˆä¸ºå›½å†…ç¬¬ä¸€å®¶æä¾›Android 10æ›´æ–°çš„å…¬å¸ - å…¶æ——ä¸‹çš„Redmi K20 Pro é¦–æ‰¹æŽ¥æ”¶åˆ°äº†åŸºäºŽ Android 10 çš„ MIUI æ›´æ–° æœ€åŽ æ¯æ¬¡Anroidæ–°ç‰ˆæœ¬çš„åˆ°æ¥ï¼Œå°±æ„å‘³ç€æˆ‘ä»¬è¦è¿›è¡Œé€‚é…ã€‚ å›žé¡¾åŽ†å²ç‰ˆæœ¬è®©æˆ‘ä»¬ä¸€èµ·å›žå¿†è¿™10å¹´æ¥é™ªä¼´æˆ‘ä»¬çš„Androidç‚¹å¿ƒã€‚è¿™æ˜¯æ¯ä¸ªAndroid å¼€å‘è€…çš„é’æ˜¥ã€‚ Cupcake 1.5 ï¼ˆçº¸æ¯è›‹ç³•ï¼‰â€“ 2009å¹´4æœˆ Donut 1.6ï¼ˆç”œç”œåœˆï¼‰â€“ 2009å¹´9æœˆ Eclair 2.0-1ï¼ˆæ³¡èŠ™ï¼‰â€“ 2009å¹´10æœˆ26æ—¥ Froyo 2.2ï¼ˆå†»é…¸å¥¶ï¼‰â€“ 2010å¹´5æœˆ Gingerbread 2.3ï¼ˆå§œé¥¼ï¼‰â€“ 2010å¹´12æœˆ Honeycomb 3.0-2ï¼ˆèœ‚å·¢ï¼‰â€“ 2011å¹´2æœˆ2æ—¥ Ice Cream Sandwich 4.0ï¼ˆå†°æ·‡æ·‹ä¸‰æ˜Žæ²»ï¼‰â€“ 2011å¹´10æœˆ19æ—¥ Jelly Bean 4.1-3ï¼ˆæžœå†»è±†ï¼‰â€“ 2012å¹´6æœˆ28æ—¥ KitKat 4.4ï¼ˆæ—¥æœ¬å·§å…‹åŠ›å“ç‰Œï¼‰â€“ 2013å¹´11æœˆ01æ—¥ Lollipop 5.0-1ï¼ˆæ£’æ£’ç³–ï¼‰â€“ 2014å¹´10æœˆ15æ—¥ Marshmallow 6.0ï¼ˆæ£‰èŠ±ç³–ï¼‰â€“ 2015å¹´9æœˆ30æ—¥ Nougat 7.0-1ï¼ˆç‰›è½§ç³–ï¼‰â€“ 2016å¹´8æœˆ22æ—¥ Oreo 8.0-1ï¼ˆå¥¥åˆ©å¥¥ï¼‰â€“ 2017 å¹´ 8 æœˆ 22 æ—¥ Pie 9.0ï¼ˆæžœé¦…æ´¾ï¼‰â€“ 2018 å¹´ 5æœˆ 9æ—¥]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android Tips</tag>
        <tag>Androidç‰ˆæœ¬</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¼˜é›…è§£å†³Androidè½¯é”®ç›˜å¼¹å‡ºæ—¶æŠŠå¸ƒå±€é¡¶ä¸ŠåŽ»]]></title>
    <url>%2Fposts%2Ff2eb3913.html</url>
    <content type="text"><![CDATA[è§£å†³æ–¹æ³•æ–¹æ³•ä¸€ï¼šåœ¨ä½ çš„activityä¸­çš„oncreateä¸­setContentViewä¹‹å‰å†™ä¸Šè¿™ä¸ªä»£ç  1getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN); æ–¹æ³•äºŒï¼šåœ¨é¡¹ç›®çš„AndroidManifest.xmlæ–‡ä»¶ä¸­ç•Œé¢å¯¹åº”çš„é‡ŒåŠ å…¥android:windowSoftInputMode=â€stateVisible|adjustResizeâ€ï¼Œè¿™æ ·ä¼šè®©å±å¹•æ•´ä½“ä¸Šç§»ã€‚å¦‚æžœåŠ ä¸Šçš„æ˜¯android:windowSoftInputMode=â€adjustPanâ€è¿™æ ·é”®ç›˜å°±ä¼šè¦†ç›–å±å¹•ã€‚ æ–¹æ³•ä¸‰ï¼šæŠŠé¡¶çº§çš„layoutæ›¿æ¢æˆScrollViewï¼Œæˆ–è€…è¯´åœ¨é¡¶çº§çš„Layoutä¸Šé¢å†åŠ ä¸€å±‚ScrollViewçš„å°è£…ã€‚è¿™æ ·å°±ä¼šæŠŠè½¯é”®ç›˜å’Œè¾“å…¥æ¡†ä¸€èµ·æ»šåŠ¨äº†ï¼Œè½¯é”®ç›˜ä¼šä¸€ç›´å¤„äºŽåº•éƒ¨ã€‚ ä¸»çª—å£ä¸Žè½¯é”®ç›˜çª—å£äº¤äº’è®¾ç½®å€¼å¦‚ä¸‹ï¼š å°†è¦†ç›–åœ¨ä¸»é¢˜ä¸­è®¾ç½®çš„å€¼ å€¼æè¿° â€œstateUnspecifiedâ€ è½¯é”®ç›˜çš„çŠ¶æ€(æ˜¯å¦å®ƒæ˜¯éšè—æˆ–å¯è§)æ²¡æœ‰è¢«æŒ‡å®šã€‚ç³»ç»Ÿå°†é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„çŠ¶æ€æˆ–ä¾èµ–äºŽä¸»é¢˜çš„è®¾ç½®ã€‚è¿™ä¸ªæ˜¯ä¸ºäº†è½¯ä»¶ç›˜è¡Œä¸ºé»˜è®¤çš„è®¾ç½®ã€‚ â€œstateUnchangedâ€ è½¯é”®ç›˜è¢«ä¿æŒæ— è®ºå®ƒä¸Šæ¬¡æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼Œæ˜¯å¦å¯è§æˆ–éšè—ï¼Œå½“ä¸»çª—å£å‡ºçŽ°åœ¨å‰é¢æ—¶ã€‚ â€œstateHiddenâ€ å½“ç”¨æˆ·é€‰æ‹©è¯¥Activityæ—¶ï¼Œè½¯é”®ç›˜è¢«éšè—â€”â€”ä¹Ÿå°±æ˜¯ï¼Œå½“ç”¨æˆ·ç¡®å®šå¯¼èˆªåˆ°è¯¥Activityæ—¶ï¼Œè€Œä¸æ˜¯è¿”å›žåˆ°å®ƒç”±äºŽç¦»å¼€å¦ä¸€ä¸ªActivityã€‚ â€œstateAlwaysHiddenâ€ è½¯é”®ç›˜æ€»æ˜¯è¢«éšè—çš„ï¼Œå½“è¯¥Activityä¸»çª—å£èŽ·å–ç„¦ç‚¹æ—¶ã€‚ â€œstateVisibleâ€ è½¯é”®ç›˜æ˜¯å¯è§çš„ï¼Œå½“é‚£ä¸ªæ˜¯æ­£å¸¸åˆé€‚çš„æ—¶(å½“ç”¨æˆ·å¯¼èˆªåˆ°Activityä¸»çª—å£æ—¶)ã€‚ â€œstateAlwaysVisibleâ€ å½“ç”¨æˆ·é€‰æ‹©è¿™ä¸ªActivityæ—¶ï¼Œè½¯é”®ç›˜æ˜¯å¯è§çš„â€”â€”ä¹Ÿå°±æ˜¯ï¼Œä¹Ÿå°±æ˜¯ï¼Œå½“ç”¨æˆ·ç¡®å®šå¯¼èˆªåˆ°è¯¥Activityæ—¶ï¼Œè€Œä¸æ˜¯è¿”å›žåˆ°å®ƒç”±äºŽç¦»å¼€å¦ä¸€ä¸ªActivityã€‚ â€œadjustUnspecifiedâ€ å®ƒä¸è¢«æŒ‡å®šæ˜¯å¦è¯¥ Activityä¸»çª—å£è°ƒæ•´å¤§å°ä»¥ä¾¿ç•™å‡ºè½¯é”®ç›˜çš„ç©ºé—´ï¼Œæˆ–æ˜¯å¦çª—å£ä¸Šçš„å†…å®¹å¾—åˆ°å±å¹•ä¸Šå½“å‰çš„ç„¦ç‚¹æ˜¯å¯è§çš„ã€‚ç³»ç»Ÿå°†è‡ªåŠ¨é€‰æ‹©è¿™äº›æ¨¡å¼ä¸­ä¸€ç§ä¸»è¦ä¾èµ–äºŽæ˜¯å¦çª—å£çš„å†…å®¹æœ‰ä»»ä½•å¸ƒå±€è§†å›¾èƒ½å¤Ÿæ»šåŠ¨ä»–ä»¬çš„å†…å®¹ã€‚å¦‚æžœæœ‰è¿™æ ·çš„ä¸€ä¸ªè§†å›¾ï¼Œè¿™ä¸ªçª—å£å°†è°ƒæ•´å¤§å°ï¼Œè¿™æ ·çš„å‡è®¾å¯ä»¥ä½¿æ»šåŠ¨çª—å£çš„å†…å®¹åœ¨ä¸€ä¸ªè¾ƒå°çš„åŒºåŸŸä¸­å¯è§çš„ã€‚è¿™ä¸ªæ˜¯ä¸»çª—å£é»˜è®¤çš„è¡Œä¸ºè®¾ç½®ã€‚ â€œadjustResizeâ€ è¯¥Activityä¸»çª—å£æ€»æ˜¯è¢«è°ƒæ•´å±å¹•çš„å¤§å°ä»¥ä¾¿ç•™å‡ºè½¯é”®ç›˜çš„ç©ºé—´ â€œadjustPanâ€ è¯¥Activityä¸»çª—å£å¹¶ä¸è°ƒæ•´å±å¹•çš„å¤§å°ä»¥ä¾¿ç•™å‡ºè½¯é”®ç›˜çš„ç©ºé—´ã€‚ç›¸åï¼Œå½“å‰çª—å£çš„å†…å®¹å°†è‡ªåŠ¨ç§»åŠ¨ä»¥ä¾¿å½“å‰ç„¦ç‚¹ä»Žä¸è¢«é”®ç›˜è¦†ç›–å’Œç”¨æˆ·èƒ½æ€»æ˜¯çœ‹åˆ°è¾“å…¥å†…å®¹çš„éƒ¨åˆ†ã€‚è¿™ä¸ªé€šå¸¸æ˜¯ä¸æœŸæœ›æ¯”è°ƒæ•´å¤§å°ï¼Œå› ä¸ºç”¨æˆ·å¯èƒ½å…³é—­è½¯é”®ç›˜ä»¥ä¾¿èŽ·å¾—ä¸Žè¢«è¦†ç›–å†…å®¹çš„äº¤äº’æ“ä½œã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android Tips</tag>
        <tag>è½¯é”®ç›˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android APK å®‰è£…çš„åŽŸç†]]></title>
    <url>%2Fposts%2F2da5bed1.html</url>
    <content type="text"><![CDATA[å‰è¨€å¤§å®¶æœ‰æ²¡æœ‰æƒ³è¿‡ä¸€ä¸ªåº”ç”¨çš„APKæ˜¯æ€Žä¹ˆè¢«å®‰è£…åˆ°å®‰å“æ‰‹æœºä¸Šçš„ï¼Œå®‰è£…çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼ŒWindowsåº”ç”¨ç¨‹åºçš„å®‰è£…åŒ…æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„åŽ‹ç¼©åŒ…ï¼Œå®‰è£…çš„è¿‡ç¨‹æ˜¯æŠŠåŽ‹ç¼©åŒ…ä¸­çš„æ•°æ®å’Œä¾èµ–åº“æ‹·è´åˆ°å®‰è£…ç›®å½•ï¼Œå†åœ¨æ¡Œé¢æˆ–å¯åŠ¨æ åˆ›å»ºå¿«æ·æ–¹å¼ï¼Œé‚£ä¹ˆå®‰å“çš„APKå®‰è£…è¿‡ç¨‹æ˜¯ä¸æ˜¯ä¹Ÿæ˜¯è¿™æ ·çš„å‘¢ï¼Ÿæœ¬æ–‡å°†ä¸ºå¤§å®¶è§£ç­”è¿™äº›é—®é¢˜ã€‚ APKåŒ…çš„æž„æˆé¦–å…ˆï¼Œæˆ‘çœ‹ä¸€ä¸‹APKåŒ…çš„æž„æˆï¼ŒAndroidçš„APKåŒ…å’ŒWindowsåº”ç”¨ç¨‹åºå®‰è£…åŒ…æ˜¯ä¸åŒçš„ï¼Œå®ƒåªæ˜¯ä¸ªç®€å•çš„åŽ‹ç¼©åŒ…ï¼Œæ²¡æœ‰å¯æ‰§è¡Œçš„èƒ½åŠ›ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨zipå·¥å…·ç›´æŽ¥è§£åŽ‹å®ƒã€‚ ä¸€ä¸ªAPKåŒ…å«ä»¥ä¸‹è¿™äº›æ–‡ä»¶ï¼š META-INFç›®å½•ï¼šåŒ…å«ä¸¤ä¸ªç­¾åæ–‡ä»¶ï¼ˆCERT.SFå’ŒCERT.RSAï¼‰ï¼Œä»¥åŠä¸€ä¸ªmanifestæ–‡ä»¶ï¼ˆMANIFEST.MFï¼‰ assetsç›®å½•ï¼šåŒ…å«å·¥ç¨‹ä¸­çš„assetç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨AssetManagerèŽ·å– resç›®å½•ï¼šåŒ…å«é‚£äº›æ²¡æœ‰è¢«ç¼–è¯‘åˆ°resources.arscçš„èµ„æº libç›®å½•ï¼šåŒ…å«é€‚ç”¨äºŽä¸åŒå¤„ç†å™¨çš„ç¬¬ä¸‰æ–¹ä¾èµ–åº“ï¼Œè¿™é‡Œè¾¹å¯ä»¥æœ‰å¤šä¸ªå­ç›®å½•ï¼Œæ¯”å¦‚armeabi, armeabi-v7a, arm64-v8a, x86, x86_64, ä»¥åŠmips resources.arscæ–‡ä»¶ï¼šå­˜å‚¨ç¼–è¯‘å¥½çš„èµ„æºï¼ŒåŒ…æ‹¬é¡¹ç›®å·¥ç¨‹ä¸­çš„res/valuesç›®å½•é‡Œçš„xmlæ–‡ä»¶ï¼Œå®ƒä»¬éƒ½è¢«ç¼–è¯‘æˆäºŒè¿›åˆ¶æ ¼å¼ï¼Œä¹ŸåŒ…æ‹¬ä¸€äº›è·¯å¾„ï¼ŒæŒ‡å‘é‚£äº›æ²¡æœ‰è¢«ç¼–è¯‘çš„èµ„æºï¼Œæ¯”å¦‚layoutæ–‡ä»¶å’Œå›¾ç‰‡ classes.dexæ–‡ä»¶ï¼šé¡¹ç›®ä¸­çš„javaç±»éƒ½è¢«ç¼–è¯‘åˆ°è¯¥dexæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¯ä»¥è¢«Androidçš„Dalvik/ARTè™šæ‹Ÿæœºè§£æžã€‚ AndroidManifest.xmlï¼šäºŒè¿›åˆ¶æ ¼å¼çš„manifestæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å¿…é¡»çš„ã€‚ è¿™äº›æ–‡ä»¶æ˜¯Androidç³»ç»Ÿè¿è¡Œä¸€ä¸ªåº”ç”¨ç¨‹åºæ—¶ä¼šç”¨åˆ°çš„æ•°æ®å’Œä»£ç ï¼Œä¸‹é¢ä»‹ç»ç³»ç»Ÿå¦‚ä½•å®‰è£…ä¸€ä¸ªAPKåŒ…ã€‚ å®‰è£…APKæˆ‘ä»¬å®‰è£…åº”ç”¨ç¨‹åºï¼Œæœ€å¸¸ç”¨çš„æ–¹æ³•å°±æ˜¯åœ¨PCä¸Šè¿è¡Œå‘½ä»¤adb install åŠ APKçš„æ–‡ä»¶è·¯å¾„ï¼Œå›žè½¦ç­‰å¾…Androidè®¾å¤‡å®‰è£…å®Œæˆï¼Œå®‰è£…æˆåŠŸå‘½ä»¤è¡Œä¼šæ˜¾ç¤ºSuccessã€‚é‚£ä¹ˆå…¶å†…éƒ¨æ˜¯æ€Žæ ·çš„ä¸€ä¸ªè¿‡ç¨‹å‘¢ï¼Ÿ 1. å°†APKåŒ…pushåˆ°æ‰‹æœºé¦–å…ˆï¼Œadbä¼šå°†PCç«¯çš„APKæ–‡ä»¶pushåˆ°Androidè®¾å¤‡çš„/data/local/tmpç›®å½•ä¸‹ï¼Œä¸€äº›æ‰‹æœºä¼šå°†æ‹·è´çš„è¿›åº¦åé¦ˆç»™adbå®¢æˆ·ç«¯ï¼ŒäºŽæ˜¯PCä¸Šçš„å‘½ä»¤è¡Œä¼šå±•ç¤ºæ‹·è´çš„è¿›åº¦ã€‚ 2. æ‰§è¡Œpmå‘½ä»¤PCç«¯çš„adbç¨‹åºä¼šå‘Androidç«¯çš„adbdå‘é€shell:pmå‘½ä»¤ï¼ŒäºŽæ˜¯adbdä¼šå‘ç³»ç»Ÿçš„PackageManagerServiceï¼ˆPMSï¼‰è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œé€šçŸ¥å…¶å®‰è£…apkåŒ…ã€‚è¿™é‡Œæˆ‘æœ‰ä¸¤ä¸ªç†è§£ï¼šç†è§£ä¸€ï¼šæˆ‘ä»¬å¹³å¸¸ä¹Ÿå¯ä»¥åœ¨adb shellä¸Šæ‰§è¡Œpmå‘½ä»¤ä¸ŽPMSäº¤äº’ï¼Œé‚£ä¹ˆpmåº”è¯¥æ˜¯ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œadbdæ‰§è¡Œpmå‘½ä»¤ï¼Œæ˜¯å¯åŠ¨äº†pmè¿™ä¸ªè¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹å†å‘PMSè¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œé€šçŸ¥å…¶å®‰è£…APKã€‚ç†è§£äºŒï¼šadbdç›´æŽ¥å‘PMSè¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œé€šçŸ¥å…¶å®‰è£…APKã€‚ä¸çŸ¥å“ªä¸ªæ­£ç¡®ï¼Œè¿™ä¸ªæœ‰å¾…ç»§ç»­ç ”ç©¶ï¼Œå¦‚æžœæœ‰ç«¥éž‹äº†è§£è¿™ä¸ªï¼Œå¸Œæœ›èƒ½ä¸åèµæ•™ã€‚ 3. è§¦å‘å®‰è£…è¿‡ç¨‹PMSé¦–å…ˆå°†APKåŒ…æ‹·è´åˆ°å¦å¤–ä¸€ä¸ªç›®å½•/data/appï¼Œè¿™ä¸ªç›®å½•æ˜¯éžç³»ç»Ÿåº”ç”¨çš„apkå­˜æ”¾çš„ç›®å½•ï¼Œä¸Žä¹‹ç›¸å¯¹åº”çš„ï¼Œç³»ç»Ÿåº”ç”¨çš„apkå­˜æ”¾çš„ç›®å½•æ˜¯/system/frameworksã€/system/appå’Œ/vendor/appã€‚PMSå†…éƒ¨æœ‰ä¸ªAppDirObserverç±»ï¼Œå…¶ç›‘å¬ç€/data/appç›®å½•çš„å˜åŒ–ï¼Œå½“apkè¢«å¤åˆ¶åˆ°/data/appç›®å½•ä¹‹åŽï¼Œè¯¥ç±»éšå³è§¦å‘PMSå¯¹APKè¿›è¡Œè§£æžã€‚ 4. APKçš„è§£æžæˆ‘ä»¬å¯ä»¥å…ˆæƒ³æƒ³ï¼ŒAndroidç³»ç»Ÿæ˜¯å¦‚ä½•å¯åŠ¨ä¸€ä¸ªAPPçš„ï¼Ÿæ¯”å¦‚ç‚¹å‡»å±å¹•ä¸Šçš„åº”ç”¨å›¾æ ‡ï¼Œç„¶åŽä¸€ä¸ªActivityå°±è¢«å¯åŠ¨äº†ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ¡Œé¢ç¨‹åºLauncherå…ˆæ˜¯å‘ActivityManagerServiceï¼ˆAMSï¼‰è¿›ç¨‹å‘é€äº†ä¸€ä¸ªIntentï¼ŒAMSéšå³ä¼šå°†è¿™ä¸ªIntentæ‰”ç»™PMSï¼ŒPMSåˆ™è§£æžè¿™ä¸ªIntentå¾—åˆ°Activityçš„ä¿¡æ¯ç»™åˆ°AMSï¼Œç„¶åŽAMSä¼šå¯åŠ¨ä¸€ä¸ªç©ºè¿›ç¨‹ï¼Œå¹¶é€šçŸ¥è¯¥è¿›ç¨‹åˆ›å»ºè¯¥Activityã€‚é‚£ä¹ˆPMSä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªActivityçš„ä¿¡æ¯å‘¢ï¼Ÿ è¿™å°±æ˜¯PMSè§£æžAPKè¦åšçš„äº‹æƒ…äº†ï¼Œè€Œè§£æžAPKçš„æ—¶æœºåˆè¦åˆ†æˆä¸¤ç§åœºæ™¯ï¼š 1. ç³»ç»Ÿå¯åŠ¨æ—¶è§£æžAPKAndroidç³»ç»Ÿåœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªsystem_serverè¿›ç¨‹ï¼Œè¿™ä¸ªè¿›ç¨‹é©»ç•™ç€ç³»ç»Ÿå¤šä¸ªé‡è¦çš„æœåŠ¡ï¼Œå…¶ä¸­ä¾¿åŒ…å«äº†ä¸ŽAPKæœ€ç›¸å…³çš„PackageManagerServiceæœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šæ‰«æAndroidç³»ç»Ÿä¸­å‡ ä¸ªç›®æ ‡æ–‡ä»¶å¤¹ä¸­çš„APKï¼Œå¯¹æ¯ä¸ªAPKè¿›è¡Œè§£æžã€‚ 2. å®‰è£…è¿‡ç¨‹ä¸­è§£æžAPKå®‰è£…ä¸€ä¸ªapkçš„è¿‡ç¨‹ï¼ŒPMSä¹Ÿä¼šå¯¹è¿™ä¸ªAPKè¿›è¡Œè§£æžï¼Œå…¶è°ƒç”¨çš„æ˜¯PackageManagerService.javaçš„scanPackageLI()æ–¹æ³•ï¼Œå…¶å®žåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶æ‰«æå…¨éƒ¨apkçš„è¿‡ç¨‹ä¹Ÿæ˜¯è°ƒç”¨è¯¥æ–¹æ³•ã€‚ å¯ä»¥è¿™æ ·ç†è§£ï¼Œç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œæ˜¯è§£æžå·²ç»å®‰è£…çš„æ‰€æœ‰APKï¼Œè€Œå®‰è£…å•ä¸ªAPKæ—¶ï¼Œåˆ™æ˜¯ç”¨åŒæ ·çš„æ–¹æ³•è§£æžè¿™ä¸ªAPKï¼Œè¿‡ç¨‹æ˜¯ä¸€æ ·çš„ã€‚ é‚£ä¹ˆè§£æžAPKå…·ä½“åšçš„æ˜¯ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ å…¶ä¸­ä¸»è¦çš„è¿‡ç¨‹å°±æ˜¯è§£æžAPKä¸­çš„AndroidManifest.xmlæ–‡ä»¶ï¼Œå°†APKçš„å…³é”®ä¿¡æ¯å››å¤§ç»„ä»¶ä¿¡æ¯ã€æƒé™ä¿¡æ¯ç­‰å­˜å‚¨åœ¨å†…å­˜ä¸­çš„PackageParserå¯¹è±¡ä¸­ï¼ŒPackageParserå¯¹è±¡çš„ç»“æž„å¦‚å›¾æ‰€ç¤ºï¼š è¿™ä¸ªPackageParseråŒ…å«äº†IntentFilterçš„ä¿¡æ¯ï¼Œä½¿å¾—PMSå¯ä»¥æ ¹æ®Intentæ¥èŽ·å–ä¸€ä¸ªActivityçš„ä¿¡æ¯ã€‚é‚£ä¹ˆï¼ŒPMSåœ¨å¾—åˆ°PackageParserå¯¹è±¡ä¹‹åŽï¼ŒæŽ¥ç€ä¼šå°†è¿™ä¸ªAPKçš„ä¿¡æ¯åŠ å…¥åˆ°PMSè‡ªèº«ç®¡ç†ä¸­åŽ»ï¼Œæ¯”å¦‚å°†Activityçš„æ•°æ®ä¿å­˜åœ¨mActivitieså¯¹è±¡ä¸­ï¼Œå°†Providerçš„æ•°æ®ä¿å­˜åœ¨mProviderså¯¹è±¡ä¸­ç­‰ï¼ŒPKMSæä¾›äº†å¥½å‡ ä¸ªé‡è¦æ•°æ®ç»“æž„æ¥ä¿å­˜è¿™äº›æ•°æ®ï¼Œè¿™äº›æ•°æ®ç»“æž„çš„ç›¸å…³ä¿¡æ¯å¦‚å›¾æ‰€ç¤ºï¼š é™¤äº†è§£æžå’Œä¿å­˜APKçš„æ ¸å¿ƒæ•°æ®ï¼ŒPMSè¿˜ä¼šåˆ›å»ºåº”ç”¨ç¨‹åºç›®å½•ï¼š/data/data/åŒ…åï¼ŒåŒæ—¶æå–apkä¸­çš„dexæ–‡ä»¶å¹¶ä¿å­˜åˆ°/data/dalvik-cacheä¸­ï¼Œå¦‚æžœè¯¥APKåŒ…å«äº†nativeåŠ¨æ€åº“ï¼Œåˆ™éœ€è¦å°†å®ƒä»¬ä»ŽAPKæ–‡ä»¶ä¸­è§£åŽ‹å¹¶å¤åˆ¶åˆ°å¯¹åº”ç›®å½•ä¸­ï¼Œä»¥åŠå¯¹APKè¿›è¡Œdexä¼˜åŒ–ï¼Œè¿˜æœ‰å…¶å®ƒä¸€äº›ç»†èŠ‚æ¯”å¦‚APKç­¾åçš„æ ¡éªŒï¼Œæ€æ­»APKæ‰€åœ¨è¿›ç¨‹ï¼ˆè¦†ç›–å®‰è£…çš„æƒ…å†µï¼‰ç­‰ï¼Œå®‰è£…è¿‡ç¨‹çš„æœ€åŽï¼Œä¼šå‘é€ACTION_PACKAGE_ADDEDå¹¿æ’­ï¼Œé€šçŸ¥æ‰€æœ‰å…¶å®ƒåº”ç”¨æœ‰æ–°åº”ç”¨å®‰è£…äº†ã€‚ æ€»ç»“è‡³æ­¤ï¼ŒAPKå®‰è£…è¿‡ç¨‹å°±ç»“æŸäº†ã€‚çºµè§‚æ•´ä¸ªè¿‡ç¨‹ï¼Œapkå®‰è£…çš„å…³é”®å°±æ˜¯è§£æžAndroidManifest.xmlï¼Œå°†é‡è¦çš„ä¿¡æ¯ä¿å­˜åœ¨PMSè¿›ç¨‹çš„å†…å­˜ä¸­ï¼Œä»¥ä¿è¯åŽç»­å¯åŠ¨è¿™ä¸ªåº”ç”¨ç¨‹åºçš„ç»„ä»¶æ—¶ï¼Œå¯ä»¥åœ¨PMSä¸­æ‰¾åˆ°è¿™ä¸ªç»„ä»¶çš„ä¿¡æ¯ã€‚æˆ‘ä»¬æœ¬æ¥è®¤ä¸ºçš„æ›´é‡è¦çš„ä»£ç åªæ˜¯è¿›è¡Œdexä¼˜åŒ–åŽç®€å•åœ°æå–åˆ°ä¸€ä¸ªç›®å½•ä¸­è€Œå·²ï¼Œå¦å¤–ï¼ŒAPKä¸­çš„èµ„æºå¹¶æ²¡æœ‰è¢«å¤„ç†ï¼Œè€Œæ˜¯åœ¨å¯åŠ¨åº”ç”¨è¿›ç¨‹çš„æ—¶å€™ï¼ŒåŠ¨æ€åŽ»ä»ŽAPKåŒ…ä¸­åŠ è½½è€Œå·²ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android Tips</tag>
        <tag>Androidç‰ˆæœ¬</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é™æ€ä»£ç lintå¸¸è§æŠ¥é”™å¤„ç†]]></title>
    <url>%2Fposts%2Fdb4fcd4.html</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸€å‘¨åšäº†ä¸€äº›å…³äºŽAndroidé™æ€ä»£ç æ£€æµ‹çš„ä¸œè¥¿ï¼Œå¯¹äºŽä¸€äº›å¸¸è§çš„lintè­¦å‘Šåšäº†è®°å½•,å…¶å®žå¯¹äºŽå¸¸è§çš„lintè­¦å‘Šæˆ‘ä»¬å¾—å¤„ç†æ­¥éª¤å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ï¼š æŸ¥çœ‹lintæŠ¥é”™çš„é”™è¯¯ç±»åž‹ è¿½è¸ªåˆ°ä»£ç å¤„ï¼Œç¡®å®šæ˜¯å¦ä»£ç è‡ªèº«é—®é¢˜ åˆ†æžè¯¥ç±»é”™è¯¯å½±å“èŒƒå›´ ç¡®å®šè§£å†³æ–¹å¼(è§„èŒƒä»£ç ã€æ·»åŠ æ³¨è§£ã€æ·»åŠ è§„åˆ™) è§„èŒƒä»£ç ä¸€èˆ¬æ˜¯ç”±äºŽå¼€å‘è€…åœ¨å¼€å‘æ—¶ï¼Œä¸ç»†å¿ƒé€ æˆè¯¯å†™ç­‰ï¼Œæˆ–è€…æ˜¯æŸäº›APIè¿‡æ—¶ï¼Œéœ€è¦è¿›è¡Œæ‰‹åŠ¨ä¿®æ”¹ã€‚ æ·»åŠ æ³¨è§£å¯¹äºŽæŸäº›ç‰¹æ®Šéœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡åŠ æ³¨è§£æ¥é¿å…lintæŠ¥é”™,ä»¥ä¸‹ç»™å‡ºå¸¸è§çš„æ·»åŠ æ³¨è§£çš„åœ°æ–¹ javaæºä»£ç 123@SuppressLint("xxxx") // xxxxä»£è¡¨æŸç§lintæ£€æµ‹ç±»åž‹public void test()&#123;&#125; xmlé¦–å…ˆæ·»åŠ å‘½åç©ºé—´ 1namespace xmlns:tools="http://schemas.android.com/tools" ç„¶åŽåœ¨æŠ¥é”™åœ°æ–¹æ·»åŠ  12&lt;!--xxxxä»£è¡¨æŸç§lintæ£€æµ‹ç±»åž‹,æˆ–è€…å¯ä»¥æ˜¯ç›´æŽ¥all,ç¦æ­¢æŽ‰æ‰€æœ‰æ£€æµ‹ç±»åž‹--&gt;tools:ignore="xxxx" æ·»åŠ è§„åˆ™(lint.xmlæ–‡ä»¶)å¯¹äºŽæŸäº›å¤§è§„æ¨¡ç±»åž‹çš„ï¼Œæˆ–è€…æ˜¯çŸ¥é“è‡ªå·±å¿…é¡»è¿™ä¹ˆå¹²æ—¶ï¼Œå°±å¯ä»¥æ·»åŠ è§„åˆ™æ¥è§„é¿æŸç§ç±»åž‹çš„æ‰€æœ‰lintæŠ¥é”™æˆ–è€…æ˜¯æŒ‡å®šè·¯å¾„ï¼Œäº¦æˆ–è€…æ˜¯é€šè¿‡æ­£åˆ™æŒ‡å®šã€‚ æ·»åŠ è§„åˆ™æ ¼å¼ä¸ºï¼š è§„é¿ä¸€ç§ç±»åž‹ 12&lt;!--xxxxä»£è¡¨æŸç§lintæ£€æµ‹ç±»åž‹--&gt;&lt;issue id="xxxx" severity="ignore"/&gt; æŒ‡å®šè·¯å¾„ 1234567 &lt;!--xxxxä»£è¡¨æŸç§lintæ£€æµ‹ç±»åž‹--&gt; &lt;!--****ä»£è¡¨æŒ‡å®šè·¯å¾„æˆ–è€…æ˜¯æ–‡ä»¶--&gt; &lt;!--####é€šè¿‡æ­£åˆ™æ¥æŒ‡å®šç›¸å…³æ–‡ä»¶æˆ–è€…å±žæ€§ç­‰--&gt;&lt;issue id="xxxx"&gt; &lt;ignore path="****"/&gt; &lt;ignore regexp="####"/&gt;&lt;/issue&gt; æ”¹å˜lintæ£€æµ‹ç±»åž‹ 123 &lt;!--xxxxä»£è¡¨æŸç§lintæ£€æµ‹ç±»åž‹--&gt; &lt;!--severityæœ‰ä¸åŒç§ç¨‹åº¦çš„ç±»åž‹ Fatalã€Error ã€Warning ã€Information ã€Ignore--&gt;&lt;issue id="xxxx" severity="ignore"/&gt; æŽ¥ä¸‹æ¥è®°å½•ä¸‹æˆ‘è§åˆ°å’Œå¤„ç†çš„ä¸€äº›æŠ¥é”™ç±»åž‹ 1. Missing commit() on SharedPreference editorç¼ºå°‘commit()æ–¹æ³•è°ƒç”¨ï¼Œæ·»åŠ å³å¯;ä½†æ˜¯ä½ æˆ–è®¸ä¼šé‡åˆ°ä¸‹é¢è¿™ä¸ªé—®é¢˜,å®ƒä¾ç„¶ä¼šlintæ£€æµ‹æŠ¥é”™ï¼š 123456789public void test()&#123; SharedPreferencesUtils.apply(dataStore.edit() .putString(xxx, xxx));&#125;...public static void apply(SharedPreferences.Editor editor) &#123; editor.apply();&#125; å¦‚æžœæ˜¯è¿™æ ·çš„è¯ï¼Œå»ºè®®åˆ°æŒ‡å®šæ–¹æ³•è°ƒç”¨å¤„æ·»åŠ æ³¨è§£ @SuppressLint(â€œCommitPrefEditsâ€) 2. Use apply() on SharedPreferenceså»ºè®®ä½¿ç”¨apply()æ›¿æ¢commit(),å¯¹äºŽä¸¤ä¸ªæ–¹æ³•çš„åŒºåˆ«ï¼Œå»ºè®®çœ‹çœ‹è¿™é‡Œ 3. Mismatched Styleable/Custom View Nameå»ºè®®åœ¨è‡ªå®šä¹‰Viewçš„æ—¶å€™ï¼Œå°½é‡ä¿è¯Viewåç§°ä¸Ž&lt;declare-styleable çš„nameä¸€è‡´, è‹¥æœ‰ç‰¹æ®Šéœ€æ±‚éœ€è¦å¯¹æŒ‡å®šè¿›è¡Œæ·»åŠ æ³¨è§£. @SuppressLint(â€œCustomViewStyleableâ€) è‹¥å­˜åœ¨ç‰¹æ®Šéœ€æ±‚ï¼Œåˆ™æ›´å»ºè®®åœ¨lint.xmlä¸­æ·»åŠ è§„åˆ™: 4. Duplicate ids across layouts combined with include tagsåœ¨å¸ƒå±€ä¸­ï¼Œé€šè¿‡è¿›æ¥çš„layoutï¼Œå­˜åœ¨å’Œçˆ¶å¸ƒå±€ä¸­ç›¸åŒidçš„viewï¼Œä¿®æ”¹å»ºè®®ï¼Œä¿®æ”¹å¸ƒå±€ä¸­idå‘½å. 5. Using android.media.ExifInterfaceAvoid using android.media.ExifInterface;use android.support.media.ExifInterface from the support library instead. ä½¿ç”¨supportåŒ…ç›¸å…³æ›¿æ¢ 6. Hardcoded reference to /sdcardDo not hardcode â€œ/data/â€œ; use Context.getFilesDir().getPath() instead lint ç»™å‡ºçš„ä¿®æ”¹å»ºè®®æ˜¯ä½¿ç”¨Context.getFilesDir().getPath() æ›¿æ¢ç›´æŽ¥é€šè¿‡è·¯å¾„æ‹¼æŽ¥ï¼Œä½†æ˜¯æ ¹æ®åœºæ™¯å¯ä»¥è‡ªå˜å§ï¼›è‹¥ä¸æƒ³é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥ç›´æŽ¥å¿½ç•¥ï¼Œæ·»åŠ æ³¨è§£ ç±»ä¼¼é”™è¯¯åœºæ™¯ï¼š 1234public class DbCopyHelper &#123;public static final String DB_PATH = "/data/data/" + BuildConfig.APPLICATION_ID + "/databases/";public static void copy(Context context, String dbName, boolean force) throws Exception &#123; File dir = new File(DB_PATH); @SuppressLint(â€œ SdCardPathâ€) è‹¥å­˜åœ¨ç‰¹æ®Šéœ€æ±‚ï¼Œåˆ™æ›´å»ºè®®åœ¨lint.xmlä¸­æ·»åŠ è§„åˆ™: 7. Attribute unused on older versionså»ºè®®æ·»åŠ è§„åˆ™ 1234&lt;!--xxxxä»£è¡¨æŸä¸ªå±žæ€§--&gt;&lt;issue id="UnusedAttribute"&gt; &lt;ignore regexp=".*xxxxx.*"/&gt;&lt;/issue&gt; 8. Appcompat Custom WidgetsThis custom view should extend android.support.v7.widget.AppCompatTextView instead å»ºè®®: 1234æ·»åŠ è§„åˆ™&lt;issue id="AppCompatCustomView" severity="ignore"/&gt;æˆ–è€…æ˜¯æ·»åŠ æ³¨è§£@SuppressLint(â€œAppCompatCustomViewâ€) 9. Restricted APIxxx can only be called from within the same library group æ–¹æ³•åªèƒ½åœ¨åŒä¸€ä¸ªlibrary groupä¸­è°ƒç”¨ æ·»åŠ æ³¨è§£: @SuppressLint(â€œRestrictedApiâ€) æˆ–è€…æ˜¯è§„åˆ™ 10. Invalid format stringåœ¨è¿›è¡Œå­—ç¬¦ä¸²æ ¼å¼åŒ–å¤„ç†çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„formatted=â€œfalseâ€ çš„å½±å“ ç›´æŽ¥æ·»åŠ ï¼š 12&lt;!--å¿½ç•¥stringçš„format--&gt;&lt;issue id="StringFormatInvalid" severity="ignore"/&gt; å¯¹äºŽformatted=â€œfalseâ€çš„ç†è§£,åœ¨è¿›è¡Œstring.xmlç¼–å†™çš„æ—¶å€™ï¼Œæ³¨æ„å†…å®¹çš„å ä½ç¬¦å·ï¼Œå¦‚æžœå¤§äºŽç­‰äºŽ2ä¸ªå ä½ç¬¦çš„æ—¶å€™ï¼Œå»ºè®®ä½¿ç”¨formatted=â€œfalseâ€ï¼Œæˆ–è€…ä½¿ç”¨æ­£åˆ™æ–¹å¼%n$mã€‚ 11. Insecure HostnameVerifier123456HostnameVerifier hnv = new HostnameVerifier() &#123; @Override public boolean verify(String hostname, SSLSession session) &#123; return true; &#125;&#125;; åœºæ™¯æ˜¯ç›´æŽ¥å‡è¿”å›žtrueï¼Œè¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„æ“ä½œï¼Œè‹¥çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆï¼Œå¯ä»¥ç›´æŽ¥æ·»åŠ æ³¨è§£ @SuppressLint(â€œAllowAllHostnameVerifierâ€) æˆ–è€…æ·»åŠ è§„åˆ™ 12&lt;!--å¿½ç•¥ä¸šåŠ¡ä¸­æ€»æ˜¯è¿”å›žtrue--&gt;&lt;issue id="BadHostnameVerifier" severity="ignore"/&gt; 12. Insecure TLS/SSL trust manager12345@Overridepublic void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException &#123; &#125; å»ºè®®æ·»åŠ è§„åˆ™ 12&lt;!--å¿½ç•¥ä¿¡ä»»X509TrustManagerå¸¦æ¥çš„å±é™©--&gt;&lt;issue id="TrustAllX509TrustManager" severity="ignore"/&gt; 13. Obsolete layout paramsInvalid layout param in a LinearLayout: layout_centerInParent å»ºè®®å¼€å‘ä¸­ï¼Œå¯¹å¸ƒå±€çš„ä½¿ç”¨æ³¨æ„å¯ç”¨æ€§ï¼Œåœ¨å‚è€ƒä»£ç çš„æ—¶å€™ï¼Œæ³¨æ„åˆ é™¤ä¿®æ”¹åŽä¸å¯ç”¨çš„å±žæ€§ 14. Static Field Leaksæ³¨æ„åœ¨ä¹¦å†™å•ä¾‹çš„æ—¶å€™ï¼Œé¿å…ä½¿ç”¨å±€éƒ¨context.å‡è½¬æ¢ä¸ºå…¨å±€ä¸Šä¸‹æ–‡ 15. Node can be replaced by a TextView with compound drawablesè¿™ä¸ªè­¦å‘Šçš„äº§ç”Ÿï¼Œä¸»è¦æ˜¯åœ¨ä¸€ä¸ªçº¿æ€§å¸ƒå±€ä¸­å­˜åœ¨ä¸€ä¸ªtextViewå’Œä¸€ä¸ªImageViewï¼Œè®¤ä¸ºä¸€ä¸ªtextViewå¯ä»¥å®žçŽ°ç±»ä¼¼çš„åŠŸèƒ½ï¼Œè€Œä¸ç”¨æ·»åŠ å¤šä½™çš„åµŒå¥—å’ŒViewï¼› ä½†æ˜¯å¯¹äºŽç‰¹å®šçš„éœ€æ±‚ï¼Œä¸èƒ½ä¿è¯èƒ½å®žçŽ°æƒ³è¦çš„æ•ˆæžœï¼Œå› æ­¤å»ºè®®æ·»åŠ è§„åˆ™å¿½ç•¥ï¼š 12&lt;!--å¿½ç•¥å¯¹linearlayout(åŒ…å«TextViewå’ŒImageView)ä½¿ç”¨çš„è¯¯æŠ¥--&gt;&lt;issue id="UseCompoundDrawables" severity="ignore"/&gt; 16. View Holder CandidatesUnconditional layout inflation from view adapter: Should use View Holder pattern (use recycled view passed into this method as the second parameter) for smoother scrolling å»ºè®®ä½¿ç”¨ViewHolder 17. Missing baselineAligned attributeç¼ºå°‘baselineAlignedè¿™ä¸ªå±žæ€§ï¼Œå»ºè®®çœ‹çœ‹è¿™é‡Œï¼Œè¿™ä¸ªè­¦å‘Šå¯ä»¥æ ¹æ®éœ€æ±‚è‡ªè¡Œæ·»åŠ å±žæ€§ä¸Žå¦ï¼Œæˆ–è€…æ˜¯æ·»åŠ è§„åˆ™å’Œæ³¨è§£ï¼š 12&lt;!--å¿½ç•¥å»ºè®® Set android:baselineAligned="false"--&gt;&lt;issue id="DisableBaselineAlignment" severity="ignore"/&gt; 18. Inefficient layout weightåœ¨ä½¿ç”¨layout weightå±žæ€§çš„æ—¶å€™ï¼Œåº”ä¿æŒç›¸åº”å±žæ€§ä¸º0dp;æˆ–è€…æ˜¯åœ¨copyä»£ç çš„æ—¶å€™å¿˜è®°åˆ é™¤layout_weightä»£ç å¯¼è‡´lintæ£€æµ‹æŠ¥é”™ 19. Nested layout weightsåœ¨å¸ƒå±€è¿›è¡ŒåµŒå¥—ä½¿ç”¨æ—¶ï¼Œçˆ¶å¸ƒå±€ä¸Žå­å¸ƒå±€éƒ½ä½¿ç”¨äº†android:layout_weightï¼Œæ ¹æ®éœ€æ±‚è¿›è¡Œä¿®æ”¹; 20. Useless parent layoutè­¦å‘Šæœ‰æœªä½¿ç”¨çš„çˆ¶å¸ƒå±€ï¼Œæˆ–è€…æ˜¯æ— ç”¨çš„çˆ¶å¸ƒå±€ã€‚ æ ¹æ®å®žé™…éœ€æ±‚è¿›è¡Œå¿½ç•¥æˆ–è€…æ˜¯åˆ é™¤ç›¸åº”å¸ƒå±€ 21. Unused namespaceå‘½åç©ºé—´é‡å¤æ·»åŠ ï¼Œæˆ–è€…æ˜¯åˆ é™¤å¯¹åº”å±žæ€§åŽï¼Œå‘½åç©ºé—´æœªåˆ é™¤ï¼Œåˆ é™¤. 22. Hyphen can be replaced with dashReplace â€œ-â€œ with an â€œen dashâ€ character (â€“, â€“) ä¸ºäº†ç¬¦åˆäººæ€§åŒ–çš„å¼€å‘ï¼Œå»ºè®®ç›´æŽ¥æ·»åŠ è§„åˆ™å¿½ç•¥ 23. H Ellipsis string can be replaced with ellipsis characterå¤„ç†åŒä¸Š 24. Duplicated icons under different nameså­˜åœ¨ä¸åŒå‘½åçš„åŒæ–‡ä»¶çš„icons ç›®å‰çš„å¤„ç†æ˜¯æ·»åŠ è§„åˆ™å¿½ç•¥ 25. Missing accessibility labelå¯¹EditTextViewçš„ä½¿ç”¨ï¼Œå»ºè®®æ·»åŠ ä¸€ä¸ªå®ƒçš„æ ‡ç­¾View æ ¹æ®éœ€è¦è¿›è¡Œå¿½ç•¥ æˆ–è€…æ·»åŠ android:labelfor 26. Keyboard inaccessible widgetä¸€ä¸ªæŽ§ä»¶ï¼ˆæ¯”å¦‚å›¾ç‰‡ï¼‰ï¼Œå¦‚æžœæ²¡æœ‰å®šä¹‰focusable(å¯èšç„¦çš„)ï¼Œå´å®šä¹‰äº†æ˜¯clickableï¼ˆå¯ç‚¹å‡»çš„ï¼‰ï¼Œé‚£ä¹ˆæ˜¯ä¸èƒ½é€šè¿‡é”®ç›˜è®¿é—®çš„ã€‚æ‰€ä»¥ï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ªfocusable=â€œtrueâ€;ç›¸å½“äºŽæŒ‡å®šå¯èŽ·å–ç„¦ç‚¹. 27. Usage of showAsAction=alwayså»ºè®®ä½¿ç”¨â€ifRoomâ€æ›¿æ¢â€alwaysâ€ æ ¹æ®éœ€æ±‚è¿›è¡Œä¿®æ”¹æˆ–è€…å¿½ç•¥ 28. Missing inputTypeThis text field does not specify an inputType å»ºè®®ä¸ºEditTextæŒ‡å®šinputTypeå±žæ€§ 29. Overdraw: Painting regions more than oncePossible overdraw: Root element paints background @color/actionbar_color with a theme that also paints a background (inferred theme is @style/ActionTheme_NoTitle) å­˜åœ¨è¿‡åº¦ç»˜åˆ¶çš„å¯èƒ½æ€§ ä½†æ˜¯è¿™ä¸ªæŠ¥è­¦æœ‰ç‚¹ç‰µå¼ºï¼Œæ‰€ä»¥è¿˜æ˜¯å…ˆæ·»åŠ è§„åˆ™ç»™è¿‡æ»¤å§ 30. Hardware Id UsageèŽ·å–è®¾å¤‡ç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹å®˜æ–¹API,ä½¿ç”¨å…¶æ›¿æ¢æ–¹æ³• 31. Incompatible Gradle Versionsä¸å…¼å®¹ä¾èµ–ç‰ˆæœ¬åº“ï¼Œå¯é€šè¿‡æ‰“ä¾èµ–æ ‘ï¼Œè¿›è¡ŒæŸ¥æ‰¾ è´´å‡ºå¸¸è§çš„lint issueidå’Œç§’é€Ÿï¼Œä»¥ä¾›å¯¹ç…§123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330"ContentDescription": Image without contentDescription"AddJavascriptInterface": addJavascriptInterface Called"ShortAlarm": Short or Frequent Alarm"AllCaps": Combining textAllCaps and markup"AllowAllHostnameVerifier": Insecure HostnameVerifier"AlwaysShowAction": Usage of showAsAction=always"InvalidUsesTagAttribute": Invalid name attribute for uses element."MissingIntentFilterForMediaSearch": Missing intent-filter with action android.media.action.MEDIA_PLAY_FROM_SEARCH"MissingMediaBrowserServiceIntentFilter": Missing intent-filter with action android.media.browse.MediaBrowserService."MissingOnPlayFromSearch": Missing onPlayFromSearch."ImpliedTouchscreenHardware": Hardware feature touchscreen not explicitly marked as optional"MissingTvBanner": TV Missing Banner"MissingLeanbackLauncher": Missing Leanback Launcher Intent Filter."MissingLeanbackSupport": Missing Leanback Support."PermissionImpliesUnsupportedHardware": Permission Implies Unsupported Hardware"UnsupportedTvHardware": Unsupported TV Hardware Feature"SupportAnnotationUsage": Incorrect support annotation usage"ShiftFlags": Dangerous Flag Constant Declaration"LocalSuppress": @SuppressLint on invalid element"SwitchIntDef": Missing @IntDef in Switch"UniqueConstants": Overlapping Enumeration Constants"InlinedApi": Using inlined constants on older versions"Override": Method conflicts with new inherited method"ObsoleteSdkInt": Obsolete SDK_INT Version Check"NewApi": Calling new methods on older versions"UnusedAttribute": Attribute unused on older versions"AppCompatMethod": Using Wrong AppCompat Method"AppCompatCustomView": Appcompat Custom Widgets"AppCompatResource": Menu namespace"GoogleAppIndexingApiWarning": Missing support for Firebase App Indexing Api"GoogleAppIndexingWarning": Missing support for Firebase App Indexing"AppLinksAutoVerifyError": App Links Auto Verification Failure"AppLinksAutoVerifyWarning": Potential App Links Auto Verification Failure"AppLinkUrlError": URL not supported by app for Firebase App Indexing"TestAppLink": Unmatched URLs"InconsistentArrays": Inconsistencies in array element counts"Assert": Assertions"BadHostnameVerifier": Insecure HostnameVerifier"BatteryLife": Battery Life Issues"BackButton": Back button"ButtonCase": Cancel/OK dialog button capitalization"ButtonOrder": Button order"ButtonStyle": Button should be borderless"ByteOrderMark": Byte order mark inside files"MissingSuperCall": Missing Super Call"AdapterViewChildren": AdapterViews cannot have children in XML"ScrollViewCount": ScrollViews can have only one child"PermissionImpliesUnsupportedChromeOsHardware": Permission Implies Unsupported Chrome OS Hardware"UnsupportedChromeOsHardware": Unsupported Chrome OS Hardware Feature"GetInstance": Cipher.getInstance with ECB"CommitTransaction": Missing commit() calls"Recycle": Missing recycle() calls"CommitPrefEdits": Missing commit() on SharedPreference editor"ApplySharedPref": Use apply() on SharedPreferences"ClickableViewAccessibility": Accessibility in Custom Views"EasterEgg": Code contains easter egg"StopShip": Code contains STOPSHIP marker"MissingConstraints": Missing Constraints in ConstraintLayout"VulnerableCordovaVersion": Vulnerable Cordova Version"CustomViewStyleable": Mismatched Styleable/Custom View Name"CutPasteId": Likely cut &amp; paste mistakes"SimpleDateFormat": Implied locale in date format"SetTextI18n": TextView Internationalization"Deprecated": Using deprecated resources"MissingPrefix": Missing Android XML namespace"MangledCRLF": Mangled file line endings"DuplicateIncludedIds": Duplicate ids across layouts combined with include tags"DuplicateIds": Duplicate ids within a single layout"DuplicateDefinition": Duplicate definitions of resources"ReferenceType": Incorrect reference types"StringEscaping": Invalid string escapes"UnpackedNativeCode": Missing android:extractNativeLibs=false"UnsafeDynamicallyLoadedCode": load used to dynamically load code"UnsafeNativeCodeLocation": Native code outside library directory"EllipsizeMaxLines": Combining Ellipsize and Maxlines"ExifInterface": Using android.media.ExifInterface"ExtraText": Extraneous text in resource files"FieldGetter": Using getter instead of field"InvalidAnalyticsName": Invalid Analytics Name"MissingFirebaseInstanceTokenRefresh": Missing Firebase Instance ID Token Refresh"FontValidationError": Validation of font files"FontValidationWarning": Validation of font files"FullBackupContent": Valid Full Backup Content File"ValidFragment": Fragment not instantiatable"GetContentDescriptionOverride": Overriding getContentDescription() on a View"PackageManagerGetSignatures": Potential Multiple Certificate Exploit"AccidentalOctal": Accidental Octal"UseOfBundledGooglePlayServices": Use of bundled version of Google Play services"GradleCompatible": Incompatible Gradle Versions"GradleDependency": Obsolete Gradle Dependency"GradleDeprecated": Deprecated Gradle Construct"DevModeObsolete": Dev Mode Obsolete"DuplicatePlatformClasses": Duplicate Platform Classes"GradleGetter": Gradle Implicit Getter Call"GradlePluginVersion": Incompatible Android Gradle Plugin"HighAppVersionCode": VersionCode too high"GradleIdeError": Gradle IDE Support Issues"GradlePath": Gradle Path Issues"GradleDynamicVersion": Gradle Dynamic Version"NotInterpolated": Incorrect Interpolation"StringShouldBeInt": String should be int"NewerVersionAvailable": Newer Library Versions Available"MinSdkTooLow": API Version Too Low"GridLayout": GridLayout validation"HandlerLeak": Handler reference leaks"HardcodedDebugMode": Hardcoded value of android:debuggable in the manifest"HardcodedText": Hardcoded text"HardwareIds": Hardware Id Usage"IconDuplicatesConfig": Identical bitmaps across various configurations"IconDuplicates": Duplicated icons under different names"GifUsage": Using .gif format for bitmaps is discouraged"IconColors": Icon colors do not follow the recommended visual style"IconDensities": Icon densities validation"IconDipSize": Icon density-independent size validation"IconExpectedSize": Icon has incorrect size"IconExtension": Icon format does not match the file extension"IconLauncherShape": The launcher icon shape should use a distinct silhouette"IconLocation": Image defined in density-independent drawable folder"IconMissingDensityFolder": Missing density folder"IconMixedNinePatch": Clashing PNG and 9-PNG files"IconNoDpi": Icon appears in both -nodpi and dpi folders"IconXmlAndPng": Icon is specified both as .xml file and as a bitmap"ConvertToWebp": Convert to WebP"WebpUnsupported": WebP Unsupported"IncludeLayoutParam": Ignored layout params on include"DisableBaselineAlignment": Missing baselineAligned attribute"InefficientWeight": Inefficient layout weight"NestedWeights": Nested layout weights"Orientation": Missing explicit orientation"Suspicious0dp": Suspicious 0dp dimension"InstantApps": Instant App Issues"DuplicateDivider": Unnecessary Divider Copy"TrustAllX509TrustManager": Insecure TLS/SSL trust manager"InvalidImeActionId": Invalid imeActionId declaration"InvalidPackage": Package not included in Android"DrawAllocation": Memory allocations within drawing code"UseSparseArrays": HashMap can be replaced with SparseArray"UseValueOf": Should use valueOf instead of new"JavascriptInterface": Missing @JavascriptInterface on methods"JobSchedulerService": JobScheduler problems"KeyboardInaccessibleWidget": Keyboard inaccessible widget"LabelFor": Missing labelFor attribute"InconsistentLayout": Inconsistent Layouts"InflateParams": Layout Inflation without a Parent"StaticFieldLeak": Static Field Leaks"DefaultLocale": Implied default locale in case conversion"LocaleFolder": Wrong locale name"GetLocales": Locale crash"InvalidResourceFolder": Invalid Resource Folder"WrongRegion": Suspicious Language/Region Combination"UseAlpha2": Using 3-letter Codes"LogConditional": Unconditional Logging Calls"LongLogTag": Too Long Log Tags"LogTagMismatch": Mismatched Log Tags"AllowBackup": AllowBackup/FullBackupContent Problems"MissingApplicationIcon": Missing application icon"DeviceAdmin": Malformed Device Admin"DuplicateActivity": Activity registered more than once"DuplicateUsesFeature": Feature declared more than once"GradleOverrides": Value overridden by Gradle build script"IllegalResourceRef": Name and version must be integer or string, not resource"MipmapIcons": Use Mipmap Launcher Icons"MockLocation": Using mock location provider in production"MultipleUsesSdk": Multiple &lt;uses-sdk&gt; elements in the manifest"ManifestOrder": Incorrect order of elements in manifest"MissingVersion": Missing application name/version"OldTargetApi": Target SDK attribute is not targeting latest version"UniquePermission": Permission names are not unique"UsesMinSdkAttributes": Minimum SDK and target SDK attributes not defined"WearableBindListener": Usage of Android Wear BIND_LISTENER is deprecated"WrongManifestParent": Wrong manifest parent"InvalidPermission": Invalid Permission Attribute"ManifestResource": Manifest Resource References"ManifestTypo": Typos in manifest tags"FloatMath": Using FloatMath instead of Math"MergeMarker": Code contains merge marker"MergeRootFrame": FrameLayout can be replaced with &lt;merge&gt; tag"IncompatibleMediaBrowserServiceCompatVersion": Obsolete version of MediaBrowserServiceCompat"InnerclassSeparator": Inner classes should use $ rather than ."Instantiatable": Registered class is not instantiatable"MissingRegistered": Missing registered class"MissingId": Fragments should specify an id or tag"LibraryCustomView": Custom views in libraries should use res-auto-namespace"ResAuto": Hardcoded Package in Namespace"NamespaceTypo": Misspelled namespace declaration"UnusedNamespace": Unused namespace"NegativeMargin": Negative Margins"NestedScrolling": Nested scrolling widgets"NetworkSecurityConfig": Valid Network Security Config File"MissingBackupPin": Missing Backup Pin"PinSetExpiry": Validate &lt;pin-set&gt; expiration attribute"NfcTechWhitespace": Whitespace in NFC tech lists"UnlocalizedSms": SMS phone number missing country code"ObjectAnimatorBinding": Incorrect ObjectAnimator Property"AnimatorKeep": Missing @Keep for Animated Properties"ObsoleteLayoutParam": Obsolete layout params"OnClick": onClick method does not exist"Overdraw": Overdraw: Painting regions more than once"DalvikOverride": Method considered overridden by Dalvik"OverrideAbstract": Not overriding abstract methods on older platforms"ParcelCreator": Missing Parcelable CREATOR field"UnusedQuantity": Unused quantity translations"MissingQuantity": Missing quantity translation"ImpliedQuantity": Implied Quantities"ExportedPreferenceActivity": PreferenceActivity should not be exported"PrivateApi": Using Private APIs"PackagedPrivateKey": Packaged private key"PrivateResource": Using private resources"ProguardSplit": Proguard.cfg file contains generic Android rules"Proguard": Using obsolete ProGuard configuration"PropertyEscape": Incorrect property escapes"UsingHttp": Using HTTP instead of HTTPS"SpUsage": Using dp instead of sp for text sizes"InOrMmUsage": Using mm or in dimensions"PxUsage": Using 'px' dimension"SmallSp": Text size is too small"ParcelClassLoader": Default Parcel Class Loader"PendingBindings": Missing Pending Bindings"RecyclerView": RecyclerView Problems"Registered": Class is not registered in the manifest"RelativeOverlap": Overlapping items in RelativeLayout"RequiredSize": Missing layout_width or layout_height attributes"AaptCrash": Potential AAPT crash"ResourceCycle": Cycle in resource definitions"ResourceName": Resource with Wrong Prefix"ValidRestrictions": Invalid Restrictions Descriptor"RtlCompat": Right-to-left text compatibility issues"RtlEnabled": Using RTL attributes without enabling RTL support"RtlSymmetry": Padding and margin symmetry"RtlHardcoded": Using left/right instead of start/end attributes"ScrollViewSize": ScrollView size validation"SdCardPath": Hardcoded reference to /sdcard"SecureRandom": Using a fixed seed with SecureRandom"TrulyRandom": Weak RNG"ExportedContentProvider": Content provider does not require permission"ExportedReceiver": Receiver does not require permission"ExportedService": Exported service does not require permission"SetWorldReadable": File.setReadable() used to make file world-readable"SetWorldWritable": File.setWritable() used to make file world-writable"GrantAllUris": Content provider shares everything"WorldReadableFiles": openFileOutput() or similar call passing MODE_WORLD_READABLE"WorldWriteableFiles": openFileOutput() or similar call passing MODE_WORLD_WRITEABLE"ServiceCast": Wrong system service casts"WifiManagerLeak": WifiManager Leak"WifiManagerPotentialLeak": WifiManager Potential Leak"SetJavaScriptEnabled": Using setJavaScriptEnabled"SignatureOrSystemPermissions": signatureOrSystem permissions declared"SQLiteString": Using STRING instead of TEXT"SSLCertificateSocketFactoryCreateSocket": Insecure call to SSLCertificateSocketFactory.createSocket()"SSLCertificateSocketFactoryGetInsecure": Call to SSLCertificateSocketFactory.getInsecure()"StateListReachable": Unreachable state in a &lt;selector&gt;"AuthLeak": Code might contain an auth leak"StringFormatCount": Formatting argument types incomplete or inconsistent"StringFormatMatches": "String.format string doesn't match the XML format string""StringFormatInvalid": Invalid format string"PluralsCandidate": Potential Plurals"UseCheckPermission": Using the result of check permission calls"CheckResult": Ignoring results"ResourceAsColor": Should pass resolved color instead of resource id"MissingPermission": Missing Permissions"Range": Outside Range"ResourceType": Wrong Resource Type"RestrictedApi": Restricted API"WrongThread": Wrong Thread"WrongConstant": Incorrect constant"VisibleForTests": Visible Only For Tests"ProtectedPermissions": Using system app permission"TextFields": Missing inputType or hint"TextViewEdits": TextView should probably be an EditText instead"SelectableText": Dynamic text should probably be selectable"MenuTitle": Missing menu title"ShowToast": Toast created but not shown"TooDeepLayout": Layout hierarchy is too deep"TooManyViews": Layout has too many views"ExtraTranslation": Extra translation"MissingTranslation": Incomplete translation"Typos": Spelling error"TypographyDashes": Hyphen can be replaced with dash"TypographyEllipsis": Ellipsis string can be replaced with ellipsis character"TypographyFractions": Fraction string can be replaced with fraction character"TypographyOther": Other typographical problems"TypographyQuotes": Straight quotes can be replaced with curvy quotes"UnsafeProtectedBroadcastReceiver": Unsafe Protected BroadcastReceiver"UnprotectedSMSBroadcastReceiver": Unprotected SMS BroadcastReceiver"UnusedResources": Unused resources"UnusedIds": Unused id"UseCompoundDrawables": Node can be replaced by a TextView with compound drawables"UselessLeaf": Useless leaf layout"UselessParent": Useless parent layout"EnforceUTF8": Encoding used in resource files is not UTF-8"VectorRaster": Vector Image Generation"VectorDrawableCompat": Using VectorDrawableCompat"VectorPath": Long vector paths"InvalidVectorPath": Invalid vector paths"ViewConstructor": Missing View constructors for XML inflation"ViewHolder": View Holder Candidates"ViewTag": Tagged object leaks"WrongViewCast": Mismatched view type"FindViewByIdCast": Add Explicit Cast"Wakelock": Incorrect WakeLock usage"WakelockTimeout": Using wakeLock without timeout"InvalidWearFeatureAttribute": Invalid attribute for Wear uses-feature"WearStandaloneAppFlag": Invalid or missing Wear standalone app flag"WebViewLayout": WebViews in wrap_content parents"WrongCall": Using wrong draw/layout method"WrongCase": Wrong case for view tag"InvalidId": Invalid ID declaration"NotSibling": RelativeLayout Invalid Constraints"UnknownId": Reference to an unknown id"UnknownIdInLayout": Reference to an id that is not in the current layout"SuspiciousImport": import android.R statement"WrongFolder": Resource file in the wrong res folder"WrongThreadInterprocedural": Wrong Thread (Interprocedural) æ€»ç»“è¿˜æœ‰é‡åˆ°ä¸€äº›ç®€å•ä»£ç è§„èŒƒçš„é—®é¢˜ï¼Œå¹³æ—¶æ³¨æ„ï¼Œå°±èƒ½è§„é¿ï¼Œæ¯”å¦‚å¸¸è§çš„å®½é«˜ï¼Œå†™æˆäº†spã€xpï¼›æ€»ä¹‹å°±æ˜¯spã€xpã€dpä½¿ç”¨æ··ä¹±ç­‰ä¸€äº›è§„èŒƒé—®é¢˜ï¼Œæˆ–è€…æ˜¯å†…å­˜æ³„æ¼é£Žé™©.]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android Tips</tag>
        <tag>lint</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ­£ç¡®çš„æé—®æ–¹å¼]]></title>
    <url>%2Fposts%2F6cc70a12.html</url>
    <content type="text"><![CDATA[æé—®ä¹‹å‰ ä½ æ˜¯å¦åœ¨è°·æ­Œ/ç™¾åº¦/è®ºå›ä¸Šæœç´¢è¿‡ï¼Ÿ ä½ æ˜¯å¦æŸ¥è¿‡æ‰‹å†Œ/æ–‡æ¡£ï¼Ÿ ä½ æ˜¯å¦é˜…è¯»è¿‡æºç ï¼Ÿ æ­£ç¡®æé—® ä½ æƒ³åšä»€ä¹ˆï¼Ÿé‡åˆ°äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿä½ åšè¿‡ä»€ä¹ˆï¼Ÿå°è¯•è¿‡ä»€ä¹ˆè§£å†³æ–¹æ¡ˆï¼Ÿç»“æžœæ˜¯ä»€ä¹ˆï¼Ÿ é™„ä¸Šlogï¼Œä»£ç ç­‰ Psï¼šæä¾›è¶Šå¤šæœ‰æ•ˆä¿¡æ¯ï¼Œè¶Šèƒ½å¾—åˆ°å¸®åŠ© é”™è¯¯æé—® æœ‰å¤§ä½¬åœ¨å—ï¼Ÿæœ‰äººåœ¨å—ï¼Ÿæœ‰äººä¼šå—ï¼Ÿæœ‰äººæ‡‚å—ï¼Ÿ è¿™ä¸ªæ€Žä¹ˆè§£å†³ï¼Ÿä¸ºä»€ä¹ˆä¼šå‡ºçŽ°è¿™ä¸ªï¼Ÿè¿™æ˜¯æ€Žéº½å›žäº‹ï¼Ÿæœ‰æ²¡æœ‰äººå¸®æˆ‘è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ Psï¼šå¤§å®¶éƒ½å¿™ï¼Œè¯·å°Šé‡å½¼æ­¤çš„æ—¶é—´]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ºHexoæ·»åŠ CNZZç»Ÿè®¡]]></title>
    <url>%2Fposts%2Ffb66bb1.html</url>
    <content type="text"><![CDATA[å‰è¨€åˆšå¼€å§‹å¼„NexTä¸»é¢˜çš„æ—¶å€™ï¼Œä¸€ç›´éƒ½æ˜¯ç”¨ä¸è’œå­çš„ç»Ÿè®¡ï¼Œä½†æ˜¯ä¸è’œå­ç»Ÿè®¡çš„å†…å®¹å¤ªè¿‡ç®€å•äº†ï¼Œä¸èƒ½å¤Ÿçœ‹åˆ°å…¶ä»–çš„ä¸€äº›æ•°æ®ï¼Œæœ€è¿‘æŠŠå‹ç›Ÿçš„ç»Ÿè®¡ç»™åŠ ä¸Šäº†ã€‚ å‹ç›Ÿ+ ä¼ é€é—¨ï¼šhttps://passport.umeng.com/login?appId=cnzz é…ç½®ç«™ç‚¹ä¿¡æ¯ç™»å½•ä¹‹åŽï¼Œé€‰æ‹©å³ä¸Šè§’çš„æ·»åŠ ç«™ç‚¹ï¼Œé…ç½®å¥½ä½ çš„ç«™ç‚¹ä¿¡æ¯ èŽ·å–ä»£ç èŽ·å–å‹ç›Ÿæä¾›ç»™ä½ çš„ä»£ç ï¼Œå‹ç›Ÿæä¾›äº†å¾ˆå¤šçš„æ ·å¼ï¼Œéšä¾¿å¤åˆ¶ä¸€ä»½å°±è¡Œã€‚ åœ¨\themes\next\layout\_third-party\analytics\cnzz-analytics.swigä¸­å°†åŽŸæ¥çš„ä»£ç å…¨éƒ¨åˆ é™¤ï¼Œå¤åˆ¶ä¸‹é¢çš„ä»£ç ï¼špsï¼šå¦‚æžœæ²¡æœ‰è¯¥æ–‡ä»¶ï¼Œè¯·è‡ªè¡Œåˆ›å»ºç„¶åŽå¤åˆ¶ä¿®æ”¹ä¸‹é¢çš„ä»£ç  123456789101112&#123;% if theme.cnzz_siteid %&#125;&lt;div&gt;&lt;!-- å¡«å†™ä½ çš„å‹ç›Ÿä»£ç  --&gt;&lt;script type="text/javascript"&gt; var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://"); document.write(unescape("%3Cspan id='cnzz_stat_icon_12'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D12%2show%3Dpic' type='text/javascript'%3E%3C/script%3E"));&lt;/script&gt;&lt;!-- ä½ çš„å‹ç›Ÿä»£ç  end --&gt;&lt;/div&gt;&#123;% endif %&#125; ä¿®æ”¹é…ç½®æ–‡ä»¶æ·»åŠ äº†ä»£ç ä¹‹åŽï¼Œè¿˜éœ€è¦ä¿®æ”¹nextçš„é…ç½®æ–‡ä»¶æ‰èƒ½å¤Ÿç”Ÿæ•ˆã€‚æ³¨æ„æ˜¯ä¸»é¢˜é…ç½®æ–‡ä»¶æ‰“å¼€\themes\nextç›®å½•ä¸‹çš„_config.ymlï¼ŒæŒ‰ctrl + Fæœç´¢CNZZ,æ‰¾åˆ°ä¹‹åŽå°†æ³¨é‡Šçš„å†…å®¹æ‰“å¼€ï¼Œå¹¶è®¾ç½®æˆtrueï¼Œæ³¨æ„ç©ºæ ¼ 12# CNZZ countcnzz_siteid: true è¿™æ ·å°±å¯ä»¥æˆåŠŸçš„ä½¿ç”¨CNZZè¿›è¡Œç»Ÿè®¡äº†ã€‚å»ºè®®ä½¿ç”¨hexo såœ¨æœ¬åœ°æµ‹è¯•ï¼Œçœ‹æ˜¯å¦æœ‰é—®é¢˜å†éƒ¨ç½²ä¸ŠåŽ»ã€‚]]></content>
      <categories>
        <category>å»ºç«™</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>å»ºç«™</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac Osï¼Œiphoneï¼Œipadç»‘å®šé˜¿é‡Œäº‘é‚®ç®±]]></title>
    <url>%2Fposts%2F94899ee0.html</url>
    <content type="text"><![CDATA[åœ¨ MacOS iPhone iPad ä¸Šé¢è®¾ç½®å¯èƒ½æœ‰å·®åˆ«ï¼Œä½†æ˜¯å…³é”®å‚æ•°å¦‚ä¸‹ã€‚ ä»¥Mac OSä¸ºä¾‹ï¼Œæ‰“å¼€è®¾ç½®ï¼Œå‰å¾€äº’è”ç½‘è´¦æˆ·ï¼Œæ·»åŠ å…¶ä»–è´¦æˆ·ï¼Œé‚®ä»¶è´¦æˆ·ï¼ŒæŒ‰è‡ªå·±çš„é˜¿é‡Œé‚®ç®±ï¼Œæˆ–è€…ä½ ä»¬å…¬å¸ç»™ä½ çš„ä»¥ä½ ä»¬å…¬å¸ååŽç¼€ç»“æŸçš„é‚®ç®±ï¼ˆå…¶å®žè¿˜æ˜¯é˜¿é‡Œé‚®ç®±ï¼‰ï¼Œå¡«å†™é‚®ç®±å¯†ç ã€‚ æŽ¥ç€é€‰æ‹©è´¦æˆ·ç±»åž‹ï¼špop æ”¶ä»¶æœåŠ¡å™¨ï¼špop3.aliyun.com å‘ä»¶æœåŠ¡å™¨ï¼šsmtp.aliyun.com]]></content>
      <categories>
        <category>Mac</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>å…¶ä»–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidé€‚é…-9.0è¿›é˜¶æŒ‡å—]]></title>
    <url>%2Fposts%2Fe2baf374.html</url>
    <content type="text"><![CDATA[å‰è¨€å›½å†…ä»ŽåŽ»å¹´å¼€å§‹å°±æœ‰æ¶ˆæ¯è¯´ï¼Œåº”ç”¨ä¸Šæž¶æˆ–è€…æ›´æ–°è¦æ±‚TargetSdkVersionæœ€ä½Žè¦ä¸º26ä»¥ä¸Šï¼Œä¹Ÿå°±æ˜¯æœ€ä½Žä¹Ÿè¦é€‚é…åˆ°8.0ã€‚ä»Šå¹´æ¥ä¹Ÿéƒ½é€æ­¥åœ°å¼€å§‹è½å®žã€‚ å°ç±³åº”ç”¨å•†åº—å…¬å‘Š Google Playçš„è¦æ±‚ è¿˜åŒ…æ‹¬ä»Ž8æœˆä»½å¼€å§‹åœ¨Google Playä¸Šå‘å¸ƒçš„åº”ç”¨å¿…é¡»æ”¯æŒ64ä½æž¶æž„ã€‚å¯ä»¥çœ‹åˆ°é€‚é…å·¥ä½œçœŸçš„ä¸èƒ½åƒä»¥å‰ä¸€æ ·éšå¿ƒæ‰€æ¬²äº†ã€‚ å‡†å¤‡å·¥ä½œè¿›å…¥æ­£é¢˜ï¼Œé¦–å…ˆå°†æˆ‘ä»¬é¡¹ç›®ä¸­çš„targetSdkVersionæ”¹ä¸º 28ã€‚æŽ¥ä¸‹æ¥è¿è¡Œä½ çš„é¡¹ç›®ï¼Œçœ‹æœ‰æ²¡ä¸­æžªã€‚ ç½‘ç»œHttpè¯·æ±‚å¤±è´¥åœ¨9.0ä¸­é»˜è®¤æƒ…å†µä¸‹å¯ç”¨ç½‘ç»œä¼ è¾“å±‚å®‰å…¨åè®® (TLS)ï¼Œé»˜è®¤æƒ…å†µä¸‹å·²åœç”¨æ˜Žæ–‡æ”¯æŒã€‚ä¹Ÿå°±æ˜¯ä¸å…è®¸ä½¿ç”¨httpè¯·æ±‚ï¼Œè¦æ±‚ä½¿ç”¨httpsã€‚ æ¯”å¦‚æˆ‘ä½¿ç”¨çš„æ˜¯okhttpï¼Œä¼šæŠ¥é”™ï¼š 1java.net.UnknownServiceException: CLEARTEXT communication to xxxx not permitted by network security policy è§£å†³æ–¹æ³•æ˜¯éœ€è¦æˆ‘ä»¬æ·»åŠ ç½‘ç»œå®‰å…¨é…ç½®ã€‚é¦–å…ˆåœ¨ res ç›®å½•ä¸‹æ–°å»ºxmlæ–‡ä»¶å¤¹ï¼Œæ·»åŠ network_security_config.xmlæ–‡ä»¶: 1234&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;network-security-config&gt; &lt;base-config cleartextTrafficPermitted="true" /&gt;&lt;/network-security-config&gt; AndroidManifest.xmlä¸­çš„applicationæ·»åŠ ï¼š 123456&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;manifest ... &gt; &lt;application android:networkSecurityConfig="@xml/network_security_config"&gt; ... &lt;/application&gt;&lt;/manifest&gt; ä»¥ä¸Šè¿™æ˜¯ä¸€ç§ç®€å•ç²—æš´çš„é…ç½®æ–¹æ³•ï¼Œè¦ä¹ˆæ”¯æŒhttpï¼Œè¦ä¹ˆä¸æ”¯æŒhttpã€‚ä¸ºäº†å®‰å…¨çµæ´»ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šæ”¯æŒçš„httpåŸŸåï¼š 12345678&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;network-security-config&gt; &lt;!-- Android 9.0 ä¸Šéƒ¨åˆ†åŸŸåæ—¶ä½¿ç”¨ http --&gt; &lt;domain-config cleartextTrafficPermitted="true"&gt; &lt;domain includeSubdomains="true"&gt;secure.example.com&lt;/domain&gt; &lt;domain includeSubdomains="true"&gt;cdn.example1.com&lt;/domain&gt; &lt;/domain-config&gt;&lt;/network-security-config&gt; å½“ç„¶ä¸æ­¢è¿™äº›é…ç½®ï¼Œè¿˜æœ‰æŠ“åŒ…é…ç½®ã€è®¾ç½®è‡ªå®šä¹‰CAä»¥åŠå„ç§åœºæ™¯ä¸‹çµæ´»çš„é…ç½®ï¼Œè¯¦ç»†çš„æ–¹æ³•å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ Apache HTTP å®¢æˆ·ç«¯å¼ƒç”¨åœ¨ Android 6.0 æ—¶ï¼Œå°±å·²ç»å–æ¶ˆäº†å¯¹ Apache HTTP å®¢æˆ·ç«¯çš„æ”¯æŒã€‚ ä»Ž Android 9.0 å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹è¯¥åº“å·²ä»Ž bootclasspath ä¸­ç§»é™¤ã€‚ä½†æ˜¯è€ä¸ä½æœ‰äº›SDKä¸­è¿˜åœ¨ä½¿ç”¨ï¼Œæ¯”å¦‚æˆ‘è§åˆ°çš„å‹ç›ŸQQåˆ†äº«æŠ¥é”™é—®é¢˜ã€‚ æ‰€ä»¥è¦æƒ³ç»§ç»­ä½¿ç”¨Apache HTTPï¼Œéœ€è¦åœ¨åº”ç”¨çš„ AndroidManifest.xml æ–‡ä»¶ä¸­æ·»åŠ ï¼š 1&lt;uses-library android:name="org.apache.http.legacy" android:required="false"/&gt; å‰å°æœåŠ¡å¯ä»¥è¯•ç€æœç´¢ä¸€ä¸‹ä½ çš„ä»£ç ï¼Œçœ‹æ˜¯å¦æœ‰è°ƒç”¨startForegroundService æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªå‰å°æœåŠ¡ã€‚ startForegroundService ä¸»è¦æ¥æºä¼°è®¡éƒ½æ˜¯8.0é€‚é…æ—¶å€™åŠ ä¸Šçš„ï¼š 123456Intent intentService = new Intent(this, MyService.class);if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) &#123; startForegroundService(intentService);&#125; else &#123; startService(intentService);&#125; 9.0 è¦æ±‚åˆ›å»ºä¸€ä¸ªå‰å°æœåŠ¡éœ€è¦è¯·æ±‚ FOREGROUND_SERVICE æƒé™ï¼Œå¦åˆ™ç³»ç»Ÿä¼šå¼•å‘ SecurityExceptionã€‚ 1234567891011java.lang.RuntimeException: Unable to start service com.weilu.test.MyService@81795be with Intent &#123; cmp=com.weilu.test/.MyService &#125;: java.lang.SecurityException: Permission Denial: startForeground from pid=28631, uid=10626 requires android.permission.FOREGROUND_SERVICE at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3723) at android.app.ActivityThread.access$1700(ActivityThread.java:201) at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1705) at android.os.Handler.dispatchMessage(Handler.java:106) at android.os.Looper.loop(Looper.java:207) at android.app.ActivityThread.main(ActivityThread.java:6820) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:876) è§£å†³æ–¹æ³•å°±æ˜¯AndroidManifest.xmlä¸­æ·»åŠ FOREGROUND_SERVICEæƒé™ï¼š 1&lt;uses-permission android:name="android.permission.FOREGROUND_SERVICE" /&gt; å¯åŠ¨Activityåœ¨9.0 ä¸­ï¼Œä¸èƒ½ç›´æŽ¥éž Activity çŽ¯å¢ƒä¸­ï¼ˆæ¯”å¦‚Serviceï¼ŒApplicationï¼‰å¯åŠ¨ Activityï¼Œå¦åˆ™ä¼šå´©æºƒæŠ¥é”™ï¼š 12345678910java.lang.RuntimeException: Unable to create service com.weilu.test.MyService: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want? at android.app.ActivityThread.handleCreateService(ActivityThread.java:3578) at android.app.ActivityThread.access$1400(ActivityThread.java:201) at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1690) at android.os.Handler.dispatchMessage(Handler.java:106) at android.os.Looper.loop(Looper.java:207) at android.app.ActivityThread.main(ActivityThread.java:6820) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:547) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:876) è¿™ç±»é—®é¢˜ä¸€èˆ¬ä¼šåœ¨ç‚¹å‡»æŽ¨é€æ¶ˆæ¯è·³è½¬é¡µé¢è¿™ç±»åœºæ™¯ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯ Intent ä¸­æ·»åŠ æ ‡FLAG_ACTIVITY_NEW_TASK 123Intent intent = new Intent(this, TestActivity.class);intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);startActivity(intent); å¼‚å½¢å±é€‚é…è¿™ç±»å¼‚å½¢å±å«æ³•å¾ˆå¤šï¼Œåˆ˜æµ·å±ã€æ°´æ»´å±ã€æŒ–å­”å±ã€ç¾Žäººå°–ã€‚ã€‚ å…¶å®žå¦‚æžœä½ çš„é¡µé¢ä¸éœ€è¦å…¨å±æ˜¾ç¤ºï¼Œé‚£ä¹ˆä¸éœ€è¦é¢å¤–çš„é€‚é…å·¥ä½œã€‚ å¦‚æžœé¡µé¢æ˜¯å…¨å±æ˜¾ç¤ºï¼ˆæ¯”å¦‚å¯åŠ¨é¡µï¼‰ã€‚ä¸ºäº†é˜²æ­¢ä½ çš„å†…å®¹è¢«é®æŒ¡ï¼Œå¤§éƒ¨åˆ†åœºæ™¯ä¸‹éƒ½æ˜¯å¯ä»¥ä½¿ç”¨èŽ·å–çŠ¶æ€æ é«˜åº¦æ¥å¤„ç†é®æŒ¡çš„é€‚é…é—®é¢˜ã€‚å› ä¸ºçŠ¶æ€æ çš„é«˜åº¦éƒ½æ˜¯å¤§äºŽç­‰äºŽåˆ˜æµ·çš„é«˜åº¦ã€‚ å½“ç„¶ï¼Œå¦‚æžœä½ æƒ³åˆ©ç”¨èµ·æ¥åˆ˜æµ·åŒºåŸŸï¼Œå°±éœ€è¦èŽ·å–åˆ˜æµ·ä½ç½®ç­‰ä¿¡æ¯è¿›è¡Œé€‚é…ã€‚åœ¨Android 9.0ä¸­å®˜æ–¹æä¾›äº†DisplayCutout ç±»ï¼Œå¯ä»¥ç¡®å®šåˆ˜æµ·åŒºåŸŸçš„ä½ç½®ï¼Œå›½å†…çš„éƒ¨åˆ†åŽ‚å•†åœ¨8.0å°±æœ‰äº†è‡ªå·±çš„é€‚é…æ–¹æ¡ˆã€‚ å…·ä½“çš„æˆ‘å°±ä¸è¿‡å¤šä»‹ç»äº†ï¼ŒæŽ¨èå¤§å®¶çœ‹ä»¥ä¸‹æ–‡ç« ï¼š Android P åˆ˜æµ·å±é€‚é…å…¨æ”»ç•¥ Androidåˆ˜æµ·å±ã€æ°´æ»´å±å…¨é¢å±é€‚é…æ–¹æ¡ˆ æƒé™é¦–å…ˆæ˜¯æƒé™ç»„çš„å˜æ›´ï¼š ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œåœ¨9.0 ä¸­æ–°å¢žæƒé™ç»„CALL_LOG å¹¶å°† READ_CALL_LOGã€WRITE_CALL_LOG å’Œ PROCESS_OUTGOING_CALLS æƒé™ä»ŽPHONEä¸­ç§»å…¥è¯¥ç»„ã€‚ é™åˆ¶è®¿é—®é€šè¯è®°å½•å¦‚æžœåº”ç”¨éœ€è¦è®¿é—®é€šè¯è®°å½•æˆ–è€…éœ€è¦å¤„ç†åŽ»ç”µï¼Œåˆ™æ‚¨å¿…é¡»å‘ CALL_LOGæƒé™ç»„æ˜Žç¡®è¯·æ±‚è¿™äº›æƒé™ã€‚ å¦åˆ™ä¼šå‘ç”Ÿ SecurityExceptionã€‚ é™åˆ¶è®¿é—®ç”µè¯å·ç  è¦é€šè¿‡ PHONE_STATE Intent æ“ä½œè¯»å–ç”µè¯å·ç ï¼ŒåŒæ—¶éœ€è¦ READ_CALL_LOG æƒé™å’Œ READ_PHONE_STATE æƒé™ã€‚ è¦ä»Ž PhoneStateListenerçš„onCallStateChanged() ä¸­è¯»å–ç”µè¯å·ç ï¼Œåªéœ€è¦ READ_CALL_LOG æƒé™ã€‚ ä¸éœ€è¦ READ_PHONE_STATE æƒé™ã€‚ å…¶ä»– åœ¨ Android 9 ä¸­ï¼Œè°ƒç”¨Build.SERIAL ä¼šå§‹ç»ˆè¿”å›ž UNKNOWN ä»¥ä¿æŠ¤ç”¨æˆ·çš„éšç§ã€‚å¦‚æžœä½ çš„åº”ç”¨éœ€è¦è®¿é—®è®¾å¤‡çš„ç¡¬ä»¶åºåˆ—å·ï¼Œé‚£ä¹ˆéœ€è¦å…ˆè¯·æ±‚ READ_PHONE_STATE æƒé™ï¼Œç„¶åŽè°ƒç”¨ Build.getSerial()ã€‚ æ³¨æ„éž SDK æŽ¥å£çš„é™åˆ¶ã€‚ä¸»è¦æ˜¯ä¸€äº›çƒ­ä¿®å¤ã€æ’ä»¶åŒ–æ¡†æž¶æ¶‰åŠæ¯”è¾ƒå¤šï¼Œæ³¨æ„åŠæ—¶å‡çº§æ–°ç‰ˆæœ¬ã€‚ å¤šè¿›ç¨‹ä½¿ç”¨WebViewæ³¨æ„æ— æ³•å…±ç”¨åŒä¸€æ•°æ®ç›®å½•ã€‚ è¯¦ç»†ç‚¹å‡»æŸ¥çœ‹ æ€»çš„æ¥è¯´ï¼Œ9.0çš„é€‚é…å·¥ä½œéœ€è¦æ”¹åŠ¨å’Œæ³¨æ„çš„ç‚¹ç›¸æ¯”è¾ƒä»¥å‰ç‰ˆæœ¬çš„é€‚é…æ¥è¯´å¹¶ä¸å¤šï¼Œä»Žæœ¬ç¯‡çš„ç¯‡å¹…å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¯¦ç»†çš„å˜åŒ–å¯ä»¥å‚çœ‹æ–‡æœ«çš„é“¾æŽ¥ã€‚åŽé¢å¦‚æžœé‡åˆ°ä»€ä¹ˆå‘ï¼Œæˆ‘ä¹Ÿä¼šåŠæ—¶è¡¥å……è¿›æ¥ã€‚æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼ï¼ å‚è€ƒ Android 9.0 è¡Œä¸ºå˜æ›´ targetSdkVersionå‡çº§28]]></content>
      <categories>
        <category>Android</category>
        <category>é€‚é…</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é€‚é…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidé€‚é…-8.0è¯¦è§£]]></title>
    <url>%2Fposts%2Fcd8b8392.html</url>
    <content type="text"><![CDATA[å‡†å¤‡å·¥ä½œå°†æˆ‘ä»¬é¡¹ç›®ä¸­çš„targetSdkVersionæ”¹ä¸º 26ï¼ˆ8.0ï¼‰ æˆ–è€… 27ï¼ˆ8.1ï¼‰ï¼Œè®°ä½ä¸è¦è¶…è¿‡27ï¼Œæ¯•ç«Ÿæˆ‘è¿˜æ²¡æœ‰å‘Šè¯‰ä½ Android Pæ€Žä¹ˆé€‚é…ï¼ˆæ»‘ç¨½ï¼‰ã€‚ è¿è¡Œæ—¶æƒé™é¦–å…ˆå¼•ç”¨å®˜æ–¹çš„åŽŸæ–‡ã€‚ åœ¨ Android 8.0 ä¹‹å‰ï¼Œå¦‚æžœåº”ç”¨åœ¨è¿è¡Œæ—¶è¯·æ±‚æƒé™å¹¶ä¸”è¢«æŽˆäºˆè¯¥æƒé™ï¼Œç³»ç»Ÿä¼šé”™è¯¯åœ°å°†å±žäºŽåŒä¸€æƒé™ç»„å¹¶ä¸”åœ¨æ¸…å•ä¸­æ³¨å†Œçš„å…¶ä»–æƒé™ä¹Ÿä¸€èµ·æŽˆäºˆåº”ç”¨ã€‚å¯¹äºŽé’ˆå¯¹ Android 8.0 çš„åº”ç”¨ï¼Œæ­¤è¡Œä¸ºå·²è¢«çº æ­£ã€‚ç³»ç»Ÿåªä¼šæŽˆäºˆåº”ç”¨æ˜Žç¡®è¯·æ±‚çš„æƒé™ã€‚ç„¶è€Œï¼Œä¸€æ—¦ç”¨æˆ·ä¸ºåº”ç”¨æŽˆäºˆæŸä¸ªæƒé™ï¼Œåˆ™æ‰€æœ‰åŽç»­å¯¹è¯¥æƒé™ç»„ä¸­æƒé™çš„è¯·æ±‚éƒ½å°†è¢«è‡ªåŠ¨æ‰¹å‡†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æŸä¸ªåº”ç”¨åœ¨å…¶æ¸…å•ä¸­åˆ—å‡ºREAD_EXTERNAL_STORAGE å’ŒWRITE_EXTERNAL_STORAGEã€‚åº”ç”¨è¯·æ±‚ READ_EXTERNAL_STORAGEï¼Œå¹¶ä¸”ç”¨æˆ·æŽˆäºˆäº†è¯¥æƒé™ã€‚å¦‚æžœè¯¥åº”ç”¨é’ˆå¯¹çš„æ˜¯ API çº§åˆ« 24 æˆ–æ›´ä½Žçº§åˆ«ï¼Œç³»ç»Ÿè¿˜ä¼šåŒæ—¶æŽˆäºˆWRITE_EXTERNAL_STORAGEï¼Œå› ä¸ºè¯¥æƒé™ä¹Ÿå±žäºŽåŒä¸€ STORAGE æƒé™ç»„å¹¶ä¸”ä¹Ÿåœ¨æ¸…å•ä¸­æ³¨å†Œè¿‡ã€‚å¦‚æžœè¯¥åº”ç”¨é’ˆå¯¹çš„æ˜¯ Android 8.0ï¼Œåˆ™ç³»ç»Ÿæ­¤æ—¶ä»…ä¼šæŽˆäºˆ READ_EXTERNAL_STORAGEï¼›ä¸è¿‡ï¼Œå¦‚æžœè¯¥åº”ç”¨åŽæ¥åˆè¯·æ±‚ WRITE_EXTERNAL_STORAGEï¼Œåˆ™ç³»ç»Ÿä¼šç«‹å³æŽˆäºˆè¯¥æƒé™ï¼Œè€Œä¸ä¼šæç¤ºç”¨æˆ·ã€‚ æ‰€è°“æƒé™ç»„å¦‚ä¸‹ï¼š æ‰€ä»¥æ€»ç»“ä¸‹æ¥ï¼Œå¦‚æžœä½ ä¹‹å‰æ˜¯ç”¨ä»€ä¹ˆæƒé™å°±åŽ»ç”³è¯·ä»€ä¹ˆæƒé™ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œè¿™ä¸ªå˜åŒ–ä¸ä¼šå½±å“åˆ°ä½ ã€‚å¦‚æžœä½ åªç”³è¯·äº†æƒé™ç»„ä¸­çš„æŸäº›æƒé™ï¼Œå´ç”¨äº†åŒç»„çš„å…¶ä»–æƒé™ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦åŽ»é€‚é…ä¸€ä¸‹äº†ã€‚ é‚£ä¹ˆæ€Žä¹ˆé€‚é…å‘¢ï¼Œå¦‚æžœä½ åŽ»æ£€æŸ¥ä¹‹å‰æ¯ä¸ªç”³è¯·æƒé™çš„åœ°æ–¹ï¼Œæœªå…å¤ªè¿‡éº»çƒ¦ã€‚é‚£ä¹ˆä½ å¯ä»¥æ ¹æ®ä½ é¡¹ç›®ä¸­çš„Manifestæ–‡ä»¶ä¸­éœ€è¦çš„æƒé™ä¸Žæƒé™ç»„åŽ»å¯¹æ¯”ï¼Œæ•´ç†å‡ºä½ éœ€è¦ç”³è¯·çš„å„ä¸ªæƒé™ç»„ã€‚æ¯”å¦‚ä½ éœ€è¦android.permission.CALL_PHONE(æ‰“ç”µè¯)ä¸Žandroid.permission.READ_PHONE_STATE(è¯»å–æ‰‹æœºçŠ¶æ€) è¿™ä¸¤ä¸ªæƒé™ã€‚é‚£ä¹ˆä½ å°±æ•´ç†å‡ºäº†ç±»ä¼¼ä¸‹é¢çš„ç±»ã€‚ 12345678910public class PermissionGroup &#123; //Phoneæƒé™ public static String[] PHONE = new String[] &#123; Manifest.permission.READ_PHONE_STATE, Manifest.permission.CALL_PHONE &#125;; ...&#125; åˆ°æ—¶åœ¨ç”³è¯·æƒé™æ—¶å°±å¯ä»¥ç›´æŽ¥èŽ·å–å®ƒï¼Œä¸€æ¬¡å°†å®ƒä»¬éƒ½ç”³è¯·äº†ã€‚è¿™æ ·å°±é˜²æ­¢äº†é—æ¼æŸä¸ªæƒé™ï¼Œå¯¼è‡´çš„å¼‚å¸¸ã€‚ æ³¨æ„ï¼š8.0ä¸­PHONEæƒé™ç»„æ–°å¢žä¸¤ä¸ªæƒé™ï¼š ``ANSWER_PHONE_CALLSï¼šå…è®¸æ‚¨çš„åº”ç”¨é€šè¿‡ç¼–ç¨‹æ–¹å¼æŽ¥å¬å‘¼å…¥ç”µè¯ã€‚è¦åœ¨æ‚¨çš„åº”ç”¨ä¸­å¤„ç†å‘¼å…¥ç”µè¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨acceptRingingCall() `å‡½æ•°ã€‚ READ_PHONE_NUMBERS ï¼šæƒé™å…è®¸æ‚¨çš„åº”ç”¨è¯»å–è®¾å¤‡ä¸­å­˜å‚¨çš„ç”µè¯å·ç ã€‚ é€šçŸ¥é€‚é…å…¶å®ž8.0åœ¨é€šçŸ¥è¿™é‡Œå˜åŒ–è¿˜æŒºå¤šçš„ï¼Œæ¯”å¦‚é€šçŸ¥æ¸ é“ã€é€šçŸ¥æ ‡å¿—ã€é€šçŸ¥è¶…æ—¶ã€èƒŒæ™¯é¢œè‰²çš„ç­‰ï¼Œè¯¦ç»†çš„è¯´æ˜Žå¯ä»¥åŽ»çœ‹å®˜æ–¹çš„Android 8.0 åŠŸèƒ½å’Œ APIã€‚è™½ç„¶å˜åŒ–å¾ˆå¤šï¼Œä½†æ˜¯å›½å†…çš„æœºå­è²Œä¼¼æ”¯æŒçš„ä¸å¤šã€‚ã€‚ã€‚æˆ‘åœ¨å°ç±³çš„æ–‡æ¡£ä¸­äº†è§£åˆ°ï¼ŒAndroid å·²å°†é€šçŸ¥æ¸ é“çš„é€»è¾‘çº³å…¥ Android Compatibility Definition Document (CDD) ä¸­ï¼Œæ„å‘³ç€æ‰€æœ‰ Android åŽ‚å•†éƒ½å¿…é¡»æ”¯æŒã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒçš„åŽ»é€‚é…ã€‚ é€šçŸ¥æ¸ é“ï¼šAndroid 8.0 å¼•å…¥äº†é€šçŸ¥æ¸ é“ï¼Œå…¶å…è®¸æ‚¨ä¸ºè¦æ˜¾ç¤ºçš„æ¯ç§é€šçŸ¥ç±»åž‹åˆ›å»ºç”¨æˆ·å¯è‡ªå®šä¹‰çš„æ¸ é“ã€‚ç”¨æˆ·ç•Œé¢å°†é€šçŸ¥æ¸ é“ç§°ä¹‹ä¸ºé€šçŸ¥ç±»åˆ«ã€‚ æˆ‘ä¸ªäººå¾ˆå–œæ¬¢è¿™ä¸ªæ–°ç‰¹æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬ç»™ç”¨æˆ·çš„é€šçŸ¥è¿›è¡Œåˆ†ç±»ï¼Œæˆ‘ç”¨é«˜å¾·åœ°å›¾appæ¥ä¸¾ä¾‹ å°ç±³(MIUI10) åŽä¸º(EMUI 8.1.0) ä¸€åŠ (æ°¢OS 5.1) å¯ä»¥çœ‹åˆ°é«˜å¾·åœ°å›¾åˆ†çš„å¾ˆç»†è‡´ï¼Œåˆ†ä¸ºå››ä¸ªç»„å…±13ä¸ªç±»åˆ«(åŽä¸ºè²Œä¼¼å¯¹ç»„ä¸ç”Ÿæ•ˆ)ã€‚è¿™æ ·æœ‰ä¸ªå¥½å¤„ï¼Œæˆ‘ä»¬å¯ä»¥æŽ§åˆ¶æˆ‘ä»¬æƒ³æ”¶åˆ°çš„é€šçŸ¥ï¼Œæ¯”å¦‚æˆ‘ä¸å–œæ¬¢è¿è¥æ´»åŠ¨é€šçŸ¥ï¼Œé‚£æˆ‘å°±å¯ä»¥æŠŠå®ƒå…³é—­ã€‚è¿™æ ·é¿å…å¤§é‡çš„ä¸å¿…è¦é€šçŸ¥ï¼Œå¦åˆ™ä½¿å¾—ç”¨æˆ·è§‰å¾—çƒ¦ï¼Œä¸€æ£’å­æ‰“æ­»ã€‚ç›´æŽ¥å…³é—­ä½ çš„å…è®¸é€šçŸ¥ã€‚å½“ç„¶äº†ï¼Œå¤§é‡appéƒ½è¿˜æ²¡æœ‰é€‚é…ï¼Œé€‚é…çš„ä¹Ÿéƒ½åˆ†çš„ä¸æ˜¯å¾ˆç»†è‡´ï¼Œæ¯”å¦‚ä¸‹å›¾çš„QQã€‚(æ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³) å°ç±³(MIUI10) ä¸€åŠ (æ°¢OS 5.1) å½“ç„¶æ›´é‡è¦çš„é—®é¢˜æ˜¯ï¼Œå¦‚æžœä¸åŽ»é€‚é…ï¼Œå¯èƒ½é€šçŸ¥éƒ½ä¸ä¼šå¼¹å‡ºæ¥ã€‚é‚£ä¹ˆé€‚é…çš„æ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738private void createNotificationChannel() &#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE); //åˆ†ç»„ï¼ˆå¯é€‰ï¼‰ //groupIdè¦å”¯ä¸€ String groupId = "group_001"; NotificationChannelGroup group = new NotificationChannelGroup(groupId, "å¹¿å‘Š"); //åˆ›å»ºgroup notificationManager.createNotificationChannelGroup(group); //channelIdè¦å”¯ä¸€ String channelId = "channel_001"; NotificationChannel adChannel = new NotificationChannel(channelId, "æŽ¨å¹¿ä¿¡æ¯", NotificationManager.IMPORTANCE_DEFAULT); //è¡¥å……channelçš„å«ä¹‰ï¼ˆå¯é€‰ï¼‰ adChannel.setDescription("æŽ¨å¹¿ä¿¡æ¯"); //å°†æ¸ é“æ·»åŠ è¿›ç»„ï¼ˆå…ˆåˆ›å»ºç»„æ‰èƒ½æ·»åŠ ï¼‰ adChannel.setGroup(groupId); //åˆ›å»ºchannel notificationManager.createNotificationChannel(adChannel); //åˆ›å»ºé€šçŸ¥æ—¶ï¼Œæ ‡è®°ä½ çš„æ¸ é“id Notification notification = new Notification.Builder(MainActivity.this, channelId) .setSmallIcon(R.mipmap.ic_launcher) .setLargeIcon(BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher)) .setContentTitle("ä¸€æ¡æ–°é€šçŸ¥") .setContentText("è¿™æ˜¯ä¸€æ¡æµ‹è¯•æ¶ˆæ¯") .setAutoCancel(true) .build(); notificationManager.notify(1, notification); &#125; &#125; æ•ˆæžœå¦‚ä¸‹ï¼š å°ç±³(MIUI10) åŽä¸º(EMUI 8.1.0) ä¸€åŠ (æ°¢OS 5.1) åŽä¸ºæ‰‹æœºå½“åªæœ‰ä¸€ä¸ªæ¸ é“æ—¶ï¼Œä¸ä¼šæ˜¾ç¤ºï¼Œä¼šå½“åšé»˜è®¤é€šçŸ¥å¤„ç†ï¼Œé™¤éžä¸€ä¸ªä»¥ä¸Šã€‚ æ³¨æ„ï¼šå½“Channelå·²ç»å­˜åœ¨æ—¶ï¼ŒåŽé¢çš„createNotificationChannelæ–¹æ³•ä»…èƒ½æ›´æ–°å…¶name/descriptionï¼Œä»¥åŠå¯¹importanceè¿›è¡Œé™çº§ï¼Œå…¶ä½™é…ç½®å‡æ— æ³•æ›´æ–°ã€‚æ‰€ä»¥å¦‚æžœæœ‰å¿…è¦çš„ä¿®æ”¹åªèƒ½åˆ›å»ºæ–°çš„æ¸ é“ï¼Œåˆ é™¤æ—§æ¸ é“ åˆ é™¤æ¸ é“ä»£ç å¦‚ä¸‹ï¼š 123456private void deleteNotificationChannel(String channelId)&#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; NotificationManager mNotificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE); mNotificationManager.deleteNotificationChannel(channelId); &#125;&#125; æ‚¬æµ®çª—é€‚é…ä½¿ç”¨ SYSTEM_ALERT_WINDOW æƒé™çš„åº”ç”¨æ— æ³•å†ä½¿ç”¨ä»¥ä¸‹çª—å£ç±»åž‹æ¥åœ¨å…¶ä»–åº”ç”¨å’Œç³»ç»Ÿçª—å£ä¸Šæ–¹æ˜¾ç¤ºæé†’çª—å£: TYPE_PHONE TYPE_PRIORITY_PHONE TYPE_SYSTEM_ALERT TYPE_SYSTEM_OVERLAY TYPE_SYSTEM_ERROR ç›¸åï¼Œåº”ç”¨å¿…é¡»ä½¿ç”¨åä¸º TYPE_APPLICATION_OVERLAY çš„æ–°çª—å£ç±»åž‹ã€‚ ä¹Ÿå°±æ˜¯è¯´éœ€è¦åœ¨ä¹‹å‰çš„åŸºç¡€ä¸Šåˆ¤æ–­ä¸€ä¸‹ï¼š 12345if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; mWindowParams.type = WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY&#125;else &#123; mWindowParams.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT&#125; å½“ç„¶è®°å¾—éœ€è¦æœ‰æƒé™ 12&lt;uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/&gt;&lt;uses-permission android:name="android.permission.SYSTEM_OVERLAY_WINDOW" /&gt; å†è¿›è¡Œåˆ¤æ–­ å®‰è£…APKAndroid 8.0åŽ»é™¤äº†â€œå…è®¸æœªçŸ¥æ¥æºâ€é€‰é¡¹ï¼Œæ‰€ä»¥å¦‚æžœæˆ‘ä»¬çš„Appæœ‰å®‰è£…Appçš„åŠŸèƒ½ï¼ˆæ£€æŸ¥æ›´æ–°ä¹‹ç±»çš„ï¼‰ï¼Œé‚£ä¹ˆä¼šæ— æ³•æ­£å¸¸å®‰è£…ã€‚ é¦–å…ˆåœ¨AndroidManifestæ–‡ä»¶ä¸­æ·»åŠ å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨çš„æƒé™ 1&lt;uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES"/&gt; è¿™æ ·ç³»ç»Ÿä¼šè‡ªåŠ¨è¯¢é—®ç”¨æˆ·å®ŒæˆæŽˆæƒã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å…ˆä½¿ç”¨ canRequestPackageInstalls()æŸ¥è¯¢æ˜¯å¦æœ‰æ­¤æƒé™ï¼Œå¦‚æžœæ²¡æœ‰çš„è¯ä½¿ç”¨Settings.ACTION_MANAGE_UNKNOWN_APP_SOURCESè¿™ä¸ªactionå°†ç”¨æˆ·å¼•å¯¼è‡³å®‰è£…æœªçŸ¥åº”ç”¨æƒé™ç•Œé¢åŽ»æŽˆæƒã€‚ 12345678910111213141516171819202122232425262728private static final int REQUEST_CODE_UNKNOWN_APP = 100; private void installAPK()&#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; boolean hasInstallPermission = getPackageManager().canRequestPackageInstalls(); if (hasInstallPermission) &#123; //å®‰è£…åº”ç”¨ &#125; else &#123; //è·³è½¬è‡³â€œå®‰è£…æœªçŸ¥åº”ç”¨â€æƒé™ç•Œé¢ï¼Œå¼•å¯¼ç”¨æˆ·å¼€å¯æƒé™ Uri selfPackageUri = Uri.parse("package:" + this.getPackageName()); Intent intent = new Intent(Settings.ACTION_MANAGE_UNKNOWN_APP_SOURCES, selfPackageUri); startActivityForResult(intent, REQUEST_CODE_UNKNOWN_APP); &#125; &#125;else &#123; //å®‰è£…åº”ç”¨ &#125; &#125; //æŽ¥æ”¶â€œå®‰è£…æœªçŸ¥åº”ç”¨â€æƒé™çš„å¼€å¯ç»“æžœ @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; super.onActivityResult(requestCode, resultCode, data); if (requestCode == REQUEST_CODE_UNKNOWN_APP) &#123; installAPK(); &#125; &#125; å¯¹äºŽæƒé™ç»„ã€æ‚¬æµ®çª—è¿˜æœ‰å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨çš„æƒé™é€‚é…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨AndPermissionã€‚è¿™æ ·æ›´åŠ ä¾¿æ·ã€‚ é€æ˜Žä¸»é¢˜çš„Activityè¿™ä¸ªæ˜¯åœ¨targetSdk=27ï¼ŒAndroidä¸º8.0çš„æ‰‹æœºæ—¶ï¼Œå‡ºçŽ°çš„bugï¼ˆå› ä¸ºå®˜æ–¹å·²ç»åœ¨8.1ä¿®å¤ï¼‰ã€‚é—®é¢˜çš„æŽ¢ç©¶å¯ä»¥æŸ¥çœ‹è¿™é‡Œã€‚ åªæœ‰å…¨å±ä¸é€æ˜Žçš„activityæ‰å¯ä»¥è®¾ç½®æ–¹å‘ã€‚å¦åˆ™æŠ¥é”™å¦‚ä¸‹ï¼š 1234567891011java.lang.IllegalStateException: Only fullscreen opaque activities can request orientation at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2957) at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3032) at android.app.ActivityThread.-wrap11(Unknown Source:0) at adroid.app.ActivityThread$H.handleMessage(ActivityThread.java:1696) at android.os.Handler.dispatchMessage(Handler.java:105) at android.os.Looper.loop(Looper.java:164) at android.app.ActivityThread.main(ActivityThread.java:6944) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:327) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1374) å®¹æ˜“ä¸­æžªçš„æ¯”å¦‚å¾®ä¿¡åˆ†äº«ã€æ”¯ä»˜çš„å›žè°ƒé¡µé¢ï¼Œæˆ‘ä»¬ä¹ æƒ¯è®¾ä¸ºé€æ˜Žã€‚ è§£å†³åŠžæ³•ï¼š è¦ä¹ˆåŽ»æŽ‰å¯¹åº”activityä¸­çš„ screenOrientation å±žæ€§ï¼Œæˆ–è€…å¯¹åº”è®¾ç½®æ–¹å‘çš„ä»£ç ã€‚ è¦ä¹ˆèˆå¼ƒé€æ˜Žæ•ˆæžœï¼Œåœ¨å®ƒçš„Themeä¸­æ·»åŠ ï¼š 1&lt;item name="android:windowIsTranslucent"&gt;false&lt;/item&gt; é›†åˆçš„å¤„ç†çŽ°åœ¨ï¼ŒAbstractCollection.removeAll(null)å’ŒAbstractCollection.retainAll(null)å§‹ç»ˆå¼•å‘ NullPointerExceptionï¼›ä¹‹å‰ï¼Œå½“é›†åˆä¸ºç©ºæ—¶ä¸ä¼šå¼•å‘ NullPointerExceptionã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åšåˆ¤ç©ºå¤„ç†ã€‚ åŽå°æ‰§è¡Œé™åˆ¶åº”ç”¨åœ¨ä¸¤ä¸ªæ–¹é¢å—åˆ°é™åˆ¶ï¼š åŽå°æœåŠ¡é™åˆ¶ï¼šå¤„äºŽç©ºé—²çŠ¶æ€æ—¶ï¼Œåº”ç”¨å¯ä»¥ä½¿ç”¨çš„åŽå°æœåŠ¡å­˜åœ¨é™åˆ¶ã€‚ è¿™äº›é™åˆ¶ä¸é€‚ç”¨äºŽå‰å°æœåŠ¡ï¼Œå› ä¸ºå‰å°æœåŠ¡æ›´å®¹æ˜“å¼•èµ·ç”¨æˆ·æ³¨æ„ã€‚ å¹¿æ’­é™åˆ¶ï¼šé™¤äº†æœ‰é™çš„ä¾‹å¤–æƒ…å†µï¼Œåº”ç”¨æ— æ³•ä½¿ç”¨æ¸…å•æ³¨å†Œéšå¼å¹¿æ’­ã€‚ å®ƒä»¬ä»ç„¶å¯ä»¥åœ¨è¿è¡Œæ—¶æ³¨å†Œè¿™äº›å¹¿æ’­ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨æ¸…å•æ³¨å†Œä¸“é—¨é’ˆå¯¹å®ƒä»¬çš„æ˜¾å¼å¹¿æ’­ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”ç”¨éƒ½å¯ä»¥ä½¿ç”¨ JobScheduler å…‹æœè¿™äº›é™åˆ¶ã€‚ è¿™ç§æ–¹å¼è®©åº”ç”¨å®‰æŽ’ä¸ºåœ¨æœªæ´»è·ƒè¿è¡Œæ—¶æ‰§è¡Œå·¥ä½œï¼Œä¸è¿‡ä»èƒ½å¤Ÿä½¿ç³»ç»Ÿå¯ä»¥åœ¨ä¸å½±å“ç”¨æˆ·ä½“éªŒçš„æƒ…å†µä¸‹å®‰æŽ’è¿™äº›ä½œä¸šã€‚å…³äºŽçš„ç”¨æ³•å¯ä»¥å‚è€ƒå®˜æ–¹ä¾‹å­ï¼šandroid-JobSchedulerã€‚ åŽå°ä»»åŠ¡googleæŽ¨èæ–¹æ¡ˆä½¿ç”¨ WorkManagerï¼ŒWorkManagerå¯ä»¥è‡ªåŠ¨ç»´æŠ¤åŽå°ä»»åŠ¡ï¼ŒåŒæ—¶å¯é€‚åº”ä¸åŒçš„æ¡ä»¶ï¼ŒåŒæ—¶æ»¡è¶³åŽå°Serviceå’Œé™æ€å¹¿æ’­ï¼Œå†…éƒ¨ç»´æŠ¤ç€JobSchedulerï¼Œè€Œåœ¨6.0ä»¥ä¸‹ç³»ç»Ÿç‰ˆæœ¬åˆ™å¯è‡ªåŠ¨åˆ‡æ¢ä¸ºAlarmManagerï¼æœ‰å…´è¶£çš„å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚ å½“ç„¶è¿˜æœ‰åŽå°ä½ç½®çš„é™åˆ¶éœ€è¦åŽ»æ³¨æ„ã€‚ å‚è€ƒ 1.MIUI 10 é€šçŸ¥ç±»åˆ« / Channel é€‚é… 2.Create and Manage Notification Channels 3.Presentation of Notifications 4.Android å®žçŽ°åº”ç”¨æ›´æ–°é€‚é… Android O]]></content>
      <categories>
        <category>Android</category>
        <category>é€‚é…</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é€‚é…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidé€‚é…-7.0çš„è¸©å‘ä¹‹è·¯]]></title>
    <url>%2Fposts%2Fa6a9da5d.html</url>
    <content type="text"><![CDATA[å®‰è£…æ—¶è§£æžé”™è¯¯æˆ‘ä»¬çš„Appé€šå¸¸ä¼šæœ‰æ£€æŸ¥æ›´æ–°çš„åŠŸèƒ½ã€‚ç”¨æˆ·åœ¨æ”¶åˆ°æç¤ºæ›´æ–°å¹¶ä¸”ä¸‹è½½å®ŒåŽï¼Œä¼šè‡ªåŠ¨æ‰“å¼€å®‰è£…é¡µé¢è®©ç”¨æˆ·æ¥åŽ»å®‰è£…ã€‚è¿™æ—¶å°±ä¼šå‡ºçŽ°å®‰è£…é”™è¯¯çš„é—®é¢˜ï¼Œè¿™ç±»çš„é—®é¢˜çš„å¯èƒ½æ€§æ¯”è¾ƒå¤šã€‚æ¯”å¦‚è¾ƒä½Žç‰ˆæœ¬çš„Appæƒ³è¦è¦†ç›–å·²æœ‰çš„è¾ƒé«˜ç‰ˆæœ¬Appä¼šæç¤ºå®‰è£…æœªå®Œæˆï¼Œæˆ–æ˜¯ç­¾åä¸ä¸€è‡´å¯¼è‡´çš„ã€‚ä¸è¿‡7.0ä¸Šå¸¸è§çš„æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µã€‚ åº”ç”¨é—´å…±äº«æ–‡ä»¶åœ¨targetSdkVersionå¤§äºŽç­‰äºŽçš„24çš„Appä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰åŽ»é€‚é…7.0ã€‚é‚£ä¹ˆåœ¨è°ƒç”¨å®‰è£…é¡µé¢ï¼Œæˆ–ä¿®æ”¹ç”¨æˆ·å¤´åƒæ“ä½œæ—¶ï¼Œå°±ä¼šå¤±è´¥ã€‚é‚£ä¹ˆå°±éœ€è¦ä½ åŽ»é€‚é…7.0æˆ–æ˜¯å°†targetSdkVersionæ”¹ä¸º24ä»¥ä¸‹ï¼ˆä¸æŽ¨èï¼‰ã€‚é€‚é…çš„æ–¹æ³•è¿™é‡Œå°±ä¸ç»†è®²ï¼Œå¤§å®¶å¯ä»¥çœ‹é¸¿æ´‹å¤§ç¥žçš„ Android 7.0 è¡Œä¸ºå˜æ›´ é€šè¿‡FileProvideråœ¨åº”ç”¨é—´å…±äº«æ–‡ä»¶ è¿™ç¯‡æ–‡ç« ã€‚ APK signature scheme v2 Android 7.0 å¼•å…¥ä¸€é¡¹æ–°çš„åº”ç”¨ç­¾åæ–¹æ¡ˆ APK Signature Scheme v2ï¼Œå®ƒèƒ½æä¾›æ›´å¿«çš„åº”ç”¨å®‰è£…æ—¶é—´å’Œæ›´å¤šé’ˆå¯¹æœªæŽˆæƒ APK æ–‡ä»¶æ›´æ”¹çš„ä¿æŠ¤ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒAndroid Studio 2.2 å’Œ Android Plugin for Gradle 2.2 ä¼šä½¿ç”¨ APK Signature Scheme v2 å’Œä¼ ç»Ÿç­¾åæ–¹æ¡ˆæ¥ç­¾ç½²æ‚¨çš„åº”ç”¨ã€‚è¯¦ç»†çœ‹å®‰å“å®˜æ–¹è¯´æ˜Žã€‚ ç®€å•åœ°è¯´å°±æ˜¯ä»»ä½•æ–¹å¼çš„ç¯¡æ”¹APK æ–‡ä»¶ï¼Œåœ¨åˆ©ç”¨äº†V2ç­¾åçš„apkä¸Šä¼šå¤±æ•ˆã€‚ å¯ä»¥çœ‹åˆ°é»˜è®¤æ˜¯V1 å’ŒV2é€‰ä¸­çš„ã€‚ 1ï¼‰åªå‹¾é€‰v1ç­¾åå°±æ˜¯ä¼ ç»Ÿæ–¹æ¡ˆç­¾ç½²ï¼Œä½†æ˜¯åœ¨7.0ä¸Šä¸ä¼šä½¿ç”¨V2å®‰å…¨çš„éªŒè¯æ–¹å¼ã€‚2ï¼‰åªå‹¾é€‰V2ç­¾å7.0ä»¥ä¸‹ä¼šæ˜¾ç¤ºæœªå®‰è£…ï¼Œ7.0ä¸Šåˆ™ä¼šä½¿ç”¨äº†V2å®‰å…¨çš„éªŒè¯æ–¹å¼ã€‚3ï¼‰åŒæ—¶å‹¾é€‰V1å’ŒV2åˆ™æ‰€æœ‰ç‰ˆæœ¬éƒ½æ²¡é—®é¢˜ã€‚ PopupWindowä½ç½®ä¸æ­£ç¡®7.0ç³»ç»Ÿçš„æ‰‹æœºä¸Šï¼ŒPopupWindowå¼¹å‡ºä½ç½®ä¸æ­£ç¡®ã€‚æœ‰ä¸¤ç§å¯èƒ½ï¼š ç¬¬ä¸€ç§ï¼š æˆ‘ä»¬ä½¿ç”¨äº†updateæ–¹æ³•ï¼ŒåŒæ—¶è®¾ç½®äº†Gravityï¼ˆGravity.NO_GRAVITYæ²¡äº‹ï¼‰ã€‚å› ä¸ºåœ¨updateæ–¹æ³•ä¸­æœ‰è°ƒç”¨computeGravityæ–¹æ³•åŽ»èŽ·å–Gravityã€‚ï¼ˆ7.0ä»¥ä¸‹æ²¡æœ‰èŽ·å–Gravityè¿›è¡Œæ›´æ–°åˆ¤æ–­ï¼‰ 12345678910111213public void update() &#123; // çœç•¥éƒ¨åˆ†ä»£ç  final int newGravity = computeGravity(); if (newGravity != p.gravity) &#123; p.gravity = newGravity; update = true; &#125; if (update) &#123; setLayoutDirectionFromAnchor(); mWindowManager.updateViewLayout(mDecorView, p); &#125; &#125; Android 7.1computeGravityæ–¹æ³• 1234567private int computeGravity() &#123; int gravity = mGravity == Gravity.NO_GRAVITY ? Gravity.START | Gravity.TOP : mGravity; if (mIsDropdown &amp;&amp; (mClipToScreen || mClippingEnabled)) &#123; gravity |= Gravity.DISPLAY_CLIP_VERTICAL; &#125; return gravity;&#125; å¾ˆæ˜¾ç„¶åœ¨7.0ä¸Šæˆ‘ä»¬è®¾ç½®çš„Gravityè¢«è¦†ç›–äº†ã€‚è§£å†³å°±å¾ˆç®€å•äº†ï¼Œä¸ä½¿ç”¨updateæ–¹æ³•ã€‚å¦‚æžœä½ çœŸçš„è¦ä½¿ç”¨å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« çš„æ–¹æ³•ã€‚ ç¬¬äºŒç§ï¼š PopupWindowé«˜åº¦ä¸ºMATCH_PARENTï¼Œåœ¨æ˜¾ç¤ºçš„æ—¶å€™è°ƒç”¨showAsLocationæ–¹æ³•æ—¶ï¼ŒPopupWindowå¹¶æ²¡æœ‰åœ¨æŒ‡å®šæŽ§ä»¶çš„ä¸‹æ–¹æ˜¾ç¤ºã€‚å¦‚æžœä½¿ç”¨showAsDropDownï¼Œä¼šå…¨å±æ˜¾ç¤ºã€‚ è§£å†³æ–¹æ³•ï¼š 1.æœ€ç®€å•çš„è§£å†³æ–¹æ³•å°±æ˜¯æŒ‡å®š PopupWindow çš„é«˜åº¦ä¸º WRAP_CONTENT, è°ƒç”¨ showAsDropDownæ–¹æ³•ã€‚ 2.æˆ–è€…å¼¹å‡ºæ—¶åšä¸€ä¸‹åˆ¤æ–­å¤„ç†ï¼ˆä»£ç æ¥è‡ªPopupWindowCompatï¼‰ 12345678910111213if (Build.VERSION.SDK_INT &gt;= 24) &#123; // Android 7.xä¸­,PopupWindowé«˜åº¦ä¸ºmatch_parentæ—¶,ä¼šå‡ºçŽ°å…¼å®¹æ€§é—®é¢˜,éœ€è¦å¤„ç†å…¼å®¹æ€§ int[] location = new int[2]; // è®°å½•anchoråœ¨å±å¹•ä¸­çš„ä½ç½® anchor.getLocationOnScreen(location); int offsetY = location[1] + anchor.getHeight(); if (Build.VERSION.SDK_INT &gt;= 25) &#123; // Android 7.1 ,8.0ä¸­ï¼ŒPopupWindowé«˜åº¦ä¸º match_parent æ—¶ï¼Œä¼šå æ®æ•´ä¸ªå±å¹• // æ•…è€Œéœ€è¦åœ¨ Android 7.1ä¸Šå†åšç‰¹æ®Šå¤„ç† int screenHeight = ScreenUtils.getScreenHeight(context); // èŽ·å–å±å¹•é«˜åº¦ popupWindow.setHeight(screenHeight - offsetY); // é‡æ–°è®¾ç½® PopupWindow çš„é«˜åº¦ &#125; popupWindow.showAtLocation(anchor, Gravity.NO_GRAVITY, 0, offsetY);&#125; else &#123; popupWindow.showAsDropDown(anchor);&#125; åŽå°ä¼˜åŒ–å°ä¼™ä¼´ä»¬éƒ½çŸ¥é“åœ¨Androidä¸­æœ‰ä¸€äº›éšå¼å¹¿æ’­ï¼Œä½¿ç”¨è¿™äº›éšå¼å¹¿æ’­å¯ä»¥åšä¸€äº›ç‰¹å®šçš„åŠŸèƒ½ï¼Œå¦‚ï¼Œå½“æ‰‹æœºç½‘ç»œå˜æˆWiFiæ—¶è‡ªåŠ¨ä¸‹è½½æ›´æ–°åŒ…ç­‰ã€‚ ä½†ï¼Œè¿™äº›éšå¼å¹¿æ’­ä¼šåœ¨åŽå°é¢‘ç¹å¯åŠ¨å·²æ³¨å†Œä¾¦å¬è¿™äº›å¹¿æ’­çš„åº”ç”¨ï¼Œä»Žè€Œå¸¦æ¥å¾ˆå¤§çš„ç”µé‡æ¶ˆè€—ï¼Œä¸ºç¼“è§£è¿™ä¸€é—®é¢˜æ¥æå‡è®¾å¤‡æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œåœ¨Android 7.0ä¸­åˆ é™¤äº†ä¸‰é¡¹éšå¼å¹¿æ’­ï¼Œä»¥å¸®åŠ©ä¼˜åŒ–å†…å­˜ä½¿ç”¨å’Œç”µé‡æ¶ˆè€—ã€‚ Android 7.0 åº”ç”¨äº†ä»¥ä¸‹ä¼˜åŒ–æŽªæ–½ï¼š åœ¨ Android 7.0ä¸Š åº”ç”¨ä¸ä¼šæ”¶åˆ° CONNECTIVITY_ACTION å¹¿æ’­ï¼Œå³ä½¿ä½ åœ¨manifestæ¸…å•æ–‡ä»¶ä¸­è®¾ç½®äº†è¯·æ±‚æŽ¥å—è¿™äº›äº‹ä»¶çš„é€šçŸ¥ã€‚ ä½†ï¼Œåœ¨å‰å°è¿è¡Œçš„åº”ç”¨å¦‚æžœä½¿ç”¨BroadcastReceiver è¯·æ±‚æŽ¥æ”¶é€šçŸ¥ï¼Œåˆ™ä»å¯ä»¥åœ¨ä¸»çº¿ç¨‹ä¸­ä¾¦å¬ CONNECTIVITY_CHANGEã€‚ åœ¨ Android 7.0ä¸Šåº”ç”¨æ— æ³•å‘é€æˆ–æŽ¥æ”¶ ACTION_NEW_PICTURE æˆ–ACTION_NEW_VIDEO ç±»åž‹çš„å¹¿æ’­ã€‚ åº”å¯¹ç­–ç•¥ï¼šAndroid æ¡†æž¶æä¾›å¤šä¸ªè§£å†³æ–¹æ¡ˆæ¥ç¼“è§£å¯¹è¿™äº›éšå¼å¹¿æ’­çš„éœ€æ±‚ã€‚ ä¾‹å¦‚ï¼ŒJobScheduler APIæä¾›äº†ä¸€ä¸ªç¨³å¥å¯é çš„æœºåˆ¶æ¥å®‰æŽ’æ»¡è¶³æŒ‡å®šæ¡ä»¶ï¼ˆä¾‹å¦‚è¿žå…¥æ— çº¿æµé‡ç½‘ç»œï¼‰æ—¶æ‰€æ‰§è¡Œçš„ç½‘ç»œæ“ä½œã€‚ æ‚¨ç”šè‡³å¯ä»¥ä½¿ç”¨ JobScheduler API æ¥é€‚åº”å†…å®¹æä¾›ç¨‹åºå˜åŒ–ã€‚ å¦å¤–ï¼Œå¤§å®¶å¦‚æžœæƒ³äº†è§£æ›´å¤šå…³äºŽåŽå°çš„ä¼˜åŒ–å¯æŸ¥é˜…åŽå°ä¼˜åŒ– ç§»åŠ¨è®¾å¤‡ä¼šç»åŽ†é¢‘ç¹çš„è¿žæŽ¥å˜æ›´ï¼Œä¾‹å¦‚åœ¨ Wi-Fi å’Œç§»åŠ¨æ•°æ®ä¹‹é—´åˆ‡æ¢æ—¶ã€‚ ç›®å‰ï¼Œå¯ä»¥é€šè¿‡åœ¨åº”ç”¨æ¸…å•ä¸­æ³¨å†Œä¸€ä¸ªæŽ¥æ”¶å™¨æ¥ä¾¦å¬éšå¼ CONNECTIVITY_ACTION å¹¿æ’­ï¼Œè®©åº”ç”¨èƒ½å¤Ÿç›‘æŽ§è¿™äº›å˜æ›´ã€‚ ç”±äºŽå¾ˆå¤šåº”ç”¨ä¼šæ³¨å†ŒæŽ¥æ”¶æ­¤å¹¿æ’­ï¼Œå› æ­¤å•æ¬¡ç½‘ç»œåˆ‡æ¢å³ä¼šå¯¼è‡´æ‰€æœ‰åº”ç”¨è¢«å”¤é†’å¹¶åŒæ—¶å¤„ç†æ­¤å¹¿æ’­ã€‚ä»¥ä¸Šå†…å®¹æ¥è‡ªè¿™é‡Œ å¤šè¯­è¨€ç‰¹æ€§é¦–å…ˆæ˜¯å®˜æ–¹çš„APIæŒ‡å—ï¼šè¯­è¨€å’Œè¯­è¨€åŒºåŸŸ å˜åŒ–å¯¹æ¯”ï¼š Android 7.0å¤šè¯­è¨€æ”¯æŒå¼€å‘æµ…æž å®žçŽ°åŠŸèƒ½ï¼š Android å®žçŽ°åº”ç”¨å†…ç½®è¯­è¨€åˆ‡æ¢ é€šçŸ¥æ é€‚é…è¿™é‡Œæœ‰ä¸€ç¯‡éžå¸¸è¯¦ç»†çš„é€šçŸ¥æ ä»‹ç»ä¸Žé€‚é…ï¼Œåˆ†äº«ç»™å¤§å®¶ï¼šAndroidé€šçŸ¥æ ä»‹ç»ä¸Žé€‚é…æ€»ç»“ WebViewé—®é¢˜ Android 7.0 WebView éƒ¨åˆ†æœºåž‹æ‰“ä¸å¼€ Android 7.0 WebView äºŒçº§è·³è½¬åŽç•Œé¢ç©ºç™½ Toastå¯¼è‡´çš„BadTokenException åŒå­¦ï¼Œä½ çš„ç³»ç»ŸToastå¯èƒ½éœ€è¦ä¿®å¤ä¸€ä¸‹]]></content>
      <categories>
        <category>Android</category>
        <category>é€‚é…</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é€‚é…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidé€‚é…-6.0çš„åŠ¨æ€æƒé™ç®¡ç†]]></title>
    <url>%2Fposts%2Feea8a783.html</url>
    <content type="text"><![CDATA[å‰è¨€å¤§å®¶éƒ½çŸ¥é“Android 6.0çš„æ–°ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯åº”ç”¨æƒé™çš„ç®¡ç†ã€‚ä¹Ÿå°±æ˜¯è¯´å‡¡æ˜¯æ¶‰åŠç”¨æˆ·éšç§çš„æƒé™ï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±åŽ»è®¾ç½®ç®¡ç†äº†ã€‚ç„¶è€Œåœ¨6.0ä»¥å‰ï¼Œæˆ‘ä»¬å®‰è£…ä¸€æ¬¾APPæ˜¯é»˜è®¤åŒæ„æ­¤APPæ‰€éœ€çš„æ‰€æœ‰æƒé™ï¼ˆæ¯”å¦‚å®šä½ã€è®¿é—®é€šè®¯å½•ï¼‰ï¼Œä¸åŒæ„å°±ä¸èƒ½å®‰è£…ã€‚å½“ç„¶ï¼Œå›½å†…çš„ä¸€äº›æ‰‹æœºåŽ‚å•†åŸºäºŽAndroidå®šåˆ¶çš„ç³»ç»Ÿä¸­ï¼Œå¯ä»¥å®žçŽ°åœ¨6.0ä»¥å‰å…³é—­æŒ‡å®šçš„æƒé™ã€‚å¦‚ä¸‹å›¾ï¼š å±é™©æƒé™åˆ—è¡¨(Dangerous Permission)Dangerous Permissionä¸€èˆ¬éƒ½æ˜¯æ¶‰åŠç”¨æˆ·éšç§çš„æƒé™ã€‚ ä»Žä¸Šé¢çš„å›¾ç‰‡ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ‘„åƒå¤´ã€ç”µè¯ã€å®šä½ç­‰ç­‰éƒ½æ˜¯æˆ‘ä»¬å¹³å¸¸å¼€å‘ä¸­å¸¸ç”¨çš„æƒé™ã€‚ å¯ä»¥åœ¨6.0ä¸é€‚é…æƒé™ç®¡ç†å—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥ï¼Œä½†æ˜¯ä¸æŽ¨èã€‚ é¦–å…ˆè¯´æ€Žä¹ˆä¸é€‚é…ï¼Œé‚£å°±æ˜¯è®¾ç½®targetSdkVersionå°äºŽ23ï¼ˆAndroid 6.0ç³»ç»Ÿé»˜è®¤ä¸ºtargetSdkVersionå°äºŽ23çš„åº”ç”¨é»˜è®¤æŽˆäºˆäº†æ‰€ç”³è¯·çš„æ‰€æœ‰æƒé™ï¼Œæ‰€ä»¥å¦‚æžœæ‚¨APPè®¾ç½®çš„targetSdkVersionä½ŽäºŽ23ï¼Œåœ¨è¿è¡Œæ—¶ä¹Ÿä¸ä¼šå´©æºƒã€‚ï¼‰ æœ‰äººä¸€çœ‹è¿™ä¸æ˜¯æŒºå¥½çš„å˜›ï¼Œè§£å†³é—®é¢˜ã€‚é‚£ä¹ˆæˆ‘æƒ³å‘Šè¯‰ä½ ï¼Œé¦–å…ˆè¿™ä¸æ˜¯é•¿ä¹…ä¹‹è®¡ï¼Œæ—©æ™šéƒ½è¦é¢å¯¹çš„ã€‚ä½ ä¸å¯èƒ½æ°¸è¿œtargetSdkVersionä½ŽäºŽ23ã€‚å…¶æ¬¡ï¼Œå®ƒæ˜¯æœ‰ä¸€ä¸ªå‰æï¼Œé‚£å°±æ˜¯ç”¨æˆ·è‡ªå·±ä¸åŽ»æ“ä½œæƒé™ã€‚è¦çŸ¥é“å¦‚æžœç”¨æˆ·æ˜¯6.0ä»¥ä¸Šçš„æ‰‹æœºæˆ–æ˜¯å›½å†…éƒ¨åˆ†6.0ä»¥å‰çš„æ‰‹æœºï¼Œä»–å¯ä»¥è‡ªå·±åœ¨è®¾ç½®ä¸­å…³é—­æƒé™ï¼Œé‚£ä¹ˆåˆ°æ—¶APPå› ä¸ºæ²¡æœ‰æƒé™èŽ·å–æ•°æ®å¼‚å¸¸ï¼Œå¯¼è‡´ç©ºæŒ‡é’ˆçš„å¼‚å¸¸æ—¶ï¼ŒAPPå°±ä¼šå´©æºƒã€‚ æ€Žä¹ˆé€‚é…é¦–å…ˆAndroid Studioï¼šåœ¨build.gradleä¸­å£°æ˜ŽtargetSdkVersionä¸º23åŠä»¥ä¸Šã€‚ Eclipseï¼šåœ¨AndroidManifest.xmlä¸­å£°æ˜ŽtargetSdkVersionä¸º23åŠä»¥ä¸Šã€‚ è¿™é‡Œå¼•ç”¨é«˜å¾·å®šä½Demoçš„CheckPermissionsActivityç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182/** * ç»§æ‰¿äº†Activityï¼Œå®žçŽ°Android6.0çš„è¿è¡Œæ—¶æƒé™æ£€æµ‹ * éœ€è¦è¿›è¡Œè¿è¡Œæ—¶æƒé™æ£€æµ‹çš„Activityå¯ä»¥ç»§æ‰¿è¿™ä¸ªç±» * * @åˆ›å»ºæ—¶é—´ï¼š2016å¹´5æœˆ27æ—¥ ä¸‹åˆ3:01:31 * @é¡¹ç›®åç§°ï¼š AMapLocationDemo * @author hongming.wang * @æ–‡ä»¶åç§°ï¼šPermissionsChecker.java * @ç±»åž‹åç§°ï¼šPermissionsChecker * @since 2.5.0 */public class CheckPermissionsActivity extends Activity &#123; /** * éœ€è¦è¿›è¡Œæ£€æµ‹çš„æƒé™æ•°ç»„ */ protected String[] needPermissions = &#123; Manifest.permission.ACCESS_COARSE_LOCATION, Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.READ_PHONE_STATE &#125;; private static final int PERMISSON_REQUESTCODE = 0; /** * åˆ¤æ–­æ˜¯å¦éœ€è¦æ£€æµ‹ï¼Œé˜²æ­¢ä¸åœçš„å¼¹æ¡† */ private boolean isNeedCheck = true; @Override protected void onResume() &#123; super.onResume(); if (Build.VERSION.SDK_INT &gt;= 23 &amp;&amp; getApplicationInfo().targetSdkVersion &gt;= 23) &#123; if (isNeedCheck) &#123; checkPermissions(needPermissions); &#125; &#125; &#125; /** * * @param permissions * @since 2.5.0 * requestPermissionsæ–¹æ³•æ˜¯è¯·æ±‚æŸä¸€æƒé™ï¼Œ */ private void checkPermissions(String... permissions) &#123; try &#123; if (Build.VERSION.SDK_INT &gt;= 23 &amp;&amp; getApplicationInfo().targetSdkVersion &gt;= 23) &#123; List&lt;String&gt; needRequestPermissonList = findDeniedPermissions(permissions); if (null != needRequestPermissonList &amp;&amp; needRequestPermissonList.size() &gt; 0) &#123; String[] array = needRequestPermissonList.toArray(new String[needRequestPermissonList.size()]); Method method = getClass().getMethod("requestPermissions", new Class[]&#123;String[].class, int.class&#125;); method.invoke(this, array, PERMISSON_REQUESTCODE); &#125; &#125; &#125; catch (Throwable e) &#123; &#125; &#125; /** * èŽ·å–æƒé™é›†ä¸­éœ€è¦ç”³è¯·æƒé™çš„åˆ—è¡¨ * * @param permissions * @return * @since 2.5.0 * checkSelfPermissionæ–¹æ³•æ˜¯åœ¨ç”¨æ¥åˆ¤æ–­æ˜¯å¦appå·²ç»èŽ·å–åˆ°æŸä¸€ä¸ªæƒé™ * shouldShowRequestPermissionRationaleæ–¹æ³•ç”¨æ¥åˆ¤æ–­æ˜¯å¦ * æ˜¾ç¤ºç”³è¯·æƒé™å¯¹è¯æ¡†ï¼Œå¦‚æžœåŒæ„äº†æˆ–è€…ä¸åœ¨è¯¢é—®åˆ™è¿”å›žfalse */ private List&lt;String&gt; findDeniedPermissions(String[] permissions) &#123; List&lt;String&gt; needRequestPermissonList = new ArrayList&lt;String&gt;(); if (Build.VERSION.SDK_INT &gt;= 23 &amp;&amp; getApplicationInfo().targetSdkVersion &gt;= 23)&#123; try &#123; for (String perm : permissions) &#123; Method checkSelfMethod = getClass().getMethod("checkSelfPermission", String.class); Method shouldShowRequestPermissionRationaleMethod = getClass().getMethod("shouldShowRequestPermissionRationale", String.class); if ((Integer)checkSelfMethod.invoke(this, perm) != PackageManager.PERMISSION_GRANTED || (Boolean)shouldShowRequestPermissionRationaleMethod.invoke(this, perm)) &#123; needRequestPermissonList.add(perm); &#125; &#125; &#125; catch (Throwable e) &#123; &#125; &#125; return needRequestPermissonList; &#125; /** * æ£€æµ‹æ˜¯å¦æ‰€æœ‰çš„æƒé™éƒ½å·²ç»æŽˆæƒ * @param grantResults * @return * @since 2.5.0 * */ private boolean verifyPermissions(int[] grantResults) &#123; for (int result : grantResults) &#123; if (result != PackageManager.PERMISSION_GRANTED) &#123; return false; &#125; &#125; return true; &#125; /** * ç”³è¯·æƒé™ç»“æžœçš„å›žè°ƒæ–¹æ³• */ @TargetApi(23) public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] paramArrayOfInt) &#123; if (requestCode == PERMISSON_REQUESTCODE) &#123; if (!verifyPermissions(paramArrayOfInt)) &#123; showMissingPermissionDialog(); isNeedCheck = false; &#125; &#125; &#125; /** * æ˜¾ç¤ºæç¤ºä¿¡æ¯ * * @since 2.5.0 * */ private void showMissingPermissionDialog() &#123; AlertDialog.Builder builder = new AlertDialog.Builder(this); builder.setTitle(R.string.notifyTitle); builder.setMessage(R.string.notifyMsg); // æ‹’ç», é€€å‡ºåº”ç”¨ builder.setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() &#123; @Override public void onClick(DialogInterface dialog, int which) &#123; finish(); &#125; &#125;); builder.setPositiveButton(R.string.setting, new DialogInterface.OnClickListener() &#123; @Override public void onClick(DialogInterface dialog, int which) &#123; startAppSettings(); &#125; &#125;); builder.setCancelable(false); builder.show(); &#125; /** * å¯åŠ¨åº”ç”¨çš„è®¾ç½® * * @since 2.5.0 * */ private void startAppSettings() &#123; Intent intent = new Intent( Settings.ACTION_APPLICATION_DETAILS_SETTINGS); intent.setData(Uri.parse("package:" + getPackageName())); startActivity(intent); &#125; @Override public boolean onKeyDown(int keyCode, KeyEvent event) &#123; if(keyCode == KeyEvent.KEYCODE_BACK)&#123; this.finish(); return true; &#125; return super.onKeyDown(keyCode, event); &#125; &#125; æˆ‘åœ¨ä¸Šé¢çš„ç±»ä¸­ï¼Œè‡ªå·±åŠ å…¥äº†ä¸€äº›æ³¨é‡Šï¼Œå¤§å®¶ä»”ç»†çœ‹å°±å¯ä»¥æ˜Žç™½äº†ã€‚ è¡¥å……ï¼šå°ç±³æ‰‹æœºåœ¨åŠ¨æ€æƒé™è¿™é‡Œè¿˜éœ€è¦ä¸€äº›å…¼å®¹ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä¸€ä¸‹ã€‚å½“ç„¶å¯¹äºŽå›½å†…éƒ¨åˆ†6.0ä»¥å‰æ‰‹æœºï¼Œåªèƒ½åœ¨éœ€è¦æƒé™åŽ»åŽ»æ•èŽ·å¼‚å¸¸æ¥å¤„ç†äº†ã€‚ å½“ç„¶ä¸æ­¢ä¸Šé¢ä¸€ç§å®žçŽ°æ–¹æ³•ï¼Œgithubä¸Šæœ‰è®¸å¤šå¤§ç¥žå¼€æºçš„å°è£…åº“ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®žçŽ°æƒé™é€‚é…ã€‚æˆ‘æŽ¨èä¸¤ä¸ªåº“ï¼Œå¤§å®¶æ ¹æ®éœ€æ±‚é€‰æ‹©ï¼š PermissionsDispatcher é¸¿æ´‹å¤§ç¥žçš„MPermissions å‚è€ƒ Android M æ–°çš„è¿è¡Œæ—¶æƒé™å¼€å‘è€…éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ é«˜å¾·åœ°å›¾å®šä½API]]></content>
      <categories>
        <category>Android</category>
        <category>é€‚é…</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é€‚é…</tag>
        <tag>åŠ¨æ€æƒé™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¼€ç®±å³ç”¨çš„è‡ªå®šä¹‰Banner]]></title>
    <url>%2Fposts%2F108df6b8.html</url>
    <content type="text"><![CDATA[è‡ªå®šä¹‰Bannerç”¨æ³•æ˜Žç»†æ”¯æŒXMLè‡ªå®šä¹‰å±žæ€§ï¼š bv_viewHeightï¼šBannerè§†å›¾åŒºåŸŸçš„é«˜åº¦ï¼Œå°äºŽç­‰äºŽ0æ—¶ä¸ºè¯¥å¸ƒå±€çš„é«˜åº¦ bv_viewCornerRadiusï¼šè§†å›¾åŒºåŸŸåœ†è§’çš„åŠå¾„ bv_itemViewWidthRatioï¼šæ ¹æ®è¯¥å¸ƒå±€å®½åº¦çš„ç™¾åˆ†æ¯”è®¾ç½®ItemViewçš„å®½åº¦ bv_itemViewMarginï¼šè®¾ç½®ItemViewä¹‹é—´çš„é—´è· bv_intervalInMillisï¼šBannerè½®æ¢æ—¶é—´ï¼ˆåœ¨SMOOTHæ¨¡å¼ä¸‹ä¸ºBannerä»Žå³åŒ€é€Ÿåˆ°å·¦çš„æ—¶é—´ï¼‰ bv_pageHoldInMillisï¼šæ‰‹æŒ‡æ»‘åŠ¨åŽï¼Œé¡µé¢åœç•™çš„æ—¶é•¿ï¼ˆåªåœ¨SMOOTHæ¨¡å¼ä¸‹ç”Ÿæ•ˆï¼‰ bv_scrollModeï¼šè®¾ç½®Banneræ»šåŠ¨æ¨¡å¼ INTERVALï¼šé—´éš”åˆ‡æ¢æ¨¡å¼ SMOOTHï¼šåŒ€é€Ÿæ»šåŠ¨æ¨¡å¼ bv_itemViewAlignï¼šItemViewä¸Žçˆ¶WrapperViewçš„å¯¹é½æ–¹å¼ï¼ˆå†³å®šäº†itemViewMarginçš„ç•™ç™½ä½ç½®ï¼‰ CENTER_HORIZONTALï¼šæ°´å¹³å±…ä¸­ ALIGN_PARENT_LEFTï¼šå±…å·¦å¯¹é½ ALIGN_PARENT_RIGHTï¼šå±…å³å¯¹é½ æš´éœ²çš„APIæœ‰ï¼š setBannerViewImpl(impl: IBannerView)ï¼šè®¾ç½®Bannerå¿…é¡»çš„å®žçŽ°ç±» startAutoScroll()ï¼šå¼€å§‹è‡ªåŠ¨æ»šåŠ¨ï¼ˆé¡µé¢æ•°é‡å°äºŽ1æ—¶ä¸ä¼šæ»šåŠ¨ï¼‰ stopAutoScroll()ï¼šåœæ­¢è‡ªåŠ¨æ»šåŠ¨ 123456789101112131415161718192021222324252627282930313233343536/** * å®šä¹‰é¡µé¢åˆ‡æ¢å›žè°ƒ */interface OnPageChangeListener &#123; fun onPageSelected(position: Int)&#125;interface IBannerViewBase &#123; fun getCount(): Int fun getItemView(context: Context): View fun onBindView(itemView: View, position: Int)&#125;/** * BannerViewä¾èµ–çš„å¤–éƒ¨å®žçŽ° */interface IBannerView : OnPageChangeListener, IBannerViewBase &#123; /** * å½“countä¸º0æ—¶çš„é»˜è®¤view */ fun getDefaultView(context: Context): View? &#123; return null &#125; /** * é»˜è®¤å…³é—­è‡ªåŠ¨æ»šåŠ¨ */ fun isDefaultAutoScroll(): Boolean &#123; return false &#125; override fun onPageSelected(position: Int) &#123;&#125;&#125; æºç åœ°å€ï¼š https://github.com/drawf/SourceSet/tree/master/app/src/main/java/me/erwa/sourceset/view/banner æ€è€ƒåˆ†æžNOTEï¼šè¿™ç¯‡æ–‡ç« æˆ‘ä»¬ä¸“æ³¨äºŽBannerViewçš„å°è£…ä¸Žå®žçŽ°ï¼Œå…³äºŽæ›´åº•å±‚çš„PagerSnapHelperçš„åŽŸç†éƒ¨åˆ†ä¸åœ¨èŒƒå›´å†…ï¼Œä½†åœ¨æ–‡æœ«æˆ‘æ‹œè¯»çš„æ–‡ç« ä¸­è´´å‡ºäº†ä¸€ä»½é“¾æŽ¥ï¼Œå¤§å®¶å¯è‡ªè¡Œé£Ÿç”¨ã€‚ å‰è·¯æ¼«æ¼«ï¼Œæˆ‘ä»¬å…ˆæ¢³ç†ä¸‹éœ€æ±‚ï¼š è¦æ”¯æŒä¸¤ç§æ»šåŠ¨æ¨¡å¼ï¼Œé—´éš”åˆ‡æ¢ã€å¹³æ»‘æ»šåŠ¨ è¦æ”¯æŒè®¾ç½®è§†å›¾åŒºåŸŸåœ†è§’ è¦æ”¯æŒè®¾ç½®æ¡ç›®è§†å›¾åœ†è§’ï¼ˆItemViewï¼‰ï¼ˆè¯¥éœ€æ±‚æœ¬æ¬¡æœªåšå®žçŽ°ï¼Œä¸‹æ–‡ä¼šè‡ªåŠ¨å¿½ç•¥è¯¥éœ€æ±‚ï¼‰ è¦æ”¯æŒæ— é™å¾ªçŽ¯æ»šåŠ¨ è¦æ”¯æŒæ ¹æ®BannerViewçš„å®½çš„æ¯”å€¼è®¾ç½®ItemViewçš„å®½ è¦æ”¯æŒè®¾ç½®ItemViewä¹‹é—´çš„é—´è· è¦æ”¯æŒè®¾ç½®æ»šåŠ¨é—´éš”ï¼ŒåŒ€é€Ÿæ¨¡å¼è¦æ”¯æŒè®¾ç½®æ»šåŠ¨ä¸€é¡µçš„æ—¶é—´ è¦æ”¯æŒè®¾ç½®åŒ€é€Ÿæ¨¡å¼ä¸‹ï¼Œæ‰‹æŒ‡æ»‘åŠ¨åŽï¼Œé¡µé¢åœç•™çš„æ—¶é•¿ è¦æ”¯æŒè®¾ç½®ItemViewä¸Žçˆ¶WrapperViewçš„å¯¹é½æ–¹å¼ï¼ˆå†³å®šäº†itemViewMarginçš„ç•™ç™½ä½ç½®ï¼‰ è¦æ”¯æŒè®¾ç½®é»˜è®¤æ˜¯å¦å¼€å¯æ»šåŠ¨ è¦æ”¯æŒè®¾ç½®æ•°æ®æºä¸ºç©ºæ—¶çš„é»˜è®¤View è¦æ”¯æŒæ•°æ®æºåªæœ‰1å¼ banneræ—¶ï¼Œç¦æ­¢æ»šåŠ¨ è¦æš´éœ²APIæŽ§åˆ¶Bannerçš„è‡ªåŠ¨æ»šåŠ¨ä¸Žæš‚åœ è¦æ”¯æŒè®¾ç½®æŒ‡ç¤ºå™¨ï¼ˆIndicatorï¼‰ï¼Œä¸”èƒ½çµæ´»æŽ§åˆ¶æŒ‡ç¤ºå™¨ä½ç½®ï¼Œä¸”ä¸ŽBannerViewè§£è€¦ ðŸ¤©è¿™ä¹ˆå¤šéœ€æ±‚ï¼Œä¸è¦æ€•ï¼Œæˆ‘ä»¬æ ¹æ®éœ€æ±‚æ¥ç†ä¸€éæ ¸å¿ƒæŠ€æœ¯ç‚¹ï¼š å¹³æ»‘æ»šåŠ¨æ¨¡å¼å¯ä»¥ä½¿ç”¨RecyclerView+PagerSnapHelperå®žçŽ°ï¼Œé—´éš”æ»šåŠ¨æ¨¡å¼å¯ä»¥ç»§ç»­ä½¿ç”¨ViewPagerå®žçŽ°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‰è€…æ–¹å¼å®žçŽ°ã€‚ï¼ˆæœ¬æ–‡ç»Ÿä¸€ä½¿ç”¨RecyclerView+PagerSnapHelperæ–¹å¼ï¼Œä¸è¿‡ä»£ç ä¸­ä¹Ÿç•™å‡ºäº†æŽ¥å£ï¼Œå¯ç”¨ViewPageråšå®žçŽ°ï¼‰ è®¾ç½®åœ†è§’è¿˜æ˜¯é‡‡ç”¨Xfermodeåšè£å‰ªåˆæˆå³å¯ã€‚ï¼ˆè¯¥æ–¹å¼åœ¨ä¹‹å‰çš„æ–‡ç« ShadowLayoutä¸­ä½¿ç”¨è¿‡ï¼Œæ•…æœ¬æ–‡ä¸å†èµ˜è¿°ï¼‰ éœ€æ±‚[4]å°†adpterä¸­getItemCount()è¿”å›žInt.MAX_VALUEï¼Œå†åœ¨ç»‘å®šViewæ—¶å€™ï¼Œç”¨å½“å‰çš„positionä¸ŽçœŸå®žcountæ±‚ä½™æ•°ï¼Œä½œä¸ºçœŸå®žçš„positionåŽ»ç»‘å®šæ•°æ®ï¼Œå³å¯å®žçŽ°ã€‚ éœ€æ±‚[4]åˆ°[13]ï¼Œéƒ½æ²¡æœ‰æŠ€æœ¯å¤æ‚åº¦ï¼Œä½†æœ‰ä¸šåŠ¡å¤æ‚åº¦ï¼Œåšå¸¸è§„å®žçŽ°å³å¯ã€‚ éœ€æ±‚[14]å¯å®šä¹‰Indicatoræ¶‰åŠçš„æŽ¥å£åšä»£ç è§£è€¦ï¼Œå¹¶å°†BannerViewç»§æ‰¿RelativeLayoutï¼Œè¿™æ ·Indicatorä½œä¸ºå­Viewåœ¨xmlä¸­å¯çµæ´»æŽ§åˆ¶ä½ç½®ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå®žçŽ°æˆ‘ä»¬æƒ³è¦çš„BannerViewåªæ˜¯è€å¿ƒ+æ—¶é—´çš„é—®é¢˜äº†ã€‚ä»¥ä¸‹ï¼Œæˆ‘ä¼šæŒ‘æœ¬æ¬¡å®žçŽ°ä¸­é‡è¦çš„å‡ ç‚¹æ¥åšè¯´æ˜Žï¼Œå¦‚ä¸‹ï¼š RecyclerView+PagerSnapHelperå®žçŽ°çš„PagerRecyclerView ç”ŸæˆPagerViewå®žä¾‹çš„å·¥åŽ‚PagerViewFactory Indicatorçš„è§£è€¦å®žçŽ° PagerRecyclerViewçœ‹åå­—ä¾¿çŸ¥è¿™æ˜¯ä¸€ä¸ªç”¨RecyclerViewå®žçŽ°ViewPageråŠŸèƒ½çš„ç±»ï¼Œæ‰€ä»¥ç»§æ‰¿è‡ªRecyclerViewã€‚ å®ƒä½œä¸ºBannerViewçš„æ ¸å¿ƒåŠŸèƒ½å®žçŽ°ç±»ï¼Œä¸ºäº†ä¸Žä¸Šå±‚è§£è€¦ï¼ˆä¹Ÿå°±æ˜¯æ–¹ä¾¿åˆ‡æ¢ä¸ºå…¶å®ƒå®žçŽ°ï¼Œæ¯”å¦‚ç”¨ViewPageråšå®žçŽ°ï¼‰æ‰€ä»¥å®šä¹‰æŽ¥å£IPagerViewInstanceã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546/** * PagerViewåŠŸèƒ½å®žä¾‹éœ€å®žçŽ°çš„æŽ¥å£ */interface IPagerViewInstance &#123; /** * è®¾ç½®è‡ªåŠ¨æ»šåŠ¨ * @param intervalInMillis: Int åœ¨INTERVALæ¨¡å¼ä¸‹ä¸ºé¡µé¢åˆ‡æ¢é—´éš” åœ¨SMOOTHæ¨¡å¼ä¸‹ä¸ºæ»šåŠ¨ä¸€é¡µæ‰€éœ€æ—¶é—´ */ fun startAutoScroll(intervalInMillis: Int) /** * åœæ­¢è‡ªåŠ¨æ»šåŠ¨ */ fun stopAutoScroll() /** * èŽ·å–å½“å‰Itemçš„ä½ç½®ï¼ˆListçš„ç´¢å¼•ï¼‰ */ fun getCurrentPosition(): Int /** * èŽ·å–å½“å‰çœŸå®žçš„Itemçš„ä½ç½®ï¼ˆListçš„ç´¢å¼•ï¼‰ */ fun getRealCurrentPosition(realCount: Int): Int /** * è®¾ç½®å¹³æ»‘æ¨¡å¼æ˜¯å¦å¼€å¯ï¼Œå¦åˆ™ä¸ºé—´éš”åˆ‡æ¢æ¨¡å¼ */ fun setSmoothMode(enabled: Boolean) /** * è®¾ç½®é¡µé¢åœç•™æ—¶é•¿ */ fun setPageHoldInMillis(pageHoldInMillis: Int) /** * è®¾ç½®é¡µé¢åˆ‡æ¢å›žè°ƒ */ fun setOnPageChangeListener(listener: OnPageChangeListener) /** * é€šçŸ¥æ•°æ®åˆ·æ–° */ fun notifyDataSetChanged()&#125; å…³äºŽPagerSnapHelperçš„ä½¿ç”¨æžå…¶ç®€å•ï¼Œåªéœ€åˆ›å»ºå‡ºå®žä¾‹ï¼ŒattachToRecyclerViewä¸€ä¸‹ï¼Œå³å¯è®©RecyclerViewæ‘‡èº«ä¸€å˜æˆä¸ºViewPagerä¸€æ ·ã€‚ï¼ˆè¿™é‡Œå®žåœ¨è®©äººæƒŠå¹ï¼ï¼æˆ‘ä»¬éƒ½åº”è¯¥è¿½æ±‚è¿™ç§APIçš„æžè‡´è®¾è®¡ï¼‰ 123456789/** * æ»‘åŠ¨åˆ°å…·ä½“ä½ç½®å¸®åŠ©å™¨ */private var mSnapHelper: PagerSnapHelper = PagerSnapHelper()... çœç•¥ä»£ç init &#123; mSnapHelper.attachToRecyclerView(this) ... çœç•¥ä»£ç &#125; å…³äºŽé—´éš”åˆ‡æ¢æ¨¡å¼ åŒ€é€Ÿæ»šåŠ¨æ¨¡å¼çš„å®žçŽ°ä¸»è¦æ˜¯åœ¨startTimer()æ–¹æ³•ä¸­ï¼Œä¸¤è€…çš„åŒºåˆ«åœ¨äºŽTimerçš„é—´éš”æ—¶é—´ä¸åŒã€å›žè°ƒä¸­æ‰§è¡Œçš„æ–¹æ³•ä¸åŒã€‚å…¶ä¸­åŒ€é€Ÿæ¨¡å¼çš„Timeré—´éš”æ—¶é—´éœ€è¦ä½¿ç”¨å¤–éƒ¨è®¾ç½®çš„æ»šåŠ¨ä¸€å±çš„æ—¶é—´ã€ä¸€å±çš„å®½åº¦ã€æ¯æ¬¡scrollByçš„è·ç¦»è®¡ç®—è€Œæ¥ã€‚ 123456789101112131415161718192021222324252627282930313233343536/** * å¼€å§‹å®šæ—¶å™¨ */private fun startTimer() &#123; mTimer?.cancel() if (mWidth &gt; 0 &amp;&amp; mFlagStartTimer &amp;&amp; context != null &amp;&amp; context is Activity) &#123; mTimer = timer(initialDelay = mDelayedTime, period = mPeriodTime) &#123; if (mScrollState == SCROLL_STATE_IDLE) &#123; (context as Activity).runOnUiThread &#123; if (mSmoothMode) &#123; scrollBy(DEFAULT_PERIOD_SCROLL_PIXEL, 0) triggerOnPageSelected() &#125; else &#123; smoothScrollToPosition(++mOldPosition) mPageChangeListener?.onPageSelected(mOldPosition) &#125; &#125; &#125; &#125; &#125;&#125;override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) &#123; super.onSizeChanged(w, h, oldw, oldh) mWidth = (w - paddingLeft - paddingRight).toFloat() mHeight = (h - paddingTop - paddingBottom).toFloat() //è®¡ç®—åŒ€é€Ÿæ»šåŠ¨çš„æ—¶é—´é—´éš” if (mSmoothMode) &#123; mPeriodTime = (mSmoothSpeed / (mWidth / DEFAULT_PERIOD_SCROLL_PIXEL)).toLong() &#125; if (mTimer == null) &#123; startTimer() &#125;&#125; é¡µé¢é€‰ä¸­æ˜¯æ ¹æ®PagerSnapHelperä¸­æä¾›çš„findSnapViewæ–¹æ³•ï¼Œå…ˆæ‰¾åˆ°Snapï¼ˆå°±æ˜¯å½“å‰çš„ç›®æ ‡Viewï¼‰ï¼Œå†æ‰¾å®ƒçš„ä½ç½®ï¼Œå½“ç„¶è¿˜éœ€ç”¨ä¸€ä¸ªå˜é‡è®°å½•ä¸€ä¸‹ï¼Œé˜²æ­¢å¤šæ¬¡è§¦å‘å›žè°ƒã€‚ 123456789101112131415/** * è§¦å‘OnPageSelectedå›žè°ƒ */private fun triggerOnPageSelected() &#123; val layoutManager = getLinearLayoutManager() val view = mSnapHelper.findSnapView(layoutManager) if (view != null) &#123; val position = layoutManager.getPosition(view) //é˜²æ­¢åŒä¸€ä½ç½®å¤šæ¬¡è§¦å‘ if (position != mOldPosition) &#123; mOldPosition = position mPageChangeListener?.onPageSelected(position) &#125; &#125;&#125; è¿˜æœ‰ä¸€ä¸ªå€¼å¾—è¯´é“çš„ç‚¹æ˜¯åˆå§‹åŒ–æ—¶éœ€è¦çŸ«æ­£Snapçš„ä½ç½®ï¼Œå› ä¸ºPagerSnapHelperæ‰‹æŒ‡æ»‘åŠ¨çš„æ—¶å€™æ‰å·¥ä½œè®©RecyclerViewæ»‘åŠ¨å‡ºViewPagerçš„æ„Ÿè§‰ï¼Œæ‰€ä»¥åˆå§‹åŒ–æ—¶ä¸çŸ«æ­£ä¼šå‘çŽ°é€‰ä¸­çš„é¡µé¢ä¸å±…ä¸­æ˜¾ç¤ºï¼Œè¿˜æ˜¯ä¸€ä¸ªRecyclerViewçš„æ ·å­ã€‚é‚£å¦‚ä½•çŸ«æ­£å‘¢ï¼Ÿè¿™é‡ŒåŽ»çœ‹äº†PagerSnapHelperå®žçŽ°ï¼Œæ¬è¿‡æ¥ï¼Œç¨åŠ ä¿®æ”¹å³å¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536/** * çŸ«æ­£é¦–æ¬¡åˆå§‹åŒ–æ—¶SnapViewçš„ä½ç½® */private fun correctSnapViewPosition() &#123; val layoutManager = getLinearLayoutManager() val snapView = mSnapHelper.findSnapView(layoutManager) if (snapView != null) &#123; val snapDistance = mSnapHelper.calculateDistanceToFinalSnap(layoutManager, snapView) if (snapDistance != null) &#123; if (snapDistance[0] != 0 || snapDistance[1] != 0) &#123; //æˆ‘ä»¬æŠŠæºç çš„smoothScrollByæ”¹ä¸ºscrollByï¼Œè¿™æ ·è§†è§‰ä¸Šè§‰å¯Ÿä¸å‡ºçŸ«æ­£è¿‡ç¨‹ scrollBy(snapDistance[0], snapDistance[1]) &#125; //é¦–æ¬¡è§¦å‘å›žè°ƒ triggerOnPageSelected() &#125; &#125;&#125;/** * è¿™æ˜¯æºç  */void snapToTargetExistingView() &#123; if (this.mRecyclerView != null) &#123; LayoutManager layoutManager = this.mRecyclerView.getLayoutManager(); if (layoutManager != null) &#123; View snapView = this.findSnapView(layoutManager); if (snapView != null) &#123; int[] snapDistance = this.calculateDistanceToFinalSnap(layoutManager, snapView); if (snapDistance[0] != 0 || snapDistance[1] != 0) &#123; this.mRecyclerView.smoothScrollBy(snapDistance[0], snapDistance[1]); &#125; &#125; &#125; &#125;&#125; ä»¥ä¸Šæ˜¯æˆ‘è®¤ä¸ºPagerRecyclerViewè¾ƒä¸ºå…³é”®çš„ç‚¹ï¼Œå…¶å®ƒéƒ¨åˆ†å‡ä¸ºä¸šåŠ¡é€»è¾‘çš„å¤„ç†ä¸Žå®žçŽ°ï¼Œå¤§å®¶å¯æ‰“å¼€æºç è‡ªè¡Œé£Ÿç”¨ã€‚ PagerViewFactoryè¿™é‡Œé‡‡ç”¨äº†å·¥åŽ‚æ–¹æ³•æ¨¡å¼æ¥åˆ›å»ºBanneråº•å±‚çš„æ ¸å¿ƒå®žçŽ°ã€‚ é¦–å…ˆå®šä¹‰äº†BannerViewå®žä¾‹æŽ¥å£ï¼Œå®ƒå°†ä½œä¸ºå·¥åŽ‚å®žä¾‹çš„æž„é€ æ–¹æ³•å‚æ•°ï¼Œç”¨äºŽåŒºåˆ†åˆ›å»ºåº•å±‚å®žçŽ°ã€‚ 1234567891011121314151617181920212223interface IBannerViewBase &#123; fun getCount(): Int fun getItemView(context: Context): View fun onBindView(itemView: View, position: Int)&#125;/** * å®šä¹‰BannerViewå®žä¾‹æŽ¥å£ */interface IBannerViewInstance : IBannerViewBase &#123; fun getContext(): Context fun isSmoothMode(): Boolean fun getItemViewWidth(): Int fun getItemViewMargin(): Int fun getItemViewAlign(): Int&#125; å·¥åŽ‚æœ‰ä¸ªgetPagerView()çš„æ–¹æ³•ï¼Œæ¥åˆ›å»ºBanneræ ¸å¿ƒå®žçŽ° 123456789101112131415/** * å·¥åŽ‚æ ¹æ®å‚æ•°åˆ›å»ºå¯¹åº”PagerViewå®žä¾‹ */override fun getPagerView(): IPagerViewInstance &#123; return if (bannerView.isSmoothMode()) &#123; casePagerRecycler(true) &#125; else &#123; if (intervalUseViewPager) &#123; //è¿™é‡Œå¯ä»¥æ ¹æ®éœ€è¦ç”¨ViewPageråšåº•å±‚å®žçŽ° throw IllegalStateException("è¿™é‡Œæœªä½¿ç”¨ViewPageråšåº•å±‚å®žçŽ°") &#125; else &#123; casePagerRecycler(false) &#125; &#125;&#125; è¿™é‡Œå°±æ˜¯åˆ›å»ºäº†ä¹‹å‰å†™å¥½çš„PagerRecyclerViewï¼Œå…¶å®žå°±æ˜¯åˆ›å»ºé…ç½®ä½¿ç”¨ä¸€ä¸ªRecyclerViewçš„è¿‡ç¨‹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849/** * å¤„ç†PagerRecyclerView */private fun casePagerRecycler(isSmoothMode: Boolean): IPagerViewInstance &#123; val recyclerView = PagerRecyclerView(bannerView.getContext()) recyclerView.layoutManager = LinearLayoutManager(bannerView.getContext(), LinearLayoutManager.HORIZONTAL, false) recyclerView.adapter = object : RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;() &#123; override fun getItemCount(): Int &#123; return Int.MAX_VALUE &#125; override fun onBindViewHolder(holder: RecyclerView.ViewHolder, position: Int) &#123; if (!isActivityDestroyed(holder.itemView.context)) &#123; val realPos = position % bannerView.getCount() bannerView.onBindView(holder.itemView.findViewById(R.id.id_real_item_view), realPos) &#125; &#125; override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): RecyclerView.ViewHolder &#123; val itemWrapper = LayoutInflater.from(parent.context).inflate( R.layout.layout_banner_item_wrapper, parent, false ) as RelativeLayout //å¤„ç†ItemViewWrapperçš„å®½ itemWrapper.layoutParams.width = bannerView.getItemViewWidth() + bannerView.getItemViewMargin() //å¤–éƒ¨å®žé™…çš„ItemView val itemView = bannerView.getItemView(parent.context) itemView.id = R.id.id_real_item_view val ivParams = RelativeLayout.LayoutParams( bannerView.getItemViewWidth(), ViewGroup.LayoutParams.MATCH_PARENT ) ivParams.addRule(bannerView.getItemViewAlign()) //æ·»åŠ ItemViewåˆ°Wrapper itemWrapper.addView(itemView, ivParams) return object : RecyclerView.ViewHolder(itemWrapper) &#123;&#125; &#125; &#125; //åˆå§‹åŒ–ä½ç½® recyclerView.scrollToPosition(bannerView.getCount() * 100) recyclerView.setSmoothMode(isSmoothMode) return recyclerView&#125; Indicatorçš„è§£è€¦å®žçŽ°è§£è€¦çš„æƒ¯ç”¨å¥—è·¯å°±æ˜¯æŠ½è±¡æ–¹æ³•å®šä¹‰æŽ¥å£ã€‚æ‰€ä»¥æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæŽ¥å£ï¼Œä¸€ä¸ªæ˜¯æŒ‡ç¤ºå™¨å®žä¾‹éœ€å®žçŽ°çš„æŽ¥å£ï¼Œä¸€ä¸ªæ˜¯æŒ‡ç¤ºå™¨ä¾èµ–çš„å¤–éƒ¨å®žçŽ°ã€‚æ‰€ä»¥ä½¿ç”¨è¿™ä¸¤ä¸ªæŽ¥å£ï¼Œå¯ä»¥è‡ªå®šä¹‰å®žçŽ°æƒ³è¦çš„æ ·å¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738/** * æŒ‡ç¤ºå™¨å®žä¾‹éœ€å®žçŽ°çš„æŽ¥å£ */interface IIndicatorInstance &#123; /** * è®¾ç½®å¤–éƒ¨å®žçŽ° */ fun setIndicator(impl: IIndicator) /** * é‡æ–°å¸ƒå±€ */ fun doRequestLayout() /** * é‡æ–°ç»˜åˆ¶ */ fun doInvalidate()&#125;/** * æŒ‡ç¤ºå™¨ä¾èµ–çš„å¤–éƒ¨å®žçŽ° */interface IIndicator &#123; /** * èŽ·å–adapteræ€»æ•°ç›® */ fun getCount(): Int /** * èŽ·å–å½“å‰é€‰ä¸­é¡µé¢çš„ç´¢å¼• */ fun getCurrentIndex(): Int&#125; å¯¹äºŽæˆ‘ä»¬è¿™æ¬¡å®žçŽ°çš„CrossBarIndicatorï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¸¸è§„çš„è‡ªå®šä¹‰Viewï¼Œè¿™é‡Œå·²æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„å•¦ã€‚é‡ç‚¹è¦è¯´çš„æ˜¯éœ€æ±‚ä¸­æœ‰ä¸€æ¡ä¸”èƒ½çµæ´»æŽ§åˆ¶æŒ‡ç¤ºå™¨ä½ç½®ï¼Œå¦‚ä½•å®žçŽ°å‘¢ï¼Ÿéœ€æ±‚åˆ†æžæ—¶è¯´äº†ï¼Œæˆ‘ä»¬çš„BannerViewæ˜¯ä¸€ä¸ªRelativeLayoutï¼ŒIndicatorä½œä¸ºå…¶å­Viewå¯ä»¥å¾ˆæ–¹ä¾¿çš„æŽ§åˆ¶å…¶ä½ç½®ã€‚ ç„¶åŽï¼Œçœ‹ä¸‹BannerViewä¸­çš„å…³é”®ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647override fun onFinishInflate() &#123; super.onFinishInflate() findIndicator()&#125;/** * åœ¨å­Viewä¸­æ‰¾åˆ°æŒ‡ç¤ºå™¨ */private fun findIndicator() &#123; for (i in 0 until childCount) &#123; val child = getChildAt(i) if (child is IIndicatorInstance) &#123; //å¸ƒå±€å¡«å……å®Œæ¯•æ—¶ï¼Œæ‰¾åˆ°å­Viewä¸­çš„Indicatorï¼Œå¹¶ä¿å­˜ä¸‹æ¥ mIndicator = child return &#125; &#125;&#125;/** * åˆå§‹åŒ–view */private fun initView() &#123; if (mBannerViewImpl != null &amp;&amp; mWidth &gt; 0) &#123; val bvImpl = mBannerViewImpl!! removeAllViews() ... çœç•¥ä»£ç  //åˆå§‹åŒ–æŒ‡ç¤ºå™¨ if (mIndicator != null) &#123; mIndicator?.setIndicator(object : IIndicator &#123; override fun getCount(): Int &#123; return bvImpl.getCount() &#125; override fun getCurrentIndex(): Int &#123; return mPagerViewInstance.getRealCurrentPosition(bvImpl.getCount()) &#125; &#125;) //æŠŠæŒ‡ç¤ºå™¨å†æ·»åŠ å›žåŽ» addView(mIndicator as View) &#125; &#125;&#125; æ–‡æœ«åˆ°è¿™é‡Œæ•´ä½“è¦è¯´çš„å°±å®Œç»“äº†ï¼Œæ•´ä¸ªBannerViewçš„å®žçŽ°ç»†èŠ‚ã€é€»è¾‘è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œä¸è¿‡å¤æ‚åº¦å€’æ²¡é‚£ä¹ˆé«˜ï¼Œå»ºè®®é£Ÿç”¨æºç ~ O(âˆ©_âˆ©)Oå“ˆå“ˆ~ ä¸ªäººèƒ½åŠ›æœ‰é™ï¼Œå¦‚æœ‰ä¸æ­£ä¹‹å¤„æ¬¢è¿Žå¤§å®¶æ‰¹è¯„æŒ‡å‡ºï¼Œæˆ‘ä¼šè™šå¿ƒæŽ¥å—å¹¶ç¬¬ä¸€æ—¶é—´ä¿®æ”¹ï¼Œä»¥ä¸è¯¯å¯¼å¤§å®¶ã€‚ æ‹œè¯»çš„æ–‡ç« SnapHelperç¡¬æ ¸è®²è§£ï¼š https://juejin.im/post/5cbe78ae5188250a6b183872]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>View</tag>
        <tag>Banner</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Contextç»†èŠ‚è§£æž]]></title>
    <url>%2Fposts%2Fb902250c.html</url>
    <content type="text"><![CDATA[Contextåˆ°åº•æ˜¯å•¥ï¼ŸContext æœ¬èº«æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒçš„å®žçŽ°ç±»ä¸º ContextImplã€‚ å¦å¤–æœ‰å­ç±» ContextWrapper å’Œ ContextThemeWrapperï¼Œè¿™ä¸¤ä¸ªå­ç±»éƒ½æ˜¯ Context çš„ä»£ç†ç±»ï¼Œä¸»è¦åŒºåˆ«æ˜¯ ContextThemeWrapper æœ‰è‡ªå·±çš„ä¸»é¢˜èµ„æºã€‚ ä¸€ä¸ª Context æ„å‘³ç€ä¸€ä¸ªåœºæ™¯ï¼Œä¸€ä¸ªåœºæ™¯å°±æ˜¯æˆ‘ä»¬å’Œè½¯ä»¶è¿›è¡Œäº¤äº’çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚ ä»Žå®‰å“ç¨‹åºçš„è§’åº¦æ¥çœ‹ï¼Œå…¶å®žä¸€ä¸ª Activity å°±æ˜¯ä¸€ä¸ª Context ï¼Œä¸€ä¸ª Service ä¹Ÿæ˜¯ä¸€ä¸ª Contextã€‚ Contextæœ‰å•¥ä½œç”¨ï¼Ÿæœ‰å•¥ç”¨ï¼Ÿè¦çœ‹å®ƒèƒ½åšå•¥ï¼Œçœ‹çœ‹ä¸»è¦æä¾›äº†å“ªäº›æŽ¥å£äº†ã€‚ è¿˜æŒºå¤šçš„ï¼Œçœ‹èµ·æ¥ç®¡å¾—æŒºå¤šï¼Œå››å¤§ç»„ä»¶éƒ½ç®¡ç€ï¼Œåƒä¸ª Application å¤§ç®¡å®¶ã€‚ ä¸€ä¸ªappé‡Œæœ‰å¤šå°‘ä¸ªContextï¼Ÿå‰é¢è¯´å•¦ï¼Œä¸€ä¸ªActivityå°±æ˜¯ä¸€ä¸ªåœºæ™¯ï¼ˆContextï¼‰ï¼Œä¸€ä¸ªServiceä¹Ÿæ˜¯ä¸€ä¸ªåœºæ™¯ï¼Œæ‰€ä»¥ï¼Œåº”ç”¨ç¨‹åºä¸­æœ‰å¤šå°‘ä¸ªActivityæˆ–è€…Serviceå°±ä¼šæœ‰å¤šå°‘ä¸ªContextå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æœ‰å¤šå°‘ä¸ªåœºæ™¯ã€‚ ContextImplå’ŒContextWrapperæœ‰å•¥åŒºåˆ«ï¼Ÿçœ‹ä¸‹ContextWrapperï¼š å†çœ‹ä¸‹ContextImplï¼š æ¯”è¾ƒä¸‹ï¼š ä¸åŒç»„ä»¶åˆ›å»ºContextImplçš„æ–¹å¼ï¼š æ€»ç»“ Contextç›¸å½“äºŽApplicationçš„å¤§ç®¡å®¶ï¼› ContextWrapperã€ContextThemWrapperéƒ½æ˜¯Contextçš„ä»£ç†ç±»ï¼ŒContextImplæ˜¯Contextçš„ä¸»è¦å®žçŽ°ç±»ï¼Œæ˜¯ä¸ªå®žåŠ›æ´¾ï¼ å‚è€ƒ: https://juejin.im/post/5c1fab7d5188254eb05fbe48 https://juejin.im/post/5865bfa1128fe10057e57c63]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android ä¸­ä¸œé˜¿æ‹‰ä¼¯è¯­é€‚é…]]></title>
    <url>%2Fposts%2Fc080be13.html</url>
    <content type="text"><![CDATA[RTL è¯­è¨€ç”±æ¥RTL æ˜¯ Right-to-left(ä»Žå³å‘å·¦) çš„ç¼©å†™ã€‚å…¶æ„ä¸ºäººä»¬ä¹¦å†™é˜…è¯»ä¹ æƒ¯æ˜¯ä»Žå³å‘å·¦ï¼Œæœå·¦ç»§ç»­çš„ï¼Œå¸¸è§çš„ RTL è¯­è¨€æœ‰é˜¿æ‹‰ä¼¯è¯­ï¼Œå¸Œä¼¯æ¥è¯­ç­‰ã€‚ çœ‹ä¸€ä¸‹å¯¹æ¯”ï¼š LTR RTL é‚£ä¹ˆå¯¹äºŽè¿™ç§ä»Žå³åˆ°å·¦çš„ä¹ æƒ¯ï¼Œåœ¨ Android å¸ƒå±€ä¸­æœ‰æ²¡æœ‰æ”¯æŒå‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯æœ‰çš„ï¼šä»Ž Android 4.2 å³ SDK 17 å¼€å§‹ï¼Œæä¾›äº†å…¨é¢çš„æœ¬åœ°å¸ƒå±€æ”¯æŒï¼Œå…è®¸é•œåƒå¸ƒå±€ï¼Œå¯ä»¥åŒæ—¶æ”¯æŒ RTL å’Œ LTRã€‚ æŽ¥ä¸‹æ¥æˆ‘å°†ä»‹ç»å¦‚ä½•ä¸€æ­¥ä¸€æ­¥é€‚é…é˜¿æ‹‰ä¼¯è¯­ã€‚ å±žæ€§ name desc chinese android:layoutDirection attribute for setting the direction of a componentâ€™s layout è®¾ç½®ç»„ä»¶çš„å¸ƒå±€æŽ’åˆ—æ–¹å‘ android:textDirection attribute for setting the direction of a componentâ€™s text è®¾ç½®ç»„ä»¶çš„æ–‡å­—æŽ’åˆ—æ–¹å‘ android:textAlignment attribute for setting the alignment of a componentâ€™s text è®¾ç½®æ–‡å­—çš„å¯¹é½æ–¹å¼ getLayoutDirectionFromLocale() method for getting the Locale-specified direction èŽ·å–æŒ‡å®šåœ°åŒºçš„æƒ¯ç”¨å¸ƒå±€æ–¹å¼ å‰ææ¡ä»¶åœ¨ AndroidManifest.xml æ–‡ä»¶ä¸­ application èŠ‚ç‚¹æ·»åŠ æ”¯æŒä»Žå³åˆ°å·¦å¸ƒå±€æ–¹å¼ä»£ç  12345 &lt;application ... android:supportsRtl="true" &gt; ...&lt;/application&gt; åˆ‡æ¢è¯­è¨€ç›¸å…³é“¾æŽ¥ï¼šchange-language-programmatically-in-android å¯¹åº”å›½å®¶è¯­è¨€ä»£ç : what-is-the-list-of-supported-languages-locales-on-android ä¸‹é¢åˆ‡æ¢è¯­è¨€æ–¹å¼ updateConfiguration æ–¹æ³•åœ¨ Api 25 å·²ç»è¿‡æ—¶, æ–°çš„åˆ‡æ¢æ–¹å¼å®žä¾‹ åœ°å€ 12345678String languageToLoad = "ar"; // your languageResources res = getResources(); DisplayMetrics dm = res.getDisplayMetrics();Locale locale = new Locale(languageToLoad); Locale.setDefault(locale);Configuration config = new Configuration();config.locale = locale;res.updateConfiguration(conf, dm); AS ä¸€é”®é€‚é…AS æ”¯æŒä¸€é”®é€‚é… RTLï¼Œä¸»è¦æ˜¯åœ¨åŽŸæ¥ Layout ä¸­è®¾ç½® Left å’Œ Right å±žæ€§çš„è¡¥å……æ·»åŠ  Start å’Œ End å±žæ€§ï¼ˆä½ ä»¬åœ¨å†™å¸ƒå±€çš„æ—¶å€™æ˜¯ä¸æ˜¯å¾ˆå°‘ç”¨åˆ° paddingStartã€marginStartï¼ŸæŽ¥ä¸‹æ¥ä½ ä»¬å†™å¸ƒå±€çš„æ—¶å€™å¯ä¸èƒ½å†å·æ‡’äº†ï¼Œè¯¥åŠ çš„è¿˜æ˜¯å¾—åŠ ä¸Š) Start å±žæ€§åœ¨ LTR ä¸­å¯¹åº” Leftï¼Œåœ¨ RTL ä¸­å¯¹åº” Rightï¼Œåœ¨API 17å¼€å§‹æ”¯æŒï¼Œä¸ºäº†å…¼å®¹ä½Žç‰ˆæœ¬ï¼Œéœ€è¦åŒæ—¶æœ‰ Left å’Œ Startã€‚ä»Žå¸‚åœºæ¥çœ‹ï¼ŒAndroid 4.2 ç³»ç»Ÿä»¥ä¸‹çš„æ‰‹æœºç”¨æˆ·å·²ç»ä¸å¤šäº†ï¼Œæˆ‘çš„å»ºè®®æ˜¯å¯ä»¥ä¸å…¼å®¹ï¼Œå…·ä½“è¿˜å¾—ä½ ä»¬çœ‹è‡ªå®¶äº§å“åœ¨ 4.2 ç³»ç»Ÿä»¥ä¸‹ç”¨æˆ·æ•°ã€‚ Refactor &gt; Add RTL Support Where Possibleâ€¦ åˆ©ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ åç§° æè¿° gradle-android-rtl è‡ªåŠ¨ä¿®å¤å¸ƒå±€æ–‡ä»¶ä¸­æœªæ·»åŠ RTLæ”¯æŒçš„æ ‡ç­¾ ä¸Ž AS æ’ä»¶çš„æ¯”è¾ƒï¼š æ€§èƒ½æ›´å¥½ã€‚åœ¨å¤„ç†å¤§æ‰¹é‡æ–‡ä»¶ä¿®æ”¹æ—¶ï¼Œç”¨ASå·¥å…·ä¼šå‡ºçŽ°å¡é¡¿ æ”¯æŒpaddingæ ‡ç­¾çš„è¡¥é½ ä½¿ç”¨å…¨å±€æ ·å¼EditTextå‘çŽ° EditText æŽ§ä»¶åŸºæœ¬éƒ½éœ€è¦è®¾ç½®ä¸‹é¢ä¸¤ä¸ªå±žæ€§ ç›¸å…³é“¾æŽ¥ï¼šset-a-consistent-style-to-all-edittext-for-e-g 12android:textAlignment="viewStart"android:gravity="start" é‚£æˆ‘ä»¬å°±å¯ä»¥åœ¨ style.xml æ ·å¼ä¸­å…¨éƒ¨ EditText éƒ½è®¾ç½® 1234567891011&lt;style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt; ... &lt;item name="editTextStyle"&gt;@style/EditTextStyle.Alignment&lt;/item&gt; ...&lt;/style&gt;&lt;style name="EditTextStyle.Alignment" parent="@android:style/Widget.EditText"&gt; &lt;item name="android:textAlignment"&gt;viewStart&lt;/item&gt; &lt;item name="android:gravity"&gt;start&lt;/item&gt; &lt;item name="android:textDirection"&gt;locale&lt;/item&gt;&lt;/style&gt; TextViewå…¨å±€ç»™æ‰€æœ‰ TextView æ·»åŠ ä¸€ä¸ª RTL å±žæ€§ ç›¸å…³é“¾æŽ¥:setting-global-styles-for-views-in-android 123456789&lt;style name="AppTheme" parent="Theme.AppCompat.Light.NoActionBar"&gt; ... &lt;item name="android:textViewStyle"&gt;@style/TextViewStyle.TextDirection&lt;/item&gt; ...&lt;/style&gt;&lt;style name="TextViewStyle.TextDirection" parent="android:Widget.TextView"&gt; &lt;item name="android:textDirection"&gt;locale&lt;/item&gt;&lt;/style&gt; åˆ¤æ–­æ˜¯å¦æ˜¯ RTL å¸ƒå±€1TextUtilsCompat.getLayoutDirectionFromLocale(Locale.getDefault()) == LayoutDirection.RTL å¯¹é›†åˆè¿›è¡Œå€’åºå¤„ç†åœ¨æŸäº›åœºåˆä¸‹, è¿™ä¸ªæ–¹æ³•å¾ˆæœ‰ç”¨ 1Collections.reverse(List&lt;?&gt; list); ä»£ç åŠ¨æ€è®¾ç½®æŽ§ä»¶ setMargins1234FrameLayout.LayoutParams params = new FrameLayout.LayoutParams( ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);params.setMargins(10, 0, 10, 0);params.setMarginEnd(10); ViewPagerç›¸å…³é“¾æŽ¥: tabs-swipe-direction-in-right-to-left-android-app Android å®˜æ–¹æŽ§ä»¶å¤§å¤šæ”¯æŒ RTLï¼ŒViewPager é™¤å¤–ï¼ŒGitHub ä¸Šé¢æœ‰äººå¯¹ ViewPager è¿›è¡Œä¿®æ”¹æ”¯æŒ RTL, åœ°å€ é€‚é…æ€»ç»“ æ¨ªå‘å¸ƒå±€ LinearLayout ï¼Œå¯ä»¥ä½¿ç”¨ FrameLayoutï¼ŒæŽ§ä»¶éœ€è¦é å·¦æˆ–é å³å¯ä»¥ä½¿ç”¨ layout_gravity è®¾ç½®å¯¹åº”å±žæ€§ åˆ‡æ¢é˜¿æ‹‰ä¼¯è¯­æ—¶ï¼Œç½‘æ ¼å¸ƒå±€ item ä¹‹é—´çš„è·ç¦»ä¼šå‡ºçŽ°å¢žå¤§é—®é¢˜ï¼Œå¤„ç†æ–¹æ³•æ˜¯ï¼šç½‘æ ¼åˆ†å‰²çº¿ ItemDecoration éœ€è¦åŠ å…¥è¯­è¨€æ¥åˆ¤æ–­ï¼Œè°ƒæ¢åŽŸæ¥è®¾ç½®å·¦å³çš„è¾¹è·å³å¯ ç¦æ­¢æŽ‰ä¹‹å‰çš„ä¾§æ»‘è¿”å›žï¼Œä»¥å…å‡ºçŽ°å†²çª ä¸€äº›æ–¹å‘å›¾æ ‡ï¼Œé‡æ–°åšä¸€ä¸ªç›¸å¯¹æ–¹å‘çš„æ”¾åˆ° mipmap-ldrtl-xxxhdpi åŒ…ä¸‹ åŠ¨ç”»ç¿»è½¬, æ”¾åœ¨ anim-ldrtl å°†å¯¹åº”çš„åŠ¨ç”»è¿›è¡Œåå‘å¤„ç† å¸ƒå±€é‡Œå¦‚æžœè®¾ç½®äº† paddingLeftã€drawableLeft ç­‰ç­‰è¿™äº›å±žæ€§æ›´æ”¹ä¸ºä¸€ä¸ªæ”¯æŒ RTL çš„å±žæ€§ paddingStartã€drawableStartï¼›ä½†æ˜¯æœ‰äº›åœ°æ–¹å¯ä»¥ä¸åŠ çš„ï¼Œä¾‹å¦‚ï¼šè´­ç‰©è½¦ä¸Šçš„æ•°é‡å¾½ç« ï¼ŒåŠ äº†ä¹‹åŽæ„Ÿè§‰æ€ªæ€ªçš„ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸åŠ äº† åˆ©ç”¨åœ¨ AS å³è¾¹çš„é¢„è§ˆå¸ƒå±€å·¥å…·ä¸­çš„è¯­è¨€åˆ‡æ¢å·¥å…·ï¼Œåˆ‡æ¢æˆé˜¿æ‹‰ä¼¯è¯­ï¼Œèƒ½å®žæ—¶çœ‹åˆ°å¸ƒå±€çš„æ•ˆæžœå›¾ EditText æ·»åŠ  android:layoutDirection=â€localeâ€ ï¼Œå¦‚æžœå¤–é¢æœ‰ TextInputLayout çš„éœ€ç»™å®ƒè®¾ç½® android:textDirection=â€localeâ€ ï¼Œå¦‚æžœè¾“å…¥ç±»åž‹æ—¶å¯†ç æ—¶è¿˜éœ€æ·»åŠ ä¸€ä¸ªå±žæ€§ android:textAlignment=â€viewStartâ€ TextView éœ€è¦åŠ ä¸Š android:textAlignment=â€viewStart æˆ– viewEndâ€ ä»¥åŠ android:textDirection=â€localeâ€ RecyclerView ç½‘ç»œå¸ƒå±€çš„å¯ä»¥è€ƒè™‘ä½¿ç”¨ StaggeredGridLayoutManager ï¼Œå¦‚æžœæ•°é‡å¤ªå¤šçš„ç½‘æ ¼å¸ƒå±€ï¼Œä¸å¤ªå»ºè®®ä½¿ç”¨ï¼Œå¯èƒ½ä¼šå‡ºçŽ°æ»‘åŠ¨æ··ä¹± é˜¿æ‹‰ä¼¯è¯­ç›®å½•ä¸‹çš„ String.xml æ–‡ä»¶, å‡ºçŽ°å ä½ç¬¦ d% éœ€è¦æ³¨æ„æ”¹ä¸º %d, ä½†åˆå¹¶ä¸æ˜¯æ‰€æœ‰éƒ½æ”¹æˆè¿™æ ·, ç›®å‰æˆ‘å‘çŽ°å½“ä»£ç ä¸­ä½¿ç”¨äº† Toast å’Œ SpannableString å±žæ€§çš„å°±éœ€è¦æ›´æ”¹ä¸º %d å»ºè®®è®¡åˆ’ ä»ŽåŸºç¡€ç±»å¼€å§‹å…¥æ‰‹ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯é˜¿æ‹‰ä¼¯è¯­ï¼Œå¦‚æžœæ˜¯éœ€è¦å°†ç•Œé¢è®¾ç½®ä¸ºä»Žå³åˆ°å·¦çš„æ˜¾ç¤ºæ–¹å¼ åˆ†æ¨¡å—è¿›è¡Œé€‚é… å¤æ‚çš„æ¨¡å—ï¼Œå¯ä»¥æ”¾åˆ° layout-ldrtl åŒ…ä¸‹ï¼Œå•ç‹¬åšä¸€ä¸ªå¸ƒå±€æ¥é€‚é…é˜¿æ‹‰ä¼¯è¯­ï¼Œä¾‹å¦‚è¯¦æƒ…é¡µ å‚è€ƒèµ„æ–™ https://android-developers.googleblog.com/2013/03/native-rtl-support-in-android-42.html https://medium.com/@zhangqichuan/rtl-support-in-android-898e11f31561 https://mobikul.com/just-few-steps-to-make-your-app-rtl-supportable/ https://blog.robustastudio.com/featured/android-rtl-support/ http://blog.csdn.net/figo0423/article/details/50241363 http://blog.csdn.net/wxx614817/article/details/50586388 http://jiajixin.cn/2016/10/08/android_adapt_rtl/ http://www.apkbus.com/blog-327085-57866.html http://droidyue.com/blog/2014/07/07/support-rtl-in-android/index.html http://chuansong.me/n/920084451521]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é˜¿æ‹‰ä¼¯è¯­</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è½»é‡çº§å­˜å‚¨æ¡†æž¶MMKV]]></title>
    <url>%2Fposts%2F4770b281.html</url>
    <content type="text"><![CDATA[ä¸€ã€å‰è¨€APP çš„æ€§èƒ½ä¼˜åŒ–ä¹‹è·¯æ˜¯æ°¸æ— æ­¢å¢ƒçš„, è¿™é‡Œå­¦ä¹ ä¸€ä¸ªè…¾è®¯å¼€æºç”¨äºŽæå‡æœ¬åœ°å­˜å‚¨æ•ˆçŽ‡çš„è½»é‡çº§å­˜å‚¨æ¡†æž¶ MMKV ç›®å‰é¡¹ç›®ä¸­åœ¨è½»é‡çº§å­˜å‚¨ä¸Šä½¿ç”¨çš„æ˜¯ SharedPreferences, è™½ç„¶ SP å…¼å®¹æ€§æžå¥½, ä½† SP çš„ä½Žæ€§èƒ½ä¸€ç›´è¢«è¯Ÿç—…, çº¿ä¸Šä¹Ÿå‡ºçŽ°äº†ä¸€äº›å› ä¸º SP å¯¼è‡´çš„ ANR ç½‘ä¸Šæœ‰å¾ˆå¤šé’ˆå¯¹ SP çš„ä¼˜åŒ–æ–¹æ¡ˆ, è¿™é‡Œç¬”è€…ä½¿ç”¨çš„æ˜¯é€šè¿‡ Hook SP åœ¨ Application ä¸­çš„åˆ›å»º, å°†å…¶æ›¿æ¢æˆè‡ªå®šä¹‰çš„ SP çš„æ–¹å¼æ¥å¢žå¼ºæ€§èƒ½, ä½† SDK 28 ä»¥åŽç¦æ­¢åå°„ QueuedWork.getHandler æŽ¥å£, è¿™ä¸ªæ–¹å¼å°±å¤±æ•ˆäº† å› æ­¤éœ€è¦ä¸€ç§æ›¿ä»£çš„è½»é‡çº§å­˜å‚¨æ–¹æ¡ˆ, MMKV ä¾¿æ˜¯è¿™æ ·çš„ä¸€ä¸ªæ¡†æž¶ äºŒã€é›†æˆä¸Žæµ‹è¯•ä»¥ä¸‹ä»‹ç»ç®€å•çš„ä½¿ç”¨æ–¹å¼, æ›´å¤šè¯¦æƒ…è¯·æŸ¥çœ‹ Wiki 2.1 ä¾èµ–æ³¨å…¥åœ¨ App æ¨¡å—çš„ build.gradle æ–‡ä»¶é‡Œæ·»åŠ : 1234dependencies &#123; implementation &apos;com.tencent:mmkv:1.0.22&apos; // replace &quot;1.0.22&quot; with any available version&#125; 2.2 åˆå§‹åŒ–1234// è®¾ç½®åˆå§‹åŒ–çš„æ ¹ç›®å½•String dir = getFilesDir().getAbsolutePath() + "/mmkv_2";String rootDir = MMKV.initialize(dir);Log.i("MMKV", "mmkv root: " + rootDir); 2.3 èŽ·å–å®žä¾‹12345678// èŽ·å–é»˜è®¤çš„å…¨å±€å®žä¾‹MMKV kv = MMKV.defaultMMKV();// æ ¹æ®ä¸šåŠ¡åŒºåˆ«å­˜å‚¨, é™„å¸¦ä¸€ä¸ªè‡ªå·±çš„ IDMMKV kv = MMKV.mmkvWithID("MyID");// å¤šè¿›ç¨‹åŒæ­¥æ”¯æŒMMKV kv = MMKV.mmkvWithID("MyID", MMKV.MULTI_PROCESS_MODE); 2.4 CURD12345678// æ·»åŠ /æ›´æ–°æ•°æ®kv.encode(key, value);// èŽ·å–æ•°æ®int tmp = kv.decodeInt(key);// åˆ é™¤æ•°æ®kv.removeValueForKey(key); 2.5 SP çš„è¿ç§»123456789private void testImportSharedPreferences() &#123; MMKV mmkv = MMKV.mmkvWithID("myData"); SharedPreferences old_man = getSharedPreferences("myData", MODE_PRIVATE); // è¿ç§»æ—§æ•°æ® mmkv.importFromSharedPreferences(old_man); // æ¸…ç©ºæ—§æ•°æ® old_man.edit().clear().commit(); ......&#125; 2.6 æ•°æ®æµ‹è¯•ä»¥ä¸‹æ˜¯ MMKVã€SharedPreferences å’Œ SQLite åŒæ­¥å†™å…¥ 1000 æ¡æ•°æ®çš„æµ‹è¯•ç»“æžœ 1234567891011121314151617181920// MMKVMMKV: MMKV write int: loop[1000]: 12 msMMKV: MMKV read int: loop[1000]: 3 msMMKV: MMKV write String: loop[1000]: 7 msMMKV: MMKV read String: loop[1000]: 4 ms// SharedPreferencesMMKV: SharedPreferences write int: loop[1000]: 119 msMMKV: SharedPreferences read int: loop[1000]: 3 msMMKV: SharedPreferences write String: loop[1000]: 187MMKV: SharedPreferences read String: loop[1000]: 2 ms// SQLiteMMKV: sqlite write int: loop[1000]: 101 msMMKV: sqlite read int: loop[1000]: 136 msMMKV: sqlite write String: loop[1000]: 29 msMMKV: sqlite read String: loop[1000]: 93 ms å¯ä»¥çœ‹åˆ° MMKV æ— è®ºæ˜¯å¯¹æ¯” SP è¿˜æ˜¯ SQLite, åœ¨æ€§èƒ½ä¸Šéƒ½æœ‰éžå¸¸å¤§çš„ä¼˜åŠ¿, å®˜æ–¹æä¾›çš„æ•°æ®æµ‹è¯•ç»“æžœå¦‚ä¸‹ æ›´è¯¦ç»†çš„æ€§èƒ½æµ‹è¯•è§ wiki äº†è§£ MMKV çš„ä½¿ç”¨æ–¹å¼å’Œæµ‹è¯•ç»“æžœ, è®©æˆ‘å¯¹å…¶å®žçŽ°åŽŸç†äº§ç”Ÿäº†å¾ˆå¤§çš„å¥½å¥‡å¿ƒ, æŽ¥ä¸‹æ¥ä¾¿çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å°†æ€§èƒ½åšåˆ°è¿™ä¸ªåœ°æ­¥çš„, è¿™é‡Œå¯¹ä¸»è¦å¯¹ MMKV çš„åŸºæœ¬æ“ä½œè¿›è¡Œå‰–æž åˆå§‹åŒ– å®žä¾‹åŒ– encode decode è¿›ç¨‹è¯»å†™çš„åŒæ­¥ æˆ‘ä»¬ä»Žåˆå§‹åŒ–çš„æµç¨‹å¼€å§‹åˆ†æž ä¸‰ã€åˆå§‹åŒ–12345678910111213141516171819202122public class MMKV implements SharedPreferences, SharedPreferences.Editor &#123; // call on program start public static String initialize(Context context) &#123; String root = context.getFilesDir().getAbsolutePath() + "/mmkv"; return initialize(root, null); &#125; static private String rootDir = null; public static String initialize(String rootDir, LibLoader loader) &#123; ...... // çœç•¥åº“æ–‡ä»¶åŠ è½½å™¨ç›¸å…³ä»£ç  // ä¿å­˜æ ¹ç›®å½• MMKV.rootDir = rootDir; // Native å±‚åˆå§‹åŒ– jniInitialize(MMKV.rootDir); return rootDir; &#125; private static native void jniInitialize(String rootDir); &#125; MMKV çš„åˆå§‹åŒ–, ä¸»è¦æ˜¯å°†æ ¹ç›®å½•é€šè¿‡ jniInitialize ä¼ å…¥äº† Native å±‚, æŽ¥ä¸‹æ¥çœ‹çœ‹ Native çš„åˆå§‹åŒ–æ“ä½œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// native-bridge.cppnamespace mmkv &#123; MMKV_JNI void jniInitialize(JNIEnv *env, jobject obj, jstring rootDir) &#123; if (!rootDir) &#123; return; &#125; const char *kstr = env-&gt;GetStringUTFChars(rootDir, nullptr); if (kstr) &#123; MMKV::initializeMMKV(kstr); env-&gt;ReleaseStringUTFChars(rootDir, kstr); &#125;&#125; &#125;// MMKV.cppstatic unordered_map&lt;std::string, MMKV *&gt; *g_instanceDic;static ThreadLock g_instanceLock;static std::string g_rootDir;void initialize() &#123; // 1.1 èŽ·å–ä¸€ä¸ª unordered_map, ç±»ä¼¼äºŽ Java ä¸­çš„ HashMap g_instanceDic = new unordered_map&lt;std::string, MMKV *&gt;; // 1.2 åˆå§‹åŒ–çº¿ç¨‹é” g_instanceLock = ThreadLock(); ......&#125;void MMKV::initializeMMKV(const std::string &amp;rootDir) &#123; // ç”± Linux Thread äº’æ–¥é”å’Œæ¡ä»¶å˜é‡ä¿è¯ initialize å‡½æ•°åœ¨ä¸€ä¸ªè¿›ç¨‹å†…åªä¼šæ‰§è¡Œä¸€æ¬¡ // https://blog.csdn.net/zhangxiao93/article/details/51910043 static pthread_once_t once_control = PTHREAD_ONCE_INIT; // 1. è¿›è¡Œåˆå§‹åŒ–æ“ä½œ pthread_once(&amp;once_control, initialize); // 2. å°†æ ¹ç›®å½•ä¿å­˜åˆ°å…¨å±€å˜é‡ g_rootDir = rootDir; // æ‹·è´å­—ç¬¦ä¸² char *path = strdup(g_rootDir.c_str()); if (path) &#123; // 3. æ ¹æ®è·¯å¾„, ç”Ÿæˆç›®æ ‡åœ°å€çš„ç›®å½• mkPath(path); // é‡Šæ”¾å†…å­˜ free(path); &#125;&#125; å¯ä»¥çœ‹åˆ° initializeMMKV ä¸­ä¸»è¦ä»»åŠ¡æ˜¯åˆå§‹åŒ–æ•°æ®, ä»¥åŠåˆ›å»ºæ ¹ç›®å½• pthread_once_t: ç±»ä¼¼äºŽ Java çš„å•ä¾‹, å…¶ initialize æ–¹æ³•åœ¨è¿›ç¨‹å†…åªä¼šæ‰§è¡Œä¸€æ¬¡ åˆ›å»º MMKV å¯¹è±¡çš„ç¼“å­˜æ•£åˆ—è¡¨ g_instanceDic åˆ›å»ºä¸€ä¸ªçº¿ç¨‹é” g_instanceLock mkPath: æ ¹æ®å­—ç¬¦ä¸²åˆ›å»ºæ–‡ä»¶ç›®å½• æŽ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªç›®å½•åˆ›å»ºçš„è¿‡ç¨‹ 3.1 ç›®å½•çš„åˆ›å»º123456789101112131415161718192021222324252627282930313233// MmapedFile.cppbool mkPath(char *path) &#123; // å®šä¹‰ stat ç»“æž„ä½“ç”¨äºŽæè¿°æ–‡ä»¶çš„å±žæ€§ struct stat sb = &#123;&#125;; bool done = false; // æŒ‡å‘å­—ç¬¦ä¸²èµ·å§‹åœ°å€ char *slash = path; while (!done) &#123; // ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªéž "/" çš„ä¸‹æ ‡å¤„ slash += strspn(slash, "/"); // ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ª "/" ä¸‹æ ‡å‡ºå¤„ slash += strcspn(slash, "/"); done = (*slash == '\0'); *slash = '\0'; if (stat(path, &amp;sb) != 0) &#123; // æ‰§è¡Œåˆ›å»ºæ–‡ä»¶å¤¹çš„æ“ä½œ, C ä¸­æ—  mkdirs çš„æ“ä½œ, éœ€è¦ä¸€ä¸ªä¸€ä¸ªæ–‡ä»¶å¤¹çš„åˆ›å»º if (errno != ENOENT || mkdir(path, 0777) != 0) &#123; MMKVWarning("%s : %s", path, strerror(errno)); return false; &#125; &#125; // è‹¥éžæ–‡ä»¶å¤¹, åˆ™è¯´æ˜Žä¸ºéžæ³•è·¯å¾„ else if (!S_ISDIR(sb.st_mode)) &#123; MMKVWarning("%s: %s", path, strerror(ENOTDIR)); return false; &#125; *slash = '/'; &#125; return true;&#125; ä»¥ä¸Šæ˜¯ Native å±‚åˆ›å»ºæ–‡ä»¶è·¯å¾„çš„é€šç”¨ä»£ç , é€»è¾‘å¾ˆæ¸…æ™° å¥½çš„, æ–‡ä»¶ç›®å½•åˆ›å»ºå¥½äº†ä¹‹åŽ, Native å±‚çš„åˆå§‹åŒ–æ“ä½œä¾¿ç»“æŸäº†, æŽ¥ä¸‹æ¥çœ‹çœ‹ MMKV å®žä¾‹æž„å»ºçš„è¿‡ç¨‹ å››ã€å®žä¾‹åŒ–123456789101112131415161718192021222324public class MMKV implements SharedPreferences, SharedPreferences.Editor &#123; @Nullable public static MMKV mmkvWithID(String mmapID, int mode, String cryptKey, String relativePath) &#123; ...... // æ‰§è¡Œ Native åˆå§‹åŒ–, èŽ·å–å¥æŸ„å€¼ long handle = getMMKVWithID(mmapID, mode, cryptKey, relativePath); if (handle == 0) &#123; return null; &#125; // æž„å»ºä¸€ä¸ª Java çš„å£³å¯¹è±¡ return new MMKV(handle); &#125; private native static long getMMKVWithID(String mmapID, int mode, String cryptKey, String relativePath); // jni private long nativeHandle; private MMKV(long handle) &#123; nativeHandle = handle; &#125;&#125; å¯ä»¥çœ‹åˆ° MMKV å®žä¾‹æž„å»ºçš„ä¸»è¦é€»è¾‘é€šè¿‡ getMMKVWithID æ–¹æ³•å®žçŽ°, çœ‹å®ƒå†…éƒ¨åšäº†ä»€ä¹ˆ 12345678910111213141516171819202122232425262728293031323334// native-bridge.cppnamespace mmkv &#123;MMKV_JNI jlong getMMKVWithID( JNIEnv *env, jobject, jstring mmapID, jint mode, jstring cryptKey, jstring relativePath) &#123; MMKV *kv = nullptr; if (!mmapID) &#123; return (jlong) kv; &#125; // èŽ·å–ç‹¬ç«‹å­˜å‚¨ id string str = jstring2string(env, mmapID); bool done = false; if (cryptKey) &#123; // èŽ·å–ç§˜é’¥ string crypt = jstring2string(env, cryptKey); if (crypt.length() &gt; 0) &#123; if (relativePath) &#123; // èŽ·å–ç›¸å¯¹è·¯å¾„ string path = jstring2string(env, relativePath); // é€šè¿‡ mmkvWithID å‡½æ•°èŽ·å–ä¸€ä¸ª MMKV çš„å¯¹è±¡ kv = MMKV::mmkvWithID(str, DEFAULT_MMAP_SIZE, (MMKVMode) mode, &amp;crypt, &amp;path); &#125; else &#123; kv = MMKV::mmkvWithID(str, DEFAULT_MMAP_SIZE, (MMKVMode) mode, &amp;crypt, nullptr); &#125; done = true; &#125; &#125; ...... // å¼ºè½¬æˆå¥æŸ„, è¿”å›žåˆ° Java return (jlong) kv;&#125;&#125; å¯ä»¥çœ‹åˆ°æœ€ç»ˆé€šè¿‡ MMKV::mmkvWithID å‡½æ•°èŽ·å–åˆ° MMKV çš„å¯¹è±¡ 1234567891011121314151617181920212223242526272829303132333435// MMKV.cppMMKV *MMKV::mmkvWithID( const std::string &amp;mmapID, int size, MMKVMode mode, string *cryptKey, string *relativePath) &#123; if (mmapID.empty()) &#123; return nullptr; &#125; SCOPEDLOCK(g_instanceLock); // 1. é€šè¿‡ mmapID å’Œ relativePath, ç»„æˆæœ€ç»ˆçš„ mmap æ–‡ä»¶è·¯å¾„çš„ key auto mmapKey = mmapedKVKey(mmapID, relativePath); // 2. ä»Žå…¨å±€ç¼“å­˜ä¸­æŸ¥æ‰¾ auto itr = g_instanceDic-&gt;find(mmapKey); if (itr != g_instanceDic-&gt;end()) &#123; MMKV *kv = itr-&gt;second; return kv; &#125; // 3. åˆ›å»ºç¼“å­˜æ–‡ä»¶ if (relativePath) &#123; // æ ¹æ® mappedKVPathWithID èŽ·å– mmap çš„æœ€ç»ˆæ–‡ä»¶è·¯å¾„ // mmapID ä½¿ç”¨ md5 åŠ å¯† auto filePath = mappedKVPathWithID(mmapID, mode, relativePath); // ä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ if (!isFileExist(filePath)) &#123; if (!createFile(filePath)) &#123; return nullptr; &#125; &#125; ...... &#125; // 4. åˆ›å»ºå®žä¾‹å¯¹è±¡ auto kv = new MMKV(mmapID, size, mode, cryptKey, relativePath); // 5. ç¼“å­˜è¿™ä¸ª mmapKey (*g_instanceDic)[mmapKey] = kv; return kv;&#125; mmkvWithID å‡½æ•°çš„å®žçŽ°æµç¨‹éžå¸¸çš„æ¸…æ™°, è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ä¸€ä¸‹å®žä¾‹å¯¹è±¡çš„åˆ›å»ºæµç¨‹ 1234567891011121314151617181920212223242526272829303132333435// MMKV.cppMMKV::MMKV( const std::string &amp;mmapID, int size, MMKVMode mode, string *cryptKey, string *relativePath) : m_mmapID(mmapedKVKey(mmapID, relativePath)) // æ‹¼è£…æ–‡ä»¶çš„è·¯å¾„ , m_path(mappedKVPathWithID(m_mmapID, mode, relativePath)) // æ‹¼è£… .crc æ–‡ä»¶è·¯å¾„ , m_crcPath(crcPathWithID(m_mmapID, mode, relativePath)) // 1. å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ , m_metaFile(m_crcPath, DEFAULT_MMAP_SIZE, (mode &amp; MMKV_ASHMEM) ? MMAP_ASHMEM : MMAP_FILE) ...... , m_sharedProcessLock(&amp;m_fileLock, SharedLockType) ...... , m_isAshmem((mode &amp; MMKV_ASHMEM) != 0) &#123; ...... // åˆ¤æ–­æ˜¯å¦ä¸º Ashmem è·¨è¿›ç¨‹åŒ¿åå…±äº«å†…å­˜ if (m_isAshmem) &#123; // åˆ›å…±äº«å†…å­˜çš„æ–‡ä»¶ m_ashmemFile = new MmapedFile(m_mmapID, static_cast&lt;size_t&gt;(size), MMAP_ASHMEM); m_fd = m_ashmemFile-&gt;getFd(); &#125; else &#123; m_ashmemFile = nullptr; &#125; // æ ¹æ® cryptKey åˆ›å»º AES åŠ è§£å¯†çš„å¼•æ“Ž if (cryptKey &amp;&amp; cryptKey-&gt;length() &gt; 0) &#123; m_crypter = new AESCrypt((const unsigned char *) cryptKey-&gt;data(), cryptKey-&gt;length()); &#125; ...... // sensitive zone &#123; SCOPEDLOCK(m_sharedProcessLock); // 2. æ ¹æ® m_mmapID æ¥åŠ è½½æ–‡ä»¶ä¸­çš„æ•°æ® loadFromFile(); &#125;&#125; å¯ä»¥ä»Ž MMKV çš„æž„é€ å‡½æ•°ä¸­çœ‹åˆ°å¾ˆå¤šæœ‰è¶£çš„ä¿¡æ¯, MMKV æ˜¯æ”¯æŒ Ashmem å…±äº«å†…å­˜çš„, è¿™æ„å‘³ç€å³ä½¿æ˜¯è·¨è¿›ç¨‹å¤§æ•°æ®çš„ä¼ è¾“, å®ƒä¹Ÿèƒ½å¤Ÿæä¾›å¾ˆå¥½çš„æ€§èƒ½æ”¯æŒ ä¸è¿‡è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨ä¸¤ä¸ªå…³é”®ç‚¹ m_metaFile æ–‡ä»¶çš„æ˜ å°„ loadFromFile æ•°æ®çš„è½½å…¥ æŽ¥ä¸‹æ¥æˆ‘ä»¬å…ˆçœ‹çœ‹, æ–‡ä»¶çš„æ˜ å°„ 4.1 æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// MmapedFile.cppMmapedFile::MmapedFile(const std::string &amp;path, size_t size, bool fileType) : m_name(path), m_fd(-1), m_segmentPtr(nullptr), m_segmentSize(0), m_fileType(fileType) &#123; // ç”¨äºŽå†…å­˜æ˜ å°„çš„æ–‡ä»¶ if (m_fileType == MMAP_FILE) &#123; // 1. æ‰“å¼€æ–‡ä»¶ m_fd = open(m_name.c_str(), O_RDWR | O_CREAT, S_IRWXU); if (m_fd &lt; 0) &#123; MMKVError("fail to open:%s, %s", m_name.c_str(), strerror(errno)); &#125; else &#123; // 2. åˆ›å»ºæ–‡ä»¶é” FileLock fileLock(m_fd); InterProcessLock lock(&amp;fileLock, ExclusiveLockType); SCOPEDLOCK(lock); // èŽ·å–æ–‡ä»¶çš„ä¿¡æ¯ struct stat st = &#123;&#125;; if (fstat(m_fd, &amp;st) != -1) &#123; // èŽ·å–æ–‡ä»¶å¤§å° m_segmentSize = static_cast&lt;size_t&gt;(st.st_size); &#125; // 3. éªŒè¯æ–‡ä»¶çš„å¤§å°æ˜¯å¦å°äºŽä¸€ä¸ªå†…å­˜é¡µ, ä¸€èˆ¬ä¸º 4kb if (m_segmentSize &lt; DEFAULT_MMAP_SIZE) &#123; m_segmentSize = static_cast&lt;size_t&gt;(DEFAULT_MMAP_SIZE); // 3.1 é€šè¿‡ ftruncate å°†æ–‡ä»¶å¤§å°å¯¹å…¶åˆ°å†…å­˜é¡µ // 3.2 é€šè¿‡ zeroFillFile å°†æ–‡ä»¶å¯¹å…¶åŽçš„ç©ºç™½éƒ¨åˆ†ç”¨ 0 å¡«å…… if (ftruncate(m_fd, m_segmentSize) != 0 || !zeroFillFile(m_fd, 0, m_segmentSize)) &#123; // è¯´æ˜Žæ–‡ä»¶æ‹“å±•å¤±è´¥äº†, ç§»é™¤è¿™ä¸ªæ–‡ä»¶ close(m_fd); m_fd = -1; removeFile(m_name); return; &#125; &#125; // 4. é€šè¿‡ mmap å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜, èŽ·å–å†…å­˜é¦–åœ°å€ m_segmentPtr = (char *) mmap(nullptr, m_segmentSize, PROT_READ | PROT_WRITE, MAP_SHARED, m_fd, 0); if (m_segmentPtr == MAP_FAILED) &#123; MMKVError("fail to mmap [%s], %s", m_name.c_str(), strerror(errno)); close(m_fd); m_fd = -1; m_segmentPtr = nullptr; &#125; &#125; &#125; // ç”¨äºŽå…±äº«å†…å­˜çš„æ–‡ä»¶ else &#123; ...... &#125;&#125; MmapedFile çš„æž„é€ å‡½æ•°å¤„ç†çš„äº‹åŠ¡å¦‚ä¸‹ æ‰“å¼€æŒ‡å®šçš„æ–‡ä»¶ åˆ›å»ºè¿™ä¸ªæ–‡ä»¶é” ä¿®æ­£æ–‡ä»¶å¤§å°, æœ€å°ä¸º 4kb å‰ 4kb ç”¨äºŽç»Ÿè®¡æ•°æ®æ€»å¤§å° é€šè¿‡ mmap å°†æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ å¥½çš„, é€šè¿‡ MmapedFile çš„æž„é€ å‡½æ•°, æˆ‘ä»¬ä¾¿èƒ½å¤ŸèŽ·å–åˆ°æ˜ å°„åŽçš„å†…å­˜é¦–åœ°å€äº†, æ“ä½œè¿™å—å†…å­˜æ—¶ Linux å†…æ ¸ä¼šè´Ÿè´£å°†å†…å­˜ä¸­çš„æ•°æ®åŒæ­¥åˆ°æ–‡ä»¶ä¸­ æ¯”èµ· SP çš„æ•°æ®åŒæ­¥, mmap æ˜¾ç„¶æ˜¯è¦ä¼˜é›…çš„å¤š, å³ä½¿è¿›ç¨‹æ„å¤–æ­»äº¡, ä¹Ÿèƒ½å¤Ÿé€šè¿‡ Linux å†…æ ¸çš„ä¿æŠ¤æœºåˆ¶, å°†è¿›è¡Œäº†æ–‡ä»¶æ˜ å°„çš„å†…å­˜æ•°æ®åˆ·å…¥åˆ°æ–‡ä»¶ä¸­, æå‡äº†æ•°æ®å†™å…¥çš„å¯é æ€§ ç»“ä¸‹æ¥çœ‹çœ‹æ•°æ®çš„è½½å…¥ 4.2 æ•°æ®çš„è½½å…¥12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697// MMKV.cppvoid MMKV::loadFromFile() &#123; ......// å¿½ç•¥åŒ¿åå…±äº«å†…å­˜ç›¸å…³ä»£ç  // è‹¥å·²ç»è¿›è¡Œäº†æ–‡ä»¶æ˜ å°„ if (m_metaFile.isFileValid()) &#123; // åˆ™èŽ·å–ç›¸å…³æ•°æ® m_metaInfo.read(m_metaFile.getMemory()); &#125; // èŽ·å–æ–‡ä»¶æè¿°ç¬¦ m_fd = open(m_path.c_str(), O_RDWR | O_CREAT, S_IRWXU); if (m_fd &lt; 0) &#123; MMKVError(&quot;fail to open:%s, %s&quot;, m_path.c_str(), strerror(errno)); &#125; else &#123; // 1. èŽ·å–æ–‡ä»¶å¤§å° m_size = 0; struct stat st = &#123;0&#125;; if (fstat(m_fd, &amp;st) != -1) &#123; m_size = static_cast&lt;size_t&gt;(st.st_size); &#125; // 1.1 å°†æ–‡ä»¶å¤§å°å¯¹å…¶åˆ°å†…å­˜é¡µçš„æ•´æ•°å€ if (m_size &lt; DEFAULT_MMAP_SIZE || (m_size % DEFAULT_MMAP_SIZE != 0)) &#123; ...... &#125; // 2. èŽ·å–æ–‡ä»¶æ˜ å°„åŽçš„å†…å­˜åœ°å€ m_ptr = (char *) mmap(nullptr, m_size, PROT_READ | PROT_WRITE, MAP_SHARED, m_fd, 0); if (m_ptr == MAP_FAILED) &#123; ...... &#125; else &#123; // 3. è¯»å–å†…å­˜æ–‡ä»¶çš„å‰ 32 ä½, èŽ·å–å­˜å‚¨æ•°æ®çš„çœŸå®žå¤§å° memcpy(&amp;m_actualSize, m_ptr, Fixed32Size); ...... bool loadFromFile = false, needFullWriteback = false; if (m_actualSize &gt; 0) &#123; // 4. éªŒè¯æ–‡ä»¶çš„é•¿åº¦ if (m_actualSize &lt; m_size &amp;&amp; m_actualSize + Fixed32Size &lt;= m_size) &#123; // 5. éªŒè¯æ–‡ä»¶ CRC çš„æ­£ç¡®æ€§ if (checkFileCRCValid()) &#123; loadFromFile = true; &#125; else &#123; // è‹¥ä¸æ­£ç¡®, åˆ™å›žè°ƒå¼‚å¸¸ CRC å¼‚å¸¸ auto strategic = mmkv::onMMKVCRCCheckFail(m_mmapID); if (strategic == OnErrorRecover) &#123; loadFromFile = true; needFullWriteback = true; &#125; &#125; &#125; else &#123; // å›žè°ƒæ–‡ä»¶é•¿åº¦å¼‚å¸¸ auto strategic = mmkv::onMMKVFileLengthError(m_mmapID); if (strategic == OnErrorRecover) &#123; writeAcutalSize(m_size - Fixed32Size); loadFromFile = true; needFullWriteback = true; &#125; &#125; &#125; // 6. éœ€è¦ä»Žæ–‡ä»¶èŽ·å–æ•°æ® if (loadFromFile) &#123; ...... // æž„å»ºè¾“å…¥ç¼“å­˜ MMBuffer inputBuffer(m_ptr + Fixed32Size, m_actualSize, MMBufferNoCopy); if (m_crypter) &#123; // è§£å¯†è¾“å…¥ç¼“å†²ä¸­çš„æ•°æ® decryptBuffer(*m_crypter, inputBuffer); &#125; // ä»Žè¾“å…¥ç¼“å†²ä¸­å°†æ•°æ®è¯»å…¥ m_dic m_dic.clear(); MiniPBCoder::decodeMap(m_dic, inputBuffer); // æž„å»ºè¾“å‡ºæ•°æ® m_output = new CodedOutputData(m_ptr + Fixed32Size + m_actualSize, m_size - Fixed32Size - m_actualSize); // è¿›è¡Œé‡æ•´å›žå†™, å‰”é™¤é‡å¤çš„æ•°æ® if (needFullWriteback) &#123; fullWriteback(); &#125; &#125; // 7. è¯´æ˜Žæ–‡ä»¶ä¸­æ²¡æœ‰æ•°æ®, æˆ–è€…æ ¡éªŒå¤±è´¥äº† else &#123; SCOPEDLOCK(m_exclusiveProcessLock); // æ¸…ç©ºæ–‡ä»¶ä¸­çš„æ•°æ® if (m_actualSize &gt; 0) &#123; writeAcutalSize(0); &#125; m_output = new CodedOutputData(m_ptr + Fixed32Size, m_size - Fixed32Size); // é‡æ–°è®¡ç®— CRC recaculateCRCDigest(); &#125; ...... &#125; &#125; ...... m_needLoadFromFile = false;&#125; å¥½çš„, å¯ä»¥çœ‹åˆ° loadFromFile ä¸­å¯¹äºŽ CRC éªŒè¯é€šè¿‡çš„æ–‡ä»¶, ä¼šå°†æ–‡ä»¶ä¸­çš„æ•°æ®è¯»å…¥åˆ° m_dic ä¸­ç¼“å­˜, å¦åˆ™åˆ™ä¼šæ¸…ç©ºæ–‡ä»¶ å› æ­¤ç”¨æˆ·æ¶æ„ä¿®æ”¹æ–‡ä»¶ä¹‹åŽ, ä¼šç ´å CRC çš„å€¼, è¿™ä¸ªå­˜å‚¨æ•°æ®ä¾¿ä¼šè¢«ä½œåºŸ, è¿™ä¸€ç‚¹è¦å°¤ä¸ºæ³¨æ„ ä»Žæ–‡ä»¶ä¸­è¯»å–æ•°æ®åˆ° m_dic ä¹‹åŽ, ä¼šå°† mdic å›žå†™åˆ°æ–‡ä»¶ä¸­ , å…¶é‡å†™çš„ç›®çš„æ˜¯ä¸ºäº†å‰”é™¤é‡å¤çš„æ•°æ® å…³äºŽä¸ºä»€ä¹ˆä¼šå‡ºçŽ°é‡å¤çš„æ•°æ®, åœ¨åŽé¢ encode æ“ä½œä¸­å†åˆ†æž 4.3 å›žé¡¾åˆ°è¿™é‡Œ MMKV å®žä¾‹çš„æž„å»ºå°±å®Œæˆäº†, æœ‰äº† m_dic è¿™ä¸ªå†…å­˜ç¼“å­˜, æˆ‘ä»¬è¿›è¡Œæ•°æ®æŸ¥è¯¢çš„æ•ˆçŽ‡å°±å¤§å¤§æå‡äº† ä»Žæœ€ç»ˆçš„ç»“æžœæ¥çœ‹å®ƒä¸Ž SP æ˜¯ä¸€è‡´çš„, éƒ½æ˜¯åˆæ¬¡åŠ è½½æ—¶ä¼šå°†æ–‡ä»¶ä¸­æ‰€æœ‰çš„æ•°æ®åŠ è½½åˆ°æ•£åˆ—è¡¨ä¸­, ä¸è¿‡ MMKV å¤šäº†ä¸€æ­¥æ•°æ®å›žå†™çš„æ“ä½œ, å› æ­¤å½“æ•°æ®é‡æ¯”è¾ƒå¤§æ—¶, å¯¹å®žä¾‹æž„å»ºçš„é€Ÿåº¦æœ‰ä¸€å®šçš„å½±å“ 123// å†™å…¥ 1000 æ¡æ•°æ®ä¹‹åŽ, MMVK å’Œ SharedPreferences å®žä¾‹åŒ–çš„æ—¶é—´å¯¹æ¯”E/TAG: create MMKV instance time is 4 msE/TAG: create SharedPreferences instance time is 1 ms ä»Žç»“æžœä¸Šæ¥çœ‹, MMVK çš„ç¡®åœ¨å®žä¾‹æž„é€ é€Ÿåº¦ä¸Šæœ‰ä¸€å®šçš„åŠ£åŠ¿, ä¸è¿‡å¾—ç›ŠäºŽæ˜¯å°† m_dic ä¸­çš„æ•°æ®å†™å…¥åˆ° mmap çš„å†…å­˜, å…¶çœŸæ­£è¿›è¡Œæ–‡ä»¶å†™å…¥çš„æ—¶æœºç”± Linux å†…æ ¸å†³å®š, å†åŠ ä¸Šæ–‡ä»¶çš„é¡µç¼“å­˜æœºåˆ¶, æ‰€ä»¥é€Ÿåº¦ä¸Šè™½æœ‰åŠ£åŠ¿, ä½†ä¸è‡³äºŽæ— æ³•æŽ¥å— äº”ã€encodeå…³äºŽ encode å³æ•°æ®çš„æ·»åŠ ä¸Žæ›´æ–°çš„æµç¨‹, è¿™é‡Œä»¥ encodeString ä¸ºä¾‹ 123456789public class MMKV implements SharedPreferences, SharedPreferences.Editor &#123; public boolean encode(String key, String value) &#123; return encodeString(nativeHandle, key, value); &#125; private native boolean encodeString(long handle, String key, String value);&#125; çœ‹çœ‹ native å±‚çš„å®žçŽ° 1234567891011121314151617181920212223// native-bridge.cppnamespace mmkv &#123;MMKV_JNI jboolean encodeString(JNIEnv *env, jobject, jlong handle, jstring oKey, jstring oValue) &#123; MMKV *kv = reinterpret_cast&lt;MMKV *&gt;(handle); if (kv &amp;&amp; oKey) &#123; string key = jstring2string(env, oKey); // è‹¥æ˜¯ value éž NULL if (oValue) &#123; // é€šè¿‡ setStringForKey å‡½æ•°, å°†æ•°æ®å­˜å…¥ string value = jstring2string(env, oValue); return (jboolean) kv-&gt;setStringForKey(value, key); &#125; // è‹¥æ˜¯ value ä¸º NULL, åˆ™ç§»é™¤ key å¯¹åº”çš„ value å€¼ else &#123; kv-&gt;removeValueForKey(key); return (jboolean) true; &#125; &#125; return (jboolean) false;&#125;&#125; è¿™é‡Œæˆ‘ä»¬ä¸»è¦åˆ†æžä¸€ä¸‹ setStringForKey è¿™ä¸ªå‡½æ•° 12345678910// MMKV.cppbool MMKV::setStringForKey(const std::string &amp;value, const std::string &amp;key) &#123; if (key.empty()) &#123; return false; &#125; // 1. å°†æ•°æ®ç¼–ç æˆ ProtocolBuffer auto data = MiniPBCoder::encodeDataWithObject(value); // 2. æ›´æ–°é”®å€¼å¯¹ return setDataForKey(std::move(data), key);&#125; è¿™é‡Œä¸»è¦åˆ†ä¸ºä¸¤æ­¥æ“ä½œ æ•°æ®ç¼–ç  æ›´æ–°é”®å€¼å¯¹ 5.1 æ•°æ®çš„ç¼–ç MMKV é‡‡ç”¨çš„æ˜¯ ProtocolBuffer ç¼–ç æ–¹å¼, è¿™é‡Œå°±ä¸åšè¿‡å¤šä»‹ç»äº†, å…·ä½“è¯·æŸ¥çœ‹ Google å®˜æ–¹æ–‡æ¡£ 1234567891011121314151617181920212223242526272829303132333435363738// MiniPBCoder.cppMMBuffer MiniPBCoder::getEncodeData(const string &amp;str) &#123; // 1. åˆ›å»ºç¼–ç æ¡ç›®çš„é›†åˆ m_encodeItems = new vector&lt;PBEncodeItem&gt;(); // 2. ä¸ºé›†åˆå¡«å……æ•°æ® size_t index = prepareObjectForEncode(str); PBEncodeItem *oItem = (index &lt; m_encodeItems-&gt;size()) ? &amp;(*m_encodeItems)[index] : nullptr; if (oItem &amp;&amp; oItem-&gt;compiledSize &gt; 0) &#123; // 3. å¼€è¾Ÿä¸€ä¸ªå†…å­˜ç¼“å†²åŒº, ç”¨äºŽå­˜æ”¾ç¼–ç åŽçš„æ•°æ® m_outputBuffer = new MMBuffer(oItem-&gt;compiledSize); // 4. åˆ›å»ºä¸€ä¸ªç¼–ç æ“ä½œå¯¹è±¡ m_outputData = new CodedOutputData(m_outputBuffer-&gt;getPtr(), m_outputBuffer-&gt;length()); // æ‰§è¡Œ protocolbuffer ç¼–ç , å¹¶è¾“å‡ºåˆ°ç¼“å†²åŒº writeRootObject(); &#125; // è°ƒç”¨ç§»åŠ¨æž„é€ å‡½æ•°, é‡æ–°åˆ›å»ºå®žä¾‹è¿”å›ž return move(*m_outputBuffer);&#125;size_t MiniPBCoder::prepareObjectForEncode(const string &amp;str) &#123; // 2.1 åˆ›å»º PBEncodeItem å¯¹è±¡ç”¨æ¥æè¿°å¾…ç¼–ç çš„æ¡ç›®, å¹¶æ·»åŠ åˆ° vector é›†åˆ m_encodeItems-&gt;push_back(PBEncodeItem()); // 2.2 èŽ·å– PBEncodeItem å¯¹è±¡ PBEncodeItem *encodeItem = &amp;(m_encodeItems-&gt;back()); // 2.3 è®°å½•ç´¢å¼•ä½ç½® size_t index = m_encodeItems-&gt;size() - 1; &#123; // 2.4 å¡«å……ç¼–ç ç±»åž‹ encodeItem-&gt;type = PBEncodeItemType_String; // 2.5 å¡«å……è¦ç¼–ç çš„æ•°æ® encodeItem-&gt;value.strValue = &amp;str; // 2.6 å¡«å……æ•°æ®å¤§å° encodeItem-&gt;valueSize = static_cast&lt;int32_t&gt;(str.size()); &#125; // 2.7 è®¡ç®—ç¼–ç åŽçš„å¤§å° encodeItem-&gt;compiledSize = pbRawVarint32Size(encodeItem-&gt;valueSize) + encodeItem-&gt;valueSize; return index;&#125; å¯ä»¥çœ‹åˆ°, å†æœªè¿›è¡Œç¼–ç æ“ä½œä¹‹å‰, ç¼–ç åŽçš„æ•°æ®å¤§å°å°±å·²ç»ç¡®å®šå¥½äº†, å¹¶ä¸”å°†å®ƒä¿å­˜åœ¨äº† encodeItem-&gt;compiledSize ä¸­, æŽ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æ‰§è¡Œæ•°æ®ç¼–ç å¹¶è¾“å‡ºåˆ°ç¼“å†²åŒºçš„æ“ä½œæµç¨‹ 1234567891011121314151617181920212223242526// MiniPBCoder.cppvoid MiniPBCoder::writeRootObject() &#123; for (size_t index = 0, total = m_encodeItems-&gt;size(); index &lt; total; index++) &#123; PBEncodeItem *encodeItem = &amp;(*m_encodeItems)[index]; switch (encodeItem-&gt;type) &#123; // ä¸»è¦å…³å¿ƒç¼–ç  String case PBEncodeItemType_String: &#123; m_outputData-&gt;writeString(*(encodeItem-&gt;value.strValue)); break; &#125; ...... &#125; &#125;&#125;// CodedOutputData.cppvoid CodedOutputData::writeString(const string &amp;value) &#123; size_t numberOfBytes = value.size(); ...... // 1. æŒ‰ç…§ varint æ–¹å¼ç¼–ç å­—ç¬¦ä¸²é•¿åº¦, ä¼šæ”¹å˜ m_position çš„å€¼ this-&gt;writeRawVarint32((int32_t) numberOfBytes); // 2. å°†å­—ç¬¦ä¸²çš„æ•°æ®æ‹·è´åˆ°ç¼–ç å¥½çš„é•¿åº¦åŽé¢ memcpy(m_ptr + m_position, ((uint8_t *) value.data()), numberOfBytes); // æ›´æ–° position çš„å€¼ m_position += numberOfBytes;&#125; å¯ä»¥çœ‹åˆ° CodedOutputData çš„ writeString ä¸­æŒ‰ç…§ protocol buffer è¿›è¡Œäº†å­—ç¬¦ä¸²çš„ç¼–ç æ“ä½œ å…¶ä¸­ m_ptr æ˜¯ä¸Šé¢å¼€è¾Ÿçš„å†…å­˜ç¼“å†²åŒºçš„åœ°å€, ä¹Ÿå°±æ˜¯è¯´ writeString æ‰§è¡Œç»“æŸä¹‹åŽ, æ•°æ®å°±å·²ç»è¢«å†™å…¥ç¼“å†²åŒºäº† æœ‰äº†ç¼–ç å¥½çš„æ•°æ®ç¼“å†²åŒº, æŽ¥ä¸‹æ¥çœ‹çœ‹æ›´æ–°é”®å€¼å¯¹çš„æ“ä½œ 5.2é”®å€¼å¯¹çš„æ›´æ–°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051// MMKV.cppbool MMKV::setStringForKey(const std::string &amp;value, const std::string &amp;key) &#123; // ç¼–ç æ•°æ®èŽ·å–å­˜æ”¾æ•°æ®çš„ç¼“å†²åŒº auto data = MiniPBCoder::encodeDataWithObject(value); // æ›´æ–°é”®å€¼å¯¹ return setDataForKey(std::move(data), key);&#125;bool MMKV::setDataForKey(MMBuffer &amp;&amp;data, const std::string &amp;key) &#123; ...... // å°†é”®å€¼å¯¹å†™å…¥ mmap æ–‡ä»¶æ˜ å°„çš„å†…å­˜ä¸­ auto ret = appendDataWithKey(data, key); // å†™å…¥æˆåŠŸ, æ›´æ–°æ•£åˆ—æ•°æ® if (ret) &#123; m_dic[key] = std::move(data); m_hasFullWriteback = false; &#125; return ret;&#125;bool MMKV::appendDataWithKey(const MMBuffer &amp;data, const std::string &amp;key) &#123; // 1. è®¡ç®— key + value çš„ ProtocolBuffer ç¼–ç åŽçš„é•¿åº¦ size_t keyLength = key.length(); size_t size = keyLength + pbRawVarint32Size((int32_t) keyLength); size += data.length() + pbRawVarint32Size((int32_t) data.length()); SCOPEDLOCK(m_exclusiveProcessLock); // 2. éªŒè¯æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç©ºé—´, ä¸è¶³åˆ™è¿›è¡Œæ•°æ®é‡æ•´ä¸Žæ‰©å®¹æ“ä½œ bool hasEnoughSize = ensureMemorySize(size); if (!hasEnoughSize || !isFileValid()) &#123; return false; &#125; // 3. æ›´æ–°æ–‡ä»¶å¤´çš„æ•°æ®æ€»å¤§å° writeAcutalSize(m_actualSize + size); // 4. å°† key å’Œç¼–ç åŽçš„ value å†™å…¥åˆ°æ–‡ä»¶æ˜ å°„çš„å†…å­˜ m_output-&gt;writeString(key); m_output-&gt;writeData(data); // 5. èŽ·å–æ–‡ä»¶æ˜ å°„å†…å­˜å½“å‰ &lt;key, value&gt; çš„èµ·å§‹ä½ç½® auto ptr = (uint8_t *) m_ptr + Fixed32Size + m_actualSize - size; if (m_crypter) &#123; // åŠ å¯†è¿™å—åŒºåŸŸ m_crypter-&gt;encrypt(ptr, ptr, size); &#125; // 6. æ›´æ–° CRC updateCRCDigest(ptr, size, KeepSequence); return true;&#125; å¥½çš„, å¯ä»¥çœ‹åˆ°æ›´æ–°é”®å€¼å¯¹çš„æ“ä½œè¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„, é¦–å…ˆå°†é”®å€¼å¯¹æ•°æ®å†™å…¥åˆ°æ–‡ä»¶æ˜ å°„çš„å†…å­˜ä¸­, å†™å…¥æˆåŠŸä¹‹åŽæ›´æ–°æ•£åˆ—æ•°æ® å…³äºŽå†™å…¥åˆ°æ–‡ä»¶æ˜ å°„çš„è¿‡ç¨‹, ä¸Šé¢ä»£ç ä¸­çš„æ³¨é‡Šä¹Ÿéžå¸¸çš„æ¸…æ™°, æŽ¥ä¸‹æ¥æˆ‘ä»¬ ensureMemorySize æ˜¯å¦‚ä½•è¿›è¡Œæ•°æ®çš„é‡æ•´ä¸Žæ‰©å®¹çš„ 5.2.1 æ•°æ®çš„é‡æ•´ä¸Žæ‰©å®¹123456789101112131415161718192021222324252627282930313233343536373839404142// MMKV.cppbool MMKV::ensureMemorySize(size_t newSize) &#123; ...... // è®¡ç®—æ–°é”®å€¼å¯¹çš„å¤§å° constexpr size_t ItemSizeHolderSize = 4; if (m_dic.empty()) &#123; newSize += ItemSizeHolderSize; &#125; // æ•°æ®é‡å†™: // 1. æ–‡ä»¶å‰©ä½™ç©ºé—²ç©ºé—´å°‘äºŽæ–°çš„é”®å€¼å¯¹ // 2. æ•£åˆ—ä¸ºç©º if (newSize &gt;= m_output-&gt;spaceLeft() || m_dic.empty()) &#123; // è®¡ç®—æ‰€éœ€çš„æ•°æ®ç©ºé—´ static const int offset = pbFixed32Size(0); MMBuffer data = MiniPBCoder::encodeDataWithObject(m_dic); size_t lenNeeded = data.length() + offset + newSize; if (m_isAshmem) &#123; ...... &#125; else &#123; // // è®¡ç®—æ¯ä¸ªé”®å€¼å¯¹çš„å¹³å‡å¤§å° size_t avgItemSize = lenNeeded / std::max&lt;size_t&gt;(1, m_dic.size()); // è®¡ç®—æœªæ¥å¯èƒ½ä¼šä½¿ç”¨çš„å¤§å°(ç±»ä¼¼äºŽ 1.5 å€) size_t futureUsage = avgItemSize * std::max&lt;size_t&gt;(8, (m_dic.size() + 1) / 2); // 1. æ‰€éœ€ç©ºé—´ &gt;= å½“å‰æ–‡ä»¶æ€»å¤§å° // 2. æ‰€éœ€ç©ºé—´çš„ 1.5 å€ &gt;= å½“å‰æ–‡ä»¶æ€»å¤§å° if (lenNeeded &gt;= m_size || (lenNeeded + futureUsage) &gt;= m_size) &#123; // æ‰©å®¹ä¸º 2 å€ size_t oldSize = m_size; do &#123; m_size *= 2; &#125; while (lenNeeded + futureUsage &gt;= m_size); ....... &#125; &#125; ...... // è¿›è¡Œæ•°æ®çš„é‡å†™ writeAcutalSize(data.length()); ...... &#125; return true;&#125; ä»Žä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥äº†è§£åˆ° æ•°æ®çš„é‡å†™æ—¶æœº æ–‡ä»¶å‰©ä½™ç©ºé—´å°‘äºŽæ–°çš„é”®å€¼å¯¹å¤§å° æ•£åˆ—ä¸ºç©º æ–‡ä»¶æ‰©å®¹æ—¶æœº æ‰€éœ€ç©ºé—´çš„ 1.5 å€è¶…è¿‡äº†å½“å‰æ–‡ä»¶çš„æ€»å¤§å°æ—¶, æ‰©å®¹ä¸ºä¹‹å‰çš„ä¸¤å€ 5.3å›žé¡¾è‡³æ­¤ encode çš„æµç¨‹æˆ‘ä»¬å°±èµ°å®Œäº†, å›žé¡¾ä¸€ä¸‹æ•´ä¸ª encode çš„æµç¨‹ ä½¿ç”¨ ProtocolBuffer ç¼–ç  value å°† key å’Œ ç¼–ç åŽçš„ value ä½¿ç”¨ ProtocolBuffer çš„æ ¼å¼ append åˆ°æ–‡ä»¶æ˜ å°„åŒºå†…å­˜çš„å°¾éƒ¨ æ–‡ä»¶ç©ºé—´ä¸è¶³ åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ è¿›è¡Œæ•°æ®çš„å›žå†™ å³åœ¨æ–‡ä»¶åŽè¿›è¡Œè¿½åŠ  å¯¹è¿™ä¸ªé”®å€¼å¯¹åŒºåŸŸè¿›è¡Œç»Ÿä¸€çš„åŠ å¯† æ›´æ–° CRC çš„å€¼ å°† key å’Œ value å¯¹åº”çš„ ProtocolBuffer ç¼–ç å†…å­˜åŒºåŸŸ, æ›´æ–°åˆ°æ•£åˆ—è¡¨ m_dic ä¸­ é€šè¿‡ encode çš„åˆ†æž, æˆ‘ä»¬å¾—çŸ¥ MMKV æ–‡ä»¶çš„å­˜å‚¨æ–¹å¼å¦‚ä¸‹ æŽ¥ä¸‹æ¥çœ‹çœ‹ decode çš„æµç¨‹ å…­ã€decodedecode çš„è¿‡ç¨‹åŒæ ·ä»¥ decodeString ä¸ºä¾‹ 1234567891011121314151617181920212223242526272829303132333435363738394041// native-bridge.cppMMKV_JNI jstringdecodeString(JNIEnv *env, jobject obj, jlong handle, jstring oKey, jstring oDefaultValue) &#123; MMKV *kv = reinterpret_cast&lt;MMKV *&gt;(handle); if (kv &amp;&amp; oKey) &#123; string key = jstring2string(env, oKey); // é€šè¿‡ getStringForKey, å°†æ•°æ®è¾“å‡ºåˆ°ä¼ å‡ºå‚æ•°ä¸­ value ä¸­ string value; bool hasValue = kv-&gt;getStringForKey(key, value); if (hasValue) &#123; return string2jstring(env, value); &#125; &#125; return oDefaultValue;&#125;// MMKV.cppbool MMKV::getStringForKey(const std::string &amp;key, std::string &amp;result) &#123; if (key.empty()) &#123; return false; &#125; SCOPEDLOCK(m_lock); // 1. ä»Žå†…å­˜ç¼“å­˜ä¸­èŽ·å–æ•°æ® auto &amp;data = getDataForKey(key); if (data.length() &gt; 0) &#123; // 2. è§£æž data å¯¹åº”çš„ ProtocolBuffer æ•°æ® result = MiniPBCoder::decodeString(data); return true; &#125; return false;&#125;const MMBuffer &amp;MMKV::getDataForKey(const std::string &amp;key) &#123; // ä»Žæ•£åˆ—è¡¨ä¸­èŽ·å– key å¯¹åº”çš„ value auto itr = m_dic.find(key); if (itr != m_dic.end()) &#123; return itr-&gt;second; &#125; static MMBuffer nan(0); return nan;&#125; å¥½çš„å¯ä»¥çœ‹åˆ° decode çš„æµç¨‹æ¯”è¾ƒç®€å•, å…ˆä»Žå†…å­˜ç¼“å­˜ä¸­èŽ·å– key å¯¹åº”çš„ value çš„ ProtocolBuffer å†…å­˜åŒºåŸŸ, å†è§£æžè¿™å—å†…å­˜åŒºåŸŸ, ä»Žä¸­èŽ·å–çœŸæ­£çš„ value å€¼ 6.1 æ€è€ƒçœ‹åˆ°è¿™é‡Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®, ä¸ºä»€ä¹ˆ m_dic ä¸ç›´æŽ¥å­˜å‚¨ key å’Œ value åŽŸå§‹æ•°æ®å‘¢, è¿™æ ·æŸ¥è¯¢æ•ˆçŽ‡ä¸æ˜¯æ›´å¿«å—? å¦‚æ­¤ä¸€æ¥æŸ¥è¯¢æ•ˆçŽ‡çš„ç¡®ä¼šæ›´å¿«, å› ä¸ºå°‘äº† ProtocolBuffer è§£ç çš„è¿‡ç¨‹ ä»Žå›¾ä¸Šçš„ç»“æžœå¯ä»¥çœ‹å‡º, MMKV çš„è¯»å–æ€§èƒ½æ—¶ç•¥ä½ŽäºŽ SharedPreferences çš„, è¿™é‡Œç¬”è€…ç»™å‡ºè‡ªå·±çš„æ€è€ƒ m_dic åœ¨æ•°æ®é‡æ•´ä¸­ä¹Ÿèµ·åˆ°äº†éžå¸¸é‡è¦çš„ä½œç”¨, éœ€è¦ä¾é  m_dic å°†æ•°æ®å†™å…¥åˆ° mmap çš„æ–‡ä»¶æ˜ å°„åŒº, è¿™ä¸ªè¿‡ç¨‹æ˜¯éžå¸¸è€—æ—¶çš„, è‹¥æ˜¯åŽŸå§‹çš„ value, åˆ™éœ€è¦å¯¹æ‰€æœ‰çš„ value å†è¿›è¡Œä¸€æ¬¡ ProtocolBuffer ç¼–ç æ“ä½œ, å°¤å…¶æ˜¯å½“æ•°æ®é‡æ¯”è¾ƒåºžå¤§æ—¶, å…¶å¸¦æ¥çš„æ€§èƒ½æŸè€—æ›´æ˜¯æ— æ³•å¿½ç•¥çš„ æ—¢ç„¶ m_dic è¿˜æ‰¿æ‹…ç€æ–¹ä¾¿æ•°æ®å¤å†™çš„åŠŸèƒ½, é‚£èƒ½å¦å†æ·»åŠ ä¸€ä¸ªå†…å­˜ç¼“å­˜ä¸“é—¨ç”¨äºŽå­˜å‚¨åŽŸå§‹çš„ value å‘¢? å½“ç„¶å¯ä»¥, è¿™æ · MMKV çš„è¯»å–å®šæ˜¯èƒ½å¤Ÿè¾¾åˆ° SharedPreferences çš„æ°´å¹³, ä¸è¿‡ value çš„å†…å­˜æ¶ˆè€—åˆ™ä¼šåŠ å€, MMKV ä½œä¸ºä¸€ä¸ªè½»é‡çº§ç¼“å­˜çš„æ¡†æž¶, æŸ¥è¯¢æ—¶æ—¶é—´çš„æå‡å¹…åº¦è¿˜ä¸è¶³ä»¥ç”¨å†…å­˜åŠ å€çš„ä»£ä»·åŽ»æ¢å–, æˆ‘æƒ³è¿™æ˜¯ Tencent åœ¨è¿›è¡Œå¤šæ–¹é¢æƒè¡¡ä¹‹åŽ, å¾—åˆ°çš„ä¸€ä¸ªæ¯”è¾ƒåˆç†çš„è§£å†³æ–¹æ¡ˆ ä¸ƒã€è¿›ç¨‹è¯»å†™çš„åŒæ­¥è¯´èµ·è¿›ç¨‹é—´è¯»å†™åŒæ­¥, æˆ‘ä»¬å¾ˆè‡ªç„¶çš„æƒ³åˆ° Linux çš„å…±äº«å†…å­˜é…åˆä¿¡å·é‡ä½¿ç”¨çš„æ¡ˆä¾‹, ä½†æ˜¯è¿™ç§æ–¹å¼æœ‰ä¸€ä¸ªå¼Šç«¯, é‚£å°±æ˜¯å½“æŒæœ‰é”çš„è¿›ç¨‹æ„å¤–æ­»äº¡çš„æ—¶å€™, å¹¶ä¸ä¼šé‡Šæ”¾å…¶æ‹¥æœ‰çš„ä¿¡å·é‡, è‹¥å¤šè¿›ç¨‹ä¹‹é—´å­˜åœ¨ç«žäº‰, é‚£ä¹ˆé˜»å¡žçš„è¿›ç¨‹å°†ä¸ä¼šè¢«å”¤é†’, è¿™æ˜¯éžå¸¸å±é™©çš„ MMKV æ˜¯é‡‡ç”¨ æ–‡ä»¶é” çš„æ–¹å¼æ¥è¿›è¡Œè¿›ç¨‹é—´çš„åŒæ­¥æ“ä½œ LOCK_SH(å…±äº«é”): å¤šä¸ªè¿›ç¨‹å¯ä»¥ä½¿ç”¨åŒä¸€æŠŠé”, å¸¸è¢«ç”¨ä½œè¯»å…±äº«é” LOCK_EX(æŽ’ä»–é”): åŒæ—¶åªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨, å¸¸è¢«ç”¨ä½œå†™é” LOCK_UN: é‡Šæ”¾é” æŽ¥ä¸‹æ¥æˆ‘çœ‹çœ‹ MMKV åŠ è§£é”çš„æ“ä½œ 7.1 æ–‡ä»¶å…±äº«é”123456789101112131415161718192021222324MMKV::MMKV( const std::string &amp;mmapID, int size, MMKVMode mode, string *cryptKey, string *relativePath) : m_mmapID(mmapedKVKey(mmapID, relativePath)) // åˆ›å»ºæ–‡ä»¶é”çš„æè¿° , m_fileLock(m_metaFile.getFd()) // æè¿°å…±äº«é” , m_sharedProcessLock(&amp;m_fileLock, SharedLockType) // æè¿°æŽ’å®ƒé” , m_exclusiveProcessLock(&amp;m_fileLock, ExclusiveLockType) // åˆ¤è¯»æ˜¯å¦ä¸ºè¿›ç¨‹é—´é€šä¿¡ , m_isInterProcess((mode &amp; MMKV_MULTI_PROCESS) != 0 || (mode &amp; CONTEXT_MODE_MULTI_PROCESS) != 0) , m_isAshmem((mode &amp; MMKV_ASHMEM) != 0) &#123; ...... // æ ¹æ®æ˜¯å¦è·¨è¿›ç¨‹æ“ä½œåˆ¤æ–­å…±äº«é”å’ŒæŽ’å®ƒé”çš„å¼€å…³ m_sharedProcessLock.m_enable = m_isInterProcess; m_exclusiveProcessLock.m_enable = m_isInterProcess; // sensitive zone &#123; // æ–‡ä»¶è¯»æ“ä½œ, å¯ç”¨äº†æ–‡ä»¶å…±äº«é” SCOPEDLOCK(m_sharedProcessLock); loadFromFile(); &#125;&#125; å¯ä»¥çœ‹åˆ°åœ¨æˆ‘ä»¬å‰é¢åˆ†æžè¿‡çš„æž„é€ å‡½æ•°ä¸­, MMKV å¯¹æ–‡ä»¶é”è¿›è¡Œäº†åˆå§‹åŒ–, å¹¶ä¸”åˆ›å»ºäº†å…±äº«é”å’ŒæŽ’å®ƒé”, å¹¶åœ¨è·¨è¿›ç¨‹æ“ä½œæ—¶å¼€å¯, å½“è¿›è¡Œè¯»æ“ä½œæ—¶, å¯åŠ¨äº†å…±äº«é” 7.2 æ–‡ä»¶æŽ’å®ƒé”1234567891011121314151617181920212223242526bool MMKV::fullWriteback() &#123; ...... auto allData = MiniPBCoder::encodeDataWithObject(m_dic); // å¯åŠ¨äº†æŽ’å®ƒé” SCOPEDLOCK(m_exclusiveProcessLock); if (allData.length() &gt; 0) &#123; if (allData.length() + Fixed32Size &lt;= m_size) &#123; if (m_crypter) &#123; m_crypter-&gt;reset(); auto ptr = (unsigned char *) allData.getPtr(); m_crypter-&gt;encrypt(ptr, ptr, allData.length()); &#125; writeAcutalSize(allData.length()); delete m_output; m_output = new CodedOutputData(m_ptr + Fixed32Size, m_size - Fixed32Size); m_output-&gt;writeRawData(allData); // note: don't write size of data recaculateCRCDigest(); m_hasFullWriteback = true; return true; &#125; else &#123; // ensureMemorySize will extend file &amp; full rewrite, no need to write back again return ensureMemorySize(allData.length() + Fixed32Size - m_size); &#125; &#125; return false;&#125; åœ¨è¿›è¡Œæ•°æ®å›žå†™çš„å‡½æ•°ä¸­, å¯åŠ¨äº†æŽ’å®ƒé” 7.3 è¯»å†™æ•ˆçŽ‡è¡¨çŽ°å…¶è¿›ç¨‹åŒæ­¥è¯»å†™çš„æ€§èƒ½è¡¨çŽ°å¦‚ä¸‹ å¯ä»¥çœ‹åˆ°è¿›ç¨‹åŒæ­¥è¯»å†™çš„æ•ˆçŽ‡ä¹Ÿæ˜¯éžå¸¸ nice çš„ å…³äºŽè·¨è¿›ç¨‹åŒæ­¥å°±ä»‹ç»åˆ°è¿™é‡Œ, å½“ç„¶ MMKV çš„æ–‡ä»¶é”å¹¶æ²¡æœ‰è¡¨é¢ä¸Šé‚£ä¹ˆç®€å•, å› ä¸ºæ–‡ä»¶é”ä¸ºçŠ¶æ€é”, æ— è®ºåŠ äº†å¤šå°‘æ¬¡é”, ä¸€ä¸ªè§£é”æ“ä½œå°±å…¨è§£é™¤, æ˜¾ç„¶æ— æ³•åº”å¯¹å­å‡½æ•°åµŒå¥—è°ƒç”¨çš„é—®é¢˜, MMKV å†…éƒ¨é€šè¿‡äº†è‡ªè¡Œå®žçŽ°è®¡æ•°å™¨æ¥å®žçŽ°é”çš„å¯é‡å…¥æ€§, æ›´å¤šçš„ç»†èŠ‚å¯ä»¥æŸ¥çœ‹ wiki æ€»ç»“é€šè¿‡ä¸Šé¢çš„åˆ†æž, æˆ‘ä»¬å¯¹ MMKV æœ‰äº†ä¸€ä¸ªæ•´ä½“ä¸Šçš„æŠŠæŽ§, å…¶å…·ä½“çš„è¡¨çŽ°å¦‚ä¸‹æ‰€ç¤º é¡¹ç›® è¯„ä»· æè¿° æ­£ç¡®æ€§ ä¼˜ æ”¯æŒå¤šè¿›ç¨‹å®‰å…¨, ä½¿ç”¨ mmap, ç”±æ“ä½œç³»ç»Ÿä¿è¯æ•°æ®å›žå†™çš„æ­£ç¡®æ€§ æ—¶é—´å¼€é”€ ä¼˜ ä½¿ç”¨ mmap å®žçŽ°, å‡å°‘äº†ç”¨æˆ·ç©ºé—´æ•°æ®åˆ°å†…æ ¸ç©ºé—´çš„æ‹·è´ ç©ºé—´å¼€é”€ ä¸­ ä½¿ç”¨ protocl buffer å­˜å‚¨æ•°æ®, åŒæ ·çš„æ•°æ®ä¼šæ¯” xml å’Œ json æ¶ˆè€—ç©ºé—´å° ä½¿ç”¨çš„æ˜¯æ•°æ®è¿½åŠ åˆ°æœ«å°¾çš„æ–¹å¼, åªæœ‰åˆ°è¾¾ä¸€å®šé˜ˆå€¼ä¹‹åŽæ‰ä¼šè§¦å‘é”®å€¼åˆå¹¶, ä¸åˆå¹¶ä¹‹å‰ä¼šå¯¼è‡´åŒä¸€ä¸ª key å­˜åœ¨å¤šä»½ å®‰å…¨ ä¸­ ä½¿ç”¨ crc æ ¡éªŒ, ç”„åˆ«æ–‡ä»¶ç³»ç»Ÿå’Œæ“ä½œç³»ç»Ÿä¸ç¨³å®šå¯¼è‡´çš„å¼‚å¸¸æ•°æ® å¼€å‘æˆæœ¬ ä¼˜ ä½¿ç”¨æ–¹å¼è¾ƒä¸ºç®€å• å…¼å®¹æ€§ ä¼˜ å„ä¸ªå®‰å“ç‰ˆæœ¬éƒ½å‰åŽå…¼å®¹ è™½ç„¶ MMKV ä¸€äº›åœºæ™¯ä¸‹æ¯” SP ç¨æ…¢(å¦‚: é¦–æ¬¡å®žä¾‹åŒ–ä¼šè¿›è¡Œæ•°æ®çš„å¤å†™å‰”é™¤é‡å¤æ•°æ®, æ¯” SP ç¨æ…¢, æŸ¥è¯¢æ•°æ®æ—¶å­˜åœ¨ ProtocolBuffer è§£ç , æ¯” SP ç¨æ…¢), ä½†å…¶é€†å¤©çš„æ•°æ®å†™å…¥é€Ÿåº¦ã€mmap Linux å†…æ ¸ä¿è¯æ•°æ®çš„åŒæ­¥, ä»¥åŠ ProtocolBuffer ç¼–ç å¸¦æ¥çš„æ›´å°çš„æœ¬åœ°å­˜å‚¨ç©ºé—´å ç”¨ç­‰éƒ½æ˜¯éžå¸¸æ£’çš„é—ªå…‰ç‚¹ åœ¨åˆ†æž MMKV çš„ä»£ç çš„è¿‡ç¨‹ä¸­, ä»Žä¸­å­¦ä¹ åˆ°äº†å¾ˆå¤šçŸ¥è¯†, éžå¸¸æ„Ÿè°¢ Tencent ä¸ºå¼€æºç¤¾åŒºåšå‡ºçš„è´¡çŒ® å…«ã€å‚è€ƒæ–‡çŒ® github.com/Tencent/MMKâ€¦ developers.google.com/protocol-buâ€¦ time.geekbang.org/column/artiâ€¦ www.cnblogs.com/kex1n/p/710â€¦]]></content>
      <categories>
        <category>Android</category>
        <category>æ¡†æž¶</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>æ¡†æž¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BannerViewPage]]></title>
    <url>%2Fposts%2F6831bdd1.html</url>
    <content type="text"><![CDATA[BannerViewPageBannerå½“å‰å±å¹•æ˜¾ç¤ºä¸‹ä¸€é¡µå†…å®¹çš„ä¸€éƒ¨åˆ†ï¼Œç”¨ViewPageråç§»æ¥å®žçŽ°ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>View</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…³äºŽOKRçš„è§£è¯»]]></title>
    <url>%2Fposts%2F5b77eb6.html</url>
    <content type="text"><![CDATA[OKRæ˜¯ä¸€å¥—ä¸¥å¯†çš„æ€è€ƒæ¡†æž¶å’ŒæŒç»­çš„çºªå¾‹è¦æ±‚ï¼Œæ—¨åœ¨ç¡®ä¿å‘˜å·¥ç´§å¯†åä½œï¼ŒæŠŠç²¾åŠ›èšç„¦åœ¨ä¿ƒè¿›ç»„ç»‡æˆé•¿çš„ã€å¯è¡¡é‡çš„è´¡çŒ®ä¸Šã€‚ å…·ä½“æ‹†è§£å¦‚ä¸‹ï¼š 1ã€ä¸¥å¯†çš„æ€è€ƒæ¡†æž¶ï¼šOKRæ„åœ¨æå‡ç»©æ•ˆï¼Œä½†å¦‚æžœåªæ˜¯ç®€å•çš„æ¯ä¸ªå­£åº¦è·Ÿè¸ªä¸€ä¸‹çš„ä½ çš„ç»“æžœï¼Œä½ ä¸ä¼šå¦‚å¿æ‰€æ„¿ã€‚ 2ã€æŒç»­çš„çºªå¾‹è¦æ±‚ï¼šOKRä»£è¡¨äº†ä¸€ç§æ—¶é—´å’Œç²¾åŠ›ä¸Šçš„æ‰¿è¯ºã€‚ ä»¥å­£åº¦ï¼ˆæˆ–è€…å…¶ä»–é¢„å…ˆè§„å®šçš„å‘¨æœŸï¼‰ä¸ºå•ä½åˆ·æ–°OKRï¼› ä»”ç»†ç¡®è®¤ç»“æžœè¾¾æˆæƒ…å†µï¼› å¦‚æœ‰å¿…è¦ï¼ŒæŒç»­ä¿®æ­£çŽ°è¡Œæˆ˜ç•¥å’Œå•†ä¸šæ¨¡å¼ï¼› ç»“æžœå¯¼å‘ã€‚ 3ã€ç¡®ä¿å‘˜å·¥ç´§å¯†åä½œï¼šç”±äºŽOKRå¯¹æ¯ä¸ªäººéƒ½å……åˆ†å…±äº«ï¼Œç»„ç»‡å†…ä»Žä¸Šè‡³ä¸‹éƒ½å¯ä»¥çœ‹åˆ°OKRåŠå…¶è¾¾æˆæƒ…å†µã€‚ 4ã€ç²¾åŠ›èšç„¦ï¼šOKRä¸æ˜¯ï¼Œä¹Ÿä¸åº”è¢«å½“æˆä¸€å¼ å¾…å®Œæˆçš„ä»»åŠ¡æ¸…å•ã€‚OKRçš„ä¸»è¦ç›®çš„æ˜¯ç”¨æ¥è¯†åˆ«æœ€å…³é”®çš„ä¸šåŠ¡ç›®æ ‡ï¼Œå¹¶é€šè¿‡é‡åŒ–çš„å…³é”®ç»“æžœåŽ»è¡¡é‡ç›®æ ‡è¾¾æˆæƒ…å†µã€‚æˆ˜ç•¥å°±æ˜¯ä¸åšä»€ä¹ˆå’Œåšä»€ä¹ˆï¼Œä¸¤è€…éƒ½åŒç­‰é‡è¦ï¼Œä¸å¯ååºŸï¼OKRä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä½ å¿…é¡»åšå‡ºæœ€ç»ˆå–èˆï¼Œå†³å®šå“ªäº›å†…å®¹æ‰æ˜¯ä½ æœ€ç»ˆçš„å…³æ³¨ç‚¹ã€‚ 5ã€åšå‡ºå¯è¡¡é‡çš„è´¡çŒ®ï¼šä»»ä½•æ—¶å€™ï¼Œå¦‚æœ‰å¯èƒ½ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥å°½é‡é¿å…ä¸»è§‚æè¿°KRï¼ŒKRè¦èƒ½ç²¾ç¡®åœ°æŒ‡å‡ºå®ƒçš„è¾¾æˆå¯¹ä¸šåŠ¡ç©¶ç«Ÿæœ‰å¤šå¤§çš„ä¿ƒè¿›ä½œç”¨ã€‚ 6ã€ä¿ƒè¿›ç»„ç»‡æˆé•¿ï¼šåˆ¤æ–­OKRæˆåŠŸä¸Žå¦çš„æœ€ç»ˆæ ‡å‡†ï¼Œè¿˜æ˜¯è¦ç”¨ç»“æžœè¯´è¯ï¼Œçœ‹ä½ çš„ç›®æ ‡æ‰€å–å¾—çš„å®žé™…æˆæžœå¦‚ä½•ã€‚]]></content>
      <categories>
        <category>awsome</category>
      </categories>
      <tags>
        <tag>awsome</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»€ä¹ˆæ˜¯ç°åº¦å‘å¸ƒï¼Œç°åº¦æµ‹è¯•]]></title>
    <url>%2Fposts%2F5b196854.html</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯ç°åº¦å‘å¸ƒï¼Ÿç°åº¦å‘å¸ƒï¼Œåˆåé‡‘ä¸é›€å‘å¸ƒï¼Œæˆ–è€…ç°åº¦æµ‹è¯•ï¼Œæ˜¯æŒ‡åœ¨é»‘ä¸Žç™½ä¹‹é—´èƒ½å¤Ÿå¹³æ»‘è¿‡æ¸¡çš„ä¸€ç§å‘å¸ƒæ–¹å¼ã€‚åœ¨å…¶ä¸Šå¯ä»¥è¿›è¡ŒA/B testingï¼Œå³è®©ä¸€éƒ¨åˆ†ç”¨æˆ·ç»§ç»­ç”¨äº§å“ç‰¹æ€§Aï¼Œä¸€éƒ¨åˆ†ç”¨æˆ·å¼€å§‹ç”¨äº§å“ç‰¹æ€§Bï¼Œå¦‚æžœç”¨æˆ·å¯¹Bæ²¡æœ‰ä»€ä¹ˆåå¯¹æ„è§ï¼Œé‚£ä¹ˆé€æ­¥æ‰©å¤§èŒƒå›´ï¼ŒæŠŠæ‰€æœ‰ç”¨æˆ·éƒ½è¿ç§»åˆ°Bä¸Šé¢æ¥ã€‚ ç°åº¦å‘å¸ƒæ˜¯å¯¹æŸä¸€äº§å“çš„å‘å¸ƒé€æ­¥æ‰©å¤§ä½¿ç”¨ç¾¤ä½“èŒƒå›´ï¼Œä¹Ÿå«ç°åº¦æ”¾é‡ã€‚ç°åº¦å‘å¸ƒå¯ä»¥ä¿è¯æ•´ä½“ç³»ç»Ÿçš„ç¨³å®šï¼Œåœ¨åˆå§‹ç°åº¦çš„æ—¶å€™å°±å¯ä»¥å‘çŽ°ã€è°ƒæ•´é—®é¢˜ï¼Œä»¥ä¿è¯å…¶å½±å“åº¦ã€‚ ç°åº¦æœŸï¼šç°åº¦å‘å¸ƒå¼€å§‹åˆ°ç»“æŸæœŸé—´çš„è¿™ä¸€æ®µæ—¶é—´ï¼Œç§°ä¸ºç°åº¦æœŸã€‚ ç°åº¦å‘å¸ƒçš„æ„ä¹‰ç°åº¦å‘å¸ƒèƒ½åŠæ—©èŽ·å¾—ç”¨æˆ·çš„æ„è§åé¦ˆï¼Œå®Œå–„äº§å“åŠŸèƒ½ï¼Œæå‡äº§å“è´¨é‡ï¼Œè®©ç”¨æˆ·å‚ä¸Žäº§å“æµ‹è¯•ï¼ŒåŠ å¼ºä¸Žç”¨æˆ·äº’åŠ¨ï¼Œé™ä½Žäº§å“å‡çº§æ‰€å½±å“çš„ç”¨æˆ·èŒƒå›´ã€‚ ç°åº¦å‘å¸ƒæ­¥éª¤ å®šä¹‰ç›®æ ‡ é€‰å®šç­–ç•¥ï¼šåŒ…æ‹¬ç”¨æˆ·è§„æ¨¡ã€å‘å¸ƒé¢‘çŽ‡ã€åŠŸèƒ½è¦†ç›–åº¦ã€å›žæ»šç­–ç•¥ã€è¿è¥ç­–ç•¥ã€æ–°æ—§ç³»ç»Ÿéƒ¨ç½²ç­–ç•¥ç­‰ ç­›é€‰ç”¨æˆ·ï¼šåŒ…æ‹¬ç”¨æˆ·ç‰¹å¾ã€ç”¨æˆ·æ•°é‡ã€ç”¨æˆ·å¸¸ç”¨åŠŸèƒ½ã€ç”¨æˆ·èŒƒå›´ç­‰ éƒ¨ç½²ç³»ç»Ÿï¼šéƒ¨ç½²æ–°ç³»ç»Ÿã€éƒ¨ç½²ç”¨æˆ·è¡Œä¸ºåˆ†æžç³»ç»Ÿï¼ˆweb analyticsï¼‰ã€è®¾å®šåˆ†æµè§„åˆ™ã€è¿è¥æ•°æ®åˆ†æžã€åˆ†æµè§„åˆ™å¾®è°ƒ å‘å¸ƒæ€»ç»“ï¼šç”¨æˆ·è¡Œä¸ºåˆ†æžæŠ¥å‘Šã€ç”¨æˆ·é—®å·è°ƒæŸ¥ã€ç¤¾ä¼šåŒ–åª’ä½“æ„è§æ”¶é›†ã€å½¢æˆäº§å“åŠŸèƒ½æ”¹è¿›åˆ—è¡¨ äº§å“å®Œå–„ æ–°ä¸€è½®ç°åº¦å‘å¸ƒæˆ–å®Œæ•´å‘å¸ƒ]]></content>
      <categories>
        <category>awsome</category>
      </categories>
      <tags>
        <tag>awsome</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[java.lang.ClassNotFoundException:"org.apache.http.ProtocolVersion"]]></title>
    <url>%2Fposts%2Fc7a54c5f.html</url>
    <content type="text"><![CDATA[è¿è¡Œé¡¹ç›®é‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š Caused by: java.lang.ClassNotFoundException: Didnâ€™t find class â€œorg.apache.http.ProtocolVersionâ€ on path: DexPathList[[zip file â€œ/data/user_de/0/com.google.android.gms/app_chimera/m/00000043/MapsDynamite.apkâ€],nativeLibraryDirectories=[/data/user_de/0/com.google.android.gms/app_chimera/m/00000043/MapsDynamite.apk!/lib/arm64-v8a, /system/lib64, /product/lib64]] è§£å†³æ–¹æ¡ˆï¼š1.åœ¨æ¸…å•æ–‡ä»¶å¢žåŠ ä»£ç : 12&lt;application android:usesCleartextTraffic="true"&gt; 2.åœ¨æ¸…å•æ–‡ä»¶æ¸…å•å†åŠ ä¸€å¥ä»£ç ï¼š 123456 &lt;application android:usesCleartextTraffic="true"&gt; &lt;uses-library android:name="org.apache.http.legacy" android:required="false" /&gt;&lt;/application&gt; å¥½äº†ï¼Œé‡æ–°è¿è¡Œè§£å†³äº†.æœ€æ ¹æœ¬çš„åšæ³•æ˜¯ä½¿ç”¨httpsè¿›è¡ŒæŽ¥å£è®¿é—®ï¼Œæ¯•ç«Ÿæ¶‰åŠæ•°æ®çš„å®‰å…¨æ€§ã€‚å½“ç„¶äº†ï¼Œè¿™éœ€è¦æœåŠ¡å™¨çš„æ”¯æŒã€‚è¿˜æœ‰ç¬¬ä¸‰æ–¹sdkï¼Œä¹Ÿéœ€è¦ä½¿ç”¨httpsã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Exception</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Exception</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GoogleMapä½¿ç”¨ä»‹ç»]]></title>
    <url>%2Fposts%2F50fe3b5b.html</url>
    <content type="text"><![CDATA[æ¦‚è¿°é€šè¿‡æœ¬æ–‡ï¼Œä½ å¯ä»¥çŸ¥é“å¦‚ä½•ä½¿ç”¨ GoogleMap ç›¸å…³ APIã€å®šä½å½“å‰ä½ç½®ã€èŽ·å–å½“å‰æ‰€åœ¨åŸŽå¸‚ã€èŽ·å–å½“å‰ä½ç½®é™„è¿‘çš„åœ°ç‚¹ã€å¯¼èˆªã€åœ°ç‚¹æœç´¢ç­‰å†…å®¹ã€‚å¤§è‡´å†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹å¦‚ä¸‹æ€ç»´å¯¼å›¾ã€‚ ç‰¹åˆ«æ³¨æ„ï¼šdemo ä½¿ç”¨çš„ GoogleMap key å¯¹åº”æˆ‘è‡ªå·±ç”µè„‘çš„ keystoreï¼Œå¦‚æžœé‡æ–°ç¼–è¯‘é¡¹ç›®ï¼Œç”Ÿæˆçš„apkä½¿ç”¨çš„æ˜¯ä½ çš„ç”µè„‘çš„ keystoreï¼Œå’Œæˆ‘çš„ keystore æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¦æ­£å¸¸è¿è¡Œï¼Œ ç›´æŽ¥ä¸‹è½½æˆ‘ç¼–è¯‘å¥½çš„ apkï¼› ç”¨æˆ‘çš„é¡¹ç›®åŒ…åï¼Œå’Œä½ è‡ªå·±çš„ keystore çš„ SHA-1 åŽ»ç”³è¯·æ–°çš„ GoogleMap keyã€‚ï¼ˆæ–¹æ³•åœ¨ä¸‹é¢ï¼Œå¾€ä¸‹çœ‹å“ˆï¼‰ å‰æœŸå‡†å¤‡ç½‘ç»œå› ä¸ºå›½å†…ä¼—æ‰€å‘¨çŸ¥çš„ç½‘ç»œé—®é¢˜ï¼Œè°·æ­Œåœ°å›¾çš„é¡µé¢åŠ è½½å’Œ API çš„ä½¿ç”¨ä¼šå‡ºçŽ°æ— æ•ˆçš„æƒ…å†µï¼Œå¦‚æžœä½ è¦ä½¿ç”¨æˆ–è°ƒè¯•ï¼Œé¦–å…ˆè¦ç¡®ä¿æ˜¯å¯ä»¥ç§‘å­¦ä¸Šç½‘çš„ã€‚ è®¾å¤‡Android è®¾å¤‡ï¼Œå¿…é¡»å®‰è£…äº† Google æœåŠ¡ã€‚ è°·æ­Œè´¦å·ä½œä¸ºç”¨æˆ·ï¼Œä¸éœ€è¦æ‹¥æœ‰æˆ–è€…ç™»å½•ä½ çš„ Google è´¦å·ã€‚ç½‘ç»œå’Œ Google æœåŠ¡æ­£å¸¸å³å¯ã€‚ ä½œä¸ºå¼€å‘è€…ï¼Œå¿…é¡»æ‹¥æœ‰ä¸€ä¸ª Google è´¦å·ã€‚è¦çŸ¥é“ï¼Œè°·æ­Œåœ°å›¾æ˜¯ä¸å¼€æºçš„ï¼Œè¦ä½¿ç”¨ä»–çš„ API ï¼Œå¿…é¡»ç”¨ä½ çš„åŒ…åï¼Œå’Œç¼–è¯‘ Android app çš„ keystore çš„ SHA-1ï¼ŒåŽ»ç”³è¯·App å¯¹åº”çš„ Google Map Keyã€‚èŽ·å– Key çš„æ•™ç¨‹å®˜ç½‘è®²å¾—å¾ˆè¯¦ç»†ï¼Œè¯·çœ‹è¿™é‡Œ Google API Console è®¾ç½®å®ŒæˆåŽï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è®¾ç½®å¥½åŽï¼Œè¿˜è¦ç¡®ä¿å·²ç» Enableäº†å¯¹åº”çš„APIï¼Œä¸ç„¶ä¼šå‡ºçŽ°æ•°æ®è®¿é—®ä¸åˆ°çš„æƒ…å†µã€‚ æŠŠè¿™ä¸ª API key å¡«å…¥ AndroidManifest.xml ï¼š 123&lt;meta-data android:name="com.google.android.geo.API_KEY" android:value="your key" /&gt; Map ç›¸å…³å‰æåˆå§‹åŒ– Google Mapå¸ƒå±€åœ¨ä½ çš„å¸ƒå±€æ–‡ä»¶é‡Œé¢ï¼Œåªéœ€è¦å¦‚ä¸‹æ–¹å¼å£°æ˜Žä¸€ä¸ª Fragmentï¼Œè¿™ä¸ª Fragment æ˜¯å¯ä»¥æ”¾åœ¨ LinearLayout æˆ– RelativeLayout ä¸‹é¢çš„ã€‚ 12345678&lt;fragment android:id="@+id/map" android:layout_width="match_parent" android:layout_height="match_parent" map:uiZoomControls="true" map:uiCompass = "true" class="com.google.android.gms.maps.SupportMapFragment" android:layout_below="@id/layout_btn"/&gt; Activityåœ¨ onCreate çš„æ—¶å€™ï¼Œè¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚ 12345678910private GoogleMap mMap;SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager() .findFragmentById(map);mapFragment.getMapAsync(new OnMapReadyCallback() &#123; @Override public void onMapReady(GoogleMap googleMap) &#123; //åˆå§‹åŒ–å®Œ GoogleMap mMap = googleMap; &#125;&#125;); ç¡®ä¿ GoogleMap å®žä¾‹åŒ–åœ¨ä½¿ç”¨ GoogleMap ç›¸å…³æŽ¥å£å‰ï¼Œå¿…é¡»ç¡®ä¿ GoogleMap å·²ç»å®žä¾‹åŒ–ï¼Œå³å·²ç»åœ¨ onMapReadyå›žè°ƒä¸­èŽ·å–äº† GoogleMapå®žä¾‹ã€‚ å¼€å…³ç±»å®šä½æŒ‰é’®å®šä½åŠŸèƒ½å¿…é¡»èŽ·å–ç”¨æˆ·çš„ä½ç½®æƒé™ï¼Œåˆ¤æ–­æ˜¯éžèŽ·å–äº†ç”¨æˆ·æƒé™ï¼Œæ²¡æœ‰èŽ·å–åˆ™æ‰‹åŠ¨è¯·æ±‚æƒé™ã€‚ 12345678910111213141516171819202122232425262728/** * * æ£€æŸ¥å®šä½æƒé™ï¼Œå¦‚æžœæœªæŽˆæƒåˆ™è¯·æ±‚è¯¥æƒé™ * @return trueï¼šå·²ç»æŽˆæƒï¼› falseï¼šæœªæŽˆæƒ */private boolean checkLocationPermission() &#123; if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) &#123; // Permission to access the location is missing. PermissionUtils.requestPermission(this, LOCATION_PERMISSION_REQUEST_CODE, Manifest.permission.ACCESS_FINE_LOCATION, true); return false; &#125; return true;&#125;public static void requestPermission(FragmentActivity activity, int requestId, String permission, boolean finishActivity) &#123; if (ActivityCompat.shouldShowRequestPermissionRationale(activity, permission)) &#123; // Display a dialog with rationale. PermissionUtils.RationaleDialog.newInstance(requestId, finishActivity) .show(activity.getSupportFragmentManager(), "dialog"); &#125; else &#123; // Location permission has not been granted yet, request it. ActivityCompat.requestPermissions(activity, new String[]&#123;permission&#125;, requestId); &#125;&#125; è¦è®©åœ°å›¾ä¸Šæ˜¾ç¤ºå¼€å…³æŒ‰é’®ï¼Œåªéœ€è¦è®¾ç½®mMap.setMyLocationEnabled(true); ç‚¹å‡»æ­¤æŒ‰é’®ï¼Œåœ°å›¾çš„æ‘„åƒå¤´å°±ä¼šå¼€å§‹ç§»åŠ¨ï¼Œå®šä½åˆ°å½“å‰è®¾å¤‡æ‰€åœ¨ä½ç½®ï¼Œå¦‚æžœè¦èŽ·å–ç‚¹å‡»æ­¤æŒ‰é’®çš„å›žè°ƒï¼Œå¯ä»¥è®¾ç½®ç›‘å¬å™¨ mMap.setOnMyLocationButtonClickListener æ”¾å¤§ï¼ç¼©å°æŒ‰é’®åœ°å›¾çš„æ”¾å¤§ç¼©å°ï¼Œå°±ä»¥æ‘„åƒå¤´ç„¦ç‚¹ï¼ˆåœ°å›¾ä¸­å¿ƒï¼‰è¿›è¡Œç¼©æ”¾ã€‚è¦å‡ºçŽ°è¿™ä¸ªå¼€å…³ï¼Œåªéœ€è¦ 12UiSettings uiSettings = mMap.getUiSettings();uiSettings.setZoomControlsEnabled(true); æŒ‡å—é’ˆæŒ‰é’®12UiSettings uiSettings = mMap.getUiSettings();uiSettings.setCompassEnabled(true); æ‰‹åŠ¿ æ—‹è½¬ 12UiSettings uiSettings = mMap.getUiSettings();uiSettings.setRotateGesturesEnabled(mRotateGesturesEnabled); å¹³ç§» 12UiSettings uiSettings = mMap.getUiSettings();uiSettings.setScrollGesturesEnabled(mScrollGesturesEnabled); è‡ªå®šä¹‰æ ‡æ³¨æ¸…é™¤æ ‡æ³¨1mMap.clear(); æ–°å¢žæ ‡æ³¨å¢žåŠ ä¸€ä¸ªæ ‡æ³¨ï¼Œåªéœ€è¦æŠŠå½“å‰çš„ç»çº¬åº¦ï¼Œå›¾æ ‡ï¼Œæ ‡é¢˜ç­‰ä¿¡æ¯ä¼ å…¥ MarkerOptions ï¼Œä¹‹åŽåœ¨ addMarker åˆ° mapå¯¹è±¡å³å¯ã€‚ 1234567LatLng latLng = new LatLng(latitude, longitude);//æ ‡è®°å½“å‰åæ ‡mMap.addMarker(new MarkerOptions() .position(latLng) .icon(BitmapDescriptorFactory.fromResource(R.drawable.icon_position_small)) .title(getString(R.string.map_camera_center_location))); æ‘„åƒå¤´å½“å‰ä½ç½®123//èŽ·å–å½“å‰æ‘„åƒå¤´ä¸­å¿ƒç‚¹çš„åæ ‡double latitude = mMap.getCameraPosition().target.latitude;double longitude = mMap.getCameraPosition().target.longitude; ç§»åŠ¨ç›¸å…³ç›‘å¬ å¼€å§‹ç›‘å¬ 1234567891011121314151617//æ‘„åƒå¤´å¼€å§‹æ»‘åŠ¨ç›‘å¬mMap.setOnCameraMoveStartedListener(new GoogleMap.OnCameraMoveStartedListener() &#123; @Override public void onCameraMoveStarted(int reason) &#123; if (reason == GoogleMap.OnCameraMoveStartedListener.REASON_GESTURE) &#123; //è¡¨ç¤ºæ‘„åƒå¤´ç§»åŠ¨æ˜¯ä¸ºäº†å“åº”ç”¨æˆ·åœ¨åœ°å›¾ä¸Šåšå‡ºçš„æ‰‹åŠ¿ï¼Œå¦‚å¹³ç§»ã€å€¾æ–œã€é€šè¿‡æåˆæ‰‹æŒ‡è¿›è¡Œç¼©æ”¾æˆ–æ—‹è½¬åœ°å›¾ &#125; else if (reason == GoogleMap.OnCameraMoveStartedListener .REASON_API_ANIMATION) &#123; //è¡¨ç¤º API ç§»åŠ¨æ‘„åƒå¤´æ˜¯ä¸ºäº†å“åº”éžæ‰‹åŠ¿ç”¨æˆ·æ“ä½œï¼Œå¦‚ç‚¹æŒ‰ zoom æŒ‰é’®ã€ç‚¹æŒ‰ My Location æŒ‰é’®æˆ–ç‚¹å‡»æ ‡è®° &#125; else if (reason == GoogleMap.OnCameraMoveStartedListener .REASON_DEVELOPER_ANIMATION) &#123; //è¡¨ç¤ºæ‚¨çš„åº”ç”¨å·²å‘èµ·æ‘„åƒå¤´ç§»åŠ¨ &#125; &#125;&#125; ; å–æ¶ˆ 1234567//æ‘„åƒå¤´ç§»åŠ¨åœæ­¢çŠ¶æ€çš„ç›‘å¬mMap.setOnCameraIdleListener(new GoogleMap.OnCameraIdleListener() &#123; @Override public void onCameraIdle() &#123; &#125;&#125;); åœæ­¢ 1234567//æ‘„åƒå¤´ç§»åŠ¨ä¸­è¢«å–æ¶ˆæ—¶çš„ç›‘å¬mMap.setOnCameraMoveCanceledListener(new GoogleMap.OnCameraMoveCanceledListener() &#123; @Override public void onCameraMoveCanceled() &#123; &#125;&#125;); ç‚¹å‡»ç›‘å¬ç‚¹å‡»123456789//ç‚¹å‡»åœ°å›¾ä¸ŠæŸä¸ªåæ ‡mMap.setOnMapClickListener(new GoogleMap.OnMapClickListener() &#123; @Override public void onMapClick(LatLng latLng) &#123; Toast.makeText(MapActivity.this, getString(R.string.map_click_tip, latLng.latitude, latLng.longitude), Toast.LENGTH_SHORT).show(); &#125;&#125;); é•¿æŒ‰123456789//é•¿æŒ‰åœ°å›¾ä¸ŠæŸä¸ªåæ ‡mMap.setOnMapLongClickListener(new GoogleMap.OnMapLongClickListener() &#123; @Override public void onMapLongClick(LatLng latLng) &#123; Toast.makeText(MapActivity.this, getString(R.string.map_long_click_tip, latLng.latitude, latLng.longitude), Toast.LENGTH_SHORT).show(); &#125;&#125;); ç‚¹å‡»æ™¯ç‚¹123456789//ç‚¹å‡»åœ°å›¾ä¸ŠæŸä¸ªæ™¯ç‚¹mMap.setOnPoiClickListener(new GoogleMap.OnPoiClickListener() &#123; @Override public void onPoiClick(PointOfInterest pointOfInterest) &#123; Toast.makeText(MapActivity.this, getString(R.string.map_place_click_tip, pointOfInterest.name, pointOfInterest.placeId, pointOfInterest.latLng.latitude, pointOfInterest.latLng.longitude), Toast.LENGTH_SHORT).show(); &#125;&#125;); å¿«ç…§å¿«ç…§åˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯ç›´æŽ¥ä¸ç®¡åœ°å›¾æœ‰æ²¡æœ‰åŠ è½½å®Œï¼Œå°±æŠŠå½“å‰çš„åœ°å›¾æˆªå±ï¼Œå¦‚æžœæ­¤æ—¶åœ°å›¾æœªåŠ è½½å®Œï¼Œæˆªå–çš„å›¾ç‰‡ä¼šå‡ºçŽ°æ¨¡ç³Šçš„æƒ…å†µï¼›å¦å¤–ä¸€ç§æ˜¯åˆ¤æ–­åœ°å›¾æ˜¯å¦åœ¨åŠ è½½ä¸­ï¼Œå¦‚æžœæ˜¯ï¼Œåˆ™ç­‰åŠ è½½å®Œæ¯•å†æˆªå›¾ï¼Œå¦‚æžœä¸æ˜¯ï¼Œå°±ç›´æŽ¥æˆªå›¾ã€‚ 123456789101112131415161718192021222324252627//æ˜¯å¦ç­‰å¾…åœ°å›¾åŠ è½½å®Œæ¯•if (mWaitForMapLoaded) &#123; //èŽ·å–åŠ è½½å®Œçš„é«˜æ¸…å›¾ç‰‡ mMap.setOnMapLoadedCallback(new GoogleMap.OnMapLoadedCallback() &#123; @Override public void onMapLoaded() &#123; if (null != mMap) &#123; mMap.snapshot(new GoogleMap.SnapshotReadyCallback() &#123; @Override public void onSnapshotReady(Bitmap bitmap) &#123; //èŽ·å–bitmap &#125; &#125;); &#125; &#125; &#125;);&#125; else &#123; //æœªåŠ è½½å®Œï¼Œå°±æ‰§è¡Œå¿«ç…§åŠŸèƒ½ï¼Œä¼šå¯¼è‡´æˆªå–æ¨¡ç³Šå›¾ç‰‡ mMap.snapshot(new GoogleMap.SnapshotReadyCallback() &#123; @Override public void onSnapshotReady(Bitmap bitmap) &#123; //èŽ·å–bitmap &#125; &#125;);&#125; GoogleApiClientå‰æ åˆå§‹åŒ– GoogleApiClient åœ¨ onCreate çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–æ“ä½œ 123456789101112131415161718192021222324252627282930313233343536373839/** * åˆå§‹åŒ– google client ç”¨äºŽèŽ·å–åœ°ç‚¹ä¿¡æ¯ */private void createGoogleApiClient() &#123; if (mGoogleApiClient == null) &#123; mGoogleApiClient = new GoogleApiClient .Builder(this) .addApi(Places.GEO_DATA_API) .addApi(Places.PLACE_DETECTION_API) .addApi(LocationServices.API) .addConnectionCallbacks(new GoogleApiClient.ConnectionCallbacks() &#123; @Override public void onConnected(@Nullable Bundle bundle) &#123; //è¿žæŽ¥æˆåŠŸ mConnected = true; &#125; @Override public void onConnectionSuspended(int i) &#123; //è¿žæŽ¥æš‚åœ &#125; &#125;) .addOnConnectionFailedListener(new GoogleApiClient.OnConnectionFailedListener() &#123; @Override public void onConnectionFailed(@NonNull ConnectionResult connectionResult) &#123; //è¿žæŽ¥å¤±è´¥ mConnected = false; &#125; &#125;) .enableAutoManage(this, new GoogleApiClient.OnConnectionFailedListener() &#123; @Override public void onConnectionFailed(@NonNull ConnectionResult connectionResult) &#123; //è¿žæŽ¥å¤±è´¥ mConnected = false; &#125; &#125;) .build(); &#125;&#125; åœ¨ onStart() çš„æ—¶å€™è¿žæŽ¥ï¼Œåœ¨ onStop() çš„æ—¶å€™ï¼Œæ–­å¼€è¿žæŽ¥ã€‚ 123456789101112131415@Overrideprotected void onStart() &#123; super.onStart(); if (null != mGoogleApiClient) &#123; mGoogleApiClient.connect(); &#125;&#125;@Overrideprotected void onStop() &#123; super.onStop(); if (null != mGoogleApiClient) &#123; mGoogleApiClient.disconnect(); &#125;&#125; ä½¿ç”¨ä½ç½®ç›¸å…³ API çš„å‰æï¼Œå¿…é¡»ç¡®ä¿ç”¨æˆ·æŽˆäºˆä½ç½®æƒé™ã€‚æ–¹æ³•åŒä¸Šçš„ checkLocationPermission() èŽ·å–å½“å‰å®šä½çš„ç»çº¬åº¦åæ ‡ç§‘æ™® WGS-84 å›½é™…æ ‡å‡†çš„åæ ‡ç³»ï¼Œå›½é™…æ ‡å‡†çš„ GPS è®¾å¤‡å®šä½èŽ·å–çš„å°±æ˜¯è¿™ç§åæ ‡ã€‚ç®€ç§° åœ°çƒåæ ‡ç³»ã€‚ GCJ-02 åœ¨æˆ‘ä»¬å›½å®¶ï¼Œæ®è¯´æ˜¯ä¸ºäº†ä¿å¯†ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ WGS-84 åæ ‡ï¼Œè€Œæ˜¯ä½¿ç”¨ç»è¿‡åŠ å¯†çš„ GCJ-02ï¼Œé«˜å¾·åœ°å›¾ï¼Œè°·æ­Œåœ°å›¾ï¼ˆå›½å†…æ¿å—ï¼‰éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªåæ ‡ç³»ã€‚è¿™ä¸ªå°±æ˜¯ä¿—ç§°çš„ ç«æ˜Ÿåæ ‡ç³»ã€‚ å…¶ä»–åæ ‡ç³» æ¯”å¦‚ç™¾åº¦åœ°å›¾ï¼Œä»–ç”¨çš„æ˜¯ä»–ä»¬å®¶çš„ BD-09 åæ ‡ï¼Œè¿™ä¸ªåªé€‚ç”¨äºŽç™¾åº¦ç›¸å…³äº§å“ã€‚æœç‹—åœ°å›¾ä¹Ÿæœ‰è‡ªå·±çš„åæ ‡ã€‚ æ ¼å¼æ³¨æ„åˆ°è°·æ­Œåœ°å›¾çš„åæ ‡æ˜¯ latitude, longitude æ ¼å¼ï¼Œå³ çº¬åº¦ï¼Œç»åº¦ æ ¼å¼ã€‚å’Œå›½å†…çš„ç™¾åº¦ï¼Œé«˜å¾·åæ ‡å†™æ³•æ˜¯åè¿‡æ¥çš„ã€‚å›½å†…çš„ä¸€èˆ¬æ˜¯ ç»åº¦ï¼Œçº¬åº¦ çš„æ–¹å¼ã€‚ API1234567Location lastLocation = LocationServices.FusedLocationApi.getLastLocation(mGoogleApiClient);if (null != lastLocation) &#123; double latitude = lastLocation.getLatitude(); double longitude = lastLocation.getLongitude();&#125; else &#123; &#125; åˆšå¼€å§‹æˆ‘ä¹Ÿä»¥ä¸ºè¿™ä¹ˆç®€å•å°±å¯ä»¥äº†ï¼Œåœ¨æµ‹è¯•è®¾å¤‡ä¸Šç¡®å®žå¯ä»¥èŽ·å–åˆ°åæ ‡ï¼Œä½†æ˜¯å®žé™…ä¸Šï¼Œå¤§å¤šæ•°æƒ…å†µï¼Œåœ¨ç¬¬ä¸€æ¬¡è¿è¡Œå®šä½çš„æ—¶å€™ï¼ŒèŽ·å–çš„ Location å¯¹è±¡æ˜¯ä¸ºnullã€‚æ‰€ä»¥è¿˜éœ€è¦æ³¨å†Œä½ç½®å˜åŒ–çš„ç›‘å¬ã€‚ç­‰ç›‘å¬åˆ°ä½ç½®ä¿¡æ¯åŽï¼Œç§»é™¤æ­¤ç›‘å¬ï¼Œé˜²æ­¢ä¸æ–­ç›‘å¬å¼•èµ·é«˜è€—ç”µçŽ°è±¡ã€‚è¿™éƒ¨åˆ†ç™¾åº¦åœ°å›¾ç”¨å¾—å¾ˆæ–¹ä¾¿ï¼Œä»–å°è£…å¥½äº†ï¼Œä½†æ˜¯è°·æ­Œåœ°å›¾å°±è¦è‡ªå·±å®žçŽ°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445private long UPDATE_INTERVAL = 10 * 1000; /* 10 secs */private long FASTEST_INTERVAL = 1500; /* 1.5 sec */private final int MAX_TIME = 2; //æœ€å¤šå®šä½æ¬¡æ•°private int time;if (null != lastLocation) &#123; //.....&#125; else &#123; //å¦‚æžœèŽ·å–ä¸åˆ°ä½ç½®ä¿¡æ¯ï¼Œæ³¨å†Œä½ç½®å˜åŒ–ç›‘å¬ regLocationUpdates();&#125;private void regLocationUpdates() &#123; if (!checkLocationPermission()) &#123; showContentText(getString(R.string.cilent_permission_failed)); return; &#125; LocationRequest locationRequest = LocationRequest.create() .setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY) .setInterval(UPDATE_INTERVAL) .setFastestInterval(FASTEST_INTERVAL); LocationServices.FusedLocationApi.requestLocationUpdates(mGoogleApiClient, locationRequest, new LocationListener() &#123; @Override public void onLocationChanged(Location location) &#123; time++; //å¦‚æžœèŽ·å–åˆ°ä½ç½®ä¿¡æ¯ï¼Œåˆ™ç§»é™¤ä½ç½®å˜åŒ–ç›‘å¬ if (null != location) &#123; LocationServices.FusedLocationApi.removeLocationUpdates(mGoogleApiClient, this); //èŽ·å–å®šä½çš„ç»çº¬åº¦ double latitude = location.getLatitude(); double longitude = location.getLongitude(); return; &#125; //å¦‚æžœè¶…è¿‡æœ€å¤§çš„å®šä½æ¬¡æ•°åˆ™åœæ­¢ä½ç½®å˜åŒ–ç›‘å¬ if (time == MAX_TIME) &#123; //ç§»é™¤ä½ç½®å˜åŒ–ç›‘å¬ LocationServices.FusedLocationApi.removeLocationUpdates(mGoogleApiClient, this); //èŽ·å–å½“å‰ä½ç½®å¤±è´¥ &#125; &#125; &#125;);&#125; çŽ°åœ¨ç»ˆäºŽèŽ·å–åˆ°å®šä½åæ ‡äº†ï¼Œç­‰ç­‰ï¼Œå¥½åƒä¸å¤ªå¯¹ï¼Œè¿™ä¸ªåæ ‡å’Œæˆ‘å®žé™…ä½ç½®å¥½åƒæœ‰ä¸å°‘çš„åå·®â€¦..æˆ‘æ‰“å¼€äº† GoogleMap è¿™ä¸ªå®˜æ–¹çš„ APPï¼Œç‚¹å‡»äº†ä»–çš„å®šä½ã€‚è¿™ä¸‹å°±æ‡µé€¼äº†ï¼Œæ€Žä¹ˆå®˜æ–¹çš„è¿™ä¸ªæ˜¯æ²¡é—®é¢˜äº†ï¼Œè¯¯å·®å¾ˆå°â€¦. æˆ‘æ˜Žæ˜Žç”¨çš„æ˜¯ GoogleMap çš„ APIï¼Œä¸ºä»€ä¹ˆå®šä½ä¼šä¸ä¸€æ ·ï¼Ÿ åŽŸå› åœ¨åˆšæ‰çš„åæ ‡ç³»é‡Œé¢ï¼Œè°·æ­Œåœ°å›¾çš„å›½å†…æ¿å—æ˜¯ç”¨ GCJ-02ï¼Œä½†æ˜¯å®šä½ API èŽ·å–çš„åæ ‡æ˜¯å›½é™…æ ‡å‡†åæ ‡ WGS-84ï¼Œæ‰€ä»¥éœ€è¦æŠŠ WGS-84 è½¬åŒ– GCJ-02ã€‚ é‚£è°·æ­Œåœ°å›¾ APP ä¸Šä¸ºä»€ä¹ˆå¯ä»¥å‘¢ï¼Ÿ æˆ‘çŒœæµ‹ï¼Œè°·æ­Œåœ°å›¾åœ¨è®¿é—®ç½‘ç»œçš„æ—¶å€™ï¼Œä¼šè¿›è¡Œä½ç½®åˆ¤æ–­ï¼Œå¦‚æžœæ˜¯å›½å†…åæ ‡ï¼Œå°±è¿›è¡Œè½¬æ¢ï¼Œå›½å¤–åæ ‡å°±ä¸è½¬æ¢ã€‚ WGS-84 è½¬åŒ– GCJ-02 æ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768static double a = 6378245.0;static double ee = 0.00669342162296594323;/** * æŠŠ WGS-84 è½¬æ¢æˆ GCJ-02 * @param wgLoc * @return */public static LatLng transformFromWGSToGCJ(LatLng wgLoc) &#123; //å¦‚æžœåœ¨å›½å¤–ï¼Œåˆ™é»˜è®¤ä¸è¿›è¡Œè½¬æ¢ if (outOfChina(wgLoc.latitude, wgLoc.longitude)) &#123; //return new LatLng(wgLoc.latitude, wgLoc.longitude); return wgLoc; &#125; double dLat = transformLat(wgLoc.longitude - 105.0, wgLoc.latitude - 35.0); double dLon = transformLon(wgLoc.longitude - 105.0, wgLoc.latitude - 35.0); double radLat = wgLoc.latitude / 180.0 * Math.PI; double magic = Math.sin(radLat); magic = 1 - ee * magic * magic; double sqrtMagic = Math.sqrt(magic); dLat = (dLat * 180.0)/ ((a * (1 - ee)) / (magic * sqrtMagic) * Math.PI); dLon = (dLon * 180.0) / (a / sqrtMagic * Math.cos(radLat) * Math.PI); return new LatLng(wgLoc.latitude + dLat, wgLoc.longitude + dLon);&#125;private static double transformLat(double x, double y) &#123; double ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y + 0.2 * Math.sqrt(x &gt; 0 ? x : -x); ret += (20.0 * Math.sin(6.0 * x * Math.PI) + 20.0 * Math.sin(2.0 * x * Math.PI)) * 2.0 / 3.0; ret += (20.0 * Math.sin(y * Math.PI) + 40.0 * Math.sin(y / 3.0 * Math.PI)) * 2.0 / 3.0; ret += (160.0 * Math.sin(y / 12.0 * Math.PI) + 320 * Math.sin(y * Math.PI / 30.0)) * 2.0 / 3.0; return ret;&#125;private static double transformLon(double x, double y) &#123; double ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1 * Math.sqrt(x &gt; 0 ? x : -x); ret += (20.0 * Math.sin(6.0 * x * Math.PI) + 20.0 * Math.sin(2.0 * x * Math.PI)) * 2.0 / 3.0; ret += (20.0 * Math.sin(x * Math.PI) + 40.0 * Math.sin(x / 3.0 * Math.PI)) * 2.0 / 3.0; ret += (150.0 * Math.sin(x / 12.0 * Math.PI) + 300.0 * Math.sin(x / 30.0 * Math.PI)) * 2.0 / 3.0; return ret;&#125;/** * åˆ¤æ–­æ˜¯å¦åœ¨ä¸­å›½ä»¥å¤– * @param lat * @param lon * @return */public static boolean outOfChina(double lat, double lon) &#123; if (lon &lt; 72.004 || lon &gt; 137.8347) return true; if (lat &lt; 0.8293 || lat &gt; 55.8271) return true; return false;&#125; æ ¹æ®ç»çº¬åº¦èŽ·å–é™„è¿‘åœ°ç‚¹é€šè¿‡ç»çº¬åº¦èŽ·å–å¯¹åº”çš„åœ°ç†ä½ç½®ä¿¡æ¯ï¼Œè¿™ä¸ªå«åšååœ°ç†ç¼–ç è¯·æ±‚ï¼Œä»¥å‰ç™¾åº¦åœ°å›¾æœ‰ä¸ª API mGeoCoder.reverseGeoCode(mReverseGeoCodeOption);å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼ŒGoogleåœ°å›¾ä¹Ÿæœ‰ç±»ä¼¼çš„ï¼Œåªä¸è¿‡åœ¨æˆ‘ä½¿ç”¨è¿‡ç¨‹ä¸­å­˜åœ¨ bugã€‚ å¿ƒæ€¥æƒ³é©¬ä¸Šèƒ½ç”¨çš„ï¼Œå¯ä»¥è‡ªå·±è°ƒåˆ° Web API ä¸­çš„ ã€æ ¹æ®ç»çº¬åº¦èŽ·å–é™„è¿‘åœ°ç‚¹ã€‘ç« èŠ‚ã€‚ æ­¤å¤„å­˜åœ¨çš„é—®é¢˜ï¼šå¦‚æžœåæ ‡åˆ‡æ¢ä¸ºå›½å¤–ï¼Œå°±ä¼šé€ æˆèŽ·å–æ•°æ®ä¸ºnullã€‚å³ä½¿ä¿®æ”¹åœ°åŒº mGeocoder = new Geocoder(this, Locale.JAPAN) ä¹Ÿæ— æ•ˆã€‚ åˆå§‹åŒ– Geocoder 123mGeocoder = new Geocoder(this, Locale.getDefault());//è®¾ç½®åŒºåŸŸ//mGeocoder = new Geocoder(this, Locale.JAPAN); åœ¨å­çº¿ç¨‹èŽ·å–æ•°æ® 1234567891011121314List&lt;Address&gt; addressList = mGeocoder.getFromLocation(latitude, longitude, maxResult);if (null != addressList &amp;&amp; addressList.size() &gt; 0) &#123; //éåŽ†èŽ·å–é™„è¿‘åœ°ç‚¹ä¿¡æ¯ for (Address address : addressList) &#123; //çœ String adminArea = address.getAdminArea(); //å¸‚ String city = address.getLocality(); //åœ°å€ String feature = address.getFeatureName(); &#125; &#125; else &#123; //èŽ·å–é™„è¿‘åœ°ç‚¹å¤±è´¥&#125; startActivityæ–¹å¼åœ°ç‚¹æœç´¢ æ‰“å¼€ Activity private static final int REQUEST_CODE_AUTOCOMPLETE = 2; 123456789101112131415161718/** * æ‰“å¼€æœç´¢çš„ Activity */private void openAutocompleteActivity() &#123; try &#123; // MODE_FULLSCREEN å…¨å±æ–¹å¼å¯åŠ¨ä¸€ä¸ª Activity // MODE_OVERLAY å¯åŠ¨æµ®åœ¨ç•Œé¢ä¸Šçš„æŽ§ä»¶ Intent intent = new PlaceAutocomplete.IntentBuilder(PlaceAutocomplete.MODE_OVERLAY) .build(this); startActivityForResult(intent, REQUEST_CODE_AUTOCOMPLETE); &#125; catch (GooglePlayServicesRepairableException e) &#123; GoogleApiAvailability.getInstance().getErrorDialog(this, e.getConnectionStatusCode(), 0).show(); &#125; catch (GooglePlayServicesNotAvailableException e) &#123; String message = "Google Play Services is not available: " + GoogleApiAvailability.getInstance().getErrorString(e.errorCode); Toast.makeText(this, message, Toast.LENGTH_SHORT).show(); &#125;&#125; åœ¨ onActivityResult å›žè°ƒä¸­èŽ·å–æœç´¢çš„åœ°ç‚¹ä¿¡æ¯ 123456789101112131415161718192021222324252627@Override protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; if (requestCode == REQUEST_CODE_AUTOCOMPLETE) &#123; if (resultCode == RESULT_OK) &#123; Place place = PlaceAutocomplete.getPlace(this, data); String placeText = null; if (null != place) &#123; placeText = "place.getId() = " + place.getId() + "\nplace.getName() = " + place.getName() + "\nplace.getLatLng().latitude = " + place.getLatLng().latitude + "\nplace.getLatLng().longitude = " + place.getLatLng().longitude + "\nplace.getAddress() = " +place.getAddress() + "\nplace.getPhoneNumber() = " + place.getPhoneNumber() + "\nplace.getLocale() = " + place.getLocale() + "\n......."; &#125; Toast.makeText(this, getString(R.string.start_by_activity_btn_search_place_result, placeText), Toast.LENGTH_LONG).show(); &#125; else if (resultCode == PlaceAutocomplete.RESULT_ERROR) &#123; //é”™è¯¯ç  Status status = PlaceAutocomplete.getStatus(this, data); &#125; else if (resultCode == RESULT_CANCELED) &#123; //å–æ¶ˆ &#125; &#125; &#125; å¯¼èˆª123456789101112131415161718192021222324252627/** * å¼€å¯å¯¼èˆª * @param latitude * @param longitude */private void startNavigation(double latitude, double longitude) &#123; try &#123; Uri gmmIntentUri = Uri.parse("google.navigation:q="+latitude+","+longitude+"&amp;mode=d"); Intent mapIntent = new Intent(Intent.ACTION_VIEW, gmmIntentUri); mapIntent.setPackage("com.google.android.apps.maps"); startActivity(mapIntent); &#125; catch (Exception e) &#123; //æç¤ºæœªå®‰è£…google map //å¼€å¯google mapä¸‹è½½ç•Œé¢ showGoogleMapDownloadView(); &#125;&#125;/** * å¼€å¯google mapä¸‹è½½ç•Œé¢ */private void showGoogleMapDownloadView() &#123; Uri uri = Uri.parse("market://details?id=com.google.android.apps.maps"); Intent intent = new Intent(Intent.ACTION_VIEW, uri); this.startActivity(intent);&#125; é™„è¿‘åœ°ç‚¹ èŽ·å–å®šä½æƒé™ èŽ·å–æ–¹æ³•å’Œå‰é¢ä¸€æ ·ï¼Œä½¿ç”¨ checkLocationPermission() æ‰“å¼€ Activityï¼Œå¼€å¯é™„è¿‘åœ°ç‚¹é€‰æ‹© private static final int PLACE_PICKER_REQUEST = 3; 12345678PlacePicker.IntentBuilder builder = new PlacePicker.IntentBuilder();try &#123; startActivityForResult(builder.build(this), PLACE_PICKER_REQUEST);&#125; catch (GooglePlayServicesRepairableException e) &#123; e.printStackTrace();&#125; catch (GooglePlayServicesNotAvailableException e) &#123; e.printStackTrace();&#125; åœ¨ onActivityResult èŽ·å–é€‰æ‹©çš„åœ°ç‚¹ä¿¡æ¯ 123456789@Overrideprotected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; if (requestCode == PLACE_PICKER_REQUEST) &#123; if (resultCode == RESULT_OK) &#123; Place place = PlacePicker.getPlace(this, data); //place.getName() .... &#125; &#125;&#125; Placeså½“å‰ä½ç½®åŠé™„è¿‘åœ°ç‚¹API12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152private final int mMaxEntries = 5;/** * èŽ·å–å½“å‰ä½ç½®åŠé™„è¿‘åœ°ç‚¹ */private void getCurrentPlaces()&#123; if (!mConnected) &#123; return; &#125; if (!checkLocationPermission()) &#123; //æœªæŽˆæƒå®šä½ return; &#125; PendingResult&lt;PlaceLikelihoodBuffer&gt; result = Places.PlaceDetectionApi .getCurrentPlace(mGoogleApiClient, null); result.setResultCallback(new ResultCallback&lt;PlaceLikelihoodBuffer&gt;() &#123; @Override public void onResult(@NonNull PlaceLikelihoodBuffer likelyPlaces) &#123; int i = 0; String[] likelyPlaceNames = new String[mMaxEntries]; String[] likelyPlaceAddresses = new String[mMaxEntries]; String[] likelyPlaceAttributions = new String[mMaxEntries]; LatLng[] likelyPlaceLatLngs = new LatLng[mMaxEntries]; for (PlaceLikelihood placeLikelihood : likelyPlaces) &#123; // Build a list of likely places to show the user. Max 5. likelyPlaceNames[i] = (String) placeLikelihood.getPlace().getName(); likelyPlaceAddresses[i] = (String) placeLikelihood.getPlace().getAddress(); likelyPlaceAttributions[i] = (String) placeLikelihood.getPlace() .getAttributions(); likelyPlaceLatLngs[i] = placeLikelihood.getPlace().getLatLng(); i++; //String placeId = (String) placeLikelihood.getPlace().getId(); if (i &gt; (mMaxEntries - 1)) &#123; break; &#125; &#125; likelyPlaces.release(); StringBuilder builder = new StringBuilder(); for (String placeName : likelyPlaceNames) &#123; builder.append(placeName + "\n"); &#125; //æ˜¾ç¤ºåœ°ç‚¹åˆ—è¡¨ //builder.toString() &#125; &#125;);&#125; æ ¹æ® PlaceID èŽ·å–å¯¹åº”åœ°ç‚¹åœ¨ onResult è¿”å›žçš„ places ä¸€èˆ¬åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå°±æ˜¯ id å¯¹åº”çš„åœ°ç‚¹ä¿¡æ¯ã€‚ 1234567891011121314151617181920212223/** * é€šè¿‡placeIdèŽ·å–å¯¹åº”çš„ä½ç½®ä¿¡æ¯ * @param placeId */private void getPlaceById(String placeId)&#123; if (TextUtils.isEmpty(placeId)) &#123; return; &#125; Places.GeoDataApi.getPlaceById(mGoogleApiClient, placeId) .setResultCallback(new ResultCallback&lt;PlaceBuffer&gt;() &#123; @Override public void onResult(PlaceBuffer places) &#123; if (places.getStatus().isSuccess() &amp;&amp; places.getCount() &gt; 0) &#123; Place myPlace = places.get(0); //èŽ·å–idå¯¹åº”çš„Place &#125; else &#123; //æ²¡æœ‰èŽ·å–åˆ°æ•°æ® &#125; places.release(); &#125; &#125;);&#125; Web APIè¿™é‡Œè¯´çš„ Web API æ˜¯æŒ‡ï¼šé€šè¿‡æ‹¼æŽ¥ url çš„æ–¹å¼ï¼Œå‘ Google æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›žä¸€æ®µ JSONï¼Œæˆ‘ä»¬æœ¬åœ°å†ç”¨ fastjson è§£æžï¼ŒèŽ·å–å¯¹åº”çš„æ•°æ®ã€‚ æ ¹æ®åæ ‡èŽ·å–æ‰€åœ¨åŸŽå¸‚è¿™é‡Œçš„ URL å¯ä»¥è¿™æ ·æ‹¼æŽ¥ 1private static final String GOOGLE_MAP_URL = "https://maps.google.com/maps/api/geocode/json?language=%1$s&amp;sensor=true&amp;latlng=%2$s,%3$s"; å…¶ä¸­ %1$s å¯¹åº”çš„æ˜¯è¯­è¨€ï¼Œæ¯”å¦‚æˆ‘è¦è¿”å›žçš„æ˜¯ä¸­æ–‡ï¼Œé‚£ä¹ˆå¯¹äºŽçš„å°±æ˜¯ zh-CN*ï¼Œ%2$s %3$s* å¯¹åº”çš„å°±æ˜¯çº¬åº¦å’Œç»åº¦ã€‚ 12345678910private static final String DEFAULT_LANGUAGE = "zh-CN";/** * æ‹¼æŽ¥url(é»˜è®¤è®¾ç½®è¯­è¨€ä¸ºä¸­æ–‡) * * @param latitude * @param longitude */public static String getGoogleMapUrl(double latitude, double longitude) &#123; return String.format(GOOGLE_MAP_URL, DEFAULT_LANGUAGE, Double.valueOf(latitude), Double.valueOf(longitude));&#125; è¿™æ ·ï¼Œå¤–é¢åªéœ€è¦ç›´æŽ¥è°ƒè¿™ä¸ªæ–¹æ³•ï¼Œå‚æ•°ä¼ å…¥çº¬åº¦ã€ç»åº¦ï¼Œå°±ä¼šè¿”å›žæ‹¼æŽ¥å¥½çš„ URLã€‚ èŽ·å–äº† URLï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼‚æ­¥è®¿é—®ç½‘ç»œï¼ŒåŽ»èŽ·å–æ•°æ®äº†ã€‚è¿™é‡Œä¸»è¦è®²ä¸‹æ€è·¯ï¼Œè¯¦ç»†ä»£ç ï¼Œå¯ä»¥è‡ªå·±æŸ¥çœ‹ Demoã€‚ ä»¥Demoä¸ºä¾‹ï¼Œæ‹¼æŽ¥çš„URLä¸ºï¼š 1https://maps.google.com/maps/api/geocode/json?language=zh-CN&amp;sensor=true&amp;latlng=22.536817569098282,113.97451490163802 èŽ·å–çš„ JSON å¦‚ä¸‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556&#123; "results": [ &#123; "address_components": [ &#123; "long_name": "9028", "short_name": "9028", "types": [ "street_number" ] &#125;, &#123; "long_name": "æ·±å—å¤§é“", "short_name": "æ·±å—å¤§é“", "types": [ "route" ] &#125;, &#123; "long_name": "åŽä¾¨åŸŽ", "short_name": "åŽä¾¨åŸŽ", "types": [ "neighborhood", "political" ] &#125;, &#123; "long_name": "å—å±±åŒº", "short_name": "å—å±±åŒº", "types": [ "political", "sublocality", "sublocality_level_1" ] &#125;, &#123; "long_name": "æ·±åœ³å¸‚", "short_name": "æ·±åœ³å¸‚", "types": [ "locality", "political" ] &#125;, &#123; "long_name": "å¹¿ä¸œçœ", "short_name": "å¹¿ä¸œçœ", "types": [ "administrative_area_level_1", "political" ] &#125;, /** * ç¯‡å¹…åŽŸå› ï¼Œçœç•¥å…¶ä½™æ•°æ® */ "status": "OK"&#125; å…¶ä¸­ type å¯¹åº”çš„å€¼æ˜¯ locality çš„å°±æ˜¯åŸŽå¸‚åå­—ï¼Œpolitical ä»£è¡¨æ”¿æ²»å®žä½“ã€‚ å…³é”®ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/** * æ ¹æ®ç»çº¬åº¦èŽ·å–å¯¹åº”çš„åŸŽå¸‚ * @param latitude * @param longitude */private void getCityByLatlngWeb(double latitude, double longitude) &#123; String urlString = GoogleMapUrlUtil.getGoogleMapUrl(latitude, longitude); if (URLUtil.isNetworkUrl(urlString)) &#123; new GeocodeTask().execute(urlString); &#125;&#125;class GeocodeTask extends AsyncTask&lt;String, Void, JSONObject&gt; &#123; @Override protected void onPreExecute() &#123; &#125; @Override protected com.alibaba.fastjson.JSONObject doInBackground(String... params) &#123; //è¯·æ±‚ç½‘ç»œï¼Œå¹¶ä¸”è½¬åŒ–ä¸º JSONObject å¯¹è±¡ return GoogleMapUrlUtil.returnResult(HttpUtils.doGet(params[0])); &#125; @Override protected void onPostExecute(com.alibaba.fastjson.JSONObject result) &#123; if (null != result) &#123; JSONArray jsonArray = result.getJSONArray("results"); if (null != jsonArray) &#123; Object firstObj = jsonArray.get(0); if (null != firstObj) &#123; GeocodeBean bean = JSON.parseObject(firstObj.toString(), GeocodeBean.class); //èŽ·å–æ‰€åœ¨åŸŽå¸‚ String city = getLocality(bean); &#125; &#125; &#125; &#125;&#125;public class GeocodeBean &#123; private List&lt;AddressComponent&gt; address_components; private String formatted_address; //geometry private String place_id; private List&lt;String&gt; types; //set, get æ–¹æ³•è‡ªå·±è¡¥å……å“ˆ&#125;/** * ä»Žæ•°æ®é›†é‡Œé¢èŽ·å–æ‰€åœ¨åŸŽå¸‚ * @param bean * @return */private String getLocality(GeocodeBean bean) &#123; boolean isFound = false; if (null != bean) &#123; List&lt;AddressComponent&gt; list = bean.getAddress_components(); if (null != list) &#123; for (AddressComponent address : list) &#123; List&lt;String&gt; types = address.getTypes(); for (String type : types) &#123; if ("locality".equals(type)) &#123; isFound = true; break; &#125; &#125; if (isFound) &#123; return address.getShort_name(); &#125; &#125; &#125; &#125; return null;&#125; æ ¹æ®ç»çº¬åº¦èŽ·å–é™„è¿‘åœ°ç‚¹å‰é¢èŽ·å–å¯¹åº”åŸŽå¸‚ä¸­ç”¨çš„ URL å¾ˆæ–¹ä¾¿ï¼ŒåŸºæœ¬ä¸Šæ²¡æœ‰é™åˆ¶ã€‚ä½†æ˜¯èŽ·å–é™„è¿‘åœ°ç‚¹çš„å°±æ²¡è¿™ä¹ˆå¥½äº†ï¼Œåœ¨æ‹¼æŽ¥ URL çš„æ—¶å€™ï¼Œéœ€è¦åŠ ä¸Šè°·æ­ŒæŽˆæƒç»™ä½ çš„ Web API keyã€‚è¿™ä¸ªæ˜¯å®˜æ–¹æŽ¨èçš„åšæ³•ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹å®˜ç½‘çš„ä»‹ç» ç‰¹åˆ«æ³¨æ„è¿™é‡Œæœ‰ä¸€ç‚¹è¦ç‰¹åˆ«æ³¨æ„çš„ï¼Œè¿™é‡Œè¯´çš„ Web API key å¿…é¡»è¦é‡æ–°ç”³è¯·çš„ã€‚ä¹‹å‰æˆ‘ä»¬ä½¿ç”¨ GoogleMap çš„æ—¶å€™å·²ç»ç”³è¯·äº† KEYï¼Œä½†æ˜¯é€‰é¡¹é€‰æ‹©çš„æ˜¯ã€Android appsã€‘ï¼Œåªæ˜¯ä½œç”¨äºŽ Android Map ç›¸å…³ APIï¼Œè¿™ä¸ªæ—¶å€™è®¿é—® Web API å¿…é¡»é‡æ–°ç”³è¯·å¤šä¸€ä¸ª KEYã€‚ç”³è¯·æ–¹æ³•å’Œå‰é¢ä¸€æ ·ï¼Œåªæ˜¯é€‰é¡¹ä¸ºã€Noneã€‘å³å¯ã€‚ è®¾ç½®å®Œä¹‹åŽå¦‚æžœä¸€èˆ¬é—´éš”å‡ åˆ†é’Ÿå°±å¯ä»¥è°ƒç”¨ï¼Œå¦‚æžœä¸è¡Œï¼Œå°±è¦æ‰‹åŠ¨å¼€å¯æœåŠ¡ã€‚ç‚¹å‡»æ­¤å¤„å¼€å¯,é€‰æ‹©å¯¹åº”çš„é¡¹ç›®ï¼Œã€å¯ç”¨ã€‘ Google Places API Web Service æœåŠ¡ã€‚ 1private static final String GOOGLE_MAP_PLACES_URL = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?language=%1$s&amp;location=%2$s,%3$s&amp;radius=%4$s&amp;type=%5$s&amp;key=%6$s"; è¿™ä¸‹å‚æ•°æœ‰ç‚¹å¤šäº†å“ˆï¼Œå‰é¢3ä¸ªå’Œä¹‹å‰ä¸€æ ·ï¼Œåˆ†åˆ«å¯¹åº”è¯­è¨€ã€çº¬åº¦ã€ç»åº¦ã€‚ç¬¬å››ä¸ªå‚æ•°æ˜¯æŸ¥è¯¢åœ°ç‚¹çš„åŠå¾„å¤šå¤§ï¼Œç¬¬äº”ä¸ªæ˜¯ç±»åž‹ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ point_of_interest æ„æ€æ˜¯å·²ç»å‘½åçš„æ™¯ç‚¹ï¼Œå…¶ä»–ç±»åž‹å¯ä»¥æŸ¥çœ‹å®˜ç½‘ï¼Œæœ€åŽä¸€ä¸ªå‚æ•°æ˜¯ä½ çš„ APP ç”³è¯·çš„ Keyå€¼ã€‚ å…³é”®ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * èŽ·å–ç»çº¬åº¦å¯¹åº”çš„é™„è¿‘åœ°ç‚¹ * @param latitude * @param longitude */private void getPlacesByLatLngWeb(double latitude, double longitude) &#123; String url = GoogleMapUrlUtil.getGoogleMapPlacesUrl(latitude, longitude); if (URLUtil.isNetworkUrl(url)) &#123; new NearbyPlacesTask().execute(url); &#125;&#125;class NearbyPlacesTask extends AsyncTask&lt;String, Void, JSONObject&gt; &#123; @Override protected JSONObject doInBackground(String... params) &#123; return GoogleMapUrlUtil.returnResult(HttpUtils.doGet(params[0])); &#125; @Override protected void onPostExecute(JSONObject result) &#123; if (null != result) &#123; JSONArray jsonArray = result.getJSONArray("results"); if (null != jsonArray) &#123; List&lt;NearbyPlaceBean&gt; list = JSON.parseArray(jsonArray.toString(), NearbyPlaceBean.class); //éåŽ† list å¯ä»¥èŽ·å–å¯¹åº”çš„é™„è¿‘åœ°ç‚¹ä¿¡æ¯ //listçš„sizeèƒ½æ¯”è¾ƒå¤§ï¼Œå¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚ï¼ŒæŒ‡æˆªå–å‰é¢10ä¸ªã€‚ &#125; &#125; &#125;&#125;public class NearbyPlaceBean &#123; //geometry //icon private String id; //1f7541b5f729cdc8bc8bb546f205848c50315af7 private String name; //æ¾ŽæŸç™½é‡‘å‡æ—¥å…¬å¯“ //photos private String place_id; //ChIJX9_kRAXsAzQRKmc97njB67c //reference //scope //types private String vicinity; //æ·±åœ³å¸‚å®å®‰åŒº private GeometryBean geometry; //setï¼Œget è‡ªå·±è¡¥å……å“ˆ&#125; å®žæˆ˜ï¼šé™„è¿‘åœ°ç‚¹æŽ¨èå¯ä»¥åƒä¸Šé¢é‚£æ ·ä½¿ç”¨ Activity çš„æ–¹å¼ï¼Œå¼¹å‡º Google è‡ªå¸¦çš„åœ°ç‚¹æŽ¨èï¼é€‰å–ç•Œé¢ï¼Œä½†æ˜¯è¿™æ ·çš„UIå®šåˆ¶æ€§ä½Žï¼Œä¸èƒ½æŒ‰ç…§é¡¹ç›®éœ€æ±‚æ˜¾ç¤ºç•Œé¢ã€‚æ‰€ä»¥æ ¹æ®ä¸Šé¢å­¦ä¹ åˆ°çš„ä¸œè¥¿ï¼Œæˆ‘é‡æ–°å†™äº†ä¸ªç±»ä¼¼çš„ç•Œé¢ï¼Œå®žçŽ°åœ°ç‚¹æŽ¨èã€æœç´¢ã€é€‰æ‹©å’Œæˆªå›¾åŠŸèƒ½çš„åŠŸèƒ½ã€‚è€ƒè™‘åˆ°é¢‘ç¹è°ƒæŽ¥å£ä¼šæŸè€—è¯·æ±‚æ¬¡æ•°ï¼Œæ‰€ä»¥æˆ‘è®¾ç½®äº†ä¸ªåŠå¾„ï¼Œè¶…è¿‡åŠå¾„çš„æ‰é‡æ–°è¯·æ±‚æ•°æ®ã€‚ é™åˆ¶ï¼æ”¶è´¹å‰é¢æˆ‘æŠŠç±»åž‹åˆ†ä¸º Mapï¼ŒPlacesä¸»è¦åŽŸå› å°±æ˜¯ï¼Œä»–ä»¬çš„æ”¶è´¹æ ‡å‡†æ˜¯ä¸åŒçš„ã€‚è¯¦æƒ…å¯è§ Android æ ‡å‡†æ–¹æ¡ˆ é«˜çº§ Google Maps Android API ä¸å—é™åˆ¶åœ°å…è´¹ä½¿ç”¨ã€‚1 å®šä»·åŸºäºŽæ‰€éœ€æ•°é‡ã€‚å¦‚éœ€äº†è§£è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…Premium Planä½¿ç”¨çŽ‡å’Œé™åˆ¶ã€‚ Google Places API for Android é»˜è®¤æ¯å¤© 1,000 æ¬¡å…è´¹è¯·æ±‚ï¼Œä¿¡ç”¨å¡éªŒè¯åŽå¯å¢žè‡³æ¯å¤© 150,000 æ¬¡å…è´¹è¯·æ±‚ã€‚ç¬¦åˆè¦æ±‚çš„åº”ç”¨å¯å…è´¹æå‡ã€‚è¯¦æƒ… â€”- Web æœåŠ¡ æ ‡å‡† é«˜çº§ Google Places API Web Service æ¯å¤© 150,000 æ¬¡å…è´¹è¯·æ±‚ï¼ˆä¿¡ç”¨å¡éªŒè¯åŽï¼‰ã€‚ å®šä»·åŸºäºŽæ‰€éœ€æ•°é‡ã€‚å¦‚éœ€äº†è§£è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…Premium Planä½¿ç”¨çŽ‡å’Œé™åˆ¶ã€‚ å­¦ä¹ èµ„æ–™å®˜æ–¹ Demoå®˜æ–¹ Demo è¦è·‘èµ·æ¥ï¼Œå¿…é¡»åƒå‰é¢çš„æ–¹å¼ä¸€æ ·ï¼ŒåŽ»ç”³è¯·å¯¹åº”çš„ Keyã€‚ android-samples-apiDemosä»‹ç» Map ç›¸å…³ APIã€‚ android-play-placesä»‹ç» Places ç›¸å…³ API ã€‚åŒ…æ‹¬åœ°ç‚¹æœç´¢ï¼Œé™„è¿‘åœ°ç‚¹é€‰æ‹©ï¼Œåœ°ç‚¹è¡¥å…¨ç­‰ã€‚ android-maps-utilsç‚¹èšåˆ Clustering å¯ä»¥é€šè¿‡è¿™ä¸ª demo å­¦ä¹ ï¼ŒGoogleMapçš„ç‚¹èšåˆå’Œç™¾åº¦æ˜¯ä¸€æ ·çš„ç”¨æ³•ï¼Œå¤–å±‚ä»£ç åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ã€‚ å·¥å…·ç±»ç½‘é¡µ API Console ï¼ˆKey ç®¡ç†æŽ§åˆ¶å°ï¼‰ Google Map API æŸ¥è¯¢ åæ ‡åæŸ¥ (é€šè¿‡ç»çº¬åº¦æŸ¥å¯¹åº”åœ°ç‚¹)GoogleMap(è°·æ­Œåœ°å›¾ç›´æŽ¥æŠŠç»çº¬åº¦è¾“å…¥è¾“å…¥æ¡†å³å¯æŸ¥è¯¢ï¼Œä¾‹å¦‚è¾“å…¥ï¼š22.536817569098282,113.97451490163802 )é«˜å¾·åœ°å›¾ç™¾åº¦åœ°å›¾ ç›¸å…³å‚è€ƒ[1]å®˜æ–¹ Map æ•™ç¨‹ https://developers.google.com/maps/documentation/android-api/[2]å®˜æ–¹ Places æ•™ç¨‹ https://developers.google.com/places/android-api/[3]å¯åŠ¨ GoogleMap https://developers.google.com/maps/documentation/android-api/intents[4]Androidä½¿ç”¨intentè°ƒå–å¯¼èˆªæˆ–è€…åœ°å›¾ https://blog.csdn.net/qwer4755552/article/details/51659833[5]å…³äºŽåœ°å›¾å’Œåç§»çš„é‚£äº›äº‹ https://blog.csdn.net/sanjay_f/article/details/48493699[6]åœ°å›¾åæ ‡è½¬æ¢å¤§å…¨ http://www.eoeandroid.com/forum.php?mod=viewthread&amp;tid=332419[7]Show Popup when Location access is disable by user (Andorid Google Maps) https://stackoverflow.com/questions/24160472/show-popup-when-location-access-is-disable-by-user-andorid-google-maps[8]How to show enable location dialog like Google maps? https://stackoverflow.com/questions/29801368/how-to-show-enable-location-dialog-like-google-maps]]></content>
      <categories>
        <category>Android</category>
        <category>Map</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Map</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœ€æ–°Androidæ¡†æž¶æŽ’è¡Œæ¦œï¼Œä¸Šç™¾é¡¹èµ„æºæ±‡æ€»ä¸å®¹é”™è¿‡]]></title>
    <url>%2Fposts%2Fb0de6447.html</url>
    <content type="text"><![CDATA[Androidæ¡†æž¶æŽ’è¡Œæ¦œ1.Retrofit ä¸€å¥è¯ä»‹ç»ï¼šRetrofitæ˜¯ä¸€æ¬¾ç±»åž‹å®‰å…¨çš„ç½‘ç»œæ¡†æž¶ï¼ŒåŸºäºŽHTTPåè®®ï¼ŒæœåŠ¡äºŽAndroidå’Œjavaè¯­è¨€ ä¸Šæ¦œç†ç”±ï¼šRetrofitä»¥21.8kçš„starsé‡é›„è¸žgithubä¸­androidå­æ ‡é¢˜æ¦œé¦–ï¼Œç¬¬ä¸€å½“ä¹‹æ— æ„§ã€‚ å®˜ç½‘åœ°å€ï¼šhttp://square.github.io/retrofit/ githubï¼šhttps://github.com/square/retrofit ä½œè€…ï¼šsquareå›¢é˜Ÿ ä½¿ç”¨ï¼š1compile &apos;com.squareup.retrofit2:retrofit:2.3.0&apos; 2.okhttp ä¸€å¥è¯ä»‹ç»ï¼šokhttpæ˜¯ä¸€æ¬¾åŸºäºŽHTTPå’ŒHTTP2.0åè®®çš„ç½‘ç»œæ¡†æž¶ï¼ŒæœåŠ¡äºŽjavaå’Œandroidå®¢æˆ·ç«¯ ä¸Šæ¦œç†ç”±ï¼Œokhttpä»¥20.4kçš„starsé‡é›„è¸žgithubä¸­androidå­æ ‡é¢˜ç¬¬äºŒåã€‚å¤§åž‹å…¬å¸æ¯”å¦‚æ·˜å®ä¹Ÿå°è£…çš„æ˜¯okhttpã€‚Retrofit2.0å¼€å§‹å†…ç½®okhttpæ¡†æž¶ï¼ŒRetrofitä¸“æ³¨å°è£…æŽ¥å£å®Œæˆä¸šåŠ¡éœ€æ±‚ï¼Œokhttpä¸“æ³¨ç½‘ç»œè¯·æ±‚çš„å®‰å…¨é«˜æ•ˆï¼Œç¬”è€…å°†ä¸¤è€…åŒºåˆ†å¼€ï¼Œæ˜¯æƒ³è®©åŽæ¥å­¦ä¹ è€…çŸ¥é“ï¼Œè¿™æ˜¯ä¸¤å¥—æ¡†æž¶ï¼Œå­¦ä¹ æ¡†æž¶åŽŸç†æ—¶å¯ä»¥åˆ†å¼€å­¦ä¹ ï¼Œä»¥å…ç†è§£æ··ä¹±ã€‚ å®˜ç½‘åœ°å€ï¼šhttp://square.github.io/okhttp/ githubï¼šhttps://github.com/square/okhttp ä½œè€…ï¼šsquareå›¢é˜Ÿ ä½¿ç”¨ï¼š1compile &apos;com.squareup.okhttp3:okhttp:3.9.1&apos; 3.Butter Knife ä¸€å¥è¯ä»‹ç»ï¼šButter Knifeæ‰€æä¾›äº†ä¸€ç§èƒ½åŠ›â€”â€”ä½¿ç”¨æ³¨è§£ç”Ÿæˆæ¨¡æ¿ä»£ç ï¼Œå°†viewä¸Žæ–¹æ³•å’Œå‚æ•°ç»‘å®šã€‚ ä¸Šæ¦œç†ç”±ï¼šgithubä¸Š16.5Kä¸ªstarï¼Œé…åˆAndroidstudioæä¾›çš„Butter Knifeæ’ä»¶ï¼Œå¸®åŠ©å¼€å‘è€…çœå´äº†é¢‘ç¹findviewbyidçš„çƒ¦æ¼ï¼Œæœ€æ–°çš„Butter Knifeè¿˜æä¾›äº†onclickç»‘å®šä»¥åŠå­—ç¬¦ä¸²çš„åˆå§‹åŒ–ï¼Œåˆå­¦è€…å¯ä»¥æŸ¥é˜…Butter Knifeä»¥åŠButter Knifeæ’ä»¶è¿›ä¸€æ­¥å­¦ä¹ ï¼ å®˜ç½‘åœ°å€ï¼šhttp://jakewharton.github.io/butterknife/ githubï¼šhttps://github.com/JakeWharton/butterknife ä½œè€…ï¼šJakeWharton ï¼Œä¹Ÿæ˜¯squareå›¢é˜Ÿæˆå‘˜ä¹‹ä¸€ ä½¿ç”¨ï¼š1234dependencies &#123; compile &apos;com.jakewharton:butterknife:8.8.1&apos; annotationProcessor &apos;com.jakewharton:butterknife-compiler:8.8.1&apos;&#125; 4.MPAndroidChart ä¸€å¥è¯ä»‹ç»ï¼šMPAndroidChartæ˜¯ä¸€æ¬¾å›¾è¡¨æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šgithubä¸Š16.1Kä¸ªstarï¼Œä»¥å¿«é€Ÿã€ç®€æ´ã€‚å¼ºå¤§è‘—ç§°çš„å›¾è¡¨æ¡†æž¶ å®˜ç½‘åœ°å€ï¼šhttps://github.com/PhilJay/MPAndroidChart githubï¼šhttps://github.com/PhilJay/MPAndroidChart ä½œè€…ï¼šPhilJay ä½¿ç”¨ï¼šåœ¨ASä¸­åŠ å…¥Gradleä¾èµ– åœ¨æ ¹ç›®å½•çš„ build.gradleä¸ŠåŠ å…¥: 12345allprojects &#123; repositories &#123; maven &#123; url &quot;https://jitpack.io&quot; &#125; &#125;&#125; åœ¨appçš„build.gradleä¸ŠåŠ å…¥ï¼š 123dependencies &#123; compile &apos;com.github.PhilJay:MPAndroidChart:v3.0.3&apos;&#125; 5.glide ä¸€å¥è¯ä»‹ç»ï¼šglideæ˜¯ä¸€æ¬¾ä¸“æ³¨äºŽæä¾›æµç•…åˆ’åŠ¨èƒ½åŠ›çš„â€œå›¾ç‰‡åŠ è½½å’Œç¼“å­˜æ¡†æž¶â€ ä¸Šæ¦œç†ç”±ï¼š15.9kä¸ªstarï¼Œå›¾ç‰‡åŠ è½½ç±»æ¡†æž¶æŽ’åç¬¬ä¸€çš„æ¡†æž¶ï¼Œgoogle åœ¨2014å¼€å‘è€…å¤§ä¼šä¸Šæ¼”ç¤ºçš„camera appå°±æ˜¯åŸºäºŽgildeæ¡†æž¶å¼€å‘çš„ githubï¼šhttps://github.com/bumptech/glide ä½œè€…ï¼šBump Technologieså›¢é˜Ÿ ä½¿ç”¨ï¼š12345678repositories &#123; mavenCentral()&#125;dependencies &#123; implementation &apos;com.github.bumptech.glide:glide:4.5.0&apos; annotationProcessor &apos;com.github.bumptech.glide:compiler:4.5.0&apos;&#125; 6.leakcanary ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾å†…å­˜æ£€æµ‹æ¡†æž¶ï¼ŒæœåŠ¡äºŽjavaå’Œandroidå®¢æˆ·ç«¯ ä¸Šæ¦œç†ç”±ï¼šæ–¹ä¾¿ï¼Œç®€æ´æ˜¯leakcanaryæœ€å¤§çš„ç‰¹ç‚¹ï¼Œåªéœ€åœ¨åº”ç”¨çš„apllicationä¸­é›†æˆï¼Œå°±å¯ä»¥ç›´æŽ¥ä½¿ç”¨å®ƒï¼›15.5kä¸ªstarè¯´æ˜Žäº†å®ƒæœ‰å¤šä¹ˆå—æ¬¢è¿Ž githubï¼šhttps://github.com/square/leakcanary ä½œè€…ï¼šsquareå›¢é˜Ÿ ä½¿ç”¨ï¼š12345dependencies &#123; debugCompile &apos;com.squareup.leakcanary:leakcanary-android:1.5.4&apos; releaseCompile &apos;com.squareup.leakcanary:leakcanary-android-no-op:1.5.4&apos; testCompile &apos;com.squareup.leakcanary:leakcanary-android-no-op:1.5.4&apos; &#125; åœ¨ Application ä¸­å†™å…¥: 12345678910111213public class ExampleApplication extends Application &#123; @Override public void onCreate() &#123; super.onCreate(); if (LeakCanary.isInAnalyzerProcess(this)) &#123; // This process is dedicated to LeakCanary for heap analysis. // You should not init your app in this process. return; &#125; LeakCanary.install(this); // Normal app init code... &#125;&#125; 7.Android-Universal-Image-Loader ä¸€å¥è¯ä»‹ç»ï¼šæ›¾ç»çš„å›¾ç‰‡åŠ è½½æ¡†æž¶çŽ‹è€…ï¼Œandroidå¼€å‘è€æ‰‹éƒ½ç”¨è¿‡å®ƒ ä¸Šæ¦œç†ç”±:androidç«¯å›¾ç‰‡åŠ è½½æ¡†æž¶çš„è€å¤§å“¥äº†ï¼Œ15.3kä¸ªstarè¶³ä»¥è¯æ˜Žå®ƒçš„çƒ­é—¨ï¼ŒUILä¸Žgildeæœ€å¤§åŒºåˆ«æ˜¯å¯å®šåˆ¶ï¼ŒUILæä¾›äº†å¤§é‡é…ç½®æ–¹å¼ï¼Œå›¾ç‰‡åŠ è½½çŠ¶æ€çš„å›žè°ƒï¼ˆæˆåŠŸï¼Œå¤±è´¥ï¼Œè¿›è¡Œä¸­ï¼‰ï¼ŒåŠ è½½åŠ¨ç”»ç­‰ï¼›ä»¥åŠæä¾›äº†ç§»åŠ¨ç«¯å›¾ç‰‡åŠ è½½æ¡†æž¶çš„ç¼“å­˜æ€è·¯ï¼šä¸‰çº§ç¼“å­˜ç­–ç•¥ sdå¡-å†…å­˜-ç½‘ç»œï¼›å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒUILä»¥åŠä¸¤å¹´æœªæ›´æ–°äº†ï¼Œä½†ç¬”è€…ä»æŽ¨èå„ä½ä½¿ç”¨ï¼ githubï¼šhttps://github.com/nostra13/Android-Universal-Image-Loader ä½œè€…ï¼šnostra13 ä½¿ç”¨ï¼š ä¸‹è½½åœ°å€ universal-image-loader-1.9.5.jar 8.EventBus ä¸€å¥è¯ä»‹ç»ï¼šEventBusæ˜¯ä¸€æ¬¾æœ¬åœ°ç»„ä»¶é—´é€šä¿¡æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šç»„ä»¶é—´é€šä¿¡æ¡†æž¶staré‡ç¬¬ä¸€ï¼š14.8kï¼Œåœ¨å¤§åž‹é¡¹ç›®çš„Activitiesï¼Œfragmentsï¼ŒThreadsï¼ŒServiceséƒ½å¯ä»¥çœ‹åˆ°å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼Œå°½ç®¡EventBusåœ¨å‘æœªåˆ›å»ºçš„ç»„ä»¶ä¼ é€’äº‹ä»¶æ—¶æœ‰äº›å±€é™ï¼Œä»…é€‚åˆåœ¨â€œæ´»ç€çš„â€ç»„ä»¶é—´ä¼ é€’æ¶ˆæ¯ï¼Œä½†ä»ä¸å¦¨ç¢å®ƒæ´»è·ƒåœ¨å„ä¸ªå¤§åž‹é¡¹ç›®å„ä¸ªåœºæ™¯é‡Œã€‚ å®˜ç½‘åœ°å€ï¼šhttp://greenrobot.org/eventbus/documentation/how-to-get-started/ githubï¼šhttps://github.com/greenrobot/EventBus ä½œè€…ï¼šgreenrobot ä½¿ç”¨ï¼š1compile &apos;org.greenrobot:eventbus:3.1.1&apos; 9.zxing ä¸€å¥è¯ä»‹ç»ï¼šæ¡ç å›¾åƒå¤„ç†åº“ ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœä½ ç”¨è¿‡äºŒç»´ç ï¼Œä½ è‚¯å®šå·²ç»é—´æŽ¥ä½¿ç”¨è¿‡å¤§åé¼Žé¼Žçš„zxingäº†ã€‚13.9Kçš„staré‡ï¼Œè®©å®ƒæŽ’åœ¨æœ¬æ¦œå•ç¬¬ä¹ï¼Œå®žè‡³åå½’ï¼Œå¦‚æžœä½ æœ‰äº†è§£äºŒç»´ç çš„éœ€æ±‚ï¼Œä¸å¦¨ä»Žäº†è§£ã€ä¿®æ”¹å®ƒæºç å…¥æ‰‹ã€‚ githubï¼šhttps://github.com/zxing/zxing ä½œè€…ï¼šSean Owen 10.picasso ä¸€å¥è¯ä»‹ç»ï¼šå¼ºåŠ›çš„å›¾ç‰‡ä¸‹è½½ã€ç¼“å­˜æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæœ¬æ¦œå•å‡ºçŽ°çš„ç¬¬ä¸‰æ¬¾å›¾ç‰‡ç±»æ¡†æž¶ï¼Œä¸åŒçš„æ˜¯picassoæ›´å¼ºè°ƒå›¾ç‰‡ä¸‹è½½ï¼Œä½ å¯ä»¥å°†picassoé›†æˆè¿›ä½ çš„é¡¹ç›®ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥ç»“åˆgildeå’ŒUILä¸Žpicassoï¼Œä¸‰è€…ä¸€é½å°è£…è‡³ä½ çš„é¡¹ç›®ä¸­ï¼ŒæŒ‰éœ€æ‰€ç”¨ã€‚ å®˜ç½‘åœ°å€ï¼šhttp://square.github.io/picasso/ githubï¼šhttps://github.com/square/picasso ä½œè€…ï¼šsquareå›¢é˜Ÿ ä½¿ç”¨ï¼š1compile &apos;com.squareup.picasso:picasso:2.5.2&apos; æˆ–è€…ä¸‹è½½jaråŒ… 11.lottie-android ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾å¯ä»¥åœ¨Androidç«¯å¿«é€Ÿå±•ç¤ºAdobe Afeter Effectï¼ˆAEï¼‰å·¥å…·æ‰€ä½œåŠ¨ç”»çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šåŠ¨ç”»ç±»æ¡†æž¶ç¬¬ä¸€åï¼Œgithubä¸Š13.3kä¸ªstarè¯æ˜Žäº†ä»–çš„ä¼˜è¶Šæ€§ï¼Œåˆ©ç”¨jsonæ–‡ä»¶å¿«é€Ÿå®žçŽ°åŠ¨ç”»æ•ˆæžœæ˜¯å®ƒæœ€å¤§çš„ä¾¿åˆ©ï¼Œè€Œè¿™ä¸ªjsonæ–‡ä»¶ä¹Ÿæ˜¯ç”±Adobeæä¾›çš„After Effectsï¼ˆAEï¼‰å·¥å…·åˆ¶ä½œçš„ï¼Œåœ¨AEä¸­è£…ä¸€ä¸ªBodymovinçš„æ’ä»¶ï¼Œä½¿ç”¨è¿™ä¸ªæ’ä»¶æœ€ç»ˆå°†åŠ¨ç”»æ•ˆæžœç”Ÿæˆjsonæ–‡ä»¶ï¼Œè¿™ä¸ªjsonæ–‡ä»¶å³å¯ç”±LottieAnimationViewè§£æžå¹¶ç”Ÿæˆç»šä¸½çš„åŠ¨ç”»æ•ˆæžœã€‚è€Œä¸”å®ƒè¿˜æ”¯æŒè·¨å¹³å°å“Ÿã€‚ githubï¼šhttps://github.com/airbnb/lottie-android ä½œè€…ï¼šAirbnb å›¢é˜Ÿ 12.fresco ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾å¯ä»¥ç®¡ç†å›¾ç‰‡å†…å­˜çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±:githubä¸Š12.8kä¸ªstarï¼Œå›¾ç‰‡ç±»æŽ’è¡Œæ¦œç¬¬å››åï¼Œfacebookçš„å‡ºèº«è¯æ˜Žäº†å®ƒå¹¶éžæ˜¯é‡å¤é€ çš„è½®å­ï¼Œåœ¨ç®¡ç†å›¾ç‰‡å†…å­˜é¢†åŸŸä¸Šæœ‰ç€å®ƒçš„ä¸€ç‰‡å¤©åœ°ï¼Œæ¸è¿›å¼åŠ è½½ã€åŠ è½½giféƒ½æ˜¯å®ƒä¸Žå‰ä¸‰ä½ç›¸æ¯”ç‹¬æœ‰çš„ç‰¹æ€§ å®˜ç½‘åœ°å€ï¼šhttps://www.fresco-cn.org/ githubï¼šhttps://github.com/facebook/fresco ä½œè€…ï¼šfacebook ä½¿ç”¨ï¼š1234dependencies &#123; // å…¶ä»–ä¾èµ– compile &apos;com.facebook.fresco:fresco:0.12.0&apos;&#125; ä¸‹é¢çš„ä¾èµ–éœ€è¦æ ¹æ®éœ€æ±‚æ·»åŠ ï¼š 1234567891011121314dependencies &#123; // åœ¨ API &lt; 14 ä¸Šçš„æœºå™¨æ”¯æŒ WebP æ—¶ï¼Œéœ€è¦æ·»åŠ  compile &apos;com.facebook.fresco:animated-base-support:0.12.0&apos; // æ”¯æŒ GIF åŠ¨å›¾ï¼Œéœ€è¦æ·»åŠ  compile &apos;com.facebook.fresco:animated-gif:0.12.0&apos; // æ”¯æŒ WebP ï¼ˆé™æ€å›¾+åŠ¨å›¾ï¼‰ï¼Œéœ€è¦æ·»åŠ  compile &apos;com.facebook.fresco:animated-webp:0.12.0&apos; compile &apos;com.facebook.fresco:webpsupport:0.12.0&apos; // ä»…æ”¯æŒ WebP é™æ€å›¾ï¼Œéœ€è¦æ·»åŠ  compile &apos;com.facebook.fresco:webpsupport:0.12.0&apos;&#125; 13.RxAndroid ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾Androidå®¢æˆ·ç«¯ç»„ä»¶é—´å¼‚æ­¥é€šä¿¡çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šgithubä¸Š12.7kä¸ªstarï¼Œä½å±…ç»„ä»¶é€šä¿¡æ¡†æž¶çš„ç¬¬äºŒåï¼Œä»…åœ¨EventBusä¹‹åŽï¼Œå¦‚æžœè¦é—®ä¸¤è€…çš„åŒºåˆ«ï¼ŒEventbusæ˜¯ç”¨æ¥å–ä»£ç»„ä»¶é—´ç¹ççš„interfaceï¼ŒRxAndroidæ˜¯ç”¨æ¥å–ä»£AnsyTaskçš„ï¼Œå¹¶ä¸å†²çªï¼›å½“ç„¶RxAndroidçš„ä¼˜ç‚¹å¹¶ä¸ä»…é™äºŽæ­¤ï¼Œæ›´å¤šä¼˜é›…çš„å®žçŽ°ï¼Œå¯ä»¥åŽ»å®˜ç½‘æŸ¥é˜…ï¼ githubï¼šhttps://github.com/ReactiveX/RxAndroid ä½œè€…ï¼šJakeWharton ä½¿ç”¨ï¼š12compile &apos;io.reactivex.rxjava2:rxandroid:2.0.1&apos;compile &apos;io.reactivex.rxjava2:rxjava:2.1.0&apos; 14.SlidingMenu ä¸€å¥è¯ä»‹ç»ï¼šä¾§æ»‘èœå•æ æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šä¸ŽUserval-Image-loader é½åçš„ä¸Šå¤ç¥žå™¨æ¡†æž¶â€”â€”ä¸ºä½ çš„appæä¾›ä¾§æ»‘èœå•æ çš„åŠŸèƒ½ï¼›githubé—ªæ›´æœ‰10.5kä¸ªstarï¼Œè¯æ˜Žäº†å®ƒçš„ç»ä¹…ä¸è¡°ï¼Œå³ä½¿åœ¨GoogleæŽ¨å‡ºäº†NavigationDrawerï¼Œä»ç„¶æ²¡æœ‰å‡å°‘å¼€å‘è€…å¯¹SildingMenuçš„æ‹¥ç°‡ï¼Œç»å…¸æ€»æ˜¯ç»å¾—èµ·è€ƒéªŒçš„ï¼Œè¿™ä¸ªä¸Šå¤ç¥žå…½å·²ç»å››å¹´æ²¡æœ‰æ›´æ–°äº†ï¼›æœ‰å¤ªå¤šå¤ªå¤šçš„appä½¿ç”¨è¿‡å®ƒï¼Œè¿™äº›éƒ½å¯ä»¥åœ¨è½¯ä»¶çš„å¼€æºè®¸å¯ä¸Šçœ‹åˆ°ï¼ githubï¼šhttps://github.com/jfeinstein10/SlidingMenu ä½œè€…ï¼šJeremy Feinstein ä½¿ç”¨ï¼šåœ¨gihubä¸Šforkæºç ï¼Œé›†æˆè¿›é¡¹ç›®ä¸­ 15.PhotoView ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾ImageViewå±•ç¤ºæ¡†æž¶ï¼Œæ”¯æŒç¼©æ”¾ï¼Œå“åº”æ‰‹åŠ¿ ä¸Šæ¦œç†ç”±ï¼š10.3kçš„staræ•°é‡ï¼Œä½äºŽå›¾ç‰‡ç±»æ¡†æž¶æŽ’è¡Œæ¦œç¬¬äº”ä½ï¼ŒPhotoViewä¸Žå‰å››ä½ä¸åŒçš„æ˜¯è¿™æ¬¡å¸¦æ¥çš„æ˜¯å›¾ç‰‡çš„å±•ç¤ºèƒ½åŠ›ï¼Œä½ ä¸€å®šå¥½å¥‡å¾®ä¿¡çš„å¤´åƒç‚¹å‡»æ”¾å¤§æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼Œå¾ˆå¤šAppçš„å›¾ç‰‡æ˜¾ç¤ºå“åº”æ‰‹åŠ¿æŒ‰åŽ‹æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼Œäº†è§£PhotoViewï¼Œä½ ä¸€å®šä¼šå¼€å¿ƒçš„ï¼ï¼ˆç¬”è€…ä¹Ÿä¸ä¼šå‘Šè¯‰ä½ ImageViewçš„ç‚¹å‡»æ”¾å¤§æ•ˆæžœåœ¨Androidçš„sampleä¹Ÿæœ‰ï¼‰ githubï¼šhttps://github.com/chrisbanes/PhotoView ä½œè€…ï¼šchrisbanes ä½¿ç”¨ï¼šåœ¨appæ ¹ç›®å½•çš„build.gradleä¸­åŠ å…¥ï¼š 12345allprojects &#123; repositories &#123; maven &#123; url &quot;https://jitpack.io&quot; &#125; &#125;&#125; åœ¨appçš„moduleç›®å½•çš„build.graldeä¸­åŠ å…¥ï¼š 123dependencies &#123; compile &apos;com.github.chrisbanes:PhotoView:latest.release.here&apos;&#125; ä½¿ç”¨12345678&lt;com.github.chrisbanes.photoview.PhotoView android:id=&quot;@+id/photo_view&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;/&gt;PhotoView photoView = (PhotoView) findViewById(R.id.photo_view);photoView.setImageResource(R.drawable.image); 16.material-dialogs ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾è‡ªå®šä¹‰dialogæ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š9.9kä¸ªstarï¼Œä¹Ÿæ˜¯ç»§PhotoViewï¼ŒSlidingMenuä¹‹åŽç¬¬ä¸‰æ¬¾è‡ªå®šä¹‰Viewæ¡†æž¶ï¼Œä¹Ÿè®¸ä½ è¿˜æ˜¯è‡ªå®šä¹‰Viewçš„æ–°äººï¼Œå¯¹Dialogä½¿ç”¨çš„è¿˜æœ‰ç‚¹ç”Ÿç–ï¼Œä½ å¯ä»¥é€šè¿‡å®ƒæå‡ä½ çš„Dilaogä½¿ç”¨èƒ½åŠ› githubï¼šhttps://github.com/afollestad/material-dialogs ä½œè€…ï¼šAidan Follestad ä½¿ç”¨ï¼š1234dependencies &#123; // ... other dependencies here compile &apos;com.afollestad.material-dialogs:core:0.9.4.5&apos;&#125; 17.droid-async-http ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾åŸºäºŽHttpåè®®çš„å¼‚æ­¥è¯·æ±‚çš„ç½‘ç»œæ¡†æž¶ï¼Œ ä¸Šæ¦œç†ç”±ï¼šè™½ç„¶ä½ æœ‰æ— æ•°ä¸ªä½¿ç”¨retrofit+okhttpçš„ç†ç”±ï¼Œä½†9.8kä¸ªstarï¼Œè¯æ˜Žå®ƒä»ç„¶å€¼å¾—ä½ æ·±å…¥å­¦ä¹ ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå®ƒä¹Ÿå·²ç»æœ‰ä¸¤å¹´æ²¡æ›´æ–°äº†ï¼Œä½ å°½ç®¡æ‹¿åŽ»å½“ä½ æ‡’æƒ°çš„ç†ç”±ï¼ githubï¼šhttps://github.com/loopj/android-async-http ä½œè€…ï¼šJames Smith ä½¿ç”¨ï¼š12345678repositories &#123; maven &#123; url &apos;https://oss.sonatype.org/content/repositories/snapshots/&apos; &#125;&#125;dependencies &#123; compile &apos;com.loopj.android:android-async-http:1.5.0-SNAPSHOT&apos;&#125; 18.androidannotations ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾åŸºäºŽæ³¨è§£çš„å¿«é€Ÿå¼€å‘æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šä¸ŽButterknifeä¸€æ ·åŸºäºŽæ³¨è§£ï¼Œåˆ©ç”¨æ³¨è§£å¿«é€Ÿå®Œæˆviewçš„åˆå§‹åŒ–ï¼Œä¸åŒçš„æ˜¯androidannotationsæä¾›äº†æ›´å¤šçš„èƒ½åŠ›ï¼šç®€å•çš„çº¿ç¨‹æ¨¡åž‹ç­‰ï¼›ç¬”è€…åªæŽ¥è§¦è¿‡Butterknifeï¼Œæ— æ³•æ›´è¿›ä¸€æ­¥å™è¿°androidannotationsçš„ä¼˜åŠ¿ï¼Œå¦‚æžœä½ å¿—åœ¨æ·±å…¥äº†è§£æ³¨è§£çš„å¦™ç”¨ï¼Œå¯ä»¥å°è¯•æŽ¢ç´¢ä¸€ä¸‹ï¼ å®˜ç½‘åœ°å€ï¼šhttp://androidannotations.org/ githubï¼šhttps://github.com/androidannotations/androidannotations ä½œè€…ï¼šWonderCsabo 19.fastjson ä¸€å¥è¯ä»‹ç»:ä¸€æ¬¾åŸºäºŽjsonè§£æžã€ç”Ÿæˆçš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šä»Žå®ƒçš„åå­—ä¸éš¾çœ‹å‡ºï¼Œå¿«é€Ÿæ˜¯å®ƒæœ€å¤§çš„ç‰¹æ€§ï¼Œé˜¿é‡Œå·´å·´çš„å‡ºèº«ä¿è¯äº†ä»£ç çš„è´¨é‡å’Œä¼˜è¶Šï¼Œ9.4kçš„staræ•°é‡ï¼Œä¹Ÿæ˜¯æ¦œå•é‡Œç¬¬ä¸€ä¸ªå‡ºçŽ°çš„ä¸­å›½å¼€æºæ¡†æž¶ï¼Œæ¶‰åŠç½‘ç»œçš„appéƒ½ä¼šç”¨åˆ°jsonï¼Œfastjsonå€¼å¾—ä½œä¸ºä½ çš„é¦–é€‰ï¼ githubï¼šhttps://github.com/alibaba/fastjson ä½œè€…ï¼šalibaba ä½¿ç”¨ï¼š1compile &apos;com.alibaba:fastjson:1.1.58.android&apos; 20.Material-Animations ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›åœºæ™¯è½¬æ¢è¿‡æ¸¡èƒ½åŠ›çš„åŠ¨ç”»æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šAndroidåŠ¨ç”»æ¡†æž¶æŽ’è¡Œæ¦œç¬¬äºŒåï¼Œ9.3kä¸ªstaræ•°é‡ï¼Œä¸ŽåŠ¨ç”»æ¡†æž¶æ¦œå•ç¬¬ä¸€ålottie-androidä¸åŒçš„æ˜¯ï¼ŒMaterial-Animationsæä¾›çš„æ˜¯åœºæ™¯åˆ‡æ¢çš„åŠ¨ç”»æ•ˆæžœã€‚Android å®˜ç½‘sampleä¸­å·²ç»æä¾›äº†éƒ¨åˆ†Transition ï¼ˆè½¬åœºåŠ¨ç”»ï¼‰çš„å±•ç¤ºï¼Œä½œä¸ºåˆå­¦è€…å¾ˆéš¾å¿«é€Ÿæ‹“å±•åˆ°è‡ªå·±é¡¹ç›®ä¸­ï¼ŒMaterial-Animationsçš„ç¤ºä¾‹å‡ºçŽ°ä¸ºå¼€å‘è€…çœåŽ»äº†æ­¤ç±»éº»çƒ¦ï¼Œç›´æŽ¥ç…§æ¬åº”ç”¨åˆ°è‡ªå·±çš„Appä¸­å§ã€‚ githubï¼šhttps://github.com/lgvalle/Material-Animations ä½œè€…ï¼šLuis G. Valle ä½¿ç”¨ï¼šdownæºç ï¼Œä¿®æ”¹å­¦ä¹  21.tinker ä¸€å¥è¯ä»‹ç»ï¼šå®ƒæ˜¯å¾®ä¿¡å®˜ç½‘çš„Androidçƒ­è¡¥ä¸è§£å†³æ–¹æ¡ˆ ä¸Šæ¦œç†ç”±ï¼š9.1kä¸ªstarï¼Œå¾®ä¿¡åœ¨ç”¨çš„çƒ­è¡¥ä¸æ–¹æ¡ˆï¼Œå¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ å®˜ç½‘åœ°å€ï¼šhttp://www.tinkerpatch.com/Docs/intro githubï¼šhttps://github.com/Tencent/tinker ä½œè€…ï¼šTencent 22.ViewPagerIndicator ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾åŸºäºŽViewPagerçš„é¡µé¢æŒ‡ç¤ºå™¨å¼€æºæ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šä¸Šå¤ç¥žå™¨ï¼Œå°½ç®¡å·²ç»äº”å¹´æœªæ›´æ–°äº†ï¼Œä½†ä½ ä»ç„¶å¯ä»¥åœ¨æ·˜å®ç­‰appä¸­çœ‹åˆ°å®ƒçš„ä½¿ç”¨åœºæ™¯ï¼Œ8.9Kçš„staré‡è®©å®ƒä¸æ„ ä¸ç«çš„åœ¨çŸ—ç«‹åœ¨æ¦œå•é‡Œ å®˜ç½‘åœ°å€ï¼šhttp://viewpagerindicator.com/ githubï¼šhttps://github.com/JakeWharton/ViewPagerIndicator ä½œè€…ï¼šJakeWharton ä½¿ç”¨ï¼šä¸‹è½½åœ°å€ï¼šhttps://github.com/JakeWharton/Android-ViewPagerIndicator/zipball/master 23.Android-CleanArchitecture ä¸€å¥è¯ä»‹ç»ï¼šä¸€ä¸ªè®²è§£è®¾è®¡æ¡†æž¶çš„demo ä¸Šæ¦œç†ç”±ï¼šå®ƒä¸æ˜¯æ¡†æž¶ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“ä½œä¸€æœ¬ä¹¦ï¼Œå®ƒå°†æ•™ä¼šä½ å¦‚ä½•è®¾è®¡ç®€æ´çš„æž¶æž„ï¼Œå·¥ç¨‹é‡Œæœ‰ä¸€ä¸ªsample appï¼Œé…åˆå›¾æ–‡è®²è§£ï¼Œä½ å°†å¯¹Androidå®¢æˆ·ç«¯çš„æž¶æž„æœ‰æ›´æ·±ä¸€å±‚çš„è®¤è¯†ã€‚8.8kçš„staræ•°é‡ï¼Œè¯æ˜Žäº†å®ƒæ˜¯ä¸€æœ¬â€œå¥½ä¹¦â€å“Ÿã€‚ githubï¼šhttps://github.com/android10/Android-CleanArchitecture ä½œè€…ï¼šFernando Cejas 24.Android-PullToRefresh ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾ä¸ºæ™®é€šè§†å›¾æä¾›åˆ·æ–°UIçš„è§†å›¾æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š8.2Kçš„staræ•°é‡ä½¿å®ƒä½å±…åˆ·æ–°ç±»UIæ¡†æž¶æ¦œé¦–ï¼Œå¼ºå¤§çš„å…¼å®¹èƒ½åŠ›ï¼Œè¯¥æ¡†æž¶æ”¯æŒListViewï¼ŒGrdiViewï¼ŒWebViewScrollViewï¼ŒViewPagerç­‰ä¼—å¤šViewå¢žåŠ åˆ·æ–°çš„èƒ½åŠ›ï¼Œå¦‚æžœä½ æœ‰å¢žåŠ ä¸Šæ‹‰åŠ è½½ï¼Œä¸‹æ‹‰åŠ è½½çš„éœ€æ±‚ï¼Œä½ åº”è¯¥è€ƒè™‘å®ƒäº†ï¼ githubï¼šhttps://github.com/chrisbanes/Android-PullToRefresh ä½œè€…ï¼šChris Banes ä½¿ç”¨ï¼šgithub forkæºç ï¼Œé›†æˆåˆ°é¡¹ç›®ä¸­ 25.flexbox-layout ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾å¼¹æ€§ä¼¸ç¼©å¸ƒå±€ ä¸Šæ¦œç†ç”±ï¼š8.1kä¸ªstarï¼Œå‰ç«¯H5å¼€å‘è€…è½¬Androidå¼€å‘çš„ç¦éŸ³ï¼ŒFlexboxLayoutä½œä¸ºLinearLayoutå’ŒRelativeLayoutçš„æ›¿ä»£è€…ï¼Œå€¼å¾—å„ä½ä¸€è¯•ï¼Œä¸Žå…¶ä¸€åŒæŽ¨å‡ºçš„è¿˜æœ‰ConstraintLayoutã€‚ githubï¼šhttps://github.com/google/flexbox-layout ä½œè€…ï¼šGoogle ä½¿ç”¨ï¼š123dependencies &#123; compile &apos;com.google.android:flexbox:0.3.0-alpha3&apos;&#125; 26.AndroidSwipeLayout ä¸€å¥è¯ä»‹ç»ï¼šéžå¸¸å¼ºå¤§æ»‘åŠ¨å¼å¸ƒå±€ ä¸Šæ¦œç†ç”±:æ»‘åŠ¨åˆ é™¤æ˜¯å›½äº§appå¸¸è§éœ€æ±‚ï¼Œå•†å“è¯¦æƒ…çš„ä¸Šä¸‹æ»‘åŠ¨éœ€æ±‚ä½œä¸ºå¼€å‘è€…çš„æˆ‘ä»¬ä¹Ÿç»å¸¸é‡åˆ°ï¼ŒAndroidSwipeLayoutåœ¨githubä¸Šæ‹¥æœ‰8Kä¸ªstarï¼Œè¯æ˜Žå®ƒç»å—ä½äº†æ£€éªŒï¼Œå„ä½å€¼å¾—ä¸€è¯• githubï¼šhttps://github.com/daimajia/AndroidSwipeLayout ä½œè€…ï¼šdaimajia ä½¿ç”¨ï¼š12345dependencies &#123; compile &apos;com.android.support:recyclerview-v7:21.0.0&apos; compile &apos;com.android.support:support-v4:20.+&apos; compile &quot;com.daimajia.swipelayout:library:1.2.0@aar&quot;&#125; æˆ–ä¸‹è½½AndroidSwipeLayout-v1.1.8.jar 27.realm-java ä¸€å¥è¯ä»‹ç»ï¼šRealmæ˜¯ä¸€æ¬¾ç§»åŠ¨ç«¯æ•°æ®åº“æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ ¸å¿ƒæ•°æ®å¼•æ“ŽC++æ‰“é€ ï¼Œæ¯”æ™®é€šçš„Sqliteåž‹æ•°æ®åº“å¿«çš„å¤šã€‚ç¬”è€…çŒœæµ‹æ­£æ˜¯å¦‚æ­¤ï¼Œrealmä»¥7892ä¸ªstaræ•°è®©å®ƒä½äºŽå¤§åé¼Žé¼Žçš„æ•°æ®åº“æ¡†æž¶GreenDaoï¼ˆ7877ï¼‰ä¹‹å‰ å®˜ç½‘åœ°å€ï¼šhttps://realm.io/cn/ githubï¼šhttps://github.com/realm/realm-java ä½œè€…ï¼šRealmå›¢é˜Ÿ ä½¿ç”¨ï¼šhttps://realm.io/docs/java/latest/ 28.greenDAO ä¸€å¥è¯ä»‹ç»ï¼šgreenDAOæ˜¯ä¸€æ¬¾é«˜æ•ˆã€å¿«é€Ÿçš„SQLiteåž‹æ•°æ®åº“ ä¸Šæ¦œç†ç”±ï¼šgreenDAOçš„staræ•°é‡ä¸ŽRealmä¸ç›¸ä¸Šä¸‹ï¼Œä¸”ä¸ŽEventBuså¸ˆå‡ºåŒé—¨ï¼Œä¹Ÿæ˜¯ç”±greenrobotå›¢é˜Ÿå¼€å‘ç»´æŠ¤çš„ï¼Œè´¨é‡æœ‰æ‰€ä¿è¯ï¼Œä½†è‹¥æ‹·é—®ç¬”è€…Realmä¸ŽgreenDaoä¸¤è€…çš„ä¼˜åŠ£æ€§ï¼Œåªèƒ½å…·ä½“åˆ°å®žé™…ä½¿ç”¨å½“ä¸­ï¼Œæ¨¡æ‹Ÿçº¿ä¸Šçš„ä½¿ç”¨æƒ…å½¢ï¼Œè¿›è¡Œé«˜å¼ºåº¦æµ‹è¯•åŽæ‰èƒ½ä¸‹åˆ¤æ–­ï¼Œæ•…åœ¨æ­¤ä¸èƒ½ä¸€è¨€ä¸¤è¯­è¯´å®Œï¼Œæ·±è¡¨é—æ†¾ å®˜ç½‘åœ°å€ï¼šhttp://greenrobot.org/greendao/ githubï¼šhttps://github.com/greenrobot/greenDAO ä½¿ç”¨ï¼š12345678910111213141516171819buildscript &#123; repositories &#123; jcenter() mavenCentral() // add repository &#125; dependencies &#123; classpath &apos;com.android.tools.build:gradle:2.3.1&apos; classpath &apos;org.greenrobot:greendao-gradle-plugin:3.2.2&apos; // add plugin &#125;&#125; -----apply plugin: &apos;com.android.application&apos;apply plugin: &apos;org.greenrobot.greendao&apos; // apply plugin dependencies &#123; compile &apos;org.greenrobot:greendao:3.2.2&apos; // add library&#125; 29.stetho ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›åœ¨Chromeå¼€å‘è€…å·¥å…·ä¸Šè°ƒè¯•Android appèƒ½åŠ›çš„å¼€æºæ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šä¸Šå¤æ—¶æœŸAndroidç¨‹åºå‘˜è¦è°ƒè¯•æœ¬åœ°æ•°æ®åº“ï¼Œéœ€è¦è¿›å…¥Android Device Monitoræ‰¾åˆ°/data/data/com.xxx.xxx/databasesé‡Œé¢çš„dbæ–‡ä»¶ï¼Œå¯¼å‡ºåˆ°PCç«¯ï¼Œç”¨PCçš„æ•°æ®å·¥å…·æŸ¥çœ‹ï¼ŒçŽ°åœ¨ä½¿ç”¨stethoçœå´äº†å¦‚æ­¤çš„éº»çƒ¦ï¼›å¦‚ä»Šçš„Androidç¨‹åºå‘˜å¦‚æžœæƒ³è°ƒè¯•ç½‘ç»œè¯·æ±‚å“åº”è¿‡ç¨‹ä¸­çš„æŠ¥æ–‡æ®µï¼Œéœ€è¦åœ¨è¯·æ±‚ä¸­åŠ å…¥Logè¯­å¥ï¼Œä¸€ä¸ªä¿¡æ¯ä¸€ä¸ªä¿¡æ¯æ‰“å°å‡ºæ¥ï¼Œç›¸å½“ç¹çï¼ŒçŽ°åœ¨è¯·ä½¿ç”¨stethoï¼Œçœå´è¯¸å¦‚æ­¤ç±»çš„éº»çƒ¦æŠŠï¼7.8Kä¸ªstaræ•°ï¼Œå¹¿å¤§Androidå¼€å‘è€…è°ƒè¯•çš„ç¦éŸ³ï¼Œä½ å€¼å¾—æ‹¥æœ‰ï¼ å®˜ç½‘åœ°å€ï¼šhttp://facebook.github.io/stetho/ githubï¼šhttps://github.com/facebook/stetho ä½œè€…ï¼šFaceBook ä½¿ç”¨ï¼š1compile â€˜com.facebook.stetho:stetho:1.5.0â€™ 30.BaseRecyclerViewAdapterHelper ä¸€å¥è¯ä»‹ç»ï¼šå¼ºå¤§ã€æµç•…çš„Recyvlerviewé€šç”¨é€‚é…å™¨ ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœä½ æ˜¯RecyclerViewçš„æ‹¥ç°‡è€…ï¼Œä½ ä¸€å®šè¦ä½“éªŒè¿™æ¬¾ä¸“é—¨æœåŠ¡è¯¥viewçš„é€‚é…å™¨ï¼Œ7.7Kä¸ªstarï¼Œè®©è¿™ä¸ªå®¶ä¼™ä½äºŽgithubä¸ŠAndroid é€‚é…å™¨æŽ’è¡Œæ¦œç¬¬ä¸€ï¼Œè¿˜æœ‰å¾ˆå¤šæƒŠå–œç­‰ä½ åŽ»æŽ¢å¯»ï¼ å®˜ç½‘åœ°å€ï¼šhttp://www.recyclerview.org/ ä½¿ç”¨ï¼š 1234567891011allprojects &#123; repositories &#123; ... maven &#123; url &quot;https://jitpack.io&quot;&#125; &#125;&#125;dependencies &#123; compile &apos;com.github.CymChad:BaseRecyclerViewAdapterHelper:VERSION_CODE&apos;&#125; 31.AndroidViewAnimations ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›å¯çˆ±åŠ¨ç”»é›†åˆçš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ­£å¦‚ä½œè€…æ‰€è¯´ï¼Œå®ƒå›Šæ‹¬äº†å¼€å‘éœ€æ±‚è¿‡ç¨‹ä¸­æ‰€æœ‰çš„åŠ¨ç”»æ•ˆæžœï¼Œé›†æˆè¿›äº†è¿™ä¸ªç®€æ´å¯çˆ±çš„åŠ¨ç”»æ¡†æž¶ã€‚7.6Kçš„staræ•°ï¼Œè¯æ˜Žäº†å®ƒåœ¨åŠ¨ç”»æ¡†æž¶é¢†åŸŸçš„æˆ˜æ–—åŠ›ï¼Œè®©å®ƒä»…ä»…ä½åˆ—lottie-androidå’ŒMaterial-Animationsä¸¤ä¸ªåŠ¨ç”»æ¡†æž¶éœ¸ä¸»ä¹‹åŽï¼Œå±ˆå±…ç¬¬ä¸‰å githubï¼šhttps://github.com/daimajia/AndroidViewAnimations ä½œè€…ï¼šdaimajia ä½¿ç”¨ï¼š1234567891011dependencies &#123; compile &apos;com.android.support:support-compat:25.1.1&apos; compile &apos;com.daimajia.easing:library:2.0@aar&apos; compile &apos;com.daimajia.androidanimations:library:2.2@aar&apos;&#125;sampleï¼šYoYo.with(Techniques.Tada) .duration(700) .repeat(5) .playOn(findViewById(R.id.edit_area)); 32.MaterialDrawer ä¸€å¥è¯ä»‹ç»ï¼šå¼ºå¤§çš„å¡‘æ–™é£Žæ ¼çš„æŠ½å±‰æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š7.6Kçš„staræ•°é‡ï¼Œä½œè€…çš„æŒç»­æ›´æ–°çŠ¶æ€ï¼Œå¦‚æžœä½ è¿˜åœ¨çŠ¹è±«ä¸Šæ‰‹SlidingMenué‡åˆ°bugæ²¡äººç®¡çš„å›°å¢ƒï¼Œé‚£ä¹ˆä½ å¯ä»¥å…¥æ‰‹å®ƒä½œä¸ºä½ çš„æŠ½å±‰å¸ƒå±€ githubï¼šhttps://github.com/mikepenz/MaterialDrawer ä½œè€…ï¼šMike Penz ä½¿ç”¨:12345compile(&apos;com.mikepenz:materialdrawer:5.9.2@aar&apos;) &#123; transitive = true&#125;new DrawerBuilder().withActivity(this).build(); 33.Android-ObservableScrollView ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾è®©è§†å›¾æ»‘åŠ¨æ›´å…·æœ‰è§†è§‰æ•ˆæžœçš„æ»‘åŠ¨å¼æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š7.5Kçš„staræ•°é‡ï¼Œè¯æ˜Žäº†å®ƒæ›¾ç»çš„ä»·å€¼ï¼Œgithubä¸Šæä¾›äº†12ç§æ»‘åŠ¨æ•ˆæžœï¼Œä½ å¯ä»¥ç”¨å®ƒå¼¥è¡¥å…¶ä»–æ¡†æž¶çš„ä¸è¶³ï¼Œæå‡ä½ çš„Appä½“éªŒï¼ githubï¼šhttps://github.com/ksoichiro/Android-ObservableScrollView ä½œè€…ï¼šSoichiro Kashima ä½¿ç”¨ï¼š1compile com.github.ksoichiro:android-observablescrollview 34.CircleImageView ä¸€å¥è¯ä»‹ç»ï¼šåœ†è§’ImageView ä¸Šæ¦œç†ç”±ï¼šä¹Ÿè®¸ä½ å·²ç»å¬è¯´è¿‡æ— æ•°ç§å±•ç¤ºåœ†è§’å›¾ç‰‡çš„æ–¹æ³•ï¼Œä½†å¦‚æžœä½ ä¸å°è¯•å°è¯•CircleImageViewï¼Œé‚£ä¹ˆä½ çš„çŸ¥è¯†åº“ä¼šå› ä¸ºå°‘äº†å®ƒé»¯ç„¶å¤±è‰²ï¼Œæœ‰çš„æ—¶å€™å®Œæˆéœ€æ±‚æ˜¯å¼€å‘è€…ä¼˜å…ˆè€ƒè™‘çš„ï¼Œä¸åŒå®žçŽ°æ–¹æ³•ç‰µæ‰¯åˆ°çš„æ€§èƒ½å·®å¼‚æ›´å€¼å¾—è®©äººæ·±æ€ï¼Œå¦‚æžœä½ æœ‰å¿ƒåœ¨å›¾ç‰‡æ€§èƒ½ä¸Šæœ‰æ‰€æ¶‰çŒŽï¼Œé‚£ä¹ˆCircleImageViewç»å¯¹ä¸ä¼šè®©ä½ è´¥å…´è€Œå½’ã€‚æœ€åŽåˆ«å¿˜äº†è®°å¾—åŽ»çœ‹Romain Guyçš„å»ºè®®å“Ÿã€‚ githubï¼šhttps://github.com/hdodenhof/CircleImageView ä½œè€…ï¼šHenning Dodenhof ä½¿ç”¨ï¼š12345678910111213dependencies &#123; ... compile &apos;de.hdodenhof:circleimageview:2.1.0&apos;&#125;&lt;de.hdodenhof.circleimageview.CircleImageView xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; android:id=&quot;@+id/profile_image&quot; android:layout_width=&quot;96dp&quot; android:layout_height=&quot;96dp&quot; android:src=&quot;@drawable/profile&quot; app:civ_border_width=&quot;2dp&quot; app:civ_border_color=&quot;#FF000000&quot;/&gt; 35.logger ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾è®©logæ—¥å¿—ä¼˜é›…æ˜¾ç¤ºçš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šloggerä½œä¸ºè°ƒè¯•æ¡†æž¶ï¼Œå¹¶æœªç»™å‡ºå¾ˆå¼ºå¤§çš„èƒ½åŠ›ï¼Œå®ƒæœ€å¤§çš„äº®ç‚¹æ˜¯ä¼˜é›…çš„è¾“å‡ºlogä¿¡æ¯ï¼Œå¹¶ä¸”æ”¯æŒå¤šç§æ ¼å¼ï¼šçº¿ç¨‹ã€Jsonã€Xmlã€Listã€Mapç­‰ï¼Œå¦‚æžœä½ æ•´æ—¥æ²‰è¿·äºŽæ±ªæ´‹å¤§æµ·èˆ¬çš„logä¿¡æ¯ä¸èƒ½è‡ªæ‹”ï¼Œloggerå°±æ˜¯ä½ çš„æŒ‡è·¯æ˜Žç¯ï¼6.6kä¸ªstarè®©ä»–ä½åˆ—è°ƒè¯•æ¡†æž¶ç¬¬äºŒåï¼Œå±ˆå±…facebookçš„stethoä¹‹åŽ githubï¼šhttps://github.com/orhanobut/logger ä½œè€…ï¼šOrhan Obut ä½¿ç”¨ï¼š 12345678compile &apos;com.orhanobut:logger:2.1.1&apos;Logger.d(MAP);Logger.d(SET);Logger.d(LIST);Logger.d(ARRAY);Logger.json(JSON_CONTENT);Logger.xml(XML_CONTENT); 36.agera ä¸€å¥è¯ä»‹ç»:ä¸€æ¬¾æœåŠ¡äºŽAndroidå¹³å°çš„å“åº”å¼ç¼–ç¨‹æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šgoogleä¸“é—¨æŽ¨å‡ºä¸€å¥—å“åº”å¼ç¼–ç¨‹æ¡†æž¶æœåŠ¡äºŽAndroidå¼€å‘è€…ï¼Œç›¸æ¯”äºŽä¹‹å“åº”å¼ç¼–ç¨‹æ¡†æž¶æ¦œé¦–çš„ RxJava RxAndroidï¼Œå®ƒæ›´è½»é‡ï¼Œä¸¤è€…æœ€å¤§çš„ä¸åŒç‚¹åœ¨äºŽageraåŸºäºŽpush eventã€pull data ï¼ˆVS Rxç³»åˆ— push dataï¼‰ã€‚ githubï¼šhttps://github.com/google/agera ä½œè€…ï¼šGoogle ä½¿ç”¨ï¼š1compile &apos;com.google.android.agera:agera:1.3.0&apos; æ‰©å±•èƒ½åŠ›12345compile &apos;com.google.android.agera:content:1.3.0&apos; compile &apos;com.google.android.agera:database:1.3.0&apos; compile &apos;com.google.android.agera:net:1.3.0&apos; compile &apos;com.google.android.agera:rvadapter:1.3.0&apos; compile &apos;com.google.android.agera:rvdatabinding:1.3.0&apos; 37.BottmBar ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾åº•éƒ¨å¯¼èˆªæ è§†å›¾æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šåº•éƒ¨æ é‡Œçš„çŽ‹è€…æ¡†æž¶ï¼Œ6.3Kçš„staræ•°é‡ï¼Œè¯æ˜Žäº†å®ƒçš„ä¼˜ç§€ï¼Œå®Œå…¨éµå¾ªææ–™è®¾è®¡è§„èŒƒï¼Œä¸Šæ‰‹éžå¸¸æ–¹ä¾¿ã€‚å¦‚æžœè¯´ç¼ºç‚¹ï¼Œæ— æ³•è®¾ç½®iconä¸Žtitileçš„é—´è·ï¼Œæ— æ³•è‡ªå®šä¹‰è§†å›¾çš„å¤§å°ç­‰ï¼Œä½†è¿™äº›éƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹æºä»£ç è§£å†³ï¼Œç¬”è€…çŒ®ä¸‘ä¹Ÿä¿®æ”¹äº†ä¸€å¥—ç¬¦åˆå›½å†…å¼€å‘è€…çš„åº•éƒ¨å¯¼èˆªæ¡†æž¶ï¼Œå³å°†å¼€æºã€‚ githubï¼šhttps://github.com/roughike/BottomBar ä½œè€…ï¼šIiro Krankka ä½¿ç”¨ï¼š1compile &apos;com.roughike:bottom-bar:2.3.1&apos; 38.Calligraphy ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾è‡ªå®šä¹‰å­—ä½“æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœä½ è¿˜åœ¨ä¸ºä¸€é”®ä¿®æ”¹Appå†…æ‰€æœ‰å­—ä½“æ ·å¼è€Œçƒ¦æ¼ï¼Œ6.3Kä¸ªstarçš„Calligraphyå°±å€¼å¾—ä½ æ‹¥æœ‰ï¼Œå®ƒå¯ä»¥åŒæ—¶ä¿®æ”¹æ•´ä¸ªæ•´ä¸ªé¡¹ç›®çš„Textviewå­—ä½“ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ è®¾ç½®æŸä¸ªTextviewçš„å­—ä½“ï¼Œè¿˜åœ¨ç­‰ä»€ä¹ˆï¼Œå¿«æ¥è¯•è¯•å§ï¼ githubï¼šhttps://github.com/chrisjenx/Calligraphy ä½œè€…ï¼šChristopher Jenkins ä½¿ç”¨ï¼š123dependencies &#123; compile &apos;uk.co.chrisjenx:calligraphy:2.3.0&apos;&#125; 39.AndroidSlidingUpPanel ä¸€å¥è¯ä»‹ç»ï¼šå¯æ‹–åŠ¨çš„æ»‘åŠ¨é¢æ¿è§†å›¾æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœä½ çš„é¡¹ç›®éœ€è¦ä¸€ä¸ªå¯æ‹–æ‹½çš„æ»‘åŠ¨å¼é¢æ¿ï¼ˆå±•ç¤ºæŸäº›è¯¦æƒ…ä¿¡æ¯ï¼Œæ’­æ”¾éŸ³ä¹ï¼Œåœ°å›¾ä¿¡æ¯ç­‰ï¼‰ï¼Œé‚£ä¹ˆæŽ¨èä½ ä½¿ç”¨å®ƒï¼Œ6.3kä¸ªstarï¼Œæ¥è‡ªåˆ›ä¸šå…¬å¸umanoçš„ä½œå“ï¼Œè¯æ˜Žå®ƒæ˜¯ç”¨å¿ƒæŽ¨å‡ºçš„æ°ä½œ githubï¼šhttps://github.com/umano/AndroidSlidingUpPanel ä½œè€…ï¼šumano ä½¿ç”¨ï¼š12345678dependencies &#123; repositories &#123; mavenCentral() &#125; compile &apos;com.sothree.slidinguppanel:library:3.3.1&apos;&#125; 40.AppIntro ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›å¿«é€Ÿåˆ¶ä½œæ¬¢è¿Žé¡µçš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šç¬”è€…ä»ŽæœªæŠŠæ‰“ç®—æŠŠæ¬¢è¿Žé¡µæ¡†æž¶çº³å…¥æŽ’è¡Œæ¦œå½“ä¸­ï¼Œä½œä¸ºå›½å†…å¼€å‘è€…ï¼ŒViewPagerå¼€å‘Appçš„æ¬¢è¿Žé¡µå·²ç»æ˜¯æ‰‹åˆ°æ“’æ¥çš„éœ€æ±‚ï¼Œä¸ºä½•ä¸€ä¸ªå¼€æºçš„æ¬¢è¿Žé¡µæ¡†æž¶ä¼šåœ¨githubä¸Šæ‹¥æœ‰6.3kä¸ªstarï¼Ÿä¹Ÿè®¸ä½ ä¼šä¸å±‘ä¸€é¡¾ï¼Œæ˜¯çš„ï¼Œå¾€å¾€å°±åœ¨ä¸å±‘ä¸€é¡¾çš„çž¬é—´ï¼Œæœºé‡å°±æ‚„æ‚„æºœèµ°äº†ã€‚ githubï¼šhttps://github.com/apl-devs/AppIntro ä½œè€…ï¼šPaolo Rotolo 12345678910allprojects &#123; repositories &#123; ... maven &#123; url &apos;https://jitpack.io&apos;&#125; &#125; &#125; dependencies &#123; compile &apos;com.github.apl-devs:appintro:v4.2.0&apos; &#125; 41.recyclerview-animators ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾ä¸ºRecyclerviewæä¾›æ‰©å±•åŠ¨ç”»èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæœ‰ä¸€å¥è€è¯ï¼šå¦‚æžœæœ‰å¤©ä½ å¤±åŽ»å¯¹æ–°äº‹ç‰©çš„å…´è¶£ï¼Œé‚£å°±è¯´æ˜Žä½ è€äº†ã€‚recyclerviewå·²ç»æŽ¨å‡ºå¿«ä¸‰å¹´äº†ï¼Œè¿˜åœ¨ç”¨listviewçš„äººä»¬ï¼Œæ˜¯å¦å·²ç»å‘æŽ˜è‡ªå·±æ¸æ¸å˜è€ï¼›ä¸è¦ç°å¿ƒï¼Œå¿«ä¸ºä½ çš„é¡¹ç›®åŠ å…¥recyclerview-animatorsæ¡†æž¶å§ï¼Œä¸ºâ€œè‡ªå·±â€åŠ å…¥æ–°é²œçš„è¡€æ¶²å’Œèƒ½é‡ï¼ï¼ˆç¬”è€…å¤‡æ³¨ï¼š6.2Kä¸ªstarï¼‰ githubï¼šhttps://github.com/wasabeef/recyclerview-animators ä½œè€…ï¼šhttps://github.com/wasabeef ä½¿ç”¨ï¼š1234dependencies &#123; // jCenter compile &apos;jp.wasabeef:recyclerview-animators:2.2.6&apos;&#125; 42.dagger ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾é€šè¿‡ä¾èµ–æ³¨å…¥é™ä½Žç¨‹åºé—´è€¦åˆçš„å¼€å‘æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šgithub ä¸Šdagger1ç‰ˆæœ¬ æœ‰6.2kä¸ªstar ï¼Œ dagger2ç‰ˆæœ¬æœ‰7.3kä¸ªï¼›ç”±squareå®Œæˆçš„dagger1ç‰ˆæœ¬ï¼Œåˆ°å¦‚ä»Šgoogleå›¢é˜ŸæŽ¥æ‰‹çš„dagger2ç‰ˆæœ¬ï¼Œå¼ºåŠ›å¼€å‘å›¢é˜Ÿä¿è¯äº†ä»£ç åœ¨è®¾è®¡ä¸Šçš„ä¼˜è¶Šæ€§ï¼›å¦‚æžœä½ æƒ³æŽ¢ç©¶Android é¢†åŸŸçš„è®¾è®¡æ¨¡å¼ï¼Œè¿™ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚ å®˜ç½‘åœ°å€ï¼šhttps://google.github.io/dagger/ githubï¼šhttps://github.com/google/dagger ä½œè€…ï¼šgoogle ä½¿ç”¨ï¼š123456789dependencies &#123; compile &apos;com.google.dagger:dagger:2.x&apos; annotationProcessor &apos;com.google.dagger:dagger-compiler:2.x&apos;&#125;If you&apos;re using classes in dagger.android you&apos;ll also want to include:compile &apos;com.google.dagger:dagger-android:2.x&apos;compile &apos;com.google.dagger:dagger-android-support:2.x&apos; annotationProcessor &apos;com.google.dagger:dagger-android-processor:2.x&apos; 43.Android-Bootstarp ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›åœ¨Androidåº”ç”¨ä¸Šå®žçŽ°Bootstrapï¼ˆwebæ¡†æž¶ï¼‰æ‰€ä½œå‡ºæ•ˆæžœçš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ¦œå•ä¸Šç¬¬äºŒæ¬¾å“åº”webæŠ€æœ¯çš„Android ç«¯æ¡†æž¶ï¼Œè¿˜è®°å¾—ç¬¬ä¸€åæ˜¯è°å—â€”â€”flexbox-layoutï¼Œä½œä¸ºAndroidå¼€å‘è€…ï¼Œä½ æœ‰å¿…è¦åŽ»äº†è§£WebæŠ€æœ¯äº†ã€‚5.9kä¸ªstarï¼Œè¯æ˜Žå®ƒä¸å®¹å°è§‘ githubï¼šhttps://github.com/Bearded-Hen/Android-Bootstrap ä½œè€…ï¼šBearded-Henå›¢é˜Ÿ ä½¿ç”¨ï¼š123dependencies &#123; compile &apos;com.beardedhen:androidbootstrap:&#123;X.X.X&#125;&apos;&#125; 44.RxBindingä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›UIç»„ä»¶äº‹ä»¶å“åº”èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœä½ è¿˜æœªå¼€å§‹RxAndroid ä¹‹æ—…ï¼ŒRxBindingå¯ä»¥ä½œä¸ºä½ çš„ç¬¬ä¸€ç«™ï¼Œé€šè¿‡RXBindingï¼Œä½ å°†ç†è§£å“åº”å¼ç¼–ç¨‹çš„å¿«ä¹ï¼Œè®©é¡¹ç›®é‡Œçš„äº‹ä»¶æµç¨‹æ›´æ¸…æ™°ã€‚5.6Kä¸ªstarï¼ŒRxAndroidä½œè€…äº²è‡ªæ“åˆ€ï¼Œå¿«æ¥è¯•ç”¨å§ï¼ githubï¼šhttps://github.com/JakeWharton/RxBinding ä½œè€…ï¼šJakeWharton Platform bindings:12345678910111213141516compile &apos;com.jakewharton.rxbinding2:rxbinding:2.0.0&apos;&apos;support-v4&apos; library bindings:compile &apos;com.jakewharton.rxbinding2:rxbinding-support-v4:2.0.0&apos;&apos;appcompat-v7&apos; library bindings:compile &apos;com.jakewharton.rxbinding2:rxbinding-appcompat-v7:2.0.0&apos;&apos;design&apos; library bindings:compile &apos;com.jakewharton.rxbinding2:rxbinding-design:2.0.0&apos;&apos;recyclerview-v7&apos; library bindings:compile &apos;com.jakewharton.rxbinding2:rxbinding-recyclerview-v7:2.0.0&apos;&apos;leanback-v17&apos; library bindings:compile &apos;com.jakewharton.rxbinding2:rxbinding-leanback-v17:2.0.0&apos; 45.ListViewAnimations ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾ä¸ºListViewæä¾›åŠ¨å±•ç¤ºç”»æ•ˆæžœèƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœæœ‰ä¸€å¤©æˆ‘æ‰¿è®¤è‡ªå·±è€äº†ï¼Œæˆ‘è¿˜ä¼šæŽ’æŽ’æˆ‘çš„å…„å¼Ÿâ€”â€”ListViewï¼Œè¯æ˜Žæˆ‘å’Œå®ƒä¸€èµ·æˆ˜æ–—è¿‡ã€‚ListViewAnimationsçš„å­˜åœ¨å°±æ˜¯è¯æ˜Žæˆ‘ä»¬è¿™äº›â€œè€å¹´äººâ€ä»æœ‰ç”¨æ­¦ä¹‹åœ°ï¼Œä¹Ÿè®¸ä½ æœ‰è¯´ä¸å‡ºå£çš„éš¾å¤„ï¼Œæ— æ³•ä½“ä¼šåˆ°RecyclerViewé‡ŒåŠ¨ç”»çš„å¿«ä¹ï¼Œæ‹¥æœ‰ListViewAnimationsï¼Œä½ ä¸€æ ·å¯ä»¥éª„å‚²çš„è¯´ï¼Œæˆ‘çš„å­©å­ï¼ˆæ¯ä¸ªitemï¼‰ä¹Ÿæœ‰è‡ªå·±çš„åŠ¨æ•ˆå•¦ã€‚ï¼ˆç¬”è€…å¤‡æ³¨ 5.6Kä¸ªstarï¼‰ githubï¼šhttps://github.com/nhaarman/ListViewAnimations ä½œè€…ï¼šnhaarman ä½¿ç”¨ï¼š123456789repositories &#123; mavenCentral()&#125;dependencies &#123; compile &apos;com.nhaarman.listviewanimations:lib-core:3.1.0@aar&apos; compile &apos;com.nhaarman.listviewanimations:lib-manipulation:3.1.0@aar&apos; compile &apos;com.nhaarman.listviewanimations:lib-core-slh:3.1.0@aar&apos;&#125; 46.UItimateRecyclerView ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›åˆ·æ–°ã€åŠ è½½æ›´å¤šã€åŠ¨ç”»ç‰¹æ•ˆç­‰é¢å¤–èƒ½åŠ›çš„RecyclerViewæ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ¦œå•ä¸Šç¬¬ä¸‰æ¬¡å‡ºçŽ°RecyclerViewçš„èº«å½±ï¼Œè¶³ä»¥è¯æ˜ŽRecyclerViewçš„ä¼˜å¼‚æ€§ï¼Œ5.5Kä¸ªstarï¼Œæ¡†æž¶é‡Œæ‰€æä¾›ä¼—å¤šçš„èƒ½åŠ›ï¼Œå¦‚æžœä½ æ˜¯ä¸ªåŠŸåˆ©å¼€å‘è€…ï¼Œé‚£ä¹ˆæ­¤æ¡†æž¶ä¼šä¸ºä½ èŠ‚çœå¾ˆå¤šå­¦ä¹ æ—¶é—´ï¼Œå®ƒå¯ä»¥å®Œæˆå¤šitemå¼å¸ƒå±€çš„å¤§å¤šæ•°éœ€æ±‚ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªé¡¹ç›®ä¹Ÿæ˜¯åœ¨å…¶ä»–é¡¹ç›®çš„æ€è·¯ä¸ŠäºŒæ¬¡å¼€å‘çš„ã€‚ githubï¼šhttps://github.com/cymcsg/UltimateRecyclerView ä½œè€…ï¼šMarshalChen ä½¿ç”¨ï¼š1234567repositories &#123; jcenter() &#125;dependencies &#123; ... compile &apos;com.marshalchen.ultimaterecyclerview:library:0.7.2&apos;&#125; 47.uCrop ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾ä¼˜é›…çš„å›¾ç‰‡è£å‰ªæ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š5.3Kä¸ªstarï¼Œå›¾ç‰‡ç¼–è¾‘æ¨¡å—å•ç‹¬æ‹Žå‡ºæ¥ä¹Ÿæ˜¯ä¸€æ¬¾ä¼˜é›…çš„Appã€‚ githubï¼šhttps://github.com/Yalantis/uCrop ä½œè€…ï¼šYalantis ä½¿ç”¨ï¼š12345678allprojects &#123; repositories &#123; jcenter() maven &#123; url &quot;https://jitpack.io&quot; &#125; &#125;&#125;compile &apos;com.github.yalantis:ucrop:2.2.1&apos; 48.RxJava-Android-Samples ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾ä»‹ç»RxJavaä½¿ç”¨åœºæ™¯çš„app ä¸Šæ¦œç†ç”±ï¼šæ¦œå•å‡ºçŽ°çš„ç¬¬ä¸€ä¸ªâ€œä»…ä»…ä¸ºå‘Šè¯‰ä½ å¦‚ä½•ä½¿ç”¨å¦ä¸€ä¸ªé¡¹ç›®â€çš„å¼€æºé¡¹ç›®ï¼Œå®ƒå¯ä»¥è¯´æ˜¯RxJavaçš„ç”¨ä¾‹ï¼Œä½ æƒ³å¾—åˆ°çš„æƒ³ä¸åˆ°çš„RxJavaç”¨æ³•è¿™é‡Œéƒ½æœ‰ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå®ƒä»¥5.2kä¸ªstarçŸ—ç«‹åœ¨è¿™ä»½æ¦œå•é‡Œçš„åŽŸå› ã€‚é—æ†¾è‡ªå·±æ²¡æœ‰åˆ›ä½œè¿™ä¹ˆä¸€ä¸ªå—äººè¿½æ§çš„demoï¼Ÿèµ¶å¿«åŠ¨æ‰‹å†™ä¸ªå…¶ä»–çš„â€œXXé¡¹ç›®ç”¨ä¾‹å§â€ githubï¼šhttps://github.com/kaushikgopal/RxJava-Android-Samples ä½œè€…ï¼škaushikgopal ä½¿ç”¨ï¼šcloneåˆ°æœ¬åœ°æ…¢æ…¢æŽ¢ç´¢å§ 49.AndroidAutoLayout ä¸€å¥è¯ä»‹ç»ï¼šä¸€ä¸ªæä¾›é€‚é…èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š5.2Kä¸ªstarï¼Œé¸¿æ´‹è€å¼Ÿçš„ä½œå“ï¼Œé€‚åˆå°é¡¹ç›®çš„å¼€å‘å›¢é˜Ÿï¼Œæ‹¿åˆ°è®¾è®¡MMçš„pxåƒç´ è®¾è®¡ç¨¿æ˜¯ä¸æ˜¯å¾ˆå¤´ç–¼æï¼Ÿè¿™ä¸ªæ¡†æž¶ä¸€é”®å¼æžå®šä½ çš„é—®é¢˜ï¼Œå®ƒæœ‰å¾ˆå¤šçš„ä¸è¶³ï¼Œä½†åœ¨è¿½æ±‚å®Œç¾Žé€‚é…çš„è·¯ä¸Šï¼Œä½ å€¼å¾—æŽ¢ç´¢å’Œäº†è§£å®ƒï¼ç¬”è€…å¹¶ä¸æŽ¨èæŠŠå®ƒåº”ç”¨åˆ°å·²ç»æˆç†Ÿè¿è¡Œçš„é¡¹ç›®ä¸­ï¼Œæ¯•ç«Ÿå¸‚é¢ä¸Šå·²ç»æœ‰å¤ªå¤šçš„é€‚é…è§£å†³æ–¹æ¡ˆäº†ï¼Œé€‚é…é—®é¢˜å°±åƒæ˜¯ä¸ªå¤§æ‚çƒ©ï¼Œæƒ³ç‚’ä¸€ç›˜å¥½èœï¼Œå°±å¾—å¤‡å¥½å„ç§ä½æ–™ï¼ˆé€‚é…å°æ–¹æ¡ˆï¼‰ï¼Œå½“ä½ æŠŠå„ç§å°ä½æ–™ç”¨çš„ç‚‰ç«çº¯é’çš„æ—¶å€™ï¼Œä½ ç¦»ç¾Žé£Ÿå¤§åŽ¨å°±ä¸è¿œäº†ã€‚ githubï¼šhttps://github.com/hongyangAndroid/AndroidAutoLayout ä½œè€…ï¼šå¼ é¸¿æ´‹ ä½¿ç”¨ï¼š123dependencies &#123; compile &apos;com.zhy:autolayout:1.4.5&apos;&#125; 50.EffectiveAndroidUI ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾è®²è§£é«˜æ•ˆå±•ç¤ºUIçš„æ•™å­¦åž‹App ä¸Šæ¦œç†ç”±ï¼šç¼–ç¨‹æ–°æ‰‹å¾ˆéš¾å¯¹MVC MVP,MVVMç­‰æ¨¡å¼æœ‰æ·±åˆ»çš„ç†è§£ï¼Œå¦‚æžœæœ‰ä¸€ä¸ªç¤ºä¾‹åž‹appï¼Œé‚£å¯¹åˆå­¦è€…ä¼šæœ‰å¾ˆå¤§è£¨ç›Šï¼Œç¬”è€…åœ¨é‡åˆ°å®ƒæ—¶ä¹Ÿæ˜¯ç›¸è§æ¨æ™šã€‚4.8Kä¸ªstarï¼Œè¯æ˜Žäº†å®ƒç»å—äº†å¹¿å¤§å¼€å‘è€…çš„è€ƒéªŒä¸Žå®¡è§†ï¼Œå…¶ä¸­Effective UIçš„ç¼–ç¨‹æ€æƒ³æ›´æ˜¯ä¸ŽAndroidå®˜æ–¹è¯¾ç¨‹é‡Œçš„Effective UIè¯¾ç¨‹ä¸è°‹è€Œåˆï¼Œå¹¶ä¸”ï¼Œæ­¤é¡¹ç›®è¿˜åŒ…å«äº†fragmentã€daggerã€ä¸»é¢˜æ ·å¼ã€Butterknifeç­‰ä¼—å¤šå°çŸ¥è¯†ç‚¹ï¼Œä½œä¸ºç¼–ç¨‹åˆå­¦è€…çš„å­¦ä¹ ç”¨ä¾‹å†é€‚åˆä¸è¿‡äº† githubï¼šhttps://github.com/pedrovgs/EffectiveAndroidUI ä½œè€…ï¼šPedro Vicente ä½¿ç”¨ï¼šcloneé¡¹ç›®åˆ°æœ¬åœ° 51.Luban ä¸€å¥è¯ä»‹ç»ï¼šæœ€æŽ¥è¿‘å¾®ä¿¡çš„å›¾ç‰‡åŽ‹ç¼©æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå¥½çš„æ€è·¯æ€»æ˜¯å¯ä»¥è®©ä½ å¤§æ”¾å¼‚å½©ï¼ŒLubanä»…ä»¥å›¾ç‰‡åŽ‹ç¼©å•ä¸€åŠŸèƒ½ï¼Œä¿˜èŽ·äº†4.8Kä¸ªstarï¼Œè¯æ˜Žäº†å®ƒåœ¨å›¾ç‰‡åŽ‹ç¼©ä¸Šçš„é€ è¯£ï¼Œå®ƒå¯èƒ½ä¸æ˜¯æœ€ä¼˜ç§€çš„ï¼Œä½†å®ƒæ˜¯è®©ä½ æˆ‘æœ€æŽ¥è¿‘ä¼Ÿå¤§çš„é¡¹ç›® githubï¼šhttps://github.com/Curzibn/Luban ä½œè€…ï¼šCurzibn ä½¿ç”¨ï¼š1compile &apos;top.zibin:Luban:1.1.1&apos; 52.DroidPlugin ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾çƒ­é—¨çš„æ’ä»¶åŒ–å¼€å‘æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š4.8Kä¸ªstarï¼Œæ’ä»¶åŒ–æ¡†æž¶æ¦œå•ç¬¬ä¸€åï¼Œï¼Œ360å›¢é˜Ÿå‡ºå“ï¼Œæ¡†æž¶è´¨é‡æœ‰ä¿è¯ï¼Œæœ‰æˆåŠŸæ¡ˆä¾‹â€”â€”360æ‰‹æœºåŠ©æ‰‹ï¼Œå¹¶ä¸”æŒç»­ç»´æŠ¤ç€ githubï¼šhttps://github.com/DroidPluginTeam/DroidPlugin/blob/master/readme_cn.md ä½œè€…ï¼šAndy Zhang ä½¿ç”¨:cloneé¡¹ç›®åˆ°æœ¬åœ° 53.otto ä¸€å¥è¯ä»‹ç»:ä¸€æ¬¾è€æ—§ä¸”å¼ºå¤§çš„äº‹ä»¶æ€»çº¿æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š4.8Kä¸ªstarï¼Œæ˜¯squareå›¢é˜Ÿæ—©å…ˆæŽ¨å‡ºçš„äº‹ä»¶å“åº”åž‹æ¡†æž¶ï¼Œæ·˜å®appçš„äº‹ä»¶é©±åŠ¨ä¹Ÿæ˜¯åŸºäºŽæ­¤æ¡†æž¶å°è£…çš„ï¼Œå¦‚ä»Šsquareå·²ç»å»ºè®®å¼€å‘è€…é‡‡ç”¨RxJava RxAndroidæ¥ä»£æ›¿ottoäº†ã€‚ä½†ottoä»æœ‰ä¸ŽEventBusæ¨ªå‘å¯¹æ¯”çš„ä»·å€¼ï¼Œçºµå‘æ¥è¯´ï¼Œottoä¸Žsquareè‡ªå®¶å¼€å‘çš„Rxç³»åˆ—æ¡†æž¶çš„å·®å¼‚åŒæ ·å€¼å¾—å¼€å‘è€…ä»¬åŽ»æŽ¢ç©¶ã€‚ github https://github.com/square/otto ä½œè€…ï¼šsquare ä½¿ç”¨ï¼š123456repositories &#123; mavenCentral() maven &#123; url &quot;https://oss.sonatype.org/content/repositories/snapshots/&quot; &#125;&#125;compile &apos;com.michaelpardo:activeandroid:3.1.0-SNAPSHOT&apos; 54.u2020 ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›Daggerçš„é«˜çº§æ•™å­¦ç¤ºä¾‹çš„appï¼ˆé¢ï¼Œåå­—æ˜¯æœ‰ç‚¹ç»•ï¼‰ ä¸Šæ¦œç†ç”±ï¼š4.7Kä¸ªstarï¼ŒJakeWhartonç‰µå¤´å¼€å‘çš„æ•™å­¦ç±»appï¼Œæ•™ä½ ä½¿ç”¨Daggeråœ¨å…¶ä»–é«˜çº§æ¡†æž¶çš„ç”¨æ³•ï¼Œå®ƒå±•ç¤ºäº†Daggerä¸ŽButterKnifeã€Retrofitã€Moshiã€Picassoã€Okhttpã€RxJavaã€Timberã€Madgeã€LeakCanarç­‰ä¼—å¤šä¼˜ç§€æ¡†æž¶ç»“åˆèµ·æ¥çš„é«˜çº§ç”¨æ³•ï¼Œä½ ä¹Ÿå¯ä»¥å€Ÿé‰´åˆ°è‡ªå·±çš„é¡¹ç›®å½“ä¸­ githubï¼šhttps://github.com/JakeWharton/u2020 ä½œè€…ï¼šJakeWharton 55.buck ä¸€å¥è¯ä»‹ç»ï¼šbuckæ˜¯ä¸€ä¸ªå¿«é€Ÿæž„å»ºç³»ç»Ÿ ä¸Šæ¦œç†ç”±ï¼šfacebook+googleå‡ºèº«çš„ä½œè€…ï¼Œå¯¹æž„å»ºä»£ç çš„å‡ºè‰²ç†è§£ï¼ŒåŠ ä¸Šå¤§åž‹å›¢é˜Ÿçš„ç»´æŠ¤ï¼Œä»¥åŠå¢žé‡æ›´æ–°æ—¶çš„å¿«é€Ÿé«˜æ•ˆï¼Œè®©buckæˆä¸ºäº†å¾®ä¿¡Androidå›¢é˜Ÿæž„å»ºé¡¹ç›®çš„é¦–é€‰ï¼Œæž„å»ºå¤§åž‹é¡¹ç›®æ—¶ï¼Œå®ƒæ¯”gradleæ›´å¿«ï¼Œç„¶è€Œä¸­å°å…¬å¸å¹¶ä¸é€‚åˆæ­¤æ¡†æž¶ï¼Œä½†ä½œä¸ºç«‹å¿—åœ¨æ¡†æž¶è®¾è®¡é¢†åŸŸæœ‰ä¸€ç•ªä½œä¸ºçš„äººä»¬ï¼Œæ¬¢è¿Žæ¥ä¸€æŽ¢ç©¶ç«Ÿ å®˜ç½‘åœ°å€ï¼šhttps://buckbuild.com/ githubï¼šhttps://github.com/facebook/buck ä½œè€…ï¼šfacebook ä½¿ç”¨ï¼šlinux or mac system +docs 56.PermissionsDispatcher ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾åŸºäºŽæ³¨è§£çš„æä¾›è§£å†³è¿è¡Œæ—¶å±é™©æƒé™æ–¹æ¡ˆçš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šè‡ªAndroid6.0 Googleæå‡ºå±é™©æƒé™ä¸€è¯èµ·ï¼Œç”¨æˆ·å®‰å…¨æ€§è¢«æåˆ°ä¸€å®šçš„é«˜åº¦ï¼Œä¸€äº›è¿è¡Œæ—¶å¯¹ç”¨æˆ·è¾ƒä¸ºå±é™©çš„æƒé™å°†ä¸å†è‡ªåŠ¨è¢«å¼€å‘è€…èŽ·å–ï¼Œéœ€è¦ç»è¿‡ç”¨æˆ·æ‰¹å‡†ï¼Œå¼€å‘è€…æ‰å¯ä»¥ç»§ç»­ä½¿ç”¨è¯¥æƒé™ï¼Œå¦‚æžœä½ æ›¾ç»è¢«æƒé™é—®é¢˜æžçš„æŠ“è€³æŒ è…®ï¼Œå»ºè®®ä½ è¯•è¯•è¿™ä¸ªæ¡†æž¶ï¼Œå®ƒè¶³å¤Ÿè§£å†³ä½ çš„é—®é¢˜ å®˜ç½‘åœ°å€ï¼šhttps://hotchemi.github.io/PermissionsDispatcher/ githubï¼šhttps://github.com/hotchemi/PermissionsDispatcher ä½œè€…ï¼šShintaro Katafuchi ä½¿ç”¨ï¼š123456789101112dependencies &#123; compile(&apos;com.github.hotchemi:permissionsdispatcher:$&#123;latest.version&#125;&apos;) &#123; exclude module: &quot;support-v13&quot; &#125; annotationProcessor &apos;com.github.hotchemi:permissionsdispatcher-processor:$&#123;latest.version&#125;&apos;&#125;repositories &#123; jcenter() maven &#123; url &apos;http://oss.jfrog.org/artifactory/oss-snapshot-local/&apos; &#125;&#125; 57.android-gif-drawable ä¸€å¥è¯ä»‹ç»:ä¸€æ¬¾æä¾›å±•ç¤ºGIFåŠ¨ç”»èƒ½åŠ›çš„è§†å›¾æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ®æˆ‘æ‰€æŸ¥å›½å†…è‘—åAppâ€”â€”çŸ¥ä¹Žä½¿ç”¨äº†android-gif-drawableï¼Œå› æ­¤è¯æ˜Žäº†å®ƒçš„å­˜åœ¨ä»·å€¼ï¼Œå°½ç®¡åœ¨æ¦œå•ç¬¬åä¸€ä½ä»‹ç»äº†lottie-androidç›´æŽ¥åº”ç”¨AEåŠ¨ç”»çš„ç¤ºä¾‹ï¼Œä½†AEè®¾è®¡å¸ˆä¸æ˜¯æ¯ä¸ªå…¬å¸éƒ½é…å¤‡çš„ï¼ŒGIFçš„å­˜åœ¨ï¼Œå°±å¿…ç„¶å­˜åœ¨äº†å±•ç¤ºGIFçš„éœ€è¦ï¼Œå®ƒå€¼å¾—ä½ æ‹¥æœ‰ï¼ githubï¼šhttps://github.com/koral--/android-gif-drawable ä½œè€…ï¼šKarol WrÃ³tniak ä½¿ç”¨ï¼š1234567repositories &#123; mavenCentral() maven &#123; url &quot;https://oss.sonatype.org/content/repositories/snapshots&quot; &#125;&#125;dependencies &#123; compile &apos;pl.droidsonroids.gif:android-gif-drawable:1.2.+&apos;&#125; 58.Apktool ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾åç¼–è¯‘apkçš„å·¥å…· ä¸Šæ¦œç†ç”±ï¼šå¼€æºçš„åç¼–è¯‘å·¥å…·ï¼Œå¯¹äºŽå¿—åœ¨äº†è§£apké€†å‘ç ´è§£çš„è¯¸ä½ï¼Œå€¼å¾—æ‹¥æœ‰ï¼Œ4.5kä¸ªstarï¼Œé€†å‘ç ´è§£apkç¥žå™¨ï¼ githubï¼šhttps://github.com/iBotPeaches/Apktool å®˜ç½‘åœ°å€ï¼šhttps://ibotpeaches.github.io/Apktool/ ä½œè€…ï¼šConnor Tumbleson 59.dynamic-load-apk ä¸€å¥è¯ä»‹ç»ï¼šæ’ä»¶åŒ–å¼€å‘æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š4.5kä¸ªstarï¼Œä½äºŽæ’ä»¶åŒ–å¼€å‘æ¡†æž¶ç¬¬äºŒåï¼ˆç¬¬ä¸€åæ¥è‡ª360å›¢é˜Ÿï¼‰ï¼Œå…¨é¢çš„æ–‡æ¡£ä»‹ç»è®©ä½ å¾ˆå¿«å°±èƒ½ä¸Šæ‰‹æ’ä»¶åŒ–å¼€å‘ï¼Œå¦‚æžœä½ å–œæ¬¢å¤§æ®µæ–‡å­—è®²è§£ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡¹ç›®ä¸€å®šé€‚åˆä½  githubï¼šhttps://github.com/singwhatiwanna/dynamic-load-apk ä½œè€…ï¼šsingwhatiwanna ä½¿ç”¨ï¼šgithubä¸Šçš„æ–‡æ¡£é…åˆä½œè€…åšå®¢æ›´é…å“Ÿ 60.atlas ä¸€å¥è¯ä»‹ç»ï¼šæ·˜å®æŽ¨å‡ºçš„ç»„ä»¶åŒ–å¼€å‘æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ·˜å®å›¢é˜Ÿæ‰€å‡ºçš„ç²¾å“ï¼Œatlasæ¡†æž¶æä¾›äº†è§£è€¦ã€ç»„ä»¶ã€åŠ¨æ€çš„å¼€å‘èƒ½åŠ›ï¼Œ4.5kä¸ªstarè®©ä»–ä½åˆ—ç»„ä»¶åŒ–å¼€å‘æ¡†æž¶ç¬¬ä¸€å githubï¼šhttps://github.com/alibaba/atlas ä½œè€…ï¼šalibaba 61.volley ä¸€å¥è¯ä»‹ç»ï¼šgoogleæŽ¨èä½¿ç”¨çš„Androidç«¯ç½‘ç»œè¯·æ±‚æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š4.4kä¸ªstarï¼Œå¹¶ä¸æ˜¯ä»–ä¸å¤Ÿä¼˜ç§€ï¼Œè€Œæ˜¯ä½¿ç”¨volleyå·²ç»æ¸æ¸æˆä¸ºå¹¿å¤§å¼€å‘è€…çš„ä¹ æƒ¯ githubï¼šhttps://github.com/google/volleyï¼ˆæ–°ç‰ˆvolleyåœ°å€ï¼‰ ä½œè€…ï¼šgoogle ä½¿ç”¨ï¼šcloneæºç åˆ°æœ¬åœ° 62.androidmvp ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾å±•ç¤ºAndroidç«¯Mvpè®¾è®¡çš„demo ä¸Šæ¦œç†ç”±ï¼šæ¦œå•é‡Œä¸ºæ•°ä¸å¤šã€ä»…å‡­å±•ç¤ºæŸç§è®¾è®¡æ¨¡å¼å°±èŽ·å¾—4.2Kä¸ªstarçš„é¡¹ç›®ï¼Œå¦‚æžœä½ æœ‰å°è¯•mvpçš„æ‰“ç®—ï¼Œandroidmvpå¯ä»¥ä½œä¸ºä½ çš„å‰å“¨ç«™ githubï¼šhttps://github.com/antoniolg/androidmvp ä½œè€…ï¼šAntonio Leiva ä½¿ç”¨ï¼šcloneåˆ°æœ¬åœ° 63.SwipeBackLayout ä¸€å¥è¯ä»‹ç»:ä¸€æ¬¾å¯ä»¥è®©ä½ é€šè¿‡æ»‘åŠ¨æ‰‹åŠ¿å…³é—­é¡µé¢çš„çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šä»¿å¾®ä¿¡æ»‘åŠ¨é€€å‡ºå½“å‰èŠå¤©ç•Œé¢çš„æ•ˆæžœï¼Œæä¾›äº†activityçš„æ»‘åŠ¨å…³é—­èƒ½åŠ›ï¼Œé€šè¿‡è¿™ç§æ€è·¯ï¼Œå®žçŽ°fragmentçš„æ»‘åŠ¨å…³é—­è½»è€Œæ˜“ä¸¾;ç¬”è€…åšæŒå»ºè®®è¯¸ä½cloneæºç åˆ°æœ¬åœ°æŽ¢ç´¢ä¸€ç•ªï¼›4.2kä¸ªstarè¯æ˜Žå¾ˆå¤šäººéƒ½å–œçˆ±å®ƒ githubï¼šhttps://github.com/ikew0ng/SwipeBackLayout ä½œè€…ï¼šike_w0ng ä½¿ç”¨:1compile &apos;me.imid.swipebacklayout.lib:library:1.0.0&apos; 64.FlycoTabLayout ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾å¯ä»¥è®©ä½œå‡ºå¤šç§å¤šæ ·æŒ‡ç¤ºå™¨æ•ˆæžœçš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå°½ç®¡æˆ‘ä»¬æ²¡æœ‰ç†ç”±ä¸ºäº†ç»™appåŠ å…¥é¡µé¢æŒ‡ç¤ºå™¨åŠŸèƒ½å°±é›†æˆ2.5Mçš„ä¾èµ–åº“ï¼Œä½†æ˜¯ä½œä¸ºäº†è§£viewpageræˆ–swip viewsçš„æŒ‡ç¤ºå™¨è®¾è®¡åŽŸç†çš„ä¼˜ç§€æ¡†æž¶ï¼Œä½ å€¼å¾—æ‰“å¼€å®ƒè¯•è¯•ï¼Œç¬”è€…å»ºè®®å•ç‹¬æ‹†åˆ†æ‰€éœ€æºç ï¼ŒåŠ å…¥åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­åŽ»ã€‚4.1Kä¸ªstarï¼ŒäºŒæ¬¡å¼€å‘çš„ä½œå“ï¼Œä»ç„¶æŽ¨èï¼ githubï¼šhttps://github.com/H07000223/FlycoTabLayout ä½œè€…ï¼šFlyco 65.android-testing ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾å±•ç¤ºå››å¤§è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æž¶ç”¨ä¾‹çš„demoï¼ˆEspressoï¼ŒUiAutomatorï¼ŒAndroidJunitRunnerï¼ŒJUnit4ï¼‰ ä¸Šæ¦œç†ç”±ï¼šå­¦ä¹ è€…ç»å¸¸ä¼šé™·å…¥ä¼¼æ‡‚éžæ‡‚çš„å¢ƒåœ°ï¼Œå¦‚æžœä½ æœ‰å¹¸å­¦ä¹ è¿‡Android Testing Support Library siteçš„è¯¾ç¨‹ï¼Œé‚£ä¹ˆä½ ä¸€å®šå¯¹androidçš„å››å¤§æµ‹è¯•æ¡†æž¶è¿«ä¸åŠå¾…ï¼Œè¿™æ¬¾demoéžå¸¸é€‚åˆä½ ï¼Œå¿«æ¥å­¦ä¹ è¿™ä¸ª4.1kä¸ªstarçš„æ˜Žæ˜Ÿé¡¹ç›®å§ githubï¼šhttps://github.com/googlesamples/android-testing ä½œè€…ï¼šgooglesampeså›¢é˜Ÿ 66.FileDownloader ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾é«˜æ•ˆã€ç¨³å®šã€çµæ´»ã€æ˜“ç”¨çš„æ–‡ä»¶ä¸‹è½½å¼•æ“Ž ä¸Šæ¦œç†ç”±ï¼š4.1kè¯æ˜Žäº†å®ƒæœ‰å¤šå—äººå–œçˆ±ï¼Œæ–‡ä»¶ä¸‹è½½çœ‹ä¼¼ç®€å•çš„èƒŒåŽæš—è—äº†å¤šå°‘çš„å‘å‘ç‚¹ç‚¹ï¼Œæˆ‘çŸ¥é“ä½ æœ‰èƒ½åŠ›è‡ªå·±å®žçŽ°æ–‡ä»¶ä¸‹è½½åŠŸèƒ½ï¼Œä½†ä¼˜ç§€çš„æ¡†æž¶å¯ä»¥æå‡ä½ çš„è®¾è®¡ç¼–ç èƒ½åŠ›ï¼Œè¿™æ¬¾æ¡†æž¶å¯ä»¥æå‡ä½ çš„å®žåŠ›ï¼ githubï¼šhttps://github.com/lingochamp/FileDownloader ä½œè€…ï¼šLingoChampå›¢é˜Ÿ ä½¿ç”¨ï¼š123dependencies &#123; compile &apos;com.liulishuo.filedownloader:library:1.5.5&apos;&#125; 67.JieCaoVideoPlayer ä¸€å¥è¯ä»‹ç»ï¼šåŸºäºŽMediaPlayer apiâ€”â€”VideoView çš„å¤šåª’ä½“æ’­æ”¾æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ¦œå•é‡Œç¬¬ä¸‰æ¬¾å¤šåª’ä½“æ’­æ”¾æ¡†æž¶ï¼Œå®ƒä»¥çµå·§çš„èº«å§¿æŒ¤å…¥æœ¬æ¦œå•ï¼Œç²¾å·§æ˜¯å®ƒæœ€å¤§çš„ä¼˜ç‚¹ï¼Œä¸åˆ°100kï¼Œæ‹¥æœ‰å®ƒï¼Œä½ å°±å¯ä»¥å¿«é€Ÿå¼€å‘ç±»ä¼¼ä»Šæ—¥å¤´æ¡é‚£æ ·çš„è§†é¢‘æ’­æ”¾æ•ˆæžœï¼Œ4kä¸ªstarï¼Œè¯æ˜Žå®ƒå€¼å¾—ä¸€è¯• githubï¼šhttps://github.com/lipangit/JieCaoVideoPlayer ä½œè€…ï¼šNathen ä½¿ç”¨ï¼š1compile &apos;fm.jiecao:jiecaovideoplayer:5.5.4&apos; 68.glide-transformations ä¸€å¥è¯ä»‹ç»ï¼šä¸ºä¼—å¤šè‘—åå›¾ç‰‡åŠ è½½æ¡†æž¶æä¾›å›¾ç‰‡å½¢çŠ¶å˜å¹»èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šåœ¨æ¦œå•é å‰çš„éƒ¨åˆ†å·²ç»ä»‹ç»è¿‡glideï¼ŒPicassoï¼ŒFrescoç­‰å›¾ç‰‡åŠ è½½æ¡†æž¶ï¼Œglide-transformationså°±æ˜¯ä¸€æ¬¾ä¸ºä»–ä»¬æä¾›å›¾ç‰‡å˜å½¢èƒ½åŠ›çš„æ¡†æž¶ï¼Œä½¿ç”¨èµ·æ¥éžå¸¸ç®€å•ï¼Œå› æ­¤å—åˆ°äº†å¤§å®¶çš„å–œçˆ±ï¼Œgithubä¸Šæœ‰3.8Kä¸ªstar githubï¼šhttps://github.com/wasabeef/glide-transformations ä½œè€…ï¼šDaichi Furiya ä½¿ç”¨ï¼š123456789repositories &#123; jcenter()&#125;dependencies &#123; compile &apos;jp.wasabeef:glide-transformations:2.0.2&apos; // If you want to use the GPU Filters compile &apos;jp.co.cyberagent.android.gpuimage:gpuimage-library:1.4.1&apos;&#125; åœ¨Glideé‡Œè®¾ç½®å˜å¹»æ•ˆæžœ 12345Set Glide Transform.Glide.with(this).load(R.drawable.demo) .bitmapTransform(new BlurTransformation(context)) .into((ImageView) findViewById(R.id.image)); 69.android-gpuimage ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾åŸºäºŽOpenGLçš„å›¾ç‰‡æ¸²æŸ“å¼•æ“Ž ä¸Šæ¦œç†ç”±ï¼šæ”¾ä¸‹GpuImageåœ¨IOSå¹³å°çš„è£èª‰ä¸è°ˆï¼ŒAndroidç‰ˆçš„android-gpuimageå°±æä¾›å¤šè¾¾70å¤šç§å›¾ç‰‡æ¸²æŸ“æ•ˆæžœï¼Œä½ è¿˜åœ¨å¥½å¥‡ç¾Žå›¾ç§€ç§€æ˜¯å¦‚ä½•å®žçŽ°å›¾ç‰‡å˜å¹»çš„ï¼Ÿæœ‰äº†å®ƒï¼Œä¸€åˆ‡éƒ½ä¸æ˜¯é—®é¢˜ã€‚å¦‚æžœä½ æ˜¯ç¾Žå›¾å·¥å…·ç±»çš„å·¥ç¨‹å¸ˆï¼Œæ­¤æ¡†æž¶çš„å»ºè®¾æ€è·¯ä¹Ÿä¼šå¯¹ä½ å¤§æœ‰è£¨ç›Šã€‚ç¬”è€…ä¹Ÿæ˜¯é€šè¿‡android-gpuimageä»¿é€ äº†ç¾Žå›¾Appå¹¶ä¿˜èŽ·å¥³å‹èŠ³å¿ƒçš„ï¼Œå†æ¬¡ä¸ºå®ƒçš„å®žåŠ›ç‚¹èµžã€‚iosç‰ˆ+androidç‰ˆä¸€å…±19kä¸ªstarï¼Œå·²ç»è¯æ˜Žäº†å®ƒçš„å®žåŠ›ï¼Œè¿˜åœ¨ç­‰ä»€ä¹ˆå‘¢ï¼Ÿ githubï¼šhttps://github.com/CyberAgent/android-gpuimage ä½œè€…ï¼šCyberAgent å›¢é˜Ÿ ä½¿ç”¨ï¼š1234567repositories &#123; jcenter()&#125;dependencies &#123; compile &apos;jp.co.cyberagent.android.gpuimage:gpuimage-library:1.4.1&apos;&#125; æ›´å¤šçš„æ”¹é€ æ–¹æ³•ï¼Œè¿˜éœ€è¦é˜…è¯»Iosçš„ç¼–ç¨‹æ–‡æ¡£ï¼Œå¯¹äºŽæœ‰æ¯…åŠ›çš„å°ä¼™ä¼´å¼ºåŠ›æŽ¨èï¼ 70.RxPermissions ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾åŸºäºŽRxJavaå®Œæˆæƒé™ç”³è¯·çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ¦œå•é‡Œç¬¬äºŒæ¬¾æä¾›æƒæœåŠ¡çš„æ¡†æž¶ï¼ŒåŸºäºŽRxJavaçš„è®¾è®¡ï¼Œè®©ä½ å¯ä»¥ä¸“å¿ƒå†™ä¸šåŠ¡ï¼Œ3.7Kä¸ªstarå·²ç»è¯æ˜Žäº†å®ƒçš„å®žç”¨ä»·å€¼ githubï¼šhttps://github.com/tbruyelle/RxPermissions ä½œè€…ï¼šThomas Bruyelle ä½¿ç”¨ï¼š1234567repositories &#123; jcenter() // If not already there&#125;dependencies &#123; compile &apos;com.tbruyelle.rxpermissions:rxpermissions:0.9.4@aar&apos;&#125; ä¼˜é›…çš„ä½¿ç”¨ï¼š 12345678910RxPermissions rxPermissions = new RxPermissions(this); rxPermissions .request(Manifest.permission.CAMERA) .subscribe(granted -&gt; &#123; if (granted) &#123; // I can control the camera now &#125; else &#123; // Oups permission denied &#125; &#125;); 71.freeline ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾åŠ¨æ€æ›¿æ¢çš„ç¼–è¯‘æž„å»ºæ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šç»§Facebookçš„Buckï¼ŒAndrodiå®˜æ–¹çš„InstRunä¹‹åŽï¼Œèš‚èšé‡‘æœæŽ¨å‡ºäº†Freelineç¼–è¯‘æ¡†æž¶ï¼Œå®˜ç½‘å®£ç§°Freelineä¸Žä¸šå†…ä¸»æµæž„å»ºæ–¹å¼ç›¸æ¯”ä»ç„¶æœ‰æ•°å€çš„é€Ÿåº¦é¢†å…ˆ;æŽ’è¡Œæœ‰å…ˆåŽï¼Œç¼–è¯‘é€Ÿåº¦å¹¶ä¸åœ¨æœ¬æ¦œå•æŽ’åºçš„è€ƒæ®å› ç´ ä¸­ï¼Œå› æ­¤freelineä»¥3.7ä¸ªstarï¼Œæš‚åˆ—ç¼–è¯‘æ¡†æž¶ç¬¬äºŒå å®˜ç½‘åœ°å€ï¼šhttps://www.freelinebuild.com/ githubï¼šhttps://github.com/alibaba/freeline ä½œè€…ï¼šalibaba ä½¿ç”¨ï¼š1234567891011121314buildscript &#123; repositories &#123; jcenter() &#125; dependencies &#123; classpath &apos;com.antfortune.freeline:gradle:0.8.7&apos; &#125;&#125;apply plugin: &apos;com.antfortune.freeline&apos;android &#123; ...&#125; File â†’ Settingsâ€¦ â†’ Plugins â†’ Browse repositories â†’freeline. 72.RxLifecycle ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›åœ¨ä½¿ç”¨RxJavaè¿‡ç¨‹ä¸­ç®¡ç†Activityå’ŒFragmentç”Ÿå‘½å‘¨æœŸèƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šåœ¨æ¦œå•é å‰çš„éƒ¨åˆ†ï¼Œä½ å·²ç»äº†è§£RxJavaå’ŒRxAndroidçš„å¼ºå¤§ä¹‹å¤„ï¼Œä½†éƒ¨åˆ†ç²—å¿ƒçš„å¼€å‘è€…å› ä¸ºæ²¡æœ‰åŠæ—¶å–æ¶ˆè®¢é˜…è€Œäº§ç”Ÿä¸¥é‡çš„å†…å­˜æ³„æ¼ï¼Œä¸è¦æ‹…å¿ƒï¼ŒRxLifecycleå¯ä»¥ä¸ºä½ è§£å†³éš¾é¢˜ï¼Œåœ¨gtihubä¸Šæ‹¥æœ‰3.7Kä¸ªstarï¼Œå›½å†…çŸ¥åè½¯ä»¶â€”â€”çŸ¥ä¹Žå’Œæ·˜å®ä¹Ÿéƒ½åœ¨ä½¿ç”¨å®ƒ githubï¼šhttps://github.com/trello/RxLifecycle ä½œè€…ï¼štrelloå›¢é˜Ÿ ä½¿ç”¨ï¼šcloneæºç åˆ°æœ¬åœ° 73.classyshark ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾å¯æ‰§è¡Œæ–‡ä»¶æµè§ˆå™¨ ä¸Šæ¦œç†ç”±ï¼šæ¦œå•é‡Œç»§Apktoolä¹‹åŽç¬¬äºŒæ¬¾apké€†å‘å·¥å…·ï¼Œå¦‚æžœä½ å–œæ¬¢ä¼˜é›…çš„å›¾å½¢æ•°æ®å±•ç¤ºï¼Œé‚£ä¹ˆä½ ä¸€å®šä¸èƒ½é”™è¿‡ä»–ï¼Œclassysharkå¯ä»¥å°†ç ´è§£çš„ç»“æžœä»¥å›¾å½¢åŒ–å±•ç¤ºç”¨æˆ·ï¼Œæ–¹ä¾¿åˆ†æžï¼Œ3.7Kä¸ªstarï¼Œè®©å®ƒæš‚åˆ—apké€†å‘å·¥å…·ç¬¬äºŒä½ï¼ githubï¼šhttps://github.com/google/android-classyshark ä½œè€…ï¼šgoogle ä½¿ç”¨ï¼šä¸‹è½½ JAR 74.acra ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›è®°å½•APPå´©æºƒæ—¥å¿—èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœä½ é¢ä¸´ç€æ”¶é›†APPå´©æºƒæ—¥å¿—çš„éœ€æ±‚ï¼Œé‚£ä¹ˆacraæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚3.7Kä¸ªstarï¼Œè®©acraä½åˆ—å´©æºƒæ—¥å¿—æ¡†æž¶æŽ’è¡Œæ¦œç¬¬ä¸€åï¼Œacraæœ‰è¶³å¤Ÿçš„èƒ½åŠ›è®°å½•çº¿ä¸ŠAPPï¼Œå¹¶ä¸”å‘å›žæœåŠ¡ç«¯ï¼Œacraä¹Ÿæä¾›äº†ç›¸å½“æ£’çš„å´©æºƒæ—¥å¿—ç»Ÿè®¡æœåŠ¡ç«¯æ¡†æž¶Acralyzerï¼Œcralyzerå·¥ä½œåœ¨Apache CouchDBä¹‹ä¸Šï¼Œæ‰€ä»¥é™¤äº†CouchDBä¹‹å¤–ï¼Œæ²¡æœ‰å¿…è¦å®‰è£…ä»»ä½•é¢å¤–çš„è½¯ä»¶ï¼Œç§»åŠ¨ç«¯å¼€å‘è€…ä¹Ÿå¯ä»¥å€Ÿæ­¤å­¦ä¹ æœåŠ¡ç«¯çš„å»ºè®¾ï¼Œä¸€ä¸¾ä¸¤å¾—ï¼ githubï¼šhttps://github.com/ACRA/acra æœåŠ¡ç«¯githubï¼šhttps://github.com/ACRA/acralyzer ä½œè€…ï¼šacraå›¢é˜Ÿ ä½¿ç”¨ï¼šæ²¡æœ‰ä»€ä¹ˆæ–¹æ³•æ¯”cloneæºç åˆ°æœ¬åœ°æ›´æ–¹ä¾¿äº† 75.DiskLruCache ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›ç£ç›˜æ–‡ä»¶ç¼“å­˜ç®¡ç†èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š3.7kä¸ªstarå¹¶ä¸è¶³ä»¥è¯´æ˜ŽDiskLruCacheçš„ä¼˜ç§€ï¼Œä»…ä»…ä»¥ç®¡ç†ç£ç›˜æ–‡ä»¶èƒ½åŠ›å•ç‹¬æ‹Žå‡ºæ¥æˆä¸ºä¸€ä¸ªæ¡†æž¶ï¼Œä½œè€…éœ€è¦å¾ˆå¤§çš„å‹‡æ°”ï¼Œå¾ˆå¹¸è¿ï¼Œä½œè€…åšåˆ°äº†ï¼Œå¹¶ä¸”ä¹Ÿæˆä¸ºGoogleå®˜ç½‘æå€¡çš„ç¼“å­˜ ï¼›å¦‚è¿˜è®°å¾—ä¸Šæ¬¡åšâ€œä¸€é”®æ¸…é™¤ç¼“å­˜â€ã€â€œæŸ¥çœ‹ç¼“å­˜æ–‡ä»¶å¤§å°â€åŠŸèƒ½æ˜¯ä»€ä¹ˆæ—¶å€™å—ï¼ŸDiskLruCacheä¸€å¥è¯å°±å¯ä»¥æžå®šï¼ githubï¼šhttps://github.com/JakeWharton/DiskLruCache ä½œè€…ï¼šJakeWharton ä½¿ç”¨ï¼š1compile &apos;com.jakewharton:disklrucache:2.0.2&apos; æˆ–è€…ä¸‹è½½ latest .jar 76.dexposed ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æ”¯æ’‘é˜¿é‡Œå¤§éƒ¨åˆ†Appå®¢æˆ·ç«¯çƒ­ä¿®å¤ã€çº¿ä¸Šè°ƒè¯•èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ¦œå•ä¸Šå†æ¬¡å‡ºçŽ°çƒ­ä¿®å¤æ¡†æž¶çš„èº«å½±ï¼Œè¯æ˜ŽAppçƒ­ä¿®å¤æŠ€æœ¯çš„ç«çƒ­ï¼Œdexposedæä¾›å›¾å½¢åŒ–çš„æ€§èƒ½ç›‘æŽ§ã€åœ¨çº¿çƒ­ä¿®å¤bugæ¼æ´žã€æ”¯æŒAOPç¼–ç¨‹æ€æƒ³ç­‰ï¼Œä¸è®ºä½ æ˜¯ä¼ä¸šçƒ­ä¿®å¤æŠ€æœ¯çš„è®¾è®¡è€…è¿˜æ˜¯æ‰“ç®—åœ¨çƒ­ä¿®å¤é¢†åŸŸä¸€æŽ¢ç©¶ç«Ÿçš„æ–°äººï¼Œè¿™æ¬¾æ¡†æž¶å¾ˆé€‚åˆä½ ã€‚3.5kä¸ªstarï¼Œè¯æ˜Žå®ƒä½œä¸ºä¸€é—¨æŠ€æœ¯æ¡†æž¶çš„å­˜åœ¨ï¼Œæ˜¯å¤šä¹ˆä»¤äººå–œçˆ±ï¼ githubï¼šhttps://github.com/alibaba/dexposed ä½œè€…ï¼šalibaba ä½¿ç”¨ï¼š123dependencies &#123; compile &apos;com.taobao.android:dexposed:0.1.1@aar&apos; &#125; 77.Litho ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›é«˜æ•ˆæž„å»ºUIèƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šä½œä¸ºä¸€æ¬¾ä¸“é—¨æž„å»ºUIçš„æ¡†æž¶ï¼ŒLithoé«˜æ•ˆçš„åœ°æ–¹åœ¨äºŽï¼šå•ç‹¬å¼€è¾Ÿäº†ç”¨äºŽæ¸²æŸ“å’Œå¸ƒå±€çš„çº¿ç¨‹ï¼Œç„¶åŽå°†åˆ›å»ºå¥½çš„ç»„ä»¶ä¼ é€’ç»™UIçº¿ç¨‹åŽ»å®Œæˆæœ€ç»ˆçš„æ¸²æŸ“ï¼Œä½¿ç”¨æ›´å°‘çš„è§†å›¾å±‚çº§ï¼Œæ¥æå‡ç•Œé¢çš„æ»šåŠ¨é€Ÿåº¦ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå®ƒä»…æ”¯æŒå¼€å‘è€…ä½œå‡ºä¸å¯æ”¹å˜çš„UIç»„ä»¶ ,3.5Kä¸ªstarï¼Œè¯æ˜Žäº†å®ƒåœ¨æž„å»ºUIé¢†åŸŸçš„ä»·å€¼ï¼Œæ›´å¤šçš„å¦™å¤„ï¼ŒæœŸå¾…ä½ äº²è‡ªåŽ»å‘æŽ˜ï¼ githubï¼šhttps://github.com/facebook/litho ä½œè€…ï¼šfacebook ä½¿ç”¨ï¼š123456789101112131415161718192021dependencies &#123; // ... // Litho compile &apos;com.facebook.litho:litho-core:0.3.1&apos; compile &apos;com.facebook.litho:litho-widget:0.3.1&apos; provided &apos;com.facebook.litho:litho-annotations:0.3.1&apos; annotationProcessor &apos;com.facebook.litho:litho-processor:0.3.1&apos; // SoLoader compile &apos;com.facebook.soloader:soloader:0.2.0&apos; // Optional // For debugging debugCompile &apos;com.facebook.litho:litho-stetho:0.3.1&apos; // For integration with Fresco compile &apos;com.facebook.litho:litho-fresco:0.3.1&apos; // For testing testCompile &apos;com.facebook.litho:litho-testing:0.3.1&apos;&#125; 78.mosby ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›æž„å»ºMVPé¡¹ç›®èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šæ¦œå•é å‰çš„éƒ¨åˆ†å·²ç»ä»‹ç»äº†MVC,MVVM,MVPçš„æ¡†æž¶é¡¹ç›®ï¼Œæƒ³å¿…æ­¤æ—¶ä½ åœ¨æž„å»ºä¼ä¸šé¡¹ç›®æž¶æž„ä¸Šï¼Œé€‰æ‹©æˆ–è€…å¼€å‘ä¸€æ¬¾åˆé€‚çš„MVPæ¡†æž¶è¿«åœ¨çœ‰ç«ï¼Œmosbyå¯ä»¥ä½œä¸ºä½ çš„ç¬¬ä¸€æ­¥å‚è€ƒï¼Œä½ å¯ä»¥å°è£…å®ƒï¼Œä¹Ÿå¯ä»¥ç…§æŠ„å®ƒï¼Œæ— è®ºå¦‚ä½•ï¼Œ3.4Kä¸ªstarï¼Œè¯æ˜Žäº†å®ƒåœ¨æ¡†æž¶è®¾è®¡ä¸Šæœ‰å¤šå—å¼€å‘è€…çš„å–œçˆ± githubï¼šhttps://github.com/sockeqwe/mosby ä½œè€…ï¼šHannes Dorfmann ä½¿ç”¨ï¼š1234567891011121314dependencies &#123; compile &apos;com.hannesdorfmann.mosby3:mvi:3.0.4&apos; // Model-View-Intent // or compile &apos;com.hannesdorfmann.mosby3:mvp:3.0.4&apos; // Plain MVP // or compile &apos;com.hannesdorfmann.mosby3:viewstate:3.0.4&apos; // MVP + ViewState support&#125;allprojects &#123; repositories &#123; ... maven &#123; url &quot;https://oss.sonatype.org/content/repositories/snapshots/&quot; &#125;&#125; 79.AndResGuard ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›èµ„æºæ–‡ä»¶è·¯å¾„æ··æ·† çš„å·¥å…· ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœä½ æ˜¯ä¸ªå¯¹APKå¤§å°å¾ˆæ•æ„Ÿçš„äººï¼Œé‚£ä¹ˆAndResGuardä¸€å®šé€‚åˆä½ ï¼Œå®ƒçš„åŽŸç†ç±»ä¼¼Java Proguardï¼Œä½†æ˜¯åªé’ˆå¯¹èµ„æºã€‚ä»–ä¼šå°†åŽŸæœ¬å†—é•¿çš„èµ„æºè·¯å¾„å˜çŸ­ï¼Œä¾‹å¦‚å°†res/drawable/wechatå˜ä¸ºr/d/aï¼Œ3.4Kä¸ªstarï¼Œè¯æ˜Žäº†åœ¨ä¼˜åŒ–APKé“è·¯ä¸Šï¼Œä½ ä¸æ˜¯ä¸€ä¸ªäººåœ¨æˆ˜æ–—ï¼ githubï¼šhttps://github.com/shwenzhang/AndResGuard ä½œè€…ï¼šwechat team ä½¿ç”¨ï¼šcloneé¡¹ç›®åˆ°æœ¬åœ°ï¼Œå…¶å®žä¹Ÿå°±æ˜¯ä¸ªä¸‰ä¸¤å¥è¯çš„æ–‡æ¡£ 80.StatusBarUtil ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›è®¾ç½®æ²‰æµ¸å¼çŠ¶æ€æ æ ·å¼èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šè®¾è®¡å¸ˆMMæ€»æ˜¯æŠ±æ€¨ç³»ç»ŸçŠ¶æ€æ ä¸ä¼˜é›…ï¼Ÿé‚£å°±ç»™å¥¹ä¸€ä¸ªå®Œç¾Žçš„æ²‰æµ¸å¼çŠ¶æ€æ ã€‚StatusBarUtilå¯ä»¥éšå¿ƒæ‰€æ¬²çš„è®¾ç½®çŠ¶æ€æ æ ·å¼ï¼Œ3.3Kä¸ªstarï¼Œè¶³ä»¥è¯´æ˜Žå®ƒæœ‰å¤šå—è®¾è®¡MMçš„å–œçˆ± githubï¼šhttps://github.com/laobie/StatusBarUtil ä½œè€…ï¼šJaeger ä½¿ç”¨ï¼š1compile &apos;com.jaeger.statusbarutil:library:1.4.0&apos; 81.robolectric ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾ä¸ä¾èµ–äºŽAndroidè®¾å¤‡çš„å•å…ƒæµ‹è¯•æ¡†æž¶ï¼Œ ä¸Šæ¦œç†ç”±ï¼šsampleä¸­åˆ—ä¸¾äº†å¦‚ä½•å¯¹Androidå››å¤§ç»„ä»¶å’Œå¸¸è§åŠŸèƒ½æµ‹è¯•çš„ç”¨ä¾‹ï¼Œ3.2Kä¸ªstarï¼Œå€¼å¾—å……æ»¡å¥½å¥‡å¿ƒçš„äººå°è¯• å®˜ç½‘åœ°å€ï¼šhttp://robolectric.org/ githubï¼šhttps://github.com/robolectric/robolectric ä½œè€…ï¼šrobolectric ä½¿ç”¨ï¼š1testCompile &quot;org.robolectric:robolectric:3.3.2&quot; 82.Fragmentation ä¸€å¥è¯ä»‹ç»:ä¸€æ¬¾æä¾›ç®¡ç†FragmenåµŒå¥—tèƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå¯¹äºŽActivityå’ŒFragmentä½¿ç”¨ï¼Œä½ ä¸€å®šå¾—å¿ƒåº”æ‰‹ï¼Œä½†å¦‚æžœè¦åšä¸€å¥—é€šç”¨çš„Activity&amp;FragmentåµŒå¥—è®¾è®¡ï¼Œæƒ³å¿…ä½ æœ‰ç‚¹æ‰‹è¶³æ— æŽªäº†ï¼ŒFragmentationå¯ä»¥ä½œä¸ºä½ è®¾è®¡Fragmentç®¡ç†ä¸Šçš„ç¬¬ä¸€æ­¥ï¼Œ3.2Kä¸ªstarï¼Œç¬”è€…è®¤ä¸ºæœ‰ç‚¹åå‰¯å…¶å®žäº†ï¼Œé¡¹ç›®ä»‹ç»é‡Œè¯´çš„æ˜¯Fragmentçš„ç®¡ç†èƒ½åŠ›ï¼Œä½†å¹¶æœªæä¾›Fragment&amp;Activityç”Ÿå‘½å‘¨æœŸã€ä»»åŠ¡æ ˆçš„ç®¡ç†èƒ½åŠ›ï¼Œå› æ­¤å¾ˆéš¾ç›´æŽ¥åº”ç”¨åˆ°ä¼ä¸šé¡¹ç›®å½“ä¸­ï¼Œä½†æºç å½“ä¸­çš„è®¾è®¡æ€è·¯ï¼Œå€¼å¾—ç¬”è€…ä¸Žè¯¸ä½å€Ÿé‰´ï¼Œæ‹¾äººç‰™æ…§ç•™æœ‰ä½™é¦™ï¼ githubï¼šhttps://github.com/YoKeyword/Fragmentation ä½œè€…ï¼šYoKey ä½¿ç”¨ï¼š1// appcompat v7åŒ…æ˜¯å¿…é¡»çš„compile â€˜me.yokeyword:fragmentation:0.10.7â€™// å¦‚æžœæƒ³ä½¿ç”¨SwipeBack æ»‘åŠ¨è¾¹ç¼˜é€€å‡ºFragment/ActivityåŠŸèƒ½ï¼Œè¯·å†æ·»åŠ ä¸‹é¢çš„åº“// compile â€˜me.yokeyword:fragmentation-swipeback:0.10.4â€™ 83.Small ä¸€å¥è¯ä»‹ç»ï¼šè½»å·§çš„æ’ä»¶åŒ–æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šä½œä¸ºæ’ä»¶æ¡†æž¶æ¦œå•çš„æ–°æˆå‘˜ï¼ŒSmallçš„ä¼˜ç‚¹æ˜¯è½»å·§ï¼Œé€‚åˆä½œä¸ºå°å›¢é˜Ÿçš„æ’ä»¶å¼€å‘æ–¹æ¡ˆï¼Œ3.1Kä¸ªstarï¼Œè®©å®ƒèŽ·å¾—äº†é…·ç‹—éŸ³ä¹ç­‰è‘—åå¼€å‘å›¢é˜Ÿçš„é’çï¼Œå¦‚æžœä½ ä»¬çš„å›¢é˜Ÿæƒ³é€æ­¥å®žæ–½æ’ä»¶åŒ–å¼€å‘ï¼ŒSmallæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼ å®˜ç½‘åœ°å€ï¼šhttp://code.wequick.net/Small/cn/cases githubï¼šhttps://github.com/wequick/Small ä½œè€…ï¼šwequick å›¢é˜Ÿ ä½¿ç”¨ï¼š123456789buildscript &#123; dependencies &#123; classpath &apos;net.wequick.tools.build:gradle-small:1.2.0-alpha6&apos; &#125;&#125;apply plugin: &apos;net.wequick.small&apos;small &#123; aarVersion = &apos;1.2.0-alpha6&apos;&#125; 84.JsBridge ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›WebViewå’ŒJavascripté€šä¿¡èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šè¯¥æ¡†æž¶æä¾›ç»™äº†å…è®¸H5é¡µé¢è°ƒç”¨é€šè¿‡JSè°ƒç”¨Appæ–¹æ³•çš„èƒ½åŠ›ï¼›3.1Kä¸ªstarï¼Œç®€æ´çš„é€šè®¯æ–¹å¼ï¼Œå€¼å¾—æ¯ä¸€ä¸ªWebHybrid Appå¼€å‘è€…å°è¯• gtihubï¼šhttps://github.com/lzyzsd/JsBridge ä½œè€…ï¼šhiå¤§å¤´é¬¼hi ä½¿ç”¨ï¼š12345678repositories &#123; // ... maven &#123; url &quot;https://jitpack.io&quot; &#125;&#125;dependencies &#123; compile &apos;com.github.lzyzsd:jsbridge:1.0.4&apos;&#125; 85.richeditor-android ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾å¼ºå¤§çš„å¯Œæ–‡æœ¬ç¼–è¾‘æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š2.8kä¸ªstarï¼Œæ¦œå•é‡Œç¬¬ä¸€ä¸ªä¸ºTextViewæä¾›æ‰©å±•èƒ½åŠ›çš„æ¡†æž¶ï¼Œä½ æš‚æ—¶ä¸éœ€è¦å®ƒï¼Œä½†ä¸èƒ½ä¸çŸ¥é“å®ƒ githubï¼šhttps://github.com/wasabeef/richeditor-android ä½œè€…ï¼šDaichi Furiya ä½¿ç”¨ï¼š1234567repositories &#123; jcenter()&#125;dependencies &#123; compile &apos;jp.wasabeef:richeditor-android:1.2.2&apos;&#125; 86.Transitions-Everywhere ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æ•™ä½ æ­£ç¡®ä½¿ç”¨Transitions APIï¼ˆAndroid è½¬åœºåŠ¨ç”»APIï¼‰çš„æ•™å­¦åž‹é¡¹ç›® ä¸Šæ¦œç†ç”±ï¼šä½ å¯èƒ½è¿˜æœªå°è¯•è¿‡Android APIçš„Transitions æ¡†æž¶ï¼Œå¯èƒ½å¬è¿‡ï¼Œä½†å´æ— æ³•åšå‡ºä¼˜é›…å¥‡å¦™çš„åŠ¨æ•ˆâ€”â€”åˆ«æ‹…å¿ƒï¼ŒTransitions-Everywhereæ­£å¦‚å®ƒçš„åå­—ä¸€æ ·ï¼Œå®ƒå°†å¸¦ä½ å…¨é¢ä½“éªŒTransitions çš„å¼ºå¤§ä¹‹å¤„ githubï¼šhttps://github.com/andkulikov/Transitions-Everywhere ä½œè€…ï¼šAndrey Kulikov ä½¿ç”¨ï¼š123dependencies &#123; compile &quot;com.andkulikov:transitionseverywhere:1.7.4&quot;&#125; 87.android-viewbadger ä¸€å¥è¯ä»‹ç»ï¼šèƒ½å¤Ÿå¿«é€Ÿçš„ä¸ºAndroid è§†å›¾åŠ å…¥â€œå‹‹ç« â€èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœè¯´å‹‹ç« ä¸€è¯å¬èµ·æ¥é™Œç”Ÿï¼Œé‚£ä¹ˆæ˜¾ç¤ºå·²è¯»æœªè¯»ä¸ªæ•°ã€å°çº¢ç‚¹æ ‡è®°ä¿¡æ¯è¿™ä¸€ç±»è¯è¯­ä½ ä¸€å®šä¸å¤ªé™Œç”Ÿï¼Œç¬”è€…ç›¸ä¿¡åœ¨è¯¸ä½å®žé™…å¼€å‘ä¸­ç»å¸¸é‡åˆ°ä¸ºæŸäº›itemåŠ å…¥å°çº¢ç‚¹æ ‡è®°çš„éœ€æ±‚ï¼Œèªæ˜Žçš„å„ä½ä¸€å®šæœ‰ç€å„ç§å®žçŽ°æ–¹æ¡ˆï¼Œä¸ºä»€ä¹ˆä¸èƒ½å¿«é€Ÿä¼˜é›…çš„å®Œæˆå‘¢ï¼Ÿandroid-viewbadgerå¯ä»¥å¸®ä½ å®žçŽ°ï¼Œå½“ç„¶ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦å…·å¤‡ä¿®æ”¹æºç çš„èƒ½åŠ›ï¼Œä»¥ç¬¦åˆè®¾è®¡MMçš„éœ€æ±‚ï¼å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™å®½é¡¹ç›®å·²ç»äº”å¹´æ²¡æœ‰æ›´æ–°äº†ï¼ githubï¼šhttps://github.com/jgilfelt/android-viewbadger ä½œè€…ï¼šJeff Gilfelt ä½¿ç”¨ï¼šcloneæºç åˆ°æœ¬åœ° 1234View target = findViewById(R.id.target_view);BadgeView badge = new BadgeView(this, target);badge.setText(&quot;1&quot;);badge.show(); 88.AndroidWiFiADB ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾ä¸ç”¨æ•°æ®çº¿ä¹Ÿå¯ä»¥è®©ä½ è°ƒè¯•æ‰‹æœºè®¾å¤‡APPçš„æ’ä»¶é¡¹ç›® ä¸Šæ¦œç†ç”±ï¼šä½ æ˜¯å¦è¿˜åœ¨æ‹…å¿ƒæµ‹è¯•è¿‡ç¨‹ä¸­é«˜å¼ºåº¦çš„æ‹”æ’æ•°æ®çº¿å¯¹æ‰‹æœºç”µæ± å’ŒUSBç«¯å£é€ æˆç»ˆç”Ÿéš¾ä»¥å¼¥è¡¥çš„æŸå®³ï¼Ÿåˆ«æ‹…å¿ƒï¼Œæœ‰wifiæœ‰AndroidWiFiADBï¼Œæ— é¡»æ•°æ®çº¿ä¹Ÿå¯ä»¥è°ƒè¯•åº”ç”¨äº†ï¼Œæ›´æœ‰è¶£çš„æ˜¯ï¼Œåœ¨æµ‹è¯•å·¥ç¨‹å¸ˆä¸€è¾¹æ‹¿ç€æ‰‹æœºä¸€è¾¹æ‰¾ä½ èŠbugçš„æ—¶å€™ï¼Œä½ å·²ç»å·å·åœ¨å®ƒçš„æ‰‹æœºä¸Šä¿®å¤äº†bugï¼Œæ·±è—åŠŸä¸Žåï¼ githubï¼šhttps://github.com/pedrovgs/AndroidWiFiADB ä½œè€…ï¼šPedro Vicente GÃ³mez SÃ¡nchez ä½¿ç”¨ï¼š Preferences/Settings-&gt;Plugins-&gt;Browse Repositories-&gt;serch AndroidWiFiADB 89.emojicon ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›åœ¨TextViewã€EdiTextå±•ç¤ºè¡¨æƒ…åŒ…èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼š2.7kä¸ªstarï¼Œ,æ¦œå•ç¬¬äºŒæ¬¾å¢žå¼ºTextViewæ˜¾ç¤ºèƒ½åŠ›çš„æ¡†æž¶ï¼Œè¿™æ¬¾ä¸“ä¸ºè¡¨æƒ…åŒ…è®¾è®¡ï¼Œå¦‚æžœä½ æ›¾ç»å¥½å¥‡å¾®ä¿¡ã€QQçš„è¡¨æƒ…æ˜¾ç¤ºæ˜¯å¦‚ä½•åšåˆ°çš„ï¼Ÿè¿™æ¬¾æ¡†æž¶ä¸€å®šèƒ½æ»¡è¶³ä½ çš„æ±‚çŸ¥æ¬²ã€‚ 90.packer-ng-plugin ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æ‰“çˆ†å·¥å…·æ’ä»¶ ä¸Šæ¦œåˆ©ç”¨ï¼šç¬”è€…å°½åŠ›ç»´æŠ¤æ¦œå•æ¶‰åŠèŒƒå›´çš„å…¨é¢æ€§ï¼Œå› æ­¤å¼•å…¥æ­¤æ’ä»¶é¡¹ç›®â€”â€”é¡¹ç›®å·ç§°å®Œæˆ100ä¸ªæ¸ é“åŒ…åªéœ€è¦10ç§’é’Ÿï¼Œåœ¨å¸‚é¢ä¸Šå„ç§å„æ ·å¤šæ¸ é“æ‰“åŒ…æ–¹æ¡ˆçš„ä»Šå¤©ï¼Œé€‰æ‹©ä¸€æ¬¾é€‚åˆè‡ªå·±å›¢é˜Ÿçš„ï¼Œæ‰æ˜¯ä¸Šä¸Šé€‰æ‹© githubï¼šhttps://github.com/mcxiaoke/packer-ng-plugin ä½œè€…ï¼šXiaoke Zhang ä½¿ç”¨ï¼š1234567891011121314151617181920buildscript &#123; ...... dependencies&#123; // add packer-ng classpath &apos;com.mcxiaoke.gradle:packer-ng:1.0.9&apos; &#125;&#125; apply plugin: &apos;packer&apos; dependencies &#123; compile &apos;com.mcxiaoke.gradle:packer-helper:1.0.9&apos;&#125; android &#123; //... signingConfigs &#123; release &#123; // æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶æ—¶éœ€è¦æ­¤é…ç½® // 1. Gradleç‰ˆæœ¬ &gt;= 2.14.1 // 2. Android Gradle Plugin ç‰ˆæœ¬ &gt;= 2.2.0 // ä½œç”¨æ˜¯åªä½¿ç”¨æ—§ç‰ˆç­¾åï¼Œç¦ç”¨V2ç‰ˆç­¾åæ¨¡å¼ v2SigningEnabled false &#125; &#125; &#125; 91.android-priority-jobqueue ä¸€å¥è¯ä»‹ç»ï¼šä¸€æ¬¾æä¾›åŽå°ä»»åŠ¡ç®¡ç†èƒ½åŠ›çš„æ¡†æž¶ ä¸Šæ¦œç†ç”±ï¼šå¦‚æžœä½ æ˜¯ä¸ªå¿—åœ¨æ·±å…¥ç ”ç©¶å¤šçº¿ç¨‹æ“ä½œçš„å¼€å‘è€…ï¼Œè¿™ä¸ªé¡¹ç›®ä¸€å®šä¸è¦é”™è¿‡ï¼Œä¸è®ºæ˜¯Activityé‡æ–°åŠ è½½ã€Serviceä½¿ç”¨çº¿ç¨‹æ± æ—¶çš„ä»»åŠ¡ä¼˜å…ˆçº§å’Œå¹¶å‘é—®é¢˜ï¼Œéƒ½ä¸è¦æ‹…å¿ƒï¼ŒJob Manageä¼šç…§é¡¾ä¼˜å…ˆçº§ï¼ŒæŒä¹…æ€§ï¼Œè´Ÿè½½å¹³è¡¡ï¼Œå»¶è¿Ÿï¼Œç½‘ç»œæŽ§åˆ¶ï¼Œåˆ†ç»„ï¼Œ2.4Kä¸ªstarï¼Œä¼˜ç§€çš„å¤šçº¿ç¨‹ç®¡ç†èƒ½åŠ›ï¼Œå†µä¸”å®ƒä¾èµ–çš„ç¬¬ä¸‰æ–¹æ¡†æž¶å¾ˆå°‘ï¼Œå€¼å¾—ä½ ä¸€è¯• githubï¼šhttps://github.com/yigit/android-priority-jobqueue ä½œè€…ï¼šYigit Boyar]]></content>
      <categories>
        <category>Android</category>
        <category>æ¡†æž¶</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>æ¡†æž¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidé¢è¯•æ€»ç»“]]></title>
    <url>%2Fposts%2F27a6e4df.html</url>
    <content type="text"><![CDATA[é¢è¯•å¤§çº² javaåŸºç¡€ã€é¢å‘å¯¹è±¡ã€é›†åˆã€çº¿ç¨‹ä½¿ç”¨ï¼› Android æœºåž‹é€‚é…ã€SDKé€‚é…ã€å†…å­˜ä¼˜åŒ–ã€å†…å­˜æº¢å‡ºã€å†…å­˜æ³„æ¼ï¼› MVC/MVP/MVVMçš„ä½¿ç”¨åœºæ™¯ï¼› äº†è§£å¹¶èƒ½ä½¿ç”¨æœ€æ–°æµè¡Œå¼€æºåº“RXjava+Retrofit+OKHttpã€Glideã€EventBusç­‰ï¼› JNIåŠNDKçš„ä½¿ç”¨ã€ç†Ÿæ‚‰Frameworkã€‚ é¢‘ç¹é¢è¯•é¢˜ 1.é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰ 2.æ•°æ®ç±»åž‹ 3.equalå’Œ==çš„åŒºåˆ« 4.å­—ç¬¦ä¸²è¿è¡Œé€Ÿåº¦ï¼šStringBuilderã€StringBufferã€ String 5.Queue é˜Ÿåˆ—ã€Stack æ ˆ 6.ListViewæœºåˆ¶ 7.Fragmentç”Ÿå‘½å‘¨æœŸ 8.å››å¤§å¼•ç”¨ç±»åž‹ 9.çº¿ç¨‹ã€è¿›ç¨‹åŠå…¶é€šä¿¡æ–¹å¼ 10.PackageManagerService 11.binderæœºåˆ¶ 12.launcherçš„å®žçŽ° 13.Android ç‰ˆæœ¬ç‰¹æ€§ 14.BroadcastReceiverå¹¿æ’­ 15.RecycleView 16.å„ç§é›†åˆæ¯”è¾ƒSparseArrayã€HashMapã€ArrayMapã€LinkedListã€ArrayList 17.SQLiteå‡çº§ 18.Bitmap 19.Handleræœºåˆ¶ 20.æ€§èƒ½ä¼˜åŒ–æŠ€å·§ 21.ANR 22.è‡ªå®šä¹‰View 23.MVCã€MVPã€MVVMä¸‰ç§æž¶æž„è®¾è®¡ 24.APP å¯åŠ¨æµç¨‹ 25.æ’ä»¶åŒ– 26.Kotlin å¤šå¹³å°åº”ç”¨çš„é™æ€ç¼–ç¨‹è¯­è¨€ 27.Framework å·¥ä½œåŽŸç† 28.Android å±å¹•é€‚é… 29.äº‹ä»¶åˆ†å‘æœºåˆ¶ 30.Android åŠ¨ç”»åˆ†ç±»ï¼šè§†å›¾ï¼Œå±žæ€§ï¼Œå¸§ï¼Œgif 31.Android è¿›ç¨‹ 32.Android äº”å¤§å­˜å‚¨æ–¹å¼ 33.å±å¹•æ—‹è½¬Activityç”Ÿå‘½å‘¨æœŸ 34.Activity å››å¤§å¯åŠ¨æ¨¡å¼ 35.CPUã€GPUå·¥ä½œåŽŸç† 36.UIå¡é¡¿åŽŸå›  37.Applicationçš„ç”Ÿå‘½å‘¨æœŸ 38.å¦‚ä½•é¿å…å› å¼•å…¥çš„å¼€æºåº“å¯¼è‡´çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ï¼Ÿ 39.ç®€å•çš„éŸ³é¢‘/è§†é¢‘æ ¼å¼ 40.çº¿ç¨‹åŒæ­¥çš„æ–¹æ³• 41.çº¿ç¨‹å®‰å…¨çš„å•ä¾‹ 42.Serializableã€Parcelelable 43.Serviceå¯åŠ¨æ–¹å¼å’Œç”Ÿå‘½å‘¨æœŸ 44.Android å¸¸è§å¸ƒå±€ 45.Httpã€Httpsã€Volleyã€OkHttpã€RxJava + Retrofit + OkHttpã€TCPã€UDP 46.å¦‚ä½•èŠ‚çœå†…å­˜ä½¿ç”¨ï¼Œä¸»åŠ¨å›žæ”¶å†…å­˜ï¼Ÿ 47.Activityå¦‚ä½•ç”ŸæˆViewï¼Ÿ 48.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ 49.çŽ°åœºä¿æŠ¤ 50.å†…å­˜æº¢å‡ºã€å†…å­˜æ³„æ¼ 51.JNIå’ŒNDK 52.å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼åŠå…¶å®žçŽ°æ€æƒ³å’Œä½œç”¨ 53.HashMapã€ HashTableã€HashSetçš„å¼‚åŒ 54.Android ä¸­å†…å­˜æ³„æ¼åŽŸå› åŠä¼˜åŒ–æ–¹æ¡ˆ 55.LeakCanary å†…å­˜æ³„æ¼æ£€æŸ¥çš„å¼€æºå·¥å…· 56.å¤šçº¿ç¨‹ã€çº¿ç¨‹æ±  57.è…¾è®¯ Bugly 58.Glide 59.Fresco 60.React é¢è¯•é¢˜è§£æž1.é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰é’ˆå¯¹ä¸šåŠ¡å¤„ç†è¿‡ç¨‹çš„å®žä½“åŠå…¶å±žæ€§å’Œè¡Œä¸ºè¿›è¡ŒæŠ½è±¡å°è£…ä»¥èŽ·å¾—é«˜æ•ˆæ¸…æ™°çš„é€»è¾‘å•å…ƒåˆ’åˆ†ã€‚ ä¸‰å¤§ç‰¹æ€§ï¼šâ‘ å°è£…ï¼ˆéšè—å¯¹è±¡çš„å±žæ€§å’Œå®žçŽ°ç»†èŠ‚ï¼Œä»…å¯¹å¤–æä¾›å…¬å…±è®¿é—®æ–¹å¼ï¼Œå°†å˜é‡éš”ç¦»ä¾¿äºŽä½¿ç”¨ï¼Œæé«˜ä»£ç çš„æœç”¨å°å’Œå®‰å…¨æ€§ï¼‰ï¼›â‘¡ç»§æ‰¿ï¼ˆæé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œç»§æ‰¿æ˜¯å¤šæ€çš„å‰æï¼‰ï¼›â‘¢å¤šæ€ï¼ˆçˆ¶ç±»æˆ–æŽ¥å£å®šä¹‰çš„å¼•ç”¨å˜é‡å¯ä»¥æŒ‡å‘å­ç±»æˆ–å…·ä½“å®žçŽ°ç±»çš„å½¢è±¡ï¼Œæé«˜äº†ç¨‹åºçš„æ‹“å±•æ€§ï¼‰ã€‚ äº”å¤§åŽŸåˆ™ï¼šå•ä¸€èŒè´£ã€å¼€æ”¾å°é—­ã€é‡Œæ°æ›¿æ¢ã€ä¾èµ–å€’ç½®ã€æŽ¥å£åˆ†ç¦»ã€‚ 2.æ•°æ®ç±»åž‹byte 1ä¸ªå­—ç¬¦ï¼Œshort ã€char2 ä¸ªå­—ç¬¦ï¼Œint ã€float 4ä¸ªå­—ç¬¦ï¼Œlong ã€double 8ä¸ªå­—ç¬¦ã€‚** volatileæ˜¯ä¸€ä¸ªç±»åž‹ä¿®é¥°ç¬¦ï¼ˆtype specifierï¼‰volatileçš„ä½œç”¨æ˜¯ä½œä¸ºæŒ‡ä»¤å…³é”®å­—ï¼Œç¡®ä¿æœ¬æ¡æŒ‡ä»¤ä¸ä¼šå› ç¼–è¯‘å™¨çš„ä¼˜åŒ–è€Œçœç•¥ï¼Œä¸”è¦æ±‚æ¯æ¬¡ç›´æŽ¥è¯»å€¼ã€‚ï¼ˆfromç™¾åº¦ï¼‰ volatileçš„å˜é‡æ˜¯è¯´è¿™å˜é‡å¯èƒ½ä¼šè¢«æ„æƒ³ä¸åˆ°åœ°æ”¹å˜ï¼Œè¿™æ ·ï¼Œç¼–è¯‘å™¨å°±ä¸ä¼šåŽ»å‡è®¾è¿™ä¸ªå˜é‡çš„å€¼äº†ã€‚ åœ¨JDK1.7ä¹‹å‰ï¼Œswitchè¯­å¥ä»…æ”¯æŒbyteã€shortã€charã€intï¼Œåœ¨JDK1.7ä¹‹åŽï¼Œæžšä¸¾ã€å­—ç¬¦ä¸²ç±»åž‹éƒ½å¯ä»¥ï¼Œé€šè¿‡String.hashcodeè½¬æˆintè¿›è¡Œåˆ¤æ–­ã€‚ Stringä¸å¯å˜åŽŸå› ï¼šå­—ç¬¦ä¸²å¸¸é‡æ± çš„éœ€è¦ï¼›è¿è¡ŒStringå¯¹è±¡ç¼“å­˜HashCodeï¼Œæé«˜æ•ˆçŽ‡ï¼›å¤šçº¿ç¨‹å®‰å…¨ã€‚ String è½¬integerçš„æ–¹æ³•å’ŒåŽŸç† â‘ Integer.parseIntï¼ˆString strï¼‰è°ƒç”¨Integerå†…éƒ¨çš„ï¼› â‘¡Integer.parseIntï¼ˆString s, int radixï¼‰parseIntå†…éƒ¨é¦–å…ˆåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«ç¬¦å·ï¼ˆ-æˆ–è€…+ï¼‰ï¼Œåˆ™å¯¹ç›¸åº”çš„negativeå’Œlimitè¿›è¡Œèµ‹å€¼ï¼Œç„¶åŽå†å¾ªçŽ¯å­—ç¬¦ä¸²ï¼Œå¯¹å•ä¸ªcharè¿›è¡Œæ•°å€¼è®¡ç®— â‘¢Character.digit(char ch, int radix) è¿”å›žæŒ‡å®šåŸºæ•°ä¸­å­—ç¬¦è¡¨ç¤ºçš„æ•°å€¼ã€‚å‡½æ•°è‚¯å®šè¿›å…¥åˆ°0-9å­—ç¬¦çš„åˆ¤æ–­ï¼ˆç›¸å¯¹äºŽstringè½¬æ¢åˆ°intï¼‰ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ•°å­—å°±æ˜¯å¦‚ä¸Šé¢è¿›è¡Œæ‹¼æŽ¥ç„¶åŽç”Ÿæˆçš„intç±»åž‹æ•°å€¼ã€‚ é™å®šå‚æ•°ç±»åž‹çš„ä¸Šç•Œï¼šå‚æ•°ç±»åž‹å¿…é¡»æ˜¯Tæˆ–Tçš„å­ç±»åž‹ &lt;? super T&gt; é™å®šå‚æ•°ç±»åž‹çš„ä¸‹ç•Œï¼šå‚æ•°ç±»åž‹å¿…é¡»æ˜¯Tæˆ–Tçš„è¶…ç±»åž‹ 3.equalå’Œ==çš„åŒºåˆ«ï¼šequal æ¯”è¾ƒå¯¹è±¡ï¼Œ==æ¯”è¾ƒåŽŸç”Ÿç±»åž‹equalï¼šå­˜å‚¨ç©ºé—´çš„å€¼æ˜¯å¦ç›¸åŒï¼Œå­—ç¬¦ä¸²å†…å®¹æ¯”è¾ƒï¼Œå€¼æ˜¯å¦ç›¸åŒ ==ï¼šæ˜¯å¦ä¸ºåŒä¸€å†…å­˜ç©ºé—´ï¼Œå†…å­˜ç©ºé—´æ˜¯å¦ç›¸åŒï¼Œå¼•ç”¨æ˜¯å¦ç›¸åŒ å¦‚æžœä¸€ä¸ªç±»é‡å†™äº†equals()æ–¹æ³•ï¼Œåˆ™ä¸€å®šä¹Ÿè¦é‡å†™hashCode()æ–¹æ³•ï¼ŒåŽŸå› æ˜¯ï¼šè™½ç„¶equals()æ–¹æ³•é‡å†™å¯ä»¥ä¿è¯æ­£ç¡®åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡åœ¨é€»è¾‘æ˜¯å¦ç›¸åŒï¼Œä½†æ˜¯hashCode()æ–¹æ³•æ˜ å°„çš„ç‰©ç†åœ°å€æ˜¯ä¸ç›¸åŒçš„ï¼Œä¾ç„¶ä¼šå°†é€»è¾‘ä¸Šç›¸åŒçš„ä¸¤ä¸ªå…ƒç´ å­˜å…¥é›†åˆï¼Œä½†æ˜¯ç¬¬äºŒä¸ªå¯¹è±¡çš„å†…å®¹ä¼šæ˜¯Null. å‚è€ƒæ–‡ç« ï¼šå…³äºŽjavaä¸­Objectç±»ä¸­çš„equals()å’ŒhashCode()æ–¹æ³•çš„ä½¿ç”¨ä¸ªäººæ€»ç»“ - å¼ æ£®ï¼ˆZhangSenï¼‰ - åšå®¢å›­ 4.å­—ç¬¦ä¸²è¿è¡Œé€Ÿåº¦ï¼šStringBuilder &gt; StringBuffer ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰&gt; String ï¼ŒStringä¸ºå¸¸é‡ï¼Œå…¶å®ƒä¸ºå˜é‡ï¼Œæ‰€ä»¥è¿è¡Œæ…¢ã€‚5.Queue é˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆå‡ºï¼ŒStack æ ˆï¼šåŽè¿›å…ˆå‡ºã€‚Collect â€“&gt;List/Set/Map6.ListViewæœºåˆ¶ï¼šç”¨åˆ°çš„é€‚é…å™¨æœ‰ArrayAdapterã€SimpleAdapterã€BaseAdapterBaseAdapter é‡å†™çš„æ–¹æ³•getCount()ã€getItem()ã€getItemId()ã€getView()ï¼Œæ¯ç»˜åˆ¶ä¸€æ¬¡å°±è°ƒç”¨ä¸€æ¬¡getView()ï¼Œåœ¨getView()ä¸­å°†äº‹å…ˆå®šå¥½çš„layoutå¸ƒå±€ç¡®å®šæ˜¾ç¤ºçš„æ•ˆæžœå¹¶è¿”å›žä¸€ä¸ªviewå¯¹è±¡ä½œä¸ºä¸€ä¸ªitem æ˜¾ç¤ºå‡ºæ¥ï¼ŒgetItem()ã€getItemId()åœ¨è°ƒç”¨LIstViewå“åº”æ–¹æ³•æ—¶è°ƒç”¨ã€‚ 7.Fragmentç”Ÿå‘½å‘¨æœŸå‚è€ƒæ–‡ç« ï¼šFragmentå„ç§æƒ…å†µçš„ç”Ÿå‘½å‘¨æœŸ - çŒ«å»é±¼çš„åšå®¢ - CSDNåšå®¢ onAttach()ï¼š å®ŒæˆFragmentå’ŒActivityçš„ç»‘å®šï¼Œå‚æ•°ä¸­çš„Activityå³ä¸ºè¦ç»‘å®šçš„Activityï¼Œå¯ä»¥è¿›è¡Œèµ‹å€¼ç­‰æ“ä½œã€‚ onCreate() : å®ŒæˆFragmentçš„åˆå§‹åŒ– onCreateView() : åŠ è½½Fragmentå¸ƒå±€ï¼Œç»‘å®šå¸ƒå±€æ–‡ä»¶ onActivityCreated() : è¡¨åä¸ŽFragmentç»‘å®šçš„Activityå·²ç»æ‰§è¡Œå®Œæˆäº†onCreateï¼Œå¯ä»¥ä¸ŽActivityè¿›è¡Œäº¤äº’æ“ä½œã€‚ onStart() : Fragmentå˜ä¸ºå¯è§çŠ¶æ€ onResume() : Fragmentå˜ä¸ºå¯äº¤äº’çŠ¶æ€ onPause()ï¼š Fragmentå˜ä¸ºä¸å¯äº¤äº’çŠ¶æ€(ä¸ä»£è¡¨ä¸å¯è§) onSaveInstanceState()ï¼šä¿å­˜å½“å‰Fragmentçš„çŠ¶æ€ã€‚è®°å½•ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚EditTexté”®å…¥çš„æ–‡æœ¬ï¼Œå³ä½¿Fragmentè¢«å›žæ”¶åˆé‡æ–°åˆ›å»ºï¼Œä¸€æ ·èƒ½æ¢å¤EditTextä¹‹å‰é”®å…¥çš„æ–‡æœ¬ã€‚ onStop(): Fragmentå˜ä¸ºä¸å¯è§çŠ¶æ€ onDestroyView() : é”€æ¯Fragmentçš„æœ‰å…³è§†å›¾ï¼Œä½†å¹¶æœªå’ŒActivityè§£ç»‘ï¼Œå¯ä»¥é€šè¿‡onCreateView()é‡æ–°åˆ›å»ºè§†å›¾ã€‚Fragmenté”€æ¯æ—¶æˆ–è€…ViewPager+Fragmentæƒ…å†µä¸‹ä¼šè°ƒç”¨ onDestroy() : é”€æ¯Fragmentæ—¶è°ƒç”¨ onDetach() : è§£é™¤å’ŒActivityçš„ç»‘å®šã€‚Fragmené”€æ¯æœ€åŽä¸€æ­¥ã€‚ 8.å››å¤§å¼•ç”¨ç±»åž‹å¼ºå¼•ç”¨ï¼š æ˜¯æŒ‡åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶æŠŠè¿™ä¸ªå¯¹è±¡èµ‹ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ã€‚ å¼ºå¼•ç”¨æœ‰å¼•ç”¨å˜é‡æŒ‡å‘æ—¶æ°¸è¿œä¸ä¼šè¢«åžƒåœ¾å›žæ”¶ï¼ŒJVMå®æ„¿æŠ›å‡ºOutOfMemoryé”™è¯¯ä¹Ÿä¸ä¼šå›žæ”¶è¿™ç§å¯¹è±¡ã€‚ è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰ï¼šå¦‚æžœä¸€ä¸ªå¯¹è±¡å…·æœ‰è½¯å¼•ç”¨ï¼Œå†…å­˜ç©ºé—´è¶³å¤Ÿï¼Œåžƒåœ¾å›žæ”¶å™¨å°±ä¸ä¼šå›žæ”¶å®ƒï¼›å¦‚æžœå†…å­˜ç©ºé—´ä¸è¶³äº†ï¼Œå°±ä¼šå›žæ”¶è¿™äº›å¯¹è±¡çš„å†…å­˜ã€‚åªè¦åžƒåœ¾å›žæ”¶å™¨æ²¡æœ‰å›žæ”¶å®ƒï¼Œè¯¥å¯¹è±¡å°±å¯ä»¥è¢«ç¨‹åºä½¿ç”¨ã€‚è½¯å¼•ç”¨å¯ç”¨æ¥å®žçŽ°å†…å­˜æ•æ„Ÿçš„é«˜é€Ÿç¼“å­˜,æ¯”å¦‚ç½‘é¡µç¼“å­˜ã€å›¾ç‰‡ç¼“å­˜ç­‰ã€‚ä½¿ç”¨è½¯å¼•ç”¨èƒ½é˜²æ­¢å†…å­˜æ³„éœ²ï¼Œå¢žå¼ºç¨‹åºçš„å¥å£®æ€§ã€‚SoftReferenceçš„ç‰¹ç‚¹æ˜¯å®ƒçš„ä¸€ä¸ªå®žä¾‹ä¿å­˜å¯¹ä¸€ä¸ªJavaå¯¹è±¡çš„è½¯å¼•ç”¨ï¼Œ è¯¥è½¯å¼•ç”¨çš„å­˜åœ¨ä¸å¦¨ç¢åžƒåœ¾æ”¶é›†çº¿ç¨‹å¯¹è¯¥Javaå¯¹è±¡çš„å›žæ”¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦SoftReferenceä¿å­˜äº†å¯¹ä¸€ä¸ªJavaå¯¹è±¡çš„è½¯å¼•ç”¨åŽï¼Œåœ¨åžƒåœ¾çº¿ç¨‹å¯¹ è¿™ä¸ªJavaå¯¹è±¡å›žæ”¶å‰ï¼ŒSoftReferenceç±»æ‰€æä¾›çš„get()æ–¹æ³•è¿”å›žJavaå¯¹è±¡çš„å¼ºå¼•ç”¨ã€‚å¦å¤–ï¼Œä¸€æ—¦åžƒåœ¾çº¿ç¨‹å›žæ”¶è¯¥Javaå¯¹è±¡ä¹‹ åŽï¼Œget()æ–¹æ³•å°†è¿”å›žnullã€‚ å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰ï¼šå¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°éžå¿…éœ€å¯¹è±¡çš„ï¼Œå½“JVMè¿›è¡Œåžƒåœ¾å›žæ”¶æ—¶ï¼Œæ— è®ºå†…å­˜æ˜¯å¦å……è¶³ï¼Œéƒ½ä¼šå›žæ”¶è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚åœ¨javaä¸­ï¼Œç”¨java.lang.ref.WeakReferenceç±»æ¥è¡¨ç¤ºã€‚ è™šå¼•ç”¨ï¼ˆPhantomReferenceï¼‰ï¼šè™šå¼•ç”¨å’Œå‰é¢çš„è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ä¸åŒï¼Œå®ƒå¹¶ä¸å½±å“å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨javaä¸­ç”¨java.lang.ref.PhantomReferenceç±»è¡¨ç¤ºã€‚å¦‚æžœä¸€ä¸ªå¯¹è±¡ä¸Žè™šå¼•ç”¨å…³è”ï¼Œåˆ™è·Ÿæ²¡æœ‰å¼•ç”¨ä¸Žä¹‹å…³è”ä¸€æ ·ï¼Œåœ¨ä»»ä½•æ—¶å€™éƒ½å¯èƒ½è¢«åžƒåœ¾å›žæ”¶å™¨å›žæ”¶ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—å…³è”ä½¿ç”¨ï¼Œå½“åžƒåœ¾å›žæ”¶å™¨å‡†å¤‡å›žæ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æžœå‘çŽ°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸Žä¹‹ å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦å·²ç»åŠ å…¥äº†è™šå¼•ç”¨ï¼Œæ¥äº†è§£è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°†è¦è¢«åžƒåœ¾å›žæ”¶ã€‚å¦‚æžœç¨‹åºå‘çŽ°æŸä¸ªè™šå¼•ç”¨å·²ç»è¢«åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ‰€å¼•ç”¨çš„å¯¹è±¡çš„å†…å­˜è¢«å›žæ”¶ä¹‹å‰é‡‡å–å¿…è¦çš„è¡ŒåŠ¨ã€‚ å¯¹äºŽå¼ºå¼•ç”¨ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨ç¼–å†™ä»£ç æ—¶ç»å¸¸ä¼šç”¨åˆ°ã€‚è€Œå¯¹äºŽå…¶ä»–ä¸‰ç§ç±»åž‹çš„å¼•ç”¨ï¼Œä½¿ç”¨å¾—æœ€å¤šçš„å°±æ˜¯è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ï¼Œè¿™2ç§æ—¢æœ‰ç›¸ä¼¼ä¹‹å¤„åˆæœ‰åŒºåˆ«ã€‚å®ƒä»¬éƒ½æ˜¯ç”¨æ¥æè¿°éžå¿…éœ€å¯¹è±¡çš„ï¼Œä½†æ˜¯è¢«è½¯å¼•ç”¨å…³è”çš„å¯¹è±¡åªæœ‰åœ¨å†…å­˜ä¸è¶³æ—¶æ‰ä¼šè¢«å›žæ”¶ï¼Œè€Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åœ¨JVMè¿›è¡Œåžƒåœ¾å›žæ”¶æ—¶æ€»ä¼šè¢«å›žæ”¶ã€‚ 9.çº¿ç¨‹æ˜¯è¿›ç¨‹çš„å­é›†ï¼Œä¸€ä¸ªè¿›ç¨‹å¯æœ‰å¤šä¸ªçº¿ç¨‹ã€‚çº¿ç¨‹é—´é€šè®¯æ–¹å¼ï¼šâ‘ å…±äº«å˜é‡ï¼›â‘¡ç®¡é“ï¼›â‘¢handlerï¼›â‘£runOnUiThread(Runnable)ï¼›â‘¤view.post(Runnable)ã€‚ è¿›ç¨‹é—´é€šè®¯æ–¹å¼ï¼šâ‘ ç®¡é“ï¼›â‘¡FIFOï¼›â‘¢æ¶ˆæ¯é˜Ÿåˆ—ï¼›â‘£ä¿¡å·é‡ï¼›â‘¤å…±äº«å†…å­˜åŒºï¼›â‘¥å¥—æŽ¥å­—socketä¿¡å·ã€‚ Activityé—´çš„é€šä¿¡æ–¹å¼ï¼šâ‘ Intentï¼›â‘¡å€ŸåŠ©ç±»çš„é™æ€å˜é‡ï¼›â‘¢å€ŸåŠ©å…¨å±€å˜é‡/Applicationï¼›â‘£å€ŸåŠ©å¤–éƒ¨å·¥å…·ï¼ˆSharedPreferenceã€SQLiteã€Fileã€å‰ªè´´æ¿ï¼‰ï¼›â‘¤å€ŸåŠ©Serviceã€‚ 10.PackageManagerService APPå®‰è£…æœ‰å…³çš„serviceï¼ŒWindowManagerService APPè°ƒç”¨çª—å£ç›¸å…³çš„serviceï¼ŒActivityManagerService ç³»ç»Ÿçš„å¼•å¯¼æœåŠ¡ï¼Œæ”¯æŒåº”ç”¨è¿›ç¨‹çš„å¯åŠ¨ã€åˆ‡æ¢ã€è°ƒåº¦ã€å››å¤§ç»„ä»¶çš„å¯åŠ¨å’Œç®¡ç†ã€‚è‡ªå®šä¹‰ç³»ç»ŸæœåŠ¡ï¼šåœ¨ServiceManageræ³¨å†Œï¼Œåœ¨Framework/baseå¢žåŠ JNIï¼ŒC++ æ–‡ä»¶ï¼Œåœ¨build é…ç½®mkæ–‡ä»¶ï¼Œå…¨éƒ¨ç¼–è¯‘ï¼Œæ‰å¯è°ƒç”¨ã€‚ 11.binderæœºåˆ¶Binderæ˜¯Androidç³»ç»Ÿä¸­è¿›ç¨‹é—´é€šè®¯ï¼ˆIPCï¼‰çš„ä¸€ç§æ–¹å¼ï¼Œä¹Ÿæ˜¯Androidç³»ç»Ÿä¸­æœ€é‡è¦çš„ç‰¹æ€§ä¹‹ä¸€ã€‚Androidä¸­çš„å››å¤§ç»„ä»¶Activityï¼ŒServiceï¼ŒBroadcastï¼ŒContentProviderï¼Œä¸åŒçš„Appç­‰éƒ½è¿è¡Œåœ¨ä¸åŒçš„è¿›ç¨‹ä¸­ï¼Œå®ƒæ˜¯è¿™äº›è¿›ç¨‹é—´é€šè®¯çš„æ¡¥æ¢ã€‚æ­£å¦‚å…¶åâ€œç²˜åˆå‰‚â€ä¸€æ ·ï¼Œå®ƒæŠŠç³»ç»Ÿä¸­å„ä¸ªç»„ä»¶ç²˜åˆåˆ°äº†ä¸€èµ·ï¼Œæ˜¯å„ä¸ªç»„ä»¶çš„æ¡¥æ¢ã€‚ 12.launcherçš„å®žçŽ°Manifest é…ç½®launcherï¼ŒPackageManagerã€ActivityManagerå¯¹åº”åŒ…çš„ç®¡ç†å’Œåº”ç”¨è¿›ç¨‹çš„ç®¡ç†ã€‚ 13.Android ç‰ˆæœ¬ç‰¹æ€§6.0éœ€è¦ä»£ç è¯·æ±‚æƒé™checkPermissionsï¼Œ7.0åº”ç”¨é—´æ–‡ä»¶å…±äº«é™åˆ¶ï¼Œç³»ç»Ÿå¹¿æ’­åˆ é™¤ï¼Œ8.0é€šçŸ¥æ¸ é“ã€æ‚¬æµ®çª—ã€é€æ˜Žçª—å£ä¸å…è®¸å±å¹•æ—‹è½¬ï¼Œ9.0æ˜Žæ–‡æµé‡çš„ç½‘ç»œè¯·æ±‚ï¼ˆHttpsåŠ å¯†ï¼‰ Android SDKå…¼å®¹ï¼šminSdkVersionå¿…é¡»ï¼ŒtargetSdkVersioné’ˆå¯¹æŸç‰ˆæœ¬ï¼ŒmaxSdkVersionéžå¿…éœ€ã€‚ è¯¦ç»†ç‰¹æ€§å¯è§è½¬è½½æ–‡æ¡£ï¼šAndroid å„ç‰ˆæœ¬æ–°ç‰¹æ€§ä»‹ç» - è½å¶Exçš„åšå®¢ - CSDNåšå®¢ 14.BroadcastReceiverå¹¿æ’­ BroadcastReceiveræ¯”è¾ƒ ç‰¹åˆ«æ³¨æ„ï¼šåŠ¨æ€å¹¿æ’­æœ€å¥½åœ¨Activity çš„ onResume()æ³¨å†Œã€onPause()æ³¨é”€ã€‚ åŽŸå› ï¼šå¯¹äºŽåŠ¨æ€å¹¿æ’­ï¼Œæœ‰æ³¨å†Œå°±å¿…ç„¶å¾—æœ‰æ³¨é”€ï¼Œå¦åˆ™ä¼šå¯¼è‡´å†…å­˜æ³„éœ²ï¼Œé‡å¤æ³¨å†Œã€é‡å¤æ³¨é”€ä¹Ÿä¸å…è®¸ å¹¿æ’­çš„ç±»åž‹ä¸»è¦åˆ†ä¸º5ç±»ï¼š æ™®é€šå¹¿æ’­ï¼ˆNormal Broadcastï¼‰ï¼šå¼€å‘è€…è‡ªèº«å®šä¹‰ intentçš„å¹¿æ’­ï¼ˆæœ€å¸¸ç”¨ï¼‰ï¼ŒsendBroadcast(intent); ç³»ç»Ÿå¹¿æ’­ï¼ˆSystem Broadcastï¼‰ï¼šæ¶‰åŠåˆ°æ‰‹æœºçš„åŸºæœ¬æ“ä½œï¼ˆå¦‚å¼€æœºã€ç½‘ç»œçŠ¶æ€å˜åŒ–ã€æ‹ç…§ç­‰ç­‰ï¼‰ï¼Œéƒ½ä¼šå‘å‡ºç›¸åº”çš„å¹¿æ’­ï¼Œæ¯ä¸ªå¹¿æ’­éƒ½æœ‰ç‰¹å®šçš„Intent - Filterï¼ˆåŒ…æ‹¬å…·ä½“çš„actionï¼‰ æœ‰åºå¹¿æ’­ï¼ˆOrdered Broadcastï¼‰ï¼šå‘é€å‡ºåŽ»çš„å¹¿æ’­è¢«å¹¿æ’­æŽ¥æ”¶è€…æŒ‰ç…§å…ˆåŽé¡ºåºæŽ¥æ”¶ï¼ŒæŒ‰ç…§Priorityå±žæ€§å€¼ä»Žå¤§-å°æŽ’åºï¼›Priorityå±žæ€§ç›¸åŒè€…ï¼ŒåŠ¨æ€æ³¨å†Œçš„å¹¿æ’­ä¼˜å…ˆï¼› sendOrderedBroadcast(intent); ç‰¹ç‚¹ æŽ¥æ”¶å¹¿æ’­æŒ‰é¡ºåºæŽ¥æ”¶ å…ˆæŽ¥æ”¶çš„å¹¿æ’­æŽ¥æ”¶è€…å¯ä»¥å¯¹å¹¿æ’­è¿›è¡Œæˆªæ–­ï¼Œå³åŽæŽ¥æ”¶çš„å¹¿æ’­æŽ¥æ”¶è€…ä¸å†æŽ¥æ”¶åˆ°æ­¤å¹¿æ’­ï¼› å…ˆæŽ¥æ”¶çš„å¹¿æ’­æŽ¥æ”¶è€…å¯ä»¥å¯¹å¹¿æ’­è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆåŽæŽ¥æ”¶çš„å¹¿æ’­æŽ¥æ”¶è€…å°†æŽ¥æ”¶åˆ°è¢«ä¿®æ”¹åŽçš„å¹¿æ’­ Appåº”ç”¨å†…å¹¿æ’­ï¼ˆLocal Broadcastï¼‰ï¼šAndroidé«˜æ•ˆå®‰å…¨çš„æœ¬åœ°å¹¿æ’­LocalBroadcastå®Œå…¨è§£æž - ç®€ä¹¦ ç²˜æ€§å¹¿æ’­ï¼ˆSticky Broadcastï¼‰ï¼šç”±äºŽåœ¨Android5.0 &amp; API 21ä¸­å·²ç»å¤±æ•ˆï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨ 15.RecycleViewæ–¹æ³•ï¼šonCreateViewHolder() ã€onBinderViewHolder()ã€getItemCount() ä¸‰ç§å¸ƒå±€ï¼šåž‚ç›´oræ°´å¹³ã€ç½‘æ ¼ã€ç€‘å¸ƒæµ éœ€è¦è‡ªå®šä¹‰åˆ†å‰²çº¿ã€æ˜“äºŽå›žæ”¶ã€Viewå¤ç”¨ã€ä¾¿äºŽå®žçŽ°æ·»åŠ å’Œåˆ é™¤itemåŠ¨ç”»ã€‚ 16.å„ç§é›†åˆæ¯”è¾ƒSparseArrayç¨€ç–æ•°ç»„ä¸ŽHashMapç›¸æ¯”ï¼Œæ­£åºæ’å…¥å¿«ï¼Œé€†åºæ’å…¥æ…¢ï¼ŒæŸ¥æ‰¾æ…¢å ç”¨å†…å­˜å°‘äºŽHashMapï¼› HashMapå’ŒArrayMapçš„åŒºåˆ« â‘ æŸ¥æ‰¾æ•ˆçŽ‡ HashMapä¾æ®HashCodeæŸ¥æ‰¾ï¼Œæ•ˆçŽ‡å¢žåŠ ï¼›ArrayMapä½¿ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾ï¼Œæ•ˆçŽ‡ä¸‹é™ã€‚æ•°é‡å¤§æ—¶ç”¨HashMap â‘¡æ‰©å±•æ•°é‡ HashMapåˆå§‹å€¼16ä¸ªé•¿åº¦ï¼Œæ¯æ¬¡æ‰©å®¹ç”³è¯·åŒå€çš„æ•°ç»„ç©ºé—´ï¼›Aæ‰©å®¹ç”³è¯·ç©ºé—´æ›´å°‘ â‘¢æ‰©å®¹æ•ˆçŽ‡ ArrayMapæ›´å¥½ â‘£å†…å­˜æ¶ˆè€— æ•°æ®é‡å°æ—¶ï¼ŒArrayMapæ›´èŠ‚çœå†…å­˜ æ€»ç»“ï¼šæ•°æ®é‡å°æ—¶ï¼Œå¹¶éœ€è¦é¢‘ç¹ä½¿ç”¨mapå­˜å‚¨æ—¶ï¼Œç”¨ArrayMapï¼Œæ•°æ®é‡å¤§æ—¶ï¼Œç”¨HashMapã€‚ HashMapç”±æ•°ç»„+é“¾è¡¨ç»„æˆçš„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ï¼Œå¦‚æžœå®šä½åˆ°çš„æ•°ç»„ä½ç½®ä¸å«é“¾è¡¨ï¼ˆå½“å‰entryçš„nextæŒ‡å‘nullï¼‰,é‚£ä¹ˆå¯¹äºŽæŸ¥æ‰¾ï¼Œæ·»åŠ ç­‰æ“ä½œå¾ˆå¿«ï¼Œä»…éœ€ä¸€æ¬¡å¯»å€å³å¯ï¼›å¦‚æžœå®šä½åˆ°çš„æ•°ç»„åŒ…å«é“¾è¡¨ï¼Œå¯¹äºŽæ·»åŠ æ“ä½œï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œé¦–å…ˆéåŽ†é“¾è¡¨ï¼Œå­˜åœ¨å³è¦†ç›–ï¼Œå¦åˆ™æ–°å¢žï¼›å¯¹äºŽæŸ¥æ‰¾æ“ä½œæ¥è®²ï¼Œä»éœ€éåŽ†é“¾è¡¨ï¼Œç„¶åŽé€šè¿‡keyå¯¹è±¡çš„equalsæ–¹æ³•é€ä¸€æ¯”å¯¹æŸ¥æ‰¾ã€‚æ‰€ä»¥ï¼Œæ€§èƒ½è€ƒè™‘ï¼ŒHashMapä¸­çš„é“¾è¡¨å‡ºçŽ°è¶Šå°‘ï¼Œæ€§èƒ½æ‰ä¼šè¶Šå¥½ã€‚ HashMap çš„å®žä¾‹æœ‰ä¸¤ä¸ªå‚æ•°å½±å“å…¶æ€§èƒ½ï¼šåˆå§‹å®¹é‡å’ŒåŠ è½½å› å­ã€‚å®¹é‡æ˜¯å“ˆå¸Œè¡¨ä¸­æ¡¶çš„æ•°é‡ï¼Œåˆå§‹å®¹é‡åªæ˜¯å“ˆå¸Œè¡¨åœ¨åˆ›å»ºæ—¶çš„å®¹é‡ã€‚åŠ è½½å› å­ æ˜¯å“ˆå¸Œè¡¨åœ¨å…¶å®¹é‡è‡ªåŠ¨å¢žåŠ ä¹‹å‰å¯ä»¥è¾¾åˆ°å¤šæ»¡çš„ä¸€ç§å°ºåº¦ã€‚å½“å“ˆå¸Œè¡¨ä¸­çš„æ¡ç›®æ•°è¶…å‡ºäº†åŠ è½½å› å­ä¸Žå½“å‰å®¹é‡çš„ä¹˜ç§¯æ—¶ï¼Œåˆ™è¦å¯¹è¯¥å“ˆå¸Œè¡¨è¿›è¡Œ rehash æ“ä½œï¼ˆå³é‡å»ºå†…éƒ¨æ•°æ®ç»“æž„ï¼‰ï¼Œä»Žè€Œå“ˆå¸Œè¡¨å°†å…·æœ‰å¤§çº¦ä¸¤å€çš„æ¡¶æ•°ã€‚åœ¨Javaç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒåŠ è½½å› å­é»˜è®¤å€¼ä¸º0.75ï¼Œé»˜è®¤å“ˆå¸Œè¡¨å…ƒä¸º101 hashMapçš„é»˜è®¤åŠ è½½å› å­ä¸º0.75ï¼ŒåŠ è½½å› å­è¡¨ç¤ºHsahè¡¨ä¸­å…ƒç´ çš„å¡«æ»¡çš„ç¨‹åº¦ã€‚åŠ è½½å› å­è¶Šå¤§,å¡«æ»¡çš„å…ƒç´ è¶Šå¤š,ç©ºé—´åˆ©ç”¨çŽ‡è¶Šé«˜ï¼Œä½†å†²çªçš„æœºä¼šåŠ å¤§äº†ã€‚åä¹‹,åŠ è½½å› å­è¶Šå°,å¡«æ»¡çš„å…ƒç´ è¶Šå°‘,å†²çªçš„æœºä¼šå‡å°,ä½†ç©ºé—´æµªè´¹å¤šäº†ã€‚å†²çªçš„æœºä¼šè¶Šå¤§,åˆ™æŸ¥æ‰¾çš„æˆæœ¬è¶Šé«˜ã€‚åä¹‹,æŸ¥æ‰¾çš„æˆæœ¬è¶Šå°ã€‚å½“æ¡¶ä¸­å…ƒç´ åˆ°è¾¾8ä¸ªçš„æ—¶å€™ï¼Œæ¦‚çŽ‡å·²ç»å˜å¾—éžå¸¸å°ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨0.75ä½œä¸ºåŠ è½½å› å­ï¼Œæ¯ä¸ªç¢°æ’žä½ç½®çš„é“¾è¡¨é•¿åº¦è¶…è¿‡ï¼˜ä¸ªæ˜¯å‡ ä¹Žä¸å¯èƒ½çš„ã€‚ å‚è€ƒæ–‡ç« ï¼šä¸ºä»€ä¹ˆjava Hashmap ä¸­çš„åŠ è½½å› å­æ˜¯é»˜è®¤ä¸º0.75 - ç®€ä¹¦ LinkedList é“¾è¡¨ç»“æž„ï¼ŒæŸ¥æ‰¾æ…¢ï¼Œæ’å…¥å¿«ï¼› ArrayList æ•°ç»„ç»“æž„ï¼ŒæŸ¥æ‰¾å¿«ï¼Œæ’å…¥æ…¢ã€‚ 17.SQLiteå‡çº§è€Œä¸å½±å“çŽ°æœ‰æ•°æ®ï¼ŒDBHelperå•ä¾‹ï¼Œåœ¨OnUpgrade()æ–¹æ³•ä¸­åˆ¤æ–­oldVersionå¯¹æ•°æ®åº“è¿›è¡Œå¢žåˆ æ”¹æŸ¥ä»¥å®žçŽ°æ•°æ®åº“å‡çº§ã€‚18.Bitmapå‚è€ƒæ–‡ç« ï¼šAndroid Bitmapè¯¦è§£ - å°çˆ·å®‹ - åšå®¢å›­ ä½å›¾åŒ…æ‹¬å›¾ç‰‡çš„åƒç´ ã€é•¿å®½ã€é¢œè‰²ç­‰æè¿°ï¼Œå¯é€šè¿‡è¿™äº›ä¿¡æ¯è®¡ç®—å‡ºå›¾åƒå ç”¨å†…å­˜çš„å¤§å°ã€‚ä½œä¸ºèŠ±æž¶ï¼Œå¯å¯¹å›¾ç‰‡åšä¸€äº›å¤„ç†ï¼Œä½å›¾æ–‡ä»¶æ˜¾ç¤ºæ•ˆæžœå¥½ï¼Œä½†æ˜¯éžåŽ‹ç¼©æ ¼å¼ï¼Œéœ€è¦å ç”¨è¾ƒå¤§å­˜å‚¨ç©ºé—´ã€‚ â‘ Configï¼šè¡¨ç¤ºå›¾ç‰‡åƒç´ ç±»åž‹ â‘¡ä¸‰ç§åŽ‹ç¼©æ ¼å¼ï¼šBitmap.CompressFormat.JPEGã€Bitmap.CompressFormat.PNGã€Bitmap.CompressFormat.WEBP â‘¢BitmapFactoryæä¾›äº†å››ç±»åŠ è½½æ–¹æ³•ï¼šdecodeFileã€decodeResourceã€decodeStreamã€decodeByteArrayã€‚å·¨å›¾åŠ è½½ï¼šBitmapRegionDecoderï¼Œå¯ä»¥æŒ‰ç…§åŒºåŸŸè¿›è¡ŒåŠ è½½ã€‚é«˜æ•ˆåŠ è½½ï¼šæ ¸å¿ƒå…¶å®žä¹Ÿå¾ˆç®€å•ï¼Œä¸»è¦æ˜¯é‡‡æ ·åŽ‹ç¼©ã€ç¼“å­˜ç­–ç•¥ã€å¼‚æ­¥åŠ è½½ç­‰ â‘£å†…å­˜ä¼˜åŒ–ï¼šç¼“å­˜LRUã€ç¼©æ”¾ã€Configã€Compressé€‰æ‹©ã€å†…å­˜ç®¡ç†ã€ç¼“å­˜æ–¹å¼ç­‰ç­‰æ–¹é¢å…¥æ‰‹ã€‚ã€å†…å­˜ç®¡ç†ã€å†…å­˜ä¼˜åŒ–ã€ç¼©æ”¾ã€configã€compress å¼€æºæ¡†æž¶ï¼šImageLoaderã€Glideï¼ˆgoogleï¼‰ã€Frescoï¼ˆFaceBookï¼‰ã€Picassoï¼ˆSquareï¼‰ å›¾ç‰‡ä¼˜åŒ–ï¼šå¼‚æ­¥åŠ è½½ï¼ŒåŽ‹ç¼©å¤„ç†bitmapFactory.optionsï¼Œè®¾ç½®å†…å­˜å¤§å°ï¼Œç¼“å­˜äºŽå†…å­˜ã€SDå¡ï¼Œæ²¡æœ‰å†…å­˜å†ä»Žç½‘ç»œå–ã€‚ PicassoåŒ…ä½“ç§¯å°ã€æ¸…æ™°ï¼Œä½†åŠŸèƒ½æœ‰å±€é™ä¸èƒ½åŠ è½½gifã€åªèƒ½ç¼“å­˜å…¨å°ºå¯¸ï¼› GlideåŠŸèƒ½å…¨é¢ï¼Œæ“…é•¿å¤§åž‹å›¾ç‰‡æµï¼Œä½“ç§¯è¾ƒå¤§ï¼› Frescoå†…å­˜ä¼˜åŒ–ï¼Œå‡å°‘oomï¼Œä½“ç§¯æ›´å¤§ã€‚ å¦‚ä½•å¤„ç†å¤§å›¾ï¼šBitmapFactory.Optionsï¼ŒæŠŠinJustDecodeBoundsè¿™ä¸ªå±žæ€§è®¾ä¸ºtrueï¼Œè®¡ç®—inSampleSizeã€‚å‚è€ƒæ–‡ç« ï¼šå®˜æ–¹æŽ¨èæ–¹æ³•ï¼Œå¦‚ä½•æœ‰æ•ˆçŽ‡çš„åŠ è½½å¤§å›¾Bitmap - æœˆæ¯›æ¯›çš„ä¸“æ  - CSDNåšå®¢ 19.Handleræœºåˆ¶ä¸»çº¿ç¨‹ä¸èƒ½è¿›è¡Œè€—æ—¶æ“ä½œï¼Œå­çº¿ç¨‹ä¸èƒ½æ›´æ–°UIï¼ŒHandlerå®žçŽ°çº¿ç¨‹é—´é€šä¿¡ï¼Œå°†è¦å‘é€çš„æ¶ˆæ¯ä¿å­˜åˆ°Messageä¸­ï¼ŒHandlerè°ƒç”¨sendMessage()æ–¹æ³•å°†messageå‘é€åˆ°MessageQueueï¼ŒLooperå¯¹è±¡ä¸æ–­è°ƒç”¨loop()æ–¹æ³•ï¼Œä¸æ–­ä»ŽMessageQueueä¸­å–å‡ºmessageäº¤ç»™handlerå¤„ç†ï¼Œä»Žè€Œå®žçŽ°çº¿ç¨‹é—´çš„é€šä¿¡ã€‚ ä¸»çº¿ç¨‹handlerä¸éœ€è¦è°ƒç”¨Looper.prepare()ï¼ŒLooper.loop()ï¼Œé€šè¿‡sendMessageå°†messageæ·»åŠ åˆ°messagequeueã€‚ å­çº¿ç¨‹å¯ä»¥new Handlerã€‚ æ€»ç»“ï¼šå½“åˆ›å»ºHandleræ—¶å°†é€šè¿‡ThreadLocalåœ¨å½“å‰çº¿ç¨‹ç»‘å®šä¸€ä¸ªLooperå¯¹è±¡ï¼Œè€ŒLooperæŒæœ‰MessageQueueå¯¹è±¡ã€‚æ‰§è¡ŒHandler.sendMessage(Message)æ–¹æ³•å°†ä¸€ä¸ªå¾…å¤„ç†çš„Messageæ’å…¥åˆ°MessageQueueä¸­ï¼Œè¿™æ—¶å€™é€šè¿‡Looper.loop()æ–¹æ³•èŽ·å–åˆ°é˜Ÿåˆ—ä¸­Messageï¼Œç„¶åŽå†äº¤ç”±Handler.handleMessage(Message)æ¥å¤„ç†ã€‚ 20.æ€§èƒ½ä¼˜åŒ–æŠ€å·§å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–ï¼Œå¸ƒå±€ä¼˜åŒ–ï¼Œå†…å­˜ã€ç”µé‡ã€APPå¤§å°ä¼˜åŒ–ã€åˆ—è¡¨æ»‘åŠ¨ä¼˜åŒ–ç­‰ç­‰ã€‚ æ€§èƒ½ä¼˜åŒ–å·¥å…·ï¼šTraceViewã€Hierarchy Viewerã€‚ 21.ANRï¼ˆApplication Not Respondingï¼‰æ‰©å±•æ–‡é“¾æŽ¥ï¼šæ·±å…¥ç†è§£ANR - ç®€ä¹¦ Androidåº”ç”¨ç¨‹åºæœ‰ä¸€æ®µæ—¶é—´å“åº”ä¸å¤Ÿçµæ•ï¼Œç³»ç»Ÿä¼šå‘ç”¨æˆ·æ˜¾ç¤ºåº”ç”¨ç¨‹åºæ— å“åº”ï¼ˆANRï¼šApplication Not Respondingï¼‰å¯¹è¯æ¡†ã€‚ç”¨æˆ·å¯ä»¥é€‰æ‹©â€œç­‰å¾…â€è€Œè®©ç¨‹åºç»§ç»­è¿è¡Œï¼Œä¹Ÿå¯ä»¥é€‰æ‹©â€œå¼ºåˆ¶å…³é—­â€ã€‚æ‰€ä»¥ä¸€ä¸ªæµç•…çš„åˆç†çš„åº”ç”¨ç¨‹åºä¸­ä¸èƒ½å‡ºçŽ°ANRï¼Œè€Œè®©ç”¨æˆ·æ¯æ¬¡éƒ½è¦å¤„ç†è¿™ä¸ªå¯¹è¯æ¡†ã€‚å› æ­¤ï¼Œåœ¨ç¨‹åºé‡Œå¯¹å“åº”æ€§èƒ½çš„è®¾è®¡å¾ˆé‡è¦ï¼Œè¿™æ ·ç³»ç»Ÿä¸ä¼šæ˜¾ç¤ºANRç»™ç”¨æˆ·ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨androidä¸­Activityçš„æœ€é•¿æ‰§è¡Œæ—¶é—´æ˜¯5ç§’ï¼ŒBroadcastReceiverçš„æœ€é•¿æ‰§è¡Œæ—¶é—´åˆ™æ˜¯10ç§’ã€‚ åŽŸå› ï¼šä¸»çº¿ç¨‹åšè€—æ—¶æ“ä½œï¼›ä¸»çº¿ç¨‹è¢«å…¶ä»–çº¿ç¨‹é”ï¼›CPUè¢«å…¶ä»–è¿›ç¨‹å ç”¨ï¼Œè¯¥è¿›ç¨‹æ²¡æœ‰åˆ†é…CPUèµ„æºï¼›OnReceiverè¿‡å¤šæ“ä½œï¼ŒIOæ“ä½œï¼Œå¦‚æ•°æ®åº“ã€æ–‡ä»¶ã€ç½‘ç»œã€‚ 22.è‡ªå®šä¹‰Viewæ‰©å±•æ–‡é“¾æŽ¥ï¼šAndroidè‡ªå®šä¹‰Viewå…¨è§£ - ç®€ä¹¦ è‡ªå®šä¹‰ç»„åˆæŽ§ä»¶ å¤šä¸ªæŽ§ä»¶ç»„åˆæˆä¸ºä¸€ä¸ªæ–°çš„æŽ§ä»¶ï¼Œæ–¹ä¾¿å¤šå¤„å¤ç”¨ ç»§æ‰¿ç³»ç»ŸViewæŽ§ä»¶ ç»§æ‰¿è‡ªTextViewç­‰ç³»ç»ŸæŽ§ä»¶ï¼Œåœ¨ç³»ç»ŸæŽ§ä»¶çš„åŸºç¡€åŠŸèƒ½ä¸Šè¿›è¡Œæ‰©å±• ç»§æ‰¿View ä¸å¤ç”¨ç³»ç»ŸæŽ§ä»¶é€»è¾‘ï¼Œç»§æ‰¿Viewè¿›è¡ŒåŠŸèƒ½å®šä¹‰ ç»§æ‰¿ç³»ç»ŸViewGroup ç»§æ‰¿è‡ªLinearLayoutç­‰ç³»ç»ŸæŽ§ä»¶ï¼Œåœ¨ç³»ç»ŸæŽ§ä»¶çš„åŸºç¡€åŠŸèƒ½ä¸Šè¿›è¡Œæ‰©å±• ç»§æ‰¿ViewViewGroup ä¸å¤ç”¨ç³»ç»ŸæŽ§ä»¶é€»è¾‘ï¼Œç»§æ‰¿ViewGroupè¿›è¡ŒåŠŸèƒ½å®šä¹‰ Viewç»˜åˆ¶æµç¨‹åŸºæœ¬ç”±measure()ã€layout()ã€draw()è¿™ä¸ªä¸‰ä¸ªå‡½æ•°å®Œæˆ å‡½æ•°ä½œç”¨ç›¸å…³æ–¹æ³• measure()æµ‹é‡Viewçš„å®½é«˜measure(),setMeasuredDimension(),onMeasure() layout()è®¡ç®—å½“å‰Viewä»¥åŠå­Viewçš„ä½ç½®layout(),onLayout(),setFrame() draw()è§†å›¾çš„ç»˜åˆ¶å·¥ä½œdraw(),onDraw() è‡ªå®šä¹‰Viewçš„æ³¨æ„äº‹é¡¹ å‚è€ƒæ–‡ç« ï¼šAndroidè‡ªå®šä¹‰Viewæ³¨æ„äº‹é¡¹ - ç®€ä¹¦ â‘ éœ€è¦åœ¨onMeasureæ–¹æ³•ä¸­å¤„ç†wrap_contentçš„æ–¹æ³•ï¼Œè®©Viewæ”¯æŒwrap_contentï¼› â‘¡é¿å…paddingå’Œå­å…ƒç´ çš„marginå¤±æ•ˆï¼Œè®©Viewæ”¯æŒpaddingï¼› â‘¢å°½é‡ä¸è¦åœ¨Viewä¸­ä½¿ç”¨Handlerï¼ŒViewä¸­å·²æä¾›äº†postç³»åˆ—æ–¹æ³•ï¼Œå¯æ›¿ä»£Handlerä½œç”¨ï¼› â‘£é¿å…é€ æˆå†…å­˜æ³„æ¼ï¼ŒViewä¸­å¦‚æžœæœ‰çº¿ç¨‹æˆ–è€…åŠ¨ç”»ï¼Œéœ€è¦åŠæ—¶åœæ­¢ã€‚ 23.MVCã€MVPã€MVVMä¸‰ç§æž¶æž„è®¾è®¡æ‰©å±•æ–‡é“¾æŽ¥ï¼šAndroidé«˜ç²¾æˆ˜äº‰ï¼ˆMVCã€MVPã€MVVMï¼‰ - lihaoxiang123çš„åšå®¢ - CSDNåšå®¢ MVCå…¨åæ˜¯Model View Controllerï¼Œå¦‚å›¾ï¼Œæ˜¯æ¨¡åž‹(model)ï¼è§†å›¾(view)ï¼æŽ§åˆ¶å™¨(controller)çš„ç¼©å†™ï¼Œä¸€ç§è½¯ä»¶è®¾è®¡å…¸èŒƒï¼Œç”¨ä¸€ç§ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€ç•Œé¢æ˜¾ç¤ºåˆ†ç¦»çš„æ–¹æ³•ç»„ç»‡ä»£ç ï¼Œåœ¨æ”¹è¿›å’Œä¸ªæ€§åŒ–å®šåˆ¶ç•Œé¢åŠç”¨æˆ·äº¤äº’çš„åŒæ—¶ï¼Œä¸éœ€è¦é‡æ–°ç¼–å†™ä¸šåŠ¡é€»è¾‘ã€‚ å…¶ä¸­Må±‚å¤„ç†æ•°æ®ï¼Œä¸šåŠ¡é€»è¾‘ç­‰ï¼›Vå±‚å¤„ç†ç•Œé¢çš„æ˜¾ç¤ºç»“æžœï¼›Cå±‚èµ·åˆ°æ¡¥æ¢çš„ä½œç”¨ï¼Œæ¥æŽ§åˆ¶Vå±‚å’ŒMå±‚é€šä¿¡ä»¥æ­¤æ¥è¾¾åˆ°åˆ†ç¦»è§†å›¾æ˜¾ç¤ºå’Œä¸šåŠ¡é€»è¾‘å±‚ã€‚ MVPä»Žæ›´æ—©çš„MVCæ¡†æž¶æ¼”å˜è¿‡æ¥ï¼Œä¸ŽMVCæœ‰ä¸€å®šçš„ç›¸ä¼¼æ€§ï¼šController/Presenterè´Ÿè´£é€»è¾‘çš„å¤„ç†ï¼ŒModelæä¾›æ•°æ®ï¼ŒViewè´Ÿè´£æ˜¾ç¤ºã€‚ MVPæ¡†æž¶ç”±3éƒ¨åˆ†ç»„æˆï¼šViewè´Ÿè´£æ˜¾ç¤ºï¼ŒPresenterè´Ÿè´£é€»è¾‘å¤„ç†ï¼ŒModelæä¾›æ•°æ®ã€‚åœ¨MVPæ¨¡å¼é‡Œé€šå¸¸åŒ…å«3ä¸ªè¦ç´ ï¼ˆåŠ ä¸ŠView interfaceæ˜¯4ä¸ªï¼‰ï¼š View:è´Ÿè´£ç»˜åˆ¶UIå…ƒç´ ã€ä¸Žç”¨æˆ·è¿›è¡Œäº¤äº’(åœ¨Androidä¸­ä½“çŽ°ä¸ºActivity) Model:è´Ÿè´£å­˜å‚¨ã€æ£€ç´¢ã€æ“çºµæ•°æ®(æœ‰æ—¶ä¹Ÿå®žçŽ°ä¸€ä¸ªModel interfaceç”¨æ¥é™ä½Žè€¦åˆ) Presenter:ä½œä¸ºViewä¸ŽModeläº¤äº’çš„ä¸­é—´çº½å¸¦ï¼Œå¤„ç†ä¸Žç”¨æˆ·äº¤äº’çš„è´Ÿè´£é€»è¾‘ã€‚ View interface:éœ€è¦Viewå®žçŽ°çš„æŽ¥å£ï¼ŒViewé€šè¿‡View interfaceä¸ŽPresenterè¿›è¡Œäº¤äº’ï¼Œé™ä½Žè€¦åˆï¼Œæ–¹ä¾¿è¿›è¡Œå•å…ƒæµ‹è¯• MVC ä¸ŽMVPçš„åŒºåˆ« ï¼ˆæœ€ä¸»è¦åŒºåˆ«ï¼‰Viewä¸ŽModelå¹¶ä¸ç›´æŽ¥äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ä¸ŽPresenteräº¤äº’æ¥ä¸ŽModelé—´æŽ¥äº¤äº’ã€‚è€Œåœ¨MVCä¸­Viewå¯ä»¥ä¸ŽModelç›´æŽ¥äº¤äº’ é€šå¸¸Viewä¸ŽPresenteræ˜¯ä¸€å¯¹ä¸€çš„ï¼Œä½†å¤æ‚çš„Viewå¯èƒ½ç»‘å®šå¤šä¸ªPresenteræ¥å¤„ç†é€»è¾‘ã€‚è€ŒControlleræ˜¯åŸºäºŽè¡Œä¸ºçš„ï¼Œå¹¶ä¸”å¯ä»¥è¢«å¤šä¸ªViewå…±äº«ï¼ŒControllerå¯ä»¥è´Ÿè´£å†³å®šæ˜¾ç¤ºå“ªä¸ªView Presenterä¸ŽViewçš„äº¤äº’æ˜¯é€šè¿‡æŽ¥å£æ¥è¿›è¡Œçš„ï¼Œæ›´æœ‰åˆ©äºŽæ·»åŠ å•å…ƒæµ‹è¯•ã€‚ åœ¨MVPä¸­ï¼ŒActivityçš„ä»£ç ä¸è‡ƒè‚¿ï¼› åœ¨MVPä¸­ï¼ŒModel(IUserModelçš„å®žçŽ°ç±»)çš„æ”¹åŠ¨ä¸ä¼šå½±å“Activity(View)ï¼Œä¸¤è€…ä¹Ÿäº’ä¸å¹²æ¶‰ï¼Œè€Œåœ¨MVCä¸­ä¼šï¼› åœ¨MVPä¸­ï¼ŒIUserViewè¿™ä¸ªæŽ¥å£å¯ä»¥å®žçŽ°æ–¹ä¾¿åœ°å¯¹Presenterçš„æµ‹è¯•ï¼› åœ¨MVPä¸­ï¼ŒUserPresenterå¯ä»¥ç”¨äºŽå¤šä¸ªè§†å›¾ï¼Œä½†æ˜¯åœ¨MVCä¸­çš„Activityå°±ä¸è¡Œã€‚ MVVMå¯ä»¥ç®—æ˜¯MVPçš„å‡çº§ç‰ˆï¼Œå…¶ä¸­çš„VMæ˜¯ViewModelçš„ç¼©å†™ï¼ŒViewModelå¯ä»¥ç†è§£æˆæ˜¯Viewçš„æ•°æ®æ¨¡åž‹å’ŒPresenterçš„åˆä½“ï¼ŒViewModelå’ŒViewä¹‹é—´çš„äº¤äº’é€šè¿‡Data Bindingå®Œæˆï¼Œè€ŒData Bindingå¯ä»¥å®žçŽ°åŒå‘çš„äº¤äº’ï¼Œè¿™å°±ä½¿å¾—è§†å›¾å’ŒæŽ§åˆ¶å±‚ä¹‹é—´çš„è€¦åˆç¨‹åº¦è¿›ä¸€æ­¥é™ä½Žï¼Œå…³æ³¨ç‚¹åˆ†ç¦»æ›´ä¸ºå½»åº•ï¼ŒåŒæ—¶å‡è½»äº†Activityçš„åŽ‹åŠ›ã€‚ 24.APP å¯åŠ¨æµç¨‹ç‚¹å‡»æ¡Œé¢å›¾æ ‡ï¼Œlauncherè¿›ç¨‹å¯åŠ¨ä¸»Activityä»¥Binderæ–¹å¼å‘é€ç»™AMSæœåŠ¡ï¼Œäº¤ä»˜ç»™ActivityManagerServiceå¤„ç†Intentå’Œflagä¿¡æ¯ï¼Œé€šè¿‡prepareMainLooper()æ–¹æ³•loopå¤„ç†æ¶ˆæ¯ 25.æ’ä»¶åŒ–è§£é™¤ä»£ç è€¦åˆï¼Œæ’ä»¶æ”¯æŒçƒ­æ’æ‹”ï¼Œé™é»˜å‡çº§ï¼Œä»Žæ ¹æœ¬ä¸Šè§£å†³65kå±žæ€§å’Œæ–¹æ³•çš„bugï¼Œè¿›è¡Œè‡ªå®šä¹‰classLoaderã€‚ æ’ä»¶åŒ–å’Œçƒ­ä¿®å¤éƒ½æ˜¯åŠ¨æ€åŠ è½½æŠ€æœ¯ï¼Œä½¿ç”¨åœºæ™¯ä¸åŒï¼Œçƒ­ä¿®å¤ä¸ºè§£å†³çº¿ä¸Šé—®é¢˜æˆ–è€…å°åŠŸèƒ½æ›´æ–°ï¼Œæ’ä»¶åŒ–è§£å†³åº”ç”¨ä¸Šçš„å¤§é—®é¢˜ã€‚ ç»„ä»¶åŒ–ï¼šä¸ºäº†è§£è€¦ï¼ŒæŠŠå¤æ‚ç³»ç»Ÿæ‹†åˆ†æˆå¤šä¸ªç»„ä»¶ï¼Œåˆ†ç¦»ç»„ä»¶è¾¹ç•Œå’Œè´£ä»»ï¼Œä¾¿äºŽç‹¬ç«‹å‡çº§å’Œç»´æŠ¤ã€‚ 26.Kotlin æ˜¯ä¸€ä¸ªç”¨äºŽçŽ°ä»£å¤šå¹³å°åº”ç”¨çš„é™æ€ç¼–ç¨‹è¯­è¨€ï¼Œç”± JetBrains å¼€å‘ã€‚Kotlinå¯ä»¥ç¼–è¯‘æˆJavaå­—èŠ‚ç ï¼Œä¹Ÿå¯ä»¥ç¼–è¯‘æˆJavaScriptï¼Œæ–¹ä¾¿åœ¨æ²¡æœ‰JVMçš„è®¾å¤‡ä¸Šè¿è¡Œã€‚Kotlinå·²æ­£å¼æˆä¸ºAndroidå®˜æ–¹æ”¯æŒå¼€å‘è¯­è¨€ã€‚ React Native (ç®€ç§°RN)æ˜¯FacebookäºŽ2015å¹´4æœˆå¼€æºçš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨å¼€å‘æ¡†æž¶ï¼Œæ˜¯Facebookæ—©å…ˆå¼€æºçš„JSæ¡†æž¶ React åœ¨åŽŸç”Ÿç§»åŠ¨åº”ç”¨å¹³å°çš„è¡ç”Ÿäº§ç‰©ï¼Œç›®å‰æ”¯æŒiOSå’Œå®‰å“ä¸¤å¤§å¹³å°ã€‚RNä½¿ç”¨Javascriptè¯­è¨€ï¼Œç±»ä¼¼äºŽHTMLçš„JSXï¼Œä»¥åŠCSSæ¥å¼€å‘ç§»åŠ¨åº”ç”¨ï¼Œå› æ­¤ç†Ÿæ‚‰Webå‰ç«¯å¼€å‘çš„æŠ€æœ¯äººå‘˜åªéœ€å¾ˆå°‘çš„å­¦ä¹ å°±å¯ä»¥è¿›å…¥ç§»åŠ¨åº”ç”¨å¼€å‘é¢†åŸŸã€‚ flutterã€‚ 27.Framework å·¥ä½œåŽŸç†Android ç³»ç»Ÿå¯¹Linuxã€kernelã€libåº“ç­‰å°è£…ï¼Œæä¾›WMSã€AMSã€binderæœºåˆ¶ï¼Œhandler-messageæœºåˆ¶ç­‰æ–¹å¼ï¼Œä¾›APPä½¿ç”¨ã€‚Framework å°±æ˜¯æä¾›APPç”Ÿå­˜çŽ¯å¢ƒã€‚ 28.Android å±å¹•é€‚é…å„ç§dpæ–‡ä»¶ï¼Œä½¿ç”¨å„ç§å°ºå¯¸å±å¹• å¸ƒå±€æ–‡ä»¶ä¸­viewè®¾ç½®é«˜å®½æ—¶ä¸é™å®šå¤§å°ï¼Œå°½é‡ä½¿ç”¨wrap_contentï¼Œmatch_parentï¼›ä»£ç ä¸­è®¾ç½®é«˜å®½å‰å¯èŽ·å–å±å¹•å¤§å°ï¼Œå¦‚æžœæ˜¯çº¿æ€§å¸ƒå±€å¯è®¾ç½®viewåœ¨LinearLayoutçš„weightï¼›å•ä½dpé€‚é…å±å¹•ï¼Œå•ä½spé€‚ç”¨å­—ä½“ï¼Œå¤šå›¾ç‰‡ï¼Œå¤šå¸ƒå±€ã€‚ 29.äº‹ä»¶åˆ†å‘æœºåˆ¶dispatchTouchEvent() è´Ÿè´£äº‹ä»¶åˆ†å‘ã€‚å½“ç‚¹å‡»äº‹ä»¶äº§ç”ŸåŽï¼Œäº‹ä»¶é¦–å…ˆä¼ é€’ç»™å½“å‰Activityï¼Œè°ƒç”¨Activityçš„dispatchTouchEvent()æ–¹æ³•ï¼Œè¿”å›žå€¼ä¸ºtrueåˆ™è¡¨ç¤ºViewæˆ–å­Viewæ¶ˆè´¹äº†æ­¤äº‹ä»¶ï¼Œå¦‚æžœè¿”å›žtrueï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰æ¶ˆè´¹äº‹ä»¶ï¼Œå¹¶è°ƒç”¨çˆ¶Viewçš„onTouchEventæ–¹æ³•ã€‚ onTouchEvent()ç”¨äºŽå¤„ç†äº‹ä»¶ï¼Œè¿”å›žå€¼å†³å®šå½“å‰æŽ§ä»¶æ˜¯å¦æ¶ˆè´¹äº†è¿™ä¸ªäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å½“å‰æŽ§ä»¶åœ¨è°ƒç”¨çˆ¶Viewçš„onTouchEventæ–¹æ³•å®ŒTouchäº‹ä»¶åŽï¼Œæ˜¯å¦è¿˜å…è®¸Touchäº‹ä»¶ç»§ç»­å‘ä¸Šï¼ˆçˆ¶æŽ§ä»¶ï¼‰ä¼ é€’ï¼Œä¸€ä½†è¿”å›žTrueï¼Œåˆ™çˆ¶æŽ§ä»¶ä¸ç”¨æ“å¿ƒè‡ªå·±æ¥å¤„ç†Touchäº‹ä»¶ã€‚è¿”å›žtrueï¼Œåˆ™å‘ä¸Šä¼ é€’ç»™çˆ¶æŽ§ä»¶ã€‚ onInterceptTouchEvent() ViewGroupçš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºŽå¤„ç†äº‹ä»¶ï¼ˆç±»ä¼¼äºŽé¢„å¤„ç†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸å¤„ç†ï¼‰å¹¶æ”¹å˜äº‹ä»¶çš„ä¼ é€’æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯å†³å®šæ˜¯å¦å…è®¸Touchäº‹ä»¶ç»§ç»­å‘ä¸‹ï¼ˆå­æŽ§ä»¶ï¼‰ä¼ é€’ï¼Œä¸€ä½†è¿”å›žTrueï¼ˆä»£è¡¨äº‹ä»¶åœ¨å½“å‰çš„viewGroupä¸­ä¼šè¢«å¤„ç†ï¼‰ï¼Œåˆ™å‘ä¸‹ä¼ é€’ä¹‹è·¯è¢«æˆªæ–­ï¼ˆæ‰€æœ‰å­æŽ§ä»¶å°†æ²¡æœ‰æœºä¼šå‚ä¸ŽTouchäº‹ä»¶ï¼‰ï¼ŒåŒæ—¶æŠŠäº‹ä»¶ä¼ é€’ç»™å½“å‰çš„æŽ§ä»¶çš„onTouchEvent()å¤„ç†ï¼›è¿”å›žfalseï¼Œåˆ™æŠŠäº‹ä»¶äº¤ç»™å­æŽ§ä»¶çš„onInterceptTouchEvent()ã€‚ äº‹ä»¶åˆ†å‘æœºåˆ¶åŽŸç†å›¾ å½“ä¸€ä¸ªTouchäº‹ä»¶(è§¦æ‘¸äº‹ä»¶ä¸ºä¾‹)åˆ°è¾¾æ ¹èŠ‚ç‚¹ï¼Œå³Acitivtyçš„ViewGroupæ—¶ï¼Œå®ƒä¼šä¾æ¬¡ä¸‹å‘ï¼Œä¸‹å‘çš„è¿‡ç¨‹æ˜¯è°ƒç”¨å­View(ViewGroup)çš„dispatchTouchEventæ–¹æ³•å®žçŽ°çš„ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ViewGroupéåŽ†å®ƒåŒ…å«ç€çš„å­Viewï¼Œè°ƒç”¨æ¯ä¸ªViewçš„dispatchTouchEventæ–¹æ³•ï¼Œè€Œå½“å­Viewä¸ºViewGroupæ—¶ï¼Œåˆä¼šé€šè¿‡è°ƒç”¨ViwGroupçš„dispatchTouchEventæ–¹æ³•ç»§ç»­è°ƒç”¨å…¶å†…éƒ¨çš„Viewçš„dispatchTouchEventæ–¹æ³•ã€‚ä¸Šè¿°ä¾‹å­ä¸­çš„æ¶ˆæ¯ä¸‹å‘é¡ºåºæ˜¯è¿™æ ·çš„ï¼šâ‘ -â‘¡-â‘¤-â‘¥-â‘¦-â‘¢-â‘£ã€‚dispatchTouchEventæ–¹æ³•åªè´Ÿè´£äº‹ä»¶çš„åˆ†å‘ï¼Œå®ƒæ‹¥æœ‰booleanç±»åž‹çš„è¿”å›žå€¼ï¼Œå½“è¿”å›žä¸ºtrueæ—¶ï¼Œé¡ºåºä¸‹å‘ä¼šä¸­æ–­ã€‚ å°ç»“ï¼šonInterceptTouchEvent()é»˜è®¤è¿”å›žfalseï¼Œä¸åšæˆªèŽ·ã€‚è¿”å›žtrueä¹‹åŽï¼Œäº‹ä»¶æµçš„åŽç«¯æŽ§ä»¶å°±æ²¡æœ‰æœºä¼šå¤„ç†touchäº‹ä»¶ã€‚viewçš„onTouchEvent()è¿”å›žäº†falseï¼Œé‚£ä¹ˆè¯¥äº‹ä»¶å°†è¢«ä¼ é€’è‡³å…¶ä¸Šä¸€å±‚æ¬¡çš„viewçš„onTouchEvent()å¤„ç†ï¼Œå¦‚æžœonTouchEvent()è¿”å›žäº†trueï¼Œé‚£ä¹ˆåŽç»­äº‹ä»¶å°†å¯ä»¥ç»§ç»­ä¼ é€’ç»™è¯¥viewçš„onTouchEvent()å¤„ç†ã€‚ 30.Android åŠ¨ç”»åˆ†ç±»ï¼šè§†å›¾ï¼Œå±žæ€§ï¼Œå¸§ï¼Œgifã€‚31.Android è¿›ç¨‹ä¸€èˆ¬å¤§ä½“åˆ†ä¸ºå‰å°è¿›ç¨‹ï¼ŒåŽå°è¿›ç¨‹ï¼Œå¯è§è¿›ç¨‹ï¼ŒæœåŠ¡è¿›ç¨‹ï¼Œç©ºè¿›ç¨‹è¿™äº”å¤§è¿›ç¨‹ã€‚å…¶ä¸­ç©ºè¿›ç¨‹ä¼˜å…ˆçº§æœ€ä½Žï¼Œè°ƒç”¨startService()è®©serviceæ‰€åœ¨è¿›ç¨‹æˆä¸ºå‰å°è¿›ç¨‹ï¼Œserviceçš„onDestory()é‡Œé‡æ–°å¯åŠ¨è‡ªå·±å¯é¿å…åŽå°è¿›ç¨‹è¢«æ€æ­»ã€‚ ä¸€ä¸ªåº”ç”¨å…è®¸å¤šä¸ªè¿›ç¨‹ï¼Œåœ¨æ¸…å•æ–‡ä»¶é…ç½®çš„serviceä¸ºä¸€ä¸ªè¿›ç¨‹ï¼ŒAndroid:processå°±å¯ä»¥é…ç½®ï¼› å¤šè¿›ç¨‹ä¼šå¼•èµ·çš„å¼‚å¸¸ï¼šé™æ€æˆå‘˜å’Œå•ä¾‹æ¨¡å¼ä¼šå¤±æ•ˆï¼Œçº¿ç¨‹åŒæ­¥æœºåˆ¶å®Œå…¨å¤±æ•ˆï¼ŒSharedPreferenceså¯é æ€§ä¸‹é™ï¼ŒApplicationä¼šå¤šæ¬¡åˆ›å»ºã€‚ 32.Android äº”å¤§å­˜å‚¨æ–¹å¼ä½¿ç”¨SharedPreferenceså­˜å‚¨æ•°æ®ï¼› æ–‡ä»¶å­˜å‚¨æ•°æ®ï¼›SQLiteæ•°æ®åº“å­˜å‚¨æ•°æ®ï¼›ä½¿ç”¨ContentProviderå­˜å‚¨æ•°æ®ï¼›ç½‘ç»œå­˜å‚¨æ•°æ®ã€‚ å½“APPæ²¡æœ‰èŽ·å–æ–‡ä»¶å­˜å‚¨æƒé™æ—¶ï¼Œå½“éœ€è¦å­˜å‚¨å¤§æ–‡ä»¶æ—¶ï¼Œå¯ä»¥ä¿å­˜åœ¨APP-data-cacheç›®å½•é‡Œã€‚ ContentProviderï¼šæŠ½è±¡ç±»ï¼Œä¸ºä¸åŒåº”ç”¨æ•°æ®æä¾›æ•°æ®å…±äº«ï¼Œæä¾›ç»Ÿä¸€æŽ¥å£ï¼Œé€šè¿‡uriæ ‡è¯†è¦è®¿é—®çš„æ•°æ®ã€‚ 33.å±å¹•æ—‹è½¬Activityç”Ÿå‘½å‘¨æœŸå‚è€ƒæ–‡ç« é“¾æŽ¥ï¼šActivityæ¨ªç«–å±åˆ‡æ¢ç”Ÿå‘½å‘¨æœŸå˜åŒ– - ç®€ä¹¦ 1ã€ä¸è®¾ç½®Activityçš„android:configChangesæ—¶ï¼Œåˆ‡å±ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªå±æ—¶ä¼šæ‰§è¡Œ1æ¬¡ï¼Œåˆ‡ç«–å±æ—¶ä¼šæ‰§è¡Œ1æ¬¡ 2ã€è®¾ç½®Activityçš„android:configChanges=â€orientationâ€æ—¶ï¼Œåˆ‡å±è¿˜æ˜¯ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªã€ç«–å±æ—¶åªä¼šæ‰§è¡Œä¸€æ¬¡ 3ã€è®¾ç½®Activityçš„android:configChanges=â€orientation|keyboardHidden|screenSizeâ€æ—¶ï¼Œåˆ‡å±ä¸ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåªä¼šæ‰§è¡ŒonConfigurationChangedæ–¹æ³• 4ã€è®¾ç½®Activityçš„android:configChanges=â€orientation|keyboardHidden|screenSizeâ€æ—¶ï¼Œåˆ‡å±åˆ‡è®°è¦åŠ ä¸ŠscreenSize,å¦åˆ™4.0ç‰ˆæœ¬ä»¥ä¸Šç”Ÿå‘½å‘¨æœŸä¸ç”Ÿæ•ˆ 34.Activity å››å¤§å¯åŠ¨æ¨¡å¼standard å¯åŠ¨æ¨¡å¼ Activity é»˜è®¤çš„å¯åŠ¨æ¨¡å¼ï¼Œæ¯æ¬¡ startActivity éƒ½ä¼šåœ¨æ ˆé¡¶åˆ›å»ºä¸€ä¸ªæ–°çš„å®žä¾‹ï¼Œåœ¨åŒä¸€ä¸ªä»»åŠ¡ä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªActivity çš„å®žä¾‹ã€‚ singleTop å¯åŠ¨æ¨¡å¼ æ ˆé¡¶å¤ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦å¯åŠ¨ singleTop æ¨¡å¼çš„ Activityï¼Œå¦‚æžœå®ƒæ°å¥½åœ¨å½“å‰æ ˆé¡¶ï¼Œé‚£ä¹ˆç›´æŽ¥å¤ç”¨ï¼Œæ‰§è¡Œå…¶ onNewIntent æ–¹æ³•ã€‚å¦åˆ™ï¼Œå°±é‡æ–°åˆ›å»ºä¸€ä¸ªå®žä¾‹å…¥æ ˆã€‚ singleTask å¯åŠ¨æ¨¡å¼ åœ¨ç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå½“å†æ¬¡å¯åŠ¨è¯¥ Activity æ—¶ï¼Œä¼šé‡ç”¨å·²å­˜åœ¨çš„ä»»åŠ¡å’Œå®žä¾‹ï¼Œå¹¶ä¸”ä¼šè°ƒç”¨è¿™ä¸ªå®žä¾‹çš„ onNewIntent()æ–¹æ³•ï¼Œå°† Intent å®žä¾‹ä¼ é€’åˆ°è¯¥å®žä¾‹ä¸­ã€‚ singleInstance å¯åŠ¨æ¨¡å¼ æ€»æ˜¯åœ¨æ–°çš„ä»»åŠ¡ä¸­å¼€å¯ï¼Œå¹¶ä¸”è¿™ä¸ªæ–°çš„ä»»åŠ¡ä¸­æœ‰ä¸”åªæœ‰è¿™ä¸€ä¸ªå®žä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´è¢«è¯¥å®žä¾‹å¯åŠ¨çš„å…¶ä»– Activity ä¼šè‡ªåŠ¨è¿è¡ŒäºŽå¦ä¸€ä¸ªä»»åŠ¡ä¸­ã€‚å½“å†æ¬¡å¯åŠ¨è¯¥ Activity çš„å®žä¾‹æ—¶ï¼Œä¼šé‡ç”¨å·²å­˜åœ¨çš„ä»»åŠ¡å’Œå®žä¾‹ã€‚å¹¶ä¸”ä¼šè°ƒç”¨è¿™ä¸ªå®žä¾‹çš„onNewIntent()æ–¹æ³•ï¼Œå°† Intent å®žä¾‹ä¼ é€’åˆ°è¯¥å®žä¾‹ä¸­ã€‚ æ€»ç»“ï¼šâ‘ standardæ¯ä¸€æ¬¡éƒ½ä¼šåˆ›å»ºæ–°çš„å®žä¾‹ï¼›â‘¡singleTopæ ˆé¡¶å¤ç”¨ã€‚å’Œstandardç›¸ä¼¼ï¼Œä½†æ˜¯å¦‚æžœæ ˆé¡¶å·²æœ‰å®žä¾‹ï¼Œå¤ç”¨è¯¥å®žä¾‹ï¼Œå›žè°ƒonNewIntent()æ–¹æ³•ï¼›â‘¢singleTaskæ ˆå†…å¤ç”¨ã€‚æŸ¥æ‰¾æ ˆå†…æœ‰æ²¡æœ‰è¯¥å®žä¾‹ï¼Œæœ‰åˆ™å¤ç”¨å›žè°ƒonNewIntent()æ–¹æ³•ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œæ–°å»ºActivityï¼Œå¹¶å…¥æ ˆï¼›â‘£singleInstanceå•ä¾‹æ¨¡å¼ï¼Œå…¨å±€å”¯ä¸€ã€‚å…·å¤‡singleTaskæ‰€æœ‰ç‰¹æ€§ï¼Œç‹¬å ä¸€ä¸ªä»»åŠ¡æ ˆã€‚ 35.CPUæ˜¯ä¸€ä¸ªæœ‰å¤šåŠŸèƒ½çš„ä¼˜ç§€é¢†å¯¼è€…ï¼Œå®ƒçš„ä¼˜ç‚¹åœ¨äºŽè°ƒåº¦ã€ç®¡ç†ã€åè°ƒèƒ½åŠ›å¼ºï¼Œè®¡ç®—èƒ½åŠ›åˆ™ä½äºŽå…¶æ¬¡ï¼Œè€ŒGPUç›¸å½“äºŽä¸€ä¸ªèƒ½æŽ¥å—CPUè°ƒåº¦çš„â€œæ‹¥æœ‰å¼ºå¤§è®¡ç®—èƒ½åŠ›â€çš„å‘˜å·¥ï¼ŒGPUæä¾›äº†å¤šæ ¸å¹¶è¡Œè®¡ç®—çš„åŸºç¡€ç»“æž„ï¼Œä¸”æ ¸å¿ƒæ•°éžå¸¸å¤šï¼Œå¯æ”¯æ’‘å¤§é‡æ•°æ®çš„å¹¶è¡Œæ“ä½œï¼Œæ‹¥æœ‰æ›´é«˜çš„è®¿å­˜é€Ÿåº¦ï¼Œæ›´é«˜çš„æµ®ç‚¹è¿ç®—èƒ½åŠ›ã€‚36.UIå¡é¡¿åŽŸå› æ¯16msç»˜åˆ¶ä¸€æ¬¡Activityï¼Œå¦‚æžœç”±äºŽä¸€äº›åŽŸå› å¯¼è‡´äº†æˆ‘ä»¬çš„é€»è¾‘ã€CPUè€—æ—¶ã€GPUè€—æ—¶å¤§äºŽ16ms(åº”ç”¨å¡é¡¿çš„æ ¹æºå°±åœ¨äºŽ16mså†…ä¸èƒ½å®Œæˆç»˜åˆ¶æ¸²æŸ“åˆæˆè¿‡ç¨‹,16mséœ€è¦å®Œæˆè§†å›¾æ ‘çš„æ‰€æœ‰æµ‹é‡ã€å¸ƒå±€ã€ç»˜åˆ¶æ¸²æŸ“åŠåˆæˆ)ï¼ŒUIå°±æ— æ³•å®Œæˆä¸€æ¬¡ç»˜åˆ¶ï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆå¡é¡¿ã€‚â‘ å†…å­˜æŠ–åŠ¨é—®é¢˜ï¼Œâ‘¡æ–¹æ³•è€—æ—¶ï¼Œâ‘¢viewæœ¬èº«å¡é¡¿ã€‚ è§£å†³åŠžæ³•ï¼šä¿®æ”¹æ–¹æ³•ï¼Œä½¿å…¶ä¸è€—æ—¶ï¼Œæ”¾åˆ°å­çº¿ç¨‹ä¸­ï¼Œå¦‚ç½‘ç»œè®¿é—®ï¼Œå¤§æ–‡ä»¶æ“ä½œç­‰ï¼Œé˜²æ­¢ANRï¼Œé¿å…GPUè¿‡åº¦ç»˜åˆ¶ã€‚ 37.Applicationçš„ç”Ÿå‘½å‘¨æœŸå‚è€ƒæ–‡ç« ï¼šAndroidä¸­Applicationçš„ç”¨é€”åŠç”Ÿå‘½å‘¨æœŸ_YYå°çˆ¬è™«_æ–°æµªåšå®¢ â‘ onCreate0 åœ¨åˆ›å»ºåº”ç”¨ç¨‹åºæ—¶åˆ›å»ºï¼› â‘¡onTerminate() åœ¨æ¨¡æ‹ŸçŽ¯å¢ƒä¸‹æ‰§è¡Œã€‚å½“ç»ˆæ­¢åº”ç”¨ç¨‹åºå¯¹è±¡æ—¶è°ƒç”¨ï¼Œä¸ä¿è¯ä¸€å®šè¢«è°ƒç”¨ï¼Œå½“ç¨‹åºæ˜¯è¢«å†…æ ¸ç»ˆæ­¢ä»¥ä¾¿ä¸ºå…¶ä»–åº”ç”¨ç¨‹åºé‡Šæ”¾èµ„æºï¼Œé‚£ä¹ˆå°†ä¸ä¼šæé†’ï¼Œå¹¶ä¸”ä¸è°ƒç”¨åº”ç”¨ç¨‹åºçš„å¯¹è±¡çš„onTerminateæ–¹æ³•è€Œç›´æŽ¥ç»ˆæ­¢è¿›ç¨‹ï¼› â‘¢onLowMemory() ä½Žå†…å­˜æ—¶æ‰§è¡Œã€‚å¥½çš„åº”ç”¨ç¨‹åºä¸€èˆ¬ä¼šåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢é‡Šæ”¾ä¸€äº›ä¸å¿…è¦çš„èµ„æºæ¥åº”ä»˜å½“åŽå°ç¨‹åºå·²ç»ç»ˆæ­¢ï¼Œå‰å°åº”ç”¨ç¨‹åºå†…å­˜è¿˜ä¸å¤Ÿæ—¶çš„æƒ…å†µï¼› â‘£onConfigurationChanged(Configuration newConfig) é…ç½®æ”¹å˜æ—¶è§¦å‘è¿™ä¸ªæ–¹æ³•ã€‚ â‘¤onTrimMemory(int level) ç¨‹åºåœ¨è¿›è¡Œå†…å­˜æ¸…ç†æ—¶æ‰§è¡Œã€‚ 38.å¦‚ä½•é¿å…å› å¼•å…¥çš„å¼€æºåº“å¯¼è‡´çš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ï¼Ÿç”±äºŽé¡¹ç›®å¼•å…¥äº†å¤ªå¤šç¬¬ä¸‰æ–¹å¼€æºåº“ï¼ŒAndroid APPæœ‰65536æ–¹æ³•æ•°çš„é—®é¢˜ï¼Œå¯ä½¿ç”¨multidexè§£å†³ã€‚Android Methods Countæ’ä»¶å¯ä»¥é«˜æ•ˆç»Ÿè®¡Androidå¼€æºåº“çš„æ–¹æ³•æ•°ã€‚ 39.ç®€å•çš„éŸ³é¢‘/è§†é¢‘æ ¼å¼PCMï¼šè„‰å†²ç¼–ç è°ƒåˆ¶ï¼Œç”±äºŒè¿›åˆ¶æ•°å­—ä¿¡å·å¯¹å…‰æºè¿›è¡Œé€šæ–­è°ƒåˆ¶äº§ç”Ÿï¼Œæ²¡æœ‰åŽ‹ç¼©çš„ç¼–ç æ–¹å¼ã€‚ WAVï¼šæ— æŸéŸ³é¢‘æ–‡ä»¶æ ¼å¼ï¼ŒPCMæ˜¯æ— æŸWAVæ–‡ä»¶ä¸­éŸ³é¢‘æ•°æ®çš„ä¸€ç§ç¼–ç æ–¹å¼ï¼Œä½†æ˜¯WAVè¿˜å¯ä»¥ç”¨å…¶å®ƒç¼–ç ã€‚ AVIï¼šéŸ³è§†é¢‘äº¤é”™ï¼Œè°ƒç”¨æ–¹ä¾¿ï¼Œå›¾åƒè´¨é‡å¥½ï¼ŒåŽ‹ç¼©æ ‡å‡†å¯é€‰ã€‚ WMVï¼šå¯æ‰©å……çš„åª’ä½“ç±»åž‹ï¼Œæœ¬åœ°æˆ–ç½‘ç»œå›žæ”¾ï¼Œæµä¼˜å…ˆçº§åŒ–ã€‚ 3GPï¼š3Gæµåª’ä½“ï¼Œé…åˆ3Gç½‘ç»œé«˜é€Ÿä¼ è¾“è€Œå¼€å‘ã€‚ FLVï¼šæ–‡ä»¶å°ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œç”¨äºŽç½‘ç»œè§‚çœ‹è§†é¢‘ã€‚ MP4ï¼šéŸ³è§†é¢‘åŽ‹ç¼©ç¼–ç æ ‡å‡†ã€‚ 40.çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•è½¬è½½æ–‡ç« ï¼šå¤šçº¿ç¨‹åŒæ­¥çš„äº”ç§æ–¹æ³• - å¹³å‡¡å¸Œ - åšå®¢å›­ â‘ synchronized å³æœ‰synchronizedå…³é”®å­—ä¿®é¥°çš„æ–¹æ³•ã€‚ ç”±äºŽjavaçš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…ç½®é”ï¼Œå½“ç”¨æ­¤å…³é”®å­—ä¿®é¥°æ–¹æ³•æ—¶ï¼Œå†…ç½®é”ä¼šä¿æŠ¤æ•´ä¸ªæ–¹æ³•ã€‚åœ¨è°ƒç”¨è¯¥æ–¹æ³•å‰ï¼Œéœ€è¦èŽ·å¾—å†…ç½®é”ï¼Œå¦åˆ™å°±å¤„äºŽé˜»å¡žçŠ¶æ€ï¼› â‘¡åŒæ­¥ä»£ç å— å³æœ‰synchronizedå…³é”®å­—ä¿®é¥°çš„è¯­å¥å—ã€‚è¢«è¯¥å…³é”®å­—ä¿®é¥°çš„è¯­å¥å—ä¼šè‡ªåŠ¨è¢«åŠ ä¸Šå†…ç½®é”ï¼Œä»Žè€Œå®žçŽ°åŒæ­¥ï¼› â‘¢ä½¿ç”¨ç‰¹æ®Šå˜é‡Volatile ï¼ˆ1ï¼‰volatileå…³é”®å­—ä¸ºåŸŸå˜é‡çš„è®¿é—®æä¾›äº†ä¸€ç§å…é”æœºåˆ¶ï¼› ï¼ˆ2ï¼‰ä½¿ç”¨volatileä¿®é¥°åŸŸç›¸å½“äºŽå‘Šè¯‰è™šæ‹Ÿæœºè¯¥åŸŸå¯èƒ½ä¼šè¢«å…¶ä»–çº¿ç¨‹æ›´æ–°ï¼› ï¼ˆ3ï¼‰å› æ­¤æ¯æ¬¡ä½¿ç”¨è¯¥åŸŸå°±è¦é‡æ–°è®¡ç®—ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å¯„å­˜å™¨ä¸­çš„å€¼ï¼› ï¼ˆ4ï¼‰volatileä¸ä¼šæä¾›ä»»ä½•åŽŸå­æ“ä½œï¼Œå®ƒä¹Ÿä¸èƒ½ç”¨æ¥ä¿®é¥°finalç±»åž‹çš„å˜é‡ã€‚ â‘£ä½¿ç”¨é‡å…¥é” åœ¨JavaSE5.0ä¸­æ–°å¢žäº†ä¸€ä¸ªjava.util.concurrentåŒ…æ¥æ”¯æŒåŒæ­¥ã€‚ReentrantLockç±»æ˜¯å¯é‡å…¥ã€äº’æ–¥ã€å®žçŽ°äº†LockæŽ¥å£çš„é”ï¼Œ å®ƒä¸Žä½¿ç”¨synchronizedæ–¹æ³•å’Œå—å…·æœ‰ç›¸åŒçš„åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰ï¼Œå¹¶ä¸”æ‰©å±•äº†å…¶èƒ½åŠ›ï¼› â‘¤ä½¿ç”¨å±€éƒ¨å˜é‡ï¼› â‘¥ä½¿ç”¨é˜»å¡žé˜Ÿåˆ—ã€‚ çº¿ç¨‹sleep()å’Œwait()çš„åŒºåˆ« sleep()ä¸é‡Šæ”¾åŒæ­¥é”ï¼Œè‡ªåŠ¨å”¤é†’ï¼Œéœ€è¦try-catchï¼Œçº¿ç¨‹æ–¹æ³•ã€‚ wait()é‡Šæ”¾åŒæ­¥é”ï¼Œéœ€è¦notifyå”¤é†’ï¼Œæ˜¯objectæ–¹æ³•ã€‚ çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿå¦‚ä½•ä¸­æ–­ï¼Ÿ ç”Ÿå‘½å‘¨æœŸï¼šæ–‡ç« è½¬è½½ï¼šå¤šçº¿ç¨‹â€”â€”çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ - ç§¯_è·¬æ­¥ - åšå®¢å›­ â‘  æ–°å»ºçŠ¶æ€(New Thread)ï¼šåœ¨Javaè¯­è¨€ä¸­ä½¿ç”¨new æ“ä½œç¬¦åˆ›å»ºä¸€ä¸ªçº¿ç¨‹åŽï¼Œè¯¥çº¿ç¨‹ä»…ä»…æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå®ƒå…·å¤‡ç±»çº¿ç¨‹çš„ä¸€äº›ç‰¹å¾ï¼Œä½†æ­¤æ—¶ç³»ç»Ÿæ²¡æœ‰ä¸ºå…¶åˆ†é…èµ„æºï¼Œè¿™æ—¶çš„çº¿ç¨‹å¤„äºŽåˆ›å»ºçŠ¶æ€ã€‚ çº¿ç¨‹å¤„äºŽåˆ›å»ºçŠ¶æ€æ—¶ï¼Œå¯é€šè¿‡Threadç±»çš„æ–¹æ³•æ¥è®¾ç½®å„ç§å±žæ€§ï¼Œå¦‚çº¿ç¨‹çš„ä¼˜å…ˆçº§(setPriority)ã€çº¿ç¨‹å(setName)å’Œçº¿ç¨‹çš„ç±»åž‹(setDaemon)ç­‰ã€‚ â‘¡ å°±ç»ªçŠ¶æ€(Runnable)ï¼šä½¿ç”¨start()æ–¹æ³•å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹åŽï¼Œç³»ç»Ÿä¸ºè¯¥çº¿ç¨‹åˆ†é…äº†é™¤CPUå¤–çš„æ‰€éœ€èµ„æºï¼Œä½¿è¯¥çº¿ç¨‹å¤„äºŽå°±ç»ªçŠ¶æ€ã€‚æ­¤å¤–ï¼Œå¦‚æžœæŸä¸ªçº¿ç¨‹æ‰§è¡Œäº†yield()æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹ä¼šè¢«æš‚æ—¶å‰¥å¤ºCPUèµ„æºï¼Œé‡æ–°è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚ â‘¢ è¿è¡ŒçŠ¶æ€(Running)ï¼šJavaè¿è¡Œç³»ç»Ÿé€šè¿‡è°ƒåº¦é€‰ä¸­ä¸€ä¸ªå¤„äºŽå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹ï¼Œä½¿å…¶å æœ‰CPUå¹¶è½¬ä¸ºè¿è¡ŒçŠ¶æ€ã€‚æ­¤æ—¶ï¼Œç³»ç»ŸçœŸæ­£æ‰§è¡Œçº¿ç¨‹çš„run()æ–¹æ³•ã€‚ a) å¯ä»¥é€šè¿‡Threadç±»çš„isAliveæ–¹æ³•æ¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦å¤„äºŽå°±ç»ª/è¿è¡ŒçŠ¶æ€ï¼šå½“çº¿ç¨‹å¤„äºŽå°±ç»ª/è¿è¡ŒçŠ¶æ€æ—¶ï¼ŒisAliveè¿”å›žtrueï¼Œå½“isAliveè¿”å›žfalseæ—¶ï¼Œå¯èƒ½çº¿ç¨‹å¤„äºŽé˜»å¡žçŠ¶æ€ï¼Œä¹Ÿå¯èƒ½å¤„äºŽåœæ­¢çŠ¶æ€ã€‚ â‘£ é˜»å¡žå’Œå”¤é†’çº¿ç¨‹ é˜»å¡žçŠ¶æ€(Blocked)ï¼šä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å› æŸäº›åŽŸå› ä¸èƒ½ç»§ç»­è¿è¡Œæ—¶ï¼Œå°±è¿›å…¥é˜»å¡ž çŠ¶æ€ã€‚è¿™äº›åŽŸå› åŒ…æ‹¬ï¼š â€‹ a)å½“æ‰§è¡Œäº†æŸä¸ªçº¿ç¨‹å¯¹è±¡çš„sleep()ç­‰é˜»å¡žç±»åž‹çš„æ–¹æ³•æ—¶ï¼Œè¯¥çº¿ç¨‹å¯¹è±¡ä¼šè¢«ç½®å…¥ä¸€ä¸ªé˜»å¡žé›†å†…ï¼Œç­‰å¾…è¶…æ—¶è€Œè‡ªåŠ¨è‹é†’ã€‚ â€‹ b)å½“å¤šä¸ªçº¿ç¨‹è¯•å›¾è¿›å…¥æŸä¸ªåŒæ­¥åŒºåŸŸæ—¶ï¼Œæ²¡èƒ½è¿›å…¥è¯¥åŒæ­¥åŒºåŸŸçš„çº¿ç¨‹ä¼šè¢«ç½®å…¥é”å®šé›†ï¼Œç›´åˆ°èŽ·å¾—è¯¥åŒæ­¥åŒºåŸŸçš„é”ï¼Œè¿›å…¥å°±ç»ªçŠ¶æ€ã€‚ â€‹ c)å½“çº¿ç¨‹æ‰§è¡Œäº†æŸä¸ªå¯¹è±¡çš„wait()æ–¹æ³•æ—¶ï¼Œçº¿ç¨‹ä¼šè¢«ç½®å…¥è¯¥å¯¹è±¡çš„ç­‰å¾…é›†ä¸­ï¼ŒçŸ¥é“æ‰§è¡Œäº†è¯¥å¯¹è±¡çš„notify()æ–¹æ³•wait()/notify()æ–¹æ³•çš„æ‰§è¡Œè¦æ±‚çº¿ç¨‹é¦–å…ˆèŽ·å¾—è¯¥å¯¹è±¡çš„é”ã€‚ â‘¤ æ­»äº¡çŠ¶æ€(Dead)ï¼šçº¿ç¨‹åœ¨run()æ–¹æ³•æ‰§è¡Œç»“æŸåŽè¿›å…¥æ­»äº¡çŠ¶æ€ã€‚æ­¤å¤–ï¼Œå¦‚æžœçº¿ç¨‹æ‰§è¡Œäº†interrupt()æˆ–stop()æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒä¹Ÿä¼šä»¥å¼‚å¸¸é€€å‡ºçš„æ–¹å¼è¿›å…¥æ­»äº¡çŠ¶æ€ã€‚ ç»ˆæ­¢çº¿ç¨‹çš„ä¸‰ç§æ–¹æ³• â‘  ä½¿ç”¨é€€å‡ºæ ‡å¿—ï¼Œä½¿çº¿ç¨‹æ­£å¸¸é€€å‡ºï¼Œä¹Ÿå°±æ˜¯å½“runæ–¹æ³•å®ŒæˆåŽçº¿ç¨‹ç»ˆæ­¢ï¼ŒæŽ¨èä½¿ç”¨ã€‚ â‘¡ ä½¿ç”¨stopæ–¹æ³•å¼ºåˆ¶ç»ˆæ­¢çº¿ç¨‹(è¿™ä¸ªæ–¹æ³•ä¸æŽ¨èä½¿ç”¨ï¼Œå› ä¸ºstopå’Œsuppendã€resumeä¸€æ ·ï¼Œä¹Ÿå¯èƒ½å‘ç”Ÿä¸å¯é¢„æ–™çš„ç»“æžœ)ã€‚ â‘¢ ä½¿ç”¨interruptæ–¹æ³•ä¸­æ–­çº¿ç¨‹ã€‚ 41.çº¿ç¨‹å®‰å…¨çš„å•ä¾‹1234567891011121314 private static SingleInstance instance; public static SingleInstance getInstance(SingleInstance instance)&#123; if (instance == null) &#123; synchronized (SingleInstance.class) &#123; if (instance == null) &#123; instance = new SingleInstance(); &#125; &#125; &#125; return instance; &#125;&#125; 42.Serializable åºåˆ—åŒ–æŽ¥å£ï¼Œå¼€é”€å¤§ï¼Œå»ºè®®ä½¿ç”¨ï¼Œjavaæ–¹æ³•ï¼› Parcelelable ä½¿ç”¨éº»çƒ¦ï¼Œæ•ˆçŽ‡é«˜ï¼Œå¤šç”¨äºŽå†…å­˜ï¼ŒAndroidæ–¹æ³•ã€‚ 43.Serviceå¯åŠ¨æ–¹å¼å’Œç”Ÿå‘½å‘¨æœŸ â‘ startService()ï¼šå¼€å¯ï¼Œè°ƒç”¨è€…é€€å‡ºåŽServiceä»åœ¨ï¼› ç”Ÿå‘½å‘¨æœŸï¼šonCreate()â€“onStartCommand()â€“onDestory() é€šè¿‡startServiceå¯åŠ¨åŽï¼Œserviceä¼šä¸€ç›´æ— é™æœŸè¿è¡Œä¸‹åŽ»ï¼Œåªæœ‰å¤–éƒ¨è°ƒç”¨äº†stopService()æˆ–stopSelf()æ–¹æ³•æ—¶ï¼Œè¯¥Serviceæ‰ä¼šåœæ­¢è¿è¡Œå¹¶é”€æ¯ã€‚ â‘¡bindService()ï¼šå¼€å¯ï¼Œè°ƒç”¨è€…é€€å‡ºåŽServiceéšå³é€€å‡ºã€‚ ç”Ÿå‘½å‘¨æœŸï¼šonCreate()â€“onBind()â€“onUnBind()â€“onDestory() â‘ +â‘¡ çš„ç”Ÿå‘½å‘¨æœŸï¼šonCreate()â€“onStartCommand()â€“onBind()â€“onUnBind()â€“onDestory() 44.Android å¸¸è§å¸ƒå±€ FrameLayout ï¼ˆæ¡†æž¶å¸ƒå±€ï¼‰ã€LinearLayoutï¼ˆçº¿æ€§å¸ƒå±€ï¼‰ã€AbsoluteLayoutï¼ˆç»å¯¹å¸ƒå±€ï¼‰ã€RelativeLayoutï¼ˆç›¸å¯¹å¸ƒå±€ï¼‰ã€TableLayoutï¼ˆè¡¨æ ¼å¸ƒå±€ï¼‰ 45.Httpæ˜¯æœåŠ¡å±‚ï¼Œå€ŸåŠ©HttpClientå’ŒHttpUrlConnectionå»ºç«‹çŸ­è¿žæŽ¥ï¼Œè¯·æ±‚ä¸€æ¬¡åŽæ–­å¼€ï¼Œéœ€è¦é‡è¿žæ—¶æ‰è¿žã€‚ â‘ HttpClientï¼šå¼€æºæ¡†æž¶ï¼Œæ— å°è£…ï¼ŒåŽŸå§‹ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œå¼€å‘å¿«ï¼Œå®žçŽ°æ¯”è¾ƒç¨³å®šï¼ŒAndroidåºŸå¼ƒï¼ŒAndroid 6.0åˆ é™¤ï¼› â‘¡HttpUrlConnectionï¼šå¯¹ç½‘ç»œè¯·æ±‚æ²¡æœ‰HttpClientå°è£…å½»åº•ï¼ŒAndroid2.2ä¹‹å‰å­˜åœ¨bugï¼Œæ‰€ä»¥2.2ä¹‹å‰ç”¨HttpClientï¼Œä¹‹åŽç”¨å®¹æ˜“ä¼˜åŒ–çš„HttpUrlConnectionï¼Œå¼€æºæ¡†æž¶ï¼Œå°è£…äº†è¯·æ±‚å¤´ã€å‚æ•°ã€å†…å®¹ä½“ã€å“åº”åœ¨I/Oæµï¼ŒæŽ¥å£ä¸­ç»Ÿä¸€å°æˆäº†HttpGet/HttpPostï¼Œå‡å°‘äº†æ“ä½œçš„ç¹çæ€§ï¼Œè®¿é—®é€Ÿåº¦å¿«ã€‚ Httpsæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„Httpé€šé“ï¼Œç®€å•è®²å°±æ˜¯Httpçš„å®‰å…¨ç‰ˆï¼Œå³Httpä¸‹åŠ å…¥SSLå±‚ï¼Œå®‰å…¨åŸºç¡€æ˜¯SSLï¼ŒåŠ å¯†çš„è¯¦ç»†å†…å®¹æ˜¯SSLï¼Œä½œç”¨ï¼šå»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯æ•°æ®ä¼ è¾“çš„å®‰å…¨ã€ç¡®è®¤ç½‘ç«™çš„å®‰å…¨æ€§ã€‚ Volleyï¼šé€‚åˆå¤„ç†æ•°æ®é‡å°ï¼Œé€šä¿¡é¢‘ç¹çš„ç½‘ç»œæ“ä½œï¼Œå†…éƒ¨å°è£…äº†å¼‚æ­¥æ“ä½œï¼Œå¯ç›´æŽ¥åœ¨çº¿ç¨‹æ‰§è¡Œå¹¶å¤„ç†ç»“æžœï¼ŒåŒæ—¶å¯ä»¥å–æ¶ˆï¼Œå®¹æ˜“æ‰©å±•ï¼Œä½†æ˜¯ä¸é€‚åˆå¤§æ•°æ®è¯·æ±‚ï¼Œæ¯”å¦‚ä¸‹è½½è¡¨çŽ°ç³Ÿç³•ï¼Œä¸æ”¯æŒhttpsï¼Œandroid2.2åŠä»¥ä¸‹ç”¨HttpClientï¼Œandroid2.3åŠä»¥ä¸Šç”¨HttpUrlConnectionã€‚ OkHttpï¼šä¸“æ³¨äºŽæå‡ç½‘ç»œè¿žæŽ¥æ•ˆçŽ‡çš„Httpå®¢æˆ·ç«¯ï¼Œèƒ½å¤Ÿå®žçŽ°IPå’Œç«¯å£çš„è¯·æ±‚é‡ç”¨ä¸€ä¸ªsocketï¼Œå¤§å¤§é™ä½Žäº†è¿žæŽ¥æ—¶é—´ï¼Œä¹Ÿé™ä½Žäº†æœåŠ¡å™¨çš„åŽ‹åŠ›ï¼Œå¯¹Httpå’Œhttpséƒ½æœ‰è‰¯å¥½çš„æ”¯æŒï¼Œä¸ç”¨æ‹…å¿ƒappç‰ˆæœ¬æ›´æ¢çš„å›°æ‰°ï¼Œä½†æ˜¯okHttpè¯·æ±‚æ˜¯åœ¨çº¿ç¨‹é‡Œæ‰§è¡Œï¼Œä¸èƒ½ç›´æŽ¥åˆ·æ–°UIï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚ æ€»ç»“ï¼šåœ¨é¡¹ç›®å®žé™…è¿ç”¨ä¸­ï¼Œè§†æƒ…å†µé€‰æ‹©ç½‘ç»œè¯·æ±‚æ–¹å¼ï¼Œä¹Ÿå¯ä»¥Volley+OkHttpæ­é…ä½¿ç”¨ã€‚å¼‚æ­¥å›žè°ƒç”¨Volleyï¼Œç½‘ç»œè¯·æ±‚åº•å±‚ç”¨OkHttp RxJava + Retrofit3 + OkHttp3 â‘ RxJava ä¸»è¦ç”¨æ¥å®žçŽ°çº¿ç¨‹åˆ‡æ¢ï¼Œæˆ‘ä»¬åˆ¶å®šè®¢é˜…åœ¨å“ªä¸€ä¸ªçº¿ç¨‹ï¼Œè§‚å¯Ÿåœ¨å“ªä¸ªçº¿ç¨‹ï¼Œé€šè¿‡æ“ä½œç¬¦è¿›è¡Œæ•°æ®å˜æ¢ï¼Œæ•´ä¸ªè¿‡ç¨‹æ˜¯é”®å¼çš„ï¼Œç®€åŒ–é€»è¾‘ã€‚ â‘¡Retrofit æ˜¯ç½‘ç»œè¯·æ±‚çš„ä¸€ä¸ªæž¶å­ï¼Œç”¨å®ƒè®¾ç½®ä¸€äº›å‚æ•°å’Œè¯·æ±‚Urlã€‚ â‘¢OkHttpæ˜¯ç½‘ç»œè¯·æ±‚çš„å†…æ ¸ï¼Œå®žé™…çš„ç½‘ç»œè¯·æ±‚æ˜¯å®ƒå‘å‡ºæ¥çš„ã€‚ TCP æ˜¯ç½‘ç»œå±‚ï¼Œæ»‘åŠ¨çª—å£åè®®ï¼Œæ‹¥å¡žæŽ§åˆ¶ï¼Œå¯é è¿žæŽ¥å€ŸåŠ©socketé•¿è¿žæŽ¥ï¼Œéœ€è¦3æ¬¡æ¡æ‰‹ï¼Œç¬¬å››æ¬¡å–æ¶ˆè¿žæŽ¥ï¼Œç”»é¢ä¼˜å…ˆã€‚ UDPï¼šä¸å…³å¿ƒæ•°æ®æ˜¯å¦åˆ°è¾¾ï¼Œæ˜¯å¦é˜»å¡žï¼Œä¸å¯é è¿žæŽ¥ï¼Œæµç•…ä¼˜å…ˆã€‚ 46.å¦‚ä½•èŠ‚çœå†…å­˜ä½¿ç”¨ï¼Œä¸»åŠ¨å›žæ”¶å†…å­˜ï¼Ÿ ç­”ï¼šå°½é‡å¤šä½¿ç”¨å†…éƒ¨ç±»ï¼Œæé«˜ç¨‹åºæ•ˆçŽ‡ï¼Œå›žæ”¶å·²ä½¿ç”¨çš„èµ„æºï¼Œåˆç†ä½¿ç”¨ç¼“å­˜ï¼Œåˆç†è®¾ç½®å˜é‡çš„ä½œç”¨èŒƒå›´ã€‚ 47.Activityå¦‚ä½•ç”ŸæˆViewï¼Ÿ ç­”ï¼šActivityæ‰§è¡Œåœ¨attch()æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªPhoneWindowï¼ˆWindowçš„å­ç±»ï¼‰ï¼Œåœ¨onCreate()æ–¹æ³•çš„setContentView()æ–¹æ³•ä¸­ï¼Œåˆ›å»ºDecorViewï¼ŒDecorViewçš„addView()æ–¹æ³•ï¼ŒæŠŠlayoutå¸ƒå±€åŠ è½½å‡ºæ¥ã€‚é€šè¿‡onDraw()ç”»å‡ºæ¥ï¼Œç”»Viewä¹‹å‰è°ƒç”¨onMeasure()æ–¹æ³•è®¡ç®—æ˜¾ç¤ºçš„å¤§å°ã€‚ 48.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤šçº¿ç¨‹ï¼Ÿ â‘ æ›´å¥½åœ°åˆ©ç”¨CPUèµ„æºï¼›â‘¡è¿›ç¨‹é—´æ•°æ®ä¸èƒ½æ•°æ®å…±äº«ï¼Œçº¿ç¨‹å¯ä»¥ï¼›â‘¢ç³»ç»Ÿåˆ›å»ºè¿›ç¨‹éœ€è¦ä¸ºè¯¥è¿›ç¨‹é‡æ–°åˆ†é…ç³»ç»Ÿèµ„æºï¼Œåˆ›å»ºçº¿ç¨‹ä»£ä»·è¾ƒå°ï¼›â‘£Javaè¯­è¨€å†…ç½®äº†å¤šçº¿ç¨‹åŠŸèƒ½æ”¯æŒï¼Œç®€åŒ–äº†javaå¤šçº¿ç¨‹ç¼–ç¨‹ã€‚ çº¿ç¨‹æ± æ˜¯ä¸€ç§å¤šçº¿ç¨‹å¤„ç†å½¢å¼ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ï¼Œåœ¨åˆ›å»ºçº¿ç¨‹åŽè‡ªåŠ¨å¯åŠ¨è¿™äº›ä»»åŠ¡ï¼Œçº¿ç¨‹æ± çº¿ç¨‹æ˜¯åŽå°çº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä½¿ç”¨é»˜è®¤çš„å †æ ˆå¤§å°ï¼Œä»¥ä¼˜å…ˆçº§æ‰§è¡Œã€‚ 49.çŽ°åœºä¿æŠ¤123456789@Overrideprotected void onSaveInstanceState(Bundle savedInstanceState) &#123; super.onSaveInstanceState(savedInstanceState);&#125;@Overrideprotected void onRestoreInstanceState(Bundle savedInstanceState) &#123; super.onRestoreInstanceState(savedInstanceState);&#125; ä½¿ç”¨åœºæ™¯ï¼šâ‘ è¿›ç¨‹è¢«å¼‚å¸¸æ€æ­»ï¼›â‘¡ç³»ç»Ÿé…ç½®å‘ç”Ÿå˜åŒ–ï¼ˆæ¯”å¦‚æ¨ªç«–å±åˆ‡èŠ±æ¢ï¼‰ã€‚ å½“Activityå¤„äºŽonPause() ï¼ŒonStop() ï¼ŒonDestroy() ä¸‰ç§çŠ¶æ€æ—¶ç¨‹åºå¯èƒ½ä¼šè¢«Androidç³»ç»Ÿå›žæ”¶æŽ‰ï¼Œè¿™æ—¶å¯èƒ½ä¼šé€ æˆç”¨æˆ·åœ¨ç¨‹åºå½“ä¸­çš„æ•°æ®æˆ–è€…ä¿®æ”¹ä¸¢å¤±ã€‚äºŽæ˜¯æˆ‘ä»¬éœ€è¦â€çŽ°åœºä¿æŠ¤â€ï¼Œå½“ä¸‹æ¬¡é‡å¯ç¨‹åºæˆ–activityæ—¶æ¢å¤ä¸Šä¸€æ¬¡çš„æ•°æ®ã€‚ å› æ­¤Androidæä¾›äº†onSaveInstanceState(Bundlout State)æ–¹æ³•ä¼šåœ¨ç¨‹åºè¢«å›žæ”¶å‰è¿›è¡Œè°ƒç”¨ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯onSaveInstanceState()æ–¹æ³•åªé€‚åˆä¿å­˜çž¬æ€æ•°æ®, æ¯”å¦‚UIæŽ§ä»¶çš„çŠ¶æ€, æˆå‘˜å˜é‡çš„å€¼ç­‰ï¼Œè€Œä¸åº”è¯¥ç”¨æ¥ä¿å­˜æŒä¹…åŒ–æ•°æ®ã€‚onRestoreInstanceStateæ–¹æ³•ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯onSaveInstanceStateæ–¹æ³•å’ŒonRestoreInstanceStateæ–¹æ³•â€œä¸ä¸€å®šâ€æ˜¯æˆå¯¹çš„è¢«è°ƒç”¨çš„ï¼ŒonRestoreInstanceStateè¢«è°ƒç”¨çš„å‰ææ˜¯ï¼Œactivity Aâ€œç¡®å®žâ€è¢«ç³»ç»Ÿé”€æ¯äº†ï¼Œè€Œå¦‚æžœä»…ä»…æ˜¯åœç•™åœ¨æœ‰è¿™ç§å¯èƒ½æ€§çš„æƒ…å†µä¸‹ï¼Œåˆ™è¯¥æ–¹æ³•ä¸ä¼šè¢«è°ƒç”¨ï¼Œä¾‹å¦‚ï¼Œå½“æ­£åœ¨æ˜¾ç¤ºactivity Açš„æ—¶å€™ï¼Œç”¨æˆ·æŒ‰ä¸‹HOMEé”®å›žåˆ°ä¸»ç•Œé¢ï¼Œç„¶åŽç”¨æˆ·ç´§æŽ¥ç€åˆè¿”å›žåˆ°activity Aï¼Œè¿™ç§æƒ…å†µä¸‹activity Aä¸€èˆ¬ä¸ä¼šå› ä¸ºå†…å­˜çš„åŽŸå› è¢«ç³»ç»Ÿé”€æ¯ï¼Œæ•…activity Açš„onRestoreInstanceStateæ–¹æ³•ä¸ä¼šè¢«æ‰§è¡Œã€‚ 50.å†…å­˜æº¢å‡ºï¼Œå†…å­˜æ³„æ¼ å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰ï¼šç¨‹åºåœ¨ç”³è¯·å†…å­˜æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ä½¿ç”¨ã€‚ åŽŸå› ï¼šåŠ è½½å¯¹è±¡è¿‡å¤§ï¼Œç›¸å¯¹èµ„æºè¾ƒå¤šï¼Œæ¥ä¸åŠåŠ è½½ã€‚ è§£å†³åŠžæ³•ï¼šå†…å­˜å¼•ç”¨ä¸Šåšå¤„ç†ï¼Œæ¯”å¦‚ç”¨è½¯å¼•ç”¨ï¼›å›¾ç‰‡åŠ è½½æ—¶å¤„ç†ï¼ˆåŽ‹ç¼©ç­‰ï¼‰ï¼›åŠ¨æ€å›žæ”¶å†…å­˜ï¼›ä¼˜åŒ–å†…å­˜åˆ†é…ï¼Œè‡ªå®šä¹‰å †å†…å­˜å¤§å°ï¼Œé¿å…ä½¿ç”¨Enumï¼Œå‡å°‘BitMapçš„å†…å­˜å ç”¨ï¼Œå†…å­˜å¯¹è±¡é‡å¤ä½¿ç”¨ï¼Œé¿å…å¯¹è±¡çš„å†…å­˜æ³„æ¼ã€‚ å†…å­˜æ³„æ¼ï¼ˆmemory leakï¼‰ï¼š ç¨‹åºåœ¨ç”³è¯·å†…å­˜åŽï¼Œæ— æ³•é‡Šæ”¾å·²ç”³è¯·çš„å†…å­˜ç©ºé—´ï¼Œä¸€æ¬¡æ³„æ¼å±å®³å¯å¿½ç•¥ï¼Œä½†æŽ¨ç§¯ä¸¥é‡æœ€ç»ˆä¼šå¯¼è‡´OOMï¼› handleræ³„éœ²ï¼šæ¶ˆæ¯å¼•ç”¨äº†handlerå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åˆéšæ€§åœ°æŒæœ‰äº†Activityå¯¹è±¡ï¼Œå½“å‘ç”ŸGCæ—¶ä»¥ä¸ºmessage-handler-activityçš„å¼•ç”¨é“¾å¯¼è‡´Activityæ— æ³•è¢«å›žæ”¶ï¼Œå³å‘ç”Ÿæ³„æ¼ï¼Œç®€å•æ¥è¯´å°±æ˜¯handlerå¯¹activityå¼ºå¼•ç”¨å¯¼è‡´çš„GCï¼Œæ— æ³•åŠæ—¶å›žæ”¶Activityã€‚ï¼ˆPSï¼šGCåžƒåœ¾å›žæ”¶ï¼Œå½“å †å†…å­˜é‡Œçš„å¯¹è±¡æ²¡æœ‰å¼•ç”¨æŒ‡å‘æ—¶ï¼ŒGCå›žæ”¶ã€‚ï¼‰ è§£å†³åŠžæ³•ï¼šæ–¹æ³•ä¸€ï¼šé€šè¿‡ç¨‹åºé€»è¾‘æ¥è¿›è¡Œä¿æŠ¤ã€‚ 1.åœ¨å…³é—­Activityçš„æ—¶å€™åœæŽ‰ä½ çš„åŽå°çº¿ç¨‹ã€‚çº¿ç¨‹åœæŽ‰äº†ï¼Œå°±ç›¸å½“äºŽåˆ‡æ–­äº†Handlerå’Œå¤–éƒ¨è¿žæŽ¥çš„çº¿ï¼ŒActivityè‡ªç„¶ä¼šåœ¨åˆé€‚çš„æ—¶å€™è¢«å›žæ”¶ã€‚ 2.å¦‚æžœä½ çš„Handleræ˜¯è¢«delayçš„MessageæŒæœ‰äº†å¼•ç”¨ï¼Œé‚£ä¹ˆä½¿ç”¨ç›¸åº”çš„Handlerçš„removeCallbacks()æ–¹æ³•ï¼ŒæŠŠæ¶ˆæ¯å¯¹è±¡ä»Žæ¶ˆæ¯é˜Ÿåˆ—ç§»é™¤å°±è¡Œäº†ã€‚ æ–¹æ³•äºŒï¼šå°†Handlerå£°æ˜Žä¸ºé™æ€ç±»ã€‚ PS:åœ¨Java ä¸­ï¼Œéžé™æ€çš„å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»éƒ½ä¼šéšå¼åœ°æŒæœ‰å…¶å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œé™æ€çš„å†…éƒ¨ç±»ä¸ä¼šæŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ã€‚ é™æ€ç±»ä¸æŒæœ‰å¤–éƒ¨ç±»çš„å¯¹è±¡ï¼Œæ‰€ä»¥ä½ çš„Activityå¯ä»¥éšæ„è¢«å›žæ”¶ã€‚ç”±äºŽHandlerä¸å†æŒæœ‰å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯¼è‡´ç¨‹åºä¸å…è®¸ä½ åœ¨Handlerä¸­æ“ä½œActivityä¸­çš„å¯¹è±¡äº†ã€‚æ‰€ä»¥ä½ éœ€è¦åœ¨Handlerä¸­å¢žåŠ ä¸€ä¸ªå¯¹Activityçš„å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰ã€‚ WebViewæ³„æ¼ï¼šåˆ›å»ºçš„å¯¹è±¡æ²¡æœ‰åœ¨åˆé€‚çš„æ—¶é—´é”€æ¯ï¼Œåˆ™ä¸€ç›´å­˜åœ¨å†…å­˜é‡Œè€—è´¹å†…å­˜ç©ºé—´ï¼ŒWebViewä¸å»ºè®®åœ¨xmlæ–‡ä»¶ä¸­æŒ‡æ˜Žï¼Œå› ä¸ºä¸€ç›´å­˜åœ¨ä¸èƒ½å¯¹å…¶é”€æ¯ï¼Œåº”è¯¥åœ¨ä»£ç ä¸­åˆ›å»ºWebViewï¼Œé€šè¿‡addView()çš„æ–¹å¼åŠ å…¥layoutï¼Œåœ¨Activity çš„onDestory()æ–¹æ³•ä¸­éœ€è¦é”€æ¯ï¼Œå…ˆå°†åŠ è½½çš„å†…å®¹ç½®ä¸ºnullï¼ŒwebView.destroy(); 12345678910111213141516171819202122WebView mWebView = new WebView(getApplicationContext()); @Override protected void onDestroy() &#123; if( mWebView!=null) &#123; ViewParent parent = mWebView.getParent(); if (parent != null) &#123; ((ViewGroup) parent).removeView(mWebView); &#125; mWebView.stopLoading(); // é€€å‡ºæ—¶è°ƒç”¨æ­¤æ–¹æ³•ï¼Œç§»é™¤ç»‘å®šçš„æœåŠ¡ï¼Œå¦åˆ™æŸäº›ç‰¹å®šç³»ç»Ÿä¼šæŠ¥é”™ mWebView.getSettings().setJavaScriptEnabled(false); mWebView.clearHistory(); mWebView.clearView(); mWebView.removeAllViews(); mWebView.destroy(); &#125; super.onDestroy(); &#125; 51.JNIå’ŒNDKâ€‹ JNIæ˜¯Javaè°ƒç”¨Native è¯­è¨€çš„ä¸€ç§ç‰¹æ€§ï¼Œå±žäºŽJavaï¼ŒJavaæœ¬åœ°æŽ¥å£ï¼Œä½¿Javaä¸Žæœ¬åœ°å…¶ä»–ç±»åž‹è¯­è¨€äº¤äº’ï¼ˆC++ï¼‰ â€‹ å®žçŽ°æ­¥éª¤ï¼šåœ¨Javaä¸­å£°æ˜ŽNativeæ–¹æ³•ï¼Œç¼–è¯‘è¯¥æ–‡ä»¶å¾—åˆ°.classæ–‡ä»¶ï¼Œé€šè¿‡javahå‘½ä»¤å¯¼å‡ºJNIå¤´æ–‡ä»¶ï¼ˆ.hæ–‡ä»¶ï¼‰ï¼Œä½¿ç”¨Javaéœ€è¦äº¤äº’çš„æœ¬åœ°ä»£ç å®žçŽ°å­å•ŠJavaä¸­å£°æ˜Žçš„Nativeæ–¹æ³•ï¼Œç¼–è¯‘soæ–‡ä»¶ï¼Œé€šè¿‡Javaæ‰§è¡ŒJavaç¨‹åºï¼Œæœ€ç»ˆå®žçŽ°Javaè°ƒç”¨æœ¬åœ°ä»£ç  â€‹ NDKï¼ˆNative Develop Kitï¼‰ï¼šAndroidå¼€å‘å·¥å…·åŒ…ï¼Œå±žäºŽAndroidã€‚ â€‹ ä½œç”¨ï¼šå¿«é€Ÿå¼€å‘Cã€C++åŠ¨æ€åº“ï¼Œå¹¶è‡ªåŠ¨å°†soæ–‡ä»¶å’Œåº”ç”¨æ‰“åŒ…æˆAPKï¼Œå³å¯é€šè¿‡NDKåœ¨Androidä¸­ä½¿ç”¨JNIä¸Žæœ¬åœ°ä»£ç ï¼ˆCã€C++ï¼‰äº¤äº’ï¼ˆAndroidå¼€å‘éœ€è¦æœ¬åœ°ä»£ç Cã€C++å®žçŽ°ï¼‰ â€‹ ç‰¹ç‚¹ï¼šè¿è¡Œæ•ˆçŽ‡é«˜ï¼Œä»£ç å®‰å…¨æ€§é«˜ï¼ŒåŠŸèƒ½æ‹“å±•æ€§å¥½ï¼Œæ˜“äºŽä»£ç å¤ç”¨å’Œç§»æ¤ã€‚ â€‹ ä½¿ç”¨æ­¥éª¤ï¼šâ‘ é…ç½®NDKçŽ¯å¢ƒï¼›â‘¡åˆ›å»ºAndroidé¡¹ç›®ï¼Œå¹¶äºŽNDKè¿›è¡Œå…³è”ï¼›â‘¢åœ¨Androidé¡¹ç›®ä¸­å£°æ˜Žæ‰€éœ€è°ƒç”¨çš„Nativeæ–¹æ³•ï¼›â‘£ä½¿ç”¨è¯¥Nativeæ–¹æ³•ï¼›â‘¤é€šè¿‡NDK buildå‘½ä»¤ç¼–è¯‘äº§ç”Ÿsoæ–‡ä»¶ï¼›â‘¥ç¼–è¯‘ASå·¥ç¨‹ï¼Œå®žçŽ°è°ƒç”¨æœ¬åœ°ä»£ç ã€‚ â€‹ JNIå’ŒNDKçš„å…³ç³»ï¼šJNIå®žçŽ°ç›®çš„ï¼ŒNDKæ˜¯Androidå®žçŽ°JNIçš„æ‰‹æ®µï¼Œå³åœ¨ASå¼€å‘çŽ¯å¢ƒä¸­é€šè¿‡NDKä»Žè€Œå®žçŽ°JNIåŠŸèƒ½ã€‚ 52.å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼åŠå…¶å®žçŽ°æ€æƒ³å’Œä½œç”¨è½¬è½½æ–‡ç« ï¼š23ç§è®¾è®¡æ¨¡å¼å…¨è§£æž - codeTao - åšå®¢å›­ â‘ å•ä¾‹æ¨¡å¼ï¼šå•ä¾‹å¯¹è±¡èƒ½ä¿è¯åœ¨ä¸€ä¸ªJVMä¸­ï¼Œè¯¥å¯¹è±¡åªæœ‰ä¸€ä¸ªå®žä¾‹å­˜åœ¨ã€‚ â‘¡å·¥åŽ‚æ¨¡å¼ ä¸€ä¸ªæŠ½è±¡äº§å“ç±»ï¼Œå¯ä»¥æ´¾ç”Ÿå‡ºå¤šä¸ªå…·ä½“äº§å“ç±»ã€‚ ä¸€ä¸ªæŠ½è±¡å·¥åŽ‚ç±»ï¼Œå¯ä»¥æ´¾ç”Ÿå‡ºå¤šä¸ªå…·ä½“å·¥åŽ‚ç±»ã€‚æ¯ä¸ªå…·ä½“å·¥åŽ‚ç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå…·ä½“äº§å“ç±»çš„å®žä¾‹ã€‚ æŠ½è±¡å·¥åŽ‚æ¨¡å¼ï¼šå¤šä¸ªæŠ½è±¡äº§å“ç±»ï¼Œæ¯ä¸ªæŠ½è±¡äº§å“ç±»å¯ä»¥æ´¾ç”Ÿå‡ºå¤šä¸ªå…·ä½“äº§å“ç±»ã€‚ ä¸€ä¸ªæŠ½è±¡å·¥åŽ‚ç±»ï¼Œå¯ä»¥æ´¾ç”Ÿå‡ºå¤šä¸ªå…·ä½“å·¥åŽ‚ç±»ã€‚ æ¯ä¸ªå…·ä½“å·¥åŽ‚ç±»å¯ä»¥åˆ›å»ºå¤šä¸ªå…·ä½“äº§å“ç±»çš„å®žä¾‹ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºçš„æ˜¯ä¸€ä¸ªäº§å“çº¿ä¸‹çš„å¤šä¸ªäº§å“ã€‚ â‘¢é€‚é…å™¨æ¨¡å¼ å°†æŸä¸ªç±»çš„æŽ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæŽ¥å£è¡¨ç¤ºï¼Œç›®çš„æ˜¯æ¶ˆé™¤ç”±äºŽæŽ¥å£ä¸åŒ¹é…æ‰€é€ æˆçš„ç±»çš„å…¼å®¹æ€§é—®é¢˜ã€‚ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼šç±»çš„é€‚é…å™¨æ¨¡å¼ã€å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼ã€æŽ¥å£çš„é€‚é…å™¨æ¨¡å¼ã€‚ â‘£è£…é¥°æ¨¡å¼ï¼ˆDecoratorï¼‰ é¡¾åæ€ä¹‰ï¼Œè£…é¥°æ¨¡å¼å°±æ˜¯ç»™ä¸€ä¸ªå¯¹è±¡å¢žåŠ ä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œè€Œä¸”æ˜¯åŠ¨æ€çš„ï¼Œè¦æ±‚è£…é¥°å¯¹è±¡å’Œè¢«è£…é¥°å¯¹è±¡å®žçŽ°åŒä¸€ä¸ªæŽ¥å£ï¼Œè£…é¥°å¯¹è±¡æŒæœ‰è¢«è£…é¥°å¯¹è±¡çš„å®žä¾‹ã€‚ Sourceç±»æ˜¯è¢«è£…é¥°ç±»ï¼ŒDecoratorç±»æ˜¯ä¸€ä¸ªè£…é¥°ç±»ï¼Œå¯ä»¥ä¸ºSourceç±»åŠ¨æ€çš„æ·»åŠ ä¸€äº›åŠŸèƒ½ã€‚ è£…é¥°å™¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š 1ã€éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚ 2ã€åŠ¨æ€çš„ä¸ºä¸€ä¸ªå¯¹è±¡å¢žåŠ åŠŸèƒ½ï¼Œè€Œä¸”è¿˜èƒ½åŠ¨æ€æ’¤é”€ã€‚ï¼ˆç»§æ‰¿ä¸èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œç»§æ‰¿çš„åŠŸèƒ½æ˜¯é™æ€çš„ï¼Œä¸èƒ½åŠ¨æ€å¢žåˆ ã€‚ï¼‰ ç¼ºç‚¹ï¼šäº§ç”Ÿè¿‡å¤šç›¸ä¼¼çš„å¯¹è±¡ï¼Œä¸æ˜“æŽ’é”™ï¼ â‘¤ä»£ç†æ¨¡å¼ï¼ˆProxyï¼‰ï¼šå¤šä¸€ä¸ªä»£ç†ç±»å‡ºæ¥ï¼Œæ›¿åŽŸå¯¹è±¡è¿›è¡Œä¸€äº›æ“ä½œã€‚ â‘¥æ¡¥æŽ¥æ¨¡å¼ï¼ˆBridgeï¼‰ï¼šæ¡¥æŽ¥æ¨¡å¼å°±æ˜¯æŠŠäº‹ç‰©å’Œå…¶å…·ä½“å®žçŽ°åˆ†å¼€ï¼Œä½¿ä»–ä»¬å¯ä»¥å„è‡ªç‹¬ç«‹çš„å˜åŒ–ã€‚æ¡¥æŽ¥çš„ç”¨æ„æ˜¯ï¼šå°†æŠ½è±¡åŒ–ä¸Žå®žçŽ°åŒ–è§£è€¦ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚ â‘¦è§‚å¯Ÿè€…æ¨¡å¼ï¼šä¸€ä¸ªç›®æ ‡ç‰©ä»¶ç®¡ç†æ‰€æœ‰ç›¸ä¾äºŽå®ƒçš„è§‚å¯Ÿè€…ç‰©ä»¶ï¼Œå¹¶ä¸”åœ¨å®ƒæœ¬èº«çš„çŠ¶æ€æ”¹å˜æ—¶ä¸»åŠ¨å‘å‡ºé€šçŸ¥ã€‚è¿™é€šå¸¸é€è¿‡å‘¼å«å„è§‚å¯Ÿè€…æ‰€æä¾›çš„æ–¹æ³•æ¥å®žçŽ°ã€‚æ­¤ç§æ¨¡å¼é€šå¸¸è¢«ç”¨æ¥å®žçŽ°äº‹ä»¶å¤„ç†ç³»ç»Ÿã€‚ â‘§è®¿é—®è€…æ¨¡å¼ï¼šä¸€ç§åˆ†ç¦»å¯¹è±¡æ•°æ®ç»“æž„ä¸Žè¡Œä¸ºçš„æ–¹æ³•ï¼Œé€šè¿‡è¿™ç§åˆ†ç¦»ï¼Œå¯è¾¾åˆ°ä¸ºä¸€ä¸ªè¢«è®¿é—®è€…åŠ¨æ€æ·»åŠ æ–°çš„æ“ä½œè€Œæ— éœ€åšå…¶å®ƒçš„ä¿®æ”¹çš„æ•ˆæžœã€‚ 53.HashMapã€ HashTableã€HashSetçš„å¼‚åŒè½¬è½½æ–‡ç« ï¼šHashSet HashTable HashMapçš„åŒºåˆ« åŠå…¶Javaé›†åˆä»‹ç» - ywl925 - åšå®¢å›­ â‘ HashSetæ˜¯Setçš„ä¸€ä¸ªå®žçŽ°ç±»ï¼ŒHashMapæ˜¯Mapçš„ä¸€ä¸ªå®žçŽ°ç±»ï¼ŒåŒæ—¶HashMapæ˜¯HashTableçš„æ›¿ä»£å“ â‘¡HashSetä»¥å¯¹è±¡ä½œä¸ºå…ƒç´ ï¼Œè€ŒHashMapä»¥(key-value)çš„ä¸€ç»„å¯¹è±¡ä½œä¸ºå…ƒç´ ï¼Œä¸”HashSetæ‹’ç»æŽ¥å—é‡å¤çš„å¯¹è±¡ã€‚HashMapå¯ä»¥çœ‹ä½œä¸‰ä¸ªè§†å›¾ï¼škeyçš„Setï¼Œvalueçš„Collectionï¼ŒEntryçš„Setã€‚ è¿™é‡ŒHashSetå°±æ˜¯å…¶å®žå°±æ˜¯HashMapçš„ä¸€ä¸ªè§†å›¾ã€‚ HashSetå†…éƒ¨å°±æ˜¯ä½¿ç”¨HashMapå®žçŽ°çš„ï¼Œå’ŒHashMapä¸åŒçš„æ˜¯å®ƒä¸éœ€è¦Keyå’ŒValueä¸¤ä¸ªå€¼ã€‚ HashMapæ˜¯ä¸€ä¸ªæ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆä½“ï¼Œæ–°åŠ å…¥çš„æ”¾åœ¨é“¾å¤´ï¼Œé‡å¤çš„keyä¸åŒçš„alueè¢«æ–°valueæ›¿ä»£ â‘¢ç»§æ‰¿ä¸åŒ public class Hashtable extends Dictionary&lt;&gt; implements Map&lt;&gt; public class HashMap extends AbstractMap&lt;&gt; implements Map&lt;&gt; â‘£HashTable æ–¹æ³•åŒæ­¥ï¼Œè€ŒHashMapéœ€è¦è‡ªå·±å¢žåŠ åŒæ­¥å¤„ç†ã€‚ â‘¤HashTableä¸­ï¼Œkeyå’Œvalueéƒ½ä¸å…è®¸å‡ºçŽ°nullå€¼ã€‚ åœ¨HashMapä¸­ï¼Œnullå¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼›å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸ºnullã€‚ç”¨containsKey()æ–¹æ³•æ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªé”®ã€‚ â‘¥ä¸¤ä¸ªéåŽ†æ–¹å¼çš„å†…éƒ¨å®žçŽ°ä¸Šä¸åŒã€‚ HashTableã€HashMapéƒ½ä½¿ç”¨äº† Iteratorã€‚è€Œç”±äºŽåŽ†å²åŽŸå› ï¼ŒHashTableè¿˜ä½¿ç”¨äº†Enumerationçš„æ–¹å¼ ã€‚ â‘¦å“ˆå¸Œå€¼çš„ä½¿ç”¨ä¸åŒ HashTableç›´æŽ¥ä½¿ç”¨å¯¹è±¡çš„hashCodeï¼ŒHashTableä¸­hashæ•°ç»„é»˜è®¤å¤§å°æ˜¯11ï¼Œå¢žåŠ çš„æ–¹å¼æ˜¯ old*2+1ã€‚ è€ŒHashMapé‡æ–°è®¡ç®—hashå€¼ï¼ŒHashMapä¸­hashæ•°ç»„çš„é»˜è®¤å¤§å°æ˜¯16ï¼Œè€Œä¸”ä¸€å®šæ˜¯2çš„æŒ‡æ•°ã€‚ å¦‚ä½•å®žçŽ°HashMapçº¿ç¨‹åŒæ­¥ï¼Ÿ â‘ ä½¿ç”¨ java.util.Hashtable ç±»ï¼Œæ­¤ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ â‘¡ä½¿ç”¨ java.util.concurrent.ConcurrentHashMapï¼Œæ­¤ç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ â‘¢ä½¿ç”¨ java.util.Collections.synchronizedMap() æ–¹æ³•åŒ…è£… HashMap objectï¼Œå¾—åˆ°çº¿ç¨‹å®‰å…¨çš„Mapï¼Œå¹¶åœ¨æ­¤Mapä¸Šè¿›è¡Œæ“ä½œã€‚ 54.Android ä¸­å†…å­˜æ³„æ¼åŽŸå› åŠä¼˜åŒ–æ–¹æ¡ˆï¼Ÿæ–‡ç« è½¬è½½ï¼šAndroid ä¸­å†…å­˜æ³„æ¼çš„åŽŸå› å’Œè§£å†³æ–¹æ¡ˆ - ç®€ä¹¦ â‘ éžé™æ€å†…éƒ¨ç±»é€ æˆçš„å†…å­˜æ³„æ¼ éžé™æ€ç±»ä¼šæŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œå¦‚æžœè¿™ä¸ªå†…éƒ¨ç±»æ¯”å¤–éƒ¨ç±»çš„ç”Ÿå‘½å‘¨æœŸé•¿ï¼Œåœ¨å¤–éƒ¨ç±»è¢«é”€æ¯æ—¶ï¼Œå†…éƒ¨ç±»æ— æ³•å›žæ”¶ï¼Œå³é€ æˆå†…å­˜æ³„æ¼ï¼› â‘¡å¤–éƒ¨ç±»ä¸­æŒæœ‰éžé™æ€å†…éƒ¨ç±»çš„é™æ€å¯¹è±¡ ä¿æŒä¸€è‡´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå°†å†…éƒ¨ç±»å¯¹è±¡æ”¹æˆéžé™æ€ï¼› â‘¢Handler æˆ– Runnable ä½œä¸ºéžé™æ€å†…éƒ¨ç±» Handler å’Œ Runnable ä½œä¸ºåŒ¿åå†…éƒ¨ç±»ï¼Œéƒ½ä¼šæŒæœ‰ Activity çš„å¼•ç”¨ï¼Œç”±äºŽ Handler å’Œ Runnable çš„ç”Ÿå‘½å‘¨æœŸæ¯” Activity é•¿ï¼Œå¯¼è‡´Activity æ— æ³•è¢«å›žæ”¶ï¼Œä»Žè€Œé€ æˆå†…å­˜æ³„æ¼ã€‚ è§£å†³åŠžæ³•ï¼šå°†Handler å’Œ Runnable å®šä¹‰ä¸ºé™æ€å†…éƒ¨ç±»ï¼Œåœ¨Activity çš„onDestory()æ–¹æ³•ä¸­è°ƒç”¨Handler çš„ removeCallbacks æ–¹æ³•æ¥ç§»é™¤ Messageã€‚ è¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¦‚æžœ Handler æˆ–è€… Runnable ä¸­æŒæœ‰ Context å¯¹è±¡ï¼Œé‚£ä¹ˆå³ä½¿ä½¿ç”¨é™æ€å†…éƒ¨ç±»ï¼Œè¿˜æ˜¯ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚è§£å†³åŠžæ³•ï¼šä½¿ç”¨å¼±å¼•ç”¨ â‘£å…¶ä»–å†…å­˜æ³„æ¼æƒ…å†µï¼šæ¯”å¦‚BraodcastReceiver æœªæ³¨é”€ï¼ŒInputStream æœªå…³é—­ï¼Œå†ä»£ç ä¸­å¤šæ³¨æ„æ³¨é”€æˆ–å…³é—­ã€‚ 55.LeakCanaryå†…å­˜ä¼˜åŒ–å‚è€ƒæ–‡ç« ï¼šLeakCanaryåŽŸç†è§£æž - ç®€ä¹¦ â‘ é¡¹ç›®å¦‚ä½•ä½¿ç”¨LeakCanary LeakCanary.enableDisplayLeakActivity(context);å†…å­˜æº¢å‡ºå›¾æ ‡ï¼Œå›¾æ ‡ä»¥é€šçŸ¥çš„å½¢å¼æ˜¾ç¤ºå†…å­˜æº¢å‡º â‘¡å·¥ä½œæœºåˆ¶ LeakCanary.install() ä¼šè¿”å›žä¸€ä¸ªé¢„å®šä¹‰çš„ RefWatcherï¼ŒåŒæ—¶ä¹Ÿä¼šå¯ç”¨ä¸€ä¸ª ActivityRefWatcherï¼Œç”¨äºŽè‡ªåŠ¨ç›‘æŽ§è°ƒç”¨Activity.onDestroy() ä¹‹åŽæ³„éœ²çš„ activityã€‚ 1.RefWatcher.watch() åˆ›å»ºä¸€ä¸ª KeyedWeakReference åˆ°è¦è¢«ç›‘æŽ§çš„å¯¹è±¡ã€‚ 2.ç„¶åŽåœ¨åŽå°çº¿ç¨‹æ£€æŸ¥å¼•ç”¨æ˜¯å¦è¢«æ¸…é™¤ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œè°ƒç”¨GCã€‚ 3.å¦‚æžœå¼•ç”¨è¿˜æ˜¯æœªè¢«æ¸…é™¤ï¼ŒæŠŠ heap å†…å­˜ dump åˆ° APP å¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ª .hprof æ–‡ä»¶ä¸­ã€‚ 4.åœ¨å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¸­çš„ HeapAnalyzerService æœ‰ä¸€ä¸ª HeapAnalyzer ä½¿ç”¨HAHA è§£æžè¿™ä¸ªæ–‡ä»¶ã€‚ 5.å¾—ç›ŠäºŽå”¯ä¸€çš„ reference key, HeapAnalyzer æ‰¾åˆ° KeyedWeakReferenceï¼Œå®šä½å†…å­˜æ³„éœ²ã€‚ 6.HeapAnalyzer è®¡ç®— åˆ° GC roots çš„æœ€çŸ­å¼ºå¼•ç”¨è·¯å¾„ï¼Œå¹¶ç¡®å®šæ˜¯å¦æ˜¯æ³„éœ²ã€‚å¦‚æžœæ˜¯çš„è¯ï¼Œå»ºç«‹å¯¼è‡´æ³„éœ²çš„å¼•ç”¨é“¾ã€‚ 7.å¼•ç”¨é“¾ä¼ é€’åˆ° APP è¿›ç¨‹ä¸­çš„ DisplayLeakServiceï¼Œ å¹¶ä»¥é€šçŸ¥çš„å½¢å¼å±•ç¤ºå‡ºæ¥ã€‚ 56.å¤šçº¿ç¨‹ã€çº¿ç¨‹æ± å‚è€ƒæ–‡ç« ï¼šJavaä¸­çš„å¤šçº¿ç¨‹ä½ åªè¦çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº† - Givefine - åšå®¢å›­ çº¿ç¨‹çš„å¹¶è¡Œå’Œå¹¶å‘ å¹¶è¡Œï¼šå¤šä¸ªcpuå®žä¾‹æˆ–è€…å¤šå°æœºå™¨åŒæ—¶æ‰§è¡Œä¸€æ®µå¤„ç†é€»è¾‘ï¼Œæ˜¯çœŸæ­£çš„åŒæ—¶ã€‚ å¹¶å‘ï¼šé€šè¿‡cpuè°ƒåº¦ç®—æ³•ï¼Œè®©ç”¨æˆ·çœ‹ä¸ŠåŽ»åŒæ—¶æ‰§è¡Œï¼Œå®žé™…ä¸Šä»Žcpuæ“ä½œå±‚é¢ä¸æ˜¯çœŸæ­£çš„åŒæ—¶ã€‚å¹¶å‘å¾€å¾€åœ¨åœºæ™¯ä¸­æœ‰å…¬ç”¨çš„èµ„æºï¼Œé‚£ä¹ˆé’ˆå¯¹è¿™ä¸ªå…¬ç”¨çš„èµ„æºå¾€å¾€äº§ç”Ÿç“¶é¢ˆï¼Œæˆ‘ä»¬ä¼šç”¨TPSæˆ–è€…QPSæ¥ååº”è¿™ä¸ªç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ã€‚ çº¿ç¨‹å®‰å…¨ï¼šå¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æžœä¸ç”¨è€ƒè™‘è¿™äº›çº¿ç¨‹åœ¨è¿è¡Œæ—¶çŽ¯å¢ƒä¸‹çš„è°ƒåº¦å’Œäº¤æ›¿æ‰§è¡Œï¼Œä¹Ÿä¸éœ€è¦è¿›è¡Œé¢å¤–çš„åŒæ­¥ï¼Œæˆ–è€…åœ¨è°ƒç”¨æ–¹è¿›è¡Œä»»ä½•å…¶ä»–æ“ä½œï¼Œè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„è¡Œä¸ºéƒ½å¯ä»¥èŽ·å¾—æ­£ç¡®çš„ç»“æžœï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ çº¿ç¨‹åŒæ­¥ï¼šå³å½“æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¯¹å†…å­˜è¿›è¡Œæ“ä½œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹éƒ½ä¸å¯ä»¥å¯¹è¿™ä¸ªå†…å­˜åœ°å€è¿›è¡Œæ“ä½œï¼Œç›´åˆ°è¯¥çº¿ç¨‹å®Œæˆæ“ä½œï¼Œ å…¶ä»–çº¿ç¨‹æ‰èƒ½å¯¹è¯¥å†…å­˜åœ°å€è¿›è¡Œæ“ä½œï¼Œè€Œå…¶ä»–çº¿ç¨‹åˆå¤„äºŽç­‰å¾…çŠ¶æ€ï¼Œå®žçŽ°çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä¸´ç•ŒåŒºå¯¹è±¡å°±æ˜¯å…¶ä¸­ä¸€ç§ã€‚ Javaé€šè¿‡Executorsæä¾›å››ç§çº¿ç¨‹æ± ï¼ˆfrom ç™¾åº¦ï¼‰ newCachedThreadPoolâ€”â€”åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æžœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›žæ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›žæ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚ newFixedThreadPoolâ€”â€”åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œå¯æŽ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚ newScheduledThreadPoolâ€”â€”åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œã€‚ newSingleThreadExecutorâ€”â€”åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚ å‚è€ƒæ–‡ç« ï¼šJavaå¹¶å‘ç¼–ç¨‹ï¼šçº¿ç¨‹æ± çš„ä½¿ç”¨ - Matrixæµ·å­ - åšå®¢å›­ â‘ çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹åˆå§‹åŒ– åˆ›å»ºçº¿ç¨‹æ± åŽï¼Œçº¿ç¨‹æ± ä¸­æ²¡æœ‰çº¿ç¨‹ï¼Œéœ€è¦æäº¤ä»»åŠ¡æ‰ä¼šåˆ›å»ºçº¿ç¨‹ã€‚ prestartCoreThread()ï¼šåˆå§‹åŒ–ä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹ï¼› prestartAllCoreThreads()ï¼šåˆå§‹åŒ–æ‰€æœ‰æ ¸å¿ƒçº¿ç¨‹ â‘¡workQueueï¼Œä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ï¼Œç”¨æ¥å­˜æ”¾ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ workQueueçš„ç±»åž‹ä¸ºBlockingQueueï¼Œé€šå¸¸å¯ä»¥å–ä¸‹é¢ä¸‰ç§ç±»åž‹ï¼š 1ï¼‰ArrayBlockingQueueï¼šåŸºäºŽæ•°ç»„çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œæ­¤é˜Ÿåˆ—åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°ï¼› 2ï¼‰LinkedBlockingQueueï¼šåŸºäºŽé“¾è¡¨çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œå¦‚æžœåˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šæ­¤é˜Ÿåˆ—å¤§å°ï¼Œåˆ™é»˜è®¤ä¸ºInteger.MAX_VALUEï¼› 3ï¼‰SynchronousQueueï¼šè¿™ä¸ªé˜Ÿåˆ—æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä¸ä¼šä¿å­˜æäº¤çš„ä»»åŠ¡ï¼Œè€Œæ˜¯å°†ç›´æŽ¥æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œæ–°æ¥çš„ä»»åŠ¡ã€‚ â‘¢ä»»åŠ¡æ‹’ç»ç­–ç•¥ å½“çº¿ç¨‹æ± çš„ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—å·²æ»¡æˆ–çº¿ç¨‹æ•°ç›®è¾¾åˆ°maximumPoolSizeï¼Œè¿˜æœ‰ä»»åŠ¡æ¥æ—¶ä¼šé‡‡ç”¨ä»»åŠ¡æ‹’ç»ç­–ç•¥ 1ï¼‰ThreadPoolExecutor.AbortPolicy:ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚ 2ï¼‰ThreadPoolExecutor.DiscardPolicyï¼šä¹Ÿæ˜¯ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ã€‚ 3ï¼‰ThreadPoolExecutor.DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åŽé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡ï¼ˆé‡å¤æ­¤è¿‡ç¨‹ï¼‰ 4ï¼‰ThreadPoolExecutor.CallerRunsPolicyï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡ â‘£çº¿ç¨‹æ± çš„å…³é—­ 1ï¼‰shutdown()ï¼šä¸ä¼šç«‹å³ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œè€Œæ˜¯è¦ç­‰æ‰€æœ‰ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®ŒåŽæ‰ç»ˆæ­¢ï¼Œä½†å†ä¹Ÿä¸ä¼šæŽ¥å—æ–°çš„ä»»åŠ¡ 2ï¼‰shutdownNow()ï¼šç«‹å³ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œå¹¶å°è¯•æ‰“æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä¸”æ¸…ç©ºä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ï¼Œè¿”å›žå°šæœªæ‰§è¡Œçš„ä»»åŠ¡ â‘¤çº¿ç¨‹æ± å®¹é‡çš„åŠ¨æ€è°ƒæ•´ 1ï¼‰setCorePoolSizeï¼šè®¾ç½®æ ¸å¿ƒæ± å¤§å° 2ï¼‰setMaximumPoolSizeï¼šè®¾ç½®çº¿ç¨‹æ± æœ€å¤§èƒ½åˆ›å»ºçš„çº¿ç¨‹æ•°ç›®å¤§å° å‚è€ƒæ–‡ç« ï¼šç”±æµ…å…¥æ·±ç†è§£Javaçº¿ç¨‹æ± åŠçº¿ç¨‹æ± çš„å¦‚ä½•ä½¿ç”¨ - Janti - åšå®¢å›­ corePoolSize :çº¿ç¨‹æ± çš„æ ¸å¿ƒæ± å¤§å°ï¼Œåœ¨åˆ›å»ºçº¿ç¨‹æ± ä¹‹åŽï¼Œçº¿ç¨‹æ± é»˜è®¤æ²¡æœ‰ä»»ä½•çº¿ç¨‹ã€‚ å½“æœ‰ä»»åŠ¡è¿‡æ¥çš„æ—¶å€™æ‰ä¼šåŽ»åˆ›å»ºåˆ›å»ºçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ã€‚æ¢ä¸ªè¯´æ³•ï¼Œçº¿ç¨‹æ± åˆ›å»ºä¹‹åŽï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸º0ï¼Œå½“ä»»åŠ¡è¿‡æ¥å°±ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹åŽ»æ‰§è¡Œï¼Œç›´åˆ°çº¿ç¨‹æ•°è¾¾åˆ°corePoolSizeä¹‹åŽï¼Œå°±ä¼šè¢«åˆ°è¾¾çš„ä»»åŠ¡æ”¾åœ¨é˜Ÿåˆ—ä¸­ã€‚ï¼ˆæ³¨æ„æ˜¯åˆ°è¾¾çš„ä»»åŠ¡ï¼‰ã€‚æ¢å¥æ›´ç²¾ç‚¼çš„è¯ï¼šcorePoolSizeè¡¨ç¤ºå…è®¸çº¿ç¨‹æ± ä¸­å…è®¸åŒæ—¶è¿è¡Œçš„æœ€å¤§çº¿ç¨‹æ•°ã€‚ å¦‚æžœæ‰§è¡Œäº†çº¿ç¨‹æ± çš„prestartAllCoreThreads()æ–¹æ³•ï¼Œçº¿ç¨‹æ± ä¼šæå‰åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æ ¸å¿ƒçº¿ç¨‹ã€‚ maximumPoolSize :çº¿ç¨‹æ± å…è®¸çš„æœ€å¤§çº¿ç¨‹æ•°ï¼Œä»–è¡¨ç¤ºæœ€å¤§èƒ½åˆ›å»ºå¤šå°‘ä¸ªçº¿ç¨‹ã€‚maximumPoolSizeè‚¯å®šæ˜¯å¤§äºŽç­‰äºŽcorePoolSizeã€‚ keepAliveTime :è¡¨ç¤ºçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ—¶æœ€å¤šä¿æŒå¤šä¹…ç„¶åŽåœæ­¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°å¤§äºŽcorePoolSizeæ—¶ï¼ŒkeepAliveTimeæ‰ä¼šèµ·ä½œç”¨ã€‚æ¢å¥è¯è¯´ï¼Œå½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å¤§äºŽcorePoolSizeï¼Œå¹¶ä¸”ä¸€ä¸ªçº¿ç¨‹ç©ºé—²æ—¶é—´è¾¾åˆ°äº†keepAliveTimeï¼Œé‚£ä¹ˆå°±æ˜¯shutdownã€‚ Unit:keepAliveTimeçš„å•ä½ã€‚ workQueueï¼šä¸€ä¸ªé˜»å¡žé˜Ÿåˆ—ï¼Œç”¨æ¥å­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°è¶…è¿‡å®ƒçš„corePoolSizeçš„æ—¶å€™ï¼Œçº¿ç¨‹ä¼šè¿›å…¥é˜»å¡žé˜Ÿåˆ—è¿›è¡Œé˜»å¡žç­‰å¾…ã€‚é€šè¿‡workQueueï¼Œçº¿ç¨‹æ± å®žçŽ°äº†é˜»å¡žåŠŸèƒ½ threadFactoryï¼šçº¿ç¨‹å·¥åŽ‚ï¼Œç”¨æ¥åˆ›å»ºçº¿ç¨‹ã€‚ handler :è¡¨ç¤ºå½“æ‹’ç»å¤„ç†ä»»åŠ¡æ—¶çš„ç­–ç•¥ã€‚ åœ¨java docä¸­ï¼Œå¹¶ä¸æå€¡æˆ‘ä»¬ç›´æŽ¥ä½¿ç”¨ThreadPoolExecutorï¼Œè€Œæ˜¯ä½¿ç”¨Executorsç±»ä¸­æä¾›çš„å‡ ä¸ªé™æ€æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± ï¼š Executors.newCachedThreadPool(); //åˆ›å»ºä¸€ä¸ªç¼“å†²æ± ï¼Œç¼“å†²æ± å®¹é‡å¤§å°ä¸ºInteger.MAX_VALUE Executors.newSingleThreadExecutor(); //åˆ›å»ºå®¹é‡ä¸º1çš„ç¼“å†²æ±  Executors.newFixedThreadPool(int); //åˆ›å»ºå›ºå®šå®¹é‡å¤§å°çš„ç¼“å†²æ±  57.è…¾è®¯ Buglyè…¾è®¯å…¬å¸ä¸ºç§»åŠ¨å¼€å‘è€…å¼€æ”¾çš„æœåŠ¡ä¹‹ä¸€ï¼Œé¢å‘ç§»åŠ¨å¼€å‘è€…æä¾›ä¸“ä¸šçš„ Crash ç›‘æŽ§ã€å´©æºƒåˆ†æžç­‰è´¨é‡è·Ÿè¸ªæœåŠ¡ã€‚Bugly èƒ½å¸®åŠ©ç§»åŠ¨äº’è”ç½‘å¼€å‘è€…æ›´åŠæ—¶åœ°å‘çŽ°æŽŒæŽ§å¼‚å¸¸ï¼Œæ›´å…¨é¢çš„äº†è§£å®šä½å¼‚å¸¸ï¼Œæ›´é«˜æ•ˆçš„ä¿®å¤è§£å†³å¼‚å¸¸ã€‚ é’ˆå¯¹ç§»åŠ¨åº”ç”¨ï¼Œè…¾è®¯ Bugly æä¾›äº†ä¸“ä¸šçš„ Crashã€Android ANR ( application not response)ã€iOS å¡é¡¿ç›‘æŽ§å’Œè§£å†³æ–¹æ¡ˆã€‚ç§»åŠ¨å¼€å‘è€… ( Android / iOS ) å¯ä»¥é€šè¿‡ç›‘æŽ§ï¼Œå¿«é€Ÿå‘çŽ°ç”¨æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‡ºçŽ°çš„ Crash (å´©æºƒ)ã€Android ANR å’Œ iOS å¡é¡¿ï¼Œå¹¶æ ¹æ®ä¸ŠæŠ¥çš„ä¿¡æ¯å¿«é€Ÿå®šä½å’Œè§£å†³é—®é¢˜ã€‚ 58.Glidegithub åœ°å€ é¡¹ç›®ä¾èµ–Glideï¼Œåœ¨app build.gradle ä¸­é…ç½® compileâ€™com.github.bumptech.glide:glide:3.7.0â€™ ä½¿ç”¨glide3.7ç‰ˆæœ¬ï¼Œæ›´é«˜ç‰ˆæœ¬æˆ–å‡ºçŽ°å¼‚å¸¸ï¼šError:Failed to resolve: com.android.support:support-annotations:27.0.2 Glideç¼“å­˜æœºåˆ¶ å†…å­˜å­˜ç¼“å­˜çš„ è¯»å­˜éƒ½åœ¨Engineç±»ä¸­å®Œæˆã€‚å†…å­˜ç¼“å­˜ä½¿ç”¨å¼±å¼•ç”¨å’ŒLruCacheç»“åˆå®Œæˆçš„,å¼±å¼•ç”¨æ¥ç¼“å­˜çš„æ˜¯æ­£åœ¨ä½¿ç”¨ä¸­çš„å›¾ç‰‡ã€‚å›¾ç‰‡å°è£…ç±»Resourceså†…éƒ¨æœ‰ä¸ªè®¡æ•°å™¨åˆ¤æ–­æ˜¯è¯¥å›¾ç‰‡å¦æ­£åœ¨ä½¿ç”¨ã€‚ Glideå†…å­˜ç¼“å­˜çš„æµç¨‹ è¯»ï¼šæ˜¯å…ˆä»ŽlruCacheå–ï¼Œå–ä¸åˆ°å†ä»Žå¼±å¼•ç”¨ä¸­å–ï¼› å­˜ï¼šå†…å­˜ç¼“å­˜å–ä¸åˆ°ï¼Œä»Žç½‘ç»œæ‹‰å–å›žæ¥å…ˆæ”¾åœ¨å¼±å¼•ç”¨é‡Œï¼Œæ¸²æŸ“å›¾ç‰‡ï¼Œå›¾ç‰‡å¯¹è±¡Resourcesä½¿ç”¨è®¡æ•°åŠ ä¸€ï¼› æ¸²æŸ“å®Œå›¾ç‰‡ï¼Œå›¾ç‰‡å¯¹è±¡Resourcesä½¿ç”¨è®¡æ•°å‡ä¸€ï¼Œå¦‚æžœè®¡æ•°ä¸º0ï¼Œå›¾ç‰‡ç¼“å­˜ä»Žå¼±å¼•ç”¨ä¸­åˆ é™¤ï¼Œæ”¾å…¥lruCacheç¼“å­˜ã€‚ å‚è€ƒæ–‡ç« ï¼š GoogleæŽ¨èâ€”â€”Glideä½¿ç”¨è¯¦è§£ - ç®€ä¹¦ Glide ç³»åˆ—(å››) Glideç¼“å­˜æœºåˆ¶ - é‡Žç”Ÿçš„å®‰å“å…½ - ç®€ä¹¦ 59.Frescogithub åœ°å€ é¡¹ç›®ä¾èµ–Glideï¼Œåœ¨app build.gradle ä¸­é…ç½®ï¼šimplementationâ€™com.facebook.fresco:fresco:1.9.0â€™ https://github.com/desmond1121/Fresco-Source-Analysis å‚è€ƒæ–‡ç« ï¼šFrescoçš„ä½¿ç”¨å°ç»“ - ç®€ä¹¦ https://blog.csdn.net/yw59792649/article/details/78921025 60.React Nativeæ··åˆå¼€å‘æŠ€æœ¯ç§»åŠ¨å¼€å‘-æ··åˆAppä»‹ç» - Primise7çš„åšå®¢ - CSDNåšå®¢]]></content>
      <categories>
        <category>Android</category>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidé¢è¯•é¢˜é›†]]></title>
    <url>%2Fposts%2F4a3cde30.html</url>
    <content type="text"><![CDATA[Javaéƒ¨åˆ†Androidéƒ¨åˆ†æ•°æ®ç»“æž„ä¸Žç®—æ³•éƒ¨åˆ†å¸¸ç”¨çš„å¼€æºåº“éƒ¨åˆ†è®¡ç®—æœºç½‘ç»œè®¤è¯† 1.Javaéƒ¨åˆ†1.1 æ“ä½œç³»ç»Ÿç›¸å…³ 1.ä»€ä¹ˆæ˜¯æ“ä½œç³»ç»Ÿï¼Ÿ 2.ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Œä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Ÿ 1.2 JDK&amp;JVM&amp;JRE 1.JDK &amp; JVM &amp; JREåˆ†åˆ«æ˜¯ä»€ä¹ˆä»¥åŠå®ƒä»¬çš„åŒºåˆ«ï¼Ÿ 2.è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆJavaå¯ä»¥è·¨å¹³å°ï¼Ÿ 1.3 é¢å‘è¿‡ç¨‹ &amp; é¢å‘å¯¹è±¡ 1.ä»€ä¹ˆæ˜¯é¢å‘è¿‡ç¨‹ &amp; ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ &amp; åŒºåˆ«ï¼Ÿ 2.ç»™æˆ‘è¯´è¯´Javaé¢å‘å¯¹è±¡çš„ç‰¹å¾ä»¥åŠè®²è®²ä½ ä»£ç ä¸­å‡¸æ˜¾è¿™äº›ç‰¹å¾çš„ç»éªŒã€‚ 3.ä»€ä¹ˆæ˜¯é‡è½½ &amp; ä»€ä¹ˆæ˜¯é‡å†™ &amp; åŒºåˆ«ã€‚ 4.è°ˆè°ˆä½ å¯¹thiså’Œsuperçš„è®¤è¯†ã€‚ 5.æŽ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«ã€‚ 6.é™æ€å±žæ€§å’Œé™æ€æ–¹æ³•èƒ½è¢«ç»§æ‰¿å—ï¼Ÿé™æ€æ–¹æ³•åˆæ˜¯å¦èƒ½è¢«é‡å†™å‘¢ï¼Ÿ 7.ç»™æˆ‘è¯´è¯´æƒé™ä¿®é¥°ç¬¦ç‰¹æ€§ã€‚ 8.ç»™æˆ‘è°ˆè°ˆJavaä¸­çš„å†…éƒ¨ç±»ã€‚ 9.é—­åŒ…å’Œå†…éƒ¨ç±»çš„åŒºåˆ«ï¼Ÿ 10.Javaå¤šæ€çš„å®žçŽ°æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ 11.è°ˆè°ˆä½ å¯¹å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„è®¤è¯†ï¼Ÿ 12.staticå…³é”®å­—çš„ä½œç”¨ï¼Ÿ 13.finalå…³é”®å­—çš„ä½œç”¨ã€‚ 1.4 å…«å¤§åŸºæœ¬æ•°æ®ç±»åž‹&amp;å¼•ç”¨ç±»åž‹ 1.è¯´è¯´Javaä¸­çš„8å¤§åŸºæœ¬ç±»åž‹ &amp; å†…å­˜ä¸­å æœ‰çš„å­—èŠ‚ &amp; ä»€ä¹ˆæ˜¯å¼•ç”¨ç±»åž‹ï¼Ÿ 2.ä»€ä¹ˆæ˜¯æ‹†ç®± &amp; è£…ç®±ï¼Œèƒ½ç»™æˆ‘ä¸¾æ —å­å—ï¼Ÿ 1.5 æ•°ç»„ 1.èƒ½è¯´è¯´å¤šç»´æ•°ç»„åœ¨å†…å­˜ä¸Šæ˜¯æ€Žä¹ˆå­˜å‚¨çš„å—ï¼Ÿ 2.ä½ å¯¹æ•°ç»„äºŒæ¬¡å°è£…è¿‡å—ï¼Ÿè¯´è¯´å°è£…äº†ä»€ä¹ˆ 1.6 Javaå¼‚å¸¸ 1.è¯´è¯´Javaå¼‚å¸¸ä½“ç³»ä¸»è¦ç”¨æ¥å¹²ä»€ä¹ˆçš„ &amp; å¼‚å¸¸ä½“ç³»ï¼Ÿ 2.Errorå’ŒExceptionçš„åŒºåˆ«ï¼Ÿ 3.è¯´è¯´è¿è¡Œæ—¶å¼‚å¸¸å’Œéžè¿è¡Œæ—¶å¼‚å¸¸çš„åŒºåˆ«ï¼Ÿ 4.å¦‚ä½•è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ï¼Ÿ 5.throwå’Œthrows çš„åŒºåˆ«ï¼Ÿ 6.try{}catch{}finally{}å¯ä»¥æ²¡æœ‰finallyå—ï¼Ÿ 7.finallyè¯­å—æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ 8.returnåœ¨try{}catch{}finally{}ä¸­æ‰§è¡Œå…·æœ‰å“ªäº›è§„åˆ™ï¼Ÿ 9.ç»™æˆ‘ä¾‹ä¸¾è‡³å°‘5ä¸ªå¸¸è§çš„è¿è¡Œæ—¶å¼‚å¸¸ã€‚ 1.7 NIO/BIO/AIO 1.NIOæ˜¯ä»€ä¹ˆ &amp; BIOæ˜¯ä»€ä¹ˆ &amp; AIOæ˜¯ä»€ä¹ˆ &amp; å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ 2.IOæŒ‰ç…§æ–¹å‘å’Œæ•°æ®ç±»åž‹åˆ’åˆ†èƒ½åˆ’åˆ†ä¸ºå“ªäº›æ•°æ®æµï¼Ÿ 3.èƒ½ç»™æˆ‘è¯´è¯´NIOæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå¹³å¸¸å¼€å‘ä¸­ä½¿ç”¨è¿‡å—ï¼Ÿ 1.8 é›†åˆ(å®¹å™¨) 1.è¯´è¯´Javaä¸­é›†åˆçš„æ¡†æž¶ï¼Ÿ 2.Collection &amp; MapåŒºåˆ« 3.è°ˆè°ˆä½ å¸¸ç”¨çš„é›†åˆ &amp; å®ƒä»¬åº•å±‚çš„å®žçŽ°æ–¹å¼ &amp; ä¼˜ç¼ºç‚¹ &amp; ä½¿ç”¨åœºæ™¯ã€‚ 4.Mapçš„éåŽ†æ–¹å¼æœ‰å“ªäº›ï¼Ÿ 5.ç»™æˆ‘è¯´è¯´ArrayListçš„æ‰©å®¹æœºåˆ¶. 6.ä»€ä¹ˆæ˜¯æ·±æ‹·è´ &amp; æµ…æ‹·è´ &amp; å¦‚ä½•æ·±æ‹·è´ä¸€ä¸ªListé›†åˆ. 7.Setæ˜¯å¦‚ä½•ç¡®ä¿å®ƒçš„å”¯ä¸€æ€§çš„ã€‚ 8.ä½ è§‰å¾—HashMapçš„å…ƒç´ é¡ºåºå’Œä»€ä¹ˆæœ‰å…³ï¼Ÿ 9.Javaä¸­HashMapå¦‚ä½•è§£å†³å“ˆå¸Œç¢°æ’žçš„ï¼Ÿ 10.ConcurrentHashMapå¦‚ä½•å®žçŽ°å¹¶å‘è®¿é—®çš„ï¼Ÿ 11.è°ˆè°ˆJavaé›†åˆä¸­é‚£äº›çº¿ç¨‹å®‰å…¨çš„é›†åˆ &amp; å®žçŽ°åŽŸç†ã€‚ 12.è¯´è¯´æœ‰å“ªäº›é›†åˆèƒ½åŠ å…¥null,å“ªäº›ä¸èƒ½åŠ å…¥null,ä¸ºä»€ä¹ˆï¼Ÿ 13.è¯´è¯´LinkedHashMapåŽŸç†ã€‚ 14.Collection å’Œ Collectionsçš„åŒºåˆ«ï¼Ÿ 15.æ¯”è¾ƒä¸€ä¸‹ArrayMapå’ŒHashMapã€‚ 16.è¯´è¯´HashMapçš„åŽŸç†ã€‚ 1.9 çº¿ç¨‹ 1.ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚ 2.Javaä¸­åˆ›å»ºçº¿ç¨‹çš„2ç§æ–¹å¼ &amp; åŒºåˆ«ï¼Ÿ 3.ç»™æˆ‘è¯´è¯´çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ 4.çº¿ç¨‹æ­»é”çš„åŽŸå›  &amp; ä¸¾ä¸ªæ —å­ &amp; å¦‚ä½•é¿å…æ­»é”ã€‚ 5.Synchronizedæ”¾åœ¨é™æ€æ–¹æ³•å’Œéžé™æ€æ–¹æ³•ä¸Šçš„é”å¯¹è±¡åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 6.å¦‚ä½•åœæ­¢æŽ‰ä¸€ä¸ªçº¿ç¨‹ï¼Ÿ 7.ç»™æˆ‘è¯´è¯´çº¿ç¨‹æ± çš„ç§ç±» &amp; ç‰¹ç‚¹ &amp; å†…éƒ¨åŽŸç† &amp; å¹³æ—¶å½“ä¸­ä½¿ç”¨æ¡ˆä¾‹ã€‚ 8.ç»™æˆ‘è°ˆè°ˆä½ æ˜¯å¦‚ä½•ä¿è¯çº¿ç¨‹æ•°æ®å®‰å…¨é—®é¢˜çš„ï¼Ÿ 9.wait()å’Œsleep()çš„åŒºåˆ«ï¼Ÿ 10.ä»€ä¹ˆæ˜¯å…¬å¹³é”&amp;éžå…¬å¹³é”&amp;åŒºåˆ«ï¼Ÿ 11.ç»™æˆ‘è®²è®²çº¿ç¨‹é—´é€šä¿¡ 12.volatileå…³é”®å­—æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼ŸåŽŸç†æ˜¯ä»€ä¹ˆ 13.è¯´è¯´ä½¿ç”¨5ä¸ªçº¿ç¨‹åŽ»è®¡ç®—ä¸€ä¸ªæ•°ç»„ä¹‹å’Œçš„æ€è·¯ã€‚ 14.è°ˆè°ˆçº¿ç¨‹é˜»å¡žçš„åŽŸå› æœ‰å“ªäº›ï¼Ÿ 15.è°ˆè°ˆä½ å¯¹notifyçš„ç†è§£ï¼Ÿ 16.ä½ è§‰å¾—Lockå’ŒSynchronizedçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 17.è°ˆè°ˆä½ å¯¹ReentrantLockçš„è®¤è¯†ã€‚ 18.è°ƒç”¨run()å’Œstart()çš„åŒºåˆ«ï¼Ÿ 19.transientå…³é”®å­—çš„ç”¨æ³• &amp; ä½œç”¨ &amp; åŽŸç†ã€‚ 20.çº¿ç¨‹æ± çš„ç§ç±» &amp; å·¥ä½œåŽŸç† &amp; ThreadPoolExecutorçš„å·¥ä½œç­–ç•¥æœ‰å“ªäº›ï¼Ÿ 21.ThreadLocaläº†è§£å—ï¼Ÿè¯´è¯´åŽŸç†ã€‚ 22.æƒè¡¡å¤šçº¿ç¨‹çš„æ€§èƒ½ã€‚ 23.å¦‚ä½•ç†è§£åŒæ­¥å’Œå¼‚æ­¥ï¼Œé˜»å¡žå’Œéžé˜»å¡žã€‚ 1.10 æ³›åž‹ 1.ä»€ä¹ˆæ˜¯æ³›åž‹ï¼Ÿèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ 2.è¯´è¯´Javaä¸­æ³›åž‹çš„å·¥ä½œæœºåˆ¶ï¼Ÿ 3.åœ¨æ³›åž‹ç§extendså’Œsuperå…³é”®å­—çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 1.11 åå°„ 1.ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ 2.å¦‚ä½•èŽ·å–ä¸€ä¸ªç±»çš„æˆå‘˜å˜é‡ &amp; æˆå‘˜æ–¹æ³• &amp; æ³¨è§£ä¿¡æ¯ &amp; â€¦ã€‚ 3.é€šå¸¸åœ¨é¡¹ç›®å½“ä¸­ç”¨åˆ°åå°„å¤šå—ï¼Ÿéƒ½æ˜¯ç”¨æ¥å¹²å˜›ï¼Ÿ 1.12 æ³¨è§£ 1.ä»€ä¹ˆæ˜¯æ³¨è§£ &amp; å®ƒå’Œæ³¨é‡Šçš„åŒºåˆ«ï¼Ÿ 2.æ³¨è§£çš„å·¥ä½œæœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ 1.13 Socketç¼–ç¨‹ 1.ä»€ä¹ˆæ˜¯Socketç¼–ç¨‹ï¼Ÿ 2.ä»€ä¹ˆæ˜¯TCP,ä»€ä¹ˆæ˜¯UDP,äºŒè€…ä¹‹é—´åŒºåˆ«å¦‚ä½•ï¼Ÿ 1.14 è®¾è®¡æ¨¡å¼ 1.è¯´è¯´è®¾è®¡æ¨¡å¼çš„å…­å¤§åŽŸåˆ™ã€‚ 2.è¯·è®²è®²ä½ ä¼šä½¿ç”¨çš„ä¸€äº›è®¾è®¡æ¨¡å¼ï¼Ÿ 3.è¯·è¯´è¯´å•ä¾‹æ¨¡å¼ &amp; ä½ é¡¹ç›®ä¸­å¸¸ç”¨çš„å•ä¾‹æ¨¡å¼ã€‚ 4.æ‡’æ±‰å•ä¾‹æ¨¡å¼ä¸ºä»€ä¹ˆè¦åŠ volaitleï¼Ÿ 5.èƒ½å¦ç»™æˆ‘è¯´è¯´Androidä¸­è‡³å°‘3ä¸ªç”¨åˆ°è®¾è®¡æ¨¡å¼çš„æ —å­ï¼Ÿ 1.15 JVMç›¸å…³ 1.ä»€ä¹ˆæ˜¯classæ–‡ä»¶ï¼Ÿ 2.Javaä»£ç æ‰§è¡Œæµç¨‹ï¼Ÿ 3.Javaå†…å­˜ç»“æž„ &amp; å†…å­˜æ¨¡åž‹ã€‚ 4.GCå›žæ”¶æœºåˆ¶ã€‚ 5.Javaè™šæ‹Ÿæœºæ˜¯å¦‚ä½•åŠ è½½ä¸€ä¸ªç±»çš„ï¼Ÿ 6.ç»™æˆ‘è°ˆè°ˆç±»åŠ è½½å™¨ã€‚ 7.è°ˆè°ˆstaticç¼–è¯‘è¿è¡Œæ—¶çš„æµç¨‹ï¼Œåœ¨è™šæ‹Ÿæœºä¸­å¦‚ä½•ä¿å­˜çš„ï¼Ÿ 8.è¯´è¯´Javaç§çš„4ç§å¼•ç”¨ä»¥åŠç”¨æ³•ï¼Ÿ 9.å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯æ­»äº¡çš„ï¼Ÿ 10.ä»£ç ä¸­ç›´æŽ¥è°ƒç”¨System.gc()ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ 11.ä¸€ä¸ªå¼ºå¼•ç”¨ç›´æŽ¥è¢«nullèµ‹å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¼šè¢«ç«‹åˆ»å›žæ”¶å—ï¼Ÿ 12.String a = â€œaâ€+â€bâ€+â€câ€;åœ¨å†…å­˜ä¸­åˆ›å»ºäº†å‡ ä¸ªå¯¹è±¡ï¼Ÿ 13.è°ˆè°ˆä½ å¯¹å­—ç¬¦é›†çš„ç†è§£ã€‚ 14.å¸¸è§çš„ç¼–ç æ ¼å¼æœ‰å“ªäº›ï¼Ÿ 15.utf-8ä¸­çš„ä¸­æ–‡å å‡ ä¸ªå­—èŠ‚ï¼Ÿintåž‹å å‡ ä¸ªå­—èŠ‚ï¼Ÿ 16.è°ˆè°ˆä½ å¯¹é€»è¾‘åœ°å€å’Œç‰©ç†åœ°å€çš„ç†è§£ï¼Ÿ 17.ä½ çŸ¥é“å¯¹è±¡ä»€ä¹ˆæ—¶å€™ä¼šå›žè°ƒfinalizeæ–¹æ³•å—ï¼Ÿ 1.16 å…¶å®ƒJavaéƒ¨åˆ†æœ‰å…³é¢è¯•é¢˜ 1.ä¸ºä»€ä¹ˆå±€éƒ¨å†…éƒ¨ç±»è®¿é—®å±€éƒ¨å˜é‡éœ€è¦final? 2.Stringã€StringBufferã€StringBuilderã€CharSequenceçš„åŒºåˆ«ã€‚ 3.equalså’Œ==çš„åŒºåˆ«ï¼Ÿ 4.å…³äºŽå­—ç¬¦ä¸²çš„æ‹¼æŽ¥ä½ åœ¨é¡¹ç›®ä¸­å¸¸å¸¸æ€Žä¹ˆæ“ä½œçš„ï¼Ÿä¸ºä»€ä¹ˆä¸èƒ½ç”¨â€œ+â€çš„æ–¹å¼è¿›è¡Œæ‹¼æŽ¥å‘¢ï¼Ÿ 5.ä»€ä¹ˆæ˜¯Callback,è®²è®²ä½ é¡¹ç›®ä¸­ä½¿ç”¨çš„ä¸€äº›æœ‰å…³Callbackçš„æ —å­ã€‚ 6.retrun &amp; break &amp; continue åŒºåˆ«ï¼Ÿ 7.å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å›žæ–‡å­—ç¬¦ä¸²ï¼Ÿ 8.final,finally,finalizeçš„åŒºåˆ«ï¼Ÿ 9.ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç† &amp; ä»€ä¹ˆæ˜¯é™æ€ä»£ç†ï¼Ÿ 10.Stringä¸ºä»€ä¹ˆä¼šåŠ finalï¼Ÿ 11.OOMå¯ä»¥try{}catch{}å—ï¼Ÿ 12.ç»™æˆ‘è°ˆè°ˆæ­£åˆ™è¡¨è¾¾å¼ã€‚ 13.å¦‚ä½•å°†Stringè½¬æˆint? 14.è°ˆè°ˆä½ å¯¹Stringçš„ç†è§£ã€‚ 15.ä½ å¦‚ä½•ç†è§£åºåˆ—åŒ–ï¼Ÿæœ‰å“ªäº›æ–¹å¼åºåˆ—åŒ–ï¼Ÿ 16.è°ˆè°ˆä½ å¯¹ä¾èµ–æ³¨å…¥çš„ç†è§£ã€‚ 17.ç»™æˆ‘è°ˆè°ˆä½ å¯¹åˆ†æ´¾çš„ç†è§£ã€‚ 2.Android éƒ¨åˆ† å››å¤§ç»„ä»¶æ˜¯å“ªå››ä¸ªï¼ŸABCS(Activity,Braodcast,ContentProvider,Service) 2.1 Activity 1.Activityæ˜¯ä»€ä¹ˆï¼Ÿ 2.å…¸åž‹æƒ…å†µä¸‹çš„Activityç”Ÿå‘½å‘¨æœŸï¼Ÿ 3.å¼‚å¸¸æƒ…å†µä¸‹çš„Activityçš„ç”Ÿå‘½å‘¨æœŸ &amp; æ•°æ®å¦‚ä½•ä¿å­˜å’Œæ¢å¤ï¼Ÿ 4.ä»ŽActivity Aè·³è½¬åˆ°Activity Bä¹‹åŽï¼Œç„¶åŽå†ç‚¹å‡»backå»ºä¹‹åŽï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨æµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ 5.å¦‚ä½•ç»Ÿè®¡Activityçš„å·¥ä½œæ—¶é—´ï¼Ÿ 6.ç»™æˆ‘è¯´è¯´Activityçš„å¯åŠ¨æ¨¡å¼ &amp; ä½¿ç”¨åœºæ™¯ã€‚ 7.å¦‚ä½•åœ¨ä»»æ„ä½ç½®å…³æŽ‰åº”ç”¨æ‰€æœ‰Activity &amp; å¦‚ä½•åœ¨ä»»æ„ä½ç½®å…³æŽ‰æŒ‡å®šçš„Activityï¼Ÿ 8.Activityçš„å¯åŠ¨æµç¨‹(ä»Žæºç è§’åº¦è§£æž)ï¼Ÿ 9.å¯åŠ¨ä¸€ä¸ªå…¶å®ƒåº”ç”¨çš„Activityçš„ç”Ÿå‘½å‘¨æœŸåˆ†æžã€‚ 10.Activityä»»åŠ¡æ ˆæ˜¯ä»€ä¹ˆï¼Ÿåœ¨é¡¹ç›®ä¸­æœ‰ç”¨åˆ°å®ƒå—ï¼Ÿè¯´ç»™æˆ‘å¬å¬ 11.ä»€ä¹ˆæƒ…å†µä¸‹Activityä¸èµ°onDestory? 12.ä»€ä¹ˆæƒ…å†µä¸‹Activityä¼šå•ç‹¬æ‰§è¡ŒonPause? 13.a-&gt;b-&gt;cç•Œé¢ï¼Œå…¶ä¸­bæ˜¯SingleInstanceçš„ï¼Œé‚£ä¹ˆcç•Œé¢ç‚¹backè¿”å›žaç•Œé¢ï¼Œä¸ºä»€ä¹ˆï¼Ÿ 14.å¦‚æžœä¸€ä¸ªActivityå¼¹å‡ºä¸€ä¸ªDialog,é‚£ä¹ˆè¿™ä¸ªAcitvityä¼šå›žè°ƒå“ªäº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°å‘¢ï¼Ÿ 15.Activityä¹‹é—´å¦‚ä½•é€šä¿¡ &amp; Activityå’ŒFragmentä¹‹é—´é€šä¿¡ &amp; Activityå’ŒServiceä¹‹é—´é€šä¿¡ï¼Ÿ 16.è¯´è¯´Activityæ¨ªç«–å±åˆ‡æ¢çš„ç”Ÿå‘½å‘¨æœŸã€‚ 17.å‰å°åˆ‡æ¢åˆ°åŽå°ï¼Œç„¶åŽåœ¨å›žåˆ°å‰å°æ—¶Activityçš„ç”Ÿå‘½å‘¨æœŸã€‚ 18.ä¸‹æ‹‰çŠ¶æ€æ æ—¶Activityçš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ 19.Activityä¸ŽFragmentçš„ç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒï¼Ÿ 20.äº†è§£å“ªäº›Activityå¸¸ç”¨çš„æ ‡è®°ä½Flagsï¼Ÿ 21.è°ˆè°ˆéšå¼å¯åŠ¨å’Œæ˜¾ç¤ºå¯åŠ¨Activityçš„æ–¹å¼ï¼Ÿ 22.Activityç”¨Intentä¼ é€’æ•°æ®å’ŒBundleä¼ é€’æ•°æ®çš„åŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆä¸ç”¨HashMapå‘¢ï¼Ÿ 23.åœ¨éšå¼å¯åŠ¨ä¸­Intentå¯ä»¥è®¾ç½®å¤šä¸ªaction,å¤šä¸ªcategoryå— &amp; é¡ºä¾¿è®²è®²å®ƒä»¬çš„åŒ¹é…è§„åˆ™ï¼Ÿ 24.Activityå¯ä»¥è®¾ç½®ä¸ºå¯¹è¯æ¡†çš„å½¢å¼å—ï¼Ÿ 25.å¦‚ä½•ç»™Activityè®¾ç½®è¿›å…¥å’Œé€€å‡ºçš„åŠ¨ç”»ï¼Ÿ 26.Activityä½¿ç”¨Intentä¼ é€’æ•°æ®æ˜¯å¦æœ‰é™åˆ¶ &amp; å¦‚æžœä¼ é€’ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œä¾‹å¦‚ä¸€ä¸ªå¤æ‚çš„æŽ§ä»¶å¯¹è±¡åº”è¯¥æ€Žä¹ˆåšï¼Ÿ 2.2 BroadcastReceiver 1.å¹¿æ’­æ˜¯ä»€ä¹ˆï¼Ÿ 2.å¹¿æ’­çš„æ³¨å†Œæ–¹å¼æœ‰å“ªäº›ï¼Ÿ 3.å¹¿æ’­çš„åˆ†ç±» &amp; ç‰¹æ€§ &amp; ä½¿ç”¨åœºæ™¯ï¼Ÿ 4.è¯´è¯´ç³»ç»Ÿå¹¿æ’­å’Œæœ¬åœ°å¹¿æ’­çš„åŽŸç† &amp; åŒºåˆ« &amp; ä½¿ç”¨åœºæ™¯ã€‚ 5.æœ‰ä¸¤ä¸ªåº”ç”¨æ³¨å†Œäº†ä¸€æ ·çš„å¹¿æ’­ï¼Œä¸€ä¸ªæ˜¯é™æ€ï¼Œä¸€ä¸ªæ˜¯åŠ¨æ€ï¼Œè¿žä¼˜å…ˆçº§ä¹Ÿä¸€æ ·ï¼Œé‚£ä¹ˆå½“å¹¿æ’­ä»Žç³»ç»Ÿå‘å‡ºæ¥åŽï¼Œå“ªä¸ªåº”ç”¨å…ˆæŽ¥æ”¶åˆ°å¹¿æ’­ï¼Ÿ 2.3 ContentProvider 1.ä»€ä¹ˆæ˜¯å†…å®¹æä¾›è€…ï¼Ÿ 2.è¯´è¯´å¦‚ä½•åˆ›å»ºè‡ªå·±åº”ç”¨çš„å†…å®¹æä¾›è€… &amp; ä½¿ç”¨åœºæ™¯ã€‚ 3.è¯´è¯´ContentProviderçš„åŽŸç†ã€‚ 4.ContentProvider,ContentResolver,ContentObserverä¹‹é—´çš„å…³ç³»ï¼Ÿ 5.è¯´è¯´ContentProviderçš„æƒé™ç®¡ç†ã€‚ 2.4 Service 1.ä»€ä¹ˆæ˜¯Service? 2.è¯´è¯´Serviceçš„ç”Ÿå‘½å‘¨æœŸã€‚ 3.Serviceå’ŒThreadçš„åŒºåˆ«ï¼Ÿ 4.Android 5.0ä»¥ä¸Šçš„éšå¼å¯åŠ¨é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚ 5.ç»™æˆ‘è¯´è¯´Serviceä¿æ´»æ–¹æ¡ˆ 6.IntentServiceæ˜¯ä»€ä¹ˆ &amp; åŽŸç† &amp; ä½¿ç”¨åœºæ™¯ &amp; å’ŒServiceçš„åŒºåˆ«ã€‚ 7.åˆ›å»ºä¸€ä¸ªç‹¬ç«‹è¿›ç¨‹çš„Serviceåº”è¯¥æ€Žæ ·åšï¼Ÿ 8.Serviceå’ŒActivityä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ 9.è¯´è¯´ä½ äº†è§£çš„ç³»ç»ŸServiceã€‚ 10.è°ˆè°ˆä½ å¯¹ActivityManagerServiceçš„ç†è§£ã€‚ 11.åœ¨Activtiyä¸­åˆ›å»ºä¸€ä¸ªThreadå’Œåœ¨ä¸€ä¸ªServiceä¸­åˆ›å»ºä¸€ä¸ªThreadçš„åŒºåˆ«ï¼Ÿ 2.5 Handler 1.å­çº¿ç¨‹ä¸€å®šä¸èƒ½æ›´æ–°UIå—ï¼Ÿ 2.ç»™æˆ‘è¯´è¯´Handlerçš„åŽŸç† 3.Handlerå¯¼è‡´çš„å†…å­˜æ³„éœ²ä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ 4.å¦‚ä½•ä½¿ç”¨Handlerè®©å­çº¿ç¨‹å’Œå­çº¿ç¨‹é€šä¿¡ï¼Ÿ 5.ä½ èƒ½ç»™æˆ‘è¯´è¯´Handlerçš„è®¾è®¡åŽŸç†ï¼Ÿ 6.HandlerThreadæ˜¯ä»€ä¹ˆ &amp; åŽŸç† &amp; ä½¿ç”¨åœºæ™¯ï¼Ÿ 7.IdleHandleræ˜¯ä»€ä¹ˆï¼Ÿ 8.ä¸€ä¸ªçº¿ç¨‹èƒ½å¦åˆ›å»ºå¤šä¸ªHandler,Handlerå’ŒLooperä¹‹é—´çš„å¯¹åº”å…³ç³»ï¼Ÿ 9.ä¸ºä»€ä¹ˆAndroidç³»ç»Ÿä¸å»ºè®®å­çº¿ç¨‹è®¿é—®UIï¼Ÿ 10.Looperæ­»å¾ªçŽ¯ä¸ºä»€ä¹ˆä¸ä¼šå¯¼è‡´åº”ç”¨å¡æ­»ï¼Ÿ 11.ä½¿ç”¨Handlerçš„postDealyåŽæ¶ˆæ¯é˜Ÿåˆ—æœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ 12.å¯ä»¥åœ¨å­çº¿ç¨‹ç›´æŽ¥newä¸€ä¸ªHandlerå‡ºæ¥å—ï¼Ÿ 13.Messageå¯¹è±¡åˆ›å»ºçš„æ–¹å¼æœ‰å“ªäº› &amp; åŒºåˆ«ï¼Ÿ 2.6 AsyncTask 1.AsyncTaskæ˜¯ä»€ä¹ˆï¼Ÿèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ 2.ç»™æˆ‘è°ˆè°ˆAsyncTaskçš„ä¸‰ä¸ªæ³›åž‹å‚æ•°ä½œç”¨ &amp; å®ƒçš„ä¸€äº›æ–¹æ³•ä½œç”¨ã€‚ 3.ç»™æˆ‘è¯´è¯´AsyncTaskçš„åŽŸç†ã€‚ 4.ä½ è§‰å¾—AsyncTaskæœ‰ä¸è¶³ä¹‹å¤„å—ï¼Ÿ 2.7 Fragment 1.Androidä¸­v4åŒ…ä¸‹Fragmentå’ŒappåŒ…ä¸‹Fragmentçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 2.Fragmentçš„ç”Ÿå‘½å‘¨æœŸ &amp; è¯·ç»“åˆActivityçš„ç”Ÿå‘½å‘¨æœŸå†ä¸€èµ·è¯´è¯´ã€‚ 3.è¯´è¯´Fragmentå¦‚ä½•è¿›è¡Œæ‡’åŠ è½½ã€‚ 4.ViewPager + Fragmentç»“åˆä½¿ç”¨ä¼šå‡ºçŽ°å†…å­˜æ³„æ¼å— &amp; å¦‚ä½•è§£å†³ï¼Ÿ 5.Fragmentå¦‚ä½•å’ŒActivityè¿›è¡Œé€šä¿¡ &amp; Fragmentä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿ 6.ç»™æˆ‘è°ˆè°ˆFragment3ç§åˆ‡æ¢çš„æ–¹å¼ä»¥åŠåŒºåˆ« &amp; ä½¿ç”¨åœºæ™¯ã€‚ 7.getFragmentManager,getSupportFragmentManager,getChildFragmentManagerä¹‹é—´çš„åŒºåˆ«ï¼Ÿ 8.FragmentPagerAdapterå’ŒFragmentStatePagerAdapteråŒºåˆ«ï¼Ÿ 9.Fragmentå¦‚ä½•å®žçŽ°ç±»ä¼¼Activityæ ˆçš„åŽ‹æ ˆå’Œå‡ºæ ˆæ•ˆæžœçš„ï¼Ÿ 2.8 åºåˆ—åŒ– 1.ä»€ä¹ˆæ˜¯åºåˆ—åŒ– &amp; èƒ½ç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿ 2.Androidä¸­åºåˆ—åŒ–æ–¹å¼æœ‰å‡ ç§ï¼Ÿè¯´è¯´å®ƒä»¬çš„åŒºåˆ«ã€‚ 3.å¦‚æžœæƒ³è¦åºåˆ—åŒ–çš„ç±»ä¸­æŸäº›å­—æ®µä¸åºåˆ—åŒ–ï¼Œé‚£ä¹ˆåº”è¯¥æ€Žä¹ˆåšï¼Ÿ 2.9 IPC 1.è¯´è¯´ä½ å¯¹Androidå¤šè¿›ç¨‹å¼€å‘çš„è®¤è¯†ï¼Ÿ 2.Androidä¸­è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ 3.ä»€ä¹ˆæ˜¯AIDL?å¦‚ä½•åˆ›å»ºä¸€ä¸ªAIDLã€‚ 2.10 æ–‡ä»¶å­˜å‚¨ 1.è¯´è¯´Androidä¸­æ•°æ®æŒä¹…åŒ–çš„æ–¹å¼ &amp; ä½¿ç”¨åœºæ™¯ã€‚ 2.æŽ¥è§¦è¿‡MMKVå—ï¼Ÿè¯´è¯´SharedPreferenceå’Œå®ƒçš„åŒºåˆ«ã€‚ 3.ç¬¬ä¸‰æ–¹æ•°æ®åº“æ¡†æž¶ç”¨è¿‡å“ªäº›ï¼Ÿæœ‰æ²¡æœ‰è‡ªå·±å°è£…è¿‡ä¸€ä¸ªSQLiteçš„åº“ï¼Ÿ 4.SQLiteæ˜¯çº¿ç¨‹å®‰å…¨çš„å— &amp; SharedPreferenceæ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ 5.è¯·ç®€å•çš„ç»™æˆ‘è¯´è¯´ä»€ä¹ˆæ˜¯ä¸‰çº§ç¼“å­˜ï¼Ÿ 6.SharedPreferenceçš„applyå’Œcommitçš„åŒºåˆ«ã€‚ 7.è°ˆè°ˆä½ å¯¹SQLiteäº‹åŠ¡çš„è®¤è¯†ã€‚ 8.åƒå¥‡ç™¾æ€ªçš„SQLè¯­å¥è€ƒå¯Ÿã€‚ 9.SharePreferenceè·¨è¿›ç¨‹ä½¿ç”¨ä¼šæ€Žä¹ˆæ ·ï¼Ÿå¦‚ä½•ä¿è¯è·¨è¿›ç¨‹ä½¿ç”¨å®‰å…¨ï¼Ÿ 10.è°ˆè°ˆSQLiteå‡çº§è¦æ³¨æ„å“ªäº›åœ°æ–¹ï¼Ÿ 2.11 ListView &amp; RecyclerView 1.ListViewæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ 2.RecyclerViewæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿå¦‚ä½•è¿”å›žä¸ä¸€æ ·çš„Itemã€‚ 3.ListViewå’ŒRecycyclerViewçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 4.åˆ†åˆ«è®²è®²ä½ å¯¹ListView &amp; RecyclerViewçš„ä¼˜åŒ–ç»éªŒã€‚ 5.ç»™æˆ‘è¯´è¯´RecyclerViewçš„å›žæ”¶å¤ç”¨æœºåˆ¶ 6.è¯´è¯´ä½ æ˜¯å¦‚ä½•ç»™ListView &amp; RecyclerViewåŠ ä¸Šæ‹‰åˆ·æ–° &amp; ä¸‹æ‹‰åŠ è½½æ›´å¤šæœºåˆ¶ã€‚ 7.è°ˆè°ˆä½ æ˜¯å¦‚ä½•å¯¹ListView &amp; RecycleViewè¿›è¡Œå±€éƒ¨åˆ·æ–°çš„ï¼Ÿ 8.è°ˆè°ˆå¦‚ä½•è¿›è¡Œåˆ†é¡µåŠ è½½ï¼Ÿ 9.ScrollViewä¸‹åµŒå¥—ä¸€ä¸ªListViewé€šå¸¸ä¼šå‡ºçŽ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ 10.ä¸€ä¸ªListViewæˆ–è€…ä¸€ä¸ªRecyclerViewåœ¨æ˜¾ç¤ºæ–°é—»æ•°æ®çš„æ—¶å€™ï¼Œå‡ºçŽ°å›¾ç‰‡é”™ä½ï¼Œå¯èƒ½çš„åŽŸå› æœ‰å“ªäº› &amp; å¦‚ä½•è§£å†³ï¼Ÿ 2.12 å›¾ç‰‡ç¼–ç¨‹ 1.ä½ å¯¹Bitmapäº†è§£å—ï¼Ÿå®ƒåœ¨å†…å­˜ä¸­å¦‚ä½•å­˜åœ¨ï¼Ÿ 2.æœ‰å…³Bitmapå¯¼è‡´OOMçš„åŽŸå› çŸ¥é“å—ï¼Ÿå¦‚ä½•ä¼˜åŒ–ï¼Ÿ 3.ç»™æˆ‘è°ˆè°ˆå›¾ç‰‡åŽ‹ç¼©ã€‚ 4.LruCache &amp; DiskLruCacheåŽŸç†ã€‚ 5.è¯´è¯´ä½ å¹³å¸¸ä¼šä½¿ç”¨çš„ä¸€äº›ç¬¬ä¸‰æ–¹å›¾ç‰‡åŠ è½½åº“,æœ€å¥½ç»™æˆ‘è°ˆè°ˆå®ƒçš„åŽŸç†ã€‚ 6.å¦‚æžœè®©ä½ è®¾è®¡ä¸€ä¸ªå›¾ç‰‡åŠ è½½åº“ï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡ï¼Ÿ 7.æœ‰ä¸€å¼ éžå¸¸å¤§çš„å›¾ç‰‡,ä½ å¦‚ä½•åŽ»åŠ è½½è¿™å¼ å¤§å›¾ç‰‡ï¼Ÿ 8.ä½ çŸ¥é“Androidä¸­å¤„ç†å›¾ç‰‡çš„ä¸€äº›åº“å—(OpenCv &amp; GPUImage â€¦)ï¼Ÿ 9.å¦‚ä½•è®¡ç®—ä¸€å¼ å›¾ç‰‡åœ¨å†…å­˜ä¸­å ç”¨çš„å¤§å°ï¼Ÿ 2.13 WebView 1.WebViewæ˜¯ä»€ä¹ˆï¼Ÿ 2.WebViewä¼šå¯¼è‡´å†…å­˜æ³„éœ²å—ï¼ŸåŽŸå› æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³æ–¹å¼æœ‰å“ªäº›ï¼Ÿ 3.ä½ çŸ¥é“Hybridå¼€å‘å—ï¼Ÿè¯´è¯´ä½ çš„ç›¸å…³ç»éªŒã€‚ 4.è¯´è¯´WebSettings &amp; WebViewClient &amp; WebChromeClientè¿™ä¸‰ä¸ªç±»çš„ä½œç”¨ &amp; ç”¨æ³•ã€‚ 5.è¯´è¯´ä½ äº†è§£çš„Hybridæ¡†æž¶ã€‚ 2.14 ViewPager 1.ä»€ä¹ˆæ˜¯ViewPager?è¯´è¯´å®ƒçš„é‚£äº›é€‚é…å™¨ã€‚ 2.ä½ äº†è§£ViewPager2å—ï¼Ÿå’ŒViewPager 1æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ 3.ViewPager + Fragmentç»“åˆä½¿ç”¨å­˜åœ¨çš„å†…å­˜æ³„æ¼çš„åŽŸå› æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ 2.15 Viewäº‹ä»¶åˆ†å‘æœºåˆ¶ 1.ä»€ä¹ˆæ˜¯äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Ÿä¸»è¦ç”¨æ¥è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ 2.ç»™æˆ‘è¯´è¯´äº‹ä»¶åˆ†å‘çš„æµç¨‹ &amp; ä½ é¡¹ç›®è§£å†³äº‹ä»¶å†²çªçš„ä¸€äº›æ¡ˆä¾‹ã€‚ 3.å¤šç‚¹è§¦æ‘¸äº‹ä»¶å¹³æ—¶æŽ¥è§¦è¿‡å—ï¼Ÿå¦‚ä½•ç›‘å¬ç”¨æˆ·ç¬¬äºŒä¸ªæ‰‹æŒ‡ï¼Œç¬¬ä¸‰ä¸ªâ€¦ï¼Ÿ 4.OnTouchListener &amp; OnTouchEvent &amp; onClickListenerä¸‰è€…ä¹‹é—´çš„å…³ç³»ï¼Ÿ 5.è°ˆè°ˆä½ å¯¹MotionEventçš„è®¤è¯†ï¼ŸCanceläº‹ä»¶æ˜¯ä»€ä¹ˆæƒ…å†µä¸‹è§¦å‘çš„ï¼Ÿ 6.èƒ½ç»™æˆ‘è°ˆè°ˆAndroidä¸­åæ ‡ä½“ç³»å—ï¼Ÿ 2.16 Viewç»˜åˆ¶æœºåˆ¶ 1.è¯´è¯´Viewç»˜åˆ¶æµç¨‹ã€‚ 2.è¯´è¯´Activity Viewæ ‘ç»“æž„ã€‚ 3.è‡ªå®šä¹‰Viewçš„æ–¹å¼æœ‰å“ªäº›?ç»™æˆ‘è¯´è¯´ä½ ä¹‹å‰é¡¹ç›®ä¸­çš„æ¡ˆä¾‹ã€‚ 4.invalidateå’Œpostvalidateçš„åŒºåˆ«ï¼Ÿ 5.è¯´è¯´ä½ åœ¨è‡ªå®šä¹‰Viewæ—¶å¸¸å¸¸é‡å†™çš„ä¸€äº›æ–¹æ³•ï¼Ÿ 6.è¯´è¯´è‡ªå®šä¹‰Viewä¸­å¦‚ä½•è‡ªå®šä¹‰å±žæ€§ï¼Ÿ 7.requestLayout(),onLayout(),onDraw(),drawChild()åŒºåˆ«å’Œè”ç³»ï¼Ÿ 8.å¦‚ä½•è®¡ç®—å‡ºä¸€ä¸ªViewçš„åµŒå¥—å±‚çº§ï¼Ÿ 9.è‡ªå®šä¹‰Viewå¦‚ä½•è€ƒè™‘æœºåž‹é€‚é…ï¼Ÿ 2.17 å¸ƒå±€ 1.è¯´è¯´Androidä¸­æœ‰å“ªäº›å¸ƒå±€ &amp; ç‰¹ç‚¹ã€‚ 2.ä½ çŸ¥é“å¸ƒå±€æ–‡ä»¶åˆ°æŽ§ä»¶å¯¹è±¡çš„è¿‡ç¨‹å—ï¼Ÿ 3.æœ‰è¿™ä¹ˆä¸€ä¸ªå¸ƒå±€éœ€æ±‚ï¼Œä¸€ä¸ªæ–‡æœ¬æŽ§ä»¶æ”¾åœ¨å±å¹•ä¸€åŠçš„ä¸€åŠçš„ä¸­é—´ä½ç½®ï¼Œä½ å¦‚ä½•è¿›è¡Œå¸ƒå±€ï¼Ÿ 4.LinearLayout,FrameLayout,RelativeLayoutæ€§èƒ½å¯¹æ¯”ï¼Œä¸ºä»€ä¹ˆï¼Ÿ 2.18 Binder 1.ä»€ä¹ˆæ˜¯Binderï¼Ÿç”¨æ¥å¹²ä»€ä¹ˆï¼Ÿ 2.ç»™æˆ‘å…·ä½“è®²è®²Binderæœºåˆ¶ã€‚ 2.19 åŠ¨ç”»æœºåˆ¶ 1.Androidä¸­çš„åŠ¨ç”»åˆ†ä¸ºå“ªäº›ç§ç±» &amp; ç‰¹ç‚¹ &amp; ç¼ºç‚¹ã€‚ 2.çŸ¥é“SVG &amp; çŸ¢é‡åŠ¨ç”»å—ï¼Ÿ 3.ç»™æˆ‘è¯´è¯´è½¬åœºåŠ¨ç”»ã€‚ 4.ç»™æˆ‘è°ˆè°ˆæ’å€¼å™¨ &amp; ä¼°å€¼å™¨ çš„ä½œç”¨ã€‚ 5.è¯´è¯´AndroidåŠ¨ç”»æ¡†æž¶å®žçŽ°çš„åŽŸç†ã€‚ 2.20 JNI 1.ä»€ä¹ˆæ˜¯JNI?å®ƒä¸»è¦ç”¨æ¥å¹²ä»€ä¹ˆã€‚ 2.Java Nativeæ–¹æ³•å¦‚ä½•å’ŒNativeå‡½æ•°è¿›è¡Œç»‘å®šçš„ï¼Ÿ 3.JNIå¦‚ä½•å®žçŽ°æ•°æ®ä¼ é€’ï¼Ÿ 4.å¦‚ä½•å…¨å±€æ•èŽ·Nativeå‘ç”Ÿçš„å¼‚å¸¸ï¼Ÿ 5.åªæœ‰C/C++èƒ½ç¼–å†™Nativeåº“å—ï¼Ÿ 2.21 Window &amp; Appliction &amp; Context 1.è¯´è¯´ä½ å¯¹Androidä¸­Windowçš„ç†è§£ã€‚ 2.è¯´è¯´ä½ å¯¹Applicationçš„ç†è§£ &amp; ç”Ÿå‘½å‘¨æœŸã€‚ 3.Androidä¸­æœ‰å“ªäº›ä¸Šä¸‹æ–‡ &amp; åŒºåˆ« &amp; ä½œç”¨ã€‚ 4.è°ˆè°ˆä½ å¯¹Androidä¸­Contextçš„ç†è§£ã€‚ 2.22 é€šçŸ¥ 1.Android 8.0å¦‚ä½•é€‚é…é€šçŸ¥ï¼Ÿ 2.è‡ªå®šä¹‰é€šçŸ¥æµç¨‹ï¼Ÿ 2.23 å¯¹è¯æ¡†(Dialog &amp; DialogFragment &amp; PopWindow) 1.è¯´è¯´Androidä¸­å¯¹è¯æ¡†å¯ä»¥ç”¨å“ªäº›æ–¹å¼å®Œæˆï¼Ÿ 2.24 è“ç‰™ 1.è¯´è¯´æœ€æ–°çš„è“ç‰™ç‰ˆæœ¬ï¼Ÿæ–°ç‰ˆæœ¬çš„ç‰¹æ€§æ˜¯ä»€ä¹ˆï¼Ÿ 2.25 å†·å¯åŠ¨&amp;çƒ­å¯åŠ¨ 1.ä»€ä¹ˆæ˜¯å†·å¯åŠ¨ &amp; ä»€ä¹ˆæ˜¯çƒ­å¯åŠ¨ &amp; å®ƒä»¬çš„æµç¨‹ï¼Ÿ 2.å¦‚ä½•ä¼˜åŒ–å†·å¯åŠ¨ï¼Ÿ 3.å¯åŠ¨é¡µç™½å±ï¼Œé»‘å±ï¼Œå¤ªæ…¢å¦‚ä½•è§£å†³ï¼Ÿ 2.26 æ‚¬æµ®çª— 1.åœ¨åšæ‚¬æµ®çª—çš„æ—¶å€™ä½ é‡åˆ°äº†ä»€ä¹ˆå›°éš¾(ä¸»è¦æŒ‡æ‚¬æµ®çª—æƒé™é€‚é…)ï¼Ÿ 2.å¦‚ä½•åˆ¶ä½œä¸€ä¸ªæ‚¬æµ®çª—ï¼Ÿ 2.27 Androidç‰ˆæœ¬ 1.æœ€æ–°çš„Androidç‰ˆæœ¬å¤šå°‘çŸ¥é“å—ï¼Ÿæœ‰å“ªäº›ç‰¹æ€§ 2.è¯´è¯´æ›´æ–°è¾ƒå¤§çš„Androidç‰ˆæœ¬ã€‚ 2.28 Android Studio 1.ä½ çŽ°åœ¨æ¯”è¾ƒå¸¸ç”¨Android Studioé‚£ä¸ªç‰ˆæœ¬ &amp; ç”¨çš„Gradleç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Ÿ 2.å¦‚ä½•ç†è§£gradle? 3.è¯´è¯´Android Studioä¸­å¤§è‡´é¡¹ç›®ç»“æž„ï¼Ÿ 4.æ··æ·†æ˜¯ä»€ä¹ˆ &amp; ä¸ºä»€ä¹ˆéœ€è¦è¿›è¡Œæ··æ·† &amp; æ··æ·†çš„åŽŸç† &amp; ä¸ºä»€ä¹ˆJavaåå°„å¸¸å¸¸ä¼šå’Œæ··æ·†å†²çªï¼Ÿ 2.29 UIå¡é¡¿ä¼˜åŒ– 1.ANRæ˜¯ä»€ä¹ˆï¼Ÿå¯¼è‡´åŽŸå› æœ‰å“ªäº›ï¼Ÿ 2.è°ˆè°ˆä½ é¡¹ç›®ä¸­é¿å…ANRçš„ä¸€äº›ç»éªŒã€‚ 3.åˆ†åˆ«è¯´è¯´Activity &amp; BroadcastReceiver &amp; Sericeæœ€é•¿å¯è€—æ—¶æ—¶é—´ä¸ºå¤šå°‘ï¼Ÿ 2.30 å†…å­˜ä¼˜åŒ– 1.ä»€ä¹ˆæ˜¯OOM &amp; ä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ &amp; ä»€ä¹ˆæ˜¯å†…å­˜æŠ–åŠ¨ï¼Ÿ 2.è°ˆè°ˆä½ é¡¹ç›®ä¸­å†…å­˜ä¼˜åŒ–çš„ä¸€äº›ç»éªŒã€‚ 2.31 å±å¹•é€‚é… 1.è¯´è¯´Androidä¸­ä¸€äº›å±å¹•å•ä½ã€‚ 2.è°ˆè°ˆä½ é¡¹ç›®ä¸­çš„ä¸€äº›å±å¹•é€‚é…çš„ç»éªŒã€‚ 3.ä»Šæ—¥å¤´æ¡çš„è½»é‡çº§é€‚é…æ–¹æ¡ˆäº†è§£å— &amp; ç»™æˆ‘è¯´è¯´åŽŸç†ã€‚ 2.32 å¤šæ¸ é“æ‰“åŒ… &amp; apkç­¾å 1.apkä¸ºä»€ä¹ˆéœ€è¦ç­¾åï¼Ÿ 2.å¤šæ¸ é“æ‰“åŒ…æ˜¯ä»€ä¹ˆ &amp; æœ‰ç±»ä¼¼ç»éªŒå—ï¼Ÿ 3.ç®€è¿°å¤šæ¸ é“æ‰“åŒ…åŠåŽŸç†å’Œå¸¸ç”¨æ“ä½œï¼Ÿ 2.33 é¡¹ç›®æž¶æž„ 1.è¯´è¯´ä½ ç”¨è¿‡çš„é¡¹ç›®æž¶æž„ï¼Ÿ 2.åˆ†åˆ«ç»™æˆ‘è¯´è¯´MVC,MVP,MVVMç‰¹ç‚¹å’ŒåŒºåˆ«ã€‚ 3.ä»¥ç™»é™†ç•Œé¢ä¸ºä¾‹å­,è®¾è®¡MVPæž¶æž„ã€‚ 4.è°ˆè°ˆAndroidManifest.xmlæ–‡ä»¶çš„ç†è§£ã€‚ 2.34 Androidå‰æ²¿çŸ¥è¯† 1.è°·æ­Œæ–°å‡ºçš„FlutterçŸ¥é“å—ï¼Ÿ 2.è°·æ­Œæ–°å‡ºçš„å®˜æ–¹å¼€å‘è¯­è¨€Kotlinäº†è§£å— &amp; å’ŒJavaç›¸æ¯”å®ƒæœ‰å“ªäº›ç‰¹ç‚¹ã€‚ 3.è°ˆè°ˆKotlinä¸­åç¨‹çš„è®¤è¯†ï¼Ÿ 2.35 éŸ³è§†é¢‘å¼€å‘(é«˜è–ª) 1.ä¹‹å‰æœ‰è¿‡éŸ³è§†é¢‘å¼€å‘ç»éªŒå— &amp; è¯´è¯´ç”¨å“ªäº›å¼€æºæž¶å­å¼€å‘çš„ã€‚ 2.FFmpengäº†è§£è¿‡å—ï¼Ÿ 3.Androidä¸­æ’­æ”¾è§†é¢‘éŸ³é¢‘çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ 4.Androidä¸­æ’­æ”¾ç½‘ç»œåœ°å€è§†é¢‘æœ‰å“ªäº›å‡ºè‰²çš„å¼€æºåº“ï¼Ÿ 5.æµåª’ä½“æœåŠ¡å™¨äº†è§£å—ï¼Ÿ 6.è°ˆè°ˆä½ å¯¹ç¼–ç æ ¼å¼çš„ç†è§£ã€‚ 7.MediaPlayerå’ŒSoundPoolçš„åŒºåˆ«ï¼Ÿ 8.è§†é¢‘ç¡¬è§£ç å’Œè½¯è§£ç çš„åŒºåˆ«ï¼Ÿ 2.36 å…¶å®ƒAndroidéƒ¨åˆ†æœ‰å…³é¢è¯•é¢˜ 1.è¯´è¯´ä¸€ä¸ªappçš„å¯åŠ¨æµç¨‹(ä»Žæºç è§’åº¦è®²è§£)ã€‚ 2.ä½ çŸ¥é“æ— è®ºæ˜¯Kotlinæˆ–è€…æ˜¯Java,ç¨‹åºè¿è¡Œçš„ä¸»è¦å…¥å£éƒ½æ˜¯main()æ–¹æ³•ï¼Œé‚£ä¹ˆAndroidçš„mainæ–¹æ³•åœ¨å“ªé‡Œï¼Ÿ 3.Android HockæŠ€æœ¯äº†è§£å—ï¼Ÿ 4.ç®€è¿°Androidä¸­çš„åŠ å›ºå’Œä½¿ç”¨å¹³å°ï¼Ÿ 5.è°ˆè°ˆä½ å¯¹Apkç˜¦èº«çš„ç»éªŒï¼Ÿ 6.ä¸ºä»€ä¹ˆå­çº¿ç¨‹ä¸èƒ½æ›´æ–°UIï¼Ÿ 7.ä½ çŸ¥é“å¦‚ä½•å®šä½å†…å­˜æ³„æ¼å—ï¼Ÿ 8.è¯´è¯´System.exit(0),onDestory(),Activity.finish()çš„åŒºåˆ«ï¼Ÿ 9.åœ¨OnResumeæˆ–è€…ä¹‹å‰èŽ·å–Viewçš„å®½é«˜ä¸ºå¤šå°‘ &amp; ä¸ºä»€ä¹ˆï¼Ÿ 10.Art &amp; Dvm åŒºåˆ«ï¼Œç‰¹åˆ«æ˜¯è°ˆè°ˆGCçš„åŒºåˆ«ã€‚ 11.è¯´è¯´ä½ ç”¨çš„äºŒç»´ç æ¡†æž¶ &amp; æœ‰è¿‡ä¼˜åŒ–ç»éªŒå—ï¼Ÿ 12.è°ˆè°ˆAppå¤šè¿›ç¨‹çš„å¥½å¤„ &amp; ç¼ºç‚¹ã€‚ 13.è¯´è¯´AMSæ˜¯æ€Žä¹ˆæ‰¾åˆ°å¯åŠ¨æŒ‡å®šçš„Activityï¼Ÿ 14.Viewçš„getWidthå’ŒgetMeasureWidthæœ‰å•¥åŒºåˆ«ï¼Ÿ 15.æœ‰æ’ä»¶åŒ–æˆ–è€…çƒ­ä¿®å¤ç»éªŒå—ï¼Ÿè¯´è¯´å®ƒçš„åŽŸç†ã€‚ 16.æ–­ç‚¹ç»­ä¼ äº†è§£å—ï¼Ÿè°ˆè°ˆä½ æ˜¯å¦‚ä½•é€šè¿‡å¤šçº¿ç¨‹å®žçŽ°æ–­ç‚¹ç»­ä¼ çš„ã€‚ 17.ç»™æˆ‘è°ˆè°ˆä½ å¯¹SurfaceViewçš„è®¤è¯†ã€‚ 18.ä»€ä¹ˆæƒ…å†µä¸‹ä½ ä¼šä½¿ç”¨åˆ°ScrollViewã€‚ 19.ä½Žç‰ˆæœ¬SDKå¦‚ä½•ä½¿ç”¨é«˜ç‰ˆæœ¬APIï¼Ÿ 20.AlertDialog,PopWindow,Activityä¹‹é—´çš„åŒºåˆ«ï¼Ÿ 21.Applicationå’ŒActivity,Contextçš„åŒºåˆ«ï¼Ÿ 22.è°ˆè°ˆAndroidä¸­å¤šçº¿ç¨‹é€šä¿¡æ–¹å¼ï¼Ÿ 23.è¯´è¯´Androidå¤§ä½“çš„æž¶æž„å›¾ï¼Œè¯•ç€ç”»å‡ºæ¥ã€‚ 24.çŸ¥é“SpareArrayå—ï¼Ÿ 25.Activityé™¤äº†setContentViewå¯ä»¥è®¾ç½®å¸ƒå±€ï¼Œè¿˜æœ‰å…¶å®ƒæ–¹å¼å—ï¼Ÿ 26.Androidä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºåˆ†é…çš„å†…å­˜å¤§å°ä¸ºå¤šå°‘ï¼Ÿ 27.Androidè¿›ç¨‹ä¿æ´»æ–¹æ¡ˆï¼Ÿ 28.è°ˆè°ˆAndroidç³»ç»Ÿå®‰è£…apkçš„è¿‡ç¨‹ï¼Ÿ 29.Activity,Window,Viewä¸‰è€…çš„å…³ç³»ï¼Ÿ 30.ActivityThread,ActivityManagerService,WindowManagerServiceçš„å·¥ä½œåŽŸç†ï¼Ÿ 31.PackageManagerServiceçš„å·¥ä½œåŽŸç†ï¼Ÿ 32.PowerManagerServiceçš„å·¥ä½œåŽŸç†ï¼Ÿ 33.åœ¨æ¡Œé¢ç‚¹å‡»ä¸€ä¸ªæœªå¯åŠ¨çš„Appçš„æµç¨‹ &amp; ç‚¹å‡»ä¸€ä¸ªå·²å¯åŠ¨çš„Appçš„æµç¨‹ï¼Ÿ 34.Androidä¸­è¿›ç¨‹åˆ†ä¸ºå“ªäº›ç§ç±»ï¼Ÿ 35.ä»€ä¹ˆæ˜¯åŸ‹ç‚¹ï¼Œæ‡‚ç‚¹å®ƒçš„åŽŸç†å—ï¼Ÿ 36.è¿›ç¨‹å’ŒApplicationç”Ÿå‘½å‘¨æœŸä¹‹é—´çš„å…³ç³»ï¼Ÿ 37.Appç›¸äº’å”¤é†’çš„æœ‰å“ªäº›æ–¹å¼ï¼Ÿ 38.Androidä¸­å¦‚ä½•å¼€å¯å¤šè¿›ç¨‹ï¼Ÿåº”ç”¨æ˜¯å¦å¯ä»¥å¼€å¯Nä¸ªè¿›ç¨‹ï¼Ÿ 39.è°ˆè°ˆæ¶ˆæ¯æŽ¨é€çš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ 40.è°ˆè°ˆä½ å¯¹Rootæƒé™çš„ç†è§£ã€‚ 41.è°ˆè°ˆé¡¹ç›®å¦‚ä½•è¿›è¡Œå›½é™…åŒ–ï¼Ÿ 42.è°ˆè°ˆä½ å¯¹Intentå’ŒIntentFilterçš„ç†è§£ã€‚ 43.ä¸€æ¡æœ€é•¿çš„çŸ­ä¿¡æ¯çº¦å å¤šå°‘byteï¼Ÿ 3.ç®—æ³•ä¸Žæ•°æ®ç»“æž„éƒ¨åˆ†3.1 å¤æ‚åº¦åˆ†æž 1.ä»€ä¹ˆæ˜¯æ—¶é—´å¤æ‚åº¦ &amp; ä»€ä¹ˆæ˜¯ç©ºé—´å¤æ‚åº¦ï¼Ÿ 2.æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¹‹é—´å­˜åœ¨ä»€ä¹ˆè”ç³»ï¼Ÿ 3.2 æ•°ç»„ 1.è°ˆè°ˆä½ å¯¹æ•°ç»„çš„ç†è§£ã€‚ 3.3 é“¾è¡¨ 1.ä»€ä¹ˆæ˜¯å•é“¾è¡¨ &amp; åŒå‘é“¾è¡¨ &amp; å¾ªçŽ¯é“¾è¡¨ &amp; åŒå‘å¾ªçŽ¯é“¾è¡¨ &amp; é™æ€é“¾è¡¨ã€‚ 2.åè½¬ä¸€ä¸ªé“¾è¡¨æœ‰å“ªäº›æ–¹å¼ï¼Ÿ 3.å¦‚ä½•åˆ¤æ–­é“¾è¡¨æœ‰çŽ¯ï¼Ÿ 4.ç”¨Javaè¯­è¨€è®¾è®¡ä¸€ä¸ªLinkedListã€‚ 3.4 å † 1.å¦‚ä½•ç†è§£å †ï¼Ÿ 3.5 æ ˆ 1.ä»€ä¹ˆæ˜¯æ ˆ &amp; æ ˆçš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ 2.ä»€ä¹ˆæ˜¯é¡ºåºæ ˆ &amp; é“¾å¼æ ˆï¼Ÿ 3.ä½ æœ‰æ²¡æœ‰åŸºäºŽæ ˆå°è£…çš„ä¸šåŠ¡ç±»ï¼Ÿ 4.ä½ èƒ½ç”¨æ ˆå®žçŽ°é˜Ÿåˆ—å—ï¼Ÿ 5.å¦‚ä½•å®žçŽ°æµè§ˆå™¨å‰è¿›å’ŒåŽé€€åŠŸèƒ½ï¼Ÿ 3.6 é˜Ÿåˆ— 1.ä»€ä¹ˆæ˜¯é˜Ÿåˆ— &amp; é˜Ÿåˆ—çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ 2.ä»€ä¹ˆæ˜¯ä¼˜å…ˆé˜Ÿåˆ—ï¼Ÿ 3.ä»€ä¹ˆæ˜¯åŒç«¯é˜Ÿåˆ— &amp; é˜»å¡žé˜Ÿåˆ—? 4.ä½ èƒ½ç”¨é˜Ÿåˆ—å®žçŽ°æ ˆå—ï¼Ÿ 3.7 æ•£åˆ—è¡¨ 1.ä»€ä¹ˆæ˜¯æ•£åˆ—å‡½æ•°ï¼Ÿ 2.ä»€ä¹ˆæ˜¯æ•£åˆ—å†²çªï¼Ÿè§£å†³çš„æ–¹å¼æœ‰å“ªäº›ï¼ŸJavaä¸­çš„HashMapè§£å†³æ–¹å¼é‡‡ç”¨çš„å“ªä¸€ç§ï¼Ÿ 3.ä»€ä¹ˆæ˜¯æ•£åˆ—è¡¨çš„åŠ¨æ€æ‰©å®¹ï¼Ÿ 4.ä»€ä¹ˆæ˜¯ä½å›¾ï¼Ÿ 3.8 æ ‘ 1.ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ï¼Ÿ 2.ä»€ä¹ˆæ˜¯å…ˆåºéåŽ† &amp; ä¸­åºéåŽ† &amp; åŽåºéåŽ†ã€‚ 3.ä»€ä¹ˆæ˜¯å¤šè·¯æŸ¥æ‰¾æ ‘ï¼Ÿ 4.ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘ï¼Ÿ 3.9 æŽ’åº 1.ç»™æˆ‘è¯´è¯´ä½ ä¼šçš„æŽ’åº &amp; å¤æ‚åº¦å¦‚ä½•ï¼Ÿ 2.çŽ°åœ¨æœ‰10ä¸‡æ¡æ•°æ®éœ€è¦è¿›è¡ŒæŽ’åºï¼Œä½ ä¼šé€‰æ‹©ä»€ä¹ˆæŽ’åºï¼Ÿ 3.10 æŸ¥æ‰¾ 1.è¯´è¯´ä½ çŸ¥é“çš„æŸ¥æ‰¾ç®—æ³• &amp; å¤æ‚åº¦å¦‚ä½•ï¼Ÿ 3.11 é€’å½’&amp;å›žæº¯ç®—æ³• 1.ä»€ä¹ˆæ˜¯é€’å½’ &amp; ä»€ä¹ˆæ˜¯å›žæº¯ï¼Ÿ 3.12 è´ªå¿ƒç®—æ³• 1.ä»€ä¹ˆæ˜¯è´ªå¿ƒç®—æ³•ï¼Ÿ 3.13 å…¶å®ƒæœ‰å…³ç®—æ³•ä¸Žæ•°æ®ç»“æž„çš„é¢è¯•é¢˜ 1.ä»€ä¹ˆæ˜¯å›¾ï¼Ÿå¯ä»¥è§£å†³ä¸€äº›ä»€ä¹ˆé—®é¢˜ï¼Ÿ 2.æ—¶é’ˆèµ°ä¸€åœˆï¼Œæ—¶é’ˆåˆ†é’ˆé‡åˆå‡ æ¬¡ï¼Ÿ 3.æœ‰ä¸€ä¸ªä¸å‡åŒ€çš„ç»³å­çƒ§å®Œè¦1ä¸ªå°æ—¶ï¼Œå¦‚ä½•ç®—å‡º1å°æ—¶15åˆ†é’Ÿï¼Ÿ 4.æ±‚1000ä»¥å†…çš„æ°´ä»™èŠ±æ•°ä»¥åŠ40äº¿ä»¥å†…çš„æ°´ä»™èŠ±æ•°ï¼Ÿ 5.æ•°æ®æ€Žä¹ˆåŽ‹ç¼©ï¼Œæ•°æ®çš„å®‰å…¨ã€‚ 6.è°ˆè°ˆä½ å¯¹å¯¹ç§°åŠ å¯† &amp; éžå¯¹ç§°åŠ å¯†çš„ç†è§£ã€‚ 4.å¸¸ç”¨çš„å¼€æºåº“éƒ¨åˆ†4.1 å¼‚æ­¥é€šä¿¡ 1.RxJavaç”¨æ³• &amp; RxJava2ç”¨æ³• &amp; åŽŸç† &amp;ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ï¼Ÿ 2.EventBusç”¨æ³• &amp; åŽŸç†ã€‚ 4.2 ç½‘ç»œ 1.OkHttpç”¨æ³• &amp; æºç åˆ†æžã€‚ 2.Retrofitç”¨æ³• &amp; æºç åˆ†æžã€‚ 3.Volleyç”¨æ³• &amp; ç¼ºç‚¹ã€‚ 4.3 ä¾èµ–æ³¨å…¥ 1.ButterKnifeç”¨æ³• &amp; åŽŸç†ã€‚ 2.Dagger2ç”¨æ³• &amp; åŽŸç†ã€‚ 4.4 å›¾ç‰‡åŠ è½½ 1.Glideç”¨æ³• &amp; åŽŸç†ã€‚ 2.Picassoç”¨æ³• &amp; åŽŸç†ã€‚ 3.Frescoç”¨æ³• &amp; åŽŸç†ã€‚ 4.5 æ•°æ®åº“ 1.GreenDaoã€‚ 2.LitePalã€‚ 3.OrmLiteã€‚ 4.DBFlowã€‚ 5.Realmã€‚ 4.6 å…¶å®ƒ 1.åˆ†äº«ä½ è§‰å¾—æ¯”è¾ƒå¥½ç”¨çš„å¼€æºåº“ã€‚ 2.è‡ªå·±æœ‰å°è£…åº“å—ï¼Ÿç»™æˆ‘è¯´è¯´ä½ æ˜¯å¦‚ä½•è®¾è®¡çš„ï¼Ÿ 3.ä½ æ˜¯å¦‚ä½•è®¾è®¡ä¸€ä¸ªç½‘ç»œè¯·æ±‚æ¡†æž¶çš„ï¼Ÿ 5.è®¡ç®—æœºç½‘ç»œéƒ¨åˆ† 1.ç»™æˆ‘ä»‹ç»5å±‚ç½‘ç»œæ¨¡åž‹ã€‚ 2.Http/Httpsåè®®å·¥ä½œåœ¨å“ªä¸€å±‚ï¼Ÿ 3.TCP/UDPåè®®å·¥ä½œåœ¨å“ªä¸€å±‚ï¼Ÿ 4.ç»™æˆ‘è¯´è¯´ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ã€‚ 5.ä»€ä¹ˆæ˜¯è¯·æ±‚å¤´ &amp; å“åº”å¤´ ? è¯´è¯´è¯·æ±‚å¤´ä¸­ä¸€äº›é‡è¦çš„å­—æ®µã€‚ 6.ä»€ä¹ˆæ˜¯Cookie &amp; Sessionã€‚ 7.çŸ¥é“ä»€ä¹ˆæ˜¯å¿ƒè·³æ£€æµ‹å—ï¼Ÿ 8.Httpå’ŒHttpsçš„åŒºåˆ«ï¼Ÿ 9.åŠ å¯†åè®®TLS/SSLåŠ å¯†è¿‡ç¨‹æ˜¯æ€Žæ ·çš„ï¼Ÿ 10.ä»€ä¹ˆæ˜¯DNS &amp; ä½œç”¨æ˜¯ä»€ä¹ˆ &amp;å·¥ä½œæœºåˆ¶ï¼Ÿ 11.æµè§ˆå™¨è®¿é—®ä¸€ä¸ªurlç½‘å€æ‰€ç»åŽ†çš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ 12.Socketæ˜¯åè®®å—ï¼ŸWebSocketæ˜¯åè®®å—ï¼Ÿå®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 13.Jsonè§£æžæ–¹å¼æœ‰å“ªäº›ï¼Ÿæ¯”è¾ƒå®ƒä»¬çš„ä¼˜åŠ£åŠ¿ã€‚ 14.XMLè§£æžæ–¹å¼æœ‰å“ªäº›ï¼Ÿæ¯”è¾ƒå®ƒä»¬çš„ä¼˜åŠ£åŠ¿ã€‚ 15.http1.x &amp; http 2.0åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ 16.è¯´è¯´HTTPç¼“å­˜çš„åŽŸç†ã€‚ 17.å¦‚æžœæœ‰ä¸ª100Må¤§çš„æ–‡ä»¶ï¼Œéœ€è¦ä¸Šä¼ è‡³æœåŠ¡å™¨ä¸­ï¼Œè€ŒæœåŠ¡å™¨formè¡¨å•æœ€å¤§åªèƒ½ä¸Šä¼ 2M,å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæ–¹æ³•ï¼Ÿ 18.è¯´è¯´ä½ é¡¹ç›®ä¸­å³æ—¶é€šè®¯çš„æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ]]></content>
      <categories>
        <category>Android</category>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidçŸ¥è¯†é—´è®°ï¼Œå¿«é€Ÿå›žé¡¾å„ç§çŸ¥è¯†]]></title>
    <url>%2Fposts%2F97843d21.html</url>
    <content type="text"><![CDATA[ç›®å½•ï¼š ç½‘ç»œ Java åŸºç¡€&amp;å®¹å™¨&amp;åŒæ­¥&amp;è®¾è®¡æ¨¡å¼ Java è™šæ‹Ÿæœº&amp;å†…å­˜ç»“æž„&amp;GC&amp;ç±»åŠ è½½&amp;å››ç§å¼•ç”¨&amp;åŠ¨æ€ä»£ç† Android åŸºç¡€&amp;æ€§èƒ½ä¼˜åŒ–&amp;Framwork Android æ¨¡å—åŒ–&amp;çƒ­ä¿®å¤&amp;çƒ­æ›´æ–°&amp;æ‰“åŒ…&amp;æ··æ·†&amp;åŽ‹ç¼© éŸ³è§†é¢‘&amp;FFmpeg&amp;æ’­æ”¾å™¨ ç½‘ç»œç½‘ç»œåè®®æ¨¡åž‹åº”ç”¨å±‚ï¼šè´Ÿè´£å¤„ç†ç‰¹å®šçš„åº”ç”¨ç¨‹åºç»†èŠ‚ HTTPã€FTPã€DNS ä¼ è¾“å±‚ï¼šä¸ºä¸¤å°ä¸»æœºæä¾›ç«¯åˆ°ç«¯çš„åŸºç¡€é€šä¿¡TCPã€UDP ç½‘ç»œå±‚ï¼šæŽ§åˆ¶åˆ†ç»„ä¼ è¾“ã€è·¯ç”±é€‰æ‹©ç­‰IP é“¾è·¯å±‚ï¼šæ“ä½œç³»ç»Ÿè®¾å¤‡é©±åŠ¨ç¨‹åºã€ç½‘å¡ç›¸å…³æŽ¥å£ #### TCP å’Œ UDP åŒºåˆ«TCP è¿žæŽ¥ï¼›å¯é ï¼›æœ‰åºï¼›é¢å‘å­—èŠ‚æµï¼›é€Ÿåº¦æ…¢ï¼›è¾ƒé‡é‡ï¼›å…¨åŒå·¥ï¼›é€‚ç”¨äºŽæ–‡ä»¶ä¼ è¾“ã€æµè§ˆå™¨ç­‰ å…¨åŒå·¥ï¼šA ç»™ B å‘æ¶ˆæ¯çš„åŒæ—¶ï¼ŒB ä¹Ÿèƒ½ç»™ A å‘ åŠåŒå·¥ï¼šA ç»™ B å‘æ¶ˆæ¯çš„åŒæ—¶ï¼ŒB ä¸èƒ½ç»™ A å‘ UDP æ— è¿žæŽ¥ï¼›ä¸å¯é ï¼›æ— åºï¼›é¢å‘æŠ¥æ–‡ï¼›é€Ÿåº¦å¿«ï¼›è½»é‡ï¼›é€‚ç”¨äºŽå³æ—¶é€šè®¯ã€è§†é¢‘é€šè¯ç­‰ TCP ä¸‰æ¬¡æ¡æ‰‹ Aï¼šä½ èƒ½å¬åˆ°å—ï¼Ÿ Bï¼šæˆ‘èƒ½å¬åˆ°ï¼Œä½ èƒ½å¬åˆ°å—ï¼Ÿ Aï¼šæˆ‘èƒ½å¬åˆ°ï¼Œå¼€å§‹å§ A å’Œ B ä¸¤æ–¹éƒ½è¦èƒ½ç¡®ä¿ï¼šæˆ‘è¯´çš„è¯ï¼Œä½ èƒ½å¬åˆ°ï¼›ä½ è¯´çš„è¯ï¼Œæˆ‘èƒ½å¬åˆ°ã€‚æ‰€ä»¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ TCP å››æ¬¡æŒ¥æ‰‹ Aï¼šæˆ‘è¯´å®Œäº† Bï¼šæˆ‘çŸ¥é“äº†ï¼Œç­‰ä¸€ä¸‹ï¼Œæˆ‘å¯èƒ½è¿˜æ²¡è¯´å®Œ Bï¼šæˆ‘ä¹Ÿè¯´å®Œäº† Aï¼šæˆ‘çŸ¥é“äº†ï¼Œç»“æŸå§ B æ”¶åˆ° A ç»“æŸçš„æ¶ˆæ¯åŽ B å¯èƒ½è¿˜æ²¡è¯´å®Œï¼Œæ²¡æ³•ç«‹å³å›žå¤ç»“æŸæ ‡ç¤ºï¼Œåªèƒ½ç­‰è¯´å®ŒåŽå†å‘Šè¯‰ A ï¼šæˆ‘è¯´å®Œäº†ã€‚ POST å’Œ GET åŒºåˆ«Get å‚æ•°æ”¾åœ¨ url ä¸­ï¼›Post å‚æ•°æ”¾åœ¨ request Body ä¸­ Get å¯èƒ½ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°æ”¾åœ¨ url ä¸­ HTTPS HTTP æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜Žæ–‡ä¼ è¾“ï¼›HTTPS ä½¿ç”¨ SSL åè®®å¯¹ HTTP ä¼ è¾“æ•°æ®è¿›è¡Œäº†åŠ å¯† HTTP é»˜è®¤ 80 ç«¯å£ï¼›HTTPS é»˜è®¤ 443 ç«¯å£ ä¼˜ç‚¹ï¼šå®‰å…¨ ç¼ºç‚¹ï¼šè´¹æ—¶ã€SSL è¯ä¹¦æ”¶è´¹ï¼ŒåŠ å¯†èƒ½åŠ›è¿˜æ˜¯æœ‰é™çš„ï¼Œä½†æ˜¯æ¯” HTTP å¼ºå¤šäº† Java åŸºç¡€&amp;å®¹å™¨&amp;åŒæ­¥&amp;è®¾è®¡æ¨¡å¼StringBuilderã€StringBufferã€+ã€String.concat é“¾æŽ¥å­—ç¬¦ä¸²ï¼š StringBuffer çº¿ç¨‹å®‰å…¨ï¼ŒStringBuilder çº¿ç¨‹ä¸å®‰å…¨ +å®žé™…ä¸Šæ˜¯ç”¨ StringBuilder æ¥å®žçŽ°çš„ï¼Œæ‰€ä»¥éžå¾ªçŽ¯ä½“å¯ä»¥ç›´æŽ¥ç”¨ +ï¼Œå¾ªçŽ¯ä½“ä¸è¡Œï¼Œå› ä¸ºä¼šé¢‘ç¹åˆ›å»º StringBuilder String.concat å®žè´¨æ˜¯ new String ï¼Œæ•ˆçŽ‡ä¹Ÿä½Žï¼Œè€—æ—¶æŽ’åºï¼šStringBuilder &lt; StringBuffer &lt; concat &lt; + Java æ³›åž‹æ“¦é™¤ ä¿®é¥°æˆå‘˜å˜é‡ç­‰ç±»ç»“æž„ç›¸å…³çš„æ³›åž‹ä¸ä¼šè¢«æ“¦é™¤ å®¹å™¨ç±»æ³›åž‹ä¼šè¢«æ“¦é™¤ ArrayListã€LinkedListArrayList åŸºäºŽæ•°ç»„å®žçŽ°ï¼ŒæŸ¥æ‰¾å¿«ï¼šo(1)ï¼Œå¢žåˆ æ…¢ï¼šo(n) åˆå§‹å®¹é‡ä¸º10ï¼Œæ‰©å®¹é€šè¿‡ System.arrayCopy æ–¹æ³• LinkedList åŸºäºŽåŒå‘é“¾è¡¨å®žçŽ°ï¼ŒæŸ¥æ‰¾æ…¢ï¼šo(n)ï¼Œå¢žåˆ å¿«ï¼šo(1) å°è£…äº†é˜Ÿåˆ—å’Œæ ˆçš„è°ƒç”¨ HashMap ã€HashTableHashMap åŸºäºŽæ•°ç»„å’Œé“¾è¡¨å®žçŽ°ï¼Œæ•°ç»„æ˜¯ HashMap çš„ä¸»ä½“ï¼›é“¾è¡¨æ˜¯ä¸ºè§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„ å½“å‘ç”Ÿå“ˆå¸Œå†²çªä¸”é“¾è¡¨ size å¤§äºŽé˜ˆå€¼æ—¶ä¼šæ‰©å®¹ï¼ŒJAVA 8 ä¼šå°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘æé«˜æ€§èƒ½å…è®¸ key/value ä¸º null HashTable æ•°æ®ç»“æž„å’Œ HashMap ä¸€æ · ä¸å…è®¸ value ä¸º null çº¿ç¨‹å®‰å…¨ ArrayMapã€SparseArrayArrayMap åŸºäºŽä¸¤ä¸ªæ•°ç»„å®žçŽ°ï¼Œä¸€ä¸ªå­˜æ”¾ hashï¼›ä¸€ä¸ªå­˜æ”¾é”®å€¼å¯¹ã€‚æ‰©å®¹çš„æ—¶å€™åªéœ€è¦æ•°ç»„æ‹·è´ï¼Œä¸éœ€è¦é‡å»ºå“ˆå¸Œè¡¨ å†…å­˜åˆ©ç”¨çŽ‡é«˜ ä¸é€‚åˆå­˜å¤§é‡æ•°æ®ï¼Œå› ä¸ºä¼šå¯¹ key è¿›è¡ŒäºŒåˆ†æ³•æŸ¥æ‰¾ï¼ˆ1000ä»¥ä¸‹ï¼‰ SparseArray åŸºäºŽä¸¤ä¸ªæ•°ç»„å®žçŽ°ï¼Œint åš key å†…å­˜åˆ©ç”¨çŽ‡é«˜ ä¸é€‚åˆå­˜å¤§é‡æ•°æ®ï¼Œå› ä¸ºä¼šå¯¹ key è¿›è¡ŒäºŒåˆ†æ³•æŸ¥æ‰¾ï¼ˆ1000ä»¥ä¸‹ï¼‰ volatile å…³é”®å­— åªèƒ½ç”¨æ¥ä¿®é¥°å˜é‡ï¼Œé€‚ç”¨ä¿®é¥°å¯èƒ½è¢«å¤šçº¿ç¨‹åŒæ—¶è®¿é—®çš„å˜é‡ ç›¸å½“äºŽè½»é‡çº§çš„ synchronizedï¼Œvolatitle èƒ½ä¿è¯æœ‰åºæ€§ï¼ˆç¦ç”¨æŒ‡ä»¤é‡æŽ’åºï¼‰ã€å¯è§æ€§ï¼›åŽè€…è¿˜èƒ½ä¿è¯åŽŸå­æ€§ å˜é‡ä½äºŽä¸»å†…å­˜ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹è¿˜æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼Œå˜é‡åœ¨è‡ªå·±çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­æœ‰ä»½æ‹·è´ï¼Œçº¿ç¨‹ç›´æŽ¥æ“ä½œçš„æ˜¯è¿™ä¸ªæ‹·è´ è¢« volatile ä¿®é¥°çš„å˜é‡æ”¹å˜åŽä¼šç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œä¿æŒå˜é‡çš„å¯è§æ€§. åŒé‡æ£€æŸ¥å•ä¾‹ï¼Œä¸ºä»€ä¹ˆè¦åŠ  volatileï¼Ÿ volatileæƒ³è¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œåœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­æƒ³è¦ä½¿ç”¨instanceï¼Œå‘çŽ°instance!=nullï¼Œä½†æ˜¯å®žé™…ä¸Šinstanceè¿˜æœªåˆå§‹åŒ–å®Œæ¯•è¿™ä¸ªé—®é¢˜ å°†instance =newInstance();æ‹†åˆ†ä¸º3å¥è¯æ˜¯ã€‚1.åˆ†é…å†…å­˜2.åˆå§‹åŒ–3.å°†instanceæŒ‡å‘åˆ†é…çš„å†…å­˜ç©º volatileå¯ä»¥ç¦æ­¢æŒ‡ä»¤é‡æŽ’åºï¼Œç¡®ä¿å…ˆæ‰§è¡Œ2ï¼ŒåŽæ‰§è¡Œ3 wait å’Œ sleep sleep æ˜¯ Thread çš„é™æ€æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨ wait æ˜¯ Object çš„æˆå‘˜æ–¹æ³•ï¼Œåªèƒ½åœ¨ synchronized ä»£ç å—ä¸­è°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ¥ IllegalMonitorStateException éžæ³•ç›‘æŽ§çŠ¶æ€å¼‚å¸¸ sleep ä¸ä¼šé‡Šæ”¾å…±äº«èµ„æºé”ï¼Œwait ä¼šé‡Šæ”¾å…±äº«èµ„æºé” lock å’Œ synchronized synchronized æ˜¯ Java å…³é”®å­—ï¼Œå†…ç½®ç‰¹æ€§ï¼›Lock æ˜¯ä¸€ä¸ªæŽ¥å£ synchronized ä¼šè‡ªåŠ¨é‡Šæ”¾é”ï¼›lock éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ï¼Œæ‰€ä»¥éœ€è¦å†™åˆ° try catch å—ä¸­å¹¶åœ¨ finally ä¸­é‡Šæ”¾é” synchronized æ— æ³•ä¸­æ–­ç­‰å¾…é”ï¼›lock å¯ä»¥ä¸­æ–­ Lock å¯ä»¥æé«˜å¤šä¸ªçº¿ç¨‹è¿›è¡Œè¯»/å†™æ“ä½œçš„æ•ˆçŽ‡ ç«žäº‰èµ„æºæ¿€çƒˆæ—¶ï¼Œlock çš„æ€§èƒ½ä¼šæ˜Žæ˜¾çš„ä¼˜äºŽ synchronized å¯é‡å…¥é” å®šä¹‰ï¼šå·²ç»èŽ·å–åˆ°é”åŽï¼Œå†æ¬¡è°ƒç”¨åŒæ­¥ä»£ç å—/å°è¯•èŽ·å–é”æ—¶ä¸å¿…é‡æ–°åŽ»ç”³è¯·é”ï¼Œå¯ä»¥ç›´æŽ¥æ‰§è¡Œç›¸å…³ä»£ç  ReentrantLock å’Œ synchronized éƒ½æ˜¯å¯é‡å…¥é” å…¬å¹³é” å®šä¹‰ï¼šç­‰å¾…æ—¶é—´æœ€ä¹…çš„çº¿ç¨‹ä¼šä¼˜å…ˆèŽ·å¾—é” éžå…¬å¹³é”æ— æ³•ä¿è¯å“ªä¸ªçº¿ç¨‹èŽ·å–åˆ°é”ï¼Œsynchronized å°±æ˜¯éžå…¬å¹³é” ReentrantLock é»˜è®¤æ—¶éžå…¬å¹³é”ï¼Œå¯ä»¥è®¾ç½®ä¸ºå…¬å¹³é” ä¹è§‚é”å’Œæ‚²è§‚é” æ‚²è§‚é”ï¼šçº¿ç¨‹ä¸€æ—¦å¾—åˆ°é”ï¼Œå…¶ä»–çº¿ç¨‹å°±æŒ‚èµ·ç­‰å¾…ï¼Œé€‚ç”¨äºŽå†™å…¥æ“ä½œé¢‘ç¹çš„åœºæ™¯ï¼›synchronized å°±æ˜¯æ‚²è§‚é” ä¹è§‚é”ï¼šå‡è®¾æ²¡æœ‰å†²çªï¼Œä¸åŠ é”ï¼Œæ›´æ–°æ•°æ®æ—¶åˆ¤æ–­è¯¥æ•°æ®æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸçš„è¯åˆ™ä¸è¿›è¡Œæ•°æ®æ›´æ–°ï¼Œé€‚ç”¨äºŽè¯»å–æ“ä½œé¢‘ç¹çš„åœºæ™¯ ä¹è§‚é” CASï¼šCompare And Swapï¼Œæ›´æ–°æ•°æ®æ—¶å…ˆæ¯”è¾ƒåŽŸå€¼æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰åˆ™è¡¨ç¤ºæ•°æ®è¿‡åŽ»ï¼Œä¸è¿›è¡Œæ•°æ®æ›´æ–° ä¹è§‚é”å®žçŽ°ï¼šAtomicIntegerã€AtomicLongã€AtomicBoolean æ­»é” 4 ä¸ªå¿…è¦æ¡ä»¶ äº’æ–¥ å æœ‰ä¸”ç­‰å¾… ä¸å¯æŠ¢å  å¾ªçŽ¯ç­‰å¾… synchronized åŽŸç† æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç›‘è§†å™¨é”ï¼šmonitorï¼ŒåŒæ­¥ä»£ç å—ä¼šæ‰§è¡Œ monitorenter å¼€å§‹ï¼Œmotnitorexit ç»“æŸ wait/notify å°±ä¾èµ– monitor ç›‘è§†å™¨ï¼Œæ‰€ä»¥åœ¨éžåŒæ­¥ä»£ç å—ä¸­æ‰§è¡Œä¼šæŠ¥ IllegalMonitorStateException å¼‚å¸¸ Java è™šæ‹Ÿæœº&amp;å†…å­˜ç»“æž„&amp;GC&amp;ç±»åŠ è½½&amp;å››ç§å¼•ç”¨&amp;åŠ¨æ€ä»£ç†JVM å®šä¹‰ï¼šå¯ä»¥ç†è§£æˆä¸€ä¸ªè™šæž„çš„è®¡ç®—æœºï¼Œè§£é‡Šè‡ªå·±çš„å­—èŠ‚ç æŒ‡ä»¤é›†æ˜ å°„åˆ°æœ¬åœ° CPU æˆ– OS çš„æŒ‡ä»¤é›†ï¼Œä¸Šå±‚åªéœ€å…³æ³¨ Class æ–‡ä»¶ï¼Œä¸Žæ“ä½œç³»ç»Ÿæ— å…³ï¼Œå®žçŽ°è·¨å¹³å° Kotlin å°±æ˜¯èƒ½è§£é‡Šæˆ Class æ–‡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥è·‘åœ¨ JVM ä¸Š JVM å†…å­˜æ¨¡åž‹ Java å¤šçº¿ç¨‹ä¹‹é—´æ˜¯é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡çš„ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„æœ¬åœ°å†…å­˜ å…±äº«å˜é‡å­˜æ”¾äºŽä¸»å†…å­˜ä¸­ï¼Œçº¿ç¨‹ä¼šæ‹·è´ä¸€ä»½å…±äº«å˜é‡åˆ°æœ¬åœ°å†…å­˜ volatile å…³é”®å­—å°±æ˜¯ç»™å†…å­˜æ¨¡åž‹æœåŠ¡çš„ï¼Œç”¨æ¥ä¿è¯å†…å­˜å¯è§æ€§å’Œé¡ºåºæ€§ JVM å†…å­˜ç»“æž„çº¿ç¨‹ç§æœ‰ï¼š ç¨‹åºè®¡æ•°å™¨ï¼šè®°å½•æ­£åœ¨æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€ï¼Œè‹¥æ­£åœ¨æ‰§è¡Œ Native æ–¹æ³•åˆ™ä¸ºç©º è™šæ‹Ÿæœºæ ˆï¼šæ‰§è¡Œæ–¹æ³•æ—¶æŠŠæ–¹æ³•æ‰€éœ€æ•°æ®å­˜ä¸ºä¸€ä¸ªæ ˆå¸§å…¥æ ˆï¼Œæ‰§è¡Œå®ŒåŽå‡ºæ ˆ æœ¬åœ°æ–¹æ³•æ ˆï¼šåŒè™šæ‹Ÿæœºæ ˆï¼Œä½†æ˜¯é’ˆå¯¹çš„æ˜¯ Native æ–¹æ³• çº¿ç¨‹å…±äº«ï¼š å †ï¼šå­˜å‚¨ Java å®žä¾‹ï¼ŒGC ä¸»è¦åŒºåŸŸï¼Œåˆ†ä»£æ”¶é›† GC æ–¹æ³•ä¼šå§å †åˆ’åˆ†ä¸ºæ–°ç”Ÿä»£ã€è€å¹´ä»£ æ–¹æ³•åŒºï¼šå­˜å‚¨ç±»ä¿¡æ¯ï¼Œå¸¸é‡æ± ï¼Œé™æ€å˜é‡ç­‰æ•°æ® GCå›žæ”¶åŒºåŸŸï¼šåªé’ˆå¯¹å †ã€æ–¹æ³•åŒºï¼›çº¿ç¨‹ç§æœ‰åŒºåŸŸæ•°æ®ä¼šéšçº¿ç¨‹ç»“æŸé”€æ¯ï¼Œä¸ç”¨å›žæ”¶å›žæ”¶ç±»åž‹ï¼š1.å †ä¸­çš„å¯¹è±¡ åˆ†ä»£æ”¶é›† GC æ–¹æ³•ä¼šå§å †åˆ’åˆ†ä¸ºæ–°ç”Ÿä»£ã€è€å¹´ä»£ æ–°ç”Ÿä»£ï¼šæ–°å»ºå°å¯¹è±¡ä¼šè¿›å…¥æ–°ç”Ÿä»£ï¼›é€šè¿‡å¤åˆ¶ç®—æ³•å›žæ”¶å¯¹è±¡ è€å¹´ä»£ï¼šæ–°å»ºå¤§å¯¹è±¡åŠè€å¯¹è±¡ä¼šè¿›å…¥è€å¹´ä»£ï¼›é€šè¿‡æ ‡è®°-æ¸…é™¤ç®—æ³•å›žæ”¶å¯¹è±¡ 2.æ–¹æ³•åŒºä¸­çš„ç±»ä¿¡æ¯ã€å¸¸é‡æ±  åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯è¢«å›žæ”¶ï¼š 1.å¼•ç”¨è®¡æ•°æ³•ç¼ºç‚¹ï¼šå¾ªçŽ¯å¼•ç”¨ 2.å¯è¾¾æ€§åˆ†æžæ³•å®šä¹‰ï¼šä»Ž GC ROOT å¼€å§‹æœç´¢ï¼Œä¸å¯è¾¾çš„å¯¹è±¡éƒ½æ˜¯å¯ä»¥è¢«å›žæ”¶çš„ GC ROOT 1.è™šæ‹Ÿæœºæ ˆ/æœ¬åœ°æ–¹æ³•æ ˆä¸­å¼•ç”¨çš„å¯¹è±¡2.æ–¹æ³•åŒºä¸­å¸¸é‡/é™æ€å˜é‡å¼•ç”¨çš„å¯¹è±¡ å››ç§å¼•ç”¨ å¼ºå¼•ç”¨ï¼šä¸ä¼šè¢«å›žæ”¶ è½¯å¼•ç”¨ï¼šå†…å­˜ä¸è¶³æ—¶ä¼šè¢«å›žæ”¶ å¼±å¼•ç”¨ï¼šgc æ—¶ä¼šè¢«å›žæ”¶ è™šå¼•ç”¨ï¼šæ— æ³•é€šè¿‡è™šå¼•ç”¨å¾—åˆ°å¯¹è±¡ï¼Œå¯ä»¥ç›‘å¬å¯¹è±¡çš„å›žæ”¶ ClassLoaderç±»çš„ç”Ÿå‘½å‘¨æœŸï¼š1.åŠ è½½ï¼›2.éªŒè¯ï¼›3.å‡†å¤‡ï¼›4.è§£æžï¼›5.åˆå§‹åŒ–ï¼›6.ä½¿ç”¨ï¼›7.å¸è½½ ç±»åŠ è½½è¿‡ç¨‹ï¼š 1.åŠ è½½ï¼šèŽ·å–ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼›ç”Ÿæˆæ–¹æ³•åŒºçš„è¿è¡Œæ—¶å­˜å‚¨ç»“æž„ï¼›åœ¨å†…å­˜ä¸­ç”Ÿæˆ Class å¯¹è±¡2.éªŒè¯ï¼šç¡®ä¿è¯¥ Class å­—èŠ‚æµç¬¦åˆè™šæ‹Ÿæœºè¦æ±‚3.å‡†å¤‡ï¼šåˆå§‹åŒ–é™æ€å˜é‡4.è§£æžï¼šå°†å¸¸é‡æ± çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æŽ¥å¼•ç”¨5.åˆå§‹åŒ–ï¼šæ‰§è¡Œé™æ€å—ä»£ç ã€ç±»å˜é‡èµ‹å€¼ ç±»åŠ è½½æ—¶æœºï¼š 1.å®žä¾‹åŒ–å¯¹è±¡2.è°ƒç”¨ç±»çš„é™æ€æ–¹æ³•3.è°ƒç”¨ç±»çš„é™æ€å˜é‡ï¼ˆæ”¾å…¥å¸¸é‡æ± çš„å¸¸é‡é™¤å¤–ï¼‰ ç±»åŠ è½½å™¨ï¼šè´Ÿè´£åŠ è½½ class æ–‡ä»¶ åˆ†ç±»ï¼š 1.å¼•å¯¼ç±»åŠ è½½å™¨ - æ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨2.æ‹“å±•ç±»åŠ è½½å™¨ - ç»§æ‰¿è‡ªå¼•å¯¼ç±»åŠ è½½å™¨3.ç³»ç»Ÿç±»åŠ è½½å™¨ - ç»§æ‰¿è‡ªæ‹“å±•ç±»åŠ è½½å™¨ åŒäº²å§”æ‰˜æ¨¡åž‹ï¼š å½“è¦åŠ è½½ä¸€ä¸ª class æ—¶ï¼Œä¼šå…ˆé€å±‚å‘ä¸Šè®©çˆ¶åŠ è½½å™¨å…ˆåŠ è½½ï¼ŒåŠ è½½å¤±è´¥æ‰ä¼šè‡ªå·±åŠ è½½ ä¸ºä»€ä¹ˆå«åŒäº²ï¼Ÿä¸è€ƒè™‘è‡ªå®šä¹‰åŠ è½½å™¨ï¼Œç³»ç»Ÿç±»åŠ è½½å™¨éœ€è¦ç½‘ä¸Šè¯¢é—®ä¸¤å±‚ï¼Œæ‰€ä»¥å«åŒäº² åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªç±»æ—¶ï¼Œé™¤äº†ç±»ä¿¡æ¯ï¼Œè¿˜å¿…é¡»æ—¶åŒä¸€ä¸ªç±»åŠ è½½å™¨ ä¼˜ç‚¹ï¼š é˜²æ­¢é‡å¤åŠ è½½ï¼Œçˆ¶åŠ è½½å™¨åŠ è½½è¿‡äº†å°±æ²¡å¿…è¦åŠ è½½äº† å®‰å…¨ï¼Œé˜²æ­¢ç¯¡æ”¹æ ¸å¿ƒåº“ç±» åŠ¨æ€ä»£ç†åŽŸç†åŠå®žçŽ° InvocationHandler æŽ¥å£ï¼ŒåŠ¨æ€ä»£ç†ç±»éœ€è¦å®žçŽ°è¿™ä¸ªæŽ¥å£ Proxy.newProxyInstanceï¼Œç”¨äºŽåŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡ Retrofit åº”ç”¨ï¼š Retrofit é€šè¿‡åŠ¨æ€ä»£ç†ï¼Œä¸ºæˆ‘ä»¬å®šä¹‰çš„è¯·æ±‚æŽ¥å£éƒ½ç”Ÿæˆä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡ï¼Œå®žçŽ°è¯·æ±‚ Android åŸºç¡€&amp;æ€§èƒ½ä¼˜åŒ–&amp;FramworkActivity å¯åŠ¨æ¨¡å¼ standard æ ‡å‡†æ¨¡å¼ singleTop æ ˆé¡¶å¤ç”¨æ¨¡å¼ï¼Œ* æŽ¨é€ç‚¹å‡»æ¶ˆæ¯ç•Œé¢ singleTask æ ˆå†…å¤ç”¨æ¨¡å¼ï¼Œ* é¦–é¡µ singleInstance å•ä¾‹æ¨¡å¼ï¼Œå•ç‹¬ä½äºŽä¸€ä¸ªä»»åŠ¡æ ˆä¸­* æ‹¨æ‰“ç”µè¯ç•Œé¢ç»†èŠ‚ï¼š* taskAffinityï¼šä»»åŠ¡ç›¸å…³æ€§ï¼Œç”¨äºŽæŒ‡å®šä»»åŠ¡æ ˆåç§°ï¼Œé»˜è®¤ä¸ºåº”ç”¨åŒ…å* allowTaskReparentingï¼šå…è®¸è½¬ç§»ä»»åŠ¡æ ˆ View å·¥ä½œåŽŸç†12345* DecorView (FrameLayout) * LinearLayout * titlebar * Content * è°ƒç”¨ setContentView è®¾ç½®çš„ View ViewRoot çš„ performTraversals æ–¹æ³•è°ƒç”¨è§¦å‘å¼€å§‹ View çš„ç»˜åˆ¶ï¼Œç„¶åŽä¼šä¾æ¬¡è°ƒç”¨: performMeasureï¼šéåŽ† View çš„ measure æµ‹é‡å°ºå¯¸ performLayoutï¼šéåŽ† View çš„ layout ç¡®å®šä½ç½® performDrawï¼šéåŽ† View çš„ draw ç»˜åˆ¶ #### äº‹ä»¶åˆ†å‘æœºåˆ¶ ä¸€ä¸ª MotionEvent äº§ç”ŸåŽï¼ŒæŒ‰ Activity -&gt; Window -&gt; decorView -&gt; View é¡ºåºä¼ é€’ï¼ŒView ä¼ é€’è¿‡ç¨‹å°±æ˜¯äº‹ä»¶åˆ†å‘ï¼Œä¸»è¦ä¾èµ–ä¸‰ä¸ªæ–¹æ³•: dispatchTouchEventï¼šç”¨äºŽåˆ†å‘äº‹ä»¶ï¼Œåªè¦æŽ¥å—åˆ°ç‚¹å‡»äº‹ä»¶å°±ä¼šè¢«è°ƒç”¨ï¼Œè¿”å›žç»“æžœè¡¨ç¤ºæ˜¯å¦æ¶ˆè€—äº†å½“å‰äº‹ä»¶ onInterceptTouchEventï¼šç”¨äºŽåˆ¤æ–­æ˜¯å¦æ‹¦æˆªäº‹ä»¶ï¼Œå½“ ViewGroup ç¡®å®šè¦æ‹¦æˆªäº‹ä»¶åŽï¼Œè¯¥äº‹ä»¶åºåˆ—éƒ½ä¸ä¼šå†è§¦å‘è°ƒç”¨æ­¤ ViewGroup çš„ onIntercept onTouchEventï¼šç”¨äºŽå¤„ç†äº‹ä»¶ï¼Œè¿”å›žç»“æžœè¡¨ç¤ºæ˜¯å¦å¤„ç†äº†å½“å‰äº‹ä»¶ï¼Œæœªå¤„ç†åˆ™ä¼ é€’ç»™çˆ¶å®¹å™¨å¤„ç† ç»†èŠ‚ï¼š ä¸€ä¸ªäº‹ä»¶åºåˆ—åªèƒ½è¢«ä¸€ä¸ª View æ‹¦æˆªä¸”æ¶ˆè€— View æ²¡æœ‰ onIntercept æ–¹æ³•ï¼Œç›´æŽ¥è°ƒç”¨ onTouchEvent å¤„ç† OnTouchListener ä¼˜å…ˆçº§æ¯” OnTouchEvent é«˜ï¼ŒonClickListener ä¼˜å…ˆçº§æœ€ä½Ž requestDisallowInterceptTouchEvent å¯ä»¥å±è”½çˆ¶å®¹å™¨ onIntercet æ–¹æ³•çš„è°ƒç”¨ Window ã€ WindowManagerã€WMSã€SurfaceFlinger Windowï¼šæŠ½è±¡æ¦‚å¿µä¸æ˜¯å®žé™…å­˜åœ¨çš„ï¼Œè€Œæ˜¯ä»¥ View çš„å½¢å¼å­˜åœ¨ï¼Œé€šè¿‡ PhoneWindow å®žçŽ° WindowManagerï¼šå¤–ç•Œè®¿é—® Window çš„å…¥å£ï¼Œå†…éƒ¨ä¸Ž WMS äº¤äº’æ˜¯ä¸ª IPC è¿‡ç¨‹ WMSï¼šç®¡ç†çª—å£ Surface çš„å¸ƒå±€å’Œæ¬¡åºï¼Œä½œä¸ºç³»ç»Ÿçº§æœåŠ¡å•ç‹¬è¿è¡Œåœ¨ä¸€ä¸ªè¿›ç¨‹ SurfaceFlingerï¼šå°† WMS ç»´æŠ¤çš„çª—å£æŒ‰ä¸€å®šæ¬¡åºæ··åˆåŽæ˜¾ç¤ºåˆ°å±å¹•ä¸Š View åŠ¨ç”»ã€å¸§åŠ¨ç”»åŠå±žæ€§åŠ¨ç”»View åŠ¨ç”»ï¼š * ä½œç”¨å¯¹è±¡æ˜¯ Viewï¼Œå¯ç”¨ xml å®šä¹‰ï¼Œå»ºè®® xml å®žçŽ°æ¯”è¾ƒæ˜“è¯»* æ”¯æŒå››ç§æ•ˆæžœï¼šå¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ã€é€æ˜Žåº¦ å¸§åŠ¨ç”»ï¼š * é€šè¿‡ AnimationDrawable å®žçŽ°ï¼Œå®¹æ˜“ OOM å±žæ€§åŠ¨ç”»ï¼š å¯ä½œç”¨äºŽä»»ä½•å¯¹è±¡ï¼Œå¯ç”¨ xml å®šä¹‰ï¼ŒAndroid 3 å¼•å…¥ï¼Œå»ºè®®ä»£ç å®žçŽ°æ¯”è¾ƒçµæ´» åŒ…æ‹¬ ObjectAnimatorã€ValuetAnimatorã€AnimatorSet æ—¶é—´æ’å€¼å™¨ï¼šæ ¹æ®æ—¶é—´æµé€çš„ç™¾åˆ†æ¯”è®¡ç®—å½“å‰å±žæ€§æ”¹å˜çš„ç™¾åˆ†æ¯” ç³»ç»Ÿé¢„ç½®åŒ€é€Ÿã€åŠ é€Ÿã€å‡é€Ÿç­‰æ’å€¼å™¨ ç±»åž‹ä¼°å€¼å™¨ï¼šæ ¹æ®å½“å‰å±žæ€§æ”¹å˜çš„ç™¾åˆ†æ¯”è®¡ç®—æ”¹å˜åŽçš„å±žæ€§å€¼ ç³»ç»Ÿé¢„ç½®æ•´åž‹ã€æµ®ç‚¹ã€è‰²å€¼ç­‰ç±»åž‹ä¼°å€¼å™¨ ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š é¿å…ä½¿ç”¨å¸§åŠ¨ç”»ï¼Œå®¹æ˜“OOM ç•Œé¢é”€æ¯æ—¶åœæ­¢åŠ¨ç”»ï¼Œé¿å…å†…å­˜æ³„æ¼ å¼€å¯ç¡¬ä»¶åŠ é€Ÿï¼Œæé«˜åŠ¨ç”»æµç•…æ€§ ï¼Œç¡¬ä»¶åŠ é€Ÿï¼š å°† cpu ä¸€éƒ¨åˆ†å·¥ä½œåˆ†æ‹…ç»™ gpu ï¼Œä½¿ç”¨ gpu å®Œæˆç»˜åˆ¶å·¥ä½œ ä»Žå·¥ä½œåˆ†æ‘Šå’Œç»˜åˆ¶æœºåˆ¶ä¸¤ä¸ªæ–¹é¢ä¼˜åŒ–äº†ç»˜åˆ¶é€Ÿåº¦ Handlerã€MessageQueueã€Looper Handlerï¼šå¼€å‘ç›´æŽ¥æŽ¥è§¦çš„ç±»ï¼Œå†…éƒ¨æŒæœ‰ MessageQueue å’Œ Looper MessageQueueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå†…éƒ¨é€šè¿‡å•é“¾è¡¨å­˜å‚¨æ¶ˆæ¯ Looperï¼šå†…éƒ¨æŒæœ‰ MessageQueueï¼Œå¾ªçŽ¯æŸ¥çœ‹æ˜¯å¦æœ‰æ–°æ¶ˆæ¯ï¼Œæœ‰å°±å¤„ç†ï¼Œæ²¡å°±é˜»å¡ž å¦‚ä½•å®žçŽ°é˜»å¡žï¼šé€šè¿‡ nativePollOnce æ–¹æ³•ï¼ŒåŸºäºŽ Linux epoll äº‹ä»¶ç®¡ç†æœºåˆ¶ ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸ä¼šå› ä¸º Looper é˜»å¡žï¼šç³»ç»Ÿæ¯ 16ms ä¼šå‘é€ä¸€ä¸ªåˆ·æ–° UI æ¶ˆæ¯å”¤é†’ MVCã€MVPã€MVVM MVPï¼šModelï¼šå¤„ç†æ•°æ®ï¼›Viewï¼šæŽ§åˆ¶è§†å›¾ï¼›Presenterï¼šåˆ†ç¦» Activity å’Œ Model MVVMï¼šModelï¼šå¤„ç†èŽ·å–ä¿å­˜æ•°æ®ï¼›Viewï¼šæŽ§åˆ¶è§†å›¾ï¼›ViewModelï¼šæ•°æ®å®¹å™¨* ä½¿ç”¨ Jetpack ç»„ä»¶æž¶æž„çš„ LiveDataã€ViewModel ä¾¿æ·å®žçŽ° MVVM Serializableã€Parcelable Serializable ï¼šJava åºåˆ—åŒ–æ–¹å¼ï¼Œé€‚ç”¨äºŽå­˜å‚¨å’Œç½‘ç»œä¼ è¾“ï¼ŒserialVersionUID ç”¨äºŽç¡®å®šååºåˆ—åŒ–å’Œç±»ç‰ˆæœ¬æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´æ—¶ååºåˆ—åŒ–å›žå¤±è´¥ Parcelable ï¼šAndroid åºåˆ—åŒ–æ–¹å¼ï¼Œé€‚ç”¨äºŽç»„ä»¶é€šä¿¡æ•°æ®ä¼ é€’ï¼Œæ€§èƒ½é«˜ï¼Œå› ä¸ºä¸åƒ Serializable ä¸€æ ·æœ‰å¤§é‡åå°„æ“ä½œï¼Œé¢‘ç¹ GC Binder Android è¿›ç¨‹é—´é€šä¿¡çš„ä¸­æµç ¥æŸ±ï¼ŒåŸºäºŽå®¢æˆ·ç«¯-æœåŠ¡ç«¯é€šä¿¡æ–¹å¼ ä½¿ç”¨ mmap ä¸€æ¬¡æ•°æ®æ‹·è´å®žçŽ° IPCï¼Œä¼ ç»Ÿ IPCï¼šç”¨æˆ·Aç©ºé—´-&gt;å†…æ ¸-&gt;ç”¨æˆ·Bç©ºé—´ï¼›mmap å°†å†…æ ¸ä¸Žç”¨æˆ·Bç©ºé—´æ˜ å°„ï¼Œå®žçŽ°ç›´æŽ¥ä»Žç”¨æˆ·Aç©ºé—´-&gt;ç”¨æˆ·Bç©ºé—´ BinderPool å¯é¿å…åˆ›å»ºå¤š Service IPC æ–¹å¼ Intent extrasã€Bundleï¼šè¦æ±‚ä¼ é€’æ•°æ®èƒ½è¢«åºåˆ—åŒ–ï¼Œå®žçŽ° Parcelableã€Serializable ï¼Œé€‚ç”¨äºŽå››å¤§ç»„ä»¶é€šä¿¡ æ–‡ä»¶å…±äº«ï¼šé€‚ç”¨äºŽäº¤æ¢ç®€å•çš„æ•°æ®å®žæ—¶æ€§ä¸é«˜çš„åœºæ™¯ AIDLï¼šAIDL æŽ¥å£å®žè´¨ä¸Šæ˜¯ç³»ç»Ÿæä¾›ç»™æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿å®žçŽ° BInder çš„å·¥å…· Android Interface Definition Languageï¼Œå¯å®žçŽ°è·¨è¿›ç¨‹è°ƒç”¨æ–¹æ³• æœåŠ¡ç«¯ï¼šå°†æš´æ¼ç»™å®¢æˆ·ç«¯çš„æŽ¥å£å£°æ˜Žåœ¨ AIDL æ–‡ä»¶ä¸­ï¼Œåˆ›å»º Service å®žçŽ° AIDL æŽ¥å£å¹¶ç›‘å¬å®¢æˆ·ç«¯è¿žæŽ¥è¯·æ±‚ å®¢æˆ·ç«¯ï¼šç»‘å®šæœåŠ¡ç«¯ Service ï¼Œç»‘å®šæˆåŠŸåŽæ‹¿åˆ°æœåŠ¡ç«¯ Binder å¯¹è±¡è½¬ä¸º AIDL æŽ¥å£è°ƒç”¨ RemoteCallbackList å®žçŽ°è·¨è¿›ç¨‹æŽ¥å£ç›‘å¬ï¼ŒåŒä¸ª Binder å¯¹è±¡åš key å­˜å‚¨å®¢æˆ·ç«¯æ³¨å†Œçš„ listener ç›‘å¬ Binder æ–­å¼€ï¼š1.Binder.linkToDeath è®¾ç½®æ­»äº¡ä»£ç†ï¼›2. onServiceDisconnected å›žè°ƒ Messengerï¼šåŸºäºŽ AIDL å®žçŽ°ï¼ŒæœåŠ¡ç«¯ä¸²è¡Œå¤„ç†ï¼Œä¸»è¦ç”¨äºŽä¼ é€’æ¶ˆæ¯ï¼Œé€‚ç”¨äºŽä½Žå¹¶å‘ä¸€å¯¹å¤šé€šä¿¡ ContentProviderï¼šåŸºäºŽ Binder å®žçŽ°ï¼Œé€‚ç”¨äºŽä¸€å¯¹å¤šè¿›ç¨‹é—´æ•°æ®å…±äº« Socketï¼šTCPã€UDPï¼Œé€‚ç”¨äºŽç½‘ç»œæ•°æ®äº¤æ¢ Android ç³»ç»Ÿå¯åŠ¨æµç¨‹ æŒ‰ç”µæºé”® -&gt; åŠ è½½å¼•å¯¼ç¨‹åº BootLoader åˆ° RAM -&gt; æ‰§è¡Œ BootLoader ç¨‹åºå¯åŠ¨å†…æ ¸ -&gt; å¯åŠ¨ init è¿›ç¨‹ -&gt; å¯åŠ¨ Zygote å’Œå„ç§å®ˆæŠ¤è¿›ç¨‹ -&gt; å¯åŠ¨ System Server æœåŠ¡è¿›ç¨‹å¼€å¯ AMSã€WMS ç­‰ -&gt; å¯åŠ¨ Launcher åº”ç”¨è¿›ç¨‹ #### App å¯åŠ¨æµç¨‹ Launcher ä¸­ç‚¹å‡»ä¸€ä¸ªåº”ç”¨å›¾æ ‡ -&gt; é€šè¿‡ AMS æŸ¥æ‰¾åº”ç”¨è¿›ç¨‹ï¼Œè‹¥ä¸å­˜åœ¨å°±é€šè¿‡ Zygote è¿›ç¨‹ fork è¿›ç¨‹ä¿æ´» è¿›ç¨‹ä¼˜å…ˆçº§ï¼š1.å‰å°è¿›ç¨‹ ï¼›2.å¯è§è¿›ç¨‹ï¼›3.æœåŠ¡è¿›ç¨‹ï¼›4.åŽå°è¿›ç¨‹ï¼›5.ç©ºè¿›ç¨‹ è¿›ç¨‹è¢« kill åœºæ™¯ï¼š1.åˆ‡åˆ°åŽå°å†…å­˜ä¸è¶³æ—¶è¢«æ€ï¼›2.åˆ‡åˆ°åŽå°åŽ‚å•†çœç”µæœºåˆ¶æ€æ­»ï¼›3.ç”¨æˆ·ä¸»åŠ¨æ¸…ç† ä¿æ´»æ–¹å¼ï¼š 1.Activity ææƒï¼šæŒ‚ä¸€ä¸ª 1åƒç´  Activity å°†è¿›ç¨‹ä¼˜å…ˆçº§æé«˜åˆ°å‰å°è¿›ç¨‹ 2.Service ææƒï¼šå¯åŠ¨ä¸€ä¸ªå‰å°æœåŠ¡ï¼ˆAPI&gt;18ä¼šæœ‰æ­£åœ¨è¿è¡Œé€šçŸ¥æ ï¼‰ 3.å¹¿æ’­æ‹‰æ´» 4.Service æ‹‰æ´» 5.JobScheduler å®šæ—¶ä»»åŠ¡æ‹‰æ´» 6.åŒè¿›ç¨‹æ‹‰æ´» ç½‘ç»œä¼˜åŒ–åŠæ£€æµ‹ é€Ÿåº¦ï¼š1.GZIP åŽ‹ç¼©ï¼ˆokhttp è‡ªåŠ¨æ”¯æŒï¼‰ï¼›2.Protocol Buffer æ›¿ä»£ jsonï¼›3.ä¼˜åŒ–å›¾ç‰‡/æ–‡ä»¶æµé‡ï¼›4.IP ç›´è¿žçœåŽ» DNS è§£æžæ—¶é—´ æˆåŠŸçŽ‡ï¼š1.å¤±è´¥é‡è¯•ç­–ç•¥ï¼› æµé‡ï¼š1.GZIP åŽ‹ç¼©ï¼ˆokhttp è‡ªåŠ¨æ”¯æŒï¼‰ï¼›2.Protocol Buffer æ›¿ä»£ jsonï¼›3.ä¼˜åŒ–å›¾ç‰‡/æ–‡ä»¶æµé‡ï¼›5.æ–‡ä»¶ä¸‹è½½æ–­ç‚¹ç»­ä¼  ï¼›6.ç¼“å­˜ åè®®å±‚çš„ä¼˜åŒ–ï¼Œæ¯”å¦‚æ›´ä¼˜çš„ http ç‰ˆæœ¬ç­‰ ç›‘æŽ§ï¼šCharles æŠ“åŒ…ã€Network Monitor ç›‘æŽ§æµé‡ UIå¡é¡¿ä¼˜åŒ– å‡å°‘å¸ƒå±€å±‚çº§åŠæŽ§ä»¶å¤æ‚åº¦ï¼Œé¿å…è¿‡åº¦ç»˜åˆ¶ ä½¿ç”¨ includeã€mergeã€viewstub ä¼˜åŒ–ç»˜åˆ¶è¿‡ç¨‹ï¼Œé¿å…åœ¨ Draw ä¸­é¢‘ç¹åˆ›å»ºå¯¹è±¡ã€åšè€—æ—¶æ“ä½œ å†…å­˜æ³„æ¼åœºæ™¯åŠè§„é¿ 1.é™æ€å˜é‡ã€å•ä¾‹å¼ºå¼•è·Ÿç”Ÿå‘½å‘¨æœŸç›¸å…³çš„æ•°æ®æˆ–èµ„æºï¼ŒåŒ…æ‹¬ EventBus 2.æ¸¸æ ‡ã€IO æµç­‰èµ„æºå¿˜è®°ä¸»åŠ¨é‡Šæ”¾ 3.ç•Œé¢ç›¸å…³åŠ¨ç”»åœ¨ç•Œé¢é”€æ¯æ—¶åŠæ—¶æš‚åœ 4.å†…éƒ¨ç±»æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„æ¼* handler å†…éƒ¨ç±»å†…å­˜æ³„æ¼è§„é¿ï¼š1.ä½¿ç”¨é™æ€å†…éƒ¨ç±»+å¼±å¼•ç”¨ 2.ç•Œé¢é”€æ¯æ—¶æ¸…ç©ºæ¶ˆæ¯é˜Ÿåˆ—* æ£€æµ‹ï¼šAndroid Studio Profiler LeakCanary åŽŸç† é€šè¿‡å¼±å¼•ç”¨å’Œå¼•ç”¨é˜Ÿåˆ—ç›‘æŽ§å¯¹è±¡æ˜¯å¦è¢«å›žæ”¶ æ¯”å¦‚ Activity é”€æ¯æ—¶å¼€å§‹ç›‘æŽ§æ­¤å¯¹è±¡ï¼Œæ£€æµ‹åˆ°æœªè¢«å›žæ”¶åˆ™ä¸»åŠ¨ gc ï¼Œç„¶åŽç»§ç»­ç›‘æŽ§ OOM åœºæ™¯åŠè§„é¿ åŠ è½½å¤§å›¾ï¼šå‡å°å›¾ç‰‡ å†…å­˜æ³„æ¼ï¼šè§„é¿å†…å­˜æ³„æ¼ Android æ¨¡å—åŒ–&amp;çƒ­ä¿®å¤&amp;çƒ­æ›´æ–°&amp;æ‰“åŒ…&amp;æ··æ·†&amp;åŽ‹ç¼©Dalvik å’Œ ART Dalvik* è°·æ­Œè®¾è®¡ä¸“ç”¨äºŽ Android å¹³å°çš„ Java è™šæ‹Ÿæœºï¼Œå¯ç›´æŽ¥è¿è¡Œ .dex æ–‡ä»¶ï¼Œé€‚åˆå†…å­˜å’Œå¤„ç†é€Ÿåº¦æœ‰é™çš„ç³»ç»Ÿ* JVM æŒ‡ä»¤é›†æ˜¯åŸºäºŽæ ˆçš„ï¼›Dalvik æŒ‡ä»¤é›†æ˜¯åŸºäºŽå¯„å­˜å™¨çš„ï¼Œä»£ç æ‰§è¡Œæ•ˆçŽ‡æ›´ä¼˜ ART* Dalvik æ¯æ¬¡è¿è¡Œéƒ½è¦å°†å­—èŠ‚ç è½¬æ¢æˆæœºå™¨ç ï¼›ART åœ¨åº”ç”¨å®‰è£…æ—¶å°±ä¼šè½¬æ¢æˆæœºå™¨ç ï¼Œæ‰§è¡Œé€Ÿåº¦æ›´å¿«* ART å­˜å‚¨æœºå™¨ç å ç”¨ç©ºé—´æ›´å¤§ï¼Œç©ºé—´æ¢æ—¶é—´ APK æ‰“åŒ…æµç¨‹ 1.aapt æ‰“åŒ…èµ„æºæ–‡ä»¶ç”Ÿæˆ R.java æ–‡ä»¶ï¼›aidl ç”Ÿæˆ java æ–‡ä»¶ 2.å°† java æ–‡ä»¶ç¼–è¯‘ä¸º class æ–‡ä»¶ 3.å°†å·¥ç¨‹åŠç¬¬ä¸‰æ–¹çš„ class æ–‡ä»¶è½¬æ¢æˆ dex æ–‡ä»¶ 4.å°† dex æ–‡ä»¶ã€soã€ç¼–è¯‘è¿‡çš„èµ„æºã€åŽŸå§‹èµ„æºç­‰æ‰“åŒ…æˆ apk æ–‡ä»¶ 5.ç­¾å 6.èµ„æºæ–‡ä»¶å¯¹é½ï¼Œå‡å°‘è¿è¡Œæ—¶å†…å­˜ App å®‰è£…è¿‡ç¨‹ é¦–å…ˆè¦è§£åŽ‹ APKï¼Œèµ„æºã€soç­‰æ”¾åˆ°åº”ç”¨ç›®å½• Dalvik ä¼šå°† dex å¤„ç†æˆ ODEX ï¼›ART ä¼šå°† dex å¤„ç†æˆ OATï¼› OAT åŒ…å« dex å’Œå®‰è£…æ—¶ç¼–è¯‘çš„æœºå™¨ç  #### ç»„ä»¶åŒ–è·¯ç”±å®žçŽ° ARouteï¼šé€šè¿‡ APT è§£æž @Route ç­‰æ³¨è§£ï¼Œç»“åˆ JavaPoet ç”Ÿæˆè·¯ç”±è¡¨ï¼Œå³è·¯ç”±ä¸Ž Activity çš„æ˜ å°„å…³ç³» éŸ³è§†é¢‘&amp;FFmpeg&amp;æ’­æ”¾å™¨FFmpegåŸºäºŽå‘½ä»¤æ–¹å¼å®žçŽ°äº†ä¸€ä¸ªéŸ³è§†é¢‘ç¼–è¾‘ Appï¼š https://github.com/yhaolpz/FFmpegCmd é›†æˆç¼–è¯‘äº† AACã€MP3ã€H264 ç¼–ç å™¨ æ’­æ”¾å™¨åŽŸç† è§†é¢‘æ’­æ”¾åŽŸç†ï¼šï¼ˆmp4ã€flvï¼‰-&gt; è§£å°è£… -&gt; ï¼ˆmp3/aacã€h264/h265ï¼‰-&gt; è§£ç  -&gt; ï¼ˆpcmã€yuvï¼‰-&gt; éŸ³è§†é¢‘åŒæ­¥ -&gt; æ¸²æŸ“æ’­æ”¾ éŸ³è§†é¢‘åŒæ­¥ï¼š* é€‰æ‹©å‚è€ƒæ—¶é’Ÿæºï¼šéŸ³é¢‘æ—¶é—´æˆ³ã€è§†é¢‘æ—¶é—´æˆ³å’Œå¤–éƒ¨æ—¶é—´ä¸‰è€…é€‰æ‹©ä¸€ä¸ªä½œä¸ºå‚è€ƒæ—¶é’Ÿæºï¼ˆä¸€èˆ¬é€‰æ‹©éŸ³é¢‘ï¼Œå› ä¸ºäººå¯¹éŸ³é¢‘æ›´æ•æ„Ÿï¼Œijk é»˜è®¤ä¹Ÿæ˜¯éŸ³é¢‘ï¼‰* é€šè¿‡ç­‰å¾…æˆ–ä¸¢å¸§å°†è§†é¢‘æµä¸Žå‚è€ƒæ—¶é’Ÿæºå¯¹é½ï¼Œå®žçŽ°åŒæ­¥ IjkPlayer åŽŸç† é›†æˆäº† MediaPlayerã€ExoPlayer å’Œ IjkPlayer ä¸‰ç§å®žçŽ°ï¼Œå…¶ä¸­ IjkPlayer åŸºäºŽ FFmpeg çš„ ffplay éŸ³é¢‘è¾“å‡ºæ–¹å¼ï¼šAudioTrackã€OpenSL ESï¼›è§†é¢‘è¾“å‡ºæ–¹å¼ï¼šNativeWindowã€OpenGL ES]]></content>
      <categories>
        <category>Android</category>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dartè¯­æ³•å­¦ä¹ ]]></title>
    <url>%2Fposts%2Fab669d34.html</url>
    <content type="text"><![CDATA[ç›®å½• å‚è€ƒèµ„æ–™ è¯­è¨€ç‰¹æ€§ å…³é”®å­— å˜é‡ä¸Žå¸¸é‡ æ•°æ®ç±»åž‹ è¿ç®—ç¬¦ operators æŽ§åˆ¶æµç¨‹è¯­å¥ å¼‚å¸¸ Exceptions å‡½æ•° Function ç±» Class ç±»-æ–¹æ³• ç±»-æŠ½è±¡ç±» ç±»-éšå¼æŽ¥å£ ç±»-æ‰©å±•ä¸€ä¸ªç±»ï¼ˆé‡å†™ï¼‰ åº“å’Œå¯è§æ€§ å¼‚æ­¥æ”¯æŒ å‚è€ƒèµ„æ–™ https://www.dartlang.org/guides/language/language-tour ã€å®˜æ–¹æ–‡æ¡£ã€‘ http://wiki.jikexueyuan.com/project/dart-language-tour/classes.html ã€æžå®¢å­¦é™¢ã€‘ https://www.jianshu.com/p/3d927a7bf020 ã€authorï¼šAWeiLoveAndroidã€‘ https://www.jianshu.com/p/a7cc623132b0 ã€authorï¼šsoojadeã€‘ https://www.jianshu.com/p/78d317b2ea79 ã€authorï¼šä¼˜è…¾çˆ±ä¹ã€‘ è¯­è¨€ç‰¹æ€§ Dartæ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯å¯¹è±¡ï¼Œ å³ä½¿æ˜¯æ•°å­—numbersã€å‡½æ•°functionã€nullä¹Ÿéƒ½æ˜¯å¯¹è±¡ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿è‡ªObjectç±»ã€‚ DartåŠ¨æ€ç±»åž‹è¯­è¨€, å°½é‡ç»™å˜é‡å®šä¹‰ä¸€ä¸ªç±»åž‹ï¼Œä¼šæ›´å®‰å…¨ï¼Œæ²¡æœ‰æ˜¾ç¤ºå®šä¹‰ç±»åž‹çš„å˜é‡åœ¨ debug æ¨¡å¼ä¸‹ä¼šç±»åž‹ä¼šæ˜¯ dynamic(åŠ¨æ€çš„)ã€‚ Dart åœ¨ running ä¹‹å‰è§£æžä½ çš„æ‰€æœ‰ä»£ç ï¼ŒæŒ‡å®šæ•°æ®ç±»åž‹å’Œç¼–è¯‘æ—¶çš„å¸¸é‡ï¼Œå¯ä»¥æé«˜è¿è¡Œé€Ÿåº¦ã€‚ Dartä¸­çš„ç±»å’ŒæŽ¥å£æ˜¯ç»Ÿä¸€çš„ï¼Œç±»å³æŽ¥å£ï¼Œä½ å¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä¹Ÿå¯ä»¥å®žçŽ°ä¸€ä¸ªç±»ï¼ˆæŽ¥å£ï¼‰ï¼Œè‡ªç„¶ä¹ŸåŒ…å«äº†è‰¯å¥½çš„é¢å‘å¯¹è±¡å’Œå¹¶å‘ç¼–ç¨‹çš„æ”¯æŒã€‚ Dart æä¾›äº†é¡¶çº§å‡½æ•°(å¦‚ï¼šmain())ã€‚ Dart æ²¡æœ‰ publicã€privateã€protected è¿™äº›å…³é”®å­—ï¼Œå˜é‡åä»¥â€_â€å¼€å¤´æ„å‘³ç€å¯¹å®ƒçš„ lib æ˜¯ç§æœ‰çš„ã€‚ æ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡éƒ½ä¼šè¢«èµ‹äºˆé»˜è®¤å€¼ nullã€‚ finalçš„å€¼åªèƒ½è¢«è®¾å®šä¸€æ¬¡ã€‚const æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶çš„å¸¸é‡ï¼Œå¯ä»¥é€šè¿‡ const æ¥åˆ›å»ºå¸¸é‡å€¼ï¼Œvar c=const[];ï¼Œè¿™é‡Œ c è¿˜æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåªæ˜¯è¢«èµ‹å€¼äº†ä¸€ä¸ªå¸¸é‡å€¼ï¼Œå®ƒè¿˜æ˜¯å¯ä»¥èµ‹å…¶å®ƒå€¼ã€‚å®žä¾‹å˜é‡å¯ä»¥æ˜¯ finalï¼Œä½†ä¸èƒ½æ˜¯ constã€‚ ç¼–ç¨‹è¯­è¨€å¹¶ä¸æ˜¯å­¤ç«‹å­˜åœ¨çš„ï¼ŒDartä¹Ÿæ˜¯è¿™æ ·ï¼Œä»–ç”±è¯­è¨€è§„èŒƒã€è™šæ‹Ÿæœºã€ç±»åº“å’Œå·¥å…·ç­‰ç»„æˆï¼š SDKï¼šSDK åŒ…å« Dart VMã€dart2jsã€Pubã€åº“å’Œå·¥å…·ã€‚ Dartiumï¼šå†…åµŒ Dart VM çš„ Chromium ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­ç›´æŽ¥æ‰§è¡Œ dart ä»£ç ã€‚ Dart2jsï¼šå°† Dart ä»£ç ç¼–è¯‘ä¸º JavaScript çš„å·¥å…·ã€‚ Dart Editorï¼šåŸºäºŽ Eclipse çš„å…¨åŠŸèƒ½ IDEï¼Œå¹¶åŒ…å«ä»¥ä¸Šæ‰€æœ‰å·¥å…·ã€‚æ”¯æŒä»£ç è¡¥å…¨ã€ä»£ç å¯¼èˆªã€å¿«é€Ÿä¿®æ­£ã€é‡æž„ã€è°ƒè¯•ç­‰åŠŸèƒ½ã€‚ å…³é”®å­—ï¼ˆ56ä¸ªï¼‰ å…³é”®å­— - - - abstract do import super as dynamic in switch assert else interface sync* enum implements is this async* export library throw await external mixin true break extends new try case factory null typedef catch false operator var class final part void const finally rethrow while continue for return with covariant get set yield* default if static deferred å˜é‡ä¸Žå¸¸é‡ å˜é‡å£°æ˜Žä¸Žåˆå§‹åŒ– è°ƒç”¨çš„å˜é‡nameåŒ…å«å¯¹Stringå€¼ä¸ºâ€œå¼ ä¸‰â€ çš„å¯¹è±¡çš„å¼•ç”¨ï¼ŒnameæŽ¨æ–­å˜é‡çš„ç±»åž‹æ˜¯Stringï¼Œä½†å¯ä»¥é€šè¿‡æŒ‡å®šå®ƒæ¥æ›´æ”¹è¯¥ç±»åž‹ï¼Œå¦‚æžœå¯¹è±¡ä¸é™äºŽå•ä¸€ç±»åž‹ï¼ˆæ²¡æœ‰æ˜Žç¡®çš„ç±»åž‹ï¼‰ï¼Œè¯·ä½¿ç”¨Objectæˆ–dynamicå…³é”®å­—ã€‚ 1234567// æ²¡æœ‰æ˜Žç¡®ç±»åž‹ï¼Œç¼–è¯‘çš„æ—¶å€™æ ¹æ®å€¼æ˜Žç¡®ç±»åž‹var name = â€˜Bobâ€™; Object name = 'å¼ ä¸‰';dynamic name = 'æŽå››';// æ˜¾ç¤ºå£°æ˜Žå°†è¢«æŽ¨æ–­ç±»åž‹, å¯ä»¥ä½¿ç”¨Stringæ˜¾ç¤ºå£°æ˜Žå­—ç¬¦ä¸²ç±»åž‹String name = 'Bob' ; é»˜è®¤å€¼ æœªåˆå§‹åŒ–çš„å˜é‡çš„åˆå§‹å€¼ä¸ºnullï¼ˆåŒ…æ‹¬æ•°å­—ï¼‰ï¼Œå› æ­¤æ•°å­—ã€å­—ç¬¦ä¸²éƒ½å¯ä»¥è°ƒç”¨å„ç§æ–¹æ³• 12345//æµ‹è¯• æ•°å­—ç±»åž‹çš„åˆå§‹å€¼æ˜¯ä»€ä¹ˆ?int lineCount;// ä¸ºfalseçš„æ—¶å€™æŠ›å‡ºå¼‚å¸¸assert(lineCount == null);print(lineCount); //æ‰“å°ç»“æžœä¸ºnullï¼Œè¯æ˜Žæ•°å­—ç±»åž‹åˆå§‹åŒ–å€¼æ˜¯null final and const å¦‚æžœæ‚¨ä»Žæœªæ‰“ç®—æ›´æ”¹ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆä½¿ç”¨ final æˆ– constï¼Œä¸æ˜¯varï¼Œä¹Ÿä¸æ˜¯ä¸€ä¸ªç±»åž‹ã€‚ ä¸€ä¸ª final å˜é‡åªèƒ½è¢«åˆå§‹åŒ–ä¸€æ¬¡; constå˜é‡æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡ï¼Œ(Constå˜é‡æ˜¯éšå¼çš„final) finalçš„é¡¶çº§æˆ–ç±»å˜é‡åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è¢«åˆå§‹åŒ–ã€‚ è¢«finalä¿®é¥°çš„é¡¶çº§å˜é‡æˆ–ç±»å˜é‡åœ¨ç¬¬ä¸€æ¬¡å£°æ˜Žçš„æ—¶å€™å°±éœ€è¦åˆå§‹åŒ–ã€‚ 12// The final variable 'outSideFinalName' must be initialized.final String outSideFinalName è¢«finalæˆ–è€…constä¿®é¥°çš„å˜é‡ï¼Œå˜é‡ç±»åž‹å¯ä»¥çœç•¥ï¼Œå»ºè®®æŒ‡å®šæ•°æ®ç±»åž‹ã€‚ 123456//å¯ä»¥çœç•¥Stringè¿™ä¸ªç±»åž‹å£°æ˜Žfinal name = "Bob";final String name1 = "å¼ ä¸‰";const name2 = "alex";const String name3 = "æŽå››"; è¢« final æˆ– const ä¿®é¥°çš„å˜é‡æ— æ³•å†åŽ»ä¿®æ”¹å…¶å€¼ã€‚ 123456789final String outSideFinalName = "Alex";// outSideFinalName', a final variable, can only be set once// ä¸€ä¸ªfinalå˜é‡ï¼Œåªèƒ½è¢«è®¾ç½®ä¸€æ¬¡ã€‚outSideFinalName = "Bill";const String outSideName = 'Bill';// è¿™æ ·å†™ï¼Œç¼–è¯‘å™¨æç¤ºï¼šConstant variables can't be assigned a value// constå¸¸é‡ä¸èƒ½èµ‹å€¼// outSideName = "å°ç™½"; flnal æˆ–è€… const ä¸èƒ½å’Œ var åŒæ—¶ä½¿ç”¨ 12345// Members can't be declared to be both 'const' and 'var'const var String outSideName = 'Bill';// Members can't be declared to be both 'final' and 'var'final var String name = 'Lili'; å¸¸é‡å¦‚æžœæ˜¯ç±»çº§åˆ«çš„ï¼Œè¯·ä½¿ç”¨ static const 1234567// å¸¸é‡å¦‚æžœæ˜¯ç±»çº§åˆ«çš„ï¼Œè¯·ä½¿ç”¨ static conststatic const String name3 = 'Tom';// è¿™æ ·å†™ä¿å­˜// Only static fields can be declared as const// åªæœ‰é™æ€å­—æ®µå¯ä»¥å£°æ˜Žä¸ºconst//const String name3 = 'Tom'; å¸¸é‡çš„è¿ç®— 12345const speed = 100; //é€Ÿåº¦ï¼ˆkm/hï¼‰const double distance = 2.5 * speed; // è·ç¦» = æ—¶é—´ * é€Ÿåº¦ final speed2 = 100; //é€Ÿåº¦ï¼ˆkm/hï¼‰final double distance2 = 2.5 * speed2; // è·ç¦» = æ—¶é—´ * é€Ÿåº¦ constå…³é”®å­—ä¸åªæ˜¯å£°æ˜Žå¸¸æ•°å˜é‡ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å®ƒæ¥åˆ›å»ºå¸¸é‡å€¼ï¼Œä»¥åŠå£°æ˜Žåˆ›å»ºå¸¸é‡å€¼çš„æž„é€ å‡½æ•°ï¼Œä»»ä½•å˜é‡éƒ½å¯ä»¥æœ‰ä¸€ä¸ªå¸¸é‡å€¼ã€‚ 123456789101112131415// æ³¨æ„: [] åˆ›å»ºçš„æ˜¯ä¸€ä¸ªç©ºçš„listé›†åˆ// const []åˆ›å»ºä¸€ä¸ªç©ºçš„ã€ä¸å¯å˜çš„åˆ—è¡¨ï¼ˆEILï¼‰ã€‚var varList = const []; // varList å½“å‰æ˜¯ä¸€ä¸ªEILfinal finalList = const []; // finalListä¸€ç›´æ˜¯EILconst constList = const []; // constList æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å¸¸é‡çš„EIL // å¯ä»¥æ›´æ”¹éžfinal,éžconstå˜é‡çš„å€¼// å³ä½¿å®ƒæ›¾ç»å…·æœ‰constå€¼varList = ["haha"]; // ä¸èƒ½æ›´æ”¹finalå˜é‡æˆ–constå˜é‡çš„å€¼// è¿™æ ·å†™ï¼Œç¼–è¯‘å™¨æç¤ºï¼ša final variable, can only be set once// finalList = ["haha"];// è¿™æ ·å†™ï¼Œç¼–è¯‘å™¨æç¤ºï¼šConstant variables can't be assigned a value // constList = ["haha"]; åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ï¼Œè¯¥è¿ç®—ç¬¦çš„æ“ä½œæ•°å¿…é¡»ä¸ºâ€™boolâ€™ã€â€™numâ€™ã€â€™Stringâ€™æˆ–â€™nullâ€™, constå¸¸é‡å¿…é¡»ç”¨conatç±»åž‹çš„å€¼åˆå§‹åŒ–ã€‚ 12345678910111213141516171819202122const String outSideName = 'Bill';final String outSideFinalName = 'Alex';const String outSideName2 = 'Tom';const aConstList = const ['1', '2', '3'];// In constant expressions, operands of this operator must be of type 'bool', 'num', 'String' or 'null'// åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ï¼Œè¯¥è¿ç®—ç¬¦çš„æ“ä½œæ•°å¿…é¡»ä¸º'bool'ã€'num'ã€'String'æˆ–'null'ã€‚const validConstString = '$outSideName $outSideName2 $aConstList';// Const variables must be initialized with a constant value// constå¸¸é‡å¿…é¡»ç”¨conatç±»åž‹çš„å€¼åˆå§‹åŒ–const validConstString = '$outSideName $outSideName2 $outSideFinalName';var outSideVarName='Cathy';// Const variables must be initialized with a constant value.// constå¸¸é‡å¿…é¡»ç”¨conatç±»åž‹çš„å€¼åˆå§‹åŒ–const validConstString = '$outSideName $outSideName2 $outSideVarName';// æ­£ç¡®å†™æ³•const String outSideConstName = 'Joy';const validConstString = '$outSideName $outSideName2 $outSideConstName'; æ•°æ®ç±»åž‹ num num æ˜¯æ•°å­—ç±»åž‹çš„çˆ¶ç±»ï¼Œæœ‰ä¸¤ä¸ªå­ç±» int å’Œ doubleã€‚ int æ ¹æ®å¹³å°çš„ä¸åŒï¼Œæ•´æ•°å€¼ä¸å¤§äºŽ64ä½ã€‚åœ¨Dart VMä¸Šï¼Œå€¼å¯ä»¥ä»Ž-263åˆ°263 - 1ï¼Œç¼–è¯‘æˆJavaScriptçš„Dartä½¿ç”¨JavaScriptä»£ç ï¼Œå…è®¸å€¼ä»Ž-253åˆ°253 - 1ã€‚ double 64ä½ï¼ˆåŒç²¾åº¦ï¼‰æµ®ç‚¹æ•°ï¼Œå¦‚IEEE 754æ ‡å‡†æ‰€è§„å®šã€‚ 123456789101112131415161718192021222324252627282930313233int a = 1;print(a);double b = 1.12;print(b);// String -&gt; intint one = int.parse('1');// è¾“å‡º3print(one + 2);// String -&gt; doublevar onePointOne = double.parse('1.1');// è¾“å‡º3.1print(onePointOne + 2); // int -&gt; StringString oneAsString = 1.toString();// The argument type 'int' can't be assigned to the parameter type 'String'//print(oneAsString + 2);// è¾“å‡º 1 + 2print('$oneAsString + 2');// è¾“å‡º 1 2print('$oneAsString 2'); // double -&gt; String æ³¨æ„æ‹¬å·ä¸­è¦æœ‰å°æ•°ç‚¹ä½æ•°ï¼Œå¦åˆ™æŠ¥é”™String piAsString = 3.14159.toStringAsFixed(2);// æˆªå–ä¸¤ä½å°æ•°, è¾“å‡º3.14print(piAsString);String aString = 1.12618.toStringAsFixed(2);// æ£€æŸ¥æ˜¯å¦å››èˆäº”å…¥ï¼Œè¾“å‡º1.13ï¼Œå‘çŽ°ä¼šåšå››èˆäº”å…¥print(aString); String Darté‡Œé¢çš„Stringæ˜¯ä¸€ç³»åˆ— UTF-16 ä»£ç å•å…ƒã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·æ¥åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ å•å¼•å·æˆ–è€…åŒå¼•å·é‡Œé¢åµŒå¥—ä½¿ç”¨å¼•å·ã€‚ ç”¨ æˆ–{} æ¥è®¡ç®—å­—ç¬¦ä¸²ä¸­å˜é‡çš„å€¼ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¦‚æžœæ˜¯è¡¨è¾¾å¼éœ€è¦${è¡¨è¾¾å¼} 123456789101112131415161718192021String singleString = 'abcdddd';String doubleString = "abcsdfafd";String sdString = '$singleString a "bcsd" $&#123;singleString&#125;';String dsString = "abc 'aaa' $sdString";print(sdString);print(dsString); String singleString = 'aaa';String doubleString = "bbb";// å•å¼•å·åµŒå¥—åŒå¼•å·String sdString = '$singleString a "bbb" $&#123;doubleString&#125;';// è¾“å‡º aaa a "bbb" bbbprint(sdString);// åŒå¼•å·åµŒå¥—å•å¼•å·String dsString = "$&#123;singleString.toUpperCase()&#125; abc 'aaa' $doubleString.toUpperCase()";// è¾“å‡º AAA abc 'aaa' bbb.toUpperCase(), å¯ä»¥çœ‹å‡º â€$doubleString.toUpperCase()â€œ æ²¡æœ‰åŠ â€œ&#123;&#125;â€œï¼Œå¯¼è‡´è¾“å‡ºç»“æžœæ˜¯â€bbb.toUpperCase()â€œprint(dsString); bool Dart æ˜¯å¼º bool ç±»åž‹æ£€æŸ¥ï¼Œåªæœ‰bool ç±»åž‹çš„å€¼æ˜¯true æ‰è¢«è®¤ä¸ºæ˜¯trueã€‚ åªæœ‰ä¸¤ä¸ªå¯¹è±¡å…·æœ‰boolç±»åž‹ï¼štrueå’Œfalseï¼Œå®ƒä»¬éƒ½æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ Dartçš„ç±»åž‹å®‰å…¨æ„å‘³ç€æ‚¨ä¸èƒ½ä½¿ç”¨ ifï¼ˆnonbooleanValueï¼‰ æˆ– assertï¼ˆnonbooleanValueï¼‰ ç­‰ä»£ç , ç›¸åDartä½¿ç”¨çš„æ˜¯æ˜¾å¼çš„æ£€æŸ¥å€¼ã€‚ assert æ˜¯è¯­è¨€å†…ç½®çš„æ–­è¨€å‡½æ•°ï¼Œä»…åœ¨æ£€æŸ¥æ¨¡å¼ä¸‹æœ‰æ•ˆ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œ é™¤éžæ¡ä»¶ä¸ºçœŸï¼Œå¦åˆ™ä¼šå¼•å‘å¼‚å¸¸ã€‚(æ–­è¨€å¤±è´¥åˆ™ç¨‹åºç«‹åˆ»ç»ˆæ­¢)ã€‚ 123456789101112131415// æ£€æŸ¥æ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²var fullName = '';assert(fullName.isEmpty);// æ£€æŸ¥0var hitPoints = 0;assert(hitPoints &lt;= 0);// æ£€æŸ¥æ˜¯å¦ä¸ºnullvar unicorn;assert(unicorn == null);// æ£€æŸ¥æ˜¯å¦ä¸ºNaNvar iMeantToDoThis = 0 / 0;assert(iMeantToDoThis.isNaN); Listé›†åˆ åœ¨Dartä¸­ï¼Œæ•°ç»„æ˜¯Listå¯¹è±¡ï¼Œå› æ­¤å¤§å¤šæ•°äººåªæ˜¯å°†å®ƒä»¬ç§°ä¸ºListã€‚ Dart listæ–‡å­—çœ‹èµ·æ¥åƒJavaScriptæ•°ç»„æ–‡å­— 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354//åˆ›å»ºä¸€ä¸ªintç±»åž‹çš„listList list = [10, 7, 23];// è¾“å‡º[10, 7, 23]print(list);// ä½¿ç”¨Listçš„æž„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ·»åŠ intå‚æ•°ï¼Œè¡¨ç¤ºListå›ºå®šé•¿åº¦ï¼Œä¸èƒ½è¿›è¡Œæ·»åŠ  åˆ é™¤æ“ä½œvar fruits = new List();// æ·»åŠ å…ƒç´ fruits.add('apples');// æ·»åŠ å¤šä¸ªå…ƒç´ fruits.addAll(['oranges', 'bananas']);List subFruits = ['apples', 'oranges', 'banans'];// æ·»åŠ å¤šä¸ªå…ƒç´ fruits.addAll(subFruits);// è¾“å‡ºï¼š [apples, oranges, bananas, apples, oranges, banans]print(fruits);// èŽ·å–Listçš„é•¿åº¦print(fruits.length);// èŽ·å–ç¬¬ä¸€ä¸ªå…ƒç´ print(fruits.first);// èŽ·å–å…ƒç´ æœ€åŽä¸€ä¸ªå…ƒç´ print(fruits.last);// åˆ©ç”¨ç´¢å¼•èŽ·å–å…ƒç´ print(fruits[0]);// æŸ¥æ‰¾æŸä¸ªå…ƒç´ çš„ç´¢å¼•å·print(fruits.indexOf('apples'));// åˆ é™¤æŒ‡å®šä½ç½®çš„å…ƒç´ ï¼Œè¿”å›žåˆ é™¤çš„å…ƒç´ print(fruits.removeAt(0));// åˆ é™¤æŒ‡å®šå…ƒç´ ,æˆåŠŸè¿”å›žtrueï¼Œå¤±è´¥è¿”å›žfalse// å¦‚æžœé›†åˆé‡Œé¢æœ‰å¤šä¸ªâ€œapplesâ€, åªä¼šåˆ é™¤é›†åˆä¸­ç¬¬ä¸€ä¸ªæ”¹å…ƒç´ fruits.remove('apples');// åˆ é™¤æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›žåˆ é™¤çš„å…ƒç´ fruits.removeLast();// åˆ é™¤æŒ‡å®šèŒƒå›´(ç´¢å¼•)å…ƒç´ ï¼Œå«å¤´ä¸å«å°¾fruits.removeRange(start,end);// åˆ é™¤æŒ‡å®šæ¡ä»¶çš„å…ƒç´ (è¿™é‡Œæ˜¯å…ƒç´ é•¿åº¦å¤§äºŽ6)fruits.removeWhere((item) =&gt; item.length &gt;6)ï¼›// åˆ é™¤æ‰€æœ‰çš„å…ƒç´ fruits.clear(); æ³¨æ„äº‹é¡¹ï¼š å¯ä»¥ç›´æŽ¥æ‰“å°liståŒ…æ‹¬listçš„å…ƒç´ ï¼Œlistä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯javaå¿…é¡»éåŽ†æ‰èƒ½æ‰“å°listï¼Œç›´æŽ¥æ‰“å°æ˜¯åœ°å€å€¼ã€‚ å’Œjavaä¸€æ ·listé‡Œé¢çš„å…ƒç´ å¿…é¡»ä¿æŒç±»åž‹ä¸€è‡´ï¼Œä¸ä¸€è‡´å°±ä¼šæŠ¥é”™ã€‚ å’Œjavaä¸€æ ·listçš„è§’æ ‡ä»Ž0å¼€å§‹ã€‚ å¦‚æžœé›†åˆé‡Œé¢æœ‰å¤šä¸ªç›¸åŒçš„å…ƒç´ â€œXâ€, åªä¼šåˆ é™¤é›†åˆä¸­ç¬¬ä¸€ä¸ªæ”¹å…ƒç´  Mapé›†åˆ ä¸€èˆ¬æ¥è¯´ï¼Œmapæ˜¯å°†é”®å’Œå€¼ç›¸å…³è”çš„å¯¹è±¡ã€‚é”®å’Œå€¼éƒ½å¯ä»¥æ˜¯ä»»ä½•ç±»åž‹çš„å¯¹è±¡ã€‚ æ¯ä¸ªé”®åªå‡ºçŽ°ä¸€æ¬¡ï¼Œä½†æ‚¨å¯ä»¥å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„å€¼ã€‚Dartæ”¯æŒmapç”±mapæ–‡å­—å’Œmapç±»åž‹æä¾›ã€‚ åˆå§‹åŒ–Mapæ–¹å¼ä¸€ï¼š ç›´æŽ¥å£°æ˜Žï¼Œç”¨{}è¡¨ç¤ºï¼Œé‡Œé¢å†™keyå’Œvalueï¼Œæ¯ç»„é”®å€¼å¯¹ä¸­é—´ç”¨é€—å·éš”å¼€ã€‚ 123456// Two keys in a map literal can't be equal.// Map companys = &#123;'Alibaba': 'é˜¿é‡Œå·´å·´', 'Tencent': 'è…¾è®¯', 'baidu': 'ç™¾åº¦', 'Alibaba': 'é’‰é’‰', 'Tenect': 'qq-music'&#125;;Map companys = &#123;'Alibaba': 'é˜¿é‡Œå·´å·´', 'Tencent': 'è…¾è®¯', 'baidu': 'ç™¾åº¦'&#125;;// è¾“å‡ºï¼š&#123;Alibaba: é˜¿é‡Œå·´å·´, Tencent: è…¾è®¯, baidu: ç™¾åº¦&#125;print(companys); åˆ›å»ºMapæ–¹å¼äºŒï¼šå…ˆå£°æ˜Žï¼Œå†åŽ»èµ‹å€¼ã€‚ 12345678910111213Map schoolsMap = new Map();schoolsMap['first'] = 'æ¸…åŽ';schoolsMap['second'] = 'åŒ—å¤§';schoolsMap['third'] = 'å¤æ—¦';// æ‰“å°ç»“æžœ &#123;first: æ¸…åŽ, second: åŒ—å¤§, third: å¤æ—¦&#125;print(schoolsMap);var fruits = new Map();fruits["first"] = "apple";fruits["second"] = "banana";fruits["fifth"] = "orange";//æ¢æˆåŒå¼•å·,æ¢æˆvar æ‰“å°ç»“æžœ &#123;first: apple, second: banana, fifth: orange&#125;print(fruits); Map API 12345678910111213141516171819202122232425262728// æŒ‡å®šé”®å€¼å¯¹çš„å‚æ•°ç±»åž‹var aMap = new Map&lt;int, String&gt;();// Mapçš„èµ‹å€¼ï¼Œä¸­æ‹¬å·ä¸­æ˜¯Keyï¼Œè¿™é‡Œå¯ä¸æ˜¯æ•°ç»„aMap[1] = 'å°ç±³';//Mapä¸­çš„é”®å€¼å¯¹æ˜¯å”¯ä¸€çš„//åŒSetä¸åŒï¼Œç¬¬äºŒæ¬¡è¾“å…¥çš„Keyå¦‚æžœå­˜åœ¨ï¼ŒValueä¼šè¦†ç›–ä¹‹å‰çš„æ•°æ®aMap[1] = 'alibaba';// mapé‡Œé¢çš„valueå¯ä»¥ç›¸åŒaMap[2] = 'alibaba';// mapé‡Œé¢valueå¯ä»¥ä¸ºç©ºå­—ç¬¦ä¸²aMap[3] = '';// mapé‡Œé¢çš„valueå¯ä»¥ä¸ºnullaMap[4] = null;print(aMap);// æ£€ç´¢Mapæ˜¯å¦å«æœ‰æŸKeyassert(aMap.containsKey(1));//åˆ é™¤æŸä¸ªé”®å€¼å¯¹aMap.remove(1); print(aMap); æ³¨æ„äº‹é¡¹ mapçš„keyç±»åž‹ä¸ä¸€è‡´ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚ æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§ä½ æ·»åŠ å…ƒç´ çš„é¡ºåºé€ä¸ªåŠ å…¥åˆ°mapé‡Œé¢ï¼Œå“ªæ€•ä½ çš„keyï¼Œæ¯”å¦‚åˆ†åˆ«æ˜¯ 1,2,4ï¼Œçœ‹èµ·æ¥æœ‰é—´éš”ï¼Œäº‹å®žä¸Šæ·»åŠ åˆ°mapçš„æ—¶å€™æ˜¯{1:value,2:value,4:value} è¿™ç§å½¢å¼ã€‚ mapé‡Œé¢çš„keyä¸èƒ½ç›¸åŒã€‚ä½†æ˜¯valueå¯ä»¥ç›¸åŒ,valueå¯ä»¥ä¸ºç©ºå­—ç¬¦ä¸²æˆ–è€…ä¸ºnullã€‚ è¿ç®—ç¬¦ æè¿° æ“ä½œç¬¦ ä¸€å…ƒåŽç½®æ“ä½œç¬¦ expr++ expr-- () [] . ?. ä¸€å…ƒå‰ç½®æ“ä½œç¬¦ expr !expr ~expr ++expr --expr ä¹˜é™¤ * / % ~/ åŠ å‡ + - ä½ç§» &lt;&lt; &gt;&gt; æŒ‰ä½ä¸Ž &amp; æŒ‰ä½æˆ– æŒ‰ä½å¼‚æˆ– ^ é€»è¾‘ä¸Ž &amp;&amp; é€»è¾‘æˆ– å…³ç³»å’Œç±»åž‹åˆ¤æ–­ &gt;= &gt; &lt;= &lt; as is is! ç­‰ == != å¦‚æžœä¸ºç©º ?? æ¡ä»¶è¡¨è¾¾å¼ expr1 ? expr2 : expr3 èµ‹å€¼ = *= /= ~/= %= += -= &lt;&lt;= &gt;&gt;= &amp;= ^= = ??= çº§è” .. æµç¨‹æŽ§åˆ¶è¯­å¥ï¼ˆControl flow statementsï¼‰ ifâ€¦else for while do-whild break continue switchâ€¦case assertï¼ˆä»…åœ¨checkedæ¨¡å¼æœ‰æ•ˆï¼‰ å¼‚å¸¸ï¼ˆExceptionsï¼‰ throw æŠ›å‡ºå›ºå®šç±»åž‹çš„å¼‚å¸¸ 1throw new FormatException('Expected at least 1 section'); æŠ›å‡ºä»»æ„ç±»åž‹çš„å¼‚å¸¸ 1throw 'Out of llamas!'; å› ä¸ºæŠ›å‡ºå¼‚å¸¸å±žäºŽè¡¨è¾¾å¼ï¼Œå¯ä»¥å°†throwè¯­å¥æ”¾åœ¨=&gt;è¯­å¥ä¸­ï¼Œæˆ–è€…å…¶å®ƒå¯ä»¥å‡ºçŽ°è¡¨è¾¾å¼çš„åœ°æ–¹ 12distanceTo(Point other) =&gt; throw new UnimplementedError(); catch å°†å¯èƒ½å‡ºçŽ°å¼‚å¸¸çš„ä»£ç æ”¾ç½®åˆ°tryè¯­å¥ä¸­ï¼Œå¯ä»¥é€šè¿‡ onè¯­å¥æ¥æŒ‡å®šéœ€è¦æ•èŽ·çš„å¼‚å¸¸ç±»åž‹ï¼Œä½¿ç”¨catchæ¥å¤„ç†å¼‚å¸¸ã€‚ 123456789101112try &#123; breedMoreLlamas();&#125; on OutOfLlamasException &#123; // A specific exception buyMoreLlamas();&#125; on Exception catch (e) &#123; // Anything else that is an exception print('Unknown exception: $e');&#125; catch (e, s) &#123; print('Exception details:\n $e'); print('Stack trace:\n $s');&#125; rethrow rethrowè¯­å¥ç”¨æ¥å¤„ç†ä¸€ä¸ªå¼‚å¸¸ï¼ŒåŒæ—¶å¸Œæœ›è¿™ä¸ªå¼‚å¸¸èƒ½å¤Ÿè¢«å…¶å®ƒè°ƒç”¨çš„éƒ¨åˆ†ä½¿ç”¨ã€‚ 123456789101112131415161718final foo = '';void misbehave() &#123; try &#123; foo = "1"; &#125; catch (e) &#123; print('2'); rethrow;// å¦‚æžœä¸é‡æ–°æŠ›å‡ºå¼‚å¸¸ï¼Œmainå‡½æ•°ä¸­çš„catchè¯­å¥æ‰§è¡Œä¸åˆ° &#125;&#125;void main() &#123; try &#123; misbehave(); &#125; catch (e) &#123; print('3'); &#125;&#125; finally Dartçš„finallyç”¨æ¥æ‰§è¡Œé‚£äº›æ— è®ºå¼‚å¸¸æ˜¯å¦å‘ç”Ÿéƒ½æ‰§è¡Œçš„æ“ä½œã€‚ 12345678910111213141516171819final foo = ''; void misbehave() &#123; try &#123; foo = "1"; &#125; catch (e) &#123; print('2'); &#125;&#125; void main() &#123; try &#123; misbehave(); &#125; catch (e) &#123; print('3'); &#125; finally &#123; print('4'); // å³ä½¿æ²¡æœ‰rethrowæœ€ç»ˆéƒ½ä¼šæ‰§è¡Œåˆ° &#125;&#125; å‡½æ•° Function ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®žçŽ°å‡½æ•°çš„ä¾‹å­ï¼š 123bool isNoble(int atomicNumber) &#123; return _nobleGases[atomicNumber] != null;&#125; main()å‡½æ•° æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½å¿…é¡»æœ‰ä¸€ä¸ªé¡¶å±‚main()å‡½æ•°ï¼Œå®ƒå¯ä»¥ä½œä¸ºåº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚è¯¥main()å‡½æ•°è¿”å›žvoidå¹¶å…·æœ‰Listå‚æ•°çš„å¯é€‰å‚æ•°ã€‚ 12345void main() &#123; querySelector('#sample_text_id') ..text = 'Click me!' ..onClick.listen(reverseText);&#125; çº§è”ç¬¦å·..å…è®¸æ‚¨åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šè¿›è¡Œä¸€ç³»åˆ—æ“ä½œã€‚é™¤äº†å‡½æ•°è°ƒç”¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®¿é—®åŒä¸€å¯¹è±¡ä¸Šçš„å­—æ®µã€‚è¿™é€šå¸¸ä¼šä¸ºæ‚¨èŠ‚çœåˆ›å»ºä¸´æ—¶å˜é‡çš„æ­¥éª¤ï¼Œå¹¶å…è®¸æ‚¨ç¼–å†™æ›´æµç•…çš„ä»£ç ã€‚ 1234querySelector('#confirm') // Get an object. ..text = 'Confirm' // Use its members. ..classes.add('important') ..onClick.listen((e) =&gt; window.alert('Confirmed!')); ä¸Šè¿°ä¾‹å­ç›¸å¯¹äºŽï¼š 1234var button = querySelector('#confirm');button.text = 'Confirm';button.classes.add('important');button.onClick.listen((e) =&gt; window.alert('Confirmed!')); çº§è”ç¬¦å·ä¹Ÿå¯ä»¥åµŒå¥—ä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼š 12345678final addressBook = (AddressBookBuilder() ..name = 'jenny' ..email = 'jenny@example.com' ..phone = (PhoneNumberBuilder() ..number = '415-555-0100' ..label = 'home') .build()) .build(); å½“è¿”å›žå€¼æ˜¯voidæ—¶ä¸èƒ½æž„å»ºçº§è”ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å¤±è´¥ï¼š 123var sb = StringBuffer();sb.write('foo') // è¿”å›žvoid ..write('bar'); // è¿™é‡Œä¼šæŠ¥é”™ æ³¨æ„ï¼š ä¸¥æ ¼åœ°è¯´ï¼Œçº§è”çš„..ç¬¦å·ä¸æ˜¯æ“ä½œç¬¦ã€‚å®ƒåªæ˜¯Dartè¯­æ³•çš„ä¸€éƒ¨åˆ†ã€‚ å¯é€‰å‚æ•° å¯é€‰çš„å‘½åå‚æ•°, å®šä¹‰å‡½æ•°æ—¶ï¼Œä½¿ç”¨{param1, param2, â€¦}ï¼Œç”¨äºŽæŒ‡å®šå‘½åå‚æ•°ã€‚ä¾‹å¦‚ï¼š 123456//è®¾ç½®[bold]å’Œ[hidden]æ ‡å¿—void enableFlags(&#123;bool bold, bool hidden&#125;) &#123; // ... &#125; enableFlags(bold: true, hidden: false); å¯é€‰çš„ä½ç½®å‚æ•°ï¼Œç”¨[]å®ƒä»¬æ ‡è®°ä¸ºå¯é€‰çš„ä½ç½®å‚æ•°ï¼š 1234567String say(String from, String msg, [String device]) &#123; var result = '$from says $msg'; if (device != null) &#123; result = '$result with a $device'; &#125; return result;&#125; ä¸‹é¢æ˜¯ä¸€ä¸ªä¸å¸¦å¯é€‰å‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ä¾‹å­ï¼š 1say('Bob', 'Howdy'); //ç»“æžœæ˜¯ï¼š Bob says Howdy ä¸‹é¢æ˜¯ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ä¾‹å­ï¼š 1say('Bob', 'Howdy', 'smoke signal'); //ç»“æžœæ˜¯ï¼šBob says Howdy with a smoke signal é»˜è®¤å‚æ•° å‡½æ•°å¯ä»¥ä½¿ç”¨=ä¸ºå‘½åå‚æ•°å’Œä½ç½®å‚æ•°å®šä¹‰é»˜è®¤å€¼ã€‚é»˜è®¤å€¼å¿…é¡»æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚å¦‚æžœæ²¡æœ‰æä¾›é»˜è®¤å€¼ï¼Œåˆ™é»˜è®¤å€¼ä¸ºnullã€‚ ä¸‹é¢æ˜¯ä¸ºå‘½åå‚æ•°è®¾ç½®é»˜è®¤å€¼çš„ç¤ºä¾‹: 1234567// è®¾ç½® bold å’Œ hidden æ ‡è®°çš„é»˜è®¤å€¼éƒ½ä¸ºfalsevoid enableFlags2(&#123;bool bold = false, bool hidden = false&#125;) &#123; // ...&#125; // è°ƒç”¨çš„æ—¶å€™ï¼šbold will be true; hidden will be false.enableFlags2(bold: true); ä¸‹ä¸€ä¸ªç¤ºä¾‹æ˜¾ç¤ºå¦‚ä½•ä¸ºä½ç½®å‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼š 1234567891011121314String say(String from, String msg, [String device = 'carrier pigeon', String mood]) &#123; var result = '$from says $msg'; if (device != null) &#123; result = '$result with a $device'; &#125; if (mood != null) &#123; result = '$result (in a $mood mood)'; &#125; return result;&#125; //è°ƒç”¨æ–¹å¼ï¼šsay('Bob', 'Howdy'); //ç»“æžœä¸ºï¼šBob says Howdy with a carrier pigeon; æ‚¨è¿˜å¯ä»¥å°†listæˆ–mapä½œä¸ºé»˜è®¤å€¼ä¼ é€’ã€‚ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰ä¸€ä¸ªå‡½æ•°doStuff()ï¼Œè¯¥å‡½æ•°æŒ‡å®šåˆ—è¡¨å‚æ•°çš„é»˜è®¤listå’Œgiftså‚æ•°çš„é»˜è®¤mapã€‚ 123456789// ä½¿ç”¨list æˆ–è€…mapè®¾ç½®é»˜è®¤å€¼void doStuff( &#123;List&lt;int&gt; list = const [1, 2, 3], Map&lt;String, String&gt; gifts = const &#123;'first': 'paper', 'second': 'cotton', 'third': 'leather' &#125;&#125;) &#123; print('list: $list'); print('gifts: $gifts');&#125; ä½œä¸ºä¸€ä¸ªç±»å¯¹è±¡çš„åŠŸèƒ½ æ‚¨å¯ä»¥å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ã€‚ 12345678void printElement(int element) &#123; print(element);&#125;var list = [1, 2, 3];// æŠŠ printElementå‡½æ•°ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’è¿›æ¥list.forEach(printElement); æ‚¨ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªå‡½æ•°åˆ†é…ç»™ä¸€ä¸ªå˜é‡ã€‚ 12var loudify = (msg) =&gt; '!!! $&#123;msg.toUpperCase()&#125; !!!';assert(loudify('hello') == '!!! HELLO !!!'); åŒ¿åå‡½æ•° å¤§å¤šæ•°å‡½æ•°éƒ½èƒ½è¢«å‘½åä¸ºåŒ¿åå‡½æ•°ï¼Œå¦‚ main() æˆ– printElement()ã€‚æ‚¨è¿˜å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸ºåŒ¿åå‡½æ•°çš„æ— åå‡½æ•°ï¼Œæœ‰æ—¶ä¹Ÿå¯ä»¥åˆ›å»ºlambdaæˆ–é—­åŒ…ã€‚æ‚¨å¯ä»¥ä¸ºå˜é‡åˆ†é…ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä»Žé›†åˆä¸­æ·»åŠ æˆ–åˆ é™¤å®ƒã€‚ ä¸€ä¸ªåŒ¿åå‡½æ•°çœ‹èµ·æ¥ç±»ä¼¼äºŽä¸€ä¸ªå‘½åå‡½æ•° - 0æˆ–æ›´å¤šçš„å‚æ•°ï¼Œåœ¨æ‹¬å·ä¹‹é—´ç”¨é€—å·å’Œå¯é€‰ç±»åž‹æ ‡æ³¨åˆ†éš”ã€‚ ä¸‹é¢çš„ä»£ç å—åŒ…å«å‡½æ•°çš„ä¸»ä½“: 123([[Type] param1[, â€¦]]) &#123; codeBlock; &#125;; ä¸‹é¢çš„ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ªå…·æœ‰æ— ç±»åž‹å‚æ•°çš„åŒ¿åå‡½æ•°itemï¼Œè¯¥å‡½æ•°è¢«listä¸­çš„æ¯ä¸ªitemè°ƒç”¨ï¼Œè¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«æŒ‡å®šç´¢å¼•å¤„çš„å€¼ã€‚ 1234var list = ['apples', 'bananas', 'oranges'];list.forEach((item) &#123; print('$&#123;list.indexOf(item)&#125;: $item');&#125;); å¦‚æžœå‡½æ•°åªåŒ…å«ä¸€æ¡è¯­å¥ï¼Œå¯ä»¥ä½¿ç”¨ç®­å¤´ç¬¦å·=&gt;æ¥ç¼©çŸ­å®ƒ, æ¯”å¦‚ä¸Šé¢çš„ä¾‹2å¯ä»¥ç®€å†™æˆï¼š 1list.forEach((item) =&gt; print('$&#123;list.indexOf(item)&#125;: $item')); è¿”å›žå€¼ æ‰€æœ‰å‡½æ•°éƒ½è¿”å›žä¸€ä¸ªå€¼ï¼Œå¦‚æžœæ²¡æœ‰æŒ‡å®šè¿”å›žå€¼ï¼Œåˆ™è¯­å¥return nullï¼Œéšå¼åœ°é™„åŠ åˆ°å‡½æ•°ä½“ã€‚ 12foo() &#123;&#125;assert(foo() == null); ç±»ï¼ˆClassesï¼‰ å¯¹è±¡ Dart æ˜¯ä¸€ç§é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå¹¶ä¸”æ”¯æŒåŸºäºŽmixinçš„ç»§æ‰¿æ–¹å¼ã€‚ Dart è¯­è¨€ä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯æŸä¸€ä¸ªç±»çš„å®žä¾‹,æ‰€æœ‰çš„ç±»æœ‰åŒä¸€ä¸ªåŸºç±»â€“Objectã€‚ åŸºäºŽmixinçš„ç»§æ‰¿æ–¹å¼å…·ä½“æ˜¯æŒ‡ï¼šä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿è‡ªå¤šä¸ªçˆ¶ç±»ã€‚ ä½¿ç”¨newè¯­å¥æ¥æž„é€ ä¸€ä¸ªç±»ï¼Œæž„é€ å‡½æ•°çš„åå­—å¯èƒ½æ˜¯ClassNameï¼Œä¹Ÿå¯ä»¥æ˜¯ClassName.identifierï¼Œ ä¾‹å¦‚ï¼š 1234567var jsonData = JSON.decode('&#123;"x":1, "y":2&#125;');// Create a Point using Point().var p1 = new Point(2, 2);// Create a Point using Point.fromJson().var p2 = new Point.fromJson(jsonData); ä½¿ç”¨.ï¼ˆdotï¼‰æ¥è°ƒç”¨å®žä¾‹çš„å˜é‡æˆ–è€…æ–¹æ³•ã€‚ 12345678910var p = new Point(2, 2);// Set the value of the instance variable y.p.y = 3;// Get the value of y.assert(p.y == 3);// Invoke distanceTo() on p.num distance = p.distanceTo(new Point(4, 4)); ä½¿ç”¨?.æ¥ç¡®è®¤å‰æ“ä½œæ•°ä¸ä¸ºç©º, å¸¸ç”¨æ¥æ›¿ä»£. , é¿å…å·¦è¾¹æ“ä½œæ•°ä¸ºnullå¼•å‘å¼‚å¸¸ã€‚ 123456``` // If p is non-null, set its y value to 4. p?.y = 4;``` ä½¿ç”¨constæ›¿ä»£newæ¥åˆ›å»ºç¼–è¯‘æ—¶çš„å¸¸é‡æž„é€ å‡½æ•°ã€‚ 12345``` var p = const ImmutablePoint(2, 2);``` ä½¿ç”¨runtimeTypeæ–¹æ³•ï¼Œåœ¨è¿è¡Œä¸­èŽ·å–å¯¹è±¡çš„ç±»åž‹ã€‚è¯¥æ–¹æ³•å°†è¿”å›žType ç±»åž‹çš„å˜é‡ã€‚ 12345``` print('The type of a is $&#123;a.runtimeType&#125;');``` å®žä¾‹åŒ–å˜é‡(Instance variables) åœ¨ç±»å®šä¹‰ä¸­ï¼Œæ‰€æœ‰æ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡éƒ½ä¼šè¢«åˆå§‹åŒ–ä¸ºnullã€‚ 12345class Point &#123; num x; // Declare instance variable x, initially null. num y; // Declare y, initially null. num z = 0; // Declare z, initially 0.&#125; ç±»å®šä¹‰ä¸­æ‰€æœ‰çš„å˜é‡, Dartè¯­è¨€éƒ½ä¼šéšå¼çš„å®šä¹‰ setter æ–¹æ³•ï¼Œé’ˆå¯¹éžç©ºçš„å˜é‡ä¼šé¢å¤–å¢žåŠ  getter æ–¹æ³•ã€‚ 1234567891011class Point &#123; num x; num y;&#125;main() &#123; var point = new Point(); point.x = 4; // Use the setter method for x. assert(point.x == 4); // Use the getter method for x. assert(point.y == null); // Values default to null.&#125; æž„é€ å‡½æ•°(Constructors) å£°æ˜Žä¸€ä¸ªå’Œç±»åç›¸åŒçš„å‡½æ•°ï¼Œæ¥ä½œä¸ºç±»çš„æž„é€ å‡½æ•°ã€‚ 12345678910class Point &#123; num x; num y; Point(num x, num y) &#123; // There's a better way to do this, stay tuned. this.x = x; this.y = y; &#125;&#125; thiså…³é”®å­—æŒ‡å‘äº†å½“å‰ç±»çš„å®žä¾‹, ä¸Šé¢çš„ä»£ç å¯ä»¥ç®€åŒ–ä¸ºï¼š 12345678class Point &#123; num x; num y; // Syntactic sugar for setting x and y // before the constructor body runs. Point(this.x, this.y);&#125; æž„é€ å‡½æ•°ä¸èƒ½ç»§æ‰¿(Constructors arenâ€™t inherited) Dart è¯­è¨€ä¸­ï¼Œå­ç±»ä¸ä¼šç»§æ‰¿çˆ¶ç±»çš„å‘½åæž„é€ å‡½æ•°ã€‚å¦‚æžœä¸æ˜¾å¼æä¾›å­ç±»çš„æž„é€ å‡½æ•°ï¼Œç³»ç»Ÿå°±æä¾›é»˜è®¤çš„æž„é€ å‡½æ•°ã€‚ å‘½åçš„æž„é€ å‡½æ•°(Named constructors) ä½¿ç”¨å‘½åæž„é€ å‡½æ•°ä»Žå¦ä¸€ç±»æˆ–çŽ°æœ‰çš„æ•°æ®ä¸­å¿«é€Ÿå®žçŽ°æž„é€ å‡½æ•°ã€‚ 123456789101112class Point &#123; num x; num y; Point(this.x, this.y); // å‘½åæž„é€ å‡½æ•°Named constructor Point.fromJson(Map json) &#123; x = json['x']; y = json['y']; &#125;&#125; æž„é€ å‡½æ•°ä¸èƒ½è¢«ç»§æ‰¿ï¼Œçˆ¶ç±»ä¸­çš„å‘½åæž„é€ å‡½æ•°ä¸èƒ½è¢«å­ç±»ç»§æ‰¿ã€‚å¦‚æžœæƒ³è¦å­ç±»ä¹Ÿæ‹¥æœ‰ä¸€ä¸ªçˆ¶ç±»ä¸€æ ·åå­—çš„æž„é€ å‡½æ•°ï¼Œå¿…é¡»åœ¨å­ç±»æ˜¯å®žçŽ°è¿™ä¸ªæž„é€ å‡½æ•°ã€‚ è°ƒç”¨çˆ¶ç±»çš„éžé»˜è®¤æž„é€ å‡½æ•° é»˜è®¤æƒ…å†µä¸‹ï¼Œå­ç±»åªèƒ½è°ƒç”¨çˆ¶ç±»çš„æ— åï¼Œæ— å‚æ•°çš„æž„é€ å‡½æ•°; çˆ¶ç±»çš„æ— åæž„é€ å‡½æ•°ä¼šåœ¨å­ç±»çš„æž„é€ å‡½æ•°å‰è°ƒç”¨; å¦‚æžœinitializer list ä¹ŸåŒæ—¶å®šä¹‰äº†ï¼Œåˆ™ä¼šå…ˆæ‰§è¡Œinitializer list ä¸­çš„å†…å®¹ï¼Œç„¶åŽåœ¨æ‰§è¡Œçˆ¶ç±»çš„æ— åæ— å‚æ•°æž„é€ å‡½æ•°ï¼Œæœ€åŽè°ƒç”¨å­ç±»è‡ªå·±çš„æ— åæ— å‚æ•°æž„é€ å‡½æ•°ã€‚å³ä¸‹é¢çš„é¡ºåºï¼š initializer listï¼ˆåˆå§‹åŒ–åˆ—è¡¨ï¼‰ super classâ€™s no-arg constructorï¼ˆçˆ¶ç±»æ— å‚æ•°æž„é€ å‡½æ•°ï¼‰ main classâ€™s no-arg constructor ï¼ˆä¸»ç±»æ— å‚æ•°æž„é€ å‡½æ•°ï¼‰ å¦‚æžœçˆ¶ç±»ä¸æ˜¾ç¤ºæä¾›æ— åæ— å‚æ•°æž„é€ å‡½æ•°çš„æž„é€ å‡½æ•°ï¼Œåœ¨å­ç±»ä¸­å¿…é¡»æ‰‹æ‰“è°ƒç”¨çˆ¶ç±»çš„ä¸€ä¸ªæž„é€ å‡½æ•°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè°ƒç”¨çˆ¶ç±»çš„æž„é€ å‡½æ•°çš„ä»£ç æ”¾åœ¨å­ç±»æž„é€ å‡½æ•°ååŽï¼Œå­ç±»æž„é€ å‡½æ•°ä½“å‰ï¼Œä¸­é—´ä½¿ç”¨:(colon) åˆ†å‰²ã€‚ 12345678910111213141516171819202122232425262728class Person &#123; String firstName; Person.fromJson(Map data) &#123; print('in Person'); &#125;&#125;class Employee extends Person &#123; // çˆ¶ç±»æ²¡æœ‰æ— å‚æ•°çš„éžå‘½åæž„é€ å‡½æ•°ï¼Œå¿…é¡»æ‰‹åŠ¨è°ƒç”¨ä¸€ä¸ªæž„é€ å‡½æ•° super.fromJson(data) Employee.fromJson(Map data) : super.fromJson(data) &#123; print('in Employee'); &#125;&#125;main() &#123; var emp = new Employee.fromJson(&#123;&#125;); // Prints: // in Person // in Employee if (emp is Person) &#123; // Type check emp.firstName = 'Bob'; &#125; (emp as Person).firstName = 'Bob';&#125; åˆå§‹åŒ–åˆ—è¡¨ é™¤äº†è°ƒç”¨çˆ¶ç±»çš„æž„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åˆå§‹åŒ–åˆ—è¡¨åœ¨å­ç±»çš„æž„é€ å‡½æ•°ä½“å‰ï¼ˆå¤§æ‹¬å·å‰ï¼‰æ¥åˆå§‹åŒ–å®žä¾‹çš„å˜é‡å€¼ï¼Œä½¿ç”¨é€—å·,åˆ†éš”ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213class Point &#123; num x; num y; Point(this.x, this.y); // åˆå§‹åŒ–åˆ—è¡¨åœ¨æž„é€ å‡½æ•°è¿è¡Œå‰è®¾ç½®å®žä¾‹å˜é‡ã€‚ Point.fromJson(Map jsonMap) : x = jsonMap['x'], y = jsonMap['y'] &#123; print('In Point.fromJson(): ($x, $y)'); &#125; &#125; æ³¨æ„ï¼šä¸Šè¿°ä»£ç ï¼Œåˆå§‹åŒ–ç¨‹åºæ— æ³•è®¿é—® this å…³é”®å­—ã€‚ é™æ€æž„é€ å‡½æ•° å¦‚æžœä½ çš„ç±»äº§ç”Ÿçš„å¯¹è±¡æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œä½ å¯ä»¥è®©è¿™äº›å¯¹è±¡æˆä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚ä¸ºæ­¤ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ª const æž„é€ å‡½æ•°å¹¶ç¡®ä¿æ‰€æœ‰çš„å®žä¾‹å˜é‡éƒ½æ˜¯ final çš„ã€‚ 123456class ImmutablePoint &#123; final num x; final num y; const ImmutablePoint(this.x, this.y); static final ImmutablePoint origin = const ImmutablePoint(0, 0);&#125; é‡å®šå‘æž„é€ å‡½æ•° æœ‰æ—¶å€™æž„é€ å‡½æ•°çš„ç›®çš„åªæ˜¯é‡å®šå‘åˆ°è¯¥ç±»çš„å¦ä¸€ä¸ªæž„é€ å‡½æ•°ã€‚é‡å®šå‘æž„é€ å‡½æ•°æ²¡æœ‰å‡½æ•°ä½“ï¼Œä½¿ç”¨å†’å·:åˆ†éš”ã€‚ 1234567891011121314151617class Point &#123; num x; num y; // ä¸»æž„é€ å‡½æ•° Point(this.x, this.y) &#123; print("Point($x, $y)"); &#125; // é‡å®šå‘æž„é€ å‡½æ•°ï¼ŒæŒ‡å‘ä¸»æž„é€ å‡½æ•°ï¼Œå‡½æ•°ä½“ä¸ºç©º Point.alongXAxis(num x) : this(x, 0);&#125;void main() &#123; var p1 = new Point(1, 2); var p2 = new Point.alongXAxis(4);&#125; å¸¸é‡æž„é€ å‡½æ•° å¦‚æžœç±»çš„å¯¹è±¡ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¯ä»¥æž„é€ ä¸€ä¸ªç¼–è¯‘æ—¶çš„å¸¸é‡æž„é€ å‡½æ•°ã€‚å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š å®šä¹‰æ‰€æœ‰çš„å®žä¾‹å˜é‡æ˜¯finalã€‚ ä½¿ç”¨constå£°æ˜Žæž„é€ å‡½æ•°ã€‚ 123456class ImmutablePoint &#123; final num x; final num y; const ImmutablePoint(this.x, this.y); static final ImmutablePoint origin = const ImmutablePoint(0, 0);&#125; å·¥åŽ‚æž„é€ å‡½æ•° å½“å®žçŽ°ä¸€ä¸ªä½¿ç”¨ factory å…³é”®è¯ä¿®é¥°çš„æž„é€ å‡½æ•°æ—¶ï¼Œè¿™ä¸ªæž„é€ å‡½æ•°ä¸å¿…åˆ›å»ºç±»çš„æ–°å®žä¾‹ã€‚ä¾‹å¦‚ï¼Œå·¥åŽ‚æž„é€ å‡½æ•°å¯èƒ½ä»Žç¼“å­˜è¿”å›žå®žä¾‹ï¼Œæˆ–è€…å®ƒå¯èƒ½è¿”å›žå­ç±»åž‹çš„å®žä¾‹ã€‚ ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºä¸€ä¸ªå·¥åŽ‚æž„é€ å‡½æ•°ä»Žç¼“å­˜è¿”å›žçš„å¯¹è±¡ï¼š 1234567891011121314151617181920212223242526class Logger &#123; final String name; bool mute = false; // _cache æ˜¯ä¸€ä¸ªç§æœ‰åº“,å¹¸å¥½åå­—å‰æœ‰ä¸ª _ ã€‚ static final Map&lt;String, Logger&gt; _cache = &lt;String, Logger&gt;&#123;&#125;; factory Logger(String name) &#123; if (_cache.containsKey(name)) &#123; return _cache[name]; &#125; else &#123; final logger = new Logger._internal(name); _cache[name] = logger; return logger; &#125; &#125; Logger._internal(this.name); void log(String msg) &#123; if (!mute) &#123; print(msg); &#125; &#125; &#125; æ³¨æ„ï¼šå·¥åŽ‚æž„é€ å‡½æ•°ä¸èƒ½ç”¨ thisã€‚ æ–¹æ³• æ–¹æ³•å°±æ˜¯ä¸ºå¯¹è±¡æä¾›è¡Œä¸ºçš„å‡½æ•°ã€‚ å®žä¾‹æ–¹æ³• å¯¹è±¡çš„å®žä¾‹æ–¹æ³•å¯ä»¥è®¿é—®å®žä¾‹å˜é‡å’Œ this ã€‚ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„ distanceTo() æ–¹æ³•æ˜¯å®žä¾‹æ–¹æ³•çš„ä¸€ä¸ªä¾‹å­ï¼š 12345678910111213import 'dart:math';class Point &#123; num x; num y; Point(this.x, this.y); num distanceTo(Point other) &#123; var dx = x - other.x; var dy = y - other.y; return sqrt(dx * dx + dy * dy); &#125; &#125; setters å’Œ Getters æ˜¯ä¸€ç§æä¾›å¯¹æ–¹æ³•å±žæ€§è¯»å’Œå†™çš„ç‰¹æ®Šæ–¹æ³•ã€‚æ¯ä¸ªå®žä¾‹å˜é‡éƒ½æœ‰ä¸€ä¸ªéšå¼çš„ getter æ–¹æ³•ï¼Œåˆé€‚çš„è¯å¯èƒ½è¿˜ä¼šæœ‰ setter æ–¹æ³•ã€‚ä½ å¯ä»¥é€šè¿‡å®žçŽ° getters å’Œ setters æ¥åˆ›å»ºé™„åŠ å±žæ€§ï¼Œä¹Ÿå°±æ˜¯ç›´æŽ¥ä½¿ç”¨ get å’Œ set å…³é”®è¯ï¼š 123456789101112131415161718192021class Rectangle &#123; num left; num top; num width; num height; Rectangle(this.left, this.top, this.width, this.height); // å®šä¹‰ä¸¤ä¸ªè®¡ç®—å±žæ€§: right and bottom. num get right =&gt; left + width; set right(num value) =&gt; left = value - width; num get bottom =&gt; top + height; set bottom(num value) =&gt; top = value - height;&#125;main() &#123; var rect = new Rectangle(3, 4, 20, 15); assert(rect.left == 3); rect.right = 12; assert(rect.left == -8);&#125; å€ŸåŠ©äºŽ getter å’Œ setter ï¼Œä½ å¯ä»¥ç›´æŽ¥ä½¿ç”¨å®žä¾‹å˜é‡ï¼Œå¹¶ä¸”åœ¨ä¸æ”¹å˜å®¢æˆ·ä»£ç çš„æƒ…å†µä¸‹æŠŠä»–ä»¬åŒ…è£…æˆæ–¹æ³•ã€‚ æ³¨ï¼š ä¸è®ºæ˜¯å¦æ˜¾å¼åœ°å®šä¹‰äº†ä¸€ä¸ª getterï¼Œç±»ä¼¼å¢žé‡ï¼ˆ++ï¼‰çš„æ“ä½œç¬¦ï¼Œéƒ½èƒ½ä»¥é¢„æœŸçš„æ–¹å¼å·¥ä½œã€‚ä¸ºäº†é¿å…äº§ç”Ÿä»»ä½•å‘ç€ä¸æœŸæœ›çš„æ–¹å‘çš„å½±å“ï¼Œæ“ä½œç¬¦ä¸€æ—¦è°ƒç”¨ getter ï¼Œå°±ä¼šæŠŠä»–çš„å€¼å­˜åœ¨ä¸´æ—¶å˜é‡é‡Œã€‚ æŠ½è±¡æ–¹æ³• Instance ï¼Œ getter å’Œ setter æ–¹æ³•å¯ä»¥æ˜¯æŠ½è±¡çš„ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰ä¸€ä¸ªæŽ¥å£ï¼Œä½†æ˜¯æŠŠå®žçŽ°äº¤ç»™å…¶ä»–çš„ç±»ã€‚è¦åˆ›å»ºä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½¿ç”¨åˆ†å·ï¼ˆï¼›ï¼‰ä»£æ›¿æ–¹æ³•ä½“ï¼š 12345678910abstract class Doer &#123; // ...å®šä¹‰å®žä¾‹å˜é‡å’Œæ–¹æ³•... void doSomething(); // å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚&#125; class EffectiveDoer extends Doer &#123; void doSomething() &#123; // ...æä¾›ä¸€ä¸ªå®žçŽ°ï¼Œæ‰€ä»¥è¿™é‡Œçš„æ–¹æ³•ä¸æ˜¯æŠ½è±¡çš„... &#125;&#125; æžšä¸¾ç±»åž‹ æžšä¸¾ç±»åž‹ï¼Œé€šå¸¸è¢«ç§°ä¸º enumerations æˆ– enums ï¼Œæ˜¯ä¸€ç§ç”¨æ¥ä»£è¡¨ä¸€ä¸ªå›ºå®šæ•°é‡çš„å¸¸é‡çš„ç‰¹æ®Šç±»ã€‚ å£°æ˜Žä¸€ä¸ªæžšä¸¾ç±»åž‹éœ€è¦ä½¿ç”¨å…³é”®å­— enum ï¼š 12345enum Color &#123; red, green, blue&#125; åœ¨æžšä¸¾ä¸­æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ª index getter æ–¹æ³•ï¼Œå®ƒè¿”å›žä¸€ä¸ªåœ¨æžšä¸¾å£°æ˜Žä¸­ä»Ž 0 å¼€å§‹çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€ä¸ªå€¼ç´¢å¼•å€¼ä¸º 0 ï¼Œç¬¬äºŒä¸ªå€¼ç´¢å¼•å€¼ä¸º 1 ã€‚ 123assert(Color.red.index == 0);assert(Color.green.index == 1);assert(Color.blue.index == 2); è¦å¾—åˆ°æžšä¸¾åˆ—è¡¨çš„æ‰€æœ‰å€¼ï¼Œå¯ä½¿ç”¨æžšä¸¾çš„ values å¸¸é‡ã€‚ 12345678910111213141516171819202122232425262728293031323334``` List&lt;Color&gt; colors = Color.values; assert(colors[2] == Color.blue); ```* ä½ å¯ä»¥åœ¨ switch è¯­å¥ ä¸­ä½¿ç”¨æžšä¸¾ã€‚å¦‚æžœ e åœ¨ switch (e) æ˜¯æ˜¾å¼ç±»åž‹çš„æžšä¸¾ï¼Œé‚£ä¹ˆå¦‚æžœä½ ä¸å¤„ç†æ‰€æœ‰çš„æžšä¸¾å€¼å°†ä¼šå¼¹å‡ºè­¦å‘Šï¼š ``` enum Color &#123; red, green, blue &#125; // ... Color aColor = Color.blue; switch (aColor) &#123; case Color.red: print('Red as roses!'); break; case Color.green: print('Green as grass!'); break; default: // Without this, you see a WARNING. print(aColor); // 'Color.blue' &#125; ```***æžšä¸¾ç±»åž‹æœ‰ä»¥ä¸‹é™åˆ¶*** * ä½ ä¸èƒ½åœ¨å­ç±»ä¸­æ··åˆæˆ–å®žçŽ°ä¸€ä¸ªæžšä¸¾ã€‚ * ä½ ä¸èƒ½æ˜¾å¼å®žä¾‹åŒ–ä¸€ä¸ªæžšä¸¾ã€‚ ä¸ºç±»æ·»åŠ ç‰¹å¾ï¼šmixins mixins æ˜¯ä¸€ç§å¤šç±»å±‚æ¬¡ç»“æž„çš„ç±»çš„ä»£ç é‡ç”¨ã€‚ è¦ä½¿ç”¨ mixins ï¼Œåœ¨ with å…³é”®å­—åŽé¢è·Ÿä¸€ä¸ªæˆ–å¤šä¸ª mixin çš„åå­—ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¾ç¤ºäº†ä¸¤ä¸ªä½¿ç”¨mixinsçš„ç±»ï¼š 123456789101112 class Musician extends Performer with Musical &#123; // ... &#125;class Maestro extends Person with Musical, Aggressive, Demented &#123; Maestro(String maestroName) &#123; name = maestroName; canConduct = true; &#125; &#125; è¦å®žçŽ° mixin ï¼Œå°±åˆ›å»ºä¸€ä¸ªç»§æ‰¿ Object ç±»çš„å­ç±»ï¼Œä¸å£°æ˜Žä»»ä½•æž„é€ å‡½æ•°ï¼Œä¸è°ƒç”¨ super ã€‚ä¾‹å¦‚ï¼š 123456789101112131415abstract class Musical &#123; bool canPlayPiano = false; bool canCompose = false; bool canConduct = false; void entertainMe() &#123; if (canPlayPiano) &#123; print('Playing piano'); &#125; else if (canConduct) &#123; print('Waving hands'); &#125; else &#123; print('Humming to self'); &#125; &#125;&#125; ç±»çš„å˜é‡å’Œæ–¹æ³• ä½¿ç”¨ static å…³é”®å­—æ¥å®žçŽ°ç±»å˜é‡å’Œç±»æ–¹æ³•ã€‚ åªæœ‰å½“é™æ€å˜é‡è¢«ä½¿ç”¨æ—¶æ‰è¢«åˆå§‹åŒ–ã€‚ é™æ€å˜é‡, é™æ€å˜é‡ï¼ˆç±»å˜é‡ï¼‰å¯¹äºŽç±»çŠ¶æ€å’Œå¸¸æ•°æ˜¯æœ‰ç”¨çš„ï¼š 123456789class Color &#123; static const red = const Color('red'); // ä¸€ä¸ªæ’å®šçš„é™æ€å˜é‡ final String name; // ä¸€ä¸ªå®žä¾‹å˜é‡ã€‚ const Color(this.name); // ä¸€ä¸ªæ’å®šçš„æž„é€ å‡½æ•°ã€‚&#125; main() &#123; assert(Color.red.name == 'red');&#125; é™æ€æ–¹æ³•, é™æ€æ–¹æ³•ï¼ˆç±»æ–¹æ³•ï¼‰ä¸åœ¨ä¸€ä¸ªå®žä¾‹ä¸Šè¿›è¡Œæ“ä½œï¼Œå› è€Œä¸å¿…è®¿é—® this ã€‚ä¾‹å¦‚ï¼š 1234567891011121314151617181920import 'dart:math'; class Point &#123; num x; num y; Point(this.x, this.y); static num distanceBetween(Point a, Point b) &#123; var dx = a.x - b.x; var dy = a.y - b.y; return sqrt(dx * dx + dy * dy); &#125;&#125; main() &#123; var a = new Point(2, 2); var b = new Point(4, 4); var distance = Point.distanceBetween(a, b); assert(distance &lt; 2.9 &amp;&amp; distance &gt; 2.8);&#125; æ³¨ï¼šè€ƒè™‘åˆ°ä½¿ç”¨é«˜é˜¶å±‚çš„æ–¹æ³•è€Œä¸æ˜¯é™æ€æ–¹æ³•ï¼Œæ˜¯ä¸ºäº†å¸¸ç”¨æˆ–è€…å¹¿æ³›ä½¿ç”¨çš„å·¥å…·å’ŒåŠŸèƒ½ã€‚ ä½ å¯ä»¥å°†é™æ€æ–¹æ³•ä½œä¸ºç¼–è¯‘æ—¶å¸¸é‡ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŠŠé™æ€æ–¹æ³•ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’ç»™é™æ€æž„é€ å‡½æ•°ã€‚ æŠ½è±¡ç±» ä½¿ç”¨ abstract ä¿®é¥°ç¬¦æ¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¯¥ç±»ä¸èƒ½è¢«å®žä¾‹åŒ–ã€‚æŠ½è±¡ç±»åœ¨å®šä¹‰æŽ¥å£çš„æ—¶å€™éžå¸¸æœ‰ç”¨ï¼Œå®žé™…ä¸ŠæŠ½è±¡ä¸­ä¹ŸåŒ…å«ä¸€äº›å®žçŽ°ã€‚å¦‚æžœä½ æƒ³è®©ä½ çš„æŠ½è±¡ç±»è¢«å®žä¾‹åŒ–ï¼Œè¯·å®šä¹‰ä¸€ä¸ª å·¥åŽ‚æž„é€ å‡½æ•° ã€‚ æŠ½è±¡ç±»é€šå¸¸åŒ…å« æŠ½è±¡æ–¹æ³•ã€‚ä¸‹é¢æ˜¯å£°æ˜Žä¸€ä¸ªå«æœ‰æŠ½è±¡æ–¹æ³•çš„æŠ½è±¡ç±»çš„ä¾‹å­ï¼š 123456// è¿™ä¸ªç±»æ˜¯æŠ½è±¡ç±»ï¼Œå› æ­¤ä¸èƒ½è¢«å®žä¾‹åŒ–ã€‚abstract class AbstractContainer &#123; // ...å®šä¹‰æž„é€ å‡½æ•°ï¼ŒåŸŸï¼Œæ–¹æ³•... void updateChildren(); // æŠ½è±¡æ–¹æ³•ã€‚&#125; ä¸‹é¢çš„ç±»ä¸æ˜¯æŠ½è±¡ç±»ï¼Œå› æ­¤å®ƒå¯ä»¥è¢«å®žä¾‹åŒ–ï¼Œå³ä½¿å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼š 12345678910class SpecializedContainer extends AbstractContainer &#123; // ...å®šä¹‰æ›´å¤šæž„é€ å‡½æ•°ï¼ŒåŸŸï¼Œæ–¹æ³•... void updateChildren() &#123; // ...å®žçŽ° updateChildren()... &#125; // æŠ½è±¡æ–¹æ³•é€ æˆä¸€ä¸ªè­¦å‘Šï¼Œä½†æ˜¯ä¸ä¼šé˜»æ­¢å®žä¾‹åŒ–ã€‚ void doSomething();&#125; ç±»-éšå¼æŽ¥å£ æ¯ä¸ªç±»éšå¼çš„å®šä¹‰äº†ä¸€ä¸ªæŽ¥å£ï¼Œå«æœ‰ç±»çš„æ‰€æœ‰å®žä¾‹å’Œå®ƒå®žçŽ°çš„æ‰€æœ‰æŽ¥å£ã€‚å¦‚æžœä½ æƒ³åˆ›å»ºä¸€ä¸ªæ”¯æŒç±» B çš„ API çš„ç±» Aï¼Œä½†åˆä¸æƒ³ç»§æ‰¿ç±» B ï¼Œé‚£ä¹ˆï¼Œç±» A åº”è¯¥å®žçŽ°ç±» B çš„æŽ¥å£ã€‚ ä¸€ä¸ªç±»å®žçŽ°ä¸€ä¸ªæˆ–æ›´å¤šæŽ¥å£é€šè¿‡ç”¨ implements å­å¥å£°æ˜Žï¼Œç„¶åŽæä¾› API æŽ¥å£è¦æ±‚ã€‚ä¾‹å¦‚ï¼š 1234567891011121314151617181920212223242526// ä¸€ä¸ª person ï¼ŒåŒ…å« greet() çš„éšå¼æŽ¥å£ã€‚class Person &#123; // åœ¨è¿™ä¸ªæŽ¥å£ä¸­ï¼Œåªæœ‰åº“ä¸­å¯è§ã€‚ final _name; // ä¸åœ¨æŽ¥å£ä¸­ï¼Œå› ä¸ºè¿™æ˜¯ä¸ªæž„é€ å‡½æ•°ã€‚ Person(this._name); // åœ¨è¿™ä¸ªæŽ¥å£ä¸­ã€‚ String greet(who) =&gt; 'Hello, $who. I am $_name.';&#125; // Person æŽ¥å£çš„ä¸€ä¸ªå®žçŽ°ã€‚class Imposter implements Person &#123; // æˆ‘ä»¬ä¸å¾—ä¸å®šä¹‰å®ƒï¼Œä½†ä¸ç”¨å®ƒã€‚ final _name = ""; String greet(who) =&gt; 'Hi $who. Do you know who I am?';&#125; greetBob(Person person) =&gt; person.greet('bob'); main() &#123; print(greetBob(new Person('kathy'))); print(greetBob(new Imposter()));&#125; è¿™é‡Œæ˜¯å…·ä½“è¯´æ˜Žä¸€ä¸ªç±»å®žçŽ°å¤šä¸ªæŽ¥å£çš„ä¾‹å­ï¼š 123class Point implements Comparable, Location &#123; // ...&#125; ç±»-æ‰©å±•ä¸€ä¸ªç±» ä½¿ç”¨ extends åˆ›å»ºä¸€ä¸ªå­ç±»ï¼ŒåŒæ—¶ supper å°†æŒ‡å‘çˆ¶ç±»ï¼š 123456789101112131415161718class Television &#123; void turnOn() &#123; _illuminateDisplay(); _activateIrSensor(); &#125; // ...&#125; class SmartTelevision extends Television &#123; void turnOn() &#123; super.turnOn(); _bootNetworkInterface(); _initializeMemory(); _upgradeApps(); &#125; // ...&#125; å­ç±»å¯ä»¥é‡è½½å®žä¾‹æ–¹æ³•ï¼Œ getters æ–¹æ³•ï¼Œ setters æ–¹æ³•ã€‚ä¸‹é¢æ˜¯ä¸ªå…³äºŽé‡å†™ Object ç±»çš„æ–¹æ³• noSuchMethod() çš„ä¾‹å­,å½“ä»£ç ä¼å›¾ç”¨ä¸å­˜åœ¨çš„æ–¹æ³•æˆ–å®žä¾‹å˜é‡æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚ 1234567class A &#123; // å¦‚æžœä½ ä¸é‡å†™ noSuchMethod æ–¹æ³•, å°±ç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„æˆå‘˜ï¼Œä¼šå¯¼è‡´NoSuchMethodError é”™è¯¯ã€‚ void noSuchMethod(Invocation mirror) &#123; print('You tried to use a non-existent member:' + '$&#123;mirror.memberName&#125;'); &#125;&#125; ä½ å¯ä»¥ä½¿ç”¨ @override æ³¨é‡Šæ¥è¡¨æ˜Žä½ é‡å†™äº†ä¸€ä¸ªæˆå‘˜ã€‚ 123456class A &#123; @override void noSuchMethod(Invocation mirror) &#123; // ... &#125;&#125; å¦‚æžœä½ ç”¨ noSuchMethod() å®žçŽ°æ¯ä¸€ä¸ªå¯èƒ½çš„ getter æ–¹æ³•ï¼Œsetter æ–¹æ³•å’Œç±»çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ @proxy æ ‡æ³¨æ¥é¿å…è­¦å‘Šã€‚ 123456@proxyclass A &#123; void noSuchMethod(Invocation mirror) &#123; // ... &#125;&#125; åº“å’Œå¯è§æ€§ import,part,libraryæŒ‡ä»¤å¯ä»¥å¸®åŠ©åˆ›å»ºä¸€ä¸ªæ¨¡å—åŒ–çš„ï¼Œå¯å…±äº«çš„ä»£ç åº“ã€‚åº“ä¸ä»…æä¾›äº†APIï¼Œè¿˜æä¾›éšç§å•å…ƒï¼šä»¥ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰å¼€å¤´çš„æ ‡è¯†ç¬¦åªå¯¹å†…éƒ¨åº“å¯è§ã€‚æ¯ä¸ªDartappå°±æ˜¯ä¸€ä¸ªåº“ï¼Œå³ä½¿å®ƒä¸ä½¿ç”¨åº“æŒ‡ä»¤ã€‚ åº“å¯ä»¥åˆ†å¸ƒå¼ä½¿ç”¨åŒ…ã€‚è§ Pub Package and Asset Manager ä¸­æœ‰å…³pub(SDKä¸­çš„ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼‰ã€‚ ä½¿ç”¨åº“ ä½¿ç”¨ import æ¥æŒ‡å®šå¦‚ä½•ä»Žä¸€ä¸ªåº“å‘½åç©ºé—´ç”¨äºŽå…¶ä»–åº“çš„èŒƒå›´ã€‚ ä¾‹å¦‚ï¼ŒDart Webåº”ç”¨ä¸€èˆ¬é‡‡ç”¨è¿™ä¸ªåº“ dart:htmlï¼Œå¯ä»¥è¿™æ ·å¯¼å…¥ï¼š 1import 'dart:html'; å”¯ä¸€éœ€è¦ import çš„å‚æ•°æ˜¯ä¸€ä¸ªæŒ‡å‘åº“çš„ URIã€‚å¯¹äºŽå†…ç½®åº“ï¼ŒURIä¸­å…·æœ‰ç‰¹æ®Šdart:schemeã€‚å¯¹äºŽå…¶ä»–åº“ï¼Œä½ å¯ä»¥ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿè·¯å¾„æˆ–package:schemeã€‚åŒ… packageï¼šscheme specifies libraries ï¼Œå¦‚pubå·¥å…·æä¾›çš„è½¯ä»¶åŒ…ç®¡ç†å™¨åº“ã€‚ä¾‹å¦‚ï¼š 123import 'dart:io';import 'package:mylib/mylib.dart';import 'package:utils/utils.dart'; æŒ‡å®šåº“å‰ç¼€ å¦‚æžœå¯¼å…¥ä¸¤ä¸ªåº“æ˜¯æœ‰å†²çªçš„æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªæˆ–ä¸¤ä¸ªåº“çš„å‰ç¼€ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœ library1 å’Œ library2 éƒ½æœ‰ä¸€ä¸ªå…ƒç´ ç±»ï¼Œé‚£ä¹ˆä½ å¯èƒ½æœ‰è¿™æ ·çš„ä»£ç ï¼š 123456789``` import 'package:lib1/lib1.dart'; import 'package:lib2/lib2.dart' as lib2; // ... var element1 = new Element(); // ä½¿ç”¨lib1é‡Œçš„å…ƒç´  var element2 = new lib2.Element(); // ä½¿ç”¨lib2é‡Œçš„å…ƒç´ ``` å¯¼å…¥éƒ¨åˆ†åº“ å¦‚æžœæƒ³ä½¿ç”¨çš„åº“ä¸€éƒ¨åˆ†ï¼Œä½ å¯ä»¥é€‰æ‹©æ€§å¯¼å…¥åº“ã€‚ä¾‹å¦‚ï¼š 12345// åªå¯¼å…¥fooåº“import 'package:lib1/lib1.dart' show foo; //å¯¼å…¥æ‰€æœ‰é™¤äº†fooimport 'package:lib2/lib2.dart' hide foo; å»¶è¿ŸåŠ è½½åº“ å»¶è¿Ÿ(deferred)åŠ è½½ï¼ˆä¹Ÿç§°ä¸ºå»¶è¿Ÿ(lazy)åŠ è½½ï¼‰å…è®¸åº”ç”¨ç¨‹åºæŒ‰éœ€åŠ è½½åº“ã€‚ä¸‹é¢æ˜¯å½“ä½ å¯èƒ½ä¼šä½¿ç”¨å»¶è¿ŸåŠ è½½æŸäº›æƒ…å†µï¼š ä¸ºäº†å‡å°‘åº”ç”¨ç¨‹åºçš„åˆå§‹å¯åŠ¨æ—¶é—´ï¼› æ‰§è¡ŒA / Bæµ‹è¯•-å°è¯•çš„ç®—æ³•çš„æ›¿ä»£å®žæ–½æ–¹å¼ä¸­ï¼› åŠ è½½å¾ˆå°‘ä½¿ç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¯é€‰çš„å±å¹•å’Œå¯¹è¯æ¡†ã€‚ ä¸ºäº†å»¶è¿ŸåŠ è½½ä¸€ä¸ªåº“ï¼Œä½ å¿…é¡»ä½¿ç”¨ deferred as å…ˆå¯¼å…¥å®ƒã€‚ 1import 'package:deferred/hello.dart' deferred as hello; å½“éœ€è¦åº“æ—¶ï¼Œä½¿ç”¨è¯¥åº“çš„è°ƒç”¨æ ‡è¯†ç¬¦è°ƒç”¨ LoadLibraryï¼ˆï¼‰ã€‚ 1234greet() async &#123; await hello.loadLibrary(); hello.printGreeting();&#125; åœ¨å‰é¢çš„ä»£ç ï¼Œåœ¨åº“åŠ è½½å¥½ä¹‹å‰ï¼Œawaitå…³é”®å­—éƒ½æ˜¯æš‚åœæ‰§è¡Œçš„ã€‚æœ‰å…³ async å’Œ await è§ asynchrony support çš„æ›´å¤šä¿¡æ¯ã€‚ æ‚¨å¯ä»¥åœ¨ä¸€ä¸ªåº“è°ƒç”¨ LoadLibraryï¼ˆï¼‰ å¤šæ¬¡éƒ½æ²¡æœ‰é—®é¢˜ã€‚è¯¥åº“ä¹Ÿåªè¢«åŠ è½½ä¸€æ¬¡ã€‚ å½“æ‚¨ä½¿ç”¨å»¶è¿ŸåŠ è½½ï¼Œè¯·è®°ä½ä»¥ä¸‹å†…å®¹ï¼š å»¶è¿Ÿåº“çš„å¸¸é‡åœ¨å…¶ä½œä¸ºå¯¼å…¥æ–‡ä»¶æ—¶ä¸æ˜¯å¸¸é‡ã€‚è®°ä½ï¼Œè¿™äº›å¸¸é‡ä¸å­˜åœ¨ï¼Œç›´åˆ°è¿Ÿåº“è¢«åŠ è½½å®Œæˆã€‚ ä½ ä¸èƒ½åœ¨å¯¼å…¥æ–‡ä»¶ä¸­ä½¿ç”¨å»¶è¿Ÿåº“å¸¸é‡çš„ç±»åž‹ã€‚ç›¸åï¼Œè€ƒè™‘å°†æŽ¥å£ç±»åž‹ç§»åˆ°åŒæ—¶ç”±å»¶è¿Ÿåº“å’Œå¯¼å…¥æ–‡ä»¶å¯¼å…¥çš„åº“ã€‚ Dartéšå«è°ƒç”¨LoadLibraryï¼ˆï¼‰æ’å…¥åˆ°å®šä¹‰deferred as namespaceã€‚åœ¨è°ƒç”¨LoadLibraryï¼ˆï¼‰å‡½æ•°è¿”å›žä¸€ä¸ªFutureã€‚ åº“çš„å®žçŽ° ç”¨ library æ¥æ¥å‘½ååº“ï¼Œç”¨partæ¥æŒ‡å®šåº“ä¸­çš„å…¶ä»–æ–‡ä»¶ã€‚ æ³¨æ„ï¼šä¸å¿…åœ¨åº”ç”¨ç¨‹åºä¸­ï¼ˆå…·æœ‰é¡¶çº§mainï¼ˆï¼‰å‡½æ•°çš„æ–‡ä»¶ï¼‰ä½¿ç”¨libraryï¼Œä½†è¿™æ ·åšå¯ä»¥è®©ä½ åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æ‰§è¡Œåº”ç”¨ç¨‹åºã€‚ å£°æ˜Žåº“ åˆ©ç”¨library identifierï¼ˆåº“æ ‡è¯†ç¬¦ï¼‰æŒ‡å®šå½“å‰åº“çš„åç§°ï¼š 1234567// å£°æ˜Žåº“ï¼Œåballgamelibrary ballgame; // å¯¼å…¥htmlåº“import 'dart:html'; // ...ä»£ç ä»Žè¿™é‡Œå¼€å§‹... å…³è”æ–‡ä»¶ä¸Žåº“ æ·»åŠ å®žçŽ°æ–‡ä»¶ï¼ŒæŠŠpart fileUriæ”¾åœ¨æœ‰åº“çš„æ–‡ä»¶ï¼Œå…¶ä¸­fileURIæ˜¯å®žçŽ°æ–‡ä»¶çš„è·¯å¾„ã€‚ç„¶åŽåœ¨å®žçŽ°æ–‡ä»¶ä¸­ï¼Œæ·»åŠ éƒ¨åˆ†æ ‡è¯†ç¬¦ï¼ˆpart of identifierï¼‰ï¼Œå…¶ä¸­æ ‡è¯†ç¬¦æ˜¯åº“çš„åç§°ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨çš„ä¸€éƒ¨åˆ†ï¼Œåœ¨ä¸‰ä¸ªæ–‡ä»¶æ¥å®žçŽ°éƒ¨åˆ†åº“ã€‚ ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œballgame.dartï¼Œå£°æ˜Žçƒèµ›åº“ï¼Œå¯¼å…¥å…¶ä»–éœ€è¦çš„åº“ï¼Œå¹¶æŒ‡å®šball.dartå’Œutil.dartæ˜¯æ­¤åº“çš„éƒ¨åˆ†ï¼š 123456789library ballgame; import 'dart:html';// ...å…¶ä»–å¯¼å…¥åœ¨è¿™é‡Œ... part 'ball.dart';part 'util.dart'; // ...ä»£ç ä»Žè¿™é‡Œå¼€å§‹... ç¬¬äºŒä¸ªæ–‡ä»¶ball.dartï¼Œå®žçŽ°äº†çƒèµ›åº“çš„ä¸€éƒ¨åˆ†ï¼š 123part of ballgame; // ...ä»£ç ä»Žè¿™é‡Œå¼€å§‹... ç¬¬ä¸‰ä¸ªæ–‡ä»¶ï¼Œutil.dartï¼Œå®žçŽ°äº†çƒèµ›åº“çš„å…¶ä½™éƒ¨åˆ†ï¼š 123part of ballgame; // ...Code goes here... é‡æ–°å¯¼å‡ºåº“(Re-exporting libraries) 123456789101112131415161718192021222324* å¯ä»¥é€šè¿‡é‡æ–°å¯¼å‡ºéƒ¨åˆ†åº“æˆ–è€…å…¨éƒ¨åº“æ¥ç»„åˆæˆ–é‡æ–°æ‰“åŒ…åº“ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½æœ‰å®žçŽ°ä¸ºä¸€ç»„è¾ƒå°çš„åº“é›†æˆä¸ºä¸€ä¸ªè¾ƒå¤§åº“ã€‚æˆ–è€…ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåº“ï¼Œæä¾›äº†ä»Žå¦ä¸€ä¸ªåº“æ–¹æ³•çš„å­é›†ã€‚ ``` // In french.dart: library french; hello() =&gt; print('Bonjour!'); goodbye() =&gt; print('Au Revoir!'); // In togo.dart: library togo; import 'french.dart'; export 'french.dart' show hello; // In another .dart file: import 'togo.dart'; void main() &#123; hello(); //print bonjour goodbye(); //FAIL &#125; ``` å¼‚æ­¥çš„æ”¯æŒ Dart æ·»åŠ äº†ä¸€äº›æ–°çš„è¯­è¨€ç‰¹æ€§ç”¨äºŽæ”¯æŒå¼‚æ­¥ç¼–ç¨‹ã€‚æœ€é€šå¸¸ä½¿ç”¨çš„ç‰¹æ€§æ˜¯ async æ–¹æ³•å’Œ await è¡¨è¾¾å¼ã€‚Dart åº“å¤§å¤šæ–¹æ³•è¿”å›ž Future å’Œ Stream å¯¹è±¡ã€‚è¿™äº›æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼šå®ƒä»¬åœ¨è®¾ç½®ä¸€ä¸ªå¯èƒ½çš„è€—æ—¶æ“ä½œï¼ˆæ¯”å¦‚ I/O æ“ä½œï¼‰ä¹‹åŽè¿”å›žï¼Œè€Œæ— éœ€ç­‰å¾…æ“ä½œå®Œæˆ å½“ä½ éœ€è¦ä½¿ç”¨ Future æ¥è¡¨ç¤ºä¸€ä¸ªå€¼æ—¶ï¼Œä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ã€‚ ä½¿ç”¨ async å’Œ await ä½¿ç”¨ Future API åŒæ ·çš„ï¼Œå½“ä½ éœ€è¦ä»Ž Stream èŽ·å–å€¼çš„æ—¶å€™ï¼Œä½ æœ‰ä¸¤ä¸ªé€‰æ‹©ã€‚ ä½¿ç”¨ async å’Œä¸€ä¸ªå¼‚æ­¥çš„ for å¾ªçŽ¯ (await for) ä½¿ç”¨ Stream API ä½¿ç”¨ async å’Œ await çš„ä»£ç æ˜¯å¼‚æ­¥çš„ï¼Œä¸è¿‡å®ƒçœ‹èµ·æ¥å¾ˆåƒåŒæ­¥çš„ä»£ç ã€‚æ¯”å¦‚è¿™é‡Œæœ‰ä¸€æ®µä½¿ç”¨ await ç­‰å¾…ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ç»“æžœçš„ä»£ç ï¼š 1await lookUpVersion() è¦ä½¿ç”¨ awaitï¼Œä»£ç å¿…é¡»ç”¨ await æ ‡è®° 12345678checkVersion() async &#123; var version = await lookUpVersion(); if (version == expectedVersion) &#123; // Do something. &#125; else &#123; // Do something else. &#125;&#125; ä½ å¯ä»¥ä½¿ç”¨ try, catch, å’Œ finally æ¥å¤„ç†é”™è¯¯å¹¶ç²¾ç®€ä½¿ç”¨äº† await çš„ä»£ç ã€‚ 12345try &#123; server = await HttpServer.bind(InternetAddress.LOOPBACK_IP_V4, 4044);&#125; catch (e) &#123; // React to inability to bind to the port...&#125; å£°æ˜Žå¼‚æ­¥å‡½æ•° ä¸€ä¸ªå¼‚æ­¥å‡½æ•°æ˜¯ä¸€ä¸ªç”± async ä¿®é¥°ç¬¦æ ‡è®°çš„å‡½æ•°ã€‚è™½ç„¶ä¸€ä¸ªå¼‚æ­¥å‡½æ•°å¯èƒ½åœ¨æ“ä½œä¸Šæ¯”è¾ƒè€—æ—¶ï¼Œä½†æ˜¯å®ƒå¯ä»¥ç«‹å³è¿”å›ž-åœ¨ä»»ä½•æ–¹æ³•ä½“æ‰§è¡Œä¹‹å‰ã€‚ 12345checkVersion() async &#123; // ...&#125; lookUpVersion() async =&gt; /* ... */; åœ¨å‡½æ•°ä¸­æ·»åŠ å…³é”®å­— async ä½¿å¾—å®ƒè¿”å›žä¸€ä¸ª Futureï¼Œæ¯”å¦‚ï¼Œè€ƒè™‘ä¸€ä¸‹è¿™ä¸ªåŒæ­¥å‡½æ•°ï¼Œå®ƒå°†è¿”å›žä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ String lookUpVersionSync() =&gt; â€˜1.0.0â€™; å¦‚æžœä½ æƒ³æ›´æ”¹å®ƒæˆä¸ºå¼‚æ­¥æ–¹æ³•-å› ä¸ºåœ¨ä»¥åŽçš„å®žçŽ°ä¸­å°†ä¼šéžå¸¸è€—æ—¶-å®ƒçš„è¿”å›žå€¼æ˜¯ä¸€ä¸ª Future ã€‚ Future lookUpVersion() async =&gt; â€˜1.0.0â€™; è¯·æ³¨æ„å‡½æ•°ä½“ä¸éœ€è¦ä½¿ç”¨ Future APIï¼Œå¦‚æžœå¿…è¦çš„è¯ Dart å°†ä¼šè‡ªå·±åˆ›å»º Future å¯¹è±¡ ä½¿ç”¨å¸¦ future çš„ await è¡¨è¾¾å¼ ä¸€ä¸ª awaitè¡¨è¾¾å¼å…·æœ‰ä»¥ä¸‹å½¢å¼ await expression åœ¨å¼‚æ­¥æ–¹æ³•ä¸­ä½ å¯ä»¥ä½¿ç”¨ await å¤šæ¬¡ã€‚æ¯”å¦‚ï¼Œä¸‹åˆ—ä»£ç ä¸ºäº†å¾—åˆ°å‡½æ•°çš„ç»“æžœä¸€å…±ç­‰å¾…äº†ä¸‰æ¬¡ã€‚ 123var entrypoint = await findEntrypoint();var exitCode = await runExecutable(entrypoint, args);await flushThenExit(exitCode); åœ¨ await è¡¨è¾¾å¼ä¸­ï¼Œ è¡¨è¾¾å¼ çš„å€¼é€šå¸¸æ˜¯ä¸€ä¸ª Future å¯¹è±¡ï¼›å¦‚æžœä¸æ˜¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼ä¼šè‡ªåŠ¨è½¬ä¸º Futureã€‚è¿™ä¸ª Future å¯¹è±¡è¡¨æ˜Žäº†è¡¨è¾¾å¼åº”è¯¥è¿”å›žä¸€ä¸ªå¯¹è±¡ã€‚await è¡¨è¾¾å¼ çš„å€¼å°±æ˜¯è¿”å›žçš„ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨å¯¹è±¡å¯ç”¨ä¹‹å‰ï¼Œawait è¡¨è¾¾å¼å°†ä¼šä¸€ç›´å¤„äºŽæš‚åœçŠ¶æ€ã€‚ å¦‚æžœ await æ²¡æœ‰èµ·ä½œç”¨ï¼Œè¯·ç¡®è®¤å®ƒæ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ã€‚æ¯”å¦‚ï¼Œåœ¨ä½ çš„ main() å‡½æ•°é‡Œé¢ä½¿ç”¨awaitï¼Œmain() çš„å‡½æ•°ä½“å¿…é¡»è¢« async æ ‡è®°ï¼š 1234567``` main() async &#123; checkVersion(); print('In main: version is $&#123;await lookUpVersion()&#125;'); &#125;``` ç»“åˆ streams ä½¿ç”¨å¼‚æ­¥å¾ªçŽ¯ ä¸€ä¸ªå¼‚æ­¥å¾ªçŽ¯å…·æœ‰ä»¥ä¸‹å½¢å¼ï¼š 123await for (variable declaration in expression) &#123; // Executes each time the stream emits a value.&#125; è¡¨è¾¾å¼ çš„å€¼å¿…é¡»æœ‰Stream ç±»åž‹ï¼ˆæµç±»åž‹ï¼‰ã€‚æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š åœ¨ stream å‘å‡ºä¸€ä¸ªå€¼ä¹‹å‰ç­‰å¾… æ‰§è¡Œ for å¾ªçŽ¯çš„ä¸»ä½“ï¼ŒæŠŠå˜é‡è®¾ç½®ä¸ºå‘å‡ºçš„å€¼ã€‚ é‡å¤ 1 å’Œ 2ï¼Œç›´åˆ° Stream å…³é—­ å¦‚æžœè¦åœæ­¢ç›‘å¬ stream ï¼Œä½ å¯ä»¥ä½¿ç”¨ break æˆ–è€… return è¯­å¥ï¼Œè·³å‡ºå¾ªçŽ¯å¹¶å–æ¶ˆæ¥è‡ª stream çš„è®¢é˜… ã€‚ å¦‚æžœä¸€ä¸ªå¼‚æ­¥ for å¾ªçŽ¯æ²¡æœ‰æ­£å¸¸è¿è¡Œï¼Œè¯·ç¡®è®¤å®ƒæ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ã€‚ æ¯”å¦‚ï¼Œåœ¨åº”ç”¨çš„ main() æ–¹æ³•ä¸­ä½¿ç”¨å¼‚æ­¥çš„ for å¾ªçŽ¯æ—¶ï¼Œmain() çš„æ–¹æ³•ä½“å¿…é¡»è¢« async æ ‡è®°ã€‚ 123456789main() async &#123; ... await for (var request in requestServer) &#123; handleRequest(request); &#125; ...&#125; æ›´å¤šå…³äºŽå¼‚æ­¥ç¼–ç¨‹çš„ä¿¡æ¯ï¼Œè¯·çœ‹ dart:async åº“éƒ¨åˆ†çš„ä»‹ç»ã€‚ä½ ä¹Ÿå¯ä»¥çœ‹æ–‡ç«  [Dart Language Asynchrony Support: Phase 1 ] (https://www.dartlang.org/articles/await-async/) å’Œ Dart Language Asynchrony Support: Phase 2 å’Œ the Dart language specification]]></content>
      <categories>
        <category>Android</category>
        <category>Dart</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Dart</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»ŽsetContentViewå…¥å£ï¼Œå…¨æ–¹ä½åˆ†æžLayoutInflater]]></title>
    <url>%2Fposts%2F61266016.html</url>
    <content type="text"><![CDATA[LayoutInflater ä»‹ç»åœ¨ Android ä¸­ LayoutInflater æ˜¯æ‰®æ¼”ç€å¾ˆé‡è¦çš„è§’è‰²ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¿½ç•¥äº†å®ƒçš„é‡è¦æ€§ï¼Œå› ä¸ºå®ƒçš„é‡è¦æ€§å®Œ å…¨è¢«éšè—èµ·æ¥äº†ï¼Œå¯ä»¥è¯´æ˜¯ç›´æŽ¥éšè—åœ¨äº†Activity , Fragment ç­‰ç»„ä»¶çš„å…‰çŽ¯ä¹‹ä¸‹äº†ã€‚ from(mContext) æºç è§£æžåœ¨ Android ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä»¥ Context èŽ·å–ç³»ç»Ÿçº§åˆ«çš„æœåŠ¡ï¼Œæ¯”å¦‚ AMS, WMS, LayoutInfoater ç­‰ï¼Œè¿™äº›æœåŠ¡ä¼šåœ¨åˆé€‚çš„æ—¶å€™æ³¨å†Œåœ¨ç³»ç»Ÿä¸­ï¼Œåœ¨æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ getSS(String name) é€šè¿‡ç³»ç»Ÿçš„åå­—æ¥èŽ·å–ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼š è¿™é‡Œæˆ‘å°±æ‹¿ Activity setContentView() ä¸¾ä¾‹ 1234@Overridepublic void setContentView(@LayoutRes int layoutResID) &#123; getDelegate().setContentView(layoutResID);&#125; ç»§ç»­è·Ÿä¸‹åŽ»ï¼š 1234/** * Should be called instead of &#123;@link Activity#setContentView(int)&#125;&#125; */public abstract void setContentView(@LayoutRes int resId); è·Ÿä¸‹åŽ»å‘çŽ°æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæˆ‘ä»¬æ‰¾å®ƒçš„å®žçŽ°ç±»ï¼š 123456789@Overridepublic void setContentView(int resId) &#123; ensureSubDecor(); ViewGroup contentParent = (ViewGroup) mSubDecor.findViewById(android.R.id.content); contentParent.removeAllViews(); //é€šè¿‡ LayoutInflater åŠ è½½ XML id LayoutInflater.from(mContext).inflate(resId, contentParent); mOriginalWindowCallback.onContentChanged();&#125; æˆ‘ä»¬åœ¨ AppCompatDelegateImpl ç±»æ‰¾åˆ°äº†å®žçŽ°ç±»ï¼Œçœ¼ç¥žå¥½çš„æ˜¯ä¸æ˜¯å‘çŽ°äº†ä¸Šé¢çš„ LayoutInflater ï¼Œæ²¡é”™æˆ‘ä»¬ Activity æœ€åŽä¹Ÿæ˜¯é€šè¿‡ LayoutInflater è§£æž XML åŠ è½½å¸ƒå±€çš„ï¼Œç»§ç»­è·Ÿ from å‡½æ•°ï¼š 12345678910111213/** * Obtains the LayoutInflater from the given context. */public static LayoutInflater from(Context context) &#123; LayoutInflater LayoutInflater = (LayoutInflater) //é€šè¿‡ Context èŽ·å–æœåŠ¡ context.getSystemService(Context.LAYOUT_INFLATER_SERVICE); if (LayoutInflater == null) &#123; throw new AssertionError("LayoutInflater not found."); &#125; return LayoutInflater;&#125; é€šè¿‡ä¸Šé¢ä»£ç å¯ä»¥çŸ¥é“ï¼ŒLayoutInflater æ˜¯é€šè¿‡ Context çš„ getSystemService(String name) æ¥èŽ·å–åˆ°çš„ã€‚context çš„ getSS å‡½æ•°æ€Žä¹ˆèŽ·å–åˆ°çš„å‹’ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸‹ Context çš„æºç ã€‚ Contextå…¶å®žåœ¨ Applicationï¼ŒActivityï¼ŒService ä¸­éƒ½ä¼šå­˜åœ¨ä¸€ä¸ª Context å¯¹è±¡ï¼Œæˆ‘ä»¬å«å…¶ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªä¸Šä¸‹æ–‡ï¼Œå¯åŠ¨ Activity,Service, æ³¨å†Œä¸€ä¸ªå¹¿æ’­ï¼ŒèŽ·å–ç³»ç»ŸæœåŠ¡ç­‰ç­‰æ“ä½œï¼Œé‚£ä¹ˆ Context æ˜¯æ€Žä¹ˆåˆ›å»ºå‡ºæ¥çš„å‹’ï¼Œå…ˆæ¥çœ‹ä¸€æ®µä»£ç ï¼š 1public abstract class Context &#123;...&#125; Context æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæˆ‘ä»¬æ‰¾ä¸‹å®ƒçš„å®žçŽ°ç±»ï¼Œæˆ‘ä»¬çŸ¥é“åœ¨å¯åŠ¨ Activity çš„æ—¶å€™æœ‰ä¸€ä¸ª Context ä¸Šä¸‹æ–‡ï¼Œå¯åŠ¨ Activity çš„å…¥å£åœ¨ ActivityThread main å‡½æ•°ï¼Œæˆ‘ä»¬å°±ä»Žè¿™é‡Œå¼€å§‹æ‰¾ 1234567891011121314//é€šè¿‡åå°„è°ƒç”¨æ‰§è¡Œçš„public static void main(String[] args) &#123; ... //ä¸»çº¿ç¨‹æ¶ˆæ¯å¾ªçŽ¯ Looper.prepareMainLooper(); //åˆ›å»º ActivityThread å¯¹è±¡ ActivityThread thread = new ActivityThread(); //Application,Activity å…¥å£ thread.attach(false); Looper.loop(); ... throw new RuntimeException("Main thread loop unexpectedly exited");&#125; 1234567891011121314151617181920212223242526private void attach(boolean system) &#123; sCurrentActivityThread = this; mSystemThread = system; //ä¸æ˜¯ç³»ç»Ÿçº§åˆ«çš„åº”ç”¨ if (!system) &#123; ViewRootImpl.addFirstDrawHandler(new Runnable() &#123; @Override public void run() &#123; ensureJitEnabled(); &#125; &#125;); android.ddm.DdmHandleAppName.setAppName("&lt;pre-initialized&gt;", UserHandle.myUserId()); RuntimeInit.setApplicationObject(mAppThread.asBinder()); final IActivityManager mgr = ActivityManager.getService(); try &#123; //é€šè¿‡ IActivityManagerã€‚aidl æ–‡ä»¶ åº•å±‚é€šè¿‡ Binder é€šä¿¡ï¼Œå…³è” Application mgr.attachApplication(mAppThread); &#125; catch (RemoteException ex) &#123; throw ex.rethrowFromSystemServer(); &#125; ... &#125; else &#123; ä»£ç çœç•¥ ....&#125; åœ¨ main æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº† ActivityThread å¯¹è±¡åŽï¼Œè°ƒç”¨äº†å…¶ attach å‡½æ•°ï¼Œå¹¶ä¸”å‚æ•°ä¸º falseã€‚åœ¨ attach å‡½æ•°ä¸­ï¼Œå‚æ•°ä¸º false çš„æƒ…å†µä¸‹æ˜¯å±žäºŽéžç³»ç»Ÿåº”ç”¨ï¼Œä¼šé€šè¿‡ Binder æœºåˆ¶ä¸Ž AMS é€šä¿¡ï¼Œå¹¶ä¸”æœ€ç»ˆè°ƒç”¨ H ç±»çš„ LAUNCH_ACTIVITY - &gt; handleLaunchActivity å‡½æ•°ï¼Œæˆ‘ä»¬çœ‹ä¸‹è¯¥å‡½æ•°çš„å®žçŽ°: 123456789101112/** * *å¯åŠ¨ Activity * @param r * @param customIntent * @param reason */ private void handleLaunchActivity(ActivityClientRecord r, Intent customIntent, String reason) &#123; //å®žæ–½ å¯åŠ¨ Activity çš„å®žä¾‹ Activity a = performLaunchActivity(r, customIntent); &#125; ç»§ç»­è·Ÿï¼š 1234567891011121314151617181920212223242526272829303132/***å¯åŠ¨ Activity ä»£ç */ private Activity performLaunchActivity(ActivityClientRecord r, Intent customIntent) &#123; .... //1. åˆ›å»º Context å¯¹è±¡ ContextImpl appContext = createBaseContextForActivity(r); Activity activity = null;..... try &#123; // 2. åˆ¶ä½œ Application å¯¹è±¡ Application app = r.packageInfo.makeApplication(false, mInstrumentation); if (activity != null) &#123; //3. èŽ·å– Context å¯¹è±¡ CharSequence title = r.activityInfo.loadLabel(appContext.getPackageManager()); Configuration config = new Configuration(mCompatConfiguration); appContext.setOuterContext(activity); //4. å°† appContext ç­‰å¯¹è±¡ä¾é™„åœ¨ Activity çš„ attach å‡½æ•°ä¸­ activity.attach(appContext, this, getInstrumentation(), r.token, r.ident, app, r.intent, r.activityInfo, title, r.parent, r.embeddedID, r.lastNonConfigurationInstances, config, r.referrer, r.voiceInteractor, window, r.configCallback); //æ˜¯å¦æ˜¯æŒä¹…åŒ– if (r.isPersistable()) &#123; mInstrumentation.callActivityOnCreate(activity, r.state, r.persistentState); &#125; else &#123; //5. è°ƒç”¨ Activity çš„ onCreate æ–¹æ³• mInstrumentation.callActivityOnCreate(activity, r.state); &#125; .... return activity; &#125; 123456789/***Context çš„å®žçŽ°ç±» ContextImp*/ private ContextImpl createBaseContextForActivity(ActivityClientRecord r) &#123; //1.åˆ›å»º Activity çš„ Context å¯¹è±¡, åˆ°è¿™é‡Œç‚¹å‡» ContextImpl æ˜¯ Context å®žçŽ°ç±» ContextImpl appContext = ContextImpl.createActivityContext( this, r.packageInfo, r.activityInfo, r.token, displayId, r.overrideConfig); .... return appContext; &#125; 1234567/** * Common implementation of Context API, which provides the base * context object for Activity and other application components. */class ContextImpl extends Context &#123; ...&#125; é€šè¿‡ä¸Šé¢ä»£ç  1- 5 çš„æ³¨é‡Šåˆ†æžå¯çŸ¥ï¼ŒContext çš„å®žçŽ°ç±»æ˜¯ ContextImpl, è¿™é‡Œæˆ‘ä»¬ç›¸å½“äºŽåˆå¸¦ç€å¤§å®¶å¤ä¹ äº†ä¸€é Application , Activity å¯åŠ¨æºç äº†ã€‚ getSystemServiceé€šè¿‡ä¸Šé¢æˆ‘ä»¬å¾—çŸ¥ ContextImpl æ˜¯ Context çš„å®žçŽ°ç±»ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹æºç  123456789101112public class ContextImpl extends Context&#123; ... /** * é€šè¿‡æœåŠ¡åç§°ä»£å· Context.XXX æ‹¿åˆ°ç³»ç»Ÿå„ç§æœåŠ¡ */ @Override public Object getSystemService(String name) &#123; return SystemServiceRegistry.getSystemService(this, name); &#125; ...&#125; è¿™é‡Œæˆ‘ä»¬å‘çŽ°è¿”å›žçš„æ˜¯ SystemServiceRegistry ç±»é‡Œé¢çš„ getSystemService å‡½æ•°ï¼Œç»§ç»­è·Ÿï¼š 1234567/** * Gets a system service from a given context. */public static Object getSystemService(ContextImpl ctx, String name) &#123; ServiceFetcher&lt;?&gt; fetcher = SYSTEM_SERVICE_FETCHERS.get(name); return fetcher != null ? fetcher.getService(ctx) : null;&#125; 1234567/** * äº¤ç»™å­ç±»æ¥å®žçŽ°èŽ·å–æœåŠ¡ * */static abstract interface ServiceFetcher&lt;T&gt; &#123; T getService(ContextImpl ctx);&#125; 1234/*** è£…æœåŠ¡çš„å®¹å™¨*/private static final HashMap&lt;String, ServiceFetcher&lt;?&gt;&gt; SYSTEM_SERVICE_FETCHERS = new HashMap&lt;String, ServiceFetcher&lt;?&gt;&gt;(); åˆ°äº†è¿™é‡Œæˆ‘ä»¬çŸ¥é“äº†é€šè¿‡å®¹å™¨ç¼“å­˜æ‹¿åˆ°äº† LayInflater æœåŠ¡ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™æ³¨å†Œçš„ï¼Ÿä¸‹é¢æˆ‘ä»¬ç»§ç»­çœ‹è¯¥ç±»æºç  registerService1234567891011121314151617181920final class SystemServiceRegistry &#123; /***è£…ç³»ç»Ÿå„ç§æœåŠ¡çš„å®¹å™¨ï¼Œè¿™é‡Œç›¸å½“äºŽå®¹å™¨å•ä¾‹ç±»*/ private static final HashMap&lt;String, ServiceFetcher&lt;?&gt;&gt; SYSTEM_SERVICE_FETCHERS = new HashMap&lt;String, ServiceFetcher&lt;?&gt;&gt;(); // Not instantiable. private SystemServiceRegistry() &#123; &#125; static &#123; ..... //æ³¨å†Œ LayoutInflater æœåŠ¡ registerService(Context.LAYOUT_INFLATER_SERVICE, LayoutInflater.class, new CachedServiceFetcher&lt;LayoutInflater&gt;() &#123; @Override public LayoutInflater createService(ContextImpl ctx) &#123; return new PhoneLayoutInflater(ctx.getOuterContext()); &#125;&#125;); ..... &#125;&#125; 1234567891011121314151617181920212223242526272829static abstract class CachedServiceFetcher&lt;T&gt; implements ServiceFetcher&lt;T&gt; &#123; private final int mCacheIndex; public CachedServiceFetcher() &#123; mCacheIndex = sServiceCacheSize++; &#125; @Override @SuppressWarnings("unchecked") public final T getService(ContextImpl ctx) &#123; final Object[] cache = ctx.mServiceCache; synchronized (cache) &#123; // Fetch or create the service. Object service = cache[mCacheIndex]; if (service == null) &#123; try &#123; service = createService(ctx); cache[mCacheIndex] = service; &#125; catch (ServiceNotFoundException e) &#123; onServiceNotFound(e); &#125; &#125; return (T)service; &#125; &#125; //äº¤ç»™æŠ½è±¡å®žçŽ°åŽ»åˆ›å»ºæœåŠ¡ public abstract T createService(ContextImpl ctx) throws ServiceNotFoundException;&#125; é€šè¿‡ä¸Šé¢çš„ä»£ç å¯ä»¥çŸ¥é“æŠ½è±¡å®žçŽ°è¿”å›žçš„æ˜¯ new PhoneLayoutInflater(ctx.getOuterContext()); é‚£ä¹ˆè¿™ä¸ª Phoneâ€¦ åˆ°åº•ä»€ä¹ˆäº†ï¼Ÿ æˆ‘ä»¬ç»§ç»­è·Ÿ 123public class PhoneLayoutInflater extends LayoutInflater &#123; &#125; çœŸç›¸å¤§ç™½å•Šï¼ŒPhoneLayoutInflater å°±æ˜¯ç»§æ‰¿çš„ LayoutInflaterã€‚ æ€»ç»“ï¼š é€šè¿‡ä¸Šé¢çš„ä»£ç å¯çŸ¥ï¼Œåœ¨è™šæ‹Ÿæœºç¬¬ä¸€æ¬¡åŠ è½½è¯¥ç±»æ—¶ï¼Œé€šè¿‡ é™æ€ä»£ç å— ä¼šæ³¨å†Œå„ç§ ServiceFatcher, è¿™å…¶ä¸­å°±åŒ…å«äº† LayoutInflater Service, å°†è¿™äº›æœåŠ¡ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜å‚¨åœ¨ Map ä¸­, ç”¨æˆ·ä½¿ç”¨æ—¶åªéœ€è¦æ ¹æ® key æ¥èŽ·å–å¯¹åº”çš„ ServiceFetcher, ç„¶åŽé€šè¿‡ ServiceFetcher å¯¹è±¡çš„ getService æ¥èŽ·å–å…·ä½“æœåŠ¡å¯¹è±¡ã€‚å½“ç¬¬ä¸€æ¬¡èŽ·å–æ—¶ï¼Œä¼šè°ƒç”¨ ServiceFetcher çš„ createService å‡½æ•°åˆ›å»ºæœåŠ¡ï¼Œç„¶åŽç¼“å­˜åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œä¸‹æ¬¡å†å–ç›´æŽ¥ä»Žç¼“å­˜ä¸­èŽ·å–ï¼Œä»Žè€Œé¿å…äº†é‡å¤åˆ›å»ºå¯¹è±¡ï¼Œä»Žè€Œè¾¾åˆ°äº†å•ä¾‹çš„æ•ˆæžœï¼Œè¿™ä¸å°±æ˜¯æˆ‘ä¹‹å‰ä»‹ç»çš„å•ä¾‹æ¨¡å¼-å®¹å™¨å•ä¾‹æ¨¡å¼å˜›ï¼Œé€šè¿‡å®¹å™¨çš„å•ä¾‹æ¨¡å¼å®žçŽ°æ–¹å¼ï¼Œç³»ç»Ÿæ ¸å¿ƒæœåŠ¡ä»¥å•ä¾‹å½¢å¼å­˜åœ¨ï¼Œå‡å°‘äº†èµ„æºæ¶ˆè€—ã€‚ inflate æºç è§£æž12345678@Overridepublic void setContentView(int resId) &#123; ensureSubDecor(); ViewGroup contentParent = (ViewGroup) mSubDecor.findViewById(android.R.id.content); contentParent.removeAllViews(); LayoutInflater.from(mContext).inflate(resId, contentParent); mOriginalWindowCallback.onContentChanged();&#125; è·Ÿ inflate 1234public View inflate(@LayoutRes int resource, @Nullable ViewGroup root) &#123; // root ä¸ä¸º null , åˆ™ä¼šä»Žresourec å¸ƒå±€è§£æžåˆ° View ,å¹¶æ·»åŠ åˆ° root ä¸­ return inflate(resource, root, root != null);&#125; 1234567891011121314public View inflate(@LayoutRes int resource, @Nullable ViewGroup root, boolean attachToRoot) &#123; final Resources res = getContext().getResources(); if (DEBUG) &#123; Log.d(TAG, "INFLATING from resource: \"" + res.getResourceName(resource) + "\" (" + Integer.toHexString(resource) + ")"); &#125; //èŽ·å– XMl è§£æžå™¨ final XmlResourceParser parser = res.getLayout(resource); try &#123; return inflate(parser, root, attachToRoot); &#125; finally &#123; parser.close(); &#125;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768 /** * * @param parser xml è§£æžå™¨ * @param root è§£æžå¸ƒå±€çš„çˆ¶è§†å›¾ * @param attachToRoot æ˜¯å¦å°†è¦è§£æžçš„è§†å›¾æ·»åŠ åˆ°çˆ¶è§†å›¾ä¸­ * @return */public View inflate(XmlPullParser parser, @Nullable ViewGroup root, boolean attachToRoot) &#123; synchronized (mConstructorArgs) &#123; Trace.traceBegin(Trace.TRACE_TAG_VIEW, "inflate"); final Context inflaterContext = mContext; final AttributeSet attrs = Xml.asAttributeSet(parser); Context lastContext = (Context) mConstructorArgs[0]; //Context å¯¹è±¡ mConstructorArgs[0] = inflaterContext; //å­˜å‚¨çˆ¶è§†å›¾ View result = root; try &#123; // Look for the root node. int type; //æ‰¾åˆ° root å…ƒç´  while ((type = parser.next()) != XmlPullParser.START_TAG &amp;&amp; type != XmlPullParser.END_DOCUMENT) &#123; // Empty &#125; final String name = parser.getName(); //1. è§£æž Merge å¸ƒå±€æ ‡ç­¾ if (TAG_MERGE.equals(name)) &#123; if (root == null || !attachToRoot) &#123; throw new InflateException("&lt;merge /&gt; can be used only with a valid " + "ViewGroup root and attachToRoot=true"); &#125; rInflate(parser, root, inflaterContext, attrs, false); &#125; else &#123; // æ ¹æ® Tag æ¥è§£æžlayout è·Ÿè§†å›¾ final View temp = createViewFromTag(root, name, inflaterContext, attrs); ViewGroup.LayoutParams params = null; if (root != null) &#123; // ç”Ÿæˆå¸ƒå±€å‚æ•° params = root.generateLayoutParams(attrs); //å¦‚æžœ attachRoot ä¸º false,é‚£ä¹ˆå°†ç»™ temp è®¾ç½®å¸ƒå±€å‚æ•° if (!attachToRoot) &#123; temp.setLayoutParams(params); &#125; &#125; // è§£æž temp ä¸‹æ‰€æœ‰å­ View rInflateChildren(parser, temp, attrs, true); // å¦‚æžœ Root ä¸ä¸ºç©ºï¼Œä¸” attachToroot ä¸º true ,é‚£ä¹ˆå°† temp æ·»åŠ åˆ°çˆ¶å¸ƒå±€ä¸­ if (root != null &amp;&amp; attachToRoot) &#123; root.addView(temp, params); &#125; //å¦‚æžœ root == null ä¸” attachToRoot ä¸º false é‚£ä¹ˆç›´æŽ¥è¿”å›ž temp if (root == null || !attachToRoot) &#123; result = temp; &#125; &#125; &#125; catch (XmlPullParserException e) &#123; ... return result; &#125; &#125; ä¸Šè¿° inflate æ–¹æ³•ä¸­ï¼Œä¸»è¦æœ‰ä¸‹é¢å‡ æ­¥: è§£æž xml ä¸­çš„æ ¹æ ‡ç­¾ å¦‚æžœæ ¹æ ‡ç­¾æ˜¯ merge ï¼Œé‚£ä¹ˆè°ƒç”¨ rInflate è¿›è¡Œè§£æžï¼ŒrInflate ä¼šå°†æ‰€æœ‰çš„å­ View æ·»åŠ åˆ°è·Ÿæ ‡ç­¾ä¸­ å¦‚æžœæ ‡ç­¾æ˜¯æ™®é€šå…ƒç´ ï¼Œé‚£ä¹ˆè°ƒç”¨ createViewFromTag å¯¹å…ƒç´ è¿›è¡Œè§£æžï¼› è°ƒåŠ¨ rInflateChildren è§£æž temp æ ¹å…ƒç´ ä¸‹çš„æ‰€æœ‰å­ View, å¹¶ä¸”å°†è¿™äº›å­ View éƒ½æ·»åŠ åˆ° temp ä¸‹ è¿”å›žè§£æžåˆ°çš„æ ¹è§†å›¾ï¼› æˆ‘ä»¬åœ¨çœ‹ä¸€æ®µä»£ç ï¼Œå…ˆä»Žç®€å•çš„ç†è§£ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940View createViewFromTag(View parent, String name, Context context, AttributeSet attrs, boolean ignoreThemeAttr) &#123; if (name.equals("view")) &#123; name = attrs.getAttributeValue(null, "class"); &#125; try &#123; //1. ç”¨æˆ·å¯ä»¥é€šè¿‡è®¾ç½® LayoutInflater çš„ factory æ¥è‡ªè¡Œè§£æž View,é»˜è®¤è¿™äº› Factory éƒ½ä¸ºç©ºï¼Œå¯ä»¥å¿½ç•¥è¿™æ®µ View view; if (mFactory2 != null) &#123; view = mFactory2.onCreateView(parent, name, context, attrs); &#125; else if (mFactory != null) &#123; view = mFactory.onCreateView(name, context, attrs); &#125; else &#123; view = null; &#125; if (view == null &amp;&amp; mPrivateFactory != null) &#123; view = mPrivateFactory.onCreateView(parent, name, context, attrs); &#125; //2. æ²¡æœ‰ Factory çš„æƒ…å†µä¸‹é€šè¿‡ onCreateView æˆ–è€… createView åˆ›å»º View if (view == null) &#123; final Object lastContext = mConstructorArgs[0]; mConstructorArgs[0] = context; try &#123; // 3. å†…ç½® View æŽ§ä»¶çš„è§£æž if (-1 == name.indexOf('.')) &#123; view = onCreateView(parent, name, attrs); &#125; else &#123; //4 è‡ªå®šä¹‰ View çš„è§£æž view = createView(name, null, attrs); &#125; &#125; finally &#123; mConstructorArgs[0] = lastContext; &#125; &#125; return view;...&#125; æœ¬æ®µä»£ç é‡ç‚¹å°±åœ¨æ³¨é‡Š 2 å¤„ï¼Œå½“è¿™ä¸ª tag çš„åå­—åŒ…å« â€œ.â€ æ—¶ï¼Œè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªå†…ç½® View, ä¹Ÿå°±æ˜¯ 12345&lt;TextView android:id="@+id/list_item" android:layout_width="match_parent" android:layout_height="wrap_content" tools:ignore="MissingConstraints" /&gt; è¿™é‡Œçš„ TextView å°±æ˜¯ XMl æ ‡ç­¾çš„åå­—ï¼Œå› æ­¤ï¼Œåœ¨æ‰§è¡Œ infate æ—¶å°±ä¼šè°ƒç”¨æ³¨é‡Š 3 å¤„çš„ onCreateView æ¥è§£æž TextView æ ‡ç­¾ã€‚é‚£ä¹ˆï¼Œå½“æˆ‘ä»¬è‡ªå®šä¹‰ View æ—¶ï¼Œå°±ä¼šæ‰§è¡Œæ³¨é‡Š 4 12345&lt;com.t01.TextView android:id="@+id/list_item" android:layout_width="match_parent" android:layout_height="wrap_content" tools:ignore="MissingConstraints" /&gt; åœ¨ä¸Šé¢çš„ PhoneLayoutInflater é‡å†™äº† onCreateView æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°±æ˜¯åœ¨ View æ ‡ç­¾åçš„å‰é¢è®¾ç½®äº†ä¸€ä¸ª â€œandroid.widgetâ€ å‰ç¼€ï¼Œç„¶åŽä¼ é€’ç»™ createView è§£æžã€‚ é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸‹ createView æºç å…·ä½“å®žçŽ°å§ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354//æ ¹æ®å®Œæ•´çš„è·¯å¾„çš„ç±»åé€šè¿‡åå°„æœºåˆ¶æž„é€  View å¯¹è±¡public final View createView(String name, String prefix, AttributeSet attrs) throws ClassNotFoundException, InflateException &#123; //1. é€šè¿‡ç¼“å­˜èŽ·å–æž„é€ å‡½æ•° Constructor&lt;? extends View&gt; constructor = sConstructorMap.get(name); if (constructor != null &amp;&amp; !verifyClassLoader(constructor)) &#123; constructor = null; sConstructorMap.remove(name); &#125; Class&lt;? extends View&gt; clazz = null; try &#123; Trace.traceBegin(Trace.TRACE_TAG_VIEW, name); //2. æ²¡æœ‰ç¼“å­˜æž„é€ å‡½æ•° if (constructor == null) &#123; // å¦‚æžœ prefix ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆæž„é€ å‡½æ•°çš„ View è·¯å¾„ï¼Œå¹¶ä¸”åŠ è½½è¯¥ç±» clazz = mContext.getClassLoader().loadClass( prefix != null ? (prefix + name) : name).asSubclass(View.class); if (mFilter != null &amp;&amp; clazz != null) &#123; boolean allowed = mFilter.onLoadClass(clazz); if (!allowed) &#123; failNotAllowed(name, prefix, attrs); &#125; &#125; //3. ä»Ž Class å¯¹è±¡ä¸­èŽ·å–æž„é€ å‡½æ•° constructor = clazz.getConstructor(mConstructorSignature); constructor.setAccessible(true); //4. å°†æž„é€ å‡½æ•°å­˜å…¥ç¼“å­˜ä¸­ sConstructorMap.put(name, constructor); &#125; else &#123; ... &#125; Object lastContext = mConstructorArgs[0]; if (mConstructorArgs[0] == null) &#123; // Fill in the context if not already within inflation. mConstructorArgs[0] = mContext; &#125; Object[] args = mConstructorArgs; args[1] = attrs; //5. é€šè¿‡åå°„æž„é€  View final View view = constructor.newInstance(args); if (view instanceof ViewStub) &#123; // Use the same context when inflating ViewStub later. final ViewStub viewStub = (ViewStub) view; viewStub.setLayoutInflater(cloneInContext((Context) args[0])); &#125; mConstructorArgs[0] = lastContext; return view; &#125; createView ç›¸å½“æ¥è¯´è¿˜æ¯”è¾ƒç†è§£ï¼Œå¦‚æžœæœ‰å‰ç¼€ï¼Œé‚£ä¹ˆå°±æž„é€  View çš„å®Œæ•´è·¯å¾„ï¼Œå¹¶ä¸”å°†è¯¥ç±»åŠ è½½åˆ°è™šæ‹Ÿæœºä¸­ï¼Œç„¶åŽèŽ·å–è¯¥ç±»çš„æž„é€ å‡½æ•°å¹¶ä¸”ç¼“å­˜ä¸‹æ¥ï¼Œåœ¨é€šè¿‡æž„é€ å‡½æ•°æ¥åˆ›å»ºè¯¥ View çš„å¯¹è±¡ï¼Œæœ€åŽå°†å¯¹è±¡è¿”å›žï¼Œè¿™å°±æ˜¯è§£æžå•ä¸ª View çš„è¿‡ç¨‹ã€‚è€Œæˆ‘ä»¬çš„çª—å£ä¸­æ—¶ä¸€ä¸ªè§†å›¾æ ‘ï¼Œ LayoutInflater éœ€è¦è§£æžå®Œè¿™æ£µæ ‘ï¼Œè¿™ä¸ªåŠŸèƒ½å°±äº¤ç»™ rInflateChildren æ–¹æ³•ï¼Œçœ‹ä¸‹é¢ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041 void rInflate(XmlPullParser parser, View parent, Context context, AttributeSet attrs, boolean finishInflate) throws XmlPullParserException, IOException &#123; //1. èŽ·å–æ ‘çš„æ·±åº¦ï¼Œä¼˜å…ˆéåŽ† final int depth = parser.getDepth(); int type; boolean pendingRequestFocus = false; //2. æŒ¨ä¸ªå…ƒç´ è§£æž while (((type = parser.next()) != XmlPullParser.END_TAG || parser.getDepth() &gt; depth) &amp;&amp; type != XmlPullParser.END_DOCUMENT) &#123; if (type != XmlPullParser.START_TAG) &#123; continue; &#125; final String name = parser.getName(); if (TAG_REQUEST_FOCUS.equals(name)) &#123; pendingRequestFocus = true; consumeChildElements(parser); &#125; else if (TAG_TAG.equals(name)) &#123; parseViewTag(parser, parent, attrs); &#125; else if (TAG_INCLUDE.equals(name)) &#123; // è§£æž include æ ‡ç­¾ if (parser.getDepth() == 0) &#123; throw new InflateException("&lt;include /&gt; cannot be the root element"); &#125; parseInclude(parser, context, parent, attrs); &#125; else if (TAG_MERGE.equals(name)) &#123; //è§£æžåˆ° merge æ ‡ç­¾ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸º merge æ ‡ç­¾å¿…é¡»æ˜¯æ ¹è§†å›¾ throw new InflateException("&lt;merge /&gt; must be the root element"); &#125; else &#123; //3. æ ¹æ®å…ƒç´ åè¿›è¡Œè§£æžï¼Œåˆå›žåŽ»äº† final View view = createViewFromTag(parent, name, context, attrs); final ViewGroup viewGroup = (ViewGroup) parent; final ViewGroup.LayoutParams params = viewGroup.generateLayoutParams(attrs); //é€’å½’è°ƒç”¨è¿›è¡Œè§£æž rInflateChildren(parser, view, attrs, true); //å°†è§£æžåˆ°çš„ View æ·»åŠ è¿› ViewGroup ä¸­ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„ parent viewGroup.addView(view, params); &#125; &#125;... &#125; rInflateChildren é€šè¿‡æ·±åº¦ä¼˜å…ˆéåŽ†æ¥æž„é€ è§†å›¾æ ‘ï¼Œæ¯è§£æžåˆ°ä¸€ä¸ª View å…ƒç´ å°±ä¼šé€’å½’è°ƒç”¨ rInflateChildren ï¼Œç›´åˆ°è¿™æ¡è·¯å¾„çš„æœ€åŽä¸€ä¸ªå…ƒç´ ï¼Œç„¶åŽåœ¨å›žæº¯è¿‡æ¥å°†æ¯ä¸€ä¸ª View å…ƒç´ æ·»åŠ è¿› parent ä¸­ï¼Œé€šè¿‡ rInflateChildren è§£æžä¹‹åŽï¼Œæ•´æ£µæ ‘å°±æž„å»ºå®Œæ¯•äº†ã€‚å½“å›žè°ƒäº† onResume ä¹‹åŽï¼ŒsetContentView è®¾ç½®çš„å†…å®¹å°±ä¼šå‡ºçŽ°åœ¨å±å¹•ä¸­äº†ã€‚ æ€»ç»“LayoutInflater æ¶‰åŠçš„çŸ¥è¯†æºç è¿˜æ˜¯æŒºå¤šçš„ï¼Œæœ‰ Application , Activity çš„å¯åŠ¨ï¼Œè¿˜æœ‰æ·±åº¦å¹¿åº¦éåŽ†ï¼ŒXML èŠ‚ç‚¹è§£æžï¼Œå®¹å™¨å•ä¾‹æ¨¡å¼ã€‚è¿™é‡Œä¹Ÿç›¸å½“äºŽå¸¦ç€å¤§å®¶æ¸©ä¹ äº†ä¸€é Activity å¯åŠ¨æµç¨‹å§ã€‚ å¥½äº†ï¼Œåˆ°äº†è¿™é‡Œç›¸ä¿¡å¤§å®¶å¯¹ setContentView ä¹‹åŽå¹²äº†äº›ä»€ä¹ˆäº‹å„¿ï¼Œå·²ç»æœ‰ä¸€å®šäº†è§£äº†ã€‚ æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œè°¢è°¢ï¼]]></content>
      <categories>
        <category>Android</category>
        <category>æºç è§£æž</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å•åˆ—æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutter â€œä¿å§†â€çº§é¡¹ç›® Demoåˆé›†]]></title>
    <url>%2Fposts%2F60004316.html</url>
    <content type="text"><![CDATA[ä¸ºå•¥å«â€œä¿å§†â€çº§é¡¹ç›®ï¼Œå› ä¸ºæ˜¯çœŸçš„è´´å¿ƒâ€¦ flutter go https://github.com/alibaba/flutter-go GSYçš„ flutter åˆé›†GSYFlutterDemo ä½œä¸ºç®€å•ç¤ºä¾‹å’Œè§£å†³æ–¹æ¡ˆ Demo ï¼Œå®ƒå¯ä»¥ç»™ä½ å­¦ä¹ å’Œå·¥ä½œä¸­æä¾›ä¸€äº›ä¾¿æ·çš„å¸®åŠ©ï¼Œæ¯”å¦‚ å¦‚ä½•è‡ªå®šä¹‰å¸ƒå±€ï¼Œå¦‚ä½•æ»šåŠ¨æŽ§ä»¶åˆ°æŒ‡å®š child position ï¼Œå¦‚ä½•è°ƒæ•´ Text æŽ§ä»¶çš„ Line Space ï¼Œå¦‚ä½•ç›‘å¬é”®ç›˜çš„å¼¹å‡ºå’Œæ”¶èµ· ç­‰ç­‰ï¼Œæ‰€ä»¥ä¾‹å­æ–¹æ¡ˆéƒ½ç‹¬ç«‹å®žçŽ°ï¼Œæ–¹ä¾¿é˜…è¯» CV ã€‚ å·²æœ‰ä¾‹å­ Controller ä¾‹å­ åœ†è§’ ä¾‹å­ æ»‘åŠ¨ç›‘å¬ ä¾‹å­ æ»‘åŠ¨åˆ°æŒ‡å®šä½ç½® ä¾‹å­ æ»‘åŠ¨åˆ°æŒ‡å®šä½ç½®2 ä¾‹å­ Transform ä¾‹å­ æ–‡æœ¬è¡Œé—´è· ä¾‹å­ å¤šç§ä¸‹æ‹‰åˆ·æ–° ä¾‹å­ ç»å¯¹å®šä½ ä¾‹å­ æ°”æ³¡æç¤ºæ¡† ä¾‹å­ æ ‡ç­¾Wrap ä¾‹å­ å…±äº«å…ƒç´ åŠ¨ç”» ä¾‹å­ ä¿®æ”¹çŠ¶æ€æ é¢œè‰² ä¾‹å­ ç³»ç»Ÿé”®ç›˜ç›¸å…³ ä¾‹å­ åŠ¨ç”»ç›¸å…³ ä¾‹å­ æ‚¬æµ®è§¦æ‘¸æŽ§ä»¶ ä¾‹å­ å…¨å±€å­—ä½“å¤§å° ä¾‹å­ å¯Œæ–‡æœ¬ ä¾‹å­ ViewPager ä¾‹å­ æ»‘åŠ¨åœé  ä¾‹å­ éªŒè¯ç è¾“å…¥æ¡† ä¾‹å­ è‡ªå®šä¹‰å¸ƒå±€ ä¾‹å­ è‡ªå®šä¹‰å¸ƒå±€äº‘è¯å›¾ ä¾‹å­ https://github.com/CarGuo/GSYFlutterDemo é™¤æ­¤ä¹‹å¤–ï¼ŒGSY ä¹Ÿå¯¹å¤–è¾“å‡ºäº†ï¼Œå®žæˆ˜ç³»åˆ—åšå®¢ï¼š https://juejin.im/user/582aca2ba22b9d006b59ae68/posts å®žæˆ˜é¡¹ç›®ï¼š https://github.com/CarGuo/GSYGithubAppFlutter Flutter NoteBookflutetr_note_bookæœ‰è®¸å¤šflutterç›¸å…³åŠŸèƒ½demoçš„é›†åˆï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©æ‚¨å¿«é€Ÿå­¦ä¹ ä¸€äº›é›¶ç¢Žçš„çŸ¥è¯†ï¼Œæœ¬é¡¹ç›®å°†ä¼šä¸å®šæœŸæ›´æ–°ã€‚ https://github.com/OpenFlutter/Flutter-Notebook çœ‹ä»‹ç»ä¸Šå†™ï¼ŒåŽŸæœ¬ä½œè€…è®¡åˆ’æ˜¯æ—¥æ›´çš„ï¼Œä½†æ˜¯æ—¥æ›´çš„åŽ‹åŠ›å¤ªå¤§äº†ã€‚ æˆ‘æ›¾ç»å°è¯•è¿‡åšè¿™æ ·çš„äº‹æƒ…ï¼ŒåŽæ¥è¿˜æ˜¯è§‰å¾—ä¸éœ€è¦ç»™è‡ªå·±å¤ªå¤§åŽ‹åŠ›æ‰å¥½ï¼Œæ¯”å¦‚ï¼šwanandroid ä¸Šé¢çš„æ¯æ—¥ä¸€é—®ï¼ŒçŽ°åœ¨å˜æˆäº†æ¯å‘¨ 3 é—®ã€‚ æƒ³è¦åšæŒåšä¸€ä»¶äº‹æƒ…ï¼Œè€Œä¸”æ˜¯æ²¡æœ‰æ˜Žæ˜¾æ”¶ç›Šçš„äº‹æƒ…ï¼Œè¿˜æ˜¯ä¿æŒä¸€ä¸ªåˆç†çš„å‘¨æœŸï¼Œä¸è¦å½±å“åˆ°è‡ªå·±æ‰è¡Œã€‚ å°±åƒè°ˆæ‹çˆ±ï¼Œå¤©å¤©è§‰å¾—æœ‰åŽ‹åŠ›ï¼Œçƒ¦é‚£å°±ä¸é•¿ä¹…äº†~ å¥½åœ¨ä½œè€…å¹¶æ²¡æœ‰æ–­æ›´ï¼Œå¸Œæœ›ä½œè€…èƒ½åšæŒæ›´ä¹…ï¼Œæ„Ÿè°¢ã€‚ flutter_appæœ¬é¡¹ç›®åŒ…æ‹¬å„ç§åŸºæœ¬æŽ§ä»¶ä½¿ç”¨ï¼ˆTextã€TextFieldã€Iconã€Imageã€Listviewã€Gridviewã€Pickerã€Stepperã€Dialogã€Sliderã€Rowã€Appbarã€Sizeboxã€BottomSheetã€Chipã€Dismissibleã€FlutterLogoã€Checkã€Switchã€TabBarã€BottomNavigationBarã€Sliverç­‰ï¼‰ã€è±†ç“£ç”µå½±ã€æ¯æ—¥ä¸€æ–‡ã€å’Œå¤©æ°”ã€ç™¾å§“ç”Ÿæ´»ã€éšæœºè¯—è¯ã€è”ç³»äººã€å¥å­è¿·ã€å¥½å¥‡å¿ƒæ—¥æŠ¥ç­‰æ¿å— è¿™ä¸ªé¡¹ç›®æ¯”è¾ƒå¤§çš„ç‰¹è‰²ï¼Œå°±æ˜¯æ±‡é›†äº†éžå¸¸å¤šçš„å®žæˆ˜ appï¼Œé‚£ä¹ˆä½ çœ‹åˆ°å“ªä¸ªé¡µé¢æ•ˆæžœå°±èƒ½åŽ»çœ‹çœ‹å®ƒçš„å®žçŽ°ã€‚ å½“ç„¶äº†ï¼ŒçŽ°åœ¨åšå…·ä½“ app ç±»ä¼¼å¼€æºé¡¹ç›®ï¼Œæœ€éº»çƒ¦çš„å°±æ˜¯å¼€æ”¾ api äº†ï¼Œå¾ˆå¤šæŠ“å–çš„ä¸€æ–¹é¢ä¸ç¡®å®šæ˜¯å¦è¿è§„ï¼Œå¦ä¸€æ–¹é¢æžåº¦ä¸ç¨³å®šï¼Œæˆ‘ä»¥å‰ç»å¸¸æŽ¨èå®Œæ•´é¡¹ç›®ï¼Œä½†æ˜¯ç»å¸¸è¿‡äº†ä¸€æ®µæ—¶é—´å°±ä¸èƒ½è®¿é—®äº†ã€‚ æ‰€ä»¥ï¼Œä½ ä»¬çœŸè¦ç»ƒæ‰‹ï¼Œä¸å¦¨ä½¿ç”¨ wanandroid.com çš„å¼€æ”¾ APIï¼Œç½‘ç«™å¤šæ•°æŽ¥å£å’Œå¼€æ”¾ API æ˜¯ä½¿ç”¨çš„ç›¸åŒçš„æŽ¥å£ï¼Œé™¤éžè¿™ä¸ªç½‘ç«™æŒ‚äº†ï¼Œå¦åˆ™ API ä¸€ç›´å¾ˆç¨³å®šï¼Œæ•°æ®ä¹ŸåŒæ­¥æ›´æ–°ï¼Œä¹Ÿç®—æˆ‘å¯¹å¤–çš„ä¸€äº›ä»˜å‡ºå•¦ã€‚ https://github.com/shichunlei/flutter_app awesome-flutterç±»ä¼¼äºŽæ”¶é›†ä¸é”™çš„ Flutter åº“ï¼Œå·¥å…·ï¼Œæ–‡ç« ï¼Œå®žä¾‹ç­‰ã€‚ å› ä¸ºæ˜¯å›½å¤–å¼€å‘è€…åšçš„ï¼Œæ‰€ä»¥å…³æ³¨çš„æ›´å¤šæ˜¯å›½å¤–çš„å†…å®¹ï¼Œæ‰€ä»¥å’Œä»¥ä¸Šé¡¹ç›®åšäº’è¡¥è¿˜æ˜¯éžå¸¸ä¸é”™çš„ã€‚ è¿™ä¸ªèµ„æºåˆé›†ï¼Œåˆ†ç±»éžå¸¸ç»†è‡´ï¼Œæœ‰å…¥é—¨ï¼Œè¿›é˜¶ï¼›è§†é¢‘æ•™ç¨‹ç­‰ç­‰ã€‚ https://github.com/Solido/awesome-flutter å¦å¤–æœ‰ä¸€ä¸ªå°æŠ€å·§ï¼Œå°±æ˜¯ä½ æƒ³çœ‹ä»€ä¹ˆæ–¹å‘æŠ€æœ¯çš„æ—¶å€™ï¼Œæžœæ–­ç”¨ awesome + å…³é”®è¯ æœç´¢ã€‚ awesome kotlin awesome android å­¦åˆ°äº†å§ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CEOã€CFOã€CTOã€CIOã€COOã€CHOã€CMOã€COOç­‰ä½ éƒ½çŸ¥é“æ˜¯ä»€ä¹ˆå—ï¼Ÿ]]></title>
    <url>%2Fposts%2F45ddb687.html</url>
    <content type="text"><![CDATA[CAOChief Administrative Officer é¦–å¸­è¡Œæ”¿å®˜(Chief Art Officer é¦–å¸­è‰ºæœ¯å®˜)é‡Šä¹‰ï¼šé¡¾åæ€ä¹‰ï¼Œé¦–å¸­è¡Œæ”¿å®˜æ˜¯åœ¨ä¸€ä¸ªä¼ä¸šä¸­è´Ÿè´£æ—¥å¸¸äº‹åŠ¡çš„æœ€é«˜è¡Œæ”¿å®˜å‘˜ï¼Œä¹Ÿæ˜¯ä¼ä¸šé‡Œçš„è¡Œæ”¿éƒ¨é—¨é•¿å®˜ã€‚Ã·é¦–å¸­è‰ºæœ¯å®˜å¤šæ•°å‡ºçŽ°åœ¨æ–‡åŒ–å¨±ä¹ä¼ä¸šä¸­ã€‚ CBOChief Brand Officer é¦–å¸­å“ç‰Œå®˜é‡Šä¹‰ï¼šå®ƒæ˜¯çŽ°ä»£ç»„ç»‡ï¼ˆåŒ…æ‹¬ä¼ä¸šã€æ”¿åºœæˆ–å…¶ä»–ç»„ç»‡ï¼‰ä¸­è®¾ç½®çš„ä¸“é—¨è´Ÿè´£å“ç‰Œæˆ˜ç•¥ç®¡ç†ä¸Žè¿è¥çš„é«˜çº§å®˜å‘˜ï¼Œä»£è¡¨CEOå°±ä¼ä¸šå½¢è±¡ã€å“ç‰Œä»¥åŠæ–‡åŒ–è¿›è¡Œå†…å¤–éƒ¨æ²Ÿé€šã€‚CBOä¸ä»…æ˜¯ä¸€ç§ä¸“ä¸šäººæ‰ï¼Œæ›´æ˜¯ä¸€ç§ç‰¹æ®Šäººæ‰ã€‚å› ä¸ºä»–ä¸å†ä»…ä»…æ˜¯ä¸€ä¸ªä¼ æ’­è€…ï¼Œæ›´æ˜¯ä¸€ä¸ªä¼ä¸šä»·å€¼è®¾è®¡çš„å‚ä¸Žè€…å’Œä¼ä¸šå“ç‰Œèµ„äº§ç»è¥çš„è´£ä»»è€…ã€‚é¦–å¸­å“ç‰Œå®˜æŒ‰ç…§å›½é™…æƒ¯ä¾‹æ˜¯ç”±ä¼ä¸šå‰¯æ€»è£çº§é¢†å¯¼æ‹…ä»»ï¼Œå› æ­¤åœ¨å›½å¤–ï¼Œé¦–å¸­å“ç‰Œå®˜çš„è–ªé…¬å°‘åˆ™æ•°åä¸‡ç¾Žå…ƒï¼Œå¤šåˆ™ä¸Šç™¾ä¸‡ã€ç”šè‡³æ•°ç™¾ä¸‡ç¾Žå…ƒã€‚ CCOChief Cultural Officer é¦–å¸­æ–‡åŒ–ï¼ˆçŸ¥è¯†ï¼‰å®˜é‡Šä¹‰ï¼šä¼ä¸šæ–‡åŒ–ä¹Ÿæ˜¯ç”Ÿäº§åŠ›ï¼Œè¿™ç‚¹åœ¨ä¸­å›½ç›®å‰çš„ä¼ä¸šä¼°è®¡å¾ˆå°‘æœ‰äººåå¯¹ï¼Œè€Œé¦–å¸­æ–‡åŒ–å®˜å½“ä»ä¸è®©çš„ä¸»è¦èŒèƒ½å°±æ˜¯æž¶æž„æœ€æœ‰æ•ˆçŽ‡çš„ä¼ä¸šæ–‡åŒ–ã€‚å›½å†…å·²ç»å‡ºçŽ°äº†é¦–æ‰¹ä¼ä¸šé¦–å¸­æ–‡åŒ–å®˜ï¼Œè€Œæ ¹æ®ä¸­å›½ä¼ä¸šæ–‡åŒ–ä¿ƒè¿›ä¼šä¼šé•¿å¼ å…‰ç…§çš„å®šä¹‰ï¼ŒCCOåœ¨ä¼ä¸šä¸­çš„ä¸»è¦èŒèƒ½å°±æ˜¯ç»Ÿç­¹å…¨å±€åˆ¶å®šä¼ä¸šæ–‡åŒ–å»ºè®¾çš„è§„åˆ’ï¼Œå¸®åŠ©å‘˜å·¥æ ‘ç«‹èµ·ä¼ä¸šçš„æ ¸å¿ƒä»·å€¼è§‚å¿µã€‚ CDOChief Development Officer é¦–å¸­å¼€å‘å®˜é‡Šä¹‰ï¼šä¸€ä¸ªæœˆå‰ï¼Œæ€ç§‘å…¬å¸ä¸€ä»½æ–°é—»å£°æ˜Žä¸­å®£å¸ƒï¼Œä»»å‘½æŸ¥å°”æ–¯-è©¹å¡æ´›æ‹…ä»»å…¬å¸çš„é¦–å¸­å¼€å‘å®˜ï¼Œè€Œæ­¤å‰ï¼Œè©¹å¡æ´›æ›¾æ‹…ä»»æ€ç§‘å…¬å¸çš„é¦–å¸­æŠ€æœ¯å®˜ã€‚é¦–å¸­å¼€å‘å®˜å’Œé¦–å¸­æŠ€æœ¯å®˜æœ‰ä¸€å®šçš„è”ç³»ï¼Œé¦–å¸­å¼€å‘å®˜å¹¶ä¸æ˜¯æ‰€æœ‰ä¼ä¸šéƒ½å­˜åœ¨è¿™ä¸ªèŒä½ï¼Œå¤šæ•°å‡ºçŽ°äºŽæŠ€æœ¯å«é‡é«˜çš„ä¼ä¸šï¼Œæ‰‹ä¸‹ä¹Ÿæ˜¯ç§¯æžæ€§é«˜ã€å……æ»¡æ™ºæ…§çš„å·¥ç¨‹å¸ˆç­‰ç ”ç©¶å¼€å‘äººå‘˜ã€‚ CEOChief Executive Officer é¦–å¸­æ‰§è¡Œå®˜é‡Šä¹‰ï¼šåœ¨æŸç§æ„ä¹‰ä¸Šä»£è¡¨ç€å°†åŽŸæ¥è‘£äº‹ä¼šæ‰‹ä¸­çš„ä¸€äº›å†³ç­–æƒè¿‡æ¸¡åˆ°ç»è¥å±‚æ‰‹ä¸­ã€‚CEOä¸Žæ€»ç»ç†ï¼Œå½¢å¼ä¸Šéƒ½æ˜¯ä¼ä¸šçš„â€œä¸€æŠŠæ‰‹â€ï¼ŒCEOæ—¢æ˜¯è¡Œæ”¿ä¸€æŠŠæ‰‹ï¼Œåˆæ˜¯è‚¡ä¸œæƒç›Šä»£è¨€äººï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒCEOæ˜¯ä½œä¸ºè‘£äº‹ä¼šæˆå‘˜å‡ºçŽ°çš„ï¼Œæ€»ç»ç†åˆ™ä¸ä¸€å®šæ˜¯è‘£äº‹ä¼šæˆå‘˜ã€‚ä»Žè¿™ä¸ªæ„ä¹‰ä¸Šè®²ï¼ŒCEOä»£è¡¨ç€ä¼ä¸šï¼Œå¹¶å¯¹ä¼ä¸šç»è¥è´Ÿè´£ã€‚ CFOChief Finance Officer é¦–å¸­è´¢åŠ¡å®˜é‡Šä¹‰ï¼šé¦–å¸­è´¢åŠ¡å®˜æ˜¯ä¼ä¸šè´¢åŠ¡æ€»ç›‘çš„â€œå¢žé•¿ç‰ˆâ€ã€‚å½“ç„¶ï¼Œä»Žæœ¬è´¨ä¸Šè®²ï¼ŒCFOåœ¨çŽ°ä»£æ²»ç†ç»“æž„ä¸­çš„çœŸæ­£å«ä¹‰ï¼Œä¸æ˜¯å…¶åç§°çš„æ”¹å˜ã€å®˜ä½çš„æŽˆäºˆï¼Œè€Œæ˜¯å…¶èŒè´£æƒé™çš„å–å¾—ï¼Œåœ¨ç®¡ç†ä¸­ä½œç”¨çš„çœŸæ­£å‘æŒ¥ã€‚ CGOChief Gonverment Officer é¦–å¸­æ”¿åºœå…³ç³»å®˜é‡Šä¹‰ï¼šé¦–å¸­æ”¿åºœå…³ç³»å®˜ï¼Œä¼ä¸šä¸­ç”¨ä»¥åè°ƒä¼ä¸šä¸Žæ”¿åºœä¸Žç¤¾ä¼šä¹‹é—´çš„å…³ç³»ã€‚ä»–ä¹Ÿæ˜¯ä¼ä¸šä¸Žå¤–éƒ¨çŽ¯å¢ƒå»ºç«‹è”ç³»çš„æ¡¥æ¢ï¼Œä½†æ˜¯ä¸Žå…¬å…³æ€»ç›‘ä¸åŒçš„æ˜¯ï¼Œä»–æ›´ä¸“æ³¨äºŽæ”¿åºœå…¬å…±å…³ç³»çš„å¤„ç†ã€‚å¦‚æžœé¹¿é¼Žè®°é‡Œçš„éŸ¦å°å®ä¹Ÿæ¥ç»è¥ä¼ä¸šçš„è¯ï¼Œé‚£ä¹ˆå»ºå®å…¬ä¸»å°†æ˜¯CGOçš„ä¸äºŒäººé€‰ã€‚ CHOChief HumanResource Officer é¦–å¸­äººäº‹å®˜é‡Šä¹‰ï¼šâ€œäºŒåä¸€ä¸–çºªæœ€è´µçš„æ˜¯ä»€ä¹ˆï¼Ÿäººæ‰ï¼â€è¿™å¥è¯ä»Žã€Šå¤©ä¸‹æ— è´¼ã€‹é‡Œä½œä¸ºè´¼å¤´çš„è‘›ä¼˜å˜´é‡Œè¯´å‡ºæ¥å¾ˆæžç¬‘ï¼Œç„¶è€Œå´æ˜¯ä¸æŠ˜ä¸æ‰£çš„çœŸç†ï¼Œæ²¡æœ‰äººæ‰çš„å›½å®¶å°±æ²¡æœ‰æœªæ¥ã€‚ä½†å¯¹äºŽä¸€ä¸ªé›†ä½“æ¥è®²ï¼Œæ²¡æœ‰æ¯”äººæ‰æ›´é‡è¦çš„ä¸œè¥¿ã€‚è€ŒCHOå°±æ˜¯ç»å¸¸â€œè´©å–â€å„ç§äººæ‰çš„â€œäººè´©å­â€ã€‚CHOå¹³å¸¸çš„å·¥ä½œå°±æ˜¯æ‹›è˜ã€åŸ¹è®­å‘˜å·¥ï¼›è€ƒæ ¸å‘˜å·¥ä¸šç»©ï¼›åè°ƒå‘˜å·¥å…³ç³»ï¼›ä¸ºå‘˜å·¥æä¾›èŒä¸šè§„åˆ’â€”â€”â€”è¿™ä¸ªå¾ˆé‡è¦ï¼Œä¸åŒçš„äººæœ‰ä¸åŒçš„èƒ½åŠ›å’Œéœ€æ±‚ï¼Œä¸æ˜¯æ¯ä¸ªæŠ€æœ¯äººå‘˜éƒ½æƒ³å½“ç»ç†ï¼Œä¹Ÿä¸æ˜¯æ¯ä¸ªç®¡ç†äººå‘˜éƒ½èƒ½æžæŠ€æœ¯ã€‚ ###CIOChief Information Officer é¦–å¸­ä¿¡æ¯å®˜ é‡Šä¹‰ï¼šæ—©åœ¨ä¸Šä¸ªä¸–çºª80å¹´ä»£æœ«ï¼Œä¸–ç•Œ500å¼ºä¼ä¸šå°±æœ‰30%ä»¥ä¸Šé…å¤‡çš„CIOï¼Œé¦–å¸­ä¿¡æ¯å®˜çš„èŒè´£æ˜¯è´Ÿè´£åˆ¶è®¢å…¬å¸ä¿¡æ¯åŒ–çš„æ”¿ç­–ä¸Žæ ‡å‡†ï¼Œå¹¶ç¡®å®šå®žæ–½ç¨‹åºä¸Žæ–¹æ³•ï¼Œç»Ÿä¸€é¢†å¯¼ä¼ä¸šå†…éƒ¨ä¿¡æ¯ç³»ç»Ÿå»ºè®¾ï¼Œåˆ¶å®šæ€»ä½“è§„åˆ’ï¼Œå¹¶åè°ƒå„éƒ¨é—¨ä¹‹é—´çš„å…³ç³»ï¼Œä¿è¯ä¿¡æ¯æµé€šç•…é€šã€‚éšç€é¦–å¸­ä¿¡æ¯å®˜å†…æ¶µçš„ä¸°å¯Œï¼ŒçŽ°åœ¨ä»–ä»¬çš„å¦ä¸€é¡¹ä»»åŠ¡è¿˜åŒ…æ‹¬åˆ©ç”¨çŽ°ä»£åŒ–çš„æŠ€æœ¯æ•æ‰æ”¶é›†ä¿¡æ¯ï¼Œä»¥å®žçŽ°ä¿¡æ¯èµ„æºçš„åˆç†é…ç½®ã€‚ CJOChief Jet Officer é¦–å¸­â€œç«ç®­æŽ¨åŠ¨â€å®˜é‡Šä¹‰ï¼šå…³äºŽCJOï¼Œç›®å‰ä¼ä¸šå°šæœªå‡ºçŽ°ç±»ä¼¼çš„èŒä½ï¼Œä½†å¦‚æžœè€ƒè™‘Jetè¿™ä¸ªè¯ï¼Œé‚£ä¹ˆCJOå°±æ˜¯å…¬å¸é‡Œé‚£ç§æŠŠè¥è¿æŒ‡æ ‡éƒ½åŠ ä¸€ä¸ªæˆ–å¤šä¸ªé›¶ï¼Œä½¿å…¬å¸å¸‚å€¼åƒç«ç®­èˆ¬ä¸Šå‡çš„äººã€‚ CKOChief Knowledge Officer é¦–å¸­çŸ¥è¯†å®˜é‡Šä¹‰ï¼š20ä¸–çºª90å¹´ä»£åˆï¼ŒçŸ¥è¯†ç®¡ç†è¿˜æ˜¯ä¸€ä¸ªä»¤äººå…´å¥‹çš„æ–°æ¦‚å¿µã€‚æŸäº›ä¼ä¸šè¿˜è®¾ç½®äº†â€œé¦–å¸­çŸ¥è¯†å®˜â€ï¼ˆCKOï¼‰è¿™ä¸€æ–°çš„è¡Œæ”¿èŒä½æ¥ä¸»æŒè¿™æ–¹é¢çš„å·¥ä½œã€‚æŸç§æ„ä¹‰ä¸Šè¯´ï¼ŒCKOæ˜¯çŸ¥è¯†ç»æµŽçš„äº§ç‰©ï¼Œä¸€èˆ¬è¦åšå¦‚ä¸‹çš„å·¥ä½œï¼šç»“åˆä¼ä¸šçš„ä¸šåŠ¡å‘å±•æˆ˜ç•¥ï¼ŒçŽ‡é¢†ä¼ä¸šæ‰¾åˆ°çŸ¥è¯†ç®¡ç†çš„æ„¿æ™¯å’Œç›®æ ‡ï¼›æ­£ç¡®å®šä¹‰å¥½ä¼ä¸šçš„çŸ¥è¯†ä½“ç³»å¹¶è¿›è¡Œç³»ç»Ÿåœ°è¡¨è¾¾ï¼›æŽ¨åŠ¨å»ºç«‹åˆé€‚çš„ITç³»ç»Ÿå·¥å…·ä»¥ä¿éšœâ€œçŸ¥è¯†ä¹‹è½®â€çš„è¿è½¬ï¼›å°†çŸ¥è¯†ç®¡ç†çš„æµç¨‹ä¸Žä¸šåŠ¡æµç¨‹ç´§å¯†èžåˆä¸ºä¸€ä½“ï¼›å»ºç«‹åˆé€‚çš„çŸ¥è¯†ç®¡ç†è€ƒæ ¸ä¸Žæ¿€åŠ±æœºåˆ¶ï¼›è¥é€ é€‚åˆçŸ¥è¯†ç®¡ç†çš„ä¿¡ä»»ã€å…±äº«ã€åˆ›æ–°çš„æ–‡åŒ–æ°›å›´ã€‚ CLOChief Law Officer é¦–å¸­æ³•å¾‹å®˜é‡Šä¹‰ï¼šéšç€ç¤¾ä¼šçš„æ³•åˆ¶åŒ–æ—¥ç›Šå¢žå¼ºï¼Œä¼ä¸šå¯¹é«˜çº§æ³•å¾‹äººæ‰çš„æ¸´æ±‚ä¼šè¶Šæ¥è¶Šå¤§ï¼Œé¦–å¸­æ³•å¾‹å®˜é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸ºäº†å…¬å¸å¯¹å¤–å¯¹å†…çš„æ³•å¾‹äº‹åŠ¡çš„ç®¡ç†è€Œè®¾ç½®çš„è¡Œæ”¿èŒåŠ¡ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œé¦–å¸­æ³•å¾‹å®˜æœ€å¥½å…·å¤‡å¾‹å¸ˆæ–¹é¢çš„æ¯”è¾ƒé•¿çš„ä»Žä¸šç»éªŒï¼ŒåŒæ—¶æŽŒæ¡ä¸€å®šçš„ä¼ä¸šç®¡ç†çŸ¥è¯†ã€‚ CMOChief Marketing Officer é¦–å¸­å¸‚åœºå®˜é‡Šä¹‰ï¼šCMOæ˜¯æŒ‡ä¼ä¸šä¸­è´Ÿè´£å¸‚åœºè¿è¥å·¥ä½œçš„é«˜çº§ç®¡ç†äººå‘˜ï¼Œä¹Ÿå¯ç§°å¸‚åœºæ€»ç›‘ã€ä¸»è¥å¸‚åœºçš„å‰¯æ€»ç»ç†æˆ–å‰¯æ€»è£ç­‰ã€‚ä¸»è¦è´Ÿè´£åœ¨ä¼ä¸šä¸­å¯¹è¥é”€æ€æƒ³è¿›è¡Œå®šä½ï¼›æŠŠæ¡å¸‚åœºæœºä¼šï¼Œåˆ¶å®šå¸‚åœºè¥é”€æˆ˜ç•¥å’Œå®žæ–½è®¡åˆ’ï¼Œå®Œæˆä¼ä¸šçš„è¥é”€ç›®æ ‡ï¼›åè°ƒä¼ä¸šå†…å¤–éƒ¨å…³ç³»ï¼Œå¯¹ä¼ä¸šå¸‚åœºè¥é”€æˆ˜ç•¥è®¡åˆ’çš„æ‰§è¡Œè¿›è¡Œç›‘ç£å’ŒæŽ§åˆ¶ï¼›è´Ÿè´£ä¼ä¸šè¥é”€ç»„ç»‡å»ºè®¾ä¸Žæ¿€åŠ±å·¥ä½œã€‚ CNOChief Negotiation Officer é¦–å¸­è°ˆåˆ¤å®˜é‡Šä¹‰ï¼šçŽ°ä»£ä¼ä¸šå’Œå•†åŠ¡æ´»åŠ¨æˆåŠŸä¸Žå¦ï¼Œæžå¤§ç¨‹åº¦ä¸Šå–å†³äºŽè°ˆåˆ¤æŠ€å·§ä¸Žèƒ½åŠ›ã€‚æ¯‹åº¸ç½®ç–‘ï¼Œé¦–å¸­è°ˆåˆ¤å®˜å¿…é¡»ç‚¼å°±å“è¶Šçš„è°ˆåˆ¤ç­–åˆ’å’Œå®žæˆ˜èƒ½åŠ›ï¼Œæ‰èƒ½æˆä¸ºå•†ç•Œçš„èµ¢å®¶ï¼Œæ‰èƒ½åœ¨æŽŒæŽ§è‡ªå·±å‘½è¿æ—¶å¾—å¿ƒåº”æ‰‹ã€‚é¦–å¸­è°ˆåˆ¤å®˜è´Ÿè´£æž¶æž„å…¬å¸è°ˆåˆ¤å›¢é˜Ÿï¼Œä»‹ç»æœ€æœ‰æ•ˆçš„è°ˆåˆ¤æŠ€èƒ½ï¼Œé˜é‡Šæœ€æ–°é¢–ç‹¬åˆ°çš„è°ˆåˆ¤ç†å¿µã€‚ COOChief Operation Officer é¦–å¸­è¥è¿å®˜é‡Šä¹‰ï¼šCOOæ˜¯è´Ÿè´£å…¬å¸ä¼ä¸šçš„æ—¥å¸¸è¿ä½œå¹¶å‘CEOæŠ¥å‘Šçš„äºŒæŠŠæ‰‹ã€‚å¦‚æžœè¯´CEOæ˜¯éƒ¨é•¿ã€å¸‚é•¿çš„è¯ï¼ŒCOOè¿™ä¸ªåç§°å¯ä»¥å¾ˆå®¹æ˜“åœ°è”æƒ³åˆ°ä¸­æ–‡é‡ŒçŽ°æœ‰çš„åè¯å¦‚å¸¸åŠ¡å‰¯éƒ¨é•¿ã€å¸¸åŠ¡å‰¯å¸‚é•¿ç­‰ã€‚ CPOChief Public Relation Officer é¦–å¸­å…¬å…³å®˜é‡Šä¹‰ï¼šä¸€ä»½è‰¯å¥½çš„ä¿¡èª‰æ˜¯ä¼ä¸šæœ€æœ‰ä»·å€¼çš„èµ„äº§ä¹‹ä¸€ã€‚é¦–å¸­å…¬å…³å®˜æ˜¯å»ºé€ å¹¶ä¿æŠ¤è¿™ä»½èµ„äº§çš„ä¼ä¸šç®¡ç†è€…ï¼ŒCPOéœ€è¦å»ºç«‹å’Œä¿æŠ¤è‡ªèº«åŠå…¬å¸çš„ä¿¡èª‰ï¼Œæ­è®¾å“ç‰Œç»„ç»‡åŠä¸ªäººä¿¡èª‰çš„å…¬å¸ç»ç†å’Œå…¬å…±å…³ç³»é¡¾é—®ã€‚CPOè¿˜éœ€è¦ç†Ÿæ‚‰ä¿¡èª‰ç­–ç•¥çš„å‘å±•ã€ä¿¡èª‰çš„è¡¡é‡ã€å±æœºå’Œé¡¹ç›®ç®¡ç†ã€ç½‘ä¸Šä¿¡èª‰ç®¡ç†ã€åª’ä½“å…³ç³»å’Œå†…éƒ¨æ²Ÿé€šç­‰ã€‚ CQOChief Quality Officer é¦–å¸­è´¨é‡å®˜é‡Šä¹‰ï¼šä½œä¸ºä¼ä¸šä¸­çš„ç¬¬ä¸€è´¨é‡äººï¼ŒCQOæ˜¯ä¼ä¸šæˆ˜ç•¥å°ç»„çš„å…³é”®ä¸€å‘˜ï¼Œè´Ÿè´£åˆ›å»ºä»¥å“è´¨ä¸ºæ ¸å¿ƒçš„ä¼ä¸šæ–‡åŒ–ï¼Œå¡‘é€ ä¼ä¸šè´¨é‡ç«žäº‰åŠ›ã€‚CQOä¸ä»…æ‡‚ä¸šåŠ¡ã€æœ‰æ–¹æ³•ï¼Œè€Œä¸”è„šè¸å®žåœ°ã€æ€æƒ³é²œæ´»ï¼›æ— è®ºæ˜¯æœ±å…°ã€å…‹åŠ³å£«æ¯”ï¼Œè¿˜æ˜¯è´¹æ ¹å ¡å§†ã€å“ˆçµé¡¿ï¼Œä¸ä»…æ˜¯è´¨é‡å¤§å¸ˆï¼Œæ›´æ˜¯å•†ç•Œé¢†è¢–äººç‰©ã€‚ CROChief Research Officer ç ”ç©¶æ€»ç›‘é‡Šä¹‰ï¼šä¼ä¸šä¸æ–­å‰è¿›å’Œå‘å±•çš„åŠ¨åŠ›æºå¤´ï¼ŒCROçš„ä»»åŠ¡æ˜¯é¢†å¯¼ä¼ä¸šç»„ç»‡ä¸­æœ€å…·æœ‰çªç ´é’»ç ”ç²¾ç¥žçš„äººä¸ºä¼ä¸šä¸æ–­å¼€å‘å‡ºæ–°çš„ç»æµŽå¢žé•¿ç‚¹ã€‚ CSOChief Solution Officer é¦–å¸­é—®é¢˜å®˜é‡Šä¹‰ï¼šåœ¨è¿™ä¸ªèŒä½åç§°ä¸­ï¼Œä¹‹æ‰€ä»¥ç”¨Solutionï¼ˆè§£å†³æ–¹æ¡ˆï¼‰è€Œä¸ç”¨Problemï¼ˆé—®é¢˜ï¼‰æ¥è¡¨ç¤ºé—®é¢˜ï¼Œæœ‰ä¸¤æ–¹é¢çš„åŽŸå› ï¼šä¸€æ–¹é¢æ˜¯å› ä¸ºProblemå¯èƒ½ä¼šè®©äººç†è§£ä¸ºé¦–å¸­é—®é¢˜å®˜æ˜¯åˆ¶é€ é—®é¢˜çš„ï¼Œè€Œä¸æ˜¯è§£å†³é—®é¢˜çš„ã€‚å¦ä¸€æ–¹é¢æ˜¯Solutionä¸€è¯è¿‘å¹´æ¥æ­£åœ¨æµè¡Œï¼Œè®¸å¤šè½¯ä»¶å…¬å¸å’Œå’¨è¯¢å…¬å¸éƒ½è¯´ä»–ä»¬èƒ½æä¾›çš„ä¸åªæ˜¯äº§å“ï¼Œè€Œä¸”æ˜¯ä¸€æ•´å¥—è§£å†³é—®é¢˜çš„æ–¹æ¡ˆï¼ˆSolutionsï¼‰ã€‚é¡¾åæ€ä¹‰ï¼ŒCSOæ˜¯è´Ÿè´£æŒ–æŽ˜é—®é¢˜ã€åè°ƒç¼“è§£é—®é¢˜å’Œè§£å†³é—®é¢˜çš„é«˜çº§ç®¡ç†äººå‘˜ã€‚CSOçš„èŒè´£æ˜¯æŒ–æŽ˜ä¼ä¸šç®¡ç†ä¸­çš„é—®é¢˜ï¼Œåˆ†æžé—®é¢˜çš„æ€§è´¨å’Œå¯èƒ½é€ æˆçš„å½±å“ï¼Œæžæ¸…é—®é¢˜çš„è½»é‡ç¼“æ€¥ï¼Œåˆ¶å®šè§£å†³é—®é¢˜çš„æ–¹æ¡ˆï¼Œæè¯·æ€»è£æˆ–è‘£äº‹ä¼šå†³ç­–å®žæ–½ã€‚ CTOChief Technology Officer é¦–å¸­æŠ€æœ¯å®˜é‡Šä¹‰ï¼šCTOï¼ˆé¦–å¸­æŠ€æœ¯å®˜ï¼‰å³ä¼ä¸šå†…è´Ÿè´£æŠ€æœ¯çš„æœ€é«˜è´Ÿè´£äººã€‚è¿™ä¸ªåç§°åœ¨1980å¹´ä»£ä»Žç¾Žå›½å¼€å§‹æ—¶å…´ã€‚èµ·äºŽåšå¾ˆå¤šç ”ç©¶çš„å¤§å…¬å¸ï¼Œå¦‚General Electricï¼ŒAT&amp;Tï¼ŒALCOAï¼Œä¸»è¦è´£ä»»æ˜¯å°†ç§‘å­¦ç ”ç©¶æˆæžœæˆä¸ºç›ˆåˆ©äº§å“ã€‚1990å¹´ä»£ï¼Œå› è®¡ç®—æœºå’Œè½¯ä»¶å…¬å¸çƒ­é—¨ï¼Œå¾ˆå¤šå…¬å¸æŠŠCTOçš„åç§°ç»™äºˆç®¡ç†è®¡ç®—æœºç³»ç»Ÿå’Œè½¯ä»¶çš„è´Ÿè´£äººã€‚æœ‰æ—¶CTOå’ŒCIOï¼ˆChief Information Officerä¿¡æ¯ç®¡ç†æœ€é«˜è´Ÿè´£äººï¼‰æ˜¯åŒä¸€ä¸ªäººï¼ˆå°¤å…¶åœ¨è½¯ä»¶å…¬å¸ï¼‰ï¼Œæœ‰æ—¶CTOå½’äºŽæ¯”è¾ƒç²¾é€šç§‘å­¦æŠ€æœ¯çš„CIOæ‰‹ä¸‹ã€‚åœ¨ä¸åŒé¢†åŸŸçš„å…¬å¸ï¼ŒCTOå·¥ä½œæ€§è´¨ä¸åŒï¼›å³ä½¿åœ¨åŒä¸€é¢†åŸŸï¼Œå·¥ä½œæ€§è´¨ä¹Ÿå¯èƒ½å¤§ä¸ç›¸åŒã€‚ä¸€èˆ¬CTOä¼šæœ‰ä»¥ä¸‹è´£ä»»ï¼šé•¿æœŸæŠ€æœ¯æ–¹å‘ï¼ˆæˆ˜ç•¥æ€§ï¼‰ã€çŸ­æœŸæŠ€æœ¯æ–¹å‘ï¼ˆæˆ˜æœ¯æ€§ï¼‰ã€ç®¡ç†ç ”ç©¶å¯¹å…¬å¸ç»è¥æ´»åŠ¨å’Œè¥åˆ©çš„å½±å“ã€å…¬å¸ä¸­ä½¿ç”¨çš„è½¯ä»¶ç­‰ç­‰ã€‚ CUOChief User Officer å®¢æˆ·æ€»ç›‘é‡Šä¹‰ï¼šCUOä¸ºå®¢æˆ·åˆ¶å®šåª’ä½“å…³ç³»ç­–ç•¥å’Œå…¬å…³æ´»åŠ¨ç­–åˆ’ï¼Œè¾¾æˆå®¢æˆ·çš„å¸‚åœºæˆ–ä¼ æ’­ç›®æ ‡ï¼›ç£ä¿ƒå®¢æˆ·æœåŠ¡å›¢é˜Ÿæ‰§è¡Œåª’ä½“åŠå…¬å…³æ´»åŠ¨ï¼Œæœ‰æ•ˆåˆ†é…èµ„æºï¼Œå¹¶ä¿è¯æœåŠ¡å›¢é˜Ÿçš„å·¥ä½œè´¨é‡ï¼›è´Ÿè´£ç›‘ç£å…¬å…³é¡¹ç›®çš„è®¡åˆ’å’Œå®žæ–½ï¼Œä½¿å…¬å…³é¡¹ç›®èƒ½åœ¨é¢„ç®—çš„æ—¶é—´å’Œè´¹ç”¨å†…å®Œæˆï¼›ç§¯æžæ‹“å±•å®¢æºåŠå¼€å‘å…¬å¸ä¸šåŠ¡ï¼›ä¸Žå®¢æˆ·è¿›è¡Œç´§å¯†çš„ä¸šåŠ¡è”ç»œå’Œæ²Ÿé€šã€‚ CVOChief VCReception Officer é£Žé™©æŠ•èµ„å•†æŽ¥å¾…ä¸“å‘˜é‡Šä¹‰ï¼šé¦–å¸­è´¢åŠ¡å®˜çš„é‡è¦åŠ©ç†ã€‚ CWOChief Writer Officer é¦–å¸­ç½‘ç»œå†™æ‰‹é‡Šä¹‰ï¼šé¦–å¸­ç½‘ç»œå†™æ‰‹ï¼Œè´Ÿè´£å°†å°äº‹æ‰©å¤§åŒ–ã€‚ CXOChinese XO ä¸­å›½æ´‹é…’é‡Šä¹‰ï¼šåœ¨ä¼ä¸šå–å¾—é˜¶æ®µæ€§æˆåŠŸæ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šæ‹¿å‡ºCXOæ¥ä»¥èµ„åº†ç¥ã€‚ CYOChief Yearly Officer é¦–å¸­å…ƒè€é‡Šä¹‰ï¼šå…¬å¸å…ƒè€ï¼Œè¿™æ˜¯ä¸€ä¸ªè£èª‰ç§°å·ï¼Œè¿™ä¸ªèŒä½é€šå¸¸ç©ºç¼ºã€‚ CZOChief Zero Officer æœ€åŽç¦»å¼€è€…é‡Šä¹‰ï¼šæœ€åŽç¦»å¼€å…¬å¸çš„ä¸€ä¸ªäººï¼Œè´Ÿè´£å…³å¥½é—¨çª—ï¼Œå°†å…¬å¸å¤§é—¨é’¥åŒ™äº¤ç»™ç‰©ä¸šç®¡ç†å¤„ã€‚]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FlutterPluginå¼€å‘æµç¨‹]]></title>
    <url>%2Fposts%2Fb7213cdb.html</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†Flutter Pluginå¼€å‘æµç¨‹ï¼ŒåŒ…æ‹¬å¦‚ä½•åˆ©ç”¨Android Studioå¼€å‘ä»¥åŠå‘å¸ƒç­‰ã€‚ ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œç»™å¤§å®¶ä»‹ç»å¦‚ä½•å¼€å‘Flutter Pluginä¸­Androidçš„éƒ¨åˆ†ã€‚æœ‰å…³Flutterä»¥åŠFlutter Pluginçš„æ¦‚å¿µï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ä»Žå®˜ç½‘æŸ¥çœ‹ç›¸å…³èµ„æ–™ã€‚ ç®€ä»‹ç¬”è€…çš„çŽ¯å¢ƒæ˜¯Macä¸‹Android Studioè¿›è¡Œçš„å¼€å‘ï¼ŒASä¹Ÿæ˜¯è°·æ­Œå®˜æŽ¨çš„ï¼Œå®‰è£…flutteræ’ä»¶åŽï¼Œå¼€å‘èµ·æ¥ç›¸å¯¹äºŽå…¶ä»–IDEæ¥è¯´ï¼Œæ–¹ä¾¿å¾ˆå¤šï¼Œè‡ªå¸¦äº†ä¸‰ç§æ¨¡æ¿ï¼š Flutter Applicationï¼š Flutteråº”ç”¨ Flutter Pluginï¼šFlutteræ’ä»¶ Flutter Packageï¼šçº¯Dartç»„ä»¶ Pluginå…¶å®žå°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Packageã€‚Flutter Pluginæä¾›Androidæˆ–è€…iOSçš„åº•å±‚å°è£…ï¼Œåœ¨Flutterå±‚æä¾›ç»„ä»¶åŠŸèƒ½ï¼Œä½¿Flutterå¯ä»¥è¾ƒæ–¹ä¾¿çš„è°ƒå–Nativeçš„æ¨¡å—ã€‚å¾ˆå¤šå¹³å°ç›¸å…³æ€§æˆ–è€…å¯¹äºŽFlutterå®žçŽ°èµ·æ¥æ¯”è¾ƒå¤æ‚çš„éƒ¨åˆ†ï¼Œéƒ½å¯ä»¥å°è£…æˆPluginã€‚å…¶åŽŸç†å¦‚ä¸‹ æ¶ˆæ¯åœ¨clientå’Œhostä¹‹é—´é€šè¿‡å¹³å°é€šé“ï¼ˆplatform channelsï¼‰æ¥è¿›è¡Œçš„ï¼Œä¹‹é—´çš„é€šè®¯éƒ½æ˜¯å¼‚æ­¥çš„ã€‚ åˆ›å»ºç»„ä»¶ç›´æŽ¥åœ¨Android Studioä¸­æ–°å»ºä¸€ä¸ªFlutter Pluginçš„å·¥ç¨‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œæ¥è¿›è¡Œï¼Œä¾‹å¦‚åˆ›å»ºä¸€ä¸ªflutter_text_pluginã€‚ flutter create â€“org com.example â€“plugin flutter_text_plugin å¦‚æžœæƒ³æ”¯æŒswiftæˆ–è€…kotlinï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œåˆ›å»º: flutter create â€“org com.example â€“plugin -i swift -a kotlin flutter_text_plugin æ›´å¤šçš„å‚æ•°é€‰é¡¹ï¼Œå¤§å®¶å¯ä»¥ æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ï¼Œå½“ç„¶è¿˜æ˜¯æ¯”è¾ƒæŽ¨èç›´æŽ¥ç”¨ASè¿›è¡Œåˆ›å»ºï¼Œç®€å•ç›´è§‚ã€‚ç”¨ASæ‰“å¼€é¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°é¡¹ç›®çš„ç»„ç»‡ç»“æž„ 123456root android example ios lib ... androidä»¥åŠiosæ–‡ä»¶å¤¹æ˜¯æˆ‘ä»¬å°†è¦ç¼–å†™æ’ä»¶çš„nativeå±‚çš„åœ°æ–¹ï¼Œlibæ–‡ä»¶å¤¹æ˜¯ç¼–å†™ä¸Žnativeå±‚æ˜ å°„çš„åœ°æ–¹ï¼Œnativeä¸Žflutterä¹‹é—´ä¸èƒ½ç›´æŽ¥é€šä¿¡ï¼Œå¿…é¡»é€šè¿‡MethodChannelæ¥é—´æŽ¥è°ƒç”¨ã€‚exampleæ–‡ä»¶å¤¹åˆ™æ˜¯ä¾‹å­å·¥ç¨‹ï¼Œç¼–å†™çš„æ’ä»¶å¯ä»¥ç›´æŽ¥åœ¨è¿™ä¸ªé¡¹ç›®ä¸­è¿›è¡ŒéªŒè¯ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦åœ¨androidç›®å½•ä¸‹è¿›è¡Œï¼Œä¹Ÿå°±æ˜¯androidéƒ¨åˆ†ã€‚ ç¼–å†™Androidéƒ¨åˆ†ç”¨ASæ‰“å¼€flutter_text_plugin/androidé¡¹ç›®ï¼Œè¿™æ ·å­å¼€å‘èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚ä½†æ˜¯æ‰“å¼€è¿‡åŽï¼Œä¼šå‘çŽ°å‡ºçŽ°äº†å¾ˆå¤šé”™è¯¯ï¼Œæç¤ºæ‰¾ä¸åˆ°flutterç›¸å…³çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä»”ç»†çœ‹è¿™ä¸ªé¡¹ç›®ï¼Œä¼šå‘çŽ°è·Ÿæˆ‘ä»¬å¹³æ—¶ç”¨ASå»ºçš„Androidé¡¹ç›®æœ‰æ‰€ä¸åŒï¼Œå°‘äº†å¾ˆå¤šéƒ¨åˆ†ï¼Œç›®å½•ä¹Ÿæœ‰æ‰€ä¸åŒã€‚è¿™æ˜¯å› ä¸ºè¿™ä¸ªandroidé¡¹ç›®ä¸éœ€è¦èƒ½å¤Ÿç›´æŽ¥åŽ»è¿è¡Œï¼Œå› æ­¤å‡å°‘äº†å¾ˆå¤šä¸œè¥¿ã€‚ä½†æ˜¯å¯¹äºŽåˆæ¬¡æŽ¥è§¦çš„äººæ¥è¯´ï¼Œå¯èƒ½æ˜¯ä¸€å¤´æ‡µé€¼ï¼Œä¾‹å¦‚è¯¥å¦‚ä½•æ·»åŠ ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚ä½•æ·»åŠ proguard ruleç­‰ç­‰ã€‚ å¼•å…¥flutteråº“androidæ’ä»¶å·¥ç¨‹æ˜¯æ²¡æœ‰å¼•å…¥flutteråº“çš„ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºçŽ°é”™è¯¯æç¤ºï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•å»ºç«‹ä¸€ä¸ªlibsæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾flutteråº“ã€‚ flutteråº“å°±åœ¨æˆ‘ä»¬çš„flutter sdkä¸­ï¼Œè·¯å¾„å¦‚ä¸‹ /bin/cache/artifacts/engine engineä¸‹é¢åŒ…å«äº†å„ç§å¹³å°çš„flutteråº“ï¼Œæˆ‘ä»¬éšä¾¿æ‹·è´ä¸€ä¸ªAndroidå¹³å°çš„åº“åˆ°libsæ–‡ä»¶å¤¹ä¸‹ï¼Œå³é”®flutter.jarï¼Œå¼¹å‡ºèœå•é€‰æ‹©Add As Library...ã€‚ ç»è¿‡è¿™ä¸€æ­¥ï¼Œé¡¹ç›®ä¸­ä¸ä¼šå†æŠ¥é”™äº†ï¼Œä½†æ˜¯ï¼Œç”±äºŽæ•´ä¸ªflutter pluginåŒ…å«äº†flutteråº“ï¼Œå› æ­¤ä¸èƒ½åªæ˜¯ç®€å•çš„æ·»åŠ å°±äº†äº‹äº†ï¼Œç‚¹å‡»èœå•Project Structure...ï¼Œæ‰¾åˆ°flutter_text_pluginçš„Dependenciesä¸­ï¼Œå°†flutteråº“çš„Scopeä»ŽImplementationæ”¹æˆCompile Onlyã€‚è‡³æ­¤ï¼Œå¼•å…¥flutteråº“çš„å·¥ä½œå®Œæˆäº†ï¼Œå¯ä»¥è¿›è¡Œæ’ä»¶çš„ç¼–å†™æ“ä½œäº†ã€‚ æ·»åŠ ç¬¬ä¸‰æ–¹åº“æ·»åŠ ç¬¬ä¸‰æ–¹åº“æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯jaråŒ…å¼•å…¥ï¼Œå¦ä¸€ç§é€šè¿‡gradleçš„æ–¹å¼è¿›è¡Œã€‚ç”±äºŽè¿›è¡Œäº†ç¬¬ä¸€æ­¥flutteråº“çš„å¼•å…¥ï¼Œè¿™ä¸€æ­¥å°±ç®€å•å¤šäº†ã€‚æŸ¥çœ‹build.gradleæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æœ€ä¸‹é¢å‡ºçŽ°äº†å¦‚ä¸‹çš„ä¿¡æ¯ã€‚ 123dependencies &#123; compileOnly files('libs/flutter.jar')&#125; çœ‹åˆ°è¿™ä¸ªï¼Œæ˜¯ä¸æ˜¯å°±æ˜Žæœ—å¤šäº†ï¼Œæ·»åŠ é™æ€åº“ä»¥åŠæ·»åŠ åœ¨çº¿åº“éƒ½å¯ä»¥åœ¨è¿™ä¸ªåœ°æ–¹è¿›è¡Œã€‚ä¾‹å¦‚æˆ‘æ·»åŠ ä¸€ä¸ªbuglyé™æ€åº“ä»¥åŠokhttp3åº“ï¼š 12345dependencies &#123; compileOnly files('libs/flutter.jar') implementation 'com.squareup.okhttp3:okhttp:3.10.0' implementation files('libs/bugly_crash_release.jar')&#125; æ·»åŠ proguard ruleç”±äºŽäº†buglyä»¥åŠokhttp3åº“ï¼Œå› æ­¤éœ€è¦æ·»åŠ progurad ruleã€‚æˆ‘ä»¬å‘çŽ°é¡¹ç›®ä¸­æ²¡æœ‰proguard-rules.proæ–‡ä»¶ï¼Œå› æ­¤è¿™ä¸€æ­¥ä¹Ÿéœ€è¦æˆ‘ä»¬è‡ªå·±åŽ»åˆ›å»ºï¼Œåœ¨æ ¹ç›®å½•ä¸‹ï¼Œå»ºç«‹proguard-rules.proæ–‡ä»¶ï¼Œå°†æ··æ·†è§„åˆ™æ·»åŠ è¿›åŽ»ï¼Œç„¶åŽä¿®æ”¹build.gradleæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä¿¡æ¯ï¼Œè·Ÿæ™®é€šAndroidé¡¹ç›®å·®ä¸å¤šï¼š 12345678910buildTypes &#123; release &#123; minifyEnabled true proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' &#125; debug &#123; minifyEnabled false proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' &#125; &#125; Androidæƒé™æ·»åŠ äº†buglyä»¥åŠokhttp3åº“ï¼Œéœ€è¦å¯¹åº”çš„æƒé™ç”³æ˜Žï¼Œæ‰èƒ½æ­£å¸¸è¿è¡Œã€‚ç›´æŽ¥åœ¨manifestæ–‡ä»¶ä¸‹ï¼Œæ·»åŠ å¯¹åº”çš„æƒé™ 12345&lt;uses-permission android:name="android.permission.READ_PHONE_STATE" /&gt;&lt;uses-permission android:name="android.permission.INTERNET" /&gt;&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;&lt;uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /&gt;&lt;uses-permission android:name="android.permission.READ_LOGS"/&gt; æ’ä»¶å¼€å‘è‡³æ­¤ï¼Œå‡†å¤‡å·¥ä½œéƒ½å·²å°±ç»ªï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªé¡¹ç›®å½“åšä¸€ä¸ªç‹¬ç«‹çš„Androidé¡¹ç›®ï¼Œåœ¨ä¸Šé¢è¿›è¡Œå„ç§å°è£…æ“ä½œï¼Œç„¶åŽåœ¨FlutterTestPluginæ–‡ä»¶ä¸‹ï¼Œå°†æŽ¥å£æš´éœ²å‡ºæ¥ã€‚é€šè¿‡platform channelsä¸Žflutterå±‚å…³è”èµ·æ¥ã€‚ å‘å¸ƒå½“æ’ä»¶å¼€å‘å®Œæ¯•ï¼Œå¯ä»¥å°†æ’ä»¶å‘å¸ƒè®©å…¶ä»–äººä½¿ç”¨ï¼Œåœ¨å‘å¸ƒä¹‹å‰ï¼Œç¡®ä¿pubspec.yaml,ã€README.mdä»¥åŠCHANGELOG.mdæ–‡ä»¶çš„å†…å®¹éƒ½æ­£ç¡®å¡«å†™å®Œæ¯•ã€‚å¯ä»¥é€šè¿‡dry-runå‘½ä»¤æ¥çœ‹å‡†å¤‡æ˜¯å¦å°±ç»ªã€‚ flutter packages pub publish â€“dry-run æ£€æŸ¥æ— è¯¯åŽï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå‘å¸ƒåˆ°Pubä¸Šã€‚ flutter packages pub publish å¦‚ä½•å¼•ç”¨å¯¹æ’ä»¶çš„å¼•ç”¨æœ‰ä¸¤ç§ï¼Œå·²ç»å‘å¸ƒçš„å’Œæœªå‘å¸ƒçš„ã€‚ å¼•ç”¨å‘å¸ƒçš„åº“flutteré¡¹ç›®çš„å¾ˆå¤šèµ„æºç®¡ç†éƒ½åœ¨æ ¹ç›®å½•çš„pubspec.yamlä¸‹é¢ï¼Œç±»ä¼¼äºŽjsä¸­çš„ä¸€äº›åŒ…ç®¡ç†ä¸€æ ·ï¼Œåœ¨dependenciesåŠ ä¸Šæˆ‘ä»¬éœ€è¦å¼•å…¥çš„åº“ï¼Œä¾‹å¦‚å¼•å…¥url_launcheråº“ï¼š 12dependencies: url_launcher: ^0.4.2 å¦‚æžœè¿™ä¸ªåº“åŒ…å«äº†ä¸€äº›å¹³å°ç›¸å…³çš„ä¸œè¥¿ï¼Œä¾‹å¦‚éœ€è¦åœ¨nativeå±‚è¿›è¡Œä½¿ç”¨çš„è¯ï¼Œåˆ™éœ€è¦åœ¨å¯¹åº”çš„nativeé¡¹ç›®å•ç‹¬åšå¼•ç”¨ã€‚ Androidä¿®æ”¹android/build.gradleçš„dependencieså¤„åšå¼•ç”¨ï¼š 123dependencies &#123; provided rootProject.findProject(":url_launcher") &#125; iOSä¿®æ”¹ios/hello.podspecæ–‡ä»¶ 123Pod::Spec.new do |s| # lines skipped s.dependency &apos;url_launcher&apos; å¼•ç”¨å†²çªå¼•ç”¨ä¸åŒçš„åº“å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›å†²çªï¼Œä¾‹å¦‚Aå’ŒBä¸¤ä¸ªæ’ä»¶ï¼Œéƒ½åŒ…å«äº†Cæ’ä»¶ï¼Œä½†æ˜¯æ‰€éœ€çš„ç‰ˆæœ¬ä¸åŒã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é‡‡å–ä»¥ä¸‹æŽªæ–½é¿å…è¿™ç§é—®é¢˜ï¼š å°½é‡ä½¿ç”¨èŒƒå›´ç‰ˆæœ¬è€Œä¸æ˜¯æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ã€‚ å¼ºåˆ¶ç»Ÿä¸€å†²çªçš„æ’ä»¶ç‰ˆæœ¬ å¯¹äºŽnativeå±‚ï¼Œandroidå¯ä»¥é€šè¿‡forceå‘½ä»¤å¼ºåˆ¶æŒ‡å®šç‰ˆæœ¬ï¼Œè€ŒiOSè¿™è¾¹ï¼ŒCocoapodsåˆ™ä¸æ”¯æŒå¼•ç”¨çš„overrideåŠŸèƒ½ã€‚ å¼•ç”¨æœªå‘å¸ƒçš„åº“å¼•ç”¨æœªå‘å¸ƒçš„åº“æœ‰ä¸¤ç§æ–¹å¼ï¼Œé€šè¿‡æœ¬åœ°è·¯å¾„å’Œgitåœ°å€çš„æ–¹å¼ï¼š åŸºäºŽPathçš„å¼•ç”¨æ–¹å¼ï¼šè¿™ç§æ–¹å¼ä¸»è¦é’ˆå¯¹æœ¬åœ°çš„æœªå‘å¸ƒçš„åº“ï¼Œå¼•ç”¨çš„è·¯å¾„å¯ä»¥æ˜¯ç›¸å¯¹æˆ–è€…ç»å¯¹è·¯å¾„ã€‚ 123dependencies: plugin1: path: ../plugin1/ åŸºäºŽGitçš„å¼•ç”¨æ–¹å¼ï¼šè¿™ç§æ–¹å¼é’ˆå¯¹å­˜æ”¾åœ¨gitä¸Šçš„åº“ï¼Œå…¶ä¸­pathæ˜¯å¯é€‰çš„ï¼Œå¯ä»¥å®šä½åˆ°æŸä¸ªå­ç›®å½• 12345dependencies: package1: git: url: git://github.com/flutter/packages.git path: packages/package1 åŽè¯ç¬”è€…æ–°å»ºäº†ä¸€ä¸ªflutterå­¦ä¹ ç›¸å…³çš„é¡¹ç›®ï¼Œgithubåœ°å€ï¼Œé‡Œé¢åŒ…å«äº†ç¬”è€…å†™çš„å…³äºŽflutterå­¦ä¹ ç›¸å…³çš„ä¸€äº›æ–‡ç« ï¼ŒåŽæœŸä¹Ÿä¼šå®šæœŸæ›´æ–°ï¼Œä¹Ÿä¼šä¸Šä¼ ä¸€äº›å­¦ä¹ demoï¼Œæ¬¢è¿Žå¤§å®¶å…³æ³¨ã€‚ å‚è€ƒ Flutterè¿›é˜¶â€”å¹³å°æ’ä»¶ Flutter - Creating a Plugin Flutter for Android Developers Writing custom platform-specific code with platform channels Developing Packages &amp; Plugins Using Packages]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterä¸ŽAndroidçš„äº¤äº’]]></title>
    <url>%2Fposts%2F5ae94dfd.html</url>
    <content type="text"><![CDATA[Flutter è¯´åˆ°åº•åªæ˜¯ä¸€ä¸ª UI æ¡†æž¶ï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½éœ€è¦é€šè¿‡åŽŸç”Ÿçš„ Api æ¥å®žçŽ°ï¼Œé‚£ä¹ˆå°±ä¼šæ¶‰åŠåˆ° Flutter å’Œ Native çš„äº¤äº’ï¼Œå› ä¸ºæœ¬äººä¸æ‡‚ iOS å¼€å‘ï¼Œæ‰€ä»¥åªèƒ½è®²ä¸‹ Flutter åŒ Android çš„äº¤äº’ã€‚ Android é¡¹ç›®é…ç½® Flutter ä¾èµ–æ—¢ç„¶æ˜¯äº’ç›¸äº¤äº’ï¼Œé‚£ä¹ˆéœ€è¦å‡†å¤‡ä¸€ä¸ª Android é¡¹ç›®ã€‚æŽ¥ç€å°±éœ€è¦åˆ›å»º flutter moduleï¼Œè®© Android é¡¹ç›®ä¾èµ–ï¼Œåˆ›å»ºçš„æ–¹æ³•å¯ä»¥å‚è€ƒå®˜ç½‘ Flutter Wikiï¼Œè™½ç„¶æ˜¯å®˜ç½‘æä¾›çš„æ–¹æ³•ï¼Œä½†æ˜¯å®Œå…¨æŒ‰ç…§è¿™ä¸ªæ­¥éª¤æ¥ï¼Œè¿˜æ˜¯ä¼šæœ‰å‘çš„ï¼Œè¿™è¾¹å°±æ…¢æ…¢ä¸€æ­¥æ­¥è§£å†³å‘ã€‚ å¦‚æžœä½ ç”¨çš„æ˜¯ Android Studio è¿›è¡Œå¼€å‘çš„è¯ï¼Œç›´æŽ¥æ‰“å¼€åº•éƒ¨çš„ Terminalï¼Œç›´æŽ¥åˆ›å»º flutter module ä¾èµ– flutter create -t module flutter_native_contact è‡³äºŽ module åå¯ä»¥éšæ„å¡«å†™ï¼Œmodule åˆ›å»ºå®ŒåŽç»“æž„å¤§æ¦‚æ˜¯è¿™æ ·çš„ æŽ¥ç€åˆ‡æ¢åˆ° module ä¸‹çš„ .android æ–‡ä»¶å¤¹ï¼ŒæŽ¥ç€æœ‰å‘æ¥äº†ï¼Œå®˜ç½‘æä¾›çš„æ–¹æ³•æ˜¯ ./gradlew flutter:assembleDebug å¯èƒ½ä¼šæç¤ºå‘½ä»¤ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆç›´æŽ¥é€šè¿‡ gradlew flutter:assembleDebug æ¥è¿è¡Œï¼Œç­‰å®ƒè‡ªåŠ¨è·‘å®ŒåŽï¼Œæ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ settings.gradle æ–‡ä»¶ï¼ŒåŠ å…¥å®˜ç½‘æä¾›çš„ gradle ä»£ç  12345setBinding(new Binding([gradle: this])) // newevaluate(new File( // new settingsDir.parentFile, // new 'flutter_native_contact/.android/include_flutter.groovy' // new)) // new ä½ ä»¥ä¸ºè¿™é‡Œæ²¡å‘ï¼ŒçœŸæ˜¯å›¾æ ·å›¾æ£®ç ´ï¼Œæ²¡å‘æ˜¯ä¸å¯èƒ½çš„ï¼Œç¼–è¯‘å™¨å¤§çˆ·å¯èƒ½ä¼šç»™ä½ ç”©è¿™ä¹ˆä¸ªé”™è¯¯ å¾ˆæ˜Žæ˜¾å¯ä»¥çœ‹å‡ºæ˜¯æ‰¾ä¸åˆ°æˆ‘ä»¬çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æŠŠæ–‡ä»¶åè·¯å¾„ç»™è¡¥å…¨ 1234evaluate(new File( // new settingsDir.parentFile, // new 'FlutterNativeContactDemo/flutter_native_contact/.android/include_flutter.groovy' // è¿™é‡Œè¡¥å…¨è·¯å¾„)) æŽ¥ç€æ‰“å¼€åŽŸæœ‰é¡¹ç›®ä¸‹ï¼ŒåŽŸæœ‰é¡¹ç›®ä¸‹ï¼ŒåŽŸæœ‰é¡¹ç›®ä¸‹çš„ app ä¸­çš„ build.gradle æ–‡ä»¶ï¼Œåœ¨ android ä¸‹åŠ ä¸Šå¦‚ä¸‹ä»£ç  1234compileOptions &#123; sourceCompatibility 1.8 targetCompatibility 1.8&#125; è¿™ä¸ªå¿…é¡»è¦åŠ ï¼Œä¸è¦é—®ä¸ºä»€ä¹ˆï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæœ€åŽåœ¨é¡¹ç›®ä¸‹æ·»åŠ  flutter module çš„ä¾èµ–å°±å®Œæˆäº†ã€‚è¿™ä¸ªè¿‡ç¨‹å‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªä»€ä¹ˆé“ç†å‘¢ï¼Ÿ*ä¸è¦ä»¥ä¸ºå®˜ç½‘çš„éƒ½å¯¹ï¼Œå®˜ç½‘è®²çš„ä¹Ÿä¸æ˜¯å®Œå…¨å¯ä¿¡çš„ï¼Œæ—¶ä¸æ—¶ç»™ä½ æ¥ä¸ªå‘å°±èƒ½å¡ä½ è€åŠå¤©ã€‚ åŽŸç”Ÿç•Œé¢åŠ è½½ Flutter é¡µé¢é‚£ä¹ˆå¦‚ä½•åœ¨åŽŸç”Ÿç•Œé¢æ˜¾ç¤º Flutter ç•Œé¢å‘¢ï¼Œè¿™ä¸ªå°±éœ€è¦é€šè¿‡ FlutterView æ¥å®žçŽ°äº†ï¼ŒFlutter è¿™ä¸ªç±»æä¾›äº† createView å’Œ createFragment ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«ç”¨äºŽè¿”å›ž FlutterView å’Œ FlutterFragment å®žä¾‹ï¼ŒFlutterFragment çš„å®žçŽ°åŽŸç†ä¹Ÿæ˜¯é€šè¿‡ FlutterView æ¥å®žçŽ°çš„ï¼Œå¯ä»¥ç®€å•çœ‹ä¸‹ FlutterFragment çš„æºç  1234567891011121314151617181920212223242526/** * A &#123;@link Fragment&#125; managing a &#123;@link FlutterView&#125;. * * &lt;p&gt;&lt;strong&gt;Warning:&lt;/strong&gt; This file is auto-generated by Flutter tooling. * DO NOT EDIT.&lt;/p&gt; */public class FlutterFragment extends Fragment &#123; public static final String ARG_ROUTE = "route"; private String mRoute = "/"; @Override public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); // èŽ·å–ä¼ å…¥çš„è·¯ç”±å€¼ï¼Œé»˜è®¤ä¸º '/' if (getArguments() != null) &#123; mRoute = getArguments().getString(ARG_ROUTE); &#125; &#125; @Override public FlutterView onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) &#123; // æœ€åŽè¿˜æ˜¯æŒºè¿‡ createView æ–¹æ³•æ¥ç”Ÿæˆé¡µé¢ï¼Œåªä¸è¿‡ç›´æŽ¥æ”¾åœ¨ fragmentï¼Œ // æ”¾åœ¨ fragment ä¼šæ¯”ç›´æŽ¥ ä½¿ç”¨ FlutterView æ›´æ–¹ä¾¿ç®¡ç†ï¼Œä¾‹å¦‚å®žçŽ° ViewPager ç­‰ return Flutter.createView(getActivity(), getLifecycle(), mRoute); &#125;&#125; createFragment æ–¹å¼åŠ è½½åœ¨åŽŸç”Ÿé¡µé¢æ˜¾ç¤º Flutter ç•Œé¢çš„ç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯åŠ è½½ FlutterFragmentï¼Œçœ‹ä¸ªæ¯”è¾ƒç®€å•çš„ä¾‹å­å§ 1234567891011121314151617181920212223242526&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="match_parent" tools:context=".MainActivity"&gt; &lt;!-- è¿™ä¸ªå¸ƒå±€ç”¨äºŽåŠ è½½ fragment --&gt; &lt;FrameLayout android:id="@+id/fragment_container" android:layout_width="match_parent" android:layout_height="match_parent" /&gt; &lt;android.support.design.widget.FloatingActionButton android:id="@+id/flutter_fragment" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginEnd="20dp" android:layout_marginBottom="50dp" android:src="@drawable/ic_add_white_36dp" app:fabSize="auto" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintEnd_toEndOf="parent" /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; åœ¨ Activity å¯ä»¥ç›´æŽ¥é€šè¿‡è¿”å›ž FlutterFragment åŠ è½½åˆ° FrameLayout å³å¯ 1234567891011class MainActivity : AppCompatActivity() &#123; override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.activity_main) supportFragmentManager.beginTransaction() .add(R.id.fragment_container, Flutter.createFragment("route_flutter")) .commit() &#125;&#125; è¿™æ ·å°±æŠŠ Flutter é¡µé¢åŠ è½½åˆ°åŽŸç”Ÿç•Œé¢äº†ï¼Œä¼šé€šè¿‡ä¼ é€’çš„è·¯ç”±å€¼åœ¨ dart å±‚è¿›è¡ŒæŸ¥æ‰¾ï¼Œæ‰€ä»¥æŽ¥ç€å°±éœ€è¦ç¼–å†™ Flutter ç•Œé¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/// runApp å†…éƒ¨å€¼ä¹Ÿå¯ä»¥ç›´æŽ¥ä¼ å…¥ _buildWidgetForNativeRoute æ–¹æ³•/// è¿™è¾¹åœ¨å¤–å±‚åµŒå¥—ä¸€å±‚ MaterialApp ä¸»è¦æ˜¯é˜²æ­¢ä¸€äº›ä¸å¿…è¦çš„éº»çƒ¦ï¼Œ/// ä¾‹å¦‚ MediaQuery è¿™æ–¹é¢çš„ä½¿ç”¨ç­‰void main() =&gt; runApp(FlutterApp());class FlutterApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return MaterialApp( home: _buildWidgetForNativeRoute(window.defaultRouteName), debugShowCheckedModeBanner: false, theme: ThemeData( primaryColor: Color(0XFF008577), accentColor: Color(0xFFD81B60), primaryColorDark: Color(0xFF00574B), iconTheme: IconThemeData(color: Color(0xFFD81B60)), ), ); &#125;&#125;/// è¯¥æ–¹æ³•ç”¨äºŽåˆ¤æ–­åŽŸç”Ÿç•Œé¢ä¼ é€’è¿‡æ¥çš„è·¯ç”±å€¼ï¼ŒåŠ è½½ä¸åŒçš„é¡µé¢Widget _buildWidgetForNativeRoute(String route) &#123; switch (route) &#123; case 'route_flutter': return GreetFlutterPage(); // é»˜è®¤çš„è·¯ç”±å€¼ä¸º '/'ï¼Œæ‰€ä»¥åœ¨ default æƒ…å†µä¹Ÿéœ€è¦è¿”å›žé¡µé¢ï¼Œå¦åˆ™ dart ä¼šæŠ¥é”™ï¼Œè¿™é‡Œé»˜è®¤è¿”å›žç©ºé¡µé¢ default: return Scaffold(); &#125;&#125;class GreetFlutterPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('NativeMessageContactPage'), ), body: Center( child: Text( 'This is a flutter fragment page', style: TextStyle(fontSize: 20.0, color: Colors.black), ), ), ); &#125;&#125; è¿è¡ŒåŽå¯ä»¥çœ‹åˆ°é¡µé¢åŠ è½½å‡ºæ¥äº†ï¼Œä¸è¿‡ä¼šæœ‰ä¸€æ®µæ—¶é—´çš„ç©ºç™½ï¼Œè¿™ä¸ªåœ¨æ­£å¼æ‰“åŒ…åŽå°±ä¸ä¼šå‡ºçŽ°ï¼Œæ‰€ä»¥ä¸å¿…æ‹…å¿ƒã€‚æœ€åŽçš„é¡µé¢åº”è¯¥æ˜¯è¿™æ ·çš„ createView æ–¹å¼åŠ è½½æŽ¥ç€çœ‹ä¸‹ createView æ–¹æ³•ï¼Œè¯´ç™½äº†ï¼Œç¬¬ä¸€ç§æ–¹æ³•æœ€åŽè¿˜æ˜¯ä¼šé€šè¿‡è¯¥æ–¹å¼å®žçŽ° 1234567891011121314151617181920212223242526272829303132333435@NonNullpublic static FlutterView createView(@NonNull final Activity activity, @NonNull final Lifecycle lifecycle, final String initialRoute) &#123; // äº¤äº’å‰çš„ä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œéœ€è¦å®Œæˆæ‰å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥ï¼ŒåŒæ—¶éœ€è¦ä¿è¯å½“å‰çº¿ç¨‹ä¸ºä¸»çº¿ç¨‹ // Looper.myLooper() == Looper.getMainLooper()ï¼Œå¦åˆ™ä¼šç”©ä½ ä¸€è„¸çš„ IllegalStateException FlutterMain.startInitialization(activity.getApplicationContext()); FlutterMain.ensureInitializationComplete(activity.getApplicationContext(), null); final FlutterNativeView nativeView = new FlutterNativeView(activity); // å°† flutter é¡µé¢ç»‘å®šåˆ°ç›¸åº”çš„ activity final FlutterView flutterView = new FlutterView(activity, null, nativeView) &#123; // ...... &#125;; // å°†è·¯ç”±å€¼ä¼ åˆ° flutter å±‚ï¼Œå¹¶åŠ è½½ç›¸åº”çš„é¡µé¢ï¼Œ if (initialRoute != null) &#123; flutterView.setInitialRoute(initialRoute); &#125; // ç»‘å®š lifecycleï¼Œæ–¹ä¾¿ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ activity ç»‘å®š // ä¸ç†Ÿæ‚‰ LifeCycle çš„åŒå­¦å¯ä»¥è‡ªè¡Œç½‘ä¸ŠæŸ¥æ‰¾èµ„æ–™ lifecycle.addObserver(new LifecycleObserver() &#123; @OnLifecycleEvent(Lifecycle.Event.ON_CREATE) public void onCreate() &#123; // é…ç½®ä¸€äº›å‚æ•°ï¼Œä¼ é€’åˆ° flutter å±‚ final FlutterRunArguments arguments = new FlutterRunArguments(); arguments.bundlePath = FlutterMain.findAppBundlePath(activity.getApplicationContext()); arguments.entrypoint = "main"; // æœ€ç»ˆä¼šè°ƒç”¨æ–¹æ³• nativeRunBundleAndSnapshotFromLibraryï¼Œè¿™æ˜¯ä¸€ä¸ª native æ–¹æ³•ï¼Œè¿›è¡Œäº¤äº’ flutterView.runFromBundle(arguments); // è¿›è¡Œæ³¨å†Œ GeneratedPluginRegistrant.registerWith(flutterView.getPluginRegistry()); &#125; // ...... &#125;); return flutterView;&#125; é€šè¿‡ createView æ–¹æ³•è¿”å›žçš„ FlutterViewï¼Œé€šè¿‡è®¾ç½® Layoutparams å‚æ•°å°±å¯ä»¥æ·»åŠ åˆ°ç›¸åº”çš„å¸ƒå±€ä¸Šï¼Œè¿˜æœ‰ä¸€ç§ç›´æŽ¥é€šè¿‡ addContentView æ–¹å¼è¿›è¡ŒåŠ è½½ï¼Œè¿™é‡Œç›´æŽ¥ä¿®æ”¹åŽŸæœ‰ä»£ç ï¼Œ 1234567override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) // setContentView(R.layout.activity_main) ä¸éœ€è¦è¿™ä¸€æ­¥äº† val flutterView = Flutter.createView(this@ContactActivity, lifecycle, "route_flutter") val lp = FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT) addContentView(flutterView, lp) // ç›´æŽ¥åŠ è½½åˆ° activity é¡µé¢ &#125; ä½†æ˜¯é€šè¿‡è¿™æ ·åŠ è½½çš„è¯ï¼Œé‚£ä¹ˆæ•´ä¸ªé¡µé¢éƒ½æ˜¯ flutter çš„é¡µé¢ã€‚é‚£ä¹ˆä¹‹å‰çš„æ•ˆæžœçš„ FAB åˆ™ä¸ä¼šè¢«åŠ è½½å‡ºæ¥äº†ï¼Œå³ä½¿æ²¡æœ‰çœç•¥ setContentView(R.layout.activity_main) æ–¹æ³•ï¼Œè¿™ä¸ªé¡µé¢çš„ xml å¸ƒå±€ä¹Ÿä¼šè¢«è¦†ç›–ã€‚ PlantformChannelé‚£ä¹ˆèƒ½å¤Ÿåœ¨åŽŸç”Ÿç•Œé¢æ˜¾ç¤º flutter é¡µé¢äº†ï¼Œå¦‚ä½•äº’ç›¸äº¤äº’å‘¢ï¼Œè¿™å°±éœ€è¦é€šè¿‡ PlantformChannel æ¥æ‰§è¡Œäº†ï¼ŒPlantformChannel ä¸»è¦æœ‰ä¸‰ç§ç±»åž‹ï¼ŒBasicMessageChannelï¼ŒMethodChannelï¼ŒEventChannelã€‚é€šè¿‡æŸ¥çœ‹æºç å¯ä»¥å‘çŽ°ï¼Œä¸‰ä¸ª Channel çš„å®žçŽ°æœºåˆ¶ç±»ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡ BinaryMessenger è¿›è¡Œä¿¡æ¯äº¤æµï¼Œæ¯ä¸ª Channel é€šè¿‡ä¼ å…¥çš„ channel name è¿›è¡ŒåŒºåˆ†ï¼Œæ‰€ä»¥åœ¨æ³¨å†Œ Channel çš„æ—¶å€™å¿…é¡»è¦ä¿è¯ channel name æ˜¯å”¯ä¸€çš„ï¼ŒåŒæ—¶éœ€è¦ä¼ å…¥ä¸€ä¸ª BinaryMessageHandler å®žä¾‹ï¼Œç”¨äºŽä¼ é€’ä¿¡æ¯çš„å¤„ç†ï¼Œå½“ Handler å¤„ç†å®Œä¿¡æ¯åŽï¼Œä¼šè¿”å›žä¸€ä¸ª resultï¼Œç„¶åŽé€šè¿‡ BinaryMessenger å°† result è¿”å›žåˆ° Flutter å±‚ã€‚å¦‚æžœéœ€è¦æ·±å…¥ç†è§£è¿™è¾¹æŽ¨èä¸€ç¯‡æ–‡ç« æ·±å…¥ç†è§£Flutter PlatformChannel æŽ¥ä¸‹æ¥ç›´æŽ¥çœ‹ä¾‹å­å§ï¼Œåœ¨åˆ›å»º PlatformChannel çš„æ—¶å€™éœ€è¦ä¼ å…¥ä¸€ä¸ª BinaryMessenger å®žä¾‹ï¼Œé€šè¿‡æŸ¥çœ‹ FlutterView çš„æºç å¯ä»¥å‘çŽ°ï¼ŒFlutterView å°±æ˜¯ä¸€ä¸ª BinaryMessenger åœ¨ Android ç«¯çš„å®žçŽ°ï¼Œæ‰€ä»¥å‘¢ï¼Œå¯ä»¥ç›´æŽ¥é€šè¿‡å‰é¢ä»‹ç»çš„ Flutter.createView æ–¹æ³•èŽ·å–æ³¨å†Œ Channel æ—¶çš„ BinaryMessenger å®žä¾‹äº†ï¼ŒçœŸæ˜¯å¾—æ¥å…¨éƒ¨è´¹å·¥å¤«~å› ä¸ºé€šä¿¡çš„æ–¹æ³•å¯èƒ½åœ¨å¤šä¸ªç•Œé¢ä¼šä½¿ç”¨ï¼Œæ‰€ä»¥è¿˜æ˜¯å°è£…ä¸€ä¸ªé€šç”¨ç±»æ¥å¤„ç†ä¼šæ¯”è¾ƒåˆç† BasicMessageChannel BasicMessageChannel ç”¨äºŽä¼ é€’å­—ç¬¦ä¸²å’ŒåŠç»“æž„åŒ–çš„ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324class FlutterPlugin(private val flutterView: FlutterView) :BasicMessageChannel.MessageHandler&lt;Any&gt;&#123; companion object &#123; private const val TAG = "FlutterPlugin" @JvmStatic fun registerPlugin(flutterView: FlutterView): FlutterPlugin &#123; // channel name éœ€è¦ä¿æŒä¸¤ä¾§ä¸€è‡´ val messageChannel = BasicMessageChannel(flutterView, Constant.MESSAGE_CHANNEL_NAME, StandardMessageCodec.INSTANCE) // MessageCodec æœ‰å¤šç§å®žçŽ°æ–¹å¼ï¼Œå¯ä»¥å‚è€ƒæŽ¨èçš„æ–‡ç«  val instance = FlutterPlugin(flutterView) messageChannel.setMessageHandler(instance) // æ³¨å†Œå¤„ç†çš„ Hnadler return instance &#125; &#125; override fun onMessage(`object`: Any?, reply: BasicMessageChannel.Reply&lt;Any&gt;?) &#123; // ç®€å•çš„å°†ä»Ž Flutter ä¼ è¿‡æ¥çš„æ¶ˆæ¯è¿›è¡Œåå¸ï¼ŒåŒæ—¶è¿”å›žè‡ªå·±çš„äº¤äº’ä¿¡æ¯ // `object` ä¸­åŒ…å«çš„å°±æ˜¯ Flutter å±‚ä¼ é€’è¿‡æ¥çš„ä¿¡æ¯ï¼Œreply å®žä¾‹ç”¨äºŽä¼ é€’ä¿¡æ¯åˆ° Flutter å±‚ Toast.makeText(flutterView.context, `object`.toString(), Toast.LENGTH_LONG).show() reply?.reply("\"Hello Flutter\"--- an message from Android") &#125;&#125; æŽ¥ç€å°±éœ€è¦æœ‰ä¸ª FlutterView ç”¨æ¥æ³¨å†Œï¼Œæ–°å»ºä¸€ä¸ª Activityï¼Œç”¨äºŽåŠ è½½ Flutter é¡µé¢ 123456789101112131415161718class ContactActivity : AppCompatActivity() &#123; private lateinit var plugin: FlutterPlugin override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) // ä¼ å…¥è·¯ç”±å€¼ï¼Œéœ€è¦åœ¨ flutter å±‚ç”Ÿæˆç›¸åº”çš„ç•Œé¢ val flutterView = Flutter.createView(this@ContactActivity, lifecycle, "route_contact") val lp = FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT) addContentView(flutterView, lp) plugin = FlutterPlugin.registerPlugin(flutterView) &#125; override fun onDestroy() &#123; super.onDestroy() &#125;&#125; é‚£ä¹ˆæˆ‘ä»¬å°±è¦åœ¨ Flutter ç•Œé¢çš„ _buildWidgetForNativeRoute æ–¹æ³•åŠ å…¥æ–°è·¯ç”±å€¼å¯¹åº”çš„ç•Œé¢ 12345678910111213141516171819202122232425262728293031323334353637Widget _buildWidgetForNativeRoute(String route) &#123; switch (route) &#123; // ... case 'route_contact': return FlutterContactPage(); default: return Scaffold(); &#125;&#125;class FlutterContactPage extends StatelessWidget &#123; // æ³¨å†Œå¯¹åº”çš„ channelï¼Œè¦ä¿è¯ channel name å’ŒåŽŸç”Ÿå±‚æ˜¯ä¸€è‡´çš„ final BasicMessageChannel _messageChannel = BasicMessageChannel(MESSAGE_CHANNEL_NAME, StandardMessageCodec()); @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Flutter Page'), ), // ç®€å•æ”¾ä¸€ä¸ªæŒ‰é’®ï¼Œé€šè¿‡ channel ä¼ è¾“æ¶ˆæ¯è¿‡åŽ»ï¼ŒåŒæ—¶å°†åŽŸç”Ÿå±‚è¿”å›žçš„æ¶ˆæ¯æ‰“å°å‡ºæ¥ body: RaisedButton( onPressed: () &#123; _messageChannel .send('"Hello Native" --- an message from flutter') .then((str) &#123; print('Receive message: $str'); &#125;); &#125;, child: Text('Send Message to Native'), ), ); &#125;&#125; æœ€åŽçš„æ•ˆæžœå°ä¼™ä¼´å¯ä»¥è‡ªè¡Œæ‰§è¡Œï¼Œç‚¹å‡»æŒ‰é’®åŽä¼šå¼¹å‡ºåå¸ï¼Œåå¸å†…å®¹å°±æ˜¯ Flutter ä¼ é€’çš„ä¿¡æ¯ï¼ŒåŒæ—¶åœ¨æŽ§åˆ¶å°å¯ä»¥çœ‹åˆ°ä»ŽåŽŸç”Ÿå±‚è¿”å›žçš„ä¿¡æ¯ã€‚ MethodChannel MethodChannel ç”¨äºŽä¼ é€’æ–¹æ³•è°ƒç”¨ï¼ˆmethod invocationï¼‰ ç›´æŽ¥åœ¨ä¸Šè¿°ä¾‹å­ä¸­è¿›è¡Œä¿®æ”¹ï¼Œä¾‹å¦‚åœ¨ Flutter é¡µé¢ä¸­å®žçŽ° Activity çš„ finish æ–¹æ³•ï¼Œå¹¶ä¼ é€’å‚æ•°åˆ°å‰ä¸€ä¸ªç•Œé¢ï¼Œå…ˆåš Flutter é¡µé¢çš„ä¿®æ”¹ï¼Œåœ¨ AppBar ä¸Šå¢žåŠ ä¸€ä¸ªè¿”å›žæŒ‰é’®ï¼Œç”¨äºŽè¿”å›žä¸Šå±‚é¡µé¢ 1234567891011121314151617181920212223242526272829303132class FlutterContactPage extends StatelessWidget &#123; // æ³¨å†Œå¯¹åº”çš„ channelï¼Œè¦ä¿è¯ channel name å’ŒåŽŸç”Ÿå±‚æ˜¯ä¸€è‡´çš„ final BasicMessageChannel _messageChannel = BasicMessageChannel(MESSAGE_CHANNEL_NAME, StandardMessageCodec()); final MethodChannel _methodChannel = MethodChannel(METHOD_CHANNEL_NAME); @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( leading: InkWell( child: Padding( padding: const EdgeInsets.symmetric(vertical: 20.0), child: Icon(Icons.arrow_back), ), onTap: () &#123; _methodChannel // invokeMethod ç¬¬ä¸€ä¸ªå€¼ç”¨äºŽä¼ é€’æ–¹æ³•åï¼Œç¬¬äºŒä¸ªå€¼ç”¨äºŽä¼ é€’å‚æ•°ï¼Œ // è¿™è¾¹ç®€å•çš„ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¼ é€’åˆ«çš„ç±»åž‹ï¼Œmapï¼Œlist ç­‰ç­‰ .invokeMethod&lt;bool&gt;('finishActivity', 'Finish Activity') .then((result) &#123; // è¿™è¾¹ä¼šè¿”å›žä¸€ä¸ªç»“æžœå€¼ï¼Œé€šè¿‡åˆ¤æ–­æ˜¯å¦æˆåŠŸæ¥æ‰“å°ä¸åŒçš„ä¿¡æ¯ print('$&#123;result ? 'has finish' : 'not finish'&#125;'); &#125;); &#125;, ), title: Text('Flutter Page'), ), body: // ... ); &#125;&#125; åŒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ FlutterPlugin è¿™ä¸ªç±»ä¸­ï¼Œåšäº›å¿…è¦çš„ä¿®æ”¹ï¼Œé¦–å…ˆéœ€è¦å®žçŽ° MethodCallHandler æŽ¥å£ï¼Œè¯¥æŽ¥å£ä¸­éœ€è¦å®žçŽ° onMethodCall æ–¹æ³•ï¼Œé€šè¿‡èŽ·å–è°ƒç”¨çš„æ–¹æ³•åå’Œå‚æ•°å€¼ï¼Œè¿›è¡Œç›¸åº”çš„å¤„ç† 1234567891011121314151617181920212223242526272829303132333435363738394041424344class FlutterPlugin(private val flutterView: FlutterView) : MethodChannel.MethodCallHandler, BasicMessageChannel.MessageHandler&lt;Any&gt; &#123; companion object &#123; private const val TAG = "FlutterPlugin" @JvmStatic fun registerPlugin(flutterView: FlutterView): FlutterPlugin &#123; val instance = FlutterPlugin(flutterView) val methodChannel = MethodChannel(flutterView, Constant.METHOD_CHANNEL_NAME) // ... messageChannel.setMessageHandler(instance) return instance &#125; &#125; // .... // call ä¸­æºå¸¦äº† Flutter å±‚ä¼ é€’è¿‡æ¥çš„æ–¹æ³•åå’Œå‚æ•°ä¿¡æ¯ // å¯ä»¥åˆ†åˆ«é€šè¿‡ call.method å’Œ call.arguments æ¥èŽ·å– override fun onMethodCall(call: MethodCall?, result: MethodChannel.Result?) &#123; when (call?.method) &#123; "finishActivity" -&gt; &#123; val activity = flutterView.context as Activity val info = call.arguments.toString() val intent = Intent().apply &#123; putExtra("info", info) &#125; activity.setResult(Activity.RESULT_OK, intent) activity.finish() // æˆåŠŸæ—¶å€™é€šè¿‡ result.success è¿”å›žå€¼ï¼Œ // å¦‚æžœå‘ç”Ÿå¼‚å¸¸ï¼Œé€šè¿‡ result.error è¿”å›žå¼‚å¸¸ä¿¡æ¯ // Flutter é€šè¿‡ invokeMethod().then() æ¥å¤„ç†æ­£å¸¸ç»“æŸçš„é€»è¾‘ // é€šè¿‡ catchError æ¥å¤„ç†å‘ç”Ÿå¼‚å¸¸çš„é€»è¾‘ result?.success(true) &#125; // å¦‚æžœæœªæ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•åï¼Œåˆ™é€šè¿‡ result.notImplemented æ¥è¿”å›žå¼‚å¸¸ else -&gt; result?.notImplemented() &#125; &#125; æœ€ç»ˆçš„æ•ˆæžœï¼Œå½“ç‚¹å‡»è¿”å›žæŒ‰é’®çš„æ—¶å€™ï¼Œä¼šå°† Flutter å±‚é€šè¿‡ invokeMethod ä¼ é€’çš„ arguments å±žæ€§åå¸å‡ºæ¥ï¼ŒåŒæ—¶ï¼ŒæŽ§åˆ¶å°ä¼šæ‰“å°å‡º â€œhas finishâ€ çš„ä¿¡æ¯ EventChannel EventChannel ç”¨äºŽæ•°æ®æµï¼ˆevent streamsï¼‰çš„é€šä¿¡ EventChannel çš„å®žçŽ°æ–¹å¼ä¹Ÿç±»ä¼¼ï¼ŒEventChannel å¯ä»¥æŒç»­è¿”å›žå¤šä¸ªä¿¡æ¯åˆ° Flutter å±‚ï¼Œåœ¨ Flutter å±‚çš„è¡¨çŽ°å°±æ˜¯ä¸€ä¸ª streamï¼ŒåŽŸç”Ÿå±‚é€šè¿‡ sink ä¸æ–­çš„æ·»åŠ æ•°æ®ï¼ŒFlutter å±‚æŽ¥æ”¶åˆ°æ•°æ®çš„å˜åŒ–å°±ä¼šä½œå‡ºæ–°ç›¸åº”çš„å¤„ç†ã€‚åœ¨ Android ç«¯å®žçŽ°çŠ¶æ€çš„ç›‘å¬å¯ä»¥é€šè¿‡å¹¿æ’­æ¥å®žçŽ°ã€‚ç›´æŽ¥çœ‹ä¾‹å­ï¼Œè¿˜æ˜¯ä¿®æ”¹ä¸Šè¿°ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162class FlutterPlugin(private val flutterView: FlutterView) : MethodChannel.MethodCallHandler, EventChannel.StreamHandler, BasicMessageChannel.MessageHandler&lt;Any&gt; &#123; private var mStateChangeReceiver: BroadcastReceiver? = null companion object &#123; private const val TAG = "FlutterPlugin" const val STATE_CHANGE_ACTION = "com.demo.plugins.action.StateChangeAction" const val STATE_VALUE = "com.demo.plugins.value.StateValue" @JvmStatic fun registerPlugin(flutterView: FlutterView): FlutterPlugin &#123; // ... val streamChannel = EventChannel(flutterView, Constant.STREAM_CHANNEL_NAME) val instance = FlutterPlugin(flutterView) methodChannel.setMethodCallHandler(instance) streamChannel.setStreamHandler(instance) messageChannel.setMessageHandler(instance) return instance &#125; &#125; // å®žçŽ° StreamHandler éœ€è¦é‡å†™ onListen å’Œ onCancel æ–¹æ³• // onListen ä¸ä¼šæ¯æ¬¡æ•°æ®æ”¹å˜å°±ä¼šè°ƒç”¨ï¼Œåªåœ¨ Flutter å±‚ï¼ŒeventChannel è®¢é˜…å¹¿æ’­ // çš„æ—¶å€™è°ƒç”¨ï¼Œå½“å–æ¶ˆè®¢é˜…çš„æ—¶å€™åˆ™ä¼šè°ƒç”¨ onCancelï¼Œ // æ‰€ä»¥å½“å¼€å§‹è®¢é˜…æ•°æ®çš„æ—¶å€™ï¼Œæ³¨å†ŒæŽ¥æ”¶æ•°æ®å˜åŒ–çš„å…³é—­ï¼Œ // åœ¨å–æ¶ˆè®¢é˜…çš„æ—¶å€™ï¼Œå°†æ³¨å†Œçš„å¹¿æ’­æ³¨é”€ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ override fun onListen(argument: Any?, sink: EventChannel.EventSink?) &#123; mStateChangeReceiver = createEventListener(sink) flutterView.context.registerReceiver(mStateChangeReceiver, IntentFilter(STATE_CHANGE_ACTION)) &#125; override fun onCancel(argument: Any?) &#123; unregisterListener() &#125; // åœ¨ activity è¢«é”€æ¯çš„æ—¶å€™ï¼ŒFlutterView ä¸ä¸€å®šä¼šè°ƒç”¨é”€æ¯ç”Ÿå‘½å‘¨æœŸï¼Œæˆ–è€…ä¼šå»¶æ—¶è°ƒç”¨ // è¿™å°±éœ€è¦æ‰‹åŠ¨åŽ»æ³¨é”€ä¸€å¼€å§‹æ³¨å†Œçš„å¹¿æ’­äº† fun unregisterListener() &#123; if (mStateChangeReceiver != null) &#123; flutterView.context.unregisterReceiver(mStateChangeReceiver) mStateChangeReceiver = null &#125; &#125; private fun createEventListener(sink: EventChannel.EventSink?): BroadcastReceiver = object : BroadcastReceiver() &#123; override fun onReceive(context: Context?, intent: Intent?) &#123; if (TextUtils.equals(intent?.action, STATE_CHANGE_ACTION)) &#123; // è¿™è¾¹å¹¿æ’­åªåšç®€å•çš„æŽ¥æ”¶ä¸€ä¸ªæ•´æ•°ï¼Œç„¶åŽé€šè¿‡ sink ä¼ é€’åˆ° Flutter å±‚ // å½“ç„¶ï¼Œsink è¿˜æœ‰ error æ–¹æ³•ï¼Œç”¨äºŽä¼ é€’å‘ç”Ÿçš„é”™è¯¯ä¿¡æ¯ï¼Œ // ä»¥åŠ endOfStream æ–¹æ³•ï¼Œç”¨äºŽç»“æŸæŽ¥æ”¶ // åœ¨ Flutter å±‚åˆ†åˆ«æœ‰ onData å¯¹åº” success æ–¹æ³•ï¼ŒonError å¯¹åº” error æ–¹æ³• // onDone å¯¹åº” endOfStream æ–¹æ³•ï¼Œæ ¹æ®ä¸åŒçš„å›žè°ƒå¤„ç†ä¸åŒçš„é€»è¾‘ sink?.success(intent?.getIntExtra(STATE_VALUE, -1)) &#125; &#125; &#125;&#125; åœ¨ Flutter å±‚ï¼Œé€šè¿‡å¯¹ stream çš„ç›‘å¬ï¼Œå¯¹è¿”å›žçš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œä¸ºäº†ä½“çŽ°å‡ºå˜åŒ–ï¼Œè¿™è¾¹ä¿®æ”¹æˆ SatefulWidget æ¥å­˜å‚¨çŠ¶æ€ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485class FlutterContactPage extends StatefulWidget &#123; @override _FlutterContactPageState createState() =&gt; _FlutterContactPageState();&#125;class _FlutterContactPageState extends State&lt;FlutterContactPage&gt; &#123; final MethodChannel _methodChannel = MethodChannel(METHOD_CHANNEL_NAME); final EventChannel _eventChannel = EventChannel(STREAM_CHANNEL_NAME); final BasicMessageChannel _messageChannel = BasicMessageChannel(MESSAGE_CHANNEL_NAME, StandardMessageCodec()); StreamSubscription _subscription; var _receiverMessage = 'Start receive state'; // åˆå§‹çš„çŠ¶æ€å€¼ @override void initState() &#123; super.initState(); // å½“é¡µé¢ç”Ÿæˆçš„æ—¶å€™å°±å¼€å§‹ç›‘å¬æ•°æ®çš„å˜åŒ– _subscription = _eventChannel.receiveBroadcastStream().listen((data) &#123; setState(() &#123; _receiverMessage = 'receive state value: $data'; // æ•°æ®å˜åŒ–äº†ï¼Œåˆ™ä¿®æ”¹æ•°æ® &#125;); &#125;, onError: (e) &#123; _receiverMessage = 'process error: $e'; // å‘ç”Ÿé”™è¯¯åˆ™æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ &#125;, onDone: () &#123; _receiverMessage = 'receive data done'; // å‘é€å®Œæ¯•åˆ™ç›´æŽ¥æ˜¾ç¤ºå®Œæ¯• &#125;, cancelOnError: true); &#125; @override void dispose() &#123; super.dispose(); _subscription.cancel(); // å½“é¡µé¢é”€æ¯çš„æ—¶å€™éœ€è¦å°†è®¢é˜…å–æ¶ˆï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( leading: InkWell( child: Padding( padding: const EdgeInsets.symmetric(vertical: 20.0), child: Icon(Icons.arrow_back), ), onTap: () &#123; // MethodChannel demo _methodChannel .invokeMethod&lt;bool&gt;('finishActivity', _receiverMessage) .then((result) &#123; print('$&#123;result ? 'has finish' : 'not finish'&#125;'); &#125;).catchError((e) &#123; print('error happend: $e'); &#125;); &#125;, ), title: Text('Flutter Page'), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Padding( padding: const EdgeInsets.all(8.0), // EventChannel demoï¼Œé¡µé¢ç›´æŽ¥æ˜¾ç¤ºä¿¡æ¯çš„å˜åŒ– child: Text( _receiverMessage, style: TextStyle(fontSize: 20.0, color: Colors.black), ), ), // BasicMessageChannel demo RaisedButton( onPressed: () &#123; _messageChannel .send('"Hello Native" --- an message from flutter') .then((str) &#123; print('Receive message: $str'); &#125;); &#125;, child: Text('Send Message to Native'), ), ], ), ), ); &#125;&#125; åŒæ—¶ï¼Œéœ€è¦åœ¨ Activity å±‚è°ƒç”¨ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ä¸æ–­çš„å‘é€å¹¿æ’­ 12345678910111213141516171819202122232425262728293031323334353637383940class ContactActivity : AppCompatActivity() &#123; private var timer: Timer? = null private var task: TimerTask? = null private lateinit var random: Random private lateinit var plugin: FlutterPlugin override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) random = Random() // ç”Ÿæˆéšæœºæ•´æ•° val flutterView = Flutter.createView(this@ContactActivity, lifecycle, "route_contact") val lp = FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT) addContentView(flutterView, lp) plugin = FlutterPlugin.registerPlugin(flutterView) timer = Timer() // å®šæ—¶å™¨ task = timerTask &#123; // å®šæ—¶ä»»åŠ¡ sendBroadcast(Intent(FlutterPlugin.STATE_CHANGE_ACTION).apply &#123; putExtra(FlutterPlugin.STATE_VALUE, random.nextInt(1000)) &#125;) &#125; timer?.schedule(task, 3000, 2000) // å»¶æ—¶ 3s å¼€å¯å®šæ—¶å™¨ï¼Œå¹¶ 2s å‘é€ä¸€æ¬¡å¹¿æ’­ &#125; override fun onDestroy() &#123; super.onDestroy() // é¡µé¢é”€æ¯çš„æ—¶å€™éœ€è¦å°†å®šæ—¶å™¨ï¼Œå®šæ—¶ä»»åŠ¡é”€æ¯ // åŒæ—¶æ³¨é”€ Plugin ä¸­æ³¨å†Œçš„å¹¿æ’­ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ timer?.cancel() timer = null task?.cancel() task = null plugin.unregisterListener() &#125;&#125; æœ€åŽçš„å®žçŽ°æ•ˆæžœå¤§æ¦‚æ˜¯è¿™æ ·çš„ Flutter åŒ Android ç«¯çš„äº¤äº’åˆ°è¿™è®²çš„å·®ä¸å¤šäº†ï¼Œå’Œ iOS çš„äº¤äº’å…¶å®žä¹Ÿç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨ Android ç«¯é€šè¿‡ FlutterNativeView æ¥ä½œä¸º Binarymessenger çš„å®žçŽ°ï¼Œåœ¨ iOS ç«¯é€šè¿‡ FlutterBinaryMessenger åè®®å®žçŽ°ï¼ŒåŽŸç†æ˜¯ä¸€è‡´çš„ã€‚è‡³äºŽ Flutter æ’ä»¶ï¼Œå…¶å®žçŽ°ä¹Ÿæ˜¯é€šè¿‡ä»¥ä¸Šä¸‰ç§äº¤äº’æ–¹å¼æ¥å®žçŽ°çš„ï¼Œå¯èƒ½æˆ‘ä»¬ç›®å‰é€šè¿‡ FlutterView æ¥ä½œä¸º BinaryMessenger å®žä¾‹ï¼Œæ’ä»¶ä¼šé€šè¿‡ PluginRegistry.Registrar å®žä¾‹çš„ messenger() æ–¹æ³•æ¥èŽ·å– BinaryMessenger å®žä¾‹ã€‚ æœ€åŽè´´ä¸Š demo çš„åœ°å€ï¼šContactDemo éœ€è¦äº†è§£æ’ä»¶çš„å†™æ³•ä¹Ÿå¯ä»¥ç›´æŽ¥æŸ¥çœ‹å®˜æ–¹æä¾›çš„æ£€æµ‹ç”µé‡æ’ä»¶ï¼šFlutter Battery Plugin]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(åå››)ä¹‹å®žæˆ˜]]></title>
    <url>%2Fposts%2Fb447830c.html</url>
    <content type="text"><![CDATA[è®²å®Œäº†å¸¸ç”¨çš„éƒ¨ä»¶å’Œç½‘ç»œè¯·æ±‚åŽï¼Œå·®ä¸å¤šè¯¥è¿›å…¥æ•´ä½“å®žæˆ˜äº†ï¼Œè¿™é‡Œæˆ‘ä»¬å°†å†™ä¸€ä¸ªæ¯”è¾ƒç†Ÿæ‚‰çš„é¡¹ç›®ï¼Œéƒ­ç¥žçš„ cool weatherã€‚é¡¹ç›®å°†ä½¿ç”¨ fluro å®žçŽ°è·¯ç”±ç®¡ç†ï¼Œdio å®žçŽ°ç½‘ç»œè¯·æ±‚ï¼Œrxdart å®žçŽ° BLoC è¿›è¡ŒçŠ¶æ€ç®¡ç†å’Œé€»è¾‘åˆ†ç¦»ï¼Œä½¿ç”¨æ–‡ä»¶ï¼Œshared_preferencesï¼Œsqflite å®žçŽ°æœ¬åœ°çš„æ•°æ®æŒä¹…åŒ–ã€‚è¿™è¾¹å…ˆç»™å‡ºé¡¹ç›®çš„åœ°å€ï¼šflutter_weatherï¼Œä»¥åŠæœ€åŽå®žçŽ°çš„æ•ˆæžœå›¾ï¼š One Two Three é™¤äº† fluro åˆ«çš„åŸºæœ¬ä¸Šå‰é¢éƒ½è®²äº†ï¼Œæ‰€ä»¥åœ¨å¼€å§‹æ­£å¼çš„å®žæˆ˜å‰ï¼Œå…ˆè®²ä¸‹ fluro Flurofluro æ˜¯å¯¹ Navigator çš„ä¸€ä¸ªå°è£…ï¼Œæ–¹ä¾¿æ›´å¥½çš„ç®¡ç†è·¯ç”±è·³è½¬ï¼Œå½“ç„¶è¿˜å­˜åœ¨ä¸€äº›ç¼ºé™·ï¼Œä¾‹å¦‚ç›®å‰åªæ”¯æŒä¼ é€’å­—ç¬¦ä¸²ï¼Œä¸èƒ½ä¼ é€’ä¸­æ–‡ç­‰ï¼Œä½†æ˜¯è¿™äº›é—®é¢˜éƒ½ç®—ä¸ä¸Šæ˜¯å¤§é—®é¢˜ã€‚ fluro çš„ä½¿ç”¨å¾ˆç®€å•ï¼Œå¤§æ¦‚åˆ†å¦‚ä¸‹çš„æ­¥éª¤ï¼š åœ¨å…¨å±€å®šä¹‰ä¸€ä¸ª Router å®žä¾‹ 1final router = Router(); ä½¿ç”¨ Router å®žä¾‹å®šä¹‰è·¯å¾„å’Œå…¶å¯¹åº”çš„ Handler å¯¹è±¡ 123456789101112// ä¾‹å¦‚å®šä¹‰ä¸€ä¸ª CityPage çš„è·¯å¾„å’Œ HandlerHandler cityHandler = Handler(handlerFunc: (_, params) &#123; // ä¼ é€’çš„å‚æ•°éƒ½åœ¨ params ä¸­ï¼Œparams æ˜¯ä¸€ä¸ª Map&lt;String, List&lt;String&gt;&gt; ç±»åž‹å‚æ•° String cityId = params['city_id']?.first; return BlocProvider(child: WeatherPage(city: cityId), bloc: WeatherBloc());&#125;);// å®šä¹‰è·¯ç”±çš„è·¯å¾„å’Œå‚æ•°// éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬ä¸€ä¸ªé¡µé¢çš„è·¯å¾„å¿…é¡»ä¸º "/"ï¼Œåˆ«çš„å¯ä¸º "/" + ä»»æ„æ‹¼æŽ¥router.define('/city', handler: cityHandler);// æˆ–è€…å®˜æ–¹æä¾›çš„å¦ä¸€ç§æ–¹å¼router.define('/city/:city_id', handler: cityHandler); å°† router æ³¨å†Œåˆ° MaterialApp çš„ onGenerateRoute ä¸­ 1MaterialApp(onGenerateRoute: router); æœ€åŽé€šè¿‡ Router å®žä¾‹è¿›è¡Œè·³è½¬ï¼Œå¦‚æžœæœ‰å‚æ•°ä¼ é€’åˆ™ä¼šåœ¨æ–°çš„é¡µé¢æ”¶åˆ° 123router.navigateTo(context, '/city?city_id=CN13579');// æˆ–è€…å®˜æ–¹çš„æ–¹å¼router.navigateTo(context, '/city/CN13579'); åœ¨ fluro ä¸­æä¾›äº†å¤šç§è·¯ç”±åŠ¨ç”»ï¼ŒåŒ…æ‹¬ fadeInï¼ŒinFromRight ç­‰ã€‚è®²å®Œäº†ä½¿ç”¨ï¼Œå°±è¿›å…¥å®žæˆ˜äº†ã€‚ flutter_weather å®žæˆ˜å¯¼å…¥æ’ä»¶åœ¨å¼€å§‹çš„æ—¶å€™ï¼Œå·²ç»æåˆ°äº†æ•´ä½“åŠŸèƒ½çš„å®žçŽ°éœ€æ±‚ï¼Œæ‰€ä»¥è¿™è¾¹éœ€è¦å¯¼å…¥çš„æ’ä»¶ä»¥åŠå­˜æ”¾å›¾ç‰‡çš„æ–‡ä»¶å¤¹å¦‚ä¸‹ï¼š 12345678910111213141516171819202122dependencies: flutter: sdk: flutter cupertino_icons: ^0.1.2 fluro: ^1.4.0 dio: ^2.1.0 shared_preferences: ^0.5.1+2 sqflite: ^1.1.3 fluttertoast: ^3.0.3 rxdart: ^0.21.0 path_provider: 0.5.0+1dev_dependencies: flutter_test: sdk: flutter flutter: uses-material-design: true assets: - images/ é¡¶å±‚é™æ€å®žä¾‹çš„å®žçŽ°æœ‰è®¸å¤šå®žä¾‹éœ€è¦åœ¨é¡¶å±‚æ³¨å†Œï¼Œç„¶åŽåœ¨å…¨å±€ä½¿ç”¨ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽ fluro çš„ routerï¼Œhttpï¼Œdatabase ç­‰ç­‰ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œéœ€è¦ç”¨åˆ°çš„å°±æ˜¯è¿™ä¸‰ä¸ªå®žä¾‹ï¼Œä¼šåœ¨å…¨å±€è°ƒç”¨ï¼Œæ‰€ä»¥åœ¨å¼€å§‹å‰è¿›è¡Œåˆå§‹åŒ–ï¼Œå½“ç„¶ http å’Œ database åœ¨ä½¿ç”¨çš„æ—¶å€™åˆ›å»ºä¹Ÿå¯ä»¥ï¼Œå®Œå…¨çœ‹ä¸ªäººä¹ æƒ¯ï¼Œä½†æ˜¯ fluro çš„ç®¡ç†ç±»å¿…é¡»åœ¨ä¸€å¼€å§‹å°±æ³¨å†Œå®Œæˆã€‚é¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ª Application ç±»ç”¨æ¥å­˜æ”¾è¿™äº›é™æ€å®žä¾‹ 12345class Application &#123; static HttpUtils http; // å…¨å±€ç½‘ç»œ static Router router; // å…¨å±€è·¯ç”± static DatabaseUtils db; // å…¨å±€æ•°æ®åº“&#125; æŽ¥ç€å°±æ˜¯å¯¹ç›¸åº”æ–¹æ³•ç±»çš„ç¼–å†™ï¼Œå…¶ä¸­ HttpUtil å’Œ DatabaseUtils åœ¨å‰é¢æœ‰è®²è¿‡ï¼Œè¿™è¾¹ä¸é‡å¤è®²ï¼Œä¼šè®²ä¸‹æ•°æ®åº“å¦‚ä½•å»ºç«‹ã€‚ Fluro è·¯ç”±ç®¡ç†ç±»é¦–å…ˆï¼Œéœ€è¦çŸ¥é“ï¼Œè¯¥é¡¹ç›®çš„ç•Œé¢å¤§æ¦‚åˆ†å¦‚ä¸‹çš„ç•Œé¢(å½“ç„¶å¯å…ˆåªå®šä¹‰é¦–é¡µï¼Œå‰©ä¸‹ç”¨åˆ°äº†å†å®šä¹‰ï¼Œè¯¥é¡¹ç›®ç›¸å¯¹ç®€å•ï¼Œæ‰€ä»¥å…ˆåˆ—å‡ºæ¥)ï¼šçœé€‰æ‹©é¡µï¼Œå¸‚é€‰æ‹©é¡µï¼ŒåŒºé€‰æ‹©é¡µï¼Œå¤©æ°”å±•ç¤ºé¡µï¼Œè®¾ç½®é¡µã€‚æ‰€ä»¥ fluro çš„ç®¡ç†ç±»å¯æŒ‰å¦‚ä¸‹å®šä¹‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869// æŸ¥çœ‹ `routers/routers.dart` æ–‡ä»¶class Routers &#123; /// å„ä¸ªé¡µé¢å¯¹åº”çš„è·¯å¾„ static const root = '/'; static const weather = '/weather'; static const provinces = '/provinces'; static const cities = '/cities'; static const districts = '/districts'; static const settings = '/settings'; /// è¯¥æ–¹æ³•ç”¨äºŽæ”¾åˆ° `main` æ–¹æ³•ä¸­å®šä¹‰æ‰€æœ‰çš„è·¯ç”±ï¼Œ /// å¯¹åº”çš„ handler å¯æ”¾åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯æ”¾å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œçœ‹ä¸ªäººå–œå¥½ static configureRouters(Router router) &#123; router.notFoundHandler = notFoundHandler; router.define(root, handler: rootHandler); // é¦–é¡µ router.define(weather, handler: weatherHandler); // å¤©æ°”å±•ç¤ºé¡µ router.define(provinces, handler: provincesHandler); // çœåˆ—è¡¨é¡µ router.define(cities, handler: citiesHandler); // çœä¸‹å¸‚åˆ—è¡¨é¡µ router.define(districts, handler: districtsHandler); // å¸‚ä¸‹åŒºåˆ—è¡¨é¡µ router.define(settings, handler: settingsHandler); // è®¾ç½®é¡µ &#125; /// ç”Ÿæˆå¤©æ°”æ˜¾ç¤ºé¡µé¢è·¯å¾„ï¼Œéœ€è¦ç”¨åˆ°åŸŽå¸‚ id static generateWeatherRouterPath(String cityId) =&gt; '$weather?city_id=$cityId'; /// ç”Ÿæˆçœä¸‹çš„å¸‚åˆ—è¡¨é¡µç›¸åº”è·¯å¾„ éœ€è¦ç”¨åˆ°çœ id åŠçœå static generateProvinceRouterPath(int provinceId, String name) =&gt; '$cities?province_id=$provinceId&amp;name=$name'; /// ç”Ÿæˆå¸‚ä¸‹çš„åŒºåˆ—è¡¨é¡µç›¸åº”è·¯å¾„ï¼Œéœ€ç”¨åˆ°å¸‚ id åŠå¸‚å static generateCityRouterPath(int provinceId, int cityId, String name) =&gt; '$districts?province_id=$provinceId&amp;city_id=$cityId&amp;name=$name';&#125;/// æŸ¥çœ‹ `routers/handler.dart` æ–‡ä»¶Handler notFoundHandler = Handler(handlerFunc: (_, params) &#123; Logger('RouterHandler:').log('Not Found Router'); // å½“æ‰¾ä¸åˆ°ç›¸åº”çš„è·¯ç”±æ—¶ï¼Œæ‰“å°ä¿¡æ¯å¤„ç†&#125;);Handler rootHandler = Handler(handlerFunc: (_, params) =&gt; SplashPage());Handler weatherHandler = Handler(handlerFunc: (_, params) &#123; String cityId = params['city_id']?.first; // èŽ·å–ç›¸åº”çš„å‚æ•° return WeatherPage(city: cityId);&#125;);Handler provincesHandler = Handler(handlerFunc: (_, params) =&gt; ProvinceListPage());Handler citiesHandler = Handler(handlerFunc: (_, params) &#123; String provinceId = params['province_id']?.first; String name = params['name']?.first; return CityListPage(provinceId: provinceId, name: FluroConvertUtils.fluroCnParamsDecode(name));&#125;);Handler districtsHandler = Handler(handlerFunc: (_, params) &#123; String provinceId = params['province_id']?.first; String cityId = params['city_id']?.first; String name = params['name']?.first; return DistrictListPage(provinceId: provinceId, cityId: cityId, name: FluroConvertUtils.fluroCnParamsDecode(name));&#125;);Handler settingsHandler = Handler(handlerFunc: (_, params) =&gt; SettingsPage()); é‚£ä¹ˆç•Œé¢çš„è·¯ç”±åˆ°è¿™å°±ç¼–å†™å¥½äº†ï¼Œä½†æ˜¯å‰é¢æåˆ°äº† fluro ç›®å‰ä¸æ”¯æŒä¸­æ–‡çš„ä¼ é€’ï¼Œæ‰€ä»¥åœ¨ä¼ é€’ä¸­æ–‡æ—¶å€™ï¼Œéœ€è¦å…ˆè¿›è¡Œè½¬ç ï¼Œè¿™è¾¹æä¾›ä¸€ä¸ªè‡ªå·±å†™çš„æ–¹æ³•ï¼Œå°ä¼™ä¼´æœ‰æ›´å¥½çš„æ–¹æ³•ä¹Ÿå¯ä»¥ç›´æŽ¥åœ¨é¡¹ç›®æ issue 123456789101112131415161718/// æŸ¥çœ‹ `utils/fluro_convert_util.dart` æ–‡ä»¶class FluroConvertUtils &#123; /// fluro ä¼ é€’ä¸­æ–‡å‚æ•°å‰ï¼Œå…ˆè½¬æ¢ï¼Œfluro ä¸æ”¯æŒä¸­æ–‡ä¼ é€’ static String fluroCnParamsEncode(String originalCn) &#123; StringBuffer sb = StringBuffer(); var encoded = Utf8Encoder().convert(originalCn); // utf8 ç¼–ç ï¼Œä¼šç”Ÿæˆä¸€ä¸ª int åˆ—è¡¨ encoded.forEach((val) =&gt; sb.write('$val,')); // å°† int åˆ—è¡¨é‡æ–°è½¬æ¢æˆå­—ç¬¦ä¸² return sb.toString().substring(0, sb.length - 1).toString(); &#125; /// fluro ä¼ é€’åŽå–å‡ºå‚æ•°ï¼Œè§£æž static String fluroCnParamsDecode(String encodedCn) &#123; var decoded = encodedCn.split('[').last.split(']').first.split(','); // å¯¹å‚æ•°å­—ç¬¦ä¸²åˆ†å‰² var list = &lt;int&gt;[]; decoded.forEach((s) =&gt; list.add(int.parse(s.trim()))); // è½¬å›ž int åˆ—è¡¨ return Utf8Decoder().convert(list); // è§£ç  &#125;&#125; Database ç®¡ç†ç±»ç¼–å†™å› ä¸ºæ•°æ®åº“çš„å¼€å¯æ˜¯ä¸€ä¸ªå¾ˆè€—èµ„æºçš„è¿‡ç¨‹ï¼Œæ‰€ä»¥è¿™è¾¹é€šè¿‡å•ä¾‹å¹¶æå–åˆ°é¡¶å±‚ã€‚åœ¨è¯¥é¡¹ç›®ä¸­ï¼Œæ•°æ®åº“ä¸»è¦ç”¨äºŽå­˜å‚¨åŸŽå¸‚ä¿¡æ¯ï¼Œå› ä¸ºåŸŽå¸‚ä¹‹é—´çš„å…³è”æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æžœé€šè¿‡ shared_preferences æˆ–è€…æ–‡ä»¶å­˜å‚¨ä¼šå¾ˆå¤æ‚ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798/// æŸ¥çœ‹ `utils/db_utils.dart` æ–‡ä»¶class DatabaseUtils &#123; final String _dbName = 'weather.db'; // æ•°æ®è¡¨å final String _tableProvinces = 'provinces'; // çœè¡¨ final String _tableCities = 'cities'; // å¸‚è¡¨ final String _tableDistricts = 'districts'; // åŒºè¡¨ static Database _db; static DatabaseUtils _instance; static DatabaseUtils get instance =&gt; DatabaseUtils(); /// å°†æ•°æ®åº“çš„åˆå§‹åŒ–æ”¾åˆ°ç§æœ‰æž„é€ ä¸­ï¼Œå€¼å…è®¸é€šè¿‡å•ä¾‹è®¿é—® DatabaseUtils._internal() &#123; getDatabasesPath().then((path) async &#123; _db = await openDatabase(join(path, _dbName), version: 1, onCreate: (db, version) &#123; db.execute('create table $_tableProvinces(' 'id integer primary key autoincrement,' 'province_id integer not null unique,' // çœ idï¼Œid å”¯ä¸€ 'province_name text not null' // çœå ')'); db.execute('create table $_tableCities(' 'id integer primary key autoincrement,' 'city_id integer not null unique,' // å¸‚ idï¼Œid å”¯ä¸€ 'city_name text not null,' // å¸‚å 'province_id integer not null,' // å¯¹åº”çš„çœçš„ idï¼Œä½œä¸ºå¤–é”®åŒçœè¡¨å…³è” 'foreign key(province_id) references $_tableProvinces(province_id)' ')'); db.execute('create table $_tableDistricts(' 'id integer primary key autoincrement,' 'district_id integer not null unique,' // åŒº id 'district_name text not null,' // åŒºå 'weather_id text not null unique,' // æŸ¥è¯¢å¤©æ°”ç”¨çš„ idï¼Œä¾‹å¦‚ CN13579826ï¼Œid å”¯ä¸€ 'city_id integer not null,' // å¯¹åº”å¸‚çš„ idï¼Œä½œä¸ºå¤–é”®åŒå¸‚è¡¨å…³è” 'foreign key(city_id) references $_tableCities(city_id)' ')'); &#125;, onUpgrade: (db, oldVersion, newVersion) &#123;&#125;); &#125;); &#125; /// æž„å»ºå•ä¾‹ factory DatabaseUtils() &#123; if (_instance == null) &#123; _instance = DatabaseUtils._internal(); &#125; return _instance; &#125; /// æŸ¥è¯¢æ‰€æœ‰çš„çœï¼Œ`ProvinceModel` ä¸ºçœå¸‚æŽ¥å£è¿”å›žæ•°æ®ç”Ÿæˆçš„ model ç±» /// æŸ¥çœ‹ `model/province_model.dart` æ–‡ä»¶ Future&lt;List&lt;ProvinceModel&gt;&gt; queryAllProvinces() async =&gt; ProvinceModel.fromProvinceTableList(await _db.rawQuery('select province_id, province_name from $_tableProvinces')); /// æŸ¥è¯¢æŸä¸ªçœå†…çš„æ‰€æœ‰å¸‚ Future&lt;List&lt;ProvinceModel&gt;&gt; queryAllCitiesInProvince(String proid) async =&gt; ProvinceModel.fromCityTableList(await _db.rawQuery( 'select city_id, city_name from $_tableCities where province_id = ?', [proid], )); /// æŸ¥è¯¢æŸä¸ªå¸‚å†…çš„æ‰€æœ‰åŒºï¼Œ`DistrictModel` ä¸ºåŒºæŽ¥å£è¿”å›žæ•°æ®ç”Ÿæˆçš„ model ç±» /// æŸ¥çœ‹ `model/district_model.dart` æ–‡ä»¶ Future&lt;List&lt;DistrictModel&gt;&gt; queryAllDistrictsInCity(String cityid) async =&gt; DistrictModel.fromDistrictTableList(await _db.rawQuery( 'select district_id, district_name, weather_id from $_tableDistricts where city_id = ?', [cityid], )); /// å°†æ‰€æœ‰çš„çœæ’å…¥æ•°æ®åº“ Future&lt;void&gt; insertProvinces(List&lt;ProvinceModel&gt; provinces) async &#123; var batch = _db.batch(); provinces.forEach((p) =&gt; batch.rawInsert( 'insert or ignore into $_tableProvinces (province_id, province_name) values (?, ?)', [p.id, p.name], )); batch.commit(); &#125; /// å°†çœå¯¹åº”ä¸‹çš„æ‰€æœ‰å¸‚æ’å…¥æ•°æ®åº“ Future&lt;void&gt; insertCitiesInProvince(List&lt;ProvinceModel&gt; cities, String proid) async &#123; var batch = _db.batch(); cities.forEach((c) =&gt; batch.rawInsert( 'insert or ignore into $_tableCities (city_id, city_name, province_id) values (?, ?, ?)', [c.id, c.name, proid], )); batch.commit(); &#125; /// å°†å¸‚ä¸‹çš„æ‰€æœ‰åŒºæ’å…¥æ•°æ®åº“ Future&lt;void&gt; insertDistrictsInCity(List&lt;DistrictModel&gt; districts, String cityid) async &#123; var batch = _db.batch(); districts.forEach((d) =&gt; batch.rawInsert( 'insert or ignore into $_tableDistricts (district_id, district_name, weather_id, city_id) values (?, ?, ?, ?)', [d.id, d.name, d.weatherId, cityid], )); batch.commit(); &#125;&#125; å®šä¹‰å®Œå…¨å±€ä½¿ç”¨çš„æ–¹æ³•ï¼Œå°±å¯ä»¥åœ¨ main å‡½æ•°ä¸­è¿›è¡Œç›¸å…³çš„åˆå§‹åŒ–äº† 1234567891011121314151617181920212223242526272829303132/// æŸ¥çœ‹ `main.dart` æ–‡ä»¶void main() &#123; // åˆå§‹åŒ– fluro router Router router = Router(); Routers.configureRouters(router); Application.router = router; // åˆå§‹åŒ– http Application.http = HttpUtils(baseUrl: WeatherApi.WEATHER_HOST); // åˆå§‹åŒ– db Application.db = DatabaseUtils.instance; // å¼ºåˆ¶ç«–å±ï¼Œå› ä¸ºè®¾ç½®ç«–å±ä¸º `Future` æ–¹æ³•ï¼Œé˜²æ­¢è®¾ç½®æ— æ•ˆå¯ç­‰è¿”å›žå€¼åŽå†å¯åŠ¨ App SystemChrome.setPreferredOrientations([DeviceOrientation.portraitDown, DeviceOrientation.portraitUp]).then((_) &#123; runApp(WeatherApp()); // App ç±»å¯æ”¾åœ¨åŒä¸ªæ–‡ä»¶ï¼Œä¸ªäººä¹ æƒ¯å•ç‹¬ä¸€ä¸ªæ–‡ä»¶å­˜æ”¾ if (Platform.isAndroid) &#123; SystemChrome.setSystemUIOverlayStyle(SystemUiOverlayStyle(statusBarColor: Colors.transparent)); &#125; &#125;);&#125;class WeatherApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return MaterialApp( title: 'Weather App', onGenerateRoute: Application.router.generator, // å°† fluro çš„è·¯ç”±è¿›è¡Œæ³¨å†Œ debugShowCheckedModeBanner: false, ); &#125;&#125; åˆå§‹åŒ–å®Œæ¯•ï¼ŒæŽ¥ç€å°±å¯ä»¥è¿›è¡Œé¡µé¢çš„ç¼–å†™äº†ã€‚ é¦–é¡µç¼–å†™é¦–é¡µä¸»è¦æ˜¯ä¸ºäº†å¯¹ App çš„ä¸€ä¸ªå¤§æ¦‚å±•ç¤ºï¼Œæˆ–è€…æ˜¯ä¸€äº›å¹¿å‘Šçš„å±•ç¤ºï¼ŒåŒæ—¶ä¹Ÿç»™ä¸€äº›æ•°æ®åˆå§‹åŒ–æä¾›æ—¶é—´ï¼Œå½“ç”¨æˆ·è¿›å…¥åŽæœ‰æ›´å¥½çš„ä½“éªŒæ•ˆæžœã€‚æˆ‘ä»¬åœ¨è¿™é‡Œå°±åšä¸€ä¸ªå›¾æ ‡çš„å±•ç¤º(å›¾æ ‡å¯è‡ªè¡Œåˆ°é¡¹ç›®ä¸­ images æ–‡ä»¶å¤¹æŸ¥æ‰¾)ï¼Œå»¶æ—¶ 5s åŽè·³è½¬ä¸‹ä¸ªé¡µé¢ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243/// æŸ¥çœ‹ `splash_page.dart` æ–‡ä»¶class SplashPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; /// å› ä¸ºå·²ç»å¼•å…¥äº† rxdartï¼Œè¿™é‡Œé€šè¿‡ rxdart.timer è¿›è¡Œå€’è®¡æ—¶ /// å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ Futuer.delayed è¿›è¡Œå€’è®¡æ—¶ /// 5s è®¡æ—¶ï¼Œå¦‚æžœå·²ç»é€‰æ‹©åŸŽå¸‚ï¼Œè·³è½¬å¤©æ°”ç•Œé¢ï¼Œå¦åˆ™è¿›å…¥åŸŽå¸‚é€‰æ‹© Observable.timer(0, Duration(milliseconds: 5000)).listen((_) &#123; PreferenceUtils.instance.getString(PreferencesKey.WEATHER_CITY_ID) .then((city) &#123; // å¦‚æžœå½“å‰è¿˜æœªé€‰æ‹©åŸŽå¸‚ï¼Œåˆ™è¿›å…¥åŸŽå¸‚é€‰æ‹©é¡µï¼Œå¦åˆ™è·³è½¬å¤©æ°”è¯¦æƒ…é¡µ // replace: true å³ä¸º Navigator.pushReplacement æ–¹æ³• Application.router.navigateTo(context, city.isEmpty ? Routers.provinces : Routers.generateWeatherRouterPath(city), replace: true); &#125;); &#125;); return Scaffold( body: Container( alignment: Alignment.center, color: Colors.white, child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ // å±•ç¤ºå›¾æ ‡ Image.asset(Resource.pngSplash, width: 200.0, height: 200.0), // å±•ç¤ºæ–‡å­—æé†’ï¼Œç”¨ SizedBox è®¾ç½®åŒºåŸŸå¤§å° SizedBox( width: MediaQuery.of(context).size.width * 0.7, child: Text( 'æ‰€æœ‰å¤©æ°”æ•°æ®å‡ä¸ºæ¨¡æ‹Ÿæ•°æ®ï¼Œä»…ç”¨ä½œå­¦ä¹ ç›®çš„ä½¿ç”¨ï¼Œè¯·å‹¿å½“ä½œçœŸå®žçš„å¤©æ°”é¢„æŠ¥è½¯ä»¶æ¥ä½¿ç”¨', textAlign: TextAlign.center, softWrap: true, style: TextStyle(color: Colors.red[700], fontSize: 16.0), )) ], ), ), ); &#125;&#125; åŸŽå¸‚é€‰æ‹©é¡µé¢å½“é¦–æ¬¡è¿›å…¥çš„æ—¶å€™ï¼Œç”¨æˆ·è‚¯å®šæ²¡æœ‰é€‰æ‹©åŸŽå¸‚ï¼Œæ‰€ä»¥å…ˆç¼–å†™åŸŽå¸‚é€‰æ‹©åˆ—è¡¨é¡µé¢ï¼Œå› ä¸ºæ•´ä½“çš„é¡¹ç›®ä½¿ç”¨ BLoC åˆ†ç¦»ä¸šåŠ¡é€»è¾‘å’Œé¡µé¢ï¼Œæ‰€ä»¥å…ˆç¼–å†™æ•°æ®ç®¡ç†ç±»å§ï¼ŒæŠŠæ•°æ®è¯·æ±‚å’Œæ”¹å˜çš„ä¸šåŠ¡é€»è¾‘æ”¾åˆ°è¿™å—ï¼ŒBLoC çš„å®žçŽ°åœ¨å‰é¢è®²è¿‡äº†ï¼Œè¿™è¾¹å°±ä¸é‡å¤æäº†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980/// æŸ¥çœ‹ `provinces_bloc.dart` æ–‡ä»¶class ProvincesBloc extends BaseBloc &#123; final _logger = Logger('ProvincesBloc'); List&lt;ProvinceModel&gt; _provinces = []; // å…¨å›½çœ List&lt;ProvinceModel&gt; _cities = []; // çœå†…å¸‚ List&lt;DistrictModel&gt; _districts = []; // å¸‚å†…åŒº List&lt;ProvinceModel&gt; get provinces =&gt; _provinces; List&lt;ProvinceModel&gt; get cities =&gt; _cities; List&lt;DistrictModel&gt; get districts =&gt; _districts; BehaviorSubject&lt;List&lt;ProvinceModel&gt;&gt; _provinceController = BehaviorSubject(); BehaviorSubject&lt;List&lt;ProvinceModel&gt;&gt; _citiesController = BehaviorSubject(); BehaviorSubject&lt;List&lt;DistrictModel&gt;&gt; _districtController = BehaviorSubject(); /// streamï¼Œç”¨äºŽ StreamBuilder çš„ stream å‚æ•° Observable&lt;List&lt;ProvinceModel&gt;&gt; get provinceStream =&gt; Observable(_provinceController.stream); Observable&lt;List&lt;ProvinceModel&gt;&gt; get cityStream =&gt; Observable(_citiesController.stream); Observable&lt;List&lt;DistrictModel&gt;&gt; get districtStream =&gt; Observable(_districtController.stream); /// é€šçŸ¥åˆ·æ–°çœä»½åˆ—è¡¨ changeProvinces(List&lt;ProvinceModel&gt; provinces) &#123; _provinces.clear(); _provinces.addAll(provinces); _provinceController.add(_provinces); &#125; /// é€šçŸ¥åˆ·æ–°åŸŽå¸‚åˆ—è¡¨ changeCities(List&lt;ProvinceModel&gt; cities) &#123; _cities.clear(); _cities.addAll(cities); _citiesController.add(_cities); &#125; /// é€šçŸ¥åˆ·æ–°åŒºåˆ—è¡¨ changeDistricts(List&lt;DistrictModel&gt; districts) &#123; _districts.clear(); _districts.addAll(districts); _districtController.add(_districts); &#125; /// è¯·æ±‚å…¨å›½çœ Future&lt;List&lt;ProvinceModel&gt;&gt; requestAllProvinces() async &#123; var resp = await Application.http.getRequest(WeatherApi.WEATHER_PROVINCE, error: (msg) =&gt; _logger.log(msg, 'province')); return resp == null || resp.data == null ? [] : ProvinceModel.fromMapList(resp.data); &#125; /// è¯·æ±‚çœå†…åŸŽå¸‚ Future&lt;List&lt;ProvinceModel&gt;&gt; requestAllCitiesInProvince(String proid) async &#123; var resp = await Application.http .getRequest('$&#123;WeatherApi.WEATHER_PROVINCE&#125;/$proid', error: (msg) =&gt; _logger.log(msg, 'city')); return resp == null || resp.data == null ? [] : ProvinceModel.fromMapList(resp.data); &#125; /// è¯·æ±‚å¸‚å†…çš„åŒº Future&lt;List&lt;DistrictModel&gt;&gt; requestAllDistricts(String proid, String cityid) async &#123; var resp = await Application.http .getRequest('$&#123;WeatherApi.WEATHER_PROVINCE&#125;/$proid/$cityid', error: (msg) =&gt; _logger.log(msg, 'district')); return resp == null || resp.data == null ? [] : DistrictModel.fromMapList(resp.data); &#125; @override void dispose() &#123; // åŠæ—¶é”€æ¯ _provinceController?.close(); _citiesController?.close(); _districtController?.close(); &#125;&#125; å†™å®Œ BLoC éœ€è¦å¯¹å…¶è¿›è¡Œæ³¨å†Œï¼Œå› ä¸ºåŸŽå¸‚é€‰æ‹©ç›¸å¯¹è¿˜æ˜¯æ¯”è¾ƒé¢‘ç¹çš„ï¼Œæ‰€ä»¥å¯ä»¥æ”¾æœ€é¡¶å±‚è¿›è¡Œæ³¨å†Œ 12345678return BlocProvider( bloc: ProvincesBloc(), // åŸŽå¸‚åˆ‡æ¢ BLoC child: MaterialApp( title: 'Weather App', onGenerateRoute: Application.router.generator, debugShowCheckedModeBanner: false, ), ); åŸŽå¸‚é€‰æ‹©å°±æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œç›´æŽ¥é€šè¿‡ ListView ç”Ÿæˆå³å¯ï¼Œå‰é¢è®² ListView çš„æ—¶å€™æåˆ°ï¼Œå°½å¯èƒ½å›ºå®š item çš„é«˜åº¦ï¼Œä¼šæé«˜ç»˜åˆ¶æ•ˆçŽ‡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/// æŸ¥çœ‹ `provinces_page.dart` æ–‡ä»¶class ProvinceListPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; var _bloc = BlocProvider.of&lt;ProvincesBloc&gt;(context); // è¿›å…¥çš„æ—¶å€™å…ˆä½¿ç”¨æ•°æ®åº“çš„æ•°æ®å¡«å……ç•Œé¢ Application.db.queryAllProvinces().then((ps) =&gt; _bloc.changeProvinces(ps)); // ç½‘ç»œæ•°æ®æ›´æ–°åˆ—è¡¨å¹¶åˆ·æ–°æ•°æ®åº“æ•°æ® _bloc.requestAllProvinces().then((provinces) &#123; _bloc.changeProvinces(provinces); Application.db.insertProvinces(provinces); &#125;); return Scaffold( appBar: AppBar( title: Text('è¯·é€‰æ‹©çœä»½'), ), body: Container( color: Colors.black12, alignment: Alignment.center, // çœåˆ—è¡¨é€‰æ‹© child: StreamBuilder( stream: _bloc.provinceStream, initialData: _bloc.provinces, builder: (_, AsyncSnapshot&lt;List&lt;ProvinceModel&gt;&gt; snapshot) =&gt; !snapshot.hasData || snapshot.data.isEmpty // å¦‚æžœå½“å‰çš„æ•°æ®æœªåŠ è½½åˆ™ç»™ä¸€ä¸ªåŠ è½½ï¼Œå¦åˆ™æ˜¾ç¤ºåˆ—è¡¨åŠ è½½ ? CupertinoActivityIndicator(radius: 12.0) : ListView.builder( physics: BouncingScrollPhysics(), padding: const EdgeInsets.symmetric(horizontal: 12.0), itemBuilder: (_, index) =&gt; InkWell( child: Container( alignment: Alignment.centerLeft, child: Text(snapshot.data[index].name, style: TextStyle(fontSize: 18.0, color: Colors.black)), ), onTap: () =&gt; Application.router.navigateTo( context, // è·³è½¬ä¸‹å±‚çœå†…åŸŽå¸‚é€‰æ‹©ï¼Œéœ€è¦å°†å½“å‰çš„çœ id ä»¥åŠçœåä¼ å…¥ Routers. generateProvinceRouterPath(snapshot.data[index].id, FluroConvertUtils.fluroCnParamsEncode(snapshot.data[index].name)), transition: TransitionType.fadeIn), ), itemExtent: 50.0, itemCount: snapshot.data.length), ), ), ); &#125;&#125; å¯¹äºŽå¸‚å’ŒåŒºçš„åˆ—è¡¨é€‰æ‹©ä¹Ÿç±»ä¼¼ï¼Œé™¤äº†æœ€åŽçš„ç‚¹å‡»ä¼šæœ‰äº›åŒºåˆ«é¡µé¢çš„å¸ƒå±€å‡ ä¹Žä¸€è‡´ï¼Œè¿™è¾¹åªæä¸‹ç‚¹å‡»äº‹ä»¶ 12345678910111213141516/// æŸ¥çœ‹ `cities_page.dart` æ–‡ä»¶Application.router.navigateTo( context, // è·³è½¬ä¸‹å±‚çœå†…åŸŽå¸‚é€‰æ‹© Routers.generateProvinceRouterPath( snapshot.data[index].id, FluroConvertUtils.fluroCnParamsEncode(snapshot.data[index].name)), transition: TransitionType.fadeIn), )// è®¾ç½®ä¸ºå½“å‰åŒºï¼Œå¹¶æ¸…ç†è·¯ç”± stackï¼Œå¹¶å°†å¤©æ°”ç•Œé¢è®¾ç½®åˆ°æœ€ä¸Šå±‚onTap: () &#123; PreferenceUtils.instance .saveString(PreferencesKey.WEATHER_CITY_ID, snapshot.data[index].weatherId); Application.router.navigateTo(context, Routers.generateWeatherRouterPath(snapshot.data[index].weatherId), transition: TransitionType.inFromRight, clearStack: true); &#125;) å¤©æ°”è¯¦æƒ…é¡µé¢å¤©æ°”è¯¦æƒ…é¡µé¢ç›¸å¯¹éƒ¨ä»¶ä¼šå¤šç‚¹ï¼Œä¸ºäº†çœ‹ç€èˆ’æœä¸€ç‚¹ï¼Œè¿™é‡Œæ‹†æˆå¤šä¸ªéƒ¨åˆ†æ¥ç¼–å†™ï¼Œåœ¨è¿™ä¹‹å‰è¿˜æ˜¯å…ˆç¼–å†™æ•°æ®çš„ç®¡ç†ç±»ï¼Œå› ä¸ºå¤©æ°”è¯¦æƒ…æŽ¥å£è¿”å›žçš„æ•°æ®åµŒå¥—å±‚æ¬¡æ¯”è¾ƒå¤šï¼Œå…³ç³»æ¯”è¾ƒå¤æ‚ï¼Œä¸é€‚åˆç”¨ database æ¥åšæŒä¹…åŒ–ï¼Œæ‰€ä»¥è¿™é‡Œé‡‡ç”¨æ–‡ä»¶æŒä¹…åŒ–æ–¹å¼ã€‚å½“ç„¶æœ‰äº›å°ä¼™ä¼´ä¼šé—®å¹²å˜›ä¸ä½¿ç”¨ shared_preferences æ¥å­˜å‚¨ï¼Œç†è®ºä¸Šåº”è¯¥æ²¡æœ‰å¤ªå¤§çš„é—®é¢˜ï¼Œä½†æ˜¯ä¸ªäººå»ºè®®ç›¸å¯¹å¤æ‚çš„æ•°æ®ä½¿ç”¨æ–‡ä»¶å­˜å‚¨ä¼šç›¸å¯¹æ¯”è¾ƒå¥½ç‚¹ï¼Œä¸€å®šè¦è¯´ä¸ªä¸ºä»€ä¹ˆï¼Œæˆ‘ä¹Ÿè¯´ä¸å‡ºæ¥ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/// æŸ¥çœ‹ `weather_bloc.dart` æ–‡ä»¶class WeatherBloc extends BaseBloc &#123; final _logger = Logger('WeatherBloc'); WeatherModel _weather; // å¤©æ°”æƒ…å†µ String _background = WeatherApi.DEFAULT_BACKGROUND; // èƒŒæ™¯ WeatherModel get weather =&gt; _weather; String get background =&gt; _background; BehaviorSubject&lt;WeatherModel&gt; _weatherController = BehaviorSubject(); BehaviorSubject&lt;String&gt; _backgroundController = BehaviorSubject(); Observable&lt;WeatherModel&gt; get weatherStream =&gt; Observable(_weatherController.stream); Observable&lt;String&gt; get backgroundStream =&gt; Observable(_backgroundController.stream); /// æ›´æ–°å¤©æ°”æƒ…å†µ updateWeather(WeatherModel weather) &#123; _weather = weather; _weatherController.add(_weather); &#125; /// æ›´æ–°å¤©æ°”èƒŒæ™¯ updateBackground(String background) &#123; _background = background; _backgroundController.add(_background); &#125; // è¯·æ±‚å¤©æ°”æƒ…å†µ Future&lt;WeatherModel&gt; requestWeather(String id) async &#123; var resp = await Application.http .getRequest(WeatherApi.WEATHER_STATUS, params: &#123;'cityid': id, 'key': WeatherApi.WEATHER_KEY&#125;, error: (msg) =&gt; _logger.log(msg, 'weather')); // è¯·æ±‚æ•°æ®æˆåŠŸåˆ™å†™å…¥åˆ°æ–‡ä»¶ä¸­ if (resp != null &amp;&amp; resp.data != null) &#123; _writeIntoFile(json.encode(resp.data)); &#125; return WeatherModel.fromMap(resp.data); &#125; Future&lt;String&gt; requestBackground() async &#123; var resp = await Application.http .getRequest&lt;String&gt;(WeatherApi.WEATHER_BACKGROUND, error: (msg) =&gt; _logger.log(msg, 'background')); return resp == null || resp.data == null ? WeatherApi.DEFAULT_BACKGROUND : resp.data; &#125; // èŽ·å–å­˜å‚¨æ–‡ä»¶è·¯å¾„ Future&lt;String&gt; _getPath() async =&gt; '$&#123;(await getApplicationDocumentsDirectory()).path&#125;/weather.txt'; // å†™å…¥åˆ°æ–‡ä»¶ _writeIntoFile(String contents) async &#123; File file = File(await _getPath()); if (await file.exists()) file.deleteSync(); file.createSync(); file.writeAsString(contents); &#125; // æ–‡ä»¶è¯»å–å­˜å‚¨ä¿¡æ¯ï¼Œå¦‚æžœä¸å­˜åœ¨æ–‡ä»¶åˆ™è¿”å›žç©ºå­—ç¬¦ä¸² ''ï¼Œä¸æŽ¨èè¿”å›ž null Future&lt;String&gt; readWeatherFromFile() async &#123; File file = File(await _getPath()); return (await file.exists()) ? file.readAsString() : ''; &#125; @override void dispose() &#123; _weatherController?.close(); _backgroundController?.close(); &#125;&#125; å¤©æ°”è¯¦æƒ…çš„åˆ·æ–°åªæœ‰å½“ä¸ªé¡µé¢ï¼Œæ‰€ä»¥ BLoC çš„æ³¨å†Œå€¼éœ€è¦åœ¨è·¯ç”±ä¸Šæ³¨å†Œå³å¯ï¼Œåœ¨ fluro å¯¹åº” handler ä¸­åŠ å…¥æ³¨å†Œ 1234Handler weatherHandler = Handler(handlerFunc: (_, params) &#123; String cityId = params['city_id']?.first; // è¿™ä¸ª id å¯ä»¥é€šè¿‡ BLoC èŽ·å–ä¹Ÿå¯ä»¥ return BlocProvider(child: WeatherPage(city: cityId), bloc: WeatherBloc());&#125;); é‚£ä¹ˆæŽ¥ä¸‹æ¥å°±å¯ä»¥ç¼–å†™ç•Œé¢äº†ï¼Œå…ˆå®žçŽ°æœ€å¤–å±‚çš„èƒŒæ™¯å›¾å˜åŒ– 123456789101112131415161718192021222324252627282930313233343536373839/// æŸ¥çœ‹ `weather_page.dart` æ–‡ä»¶class WeatherPage extends StatelessWidget &#123; final String city; WeatherPage(&#123;Key key, this.city&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; var _bloc = BlocProvider.of&lt;WeatherBloc&gt;(context); // è¯·æ±‚èƒŒæ™¯å¹¶æ›´æ–° _bloc.requestBackground().then((b) =&gt; _bloc.updateBackground(b)); // å…ˆè¯»å–æœ¬åœ°æ–‡ä»¶ç¼“å­˜è¿›è¡Œé¡µé¢å¡«å…… _bloc.readWeatherFromFile().then((s) &#123; if (s.isNotEmpty) &#123; _bloc.updateWeather(WeatherModel.fromMap(json.decode(s))); &#125; &#125;); // å†è¯·æ±‚ç½‘ç»œæ›´æ–°æ•°æ® _bloc.requestWeather(city).then((w) =&gt; _bloc.updateWeather(w)); return Scaffold( body: StreamBuilder( stream: _bloc.backgroundStream, initialData: _bloc.background, builder: (_, AsyncSnapshot&lt;String&gt; themeSnapshot) =&gt; Container( padding: const EdgeInsets.symmetric(horizontal: 12.0, vertical: 20.0), alignment: Alignment.center, decoration: BoxDecoration( color: Colors.black12, image: DecorationImage( image: NetworkImage(themeSnapshot.data), fit: BoxFit.cover), ), child: // å…·ä½“å†…éƒ¨å¸ƒå±€é€šè¿‡æ‹†åˆ†å°éƒ¨ä»¶å®žçŽ° )), ); &#125;&#125; é¡µé¢æœ€é¡¶éƒ¨æ˜¯æ˜¾ç¤ºä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªè·³è½¬åŸŽå¸‚é€‰æ‹©ï¼Œä¸€ä¸ªè·³è½¬è®¾ç½®é¡µé¢ï¼Œæ˜¾ç¤ºå½“å‰çš„åŸŽå¸‚ 1234567891011121314151617181920212223242526272829class FollowedHeader extends StatelessWidget &#123; final AsyncSnapshot&lt;WeatherModel&gt; snapshot; // snapshot é€šè¿‡ä¸Šå±‚ä¼ å…¥ FollowedHeader(&#123;Key key, this.snapshot&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; return Row( mainAxisAlignment: MainAxisAlignment.spaceBetween, children: &lt;Widget&gt;[ // åŸŽå¸‚é€‰æ‹©é¡µé¢è·³è½¬æŒ‰é’® IconButton( icon: Icon(Icons.home, color: Colors.white, size: 32.0), onPressed: () =&gt; Application.router. navigateTo(context, Routers.provinces, transition: TransitionType.inFromLeft)), // å½“å‰åŸŽå¸‚ Text('$&#123;snapshot.data.heWeather[0].basic.location&#125;', style: TextStyle(fontSize: 28.0, color: Colors.white)), // è®¾ç½®é¡µé¢è·³è½¬æŒ‰é’® IconButton( icon: Icon(Icons.settings, color: Colors.white, size: 32.0), onPressed: () =&gt; Application.router .navigateTo(context, Routers.settings, transition: TransitionType.inFromRight)) ], ); &#125;&#125; æŽ¥ç€æ˜¯å½“å‰çš„å¤©æ°”è¯¦æƒ…éƒ¨åˆ† 1234567891011121314151617181920212223242526272829class CurrentWeatherState extends StatelessWidget &#123; final AsyncSnapshot&lt;WeatherModel&gt; snapshot; CurrentWeatherState(&#123;Key key, this.snapshot&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; var _now = snapshot.data.heWeather[0].now; var _update = snapshot.data.heWeather[0].update.loc.split(' ').last; return Column( crossAxisAlignment: CrossAxisAlignment.end, children: &lt;Widget&gt;[ // å½“å‰çš„æ¸©åº¦ Text('$&#123;_now.tmp&#125;â„ƒ', style: TextStyle(fontSize: 50.0, color: Colors.white)), // å½“å‰çš„å¤©æ°”çŠ¶å†µ Text('$&#123;_now.condTxt&#125;', style: TextStyle(fontSize: 24.0, color: Colors.white)), Row( // åˆ·æ–°çš„æ—¶é—´ mainAxisAlignment: MainAxisAlignment.end, children: &lt;Widget&gt;[ Icon(Icons.refresh, size: 16.0, color: Colors.white), Padding(padding: const EdgeInsets.only(left: 4.0)), Text(_update, style: TextStyle(fontSize: 12.0, color: Colors.white)) ], ) ], ); &#125;&#125; æŽ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªå¤©æ°”é¢„æŠ¥çš„åˆ—è¡¨å—ï¼Œä»¥ä¸ºæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡ Cloumn æ¥å®žçŽ°ï¼Œä½†æ˜¯å‰é¢æœ‰æåˆ°è¿‡ä¸€ä¸ªåˆ—è¡¨ã€Œç²˜åˆå‰‚ã€â€”- CustomScrollViewï¼Œæ‰€ä»¥è¿™é‡Œçš„æ•´ä½“è¿žæŽ¥æœ€åŽä¼šé€šè¿‡ CustomScrollView æ¥å®žçŽ°ï¼Œé‚£ä¹ˆä½ å¯ä»¥æ”¾å¿ƒåœ¨æœ€ä¸Šå±‚å®¹å™¨çš„ child å±žæ€§åŠ ä¸Š CustomScrollView äº†ã€‚æŽ¥ç€æ¥å®žçŽ°è¿™å—é¢„æŠ¥æ¨¡å— 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class WeatherForecast extends StatelessWidget &#123; final AsyncSnapshot&lt;WeatherModel&gt; snapshot; WeatherForecast(&#123;Key key, this.snapshot&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; var _forecastList = snapshot.data.heWeather[0].dailyForecasts; // èŽ·å–å¤©æ°”é¢„æŠ¥ return SliverFixedExtentList( delegate: SliverChildBuilderDelegate( (_, index) =&gt; Container( color: Colors.black54, // å¤–å±‚è®¾ç½®èƒŒæ™¯è‰²ï¼Œé˜²æ­¢è¢«æœ€å¤–å±‚å›¾ç‰‡èƒŒæ™¯é®æŒ¡æ–‡å­— padding: const EdgeInsets.all(12.0), alignment: Alignment.centerLeft, child: index == 0 // å½“ç¬¬ä¸€ä¸ª item æƒ…å†µï¼Œæ˜¾ç¤º â€˜é¢„æŠ¥â€™ ? Text('é¢„æŠ¥', style: TextStyle(fontSize: 24.0, color: Colors.white)) : Row( mainAxisAlignment: MainAxisAlignment.spaceBetween, crossAxisAlignment: CrossAxisAlignment.center, children: &lt;Widget&gt;[ Text(_forecastList[index - 1].date, // é¢„æŠ¥çš„æ—¥æœŸ style: TextStyle(fontSize: 16.0, color: Colors.white)), Expanded( // å¤©æ°”æƒ…å†µï¼Œè¿™è¾¹é€šè¿‡ expanded è¿›è¡Œå ä½ï¼Œå¹¶å±…ä¸­æ˜¾ç¤º child: Center(child: Text(_forecastList[index - 1].cond.txtD, style: TextStyle(fontSize: 16.0, color: Colors.white))), flex: 2), Expanded( child: Row( // æœ€é«˜æ¸©åº¦ï¼Œæœ€ä½Žæ¸©åº¦ mainAxisAlignment: MainAxisAlignment.spaceBetween, children: &lt;Widget&gt;[ Text(_forecastList[index - 1].tmp.max, style: TextStyle(fontSize: 16.0, color: Colors.white)), Text(_forecastList[index - 1].tmp.min, style: TextStyle(fontSize: 16.0, color: Colors.white)), ], ), flex: 1) ], )), childCount: _forecastList.length + 1, // è¿™ä¸ªæ•°é‡éœ€è¦ +1ï¼Œå› ä¸ºæœ‰ä¸ªæ ‡é¢˜éœ€è¦ä¸€ä¸ªæ•°é‡ ), itemExtent: 50.0); &#125;&#125; æŽ¥ç€æ˜¯ç©ºæ°”è´¨é‡æŠ¥å‘Šï¼Œä¸€ä¸ªæ ‡é¢˜ï¼Œä¸‹é¢ç”±ä¸¤ä¸ªå¸ƒå±€è¿›è¡Œå¹³åˆ† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051class AirQuality extends StatelessWidget &#123; final AsyncSnapshot&lt;WeatherModel&gt; snapshot; AirQuality(&#123;Key key, this.snapshot&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; var quality = snapshot.data.heWeather[0].aqi.city; return Container( padding: const EdgeInsets.all(12.0), color: Colors.black54, alignment: Alignment.centerLeft, child: Column( crossAxisAlignment: CrossAxisAlignment.start, children: &lt;Widget&gt;[ // æ ‡é¢˜ Padding(padding: const EdgeInsets.only(bottom: 20.0), child: Text('ç©ºæ°”è´¨é‡', style: TextStyle(fontSize: 24.0, color: Colors.white))), Row( children: &lt;Widget&gt;[ // é€šè¿‡ expanded è¿›è¡Œå¹³åˆ†æ¨ªå‘è·ç¦» Expanded( child: Center( // å†…éƒ¨å±…ä¸­æ˜¾ç¤º child: Column( children: &lt;Widget&gt;[ Text('$&#123;quality.aqi&#125;', style: TextStyle(fontSize: 40.0, color: Colors.white)), Text('AQI æŒ‡æ•°', style: TextStyle(fontSize: 20.0, color: Colors.white)), ], ), )), Expanded( child: Center( child: Column( children: &lt;Widget&gt;[ Text('$&#123;quality.pm25&#125;', style: TextStyle(fontSize: 40.0, color: Colors.white)), Text('PM2.5 æŒ‡æ•°', style: TextStyle(fontSize: 20.0, color: Colors.white)), ], ), )), ], ) ], )); &#125;&#125; æŽ¥ä¸‹æ¥æ˜¯ç”Ÿæ´»è´¨é‡æ¨¡å—ï¼Œçœ‹ç€ä¹Ÿæ˜¯ä¸ªåˆ—è¡¨ï¼Œä½†æ˜¯åŽå°è¿”å›žçš„ä¸æ˜¯åˆ—è¡¨ï¼Œè€Œæ˜¯æ ¹æ®ä¸åŒå­—æ®µèŽ·å–ä¸åŒè´¨é‡æŒ‡æ•°ï¼Œå› ä¸ºå¸ƒå±€ç±»ä¼¼ï¼Œæ‰€ä»¥å¯ä»¥å¯¹å…¶è¿›è¡Œå°è£…å†æ•´ä½“è°ƒç”¨ 12345678910111213141516171819202122232425262728293031class LifeSuggestions extends StatelessWidget &#123; final AsyncSnapshot&lt;WeatherModel&gt; snapshot; LifeSuggestions(&#123;Key key, this.snapshot&#125;) : super(key: key); // ç”Ÿæ´»æŒ‡æ•°å°è£… Widget _suggestionWidget(String content) =&gt; Padding(padding: const EdgeInsets.only(top: 20.0), child: Text(content, style: TextStyle(color: Colors.white, fontSize: 16.0))); @override Widget build(BuildContext context) &#123; var _suggestion = snapshot.data.heWeather[0].suggestion; return Container( padding: const EdgeInsets.all(12.0), color: Colors.black54, alignment: Alignment.centerLeft, child: Column( crossAxisAlignment: CrossAxisAlignment.start, children: &lt;Widget&gt;[ Text('ç”Ÿæ´»å»ºè®®', style: TextStyle(fontSize: 24.0, color: Colors.white)), _suggestionWidget('èˆ’é€‚åº¦ï¼š$&#123;_suggestion.comf.brf&#125;\n$&#123;_suggestion.comf.txt&#125;'), _suggestionWidget('æ´—è½¦æŒ‡æ•°ï¼š$&#123;_suggestion.cw.brf&#125;\n$&#123;_suggestion.cw.txt&#125;'), _suggestionWidget('è¿åŠ¨æŒ‡æ•°ï¼š $&#123;_suggestion.sport.brf&#125;\n$&#123;_suggestion.sport.txt&#125;'), ], ), ); &#125;&#125; æ‰€æœ‰çš„åˆ†æ¨¡å—éƒ½å·²ç»ç¼–å†™å®Œæˆï¼Œå‰©ä¸‹å°±æ˜¯é€šè¿‡ç²˜åˆå‰‚è¿›è¡Œç»„è£…äº† 12345678910111213141516171819202122232425262728293031323334child: StreamBuilder( initialData: _bloc.weather, stream: _bloc.weatherStream, builder: (_, AsyncSnapshot&lt;WeatherModel&gt; snapshot) =&gt; !snapshot.hasData ? CupertinoActivityIndicator(radius: 12.0) : SafeArea( child: RefreshIndicator( child: CustomScrollView( physics: BouncingScrollPhysics(), slivers: &lt;Widget&gt;[ SliverToBoxAdapter(child: FollowedHeader(snapshot: snapshot)), // å®žæ—¶å¤©æ°” SliverPadding( padding: const EdgeInsets.symmetric(vertical: 30.0), sliver: SliverToBoxAdapter( child: CurrentWeatherState(snapshot: snapshot, city: city), ), ), // å¤©æ°”é¢„æŠ¥ WeatherForecast(snapshot: snapshot), // ç©ºæ°”è´¨é‡ SliverPadding( padding: const EdgeInsets.symmetric(vertical: 30.0), sliver: SliverToBoxAdapter(child: AirQuality(snapshot: snapshot)), ), // ç”Ÿæ´»å»ºè®® SliverToBoxAdapter(child: LifeSuggestions(snapshot: snapshot)) ], ), onRefresh: () async &#123; _bloc.requestWeather(city).then((w) =&gt; _bloc.updateWeather(w)); return null; &#125;), )), æœ€åŽå°±å‰©ä¸‹è®¾ç½®é¡µçš„å…¨å±€ä¸»é¢˜åˆ‡æ¢äº† è®¾ç½®é¡µå…¨å±€ä¸»é¢˜åˆ‡æ¢æ—¢ç„¶æåˆ°äº†æ•°æ®çš„åˆ‡æ¢ï¼Œé‚£è‚¯å®šå°±æ¶‰åŠ BLoC æ¯«æ— ç–‘é—®äº†ï¼Œè¿˜æ˜¯ç…§å¸¸ç¼–å†™ç®¡ç†ç±» 12345678910111213141516171819202122232425/// æŸ¥çœ‹ `setting_bloc.dart` æ–‡ä»¶class SettingBloc extends BaseBloc &#123; /// æ‰€æœ‰ä¸»é¢˜è‰²åˆ—è¡¨ static const themeColors = [Colors.blue, Colors.red, Colors.green, Colors.deepOrange, Colors.pink, Colors.purple]; Color _color = themeColors[0]; Color get color =&gt; _color; BehaviorSubject&lt;Color&gt; _colorController = BehaviorSubject(); Observable&lt;Color&gt; get colorStream =&gt; Observable(_colorController.stream); /// åˆ‡æ¢ä¸»é¢˜é€šçŸ¥åˆ·æ–° switchTheme(int themeIndex) &#123; _color = themeColors[themeIndex]; _colorController.add(_color); &#125; @override void dispose() &#123; _colorController?.close(); &#125;&#125; å› ä¸ºæ˜¯å…¨å±€çš„åˆ‡æ¢ï¼Œé‚£ä¹ˆè¿™ä¸ª BLoC è‚¯å®šéœ€è¦åœ¨æœ€é¡¶å±‚è¿›è¡Œæ³¨å†Œï¼Œè¿™è¾¹å°±ä¸è´´ä»£ç äº†ï¼ŒåŒ ProvinceBloc ä¸€è‡´ã€‚æŽ¥ç€ç¼–å†™ç•Œé¢ï¼Œè®¾ç½®ç•Œé¢å› ä¸ºæœ‰ GridView å’Œå…¶ä»–éƒ¨ä»¶ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦ç”¨ CustomScrollView ä½œä¸ºç²˜åˆå‰‚ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ Wrap ä»£æ›¿ GridView æ¥å®žçŽ°ç½‘æ ¼ï¼Œå°±ä¸éœ€è¦ç”¨ CustomScrollViewï¼Œä½¿ç”¨ Column å³å¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556class SettingsPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; var _bloc = BlocProvider.of&lt;SettingBloc&gt;(context); return StreamBuilder( stream: _bloc.colorStream, initialData: _bloc.color, // Theme æ˜¯ Flutter è‡ªå¸¦çš„ä¸€ä¸ªè®¾ç½®ä¸»é¢˜çš„éƒ¨ä»¶ï¼Œé‡Œé¢å¯ä»¥è®¾ç½®å¤šç§é¢œè‰²ï¼Œ // é€šè¿‡æŽ¥æ”¶åˆ° color çš„å˜åŒ–ï¼Œæ”¹å˜ä¸»é¢˜è‰²ï¼Œå…¶ä»–é¡µé¢ä¹Ÿå¦‚æ­¤è®¾ç½®ï¼Œå°ä¼™ä¼´å¯ä»¥è‡ªå·±æ·»åŠ  builder: (_, AsyncSnapshot&lt;Color&gt; snapshot) =&gt; Theme( // IconThemeData ç”¨äºŽè®¾ç½®æŒ‰é’®çš„ä¸»é¢˜è‰² data: ThemeData(primarySwatch: snapshot.data, iconTheme: IconThemeData(color: snapshot.data)), child: Scaffold( appBar: AppBar( title: Text('è®¾ç½®'), ), body: Container( color: Colors.black12, padding: const EdgeInsets.symmetric(horizontal: 12.0, vertical: 20.0), child: CustomScrollView( slivers: &lt;Widget&gt;[ SliverPadding( padding: const EdgeInsets.only(right: 12.0), sliver: SliverToBoxAdapter( child: Row( mainAxisAlignment: MainAxisAlignment.spaceBetween, crossAxisAlignment: CrossAxisAlignment.center, children: &lt;Widget&gt;[ Text('å½“å‰ä¸»é¢˜è‰²ï¼š', style: TextStyle(fontSize: 16.0, color: snapshot.data)), Container(width: 20.0, height: 20.0, color: snapshot.data) ], )), ), SliverPadding(padding: const EdgeInsets.symmetric(vertical: 15.0)), SliverGrid( delegate: SliverChildBuilderDelegate( (_, index) =&gt; InkWell( child: Container(color: SettingBloc.themeColors[index]), onTap: () &#123; // é€‰æ‹©åŽè¿›è¡Œä¿å­˜ï¼Œå½“ä¸‹æ¬¡è¿›å…¥çš„æ—¶å€™ç›´æŽ¥ä½¿ç”¨è¯¥ä¸»é¢˜è‰² // åŒæ—¶åˆ‡æ¢ä¸»é¢˜è‰² _bloc.switchTheme(index); PreferenceUtils.instance.saveInteger(PreferencesKey.THEME_COLOR_INDEX, index); &#125;, ), childCount: SettingBloc.themeColors.length), gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(crossAxisCount: 3, mainAxisSpacing: 20.0, crossAxisSpacing: 20.0)), ], ), ), ), )); &#125;&#125; æœ€ç»ˆå…¨å±€çš„ä¸»é¢˜åˆ‡æ¢ä¹Ÿå®žçŽ°äº†ã€‚ ç¼–å†™å®Œä»£ç ï¼Œéœ€è¦æ‰“åŒ…å•Šï¼ŒAndroid ä¸‹çš„æ‰“åŒ…å¤§å®¶è‚¯å®šæ²¡é—®é¢˜ï¼Œè¿™é‡Œè®²ä¸‹ flutter ä¸‹å¦‚ä½•æ‰“åŒ… apkï¼Œipa å› ä¸ºæ²¡æœ‰ mac æ‰€ä»¥ä½ ä»¬æ‡‚çš„ã€‚ apk æ–‡ä»¶æ‰“åŒ… åˆ›å»º jks æ–‡ä»¶ï¼Œå¦‚æžœå·²ç»å­˜åœ¨å¯å¿½ç•¥è¿™æ­¥ä»Žç¬¬äºŒæ­¥å¼€å§‹ã€‚æ‰“å¼€ç»ˆç«¯å¹¶è¾“å…¥ keytool -genkey -v -keystore [ä½ çš„ç­¾åæ–‡ä»¶è·¯å¾„].jks -keyalg RSA -keysize 2048 -validity 10000 -alias key ç„¶åŽè¾“å…¥å¯†ç ä»¥åŠä¸€äº›åŸºæœ¬ä¿¡æ¯å°±å¯ä»¥åˆ›å»ºæˆåŠŸäº† åœ¨é¡¹ç›®çš„ android ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª key.properties æ–‡ä»¶ï¼Œé‡Œé¢è¿›è¡Œå¦‚ä¸‹é…ç½® 1234storePassword=&lt;password from previous step&gt;keyPassword=&lt;password from previous step&gt;keyAlias=keystoreFile=&lt;[ä½ çš„ç­¾åæ–‡ä»¶è·¯å¾„].jks&gt; åœ¨ android/app ä¸‹çš„ build.gradle ä¸­è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ 123456789101112131415161718192021222324252627apply from: "$flutterRoot/packages/flutter_tools/gradle/flutter.gradle" // å¢žåŠ å¦‚ä¸‹éƒ¨åˆ†ä»£ç def keystorePropertiesFile = rootProject.file("key.properties")def keystoreProperties = new Properties()keystoreProperties.load(new FileInputStream(keystorePropertiesFile))android &#123; // ... defaultConfigs&#123; // ... &#125; // å¢žåŠ å¦‚ä¸‹ä»£ç  signingConfigs &#123; release &#123; keyAlias keystoreProperties['keyAlias'] keyPassword keystoreProperties['keyPassword'] storeFile file(keystoreProperties['storeFile']) storePassword keystoreProperties['storePassword'] &#125; &#125; buildTypes&#123; // ... &#125;&#125; å†æ¬¡æ‰“å¼€ç»ˆç«¯è¿è¡Œ flutter build apk ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª apk æ–‡ä»¶ï¼Œæ–‡ä»¶è·¯å¾„ä¸º [ä½ çš„é¡¹ç›®åœ°å€]\build\app\outputs\apk\release é€šè¿‡ flutter install å°±å¯ä»¥å°†æ­£å¼åŒ…è¿è¡Œåˆ°æ‰‹æœºä¸Š]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(åä¸‰)ä¹‹ç½‘ç»œ]]></title>
    <url>%2Fposts%2Fd9e32c9b.html</url>
    <content type="text"><![CDATA[å‰é¢è®²å®Œäº†å¸¸ç”¨çš„éƒ¨ä»¶ï¼ŒBLoC æ¨¡å¼ï¼Œæ•°æ®æŒä¹…åŒ–ç­‰å¸¸ç”¨çš„ï¼Œä»Šå¤©å†ä»‹ç»ä¸ªé‡å¤´æˆ â€”â€” ç½‘ç»œè¯·æ±‚ HttpClientHttpClient æ˜¯ dart è‡ªå¸¦çš„ç½‘ç»œè¯·æ±‚æ–¹å¼ï¼Œåœ¨ dart:io åŒ…ä¸‹ã€‚ä½¿ç”¨ HttpClient ä½œä¸ºè¯·æ±‚åˆ†ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ åˆ›å»º HttpClient å®žä¾‹ 1HttpClient client = HttpClient(); æ‰“å¼€è¿žæŽ¥ï¼Œå¹¶è®¾ç½®ä¸€äº›å¤´å‚æ•°ï¼Œè¯·æ±‚å‚æ•°ç­‰ 123456789101112// å¦‚æžœ url ä¸­æ²¡æœ‰æŸ¥è¯¢å‚æ•°å¯ç›´æŽ¥åˆ›å»ºUri uri = Uri.parse('https://www.xxx.com');// å¦‚æžœå­˜åœ¨æŸ¥è¯¢å‚æ•°åˆ™åœ¨ Uri ä¸­æ·»åŠ Uri uri = Uri(scheme: 'https', host: 'www.xxx.com', queryParameters: &#123;'a': 'AAA'&#125;);// æ‰“å¼€è¿žæŽ¥HttpClientRequest request = await client.getUrl(uri);request.headers.add('token', 'Bear $&#123;'x' * 20&#125;'); // æ·»åŠ å¤´éƒ¨ token ä¿¡æ¯// å¦‚æžœæ˜¯ post æˆ–è€… put è¯·æ±‚ï¼Œé€šè¿‡ `add` æ·»åŠ è¯·æ±‚ä½“// å› ä¸º `add` æ–¹æ³•éœ€è¦ä¼ å…¥ `List&lt;int&gt;` å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ utf8.encode è¿›è¡Œç¼–ç request.add(utf8.encode('&#123;"a": "aaa"&#125;'));// ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ æµçš„æ–¹å¼è¿›è¡Œæ·»åŠ request.addStream(input); è¿žæŽ¥æœåŠ¡å™¨ 123// è®¾ç½® request åŽé€šè¿‡ request.close() èŽ·å–ä¸€ä¸ªå“åº”å¯¹è±¡ HttpClientResponseï¼Œ// åŒ…æ‹¬å“åº”å¤´ï¼Œå“åº”å†…å®¹ç­‰HttpClientResponse response = await request.close(); è¯»å–æœåŠ¡å™¨å“åº”å†…å®¹ 1String responseBody = await response.transform(utf8.decoder).join(); å…³é—­å®žä¾‹ 1client.close(); ä¾‹å¦‚æˆ‘ä»¬è¦åŽ»è¯·æ±‚ Bird.so çš„é¦–é¡µå¹¶æ˜¾ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå®žçŽ° 12345678910111213141516_httpClientRequest() async &#123; HttpClient client; // try catch finally ç”¨äºŽæ•èŽ·è¯·æ±‚è¿‡ç¨‹ä¸­å‘ç”Ÿçš„å¼‚å¸¸ï¼Œåœ¨ finally ä¸­è®¾ç½®ä¿è¯ client èƒ½å¤Ÿå…³é—­ try &#123; client = HttpClient(); HttpClientRequest request = await client.getUrl(Uri.parse(_BIRD_SO_URL)); HttpClientResponse response = await request.close(); String strResponse = await response.transform(utf8.decoder).join(); setState(() =&gt; _netBack = strResponse); &#125; catch (e) &#123; print('$&#123;e.toString()&#125;'); setState(() =&gt; _netBack = 'Fail'); &#125; finally &#123; client.close(); &#125; &#125; æœ€åŽå®žçŽ°çš„æ•ˆæžœ å¾ˆæ˜¾ç„¶ï¼Œç”¨ HttpClient è¯·æ±‚ç›¸å¯¹æ¥è¯´æ˜¯ä¸ªéžå¸¸éº»çƒ¦çš„è¿‡ç¨‹ï¼Œå¦‚æžœè¦æ¶‰åŠåˆ°æ–‡æœ¬ä¸Šä¼ ä¹‹ç±»çš„ï¼Œé‚£ä¹ˆå°±ä¼šæ›´éº»çƒ¦äº†ï¼Œæ‰€ä»¥è¿™è¾¹å¼•å…¥ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„æ’ä»¶ dioï¼Œå†™æœ¬æ–‡çš„æ—¶å€™ç‰ˆæœ¬ä¸º 2.1.0 Diodio æ˜¯ä¸ªéžå¸¸å¼ºå¤§çš„ç½‘ç»œè¯·æ±‚åº“ï¼Œä»–çš„æ–¹å¼ç±»ä¼¼ OkHttpï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨æ–¹å¼éžå¸¸ç®€å•ï¼Œåˆ›å»ºä¸€ä¸ª Dio å®žä¾‹ï¼Œç„¶åŽå°±å¯ä»¥é€šè¿‡ getï¼Œpost ç­‰æ–¹å¼å‘èµ·è¯·æ±‚ï¼Œè¿”å›ž Future&lt;Response&gt;ï¼Œè€Œä¸”æ”¯æŒå¤šä¸ªå¹¶å‘è¯·æ±‚ï¼Œå¯ä»¥è®¾ç½®è¿”å›žå“åº”çš„ç±»åž‹ï¼Œç›‘å¬ä¸Šä¼ ä¸‹è½½è¿›åº¦ç­‰ç­‰ï¼Œçœ‹ç€å°±å¾ˆç»™åŠ›ã€‚å¯¹äºŽç®€å•çš„æ–¹å¼ï¼Œè¿™è¾¹å°±ä¸åšå¤ªå¤šä»‹ç»ï¼Œä¸»è¦è®²ä¸‹æ‹¦æˆªå™¨ï¼Œä¹Ÿæ˜¯éžå¸¸ç»™åŠ›çš„ä¸€éƒ¨åˆ†ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦è¯·æ±‚è¿™ä¹ˆä¸ªæŽ¥å£ https://randomuser.me/api/ è¿™ä¸ªæŽ¥å£é€šè¿‡ get è¯·æ±‚ï¼Œå¯ä»¥åŠ å…¥ä»»æ„çš„æŸ¥è¯¢å‚æ•°ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦å®žçŽ°ä¸€ä¸ªè¯·æ±‚åŠ è§£å¯†çš„è¿‡ç¨‹ï¼Œå¦‚æžœæ¯æ¬¡éƒ½åœ¨ä¸Šä¼ å‚æ•°æˆ–è€…è¿”å›žè¯·æ±‚çš„æ—¶å€™åŽ»åŠ å¯†ï¼Œè§£å¯†çš„è¯ï¼Œå°±åšäº†éžå¸¸å¤šæ— ç”¨åŠŸäº†ï¼Œé‚£ä¹ˆè¿™æ—¶å€™æ‹¦æˆªå™¨å°±æ´¾ä¸Šç”¨åœºäº†ã€‚å…ˆå®šä¹‰ä¸‹åŠ è§£å¯†çš„è§„åˆ™ï¼Œä¸Šä¼ çš„å‚æ•°ç»Ÿä¸€è½¬ä¸ºå°å†™ï¼Œä¸å­˜åœ¨å¤§å†™ï¼Œè¯·æ±‚å›žçš„æ•°æ®ï¼Œä¸èƒ½å«æœ‰ info å­—æ®µã€‚çœ‹ä¸‹å¦‚ä½•å®žçŽ° 123456789101112131415161718192021222324252627282930313233_dioRequest() async &#123; BaseOptions options = BaseOptions(connectTimeout: 5000, receiveTimeout: 60000); Dio dio = Dio(options); dio.interceptors.add(InterceptorsWrapper(onRequest: (opt) &#123; // èŽ·å–æŸ¥è¯¢çš„å‚æ•° Map params = opt.queryParameters; // å°†æ‰€æœ‰çš„å‚æ•°è½¬ä¸ºå°å†™ï¼Œå› ä¸ºæŸ¥è¯¢å‚æ•°é€šè¿‡ map å½¢å¼ä¸Šä¼  params.forEach((key, value) =&gt; opt.queryParameters[key] = '$value'.toLowerCase()); // è¿™è¾¹è¿˜å¯ä»¥åšäº›åˆ«çš„æ“ä½œï¼Œä¾‹å¦‚éœ€è¦ token è¿›è¡Œç”¨æˆ·èº«ä»½éªŒè¯ï¼Œåˆ™é€šè¿‡å¤´éƒ¨è¿›è¡Œæ·»åŠ  // opt.headers['authorization'] = 'token'; // åœ¨å®˜ç½‘ä¸­ï¼Œæä¾›äº† lock å’Œ unlock çš„å†™æ³•ï¼Œè¢« lock åŽï¼ŒæŽ¥ä¸‹æ¥çš„è¯·æ±‚ä¼šè¿›å…¥é˜Ÿåˆ—ç­‰å¾…ï¼Œ // ç›´åˆ° unlock åŽæ‰èƒ½ç»§ç»­ï¼Œå¯ä»¥ç”¨äºŽå‡ ä¸ªè¯·æ±‚ï¼ŒåŽç»­çš„éœ€è¦ç”¨åˆ°å‰é¢çš„è¿”å›žå€¼çš„æƒ…å†µä½¿ç”¨ // è¿”å›žä¿®æ”¹åŽçš„ RequestOptions return opt; &#125;, onResponse: (resp) &#123; // è¿”å›žå“åº”ä½“åŽï¼Œå°† info å­—æ®µçš„å†…å®¹åˆ‡é™¤ï¼Œå¹¶å°† json æ‹¼æŽ¥å®Œæˆ resp.data = '$&#123;'$&#123;resp.data&#125;'.split(', info').first&#125;&#125;'; return resp; &#125;, onError: (error) &#123; // å‘ç”Ÿé”™è¯¯æ—¶çš„å›žè°ƒ return error; &#125;)); // å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹æ‰“å°çš„ç»“æžœ Response response = await dio.get(_USER_ME_URL, queryParameters: &#123;'a': 'AAA', 'b': 'BbBbBb'&#125;); print(response.data); print(response.request.headers); print(response.request.queryParameters); setState(() =&gt; _netBack = response.data.toString()); // ç•Œé¢æ˜¾ç¤º response.data &#125; çœ‹ä¸‹æœ€åŽçš„æ˜¾ç¤ºä¿¡æ¯ è¯·æ±‚ä½“çš„å¤´éƒ¨æˆåŠŸåŠ ä¸Šäº† authorization å‚æ•°ï¼Œè¯·æ±‚çš„å‚æ•°å…¨éƒ¨å˜ä¸ºå°å†™ï¼Œè¿”å›žçš„ä¿¡æ¯ä¹ŸæŠŠ info å­—æ®µå€¼åŽ»é™¤ã€‚åœ¨å¾ˆå¤šæ—¶å€™ï¼Œè¯·æ±‚æŽ¥å£åŽï¼Œéœ€è¦å°† json è½¬æ¢æˆ pojo ç±»æ¥å¤„ç†ï¼Œå¯ä»¥é€šè¿‡ json_serializable è¿™ä¸ªä¸‰æ–¹æ’ä»¶å®žçŽ°ï¼Œè¿™è¾¹æä¾›æ–‡ç«  Flutter Jsonè‡ªåŠ¨ååºåˆ—åŒ–ï¼Œå½“ç„¶è¿™ç§æ–¹å¼æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™é‡ŒæŽ¨èä¸ª Android Studio ä¸‹çš„æ’ä»¶ dart_json_format ç›´æŽ¥æœç´¢å°±å¯ä»¥ï¼Œå¦‚æžœç”¨çš„æ˜¯ Vitual Code æˆ–è€…åˆ«çš„ä¸æ˜¯ JetBrains ç³»åˆ—çš„ï¼Œè¿™é‡Œæœ‰ä¸ªè½¬æ¢çš„ç½‘å€ JsonToDartã€‚ ä»¥ä¸Šä»£ç æŸ¥çœ‹ http_main.dart æ–‡ä»¶ å®žè·µä¸€ä¸‹ä¸‹ä¸çŸ¥é“å°ä¼™è¿˜è®°å¾—å‰é¢è®²çš„ BLoC æ²¡æœ‰ï¼Œå¿˜äº†å¯ä»¥æŸ¥çœ‹ Flutter çŠ¶æ€ç®¡ç†åŠ BLoCï¼Œè¿™é‡Œç»“åˆ BLoC å’Œ Dio å®žçŽ°ç•Œé¢å’Œé€»è¾‘åˆ†ç¦»çš„å°ä¾‹å­ï¼ŒæŽ¥å£ä½¿ç”¨å‰é¢æåˆ°çš„ https://randomuser.me/api/ æŽ¥å£ã€‚ç½‘ç»œåº”è¯¥æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œæ‰€ä»¥å¯¹å…¶è¿›è¡Œä¸€äº›å°è£…è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œè¿™è¾¹æä¾›ä¸‹æˆ‘è‡ªå·±å°è£…çš„æ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990import 'package:dio/dio.dart';// ç”¨äºŽé”™è¯¯ä¿¡æ¯å›žè°ƒtypedef ErrorCallback = void Function(String msg);class HttpUtils &#123; static const GET = 'get'; static const POST = 'post'; static Dio _dio; static HttpUtils _instance; Dio get hp =&gt; _dio; // dio å¯ä»¥åœ¨ BaseOptions ä¸­æŒ‡å®šåŸŸå baseUrlï¼Œ // åŽç»­æŽ¥å£å°±ä¸éœ€è¦å†æ·»åŠ åŸŸåäº† // å¦‚æžœè¯·æ±‚çš„æŽ¥å£åŸŸåå‘ç”Ÿäº†å˜åŒ–ï¼Œåªè¦æŠŠå…¨éƒ¨ url å†™å…¨ï¼Œå°±ä¼šè‡ªåŠ¨ä½¿ç”¨æ–°çš„åŸŸå HttpUtils._internal(String base) &#123; // ç”Ÿæˆä¸€ä¸ªå•ä¾‹ï¼Œé˜²æ­¢å¤šæ¬¡æ‰“å¼€å…³é—­é€ æˆå¼€é”€ _dio = Dio(BaseOptions(baseUrl: base, connectTimeout: 10000, receiveTimeout: 10000)); &#125; factory HttpUtils(String base) &#123; if (_instance == null) _instance = HttpUtils._internal(base); return _instance; &#125; // æ·»åŠ æ‹¦æˆªå™¨ addInterceptor(List&lt;InterceptorsWrapper&gt; interceptors) &#123; _dio.interceptors.clear(); _dio.interceptors.addAll(interceptors); &#125; Future&lt;Response&lt;T&gt;&gt; getRequest&lt;T&gt;(url, &#123;Map params, ErrorCallback callback&#125;) =&gt; _request(url, GET, params: params, callback: callback); Future&lt;Response&lt;T&gt;&gt; postRequest&lt;T&gt;(url, &#123;Map params, ErrorCallback callback&#125;) =&gt; _request(url, POST, params: params, callback: callback); Future&lt;Response&gt; download(url, path, &#123;ProgressCallback receive, CancelToken token&#125;) =&gt; _dio.download(url, path, onReceiveProgress: receive, cancelToken: token); // T å¯ä»¥æŒ‡å®šè¿”å›žçš„ç±»åž‹ï¼ŒString æˆ–è€… Map&lt;String, dynamic&gt; Future&lt;Response&lt;T&gt;&gt; _request&lt;T&gt;( url, String method, &#123; Map params, // ä¸Šä¼ çš„å‚æ•° Options opt, ErrorCallback callback, // é”™è¯¯å›žè°ƒ ProgressCallback send, // ä¸Šä¼ è¿›åº¦ç›‘å¬ ProgressCallback receive, // ä¸‹è½½ç›‘å¬ CancelToken token, // ç”¨äºŽå–æ¶ˆçš„ tokenï¼Œå¯ä»¥å¤šä¸ªè¯·æ±‚ç»‘å®šä¸€ä¸ª token &#125;) async &#123; try &#123; Response&lt;T&gt; rep; if (method == GET) &#123; // å¦‚æžœä¸æ˜¯é‡æ–°åˆ›å»º Dio å®žä¾‹ï¼Œget æ–¹æ³•ä½¿ç”¨ queryParams ä¼šå‡ºé”™ï¼Œä¸æ‡‚åŽŸå› ï¼Œä½¿ç”¨æ‹¼æŽ¥æ²¡æœ‰é—®é¢˜ if (params != null &amp;&amp; params.isNotEmpty) &#123; var sb = StringBuffer('?'); params.forEach((key, value) &#123; sb.write('$key=$value&amp;'); &#125;); // get è¯·æ±‚ä¸‹æ‹¼æŽ¥è·¯å¾„ url += sb.toString().substring(0, sb.length - 1); &#125; rep = await _dio.get(url, options: opt, onReceiveProgress: receive, cancelToken: token); &#125; else if (method == POST) &#123; // post å‚æ•°æ”¾è¯·æ±‚ä½“ rep = params == null ? await _dio.post(url, options: opt, cancelToken: token, onSendProgress: send, onReceiveProgress: receive) : await _dio.post(url, data: params, options: opt, cancelToken: token, onSendProgress: send, onReceiveProgress: receive); &#125; // å¦‚æžœ statusCode ä¸æ˜¯ 200 åˆ™é”™è¯¯å›žè°ƒï¼Œè¿”å›žç©ºçš„ Response if (rep.statusCode != 200 &amp;&amp; callback != null) &#123; callback('network error, and code is $&#123;rep.statusCode&#125;'); return null; &#125; return rep; &#125; catch (e) &#123; if (callback != null) &#123; callback('network error, catch error: $&#123;e.toString()&#125;'); &#125; return null; &#125; &#125;&#125; å°è£…åŽå°±å¯ä»¥æ„‰å¿«çš„è°ƒç”¨äº†ï¼Œå¦‚æžœæœ‰åˆ«çš„è¯·æ±‚æ–¹å¼åŽæœŸå¯ä»¥ç»§ç»­æ‰©å±•ã€‚ç»§ç»­çœ‹ä»£ç ï¼Œåˆ›å»ºä¸€ä¸ª application.dart æ–‡ä»¶ï¼Œç”¨äºŽå­˜æ”¾å…¨å±€å‚æ•° 123class Application &#123; static HttpUtils http;&#125; å¹¶åœ¨ main() æ–¹æ³•ä¸­è¿›è¡Œåˆå§‹åŒ–ï¼ŒæŽ¥ä¸‹æ¥å°±å¯ä»¥ç›´æŽ¥ä½¿ç”¨ 12345678910void main() &#123; Application.http = HttpUtils('https://randomuser.me'); runApp(DemoApp()); // é€æ˜ŽçŠ¶æ€æ  if (Platform.isAndroid) &#123; SystemChrome.setSystemUIOverlayStyle(SystemUiOverlayStyle(statusBarColor: Colors.transparent)); &#125;&#125; çœ‹ä¸‹æœ€åŽçš„å®žçŽ°æ•ˆæžœå§ï¼Œåˆšè¿›å…¥æ²¡æœ‰æ•°æ®åˆ™é€šè¿‡è½¬åœˆåœˆæç¤ºï¼ŒåŠ è½½å®Œæ•°æ®åŽï¼Œç‚¹å‡»å¤´åƒæ›´æ¢ä¸‹ä¸ª å®žçŽ° BLoC éœ€è¦æœ‰ä¸€ä¸ªç®¡ç†ç±» 12345678910111213141516171819202122232425class UserBloc extends BaseBloc &#123; RandomUserModel _user; RandomUserModel get user =&gt; _user; BehaviorSubject&lt;RandomUserModel&gt; _controller = BehaviorSubject(); Observable&lt;RandomUserModel&gt; get stream =&gt; Observable(_controller.stream); // ç½‘ç»œè¯·æ±‚èŽ·å–æ–°çš„æ•°æ®ï¼Œå¹¶æ›´æ–° updateUserInfo() &#123; Application.http.getRequest('/api').then((response) &#123; // RandomUserModel å°±æ˜¯æŽ¥å£è¿”å›žçš„ json è½¬æˆçš„ model ç±» RandomUserModel model = RandomUserModel.fromMap(response.data); _user = model; // add åˆ° controller é€šçŸ¥ä¿®æ”¹ _controller.add(model); &#125;); &#125; @override void dispose() &#123; _controller?.close(); // åŠæ—¶é”€æ¯ &#125;&#125; è®¾ç½®å¥½ç®¡ç†ç±»åŽï¼Œå°±å¯ä»¥æ¥ç¼–å†™ç•Œé¢äº†ï¼Œç•Œé¢ä¹Ÿæ¯”è¾ƒç®€å• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class UserPageDemo extends StatelessWidget &#123; // å°†é¦–å­—æ¯å¤§å†™ String _upperFirst(String content) &#123; assert(content != null &amp;&amp; content.isNotEmpty); return '$&#123;content.substring(0, 1).toUpperCase()&#125;$&#123;content.substring(1)&#125;'; &#125; // åœ°å€ä¿¡æ¯é€šç”¨éƒ¨ä»¶ Widget _userLocation(String info) =&gt; Padding( padding: const EdgeInsets.only(top: 4.0), child: Text(info, style: TextStyle(color: Colors.white, fontSize: 16.0))); @override Widget build(BuildContext context) &#123; UserBloc _bloc = BlocProvider.of&lt;UserBloc&gt;(context); _bloc.updateUserInfo(); return Scaffold( // StreamBuilder æŽ¥å—æ›´æ–°æ•°æ®çš„ stream body: StreamBuilder( builder: (_, AsyncSnapshot&lt;RandomUserModel&gt; snapshot) =&gt; Container( alignment: Alignment.center, decoration: BoxDecoration( gradient: LinearGradient( begin: Alignment.topCenter, end: Alignment.bottomCenter, colors: [Colors.blue[600], Colors.blue[400]])), child: !snapshot.hasData ? CupertinoActivityIndicator(radius: 12.0) : Column(mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ InkWell( // ç”¨äºŽåˆ‡æ¢æ•°æ® child: ClipOval( // åœ†å½¢å¤´åƒ child: FadeInImage.assetNetwork( placeholder: 'images/ava_default.png', image: snapshot.data.results[0].picture.large), ), onTap: () =&gt; _bloc.updateUserInfo()), // æ›´æ–°æ•°æ® Padding( padding: const EdgeInsets.only(top: 20.0), child: Text( '$&#123;_upperFirst(snapshot.data.results[0].name.first)&#125; $&#123;_upperFirst(snapshot.data.results[0].name.last)&#125;', style: TextStyle(color: Colors.white, fontSize: 24.0)), ), Text('$&#123;snapshot.data.results[0].email&#125;', style: TextStyle(color: Colors.white, fontSize: 18.0)), _userLocation('$&#123;snapshot.data.results[0].location.street&#125;'), _userLocation('$&#123;_upperFirst(snapshot.data.results[0].location.city)&#125;'), _userLocation('$&#123;_upperFirst(snapshot.data.results[0].location.state)&#125;'), ]), ), initialData: _bloc.user, // æ³¨å…¥åˆå§‹å€¼ stream: _bloc.stream), // æ³¨å…¥æ›´æ–° stream ); &#125;&#125; ä»¥ä¸Šä»£ç æŸ¥çœ‹ bloc_network åŒ…ä¸‹çš„æ‰€æœ‰æ–‡ä»¶]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(åäºŒ)ä¹‹æ•°æ®æŒä¹…åŒ–]]></title>
    <url>%2Fposts%2F6358b348.html</url>
    <content type="text"><![CDATA[ä¸ŠèŠ‚è®²äº†çŠ¶æ€ç®¡ç†ï¼Œä½†æ˜¯å½“ App é‡å¯åŽï¼Œæ•°æ®å°±éƒ½ä¸¢å¤±äº†ï¼Œè¿™æ ·å°±æ¯”è¾ƒå°´å°¬äº†ï¼Œä»€ä¹ˆéƒ½è¦é‡æ¥ï¼Œæ‰€ä»¥è¿™èŠ‚æˆ‘ä»¬æ¥è®²ä¸‹æ•°æ®æŒä¹…åŒ–ã€‚æ•°æ®æŒä¹…åŒ–ä¸»è¦æœ‰å¦‚ä¸‹æ–¹å¼ æ–‡ä»¶è¯»å†™ shared_preferences å­˜å‚¨ æ•°æ®åº“å­˜å‚¨ æŒä¹…åŒ–çš„å®žçŽ°éƒ½éœ€è¦é€šè¿‡ä¸‰æ–¹æ’ä»¶æ¥å®žçŽ°ï¼ŒæŽ¥ç€ä¼šæ…¢æ…¢ä»‹ç»ä¸‰ç§å®žçŽ°æ–¹å¼ æ–‡ä»¶è¯»å†™/ IO æ“ä½œæ–‡ä»¶è¯»å†™éœ€è¦ path_provider æ’ä»¶ï¼Œå†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œæœ€æ–°ç‰ˆæœ¬æ˜¯ 0.5.0+1ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥æ ¹æ®å®˜ç½‘æœ€æ–°çš„ç‰ˆæœ¬è¿›è¡Œæ›¿æ¢ï¼Œå¯¼å…¥åŽæˆ‘ä»¬å°±å¯ä»¥æ¥çœ‹ä¸‹å¦‚ä½•å®žçŽ°æ–‡ä»¶çš„è¯»å†™äº†ã€‚path_provider çš„æºç æ¯”è¾ƒç®€å•ï¼Œè¿™è¾¹å°±ä¸å•ç‹¬æ‹Žå‡ºæ¥è¯´äº†ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ã€‚path_provider ç”¨äºŽèŽ·å–æ‰‹æœºçš„å­˜å‚¨æ–‡ä»¶ä½ç½®ï¼Œä¸€å…±æœ‰ä¸‰ä¸ªæ–¹æ³• getTemporaryDirectory ä¸´æ—¶ç›®å½•ï¼Œåœ¨ Android ä¸­å¯¹åº”çš„æ–¹æ³•ä¸º getCacheDirï¼Œè€Œåœ¨ iOS ä¸­å¯¹åº”ä¸º NSCachesDirectoryï¼Œå¯ä»¥é€šè¿‡ç³»ç»Ÿæ£€æµ‹å¹¶æ¸…é™¤ getApplicationDocumentsDirectory ç¼“å­˜ç›®å½•ï¼Œåœ¨ Android ä¸­å¯¹åº”ä¸º AppData æ–‡ä»¶å¤¹ï¼Œåœ¨ iOS ä¸­å¯¹åº”ä¸º NSDocumentsDirectoryï¼Œåªæœ‰å½“ App è¢«åˆ é™¤æ‰èƒ½è¢«åˆ é™¤ getExternalStorageDirectory å¤–éƒ¨å­˜å‚¨ç›®å½•ï¼Œåªæœ‰åœ¨ Android ä¸­æœ‰æ•ˆï¼Œåœ¨ iOS è°ƒç”¨ä¼šæŠ›å‡º UnsupportedError å¼‚å¸¸ï¼Œä¸è¿‡ Android åœ¨å†™å…¥å‰è®°å¾—å…ˆç”³è¯·æƒé™å“Ÿï¼Œå¦åˆ™ä¹Ÿæ˜¯ä¸è¡Œæ»´ã€‚ è¯»å†™æ–‡ä»¶æ“ä½œéœ€è¦é€šè¿‡ Dart çš„ IO æ“ä½œå®Œæˆï¼Œè¿™è¾¹å°ä¼™ä¼´ä»¬å¯ä»¥è‡ªå·±çœ‹æ–‡æ¡£ File classï¼ŒæŽ¥ç€æˆ‘ä»¬å°±ç›´æŽ¥é€šè¿‡ä¾‹å­æ¥çœ‹æ–‡ä»¶å®žçŽ°æ•°æ®æŒä¹…åŒ–ã€‚å…ˆçœ‹ä¸‹æ•ˆæžœå§ï¼Œæœ€ç»ˆé‡å¯ App åŽï¼Œæ•°æ®ä¹Ÿèƒ½æ­£å¸¸è¯»å–æ˜¾ç¤ºï¼Œè¯´æ˜Žæ•°æ®è¢«ä¿å­˜ä¸‹æ¥äº† çœ‹ä¸‹å®žçŽ°çš„ä»£ç ï¼Œå› ä¸ºä¼šæ¶‰åŠåˆ°å¤šç§æ–¹å¼ï¼Œæ‰€ä»¥è¿™è¾¹æˆ‘æŠŠè§†å›¾æŠ½å–å‡ºæ¥å®žçŽ° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869Widget _fileIoPart() &#123; return Card( margin: const EdgeInsets.all(8.0), shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(8.0))), child: Column(children: &lt;Widget&gt;[ Padding( padding: const EdgeInsets.all(12.0), child: Text('File IO', style: TextStyle(fontSize: 20.0, color: Theme.of(context).primaryColor)), ), // RadioList æ˜¯å•é€‰æŒ‰é’®éƒ¨ä»¶ï¼Œé€šè¿‡é€‰æ‹©ä¸åŒçš„æƒ…å†µï¼Œåˆ›å»ºä¸åŒç›®å½•çš„æ–‡ä»¶ RadioListTile( value: _radioText[0], title: Text(_radioText[0]), subtitle: Text(_radioDescriptions[0]), groupValue: _currentValue, onChanged: ((value) &#123; setState(() =&gt; _currentValue = value); &#125;)), RadioListTile( value: _radioText[1], title: Text(_radioText[1]), subtitle: Text(_radioDescriptions[1]), groupValue: _currentValue, onChanged: ((value) &#123; setState(() =&gt; _currentValue = value); &#125;)), RadioListTile( value: _radioText[2], title: Text(_radioText[2]), subtitle: Text(_radioDescriptions[2]), groupValue: _currentValue, onChanged: ((value) &#123; setState(() =&gt; _currentValue = value); &#125;)), Padding( padding: const EdgeInsets.all(12.0), // ç”¨äºŽå†™å…¥æ–‡æœ¬ä¿¡æ¯ child: TextField( controller: _editController, decoration: InputDecoration(labelText: 'è¾“å…¥å­˜å‚¨çš„æ–‡æœ¬å†…å®¹', icon: Icon(Icons.text_fields)), ), ), Container( margin: const EdgeInsets.symmetric(horizontal: 12.0), width: MediaQuery.of(context).size.width, child: RaisedButton( onPressed: _writeTextIntoFile, child: Text('å†™å…¥æ–‡ä»¶ä¿¡æ¯'), ), ), Padding( padding: const EdgeInsets.all(12.0), child: Row( crossAxisAlignment: CrossAxisAlignment.start, mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[Text('æ–‡ä»¶å†…å®¹ï¼š'), Expanded(child: Text(_fileContent, softWrap: true))], ), ), Container( margin: const EdgeInsets.symmetric(horizontal: 12.0), width: MediaQuery.of(context).size.width, child: RaisedButton( onPressed: _readTextFromFile, child: Text('è¯»å–æ–‡ä»¶ä¿¡æ¯'), ), ), ]), ); &#125; å…³é”®çš„éƒ¨åˆ†åœ¨äºŽ _writeTextIntoFile å’Œ _readTextFromFile ä¸¤ä¸ªæ–¹æ³•çš„å®žçŽ°ã€‚çœ‹ä¸‹å®žçŽ°çš„ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041// å¦‚æžœå†™å…¥å¤–éƒ¨å†…å­˜éœ€è¦è¯»å†™æƒé™ï¼Œè¿™è¾¹ä½¿ç”¨äº†ç¬¬ä¸‰æ–¹æ’ä»¶ `permission_handler` void _writeTextIntoFile() async &#123; if (_currentValue == _radioText[2]) &#123; PermissionStatus status = await PermissionHandler().checkPermissionStatus(PermissionGroup.storage); if (status == PermissionStatus.granted) // å¦‚æžœæ˜¯å†™å…¥å¤–éƒ¨å­˜å‚¨ï¼Œåˆ™æ£€æµ‹æƒé™çŠ¶æ€ï¼ŒåŒæ„åˆ™å†™å…¥ _writeContent(); else if (status == PermissionStatus.disabled) // æ‹’ç»äº†æç¤ºæ‰‹åŠ¨æ‰“å¼€ Fluttertoast.showToast(msg: 'æœªæ‰“å¼€ç›¸å…³æƒé™'); else // æœªåŒæ„åˆ™ä¸»åŠ¨ç”³è¯·æƒé™ PermissionHandler().requestPermissions([PermissionGroup.storage]); &#125; else // ä¸æ˜¯å†™å…¥å¤–éƒ¨å­˜å‚¨ç›´æŽ¥å†™å…¥æ–‡ä»¶ _writeContent(); &#125;// æ–‡æœ¬å†™å…¥æ–‡ä»¶ void _writeContent() async &#123; // å†™å…¥æ–‡æœ¬æ“ä½œ var text = _editController.value.text; // èŽ·å–æ–‡æœ¬æ¡†çš„å†…å®¹ File file = File(await _getFilePath()); // èŽ·å–ç›¸åº”çš„æ–‡ä»¶ if (text == null || text.isEmpty) &#123; Fluttertoast.showToast(msg: 'è¯·è¾“å…¥å†…å®¹'); // å†…å®¹ä¸ºç©ºï¼Œåˆ™ä¸å†™å…¥å¹¶æé†’ &#125; else &#123; // å†…å®¹ä¸ç©ºï¼Œåˆ™åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå­˜åœ¨å…ˆåˆ é™¤ï¼Œé‡æ–°åˆ›å»ºåŽå†™å…¥ä¿¡æ¯ if (await file.exists()) file.deleteSync(); file.createSync(); // createSync æ˜¯ä¸€ä¸ªåŒæ­¥çš„åˆ›å»ºè¿‡ç¨‹ file.writeAsStringSync(text); // writeAsStringSync æ˜¯åŒæ­¥å†™å…¥çš„è¿‡ç¨‹ _editController.clear(); // å†™å…¥æ–‡ä»¶åŽæ¸…ç©ºè¾“å…¥æ¡†ä¿¡æ¯ &#125; &#125; // è¯»å–æ–‡æœ¬æ“ä½œ void _readTextFromFile() async &#123; File file = File(await _getFilePath()); if (await file.exists()) &#123; setState(() =&gt; _fileContent = file.readAsStringSync()); // æ–‡ä»¶å­˜åœ¨åˆ™ç›´æŽ¥æ˜¾ç¤ºæ–‡æœ¬ä¿¡æ¯ &#125; else &#123; setState(() =&gt; _fileContent = ''); // æ–‡ä»¶ä¸å­˜åœ¨åˆ™æ¸…ç©ºæ˜¾ç¤ºæ–‡æœ¬ä¿¡æ¯ï¼Œå¹¶æç¤º Fluttertoast.showToast(msg: 'æ–‡ä»¶è¿˜æœªåˆ›å»ºï¼Œè¯·å…ˆé€šè¿‡å†™å…¥ä¿¡æ¯æ¥åˆ›å»ºæ–‡ä»¶'); &#125; &#125; å› ä¸ºå¤–éƒ¨å­˜å‚¨çš„æ–‡ä»¶éœ€è¦æ¶‰åŠåˆ°æƒé™é—®é¢˜ï¼Œè€Œä¸” iOS ä¹Ÿä¸æ”¯æŒï¼Œæ‰€ä»¥å¦‚æžœéœ€è¦ä½¿ç”¨æ–‡ä»¶æ¥æŒä¹…åŒ–æ•°æ®çš„è¯ï¼Œå°½é‡ä½¿ç”¨å¦å¤–ä¸¤ç§ã€‚å› ä¸ºåœ¨ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¿å­˜çš„æ•°æ®ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥è¿™è¾¹å°±ä¸å¾—ä¸è¯´å¦å¤–ä¸€ç§æ›´æ–¹ä¾¿çš„æŒä¹…åŒ–æ–¹å¼äº† shared_preferences SharedPreferenceså†™ Android çš„å°ä¼™ä¼´å¯¹è¿™ä¸ªåº”è¯¥ä¸é™Œç”Ÿäº†ï¼Œä½†æ˜¯ Flutter å¹¶æ²¡æœ‰è‡ªå¸¦çš„ shared_preferences åŠŸèƒ½ï¼Œéœ€è¦ç¬¬ä¸‰æ–¹æ’ä»¶æ¥å®žçŽ°ï¼Œå¼•å…¥ shared_preferences æ’ä»¶ï¼Œå†™æ–‡ç« çš„æ—¶å€™æœ€æ–°ç‰ˆæœ¬æ˜¯ ^0.5.1+2ï¼Œè¿˜æ˜¯å…ˆçœ‹ä¸‹æœ€åŽçš„æ•ˆæžœ ä»£ç çš„å®žçŽ°ç›¸å¯¹æ¯”è¾ƒç®€å• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354Widget _sharedPart() &#123; return Card( margin: const EdgeInsets.all(8.0), shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(8.0))), child: Column( children: &lt;Widget&gt;[ Padding( padding: const EdgeInsets.all(12.0), child: Text('Shared Preferences', style: TextStyle(fontSize: 20.0, color: Theme.of(context).primaryColor)), ), Padding( padding: const EdgeInsets.fromLTRB(12.0, 0, 12.0, 12.0), // ç”¨äºŽè®¾ç½® key ä¿¡æ¯ child: TextField( controller: _shareKeyController, decoration: InputDecoration(labelText: 'è¾“å…¥ share å­˜å‚¨çš„ key', icon: Icon(Icons.lock_outline)), ), ), Padding( padding: const EdgeInsets.fromLTRB(12.0, 0, 12.0, 12.0), // ç”¨äºŽå†™å…¥æ–‡æœ¬ä¿¡æ¯ child: TextField( controller: _shareValueController, decoration: InputDecoration(labelText: 'è¾“å…¥ share å­˜å‚¨çš„ value', icon: Icon(Icons.text_fields)), ), ), Container( margin: const EdgeInsets.symmetric(horizontal: 12.0), width: MediaQuery.of(context).size.width, child: RaisedButton( onPressed: _writeIntoShare, child: Text('å†™å…¥ share'), ), ), Padding( padding: const EdgeInsets.all(12.0), child: Row( crossAxisAlignment: CrossAxisAlignment.start, mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[Text('share å­˜å‚¨å†…å®¹ï¼š'), Expanded(child: Text(_shareContent, softWrap: true))], ), ), Container( margin: const EdgeInsets.symmetric(horizontal: 12.0), width: MediaQuery.of(context).size.width, child: RaisedButton( onPressed: _readFromShare, child: Text('è¯»å– share'), ), ), ], )); &#125; å®žçŽ°çš„å…³é”®éƒ¨åˆ†å°±æ˜¯æ–¹æ³• _writeIntoShare å’Œ _readFromShare 12345678910111213141516171819202122232425262728293031323334void _writeIntoShare() async &#123; var shareKey = _shareKeyController.value.text; var shareContent = _shareValueController.value.text; if (shareKey == null || shareKey.isEmpty) &#123; Fluttertoast.showToast(msg: 'è¯·è¾“å…¥ key'); &#125; else if (shareContent == null || shareContent.isEmpty) &#123; Fluttertoast.showToast(msg: 'è¯·è¾“å…¥ä¿å­˜çš„å†…å®¹'); &#125; else &#123; // é€šè¿‡ `getInstance` èŽ·å– `shared_preferences` å•ä¾‹ var sp = await SharedPreferences.getInstance(); // sp èƒ½ä¿å­˜çš„æ•°æ®ç±»åž‹åŒ…æ‹¬ `int`, `String`, `bool`, `double`, `StringList` sp.setString(shareKey, shareContent); &#125; &#125; void _readFromShare() async &#123; var shareKey = _shareKeyController.value.text; if (shareKey == null || shareKey.isEmpty) &#123; Fluttertoast.showToast(msg: 'è¯·è¾“å…¥ key'); &#125; else &#123; var sp = await SharedPreferences.getInstance(); // æ•°æ®è¯»å–çš„ç±»åž‹åŒå†™å…¥ç±»åž‹ï¼Œå¦‚æžœä¼ å…¥çš„ key ä¸å­˜åœ¨åˆ™è¿”å›ž null var value = sp.getString(shareKey); if (value == null) &#123; Fluttertoast.showToast(msg: 'æœªæ‰¾åˆ°è¯¥ key'); setState(() =&gt; _shareContent = ''); &#125; else &#123; setState(() =&gt; _shareContent = value); &#125; &#125; &#125; è¿™ä¸¤ç§æ•°æ®æŒä¹…åŒ–çš„æ–¹å¼ä¸»è¦ç”¨äºŽå­˜å‚¨ç›¸å¯¹ç®€å•ï¼Œå…³ç³»ä¸å¤æ‚çš„æ•°æ®ï¼Œå¦‚æžœæ¶‰åŠåˆ°å¤§é‡çš„ï¼Œä¸”å­—æ®µä¹‹é—´æœ‰å…³ç³»çš„æƒ…å†µå°±éœ€è¦é€šè¿‡æ•°æ®åº“æ¥å®žçŽ°äº†ï¼ŒAndroid å’Œ iOS éƒ½è‡ªå¸¦ sqlite æ•°æ®åº“ã€‚ ä»¥ä¸Šä»£ç æŸ¥çœ‹ data_persistence_main.dart æ–‡ä»¶ SqfliteFlutter å®žçŽ°æ•°æ®åº“å­˜å‚¨éœ€è¦é€šè¿‡æ’ä»¶ sqflite æ¥å®žçŽ°ï¼Œå†™æ–‡ç« çš„æ—¶å€™æœ€æ–°çš„ç‰ˆæœ¬æ˜¯ sqflite 1.1.3ï¼Œä½†æ˜¯è¯¥ç‰ˆæœ¬éœ€è¦ flutter 1.2 ä»¥ä¸Šæ‰è¡Œï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©çš„æ˜¯ sqflite 1.1.0ï¼Œå°ä¼™ä¼´å¯ä»¥æ ¹æ®è‡ªå·±çš„ flutter ç‰ˆæœ¬é€‰æ‹©ç›¸åº”çš„ sqflite ç‰ˆæœ¬ sqflite çš„åŸºæœ¬æ“ä½œè¯­å¥ï¼Œåœ¨æ–‡æ¡£ä¸­å·²ç»å†™å¾—éžå¸¸æ˜Žç™½äº†ï¼Œæ‰€ä»¥å°±ä¸æ¬è¿äº†ï¼Œè¿™è¾¹ç›´æŽ¥è®²ä¸‹å¯¹äºŽæ•°æ®åº“çš„ä¸€äº›å°è£…å¤„ç†å§ï¼Œå› ä¸ºæ‰“å¼€æ•°æ®åº“æ˜¯ä¸€ä¸ªå¾ˆæ¶ˆè€—èµ„æºçš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œæ‰€ä»¥å‘¢ï¼ŒæŽ¨èå®žçŽ°å•ä¾‹ä¼šæ¯”è¾ƒå¥½ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦å®žçŽ°ä¸€ä¸ª student å­˜å‚¨è¡¨ 12345678910111213141516171819202122232425262728293031323334353637class DatabaseUtils &#123; final String _tableStudent = 'student'; static Database _database; // åˆ›å»ºå•ä¾‹ï¼Œé˜²æ­¢é‡å¤æ‰“å¼€æ¶ˆè€—å†…å­˜ static DatabaseUtils _instance; static DatabaseUtils get instance =&gt; _instance; DatabaseUtils._internal() &#123; getDatabasesPath().then((path) async &#123; _database = await openDatabase(join(path, 'demo.db'), version: 2, onCreate: (db, version) &#123; // åˆ›å»ºæ•°æ®åº“çš„æ—¶å€™åœ¨è¿™è¾¹è°ƒç”¨ db.execute('create table $_tableStudent ' 'id integer primary key autoincrement,' 'name text not null,' 'age integer not null default 0,' 'gender integer not null default 0'); // æ›´æ–°å‡çº§å¢žåŠ çš„å­—æ®µ db.execute('alter table $_tableStudent add column birthday text'); &#125;, onUpgrade: (db, oldVersion, newVersion) &#123; // æ›´æ–°å‡çº§æ•°æ®åº“çš„æ—¶å€™åœ¨è¿™æ“ä½œ if (oldVersion == 1) db.execute('alter table $_tableStudent add column birthday text'); &#125;, onOpen: (db) &#123; // æ‰“å¼€æ•°æ®åº“æ—¶å€™çš„å›žè°ƒ print('$&#123;db.path&#125;'); &#125;); &#125;); &#125; factory DatabaseUtils() &#123; // å¦‚æžœå½“å‰çš„å•ä¾‹å·²ç»å­˜åœ¨ï¼Œåˆ™ä¸å†åˆ›å»ºï¼Œå¦åˆ™é‡æ–°åˆ›å»ºï¼Œfactory å…³é”®è¯çœ‹ç¬¬ä¸€ç«  if (_instance == null) _instance = DatabaseUtils._internal(); return _instance; &#125;&#125; é‚£ä¹ˆå¯¹æ•°æ®åº“çš„æ“ä½œå°±å®Œå…¨è€ƒéªŒä½ çš„ SQL çš„æŽŒæ¡ç¨‹åº¦äº†ï¼Œä½†æ˜¯åƒä¸‡è®°ä½ï¼Œsqlite ä¸­çš„ç±»åž‹åªæœ‰ï¼Œæ•´åž‹ integer ï¼Œå­—ç¬¦ç±»åž‹ textï¼Œæµ®ç‚¹ç±»åž‹ realï¼ŒäºŒè¿›åˆ¶ blobã€‚æ•°æ®åº“çš„å…·ä½“ä¾‹å­ä¼šç­‰åˆ°æœ€åŽçš„å®žé™…é¡¹ç›®ä¸­å±•ç¤ºï¼ŒåŽŸè°…æˆ‘ä¸æ‡‚å¦‚ä½•å±•ç¤ºä¸€ä¸ªç•Œé¢ç»™ä½ æ“ä½œï¼Œå®žçŽ°æ•°æ®åº“çš„å„ç§åŠŸèƒ½ã€‚ è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ db_util.dart æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸€äº›åŸºæœ¬çš„æ“ä½œå†™æ³•ï¼Œå°ä¼™ä¼´å¯è‡ªè¡ŒæŸ¥çœ‹ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(åä¸€)ä¹‹çŠ¶æ€ç®¡ç†ï¼ŒBLoC]]></title>
    <url>%2Fposts%2Fd121323a.html</url>
    <content type="text"><![CDATA[Streamåœ¨ dart éƒ¨åˆ†è®°å¾—åˆ†äº«è¿‡ Stream çš„æ–‡ç« é“¾æŽ¥ï¼Œä½†æ˜¯æˆ‘çŸ¥é“ä½ ä»¬è‚¯å®šæ²¡å‡ ä¸ªæ„¿æ„çœ‹çš„ï¼Œæ‰€ä»¥è¿™é‡Œå†æä¸‹ã€‚è¿˜æ˜¯å¾—ä»Žæºç å¼€å§‹â€¦å› ä¸ºæºç çš„æ³¨é‡Šæ¯”è¾ƒé•¿ï¼Œå°±ä¸è´´æ³¨é‡Šäº†ï¼Œå¯ä»¥è‡ªå·±çœ‹ï¼Œæˆ‘è¿™è¾¹å°±æå–ä¸€äº›å…³é”®ä¿¡æ¯ã€‚ Stream æ˜¯ Dart æä¾›çš„ä¸€ç§æ•°æ®æµè®¢é˜…ç®¡ç†çš„â€å·¥å…·â€ï¼Œæ„Ÿè§‰æœ‰ç‚¹åƒ Android ä¸­çš„ EventBus æˆ–è€… RxBusï¼ŒStream å¯ä»¥æŽ¥æ”¶ä»»ä½•å¯¹è±¡ï¼ŒåŒ…æ‹¬æ˜¯å¦å¤–ä¸€ä¸ª Streamï¼ŒæŽ¥æ”¶çš„å¯¹è±¡é€šè¿‡ StreamController çš„ sink è¿›è¡Œæ·»åŠ ï¼Œç„¶åŽé€šè¿‡ StreamController å‘é€ç»™ Streamï¼Œé€šè¿‡ listen è¿›è¡Œç›‘å¬ï¼Œlisten ä¼šè¿”å›žä¸€ä¸ª StreamSubscription å¯¹è±¡ï¼ŒStreamSubscription å¯ä»¥æ“ä½œå¯¹æ•°æ®æµçš„ç›‘å¬ï¼Œä¾‹å¦‚ pauseï¼Œresumeï¼Œcancel ç­‰ã€‚ Stream åˆ†ä¸¤ç§ç±»åž‹ï¼š Single-subscription Streamï¼šå•è®¢é˜… streamï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªå…è®¸æœ‰ä¸€ä¸ªç›‘å¬ï¼Œå¦‚æžœè¯¥ç›‘å¬ cancel äº†ï¼Œä¹Ÿä¸èƒ½å†æ·»åŠ å¦ä¸€ä¸ªç›‘å¬ï¼Œè€Œä¸”åªæœ‰å½“æœ‰ç›‘å¬äº†ï¼Œæ‰ä¼šå‘é€æ•°æ®ï¼Œä¸»è¦ç”¨äºŽæ–‡ä»¶ IO æµçš„è¯»å–ç­‰ã€‚ Broadcast Streamï¼šå¹¿æ’­è®¢é˜… streamï¼Œå…è®¸æœ‰å¤šä¸ªç›‘å¬ï¼Œå½“æ·»åŠ äº†ç›‘å¬åŽï¼Œå¦‚æžœæµä¸­æœ‰æ•°æ®å­˜åœ¨å°±å¯ä»¥ç›‘å¬åˆ°æ•°æ®ï¼Œè¿™ç§ç±»åž‹ï¼Œä¸ç®¡æ˜¯å¦æœ‰ç›‘å¬ï¼Œåªè¦æœ‰æ•°æ®å°±ä¼šå‘é€ï¼Œç”¨äºŽéœ€è¦å¤šä¸ªç›‘å¬çš„æƒ…å†µã€‚ è¿˜æ˜¯çœ‹ä¸‹ä¾‹å­ä¼šæ¯”è¾ƒç›´è§‚ 1234567891011121314151617181920212223242526272829303132333435363738class _StreamHomeState extends State&lt;StreamHome&gt; &#123; StreamController _controller = StreamController(); // åˆ›å»ºå•è®¢é˜…ç±»åž‹ `StreamController` Sink _sink; StreamSubscription _subscription; @override void initState() &#123; super.initState(); _sink = _controller.sink; // _sink ç”¨äºŽæ·»åŠ æ•°æ® // _controller.stream ä¼šè¿”å›žä¸€ä¸ªå•è®¢é˜… streamï¼Œ // é€šè¿‡ listen è¿”å›ž StreamSubscriptionï¼Œç”¨äºŽæ“ä½œæµçš„ç›‘å¬æ“ä½œ _subscription = _controller.stream.listen((data) =&gt; print('Listener: $data')); // æ·»åŠ æ•°æ®ï¼Œstream ä¼šé€šè¿‡ `listen` æ–¹æ³•æ‰“å° _sink.add('A'); _sink.add(11); _sink.add(11.16); _sink.add([1, 2, 3]); _sink.add(&#123;'a': 1, 'b': 2&#125;); &#125; @override void dispose() &#123; super.dispose(); // æœ€åŽè¦é‡Šæ”¾èµ„æº... _sink.close(); _controller.close(); _subscription.cancel(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( body: Container(), ); &#125;&#125; çœ‹ä¸‹æŽ§åˆ¶å°çš„è¾“å‡ºï¼š æžœç„¶æŠŠæ‰€æœ‰çš„æ•°æ®éƒ½æ‰“å°å‡ºæ¥äº†ï¼Œå‰é¢æœ‰è¯´è¿‡ï¼Œå•è®¢é˜…çš„ stream åªæœ‰å½“ listen åŽæ‰ä¼šå‘é€æ•°æ®ï¼Œä¸è¯•è¯•æˆ‘è¿˜æ˜¯ä¸ç›¸ä¿¡çš„ï¼Œæˆ‘ä»¬æŠŠ _sink.add æ”¾åˆ° listen å‰é¢åŽ»æ‰§è¡Œï¼Œå†çœ‹æŽ§åˆ¶å°çš„æ‰“å°ç»“æžœã€‚å±…ç„¶çœŸçš„æ˜¯ä¸€æ ·çš„ï¼ŒGoogle ç²‘ç²‘æžœç„¶è¯šä¸æ¬ºæˆ‘ã€‚æŽ¥ç€è¯•ä¸‹ pauseï¼Œresume æ–¹æ³•ï¼Œçœ‹ä¸‹æ•°æ®å¦‚ä½•ç›‘å¬ï¼Œä¿®æ”¹ä»£ç  123456789_sink = _controller.sink;_subscription = _controller.stream.listen((data) =&gt; print('Listener: $data'));_sink.add('A');_subscription.pause(); // æš‚åœç›‘å¬_sink.add(11);_sink.add(11.16);_subscription.resume(); // æ¢å¤ç›‘å¬_sink.add([1, 2, 3]);_sink.add(&#123;'a': 1, 'b': 2&#125;); å†çœ‹æŽ§åˆ¶å°çš„æ‰“å°ï¼Œä½ ä»¬å¯ä»¥å…ˆçŒœä¸‹æ˜¯ä»€ä¹ˆç»“æžœï¼Œæˆ‘çŒœå¤§éƒ¨åˆ†äººéƒ½ä¼šè§‰å¾—åº”è¯¥æ˜¯ä¸ä¼šæœ‰ 11 å’Œ 11.16 æ‰“å°å‡ºæ¥äº†ã€‚ç„¶é¹…äº‹å®žå¹¶éžè¿™æ ·ï¼Œæ‰“å°çš„ç»“æžœå¹¶æœªå‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨ pause æ–¹æ³•åŽï¼Œstream è¢«å µä½äº†ï¼Œæ•°æ®ä¸ç»§ç»­å‘é€äº†ã€‚ æŽ¥ä¸‹æ¥çœ‹ä¸‹å¹¿æ’­è®¢é˜… streamï¼Œå¯¹ä»£ç åšä¸‹ä¿®æ”¹ 1234567891011121314151617181920212223StreamController _controller = StreamController.broadcast(); Sink _sink; StreamSubscription _subscription; @override void initState() &#123; super.initState(); _sink = _controller.sink; _sink.add('A'); _subscription = _controller.stream.listen((data) =&gt; print('Listener: $data')); _sink.add(11); _subscription.pause(); _sink.add(11.16); _subscription.resume(); _sink.add([1, 2, 3]); _sink.add(&#123;'a': 1, 'b': 2&#125;); &#125;// ...&#125; æˆ‘ä»¬å†çœ‹ä¸‹æŽ§åˆ¶å°çš„æ‰“å°ï¼š ä½ çŒœå¯¹ç­”æ¡ˆäº†å—ï¼Œè¿™è¾¹åšä¸‹å°æ€»ç»“ï¼š å•è®¢é˜… Stream åªæœ‰å½“å­˜åœ¨ç›‘å¬çš„æ—¶å€™ï¼Œæ‰å‘é€æ•°æ®ï¼Œå¹¿æ’­è®¢é˜… Stream åˆ™ä¸è€ƒè™‘è¿™ç‚¹ï¼Œæœ‰æ•°æ®å°±å‘é€ï¼›å½“ç›‘å¬è°ƒç”¨ pause ä»¥åŽï¼Œä¸ç®¡å“ªç§ç±»åž‹çš„ stream éƒ½ä¼šåœæ­¢å‘é€æ•°æ®ï¼Œå½“ resume ä¹‹åŽï¼ŒæŠŠå‰é¢å­˜ç€çš„æ•°æ®éƒ½å‘é€å‡ºåŽ»ã€‚ sink å¯ä»¥æŽ¥å—ä»»ä½•ç±»åž‹çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ³›åž‹å¯¹ä¼ å…¥çš„æ•°æ®è¿›è¡Œé™åˆ¶ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯¹ StreamController è¿›è¡Œç±»åž‹æŒ‡å®š StreamController&lt;int&gt; _controller = StreamController.broadcast(); å› ä¸ºæ²¡æœ‰å¯¹ Sink çš„ç±»åž‹è¿›è¡Œé™åˆ¶ï¼Œè¿˜æ˜¯å¯ä»¥æ·»åŠ é™¤äº† int å¤–çš„ç±»åž‹å‚æ•°ï¼Œä½†æ˜¯è¿è¡Œçš„æ—¶å€™å°±ä¼šæŠ¥é”™ï¼Œ_controller å¯¹ä½ ä¼ å…¥çš„å‚æ•°åšäº†ç±»åž‹åˆ¤å®šï¼Œæ‹’ç»è¿›å…¥ã€‚ Stream ä¸­è¿˜æä¾›äº†å¾ˆå¤š StremTransformerï¼Œç”¨äºŽå¯¹ç›‘å¬åˆ°çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚æˆ‘ä»¬å‘é€ 0~19 çš„ 20 ä¸ªæ•°æ®ï¼ŒåªæŽ¥å—å¤§äºŽ 10 çš„å‰ 5 ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå¯ä»¥å¯¹ stream å¦‚ä¸‹æ“ä½œ 123456_subscription = _controller.stream .where((value) =&gt; value &gt; 10) .take(5) .listen((data) =&gt; print('Listen: $data'));List.generate(20, (index) =&gt; _sink.add(index)); é‚£ä¹ˆæ‰“å°å‡ºæ¥çš„æ•°æ®å¦‚ä¸‹å›¾ é™¤äº† whereï¼Œtake è¿˜æœ‰å¾ˆå¤š Transformerï¼Œ ä¾‹å¦‚ mapï¼Œskip ç­‰ç­‰ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚äº†è§£äº† Stream çš„åŸºæœ¬å±žæ€§åŽï¼Œå°±å¯ä»¥ç»§ç»­å¾€ä¸‹äº†~ StreamBuilderå‰é¢æåˆ°äº† stream é€šè¿‡ listen è¿›è¡Œç›‘å¬æ•°æ®çš„å˜åŒ–ï¼ŒFlutter å°±ä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¹ˆä¸ªéƒ¨ä»¶ StreamBuilder ä¸“é—¨ç”¨äºŽç›‘å¬ stream çš„å˜åŒ–ï¼Œç„¶åŽè‡ªåŠ¨åˆ·æ–°é‡å»ºã€‚æŽ¥ç€æ¥çœ‹ä¸‹æºç  12345678910const StreamBuilder(&#123; Key key, this.initialData, // åˆå§‹æ•°æ®ï¼Œä¸ä¼ å…¥åˆ™ä¸º null Stream&lt;T&gt; stream, @required this.builder &#125;) : assert(builder != null), super(key: key, stream: stream);@overrideAsyncSnapshot&lt;T&gt; initial() =&gt; AsyncSnapshot&lt;T&gt;.withData(ConnectionState.none, initialData); StreamBuilder å¿…é¡»ä¼ å…¥ä¸€ä¸ª AsyncWidgetBuilder å‚æ•°ï¼Œåˆå§‹å€¼ initialData å¯ä¸ºç©ºï¼Œ stream ç”¨äºŽç›‘å¬æ•°æ®å˜åŒ–ï¼Œinitial æ–¹æ³•çš„è°ƒç”¨åœ¨å…¶çˆ¶ç±» StremBuilderBase ä¸­ï¼ŒæŽ¥ç€çœ‹ä¸‹ StreamBuilderBaseState çš„æºç ï¼Œè¿™é‡Œæˆ‘åˆ é™¤ä¸€äº›ä¸å¿…è¦çš„æºç ï¼Œæ–¹ä¾¿æŸ¥çœ‹ï¼Œå®Œæ•´çš„æºç å¯è‡ªè¡ŒæŸ¥çœ‹ 123456789101112131415161718192021222324252627282930313233343536class _StreamBuilderBaseState&lt;T, S&gt; extends State&lt;StreamBuilderBase&lt;T, S&gt;&gt; &#123; // ... @override void initState() &#123; super.initState(); _summary = widget.initial(); // é€šè¿‡ä¼ å…¥çš„åˆå§‹å€¼ç”Ÿæˆé»˜è®¤å€¼ï¼Œå¦‚æžœæ²¡æœ‰ä¼ å…¥åˆ™ä¼šæ˜¯ null _subscribe(); // æ³¨å†Œä¼ å…¥çš„ streamï¼Œç”¨äºŽç›‘å¬å˜åŒ– &#125; // _summary ä¸ºç›‘å¬åˆ°çš„æ•°æ® @override Widget build(BuildContext context) =&gt; widget.build(context, _summary); // ... void _subscribe() &#123; if (widget.stream != null) &#123; // stream é€šè¿‡å¤–éƒ¨ä¼ å…¥ï¼Œå¯¹æ•°æ®çš„å˜åŒ–è¿›è¡Œç›‘å¬ï¼Œ // åœ¨ä¸åŒå›žè°ƒä¸­ï¼Œé€šè¿‡ setState è¿›è¡Œæ›´æ–° _summary // å½“ _summary æ›´æ–°åŽï¼Œç”±äºŽè°ƒç”¨äº† setStateï¼Œé‡æ–°è°ƒç”¨ build æ–¹æ³•ï¼Œå°†æœ€æ–°çš„ _summary ä¼ é€’å‡ºåŽ» _subscription = widget.stream.listen((T data) &#123; setState(() &#123; _summary = widget.afterData(_summary, data); &#125;); &#125;, onError: (Object error) &#123; setState(() &#123; _summary = widget.afterError(_summary, error); &#125;); &#125;, onDone: () &#123; setState(() &#123; _summary = widget.afterDone(_summary); &#125;); &#125;); _summary = widget.afterConnected(_summary); // &#125; &#125;&#125; åœ¨ä¹‹å‰æ›´æ–°æ•°æ®éƒ½éœ€è¦é€šè¿‡ setState è¿›è¡Œæ›´æ–°ï¼Œè¿™é‡Œäº†è§£å®Œäº† streamï¼Œæˆ‘ä»¬å°±ä¸ä½¿ç”¨ setState æ›´æ–°ï¼Œä½¿ç”¨ Stream æ¥æ›´æ–° 1234567891011121314151617181920212223242526272829303132333435363738394041class _StreamHomeState extends State&lt;StreamHome&gt; &#123; // å®šä¹‰ä¸€ä¸ªå…¨å±€çš„ `StreamController` StreamController&lt;int&gt; _controller = StreamController.broadcast(); // `sink` ç”¨äºŽä¼ å…¥æ–°çš„æ•°æ® Sink&lt;int&gt; _sink; int _counter = 0; @override void initState() &#123; super.initState(); _sink = _controller.sink; &#125; @override void dispose() &#123; super.dispose(); // éœ€è¦é”€æ¯èµ„æº _sink.close(); _controller.close(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( body: SafeArea( child: Container( alignment: Alignment.center, child: StreamBuilder( builder: (_, snapshot) =&gt; Text('$&#123;snapshot.data&#125;', style: TextStyle(fontSize: 24.0)), stream: _controller.stream, // stream åœ¨ StreamBuilder é”€æ¯çš„æ—¶å€™ä¼šè‡ªåŠ¨é”€æ¯ initialData: _counter, ), )), // é€šè¿‡ `sink` ä¼ å…¥æ–°çš„æ•°æ®ï¼ŒåŽ»é€šçŸ¥ `stream` æ›´æ–°åˆ° builder ä¸­ floatingActionButton: FloatingActionButton( onPressed: () =&gt; _sink.add(_counter++), child: Icon(Icons.add), ), ); &#125;&#125; é‚£ä¹ˆå½“ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼Œå°±ä¼šåˆ·æ–°ç•Œé¢ä¸Šçš„å€¼ï¼Œé€šè¿‡ä¸Šé¢çš„æºç åˆ†æžï¼ŒStreamBuilder ä¹Ÿæ˜¯é€šè¿‡ setState æ–¹æ³•è¿›è¡Œåˆ·æ–°ï¼Œé‚£ä¹ˆä¸¤ç§æ–¹æ³•å­°ä¼˜å­°åŠ£å‘¢ï¼Œå½“ç„¶æ˜¯é€šè¿‡ Stream å•¦ï¼Œè¿™ä¸æ˜¯åºŸè¯å—ã€‚å› ä¸ºé€šè¿‡è°ƒç”¨ setState åˆ·æ–°çš„è¯ï¼Œä¼šæŠŠæ•´ä¸ªç•Œé¢éƒ½è¿›è¡Œé‡æž„ï¼Œä½†æ˜¯é€šè¿‡ StreamBuilder çš„è¯ï¼Œåªåˆ·æ–°å…¶ builderï¼Œè¿™æ ·æ•ˆçŽ‡å°±æ›´é«˜äº†ï¼Œæœ€åŽçœ‹å°æ•ˆæžœå§ï¼Œæ‰€è°“æœ‰å›¾æœ‰çœŸç›¸å˜› è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬æ‘’å¼ƒäº† setState æ–¹æ³•ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬è¯•è¯•æŠŠ StatefulWidget æ›¿æ¢æˆ StatelessWidget å§ï¼Œè€Œä¸”å®˜æ–¹ä¹ŸæŽ¨èä½¿ç”¨ StatelessWidget æ›¿æ¢ StatefulWidgetï¼Œè¿™é‡Œå°±éœ€è¦æä¸‹ BLoC æ¨¡å¼äº†ã€‚ BLoCè¯´å®žè¯ï¼ŒçŽ°åœ¨ Google ä¸‹ ã€Œflutter blocã€èƒ½æœåˆ°å¾ˆå¤šæ–‡ç« ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡ InheritedWidget æ¥å®žçŽ°çš„ï¼Œä¾‹å¦‚è¿™ç¯‡Flutter | çŠ¶æ€ç®¡ç†æŽ¢ç´¢ç¯‡â€”â€”BLoC(ä¸‰)ï¼Œä½†æ˜¯ InheritedWidget æ²¡æœ‰æä¾› dispose æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šå­˜åœ¨ StreamController ä¸èƒ½åŠæ—¶é”€æ¯ç­‰é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œå‚è€ƒäº†ä¸€ç¯‡å›½å¤–çš„æ–‡ç« ï¼ŒReactive Programming - Streams - BLoC è¿™é‡Œé€šè¿‡ä½¿ç”¨ StatefulWidget æ¥å®žçŽ°ï¼Œå½“è¯¥éƒ¨ä»¶é”€æ¯çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨å…¶ dispose æ–¹æ³•ä¸­åŠæ—¶é”€æ¯ StreamControllerï¼Œè¿™é‡Œæˆ‘è¿˜æ˜¯å…ˆå½“ä¸ªæ¬è¿å·¥ï¼Œæ¬ä¸‹å¤§ä½¬ä¸ºæˆ‘ä»¬å®žçŽ°å¥½çš„åŸºç±» 12345678910111213141516171819202122232425262728293031323334353637abstract class BaseBloc &#123; void dispose(); // è¯¥æ–¹æ³•ç”¨äºŽåŠæ—¶é”€æ¯èµ„æº&#125;class BlocProvider&lt;T extends BaseBloc&gt; extends StatefulWidget &#123; final Widget child; // è¿™ä¸ª `widget` åœ¨ stream æŽ¥æ”¶åˆ°é€šçŸ¥çš„æ—¶å€™åˆ·æ–° final T bloc; BlocProvider(&#123;Key key, @required this.child, @required this.bloc&#125;) : super(key: key); @override _BlocProviderState&lt;T&gt; createState() =&gt; _BlocProviderState&lt;T&gt;(); // è¯¥æ–¹æ³•ç”¨äºŽè¿”å›ž Bloc å®žä¾‹ static T of&lt;T extends BaseBloc&gt;(BuildContext context) &#123; final type = _typeOf&lt;BlocProvider&lt;T&gt;&gt;(); // èŽ·å–å½“å‰ Bloc çš„ç±»åž‹ // é€šè¿‡ç±»åž‹èŽ·å–ç›¸åº”çš„ Providerï¼Œå†é€šè¿‡ Provider èŽ·å– bloc å®žä¾‹ BlocProvider&lt;T&gt; provider = context.ancestorWidgetOfExactType(type); return provider.bloc; &#125; static Type _typeOf&lt;T&gt;() =&gt; T;&#125;class _BlocProviderState&lt;T&gt; extends State&lt;BlocProvider&lt;BaseBloc&gt;&gt; &#123; @override void dispose() &#123; widget.bloc.dispose(); // åŠæ—¶é”€æ¯èµ„æº super.dispose(); &#125; @override Widget build(BuildContext context) &#123; return widget.child; &#125;&#125; æŽ¥ç€æˆ‘ä»¬å¯¹å‰é¢çš„ä¾‹å­ä½¿ç”¨ BLoC è¿›è¡Œä¿®æ”¹ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª Bloc ç±»ï¼Œç”¨äºŽä¿®æ”¹ count çš„å€¼ 12345678910111213141516171819class CounterBloc extends BaseBloc &#123; int _count = 0; int get count =&gt; _count; // stream StreamController&lt;int&gt; _countController = StreamController.broadcast(); Stream&lt;int&gt; get countStream =&gt; _countController.stream; // ç”¨äºŽ StreamBuilder çš„ stream void dispatch(int value) &#123; _count = value; _countController.sink.add(_count); // ç”¨äºŽé€šçŸ¥ä¿®æ”¹å€¼ &#125; @override void dispose() &#123; _countController.close(); // æ³¨é”€èµ„æº &#125;&#125; åœ¨ä½¿ç”¨ Bloc å‰ï¼Œéœ€è¦åœ¨æœ€ä¸Šå±‚çš„å®¹å™¨ä¸­è¿›è¡Œæ³¨å†Œï¼Œä¹Ÿå°±æ˜¯ MaterialApp ä¸­ 1234567891011121314151617181920212223242526272829303132333435363738394041void main() =&gt; runApp(StreamApp());class StreamApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // è¿™é‡Œå¯¹åˆ›å»ºçš„ bloc ç±»è¿›è¡Œæ³¨å†Œï¼Œå¦‚æžœè¯´æœ‰å¤šä¸ª bloc ç±»çš„è¯ï¼Œå¯ä»¥é€šè¿‡ child è¿›è¡ŒåµŒå¥—æ³¨å†Œå³å¯ // æ”¾åœ¨æœ€é¡¶å±‚ï¼Œå¯ä»¥å…¨å±€è°ƒç”¨ï¼Œå½“ App å…³é—­åŽï¼Œé”€æ¯æ‰€æœ‰çš„ Bloc èµ„æºï¼Œ // ä¹Ÿå¯ä»¥åœ¨è·¯ç”±è·³è½¬çš„æ—¶å€™è¿›è¡Œæ³¨å†Œï¼Œè‡³äºŽåœ¨å“ªé‡Œæ³¨å†Œï¼Œå®Œå…¨çœ‹éœ€æ±‚ // ä¾‹å¦‚å®žçŽ°ä¸»é¢˜è‰²çš„åˆ‡æ¢ï¼Œåˆ™éœ€è¦åœ¨å…¨å±€å®šä¹‰ï¼Œå½“åˆ‡æ¢ä¸»é¢˜è‰²çš„æ—¶å€™å…¨å±€åˆ‡æ¢ // åˆæ¯”å¦‚åªæœ‰æŸä¸ªæˆ–è€…æŸå‡ ä¸ªç‰¹æ®Šç•Œé¢è°ƒç”¨ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥é€šè¿‡åœ¨è·¯ç”±è·³è½¬çš„æ—¶å€™æ³¨å†Œ return BlocProvider( child: MaterialApp( debugShowCheckedModeBanner: false, home: StreamHome(), ), bloc: CounterBloc()); &#125;&#125;class StreamHome extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // èŽ·å–æ³¨å†Œçš„ blocï¼Œå¿…é¡»å…ˆæ³¨å†Œï¼Œå†åŽ»æŸ¥æ‰¾ final CounterBloc _bloc = BlocProvider.of&lt;CounterBloc&gt;(context); return Scaffold( body: SafeArea( child: Container( alignment: Alignment.center, child: StreamBuilder( initialData: _bloc.count, stream: _bloc.countStream, builder: (_, snapshot) =&gt; Text('$&#123;snapshot.data&#125;', style: TextStyle(fontSize: 20.0)), ), )), floatingActionButton: // é€šè¿‡ bloc ä¸­çš„ dispatch æ–¹æ³•è¿›è¡Œå€¼çš„ä¿®æ”¹ï¼Œé€šçŸ¥ stream åˆ·æ–°ç•Œé¢ FloatingActionButton(onPressed: () =&gt; _bloc.dispatch(_bloc.count + 1), child: Icon(Icons.add)), ); &#125;&#125; é‡æ–°è¿è¡ŒåŽï¼ŒæŸ¥çœ‹æ•ˆæžœè¿˜æ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥æˆ‘ä»¬æˆåŠŸçš„å¯¹ StatefulWidget è¿›è¡Œäº†æ›¿æ¢ å†ç»§ç»­è®²ä¹‹å‰ï¼Œå…ˆæ€»ç»“ä¸‹ Bloc â€‹ 1. æˆåŠŸçš„æŠŠé¡µé¢å’Œé€»è¾‘åˆ†ç¦»å¼€äº†ï¼Œé¡µé¢åªå±•ç¤ºæ•°æ®ï¼Œé€»è¾‘é€šè¿‡ BLoC è¿›è¡Œå¤„ç† â€‹ 2. å‡å°‘äº† setState æ–¹æ³•çš„ä½¿ç”¨ï¼Œæé«˜äº†æ€§èƒ½ â€‹ 3. å®žçŽ°äº†çŠ¶æ€ç®¡ç† RxDartå› ä¸ºä¸Šé¢çš„å‚è€ƒæ–‡ç« ä¸­æåˆ°äº† RxDartï¼Œä¸ªäººè§‰å¾—æœ‰å¿…è¦äº†è§£ä¸‹ï¼Œå½“ç„¶ç›®å‰ä¹Ÿæœ‰å¾ˆå¤šæ–‡ç« ä»‹ç» RxDartï¼Œæ‰€ä»¥æˆ‘å°±è®²ä¸‹å’Œ BLoC æœ‰ç‚¹å…³ç³»çš„éƒ¨åˆ†å§ã€‚RxDart éœ€è¦é€šè¿‡å¼•å…¥æ’ä»¶çš„æ–¹å¼å¼•å…¥(rxdart: ^0.21.0) å¦‚æžœéœ€è¦æŸ¥çœ‹è¯¦ç»†çš„å†…å®¹ï¼Œæˆ‘è¿™é‡Œæä¾›å‡ ç¯‡æ–‡ç« é“¾æŽ¥ RxDart æ–‡æ¡£ RxDart: Magical transformations of Streams å…¶å®ž RxDart å°±æ˜¯å¯¹ Stream çš„è¿›ä¸€æ­¥åˆ†è£…ï¼ŒRxDart æä¾›äº†ä¸‰ç§ Subjectï¼Œå…¶åŠŸèƒ½ç±»ä¼¼ Stream ä¸­çš„å•è®¢é˜… stream å’Œ å¹¿æ’­ streamã€‚ PublishSubject 123/// PublishSubject is, by default, a broadcast (aka hot) controller, in order/// to fulfill the Rx Subject contract. This means the Subject's `stream` can/// be listened to multiple times. é€šè¿‡æ³¨é‡Šå¯ä»¥å‘çŽ° PuslishSubject ä¸å¯è¢«å¤šæ¬¡è®¢é˜…ï¼Œå°½ç®¡å®žçŽ°æ˜¯é€šè¿‡ StreamController&lt;T&gt;.broadcast æ–¹å¼å®žçŽ°ï¼Œå…¶å®žä¸‰ç§éƒ½æ˜¯é€šè¿‡ broadcast æ–¹å¼å®žçŽ°çš„ï¼Œæ‰€ä»¥å®žçŽ°çš„åŠŸèƒ½å°±æ˜¯ç±»ä¼¼ Single-subscription Stream çš„åŠŸèƒ½ã€‚ BehaviorSubject 123/// BehaviorSubject is, by default, a broadcast (aka hot) controller, in order/// to fulfill the Rx Subject contract. This means the Subject's `stream` can/// be listened to multiple times. BehaviorSubject å¯ä»¥è¢«å¤šæ¬¡è®¢é˜…ï¼Œé‚£ä¹ˆè¿™ä¸ªå°±æ˜¯å®žçŽ°äº† Broadcast Stream åŠŸèƒ½ã€‚ ReplaySubject 123/// ReplaySubject is, by default, a broadcast (aka hot) controller, in order/// to fulfill the Rx Subject contract. This means the Subject's `stream` can/// be listened to multiple times. ReplaySubject å…¶å®žä¹Ÿæ˜¯å®žçŽ° Broadcast Stream åŠŸèƒ½ï¼Œé‚£ä¹ˆå®ƒå’Œ BehaviorSubject çš„åŒºåˆ«åœ¨å“ªå‘¢ï¼Œåˆ«æ€¥ï¼Œç­‰æˆ‘æ…¢æ…¢è®²ã€‚ 123/// As items are added to the subject, the ReplaySubject will store them./// When the stream is listened to, those recorded items will be emitted to/// the listener. å½“æœ‰æ•°æ®æ·»åŠ äº†ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ç›‘å¬çš„æ—¶å€™ï¼Œå®ƒä¼šå°†æ•°æ®å­˜å‚¨ä¸‹æ¥ï¼Œç­‰åˆ°æœ‰ç›‘å¬äº†ï¼Œå†å‘é€å‡ºåŽ»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒReplaySubject å®žçŽ°äº† Brodacast Stream çš„å¤šè®¢é˜…åŠŸèƒ½ï¼ŒåŒæ—¶ä¹Ÿå®žçŽ°äº† Single-subscription Stream çš„å­˜å‚¨æ•°æ®çš„åŠŸèƒ½ï¼Œæ¯æ¬¡æ·»åŠ äº†æ–°çš„ç›‘å¬ï¼Œéƒ½èƒ½å¤ŸèŽ·å–åˆ°å…¨éƒ¨çš„æ•°æ®ã€‚å½“ç„¶ï¼Œè¿™è¿˜ä¸æ˜¯å®ƒçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå®ƒè¿˜å¯ä»¥è®¾ç½®æœ€å¤§çš„ç›‘å¬æ•°é‡ï¼Œä¼šåªç›‘å¬æœ€æ–°çš„å‡ ä¸ªæ•°æ®ï¼Œåœ¨æ³¨é‡Šä¸­ï¼Œæä¾›äº†è¿™ä¹ˆä¸¤ä¸ªä¾‹å­ï¼Œå¯ä»¥çœ‹ä¸‹ 1234567891011121314151617181920212223/// ### Example ////// final subject = new ReplaySubject&lt;int&gt;();////// subject.add(1);/// subject.add(2);/// subject.add(3);////// subject.stream.listen(print); // prints 1, 2, 3/// subject.stream.listen(print); // prints 1, 2, 3/// subject.stream.listen(print); // prints 1, 2, 3////// ### Example with maxSize////// final subject = new ReplaySubject&lt;int&gt;(maxSize: 2); // å®žçŽ°ç›‘å¬æ•°é‡é™åˆ¶////// subject.add(1);/// subject.add(2);/// subject.add(3);////// subject.stream.listen(print); // prints 2, 3/// subject.stream.listen(print); // prints 2, 3/// subject.stream.listen(print); // prints 2, 3 é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ RxDart å¯¹å‰é¢ä½¿ç”¨ Stream å®žçŽ°çš„ä¾‹å­è¿›è¡Œæ›¿æ¢ï¼Œæœ€ç®€å•çš„å…¶å®žåªéœ€è¦ä½¿ç”¨ BehaviorSubject æ›¿æ¢ StreamController.broadcast() å°±å¯ä»¥äº†ï¼Œåˆ«çš„éƒ½ä¸éœ€è¦å˜åŒ–ã€‚ä½†æ˜¯ RxDart æœ‰è‡ªå·±çš„å˜é‡ï¼Œè¿˜æ˜¯æŒ‰ç…§ RxDart çš„æ–¹å¼æ¥ 1234567891011121314// ç»§æ‰¿è‡ª StreamControllerï¼Œæ‰€ä»¥ StreamController æ‹¥æœ‰çš„å±žæ€§éƒ½æœ‰BehaviorSubject&lt;int&gt; _countController = BehaviorSubject();// StreamController&lt;int&gt; _countController = StreamController.broadcast();// ç»§æ‰¿è‡ª Streamï¼Œæ‰€ä»¥è¿™é‡Œç›´æŽ¥ç”¨ä¹‹å‰ stream çš„å†™æ³•ä¹Ÿæ²¡é—®é¢˜ï¼Œä½†æ˜¯è¿™æ ·å°±æœ‰ç‚¹ä¸ RxDart äº†Observable&lt;int&gt; get countStream =&gt; Observable(_countController.stream);// Stream&lt;int&gt; get countStream =&gt; _countController.stream;void dispatch(int value) &#123; _count = value; // ç›´æŽ¥æä¾›äº† add æ–¹æ³•ï¼Œä¸éœ€è¦é€šè¿‡ sink æ¥æ·»åŠ  _countController.add(_count);// _countController.sink.add(_count);&#125; å†æ¬¡è¿è¡Œè¿˜æ˜¯èƒ½è¿‡å®žçŽ°ç›¸åŒçš„æ•ˆæžœã€‚å¦‚æžœè¯´è¦åœ¨ RxDart å’Œ Stream ä¸¤ç§å®žçŽ°æ–¹å¼ä¸­é€‰æ‹©ä¸€ç§ï¼Œä¸ªäººæ›´åå‘äºŽ RxDartï¼Œå› ä¸ºå®ƒå¯¹ Stream è¿›è¡Œäº†è¿›ä¸€æ­¥çš„å°è£…ï¼Œæä¾›äº†æ›´å¤šæ›´æ–¹ä¾¿çš„æ•°æ®è½¬æ¢æ–¹æ³•ï¼Œè€Œä¸”é“¾å¼çš„å†™æ³•çœŸçš„å¾ˆèˆ’æœï¼Œç”¨è¿‡äº†å°±åœä¸ä¸‹æ¥ï¼Œå…·ä½“çš„æ–¹æ³•ä»‹ç»å¯ä»¥å‚è€ƒä¸Šé¢æä¾›çš„é“¾æŽ¥ã€‚ Provideè¯´å®žè¯è‡ªå·±å°è£… BLoC æ¥å®žçŽ°åˆ†ç¦»é€»è¾‘å’Œç•Œé¢ï¼Œç›¸å¯¹è¿˜æ˜¯æœ‰ç‚¹éš¾åº¦çš„ï¼Œè¿™è¾¹å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹æ¥å®žçŽ°ï¼Œè¿™è¾¹æŽ¨è Google ç²‘ç²‘çš„åº“ï¼Œflutter_provideï¼Œçœ‹ä¸‹å®˜æ–¹å¯¹å…³é”®éƒ¨ä»¶å’Œé™æ€æ–¹æ³•çš„ä»‹ç» Provide&lt;T&gt; - Widget used to obtain values from a ProviderNode higher up in the widget tree and rebuild on change. The Provide&lt;T&gt;widget should only be used with Streams or Listenables. Equivalent to ScopedModelDescendant in ScopedModel Provide.value&lt;T&gt; - Static method used to get a value from a ProviderNode using the BuildContext. This will not rebuild on change. Similar to manually writing a static .of() method for an InheritedWidget. Provide.stream&lt;T&gt; - Static method used to get a Stream from a ProviderNode. Only works if either T is listenable, or if the Providercomes from a Stream. Provider&lt;T&gt; - A class that returns a typed value on demand. Stored in a ProviderNode to allow retrieval using Provide. ProviderNode - The equivalent of the ScopedModel widget. Contains Providers which can be found as an InheritedWidget. Provide è¿™ä¸ªéƒ¨ä»¶ä¸»è¦ç”¨äºŽä»Žä¸Šå±‚çš„ ProvideNode ä¸­èŽ·å–å€¼ï¼Œå½“å˜åŒ–çš„æ—¶å€™åˆ·æ–°é‡å»ºï¼Œåªèƒ½åŒ Stream å’Œ Listenable ä¸€åŒä½¿ç”¨ï¼Œç±»ä¼¼äºŽ ScopeMode ä¸­çš„ ScopedModelDescendantã€‚(è¿™ä¸ªéƒ¨ä»¶æ”¾åœ¨éœ€è¦çŠ¶æ€ç®¡ç†çš„éƒ¨ä»¶çš„ä¸Šå±‚ï¼Œä¾‹å¦‚æœ‰ä¸ª Text éœ€è¦ä¿®æ”¹çŠ¶æ€ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨å¤–å±‚æä¾›ä¸€ä¸ª Provide éƒ¨ä»¶ï¼Œé€šè¿‡å†…éƒ¨ builder å‚æ•°è¿”å›ž Text éƒ¨ä»¶) Provide.value æ˜¯ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºŽä»Ž ProvideNode èŽ·å–å€¼ï¼Œä½†æ˜¯å½“æŽ¥æ”¶çš„å€¼æ”¹å˜çš„æ—¶å€™ä¸ä¼šé‡å»ºã€‚ç±»ä¼¼äºŽ InheritedWidget çš„é™æ€æ–¹æ³• ofã€‚(è¿™ä¸ªæ–¹æ³•ç”¨äºŽèŽ·å–æŒ‡å®šç±»åž‹çš„ provideï¼Œæ¯ä¸ª provide éƒ½éœ€è¦æä¾›ä¸€ä¸ªæ•°æ®ç±»ï¼Œè¯¥ç±» with ChangeNotifierï¼Œå½“æ•°æ®å˜åŒ–çš„æ—¶å€™é€šè¿‡ notifyListeners é€šçŸ¥ provide å˜åŒ–ï¼Œè¿›è¡Œåˆ·æ–°é‡å»º) Provide.stream æ˜¯ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºŽä»Ž ProvideNode èŽ·å–ä¸€ä¸ª streamï¼Œä»…åœ¨ T å¯è¢«ç›‘å¬ï¼Œæˆ–è€… Provide æ¥è‡ª stream çš„æƒ…å†µä¸‹æœ‰æ•ˆã€‚(è¿™ä¸ªé€šå¸¸ç»“åˆ StreamBuilder ä½¿ç”¨ï¼ŒStreamBuilder åœ¨ä¸Šé¢å·²ç»æåˆ°ï¼Œå°±ä¸å¤šè¯´äº†) Provider æŒ‰éœ€è¦çš„ç±»åž‹è¿”å›žç›¸å…³å€¼çš„ç±»ï¼Œå­˜å‚¨åœ¨ ProviderNode ä¸­æ–¹ä¾¿ Provide è¿›è¡Œæ£€ç´¢ã€‚(è¿™ä¸ªç±»ä¸»è¦æ˜¯å°†æˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„æ•°æ®ç±»é€šè¿‡ function ç­‰æ–¹æ³•è½¬æ¢æˆ Providerï¼Œå¹¶åœ¨ Providers ä¸­è¿›è¡Œæ³¨å†Œ) ProvideNode ç±»ä¼¼äºŽ ScopedModel çš„ä¸€ä¸ªéƒ¨ä»¶ï¼ŒåŒ…å«æ‰€æœ‰èƒ½è¢«æŸ¥æ‰¾çš„ Providersã€‚(è¿™ä¸ªéœ€è¦æ”¾åœ¨é¡¶å±‚ï¼Œæ–¹ä¾¿ä¸‹é¢çš„å®¹å™¨è¿›è¡ŒæŸ¥æ‰¾ providerï¼Œåˆ·æ–°ç›¸åº”çš„éƒ¨ä»¶ï¼Œä¸€èˆ¬æ”¾åœ¨ MaterialApp ä¸Šå±‚) è¿™è¾¹å†è¡¥å……ä¸€ä¸ªä¸ªäººè§‰å¾—å…³é”®çš„ç±» Providersï¼Œè¿™ä¸ªç±»ä¸»è¦ç”¨äºŽå­˜å‚¨å®šä¹‰çš„ Providerï¼Œä¸»è¦æ˜¯åœ¨å»ºç«‹ MaterialApp çš„æ—¶å€™å°†éœ€è¦ç”¨åˆ°çš„ Provider é€šè¿‡ provide æ–¹æ³•æ·»åŠ è¿›åŽ»å­˜å‚¨èµ·æ¥ï¼Œç„¶åŽåœ¨ ProvideNode ä¸­æ³¨å†Œæ‰€æœ‰çš„ provider æ–¹ä¾¿ä¸‹å±‚å®¹å™¨èŽ·å–å€¼ï¼Œå¹¶è°ƒç”¨ã€‚ è¯´é‚£ä¹ˆå¤šï¼Œè¿˜ä¸å¦‚ç›´æŽ¥çœ‹ä¸ªä¾‹å­ç›´æŽ¥ï¼Œä»£ç æ¥äº†~ï¼Œé¦–å…ˆéœ€è¦å»ºç«‹ä¸€ä¸ªç±»ä¼¼ BLoC ä¸­ç›‘å¬æ•°æ®å˜åŒ–çš„ counter_bloc ç±»çš„æ•°æ®ç®¡ç†ç±»ï¼Œæˆ‘ä»¬è¿™è¾¹å®šä¹‰ä¸º count_provider éœ€è¦æ··å…¥ ChangeNotifier ç±» 12345678910class CountProvider with ChangeNotifier &#123; int _value = 0; // å­˜å‚¨çš„æ•°æ®ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬éœ€è¦ç®¡ç†çš„çŠ¶æ€å€¼ int get value =&gt; _value; // èŽ·å–çŠ¶æ€å€¼ void changeValue(int value) &#123; _value = value; notifyListeners(); // å½“çŠ¶æ€å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œé€šè¿‡è¯¥æ–¹æ³•åˆ·æ–°é‡å»ºéƒ¨ä»¶ &#125;&#125; ç„¶åŽéœ€è¦å°†å®šä¹‰çš„ç±»æ³¨å†Œåˆ°å…¨å±€çš„ Providers ä¸­ 12345678910void main() &#123; final providers = Providers() // å°†æˆ‘ä»¬åˆ›å»ºçš„æ•°æ®ç®¡ç†ç±»ï¼Œé€šè¿‡ Provider.function æ–¹æ³•è½¬æ¢æˆ Providerï¼Œ // ç„¶åŽæ·»åŠ åˆ° Providers ä¸­ ..provide(Provider.function((_) =&gt; CountProvider())); // åœ¨ App ä¸Šå±‚ï¼Œé€šè¿‡åŒ…è£¹ä¸€å±‚ ProvideNodeï¼Œå¹¶å°†æˆ‘ä»¬ç”Ÿæˆçš„ Providers å®žä¾‹ // æ³¨å†Œåˆ° ProvideNode ä¸­åŽ»ï¼Œè¿™æ ·æ•´ä¸ª App éƒ½å¯ä»¥é€šè¿‡ Provide.value æŸ¥æ‰¾ç›¸å…³çš„ Provider // æ‰¾åˆ° Provider åŽå°±å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬çš„æ•°æ®ç®¡ç†ç±» runApp(ProviderNode(child: StreamApp(), providers: providers));&#125; æŽ¥ç€å°±æ˜¯æ›¿æ¢æˆ‘ä»¬çš„ç•Œé¢å®žçŽ°äº†ï¼Œå‰é¢é€šè¿‡ BLoC å®žçŽ°ï¼Œè¿™é‡Œæ›¿æ¢æˆ Provide æ¥å®žçŽ° 123456789101112131415161718192021class StreamHome extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( body: SafeArea( child: Container( alignment: Alignment.center, // é€šè¿‡æŒ‡å®šç±»åž‹ï¼ŒèŽ·å–ç‰¹å®šçš„ Provideï¼Œè¿™ä¸ª Provide ä¼šè¿”å›žæˆ‘ä»¬çš„æ•°æ®ç®¡ç†ç±» provider // é€šè¿‡å†…éƒ¨å®šä¹‰çš„æ–¹æ³•ï¼ŒèŽ·å–åˆ°éœ€è¦å±•ç¤ºçš„å€¼ child: Provide&lt;CountProvider&gt;(builder: (_, widget, provider) =&gt; Text('$&#123;provider.value&#125;')), )), floatingActionButton: FloatingActionButton( onPressed: () =&gt; // é€šè¿‡ value æ–¹æ³•èŽ·å–åˆ°æˆ‘ä»¬çš„æ•°æ®ç®¡ç†ç±» providerï¼Œ // é€šè¿‡è°ƒç”¨æ”¹å˜å€¼çš„æ–¹æ³•ï¼Œä¿®æ”¹å†…éƒ¨çš„å€¼ï¼Œå¹¶é€šçŸ¥ç•Œé¢åˆ·æ–°é‡å»º Provide.value&lt;CountProvider&gt;(context).changeValue( Provide.value&lt;CountProvider&gt;(context).value + 1), child: Icon(Icons.add)) ); &#125;&#125; æœ¬æ–‡ä»£ç æŸ¥çœ‹ bloc åŒ…åä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œéœ€è¦å•ç‹¬è¿è¡Œ stream_main.dart æ–‡ä»¶ æœ€åŽè¿è¡ŒåŽè¿˜æ˜¯ä¸€æ ·çš„æ•ˆæžœï¼Œä¹Ÿæ‘’å¼ƒäº† StatefulWidget éƒ¨ä»¶å’Œ SetState æ–¹æ³•ï¼Œå®žçŽ°äº†é€»è¾‘å’Œç•Œé¢åˆ†ç¦»ã€‚ä½†æ˜¯ Provide æœ€ç»ˆè¿˜æ˜¯é€šè¿‡ InheritedWidget æ¥å®žçŽ°ï¼Œå½“ç„¶åœ¨èµ„æºæ–¹é¢ Google çš„å¤§ä½¬ä»¬åšäº†ä¸€äº›ç›¸å…³çš„å¤„ç†ï¼Œè‡³äºŽå¦‚ä½•å¤„ç†ï¼Œè¿™è¾¹å°±ä¸å¤šè¯´äº†ã€‚ç›®å‰ provide çš„è¿™ä¸ªåº“è¿˜å­˜åœ¨ä¸€ç‚¹äº‰è®®çš„åœ°æ–¹ï¼Œå…·ä½“æŸ¥çœ‹ issue#3ï¼Œä½†æ˜¯ç›®å‰æ¥çœ‹å¹¶æ²¡æœ‰å¤ªå¤§çš„å½±å“ã€‚å½“ç„¶ä½ ä¸æ”¾å¿ƒçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ Scoped_model æˆ–è€…ä¸Šé¢çš„ Bloc æ¨¡å¼ï¼ŒGoogle åœ¨æ–‡æ¡£ä¹Ÿæœ‰ç›¸å…³çš„æ³¨æ˜Ž If you must choose a package today, itâ€™s safer to go with package:scoped_model than with this package. è¿™ç¯‡æ¦‚å¿µæ€§çš„æ¯”è¾ƒå¤šï¼Œä½†æ˜¯ç­‰ç†è§£äº†ä»¥åŽï¼Œå¯¹äºŽä»¥åŽçš„å¼€å‘è¿˜æ˜¯éžå¸¸æœ‰åˆ©çš„ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(å)ä¹‹æ‰‹åŠ¿å¤„ç†å’ŒåŠ¨ç”»]]></title>
    <url>%2Fposts%2Fd4756fd3.html</url>
    <content type="text"><![CDATA[åœ¨ Flutter ä¸­ï¼Œè‡ªå¸¦æ‰‹åŠ¿ç›‘å¬çš„ç›®å‰ä¸ºæ­¢å¥½åƒåªæœ‰æŒ‰é’®éƒ¨ä»¶å’Œä¸€äº› chip éƒ¨ä»¶ï¼Œä¾‹å¦‚ Text ç­‰éƒ¨ä»¶éœ€è¦å®žçŽ°æ‰‹åŠ¿ç›‘å¬ï¼Œå°±éœ€è¦å€ŸåŠ©å¸¦æœ‰ç›‘å¬äº‹ä»¶çš„éƒ¨ä»¶æ¥å®žçŽ°äº†ï¼Œè¿™èŠ‚æˆ‘ä»¬ä¼šè®²ä¸‹ InkWell å’Œ GestureDetector æ¥å®žçŽ°æ‰‹åŠ¿çš„ç›‘å¬ã€‚ InkWellåœ¨å‰é¢çš„ä¸€äº›ä¾‹å­ä¸­ï¼Œå°ä¼™ä¼´åº”è¯¥çœ‹åˆ°äº†å¥½å‡ æ¬¡ InkWell è¿™ä¸ªéƒ¨ä»¶ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥å®žçŽ°å¯¹ä¸€äº›æ‰‹åŠ¿çš„ç›‘å¬ï¼Œå¹¶å®žçŽ° MD çš„æ°´æ³¢çº¹æ•ˆæžœï¼Œä¸¾ä¸ªç®€å•çš„ä¸€ä¸ªä¾‹å­ 1234InkWell( child: Text('ç‚¹æˆ‘...ç‚¹æˆ‘...æˆ‘èƒ½å“åº”ç‚¹å‡»æ‰‹åŠ¿'), onTap: () =&gt; print('å•Š...æˆ‘è¢«ç‚¹å‡»äº†...')), é‚£ä¹ˆå½“ç‚¹å‡» Text çš„æ—¶å€™å°±ä¼šå“åº”ç‚¹å‡»äº‹ä»¶ï¼ŒæŽ§åˆ¶å°è¾“å‡ºæ—¥å¿— æˆ‘ä»¬è¿˜æ˜¯è€å¥—è·¯ï¼Œåˆ†æžä¸‹æºç ã€‚Ctrl ç‚¹å‡» InkWell æ¥æŸ¥çœ‹æºç (Android Studio çš„æ“ä½œï¼Œåˆ«çš„æˆ‘ä¸æ‡‚å–”â€¦)ï¼Œç„¶åŽï¼Œã€Œå—¯â€¦é™¤äº†æž„é€ å‡½æ•°æ€Žä¹ˆä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Ÿï¼Ÿï¼Ÿã€é‚£åªèƒ½çœ‹å®ƒçš„çˆ¶ç±» InkResponse äº†ï¼Œåœ¨é‚£ä¹‹å‰ï¼Œæˆ‘ä»¬çœ‹ä¸‹ InkWell çš„è¯´æ˜Ž 12&gt; /// A rectangular area of a [Material] that responds to touch.&gt; InkWell æ˜¯åœ¨ MaterialDesign é£Žæ ¼ä¸‹çš„ä¸€ä¸ªç”¨æ¥å“åº”è§¦æ‘¸çš„çŸ©å½¢åŒºåŸŸï¼ˆæ³¨æ„åŠ ç²—çš„æ–‡å­—ï¼Œ1.å¦‚æžœä¸æ˜¯ MD é£Žæ ¼çš„éƒ¨ä»¶ä¸‹ï¼Œä½ æ˜¯ä¸èƒ½ç”¨è¿™ä¸ªæ¥åšç‚¹å‡»å“åº”çš„ï¼›2.InkWell æ˜¯ä¸€å—çŸ©å½¢åŒºåŸŸï¼Œå¦‚æžœä½ è¦çš„æ˜¯åœ†å½¢åŒºåŸŸï¼Œ8 å¥½æ„æ€ï¼Œä¸è¡Œï¼ï¼‰ 1234&gt; /// The [InkWell] widget must have a [Material] widget as an ancestor. The&gt; /// [Material] widget is where the ink reactions are actually painted. This&gt; /// matches the material design premise wherein the [Material] is what is&gt; /// actually reacting to touches by spreading ink. 123456789101112131415161718192021222324252627282930313233343536373839`InkWell` å¿…é¡»è¦æœ‰ä¸€ä¸ª `Material` é£Žæ ¼çš„éƒ¨ä»¶ä½œä¸ºé”šç‚¹ï¼Œå·´æ‹‰å·´æ‹‰å·´æ‹‰....å†æ¬¡å¼ºè°ƒå¿…é¡»è¦åœ¨ `MD` é£Žæ ¼ä¸‹ä½¿ç”¨ã€‚æŽ¥ä¸‹æ¥çœ‹ä¸‹ `InkResponse` å§#### InkResponse```dartconst InkResponse(&#123; Key key, this.child, // éœ€è¦ç›‘å¬çš„å­éƒ¨ä»¶ // ä¸€ä¸ª `GestureTapCallback` ç±»åž‹å‚æ•°ï¼Œçœ‹ä¸‹ `GestureTapCallback` çš„å®šä¹‰, // `typedef GestureTapCallback = void Function();` å°±æ˜¯ç®€å•çš„æ— å‚æ— è¿”å›žç±»åž‹å‚æ•° // ç›‘å¬æ‰‹æŒ‡ç‚¹å‡»äº‹ä»¶ this.onTap, // ä¸€ä¸ª `GestureTapDownCallback` ç±»åž‹å‚æ•°ï¼Œéœ€è¦ `TapDownDetails` ç±»åž‹å‚æ•°ï¼Œ // `TapDownDetails` é‡Œé¢æœ‰ä¸ª `Offset` å‚æ•°ç”¨äºŽè®°å½•ç‚¹å‡»çš„ä½ç½®ï¼Œç›‘å¬æ‰‹æŒ‡ç‚¹å‡»å±å¹•çš„äº‹ä»¶ this.onTapDown, // åŒ `onTap` è¡¨ç¤ºç‚¹å‡»äº‹ä»¶å–æ¶ˆç›‘å¬ this.onTapCancel, // åŒ `onTap` è¡¨ç¤ºåŒå‡»äº‹ä»¶ç›‘å¬ this.onDoubleTap, // ä¸€ä¸ª `GestureLongPressCallback` ç±»åž‹å‚æ•°ï¼Œä¹Ÿæ˜¯æ— å‚æ— è¿”å›žå€¼ï¼Œè¡¨ç¤ºé•¿æŒ‰çš„ç›‘å¬ this.onLongPress, // ç›‘å¬é«˜äº®çš„å˜åŒ–ï¼Œè¿”å›ž `true` è¡¨ç¤ºå¾€é«˜äº®å˜åŒ–ï¼Œ`false` ç›¸å this.onHighlightChanged, // æ˜¯å¦éœ€è¦è£å‰ªåŒºåŸŸï¼Œ`InkWell` è¯¥å€¼ä¸º `true`ï¼Œä¼šæ ¹æ® `highlightShape` è£å‰ª this.containedInkWell = false, // é«˜äº®çš„å¤–å½¢ï¼Œ`InkWell` è¯¥å€¼è®¾ç½®æˆ `BoxShape.rectangle`ï¼Œæ‰€ä»¥æ˜¯ä¸ªçŸ©å½¢åŒºåŸŸ this.highlightShape = BoxShape.circle, this.radius, // æ‰‹æŒ‡ç‚¹ä¸‹åŽ»çš„æ—¶å€™ï¼Œå‡ºçŽ°æ°´æ³¢çº¹çš„åŠå¾„ this.borderRadius, // ç‚¹å‡»æ—¶å€™å¤–åœˆé˜´å½±çš„åœ†è§’åŠå¾„ this.customBorder, this.highlightColor, // é«˜äº®é¢œè‰² this.splashColor, // æ‰‹æŒ‡ç‚¹ä¸‹ç”Ÿæˆçš„æ°´æ³¢é¢œè‰² this.splashFactory, // ä¸¤ä¸ªå€¼ `InkRipple.splashFactory` å’Œ `InkSplash.splashFactory` this.enableFeedback = true, // æ£€æµ‹åˆ°æ‰‹åŠ¿æ˜¯å¦æœ‰åé¦ˆ this.excludeFromSemantics = false, &#125;) æ‰€ä»¥ä¸€äº›ç®€å•çš„è§¦æ‘¸äº‹ä»¶ç›´æŽ¥é€šè¿‡ InkWell æˆ–è€… InkResponse å°±èƒ½å¤Ÿå®žçŽ°ï¼Œä½†æ˜¯é¢ä¸´ä¸€äº›æ¯”è¾ƒå¤æ‚çš„æ‰‹åŠ¿ï¼Œå°±æœ‰ç‚¹ä¸å¤ªå¤Ÿç”¨äº†ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ GestureDector æ¥è¿›è¡Œå¤„ç† GestureDectorGestureDetector ä¹Ÿæ˜¯ä¸€ä¸ªéƒ¨ä»¶ï¼Œä¸»è¦å®žçŽ°å¯¹å„ç§æ‰‹åŠ¿åŠ¨ä½œçš„ç›‘å¬ï¼Œå…¶ç›‘å¬äº‹ä»¶æŸ¥çœ‹ä¸‹é¢çš„è¡¨æ ¼ å›žè°ƒæ–¹æ³• å›žè°ƒæè¿° onTapDown ç‚¹å‡»å±å¹•çš„æ‰‹åŠ¿è§¦ç¢°åˆ°å±å¹•æ—¶å€™è§¦å‘ onTapUp ç‚¹å‡»å±å¹•æŠ¬æ‰‹åŽè§¦å‘ï¼Œç‚¹å‡»ç»“æŸ onTap ç‚¹å‡»äº‹ä»¶å·²ç»å®Œæˆçš„æ—¶å€™è§¦å‘ï¼Œå’Œ onTapUp å‡ ä¹ŽåŒæ—¶ onTapCancel ç‚¹å‡»æœªå®Œæˆï¼Œè¢«å…¶å®ƒæ‰‹åŠ¿å–ä»£çš„æ—¶å€™è§¦å‘ onDoubleTap åŒå‡»å±å¹•çš„æ—¶å€™è§¦å‘ onLongPress é•¿æŒ‰å±å¹•çš„æ—¶å€™è§¦å‘ onLongPressUp é•¿æŒ‰å±å¹•åŽæŠ¬æ‰‹è§¦å‘ onVerticalDragDown è§¦ç¢°åˆ°å±å¹•ï¼Œå¯èƒ½å‘ç”Ÿåž‚ç›´æ–¹å‘ç§»åŠ¨è§¦å‘ï¼ŒonVerticalDrag ç³»åˆ—äº‹ä»¶ä¸ä¼šåŒ onHorizontalDrag ç³»åˆ—äº‹ä»¶åŒæ—¶å‘ç”Ÿ ï¼Œå¦‚æžœå‘ç”Ÿäº† onVerticalDrag åˆ™æŽ¥ä¸‹æ¥å¦‚ä½•å˜åŒ–ç§»åŠ¨ï¼Œéƒ½ä¸ä¼šè§¦å‘ onHorizontalDrag äº‹ä»¶ï¼Œé™¤éžå–æ¶ˆåŽé‡æ–°è§¦å‘ã€‚åˆ¤æ–­ä¸¤è€…çš„å…³é”®æ˜¯å‡†å¤‡æ»‘åŠ¨çš„æ„å›¾ï¼Œå…ˆå‘ç”Ÿæ¨ªå‘æ»‘åŠ¨åˆ™è§¦å‘ onHorizontalDrag äº‹ä»¶ï¼Œå¦åˆ™ onVerticalDrag äº‹ä»¶ã€‚ onVerticalDragStart è§¦ç¢°åˆ°å±å¹•ï¼Œå¹¶å¼€å§‹å‘ç”Ÿåž‚ç›´æ–¹å‘çš„ç§»åŠ¨è§¦å‘ onVerticalDragUpdate åž‚ç›´æ–¹å‘ç§»åŠ¨çš„è·ç¦»å˜åŒ–è§¦å‘ onVerticalDragEnd æŠ¬æ‰‹å–æ¶ˆåž‚ç›´æ–¹å‘ç§»åŠ¨çš„æ—¶å€™è§¦å‘ onVerticalDragCancel è§¦å‘ onVerticalDragDown ä½†æ˜¯æ²¡æœ‰å®Œæˆæ•´ä¸ª onVerticalDrag äº‹ä»¶è§¦å‘ onHorizontalDrag ç³»åˆ—ä»‹ç»çœç•¥åŒä¸Šâ€¦ onPanDown è§¦ç¢°åˆ°å±å¹•ï¼Œå‡†å¤‡æ»‘åŠ¨çš„æ—¶å€™è§¦å‘ï¼ŒonPan ç³»åˆ—å›žè°ƒä¸å¯å’Œ onVerticalDrag æˆ–è€… onHorizontalDrag ç³»åˆ—å›žè°ƒåŒæ—¶è®¾ç½® onPanStart è§¦ç¢°åˆ°å±å¹•ï¼Œå¹¶å¼€å§‹æ»‘åŠ¨æ—¶å€™è§¦å‘ onPanUpdate æ»‘åŠ¨ä½ç½®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™è§¦å‘ onPanEnd æ»‘åŠ¨å®Œæˆå¹¶æŠ¬æ‰‹çš„æ—¶å€™è§¦å‘ onPanCancel è§¦å‘ onPanDown ä½†æ˜¯æ²¡æœ‰å®Œæˆæ•´ä¸ª onPan äº‹ä»¶è§¦å‘ onScaleStart ä¸¤ä¸ªæ‰‹æŒ‡ä¹‹é—´å»ºç«‹è”ç»œç‚¹è§¦å‘ï¼Œåˆå§‹ç¼©æ”¾æ¯”ä¾‹ä¸º 1.0 onScaleUpdate æ‰‹æŒ‡è·ç¦»å‘ç”Ÿå˜åŒ–ï¼Œç¼©æ”¾æ¯”ä¾‹ä¹Ÿè·Ÿéšå˜åŒ–è§¦å‘ onScaleEnd æ‰‹æŒ‡æŠ¬èµ·ï¼Œè‡³é—´çš„è”ç»œæ–­å¼€æ—¶å€™è§¦å‘ è¿˜æœ‰ onForcePress ç³»åˆ—äº‹ä»¶ï¼Œè¿™ä¸ªæ˜¯æ ¹æ®å¯¹å±å¹•çš„æŒ¤åŽ‹åŠ›åº¦è¿›è¡Œè§¦å‘ï¼Œéœ€è¦è¾¾åˆ°æŸäº›å®šå€¼æ‰èƒ½è§¦å‘ã€‚GestureDetector æœ‰ä¸ª behavior å±žæ€§ç”¨äºŽè®¾ç½®æ‰‹åŠ¿ç›‘å¬è¿‡ç¨‹ä¸­çš„è¡¨çŽ°å½¢å¼ deferToChild é»˜è®¤å€¼ï¼Œè§¦æ‘¸åˆ° child çš„èŒƒå›´æ‰ä¼šè§¦å‘æ‰‹åŠ¿ï¼Œç©ºç™½å¤„ä¸ä¼šè§¦å‘ opaque ä¸é€æ˜Žæ¨¡å¼ï¼Œé˜²æ­¢ background widget æŽ¥æ”¶åˆ°æ‰‹åŠ¿ translucent åŠé€æ˜Žæ¨¡å¼ï¼Œåˆšå¥½åŒ opaque ç›¸åï¼Œå…è®¸ background widget æŽ¥æ”¶åˆ°æ‰‹åŠ¿ ä»‹ç»å®Œäº†æ‰‹åŠ¿ï¼Œé‚£å°±å¯ä»¥å®žé™…æ“ç»ƒèµ·æ¥äº†ï¼Œæ¯”å¦‚ï¼Œå®žçŽ°ä¸€ä¸ªè·Ÿéšæ‰‹æŒ‡è¿åŠ¨çš„å°æ–¹å—ï¼Œå…ˆçœ‹ä¸‹æ•ˆæžœå›¾ ç®€å•çš„åˆ†æžä¸‹ï¼Œé€šè¿‡ Positioned æ¥è®¾ç½®å°æ–¹å—çš„ä½ç½®ï¼Œæ ¹æ® GestureDetector çš„ onPanUpdate ä¿®æ”¹ Positioned çš„ left å’Œ top å€¼ï¼Œå½“ onPanEnd æˆ–è€… onPanCancel çš„æ—¶å€™è®¾ç½®ä¸ºåŽŸç‚¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥æœ‰å¦‚å›¾çš„æ•ˆæžœäº† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class GestureDemoPage extends StatefulWidget &#123; @override _GestureDemoPageState createState() =&gt; _GestureDemoPageState();&#125;class _GestureDemoPageState extends State&lt;GestureDemoPage&gt; &#123; double left = 0.0; double top = 0.0; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Gesture Demo'), ), body: Stack( alignment: Alignment.center, children: &lt;Widget&gt;[ Positioned(child: Container(width: 50.0, height: 50.0, color: Colors.red), left: left, top: top), GestureDetector( behavior: HitTestBehavior.translucent, child: Container( color: Colors.transparent, width: MediaQuery.of(context).size.width - 10, height: MediaQuery.of(context).size.height), onPanDown: (details) &#123; setState(() &#123; left = details.globalPosition.dx; top = details.globalPosition.dy; &#125;); &#125;, onPanUpdate: (details) &#123; setState(() &#123; left = details.globalPosition.dx; top = details.globalPosition.dy; &#125;); &#125;, onPanCancel: () &#123; setState(() &#123; left = 0.0; top = 0.0; &#125;); &#125;, onPanEnd: (details) &#123; setState(() &#123; left = 0.0; top = 0.0; &#125;); &#125;, ) ], )); &#125;&#125; å¦‚æžœè¯´è¦å®žçŽ°ä¸€ä¸ªæ”¾å¤§ç¼©å°çš„æ–¹å—ï¼Œå°±å¯ä»¥é€šè¿‡ onScaleUpdate ä¸­èŽ·å–åˆ°çš„ details.scale æ¥è®¾ç½®æ–¹å—çš„å®½é«˜å³å¯ã€‚è¿™ä¸ªæ¯”è¾ƒç®€å•å°±ç•™ç»™å°ä¼™ä¼´ä»¬è‡ªå·±å®žçŽ°æ•ˆæžœäº†ã€‚ è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ gesture_main.dart æ–‡ä»¶ Animation åŠ¨ç”»Flutter çš„ Animation æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œå…·ä½“çš„å®žçŽ°éœ€è¦çœ‹å…¶å­ç±» AnimationControllerï¼Œåœ¨è¿™ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸‹ Animation çš„ä¸€äº›æ–¹æ³•å’Œä»‹ç»ã€‚ addListener / removeListener æ·»åŠ çš„ç›‘å¬ç”¨äºŽç›‘å¬å€¼çš„å˜åŒ–ï¼Œremove ç”¨äºŽåœæ­¢ç›‘å¬ addStatusListener / removeStatusListener æ·»åŠ åŠ¨ç”»çŠ¶æ€å˜åŒ–çš„ç›‘å¬ï¼Œremove åœæ­¢ç›‘å¬ï¼ŒAnimation çš„çŠ¶æ€æœ‰ 4 ç§ï¼šdismissed åŠ¨ç”»åˆå§‹çŠ¶æ€ï¼Œåå‘è¿åŠ¨ç»“æŸçŠ¶æ€ï¼Œforward åŠ¨ç”»æ­£å‘è¿åŠ¨çŠ¶æ€ï¼Œreverse åŠ¨ç”»åå‘è¿åŠ¨çŠ¶æ€ï¼Œcompleted åŠ¨ç”»æ­£å‘è¿åŠ¨ç»“æŸçŠ¶æ€ã€‚ drive æ–¹æ³•ç”¨äºŽè¿žæŽ¥åŠ¨ç”»ï¼Œä¾‹å¦‚å®˜æ–¹ä¸¾çš„ä¾‹å­ï¼Œå› ä¸º AnimationController æ˜¯å…¶å­ç±»ï¼Œæ‰€ä»¥ä¹Ÿæ‹¥æœ‰è¯¥æ–¹æ³• 123456Animation&lt;Alignment&gt; _alignment1 = _controller.drive( AlignmentTween( begin: Alignment.topLeft, end: Alignment.topRight, ), ); ä¸Šé¢çš„ä¾‹å­å°† AnimationController å’Œ AlignmentTween ç»“åˆæˆä¸€ä¸ª Animation&lt;Alignment&gt; åŠ¨ç”»ï¼Œå½“ç„¶ drive å¯ä»¥ç»“åˆå¤šä¸ªåŠ¨ç”»ï¼Œä¾‹å¦‚ 123456Animation&lt;Alignment&gt; _alignment3 = _controller .drive(CurveTween(curve: Curves.easeIn)) .drive(AlignmentTween( begin: Alignment.topLeft, end: Alignment.topRight, )); å› ä¸º Animation æ˜¯æŠ½è±¡ç±»ï¼Œæ‰€ä»¥å…·ä½“çš„è¿˜æ˜¯éœ€è¦é€šè¿‡ AnimationController æ¥å®žçŽ°ã€‚ AnimationController123456789101112AnimationController(&#123; double value, // è®¾ç½®åˆå§‹çš„å€¼ this.duration, // åŠ¨ç”»çš„æ—¶é•¿ this.debugLabel, // ä¸»è¦æ˜¯ç”¨äºŽ `toString` æ–¹æ³•ä¸­è¾“å‡ºä¿¡æ¯ this.lowerBound = 0.0, // æœ€å°èŒƒå›´ this.upperBound = 1.0, // æœ€å¤§èŒƒå›´ // AnimationController ç»“æŸæ—¶å€™çš„è¡Œä¸ºï¼Œæœ‰ `normal` å’Œ `preserve` ä¸¤ä¸ªå€¼å¯é€‰ this.animationBehavior = AnimationBehavior.normal, // è¿™ä¸ªå±žæ€§å¯ä»¥é€šè¿‡ with `SingleTickerProviderStateMixin` // æˆ–è€… `TickerProviderStateMixin` å¼•å…¥åˆ° `State`ï¼Œé€šè¿‡ `this` æŒ‡å®š @required TickerProvider vsync, &#125;) AnimationController æŽ§åˆ¶åŠ¨ç”»çš„æ–¹æ³•æœ‰è¿™ä¹ˆå‡ ä¸ª forward å¯åŠ¨åŠ¨ç”»ï¼Œå’Œä¸Šé¢æåˆ°çš„ forward çŠ¶æ€ä¸ä¸€æ · reverse æ–¹å‘å¯åŠ¨åŠ¨ç”» repeat é‡å¤ä½¿åŠ¨ç”»è¿è¡Œ stop åœæ­¢åŠ¨ç”» reset é‡ç½®åŠ¨ç”» å¤§æ¦‚äº†è§£äº† AnimationController ï¼ŒæŽ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ªå®žé™…çš„å°ä¾‹å­æ¥åŠ æ·±ä¸‹å°è±¡ï¼Œä¾‹å¦‚å®žçŽ°å¦‚ä¸‹æ•ˆæžœï¼Œç‚¹å‡»å¼€å§‹åŠ¨ç”»ï¼Œç»“æŸåŽå†ç‚¹å‡»åå‘åŠ¨ç”» 123456789101112131415161718192021222324252627282930313233343536373839404142class _AnimationDemoPageState extends State&lt;AnimationDemoPage&gt; with TickerProviderStateMixin &#123; AnimationController _animationController; @override void initState() &#123; super.initState(); _animationController = AnimationController( vsync: this, duration: Duration(milliseconds: 1000), lowerBound: 28.0, upperBound: 50.0); // å½“åŠ¨ç”»å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œé‡ç»˜ä¸‹ icon _animationController.addListener(() &#123; setState(() &#123;&#125;); &#125;); &#125; @override void dispose() &#123; // ä¸€å®šè¦é‡Šæ”¾èµ„æº _animationController.dispose(); super.dispose(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Animation Demo'), ), body: Center( child: IconButton( icon: Icon(Icons.android, color: Colors.green[500], size: _animationController.value), onPressed: () &#123; // æ ¹æ®çŠ¶æ€æ‰§è¡Œä¸åŒåŠ¨ç”»è¿åŠ¨æ–¹å¼ if (_animationController.status == AnimationStatus.completed) _animationController.reverse(); else if (_animationController.status == AnimationStatus.dismissed) _animationController.forward(); &#125;), ), ); &#125;&#125; é‚£ä¹ˆå¦‚æžœè¦å®žçŽ°æ— é™åŠ¨ç”»å‘¢ï¼Œé‚£å°±å¯ä»¥é€šè¿‡ addStatusListener ç›‘å¬åŠ¨ç”»çš„çŠ¶æ€æ¥æ‰§è¡Œï¼Œä¿®æ”¹ä»£ç ï¼Œåœ¨ initState å¢žåŠ å¦‚ä¸‹ä»£ç  12345678_animationController.addStatusListener((status) &#123; if (_animationController.status == AnimationStatus.completed) _animationController.reverse(); // æ­£å‘ç»“æŸåŽå¼€å§‹åå‘ else if (_animationController.status == AnimationStatus.dismissed) _animationController.forward(); // åå‘ç»“æŸåŽå¼€å§‹æ­£å‘ &#125;); _animationController.forward(); // å¯åŠ¨åŠ¨ç”» æŠŠ Center çš„ child æ›¿æ¢æˆä¸€ä¸ª Iconï¼Œå› ä¸ºä¸Šé¢å·²ç»å¯åŠ¨äº†åŠ¨ç”»ï¼Œæ‰€ä»¥ä¸éœ€è¦å†ç”¨ç‚¹å‡»åŽ»å¯åŠ¨äº†ï¼Œè¿è¡ŒåŽå°±ä¼šæ— é™æ”¾å¤§ç¼©å°å¾ªçŽ¯è·‘äº†ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé€šè¿‡è®¾ç½® AnimationController çš„ lowerBound å’Œ upperBound å®žçŽ°äº†åŠ¨ç”»çš„å˜åŒ–èŒƒå›´ï¼ŒæŽ¥ä¸‹æ¥ï¼Œå°†é€šè¿‡ Tween æ¥å®žçŽ°åŠ¨ç”»çš„å˜åŒ–èŒƒå›´ã€‚å…ˆçœ‹ä¸‹ Tween çš„ä¸€äº›ä»‹ç»ã€‚ Tween 1234567891011121314&gt; /// A linear interpolation between a beginning and ending value.&gt; ///&gt; /// [Tween] is useful if you want to interpolate across a range.&gt; ///&gt; /// To use a [Tween] object with an animation, call the [Tween] object's&gt; /// [animate] method and pass it the [Animation] object that you want to&gt; /// modify.&gt; ///&gt; /// You can chain [Tween] objects together using the [chain] method, so that a&gt; /// single [Animation] object is configured by multiple [Tween] objects called&gt; /// in succession. This is different than calling the [animate] method twice,&gt; /// which results in two separate [Animation] objects, each configured with a&gt; /// single [Tween].&gt; Tween æ˜¯ä¸€ä¸ªçº¿æ€§æ’å€¼(å¦‚æžœè¦ä¿®æ”¹è¿åŠ¨çš„æ’å€¼ï¼Œå¯ä»¥é€šè¿‡ CurveTween æ¥ä¿®æ”¹)ï¼Œæ‰€ä»¥åœ¨çº¿æ€§å˜åŒ–çš„æ—¶å€™å¾ˆæœ‰ç”¨ é€šè¿‡è°ƒç”¨ Tween çš„ animate æ–¹æ³•ç”Ÿæˆä¸€ä¸ª Animation(animate ä¸€èˆ¬ä¼ å…¥ AnimationController) è¿˜å¯ä»¥é€šè¿‡ chain æ–¹æ³•å°†å¤šä¸ª Tween ç»“åˆåˆ°ä¸€èµ·ï¼Œè¿™æ ·å°±ä¸éœ€è¦å¤šæ¬¡åŽ»è°ƒç”¨ Tween çš„ animate æ–¹æ³•æ¥ç”ŸæˆåŠ¨ç”»äº†ï¼Œå¤šæ¬¡è°ƒç”¨ animate ç›¸å½“äºŽä½¿ç”¨äº†ä¸¤ä¸ªåˆ†å¼€çš„åŠ¨ç”»æ¥å®Œæˆæ•ˆæžœï¼Œä½†æ˜¯ chain ç»“åˆåˆ°ä¸€èµ·å°±æ˜¯ä¸€ä¸ªåŠ¨ç”»è¿‡ç¨‹ é‚£ä¹ˆå¯¹å‰é¢çš„åŠ¨ç”»è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œé€šè¿‡ Tween æ¥æŽ§åˆ¶å€¼çš„å˜åŒ– 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class _AnimationDemoPageState extends State&lt;AnimationDemoPage&gt; with TickerProviderStateMixin &#123; AnimationController _animationController; Animation _scaleAnimation; // åŠ¨ç”»å®žä¾‹ï¼Œç”¨äºŽä¿®æ”¹å€¼çš„å¤§å° @override void initState() &#123; super.initState(); _animationController = AnimationController(vsync: this, duration: Duration(milliseconds: 1000)); // ä¸é€šè¿‡ `lowerBound` å’Œ `upperBound` è®¾ç½®èŒƒå›´ï¼Œæ”¹ç”¨ `Tween` // å½“åŠ¨ç”»å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œé‡ç»˜ä¸‹ icon _animationController.addListener(() &#123; setState(() &#123;&#125;); &#125;); _animationController.addStatusListener((status) &#123; if (_animationController.status == AnimationStatus.completed) _animationController.reverse(); else if (_animationController.status == AnimationStatus.dismissed) _animationController.forward(); &#125;); // é€šè¿‡ `Tween` çš„ `animate` ç”Ÿæˆä¸€ä¸ª Animation // å†é€šè¿‡ Animation.value è¿›è¡Œå€¼çš„ä¿®æ”¹ _scaleAnimation = Tween(begin: 28.0, end: 50.0).animate(_animationController); _animationController.forward(); &#125; @override void dispose() &#123; // ä¸€å®šè¦é‡Šæ”¾èµ„æº _animationController.dispose(); super.dispose(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Animation Demo'), ), body: Center( // é€šè¿‡åŠ¨ç”»è¿”å›žçš„å€¼ï¼Œä¿®æ”¹å›¾æ ‡çš„å¤§å° child: Icon(Icons.favorite, color: Colors.red, size: _scaleAnimation.value), ), ); &#125;&#125; å†æ¬¡è¿è¡Œï¼Œè¿˜æ˜¯èƒ½è¿‡è¾¾åˆ°ä¹‹å‰çš„æ•ˆæžœï¼Œé‚£ä¹ˆå¾ˆå¤šå°ä¼™ä¼´è‚¯å®šä¼šé—®äº†ï¼Œã€Œ**ï¼ŒåŠ äº†é‚£ä¹ˆå¤šä»£ç ï¼Œæ•ˆæžœè¿˜æ˜¯å’Œä»¥å‰çš„ä¸€æ ·ï¼Œè¿˜ä¸å¦‚ä¸åŠ â€¦ã€å¥½å§ï¼Œæˆ‘æ— æ³•åé©³ï¼Œä½†æ˜¯å¦‚æžœè¦å®žçŽ°å¤šä¸ªåŠ¨ç”»å‘¢ï¼Œé‚£ä¹ˆä½¿ç”¨ Tween å°±æœ‰ä¼˜åŠ¿äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬è®©å›¾æ ‡å¤§å°å˜åŒ–çš„åŒæ—¶ï¼Œé¢œè‰²å’Œä½ç½®ä¹Ÿå‘ç”Ÿå˜åŒ–ï¼Œåªé€šè¿‡ AnimationController è¦æ€Žä¹ˆå®žçŽ°? åˆæ¯”å¦‚è¯´ï¼Œè¿åŠ¨çš„æ–¹å¼è¦å…ˆåŠ é€ŸåŽå‡é€Ÿï¼Œé‚£åªé€šè¿‡ AnimationController è¦å¦‚ä½•å®žçŽ°ï¼Ÿè¿™äº›é—®é¢˜é€šè¿‡ Tween å°±ä¼šéžå¸¸æ–¹ä¾¿è§£å†³ï¼Œç›´æŽ¥ä¸Šä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960class _AnimationDemoPageState extends State&lt;AnimationDemoPage&gt; with TickerProviderStateMixin &#123; AnimationController _animationController; Animation _scaleAnimation; // ç”¨äºŽæŽ§åˆ¶å›¾æ ‡å¤§å° Animation&lt;Color&gt; _colorAnimation; // æŽ§åˆ¶å›¾æ ‡é¢œè‰² Animation&lt;Offset&gt; _positionAnimation; // æŽ§åˆ¶å›¾æ ‡ä½ç½® @override void initState() &#123; super.initState(); _animationController = AnimationController(vsync: this, duration: Duration(milliseconds: 2000)); // å½“åŠ¨ç”»å€¼å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œé‡ç»˜ä¸‹ icon _animationController.addListener(() &#123; setState(() &#123;&#125;); &#125;); _animationController.addStatusListener((status) &#123; if (_animationController.status == AnimationStatus.completed) _animationController.reverse(); else if (_animationController.status == AnimationStatus.dismissed) _animationController.forward(); &#125;); // é€šè¿‡ `chain` ç»“åˆ `CurveTween` ä¿®æ”¹åŠ¨ç”»çš„è¿åŠ¨æ–¹å¼ï¼Œæ›²çº¿ç±»åž‹å¯è‡ªè¡Œæ›¿æ¢ _scaleAnimation = Tween(begin: 28.0, end: 50.0).chain(CurveTween(curve: Curves.decelerate)).animate(_animationController); _colorAnimation = ColorTween(begin: Colors.red[200], end: Colors.red[900]) .chain(CurveTween(curve: Curves.easeIn)) .animate(_animationController); _positionAnimation = Tween(begin: Offset(100, 100), end: Offset(300, 300)) .chain(CurveTween(curve: Curves.bounceInOut)) .animate(_animationController); _animationController.forward(); // å¯åŠ¨åŠ¨ç”» &#125; @override void dispose() &#123; _animationController.dispose(); super.dispose(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Animation Demo'), ), body: Stack( children: &lt;Widget&gt;[ Positioned( child: Icon(Icons.favorite, color: _colorAnimation.value, size: _scaleAnimation.value), left: _positionAnimation.value.dx, top: _positionAnimation.value.dy, ) ], ), ); &#125;&#125; é‚£ä¹ˆæœ€åŽçš„æ•ˆæžœå›¾ å½“ç„¶ï¼ŒFlutter ä¸­å·²ç»å®žçŽ°çš„ Tween è¿˜æœ‰å¾ˆå¤šï¼ŒåŒ…æ‹¬ BorderTweenã€TextStyleTweenã€ThemeDataTween ..ç­‰ç­‰ï¼Œå®žçŽ°çš„æ–¹å¼éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥è‡ªå·±æ…¢æ…¢çœ‹ã€‚ AnimationWidgetåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œéƒ½æ˜¯é€šè¿‡ addListener ç›‘å¬åŠ¨ç”»å€¼å˜åŒ–ï¼Œç„¶åŽé€šè¿‡ setState æ–¹æ³•æ¥å®žçŽ°åˆ·æ–°æ•ˆæžœã€‚é‚£ä¹ˆ Flutter ä¹Ÿæä¾›äº†ä¸€ä¸ªéƒ¨ä»¶ AnimationWidget æ¥å®žçŽ°åŠ¨ç”»éƒ¨ä»¶ï¼Œå°±ä¸éœ€è¦ä¸€ç›´ç›‘å¬äº†ï¼Œè¿˜æ˜¯å®žçŽ°ä¸Šé¢çš„ä¾‹å­ 1234567891011121314151617181920212223242526class RunningHeart extends AnimatedWidget &#123; final List&lt;Animation&gt; animations; // ä¼ å…¥åŠ¨ç”»åˆ—è¡¨ final AnimationController animationController; // æŽ§åˆ¶åŠ¨ç”» RunningHeart(&#123;this.animations, this.animationController&#125;) // å¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡Œé™åˆ¶(å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸åšé™åˆ¶) : assert(animations.length == 3), assert(animations[0] is Animation&lt;Color&gt;), assert(animations[1] is Animation&lt;double&gt;), assert(animations[2] is Animation&lt;Offset&gt;), super(listenable: animationController); @override Widget build(BuildContext context) &#123; return Stack( children: &lt;Widget&gt;[ Positioned( // ä¹‹å‰çš„ animation éƒ½é€šè¿‡ animations å‚æ•°ä¼ å…¥åˆ° `AnimationWidget` child: Icon(Icons.favorite, color: animations[0].value, size: animations[1].value), left: animations[2].value.dx, top: animations[2].value.dy, ) ], ); &#125;&#125; å…¶å®žå†…éƒ¨è¿”å›žçš„éƒ¨ä»¶å’Œå‰é¢çš„æ˜¯ä¸€æ ·çš„ æŽ¥ç€å¯¹ _AnimationDemoPageState ç±»è¿›è¡Œä¿®æ”¹ï¼Œæ³¨é‡Š initState ä¸­çš„ _animationController.addListener æ‰€æœ‰å†…å®¹ï¼Œç„¶åŽå°† body å±žæ€§æ›¿æ¢æˆæ–°å»ºçš„ RunningHeart éƒ¨ä»¶ï¼Œè®°å¾—ä¼ å…¥çš„åŠ¨ç”»åˆ—è¡¨çš„é¡ºåº 1234body: RunningHeart( animations: [_colorAnimation, _scaleAnimation, _positionAnimation], animationController: _animationController, ) è¿™æ ·å°±å®žçŽ°äº†åˆšæ‰ä¸€æ ·çš„æ•ˆæžœï¼Œå¹¶ä¸”æ²¡æœ‰ä¸€ç›´è°ƒç”¨ setState æ¥åˆ·æ–°ã€‚ è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ animation_main.dart æ–‡ä»¶ StaggeredAnimationsFlutter è¿˜æä¾›äº†äº¤é”™åŠ¨ç”»ï¼Œå¬åå­—å°±å¯ä»¥çŸ¥é“ï¼Œæ˜¯æŒ‰ç…§æ—¶é—´è½´ï¼Œè¿›è¡Œä¸åŒçš„åŠ¨ç”»ï¼Œå¹¶ä¸”ç”±åŒä¸ªAnimationController è¿›è¡ŒæŽ§åˆ¶ã€‚å› ä¸ºæ²¡æœ‰æ‰¾åˆ°å¥½çš„ä¾‹å­ï¼ŒåŽŸè°…æˆ‘ç›´æŽ¥æ¬å®˜æ–¹çš„ä¾‹å­æ¥è®²ï¼Œå®˜æ–¹äº¤é”™åŠ¨ç”» demo åœ¨ç»§ç»­çœ‹ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸‹ Interval 12345&gt; /// An [Interval] can be used to delay an animation. For example, a six second&gt; /// animation that uses an [Interval] with its [begin] set to 0.5 and its [end]&gt; /// set to 1.0 will essentially become a three-second animation that starts&gt; /// three seconds later.&gt; Interval ç”¨æ¥å»¶è¿ŸåŠ¨ç”»ï¼Œä¾‹å¦‚ä¸€ä¸ªæ—¶é•¿ 6s çš„åŠ¨ç”»ï¼Œé€šè¿‡ Interval è®¾ç½®å…¶ begin å‚æ•°ä¸º 0.5ï¼Œend å‚æ•°è®¾ç½®ä¸º 1.0ï¼Œé‚£ä¹ˆè¿™ä¸ªåŠ¨ç”»å°±ä¼šå˜æˆ 3s çš„åŠ¨ç”»ï¼Œå¹¶ä¸”å¼€å§‹çš„æ—¶é—´å»¶è¿Ÿäº† 3sã€‚ äº†è§£ Interval åŠŸèƒ½åŽï¼Œå°±å¯ä»¥çœ‹ä¸‹å®žä¾‹äº†ï¼Œå½“ç„¶æˆ‘ä»¬ä¸å’Œå®˜æ–¹çš„ demo ä¸€æ ·ï¼Œä¸­é—´åŠ ä¸ªæ—‹è½¬åŠ¨ç”» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162class StaggeredAnim extends StatelessWidget &#123; final AnimationController controller; final Animation&lt;double&gt; opacity; final Animation&lt;double&gt; width; final Animation&lt;double&gt; height; final Animation&lt;EdgeInsets&gt; padding; final Animation&lt;BorderRadius&gt; border; final Animation&lt;Color&gt; color; final Animation&lt;double&gt; rotate; StaggeredAnim(&#123;Key key, this.controller&#125;): // widget é€æ˜Žåº¦ opacity = Tween(begin: 0.0, end: 1.0) .animate(CurvedAnimation(parent: controller, curve: Interval(0.0, 0.1, curve: Curves.ease))), // widget å®½ width = Tween(begin: 50.0, end: 150.0) .animate(CurvedAnimation(parent: controller, curve: Interval(0.1, 0.250, curve: Curves.ease))), // widget é«˜ height = Tween(begin: 50.0, end: 150.0) .animate(CurvedAnimation(parent: controller, curve: Interval(0.25, 0.375, curve: Curves.ease))), // widget åº•éƒ¨è·ç¦» padding = EdgeInsetsTween(begin: const EdgeInsets.only(top: 150.0), end: const EdgeInsets.only(top: .0)) .animate(CurvedAnimation(parent: controller, curve: Interval(0.25, 0.375, curve: Curves.ease))), // widget æ—‹è½¬ rotate = Tween(begin: 0.0, end: 0.25) .animate(CurvedAnimation(parent: controller, curve: Interval(0.375, 0.5, curve: Curves.ease))), // widget å¤–å½¢ border = BorderRadiusTween(begin: BorderRadius.circular(5.0), end: BorderRadius.circular(75.0)) .animate(CurvedAnimation(parent: controller, curve: Interval(0.5, 0.75, curve: Curves.ease))), // widget é¢œè‰² color = ColorTween(begin: Colors.blue, end: Colors.orange) .animate(CurvedAnimation(parent: controller, curve: Interval(0.75, 1.0, curve: Curves.ease))), super(key: key); Widget _buildAnimWidget(BuildContext context, Widget child) &#123; return Container( padding: padding.value, alignment: Alignment.center, // æ—‹è½¬å˜åŒ– child: RotationTransition( turns: rotate, // turns è¡¨ç¤ºå½“å‰åŠ¨ç”»çš„å€¼ * 360Â° è§’åº¦ child: Opacity( opacity: opacity.value, // é€æ˜Žåº¦å˜åŒ– child: Container( width: width.value, // å®½åº¦å˜åŒ– height: height.value, // é«˜åº¦å˜åŒ– decoration: BoxDecoration( color: color.value, // é¢œè‰²å˜åŒ– border: Border.all(color: Colors.indigo[300], width: 3.0), borderRadius: border.value), // å¤–å½¢å˜åŒ– ), ), ), ); &#125; @override Widget build(BuildContext context) &#123; // AnimatedBuilder ç»§æ‰¿ AnimationWidgetï¼Œç”¨æ¥å¿«é€Ÿæž„å»ºåŠ¨ç”»éƒ¨ä»¶ return AnimatedBuilder(animation: controller, builder: _buildAnimWidget); &#125;&#125; ç„¶åŽä¿®æ”¹ body çš„å‚æ•°ï¼Œè®¾ç½®æˆæˆ‘ä»¬çš„åŠ¨ç”»ï¼Œå½“ç‚¹å‡»çš„æ—¶å€™å°±ä¼šå¯åŠ¨åŠ¨ç”» 1234567891011121314GestureDetector( behavior: HitTestBehavior.opaque, onTap: _playAnim, child: Center( // å®šä¹‰ä¸€ä¸ªå¤–å±‚åœˆï¼Œèƒ½å¤Ÿä½¿åŠ¨ç”»æ˜¾çœ¼ç‚¹ child: Container( width: 300, height: 300, decoration: BoxDecoration( color: Colors.black.withOpacity(0.1), border: Border.all(color: Colors.black.withOpacity(0.5))), child: StaggeredAnim(controller: _controller), ), ), ) çœ‹ä¸‹æœ€åŽçš„æ•ˆæžœå§ è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ staggered_animation_main.dart æ–‡ä»¶ ç»“æŸå‰ï¼Œæˆ‘ä»¬å†è®²ä¸€ç§æ¯”è¾ƒç®€å•çš„ Hreo åŠ¨ç”»ï¼Œç”¨æ¥è¿‡æ¸¡ç”¨ã€‚ Heroé€šè¿‡æŒ‡å®š Hero ä¸­çš„ tagï¼Œåœ¨åˆ‡æ¢çš„æ—¶å€™ Hero ä¼šå¯»æ‰¾ç›¸åŒçš„ tagï¼Œå¹¶å®žçŽ°åŠ¨ç”»ï¼Œå…·ä½“çš„å®žçŽ°é€»è¾‘ï¼Œè¿™é‡Œå¯ä»¥æŽ¨èä¸€ç¯‡æ–‡ç«  è°ˆä¸€è°ˆFlutterä¸­çš„å…±äº«å…ƒç´ åŠ¨ç”»Heroï¼Œé‡Œé¢å†™çš„å¾ˆè¯¦ç»†ï¼Œå°±ä¸é€ è½¦è½®äº†ã€‚å½“ç„¶è¿™è¾¹è¿˜æ˜¯å¾—æä¾›ä¸ªç®€å•çš„ demo çš„ï¼Œæ›¿æ¢å‰é¢çš„ body å‚æ•° 12345678910body: Container( alignment: Alignment.center, child: InkWell( child: Hero( tag: 'hero_tag', // è¿™é‡ŒæŒ‡å®š tag child: Image.asset('images/ali.jpg', width: 100.0, height: 100.0), ), onTap: () =&gt; Navigator.push(context, MaterialPageRoute(builder: (_) =&gt; HeroPage())), ), ) ç„¶åŽåˆ›å»º HeroPage ç•Œé¢ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ä¸ª Dialogï¼Œåªè¦é€šè¿‡è·¯ç”±å®žçŽ°å³å¯ 1234567891011121314class HeroPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( body: Container( alignment: Alignment.center, child: InkWell( child: Hero(tag: 'hero_tag', child: Image.asset('images/ali.jpg', width: 200.0, height: 200.0)), onTap: () =&gt; Navigator.pop(context), ), ), ); &#125;&#125; çœ‹ä¸‹æœ€åŽçš„æ•ˆæžœå›¾ï¼š è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ animation_main.dart æ–‡ä»¶ è¿™ä¸€éƒ¨åˆ†è®²çš„æ¯”è¾ƒå¤šï¼Œå°ä¼™ä¼´å¯ä»¥æ…¢æ…¢æ¶ˆåŒ–ï¼Œä¸‹èŠ‚æˆ‘ä¼šå°½é‡å¡«ä¸‹ä¹‹å‰ç•™ä¸‹çš„çŠ¶æ€ç®¡ç†çš„å‘ã€‚ æœ€åŽä»£ç çš„åœ°å€è¿˜æ˜¯è¦çš„ï¼š æ–‡ç« ä¸­æ¶‰åŠçš„ä»£ç ï¼šdemos åŸºäºŽéƒ­ç¥ž cool weather æŽ¥å£çš„ä¸€ä¸ªé¡¹ç›®ï¼Œå®žçŽ° BLoC æ¨¡å¼ï¼Œå®žçŽ°çŠ¶æ€ç®¡ç†ï¼šflutter_weather ä¸€ä¸ªè¯¾ç¨‹(å½“æ—¶ä¹°äº†æƒ³çœ‹ä¸‹ä»£ç è§„èŒƒçš„ï¼Œä»£ç æ›´æ–°ä¼šæ¯”è¾ƒæ…¢ï¼Œè™½ç„¶æ˜¯è·Ÿç€è¯¾ä¸Šçš„ä¸€äº›å†™ä»£ç ï¼Œä½†æ˜¯è¿˜æ˜¯åšäº†è‡ªå·±çš„ä¿®æ”¹ï¼Œå¾ˆå¤šåœ°æ–¹çœ‹ç€ä¸èˆ’æœï¼Œç„¶åŽå°±æ”¹æˆè‡ªå·±çš„å®žçŽ°æ–¹å¼äº†)ï¼šflutter_shop]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(ä¹)ä¹‹å¼¹çª—å’Œæç¤º(SnackBarã€BottomSheetã€Dialog)]]></title>
    <url>%2Fposts%2F5da6faeb.html</url>
    <content type="text"><![CDATA[å‰é¢çš„å°èŠ‚æŠŠå¸¸ç”¨çš„ä¸€äº›éƒ¨ä»¶éƒ½ä»‹ç»äº†ï¼Œè¿™èŠ‚ä»‹ç»ä¸‹ Flutter ä¸­çš„ä¸€äº›æ“ä½œæç¤ºã€‚Flutter ä¸­çš„æ“ä½œæç¤ºä¸»è¦æœ‰è¿™ä¹ˆå‡ ç§ SnackBarã€BottomSheetã€Dialogï¼Œå› ä¸º Dialog æ ·å¼æ¯”è¾ƒå¤šï¼Œæ”¾æœ€åŽè®²å¥½äº† SnackBarSnackBar çš„æºç ç›¸å¯¹ç®€å• 12345678const SnackBar(&#123; Key key, @required this.content, // æç¤ºä¿¡æ¯ this.backgroundColor, // èƒŒæ™¯è‰² this.action, // SnackBar å°¾éƒ¨çš„æŒ‰é’®ï¼Œç”¨äºŽä¸€äº›å›žé€€æ“ä½œç­‰ this.duration = _kSnackBarDisplayDuration, // åœç•™çš„æ—¶é•¿ï¼Œé»˜è®¤ 4000ms this.animation, // è¿›å‡ºåŠ¨ç”» &#125;) ä¾‹å¦‚æˆ‘ä»¬éœ€è¦å®žçŽ°ä¸€ä¸ªåŠŸèƒ½ï¼Œä¿®æ”¹æŸä¸ªå€¼ï¼Œä¿®æ”¹åŽç»™ç”¨æˆ·ä¸€ä¸ªæç¤ºï¼ŒåŒæ—¶ç»™ç”¨æˆ·ä¸€ä¸ªæ’¤é”€è¯¥æ“ä½œçš„æŒ‰é’®ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ SnackBar æ¥ç®€å•å®žçŽ°ã€‚è¿˜æœ‰å°±æ˜¯ SnackBar å¯ä»¥å’Œ floatingActionButton å®Œç¾Žçš„é…åˆï¼Œå¼¹å‡ºçš„æ—¶å€™ä¸ä¼šé®æŒ¡ä½ fab 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class _PromptDemoPageState extends State&lt;PromptDemoPage&gt; &#123; var count = 0; @override void initState() &#123; super.initState(); &#125; @override void dispose() &#123; super.dispose(); &#125; // è‡ªå¢žæ“ä½œ increase() &#123; setState(() =&gt; count++); &#125; // è‡ªå‡æ“ä½œ decrease() &#123; setState(() =&gt; count--); &#125; _changeValue(BuildContext context) &#123; increase(); Scaffold.of(context).showSnackBar(SnackBar( content: Text('å½“å‰å€¼å·²ä¿®æ”¹'), action: SnackBarAction(label: 'æ’¤é”€', onPressed: decrease), duration: Duration(milliseconds: 2000))); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Prompt Demo'), ), body: Column(children: &lt;Widget&gt;[ Text('å½“å‰å€¼ï¼š$count', style: TextStyle(fontSize: 20.0)), Expanded( // ä¸ºäº†æ–¹ä¾¿æ‹“å±•ï¼Œæˆ‘è¿™è¾¹æå–äº† `snackBar` çš„æ–¹æ³•ï¼Œå¹¶æŠŠæŒ‰é’®æ”¾åœ¨åˆ—è¡¨ child: ListView(padding: const EdgeInsets.symmetric(horizontal: 12.0, vertical: 8.0), children: &lt;Widget&gt;[ // SnackBar éœ€è¦æä¾›ä¸€ä¸ªåŒ…å« contextï¼Œä½†æ˜¯ context ä¸èƒ½æ˜¯ Scaffold èŠ‚ç‚¹ä¸‹çš„ contextï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ Builder åŒ…è£¹ä¸€å±‚ Builder(builder: (context) =&gt; RaisedButton(onPressed: () =&gt; _changeValue(context), child: Text('ä¿®æ”¹å½“å‰å€¼'))), ])) ]), // å½“ SnackBar å¼¹å‡ºæ—¶ï¼Œfab ä¼šä¸Šç§»ä¸€æ®µè·ç¦» floatingActionButton: Builder( builder: (context) =&gt; FloatingActionButton(onPressed: () =&gt; _changeValue(context), child: Icon(Icons.send))), ); &#125;&#125; å¯ä»¥çœ‹ä¸‹æœ€åŽçš„æ•ˆæžœå›¾ï¼Œè¯·æ³¨æ„çœ‹ fab å’Œå€¼çš„å˜åŒ–ï¼š BottomSheetBottomSheet çœ‹å‘½åå°±çŸ¥é“æ˜¯ä»Žåº•éƒ¨å¼¹å‡ºçš„èœå•ï¼Œå±•ç¤º BottomSheet æœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ showBottomSheet å’Œ showModalBottomSheetï¼Œä¸¤ç§æ–¹å¼åªæœ‰åœ¨å±•ç¤ºç±»åž‹ä¸Šçš„å·®åˆ«ï¼Œæ–¹æ³•è°ƒç”¨æ— å·®ï¼Œè€Œä¸” showBottomSheet å’Œ fab æœ‰ç»„åˆåŠ¨ç”»ï¼ŒshowModalBottomSheet åˆ™æ²¡æœ‰ï¼Œçœ‹ä¸‹å®žé™…çš„ä¾‹å­å§ã€‚åœ¨ ListView ä¸­å¢žåŠ ä¸€ä¸ª BottomSheet çš„æŒ‰é’®ï¼Œå› ä¸º BottomSheet éœ€è¦çš„ context ä¹Ÿä¸èƒ½æ˜¯ Scaffold ä¸‹çš„ contextï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ Builder è¿›è¡ŒåŒ…è£¹ä¸€å±‚ï¼Œç„¶åŽå¢žåŠ  _showBottomSheet çš„æ–¹æ³• 12345678910111213141516_showBottomSheet(BuildContext context) &#123; showBottomSheet( context: context, builder: (context) =&gt; ListView( // ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨é€‰æ‹©å™¨ children: List.generate( 20, (index) =&gt; InkWell( child: Container(alignment: Alignment.center, height: 60.0, child: Text('Item $&#123;index + 1&#125;')), onTap: () &#123; print('tapped item $&#123;index + 1&#125;'); Navigator.pop(context); &#125;), )), ); &#125; æŠŠ showBottomSheet æ›¿æ¢æˆ showModalBottomSheet å°±æ˜¯å¦å¤–ä¸€ç§å±•ç¤ºæ–¹å¼äº†ï¼Œå†…éƒ¨ä¸éœ€è¦åšä»»ä½•æ”¹å˜ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä¸¤ç§çš„è¿è¡Œæ•ˆæžœï¼š å¯ä»¥çœ‹åˆ° showBottomSheet ä¼šå……æ»¡æ•´ä¸ªå±å¹•ï¼Œç„¶åŽ fab ä¼šè·Ÿéšä¸€èµ·åˆ° AppBar çš„åº•éƒ¨ä½ç½®ï¼Œè€Œ showModalBottomSheet å±•ç¤ºçš„é«˜åº¦ä¸ä¼šè¶…è¿‡åŠä¸ªå±å¹•çš„é«˜åº¦ï¼Œä½†æ˜¯ fab è¢«å…¶é®æŒ¡äº†ã€‚å‡å¦‚æˆ‘ä»¬åªéœ€è¦å±•ç¤º 2-3 ä¸ª itemï¼Œä½†æ˜¯æŒ‰ç…§åˆšæ‰çš„æ–¹å¼ showModalBottomSheet çš„é«˜åº¦å¤ªé«˜äº†ï¼Œé‚£æˆ‘ä»¬å¯ä»¥åœ¨ ListView å¤–å±‚åŒ…è£¹ä¸€å±‚ Containerï¼Œç„¶åŽæŒ‡å®š height å³å¯ 123456789101112131415161718_showModalBottomSheet(BuildContext context) &#123; showModalBottomSheet( context: context, builder: (context) =&gt; Container( child: ListView( children: List.generate( 2, (index) =&gt; InkWell( child: Container(alignment: Alignment.center, height: 60.0, child: Text('Item $&#123;index + 1&#125;')), onTap: () &#123; print('tapped item $&#123;index + 1&#125;'); Navigator.pop(context); &#125;), )), height: 120, ), ); &#125; ä¿®æ”¹é«˜åº¦åŽçš„æ•ˆæžœï¼š Dialogç›¸å¯¹äºŽ SnackBar å’Œ BottomSheetï¼ŒDialog çš„ä½¿ç”¨åœºæ™¯ç›¸å¯¹ä¼šæ›´å¤šï¼Œåœ¨ MaterialDesign ä¸‹ï¼ŒDialog ä¸»è¦æœ‰ 3 ç§ï¼šAlertDialogï¼ŒSimpleDialog å’Œ AboutDialogï¼Œå½“ç„¶åœ¨ Cupertino é£Žæ ¼ä¸‹ä¹Ÿæœ‰ç›¸åº”çš„ Dialogï¼Œå› ä¸ºè¿™ä¸ªç³»åˆ—ä»¥ MaterialDesign é£Žæ ¼ä¸ºä¸»ï¼Œæ‰€ä»¥ Cupertiono ç­‰ä¸‹æ¬¡æœ‰æ—¶é—´å†å†™å§ã€‚ AlertDialogåœ¨ ListView ä¸­å¢žåŠ ä¸€ä¸ª AlertDialog çš„æŒ‰é’®ï¼Œç”¨äºŽç‚¹å‡»æ˜¾ç¤º AlertDialog ç”¨ï¼Œç„¶åŽåŠ å…¥æ˜¾ç¤º AlertDilaog çš„æ–¹æ³•ï¼Œå¹¶å°†æŒ‰é’®çš„ onPressed æŒ‡å‘è¯¥æ–¹æ³•ï¼ŒDialog çš„ context å¯ä»¥æ˜¯ Scaffold ä¸‹çš„ contextï¼Œæ‰€ä»¥ä¸éœ€è¦ç”¨ Builder æ¥åŒ…è£¹ä¸€å±‚ã€‚ 1234567891011121314151617181920212223242526_showAlertDialog() &#123; showDialog( // è®¾ç½®ç‚¹å‡» dialog å¤–éƒ¨ä¸å–æ¶ˆ dialogï¼Œé»˜è®¤èƒ½å¤Ÿå–æ¶ˆ barrierDismissible: false, context: context, builder: (context) =&gt; AlertDialog( title: Text('æˆ‘æ˜¯ä¸ªæ ‡é¢˜...å—¯ï¼Œæ ‡é¢˜..'), titleTextStyle: TextStyle(color: Colors.purple), // æ ‡é¢˜æ–‡å­—æ ·å¼ content: Text(r'æˆ‘æ˜¯å†…å®¹\(^o^)/~, æˆ‘æ˜¯å†…å®¹\(^o^)/~, æˆ‘æ˜¯å†…å®¹\(^o^)/~'), contentTextStyle: TextStyle(color: Colors.green), // å†…å®¹æ–‡å­—æ ·å¼ backgroundColor: CupertinoColors.white, elevation: 8.0, // æŠ•å½±çš„é˜´å½±é«˜åº¦ semanticLabel: 'Label', // è¿™ä¸ªç”¨äºŽæ— éšœç¢ä¸‹å¼¹å‡º dialog çš„æç¤º shape: Border.all(), // dialog çš„æ“ä½œæŒ‰é’®ï¼Œactions çš„ä¸ªæ•°å°½é‡æŽ§åˆ¶ä¸è¦è¿‡å¤šï¼Œå¦åˆ™ä¼šæº¢å‡º `Overflow` actions: &lt;Widget&gt;[ // ç‚¹å‡»å¢žåŠ æ˜¾ç¤ºçš„å€¼ FlatButton(onPressed: increase, child: Text('ç‚¹æˆ‘å¢žåŠ ')), // ç‚¹å‡»å‡å°‘æ˜¾ç¤ºçš„å€¼ FlatButton(onPressed: decrease, child: Text('ç‚¹æˆ‘å‡å°‘')), // ç‚¹å‡»å…³é—­ dialogï¼Œéœ€è¦é€šè¿‡ Navigator è¿›è¡Œæ“ä½œ FlatButton(onPressed: () =&gt; Navigator.pop(context), child: Text('ä½ ç‚¹æˆ‘è¯•è¯•.')), ], )); &#125; æœ€åŽçœ‹ä¸‹æ•ˆæžœï¼š SimpleDialogSimpleDialog ç›¸æ¯”äºŽ AlertDialog å°‘äº† content å’Œ action å‚æ•°ï¼Œå¤šäº† children å±žæ€§ï¼Œéœ€è¦ä¼ å…¥ Widget åˆ—è¡¨ï¼Œé‚£å°±å¯ä»¥è‡ªå®šä¹‰å…¨éƒ¨å†…å®¹äº†ã€‚é‚£æˆ‘ä»¬è¿™é‡Œå°±å®žçŽ°ä¸€ä¸ªæ€§åˆ«é€‰æ‹©çš„ Dialogï¼Œé€‰æ‹©åŽé€šè¿‡ Taost æç¤ºé€‰æ‹©çš„å†…å®¹ï¼ŒTaost å°±æ˜¯ä¹‹å‰å¯¼å…¥çš„ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå…ˆçœ‹ä¸‹æ•ˆæžœå›¾å§ åªè¦å®žçŽ° children æ˜¯ä¸ªåˆ—è¡¨é€‰æ‹©å™¨å°±å¯ä»¥äº†ï¼Œæ¯”è¾ƒç®€å•ï¼Œç›´æŽ¥ä¸Šä»£ç  123456789101112131415161718_showSimpleDialog() &#123; showDialog( barrierDismissible: false, context: context, builder: (context) =&gt; SimpleDialog( title: Text('æˆ‘æ˜¯ä¸ªæ¯”è¾ƒæ­£ç»çš„æ ‡é¢˜...\né€‰æ‹©ä½ çš„æ€§åˆ«'), // è¿™é‡Œä¼ å…¥ä¸€ä¸ªé€‰æ‹©å™¨åˆ—è¡¨å³å¯ children: _genders .map((gender) =&gt; InkWell( child: Container(height: 40.0, child: Text(gender), alignment: Alignment.center), onTap: () &#123; Navigator.pop(context); Fluttertoast.showToast(msg: 'ä½ é€‰æ‹©çš„æ€§åˆ«æ˜¯ $gender'); &#125;, )) .toList(), )); &#125; AboutDialogAboutDialog ä¸»è¦æ˜¯ç”¨äºŽå±•ç¤ºä½ çš„ App æˆ–è€…åˆ«çš„ç›¸å…³ä¸œè¥¿çš„å†…å®¹ä¿¡æ¯çš„ï¼Œå¹³æ—¶ç”¨çš„æ¯”è¾ƒå°‘ï¼Œæ˜¾ç¤º AboutDialog æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å±•ç¤ºï¼Œä¸€ç§æ˜¯å‰é¢ä¸€æ ·çš„ showDialog æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ª AboutDialog å®žä¾‹ï¼Œè¿˜æœ‰ä¸­æ–¹æ³•æ˜¯ç›´æŽ¥è°ƒç”¨ showAboutDialog æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜æ˜¯ä¸€æ ·åœ¨åˆ—è¡¨åŠ ä¸ªæŒ‰é’®ï¼Œå¹¶æŒ‡å‘æ˜¾ç¤º AboutDialog çš„äº‹ä»¶ã€‚ 1234567891011121314151617_showAboutDialog() &#123; showDialog( barrierDismissible: false, context: context, builder: (context) =&gt; AboutDialog( // App çš„åå­— applicationName: 'Flutter å…¥é—¨æŒ‡åŒ—', // App çš„ç‰ˆæœ¬å· applicationVersion: '0.1.1', // App åŸºæœ¬ä¿¡æ¯ä¸‹é¢ä¼šæ˜¾ç¤ºä¸€è¡Œå°å­—ï¼Œä¸»è¦ç”¨æ¥æ˜¾ç¤ºç‰ˆæƒä¿¡æ¯ applicationLegalese: 'Copyright: this is a copyright notice topically', // App çš„å›¾æ ‡ applicationIcon: Icon(Icons.android, size: 28.0, color: CupertinoColors.activeBlue), // ä»»ä½•ä½ æƒ³å±•ç¤ºçš„ children: &lt;Widget&gt;[Text('æˆ‘æ˜¯ä¸ªæ¯”è¾ƒæ­£ç»çš„å¯¹è¯æ¡†å†…å®¹...ä½ å¯ä»¥éšä¾¿æŠŠæˆ‘æ›¿æ¢æˆä»»ä½•éƒ¨ä»¶ï¼Œåªè¦ä½ å–œæ¬¢(*^â–½^*)')], )); &#125; ä¹Ÿå¯ä»¥é€šè¿‡ showAboutDialog å®žçŽ°åŒæ ·çš„æ•ˆæžœ 12345678910_showAboutDialog() &#123; showAboutDialog( context: context, applicationName: 'Flutter å…¥é—¨æŒ‡åŒ—', applicationVersion: '0.1.1', applicationLegalese: 'Copyright: this is a copyright notice topically', applicationIcon: Image.asset('images/app_icon.png', width: 40.0, height: 40.0), children: &lt;Widget&gt;[Text('æˆ‘æ˜¯ä¸ªæ¯”è¾ƒæ­£ç»çš„å¯¹è¯æ¡†å†…å®¹...ä½ å¯ä»¥éšä¾¿æŠŠæˆ‘æ›¿æ¢æˆä»»ä½•éƒ¨ä»¶ï¼Œåªè¦ä½ å–œæ¬¢(*^â–½^*)')], );&#125; æœ€åŽçš„æ•ˆæžœï¼š AboutDialog ä¼šè‡ªå¸¦ä¸¤ä¸ªæŒ‰é’® VIEW LICENSES å’Œ CLOSEï¼ŒVIEW LICENSES ä¼šè·³è½¬ä¸€ä¸ª Flutter Licenses çš„ç½‘é¡µï¼ŒCLOSE ä¼šå…³é—­ï¼Œè‡³äºŽä¸ºä»€ä¹ˆæ˜¯è‹±æ–‡çš„ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰è®¾ç½®è¯­è¨€çš„åŽŸå› ï¼Œè¿™ä¸ªæ¶‰åŠåˆ°å¤šè¯­è¨€ï¼Œè¿™è¾¹æŽ¨èå‡ ç¯‡ä¹‹å‰çœ‹è¿‡çš„æ–‡ç« ï¼Œå¦‚æžœä¸‹æ¬¡æœ‰æ—¶é—´çš„è¯ä¼šå•ç‹¬æ‹¿å‡ºæ¥è®²ä¸‹ è‹±æ–‡åŽŸç‰ˆå¤šè¯­è¨€è®¾ç½®ï¼Œä»‹ç»ä¸¤ç§æ–¹å¼å®žçŽ° å›½äººç¿»è¯‘ç‰ˆï¼ŒæœªæŒç»­æ›´æ–°ç¬¬äºŒç§æ–¹å¼ ä½¿ç”¨æ’ä»¶ in18 ç‰ˆ è¿™è¾¹ä¸ºäº†æ”¯æŒä¸­æ–‡ï¼Œæˆ‘ä»¬åšä¸‹å¦‚ä¸‹çš„ä¿®æ”¹ï¼Œé¦–å…ˆæ‰“å¼€ pubspec.ymal æ–‡ä»¶åŠ å…¥å¦‚ä¸‹æ”¯æŒ get package åŽç»™ MaterialApp åŠ å…¥å¦‚ä¸‹å±žæ€§ï¼Œè¿™æ ·å°±ä¼šæ”¯æŒä¸­æ–‡äº†ï¼Œè¿™é‡Œéœ€è¦å¯¼å…¥åŒ… package:flutter_localizations/flutter_localizations.dartï¼Œå†æ¬¡è¿è¡Œï¼Œå°±ä¼šå‘çŽ°ä¹‹å‰çš„è‹±æ–‡å˜æˆä¸­æ–‡äº†ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è®¾ç½®æˆåˆ«çš„è¯­è¨€ã€‚ Dialog çŠ¶æ€ä¿æŒå‡å¦‚æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨å¼¹å‡ºçš„ Dialog æ˜¾ç¤ºå½“å‰è¢«æ”¹å˜çš„å€¼ï¼Œç„¶åŽé€šè¿‡æŒ‰é’®å¯ä»¥ä¿®æ”¹è¿™ä¸ªå€¼ ï¼Œè¯¥å¦‚ä½•å®žçŽ°ã€‚ç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´éƒ½ä¼šè¿™ä¹ˆè®¤ä¸ºï¼Œé€šè¿‡ setState æ¥ä¿®æ”¹ä¸å°±è¡Œäº†å—ï¼Œæ²¡é”™ï¼Œæˆ‘ä¸€å¼€å§‹çš„ç¡®è¿™ä¹ˆåŽ»å®žçŽ°çš„ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹ä»£ç å¥½äº†ï¼Œå¢žåŠ ä¸€ä¸ª DialogState æŒ‰é’®ï¼Œç„¶åŽæŒ‡å‘å¯¹åº”çš„ç‚¹å‡»äº‹ä»¶ 1234567891011121314151617181920212223242526272829_showStateDialog() &#123; showDialog( context: context, barrierDismissible: false, builder: (context) =&gt; SimpleDialog( title: Text(&apos;æˆ‘è¿™è¾¹èƒ½å®žæ—¶ä¿®æ”¹çŠ¶æ€å€¼&apos;), contentPadding: const EdgeInsets.symmetric(horizontal: 12.0, vertical: 8.0), children: &lt;Widget&gt;[ Text(&apos;å½“å‰çš„å€¼æ˜¯ï¼š $_count&apos;, style: TextStyle(fontSize: 18.0)), Padding( padding: const EdgeInsets.symmetric(vertical: 12.0), child: Row(mainAxisAlignment: MainAxisAlignment.spaceAround, children: &lt;Widget&gt;[ RaisedButton( onPressed: increase, child: Text(&apos;ç‚¹æˆ‘è‡ªå¢ž&apos;), ), RaisedButton( onPressed: decrease, child: Text(&apos;ç‚¹æˆ‘è‡ªå‡&apos;), ), RaisedButton( onPressed: () =&gt; Navigator.pop(context), child: Text(&apos;ç‚¹æˆ‘å…³é—­&apos;), ) ]), ) ], )); &#125; ç„¶åŽæˆ‘ä»¬è¿è¡Œçœ‹ä¸‹ è¯¶è¯¶è¯¶ï¼Œæ€Žä¹ˆ Dialog çš„å€¼ä¸æ”¹å˜å‘¢ï¼Œæ˜Žæ˜Žç•Œé¢ä¸Šçš„å·²ç»ä¿®æ”¹äº†å•Šã€‚æ‰€ä»¥è¯´å›¾æ ·å›¾æ£®ç ´å’¯ï¼Œçœ‹ä¸‹å®˜æ–¹å¯¹ showDialog æ–¹æ³•çš„è§£é‡Šå§ 12345// This function takes a `builder` which typically builds a [Dialog] widget.// Content below the dialog is dimmed with a [ModalBarrier]. The widget// returned by the `builder` does not share a context with the location that// `showDialog` is originally called from. Use a [StatefulBuilder] or a// custom [StatefulWidget] if the dialog needs to update dynamically. ç³Ÿç³•é€çš„ç¿»è¯‘åˆæ¥äº†ï¼šè¯¥æ–¹æ³•é€šè¿‡ builder å‚æ•°æ¥ä¼ å…¥ä¸€ä¸ª Dialog éƒ¨ä»¶ï¼Œdialog ä¸‹çš„å†…å®¹è¢«ä¸€ä¸ªã€Œæ¨¡æ€éšœç¢ã€é˜»éš”ï¼Œbuilder çš„ context å’Œè°ƒç”¨ showDialog æ—¶å€™çš„ context ä¸æ˜¯å…±äº«çš„ï¼Œå¦‚æžœéœ€è¦åŠ¨æ€ä¿®æ”¹ dialog çš„çŠ¶æ€å€¼ï¼Œéœ€è¦é€šè¿‡ StatefulBuilder æˆ–è€…è‡ªå®šä¹‰ dialog ç»§æ‰¿äºŽ StatefulWidget æ¥å®žçŽ° æ‰€ä»¥è§£å†³çš„æ–¹æ³•å¾ˆæ˜Žç¡®ï¼Œå¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œåœ¨å¤–å±‚åµŒå¥—ä¸€ä¸ª StatefulBuilder éƒ¨ä»¶ 12345678910111213141516171819202122232425262728293031323334_showStateDialog() &#123; showDialog( context: context, barrierDismissible: false, // é€šè¿‡ StatefulBuilder æ¥ä¿å­˜ dialog çŠ¶æ€ // builder éœ€è¦ä¼ å…¥ä¸€ä¸ª BuildContext å’Œ StateSetter ç±»åž‹å‚æ•° // StateSetter æœ‰ä¸€ä¸ª VoidCallbackï¼Œä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•åœ¨è¿™å†™ builder: (context) =&gt; StatefulBuilder( builder: (context, dialogStateState) =&gt; SimpleDialog( title: Text('æˆ‘è¿™è¾¹èƒ½å®žæ—¶ä¿®æ”¹çŠ¶æ€å€¼'), contentPadding: const EdgeInsets.symmetric(horizontal: 12.0, vertical: 8.0), children: &lt;Widget&gt;[ Text('å½“å‰çš„å€¼æ˜¯ï¼š $_count', style: TextStyle(fontSize: 18.0)), Padding( padding: const EdgeInsets.symmetric(vertical: 12.0), child: Row(mainAxisAlignment: MainAxisAlignment.spaceAround, children: &lt;Widget&gt;[ RaisedButton( // é€šè¿‡ StatefulBuilder çš„ StateSetter æ¥ä¿®æ”¹å€¼ onPressed: () =&gt; dialogStateState(() =&gt; increase()), child: Text('ç‚¹æˆ‘è‡ªå¢ž'), ), RaisedButton( onPressed: () =&gt; dialogStateState(() =&gt; decrease()), child: Text('ç‚¹æˆ‘è‡ªå‡'), ), RaisedButton( onPressed: () =&gt; Navigator.pop(context), child: Text('ç‚¹æˆ‘å…³é—­'), ) ]), ) ], ))); &#125; ç„¶åŽå†è¿è¡Œä¸‹ï¼Œå¯ä»¥çœ‹åˆ° dialog å’Œç•Œé¢çš„å€¼ä¿æŒä¸€è‡´äº† ä»¥ä¸Šéƒ¨åˆ†ä»£ç æŸ¥çœ‹ prompt_main.dart æ–‡ä»¶ å·®ä¸å¤šå¸¸ç”¨å¼¹çª—å’Œæ“ä½œæç¤ºå°±åœ¨è¿™äº†ï¼Œå¥½å¥½æ¶ˆåŒ–å§~]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(å…«)ä¹‹Sliverç»„ä»¶åŠNestedScrollView]]></title>
    <url>%2Fposts%2Ff600e8a7.html</url>
    <content type="text"><![CDATA[ä¸ŠèŠ‚æœ€åŽç•™äº†ä¸ªå‘åˆ°è¿™èŠ‚æ¥è§£å†³ï¼Œå› ä¸ºæ¶‰åŠéƒ¨ä»¶æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥ç•™åˆ°è¿™è¾¹æ¥ç»§ç»­è®²ï¼Œä¸ç„¶å†™å¤ªå¤šäº†æ€•å°ä¼™ä¼´çœ‹ä¸ä¸‹åŽ» åœ¨ä¸ŠèŠ‚æœ€åŽï¼Œç»™å°ä¼™ä¼´ä»¬å±•ç¤ºäº† SliveGrid å’Œ SliverFixedExtentList çš„ç”¨æ³•ï¼ŒåŸºæœ¬ä¸Šå’Œ GridView å’Œ ListView çš„ç”¨æ³•å·®ä¸å¤šï¼Œæ‰€ä»¥è¿™è¾¹å°±ä¸å¤šè®²è¿™ä¸¤ä¸ªéƒ¨ä»¶äº†ã€‚ SliverAppBarç›¸ä¿¡å¾ˆå¤š Android å¼€å‘çš„å°ä¼™ä¼´ä¼šç”¨åˆ° MaterialDesign çš„ CollapsingToolbarLayout æ¥å®žçŽ°æŠ˜å å¤´éƒ¨ï¼Œæ—¢ç„¶ Android æœ‰çš„ï¼Œé‚£ä¹ˆ Flutter ä¹Ÿä¸ä¼šå°‘ï¼Œæ¯•ç«Ÿ Flutter ä¸»æ‰“çš„ä¹Ÿæ˜¯ MaterialDesign å•Šã€‚é¦–å…ˆçœ‹ä¸‹ SliverAppBar çš„æºç å§ï¼Œå…¶å®žå’Œ AppBar çš„å‚æ•°å·®ä¸å¤šï¼Œåªæ˜¯å¤šäº†ä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„å±žæ€§ 1234567891011121314151617181920212223const SliverAppBar(&#123;Key key,this.leading,this.automaticallyImplyLeading = true,this.title,this.actions,this.flexibleSpace, // é€šè¿‡è¿™ä¸ªæ¥è®¾ç½®èƒŒæ™¯this.bottom,this.elevation,this.forceElevated = false, // æ˜¯å¦æ˜¾ç¤ºå±‚æ¬¡æ„Ÿthis.backgroundColor,this.brightness,this.iconTheme,this.textTheme,this.primary = true,this.centerTitle,this.titleSpacing = NavigationToolbar.kMiddleSpacing,this.expandedHeight, // å±•å¼€çš„é«˜åº¦// ä»¥ä¸‹ä¸‰ä¸ªç­‰ä¾‹å­å†è®²this.floating = false,this.pinned = false,this.snap = false,&#125;) åˆ«çš„å‚æ•°åº”è¯¥ä¸é™Œç”Ÿå§ï¼Œéƒ½æ˜¯ AppBar çš„ï¼Œé‚£ä¹ˆç›´æŽ¥æ¥çœ‹ä¸ªä¾‹å­å§ï¼Œè¿˜æ˜¯é€šè¿‡ä¸ŠèŠ‚è¯´çš„ CustomScrollView æ¥åŒ…è£¹ Sliver éƒ¨ä»¶ 12345678910111213141516171819202122232425262728293031323334353637class SliverDemoPage extends StatelessWidget &#123;@overrideWidget build(BuildContext context) &#123;return Scaffold(body: CustomScrollView(slivers: &lt;Widget&gt;[SliverAppBar(title: Text('Sliver Demo'),centerTitle: true,// å±•å¼€çš„é«˜åº¦expandedHeight: 300.0,// å¼ºåˆ¶æ˜¾ç¤ºé˜´å½±forceElevated: true,// è®¾ç½®è¯¥å±žæ€§ï¼Œå½“æœ‰ä¸‹æ»‘æ‰‹åŠ¿çš„æ—¶å€™ï¼Œå°±ä¼šæ˜¾ç¤º AppBar// floating: true,// è¯¥å±žæ€§åªæœ‰åœ¨ floating ä¸º true çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œä¸ç„¶ä¼šæŠ¥é”™// å½“ä¸Šæ»‘åˆ°ä¸€å®šçš„æ¯”ä¾‹ï¼Œä¼šè‡ªåŠ¨æŠŠ AppBar æ”¶ç¼©ï¼ˆä¸çŸ¥é“æ˜¯ä¸æ˜¯ bugï¼Œå½“ AppBar ä¸‹é¢çš„éƒ¨ä»¶æ²¡æœ‰è¢« AppBar è¦†ç›–çš„æ—¶å€™ï¼Œä¸ä¼šè‡ªåŠ¨æ”¶ç¼©ï¼‰// å½“ä¸‹æ»‘åˆ°ä¸€å®šæ¯”ä¾‹ï¼Œä¼šè‡ªåŠ¨æŠŠ AppBar å±•å¼€// snap: true,// è®¾ç½®è¯¥å±žæ€§ä½¿ Appbar æŠ˜å åŽä¸æ¶ˆå¤±// pinned: true,// é€šè¿‡è¿™ä¸ªå±žæ€§è®¾ç½® AppBar çš„èƒŒæ™¯flexibleSpace: FlexibleSpaceBar(// title: Text('Expanded Title'),// èƒŒæ™¯æŠ˜å åŠ¨ç”»collapseMode: CollapseMode.parallax,background: Image.asset('images/timg.jpg', fit: BoxFit.cover),),),// è¿™ä¸ªéƒ¨ä»¶ä¸€èˆ¬ç”¨äºŽæœ€åŽå¡«å……ç”¨çš„ï¼Œä¼šå æœ‰ä¸€ä¸ªå±å¹•çš„é«˜åº¦ï¼Œ// å¯ä»¥åœ¨ child å±žæ€§åŠ å…¥éœ€è¦å±•ç¤ºçš„éƒ¨ä»¶SliverFillRemaining(child: Center(child: Text('FillRemaining', style: TextStyle(fontSize: 30.0))),),]));&#125;&#125; è¿™é‡Œåˆ†åˆ«ç»™å‡ºä¸åŒçš„åŠ¨å›¾æ¥æŸ¥çœ‹ä¸‰ä¸ªå±žæ€§çš„å½±å“ å¦‚æžœè®¾ç½®äº† floating å±žæ€§ï¼Œå½“æœ‰ä¸‹æ‹‰åŠ¨ä½œæ—¶ï¼Œä¼šæ˜¾ç¤º AppBar å¦‚æžœè®¾ç½®äº† snap å±žæ€§ï¼Œæ»‘åŠ¨è·ç¦»è¾¾åˆ°ä¸€å®šå€¼åŽï¼Œä¼šæ ¹æ®æ»‘åŠ¨æ–¹å‘æ”¶ç¼©æˆ–è€…å±•å¼€ å¦‚æžœè®¾ç½®äº† pinned å±žæ€§ï¼Œé‚£ä¹ˆ AppBar å°±ä¼šåœ¨ç•Œé¢ä¸Šä¸ä¼šæ¶ˆå¤± ä»¥ä¸Šçš„æ•ˆæžœå›¾æŠŠ SliverFillRemaining æ¢æˆåˆ—è¡¨ SliverFixedExtentList æ•ˆæžœå¯èƒ½ä¼šæ›´åŠ æ˜Žæ˜¾ï¼Œè¿™è¾¹ç»™å°ä¼™ä¼´è‡ªå·±æ›¿æ¢æµ‹è¯•å§ã€‚ SliverFillViewportè¿™è¾¹æåˆ°äº† SliverFillRemaining ç”¨æ¥å¡«å……è§†å›¾ï¼Œé‚£ä¹ˆé¡ºå¸¦æä¸‹ SliverFillViewport è¿™ä¸ªéƒ¨ä»¶ 12345const SliverFillViewport(&#123;Key key,@required SliverChildDelegate delegate, // è¿™ä¸ª delegate åŒ SliverGridthis.viewportFraction = 1.0, // åŒå±å¹•çš„æ¯”ä¾‹å€¼ï¼Œ1.0 ä¸ºä¸€ä¸ªå±å¹•å¤§å°&#125;) å¦‚æžœä¸€ä¸ªæ»‘åŠ¨åˆ—è¡¨ï¼Œæ¯ä¸ª item éœ€è¦å æ»¡ä¸€ä¸ªå±å¹•æˆ–è€…æ›´å¤§ï¼Œå¯ä»¥ä½¿ç”¨è¯¥éƒ¨ä»¶ç”Ÿæˆåˆ—è¡¨ï¼Œä½†æ˜¯å¦‚æžœ item çš„é«˜åº¦å°äºŽä¸€ä¸ªå±å¹•é«˜åº¦ï¼Œé‚£å°±ä¸å¤ªæŽ¨èäº†ï¼Œåœ¨é¦–å°¾ä¼šç”¨ç©ºç™½ item æ¥æŠŠæœªå¡«æ»¡çš„è¡¥ä¸Šï¼Œå°±æ˜¯é¦–å°¾éƒ½ä¼šç•™ç©ºç™½ã€‚æˆ‘ä»¬ä½¿ç”¨ SliverFillViewport å¯¹ SliverFillRemaning è¿›è¡Œæ›¿æ¢ 12345SliverFillViewport(viewportFraction: 1.0,delegate: SliverChildBuilderDelegate((_, index) =&gt; Container(child: Text('Item $index'), alignment: Alignment.center, color: colors[index % 4]),childCount: 10)) æ•ˆæžœå°±ä¸å±•ç¤ºäº†ï¼Œå¯è‡ªè¡Œè¿è¡ŒæŸ¥çœ‹ã€‚ SliverToBoxAdapterè¿˜è®°å¾—ä¸ŠèŠ‚æœ€åŽçš„ä»£ç ä¸­ï¼Œæœ‰ä½¿ç”¨ SliverToBoxAdapter è¿™ä¸ªéƒ¨ä»¶å—ï¼Œè¿™ä¸ªéƒ¨ä»¶åªéœ€è¦ä¼ å…¥ä¸€ä¸ª child å±žæ€§ã€‚å› ä¸ºåœ¨ CustomScrollView ä¸­åªå…è®¸ä¼ å…¥ Sliver éƒ¨ä»¶ï¼Œé‚£ä¹ˆç±»ä¼¼ Container ç­‰æ™®é€šéƒ¨ä»¶å°±ä¸å¯ä»¥ä½¿ç”¨äº†ï¼Œé‚£ä¹ˆè¿™æ ·å°±éœ€è¦æ›´å¤šçš„ Sliver ç»„ä»¶æ‰èƒ½å®Œæˆè§†å›¾ï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿ï¼Œç›´æŽ¥é€šè¿‡ SliverToBoxAdapter å¯¹æ™®é€šéƒ¨ä»¶è¿›è¡ŒåŒ…è£¹ï¼Œè¿™æ ·å°±æˆä¸ºä¸€ä¸ª Sliver éƒ¨ä»¶äº†ã€‚æ€»ç»“ä¸‹ SliverToBoxAdapter çš„åŠŸèƒ½å°±æ˜¯ æŠŠä¸€ä¸ªæ™®é€šéƒ¨ä»¶åŒ…è£¹æˆä¸º Sliver éƒ¨ä»¶ï¼Œä¾‹å­å°±ä¸ä¸¾äº†ï¼Œä¸ŠèŠ‚å·²ç»æœ‰äº†ã€‚ SliverPaddingé‚£ä¹ˆåœ¨ CustomScrollView ä¸­éƒ¨ä»¶ä¹‹é—´å¦‚ä½•è®¾ç½®é—´è·å‘¢ï¼Œå¯èƒ½ä½ ä¼šæƒ³åˆ°ç”¨ SliverToBoxAdapter åŒ…è£¹ä¸€ä¸ª Padding æ¥å¤„ç†ï¼Œå½“ç„¶æ²¡é—®é¢˜ã€‚ä¸è¿‡ Flutter ä¹Ÿæä¾›äº†ä¸“é—¨çš„éƒ¨ä»¶ SliverPadding ä½¿ç”¨æ–¹å¼åŒ Paddingï¼Œä½†æ˜¯éœ€è¦ä¼ å…¥ä¸€ä¸ª sliver ä½œä¸ºå­ç±»ã€‚ SliverPersistentHeaderFlutter ä¸­ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¹ˆä¸€ä¸ªä½œä¸ºå¤´éƒ¨çš„éƒ¨ä»¶ SliverPersistentHeaderï¼Œè¿™ä¸ªéƒ¨ä»¶å¯ä»¥æ ¹æ®æ»šåŠ¨çš„è·ç¦»ç¼©å°é«˜åº¦ï¼Œæœ‰ç‚¹ç±»ä¼¼ SliverAppBar çš„èƒŒæ™¯æ•ˆæžœã€‚ 123456const SliverPersistentHeader(&#123;Key key,@required this.delegate, // SliverPersistentHeaderDelegateï¼Œç”¨æ¥åˆ›å»ºå±•ç¤ºå†…å®¹this.pinned = false, // åŒ SliverAppBar å±žæ€§this.floating = false,&#125;) SliverPersistentHeaderDelegateè¿™ä¸ªä»£ç†æ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œä¹Ÿå°±æ˜¯éœ€è¦æˆ‘ä»¬è‡ªå·±è¿›è¡Œç»§æ‰¿åŽå†å®žçŽ°æ–¹æ³•ã€‚SliverPersistentHeaderDelegate éœ€è¦æä¾›ä¸€ä¸ªæœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œå±•ç¤ºå†…å®¹ï¼Œä»¥åŠæ›´æ–°éƒ¨ä»¶æ¡ä»¶ æ¯”å¦‚æˆ‘ä»¬éœ€è¦å±•ç¤ºä¸€ä¸ªæœ€å¤§é«˜åº¦ 300ï¼Œæœ€å°é«˜åº¦ 100ï¼Œå±…ä¸­çš„æ–‡å­—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™è¿™ä¸ªä»£ç†ç±» 123456789101112131415161718class DemoHeader extends SliverPersistentHeaderDelegate &#123;@overrideWidget build(BuildContext context, double shrinkOffset, bool overlapsContent) &#123;return Container(color: Colors.pink,alignment: Alignment.center,child: Text('æˆ‘æ˜¯ä¸€ä¸ªå¤´éƒ¨éƒ¨ä»¶', style: TextStyle(color: Colors.white, fontSize: 30.0)));&#125; // å¤´éƒ¨å±•ç¤ºå†…å®¹@overridedouble get maxExtent =&gt; 300.0; // æœ€å¤§é«˜åº¦@overridedouble get minExtent =&gt; 100.0; // æœ€å°é«˜åº¦@overridebool shouldRebuild(SliverPersistentHeaderDelegate oldDelegate) =&gt; false; // å› ä¸ºæ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ›´æ–°&#125; ä½¿ç”¨ SliverPersistentHeader ä»£æ›¿ SliverAppBarï¼Œçœ‹ä¸‹æ•ˆæžœ 1234567891011121314151617class SliverDemoPage extends StatelessWidget &#123;final List&lt;Color&gt; colors = [Colors.red, Colors.green, Colors.blue, Colors.pink];@overrideWidget build(BuildContext context) &#123;return Scaffold(body: CustomScrollView(slivers: &lt;Widget&gt;[SliverPersistentHeader(delegate: DemoHeader(), pinned: true),// è¿™ä¸ªéƒ¨ä»¶ä¸€èˆ¬ç”¨äºŽæœ€åŽå¡«å……ç”¨çš„ï¼Œä¼šå æœ‰ä¸€ä¸ªå±å¹•çš„é«˜åº¦ï¼Œ// å¯ä»¥åœ¨ child å±žæ€§åŠ å…¥éœ€è¦å±•ç¤ºçš„éƒ¨ä»¶SliverFillRemaining(child: Center(child: Text('FillRemaining', style: TextStyle(fontSize: 30.0))),),]));&#125;&#125; æœ€åŽçš„æ•ˆæžœå›¾ å½“ç„¶ï¼Œä¸ºäº†æ–¹ä¾¿æ‰©å±•ï¼Œéœ€è¦é‡æ–°å°è£…ä¸‹ Delegate ï¼Œé€šè¿‡å¤–éƒ¨ä¼ å…¥èŒƒå›´å’Œå±•ç¤ºå†…å®¹ 123456789101112131415161718192021222324252627282930// è‡ªå®šä¹‰ SliverPersistentHeaderDelegateclass CustomSliverPersistentHeaderDelegate extends SliverPersistentHeaderDelegate &#123;final double max; // æœ€å¤§é«˜åº¦final double min; // æœ€å°é«˜åº¦final Widget child; // éœ€è¦å±•ç¤ºçš„å†…å®¹CustomSliverPersistentHeaderDelegate(&#123;@required this.max, @required this.min, @required this.child&#125;)// å¦‚æžœ assert å†…éƒ¨æ¡ä»¶ä¸æˆç«‹ï¼Œä¼šæŠ¥é”™: assert(max != null),assert(min != null),assert(child != null),assert(min &lt;= max),super();// è¿”å›žå±•ç¤ºçš„å†…å®¹ï¼Œå¦‚æžœå†…å®¹å›ºå®šå¯ä»¥ç›´æŽ¥åœ¨è¿™å®šä¹‰ï¼Œå¦‚æžœéœ€è¦å¯æ‰©å±•ï¼Œè¿™è¾¹é€šè¿‡ä¼ å…¥å€¼æ¥å®šä¹‰@overrideWidget build(BuildContext context, double shrinkOffset, bool overlapsContent) =&gt; child;@overridedouble get maxExtent =&gt; max; // è¿”å›žæœ€å¤§é«˜åº¦@overridedouble get minExtent =&gt; min; // è¿”å›žæœ€å°é«˜åº¦@overridebool shouldRebuild(CustomSliverPersistentHeaderDelegate oldDelegate) &#123;// æ˜¯å¦éœ€è¦æ›´æ–°ï¼Œè¿™é‡Œæˆ‘ä»¬å®šä¹‰å½“é«˜åº¦èŒƒå›´å’Œå±•ç¤ºå†…å®¹è¢«æ›¿æ¢çš„æ—¶å€™è¿›è¡Œåˆ·æ–°ç•Œé¢return max != oldDelegate.max || min != oldDelegate.min || child != oldDelegate.child;&#125;&#125; ç„¶åŽæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨äº†ï¼Œä¸éœ€è¦æ¯ä¸ª Delegate éƒ½é‡æ–°å†™ä¸€éï¼Œä¾‹å¦‚æ›¿æ¢ä¸‹åˆšæ‰å†™æ­»çš„ DemoHeader 12345678SliverPersistentHeader(// å±žæ€§åŒ SliverAppBarpinned: true,floating: true,// å› ä¸º SliverPersistentHeaderDelegate æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€ä»¥éœ€è¦è‡ªå®šä¹‰delegate: CustomSliverPersistentHeaderDelegate(max: 300.0, min: 100.0, child: Text('æˆ‘æ˜¯ä¸€ä¸ªå¤´éƒ¨éƒ¨ä»¶', style: TextStyle(color: Colors.white, fontSize: 30.0))),), ä¾‹å¦‚éœ€è¦æ›¿æ¢æˆä¸€å¼ å›¾ç‰‡ï¼Œç›´æŽ¥å°† Text ä¿®æ”¹æˆ Image å³å¯ã€‚ ä»¥ä¸Šéƒ¨åˆ†ä»£ç æŸ¥çœ‹ sliver_main.dart æ–‡ä»¶ NestedScrollViewè®²åˆ°è¿™äº†ï¼Œä¸å¾—ä¸æä¸‹ Scrollable ä¸­æ¯”è¾ƒé‡è¦çš„ä¸€å‘˜ NestedScrollViewï¼Œå…ˆçœ‹ä¸‹å®˜æ–¹çš„è§£é‡Š 12/// A scrolling view inside of which can be nested other scrolling views, with/// their scroll positions being intrinsically linked. ç³Ÿé€äº†çš„ç¿»è¯‘ X 1ï¼šä¸€ä¸ªå†…éƒ¨èƒ½å¤ŸåµŒå¥—å…¶ä»–æ»šåŠ¨éƒ¨ä»¶ï¼Œå¹¶ä½¿å…¶æ»šåŠ¨ä½ç½®è”ç»“åˆ°ä¸€èµ·çš„æ»šåŠ¨éƒ¨ä»¶ 1234/// The most common use case for this widget is a scrollable view with a/// flexible [SliverAppBar] containing a [TabBar] in the header (build by/// [headerSliverBuilder], and with a [TabBarView] in the [body], such that the/// scrollable view's contents vary based on which tab is visible. ç³Ÿé€äº†çš„ç¿»è¯‘ X 2ï¼šæœ€å¸¸ç”¨çš„æƒ…å†µï¼Œå°±æ˜¯åœ¨å…¶ headerSliverBuilder ä¸­ä½¿ç”¨æºå¸¦ TabBar çš„ SliverAppBarï¼ˆå°±æ˜¯ä½¿ç”¨ SliverAppBar çš„ bottom å±žæ€§æ·»åŠ  tab åˆ‡æ¢ä¹Ÿï¼‰ï¼Œå…¶ body å±žæ€§ä½¿ç”¨ TabBarView æ¥å±•ç¤º Tab é¡µçš„å†…å®¹ï¼Œè¿™æ ·é€šè¿‡åˆ‡æ¢ Tab é¡µå°±èƒ½å±•ç¤ºè¯¥é¡µä¸‹çš„å±•ç¤ºå†…å®¹ã€‚ çœ‹ä¸‹ headerSliverBuilder çš„å®šä¹‰ 1234567/// Signature used by [NestedScrollView] for building its header.////// The `innerBoxIsScrolled` argument is typically used to control the/// [SliverAppBar.forceElevated] property to ensure that the app bar shows a/// shadow, since it would otherwise not necessarily be aware that it had/// content ostensibly below it.typedef NestedScrollViewHeaderSliversBuilder = List&lt;Widget&gt; Function(BuildContext context, bool innerBoxIsScrolled); ç³Ÿé€äº†çš„ç¿»è¯‘ X 3ï¼šç”¨äºŽæž„å»º NestScrollView çš„å¤´éƒ¨éƒ¨ä»¶ï¼ŒinnerBoxIsScrolled ä¸»è¦ç”¨æ¥æŽ§åˆ¶ SliverAppBar çš„ forceElevated å±žæ€§ï¼Œå½“å†…éƒ¨å†…å®¹æ»šåŠ¨æ—¶ï¼Œæ˜¾ç¤º SliverAppbar çš„é˜´å½±ï¼Œä¸»è¦ç”¨æ¥æé†’å†…éƒ¨çš„å†…å®¹ä½ŽäºŽ SliverAppBar ï¼ˆç›¸å½“äºŽç»™äººä¸€ç§ç‰©ç†å±‚æ¬¡æ„Ÿï¼Œå¦åˆ™å¾ˆå®¹æ˜“è¢«è®¤ä¸ºï¼Œå¤´éƒ¨å’Œå†…å®¹æ˜¯è¿žæŽ¥åœ¨ä¸€èµ·çš„ï¼‰ æŽ¥ä¸‹æ¥çœ‹ä¸‹ NestedScrollView å†…éƒ¨ä¸ªäººè§‰å¾—æœ‰ç‚¹é‡è¦çš„ä¸€ä¸ªæ–¹æ³• sliverOverlapAbsorberHandleFor 12345678910111213/// Returns the [SliverOverlapAbsorberHandle] of the nearest ancestor/// [NestedScrollView].////// This is necessary to configure the [SliverOverlapAbsorber] and/// [SliverOverlapInjector] widgets.////// For sample code showing how to use this method, see the [NestedScrollView]/// documentation.static SliverOverlapAbsorberHandle sliverOverlapAbsorberHandleFor(BuildContext context) &#123; final _InheritedNestedScrollView target = context.inheritFromWidgetOfExactType(_InheritedNestedScrollView); assert(target != null, 'NestedScrollView.sliverOverlapAbsorberHandleFor must be called with a context that contains a NestedScrollView.'); return target.state._absorberHandle;&#125; è¯·æ³¨æ„åˆ°ä¸­é—´çš„æ³¨é‡Š ç³Ÿé€äº†çš„ç¿»è¯‘ X 4ï¼šè¿™ä¸ªæ–¹æ³•è¿”å›žçš„å€¼å¯¹äºŽ SliverOverlapAbsorber å’Œ SliverOverlapInjector éƒ¨ä»¶æ˜¯éžå¸¸é‡è¦çš„å‚æ•° æŽ¥ç€è¯·æ³¨æ„ä»£ç ä¸­çš„é‚£æ®µ assert ä¸­çš„æ–‡å­— ç³Ÿé€äº†çš„ç¿»è¯‘ X 5ï¼šsliverOverlapAbsorberHandleFor ä¼ å…¥çš„å‚æ•° context ä¸­å¿…é¡»åŒ…å« NestedScrollView SliverOverlapAbsorberè¿™è¾¹åˆå¼•å…¥äº†ä¸¤ä¸ªéƒ¨ä»¶ SliverOverlapAbsorber + SliverOverlapInjector è¿˜æ˜¯çœ‹æºç çš„è§£é‡Šå§ 1234567891011/// Creates a sliver that absorbs overlap and reports it to a/// [SliverOverlapAbsorberHandle].////// The [handle] must not be null.////// The [child] must be a sliver.const SliverOverlapAbsorber(&#123; Key key, @required this.handle, Widget child,&#125;) ç³Ÿé€äº†çš„ç¿»è¯‘ X 6ï¼šä¸€ä¸ª sliver éƒ¨ä»¶ï¼Œç”¨äºŽæŠŠéƒ¨ä»¶é‡å çš„é«˜åº¦åé¦ˆç»™ SliverOverlapAbsorberHandleï¼Œè€Œä¸”æŒ‡æ˜Žäº† handle ä¸èƒ½ç©ºï¼Œå¯ä»¥é€šè¿‡ NestedScrollView çš„ sliverOverlapAbsorberHandleFor æ–¹æ³•æ¥èµ‹å€¼ï¼Œå¹¶ä¸” child å¿…é¡»æ˜¯ä¸ª sliver éƒ¨ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬çš„ SliverAppBar éœ€è¦æ”¾åˆ° SliverOverlapAbsorber é‡Œé¢ã€‚ SingleChildScrollView123456789/// Creates a sliver that is as tall as the value of the given [handle]'s/// layout extent.////// The [handle] must not be null.const SliverOverlapInjector(&#123; Key key, @required this.handle, Widget child,&#125;) ç³Ÿé€äº†çš„ç¿»è¯‘ X 7ï¼šåˆ›å»ºä¸€ä¸ªå’ŒæŒ‡å®šçš„ handle ä¸€æ ·é«˜åº¦çš„ sliver éƒ¨ä»¶ï¼Œè¿™ä¸ª handle åŒ SliverOverlapAbsorber çš„ handle ä¿æŒä¸€è‡´å³å¯ã€‚ åˆ†æžå®Œæºç åŽï¼Œä¾‹å­çš„ç›®æ ‡å¾ˆæ˜Žç¡®ï¼Œä½¿ç”¨ SliverAppBar + TabBar + TabBarViewï¼Œå…ˆçœ‹ä¸‹æœ€åŽçš„æ•ˆæžœå›¾å§ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657class NestedScrollDemoPage extends StatelessWidget &#123;final _tabs = &lt;String&gt;['TabA', 'TabB'];final colors = &lt;Color&gt;[Colors.red, Colors.green, Colors.blue, Colors.pink, Colors.yellow, Colors.deepPurple];@overrideWidget build(BuildContext context) &#123;return Scaffold(body: DefaultTabController(length: _tabs.length,child: NestedScrollView(headerSliverBuilder: (context, innerScrolled) =&gt; &lt;Widget&gt;[SliverOverlapAbsorber(// ä¼ å…¥ handle å€¼ï¼Œç›´æŽ¥é€šè¿‡ `sliverOverlapAbsorberHandleFor` èŽ·å–å³å¯handle: NestedScrollView.sliverOverlapAbsorberHandleFor(context),child: SliverAppBar(pinned: true,title: Text('NestedScroll Demo'),expandedHeight: 200.0,flexibleSpace: FlexibleSpaceBar(background: Image.asset('images/timg.jpg', fit: BoxFit.cover)),bottom: TabBar(tabs: _tabs.map((tab) =&gt; Text(tab, style: TextStyle(fontSize: 18.0))).toList()),forceElevated: innerScrolled,),)],body: TabBarView(children: _tabs// è¿™è¾¹éœ€è¦é€šè¿‡ Builder æ¥åˆ›å»º TabBarView çš„å†…å®¹ï¼Œå¦åˆ™ä¼šæŠ¥é”™// NestedScrollView.sliverOverlapAbsorberHandleFor must be called with a context that contains a NestedScrollView..map((tab) =&gt; Builder(builder: (context) =&gt; CustomScrollView(// key ä¿è¯å”¯ä¸€æ€§key: PageStorageKey&lt;String&gt;(tab),slivers: &lt;Widget&gt;[// å°†å­éƒ¨ä»¶åŒ `SliverAppBar` é‡å éƒ¨åˆ†é¡¶å‡ºæ¥ï¼Œå¦åˆ™ä¼šè¢«é®æŒ¡SliverOverlapInjector(handle: NestedScrollView.sliverOverlapAbsorberHandleFor(context)),SliverGrid(delegate: SliverChildBuilderDelegate((_, index) =&gt; Image.asset('images/ali.jpg'),childCount: 8),gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(crossAxisCount: 4, mainAxisSpacing: 10.0, crossAxisSpacing: 10.0)),SliverFixedExtentList(delegate: SliverChildBuilderDelegate((_, index) =&gt; Container(child: Text('$tab - item$&#123;index + 1&#125;',style: TextStyle(fontSize: 20.0, color: colors[index % 6])),alignment: Alignment.center),childCount: 15),itemExtent: 50.0)],),)).toList()))),);&#125;&#125; ä½¿ç”¨çš„éƒ¨ä»¶å’Œä¹‹å‰è®²çš„æ²¡å•¥å¤§åŒºåˆ«ï¼Œå°±æ˜¯å¤šäº† SliverOverlapAbsorber å’Œ SliverOverlapInjector æ²¡å•¥éš¾åº¦ ä»¥ä¸Šéƒ¨åˆ†ä»£ç æŸ¥çœ‹ nested_scroll_main.dart æ–‡ä»¶ sliver éƒ¨ä»¶å¸¸ç”¨çš„ä¹Ÿå°±é‚£ä¹ˆå¤šäº†ï¼Œæœ›å°ä¼™ä¼´å¥½å¥½å¸æ”¶ï¼Œè·Ÿç€ä¾‹å­æ’¸æ’¸ä»£ç ï¼Œæ’¸é¡ºä¸‹æ€è·¯]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(ä¸ƒ)ä¹‹æ»‘åŠ¨éƒ¨ä»¶]]></title>
    <url>%2Fposts%2F8d9ab46a.html</url>
    <content type="text"><![CDATA[å‰é¢çš„å°èŠ‚åŸºæœ¬ä¸Šè®²å®Œäº†å¸¸ç”¨çš„éƒ¨ä»¶å’Œå®¹å™¨éƒ¨ä»¶ï¼Œä¹Ÿå¯ä»¥å®Œæˆå¾ˆå¤šçš„ç•Œé¢ï¼Œä½†æ˜¯åˆä¸€ä¸ªé—®é¢˜ï¼Œå‡å¦‚æˆ‘ä»¬è¦æ˜¾ç¤ºä¸€æ®µæ–‡å­—ï¼Œæ¯”å¦‚å°† ä¸€æ®µåˆè‡­åˆé•¿çš„æ–‡å­— åœ¨ç•Œé¢ä¸Šæ˜¾ç¤º 1000 æ¬¡ï¼Œä¸éš¾å®Œæˆå§ 12// ..çœç•¥ä¸€äº›æ— å…³ä»£ç body: Text('ä¸€æ®µåˆè‡­åˆé•¿çš„æ–‡å­—' * 1000, softWrap: true) å¾ˆç®€å•ï¼Œè¿è¡Œåˆ°æ‰‹æœºâ€¦ã€Œè¯¶è¯¶è¯¶ï¼Œ**ï¼Œæ€Žä¹ˆåªæ˜¾ç¤ºäº†ä¸€éƒ¨åˆ†ï¼Œå‰©ä¸‹çš„æ€Žä¹ˆç”»ä¸ä¸‹åŽ»ã€ æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¼šé‡åˆ°å¾ˆå¤šè¿™ç§æƒ…å†µï¼Œè®¸å¤šç•Œé¢ä¸æ˜¯ä¸€é¡µå°±èƒ½å¤Ÿæ˜¾ç¤ºå®Œçš„ã€‚é‚£ä¹ˆè¿™é‡Œæä¸‹å¯æ»‘åŠ¨çš„å®¹å™¨éƒ¨ä»¶ SingleChildScrollViewè¿™ä¸ªéƒ¨ä»¶éžå¸¸ç®€å•ï¼Œä¸è´´æºç äº†ã€‚æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼åªéœ€è¦æä¾›ä¸€ä¸ª child å³å¯ã€‚çŽ°åœ¨ç»™å‰é¢å†™çš„ Text åŒ…è£¹ä¸Šä¸€å±‚ SingleChildScrollView ç„¶åŽå†è¿è¡Œï¼Œæ–‡å­—å…¨éƒ¨éƒ½å±•ç¤ºå‡ºæ¥äº†ã€‚ å¦‚æžœéœ€è¦å®žçŽ°ä¸€ä¸ªåž‚ç›´çš„æ»šåŠ¨åˆ—è¡¨ï¼Œå¯ä»¥ç›´æŽ¥é€šè¿‡ SingleChildScrollView åŒ…è£¹ Column æ¥å®žçŽ°ï¼Œåˆ—è¡¨å†…å®¹å…¨éƒ¨å¡žåˆ° Column å³å¯ 123456789101112131415161718192021222324class SingleChildScrollDemoPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; /// letters è‡ªç”±å‘æŒ¥å§...ä¸€å®šè¦å¤§é‡ï¼Œå¤§é‡ï¼Œå¤§é‡ List&lt;String&gt; letters = [......]; return Scaffold( appBar: AppBar( title: Text('Single Child Demo'), ), body: SingleChildScrollView( child: Center( child: Column( children: List.generate( letters.length, (index) =&gt; Padding( padding: const EdgeInsets.symmetric(vertical: 4.0), child: Text(letters[index], style: TextStyle(fontSize: 18.0)), )), ), )), ); &#125;&#125; è¿è¡Œç»“æžœä¼šæ ¹æ®ä½ çš„ letters ä¸åŒè€Œä¸åŒï¼Œè¿™è¾¹å°±ä¸è´´æ•ˆæžœå›¾äº†ï¼Œåæ­£ä½ å¯ä»¥çœ‹åˆ°ä¸€ä¸²åˆ—è¡¨â€¦ é‚£ä¹ˆå¦‚æžœéœ€è¦å®žçŽ°æ¨ªå‘æ»šåŠ¨åˆ—è¡¨å‘¢ï¼Œç¨ç¨åšä¸‹ä¿®æ”¹å°±è¡Œäº† 123456789101112131415161718body: SingleChildScrollView( // è®¾ç½®æ»šåŠ¨æ–¹å‘ scrollDirection: Axis.horizontal, child: Center( // ä¿®æ”¹ä¸º `Row` å³å¯ child: Row( children: List.generate( letters.length, // å¦‚æžœä½ çš„ letters æ•°é‡æ¯”è¾ƒå°‘ï¼ŒæŽ¨èåŠ ä¸ª `Container` æŠŠå®½åº¦æŒ‡å®šå¤§ç‚¹ (index) =&gt; Container( child: Padding( padding: const EdgeInsets.symmetric(vertical: 4.0, horizontal: 6.0), child: Text(letters[index], style: TextStyle(fontSize: 18.0)), ), width: 30.0)), ), )) æ•ˆæžœå›¾ä¹Ÿä¸è´´äº†ï¼Œéƒ½æ¯”è¾ƒç®€å•ã€‚ è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ single_child_scroll_main.dart æ–‡ä»¶* ListViewå¹³æ—¶å¼€å‘ Android çš„æ—¶å€™ï¼Œå¦‚æžœæœ‰ç›¸åŒæ ¼å¼çš„åˆ—è¡¨è¦å®žçŽ°ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ ListView æˆ–è€… RecyclerView æ¥å®žçŽ°ï¼ŒFlutter ä¹Ÿæä¾›äº†ç±»ä¼¼çš„éƒ¨ä»¶ ListView å®žçŽ° ListView çš„æ–¹æ³•ä¸»è¦æœ‰ é€šè¿‡ ListView è®¾ç½® children å±žæ€§å®žçŽ° é€šè¿‡ ListView.custom å®žçŽ° é€šè¿‡ ListView.builder å®žçŽ° é€šè¿‡ ListView.separated å®žçŽ°å¸¦åˆ†å‰²çº¿åˆ—è¡¨ ListView childrenç¬¬ä¸€ç§æ–¹æ³•å®žçŽ°åˆ—è¡¨ï¼Œå’Œé€šè¿‡ SingleChildScrollView + Column / Row çš„æ–¹æ³•æ¯”è¾ƒç±»ä¼¼ï¼Œä¸è¿‡å¯ä»¥ç›´æŽ¥é€šè¿‡æŒ‡å®š ListView çš„ scrollDirection å°±å¯ä»¥äº†ã€‚ 1234567891011body: ListView( // é€šè¿‡ä¿®æ”¹æ»‘åŠ¨æ–¹å‘è®¾ç½®æ°´å¹³æˆ–è€…åž‚ç›´æ–¹å‘æ»šåŠ¨ scrollDirection: Axis.vertical, // é€šè¿‡ iterable.map().toList å’Œ List.generate æ–¹æ³•æ•ˆæžœæ˜¯ä¸€æ ·çš„ children: letters .map((s) =&gt; Padding( padding: const EdgeInsets.symmetric(vertical: 8.0), child: Center( child: Text(s)))) .toList()), ListView.custom1234567891011body: ListView.custom( // æŒ‡å®š item çš„é«˜åº¦ï¼Œå¯ä»¥åŠ å¿«æ¸²æŸ“çš„é€Ÿåº¦ itemExtent: 40.0, // item ä»£ç† childrenDelegate: SliverChildBuilderDelegate( // IndexedWidgetBuilderï¼Œæ ¹æ® index è®¾ç½® item ä¸­éœ€è¦å˜åŒ–çš„æ•°æ® (_, index) =&gt; Center(child: Text(letters[index], style: TextStyle(color: Colors.red))), // æŒ‡å®š item çš„æ•°é‡ childCount: letters.length, )), å¦‚æžœæ¯ä¸ª item çš„é«˜åº¦å¯ä»¥ç¡®å®šï¼Œé‚£ä¹ˆæŽ¨èé€šè¿‡ itemExtent æ¥è®¾ç½® item çš„é«˜åº¦/å®½åº¦ï¼Œèƒ½å¤ŸåŠ å¿« ListView çš„æ¸²æŸ“é€Ÿåº¦ã€‚å¦‚æžœä¸æŒ‡å®šé«˜åº¦/å®½åº¦ï¼ŒListView éœ€è¦æ ¹æ®æ¯ä¸ª item æ¥è®¡ç®— ListView çš„é«˜åº¦ï¼Œè¿™ä¸ªè®¡ç®—è¿‡ç¨‹æ˜¯éœ€è¦æ¶ˆè€—æ—¶é—´å’Œèµ„æºçš„ ListView.builderè¯¥æ–¹æ³•åŒ custom ç±»ä¼¼ï¼Œcustom éœ€è¦é€šè¿‡ä¸€ä¸ª Delegate ç”Ÿæˆ itemï¼Œè¯¥æ–¹æ³•ç›´æŽ¥é€šè¿‡ builder ç”Ÿæˆï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç›´æŽ¥æŒ‡å®š item çš„é«˜åº¦ 12345body: ListView.builder( itemBuilder: (_, index) =&gt; Center(child: Text(letters[index], style: TextStyle(color: Colors.green))), itemExtent: 40.0, itemCount: letters.length),)), ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œä»£ç ä¹Ÿæ¯”è¾ƒå°‘â€¦å°±å†²è¿™ç‚¹ï¼Œæˆ‘ä¹Ÿæ„¿æ„ç”¨è¿™ä¸ªæ–¹æ³• ListView.separatedå¦‚æžœéœ€è¦åœ¨æ¯ä¸ª item ä¹‹é—´æ·»åŠ åˆ†å‰²çº¿ï¼Œé‚£ä¹ˆé€šè¿‡ä»¥ä¸Šçš„æ–¹å¼å®žçŽ°å°±æ¯”è¾ƒå›°éš¾äº†ï¼Œæ‰€ä»¥ Flutter æä¾›äº† separated æ–¹æ³•ç”¨æ¥å¿«é€Ÿæž„å»ºå¸¦æœ‰åˆ†å‰²çº¿çš„ ListView åŠ å…¥æˆ‘ä»¬çš„ item ä¹‹é—´çš„åˆ†å‰²çº¿éœ€è¦å¦‚ä¸‹æ ·å¼ï¼šå¥‡æ•°ä½å’Œå¶æ•°ä½ä¹‹é—´ç”¨é»‘è‰²åˆ†å‰²çº¿ï¼Œå¶æ•°ä½å’Œå¥‡æ•°ä½ä¹‹é—´ç”¨çº¢è‰²åˆ†å‰²çº¿ 123456789// éœ€è¦åˆ†å‰²çº¿çš„æ—¶å€™æ‰ä½¿ç”¨ï¼Œä¸èƒ½æŒ‡å®š item çš„é«˜åº¦body: ListView.separated( itemBuilder: (_, index) =&gt; Padding( padding: const EdgeInsets.symmetric(vertical: 20.0), child: Center(child: Text(letters[index], style: TextStyle(color: Colors.blue))), ), // è¿™é‡Œç”¨æ¥å®šä¹‰åˆ†å‰²çº¿ separatorBuilder: (_, index) =&gt; Divider(height: 1.0, color: index % 2 == 0 ? Colors.black : Colors.red), itemCount: letters.length), æœ€ç»ˆçš„æ•ˆæžœå¦‚ä¸‹ï¼š ä»¥ä¸Šä»£ç æŸ¥çœ‹ listview_main.dart æ–‡ä»¶ æ€»ç»“ä¸‹ï¼šå¦‚æžœ item çš„é«˜åº¦èƒ½å¤Ÿå‡†ç¡®èŽ·å–ï¼Œä¸€å®šè¦æŒ‡å®š itemExtent çš„å€¼ï¼Œè¿™æ ·ä¼šæ›´åŠ é«˜æ•ˆï¼Œè‡³äºŽè¦é€šè¿‡å“ªç§æ–¹å¼æ¥ç”Ÿæˆï¼Œå®Œå…¨çœ‹ä¸ªäººå–œå¥½å§ã€‚ ExpansionTileæ—¢ç„¶è®²åˆ°äº† ListViewï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼ŒæŠ˜å åˆ—è¡¨ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„ï¼Œæ‰€ä»¥è¿™è¾¹è¦æä¸‹ ExpansionTile è¿™ä¸ªéƒ¨ä»¶ï¼Œå› ä¸ºç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥ç›´æŽ¥ä¸Šä»£ç äº† 123456789101112131415161718192021222324252627282930313233class ExpansionTilesDemoPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('ExpansionTile Demo'), ), body: ExpansionTile( // æœ€å‰é¢çš„ widget leading: Icon(Icons.phone_android), // æ›¿æ¢é»˜è®¤ç®­å¤´// trailing: Icon(Icons.phone_iphone), title: Text('Parent'), // é»˜è®¤æ˜¯å¦å±•å¼€ initiallyExpanded: true, // å±•å¼€æ—¶å€™çš„èƒŒæ™¯è‰² backgroundColor: Colors.yellow[100], // å±•å¼€æˆ–è€…æ”¶ç¼©çš„å›žè°ƒï¼Œtrue è¡¨ç¤ºå±•å¼€ onExpansionChanged: (expanded) =&gt; print('ExpansionTile is $&#123;expanded ? 'expanded' : 'collapsed'&#125;'), children: List.generate( 10, (position) =&gt; Container( padding: const EdgeInsets.only(left: 80.0), child: Text('Children $&#123;position + 1&#125;'), height: 50.0, alignment: Alignment.centerLeft, )), ), ); &#125;&#125; è¿™æ ·å°±å®Œæˆäº†ä¸€ä¸ªæŠ˜å éƒ¨ä»¶ï¼Œçœ‹ä¸‹æœ€åŽçš„æ•ˆæžœ é‚£ä¹ˆå®žçŽ°æŠ˜å åˆ—è¡¨ä¹Ÿå°±æ˜¯é€šè¿‡ ListView åˆ›å»ºä¸€ä¸ª ExpansionTile åˆ—è¡¨å³å¯ï¼Œå…ˆå‡†å¤‡ä¸‹æ¨¡æ‹Ÿçš„æ•°æ® 123456789final _keys = ['ParentA', 'ParentB', 'ParentC', 'ParentD', 'ParentE', 'ParentF']; final Map&lt;String, List&lt;String&gt;&gt; _data = &#123; 'ParentA': ['Child A0', 'Child A1', 'Child A2', 'Child A3', 'Child A4', 'Child A5'], 'ParentB': ['Child B0', 'Child B1', 'Child B2', 'Child B3', 'Child B4', 'Child B5'], 'ParentC': ['Child C0', 'Child C1', 'Child C2', 'Child C3', 'Child C4', 'Child C5'], 'ParentD': ['Child D0', 'Child D1', 'Child D2', 'Child D3', 'Child D4', 'Child D5'], 'ParentE': ['Child E0', 'Child E1', 'Child E2', 'Child E3', 'Child E4', 'Child E5'], 'ParentF': ['Child F0', 'Child F1', 'Child F2', 'Child F3', 'Child F4', 'Child F5'] &#125;; åœ¨å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒåŽå°è¿”å›žçš„æ•°æ®åº”è¯¥æ˜¯åˆ—è¡¨åµŒå¥—åˆ—è¡¨çš„å½¢å¼æ¯”è¾ƒå¤šï¼Œæˆ‘è¿™è¾¹ä¸»è¦å°±æ˜¯ä¸ºäº†å·æ‡’å°±éšä¾¿å¼„äº†ï¼ŒæŽ¥ç€ä¿®æ”¹ä¸‹ body çš„ä»£ç  12345678910111213141516body: ListView( children: _keys .map((key) =&gt; ExpansionTile( title: Text(key), children: _data[key] .map((value) =&gt; InkWell( child: Container( child: Text(value), padding: const EdgeInsets.only(left: 80.0), height: 50.0, alignment: Alignment.centerLeft, ), onTap: () &#123;&#125;)) .toList(), )) .toList()), æœ€ç»ˆçš„æ•ˆæžœå°±æ˜¯ä¸ªæŠ˜å åˆ—è¡¨äº† è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ expansion_tile_main.dart æ–‡ä»¶ å½“ç„¶äº†ï¼Œåªè¦æ•°æ®åˆ°ä½ï¼Œåˆ«è¯´ä¸¤å±‚æŠ˜å ï¼Œä¸‰å±‚ï¼Œå››å±‚ç”šè‡³æ›´å¤šå±‚éƒ½èƒ½å¤Ÿå®žçŽ°ï¼Œæºç ä¸­æœ‰å®žçŽ°å››å±‚çš„ demoï¼Œè¿™è¾¹å°±ä¸è´´ä»£ç äº†ï¼Œæœ‰éœ€è¦çš„å°ä¼™ä¼´å¯ä»¥æŸ¥çœ‹æºç  GridViewç”Ÿæˆåˆ—è¡¨å¯ä»¥é€šè¿‡ ListView æ¥å®žçŽ°ï¼Œé‚£ä¹ˆåŒæ ·ï¼Œå®žçŽ°ç½‘æ ¼åˆ—è¡¨ Flutter ä¹Ÿæä¾›äº† GridView æ¥å®žçŽ°ï¼Œå®žçŽ° GridView çš„æ–¹æ³•ä¹Ÿå¾ˆå¤šâ€¦æˆ‘æ•°äº†ä¸‹ï¼Œå¤§æ¦‚æœ‰ 10 ç§..å¯¹ä½ æ²¡çœ‹é”™ï¼Œå°±æ˜¯é‚£ä¹ˆå¤šï¼Œ(è¯¶è¯¶è¯¶ï¼Œåˆ«èµ°å•Šâ€¦è™½ç„¶æ–¹æ³•æœ‰ç‚¹å¤šï¼Œä½†æ˜¯ï¼Œå¤§åŒå°å¼‚) GridView GridView éœ€è¦ä¸€ä¸ª gridDelegateï¼ŒgridDelegate ç›®å‰æœ‰ä¸¤ç§ SliverGridDelegateWithFixedCrossAxisCount çœ‹å‘½åå°±çŸ¥é“ï¼Œå€¼å›ºå®šæ•°é‡çš„ï¼Œè¿™ä¸ªæ•°é‡æ˜¯åªå•æŽ’çš„æ•°é‡ SliverGridDelegateWithMaxCrossAxisExtent è¿™ä¸ªæ˜¯è®¾ç½®æœ€å¤§å®½åº¦/é«˜åº¦ï¼Œåœ¨è¿™ä¸ªå€¼èŒƒå›´å†…å–æœ€å¤§å€¼ï¼Œæ¯”å¦‚ä¸€æŽ’èƒ½ç»™ä½ æŽ’ä¸‹ 6 ä¸ªï¼Œä½†æ˜¯è¿œä¸åˆ°è®¾ç½®çš„æœ€å¤§å€¼ï¼Œå®ƒç»ä¸ç»™ä½ æŽ’ 6 ä¸ª é‚£ä¹ˆæŽ¥ä¸‹æ¥çš„ä½¿ç”¨å°±æ¯”è¾ƒç®€å•äº† 1234567891011121314151617181920212223242526272829303132class GridViewDemoPage extends StatelessWidget &#123; // è‡ªè¡Œè®¾ç½® final List&lt;String&gt; letters = [ ..... ]; // ç”¨äºŽåŒºåˆ†ç½‘æ ¼å•å…ƒ final List&lt;Color&gt; colors = [Colors.red, Colors.green, Colors.blue, Colors.pink]; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('GridView Demo'), ), body: GridView( gridDelegate: SliverGridDelegateWithFixedCrossAxisCount( crossAxisCount: 5, // å•è¡Œçš„ä¸ªæ•° mainAxisSpacing: 10.0, // åŒ scrollDirection æŒ‚é’©ï¼Œitem ä¹‹é—´åœ¨ä¸»è½´æ–¹å‘çš„é—´éš” crossAxisSpacing: 10.0, // item ä¹‹é—´åœ¨å‰¯è½´æ–¹æ³•çš„é—´éš” childAspectRatio: 1.0 // item çš„å®½é«˜æ¯” ), // éœ€è¦æ ¹æ® index è®¾ç½®ä¸åŒèƒŒæ™¯è‰²ï¼Œæ‰€ä»¥ä½¿ç”¨ List.generateï¼Œå¦‚æžœä¸è®¾ç½®èƒŒæ™¯è‰²ï¼Œä¹Ÿå¯ç”¨ iterable.map().toList children: List.generate( letters.length, (index) =&gt; Container( alignment: Alignment.center, child: Text(letters[index]), color: colors[index % 4], )), ), ); &#125;&#125; å…³é”®åœ°æ–¹å·²ç»æ·»åŠ äº†æ³¨é‡Šï¼Œè·‘ä¸‹è¿è¡Œæ•ˆæžœ æŽ¥ä¸‹æ¥æ¢ä¸€ç§ delegate è¯•è¯•æ•ˆæžœï¼Œå½“ç„¶è¿™ä¸ªæœ€å¤§å€¼å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½æ¥è®¾ç½® 123456789101112body: GridView( // é€šè¿‡è®¾ç½® `maxCrossAxisExtent` æ¥æŒ‡å®šæœ€å¤§çš„å®½åº¦ï¼Œåœ¨è¿™ä¸ªå€¼èŒƒå›´å†…ï¼Œä¼šé€‰å–ç›¸å¯¹è¾ƒå¤§çš„å€¼ gridDelegate: SliverGridDelegateWithMaxCrossAxisExtent( maxCrossAxisExtent: 60.0, crossAxisSpacing: 10.0, mainAxisSpacing: 10.0, childAspectRatio: 1.0), children: List.generate( letters.length, (index) =&gt; Container( alignment: Alignment.center, child: Text(letters[index]), color: colors[index % 4], )), ) æœ€åŽæ•ˆæžœï¼š ä¸ºäº†æ–¹ä¾¿å†™æ³•å‘¢ï¼ŒFlutter å¯¹ä»¥ä¸Šçš„ä¸¤ç§æ–¹å¼è¿›è¡Œäº†å°è£…ï¼Œçœç•¥äº† delegate GridView.count/GridView.extent ç›´æŽ¥çœ‹ä¸‹å¦‚ä½•ä¿®æ”¹ 1234567891011121314// è¿™ç§æƒ…å†µç®€åŒ–äº† `GridView` ä½¿ç”¨ `SliverGridDelegateWithFixedCrossAxisCount` ä»£ç†çš„æ–¹æ³• body: GridView.count( crossAxisSpacing: 10.0, mainAxisSpacing: 10.0, childAspectRatio: 1.0, crossAxisCount: 5, childAspectRatio: 2.0, children: List.generate( letters.length, (index) =&gt; Container( alignment: Alignment.center, color: colors[index % 4], child: Text(letters[index]), ))), 1234567891011121314// è¿™ç§æƒ…å†µç®€åŒ–äº† `GridView` ä½¿ç”¨ `SliverGridDelegateWithMaxCrossAxisExtent` ä»£ç†çš„æ–¹æ³• body: GridView.extent( crossAxisSpacing: 10.0, mainAxisSpacing: 10.0, childAspectRatio: 1.0, maxCrossAxisExtent: 60.0, children: List.generate( letters.length, (index) =&gt; Container( alignment: Alignment.center, color: colors[index % 4], child: Text(letters[index]), ))), è¿è¡Œçš„æ•ˆæžœå…¥å’Œå‰é¢çš„ç›¸åŒ GridView.custom è¿™ç§ç”Ÿæˆæ–¹å¼ï¼Œæ¯” GridView å¤šäº†ä¸€ä¸ª childrenDelegateï¼ŒchildrenDelegate ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯é€šè¿‡ IndexedWidgetBuilder æ¥æž„å»º item çš„ SliverChildBuilderDelegateï¼Œè¿˜æœ‰ä¸€ç§æ˜¯é€šè¿‡ List æ¥æž„å»º item çš„ SliverChildListDelegateï¼Œæ‰€ä»¥â€¦è¿™è¾¹ç›´æŽ¥æœ‰ 4 ä¸­ç”Ÿæˆæ–¹å¼ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬åªéœ€è¦äº†è§£ childrenDelegate å¦‚ä½•ä½¿ç”¨å³å¯ 12345678910111213body: GridView.custom( gridDelegate: SliverGridDelegateWithFixedCrossAxisCount( crossAxisCount: 5, mainAxisSpacing: 10.0, crossAxisSpacing: 10.0, childAspectRatio: 1.0), // item é€šè¿‡ delegate æ¥ç”Ÿæˆï¼Œå†…éƒ¨å®žçŽ°è¿˜æ˜¯ `IndexedWidgetBuilder` childrenDelegate: SliverChildBuilderDelegate( (_, index) =&gt; Container( alignment: Alignment.center, color: colors[index % 4], child: Text(letters[index]), ), childCount: letters.length)), 1234567891011121314body: GridView.custom( gridDelegate: SliverGridDelegateWithFixedCrossAxisCount( crossAxisCount: 5, mainAxisSpacing: 10.0, crossAxisSpacing: 10.0, childAspectRatio: 1.0), // å†…éƒ¨é€šè¿‡è¿”å›žæŽ§ä»¶åˆ—è¡¨å®žçŽ° childrenDelegate: SliverChildListDelegate( List.generate( letters.length, (index) =&gt; Container( child: Text(letters[index]), alignment: Alignment.center, color: colors[index % 4], )), )), è¿è¡Œæ•ˆæžœä¹ŸåŒä¸Šé¢ã€‚ GridView.builder å‰é¢ä»‹ç»çš„æ–¹æ³•ä¸­ï¼Œç”Ÿæˆ item çš„æ–¹å¼åŸºæœ¬ä¸Šæ˜¯é€šè¿‡ List è¿›è¡Œè½¬æ¢çš„ï¼Œåœ¨ custom æåˆ°äº† IndexWidgetBuilder çš„ç”Ÿæˆæ–¹å¼ï¼Œå½“ç„¶ï¼Œåœ¨ ListView çš„æ—¶å€™ä¹Ÿç”¨åˆ°äº†è¿™ç§ç”Ÿæˆæ–¹å¼ï¼Œå½“ç„¶ GridView ä¹Ÿæœ‰å•Šï¼Œè¦ã€Œé›¨éœ²å‡æ²¾ã€ä½ è¯´æ˜¯å§ 12345678// é€šè¿‡ `IndexedWidgetBuilder` æ¥æž„å»º itemï¼Œåˆ«çš„å‚æ•°åŒä¸Š body: GridView.builder( // è¿™é‡Œåˆéœ€è¦åˆ†ä¸¤ç§ `gridDelegate` gridDelegate: SliverGridDelegateWithFixedCrossAxisCount( crossAxisCount: 5, crossAxisSpacing: 10.0, mainAxisSpacing: 10.0, childAspectRatio: 1.0), itemCount: letters.length, itemBuilder: (_, index) =&gt; Container(color: colors[index % 4], child: Text(letters[index]), alignment: Alignment.center)), åˆ°è¿™ 10 ç§æ–¹å¼å°±è¯´å®Œäº†ã€‚ç»ˆäºŽå¯ä»¥æ­‡ä¸€å£æ°”äº†ã€‚ è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ gridview_main.dart æ–‡ä»¶ CustomScrollViewåœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œåº”è¯¥ä¼šé‡åˆ°è¿™ä¹ˆç§æƒ…å†µï¼Œå¤´éƒ¨æ˜¯ä¸€ä¸ª GridView æŽ¥ä¸‹æ¥æ‹¼æŽ¥ä¸€äº›åˆ«çš„éƒ¨ä»¶ï¼Œç„¶åŽå†æ‹¼æŽ¥ä¸€ä¸ªåˆ—è¡¨ï¼Œä¾‹å¦‚ä¸‹å›¾ å› ä¸º GridView å’Œ ListView äº®ç€éƒ½æ˜¯å¯æ»‘åŠ¨çš„éƒ¨ä»¶ï¼Œç›´æŽ¥æ‹¼æŽ¥è‚¯å®šä¼šæœ‰ã€Œæ»‘åŠ¨å†²çªã€ï¼Œæ‰€ä»¥ Flutter å°±æä¾›äº†ä¸€ä¸ªç²˜åˆå‰‚ï¼ŒCustomScrollViewï¼Œé‚£ä¹ˆ Flutter å¦‚ä½•å®žçŽ°å‘¢ï¼Œå› ä¸ºä¼šæ¶‰åŠåˆ° Sliver ç³»åˆ—éƒ¨ä»¶ï¼Œæ‰€ä»¥è¿™è¾¹å…ˆçœ‹ä¸‹å¤§æ¦‚çš„ä»£ç ï¼Œä¸‹èŠ‚ä¼šè¡¥å…… Sliver ç³»åˆ—éƒ¨ä»¶çš„å†…å®¹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162class CustomScrollDemoPage extends StatelessWidget &#123; // è¿™è¾¹ç”¨çš„ A-Z å­—æ¯ final List&lt;String&gt; letters = [ ..... ]; final List&lt;Color&gt; colors = [Colors.red, Colors.green, Colors.blue, Colors.pink, Colors.yellow, Colors.deepPurple]; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('CustomScrollDemo'), ), body: CustomScrollView( // è¿™é‡Œéœ€è¦ä¼ å…¥ `Sliver` éƒ¨ä»¶ï¼Œä¸‹èŠ‚è¯¾å¡«å‘ slivers: &lt;Widget&gt;[ // SliverGrid å®žçŽ°åŒ GridView å®žçŽ°æ–¹å¼ä¸€æ · // åŒæ · SliverGrid æœ‰æä¾› `count`, `entent` æ–¹æ³•ä¾¿äºŽå¿«é€Ÿç”Ÿæˆ SliverGrid SliverGrid( delegate: SliverChildBuilderDelegate( (_, index) =&gt; InkWell( child: Image.asset('images/ali.jpg'), onTap: () &#123;&#125;, ), childCount: 8), gridDelegate: SliverGridDelegateWithFixedCrossAxisCount( crossAxisCount: 4, mainAxisSpacing: 10.0, crossAxisSpacing: 10.0)), // è¿™é‡Œä¸‹èŠ‚è®² SliverToBoxAdapter( child: Container( color: Colors.black12, margin: const EdgeInsets.symmetric(vertical: 10.0), child: Column(children: &lt;Widget&gt;[ Divider(height: 2.0, color: Colors.black54), Stack( alignment: Alignment.center, children: &lt;Widget&gt;[ Image.asset('images/app_bar_hor.jpg', fit: BoxFit.cover), Text('æˆ‘æ˜¯ä¸€äº›åˆ«çš„ä¸œè¥¿..ä¾‹å¦‚å¹¿å‘Š', textScaleFactor: 1.5, style: TextStyle(color: Colors.red)) ], ), Divider(height: 2.0, color: Colors.black54), ], mainAxisAlignment: MainAxisAlignment.spaceBetween), alignment: Alignment.center)), // SliverFixedExtentList å®žçŽ°åŒ List.custom å®žçŽ°ç±»ä¼¼ SliverFixedExtentList( delegate: SliverChildBuilderDelegate( (_, index) =&gt; InkWell( child: Container( child: Text(letters[index] * 10, style: TextStyle(color: colors[index % colors.length], letterSpacing: 2.0), textScaleFactor: 1.5), alignment: Alignment.center, ), onTap: () &#123;&#125;, ), childCount: letters.length), itemExtent: 60.0) ], ), ); &#125;&#125; è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ custom_scroll_main.dart æ–‡ä»¶ æ»‘åŠ¨éƒ¨ä»¶å…¶å®žè¿˜æœ‰å¥½å‡ ä¸ªï¼Œä½†æ˜¯ä»¥ä¸Šä»‹ç»çš„åœ¨å¹³æ—¶å¼€å‘è¿‡ç¨‹ä¸­å¤Ÿç”¨äº†ï¼Œå¦‚æžœåŽæœŸå‘çŽ°è¿˜éœ€è¦åˆ«çš„éƒ¨ä»¶ï¼Œæˆ‘ä¼šç»§ç»­è¡¥ä¸Šã€‚åœ¨ç»“æŸå‰ï¼Œæˆ‘ä»¬å†è¯´ä¸‹å¦‚ä½•é€šè¿‡ ScrollController æ¥æŽ§åˆ¶ Scrollable çš„æ»šåŠ¨ä½ç½®ã€‚ä¾‹å¦‚æˆ‘ä»¬éœ€è¦å®žçŽ°ï¼Œå½“æ»šåŠ¨çš„è·ç¦»å¤§äºŽä¸€å®šè·ç¦»çš„æ—¶å€™æ˜¾ç¤ºä¸€ä¸ªå›žåˆ°é¡¶éƒ¨çš„æŒ‰é’®ï¼Œæœ‰äº† ScrollController å°±èƒ½å¤Ÿéžå¸¸æ–¹ä¾¿çš„å®žçŽ° ScrollControllerå› ä¸ºéœ€è¦æ ¹æ®æ»‘åŠ¨çš„è·ç¦»æ˜¾ç¤ºå›žåˆ°é¡¶éƒ¨æŒ‰é’®ï¼Œé‚£ä¹ˆå°±éœ€è¦é€šè¿‡ä¸€ä¸ªçŠ¶æ€ä½æ¥æŽ§åˆ¶æŒ‰é’®æ˜¾éš 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253class ScrollControllerDemoPage extends StatefulWidget &#123; @override _ScrollControllerDemoPageState createState() =&gt; _ScrollControllerDemoPageState();&#125;class _ScrollControllerDemoPageState extends State&lt;ScrollControllerDemoPage&gt; &#123; var _scrollController = ScrollController(); var _showBackTop = false; @override void initState() &#123; super.initState(); // å¯¹ scrollController è¿›è¡Œç›‘å¬ _scrollController.addListener(() &#123; // _scrollController.position.pixels èŽ·å–å½“å‰æ»šåŠ¨éƒ¨ä»¶æ»šåŠ¨çš„è·ç¦» // window.physicalSize.height èŽ·å–å±å¹•é«˜åº¦ // å½“æ»šåŠ¨è·ç¦»å¤§äºŽ 800 åŽï¼Œæ˜¾ç¤ºå›žåˆ°é¡¶éƒ¨æŒ‰é’® setState(() =&gt; _showBackTop = _scrollController.position.pixels &gt;= 800); &#125;); &#125; @override void dispose() &#123; // è®°å¾—é”€æ¯å¯¹è±¡ _scrollController.dispose(); super.dispose(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('ScrollController Demo'), ), body: ListView( controller: _scrollController, children: List.generate( 20, (index) =&gt; Container(height: 50.0, alignment: Alignment.center, child: Text('Item $&#123;index + 1&#125;'))), ), floatingActionButton: _showBackTop // å½“éœ€è¦æ˜¾ç¤ºçš„æ—¶å€™å±•ç¤ºæŒ‰é’®ï¼Œä¸éœ€è¦çš„æ—¶å€™éšè—ï¼Œè®¾ç½® null ? FloatingActionButton( onPressed: () &#123; // scrollController é€šè¿‡ animateTo æ–¹æ³•æ»šåŠ¨åˆ°æŸä¸ªå…·ä½“é«˜åº¦ // duration è¡¨ç¤ºåŠ¨ç”»çš„æ—¶é•¿ï¼Œcurve è¡¨ç¤ºåŠ¨ç”»çš„è¿è¡Œæ–¹å¼ï¼Œflutter åœ¨ Curves æä¾›äº†è®¸å¤šæ–¹å¼ _scrollController.animateTo(0.0, duration: Duration(milliseconds: 500), curve: Curves.decelerate); &#125;, child: Icon(Icons.vertical_align_top), ) : null, ); &#125;&#125; æœ€åŽçš„æ•ˆæžœå›¾]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(å…­)è·¯ç”±]]></title>
    <url>%2Fposts%2Fb89d6378.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€èŠ‚æ’¸äº†ä¸ªç•Œé¢ï¼Œè™½ç„¶æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æŠŠå‰é¢è®²çš„çŸ¥è¯†ä¸²è”äº†ä¸‹ï¼Œä½†æ˜¯ç•Œé¢ä¹‹é—´çš„è·³è½¬ä¸€ç›´æ²¡è¯´ï¼Œè¿™èŠ‚å°±è®²ä¸‹ Flutter ä¸­çš„ã€Œè·¯ç”±ã€æ¥ç®¡ç†ç•Œé¢ã€‚ 1ã€NavigatorFlutter é€šè¿‡ Navigator æ¥è¿›è¡Œé¡µé¢ä¹‹é—´çš„è·³è½¬ï¼Œåˆ†ä¸º push ç³»åˆ—å’Œ pop ç³»åˆ—æ“ä½œï¼Œå¸¦ push æ–¹æ³•ä¸ºå…¥æ ˆæ“ä½œï¼Œå¸¦ pop æ–¹æ³•ä¸ºå‡ºæ ˆæ“ä½œã€‚Navigator çš„ push æ–¹æ³•åˆ†ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯å¸¦ Name çš„ï¼Œéœ€è¦åœ¨ MaterialApp ä¸‹å°† routers å±žæ€§è¿›è¡Œæ³¨å†Œï¼Œå¦åˆ™å°†ä¼šæ‰¾ä¸åˆ°è¯¥è·¯ç”±ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ä¸å¸¦ Name çš„ï¼Œå¯ä»¥é€šè¿‡ Router ç›´æŽ¥è·³è½¬ã€‚ è¯´é‚£ä¹ˆå¤šç›¸ä¿¡è¿˜ä¸å¦‚ç›´æŽ¥ä¸Šä»£ç å’Œå›¾æ¥çš„æ›´ç›´æŽ¥ã€‚å› ä¸ºéœ€è¦å±•ç¤ºæ‰€æœ‰çš„è·³è½¬è‡³å°‘éœ€è¦ 3 ä¸ªé¡µé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºæœ€ç®€å•çš„ä¸‰ä¸ªç•Œé¢ï¼Œé€šè¿‡æ–‡å­—æ¥åŒºåˆ«ä¸åŒçš„é¡µé¢ï¼Œå› ä¸ºéœ€è¦è°ƒç”¨å¸¦æœ‰ Name çš„æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦å…ˆåœ¨ MaterialApp å¯¹è·¯ç”±è¿›è¡Œæ³¨å†Œã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758class DemoApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return MaterialApp( title: 'Flutter Learning Demo', // åœ¨è¿™é‡Œæ³¨å†Œè·¯ç”±ï¼Œå…³è” name å’Œç•Œé¢ // '/' è¡¨ç¤ºæ ¹é¡µé¢ï¼Œä¹Ÿå°±æ˜¯ home æ‰€å¯¹åº”çš„é¡µé¢ï¼Œè¿™è¾¹å°±ä¸éœ€è¦é…ç½® home å±žæ€§äº† routes: &#123;'/': (_) =&gt; APage(), '/page_b': (_) =&gt; BPage(), '/page_c': (_) =&gt; CPage()&#125;, debugShowCheckedModeBanner: false, ); &#125;&#125;/// Page Aï¼ŒButton çš„è·³è½¬äº‹ä»¶ç­‰ä¼šè¿›è¡Œä¿®æ”¹ï¼Œç›®å‰å…ˆç©ºç€class APage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Page A'), ), body: Center(child: RaisedButton(onPressed: () &#123;&#125;, child: Text('To Page B'))), ); &#125;&#125;/// Page Bclass BPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Page B'), ), body: Center( child: Column(mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ RaisedButton(onPressed: () &#123;&#125;, child: Text('To Page C')), RaisedButton(onPressed: () &#123;&#125;, child: Text('Back Page A')) ])), ); &#125;&#125;/// Page Cclass CPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Page C'), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[RaisedButton(onPressed: () &#123;&#125;, child: Text('Back Last Page'))])), ); &#125;&#125; push / pushNamed æ–¹å¼è·³è½¬ æˆ‘ä»¬åœ¨ APage çš„ RaiseButton çš„ onPressed æ–¹æ³•åŠ å…¥å¦‚ä¸‹ä»£ç  1Navigator.push(context, MaterialPageRoute(builder: (_) =&gt; BPage())); æˆ–è€… 1Navigator.pushNamed(context, '/page_b'); æ•ˆæžœç›¸åŒã€‚è·³è½¬åŽï¼Œå¯ä»¥å‘çŽ°ï¼Œåœ¨ BPage çš„ AppBar ä¸Šæœ‰ä¸ªè¿”å›žæŒ‰é’®ï¼Œç‚¹å‡»å¯ä»¥è¿”å›ž APage ï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´é€šè¿‡ push æˆ–è€… pushNamed æ–¹å¼è·³è½¬çš„æ—¶å€™ï¼Œç•Œé¢å †æ ˆçš„å˜åŒ–æ˜¯ç›´æŽ¥åœ¨åŽŸæ¥çš„å †æ ˆä¸Šæ·»åŠ ä¸€ä¸ªæ–°çš„ page ä¸ºäº†å‡¸æ˜¾å †æ ˆçš„å˜åŒ–ï¼Œæ‰€ä»¥ç»˜åˆ¶çš„å›¾ä¸­ï¼Œä¼šæ¯”ä½¿ç”¨çš„å®žé™…é¡µé¢å¤šä¸€ä¸ªï¼Œä¸‹å›¾åŒ pushReplacement / pushReplacementNamed / popAndPushNamed å°† APage ä¸­çš„è·³è½¬æ–¹å¼è¿›è¡Œæ›¿æ¢ 1Navigator.pushReplacement(context, MaterialPageRoute(builder: (_) =&gt; BPage())); æˆ–è€… 1Navigator.pushReplacementNamed(context, '/page_b'); æˆ–è€… 123/ å¦‚æžœæ˜¯ç¬¬ä¸€ä¸ªç•Œé¢è·³è½¬åˆ°ä¸‹ä¸ªç•Œé¢ï¼Œå‹¿ç”¨ï¼Œ`BPage` ä¼šæ˜¾ç¤ºè¿”å›žæŒ‰é’®ï¼Œä½†æ˜¯ç‚¹å‡»åŽï¼Œç•Œé¢ä¼šå˜é»‘// å› ä¸º `APage` å·²ç»ä¸åœ¨å †æ ˆä¸­äº†ï¼Œç‚¹å‡»åŽå †æ ˆå°±æ²¡æœ‰ `Page` äº†ï¼Œæ‰€ä»¥ç•Œé¢å˜é»‘Navigator.popAndPushNamed(context, '/page_b'); æ•ˆæžœç›¸åŒï¼Œè·³è½¬åŽï¼Œå¯ä»¥å‘çŽ° BPage çš„è¿”å›žæŒ‰é’®æ¶ˆå¤±äº†ï¼Œæ¶ˆå¤±äº†ï¼Œæ¶ˆå¤±äº†ï¼Œæˆ‘ä»¬å¯ä»¥è¯•ä¸‹ç‚¹å‡»è¿”å›žæŒ‰é”®ï¼Œå‘çŽ° App ç›´æŽ¥é€€å‡ºäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒBPage æ›¿ä»£äº† APage åœ¨å †æ ˆä¸­çš„ä½ç½®ã€‚é‚£ä¹ˆå †æ ˆçš„å˜åŒ–å›¾å°±æ˜¯è¿™æ ·çš„ pushAndRemoveUntil / pushNamedAndRemoveUntil CASE 1 è¿™ä¸ªè·³è½¬æ–¹å¼éœ€è¦é€šè¿‡ CPage æ¥ååŠ©å®Œæˆï¼Œå°† APage çš„è·³è½¬æ–¹å¼ä¿®æ”¹ä¸º push æ–¹å¼ï¼Œç„¶åŽåœ¨ BPage çš„ç¬¬ä¸€ä¸ªæŒ‰é’®åŠ å…¥å¦‚ä¸‹ä»£ç  12Navigator.pushAndRemoveUntil(context, MaterialPageRoute(builder: (_) =&gt; CPage()), (Route router) =&gt; false); æˆ–è€… 1Navigator.pushNamedAndRemoveUntil(context, '/page_c', (Route router) =&gt; false); æ•ˆæžœç›¸åŒï¼Œç‚¹å‡» BPage çš„è·³è½¬ CPage æŒ‰é’®åŽï¼Œç•Œé¢æ¥åˆ° CPageï¼Œç„¶åŽå‘çŽ°è¿˜æ˜¯æ²¡æœ‰è¿”å›žæŒ‰é’®ï¼Œæ²¡æœ‰è¿”å›žæŒ‰é’®ï¼Œæ²¡æœ‰è¿”å›žæŒ‰é’®ï¼Œç‚¹å‡»ä¸‹è¿”å›žæŒ‰é”®ï¼Œç„¶åŽå‘çŽ° App ç›´æŽ¥é€€å‡ºäº†ï¼Œé€€å‡ºäº†ï¼Œé€€å‡ºäº†ï¼Œé‚£ä¹ˆå †æ ˆå˜åŒ–å¦‚å›¾ CASE 2 ä½ ä»¥ä¸ºè¿™ä¸¤ä¸ªæ–¹æ³•åªæ˜¯ä¸ºäº†æŠŠå †æ ˆéƒ½æ¸…ç©ºå—ï¼Œé‚£å°±å¤ªå›¾æ ·å›¾æ£®ç ´äº†ï¼Œè¿™è¾¹å±•ç¤ºå¦ä¸€ç§ã€‚ä¿®æ”¹è·³è½¬çš„ä»£ç  12Navigator.pushAndRemoveUntil(context, MaterialPageRoute(builder: (_) =&gt; CPage()), ModalRoute.withName('/')); æˆ–è€… 1Navigator.pushNamedAndRemoveUntil(context, '/page_c', ModalRoute.withName('/')); ç‚¹å‡»è·³è½¬ CPage ä»¥åŽï¼Œå‘çŽ°è¿”å›žæŒ‰é’®åˆå›žæ¥äº†â€¦å°±è¿™ä¹ˆå›žæ¥äº†â€¦åªæ˜¯ä¿®æ”¹äº†ä¸€ä¸ªå‚æ•°ï¼Œç‚¹å‡»è¿”å›žæŒ‰é’®ï¼Œåˆå›žåˆ°äº† APageï¼Œä½ å¯ä»¥åœ¨ APage è·³è½¬ BPage ä¸­åŠ å…¥DPage EPage ç­‰ç­‰æ›´å¤šçš„ç•Œé¢ï¼Œåªè¦ä¿è¯ BPage è·³è½¬ CPage çš„æ–¹å¼ä¸å˜ï¼Œç‚¹å‡» CPage çš„è¿”å›žæŒ‰é’®ï¼Œåˆå›žåˆ° APage äº†ï¼Œæ‰€ä»¥â€¦å †æ ˆçš„å˜åŒ–å›¾å¦‚ä¸‹ SUMMARY ä¸ºä»€ä¹ˆä¼šè¿™æ ·å˜åŒ–å‘¢ï¼Œè¿˜è®°å¾—åœ¨ MaterialApp ä¸­æ³¨å†Œçš„ router ä¹ˆï¼ŒAPage çš„ name å¯¹åº”çš„ä¸º â€˜/â€˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥æ–¹æ³•ä¼šæŠŠå †æ ˆä¸­åœ¨ ModalRoute.withName æ‰€å¯¹åº”çš„ page ä¸Šçš„æ‰€æœ‰éƒ½ pop å‡ºå †æ ˆï¼Œå¦‚æžœæŠŠå‚æ•°æ¢æˆ /page_bï¼Œç„¶åŽåœ¨è·³è½¬ CPage ä¹‹å‰åŠ å…¥æ›´å¤šçš„ç•Œé¢ï¼Œç‚¹å‡» CPage çš„è¿”å›žæŒ‰é’®ï¼Œå°±ä¼šå›žåˆ° BPage pop åœ¨ BPage çš„ç¬¬äºŒä¸ªæŒ‰é’®ä¸­åŠ å…¥ pop æ“ä½œ 1Navigator.pop(context); è·³è½¬åˆ° BPage åŽç‚¹å‡»è¯¥æŒ‰é’®ï¼Œç•Œé¢å›žåˆ° APageï¼Œé‚£ä¹ˆå †æ ˆçš„å˜åŒ–å¾ˆæ˜Žæ˜¾äº†ï¼Œå¦‚å›¾ popUntil è¿™ä¸ªæ–¹æ³•è¿˜éœ€è¦å€ŸåŠ© CPage ï¼Œåœ¨ CPage çš„æŒ‰é’®ä¸­åŠ å…¥ 1Navigator.popUntil(context, ModalRoute.withName('/')); ç‚¹å‡»è¿”å›žæŒ‰é’®ï¼Œç•Œé¢è·³è¿‡ BPage å›žåˆ°äº† APageï¼Œè§£é‡ŠåŒ pushAndRemoveUntil é‚£ä¹ˆå †æ ˆçš„å˜åŒ–ä¹Ÿæ˜¾è€Œæ˜“è§å’¯ 2ã€Navigator ä¼ å€¼CASE 1 ä¼ å€¼ç»™ä¸‹ä¸ªç•Œé¢ ä¿®æ”¹ä¸‹ BPage å’Œ APage çš„æŒ‰é’®ç‚¹å‡»äº‹ä»¶ 1234567891011121314151617class BPage extends StatelessWidget &#123; final String message; BPage(&#123;Key key, @required this.message&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; print('passed value: $message'); return Scaffold( // çœç•¥ç›¸åŒä»£ç  ); &#125;&#125;// APage è·³è½¬äº‹ä»¶Navigator.push(context, MaterialPageRoute(builder: (_) =&gt; BPage(message: 'Message From Page A'))); ç‚¹å‡» APage å¯ä»¥æŸ¥çœ‹æŽ§åˆ¶å°æœ‰è¾“å‡º 2019-03-17 00:04:06.854 12868-12888/com.kuky.demo.flutterartsdemosapp I/flutter: passed value: Message From Page A ä¹Ÿå°±æ˜¯æˆåŠŸæŠŠå€¼ä¼ é€’è¿‡æ¥äº†ã€‚ä½†æ˜¯ï¼Œéœ€è¦ä¼ é€’å‚æ•°çš„è¯ï¼Œä¹‹å‰åœ¨ MaterialApp ä¸‹æ³¨å†Œçš„è·¯ç”±å°±éœ€è¦åŽ»é™¤äº†ã€‚ CASE 2 ä¼ å€¼ç»™ä¸Šä¸ªç•Œé¢ è¿™è¾¹å¯ä»¥æŸ¥çœ‹ä¸‹ pop æ–¹æ³• 12345@optionalTypeArgs // pop å¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯é€‰å‚æ•° resultï¼Œè¿™ä¸ª result ä¹Ÿå°±æ˜¯å›žä¼ ç»™ä¸Šä¸ªé¡µé¢çš„å‚æ•°å€¼äº† static bool pop&lt;T extends Object&gt;(BuildContext context, [ T result ]) &#123; return Navigator.of(context).pop&lt;T&gt;(result); &#125; æ—¢ç„¶çŸ¥é“ pop å¦‚ä½•ä¼ é€’å€¼ç»™ä¸Šä¸ªç•Œé¢ï¼Œé‚£ä¹ˆå¦‚ä½•åœ¨ä¸Šä¸ªç•Œé¢æŽ¥æ”¶è¿™ä¸ªå‚æ•°å‘¢ï¼Œè¿˜æ˜¯çœ‹ä¸‹ push æ–¹æ³• 123456789101112131415@optionalTypeArgs static Future&lt;T&gt; push&lt;T extends Object&gt;(BuildContext context, Route&lt;T&gt; route) &#123; return Navigator.of(context).push(route); &#125;///@optionalTypeArgs Future&lt;T&gt; push&lt;T extends Object&gt;(Route&lt;T&gt; route) &#123; // ...çœç•¥æ— å…³ä»£ç  // è¿™è¾¹è¿”å›žä¸€ä¸ª Future å€¼ï¼Œ`pop` æ‰€ä¼ é€’çš„å€¼ä¼šåœ¨è¿™è¾¹è¿”å›ž return route.popped; &#125;/// The future completes with the value given to [Navigator.pop], if any.Future&lt;T&gt; get popped =&gt; _popCompleter.future; å®˜æ–¹çš„æ³¨é‡Šéžå¸¸æ˜Žç™½çš„æŒ‡å‡ºï¼Œä¼šåœ¨ Future ä¸­æºå¸¦ pop ä¼ é€’çš„å‚æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯¹ APageè·³è½¬ BPage ä»¥åŠ BPage è¿”å›ž APage çš„é€»è¾‘è¿›è¡Œä¿®æ”¹ 1234567/// APageNavigator.push(context, MaterialPageRoute(builder: (_) =&gt; BPage(message: 'Message From Page A'))) .then((value) =&gt; print('BACK MESSAGE =&gt; $value')); /// BPageNavigator.pop(context, 'Message back to PageA From BPage'); ç‚¹å‡»è¿”å›žåŽï¼Œèƒ½å¤Ÿåœ¨æŽ§åˆ¶å°å‘çŽ°æœ‰å¦‚ä¸‹è¾“å…¥ 2019-03-17 16:35:53.820 13417-13442/com.kuky.demo.flutterartsdemosapp I/flutter: BACK MESSAGE =&gt; Message back to PageA From BPage ä¸Šä¸ªé¡µé¢æˆåŠŸæŽ¥æ”¶åˆ°ä¸‹ä¸ªé¡µé¢å›žä¼ çš„æ•°æ®ã€‚ CASE 3 é€šè¿‡ç³»ç»Ÿè¿”å›žæŒ‰é’®ä¼ å€¼ åœ¨ CASE 2 æƒ…å†µä¸‹ï¼Œé€šè¿‡æŒ‰é’®å¯¹è¿”å›žäº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œé‚£åŠ å…¥æˆ‘ä»¬éœ€æ±‚æ²¡æœ‰è¿™ä¸ªæŒ‰é’®ï¼Œåªèƒ½é€šè¿‡ç³»ç»Ÿé»˜è®¤çš„è¿”å›žæŒ‰é’®ï¼Œæˆ–è€…ç‰©ç†è¿”å›žæŒ‰é”®ï¼Œé‚£è¯¥å¦‚ä½•ä¼ å€¼å‘¢ï¼Œè¿™é‡Œå°±éœ€è¦ç”¨ WillpopScope å¯¹ç³»ç»Ÿçš„è¿”å›žæŒ‰é’®è¿›è¡Œç›‘å¬ã€‚æˆ‘ä»¬å¯¹ CPage åšä¸‹ä¿®æ”¹ï¼Œåœ¨ Scaffold å¤–é¢åŒ…è£¹ä¸€ä¸ª WillpopScope 1234567891011121314151617181920212223242526class CPage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return WillPopScope( child: Scaffold( appBar: AppBar( title: Text('Page C'), ), body: Center( child: Column(mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ RaisedButton( onPressed: () &#123; Navigator.popUntil(context, ModalRoute.withName('/')); &#125;, child: Text('Back Last Page')) ])), ), // è¿™é‡Œå¯¹ç³»ç»Ÿè¿”å›žæŒ‰é’®åšç›‘å¬.. // å¦‚æžœè¿”å›žçš„æ˜¯ `true` åˆ™ç›¸å½“äºŽ `pop` æ“ä½œï¼Œè¿”å›ž `false` åˆ™åªæ‰§è¡Œä¸Šä¸€æ­¥çš„ `pop` æ“ä½œ // ä¾‹å¦‚åŒå‡»è¿”å›žé€€å‡ºï¼Œä¹Ÿæ˜¯é€šè¿‡ `WillpopScope` æ¥è¿›è¡Œç›‘å¬ onWillPop: () async &#123; Navigator.pop(context, 'Hello~'); return false; &#125;); &#125;&#125; é€šè¿‡è¿”å›žæŒ‰é’®ï¼ŒBPage ä¼šæˆåŠŸæ”¶åˆ°ä»Ž CPage è¿”å›žçš„ Hello~ å€¼ ä»¥ä¸Šä»£ç æŸ¥çœ‹ router_main.dart æ–‡ä»¶ 3ã€è·¯ç”±åˆ‡æ¢åŠ¨ç”»å‡å¦‚è¯´æˆ‘ä»¬ä¸æƒ³ç”¨ç³»ç»Ÿè‡ªå¸¦çš„åˆ‡æ¢åŠ¨ç”»ï¼Œéœ€è¦å¼„ä¸€äº›æ¯”è¾ƒé…·ç‚«çš„æ•ˆæžœè¯¥æ€Žä¹ˆåŠžï¼Œé‚£å°±éœ€è¦ç”¨åˆ°è‡ªå®šä¹‰è·¯ç”±åˆ‡æ¢åŠ¨ç”»äº†ã€‚ç›´æŽ¥ä¿®æ”¹ BPage è·³è½¬ CPage çš„ä»£ç  12345678910111213141516Navigator.push( context, PageRouteBuilder( // è¿”å›žç›®æ ‡é¡µé¢ pageBuilder: (context, anim, _) =&gt; CPage(), // åˆ‡æ¢åŠ¨ç”»çš„åˆ‡æ¢æ—¶é•¿ transitionDuration: Duration(milliseconds: 500), // åˆ‡æ¢åŠ¨ç”»çš„åˆ‡æ¢æ•ˆæžœï¼Œç³»ç»Ÿè‡ªå¸¦çš„å¸¸ç”¨ Transition // ScaleTransition: ç¼©æ”¾ SlideTransition: æ»‘åŠ¨ // RotationTransition: æ—‹è½¬ FadeTransition: é€æ˜Žåº¦ transitionsBuilder: (context, anim, _, child) =&gt; ScaleTransition( // Tween æ˜¯ flutter çš„è¡¥é—´åŠ¨ç”»ï¼Œç­‰è®²åˆ°åŠ¨ç”»çš„æ—¶å€™å†æå§ï¼Œè¿™è¾¹å…ˆè®°ä½è¿™ä¹ˆä½¿ç”¨ scale: Tween(begin: 0.0, end: 1.0).animate(anim), // è¿™ä¸ªå€¼å¿…é¡»è®°å¾—è¦ä¼ ï¼Œå¦åˆ™ä¼šä¸æ˜¾ç¤ºç•Œé¢ child: child, ))); å½“å†æ¬¡ç‚¹å‡»è·³è½¬çš„æ—¶å€™ï¼Œåˆ‡æ¢çš„åŠ¨ç”»å°±æœ‰å¼€å§‹è‡ªå¸¦çš„å¹³æ»‘æ•ˆæžœå˜æˆç¼©æ”¾æ•ˆæžœäº†ã€‚é‚£å¦‚æžœè¦å®žçŽ°å¤šä¸ªåŠ¨ç”»å‘¢ï¼Œä¾‹å¦‚è¾¹ç¼©æ”¾ï¼Œè¾¹æ”¹å˜é€æ˜Žåº¦ï¼Œä¹Ÿå¾ˆå®¹æ˜“å®žçŽ°ï¼Œåªéœ€è¦å°† child æ›¿æ¢æˆ Transition å³å¯ 12345678910111213Navigator.push( context, PageRouteBuilder( pageBuilder: (context, anim, _) =&gt; CPage(), transitionDuration: Duration(milliseconds: 500), transitionsBuilder: (context, anim, _, child) =&gt; ScaleTransition( scale: Tween(begin: 0.0, end: 1.0).animate(anim), // æ›¿æ¢å³å¯ï¼Œå¦‚æžœè¦åŠ å…¥æ›´å¤šçš„åŠ¨ç”»ï¼Œæ›¿æ¢ `child` å±žæ€§å°±å¯ä»¥äº† child: FadeTransition( opacity: Tween(begin: 0.0, end: 1.0).animate(anim), child: child, ), ))); å½“ç„¶ï¼Œä¸ºäº†æ–¹ä¾¿é‡å¤åˆ©ç”¨ï¼Œéœ€è¦è¿›è¡Œå°è£…ï¼Œä¾‹å¦‚æˆ‘ä»¬è¦å°è£…ä¸Šé¢çš„ç¼©æ”¾åŠ¨ç”»æ•ˆæžœ 123456789101112class ScalePageRoute extends PageRouteBuilder &#123; final Widget widget; ScalePageRoute(this.widget) : super( transitionDuration: Duration(milliseconds: 500), pageBuilder: (context, anim, _) =&gt; widget, transitionsBuilder: (context, anim, _, child) =&gt; ScaleTransition( scale: Tween(begin: 0.0, end: 1.0).animate(anim), child: child, ));&#125; ç„¶åŽç›´æŽ¥åœ¨ Navigator è·³è½¬çš„æ—¶å€™è°ƒç”¨è¯¥ Route å°±å¯ä»¥äº† è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ custom_routes.dart æ–‡ä»¶ è¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰å†™çš„ demo éƒ½æ˜¯å•ä¸ªæ–‡ä»¶å†™ä¸€ä¸ªå…¥å£çš„å—ï¼ŒçŽ°åœ¨æˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ªç»Ÿä¸€ç®¡ç†çš„é¡µé¢ï¼Œå¯¹è¿™äº›ç•Œé¢è¿›è¡Œç®¡ç†äº†ï¼Œè¿™ä¸ªå·¥ä½œå°±äº¤ç»™å¤§å®¶ä¼™è‡ªå·±äº†ï¼Œå½“ç„¶æˆ‘ä¹Ÿåœ¨æºç åšäº†ä¿®æ”¹ï¼Œå¯ä»¥æŸ¥çœ‹ main.dart æ–‡ä»¶ ä»£ç åœ°å€: https://github.com/kukyxs/flutter_arts_demos_app]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(äº”)è¾“å…¥å¤„ç†åŠç™»å½•ç•Œé¢å®žæˆ˜]]></title>
    <url>%2Fposts%2F4b62f141.html</url>
    <content type="text"><![CDATA[å‰é¢æåˆ°åŸºç¡€éƒ¨ä»¶çš„æ—¶å€™ï¼Œå¿˜äº†æè¾“å…¥å†…å®¹å¤„ç†éƒ¨ä»¶ï¼Œè¿™é‡Œè¡¥ä¸Šï¼Œç„¶åŽé¡ºå¸¦æ’¸ä¸ªå®žé™…çš„ç•Œé¢å§ 1ã€TextField123456789101112131415161718192021222324252627282930const TextField(&#123; Key key, this.controller, // å®šä¹‰ä¸€ä¸ª `TextEditingController` å®žä¾‹ï¼Œç”¨æ¥èŽ·å–è¾“å…¥æ¡†å†…å®¹ç­‰æ“ä½œ this.focusNode, // å®šä¹‰ä¸€ä¸ª `FocusNode` å®žä¾‹ï¼Œåˆ¤æ–­å½“å‰è¾“å…¥æ¡†æ˜¯å¦èŽ·å–åˆ°ç„¦ç‚¹ç­‰æ“ä½œ this.decoration = const InputDecoration(), // è¾“å…¥æ¡†æ ·å¼ï¼ŒåŒ…æ‹¬æé†’å­—æ ·ï¼Œhint ç­‰ç­‰ TextInputType keyboardType, // è¾“å…¥æ–‡æœ¬ç±»åž‹ï¼Œä¾‹å¦‚ æ•°å­—ï¼Œemail ç­‰ç­‰ this.textInputAction, // é”®ç›˜ç¡®è®¤æŒ‰é’®çš„äº‹ä»¶ç±»åž‹ this.textCapitalization = TextCapitalization.none, this.style, // æ–‡å­—æ ·å¼ this.textAlign = TextAlign.start, // å¯¹é½æ–¹å¼ this.textDirection, // æ–‡å­—æ–¹å‘ this.autofocus = false, // æ˜¯å¦è‡ªåŠ¨èŽ·å–ç„¦ç‚¹ this.obscureText = false, // æ–‡å­—æ˜¯å¦éšè—ï¼Œå¤šç”¨äºŽå¯†ç  this.autocorrect = true, this.maxLines = 1, // this.maxLength, // æœ€å¤§é•¿åº¦ this.maxLengthEnforced = true, // è®¾ç½®æœ€å¤§é•¿åº¦åŽï¼Œè¾“å…¥å†…å®¹è¶…å‡ºåŽæ˜¯å¦å¼ºåˆ¶ä¸ç»™è¾“å…¥ this.onChanged, // è¾“å…¥å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶å€™çš„å›žè°ƒ this.onEditingComplete, // è¾“å…¥å®Œæ¯•çš„å›žè°ƒ this.onSubmitted, // æäº¤å†…å®¹çš„å›žè°ƒ this.inputFormatters, // this.enabled, // æ˜¯å¦å¯è¾“å…¥ï¼Œfalse ä¸å¯è¾“å…¥ this.cursorWidth = 2.0, // æ¸¸æ ‡å®½åº¦ this.cursorRadius, // æ¸¸æ ‡åŠå¾„ this.cursorColor, // æ¸¸æ ‡é¢œè‰² this.keyboardAppearance, // è¯¥å±žæ€§åªåœ¨ iOS è®¾å¤‡æœ‰æ•ˆ this.scrollPadding = const EdgeInsets.all(20.0), this.enableInteractiveSelection, this.onTap, // ç‚¹å‡»äº‹ä»¶ &#125;) é‚£ä¹ˆï¼Œç®€å•çš„æ¥ä¸ªè¾“å…¥æ¡†ç¤ºä¾‹å§ï¼Œç„¶åŽé€šè¿‡ Text å±•ç¤ºç»“æžœ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586class HomePage extends StatefulWidget &#123; @override _HomePageState createState() =&gt; _HomePageState();&#125;class _HomePageState extends State&lt;HomePage&gt; &#123; // å¯ä»¥ä¼ å…¥åˆå§‹å€¼ TextEditingController _editController = TextEditingController(); FocusNode _editNode = FocusNode(); // ä¿å­˜æŒ‰é’®ç‚¹å‡»åŽçš„è¾“å…¥å†…å®¹å€¼ String _content = ''; // ç›‘å¬è¾“å…¥å†…å®¹å˜åŒ–çš„å†…å®¹å€¼ String _spyContent = ''; @override void initState() &#123; super.initState(); // å½“è¾“å…¥æ¡†èŽ·å–åˆ°ç„¦ç‚¹æˆ–è€…å¤±åŽ»ç„¦ç‚¹çš„æ—¶å€™å›žè°ƒç”¨ _editNode.addListener(() &#123; print('edit has focus? =&gt; $&#123;_editNode.hasFocus&#125;'); &#125;); &#125; @override void dispose() &#123; // è®°å¾—é”€æ¯ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º _editController.dispose(); _editNode.dispose(); super.dispose(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Input Content'), ), body: Container( padding: const EdgeInsets.symmetric(horizontal: 12.0), child: Column( children: &lt;Widget&gt;[ TextField( controller: _editController, focusNode: _editNode, decoration: InputDecoration( icon: Icon(Icons.phone_iphone, color: Theme.of(context).primaryColor), labelText: 'è¯·è¾“å…¥æ‰‹æœºå·', helperText: 'æ‰‹æœºå·', hintText: 'æ‰‹æœºå·...åœ¨è¿™å„¿è¾“å…¥å‘¢'), keyboardType: TextInputType.number, // è¾“å…¥ç±»åž‹ä¸ºæ•°å­—ç±»åž‹ textInputAction: TextInputAction.done, style: TextStyle(color: Colors.redAccent, fontSize: 18.0), textDirection: TextDirection.ltr, maxLength: 11, // æœ€å¤§é•¿åº¦ä¸º 11 maxLengthEnforced: true, // è¶…è¿‡é•¿åº¦çš„ä¸æ˜¾ç¤º onChanged: (v) &#123; // è¾“å…¥çš„å†…å®¹å‘ç”Ÿæ”¹å˜ä¼šè°ƒç”¨ setState(() =&gt; _spyContent = v); &#125;, onSubmitted: (s) &#123; // ç‚¹å‡»ç¡®å®šæŒ‰é’®æ—¶å€™ä¼šè°ƒç”¨ setState(() =&gt; _spyContent = _editController.value.text); &#125;, ), Padding( padding: const EdgeInsets.symmetric(vertical: 8.0), child: RaisedButton( onPressed: () &#123; // èŽ·å–è¾“å…¥çš„å†…å®¹ setState(() =&gt; _content = _editController.value.text); // æ¸…ç†è¾“å…¥å†…å®¹ _editController.clear(); setState(() =&gt; _spyContent = ''); &#125;, child: Text('èŽ·å–è¾“å…¥å†…å®¹'))), // å±•ç¤ºè¾“å…¥çš„å†…å®¹ï¼Œç‚¹å‡»æŒ‰é’®ä¼šæ˜¾ç¤º Text(_content.isNotEmpty ? 'èŽ·å–åˆ°è¾“å…¥å†…å®¹: $_content' : 'è¿˜æœªèŽ·å–åˆ°ä»»ä½•å†…å®¹...'), Padding( padding: const EdgeInsets.symmetric(vertical: 8.0), // ç›‘å¬è¾“å…¥å†…å®¹çš„å˜åŒ–ï¼Œä¼šè·Ÿéšè¾“å…¥çš„å†…å®¹è¿›è¡Œæ”¹å˜ child: Text('æˆ‘æ˜¯æ–‡å­—å†…å®¹ç›‘å¬ï¼š$_spyContent'), ) ], )), ); &#125;&#125; è¿™è¾¹éœ€è¦æä¸‹çš„æ˜¯ setState æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åªæœ‰ StatefulWidget æ‰æœ‰ï¼Œå½“éœ€è¦ä¿®æ”¹æŸä¸ªå€¼çš„å†…å®¹çš„æ—¶å€™ï¼Œé€šè¿‡è¯¥æ–¹æ³•è¿›è¡Œä¿®æ”¹ï¼Œæœ€åŽçš„æ•ˆæžœå›¾å¦‚ä¸‹ï¼Œå½“è¾“å…¥æ¡†æ–‡å­—å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œç›‘å¬çš„ Text å†…å®¹ä¼šéšä¹‹æ”¹å˜ï¼ŒèŽ·å–å†…å®¹çš„ Text å½“ç‚¹å‡»æŒ‰é’®äº†æ‰å‘ç”Ÿå˜åŒ– è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ text_field_main.dart æ–‡ä»¶ é‚£ä¹ˆå¦‚æžœæœ‰ä¸ªéœ€æ±‚ï¼Œåœ¨ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™éœ€è¦å¯¹è¾“å…¥çš„å†…å®¹çš„åˆç†æ€§è¿›è¡Œæ£€æµ‹ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡ TextEditingController çš„ç»“æžœè¿›è¡Œæ£€æµ‹ï¼Œä½†æ˜¯è¿˜æœ‰ä¸ªæ›´åŠ æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨éƒ¨ä»¶ TextFormField æ¥å®žçŽ°ï¼Œä¸è¿‡éœ€è¦æˆ‘ä»¬åœ¨å¤–å±‚åŠ ä¸€ä¸ª Form éƒ¨ä»¶ï¼ŒæŽ¥ä¸‹æ¥ï¼Œå°±è¦å‡†å¤‡é€šè¿‡ TextFormField æ¥æ’¸ä¸€ä¸ªç™»å½•ç•Œé¢ï¼Œä½†æ˜¯è¿™ä¹‹å‰ï¼Œå‰é¢æœ‰ä¸ªå‘éœ€è¦å…ˆè§£å†³ä¸‹ 2ã€å¯¼å…¥è‡ªå®šä¹‰çš„å›¾æ ‡åœ¨è¿™ä¹‹å‰ï¼Œæ¶‰åŠåˆ° Icon éƒ¨ä»¶ï¼Œéƒ½æ˜¯ä½¿ç”¨çš„ç³»ç»Ÿè‡ªå¸¦çš„å›¾æ ‡ï¼Œé‚£ä¹ˆå¦‚ä½•å¯¼å…¥ç¬¬ä¸‰æ–¹è‡ªå®šä¹‰å›¾æ ‡å‘¢ï¼Œé©¬ä¸Šä¸ºä½ æ­æ™“ç­”æ¡ˆï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦æ‰“å¼€ã€Œé˜¿é‡Œå¦ˆå¦ˆã€ä¹Ÿå°±æ˜¯ iconfontï¼Œä¸çŸ¥é“çš„å°ä¼™ä¼´é€šè¿‡é“¾æŽ¥æ‰“å¼€ï¼Œç„¶åŽéœ€è¦æ³¨å†Œä¸ªè´¦æˆ·ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥é€šè¿‡ Github ç­‰ä¸‰æ–¹ç™»å½•ï¼Œç„¶åŽå°±å¯ä»¥æœç´¢æˆ‘ä»¬éœ€è¦çš„å›¾æ ‡äº†ï¼ŒæŽ¥ä¸‹æ¥éœ€è¦æ’¸ä¸€ä¸ªç™»å½•ï¼Œé‚£æˆ‘ä»¬å°±æ‰¾ä¸€ä¸ª ç”¨æˆ· å’Œ å¯†ç  çš„å›¾æ ‡å§ï¼Œé€‰æ‹©å–œæ¬¢çš„å›¾æ ‡ï¼Œç„¶åŽé¼ æ ‡æ”¾åˆ°å›¾æ ‡ä¼šå‡ºçŽ°ä¸‰ä¸ªæŒ‰é’®ï¼Œç›´æŽ¥ç‚¹å‡» è´­ç‰©è½¦ é‚£ä¸ªæŒ‰é’®ï¼Œç„¶åŽå°±å¯ä»¥é€šè¿‡é¡¶éƒ¨çš„ è´­ç‰©è½¦ æŒ‰é’®æŸ¥çœ‹æ·»åŠ çš„å›¾æ ‡ï¼Œç‚¹å‡»ä¸‹è½½ä»£ç ï¼ŒæŠŠèµ„æºæ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ã€‚ è§£åŽ‹åŽï¼Œéœ€è¦ç”¨åˆ°çš„æ–‡ä»¶æœ‰ä¸¤ä¸ªï¼Œåˆ«çš„å¯ä»¥å¿½ç•¥ demo_index.html è¿™è¾¹ç”¨æ¥æŸ¥çœ‹å›¾æ ‡çš„ unicode iconfont.ttf è¿™è¾¹å°±æ˜¯å›¾æ ‡èµ„æºæ–‡ä»¶äº† å›žåˆ°é¡¹ç›®ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ fonts ï¼Œå’Œ images åŒçº§ï¼Œå°† iconfont.ttf æ–‡ä»¶æ”¾åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åŽæ‰“å¼€ pubspec.ymal æ–‡ä»¶ï¼Œæ³¨å†Œä¸‹å¯¼å…¥çš„èµ„æºï¼Œå¯ä»¥è‡ªå·±å‘½å iconfont.ttf æ–‡ä»¶åï¼Œä¾¿äºŽè‡ªå·±å‘çŽ°å°±è¡Œï¼Œä¾‹å¦‚æˆ‘å‘½åä¸º third_part_icon.ttfï¼Œåœ¨æ³¨å†Œå›¾ç‰‡ä¸‹é¢ç»§ç»­æ·»åŠ  1234fonts: - family: ThirdPartIcons fonts: - asset: fonts/third_part_icon.ttf æ³¨å†Œå®Œäº†è®°å¾—ç‚¹å‡» Package getï¼Œå¦åˆ™ä¼šæ‰¾ä¸åˆ°èµ„æºã€‚æŽ¥ç€æ–°å»ºä¸ª third_icons.dartæ–‡ä»¶ 1234567891011121314import 'package:flutter/material.dart';class ThirdIcons &#123; // codePoint å€¼é€šè¿‡æ‰“å¼€ `demo_index.html` èŽ·å– // ä¼šåœ¨ç›¸åº” icon ä¸‹å¸¦æœ‰ç›¸åº”çš„ codeï¼ŒæŠŠ `&amp;#` æ›¿æ¢æˆ `0`ï¼Œç„¶åŽåŽ»æŽ‰æœ€åŽçš„ `;` å³å¯ // ä¾‹å¦‚ &amp;#xe672; å¯¹åº”æˆ‘ä»¬éœ€è¦çš„å›¾æ ‡å°±æ˜¯ 0xe672 static const IconData username = ThirdIconData(0xe672); static const IconData password = ThirdIconData(0xe62f);&#125;class ThirdIconData extends IconData &#123; // fontFamily å°±æ˜¯æˆ‘ä»¬åœ¨ `pubspec.yaml` ä¸­æ³¨å†Œçš„ family å€¼ const ThirdIconData(int codePoint) : super(codePoint, fontFamily: 'ThirdPartIcons');&#125; æŽ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡è¯¥ç±»å¯¼å…¥éœ€è¦çš„ç¬¬ä¸‰æ–¹å›¾æ ‡äº†ã€‚ 3ã€å¯¼å…¥ç¬¬ä¸‰æ–¹æ’ä»¶å…¶å®ž Flutter ä¸­ç¼ºå°‘å¾ˆå¤šåŠŸèƒ½ï¼Œéœ€è¦é€šè¿‡å¯¼å…¥ç¬¬ä¸‰æ–¹æ’ä»¶æ¥å®žçŽ°åŠŸèƒ½ï¼Œæ’ä»¶å°±æ˜¯ Flutter å’ŒåŽŸç”Ÿäº¤äº’çš„æ¡¥æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦å†™ Flutter çš„æ’ä»¶ï¼Œéœ€è¦å†™ Android å’Œ iOS ä¸¤ç«¯ä»£ç æ‰å¯ï¼Œå¦åˆ™åªæœ‰åœ¨å…¶ä¸­ä¸€ä¸ªç«¯èƒ½å¤Ÿå®žçŽ°åŠŸèƒ½ã€‚å¥½åœ¨æœ‰å¾ˆå¤šçŽ°æˆçš„æ’ä»¶å·²ç»å¼€æºï¼Œå¯ä»¥é€šè¿‡ FlutterPackage æœç´¢åˆ°ï¼Œä¾‹å¦‚ç­‰ä¼šæˆ‘ä»¬ä¼šéœ€è¦ç”¨åˆ° FlutterToast è¿™ä¸ªæ’ä»¶ï¼Œç”¨æ¥åšæé†’ç”¨ï¼Œåœ¨ FlutterPackage ä¸­æœç´¢åˆ°æ’ä»¶åŽï¼Œæ‰“å¼€é¡¹ç›®ä¸­çš„ pubspec.ymal æ–‡ä»¶ï¼Œåœ¨ dependencies ç±»ç›®ä¸‹å°† fluttertoast æ’ä»¶å¼•å…¥ï¼Œå¦‚å›¾ï¼š ç„¶åŽç‚¹å‡» Package get è®©å…¶å¯¼å…¥å³å¯ï¼Œåˆ«çš„æ’ä»¶ä¹Ÿæ˜¯è¿™æ ·å¯¼å…¥ã€‚åšå¥½å‡†å¤‡å·¥ä½œï¼Œæˆ‘ä»¬å°±å¯ä»¥æ’¸ä¸€ä¸ªç™»å½•ç•Œé¢äº†~ 4ã€æ’¸ä¸€ä¸ªç™»å½•ç•Œé¢åœ¨å¼€æ’¸ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹æœ€ç»ˆçš„æ•ˆæžœå›¾å§ï¼Œè™½ç„¶æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ç•Œé¢ å› ä¸ºä¸¤ä¸ªç•Œé¢æ¯”è¾ƒç›¸ä¼¼ï¼Œæ‰€ä»¥è¿™è¾¹åªè´´å¤–å±‚çš„ä»£ç å’Œç™»å½•çš„ä»£ç ï¼Œå…·ä½“çš„ä»£ç ï¼Œå¯ä»¥æŸ¥çœ‹æºç ï¼Œå·²ç»æŽ¨åˆ° Github 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191void main() &#123; runApp(LoginApp()); if (Platform.isAndroid) &#123; var style = SystemUiOverlayStyle(statusBarColor: Colors.transparent); SystemChrome.setSystemUIOverlayStyle(style); &#125;&#125;/// å¤–å±‚ç•Œé¢ï¼ŒåŒ…è£¹ç™»å½•ç•Œé¢å’Œæ³¨å†Œç•Œé¢ï¼Œä½¿ç”¨çš„éƒ½æ˜¯å‰é¢è®²è¿‡çš„ï¼Œå¿˜è®°å¯ä»¥æŸ¥çœ‹ä¹‹å‰çš„ç« èŠ‚class LoginApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return MaterialApp( title: 'Login Demo', debugShowCheckedModeBanner: false, theme: ThemeData(primarySwatch: Colors.lightBlue), home: LoginHomePage(), ); &#125;&#125;class LoginHomePage extends StatefulWidget &#123; @override _LoginHomePageState createState() =&gt; _LoginHomePageState();&#125;class _LoginHomePageState extends State&lt;LoginHomePage&gt; with SingleTickerProviderStateMixin &#123; TabController _tabController; List&lt;String&gt; _pageIndicators = ['ç™»å½•', 'æ³¨å†Œ']; List&lt;Widget&gt; _pages = []; int _position = 0; @override void initState() &#123; super.initState(); _tabController = TabController(length: _pageIndicators.length, vsync: this); // å°†ç™»å½•ç•Œé¢å’Œæ³¨å†Œç•Œé¢æ·»åŠ åˆ°åˆ—è¡¨ï¼Œç”¨äºŽæ”¾åˆ° IndexStack çš„ children å±žæ€§ _pages..add(LoginPage())..add(RegisterPage()); _tabController.addListener(() &#123; // å½“ tab åˆ‡æ¢çš„æ—¶å€™ï¼Œè”åŠ¨ IndexStack çš„ child é¡µé¢ä¹Ÿè¿›è¡Œä¿®æ”¹ï¼Œé€šè¿‡ setState æ¥ä¿®æ”¹å€¼ if (_tabController.indexIsChanging) setState(() =&gt; _position = _tabController.index); &#125;); &#125; @override void dispose() &#123; super.dispose(); &#125; @override Widget build(BuildContext context) &#123; // å…ˆå¿½ç•¥... return Theme( data: ThemeData(primarySwatch: Colors.pink, iconTheme: IconThemeData(color: Colors.pink)), child: Scaffold( body: Container( padding: const EdgeInsets.all(20.0), alignment: Alignment.center, decoration: BoxDecoration(image: DecorationImage(image: AssetImage('images/login_bg.png'), fit: BoxFit.cover)), // å…ˆå¿½ç•¥...ä¸‹é¢ä¼šè®²ï¼Œä¸»è¦æ˜¯è§£å†³è½¯é”®ç›˜å¼¹å‡ºçš„æ—¶å€™ï¼Œç•Œé¢å†…å®¹ä¼šæº¢å‡ºçš„é—®é¢˜ child: SingleChildScrollView( child: SafeArea( child: Column(mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ // é¡¶éƒ¨é¡µé¢åˆ‡æ¢æŒ‡ç¤ºå™¨ï¼Œä»£ç å¯ä»¥å‚è€ƒ `app_bar_main.dart` æ–‡ä»¶ TabBar( indicatorSize: TabBarIndicatorSize.label, controller: _tabController, indicatorWeight: 4.0, indicatorColor: Colors.white, // è¿”å›ž tab åˆ—è¡¨ tabs: _pageIndicators .map((v) =&gt; Text(v, style: TextStyle(color: Colors.white, fontSize: 24.0))) .toList()), Padding( padding: const EdgeInsets.only(top: 30.0), child: SizedBox( // åˆ‡æ¢ç•Œé¢åˆ—è¡¨ child: IndexedStack(children: _pages, index: _position), // æŒ‡å®šé«˜åº¦ height: MediaQuery.of(context).size.height / 2)) ])), ), ), )); &#125;&#125;/// ç™»å½•ç•Œé¢class LoginPage extends StatefulWidget &#123; @override _LoginPageState createState() =&gt; _LoginPageState();&#125;class _LoginPageState extends State&lt;LoginPage&gt; &#123; // ç”¨äºŽåŽé¢åˆ¤æ–­è¡¨å•å†…å®¹æ˜¯å¦æœ‰æ•ˆ GlobalKey&lt;FormState&gt; _formKey = GlobalKey(); // ç”¨äºŽèŽ·å–è¾“å…¥æ¡†çš„å†…å®¹ TextEditingController _usernameController = TextEditingController(); TextEditingController _passwordController = TextEditingController(); @override void initState() &#123; super.initState(); &#125; @override void dispose() &#123; // é˜²æ­¢å†…å­˜æº¢å‡ºï¼Œè®°å¾—é”€æ¯..é”€æ¯..é”€æ¯ _usernameController.dispose(); _passwordController.dispose(); super.dispose(); &#125; _login() &#123; // å–æ¶ˆç„¦ç‚¹ FocusScope.of(context).requestFocus(FocusNode()); // åˆ¤æ–­è¡¨å•æ˜¯å¦æœ‰æ•ˆ if (_formKey.currentState.validate()) &#123; // èŽ·å–è¾“å…¥æ¡†å†…å®¹ var username = _usernameController.value.text; var password = _passwordController.value.text; // åˆ¤æ–­ç™»å½•æ¡ä»¶ if (username == 'kuky' &amp;&amp; password == '123456') // å¼•å…¥çš„ä¸‰æ–¹æ’ä»¶æ–¹æ³•ï¼Œ`Flutter` æ²¡æœ‰è‡ªå¸¦çš„ `Taost` Fluttertoast.showToast(msg: 'ç™»å½•æˆåŠŸ'); else Fluttertoast.showToast(msg: 'ç™»å½•å¤±è´¥'); &#125; &#125; @override Widget build(BuildContext context) &#123; return Form( // å°† key è®¾ç½®ç»™è¡¨å•ï¼Œç”¨äºŽåˆ¤æ–­è¡¨å•æ˜¯å¦æœ‰æ•ˆ key: _formKey, child: Column( children: &lt;Widget&gt;[ Padding( padding: const EdgeInsets.symmetric(vertical: 4.0), // è¡¨å•è¾“å…¥æ¡†ï¼Œå‚æ•°åŒ TextField åŸºæœ¬ç±»ä¼¼ child: TextFormField( controller: _usernameController, style: TextStyle(color: Colors.white, fontSize: 16.0), decoration: InputDecoration( icon: Icon(ThirdIcons.username, size: 24.0, color: Colors.white), labelText: 'è¯·è¾“å…¥ç”¨æˆ·å', labelStyle: TextStyle(color: Colors.white), helperStyle: TextStyle(color: Colors.white)), // æœ‰æ•ˆæ¡ä»¶(ä¸ºç©ºä¸é€šè¿‡ï¼Œè¿”å›žæç¤ºè¯­ï¼Œé€šè¿‡è¿”å›ž null) validator: (value) =&gt; value.trim().isEmpty ? 'ç”¨æˆ·åä¸èƒ½ä¸ºç©º' : null, ), ), Padding( padding: const EdgeInsets.symmetric(vertical: 4.0), child: TextFormField( obscureText: true, controller: _passwordController, style: TextStyle(color: Colors.white, fontSize: 16.0), decoration: InputDecoration( icon: Icon(ThirdIcons.password, size: 24.0, color: Colors.white), labelText: 'è¯·è¾“å…¥å¯†ç ', labelStyle: TextStyle(color: Colors.white), helperStyle: TextStyle(color: Colors.white)), validator: (value) =&gt; value.trim().length &lt; 6 ? 'å¯†ç é•¿åº¦ä¸èƒ½å°äºŽ6ä½' : null, ), ), Padding( padding: const EdgeInsets.only(top: 20.0), child: SizedBox( // ä¸»è¦ç”¨äºŽä½¿ RaisedButton å’Œä¸Šå±‚å®¹å™¨åŒå®½ width: MediaQuery.of(context).size.width, child: RaisedButton( color: Colors.pink, shape: RoundedRectangleBorder(borderRadius: BorderRadius.all(Radius.circular(4.0))), onPressed: _login, child: Text( 'ç™»å½•', style: TextStyle(color: Colors.white, fontSize: 20.0), )), ), ) ], )); &#125;&#125; æ’¸å®Œç•Œé¢åŽï¼Œå¯ä»¥è¯•ä¸‹ç™»å½•æ•ˆæžœï¼Œå¦‚æžœè¾“å…¥æ¡†çš„å†…å®¹ï¼Œå’Œ TextFormField çš„ validatorçš„æ¡ä»¶ä¸ç¬¦åˆï¼Œåˆ™ä¼šæ˜¾ç¤ºé”™è¯¯æ–‡å­—çš„æç¤º å¦‚æžœæŒ‰ç…§æ¡ä»¶ç”¨æˆ·åä¸º kuky å¯†ç ä¸º 123456 (æ¡ä»¶å¯ä»¥æ ¹æ®è‡ªå·±è¿›è¡Œä¿®æ”¹)åˆ™ä¼šæ˜¾ç¤ºç™»å½•æˆåŠŸçš„é€»è¾‘ ä»¥ä¸Šä»£ç æŸ¥çœ‹ login_home_page.dart æ–‡ä»¶ æ³¨å†Œç•Œé¢çš„é€»è¾‘å’Œç™»å½•ç•Œé¢çš„é€»è¾‘å‡ ä¹Žä¸€æ ·ï¼Œç®—æ˜¯ç¬¬ä¸€æ¬¡å®žæˆ˜äº†ï¼Œæœ›å°ä¼™ä¼´èƒ½å¤Ÿå¥½å¥½çš„å†™ä¸€é ä»£ç åœ°å€: https://github.com/kukyxs/flutter_arts_demos_app]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(å››)å¸¸ç”¨å¸ƒå±€]]></title>
    <url>%2Fposts%2F14587b6a.html</url>
    <content type="text"><![CDATA[ä¸ŠèŠ‚å¡«å®Œäº† Scaffold ç•™ä¸‹çš„å‘ï¼Œè¿™èŠ‚ç»§ç»­å¡«å‘ï¼Œä¹‹å‰ç•™ä¸‹å…³äºŽ Layout çš„å‘ï¼Œåˆæ˜¯ä¸€å †éƒ¨ä»¶è¢­æ¥ 1ã€Containerä¸ºäº†è®©æˆ‘ä»¬çš„ç•Œé¢æ›´å®¹æ˜“è¢«æ‰©å±•ï¼Œé€šå¸¸ä¼šåœ¨æœ€å¤–å±‚åŒ…è£¹ä¸€å±‚ Containerï¼Œå…¶æž„é€ å‡½æ•°ä¹Ÿä¸æ˜¯å¾ˆéš¾ç†è§£ 1234567891011121314151617181920212223Container(&#123; Key key, this.alignment, // child çš„å¯¹é½æ–¹å¼ï¼ŒåŒ…æ‹¬å·¦å¯¹é½ï¼Œå±…ä¸­ï¼Œå³å¯¹é½ï¼Œå·¦ä¸Šå¯¹é½..ç­‰ç­‰ this.padding, // child å’Œ Container çš„è¾¹è· Color color, // Container çš„èƒŒæ™¯è‰² Decoration decoration, // æ ·å¼ï¼Œå¯ä»¥è®¾ç½®èƒŒæ™¯å›¾ï¼Œåœ†è§’ç­‰å±žæ€§ this.foregroundDecoration, // child çš„æ ·å¼ double width, // å®½åº¦ double height, // é«˜åº¦ BoxConstraints constraints, // é»˜è®¤ä½¿ç”¨ BoxConstraints.tightForï¼Œå¯ä»¥æ‰‹åŠ¨ä¼ å…¥ this.margin, // Container åŒä¸Šå±‚å®¹å™¨çš„è¾¹è· this.transform, // æ˜¯ä¸ª Matrix4 çŸ©é˜µï¼Œ(å—¯..è¿™ä¸ªå‚æ•°åŸºæœ¬å¾ˆå°‘ç”¨ï¼Œæ²¡æ€Žä¹ˆäº†è§£ /æ‚è„¸) this.child, // éœ€è¦å±•ç¤ºçš„å†…å®¹ &#125;)// ...const BoxConstraints.tightFor(&#123; double width, double height &#125;): minWidth = width != null ? width : 0.0, maxWidth = width != null ? width : double.infinity, minHeight = height != null ? height : 0.0, maxHeight = height != null ? height : double.infinity; è®©æˆ‘ä»¬å†™ä¸ªåœ†è§’çŸ©å½¢çš„å¤–å±‚ï¼Œå†…å±‚å€¼æ˜¾ç¤ºç™½è‰²æ–‡å­— 12345678910111213141516171819202122232425class HomePage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( body: SafeArea( child: Container( alignment: Alignment.center, // å®½ï¼Œé«˜åº¦åŒä¸Šå±‚å®¹å™¨ç›¸åŒ width: MediaQuery.of(context).size.width, height: MediaQuery.of(context).size.height, margin: const EdgeInsets.all(8.0), padding: const EdgeInsets.all(20.0), // Container çš„æ ·å¼ decoration: BoxDecoration( borderRadius: BorderRadius.circular(20.0), color: Colors.red,// shape: BoxShape.circle, // è¯¥å±žæ€§ä¸å¯åŒ borderRadius ä¸€èµ·ä½¿ç”¨ backgroundBlendMode: BlendMode.colorDodge, // èƒŒæ™¯å›¾ç‰‡å’Œé¢œè‰²æ··åˆæ¨¡å¼ image: DecorationImage(image: AssetImage('images/ali.jpg'), fit: BoxFit.cover)), child: Text('Container Text', style: TextStyle(color: Colors.white, fontSize: 30.0)),// color: Theme.of(context).primaryColor, // è¯¥å±žæ€§ä¸å¯å’Œ decoration ä¸€èµ·ä½¿ç”¨ )), ); &#125;&#125; æ•ˆæžœå›¾å¦‚ä¸‹ è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ column_main.dart æ–‡ä»¶ çœ‹åˆ°è¿™ï¼Œåº”è¯¥å¾ˆå¤šå°ä¼™ä¼´æ³¨æ„åˆ° margin å’Œ padding å±žæ€§ç”¨æ¥å’Œåˆ«çš„éƒ¨ä»¶ä¿æŒé—´è·ï¼Œé‚£â€¦é‚£æˆ‘å°±æ˜¯ä¸ç”¨ Container å‘¢(ä¸“é—¨æ¥æŒ‘äº‹çš„â€¦)ï¼Œå½“ç„¶æ²¡é—®é¢˜ï¼Œæœ‰ä¸ªä¸“é—¨ç”¨æ¥è®¾ç½®é—´è·çš„éƒ¨ä»¶ Paddingï¼Œçœ‹åå­—å°±å¯ä»¥çœ‹å‡ºæ¥ä½œç”¨äº†ï¼Œä¿®æ”¹ä¸‹ child éƒ¨åˆ†ä»£ç ï¼Œè¿™è¾¹å…ˆæå‰ç”¨ä¸‹æŽ¥ä¸‹æ¥ä¼šè®²çš„éƒ¨ä»¶ 1234567891011child: Column( children: &lt;Widget&gt;[ Text('Container Text', style: TextStyle(color: Colors.white, fontSize: 30.0)), Padding( // éœ€è¦ä¼ å…¥ä¸€ä¸ªé—´éš”å€¼ï¼Œ`Flutter` æä¾›äº†å¾ˆå¤š EdgeInsets æ¥è®¾ç½®é—´éš”ï¼Œ // å‚æ•°ä¹Ÿå¾ˆæ˜Žç¡®ï¼Œå¯ä»¥ä¸€ä¸€å°è¯• padding: const EdgeInsets.symmetric(vertical: 12.0), // ä¼ å…¥éœ€è¦é—´éš”çš„éƒ¨ä»¶ child: Text('Container Text', style: TextStyle(color: Colors.white, fontSize: 30.0))) ], ), æ•ˆæžœå°±ä¸å±•ç¤ºäº†ï¼ŒæŽ¥ä¸‹æ¥å°±è¦å¼€å§‹æˆ‘çš„å¡«å‘ä¹‹æ—…äº†â€¦. 2ã€Flexï¼ŒRowï¼ŒColumnå†™ Android çš„å°ä¼™ä¼´åº”è¯¥æ¯”è¾ƒå¸¸ç”¨ LinearLayoutï¼Œåœ¨ Flutter ä¸­ç”¨ä¸¤ä¸ªéƒ¨ä»¶ï¼ŒRow Columnæ¥ä»£æ›¿ Android ä¸­çš„ LinearLayoutï¼Œå…¶ä¸­ Row æ˜¯æ¨ªå‘å¸ƒå±€ï¼ŒColumn æ˜¯åž‚ç›´å¸ƒå±€ï¼Œå› ä¸º Row å’Œ Column éƒ½æ˜¯ç»§æ‰¿äºŽ Flex éƒ¨ä»¶ï¼ŒFlex æ¯”ä»–ä»¬å¤šäº† direction å±žæ€§ç”¨æ¥æŒ‡å®šæ–¹å‘ï¼Œæ‰€ä»¥ä¸»è¦æ‹¿ Column æ¥è®²è§£ï¼ŒFlex ã€Row ç”¨æ³•ç›¸åŒ 123456789101112131415Column(&#123; Key key, // å¯¹é½æ–¹å¼ï¼Œå¯¹äºŽ `Column` start ä¸ºé¡¶éƒ¨ï¼Œå¯¹äºŽ `Row` éœ€è¦åˆ†è¯­è¨€ï¼Œå’Œè¯­è¨€åŒå‘ // 3 ç§æ¯”è¾ƒç‰¹æ®Šçš„å¯¹é½æ–¹å¼ï¼Œå‰ç«¯çš„å°ä¼™ä¼´ä¼šäº†è§£ï¼Œ // spaceAround ä¸¤ä¸ªéƒ¨ä»¶ä¹‹é—´çš„é—´éš”æ˜¯éƒ¨ä»¶å’Œä¸Šå±‚å®¹å™¨é—´éš”çš„ä¸¤å€ // spaceBetween ä¸¤ä¾§éƒ¨ä»¶åŒä¸Šå±‚å®¹å™¨é—´éš”ä¸º 0ï¼Œéƒ¨ä»¶ä¹‹é—´çš„é—´éš”ç›¸ç­‰ // spaceEvenly éƒ¨ä»¶ä¹‹é—´çš„é—´éš”åŒä¸¤ä¾§éƒ¨ä»¶ä¸Žä¸Šå±‚å®¹å™¨é—´éš” MainAxisAlignment mainAxisAlignment = MainAxisAlignment.start, MainAxisSize mainAxisSize = MainAxisSize.max, // ä¸»è½´çš„å¤§å° CrossAxisAlignment crossAxisAlignment = CrossAxisAlignment.center, // å‰¯è½´å¯¹é½æ–¹å¼ TextDirection textDirection, // æ–‡å­—æ–¹å‘ï¼Œå†³å®š start VerticalDirection verticalDirection = VerticalDirection.down, // åž‚ç›´æ–¹å‘ TextBaseline textBaseline, List&lt;Widget&gt; children = const &lt;Widget&gt;[], // å†…éƒ¨å­éƒ¨ä»¶ &#125;) Row å’Œ Column éƒ½æœ‰ä¸»è½´å’Œå‰¯è½´ï¼Œå¦‚ä½•åŒºåˆ†å‘¢ï¼Œå¸ƒå±€å¹³è¡Œæ–¹å‘ä¸ºä¸»è½´ï¼Œåž‚ç›´æ–¹å‘ä¸ºå‰¯è½´ï¼Œæˆ‘ä»¬æŠŠ Container çš„ child ä¿®æ”¹æˆ Columnï¼Œç„¶åŽæŠŠ Text æ”¾åˆ° Column ä¸­ï¼Œå¤šæ”¾å‡ ä¸ªï¼Œç„¶åŽè‡ªå·±è®¾ç½® mainAxisAlignment å±žæ€§ï¼ŒæŸ¥çœ‹å¸ƒå±€çš„å˜åŒ– 1234567891011// ... çœç•¥ç›¸åŒä»£ç child: Column( mainAxisAlignment: MainAxisAlignment.spaceAround, children: &lt;Widget&gt;[ Text('Container Text 1', style: TextStyle(color: Colors.white, fontSize: 30.0)), Text('Container Text 2', style: TextStyle(color: Colors.white, fontSize: 30.0)), Text('Container Text 3', style: TextStyle(color: Colors.white, fontSize: 30.0)), Text('Container Text 4', style: TextStyle(color: Colors.white, fontSize: 30.0)), Text('Container Text 5', style: TextStyle(color: Colors.white, fontSize: 30.0)), ], ) æœ€åŽçš„æ•ˆæžœå›¾å¦‚ä¸‹ è¿™è¾¹ Column å†…éƒ¨çš„å­éƒ¨ä»¶å› ä¸ºé«˜åº¦ç›¸åŒï¼Œå¦‚æžœä¸åŒè¿˜éœ€è¦ç­‰åˆ†ç©ºé—´çš„è¯ï¼Œå°±ä¸å¯ä»¥é€šè¿‡è®¾ç½® mainAxisAlignment å±žæ€§æ¥å®žçŽ°äº†ï¼Œè¿™é‡Œä»‹ç»ä¸€ä¸ªç­‰åˆ†çš„éƒ¨ä»¶ Expanded 12345const Expanded(&#123; Key key, int flex = 1, // æ‰€å æ¯”ä¾‹ @required Widget child, // å­éƒ¨ä»¶ &#125;) ç›´æŽ¥ç»™ Text å¤–å±‚åŠ ä¸€ä¸ª Expanded å³å¯å®žçŽ°æ•ˆæžœï¼Œå½“ç„¶å¯ä»¥æŒ‰ç…§éœ€æ±‚æ¥è®¾ç½® flex æ¥ä¿®æ”¹æ¯”ä¾‹å€¼ã€‚ å½“ç„¶ï¼Œåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿä¼šé‡åˆ°é‚£ä¹ˆäº›å‘ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸‹ä»£ç ï¼ŒæŠŠ child çš„ä»£ç ä¿®æ”¹æˆå¦‚ä¸‹ 123456789child: Row( children: &lt;Widget&gt;[ Text('ABC' * 5, style: TextStyle(color: Colors.white, fontSize: 16.0)), Text('ABC' * 5, style: TextStyle(color: Colors.white, fontSize: 16.0)), Text('ABC' * 5, style: TextStyle(color: Colors.white, fontSize: 16.0)), Text('ABC' * 5, style: TextStyle(color: Colors.white, fontSize: 16.0)), Text('ABC' * 5, style: TextStyle(color: Colors.white, fontSize: 16.0)) ], ) ç„¶åŽè¿è¡Œä¸‹ï¼Œä½ çš„å±å¹•å°±æç¤ºä½  RIGHT OVERFLOWED BY XXX PIXELS ã€Œ, ***ã€æˆ‘çŒœä½ å†…å¿ƒè‚¯å®šè¿™æ ·çš„ï¼Œå†·é™å†·é™ æ—¢ç„¶é‡åˆ°é—®é¢˜ï¼Œå½“ç„¶è¦è§£å†³ï¼Œä¸ç„¶å’Œäº§å“åŽ»æ’•é€¼å—..ï¼Ÿè¿™è¾¹ï¼Œæˆ‘ä»¬æŠŠ Row æ¢æˆå¦ä¸€ä¸ªå¸ƒå±€ Wrap ç„¶åŽå†è¿è¡Œï¼ŒPrefectï¼ŒWrap å’Œ Row çš„å‚æ•°åŸºæœ¬ç±»ä¼¼ 3ã€Wrap123456789101112Wrap(&#123; Key key, this.direction = Axis.horizontal, this.alignment = WrapAlignment.start, this.spacing = 0.0, // ä¸¤ä¸ªå­éƒ¨ä»¶ä¹‹é—´çš„é—´éš”ï¼Œé»˜è®¤ 0.0ï¼Œå¦‚æžœå€¼è¿‡å¤§ï¼Œå¯èƒ½å¯¼è‡´åŽŸæ¥åŒè¡Œçš„ä¸¤ä¸ªéƒ¨ä»¶åˆ†è¡Œ this.runAlignment = WrapAlignment.start, this.runSpacing = 0.0, // æŽ’å¸ƒæ–¹å‘ä¸Š ä¸¤ä¸ªå­éƒ¨ä»¶çš„é—´éš” this.crossAxisAlignment = WrapCrossAlignment.start, this.textDirection, this.verticalDirection = VerticalDirection.down, List&lt;Widget&gt; children = const &lt;Widget&gt;[], &#125;) å½“ç„¶ï¼Œå¾ˆå¤šæ—¶å€™åªæœ‰ä»¥ä¸Šçš„å¸ƒå±€æ˜¯ä¸è¡Œçš„ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦å®žçŽ°ä¸€ä¸ªåœ†å½¢å¤´åƒï¼Œç„¶åŽä¸€æ®µæ–‡å­—åœ¨å…¶ä¸Šé¢ ï¼Œä¾‹å¦‚ä¸‹é¢çš„æ•ˆæžœ æŽ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸ªå †å çš„éƒ¨ä»¶ Stackï¼Œæºç æ¯”è¾ƒç®€å•ï¼Œå°±ä¸è´´äº†ï¼Œç›´æŽ¥ä¸Šæ•ˆæžœä»£ç  123456789101112131415161718class HomePage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( body: Center( child: Stack( // å†…éƒ¨å­éƒ¨ä»¶çš„å¯¹é½æ–¹å¼ alignment: Alignment.center, children: &lt;Widget&gt;[ // åœ†å½¢å¤´åƒï¼ŒæŒ‡å®šåŠå¾„ï¼ŒæŒ‡å®šèƒŒæ™¯å›¾ä¸ºå¤´åƒå³å¯ CircleAvatar(backgroundImage: AssetImage('images/ali.jpg'), radius: 100.0), Text( 'Kuky', style: TextStyle(color: Colors.white, fontSize: 34.0)), ], )), ); &#125;&#125; å¦‚æžœæˆ‘ä»¬éœ€è¦ç¬¬ä¸‰ä¸ªéƒ¨ä»¶ï¼Œåº•éƒ¨è·ç¦»åœ†å½¢å¤´åƒ10pxï¼Œé‚£ä¹ˆåªé  alignment æ˜¯ä¸å¯èƒ½å®žçŽ°äº† æ‰€ä»¥ï¼Œå¦å¤–ä¸€ä¸ªç°å¸¸æµå¼Šçš„éƒ¨ä»¶å°±å‡ºæ¥äº† Positionedï¼Œå…¶æºç ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œæˆ‘è¿˜æ˜¯ä¸è´´äº†å§~ï¼Œè¿˜æ˜¯ç›´æŽ¥ä¸Šä»£ç ï¼Œç›´æŽ¥ä¿®æ”¹ 12345678910111213141516171819class HomePage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( body: Center( child: Stack( alignment: Alignment.center, children: &lt;Widget&gt;[ CircleAvatar(backgroundImage: AssetImage('images/ali.jpg'), radius: 100.0), Text( 'Kuky', style: TextStyle(color: Colors.white, fontSize: 34.0), ), Positioned(child: Text('å¦å¤–ä¸€æ®µæ–‡å­—', style: TextStyle(color: Colors.white, fontSize: 20.0)), bottom: 10.0), // left, right, top, bottom åˆ†åˆ«è¡¨ç¤ºå’Œ stack çš„é—´è· ], )), ); &#125;&#125; æœ€åŽçš„æ•ˆæžœå›¾å¦‚ä¸‹ å¾ˆå¥½ï¼Œä»Šå¤©å¡«äº†å¸ƒå±€çš„è¿™ä¸ªå¤§å‘ï¼Œè€Œä¸”è®²çš„éƒ¨ä»¶è²Œä¼¼è¿˜æŒºå¤šçš„ï¼Œè™½ç„¶è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œå‰©ä¸‹çš„å°±ç»™å°ä¼™ä¼´ä»¬æ…¢æ…¢æ¶ˆåŒ–ä»Šå¤©çš„å†…å®¹ã€‚ ä¸‹èŠ‚ï¼Œé™¤äº†æœ‰å¸¸ç”¨çš„éƒ¨ä»¶å¤–ï¼Œæˆ‘ä¼šå°½é‡åŠ ä¸Šå®žæˆ˜å†…å®¹ ä»£ç åœ°å€: https://github.com/kukyxs/flutter_arts_demos_app]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(ä¸‰)å¿«é€Ÿæ­å»ºç•Œé¢]]></title>
    <url>%2Fposts%2F5c762cf7.html</url>
    <content type="text"><![CDATA[ä¸Šä¸€ç¯‡è®²å®Œ Flutter ä¸­çš„ä¸€äº›åŸºæœ¬éƒ¨ä»¶ï¼Œè¿™ç¯‡å°±å…ˆå¡«å®Œä¸Šç¯‡ç•™ä¸‹çš„æ²¡å†™çš„ AppBar çš„å‘ï¼Œä»¥åŠ Scaffold å…¶ä»–å‚æ•°çš„ä½¿ç”¨ï¼Œåœ¨å¼€å§‹å‰ï¼Œå…ˆè¡¥ä¸€å¼ ç¼©ç•¥ç‰ˆçš„è„‘å›¾ 1ã€AppBarè¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬åªå…³æ³¨ Scaffold ä¸­çš„ AppBar å‰©ä¸‹çš„è¿˜æ˜¯åŸ‹å‘ã€å‘4ã€‘(ï¼Œå±…ç„¶å·²ç»åŸ‹äº†é‚£ä¹ˆå¤šå‘äº†ï¼Œå‘è™½å¤šï¼Œä»£ç è¿˜æ˜¯è¦ç»§ç»­çš„)ï¼Œå› ä¸ºç¨åŽä¼šç”¨åˆ° StatefulWidget çš„å±žæ€§ï¼Œæ‰€ä»¥å°±ç›´æŽ¥å…ˆä½¿ç”¨äº†ï¼Œå’Œ StatelessWidget åŒºåˆ«ç”¨æ³•å¯ä»¥è¿™ä¹ˆè®° éœ€è¦æ•°æ®æ›´æ–°çš„ç•Œé¢ç”¨ StatefulWidgetï¼Œå½“ç„¶ä¹Ÿä¸æ˜¯ç»å¯¹çš„ï¼Œå°±æ˜¯ä¹‹å‰ç•™çš„ã€å‘1ã€‘æ‰€è¯´çš„çŠ¶æ€ç®¡ç† 1234567891011121314151617181920212223242526272829class HomePage extends StatefulWidget &#123; @override _HomePageState createState() =&gt; _HomePageState();&#125;class _HomePageState extends State&lt;HomePage&gt; &#123; List&lt;String&gt; _abs = ['A', 'B', 'S']; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( centerTitle: true, // æ ‡é¢˜å†…å®¹å±…ä¸­ automaticallyImplyLeading: false, // ä¸ä½¿ç”¨é»˜è®¤ leading: Icon(Icons.menu, color: Colors.red, size: 30.0), // å·¦ä¾§æŒ‰é’® flexibleSpace: Image.asset('images/app_bar_hor.jpg', fit: BoxFit.cover), // èƒŒæ™¯ title: Text('AppBar Demo', style: TextStyle(color: Colors.red)), // æ ‡é¢˜å†…å®¹ // æœ«å°¾çš„æ“ä½œæŒ‰é’®åˆ—è¡¨ actions: &lt;Widget&gt;[ PopupMenuButton( onSelected: (val) =&gt; print('Selected item is $val'), icon: Icon(Icons.more_vert, color: Colors.red), itemBuilder: (context) =&gt; List.generate(_abs.length, (index) =&gt; PopupMenuItem(value: _abs[index], child: Text(_abs[index])))) ], ), ); &#125;&#125; æœ€åŽçš„æ•ˆæžœå›¾ï¼Œæœªç‚¹å‡»å³ä¾§æŒ‰é’®å¦‚å·¦ä¾§æ‰€ç¤ºï¼Œç‚¹å‡»å³ä¾§æŒ‰é’®ä¼šå¼¹å‡ºç›¸åº”çš„ mune è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ app_bar_main.dart æ–‡ä»¶ çœ‹åˆ°æ•ˆæžœå›¾ï¼Œç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´ä¼šåæ§½ï¼Œã€Œ**ï¼Œä¸Šé¢é‚£å±‚åŠé€æ˜Žçš„å•¥çŽ©æ„ï¼Œé‚£ä¹ˆä¸‘ã€ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¿®æ”¹ void main æ–¹æ³• 123456789void main() &#123; runApp(DemoApp()); // æ·»åŠ å¦‚ä¸‹ä»£ç ï¼Œä½¿çŠ¶æ€æ é€æ˜Ž if (Platform.isAndroid) &#123; var style = SystemUiOverlayStyle(statusBarColor: Colors.transparent); SystemChrome.setSystemUIOverlayStyle(style); &#125;&#125; å…³é—­åŽé‡æ–°è¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°é‚£å±‚ä¸‘ä¸‘çš„ã€ŒåŠé€æ˜Žè’™å±‚ã€æ²¡æœ‰äº† æŽ¥ç€ä»‹ç»ä¸‹ PopupMenuButton è¿™ä¸ªéƒ¨ä»¶ï¼Œè¿˜æ˜¯æŒ‰ç…§æƒ¯ä¾‹çœ‹æž„é€ å‡½æ•° 123456789101112131415161718// itemBuildertypedef PopupMenuItemBuilder&lt;T&gt; = List&lt;PopupMenuEntry&lt;T&gt;&gt; Function(BuildContext context);// onSelectedtypedef PopupMenuItemSelected&lt;T&gt; = void Function(T value);const PopupMenuButton(&#123; Key key, @required this.itemBuilder, // ç”¨äºŽå®šä¹‰ menu åˆ—è¡¨ï¼Œéœ€è¦ä¼ å…¥ List&lt;PopupMenuEntry&lt;T&gt;&gt; this.initialValue, // åˆå§‹å€¼ï¼Œæ˜¯ä¸ªæ³›åž‹ Tï¼Œä¹Ÿå°±æ˜¯ç±»åž‹å’Œä½ ä¼ å…¥çš„å€¼æœ‰å…³ this.onSelected, // é€‰ä¸­ item çš„å›žè°ƒå‡½æ•°ï¼Œè¿”å›ž T valueï¼Œä¾‹å¦‚é€‰ä¸­ `s` åˆ™è¿”å›ž s this.onCanceled, // æœªé€‰æ‹©ä»»ä½• menuï¼Œç›´æŽ¥ç‚¹å‡»å¤–ä¾§ä½¿ mune åˆ—è¡¨å…³é—­çš„å›žè°ƒ this.tooltip, // é•¿æŒ‰æ—¶çš„æç¤º this.elevation = 8.0, this.padding = const EdgeInsets.all(8.0), this.child, // ç”¨äºŽè‡ªå®šä¹‰æŒ‰é’®çš„å†…å®¹ this.icon, // æŒ‰é’®çš„å›¾æ ‡ this.offset = Offset.zero, // å±•ç¤ºæ—¶å€™çš„ä¾¿å®œï¼ŒOffset éœ€è¦ä¼ å…¥ x,y è½´åç§»é‡ï¼Œä¼šæ ¹æ®ä¼ å…¥å€¼å¹³ç§» &#125;) 2ã€AppBar - bottomAppBar è¿˜æœ‰ä¸ª bottom å±žæ€§æ²¡è®²ï¼Œå› ä¸º bottom è¿™ä¸ªå±žæ€§å’Œå›¾ç‰‡èƒŒæ™¯ä¸€èµ·ä½¿ç”¨ä¼šæ¯”è¾ƒä¸‘ï¼Œæ‰€ä»¥å°±å•ç‹¬æ‹Žå‡ºæ¥è®²ï¼Œæˆ‘ä»¬ç›´æŽ¥åœ¨åŽŸæ¥çš„ä»£ç ä¸Šä¿®æ”¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849// è¿™é‡Œéœ€è¦ç”¨ with å¼•å…¥ `SingleTickerProviderStateMixin` è¿™ä¸ªç±»class _HomePageState extends State&lt;HomePage&gt; with SingleTickerProviderStateMixin &#123; List&lt;String&gt; _abs = ['A', 'B', 'S']; TabController _tabController; // TabBar å¿…é¡»ä¼ å…¥è¿™ä¸ªå‚æ•° @override void initState() &#123; super.initState(); // å¼•å…¥ `SingleTickerProviderStateMixin` ç±»ä¸»è¦æ˜¯å› ä¸º _tabController éœ€è¦ä¼ å…¥ vsync å‚æ•° _tabController = TabController(length: _abs.length, vsync: this); &#125; @override void dispose() &#123; // éœ€è¦åœ¨ç•Œé¢ dispose ä¹‹å‰æŠŠ _tabController disposeï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ _tabController.dispose(); super.dispose(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( centerTitle: true, automaticallyImplyLeading: false, leading: Icon(Icons.menu, color: Colors.red, size: 30.0),// flexibleSpace: Image.asset('images/app_bar_hor.jpg', fit: BoxFit.cover), title: Text('AppBar Demo', style: TextStyle(color: Colors.red)), actions: &lt;Widget&gt;[ PopupMenuButton( offset: Offset(50.0, 100.0), onSelected: (val) =&gt; print('Selected item is $val'), icon: Icon(Icons.more_vert, color: Colors.red), itemBuilder: (context) =&gt; List.generate(_abs.length, (index) =&gt; PopupMenuItem(value: _abs[index], child: Text(_abs[index])))) ], bottom: TabBar( labelColor: Colors.red, // é€‰ä¸­æ—¶çš„é¢œè‰² unselectedLabelColor: Colors.white, // æœªé€‰ä¸­é¢œè‰² controller: _tabController, isScrollable: false, // æ˜¯å¦å›ºå®šï¼Œå½“è¶…è¿‡ä¸€å®šæ•°é‡çš„ tab æ—¶ï¼Œå¦‚æžœä¸€è¡ŒæŽ’ä¸ä¸‹ï¼Œå¯è®¾ç½® true indicatorColor: Colors.yellow, // å¯¼èˆªçš„é¢œè‰² indicatorSize: TabBarIndicatorSize.tab, // å¯¼èˆªæ ·å¼ï¼Œè¿˜æœ‰ä¸ªé€‰é¡¹æ˜¯ TabBarIndicatorSize.label tab æ—¶å€™ï¼Œå¯¼èˆªå’Œ tab åŒå®½ï¼Œlabel æ—¶å€™ï¼Œå¯¼èˆªå’Œ icon åŒå®½ indicatorWeight: 5.0, // å¯¼èˆªé«˜åº¦ tabs: List.generate(_abs.length, (index) =&gt; Tab(text: _abs[index], icon: Icon(Icons.android)))), // å¯¼èˆªå†…å®¹åˆ—è¡¨ ), ); &#125;&#125; æœ€ç»ˆçš„æ•ˆæžœå›¾å¦‚ä¸‹ 3ã€PageView + TabBaré‚£ä¹ˆå¦‚ä½•é€šè¿‡ TabBar åˆ‡æ¢ç•Œé¢å‘¢ï¼Œè¿™è¾¹æˆ‘ä»¬éœ€è¦ç”¨åˆ° PageView è¿™ä¸ªéƒ¨ä»¶ï¼Œå½“ç„¶è¿˜æœ‰åˆ«çš„éƒ¨ä»¶ï¼Œä¾‹å¦‚ IndexStack ç­‰ï¼Œå°ä¼™ä¼´å¯ä»¥è‡ªå·±å°è¯•ä½¿ç”¨åˆ«çš„ï¼Œè¿™è¾¹é€šè¿‡ PageView å’Œ TabBar è¿›è¡Œå…³è”ï¼Œå¸¦åŠ¨é¡µé¢åˆ‡æ¢ï¼ŒPageViede çš„å±žæ€§å‚æ•°ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œè¿™è¾¹å°±ä¸è´´å•¦ã€‚æœ€ç»ˆçš„æ•ˆæžœæˆ‘ä»¬ç›®å‰åªå±•ç¤ºä¸€ä¸ªæ–‡å­—å³å¯ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªé€šç”¨çš„åˆ‡æ¢ç•Œé¢ 12345678910111213141516class TabChangePage extends StatelessWidget &#123; // éœ€è¦ä¼ å…¥çš„å‚æ•° final String content; // TabChangePage(this.content); ä¸æŽ¨èè¿™æ ·å†™æž„é€ æ–¹æ³• // æŽ¨èç”¨è¿™æ ·çš„æž„é€ æ–¹æ³•ï¼Œkey å¯ä»¥ä½œä¸ºå”¯ä¸€å€¼æŸ¥æ‰¾ TabChangePage(&#123;Key key, this.content&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; // ä»…å±•ç¤ºä¼ å…¥çš„å†…å®¹ return Container( alignment: Alignment.center, child: Text(content, style: TextStyle(color: Theme.of(context).primaryColor, fontSize: 30.0))); &#125;&#125; å®šä¹‰é€šç”¨ç•Œé¢åŽï¼Œå°±å¯ä»¥ä½œä¸º PageView çš„å­ç•Œé¢ä¼ å…¥å¹¶å±•ç¤º 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677class HomePage extends StatefulWidget &#123; @override _HomePageState createState() =&gt; _HomePageState();&#125;class _HomePageState extends State&lt;HomePage&gt; with SingleTickerProviderStateMixin &#123; List&lt;String&gt; _abs = ['A', 'B', 'S']; TabController _tabController; // ç”¨äºŽåŒ TabBar è¿›è¡Œè”åŠ¨ PageController _pageController; @override void initState() &#123; super.initState(); _tabController = TabController(length: _abs.length, vsync: this); _pageController = PageController(initialPage: 0); _tabController.addListener(() &#123; // åˆ¤æ–­ TabBar æ˜¯å¦åˆ‡æ¢ä½ç½®äº†ï¼Œå¦‚æžœåˆ‡æ¢äº†ï¼Œåˆ™ä¿®æ”¹ PageView çš„æ˜¾ç¤º if (_tabController.indexIsChanging) &#123; // PageView çš„åˆ‡æ¢é€šè¿‡ controller è¿›è¡Œæ»šåŠ¨ // duration è¡¨ç¤ºåˆ‡æ¢æ»šåŠ¨çš„æ—¶é•¿ï¼Œcurve è¡¨ç¤ºæ»šåŠ¨åŠ¨ç”»çš„æ ·å¼ï¼Œ // flutter å·²ç»åœ¨ Curves ä¸­å®šä¹‰è®¸å¤šæ ·å¼ï¼Œå¯ä»¥è‡ªè¡Œåˆ‡æ¢æŸ¥çœ‹æ•ˆæžœ _pageController.animateToPage(_tabController.index, duration: Duration(milliseconds: 300), curve: Curves.decelerate); &#125; &#125;); &#125; @override void dispose() &#123; _tabController.dispose(); super.dispose(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( centerTitle: true, automaticallyImplyLeading: false, leading: Icon(Icons.menu, color: Colors.red, size: 30.0),// flexibleSpace: Image.asset('images/app_bar_hor.jpg', fit: BoxFit.cover), title: Text('AppBar Demo', style: TextStyle(color: Colors.red)), actions: &lt;Widget&gt;[ PopupMenuButton( offset: Offset(50.0, 100.0), onSelected: (val) =&gt; print('Selected item is $val'), icon: Icon(Icons.more_vert, color: Colors.red), itemBuilder: (context) =&gt; List.generate(_abs.length, (index) =&gt; PopupMenuItem(value: _abs[index], child: Text(_abs[index])))) ], bottom: TabBar( labelColor: Colors.red, unselectedLabelColor: Colors.white, controller: _tabController, isScrollable: false, indicatorColor: Colors.yellow, indicatorSize: TabBarIndicatorSize.tab, indicatorWeight: 5.0, tabs: List.generate(_abs.length, (index) =&gt; Tab(text: _abs[index], icon: Icon(Icons.android)))), ), // é€šè¿‡ body æ¥å±•ç¤ºå†…å®¹ï¼Œbody å¯ä»¥ä¼ å…¥ä»»ä½• Widgetï¼Œé‡Œé¢å°±æ˜¯ä½ éœ€è¦å±•ç¤ºçš„ç•Œé¢å†…å®¹ // æ‰€ä»¥å‰é¢ç•™ä¸‹ Scaffold ä¸­ body éƒ¨åˆ†çš„å‘å°±è§£å†³äº† body: PageView( controller: _pageController, children: _abs.map((str) =&gt; TabChangePage(content: str)).toList(), // é€šè¿‡ Map è½¬æ¢åŽå†é€šè¿‡ toList è½¬æ¢æˆåˆ—è¡¨ï¼Œæ•ˆæžœåŒ List.generate onPageChanged: (position) &#123; // PageView åˆ‡æ¢çš„ç›‘å¬ï¼Œè¿™è¾¹åˆ‡æ¢ PageView çš„é¡µé¢åŽï¼ŒTabBar ä¹Ÿéœ€è¦éšä¹‹æ”¹å˜ // é€šè¿‡ tabController æ¥æ”¹å˜ TabBar çš„æ˜¾ç¤ºä½ç½® _tabController.index = position; &#125;, ), ); &#125;&#125; æœ€ç»ˆçš„æ•ˆæžœå›¾å°±ä¸è´´äº†ï¼Œå¯ä»¥å‘çŽ°æ»‘åŠ¨ PageView æˆ–è€…ç‚¹å‡»åˆ‡æ¢ TabBar çš„ä½ç½®ï¼Œç•Œé¢æ˜¾ç¤ºçš„å†…å®¹éƒ½ä¼šéšä¹‹æ”¹å˜ï¼ŒåŒæ—¶ï¼Œè§£å†³å‰é¢ Scaffold ç•™ä¸‹ body å±žæ€§æ²¡è®²çš„ä¸€ä¸ªå‘ï¼Œå°±å‰©ä¸‹ drawer ã€ bottomNavigationBar å±žæ€§æ²¡è®²äº†ï¼Œåœ¨è§£å†³è¿™ä¸¤ä¸ªå‘ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå¤„ç†ä¸‹å¦ä¸€ä¸ªé—®é¢˜ Scaffold èƒ½å¤Ÿä½¿æˆ‘ä»¬å¿«é€ŸåŽ»æ­å»ºä¸€ä¸ªç•Œé¢ï¼Œä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç•Œé¢éƒ½éœ€è¦ AppBar è¿™ä¸ªæ ‡é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸ä¼šä¼ å…¥ appBar çš„å±žæ€§ï¼Œæˆ‘ä»¬æ³¨é‡Š _HomePageState ä¸­ Scaffold çš„ appBar ä¼ å…¥å€¼ï¼ŒæŠŠ body ä¼ å…¥çš„ PageView ä¿®æ”¹æˆå•ä¸ª TabChangePage ï¼Œç„¶åŽæŠŠ TabChangePage è¿™ä¸ªç±»åšä¸‹ä¿®æ”¹ï¼ŒæŠŠ Container çš„ aligment å±žæ€§ä¹Ÿæ³¨é‡Šäº†ï¼Œè¿™æ ·æ˜¾ç¤ºçš„å†…å®¹å°±ä¼šæ˜¾ç¤ºåœ¨å·¦ä¸Šè§’ 1234567891011121314151617// _HomePageState// ..@override Widget build(BuildContext context) &#123; return Scaffold(body: TabChangePage(content: 'Content')); &#125;class TabChangePage extends StatelessWidget &#123; final String content; TabChangePage(&#123;Key key, this.content&#125;) : super(key: key); @override Widget build(BuildContext context) &#123; return Container(child: Text(content, style: TextStyle(color: Theme.of(context).primaryColor, fontSize: 30.0))); &#125;&#125; ç„¶åŽè¿è¡Œä¸‹ï¼Œã€Œ**ï¼Œæ–‡å­—æ€Žä¹ˆè¢«çŠ¶æ€æ ç»™æŒ¡äº†â€¦ã€ä¸è¦æ…Œï¼Œé™ä¸‹å¿ƒå–æ¯èŒ¶ï¼Œçœºæœ›ä¸‹è¿œæ–¹ï¼Œè¿™é‡Œå°±éœ€è¦ç”¨ SafeArea æ¥å¤„ç†äº†ï¼Œåœ¨ TabChangePage çš„ Container å¤–å±‚åŠ ä¸€å±‚ SafeArea 123456@override Widget build(BuildContext context) &#123; return SafeArea( child: Container(child: Text(content, style: TextStyle(color: Theme.of(context).primaryColor, fontSize: 30.0)))); &#125; ç„¶åŽé‡æ–°è¿è¡Œï¼Œä¸€åˆ‡æ­£å¸¸ï¼ŒSafeArea çš„ç”¨é€”å¯ä»¥çœ‹ä¸‹æºç çš„è§£é‡Š 12345/// A widget that insets its child by sufficient padding to avoid intrusions by/// the operating system.////// For example, this will indent the child by enough to avoid the status bar at/// the top of the screen. ç¿»è¯‘è¿‡æ¥å¤§æ¦‚å°±æ˜¯ã€Œç»™å­éƒ¨ä»¶å’Œç³»ç»Ÿç‚¹å‡»æ— æ•ˆåŒºåŸŸç•™æœ‰è¶³å¤Ÿç©ºé—´ï¼Œæ¯”å¦‚çŠ¶æ€æ å’Œç³»ç»Ÿå¯¼èˆªæ ã€ï¼ŒSafeArea å¯ä»¥å¾ˆå¥½è§£å†³åˆ˜æµ·å±è¦†ç›–é¡µé¢å†…å®¹çš„é—®é¢˜ï¼Œé‚£ä¹ˆåˆ°ç›®å‰ä¸ºæ­¢ï¼ŒAppBar çš„ä¸€äº›å‘å°±è¯´çš„å·®ä¸å¤šäº†ï¼Œå°±è¦è§£å†³å‰©ä¸‹çš„å‘äº† 4ã€Scaffold - Drawerdrawer åŒ endDrawer å±žæ€§æ˜¯ä¸€æ ·çš„ï¼Œé™¤äº†æ»‘åŠ¨çš„æ–¹å‘ï¼ŒDrawer è¿™ä¸ªç»„ä»¶ä¹Ÿç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œåªè¦ä¼ å…¥ä¸€ä¸ª child å³å¯ï¼Œåœ¨å±•ç¤ºä¹‹å‰ï¼Œå…ˆå¯¹ appBar åšä¸‹å¤„ç†ï¼Œè®¾ç½® leading ä¸ºç³»ç»Ÿé»˜è®¤ï¼Œç‚¹å‡» leading çš„æ—¶å€™ Drawer å°±å¯ä»¥æ»‘å‡ºæ¥äº†ï¼Œå½“ç„¶æ‰‹åŠ¨æ»‘ä¹Ÿå¯ä»¥ 123456789101112131415161718192021222324252627282930313233343536373839@override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( centerTitle: true,// automaticallyImplyLeading: false,// leading: Icon(Icons.menu, color: Colors.red, size: 30.0),// flexibleSpace: Image.asset('images/app_bar_hor.jpg', fit: BoxFit.cover), title: Text('AppBar Demo', style: TextStyle(color: Colors.red)), actions: &lt;Widget&gt;[ PopupMenuButton( offset: Offset(50.0, 100.0), onSelected: (val) =&gt; print('Selected item is $val'), icon: Icon(Icons.more_vert, color: Colors.red), itemBuilder: (context) =&gt; List.generate(_abs.length, (index) =&gt; PopupMenuItem(value: _abs[index], child: Text(_abs[index])))) ], bottom: TabBar( labelColor: Colors.red, unselectedLabelColor: Colors.white, controller: _tabController, isScrollable: false, indicatorColor: Colors.yellow, indicatorSize: TabBarIndicatorSize.tab, indicatorWeight: 5.0, tabs: List.generate(_abs.length, (index) =&gt; Tab(text: _abs[index], icon: Icon(Icons.android)))), ), // body .... drawer: Drawer( // è®°å¾—è¦å…ˆæ·»åŠ  `SafeArea` é˜²æ­¢è§†å›¾é¡¶åˆ°çŠ¶æ€æ ä¸‹é¢ child: SafeArea( child: Container( child: Text('Drawer', style: TextStyle(color: Theme.of(context).primaryColor, fontSize: 30.0)), )), ), ); // return Scaffold(body: TabChangePage(content: 'Content')); &#125; æœ€ç»ˆçš„æ•ˆæžœå›¾ä¹Ÿä¸è´´äº†ï¼Œå½“æ‰‹åŠ¿ä»Žå·¦ä¾§æ»‘å‡ºæˆ–è€…ç‚¹å‡» leading å›¾æ ‡ï¼ŒæŠ½å±‰å°±å‡ºæ¥äº† 5ã€AppBar - bottomNavigationBarbottomNavigarionBar å¯ä»¥ä¼ å…¥ä¸€ä¸ª BottomNavigationBar å®žä¾‹ï¼ŒBottomNavigationBar éœ€è¦ä¼ å…¥ BottomNavigationBarItem åˆ—è¡¨ä½œä¸º items ï¼Œä½†æ˜¯è¿™è¾¹ä¸ºäº†å®žçŽ°ä¸€ä¸ª bottomNavigationBar å’Œ floatingActionButton ä¸€ä¸ªç‰¹æ®Šçš„ç»„åˆæ•ˆæžœï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ BottomNavigationBarï¼Œæ¢åš BottomAppBarï¼Œç›´æŽ¥ä¸Šä»£ç å§ 1234567891011121314151617181920@override Widget build(BuildContext context) &#123; return Scaffold( /// ä¸€æ ·çš„ä»£ç çœç•¥.... bottomNavigationBar: BottomAppBar( shape: CircularNotchedRectangle(), child: Row( mainAxisSize: MainAxisSize.max, mainAxisAlignment: MainAxisAlignment.spaceAround, children: &lt;Widget&gt;[ IconButton(icon: Icon(Icons.android, size: 30.0, color: Theme.of(context).primaryColor), onPressed: () &#123;&#125;), IconButton(icon: Icon(Icons.people, size: 30.0, color: Theme.of(context).primaryColor), onPressed: () &#123;&#125;) ], ), ), floatingActionButton: FloatingActionButton(onPressed: () =&gt; print('Add'), child: Icon(Icons.add, color: Colors.white)), // FAB çš„ä½ç½®ï¼Œä¸€å…±æœ‰ 7 ä¸­ä½ç½®å¯ä»¥é€‰æ‹©ï¼ŒcenterDocked, endDocked, centerFloat, endFloat, endTop, startTop, miniStartTopï¼Œè¿™è¾¹é€‰æ‹©æ‚¬æµ®åœ¨ dock floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked, ); æœ€ç»ˆçš„æ•ˆæžœå›¾ ![image-20190425161447777](/Users/zm/Library/Application Support/typora-user-images/image-20190425161447777.png) æ—¢ç„¶æåˆ°äº† StatefulWidgetï¼Œé¡ºå¸¦æä¸‹ä¸¤ç§æ¯”è¾ƒç®€å•çš„éƒ¨ä»¶ï¼Œä¹Ÿç®—æ˜¯åŸºç¡€éƒ¨ä»¶å§ã€‚CheckBoxã€CheckboxListTileï¼ŒSwitchã€SwitchListTile å› ä¸ºæ¯”è¾ƒç®€å•ï¼Œå°±ç›´æŽ¥ä¸Šä»£ç äº†ï¼Œé‡Œé¢éƒ½æœ‰å®Œæ•´çš„æ³¨é‡Š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102class CheckSwitchDemoPage extends StatefulWidget &#123; @override _CheckSwitchDemoPageState createState() =&gt; _CheckSwitchDemoPageState();&#125;class _CheckSwitchDemoPageState extends State&lt;CheckSwitchDemoPage&gt; &#123; var _isChecked = false; var _isTitleChecked = false; var _isOn = false; var _isTitleOn = false; @override void initState() &#123; super.initState(); &#125; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar( title: Text('Check Switch Demo'), ), body: Column(children: &lt;Widget&gt;[ Row( children: &lt;Widget&gt;[ Checkbox( // æ˜¯å¦å¼€å¯ä¸‰æ€ tristate: true, // æŽ§åˆ¶å½“å‰ checkbox çš„å¼€å¯çŠ¶æ€ value: _isChecked, // ä¸è®¾ç½®è¯¥æ–¹æ³•ï¼Œå¤„äºŽä¸å¯ç”¨çŠ¶æ€ onChanged: (checked) &#123; // ç®¡ç†çŠ¶æ€å€¼ setState(() =&gt; _isChecked = checked); &#125;, // é€‰ä¸­æ—¶çš„é¢œè‰² activeColor: Colors.pink, // è¿™ä¸ªå€¼æœ‰ padded å’Œ shrinkWrap ä¸¤ä¸ªå€¼ï¼Œ // padded æ—¶å€™æ‰€å æœ‰çš„ç©ºé—´æ¯” shrinkWrap å¤§ï¼Œåˆ«çš„åŽŸè°…æˆ‘æ²¡çœ‹å‡ºå•¥ materialTapTargetSize: MaterialTapTargetSize.shrinkWrap, ), /// ç‚¹å‡»æ— å“åº” Checkbox(value: _isChecked, onChanged: null, tristate: true) ], ), Row( children: &lt;Widget&gt;[ Switch( // å¼€å¯æ—¶å€™ï¼Œé‚£ä¸ªæ¡çš„é¢œè‰² activeTrackColor: Colors.yellow, // å…³é—­æ—¶å€™ï¼Œé‚£ä¸ªæ¡çš„é¢œè‰² inactiveTrackColor: Colors.yellow[200], // è®¾ç½®æŒ‡ç¤ºå™¨çš„å›¾ç‰‡ï¼Œå½“ç„¶ä¹Ÿæœ‰ color å¯ä»¥è®¾ç½® activeThumbImage: AssetImage('images/ali.jpg'), inactiveThumbImage: AssetImage('images/ali.jpg'), // å¼€å§‹æ—¶å€™çš„é¢œè‰²ï¼Œè²Œä¼¼ä¼šè¢« activeTrackColor é¡¶æŽ‰ activeColor: Colors.pink, materialTapTargetSize: MaterialTapTargetSize.shrinkWrap, value: _isOn, onChanged: (onState) &#123; setState(() =&gt; _isOn = onState); &#125;), /// ç‚¹å‡»æ— å“åº” Switch(value: _isOn, onChanged: null) ], ), CheckboxListTile( // æè¿°é€‰é¡¹ title: Text('Make this item checked'), // äºŒçº§æè¿° subtitle: Text('description...description...\ndescription...description...'), // å’Œ checkbox å¯¹ç«‹è¾¹çš„éƒ¨ä»¶ï¼Œä¾‹å¦‚ checkbox åœ¨å¤´éƒ¨ï¼Œåˆ™ secondary åœ¨å°¾éƒ¨ secondary: Image.asset('images/ali.jpg', width: 30.0, height: 30.0), value: _isTitleChecked, // title å’Œ subtitle æ˜¯å¦ä¸ºåž‚ç›´å¯†é›†åˆ—è¡¨ä¸­ä¸€å‘˜ï¼Œæœ€æ˜Žæ˜¾å°±æ˜¯éƒ¨ä»¶ä¼šå˜å° dense: true, // æ˜¯å¦éœ€è¦ä½¿ç”¨ 3 è¡Œçš„é«˜åº¦ï¼Œè¯¥å€¼ä¸º true æ—¶å€™ï¼Œsubtitle ä¸å¯ä¸ºç©º isThreeLine: true, // æŽ§åˆ¶ checkbox é€‰æ‹©æ¡†æ˜¯åœ¨å‰é¢è¿˜æ˜¯åŽé¢ controlAffinity: ListTileControlAffinity.leading, // æ˜¯å¦å°†ä¸»é¢˜è‰²åº”ç”¨åˆ°æ–‡å­—æˆ–è€…å›¾æ ‡ selected: true, onChanged: (checked) &#123; setState(() =&gt; _isTitleChecked = checked); &#125;, ), SwitchListTile( title: Text('Turn On this item'), subtitle: Text('description...description...\ndescription...description...'), secondary: Image.asset('images/ali.jpg', width: 30.0, height: 30.0), isThreeLine: true, value: _isTitleOn, selected: true, onChanged: (onState) &#123; setState(() =&gt; _isTitleOn = onState); &#125;) ]), ); &#125;&#125; è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹ checkbox_swicth_main.dart æ–‡ä»¶ ç»ˆäºŽè¿™èŠ‚æŠŠ Scaffold ç•™ä¸‹çš„å‘éƒ½å¡«å®Œäº†ï¼Œç„¶åŽåˆè®²äº†ä¸¤ç§åŸºç¡€éƒ¨ä»¶ï¼Œä¸‹èŠ‚è¦å¡«ç•™ä¸‹çš„åˆ«çš„å‘äº†ï¼Œç›®æµ‹è¿˜ç•™äº† 2 ä¸ªå¤§å‘ï¼Œé‚£å°±ç­‰ä»¥åŽç»§ç»­è§£å†³å§~ æœ€åŽä»£ç çš„åœ°å€è¿˜æ˜¯è¦çš„ï¼š æ–‡ç« ä¸­æ¶‰åŠçš„ä»£ç ï¼šdemos åŸºäºŽéƒ­ç¥ž cool weather æŽ¥å£çš„ä¸€ä¸ªé¡¹ç›®ï¼Œå®žçŽ° BLoC æ¨¡å¼ï¼Œå®žçŽ°çŠ¶æ€ç®¡ç†ï¼šflutter_weather ä¸€ä¸ªè¯¾ç¨‹(å½“æ—¶ä¹°äº†æƒ³çœ‹ä¸‹ä»£ç è§„èŒƒçš„ï¼Œä»£ç æ›´æ–°ä¼šæ¯”è¾ƒæ…¢ï¼Œè™½ç„¶æ˜¯è·Ÿç€è¯¾ä¸Šçš„ä¸€äº›å†™ä»£ç ï¼Œä½†æ˜¯è¿˜æ˜¯åšäº†è‡ªå·±çš„ä¿®æ”¹ï¼Œå¾ˆå¤šåœ°æ–¹çœ‹ç€ä¸èˆ’æœï¼Œç„¶åŽå°±æ”¹æˆè‡ªå·±çš„å®žçŽ°æ–¹å¼äº†)ï¼šflutter_shop ä½œè€…ï¼šKuky_xs é“¾æŽ¥ï¼šhttps://www.jianshu.com/p/9119a1c1a123 æ¥æºï¼šç®€ä¹¦ ç®€ä¹¦è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ï¼Œä»»ä½•å½¢å¼çš„è½¬è½½éƒ½è¯·è”ç³»ä½œè€…èŽ·å¾—æŽˆæƒå¹¶æ³¨æ˜Žå‡ºå¤„ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(äºŒ)åŸºç¡€éƒ¨ä»¶]]></title>
    <url>%2Fposts%2F88b946ec.html</url>
    <content type="text"><![CDATA[å‰è¨€ä¸»è¦åŒ…æ‹¬ MaterialAppã€Scaffoldã€Textã€Imageã€Iconã€Button ä»¥åŠ AppBar éƒ¨åˆ†å†…å®¹ï¼Œå‡†å¤‡å‡ºå‘~ â€‹ çœ‹å®Œè¿™ç¯‡æ–‡ç« ä½ å°±åœ¨çŸ¥é“æ€Žä¹ˆå†™ä»¥ä¸Šæ•ˆæžœäº† 1ã€Flutter runAppæ–°å»º flutter é¡¹ç›®åŽï¼Œå¯ä»¥çœ‹åˆ° lib ä¸‹çš„ main.dart ä¸­ void main() =&gt; runApp(MyApp());è¿™å¥å°±æ˜¯ç¨‹åºçš„å…¥å£äº†ã€‚è¿™é‡Œå¯ä»¥ç®€å•çœ‹ä¸‹æºç  123456789101112131415161718192021void runApp(Widget app) &#123; WidgetsFlutterBinding.ensureInitialized() ..attachRootWidget(app) ..scheduleWarmUpFrame();&#125;///....static WidgetsBinding ensureInitialized() &#123; if (WidgetsBinding.instance == null) WidgetsFlutterBinding(); return WidgetsBinding.instance;&#125;///....void attachRootWidget(Widget rootWidget) &#123; _renderViewElement = RenderObjectToWidgetAdapter&lt;RenderBox&gt;( container: renderView, debugShortDescription: '[root]', child: rootWidget ).attachToRenderTree(buildOwner, renderViewElement);&#125; é¦–å…ˆä¼šåˆ›å»ºä¸€ä¸ª WidgetsBinding å•ä¾‹å¯¹è±¡ï¼Œç„¶åŽæŠŠä¼ å…¥çš„ App æ·»åŠ åˆ° rootWidgetä¸­ï¼ŒscheduleWarmUpFrame æ–¹æ³•æ¯”è¾ƒé•¿ï¼Œè¿™è¾¹çœ‹ä¸‹å¯¹è¯¥æ–¹æ³•çš„æ³¨é‡Šç¬¬ä¸€å¥å°±èƒ½äº†è§£æ–¹æ³•çš„ä¸»è¦åŠŸèƒ½äº† Schedule a frame to run as soon as possible ã€Œå®‰æŽ’æ¡†æž¶å°½å¿«è¿è¡Œèµ·æ¥ã€(åŽŸè°…æˆ‘è¿™æ¸£è‹±è¯­ï¼Œåªèƒ½çœ‹æ‡‚ä¸ä¼šç¿»è¯‘..å¤§æ¦‚å°±æ˜¯ã€Œå¿«é€Ÿå¯åŠ¨æ¡†æž¶ã€çš„æ„æ€å§) 2ã€Flutter AppæŽ¥ç€çœ‹ä¸‹ MyApp è¿™ä¸ªç±»ï¼Œç»§æ‰¿è‡ª StatelessWidget å¹¶åœ¨ build æ–¹æ³•è¿”å›žä¸€ä¸ª MaterialApp å®žä¾‹ï¼Œ(å·å·è®²ä¸‹ï¼Œå…¶å®žè¿™è¾¹è¿˜å¯ä»¥è¿”å›ž CupertinoAppï¼Œè¿™æ˜¯ä¸€ä¸ª iOS é£Žæ ¼çš„ widgetï¼ŒåŸºæœ¬ä¸Šä½ çœ‹åˆ°éƒ¨ä»¶å¸¦ ã€ŒCupertinoã€çš„éƒ½æ˜¯ iOS é£Žæ ¼çš„ widgetï¼Œè¿™é‡Œå…ˆä¸è®² iOS é£Žæ ¼çš„éƒ¨ä»¶ï¼Œç›®å‰ flutter å¯¹ Cupertino ç³»åˆ—çš„ widget æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼ŒåŒ…æ‹¬éƒ¨ä»¶çš„å¹¿åº¦ï¼Œå¤šè¯­è¨€çš„æ”¯æŒç­‰ç­‰æ–¹é¢éƒ½ä¸æ˜¯å¾ˆå‹å¥½ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯ç»§ç»­çœ‹ MD é£Žæ ¼çš„ Android éƒ¨ä»¶å§~)ï¼Œè¿™é‡Œå…ˆçœ‹ä¸‹ MaterialApp çš„æž„é€ å‡½æ•°ï¼Œä»‹ç»ä¸€äº›å¸¸ç”¨çš„å‚æ•° 1234567891011121314151617181920212223242526const MaterialApp(&#123; Key key, this.navigatorKey, this.home, // ä¸»ç•Œé¢çš„å†…å®¹ widget this.routes = const &lt;String, WidgetBuilder&gt;&#123;&#125;, // å¸¦ router å’Œè·¯ç”±è·³è½¬æœ‰å…³ this.initialRoute, this.onGenerateRoute, this.onUnknownRoute, this.navigatorObservers = const &lt;NavigatorObserver&gt;[], this.builder, this.title = '', // *ç±»ä¼¼æ ‡é¢˜ this.onGenerateTitle, // ä¸»è¦ç”¨äºŽå¤šè¯­è¨€æƒ…å†µä¸‹ï¼Œéœ€è¦æ ¹æ®å½“å‰è¯­è¨€æ›¿æ¢ titleï¼Œéœ€è¦ä½¿ç”¨è¯¥å€¼ this.color, // ä¸»é¢˜è‰²ï¼Œå¦‚æžœè¯¥å€¼æœªè®¾ç½®ï¼Œå– theme.primaryColor,æœªè®¾ç½® theme åˆ™å–è“è‰² this.theme, // App çš„ä¸»é¢˜é£Žæ ¼ï¼ŒåŒ…æ‹¬ä¸»é¢˜è‰²ï¼ŒæŒ‰é’®é»˜è®¤é¢œè‰²ç­‰ç­‰ this.locale, // å¸¦ locale çš„å’Œå¤šè¯­è¨€é€‚é…ç›¸å…³ this.localizationsDelegates, this.localeListResolutionCallback, this.localeResolutionCallback, this.supportedLocales = const &lt;Locale&gt;[Locale('en', 'US')], this.debugShowMaterialGrid = false, this.showPerformanceOverlay = false, this.checkerboardRasterCacheImages = false, this.checkerboardOffscreenLayers = false, this.showSemanticsDebugger = false, this.debugShowCheckedModeBanner = true, // debug æ¨¡å¼ä¸‹ï¼Œæ˜¯å¦æ˜¾ç¤º DEBUG æ ‡ç¤ºæ¨ªå¹… &#125;) MaterialApp ç»§æ‰¿è‡ª StatefulWidgetï¼Œå®ƒå’Œ MyApp æ‰€ç»§æ‰¿çš„ç±» StatelessWidgetï¼Œå°±æ˜¯æ—¥å¸¸å¼€å‘ä¸­ï¼Œè‡ªå®šä¹‰éƒ¨ä»¶é€šå¸¸ç»§æ‰¿çš„æŠ½è±¡ç±»äº†ã€‚ StatelessWidget æ˜¯çŠ¶æ€ä¸å¯å˜éƒ¨ä»¶ï¼Œé€šè¿‡å…¶æž„å»ºçš„éƒ¨ä»¶ä¸€èˆ¬ç”¨æ¥å±•ç¤ºå›ºå®šå†…å®¹ï¼Œä¾‹å¦‚éœ€è¦å±•ç¤ºå›ºå®šçš„åŠŸèƒ½æŒ‰é’®åˆ—è¡¨ï¼Œä¸éœ€è¦æ ¹æ®ä¸åŒç•Œé¢çŠ¶æ€è¿›è¡Œä¿®æ”¹å…¶å±•ç¤ºå†…å®¹ StatefulWidget æ˜¯å¯æ”¹å˜çŠ¶æ€çš„éƒ¨ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦é€šè¿‡ç½‘ç»œæˆ–è€…æ•°æ®åº“èŽ·å–æ•°æ®ï¼Œç„¶åŽä¿®æ”¹éƒ¨ä»¶é”å±•ç¤ºçš„æ•°æ®å†…å®¹ï¼Œåˆ™éœ€è¦é€šè¿‡ StatefulWidget æ¥æž„å»ºã€‚å½“ç„¶ï¼Œä¸æ˜¯è¯´ StatelessWidget ä¸èƒ½å®žçŽ°ä¿®æ”¹ç•Œé¢æ•°æ®çš„åŠŸèƒ½ï¼Œè¿™å°±éœ€è¦æ¶‰åŠåˆ° çŠ¶æ€ç®¡ç† çš„æ¦‚å¿µäº†ï¼ŒåŽé¢æœ‰æœºä¼šå†è®²ï¼Œè¿™è¾¹å…ˆåŸ‹å‘ã€å‘1ã€‘ 3ã€Flutter Scaffoldè¿›å…¥ App åŽå°±éœ€è¦æž„å»ºç•Œé¢äº†ï¼ŒFlutter æä¾›äº† Scaffold æ¥å¿«é€Ÿæž„å»ºä¸€ä¸ª MaterialDesign é£Žæ ¼çš„ç•Œé¢ï¼Œè¿˜æ˜¯å…ˆçœ‹ä¸‹ Scaffold çš„æž„é€ å‡½æ•°å§ï¼Œäº†è§£å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„éƒ¨åˆ†ã€‚ 12345678910111213141516const Scaffold(&#123; Key key, this.appBar, // ç•Œé¢é¡¶éƒ¨çš„é‚£æ¡æ ï¼Œè¿™è¾¹éœ€è¦è¿”å›žä¸€ä¸ª AppBar å®žä¾‹ this.body, // ç•Œé¢çš„å†…å®¹éƒ¨åˆ† this.floatingActionButton, // æ‚¬æµ®éƒ¨åˆ†ï¼Œå¯ä»¥é€šè¿‡ floatingActionButtonLocation è®¾ç½®ä½ç½® this.floatingActionButtonLocation, this.floatingActionButtonAnimator, this.persistentFooterButtons, this.drawer, // ä¾§æ»‘æŠ½å±‰éƒ¨åˆ†ï¼Œä»Žå·¦ä¾§æ»‘å‡º(åº”è¯¥å’Œè¯­è¨€æœ‰å…³ï¼Œå’Œæ–‡å­—æ–¹å‘åŒå‘) this.endDrawer, // ä¾§æ»‘æŠ½å±‰éƒ¨åˆ†ï¼Œä»Žå³ä¾§æ»‘å‡º this.bottomNavigationBar, // åº•éƒ¨å¯¼èˆªæ ï¼Œå°±æ˜¯é€šå¸¸çœ‹åˆ°çš„åº•éƒ¨ TAB åˆ‡æ¢éƒ¨ä»¶ this.bottomSheet, // å±•ç¤ºä»Žåº•éƒ¨å¼¹å‡ºçš„ï¼Œèµ·åˆ°æç¤ºä½œç”¨çš„ï¼Œé€šè¿‡ showModalBottomSheet å±•ç¤º this.backgroundColor, // ç•Œé¢çš„èƒŒæ™¯è‰² this.resizeToAvoidBottomPadding = true, // é¿å… body è¢«åº•éƒ¨å¼¹å‡ºéƒ¨ä»¶å¡«å……ï¼Œä¾‹å¦‚è¾“å…¥æ³•é”®ç›˜ this.primary = true, // å½“å‰çš„ Scaffold æ˜¯å¦éœ€è¦è¢«å±•ç¤ºåœ¨å±å¹•æœ€ä¸Šå±‚ &#125;) æ¥å¼ å›¾å§ï¼Œç®€æ´æ˜Žäº† äº†è§£å®Œ Scaffold çš„æ•´ä½“æž„é€ åŽï¼Œæˆ‘ä»¬ä»Žä¸Šåˆ°ä¸‹ï¼Œé€šè¿‡æž„é€ å‡½æ•°æ¥äº†è§£ä¸‹å„ä¸ª Widgetçš„ä½¿ç”¨æ–¹æ³• 4ã€AppBar12345678910111213141516171819AppBar(&#123; Key key, this.leading, // ç”¨äºŽè®¾ç½® AppBar å‰ç½®çš„æŒ‰é’®ï¼Œä¾‹å¦‚è®¾ç½®è¿”å›žæˆ‘ä»¬éœ€è¦çš„è¿”å›žæŒ‰é’®ç­‰ this.automaticallyImplyLeading = true, // æ˜¯å¦ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç”Ÿæˆçš„æŒ‰é’®ï¼Œå¦‚æžœæ›¿æ¢ leading çš„é»˜è®¤æŒ‰é’®ï¼Œæœ€å¥½å°†è¯¥å±žæ€§è®¾ç½®æˆ false this.title, // AppBar æ‰€éœ€è¦å±•ç¤ºçš„ç»„ä»¶ï¼Œä¼ å…¥ä¸€ä¸ª Widget å®žä¾‹ï¼Œé€šå¸¸ä½¿ç”¨ Text å±•ç¤ºä¸€ä¸ªæ ‡é¢˜ this.actions, // AppBar æœ«å°¾æ‚¬æµ®çš„ä¸€äº›æ“ä½œç»„ä»¶ï¼Œä¾‹å¦‚å¸¸è§çš„ä¼šåœ¨æœ«å°¾è®¾ç½®ä¸€ä¸ªã€Œ...ã€æŒ‰é’®ï¼Œç‚¹å‡»å¼¹å‡ºä¸€ä¸ª menue æä¾›ç»™ç”¨æˆ·æ“ä½œé€‰æ‹© this.flexibleSpace, // AppBar çš„èƒŒæ™¯ï¼Œå¯ä»¥è®¾ç½®é¢œè‰²ï¼ŒèƒŒæ™¯å›¾ç­‰ç­‰ this.bottom, // bottom ç”¨äºŽå±•ç¤ºé¡¶éƒ¨å¯¼èˆª TAB this.elevation = 4.0, this.backgroundColor, // AppBar çš„èƒŒæ™¯è‰²ï¼Œå¦‚æžœåªéœ€è¦ä¿®æ”¹é¢œè‰²ï¼Œå¯ä»¥ä¸é€šè¿‡ flexibleSpace ä¿®æ”¹ this.brightness, this.iconTheme, // æŒ‰é’®çš„é»˜è®¤æ ·å¼ this.textTheme, // æ–‡å­—çš„é»˜è®¤æ ·å¼ this.primary = true, this.centerTitle, // æ˜¯å¦å°†å±•ç¤ºçš„ title å±…ä¸­ this.titleSpacing = NavigationToolbar.kMiddleSpacing, // AppBar title ä¸¤ä¾§çš„ç©ºç™½é—´éš” this.toolbarOpacity = 1.0, this.bottomOpacity = 1.0, &#125;) åœ¨å±•ç¤º AppBar çš„ demo ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå­¦ä¹ å‡ ä¸ªåŸºæœ¬çš„ç»„ä»¶ Textã€Imageã€Iconã€Button åˆ†å¸ƒç”¨äºŽå±•ç¤ºæ–‡å­—ï¼Œå›¾ç‰‡ï¼Œå›¾æ ‡ï¼ŒæŒ‰é’® 5ã€Text123456789101112const Text(this.data, &#123; // Text éœ€è¦å±•ç¤ºçš„æ–‡å­— Key key, this.style, // æ–‡å­—çš„æ ·å¼ï¼ŒåŒ…æ‹¬é¢œè‰²ï¼Œå¤§å°ï¼Œé—´è·ç­‰ç­‰å±žæ€§ï¼Œè¿™è¾¹å°±ä¸ç»§ç»­å±•ç¤º TextStyle æž„é€ å‡½æ•°äº†ï¼Œä¸ç„¶æˆ‘æ€•å¤§å®¶éƒ½ä¸æƒ³ç»§ç»­çœ‹äº†ï¼Œç¨åŽé€šè¿‡ä¾‹å­æ¥è¯´æ˜Ž this.textAlign, // æ–‡å­—çš„å¯¹é½æ–¹å¼ï¼ŒåŒ…æ‹¬å·¦å¯¹é½ï¼Œå³å¯¹é½ï¼Œå±…ä¸­ç­‰ï¼Œè¯¦è§ TextAlign ç±» this.textDirection, // æ–‡å­—æ–¹å‘ï¼Œltr(left to right) æˆ–è€… rtl(right to left) this.locale, this.softWrap, // å½“æ–‡å­—ä¸€è¡Œæ˜¾ç¤ºä¸å®Œæ˜¯å¦æ¢è¡Œ this.overflow, // å¦‚æžœè¶…å‡ºé™åˆ¶çš„è¡Œæ•°ï¼Œä»¥å“ªç§æ–¹å¼çœç•¥æœªå±•ç¤ºçš„å†…å®¹ this.textScaleFactor, // æ–‡å­—ç¼©æ”¾æ¯”ä¾‹ this.maxLines, // æœ€å¤šå±•ç¤ºçš„è¡Œæ•° this.semanticsLabel, &#125;) è¯´äº†é‚£ä¹ˆå¤šï¼Œç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´éƒ½è¦æ€¥ç€æ’¸ä»£ç äº†å§ï¼ŒæŽ¥ç€æ¥å±•ç¤ºä¸€äº› Text çš„ç¤ºä¾‹ï¼ŒæŽ¥ä¸‹æ¥çš„ä¾‹å­éƒ½ä¼šç›´æŽ¥æ›¿æ¢ HomePage å†…çš„å±•ç¤ºå†…å®¹ï¼Œå…¶ä½™éƒ½æ˜¯ç›¸åŒçš„ï¼ŒæŽ¥ä¸‹æ¥è¯·å…³æ³¨ Text åˆ«çš„éƒ¨ä»¶å…ˆå¿½ç•¥ï¼ŒåŽé¢ä¼šä»‹ç»ï¼Œè¿™è¾¹å…ˆåŸ‹å‘ã€å‘2ã€‘ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import 'package:flutter/material.dart';void main() =&gt; runApp(DemoApp());class DemoApp extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return MaterialApp( title: 'Flutter Demo', debugShowCheckedModeBanner: false, theme: ThemeData(primarySwatch: Colors.lightBlue), home: HomePage(), ); &#125;&#125;class HomePage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar(), body: Container( padding: const EdgeInsets.only(top: 10.0), child: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ Text('ç»¿è‰²èƒŒæ™¯é»‘è‰²æ–‡å­—å±•ç¤º', style: TextStyle( color: Colors.black, // è®¾ç½®æ–‡å­—é¢œè‰²ï¼Œä¸å¯å’Œ foreground åŒæ—¶è®¾ç½® fontSize: 24.0, // å­—ä½“å¤§å° letterSpacing: 2.0, // æ¯ä¸ªå­—ç¬¦ä¹‹é—´çš„é—´éš” background: Paint()..color = Colors.green)), // èƒŒæ™¯è‰² Text('è¿™æ˜¯ä¸€ä¸ªå¸¦çº¢è‰²ä¸‹åˆ’çº¿çš„æ–‡å­—å±•ç¤º', style: TextStyle( color: Colors.black, fontSize: 24.0, // æ–‡å­—è£…é¥°çº¿ï¼Œé™¤äº† underline è¿˜æœ‰ overline, lineThroughï¼Œ // ä¸åŒçš„æ ·å¼å°ä¼™ä¼´å¯ä»¥é€šè¿‡è‡ªå·±ä¿®æ”¹ä»£ç æ¥æŸ¥çœ‹ decoration: TextDecoration.underline, // æ–‡å­—è£…é¥°çº¿çš„ç±»åž‹ï¼Œé™¤äº† solid è¿˜æœ‰ double,dotted,dashed,wavy å¯é€‰ decorationStyle: TextDecorationStyle.solid, // è£…é¥°çº¿çš„é¢œè‰² decorationColor: Colors.red)) ], )), )); &#125;&#125; è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹æºç  text_main.dart æ–‡ä»¶ æœ€åŽçš„å±•ç¤ºæ•ˆæžœå¦‚ä¸‹å›¾ 6ã€ImageæŒ‰ç…§æƒ¯ä¾‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆçœ‹ä¸‹ Image çš„æž„é€ å‡½æ•°å§ 123456789101112131415161718192021const Image(&#123; Key key, // ä¸€ä¸ª ImageProvider å®žä¾‹ï¼Œä½†æ˜¯ ImageProvider æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼ŒFlutter å·²ç»ç»™æˆ‘ä»¬æä¾›å¦‚ä¸‹ // AssetImageï¼ŒNetworkImageï¼ŒFileImageï¼ŒMemoryImage è¿™å››ç§å›¾ç‰‡åŠ è½½å™¨ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒç”¨ // æˆ‘ä»¬å¯ä»¥ç›´æŽ¥é€šè¿‡ Image.asset, Image.network, Image.file, Image.memory ç®€åŒ–ï¼Œ // é€šè¿‡æ–¹æ³•åï¼Œå¯ä»¥çœ‹å‡ºåˆ†åˆ«ä»Ž asset æ–‡ä»¶ï¼Œç½‘ç»œï¼Œæ–‡ä»¶ï¼Œå†…å­˜ä¸­åŠ è½½å›¾ç‰‡ @required this.image, this.semanticLabel, this.excludeFromSemantics = false, this.width, // å›¾ç‰‡å®½åº¦ this.height, // å›¾ç‰‡é«˜åº¦ this.color, // å›¾ç‰‡èƒŒæ™¯è‰² this.colorBlendMode, // color å’Œå›¾ç‰‡çš„æ··åˆæ¨¡å¼(è¿™ä¸ªå€¼æ¯”è¾ƒå¤šï¼Œå¯ä»¥ä¸€ä¸ªä¸ªå°è¯•) this.fit, // å›¾ç‰‡å¡«å……æ–¹å¼ fill, cover, contain, fillWidth, fillHeight, scaleDown, none this.alignment = Alignment.center, // å¯¹é½æ–¹å¼ this.repeat = ImageRepeat.noRepeat, // è‹¥æœªå¡«å……æ»¡ç©ºé—´ï¼Œé‡å¤å±•ç¤ºçš„æ–¹å¼ this.centerSlice, this.matchTextDirection = false, this.gaplessPlayback = false, this.filterQuality = FilterQuality.low, &#125;) å¥½äº†å¥½äº†ï¼Œæˆ‘çŸ¥é“ä½ ä»¬åˆæƒ³è‡ªå·±å†™ä»£ç å°è¯•ä¸‹äº†ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œéœ€è¦ä½ å…ˆå‡†å¤‡ä¸€å¼ æœ¬åœ°å›¾ç‰‡ï¼Œç„¶åŽåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ lib æ–‡ä»¶å¤¹åŒå±‚ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œå‘½åä¸º imagesï¼ŒæŠŠä½ å‡†å¤‡å¥½çš„å›¾ç‰‡æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚æ”¾å¥½ä¹‹åŽæ‰“å¼€ pubspec.yaml æŠŠå›¾ç‰‡èµ„æºæ–‡ä»¶æ³¨å†Œä¸‹ 1234567891011# The following section is specific to Flutter.flutter: # The following line ensures that the Material Icons font is # included with your application, so that you can use the icons in # the material Icons class. uses-material-design: true # è¿™è¾¹æ³¨å†Œèµ„æºæ–‡ä»¶ï¼Œä»¥åŽæœ‰å›¾ç‰‡æ–‡ä»¶ä¹Ÿå¯ä»¥åªæ³¨å†Œ images æ–‡ä»¶å¤¹ï¼Œä¼šè‡ªåŠ¨è¯»å–å†…éƒ¨çš„æ–‡ä»¶ assets: - images/ali.jpg æ³¨å†Œå®ŒæˆåŽï¼Œå°±å¯ä»¥ç»§ç»­æ„‰å¿«çš„æ’¸ä»£ç äº†~ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class HomePage extends StatelessWidget &#123; final String _assetAli = 'images/ali.jpg'; final String _picUrl = 'https://timg05.bdimg.com/timg?wapbaike&amp;quality=60&amp;size=b1440_952&amp;cut_x=143&amp;cut_y=0&amp;cut_w=1633&amp;' 'cut_h=1080&amp;sec=1349839550&amp;di=cbbc175a45ccec5482ce2cff09a3ae34&amp;' 'src=http://imgsrc.baidu.com/baike/pic/item/4afbfbedab64034f104872baa7c379310b551d80.jpg'; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar(), body: Container( padding: const EdgeInsets.only(top: 10.0), child: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ // è¿™ç§å±•ç¤ºå›¾ç‰‡æ–¹å¼å’Œä¸‹ä¸€ç§ä¼šæœ‰ç›¸åŒçš„æ•ˆæžœ Image(image: AssetImage(_assetAli), width: 80.0, height: 80.0), // æŽ¥ä¸‹æ¥åŠ è½½å›¾ç‰‡éƒ½ä¼šä½¿ç”¨è¿™äº›æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³• Image.asset(_assetAli, width: 80.0, height: 80.0), // åŠ è½½ä¸€å¼ ç½‘ç»œå›¾ç‰‡ Image.network(_picUrl, height: 80.0, // æ¨ªå‘é‡å¤ repeat: ImageRepeat.repeatX, // MediaQuery.of(context).size èŽ·å–åˆ°çš„ä¸ºä¸Šå±‚å®¹å™¨çš„å®½é«˜ width: MediaQuery.of(context).size.width), // é€šè¿‡è®¾ç½®æ··åˆæ¨¡å¼ï¼Œå¯ä»¥çœ‹åˆ°å›¾ç‰‡å±•ç¤ºçš„æ ·å¼å·²ç»ä¿®æ”¹ Image.asset(_assetAli, width: 80.0, height: 80.0, color: Colors.green, colorBlendMode: BlendMode.colorDodge), // ä¼šä¼˜å…ˆåŠ è½½æŒ‡å®šçš„ asset å›¾ç‰‡ï¼Œç„¶åŽç­‰ç½‘ç»œå›¾ç‰‡è¯»å–æˆåŠŸåŽåŠ è½½ç½‘ç»œå›¾ç‰‡ï¼Œä¼šé€šè¿‡æ¸éšæ¸çŽ°æ–¹å¼å±•çŽ° // cover æ–¹å¼æŒ‰ç…§è¾ƒå°çš„è¾¹å¸ƒæ»¡ï¼Œè¾ƒå¤§çš„ç»™åˆ‡å‰² // contain ä¼šæŒ‰ç…§æœ€å¤§çš„è¾¹å¸ƒæ»¡ï¼Œè¾ƒå°çš„ä¼šè¢«ç•™ç™½ // fill ä¼šæŠŠè¾ƒå¤§çš„ä¸€è¾¹åŽ‹ç¼© // fitHeight, fitWidth åˆ†åˆ«æŒ‰ç…§é•¿å®½æ¥å¸ƒæ»¡ FadeInImage.assetNetwork( placeholder: _assetAli, image: _picUrl, width: 120.0, height: 120.0, fit: BoxFit.cover), // Icon ç›¸å¯¹å±žæ€§å°‘äº†å¾ˆå¤šï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ª IconData å®žä¾‹ï¼Œflutter æä¾›äº†å¾ˆå¤šå›¾æ ‡ï¼Œ // ä½†æ˜¯å®žé™…æƒ…å†µæˆ‘ä»¬éœ€è¦åŠ å…¥æˆ‘ä»¬è‡ªå·±çš„å›¾æ ‡ï¼Œè¿™è¾¹å†åŸ‹å‘ã€å‘3ã€‘ // size ä¸ºå›¾æ ‡æ˜¾ç¤ºçš„å¤§å°ï¼Œcolor ä¸ºå›¾æ ‡çš„é¢œè‰²ï¼Œè¿™è¾¹é€šè¿‡ Theme èŽ·å–ä¸»é¢˜è‰²è°ƒ Icon(Icons.android, size: 40.0, color: Theme.of(context).primaryColorDark) ], )), )); &#125;&#125; è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹æºç  image_main.dart æ–‡ä»¶ æœ€åŽçš„æ•ˆæžœå¦‚ä¸‹ 7ã€ButtonFlutter æä¾›äº†å„ç§ç±»åž‹çš„ Button å‡ ä¹Žæ˜¯å¤§åŒå°å¼‚çš„ï¼Œè¿™è¾¹å°±æŠ½å–ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„å±•ç¤ºä¸‹æ•ˆæžœï¼Œå¸¸ç”¨çš„ä¸»è¦æœ‰ RaisedButton ã€FlatButtonã€IconButtonã€OutlineButtonã€MaterialButtonã€FloatActionButtonã€FloatingActionButton.extended Button éƒ½æœ‰ä¸€ä¸ª onPress å‚æ•°ï¼Œæ˜¯ VoidCallback ç±»åž‹çš„å‚æ•°ï¼Œé€šè¿‡æŸ¥çœ‹æºç å¯ä»¥çŸ¥é“ VoidCallback æ˜¯æ— å‚æ— è¿”å›žå€¼çš„ä¸€ç§ç±»åž‹å‚æ•°ã€‚å¦‚æžœè¯¥å‚æ•°ä¼ å…¥çš„å€¼ä¸º null é‚£ä¹ˆè¿™ä¸ªæŒ‰é’®çš„å°±ä¸å¯ç‚¹å‡»çŠ¶æ€ï¼Œæ— ç‚¹å‡»æ•ˆæžœï¼Œç­‰ä¼šå¯ä»¥åœ¨ä¾‹å­ä¸­æŸ¥çœ‹ã€‚è¿˜æœ‰å°±æ˜¯ child å‚æ•°ï¼Œè¿™é‡Œå°±æ˜¯ä¼ å…¥ä½ éœ€è¦å±•ç¤ºçš„å†…å®¹ï¼Œæ¯”å¦‚ Textã€Icon ç­‰ç­‰ã€‚åˆ«çš„å‚æ•°åŸºæœ¬å¯ä»¥é€šè¿‡å‚æ•°åäº†è§£ï¼Œè¿™è¾¹ä¸æ‰©å±•äº†(å†çœ‹æºç æˆ‘æ€•ä½ ä»¬éƒ½ä¸æƒ³ç»§ç»­çœ‹ä¸‹åŽ»äº†â€¦) Talk is cheap, show me the code 1234567891011121314151617181920212223242526272829303132333435363738class HomePage extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; return Scaffold( appBar: AppBar(), body: Container( padding: const EdgeInsets.only(top: 10.0), child: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: &lt;Widget&gt;[ RaisedButton( onPressed: () &#123; print('This is a Rased Button can be clicked'); &#125;, child: Text('Raised Enable'), ), RaisedButton(onPressed: null, child: Text('Raised Disable')), FlatButton( onPressed: () =&gt; print('This is a Flat Button can be clicker'), child: Text('Flat Enable'), ), FlatButton(onPressed: null, child: Text('Flat Disable')), IconButton(icon: Icon(Icons.android), onPressed: () &#123;&#125;), IconButton(icon: Icon(Icons.android), onPressed: null), MaterialButton(onPressed: () &#123;&#125;, child: Text('Material Enable')), MaterialButton(onPressed: null, child: Text('Material Disable')), OutlineButton(onPressed: () &#123;&#125;, child: Text('Outline Enable')), OutlineButton(onPressed: null, child: Text('Outline Enable')), ], )), ), floatingActionButton: FloatingActionButton.extended(onPressed: () &#123;&#125;, icon: Icon(Icons.android), label: Text('Android')), floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked, ); &#125;&#125; è¯¥éƒ¨åˆ†ä»£ç æŸ¥çœ‹æºç  button_main.dart éƒ¨åˆ† æœ€ç»ˆçš„æ•ˆæžœå›¾ è¿™ç¯‡ç»ˆäºŽåˆ°æœ«å°¾äº†ï¼Œæœ€åŽç•™äº† 3 ä¸ªå‘ç­‰ä»¥åŽè§£å†³ æ–‡ç«  demo çš„åœ°å€ï¼šhttps://github.com/kukyxs/flutter_arts_demos_app ä¸€ä¸ªè¯¾ç¨‹(å½“æ—¶ä¹°äº†æƒ³çœ‹ä¸‹ä»£ç è§„èŒƒçš„ï¼Œä»£ç æ›´æ–°ä¼šæ¯”è¾ƒæ…¢ï¼Œè™½ç„¶æ˜¯è·Ÿç€è¯¾ä¸Šçš„ä¸€äº›å†™ä»£ç ï¼Œä½†æ˜¯è¿˜æ˜¯åšäº†è‡ªå·±çš„ä¿®æ”¹ï¼Œå¾ˆå¤šåœ°æ–¹çœ‹ç€ä¸èˆ’æœï¼Œç„¶åŽå°±æ”¹æˆè‡ªå·±çš„å®žçŽ°æ–¹å¼äº†)ï¼šhttps://github.com/kukyxs/flutter_shop å¦‚æžœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè®°å¾—ç»™ä¸ª Starï¼Œå…ˆè°¢è¿‡ï¼Œä½ çš„è®¤å¯å°±æ˜¯æ”¯æŒæˆ‘ç»§ç»­å†™ä¸‹åŽ»çš„åŠ¨åŠ›~]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå…¥é—¨æŒ‡å—(ä¸€)Dart]]></title>
    <url>%2Fposts%2F6114f592.html</url>
    <content type="text"><![CDATA[å‰è¨€æœ€è¿‘ Flutter çœŸå¿ƒç«çˆ†åˆ°ä¸è¦ä¸è¦çš„ï¼Œéšå¤§æµï¼Œå­¦ä¸€æ³¢ï¼Œåœ¨è¿™ä¹‹å‰ï¼Œå¯¹äºŽè¯­è¨€çš„è¯­æ³•è¿˜æ˜¯éœ€è¦æœ‰äº›å¿…è¦çš„äº†è§£çš„ï¼ŒDart è¿™é—¨è¯­è¨€ï¼Œè¯´å®žè¯å¯¹äºŽä¼š Java è¿™ç±»é¢å‘å¯¹è±¡çš„è¯­è¨€çš„å°ä¼™ä¼´ä»¬æ¥è¯´ï¼ŒçœŸçš„ç°å¸¸ç°å¸¸ç®€å•ï¼Œè¿™è¾¹æˆ‘æ€»ç»“äº†ä¸€äº› Dart å’Œ Java çš„ä¸€äº›è¯­æ³•å·®å¼‚ï¼Œå½“ç„¶ï¼Œåªæ˜¯éƒ¨åˆ†ï¼Œä½†æ˜¯ï¼ŒæŒ‰ç…§æˆ‘ç›®å‰çš„å­¦ä¹ è¿›åº¦æ¥è¯´ï¼Œäº†è§£äº†è¿™äº›å¯¹äºŽå†™ Flutter é¡¹ç›®ç»å¯¹å¤Ÿäº†ã€‚å°ä¼™ä¼´ä¹Ÿå¯ä»¥è‡ªå·±æŸ¥çœ‹ï¼Œæˆ‘è¿™è¾¹æä¾›ä¸€ä¸ªè‡ªå·±å­¦ä¹ çš„ç½‘å€ Dart å¿«é€Ÿå…¥é—¨ï¼šhttps://www.dartcn.com/ æ¸©é¦¨æç¤ºï¼šæœ¬ç¯‡æ–‡ç« æ²¡æœ‰å›¾ï¼Œæ²¡æœ‰å›¾ï¼Œæ²¡æœ‰å›¾ï¼Œå¯èƒ½ä¼šé€ æˆéƒ¨åˆ†ä¸é€‚ï¼Œè¯·æ³¨æ„ï¼Œè¯·æ³¨æ„ï¼Œè¯·æ³¨æ„ï¼Œç³»å¥½å®‰å…¨å¸¦ï¼Œæˆ‘ä»¬è¦ã€Œå¼€è½¦äº†ã€â€¦â€¦ 1ã€VariablesDart å˜é‡ç±»åž‹å¯ä»¥é€šè¿‡å…·ä½“çš„èµ‹å€¼è¿›è¡ŒæŽ¨å¯¼ï¼Œä¾‹å¦‚ï¼švar name = â€˜kukyâ€™ åˆ™å®šä¹‰äº†ä¸€ä¸ª String ç±»åž‹å¯¹è±¡ nameï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šå…·ä½“çš„ç±»åž‹ String name = â€˜kukyâ€™ï¼Œå¦‚æžœæ²¡æœ‰åˆå§‹åŒ–å˜é‡ï¼Œåˆ™é»˜è®¤å€¼ä¸º nullï¼Œç±»åž‹ä¸ºæ•°å­—çš„å˜é‡é»˜è®¤å€¼åŒä¸º nullï¼ˆåŒ java ä¸åŒï¼Œjava ä¸­ int é»˜è®¤ä¸º 0.ï¼‰å¦‚æžœéœ€è¦å®šä¹‰å¸¸é‡ï¼Œå¯ä»¥é€šè¿‡ final å’Œ const è¿›è¡Œå®šä¹‰ï¼Œfinal å˜é‡åªèƒ½èµ‹å€¼ä¸€æ¬¡ï¼Œconst æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ã€‚ 2ã€Build-in-typesDart å†…ç½®ç±»åž‹åŒ…æ‹¬ ï¼š Numbers åŒ…æ‹¬ int[-2^53 ~ 2^53]ï¼Œ double[64-bit æµ®ç‚¹æ•°] *Strings * Dart å­—ç¬¦ä¸²æ˜¯ UTF-16 ç¼–ç çš„å­—ç¬¦åºåˆ—ï¼Œ å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ¥åˆ›å»ºå­—ç¬¦ä¸²ã€‚ é€šè¿‡ == åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒ é€šè¿‡ä¸‰å¯¹å•å¼•å·â€™â€™â€™aaaâ€™â€™â€™æˆ–è€…åŒå¼•å·â€â€â€aaaâ€â€â€å¯ä»¥åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²å¯¹è±¡ ä½¿ç”¨å‰ç¼€ r åˆ›å»º raw stringï¼Œå­—ç¬¦ä¸²å†…ä¸ä¼šè¿›è¡Œè½¬ä¹‰ï¼Œä¾‹å¦‚ï¼švar a = râ€™haha \n breakLineâ€™ æ‰“å° a å¯¹è±¡åˆ™ä¼šæŒ‰ç…§è¾“å…¥çš„è¾“å‡ºï¼Œä¸ä¼šè¿›è¡Œæ¢è¡Œ Booleans Dart ä¸­ï¼Œåªæœ‰ true å¯¹è±¡æ‰è¢«è®¤ä¸ºæ˜¯ trueï¼Œ æ‰€æœ‰å…¶ä»–çš„å€¼éƒ½æ˜¯ false Lists åˆ—è¡¨ï¼Œä¾‹å¦‚ï¼švar list = [1, 2, 3, 4] é€šè¿‡ const å…³é”®è¯å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸å¯å˜åˆ—è¡¨ var list = const [1, 2, 3, 4] å‚æ•°åŒ–å®šä¹‰var name = [â€˜Joneâ€™, â€˜Jackâ€™] Maps é”®å€¼å¯¹ï¼Œä¾‹å¦‚ï¼švar map = {â€˜oneâ€™: 1, â€˜twoâ€™: 2} å¦‚æžœé”®å€¼å¯¹éœ€è¦æ·»åŠ æ–°çš„é”®å€¼å¯¹ï¼Œç›´æŽ¥æŒ‡å®šå³å¯ï¼Œmap[â€˜threeâ€™] = 3ï¼Œè‹¥æŸ¥æ‰¾çš„é”®ä¸å­˜åœ¨ï¼Œè¿”å›ž null å‚æ•°åŒ–å®šä¹‰ var map = &lt;String, int&gt;{â€˜oneâ€™: 1, â€˜twoâ€™: 2} Runes ä»£è¡¨å­—ç¬¦ä¸²çš„ UTF-32 code pointsï¼Œé€šå¸¸ä½¿ç”¨ \uXXXX çš„æ–¹å¼æ¥è¡¨ç¤º Unicode code pointï¼Œ XXXX æ˜¯4ä¸ª 16 è¿›åˆ¶çš„æ•°ï¼Œä¾‹å¦‚ \u2665 è¿”å›žå¿ƒå½¢ç¬¦å· () Symbols ä»£è¡¨ Dart ç¨‹åºä¸­å£°æ˜Žçš„æ“ä½œç¬¦æˆ–è€…æ ‡è¯†ç¬¦ï¼Œå‡ ä¹Žä¸ä½¿ç”¨ 3ã€Functionå‡½æ•°æ–¹æ³•çš„å¯é€‰å‚æ•°é€šè¿‡åœ¨å‚æ•°åˆ—è¡¨ä¸­ç”¨ {} æŒ‡å®šï¼Œä¾‹å¦‚ï¼š 1234567void say(String name, &#123;String word = 'hello'&#125;)&#123; print('$name say $word'); &#125;// é€šè¿‡ï¼ˆå¯é€‰å‚æ•°å + :ï¼‰è¿›è¡Œå¯é€‰å‚æ•°çš„èµ‹å€¼main()&#123; say('zm', word: 'Hello World'); // kuky say Hello World&#125; word å‚æ•°ä¸ºå¯é€‰å‚æ•°ï¼Œé»˜è®¤å€¼ä¸º hello 4ã€Operatorsæ“ä½œç¬¦å‡ ä¹Žå’Œåˆ«çš„è¯­è¨€ç±»ä¼¼ï¼Œæä¸ªæ¯”è¾ƒç‰¹æ®Šçš„èµ‹å€¼æ“ä½œç¬¦ ??= å’Œ ?.æ“ä½œç¬¦ 123var a = 1;var b ?? = a; // å¦‚æžœ b çš„å€¼æ˜¯ null åˆ™å°† a èµ‹å€¼ç»™ bï¼Œå¦åˆ™ä¿æŒä¸å˜var c = size?.x; // å¦‚æžœ size ä¸º null åˆ™è¿”å›ž nullï¼Œå¦åˆ™è¿”å›ž size.a çš„å€¼ 5ã€Conditional ExpressionsDart å¯ä»¥é€šè¿‡ä¸¤ä¸ªç‰¹æ®Šçš„æ“ä½œç¬¦æ›¿æ¢ if(){} else{} è¡¨è¾¾å¼ 1234/// condition? expr1: expr2 åŒ java ä¸‰ç›®è¿ç®—ç¬¦var a = if(a &lt; 0) -a : a/// expr1 ?? expr2 String toString() =&gt; msg ?? super.toString() // å¦‚æžœ expr1 ä¸ä¸º null åˆ™è¿”å›ž expr1 å¦åˆ™è¿”å›ž expr 6ã€Cascade Notaion(..)çº§è”æ“ä½œç¬¦ (..) å¯ä»¥åœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Š è¿žç»­è°ƒç”¨å¤šä¸ªå‡½æ•°ä»¥åŠè®¿é—®æˆå‘˜å˜é‡ 12345678910111213141516class Size&#123; double x; double y; @override String toString() &#123; return 'Size&#123;x: $x, y: $y&#125;'; &#125;&#125;var size = Size();/// é€šè¿‡çº§è”æ“ä½œç¬¦è¿›è¡Œèµ‹å€¼ï¼Œå¯ä»¥æ›´åŠ ç®€æ´ï¼Œ!!å¦‚æžœå‡½æ•°è¿”å›žå€¼ä¸º void åˆ™ä¸èƒ½è¿›è¡Œçº§è”!!print(size ..x = 10 ..y = 100 ..toString()); /// è¾“å‡º Size&#123;x: 10.0, y: 100.0&#125; 7ã€foreaché€šè¿‡ foreach å¾ªçŽ¯éåŽ†ä¸€ä¸ªå®žçŽ° Iterable æŽ¥å£çš„å¯¹è±¡ 12345var items = [1, 2, 3, 4, 5];var maps = &#123;'a': 1, 'b': 2&#125;;items.where((i) =&gt; i &gt; 2).forEach((i) =&gt; print(i)); // 3, 4, 5maps.forEach((key, value) =&gt; print('$key =&gt; $value')); // a =&gt; 1, b =&gt; 2 8ã€Switch and caseå¦‚æžœéœ€è¦å®žçŽ°ç»§ç»­åˆ°ä¸‹ä¸€ä¸ª case è¯­å¥ä¸­ç»§ç»­æ‰§è¡Œï¼Œåˆ™å¯ä»¥ ä½¿ç”¨ continue è¯­å¥è·³è½¬åˆ°å¯¹åº”çš„æ ‡ç­¾å¤„ç»§ç»­æ‰§è¡Œ 1234567891011var command = 'Close';switch (command.toLowerCase()) &#123; case 'close': print('close'); continue open; open: // è¿™æ˜¯ä¸ªæ ‡ç­¾ case 'open': print('open'); break;&#125; 9ã€Assertå¦‚æžœæ¡ä»¶è¡¨è¾¾å¼ç»“æžœä¸æ»¡è¶³éœ€è¦ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ assert è¯­å¥ä¿©æ‰“æ–­ä»£ç çš„æ‰§è¡Œï¼Œä¾‹å¦‚ï¼šassert(a == 1); 10ã€Exceptionsæ‰€æœ‰çš„ Dart å¼‚å¸¸æ˜¯éžæ£€æŸ¥å¼‚å¸¸ã€‚æ•æ‰ exceptions çš„æ—¶å€™å¯ä»¥é€šè¿‡ on æŒ‡å®š exceptions ç±»åž‹ï¼Œå†ä½¿ç”¨ catch æ•èŽ· 1234567891011try &#123; breedMoreLlamas();&#125; on OutOfLlamasException &#123; buyMoreLlamas();&#125; on Exception catch (e) &#123; print('Unknown exception: $e');&#125; catch (e, s) &#123; // å‡½æ•° catch å¯ä»¥å¸¦æœ‰ä¸€ä¸ªæˆ–ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ï¼Œç¬¬äºŒä¸ªä¸ºå †æ ˆä¿¡æ¯ print('Something really unknown: $e'); print('Stack trace:\n $s'); rethrow; // é€šè¿‡ rethrow å¯ä»¥å°†å¼‚å¸¸é‡æ–°æŠ›å‡º&#125; 11ã€ClassesDart ä¸­çš„ç±»éƒ½æ˜¯å•ç»§æ‰¿ï¼Œä½†æ˜¯åŒæ—¶æ”¯æŒ mixin çš„ç»§æ‰¿æœºåˆ¶ï¼ˆé™¤ Object ç±»ï¼Œæ¯ä¸ªç±»éƒ½åªæœ‰ä¸€ä¸ªè¶…ç±»ï¼‰ï¼Œæ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿äºŽ Objectï¼Œé€šè¿‡è°ƒç”¨ runtimeType åˆ¤æ–­å®žä¾‹çš„ç±»åž‹ã€‚æ¯ä¸ªå®žä¾‹å˜é‡éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª getter æ–¹æ³•ï¼ˆéšå«çš„ï¼‰ï¼Œ Non-final å®žä¾‹å˜é‡è¿˜ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª setter æ–¹æ³•ã€‚ Constructors Dart çš„æž„é€ å‡½æ•°åŒ Java ç±»ä¼¼ 12345678910class Size &#123; num x, y; Size(num nx, num y)&#123; x = nx; this.y = y; // this å…³é”®å­—åªæœ‰å½“åå­—å†²çªæ—¶å€™ä½¿ç”¨ï¼Œå¦åˆ™ Dart æŽ¨èçœç•¥ this &#125; Size(this.x, this.y); // Dart é€šè¿‡è¯­æ³•ç³–çœç•¥äº†æž„é€ å‡½æ•°çš„èµ‹å€¼è¿‡ç¨‹ï¼Œæ•ˆæžœåŒä¸Š&#125; å¦‚æžœæ²¡æœ‰å®šä¹‰æž„é€ å‡½æ•°ï¼Œåˆ™ä¼šæœ‰ä¸ªé»˜è®¤æž„é€ å‡½æ•°ã€‚é»˜è®¤æž„é€ å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œå¹¶ä¸”ä¼šè°ƒç”¨è¶…ç±»çš„ æ²¡æœ‰å‚æ•°çš„æž„é€ å‡½æ•°ã€‚å­ç±»ä¸ä¼šç»§æ‰¿è¶…ç±»çš„æž„é€ å‡½æ•°ï¼Œå­ç±»å¦‚æžœæ²¡æœ‰å®šä¹‰æž„é€ å‡½æ•°ï¼Œåˆ™åªæœ‰ä¸€ä¸ªé»˜è®¤æž„é€ å‡½æ•°ã€‚ Dart é€šè¿‡å‘½åæž„é€ å‡½æ•°ä¸ºç±»åˆ›å»ºå¤šä¸ªæž„é€ å‡½æ•°ï¼ŒåŒæ—¶æŒ‡æ˜Žæ„å›¾ 12345678910111213141516class Size &#123; num x, y; Size(this.x, this.y); Size.fromJson(Map json)&#123; this.x = json['x']; this.y = json['y']; &#125; // å› ä¸ºæž„é€ å‡½æ•°ä¸èƒ½ç»§æ‰¿ï¼Œå¦‚æžœå¸Œæœ›å­ç±»ä¹Ÿæœ‰è¶…ç±»ä¸€æ ·çš„å‘½åæž„é€ å‡½æ•°ï¼Œå¿…é¡»åœ¨å­ç±»ä¸­å®žçŽ°è¯¥æž„é€ å‡½æ•° // æž„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰é™¤äº†å¯ä»¥è°ƒç”¨è¶…ç±»æž„é€ å‡½æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åˆå§‹åŒ–å®žä¾‹å‚æ•° // åˆå§‹åŒ–åˆ—è¡¨éžå¸¸é€‚åˆç”¨æ¥è®¾ç½® final å˜é‡çš„å€¼ Size.fromJsonInit(Map json) : this.x = json['x'], this.y = json['y'];&#125; å¸¸é‡æž„é€ å‡½æ•°ï¼ˆå¦‚æžœç±»éœ€è¦æä¾›ä¸€ä¸ªçŠ¶æ€ä¸å˜çš„å¯¹è±¡ï¼Œé€šè¿‡ const æž„é€ å‡½æ•°å®žçŽ°ï¼‰ 123456class ConstPoint &#123; final num x; final num y; const ConstPoint(this.x, this.y);&#125; å·¥åŽ‚æ–¹æ³•æž„é€ å‡½æ•°ï¼ˆå¦‚æžœä¸€ä¸ªç±»ä¸éœ€è¦æ¯æ¬¡éƒ½æä¾›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œé€šè¿‡ factory æž„é€ å‡½æ•°å®žçŽ°ï¼‰ 12345678910111213141516class HttpCore &#123; HttpCore._internal(); factory HttpCore() &#123; if (_instance == null) _instance = HttpCore._internal(); return _instance; &#125; static HttpCore _instance; static HttpCore get instance =&gt; HttpCore(); void _request()&#123; //... &#125;&#125; æ¯ä¸ªç±»éƒ½éšå¼çš„å®šä¹‰äº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰å®žä¾‹æˆå‘˜çš„æŽ¥å£ï¼Œ å¹¶ä¸”è¿™ä¸ªç±»å®žçŽ°äº†è¿™ä¸ªæŽ¥å£ï¼Œé€šè¿‡æŠ½è±¡ç±»å®žçŽ°ç±»ä¼¼ Java æŽ¥å£çš„åŠŸèƒ½ã€‚ 12345678910abstract class Callback &#123; void print(String msg);&#125;class A implements Callback&#123; @override void print(String msg) &#123; print(msg); &#125;&#125; Mixins Dart | ä»€ä¹ˆæ˜¯Mixinï¼šhttps://www.jianshu.com/p/a578bd2c42aa 12ã€Asynchrony supportFuture 123456789loopIntegers() &#123; // é€šè¿‡ then è¿›è¡ŒèŽ·å–åˆ° Future å¯¹è±¡åŽçš„æ“ä½œ getListDelay().then((ints) =&gt; ints.forEach((i) =&gt; print(i)));&#125;// ç”Ÿæˆä¸€ä¸ª Future å¯¹è±¡Future&lt;List&lt;int&gt;&gt; getListDelay() &#123; return Future.delayed(Duration(seconds: 2), () =&gt; List.generate(10, (delta) =&gt; delta));&#125; é€šè¿‡ async await ç®€åŒ– Future æ“ä½œ 1234567891011121314runUsingFuture() &#123; //... findEntrypoint().then((entrypoint) &#123; return runExecutable(entrypoint, args); &#125;).then(flushThenExit);&#125;// ç®€åŒ–äº† thenrunUsingAsyncAwait() async &#123; //... var entrypoint = await findEntrypoint(); var exitCode = await runExecutable(entrypoint, args); await flushThenExit(exitCode);&#125; æœ‰æ—¶å€™è¦æ±‚è°ƒç”¨å¾ˆå¤šå¼‚æ­¥æ–¹æ³•ï¼Œå¹¶ä¸”ç­‰å¾… æ‰€æœ‰æ–¹æ³•å®ŒæˆåŽå†ç»§ç»­æ‰§è¡Œï¼Œé€šè¿‡ä½¿ç”¨ Future.wait() è¿›è¡Œç®¡ç† 12345678Future deleteDone = deleteLotsOfFiles();Future copyDone = copyLotsOfFiles();Future checksumDone = checksumLotsOfOtherFiles();Future.wait([deleteDone, copyDone, checksumDone]) .then((List values) &#123; print('Done with all the long steps'); &#125;); Stream Dart|ä»€ä¹ˆæ˜¯ Streamï¼šhttps://www.jianshu.com/p/a5d7758938ef å¤§æ¦‚äº†è§£äº† Dart çš„è¯­æ³•ï¼Œä¸‹èŠ‚å°±å¼€å§‹å†™ Flutter å•¦~ï¼ŒçŽ¯å¢ƒçš„å®‰è£…å…·ä½“æŸ¥çœ‹å®˜ç½‘ï¼Œå¾ˆè¯¦ç»† Flutter çŽ¯å¢ƒå®‰è£… è®°å¾—ä¸€å®šè¦é…ç½®é•œåƒï¼Œé…ç½®é•œåƒï¼Œé…ç½®é•œåƒ https://flutterchina.club/get-started/install/]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flutterå¼€å‘çŽ¯å¢ƒæ­å»ºMacç‰ˆ]]></title>
    <url>%2Fposts%2F3223dff5.html</url>
    <content type="text"><![CDATA[ç³»ç»ŸçŽ¯å¢ƒè¦æ±‚Flutterå› ä¸ºæ˜¯æ–°å‡ºçš„æ¡†æž¶ï¼Œæ‰€ä»¥å¯¹ç³»ç»Ÿè¿˜æ˜¯æœ‰ä¸€å®šçš„è¦æ±‚çš„ã€‚ MacOS ï¼ˆ64-bitï¼‰ ç£ç›˜ç©ºé—´ï¼šå¤§äºŽ700Mï¼Œå¦‚æžœç®—ä¸ŠAndroid Studioç­‰ç¼–è¾‘å·¥å…·ï¼Œå°½é‡å¤§äºŽ3Gã€‚ å‘½ä»¤å·å·¥å…·ï¼šbashã€mkdirã€rmã€gitã€curlã€unzipã€whichã€brew è¿™äº›å‘½ä»¤åœ¨éƒ½å¯ä»¥ä½¿ç”¨ã€‚ æ³¨æ„ï¼šä¸€èˆ¬ä½ ä¼šåœ¨brewè¿™ä¸ªå‘½ä»¤ä¸‹è½½å‘ï¼Œå¾ˆå¤šmacç³»ç»Ÿéƒ½æ²¡æœ‰å®‰è£…è¿™ä¸ªï¼Œä½ å¯ä»¥è¿›è¡Œå®‰è£…ï¼Œå› ä¸ºè¿™ä¸ªå’Œæœ¬çŸ¥è¯†å…³ç³»æ€§ä¸å¤§ï¼Œæ‰€ä»¥æˆ‘å°±ä¸å†™æµç¨‹äº†ï¼Œå¦‚æžœä½ å‡ºçŽ°é—®é¢˜ï¼Œç›´æŽ¥ç‚¹å‡»é“¾æŽ¥å­¦ä¹ å®‰è£…å°±å¯ä»¥äº†ã€‚ å­¦ä¹ å®‰è£…brewï¼šhttps://segmentfault.com/a/1190000013317511 ä¸‹è½½Flutter SDKåŒ…è¿™é‡ŒæŽ¨èåŽ»å®˜ç½‘ä¸‹è½½å°±å¥½ï¼Œæˆ‘æŒ‚äº†æ¢¯å­ï¼Œé€Ÿåº¦å¹¶ä¸æ…¢ã€‚ ç½‘å€ï¼šhttps://flutter.dev/docs/development/tools/sdk/releases?tab=macos é…ç½®çŽ¯å¢ƒå˜é‡åŽ‹ç¼©åŒ…ä¸‹è½½å¥½ä»¥åŽï¼Œæ‰¾ä¸ªä½ç½®è¿›è¡Œè§£åŽ‹ã€‚è¿™ä¸ªä½ç½®å¾ˆé‡è¦ï¼Œå› ä¸ºä¸‹é¢é…ç½®çŽ¯å¢ƒå˜é‡çš„æ—¶å€™è¦ç”¨åˆ°ã€‚æ¯”å¦‚ä½ é…ç½®åˆ°äº†æ ¹ç›®å½•ä¸‹çš„appæ–‡ä»¶å¤¹ã€‚ 1.æ‰“å¼€ç»ˆç«¯å·¥å…·ï¼ˆè¿™ä¸ªæˆ‘å°±ä¸ç”¨å†™äº†å§ï¼‰ï¼Œä½¿ç”¨vimè¿›è¡Œé…ç½®çŽ¯å¢ƒå˜é‡ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1open ~/.bash_profile åœ¨æ‰“å¼€çš„æ–‡ä»¶é‡Œå¢žåŠ ä¸€è¡Œä»£ç ï¼Œæ„æ€æ˜¯é…ç½®flutterå‘½ä»¤åœ¨ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨ã€‚ 1export PATH=/app/flutter/bin:$PATH æç¤ºï¼šè¿™è¡Œå‘½ä»¤ä½ è¦æ ¹æ®ä½ æŠŠåŽ‹ç¼©åŒ…è§£åŽ‹çš„ä½ç½®æ¥è¿›è¡Œç¼–å†™ï¼Œå†™çš„æ˜¯ä½ çš„è·¯å¾„ï¼Œå¾ˆæœ‰å¯èƒ½ä¸è·Ÿæ–‡ç« ä¸€æ ·ã€‚ é…ç½®å®ŒæˆåŽï¼Œéœ€è¦ç”¨sourceå‘½ä»¤é‡æ–°åŠ è½½ä¸€ä¸‹ ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š 1source ~/.bash_profile å®Œæˆè¿™éƒ¨ä»¥åŽï¼Œå°±ç®—æˆ‘ä»¬flutterçš„å®‰è£…å·¥ä½œå®Œæˆäº†ï¼Œä½†æ˜¯è¿™è¿˜ä¸èƒ½è¿›è¡Œå¼€å‘ã€‚å¯ä»¥ä½¿ç”¨å‘½ä»¤æ¥æ£€æµ‹ä¸€ä¸‹ï¼Œæ˜¯å¦å®‰è£…å®Œæˆäº†ã€‚ 1flutter -h æ£€æŸ¥å¼€å‘çŽ¯å¢ƒåˆ°ä¸Šè¾¹ä¸ºæ­¢ï¼Œæˆ‘ä»¬å®‰è£…å¥½äº†Flutterï¼Œä½†æ˜¯è¿˜ä¸å…·å¤‡å¼€å‘çŽ¯å¢ƒã€‚å¼€å‘è¿˜éœ€è¦å¾ˆå¤šè½¯ä»¶å’Œæ’ä»¶çš„æ”¯æŒï¼Œé‚£åˆ°åº•éœ€è¦å“ªäº›æ’ä»¶å’Œè½¯ä»¶é‚£ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Flutterä¸ºæˆ‘ä»¬æä¾›çš„å‘½ä»¤æ¥è¿›è¡Œæ£€æŸ¥ï¼š 1flutter doctor å¦‚æžœä½ è‹±æ–‡å¾ˆå¥½ï¼Œä½ åº”è¯¥å¯ä»¥å¾ˆå®¹æ˜“è¯»å‡ºä¸Šé¢çš„æ£€æµ‹ç»“æžœï¼Œæœ‰å¾ˆå¤šæ¡ç›®éƒ½æ²¡æœ‰é€šè¿‡ã€‚éœ€è¦æˆ‘ä»¬å®‰è£…æ£€æµ‹ç»“æžœä¸€æ¡æ¡è¿›è¡Œå®‰è£…ï¼Œç›´åˆ°æ»¡è¶³å¼€å‘çŽ¯å¢ƒã€‚ï¼ˆå¦‚æžœæœ‰[!]xæ ‡å¿—ï¼Œè¡¨ç¤ºæœ¬è¡Œæ£€æµ‹æ²¡æœ‰é€šè¿‡ï¼Œå°±éœ€è¦æˆ‘ä»¬è®¾ç½®æˆ–è€…å®‰è£…ç›¸åº”çš„è½¯ä»¶äº†ã€‚ï¼‰ å¦‚æžœä½ æœ‰å®‰è£…ï¼Œé‚£ä¹ˆç¬¬ä¸€æ­¥è¦ä½œçš„æ˜¯å…è®¸åè®®ï¼ˆandroid-licensesï¼‰ã€‚å…è®¸æ–¹æ³•å°±æ˜¯åœ¨ç»ˆç«¯è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1flutter doctor --android-licenses ç„¶åŽè®©ä½ è¾“å…¥Y/Nçš„æ—¶å€™ï¼Œä¸€è·¯Yå°±å¯ä»¥äº†ï¼ˆè‡³äºŽä»€ä¹ˆæ„æ€ï¼Œæˆ‘ä¹Ÿæ²¡ä»”ç»†çœ‹ï¼Œå¤§æ¦‚å°±å’Œå®‰è£…è½¯ä»¶çš„ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥æ˜¯ä¸€æ ·çš„ï¼Œä½ æŒ‰Næ˜¯ä¸èƒ½æˆåŠŸçš„ï¼‰ã€‚ è¿™ä¸å®ŒæˆåŽï¼Œæˆ‘ä»¬å†ä½¿ç”¨flutter doctorè¿›è¡Œæ£€æµ‹åŽï¼Œä¼šçœ‹åˆ°è¿˜æ˜¯æœ‰å¾ˆå¤šxã€‚ å…¶å®žå¤§æ¦‚æ„æ€å°±æ˜¯æˆ‘ä»¬éœ€è¦è¿™äº›è½¯ä»¶ï¼ŒFlutteræŽ¨èä½ ç”¨brewå‘½ä»¤è¿›è¡Œå®‰è£…ã€‚ æˆ‘ä»¬å¯ä»¥ç›´æŽ¥åœ¨ç»ˆç«¯é‡Œè¾“å…¥ä¸‹åˆ—å‘½ä»¤ï¼ˆæ¯è¾“å®Œä¸€ä¸ªéƒ½è¦ç­‰ä¸€ä¼šï¼Œç­‰å¾…è½¯ä»¶åŒ…å®‰è£…å®Œæˆï¼‰ 12345brew install --HEAD libimobiledevicebrew install ideviceinstallerbrew install ios-deploybrew install cocoapodspod setup å®‰è£…å®Œè¿™äº›ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºAndroid Studioå®‰è£…ä¸€ä¸‹Flutteræ’ä»¶ï¼ˆè¿™ä¸ªæœ‰å¯èƒ½ä½ å®‰è£…è¿‡ï¼Œå¦‚æžœå‡ºçŽ°ä¸‹é¢çš„æç¤ºï¼Œè¯´æ˜Žä½ è¿˜æ²¡æœ‰å®‰è£…ï¼‰ 12âœ— Flutter plugin not installed; this adds Flutter specific functionality.âœ— Dart plugin not installed; this adds Dart specific functionality. æ‰“å¼€Android Stuido è½¯ä»¶ï¼Œç„¶åŽæ‰¾åˆ°Pluginçš„é…ç½®ï¼Œæœç´¢Flutteræ’ä»¶ã€‚ ç‚¹ä¸­é—´çš„Search in repositories,ç„¶åŽç‚¹å‡»å®‰è£…ã€‚ å®‰è£…å®ŒæˆåŽï¼Œä½ éœ€è¦é‡æ–°å¯åŠ¨ä¸€ä¸‹Android Studioè½¯ä»¶ã€‚ Pubæºçš„é…ç½®å¦‚æžœä½ æ²¡æœ‰æ¢¯å­ï¼Œä¸€ä¸ªäººäººéƒ½çŸ¥é“çš„åŽŸå› ï¼Œä½ è¿˜éœ€è¦åœ¨çŽ¯å¢ƒå˜é‡é‡Œé…ç½®ä¸€ä¸‹Pubæºï¼Œä¸ç„¶ä½ æ˜¯æ— æ³•è¿›è¡Œä½¿ç”¨çš„ã€‚ è¿è¡Œï¼š 1open ~/.bash_profile å¢žåŠ ä¸¤è¡Œé…ç½® 12export PUB_HOSTED_URL=https://pub.flutter-io.cnexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn é‡æ–°åŠ è½½çŽ¯å¢ƒå˜é‡ 1source ~/.bash_profile Android studioæ–°å»ºFlutteré¡¹ç›®æ‰“å¼€Andorid Studio ï¼Œä¼šå‡ºçŽ°ä¸‹é¢çš„ç•Œé¢ï¼Œæˆ‘ä»¬é€‰æ‹©ç¬¬äºŒé¡¹ï¼Œæ–°å»ºFlutteré¡¹ç›®ã€‚ æ‰“å¼€ç¬¬äºŒä¸ªçª—å£åŽï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªé€‰é¡¹Flutter Application(flutteråº”ç”¨)ã€‚ è¿™æ­¥å®ŒæˆåŽï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªFlutteré¡¹ç›® å®‰è£…AVDè™šæ‹Ÿæœº çŽ°åœ¨éœ€è¦ä¸€ä¸ªè™šæ‹Ÿæœºæ¥è¿è¡Œæˆ‘ä»¬çš„ç¨‹åºï¼Œå¯ä»¥ç‚¹å‡»Android Studioä¸­çš„ä¸Šæ–¹èœå•tool -AVD Manageré€‰é¡¹ã€‚ å‡ºçŽ°æ–°å»ºèœå•ï¼Œé€‰æ‹©Create Virtual Device.....,å¦‚æžœä½ ä¸€ä¸ªè™šæ‹Ÿæœºä¹Ÿæ²¡å»ºè¿‡ï¼Œè¿™ä¸ªé€‰é¡¹åœ¨å¯¹è¯æ¡†çš„ä¸­é—´ é€‰æ‹©è™šæ‹Ÿæœºç±»åž‹ï¼Œè¿™ä¸ªä½ éšæ„é€‰å°±å¥½ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯Nexus 5xã€‚ï¼ˆå¦‚æžœä½ å±å¹•å°ï¼Œå°±é€‰æ‹©ä¸€ä¸ªå°å±å¹•çš„è™šæ‹Ÿæœºï¼‰![image-20190528113941915](/Users/zhangmiao/Library/Application Support/typora-user-images/image-20190528113941915.png) é€‰æ‹©ç³»ç»Ÿï¼Œè¿™é‡Œå°½é‡é€‰æ‹©æœ€æ–°çš„ï¼Œæˆ‘é€‰æ‹©äº†Android 9.0ç³»ç»Ÿï¼Œé€‰æ‹©å¥½åŽï¼Œåˆæ˜¯ä¸€ä¸ªæ¼«é•¿çš„ç­‰å¾…è¿‡ç¨‹ã€‚ å®‰è£…å¥½åŽï¼Œç‚¹å‡»å¼€å§‹æŒ‰é’®ï¼Œè¿è¡Œè™šæ‹Ÿæœºäº†ï¼ˆç¬¬ä¸€æ¬¡è¿è¡Œï¼Œéœ€è¦å®‰è£…ç³»ç»Ÿï¼Œä¼šæ…¢ä¸€äº›ï¼‰ï¼Œè¿è¡Œèµ·æ¥åŽï¼Œå¦‚ä¸‹å›¾ã€‚ è®©Flutterè·‘èµ·æ¥è™šæ‹Ÿæœºè¿è¡Œä»¥åŽï¼Œå¯ä»¥ç‚¹å‡»debugæŒ‰é’®ï¼Œè®©Flutterç¨‹åºè·‘èµ·æ¥ã€‚å¦‚æžœä½ å¹¸è¿çš„è¯ï¼Œä½ çš„Flutterç¨‹åºç»è¿‡ç¼–è¯‘åŽï¼Œå°±ä¼šè·‘èµ·æ¥äº†ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[androidå’Œjavaæ³›åž‹æ‰«ç›²]]></title>
    <url>%2Fposts%2Fc4ef6275.html</url>
    <content type="text"><![CDATA[Androidã€Javaæ³›åž‹æ‰«ç›²é¦–å…ˆæˆ‘ä»¬å®šä¹‰Aã€Bã€Cã€Då››ä¸ªç±»ï¼Œä»–ä»¬çš„å…³ç³»å¦‚ä¸‹ 1234class A &#123;&#125;class B extends A &#123;&#125;class C extends B &#123;&#125;class D extends C &#123;&#125; ä¸æŒ‡æ˜Žæ³›åž‹ç±»åž‹12345678//ä»¥ä¸‹ä»£ç å‡ç¼–è¯‘é€šè¿‡List list = new ArrayList();//ä¸æŒ‡æ˜Žæ³›åž‹ç±»åž‹ï¼Œæ³›åž‹é»˜è®¤ä¸ºObjectç±»åž‹ï¼Œæ•…èƒ½å¾€é‡Œé¢æ·»åŠ ä»»æ„å®žä¾‹å¯¹è±¡list.add(new A());list.add(new B());list.add(new C());//å–å‡ºåˆ™é»˜è®¤ä¸ºObjectç±»åž‹Object o = list.get(0); è¿™ä¸ªå¥½ç†è§£ï¼Œå› ä¸ºæ‰€æœ‰çš„ç±»éƒ½ç»§æ‰¿ä¸ŽObjectï¼Œæ•…èƒ½å¾€listé‡Œé¢æ·»åŠ ä»»æ„å®žä¾‹å¯¹è±¡ æ— è¾¹ç•Œé€šé…ç¬¦ ï¼Ÿé¦–å…ˆæˆ‘ä»¬è¦æ˜Žç™½ä¸€ä¸ªæ¦‚å¿µï¼Œé€šé…ç¬¦ï¼Ÿæ„ä¹‰å°±æ˜¯å®ƒæ˜¯ä¸€ä¸ªæœªçŸ¥çš„ç¬¦å·ï¼Œå¯ä»¥æ˜¯ä»£è¡¨ä»»æ„çš„ç±»ã€‚ 123456789101112131415//æˆ‘ä»¬å‘çŽ°ï¼Œè¿™æ ·å†™ç¼–è¯‘ä¸é€šè¿‡ï¼ŒåŽŸå› å¾ˆç®€å•ï¼Œæ³›åž‹ä¸åŒ¹é…ï¼Œè™½ç„¶Bç»§æ‰¿AList&lt;A&gt; listA = new ArrayList&lt;B&gt;(); //ä»¥ä¸‹5è¡Œä»£ç å‡ç¼–è¯‘é€šè¿‡List&lt;?&gt; list;list = new ArrayList&lt;A&gt;();list = new ArrayList&lt;B&gt;();list = new ArrayList&lt;C&gt;();list = new ArrayList&lt;D&gt;();Object o = list.get(0); //ç¼–è¯‘é€šè¿‡list.add(new A()); //ç¼–è¯‘ä¸é€šè¿‡list.add(new B()); //ç¼–è¯‘ä¸é€šè¿‡list.add(new C()); //ç¼–è¯‘ä¸é€šè¿‡list.add(new D()); //ç¼–è¯‘ä¸é€šè¿‡ çŸ¥è¯†ç‚¹ æ— è¾¹ç•Œé€šé…ç¬¦ ï¼Ÿ èƒ½å–ä¸èƒ½å­˜ã€‚è¿™ä¸ªå¥½ç†è§£ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“?å…·ä½“æ˜¯å•¥ç±»åž‹ï¼Œæ•…ä¸èƒ½å­˜ï¼›ä½†æ˜¯ä»»æ„ç±»åž‹éƒ½ç»§æ‰¿äºŽObjectï¼Œæ•…èƒ½å–ï¼Œä½†å–å‡ºé»˜è®¤ä¸ºObjectå¯¹è±¡ã€‚ ä¸Šè¾¹ç•Œç¬¦ ï¼Ÿextendsç»§ç»­ä¸Šä»£ç  123456789List&lt;? extends C&gt; listC;listC = new ArrayList&lt;A&gt;(); //ç¼–è¯‘ä¸é€šè¿‡listC = new ArrayList&lt;B&gt;(); //ç¼–è¯‘ä¸é€šè¿‡listC = new ArrayList&lt;C&gt;(); //ç¼–è¯‘é€šè¿‡listC = new ArrayList&lt;D&gt;(); //ç¼–è¯‘é€šè¿‡C c = listC.get(0); //ç¼–è¯‘é€šè¿‡listC.add(new C()); //ç¼–è¯‘ä¸é€šè¿‡listC.add(new D()); //ç¼–è¯‘ä¸é€šè¿‡ çŸ¥è¯†ç‚¹ ä¸Šè¾¹ç•Œç¬¦ ? extends åªæ˜¯é™å®šäº†èµ‹å€¼ç»™å®ƒçš„å®žä¾‹ç±»åž‹(è¿™é‡Œä¸ºèµ‹å€¼ç»™listCçš„å®žä¾‹ç±»åž‹)ï¼Œä¸”è¾¹ç•ŒåŒ…æ‹¬è‡ªèº«ã€‚ ä¸Šè¾¹ç•Œç¬¦ ? extends è·Ÿ ï¼Ÿ ä¸€æ ·èƒ½å–ä¸èƒ½å­˜ï¼Œé“ç†æ˜¯ä¸€æ ·çš„ï¼Œè™½ç„¶é™å®šäº†ä¸Šè¾¹ç•Œï¼Œä½†ç¼–è¯‘å™¨ä¾ç„¶ä¸çŸ¥é“ ? æ˜¯å•¥ç±»åž‹ï¼Œæ•…ä¸èƒ½å­˜ï¼›ä½†æ˜¯é™å®šäº†ä¸Šè¾¹ç•Œï¼Œæ•…å–å‡ºæ¥çš„å¯¹è±¡ç±»åž‹é»˜è®¤ä¸ºä¸Šè¾¹ç•Œçš„ç±»åž‹ ä¸‹è¾¹ç•Œç¬¦ ï¼Ÿsuper1234567891011List&lt;? super B&gt; listB;listB = new ArrayList&lt;A&gt;(); //ç¼–è¯‘é€šè¿‡listB = new ArrayList&lt;B&gt;(); //ç¼–è¯‘é€šè¿‡listB = new ArrayList&lt;C&gt;(); //ç¼–è¯‘ä¸é€šè¿‡listB = new ArrayList&lt;D&gt;(); //ç¼–è¯‘ä¸é€šè¿‡Object o = listB.get(0); //ç¼–è¯‘é€šè¿‡listB.add(new A()); //ç¼–è¯‘ä¸é€šè¿‡listB.add(new B()); //ç¼–è¯‘é€šè¿‡listB.add(new C()); //ç¼–è¯‘é€šè¿‡listB.add(new D()); //ç¼–è¯‘é€šè¿‡ çŸ¥è¯†ç‚¹ ä¸‹è¾¹ç•Œç¬¦ ï¼Ÿsuperï¼Œè·Ÿä¸Šè¾¹ç•Œç¬¦ä¸€æ ·ï¼Œåªæ˜¯é™å®šäº†èµ‹å€¼ç»™å®ƒçš„å®žä¾‹ç±»åž‹ï¼Œä¹ŸåŒ…æ‹¬è¾¹ç•Œè‡ªèº« ä¸‹è¾¹ç•Œç¬¦ ï¼Ÿsuper èƒ½å­˜èƒ½å–ï¼Œå› ä¸ºè®¾å®šäº†ä¸‹è¾¹ç•Œï¼Œæ•…æˆ‘ä»¬èƒ½å­˜ä¸‹è¾¹ç•Œä»¥ä¸‹çš„ç±»åž‹ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬è¾¹ç•Œè‡ªèº«ï¼›ç„¶è€Œå–å¾—æ—¶å€™ç¼–è¯‘å™¨ä¾ç„¶ä¸çŸ¥é“ ? å…·ä½“æ˜¯ä»€ä¹ˆç±»åž‹ï¼Œæ•…å–å‡ºé»˜è®¤ä¸ºObjectç±»åž‹ã€‚ ç±»åž‹æ“¦é™¤é¦–å…ˆæˆ‘ä»¬è¦æ˜Žç™½ä¸€ç‚¹ï¼šJava çš„æ³›åž‹åœ¨ç¼–è¯‘æœŸæœ‰æ•ˆï¼Œåœ¨è¿è¡ŒæœŸä¼šè¢«åˆ é™¤ æˆ‘ä»¬æ¥çœ‹ä¸€æ®µä»£ç  123//è¿™ä¸¤ä¸ªæ–¹æ³•å†™åœ¨åŒä¸€ä¸ªç±»é‡Œpublic void list(List&lt;A&gt; listA) &#123;&#125; public void list(List&lt;B&gt; listB) &#123;&#125; ä¸Šé¢çš„ä»£ç ä¼šæœ‰é—®é¢˜å—ï¼Ÿæ˜¾ç„¶æ˜¯æœ‰çš„ï¼Œç¼–è¯‘å™¨æŠ¥é”™ï¼Œæç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š list(List&lt;A&gt;) clashed with list(List&lt;B&gt;) ; both methods have same erasure ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼Œåœ¨ç±»åž‹æ“¦é™¤åŽï¼Œä¸¤ä¸ªæ–¹æ³•å…·æœ‰ç›¸åŒçš„ç­¾åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ç±»åž‹æ“¦é™¤åŽæ˜¯ä»€ä¹ˆæ ·å­ 12public void list(List listA) &#123;&#125; public void list(List listB) &#123;&#125; å¯ä»¥çœ‹å‡ºï¼Œä¸¤ä¸ªæ–¹æ³•ç­¾åå®Œå…¨ä¸€è‡´ï¼Œæ•…ç¼–è¯‘ä¸é€šè¿‡ã€‚ æ˜Žç™½äº†ç±»åž‹æ“¦é™¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ˜Žç™½ä¸€ä¸ªæ¦‚å¿µ æ³›åž‹ç±»å¹¶æ²¡æœ‰è‡ªå·±ç‹¬æœ‰çš„Classç±»å¯¹è±¡ æ¯”å¦‚å¹¶ä¸å­˜åœ¨List.classæˆ–æ˜¯List.classï¼Œè€Œåªæœ‰List.class æŽ¥ä¸‹æ¥è¿™ä¸ªæ¡ˆä¾‹å°±å¥½ç†è§£äº† 123List&lt;A&gt; listA = new ArrayList&lt;A&gt;();List&lt;B&gt; listB = new ArrayList&lt;B&gt;();System.out.println(listA.getClass() == listB.getClass()); //è¾“å‡ºtrue æ³›åž‹ä¼ é€’çŽ°å®žå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°æ³›åž‹ä¼ é€’ï¼Œä¾‹å¦‚æˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹Httpè¯·æ±‚è¿”å›žçš„ç»“æžœåšååºåˆ—åŒ–æ“ä½œ 1234567public static &lt;T&gt; T fromJson(String result, Class&lt;T&gt; type) &#123; try &#123; return new Gson().fromJson(result, type); &#125; catch (Exception ignore) &#123; return null; &#125;&#125; æ­¤æ—¶æˆ‘ä»¬ä¼ è¿›åŽ»æ˜¯ä»€ä¹ˆç±»åž‹ï¼Œå°±ä¼šè¿”å›žè‡ªåŠ¨è¯¥ç±»åž‹çš„å¯¹è±¡ 12345678String result="xxx";A a = fromJson(result, A.class);B b = fromJson(result, B.class);C c = fromJson(result, C.class);D d = fromJson(result, D.class);Integer integer = fromJson(result, Integer.class);String str = fromJson(result, String.class);Boolean boo = fromJson(result, Boolean.class); é‚£å¦‚æžœæˆ‘ä»¬æƒ³è¿”å›žä¸€ä¸ªé›†åˆå‘¢ï¼Œå¦‚List&lt;A&gt;ï¼Œä¸‹é¢è¿™æ ·æ˜Žæ˜¾æ˜¯ä¸å¯¹çš„ã€‚ 12//ç¼–è¯‘æŠ¥é”™ï¼Œå‰é¢ç±»åž‹æ“¦é™¤æ—¶ï¼Œæˆ‘ä»¬è®²è¿‡ï¼Œä¸å­˜List&lt;A&gt;.classè¿™ç§ç±»åž‹ArrayList&lt;A&gt; list = fromJson(result, ArrayList&lt;A&gt;.class)ï¼› é‚£æˆ‘ä»¬è¯¥æ€Žä¹ˆåšå‘¢ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬å¯¹fromJsonæ”¹é€ ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š 123456789//typeä¸ºä¸€ä¸ªæ•°ç»„ç±»åž‹public static &lt;T&gt; List&lt;T&gt; fromJson(String result, Class&lt;T[]&gt; type) &#123; try &#123; T[] arr = new Gson().fromJson(result, type);//é¦–å…ˆæ‹¿åˆ°æ•°ç»„ return Arrays.asList(arr); //æ•°ç»„è½¬é›†åˆ &#125; catch (Exception ignore) &#123; return null; &#125;&#125; è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è¿™ä¹ˆåšäº† 12345678String result="xxx";List&lt;A&gt; listA = fromJson(result, A[].class);List&lt;B&gt; listB = fromJson(result, B[].class);List&lt;C&gt; listC = fromJson(result, C[].class);List&lt;D&gt; listD = fromJson(result, D[].class);List&lt;Integer&gt; listInt = fromJson(result, Integer[].class);List&lt;String&gt; listStr = fromJson(result, String[].class);List&lt;Boolean&gt; listBoo = fromJson(result, Boolean[].class); okï¼Œæˆ‘åœ¨å†æ¥ï¼Œç›¸ä¿¡å¤§å¤šæ•°HttpæŽ¥å£è¿”å›žçš„æ•°æ®æ ¼å¼æ˜¯è¿™æ ·çš„ï¼š 123456public class Response&lt;T&gt; &#123; private T data; private int code; private String msg; //çœç•¥get/setæ–¹æ³•&#125; é‚£è¿™ç§æˆ‘ä»¬åˆè¯¥å¦‚ä½•ä¼ é€’å‘¢ï¼Ÿæ˜¾ç„¶ç”¨å‰é¢çš„ä¸¤ä¸ªfromJsonæ–¹æ³•éƒ½è¡Œä¸é€šï¼Œæˆ‘ä»¬å†æ¥æ”¹é€ ä¸€ä¸‹ï¼Œå¦‚ä¸‹: 12345678//è¿™é‡Œæˆ‘ä»¬ç›´æŽ¥ä¼ é€’ä¸€ä¸ªTypeç±»åž‹public static &lt;T&gt; T fromJson(String result, Type type) &#123; try &#123; return new Gson().fromJson(result, type); &#125; catch (Exception ignore) &#123; return null; &#125;&#125; è¿™ä¸ªTypeæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿç‚¹è¿›åŽ»çœ‹çœ‹ 12345public interface Type &#123; default String getTypeName() &#123; return toString(); &#125;&#125; å“¦ï¼ŒåŽŸæ¥å°±æ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å®ƒçš„å®žçŽ°ç±» å‘çŽ°æœ‰5ä¸ªå®žçŽ°ç±»ï¼Œå…¶ä¸­4ä¸ªæ˜¯æŽ¥å£ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯Classç±»ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹Classç±»çš„å£°æ˜Ž 123456public final class Class&lt;T&gt; implements java.io.Serializable, GenericDeclaration, Type, AnnotatedElement &#123; //çœç•¥å†…éƒ¨ä»£ç &#125; çŽ°åœ¨æœ‰æ²¡æœ‰æ˜Žç™½ç‚¹ï¼ŒçŽ°åœ¨æˆ‘ä»¬é‡ç‚¹æ¥å…³æ³¨ä¸‹TypeæŽ¥å£çš„å…¶ä¸­ä¸€ä¸ªå®žçŽ°æŽ¥å£ParameterizedTypeï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒçš„å†…éƒ¨ä»£ç ï¼Œé‡Œé¢å°±åªæœ‰3ä¸ªæ–¹æ³• 12345678910111213141516171819202122232425262728293031public interface ParameterizedType extends Type &#123; /** * ä¾‹å¦‚: * List&lt;String&gt; list; åˆ™è¿”å›ž &#123;String.class&#125; * Map&lt;String,Long&gt; map; åˆ™è¿”å›ž &#123;String.class,Long.class&#125; * Map.Entry&lt;String,Long&gt; entry; åˆ™è¿”å›ž &#123;String.class,Long.class&#125; * * @return ä»¥æ•°ç»„çš„å½¢å¼è¿”å›žæ‰€æœ‰çš„æ³›åž‹ç±»åž‹ */ Type[] getActualTypeArguments(); /** * ä¾‹å¦‚: * List&lt;String&gt; list; åˆ™è¿”å›ž List.class * Map&lt;String,Long&gt; map; åˆ™è¿”å›ž Map.class * Map.Entry&lt;String,Long&gt; entry; åˆ™è¿”å›ž Entry.class * * @return è¿”å›žæ³›åž‹ç±»çš„çœŸå®žç±»åž‹ */ Type getRawType(); /** * ä¾‹å¦‚: * List&lt;String&gt; list; åˆ™è¿”å›ž null * Map&lt;String,Long&gt; map; åˆ™è¿”å›ž null * Map.Entry&lt;String,Long&gt; entry; åˆ™è¿”å›ž Map.class * * @return è¿”å›žæ³›åž‹ç±»æŒæœ‰è€…çš„ç±»åž‹ï¼Œè¿™é‡Œå¯ä»¥ç®€å•ç†è§£ä¸ºè¿”å›žå¤–éƒ¨ç±»çš„ç±»åž‹ï¼Œå¦‚æžœæ²¡æœ‰å¤–éƒ¨ç±»ï¼Œåˆ™è¿”å›žnull */ Type getOwnerType();&#125; é¡¾åæ€ä¹‰ï¼ŒParameterizedType ä»£è¡¨ä¸€ä¸ªå‚æ•°åŒ–ç±»åž‹ã€‚ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ¥è‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼Œå¹¶å®žçŽ°ParameterizedTypeæŽ¥å£ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819202122public class ParameterizedTypeImpl implements ParameterizedType &#123; private Type rawType;//çœŸå®žç±»åž‹ private Type actualType;//æ³›åž‹ç±»åž‹ public ResponseType(Type rawType,Type actualType) &#123; this.rawType = rawType; this.actualType = actualType; &#125; public Type[] getActualTypeArguments() &#123; return new Type[]&#123;actualType&#125;; &#125; public Type getRawType() &#123; return rawType; &#125; public Type getOwnerType() &#123; return null; &#125;&#125; æˆ‘ä»¬å†æ¬¡è´´å‡ºfromJsonæ–¹æ³• 12345678//è¿™é‡Œæˆ‘ä»¬ç›´æŽ¥ä¼ é€’ä¸€ä¸ªTypeç±»åž‹public static &lt;T&gt; T fromJson(String result, Type type) &#123; try &#123; return new Gson().fromJson(result, type); &#125; catch (Exception ignore) &#123; return null; &#125;&#125; æ­¤æ—¶æˆ‘ä»¬æƒ³å¾—åˆ°Response&lt;T&gt;å¯¹è±¡ï¼Œå°±å¯ä»¥è¿™æ ·å†™ 123Response&lt;A&gt; responseA = fromJson(result, new ParameterizedTypeImpl(Response.class, A.class));Response&lt;B&gt; responseB = fromJson(result, new ParameterizedTypeImpl(Response.class, B.class));Response&lt;C&gt; responseC = fromJson(result, new ParameterizedTypeImpl(Response.class, C.class)); æƒ³å¾—åˆ°List&lt;T&gt;å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ParameterizedTypeImplå¾—åˆ°ï¼Œå¦‚ä¸‹: 123List&lt;A&gt; listA = fromJson(result, new ParameterizedTypeImpl(List.class, A.class));List&lt;B&gt; listB = fromJson(result, new ParameterizedTypeImpl(List.class, B.class));List&lt;C&gt; listC = fromJson(result, new ParameterizedTypeImpl(List.class, C.class)); ç„¶è€Œï¼Œå¦‚æžœæˆ‘ä»¬æƒ³å¾—åˆ°Response&lt;List&lt;T&gt;&gt;å¯¹è±¡ï¼Œåˆè¯¥å¦‚ä½•å¾—åˆ°å‘¢ï¼Ÿ ParameterizedTypeImplä¸€æ ·èƒ½å¤Ÿå®žçŽ°ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314//ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºList&lt;T&gt;å¯¹è±¡å¯¹åº”çš„Typeç±»åž‹Type listAType = new ParameterizedTypeImpl(List.class, A.class);Type listBType = new ParameterizedTypeImpl(List.class, B.class);Type listCType = new ParameterizedTypeImpl(List.class, C.class);//ç¬¬äºŒæ­¥ï¼Œåˆ›å»ºResponse&lt;List&lt;T&gt;&gt;å¯¹è±¡å¯¹åº”çš„Typeç±»åž‹Type responseListAType = new ParameterizedTypeImpl(Response.class, listAType);Type responseListBType = new ParameterizedTypeImpl(Response.class, listBType);Type responseListCType = new ParameterizedTypeImpl(Response.class, listCType);//ç¬¬ä¸‰æ­¥ï¼Œé€šè¿‡Typeå¯¹è±¡ï¼ŒèŽ·å–å¯¹åº”çš„Response&lt;List&lt;T&gt;&gt;å¯¹è±¡Response&lt;List&lt;A&gt;&gt; responseListA = fromJson(result, responseListAType);Response&lt;List&lt;B&gt;&gt; responseListB = fromJson(result, responseListBType);Response&lt;List&lt;C&gt;&gt; responseListC = fromJson(result, responseListCType); ç„¶åŽï¼Œèƒ½ä¸èƒ½å†ç®€å•ä¸€ç‚¹å‘¢ï¼Ÿå¯ä»¥ï¼Œæˆ‘ä»¬å¯¹ParameterizedTypeImplæ”¹é€ ä¸€ä¸‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * User: ljx * Date: 2018/10/23 * Time: 09:36 */public class ParameterizedTypeImpl implements ParameterizedType &#123; private final Type rawType; private final Type ownerType; private final Type[] actualTypeArguments; //é€‚ç”¨äºŽå•ä¸ªæ³›åž‹å‚æ•°çš„ç±» public ParameterizedTypeImpl(Type rawType, Type actualType) &#123; this(null, rawType, actualType); &#125; //é€‚ç”¨äºŽå¤šä¸ªæ³›åž‹å‚æ•°çš„ç±» public ParameterizedTypeImpl(Type ownerType, Type rawType, Type... actualTypeArguments) &#123; this.rawType = rawType; this.ownerType = ownerType; this.actualTypeArguments = actualTypeArguments; &#125; /** * æœ¬æ–¹æ³•ä»…ä½¿ç”¨äºŽå•ä¸ªæ³›åž‹å‚æ•°çš„ç±» * æ ¹æ®typesæ•°ç»„ï¼Œç¡®å®šå…·ä½“çš„æ³›åž‹ç±»åž‹ * List&lt;List&lt;String&gt;&gt; å¯¹åº” get(List.class, List.class, String.class) * * @param types Typeæ•°ç»„ * @return ParameterizedTypeImpl */ public static ParameterizedTypeImpl get(@NonNull Type rawType, @NonNull Type... types) &#123; final int length = types.length; if (length &gt; 1) &#123; Type parameterizedType = new ParameterizedTypeImpl(types[length - 2], types[length - 1]); Type[] newTypes = Arrays.copyOf(types, length - 1); newTypes[newTypes.length - 1] = parameterizedType; return get(rawType, newTypes); &#125; return new ParameterizedTypeImpl(rawType, types[0]); &#125; //é€‚ç”¨äºŽå¤šä¸ªæ³›åž‹å‚æ•°çš„ç±» public static ParameterizedTypeImpl getParameterized(@NonNull Type rawType, @NonNull Type... actualTypeArguments) &#123; return new ParameterizedTypeImpl(null, rawType, actualTypeArguments); &#125; public final Type[] getActualTypeArguments() &#123; return actualTypeArguments; &#125; public final Type getOwnerType() &#123; return ownerType; &#125; public final Type getRawType() &#123; return rawType; &#125;&#125; æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™æ ·å†™ 123456789//ç¬¬ä¸€æ­¥ï¼Œç›´æŽ¥åˆ›å»ºResponse&lt;List&lt;T&gt;&gt;å¯¹è±¡å¯¹åº”çš„Typeç±»åž‹Type responseListAType = ParameterizedTypeImpl.get(Response.class, List.class, A.class);Type responseListBType = ParameterizedTypeImpl.get(Response.class, List.class, B.class)Type responseListCType = ParameterizedTypeImpl.get(Response.class, List.class, C.class)//ç¬¬äºŒæ­¥ï¼Œé€šè¿‡Typeå¯¹è±¡ï¼ŒèŽ·å–å¯¹åº”çš„Response&lt;List&lt;T&gt;&gt;å¯¹è±¡Response&lt;List&lt;A&gt;&gt; responseListA = fromJson(result, responseListAType);Response&lt;List&lt;B&gt;&gt; responseListB = fromJson(result, responseListBType);Response&lt;List&lt;C&gt;&gt; responseListC = fromJson(result, responseListCType); çŽ°å®žå¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯èƒ½é‡åˆ°è¿™æ ·çš„æ•°æ®ç»“æž„ 12345678&#123; "code": 0, "msg": "", "data": &#123; "totalPage": 0, "list": [] &#125;&#125; æ­¤æ—¶ï¼ŒResponse&lt;T&gt; é‡Œé¢çš„æ³›åž‹ä¼ Listè‚¯å®šæ˜¯ä¸èƒ½æ­£å¸¸è§£æžçš„ï¼Œæˆ‘ä»¬éœ€è¦å†å®šä¸€ä¸ªç±» 12345public class PageList&lt;T&gt;&#123; private int totalPage; private List&lt;T&gt; list; //çœç•¥get/setæ–¹æ³•&#125; æ­¤æ—¶å°±å¯ä»¥è¿™æ ·è§£æžæ•°æ® 123456789//ç¬¬ä¸€æ­¥ï¼Œç›´æŽ¥åˆ›å»ºResponse&lt;PageList&lt;T&gt;&gt;å¯¹è±¡å¯¹åº”çš„Typeç±»åž‹Type responsePageListAType = ParameterizedTypeImpl.get(Response.class, PageList.class, A.class);Type responsePageListBType = ParameterizedTypeImpl.get(Response.class, PageList.class, B.class)Type responsePageListCType = ParameterizedTypeImpl.get(Response.class, PageList.class, C.class)//ç¬¬äºŒæ­¥ï¼Œé€šè¿‡Typeå¯¹è±¡ï¼ŒèŽ·å–å¯¹åº”çš„Response&lt;PageList&lt;T&gt;&gt;å¯¹è±¡Response&lt;PageList&lt;A&gt;&gt; responsePageListA = fromJson(result, responsePageListAType);Response&lt;PageList&lt;B&gt;&gt; responsePageListB = fromJson(result, responsePageListBType);Response&lt;PageList&lt;C&gt;&gt; responsePageListC = fromJson(result, responsePageListCType); æ³¨ï¼šParameterizedTypeImpl get(Type... types)ä»…ä»…é€‚ç”¨äºŽå•ä¸ªæ³›åž‹å‚æ•°çš„æ—¶å€™ï¼Œå¦‚Mapç­‰ï¼Œæœ‰ä¸¤ä¸ªæ³›åž‹å‚æ•°ä»¥ä¸Šçš„ä¸è¦ç”¨æ­¤æ–¹æ³•èŽ·å–Typeç±»åž‹ã€‚å¦‚æžœéœ€è¦èŽ·å–Mapç­‰ä¸¤ä¸ªæ³›åž‹å‚æ•°ä»¥ä¸Šçš„Typeç±»åž‹ã€‚å¯è°ƒç”¨getParameterized(@NonNull Type rawType, @NonNull Type... actualTypeArguments)æž„é€ æ–¹æ³•èŽ·å–ï¼Œå¦‚ï¼š 12345//èŽ·å– Map&lt;String,String&gt; å¯¹åº”çš„Typeç±»åž‹Type mapType = ParameterizedTypeImpl.getParameterized(Map.class, String.classs, String.class)//èŽ·å– Map&lt;A,B&gt; å¯¹åº”çš„Typeç±»åž‹Type mapType = ParameterizedTypeImpl.getParameterized(Map.class, A.classs, B.class) åˆ°è¿™ï¼Œæ³›åž‹ç›¸å…³çŸ¥è¯†ç‚¹è®²è§£å®Œæ¯•ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œè¯·ç•™è¨€ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>å¤šçº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ES5 to ESNext è‡ª2015ä»¥æ¥JavaScriptæ–°å¢žçš„æ‰€æœ‰æ–°ç‰¹æ€§]]></title>
    <url>%2Fposts%2Fbf9085e4.html</url>
    <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« çš„å‡ºå‘ç‚¹æ˜¯ä¸ºäº†å¸®åŠ©å‰ç«¯å¼€å‘è€…ä¸²è” ES6å‰åŽçš„ JavaScript çŸ¥è¯†ï¼Œå¹¶ä¸”å¯ä»¥å¿«é€Ÿäº†è§£ JavaScript è¯­è¨€çš„æœ€æ–°è¿›å±•ã€‚ JavaScript åœ¨å½“ä¸‹å¤„äºŽç‰¹æƒåœ°ä½ï¼Œå› ä¸ºå®ƒæ˜¯å”¯ä¸€å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„è¯­è¨€ï¼Œå¹¶ä¸”æ˜¯è¢«é«˜åº¦é›†æˆå’Œä¼˜åŒ–è¿‡çš„ã€‚ JavaScript åœ¨æœªæ¥æœ‰ç€æžå¥½çš„å‘å±•ç©ºé—´ï¼Œè·Ÿä¸Šå®ƒçš„å˜åŒ–ä¸ä¼šæ¯”çŽ°åœ¨æ›´åŠ çš„å›°éš¾ã€‚æˆ‘çš„ç›®æ ‡æ˜¯è®©ä½ èƒ½å¤Ÿå¿«é€Ÿä¸”å…¨é¢çš„äº†è§£è¿™é—¨è¯­è¨€å¯ä»¥ä½¿ç”¨çš„æ–°å†…å®¹ã€‚ ç›®å½•ECMAScript ç®€ä»‹ES2015 let å’Œ const ç®­å¤´å‡½æ•° ç±» é»˜è®¤å‚æ•° æ¨¡æ¿å­—ç¬¦ä¸² è§£æž„èµ‹å€¼ å¢žå¼ºçš„å¯¹è±¡å­—é¢é‡ For-of å¾ªçŽ¯ Promises æ¨¡å— String æ–°æ–¹æ³• Object æ–°æ–¹æ³• å±•å¼€è¿ç®—ç¬¦ Set Map Generators ES2016 Array.prototype.includes() æ±‚å¹‚è¿ç®—ç¬¦ ES2017 å­—ç¬¦ä¸²å¡«å…… Object.values() Object.entries() Object.getOwnPropertyDescriptors() å°¾é€—å· å…±äº«å†…å­˜ and åŽŸå­æ“ä½œ ES2018 Rest/Spread Properties Asynchronous iteration Promise.prototype.finally() æ­£åˆ™è¡¨è¾¾å¼æ”¹è¿› ESNext Array.prototype.{flat,flatMap} try/catch å¯é€‰çš„å‚æ•°ç»‘å®š Object.fromEntries() String.prototype.{trimStart,trimEnd} Symbol.prototype.description JSON improvements Well-formed JSON.stringify() Function.prototype.toString() ECMAScript ç®€ä»‹æ¯å½“é˜…è¯» JavaScript ç›¸å…³çš„æ–‡ç« æ—¶ï¼Œæˆ‘éƒ½ä¼šç»å¸¸é‡åˆ°å¦‚ä¸‹æœ¯è¯­ï¼š ES3, ES5, ES6, ES7, ES8, ES2015, ES2016, ES2017, ECMAScript 2017, ECMAScript 2016, ECMAScript 2015 ç­‰ç­‰ï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯æŒ‡ä»£çš„æ˜¯ä»€ä¹ˆï¼Ÿ å®ƒä»¬éƒ½æ˜¯æŒ‡ä»£ä¸€ä¸ªåä¸º ECMAScript çš„æ ‡å‡†ã€‚ JavaScript å°±æ˜¯åŸºäºŽè¿™ä¸ªæ ‡å‡†å®žçŽ°çš„ï¼ŒECMAScript ç»å¸¸ç¼©å†™ä¸º ESã€‚ é™¤äº† JavaScript ä»¥å¤–ï¼Œå…¶å®ƒåŸºäºŽ ECMAScript å®žçŽ°è¯­è¨€åŒ…æ‹¬ï¼š ActionScript ( Flash è„šæœ¬è¯­è¨€)ï¼Œç”±äºŽ Adobe å°†äºŽ 2020 å¹´æœ«åœæ­¢å¯¹ Flash çš„æ”¯æŒè€Œé€æ¸å¤±åŽ»çƒ­åº¦ã€‚ JScript (å¾®è½¯å¼€å‘çš„è„šæœ¬è¯­è¨€),åœ¨ç¬¬ä¸€æ¬¡æµè§ˆå™¨å¤§æˆ˜æœ€æ¿€çƒˆçš„æ—¶æœŸï¼ŒJavaScript åªè¢«Netscapeæ‰€æ”¯æŒï¼Œå¾®è½¯å¿…é¡»ä¸º Internet Explorer æž„å»ºè‡ªå·±çš„è„šæœ¬è¯­è¨€ã€‚ ä½†æ˜¯çŽ°åœ¨æµä¼ æœ€å¹¿ã€å½±å“æœ€å¤§çš„åŸºäºŽ ES æ ‡å‡†çš„è¯­è¨€å®žçŽ°æ— ç–‘å°±æ˜¯ JavaScriptäº† ä¸ºå•¥è¦ç”¨è¿™ä¸ªå¥‡æ€ªçš„åå­—å‘¢ï¼ŸEcma International æ˜¯ç‘žå£«æ ‡å‡†åä¼šï¼Œè´Ÿè´£åˆ¶å®šå›½é™…æ ‡å‡†ã€‚ JavaScript è¢«åˆ›å»ºä»¥åŽï¼Œç»ç”± Netscape å’Œ Sun Microsystems å…¬å¸æäº¤ç»™æ¬§æ´²è®¡ç®—æœºåˆ¶é€ å•†åä¼šè¿›è¡Œæ ‡å‡†åŒ–ï¼Œè¢«é‡‡çº³çš„ ECMA-262 åˆ«åå« ECMAScriptã€‚ This press release by Netscape and Sun Microsystems (the maker of Java) might help figure out the name choice, which might include legal and branding issues by Microsoft which was in the committee, according to Wikipedia. IE9 ä¹‹åŽå¾®è½¯çš„æµè§ˆå™¨ä¸­å°±çœ‹ä¸åˆ°å¯¹ JScript è¿™ä¸ªå‘½åçš„å¼•ç”¨äº†ï¼Œå–è€Œä»£ä¹‹éƒ½ç»Ÿç§°ä¸º JavaScriptã€‚ å› æ­¤ï¼Œæˆªè‡³201xï¼ŒJavaScript æˆä¸ºæœ€æµè¡Œçš„åŸºäºŽ ECMAScript è§„èŒƒå®žçŽ°çš„è¯­è¨€ã€‚ ECMAScript å½“å‰çš„ç‰ˆæœ¬ã€‚ç›®å‰çš„æœ€æ–°çš„ ECMAScript ç‰ˆæœ¬æ˜¯ ES2018ã€‚ äºŽ 2018 å¹´ 6 æœˆå‘å¸ƒã€‚ TC39 æ˜¯ä»€ä¹ˆï¼ŸTC39ï¼ˆTechnical Committee 39ï¼‰æ˜¯ä¸€ä¸ªæŽ¨åŠ¨ JavaScript å‘å±•çš„å§”å‘˜ä¼šã€‚ TC39çš„æˆå‘˜åŒ…æ‹¬å„ä¸ªä¸»æµæµè§ˆå™¨åŽ‚å•†ä»¥åŠä¸šåŠ¡ä¸Žæµè§ˆå™¨ç´§å¯†ç›¸è¿žçš„å…¬å¸ï¼Œå…¶ä¸­åŒ…æ‹¬ Mozillaï¼ŒGoogle ï¼ŒFacebookï¼ŒAppleï¼ŒMicrosoftï¼ŒIntelï¼ŒPayPalï¼ŒSalesForceç­‰ã€‚ æ¯ä¸ªæ ‡å‡†ç‰ˆæœ¬ææ¡ˆéƒ½å¿…é¡»ç»è¿‡å››ä¸ªä¸åŒçš„é˜¶æ®µï¼Œè¿™é‡Œæœ‰è¯¦ç»†çš„è§£é‡Šã€‚ ES Versionsä»¤æˆ‘è´¹è§£çš„æ˜¯ ES ç‰ˆæœ¬çš„å‘½åä¾æ®æœ‰æ—¶æ ¹æ®è¿­ä»£çš„ç‰ˆæœ¬å·ï¼Œæœ‰æ—¶å´æ ¹æ®å¹´ä»½æ¥è¿›è¡Œå‘½åã€‚è€Œè¿™ä¸ªå‘½åçš„ä¸ç¡®å®šæ€§åˆä½¿å¾—äººä»¬æ›´åŠ å®¹æ˜“æ··æ·† JS/ES è¿™ä¸ªä¸¤ä¸ªæ¦‚å¿µðŸ˜„ã€‚ åœ¨ ES2015 ä¹‹å‰ï¼ŒECMAScript å„ä¸ªç‰ˆæœ¬çš„å‘½åè§„èŒƒé€šå¸¸ä¸Žè·Ÿç€æ ‡å‡†çš„ç‰ˆæœ¬æ›´æ–°ä¿æŒä¸€è‡´ã€‚å› æ­¤ï¼Œ2009å¹´ ECMAScript è§„èŒƒæ›´æ–°ä»¥åŽçš„çš„æ­£å¼ç‰ˆæœ¬æ˜¯ ES5ã€‚ Why does this happen? During the process that led to ES2015, the name was changed from ES6 to ES2015, but since this was done late, people still referenced it as ES6, and the community has not left the edition naming behind â€” the world is still calling ES releases by edition number. ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ä¸€åˆ‡ï¼Ÿåœ¨ES2015è¯žç”Ÿçš„è¿‡ç¨‹ä¸­ï¼Œåç§°ç”±ES6æ›´æ”¹ä¸ºES2015ï¼Œä½†ç”±äºŽæœ€ç»ˆå®Œæˆå¤ªæ™šï¼Œäººä»¬ä»ç„¶ç§°å…¶ä¸ºES6ï¼Œç¤¾åŒºä¹Ÿæ²¡æœ‰å°†ç‰ˆæœ¬å·å®Œå…¨æŠ›ä¹‹äºŽåŽ â€” ä¸–ç•Œä»ç„¶ä½¿ç”¨ ES æ¥å®šä¹‰ç‰ˆæœ¬å·ã€‚ æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥æ·±å…¥äº†è§£ JavaScript è‡ª ES5 ä»¥æ¥å¢žåŠ çš„ç‰¹æ€§ã€‚ letå’ŒconstES2015 ä¹‹å‰, var æ˜¯å”¯ä¸€å¯ä»¥ç”¨æ¥å£°æ˜Žå˜é‡çš„è¯­å¥ã€‚ 1var a = 0 ä¸Šé¢è¯­å¥å¦‚æžœä½ é—æ¼äº† varï¼Œé‚£ä¹ˆä½ ä¼šæŠŠè¿™ä¸ªå€¼ï¼ˆ0ï¼‰èµ‹ç»™ä¸€ä¸ªæœªå£°æ˜Žçš„å˜é‡ï¼Œå…¶ä¸­å£°æ˜Žå’Œæœªå£°æ˜Žå˜é‡ä¹‹é—´å­˜åœ¨ä¸€äº›å·®å¼‚ã€‚ åœ¨çŽ°ä»£æµè§ˆå™¨å¼€å¯ä¸¥æ ¼æ¨¡å¼æ—¶ï¼Œç»™æœªå£°æ˜Žçš„å˜é‡èµ‹å€¼ä¼šæŠ›å‡º ReferenceError å¼‚å¸¸ï¼Œåœ¨è¾ƒè€çš„æµè§ˆå™¨ï¼ˆæˆ–è€…ç¦ç”¨ä¸¥æ ¼æ¨¡å¼ï¼‰çš„æƒ…å†µä¸‹ï¼Œæœªå£°æ˜Žçš„å˜é‡åœ¨æ‰§è¡Œèµ‹å€¼æ“ä½œæ—¶ä¼šéšå¼çš„å˜ä¸ºå…¨å±€å¯¹è±¡çš„å±žæ€§ã€‚ å½“ä½ å£°æ˜Žä¸€ä¸ªå˜é‡å´æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œé‚£ä¹ˆå®ƒçš„å€¼ç›´åˆ°ä½ å¯¹å®ƒè¿›è¡Œèµ‹å€¼æ“ä½œä¹‹å‰éƒ½æ˜¯ undefined ã€‚ 1var a //typeof a === 'undefined' ä½ å¯ä»¥å¯¹ä¸€ä¸ªå˜é‡è¿›è¡Œå¤šæ¬¡é‡æ–°å£°æ˜Žï¼Œå¹¶è¦†ç›–å®ƒï¼š 12var a = 1var a = 2 ä½ ä¹Ÿå¯ä»¥åœ¨ä¸€æ¡å£°æ˜Žè¯­å¥ä¸­ä¸€æ¬¡å£°æ˜Žå¤šä¸ªå˜é‡ï¼š 1var a = 1, b = 2 ä½œç”¨åŸŸæ˜¯å˜é‡å¯è®¿é—®çš„ä»£ç éƒ¨åˆ†ã€‚ åœ¨å‡½æ•°ä¹‹å¤–ç”¨ var å£°æ˜Žçš„ä¼šåˆ†é…ç»™å…¨å±€å¯¹è±¡ï¼Œè¿™ç§å˜é‡å¯ä»¥åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¢«è®¿é—®åˆ°ã€‚è€Œåœ¨å‡½æ•°å†…éƒ¨å£°æ˜Žçš„å˜é‡åªèƒ½åœ¨å‡½æ•°å±€éƒ¨ä½œç”¨åŸŸè¢«è®¿é—®åˆ°ï¼Œè¿™ç±»ä¼¼äºŽå‡½æ•°å‚æ•°ã€‚ åœ¨å‡½æ•°ä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡åå¦‚ä½•è·Ÿå…¨å±€å˜é‡é‡åï¼Œé‚£ä¹ˆå±€éƒ¨å˜é‡çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œåœ¨å‡½æ•°å†…æ— æ³•è®¿é—®åˆ°åŒåçš„å…¨å±€å˜é‡ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œvar æ˜¯æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼ˆæ ‡è¯†ç¬¦æ˜¯ä¸€å¯¹èŠ±æ‹¬å·ï¼‰çš„ï¼Œä½†æ˜¯ var æ˜¯æœ‰å‡½æ•°ä½œç”¨åŸŸçš„ï¼Œæ‰€ä»¥åœ¨æ–°åˆ›å»ºçš„å—çº§ä½œç”¨åŸŸæˆ–è€…æ˜¯å‡½æ•°ä½œç”¨åŸŸé‡Œé¢å£°æ˜Žå˜é‡ä¼šè¦†ç›–å…¨å±€åŒåå˜é‡ï¼Œå› ä¸º var åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹æ²¡æœ‰åˆ›å»ºæ–°çš„ä½œç”¨åŸŸã€‚ åœ¨å‡½æ•°å†…éƒ¨ï¼Œå…¶ä¸­å®šä¹‰çš„ä»»ä½•å˜é‡åœ¨æ‰€æœ‰å‡½æ•°ä»£ç ä¸­éƒ½æ˜¯å¯è§çš„ï¼Œå› ä¸ºJavaScriptåœ¨æ‰§è¡Œä»£ç ä¹‹å‰å®žé™…ä¸Šå°†æ‰€æœ‰å˜é‡éƒ½ç§»åˆ°äº†é¡¶å±‚ï¼ˆè¢«ç§°ä¸ºæ‚¬æŒ‚çš„ä¸œè¥¿ï¼‰ã€‚ åœ¨å‡½æ•°çš„å†…éƒ¨å®šä¹‰çš„å˜é‡åœ¨æ•´ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­éƒ½æ˜¯å¯è§ï¼ˆå¯è®¿é—®ï¼‰ï¼Œå³ä½¿å˜é‡æ˜¯åœ¨å‡½æ•°ä½“æœ«å°¾è¢«å£°æ˜Žï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥å†å‡½æ•°ä½“å¼€å¤´éƒ¨åˆ†è¢«å¼•ç”¨ï¼Œå› ä¸º JavaScriptå­˜åœ¨å˜é‡æå‡æœºåˆ¶ã€‚ä¸ºé¿å…æ··æ·†ï¼Œè¯·åœ¨å‡½æ•°å¼€å¤´å£°æ˜Žå˜é‡ï¼Œå…»æˆè‰¯å¥½çš„ç¼–ç è§„èŒƒã€‚ Using letlet æ˜¯ES2015ä¸­å¼•å…¥çš„æ–°åŠŸèƒ½ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯å…·æœ‰å—çº§ä½œç”¨åŸŸçš„ var ã€‚å®ƒå¯ä»¥è¢«å½“å‰ä½œç”¨åŸŸï¼ˆå‡½æ•°ä»¥åŠå—çº§ä½œç”¨åŸŸï¼‰ä»¥åŠå­çº§ä½œç”¨åŸŸè®¿é—®åˆ°ã€‚ çŽ°ä»£ JavaScript å¼€å‘è€…åœ¨ let å’Œ var çš„é€‰æ‹©ä¸­å¯èƒ½ä¼šæ›´å€¾å‘äºŽå‰è€…ã€‚ å¦‚æžœ let çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå¾ˆæŠ½è±¡çš„æœ¯è¯­ï¼Œå½“ä½ é˜…è¯»åˆ° let color = â€˜redâ€™ è¿™ä¸€æ®µï¼Œå› ä¸ºä½¿ç”¨ let å®šä¹‰äº†color ä¸ºçº¢è‰²ï¼Œé‚£ä¹ˆè¿™ä¸€åˆ‡å°±å˜çš„æœ‰æ„ä¹‰äº†ã€‚ åœ¨ä»»ä½•å‡½æ•°ä¹‹å¤–ç”¨ let å£°æ˜Žå˜é‡ï¼Œå’Œ varç›¸åçš„æ˜¯ å®ƒå¹¶ä¸ä¼šåˆ›å»ºå…¨å±€å˜é‡ã€‚ Using constä½¿ç”¨å˜é‡ var æˆ– let å£°æ˜Žçš„å˜é‡å¯ä»¥è¢«é‡æ–°èµ‹å€¼ã€‚ ä½¿ç”¨ const å£°æ˜Žçš„å˜é‡ä¸€ç»åˆå§‹åŒ–ï¼Œå®ƒçš„å€¼å°±æ°¸è¿œä¸èƒ½å†æ”¹å˜ï¼Œå³ä¸å¯é‡æ–°è¢«èµ‹å€¼ã€‚ 1const a = 'test' æˆ‘ä»¬ä¸èƒ½å†ä¸º a è¿›è¡Œèµ‹å€¼æ“ä½œã€‚ç„¶è€Œï¼Œa å¦‚æžœå®ƒæ˜¯ä¸€ä¸ªå…·æœ‰å±žæ€§æˆ–è€…æ–¹æ³•çš„å¯¹è±¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ”¹å˜å®ƒçš„å±žæ€§æˆ–è€…æ–¹æ³•ã€‚ const å¹¶ä¸æ„å‘³ç€å…·æœ‰ä¸å¯å˜æ€§ï¼Œåªæ˜¯ä¿è¯ç”¨ const å£°æ˜Žçš„å˜é‡çš„å¼•ç”¨åœ°å€ä¸è¢«å˜æ›´ã€‚ ç±»ä¼¼äºŽ letï¼Œconst ä¹Ÿå…·æœ‰å—çº§ä½œç”¨åŸŸã€‚ çŽ°ä»£ JavaScript å¼€å‘è€…åœ¨é‡åˆ°ä¸ä¼šè¿›è¡ŒäºŒæ¬¡èµ‹å€¼çš„å˜é‡å£°æ˜Žæ—¶ï¼Œåº”è¯¥å°½é‡ä½¿ç”¨ constã€‚ ç®­å¤´å‡½æ•°ç®­å¤´å‡½æ•°çš„å¼•å…¥æžå¤§çš„æ”¹å˜äº†ä»£ç çš„ä¹¦å†™é£Žæ ¼å’Œä¸€äº›å·¥ä½œæœºåˆ¶ã€‚ åœ¨æˆ‘çœ‹æ¥ï¼Œç®­å¤´å‡½æ•°å¾ˆå—å¼€å‘è€…æ¬¢è¿Žï¼ŒçŽ°åœ¨å¾ˆå°‘åœ¨æ¯”è¾ƒæ–°çš„ä»£ç åº“ä¸­çœ‹åˆ° function å…³é”®å­—äº†ï¼Œè™½ç„¶å®ƒå¹¶æœªè¢«åºŸå¼ƒã€‚ ç®­å¤´å‡½æ•°çœ‹èµ·æ¥ä¼šæ›´åŠ çš„ç®€æ´ï¼Œå› ä¸ºå®ƒå…è®¸ä½ ä½¿ç”¨æ›´çŸ­çš„è¯­æ³•æ¥ä¹¦å†™å‡½æ•°ï¼š 123const myFunction = function() &#123; //...&#125; åˆ° 123const myFunction = () =&gt; &#123; //...&#125; å¦‚æžœå‡½æ•°ä½“ä¸­åªåŒ…å«ä¸€æ¡è¯­å¥ï¼Œä½ ç”šè‡³å¯ä»¥çœç•¥å¤§æ‹¬å·å¹¶ç›´æŽ¥ä¹¦å†™è¿™æ¡è¯­å¥ï¼š 1const myFunction = () =&gt; doSomething() å‚æ•°åœ¨æ‹¬å·ä¸­ä¼ é€’ï¼š 1const myFunction = (param1, param2) =&gt; doSomething(param1, param2) å¦‚æžœè¯¥å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥æŽ‰æ‹¬å·ï¼š 1const myFunction = param =&gt; doSomething(param) ç”±äºŽè¿™ç§ç®€çŸ­çš„è¯­æ³•ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´ä¾¿æ·çš„ä½¿ç”¨æ¯”è¾ƒç®€çŸ­çš„å‡½æ•° éšå¼è¿”å›žç®­å¤´å‡½æ•°æ”¯æŒéšå¼è¿”å›žï¼šå¯ä»¥æ­£å¸¸çš„ return ä¸€ä¸ªè¿”å›žå€¼ä½†æ˜¯å¯ä»¥ä¸ä½¿ç”¨ return å…³é”®å­—ã€‚ éšå¼è¿”å›žåªåœ¨å‡½æ•°ä½“å†…åªåŒ…å«ä¸€æ¡è¯­å¥çš„æƒ…å†µä¸‹ç”Ÿæ•ˆï¼š 12const myFunction = () =&gt; 'test'myFunction() //'test' éœ€è¦æ³¨æ„çš„ä¸€ç§æƒ…å†µï¼Œå½“è¿”å›žä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè®°å¾—å°†å¤§æ‹¬å·æ‹¬åœ¨æ‹¬å·ä¸­ä»¥é¿å…äº§ç”Ÿæ­§ä¹‰ï¼Œè¯¯å°†å…¶ï¼ˆå¤§æ‹¬å·ï¼‰è§£æžä¸ºå‡½æ•°ä½“çš„å¤§æ‹¬å·ã€‚ 12const myFunction = () =&gt; (&#123; value:'test' &#125;)myFunction() //&#123;value: 'test'&#125; ç®­å¤´å‡½æ•°ä¸­çš„ thisthis å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆéš¾æŽŒæ¡çš„æ¦‚å¿µï¼Œå› ä¸ºå®ƒä¼šæ ¹æ®ä¸Šä¸‹æ–‡è€Œè¿›è¡Œå˜åŒ–ï¼Œå¹¶ä¸”ä¼šåœ¨ä¸åŒçš„ JavaScriptçš„æ¨¡å¼ï¼ˆæ˜¯å¦ä¸ºä¸¥æ ¼æ¨¡å¼ï¼‰ä¸‹è¡¨çŽ°å‡ºå·®å¼‚ã€‚ ç†è§£ this è¿™ä¸ªæ¦‚å¿µå¯¹äºŽç®­å¤´å‡½æ•°çš„ä½¿ç”¨å¾ˆé‡è¦ï¼Œå› ä¸ºä¸Žå¸¸è§„å‡½æ•°ç›¸æ¯”ï¼Œç®­å¤´å‡½æ•°çš„è¡¨çŽ°éžå¸¸ä¸åŒã€‚ å¯¹è±¡çš„æ–¹æ³•ä¸ºå¸¸è§„å‡½æ•°æ—¶ï¼Œæ–¹æ³•ä¸­çš„thisæŒ‡å‘è¿™ä¸ªå¯¹è±¡ï¼Œå› æ­¤å¯ä»¥è¿™æ ·åšï¼š 1234567const car = &#123; model:'Fiesta', manufacturer:'Ford', fullName:function() &#123; return `$&#123;this.manufacturer&#125; $&#123;this.model&#125;` &#125;&#125; æ‰§è¡Œ car.fullName() ä¼šè¿”å›ž â€œFord Fiestaâ€ã€‚ å¦‚æžœä¸Šè¿°æ–¹æ³•ä½¿ç”¨æ˜¯æ˜¯ç®­å¤´å‡½æ•°ï¼Œç”±äºŽç®­å¤´ä¸­çš„ this çš„ä½œç”¨åŸŸç»§æ‰¿è‡ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œç®­å¤´å‡½æ•°è‡ªèº«ä¸ç»‘å®š thisï¼Œå› æ­¤ this çš„å€¼å°†åœ¨è°ƒç”¨å †æ ˆä¸­æŸ¥æ‰¾ï¼Œå› æ­¤åœ¨æ­¤ä»£ç  car.fullName() ä¸­ä¸ä¼šè¿”å›žå¸¸è§„å‡½æ•°é‚£æ ·çš„ç»“æžœï¼Œå®žé™…ä¼šè¿”å›žå­—ç¬¦ä¸² â€œundefined undefinedâ€ï¼š 1234567const car = &#123; model:'Fiesta', manufacturer:'Ford', fullName:() =&gt; &#123; return `$&#123;this.manufacturer&#125; $&#123;this.model&#125;` &#125;&#125; å› æ­¤ï¼Œç®­å¤´å‡½æ•°ä¸é€‚åˆä½œä¸ºå¯¹è±¡æ–¹æ³•ã€‚ åŒæ ·ï¼Œç®­å¤´å‡½æ•°ä¹Ÿä¸é€‚åˆä½¿ç”¨åœ¨ä½œä¸ºåˆ›å»ºæž„é€ å‡½æ•°ï¼Œå› ä¸ºåœ¨å®žä¾‹åŒ–å¯¹è±¡æ—¶ä¼šæŠ›å‡º TypeErrorã€‚ æ‰€ä»¥åœ¨ä¸éœ€è¦åŠ¨æ€ä¸Šä¸‹æ–‡æ—¶è¯·ä½¿ç”¨å¸¸è§„å‡½æ•°ã€‚ å½“ç„¶ï¼Œåœ¨äº‹ä»¶ç›‘å¬å™¨ä¸Šä½¿ç”¨ç®­å¤´å‡½æ•°ä¹Ÿä¼šå­˜åœ¨é—®é¢˜ã€‚å› ä¸º DOM äº‹ä»¶ä¾¦å¬å™¨ä¼šè‡ªåŠ¨å°† this ä¸Žç›®æ ‡å…ƒç´ ç»‘å®šï¼Œå¦‚æžœè¯¥äº‹ä»¶å¤„ç†ç¨‹åºçš„é€»è¾‘ä¾èµ– thisï¼Œé‚£ä¹ˆéœ€è¦å¸¸è§„å‡½æ•°ï¼š 12345678const link = document.querySelector('#link')link.addEventListener('click', () =&gt; &#123; // this === window&#125;)const link = document.querySelector('#link')link.addEventListener('click', function() &#123; // this === link&#125;) Classesç±»JavaScript å®žçŽ°ç»§æ‰¿çš„æ–¹å¼æ¯”è¾ƒç½•è§ï¼šåŽŸåž‹ç»§æ‰¿ã€‚åŽŸåž‹ç»§æ‰¿è™½ç„¶åœ¨æˆ‘çœ‹æ¥å¾ˆæ£’ï¼Œä½†ä¸Žå…¶å®ƒå¤§å¤šæ•°æµè¡Œçš„ç¼–ç¨‹è¯­è¨€çš„ç»§æ‰¿å®žçŽ°æœºåˆ¶ä¸åŒï¼ŒåŽè€…æ˜¯åŸºäºŽç±»çš„ã€‚ å› æ­¤ Javaã€Python æˆ–å…¶å®ƒè¯­è¨€çš„å¼€å‘è€…å¾ˆéš¾ç†è§£åŽŸåž‹ç»§æ‰¿çš„æ–¹å¼ï¼Œå› æ­¤ ECMAScript å§”å‘˜ä¼šå†³å®šåœ¨åŽŸåž‹ç»§æ‰¿ä¹‹ä¸Šå®žçŽ° class çš„è¯­æ³•ç³–ï¼Œè¿™æ ·ä¾¿äºŽè®©å…¶å®ƒåŸºäºŽç±»å®žçŽ°ç»§æ‰¿çš„è¯­è¨€çš„å¼€å‘è€…æ›´å¥½çš„ç†è§£ JavaScript ä»£ç ã€‚ æ³¨æ„ï¼šclass å¹¶æ²¡æœ‰å¯¹ JavaScript åº•å±‚åšä¿®æ”¹ï¼Œä½ ä»ç„¶å¯ä»¥ç›´æŽ¥è®¿é—®å¯¹è±¡åŽŸåž‹ã€‚ class å®šä¹‰å¦‚ä¸‹æ˜¯ä¸€ä¸ª class çš„ä¾‹å­ï¼š 12345678class Person &#123; constructor(name) &#123; this.name = name &#125; hello() &#123; return 'Hello, I am ' + this.name + '.' &#125;&#125; class å…·æœ‰ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ new ClassIdentifier() æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®žä¾‹ã€‚ åˆå§‹åŒ–å¯¹è±¡æ—¶ï¼Œè°ƒç”¨ constructoræ–¹æ³•ï¼Œå¹¶å°†å‚æ•°ä¼ é€’ç»™æ­¤æ–¹æ³•ã€‚ ç±»å£°æ˜Žè¯­å¥ä¸­ä¹Ÿå¯ä»¥å¢žåŠ ç±»éœ€è¦çš„ä¸€äº›åŽŸåž‹æ–¹æ³•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ hello æ˜¯ Person ç±»çš„ä¸€ä¸ªåŽŸåž‹æ–¹æ³•ï¼Œå¯ä»¥åœ¨è¿™ä¸ªç±»çš„å¯¹è±¡å®žä¾‹ä¸Šè°ƒç”¨ï¼š 12const flavio = new Person('Flavio')flavio.hello() Class ç»§æ‰¿ä¸€ä¸ªå­ç±»å¯ä»¥ extend å¦ä¸€ä¸ªç±»ï¼Œé€šè¿‡å­ç±»å®žä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡å¯ä»¥ç»§æ‰¿è¿™ä¸¤ä¸ªç±»çš„æ‰€æœ‰æ–¹æ³•ã€‚ å¦‚æžœå­ç±»ä¸­çš„æ–¹æ³•ä¸Žçˆ¶ç±»ä¸­çš„æ–¹æ³•åé‡å¤ï¼Œé‚£ä¹ˆå­ç±»ä¸­çš„åŒåæ–¹æ³•ä¼˜å…ˆçº§æ›´é«˜ï¼š 1234567class Programmer extends Person &#123; hello() &#123; return super.hello() + ' I am a programmer.' &#125;&#125;const flavio = new Programmer('Flavio')flavio.hello() (ä¸Šè¿°ä»£ç ä¼šæ‰“å°å‡ºï¼šâ€œHello, I am Flavio. I am a programmer.â€) ç±»æ²¡æœ‰æ˜¾ç¤ºçš„ç±»å˜é‡å£°æ˜Žï¼Œä½†ä½ å¿…é¡»åœ¨åˆå§‹åŒ–æž„é€ å‡½æ•° constructor ä¸­åŽ»åˆå§‹åŒ–ç±»æˆå‘˜å˜é‡ã€‚ åœ¨å­ç±»ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡è°ƒç”¨super()å¼•ç”¨çˆ¶ç±»ã€‚ é™æ€æ–¹æ³•åœ¨ç±»ä¸­ï¼Œé€šå¸¸ä¼šæŠŠæ–¹æ³•ç›´æŽ¥æŒ‚è½½åˆ°å®žä¾‹å¯¹è±¡ä¸Šï¼Œç›´æŽ¥åœ¨å®žä¾‹å¯¹è±¡ä¸Šè°ƒç”¨ã€‚ è€Œé™æ€æ–¹æ³•åˆ™æ˜¯ç›´æŽ¥ä½¿ç”¨ç±»åæ¥è°ƒç”¨ï¼Œè€Œä¸æ˜¯é€šè¿‡å¯¹è±¡å®žä¾‹è°ƒç”¨ï¼š 123456class Person &#123; static genericHello() &#123; return 'Hello' &#125;&#125;Person.genericHello() //Hello ç§æœ‰æ–¹æ³•JavaScript æ²¡æœ‰å†…ç½®çœŸæ­£æ„ä¹‰ä¸Šçš„å—ä¿æŠ¤çš„ç§æœ‰æ–¹æ³•ã€‚ ç¤¾åŒºæœ‰è§£å†³æ–¹æ³•ï¼Œä½†æˆ‘ä¸ä¼šåœ¨è¿™é‡Œåšè®²è§£ã€‚ Getters å’Œ settersä½ å¯ä»¥é€šè¿‡å¢žåŠ æ–¹æ³• å‰ç¼€ get æˆ–è€… set åˆ›å»ºä¸€ä¸ª getter å’Œ setterï¼Œgetter å’Œ setterä¼šåœ¨ä½ åŽ»èŽ·å–ç‰¹å®šå€¼æˆ–è€…ä¿®æ”¹ç‰¹å®šå€¼çš„æ—¶å€™æ‰§è¡Œ get æˆ–è€… setå†…çš„ç›¸å…³æ–¹æ³•ã€‚ 1234567891011class Person &#123; constructor(name) &#123; this._name = name &#125; set name(value) &#123; this._name = value &#125; get name() &#123; return this._name &#125;&#125; å¦‚æžœä½ åªæœ‰ getterï¼Œè¯¥å±žæ€§æ— æ³•è¢«è®¾ç½®ï¼Œå¹¶ä¸”è®¾ç½®æ­¤å±žæ€§çš„æ“ä½œéƒ½ä¼šè¢«å¿½ç•¥ï¼š 12345678class Person &#123; constructor(name) &#123; this._name = name &#125; get name() &#123; return this._name &#125;&#125; å¦‚æžœä½ åªæœ‰ä¸€ä¸ª setterï¼Œåˆ™å¯ä»¥æ›´æ”¹è¯¥å€¼ï¼Œä½†ä¸èƒ½ä»Žå¤–éƒ¨è®¿é—®å®ƒï¼š 12345678class Person &#123; constructor(name) &#123; this._name = name &#125; set name(value) &#123; this._name = value &#125;&#125; é»˜è®¤å‚æ•°å‡½æ•° doSomething æŽ¥æ”¶ä¸€ä¸ª param1 å‚æ•°ã€‚ 12const doSomething = (param1) =&gt; &#123;&#125; æˆ‘ä»¬å¯ä»¥ç»™ param1 è®¾å®šé»˜è®¤å€¼ï¼Œå¦‚æžœåœ¨è°ƒç”¨å‡½æ•°æ—¶æœªä¼ å…¥å‚æ•°ï¼Œé‚£ä¹ˆè¯¥å‚æ•°è‡ªåŠ¨è®¾å®šæœªé»˜è®¤å€¼ã€‚ 12const doSomething = (param1 = 'test') =&gt; &#123;&#125; å½“ç„¶ï¼Œè¿™ç§æœºåˆ¶åŒæ ·é€‚ç”¨äºŽå¤šä¸ªå‚æ•°ï¼š 12const doSomething = (param1 = 'test', param2 = 'test2') =&gt; &#123;&#125; å‡å¦‚ä½ çš„å‡½æ•°æ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹å®šå±žæ€§çš„å¯¹è±¡è¯¥æ€Žä¹ˆå¤„ç†ï¼Ÿ æ›¾å‡ ä½•æ—¶ï¼Œå¦‚æžœæˆ‘ä»¬å¿…é¡»è¦å–ä¸€ä¸ªå¯¹è±¡çš„ç‰¹å®šå±žæ€§å€¼ï¼Œä¸ºäº†åšå…¼å®¹å¤„ç†ï¼ˆå¯¹è±¡æ ¼å¼ä¸æ­£ç¡®ï¼‰ï¼Œä½ å¿…é¡»åœ¨å‡½æ•°ä¸­æ·»åŠ ä¸€äº›ä»£ç ï¼š 1234567const colorize = (options) =&gt; &#123; if (!options) &#123; options = &#123;&#125; &#125; const color = ('color' in options) ? options.color :'yellow' ...&#125; é€šè¿‡è§£æž„ï¼Œä½ å¯ä»¥ç»™ç‰¹å®šå±žæ€§æä¾›é»˜è®¤å€¼ï¼Œå¦‚æ­¤å¯ä»¥å¤§å¤§ç®€åŒ–ä»£ç ï¼š 123const colorize = (&#123; color = &apos;yellow&apos; &#125;) =&gt; &#123; ...&#125; å¦‚æžœåœ¨è°ƒç”¨ colorize å‡½æ•°æ—¶æ²¡æœ‰ä¼ é€’ä»»ä½•å¯¹è±¡ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥å¾—åˆ°ä¸€ä¸ªé»˜è®¤å¯¹è±¡ä½œä¸ºå‚æ•°ä»¥ä¾›ä½¿ç”¨ï¼š 123const spin = (&#123; color = 'yellow' &#125; = &#123;&#125;) =&gt; &#123; ...&#125; æ¨¡æ¿å­—ç¬¦ä¸²æ¨¡æ¿å­—ç¬¦ä¸²ä¸åŒäºŽ ES5 ä»¥å‰çš„ç‰ˆæœ¬ï¼Œä½ å¯ä»¥ç”¨æ–°é¢–çš„æ–¹å¼ä½¿ç”¨å­—ç¬¦ä¸²ã€‚ è¿™ä¸ªè¯­æ³•çœ‹èµ·æ¥éžå¸¸ç®€ä¾¿ï¼Œåªéœ€è¦ä½¿ç”¨ä¸€ä¸ªåå¼•å·æ›¿æ¢æŽ‰å•å¼•å·æˆ–åŒå¼•å·ï¼š 1const a_string = `something` è¿™ä¸ªç”¨æ³•æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œå› ä¸ºå®ƒæä¾›äº†è®¸å¤šæ™®é€šå­—ç¬¦ä¸²æ‰€æ²¡æœ‰çš„åŠŸèƒ½ï¼Œå¦‚ä¸‹ï¼š å®ƒä¸ºå®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„è¯­æ³• å®ƒæä¾›äº†ä¸€ç§åœ¨å­—ç¬¦ä¸²ä¸­æ’å…¥å˜é‡å’Œè¡¨è¾¾å¼çš„ç®€å•æ–¹æ³• å®ƒå…è®¸æ‚¨åˆ›å»ºå¸¦æœ‰æ¨¡æ¿æ ‡ç­¾çš„DSL (DSLæ„å‘³ç€é¢†åŸŸç‰¹å®šè¯­è¨€ï¼Œä¾‹å¦‚ï¼šå°±å¦‚åŒåœ¨ React ä¸­ä½¿ç”¨ styled-components å®šä¹‰ä½ ç»„ä»¶çš„ CSS ä¸€æ ·) ä¸‹é¢è®©æˆ‘ä»¬æ·±å…¥æ¯ä¸ªåŠŸèƒ½çš„ç»†èŠ‚ã€‚ å¤šè¡Œå­—ç¬¦ä¸²åœ¨ ES6 æ ‡å‡†ä¹‹å‰ï¼Œåˆ›å»ºè·¨è¶Šä¸¤è¡Œçš„å­—ç¬¦ä¸²åªèƒ½åœ¨ä¸€è¡Œçš„ç»“å°¾ä½¿ç”¨ â€˜â€™ å­—ç¬¦ï¼š 123const string = 'first partsecond part' è¿™æ ·ä½¿å¾—ä½ åˆ›å»ºçš„å­—ç¬¦ä¸²è™½ç„¶è·¨è¶Šäº†ä¸¤æ±‰ï¼Œä½†æ˜¯æ¸²æŸ“æ—¶ä»ç„¶è¡¨çŽ°æˆä¸€è¡Œï¼š 1first part second part éœ€è¦æ¸²æŸ“ä¸ºå¤šè¡Œçš„è¯ï¼Œéœ€è¦åœ¨ä¸€è¡Œç»“å°¾æ·»åŠ  â€˜ â€™ï¼Œæ¯”å¦‚è¿™æ ·ï¼š 1234const string = 'first line second line' æˆ–è€… 12const string = 'first line'+ 'second line' æ¨¡æ¿å­—ç¬¦ä¸²ä½¿å¾—å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²å˜å¾—æ›´åŠ ç®€ä¾¿ã€‚ ä¸€ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ç”±ä¸€ä¸ªåå¼•å·å¼€å§‹ï¼Œä½ åªéœ€è¦æŒ‰ä¸‹å›žè½¦é”®æ¥åˆ›å»ºæ–°çš„ä¸€è¡Œï¼Œä¸éœ€è¦æ’å…¥ç‰¹æ®Šç¬¦å·ï¼Œæœ€ç»ˆçš„æ¸²æŸ“æ•ˆæžœå¦‚ä¸‹æ‰€ç¤ºï¼š 1234const string = `Heythisstringis awesome!` éœ€è¦ç‰¹åˆ«ç•™æ„ç©ºæ ¼åœ¨è¿™é‡Œæ˜¯æœ‰ç‰¹æ®Šæ„ä¹‰çš„ï¼Œå¦‚æžœè¿™æ ·åšçš„è¯ï¼š 12const string = `First Second` é‚£ä¹ˆå®ƒä¼šåˆ›å»ºå‡ºåƒä¸‹é¢çš„å­—ç¬¦ä¸²ï¼š 12First Second æœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•å¯ä»¥ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œåªéœ€è¦å°†ç¬¬ä¸€è¡Œç½®ä¸ºç©ºï¼Œç„¶åŽæ·»åŠ äº†å³è¾¹çš„ç¿»è¯‘å¥½åŽè°ƒç”¨ä¸€ä¸ª trim() æ–¹æ³•ï¼Œå°±å¯ä»¥æ¶ˆé™¤ç¬¬ä¸€ä¸ªå­—ç¬¦å‰çš„æ‰€æœ‰ç©ºæ ¼ï¼š 123const string = `FirstSecond`.trim() æ’å€¼æ¨¡æ¿å­—ç¬¦ä¸²æä¾›äº†æ’å…¥å˜é‡å’Œè¡¨è¾¾å¼çš„ä¾¿æ·æ–¹æ³• ä½ åªéœ€è¦ä½¿ç”¨ ${â€¦} è¯­æ³• 12const var = 'test'const string = `something $&#123;var&#125;` //something test åœ¨ ${} é‡Œé¢ä½ å¯ä»¥åŠ å…¥ä»»ä½•ä¸œè¥¿ï¼Œç”šè‡³æ˜¯è¡¨è¾¾å¼ï¼š 12const string = `something $&#123;1 + 2 + 3&#125;`const string2 = `something $&#123;foo() ? 'x' : 'y'&#125;` Template tagsæ ‡è®°æ¨¡æ¿å¯èƒ½æ˜¯ä¸€ä¸ªå¬èµ·æ¥ä¸å¤ªæœ‰ç”¨çš„åŠŸèƒ½ï¼Œä½†å®ƒå®žé™…ä¸Šè¢«è®¸å¤šæµè¡Œçš„åº“ä½¿ç”¨ï¼Œå¦‚ Styled Components ã€Apollo ã€GraphQLå®¢æˆ·ç«¯/æœåŠ¡å™¨åº“ï¼Œå› æ­¤äº†è§£å®ƒçš„å·¥ä½œåŽŸç†è‡³å…³é‡è¦ã€‚ åœ¨ Styled Components æ¨¡æ¿æ ‡ç­¾ä¸­ç”¨äºŽå®šä¹‰CSSå­—ç¬¦ä¸² 1234const Button = styled.button` font-size: 1.5em; background-color: black; color: white; åœ¨ Apollo ä¸­ï¼Œæ¨¡æ¿æ ‡ç­¾ç”¨äºŽå®šä¹‰ GraphQL æŸ¥è¯¢æ¨¡å¼ï¼š 12345const query = gql` query &#123; ... &#125;` ä¸Šé¢ä¸¤ä¸ªä¾‹å­ä¸­çš„styled.buttonå’Œgqlæ¨¡æ¿æ ‡ç­¾å…¶å®žéƒ½æ˜¯å‡½æ•°: 1function gql(literals, ...expressions) &#123;&#125; è¿™ä¸ªå‡½æ•°è¿”å›žä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»åž‹çš„è®¡ç®—ç»“æžœã€‚ å­—é¢é‡(literals)æ˜¯ä¸€ä¸ªåŒ…å«äº†è¡¨è¾¾å¼æ’å€¼çš„æ¨¡æ¿å­—é¢é‡çš„åºåˆ—ã€‚ è¡¨è¾¾å¼(expressions)åŒ…å«äº†æ‰€æœ‰çš„æ’å€¼ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 1const string = `something $&#123;1 + 2 + 3&#125;` è¿™ä¸ªä¾‹å­é‡Œé¢çš„å­—é¢é‡æ˜¯ç”±2ä¸ªéƒ¨åˆ†ç»„æˆçš„åºåˆ—ã€‚ç¬¬1éƒ¨åˆ†å°±æ˜¯somethingï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªæ’å€¼ä½ç½®(${})ä¹‹å‰çš„å­—ç¬¦ä¸²ï¼Œç¬¬2éƒ¨åˆ†å°±æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œä»Žç¬¬1ä¸ªæ’å€¼ç»“æŸçš„ä½ç½®ç›´åˆ°å­—ç¬¦ä¸²çš„ç»“æŸã€‚ è¿™ä¸ªä¾‹å­é‡Œé¢çš„è¡¨è¾¾å¼å°±æ˜¯åªåŒ…å«1ä¸ªéƒ¨åˆ†çš„åºåˆ—ï¼Œä¹Ÿå°±æ˜¯6ã€‚ ä¸¾ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼š 1234const string = `somethinganother $&#123;'x'&#125;new line $&#123;1 + 2 + 3&#125;test` è¿™ä¸ªä¾‹å­é‡Œé¢çš„å­—é¢é‡çš„åºåˆ—é‡Œé¢ï¼Œç¬¬1ä¸ªéƒ¨åˆ†æ˜¯ï¼š 12;`somethinganother ` ç¬¬2éƒ¨åˆ†æ˜¯ï¼š 12;`new line ` ç¬¬3éƒ¨åˆ†æ˜¯ï¼š 12;`test` è¿™ä¸ªä¾‹å­é‡Œé¢çš„è¡¨è¾¾å¼åŒ…å«äº†2ä¸ªéƒ¨åˆ†ï¼šxå’Œ6ã€‚ æ‹¿åˆ°äº†è¿™äº›å€¼çš„å‡½æ•°å°±å¯ä»¥å¯¹å…¶åšä»»æ„å¤„ç†ï¼Œè¿™å°±æ˜¯è¿™ä¸ªç‰¹æ€§çš„å¨åŠ›æ‰€åœ¨ã€‚ æ¯”å¦‚æœ€ç®€å•çš„å¤„ç†å°±æ˜¯å­—ç¬¦ä¸²æ’å€¼ï¼ŒæŠŠå­—é¢é‡å’Œè¡¨è¾¾å¼æ‹¼æŽ¥èµ·æ¥ï¼š 1const interpolated = interpolate`I paid $&#123;10&#125;â‚¬` æ’å€¼çš„è¿‡ç¨‹å°±æ˜¯ï¼š 12345678function interpolate(literals, ...expressions) &#123; let string = `` for (const [i, val] of expressions) &#123; string += literals[i] + val &#125; string += literals[literals.length - 1] return string&#125; è§£æž„èµ‹å€¼ç»™å®šä¸€ä¸ªobjectï¼Œä½ å¯ä»¥æŠ½å–å…¶ä¸­çš„ä¸€äº›å€¼å¹¶ä¸”èµ‹å€¼ç»™å‘½åçš„å˜é‡ï¼š 1234567const person = &#123; firstName:'Tom', lastName:'Cruise', actor:true, age:54, //made up&#125;const &#123;firstName: name, age&#125; = person nameå’Œageå°±åŒ…å«äº†å¯¹åº”çš„å€¼ã€‚ è¿™ä¸ªè¯­æ³•åŒæ ·å¯ä»¥ç”¨åˆ°æ•°ç»„å½“ä¸­ï¼š 12const a = [1,2,3,4,5]const [first, second] = a ä¸‹é¢è¿™ä¸ªè¯­å¥åˆ›å»ºäº†3ä¸ªæ–°çš„å˜é‡ï¼Œåˆ†åˆ«å–çš„æ˜¯æ•°ç»„açš„ç¬¬0ã€1ã€4ä¸‹æ ‡å¯¹åº”çš„å€¼ï¼š 1const [first, second, , , fifth] = a æ›´å¼ºå¤§çš„å¯¹è±¡å­—é¢é‡ES2015èµ‹äºˆäº†å¯¹è±¡å­—é¢é‡æ›´å¤§çš„å¨åŠ›ã€‚ ç®€åŒ–äº†åŒ…å«å˜é‡çš„è¯­æ³•åŽŸæ¥çš„å†™æ³•ï¼š 1234const something = 'y'const x = &#123; something: something&#125; æ–°çš„å†™æ³•ï¼š 1234const something = 'y'const x = &#123; something&#125; åŽŸåž‹åŽŸåž‹å¯ä»¥è¿™æ ·æŒ‡å®šï¼š 12345678910111213const anObject = &#123; y:'y' &#125;const x = &#123; __proto__: anObject&#125;super()const anObject = &#123; y:'y', test:() =&gt; 'zoo' &#125;const x = &#123; __proto__: anObject, test() &#123; return super.test() + 'x' &#125;&#125;x.test() //zoox åŠ¨æ€å±žæ€§1234const x = &#123; ['a' + '_' + 'b']:'z'&#125;x.a_b //z For-ofå¾ªçŽ¯2009å¹´çš„ES5å¼•å…¥äº†forEach()å¾ªçŽ¯ã€‚è™½ç„¶å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯å®ƒè·Ÿforå¾ªçŽ¯ä¸€æ ·ï¼Œæ²¡æ³•breakã€‚ ES2015å¼•å…¥äº†for-of å¾ªçŽ¯ï¼Œå°±æ˜¯åœ¨forEachçš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†breakçš„åŠŸèƒ½ï¼š 123456789//iterate over the valuefor (const v of ['a', 'b', 'c']) &#123; console.log(v);&#125;//get the index as well, using `entries()`for (const [i, v] of ['a', 'b', 'c'].entries()) &#123; console.log(index) //index console.log(value) //value&#125; ç•™æ„ä¸€ä¸‹constçš„ä½¿ç”¨ã€‚è¿™ä¸ªå¾ªçŽ¯åœ¨æ¯æ¬¡è¿­ä»£ä¸­éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨constæ¥ä»£æ›¿letã€‚ å®ƒè·Ÿforâ€¦inçš„åŒºåˆ«åœ¨äºŽï¼š forâ€¦oféåŽ†å±žæ€§å€¼ forâ€¦inéåŽ†å±žæ€§å Promisespromiseçš„ä¸€èˆ¬å®šä¹‰ï¼š å®ƒæ˜¯ä¸€ä¸ªä»£ç†ï¼Œé€šè¿‡å®ƒå¯ä»¥æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå€¼. Promiseæ˜¯å¤„ç†å¼‚æ­¥ä»£ç çš„ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥å°‘å†™å¾ˆå¤šå›žè°ƒã€‚ å¼‚æ­¥å‡½æ•°æ˜¯å»ºç«‹åœ¨promise APIä¸Šé¢çš„ï¼Œæ‰€ä»¥ç†è§£Promiseæ˜¯ä¸€ä¸ªåŸºæœ¬çš„è¦æ±‚ã€‚ promiseçš„åŽŸç†ç®€è¿°ä¸€ä¸ªpromiseè¢«è°ƒç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆå®ƒæ˜¯å¤„äºŽpendingçŠ¶æ€ã€‚åœ¨promiseå¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨çš„å‡½æ•°ï¼ˆcallerï¼‰å¯ä»¥ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°promiseç»™å‡ºåé¦ˆã€‚ æ­¤æ—¶ï¼Œè°ƒç”¨çš„å‡½æ•°ç­‰å¾…çš„promiseç»“æžœè¦ä¹ˆæ˜¯resolvedçŠ¶æ€ï¼Œè¦ä¹ˆæ˜¯rejectedçŠ¶æ€ã€‚ä½†æ˜¯ç”±äºŽJavaScriptæ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥promiseå¤„ç†çš„è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°ä¼šç»§ç»­æ‰§è¡Œã€‚ ä¸ºä»€ä¹ˆJS APIä½¿ç”¨promises?é™¤äº†ä½ çš„ä»£ç å’Œç¬¬ä¸‰æ–¹åº“çš„ä»£ç ä¹‹å¤–ï¼Œpromiseåœ¨ç”¨åœ¨çŽ°ä»£çš„Web APIä¸­ï¼Œæ¯”å¦‚ï¼š ç”µæ± API Fetch API Service Workers åœ¨çŽ°ä»£çš„JavaScriptä¸­ï¼Œä¸ä½¿ç”¨promiseæ˜¯ä¸å¤ªå¯èƒ½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥æ·±å…¥ç ”ç©¶ä¸‹promiseå§ã€‚ åˆ›å»ºä¸€ä¸ªpromisePromise APIæš´éœ²äº†ä¸€ä¸ªPromiseæž„é€ å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡new Promise()æ¥åˆå§‹åŒ–ï¼š 12345678910let done = trueconst isItDoneYet = new Promise((resolve, reject) =&gt; &#123; if (done) &#123; const workDone = 'Here is the thing I built' resolve(workDone) &#125; else &#123; const why = 'Still working on something else' reject(why) &#125;&#125;) promiseä¼šæ£€æŸ¥doneè¿™ä¸ªå…¨å±€å˜é‡ï¼Œå¦‚æžœä¸ºtrueï¼Œå°±è¿”å›žä¸€ä¸ªresolved promiseï¼Œå¦åˆ™å°±è¿”å›žä¸€ä¸ªrejected promiseã€‚ é€šè¿‡resolveå’Œrejectï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªè¿”å›žå€¼ï¼Œè¿”å›žå€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ã€‚ ä½¿ç”¨ä¸€ä¸ªpromiseä¸Šé¢è®²äº†æ€Žä¹ˆåˆ›å»ºä¸€ä¸ªpromiseï¼Œä¸‹é¢å°±è®²æ€Žä¹ˆä½¿ç”¨ï¼ˆconsumeï¼‰è¿™ä¸ªpromiseã€‚ 1234567891011const isItDoneYet = new Promise()//...const checkIfItsDone = () =&gt; &#123; isItDoneYet .then(ok =&gt; &#123; console.log(ok) &#125;) .catch(err =&gt; &#123; console.error(err) &#125;)&#125; è¿è¡ŒcheckIfItsDone()æ–¹æ³•æ—¶ï¼Œä¼šæ‰§è¡ŒisItDoneYet()è¿™ä¸ªpromiseï¼Œå¹¶ä¸”ç­‰å¾…å®ƒresolveçš„æ—¶å€™ä½¿ç”¨thenå›žè°ƒï¼Œå¦‚æžœæœ‰é”™è¯¯ï¼Œå°±ç”¨catchå›žè°ƒæ¥å¤„ç†ã€‚ é“¾å¼promiseä¸€ä¸ªpromiseå¯ä»¥è¿”å›žå¦ä¸€ä¸ªpromiseï¼Œä»Žè€Œåˆ›å»ºpromiseé“¾æ¡ï¼ˆchainï¼‰ã€‚ ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­å°±æ˜¯Fetch APIï¼Œå®ƒæ˜¯åŸºäºŽXMLHttpRequest APIçš„ä¸€ä¸ªä¸Šå±‚APIï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥èŽ·å–èµ„æºï¼Œå¹¶ä¸”åœ¨èŽ·å–åˆ°èµ„æºçš„æ—¶å€™é“¾å¼æ‰§è¡Œä¸€ç³»åˆ—promiseã€‚ Fetch APIæ˜¯ä¸€ä¸ªåŸºäºŽpromiseçš„æœºåˆ¶ï¼Œè°ƒç”¨fetch()ç›¸å½“äºŽä½¿ç”¨new Promise()æ¥å£°æ˜Žæˆ‘ä»¬è‡ªå·±çš„promiseã€‚ é“¾å¼promiseçš„ä¾‹å­ 12345678910111213141516const status = response =&gt; &#123; if (response.status &gt;= 200 &amp;&amp; response.status &lt; 300) &#123; return Promise.resolve(response) &#125; return Promise.reject(new Error(response.statusText))&#125;const json = response =&gt; response.json()fetch('/todos.json') .then(status) .then(json) .then(data =&gt; &#123; console.log('Request succeeded with JSON response', data) &#125;) .catch(error =&gt; &#123; console.log('Request failed', error) &#125;) åœ¨è¿™ä¸ªä¾‹å­å½“ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨fetch()ï¼Œä»Žæ ¹ç›®å½•çš„todos.jsonæ–‡ä»¶ä¸­èŽ·å–ä¸€ç³»åˆ—çš„TODOé¡¹ç›®ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªé“¾å¼promiseã€‚ è¿è¡Œfetch()æ–¹æ³•ä¼šè¿”å›žä¸€ä¸ªresponseï¼Œå®ƒåŒ…å«å¾ˆå¤šå±žæ€§ï¼Œæˆ‘ä»¬ä»Žä¸­å¼•ç”¨å¦‚ä¸‹å±žæ€§ï¼š status, ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºHTTPçŠ¶æ€ç  statusText, ä¸€ä¸ªçŠ¶æ€æ¶ˆæ¯ï¼Œå½“è¯·æ±‚æˆåŠŸçš„æ—¶å€™è¿”å›žOK responseè¿˜æœ‰ä¸€ä¸ªjson()æ–¹æ³•ï¼Œå®ƒè¿”å›žä¸€ä¸ªpromiseï¼Œè¿”å›žå†…å®¹è½¬æ¢æˆJSONåŽçš„ç»“æžœã€‚ æ‰€ä»¥è¿™äº›promiseçš„è°ƒç”¨è¿‡ç¨‹å°±æ˜¯ï¼šç¬¬ä¸€ä¸ªpromiseæ‰§è¡Œä¸€ä¸ªæˆ‘ä»¬å®šä¹‰çš„status()æ–¹æ³•ï¼Œæ£€æŸ¥response statusï¼Œåˆ¤æ–­æ˜¯å¦ä¸€ä¸ªæˆåŠŸçš„å“åº”(statusåœ¨200å’Œ299ä¹‹é—´)ï¼Œå¦‚æžœä¸æ˜¯æˆåŠŸçš„å“åº”ï¼Œå°±rejectè¿™ä¸ªpromiseã€‚ è¿™ä¸ªrejectæ“ä½œä¼šå¯¼è‡´æ•´ä¸ªé“¾å¼promiseè·³è¿‡åŽé¢çš„æ‰€æœ‰promiseç›´æŽ¥åˆ°catch()è¯­å¥ï¼Œæ‰“å°Request failedå’Œé”™è¯¯æ¶ˆæ¯ã€‚ å¦‚æžœè¿™ä¸ªpromiseæˆåŠŸäº†ï¼Œå®ƒä¼šè°ƒç”¨æˆ‘ä»¬å®šä¹‰çš„json()å‡½æ•°ã€‚å› ä¸ºå‰é¢çš„promiseæˆåŠŸä¹‹åŽè¿”å›žçš„responseå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°å¹¶ä½œä¸ºç¬¬2ä¸ªpromiseçš„å‚æ•°ä¼ å…¥ã€‚ åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œæˆ‘ä»¬è¿”å›žäº†JSONåºåˆ—åŒ–çš„æ•°æ®ï¼Œæ‰€ä»¥ç¬¬3ä¸ªpromiseç›´æŽ¥æŽ¥æ”¶è¿™ä¸ªJSONï¼š 123.then((data) =&gt; &#123; console.log('Request succeeded with JSON response', data)&#125;) ç„¶åŽæˆ‘ä»¬æŠŠå®ƒæ‰“å°åˆ°consoleã€‚ å¤„ç†é”™è¯¯åœ¨ä¸Šä¸€èŠ‚çš„çš„ä¾‹å­é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªcatchæŽ¥åœ¨é“¾å¼promiseåŽé¢ã€‚ å½“promiseé“¾ä¸­çš„ä»»æ„ä¸€ä¸ªå‡ºé”™æˆ–è€…rejectçš„æ—¶å€™ï¼Œå°±ä¼šç›´æŽ¥è·³åˆ°promiseé“¾åŽé¢æœ€è¿‘çš„catch()è¯­å¥ã€‚ 1234567891011new Promise((resolve, reject) =&gt; &#123; throw new Error('Error')&#125;).catch(err =&gt; &#123; console.error(err)&#125;)// ornew Promise((resolve, reject) =&gt; &#123; reject('Error')&#125;).catch(err =&gt; &#123; console.error(err)&#125;) çº§è”é”™è¯¯å¦‚æžœåœ¨catch()é‡Œé¢æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œä½ å¯ä»¥åœ¨åŽé¢æŽ¥ä¸Šç¬¬äºŒä¸ªcatch()æ¥å¤„ç†è¿™ä¸ªé”™è¯¯ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ 123456789new Promise((resolve, reject) =&gt; &#123; throw new Error('Error')&#125;) .catch(err =&gt; &#123; throw new Error('Error') &#125;) .catch(err =&gt; &#123; console.error(err) &#125;) ç»„ç»‡å¤šä¸ªpromisePromise.all()å¦‚æžœä½ è¦åŒæ—¶å®Œæˆä¸åŒçš„promise,å¯ä»¥ç”¨Promise.all()æ¥å£°æ˜Žä¸€ç³»åˆ—çš„promiseï¼Œç„¶åŽå½“å®ƒä»¬å…¨éƒ¨resolveçš„æ—¶å€™å†æ‰§è¡Œä¸€äº›æ“ä½œã€‚ ä¾‹å­ï¼š 123456789const f1 = fetch('/something.json')const f2 = fetch('/something2.json')Promise.all([f1, f2]) .then(res =&gt; &#123; console.log('Array of results', res) &#125;) .catch(err =&gt; &#123; console.error(err) &#125;) ç»“åˆES2015çš„è§£æž„èµ‹å€¼è¯­æ³•ï¼Œä½ å¯ä»¥è¿™æ ·å†™ï¼š 123Promise.all([f1, f2]).then(([res1, res2]) =&gt; &#123; console.log('Results', res1, res2)&#125;) å½“ç„¶è¿™ä¸é™äºŽä½¿ç”¨fetchï¼Œ è¿™é€‚ç”¨äºŽä»»ä½•promise. Promise.race()Promise.race()è¿è¡Œæ‰€æœ‰ä¼ é€’è¿›åŽ»çš„promiseï¼Œä½†æ˜¯åªè¦æœ‰å…¶ä¸­ä¸€ä¸ªresolveäº†ï¼Œå°±ä¼šè¿è¡Œå›žè°ƒå‡½æ•°ï¼Œå¹¶ä¸”åªæ‰§è¡Œä¸€æ¬¡å›žè°ƒï¼Œå›žè°ƒçš„å‚æ•°å°±æ˜¯ç¬¬ä¸€ä¸ªresolveçš„promiseè¿”å›žçš„ç»“æžœã€‚ ä¾‹å­ï¼š 123456789const promiseOne = new Promise((resolve, reject) =&gt; &#123; setTimeout(resolve, 500, 'one')&#125;)const promiseTwo = new Promise((resolve, reject) =&gt; &#123; setTimeout(resolve, 100, 'two')&#125;)Promise.race([promiseOne, promiseTwo]).then(result =&gt; &#123; console.log(result) // 'two'&#125;) æ¨¡å—ES Moduleæ˜¯ç”¨äºŽå¤„ç†æ¨¡å—çš„ECMAScriptæ ‡å‡†ã€‚ è™½ç„¶ Node.js å¤šå¹´æ¥ä¸€ç›´ä½¿ç”¨ CommonJSæ ‡å‡†ï¼Œä½†æµè§ˆå™¨å´ä»Žæœªæœ‰è¿‡æ¨¡å—ç³»ç»Ÿï¼Œå› ä¸ºæ¨¡å—ç³»ç»Ÿçš„å†³ç­–é¦–å…ˆéœ€è¦ ECMAScript æ ‡å‡†åŒ–åŽæ‰ç”±æµè§ˆå™¨åŽ‚å•†åŽ»å®žæ–½å®žçŽ°ã€‚ è¿™ä¸ªæ ‡å‡†åŒ–å·²ç»å®Œæˆåœ¨ ES2015ä¸­ï¼Œæµè§ˆå™¨ä¹Ÿå¼€å§‹å®žæ–½å®žçŽ°è¿™ä¸ªæ ‡å‡†ï¼Œå¤§å®¶è¯•å›¾ä¿æŒä¸€è‡´ï¼Œä»¥ç›¸åŒçš„æ–¹å¼å·¥ä½œã€‚çŽ°åœ¨ ES Module å¯ä»¥åœ¨ Chrome Safari Edge å’Œ Firefoxï¼ˆä»Ž60ç‰ˆæœ¬å¼€å§‹ï¼‰ ä¸­ä½¿ç”¨ã€‚ æ¨¡å—éžå¸¸é…·ï¼Œä»–ä»¬å¯ä»¥è®©ä½ å°è£…å„ç§å„æ ·çš„åŠŸèƒ½ï¼ŒåŒæ—¶å°†è¿™äº›åŠŸèƒ½ä½œä¸ºåº“æš´éœ²ç»™å…¶å®ƒ JavaScript æ–‡ä»¶ä½¿ç”¨ã€‚ ES æ¨¡å—è¯­æ³•å¼•å…¥æ¨¡å—çš„è¯­æ³•: 1import package from 'module-name' CommonJS åˆ™æ˜¯è¿™æ ·ä½¿ç”¨ï¼š 1const package = require('module-name') ä¸€ä¸ªæ¨¡å—æ˜¯ä¸€ä¸ª JavaScript æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä½¿ç”¨ export å…³é”®å­— å¯¼å‡º ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼ˆå¯¹è±¡ã€å‡½æ•°æˆ–è€…å˜é‡ï¼‰ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªæ¨¡å—æä¾›äº†ä¸€ä¸ªå°†å­—ç¬¦ä¸²å˜æˆå¤§å†™å½¢å¼çš„å‡½æ•°ï¼š 12uppercase.jsexport default str =&gt; str.toUpperCase() åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œè¿™ä¸ªæ¨¡å—å®šä¹‰äº†å”¯ä¸€ä¸€ä¸ª default exportï¼Œå› æ­¤å¯ä»¥æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚å¦åˆ™ï¼Œéœ€è¦ä¸€ä¸ªåç§°æ¥å’Œå…¶å®ƒ å¯¼å‡º åšåŒºåˆ†ã€‚ çŽ°åœ¨ï¼Œä»»ä½•å…¶å®ƒçš„ JavaScript æ¨¡å— å¯ä»¥é€šè¿‡ import å¯¼å…¥ uppercase.js çš„è¿™ä¸ªåŠŸèƒ½ã€‚ ä¸€ä¸ª HTML é¡µé¢å¯ä»¥é€šè¿‡ä½¿ç”¨äº†ç‰¹æ®Šçš„ type=module å±žæ€§çš„ &lt;script&gt; æ ‡ç­¾æ·»åŠ ä¸€ä¸ªæ¨¡å—ã€‚ 1&lt;script type="module" src="index.js"&gt;&lt;/script&gt; æ³¨æ„: è¿™ä¸ªæ¨¡å—å¯¼å…¥çš„è¡Œä¸ºå°±åƒ defer è„šæœ¬åŠ è½½ä¸€æ ·ã€‚å…·ä½“å¯ä»¥çœ‹ efficiently load JavaScript with defer and async éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œä»»ä½•é€šè¿‡ type=â€moduleâ€ è½½å…¥çš„è„šæœ¬ä¼šä½¿ç”¨ ä¸¥æ ¼æ¨¡å¼ åŠ è½½ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œuppercase.js æ¨¡å—å®šä¹‰äº†ä¸€ä¸ª default exportï¼Œå› æ­¤å½“æˆ‘ä»¬åœ¨å¯¼å…¥å®ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»–èµ·ä¸€ä¸ªä»»ä½•æˆ‘ä»¬å–œæ¬¢çš„åå­—ï¼š 1import toUpperCase from './uppercase.js' åŒæ—¶æˆ‘ä»¬å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ: 1toUpperCase('test') //'TEST' ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªç»å¯¹è·¯å¾„æ¥å¯¼å…¥æ¨¡å—ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå¼•ç”¨æ¥è‡ªå…¶å®ƒåŸŸåº•ä¸‹å®šä¹‰çš„æ¨¡å—çš„ä¾‹å­ï¼š 1import toUpperCase from 'https://flavio-es-modules-example.glitch.me/uppercase.js' ä¸‹é¢åŒæ ·æ˜¯ä¸€äº›åˆæ³•çš„ importè¯­æ³•ï¼š 12import &#123; toUpperCase &#125; from '/uppercase.js'import &#123; toUpperCase &#125; from '../uppercase.js' ä¸‹é¢æ˜¯é”™è¯¯çš„ä½¿ç”¨: 12import &#123; toUpperCase &#125; from 'uppercase.js'import &#123; toUpperCase &#125; from 'utils/uppercase.js' å› ä¸ºè¿™é‡Œæ—¢ä¸æ˜¯ä½¿ç”¨ç»å¯¹åœ°å€ï¼Œä¹Ÿä¸æ˜¯ä½¿ç”¨çš„ç›¸å¯¹åœ°å€ã€‚ å…¶å®ƒçš„ import/export è¯­æ³•æˆ‘ä»¬äº†è§£äº†ä¸Šé¢çš„ä¾‹å­ï¼š 1export default str =&gt; str.toUpperCase() è¿™é‡Œç”Ÿæˆäº†ä¸€ä¸ª default exportã€‚ç„¶è€Œï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¯­æ³•åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ å¯¼å‡º å¤šä¸ªåŠŸèƒ½ï¼š 1234const a = 1const b = 2const c = 3export &#123; a, b, c &#125; å¦å¤–ä¸€ä¸ªæ¨¡å—å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼ import å¯¼å…¥æ‰€æœ‰ï¼š 1import * from 'module' ä½ ä¹Ÿå¯ä»¥é€šè¿‡è§£æž„èµ‹å€¼çš„æ–¹å¼ä»…ä»… import å¯¼å‡ºä¸€éƒ¨åˆ†ï¼š 12import &#123; a &#125; from 'module'import &#123; a, b &#125; from 'module' ä¸ºäº†æ–¹ä¾¿ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ as é‡å‘½åä»»ä½• import çš„ä¸œè¥¿ï¼š 1import &#123; a, b as two &#125; from 'module' ä½ å¯ä»¥å¯¼å…¥æ¨¡å—ä¸­çš„é»˜è®¤å‡ºå£ä»¥åŠé€šè¿‡åç§°å¯¼å…¥ä»»ä½•éžé»˜è®¤çš„å‡ºå£ï¼š 1import React, &#123; Component &#125; from 'react' è¿™æ˜¯ä¸€ç¯‡å…³äºŽ ES æ¨¡å—çš„æ–‡ç« ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ï¼š https://glitch.com/edit/#!/flavio-es-modules-example?path=index.html CORS(è·¨åŸŸèµ„æºå…±äº«)è¿›è¡Œè¿œç¨‹èŽ·å–æ¨¡å—çš„æ—¶å€™æ˜¯éµå¾ª CORS æœºåˆ¶çš„ã€‚è¿™æ„å‘³ç€å½“ä½ å¼•ç”¨è¿œç¨‹æ¨¡å—çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨åˆæ³•çš„ CORS è¯·æ±‚å¤´æ¥å…è®¸è·¨åŸŸè®¿é—®ï¼ˆä¾‹å¦‚ï¼šAccess-Control-Allow-Origin: *ï¼‰ã€‚ å¯¹äºŽä¸æ”¯æŒæ¨¡å—çš„æµè§ˆå™¨åº”è¯¥æ€Žä¹ˆåšï¼Ÿç»“åˆ type=â€moduleâ€ã€nomodule ä¸€èµ·ä½¿ç”¨ï¼š 12&lt;script type="module" src="module.js"&gt;&lt;/script&gt;&lt;script nomodule src="fallback.js"&gt;&lt;/script&gt; åŒ…è£…æ¨¡å—ES æ¨¡å—æ˜¯çŽ°ä»£æµè§ˆå™¨ä¸­çš„ä¸€å¤§ç‰¹æ€§ã€‚è¿™äº›ç‰¹æ€§æ˜¯ ES6 è§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè¦åœ¨æµè§ˆå™¨ä¸­å…¨éƒ¨å®žçŽ°è¿™äº›ç‰¹æ€§çš„è·¯è¿˜å¾ˆæ¼«é•¿ã€‚ æˆ‘ä»¬çŽ°åœ¨å°±èƒ½ä½¿ç”¨å®ƒä»¬ï¼ä½†æ˜¯æˆ‘ä»¬åŒæ ·éœ€è¦çŸ¥é“ï¼Œæœ‰ä¸€äº›æ¨¡å—ä¼šå¯¹æˆ‘ä»¬çš„é¡µé¢æ€§èƒ½äº§ç”Ÿæ€§èƒ½å½±å“ã€‚å› ä¸ºæµè§ˆå™¨å¿…é¡»è¦åœ¨è¿è¡Œæ—¶æ‰§è¡Œå®ƒä»¬ã€‚ Webpack å¯èƒ½ä»ç„¶ä¼šè¢«å¤§é‡ä½¿ç”¨ï¼Œå³ä½¿ ES æ¨¡å—å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œã€‚ä½†æ˜¯è¯­è¨€å†…ç½®è¿™ä¸ªç‰¹æ€§å¯¹äºŽå®¢æˆ·ç«¯å’Œ nodejs åœ¨ä½¿ç”¨æ¨¡å—çš„æ—¶å€™æ˜¯ä¸€ç§å·¨å¤§çš„ç»Ÿä¸€ã€‚ æ–°çš„å­—ç¬¦ä¸²æ–¹æ³•ä»»ä½•å­—ç¬¦ä¸²æœ‰äº†ä¸€äº›å®žä¾‹æ–¹æ³•ï¼š repeat() codePointAt() repeat() æ ¹æ®æŒ‡å®šçš„æ¬¡æ•°é‡å¤å­—ç¬¦ä¸²ï¼š 1'Ho'.repeat(3) //'HoHoHo' æ²¡æœ‰æä¾›å‚æ•°ä»¥åŠä½¿ç”¨ 0 ä½œä¸ºå‚æ•°çš„æ—¶å€™è¿”å›žç©ºå­—ç¬¦ä¸²ã€‚å¦‚æžœç»™ä¸€ä¸ªè´Ÿæ•°å‚æ•°åˆ™ä¼šå¾—åˆ°ä¸€ä¸ª RangeError çš„é”™è¯¯ã€‚ codePointAt()è¿™ä¸ªæ–¹æ³•èƒ½ç”¨åœ¨å¤„ç†é‚£äº›éœ€è¦ 2 ä¸ª UTF-16 å•å…ƒè¡¨ç¤ºçš„å­—ç¬¦ä¸Šã€‚ ä½¿ç”¨ charCodeAt çš„è¯ï¼Œä½ éœ€è¦å…ˆåˆ†åˆ«å¾—åˆ°ä¸¤ä¸ª UTF-16 çš„ç¼–ç ç„¶åŽç»“åˆå®ƒä»¬ã€‚ä½†æ˜¯ä½¿ç”¨ codePointAt() ä½ å¯ä»¥ç›´æŽ¥å¾—åˆ°æ•´ä¸ªå­—ç¬¦ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä¸­æ–‡çš„ â€œð ®·â€ æ˜¯ç”±ä¸¤ä¸ª UTF-16 ç¼–ç ç»„åˆè€Œæˆçš„ï¼š 12"ð ®·".charCodeAt(0).toString(16) //d842"ð ®·".charCodeAt(1).toString(16) //dfb7 å¦‚æžœä½ å°†ä¸¤ä¸ª unicode å­—ç¬¦ç»„åˆèµ·æ¥ï¼š 1"ð ®·" //"ð ®·" ä½ ä¹Ÿå¯ä»¥ç”¨ codePointAt() å¾—åˆ°åŒæ ·çš„ç»“æžœ: 1"ð ®·".codePointAt(0) //20bb7 å¦‚æžœä½ å°†å¾—åˆ°çš„ unicode ç¼–ç ç»„åˆèµ·æ¥ï¼š 1"ð ®·" //"ð ®·" æ›´å¤šå…³äºŽ Unicode çš„ä½¿ç”¨æ–¹æ³•ï¼Œå‚è€ƒæˆ‘çš„Unicode guideã€‚ æ–°çš„å¯¹è±¡æ–¹æ³•ES2015 åœ¨ Object ç±»ä¸‹å¼•å…¥äº†ä¸€äº›é™æ€æ–¹æ³•ï¼š Object.is() ç¡®å®šä¸¤ä¸ªå€¼æ˜¯ä¸æ˜¯åŒä¸€ä¸ª Object.assign() ç”¨æ¥æµ…æ‹·è´ä¸€ä¸ªå¯¹è±¡ Object.setPrototypeOf è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„åŽŸåž‹ Object.is() è¿™ä¸ªæ–¹æ³•ç”¨æ¥å¸®åŠ©æ¯”è¾ƒå¯¹è±¡çš„å€¼ï¼š ä½¿ç”¨æ–¹å¼: 1Object.is(a, b) è¿”å›žå€¼åœ¨ä¸‹åˆ—æƒ…å†µä¹‹å¤–ä¸€ç›´æ˜¯ falseï¼š a å’Œ b æ˜¯åŒä¸€ä¸ªå¯¹è±¡ a å’Œ b æ˜¯ç›¸ç­‰çš„å­—ç¬¦ä¸²(ç”¨åŒæ ·çš„å­—ç¬¦ç»„åˆåœ¨ä¸€èµ·çš„å­—ç¬¦ä¸²æ˜¯ç›¸ç­‰çš„) a å’Œ b æ˜¯ç›¸ç­‰çš„æ•°å­— a å’Œ b éƒ½æ˜¯ undefined, null, NaN, true æˆ–è€…éƒ½æ˜¯ false 0 å’Œ -0 åœ¨ JavaScript é‡Œé¢æ˜¯ä¸åŒçš„å€¼, æ‰€ä»¥å¯¹è¿™ç§æƒ…å†µè¦å¤šåŠ å°å¿ƒï¼ˆä¾‹å¦‚åœ¨æ¯”è¾ƒä¹‹å‰ï¼Œä½¿ç”¨ + ä¸€å…ƒæ“ä½œç¬¦å°†æ‰€æœ‰å€¼è½¬æ¢æˆ +0ï¼‰ã€‚ Object.assign()åœ¨ ES2015 ç‰ˆæœ¬ä¸­å¼•å…¥ï¼Œè¿™ä¸ªæ–¹æ³•æ‹·è´æ‰€æœ‰ç»™å‡ºçš„å¯¹è±¡ä¸­çš„å¯æžšä¸¾çš„è‡ªèº«å±žæ€§åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚ è¿™ä¸ª API çš„åŸºæœ¬ç”¨æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æµ…æ‹·è´ã€‚ 1const copied = Object.assign(&#123;&#125;, original) ä½œä¸ºæµ…æ‹·è´ï¼Œå€¼ä¼šè¢«å¤åˆ¶ï¼Œå¯¹è±¡åˆ™æ˜¯æ‹·è´å…¶å¼•ç”¨ï¼ˆä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼‰ï¼Œå› æ­¤å½“ä½ ä¿®æ”¹äº†æºå¯¹è±¡çš„ä¸€ä¸ªå±žæ€§å€¼ï¼Œè¿™ä¸ªä¿®æ”¹ä¹Ÿä¼šåœ¨æ‹·è´å‡ºçš„å¯¹è±¡ä¸­ç”Ÿæ•ˆï¼Œå› ä¸ºå†…éƒ¨å¼•ç”¨çš„å¯¹è±¡æ˜¯ç›¸åŒçš„ã€‚: 1234567891011const original = &#123; name:'Fiesta', car:&#123; color:'blue' &#125;&#125;const copied = Object.assign(&#123;&#125;, original)original.name = 'Focus'original.car.color = 'yellow'copied.name //Fiestacopied.car.color //yellow æˆ‘ä¹‹å‰æåˆ°è¿‡ï¼Œæºå¯¹è±¡å¯ä»¥æ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ª: 123456789const wisePerson = &#123; isWise:true&#125;const foolishPerson = &#123; isFoolish:true&#125;const wiseAndFoolishPerson = Object.assign(&#123;&#125;, wisePerson, foolishPerson)console.log(wiseAndFoolishPerson) //&#123; isWise: true, isFoolish: true &#125;Object.setPrototypeOf() è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„åŽŸåž‹ã€‚å¯ä»¥æŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼šå¯¹è±¡ä»¥åŠåŽŸåž‹ã€‚ ä½¿ç”¨æ–¹æ³•: 1Object.setPrototypeOf(object, prototype) ä¾‹å­: 1234567891011121314const animal = &#123; isAnimal:true&#125;const mammal = &#123; isMammal:true&#125;mammal.__proto__ = animalmammal.isAnimal //trueconst dog = Object.create(animal)dog.isAnimal //trueconsole.log(dog.isMammal) //undefinedObject.setPrototypeOf(dog, mammal)dog.isAnimal //truedog.isMammal //true å±•å¼€æ“ä½œç¬¦ä½ å¯ä»¥å±•å¼€ä¸€ä¸ªæ•°ç»„ã€ä¸€ä¸ªå¯¹è±¡ç”šè‡³æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡ä½¿ç”¨å±•å¼€æ“ä½œç¬¦ â€¦ã€‚ è®©æˆ‘ä»¬ä»¥æ•°ç»„æ¥ä¸¾ä¾‹ï¼Œç»™å‡ºï¼š 1const a = [1, 2, 3] ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼åˆ›å»ºå‡ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼š 1const b = [...a, 4, 5, 6] ä½ ä¹Ÿå¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ›å»ºä¸€ä¸ªæ•°ç»„çš„æ‹·è´ï¼š 1const c = [...a] è¿™ä¸­æ–¹å¼å¯¹äºŽå¯¹è±¡ä»ç„¶æœ‰æ•ˆã€‚ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼å…‹éš†ä¸€ä¸ªå¯¹è±¡ï¼š 1const newObj = &#123; ...oldObj &#125; ç”¨åœ¨å­—ç¬¦ä¸²ä¸Šçš„æ—¶å€™ï¼Œå±•å¼€æ“ä½œç¬¦ä¼šä»¥å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼š 12const hey = 'hey'const arrayized = [...hey] // ['h', 'e', 'y'] è¿™ä¸ªæ“ä½œç¬¦æœ‰ä¸€äº›éžå¸¸æœ‰ç”¨çš„åº”ç”¨ã€‚å…¶ä¸­æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ä»¥ä¸€ç§éžå¸¸ç®€å•çš„æ–¹å¼ä½¿ç”¨æ•°ç»„ä½œä¸ºå‡½æ•°å‚æ•°çš„èƒ½åŠ›ï¼š 123const f = (foo, bar) =&gt; &#123;&#125;const a = [1, 2]f(...a) ï¼ˆåœ¨ä¹‹å‰çš„è¯­æ³•è§„èŒƒä¸­ï¼Œä½ åªèƒ½é€šè¿‡ f.apply(null, a) çš„æ–¹å¼æ¥å®žçŽ°ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¸æ˜¯å¾ˆå‹å¥½å’Œæ˜“è¯»ã€‚ï¼‰ å‰©ä½™å‚æ•°ï¼ˆrest elementï¼‰åœ¨å’Œæ•°ç»„è§£æž„ï¼ˆarray destructuringï¼‰æ­é…ä½¿ç”¨çš„æ—¶å€™éžå¸¸æœ‰ç”¨ã€‚ 12const numbers = [1, 2, 3, 4, 5][first, second, ...others] = numbers ä¸‹é¢æ˜¯å±•å¼€å…ƒç´  ï¼ˆspread elementsï¼‰: 123const numbers = [1, 2, 3, 4, 5]const sum = (a, b, c, d, e) =&gt; a + b + c + d + econst sum = sum(...numbers) ES2018 å¼•å…¥äº† å‰©ä½™å±žæ€§ ï¼ŒåŒæ ·çš„æ“ä½œç¬¦ä½†æ˜¯åªèƒ½ç”¨åœ¨å¯¹è±¡ä¸Šã€‚ å‰©ä½™å±žæ€§ï¼ˆRest propertiesï¼‰:12345678910const &#123; first, second, ...others &#125; = &#123; first:1, second:2, third:3, fourth:4, fifth:5&#125;first // 1second // 2others // &#123; third: 3, fourth: 4, fifth: 5 &#125; å±žæ€§å±•å¼€ï¼ˆSpread propertiesï¼‰å…è®¸æˆ‘ä»¬ç»“åˆè·Ÿåœ¨ â€¦ æ“ä½œç¬¦ä¹‹åŽå¯¹è±¡çš„å±žæ€§ï¼š 12const items = &#123; first, second, ...others &#125;items //&#123; first: 1, second: 2, third: 3, fourth: 4, fifth: 5 &#125; Setä¸€ä¸ª Set æ•°æ®ç»“æž„å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªå®¹å™¨é‡Œé¢å¢žåŠ æ•°æ®ã€‚ ä¸€ä¸ª Set æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…åŸºç¡€æ•°æ®ç±»åž‹ï¼ˆstringsã€numbersæˆ–è€…booleansï¼‰çš„é›†åˆï¼Œä½ å¯ä»¥å°†å®ƒçœ‹ä½œæ˜¯ä¸€ä¸ª Mapï¼Œå…¶ä¸­å€¼ä½œä¸ºæ˜ å°„é”®ï¼Œmap å€¼å§‹ç»ˆä¸º trueã€‚ åˆå§‹åŒ–ä¸€ä¸ª SetSet å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼åˆå§‹åŒ–ï¼š 1const s = new Set() å‘ Set ä¸­æ·»åŠ ä¸€é¡¹ä½ å¯ä»¥ä½¿ç”¨ add æ–¹æ³•å‘ Set ä¸­æ·»åŠ é¡¹ï¼š 12s.add('one')s.add('two') Set ä»…ä¼šå­˜è´®å”¯ä¸€çš„å…ƒç´ ï¼Œå› æ­¤å¤šæ¬¡è°ƒç”¨ s.add(â€˜oneâ€™) ä¸ä¼šé‡å¤æ·»åŠ æ–°çš„å…ƒç´ ã€‚ ä½ ä¸å¯ä»¥åŒæ—¶å‘ set ä¸­åŠ å…¥å¤šä¸ªå…ƒç´ ã€‚ä½ éœ€è¦å¤šæ¬¡è°ƒç”¨ add() æ–¹æ³•ã€‚ æ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨ set ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨ set ä¸­ï¼š 12s.has('one') //trues.has('three') //false ä»Ž set ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼šä½¿ç”¨ delete() æ–¹æ³•ï¼š 1s.delete('one') ç¡®å®š set ä¸­å…ƒç´ çš„æ•°é‡ä½¿ç”¨ size å±žæ€§ï¼š 1s.size åˆ é™¤ set ä¸­çš„å…¨éƒ¨å…ƒç´ ä½¿ç”¨ clear() æ–¹æ³•ï¼š 1s.clear() å¯¹ set è¿›è¡Œè¿­ä»£ä½¿ç”¨ keys() æˆ–è€… values() æ–¹æ³• - å®ƒä»¬ç­‰ä»·äºŽä¸‹é¢çš„ä»£ç ï¼š 123456for (const k of s.keys()) &#123; console.log(k)&#125;for (const k of s.values()) &#123; console.log(k)&#125; entries() æ–¹æ³•è¿”å›žä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒï¼š 12const i = s.entries()console.log(i.next()) è°ƒç”¨ i.next() å°†ä¼šä»¥ { value, done = false } å¯¹è±¡çš„å½¢å¼è¿”å›žæ¯ä¸€ä¸ªå…ƒç´ ï¼Œç›´åˆ°è¿­ä»£ç»“æŸï¼Œè¿™æ—¶ done æ˜¯ trueã€‚ ä½ ä¹Ÿå¯ä»¥è°ƒç”¨ set çš„ forEach() æ–¹æ³•ï¼š 1s.forEach(v =&gt; console.log(v)) æˆ–è€…ä½ å°±ç›´æŽ¥ä½¿ç”¨ for..of å¾ªçŽ¯å§ï¼š 123for (const k of s) &#123; console.log(k)&#125; ä½¿ç”¨ä¸€äº›åˆå§‹å€¼åˆå§‹åŒ–ä¸€ä¸ª setä½ å¯ä»¥ä½¿ç”¨ä¸€äº›å€¼åˆå§‹åŒ–ä¸€ä¸ª setï¼š 1const s = new Set([1, 2, 3, 4]) å°† set è½¬æ¢ä¸ºä¸€ä¸ªæ•°ç»„ 123const a = [...s.keys()]// orconst a = [...s.values()] WeakSetä¸€ä¸ª WeakSet æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Set. åœ¨ set ä¸­ï¼Œå…ƒç´ ä¸ä¼šè¢« gcï¼ˆåžƒåœ¾å›žæ”¶ï¼‰ã€‚ä¸€ä¸ª weakSet è®©å®ƒçš„æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å¯ä»¥è¢« gc çš„ã€‚weakSet ä¸­çš„æ¯ä¸ªé”®éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å½“è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨æ¶ˆå¤±çš„æ—¶å€™ï¼Œå¯¹åº”çš„å€¼å°±å¯ä»¥è¢« gc äº†ã€‚ ä¸‹é¢æ˜¯ä¸»è¦çš„ä¸åŒç‚¹ï¼š WeakSet ä¸å¯è¿­ä»£ ä½ ä¸èƒ½æ¸…ç©º weakSet ä¸­çš„æ‰€æœ‰å…ƒç´  ä¸èƒ½å¤Ÿå¾—åˆ° weakSet çš„å¤§å° ä¸€ä¸ª weakSet é€šå¸¸æ˜¯åœ¨æ¡†æž¶çº§åˆ«çš„ä»£ç ä¸­ä½¿ç”¨ï¼Œä»…ä»…æš´éœ²äº†ä¸‹é¢çš„æ–¹æ³•ï¼š add() has() delete() Mapä¸€ä»½mapç»“æž„çš„æ•°æ®å…è®¸æˆ‘ä»¬å»ºç«‹æ•°æ®å’Œkeyçš„å…³ç³» åœ¨ES6ä¹‹å‰åœ¨å¼•å…¥Mapä¹‹å‰ï¼Œå¼€å‘è€…é€šå¸¸æŠŠå¯¹è±¡(Object)å½“Mapä½¿ç”¨ï¼ŒæŠŠæŸä¸ªobjectæˆ–valueå€¼ä¸ŽæŒ‡å®šçš„keyè¿›è¡Œå…³è”: 1234567const car = &#123;&#125;car['color'] = 'red'car.owner = 'Flavio'console.log(car['color']) //redconsole.log(car.color) //redconsole.log(car.owner) //Flavioconsole.log(car['owner']) //Flavio å¼•å…¥Mapä¹‹åŽES6å¼•å…¥äº†Mapæ•°æ®ç»“æž„ï¼Œå®ƒä¸ºæˆ‘ä»¬å¤„ç†è¿™ç§æ•°æ®ç»“æž„æä¾›äº†ä¸€ç§åˆé€‚çš„å·¥å…· Mapçš„åˆå§‹åŒ–: 1const m = new Map() æ·»åŠ æ¡ç›®åˆ°Mapä¸­ ä½ å¯ä»¥é€šè¿‡set()æ–¹æ³•æŠŠæ¡ç›®è®¾å®šåˆ°mapä¸­ï¼š 12m.set(&apos;color&apos;, &apos;red&apos;)m.set(&apos;age&apos;, 2) é€šè¿‡keyå€¼ä»Žmapä¸­èŽ·å–æ¡ç›® ä½ å¯ä»¥é€šè¿‡get()æ–¹æ³•ä»Žmapä¸­å–å‡ºæ¡ç›®: 12const color = m.get('color')const age = m.get('age') é€šè¿‡keyå€¼ä»Žmapä¸­åˆ é™¤æ¡ç›® ä½¿ç”¨delete()æ–¹æ³•ï¼š 1m.delete('color') ä»Žmapä¸­åˆ é™¤æ‰€æœ‰æ¡ç›® ä½¿ç”¨clear()æ–¹æ³•ï¼š 1m.clear() é€šè¿‡keyå€¼æ£€æŸ¥mapä¸­æ˜¯å¦å«æœ‰æŸä¸ªæ¡ç›® ä½¿ç”¨has()æ–¹æ³• 1const hasColor = m.has('color') èŽ·å–mapä¸­çš„æ¡ç›®æ•°é‡ ä½¿ç”¨ size å±žæ€§: 1const size = m.size ç”¨valueå€¼åˆå§‹åŒ–ä¸€ä¸ªmap ä½ å¯ä»¥ç”¨ä¸€ç»„valueæ¥åˆå§‹åŒ–ä¸€ä¸ªmapï¼š 1const m = new Map([['color', 'red'], ['owner', 'Flavio'], ['age', 2]]) Map çš„keyå€¼ ä»»ä½•å€¼(å¯¹è±¡ï¼Œæ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼Œæ•°å­—)éƒ½å¯ä»¥ä½œä¸ºä¸€ä¸ªmapçš„valueå€¼(ä½¿ç”¨key-valueé”®å€¼çš„å½¢å¼)ï¼Œä»»ä½•å€¼ä¹Ÿå¯ä»¥ç”¨ä½œkeyï¼Œå³ä½¿æ˜¯objectå¯¹è±¡ã€‚ å¦‚æžœä½ æƒ³é€šè¿‡get()æ–¹æ³•ä»Žmapä¸­èŽ·å–ä¸å­˜åœ¨çš„keyï¼Œå®ƒå°†ä¼šè¿”å›žundefined åœ¨çœŸå®žä¸–ç•Œä¸­ä½ å‡ ä¹Žä¸å¯èƒ½æ‰¾åˆ°çš„è¯¡å¼‚æƒ…å†µ 123456const m = new Map()m.set(NaN, 'test')m.get(NaN) //testconst m = new Map()m.set(+0, 'test')m.get(-0) //test ä½¿ç”¨Iterateè¿­ä»£å™¨èŽ·å–mapçš„keyså€¼ Mapæä¾›äº†keys()æ–¹æ³•ï¼Œé€šè¿‡è¯¥æ–¹æ³•æˆ‘ä»¬å¯ä»¥è¿­ä»£å‡ºæ‰€æœ‰çš„keyå€¼: 123for (const k of m.keys()) &#123; console.log(k)&#125; ä½¿ç”¨Iterateè¿­ä»£å™¨èŽ·å–mapçš„valueså€¼ Mapæä¾›äº†values()æ–¹æ³•ï¼Œé€šè¿‡è¯¥æ–¹æ³•æˆ‘ä»¬å¯ä»¥è¿­ä»£å‡ºæ‰€æœ‰çš„valueå€¼: 123for (const v of m.values()) &#123; console.log(v)&#125; ä½¿ç”¨Iterateè¿­ä»£å™¨èŽ·å–key-valueç»„æˆçš„é”®å€¼å¯¹ Mapæä¾›äº†entries()æ–¹æ³•ï¼Œé€šè¿‡è¯¥æ–¹æ³•æˆ‘ä»¬å¯ä»¥è¿­ä»£å‡ºæ‰€æœ‰çš„é”®å€¼å¯¹: 123for (const [k, v] of m.entries()) &#123; console.log(k, v)&#125; ä½¿ç”¨æ–¹æ³•è¿˜å¯ä»¥ç®€åŒ–ä¸ºï¼š 123for (const [k, v] of m) &#123; console.log(k, v)&#125; å°†mapçš„keyså€¼è½¬æ¢ä¸ºæ•°ç»„ 1const a = [...m.keys()] å°†mapçš„valueså€¼è½¬æ¢ä¸ºæ•°ç»„ 1const a = [...m.values()] WeakMapWeakMapæ˜¯ä¸€ç§ç‰¹æ®Šçš„Map åœ¨ä¸€ä¸ªmapå¯¹è±¡ä¸­ï¼Œå®šä¹‰åœ¨å…¶ä¸Šæ•°æ®æ°¸è¿œä¸ä¼šè¢«åžƒåœ¾å›žæ”¶ï¼ŒWeakMapæ›¿è€Œä»£ä¹‹çš„æ˜¯å®ƒå…è®¸åœ¨å®ƒä¸Šé¢å®šä¹‰çš„æ•°æ®å¯ä»¥è‡ªç”±çš„è¢«åžƒåœ¾å›žæ”¶èµ°ï¼ŒWeakMapçš„æ¯ä¸€ä¸ªkeyéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå½“æŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆä¸¢å¤±ï¼Œä¸Žä¹‹å¯¹åº”çš„valueå°±ä¼šè¢«åžƒåœ¾å›žæ”¶èµ°ã€‚ è¿™æ˜¯WeakMapçš„ä¸»è¦ä¸åŒå¤„ï¼š ä½ ä¸å¯ä»¥åœ¨WeakMapä¸Šè¿­ä»£keyså€¼å’Œvalueså€¼(æˆ–è€…key-valueé”®å€¼å¯¹) ä½ ä¸å¯ä»¥ä»ŽWeakMapä¸Šæ¸…é™¤æ‰€æœ‰æ¡ç›® ä½ ä¸å¯ä»¥èŽ·å–WeakMapçš„å¤§å°WeakMapæä¾›äº†å¦‚ä¸‹å‡ ç§æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•çš„ä½¿ç”¨å’Œåœ¨Mapä¸­ä¸€æ ·ï¼š get(k) set(k, v) has(k) delete(k) å…³äºŽWeakMapçš„ç”¨ä¾‹ä¸å¦‚Mapçš„ç”¨ä¾‹é‚£ä¹ˆæ˜Žæ˜¾ï¼Œä½ å¯èƒ½æ°¸è¿œä¹Ÿä¸ä¼šåœ¨å“ªé‡Œä¼šç”¨åˆ°å®ƒï¼Œä½†ä»Žå®žé™…å‡ºå‘ï¼ŒWeakMapå¯ä»¥æž„å»ºä¸ä¼šå¹²æ‰°åˆ°åžƒåœ¾å›žæ”¶æœºåˆ¶çš„å†…å­˜æ•æ„Ÿæ€§ç¼“å­˜ï¼Œè¿˜å¯ä»¥æ»¡è¶³å°è£…çš„ä¸¥è°¨æ€§åŠä¿¡æ¯çš„éšè—æ€§éœ€æ±‚ã€‚ Generatorsç”Ÿæˆå™¨Generatorsæ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒèƒ½å¤Ÿæš‚åœè‡ªèº«çš„æ‰§è¡Œå¹¶åœ¨ä¸€æ®µæ—¶é—´åŽå†ç»§ç»­è¿è¡Œï¼Œä»Žè€Œå…è®¸å…¶å®ƒçš„ä»£ç åœ¨æ­¤æœŸé—´è¿è¡Œ(æœ‰å…³è¯¥ä¸»é¢˜çš„è¯¦ç»†è¯´æ˜Žï¼Œè¯·å‚é˜…å®Œæ•´çš„â€œjavascriptç”Ÿæˆå™¨æŒ‡å—â€)ã€‚ Generatorsçš„ä»£ç å†³å®šå®ƒå¿…é¡»ç­‰å¾…ï¼Œå› æ­¤å®ƒå…è®¸é˜Ÿåˆ—ä¸­çš„å…¶å®ƒä»£ç è¿è¡Œï¼Œå¹¶ä¿ç•™â€œå½“å®ƒç­‰å¾…çš„äº‹æƒ…â€å®Œæˆæ—¶æ¢å¤å…¶æ“ä½œçš„æƒåŠ›ã€‚ æ‰€æœ‰è¿™ä¸€åˆ‡éƒ½æ˜¯é€šè¿‡ä¸€ä¸ªç®€å•çš„å…³é”®å­—â€œyield`â€å®Œæˆçš„ã€‚å½“ç”Ÿæˆå™¨åŒ…å«è¯¥å…³é”®å­—æ—¶ï¼Œå°†åœæ­¢æ‰§è¡Œã€‚ generatorç”Ÿæˆå™¨å¯ä»¥åŒ…å«è®¸å¤šyieldå…³é”®å­—ï¼Œä»Žè€Œä½¿è‡ªå·±èƒ½å¤šæ¬¡åœæ­¢è¿è¡Œï¼Œå®ƒæ˜¯ç”±*functionå…³é”®å­—æ ‡è¯†(ä¸è¦å°†å…¶ä¸ŽCã€C++æˆ–Goç­‰ä½Žçº§è¯­è¨€ä¸­ä½¿ç”¨çš„å–æ¶ˆæŒ‡é’ˆå¼•ç”¨æ“ä½œç¬¦æ··æ·†)ã€‚ Generatorsæ”¯æŒJavaScriptä¸­å…¨æ–°çš„ç¼–ç¨‹èŒƒå¼ï¼ŒåŒ…æ‹¬ï¼š åœ¨generatorè¿è¡Œæ—¶æ”¯æŒåŒå‘é€šä¿¡ ä¸ä¼šâ€œå†»ç»“â€é•¿æœŸè¿è¡Œåœ¨ç¨‹åºä¸­çš„whileå¾ªçŽ¯ è¿™é‡Œæœ‰ä¸€ä¸ªè§£é‡Šgeneratorå¦‚ä½•å·¥ä½œçš„ä¾‹å­ï¼š 12345function *calculator(input) &#123; var doubleThat = 2 * (yield (input / 2)) var another = yield (doubleThat) return (input * doubleThat * another)&#125; æˆ‘ä»¬å…ˆåˆå§‹åŒ–å®ƒï¼š 1const calc = calculator(10) ç„¶åŽæˆ‘ä»¬åœ¨generatorä¸­å¼€å§‹è¿›è¡Œiteratorè¿­ä»£ï¼š calc.next()ç¬¬ä¸€ä¸ªè¿­ä»£å™¨å¼€å§‹äº†è¿­ä»£ï¼Œä»£ç è¿”å›žå¦‚ä¸‹objectå¯¹è±¡ï¼š 1234&#123; done:false value:5&#125; å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼šä»£ç è¿è¡Œäº†å‡½æ•°ï¼Œå¹¶æŠŠinput=10ä¼ å…¥åˆ°ç”Ÿæˆå™¨æž„é€ å‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°ä¸€ç›´è¿è¡Œç›´åˆ°æŠµè¾¾yieldï¼Œå¹¶è¿”å›žyieldè¾“å‡ºçš„å†…å®¹: input / 2 = 5ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¾—åˆ°çš„å€¼ä¸º5ï¼Œå¹¶å‘ŠçŸ¥è¿­ä»£å™¨è¿˜æ²¡æœ‰done(å‡½æ•°åªæ˜¯æš‚åœäº†)ã€‚ åœ¨ç¬¬äºŒä¸ªè¿­ä»£å¤„ï¼Œæˆ‘ä»¬è¾“å…¥7ï¼š 1calc.next(7) ç„¶åŽæˆ‘ä»¬å¾—åˆ°äº†ç»“æžœï¼š 1234&#123; done:false value:14&#125; 7è¢«ä½œä¸ºdoubleThatçš„å€¼ï¼Œæ³¨æ„ï¼šä½ å¯èƒ½ä¼šæŠŠinput/2ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œä½†è¿™åªæ˜¯ç¬¬ä¸€æ¬¡è¿­ä»£çš„è¿”å›žå€¼ã€‚çŽ°åœ¨æˆ‘ä»¬å¿½ç•¥å®ƒï¼Œä½¿ç”¨æ–°çš„è¾“å…¥å€¼7ï¼Œå¹¶å°†å…¶ä¹˜ä»¥2. ç„¶åŽï¼Œæˆ‘ä»¬å¾—åˆ°ç¬¬äºŒä¸ªyieldçš„å€¼ï¼Œå®ƒè¿”å›ždoubleThatï¼Œå› æ­¤è¿”å›žå€¼ä¸º14ã€‚ åœ¨ä¸‹ä¸€ä¸ªï¼Œä¹Ÿæ˜¯æœ€åŽä¸€ä¸ªè¿­ä»£å™¨ï¼Œæˆ‘ä»¬è¾“å…¥100 1calc.next(100) è¿™æ ·æˆ‘ä»¬å¾—åˆ°: 1234&#123; done:true value:14000&#125; å½“è¿­ä»£å™¨å®Œæˆæ—¶(æ²¡æœ‰æ›´å¤šçš„yieldå…³é”®å­—)ï¼Œæˆ‘ä»¬è¿”å›žinput doubleThat anotherï¼Œè¿™ç›¸å½“äºŽ10 14100ã€‚ è¿™äº›éƒ½æ˜¯åœ¨2015å¹´çš„ES2015å¼•å…¥çš„ç‰¹æ€§ï¼ŒçŽ°åœ¨æˆ‘ä»¬æ·±å…¥äº†è§£ä¸‹ES2016ï¼Œå®ƒçš„ä½œç”¨åŸŸèŒƒå›´æ›´å°ã€‚ Array.prototype.includes()è¯¥ç‰¹æ€§å¼•å…¥äº†ä¸€ç§æ›´ç®€æ´çš„è¯­æ³•ï¼ŒåŒæ¥æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ ã€‚ å¯¹äºŽES6åŠæ›´ä½Žç‰ˆæœ¬ï¼Œæƒ³è¦æ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ ï¼Œä½ ä¸å¾—ä¸ä½¿ç”¨indexOfæ–¹æ³•ï¼Œå®ƒæ£€æŸ¥æ•°ç»„ä¸­çš„ç´¢å¼•ï¼Œå¦‚æžœå…ƒç´ ä¸å­˜åœ¨ï¼Œå®ƒè¿”å›ž-1ï¼Œç”±äºŽ-1è¢«è®¡ç®—ä¸ºtrueï¼Œä½ éœ€å¯¹å…¶è¿›è¡Œå–åæ“ä½œï¼Œä¾‹å­å¦‚ä¸‹ï¼š 123if (![1,2].indexOf(3)) &#123; console.log('Not found')&#125; é€šè¿‡ES7å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚æ­¤åšï¼š 123if (![1,2].includes(3)) &#123; console.log('Not found')&#125; æ±‚å¹‚è¿ç®—ç¬¦æ±‚å¹‚è¿ç®—ç¬¦**ç›¸å½“äºŽMath.pow()æ–¹æ³•ï¼Œä½†æ˜¯å®ƒä¸æ˜¯ä¸€ä¸ªå‡½æ•°åº“ï¼Œè€Œæ˜¯ä¸€ç§è¯­è¨€æœºåˆ¶ï¼š 1Math.pow(4, 2) == 4 ** 2 å¯¹äºŽéœ€è¦è¿›è¡Œå¯†é›†æ•°å­¦è¿ç®—çš„ç¨‹åºæ¥è¯´ï¼Œè¿™ä¸ªç‰¹æ€§æ˜¯ä¸ªå¾ˆå¥½çš„å¢žå¼ºï¼Œåœ¨å¾ˆå¤šè¯­è¨€ä¸­ï¼Œ**è¿ç®—ç¬¦éƒ½æ˜¯æ ‡å‡†(åŒ…æ‹¬Pythonã€Rubyã€MATLABã€Perlç­‰å…¶å®ƒå¤šç§è¯­è¨€)ã€‚ è¿™äº›éƒ½æ˜¯2016å¹´å¼•å…¥çš„ç‰¹æ€§ï¼ŒçŽ°åœ¨è®©æˆ‘ä»¬è¿›å…¥2017å¹´ã€‚ å­—ç¬¦ä¸²å¡«å……å­—ç¬¦ä¸²å¡«å……çš„ç›®çš„æ˜¯ç»™å­—ç¬¦ä¸²æ·»åŠ å­—ç¬¦ï¼Œä»¥ä½¿å…¶è¾¾åˆ°æŒ‡å®šé•¿åº¦ã€‚ ES2017å¼•å…¥äº†ä¸¤ä¸ªStringæ–¹æ³•ï¼špadStart()å’ŒpadEnd()ã€‚ 12padStart(targetLength [, padString])padEnd(targetLength [, padString]) ä½¿ç”¨ä¾‹å­ï¼š Object.values()è¯¥æ–¹æ³•è¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åŒ…å«äº†å¯¹è±¡è‡ªå·±çš„æ‰€æœ‰å±žæ€§ï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š 12const person = &#123; name:'Fred', age:87 &#125;Object.values(person) // ['Fred', 87] Object.values()ä¹Ÿå¯ä»¥ä½œç”¨äºŽæ•°ç»„ï¼š 12const people = ['Fred', 'Tony']Object.values(people) // ['Fred', 'Tony'] Object.entries()è¯¥æ–¹æ³•è¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„åŒ…å«äº†å¯¹è±¡è‡ªå·±çš„æ‰€æœ‰å±žæ€§é”®å€¼å¯¹ï¼Œæ˜¯ä¸€ä¸ª[key, value]å½¢å¼çš„æ•°ç»„ï¼Œä½¿ç”¨å¦‚ä¸‹ï¼š 12const person = &#123; name:'Fred', age:87 &#125;Object.entries(person) // [['name', 'Fred'], ['age', 87]] Object.entries()ä¹Ÿå¯ä»¥ä½œç”¨äºŽæ•°ç»„ï¼š 12const people = ['Fred', 'Tony']Object.entries(people) // [['0', 'Fred'], ['1', 'Tony']] Object.getOwnPropertyDescriptors()è¯¥æ–¹æ³•è¿”å›žè‡ªå·±(éžç»§æ‰¿)çš„æ‰€æœ‰å±žæ€§æè¿°ç¬¦ï¼ŒJavaScriptä¸­çš„ä»»ä½•å¯¹è±¡éƒ½æœ‰ä¸€ç»„å±žæ€§ï¼Œæ¯ä¸ªå±žæ€§éƒ½æœ‰ä¸€ä¸ªæè¿°ç¬¦ï¼Œæè¿°ç¬¦æ˜¯å±žæ€§çš„ä¸€ç»„å±žæ€§(attributes)ï¼Œç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š value: ç†Ÿæ‚‰çš„valueå€¼ writable: å±žæ€§æ˜¯å¦å¯ä»¥è¢«æ›´æ”¹ get: å±žæ€§çš„getterå‡½æ•°, å½“å±žæ€§è¯»å–æ—¶è¢«è°ƒç”¨ set: å±žæ€§çš„setterå‡½æ•°, å½“å±žæ€§è®¾ç½®å€¼æ—¶è¢«è°ƒç”¨ configurable: å¦‚æžœä¸ºfalse, ä¸èƒ½åˆ é™¤è¯¥å±žæ€§ï¼Œé™¤äº†å®ƒçš„valueå€¼ä»¥ä¸ºï¼Œä¹Ÿä¸èƒ½æ›´æ”¹ä»»ä½•å±žæ€§ã€‚ enumerable: è¯¥å±žæ€§æ˜¯å¦èƒ½æžšä¸¾ Object.getOwnPropertyDescriptors(obj)æŽ¥å—ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶è¿”å›žä¸€ä¸ªå¸¦æœ‰æè¿°ç¬¦é›†åˆçš„å¯¹è±¡ã€‚ In what way is this useful?ES6ç»™æˆ‘ä»¬æä¾›äº†Object.assign()æ–¹æ³•ï¼Œå®ƒä»Žä¸€ä¸ªä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ä¸­å¤åˆ¶æ‰€æœ‰å¯æžšä¸¾çš„å±žæ€§å€¼ï¼Œå¹¶è¿”å›žä¸€ä¸ªæ–°å¯¹è±¡ã€‚ ä½†æ˜¯ï¼Œè¿™ä¹Ÿå­˜åœ¨ç€ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒä¸èƒ½æ­£ç¡®çš„å¤åˆ¶ä¸€ä¸ªå…·æœ‰éžé»˜è®¤å±žæ€§å€¼çš„å±žæ€§ã€‚ å¦‚æžœå¯¹è±¡åªæœ‰ä¸€ä¸ªsetterï¼Œé‚£ä¹ˆå®ƒå°±ä¸ä¼šæ­£ç¡®çš„å¤åˆ¶åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ä¸Šï¼Œä½¿ç”¨Object.assign()è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š 12345const person1 = &#123; set name(newName) &#123; console.log(newName) &#125;&#125; è¿™å°†ä¸ä¼šèµ·ä½œç”¨ï¼š 12const person2 = &#123;&#125;Object.assign(person2, person1) ä½†è¿™å°†ä¼šèµ·ä½œç”¨ï¼š 123const person3 = &#123;&#125;Object.defineProperties(person3, Object.getOwnPropertyDescriptors(person1)) é€šè¿‡ä¸€ä¸ªç®€å•çš„consoleæŽ§åˆ¶å°ï¼Œä½ å¯ä»¥æŸ¥çœ‹ä»¥ä¸‹ä»£ç ï¼š 12345person1.name = 'x'"x"person2.name = 'x'person3.name = 'x'"x" person2æ²¡æœ‰setterï¼Œå®ƒæ²¡èƒ½å¤åˆ¶è¿›åŽ»ï¼Œå¯¹è±¡çš„æµ…å¤åˆ¶é™å®šä¹Ÿå‡ºçŽ°åœ¨Object.create()æ–¹æ³•ä¸­ã€‚ å°¾é€—å·è¯¥ç‰¹æ€§å…è®¸åœ¨å‡½æ•°å®šä¹‰æ—¶æœ‰å°¾é€—å·ï¼Œåœ¨å‡½æ•°ä½¿ç”¨æ—¶å¯ä»¥æœ‰å°¾é€—å·ï¼š 1234const doSomething = (var1, var2,) =&gt; &#123; //...&#125;doSomething('test2', 'test2',) è¯¥æ”¹å˜å°†é¼“åŠ±å¼€å‘è€…åœæ­¢â€œåœ¨ä¸€è¡Œå¼€å§‹æ—¶å†™é€—å·â€çš„ä¸‘é™‹ä¹ æƒ¯ å¼‚æ­¥å‡½æ•°JavaScriptåœ¨å¾ˆçŸ­çš„æ—¶é—´å†…ä»Žå›žè°ƒå‡½æ•°è¿›åŒ–åˆ°Promiseå‡½æ•°(ES2015)ï¼Œå¹¶è‡ªä»ŽES2017ä»¥æ¥ï¼Œå¼‚æ­¥JavaScriptçš„async/waitè¯­æ³•å˜å¾—æ›´åŠ ç®€å•ã€‚ å¼‚æ­¥å‡½æ•°æ˜¯Promiseå’Œgeneratorçš„ç»“åˆï¼ŒåŸºæœ¬ä¸Šï¼Œå®ƒæ˜¯æ¯”Promiseæ›´é«˜çº§çš„æŠ½è±¡ï¼Œæˆ‘å†é‡å¤ä¸€èˆ¬ï¼šasync/awaitæ˜¯åŸºäºŽPromiseå»ºç«‹çš„ ä¸ºä»€ä¹ˆè¦å¼•å…¥async/awaitå®ƒå‡å°‘äº†å›´ç»•promiseçš„å¼•ç”¨ï¼Œå¹¶æ‰“ç ´äº†Promise â€” â€œä¸è¦æ‰“æ–­é“¾å¼è°ƒç”¨â€çš„é™åˆ¶ã€‚ å½“Promiseåœ¨ES2015ä¸­å¼•å…¥æ—¶ï¼Œå®ƒçš„æœ¬æ„æ˜¯æ¥è§£å†³å¼‚æ­¥ä»£ç çš„é—®é¢˜ï¼Œå®ƒä¹Ÿç¡®å®žåšåˆ°äº†ï¼Œä½†åœ¨ES2015å’ŒES2017é—´éš”çš„è¿™ä¸¤å¹´ä¸­ï¼Œå¤§å®¶æ„è¯†åˆ°ï¼šPromiseä¸æ˜¯è§£å†³é—®é¢˜çš„ç»ˆæžæ–¹æ¡ˆã€‚ Promiseæ˜¯ä¸ºäº†è§£å†³è‘—åçš„å›žè°ƒåœ°ç‹±è€Œè¢«å¼•å…¥çš„ï¼Œä½†å®ƒæœ¬èº«ä¹Ÿå¸¦æ¥äº†ä½¿ç”¨å¤æ‚æ€§å’Œè¯­æ³•å¤æ‚æ€§ã€‚ Promiseæ˜¯å¾ˆå¥½çš„åŽŸç”Ÿç‰¹æ€§ï¼Œå›´ç»•ç€å®ƒå¼€å‘äººå‘˜å¯ä»¥æŽ¢ç´¢å‡ºæ›´å¥½çš„è¯­æ³•ï¼Œå› æ­¤å½“æ—¶æœºæˆç†ŸåŽï¼Œæˆ‘ä»¬å¾—åˆ°äº†asyncå‡½æ•° asyncå‡½æ•°ä½¿ä»£ç çœ‹èµ·æ¥åƒæ˜¯åŒæ­¥å‡½æ•°ä¸€æ ·ï¼Œä½†å…¶èƒŒåŽå´æ˜¯å¼‚æ­¥å’Œéžå µå¡žçš„ã€‚ å®ƒå¦‚ä½•å·¥ä½œä¸€ä¸ªasyncå‡½æ•°ä¼šè¿”å›žä¸€ä¸ªpromiseï¼Œå¦‚ä¸‹ä¾‹ï¼š 12345const doSomethingAsync = () =&gt; &#123; return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; resolve('I did something'), 3000) &#125;)&#125; å½“ä½ æƒ³è¦è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œä½ åœ¨å‰é¢åŠ ä¸Šäº†ä¸€ä¸ªwaitï¼Œè¿™æ ·è°ƒç”¨å°±ä¼šè¢«åœæ­¢ï¼Œç›´åˆ°è¯¥promiseè¿›è¡Œresolveæˆ–rejectï¼Œéœ€æ³¨æ„çš„æ˜¯ï¼šå¤–å±‚å‡½æ•°å¿…é¡»å®šä¹‰ä¸ºasyncï¼Œè¿™æ˜¯ä¾‹å­ï¼š 123const doSomething = async () =&gt; &#123; console.log(await doSomethingAsync())&#125; ä¸€ä¸ªä¸Šæ‰‹ç¤ºä¾‹è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨async/awaitè¿›è¡Œå¼‚æ­¥å‡½æ•°çš„ç®€å•ç¤ºä¾‹ï¼š 1234567891011const doSomethingAsync = () =&gt; &#123; return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; resolve('I did something'), 3000) &#125;)&#125;const doSomething = async () =&gt; &#123; console.log(await doSomethingAsync())&#125;console.log('Before')doSomething()console.log('After') ä¸Šé¢çš„ä»£ç å°†ä¼šåœ¨æµè§ˆå™¨çš„consoleä¸­æ‰“å°å‡ºå¦‚ä¸‹ç»“æžœï¼š 123BeforeAfterI did something //after 3s å…³äºŽ Promiseå°† async å…³é”®å­—æ ‡è®°åœ¨ä»»ä½•å‡½æ•°ä¸Šï¼Œæ„å‘³ç€è¿™ä¸ªå‡½æ•°éƒ½å°†è¿”å›žä¸€ä¸ª Promiseï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°æ²¡æœ‰æ˜¾å¼çš„è¿”å›žï¼Œå®ƒåœ¨å†…éƒ¨ä¹Ÿä¼šè¿”å›žä¸€ä¸ª Promiseï¼Œè¿™å°±æ˜¯ä¸‹é¢è¿™ä»½ä»£ç æœ‰æ•ˆçš„åŽŸå› ï¼š 1234const aFunction = async () =&gt; &#123; return 'test'&#125;aFunction().then(alert) // This will alert 'test' ä¸‹é¢çš„ä¾‹å­ä¹Ÿä¸€æ ·: 1234const aFunction = async () =&gt; &#123; return Promise.resolve('test')&#125;aFunction().then(alert) // This will alert 'test' æ›´æ˜“äºŽé˜…è¯»çš„ä»£ç æ­£å¦‚ä¸Šè¿°çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°†å®ƒä¸Žæ™®é€šå›žè°ƒå‡½æ•°æˆ–é“¾å¼å‡½æ•°è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬çš„ä»£ç çœ‹èµ·æ¥éžå¸¸çš„ç®€å•ã€‚ è¿™æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼Œå½“ä»£ç è¶³å¤Ÿå¤æ‚æ—¶ï¼Œå®ƒä¼šäº§ç”Ÿæ›´å¤šçš„æ”¶ç›Šã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ Promise æ¥èŽ·å– JSON èµ„æºå¹¶è§£æžå®ƒï¼š 12345678const getFirstUserData = () =&gt; &#123; return fetch('/users.json') // get users list .then(response =&gt; response.json()) // parse JSON .then(users =&gt; users[0]) // pick first user .then(user =&gt; fetch(`/users/$&#123;user.name&#125;`)) // get user data .then(userResponse =&gt; response.json()) // parse JSON&#125;getFirstUserData() è¿™æ˜¯ä½¿ç”¨ async/await å®žçŽ°ç›¸åŒåŠŸèƒ½çš„ä¾‹å­ï¼š 123456789const getFirstUserData = async () =&gt; &#123; const response = await fetch('/users.json') // get users list const users = await response.json() // parse JSON const user = users[0] // pick first user const userResponse = await fetch(`/users/$&#123;user.name&#125;`) // get user data const userData = await user.json() // parse JSON return userData&#125;getFirstUserData() ä¸²è¡Œå¤šä¸ªå¼‚æ­¥åŠŸèƒ½async å‡½æ•°éžå¸¸å®¹æ˜“ï¼Œå¹¶ä¸”å®ƒçš„è¯­æ³•æ¯” Promise æ›´æ˜“è¯»ã€‚ 12345678910111213141516const promiseToDoSomething = () =&gt; &#123; return new Promise(resolve =&gt; &#123; setTimeout(() =&gt; resolve('I did something'), 10000) &#125;)&#125;const watchOverSomeoneDoingSomething = async () =&gt; &#123; const something = await promiseToDoSomething() return something + ' and I watched'&#125;const watchOverSomeoneWatchingSomeoneDoingSomething = async () =&gt; &#123; const something = await watchOverSomeoneDoingSomething() return something + ' and I watched as well'&#125;watchOverSomeoneWatchingSomeoneDoingSomething().then(res =&gt; &#123; console.log(res)&#125;) æ‰“å°ç»“æžœ: 1I did something and I watched and I watched as well æ›´ç®€å•çš„è°ƒè¯•è°ƒè¯• Promise å°±å¾ˆå›°éš¾ï¼Œå› ä¸ºè°ƒè¯•å™¨æ— æ³•è·¨è¶Šå¼‚æ­¥ä»£ç ï¼Œä½†è°ƒè¯• async/await å°±éžå¸¸çš„ç®€å•ï¼Œè°ƒè¯•å™¨ä¼šåƒè°ƒè¯•åŒæ­¥ä»£ç ä¸€æ ·æ¥å¤„ç†å®ƒã€‚ å…±äº«å†…å­˜å’ŒåŽŸå­WebWorkers å¯ä»¥åœ¨æµè§ˆå™¨ä¸­åˆ›å»ºå¤šçº¿ç¨‹ç¨‹åºã€‚ å®ƒä»¬é€šè¿‡äº‹ä»¶çš„æ–¹å¼æ¥ä¼ é€’æ¶ˆæ¯ï¼Œä»Ž ES2017 å¼€å§‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ SharedArrayBuffer åœ¨æ¯ä¸€ä¸ª Worker ä¸­å’Œå®ƒä»¬çš„åˆ›å»ºè€…ä¹‹é—´å…±äº«å†…å­˜æ•°ç»„. ç”±äºŽä¸çŸ¥é“å†™å…¥å†…å­˜éƒ¨åˆ†éœ€è¦å¤šé•¿çš„å‘¨æœŸæ¥å¹¿æ’­ï¼Œå› æ­¤åœ¨è¯»å–å€¼æ—¶ï¼Œä»»ä½•ç±»åž‹çš„å†™å…¥æ“ä½œéƒ½ä¼šå®Œæˆï¼ŒAtomics å¯ä»¥é¿å…ç«žäº‰æ¡ä»¶çš„å‘ç”Ÿã€‚ å…³äºŽå®ƒçš„æ›´å¤šç»†èŠ‚å¯ä»¥åœ¨proposalä¸­æ‰¾åˆ°ã€‚ è¿™æ˜¯ ES2017ï¼ŒæŽ¥ä¸‹æ¥æˆ‘å°†ä»‹ç» ES2018 çš„åŠŸèƒ½ã€‚ Rest/Spread PropertiesES2015 å¼•å…¥äº†è§£æž„æ•°ç»„çš„æ–¹æ³•ï¼Œå½“ä½ ä½¿ç”¨æ—¶ï¼š 12const numbers = [1, 2, 3, 4, 5][first, second, ...others] = numbers and å±•å¼€å‚æ•°: 123const numbers = [1, 2, 3, 4, 5]const sum = (a, b, c, d, e) =&gt; a + b + c + d + econst sum = sum(...numbers) ES2018 ä¸ºå¯¹è±¡å¼•å…¥äº†åŒæ ·çš„åŠŸèƒ½ã€‚ è§£æž„: 1234const &#123; first, second, ...others &#125; = &#123; first:1, second:2, third:3, fourth:4, fifth:5 &#125;first // 1second // 2others // &#123; third: 3, fourth: 4, fifth: 5 &#125; å±•å¼€å±žæ€§ å…è®¸é€šè¿‡ç»„åˆåœ¨å±•å¼€è¿ç®—ç¬¦ä¹‹åŽä¼ é€’çš„å¯¹è±¡å±žæ€§è€Œåˆ›å»ºæ–°å¯¹è±¡ï¼š 12const items = &#123; first, second, ...others &#125;items //&#123; first: 1, second: 2, third: 3, fourth: 4, fifth: 5 &#125; å¼‚æ­¥è¿­ä»£å™¨for-await-of å…è®¸ä½ ä½¿ç”¨å¼‚æ­¥å¯è¿­ä»£å¯¹è±¡åšä¸ºå¾ªçŽ¯è¿­ä»£ï¼š 123for await (const line of readLines(filePath)) &#123; console.log(line)&#125; å› ä¸ºå®ƒä½¿ç”¨çš„äº† awaitï¼Œå› æ­¤ä½ åªèƒ½åœ¨ async å‡½æ•°ä¸­ä½¿ç”¨å®ƒã€‚ Promise.prototype.finally()å½“ä¸€ä¸ª Promise æ˜¯ fulfilled æ—¶ï¼Œå®ƒä¼šä¸€ä¸ªæŽ¥ä¸€ä¸ªçš„è°ƒç”¨ thenã€‚ å¦‚æžœåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œåˆ™ä¼šè·³è¿‡ then è€Œæ‰§è¡Œ catchã€‚ è€Œ finally() å…è®¸ä½ è¿è¡Œä¸€äº›ä»£ç ï¼Œæ— è®ºæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼š 1234fetch('file.json') .then(data =&gt; data.json()) .catch(error =&gt; console.error(error)) .finally(() =&gt; console.log('finished')) æ­£åˆ™è¡¨è¾¾å¼æ”¹è¿›ES2018 å¯¹æ­£åˆ™è¡¨è¾¾å¼å¼•å…¥äº†è®¸å¤šæ”¹è¿›ï¼Œè¿™äº›éƒ½å¯ä»¥åœ¨ https://flaviocopes.com/javascript-regular-expressions/ ä¸Šæ‰¾åˆ°ã€‚ ä»¥ä¸‹æ˜¯å…³äºŽ ES2018 æ­£åˆ™è¡¨è¾¾å¼æ”¹è¿›çš„å…·ä½“è¡¥å……ï¼š RegExp lookbehind assertions: æ ¹æ®å‰é¢çš„å†…å®¹åŒ¹é…å­—ç¬¦ä¸² è¿™æ˜¯ä¸€ä¸ª lookahead: ä½ å¯ä»¥ä½¿ç”¨ ?= æ¥åŒ¹é…å­—ç¬¦ä¸²ï¼ŒåŽé¢è·Ÿéšä¸€ä¸ªç‰¹å®šçš„å­—ç¬¦ä¸²ï¼š 123/Roger(?=Waters)//Roger(?=Waters)/.test('Roger is my dog') //false/Roger(?=Waters)/.test('Roger is my dog and Roger Waters is a famous musician') //true ?! å¯ä»¥æ‰§è¡Œé€†æ“ä½œï¼Œå¦‚æžœåŒ¹é…çš„å­—ç¬¦ä¸²æ˜¯noè€Œä¸æ˜¯åœ¨æ­¤åŽè·Ÿéšç‰¹å®šçš„å­å­—ç¬¦ä¸²çš„è¯ï¼š 123/Roger(?!Waters)//Roger(?!Waters)/.test('Roger is my dog') //true/Roger(?!Waters)/.test('Roger Waters is a famous musician') //false Lookaheads ä½¿ç”¨ ?= Symbolï¼Œå®ƒä»¬å·²ç»å¯ä»¥ç”¨äº†ã€‚ Lookbehinds, æ˜¯ä¸€ä¸ªæ–°åŠŸèƒ½ä½¿ç”¨?&lt;=. 123/(?&lt;=Roger) Waters//(?&lt;=Roger) Waters/.test('Pink Waters is my dog') //false/(?&lt;=Roger) Waters/.test('Roger is my dog and Roger Waters is a famous musician') //true å¦‚æžœä¸€ä¸ª lookbehind æ˜¯å¦å®šï¼Œé‚£ä¹ˆä½¿ç”¨ ?&gt;!: 123/(?&lt;!Roger) Waters//(?&lt;!Roger) Waters/.test('Pink Waters is my dog') //true/(?&lt;!Roger) Waters/.test('Roger is my dog and Roger Waters is a famous musician') //false Unicodeå±žæ€§è½¬ä¹‰ p{â€¦} and P{â€¦}åœ¨æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ d æ¥åŒ¹é…ä»»æ„çš„æ•°å­—ï¼Œs æ¥åŒ¹é…ä»»æ„ä¸æ˜¯ç©ºæ ¼çš„å­—ç¬¦ä¸²ï¼Œw æ¥åŒ¹é…ä»»æ„å­—æ¯æ•°å­—å­—ç¬¦ä¸²ï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ This new feature extends this concept to all Unicode characters introducing p{} and is negation P{}. è¿™ä¸ªæ–°åŠŸèƒ½æ‰©å±•äº†unicodeå­—ç¬¦ï¼Œå¼•å…¥äº† p{} æ¥å¤„ç† ä»»ä½• unicode å­—ç¬¦éƒ½æœ‰ä¸€ç»„å±žæ€§ï¼Œä¾‹å¦‚ script ç¡®è®¤è¯­è¨€ï¼ŒASCII æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ç”¨äºŽæ£€æŸ¥ ASCII å­—ç¬¦ã€‚ä½ å¯ä»¥å°†æ­¤å±žæ€§æ–¹åœ¨() ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°†æ¥æ£€æŸ¥æ˜¯å¦ä¸ºçœŸã€‚ 123/^p&#123;ASCII&#125;+$/u.test('abc') //âœ…/^p&#123;ASCII&#125;+$/u.test('ABC@') //âœ…/^p&#123;ASCII&#125;+$/u.test('ABCðŸ™ƒ') //âŒ ASCII_Hex_Digit æ˜¯å¦ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºŽæ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„åå…­è¿›åˆ¶æ•°å­—ï¼š 12/^p&#123;ASCII_Hex_Digit&#125;+$/u.test('0123456789ABCDEF') //âœ…/^p&#123;ASCII_Hex_Digit&#125;+$/u.test('h') //âŒ æ­¤å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶å®ƒçš„å±žæ€§ã€‚ä½ å¯ä»¥åœ¨()ä¸­æ·»åŠ å®ƒä»¬çš„åå­—æ¥æ£€æŸ¥å®ƒä»¬ï¼ŒåŒ…æ‹¬ Uppercase, Lowercase, White_Space, Alphabetic, Emojiç­‰ç­‰ï¼š 1234/^p&#123;Lowercase&#125;$/u.test('h') //âœ…/^p&#123;Uppercase&#125;$/u.test('H') //âœ…/^p&#123;Emoji&#125;+$/u.test('H') //âŒ/^p&#123;Emoji&#125;+$/u.test('ðŸ™ƒðŸ™ƒ') //âœ… é™¤äº†äºŒè¿›åˆ¶å±žæ€§å¤–ï¼Œä½ è¿˜å¯ä»¥æ£€æŸ¥ä»»ä½• unicode å­—ç¬¦å±žæ€§ä»¥åŒ¹é…ç‰¹å®šçš„å€¼ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯ç”¨å¸Œè…Šè¯­è¿˜æ˜¯æ‹‰ä¸å­—æ¯å†™çš„ï¼š 12/^p&#123;Script=Greek&#125;+$/u.test(&apos;ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬&apos;) //âœ…/^p&#123;Script=Latin&#125;+$/u.test(&apos;hey&apos;) //âœ… é˜…è¯»https://github.com/tc39/proposal-regexp-unicode-property-escapes èŽ·å–ä½¿ç”¨æ‰€æœ‰å±žæ€§çš„è¯¦ç»†ä¿¡æ¯ã€‚ Named capturing groupsIn ES2018 a capturing group can be assigned to a name, rather than just being assigned a slot in the result array: 123456789101112const re = /(?&lt;year&gt;d&#123;4&#125;)-(?&lt;month&gt;d&#123;2&#125;)-(?&lt;day&gt;d&#123;2&#125;)/const result = re.exec('2015-01-02')// result.groups.year === '2015';// result.groups.month === '01';// result.groups.day === '02';The s flag for regular expressionsThe s flag, short for single line, causes the . to match new line characters as well. Without it, the dot matches regular characters but not the new line:/hi.welcome/.test('hiwelcome') // false/hi.welcome/s.test('hiwelcome') // true ESNextä»€ä¹ˆæ˜¯ ESNext ï¼Ÿ ESNext æ˜¯ä¸€ä¸ªå§‹ç»ˆæŒ‡å‘ä¸‹ä¸€ä¸ªç‰ˆæœ¬ JavaScript çš„åç§°ã€‚ å½“å‰çš„ ECMAScript ç‰ˆæœ¬æ˜¯ ES2018ï¼Œå®ƒäºŽ2018å¹´6æœˆè¢«å‘å¸ƒã€‚ åŽ†å²ä¸Š JavaScript æ ‡å‡†åŒ–çš„ç‰ˆæœ¬éƒ½æ˜¯åœ¨å¤å­£è¢«å‘å¸ƒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é¢„æœŸ ECMAScript 2019 å°†äºŽ 2019 å¹´çš„å¤å­£è¢«å‘å¸ƒã€‚ æ‰€ä»¥åœ¨ç¼–å†™æœ¬æ–‡æ—¶ ES2018 å·²ç»è¢«å‘å¸ƒï¼Œå› æ­¤ ESNext æŒ‡çš„æ˜¯ ES2019ã€‚ ECMAScript æ ‡å‡†çš„ææ¡ˆæ˜¯åˆ†é˜¶æ®µç»„ç»‡çš„ï¼Œç¬¬ä¸€åˆ°ç¬¬ä¸‰é˜¶æ®µå±žäºŽåŠŸèƒ½æ€§çš„å­µåŒ–ï¼Œç¬¬å››é˜¶æ®µçš„åŠŸèƒ½æ‰æœ€ç»ˆç¡®å®šä¸ºæ–°æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚ åœ¨ç¼–å†™æœ¬æ–‡æ—¶ä¸»è¦æµè§ˆå™¨éƒ½å®žçŽ°äº†ç¬¬å››é˜¶æ®µå¤§éƒ¨åˆ†çš„åŠŸèƒ½ï¼Œå› æ­¤æˆ‘å°†åœ¨æœ¬æ–‡ä¸­ä»‹ç»å®ƒä»¬ã€‚ å…¶ä¸­ä¸€äº›å˜åŒ–ä¸»è¦åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œä½†çŸ¥é“å‘ç”Ÿäº†ä»€ä¹ˆè¿™ä¹Ÿå¾ˆå¥½ã€‚ ç¬¬ä¸‰é˜¶æ®µè¿˜æœ‰ä¸€äº›å…¶å®ƒåŠŸèƒ½ï¼Œå¯èƒ½ä¼šåœ¨æŽ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆå†…å‡çº§åˆ°ç¬¬å››é˜¶æ®µï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ª Github ä»“åº“ä¸­æŸ¥çœ‹å®ƒä»¬ï¼šhttps://github.com/tc39/proposalsã€‚ 1Array.prototype.&#123;flat,flatMap&#125; flat() æ˜¯ä¸€ä¸ªæ–°çš„æ•°ç»„å®žä¾‹æ–¹æ³•ï¼Œå®ƒå¯ä»¥å°†å¤šç»´æ•°ç»„è½¬åŒ–æˆä¸€ç»´æ•°ç»„ã€‚ ä¾‹å­: 12['Dog', ['Sheep', 'Wolf']].flat()//[ 'Dog', 'Sheep', 'Wolf' ] é»˜è®¤æƒ…å†µä¸‹å®ƒåªèƒ½å°†äºŒç»´çš„æ•°ç»„è½¬åŒ–æˆä¸€ç»´çš„æ•°ç»„ï¼Œä½†ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå‚æ•°æ¥ç¡®å®šè¦å±•å¼€çš„çº§åˆ«ï¼Œå¦‚æžœä½ å°†è¿™ä¸ªå‚æ•°è®¾ç½®ä¸º Infinity é‚£ä¹ˆå®ƒå°†å±•å¼€æ— é™çš„çº§åˆ«åˆ°ä¸€ç»´æ•°ç»„ï¼š 123456['Dog', ['Sheep', ['Wolf']]].flat()//[ 'Dog', 'Sheep', [ 'Wolf' ] ]['Dog', ['Sheep', ['Wolf']]].flat(2)//[ 'Dog', 'Sheep', 'Wolf' ]['Dog', ['Sheep', ['Wolf']]].flat(Infinity)//[ 'Dog', 'Sheep', 'Wolf' ] å¦‚æžœä½ ç†Ÿæ‚‰æ•°ç»„çš„ map æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å°±çŸ¥é“ä½¿ç”¨å®ƒå¯ä»¥å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªå‡½æ•°ã€‚ flatMap() æ˜¯ä¸€ä¸ªæ–°çš„æ•°ç»„å®žä¾‹æ–¹æ³•ï¼Œå®ƒå°† flat() å’Œ map ç»“åˆäº†èµ·æ¥ï¼Œå½“ä½ æœŸæœ›åœ¨mapå‡½æ•°ä¸­åšä¸€äº›å¤„ç†æ—¶è¿™éžå¸¸æœ‰ç”¨ï¼ŒåŒæ—¶åˆå¸Œæœ›ç»“æžœå¦‚åŒ flat ï¼š 1234['My dog', 'is awesome'].map(words =&gt; words.split(' '))//[ [ 'My', 'dog' ], [ 'is', 'awesome' ] ]['My dog', 'is awesome'].flatMap(words =&gt; words.split(' '))//[ 'My', 'dog', 'is', 'awesome' ] Optional catch bindingæœ‰æ—¶å€™æˆ‘ä»¬å¹¶ä¸éœ€è¦å°†å‚æ•°ç»‘å®šåˆ° try/catch ä¸­ã€‚ åœ¨ä»¥å‰æˆ‘ä»¬ä¸å¾—ä¸è¿™æ ·åšï¼š 12345try &#123; //...&#125; catch (e) &#123; //handle error&#125; å³ä½¿æˆ‘ä»¬ä»Žæ¥æ²¡æœ‰é€šè¿‡ e æ¥åˆ†æžé”™è¯¯ï¼Œä½†çŽ°åœ¨æˆ‘ä»¬å¯ä»¥ç®€å•çš„çœç•¥å®ƒï¼š 1234567try &#123; //...&#125; catch &#123; //handle error&#125;Object.fromEntries()Objects have an entries() method, since ES2017. ä»Ž ES2017 å¼€å§‹ Objectå°†æœ‰ä¸€ä¸ª entries() æ–¹æ³•ã€‚ å®ƒå°†è¿”å›žä¸€ä¸ªåŒ…å«æ‰€æœ‰å¯¹è±¡è‡ªèº«å±žæ€§çš„æ•°ç»„çš„æ•°ç»„ï¼Œå¦‚[key, value]ï¼š 12const person = &#123; name:'Fred', age:87 &#125;Object.entries(person) // [['name', 'Fred'], ['age', 87]] ES2019 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„ Object.fromEntries() æ–¹æ³•ï¼Œå®ƒå¯ä»¥ä»Žä¸Šè¿°çš„å±žæ€§æ•°ç»„ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼š 123456const person = &#123; name:'Fred', age:87 &#125;const entries = Object.entries(person)const newPerson = Object.fromEntries(entries)person !== newPerson //trueString.prototype.&#123;trimStart,trimEnd&#125; è¿™äº›åŠŸèƒ½å·²ç»è¢« v8/Chrome å®žçŽ°äº†è¿‘ä¸€å¹´çš„æ—¶é—´ï¼Œå®ƒå°†åœ¨ ES2019 ä¸­å®žçŽ°æ ‡å‡†åŒ–ã€‚ trimStart()åˆ é™¤å­—ç¬¦ä¸²é¦–éƒ¨çš„ç©ºæ ¼å¹¶è¿”å›žä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼š 1234'Testing'.trimStart() //'Testing'' Testing'.trimStart() //'Testing'' Testing '.trimStart() //'Testing ''Testing'.trimStart() //'Testing' trimEnd()åˆ é™¤å­—ç¬¦ä¸²å°¾éƒ¨çš„ç©ºæ ¼å¹¶è¿”å›žä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼š 1234'Testing'.trimEnd() //'Testing'' Testing'.trimEnd() //' Testing'' Testing '.trimEnd() //' Testing''Testing '.trimEnd() //'Testing' Symbol.prototype.descriptionçŽ°åœ¨ä½ å¯ä»¥ä½¿ç”¨ description æ¥èŽ·å– Symbol çš„å€¼ï¼Œè€Œä¸å¿…ä½¿ç”¨ toString() æ–¹æ³•ï¼š 12const testSymbol = Symbol('Test')testSymbol.description // 'Test' JSON improvementsåœ¨æ­¤ä¹‹å‰ JSON å­—ç¬¦ä¸²ä¸­ä¸å…è®¸ä½¿ç”¨åˆ†éš”ç¬¦ï¼ˆï¼‰å’Œåˆ†éš”ç¬¦ï¼ˆï¼‰ã€‚ ä½¿ç”¨ JSON.parse æ—¶ï¼Œè¿™äº›å­—ç¬¦ä¼šå¯¼è‡´ä¸€ä¸ª SyntaxError é”™è¯¯ï¼Œä½†çŽ°åœ¨å®ƒä»¬å¯ä»¥æ­£ç¡®çš„è§£æžå¹¶å¦‚ JSON æ ‡å‡†å®šä¹‰çš„é‚£æ ·ã€‚ Well-formed JSON.stringify()ä¿®å¤ JSON.stringify() åœ¨å¤„ç† UTF-8 code points (U+D800 to U+DFFF)ã€‚ åœ¨ä¿®å¤ä¹‹å‰ï¼Œè°ƒç”¨ JSON.stringify() å°†è¿”å›žæ ¼å¼é”™è¯¯çš„ Unicode å­—ç¬¦ï¼Œå¦‚ï¼ˆa â€œï¿½â€)ã€‚ çŽ°åœ¨ä½ å¯ä»¥å®‰å…¨æ”¾å¿ƒçš„ä½¿ç”¨ JSON.stringify() è½¬æˆå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ JSON.parse() å°†å®ƒè½¬æ¢å›žåŽŸå§‹è¡¨ç¤ºçš„å½¢æ€ã€‚ Function.prototype.toString()å‡½æ•°æ€»ä¼šæœ‰ä¸€ä¸ª toString æ–¹æ³•ï¼Œå®ƒå°†è¿”å›žä¸€ä¸ªåŒ…å«å‡½æ•°ä»£ç çš„å­—ç¬¦ä¸²ã€‚ ES2019 å¯¹è¿”å›žå€¼åšäº†ä¿®æ”¹ï¼Œä»¥é¿å…å‰¥ç¦»æ³¨é‡Šå’Œå…¶å®ƒå­—ç¬¦ä¸²ï¼ˆå¦‚ï¼šç©ºæ ¼ï¼‰ï¼Œå°†æ›´å‡†ç¡®çš„è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ã€‚ If previously we had ä»¥å‰ä¹Ÿè®¸æˆ‘ä»¬è¿™æ ·è¿‡ï¼š 1function /* this is bar */ bar () &#123;&#125; å½“æ—¶çš„è¡Œä¸ºï¼š 1bar.toString() //'function bar() &#123;&#125; çŽ°åœ¨çš„è¡Œä¸ºï¼š 1bar.toString(); // 'function /* this is bar */ bar () &#123;&#125;' æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯ä»¥å¸®åŠ©ä½ äº†è§£ä¸€äº›æœ€æ–°çš„ JavaScript ä»¥åŠæˆ‘ä»¬åœ¨ 2019 å¹´å³å°†çœ‹è§çš„å†…å®¹ã€‚]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaå¤šçº¿ç¨‹çœ‹è¿™ç¯‡å°±å¤Ÿäº†]]></title>
    <url>%2Fposts%2F52228cda.html</url>
    <content type="text"><![CDATA[å¼•å¦‚æžœå¯¹ä»€ä¹ˆæ˜¯çº¿ç¨‹ã€ä»€ä¹ˆæ˜¯è¿›ç¨‹ä»å­˜æœ‰ç–‘æƒ‘ï¼Œè¯·å…ˆGoogleä¹‹ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ¦‚å¿µä¸åœ¨æœ¬æ–‡çš„èŒƒå›´ä¹‹å†…ã€‚ ç”¨å¤šçº¿ç¨‹åªæœ‰ä¸€ä¸ªç›®çš„ï¼Œé‚£å°±æ˜¯æ›´å¥½çš„åˆ©ç”¨cpuçš„èµ„æºï¼Œå› ä¸ºæ‰€æœ‰çš„å¤šçº¿ç¨‹ä»£ç éƒ½å¯ä»¥ç”¨å•çº¿ç¨‹æ¥å®žçŽ°ã€‚è¯´è¿™ä¸ªè¯å…¶å®žåªæœ‰ä¸€åŠå¯¹ï¼Œå› ä¸ºååº”â€œå¤šè§’è‰²â€çš„ç¨‹åºä»£ç ï¼Œæœ€èµ·ç æ¯ä¸ªè§’è‰²è¦ç»™ä»–ä¸€ä¸ªçº¿ç¨‹å§ï¼Œå¦åˆ™è¿žå®žé™…åœºæ™¯éƒ½æ— æ³•æ¨¡æ‹Ÿï¼Œå½“ç„¶ä¹Ÿæ²¡æ³•è¯´èƒ½ç”¨å•çº¿ç¨‹æ¥å®žçŽ°ï¼šæ¯”å¦‚æœ€å¸¸è§çš„â€œç”Ÿäº§è€…ï¼Œæ¶ˆè´¹è€…æ¨¡åž‹â€ã€‚ å¾ˆå¤šäººéƒ½å¯¹å…¶ä¸­çš„ä¸€äº›æ¦‚å¿µä¸å¤Ÿæ˜Žç¡®ï¼Œå¦‚åŒæ­¥ã€å¹¶å‘ç­‰ç­‰ï¼Œè®©æˆ‘ä»¬å…ˆå»ºç«‹ä¸€ä¸ªæ•°æ®å­—å…¸ï¼Œä»¥å…äº§ç”Ÿè¯¯ä¼šã€‚ å¤šçº¿ç¨‹ï¼šæŒ‡çš„æ˜¯è¿™ä¸ªç¨‹åºï¼ˆä¸€ä¸ªè¿›ç¨‹ï¼‰è¿è¡Œæ—¶äº§ç”Ÿäº†ä¸æ­¢ä¸€ä¸ªçº¿ç¨‹ å¹¶è¡Œä¸Žå¹¶å‘ï¼š å¹¶è¡Œï¼šå¤šä¸ªcpuå®žä¾‹æˆ–è€…å¤šå°æœºå™¨åŒæ—¶æ‰§è¡Œä¸€æ®µå¤„ç†é€»è¾‘ï¼Œæ˜¯çœŸæ­£çš„åŒæ—¶ã€‚ å¹¶å‘ï¼šé€šè¿‡cpuè°ƒåº¦ç®—æ³•ï¼Œè®©ç”¨æˆ·çœ‹ä¸ŠåŽ»åŒæ—¶æ‰§è¡Œï¼Œå®žé™…ä¸Šä»Žcpuæ“ä½œå±‚é¢ä¸æ˜¯çœŸæ­£çš„åŒæ—¶ã€‚å¹¶å‘å¾€å¾€åœ¨åœºæ™¯ä¸­æœ‰å…¬ç”¨çš„èµ„æºï¼Œé‚£ä¹ˆé’ˆå¯¹è¿™ä¸ªå…¬ç”¨çš„èµ„æºå¾€å¾€äº§ç”Ÿç“¶é¢ˆï¼Œæˆ‘ä»¬ä¼šç”¨TPSæˆ–è€…QPSæ¥ååº”è¿™ä¸ªç³»ç»Ÿçš„å¤„ç†èƒ½åŠ›ã€‚ çº¿ç¨‹å®‰å…¨ï¼šç»å¸¸ç”¨æ¥æç»˜ä¸€æ®µä»£ç ã€‚æŒ‡åœ¨å¹¶å‘çš„æƒ…å†µä¹‹ä¸‹ï¼Œè¯¥ä»£ç ç»è¿‡å¤šçº¿ç¨‹ä½¿ç”¨ï¼Œçº¿ç¨‹çš„è°ƒåº¦é¡ºåºä¸å½±å“ä»»ä½•ç»“æžœã€‚è¿™ä¸ªæ—¶å€™ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ç³»ç»Ÿçš„å†…å­˜ï¼Œcpuæ˜¯ä¸æ˜¯å¤Ÿç”¨å³å¯ã€‚åè¿‡æ¥ï¼Œçº¿ç¨‹ä¸å®‰å…¨å°±æ„å‘³ç€çº¿ç¨‹çš„è°ƒåº¦é¡ºåºä¼šå½±å“æœ€ç»ˆç»“æžœï¼Œå¦‚ä¸åŠ äº‹åŠ¡çš„è½¬è´¦ä»£ç ï¼š 1234void transferMoney(User from, User to, float amount)&#123; to.setMoney(to.getBalance() + amount); from.setMoney(from.getBalance() - amount);&#125; åŒæ­¥ï¼šJavaä¸­çš„åŒæ­¥æŒ‡çš„æ˜¯é€šè¿‡äººä¸ºçš„æŽ§åˆ¶å’Œè°ƒåº¦ï¼Œä¿è¯å…±äº«èµ„æºçš„å¤šçº¿ç¨‹è®¿é—®æˆä¸ºçº¿ç¨‹å®‰å…¨ï¼Œæ¥ä¿è¯ç»“æžœçš„å‡†ç¡®ã€‚å¦‚ä¸Šé¢çš„ä»£ç ç®€å•åŠ å…¥@synchronizedå…³é”®å­—ã€‚åœ¨ä¿è¯ç»“æžœå‡†ç¡®çš„åŒæ—¶ï¼Œæé«˜æ€§èƒ½ï¼Œæ‰æ˜¯ä¼˜ç§€çš„ç¨‹åºã€‚çº¿ç¨‹å®‰å…¨çš„ä¼˜å…ˆçº§é«˜äºŽæ€§èƒ½ã€‚ å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚æˆ‘å‡†å¤‡åˆ†æˆå‡ éƒ¨åˆ†æ¥æ€»ç»“æ¶‰åŠåˆ°å¤šçº¿ç¨‹çš„å†…å®¹ï¼š æ‰Žå¥½é©¬æ­¥ï¼šçº¿ç¨‹çš„çŠ¶æ€ å†…åŠŸå¿ƒæ³•ï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„æ–¹æ³•ï¼ˆæœºåˆ¶ï¼‰ å¤ªç¥–é•¿æ‹³ï¼šåŸºæœ¬çº¿ç¨‹ç±» ä¹é˜´çœŸç»ï¼šé«˜çº§å¤šçº¿ç¨‹æŽ§åˆ¶ç±» ä¸€ã€æ‰Žå¥½é©¬æ­¥ï¼šçº¿ç¨‹çš„çŠ¶æ€å…ˆæ¥ä¸¤å¼ å›¾ï¼š â€‹ çº¿ç¨‹çŠ¶æ€ â€‹ çº¿ç¨‹çŠ¶æ€è½¬æ¢ å„ç§çŠ¶æ€ä¸€ç›®äº†ç„¶ï¼Œå€¼å¾—ä¸€æçš„æ˜¯â€Blockedâ€å’Œâ€Waitingâ€è¿™ä¸¤ä¸ªçŠ¶æ€çš„åŒºåˆ«ï¼š çº¿ç¨‹åœ¨Runningçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°é˜»å¡ž(Blocked)æƒ…å†µå¯¹RunningçŠ¶æ€çš„çº¿ç¨‹åŠ åŒæ­¥é”(Synchronized)ä½¿å…¶è¿›å…¥(lock blocked pool ),åŒæ­¥é”è¢«é‡Šæ”¾è¿›å…¥å¯è¿è¡ŒçŠ¶æ€(Runnable)ã€‚ä»Žjdkæºç æ³¨é‡Šæ¥çœ‹ï¼ŒblockedæŒ‡çš„æ˜¯å¯¹monitorçš„ç­‰å¾…ï¼ˆå¯ä»¥å‚è€ƒä¸‹æ–‡çš„å›¾ï¼‰å³è¯¥çº¿ç¨‹ä½äºŽç­‰å¾…åŒºã€‚ çº¿ç¨‹åœ¨Runningçš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°ç­‰å¾…ï¼ˆWaitingï¼‰æƒ…å†µçº¿ç¨‹å¯ä»¥ä¸»åŠ¨è°ƒç”¨object.waitæˆ–è€…sleepï¼Œæˆ–è€…joinï¼ˆjoinå†…éƒ¨è°ƒç”¨çš„æ˜¯sleepï¼Œæ‰€ä»¥å¯çœ‹æˆsleepçš„ä¸€ç§ï¼‰è¿›å…¥ã€‚ä»Žjdkæºç æ³¨é‡Šæ¥çœ‹ï¼Œwaitingæ˜¯ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹å®ŒæˆæŸä¸€ä¸ªæ“ä½œï¼Œå¦‚joinç­‰å¾…å¦ä¸€ä¸ªå®Œæˆæ‰§è¡Œï¼Œobject.wait()ç­‰å¾…object.notify()æ–¹æ³•æ‰§è¡Œã€‚ WaitingçŠ¶æ€å’ŒBlockedçŠ¶æ€æœ‰ç‚¹è´¹è§£ï¼Œæˆ‘ä¸ªäººçš„ç†è§£æ˜¯ï¼šBlockedå…¶å®žä¹Ÿæ˜¯ä¸€ç§waitï¼Œç­‰å¾…çš„æ˜¯monitorï¼Œä½†æ˜¯å’ŒWaitingçŠ¶æ€ä¸ä¸€æ ·ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ä¸‰ä¸ªçº¿ç¨‹è¿›å…¥äº†åŒæ­¥å—ï¼Œå…¶ä¸­ä¸¤ä¸ªè°ƒç”¨äº†object.wait()ï¼Œè¿›å…¥äº†waitingçŠ¶æ€ï¼Œè¿™æ—¶ç¬¬ä¸‰ä¸ªè°ƒç”¨äº†object.notifyAll()ï¼Œè¿™æ—¶å€™å‰ä¸¤ä¸ªçº¿ç¨‹å°±ä¸€ä¸ªè½¬ç§»åˆ°äº†Runnable,ä¸€ä¸ªè½¬ç§»åˆ°äº†Blockedã€‚ ä»Žä¸‹æ–‡çš„monitorç»“æž„å›¾æ¥åŒºåˆ«ï¼šæ¯ä¸ª Monitoråœ¨æŸä¸ªæ—¶åˆ»ï¼Œåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰ï¼Œè¯¥çº¿ç¨‹å°±æ˜¯ â€œActive Threadâ€ï¼Œè€Œå…¶å®ƒçº¿ç¨‹éƒ½æ˜¯ â€œWaiting Threadâ€ï¼Œåˆ†åˆ«åœ¨ä¸¤ä¸ªé˜Ÿåˆ— â€œ Entry Setâ€å’Œ â€œWait Setâ€é‡Œé¢ç­‰å€™ã€‚åœ¨ â€œEntry Setâ€ä¸­ç­‰å¾…çš„çº¿ç¨‹çŠ¶æ€Blocked,ä»Žjstackçš„dumpä¸­æ¥çœ‹æ˜¯ â€œWaiting for monitor entryâ€ï¼Œè€Œåœ¨ â€œWait Setâ€ä¸­ç­‰å¾…çš„çº¿ç¨‹çŠ¶æ€æ˜¯Waitingï¼Œè¡¨çŽ°åœ¨jstackçš„dumpä¸­æ˜¯ â€œin Object.wait()â€ã€‚ æ­¤å¤–ï¼Œåœ¨runnableçŠ¶æ€çš„çº¿ç¨‹æ˜¯å¤„äºŽè¢«è°ƒåº¦çš„çº¿ç¨‹ï¼Œæ­¤æ—¶çš„è°ƒåº¦é¡ºåºæ˜¯ä¸ä¸€å®šçš„ã€‚Threadç±»ä¸­çš„yieldæ–¹æ³•å¯ä»¥è®©ä¸€ä¸ªrunningçŠ¶æ€çš„çº¿ç¨‹è½¬å…¥runnableã€‚ äºŒã€ å†…åŠŸå¿ƒæ³•ï¼šæ¯ä¸ªå¯¹è±¡éƒ½æœ‰çš„æ–¹æ³•ï¼ˆæœºåˆ¶ï¼‰synchronized, wait, notify æ˜¯ä»»ä½•å¯¹è±¡éƒ½å…·æœ‰çš„åŒæ­¥å·¥å…·ã€‚è®©æˆ‘ä»¬å…ˆæ¥äº†è§£ä»–ä»¬ ä»–ä»¬æ˜¯åº”ç”¨äºŽåŒæ­¥é—®é¢˜çš„äººå·¥çº¿ç¨‹è°ƒåº¦å·¥å…·ã€‚è®²å…¶æœ¬è´¨ï¼Œé¦–å…ˆå°±è¦æ˜Žç¡®monitorçš„æ¦‚å¿µï¼ŒJavaä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç›‘è§†å™¨ï¼Œæ¥ç›‘æµ‹å¹¶å‘ä»£ç çš„é‡å…¥ã€‚åœ¨éžå¤šçº¿ç¨‹ç¼–ç æ—¶è¯¥ç›‘è§†å™¨ä¸å‘æŒ¥ä½œç”¨ï¼Œåä¹‹å¦‚æžœåœ¨synchronized èŒƒå›´å†…ï¼Œç›‘è§†å™¨å‘æŒ¥ä½œç”¨ã€‚ wait/notifyå¿…é¡»å­˜åœ¨äºŽsynchronizedå—ä¸­ã€‚å¹¶ä¸”ï¼Œè¿™ä¸‰ä¸ªå…³é”®å­—é’ˆå¯¹çš„æ˜¯åŒä¸€ä¸ªç›‘è§†å™¨ï¼ˆæŸå¯¹è±¡çš„ç›‘è§†å™¨ï¼‰ã€‚è¿™æ„å‘³ç€waitä¹‹åŽï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥è¿›å…¥åŒæ­¥å—æ‰§è¡Œã€‚ å½“æŸä»£ç å¹¶ä¸æŒæœ‰ç›‘è§†å™¨çš„ä½¿ç”¨æƒæ—¶ï¼ˆå¦‚å›¾ä¸­5çš„çŠ¶æ€ï¼Œå³è„±ç¦»åŒæ­¥å—ï¼‰åŽ»waitæˆ–notifyï¼Œä¼šæŠ›å‡ºjava.lang.IllegalMonitorStateExceptionã€‚ä¹ŸåŒ…æ‹¬åœ¨synchronizedå—ä¸­åŽ»è°ƒç”¨å¦ä¸€ä¸ªå¯¹è±¡çš„wait/notifyï¼Œå› ä¸ºä¸åŒå¯¹è±¡çš„ç›‘è§†å™¨ä¸åŒï¼ŒåŒæ ·ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚ å†è®²ç”¨æ³•ï¼š synchronizedå•ç‹¬ä½¿ç”¨ï¼š ä»£ç å—ï¼šå¦‚ä¸‹ï¼Œåœ¨å¤šçº¿ç¨‹çŽ¯å¢ƒä¸‹ï¼Œsynchronizedå—ä¸­çš„æ–¹æ³•èŽ·å–äº†lockå®žä¾‹çš„monitorï¼Œå¦‚æžœå®žä¾‹ç›¸åŒï¼Œé‚£ä¹ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œè¯¥å—å†…å®¹ 12345678public class Thread1 implements Runnable &#123; Object lock; public void run() &#123; synchronized(lock)&#123; ..do something &#125; &#125;&#125; ç›´æŽ¥ç”¨äºŽæ–¹æ³•ï¼šç›¸å½“äºŽä¸Šé¢ä»£ç ä¸­ç”¨lockæ¥é”å®šçš„æ•ˆæžœï¼Œå®žé™…èŽ·å–çš„æ˜¯Thread1ç±»çš„monitorã€‚æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æžœä¿®é¥°çš„æ˜¯staticæ–¹æ³•ï¼Œåˆ™é”å®šè¯¥ç±»æ‰€æœ‰å®žä¾‹ã€‚ 12345public class Thread1 implements Runnable &#123; public synchronized void run() &#123; ..do something &#125;&#125; synchronized, wait, notifyç»“åˆ:å…¸åž‹åœºæ™¯ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546/** * ç”Ÿäº§è€…ç”Ÿäº§å‡ºæ¥çš„äº§å“äº¤ç»™åº—å‘˜ */ public synchronized void produce() &#123; if(this.product &gt;= MAX_PRODUCT) &#123; try &#123; wait(); System.out.println("äº§å“å·²æ»¡,è¯·ç¨å€™å†ç”Ÿäº§"); &#125; catch(InterruptedException e) &#123; e.printStackTrace(); &#125; return; &#125; this.product++; System.out.println("ç”Ÿäº§è€…ç”Ÿäº§ç¬¬" + this.product + "ä¸ªäº§å“."); notifyAll(); //é€šçŸ¥ç­‰å¾…åŒºçš„æ¶ˆè´¹è€…å¯ä»¥å–å‡ºäº§å“äº† &#125; /** * æ¶ˆè´¹è€…ä»Žåº—å‘˜å–äº§å“ */ public synchronized void consume() &#123; if(this.product &lt;= MIN_PRODUCT) &#123; try &#123; wait(); System.out.println("ç¼ºè´§,ç¨å€™å†å–"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; return; &#125; System.out.println("æ¶ˆè´¹è€…å–èµ°äº†ç¬¬" + this.product + "ä¸ªäº§å“."); this.product--; notifyAll(); //é€šçŸ¥ç­‰å¾…åŽ»çš„ç”Ÿäº§è€…å¯ä»¥ç”Ÿäº§äº§å“äº† &#125; volatile å¤šçº¿ç¨‹çš„å†…å­˜æ¨¡åž‹ï¼šmain memoryï¼ˆä¸»å­˜ï¼‰ã€working memoryï¼ˆçº¿ç¨‹æ ˆï¼‰ï¼Œåœ¨å¤„ç†æ•°æ®æ—¶ï¼Œçº¿ç¨‹ä¼šæŠŠå€¼ä»Žä¸»å­˜loadåˆ°æœ¬åœ°æ ˆï¼Œå®Œæˆæ“ä½œåŽå†saveå›žåŽ»(volatileå…³é”®è¯çš„ä½œç”¨ï¼šæ¯æ¬¡é’ˆå¯¹è¯¥å˜é‡çš„æ“ä½œéƒ½æ¿€å‘ä¸€æ¬¡load and save)ã€‚ é’ˆå¯¹å¤šçº¿ç¨‹ä½¿ç”¨çš„å˜é‡å¦‚æžœä¸æ˜¯volatileæˆ–è€…finalä¿®é¥°çš„ï¼Œå¾ˆæœ‰å¯èƒ½äº§ç”Ÿä¸å¯é¢„çŸ¥çš„ç»“æžœï¼ˆå¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå€¼ï¼Œä½†æ˜¯ä¹‹åŽåœ¨æŸçº¿ç¨‹çœ‹åˆ°çš„æ˜¯ä¿®æ”¹ä¹‹å‰çš„å€¼ï¼‰ã€‚å…¶å®žé“ç†ä¸Šè®²åŒä¸€å®žä¾‹çš„åŒä¸€å±žæ€§æœ¬èº«åªæœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚ä½†æ˜¯å¤šçº¿ç¨‹æ˜¯ä¼šç¼“å­˜å€¼çš„ï¼Œæœ¬è´¨ä¸Šï¼Œvolatileå°±æ˜¯ä¸åŽ»ç¼“å­˜ï¼Œç›´æŽ¥å–å€¼ã€‚åœ¨çº¿ç¨‹å®‰å…¨çš„æƒ…å†µä¸‹åŠ volatileä¼šç‰ºç‰²æ€§èƒ½ã€‚ ä¸‰ã€å¤ªç¥–é•¿æ‹³ï¼šåŸºæœ¬çº¿ç¨‹ç±»åŸºæœ¬çº¿ç¨‹ç±»æŒ‡çš„æ˜¯Threadç±»ï¼ŒRunnableæŽ¥å£ï¼ŒCallableæŽ¥å£Thread ç±»å®žçŽ°äº†RunnableæŽ¥å£ï¼Œå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹çš„æ–¹æ³•ï¼š 12 MyThread my = new MyThread(); my.start(); Threadç±»ç›¸å…³æ–¹æ³•ï¼š 12345678//å½“å‰çº¿ç¨‹å¯è½¬è®©cpuæŽ§åˆ¶æƒï¼Œè®©åˆ«çš„å°±ç»ªçŠ¶æ€çº¿ç¨‹è¿è¡Œï¼ˆåˆ‡æ¢ï¼‰public static Thread.yield()//æš‚åœä¸€æ®µæ—¶é—´public static Thread.sleep()//åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è°ƒç”¨other.join(),å°†ç­‰å¾…otheræ‰§è¡Œå®ŒåŽæ‰ç»§ç»­æœ¬çº¿ç¨‹ã€‚ public join()//åŽä¸¤ä¸ªå‡½æ•°çš†å¯ä»¥è¢«æ‰“æ–­public interrupte() å…³äºŽä¸­æ–­ï¼šå®ƒå¹¶ä¸åƒstopæ–¹æ³•é‚£æ ·ä¼šä¸­æ–­ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ã€‚çº¿ç¨‹ä¼šä¸æ—¶åœ°æ£€æµ‹ä¸­æ–­æ ‡è¯†ä½ï¼Œä»¥åˆ¤æ–­çº¿ç¨‹æ˜¯å¦åº”è¯¥è¢«ä¸­æ–­ï¼ˆä¸­æ–­æ ‡è¯†å€¼æ˜¯å¦ä¸ºtrueï¼‰ã€‚ç»ˆç«¯åªä¼šå½±å“åˆ°waitçŠ¶æ€ã€sleepçŠ¶æ€å’ŒjoinçŠ¶æ€ã€‚è¢«æ‰“æ–­çš„çº¿ç¨‹ä¼šæŠ›å‡ºInterruptedExceptionã€‚Thread.interrupted()æ£€æŸ¥å½“å‰çº¿ç¨‹æ˜¯å¦å‘ç”Ÿä¸­æ–­ï¼Œè¿”å›žbooleansynchronizedåœ¨èŽ·é”çš„è¿‡ç¨‹ä¸­æ˜¯ä¸èƒ½è¢«ä¸­æ–­çš„ã€‚ ä¸­æ–­æ˜¯ä¸€ä¸ªçŠ¶æ€ï¼interrupt()æ–¹æ³•åªæ˜¯å°†è¿™ä¸ªçŠ¶æ€ç½®ä¸ºtrueè€Œå·²ã€‚æ‰€ä»¥è¯´æ­£å¸¸è¿è¡Œçš„ç¨‹åºä¸åŽ»æ£€æµ‹çŠ¶æ€ï¼Œå°±ä¸ä¼šç»ˆæ­¢ï¼Œè€Œwaitç­‰é˜»å¡žæ–¹æ³•ä¼šåŽ»æ£€æŸ¥å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æžœåœ¨æ­£å¸¸è¿è¡Œçš„ç¨‹åºä¸­æ·»åŠ while(!Thread.interrupted()) ï¼Œåˆ™åŒæ ·å¯ä»¥åœ¨ä¸­æ–­åŽç¦»å¼€ä»£ç ä½“ Threadç±»æœ€ä½³å®žè·µï¼šå†™çš„æ—¶å€™æœ€å¥½è¦è®¾ç½®çº¿ç¨‹åç§° Thread.nameï¼Œå¹¶è®¾ç½®çº¿ç¨‹ç»„ ThreadGroupï¼Œç›®çš„æ˜¯æ–¹ä¾¿ç®¡ç†ã€‚åœ¨å‡ºçŽ°é—®é¢˜çš„æ—¶å€™ï¼Œæ‰“å°çº¿ç¨‹æ ˆ (jstack -pid) ä¸€çœ¼å°±å¯ä»¥çœ‹å‡ºæ˜¯å“ªä¸ªçº¿ç¨‹å‡ºçš„é—®é¢˜ï¼Œè¿™ä¸ªçº¿ç¨‹æ˜¯å¹²ä»€ä¹ˆçš„ã€‚ å¦‚ä½•èŽ·å–çº¿ç¨‹ä¸­çš„å¼‚å¸¸ â€‹ ä¸èƒ½ç”¨try,catchæ¥èŽ·å–çº¿ç¨‹ä¸­çš„å¼‚å¸¸ Runnable ä¸ŽThreadç±»ä¼¼ Callable futureæ¨¡å¼ï¼šå¹¶å‘æ¨¡å¼çš„ä¸€ç§ï¼Œå¯ä»¥æœ‰ä¸¤ç§å½¢å¼ï¼Œå³æ— é˜»å¡žå’Œé˜»å¡žï¼Œåˆ†åˆ«æ˜¯isDoneå’Œgetã€‚å…¶ä¸­Futureå¯¹è±¡ç”¨æ¥å­˜æ”¾è¯¥çº¿ç¨‹çš„è¿”å›žå€¼ä»¥åŠçŠ¶æ€ 12345ExecutorService e = Executors.newFixedThreadPool(3); //submitæ–¹æ³•æœ‰å¤šé‡å‚æ•°ç‰ˆæœ¬ï¼ŒåŠæ”¯æŒcallableä¹Ÿèƒ½å¤Ÿæ”¯æŒrunnableæŽ¥å£ç±»åž‹.Future future = e.submit(new myCallable());future.isDone() //return true,false æ— é˜»å¡žfuture.get() // return è¿”å›žå€¼ï¼Œé˜»å¡žç›´åˆ°è¯¥çº¿ç¨‹è¿è¡Œç»“æŸ å››ã€ä¹é˜´çœŸç»ï¼šé«˜çº§å¤šçº¿ç¨‹æŽ§åˆ¶ç±»ä»¥ä¸Šéƒ½å±žäºŽå†…åŠŸå¿ƒæ³•ï¼ŒæŽ¥ä¸‹æ¥æ˜¯å®žé™…é¡¹ç›®ä¸­å¸¸ç”¨åˆ°çš„å·¥å…·äº†ï¼ŒJava1.5æä¾›äº†ä¸€ä¸ªéžå¸¸é«˜æ•ˆå®žç”¨çš„å¤šçº¿ç¨‹åŒ…:java.util.concurrent, æä¾›äº†å¤§é‡é«˜çº§å·¥å…·,å¯ä»¥å¸®åŠ©å¼€å‘è€…ç¼–å†™é«˜æ•ˆã€æ˜“ç»´æŠ¤ã€ç»“æž„æ¸…æ™°çš„Javaå¤šçº¿ç¨‹ç¨‹åºã€‚ 1.ThreadLocalç±» ç”¨å¤„ï¼šä¿å­˜çº¿ç¨‹çš„ç‹¬ç«‹å˜é‡ã€‚å¯¹ä¸€ä¸ªçº¿ç¨‹ç±»ï¼ˆç»§æ‰¿è‡ªThread)å½“ä½¿ç”¨ThreadLocalç»´æŠ¤å˜é‡æ—¶ï¼ŒThreadLocalä¸ºæ¯ä¸ªä½¿ç”¨è¯¥å˜é‡çš„çº¿ç¨‹æä¾›ç‹¬ç«‹çš„å˜é‡å‰¯æœ¬ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜è‡ªå·±çš„å‰¯æœ¬ï¼Œè€Œä¸ä¼šå½±å“å…¶å®ƒçº¿ç¨‹æ‰€å¯¹åº”çš„å‰¯æœ¬ã€‚å¸¸ç”¨äºŽç”¨æˆ·ç™»å½•æŽ§åˆ¶ï¼Œå¦‚è®°å½•sessionä¿¡æ¯ã€‚ å®žçŽ°ï¼šæ¯ä¸ªThreadéƒ½æŒæœ‰ä¸€ä¸ªTreadLocalMapç±»åž‹çš„å˜é‡ï¼ˆè¯¥ç±»æ˜¯ä¸€ä¸ªè½»é‡çº§çš„Mapï¼ŒåŠŸèƒ½ä¸Žmapä¸€æ ·ï¼ŒåŒºåˆ«æ˜¯æ¡¶é‡Œæ”¾çš„æ˜¯entryè€Œä¸æ˜¯entryçš„é“¾è¡¨ã€‚åŠŸèƒ½è¿˜æ˜¯ä¸€ä¸ªmapã€‚ï¼‰ä»¥æœ¬èº«ä¸ºkeyï¼Œä»¥ç›®æ ‡ä¸ºvalueã€‚ ä¸»è¦æ–¹æ³•æ˜¯get()å’Œset(T a)ï¼Œsetä¹‹åŽåœ¨mapé‡Œç»´æŠ¤ä¸€ä¸ªthreadLocal -&gt; aï¼Œgetæ—¶å°†aè¿”å›žã€‚ThreadLocalæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å®¹å™¨ã€‚ 2.åŽŸå­ç±»ï¼ˆAtomicIntegerã€AtomicBooleanâ€¦â€¦ï¼‰ å¦‚æžœä½¿ç”¨atomic wrapper classå¦‚atomicIntegerï¼Œæˆ–è€…ä½¿ç”¨è‡ªå·±ä¿è¯åŽŸå­çš„æ“ä½œï¼Œåˆ™ç­‰åŒäºŽsynchronized 12//è¿”å›žå€¼ä¸ºbooleanAtomicInteger.compareAndSet(int expect,int update) è¯¥æ–¹æ³•å¯ç”¨äºŽå®žçŽ°ä¹è§‚é”ï¼Œè€ƒè™‘æ–‡ä¸­æœ€åˆæåˆ°çš„å¦‚ä¸‹åœºæ™¯ï¼šaç»™bä»˜æ¬¾10å…ƒï¼Œaæ‰£äº†10å…ƒï¼Œbè¦åŠ 10å…ƒã€‚æ­¤æ—¶cç»™b2å…ƒï¼Œä½†æ˜¯bçš„åŠ åå…ƒä»£ç çº¦ä¸ºï¼š 123456if(b.value.compareAndSet(old, value))&#123; return ;&#125;else&#123; //try again // if that fails, rollback and log&#125; AtomicReference å¯¹äºŽAtomicReference æ¥è®²ï¼Œä¹Ÿè®¸å¯¹è±¡ä¼šå‡ºçŽ°ï¼Œå±žæ€§ä¸¢å¤±çš„æƒ…å†µï¼Œå³oldObject == currentï¼Œä½†æ˜¯oldObject.getPropertyA != current.getPropertyAã€‚è¿™æ—¶å€™ï¼ŒAtomicStampedReferenceå°±æ´¾ä¸Šç”¨åœºäº†ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¸¸ç”¨çš„æ€è·¯ï¼Œå³åŠ ä¸Šç‰ˆæœ¬å· 3.Lockç±» lock: åœ¨java.util.concurrentåŒ…å†…ã€‚å…±æœ‰ä¸‰ä¸ªå®žçŽ°ï¼š ReentrantLock ReentrantReadWriteLock.ReadLock ReentrantReadWriteLock.WriteLock ä¸»è¦ç›®çš„æ˜¯å’Œsynchronizedä¸€æ ·ï¼Œ ä¸¤è€…éƒ½æ˜¯ä¸ºäº†è§£å†³åŒæ­¥é—®é¢˜ï¼Œå¤„ç†èµ„æºäº‰ç«¯è€Œäº§ç”Ÿçš„æŠ€æœ¯ã€‚åŠŸèƒ½ç±»ä¼¼ä½†æœ‰ä¸€äº›åŒºåˆ«ã€‚ åŒºåˆ«å¦‚ä¸‹ï¼š lockæ›´çµæ´»ï¼Œå¯ä»¥è‡ªç”±å®šä¹‰å¤šæŠŠé”çš„æž·é”è§£é”é¡ºåºï¼ˆsynchronizedè¦æŒ‰ç…§å…ˆåŠ çš„åŽè§£é¡ºåºï¼‰ æä¾›å¤šç§åŠ é”æ–¹æ¡ˆï¼Œlock é˜»å¡žå¼, trylock æ— é˜»å¡žå¼, lockInterruptily å¯æ‰“æ–­å¼ï¼Œ è¿˜æœ‰trylockçš„å¸¦è¶…æ—¶æ—¶é—´ç‰ˆæœ¬ã€‚ æœ¬è´¨ä¸Šå’Œç›‘è§†å™¨é”ï¼ˆå³synchronizedæ˜¯ä¸€æ ·çš„ï¼‰ èƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ï¼Œå¿…é¡»æŽ§åˆ¶å¥½åŠ é”å’Œè§£é”ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¾éš¾ã€‚ å’ŒConditionç±»çš„ç»“åˆã€‚ æ€§èƒ½æ›´é«˜ï¼Œå¯¹æ¯”å¦‚ä¸‹å›¾ï¼š â€‹ synchronizedå’ŒLockæ€§èƒ½å¯¹æ¯” ReentrantLock å¯é‡å…¥çš„æ„ä¹‰åœ¨äºŽæŒæœ‰é”çš„çº¿ç¨‹å¯ä»¥ç»§ç»­æŒæœ‰ï¼Œå¹¶ä¸”è¦é‡Šæ”¾å¯¹ç­‰çš„æ¬¡æ•°åŽæ‰çœŸæ­£é‡Šæ”¾è¯¥é”ã€‚ä½¿ç”¨æ–¹æ³•æ˜¯ï¼š 1.å…ˆnewä¸€ä¸ªå®žä¾‹ 1static ReentrantLock r=new ReentrantLock(); 2.åŠ é” 1r.lock()æˆ–r.lockInterruptibly(); æ­¤å¤„ä¹Ÿæ˜¯ä¸ªä¸åŒï¼ŒåŽè€…å¯è¢«æ‰“æ–­ã€‚å½“açº¿ç¨‹lockåŽï¼Œbçº¿ç¨‹é˜»å¡žï¼Œæ­¤æ—¶å¦‚æžœæ˜¯lockInterruptiblyï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨b.interrupt()ä¹‹åŽï¼Œbçº¿ç¨‹é€€å‡ºé˜»å¡žï¼Œå¹¶æ”¾å¼ƒå¯¹èµ„æºçš„äº‰æŠ¢ï¼Œè¿›å…¥catchå—ã€‚ï¼ˆå¦‚æžœä½¿ç”¨åŽè€…ï¼Œå¿…é¡»throw interruptable exception æˆ–catchï¼‰ 3.é‡Šæ”¾é” 1r.unlock() å¿…é¡»åšï¼ä½•ä¸ºå¿…é¡»åšå‘¢ï¼Œè¦æ”¾åœ¨finallyé‡Œé¢ã€‚ä»¥é˜²æ­¢å¼‚å¸¸è·³å‡ºäº†æ­£å¸¸æµç¨‹ï¼Œå¯¼è‡´ç¾éš¾ã€‚è¿™é‡Œè¡¥å……ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œfinallyæ˜¯å¯ä»¥ä¿¡ä»»çš„ï¼šç»è¿‡æµ‹è¯•ï¼Œå“ªæ€•æ˜¯å‘ç”Ÿäº†OutofMemoryErrorï¼Œfinallyå—ä¸­çš„è¯­å¥æ‰§è¡Œä¹Ÿèƒ½å¤Ÿå¾—åˆ°ä¿è¯ã€‚ ReentrantReadWriteLock å¯é‡å…¥è¯»å†™é”ï¼ˆè¯»å†™é”çš„ä¸€ä¸ªå®žçŽ°ï¼‰ 123 ReentrantReadWriteLock lock = new ReentrantReadWriteLock() ReadLock r = lock.readLock(); WriteLock w = lock.writeLock(); ä¸¤è€…éƒ½æœ‰lock,unlockæ–¹æ³•ã€‚å†™å†™ï¼Œå†™è¯»äº’æ–¥ï¼›è¯»è¯»ä¸äº’æ–¥ã€‚å¯ä»¥å®žçŽ°å¹¶å‘è¯»çš„é«˜æ•ˆçº¿ç¨‹å®‰å…¨ä»£ç  4.å®¹å™¨ç±» è¿™é‡Œå°±è®¨è®ºæ¯”è¾ƒå¸¸ç”¨çš„ä¸¤ä¸ªï¼š BlockingQueue ConcurrentHashMap BlockingQueue é˜»å¡žé˜Ÿåˆ—ã€‚è¯¥ç±»æ˜¯java.util.concurrentåŒ…ä¸‹çš„é‡è¦ç±»ï¼Œé€šè¿‡å¯¹Queueçš„å­¦ä¹ å¯ä»¥å¾—çŸ¥ï¼Œè¿™ä¸ªqueueæ˜¯å•å‘é˜Ÿåˆ—ï¼Œå¯ä»¥åœ¨é˜Ÿåˆ—å¤´æ·»åŠ å…ƒç´ å’Œåœ¨é˜Ÿå°¾åˆ é™¤æˆ–å–å‡ºå…ƒç´ ã€‚ç±»ä¼¼äºŽä¸€ä¸ªç®¡ é“ï¼Œç‰¹åˆ«é€‚ç”¨äºŽå…ˆè¿›å…ˆå‡ºç­–ç•¥çš„ä¸€äº›åº”ç”¨åœºæ™¯ã€‚æ™®é€šçš„queueæŽ¥å£ä¸»è¦å®žçŽ°æœ‰PriorityQueueï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ï¼Œæœ‰å…´è¶£å¯ä»¥ç ”ç©¶ BlockingQueueåœ¨é˜Ÿåˆ—çš„åŸºç¡€ä¸Šæ·»åŠ äº†å¤šçº¿ç¨‹åä½œçš„åŠŸèƒ½ï¼š é™¤äº†ä¼ ç»Ÿçš„queueåŠŸèƒ½ï¼ˆè¡¨æ ¼å·¦è¾¹çš„ä¸¤åˆ—ï¼‰ä¹‹å¤–ï¼Œè¿˜æä¾›äº†é˜»å¡žæŽ¥å£putå’Œtakeï¼Œå¸¦è¶…æ—¶åŠŸèƒ½çš„é˜»å¡žæŽ¥å£offerå’Œpollã€‚putä¼šåœ¨é˜Ÿåˆ—æ»¡çš„æ—¶å€™é˜»å¡žï¼Œç›´åˆ°æœ‰ç©ºé—´æ—¶è¢«å”¤é†’ï¼›takeåœ¨é˜Ÿ åˆ—ç©ºçš„æ—¶å€™é˜»å¡žï¼Œç›´åˆ°æœ‰ä¸œè¥¿æ‹¿çš„æ—¶å€™æ‰è¢«å”¤é†’ã€‚ç”¨äºŽç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡åž‹å°¤å…¶å¥½ç”¨ï¼Œå ªç§°ç¥žå™¨ã€‚ å¸¸è§çš„é˜»å¡žé˜Ÿåˆ—æœ‰ï¼š ArrayListBlockingQueue LinkedListBlockingQueue DelayQueue SynchronousQueue ConcurrentHashMap é«˜æ•ˆçš„çº¿ç¨‹å®‰å…¨å“ˆå¸Œmapã€‚è¯·å¯¹æ¯”hashTable , concurrentHashMap, HashMap 5.ç®¡ç†ç±» ç®¡ç†ç±»çš„æ¦‚å¿µæ¯”è¾ƒæ³›ï¼Œç”¨äºŽç®¡ç†çº¿ç¨‹ï¼Œæœ¬èº«ä¸æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä½†æä¾›äº†ä¸€äº›æœºåˆ¶æ¥åˆ©ç”¨ä¸Šè¿°çš„å·¥å…·åšä¸€äº›å°è£…ã€‚äº†è§£åˆ°çš„å€¼å¾—ä¸€æçš„ç®¡ç†ç±»ï¼šThreadPoolExecutorå’Œ JMXæ¡†æž¶ä¸‹çš„ç³»ç»Ÿçº§ç®¡ç†ç±» ThreadMXBean ThreadPoolExecutor å¦‚æžœä¸äº†è§£è¿™ä¸ªç±»ï¼Œåº”è¯¥äº†è§£å‰é¢æåˆ°çš„ExecutorServiceï¼Œå¼€ä¸€ä¸ªè‡ªå·±çš„çº¿ç¨‹æ± éžå¸¸æ–¹ä¾¿ï¼š 12345678ExecutorService e = Executors.newCachedThreadPool(); ExecutorService e = Executors.newSingleThreadExecutor(); ExecutorService e = Executors.newFixedThreadPool(3); // ç¬¬ä¸€ç§æ˜¯å¯å˜å¤§å°çº¿ç¨‹æ± ï¼ŒæŒ‰ç…§ä»»åŠ¡æ•°æ¥åˆ†é…çº¿ç¨‹ï¼Œ // ç¬¬äºŒç§æ˜¯å•çº¿ç¨‹æ± ï¼Œç›¸å½“äºŽFixedThreadPool(1) // ç¬¬ä¸‰ç§æ˜¯å›ºå®šå¤§å°çº¿ç¨‹æ± ã€‚ // ç„¶åŽè¿è¡Œ e.execute(new MyRunnableImpl()); è¯¥ç±»å†…éƒ¨æ˜¯é€šè¿‡ThreadPoolExecutorå®žçŽ°çš„ï¼ŒæŽŒæ¡è¯¥ç±»æœ‰åŠ©äºŽç†è§£çº¿ç¨‹æ± çš„ç®¡ç†ï¼Œæœ¬è´¨ä¸Šï¼Œä»–ä»¬éƒ½æ˜¯ThreadPoolExecutorç±»çš„å„ç§å®žçŽ°ç‰ˆæœ¬ã€‚è¯·å‚è§javadocï¼š â€‹ ThreadPoolExecutorå‚æ•°è§£é‡Š ç¿»è¯‘ä¸€ä¸‹ï¼šcorePoolSize:æ± å†…çº¿ç¨‹åˆå§‹å€¼ä¸Žæœ€å°å€¼ï¼Œå°±ç®—æ˜¯ç©ºé—²çŠ¶æ€ï¼Œä¹Ÿä¼šä¿æŒè¯¥æ•°é‡çº¿ç¨‹ã€‚maximumPoolSize:çº¿ç¨‹æœ€å¤§å€¼ï¼Œçº¿ç¨‹çš„å¢žé•¿å§‹ç»ˆä¸ä¼šè¶…è¿‡è¯¥å€¼ã€‚keepAliveTimeï¼šå½“æ± å†…çº¿ç¨‹æ•°é«˜äºŽcorePoolSizeæ—¶ï¼Œç»è¿‡å¤šå°‘æ—¶é—´å¤šä½™çš„ç©ºé—²çº¿ç¨‹æ‰ä¼šè¢«å›žæ”¶ã€‚å›žæ”¶å‰å¤„äºŽwaitçŠ¶æ€unitï¼šæ—¶é—´å•ä½ï¼Œå¯ä»¥ä½¿ç”¨TimeUnitçš„å®žä¾‹ï¼Œå¦‚TimeUnit.MILLISECONDS workQueue:å¾…å…¥ä»»åŠ¡ï¼ˆRunnableï¼‰çš„ç­‰å¾…åœºæ‰€ï¼Œè¯¥å‚æ•°ä¸»è¦å½±å“è°ƒåº¦ç­–ç•¥ï¼Œå¦‚å…¬å¹³ä¸Žå¦ï¼Œæ˜¯å¦äº§ç”Ÿé¥¿æ­»(starving)threadFactory:çº¿ç¨‹å·¥åŽ‚ç±»ï¼Œæœ‰é»˜è®¤å®žçŽ°ï¼Œå¦‚æžœæœ‰è‡ªå®šä¹‰çš„éœ€è¦åˆ™éœ€è¦è‡ªå·±å®žçŽ°ThreadFactoryæŽ¥å£å¹¶ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>å¤šçº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®©æˆ‘ä»¬èŠä¸€èŠè®¡ç®—æœºåŸºç¡€çŸ¥è¯†çš„æœ€å°é›†åˆç»„]]></title>
    <url>%2Fposts%2F2d2dd747.html</url>
    <content type="text"><![CDATA[å‰è¨€å¾ˆå¤šäººå·¥ä½œåŽç—›æ„Ÿè®¡ç®—æœºåŸºç¡€çŸ¥è¯†çš„ç¼ºä¹ï¼Œ é‚£è®¡ç®—æœºåŸºç¡€çŸ¥è¯†éƒ½æœ‰å“ªäº›å‘¢ï¼Ÿ æˆ‘è§‰å¾—é¦–å…ˆè®¡ç®—æœºä¸“ä¸šçš„é‚£å…­å¤§ä»¶ï¼šç»„æˆåŽŸç†ï¼Œæ“ä½œç³»ç»Ÿï¼Œæ•°æ®åº“ï¼Œç¼–è¯‘åŽŸç†ï¼Œè®¡ç®—æœºç½‘ç»œï¼Œæ•°æ®ç»“æž„ï¼ˆè¿™ä¸ªè¯´å¤ªå¤šéäº†ï¼Œè¿™æ¬¡ä¸å†è®²äº†ï¼‰ï¼Œ å…¶æ¬¡è¿˜å¾—åŠ ä¸Šåˆ†å¸ƒå¼çš„åŸºç¡€çŸ¥è¯†ï¼Œ å› ä¸ºçŽ°åœ¨çš„ç³»ç»Ÿéƒ½å˜æˆåˆ†å¸ƒå¼çš„äº†ã€‚ å¦‚æžœä½ æ˜¯åšåº”ç”¨å±‚å¼€å‘çš„ï¼Œé‚£å‡ é—¨è¯¾ç¨‹ä¸­çš„æœ‰äº›å†…å®¹å’Œæ—¥å¸¸å·¥ä½œå…³è”åº¦ä¸å¤§ï¼Œæˆ‘æŒ‘é‚£äº›æœ€é‡è¦çš„æ¥è¯´ä¸€è¯´ï¼Œä¹Ÿç®—æ˜¯ä¸€ä¸ªæœ€å°é›†åˆå§ï¼ ä¸€ã€è®¡ç®—æœºç»„æˆåŽŸç†å¦‚æžœä½ ä¸æ˜¯åšæ“ä½œç³»ç»Ÿ/é©±åŠ¨ç¨‹åºçš„ï¼Œç›´æŽ¥å’Œç¡¬ä»¶æ‰“äº¤é“çš„æœºä¼šå¾ˆå°‘ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿå·²ç»æŠŠä»–ä»¬å±è”½æŽ‰äº†ï¼Œæä¾›äº†æŠ½è±¡çš„APIç»™æˆ‘ä»¬ä½¿ç”¨ã€‚ ä½†æ˜¯è¿˜å¿…é¡»ç†è§£å†¯è¯ºä¾æ›¼ä½“ç³»çš„ç»“æž„ï¼ŒCPUå’Œå†…å­˜ï¼Œç¡¬ç›˜ï¼Œå„ç§å¤–è®¾ä¹‹é—´çš„å…³ç³»ï¼Œå¯„å­˜å™¨ã€ç¼“å­˜ç­‰çŸ¥è¯†ã€‚ CPUæœ‰å“ªäº›æŒ‡ä»¤ï¼Œå¦‚ä½•æ‰§è¡Œè¿™äº›æŒ‡ä»¤ï¼Œå¦‚æžœå®žçŽ°æ•°ç»„ï¼Œç»“æž„ä½“ï¼Œå‡½æ•°è°ƒç”¨ï¼Œè¿™å°±æ¶‰åŠåˆ°æ±‡ç¼–çš„çŸ¥è¯†ã€‚ åƒåŽŸç ï¼Œåç ï¼Œè¡¥ç ï¼Œå®šç‚¹æ•°ã€æµ®ç‚¹æ•°çš„è¡¨ç¤ºå’Œè¿ç®—ä¹Ÿæ˜¯ç¼–ç¨‹ä¸­å¿…å¤‡çš„çŸ¥è¯†ï¼Œå‡ ä¹Žæ¯ç§è¯­è¨€éƒ½è¦æ¶‰åŠã€‚ çŽ°åœ¨å¾ˆå¤šè¯­è¨€éƒ½æ˜¯åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ï¼Œä½ åªè¦æ˜¯äº†è§£äº†è®¡ç®—æœºçš„ç»„æˆåŽŸç†ï¼Œå†åŽ»çœ‹å“ªäº›è™šæ‹Ÿæœºï¼Œå°±ä¼šå‘çŽ°æ¦‚å¿µéƒ½æ˜¯ç›¸é€šçš„ã€‚ å¦å¤–CPUä¸­çš„ç¼“å­˜ï¼Œç¼“å­˜ä¸€è‡´æ€§åè®®ï¼ŒDMAçš„å¼‚æ­¥æ€æƒ³éƒ½ä¼šåœ¨åº”ç”¨å±‚ä¸­æœ‰æ‰€ä½“çŽ°ã€‚ å¦‚æžœèƒ½æ‰¾ä¸€æœ¬ä¹¦ï¼Œå°½å¯èƒ½å¤šçš„å›Šæ‹¬è¿™äº›çŸ¥è¯†çš„è¯ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯ç¥žä¹¦ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹çš„å‰4ç« ã€‚ ã€Šç¼–ç ã€‹æ˜¯ä¸€ä¸ªæ›´åŠ ç§‘æ™®æ€§ï¼Œä½†æ˜¯ä¹Ÿæ›´åŠ æœ‰è¶£çš„è®²ç»„æˆåŽŸç†çš„ä¹¦ã€‚ äºŒã€æ“ä½œç³»ç»Ÿè¨€æ“ä½œç³»ç»Ÿæ˜¯æ¯”è¾ƒæž¯ç‡¥çš„ï¼Œ ç«™åœ¨åº”ç”¨å±‚çš„è§’åº¦ï¼Œæˆ‘è®¤ä¸ºé‡ç‚¹æ˜¯æŽŒæ¡æ“ä½œç³»ç»Ÿå¯¹å¤–æä¾›çš„æŠ½è±¡ï¼ŒåŒ…æ‹¬è¿›ç¨‹ã€çº¿ç¨‹ï¼Œæ–‡ä»¶ï¼Œè™šæ‹Ÿå†…å­˜ï¼Œä»¥åŠè¿›ç¨‹é—´çš„é€šä¿¡é—®é¢˜ã€‚ å‡ ä¹Žæ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½ä¼šæ¶‰åŠåˆ°å¯¹å¤šè¿›ç¨‹æˆ–è€…å¤šçº¿ç¨‹ç¼–ç¨‹çš„æ”¯æŒï¼Œ ç‰¹åˆ«æ˜¯å¤šçº¿ç¨‹çš„å¹¶å‘ç¼–ç¨‹ï¼Œæ‰€ä»¥å¿…é¡»å¾—æžæ˜Žç™½ä»–ä»¬çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Œçº¿ç¨‹éƒ½æœ‰å“ªäº›å®žçŽ°æ–¹å¼ï¼ˆå¯¹ä»¥åŽå­¦ä¹ å„ç§è¯­è¨€å’Œå¹¶å‘æ¨¡åž‹æœ‰æžå¤§å¥½å¤„ï¼‰ã€‚å¾—çœŸæ­£åœ°ä½“ä¼šåˆ°â€œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯è°ƒåº¦çš„æœ€å°å•ä½ã€‚â€ è¿™å¥è¯çš„å«ä¹‰ã€‚ å‡ ä¹Žæ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½ä¼šæ¶‰åŠåˆ°é”å’Œæ­»é”ï¼Œæœ€å¥½åœ¨æœ€åº•å±‚ç†è§£é”æ˜¯æ€Žä¹ˆå®žçŽ°çš„ã€‚ éœ€è¦ç†è§£è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜ç›´æŽ¥çš„å…³ç³»ï¼Œåˆ†æ®µå’Œåˆ†é¡µï¼Œæ–‡ä»¶ç³»ç»Ÿçš„åŸºæœ¬åŽŸç†ã€‚ å¯¹äºŽè¿›ç¨‹çš„è°ƒåº¦ï¼Œé¡µé¢åˆ†é…/ç½®æ¢ç®—æ³•ï¼Œç£ç›˜çš„è°ƒåº¦ç®—æ³•ï¼ŒI/Oç³»ç»Ÿï¼Œæˆ‘è®¤ä¸ºä¼˜å…ˆçº§æ¯”è¾ƒä½Žã€‚ ä¸‰ã€è®¡ç®—æœºç½‘ç»œæˆ‘è®¤ä¸ºå¿…é¡»è¦ç†è§£çš„æ˜¯è¿™äº›ï¼š ä»€ä¹ˆåˆ†ç»„äº¤æ¢ TCPå¯é æ€§ä¼ è¾“åŽŸç†ï¼ŒTCP/IPçš„åè®®ç»†èŠ‚ï¼Œ ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹ï¼ŒTCPçŠ¶æ€è½¬æ¢ã€‚ å‡ ä¸ªé‡è¦çš„åè®®DHCPï¼ŒUDP, ARP, DNSã€‚ èƒ½å¤Ÿè¯´å‡ºä¸€ä¸ªå®¢æˆ·ç«¯å¦‚ä½•åœ¨æŽ¥å…¥ç½‘ç»œä»¥åŽï¼Œé€šè¿‡è¿™äº›åè®®ï¼Œè·¨åŸŸç½‘ç»œå’ŒæœåŠ¡å™¨é€šä¿¡çš„ã€‚ å’Œåº”ç”¨å±‚ç»“åˆéžå¸¸ç´§å¯†çš„SocketçŸ¥è¯†å’Œç½‘ç»œå®‰å…¨ï¼ˆå¯¹ç§°åŠ å¯†ï¼Œéžå¯¹ç§°åŠ å¯†ï¼ŒHash, æ•°å­—ç­¾åï¼Œä»¥åŠé›†å¤§æˆè€…Httpsï¼‰ è‡³äºŽç½‘ç»œå±‚çš„è·¯ç”±é€‰æ‹©ç®—æ³•ï¼Œé“¾è·¯å±‚çš„å„ç§åè®®ï¼Œæˆ‘è®¤ä¸ºä¼˜å…ˆçº§æ¯”è¾ƒä½Žã€‚ è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œä¸€èˆ¬çš„ç½‘ç»œä¹¦éƒ½æ²¡æï¼Œå°±æ˜¯I/Oå¤šè·¯å¤ç”¨ï¼Œæ¶‰åŠåˆ°åŒæ­¥/å¼‚æ­¥ï¼Œé˜»å¡ž/éžé˜»å¡žï¼Œselect/epoll ï¼Œè¿™ä¸ªæ˜¯å¾ˆå¤šè½¯ä»¶çš„åŸºç¡€ï¼Œåœ¨ã€ŠUnixç½‘ç»œç¼–ç¨‹ã€‹ï¼Œã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ä¸­æœ‰è®²è¿°ã€‚ ä»¥ä¸Šè¿™äº›çŸ¥è¯†ï¼Œåœ¨ä½ å­¦ä¹ Redis ,Ngnix, Tomcat, LVSç­‰è½¯ä»¶æ—¶å°†æœ‰æžå¤§çš„å¸®åŠ©ã€‚ å››ã€æ•°æ®åº“ä½ è¿™ä¸€è¾ˆå­ä¹Ÿè®¸éƒ½ä¸ä¼šåŽ»å†™ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œä½†æ˜¯å¾ˆæœ‰å¯èƒ½ä¼šåˆ©ç”¨çŽ°æˆçš„å·¥å…·åŽ»ç”Ÿæˆ/æ“ä½œä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼Œç”šè‡³å¯ä»¥ä¼šå†™ä¸€ä¸ªDSLï¼ˆé¢†åŸŸç‰¹å®šè¯­è¨€ï¼‰ã€‚æ‰€ä»¥ä½ å¾—ç†è§£è¯æ³•åˆ†æžã€è¯­æ³•åˆ†æžã€è¯­ä¹‰åˆ†æžï¼Œä¸­é—´ä»£ç ç”Ÿæˆï¼Œä»£ç ä¼˜åŒ–è¿™ä¸ªåŸºæœ¬ç¼–è¯‘çš„è¿‡ç¨‹ã€‚ å­¦ä¹ äº†ç¼–è¯‘ä¸ŽåŽŸç†ï¼Œä¼šå¯¹è¯­è¨€çš„ä¸€äº›è®¾è®¡æœ‰æ›´æ·±çš„ç†è§£ï¼Œæ¯”å¦‚LISPã€‚ äº”ã€åˆ†å¸ƒå¼çš„ç†è®ºçŸ¥è¯†ç”±äºŽçŽ°åœ¨çš„ç³»ç»Ÿæ…¢æ…¢åœ°å˜æˆäº†åˆ†å¸ƒå¼ï¼Œ æ‰€ä»¥åˆæ‰©å±•å‡ºäº†å¾ˆå¤šç›¸å…³åŸºç¡€çŸ¥è¯†éœ€è¦å­¦ä¹ ï¼š æ•°æ®å¤åˆ¶ä¸Žä¸€è‡´æ€§: CAPç†è®ºï¼Œ BASEåŽŸåˆ™ï¼Œå¹‚ç­‰æ€§, 2PC, TCC Paxos , Raft , Gossip æ•°æ®åˆ†ç‰‡å’Œè·¯ç”±: Hashåˆ†ç‰‡ï¼šHashå–æ¨¡ï¼ˆå®žé™…ä¸­éžå¸¸å¸¸è§çš„ç®—æ³•ï¼‰ï¼Œ è™šæ‹Ÿæ¡¶ï¼ˆRedisä½¿ç”¨ï¼‰ï¼Œä¸€è‡´æ€§Hashï¼ˆmemcachedä½¿ç”¨ï¼‰ èŒƒå›´åˆ†ç‰‡ æœ€åŽæƒ³è¯´çš„æ˜¯ï¼Œä¸èƒ½å¸¦ç€ç‰¹åˆ«åŠŸåˆ©çš„ç›®çš„åŽ»å­¦ä¹ è¿™äº›åŸºç¡€ï¼Œä¸èƒ½æƒ³ç€ç«‹åˆ»ã€é©¬ä¸Šå°±åº”ç”¨åˆ°å®žæˆ˜ä¸­ï¼Œä»Žä¸­èŽ·ç›Šã€‚æ›´é‡è¦çš„ç†è§£æŽŒæ¡å®ƒä»¬èƒŒåŽçš„æ€æƒ³ï¼Œæœ‰ä¸€å¤©ä½ ä¼šå‘çŽ°ï¼šå¥¥ï¼Œè¿™ä¸ªé—®é¢˜æˆ‘åœ¨å“ªé‡Œè§è¿‡ï¼Œå¯ä»¥ç”¨ç±»ä¼¼çš„åŠžæ³•æ¥è§£å†³å•Šï¼]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå­¦ä¹ æ€»ç»“-æ•°ç»„]]></title>
    <url>%2Fposts%2F979f2162.html</url>
    <content type="text"><![CDATA[ä¸€ã€åˆ›å»ºæ–¹æ³•1ã€ç©ºæ•°ç»„1var Obj = new Array(); 2ã€æŒ‡å®šé•¿åº¦æ•°ç»„1var Obj = new Array(Size); 3ã€æŒ‡å®šå…ƒç´ æ•°ç»„1var Obj = new Array(å…ƒç´ 1,å…ƒç´ 2,å…ƒç´ 3,...,å…ƒç´ N); 4ã€å•ç»´æ•°ç»„1var Obj = [å…ƒç´ 1,å…ƒç´ 2,å…ƒç´ 3,...,å…ƒç´ N] 5ã€å¤šç»´æ•°ç»„1var a = new Array([æ•°ç»„åºåˆ—1],[æ•°ç»„åºåˆ—2],[æ•°ç»„åºåˆ—N]); äºŒã€åŸºæœ¬æ“ä½œ1ã€å­˜å–æ•°ç»„å…ƒç´  å•ç»´æ•°ç»„ 1æ•°ç»„å[ä¸‹æ ‡ç´¢å¼•] å¤šç»´æ•°ç»„ 1æ•°ç»„å[å¤–å±‚æ•°ç»„ä¸‹æ ‡][å†…å±‚å…ƒç´ ä¸‹æ ‡] ç‰¹æ€§ æ•°ç»„é•¿åº¦æ˜¯å¼¹æ€§çš„ï¼Œå¯è‡ªç”±ä¼¸ç¼© æ•°ç»„ä¸‹æ ‡ä»Ž0å¼€å§‹ ä¸‹æ ‡ç±»åž‹ æ•°å€¼ éžæ•°å€¼ è½¬ä¸ºå­—ç¬¦ä¸² ç”Ÿæˆå…³è”æ•°ç»„ ä¸‹æ ‡å°†ä½œä¸ºå¯¹è±¡å±žæ€§çš„åå­— æ•°ç»„å…ƒç´ å¯æ·»åŠ åˆ°å¯¹è±¡ä¸­ 2ã€å¢žåŠ æ•°ç»„1ä½¿ç”¨â€œ[]â€è¿ç®—ç¬¦æŒ‡å®šä¸€ä¸ªæ–°ä¸‹æ ‡ 3ã€åˆ é™¤æ•°ç»„1deleteæ•°ç»„å[ä¸‹æ ‡]; 4ã€éåŽ†æ•°ç»„1for(var æ•°ç»„å…ƒç´ å˜é‡ in æ•°ç»„) ä¸‰ã€æ•°ç»„å±žæ€§1ã€constructorå¼•ç”¨æ•°ç»„å¯¹è±¡çš„æž„é€ å‡½æ•° 2ã€lengthè¿”å›žæ•°ç»„çš„é•¿åº¦ 3ã€prototypeé€šè¿‡å¢žåŠ å±žæ€§å’Œæ–¹æ³•æ‰©å±•æ•°ç»„å®šä¹‰ å››ã€ECMAScript 3 æ–¹æ³•1ã€æ·»åŠ  push() åœ¨æ•°ç»„æœ«å°¾å¢žåŠ æ•°ç»„ unshift åœ¨æ•°ç»„å¤´éƒ¨æ·»åŠ å…ƒç´  concat åˆå¹¶ä¸¤ä¸ªæ•°ç»„ 2ã€åˆ é™¤ pop() åˆ é™¤å¹¶è¿”å›žæ•°å€¼çš„æœ€åŽä¸€ä¸ªå…ƒç´  shift() åˆ é™¤å¹¶è¿”å›žæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´  é˜Ÿåˆ—æ–¹æ³•ï¼Œå…ˆè¿›å…ˆå‡º æ ˆæ–¹æ³•ï¼ŒåŽè¿›å…ˆå‡º 3ã€å­æ•°ç»„ splice() åˆ é™¤ä»»æ„æ•°é‡çš„é¡¹ è¦åˆ é™¤çš„èµ·å§‹ä¸‹æ ‡ è¦åˆ é™¤çš„é¡¹æ•° åœ¨æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„é¡¹ èµ·å§‹ä¸‹æ ‡ 0ï¼ˆä¸åˆ é™¤ä»»ä½•é¡¹ï¼‰ è¦æ’å…¥çš„é¡¹ æ›¿æ¢ä»»æ„æ•°é‡çš„é¡¹ èµ·å§‹ä¸‹æ ‡ è¦åˆ é™¤çš„é¡¹æ•° è¦æ’å…¥çš„é¡¹ åŠŸèƒ½ ä»Žå·²æœ‰æ•°ç»„ä¸­é€‰å–éƒ¨åˆ†å…ƒç´ æž„æˆæ–°æ•°ç»„ å‚æ•° è¿”å›žé¡¹çš„èµ·å§‹ä½ç½® è¿”å›žé¡¹çš„ç»“æŸä½ç½® ç‰¹æ€§ å¦‚æžœæ˜¯è´Ÿæ•°ï¼Œåˆ™ç”¨æ•°ç»„é•¿åº¦åŠ ä¸Šè¯¥å€¼ç¡®å®šä½ç½® èµ·å§‹ä½ç½®å®žä¸ºæ•°ç»„çš„å®žé™…ä¸‹æ ‡ ç»“æŸä½ç½®çš„å®žé™…ä¸‹æ ‡ä¸ºç»“æŸæ•°å€¼å‡1 4ã€æ•°ç»„æŽ’åº reverse() é¢ å€’æ•°ç»„ä¸­å…ƒç´ çš„é¡ºåº sort() åŠŸèƒ½ï¼šå¯¹å­—ç¬¦æ•°ç»„æˆ–æ•°å­—æ•°ç»„è¿›è¡ŒæŽ’åº ç‰¹æ€§ï¼šæŒ‰æ•°å€¼å¤§å°æ¯”è¾ƒï¼Œéœ€å‡½æ•°æ”¯æŒï¼ˆå‡åºï¼‰ 12345678910functioncompare(value1,value2)&#123; if(value1 &lt; value2)&#123; return -1; &#125; else if(value1 &gt; value2)&#123; return 1; &#125; else &#123; return 0; &#125;&#125; 5ã€æ•°ç»„è½¬æ¢ toString() è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›ž toLocaleString() è½¬æ¢ä¸ºæœ¬åœ°æ ¼å¼å­—ç¬¦ä¸²å¹¶è¿”å›ž join() ç”¨æŒ‡å®šåˆ†éš”ç¬¦åˆ†å‰²æ•°ç»„å¹¶è½¬æ¢ä¸ºå­—ç¬¦ä¸² äº”ã€ECMAScript 5 æ–¹æ³•1ã€ä½ç½®æ–¹æ³• indexof ä»Žæ•°ç»„çš„èµ·å§‹ä½ç½®å¼€å§‹æŸ¥æ‰¾ lastIndexof ä»Žæ•°ç»„çš„ç»“æŸä½ç½®å¼€å§‹æŸ¥æ‰¾ å‚æ•° è¦æŸ¥æ‰¾çš„é¡¹ æ ‡è¯†æŸ¥æ‰¾èµ·ç‚¹çš„ä½ç½®ç´¢å¼• 2ã€è¿­ä»£æ–¹æ³• every å¦‚æžœè¯¥å‡½æ•°å¯¹æ¯ä¸€é¡¹éƒ½è¿”å›žtrueï¼Œåˆ™è¿”å›žtrue filter è¿”å›žå€¼ä¸ºtrueçš„æ‰€æœ‰æ•°ç»„æˆå‘˜ forEach æ— è¿”å›žå€¼ map è¿”å›žæ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æžœæ•°ç»„ some æœ‰ä»»æ„ä¸€é¡¹è¿”å›žtrueï¼Œåˆ™è¿”å›žtrue å‚æ•° æŽ¥æ”¶å‚æ•° è¦åœ¨æ¯ä¸€é¡¹ä¸Šè¿è¡Œçš„å‡½æ•° è¿è¡Œè¯¥å‡½æ•°çš„ä½œç”¨åŸŸå¯¹è±¡ ä¼ å…¥å‚æ•° æ•°ç»„é¡¹çš„å€¼ item è¯¥é¡¹åœ¨æ•°ç»„ä¸­çš„ä½ç½®index æ•°ç»„å¯¹è±¡æœ¬èº« array 3ã€ç¼©å°æ–¹æ³• reduce ä»Žæ•°ç»„èµ·å§‹ä½å¼€å§‹éåŽ† reduceRight ä»Žæ•°ç»„æœ«å°¾å¼€å§‹éåŽ† å‚æ•° æŽ¥æ”¶å‚æ•° æ¯ä¸€é¡¹ä¸Šè°ƒç”¨çš„å‡½æ•° ä½œä¸ºç¼©å°åŸºç¡€çš„åˆå§‹å€¼ ä¼ å…¥å‚æ•° å‰ä¸€ä¸ªå€¼ prev å½“å‰å€¼ cur é¡¹çš„ç´¢å¼• index æ•°ç»„å¯¹è±¡ array]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå­¦ä¹ æ€»ç»“-å‡½æ•°åŸºç¡€]]></title>
    <url>%2Fposts%2F5768cb4e.html</url>
    <content type="text"><![CDATA[ä¸€ã€å®šä¹‰æ–¹æ³•1ã€é™æ€æ–¹æ³•1234function å‡½æ•°å([è™šå‚æ•°åˆ—è¡¨])&#123; å‡½æ•°ä½“; [return[å‡½æ•°è¿”å›žå€¼;]]&#125; 2ã€åŠ¨æ€åŒ¿åæ–¹æ³•var å‡½æ•°å = new Function([â€œè™šå‚æ•°åˆ—è¡¨â€],â€å‡½æ•°ä½“â€); 3ã€ç›´æŽ¥é‡æ–¹æ³•å‡½æ•°å = function([è™šå‚æ•°åˆ—è¡¨]){å‡½æ•°ä½“;} äºŒã€è°ƒç”¨æ–¹æ³•1ã€ç›´æŽ¥è°ƒç”¨å‡½æ•°å(å®žå‚åˆ—è¡¨) 2ã€åœ¨è¿žæŽ¥ä¸­è°ƒç”¨1&lt;a herf = &quot;javascript:å‡½æ•°å()&quot;&gt;æè¿°å­—&lt;/a&gt; 3ã€åœ¨äº‹ä»¶ä¸­è°ƒç”¨äº‹ä»¶ç±»åž‹ = â€œå‡½æ•°å()â€ 4ã€é€’å½’è°ƒç”¨ å®šä¹‰ åœ¨å‡½æ•°ä½“å†…éƒ¨è°ƒç”¨å‡½æ•°è‡ªèº« æ ¼å¼ 1234function å‡½æ•°å()&#123; ä»£ç ; å‡½æ•°å();&#125; ä¸‰ã€æ–¹æ³•1ã€apply å°†å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•æ¥è°ƒç”¨ å°†å‚æ•°ä»¥æ•°ç»„å½¢å¼ä¼ é€’ç»™è¯¥æ–¹æ³• 2ã€call å°†å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•æ¥è°ƒç”¨ å°†æŒ‡å®šå‚æ•°ä¼ é€’ç»™è¯¥æ–¹æ³• 3ã€toString è¿”å›žå‡½æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤º å››ã€argumentså¯¹è±¡1ã€åŠŸèƒ½ å­˜æ”¾å®žå‚çš„å‚æ•°åˆ—è¡¨ 2ã€ç‰¹æ€§ ä»…èƒ½åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨ å¸¦æœ‰ä¸‹æ ‡å±žæ€§ï¼Œå¹¶éžæ•°ç»„ å‡½æ•°å£°æ˜Žæ—¶è‡ªåŠ¨åˆå§‹åŒ– 3ã€å±žæ€§ length èŽ·å–å‡½æ•°å®žå‚çš„é•¿åº¦ callee è¿”å›žå½“å‰æ­£åœ¨æŒ‡å‘çš„å‡½æ•° caler è¿”å›žè°ƒç”¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°çš„å‡½æ•°å äº”ã€å‡½æ•°å‚æ•°1ã€å‚æ•°ç±»åž‹ å½¢å‚ å®šä¹‰å‡½æ•°æ—¶ä½¿ç”¨çš„å‚æ•° æŽ¥æ”¶è¯¥å‡½æ•°æ—¶ä¼ é€’çš„å‚æ•° å®žå‚ è°ƒç”¨å‡½æ•°æ—¶ä¼ é€’ç»™å‡½æ•°çš„å®žé™…å‚æ•° 2ã€ç‰¹æ€§ å‚æ•°ä¸ªæ•°æ²¡æœ‰é™åˆ¶ å®žå‚ &lt; å½¢å‚ ï¼šå¤šä½™å½¢å‚ = undefined å®žå‚ &gt; å½¢å‚ ï¼šå¤šä½™å®žå‚è¢«å¿½ç•¥ å‚æ•°çš„æ•°æ®ç±»åž‹æ²¡æœ‰é™åˆ¶ é€šè¿‡argumentså¯¹è±¡è®¿é—®å‚æ•°æ•°ç»„ å‚æ•°å§‹ç»ˆæŒ‰å€¼ä¼ é€’ åŸºæœ¬ç±»åž‹ï¼šä¼ å€¼ å¼•ç”¨ç±»åž‹ï¼šä¼ å€ å…­ã€æŒ‡é’ˆæ ‡è¯†1ã€thisæŒ‡å‘å½“å‰æ“ä½œå¯¹è±¡ 2ã€calleeæŒ‡å‘å½¢å‚é›†åˆæ‰€å±žå‡½æ•° 3ã€prototypeæŒ‡å‘å‡½æ•°é™„å¸¦çš„åŽŸåž‹å¯¹è±¡ 4ã€constructoræŒ‡å‘åˆ›å»ºè¯¥å¯¹è±¡çš„æž„é€ å‡½æ•°]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå­¦ä¹ æ€»ç»“-è¿ç®—ç¬¦]]></title>
    <url>%2Fposts%2F4cf212f3.html</url>
    <content type="text"><![CDATA[ä¸€ã€ç®—æœ¯è¿ç®—ç¬¦1ã€è¿ç®—ç¬¦aã€+ åŠŸèƒ½ å¯¹æ•°å­—è¿›è¡Œä»£æ•°æ±‚å’Œ å¯¹å­—ç¬¦ä¸²è¿›è¡Œè¿žæŽ¥æ“ä½œ å°†ä¸€ä¸ªæ•°å€¼è½¬æ¢æˆå­—ç¬¦ä¸²ï¼ˆæ•°å€¼+ç©ºå­—ç¬¦ä¸²ï¼‰ å­—ç¬¦ä¸²æ‹¼æŽ¥ å­—ç¬¦ä¸²+å­—ç¬¦ä¸²ï¼ˆäºŒè€…ç›´æŽ¥æ‹¼æŽ¥ï¼‰ å­—ç¬¦ä¸²+æ•°å€¼ï¼ˆæ•°å€¼è½¬ä¸ºå­—ç¬¦ä¸²å†æ‹¼æŽ¥ï¼‰ bã€- åŠŸèƒ½ å¯¹æ“ä½œæ•°è¿›è¡Œâ€œå–åâ€æ“ä½œ å¯¹æ•°å­—è¿›è¡Œå‡æ³•æ“ä½œ å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å€¼ï¼ˆæ•°å€¼åž‹å­—ç¬¦ä¸² - 0ï¼‰ cã€* åŠŸèƒ½ å¯¹ä¸¤ä¸ªè¿ç®—æ•°è¿›è¡Œä¹˜æ³•è¿ç®— ç¬¦å·é—®é¢˜ åŒå·å¾—æ­£ï¼Œå¼‚å·å¾—è´Ÿ dã€/ åŠŸèƒ½ å¯¹ä¸¤ä¸ªè¿ç®—æ•°è¿›è¡Œé™¤æ³•è¿ç®— ç¬¦å·é—®é¢˜ åŒå·å¾—æ­£ï¼Œå¼‚å·å¾—è´Ÿ eã€% åŠŸèƒ½ è¿”å›žä¸¤ä¸ªé™¤æ•°çš„ä½™æ•° ç¬¦å·é—®é¢˜ å’Œç¬¬ä¸€ä¸ªè¿ç®—æ•°çš„ç¬¦å·ç›¸åŒ 2ã€å¤åˆèµ‹å€¼è¿ç®—ç¬¦ +=ã€- =ã€*=ã€/=ã€%= äºŒã€è‡ªå¢žä¸Žè‡ªå‡1ã€åŠŸèƒ½ç›¸å ++ï¼šå¯¹å”¯ä¸€çš„è¿ç®—æ•°è¿›è¡Œé€’å¢žæ“ä½œï¼ˆæ¯æ¬¡åŠ 1ï¼‰ â€”ï¼šå¯¹å”¯ä¸€çš„è¿ç®—æ•°è¿›è¡Œé€’å‡æ“ä½œï¼ˆæ¯æ¬¡å‡1ï¼‰ 2ã€è§„åˆ™ç›¸åŒ è¿ç®—æ•°å¿…é¡»æ˜¯ä¸€ä¸ªå˜é‡ã€æ•°ç»„çš„ä¸€ä¸ªå…ƒç´ æˆ–è€…å¯¹è±¡çš„å±žæ€§ å¦‚æžœè¿ç®—æ•°æ˜¯éžæ•°å€¼çš„åˆ™è¿ç®—ç¬¦ä¼šå°†å®ƒè½¬æˆæ•°å€¼ 3ã€ç¬¦å·ä½ç½®å†³å®šè¿ç®—ç»“æžœ è¿ç®—æ•°ä¹‹å‰ï¼šå…ˆè¿›è¡Œé€’å¢žï¼ˆé€’å‡ï¼‰æ“ä½œï¼Œå†è¿›è¡Œæ±‚å€¼ è¿ç®—æ•°ä¹‹åŽï¼šå…ˆæ±‚å€¼ï¼Œå†è¿›è¡Œé€’å¢žï¼ˆé€’å‡ï¼‰æ“ä½œ ä¸‰ã€å…³ç³»è¿ç®—ç¬¦1ã€å¤§å°å…³ç³»æ£€æµ‹aã€è¿ç®—ç¬¦ &lt; ï¼šå¦‚æžœAå°äºŽBï¼Œåˆ™è¿”å›žtrueï¼Œå¦åˆ™è¿”å›žfalse &lt;=ï¼šå¦‚æžœAå°äºŽç­‰äºŽBï¼Œåˆ™è¿”å›žtrueï¼Œå¦åˆ™è¿”å›žfalse &gt;=ï¼šå¦‚æžœAå¤§äºŽç­‰äºŽBï¼Œåˆ™è¿”å›žtrueï¼Œå¦åˆ™è¿”å›žfalse &gt;ï¼šå¦‚æžœAå¤§äºŽBï¼Œåˆ™è¿”å›žtrueï¼Œå¦åˆ™è¿”å›žfalse bã€æ“ä½œè§„åˆ™ æ•°å€¼ä¸Žæ•°å€¼çš„æ¯”è¾ƒï¼šæ¯”è¾ƒå®ƒä»¬çš„ä»£æ•°å€¼ ä»…ä¸€ä¸ªè¿ç®—æ•°æ˜¯æ•°å€¼ï¼šå°†å¦ä¸€ä¸ªè¿ç®—æ•°è½¬æ¢æˆæ•°å€¼ï¼Œå¹¶æ¯”è¾ƒå®ƒä»¬çš„ä»£æ•°å€¼ å­—ç¬¦ä¸²é—´çš„æ¯”è¾ƒï¼šé€å­—ç¬¦æ¯”è¾ƒå®ƒä»¬çš„Unicodeæ•°å€¼ å­—ç¬¦ä¸²ä¸Žéžæ•°å€¼çš„æ¯”è¾ƒï¼šå°†è¿ç®—ç¬¦è½¬æ¢æˆå­—ç¬¦ä¸²å¹¶è¿›è¡Œæ¯”è¾ƒ è¿ç®—æ•°å³éžæ•°å€¼ä¹Ÿéžå­—ç¬¦ä¸²ï¼šè½¬æ¢æˆæ•°å€¼æˆ–å­—ç¬¦ä¸²åŽè¿›è¡Œæ¯”è¾ƒ è¿ç®—æ•°æ— æ³•è½¬æ¢æˆæ•°å€¼æˆ–å­—ç¬¦ä¸²ï¼šè¿”å›žå€¼ä¸ºfalse ä¸ŽNaNçš„æ¯”è¾ƒï¼šè¿”å›žå€¼ä¸ºfalse 2ã€ç­‰å€¼å…³ç³»æ£€æµ‹aã€ç›¸ç­‰æ¯”è¾ƒ æ“ä½œç¬¦ ==ï¼šæ¯”è¾ƒä¸¤ä¸ªè¿ç®—æ•°çš„è¿”å›žå€¼çœ‹æ˜¯å¦ç›¸ç­‰ !=ï¼šæ¯”è¾ƒä¸¤ä¸ªè¿ç®—æ•°çš„è¿”å›žå€¼çœ‹æ˜¯å¦ä¸ç›¸ç­‰ ç±»åž‹è½¬æ¢ å¸ƒå°”å€¼ trueï¼š1 falseï¼š0 å¯¹è±¡ è°ƒç”¨valueOf()ï¼ŒåŸºæœ¬ç±»åž‹ å­—ç¬¦ä¸²ä¸Žæ•°å€¼çš„æ¯”è¾ƒ å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å€¼ æ¯”è¾ƒåŽŸåˆ™ nullä¸Žundefined ç›¸ç­‰ æ¯”è¾ƒå‰ä¸è¿›è¡Œä»»ä½•è½¬æ¢ NaN ä¸Žä»»ä½•æ•°å€¼éƒ½ä¸ç›¸ç­‰åŒ…æ‹¬å…¶æœ¬èº« å¯¹è±¡ æ˜¯å¦å±žäºŽåŒä¸€å¯¹è±¡ æ˜¯ï¼š== å¦ï¼š!= bã€ç›¸åŒæ¯”è¾ƒ è¿ç®—ç¬¦ ===ï¼šæ¯”è¾ƒä¸¤ä¸ªè¿ç®—æ•°çš„è¿”å›žå€¼åŠæ•°æ®ç±»åž‹çœ‹æ˜¯å¦ç›¸åŒ !==ï¼šæ¯”è¾ƒä¸¤ä¸ªè¿ç®—æ•°çš„è¿”å›žå€¼åŠæ•°æ®ç±»åž‹çœ‹æ˜¯å¦ä¸åŒ æ¯”è¾ƒåŽŸåˆ™ å€¼ç±»åž‹æ¯”è¾ƒ åªæœ‰æ•°æ®ç±»åž‹ç›¸åŒï¼Œä¸”æ•°å€¼ç›¸ç­‰æ—¶æ‰èƒ½å¤Ÿç›¸åŒ å€¼ç±»åž‹ä¸Žå¼•ç”¨ç±»åž‹æ¯”è¾ƒ è‚¯å®šä¸ç›¸åŒ å¼•ç”¨ç±»åž‹é—´æ¯”è¾ƒ æ¯”è¾ƒå®ƒä»¬çš„å¼•ç”¨å€¼ï¼ˆå†…å­˜åœ°å€ï¼‰ å››ã€å¯¹è±¡è¿ç®—ç¬¦ inï¼šåˆ¤æ–­å·¦ä¾§è¿ç®—æ•°æ˜¯å¦ä¸ºå³ä¾§è¿ç®—æ•°çš„æˆå‘˜ instancesofï¼šåˆ¤æ–­å¯¹è±¡å®žä¾‹æ˜¯å¦å±žäºŽæŸä¸ªç±»æˆ–æž„é€ å‡½æ•° newï¼šæ ¹æ®æž„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–è¯¥å¯¹è±¡ deleteï¼šåˆ é™¤æŒ‡å®šå¯¹è±¡çš„å±žæ€§ï¼Œæ•°ç»„å…ƒç´ æˆ–å˜é‡ .åŠ[]ï¼šå­˜å–å¯¹è±¡æˆ–æ•°ç»„å…ƒç´  ()ï¼šå‡½æ•°è°ƒç”¨ï¼Œæ”¹å˜è¿ç®—è¿ç®—ç¬¦ä¼˜å…ˆçº§ç­‰ äº”ã€é€»è¾‘è¿ç®—ç¬¦1ã€! é€»è¾‘éžaã€è¿”å›žå€¼ true ç©ºå­—ç¬¦ä¸² 0 null NaN undefined false å¯¹è±¡ éžç©ºå­—ç¬¦ä¸² éž0æ•°å€¼ï¼ˆInfinityï¼‰ bã€ç‰¹æ€§ å¦‚æžœè¿ç®—æ•°çš„å€¼ä¸ºfalseåˆ™è¿”å›žtrueï¼Œå¦åˆ™è¿”å›žfalse è¿žç»­ä½¿ç”¨ä¸¤æ¬¡!ï¼Œå¯å°†ä»»æ„ç±»åž‹è½¬ä¸ºå¸ƒå°”å€¼ 2ã€&amp;&amp;é€»è¾‘ä¸Žaã€è§„åˆ™ ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼šè¿”å›žç¬¬äºŒä¸ªæ“ä½œæ•° ç¬¬äºŒä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼šç¬¬ä¸€ä¸ªæ“ä½œæ•°å€¼ä¸ºtrueæ—¶è¿”å›žè¯¥å¯¹è±¡ ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å¯¹è±¡ï¼šè¿”å›žç¬¬äºŒä¸ªæ“ä½œæ•° ä¸€ä¸ªæ“ä½œæ•°æ˜¯nullï¼šè¿”å›žnull ä¸€ä¸ªæ“ä½œæ•°æ˜¯NaNï¼šè¿”å›žNaN ä¸€ä¸ªæ“ä½œæ•°æ˜¯undefinedï¼šè¿”å›žundefined bã€ç‰¹æ€§ å½“ä¸”ä»…å½“ä¸¤ä¸ªè¿ç®—æ•°çš„å€¼éƒ½æ˜¯trueæ—¶ï¼Œæ‰è¿”å›žtrueï¼Œå¦åˆ™è¿”å›žfalse çŸ­è·¯æ“ä½œï¼šå½“ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„å€¼ä¸ºfalseåˆ™ä¸å†å¯¹ç¬¬äºŒä¸ªæ“ä½œæ•°è¿›è¡Œæ±‚å€¼ 3ã€||é€»è¾‘æˆ–aã€è§„åˆ™ ç¬¬ä¸€ä¸ªæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼šè¿”å›žç¬¬ä¸€ä¸ªæ“ä½œæ•° ç¬¬ä¸€ä¸ªæ“ä½œæ•°å€¼ä¸ºfalseï¼šè¿”å›žç¬¬äºŒä¸ªæ“ä½œæ•° ä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å¯¹è±¡ï¼šè¿”å›žç¬¬ä¸€ä¸ªæ“ä½œæ•° ä¸¤ä¸ªæ“ä½œæ•°æ˜¯nullï¼šè¿”å›žnull ä¸¤ä¸ªæ“ä½œæ•°æ˜¯NaNï¼šè¿”å›žNaN ä¸¤ä¸ªæ“ä½œæ•°æ˜¯undefinedï¼šè¿”å›žundefined bã€ç‰¹æ€§ å½“ä¸”ä»…å½“è¿žä¸ªè¿ç®—æ•°çš„å€¼éƒ½æ˜¯falseæ—¶ï¼Œæ‰è¿”å›žfalseï¼Œå¦åˆ™è¿”å›žtrue å¦‚æžœç¬¬ä¸€ä¸ªæ“ä½œæ•°ä¸ºtrueï¼Œåˆ™ä¸ä¼šå¯¹ç¬¬äºŒä¸ªæ“ä½œæ•°è¿›è¡Œæ±‚å€¼ å…­ã€ä½è¿ç®—ç¬¦1ã€åŸºç¡€çŸ¥è¯†aã€ç±»åž‹ æœ‰ç¬¦å· æ•°å€¼ä½ï¼šå‰31ä½ ç¬¦å·ä½ï¼šç¬¬32ä½ 0ï¼šæ­£æ•° 1ï¼šè´Ÿæ•° æ— ç¬¦å· åªèƒ½æ˜¯æ­£æ•° ç¬¬32ä½è¡¨ç¤ºæ•°å€¼ æ•°å€¼èŒƒå›´å¯ä»¥åŠ å¤§ bã€æ•°å€¼èŒƒå›´ - 2147483648 ~ 2147483647 cã€å­˜å‚¨æ–¹å¼ æ­£æ•° çº¯äºŒè¿›åˆ¶å­˜å‚¨ 31ä½ä¸­æ¯ä¸€ä½è¡¨ç¤º2çš„å¹‚ ç”¨0è¡¥å……æ— ç”¨ä½ è´Ÿæ•° äºŒè¿›åˆ¶è¡¥ç å­˜å‚¨ è¡¥ç çš„è®¡ç®—æ­¥éª¤ ç¡®å®šè¯¥æ•°å­—çš„éžè´Ÿç‰ˆæœ¬çš„äºŒè¿›åˆ¶è¡¨ç¤º æ±‚å¾—äºŒè¿›åˆ¶åç ï¼Œæ—¢è¦æŠŠ0æ›¿æ¢ä¸º1ï¼ŒæŠŠ1æ›¿æ¢ä¸º0 åœ¨äºŒè¿›åˆ¶åç ä¸ŠåŠ 1 dã€å½“åš0æ¥å¤„ç†çš„ç‰¹æ®Šå€¼ NaN Infinity 2ã€é€»è¾‘ä½è¿ç®—ç¬¦aã€è¿”å›žå€¼ä¸º1 æŒ‰ä½éž~ï¼š0 æŒ‰ä½ä¸Ž&amp;ï¼šå¯¹åº”ä½å…¨æ˜¯1 æŒ‰ä½æˆ–|ï¼šä»»ä½•ä¸€ä½éƒ½æ˜¯1 æŒ‰ä½å¼‚æˆ–^ï¼šæ—¢ä¸åŒæ—¶ä¸º0ï¼Œä¹Ÿä¸åŒæ—¶ä¸º1 bã€è¿”å›žå€¼ä¸º0 æŒ‰ä½éž~ï¼š1 æŒ‰ä½ä¸Ž&amp;ï¼šä»»ä½•ä¸€ä½éƒ½æ˜¯0 æŒ‰ä½æˆ–|ï¼šå¯¹åº”ä½å…¨æ˜¯0 æŒ‰ä½å¼‚æˆ–^ï¼šå¯¹åº”ä½å…¨æ˜¯0æˆ–å…¨æ˜¯1 3ã€ä½ç§»æ“ä½œaã€å·¦ç§»&lt;&lt; å°†æ•°å€¼çš„æ‰€æœ‰ä½å·¦ç§»æŒ‡å®šçš„ä½æ•° æ‰€æœ‰ç©ºä½ç”¨0è¡¥å…… å·¦ç§»1ä½å¯¹å…¶ä¹˜2ï¼Œå·¦ç§»2ä¸ºå¯¹å…¶ä¹˜4ï¼Œä»¥æ­¤ç±»æŽ¨ bã€æœ‰ç¬¦å·å³ç§»&gt;&gt; å°†æ•°å€¼çš„æ‰€æœ‰ä½å³ç§»æŒ‡å®šçš„ä½æ•° ç§»é™¤ä½è¢«èˆå¼ƒ ä¿ç•™ç¬¦å·ä½ å³ç§»1ä½å¯¹å…¶é™¤2ï¼Œå³ç§»2ä¸ºå¯¹å…¶é™¤4ï¼Œä»¥æ­¤ç±»æŽ¨ cã€æ— ç¬¦å·å³ç§»&gt;&gt; æ­£æ•°ï¼šä¸Žæœ‰ç¬¦å·å³ç§»ç»“æžœç›¸åŒ è´Ÿæ•°ï¼šä¼šå‡ºçŽ°æ— é™å¤§çš„æ•°å€¼ 4ã€å¤åˆèµ‹å€¼è¿ç®—ç¬¦ ä½æ“ä½œç¬¦ä¸Žç­‰å·ç»“åˆï¼Œå¤åˆèµ‹å€¼ä¸ä¼šæœ‰æ€§èƒ½æ–¹é¢çš„æå‡ ä¸ƒã€å…¶ä»–è¿ç®—ç¬¦1ã€? æ¡ä»¶è¿ç®—ç¬¦ï¼Œç®€æ´çš„if else 2ã€type of ç±»åž‹åˆ¤å®šè¿ç®—ç¬¦ 3ã€, é€—å·ï¼Œåœ¨ä¸€è¡Œè¯­å¥ä¸­æ‰§è¡Œå¤šä¸ªä¸åŒçš„æ“ä½œ 4ã€void èˆå¼ƒè¿ç®—æ•°çš„å€¼ï¼Œè¿”å›žundefinedä½œä¸ºè¡¨è¾¾å¼çš„å€¼]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå­¦ä¹ æ€»ç»“-DOMåŸºæœ¬æ“ä½œ]]></title>
    <url>%2Fposts%2Faf67cb0c.html</url>
    <content type="text"><![CDATA[ä¸€ã€èŽ·å–èŠ‚ç‚¹1ã€document getElementById è¯­æ³•ï¼šdocument.getElementById(å…ƒç´ id) åŠŸèƒ½ï¼šé€šè¿‡å…ƒç´ IDèŽ·å–èŠ‚ç‚¹ getElementByName è¯­æ³•ï¼šdocument.getElementByName(å…ƒç´ nameå±žæ€§) åŠŸèƒ½ï¼šé€šè¿‡å…ƒç´ çš„nameå±žæ€§èŽ·å–èŠ‚ç‚¹ getElementByTagName è¯­æ³•ï¼šdocument.getElementByTagName(å…ƒç´ æ ‡ç­¾) åŠŸèƒ½ï¼šé€šè¿‡å…ƒç´ æ ‡ç­¾èŽ·å–èŠ‚ç‚¹ 2ã€èŠ‚ç‚¹æŒ‡é’ˆ firstChild è¯­æ³•ï¼šçˆ¶èŠ‚ç‚¹.firstChild åŠŸèƒ½ï¼šèŽ·å–å…ƒç´ çš„é¦–ä¸ªå­èŠ‚ç‚¹ lastChild è¯­æ³•ï¼šçˆ¶èŠ‚ç‚¹.lastChild åŠŸèƒ½ï¼šèŽ·å–å…ƒç´ çš„æœ€å¥½ä¸€ä¸ªå­èŠ‚ç‚¹ childNodes è¯­æ³•ï¼šçˆ¶èŠ‚ç‚¹.childNodes åŠŸèƒ½ï¼šèŽ·å–å…ƒç´ çš„å­èŠ‚ç‚¹åˆ—è¡¨ previousSibling è¯­æ³•ï¼šå…„å¼ŸèŠ‚ç‚¹.previousSibling åŠŸèƒ½ï¼šèŽ·å–å·²çŸ¥èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ nextSibling è¯­æ³•ï¼šå…„å¼ŸèŠ‚ç‚¹.nextSibling åŠŸèƒ½ï¼šèŽ·å–å·²çŸ¥èŠ‚ç‚¹çš„åŽä¸€ä¸ªèŠ‚ç‚¹ parentNodes è¯­æ³•ï¼šå­èŠ‚ç‚¹.parentNodes åŠŸèƒ½ï¼šèŽ·å–å·²çŸ¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ äºŒã€èŠ‚ç‚¹æ“ä½œ1ã€åˆ›å»ºèŠ‚ç‚¹ createElement è¯­æ³•ï¼šdocument.createElement(å…ƒç´ æ ‡ç­¾) åŠŸèƒ½ï¼šåˆ›å»ºå…ƒç´ èŠ‚ç‚¹ createAttribute è¯­æ³•ï¼šdocumen.createAttribute(å…ƒç´ å±žæ€§) åŠŸèƒ½ï¼šåˆ›å»ºå±žæ€§èŠ‚ç‚¹ createTextNode è¯­æ³•ï¼šdocument.createTextNode(æ–‡æœ¬å†…å®¹) åŠŸèƒ½ï¼šåˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ 2ã€æ’å…¥èŠ‚ç‚¹ appendChild è¯­æ³•ï¼šappendChild(æ‰€æ·»åŠ çš„æ–°èŠ‚ç‚¹) åŠŸèƒ½ï¼šå‘èŠ‚ç‚¹çš„å­èŠ‚ç‚¹åˆ—è¡¨çš„æœ«å°¾æ·»åŠ æ–°çš„å­èŠ‚ç‚¹ insertBefore è¯­æ³•ï¼šinsertBefore(æ‰€è¦æ·»åŠ çš„æ–°èŠ‚ç‚¹ï¼Œå·²çŸ¥å­èŠ‚ç‚¹) åŠŸèƒ½ï¼šåœ¨å·²çŸ¥å­èŠ‚ç‚¹é’±æ’å…¥ä¸€ä¸ªæ–°çš„å­èŠ‚ç‚¹ 3ã€æ›¿æ¢èŠ‚ç‚¹ replaceChild è¯­æ³•ï¼šreplaceChild(è¦æ’å…¥çš„æ–°å…ƒç´ ï¼Œå°†è¢«æ›¿æ¢çš„è€å…ƒç´ ) åŠŸèƒ½ï¼šå°†æŸä¸ªå­èŠ‚ç‚¹æ›¿æ¢ä¸ºå¦ä¸€ä¸ª 4ã€å¤åˆ¶èŠ‚ç‚¹ cloneNode è¯­æ³•ï¼šéœ€è¦è¢«å¤åˆ¶çš„èŠ‚ç‚¹.cloneNode(true/fasle) åŠŸèƒ½ï¼šåˆ›å»ºç½®é¡¶èŠ‚ç‚¹çš„å‰¯æœ¬ å‚æ•° trueï¼šå¤åˆ¶å½“å‰èŠ‚ç‚¹åŠå…¶æ‰€æœ‰å­èŠ‚ç‚¹ falseï¼šä»…å¤åˆ¶å½“å‰èŠ‚ç‚¹ 5ã€åˆ é™¤èŠ‚ç‚¹ removeChild è¯­æ³•ï¼šremoveChild*(è¦åˆ é™¤çš„èŠ‚ç‚¹) åŠŸèƒ½ï¼šåˆ é™¤æŒ‡å®šçš„èŠ‚ç‚¹ ä¸‰ã€å±žæ€§æ“ä½œ1ã€èŽ·å–å±žæ€§ getAttribute è¯­æ³•ï¼šå…ƒç´ èŠ‚ç‚¹.getAttribute(å…ƒç´ å±žæ€§å) åŠŸèƒ½ï¼šèŽ·å–å…ƒç´ èŠ‚ç‚¹ä¸­æŒ‡å®šå±žæ€§çš„å±žæ€§å€¼ 2ã€è®¾ç½®è®¾ç½®å±žæ€§ setAttribute è¯­æ³•ï¼šå…ƒç´ èŠ‚ç‚¹.setAttribute(å±žæ€§å,å±žæ€§å€¼) åŠŸèƒ½ï¼šåˆ›å»ºæˆ–æ”¹å˜å…ƒç´ èŠ‚ç‚¹çš„å±žæ€§ 3ã€åˆ é™¤å±žæ€§ removeAttribute è¯­æ³•ï¼šå…ƒç´ èŠ‚ç‚¹.removeAttribute(å±žæ€§å) åŠŸèƒ½ï¼šåˆ é™¤å…ƒç´ ä¸­çš„æŒ‡å®šå±žæ€§ å››ã€æ–‡æœ¬æ“ä½œ insertData(offset,string) ï¼šä»ŽoffsetæŒ‡å®šçš„ä½ç½®æ’å…¥string appendata(sring) ï¼šå°†stringæ’å…¥åˆ°æ–‡æœ¬èŠ‚ç‚¹çš„æœ«å°¾å¤„ deleteData(offset,count) ï¼šä»Žoffsetèµ·åˆ é™¤countä¸ªå­—ç¬¦ replaceData(off,count,string) ï¼šä»Žoffå°†countä¸ªå­—ç¬¦ç”¨stringæ›¿ä»£ splitData(offset)ï¼šä»Žoffsetèµ·å°†æ–‡æœ¬èŠ‚ç‚¹åˆ†æˆä¸¤ä¸ªèŠ‚ç‚¹ substring(offset,count)ï¼šè¿”å›žç”±offsetèµ·çš„countä¸ªèŠ‚ç‚¹]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå­¦ä¹ æ€»ç»“-æµç¨‹è¯­å¥]]></title>
    <url>%2Fposts%2F121ee7e9.html</url>
    <content type="text"><![CDATA[ä¸€ã€å¾ªçŽ¯è¯­å¥1ã€while è¯­æ³• 123while(æ¡ä»¶è¡¨è¾¾å¼)&#123; å¾ªçŽ¯æ‰§è¡Œä»£ç æ®µ&#125; æµç¨‹ åˆ¤æ–­æ¡ä»¶è¡¨è¾¾å¼çš„å€¼ å½“å€¼ä¸ºtrueæ—¶å¾ªçŽ¯æ‰§è¡Œä»£ç æ®µ å½“å€¼ä¸ºfalseæ—¶é€€å‡ºå¾ªçŽ¯ä½“ çƒ­æ€§ å…ˆæ£€æŸ¥æ¡ä»¶ï¼Œå†æ‰§è¡Œå¾ªçŽ¯ æ¡ä»¶ä¸æ»¡è¶³åˆ™å¾ªçŽ¯ä¸€æ¬¡ä¹Ÿä¸æ‰§è¡Œ æ—¶æœº ä¸€ä¸ªåŠ¨ä½œè¢«é‡å¤æ‰§è¡Œåˆ°æ»¡è¶³æŸä¸ª æ¡ä»¶æ—¶ 2ã€do-while è¯­æ³• 123do&#123; å¾ªçŽ¯æ‰§è¡Œçš„ä»£ç æ®µ&#125;while(æ¡ä»¶è¡¨è¾¾å¼) æµç¨‹ å…ˆæ‰§è¡Œå¾ªçŽ¯ä½“å†…ä»£ç æ®µå†è¿›è¡Œåˆ¤æ–­ å¦‚æžœè¡¨è¾¾å¼çš„å€¼ä¸ºtrueï¼Œåˆ™é‡å¤æ‰§è¡Œä»£ç æ®µ å¦‚æžœè¡¨è¾¾å¼çš„å€¼ä¸ºfalseï¼Œåˆ™é€€å‡ºå¾ªçŽ¯ä½“ ç‰¹æ€§ å…ˆæ‰§è¡Œå¾ªçŽ¯ä½“ï¼Œå†è¿›è¡Œæ¡ä»¶åˆ¤æ–­ å¾ªçŽ¯ä½“å†…ä»£ç è‡³å°‘æ‰§è¡Œä¸€æ¬¡ æ—¶æœº å¸Œæœ›ä¸€ä¸ªåŠ¨ä½œè‡³å°‘è¢«æ‰§è¡Œä¸€æ¬¡æ—¶ 3ã€for è¯­æ³• 123for(å¾ªçŽ¯å˜é‡ = åˆå€¼;å¾ªçŽ¯æ¡ä»¶;é€’å¢ž/é€’å‡è®¡æ•°å™¨)&#123; å¾ªçŽ¯ä»£ç æ®µ&#125; æµç¨‹ ç”¨å¾ªçŽ¯å˜é‡åˆå§‹å€¼ä¸Žå¾ªçŽ¯æ¡ä»¶ç›¸æ¯”è¾ƒï¼Œç¡®å®šè¿”å›žå€¼ å¦‚æžœè¿”å›žå€¼ä¸ºtrueåˆ™æ‰§è¡Œå¾ªçŽ¯ä½“ æ‰§è¡Œå®Œä¸€æ¬¡åŽè¿›è¡Œé€’å¢ž/é€’å‡è¿ç®— å°†è¿ç®—ç»“æžœä¸Žå¾ªçŽ¯æ¡ä»¶ç›¸æ¯”è¾ƒ å¦‚æžœè¿”å›žå€¼ä¸ºtrueåˆ™ç»§ç»­æ‰§è¡Œå¾ªçŽ¯ä½“ å¦‚æžœè¿”å›žå€¼ä¸ºfalseåˆ™é€€å‡ºå¾ªçŽ¯ä½“ æ—¶æœº é‡å¤ä¸€ä¸ªåŠ¨ä½œåˆ°ä¸€å®šæ¬¡æ•°æ—¶ 4ã€for-in è¯­æ³• 123for(å£°æ˜Žå˜é‡ in å¯¹è±¡)&#123; ä»£ç æ®µ&#125; ä½œç”¨ æžšä¸¾å¯¹è±¡å±žæ€§ æ³¨æ„äº‹é¡¹ å¾ªçŽ¯è¾“å‡ºçš„å±žæ€§é¡ºåºä¸å¯é¢„çŸ¥ å¯¹è±¡çš„å€¼ä¸èƒ½æ˜¯nullæˆ–undefined äºŒã€è·³è½¬è¯­å¥1ã€return ç»ˆæ­¢å‡½æ•°ä½“çš„è¿è¡Œï¼Œå¹¶è¿”å›žä¸€ä¸ªå€¼ 2ã€break ç»ˆæ­¢æ•´ä¸ªå¾ªçŽ¯ï¼Œä¸å†è¿›è¡Œåˆ¤æ–­ 3ã€continue ç»“æŸæœ¬æ¬¡å¾ªçŽ¯ï¼ŒæŽ¥ç€åŽ»åˆ¤æ–­æ˜¯å¦æ‰§è¡Œä¸‹æ¬¡å¾ªçŽ¯ ä¸‰ã€é€‰æ‹©è¯­å¥1ã€if è¯­æ³• 1234567if(æ¡ä»¶è¡¨è¾¾å¼1)&#123; ä»£ç æ®µ1&#125;else if(æ¡ä»¶è¡¨è¾¾å¼2)&#123; ä»£ç æ®µ2&#125;else&#123; ä»£ç æ®µ3&#125; æµç¨‹ åˆ¤æ–­æ¡ä»¶1ï¼Œå¦‚æžœè¿”å›žå€¼ä¸ºtrueåˆ™æ‰§è¡Œä»£ç æ®µ1 å¦‚æžœæ¡ä»¶1çš„è¿”å›žå€¼ä¸ºfalseåˆ™è·³è¿‡è¯­å¥1å¹¶æ£€æµ‹æ¡ä»¶2 å¦‚æžœæ‰€æœ‰çš„è¡¨è¾¾å¼çš„å€¼å‡ä¸ºfalseåˆ™æ‰§è¡ŒelseåŽé¢çš„è¯­å¥ ç‰¹æ€§ ç»“æž„å¤æ‚ï¼Œå¯åµŒå¥— å¯æµ‹è¯•å¤šä¸ªæ¡ä»¶è¡¨è¾¾å¼ è¡¨è¾¾å¼çš„å€¼å…·æœ‰çº¿æ€§ç‰¹å¾ è¡¨è¾¾å¼çš„å€¼æ˜¯åŠ¨æ€çš„ é€‚ç”¨äºŽä»»æ„ç±»åž‹çš„æ•°æ® å¯å¤„ç†å¤æ‚çš„é€»è¾‘å…³ç³» 2ã€switch è¯­å¥ 1234567891011switch(æ¡ä»¶è¡¨è¾¾å¼)&#123; case æ ‡ç­¾1: ä»£ç æ®µ1; break; case æ ‡ç­¾2: ä»£ç æ®µ2; break; â€¦â€¦ â€¦â€¦ default: ä»£ç æ®µn;&#125; æµç¨‹ è®¡ç®—è¡¨è¾¾å¼çš„å€¼ï¼Œå¹¶ä¸Žå„æ ‡ç­¾ç›¸æ¯”è¾ƒ è‹¥æ‰¾åˆ°ä¸Žä¹‹åŒ¹é…çš„æ ‡ç­¾ï¼Œåˆ™æ‰§è¡Œå…¶åŽçš„ä»£ç æ®µ è‹¥æ²¡æœ‰æ‰¾åˆ°ä¸Žä¹‹åŒ¹é…çš„æ ‡ç­¾åˆ™æ‰§è¡Œdefaultä¹‹åŽçš„ä»£ç æ®µ æ ¼å¼ caseæ ‡ç­¾ä¸ºå¸¸é‡ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­— æ¯ä¸ªæ ‡ç­¾å‡ä»¥å†’å·:ç»“æŸ è™½ç„¶breakä¸Ždefaultä¸ºå¯é€‰æ€§ï¼Œä½†ä¸ºäº†é€»è¾‘æ¸…æ™°æœ€å¥½ä¸è¦çœç•¥ caseæ ‡ç­¾çš„å€¼å¿…é¡»å’Œæ¡ä»¶è¡¨è¾¾å¼åœ¨å€¼å®Œå…¨åŒ¹é… ç‰¹æ€§ ç»“æž„ç®€æ´ï¼Œä¸“ä¸ºå¤šé‡é€‰æ‹©è®¾è®¡ ä»…å¯æµ‹è¯•ä¸€æ¡æ¡ä»¶è¡¨è¾¾å¼ è¡¨è¾¾å¼çš„å€¼å…·æœ‰ç¦»æ•£æ€§ è¡¨è¾¾å¼çš„å€¼æ˜¯å›ºå®šçš„ï¼Œä¸ä¼šåŠ¨æ€å˜åŒ–çš„ ä»…èƒ½åº”ç”¨æ•´æ•°ï¼Œæžšä¸¾ï¼Œå­—ç¬¦ä¸²ç­‰ç±»åž‹æ•°æ® ä»…èƒ½å¤„ç†å¤šä¸ªæžšä¸¾åž‹é€»è¾‘å…³ç³» å››ã€å¼‚å¸¸å¤„ç†è¯­å¥ throw ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ try æŒ‡æ˜Žéœ€è¦å¤„ç†çš„ä»£ç æ®µ catch æ•èŽ·å¼‚å¸¸ finally åŽæœŸå¤„ç†]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå­¦ä¹ æ€»ç»“-æ­£åˆ™è¡¨è¾¾å¼]]></title>
    <url>%2Fposts%2F75cf4b3.html</url>
    <content type="text"><![CDATA[ä¸€ã€åˆ›å»º1ã€æ–¹å¼ å­—é¢é‡ï¼švarå˜é‡å = / è¡¨è¾¾å¼ / æ¨¡å¼ä¿®é¥°ç¬¦ å‡½æ•°æž„é€ ï¼švarå˜é‡å = ** **new RegExp(â€œè¡¨è¾¾å¼â€,â€æ¨¡å¼ä¿®é¥°ç¬¦â€) 2ã€è¯´æ˜Žaã€è¡¨è¾¾å¼ å•ä¸ªå­—ç¬¦ä¸Žæ•°å­— . : åŒ¹é…é™¤æ¢è¡Œç¬¦ä¹‹å¤–çš„ä»»æ„å­—ç¬¦ [a-z0-9] ï¼šåŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦ [^a-z0-9] ï¼šåŒ¹é…ä¸åœ¨æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦ \dï¼šåŒ¹é…æ•°å­— \Dï¼šåŒ¹é…éžæ•°å­— \wï¼šåŒ¹é…å­—æ¯ \Wï¼šåŒ¹é…éžå­—æ¯ ç©ºç™½å­—ç¬¦ \0ï¼šåŒ¹é…nullå­—ç¬¦ \bï¼šåŒ¹é…ç©ºæ ¼å­—ç¬¦ \fï¼šåŒ¹é…æ¢é¡µç¬¦ \nï¼šåŒ¹é…æ¢è¡Œç¬¦ \rï¼šåŒ¹é…å›žè½¦ç¬¦ \sï¼šåŒ¹é…ç©ºç™½å­—ç¬¦ã€ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦æˆ–æ¢è¡Œç¬¦ \Sï¼šåŒ¹é…éžç©ºç™½å­—ç¬¦ \tï¼šåŒ¹é…åˆ¶è¡¨ç¬¦ å®šä½ç¬¦ ^ï¼šè¡Œé¦–åŒ¹é… $ï¼šè¡Œå°¾åŒ¹é… \Aï¼šåªåŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹å¤„ \bï¼šåŒ¹é…å•è¯è¾¹ç•Œï¼Œè¯åœ¨[]å†…æ— æ•ˆ \Bï¼šåŒ¹é…éžå•è¯è¾¹ç•Œ \Gï¼šåŒ¹é…å½“å‰æœç´¢çš„å¼€å§‹ä½ç½® \Zï¼šåŒ¹é…å­—ç¬¦ä¸²ç»“æŸå¤„æˆ–è¡Œå°¾ \zï¼šåªåŒ¹é…å­—ç¬¦ä¸²ç»“æŸå¤„ é™å®šç¬¦ x?ï¼šåŒ¹é…0ä¸ªæˆ–1ä¸ªx x*ï¼šåŒ¹é…0ä¸ªæˆ–ä»»æ„å¤šä¸ªx x+ï¼šåŒ¹é…è‡³å°‘1ä¸ªx x(m,n)ï¼šåŒ¹é…æœ€å°‘mä¸ªï¼Œæœ€å¤šnä¸ªx åˆ†ç»„ (?:x)ï¼šåŒ¹é…xä½†ä¸è®°å½•åŒ¹é…ç»“æžœ x(?=y)ï¼šå½“xåŽæŽ¥yæ—¶åŒ¹é…x x(?!y)ï¼šå½“xåŽä¸æ˜¯yæ—¶åŒ¹é…x å¼•ç”¨ \1â€¦\9ï¼š$1â€¦$9ï¼Œè¿”å›žä¹ä¸ªåœ¨æ¨¡å¼åŒ¹é…æœŸé—´æ‰¾åˆ°çš„ã€æœ€è¿‘ä¿å­˜çš„éƒ¨åˆ† æˆ–æ¨¡å¼ x|y|zï¼šåŒ¹é…xæˆ–zæˆ–y bã€æ¨¡å¼ä¿®é¥°ç¬¦ g ï¼šå…¨å±€æ¨¡å¼ï¼Œåº”ç”¨äºŽæ‰€æœ‰å­—ç¬¦ä¸² i ï¼šåŒºåˆ†å¤§å°å†™æ¨¡å¼ m ï¼šå¤šè¡ŒåŒ¹é…æ¨¡å¼ äºŒã€å±žæ€§1ã€å®žä¾‹å±žæ€§ globalï¼šæ£€æµ‹æ˜¯å¦è®¾ç½®gæ ‡è®° ignoreCaseï¼šæ£€æµ‹æ˜¯å¦è®¾ç½®iæ ‡è®° multilineï¼šæ£€æµ‹æ˜¯å¦è®¾ç½®äº†mæ ‡è®° lastIndexï¼šå¼€å§‹æ£€ç´¢ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹çš„å­—ç¬¦ä½ç½®ï¼Œå¼€å§‹ä¸º0 sourceï¼šè¿”å›žæ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²è¡¨ç¤º 2ã€æž„é€ å‡½æ•°å±žæ€§ $_ input ï¼šè¿”å›žæœ€è¿‘ä¸€æ¬¡åŒ¹é…çš„å­—ç¬¦ä¸² $&amp; lastMatchï¼šè¿”å›žæœ€è¿‘ä¸€æ¬¡çš„åŒ¹é…é¡¹ $+ lastParenï¼šè¿”å›žæœ€è¿‘ä¸€æ¬¡åŒ¹é…çš„æ•èŽ·ç»„ $` leftContextï¼šè¿”å›žè¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ä¸­ä»Žå­—ç¬¦ä¸²å¼€å§‹ä½ç½®åˆ°æœ€åŽåŒ¹é…ä¹‹å‰çš„ä½ç½®ä¹‹é—´çš„å­—ç¬¦ $â€™ rightContextï¼šè¿”å›žè¢«æœç´¢çš„å­—ç¬¦ä¸²ä¸­ä»Žæœ€åŽä¸€ä¸ªåŒ¹é…ä½ç½®å¼€å§‹åˆ°å­—ç¬¦ä¸²ç»“å°¾ä¹‹é—´çš„å­—ç¬¦ $* multilineï¼šæ£€æµ‹è¡¨è¾¾å¼æ˜¯å¦é‡‡ç”¨å¤šè¡Œæ¨¡å¼åŒ¹é…m ä¸‰ã€æ–¹æ³•1ã€å®žä¾‹æ–¹æ³•aã€exec åŠŸèƒ½ï¼šåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒåŒ¹é…æ£€ç´¢ï¼Œè¿”å›žç»“æžœæ•°ç»„ å‚æ•°ï¼šè¦åº”ç”¨æ¨¡å¼åŒ¹é…çš„å­—ç¬¦ä¸² ç‰¹æ€§ ä½¿ç”¨å…¨å±€æ ‡è®°gï¼šæŒç»­æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…é¡¹å¹¶è¿”å›ž ä¸ä½¿ç”¨å…¨å±€æ ‡è®°gï¼šå§‹ç»ˆè¿”å›žç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ä¿¡æ¯ æ‰§è¡Œè¿‡ç¨‹ æ£€ç´¢å­—ç¬¦ä¸²å‚æ•°ï¼ŒèŽ·å–æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ–‡æœ¬ æ‰¾åˆ°åŒ¹é…æ–‡æœ¬åˆ™è¿”å›žä¸€ä¸ªæ•°ç»„ ç¬¬0ä¸ªå…ƒç´ ï¼šä¸Žæ•´ä¸ªæ¨¡å¼åŒ¹é…çš„å­—ç¬¦ä¸² å…¶ä»–å…ƒç´ ï¼šä¸Žæ•èŽ·ç»„åŒ¹é…çš„å­—ç¬¦ä¸² å¦åˆ™è¿”å›žnull æ´¾ç”Ÿå±žæ€§ indexï¼šåŒ¹é…é¡¹åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½® inputï¼šåº”ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸² lengthï¼šè¿”å›žæ•°ç»„å…ƒç´ ä¸ªæ•° bã€test åŠŸèƒ½ï¼šåœ¨å­—ç¬¦ä¸²ä¸­æµ‹è¯•æ¨¡å¼åŒ¹é…ï¼Œè¿”å›žtrueæˆ–false 2ã€å­—ç¬¦ä¸²æ–¹æ³• matchï¼šæ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é… replaceï¼šæ›¿æ¢ä¸Žæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸² seachï¼šæ£€ç´¢ä¸Žæ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„å€¼ splitï¼šæŠŠå­—ç¬¦ä¸²åˆ†å‰²ä¸ºå­—ç¬¦ä¸²æ•°ç»„]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå­¦ä¹ æ€»ç»“-å­—ç¬¦ä¸²å‡½æ•°]]></title>
    <url>%2Fposts%2F2675d2d0.html</url>
    <content type="text"><![CDATA[ä¸€ã€æŸ¥æ‰¾æ–¹æ³•1ã€å­—ç¬¦æ–¹æ³•aã€charAt() åŠŸèƒ½ï¼šè¿”å›žå­—ç¬¦ä¸²ä¸­ç¬¬nä¸ªå­—ç¬¦ å‚æ•°ï¼šè¶…å‡ºèŒƒå›´ï¼Œè¿”å›žç©ºå­—ç¬¦ä¸² è¿”å›žå€¼ï¼šstringä¸­ç¬¬nä¸ªå­—ç¬¦çš„å®žé™…å€¼ bã€charCodeAt() åŠŸèƒ½ï¼šè¿”å›žå­—ç¬¦ä¸²ä¸­ç¬¬nä¸ªå­—ç¬¦çš„ä»£ç  å‚æ•°ï¼šè¶…å‡ºèŒƒå›´ï¼Œè¿”å›žNan è¿”å›žå€¼ï¼š å†…å®¹ï¼šstringä¸­ç¬¬nä¸ªå­—ç¬¦çš„Unicodeç¼–ç  èŒƒå›´ï¼š0~65535ä¹‹é—´çš„16ä½æ•´æ•° cã€fromCharCode() åŠŸèƒ½ï¼šæ ¹æ®å­—ç¬¦ç¼–ç åˆ›å»ºå­—ç¬¦ä¸² å‚æ•°ï¼š0ä¸ªæˆ–å¤šä¸ªæ•´æ•°ï¼Œä»£ç å­—ç¬¦çš„Unicodeç¼–ç  è¿”å›žå€¼ï¼šç”±æŒ‡å®šç¼–ç å­—ç¬¦ç»„æˆçš„æ–°å­—ç¬¦ä¸² ç‰¹æ•ˆï¼šé™æ€æ–¹æ³•ï¼Œå®žä¸ºæž„é€ å‡½æ•°String()çš„å±žæ€§ dã€å…³ç³»charAtå’ŒcharCodeAtå…±æ€§ åŠŸèƒ½ï¼šæ ¹æ®ä¸‹æ ‡æŸ¥æ‰¾æŒ‡å®šå­—ç¬¦ å‚æ•°ï¼šnï¼Œè¦æŸ¥è¯¢çš„å­—ç¬¦ä¸‹æ ‡ï¼›æœ‰æ•ˆèŒƒå›´ï¼Œ0length1ä¹‹é—´ charCodeAtä¸ŽfromCharCode äº’ä¸ºåå‘æ“ä½œ 2ã€ä½ç½®æ–¹æ³•aã€indexOf() ä»Žå‰å‘åŽæ£€ç´¢å­—ç¬¦ä¸²ï¼Œçœ‹å…¶æ˜¯å¦å«æœ‰æŒ‡å®šå­ä¸² bã€lastIndexOf() ä»ŽåŽå‘å‰æ£€ç´¢å­—ç¬¦ä¸²ï¼Œçœ‹å…¶æ˜¯å¦å«æœ‰æŒ‡å®šå­ä¸² cã€å…±æ€§ åŠŸèƒ½ï¼šæ ¹æ®å­—ç¬¦ä¸²æŸ¥æ‰¾ä¸‹æ ‡ä½ç½® å‚æ•°ï¼š å¿…é€‰ï¼šå°†è¦æŸ¥è¯¢çš„å­—ç¬¦ä¸² å¯é€‰ï¼šå¼€å§‹æŸ¥æ‰¾çš„ä½ç½®ä¸‹æ ‡ å€¼ä¸ºè´Ÿæ•°ï¼Œè§†ä½œ 0 çœç•¥ï¼Œä»Žé»˜è®¤èµ·å§‹ä½å¼€å§‹æŸ¥æ‰¾ è¶…å‡º 0length1ï¼Œè¿”å›ž -1 è¿”å›žå€¼ æ‰¾åˆ°ï¼šå­—ä¸²é¦–æ¬¡å‡ºçŽ°çš„ä¸‹æ ‡ æœªæ‰¾åˆ°ï¼šè¿”å›ž-1 3ã€åŒ¹é…æ–¹æ³•aã€match() åŠŸèƒ½ï¼šæ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é… å‚æ•° è¦è¿›è¡Œæ¨¡å¼åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ éžæ­£åˆ™è¡¨è¾¾å¼ï¼Œå°†å…¶ä¼ é€’ç»™RegExp()çš„æž„é€ å‡½æ•°ï¼Œå¹¶è½¬æ¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ è¿”å›žå€¼ï¼šå­˜æ”¾åŒ¹é…ç»“æžœçš„æ•°ç»„ æœ‰å…¨å±€æ ‡è®°gï¼šæ‰§è¡Œå…¨å±€æ£€ç´¢ æ‰¾åˆ°ï¼šè¿”å›žæ•°ç»„ å†…å®¹ï¼šæ‰€æœ‰åŒ¹é…çš„å­ä¸² ç¼ºé™· æ²¡æœ‰æ´¾ç”Ÿå±žæ€§ ä¸æä¾›ä¸Žå­è¡¨è¾¾å¼åŒ¹é…çš„æ–‡æœ¬ä¿¡æ¯ ä¸å£°æ˜Žæ¯ä¸ªåŒ¹é…å­ä¸²çš„ä½ç½® å¼¥è¡¥ï¼šä½¿ç”¨RegExp.exec()æ–¹æ³• æ²¡æ‰¾åˆ°ï¼šè¿”å›žnull æ— å…¨å±€æ ‡è®°gï¼šæ‰§è¡Œä¸€æ¬¡åŒ¹é… æ‰¾åˆ°ï¼šè¿”å›žæ•°ç»„ å†…å®¹ ç¬¬0ä¸ªå…ƒç´ ï¼ŒåŒ¹é…æ–‡æœ¬ å…¶ä»–å…ƒç´ ï¼Œä¸Žæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ–‡æœ¬ å±žæ€§ inputï¼Œè°ƒç”¨è¯¥æ–¹æ³•çš„å­—ç¬¦ä¸²å¯¹è±¡ indexï¼ŒåŒ¹é…ä¸ºæœ¬çš„èµ·å§‹å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½® lastIndexï¼ŒåŒ¹é…ä¸ºæœ¬çš„æœ«å°¾å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­çš„ä½ç½® æœªæ‰¾åˆ°ï¼šè¿”å›žnull bã€seach() åŠŸèƒ½ï¼šæ£€ç´¢å­—ç¬¦ä¸²ä¸­ä¸Žæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸² å‚æ•°ï¼šä¸Žmatch()ç›¸åŒ è¿”å›žå€¼ æ‰¾åˆ°ï¼šå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªä¸Žæ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„å­ä¸²çš„èµ·å§‹ä½ç½® æœªæ‰¾åˆ°ï¼šè¿”å›ž -1 ç‰¹æ€§ï¼šå¿½ç•¥å…¨å±€æ ‡è®°gä¸ŽlastIndex()å±žæ€§ cã€replace() åŠŸèƒ½ï¼šæ›¿æ¢ä¸€ä¸ªä¸Žæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸² å‚æ•° å‚æ•° 1ï¼šéœ€è¦è¿›è¡Œæ›¿æ¢æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡æˆ–å­—ç¬¦ä¸² å‚æ•° 2ï¼šæ›¿æ¢æ–‡æœ¬æˆ–æ›¿æ¢å‡½æ•° ç‰¹æ€§ å¦‚æžœå‚æ•°1ä»…ä¸ºå­—ç¬¦ä¸²åˆ™åªè¿›è¡Œä¸€æ¬¡åŒ¹é…æ›¿æ¢ï¼Œè‹¥æ›¿ä»£æ‰€æœ‰å­ä¸²åˆ™å¿…é€‰åˆ¶å®šå…¨å±€æ ‡è®°g å¦‚æžœå‚æ•°2ä»…ä¸ºå­—ç¬¦ä¸²åˆ™å¯ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦åºåˆ— $$ : $ $&amp; : åŒ¹é…æ•´ä¸ªæ¨¡å¼çš„å­å­—ç¬¦ä¸² $â€™ : åŒ¹é…çš„å­å­—ç¬¦ä¸²ä¹‹å‰çš„å­å­—ç¬¦ä¸² $` : åŒ¹é…çš„å­å­—ç¬¦ä¸²ä¹‹åŽçš„å­å­—ç¬¦ä¸² $n : åŒ¹é…ç¬¬nä¸ªæ•èŽ·ç»„çš„å­å­—ç¬¦ä¸²ï¼Œn=0~9 $nn: åŒ¹é…ç¬¬nnä¸ªæ•èŽ·ç»„çš„å­å­—ç¬¦ä¸²ï¼Œnn=01~99 dã€split() åŠŸèƒ½ï¼šæ ¹æ®æŒ‡å®šåˆ†éš”ç¬¦å°†å­—ç¬¦ä¸²åˆ†å‰²æˆå¤šä¸ªå­ä¸²ï¼Œå¹¶è¿”å›žæˆæ•°ç»„ å‚æ•° å¿…é¡»ï¼šæŒ‡å®šçš„åˆ†éš”ç¬¦ å¯é€‰ï¼šæŒ‡å®šæ•°ç»„çš„é•¿åº¦ äºŒã€æ“ä½œæ–¹æ³•1ã€æ‹¼æŽ¥æ–¹æ³•aã€concat() è¯­æ³•ï¼šstring.cancat(varue,â€¦) åŠŸèƒ½ï¼šè¿žæŽ¥å­—ç¬¦ä¸² å‚æ•°ï¼šè¦è¿žæŽ¥åˆ°stringä¸Šçš„ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ è¿”å›žå€¼ï¼šæŠŠæ‰€æœ‰å‚æ•°éƒ½è¿žæŽ¥åˆ°å­—ç¬¦ä¸²stringä¸Šå¾—åˆ°çš„æ–°å­—ç¬¦ä¸² ç‰¹æ€§ï¼šåŠŸèƒ½ä¸Žâ€˜â€™+â€˜â€™ç›¸åŒåŽŸå§‹å­—ç¬¦ä¸²çš„å®žé™…å€¼å¹¶æœªè¢«çœŸæ­£ä¿®æ”¹ 2ã€æˆªå–æ–¹æ³•aã€ æ ¹æ®ä¸‹æ ‡æˆªå–å­ä¸² *slice() *: èµ‹å€¼å‚æ•°ï¼Œä¸Žå­—ç¬¦é•¿åº¦ç›¸åŠ  substring() **: èµ‹å€¼å‚æ•°ï¼Œè½¬æ¢ä¸º0** å…±æ€§ ï¼šå‚æ•°2çš„å­å­—ç¬¦ä¸²æœ€åŽä¸€ä¸ªå­—ç¬¦åŽé¢çš„ä¸‹æ ‡ bã€æ ¹æ®é•¿åº¦æˆªå–å­ä¸² substr() å‚æ•°2 ï¼šè¿”å›žçš„å­—ç¬¦ä¸ªæ•° èµ‹å€¼å‚æ•° å‚æ•°1ï¼šä¸Žå­—ç¬¦ä¸²é•¿åº¦ç›¸åŠ  å‚æ•°2ï¼šè½¬æ¢ä¸º0 cã€å…±æ€§ åŠŸèƒ½ï¼šæˆªå–è¢«æ“ä½œå­—ç¬¦ä¸²ä¸­çš„å­ä¸² å‚æ•°1ï¼šæŒ‡å®šå­ä¸²çš„å¼€å§‹ä½ç½® çœç•¥å‚æ•°2ï¼šä»¥å­—ç¬¦ä¸²é•¿åº¦ä¸ºç»“æŸä½ç½® 3ã€ç©ºæ ¼å¤„ç† trimï¼šæ¸…é™¤å‰ç½®åŠåŽç¼€ç©ºæ ¼ trimLeftï¼šæ¸…é™¤å‰ç½®ç©ºæ ¼ trimRightï¼šæ¸…é™¤åŽç¼€ç©ºæ ¼ 4ã€æ¯”è¾ƒæ–¹æ³•aã€localeCompare() åŠŸèƒ½ï¼šç”¨æœ¬åœ°ç‰¹å®šé¡ºåºæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸² å‚æ•°ï¼šä¸ŽåŽŸå­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒçš„å­—ç¬¦ä¸² è¿”å›žå€¼ï¼šè¯´æ˜Žæ¯”è¾ƒç»“æžœçš„æ•°å­— è´Ÿæ•°ï¼šåŽŸå­—ç¬¦ä¸² &lt; å‚æ•°å­—ç¬¦ä¸² 0 ï¼š åŽŸå­—ç¬¦ä¸² = å‚æ•°å­—ç¬¦ä¸² æ­£æ•°ï¼šåŽŸå­—ç¬¦ä¸² &gt; å‚æ•°å­—ç¬¦ä¸² ä¸‰ã€ç¼–ç æ–¹æ³•1ã€å­—ç¬¦ä¸²å¸¸è§„ç¼–ç ä¸Žè§£ç  escape() unescape() 2ã€URIå­—ç¬¦ä¸²ç¼–ç ä¸Žè§£ç  encodeURI() decodeURI() 3ã€URIç»„ä»¶ç¼–ç ä¸Žè§£ç  encodeURIComponent() decodeURIComponent() å››ã€è½¬æ¢æ–¹æ³•1ã€å¤§å°å†™è½¬æ¢aã€è½¬ä¸ºå¤§å†™ toUpperCase() toLocaleUpperCase() ï¼šæœ¬åœ° bã€è½¬ä¸ºå°å†™ toLowerCase() toLocaleLowerCase() ï¼šæœ¬åœ° 2ã€ä»£ç è½¬æ¢ ç”¨jsåŠ¨æ€æ ¼å¼åŒ–htmlï¼Œä¸å…·è¯­ä¹‰æ€§ï¼Œèˆå¼ƒ]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå­¦ä¹ æ€»ç»“-å˜é‡]]></title>
    <url>%2Fposts%2Fb062d643.html</url>
    <content type="text"><![CDATA[ä¸€ã€å‘½å1ã€æ–¹æ³•aã€åŒˆç‰™åˆ©å‘½åæ³•ï¼ˆå˜é‡å=ç±»åž‹+å¯¹è±¡æè¿°ï¼‰ Int æ•´åž‹ i float æµ®ç‚¹åž‹ fi Bollean å¸ƒå°” b String å­—ç¬¦ä¸² s Array æ•°ç»„ a Obeject å¯¹è±¡ o Function å‡½æ•° fn Regular Expression æ­£åˆ™ re bã€é©¼å³°å‘½åæ³• å…¨éƒ¨å°å†™ å•è¯ä¸Žå•è¯é—´ç”¨ä¸‹åˆ’çº¿åˆ†å‰² å¤§å°å†™æ··åˆ å¤§é©¼å³°ï¼šæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ å°é©¼å³°ï¼šç¬¬ä¸€ä¸ªå•è¯é¦–å­—æ¯å°å†™ï¼Œå…¶ä»–é¦–å­—æ¯å¤§å†™ 2ã€è§„åˆ™ é¦–å­—æ¯ï¼šè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ ç»„æˆï¼šè‹±æ–‡å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ ç¦å¿Œï¼šJavaScriptå…³é”®è¯ä¸Žä¿ç•™å­— äºŒã€å£°æ˜Ž1ã€æ˜¾ç¤ºå£°æ˜Ž varå˜é‡å 2ã€é™‹ä¹  æ²¡æœ‰ç±»åž‹ é‡å¤å£°æ˜Ž éšå¼å£°æ˜Ž ä¸å£°æ˜Žç›´æŽ¥èµ‹å€¼ 3ã€æ­£è§£ å…ˆå£°æ˜Žã€åŽè¯»å†™ å…ˆèµ‹å€¼ã€åŽè¿ç®— ä¸‰ã€å˜é‡ç±»åž‹1ã€å€¼ç±»åž‹ å ç”¨ç©ºé—´å›ºå®šï¼Œä¿å­˜åœ¨æ ˆä¸­ ä¿å­˜ä¸Žå¤åˆ¶çš„æ˜¯å€¼æœ¬èº« ä½¿ç”¨typeofæ£€æµ‹æ•°æ®çš„ç±»åž‹ åŸºæœ¬ç±»åž‹æ•°æ®æ˜¯å€¼ç±»åž‹ 2ã€å¼•ç”¨ç±»åž‹ å ç”¨ç©ºé—´ä¸å›ºå®šï¼Œä¿å­˜åœ¨å †ä¸­ ä¿å­˜ä¸Žå¤åˆ¶çš„æ˜¯æŒ‡å‘å¯¹è±¡çš„ä¸€ä¸ªæŒ‡é’ˆ ä½¿ç”¨instanceofæ£€æµ‹æ•°æ®çš„ç±»åž‹ ä½¿ç”¨new()æ–¹æ³•æž„é€ å‡ºçš„å¯¹è±¡æ˜¯å¼•ç”¨åž‹ å››ã€ä½œç”¨åŸŸ1ã€å…¨å±€å˜é‡aã€åŒ…å« åœ¨å‡½æ•°ä½“å¤–å®šä¹‰çš„å˜é‡ åœ¨å‡½æ•°ä½“å†…å®šä¹‰çš„æ— varå£°æ˜Žçš„å˜é‡ bã€è°ƒç”¨ ä»»ä½•ä½ç½® 2ã€å±€éƒ¨å˜é‡aã€åŒ…å« åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨varå£°æ˜Žçš„å˜é‡ å‡½æ•°çš„å‚æ•°å˜é‡ bã€è°ƒç”¨ å½“å‰å‡½æ•°ä½“éƒ¨ 3ã€ä¼˜å…ˆçº§ å±€éƒ¨å˜é‡é«˜äºŽåŒåå…¨å±€å˜é‡ å‚æ•°å˜é‡é«˜äºŽåŒåå…¨å±€å˜é‡ å±€éƒ¨å˜é‡é«˜äºŽåŒåå‚æ•°å˜é‡ 4ã€çƒ­æ€§aã€å¿½ç•¥å—çº§ä½œç”¨åŸŸbã€å…¨å±€å˜é‡æ˜¯å…¨å±€å¯¹è±¡çš„å±žæ€§cã€å±€éƒ¨å˜é‡æ˜¯è°ƒç”¨å¯¹è±¡çš„å±žæ€§dã€ä½œç”¨åŸŸé“¾ å†…å±‚å‡½æ•°å¯è®¿é—®å¤–å±‚å‡½æ•°å±€éƒ¨å˜é‡ å¤–å±‚å‡½æ•°ä¸èƒ½è®¿é—®å†…å±‚å‡½æ•°å±€éƒ¨å˜é‡ eã€ç”Ÿå‘½å‘¨æœŸ å…¨å±€å˜é‡ï¼šé™¤éžè¢«æ˜¾ç¤ºåˆ é™¤ï¼Œå¦åˆ™ä¸€ç›´å­˜åœ¨ å±€éƒ¨å˜é‡ï¼šè‡ªå£°æ˜Žèµ·è‡³å‡½æ•°è¿è¡Œå®Œæ¯•æˆ–è¢«æ˜¾ç¤ºåˆ é™¤ å›žæ”¶æœºåˆ¶ æ ‡è®°æ¸…é™¤ å¼•ç”¨è®¡æ•°]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ArrayListå’ŒLinkedListé›†åˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ]]></title>
    <url>%2Fposts%2Fcd624839.html</url>
    <content type="text"><![CDATA[Arrayliståº•å±‚æ˜¯åŸºäºŽåŠ¨æ€æ•°ç»„ï¼Œæ ¹æ®ä¸‹è¡¨éšæœºè®¿é—®æ•°ç»„å…ƒç´ çš„æ•ˆçŽ‡é«˜ï¼Œå‘æ•°ç»„å°¾éƒ¨æ·»åŠ å…ƒç´ çš„æ•ˆçŽ‡é«˜ï¼›ä½†æ˜¯ï¼Œåˆ é™¤æ•°ç»„ä¸­çš„æ•°æ®ä»¥åŠå‘æ•°ç»„ä¸­é—´æ·»åŠ æ•°æ®æ•ˆçŽ‡ä½Žï¼Œå› ä¸ºéœ€è¦ç§»åŠ¨æ•°ç»„ã€‚ä¾‹å¦‚æœ€åçš„æƒ…å†µæ˜¯åˆ é™¤ç¬¬ä¸€ä¸ªæ•°ç»„å…ƒç´ ï¼Œåˆ™éœ€è¦å°†ç¬¬2è‡³ç¬¬nä¸ªæ•°ç»„å…ƒç´ å„å‘å‰ç§»åŠ¨ä¸€ä½ã€‚ LinkedliståŸºäºŽé“¾è¡¨çš„åŠ¨æ€æ•°ç»„ï¼Œæ•°æ®æ·»åŠ åˆ é™¤æ•ˆçŽ‡é«˜ï¼Œåªéœ€è¦æ”¹å˜æŒ‡é’ˆæŒ‡å‘å³å¯ï¼Œä½†æ˜¯è®¿é—®æ•°æ®çš„å¹³å‡æ•ˆçŽ‡ä½Žï¼Œéœ€è¦å¯¹é“¾è¡¨è¿›è¡ŒéåŽ†ã€‚ æ€»ç»“ï¼š1ã€å¯¹äºŽéšæœºè®¿é—®getå’Œsetï¼ŒArrayListè§‰å¾—ä¼˜äºŽLinkedListï¼Œå› ä¸ºLinkedListè¦ç§»åŠ¨æŒ‡é’ˆã€‚ å¯¹äºŽæ–°å¢žå’Œåˆ é™¤æ“ä½œaddå’Œremoveï¼ŒLinedListæ¯”è¾ƒå ä¼˜åŠ¿ï¼Œå› ä¸ºArrayListè¦ç§»åŠ¨æ•°æ®ã€‚2ã€å„è‡ªæ•ˆçŽ‡é—®é¢˜ï¼š tipsï¼š ArrayListæ˜¯çº¿æ€§è¡¨(æ•°ç»„) get()ç›´æŽ¥è¯»å–ç¬¬å‡ ä¸ªä¸‹æ ‡ï¼Œå¤æ‚åº¦O(1) add(E)æ·»åŠ å…ƒç´ ï¼Œç›´æŽ¥åœ¨åŽé¢æ·»åŠ ï¼Œå¤æ‚åº¦O(1) add(inedxï¼ŒE)æ·»åŠ å…ƒç´ ï¼Œåœ¨ç¬¬å‡ ä¸ªå…ƒç´ åŽé¢æ’å…¥ï¼ŒåŽé¢çš„å…ƒç´ éœ€è¦å‘åŽç§»åŠ¨ï¼Œå¤æ‚åº¦O(n) remove()åˆ é™¤å…ƒç´ ï¼ŒåŽé¢çš„å…ƒç´ éœ€è¦é€ä¸ªç§»åŠ¨ï¼Œå¤æ‚åº¦O(n) linkedlistæ˜¯é“¾è¡¨çš„æ“ä½œ get()èŽ·å–ç¬¬å‡ ä¸ªå…ƒç´ ï¼Œä¾æ¬¡éåŽ†ï¼Œå¤æ‚åº¦O(n) add(E)æ·»åŠ åˆ°æœ«å°¾ï¼Œå¤æ‚åº¦O(1) add(indexï¼ŒE)æ·»åŠ ç¬¬å‡ ä¸ªå…ƒç´ åŽï¼Œéœ€è¦å…ˆæŸ¥æ‰¾åˆ°ç¬¬å‡ ä¸ªå…ƒç´ ï¼Œç›´æŽ¥æŒ‡é’ˆæŒ‡å‘æ“ä½œï¼Œå¤æ‚åº¦O(1) remove()åˆ é™¤å…ƒç´ ï¼Œç›´æŽ¥æŒ‡é’ˆæŒ‡å‘æ“ä½œï¼Œå¤æ‚åº¦O(1)]]></content>
      <categories>
        <category>Java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>åŸºç¡€</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vueç»„ä»¶ä¹‹é—´8ç§ç»„ä»¶é€šä¿¡æ–¹å¼æ€»ç»“]]></title>
    <url>%2Fposts%2F40775045.html</url>
    <content type="text"><![CDATA[å¯¹äºŽvueæ¥è¯´ï¼Œç»„ä»¶ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’æ˜¯éžå¸¸é‡è¦çš„ï¼Œä¸‹é¢æ˜¯æˆ‘å¯¹ç»„ä»¶ä¹‹é—´æ¶ˆæ¯ä¼ é€’çš„å„ç§æ–¹å¼çš„æ€»ç»“ï¼Œæ€»å…±æœ‰8ç§æ–¹å¼ã€‚ 1 propså’Œ$emit 2 $attrså’Œ$listeners 3 ä¸­å¤®äº‹ä»¶æ€»çº¿ 4 provideå’Œinject 5 v-model 6 $parentå’Œ$children 7 boradcastå’Œdispatch 8 vuexå¤„ç†ç»„ä»¶ä¹‹é—´çš„æ•°æ®äº¤äº’ 1.propså’Œ$emitçˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®æ˜¯é€šè¿‡propä¼ é€’çš„ï¼Œå­ç»„ä»¶ä¼ é€’æ•°æ®ç»™çˆ¶ç»„ä»¶æ˜¯é€šè¿‡$emitè§¦å‘äº‹ä»¶æ¥åšåˆ°çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445Vue.component(&apos;child&apos;,&#123; data()&#123; return &#123; mymessage:this.message &#125; &#125;, template:` &lt;div&gt; &lt;input type=&quot;text&quot; v-model=&quot;mymessage&quot; @input=&quot;passData(mymessage)&quot;&gt; &lt;/div&gt; `, props:[&apos;message&apos;],//å¾—åˆ°çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ® methods:&#123; passData(val)&#123; //è§¦å‘çˆ¶ç»„ä»¶ä¸­çš„äº‹ä»¶ this.$emit(&apos;getChildData&apos;,val) &#125; &#125; &#125;) Vue.component(&apos;parent&apos;,&#123; template:` &lt;div&gt; &lt;p&gt;this is parent compoent!&lt;/p&gt; &lt;child :message=&quot;message&quot; v-on:getChildData=&quot;getChildData&quot;&gt;&lt;/child&gt; &lt;/div&gt; `, data()&#123; return &#123; message:&apos;hello&apos; &#125; &#125;, methods:&#123; //æ‰§è¡Œå­ç»„ä»¶è§¦å‘çš„äº‹ä»¶ getChildData(val)&#123; console.log(val) &#125; &#125; &#125;) var app=new Vue(&#123; el:&apos;#app&apos;, template:` &lt;div&gt; &lt;parent&gt;&lt;/parent&gt; &lt;/div&gt; ` &#125;) åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæœ‰çˆ¶ç»„ä»¶parentå’Œå­ç»„ä»¶childã€‚1).çˆ¶ç»„ä»¶ä¼ é€’äº†messageæ•°æ®ç»™å­ç»„ä»¶ï¼Œå¹¶ä¸”é€šè¿‡v-onç»‘å®šäº†ä¸€ä¸ªgetChildDataäº‹ä»¶æ¥ç›‘å¬å­ç»„ä»¶çš„è§¦å‘äº‹ä»¶ï¼›2).å­ç»„ä»¶é€šè¿‡propså¾—åˆ°ç›¸å…³çš„messageæ•°æ®,æœ€åŽé€šè¿‡this.$emitè§¦å‘äº†getChildDataäº‹ä»¶ã€‚ 2.$attrså’Œ$listenersç¬¬ä¸€ç§æ–¹å¼å¤„ç†çˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ è¾“æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æžœçˆ¶ç»„ä»¶Aä¸‹é¢æœ‰å­ç»„ä»¶Bï¼Œç»„ä»¶Bä¸‹é¢æœ‰ç»„ä»¶C,è¿™æ—¶å¦‚æžœç»„ä»¶Aæƒ³ä¼ é€’æ•°æ®ç»™ç»„ä»¶Cæ€Žä¹ˆåŠžå‘¢ï¼Ÿå¦‚æžœé‡‡ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»è®©ç»„ä»¶Aé€šè¿‡propä¼ é€’æ¶ˆæ¯ç»™ç»„ä»¶Bï¼Œç»„ä»¶Båœ¨é€šè¿‡propä¼ é€’æ¶ˆæ¯ç»™ç»„ä»¶Cï¼›è¦æ˜¯ç»„ä»¶Aå’Œç»„ä»¶Cä¹‹é—´æœ‰æ›´å¤šçš„ç»„ä»¶ï¼Œé‚£é‡‡ç”¨è¿™ç§æ–¹å¼å°±å¾ˆå¤æ‚äº†ã€‚Vue 2.4å¼€å§‹æä¾›äº†$attrså’Œ$listenersæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œèƒ½å¤Ÿè®©ç»„ä»¶Aä¹‹é—´ä¼ é€’æ¶ˆæ¯ç»™ç»„ä»¶Cã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667Vue.component(&apos;C&apos;,&#123; template:` &lt;div&gt; &lt;input type=&quot;text&quot; v-model=&quot;$attrs.messagec&quot; @input=&quot;passCData($attrs.messagec)&quot;&gt; &lt;/div&gt; `, methods:&#123; passCData(val)&#123; //è§¦å‘çˆ¶ç»„ä»¶Aä¸­çš„äº‹ä»¶ this.$emit(&apos;getCData&apos;,val) &#125; &#125; &#125;) Vue.component(&apos;B&apos;,&#123; data()&#123; return &#123; mymessage:this.message &#125; &#125;, template:` &lt;div&gt; &lt;input type=&quot;text&quot; v-model=&quot;mymessage&quot; @input=&quot;passData(mymessage)&quot;&gt; &lt;!-- Cç»„ä»¶ä¸­èƒ½ç›´æŽ¥è§¦å‘getCDataçš„åŽŸå› åœ¨äºŽ Bç»„ä»¶è°ƒç”¨Cç»„ä»¶æ—¶ ä½¿ç”¨ v-on ç»‘å®šäº†$listeners å±žæ€§ --&gt; &lt;!-- é€šè¿‡v-bind ç»‘å®š$attrså±žæ€§ï¼ŒCç»„ä»¶å¯ä»¥ç›´æŽ¥èŽ·å–åˆ°Aç»„ä»¶ä¸­ä¼ é€’ä¸‹æ¥çš„propsï¼ˆé™¤äº†Bç»„ä»¶ä¸­propså£°æ˜Žçš„ï¼‰ --&gt; &lt;C v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;&gt;&lt;/C&gt; &lt;/div&gt; `, props:[&apos;message&apos;],//å¾—åˆ°çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ® methods:&#123; passData(val)&#123; //è§¦å‘çˆ¶ç»„ä»¶ä¸­çš„äº‹ä»¶ this.$emit(&apos;getChildData&apos;,val) &#125; &#125; &#125;) Vue.component(&apos;A&apos;,&#123; template:` &lt;div&gt; &lt;p&gt;this is parent compoent!&lt;/p&gt; &lt;B :messagec=&quot;messagec&quot; :message=&quot;message&quot; v-on:getCData=&quot;getCData&quot; v-on:getChildData=&quot;getChildData(message)&quot;&gt;&lt;/B&gt; &lt;/div&gt; `, data()&#123; return &#123; message:&apos;hello&apos;, messagec:&apos;hello c&apos; //ä¼ é€’ç»™cç»„ä»¶çš„æ•°æ® &#125; &#125;, methods:&#123; getChildData(val)&#123; console.log(&apos;è¿™æ˜¯æ¥è‡ªBç»„ä»¶çš„æ•°æ®&apos;) &#125;, //æ‰§è¡ŒCå­ç»„ä»¶è§¦å‘çš„äº‹ä»¶ getCData(val)&#123; console.log(&quot;è¿™æ˜¯æ¥è‡ªCç»„ä»¶çš„æ•°æ®ï¼š&quot;+val) &#125; &#125; &#125;) var app=new Vue(&#123; el:&apos;#app&apos;, template:` &lt;div&gt; &lt;A&gt;&lt;/A&gt; &lt;/div&gt; ` &#125;) 3.ä¸­å¤®äº‹ä»¶æ€»çº¿ä¸Šé¢ä¸¤ç§æ–¹å¼å¤„ç†çš„éƒ½æ˜¯çˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ï¼Œè€Œå¦‚æžœä¸¤ä¸ªç»„ä»¶ä¸æ˜¯çˆ¶å­å…³ç³»å‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ä¸­å¤®äº‹ä»¶æ€»çº¿çš„æ–¹å¼ã€‚æ–°å»ºä¸€ä¸ªVueäº‹ä»¶buså¯¹è±¡ï¼Œç„¶åŽé€šè¿‡bus.$emitè§¦å‘äº‹ä»¶ï¼Œbus.$onç›‘å¬è§¦å‘çš„äº‹ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354Vue.component(&apos;brother1&apos;,&#123; data()&#123; return &#123; mymessage:&apos;hello brother1&apos; &#125; &#125;, template:` &lt;div&gt; &lt;p&gt;this is brother1 compoent!&lt;/p&gt; &lt;input type=&quot;text&quot; v-model=&quot;mymessage&quot; @input=&quot;passData(mymessage)&quot;&gt; &lt;/div&gt; `, methods:&#123; passData(val)&#123; //è§¦å‘å…¨å±€äº‹ä»¶globalEvent bus.$emit(&apos;globalEvent&apos;,val) &#125; &#125; &#125;) Vue.component(&apos;brother2&apos;,&#123; template:` &lt;div&gt; &lt;p&gt;this is brother2 compoent!&lt;/p&gt; &lt;p&gt;brother1ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼š&#123;&#123;brothermessage&#125;&#125;&lt;/p&gt; &lt;/div&gt; `, data()&#123; return &#123; mymessage:&apos;hello brother2&apos;, brothermessage:&apos;&apos; &#125; &#125;, mounted()&#123; //ç»‘å®šå…¨å±€äº‹ä»¶globalEvent bus.$on(&apos;globalEvent&apos;,(val)=&gt;&#123; this.brothermessage=val; &#125;) &#125; &#125;) //ä¸­å¤®äº‹ä»¶æ€»çº¿ var bus=new Vue(); var app=new Vue(&#123; el:&apos;#app&apos;, template:` &lt;div&gt; &lt;brother1&gt;&lt;/brother1&gt; &lt;brother2&gt;&lt;/brother2&gt; &lt;/div&gt; ` &#125;) 4.provideå’Œinjectçˆ¶ç»„ä»¶ä¸­é€šè¿‡provideræ¥æä¾›å˜é‡ï¼Œç„¶åŽåœ¨å­ç»„ä»¶ä¸­é€šè¿‡injectæ¥æ³¨å…¥å˜é‡ã€‚ä¸è®ºå­ç»„ä»¶æœ‰å¤šæ·±ï¼Œåªè¦è°ƒç”¨äº†injecté‚£ä¹ˆå°±å¯ä»¥æ³¨å…¥providerä¸­çš„æ•°æ®ã€‚è€Œä¸æ˜¯å±€é™äºŽåªèƒ½ä»Žå½“å‰çˆ¶ç»„ä»¶çš„propå±žæ€§æ¥èŽ·å–æ•°æ®ï¼Œåªè¦åœ¨çˆ¶ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå­ç»„ä»¶éƒ½å¯ä»¥è°ƒç”¨ã€‚ 123456789101112131415161718192021222324252627282930313233343536Vue.component(&apos;child&apos;,&#123; inject:[&apos;for&apos;],//å¾—åˆ°çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ® data()&#123; return &#123; mymessage:this.for &#125; &#125;, template:` &lt;div&gt; &lt;input type=&quot;tet&quot; v-model=&quot;mymessage&quot;&gt; &lt;/div&gt; &#125;) Vue.component(&apos;parent&apos;,&#123; template:` &lt;div&gt; &lt;p&gt;this is parent compoent!&lt;/p&gt; &lt;child&gt;&lt;/child&gt; &lt;/div&gt; `, provide:&#123; for:&apos;test&apos; &#125;, data()&#123; return &#123; message:&apos;hello&apos; &#125; &#125; &#125;) var app=new Vue(&#123; el:&apos;#app&apos;, template:` &lt;div&gt; &lt;parent&gt;&lt;/parent&gt; &lt;/div&gt; ` &#125;) 5.v-modelçˆ¶ç»„ä»¶é€šè¿‡v-modelä¼ é€’å€¼ç»™å­ç»„ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨ä¼ é€’ä¸€ä¸ªvalueçš„propå±žæ€§ï¼Œåœ¨å­ç»„ä»¶ä¸­é€šè¿‡this.$emit(â€˜inputâ€™,val)è‡ªåŠ¨ä¿®æ”¹v-modelç»‘å®šçš„å€¼ 1234567891011121314151617181920212223242526272829303132333435363738394041Vue.component(&apos;child&apos;,&#123; props:&#123; value:String, //v-modelä¼šè‡ªåŠ¨ä¼ é€’ä¸€ä¸ªå­—æ®µä¸ºvalueçš„propå±žæ€§ &#125;, data()&#123; return &#123; mymessage:this.value &#125; &#125;, methods:&#123; changeValue()&#123; this.$emit(&apos;input&apos;,this.mymessage);//é€šè¿‡å¦‚æ­¤è°ƒç”¨å¯ä»¥æ”¹å˜çˆ¶ç»„ä»¶ä¸Šv-modelç»‘å®šçš„å€¼ &#125; &#125;, template:` &lt;div&gt; &lt;input type=&quot;text&quot; v-model=&quot;mymessage&quot; @change=&quot;changeValue&quot;&gt; &lt;/div&gt; &#125;) Vue.component(&apos;parent&apos;,&#123; template:` &lt;div&gt; &lt;p&gt;this is parent compoent!&lt;/p&gt; &lt;p&gt;&#123;&#123;message&#125;&#125;&lt;/p&gt; &lt;child v-model=&quot;message&quot;&gt;&lt;/child&gt; &lt;/div&gt; `, data()&#123; return &#123; message:&apos;hello&apos; &#125; &#125; &#125;) var app=new Vue(&#123; el:&apos;#app&apos;, template:` &lt;div&gt; &lt;parent&gt;&lt;/parent&gt; &lt;/div&gt; ` &#125;) 6.$parentå’Œ$children12345678910111213141516171819202122232425262728293031323334353637383940414243444546Vue.component(&apos;child&apos;,&#123; props:&#123; value:String, //v-modelä¼šè‡ªåŠ¨ä¼ é€’ä¸€ä¸ªå­—æ®µä¸ºvalueçš„propå±žæ€§ &#125;, data()&#123; return &#123; mymessage:this.value &#125; &#125;, methods:&#123; changeValue()&#123; this.$parent.message = this.mymessage;//é€šè¿‡å¦‚æ­¤è°ƒç”¨å¯ä»¥æ”¹å˜çˆ¶ç»„ä»¶çš„å€¼ &#125; &#125;, template:` &lt;div&gt; &lt;input type=&quot;text&quot; v-model=&quot;mymessage&quot; @change=&quot;changeValue&quot;&gt; &lt;/div&gt; &#125;) Vue.component(&apos;parent&apos;,&#123; template:` &lt;div&gt; &lt;p&gt;this is parent compoent!&lt;/p&gt; &lt;button @click=&quot;changeChildValue&quot;&gt;test&lt;/button &gt; &lt;child&gt;&lt;/child&gt; &lt;/div&gt; `, methods:&#123; changeChildValue()&#123; this.$children[0].mymessage = &apos;hello&apos;; &#125; &#125;, data()&#123; return &#123; message:&apos;hello&apos; &#125; &#125; &#125;) var app=new Vue(&#123; el:&apos;#app&apos;, template:` &lt;div&gt; &lt;parent&gt;&lt;/parent&gt; &lt;/div&gt; ` &#125;) 7.boradcastå’Œdispatchvue1.0ä¸­æä¾›äº†è¿™ç§æ–¹å¼ï¼Œä½†vue2.0ä¸­æ²¡æœ‰ï¼Œä½†å¾ˆå¤šå¼€æºè½¯ä»¶éƒ½è‡ªå·±å°è£…äº†è¿™ç§æ–¹å¼ï¼Œæ¯”å¦‚min uiã€element uiå’Œiviewç­‰ã€‚æ¯”å¦‚å¦‚ä¸‹ä»£ç ï¼Œä¸€èˆ¬éƒ½ä½œä¸ºä¸€ä¸ªmixinsåŽ»ä½¿ç”¨, broadcastæ˜¯å‘ç‰¹å®šçš„çˆ¶ç»„ä»¶ï¼Œè§¦å‘äº‹ä»¶ï¼Œdispatchæ˜¯å‘ç‰¹å®šçš„å­ç»„ä»¶è§¦å‘äº‹ä»¶ï¼Œæœ¬è´¨ä¸Šè¿™ç§æ–¹å¼è¿˜æ˜¯onå’Œonå’Œemitçš„å°è£…ï¼Œä½†åœ¨ä¸€äº›åŸºç¡€ç»„ä»¶ä¸­å´å¾ˆå®žç”¨ã€‚ 1234567891011121314151617181920212223242526272829303132function broadcast(componentName, eventName, params) &#123; this.$children.forEach(child =&gt; &#123; var name = child.$options.componentName; if (name === componentName) &#123; child.$emit.apply(child, [eventName].concat(params)); &#125; else &#123; broadcast.apply(child, [componentName, eventName].concat(params)); &#125; &#125;);&#125;export default &#123; methods: &#123; dispatch(componentName, eventName, params) &#123; var parent = this.$parent; var name = parent.$options.componentName; while (parent &amp;&amp; (!name || name !== componentName)) &#123; parent = parent.$parent; if (parent) &#123; name = parent.$options.componentName; &#125; &#125; if (parent) &#123; parent.$emit.apply(parent, [eventName].concat(params)); &#125; &#125;, broadcast(componentName, eventName, params) &#123; broadcast.call(this, componentName, eventName, params); &#125; &#125;&#125;; 8.vuexå¤„ç†ç»„ä»¶ä¹‹é—´çš„æ•°æ®äº¤äº’å¦‚æžœä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œå¾ˆå¤šç»„ä»¶ä¹‹é—´éœ€è¦åŒæ—¶å¤„ç†ä¸€äº›å…¬å…±çš„æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™æ‰æœ‰ä¸Šé¢è¿™ä¸€äº›æ–¹æ³•å¯èƒ½ä¸åˆ©äºŽé¡¹ç›®çš„ç»´æŠ¤ï¼Œvuexçš„åšæ³•å°±æ˜¯å°†è¿™ä¸€äº›å…¬å…±çš„æ•°æ®æŠ½ç¦»å‡ºæ¥ï¼Œç„¶åŽå…¶ä»–ç»„ä»¶å°±å¯ä»¥å¯¹è¿™ä¸ªå…¬å…±æ•°æ®è¿›è¡Œè¯»å†™æ“ä½œï¼Œè¿™æ ·è¾¾åˆ°äº†è§£è€¦çš„ç›®çš„ã€‚ è¯¦æƒ…å¯å‚è€ƒï¼šhttps://vuex.vuejs.org/zh-cn/]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€ï¼ˆåï¼‰DOM0å’ŒDOM2çº§äº‹ä»¶]]></title>
    <url>%2Fposts%2F64d673ce.html</url>
    <content type="text"><![CDATA[JSä¸­çš„DOM0å’ŒDOM2äº‹ä»¶JSä¸­çš„äº‹ä»¶åŸºç¡€åŠæ ¸å¿ƒåŽŸç†ä»¥åŠé¡¹ç›®å®žæˆ˜äº‹ä»¶çš„å®šä¹‰ äº‹ä»¶ï¼šå…ƒç´ å¤©ç”Ÿå…·å¤‡çš„è¡Œä¸ºæ–¹å¼ï¼ˆå’Œå†™ä¸å†™JSä»£ç æ²¡æœ‰å…³ç³»ï¼‰ã€onclickä¸æ˜¯äº‹ä»¶ï¼Œclickæ‰æ˜¯äº‹ä»¶ï¼Œæµè§ˆå™¨ä¼šæŠŠä¸€äº›å¸¸ç”¨äº‹ä»¶æŒ‚è½½åˆ°å…ƒç´ å¯¹è±¡çš„ç§æœ‰å±žæ€§ä¸Šï¼Œè®©æˆ‘ä»¬å¯ä»¥å®žçŽ°DOM0äº‹ä»¶ç»‘å®šã€‘ï¼Œå½“æˆ‘ä»¬åŽ»æ“ä½œå…ƒç´ çš„æ—¶å€™ä¼šè§¦å‘å…ƒç´ çš„å¾ˆå¤šäº‹ä»¶äº‹ä»¶ç»‘å®šï¼šç»™å½“å‰å…ƒç´ çš„æŸä¸ªäº‹ä»¶ç»‘å®šæ–¹æ³•ï¼Œç›®çš„æ˜¯è®©å½“å‰å…ƒç´ æŸä¸ªäº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œåšå‡ºä¸€äº›ååº” äº‹ä»¶ç»‘å®šçš„ä¸¤ç§æ–¹æ³• DOM0çº§äº‹ä»¶ç»‘å®š curEle.onclick=function(){}; DOM2çº§äº‹ä»¶ç»‘å®š æ ‡å‡†æµè§ˆå™¨ï¼šcurEle.addEventListener(â€˜clickâ€™,function(){},false) IE6-8:curEle.attachEvent(â€˜onclickâ€™,function(){}) DOM0äº‹ä»¶å¸¸ç”¨äº‹ä»¶æ±‡æ€»[PCç«¯] è¡¨å•å…ƒç´ å¸¸ç”¨çš„äº‹ä»¶ blur:å¤±åŽ»ç„¦ç‚¹ focus:èŽ·å–ç„¦ç‚¹ change:å†…å®¹æ”¹å˜ select:è¢«é€‰ä¸­äº‹ä»¶ é”®ç›˜å¸¸ç”¨äº‹ä»¶è¡Œä¸º keydown:é”®ç›˜æŒ‰ä¸‹ keyup:é”®ç›˜æŠ¬èµ· keypress:é”®ç›˜æŒ‰ä¸‹ï¼ˆä¸­æ–‡è¾“å…¥æ³•ä¸èƒ½è§¦å‘ï¼Œè‹±æ–‡çŠ¶æ€ä¸‹å¯ä»¥è§¦å‘ï¼Œå› ä¸ºæ–‡æœ¬è¢«è¾“å…¥åˆ°æ–‡æœ¬æ¡†ä¸­ï¼‰ é¼ æ ‡å¸¸ç”¨äº‹ä»¶è¡Œä¸º click:ç‚¹å‡»ï¼ˆä¸æ˜¯å•å‡»ï¼‰ dblclick:åŒå‡»ï¼ˆ300msä¹‹å†…è¿žç»­è§¦å‘ä¸¤æ¬¡ç‚¹å‡»äº‹ä»¶ï¼‰ mouseover:é¼ æ ‡æ»‘è¿‡ mouseout:é¼ æ ‡æ»‘å‡º mouseenter: é¼ æ ‡è¿›å…¥ mouseleave: é¼ æ ‡ç¦»å¼€ mousedown:é¼ æ ‡æŒ‰ä¸‹ï¼ˆå·¦é”®ï¼‰ mouseup:é¼ æ ‡å·¦é”®æŠ¬èµ· mousewheel:é¼ æ ‡æ»šè½®æ»šåŠ¨ å…¶ä»–å¸¸ç”¨äº‹ä»¶è¡Œä¸º load:åŠ è½½æˆåŠŸ error:åŠ è½½å¤±è´¥ scroll: resize:å¤§å°æ”¹å˜äº‹ä»¶:window.onresize:æµè§ˆå™¨çª—å£æ”¹å˜å¤§å°è§¦å‘è¯¥äº‹ä»¶ [ç§»åŠ¨ç«¯ ç§»åŠ¨ç«¯é”®ç›˜ä¸€èˆ¬éƒ½æ˜¯è™šæ‹Ÿé”®ç›˜ï¼Œè™½ç„¶å­˜åœ¨keydown,keyup,ä½†å…¼å®¹ä¸å¥½ï¼Œä½¿ç”¨inputäº‹ä»¶ä»£æ›¿ç§»åŠ¨ç«¯æ²¡æœ‰é¼ æ ‡ï¼Œæ‰€ä»¥é¼ æ ‡ç±»äº‹ä»¶åœ¨ç§»åŠ¨ç«¯å…¼å®¹æ€§éžå¸¸å·®ï¼Œmouseç±»äº‹ä»¶åŸºæœ¬æ— æ³•ä½¿ç”¨ç§»åŠ¨ç«¯å¤§éƒ¨åˆ†äº‹ä»¶æ˜¯é æ‰‹æŒ‡å®Œæˆçš„ï¼Œæ‰€ä»¥å®ƒç‹¬æœ‰æ‰‹æŒ‡äº‹ä»¶-å•æ‰‹æŒ‡äº‹ä»¶ï¼štouchstart touchmove touchend touchcancel-å¤šæ‰‹æŒ‡äº‹ä»¶ï¼šgesturestart gestuerchange gestuerendâ€¦..ç§»åŠ¨ç«¯è¿˜æœ‰å¾ˆå¤šäº‹ä»¶æ˜¯é ç¡¬ä»¶å®Œæˆçš„ï¼šæ‰‹æœºä¼ æ„Ÿå™¨ï¼Œé™€èžºä»ªï¼Œé‡åŠ›æ„Ÿåº”å™¨ç­‰ç§»åŠ¨ç«¯å…¼å®¹clickäº‹ä»¶ï¼Œå®ƒæŠŠclickå½“åšå•å‡»ä½¿ç”¨ï¼ˆä¼šæœ‰300MSçš„å»¶è¿Ÿäº‹ä»¶ï¼‰ äº‹ä»¶å¯¹è±¡ å¯¹ä»¥ä¸‹äº‹ä»¶ç»‘å®šçš„ä¸¥è°¨ç‰ˆæè¿°ï¼šåŸºäºŽDOM0çº§äº‹ä»¶çš„ç»‘å®šæ–¹å¼ï¼Œç»™boxçš„clickäº‹ä»¶ç»‘å®šäº†ä¸€ä¸ªæ–¹æ³•ã€‚å½“æ‰‹åŠ¨è§¦å‘clickäº‹ä»¶æ—¶ï¼Œä¼šæŠŠç»‘å®šçš„æ–¹æ³•æ‰§è¡Œbox.onclick=function(e){arguments[0]===e;//=&gt;eå°±æ˜¯äº‹ä»¶å¯¹è±¡e=e||window.event;(å…¼å®¹ç‰ˆèŽ·å–äº‹ä»¶å¯¹è±¡çš„å†™æ³•)};å½“å…ƒç´ çš„æŸä¸ªäº‹ä»¶è¡Œä¸ºè¢«è§¦å‘ï¼Œä¸ä»…ä¼šæŠŠä¹‹å‰ç»‘å®šçš„æ–¹æ³•æ‰§è¡Œï¼Œè¿˜ä¼šç»™ç»‘å®šçš„æ–¹æ³•ä¼ é€’ä¸€ä¸ªå€¼ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼ é€’çš„ï¼‰ï¼Œæˆ‘ä»¬æŠŠä¼ é€’çš„è¿™ä¸ªå€¼ç§°ä¸ºäº‹ä»¶å¯¹è±¡ï¼šï¼ˆæ ‡å‡†æµè§ˆå™¨ï¼‰ è¿™ä¸ªå€¼æ˜¯ä¸ªå¯¹è±¡ç±»åž‹çš„å€¼ï¼Œé‡Œé¢å­˜å‚¨äº†å¾ˆå¤šçš„å±žæ€§å’Œæ–¹æ³•ï¼Œ è¿™äº›å­˜å‚¨çš„å€¼éƒ½æ˜¯å½“å‰æœ¬æ¬¡æ“ä½œçš„åŸºæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šé¼ æ ‡ä½ç½®ï¼Œè§¦å‘è¡Œä¸ºç±»åž‹ã€‚ã€‚ã€‚ã€‚ã€åªå’Œæœ¬æ¬¡æ“ä½œæœ‰å…³,ä¸€ä¸ªé¡µé¢ä¸­åªæœ‰ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ã€‘ IE6-8ä¸‹å…³äºŽäº‹ä»¶å¯¹è±¡çš„æœºåˆ¶ æ–¹æ³•è¢«è§¦å‘æ‰§è¡Œæ—¶ï¼Œæµè§ˆå™¨å¹¶æ²¡æœ‰æŠŠäº‹ä»¶å¯¹è±¡å½“åšå€¼ä¼ é€’ç»™å‡½æ•°ï¼›(eæ˜¯undefined) IE6-8ä¸‹çš„äº‹ä»¶å¯¹è±¡éœ€è¦æˆ‘ä»¬é€šè¿‡window.eventæ¥èŽ·å– é¼ æ ‡äº‹ä»¶å¯¹è±¡ï¼ˆmouseeventï¼‰ clientX/clientY:å½“å‰é¼ æ ‡è§¦å‘ç‚¹è·ç¦»å½“å‰çª—å£å·¦ä¸Šè§’çš„X/Yåæ ‡ pageX/pageY:å½“å‰é¼ æ ‡è§¦å‘ç‚¹è·ç¦»BODYå·¦ä¸Šè§’çš„X/Yåæ ‡(IE6-8ä¸­æ²¡æœ‰è¿™ä¸¤ä¸ªå±žæ€§)å…¼å®¹å¤„ç† 123456789101112131415161718box.onckick=function(e)&#123; if(typeof e==='undefined')&#123; e=window.event; //-&gt;å¤„ç†e //-&gt;pageX/pageY e.pageX=e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft); e.pageY=e.clientY+(document.documentElement.scrollTop||document.body.scrollTop); //-&gt;target e.target=e.srcElement; //-&gt;preventDafault e.preventDefault=function()&#123; e.returnValue=false; &#125;; //=&gt;stopPropagation e.stopPropagation=function()&#123; e.cancelBubble=true &#125; &#125; &#125;//è¯¥å…¼å®¹æ¯”è¾ƒå®Œæ•´ï¼Œå½“å¤„ç†ä¸€ä¸ªç®€å•å…¼å®¹æ—¶å¯ç®€å•å¤„ç† type:å½“å‰è§¦å‘äº‹ä»¶çš„ç±»åž‹ targetï¼šäº‹ä»¶æºï¼ˆå½“å‰é¼ æ ‡æ“ä½œçš„æ˜¯é‚£ä¸ªå…ƒç´ ï¼‰ï¼ˆIE6-8æ²¡æœ‰è¯¥å±žæ€§ï¼Œç”¨srcElementè¿™ä¸ªå±žæ€§ä»£è¡¨äº‹ä»¶æºï¼‰ preventDefault:ä½œç”¨ï¼šé˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼›ï¼ˆIE6-8æ²¡æœ‰è¯¥æ–¹æ³•ï¼Œä½¿ç”¨ returnValue=falseå¤„ç†ï¼‰ stopPropagation:é˜»æ­¢äº‹ä»¶çš„å†’æ³¡ä¼ æ’­ [IE6-8ä¸å…¼å®¹ï¼Œä½¿ç”¨cancelBubble=trueæ¥å¤„ç†] é”®ç›˜äº‹ä»¶å¯¹è±¡(keyboardEvent) code:å½“å‰æŒ‰å¾—é”®ç›˜æŒ‰é”®æ˜¯å“ªä¸€ä¸ª ã€IE6-8æ²¡æœ‰è¿™ä¸ªå±žæ€§ã€‘keyå±žæ€§å’Œcodeä¸€æ ·ï¼Œå‚¨å­˜å½¢å¼ä¸ä¸€æ · keyCodeï¼šå­˜å‚¨çš„æ˜¯å½“å‰æŒ‰é”®çš„ç å€¼ï¼ˆå¤§éƒ¨åˆ†æŒ‰é”®éƒ½æœ‰è‡ªå·±çš„ç å€¼ï¼‰ which:å’ŒkeyCodeä¸€æ ·ï¼Œä¹Ÿæ˜¯å½“å‰æŒ‰é”®çš„ç å€¼ï¼ˆwhichä¸å…¼å®¹IE6-8ï¼‰ è¿™å‡ ä¸ªç å€¼éœ€è¦è®°ä½ï¼ˆåˆ é™¤ï¼š8 ã€ å›žè½¦ï¼š13ã€ ç©ºæ ¼ï¼š32ã€ tab ï¼š9ã€ï¼‰ æ‰‹æŒ‡äº‹ä»¶å¯¹è±¡ï¼ˆTouchEventï¼‰touches&amp;&amp;changedTouches&amp;&amp;targetTouches:å­˜å‚¨çš„æ˜¯å½“å‰å±å¹•ä¸Šæ¯ä¸€ä¸ªæ‰‹æŒ‡æ“ä½œçš„ä½ç½®ä¿¡æ¯ touchesï¼šåªæœ‰æ‰‹æŒ‡åœ¨å±å¹•ä¸Šæˆ‘ä»¬æ‰èƒ½èŽ·å–ç›¸å…³ä¿¡æ¯ï¼Œæ‰‹æŒ‡ç¦»å¼€åŽï¼Œè¿™æ ·touchendäº‹ä»¶ä¸­æˆ‘ä»¬å°±æ— æ³•é€šè¿‡touchesèŽ·å–æ‰‹æŒ‡ä¿¡æ¯ changedTouchesï¼šæ‰‹æŒ‡åœ¨å±å¹•ä¸Šæ—¶ï¼Œå’Œtouchesä¸€æ ·å¯ä»¥èŽ·å¾—ç›¸å…³ä¿¡æ¯ï¼Œæ‰‹æŒ‡ç¦»å¼€åŽä¹Ÿå¯ä»¥è®°å½•æ‰‹æŒ‡ç¦»å¼€å±å¹•ä¸€çž¬é—´æ‰€åœ¨çš„ä½ç½®ä¿¡æ¯ï¼ˆæœ€å¸¸ç”¨çš„ï¼‰ 1234567891011121314touchesEvent type:'touchStart', target:äº‹ä»¶æºï¼Œ touches: 0:&#123; clientX:xxx, clientY:xxx, pageX:xxx, pageY:xxx, ..... &#125; ... lentthï¼š1 chan è¯¦ç»†å¤„ç† 1234567891011121314151617181920212223242526272829303132333435363738let oBox = document.querySelector('#box');oBox.ontouchstart = function (e) &#123; let point = e.changedTouches[0]; //=&gt;è®°å½•å½“å‰æ‰‹æŒ‡çš„èµ·å§‹åæ ‡ä½ç½®(è®°å½•åœ¨å½“å‰å…ƒç´ çš„è‡ªå®šä¹‰å±žæ€§ä¸Š) this.strX = point.pageX; this.strY = point.pageY; this.isMove = false;&#125;;oBox.ontouchmove = function (e) &#123; let point = e.changedTouches[0]; //=&gt;ä¸€èˆ¬æˆ‘ä»¬æ‰‹æŒ‡æ“ä½œï¼Œéƒ½ä¼šæˆ–å¤šæˆ–å°‘çš„å‘ç”Ÿä¸€äº›åç§»ï¼ˆä¹ æƒ¯æ€§åç§»ï¼‰ï¼Œæ­¤æ—¶ä¸åº”è¯¥ç®—ä½œæ»‘åŠ¨ï¼Œåªæœ‰æ»‘åŠ¨çš„è·ç¦»è¶…å‡ºä¸€å®šèŒƒå›´ï¼Œæˆ‘ä»¬æŒ‰ç…§æ»‘åŠ¨å¤„ç†å³å¯ï¼ˆä¸€èˆ¬éƒ½æ˜¯æŠŠ10pxä½œä¸ºåå·®å€¼ï¼‰ let changeX = point.pageX - this.strX, changeY = point.pageY - this.strY; this.changeX = changeX; this.changeY = changeY; if (Math.abs(changeX) &gt; 10 || Math.abs(changeY) &gt; 10) &#123; this.isMove = true; &#125;&#125;;oBox.ontouchend = function (e) &#123; let point = e.changedTouches[0]; //=&gt;æ‰‹æŒ‡ç¦»å¼€çš„æ—¶å€™ï¼šéªŒè¯æ˜¯å¦å‘ç”Ÿæ»‘åŠ¨ if (!this.isMove) &#123; //=&gt;ç‚¹å‡»æ“ä½œ console.log('æˆ‘æ˜¯ç‚¹å‡»æ“ä½œ~~'); return; &#125; //=&gt;æ»‘åŠ¨æ“ä½œ let dir = null; if (Math.abs(this.changeX) &gt; Math.abs(this.changeY)) &#123; //=&gt;å·¦å³æ»‘åŠ¨ dir = this.changeX &lt; 0 ? 'LEFT' : 'RIGHT'; &#125; else &#123; //=&gt;ä¸Šä¸‹æ»‘åŠ¨ dir = this.changeY &lt; 0 ? 'UP' : 'DOWN'; &#125; console.log(`å½“å‰æ‰‹æŒ‡æ»‘åŠ¨çš„æ–¹å‘ä¸ºï¼š$&#123;dir&#125;`);&#125;; æ‰‹æœºç§»åŠ¨ç«¯çš„ç‚¹å‡»ã€é•¿æŒ‰ã€æ»‘åŠ¨ç­‰éƒ½æ˜¯åŸºäºŽå†…ç½®çš„åŽŸç”Ÿçš„touchstart/touchmove/touchendäº‹ä»¶æ¨¡æ‹Ÿå‡ºæ¥çš„ä¸€äº›æ•ˆæžœï¼Œæ²¡æœ‰çŽ°æˆçš„äº‹ä»¶å¸‚åœºä¸Šæœ‰è®¸å¤šæˆç†Ÿçš„ç±»åº“ï¼Œæˆ‘ä»¬ç›´æŽ¥ä½¿ç”¨å³å¯1ã€fastclick.js:ç›®çš„å°±æ˜¯è§£å†³äº†ç§»åŠ¨ç«¯clickäº‹ä»¶300msçš„å»¶è¿Ÿé—®é¢˜2ã€ç™¾åº¦äº‘touchæ‰‹æŒ‡äº‹ä»¶åº“3ã€hammer.js4ã€zepto.js:æä¾›ç§»åŠ¨ç«¯äº‹ä»¶æ“ä½œçš„æ¿å—ï¼Œä¹Ÿæ˜¯ç›®å‰å¸‚åœºä¸Šä½¿ç”¨çŽ‡æœ€é«˜çš„ é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºAæ ‡ç­¾çš„é»˜è®¤è¡Œä¸ºåŠé˜»æ­¢ 1.è¶…é“¾æŽ¥ï¼šç‚¹å‡»Aæ ‡ç­¾å¯ä»¥å®žçŽ°é¡µé¢çš„è·³è½¬2ã€é”šç‚¹å®šä½ï¼šé€šè¿‡HASHå€¼å®šä½åˆ°å½“å‰é¡µé¢çš„æŒ‡å®šIDç›’å­ä½ç½®- é¦–å…ˆURLåœ°å€æ æœ«å°¾è¿½åŠ äº†ä¸€ä¸ªHASH;- å¦‚æžœåœ°å€æ åŒ…å«hashå€¼ï¼Œæµè§ˆå™¨åœ¨æ¸²æŸ“é¡µé¢åŽï¼Œä¼šé»˜è®¤å®šä½åˆ°hashå€¼çš„ä½ç½® çœŸå®žé¡¹ç›®ä¸­æˆ‘ä»¬æƒ³ç”¨Aæ ‡ç­¾åšä¸€ä¸ªæ™®é€šæŒ‰é’®ï¼ˆä¼˜åŠ¿ï¼šå®ƒçš„ï¼šhoveræ ·å¼æ˜¯å…¼å®¹æ‰€æœ‰æµè§ˆå™¨çš„ï¼‰æ­¤æ—¶ï¼Œè¦æŠŠä¹‹å‰æåˆ°çš„ä¸¤ä¸ªé»˜è®¤è¡Œä¸ºé˜»æ­¢æŽ‰æ‰å¯ä»¥ é˜»æ­¢Aæ ‡ç­¾çš„é»˜è®¤è¡Œä¸º åœ¨HTMLä¸­é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆå¸¸ç”¨ï¼‰ ; åœ¨JSä¸­é˜»æ­¢ å•ç‚¹å‡»Aæ ‡ç­¾æ—¶ é¦–å…ˆä¼šè§¦å‘clickäº‹ä»¶ å…¶æ¬¡æŒ‰ç…§hrefä¸­çš„åœ°å€é¡µé¢è¿›è¡Œè·³è½¬link.onclick=function(){ return false;}//é˜»æ­¢é¡µé¢è¡Œä¸ºlink.onclick=function(e){â€‹ e=e||window.event;â€‹ e.preventDefault?e.preventDefault():e.returnValue=false;â€‹ } äº‹ä»¶çš„ä¼ æ’­æœºåˆ¶äº‹ä»¶ä¼ æ’­æœ‰ä¸‰ä¸ªé˜¶æ®µEvent.prototypeï¼š 1234- 0 NONE:é»˜è®¤å€¼ï¼Œä¸ä»£è¡¨ä»»ä½•æ„æ€- 1 `CAPTURING_PHASE æ•èŽ·é˜¶æ®µ`- 2 ` AT_TARGET ç›®æ ‡é˜¶æ®µï¼ˆå½“å‰äº‹ä»¶æºï¼‰`- 3 `BUBBLING _PHASE :å†’æ³¡é˜¶æ®µ` å½“å‰å…ƒç´ çš„æŸä¸ªäº‹ä»¶è¡Œä¸ºè¢«è§¦å‘ï¼Œå®ƒçš„æ‰€æœ‰çš„ç¥–å…ˆå…ƒç´ ï¼ˆä¸€ç›´åˆ°documentï¼‰çš„ç›¸å…³äº‹ä»¶è¡Œä¸ºä¹Ÿä¼šè¢«è§¦å‘æ‰§è¡Œï¼ˆç”±é‡Œå‘å¤–ï¼‰ï¼Œæˆ‘ä»¬æŠŠè¿™ç§ä¼ æ’­æœºåˆ¶å«åšå†’æ³¡ä¼ æ’­ mouseoverå’Œmouseenteräº‹ä»¶çš„åŒºåˆ«mouseoverï¼šé¼ æ ‡æ»‘åˆ°å…ƒç´ ä¸Šï¼šå­˜åœ¨äº‹ä»¶çš„å†’æ³¡ä¼ æ’­æœºåˆ¶ mouseenterï¼šé¼ æ ‡è¿›å…¥å…ƒç´ é‡Œï¼›æµè§ˆå™¨é˜»æ­¢äº†å®ƒçš„å†’æ³¡ä¼ æ’­æœºåˆ¶ï¼› ä¸åŒç‚¹ åŒºåˆ« mouseover mouseenter åŒºåˆ« 1 å­˜åœ¨å†’æ³¡ä¼ æ’­æœºåˆ¶ å†’æ³¡ä¼ æ’­æœºåˆ¶è¢«æµè§ˆå™¨é˜»æ­¢ åŒºåˆ« 2 å½“é¼ æ ‡ä»Žçˆ¶å…ƒç´ è¿›å…¥åˆ°å­å…ƒç´ æ—¶ï¼Œé¦–å…ˆä¼šè§¦å‘çˆ¶å…ƒç´ çš„mouseoutäº‹ä»¶ï¼Œå†è§¦å‘å­å…ƒç´ çš„mouseoveräº‹ä»¶ï¼Œç”±äºŽå†’æ³¡ä¼ æ’­æœºåˆ¶ï¼Œå¯¼è‡´çˆ¶å…ƒç´ çš„mouseoveräº‹ä»¶ä¹Ÿè¢«è§¦å‘ å½“é¼ æ ‡ä»Žçˆ¶å…ƒç´ è¿›å…¥åˆ°å­å…ƒç´ æ—¶,å¹¶ä¸ä¼šè§¦å‘çˆ¶å…ƒç´ çš„mouseoutäº‹ä»¶ï¼Œä½†æ˜¯è§¦å‘äº†å­å…ƒç´ çš„mouseenteräº‹ä»¶ï¼Œç”±äºŽæµè§ˆå™¨é˜»æ­¢äº†å®ƒçš„å†’æ³¡ä¼ æ’­ï¼Œæ‰€ä»¥çˆ¶å…ƒç´ çš„è¯¥äº‹ä»¶ä¸ä¼šè¢«è§¦å‘ äº‹ä»¶å§”æ‰˜ï¼ˆvery importantï¼‰åŽŸç†ï¼šåˆ©ç”¨äº‹ä»¶çš„å†’æ³¡ä¼ æ’­æœºåˆ¶å®Œæˆï¼ˆmouseenterä¸å­˜åœ¨å†’æ³¡ä¼ æ’­ï¼‰ å½“ä¸€ä¸ªå®¹å™¨å†…çš„å¾ˆå¤šå…ƒç´ éƒ½è¦ä¸ºåŒä¸€äº‹ä»¶ç»‘å®šæ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦ç»™å¤–å±‚å®¹å™¨çš„è¯¥äº‹ä»¶ç»‘å®šæ–¹æ³•ï¼Œå½“é‡Œå±‚å…ƒç´ çš„äº‹ä»¶è¢«å‡ºå‘æ—¶ï¼Œä¼šé€šè¿‡å†’æ³¡ä¼ æ’­æœºåˆ¶ä¼ åˆ°æœ€å¤–å±‚å®¹å™¨é‚£é‡Œï¼Œè§¦å‘å¤–å±‚å®¹å™¨ç»‘å®šçš„æ–¹æ³•æ‰§è¡Œï¼Œåœ¨æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ ¹æ®åˆ¤æ–­äº‹ä»¶æºçš„ä¸åŒè€Œåšä¸åŒçš„äº‹æƒ…ã€‚ï¼ˆåˆ©ç”¨äº‹ä»¶å§”æ‰˜å¯æé«˜50%å·¦å³çš„æ€§èƒ½ï¼‰ æ‹–æ‹½å½“ä¸­é¼ æ ‡ç„¦ç‚¹ä¸¢å¤±é—®é¢˜åœ¨æ‹–æ‹½ç™»é™†çª—å£çš„æ¡ˆä¾‹ä¸­ï¼ˆ11.25ï¼‰ å½“é¼ æ ‡ç§»åŠ¨é€Ÿåº¦è¿‡å¿«æ—¶ï¼Œé¼ æ ‡ç¦»å¼€äº†h3ï¼Œå› ä¸ºç›’å­è·Ÿä¸ä¸Šå¥”è·‘çš„é€Ÿåº¦ï¼Œæ‰€ä»¥å¯¼è‡´ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ - é¼ æ ‡åœ¨h3ä¹‹å¤–é£žï¼Œä¸ä¼šè§¦å‘H3çš„mousemoveï¼Œç›’å­å°±ä¸åŠ¨äº†ï¼› - é¼ æ ‡åœ¨h3ä¹‹å¤–æŠ¬èµ·ï¼Œä¹Ÿä¸ä¼šè§¦å‘h3çš„mouseupï¼Œé‚£ä¹ˆåŽŸæœ‰ç»‘å®šçš„dragmoveæ— æ³•è¢«ç§»é™¤ï¼Œé¼ æ ‡é‡æ–°è¿›å…¥h3,æ­¤æ—¶ä¸ç®¡é¼ æ ‡æ˜¯å¦æŒ‰ä¸‹ï¼Œéƒ½ä¼šè§¦å‘H3çš„dragmoveï¼› åŽŸå› ï¼šé¼ æ ‡é£žå‡ºh3,å†æ€Žä¹ˆæ“ä½œå°±å’Œh3æ²¡æœ‰å…³ç³» è§£å†³æ–¹æ¡ˆï¼š 1.æŠŠmouseupå’Œmousemoveäº‹ä»¶ç»‘å®šç»™document,åŽŸå› ï¼šä¸ç®¡é¼ æ ‡æ€Žä¹ˆé£žï¼Œéƒ½é£žä¸å‡ºdocumentï¼›ï¼ˆä½¿ç”¨ç®­å¤´å‡½æ•°ï¼‰åªè¦ä½ é¼ æ ‡è¿˜åœ¨æ–‡æ¡£ä¸­ï¼Œé‚£ä¹ˆmousemoveå’Œmouseupæ°¸è¿œç”Ÿæ•ˆ 2.setCaptureï¼ˆä¸å…¼å®¹è°·æ­Œï¼Œæ”¯æŒIeï¼‰ DOM2äº‹ä»¶ç»‘å®š123456 //=&gt;æ ‡å‡†æµè§ˆå™¨ oBox.addEventLister('click',function(e)&#123; //this:obx &#125;,false) //false=&gt;è®©äº‹ä»¶åœ¨å†’æ³¡ä¼ æ’­æ—¶æ‰§è¡Œ//true=&gt;è®©äº‹ä»¶åœ¨æ•èŽ·é˜¶æ®µæ‰§è¡Œï¼ˆéžå¸¸å°‘è§ï¼‰ 12345//=&gt;IE6-8æµè§ˆå™¨ oBox.attachEvent('onclick',function(e)&#123; //e:äº‹ä»¶å¯¹è±¡ï¼Œä¸åŒäºŽDOM0çº§äº‹ä»¶ï¼Œæµè§ˆå™¨ä¼šé»˜è®¤å°†äº‹ä»¶å¯¹è±¡ä¼ é€’è¿›æ¥ï¼Œä¸Žwindow.eventçš„å€¼ç›¸åŒï¼Œå› æ­¤å¯¹äºŽï¼špageX/pageY/target...ç­‰ä¾æ—§å­˜åœ¨å…¼å®¹ï¼› &#125;) //=&gt;ç»‘å®šçš„æ–¹æ³•éƒ½æ˜¯åœ¨å†’æ³¡ä¼ æ’­é˜¶æ®µæ‰§è¡Œ DOM1? åœ¨DOMç¬¬ä¸€ä»£å‡çº§è¿­ä»£çš„æ—¶å€™ï¼Œäº‹ä»¶ç»‘å®šä¾ç„¶æ²¿ç”¨DOM0ç»‘å®šçš„æ–¹å¼..soâ€¦ DOM0äºŽDOM2äº‹ä»¶ç»‘å®šçš„åŒºåˆ«DOM0äº‹ä»¶ç»‘å®šçš„åŽŸç† ç»™å½“å‰å…ƒç´ çš„æŸä¸€ç§æœ‰å±žæ€§ï¼ˆonXXXï¼‰èµ‹å€¼çš„è¿‡ç¨‹ï¼›ï¼ˆä¹‹å‰å±žæ€§é»˜è®¤å€¼æ˜¯nullï¼Œå¦‚æžœæˆ‘ä»¬èµ‹å€¼äº†ä¸€ä¸ªå‡½æ•°ï¼Œå°±ç›¸å½“äºŽç»‘å®šäº†ä¸€ä¸ªæ–¹æ³•ï¼‰ å½“æˆ‘ä»¬èµ‹å€¼æˆåŠŸï¼ˆèµ‹å€¼ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œæ­¤æ—¶æµè§ˆå™¨ä¼šæŠŠDOMå…ƒç´ å’Œèµ‹å€¼çš„çš„å‡½æ•°å»ºç«‹å…³è”ï¼Œä»¥åŠå»ºç«‹DOMå…ƒç´ çš„è¡Œä¸ºç›‘å¬ï¼Œå½“æŸä¸€è¡Œä¸ºè¢«ç”¨æˆ·è§¦å‘ï¼Œæµè§ˆå™¨ä¼šæŠŠèµ‹å€¼çš„å‡½æ•°æ‰§è¡Œï¼› DOM0äº‹ä»¶ç»‘å®šçš„ç‰¹ç‚¹ åªæœ‰DOMå…ƒç´ å¤©ç”Ÿæ‹¥æœ‰è¿™ä¸ªç§æœ‰å±žæ€§ï¼ˆonxxxäº‹ä»¶ç§æœ‰å±žæ€§ï¼‰ï¼Œæˆ‘ä»¬èµ‹å€¼çš„æ–¹æ³•æ‰å«äº‹ä»¶ç»‘å®šï¼Œå¦åˆ™å±žäºŽè®¾ç½®è‡ªå®šä¹‰å±žæ€§ ç§»é™¤äº‹ä»¶ç»‘å®šçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦èµ‹å€¼ä¸ºnullï¼› åœ¨DOM0äº‹ä»¶ç»‘å®šä¸­ï¼Œåªèƒ½ç»™å½“å‰å…ƒç´ çš„æŸä¸€ä¸ªäº‹ä»¶è¡Œä¸ºç»‘å®šä¸€ä¸ªæ–¹æ³•ï¼Œç»‘å®šå¤šä¸ªæ–¹æ³•ï¼Œæœ€åŽä¸€æ¬¡çš„ç»‘å®šçš„ä¼šæ›¿æ¢å‰é¢ç»‘å®šçš„ DOM2äº‹ä»¶ç»‘å®šçš„åŽŸç† DOM2äº‹ä»¶ç»‘å®šä½¿ç”¨çš„addEventListener/attachEventæ–¹æ³•éƒ½æ˜¯åœ¨eventTargetè¿™ä¸ªå†…ç½®ç±»çš„åŽŸåž‹ä¸Šå®šä¹‰çš„ï¼Œæˆ‘ä»¬è°ƒç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆè¦é€šè¿‡åŽŸåž‹é“¾æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œç„¶åŽæ‰§è¡Œå®Œæˆäº‹ä»¶ç»‘å®šçš„æ•ˆæžœ æµè§ˆå™¨ä¼šç»™å½“å‰å…ƒç´ çš„æŸä¸ªäº‹ä»¶è¡Œä¸ºå¼€è¾Ÿä¸€ä¸ªäº‹ä»¶æ± ï¼ˆäº‹ä»¶é˜Ÿåˆ—ï¼‰ã€æµè§ˆå™¨æœ‰ä¸€ä¸ªç»Ÿä¸€çš„äº‹ä»¶æ± ï¼Œæ¯ä¸ªå…ƒç´ ç»‘å®šçš„è¡Œä¸ºéƒ½æ”¾åœ¨è¿™é‡Œï¼Œé€šè¿‡ç›¸å…³æ ‡å¿—åŒºåˆ†ã€‘ï¼Œå½“æˆ‘ä»¬é€šè¿‡ addEventListener/attachEventè¿›è¡Œäº‹ä»¶ç»‘å®šçš„æ—¶å€™ï¼Œä¼šæŠŠç»‘å®šçš„æ–¹æ³•æ”¾åœ¨äº‹ä»¶æ± ä¸­ï¼› å½“å…ƒç´ çš„æŸä¸€è¡Œä¸ºè¢«è§¦å‘ï¼Œæµè§ˆå™¨å›žåˆ°å¯¹åº”äº‹ä»¶æ± ä¸­ï¼ŒæŠŠå½“å‰æ”¾åœ¨äº‹ä»¶æ± çš„æ‰€æœ‰æ–¹æ³•æŒ‰åºä¾æ¬¡æ‰§è¡Œ ç‰¹ç‚¹ æ‰€æœ‰DOM0æ”¯æŒçš„è¡Œä¸ºï¼ŒDOM2éƒ½å¯ä»¥ç”¨ï¼ŒDOM2è¿˜æ”¯æŒDOM0æ²¡æœ‰çš„äº‹ä»¶è¡Œä¸ºï¼ˆè¿™æ ·è¯´æ¯”è¾ƒç¬¼ç»Ÿï¼‰ï¼ˆæ ¸å¿ƒï¼‰ã€æµè§ˆå™¨ä¼šæŠŠä¸€äº›å¸¸ç”¨äº‹ä»¶æŒ‚è½½åˆ°å…ƒç´ å¯¹è±¡çš„ç§æœ‰å±žæ€§ä¸Šï¼Œè®©æˆ‘ä»¬å¯ä»¥å®žçŽ°DOM0äº‹ä»¶ç»‘å®šï¼ŒDOM2ï¼šå‡¡æ˜¯æµè§ˆå™¨ç»™å…ƒç´ å¤©ç”Ÿè®¾ç½®çš„äº‹ä»¶åœ¨DOM2ä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‘ä¾‹å¦‚ï¼šonDOMContentLoadedï¼ˆæ‰€æœ‰çš„DOM0å’ŒIE6-8çš„DOM2éƒ½ä¸æ”¯æŒï¼‰â€‹onDOMContentLoaded//å½“å‰æµè§ˆå™¨ä¸­çš„DOMç»“æž„åŠ è½½å®Œæˆï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ DOM2ä¸­å¯ä»¥ç»™å½“å‰å…ƒç´ çš„æŸä¸€äº‹ä»¶è¡Œä¸ºç»‘å®šå¤šä¸ªä¸åŒæ–¹æ³•ï¼ˆå› ä¸ºç»‘å®šçš„æ‰€æœ‰æ–¹æ³•éƒ½æ”¾åœ¨äº‹ä»¶æ± ä¸­ï¼‰ï¼› äº‹ä»¶çš„ç§»é™¤:äº‹ä»¶ç±»åž‹ã€ç»‘å®šçš„æ–¹æ³•ã€ä¼ æ’­é˜¶æ®µä¸‰ä¸ªå®Œå…¨ä¸€è‡´ï¼Œæ‰å¯ä»¥å®Œæˆç§»é™¤(å› æ­¤åœ¨ç»‘å®šæ–¹æ³•æ—¶ï¼Œå°½é‡ä¸è¦ç”¨åŒ¿åå‡½æ•°ï¼Œå¦åˆ™ä¸å¥½ç§»é™¤) 12345678910111213141516171819//=&gt;ON:ç»™å½“å‰å…ƒç´ çš„æŸä¸ªäº‹ä»¶ç»‘å®šæŸä¸ªæ–¹æ³• var on = function (curEle, type, fn) &#123; if (document.addEventListener) &#123; //=&gt;æ ‡å‡†æµè§ˆå™¨ curEle.addEventListener(type, fn, false); return; &#125; //=&gt;IE6~8 curEle.attachEvent('on' + type, fn);&#125;;//=&gt;OFF:ç§»é™¤å½“å‰å…ƒç´ æŸä¸ªäº‹ä»¶ç»‘å®šçš„æŸä¸ªæ–¹æ³•13.var off = function (curEle, type, fn) &#123;14. if (document.removeEventListener) &#123;15. curEle.removeEventListener(type, fn, false);16. return;17. &#125;18. //=&gt;IE6~819. curEle.detachEvent('on' + type, fn);20.&#125;; xxx.removeEventLister(&#39;click&#39;,function(){},false) ==DOM0å’ŒDOM2ç»‘å®šçš„æ–¹æ³•æ˜¯æ¯«æ— è”ç³»çš„ï¼ˆå› ä¸ºæ˜¯ä¸¤å¥—å®Œå…¨ä¸åŒçš„æœºåˆ¶ï¼‰ï¼Œå³ä½¿ç»‘å®šçš„æ–¹æ³•ç›¸åŒï¼Œä¹Ÿæ˜¯æ‰§è¡Œä¸¤æ¬¡ï¼Œè°å…ˆç»‘å®šï¼Œå°±å…ˆæ‰§è¡Œè°== window.onload&amp;&amp;$(document).ready()çš„åŒºåˆ«window.onload:å½“æµè§ˆå™¨ä¸­çš„æ‰€æœ‰èµ„æºï¼ˆDOMç»“æž„ã€æ–‡æœ¬å†…å®¹ã€å›¾ç‰‡ï¼‰éƒ½åŠ è½½å®Œæˆï¼Œè§¦å‘loadäº‹ä»¶ï¼› å®ƒæ˜¯åŸºäºŽDOM0çš„äº‹ä»¶ç»‘å®šæœºåˆ¶å®Œæˆçš„ï¼Œæ‰€ä»¥åœ¨åŒä¸€é¡µé¢ä¸­åªèƒ½ä¸ºä»–ç»‘å®šä¸€ä¸ªæ–¹æ³•ï¼Œç»‘å®šå¤šä¸ªï¼Œä»¥æœ€åŽä¸€ä¸ªä¸ºä¸»ï¼› å¦‚æžœæƒ³åœ¨ä¸€ä¸ªé¡µé¢ä¸­ä½¿ç”¨å¤šæ¬¡ï¼Œåº”è¯¥æ˜¯åŸºäºŽDOM2ç»‘å®šçš„ï¼› 123456function fn1()&#123;&#125; function fn1()&#123;&#125;window.addEventListener('load',fn1,false);window.addEventListener('load',fn2,false); $(function(){})æˆ–è€…$(document).ready(function(){});å½“æ–‡æ¡£ä¸­çš„DOMç»“æž„åŠ è½½å®Œæˆï¼Œå°±ä¼šè§¦å‘æ‰§è¡Œï¼Œåœ¨ä¸€ä¸ªé¡µé¢ä¸­å¯ä»¥ä½¿ç”¨å¤šæ¬¡ JQä¸­æä¾›çš„æ–¹æ³•ï¼ŒJQæ˜¯åŸºäºŽonDOMContentLoadedè¿™ä¸ªäº‹ä»¶å®Œæˆæ“ä½œçš„ JQä¸­çš„äº‹ä»¶ç»‘å®šéƒ½æ˜¯åŸºäºŽDOM2äº‹ä»¶ç»‘å®šçš„ onDOMContentLoadedåœ¨IE6-8ä¸‹attachEventä¹Ÿæ˜¯ä¸æ”¯æŒçš„ï¼ŒJQåœ¨IE6-8ä¸‹ä½¿ç”¨readystatechangeæ¥å®Œæˆ DOM2äº‹ä»¶çš„å…¼å®¹å¤„ç† è¯­æ³•ä¸Šçš„å…¼å®¹æ ‡å‡†ï¼š curEle.addEventListenerï¼ˆâ€™typeâ€™,fn,falseï¼‰;IE6-8: curEle.attachEventï¼ˆâ€™onâ€™+type,fnï¼‰; é¡ºåºé—®é¢˜æ ‡å‡†ï¼šæŒ‰ç…§ç»‘å®šçš„é¡ºåºä¾æ¬¡æ‰§è¡ŒIE6-8:å½“äº‹ä»¶è¡Œä¸ºè¢«è§¦å‘ï¼ŒIE6-8æ‰§è¡Œæ˜¯ä¹±åº é‡å¤é—®é¢˜æ ‡å‡†ï¼šå¯ä»¥è‡ªåŠ¨åŽ»é‡ï¼Œå·²ç»å­˜åœ¨çš„æ–¹æ³•ä¸å…è®¸å†æ¬¡æ·»åŠ IE6-8:åœ¨å‘äº‹ä»¶æ± ä¸­å¢žåŠ æ–¹æ³•æ—¶æ²¡æœ‰åŽ»é‡æœºåˆ¶ thisé—®é¢˜æ ‡å‡†ï¼šå½“äº‹ä»¶è¡Œä¸ºè¢«è§¦å‘ï¼Œæ–¹æ³•ä¸­çš„thisæŒ‡å‘å½“å‰å…ƒç´ æœ¬èº«IE6-8:å½“äº‹ä»¶è¡Œä¸ºè¢«è§¦å‘ï¼Œæ–¹æ³•ä¸­çš„thisæŒ‡å‘window IE6-8äº‹ä»¶æ± æœºåˆ¶vsæ ‡å‡†æµè§ˆå™¨äº‹ä»¶æ± æœºåˆ¶ï¼ˆæ¯”è¾ƒè§„èŒƒçš„å›žç­”ï¼‰ 1ã€å‘äº‹ä»¶æ± ä¸­æ·»åŠ æ–¹æ³•æ—¶ï¼Œæ ‡å‡†æµè§ˆå™¨æ˜¯ä½¿ç”¨addEventListener,IE6-8ä½¿ç”¨çš„æ˜¯attachEventï¼›è€Œä¸”æ ‡å‡†æµè§ˆå™¨æœ‰è‡ªåŠ¨åŽ»é‡çš„æœºåˆ¶ï¼Œå·²ç»æ·»åŠ çš„æ–¹æ³•ä¸å…è®¸å†æ¬¡æ·»åŠ ã€‚IE6-8æ²¡æœ‰åŽ»é‡æœºåˆ¶ï¼›2ã€æµè§ˆå™¨æ‰§è¡Œäº‹ä»¶æ± ä¸­çš„æ–¹æ³•æ—¶ï¼Œä¸ä»…æŠŠæ–¹æ³•æ‰§è¡Œï¼Œè¿˜æŠŠäº‹ä»¶å¯¹è±¡å½“ä½œå®žå‚ä¼ é€’ç»™ç»™å¯¹åº”çš„æ–¹æ³•ï¼Œä½†æ˜¯ä¹Ÿæ˜¯æœ‰åŒºåˆ«çš„ï¼ŒIE6-8ä¼ é€’çš„äº‹ä»¶å¯¹è±¡çš„å€¼å’Œwindow.eventæ˜¯ç›¸åŒ çš„ï¼Œå› æ­¤å­˜åœ¨å…¼å®¹é—®é¢˜ï¼›3.å½“äº‹ä»¶è¡Œä¸ºè¢«è§¦å‘ï¼Œæ ‡å‡†æµè§ˆå™¨æ˜¯ä¾æ¬¡æ‰§è¡Œï¼Œæ–¹æ³•ä¸­çš„thisæŒ‡å‘å½“å‰å…ƒç´ ï¼›IE6-8ä¸‹ï¼Œæ˜¯ä¹±åºæ‰§è¡Œï¼Œä¸”æ–¹æ³•ä¸­çš„thisæŒ‡å‘windowï¼› ä¸å…¼å®¹çš„æœ¬è´¨ï¼šIE6-8ä½Žç‰ˆæœ¬æµè§ˆå™¨å¯¹äºŽä»–çš„å†…ç½®äº‹ä»¶æ± å¤„ç†æœºåˆ¶çš„ä¸å®Œå–„å¯¼è‡´çš„ã€‚DOM2äº‹ä»¶ç»‘å®šå…¼å®¹å¤„ç†æœºåˆ¶åŽŸç†ï¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªç±»ä¼¼äºŽæ ‡å‡†æµè§ˆå™¨çš„è‡ªå®šä¹‰äº‹ä»¶æ± ï¼ˆé’ˆå¯¹IE6-8ï¼‰ on :æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶æ± ï¼ŒæŠŠéœ€è¦ç»‘å®šçš„æ–¹æ³•å…¨éƒ¨å­˜åœ¨è‡ªå®šä¹‰äº‹ä»¶æ± ä¸­ off: æŠŠä¸éœ€è¦ç»‘å®šçš„æ–¹æ³•ä»Žè‡ªå®šä¹‰äº‹ä»¶æ± ä¸­ç§»é™¤ runï¼šæŠŠrunæ”¾åœ¨å†…ç½®äº‹ä»¶æ± ä¸­ï¼Œå½“è¡Œä¸ºè§¦å‘ï¼Œéœ€è¦æµè§ˆå™¨æŠŠrunæ‰§è¡Œï¼Œåœ¨runä¸­æŠŠè‡ªå®šä¹‰äº‹ä»¶æ± çš„æ–¹æ³•æ‰§è¡Œã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980//å‘äº‹ä»¶æ± è¿½åŠ æ–¹æ³•var on = function (curEle, type, fn) &#123; //æ ‡å‡†æµè§ˆå™¨æ— éœ€å¤„ç† if (document.addEventListener) &#123; curEle.addEventListener(type, fn, false); return; &#125; //åˆ›å»ºè‡ªå®šä¹‰äº‹ä»¶æ± ï¼šåˆ›å»ºåˆ°å½“å‰å…ƒç´ çš„è‡ªå®šä¹‰å±žæ€§ä¸Šï¼Œä¸å—ä½œç”¨åŸŸé™åˆ¶ï¼Œä»¥åŽåœ¨å…¶ä»–æ–¹æ³•ä¸­éœ€è¦ä½¿ç”¨ï¼Œå¯ç›´æŽ¥èŽ·å–ï¼ˆä¸æ”¾åœ¨å…¨å±€æ˜¯é˜²æ­¢å…¨å±€æ±¡æŸ“ï¼‰ // æ¯ä¸€ä¸ªäº‹ä»¶éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„äº‹ä»¶æ±  if (typeof curEle[type + 'pond'] === 'undefined') &#123; curEle[type + 'pond'] = []; //åªè¦æ‰§è¡Œon,å°±è¯´æ˜Žå½“å‰æ–¹æ³•å·²è¢«ç»‘å®š //æŠŠrunæ”¾åˆ°å†…ç½®äº‹ä»¶æ± ä¸­ï¼› // curEle.attachEvent('on'+type,run);//éœ€è¦ä¿è¯runä¸­çš„ thisæ˜¯å½“å‰å…ƒç´  curEle.attachEvent('on' + type, function () &#123; run.call(curEle, e);//å°†runæ”¾åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­ï¼Œå¼ºåˆ¶æ”¹å˜this &#125;); &#125; var aryPond = curEle[type + 'pond']; // åŽ»é‡æ“ä½œï¼Œå½“å‰äº‹ä»¶æ± ä¸­æ˜¯å¦æœ‰å½“å‰äº‹ä»¶ for (var i = 0; i &lt; ary.length; i++) &#123; if (aryPond[i] === fn) &#123; return; &#125; &#125; aryPond.push(fn);&#125;;//ç§»é™¤äº‹ä»¶æ± çš„æŸä¸ªæ–¹æ³•var off = function (curEle, type, fn) &#123; if (document.removeEventListener) &#123; curEle.removeEventListener(type, fn, false); return; &#125; var aryPond = curEle[type + 'pond']; if (!aryPond) return; for (var i = 0; i &lt; ary.length; i++) &#123; if (aryPond[i] === fn) &#123; // aryPond.splice(i,1);æ­¤æ–¹æ³•ä¼šå¯¼è‡´åŽŸå§‹æ•°ç»„ç´¢å¼•æ”¹å˜ï¼Œæ­¤æ—¶æ­£åœ¨æ‰§è¡Œçš„runå¾ªçŽ¯ï¼Œç´¢å¼•å’Œæƒ³è¦çš„ç´¢å¼•ä¸ä¸€è‡´ï¼Œæ•°ç»„å¡Œé™· //æˆ‘ä»¬ä¸èƒ½è®©å½“å‰æ•°ç»„çš„ç´¢å¼•æ”¹å˜ï¼› aryPond[i] = null;//ç½®ç©ºï¼Œç´¢å¼•æ²¡å˜ &#125; &#125;&#125;;//æŠŠè‡ªå®šä¹‰äº‹ä»¶æ± ä¸­çš„æ–¹æ³•ä¾æ¬¡æ‰§è¡Œvar run = function (e) &#123; // this=&gt;curEle //e:window.eventï¼Œä¸å…¼å®¹ï¼Œéœ€è¦å¤„ç† if (typeof e.target === 'undefined') &#123; e.target = e.srcElement; e.which = e.keyCode; e.pageX = e.clientX + document.documentElement.scrollLeft || document.body.scrollLeft; e.stopPropagation = e.cancelBubble = true; e.preventDefault = e.returnValue = false; &#125; var aryPond = curEle[type + 'pond']; if (!aryPond) return; for (var i = 0; i &lt; aryPond.length; i++) &#123; var itemFn = aryPond[i]; // itemFn();=&gt;è¿™æ ·æ‰§è¡ŒitemFné‡Œçš„thisæ—¶windowï¼Œé¡»å°†ä»–æ›¿æ¢æˆå‡½æ•°é‡Œçš„this if (itemFn === null) &#123; //å½“å‰è¿™ä¸€é¡¹åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå¯ä»¥å°†offä¸­ç½®ç©ºçš„é‚£ä¸€é¡¹åˆ é™¤ aryPond.slice(i, 1); i--; continue; &#125; itemFn.call(this, e); &#125;&#125;; Bindæ–¹æ³•çš„å°è£…123456789101112131415161718//ES5å°è£… BIND Function.prototype.myBind = function myBind(context) &#123; //this=&gt;å½“å‰éœ€è¦å¤„ç†çš„å‡½æ•° //context=&gt;æˆ‘ä»¬éœ€è¦é¢„å…ˆæ”¹å˜çš„thiså€¼ï¼ˆå¦‚æžœä¸ä¼ ï¼Œé»˜è®¤windowï¼‰ï¼› //arguments=&gt;å­˜å‚¨åŒ…å«contextåœ¨å†…çš„æ‰€æœ‰å®žå‚ï¼› context = context || window; var outerArg = Array.prototype.slice.call(arguments, 1); var _this = this; if('bind' in this)&#123;//å¦‚æžœä¸æ˜¯IE6-8ï¼Œç›´æŽ¥è¿”å›ž return _this.bind.apply(_this,arguments) ; &#125; return function () &#123; var innerArg = Array.prototype.slice.call(arguments); outerArg = outerArg.contact(innerArg); _this.apply(context, outerArg); &#125; &#125; 123456789//ES6æ–¹æ³• Function.prototype.myBind = function myBind(context = window, ...outer) &#123; //ä½¿ç”¨ES6ä¸­çš„å‰©ä½™è¿ç®—ç¬¦ if ('bind' in this) &#123; return this.bind(arguments); &#125; return function (...inner) &#123; this.apply(context, outer.concat(inner)); &#125; &#125;;]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€ï¼ˆä¹ï¼‰å®šæ—¶å™¨]]></title>
    <url>%2Fposts%2Fdb9fe196.html</url>
    <content type="text"><![CDATA[JSä¸­çš„å®šæ—¶å™¨&amp;&amp;åŠ¨ç”»&amp;&amp;åŒæ­¥å¼‚æ­¥ç¼–ç¨‹å®šæ—¶å™¨è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨å¹¶è®¾å®šä¸€ä¸ªç­‰å¾…æ—¶é—´ï¼Œå½“åˆ°è¾¾æ—¶é—´ï¼Œæ‰§è¡ŒæŒ‡å®šè¦å®Œæˆçš„äº‹æƒ…ï¼›JSä¸­çš„å®šæ—¶å™¨ä¸€å…±æœ‰ä¸¤ç§ï¼š window.setTimeoutï¼ˆæ‰§è¡Œä¸€æ¬¡ï¼‰ window.setTimeout(function,[interval]):è®¾ç½®äº†ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“åˆ°è¾¾æŒ‡å®šæ—¶é—´åŽæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼ˆæ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨å°±ç»“æŸäº†ï¼‰ï¼›ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ—¶é—´ï¼Œaå•ä½éƒ½æ˜¯æ¯«ç§’ï¼Œè‡ªå·±ä¸éœ€è¦åŠ å•ä½ï¼Œ17æ˜¯ä¸ªæ¯”è¾ƒç†æƒ³çš„æ—¶é—´ï¼‰ 123window.setTimeout(function()&#123;console.log('ok');//100msåŽè¾“å‡ºä¸€æ¬¡ â€˜ok'ï¼Œæ­¤æ—¶å®šæ—¶å™¨ç»“æŸï¼Œä½†æ˜¯å®šæ—¶å™¨å¹¶æ²¡æœ‰è¢«æ¸…é™¤ï¼›&#125;,100);//å®šæ—¶å™¨ç­‰å¾…æ—¶é—´è®¾ç½®ä¸º0ä¹Ÿä¸æ˜¯ç«‹é©¬æ‰§è¡Œï¼Œæµè§ˆå™¨ä¹Ÿæœ‰ä¸€ä¸ªæœ€å°ååº”æ—¶é—´ï¼ˆ13MS-14msï¼‰ï¼Œ [interval]ï¼šæ—¶é—´å› å­ï¼Œéœ€è¦ç­‰å¾…çš„æ—¶é—´ window.setIntervalï¼ˆæ‰§è¡Œå¤šæ¬¡ï¼‰ window.setInterval(function,[interval])ï¼šè®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“è¾¾åˆ°æŒ‡å®šæ—¶é—´åŽæ‰§è¡Œå¯¹åº”çš„æ–¹æ³•ï¼ˆä»¥åŽæ¯éš”è¿™ä¹ˆé•¿æ—¶é—´å°±é‡æ–°æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼Œç›´åˆ°å®šæ—¶å™¨æ¸…é™¤ä¸ºæ­¢ï¼Œæ‰§è¡Œå¾ˆå¤šæ¬¡ï¼‰ 1234var n=0ï¼›window.setInterval(function()&#123;console.log(n++);//æ¯éš”100msè¾“å‡ºä¸€æ¬¡ ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ã€‚ã€‚ã€‚ã€‚&#125;,100);//å®šæ—¶å™¨ç­‰å¾…æ—¶é—´è®¾ç½®ä¸º0ä¹Ÿä¸æ˜¯ç«‹é©¬æ‰§è¡Œï¼Œæµè§ˆå™¨ä¹Ÿæœ‰ä¸€ä¸ªæœ€å°ååº”æ—¶é—´ï¼ˆ13MS-14msï¼‰ï¼Œ å®šæ—¶å™¨çš„è¿”å›žå€¼å®šæ—¶å™¨çš„è¿”å›žå€¼ï¼Œä¸ç®¡æ˜¯setTimeoutè¿˜æ˜¯setIntervaléƒ½ä¼šæœ‰ä¸€ä¸ªæ•°å­—ç±»åž‹çš„è¿”å›žå€¼ï¼Œä»£è¡¨å½“å‰æ˜¯åœ¨æµè§ˆå™¨ä¸­è®¾ç½®çš„ç¬¬å‡ ä¸ªå®šæ—¶å™¨ï¼ˆè¿”å›žçš„æ˜¯å®šæ—¶å™¨çš„åºå·ï¼‰ setTimeoutå’ŒsetIntervalè™½ç„¶æ˜¯å¤„ç†ä¸åŒéœ€æ±‚çš„å®šæ—¶å™¨ï¼Œä½†æ˜¯éƒ½æ˜¯æµè§ˆå™¨çš„å®šæ—¶å™¨ï¼Œæ‰€ä»¥è®¾ç½®çš„æ—¶å€™ï¼Œè¿”å›žçš„åºå·æ˜¯ä¾æ¬¡æŽ’åºsetIntervalï¼šè®¾ç½®å®Œæˆæ—¶å®šæ—¶å™¨ä¼šæœ‰ä¸€ä¸ªè¿”å›žå€¼ï¼Œä¸ç®¡æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œè¿™ä¸ªä»£è¡¨åºå·çš„çš„è¿”å›žå€¼ä¸å˜ï¼ˆè®¾ç½®å®šæ—¶å™¨å°±ä¼šæœ‰è¿”å›žå€¼ï¼Œæ‰§è¡Œå¤šå°‘æ¬¡æ˜¯å®šæ—¶å™¨çš„å¤„ç† å®šæ—¶å™¨çš„æ¸…é™¤å®šæ—¶å™¨éƒ½éœ€è¦æ‰‹åŠ¨æ¸…é™¤ï¼Œä¸‹é¢ä¸¤ä¸ªæ¸…é™¤çš„æ–¹æ³•æ²¡æœ‰åŒºåˆ« clearTimeout([å®šæ—¶å™¨æŽ’é˜Ÿçš„åºå·])clearItervalï¼ˆ[å®šæ—¶å™¨çš„æŽ’é˜Ÿåºå·]ï¼‰ å½“æ–¹æ³•æ‰§è¡Œå®ŒæˆåŽï¼Œæˆ‘ä»¬æ¸…é™¤å®šæ—¶å™¨å³å¯ eg: clearTimeout(1) ï¼Œè¿™ç›¸å½“äºŽåœ¨æµè§ˆå™¨ä¸­å°†ç¬¬ä¸€ä¸ªå®šæ—¶å™¨æ¸…é™¤äº†ã€‚åŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦å°†ä¹‹å‰å­˜å‚¨åºå·çš„å˜é‡èµ‹å€¼ä¸ºnullï¼Œä¾‹å¦‚t1=nullï¼Œä¼˜åŒ–JSçš„å†…å­˜ç©ºé—´ 1234567891011var timer1=setInterval(function()&#123; &#125;,192);//timer1=1ï¼Œæ˜¯è¯¥å®šæ—¶å™¨çš„è¿”å›žå€¼ï¼ˆå³è¯¥å®šæ—¶å™¨åºå·ï¼‰var n=0ï¼›var timer2=setTimeout(function()&#123; n++;console.log(n); if(n&gt;=10)&#123; clearSetInterval(timer2);//æ‰‹åŠ¨æ¸…é™¤ &#125;&#125;,192);//timer2=2ï¼Œæ˜¯è¯¥å®šæ—¶å™¨çš„è¿”å›žå€¼ å®šæ—¶å™¨çš„åŽŸç† å½“æˆ‘ä»¬åœ¨JSä¸­åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨åŽï¼Œæµè§ˆå™¨ä¼šæŠŠè®¡æ—¶æ‰§è¡Œæ–¹æ³•çš„è¿™ä¸ªä»»åŠ¡æ”¾åœ¨æµè§ˆå™¨çš„ç­‰å¾…ä»»åŠ¡é˜Ÿåˆ—ï¼ˆç­‰å¾…ä»»åŠ¡æ± ï¼‰ä¸­ï¼Œå¹¶ä¸”å®‰æŽ’ä¸€ä¸ªç›‘æŽ§è€…ï¼ˆå±žäºŽæµè§ˆå™¨å¼€è¾Ÿçš„æ–°çº¿ç¨‹ï¼‰ï¼Œä¹Ÿå°±æ˜¯è®°å½•å½“å‰å·²ç»èµ°çš„æ—¶é—´ï¼Œåˆ°è¾¾æ—¶é—´åŽï¼Œç›‘æŽ§è€…ä¼šé€šçŸ¥æµè§ˆå™¨æ—¶é—´åˆ°äº†ï¼Œæµè§ˆå™¨ï¼ˆåœ¨æŠŠä¸»ä»»åŠ¡é˜Ÿåˆ—çš„å†…å®¹æ‰§è¡Œå®ŒåŽï¼‰ä¼šæŠŠä¹‹å‰æ”¾åœ¨ç­‰å¾…ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ–¹æ³•æ‹¿å‡ºæ¥æ‰§è¡Œï¼› JSä¸­åŠ¨ç”»å®žçŽ°çš„åŽŸç† æµè§ˆå™¨å®žçŽ°åŠ¨ç”»æœ‰ä¸‰ç§å¸¸ç”¨å‘æ–¹æ³•CSSåŠ¨ç”»åœ¨CSS3ä¸­æä¾›äº†transtationåŠ¨ç”»å’ŒanimationåŠ¨ç”»ä¸¤ç§åŠ¨ç”»ï¼Œä¼˜åŠ¿åœ¨äºŽæ€§èƒ½å¥½ï¼Œå®žçŽ°ç®€å•ï¼Œï¼ˆä¸€èˆ¬èƒ½ç”¨csså†™çš„ç»ä¸ç”¨å…¶ä»–æ–¹å¼ï¼‰ï¼Œå¼Šç«¯åœ¨äºŽä¸å…¼å®¹IEæˆ–å…¶ä»–ä½Žç‰ˆæœ¬æµè§ˆå™¨ï¼ˆç§»åŠ¨ç«¯çš„åŠ¨ç”»ä¸€èˆ¬éƒ½æ˜¯åŸºäºŽcssæ¥å®Œæˆçš„ï¼‰JSä¸­çš„åŠ¨ç”»åœ¨JSä¸­å®žçŽ°åŠ¨ç”»å¸¸ç”¨çš„æœ‰ï¼š=&gt;ä½¿ç”¨å®šæ—¶å™¨é©±åŠ¨çš„åŠ¨ç”»=&gt;ä½¿ç”¨requestAnimationFrameæ¥å®ŒæˆåŠ¨ç”»è€Œæ‰€è°“çš„CANVASåŠ¨ç”»åŸºæœ¬ä¸Šä¹Ÿæ˜¯åŸºäºŽç«™ä¸¤ç§æ–¹å¼å®Œæˆçš„ï¼ˆCANVASæœ¬èº«æ˜¯ç»˜å›¾ï¼‰FLASHåŠ¨ç”»æ—©æœŸå®žçŽ°åŠ¨ç”»çš„æ–¹æ³•ï¼ŒçŽ°åœ¨ä¸€äº›ç®€å•çš„DOMåŠ¨ç”»éƒ½å‘Šåˆ«äº†FLASHæ—¶ä»£ åŸºäºŽå®šæ—¶å™¨çš„åŠ¨ç”» åŸºäºŽå®šæ—¶å™¨å®žçŽ°çš„åŠ¨ç”»çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆ- å›ºå®šæ­¥é•¿çš„åŠ¨ç”»- å›ºå®šæ—¶é—´çš„åŠ¨ç”»ï¼ˆæ¯”è¾ƒå¸¸ç”¨ï¼‰æˆ‘ä»¬æœ€å¥½å°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œæ”¯æŒå›ºå®šæ—¶é—´çš„å¤šæ–¹å‘çš„åŒ€é€Ÿæˆ–é£žåŒ€é€Ÿè¿åŠ¨ å¦‚ä½•å®žçŽ°å¤šæ–¹å‘åŒ€é€Ÿ å›žè°ƒå‡½æ•°(callBack) æŠŠä¸€ä¸ªå‡½æ•°å½“åšå®žå‚ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å¦å¤–ä¸€ä¸ªå‡½æ•°ä¸­æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè¿™ç§å¤„ç†æœºåˆ¶å«åšå›žè°ƒå‡½æ•° 1234567function fn(callBack) &#123; //=&gt;callBack:ä¼ é€’è¿›æ¥çš„åŒ¿åå‡½æ•° callBack();&#125;fn(function () &#123; console.log('ok');&#125;); å‡¡æ˜¯åœ¨å½“å‰æ–¹æ³•æ‰§è¡Œçš„æŸä¸ªé˜¶æ®µï¼Œæ‰§è¡Œä¸€ä¸ªä¸ç¡®å®šçš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä»¶äº‹æƒ…å½“åšå‚æ•° JSä¸­çš„åŒæ­¥ç¼–ç¨‹å’Œå¼‚æ­¥ç¼–ç¨‹ JSæ˜¯å•çº¿ç¨‹çš„ï¼ˆä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œå½“å‰ä»»åŠ¡æ²¡æœ‰å®Œæˆï¼Œä¸‹é¢çš„ä»»åŠ¡æ˜¯ä¸è¿›è¡Œå¤„ç†çš„ï¼‰åŒæ­¥ç¼–ç¨‹ï¼ˆsyncï¼‰ï¼šå½“å‰ä»»åŠ¡æ˜¯æŒ‰ç…§é¡ºåºä¸€ä»¶ä»¶å®Œæˆçš„ï¼Œå½“å‰ä»»åŠ¡æ²¡æœ‰å®Œæˆï¼Œä¸‹é¢çš„ä»»åŠ¡ä¸è¿›è¡Œå¤„ç†å¼‚æ­¥ç¼–ç¨‹ï¼ˆasyncï¼‰ï¼šå½“å‰ä»»åŠ¡åœ¨ç­‰å¾…æ‰§è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸åŽ»æ‰§è¡Œï¼Œç»§ç»­å®Œæˆä¸‹é¢çš„ä»»åŠ¡ï¼Œå½“ä¸‹é¢çš„ä»»åŠ¡å®ŒæˆåŽï¼Œä¹Ÿåˆ°è¾¾çš„ç­‰å¾…çš„æ—¶é—´äº†ï¼Œæ‰åŽ»å®Œæˆå½“å‰çš„ä»»åŠ¡ å®šæ—¶å™¨éƒ½æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„ æ‰€æœ‰çš„äº‹ä»¶ç»‘å®šä¹Ÿæ˜¯å¼‚æ­¥çš„ AJAXä¸­æœ‰å¼‚æ­¥ç¼–ç¨‹ æœ‰äº›äººæŠŠå›žè°ƒå‡½æ•°å½“åšå¼‚æ­¥ç¼–ç¨‹å…¶ä½™éƒ½æ˜¯åŒæ­¥ç¼–ç¨‹ 1234567var startTime=new Date();//èŽ·å–å¼€å§‹çš„æ—¶é—´ for (var i = 0; i &lt; 1000; i++) &#123;if(1===99)&#123; console.log(i);&#125;&#125;console.log(new date -startTime);//è®¡ç®—å®Œæˆå¾ªçŽ¯çš„æ—¶é—´ åœ¨é¡¹ç›®ä¸­ï¼Œè¦é¿å…å‡ºçŽ°æ­»å¾ªçŽ¯ï¼Œå› ä¸ºå¾ªçŽ¯æ—¶åŒæ­¥ç¼–ç¨‹ï¼Œå½“å‰å¾ªçŽ¯æ— æ³•ç»“æŸè¯æ˜Žä»»åŠ¡æ²¡æœ‰å®Œæˆï¼ŒåŽç»­ä»»åŠ¡æ— æ³•è¿›è¡Œ 12345678var n = 0;//ç¬¬ä¸€ä»¶ä»»åŠ¡ï¼šåˆ›å»ºä¸€ä¸ªå˜é‡ // ç¬¬äºŒä»¶ä»»åŠ¡ï¼šåˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼ˆç­‰å¾…ä»»åŠ¡ï¼Œ1000MSæ‰§è¡Œæ–¹æ³•æ˜¯ä¸€ä¸ªç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼‰ setTimeout(function () &#123; n++ï¼› console.log(n);//å†è¾“å‡ºn=1 &#125;, 1000);//ç¬¬ä¸‰ä»¶ä»»åŠ¡ï¼šè¾“å‡º0console.log(n); //é¦–å…ˆè¾“å‡ºn=0; åŒæ­¥å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒåŽŸç† JSä¸­æœ‰ä¸¤ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼ˆå­˜æ”¾ä»»åŠ¡åˆ—è¡¨çš„ç©ºé—´ï¼‰ 1ã€ä¸»ä»»åŠ¡é˜Ÿåˆ—ï¼šåŒæ­¥æ‰§è¡Œä»»åŠ¡ï¼ˆä»Žä¸Šåˆ°ä¸‹ä¾æ¬¡æ‰§è¡Œï¼‰2ã€ç­‰å¾…ä»»åŠ¡é˜Ÿåˆ—ï¼šå¼‚æ­¥æ‰§è¡Œä»»åŠ¡]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€ï¼ˆå…«ï¼‰ç›’å­æ¨¡åž‹]]></title>
    <url>%2Fposts%2Fba5b0d45.html</url>
    <content type="text"><![CDATA[JSä¸­DOMç›’å­æ¨¡åž‹æ·±å…¥åˆ†æžCSSç›’å­æ¨¡åž‹ä¼ ç»Ÿç›’å­æ¨¡åž‹width height:ä¸æ˜¯ç›’å­çš„å®½é«˜ï¼Œè€Œæ˜¯ç›’å­ä¸­çš„å†…å®¹ ç›’å­çš„å®½åº¦=width+border2+padding2//åœ¨ä¸€ä¸ªå¯¹ç§°çš„æ¨¡åž‹ä¸­ CSS3æ–°å¢žåŠ çš„ç›’å­æ¨¡åž‹å¢žåŠ è¯¥å±žæ€§ï¼Œwidthå’Œheightçš„æ•°å€¼å°±æ˜¯ç›’å­çš„å®½é«˜ï¼› 1box-sizing:border-box; JSç›’å­æ¨¡åž‹ æä¾›ä¸€äº›å±žæ€§å’Œæ–¹æ³•ç”¨æ¥æè¿°ç›’å­çš„æ ·å¼çš„ clientclientWidth / clientHeight å½“å‰ç›’å­å¯è§†åŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦å¯è§†åŒºåŸŸï¼šå†…å®¹çš„å®½é«˜+padding*2clientHeight=height+padding(top&amp;&amp;bottom)clientWidth=height+padding(left&amp;&amp;right)å’Œå†…å®¹æ˜¯å¦æº¢å‡ºå’Œæˆ‘ä»¬æ˜¯å¦è®¾ç½®äº†overflow:hiddenæ²¡æœ‰å…³ç³» 1document.documentElement.clientWidth||document.body.clientHight //èŽ·å–å½“å‰é¡µé¢ä¸€å±å¹•çš„å®½åº¦ åœ¨ä¸çŸ¥ç›’å­å®½é«˜çš„æƒ…å†µä¸‹ï¼Œè®©ç›’å­å±…ä¸­ 123456var winH=document.documentElement.clientHeight||document.body.clientHeight;var winW=document.documentElement.clientWigth||document.body.clientWigth;var boxW=box.clientWidth;var boxH=box.clientHeight;box.style.left=(winW-boxW)/2+'px';box.style.top=(winH-boxH)/2+'px'; clientTop å’Œ clientLeft åªæœ‰topå’Œleftï¼Œæ²¡æœ‰å…¶ä»–çš„clientTopï¼šç›’å­ä¸Šè¾¹æ¡†çš„é«˜åº¦clientLeftï¼šç›’å­å·¦è¾¹æ¡†çš„å®½åº¦é€šè¿‡JSç›’å­æ¨¡åž‹èŽ·å–çš„ç»“æžœæ˜¯ä¸å¸¦å•ä½çš„ï¼Œè€Œä¸”åªèƒ½æ˜¯æ•´æ•°ï¼Œï¼ˆä»–ä¼šè‡ªåŠ¨å››èˆäº”å…¥ï¼‰ offsetoffsetWidth å’Œ offsetHeight åœ¨clientHeightå’ŒclientWidthçš„åŸºç¡€ä¸ŠåŠ ä¸Šäº†è¾¹æ¡†çš„é•¿åº¦ï¼›offsetWidth=clientWidth+å·¦å³è¾¹æ¡†(border)offsetHight=clienthight+ä¸Šä¸‹è¾¹æ¡†çœŸå®žé¡¹ç›®ä¸­ï¼Œå¦‚æžœæƒ³è¦å¾—åˆ°ç›’å­çš„å®½åº¦å’Œé«˜åº¦ä¸€èˆ¬éƒ½ç”¨offsetWidthå’ŒoffsetHeightï¼Œè¿™æ ·å°±åŒ…å«äº†ç›’å­çš„è¾¹æ¡† 123456var winH=document.documentElement.offsetHeight||document.bodyElement.offsetHeight;var winW=document.documentElement.offsetWigth||document.bodyElement.offsetclientWigth;var boxW=box.offsetWidth;var boxH=box.offsetHeight;box.style.left=(winW-boxW)/2+'px';box.style.top=(winH-boxH)/2+'px'; offssetParent å½“å‰å’Œç›’å­çš„çˆ¶çº§å‚ç…§ç‰©ï¼ˆå¾—åˆ°çˆ¶çº§å‚ç…§ç‰©å…ƒç´ ï¼‰ çˆ¶çº§å‚ç…§ç‰©ä¸ç­‰ä»·äºŽçˆ¶çº§å…ƒç´ ï¼Œä¸Žçˆ¶çº§å…ƒç´ æ²¡æœ‰ç›´æŽ¥å…³ç³»çˆ¶çº§å‚ç…§ç‰©ï¼šåŒä¸€å¹³é¢ä¸­æœ€å¤–å±‚å®¹å™¨æ˜¯æ‰€æœ‰é‡Œå±‚ç›’å­çš„çˆ¶çº§å‚ç…§ç‰©ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªé¡µé¢æ‰€æœ‰å…ƒç´ çš„çˆ¶çº§å‚ç…§ç‰©éƒ½æ˜¯bodyï¼Œbodyæ²¡æœ‰çˆ¶çº§å‚ç…§ç‰©ï¼› å½“æˆ‘ä»¬ç»™å…ƒç´ è®¾ç½®å®šä½ï¼ˆä¼šè®©å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼‰çš„æ—¶å€™ï¼Œä¼šæ”¹å˜çˆ¶çº§å‚ç…§ç‰©ï¼ˆä¸åœ¨ä¸€ä¸ªå¹³é¢ä¸Šï¼‰ offsetTop&amp;offsetLeft:å½“å‰å…ƒç´ å¤–è¾¹æ¡†è·ç¦»çˆ¶çº§å‚ç…§ç‰©çš„å†…è¾¹æ¡†çš„åç§»é‡ï¼ˆæ ‡å‡†IE8æµè§ˆå™¨ç‰¹æ®Šæ€§ï¼š å½“å‰å…ƒç´ æœ€å¤–è¾¹æ¡†è·ç¦»çˆ¶çº§å‚ç…§ç‰©çš„å¤–è¾¹æ¡†çš„åç§»é‡Œé‡ ï¼‰window.navigator.userAgent èŽ·å–æµè§ˆå™¨çš„ç‰ˆæœ¬å· èŽ·å–é¡µé¢ä¸­ä»»ä½•ä¸€ä¸ªå…ƒç´ è·ç¦»bodyçš„å·¦åç§»å’Œä¸Šåç§»ï¼Œä¸çŸ¥é“è¯¥å…ƒç´ çš„å…·ä½“ä½ç½®ã€‚æ€è·¯ï¼š é¦–å…ˆèŽ·å–è‡ªå·±çš„åç§»é‡åŠçˆ¶çº§å‚ç…§ç‰©å¦‚æžœçˆ¶çº§å‚ç…§ç‰©ä¸æ˜¯bodyï¼Œæˆ‘ä»¬åŠ ä¸Šçˆ¶çº§å‚ç…§ç‰©çš„è¾¹æ¡†å’Œåç§»é‡ã€‚ã€‚ã€‚ä¸€ç›´åŠ åˆ°çˆ¶çº§å‚ç…§ç‰©ä¸ºbodyçš„å…ƒç´ ä¸ºæ­¢ scrollscrollHeight &amp;&amp; scrollWidth æ²¡æœ‰å†…å®¹æº¢å‡ºï¼šèŽ·å–çš„ç»“æžœå’ŒclientWidthã€clientHeightçš„ç»“æžœç›¸åŒï¼›æœ‰å†…å®¹æº¢å‡ºï¼šçœŸå®žå†…å®¹çš„å®½åº¦æˆ–é«˜åº¦ï¼ŒåŒ…å«æº¢å‡ºå†…å®¹çš„å€¼ï¼Œå†åŠ ä¸Špaddingæˆ–å·¦paddingçš„å€¼scrollWidth&amp;&amp;scrollHeightèŽ·å–çš„æ˜¯çº¦ç­‰äºŽçš„å€¼ç”±äºŽå†…å®¹æº¢å‡ºï¼Œæ¯ä¸ªæµè§ˆå™¨å¯¹äºŽè¡Œé«˜æˆ–æ–‡å­—çš„æ¸²æŸ“ä¸ä¸€æ ·ï¼Œå›žåŽ»çš„ç»“æžœä¹Ÿä¸ä¸€æ ·æ˜¯å¦è®¾ç½®overflowï¼šhiddenå¯¹æœ€åŽçš„ç»“æžœä¹Ÿæœ‰å½±å“ èŽ·å–å½“å‰é¡µé¢çš„çœŸå®žé«˜åº¦ï¼ˆåŒ…å«æº¢å‡ºï¼‰ 1document.documentElement.scrollWidth||document.body.scrollHight scrollLeft &amp;&amp; scrollTop æ¨ªå‘æˆ–ç«–å‘æ»šåŠ¨æ¡å·åŽ»çš„å®½åº¦æˆ–é«˜åº¦(åœ¨æ‹‰åŠ¨æ»šåŠ¨æ¡æ—¶ï¼Œä¸Šé¢çš„å†…å®¹ä¼šè¢«å·åŽ»ï¼Œå°±æ˜¯scrollTop) æœ€å°å€¼ï¼š0 æœ€å¤§å€¼ï¼šscrollHight-clientHight:çœŸå®žé¡µé¢é«˜åº¦-ä¸€å±å¹•çš„é«˜åº¦ å‰é¢çš„JSç›’å­æ¨¡åž‹çš„å±žæ€§éƒ½æ˜¯åªè¯»å±žæ€§ï¼Œåªèƒ½èŽ·å–ï¼Œä¸èƒ½ä¿®æ”¹ï¼›è€ŒscrollTop&amp;&amp;scrollLeftæ˜¯å¯è¯»å†™å±žæ€§ï¼Œæ—¢å¯ä»¥èŽ·å–ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ï¼› window.onscrollwindow.onscroll:æµè§ˆå™¨æ»šåŠ¨æ¡æ»šåŠ¨äº‹ä»¶ï¼ˆåªè¦æ»šåŠ¨å°±ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼‰ * 1ã€é¼ æ ‡æ»šè½®æŽ§åˆ¶ æˆ–è€… æ‰‹åŠ¨æ‹–åŠ¨æ»šåŠ¨æ¡ * 2ã€é”®ç›˜æŒ‰é”®æŽ§åˆ¶ * 3ã€ä½¿ç”¨JSä»£ç æŽ§åˆ¶ * â€¦ * ä¸ç®¡ä»€ä¹ˆæ–¹å¼,åªè¦æ»šåŠ¨æ¡åŠ¨äº†å°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ åœ¨JSä¸­èŽ·å–å…ƒç´ çš„å…·ä½“çš„æ ·å¼å€¼ é€šè¿‡JSç›’å­æ¨¡åž‹12ä¸ªå±žæ€§ï¼ˆä¸åŒ…å«offsetParentï¼‰èŽ·å–çš„ç»“æžœéƒ½æ˜¯æ•´æ•°ï¼Œæ²¡æœ‰å•ä½ï¼Œå¦‚æžœæœ‰å°æ•°ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å››èˆäº”å…¥é€šè¿‡JSç›’å­æ¨¡åž‹ å±žæ€§èŽ·å¾—çš„å€¼éƒ½æ˜¯ç»„åˆå€¼ï¼Œä¸èƒ½å•ç‹¬èŽ·å–æŸä¸€ä¸ªå…·ä½“æ ·å¼å€¼ curEle.style.xxx; èŽ·å–å½“å‰å…ƒç´ æ‰€æœ‰å†™åœ¨è¡Œå†…æ ·å¼ä¸Šçš„æ ·å¼å€¼(å¦‚æžœæ ·å¼æ²¡æœ‰è®¾ç½®åœ¨è¡Œå†…å…ƒç´ ä¸Š å¾—åˆ°ç©ºå­—ç¬¦ä¸²)ç‰¹æ®Šï¼šåªæœ‰æŠŠæ ·å¼å†™åœ¨è¡Œå†…æ ·å¼ä¸Šï¼Œæ‰å¯ä»¥é€šè¿‡è¿™ç§æ–¹æ³•èŽ·å–åˆ°=ã€‹è¿™ç§æ–¹æ³•åœ¨çœŸå®žé¡¹ç›®ä¸­æ¯”è¾ƒå°‘è§ï¼Œå› ä¸ºæˆ‘ä»¬å¾ˆå°‘åœ¨è¡Œå†…æ ·å¼ä¸Šå†™æ ·å¼ window.getComputedStyle &amp;&amp; curEle.currentStyle åªè¦å½“å‰å…ƒç´ åœ¨é¡µé¢ä¸­æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥èŽ·å¾—å…¶æ ·å¼å€¼ï¼ˆä¸ç®¡æ˜¯è¡Œå†…è¿˜æ˜¯æ ·å¼è¡¨ï¼‰ï¼Œä¹Ÿå°±æ˜¯èŽ·å–æ‰€æœ‰ç»è¿‡æµè§ˆå™¨è®¡ç®—è¿‡çš„å€¼ï¼ŒåŒ…æ‹¬ä½ æ²¡æœ‰å†™æµè§ˆå™¨é»˜è®¤è®¾ç½®çš„å€¼ã€‚window.getComputedStyle:é€‚ç”¨äºŽæ ‡å‡†æµè§ˆå™¨ï¼ŒIE6-8ä¸å…¼å®¹ï¼Œåœ¨IE6-8çš„Windowå…¨å±€å¯¹è±¡ä¸­ï¼Œæ²¡æœ‰æä¾›getComputedStyleè¿™ä¸ªå±žæ€§å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬ä½¿ç”¨curEle.currentStyleæ¥èŽ·å–éœ€è¦çš„æ ·å¼å€¼ //é€šè¿‡getComputedStyleèŽ·å¾—çš„ç»“æžœæ˜¯ä¸€ä¸ªå¯¹è±¡,åŒ…å«å½“å‰å…ƒç´ æ‰€æœ‰çš„æ ·å¼å±žæ€§å’Œå±žæ€§å€¼ è¯­æ³•ï¼šwindow.getComputedStyle([å½“å‰éœ€è¦æ“ä½œçš„å…ƒç´ ],[å½“å‰å…ƒç´ çš„ä¼ªç±»ï¼Œä¸€èˆ¬å†™null])window.getComputedStyle(box,null).paddingleft; //é€šè¿‡ curEle.currentStyleæ¥èŽ·å–æ ·å¼box.currentStyle.paddingleft; å°è£…ä¸€ä¸ªå…¬å…±çš„æ–¹æ³•ï¼šgetCss 1234567891011121314151617//getCSSï¼šèŽ·å–å½“å‰å…ƒç´ æŸä¸€ä¸ªæ ·å¼çš„å±žæ€§å€¼//@parameter curEle:å½“å‰éœ€è¦æ“ä½œçš„å…ƒç´ //attr:è¦èŽ·å–æ ·å¼çš„å±žæ€§åfunction getCss(curEle,attr)&#123;var value=null;var reg=null;try&#123;value=window.getComputedStyle(cueEle,null)[attr];&#125;catch(e)&#123;value=curEle.currentStyle&#125;reg=/^-?\d+(\.\d+)?(px|pt|em|rem)?$/i;//åŽ»é™¤å•ä½reg.test(value)?value=parseFloat(value):null;return value;&#125;console.log(getCss(box,'display')); æ–¹æ³•äºŒï¼š 1234567891011121314function getCss(curEle, attr) &#123;var value = null,reg = null;if ('getComputedStyle' in window) &#123;value = window.getComputedStyle(curEle, null)[attr];&#125; else &#123;value = curEle.currentStyle[attr];&#125;//=&gt;åŽ»é™¤å•ä½reg = /^-?\d+(\.\d+)?(px|pt|rem|em)?$/i;reg.test(value) ? value = parseFloat(value) : null;return value;&#125;console.log(getCss(box, 'display')); è®¾ç½®å…ƒç´ çš„æ ·å¼ curEle.style.xx=xxx;è®¾ç½®å½“å‰å…ƒç´ çš„è¡Œå†…æ ·å¼ï¼›ï¼ˆJSè®¾ç½®æ ·å¼ä¸€èˆ¬éƒ½è®¾ç½®åœ¨è¡Œå†…æ ·å¼ä¸Šï¼Œå› ä¸ºè¡Œå†…æ ·å¼ä¼˜å…ˆçº§æœ€å¤§ï¼‰ï¼ˆJSæ“ä½œå±žæ€§ä¸æ”¯æŒ-ï¼Œæ‰€æœ‰-æ”¹æˆä¸‹ä¸€ä¸ªå•è¯å¤§å†™ï¼‰curEle.className=xxx;è®¾ç½®å…ƒç´ çš„æ ·å¼ç±»åï¼› 1234567891011121314151617181920curEle['style'][attr]=value;//ä¼ é€’valueå€¼ï¼Œå¦‚æžœæ²¡æœ‰å•ä½ï¼Œéœ€è¦è¡¥å•ä½//å¹¶ä¸æ˜¯æ‰€æœ‰çš„å€¼éƒ½éœ€è¦è¡¥å•ä½ï¼Œ//ä¼ é€’çš„å€¼å¸¦å•ä½ï¼Œä¸éœ€è¦ä¸å•ä½ if(attr==='opacity')&#123;curEle.style.opacity=value;curEle.style.filter='alpha(opacity='+value*100%');&#125; !isNaN(value)&amp;&amp;!/^(zoom|lineHeight|zIndex|fontWeight)$/i.test(value)?value+='px':null;curEle['style'][attr]=value;&#125;setCss(box,'padding','20px');å°†3ä¸ªæ–¹æ³•å°è£…åœ¨ä¸€ä¸ªé‡Œé¢var css = function () &#123;var len = arguments.length,type = Object.prototype.toString.call(arguments[1]),fn = getCss;len &gt;= 3 ? fn = setCss : (len === 2 &amp;&amp; type === '[object Object]' ? fn = setGroupCss : null);return fn.apply(this, arguments);&#125;; children ä¸ç®¡åœ¨ä»€ä¹ˆæµè§ˆå™¨ä¸­ï¼Œéƒ½å¯ä»¥èŽ·å¾—å½“å‰å…ƒç´ çš„å­èŠ‚ç‚¹,ï¼ˆå…ƒç´ èŠ‚ç‚¹ï¼‰ä½†åœ¨IE6-8ä¸‹ï¼Œä¹Ÿä¼šå°†æ³¨é‡ŠèŠ‚ç‚¹èŽ·å–åˆ°ï¼Œå› æ­¤æœ‰æ‰€å·®åˆ« 123function children(curEle)&#123;&#125; ç¼–ç¨‹å¸¸ç”¨æ–¹æ³•ï¼šå‡è®¾æ³• æŽ’é™¤æ³• JSä¸­çš„åŠ¨ç”» 1ã€æ­¥é•¿å¿å›ºå®šï¼Œå®Œæˆæ—¶é—´ä¸å›ºå®š2ã€å›ºå®šæ—¶é—´åŠ¨ç”» 12345678910111213141516171819function linear(t, b, c, d) &#123;return t / d * c + b;&#125;var oBox = document.getElementById('box');var time = 0,//å·²ç»è¿åŠ¨çš„æ—¶é—´duration = 1000,//æ€»æ—¶é—´begin = utils.css(oBox, 'left'),//å·¦è¾¹è·target = utils.winBox('clientWidth') - oBox.offsetWidth,//ç›®çš„åœ°change = target - begin;//æ€»å…±éœ€è¦èµ°çš„è·ç¦»var timer = setInterval(function () &#123;time += 17;if (time &gt;= duration) &#123;utils.css(oBox, 'left', target);clearInterval(timer);return;&#125;var curL = linear(time, begin, change, duration);utils.css(oBox, 'left', curL);&#125;, 17); å›¾ç‰‡æ‡’åŠ è½½åŽŸç†ï¼š1ã€IMGæ ‡ç­¾çš„SRCä¸å­˜æ”¾å›¾ç‰‡çš„åœ°å€(å¦‚æžœå­˜æ”¾çœŸå®žçš„åœ°å€,é¡µé¢ä¸€åŠ è½½å›¾ç‰‡è‚¯å®šå°±åŠ è½½å‡ºæ¥äº†),æˆ‘ä»¬æŠŠçœŸå®žå›¾ç‰‡çš„åœ°å€å­˜å‚¨åœ¨å½“å‰IMGæ ‡ç­¾çš„è‡ªå®šä¹‰å±žæ€§ä¸Š(DATA-IMG)2ã€ä¸ºäº†ä¿è¯å½“å‰å›¾ç‰‡æ²¡æœ‰çœŸå®žåœ°å€çš„æ—¶å€™,æµè§ˆå™¨ä¸­ä¸ä¼šå‡ºçŽ°å‰å‰æˆ–è€…å‡ºçŽ°ALTä¸­çš„å†…å®¹,æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šæŠŠå›¾ç‰‡å…ˆéšè—(display:none opacity:0â€¦)ï¼Œç­‰åˆ°åŽæœŸæŠŠçœŸå®žå›¾ç‰‡åŠ è½½å‡ºæ¥ï¼Œåœ¨è®©å½“å‰å›¾ç‰‡å±•ç¤º3ã€çœ‹ä¸åˆ°çœŸå®žå›¾ç‰‡äº†ï¼Œæˆ‘ä»¬æœ€å¥½ç»™ä¸€ä¸ªå ä½å›¾ç‰‡ï¼ˆå ä½å›¾ï¼šè¦æ±‚ä¸€å®šè¦å¾ˆå°,æœ€å¥½æ˜¯1KBï¼‰ï¼šæˆ‘ä»¬åœ¨IMGå¤–é¢åŒ…ä¸€å±‚DIVç›’å­,æŠŠå ä½å›¾èµ‹å€¼ç»™å½“å‰ç›’å­çš„èƒŒæ™¯å›¾ç‰‡æ¥å¤„ç† =&gt;å¼€å§‹IMGä¸æ˜¾ç¤º,å±•ç¤ºçš„æ˜¯é»˜è®¤çš„èƒŒæ™¯å›¾,å½“IMGçœŸå®žåœ°å€åŠ è½½å®ŒæˆåŽ,æˆ‘ä»¬è®©IMGæ˜¾ç¤º,æ­¤æ—¶çœŸå®žå›¾ç‰‡ä¼šè¦†ç›–ä½èƒŒæ™¯å›¾]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€çŸ¥è¯†ï¼ˆä¸ƒï¼‰æ­£åˆ™]]></title>
    <url>%2Fposts%2Feda90d92.html</url>
    <content type="text"><![CDATA[æ­£åˆ™æ­£åˆ™çš„åŸºç¡€çŸ¥è¯†ä»€ä¹ˆæ˜¯æ­£åˆ™ï¼Ÿ æ­£åˆ™å°±æ˜¯ä¸€ä¸ªè§„åˆ™ï¼Œç”¨æ¥å¤„ç†å­—ç¬¦ä¸²çš„è§„åˆ™1ã€æ­£åˆ™åŒ¹é… ç¼–å†™ä¸€ä¸ªè§„åˆ™ï¼ŒéªŒè¯æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…è¿™ä¸ªè§„åˆ™ï¼Œç”¨testæ–¹æ³• 2ã€æ­£åˆ™æ•èŽ· ç¼–å†™ä¸€ä¸ªè§„åˆ™ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ï¼ŒæŠŠç¬¦åˆè§„åˆ™çš„å†…å®¹éƒ½èŽ·å–åˆ°ï¼Œä½¿ç”¨æ–¹æ³•ï¼šæ­£åˆ™çš„execæ–¹æ³•ã€å­—ç¬¦ä¸²ä¸­çš„splitã€replaceã€matchç­‰æ–¹æ³•éƒ½æ”¯æŒæ­£åˆ™ var reg=/^$/;//ä¸¤ä¸ªæ–œæ ä¹‹é—´åŒ…å«çš„å†…å®¹å°±æ˜¯æ­£åˆ™ï¼Œä¸¤ä¸ªæ–œæ ä¹‹é—´çš„å…¨éƒ¨å†…å®¹éƒ½æ˜¯å…ƒå­—ç¬¦ æ­£åˆ™çš„å…ƒå­—ç¬¦å’Œä¿®é¥°ç¬¦ ä»»ä½•ä¸€ä¸ªæ­£åˆ™éƒ½æ˜¯ç”±å…ƒå­—ç¬¦å’Œä¿®é¥°ç¬¦ç»„æˆçš„ ä¿®é¥°ç¬¦ g(global):å…¨å±€åŒ¹é… i(ignore):å¿½ç•¥å¤§å°å†™åŒ¹é… m(mutiline)ï¼šå¤šè¡ŒåŒ¹é… å…ƒå­—ç¬¦[é‡è¯å…ƒå­—ç¬¦] +ï¼šè®©å‰é¢çš„å…ƒå­—ç¬¦å‡ºçŽ°1åˆ°å¤šæ¬¡ ï¼Ÿï¼šå‡ºçŽ°0åˆ°1æ¬¡ *ï¼šå‡ºçŽ°0åˆ°å¤šæ¬¡ {n}:å‡ºçŽ°næ¬¡ {n,}:å‡ºçŽ°nåˆ°å¤šæ¬¡ {n,m}:å‡ºçŽ°nåˆ°mæ¬¡ [ç‰¹æ®Šæ„ä¹‰çš„å…ƒå­—ç¬¦]-\ ï¼šè½¬ä¹‰å­—ç¬¦-.ï¼šé™¤äº†\nï¼ˆæ¢è¡Œç¬¦ï¼‰ä»¥å¤–çš„ä»»æ„å­—ç¬¦-\dï¼šåŒ¹é…ä¸€ä¸ª0-9çš„ä»»æ„å­—ç¬¦ \D ï¼šåŒ¹é…ä¸€ä¸ªéž0-9çš„ä»»æ„å­—ç¬¦ \w ï¼šåŒ¹é…ä¸€ä¸ª[0-9a-zA-Z_]ä¹‹é—´çš„ä»»æ„å­—ç¬¦ \s ï¼šåŒ¹é…ä¸€ä¸ªä»»æ„ç©ºç™½ç¬¦ \b ï¼šåŒ¹é…ä¸€ä¸ªè¾¹ç•Œç¬¦(å•è¯çš„å·¦å³ï¼Œ-çš„å·¦å³ä¸¤è¾¹) x|yï¼šåŒ¹é…ä¸¤è€…ä¸­çš„å…¶ä¸­ä¸€ä¸ª [a-z] ï¼šåŒ¹é…a-zä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ [^a-z] ï¼šåŒ¹é…éža-zä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ [xyz] ï¼šåŒ¹é…xyzä¸­çš„å…¶ä¸­ä¸€ä¸ª [^xyz]ï¼šåŒ¹é…é™¤äº†xyzä»¥å¤–çš„ä»»æ„å­—ç¬¦ ()ï¼šæ­£åˆ™å°åˆ†ç»„ ^ï¼šä»¥æŸä¸€ä¸ªå…ƒå­—ç¬¦å¼€å§‹ $ ï¼šä»¥æŸä¸€ä¸ªå…ƒå­—ç¬¦ç»“æŸ ï¼Ÿï¼š åªåŒ¹é…ä¸æ•èŽ· ï¼Ÿ=ï¼šæ­£å‘é¢„æŸ¥ ï¼Ÿï¼ ï¼šè´Ÿå‘é¢„æŸ¥ 1234var reg=/^\d$/; //è¯´æ˜Žä»¥æ•°å­—å¼€å¤´ï¼Œä»¥æ•°å­—ç»“å°¾ ï¼Œä¸”åªåŒ…å«ä¸€ä¸ªæ•°å­— var reg=/^2.3$/;//.ä»£è¡¨é™¤äº†\nä»¥å¤–çš„ä»»æ„å­—ç¬¦ reg.test(2.3); true 12345678var reg=/^18|19$/;// x|yçš„æƒ…å†µ// 18æˆ–19// ä»¥1å¼€å¤´ä»¥9ç»“å°¾ï¼Œä¸­é—´æ˜¯8æˆ–1// ä»¥18å¼€å¤´æˆ–ä»¥19ç»“å°¾//var reg=/^ï¼ˆ18|19ï¼‰$/;//18æˆ–19 //ï¼ˆï¼‰æ­£åˆ™é‡Œçš„åˆ†ç»„ï¼Œå¤§æ­£åˆ™é‡Œçš„å°åˆ†ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ”¹å˜é»˜è®¤çš„ä¼˜å…ˆçº§//æ­¤æ—¶åªæœ‰18æˆ–è€…19ç¬¦åˆè§„åˆ™ ï¼ˆï¼‰ ï¼ˆï¼‰æ­£åˆ™é‡Œçš„åˆ†ç»„ï¼Œå¤§æ­£åˆ™é‡Œçš„å°åˆ†ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒå˜é»˜è®¤çš„ä¼˜å…ˆçº§ å°åˆ†ç»„è¿˜æœ‰ç¬¬äºŒä¸ªä½œç”¨ï¼šåˆ†ç»„å¼•ç”¨ å°åˆ†ç»„ç¬¬ä¸‰ä¸ªä½œç”¨ï¼š åˆ†ç»„æ•èŽ· åˆ†ç»„å¼•ç”¨ï¼š\1 è¡¨ç¤ºå‡ºçŽ°å’Œç¬¬1ä¸ªåˆ†ç»„ä¸€æ¨¡ä¸€æ ·çš„å­—ç¬¦ 1var reg=/^([a-z])([a-z])\2(a-z)$/;// ç±»ä¼¼äºŽfood week feel oppoç­‰éƒ½ç¬¦åˆè¯¥æ­£åˆ™ [ ] [xyz] [^xyz] [^a-z]var reg=/^[a-zA-Z0-9_]$/;//ç­‰åŒäºŽ\w[ ]ä¸­å‡ºçŽ°çš„å…ƒå­—ç¬¦ï¼Œä¸€èˆ¬éƒ½ä»£è¡¨æœ¬èº«çš„å«ä¹‰var reg=/^[.?+]$/é‡Œé¢çš„.ä»£è¡¨.æœ¬èº«//éœ€æ±‚ç±»çš„å‘½åè§„åˆ™ï¼šæ•°å­—å­—æ¯ä¸‹åˆ’çº¿ _ï¼Œï¼ˆ-ä¸èƒ½ä½œä¸ºå¼€å¤´ï¼‰var reg=/^\w[\w-]*$///ä¸è¦è®©-å‡ºçŽ°åœ¨ä¸­é—´å°±å¯ä»£è¡¨å…¶æœ¬èº«çš„å«ä¹‰ï¼Œå‡ºçŽ°åœ¨ä¸­é—´è¡¨ç¤ºèŒƒå›´é“¾æŽ¥ç¬¦ var reg=/^[18-65]$/ä»£è¡¨çš„æ„æ€ï¼š1æˆ–86æˆ–5ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ ï¼Œä¸­æ‹¬å·å‡ºçŽ°çš„18ä¸ä»£è¡¨æ•°å­—18è€Œæ˜¯1æˆ–è€…8ï¼Œå½“å‰æ­£åˆ™éžæ³•18-65å²ä»½ä¸‰é˜¶æ®µ1819 (18|19)2059([2-5]\d)6065(6[0-5]) éªŒè¯æ˜¯å¦ä¸ºæœ‰æ•ˆæ•°å­— å¯èƒ½æ­£æ•°ï¼Œå¯èƒ½æ˜¯è´Ÿæ•°æ•´æ•°æˆ–å°æ•°åªè¦å‡ºçŽ°å°æ•°ç‚¹ï¼ŒåŽé¢è‡³å°‘å‡ºçŽ°ä¸€ä½å°æ•°ç‚¹å‰å¿…é¡»æœ‰æ•°å­—var reg=/^-?(\d|([1-9]\d+)(\.\d+)?$/ ç”µè¯å·ç  1var reg=/^1\d&#123;10&#125;$/ ä¸­æ–‡å§“å 123 /^[\u4E00-\u9FA5]$/ :ä¸­æ–‡æ±‰å­—çš„æ­£åˆ™var reg = /^[\u4E00-\u9FA5]&#123;2,10&#125;(Â·[\u4E00-\u9FA5]&#123;2,10&#125;)?$/;å°¼å¤æ‹‰æ–¯Â·çŽ‹æ­¦ é‚®ç®± 1234567891011reg=/^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/åˆ†æžéœ€æ±‚ï¼š * ä»¥æ•°å­—å­—æ¯ä¸‹åˆ’çº¿å¼€å¤´ * @å‰é¢å¯ä»¥æ˜¯ æ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ã€-ã€. è¿™äº›ç¬¦å· * ä¸èƒ½æŠŠ -å’Œ. è¿žç»­å‡ºçŽ°ï¼Œå‡ºçŽ°ä¸€æ¬¡åŽé¢å¿…é¡»è·Ÿæ•°å­—å­—æ¯ä¸‹åˆ’çº¿ * * @åŽé¢çš„éƒ¨åˆ†æ”¯æŒ * ä¼ä¸šé‚®ç®±* .com.cn å¤šåŸŸåæƒ…å†µ *///è¿™æ ·å†™ä¸ä»…å¯ä»¥åŒ¹é…ï¼Œè€Œä¸”ä»¥åŽæ•èŽ·çš„æ—¶å€™ï¼Œä¸ä»…å¯ä»¥æŠŠå¤§æ­£åˆ™åŒ¹é…çš„ç»“æžœæ•èŽ·åˆ°ï¼Œé‡Œé¢çš„æ¯ä¸€ä¸ªå°åˆ†ç»„ä¹Ÿå¯ä»¥åˆ†åˆ«æ•èŽ·åˆ°"åˆ†ç»„æ•èŽ·" èº«ä»½è¯å· 1var reg=/^(\d&#123;6&#125;)(\d&#123;4&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d&#123;2&#125;)(\d)(X|\d)$/ æ­£åˆ™æ•èŽ· æŠŠå½“å‰å­—ç¬¦ä¸²ä¸­çš„ç¬¦åˆè§„åˆ™çš„å­—ç¬¦æ•èŽ·åˆ°RegExp.prototype.execå®žçŽ°æ­£åˆ™æ•èŽ·çš„æ–¹æ³•å½“æˆ‘ä»¬æ‰§è¡Œreg.exec(str)çš„æ—¶å€™ï¼Œ 1ã€å…ˆåŽ»éªŒè¯å½“å‰å­—ç¬¦ä¸²å’Œæ­£åˆ™æ˜¯å¦åŒ¹é…ï¼Œå¦‚æžœä¸åŒ¹é…åˆ™è¿”å›žç»“æžœnullï¼› 2ã€å¦‚æžœåŒ¹é…ï¼Œä»Žå­—ç¬¦ä¸²æœ€å·¦è¾¹å¼€å§‹ï¼Œå‘å³æŸ¥æ‰¾åŒ¹é…å†…å®¹ï¼Œå¹¶æŠŠåŒ¹é…å†…å®¹è¿”å›ž execæ•èŽ·åˆ°çš„ç»“æžœçš„æ ¼å¼ï¼šèŽ·å–çš„æ˜¯ä¸€ä¸ªæ•°ç»„æ•°ç»„ä¸­çš„ç¬¬ä¸€é¡¹æ˜¯å½“å‰æœ¬æ¬¡å¤§æ­£åˆ™åŒ¹é…çš„ç»“æžœindex:è®°å½•äº†æœ¬æ¬¡æ•èŽ·åˆ°ç»“æžœçš„èµ·å§‹çš„ç´¢å¼•inputï¼šå½“å‰æ­£åˆ™æ“ä½œçš„åŽŸå§‹å­—ç¬¦ä¸²å¦‚æžœå½“å‰æ­£åˆ™å½“ä¸­æœ‰åˆ†ç»„ï¼ŒèŽ·å–çš„æ•°ç»„ä¸­ï¼Œä»Žç¬¬äºŒé¡¹å¼€å§‹ï¼Œéƒ½æ˜¯æ¯ä¸ªå°åˆ†ç»„æ‰§è¡Œä¸€æ¬¡execåªèƒ½æŠŠç¬¦åˆæ­£åˆ™è§„åˆ™çš„ä¸€ä¸ªå†…å®¹æ•æ‰åˆ°ï¼Œè‹¥æžœè¿˜æœ‰å…¶ä»–ç¬¦åˆè§„åˆ™çš„ï¼Œ éœ€è¦å†æ¬¡æ‰§è¡Œexecæ‰æœ‰å¯èƒ½æ•èŽ·åˆ°ï¼› æ­£åˆ™æ•èŽ·çš„æ‡’æƒ°æ€§æ­£åˆ™ä¸ºä»€ä¹ˆä¼šå­˜åœ¨æ‡’æƒ°æ€§ æ­£åˆ™æœ¬èº«æœ‰ä¸€ä¸ªå±žæ€§ï¼šlastIndexï¼ˆä¸‹ä¸€æ¬¡æ­£åˆ™åœ¨å­—ç¬¦ä¸²åŒ¹é…æŸ¥æ‰¾æ—¶çš„å¼€å§‹ç´¢å¼•ï¼‰é»˜è®¤å€¼ï¼š0ï¼Œä»Žå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æŸ¥æ‰¾åŒ¹é…çš„å†…å®¹é»˜è®¤ä¸ç®¡æ‰§è¡Œå¤šå°‘æ¬¡execï¼Œæ­£åˆ™çš„lastIndexå€¼éƒ½ä¸ä¼šå˜ï¼Œä¹Ÿå°±æ˜¯è¿˜æ˜¯ä»Žç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æŸ¥æ‰¾å¹¶ä¸”å½“æˆ‘ä»¬æ‰‹åŠ¨æ”¹å˜last Indexçš„å€¼æ—¶ï¼Œä¸ä¼šèµ·ä»»ä½•ä½œç”¨ç”±æ­¤å¯¼è‡´ï¼šæ‰§è¡Œä¸€æ¬¡execæ•èŽ·åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆè§„å®šçš„å†…å®¹ï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œexecï¼Œæ•èŽ·åˆ°çš„ä¾ç„¶æ˜¯ç¬¬ä¸€ä¸ªåŒ¹é…å†…å®¹ï¼ŒåŽé¢çš„æ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡éƒ½æ•èŽ·ä¸åˆ° è§£å†³æ­£åˆ™çš„æ‡’æƒ°æ€§ åœ¨æ­£åˆ™çš„æœ«å°¾åŠ ä¿®é¥°ç¬¦g(å…¨å±€åŒ¹é…)åŠ äº†ä¿®é¥°ç¬¦gï¼Œæ¯æ¬¡execç»“æŸåŽï¼Œæµè§ˆå™¨ä¼šé»˜è®¤æŠŠlastIndexçš„å€¼è¿›è¡Œä¿®æ”¹ï¼Œä¸‹ä¸€æ¬¡ä»Žä¸Šä¸€æ¬¡ç»“æŸçš„ä½ç½®å¼€å§‹æŸ¥æ‰¾ï¼Œæ‰€ä»¥å¯ä»¥å¾—åˆ°åŽé¢åŒ¹é…çš„å†…å®¹äº† 1var reg=/\d+/g;//å¼€å¯å…¨å±€åŒ¹é… execæœ‰è‡ªå·±çš„å±€é™æ€§ï¼Œæ‰§è¡Œä¸€æ¬¡execåªèƒ½æ•èŽ·åˆ°ä¸€ä¸ªç»“æžœï¼Œå¦‚æžœæƒ³è¦å…¨éƒ¨æ•èŽ·åˆ°ï¼Œå°±è¦æ‰§è¡Œå¤šæ¬¡ï¼Œä¸‹é¢å°è£…çš„myExecAllæ–¹æ³•ï¼Œå¯ä»¥å°†æ­£åˆ™åŒ¹é…çš„å…¨éƒ¨å†…å®¹æ•èŽ·åˆ° 12345678910111213141516RegExp.prototype.myExecAll=function()&#123;//this æ˜¯å½“å‰éœ€è¦å¤„ç†çš„æ­£åˆ™//stræ˜¯å½“å‰éœ€è¦å¤„ç†çš„å­—ç¬¦ä¸²var str=agruments[0]||'';var result=[];//é¦–å…ˆåˆ¤æ–­æ˜¯å¦åŠ äº†å…¨å±€ä¿®é¥°ç¬¦Gï¼Œå¦‚æžœæ²¡æœ‰åŠ ï¼Œæˆ‘ä»¬ç›´æŽ¥å°†ç¬¬ä¸€æ¬¡çš„ç»“æžœè¿”å›žå³å¯if(!this.global)&#123; return this.exec(str);&#125;var ary=this.exec(str);while (ary)&#123;//(ç­‰åŒäºŽary!==null:å¯ä»¥æ•èŽ·åˆ°å†…å®¹ï¼Œæˆ‘ä»¬ç»§ç»­ä¸‹ä¸€æ¬¡æ•èŽ· result.push(ary[0]);//ç¬¬ä¸€é¡¹ä¸ºåŒ¹é…åˆ°çš„ç»“æžœ ary=this.exec(str);//ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¬¡æ•èŽ·&#125;return result;&#125;ï¼› ä½¿ç”¨å­—ç¬¦ä¸²ä¸­çš„matchå®žçŽ°æ•èŽ· ä½¿ç”¨å­—ç¬¦ä¸²matchæ•èŽ·ï¼Œ å¦‚æžœæ­£åˆ™åŠ äº†g,ä¼šæ•èŽ·åˆ°æ‰€æœ‰åŒ¹é…ç»“æžœ å¦‚æžœä¸åŠ g,åˆ™åªä¼šæ•èŽ·åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ç»“æžœ matchçš„å±€é™æ€§ åœ¨åŠ äº†ä¿®é¥°ç¬¦gçš„æƒ…å†µä¸‹ï¼ŒÂ·æ‰§è¡Œmatchåªä¼šæŠŠå¤§æ­£åˆ™åŒ¹é…çš„ç»“æžœæ•èŽ·åˆ°ï¼Œå¯¹äºŽå°åˆ†ç»„é‡Œçš„åŒ¹é…ç»“æžœä¼šè‡ªåŠ¨å¿½ç•¥Â· ä½¿ç”¨testå®žçŽ°æ•èŽ·ä¸ç®¡æ˜¯æ­£åˆ™çš„åŒ¹é…è¿˜æ˜¯æ•èŽ·ï¼Œåœ¨å¤„ç†çš„æ—¶å€™æ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œä»Žå­—ç¬¦ä¸²é‡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æŸ¥æ‰¾ç¬¦åˆè§„åˆ™çš„å­—ç¬¦ï¼Œå¦‚æžœå¯ä»¥æ‰¾åˆ°ï¼Œåˆ™è¿”å›žtrueï¼Œexecæ•èŽ·è¿”å›žæ•èŽ·çš„å†…å®¹ï¼Œå¦‚æžœæ²¡æœ‰æ‰¾åˆ°ï¼Œtestè¿”å›žfalseï¼Œexecæ•èŽ·è¿”å›žnull å¦‚æžœæ­£åˆ™è®¾ç½®äº†ä¿®é¥°ç¬¦gï¼Œä¸ç®¡æ˜¯ä½¿ç”¨testè¿˜æ˜¯execçš„ä»»ä½•æ–¹æ³•ï¼Œéƒ½ä¼šæ”¹å˜lastIndexå€¼ï¼Œï¼ˆä¸‹ä¸€æ¬¡æŸ¥æ‰¾æ˜¯åŸºäºŽä¸Šä¸€æ¬¡åŒ¹é…ç»“æžœå‘åŽæŸ¥æ‰¾çš„ï¼‰ 12345var str='my name is &#123;0&#125;~~';svar reg=/\&#123;(\d+)\&#125;/g;if(reg.test(str))&#123;//-&gt;lastIndex=0console.log(reg.exec(str));//-&gt;null lastIndexå€¼è¢«ä¿®æ”¹ï¼Œå‘åŽæŸ¥æ‰¾ï¼Œæ— åŒ¹é…&#125; testä¸ä»…å¯ä»¥æ‰¾åˆ°åŒ¹é…çš„å†…å®¹ï¼Œä¹Ÿè‚¯èƒ½å°†åŒ¹é…çš„å†…å®¹èŽ·å– 1console.log(RegExp.$1);//èŽ·å–å½“å‰åŒ¹é…å†…å®¹çš„ç¬¬1ä¸ªå°åˆ†ç»„; æ‰€æœ‰æ”¯æŒæ­£åˆ™çš„æ–¹æ³•ï¼Œéƒ½å¯ä»¥å®žçŽ°å­—ç¬¦ä¸²çš„æ•èŽ·ï¼ˆä¸€èˆ¬éƒ½æ˜¯å­—ç¬¦ä¸²æ–¹æ³•ï¼‰ å­—ç¬¦ä¸²ä¸­å¸¸è§çš„æ”¯æŒæ­£åˆ™çš„æ–¹æ³• match ***split *var str=â€™name=â€ç å³°â€&amp;age=8â€™;str.split(/(&amp;|=)/); //ä½¿ç”¨splitè¿›è¡Œå­—ç¬¦ä¸²è¿›è¡Œæ‹†åˆ†çš„æ—¶å€™ï¼Œå¦‚æžœæ­£åˆ™åŒ…å«å°åˆ†ç»„ï¼Œä¼šæŠŠå°åˆ†ç»„çš„å†…å®¹æ•èŽ·åˆ°ï¼Œæ”¾åœ¨æœ€åŽçš„æ•°ç»„ä¸­//æœ¬æ¡ˆä¾‹()åªæ˜¯ä¸ºäº†æ”¹å˜ä¼˜å…ˆçº§ï¼Œä½†æˆ‘ä»¬åªæƒ³åŒ¹é…ä¸æƒ³æ•èŽ·åˆ†ç»„é‡Œçš„å†…å®¹ï¼Œ?:å¯ä»¥è§£å†³str.split(/?:(&amp;|=)/);// è¿™æ ·æµè§ˆå™¨å°±ä¸ä¼šæŠŠå°åˆ†ç»„çš„å†…å®¹æ•èŽ·åˆ°ï¼›è¦è®¡ç®—æ˜¯ç¬¬å‡ ä¸ªåˆ†ç»„ï¼Œä»Žå·¦åˆ°å³æ•°( =&gt;åŠæ‹¬å·å³å¯**replace å­—ç¬¦ä¸²ä¸­åŽŸæœ‰å­—ç¬¦çš„æ›¿æ¢str.replace(old,new) 123var str='ç å³°2011ç å³°1021';str=str.replace('ç å³°','ç å³°åŸ¹è®­');str.replace(/ç å³°/g,'ç å³°åŸ¹è®­'); åœ¨ä¸ä½¿ç”¨æ­£åˆ™çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œä¸€æ¬¡replaceåªèƒ½æ›¿æ¢ä¸€ä¸ªåŽŸæœ‰å­—ç¬¦ï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œreplaceï¼Œä¾æ—§æ˜¯ä»Žç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æŸ¥æ‰¾ï¼Œç±»ä¼¼äºŽæ­£åˆ™çš„æ‡’æƒ°æ€§ å·¥ä½œä¸­ï¼Œreplaceéƒ½æ˜¯å’Œæ­£åˆ™ä¸€èµ·æ­é…ä½¿ç”¨replaceåŽŸç†ï¼š å½“replaceæ–¹æ³•æ‰§è¡Œï¼Œç¬¬ä¸€é¡¹ä¼ é€’ä¸€ä¸ªæ­£åˆ™ æ­£åˆ™ä¸åŠ g,æŠŠå½“å‰ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å’Œæ­£åˆ™åŒ¹é…çš„å†…å®¹æ•èŽ·åˆ°ï¼Œæ›¿æ¢æˆæ–°å­—ç¬¦ æ­£åˆ™åŠ g,æŠŠå½“å‰æ‰€æœ‰å’Œæ­£åˆ™åŒ¹é…çš„å†…å®¹éƒ½æ•èŽ·åˆ°ï¼Œå¹¶æ›¿æ¢æˆæ–°å­—ç¬¦ å½“replaceæ‰§è¡Œï¼Œç¬¬äºŒæ¬¡å‚æ•°ä¼ é€’çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå›žè°ƒå‡½æ•°ï¼‰ é¦–å…ˆç”¨æ­£åˆ™åœ¨å­—ç¬¦ä¸²ä¸­è¿›è¡ŒåŒ¹é…ï¼ŒåŒ¹é…åˆ°ä¸€ä¸ªç¬¦åˆè§„åˆ™çš„ï¼Œå°±æŠŠä¼ é€’çš„å‡½æ•°æ‰§è¡Œä¸€æ¬¡ ä¸ä»…æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œè¿˜æŠŠæ­£åˆ™æœ¬æ¬¡æ•èŽ·çš„ç»“æžœï¼ˆåŒæ‰§è¡Œexecæ•èŽ·çš„ç»“æžœ,åŒ…å«å°åˆ†ç»„ï¼‰å½“åšå®žå‚ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ï¼ˆè¿™æ ·å°±å¯ä»¥åœ¨å‡½æ•°ä¸­èŽ·å¾—è¿™äº›å€¼ï¼Œè¿™äº›å€¼å°±æ˜¯æ­£åˆ™æ¯ä¸€æ¬¡æ•èŽ·çš„ç»“æžœï¼‰ æ­£åˆ™æ•èŽ·æ–¹æ³•ç»Ÿè®¡ æ–¹æ³•å ä¸åŠ g åŠ g exec æ‡’æƒ°æ€§ï¼Œåªèƒ½åˆ°æ•èŽ·ç¬¬ä¸€ä¸ªåŒ¹é…å€¼åŒ…æ‹¬å°åˆ†ç»„ å¤šæ¬¡æ•èŽ·å¯å¾—æ‰€æœ‰åŒ¹é…å­—ç¬¦ï¼ŒåŒ…æ‹¬å°åˆ†ç»„ match æ‡’æƒ°æ€§ åŒä¸Š ä¸€æ¬¡æ•èŽ·åˆ°æ‰€æœ‰åŒ¹é…å­—ç¬¦ï¼Œä½†ä¸èƒ½åŒ¹é…åˆ°å°åˆ†ç»„ test æ‡’æƒ°æ€§åŒä¸Š å¤šæ¬¡æ•èŽ·å¯å¾—å…¨éƒ¨å†…å®¹ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡testï¼Œå°±console.log(RegExp.$1)ï¼Œå¯å¾—å½“å‰åŒ¹é…å­—ç¬¦ replace æ‡’æƒ°æ€§ï¼Œåªæ›¿æ¢ä¸€ä¸ª å…¨éƒ¨æ›¿æ¢ æ­£åˆ™æ¡ˆä¾‹=&gt;å•è¯é¦–å­—æ¯å¤§å†™ 12345678910var str='my name is zhu-feng-pei-xun,i am 8 years old,i am qian duan pei xun no1!';//å…ˆæŠŠæ··æ·†è¾¹ç•Œç¬¦çš„-æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ str=str.replace(/-/g,_);//é€šè¿‡è¾¹ç•Œç¬¦åŒ¹é…åˆ°æ¯ä¸ªå•è¯str=str.replace(/\b(\w)(\w*)\b/g,function()&#123; console.log(agruments); return agruments[1].toUpperCase()+agruments[2];&#125;)str=str.replace(/_/g,-); 12var str='2017-11-07 16:30';//æ”¹å†™æˆ2017å¹´11æœˆ07æ—¥16æ—¶30åˆ†//replace æ¨¡æ¿åŒ¹é…ï¼ˆï¼‰ 1234567891011var template='&#123;0&#125;å¹´&#123;1&#125;æœˆ&#123;2&#125;æ—¥ &#123;3&#125;æ—¶&#123;4&#125;åˆ†&#123;5&#125;ç§’';var reg=/\d+/g;var ary=str.match(reg)var str='2017-11-07 16:30';//å…ˆå°†strçš„æœ‰æ•ˆæ•°å­—åŒ¹é…å‡ºæ¥ï¼Œå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼ˆmatchï¼‰//å…¶æ¬¡ å°†templateä¸­çš„&#123;0&#125;ä¸Žä¹‹æ•°ç»„å¯¹åº”ç´¢å¼•æ›¿æ¢ï¼ˆ/\&#123;(\d)\&#125;ï¼‰;var template=template.replace(ï¼ˆ/\&#123;(\d)\&#125;ï¼‰,function()&#123; var index=arguments[1];//æœ‰å¤šå°‘ä¸ªåŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå‡½æ•°å°±ä¼šè¢«æ‰§è¡Œå¤šå°‘æ¬¡ï¼Œè¿™æ˜¯æ¯æ¬¡åŒ¹é…çš„å°åˆ†ç»„ï¼Œå³0/1/2... var value=ary[index];//å°†æ•°ç»„ä¸­å¯¹åº”ç´¢å¼•çš„å€¼æ‹¿å‡ºæ¥ return value;&#125;) æ­£åˆ™åˆ›å»ºæ–¹å¼å­—é¢é‡æ–¹å¼ 1var reg=/\d+/img; æž„é€ å‡½æ•°åˆ›å»º 123new RegExp('å…ƒå­—ç¬¦'ï¼Œ'ä¿®é¥°ç¬¦') var reg= new RegExp('\\d+'ï¼Œ'g');//å°†ä¸€ä¸ª\æ¢æˆ\\æ‰æ˜¯è½¬ä¹‰å­—ç¬¦çš„æ„æ€ï¼Œ''é‡Œé¢æ”¾çš„éƒ½æ˜¯å­—ç¬¦ä¸² æž„é€ å‡½æ•°å¯ä»¥åŠ¨æ€åŠ å…¥ä¸€ä¸ªå˜é‡çš„å€¼ é—®å·ä¼ å‚ï¼ˆé¢è¯•é¢˜ï¼‰1234567891011121314let url = 'http://item.taobao.com/item.htm?a=1&amp;b=2&amp;c=&amp;d=xxx&amp;e';//å®žçŽ°æ–¹æ³•String.prototype.myQueryURLParameter = function myQueryURLParameter() &#123; let reg = /[?&amp;]([^?&amp;=]+)(?:=([^?&amp;=]*))?/g, obj = &#123;&#125;; this.replace(reg, (...arg) =&gt; &#123; let [, key, value] = arg; obj[key] = value; &#125;) return obj;&#125;;//æ–¹æ³•è°ƒç”¨let result = url.myQueryURLParameter();=ã€‹&#123; a: '1', b: '2', c: '', d: 'xxx', e: undefined &#125;]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€ï¼ˆå…­ï¼‰å…³äºŽé¢å‘å¯¹è±¡çš„ç†è§£]]></title>
    <url>%2Fposts%2F2801c46e.html</url>
    <content type="text"><![CDATA[å…³äºŽé¢å‘å¯¹è±¡çš„ç†è§£(æž„é€ å‡½æ•°ã€åŽŸåž‹é“¾)OOP(é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³) å®ƒæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œè®©æˆ‘ä»¬åŸºäºŽç±»å’Œå®žä¾‹çš„æ¦‚å¿µæ¥ç¼–ç¨‹å¼€å‘å’Œå­¦ä¹ ã€‚ å•ä¾‹æ¨¡å¼å•ä¾‹è®¾è®¡æ¨¡å¼æ˜¯ä¸€ç§æŠŠå¯¹è±¡æ•°æ®ç±»åž‹å®žçŽ°æŠŠæè¿°åŒä¸€ä»¶äº‹ç‰©çš„å±žæ€§æˆ–è€…ç‰¹å¾å½’çº³æ±‡æ€»åœ¨ä¸€èµ·ï¼Œä»¥æ­¤é¿å…å…¨å±€å˜é‡å†²çªé—®é¢˜çš„æ–¹å¼å’Œæ€æƒ³ã€‚æŠŠæè¿°åŒä¸€ä»¶äº‹åŠ¡çš„å±žæ€§æˆ–è€…æ–¹æ³•å­˜æ”¾åœ¨æŸä¸€ä¸ªå‘½åç©ºé—´ä¸‹ï¼Œå¤šä¸ªå‘½åç©ºé—´ä¸­çš„å±žæ€§å’Œæ–¹æ³•æ˜¯äº’ä¸å¹²æ‰°çš„ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950//=&gt;å•ä¾‹æ¨¡å¼//1ã€singletonä¸ä»…ä»…æ˜¯å¯¹è±¡åäº†ï¼Œåœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œsingletonç§°ä¹‹ä¸º â€œå‘½åç©ºé—´(nameSpace)â€var singleton=&#123; xxx:xxx, ...&#125;; var singleton=&#123; nameSpace1:&#123; xxx:xxx, ... &#125;, nameSpace2:&#123; xxx:xxx, ... &#125; ...&#125;;ä½¿ç”¨å•ä¾‹æ¨¡å¼å®žçŽ°æ¨¡å—åŒ–å¼€å‘æ¨¡å—åŒ–å¼€å‘ï¼šæŠŠä¸€ä¸ªå¤æ‚é¡µé¢æŒ‰ç…§å…·ä½“åŠŸèƒ½åˆ’åˆ†æˆå‡ å¤§å—ï¼Œç„¶åŽç”±ä¸åŒçš„äººåˆ†åˆ«åŽ»å¼€å‘ï¼Œè¿™ç§æ¨¡å—åˆ’åˆ†çš„æ€æƒ³å°±æ˜¯æ¨¡å—åŒ–å¼€å‘åŠŸèƒ½ã€‚//=&gt;é¡¹ç›®ä¸»ç®¡ï¼ˆå¼€å‘äººå‘˜ï¼‰ï¼šå…¬å…±æ¨¡å— var utils=&#123; trim:function()&#123;&#125;&#125;; //=&gt;æŽé›·ï¼šæœç´¢æ¨¡å—var searchModel=&#123; submit:function()&#123; utils.trim(); &#125;, ...&#125;; //=&gt;éŸ©æ¢…æ¢…ï¼šå¤©æ°”æ¨¡å—var weatherModel=&#123; setWeather:function()&#123;&#125;, ...&#125;;//=&gt;å°çº¢ï¼šé¢‘é“æ¨¡å—var channelModel=&#123; show:function()&#123; //=&gt;åœ¨å½“å‰çš„å‘½åç©ºé—´ä¸‹è°ƒå–å…¶å®ƒå‘½åç©ºé—´çš„æ–¹æ³•ï¼šæŒ‡å®šå¥½å¯¹åº”çš„å‘½åç©ºé—´åå­—å³å¯ï¼Œä½¿ç”¨ [NameSpace].[property] å°±å¯ä»¥æ“ä½œäº† searchModel.submit(); //=&gt;è°ƒå–æœ¬æ¨¡å—ä¸­çš„ä¸€äº›æ–¹æ³•ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨THISå¤„ç†å³å¯ï¼šæ­¤æ–¹æ³•ä¸­çš„THISä¸€èˆ¬éƒ½æ˜¯å½“å‰æ¨¡å—çš„å‘½åç©ºé—´ this.setChannel(); &#125;, setChannel:function()&#123;&#125;, ... &#125;; é«˜çº§å•ä¾‹æ¨¡å¼åŸºäºŽJSé«˜é˜¶ç¼–ç¨‹æŠ€å·§æƒ°æ€§æ€æƒ³ï¼Œæ¥å®žçŽ°çš„å•ä¾‹æ¨¡å¼ï¼Œå¹¶ä¸”å¯ä»¥æŠŠä¸€äº›å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼ˆå¦‚ï¼šå‘½ä»¤æ¨¡å¼ã€å‘å¸ƒè®¢é˜…æ¨¡å¼ã€promiseè®¾è®¡æ¨¡å¼ç­‰ï¼‰èžåˆè¿›æ¥ï¼Œæœ€åŽæ¸…æ™°çš„è§„åˆ’æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œæ–¹ä¾¿åŽæœŸäºŒæ¬¡å¼€å‘å’Œç»´æŠ¤ï¼Œè¿™ç§è®¾è®¡æ€æƒ³ç»¼åˆä½“å°±æ˜¯é«˜çº§å•ä¾‹æ¨¡å¼ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ã€‚ 12345678910var serchModel=(function()&#123; function submit()&#123; &#125; return &#123; init:function()&#123; this.submit(); &#125; &#125; &#125;)(); searchModel.init(); å¯¹è±¡ã€ç±»ã€å®žä¾‹å¯¹è±¡ï¼šä¸‡ç‰©çš†å¯¹è±¡ç±»ï¼šå¯¹è±¡çš„å…·ä½“ç»†åˆ†ï¼ˆæŒ‰ç…§å±žæ€§æˆ–ç‰¹æ€§ç»†åˆ†çš„ä¸€äº›ç±»åˆ«ï¼‰å®žä¾‹ï¼šæŸä¸€ä¸ªç±»ä¸­çš„å…·ä½“äº‹ç‰© JSå¸¸ç”¨çš„å†…ç½®ç±»æ•°æ®ç±»åž‹çš„ç±»Numberï¼šæ¯ä¸ªæ•°å­—æˆ–è€…NaNæ˜¯å®ƒçš„ä¸€ä¸ªå®žä¾‹Stringï¼šå­—ç¬¦ä¸²ç±»Booleanï¼šå¸ƒå°”ç±»NullUndefinedï¼šæµè§ˆå™¨å±è”½äº†æˆ‘ä»¬æ“ä½œnullå’Œudnefinedè¿™ä¸ªç±»Objectï¼šå¯¹è±¡ç±»ï¼Œæ¯ä¸ªå¯¹è±¡æ•°æ®ç±»åž‹éƒ½æ˜¯å®ƒçš„å®žä¾‹â€¢ Arrayï¼šæ•°ç»„ç±»â€¢ RegExpï¼šæ­£åˆ™ç±»â€¢ Dateï¼šæ—¥æœŸç±»Functionï¼šå‡½æ•°ç±»ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æ˜¯å®ƒçš„ä¸€ä¸ªå®žä¾‹å…ƒç´ å¯¹è±¡æˆ–è€…å…ƒç´ é›†åˆçš„ç±»HTMLCollectionï¼šå…ƒç´ é›†åˆç±»â€¢ getElementsByTagName()â€¢ getElementsByClassName()â€¢ querySelectorAllNodeListï¼šèŠ‚ç‚¹é›†åˆç±»â€¢ childNodesâ€¢ getElementsByName()HTMLDivElementHTMLElementElement(æ ‡ç­¾ç±»)Node(èŠ‚ç‚¹ç±»ï¼ŒElementåªæ˜¯å…¶ä¸­çš„ä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹) ä¸ºä»€ä¹ˆgetElementByIdçš„ä¸Šä¸‹æ–‡åªèƒ½æ˜¯documentï¼Ÿ(å³getElementByIdä¸ºä»€ä¹ˆåªèƒ½é€šè¿‡documentæ¥è°ƒç”¨)ï¼Ÿå› ä¸ºåªæœ‰åœ¨Documentè¿™ä¸ªç±»ä¸Šæ‰æœ‰getElementByIdè¿™ä¸ªæ–¹æ³•ï¼Œå…¶ä»–ç±»ä¸Š(å¦‚ï¼šHTMLDivElementç±»)æ²¡æœ‰getElementByIdè¿™ä¸ªæ–¹æ³•ï¼Œè€Œdocumentæ˜¯HTMLDocumentè¿™ä¸ªç±»çš„ä¸€ä¸ªå®žä¾‹,èƒ½é€šè¿‡document.proto.protoæ‰¾åˆ°Documentè¿™ä¸ªç±»çš„åŽŸåž‹ä¸Šå…¬æœ‰çš„getElementByIdæ–¹æ³•ã€‚ åŸºäºŽé¢å‘å¯¹è±¡åˆ›å»ºæ•°æ®åˆ›å»ºæ–¹å¼ï¼šä¸¤ç§1.å­—é¢é‡åˆ›å»ºæ–¹å¼â€¢ var obj={}ï¼›2.å®žä¾‹åˆ›å»ºæ–¹å¼ï¼ˆæž„é€ å‡½æ•°æ–¹å¼ï¼‰â€¢ var obj=new Array();å¦‚æžœä¼ é€’çš„å‚æ•°åªæ˜¯ä¸€ä¸ªæ•°å€¼ 1ã€å¯¹äºŽå¼•ç”¨æ•°æ®ç±»åž‹æ¥è¯´ï¼Œä¸¤ç§åˆ›å»ºæ–¹å¼æ˜¯å¤§è‡´ç›¸åŒçš„ï¼Œåªä¸è¿‡ï¼Œä¸¤ç§æ–¹æ³•åˆ›å»ºçš„è¯­æ³•ä¸åŒã€‚ä¸¤ç§åˆ›å»ºæ–¹å¼åœ¨æ ¸å¿ƒæ„ä¹‰ä¸Šæ²¡æœ‰å·®åˆ«ï¼Œéƒ½æ˜¯åˆ›å»ºArrayè¿™ä¸ªç±»çš„ä¸€ä¸ªå®žä¾‹ï¼Œä½†æ˜¯åœ¨è¯­æ³•ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ 2ã€æž„é€ å‡½æ•°åˆ›å»ºæ–¹å¼new Array(10)ï¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º10çš„æ•°ç»„,æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹éƒ½æ˜¯ç©ºnew Array(â€˜10â€™)ï¼šå¦‚æžœåªä¼ é€’ä¸€ä¸ªå®žå‚ï¼Œå¹¶ä¸”å®žå‚ä¸æ˜¯æ•°å­—ï¼Œç›¸å½“äºŽæŠŠå½“å‰å€¼ä½œä¸ºæ•°ç»„çš„ç¬¬ä¸€é¡¹å­˜å‚¨è¿›æ¥new Array(10,20,30)ï¼šå¦‚æžœä¼ é€’å¤šä¸ªå®žå‚ï¼Œä¸æ˜¯è®¾ç½®é•¿åº¦ï¼Œè€Œæ˜¯æŠŠä¼ é€’çš„å†…å®¹å½“åšæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹å­˜å‚¨èµ·æ¥ 2ã€å¯¹äºŽåŸºæœ¬æ•°æ®ç±»åž‹æ¥è¯´ï¼Œå­—é¢é‡æ–¹å¼åˆ›å»ºå‡ºæ¥çš„ç»“æžœå’Œå®žä¾‹æ–¹å¼åˆ›å»ºå‡ºæ¥çš„ç»“æžœæ˜¯æœ‰ä¸€å®šåŒºåˆ«çš„ï¼Œä»Žä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²ï¼Œåªæœ‰å®žä¾‹åˆ›å»ºå‡ºæ¥çš„ç»“æžœæ‰æ˜¯æ ‡å‡†çš„å¯¹è±¡ï¼Œæ•°æ®ç±»åž‹å€¼ä¹Ÿæ˜¯æ ‡å‡†çš„å¯¹è±¡æ•°æ®ç±»åž‹ï¼Œä¹Ÿæ˜¯æ ‡å‡†çš„å†…ç½®ç±»çš„å®žä¾‹ï¼›å¯¹äºŽå­—é¢é‡æ–¹å¼åˆ›å»ºå‡ºæ¥çš„ç»“æžœæ˜¯åŸºæœ¬æ•°æ®ç±»åž‹çš„å€¼ï¼Œä¸æ˜¯ä¸¥æ ¼çš„å®žä¾‹ï¼Œä½†æ˜¯ç”±äºŽJSçš„æ¾æ•£ç‰¹ç‚¹ï¼Œå¯¼è‡´äº†å¯ä»¥ä½¿ç”¨ å†…ç½®ç±».prototypeä¸Šæä¾›çš„æ–¹æ³•ï¼› æž„é€ å‡½æ•°è®¾è®¡æ¨¡å¼ä½¿ç”¨æž„é€ å‡½æ•°æ–¹å¼ï¼Œä¸»è¦æ˜¯ä¸ºäº†åˆ›å»ºç±»å’Œå®žä¾‹çš„ï¼Œä¹Ÿå°±æ˜¯åŸºäºŽé¢å‘å¯¹è±¡æ€æƒ³æ¥å®žçŽ°ä¸€äº›éœ€æ±‚åœ¨JSä¸­ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨new xxx()æ‰§è¡Œå‡½æ•°çš„æ—¶å€™ï¼Œæ­¤æ—¶çš„å‡½æ•°å°±ä¸æ˜¯æ™®é€šçš„å‡½æ•°äº†ï¼Œè€Œæ˜¯å˜ä¸ºä¸€ä¸ªç±»ï¼Œè¿”å›žçš„ç»“æžœå«åšå½“å‰ç±»çš„å®žä¾‹ï¼Œæˆ‘ä»¬è¿™ç§new xxxæ‰§è¡Œçš„æ–¹å¼ç§°ä¹‹ä¸ºæž„é€ å‡½æ•°è®¾è®¡æ¨¡å¼ 12function fn()&#123; &#125;new fn();//new fn()æ˜¯fnçš„ä¸€ä¸ªå®žä¾‹ æž„é€ å‡½æ•°æ‰§è¡Œæ—¶newéƒ½å¹²äº†äº›ä»€ä¹ˆï¼Ÿåœ¨new Fn()ï¼Œæ‰§è¡Œçš„æ—¶å€™ï¼Œæ˜¯å…ˆæŠŠå‡½æ•°æ‰§è¡Œäº†ï¼ŒåŽé¢çš„Fn()å…ˆæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªç§æœ‰ä½œç”¨åŸŸï¼Œå½¢å‚èµ‹å€¼å˜é‡æå‡ï¼Œåœ¨å˜é‡æå‡å®Œäº†ä¹‹åŽï¼Œnewæ“ä½œç¬¦æ‰èµ·äº†ä½œç”¨ï¼Œæ­¤æ—¶ï¼Œæµè§ˆå™¨å¼€å§‹åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œè®©Fnä¸­çš„thisæŒ‡å‘è¿™ä¸ªæ–°åˆ›å»ºçš„å¯¹è±¡ï¼ˆå®žä¾‹ï¼‰ï¼Œç„¶åŽè®©è¿™ä¸ªå¯¹è±¡çš„protoæŒ‡å‘Fn.prototypeï¼Œç„¶åŽJSä»£ç æ‰å¼€å§‹ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå¼€å§‹å¾€ç±»ä¸­æ·»åŠ æ¯ä¸ªå®žä¾‹ç§æœ‰çš„å±žæ€§å’Œæ–¹æ³•ã€‚JSä»£ç æ‰§è¡Œå®ŒæˆåŽï¼Œä¼šé»˜è®¤è¿”å›žå½“å‰åˆ›å»ºçš„è¿™ä¸ªå¯¹è±¡ã€‚ æ™®é€šå‡½æ•°æ‰§è¡Œä¸Žæž„é€ å‡½æ•°æ‰§è¡Œçš„åŒºåˆ« åœ¨ä»£ç ä»Žä¸Šè€Œä¸‹æ‰§è¡Œä¹‹å‰ï¼Œæž„é€ å‡½æ•°æœ‰ç‰¹æ®Šçš„æ“ä½œï¼šæµè§ˆå™¨ä¼šåœ¨å½“å‰çš„ä½œç”¨åŸŸä¸­é»˜è®¤åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ•°æ®ç±»åž‹çš„å€¼ï¼Œå¹¶ä¸”ä¼šè®©å½“å‰å‡½æ•°ä¸­çš„thisæŒ‡å‘åˆ›å»ºçš„è¿™ä¸ªå¯¹è±¡ã€‚ç„¶åŽJSä»£ç å†æ‰§è¡Œï¼Œ ä»£ç æ‰§è¡Œå®ŒæˆåŽï¼Œå³ä½¿å‡½æ•°ä¸­æ²¡æœ‰å†™returnï¼Œåœ¨æž„é€ å‡½æ•°æ¨¡å¼ä¸­ï¼šæµè§ˆå™¨ä¼šé»˜è®¤çš„æŠŠåˆ›å»ºçš„å¯¹è±¡è¿”å›žåˆ°å‡½æ•°å¤–é¢ æ€»ç»“ï¼š æž„é€ å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œæ—¢å…·å¤‡å‡½æ•°æ‰§è¡Œçš„ä¸€é¢ï¼Œä¹ŸåŒæ—¶å…·å¤‡è‡ªå·±ç‹¬æœ‰çš„æ“ä½œï¼šåœ¨æž„é€ å‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œæµè§ˆå™¨ä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯å½“å‰è¿™ä¸ªæž„é€ å‡½æ•°(ç±»)å®žä¾‹ï¼Œå‡½æ•°æ‰§è¡Œå®ŒæˆåŽï¼Œæµè§ˆå™¨ä¼šé»˜è®¤çš„æŠŠè¿™ä¸ªå®žä¾‹è¿”å›žã€‚æ‰€ä»¥new Fn()æ‰§è¡Œï¼ŒFnæ˜¯ä¸€ä¸ªç±»ï¼Œè¿”å›žçš„ç»“æžœå°±æ˜¯Fnè¿™ä¸ªç±»çš„ä¸€ä¸ªå®žä¾‹ æž„é€ å‡½æ•°æ‰§è¡ŒåŽé¢çš„â€˜()â€™é—®é¢˜æž„é€ å‡½æ•°æ‰§è¡Œå¦‚æžœä¸éœ€è¦ä¼ é€’å‚æ•°ï¼Œå‡½æ•°åŽé¢çš„()å¯çœç•¥ï¼Œå¦‚new Fn()å¯å†™ä¸ºnew Fnï¼›æ³¨æ„ï¼šâ€¢ å¦‚æžœè¦åœ¨new Fnä¹‹åŽç›´æŽ¥è°ƒç”¨å®žä¾‹çš„æ–¹æ³•ï¼Œåˆ™å¿…é¡»è¦åŠ å°æ‹¬å·ï¼Œå³å¿…é¡»å†™æˆnew Fn().æ–¹æ³•å æž„é€ å‡½æ•°æ¨¡å¼çš„è¿”å›žå€¼é—®é¢˜æž„é€ å‡½æ•°æ¨¡å¼ä¸­é»˜è®¤è¿”å›žå€¼æ˜¯å½“å‰çš„å®žä¾‹ï¼Œå¦‚æžœæœ‰return,è¿”å›žåˆ†2ç§æƒ…å†µï¼š1ã€return åŽé¢æ˜¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»åž‹çš„å€¼ï¼Œå½“å‰å®žä¾‹æ˜¯ä¸å˜çš„ï¼Œä¾‹å¦‚return 100ï¼›æˆ‘ä»¬çš„è¿”å›žå€¼è¿˜æ˜¯å½“å‰ç±»çš„å®žä¾‹ï¼›2ã€return åŽé¢æ˜¯ä¸€ä¸ªå¼•ç”¨æ•°æ®ç±»åž‹çš„å€¼(windowé™¤å¤–)ï¼Œå½“å‰å®žä¾‹ä¼šè¢«è¿”å›žçš„å€¼ç»™æ›¿æ¢æŽ‰ä¾‹å¦‚return {name:â€æŽé›·â€}æˆ‘ä»¬çš„è¿”å›žå€¼å°±ä¸å†æ˜¯å½“å‰ç±»çš„å®žä¾‹äº†ï¼Œè€Œæ˜¯å¯¹è±¡ {name:â€æŽé›·â€}ï¼› A instanceof B æ£€æµ‹æŸä¸€ä¸ªå®žä¾‹æ˜¯å¦å±žäºŽè¿™ä¸ªç±», åˆ¤æ–­Aå®žä¾‹æ˜¯å¦å±žäºŽBç±» hasOwnProperty VS ininï¼šç”¨æ¥æ£€æµ‹å½“å‰è¿™ä¸ªå±žæ€§æ˜¯å¦éš¶å±žäºŽå¯¹è±¡ï¼ˆä¸ç®¡æ˜¯å¯¹è±¡ç§æœ‰çš„è¿˜æ˜¯å…¬æœ‰çš„å±žæ€§ï¼Œåªè¦æœ‰è¿”å›žçš„å°±æ˜¯trueï¼‰ hasOwnPropertyï¼šç”¨æ¥æ£€æµ‹å½“å‰è¿™ä¸ªå±žæ€§æ˜¯å¦æ˜¯å¯¹è±¡çš„ç§æœ‰å±žæ€§ï¼ˆä¸ä»…è¦æ˜¯å¯¹è±¡çš„å±žæ€§ï¼Œè€Œä¸”éœ€è¦æ˜¯ç§æœ‰çš„æ‰å¯ä»¥ï¼‰ 1234attr in object//æ£€æµ‹attræ˜¯å¦æ˜¯objectçš„å±žæ€§ï¼Œä¸ç®¡æ˜¯ç§æœ‰å±žæ€§è¿˜æ˜¯å…¬æœ‰å±žæ€§åªè¦å­˜åœ¨ï¼Œç”¨inæ¥æ£€æµ‹éƒ½æ˜¯truea.hasOwnProperty(attr)//attræ˜¯å¦æ˜¯Aå®žä¾‹çš„ç§æœ‰å±žæ€§ åŽŸåž‹é“¾æ¨¡å¼åŸºäºŽæž„é€ å‡½æ•°æ¨¡å¼çš„åŽŸåž‹é“¾æ¨¡å¼è§£å†³äº†æ–¹æ³•æˆ–è€…å±žæ€§å…¬æœ‰çš„é—®é¢˜ï¼ŒæŠŠå®žä¾‹ä¹‹é—´å…¬æœ‰çš„å±žæ€§å’Œæ–¹æ³•å†™åœ¨å½“å‰ç±»çš„prototypeå±žæ€§ä¸Šï¼› æ¯ä¸€ä¸ªå‡½æ•°æ•°æ®ç±»åž‹éƒ½æœ‰ä¸€ä¸ªå¤©ç”Ÿè‡ªå¸¦çš„å±žæ€§ï¼šprototypeï¼ˆåŽŸåž‹ï¼‰ï¼Œå¹¶ä¸”è¿™ä¸ªå±žæ€§çš„å±žæ€§å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æ•°æ®ç±»åž‹çš„å€¼ï¼Œæµè§ˆå™¨é»˜è®¤ä¸ºå…¶å¼€è¾Ÿä¸€ä¸ªå †å†…å­˜ï¼› åœ¨æµè§ˆå™¨ç»™prototypeå¼€è¾Ÿçš„è¿™ä¸ªå †å†…å­˜ä¸Šæµè§ˆå™¨å¤©ç”Ÿç»™å®ƒåŠ äº†ä¸€ä¸ªconstructorå±žæ€§ï¼ˆæž„é€ å‡½æ•°ï¼‰ï¼Œå±žæ€§å€¼æ˜¯å½“å‰å‡½æ•°ï¼ˆç±»ï¼‰æœ¬èº«ï¼› æ¯ä¸€ä¸ªå¯¹è±¡æ•°æ®ç±»åž‹(æ™®é€šå¯¹è±¡ã€æ•°ç»„ã€æ­£åˆ™ã€å®žä¾‹ã€protoype..)ä¹Ÿå¤©ç”Ÿè‡ªå¸¦ä¸€ä¸ªå±žæ€§:protoï¼Œå±žæ€§å€¼æŒ‡å‘å½“å‰å®žä¾‹æ‰€å±žç±»çš„åŽŸåž‹(prototype);(IEä¸­å±è”½äº†å¯¹è±¡çš„protoå±žæ€§ï¼Œä½†æ˜¯ç¡®å®žæœ‰ï¼Œåªæ˜¯ä¸è®©æˆ‘ä»¬ä½¿ç”¨è€Œå·²) Objectæ˜¯JSä¸­æ‰€æœ‰å¯¹è±¡æ•°æ®ç±»åž‹çš„åŸºç±»ï¼ˆæœ€é¡¶å±‚çš„ç±»ï¼‰ï¼› åŽŸåž‹é“¾æ¨¡å¼ä¸­çš„thisåˆ†ä¸¤ç§æƒ…å†µåŽŸåž‹æ¨¡å¼ä¸­çš„thisåˆ†ä¸¤ç§æƒ…å†µï¼š åœ¨ç±»ä¸­this.xxx=xxx;this-&gt;å½“å‰ç±»çš„å®žä¾‹ åŽŸåž‹é“¾ä¸­æä¾›çš„ç§æœ‰(å…¬æœ‰)æ–¹æ³•ä¸­çš„thisé—®é¢˜ï¼š æ€»ç»“ï¼šçœ‹æ‰§è¡Œçš„æ—¶å€™â€.â€å‰é¢æ˜¯è°thiså°±æ˜¯è°ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ éœ€è¦å…ˆç¡®å®šthisçš„æŒ‡å‘ï¼ˆthisï¼‰ æŠŠthisæ›¿æ¢æˆå¯¹åº”çš„çš„ä»£ç  æŒ‰ç…§åŽŸåž‹é“¾æŸ¥æ‰¾çš„æœºåˆ¶ï¼Œä¸€æ­¥æ­¥çš„æŸ¥æ‰¾ç»“æžœ é‡æž„åŽŸåž‹è®©æŸä¸ªæž„é€ å‡½æ•°çš„åŽŸåž‹æŒ‡å‘è‡ªå·±å¼€è¾Ÿçš„å †å†…å­˜ï¼Œä½†æ˜¯è‡ªå·±å¼€è¾Ÿçš„å †å†…å­˜å½“ä¸­æ˜¯æ²¡æœ‰constructorå±žæ€§çš„ï¼Œæ‰€ä»¥è¦å¾€è‡ªå·±å¼€è¾Ÿçš„å †å†…å­˜ä¸­æ·»åŠ constructorå±žæ€§ï¼Œå±žæ€§å€¼ä¸ºå½“å‰æž„é€ å‡½æ•°æœ¬èº«ï¼› contrcutor:fnç¼ºç‚¹ï¼šé‡æž„åŽŸåž‹åŽï¼Œä¼šå¯¼è‡´ä¹‹å‰æ·»åŠ çš„å±žæ€§å’Œæ–¹æ³•éƒ½æ²¡æœ‰äº†ï¼Œåªèƒ½ä½¿ç”¨é‡æž„ä¹‹åŽæ·»åŠ çš„å±žæ€§å’Œæ–¹æ³•ï¼›æ³¨æ„ï¼šâ€¢ ä¸è¦å¿˜äº†é‡æž„ä¹‹åŽè¦æ·»åŠ constructorå±žæ€§æŒ‡å‘å½“å‰æž„é€ å‡½æ•°ï¼›â€¢ å†…ç½®ç±»çš„åŽŸåž‹ä¸èƒ½é‡æž„ï¼Œæµè§ˆå™¨ä¸å…è®¸æˆ‘ä»¬è¿™ä¹ˆåšï¼› ç±»çš„ç»§æ‰¿ã€å°è£…å’Œå¤šæ€ å®ƒæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼ˆObject Oriented Programmingï¼‰,æˆ‘ä»¬çš„ç¼–ç¨‹å’Œå­¦ä¹ å…¶å®žæ˜¯æŒ‰ç…§ç±»å’Œå®žä¾‹æ¥å®Œæˆçš„ æˆ‘ä»¬è¦å­¦ä¹ ç±»çš„ç»§æ‰¿ã€å°è£…ã€å¤šæ€ å°è£… æŠŠå®žçŽ°ä¸€ä¸ªåŠŸèƒ½çš„ä»£ç å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä»¥åŽå†è¦å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œåªè¦æ‰§è¡Œå‡½æ•°æ–¹æ³•å³å¯ï¼Œä¸éœ€è¦é‡æ–°ç¼–å†™ä»£ç ä½Žè€¦åˆé«˜å†…èšå‡å°‘é¡µé¢ä»£ç å†—ä½™ï¼Œæé«˜ä»£ç åˆ©ç”¨çŽ‡ å¤šæ€ä¸€ä¸ªç±»ï¼ˆå‡½æ•°ï¼‰çš„å¤šç§å½¢æ€ï¼šé‡è½½ã€é‡å†™ é‡è½½ åŽå°JAVAç­‰ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå¯¹äºŽé‡è½½çš„æ¦‚å¿µï¼šæ–¹æ³•åç›¸åŒï¼Œå‚æ•°åä¸åŒï¼Œå«åšæ–¹æ³•çš„é‡è½½JSä¸­æ²¡æœ‰ç±»ä¼¼äºŽåŽå°ä¸¥æ ¼æ„ä¹‰çš„é‡è½½ï¼ŒJSä¸­ï¼Œå¦‚æžœæ–¹æ³•åç›¸åŒäº†ï¼Œæœ€åŽåªèƒ½ä¿ç•™ä¸€ä¸ªï¼ˆå’Œå®žå‚æ²¡æœ‰å…³ç³»ï¼‰JSä¸­çš„é‡è½½ï¼šåŒä¸€ä¸ªæ–¹æ³•ï¼Œé€šè¿‡ä¼ é€’å®žå‚çš„ä¸åŒï¼Œï¼ˆargumentsï¼‰æˆ‘ä»¬å®Œæˆä¸åŒçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªä¹Ÿå¯ä»¥ç†è§£ä¸ºé‡è½½ 12345678function sum(num1,num2)&#123;return num1+num2;&#125;function sum()&#123;var ary=[].slice.call(arguments);return&#125;//åªä¼šæ‰§è¡ŒåŽé¢é‚£ä¸ªsum é‡å†™ ä¸ç®¡æ˜¯åŽå°è¯­è¨€è¿˜æ˜¯JSï¼Œéƒ½æœ‰é‡å†™ï¼Œå­ç±»é‡å†™çˆ¶ç±»çš„æ–¹æ³•ï¼› ç»§æ‰¿ åŽŸç†ï¼šå­ç±»ç»§æ‰¿çˆ¶ç±»çš„ä¸­çš„ä¸€äº›å±žæ€§å’Œæ–¹æ³• åŽŸåž‹ç»§æ‰¿ è®©å­ç±»çš„åŽŸåž‹æŒ‡å‘çˆ¶ç±»çš„å®žä¾‹ï¼›child.prototype=new parent(); æˆ‘ä»¬é¦–å…ˆè®©å­ç±»çš„åŽŸåž‹æŒ‡å‘çˆ¶ç±»çš„å®žä¾‹ï¼Œç„¶åŽåœ¨å‘å­ç±»åŽŸåž‹ä¸Šæ‰©å±•æ–¹æ³•ï¼Œé˜²æ­¢æå‰å¢žåŠ æ–¹æ³•ï¼Œç­‰åŽŸåž‹é‡æ–°æŒ‡å‘åŽï¼Œä¹‹å‰åœ¨å­ç±»åŽŸåž‹ä¸Šæ‰©å±•çš„æ–¹æ³•éƒ½æ²¡ç”¨äº†ï¼ˆå­ç±»åŽŸåž‹å·²ç»æŒ‡å‘æ–°çš„ç©ºé—´åœ°å€äº†ï¼‰ï¼› è®©å­ç±»åŽŸåž‹é‡æ–°æŒ‡å‘çˆ¶ç±»å®žä¾‹ï¼Œå­ç±»åŽŸåž‹ä¸Šçš„åŽŸæœ‰constructorå°±æ²¡äº†ï¼Œä¸ºäº†ä¿è¯æž„é€ å‡½æ•°çš„å®Œæ•´æ€§ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°æ‰‹åŠ¨è®¾ç½®constructor: child.protype.constructor.call(child) *åŽŸç† *åŽŸåž‹ç»§æ‰¿å¹¶ä¸æ˜¯æŠŠçˆ¶ç±»çš„å±žæ€§å’Œæ–¹æ³•copyä¸€ä»½ç»™å­ç±»ï¼Œè€Œæ˜¯ç»™å­ç±»å’Œçˆ¶ç±»ä¹‹é—´æ­å»ºä¸€ä¸ªè¿žæŽ¥çš„æ¡¥æ¢ï¼Œä»¥åŽå­ç±»æˆ–è€…å­ç±»çš„å®žä¾‹ï¼Œå¯ä»¥é€šè¿‡åŽŸåž‹é“¾çš„æŸ¥æ‰¾æœºåˆ¶ï¼Œæ‰¾åˆ°çˆ¶ç±»åŽŸåž‹çš„æ–¹æ³•ï¼Œä»Žè€Œè°ƒå–è¿™äº›æ–¹æ³•ã€‚ ç‰¹å¾ å­ç±»ä¸ä»…å¯ä»¥ç»§æ‰¿çˆ¶ç±»åŽŸåž‹ä¸Šçš„å…¬æœ‰å±žæ€§æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿çˆ¶ç±»æä¾›ç»™å®žä¾‹çš„ç§æœ‰å±žæ€§å’Œæ–¹æ³•ï¼Œå¹¶æŠŠå…¶æ”¾åœ¨å­ç±»çš„å…¬æœ‰å±žæ€§å’Œæ–¹æ³•ä¸Šã€‚ callç»§æ‰¿ï¼ˆç»§æ‰¿ç§æœ‰çš„ï¼‰ åŽŸç†åœ¨å­ç±»çš„æž„é€ ä½“ä¸­ï¼ŒæŠŠçˆ¶ç±»åšæ™®é€šæ–¹æ³•æ‰§è¡Œï¼Œè®©çˆ¶ç±»æ–¹æ³•ä¸­çš„thisæŒ‡å‘å­ç±»å®žä¾‹ç‰¹ç‚¹ï¼šæŠŠçˆ¶ç±» æž„é€ ä½“ä¸­çš„ç§æœ‰å±žæ€§å’Œæ–¹æ³•ï¼ŒåŽŸå°ä¸åŠ¨å¤åˆ¶äº†ä¸€ä»½ç»™å­ç±»å®žä¾‹ï¼ˆç»§æ‰¿å®ŒæˆåŽï¼Œå­ç±»å’Œçˆ¶ç±»æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼‰æ³¨æ„æˆ‘ä»¬ä¸€èˆ¬æŠŠcallæ”¾åœ¨ç¬¬ä¸€è¡Œï¼Œå°±æ˜¯åˆ›å»ºå­ç±»å®žä¾‹çš„æ—¶å€™ï¼Œé¦–å…ˆç»§æ‰¿ï¼Œç„¶åŽåœ¨ç»™å®žä¾‹èµ‹å€¼è‡ªå·±ç§æœ‰çš„ï¼ˆå¥½å¤„ï¼šè‡ªå·±å¯ä»¥æŠŠç»§æ‰¿çš„ç»“æžœæ›¿æ¢æŽ‰ï¼‰ 12345678function A()&#123; this.x=100;&#125;function B()&#123;//ä¸€èˆ¬éƒ½æŠŠcallç»§æ‰¿æ”¾åœ¨å­ç±»å‡½æ•°ä½“ä¸­çš„ç¬¬ä¸€è¡Œ,è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å­ç±»ç§æœ‰çš„å¯ä»¥æ›¿æ¢æŽ‰ç»§æ‰¿è¿‡æ¥çš„ç»“æžœï¼› A.call(this); this.y=200&#125; å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ Object.createï¼ˆ[obj]ï¼‰:åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼ŒæŠŠobjä½œä¸ºæ–°å¯¹è±¡çš„åŽŸåž‹ï¼ˆç»§æ‰¿å…¬æœ‰ï¼‰Object.createä¸å…¼å®¹ 123var obj=&#123;name:'æŽé›·'&#125;;var newObj=Object.create(obj);newObj.__proto__===obj; child.protype= Object.create(parent.protorype); åˆ©ç”¨Object.createåˆ›å»ºä¸€ä¸ªçš„ç©ºå¯¹è±¡ï¼› è¯¥ç©ºå¯¹è±¡æŒ‡å‘parent.protorypeï¼› å°†è¯¥å¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™child.protypeï¼Œä»Žè€Œå¯¼è‡´childå’Œchildçš„å®žä¾‹éƒ½å¯ä»¥é€šè¿‡åŽŸåž‹é“¾æ‰¾åˆ°parentçš„åŽŸåž‹ï¼› è¯¥æ–¹æ³•åªèƒ½ç»§æ‰¿parentçš„å…¬æœ‰æ–¹æ³•å’Œå±žæ€§ è‡ªå·±å®žçŽ°ç±»ä¼¼äºŽObject.createçš„æ–¹æ³• 12345Object.myCreate=function myCreate()&#123;var Fn = new Function();Fn.prototype = obj; return new Fn()&#125; ES6ä¸­çš„ç±»åŠç»§æ‰¿123456789101112131415161718192021222324252627282930313233343536class Fn &#123;//constructorå°±æ˜¯å½“å‰å‡½æ•°æœ¬èº«=Fnconstructor()&#123; this.x='xxx';//ç»™å½“å‰å®žä¾‹å¢žåŠ ç§æœ‰å±žæ€§ .........&#125;//å¢žåŠ å…¬æœ‰å±žæ€§ï¼Œç›¸å½“äºŽåœ¨åŽŸåž‹ä¸Šæ·»åŠ xxX()&#123; ......... &#125;//è¿™äº›å±žæ€§æ–¹æ³•éƒ½æ˜¯å°†Fnå½“åšæ™®é€šå¯¹è±¡è®¾ç½®çš„ç§æœ‰å±žæ€§å’Œæ–¹æ³•ï¼Œå’Œå®žä¾‹æ²¡æœ‰ä»»ä½•å…³ç³» static xxx()&#123;.............&#125;&#125; class A &#123; constructor() &#123; this.x = 100; &#125; getX() &#123; console.log(this.x);&#125; &#125; class B extends A &#123; constructor() &#123; super();//=&gt;CALLç»§æ‰¿ this.y = 200;&#125; getY() &#123; console.log(this.y);&#125;&#125;var b = new B();]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€ï¼ˆäº”ï¼‰æ•°ç»„æ±‡æ€»]]></title>
    <url>%2Fposts%2F4834a967.html</url>
    <content type="text"><![CDATA[æ•°ç»„è¯¦è§£ç»™æ•°ç»„å¼€å¤´å¢žåŠ æ–°å†…å®¹çš„æ–¹æ³•:1234567unshift; ary.[0]=xxx; ary.splice(0,0,X); ary.slice(); //åˆ é™¤æ•°ç»„ç¬¬ä¸€é¡¹ï¼š shift; splice(0,1); 12345//ç»™æ•°ç»„æœ«å°¾å¢žåŠ ï¼š push; splice(ary.length,0,x) //æ•°ç»„å…‹éš†ï¼› slice(); æ•°ç»„çš„åŸºç¡€ç»“æž„ æ•°ç»„æ˜¯å¯¹è±¡ç±»åž‹å±žæ€§åæ˜¯æ•°å­— ç±»æ•°ç»„ç±»ä¼¼æ•°ç»„ ä½†ä¸æ˜¯æ•°ç»„ï¼ˆä»¥ä¸‹æ˜¯ç±»æ•°ç»„ï¼‰ é€šè¿‡getElementsByTagNameç­‰èŽ·å–çš„å…ƒç´ é›†åˆ å‡½æ•°ä¸­çš„å®žå‚é›†åˆargument è®°å¿†æ•°ç»„è¦æŒ‰ä»¥ä¸‹å‡ ä¸ªç»´åº¦1ã€æ–¹æ³•çš„æ„ä¹‰2ã€æ–¹æ³•çš„å½¢å‚3ã€æ–¹æ³•çš„è¿”å›žå€¼4ã€é€šè¿‡æ­¤æ–¹æ³•ï¼ŒåŽŸæ¥æ•°ç»„æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼‰ 1æ•°ç»„çš„å¢žåŠ ã€ä¿®æ”¹ã€åˆ é™¤ 12var ary=[12,34,5]; ary.push('sd'); å¢žåŠ  pushå‘æ•°ç»„æœ«å°¾å¢žåŠ æ–°å†…å®¹å‚æ•°ï¼šä¸€ä¸ªåˆ°å¤šä¸ªï¼Œä»»ä½•æ•°æ®éƒ½å¯ä»¥ï¼Œç”¨é€—å·éš”å¼€è¿”å›žå€¼ï¼šæ–°å¢žæ•°ç»„åŽçš„é•¿åº¦åŽŸæœ‰çš„æ•°ç»„å˜äº† unshiftå‘æ•°ç»„å¼€å¤´å¢žåŠ æ–°å†…å®¹å‚æ•°ï¼šä¸€ä¸ªåˆ°å¤šä¸ªï¼Œä»»ä½•æ•°æ®éƒ½å¯ä»¥ï¼Œç”¨é€—å·éš”å¼€è¿”å›žå€¼ï¼šæ–°å¢žæ•°ç»„åŽçš„é•¿åº¦å…¶ä½™åŒpush æŠŠæ•°ç»„å½“åšä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œä½¿ç”¨å¯¹è±¡é”®å€¼å¯¹æ“ä½œï¼Œç»™å…¶è®¾ç½®æ–°çš„å±žæ€§ ary[length]=xxx;å‘æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæ–°å†…å®¹ åˆ é™¤ popåŠŸèƒ½ï¼šåˆ é™¤æ•°ç»„æœ€åŽä¸€é¡¹å‚æ•°ï¼šæ— è¿”å›žå€¼ï¼šè¢«åˆ é™¤çš„é‚£ä¸€é¡¹åŽŸæœ‰æ•°ç»„æ”¹å˜äº† shiftåˆ é™¤æ•°ç»„ç¬¬ä¸€é¡¹ï¼ˆåŽé¢æ¯ä¸€é¡¹ç´¢å¼•éƒ½è¦å‘å‰è¿›ä¸€ä½ï¼‰å‚æ•°ï¼šæ— è¿”å›žå€¼ï¼šè¢«åˆ é™¤é‚£ä¸€é¡¹åŽŸæœ‰æ•°ç»„æ”¹å˜ delete æŠŠæ•°ç»„å½“åšæ™®é€šçš„å¯¹è±¡æ“ä½œ delete ary[ç´¢å¼•]åˆ é™¤æŒ‡å®šé‚£ä¸€é¡¹ï¼Œå…¶ä½™çš„ç´¢å¼•ä¸ä¼šæ”¹å˜ï¼Œæ•°ç»„çš„lengthä¹Ÿä¸å˜ ary.lengthâ€“;åˆ é™¤æ•°ç»„æœ€åŽä¸€é¡¹ splice: æ•°ç»„ä¸­å†…ç½®çš„æ–¹æ³•ï¼Œå¯ä»¥å®žçŽ°æ•°ç»„çš„å¢žåŠ ã€ä¿®æ”¹ã€åˆ é™¤ spliceå®žçŽ°åˆ é™¤ splice(n,m):ä»Žç´¢å¼•nå¼€å§‹åˆ é™¤mä¸ª ï¼ˆmä¸å†™æ˜¯åˆ é™¤åˆ°æœ«å°¾ï¼Œéƒ½ä¸å†™æ˜¯ä¸åˆ é™¤ï¼‰ary.splice(0)å…¨éƒ¨åˆ é™¤ è¿”å›žå€¼ï¼šè¢«åˆ é™¤çš„å†…å®¹ï¼ˆä»¥ä¸€ä¸ªæ–°æ•°ç»„æ¥ä¿å­˜è¢«åˆ é™¤çš„å†…å®¹ï¼‰ åŽŸæœ‰æ•°ç»„æ”¹å˜ spliceå®žçŽ°ä¿®æ”¹ splice(n,m,x):ç”¨xä»£æ›¿åˆ é™¤çš„å†…å®¹ splice å®žçŽ°å¢žåŠ  splice(n,0,x);åœ¨ä¿®æ”¹çš„åŸºç¡€ä¸Šï¼Œä¸€é¡¹éƒ½ä¸åˆ é™¤ï¼Œå°†xæ”¾åœ¨nçš„å‰é¢ splice(0,0,x) å‘æ•°ç»„å¼€å¤´å¢žåŠ ä¸€ä¸ª splice(ary.length,0,x) å‘æ•°ç»„æœ«å°¾å¢žåŠ ä¸€é¡¹ splice(0,1);åˆ é™¤æ•°ç»„ç¬¬ä¸€é¡¹ splice(ary.length-1,1) åˆ é™¤æ•°ç»„æœ€åŽä¸€é¡¹ æ•°ç»„æŸ¥è¯¢slice:æ•°ç»„æŸ¥è¯¢ å‚æ•°ï¼šslice(n,m)ä»Žç´¢å¼•nå¼€å§‹æ‰¾åˆ°ç´¢å¼•må¤„ï¼ˆä¸åŒ…å«mï¼‰ è¿”å›žå€¼ï¼šæŠŠæ‰¾åˆ°çš„éƒ¨åˆ†ä»¥ä¸€ä¸ªæ–°æ•°ç»„è¿”å›ž åŽŸæ¥æ•°ç»„ä¸æ”¹å˜ slice(n);ä»Žnå¼€å§‹æ‰¾åˆ°æœ«å°¾ slice(0)/slice();æ•°ç»„å…‹éš†ï¼Œå…‹éš†ä¸€ä»½å’ŒåŽŸæ¥ä¸€æ¨¡ä¸€æ ·çš„æ–°æ•°ç»„ï¼› sliceæ”¯æŒè´Ÿæ•°ï¼Œè§£æžæ—¶æŒ‰ç…§ï¼šæ€»é•¿åº¦+è´Ÿæ•°ç´¢å¼• æ¥å¤„ç† å°†ä¸¤ä¸ªæ•°ç»„è¿›è¡Œæ‹¼æŽ¥concat å°†å¤šä¸ªæ•°ç»„æ‹¼æŽ¥åœ¨ä¸€èµ· å‚æ•°ï¼šè¦æ‹¼æŽ¥çš„å†…å®¹æ”¾åœ¨åŽŸæ•°ç»„åŽé¢ è¿”å›žï¼šæ‹¼æŽ¥åŽæ–°æ•°ç»„ åŽŸæœ‰æ•°ç»„ä¸å˜ concat(),ä»€ä¹ˆéƒ½æ²¡æœ‰æ‹¼æŽ¥ï¼Œç›¸å½“äºŽæŠŠåŽŸæœ‰çš„æ•°ç»„å…‹éš†ï¼› æ•°ç»„å…‹éš†åŽå‡ºçŽ°çš„æ˜¯ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸ŽåŽŸæœ‰æ•°ç»„ä¸ç›¸åŒï¼Œæ‹·è´ä¸€ä»½ æŠŠæ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²toString å®žçŽ°æŠŠæ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œä¸€é€—å·åˆ†éš” å‚æ•°ï¼šæ— å‚æ•° è¿”å›žï¼šè½¬æ¢åŽçš„å­—ç¬¦ä¸² åŽŸæœ‰æ•°ç»„ä¸å˜ join æŠŠæ•°ç»„æŒ‰ç…§æŒ‡å®šçš„åˆ†éš”ç¬¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå’Œå­—ç¬¦ä¸²ä¸­çš„splitç›¸å¯¹åº” å‚æ•°ï¼šæŒ‡å®šè¿žæŽ¥ç¬¦ è¿”å›žå€¼ï¼šè½¬åŒ–åŽçš„å­—ç¬¦ä¸² åŽŸæœ‰æ•°ç»„ä¸å˜ eval:æŠŠå­—ç¬¦ä¸²å˜ä¸ºJSè¡¨è¾¾å¼æ‰§è¡Œvar total=eval(ary.join(â€˜+â€™)); å¯å®žçŽ°æ•°ç»„æ±‚å’Œï¼›(ä¸€èˆ¬é¡¹ç›®ä¸­å°½é‡ä¸è¦ç”¨evalï¼Œæ€§èƒ½è¾ƒå·®) å®žçŽ°æ•°ç»„ä¸­æ¯ä¸€é¡¹çš„æŽ’åºå’ŒæŽ’åˆ—reverse æŠŠæ•°ç»„å€’è¿‡æ¥æŽ’åˆ— å‚æ•° ï¼šæ—  è¿”å›žå€¼ï¼šæŽ’åºåŽçš„æ•°ç»„ åŽŸæœ‰æ•°ç»„æ”¹å˜ sort å®žçŽ°æ•°ç»„æŽ’åº å‚æ•°ï¼šæ— æˆ–å›žè°ƒå‡½æ•°ï¼› è¿”å›žå€¼ï¼šæŽ’åºåŽçš„ åŽŸæœ‰æ•°ç»„æ”¹å˜ä¸ä¼ å‚çš„æƒ…å†µä¸‹ï¼Œåªèƒ½è¯†åˆ«10ä»¥å†…çš„æ•°å­—ï¼Œå¤šä½æ•°åªè¯†åˆ«ç¬¬ä¸€ä½ 1234ary.sort(function(a,b)&#123;return a-b; //å‡åº a-b&gt;0,aå’Œbäº¤æ¢ä½ç½® return b-a;//é™åº &#125;) éåŽ†æ•°ç»„ä¸­æ¯ä¸€é¡¹çš„æ–¹æ³•ï¼ˆ ä»¥ä¸‹æ–¹æ³•åœ¨IE6-8éƒ½ä¸æ”¯æŒï¼‰ æ–¹æ³•å æ˜¯å¦æ“ä½œåŽŸæ•°ç»„ æ–¹æ³•è¿”å›žç»“æžœ å›žè°ƒå‡½æ•°è¿”å›žç»“æžœ filterï¼ˆè¿‡æ»¤ï¼‰ å¦ è¿‡æ»¤åŽçš„æ–°æ•°ç»„ true/false,è‹¥trueåˆ™æ”¾åˆ°æ–°æ•°ç»„ä¸­ mapï¼ˆæ˜ å°„ï¼‰ å¦ æ–°æ•°ç»„ returnåŽçš„å€¼ find å¦ è¿”å›žæ‰¾åˆ°çš„é‚£ä¸€é¡¹ï¼Œæ²¡æœ‰è¿”å›ž-1 è¿”å›žtrueè¡¨ç¤ºæ‰¾åˆ°äº†ï¼Œå¹¶åœæ­¢ some å¦ boolean æ‰¾trueï¼Œæ‰¾ä¸åˆ°è¿”å›žfalse every å¦ boolean æ‰¾falseï¼Œæ‰¾ä¸åˆ°è¿”å›žtrue reduce å¦ ç´¯ç§¯åŽçš„ç»“æžœ è¿”å›žçš„æ˜¯ä¸‹ä¸€æ¬¡çš„prev éåŽ†æ•°ç»„æˆ–ç±»æ•°ç»„ã€å­—ç¬¦ä¸²æ¯ä¸€é¡¹ for â€¦of 1234let arr = [2, 4, 1, 3]; for(let val of arr)&#123; console.log(val);//2ï¼Œ4ï¼Œ1ï¼Œ3&#125; find ç”¨äºŽæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›žè°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›žè°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›žå€¼ä¸ºtrueçš„æˆå‘˜ï¼Œç„¶åŽè¿”å›žè¯¥æˆå‘˜ã€‚å¦‚æžœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›žundefinedã€‚ 12345let arr = [2, 4, 1, 3];res=arr.find((item)=&gt;&#123; return item&gt;1; &#125;) console.log(res);//2 findIndex findæ–¹æ³•éžå¸¸ç±»ä¼¼ï¼Œè¿”å›žç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æžœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›ž-1ã€‚ 12345res=arr.find((item)=&gt;&#123; return item&gt;1; &#125;) console.log(res);//0=&gt;2çš„ç´¢å¼•//find,findIndexéƒ½å¯ä»¥æŽ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå›žè°ƒå‡½æ•°çš„thiså¯¹è±¡ forEachï¼ˆä¸æ”¯æŒreturnï¼‰ å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œæ²¡æœ‰è¿”å›žå€¼ 1234let arr = [2, 4, 1, 3];arr.forEach(function (item, index) &#123; console.log(item);//2, 4, 1, 3&#125;) some å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°,åªè¦ä¸€ä¸ªæ¡ä»¶æˆç«‹ï¼Œåˆ™è¿”å›žtrueï¼Œæ¡ä»¶éƒ½ä¸æˆç«‹æ‰è¿”å›žfalse; 12345let arr = [2, 4, 1, 3];res = arr.some((item, index) =&gt; &#123; return item &gt; 3;&#125;)console.log(res);//true every å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°,æ¡ä»¶éƒ½æˆç«‹æ‰è¿”å›žtrueï¼Œåªè¦æœ‰ä¸€ä¸ªä¸æˆç«‹ï¼Œåˆ™è¿”å›žfalse 12345let arr = [2, 4, 1, 3];let res4 = arr.every((item, index) =&gt; &#123; return item &gt; 3;&#125;)console.log(res4);//false map()ï¼šï¼ˆæ˜ å°„ï¼‰ å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œè¿”å›žæ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æžœç»„æˆçš„æ•°ç»„ã€‚ 12345let ary = [2, 4, 1, 3];let res1=ary.map((item,index)=&gt;&#123; return item*2;&#125;);console.log(res1);//[4,8,2,6] ä¸¤ä¸ªå½’å¹¶æ•°ç»„çš„æ–¹æ³•:reduce,reduceRightreduce: å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°,è®¡ç®—æ•°ç»„æ¯ä¸€é¡¹çš„ç´¯ç§¯å€¼ prev:ç´¯ç§¯é¡¹ï¼Œnextå½“å‰é¡¹4ä¸ªå‚æ•°:[pre,next,index,ary] indexï¼šnextçš„ç´¢å¼•ï¼Œaryï¼šåŽŸæ•°ç»„ 12345678910111213let arr = [2, 4, 1, 3];//å®žçŽ°æ¯ä¸€é¡¹æˆå‘˜çš„ç´¯åŠ let res5 = arr.reduce((prev, next) =&gt; &#123;//å½“æ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œç¬¬ä¸€æ¬¡prevæ˜¯ç¬¬ä¸€é¡¹ï¼Œnextæ˜¯ç¬¬äºŒé¡¹ï¼Œç„¶åŽå°†ä»–ä»¬çš„å’Œèµ‹å€¼ç»™prevï¼Œç„¶åŽnextå€¼ä¼šç­‰äºŽç¬¬ä¸‰é¡¹ï¼Œprevå°±ç­‰äºŽç´¯åŠ é¡¹ï¼Œä»¥æ­¤ç±»æŽ¨ return prev + next;&#125;,0)//0æ˜¯ç»™prevè®¾ç½®çš„é»˜è®¤å€¼ï¼Œå¯ä¸åŠ ï¼Œå½“prevæœ‰é»˜è®¤å€¼æ—¶ï¼Œnextä»Žç¬¬ä¸€é¡¹å¼€å§‹console.log(res5);//10 eg2ï¼šlet arr1= [&#123;price: 10, count: 2&#125;, &#123;price: 3, count: 6&#125;];//æ±‚æ€»é‡‘é¢let res6 = arr.reduce((prev,next =&gt; &#123; return prev+next.price+next.count;&#125;), 0);//0æ˜¯prevçš„é»˜è®¤å€¼ï¼Œæ­¤æ—¶nextç¬¬ä¸€æ¬¡å°±ç­‰äºŽæ•°ç»„ç¬¬ä¸€é¡¹;console.log(res6); reduceRight ä½¿ç”¨ reduce()è¿˜æ˜¯ reduceRight()ï¼Œä¸»è¦å–å†³äºŽè¦ä»Žå“ªå¤´å¼€å§‹éåŽ†æ•°ç»„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒä»¬å®Œå…¨ç›¸åŒã€‚ filter ï¼ˆè¿‡æ»¤ï¼‰ å¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°, ç­›é€‰æŽ‰ä¸ç¬¦åˆæ¡ä»¶çš„ï¼Œè¿”å›žåŒ¹é…æ¡ä»¶çš„ ï¼ˆè¿”å›žçš„æ˜¯ä¸€ä¸ªæ–°æ•°ç»„ï¼‰ 1234let res2 = ary2.filter((item,index)=&gt;&#123; //åˆ é™¤åŠŸèƒ½æ—¶ç”¨çš„å¤š return item&lt;4&#125;)console.log(res2);//[2,1,3] æ•°ç»„æ–¹æ³•ï¼ŒéªŒè¯æ•°ç»„ä¸­æ˜¯å¦åŒ…å«æŸä¸€é¡¹indexOf/lastIndexOf :èŽ·å–å½“å‰é¡¹åœ¨æ•°ç»„ä¸­ç¬¬ä¸€æ¬¡æˆ–æœ€åŽä¸€æ¬¡å‡ºçŽ°ä½ç½®çš„ç´¢å¼• æ•°ç»„ä¸­è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨IE6-8ä¸‹ä¸å…¼å®¹ å­—ç¬¦ä¸²ä¸­çš„è¿™ä¸¤ä¸ªæ–¹æ³•å…¼å®¹æ‰€æœ‰çš„æµè§ˆå™¨ å¦‚æžœå½“å‰æ•°ç»„ä¸­æ²¡æœ‰è¿™ä¸€é¡¹ï¼Œåˆ™è¿”å›ž-1ï¼› æ•°ç»„åŽ»é‡æ–¹æ³•ä¸€ï¼š éåŽ†æ•°ç»„å°†æ•°ç»„çš„æ¯ä¸€é¡¹å’Œä¸Šä¸€é¡¹æ¯”è¾ƒï¼Œå¦‚æžœç›¸åŒï¼Œåˆ™åˆ é™¤è¿™ä¸€é¡¹ï¼ˆforï¼‰ æ–¹æ³•äºŒ éåŽ†æ•°ç»„æ¯æ¬¡å°†æ•°ç»„çš„æŸä¸€é¡¹å’Œå‰©ä¸‹çš„æ¯”è¾ƒindexOfï¼Œå¦‚æžœç›¸åŒï¼Œå°±åˆ é™¤è¯¥é¡¹ï¼Œé‚£ä¹ˆæœ€åŽç•™ä¸‹æ¥çš„å°±æ²¡æœ‰é‡å¤é¡¹äº†ï¼› 1234567891011var ary=[2,7,8,9,45,8,78,4,2,7]; for(var i;i&lt;ary.length;i++)&#123; var ary2=ary[i]; ary3=ary.splice(i+1); if (ary3.indexOf(ary2)&gt;-1)&#123; ary.spliceï¼ˆi,1); i--; &#125; &#125; console.log(ary); æ–¹å¼ä¸‰ï¼ˆé”®å€¼å¯¹çš„æ–¹å¼ï¼‰ éåŽ†æ•°ç»„æ¯ä¸€é¡¹æŠŠæ¯ä¸€é¡¹ä½œä¸ºæ–°å¯¹è±¡çš„å±žæ€§åå’Œå±žæ€§å€¼å­˜èµ·æ¥ï¼Œä¾‹å¦‚å½“å‰é¡¹1ï¼Œåˆ™[1,1];æ‰€ä»¥ä»¥åŽå¦‚æžœå‡ºçŽ°ç›¸åŒçš„å±žæ€§åï¼Œåˆ™åˆ é™¤è¯¥é¡¹ï¼ŒtypeOf obj.[xxx]===undefined;åˆ™è¯¥é¡¹ä¸æ˜¯é‡å¤å€¼åœ¨åŽŸåž‹ä¸Šæ·»åŠ ä¸€ä¸ªæ•°ç»„åŽ»é‡çš„æ–¹æ³• 123456789101112131415Array.prototype.myDistinct= function () &#123; let obj=&#123;&#125;; for (let i = 0; i &lt; this.length; i++) &#123; let item= this[i]; if(typeof obj[item]!=='undefined')&#123;//è¯¥é¡¹æ˜¯é‡å¤çš„ this[i]=this[this.length-1];//ç”¨æœ€åŽä¸€é¡¹çš„å€¼èµ‹å€¼ç»™å½“å‰é¡¹ï¼Œ this.length--;//å°†æœ€åŽä¸€é¡¹åˆ é™¤ï¼ˆä¸Šä¸€æ­¥å·²å°†æœ€åŽä¸€é¡¹ä¿å­˜è‡³å‰é¢ï¼‰ i--; continue; &#125; obj[item]=item; &#125; obj=null; return this;&#125;; 123456789101112131415//å¦ä¸€ç§å†™æ³•ï¼Œä¸ä¼šæ”¹å˜åŽŸæ•°ç»„çš„ç›¸å¯¹é¡ºåºArray.prototype.myDistinct = function myDistinct() &#123; let obj = &#123;&#125;; for (let i = 0; i &lt; this.length; i++) &#123; let item = this[i]; if (obj[item] === this[i]) &#123; this.splice(i, 1); i--; continue; &#125; obj[item] = item; &#125; obj = null; return this;&#125;; å†’æ³¡æŽ’åº åŽŸç†ï¼šè®©æ•°ç»„ä¸­çš„å½“å‰é¡¹å’ŒåŽé¢çš„æ¯ä¸€é¡¹è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æžœå½“å‰é¡¹å¤§äºŽåŽä¸€é¡¹ï¼Œæˆ‘ä»¬è®©ä¸¤è€…äº¤æ¢ä½ç½®ï¼ˆå°â€”å¤§ï¼‰ï¼Œå°±å¥½åƒæ˜¯æ°”æ³¡å‡åˆ°è¡¨é¢ä¸€æ ·ï¼Œå› æ­¤å¾—åæ€»å…±æ¯”è¾ƒï¼šlength-1æ¬¡ï¼› 12345678910111213141516function bubble(ary) &#123; //-&gt;å¤–å±‚å¾ªçŽ¯æŽ§åˆ¶çš„æ˜¯æ¯”è¾ƒçš„è½®æ•°ï¼š for (var i = 0; i &lt; ary.length - 1; i++) &#123; //-&gt;é‡Œå±‚å¾ªçŽ¯æŽ§åˆ¶æ¯ä¸€è½®æ¯”è¾ƒçš„æ¬¡æ•°. for (var k = 0; k &lt; ary.length - 1 - i; k++) &#123; //ary[k]:å½“å‰æœ¬æ¬¡æ‹¿å‡ºæ¥è¿™ä¸€é¡¹ //ary[k+1]:å½“å‰é¡¹çš„åŽä¸€é¡¹ if (ary[k] &gt; ary[k + 1]) &#123; //å½“å‰é¡¹æ¯”åŽä¸€é¡¹å¤§,æˆ‘ä»¬è®©ä¸¤è€…äº¤æ¢ä½ç½® var temp = ary[k]; ary[k] = ary[k + 1]; ary[k + 1] = temp;//å¯ç”¨ç»“æž„èµ‹å€¼[ary[k],ary[k+1]]=[ary[k+1],ary[k]]; &#125; &#125; &#125; return ary;&#125; æ¯ä¸€è½®ä»Žå‰åˆ°åŽä¸¤ä¸¤æ¯”è¾ƒï¼Œè™½ç„¶ä¸ä¸€å®šå®žçŽ°æœ€åŽçš„æŽ’åºæ•ˆæžœï¼Œä½†æ˜¯å¯ä»¥æŠŠå½“å‰æœ€å¤§çš„æ”¾åœ¨æœ«å°¾å…·ä½“æ¯”è¾ƒçš„è½®æ•°ï¼šary.length-1 æ•°ç»„æœ‰å¤šé•¿ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ€»é•¿åº¦-1ä¸ªæ•°åˆ†åˆ«æ”¾åœ¨æœ«å°¾ï¼Œå³å¯å®žçŽ°æœ€åŽçš„æŽ’åºå¯¹äºŽæ•°ç»„[12, 13, 23, 14, 16, 11]ï¼›ç¬¬ä¸€è½®æ¯”è¾ƒ5æ¬¡ï¼šä¸€å…±å…­ä¸ªï¼Œä¸éœ€è¦å’Œè‡ªå·±æ¯”è¾ƒç¬¬äºŒè½®æ¯”è¾ƒ4æ¬¡ï¼šä¸€å…±å…­ä¸ªï¼Œä¸ç”¨å’Œè‡ªå·±æ¯”ï¼Œä¹Ÿä¸ç”¨å’Œç¬¬ä¸€è½®æ”¾åœ¨æœ«å°¾çš„é‚£ä¸ªæœ€å¤§å€¼æ¯”ç¬¬ä¸‰è½®æ¯”è¾ƒ3æ¬¡æ¯ä¸€è½®æ¯”è¾ƒçš„æ¬¡æ•° ary.length-1(ä¸ç”¨å’Œè‡ªå·±æ¯”)-å½“å‰å·²ç»æ‰§è¡Œçš„è½®æ•°(æ‰§è¡Œä¸€è½®å‘æœ«å°¾æ”¾ä¸€ä¸ªæœ€å¤§å€¼,è¿™äº›å€¼ä¸éœ€è¦å†æ¯”è¾ƒ) æ•°ç»„ä¸­çš„æ·±åº¦å…‹éš†é¦–å…ˆä½¿ç”¨JSON.Stringfyå°†æ•°ç»„è½¬åŒ–ä¸ºæ— æ„ä¹‰çš„å­—ç¬¦ä¸²ï¼Œåœ¨ä½¿ç”¨JSON.parseå°†å­—ç¬¦ä¸²è½¬åŒ–ä¸ºå¯¹è±¡]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€ï¼ˆå››ï¼‰Stringå’ŒMathä¸­å¸¸ç”¨çš„æ–¹æ³•]]></title>
    <url>%2Fposts%2Fe28a6795.html</url>
    <content type="text"><![CDATA[å­—ç¬¦ä¸²ä¸­å¸¸ç”¨çš„æ–¹æ³• ç´¢å¼•ç‰¹ç‚¹ï¼Œä»Ž0å¼€å§‹lengthå±žæ€§ï¼Œå­—ç¬¦ä¸²çš„é•¿åº¦å¦‚æžœæŒ‡å®šç´¢å¼•ä¸å­˜åœ¨ï¼Œä¼šå¾—åˆ°undefinedçœŸå®žé¡¹ç›®ä¸­,æˆ‘ä»¬ç»å¸¸æ“ä½œå­—ç¬¦ä¸²ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦æŽŒæ¡ä¸€äº›å¸¸ç”¨æ–¹æ³•console.dir(String,prototype) charAt&amp;&amp;charCodaAtã€å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ã€‘ str.charAt();è¿”å›žç´¢å¼•æŒ‡å®šçš„å­—ç¬¦,å½“æŒ‡å®šç´¢å¼•ä¸å­˜åœ¨æ—¶è¿”å›žâ€â€,å½“æŒ‡å®šç´¢å¼•ä¸å­˜åœ¨æ—¶str[100]è¿”å›žundefined;str.charCodeAt(),åœ¨charAtçš„åŸºç¡€ä¸Šï¼ŒèŽ·å–æŒ‡å®šä½ç½®å­—ç¬¦çš„unicodeç¼–ç Str.fromcharCode()é€šè¿‡unicoedç  å¾—åˆ°åŽŸæœ‰å­—ç¬¦ ä¸ŽcharCodeAtç›¸å substr&amp;&amp;substring&amp;&amp;slice str.substr(n,m):ä»Žç´¢å¼•nå¼€å§‹ï¼Œæˆªå–mä¸ªå­—ç¬¦ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°æ”¯æŒè´Ÿæ•°ï¼‰str.subtring(n,m):ä»Žç´¢å¼•nå¼€å§‹ï¼Œæˆªå–åˆ°ç´¢å¼•må¤„ï¼Œä¸åŒ…å«m;ï¼ˆä¸æ”¯æŒè´Ÿæ•°ï¼‰str.slice(n,m):ä»Žç´¢å¼•nå¼€å§‹ï¼Œæˆªå–åˆ°ç´¢å¼•må¤„ï¼Œä¸åŒ…å«m,(æ”¯æŒè´Ÿæ•°)ï¼› å½“ç´¢å¼•æ—¶è´Ÿæ•°æ—¶ï¼Œæ˜¯ç”¨å­—ç¬¦ä¸²çš„æ€»é•¿åº¦åŠ ä¸Šç´¢å¼•ï¼Œåœ¨æŒ‰ç…§æ­£æ•°æ“ä½œæ³¨æ„ï¼šå¦‚æžœåªä¼ é€’1ä¸ªå‚æ•°nï¼Œåˆ™ä»Žnæˆªå–åˆ°æœ«å°¾å¦‚æžœç´¢å¼•è¶…è¿‡æœ€å¤§å€¼ï¼Œåˆ™èƒ½æˆªå–å¤šå°‘æ˜¯å¤šå°‘å¦‚æžœæ²¡æœ‰ä¼ å‚æ•°ï¼Œåˆ™ç›¸å½“äºŽæŠŠæ•´ä¸ªå­—ç¬¦ä¸²éƒ½æˆªå–äº†ï¼ˆå­—ç¬¦ä¸²å…‹éš†ï¼‰ toUperCase&amp;&amp;toLowerCase toUperCase():æŠŠå­—æ¯å…¨éƒ¨å¤§å†™ str.toUpperCase()toLowerCase():æŠŠå­—æ¯å…¨éƒ¨å°å†™ indexOf&amp;&amp;lastIndexOfã€å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ã€‘ indexOf:èŽ·å–å½“å‰å­—ç¬¦é¦–æ¬¡å‡ºçŽ°çš„ä½ç½®lastIndexOf:èŽ·å–å½“å‰å­—ç¬¦æœ€åŽä¸€æ¬¡å‡ºçŽ°çš„ä½ç½® *æ³¨æ„ *å¦‚æžœå½“å‰å­—ç¬¦ä¸²æ²¡æœ‰å‡ºçŽ°è¿‡ï¼Œç»“æžœä¸º-1ï¼›ç”±æ­¤å¯ä»¥å€Ÿç”¨æ­¤æ–¹æ³•æ¥æ£€æŸ¥æ˜¯å¦å…·æœ‰æŸå…ƒç´  split Str.split:æŒ‰ç…§æŸä¸€å…ƒç´ å°†å­—ç¬¦ä¸²åˆ’åˆ†ä¸ºå‡ ç»„,è¿”å›žçš„æ˜¯ä¸€ä¸ªæ•°ç»„è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ä¿æŒåŽŸæ¥çš„Stræ”¯æŒæ­£åˆ™ 12345678str='wedfg';str.split('d');//è¿”å›žå€¼æ˜¯ä¸ªæ•°ç»„(2) ["we", "fg"]0: "we"1: "fg"length: 2__proto__: Array(0) replace Str.replace:å®žçŽ°å­—ç¬¦çš„æ›¿æ¢Str.replace(a,b) //ç”¨bæ›¿æ¢aæ‰§è¡Œä¸€æ¬¡åªèƒ½æ›¿æ¢ä¸€ä¸ªï¼Œæƒ³æ›¿æ¢å¤šä¸ªçš„å¤šæ¬¡æ‰§è¡Œï¼ŒçœŸå®žé¡¹ç›®ä¸­ä¸€èˆ¬æ­£å’Œåˆ™ä¸€èµ·ä½¿ç”¨ï¼› trim&amp;&amp;trimLeft&amp;&amp;trimRight Str.trimLeft:åŽ»é™¤å­—ç¬¦ä¸²å·¦è¾¹å…¼å®¹Str.trimRight:åŽ»é™¤å­—ç¬¦ä¸²å³è¾¹ç©ºæ ¼Str.trim:åŽ»é™¤å­—ç¬¦ä¸²æ”¶å°¾ç©ºæ ¼ æ¡ˆä¾‹ï¼šqueryURLParameter èŽ·å–åœ°å€æ ä¸­URLåœ°å€é—®å·çš„ä¼ é€’å‚æ•°å€¼https://www.baidu.com/s?word=è°·æ­Œæµè§ˆå™¨&amp;tn=93219212_hao_pg&amp;ie=utf-8é—®å·åŽé¢å°±æ˜¯æˆ‘ä»¬ä¼ é€’çš„å‚æ•°https://www.baidu.com/s?f=8&amp;rsv_bp=1&amp;rsv_idx=1&amp;word=å°è¯´&amp;tn=94076069_hao_pg æˆ‘ä»¬çš„ç›®æ ‡ï¼šæŠŠé—®å·ä¼ é€’çš„å‚æ•°å€¼ç»™è§£æžå‡ºæ¥obj={word:â€™è°·æ­Œæµè§ˆå™¨â€™,tn:93219212_hao_pg,ie:utf-8} 1234567891011121314151617181920212223&gt; function queryURLParameter(url)&#123;&gt; //=&gt;å®šä¹‰ä¸€ä¸ªå‡½æ•°&gt; var quesIndex=url.indexOf('?');&gt; //èŽ·å–ï¼Ÿçš„ä½ç½®&gt; var obj=&#123;&#125;;//å®šä¹‰ä¸€ä¸ªç©ºå‡½æ•°&gt; if(quesIndex===-1)&#123;&gt; //å¦‚æžœï¼Ÿä¸å­˜åœ¨&gt; return obj;&gt; &#125;&gt; url=url.substr(quesIndex+1);&gt; //èŽ·å–?åŽé¢çš„å­—ç¬¦ä¸²&gt; var ary=url.split('&amp;');&gt; //ç”¨&amp;å°†å­—ç¬¦ä¸²åˆ’åˆ†ä¸ºæ•°ç»„&gt; for(var i=0;i&lt;ary.length;i++)&#123;&gt; var curAry=ary[i].split('=');&gt; //ç”¨=å°†å­—ç¬¦ä¸²åˆ’åˆ†ä¸ºé•¿åº¦ä¸º2çš„æ•°ç»„&gt; obj[curAry[0]]= curAry[1];&gt; //æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªä¸ºå±žæ€§ï¼Œç¬¬äºŒä¸ªä¸ºå±žæ€§å€¼&gt; return obj;&gt; &#125; &gt; &gt; &#125;&gt; Mathä¸­å¸¸ç”¨çš„æ–¹æ³• æ•°å­¦å‡½æ•°ï¼Œä½†æ˜¯ä»–æ˜¯å¯¹è±¡ç±»åž‹Math ä¸­ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šå¸¸ç”¨æ“ä½œæ•°å­—çš„æ–¹æ³•conlse.dir(Math)æŸ¥çœ‹æœ‰å¾ˆå¤šæ–¹æ³• @[abs] Math.abs() å–ç»å¯¹å€¼ @[ceil/floor] Math.ceil() å‘ä¸Šå–æ•´Math.flloor() å‘ä¸‹å–æ•´ @[round] Math.round() å››èˆäº”å…¥ @[random] Math.random() èŽ·å–[0-1)ä¹‹é—´çš„éšæœºå°æ•° 1234//èŽ·å–0-10ä¹‹é—´çš„éšæœºå°æ•°[0-10]Math.round(Math.random()*10)//èŽ·å–[]3-15]çš„éšæœºæ•´æ•°Math.round(Math.random())*12+3 æ³¨æ„è§„å¾‹ èŽ·å–[n,m]ä¹‹é—´çš„éšæœºæ•´æ•°Math.round(Math.random())*(m-n)+n @[max/min] Matn.max:èŽ·å–ä¸€ç»„æ•°æ®çš„æœ€å¤§å€¼Math.min:èŽ·å–ä¸€ç»„æ•°æ®çš„æœ€å°å€¼ @[PI] Math,PI:èŽ·å–åœ†å‘¨çŽ‡ @[pow/sqrt] Math.pow:èŽ·å–ä¸€ä¸ªå€¼çš„å¤šå°‘æ¬¡å¹‚Math.sqrt å¼€å¹³æ–¹ æ¡ˆä¾‹ï¼šéªŒè¯ç åŸºæœ¬åŠŸèƒ½å®žçŽ° ï¼ˆç»“åˆMathå’ŒStringï¼‰ ä¸€èˆ¬æ˜¯ç”±åŽå°å¤„ç†ï¼ŒåŽå°è¿”å›žç»™å®¢æˆ·ç«¯ä¸€å¼ å›¾ç‰‡ï¼ˆå›¾ç‰‡ä¸­åŒ…å«äº†éªŒè¯ç ï¼‰ ï¼ˆé˜²æ­¢æ‰¹é‡æ³¨å†Œï¼Œå‰ç«¯å®¹æ˜“è¢«è§£æžï¼‰éªŒè¯ç å½¢å¼1ã€å­—æ¯æ•°å­—2ã€é—®ç­”3ã€é€‰æ‹©å›¾ç‰‡4ã€æˆè¯­æ‹¼å›¾5ã€å›¾ç‰‡æ‹¼å›¾6ã€æ»‘åŠ¨æ‹–æ‹½ æ¡ˆä¾‹ä¸»è¦æ€æƒ³(èŽ·å–4ä¸ªå­—æ¯å’Œæ•°å­—çš„ç»„åˆ) èŽ·å–æ–‡æ¡£ä¸­çš„å…ƒç´ (æœ€åŽæ•°å­—è¦æ”¾è¿›åŽ»)å®šä¹‰ä¸€ä¸ªç©ºæ•°ç»„ï¼ˆç”¨äºŽå­˜æ”¾éšæœºèŽ·å¾—çš„å­—ç¬¦ï¼‰å®šä¹‰ä¸€ä¸ªå–å€¼åŒºåŸŸï¼ˆ0-9ï¼Œa-z,A-Zï¼‰å…±62ä¸ªåˆ›å»ºforå¾ªçŽ¯èŽ·å–ä¸€ä¸ª0-61çš„éšæœºæ•´æ•°ï¼ˆMath.round(Math.random*61)ï¼‰åˆ©ç”¨è¿™ä¸ªæ•´æ•°èŽ·å–è¯¥ä½ç½®çš„å­—ç¬¦ï¼ŒcharAt()]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€ï¼ˆä¸‰ï¼‰æ•°æ®ç±»åž‹æ±‡æ€»]]></title>
    <url>%2Fposts%2F4b7ffcca.html</url>
    <content type="text"><![CDATA[æ•°æ®ç±»åž‹çš„è½¬æ¢æ±‡æ€»Numberç±»åž‹çš„è½¬æ¢æŠŠå…¶ä»–æ•°æ®ç±»åž‹è½¬æ¢ä¸ºnumberç±»åž‹çš„æ–¹æ³• isNaN,Number,parsseIn,praseFloatåœ¨è¿›è¡ŒåŠ å‡ä¹˜é™¤è¿ç®—æ—¶ 12345'12px'=&gt;NaN; "ä¸»ç¯"=&gt;NaN[ ] /null /false / ' ' /=&gt;0&#123; &#125; /^$/ function()&#123;&#125;/ undefined /=&gt;NaN*æ³¨ï¼šå¼•ç”¨ç±»åž‹åœ¨è½¬åŒ–Numberæ—¶ï¼Œå…ˆè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼ˆtoStringï¼‰ï¼Œå†è½¬å˜ä¸ºæ•°å­—(Nubber)ã€‚*parseFloat('');=&gt;NaN ä¸Žnumberä¸åŒ jsä¸­çš„æ•°å­¦è¿ç®— +ã€-ã€*ã€/ã€% åŠ å‡ä¹˜é™¤å–æ¨¡é™¤äº†åŠ æ³•æœ‰ç‰¹æ®Šæ€§ï¼Œå…¶ä¸Žè¿ç®—é‡åˆ°éžæ•°å­—ç±»åž‹æ—¶éƒ½è¦å…ˆè½¬æ¢ä¸ºNumberåœ¨è¿›è¡Œè¿ç®— æ³¨ï¼š+æœ‰å­—ç¬¦ä¸²æ‹¼æŽ¥çš„ä½œç”¨(å°±æ˜¯æŠŠå…¶ä»–å€¼è½¬åŒ–ä¸º å­—ç¬¦ä¸²å†æ‹¼æŽ¥)ç‰¹æ®Šï¼š({ }).toString()==&gt;&#39;[object object ]&#39;//å¯¹è±¡çš„{}è¦ç”¨ï¼ˆï¼‰åŒ…èµ·æ¥ï¼Œå¦åˆ™æŠ¥é”™ï¼Œå› ä¸º{}ä¼šè¢«è®¤ä¸ºæ˜¯ä»£ç å—å…¶ä½™éƒ½ç›´æŽ¥è½¬åŒ–ä¸ºå­—ç¬¦ä¸² 12345678910111213141516//åŠ æ³•çš„ç‰¹æ®Šæ€§12+3+'2'=&gt;152'3'+4 =&gt;34null+'2' =&gt; 'null2'// å…¶ä½™è¿ç®—1-'1' =&gt;010*null =&gt;0 2+null+false+undefined+NaN+[1,2]+'ç  å³°'+32+null =&gt;2+0=22+false =&gt;2+0=22+undefined =&gt;2+NaN=NaNNaN+NaN=NaNNaN+[1,2] =&gt;NaN+'1,2'=&gt;'NaN1,2'æ•°ç»„è¦å…ˆè½¬åŒ–ä¸ºå­—ç¬¦ä¸²å†è½¬ä¸ºæ•°å­—å†ç›¸åŠ ï¼Œä½†åœ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶å°±ä¼šè¿›è¡Œå­—ç¬¦ä¸²çš„æ‹¼æŽ¥'NaN1,2'+'ç å³°'+3='NaN1,2ç å³°3' å¸ƒå°”ç±»åž‹çš„è½¬æ¢å°†å…¶ä»–æ•°æ®è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹(3ç§) Blooean / ! / !!åˆ¤æ–­è¯­å¥é™¤ä»¥ä¸‹5ç§å¤–ï¼Œå…¶ä½™éƒ½ä¸ºtrue0, null, â€™ â€˜, NaN, undefined, æ³¨æ„ 12345678910111213141516171819202122//å¯¹è±¡å’Œå¯¹è±¡æ¯”è¾ƒï¼šæ¯”è¾ƒçš„æ˜¯ç©ºé—´åœ°å€,ä¸æ˜¯åŒä¸€ä¸ªç©ºé—´ï¼Œè‚¯å®šæ˜¯false[]==[] =&gt;false var a=&#123;&#125;;var b=a;a==b =&gt;true //(ç©ºé—´åœ°å€ç›¸åŒ) //å¯¹è±¡å’Œæ•°å­—æ¯”è¾ƒï¼Œå…ˆè°ƒç”¨toStringæ–¹æ³•[]==0 =&gt;true(&#123;&#125;)==NaN =&gt;false NaNå’Œä»»ä½•ä¸œè¥¿éƒ½ä¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªå·± //å¯¹è±¡å’Œå­—ç¬¦ä¸²æ¯”è¾ƒ (æŠŠä¸¤è¾¹éƒ½è½¬åŒ–ä¸ºå­—ç¬¦ä¸²)[]=='' =&gt;true //å¯¹è±¡å’Œå¸ƒå°”ï¼šï¼ˆæŠŠä¸¤è¾¹éƒ½è½¬åŒ–ä¸ºæ•°å­—ï¼‰[]==true =&gt;0==1 =&gt;false[]==false =&gt;true![]==false =&gt;true //![]æŠŠæ•°ç»„å˜ä¸ºå¸ƒå°”å†å–å[]=true //å­—ç¬¦ä¸²å’Œæ•°å­—ï¼šï¼ˆæŠŠä¸¤è¾¹éƒ½è½¬åŒ–ä¸ºæ•°å­—ï¼‰//å­—ç¬¦ä¸²å’Œå¸ƒå°”ï¼š ï¼ˆæŠŠä¸¤è¾¹éƒ½è½¬åŒ–ä¸ºæ•°å­—ï¼‰//å¸ƒå°”å’Œæ•°å­—ï¼š ï¼ˆæŠŠä¸¤è¾¹éƒ½è½¬åŒ–ä¸ºæ•°å­—ï¼‰ è§„å¾‹ï¼Œä¸¤ä¸ªç­‰äºŽå·æ¯”è¾ƒæ—¶ï¼Œå·¦å³ä¸¤è¾¹çš„çš„æ•°æ®ç±»åž‹ä¸ä¸€æ ·ï¼Œæµè§ˆå™¨ä¼šæŠŠä¸¤è¾¹ç±»åž‹éƒ½è½¬ä¸ºæ•°å­—å†æ¯”è¾ƒï¼ˆå¯¹è±¡ç±»åž‹æ¯”è¾ƒç‰¹æ®Šï¼Œåº”è¯¥å…ˆè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå†è½¬åŒ–ä¸ºæ•°å­—ï¼‰ï¼Œä½†æ˜¯nullå’Œundefinedé™¤å¤–nullå’Œundefinedå’Œå…¶ä»–ä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ 12null==undefined =&gt;true null===undefined =&gt; false è§„å¾‹ï¼Œä¸¤ä¸ªç­‰äºŽå·æ¯”è¾ƒæ—¶ï¼Œä¸¤è¾¹ç±»åž‹ç›¸åŒæ—¶ï¼Œç›´æŽ¥æ¯”è¾ƒï¼Œå¯¹è±¡å’Œå¯¹è±¡æ¯”è¾ƒçš„æ˜¯ç©ºé—´åœ°å€ï¼›{}ï¼={}ï¼Œå¦å¤–NaNå’Œä»»ä½•å€¼éƒ½ä¸ç­‰ JSä¸­çš„æ•°æ®ç±»åž‹æ£€æµ‹æ±‡æ€»typeof ç”¨æ¥æ£€æµ‹æ•°æ®ç±»åž‹çš„è¿ç®—ç¬¦è¯­æ³•ï¼štypeof [value]ï¼ŒtypeofåŽé¢è·Ÿçš„éƒ½æ˜¯å€¼è¿”å›žç»“æžœï¼šé¦–å…ˆæ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­åŒ…å«äº†æˆ‘ä»¬éœ€è¦æ£€æµ‹çš„æ•°æ®ç±»åž‹typeof null=â€™objectâ€™ &gt;è™½ç„¶æ—¶åŸºæœ¬æ•°æ®ç±»åž‹ï¼Œä½†æ˜¯å®ƒå±žäºŽç©ºå¯¹è±¡æŒ‡é’ˆï¼Œæ£€æµ‹ç»“æžœæ˜¯å¯¹è±¡ï¼ˆå±€é™æ€§ï¼‰å¹¶ä¸”ä¸èƒ½ç»†åˆ†å‡ºå½“å‰å¯¹è±¡æ˜¯æ•°ç»„è¿˜æ˜¯æ­£åˆ™ï¼ˆå±€é™æ€§ï¼‰typeof 1&gt;1?1:2; =&gt;2 //ä¼˜å…ˆçº§ï¼Œå…ˆè®¡ç®—typeof 1;å†æ¯”è¾ƒï¼Œ instanceof&amp;constructor instanceof:æ£€æµ‹æŸä¸€å®žä¾‹æ˜¯å¦å±žäºŽå½“å‰ç±»constructor:æž„é€ å‡½æ•°ä½¿ç”¨instanceofæ£€æµ‹æŸä¸ªå€¼æ˜¯å¦å±žäºŽæŸä¸ªæ•°æ®ç±»åž‹ çš„å†…ä¹‹ç±»ï¼Œä»Žè€Œæ£€æµ‹å‡ºå®ƒæ˜¯å¦æ˜¯è¿™ä¸ªç±»åž‹çš„å€¼ï¼Œå¯¹å¯¹è±¡ç±»åž‹çš„å€¼æœ‰æ˜Žæ˜¾çš„åŒºåˆ† instanceofæ£€æµ‹çš„å¼Šç«¯åŸºæœ¬ç±»åž‹çš„å€¼æ— æ³•åŸºäºŽå®ƒæ£€æµ‹var num=12; typeof num =&gt; â€˜Numberâ€™num instanceof Number =&gt;falsevar num2=Number(12); typeof num2 =&gt; â€˜objectâ€™num2 instanceof Number =&gt;trueä¸ç®¡æ˜¯å“ªä¸€ç§æ–¹å¼åˆ›å»ºåŸºæœ¬ç±»åž‹å€¼ï¼Œéƒ½æ˜¯è‡ªå·±æ‰€å±žç±»çš„å®žä¾‹ï¼Œåªä¸è¿‡ç±»åž‹ä¸ä¸€æ ·è€Œå·² instanceof æ˜¯åŸºäºŽåŽŸåž‹é“¾æ¥æ£€æµ‹çš„ï¼Œæ˜¯è¦å½“å‰ç±»çš„å®žä¾‹åœ¨åŽŸåž‹é“¾ä¸Šï¼Œæœ€åŽè¿”å›žçš„ç»“æžœéƒ½æ˜¯true,è¿™ä¹Ÿæ˜¯instanceofçš„å¼Šç«¯ constructorèŽ·å–è¦æ£€æµ‹æ•°æ®ç±»åž‹çš„constructorå±žæ€§ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦ä¸ºæŸä¸ªæ•°æ®ç±»åž‹çš„å†…ç½®ç±»æ¥æ£€æµ‹ary.constructor===Array; =&gt;true;ary.constructor=â€™AAâ€™;ary.constructor===â€AAâ€™; =&gt;true=&gt;ç”±äºŽconstructorçš„å€¼å¯ä»¥è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥æ£€æµ‹ç»“æžœéžå¸¸ä¸å¯é  Object.prototype.toString.call([value]) èŽ·å–Object.prototypeçš„toStringæ–¹æ³•ï¼Œå°†æ–¹æ³•ä¸­çš„thisæ”¹ä¸ºéœ€è¦æ£€æµ‹æ•°æ®ç±»åž‹çš„å€¼ï¼Œç„¶åŽæ‰§è¡Œåœ¨Number String Boolean Arrayâ€¦â€¦è¿™äº›ç±»çš„åŽŸåž‹ä¸Šéƒ½æœ‰toStringæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æŠŠæœ¬èº«çš„å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„åœ¨Objectè¿™ä¸ªç±»çš„åŽŸåž‹ä¸Šä¹Ÿæœ‰ä¸€ä¸ªtoStringæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æ˜¯è¿”å›žå½“å‰å€¼çš„æ‰€å±žç±»è¯¦ç»†ä¿¡æ¯ï¼Œå›ºå®šç»“æž„ï¼š[Object æ‰€å±žçš„ç±»åž‹]ä½¿ç”¨è¯¥æ–¹æ³•æ£€æµ‹ï¼Œä¸ç®¡ä½ æ˜¯ä»€ä¹ˆå€¼ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥æ­£æ­£å¸¸æ£€æµ‹å‡ºæˆ‘ä»¬éœ€è¦çš„ç»“æžœ 1234567891011121314var obj=&#123;name:'ç å³°'&#125;;obj.toString() //=&gt;"[object Object]" è°ƒå–çš„æ­£æ˜¯Object.prototype.toString /** obj.toString()* é¦–å…ˆæ‰§è¡ŒObject.prototype.toStringæ–¹æ³•* è¿™ä¸ªæ–¹æ³•ä¸­çš„thiså°±æ˜¯æˆ‘ä»¬æ“ä½œçš„æ•°æ®å€¼obj* =&gt;æ€»ç»“ï¼šObject.prototype.toStringæ‰§è¡Œçš„æ—¶å€™ä¼šè¿”å›žå½“å‰æ–¹æ³•ä¸­thisçš„æ‰€å±žç±»ä¿¡æ¯** ä¹Ÿå°±æ˜¯ï¼Œæˆ‘æƒ³çŸ¥é“è°çš„æ‰€å±žç±»ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä¸ªtoStringæ–¹æ³•æ‰§è¡Œï¼Œå¹¶ä¸”è®©thiså˜ä¸ºæˆ‘ä»¬æ£€æµ‹çš„è¿™ä¸ªæ•°æ®å€¼ï¼Œé‚£ä¹ˆæ–¹æ³•è¿”å›žçš„ç»“æžœå°±æ˜¯å½“å‰æ£€æµ‹è¿™ä¸ªå€¼çš„æ‰€å±žç±»ä¿¡æ¯** Object.prototype.toString.call([value])* (&#123;&#125;).toString.call([value])*/ å› ä¸ºalertå¼¹å‡ºçš„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¼šè‡ªåŠ¨å°†ï¼ˆï¼‰ä¸­çš„å†…å®¹è°ƒç”¨toString,è€Œå¯¹è±¡ç±»åž‹è°ƒç”¨toString,ä¼šå‡ºçŽ°[Object æ‰€å±žçš„ç±»åž‹]]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€ï¼ˆäºŒï¼‰å‡½æ•°ä¸“é¢˜]]></title>
    <url>%2Fposts%2F9f7bba47.html</url>
    <content type="text"><![CDATA[å‡½æ•°ä¸“é¢˜å‡½æ•°æ˜¯æŒ‡ä¸€æ®µåœ¨ä¸€èµ·çš„ã€å¯ä»¥åšæŸä¸€ä»¶äº‹å„¿çš„ä»£ç ã€‚å¯ä»¥éšæ—¶è¿è¡Œï¼Œå¯ä»¥é‡å¤ä½¿ç”¨ã€‚ åˆ›å»ºå‡½æ•°1234function fn[å‡½æ•°å]()&#123;//=&gt;[å‡½æ•°ä½“]//å®žçŽ°åŠŸèƒ½çš„å…·ä½“JSä»£ç &#125; å‡½æ•°æ‰§è¡Œfn(); //=&gt;æŠŠåˆ›å»ºçš„å‡½æ•°æ‰§è¡Œï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°å¯ä»¥æ‰§è¡Œå¾ˆå¤šæ¬¡ æ¯ä¸€æ¬¡æ‰§è¡Œéƒ½ç›¸å½“äºŽæŠŠå‡½æ•°ä½“ä¸­å®žçŽ°åŠŸèƒ½çš„JSä»£ç é‡å¤æ‰§è¡Œäº†ä¸€é åœ¨çœŸå®žé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šæŠŠå®žçŽ°ä¸€ä¸ªå…·ä½“åŠŸèƒ½çš„ä»£ç å°è£…åœ¨å‡½æ•°ä¸­ï¼š1ã€å¦‚æžœå½“å‰è¿™ä¸ªåŠŸèƒ½éœ€è¦åœ¨é¡µé¢ä¸­æ‰§è¡Œå¤šæ¬¡ï¼Œä¸å°è£…æˆä¸ºå‡½æ•°ï¼Œæ¯ä¸€æ¬¡æƒ³å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œéƒ½éœ€è¦é‡æ–°æŠŠä»£ç å†™ä¸€éï¼›è€Œå°è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä»¥åŽæƒ³å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œåªéœ€è¦æŠŠå‡½æ•°é‡æ–°çš„æ‰§è¡Œå³å¯ï¼Œæé«˜äº†å¼€å‘æ•ˆçŽ‡ï¼›2ã€å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œé¡µé¢ä¸­å°±åŸºæœ¬ä¸Šå¾ˆéš¾å‡ºçŽ°é‡å¤ä¸€æ ·çš„ä»£ç äº†ï¼Œå‡å°‘äº†é¡µé¢ä¸­ä»£ç çš„å†—ä½™åº¦ï¼Œæé«˜äº†ä»£ç çš„é‡å¤åˆ©ç”¨çŽ‡ï¼šä½Žè€¦åˆé«˜å†…èš æˆ‘ä»¬æŠŠä»¥ä¸Šçš„ç‰¹ç‚¹ç§°ä¸ºå‡½æ•°å°è£…ï¼ˆOOPé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³ï¼Œéœ€è¦æˆ‘ä»¬æŽŒæ¡çš„å°±æ˜¯ç±»çš„ç»§æ‰¿ã€å°è£…ã€å¤šæ€ï¼‰ JSä¸­å‡½æ•°çš„æ ¸å¿ƒåŽŸç†å‡½æ•°ä½œä¸ºJSä¸­å¼•ç”¨æ•°æ®ç±»åž‹ä¸­çš„ä¸€ç§ï¼Œä¹Ÿæ˜¯æŒ‰ç…§å¼•ç”¨åœ°å€æ¥æ“ä½œçš„ 1ã€å‡½æ•°æ‰§è¡Œé¦–å…ˆä¼šå½¢æˆä¸€ä¸ªæ–°çš„ç§æœ‰ä½œç”¨åŸŸï¼Œç›®çš„æ˜¯ä¸ºå‡½æ•°ä½“ä¸­çš„ä»£ç æä¾›ä¸€ä¸ªæ‰§è¡Œçš„çŽ¯å¢ƒï¼ˆè€Œä¸”è¿™ä¸ªçŽ¯å¢ƒæ˜¯ç§æœ‰çš„ï¼‰ 2ã€æŠŠåˆ›å»ºæ—¶å€™å­˜å‚¨çš„ä»£ç å­—ç¬¦ä¸²copyä¸€ä»½åˆ°è‡ªå·±çš„ç§æœ‰ä½œç”¨åŸŸä¸­ï¼Œç„¶åŽæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSè¡¨è¾¾å¼ï¼Œå†ç„¶åŽä¾æ¬¡è‡ªä¸Šè€Œä¸‹æ‰§è¡Œç›®çš„ï¼šæŠŠä¹‹å‰å­˜å‚¨çš„å®žçŽ°å…·ä½“åŠŸèƒ½çš„JSä»£ç æ‰§è¡Œ å‡½æ•°æ‰§è¡Œæ­¥éª¤ å½¢å‚èµ‹å€¼ ç§æœ‰ä½œç”¨åŸŸä¸­çš„å˜é‡æå‡ æŠŠä¹‹å‰åˆ›å»ºæ—¶å€™å­˜å‚¨çš„é‚£äº›JSä»£ç å­—ç¬¦ä¸²ï¼Œæ‹¿åˆ°ç§æœ‰ä½œç”¨åŸŸä¸­ï¼Œç„¶åŽæŠŠå®ƒä»¬å˜ä¸ºJSè¡¨è¾¾å¼ä»Žä¸Šåˆ°ä¸‹æ‰§è¡Œ ç§æœ‰ä½œç”¨åŸŸæ˜¯å¦é”€æ¯çš„é—®é¢˜[æ ¹æ®æ ˆå†…å­˜æ˜¯å¦è¢«å ç”¨] å‡½æ•°ä¸­çš„å˜é‡æå‡ åœ¨å½“å‰ä½œç”¨åŸŸä¸­ï¼Œjsä»£ç è‡ªä¸Šè€Œä¸‹æ‰§è¡Œä¹‹å‰ï¼Œæµè§ˆå™¨é¦–å…ˆä¼šæŠŠæ‰€æœ‰å¸¦var/functionå…³é”®å­—çš„è¿›è¡Œæå‰çš„å£°æ˜Žæˆ–è€…å®šä¹‰ å£°æ˜Ž(declare)ï¼švar num; åœ¨å½“å‰ä½œç”¨åŸŸä¸­å¼ä¸€å—“å­æˆ‘æœ‰numè¿™ä¸ªåäº†å®šä¹‰(defined)ï¼šnum=11; æŠŠå£°æ˜Žçš„åå­—èµ‹ä¸€ä¸ªå€¼ å¸¦varå…³é”®å­—çš„åªæ˜¯æå‰çš„å£°æ˜Žä¸€ä¸‹ï¼›å¸¦functionå…³é”®å­—çš„åœ¨å˜é‡æå‡é˜¶æ®µæŠŠå£°æ˜Žå’Œå®šä¹‰éƒ½å®Œæˆäº†ï¼› å˜é‡æå‡è¯¦è§£å¯¹äºŽå¸¦varå’Œfunctionå…³é”®å­—åœ¨ä¸Žè§£é‡Šçš„æ—¶å€™æ“ä½œä¸ä¸€æ · var åœ¨é¢„è§£é‡Šçš„æ—¶å€™åªæ˜¯æå‰å£°æ˜Ž function åœ¨é¢„è§£é‡Šæ—¶æå‰å°†å£°æ˜Žå’Œå®šä¹‰éƒ½å®Œæˆäº†ï¼› 1ã€.é¢„è§£é‡Šåªå‘ç”Ÿåœ¨å½“å‰ä½œç”¨åŸŸä¸­ï¼Œå¼€å§‹åªå¯¹windowä¸‹çš„é¢„è§£é‡Šï¼Œåªæœ‰åœ¨å‡½æ•°æ‰§è¡Œæ—¶ï¼Œæ‰ä¼šå¯¹å‡½æ•°ä½“ä¸­çš„è¿›è¡Œé¢„è§£é‡Š2ã€åœ¨ifåˆ¤æ–­ä¸­ï¼Œåœ¨é¢„è§£é‡Šæ—¶ï¼Œä¸ç®¡ä½ æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œéƒ½è¦å°†å¸¦varçš„è¿›è¡Œé¢„è§£é‡Šï¼ˆåœ¨è€ç‰ˆæœ¬æµè§ˆå™¨ä¸­ï¼Œå‡½æ•°ä¼šè¢«å£°æ˜Žå’Œå®šä¹‰ï¼Œæ–°ç‰ˆæœ¬æµè§ˆå™¨ä¸­ï¼Œå‡½æ•°åªä¼šè¢«å£°æ˜Žï¼‰3ã€var fn=function(){},åœ¨åŒ¿åå‡½æ•°å€¼å‡½æ•°è¡¨è¾¾å¼ä¸­åªå¯¹ç­‰å·å·¦è¾¹è¿›è¡Œé¢„è§£é‡Šï¼Œå³è¾¹æ˜¯å€¼ï¼Œä¸å‚åŠ é¢„è§£é‡Š çœŸå®žé¡¹ç›®ä¸­ï¼Œåº”ç”¨è¿™ä¸ªåŽŸç†ï¼Œæˆ‘ä»¬åˆ›å»ºå‡½æ•°çš„æ—¶å€™å¯ä»¥ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼çš„æ–¹å¼ï¼š1ã€å› ä¸ºåªèƒ½å¯¹ç­‰å·å·¦è¾¹çš„è¿›è¡Œæå‡ï¼Œæ‰€ä»¥å˜é‡æå‡å®ŒæˆåŽï¼Œå½“å‰å‡½æ•°åªæ˜¯å£°æ˜Žäº†ï¼Œæ²¡æœ‰å®šä¹‰ï¼Œæƒ³è¦æ‰§è¡Œå‡½æ•°åªèƒ½æ”¾åœ¨èµ‹å€¼çš„ä»£ç ä¹‹åŽæ‰§è¡Œï¼ˆæ”¾åœ¨å‰é¢æ‰§è¡Œç›¸å½“äºŽè®©undefinedæ‰§è¡Œï¼Œä¼šæŠ¥é”™çš„ï¼‰2ã€è¿™æ ·è®©æˆ‘ä»¬çš„ä»£ç é€»è¾‘æ›´åŠ ä¸¥è°¨ï¼Œä»¥åŽæƒ³è¦çŸ¥é“ä¸€ä¸ªæ‰§è¡Œçš„å‡½æ•°åšäº†ä»€ä¹ˆåŠŸèƒ½ï¼Œåªéœ€è¦å‘ä¸ŠæŸ¥æ‰¾å®šä¹‰çš„éƒ¨åˆ†å³å¯ï¼ˆä¸ä¼šå­˜åœ¨å®šä¹‰çš„ä»£ç åœ¨æ‰§è¡Œä¸‹é¢çš„æƒ…å†µï¼‰ 4ã€function fnï¼ˆnï¼‰{};(10); è‡ªæ‰§è¡Œå‡½æ•°ï¼Œåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä¸è¿›è¡Œé¢„è§£é‡Šï¼Œåœ¨æ‰§è¡Œåˆ°è¯¥ä½ç½®æ˜¯å®šä¹‰å’Œæ‰§è¡Œä¸€èµ·å®Œæˆã€‚5ã€å½“å‡½æ•°ä¸­æœ‰returnæ—¶ï¼Œreturnä¸‹é¢çš„å‡½æ•°ä¸æ‰§è¡Œï¼Œä½†æ˜¯ä¼šé¢„è§£é‡Šï¼›returnåŽé¢è·Ÿçš„æ˜¯è¿”å›žå€¼ï¼Œæ‰€ä»¥ä¸è¿›è¡Œé¢„è§£é‡Šã€‚6ã€åœ¨é¢„è§£é‡Šä¸­ï¼Œå¦‚æžœåå­—å·²ç»å£°æ˜Žè¿‡äº†ï¼ŒåŽé¢å°±ä¸é‡æ–°å£°æ˜Žï¼Œä½†ä¼šé‡æ–°èµ‹å€¼ï¼› å¦‚ä½•åŒºåˆ†ç§æœ‰å˜é‡å’Œå…¨å±€å˜é‡ åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹å£°æ˜Žçš„éƒ½æ˜¯å…¨å±€å˜é‡ åœ¨ç§æœ‰ä½œç”¨åŸŸä¸‹å£°æ˜Žçš„å˜é‡å’Œå‡½æ•°çš„å½¢å‚éƒ½æ˜¯ç§æœ‰ å˜é‡ åœ¨ç§æœ‰ä½œç”¨åŸŸä¸­ï¼Œæˆ‘ä»¬ä»£ç æ‰§è¡Œçš„æ—¶å€™é‡åˆ°ä¸€ä¸ªå˜é‡ï¼Œé¦–å…ˆæˆ‘ä»¬è¦ç¡®å®šä»–æ˜¯å¦ä¸ºç§æœ‰å˜é‡ï¼Œå¦‚æžœæ˜¯ç§æœ‰å˜é‡ï¼Œé‚£ä¹ˆä»–å’Œå¤–é¢æ²¡æœ‰ä»»ä½•å…³ç³»ï¼›å¦‚æžœä¸æ˜¯ç§æœ‰å˜é‡ï¼Œï¼ˆä¸åŠ varï¼‰é‚£ä¹ˆå°±è¦å‘ä»–çš„ä¸Šçº§æŸ¥æ‰¾ï¼Œä¸€ç›´åˆ°windowä¸ºæ­¢ï¼› çœ‹å½“å‰å‡½æ•°åœ¨å“ªä¸ªä½œç”¨åŸŸå®šä¹‰ï¼Œé‚£ä¹ˆä»–çš„ä¸Šçº§ä½œç”¨äºŽå°±æ˜¯è°ï¼Œè·Ÿåœ¨å“ªé‡Œè¿è¡Œæ²¡æœ‰å…³ç³» åœ¨å…¨å±€ä½œç”¨åŸŸä¸­å¸¦varå’Œä¸å¸¦varçš„åŒºåˆ« 1ã€å¸¦varçš„å¯ä»¥å…ˆè¿›è¡Œé¢„è§£é‡Šï¼Œæ‰€ä»¥åœ¨èµ‹å€¼å‰æ‰§è¡Œä¸ä¼šæŠ¥é”™ï¼›ä¸å¸¦varçš„æ²¡æœ‰è¿›è¡Œé¢„è§£é‡Šï¼Œåœ¨å‰é¢æ‰§è¡Œä¼šæŠ¥é”™ï¼›2ã€num=12;console.log(num2); ==&gt;12 //å«ä¹‰ï¼šç›¸å½“äºŽç»™windowå¢žåŠ ä¸€ä¸ªå±žæ€§ï¼Œå±žæ€§å=numï¼Œå±žæ€§å€¼=12ï¼›3ã€var num=12;console.log(num); =&gt; 12// é¦–å…ˆç»™å…¨å±€ä½œç”¨åŸŸå¢žåŠ ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œä¸”ä¹Ÿä¸ºwindowå¢žåŠ ä¸€ä¸ªå±žæ€§ in ï¼šåˆ¤æ–­å˜é‡æ˜¯å¦å­˜åœ¨å½“å‰ä½œç”¨åŸŸä¸­ï¼› ++iå’Œi++çš„åŒºåˆ«éƒ½æ˜¯è‡ªå¢ž1çš„æ„æ€åœ¨è¿ç®—ä¸­ä¸åŒç‚¹i++æ˜¯å…ˆè¿›è¡Œè¿ç®—ï¼Œå†è‡ªå¢ž++iæ˜¯å…ˆè‡ªå¢ž1å†è¿ç®— ä½œç”¨åŸŸé“¾å‡½æ•°æ‰§è¡Œå½¢æˆä¸€ä¸ªç§æœ‰çš„ä½œç”¨åŸŸï¼ˆä¿æŠ¤ç§æœ‰å˜é‡ï¼‰ï¼Œè¿›å…¥åˆ°ç§æœ‰ä½œç”¨åŸŸä¸­ï¼Œé¦–å…ˆå˜é‡æå‡ï¼ˆå£°æ˜Žè¿‡çš„å˜é‡æ˜¯ç§æœ‰çš„ï¼‰ï¼ŒæŽ¥ä¸‹æ¥ä»£ç æ‰§è¡Œ1ã€æ‰§è¡Œçš„æ—¶å€™é‡åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¦‚æžœè¿™ä¸ªå˜é‡æ˜¯ç§æœ‰çš„ï¼Œé‚£ä¹ˆæŒ‰ç…§ç§æœ‰å¤„ç†å³å¯2ã€å¦‚æžœå½“å‰è¿™ä¸ªå˜é‡ä¸æ˜¯ç§æœ‰çš„ï¼Œæˆ‘ä»¬éœ€è¦å‘å®ƒçš„ä¸Šçº§ä½œç”¨åŸŸè¿›è¡ŒæŸ¥æ‰¾ï¼Œä¸Šçº§å¦‚æžœä¹Ÿæ²¡æœ‰ï¼Œåˆ™ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°windowå…¨å±€ä½œç”¨åŸŸä¸ºæ­¢ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æŸ¥æ‰¾æœºåˆ¶å«åšä½œç”¨åŸŸé“¾1ï¼‰å¦‚æžœä¸Šçº§ä½œç”¨åŸŸæœ‰è¿™ä¸ªå˜é‡ï¼Œæˆ‘ä»¬å½“å‰æ“ä½œçš„éƒ½æ˜¯ä¸Šçº§ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼ˆå‡å¦‚æˆ‘ä»¬åœ¨å½“å‰ä½œç”¨åŸŸæŠŠå€¼æ”¹äº†ï¼Œç›¸å½“äºŽæŠŠä¸Šçº§ä½œç”¨åŸŸä¸­çš„è¿™ä¸ªå€¼ç»™ä¿®æ”¹äº†ï¼‰2ï¼‰å¦‚æžœä¸Šçº§ä½œç”¨åŸŸä¸­æ²¡æœ‰è¿™ä¸ªå˜é‡(æ‰¾åˆ°windowä¹Ÿæ²¡æœ‰)ï¼šå˜é‡ = å€¼ ï¼šç›¸å½“äºŽç»™windowè®¾ç½®äº†ä¸€ä¸ªå±žæ€§ï¼Œä»¥åŽå†æ“ä½œwindowä¸‹å°±æœ‰äº†alert(å˜é‡)ï¼šæƒ³è¦è¾“å‡ºè¿™ä¸ªå˜é‡ï¼Œä½†æ˜¯æ­¤æ—¶æ˜¯æ²¡æœ‰çš„ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ é—­åŒ…å‡½æ•°æ‰§è¡Œä¼šå½¢æˆä¸€ä¸ªç§æœ‰çš„ä½œç”¨åŸŸï¼Œè®©é‡Œé¢çš„ç§æœ‰å˜é‡å’Œå¤–ç•Œäº’ä¸å½±å“ï¼ˆç›¸äº’ä¸å¹²æ‰°ã€å¤–é¢çš„æ— æ³•ç›´æŽ¥èŽ·å–é‡Œé¢çš„å˜é‡å€¼ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºç§æœ‰ä½œç”¨åŸŸæŠŠç§æœ‰å˜é‡ä¿æŠ¤èµ·æ¥çš„ï¼Œæˆ‘ä»¬æŠŠè¿™ç§ä¿æŠ¤æœºåˆ¶ç§°ä¹‹ä¸ºé—­åŒ…é—­åŒ…çš„ä½œç”¨ï¼šä¿æŠ¤ï¼šç§æœ‰ä½œç”¨åŸŸæŠŠç§æœ‰å˜é‡ä¿æŠ¤èµ·æ¥çš„ä¿å­˜ï¼šå‡½æ•°æ‰§è¡Œå½¢æˆä¸€ä¸ªç§æœ‰ä½œç”¨åŸŸï¼Œå‡½æ•°æ‰§è¡Œå®Œæˆï¼Œå½¢æˆçš„è¿™ä¸ªæ ˆå†…å­˜ä¸€èˆ¬æƒ…å†µä¸‹éƒ½ä¼šè‡ªåŠ¨é‡Šæ”¾ä½†æ˜¯è¿˜æœ‰å…¶ä»–æƒ…å†µï¼šå‡½æ•°æ‰§è¡Œå®Œæˆï¼Œå½“å‰ç§æœ‰ä½œç”¨åŸŸï¼ˆæ ˆå†…å­˜ï¼‰ä¸­çš„æŸä¸€éƒ¨åˆ†å†…å®¹è¢«æ ˆå†…å­˜ä»¥å¤–çš„å…¶å®ƒä¸œè¥¿ï¼ˆå˜é‡/å…ƒç´ çš„äº‹ä»¶ï¼‰å ç”¨äº†ï¼Œå½“å‰çš„æ ˆå†…å­˜å°±ä¸èƒ½é‡Šæ”¾æŽ‰ï¼Œä¹Ÿå°±å½¢æˆäº†ä¸é”€æ¯çš„ç§æœ‰ä½œç”¨åŸŸï¼ˆé‡Œé¢çš„ç§æœ‰å˜é‡ä¹Ÿä¸ä¼šé”€æ¯ï¼‰ å †å†…å­˜æ‰€æœ‰çš„å¼•ç”¨æ•°æ®ç±»åž‹ï¼Œå®ƒä»¬éœ€è¦å­˜å‚¨çš„å†…å®¹éƒ½åœ¨å †å†…å­˜ä¸­ï¼ˆç›¸å½“äºŽä¸€ä¸ªä»“åº“ï¼Œç›®çš„æ˜¯å­˜å‚¨ä¿¡æ¯ï¼‰ å¯¹è±¡ä¼šæŠŠé”®å€¼å¯¹å­˜å‚¨è¿›æ¥å‡½æ•°ä¼šæŠŠä»£ç å½“åšå­—ç¬¦ä¸²å­˜å‚¨è¿›æ¥é‡Šæ”¾ï¼šå¦‚æžœå½“å‰çš„å †å†…å­˜è¢«å˜é‡ï¼ˆæˆ–è€…å‡½æ•°ä»¥åŠå…ƒç´ äº‹ä»¶ç­‰ï¼‰å ç”¨äº†ï¼ˆå ç”¨äº†ï¼šå †å†…å­˜åœ°å€èµ‹å€¼ç»™å˜é‡äº†ï¼‰ï¼Œæ­¤æ—¶çš„å †å†…å­˜æ˜¯æœ‰ç”¨çš„ï¼Œä¸èƒ½é”€æ¯ï¼›æˆ‘ä»¬æƒ³è¦æ‰‹åŠ¨é‡Šæ”¾å †å†…å­˜ï¼Œåªéœ€è¦è®©å­˜å‚¨åœ°å€çš„å˜é‡ç­‰äºŽå…¶å®ƒå€¼å³å¯ï¼ˆæœ€å¥½ç­‰äºŽnullï¼Œnullæ˜¯ç©ºå¯¹è±¡æŒ‡é’ˆï¼Œæœ¬æ„å°±æ˜¯ä¸æŒ‡å‘ä»»ä½•çš„å †å†…å­˜ï¼‰ï¼› å‡½æ•°ä¸­çš„å½¢å‚å’Œå®žå‚å½¢å‚ï¼šç›¸å½“äºŽå‡½æ•°æä¾›çš„å…¥å£ï¼Œéœ€è¦ç”¨æˆ·æ‰§è¡Œå‡½æ•°çš„æ—¶å€™æŠŠéœ€è¦çš„å€¼ä¼ é€’è¿›æ¥ï¼Œå½¢å‚æ˜¯ä¸ªå˜é‡ï¼Œç”¨æ¥å­˜å‚¨å’ŒæŽ¥æ”¶è¿™äº›å€¼ å®žå‚ï¼šç”¨æˆ·æ‰§è¡Œçš„æ—¶å€™ä¼ é€’ç»™å½¢å‚çš„å…·ä½“å€¼ åœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹ï¼šå‡½æ•°çš„å½¢å‚å’Œå®žå‚æœ‰ä¸€ä¸€å¯¹åº”çš„æ˜ å°„å…³ç³»ï¼›å½“æ²¡æœ‰ä¼ é€’å®žå‚æ—¶ï¼Œè¿™ç§æ˜ å°„å…³ç³»è¢«åˆ‡æ–­ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¸å­˜åœ¨æ˜ å°„å…³ç³» 123456789//=&gt;éšä¾¿æ±‚å‡ºä¸¤ä¸ªæ•°çš„å’Œfunction sum(num1,num2)&#123;//=&gt;num1/num2å°±æ˜¯å½¢å‚å˜é‡(ç±»ä¼¼äºŽvaräº†ä¸€ä¸‹)var total = num1+num2;total*=10;total=total.toFixed(2);console.log(total);&#125;sum(10,20);//-&gt;10/20æ˜¯å®žå‚ num1=10 num2=20sum(10); //-&gt;num1=10 num2=undefined å®šä¹‰äº†å½¢å‚ä½†æ˜¯æ‰§è¡Œçš„æ—¶å€™æ²¡æœ‰ä¼ é€’å®žå‚ï¼Œé»˜è®¤å®žå‚çš„å€¼æ˜¯undefined æ­¤æ—¶num2ä¸Žå®žå‚çš„æ˜ å°„å…³ç³»è¢«åˆ‡æ–­ 123456789101112function sum(num1, num2) &#123;//=&gt;å¦‚æžœæœ‰ä¸€ä¸ªå€¼æ²¡æœ‰ä¼ é€’çš„è¯,æˆ‘ä»¬ä¸ºäº†ä¿è¯ç»“æžœä¸æ˜¯NaN,æˆ‘ä»¬ä¸ºå…¶è®¾ç½®ä¸€ä¸ªé»˜è®¤çš„å€¼:0//=&gt;å®¹é”™å¤„ç†num1 = num1 || 0;num2 = num2 || 0;var total = num1 + num2;total *= 10;total = total.toFixed(2);console.log(total);&#125;sum(10, 20);//åœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°çš„ä¸¤ä¸ªå½¢å‚å¯ä»¥é‡åï¼Œä½†æ˜¯å‡½æ•°åªä¼šæŽ¥æ”¶åŽä¸€ä¸ªå‚æ•°ä¼ çš„å€¼ï¼Œå¦‚æžœåªä¼ å…¥ä¸€ä¸ªå®žå‚ï¼Œåˆ™å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå½¢å‚ä¸å¯ä»¥é‡å argumentså®žå‚é›†åˆ å½“æˆ‘ä»¬ä¸çŸ¥é“ç”¨æˆ·å…·ä½“è¦ä¼ é€’å‡ ä¸ªå€¼çš„æ—¶å€™ï¼ˆä¼ é€’å‡ ä¸ªå€¼éƒ½è¡Œï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬æ— æ³•è®¾ç½®å½¢å‚çš„ä¸ªæ•°ï¼›é‡åˆ°æ­¤ç±»éœ€æ±‚ï¼Œéœ€è¦ä½¿ç”¨å‡½æ•°å†…ç½®çš„å®žå‚é›†åˆï¼šarguments1ã€argumentsåªæœ‰å‡½æ•°æ‰æœ‰2ã€ä¸ç®¡æ‰§è¡Œå‡½æ•°çš„æ—¶å€™æ˜¯å¦ä¼ é€’å®žå‚ï¼Œargumentså¤©ç”Ÿå°±å­˜åœ¨ï¼Œæ²¡æœ‰ä¼ é€’å®žå‚ARGæ˜¯ä¸ªç©ºçš„é›†åˆï¼Œä¼ é€’äº†ARGä¸­åŒ…å«äº†æ‰€æœ‰ä¼ é€’çš„å®žå‚å€¼3ã€ä¸ç®¡æ˜¯å¦è®¾ç½®äº†å½¢å‚ï¼ŒARGä¸­å§‹ç»ˆå­˜å‚¨äº†æ‰€æœ‰çš„å®žå‚ä¿¡æ¯ argumentsæ˜¯ä¸€ä¸ªç±»æ•°ç»„é›†åˆ1ã€ä»¥æ•°å­—ä½œä¸ºç´¢å¼•(å±žæ€§å)ï¼Œä»Žé›¶å¼€å§‹arguments[0] ç¬¬ä¸€ä¸ªå®žå‚ä¿¡æ¯arguments[2] ç¬¬ä¸‰ä¸ªå®žå‚ä¿¡æ¯2ã€æœ‰ä¸€ä¸ªlengthçš„å±žæ€§ï¼Œå­˜å‚¨çš„æ˜¯å½“å‰å‡ ä¸ªçš„é•¿åº¦ï¼ˆå½“å‰ä¼ é€’å®žå‚çš„ä¸ªæ•°ï¼‰arguments.lengtharguments[â€˜lengthâ€™]arguments.calleeï¼šå­˜å‚¨çš„æ˜¯å½“å‰å‡½æ•°æœ¬èº«arguments.callee.callerï¼šå­˜å‚¨çš„æ˜¯å½“å‰å‡½æ•°åœ¨å“ªæ‰§è¡Œçš„ï¼ˆå®¿ä¸»å‡½æ•°ï¼‰ï¼Œåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹æ‰§è¡Œçš„ï¼Œç»“æžœæ˜¯null åœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œagrumentsä¸Žå½¢å‚æœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œä½†å½“æ²¡æœ‰ä¼ å…¥å®žå‚æ—¶ï¼Œè¿™ç§æ˜ å°„å…³ç³»ä¼šè¢«åˆ‡æ–­ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œagrumentsä¸Žå½¢å‚çš„æ˜ å°„å…³ç³»ä¹Ÿè¢«åˆ‡æ–­äº† 123456"use strict"; //=&gt;åœ¨JSä»£ç æ‰§è¡Œä¹‹å‰åŠ å…¥è¿™å¥è¯ï¼šå¼€å¯JSçš„ä¸¥æ ¼æ¨¡å¼function sum() &#123;console.log(arguments.callee);//=&gt;Uncaught TypeError: 'caller', 'callee', and 'arguments' properties may not be accessed on strict mode functions or the arguments objects for calls to them&#125;sum(10, 20, 'ç å³°', &#123;name: 'ç å³°'&#125;);//=&gt;arguments.calleeæˆ–è€…arguments.callee.callerä¸€èˆ¬çœŸæ­£é¡¹ç›®ä¸­å¾ˆå°‘ä½¿ç”¨ï¼šå› ä¸ºåœ¨ä¸¥æ ¼çš„JSæ¨¡å¼ä¸‹ä¸å…è®¸æˆ‘ä»¬ä½¿ç”¨è¿™ä¸¤ä¸ªå±žæ€§ï¼Œç„¶è€ŒçŽ°æœ‰é¡¹ç›®å¤§éƒ¨åˆ†éƒ½æ˜¯åŸºäºŽä¸¥æ ¼æ¨¡å¼æ¥çš„ JSä¸­çš„è¿”å›žå€¼ return è¿”å›žå€¼æ˜¯å‡½æ•°æä¾›çš„ä¸€ä¸ªå‡ºå£ï¼šæˆ‘ä»¬å¦‚æžœæƒ³åœ¨å¤–é¢ä½¿ç”¨å‡½æ•°ç§æœ‰çš„ä¸€äº›ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±éœ€è¦é€šè¿‡returnï¼ŒæŠŠè¿™äº›ä¿¡æ¯è¿”å›žå‡ºæ¥ä¾›å¤–é¢ä½¿ç”¨ - RETURNåŽé¢è·Ÿç€çš„éƒ½æ˜¯å€¼ï¼ˆè¿”å›žçš„éƒ½æ˜¯å€¼ï¼‰ å¦‚æžœå‡½æ•°ä¸­æ²¡æœ‰å†™RETURNæˆ–è€…RETURNåŽé¢å•¥ä¹Ÿæ²¡æœ‰,é»˜è®¤è¿”å›žçš„ç»“æžœå°±æ˜¯undefined åœ¨å‡½æ•°ä½“ä¸­é‡åˆ°RETURNåŽ,RETURNåŽé¢çš„ä»£ç éƒ½ä¸åœ¨æ‰§è¡Œäº†12345678function sum() &#123;var total = null;return total;//=&gt;RETURNåŽé¢è·Ÿç€çš„éƒ½æ˜¯å€¼ï¼ˆè¿”å›žçš„éƒ½æ˜¯å€¼ï¼‰ï¼šæ­¤å¤„ä¸æ˜¯æŠŠTOTALå˜é‡è¿”å›žï¼Œè€Œæ˜¯æŠŠTOTALå­˜å‚¨çš„å€¼è¿”å›žè€Œå·² &lt;=&gt; RETURN 60;//return 1+1; //&lt;=&gt; RETURN 2;&#125;console.log(sum(10, 20, 30));//=&gt;sumï¼šä»£è¡¨çš„æ˜¯å‡½æ•°æœ¬èº«//=&gt;sum()ï¼šè®©å‡½æ•°å…ˆæ‰§è¡Œ,ä»£è¡¨çš„æ˜¯å½“å‰å‡½æ•°è¿”å›žçš„ç»“æžœ(RETURN åŽé¢æ˜¯å•¥,ç›¸å½“äºŽå‡½æ•°è¿”å›žçš„æ˜¯å•¥) 12345678910function sum() &#123;var total = null;for (var i = 0; i &lt; arguments.length; i++) &#123;var cur = Number(arguments[i]);!isNaN(cur) ? total += cur : null;&#125;return total;&#125;var total = sum(10, 20, 30);//=&gt;å¤–é¢æ˜¯å…¨å±€ä¸‹çš„TOTALå’Œå‡½æ•°ä¸­çš„TOTALæ²¡æœ‰å¿…ç„¶çš„è”ç³»console.log(total.toFixed(2)); JSä¸­çš„åŒ¿åå‡½æ•°æ²¡æœ‰åå­—çš„å‡½æ•° å‡½æ•°è¡¨è¾¾å¼:æŠŠä¸€ä¸ªå‡½æ•°ä½œä¸ºå€¼èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡æˆ–æŸä¸ªäº‹ä»¶ï¼ˆå‡½æ•°è¡¨è¾¾å¼å³è¾¹çš„éƒ½æ˜¯åŒ¿åå‡½æ•°ï¼‰ è‡ªæ‰§è¡Œå‡½æ•°:åˆ›å»ºå‡½æ•°å’Œæ‰§è¡Œå‡½æ•°æ”¾åœ¨ä¸€èµ·äº†ï¼Œåˆ›å»ºå®Œæˆç«‹é©¬æ‰§è¡Œ123oBox.onclick = function()&#123;//=&gt;æŠŠä¸€ä¸ªæ²¡æœ‰åå­—çš„å‡½æ•°(æœ‰åå­—ä¹Ÿæ— æ‰€è°“)ä½œä¸ºå€¼èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡æˆ–è€…ä¸€ä¸ªå…ƒç´ çš„æŸä¸ªäº‹ä»¶ç­‰ï¼š`å‡½æ•°è¡¨è¾¾å¼`&#125; 123456789;(function(n)&#123;//=&gt;åˆ›å»ºå‡½æ•°å’Œæ‰§è¡Œå‡½æ•°æ”¾åœ¨ä¸€èµ·äº†ï¼Œåˆ›å»ºã€‚ï¼Œå®Œæˆç«‹é©¬æ‰§è¡Œï¼šÂ·è‡ªæ‰§è¡Œå‡½æ•°Â·//nå½¢å‚ n=10&#125;)(10);//=&gt;ä»¥ä¸‹éƒ½æ˜¯è‡ªæ‰§è¡Œå‡½æ•°ï¼Œç¬¦å·åªæ˜¯æŽ§åˆ¶è¯­æ³•è§„èŒƒï¼Œ~function(n)&#123;&#125;(10);-function(n)&#123;&#125;(10);+function(n)&#123;&#125;(10);!function(n)&#123;&#125;(10); å‡½æ•°çš„ä¸‰ç§è§’è‰²å’Œcallã€applyã€bind ç¬¬ä¸€ç§è§’è‰²ï¼šæ™®é€šå‡½æ•°æ ˆå†…å­˜(ç§æœ‰ä½œç”¨åŸŸ)ä½œç”¨åŸŸé“¾å½¢å‚argumentsreturn ç¬¬äºŒç§è§’è‰²ï¼šç±»ç±»å®žä¾‹ç§æœ‰å’Œå…¬æœ‰å±žæ€§prototypeproto ç¬¬ä¸‰ç§è§’è‰²ï¼šæ™®é€šå¯¹è±¡é”®å€¼å¯¹æ“ä½œ ä¸‰ç§è§’è‰²ä¹‹é—´æ²¡æœ‰ç›´æŽ¥çš„å…³ç³» 1234567function Fn()&#123;var name='ç å³°åŸ¹è®­';this.age=8;&#125;Fn.prototype.say=function()&#123;&#125;//åŽŸåž‹ä¸Šçš„æ–¹æ³•Fn.eat=function()&#123;&#125;//æ™®é€šå‡½æ•°çš„æ–¹æ³•var f = new Fn(); é˜¿é‡Œè¶…ç»å…¸é¢è¯•é¢˜ 123456789101112131415161718function Foo() &#123;getName = function () &#123;console.log(1);&#125;;return this;&#125;Foo.getName = function () &#123;console.log(2);&#125;;Foo.prototype.getName = function () &#123;console.log(3);&#125;;var getName = function () &#123;console.log(4);&#125;;function getName() &#123;console.log(5);&#125; 1234567Foo.getName(); //æ‰§è¡ŒFoo.getName è¾“å‡º2getName(); // æ‰§è¡Œvar getName è¾“å‡º4Foo().getName();//æ‰§è¡Œfunction Foo()ï¼Œï¼ˆgetNameæ˜¯å…¬æœ‰å±žæ€§ï¼Œç›¸å½“äºŽç»™getNameé‡æ–°èµ‹å€¼ï¼‰ è¾“å‡º1getName(); //ç”±äºŽä¸Šä¸€è½®çš„é‡æ–°èµ‹å€¼ï¼Œè¾“å‡º1new Foo.getName();//è¿”å›žFoo.getName()çš„ä¸€ä¸ªå®žä¾‹ï¼Œè¾“å‡º2new Foo().getName();//å…ˆnew Foo()ï¼Œè¿”å›žfooçš„ä¸€ä¸ªå®žä¾‹ï¼Œåœ¨æ‰§è¡Œå®žä¾‹.getName()ï¼Œ=ã€‹3ï¼›new new Foo().getName();// å…ˆnew Foo()ï¼Œè¿”å›žfooçš„ä¸€ä¸ªå®žä¾‹ï¼Œå†è¿”å›žthis.getNameï¼ˆï¼‰çš„ä¸€ä¸ªå®žä¾‹ ï¼Œ3ï¼› call apply bindéƒ½æ˜¯å¤©ç”Ÿè‡ªå¸¦çš„æ–¹æ³•(Function.prototype)ï¼Œæ‰€æœ‰çš„å‡½æ•°éƒ½å¯ä»¥è°ƒå–è¿™ä¸‰ä¸ªæ–¹æ³• ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯æ”¹å˜THISæŒ‡å‘çš„ call fn.call(context,para1,â€¦)æŠŠfnæ–¹æ³•ç«‹å³æ‰§è¡Œï¼Œå¹¶ä¸”è®©fnæ–¹æ³•ä¸­çš„thiså˜ä¸ºcontext,è€Œpara1â€¦éƒ½æ˜¯ç»™fnä¼ é€’çš„å®žå‚ 123456789101112131415161718192021//=&gt;éžä¸¥æ ¼æ¨¡å¼function fn(num1,num2)&#123;console.log(this);&#125;var obj=&#123;fn:fn&#125;;fn();//=&gt;this:windowobj.fn();//=&gt;this:objvar opp=&#123;&#125;;//opp.fn();//=&gt;æŠ¥é”™:oppä¸­æ²¡æœ‰fnè¿™ä¸ªå±žæ€§fn.call(opp);//=&gt;this:opp num1&amp;&amp;num2éƒ½æ˜¯undefinedfn.call(1,2);//=&gt;this:1 num1=2 num2=undefinedfn.call(opp,1,2);//=&gt;this:opp num1=1 num2=2//-&gt;CALLæ–¹æ³•çš„å‡ ä¸ªç‰¹æ®Šæ€§fn.call();//=&gt;this:window num1&amp;&amp;num2éƒ½æ˜¯undefinedfn.call(null);//=&gt;this:windowfn.call(undefined);//=&gt;this:window//=&gt;JSä¸¥æ ¼æ¨¡å¼ä¸‹"use strict";fn.call();//=&gt;this:undefinedfn.call(undefined);//=&gt;this:undefinedfn.call(null);//=&gt;this:null apply applyçš„è¯­æ³•å’ŒcallåŸºæœ¬ä¸€è‡´ï¼Œä½œç”¨åŽŸç†ä¹ŸåŸºæœ¬ä¸€è‡´ï¼Œå”¯ä¸€çš„åŒºåˆ«ï¼šapplyæŠŠä¼ é€’ç»™å‡½æ•°çš„å®žå‚ä»¥æ•°ç»„å½¢å¼å­˜æ”¾ï¼ˆä½†æ˜¯ä¹Ÿç›¸å½“äºŽåœ¨ç»™å‡½æ•°ä¸€ä¸ªä¸ªçš„ä¼ é€’å®žå‚å€¼ï¼‰ 1fn.call(null,10,20,30); 1fn.apply(null,[10,20,30]); //=&gt;ä¼ é€’ç»™fnçš„æ—¶å€™ä¹Ÿæ˜¯ä¸€ä¸ªä¸ªçš„ä¼ é€’è¿›åŽ»çš„ bind ä¹Ÿæ˜¯æ”¹å˜THISçš„æ–¹æ³•ï¼Œå®ƒåœ¨IE6~8ä¸‹ä¸å…¼å®¹ï¼›å®ƒå’Œcall(ä»¥åŠapply)æ”¹å˜thisçš„åŽŸç†ä¸ä¸€æ · 12345678910111213141516fn.call(opp,10,20); //=&gt;æŠŠfnæ‰§è¡Œ,è®©fnä¸­çš„thiså˜ä¸ºopp,å¹¶ä¸”æŠŠ10&amp;&amp;20åˆ†åˆ«ä¼ é€’ç»™fnfn.bind(opp,10,20); //=&gt;é¢„å…ˆè®©fnä¸­çš„thisæŒ‡å‘opp,å¹¶ä¸”æŠŠ10å’Œ20é¢„å…ˆä¼ é€’ç»™fn,æ­¤æ—¶çš„fnæ²¡æœ‰è¢«æ‰§è¡Œ(åªæœ‰å½“æ‰§è¡Œçš„æ—¶å€™thiså’Œå®žå‚æ‰ä¼šèµ·åˆ°åº”æœ‰çš„ä½œç”¨)//=&gt;éœ€æ±‚ï¼šç‚¹å‡»boxè¿™ä¸ªç›’å­çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œfnï¼Œå¹¶ä¸”è®©fnä¸­çš„thisæŒ‡å‘oppoBox.onclick=fn; //=&gt;ç‚¹å‡»çš„æ—¶å€™æ‰§è¡Œäº†fn,ä½†æ­¤æ—¶fnä¸­çš„thisæ˜¯oBoxoBox.onclick=fn.call(opp); //=&gt;ç»‘å®šäº‹ä»¶çš„æ—¶å€™å°±å·²ç»æŠŠfnç«‹å³æ‰§è¡Œäº†(callæœ¬èº«å°±æ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°),ç„¶åŽæŠŠfnæ‰§è¡Œçš„è¿”å›žå€¼ç»‘å®šç»™äº‹ä»¶oBox.onclick=fn.bind(opp);//=&gt;fn.bind(opp)ï¼šfnè°ƒå–Function.prototypeä¸Šçš„bindæ–¹æ³•ï¼Œæ‰§è¡Œè¿™ä¸ªæ–¹æ³•è¿”å›žäº†ä¸€ä¸ªåŒ¿åå‡½æ•°/** function()&#123;* fn.call(opp);* &#125;*/oBox.onclick=function()&#123;//=&gt;this:oBoxfn.call(opp);&#125; å›žè°ƒå‡½æ•° å‡¡æ˜¯åœ¨å‡½æ•°æ‰§è¡Œçš„æŸä¸€é˜¶æ®µéœ€è¦å®ŒæˆæŸä»¶ä¸ç¡®å®šçš„äº‹æƒ…ï¼Œå¯ä»¥åˆ©ç”¨å›žåˆ°å‡½æ•°æœºåˆ¶ï¼ŒæŠŠè¦å¤„ç†çš„äº‹æƒ…å½“åšå‡½æ•°ä¼ è¿›æ¥ï¼Œä¼ è¿›æ¥çš„è¿™ä¸ªå‚æ•°å°±æ˜¯å›žè°ƒå‡½æ•° æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°ä¸­æ ¹æ®éœ€è¦éšæ—¶ä½¿ç”¨å›žè°ƒå‡½æ•° æˆ‘ä»¬è¿˜å¯ä»¥ç»™å›žè°ƒå‡½æ•°ä¼ é€’å‚æ•° æˆ‘ä»¬è¿˜å¯ä»¥æŠŠå›žè°ƒå‡½æ•°ä¸­çš„thisè¿›è¡Œä¿®æ”¹ æˆ‘ä»¬è¿˜å¯ä»¥æŽ¥æ”¶å›žè°ƒå‡½æ•°çš„è¿”å›žå€¼ å›žè°ƒå‡½æ•°çš„thisæŒ‡å‘å›žè°ƒå‡½æ•°ä¸­çš„thisä¸€èˆ¬éƒ½æ˜¯windowï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯undefinedï¼‰setTimeout&amp;&amp;setIntervalé»˜è®¤æ‰§è¡Œä¸»ä½“éƒ½æ˜¯windowï¼Œï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¹Ÿæ˜¯åŒæ ·çš„ï¼‰ forEachå’Œmapå½“ä¼ ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œä¼šæ”¹å˜thisæŒ‡å‘ï¼Œthisä¼šæŒ‡å‘ä¼ é€’çš„ç¬¬äºŒä¸ªå‚æ•°(some.filter,find,everyè¿™äº›æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°éƒ½æ˜¯æ”¹å˜thisæŒ‡å‘çš„) æˆ‘ä»¬ä¸€èˆ¬åœ¨æ‰§è¡Œå›žè°ƒå‡½æ•°çš„æ—¶å€™ï¼Œæ²¡æœ‰ç‰¹æ„æŒ‡å®šæ‰§è¡Œä¸»ä½“ï¼Œæ‰€ä»¥é»˜è®¤ä¸€èˆ¬éƒ½æ˜¯windowã€‚]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSåŸºç¡€ï¼ˆä¸€ï¼‰æ•°æ®ç±»åž‹åŸºæœ¬ä»‹ç»ï¼Œæ£€æµ‹æ•°æ®ç±»åž‹ç«¯æ–¹æ³•ç®€ä»‹]]></title>
    <url>%2Fposts%2Fd035ffec.html</url>
    <content type="text"><![CDATA[åŸºç¡€çŸ¥è¯† ECMAScript(ES)ï¼šè§„å®šäº†JSçš„ä¸€äº›åŸºç¡€æ ¸å¿ƒçš„çŸ¥è¯†ï¼ˆå˜é‡ã€æ•°æ®ç±»åž‹ã€è¯­æ³•è§„èŒƒã€æ“ä½œè¯­å¥ç­‰ï¼‰DOMï¼šdocument object model æ–‡æ¡£å¯¹è±¡æ¨¡åž‹ï¼Œé‡Œé¢æä¾›äº†ä¸€äº›å±žæ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ“ä½œé¡µé¢ä¸­çš„å…ƒç´ BOMï¼šbrowser object model æµè§ˆå™¨å¯¹è±¡æ¨¡åž‹ï¼Œé‡Œé¢æä¾›äº†ä¸€äº›å±žæ€§å’Œæ–¹æ³•ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ“ä½œæµè§ˆå™¨ å¸¸ç”¨æµè§ˆå™¨å†…æ ¸æµè§ˆå™¨çš„å†…æ ¸æ˜¯åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†çš„ï¼Œä¸€æ˜¯æ¸²æŸ“å¼•æ“Žï¼Œå¦ä¸€ä¸ªæ˜¯JSå¼•æ“Žã€‚çŽ°åœ¨JSå¼•æ“Žæ¯”è¾ƒç‹¬ç«‹ï¼Œå†…æ ¸æ›´åŠ å€¾å‘äºŽè¯´æ¸²æŸ“å¼•æ“Žã€‚ webkitå†…æ ¸ï¼ˆV8å¼•æ“Žï¼‰ è°·æ­Œ å¤§éƒ¨åˆ†ç§»åŠ¨ç«¯æµè§ˆå™¨ å›½å†…å¤§éƒ¨åˆ†æµè§ˆå™¨ 360 QQ UC çŒŽè±¹ æœç‹— NODEåŸºäºŽV8æ¥æ¸²æŸ“JS Gecko ç«ç‹æµè§ˆå™¨ Presto æ¬§æœ‹æµè§ˆå™¨ Trident IEæµè§ˆå™¨ æ•°æ®ç±»åž‹çš„åˆ†ç±»å’Œæ£€æµ‹ Number String bloean null:ç©ºå¯¹è±¡æŒ‡é’ˆåŸºç¡€ undefined:æœªå®šä¹‰ function å‡½æ•°ç±»åž‹ objectå¯¹è±¡æ•°æ®ç±»åž‹: {}æ™®é€šå¯¹è±¡ æ•°ç»„ /$/ æ­£åˆ™ [å¯¹è±¡æ•°æ®ç±»åž‹:æ˜¯æŠŠæè¿°åŒä¸€äº‹ç‰©çš„å±žæ€§å’Œæ–¹æ³•æ”¾åœ¨ä¸€ä¸ªå†…å­˜ç©ºé—´ä¸­ï¼Œèµ·åˆ°äº†åˆ†ç»„çš„ä½œç”¨] æ£€æµ‹æ•°æ®ç±»åž‹ typeof:æ£€æµ‹æ•°æ®ç±»åž‹çš„è¿ç®—ç¬¦ instanceof:æ£€æµ‹æŸä¸ªå®žä¾‹æ˜¯å¦å±žäºŽè¿™ä¸ªç±» constructor:èŽ·å–å½“å‰å®žä¾‹çš„æž„é€ å™¨ Object.prototype.toString.call:èŽ·å–å½“å‰å®žä¾‹æ‰€å±žçš„ç±»ä¿¡æ¯ typeofï¼šç»“æžœè¿”å›žçš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²å†…åŒ…å«çš„æ˜¯æ•°æ®ç±»åž‹ typeof çš„å±€é™æ€§ typeof null çš„æ£€æµ‹ç»“æžœä¸æ˜¯â€˜nullâ€™ è€Œæ˜¯â€™objectâ€™: è€Œnullæ˜¯åŸºæœ¬æ•°æ®ç±»åž‹ ï¼Œå¹¶ä¸æ˜¯object ä½¿ç”¨typeof æ— æ³•å…·ä½“åŒºåˆ†å‡ºåˆ°åº•æ˜¯æ•°ç»„è¿˜æ˜¯æ­£åˆ™æˆ–æ™®é€šå¯¹è±¡ Boolean æŠŠå…¶ä»–ç±»åž‹è½¬æ¢ä¸ºå¸ƒå°”ç±»åž‹ åªæœ‰0ï¼ŒNaN,ç©ºå­—ç¬¦ä¸²ã€nullã€undefinedä¸ºfalse;å…¶ä½™éƒ½æ˜¯true; ! æˆ–è€… !!çš„æ„ä¹‰ ! ï¼šå…ˆå°†æ•°æ®ç±»åž‹è½¬åŒ–ä¸ºå¸ƒå°”å€¼ï¼Œå†å–å !! ï¼šä¸¤æ¬¡å–åç›¸å½“äºŽæ²¡æœ‰å–åï¼Œåªæ˜¯æŠŠæ•°æ®ç±»åž‹è½¬åŒ–ä¸ºå¸ƒå°”ç±»åž‹12!null =&gt; true!!undefined =&gt;false Number[NaN] jsä¸­æ–°å¢žäº†ä¸€ä¸ªæ•°æ®ç±»åž‹ï¼šNaNï¼ˆnot a number ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ•°å­—ï¼Œä½†æ˜¯å±žäºŽnumberï¼‰ typeof NaN =&gt;â€™numberâ€™ NaN!=NaN NaNå’Œä»»ä½•å€¼éƒ½ä¸ç­‰ [isNaN] isNaN:ç”¨æ¥æ£€æµ‹è¿™ä¸ªå€¼æ˜¯å¦æ˜¯æœ‰æ•ˆæ•°å­—ï¼Œå¦‚æžœä¸æ˜¯ï¼Œåˆ™ä¸ºtrue,åä¹‹ï¼Œåˆ™ä¸ºfalse å½“æ—¶ä½¿ç”¨isNaNæ£€æµ‹æ—¶ï¼Œï¼ˆï¼‰ä¸­å¦‚æžœä¸æ˜¯numberç±»åž‹ï¼š åŸºæœ¬æ•°æ®ç±»åž‹ï¼šå…ˆå°†å…¶ä»–ç±»åž‹å€¼è½¬åŒ–ä¸ºNumberç±»åž‹å€¼å†è¿ç®— å¯¹è±¡æ•°æ®ç±»åž‹ï¼šå…ˆå°†å¯¹å…¶è°ƒç”¨toStringæ–¹æ³•ï¼Œå†è½¬åŒ–ä¸ºNumberç±»åž‹å€¼ [Number] ä½¿ç”¨NumberæŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„æ—¶å€™ï¼Œç©ºå­—ç¬¦ä¸²æ˜¯é›¶ï¼Œå…¶å®ƒå­—ç¬¦ä¸²ä¸­å¦‚æžœå‡ºçŽ°çš„å­—ç¬¦ä»£è¡¨çº¯æ•°å­—å¯ä»¥è½¬ä¸ºæ­£å¸¸çš„æ•°å­—ï¼Œå¦‚æžœå‡ºçŽ°äº†ä»»ä½•ä¸€ä¸ªéžæœ‰æ•ˆæ•°å­—çš„å­—ç¬¦ï¼Œæœ€åŽçš„ç»“æžœéƒ½æ˜¯NaN å°†å¼•ç”¨ç±»åž‹è½¬åŒ–æ•°æ®ç±»åž‹æ—¶ï¼Œå…ˆå°†å…¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼ŒåŽå†è½¬åŒ–ä¸ºnumber; 123(&#123;name:'zxt'&#125;).toString() =&gt;"[object Object]"Number(undefined) =&gt;NaN[parseInt()] å°†å…¶ä»–ç±»åž‹å€¼è½¬æ¢number,å’ŒNumberä¸åŒï¼Œæå–è§„åˆ™ï¼šä»Žå·¦è‡³å³ä¾æ¬¡æŸ¥æ‰¾æœ‰æ•ˆæ•°å­—å­—ç¬¦ï¼Œç›´åˆ°é‡è§éžæœ‰æ•ˆå­—ç¬¦ä¸ºæ­¢(ä¸ç®¡åŽé¢è¿˜æœ‰æ²¡æ•°å­—) 123parseInt(â€˜12pxâ€™) =&gt;12parseInt(â€˜px1â€™) =&gt;NaN parseInt(â€˜122.3â€™) =&gt;122 [parseFloat()]ä¸ŽparseIntä¸åŒçš„æ˜¯æ”¯æŒå°æ•° parseFloat(â€˜12.34pxcâ€™)= 12.34ç”±äºŽæµ®ç‚¹æ•°ä¸æ˜¯ç²¾ç¡®çš„å€¼ï¼Œæ‰€ä»¥æ¶‰åŠå°æ•°çš„æ¯”è¾ƒå’Œè¿ç®—è¦ç‰¹åˆ«å°å¿ƒ 123450.1 + 0.2 === 0.3// false0.3 / 0.1// 2.9999999999999996[toFixed()] æŽ§åˆ¶æ•°å­—ä¿ç•™å°æ•°ç‚¹åŽé¢å‡ ä½ 12345678910var num = parseFloat('width:12.5px'); //=&gt;NaNif(num==12.5)&#123; alert(12.5); &#125;else if(num==NaN)&#123;//=&gt; NaN!=NaN alert(NaN); &#125;else if(typeof num=='number')&#123;//=&gt; typeof NaN-&gt;'number' alert(0);//=&gt;'0' &#125;else&#123; alert('å•¥ä¹Ÿä¸æ˜¯!'); &#125; null å’Œ undefinednull: æ²¡æœ‰,æ²¡æœ‰å¼€è¾Ÿå†…å­˜ç©ºé—´undefined: æœªå®šä¹‰â€œâ€ : ç©ºå­—ç¬¦ä¸²ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œä½†æ˜¯å¼€è¾Ÿäº†å†…å­˜ç©ºé—´ nullï¼šä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯è‡ªå·±æ‰‹åŠ¨èµ‹å€¼çš„ï¼ŒåŽæœŸå†è‡ªå·±èµ‹å€¼unfefinedï¼šå®Œå…¨ä¸åœ¨é¢„æœŸä¹‹å†… Objectå¯¹è±¡æ˜¯ç”±0åˆ°å¤šç»„é”®å€¼å¯¹ç»„æˆçš„ï¼Œæ¯ä¸€ç»„ä¹‹é—´ç”¨é€—å·åˆ†ç¦» æ¯ä¸€ä¸ªå¯¹è±¡æ•°æ®ç±»åž‹ï¼Œéƒ½æ˜¯æœ‰0åˆ°å¤šç»„çš„å±žæ€§åå’Œå±žæ€§å€¼ç»„æˆçš„å±žæ€§åï¼šæè¿°å½“å‰å¯¹è±¡å…·å¤‡çš„æŸäº›ç‰¹å¾ï¼ˆæ•°å­—/å­—ç¬¦ä¸²æ ¼å¼ï¼‰å±žæ€§å€¼ï¼šå…·ä½“ç‰¹å¾çš„å€¼ï¼ˆä»»ä½•æ•°æ®ç±»åž‹ï¼‰æ“ä½œä¸€ä¸ªå¯¹è±¡çš„å±žæ€§æœ‰2ç§æ–¹å¼obj[â€˜keyâ€™]obj.key(å±žæ€§åæ˜¯æ•°å­—ä¸å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•) åˆ›å»ºå¯¹è±¡ å­—é¢é‡æ–¹å¼ï¼švar obj={}æž„é€ å‡½æ•°æ–¹å¼ï¼švar obj=new Object(); å¯¹è±¡é”®å€¼å¯¹çš„æ“ä½œï¼šå¢žã€åˆ ã€æ”¹ã€æŸ¥ var obj = {};obj.name = â€˜zxtâ€™;//=&gt;å¢žåŠ ä¸€ä¸ªå«åšNAMEçš„å±žæ€§,å±žæ€§å€¼æ˜¯:â€™zxtâ€™obj[â€˜nameâ€™] = 29;//=&gt;ä¿®æ”¹NAMEå¯¹åº”çš„å±žæ€§å€¼ï¼šä¸€ä¸ªå¯¹è±¡çš„å±žæ€§åæ˜¯ä¸èƒ½é‡å¤çš„ï¼Œä¹‹å‰æ²¡æœ‰è¿™ä¸ªå±žæ€§ï¼Œæˆ‘ä»¬çš„æ“ä½œæ˜¯å¢žåŠ æ“ä½œï¼Œä¹‹å‰æœ‰è¿™ä¸ªå±žæ€§ï¼Œå½“å‰æ“ä½œå°±æ˜¯åœ¨ä¿®æ”¹çŽ°æœ‰å±žæ€§åçš„å±žæ€§å€¼obj.age = null; //=&gt;å‡åˆ é™¤ï¼šæŠŠå±žæ€§å€¼è®¾ç½®ä¸ºç©ºï¼Œä½†æ˜¯å±žæ€§åæ˜¯å­˜åœ¨çš„ &lt;=&gt; obj[â€˜ageâ€™] = null =&gt;èŽ·å–ageçš„å±žæ€§å€¼ç»“æžœæ˜¯nulldelete obj.age;//=&gt;çœŸåˆ é™¤ï¼šæŠŠå±žæ€§åå’Œå±žæ€§å€¼å½»åº•ä»Žå¯¹è±¡ä¸­ç§»é™¤æŽ‰ =&gt;èŽ·å–ageçš„å±žæ€§å€¼ç»“æžœæ˜¯undefinedèŽ·å–ä¸€ä¸ªå¯¹è±¡æŸä¸€ä¸ªå±žæ€§åå¯¹åº”çš„å±žæ€§å€¼ï¼Œå¦‚æžœå½“å‰è¿™ä¸ªå±žæ€§åœ¨å¯¹è±¡ä¸­å¹¶ä¸å­˜åœ¨ï¼ŒèŽ·å–çš„ç»“æžœæ˜¯undefined obj[name]å’Œobj[â€˜nameâ€™]çš„åŒºåˆ« //-&gt; ageï¼šå˜é‡åï¼Œä»£è¡¨çš„æ˜¯å®ƒå­˜å‚¨çš„å€¼//-&gt; â€˜ageâ€™ï¼šå¸¸é‡ï¼Œå­—ç¬¦ä¸²çš„å…·ä½“å€¼var age = â€˜nameâ€™;var obj = {name:â€™zhufengâ€™,age:8};console.log(obj.age); =&gt;8console.log(obj[â€˜ageâ€™]); =&gt;8console.log(obj[age]); =&gt; obj[ageå˜é‡] =&gt;obj[â€˜nameâ€™] =&gt;èŽ·å–nameå±žæ€§åçš„å±žæ€§å€¼ =&gt;â€™zhufengâ€™ Object.keys: Object.keys è¿”å›žä¸€ä¸ªæ‰€æœ‰å…ƒç´ ä¸ºå­—ç¬¦ä¸²çš„æ•°ç»„ï¼Œå…¶å…ƒç´ æ¥è‡ªäºŽä»Žç»™å®šçš„å¯¹è±¡ä¸Šé¢å¯ç›´æŽ¥æžšä¸¾çš„å±žæ€§ã€‚è¿™äº›å±žæ€§çš„é¡ºåºä¸Žæ‰‹åŠ¨éåŽ†è¯¥å¯¹è±¡å±žæ€§æ—¶çš„ä¸€è‡´ã€‚å¯ä»¥ç”¨æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºç©ºï¼šObject.keys(obj).length let obj = { 0 : â€œaâ€, 1 : â€œbâ€, 2 : â€œcâ€};console.log(Object.keys(obj));// [â€˜0â€™, â€˜1â€™, â€˜2â€™] å‡½æ•°æ•°æ®ç±»åž‹ å‡½æ•°æ•°æ®ç±»åž‹ä¹Ÿæ˜¯æŒ‰ç…§å¼•ç”¨åœ°å€æ¥æ“ä½œçš„ å‡½æ•°ï¼šå…·å¤‡ä¸€å®šåŠŸèƒ½çš„æ–¹æ³• åŸºæœ¬æ•°æ®ç±»åž‹å’Œå¼•ç”¨æ•°æ®ç±»åž‹çš„åŒºåˆ« JSæ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„ï¼ˆå†…æ ¸å¼•æ“Žï¼‰ï¼Œæµè§ˆå™¨ä¼šç»™JSæä¾›ä¸€ä¸ªèµ–ä»¥ç”Ÿå­˜çš„çŽ¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠè¿™ä¸ªçŽ¯å¢ƒå«åšå…¨å±€ä½œç”¨åŸŸ window(globalæ˜¯åŽå°çš„) JSä»£ç æ˜¯è‡ªä¸Šè€Œä¸‹ä¾æ¬¡æ‰§è¡Œçš„ åŸºæœ¬æ•°æ®ç±»åž‹æ˜¯æŒ‰å€¼æ“ä½œçš„ï¼šåŸºæœ¬æ•°æ®ç±»åž‹å†èµ‹å€¼æ—¶ï¼Œæ˜¯ç›´æŽ¥æŠŠå€¼èµ‹å€¼ç»™å˜é‡å³å¯ var a=12;var b=a; // b=12 æŠŠå˜é‡aå­˜çš„å€¼èµ‹å€¼ç»™å˜é‡bb=13;alert(a); //a=12 å¼•ç”¨æ•°æ®ç±»åž‹æ˜¯æŒ‰ç©ºé—´åœ°å€ï¼ˆå¼•ç”¨åœ°å€ï¼‰æ¥æ“ä½œçš„ï¼š var n={name:â€™ä¸»åŠ¨â€™}ï¼›1ã€å…ˆåˆ›å»ºä¸€ä¸ªå˜é‡n;2.æµè§ˆå™¨é¦–å…ˆä¼šå¼€è¾Ÿä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼ˆå†…å­˜ç©ºé—´ï¼‰ï¼Œæ˜¯æŠŠå¯¹è±¡ä¸­éœ€è¦å­˜å‚¨çš„é”®å€¼å¯¹åˆ†åˆ«å­˜å‚¨åœ¨è¿™ä¸ªç©ºé—´ä¸­ï¼ŒåŽæœŸä¸ºäº†æ–¹ä¾¿æ‰¾åˆ°è¿™ä¸ªç©ºé—´ï¼Œæµè§ˆå™¨ä¼šç»™ç©ºé—´è®¾ä¸ªåœ°å€ï¼ˆ16è¿›åˆ¶ï¼‰ï¼›3ã€æŠŠç©ºé—´çš„åœ°å€èµ‹å€¼ç»™å˜é‡;æ‰€ä»¥nå­˜å‚¨çš„æ˜¯ä¸€ä¸ªå¼•ç”¨åœ°å€ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„å€¼ &amp;&amp;é€»è¾‘ä¸Ž||é€»è¾‘æˆ– åœ¨æ¡ä»¶åˆ¤æ–­ä¸­&amp;&amp;ï¼šæ‰€æœ‰éƒ½ä¸ºçœŸï¼Œæ‰æ˜¯çœŸ||ï¼šåªè¦ä¸€ä¸ªä¸ºçœŸï¼Œå°±æ˜¯çœŸ åœ¨èµ‹å€¼æ“ä½œä¸­ (çŸ­è·¯æ“ä½œ)||: a||b;çœ‹açš„çœŸå‡ï¼Œaä¸ºçœŸï¼Œåˆ™è¿”å›žaçš„å€¼ï¼Œaä¸ºå‡ï¼Œåˆ™è¿”å›žb,ä¸ç®¡bæ˜¯ä»€ä¹ˆ&amp;&amp;ï¼ša&amp;&amp;b, aä¸ºå‡ï¼Œåˆ™è¿”å›žaçš„å€¼ï¼Œaä¸ºçœŸï¼Œåˆ™è¿”å›žb,ä¸ç®¡bæ˜¯ä»€ä¹ˆçœŸå®žé¡¹ç›®ä¸­åº”ç”¨é€»è¾‘æˆ–å®žçŽ°é»˜è®¤å€¼çš„è®¾ç½®æ“ä½œ é€»è¾‘ä¸Žçš„ä¼˜å…ˆæƒé«˜äºŽé€»è¾‘æˆ– JavaScriptå¸¸ç”¨çš„æ“ä½œè¯­å¥ é€šè¿‡ä¸€ç³»åˆ—çš„é€»è¾‘åˆ¤æ–­ï¼Œæ¥å®Œæˆç‰¹å®šçš„äº‹æƒ…forå¾ªçŽ¯ifå¾ªçŽ¯:å½“åœ¨åˆ¤æ–­çš„æ“ä½œä¸­,å¾ˆå¤šæ¡ä»¶éƒ½æ˜¯ç¬¦åˆçš„,æ‰§è¡Œå®Œæˆç¬¬ä¸€ä¸ªç¬¦åˆçš„æ¡ä»¶åŽ,åŽé¢çš„æ¡ä»¶ä¸ç®¡æ˜¯å¦ç¬¦åˆéƒ½ä¸åœ¨å¤„ç†äº† for in å¾ªçŽ¯ç”¨æ¥éåŽ†ï¼ˆå¾ªçŽ¯ï¼‰å¯¹è±¡é”®å€¼å¯¹çš„, â€˜å¾ªçŽ¯æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹â€™, â€˜æ¡ä»¶ï¼Ÿæ¡ä»¶æˆç«‹æ‰§è¡Œï¼šæ¡ä»¶ä¸æˆæ‰§è¡Œï¼›, æ‰§è¡Œæ­¥éª¤ï¼š keyå­˜å‚¨çš„å€¼éƒ½æ˜¯å­—ç¬¦ä¸²æ ¼å¼ï¼Œkeyä¸­å­˜çš„æ˜¯å±žæ€§ååœ¨for in å¾ªçŽ¯éåŽ†æ—¶ï¼Œå¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ˜¯å…ˆæŠŠå¯¹è±¡ä¸­çš„é”®å€¼å¯¹è¿›è¡ŒæŽ’åºï¼ˆæ•´æ•°æ•°å­—åœ¨å‰ï¼Œç”±å°åˆ°å¤§ï¼Œå…¶ä½™æŒ‰åŽŸæ¥ç¼–å†™é¡ºåºæŽ’åˆ—ï¼‰ï¼ˆå°æ•°ç®—ä½œå­—æ¯ï¼Œä¸ç®—æ•°å­—ï¼‰for inå¾ªçŽ¯ä¼šéåŽ†å¯¹è±¡åŽŸåž‹ä¸Šçš„æ–¹æ³•itin [Tab] for in å¾ªçŽ¯å¿«æ·é”® ä¸‰å…ƒè¿ç®—ç¬¦ [â€˜æ¡ä»¶ï¼Ÿæ¡ä»¶æˆç«‹æ‰§è¡Œï¼šæ¡ä»¶ä¸æˆæ‰§è¡Œï¼›]æ˜¯ç®€å•çš„ifã€elseçš„å¦å¤–ä¸€ç§å†™æ³•å¦‚æžœæŸç§æƒ…å†µå¹¶ä¸éœ€è¦åšå¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨null,undefined,void 0å ä½å³å¯æŸä¸€æƒ…å†µæ‰§è¡Œå¤šæ¡æ“ä½œï¼Œä½¿ç”¨ï¼ˆï¼‰åŒ…èµ·æ¥ï¼Œæ¯ä¸€é¡¹å¤„ç†çš„äº‹æƒ…ä¹‹é—´ç”¨é€—å·åˆ†éš”åœ¨ä¸‰å…ƒè¿ç®—ç¬¦ä¸­ä¸èƒ½å‡ºçŽ° break/continue/returnä¼šå‡ºçŽ° SyntaxErrorr è¯­æ³•é”™è¯¯ switch case ä¹Ÿæ˜¯if elseæŸç§ç‰¹å®šæƒ…å†µçš„ç®€å†™ï¼Œå¯ä»¥åœ¨switch è¯­å¥ä¸­ä½¿ç”¨ä»»ä½•æ•°æ®ç±»åž‹ï¼ˆåœ¨å¾ˆå¤šå…¶ä»–è¯­è¨€ä¸­åªèƒ½ä½¿ç”¨æ•°å€¼ï¼‰ï¼Œæ— è®ºæ˜¯å­—ç¬¦ä¸²ï¼Œè¿˜æ˜¯å¯¹è±¡éƒ½æ²¡æœ‰é—®é¢˜ã€‚å…¶æ¬¡ï¼Œæ¯ä¸ª case çš„å€¼ä¸ä¸€å®šæ˜¯å¸¸é‡ï¼Œå¯ä»¥æ˜¯å˜é‡ï¼Œç”šè‡³æ˜¯è¡¨è¾¾å¼ã€‚æ¯ä¸€ç§caseæƒ…å†µç»“æŸéƒ½éœ€è¦åŠ breakï¼Œè¾¾åˆ°æ¡ä»¶æˆç«‹å¤„ç†å®Œæˆï¼Œè·³å‡ºå½“å‰åˆ¤æ–­æ¯ä¸€ç§caseæƒ…å†µçš„æ¯”è¾ƒéƒ½æ˜¯ä½¿ç”¨===è¿›è¡Œæ¯”è¾ƒçš„ï¼šç»å¯¹ç›¸ç­‰ =ï¼šèµ‹å€¼ï¼Œå˜é‡=å€¼==ï¼šæ¯”è¾ƒï¼Œå€¼==å€¼ç»å¯¹æ¯”è¾ƒï¼Œå€¼=== å¦‚æžœå·¦å³ä¸¤è¾¹æ¯”è¾ƒçš„å€¼æ˜¯ç›¸åŒç±»åž‹çš„ï¼Œé‚£ä¹ˆç›´æŽ¥æ¯”è¾ƒå†…å®¹æ˜¯å¦ä¸€æ ·å³å¯ï¼›å¦‚æžœä¸¤è¾¹å€¼çš„ç±»åž‹ä¸ä¸€æ ·ï¼Œ==å’Œ===æ˜¯æœ‰åŒºåˆ«çš„ï¼š===ç±»åž‹ä¸ä¸€æ ·ï¼Œæœ€åŽçš„ç»“æžœå°±æ˜¯falseï¼Œæ›´åŠ çš„ä¸¥è°¨==ç±»åž‹ä¸ä¸€æ ·ï¼Œæµè§ˆå™¨é¦–å…ˆä¼šé»˜è®¤çš„æŠŠç±»åž‹è½¬åŒ–ä¸ºä¸€æ ·çš„ï¼Œç„¶åŽå†æ¯”è¾ƒå†…å®¹ï¼Œç›¸å¯¹æ¾æ•£ä¸€äº› forå¾ªçŽ¯è¯­å¥for(åˆå§‹å€¼;éªŒè¯æ¡ä»¶;æ­¥é•¿ç´¯åŠ ){ å¾ªçŽ¯ä½“} è®¾ç½®åˆå§‹å€¼éªŒè¯æ¡ä»¶æ¡ä»¶æˆç«‹æ‰§è¡Œå¾ªçŽ¯ä½“ï¼Œå¦åˆ™æŽ¨å‡ºå¾ªçŽ¯æ­¥é•¿ç´¯åŠ éªŒè¯æ¡ä»¶Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·æ²¡æœ‰æ­¥é•¿ç´¯åŠ ä¼šé™·å…¥æ­»å¾ªçŽ¯ forå¾ªçŽ¯ä¸Žfor inå¾ªçŽ¯çš„åŒºåˆ«ï¼šfor in å¾ªçŽ¯å¯ä»¥éåŽ†åˆ°åŽŸåž‹ä¸Šçš„å…¬æœ‰å±žæ€§ï¼Œè€Œforå¾ªçŽ¯åªèƒ½éåŽ†ç§æœ‰çš„å±žæ€§]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€ä»½éžå¸¸å®Œæ•´çš„MySQLè§„èŒƒ]]></title>
    <url>%2Fposts%2Ff4255724.html</url>
    <content type="text"><![CDATA[ä¸€ã€æ•°æ®åº“å‘½ä»¤è§„èŒƒ äºŒã€æ•°æ®åº“åŸºæœ¬è®¾è®¡è§„èŒƒ ä¸‰ã€æ•°æ®åº“å­—æ®µè®¾è®¡è§„èŒƒ å››ã€ç´¢å¼•è®¾è®¡è§„èŒƒ äº”ã€å¸¸è§ç´¢å¼•åˆ—å»ºè®® å…­ã€å¦‚ä½•é€‰æ‹©ç´¢å¼•åˆ—çš„é¡ºåº ä¸ƒã€é¿å…å»ºç«‹å†—ä½™ç´¢å¼•å’Œé‡å¤ç´¢å¼• å…«ã€ä¼˜å…ˆè€ƒè™‘è¦†ç›–ç´¢å¼• ä¹ã€ç´¢å¼•SETè§„èŒƒ åã€æ•°æ®åº“SQLå¼€å‘è§„èŒƒ åä¸€ã€æ•°æ®åº“æ“ä½œè¡Œä¸ºè§„èŒƒ ä¸€ã€æ•°æ®åº“å‘½ä»¤è§„èŒƒÂ· æ‰€æœ‰æ•°æ®åº“å¯¹è±¡åç§°å¿…é¡»ä½¿ç”¨å°å†™å­—æ¯å¹¶ç”¨ä¸‹åˆ’çº¿åˆ†å‰² Â· æ‰€æœ‰æ•°æ®åº“å¯¹è±¡åç§°ç¦æ­¢ä½¿ç”¨mysqlä¿ç•™å…³é”®å­—ï¼ˆå¦‚æžœè¡¨åä¸­åŒ…å«å…³é”®å­—æŸ¥è¯¢æ—¶ï¼Œéœ€è¦å°†å…¶ç”¨å•å¼•å·æ‹¬èµ·æ¥ï¼‰ Â· æ•°æ®åº“å¯¹è±¡çš„å‘½åè¦èƒ½åšåˆ°è§åè¯†æ„ï¼Œå¹¶ä¸”æœ€åŽä¸è¦è¶…è¿‡32ä¸ªå­—ç¬¦ Â· ä¸´æ—¶åº“è¡¨å¿…é¡»ä»¥tmp_ä¸ºå‰ç¼€å¹¶ä»¥æ—¥æœŸä¸ºåŽç¼€ï¼Œå¤‡ä»½è¡¨å¿…é¡»ä»¥bak_ä¸ºå‰ç¼€å¹¶ä»¥æ—¥æœŸ(æ—¶é—´æˆ³)ä¸ºåŽç¼€ Â· æ‰€æœ‰å­˜å‚¨ç›¸åŒæ•°æ®çš„åˆ—åå’Œåˆ—ç±»åž‹å¿…é¡»ä¸€è‡´ï¼ˆä¸€èˆ¬ä½œä¸ºå…³è”åˆ—ï¼Œå¦‚æžœæŸ¥è¯¢æ—¶å…³è”åˆ—ç±»åž‹ä¸ä¸€è‡´ä¼šè‡ªåŠ¨è¿›è¡Œæ•°æ®ç±»åž‹éšå¼è½¬æ¢ï¼Œä¼šé€ æˆåˆ—ä¸Šçš„ç´¢ å¼•å¤±æ•ˆï¼Œå¯¼è‡´æŸ¥è¯¢æ•ˆçŽ‡é™ä½Žï¼‰ äºŒã€æ•°æ®åº“åŸºæœ¬è®¾è®¡è§„èŒƒ1ã€æ‰€æœ‰è¡¨å¿…é¡»ä½¿ç”¨Innodbå­˜å‚¨å¼•æ“Ž æ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼ˆå³Innodbæ— æ³•æ»¡è¶³çš„åŠŸèƒ½å¦‚ï¼šåˆ—å­˜å‚¨ï¼Œå­˜å‚¨ç©ºé—´æ•°æ®ç­‰ï¼‰çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰è¡¨å¿…é¡»ä½¿ç”¨Innodbå­˜å‚¨å¼•æ“Žï¼ˆmysql5.5ä¹‹å‰é»˜è®¤ä½¿ç”¨Myisamï¼Œ5.6ä»¥åŽé»˜è®¤çš„ä¸ºInnodbï¼‰Innodb æ”¯æŒäº‹åŠ¡ï¼Œæ”¯æŒè¡Œçº§é”ï¼Œæ›´å¥½çš„æ¢å¤æ€§ï¼Œé«˜å¹¶å‘ä¸‹æ€§èƒ½æ›´å¥½ 2ã€æ•°æ®åº“å’Œè¡¨çš„å­—ç¬¦é›†ç»Ÿä¸€ä½¿ç”¨UTF8 å…¼å®¹æ€§æ›´å¥½ï¼Œç»Ÿä¸€å­—ç¬¦é›†å¯ä»¥é¿å…ç”±äºŽå­—ç¬¦é›†è½¬æ¢äº§ç”Ÿçš„ä¹±ç ï¼Œä¸åŒçš„å­—ç¬¦é›†è¿›è¡Œæ¯”è¾ƒå‰éœ€è¦è¿›è¡Œè½¬æ¢ä¼šé€ æˆç´¢å¼•å¤±æ•ˆ 3ã€æ‰€æœ‰è¡¨å’Œå­—æ®µéƒ½éœ€è¦æ·»åŠ æ³¨é‡Š ä½¿ç”¨commentä»Žå¥æ·»åŠ è¡¨å’Œåˆ—çš„å¤‡æ³¨ ä»Žä¸€å¼€å§‹å°±è¿›è¡Œæ•°æ®å­—å…¸çš„ç»´æŠ¤ 4ã€å°½é‡æŽ§åˆ¶å•è¡¨æ•°æ®é‡çš„å¤§å°ï¼Œå»ºè®®æŽ§åˆ¶åœ¨500ä¸‡ä»¥å†… 500ä¸‡å¹¶ä¸æ˜¯MySQLæ•°æ®åº“çš„é™åˆ¶ï¼Œè¿‡å¤§ä¼šé€ æˆä¿®æ”¹è¡¨ç»“æž„ï¼Œå¤‡ä»½ï¼Œæ¢å¤éƒ½ä¼šæœ‰å¾ˆå¤§çš„é—®é¢˜ å¯ä»¥ç”¨åŽ†å²æ•°æ®å½’æ¡£ï¼ˆåº”ç”¨äºŽæ—¥å¿—æ•°æ®ï¼‰ï¼Œåˆ†åº“åˆ†è¡¨ï¼ˆåº”ç”¨äºŽä¸šåŠ¡æ•°æ®ï¼‰ç­‰æ‰‹æ®µæ¥æŽ§åˆ¶æ•°æ®é‡å¤§å° 5ã€è°¨æ…Žä½¿ç”¨MySQLåˆ†åŒºè¡¨ åˆ†åŒºè¡¨åœ¨ç‰©ç†ä¸Šè¡¨çŽ°ä¸ºå¤šä¸ªæ–‡ä»¶ï¼Œåœ¨é€»è¾‘ä¸Šè¡¨çŽ°ä¸ºä¸€ä¸ªè¡¨ è°¨æ…Žé€‰æ‹©åˆ†åŒºé”®ï¼Œè·¨åˆ†åŒºæŸ¥è¯¢æ•ˆçŽ‡å¯èƒ½æ›´ä½Ž å»ºè®®é‡‡ç”¨ç‰©ç†åˆ†è¡¨çš„æ–¹å¼ç®¡ç†å¤§æ•°æ® 6ã€å°½é‡åšåˆ°å†·çƒ­æ•°æ®åˆ†ç¦»ï¼Œå‡å°è¡¨çš„å®½åº¦ MySQLé™åˆ¶æ¯ä¸ªè¡¨æœ€å¤šå­˜å‚¨4096åˆ—ï¼Œå¹¶ä¸”æ¯ä¸€è¡Œæ•°æ®çš„å¤§å°ä¸èƒ½è¶…è¿‡65535å­—èŠ‚ å‡å°‘ç£ç›˜IO,ä¿è¯çƒ­æ•°æ®çš„å†…å­˜ç¼“å­˜å‘½ä¸­çŽ‡ï¼ˆè¡¨è¶Šå®½ï¼ŒæŠŠè¡¨è£…è½½è¿›å†…å­˜ç¼“å†²æ± æ—¶æ‰€å ç”¨çš„å†…å­˜ä¹Ÿå°±è¶Šå¤§,ä¹Ÿä¼šæ¶ˆè€—æ›´å¤šçš„IOï¼‰ æ›´æœ‰æ•ˆçš„åˆ©ç”¨ç¼“å­˜ï¼Œé¿å…è¯»å…¥æ— ç”¨çš„å†·æ•°æ® ç»å¸¸ä¸€èµ·ä½¿ç”¨çš„åˆ—æ”¾åˆ°ä¸€ä¸ªè¡¨ä¸­ï¼ˆé¿å…æ›´å¤šçš„å…³è”æ“ä½œï¼‰ 7ã€ç¦æ­¢åœ¨è¡¨ä¸­å»ºç«‹é¢„ç•™å­—æ®µ é¢„ç•™å­—æ®µçš„å‘½åå¾ˆéš¾åšåˆ°è§åè¯†ä¹‰ é¢„ç•™å­—æ®µæ— æ³•ç¡®è®¤å­˜å‚¨çš„æ•°æ®ç±»åž‹ï¼Œæ‰€ä»¥æ— æ³•é€‰æ‹©åˆé€‚çš„ç±»åž‹ å¯¹é¢„ç•™å­—æ®µç±»åž‹çš„ä¿®æ”¹ï¼Œä¼šå¯¹è¡¨è¿›è¡Œé”å®š 8ã€ç¦æ­¢åœ¨æ•°æ®åº“ä¸­å­˜å‚¨å›¾ç‰‡ï¼Œæ–‡ä»¶ç­‰å¤§çš„äºŒè¿›åˆ¶æ•°æ® é€šå¸¸æ–‡ä»¶å¾ˆå¤§ï¼Œä¼šçŸ­æ—¶é—´å†…é€ æˆæ•°æ®é‡å¿«é€Ÿå¢žé•¿ï¼Œæ•°æ®åº“è¿›è¡Œæ•°æ®åº“è¯»å–æ—¶ï¼Œé€šå¸¸ä¼šè¿›è¡Œå¤§é‡çš„éšæœºIOæ“ä½œï¼Œæ–‡ä»¶å¾ˆå¤§æ—¶ï¼ŒIOæ“ä½œå¾ˆè€—æ—¶ é€šå¸¸å­˜å‚¨äºŽæ–‡ä»¶æœåŠ¡å™¨ï¼Œæ•°æ®åº“åªå­˜å‚¨æ–‡ä»¶åœ°å€ä¿¡æ¯ 9ã€ç¦æ­¢åœ¨çº¿ä¸Šåšæ•°æ®åº“åŽ‹åŠ›æµ‹è¯• 10ã€ç¦æ­¢ä»Žå¼€å‘çŽ¯å¢ƒï¼Œæµ‹è¯•çŽ¯å¢ƒç›´æŽ¥è¿žæŽ¥ç”ŸæˆçŽ¯å¢ƒæ•°æ®åº“ ä¸‰ã€æ•°æ®åº“å­—æ®µè®¾è®¡è§„èŒƒ1ã€ä¼˜å…ˆé€‰æ‹©ç¬¦åˆå­˜å‚¨éœ€è¦çš„æœ€å°çš„æ•°æ®ç±»åž‹ Â· åŽŸå›  åˆ—çš„å­—æ®µè¶Šå¤§ï¼Œå»ºç«‹ç´¢å¼•æ—¶æ‰€éœ€è¦çš„ç©ºé—´ä¹Ÿå°±è¶Šå¤§ï¼Œè¿™æ ·ä¸€é¡µä¸­æ‰€èƒ½å­˜å‚¨çš„ç´¢å¼•èŠ‚ç‚¹çš„æ•°é‡ä¹Ÿå°±è¶Šå°‘ä¹Ÿè¶Šå°‘ï¼Œåœ¨éåŽ†æ—¶æ‰€éœ€è¦çš„IOæ¬¡æ•°ä¹Ÿå°±è¶Šå¤šï¼Œ ç´¢å¼•çš„æ€§èƒ½ä¹Ÿå°±è¶Šå·® Â· æ–¹æ³• 1ï¼‰å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—ç±»åž‹å­˜å‚¨ï¼Œå¦‚ï¼šå°†IPåœ°å€è½¬æ¢æˆæ•´å½¢æ•°æ®ã€‚ mysqlæä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥å¤„ç†ipåœ°å€ï¼š 12inet_aton // æŠŠipè½¬ä¸ºæ— ç¬¦å·æ•´åž‹(4-8ä½)inet_ntoa // æŠŠæ•´åž‹çš„ipè½¬ä¸ºåœ°å€ æ’å…¥æ•°æ®å‰ï¼Œå…ˆç”¨inet_atonæŠŠipåœ°å€è½¬ä¸ºæ•´åž‹ï¼Œå¯ä»¥èŠ‚çœç©ºé—´ã€‚æ˜¾ç¤ºæ•°æ®æ—¶ï¼Œä½¿ç”¨inet_ntoaæŠŠæ•´åž‹çš„ipåœ°å€è½¬ä¸ºåœ°å€æ˜¾ç¤ºå³å¯ã€‚ 2ï¼‰å¯¹äºŽéžè´Ÿåž‹çš„æ•°æ®ï¼ˆå¦‚è‡ªå¢žIDã€æ•´åž‹IPï¼‰æ¥è¯´ï¼Œè¦ä¼˜å…ˆä½¿ç”¨æ— ç¬¦å·æ•´åž‹æ¥å­˜å‚¨ å› ä¸ºï¼šæ— ç¬¦å·ç›¸å¯¹äºŽæœ‰ç¬¦å·å¯ä»¥å¤šå‡ºä¸€å€çš„å­˜å‚¨ç©ºé—´ 12SIGNED INT -2147483648~2147483647UNSIGNED INT 0~4294967295 VARCHAR(N)ä¸­çš„Nä»£è¡¨çš„æ˜¯å­—ç¬¦æ•°ï¼Œè€Œä¸æ˜¯å­—èŠ‚æ•° ä½¿ç”¨UTF8å­˜å‚¨255ä¸ªæ±‰å­— Varchar(255)=765ä¸ªå­—èŠ‚ã€‚è¿‡å¤§çš„é•¿åº¦ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜ 2ã€é¿å…ä½¿ç”¨TEXTã€BLOBæ•°æ®ç±»åž‹ï¼Œæœ€å¸¸è§çš„TEXTç±»åž‹å¯ä»¥å­˜å‚¨64kçš„æ•°æ® Â· å»ºè®®æŠŠBLOBæˆ–æ˜¯TEXTåˆ—åˆ†ç¦»åˆ°å•ç‹¬çš„æ‰©å±•è¡¨ä¸­ Mysqlå†…å­˜ä¸´æ—¶è¡¨ä¸æ”¯æŒTEXTã€BLOBè¿™æ ·çš„å¤§æ•°æ®ç±»åž‹ï¼Œå¦‚æžœæŸ¥è¯¢ä¸­åŒ…å«è¿™æ ·çš„æ•°æ®ï¼Œåœ¨æŽ’åºç­‰æ“ä½œæ—¶ï¼Œå°±ä¸èƒ½ä½¿ç”¨å†…å­˜ä¸´æ—¶è¡¨ï¼Œå¿…é¡»ä½¿ç”¨ç£ç›˜ä¸´æ—¶è¡¨è¿›è¡Œã€‚ è€Œä¸”å¯¹äºŽè¿™ç§æ•°æ®ï¼ŒMysqlè¿˜æ˜¯è¦è¿›è¡ŒäºŒæ¬¡æŸ¥è¯¢ï¼Œä¼šä½¿sqlæ€§èƒ½å˜å¾—å¾ˆå·®ï¼Œä½†æ˜¯ä¸æ˜¯è¯´ä¸€å®šä¸èƒ½ä½¿ç”¨è¿™æ ·çš„æ•°æ®ç±»åž‹ã€‚ å¦‚æžœä¸€å®šè¦ä½¿ç”¨ï¼Œå»ºè®®æŠŠBLOBæˆ–æ˜¯TEXTåˆ—åˆ†ç¦»åˆ°å•ç‹¬çš„æ‰©å±•è¡¨ä¸­ï¼ŒæŸ¥è¯¢æ—¶ä¸€å®šä¸è¦ä½¿ç”¨select * è€Œåªéœ€è¦å–å‡ºå¿…è¦çš„åˆ—ï¼Œä¸éœ€è¦TEXTåˆ—çš„æ•°æ®æ—¶ä¸è¦å¯¹è¯¥åˆ—è¿›è¡ŒæŸ¥è¯¢ã€‚ Â· TEXTæˆ–BLOBç±»åž‹åªèƒ½ä½¿ç”¨å‰ç¼€ç´¢å¼• å› ä¸ºMySQLå¯¹ç´¢å¼•å­—æ®µé•¿åº¦æ˜¯æœ‰é™åˆ¶çš„ï¼Œæ‰€ä»¥TEXTç±»åž‹åªèƒ½ä½¿ç”¨å‰ç¼€ç´¢å¼•ï¼Œå¹¶ä¸”TEXTåˆ—ä¸Šæ˜¯ä¸èƒ½æœ‰é»˜è®¤å€¼çš„ã€‚ 3ã€é¿å…ä½¿ç”¨ENUMç±»åž‹ Â· ä¿®æ”¹ENUMå€¼éœ€è¦ä½¿ç”¨ALTERè¯­å¥ Â· ENUMç±»åž‹çš„ORDER BYæ“ä½œæ•ˆçŽ‡ä½Žï¼Œéœ€è¦é¢å¤–æ“ä½œ Â· ç¦æ­¢ä½¿ç”¨æ•°å€¼ä½œä¸ºENUMçš„æžšä¸¾å€¼ 4ã€å°½å¯èƒ½æŠŠæ‰€æœ‰åˆ—å®šä¹‰ä¸ºNOT NULL åŽŸå› ï¼š Â· ç´¢å¼•NULLåˆ—éœ€è¦é¢å¤–çš„ç©ºé—´æ¥ä¿å­˜ï¼Œæ‰€ä»¥è¦å ç”¨æ›´å¤šçš„ç©ºé—´ï¼› Â· è¿›è¡Œæ¯”è¾ƒå’Œè®¡ç®—æ—¶è¦å¯¹NULLå€¼åšç‰¹åˆ«çš„å¤„ç† 5ã€ä½¿ç”¨TIMESTAMPï¼ˆ4ä¸ªå­—èŠ‚ï¼‰æˆ–DATETIMEç±»åž‹ï¼ˆ8ä¸ªå­—èŠ‚ï¼‰å­˜å‚¨æ—¶é—´ TIMESTAMP å­˜å‚¨çš„æ—¶é—´èŒƒå›´ 1970-01-01 00:00:01 ~ 2038-01-19-03:14:07ã€‚ TIMESTAMP å ç”¨4å­—èŠ‚å’ŒINTç›¸åŒï¼Œä½†æ¯”INTå¯è¯»æ€§é«˜ è¶…å‡ºTIMESTAMPå–å€¼èŒƒå›´çš„ä½¿ç”¨DATETIMEç±»åž‹å­˜å‚¨ã€‚ ç»å¸¸ä¼šæœ‰äººç”¨å­—ç¬¦ä¸²å­˜å‚¨æ—¥æœŸåž‹çš„æ•°æ®ï¼ˆä¸æ­£ç¡®çš„åšæ³•ï¼‰ï¼š Â· ç¼ºç‚¹1ï¼šæ— æ³•ç”¨æ—¥æœŸå‡½æ•°è¿›è¡Œè®¡ç®—å’Œæ¯”è¾ƒ Â· ç¼ºç‚¹2ï¼šç”¨å­—ç¬¦ä¸²å­˜å‚¨æ—¥æœŸè¦å ç”¨æ›´å¤šçš„ç©ºé—´ 6ã€åŒè´¢åŠ¡ç›¸å…³çš„é‡‘é¢ç±»æ•°æ®å¿…é¡»ä½¿ç”¨decimalç±»åž‹ Â· éžç²¾å‡†æµ®ç‚¹ï¼šfloat,double Â· ç²¾å‡†æµ®ç‚¹ï¼šdecimal Decimalç±»åž‹ä¸ºç²¾å‡†æµ®ç‚¹æ•°ï¼Œåœ¨è®¡ç®—æ—¶ä¸ä¼šä¸¢å¤±ç²¾åº¦ã€‚å ç”¨ç©ºé—´ç”±å®šä¹‰çš„å®½åº¦å†³å®šï¼Œæ¯4ä¸ªå­—èŠ‚å¯ä»¥å­˜å‚¨9ä½æ•°å­—ï¼Œå¹¶ä¸”å°æ•°ç‚¹è¦å ç”¨ä¸€ä¸ªå­—èŠ‚ã€‚å¯ç”¨äºŽå­˜å‚¨æ¯”bigintæ›´å¤§çš„æ•´åž‹æ•°æ®ã€‚ å››ã€ç´¢å¼•è®¾è®¡è§„èŒƒ1ã€é™åˆ¶æ¯å¼ è¡¨ä¸Šçš„ç´¢å¼•æ•°é‡ï¼Œå»ºè®®å•å¼ è¡¨ç´¢å¼•ä¸è¶…è¿‡5ä¸ª ç´¢å¼•å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼ç´¢å¼•å¯ä»¥æé«˜æ•ˆçŽ‡åŒæ ·å¯ä»¥é™ä½Žæ•ˆçŽ‡ã€‚ ç´¢å¼•å¯ä»¥å¢žåŠ æŸ¥è¯¢æ•ˆçŽ‡ï¼Œä½†åŒæ ·ä¹Ÿä¼šé™ä½Žæ’å…¥å’Œæ›´æ–°çš„æ•ˆçŽ‡ï¼Œç”šè‡³æœ‰äº›æƒ…å†µä¸‹ä¼šé™ä½ŽæŸ¥è¯¢æ•ˆçŽ‡ã€‚ å› ä¸ºmysqlä¼˜åŒ–å™¨åœ¨é€‰æ‹©å¦‚ä½•ä¼˜åŒ–æŸ¥è¯¢æ—¶ï¼Œä¼šæ ¹æ®ç»Ÿä¸€ä¿¡æ¯ï¼Œå¯¹æ¯ä¸€ä¸ªå¯ä»¥ç”¨åˆ°çš„ç´¢å¼•æ¥è¿›è¡Œè¯„ä¼°ï¼Œä»¥ç”Ÿæˆå‡ºä¸€ä¸ªæœ€å¥½çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¦‚æžœåŒæ—¶æœ‰å¾ˆå¤šä¸ªç´¢å¼•éƒ½å¯ä»¥ç”¨äºŽæŸ¥è¯¢ï¼Œå°±ä¼šå¢žåŠ mysqlä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’çš„æ—¶é—´ï¼ŒåŒæ ·ä¼šé™ä½ŽæŸ¥è¯¢æ€§èƒ½ã€‚ 2ã€ç¦æ­¢ç»™è¡¨ä¸­çš„æ¯ä¸€åˆ—éƒ½å»ºç«‹å•ç‹¬çš„ç´¢å¼• 5.6ç‰ˆæœ¬ä¹‹å‰ï¼Œä¸€ä¸ªsqlåªèƒ½ä½¿ç”¨åˆ°ä¸€ä¸ªè¡¨ä¸­çš„ä¸€ä¸ªç´¢å¼•ï¼Œ5.6ä»¥åŽï¼Œè™½ç„¶æœ‰äº†åˆå¹¶ç´¢å¼•çš„ä¼˜åŒ–æ–¹å¼ï¼Œä½†æ˜¯è¿˜æ˜¯è¿œè¿œæ²¡æœ‰ä½¿ç”¨ä¸€ä¸ªè”åˆç´¢å¼•çš„æŸ¥è¯¢æ–¹å¼å¥½ 3ã€æ¯ä¸ªInnodbè¡¨å¿…é¡»æœ‰ä¸ªä¸»é”® Innodbæ˜¯ä¸€ç§ç´¢å¼•ç»„ç»‡è¡¨ï¼šæ•°æ®çš„å­˜å‚¨çš„é€»è¾‘é¡ºåºå’Œç´¢å¼•çš„é¡ºåºæ˜¯ç›¸åŒçš„ã€‚ æ¯ä¸ªè¡¨éƒ½å¯ä»¥æœ‰å¤šä¸ªç´¢å¼•ï¼Œä½†æ˜¯è¡¨çš„å­˜å‚¨é¡ºåºåªèƒ½æœ‰ä¸€ç§ Innodbæ˜¯æŒ‰ç…§ä¸»é”®ç´¢å¼•çš„é¡ºåºæ¥ç»„ç»‡è¡¨çš„ã€‚ ä¸è¦ä½¿ç”¨æ›´æ–°é¢‘ç¹çš„åˆ—ä½œä¸ºä¸»é”®ï¼Œä¸é€‚ç”¨å¤šåˆ—ä¸»é”®ï¼ˆç›¸å½“äºŽè”åˆç´¢å¼•ï¼‰ ä¸è¦ä½¿ç”¨UUIDã€MD5ã€HASHã€å­—ç¬¦ä¸²åˆ—ä½œä¸ºä¸»é”®ï¼ˆæ— æ³•ä¿è¯æ•°æ®çš„é¡ºåºå¢žé•¿ï¼‰ã€‚ ä¸»é”®å»ºè®®ä½¿ç”¨è‡ªå¢žIDå€¼ã€‚ äº”ã€å¸¸è§ç´¢å¼•åˆ—å»ºè®®Â· å‡ºçŽ°åœ¨SELECTã€UPDATEã€DELETEè¯­å¥çš„WHEREä»Žå¥ä¸­çš„åˆ— Â· åŒ…å«åœ¨ORDER BYã€GROUP BYã€DISTINCTä¸­çš„å­—æ®µ å¹¶ä¸è¦å°†ç¬¦åˆ1å’Œ2ä¸­çš„å­—æ®µçš„åˆ—éƒ½å»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼Œé€šå¸¸å°†1ã€2ä¸­çš„å­—æ®µå»ºç«‹è”åˆç´¢å¼•æ•ˆæžœæ›´å¥½ Â· å¤šè¡¨joinçš„å…³è”åˆ— å…­ã€å¦‚ä½•é€‰æ‹©ç´¢å¼•åˆ—çš„é¡ºåºå»ºç«‹ç´¢å¼•çš„ç›®çš„æ˜¯ï¼šå¸Œæœ›é€šè¿‡ç´¢å¼•è¿›è¡Œæ•°æ®æŸ¥æ‰¾ï¼Œå‡å°‘éšæœºIOï¼Œå¢žåŠ æŸ¥è¯¢æ€§èƒ½ ï¼Œç´¢å¼•èƒ½è¿‡æ»¤å‡ºè¶Šå°‘çš„æ•°æ®ï¼Œåˆ™ä»Žç£ç›˜ä¸­è¯»å…¥çš„æ•°æ®ä¹Ÿå°±è¶Šå°‘ã€‚ Â· åŒºåˆ†åº¦æœ€é«˜çš„æ”¾åœ¨è”åˆç´¢å¼•çš„æœ€å·¦ä¾§ï¼ˆåŒºåˆ†åº¦=åˆ—ä¸­ä¸åŒå€¼çš„æ•°é‡/åˆ—çš„æ€»è¡Œæ•°ï¼‰ï¼› Â· å°½é‡æŠŠå­—æ®µé•¿åº¦å°çš„åˆ—æ”¾åœ¨è”åˆç´¢å¼•çš„æœ€å·¦ä¾§ï¼ˆå› ä¸ºå­—æ®µé•¿åº¦è¶Šå°ï¼Œä¸€é¡µèƒ½å­˜å‚¨çš„æ•°æ®é‡è¶Šå¤§ï¼ŒIOæ€§èƒ½ä¹Ÿå°±è¶Šå¥½ï¼‰ï¼› Â· ä½¿ç”¨æœ€é¢‘ç¹çš„åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å·¦ä¾§ï¼ˆè¿™æ ·å¯ä»¥æ¯”è¾ƒå°‘çš„å»ºç«‹ä¸€äº›ç´¢å¼•ï¼‰ã€‚ ä¸ƒã€é¿å…å»ºç«‹å†—ä½™ç´¢å¼•å’Œé‡å¤ç´¢å¼•å› ä¸ºè¿™æ ·ä¼šå¢žåŠ æŸ¥è¯¢ä¼˜åŒ–å™¨ç”Ÿæˆæ‰§è¡Œè®¡åˆ’çš„æ—¶é—´ã€‚ Â· é‡å¤ç´¢å¼•ç¤ºä¾‹ï¼šprimary key(id)ã€index(id)ã€unique index(id) Â· å†—ä½™ç´¢å¼•ç¤ºä¾‹ï¼šindex(a,b,c)ã€index(a,b)ã€index(a) å…«ã€ä¼˜å…ˆè€ƒè™‘è¦†ç›–ç´¢å¼•å¯¹äºŽé¢‘ç¹çš„æŸ¥è¯¢ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è¦†ç›–ç´¢å¼•ã€‚ è¦†ç›–ç´¢å¼•ï¼šå°±æ˜¯åŒ…å«äº†æ‰€æœ‰æŸ¥è¯¢å­—æ®µ(where,select,ordery by,group byåŒ…å«çš„å­—æ®µ)çš„ç´¢å¼• è¦†ç›–ç´¢å¼•çš„å¥½å¤„ï¼š Â· é¿å…Innodbè¡¨è¿›è¡Œç´¢å¼•çš„äºŒæ¬¡æŸ¥è¯¢ Innodbæ˜¯ä»¥èšé›†ç´¢å¼•çš„é¡ºåºæ¥å­˜å‚¨çš„ï¼Œå¯¹äºŽInnodbæ¥è¯´ï¼ŒäºŒçº§ç´¢å¼•åœ¨å¶å­èŠ‚ç‚¹ä¸­æ‰€ä¿å­˜çš„æ˜¯è¡Œçš„ä¸»é”®ä¿¡æ¯ï¼Œ å¦‚æžœæ˜¯ç”¨äºŒçº§ç´¢å¼•æŸ¥è¯¢æ•°æ®çš„è¯ï¼Œåœ¨æŸ¥æ‰¾åˆ°ç›¸åº”çš„é”®å€¼åŽï¼Œè¿˜è¦é€šè¿‡ä¸»é”®è¿›è¡ŒäºŒæ¬¡æŸ¥è¯¢æ‰èƒ½èŽ·å–æˆ‘ä»¬çœŸå®žæ‰€éœ€è¦çš„æ•°æ®ã€‚è€Œåœ¨è¦†ç›–ç´¢å¼•ä¸­ï¼ŒäºŒçº§ç´¢å¼•çš„é”®å€¼ä¸­å¯ä»¥èŽ·å–æ‰€æœ‰çš„æ•°æ®ï¼Œé¿å…äº†å¯¹ä¸»é”®çš„äºŒæ¬¡æŸ¥è¯¢ ï¼Œå‡å°‘äº†IOæ“ä½œï¼Œæå‡äº†æŸ¥è¯¢æ•ˆçŽ‡ã€‚ Â· å¯ä»¥æŠŠéšæœºIOå˜æˆé¡ºåºIOåŠ å¿«æŸ¥è¯¢æ•ˆçŽ‡ ç”±äºŽè¦†ç›–ç´¢å¼•æ˜¯æŒ‰é”®å€¼çš„é¡ºåºå­˜å‚¨çš„ï¼Œå¯¹äºŽIOå¯†é›†åž‹çš„èŒƒå›´æŸ¥æ‰¾æ¥è¯´ï¼Œå¯¹æ¯”éšæœºä»Žç£ç›˜è¯»å–æ¯ä¸€è¡Œçš„æ•°æ®IOè¦å°‘çš„å¤šï¼Œå› æ­¤åˆ©ç”¨è¦†ç›–ç´¢å¼•åœ¨è®¿é—®æ—¶ä¹Ÿå¯ä»¥æŠŠç£ç›˜çš„éšæœºè¯»å–çš„IOè½¬å˜æˆç´¢å¼•æŸ¥æ‰¾çš„é¡ºåºIOã€‚ ä¹ã€ç´¢å¼•SETè§„èŒƒå°½é‡é¿å…ä½¿ç”¨å¤–é”®çº¦æŸ Â· ä¸å»ºè®®ä½¿ç”¨å¤–é”®çº¦æŸï¼ˆforeign keyï¼‰ï¼Œä½†ä¸€å®šè¦åœ¨è¡¨ä¸Žè¡¨ä¹‹é—´çš„å…³è”é”®ä¸Šå»ºç«‹ç´¢å¼•ï¼› Â· å¤–é”®å¯ç”¨äºŽä¿è¯æ•°æ®çš„å‚ç…§å®Œæ•´æ€§ï¼Œä½†å»ºè®®åœ¨ä¸šåŠ¡ç«¯å®žçŽ°ï¼› Â· å¤–é”®ä¼šå½±å“çˆ¶è¡¨å’Œå­è¡¨çš„å†™æ“ä½œä»Žè€Œé™ä½Žæ€§èƒ½ã€‚ åã€æ•°æ®åº“SQLå¼€å‘è§„èŒƒ1ã€å»ºè®®ä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥è¿›è¡Œæ•°æ®åº“æ“ä½œ é¢„ç¼–è¯‘è¯­å¥å¯ä»¥é‡å¤ä½¿ç”¨è¿™äº›è®¡åˆ’ï¼Œå‡å°‘SQLç¼–è¯‘æ‰€éœ€è¦çš„æ—¶é—´ï¼Œè¿˜å¯ä»¥è§£å†³åŠ¨æ€SQLæ‰€å¸¦æ¥çš„SQLæ³¨å…¥çš„é—®é¢˜ åªä¼ å‚æ•°ï¼Œæ¯”ä¼ é€’SQLè¯­å¥æ›´é«˜æ•ˆ ç›¸åŒè¯­å¥å¯ä»¥ä¸€æ¬¡è§£æžï¼Œå¤šæ¬¡ä½¿ç”¨ï¼Œæé«˜å¤„ç†æ•ˆçŽ‡ã€‚ 2ã€é¿å…æ•°æ®ç±»åž‹çš„éšå¼è½¬æ¢ éšå¼è½¬æ¢ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚å¦‚ï¼šselect name,phone from customer where id = â€˜111â€™; 3ã€å……åˆ†åˆ©ç”¨è¡¨ä¸Šå·²ç»å­˜åœ¨çš„ç´¢å¼• Â· é¿å…ä½¿ç”¨åŒ%å·çš„æŸ¥è¯¢æ¡ä»¶ã€‚ å¦‚a like â€˜%123%â€™ï¼Œï¼ˆå¦‚æžœæ— å‰ç½®%,åªæœ‰åŽç½®%ï¼Œæ˜¯å¯ä»¥ç”¨åˆ°åˆ—ä¸Šçš„ç´¢å¼•çš„ï¼‰ Â· ä¸€ä¸ªSQLåªèƒ½åˆ©ç”¨åˆ°å¤åˆç´¢å¼•ä¸­çš„ä¸€åˆ—è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ å¦‚ï¼šæœ‰ a,b,cåˆ—çš„è”åˆç´¢å¼•ï¼Œåœ¨æŸ¥è¯¢æ¡ä»¶ä¸­æœ‰aåˆ—çš„èŒƒå›´æŸ¥è¯¢ï¼Œåˆ™åœ¨b,cåˆ—ä¸Šçš„ç´¢å¼•å°†ä¸ä¼šè¢«ç”¨åˆ°ï¼Œåœ¨å®šä¹‰è”åˆç´¢å¼•æ—¶ï¼Œå¦‚æžœaåˆ—è¦ç”¨åˆ°èŒƒå›´æŸ¥æ‰¾çš„è¯ï¼Œå°±è¦æŠŠaåˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å³ä¾§ã€‚ ä½¿ç”¨left joinæˆ– not existsæ¥ä¼˜åŒ–not inæ“ä½œ å› ä¸ºnot in ä¹Ÿé€šå¸¸ä¼šä½¿ç”¨ç´¢å¼•å¤±æ•ˆã€‚ 4ã€æ•°æ®åº“è®¾è®¡æ—¶ï¼Œåº”è¯¥è¦å¯¹ä»¥åŽæ‰©å±•è¿›è¡Œè€ƒè™‘ 5ã€ç¨‹åºè¿žæŽ¥ä¸åŒçš„æ•°æ®åº“ä½¿ç”¨ä¸åŒçš„è´¦å·ï¼Œè¿›åˆ¶è·¨åº“æŸ¥è¯¢ Â· ä¸ºæ•°æ®åº“è¿ç§»å’Œåˆ†åº“åˆ†è¡¨ç•™å‡ºä½™åœ° Â· é™ä½Žä¸šåŠ¡è€¦åˆåº¦ Â· é¿å…æƒé™è¿‡å¤§è€Œäº§ç”Ÿçš„å®‰å…¨é£Žé™© 6ã€ç¦æ­¢ä½¿ç”¨SELECT * å¿…é¡»ä½¿ç”¨SELECT &lt;å­—æ®µåˆ—è¡¨&gt; æŸ¥è¯¢ åŽŸå› ï¼š Â· æ¶ˆè€—æ›´å¤šçš„CPUå’ŒIOä»¥ç½‘ç»œå¸¦å®½èµ„æº Â· æ— æ³•ä½¿ç”¨è¦†ç›–ç´¢å¼• Â· å¯å‡å°‘è¡¨ç»“æž„å˜æ›´å¸¦æ¥çš„å½±å“ 7ã€ç¦æ­¢ä½¿ç”¨ä¸å«å­—æ®µåˆ—è¡¨çš„INSERTè¯­å¥ å¦‚ï¼šinsert into values (â€˜aâ€™,â€™bâ€™,â€™câ€™); åº”ä½¿ç”¨insert into t(c1,c2,c3) values (â€˜aâ€™,â€™bâ€™,â€™câ€™); 8ã€é¿å…ä½¿ç”¨å­æŸ¥è¯¢ï¼Œå¯ä»¥æŠŠå­æŸ¥è¯¢ä¼˜åŒ–ä¸ºjoinæ“ä½œ é€šå¸¸å­æŸ¥è¯¢åœ¨inå­å¥ä¸­ï¼Œä¸”å­æŸ¥è¯¢ä¸­ä¸ºç®€å•SQL(ä¸åŒ…å«unionã€group byã€order byã€limitä»Žå¥)æ—¶ï¼Œæ‰å¯ä»¥æŠŠå­æŸ¥è¯¢è½¬åŒ–ä¸ºå…³è”æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ã€‚ å­æŸ¥è¯¢æ€§èƒ½å·®çš„åŽŸå› ï¼š Â· å­æŸ¥è¯¢çš„ç»“æžœé›†æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼Œé€šå¸¸å­æŸ¥è¯¢çš„ç»“æžœé›†ä¼šè¢«å­˜å‚¨åˆ°ä¸´æ—¶è¡¨ä¸­ï¼Œä¸è®ºæ˜¯å†…å­˜ä¸´æ—¶è¡¨è¿˜æ˜¯ç£ç›˜ä¸´æ—¶è¡¨éƒ½ä¸ä¼šå­˜åœ¨ç´¢å¼•ï¼Œæ‰€ä»¥æŸ¥è¯¢æ€§èƒ½ ä¼šå—åˆ°ä¸€å®šçš„å½±å“ï¼› Â· ç‰¹åˆ«æ˜¯å¯¹äºŽè¿”å›žç»“æžœé›†æ¯”è¾ƒå¤§çš„å­æŸ¥è¯¢ï¼Œå…¶å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“ä¹Ÿå°±è¶Šå¤§ï¼› Â· ç”±äºŽå­æŸ¥è¯¢ä¼šäº§ç”Ÿå¤§é‡çš„ä¸´æ—¶è¡¨ä¹Ÿæ²¡æœ‰ç´¢å¼•ï¼Œæ‰€ä»¥ä¼šæ¶ˆè€—è¿‡å¤šçš„CPUå’ŒIOèµ„æºï¼Œäº§ç”Ÿå¤§é‡çš„æ…¢æŸ¥è¯¢ã€‚ 9ã€é¿å…ä½¿ç”¨JOINå…³è”å¤ªå¤šçš„è¡¨ å¯¹äºŽMysqlæ¥è¯´ï¼Œæ˜¯å­˜åœ¨å…³è”ç¼“å­˜çš„ï¼Œç¼“å­˜çš„å¤§å°å¯ä»¥ç”±join_buffer_sizeå‚æ•°è¿›è¡Œè®¾ç½®ã€‚ åœ¨Mysqlä¸­ï¼Œå¯¹äºŽåŒä¸€ä¸ªSQLå¤šå…³è”ï¼ˆjoinï¼‰ä¸€ä¸ªè¡¨ï¼Œå°±ä¼šå¤šåˆ†é…ä¸€ä¸ªå…³è”ç¼“å­˜ï¼Œå¦‚æžœåœ¨ä¸€ä¸ªSQLä¸­å…³è”çš„è¡¨è¶Šå¤šï¼Œæ‰€å ç”¨çš„å†…å­˜ä¹Ÿå°±è¶Šå¤§ã€‚ å¦‚æžœç¨‹åºä¸­å¤§é‡çš„ä½¿ç”¨äº†å¤šè¡¨å…³è”çš„æ“ä½œï¼ŒåŒæ—¶join_buffer_sizeè®¾ç½®çš„ä¹Ÿä¸åˆç†çš„æƒ…å†µä¸‹ï¼Œå°±å®¹æ˜“é€ æˆæœåŠ¡å™¨å†…å­˜æº¢å‡ºçš„æƒ…å†µï¼Œå°±ä¼šå½±å“åˆ°æœåŠ¡å™¨æ•°æ®åº“æ€§èƒ½çš„ç¨³å®šæ€§ã€‚ åŒæ—¶å¯¹äºŽå…³è”æ“ä½œæ¥è¯´ï¼Œä¼šäº§ç”Ÿä¸´æ—¶è¡¨æ“ä½œï¼Œå½±å“æŸ¥è¯¢æ•ˆçŽ‡Mysqlæœ€å¤šå…è®¸å…³è”61ä¸ªè¡¨ï¼Œå»ºè®®ä¸è¶…è¿‡5ä¸ªã€‚ 10ã€å‡å°‘åŒæ•°æ®åº“çš„äº¤äº’æ¬¡æ•° æ•°æ®åº“æ›´é€‚åˆå¤„ç†æ‰¹é‡æ“ä½œ åˆå¹¶å¤šä¸ªç›¸åŒçš„æ“ä½œåˆ°ä¸€èµ·ï¼Œå¯ä»¥æé«˜å¤„ç†æ•ˆçŽ‡ 11ã€å¯¹åº”åŒä¸€åˆ—è¿›è¡Œoråˆ¤æ–­æ—¶ï¼Œä½¿ç”¨inä»£æ›¿or inçš„å€¼ä¸è¦è¶…è¿‡500ä¸ªinæ“ä½œå¯ä»¥æ›´æœ‰æ•ˆçš„åˆ©ç”¨ç´¢å¼•ï¼Œorå¤§å¤šæ•°æƒ…å†µä¸‹å¾ˆå°‘èƒ½åˆ©ç”¨åˆ°ç´¢å¼•ã€‚ 12ã€ç¦æ­¢ä½¿ç”¨order by rand() è¿›è¡ŒéšæœºæŽ’åº ä¼šæŠŠè¡¨ä¸­æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„æ•°æ®è£…è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åŽåœ¨å†…å­˜ä¸­å¯¹æ‰€æœ‰æ•°æ®æ ¹æ®éšæœºç”Ÿæˆçš„å€¼è¿›è¡ŒæŽ’åºï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¯¹æ¯ä¸€è¡Œéƒ½ç”Ÿæˆä¸€ä¸ªéšæœºå€¼ï¼Œå¦‚æžœæ»¡è¶³æ¡ä»¶çš„æ•°æ®é›†éžå¸¸å¤§ï¼Œå°±ä¼šæ¶ˆè€—å¤§é‡çš„CPUå’ŒIOåŠå†…å­˜èµ„æºã€‚ æŽ¨èåœ¨ç¨‹åºä¸­èŽ·å–ä¸€ä¸ªéšæœºå€¼ï¼Œç„¶åŽä»Žæ•°æ®åº“ä¸­èŽ·å–æ•°æ®çš„æ–¹å¼ 13ã€WHEREä»Žå¥ä¸­ç¦æ­¢å¯¹åˆ—è¿›è¡Œå‡½æ•°è½¬æ¢å’Œè®¡ç®— å¯¹åˆ—è¿›è¡Œå‡½æ•°è½¬æ¢æˆ–è®¡ç®—æ—¶ä¼šå¯¼è‡´æ— æ³•ä½¿ç”¨ç´¢å¼•ã€‚ Â· ä¸æŽ¨èï¼š 1where date(create_time)=&apos;20190101&apos; Â· æŽ¨èï¼š 1where create_time &gt;=&apos;20190101&apos; and create_time &lt;=&apos;20190102&apos; 14ã€åœ¨æ˜Žæ˜¾ä¸ä¼šæœ‰é‡å¤å€¼æ—¶ä½¿ç”¨UNION ALLè€Œä¸æ˜¯UNION Â· UNIONä¼šæŠŠä¸¤ä¸ªç»“æžœé›†çš„æ‰€æœ‰æ•°æ®æ”¾åˆ°ä¸´æ—¶è¡¨ä¸­åŽå†è¿›è¡ŒåŽ»é‡æ“ä½œ Â· UNION ALLä¸ä¼šå†å¯¹ç»“æžœé›†è¿›è¡ŒåŽ»é‡æ“ä½œ 15ã€æ‹†åˆ†å¤æ‚çš„å¤§SQLä¸ºå¤šä¸ªå°SQL Â· å¤§SQLï¼šé€»è¾‘ä¸Šæ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å ç”¨å¤§é‡CPUè¿›è¡Œè®¡ç®—çš„SQL Â· MySQLï¼šä¸€ä¸ªSQLåªèƒ½ä½¿ç”¨ä¸€ä¸ªCPUè¿›è¡Œè®¡ç®— Â· SQLæ‹†åˆ†åŽå¯ä»¥é€šè¿‡å¹¶è¡Œæ‰§è¡Œæ¥æé«˜å¤„ç†æ•ˆçŽ‡ åä¸€ã€æ•°æ®åº“æ“ä½œè¡Œä¸ºè§„èŒƒ1ã€è¶…100ä¸‡è¡Œçš„æ‰¹é‡å†™ï¼ˆUPDATEã€DELETEã€INSERTï¼‰æ“ä½œï¼Œè¦åˆ†æ‰¹å¤šæ¬¡è¿›è¡Œæ“ä½œ Â· å¤§æ‰¹é‡æ“ä½œå¯èƒ½ä¼šé€ æˆä¸¥é‡çš„ä¸»ä»Žå»¶è¿Ÿ ä¸»ä»ŽçŽ¯å¢ƒä¸­ï¼Œå¤§æ‰¹é‡æ“ä½œå¯èƒ½ä¼šé€ æˆä¸¥é‡çš„ä¸»ä»Žå»¶è¿Ÿï¼Œå¤§æ‰¹é‡çš„å†™æ“ä½œä¸€èˆ¬éƒ½éœ€è¦æ‰§è¡Œä¸€å®šé•¿çš„æ—¶é—´ï¼Œè€Œåªæœ‰å½“ä¸»åº“ä¸Šæ‰§è¡Œå®ŒæˆåŽï¼Œæ‰ä¼šåœ¨å…¶ä»–ä»Žåº“ä¸Šæ‰§è¡Œï¼Œæ‰€ä»¥ä¼šé€ æˆä¸»åº“ä¸Žä»Žåº“é•¿æ—¶é—´çš„å»¶è¿Ÿæƒ…å†µ Â· binlogæ—¥å¿—ä¸ºrowæ ¼å¼æ—¶ä¼šäº§ç”Ÿå¤§é‡çš„æ—¥å¿— å¤§æ‰¹é‡å†™æ“ä½œä¼šäº§ç”Ÿå¤§é‡æ—¥å¿—ï¼Œç‰¹åˆ«æ˜¯å¯¹äºŽrowæ ¼å¼äºŒè¿›åˆ¶æ•°æ®è€Œè¨€ï¼Œç”±äºŽåœ¨rowæ ¼å¼ä¸­ä¼šè®°å½•æ¯ä¸€è¡Œæ•°æ®çš„ä¿®æ”¹ï¼Œæˆ‘ä»¬ä¸€æ¬¡ä¿®æ”¹çš„æ•°æ®è¶Šå¤šï¼Œäº§ç”Ÿçš„æ—¥å¿—é‡ä¹Ÿå°±ä¼šè¶Šå¤šï¼Œæ—¥å¿—çš„ä¼ è¾“å’Œæ¢å¤æ‰€éœ€è¦çš„æ—¶é—´ä¹Ÿå°±è¶Šé•¿ï¼Œè¿™ä¹Ÿæ˜¯é€ æˆä¸»ä»Žå»¶è¿Ÿçš„ä¸€ä¸ªåŽŸå› ã€‚ Â· é¿å…äº§ç”Ÿå¤§äº‹åŠ¡æ“ä½œ å¤§æ‰¹é‡ä¿®æ”¹æ•°æ®ï¼Œä¸€å®šæ˜¯åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­è¿›è¡Œçš„ï¼Œè¿™å°±ä¼šé€ æˆè¡¨ä¸­å¤§æ‰¹é‡æ•°æ®è¿›è¡Œé”å®šï¼Œä»Žè€Œå¯¼è‡´å¤§é‡çš„é˜»å¡žï¼Œé˜»å¡žä¼šå¯¹MySQLçš„æ€§èƒ½äº§ç”Ÿéžå¸¸å¤§çš„å½±å“ã€‚ ç‰¹åˆ«æ˜¯é•¿æ—¶é—´çš„é˜»å¡žä¼šå æ»¡æ‰€æœ‰æ•°æ®åº“çš„å¯ç”¨è¿žæŽ¥ï¼Œè¿™ä¼šä½¿ç”Ÿäº§çŽ¯å¢ƒä¸­çš„å…¶ä»–åº”ç”¨æ— æ³•è¿žæŽ¥åˆ°æ•°æ®åº“ï¼Œå› æ­¤ä¸€å®šè¦æ³¨æ„å¤§æ‰¹é‡å†™æ“ä½œè¦è¿›è¡Œåˆ†æ‰¹ã€‚ 2ã€å¯¹äºŽå¤§è¡¨ä½¿ç”¨pt-online-schema-changeä¿®æ”¹è¡¨ç»“æž„ Â· é¿å…å¤§è¡¨ä¿®æ”¹äº§ç”Ÿçš„ä¸»ä»Žå»¶è¿Ÿ Â· é¿å…åœ¨å¯¹è¡¨å­—æ®µè¿›è¡Œä¿®æ”¹æ—¶è¿›è¡Œé”è¡¨ å¯¹å¤§è¡¨æ•°æ®ç»“æž„çš„ä¿®æ”¹ä¸€å®šè¦è°¨æ…Žï¼Œä¼šé€ æˆä¸¥é‡çš„é”è¡¨æ“ä½œï¼Œå°¤å…¶æ˜¯ç”Ÿäº§çŽ¯å¢ƒï¼Œæ˜¯ä¸èƒ½å®¹å¿çš„ã€‚ pt-online-schema-changeå®ƒä¼šé¦–å…ˆå»ºç«‹ä¸€ä¸ªä¸ŽåŽŸè¡¨ç»“æž„ç›¸åŒçš„æ–°è¡¨ï¼Œå¹¶ä¸”åœ¨æ–°è¡¨ä¸Šè¿›è¡Œè¡¨ç»“æž„çš„ä¿®æ”¹ï¼Œç„¶åŽå†æŠŠåŽŸè¡¨ä¸­çš„æ•°æ®å¤åˆ¶åˆ°æ–°è¡¨ä¸­ï¼Œå¹¶åœ¨åŽŸè¡¨ä¸­å¢žåŠ ä¸€äº›è§¦å‘å™¨ã€‚ æŠŠåŽŸè¡¨ä¸­æ–°å¢žçš„æ•°æ®ä¹Ÿå¤åˆ¶åˆ°æ–°è¡¨ä¸­ï¼Œåœ¨è¡Œæ‰€æœ‰æ•°æ®å¤åˆ¶å®Œæˆä¹‹åŽï¼ŒæŠŠæ–°è¡¨å‘½åæˆåŽŸè¡¨ï¼Œå¹¶æŠŠåŽŸæ¥çš„è¡¨åˆ é™¤æŽ‰ã€‚ æŠŠåŽŸæ¥ä¸€ä¸ªDDLæ“ä½œï¼Œåˆ†è§£æˆå¤šä¸ªå°çš„æ‰¹æ¬¡è¿›è¡Œã€‚ 3ã€ç¦æ­¢ä¸ºç¨‹åºä½¿ç”¨çš„è´¦å·èµ‹äºˆsuperæƒé™ å½“è¾¾åˆ°æœ€å¤§è¿žæŽ¥æ•°é™åˆ¶æ—¶ï¼Œè¿˜è¿è¡Œ1ä¸ªæœ‰superæƒé™çš„ç”¨æˆ·è¿žæŽ¥superæƒé™åªèƒ½ç•™ç»™DBAå¤„ç†é—®é¢˜çš„è´¦å·ä½¿ç”¨ã€‚ 4ã€å¯¹äºŽç¨‹åºè¿žæŽ¥æ•°æ®åº“è´¦å·ï¼Œéµå¾ªæƒé™æœ€å°åŽŸåˆ™ ç¨‹åºä½¿ç”¨æ•°æ®åº“è´¦å·åªèƒ½åœ¨ä¸€ä¸ªDBä¸‹ä½¿ç”¨ï¼Œä¸å‡†è·¨åº“ ç¨‹åºä½¿ç”¨çš„è´¦å·åŽŸåˆ™ä¸Šä¸å‡†æœ‰dropæƒé™ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¼˜ç§€çš„ç¨‹åºå‘˜éœ€è¦æ‡‚é‚£äº›æ•°å­¦çŸ¥è¯†ï¼Ÿ]]></title>
    <url>%2Fposts%2Fdd6f5090.html</url>
    <content type="text"><![CDATA[å®‰åˆ©ä¸€æœ¬ä¹¦ï¼Œä¸“é—¨è®²ç¨‹åºå‘˜éœ€è¦æ‡‚çš„æ•°å­¦ã€‚ ä¸€ä½ç§‘æŠ€åšä¸»Jeremy KunèŠ±äº†4å¹´æ—¶é—´ï¼Œå†™æˆä¸€æœ¬ä¹¦ã€Šç¨‹åºå‘˜æ•°å­¦å…¥é—¨ã€‹ï¼Œåœ¨ç§‘æŠ€è®ºå›Hack Newså¼•å‘çƒ­è®®ã€‚ è¿™æœ¬ä¹¦ç²¾ç®€äº†å¤§é‡æ•°å­¦å†…å®¹ï¼Œä¸ºç¨‹åºå‘˜æä¾›æ‰€éœ€çš„åŸºæœ¬æ•°å­¦çŸ¥è¯†ã€‚ ä¹¦ä¸­ä¸»è¦å†…å®¹æœ‰ï¼šå¤šé¡¹å¼ã€é›†åˆã€å›¾è®ºã€å¾®ç§¯åˆ†ã€çº¿æ€§ä»£æ•°ã€ç¾¤è®ºç­‰ã€‚ å¥½çŽ©çš„ä¸æ­¢è¿™äº›ï¼Œè¿™ä½åšä¸»åœ¨ä¸ªäººç½‘ç«™ä¸­æ•´ç†äº†å¾ˆå¤šæ•°å­¦çŸ¥è¯†ï¼Œç”šè‡³åšæˆäº†wikiçš„å½¢å¼ï¼š https://jeremykun.com/primers/ é‡Œé¢åŸºæœ¬æ˜¯ç¨‹åºå‘˜çš„å¤§å­¦æ•°å­¦è¯¾ç¨‹å†…å®¹ï¼šè™½ç„¶æ²¡æœ‰é«˜ç­‰æ•°å­¦ï¼ˆå¾®ç§¯åˆ†ï¼‰ï¼Œä½†æ˜¯æœ‰æŠ½è±¡ä»£æ•°ã€ç¦»æ•£æ•°å­¦ã€å‚…ç«‹å¶åˆ†æžã€æ‹“æ‰‘å­¦ç­‰ç­‰ã€‚ è¿™ä¸ªç½‘ç«™å«åšâ€œç«™åœ¨æ•°å­¦å’Œç¼–ç¨‹çš„åå­—è·¯å£â€ï¼ˆMath âˆ© Programmingï¼‰ï¼Œæ‰€ä»¥å½“ç„¶ä¸ä¼šåªæœ‰æ•°å­¦è¯¾ï¼Œè¿˜åŒ…æ‹¬æœºå™¨å­¦ä¹ ã€å›¾åƒç”Ÿæˆã€è‡ªç„¶è¯­è¨€å¤„ç†ã€åŠ å¯†å­¦ç­‰è®¡ç®—æœºå­¦æ–¹é¢çš„å†…å®¹ã€‚ é“¾æŽ¥ï¼šhttps://www.zhihu.com/question/21425201/answer/615681300]]></content>
      <categories>
        <category>awsome</category>
      </categories>
      <tags>
        <tag>awsome</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è·Ÿç€9å¼ æ€ç»´å¯¼å›¾å­¦ä¹ Javascript]]></title>
    <url>%2Fposts%2Fd64e1f56.html</url>
    <content type="text"><![CDATA[å­¦ä¹ çš„é“è·¯å°±æ˜¯è¦ä¸æ–­çš„æ€»ç»“å½’çº³ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œsoï¼Œä¸‹é¢å°† po å‡ºæˆ‘æ”¶é›†çš„ 9 å¼  javascript ç›¸å…³çš„æ€ç»´å¯¼å›¾ï¼ˆéžåŽŸåˆ›ï¼‰ã€‚ JavaScript-Learn-MindMapping æ€ç»´å¯¼å›¾å°tips:æ€ç»´å¯¼å›¾åˆå«å¿ƒæ™ºå›¾ï¼Œæ˜¯è¡¨è¾¾å‘å°„æ€§æ€ç»´çš„æœ‰æ•ˆçš„å›¾å½¢æ€ç»´å·¥å…· ï¼Œå®ƒç®€å•å´åˆæžå…¶æœ‰æ•ˆï¼Œæ˜¯ä¸€ç§é©å‘½æ€§çš„æ€ç»´å·¥å…·ã€‚æ€ç»´å¯¼å›¾è¿ç”¨å›¾æ–‡å¹¶é‡çš„æŠ€å·§ï¼ŒæŠŠå„çº§ä¸»é¢˜çš„å…³ç³»ç”¨ç›¸äº’éš¶å±žä¸Žç›¸å…³çš„å±‚çº§å›¾è¡¨çŽ°å‡ºæ¥ï¼ŒæŠŠä¸»é¢˜å…³é”®è¯ä¸Žå›¾åƒã€é¢œè‰²ç­‰å»ºç«‹è®°å¿†é“¾æŽ¥ï¼Œæ€ç»´å¯¼å›¾å……åˆ†è¿ç”¨å·¦å³è„‘çš„æœºèƒ½ï¼Œåˆ©ç”¨è®°å¿†ã€é˜…è¯»ã€æ€ç»´çš„è§„å¾‹ï¼ŒååŠ©äººä»¬åœ¨ç§‘å­¦ä¸Žè‰ºæœ¯ã€é€»è¾‘ä¸Žæƒ³è±¡ä¹‹é—´å¹³è¡¡å‘å±•ï¼Œä»Žè€Œå¼€å¯äººç±»å¤§è„‘çš„æ— é™æ½œèƒ½ã€‚æ€ç»´å¯¼å›¾å› æ­¤å…·æœ‰äººç±»æ€ç»´çš„å¼ºå¤§åŠŸèƒ½ã€‚ åˆ†åˆ«å½’ç±»ä¸ºï¼š javascriptå˜é‡ javascriptè¿ç®—ç¬¦ javascriptæ•°ç»„ javascriptæµç¨‹è¯­å¥ javascriptå­—ç¬¦ä¸²å‡½æ•° javascriptå‡½æ•°åŸºç¡€ javascriptåŸºç¡€DOMæ“ä½œ æ–‡æ¡£å¯¹è±¡æ¨¡åž‹DOM javascriptæ­£åˆ™è¡¨è¾¾å¼ èƒ½å¤Ÿè®¤çœŸçœ‹å®Œå°±æ˜¯ä¸€æ¬¡å¯¹javascriptçš„å›žé¡¾ä¸Žæå‡ï¼Œå¯ä»¥å¾ˆå¥½çš„æ£€éªŒåŸºç¡€ã€‚ javascriptå˜é‡ javascriptè¿ç®—ç¬¦ javascriptæ•°ç»„ javascriptæµç¨‹è¯­å¥ javascriptå­—ç¬¦ä¸²å‡½æ•° javascriptå‡½æ•°åŸºç¡€ javascriptåŸºç¡€DOMæ“ä½œ æ–‡æ¡£å¯¹è±¡æ¨¡åž‹DOM BOMæµè§ˆå™¨å¯¹è±¡æ¨¡åž‹ javascriptæ­£åˆ™è¡¨è¾¾å¼ æ˜¯çš„ï¼Œæ²¡æœ‰é«˜æ·±çš„çŸ¥è¯†ï¼Œæ²¡æœ‰è¿›é˜¶çš„æŠ€å·§ã€‚ åªæ˜¯ï¼Œä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼›åªæ˜¯ï¼Œåƒé‡Œä¹‹è¡Œå§‹äºŽè¶³ä¸‹ï¼›åªæ˜¯ï¼Œåƒé‡Œé•¿ææºƒäºŽèšç©´ã€‚ èƒ½æŠŠç®€å•çš„åšå¥½å°±æ˜¯ä¸ç®€å•ï¼Œä½ èƒ½èµ°å¤šè¿œï¼Œä¸æ˜¯åœ¨äºŽä½ æœ‰å¤šèªæ˜Žï¼Œè€Œæ˜¯å–å†³äºŽä½ æœ‰å¤šå‹¤å¥‹ï¼Œå…±å‹‰ã€‚]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ†äº«å‡ ä¸ªä¼˜è´¨å¼€æºé¡¹ç›® | ç”µå•†ç±»appï¼Œè¶£äº« gifï¼Œç ”å‘åŠ©æ‰‹DoraemonKitï¼Œgithubå°ç¨‹åº]]></title>
    <url>%2Fposts%2Ff4e97b38.html</url>
    <content type="text"><![CDATA[éžå¸¸æ–¹ä¾¿çš„ github å°ç¨‹åºå‘˜ è¶£äº« gif å¼€æºç‰ˆæœ¬ é…·æ¬§å¤©æ°”çš„Jetpackç‰ˆæœ¬å®žçŽ°ï¼Œé‡‡ç”¨äº†MVVMæž¶æž„ å……æ»¡è®¾è®¡æ„Ÿçš„ç”µå•†ç±»APP æ»´æ»´å¼€æºçš„ç ”å‘åŠ©æ‰‹ éžå¸¸æ–¹ä¾¿çš„ github å°ç¨‹åºå‘˜ç»å¸¸æƒ³åœ¨æ‰‹æœºä¸Šçœ‹ä¸€äº›æœ€æ–°çš„githubé¡¹ç›®ï¼Œå¯ä»¥è¯´è¿™æ˜¯æˆ‘å‘çŽ°çš„æœ€æ–¹ä¾¿çš„å°ç¨‹åºäº†ã€‚ GitHub Trending æ˜¯æ ¹æ®ä»“åº“çš„æœ€è¿‘çƒ­é—¨ç¨‹åº¦å±•ç¤ºçš„ï¼Œè¯¥å°ç¨‹åºå¸Œæœ›å‡†ç¡®èŽ·å–æœ€è¿‘æ–°å‡ºçŽ°çš„ä»“åº“é›†åˆï¼Œä½¿ç”¨è¯¥å°ç¨‹åºèƒ½å¤Ÿæ ¹æ®è¯­è¨€ç­›é€‰ï¼ŒèŽ·å–æ¯å¤©æ–°å‡ºçŽ°çš„ Trending ä»“åº“ã€‚ å¼€æºåœ°å€ï¼šhttps://github.com/ZhuPeng/mp-githubtrending è¿™ä¸ªå°ç¨‹åºå·²ç»ä¸Šçº¿äº†ï¼Œå¯ä»¥æ‰«ç ä½“éªŒï¼Œç›¸ä¿¡ä¼šå¯¹ä½ æœ‰å¸®åŠ©çš„ è¶£äº« gif å¼€æºç‰ˆæœ¬è¿™ä¸ªç›¸ä¿¡å°±æ˜¯è€éƒ­å¯¹å¤–çš„å¼€æºç‰ˆæœ¬äº†ï¼Œç›¸ä¿¡ä¸å°‘åŒå­¦æ—©å·²ä½“éªŒè¿‡äº†ï¼Œæ²¡æœ‰çš„è¯ï¼Œå¯ä»¥åœ¨å„å¤§å¸‚åœºæœç´¢â€œè¶£äº« gifâ€ä½“éªŒä¸€ä¸‹ï¼Œå¼€æºç‰ˆæœ¬ä¹Ÿæ˜¯ä¸ªéžå¸¸æ£’çš„å­¦ä¹ é¡¹ç›®ã€‚ https://github.com/guolindev/giffun è€éƒ­çš„MVVMé¡¹ç›®é…·æ¬§å¤©æ°”çš„Jetpackç‰ˆæœ¬å®žçŽ°ï¼Œé‡‡ç”¨äº†MVVMæž¶æž„ã€‚ åŠŸèƒ½æ¯”è¾ƒå°‘ï¼Œä¸è¿‡è€éƒ­å†™ä»£ç ä¸€å‘éžå¸¸æ³¨é‡ä»£ç é£Žæ ¼ï¼Œç›¸ä¿¡æ˜¯ä¸€ä¸ªéžå¸¸å€¼å¾—å­¦ä¹ çš„é¡¹ç›®ã€‚é¡¹ç›®ä½¿ç”¨è¯­è¨€æ˜¯kotlinï¼Œåº”è¯¥ä¹Ÿæ˜¯ä¸ºç¬¬ä¸€è¡Œä»£ç ç¬¬ä¸‰ç‰ˆåšå‡†å¤‡ã€‚ åˆ†äº«ä¸ªæœ‰æ„æ€çš„äº‹æƒ…ï¼Œä¹‹å‰æˆ‘å’Œè€éƒ­å¹é€¼ï¼Œæˆ‘è¯´åŽ» github æœç´¢ wanandroidæœ‰å‡ ç™¾ä¸ªå¼€æºç‰ˆæœ¬ï¼Œä¸€è„¸è‡ªè±ªâ€¦ ç„¶åŽè€éƒ­ä¸Šäº†ä¸ªï¼Œæœç´¢â€œcool weatherâ€çš„æˆªå›¾ï¼š é¡¹ç›®æž¶æž„ï¼š https://github.com/guolindev/coolweatherjetpack* å……æ»¡è®¾è®¡æ„Ÿçš„ç”µå•†ç±»APP é¡¹ç›®æ¶‰åŠçš„æŠ€æœ¯è¦ç‚¹ï¼š1. ç»„ä»¶åŒ–+Kotlinç»“åˆå¼€å‘ï¼Œå¦‚ä½•ç®¡ç†ç¬¬ä¸‰æ–¹ä¾èµ– 2. BaseActivityå’ŒBaseFragmentç­‰åŸºç±»åŠé€šç”¨å¸ƒå±€çš„å°è£… 3. MVP+Dagger 2+Retrofit+Rxjavaï¼ˆåŒ…æ‹¬äº†å¤šä¸ªBaseUrlè¯·æ±‚çš„åœºæ™¯å¤„ç†ï¼‰ 4. ç»„ä»¶åŒ–å¼€å‘ä¸‹ARouterçš„è¿ç”¨ 5. EventBusçš„ä½¿ç”¨ 6. GoogleåŽŸç”Ÿæ•°æ®åº“Roomçš„ä½¿ç”¨ 7. Glideçš„ä½¿ç”¨ï¼ˆå°è£…åŠ è½½å›¾ç‰‡å·¥å…·ç±»GlideUtilsï¼Œåœ†å½¢ã€åœ†è§’å›¾ç‰‡ã€èƒŒæ™¯å›¾ç‰‡åŠ è½½ç­‰ï¼‰ 8. Kotlinä¸‹ä½¿ç”¨ButterKnife 9. CommonAdapterä¸‡èƒ½é€‚é…å™¨ï¼ˆåŒ…æ‹¬å¤šç±»åž‹å¸ƒå±€çš„è¿ç”¨â€”é¦–é¡µçš„é€›æ¨¡å—å’Œè§†é¢‘åˆ†ç±»è¯¦æƒ…éƒ½æœ‰è¿ç”¨ï¼‰ 10. GSYVideoPlayerå®žçŽ°è§†é¢‘æ’­æ”¾ï¼ˆåŒ…æ‹¬å…¨å±åˆ‡æ¢åŠŸèƒ½ï¼‰ 11. 5.0æ–°ç‰¹æ€§CoordinatorLayout +AppBarLayoutæ•ˆæžœå®žçŽ°ï¼ˆè§†é¢‘åˆ†ç±»è¯¦æƒ…ï¼‰ 12. æ²‰æµ¸å¼çŠ¶æ€æ ï¼ˆActivityå’Œåœ¨Fragmentä¸­çš„ä½¿ç”¨åŠä¸åŒæ‰‹æœºçš„é€‚é…ï¼‰ 13. DataBindingçš„ä½¿ç”¨ 14. çº¦æŸå¸ƒå±€ConstraintLayoutçš„ä½¿ç”¨è¿™æ˜¯ä¸€ä¸ªæ¥è‡ªæŠ•ç¨¿çš„é¡¹ç›®ï¼Œæˆ‘ä¹Ÿè·‘äº†ä¸€ä¸‹ï¼Œè¿˜æœ‰äº›é—®é¢˜ï¼Œä¸è¿‡é€‚åˆç”¨äºŽå­¦ä¹ ã€‚ https://www.jianshu.com/p/12c09376fa97 https://github.com/GraceJoJo/Designer ç ”å‘åŠ©æ‰‹æ»´æ»´å¼€æºçš„ç ”å‘åŠ©æ‰‹ã€‚ ç®€ç§° â€œDoKitâ€ ã€‚ä¸€æ¬¾åŠŸèƒ½é½å…¨çš„å®¢æˆ·ç«¯ï¼ˆ iOS ã€Android ï¼‰ç ”å‘åŠ©æ‰‹ï¼Œä½ å€¼å¾—æ‹¥æœ‰ã€‚ https://github.com/didi/DoraemonKit* å¼€æºç»„ä»¶DoraemonKitä¹‹Androidç‰ˆæœ¬æŠ€æœ¯å®žçŽ°ï¼ˆä¸€ï¼‰ https://juejin.im/post/5c4dcfe8518825261e1f2978 å¤§å®¶æ‰‹æœºä¸Šæˆ–å¤šæˆ–å°‘æœ‰ä¸€äº›å¯¹å­¦ä¹ æœ‰ç”¨çš„appï¼Œå°ç¨‹åºå§ï¼Ÿç•™è¨€åˆ†äº«ä¸€ä¸‹å§ï¼]]></content>
      <categories>
        <category>Android</category>
        <category>å¼€æºåº“</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>View</tag>
        <tag>éª¨æž¶å±</tag>
        <tag>åŠ è½½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Githubä¸Š10ä¸ªå¼€æºå…è´¹ä¸”ä¼˜ç§€çš„åŽå°æŽ§åˆ¶é¢æ¿]]></title>
    <url>%2Fposts%2Fa81c9ec4.html</url>
    <content type="text"><![CDATA[Web å¼€å‘ä¸­å‡ ä¹Žçš„å¹³å°éƒ½éœ€è¦ä¸€ä¸ªåŽå°ç®¡ç†ï¼Œä½†æ˜¯ä»Žé›¶å¼€å‘ä¸€å¥—åŽå°æŽ§åˆ¶é¢æ¿å¹¶ä¸å®¹æ˜“ï¼Œå¹¸è¿çš„æ˜¯æœ‰å¾ˆå¤šå¼€æºå…è´¹çš„åŽå°æŽ§åˆ¶é¢æ¿å¯ä»¥ç»™å¼€å‘è€…ä½¿ç”¨ï¼Œé‚£ä¹ˆæœ‰å“ªäº›ä¼˜ç§€çš„å¼€æºå…è´¹çš„æŽ§åˆ¶é¢æ¿å‘¢ï¼Ÿæˆ‘åœ¨ Github ä¸Šæ”¶é›†äº†ä¸€äº›ä¼˜ç§€çš„åŽå°æŽ§åˆ¶é¢æ¿ï¼Œå¹¶æ€»ç»“å¾—å‡º Top 10ã€‚ AdminLTE vue-Element-Admin tabler Gentelella ng2-admin ant-design-pro blur-admin vue-admin iview-admin material-dashboard AdminLTEGithub Star æ•° 24969 ï¼Œ Github åœ°å€ï¼šhttps://github.com/almasaeed2010/AdminLTEã€‚ éžå¸¸æµè¡Œçš„åŸºäºŽ Bootstrap 3.x çš„å…è´¹çš„åŽå° UI æ¡†æž¶ã€‚ vue-Element-AdminGithub Star æ•° 19546ï¼Œ Github åœ°å€ï¼š https://github.com/PanJiaChen/vue-element-adminã€‚ ä¸€ä¸ªåŸºäºŽ vue2.0 å’Œ Eelement çš„æŽ§åˆ¶é¢æ¿ UI æ¡†æž¶ã€‚ tablerGithub Star æ•° 15870ï¼Œ Github åœ°å€ï¼šhttps://github.com/tabler/tablerã€‚ æž„å»ºåœ¨ BootStrap 4 ä¹‹ä¸Šçš„å…è´¹çš„ HTML æŽ§åˆ¶é¢æ¿æ¡†æž¶ GentelellaGithub Star æ•° 15654ï¼Œ Github åœ°å€ï¼šhttps://github.com/puikinsh/gentelellaã€‚ ä¸€ä¸ªåŸºäºŽ Bootstarp çš„å…è´¹çš„åŽå°æŽ§åˆ¶é¢æ¿ã€‚ ng2-adminGithub Star æ•° 13181ï¼Œ Github åœ°å€ï¼šhttps://github.com/akveo/ngx-adminã€‚ åŸºäºŽ Angular 2, Bootstrap 4 å’Œ Webpack çš„åŽå°ç®¡ç†é¢æ¿æ¡†æž¶ã€‚ ant-design-proGithub Star æ•° 12707ï¼ŒGithub åœ°å€ï¼šhttps://github.com/ant-design/ant-design-proã€‚ å¼€ç®±å³ç”¨çš„ä¸­å°å‰ç«¯/è®¾è®¡è§£å†³æ–¹æ¡ˆ blur-adminGithub Star æ•° 9241ï¼ŒGithub åœ°å€ï¼šhttps://github.com/akveo/blur-adminã€‚ åŸºäºŽ Angular å’Œ Bootstrap çš„åŽå°ç®¡ç†é¢æ¿æ¡†æž¶ã€‚ vue-adminGithub Star æ•° 8676ï¼ŒGithub åœ°å€ï¼šhttps://github.com/vue-bulma/vue-adminã€‚ åŸºäºŽ Vue å’Œ Bulma çš„æŽ§åˆ¶é¢æ¿ã€‚ iview-adminGithub Star æ•° 8668ï¼ŒGithub åœ°å€ï¼šhttps://github.com/iview/iview-adminã€‚ åŸºäºŽ iView çš„ Vue 2.0 æŽ§åˆ¶é¢æ¿ã€‚ material-dashboardGithub Star æ•° 7111ï¼ŒGithub åœ°å€ï¼šhttps://github.com/creativetimofficial/material-dashboardã€‚ åŸºäºŽ Bootstrap 4 å’Œ Material é£Žæ ¼çš„æŽ§åˆ¶é¢æ¿ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>å¼€æº</category>
      </categories>
      <tags>
        <tag>åŽå°æŽ§åˆ¶é¢æ¿</tag>
        <tag>å¼€æº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸€äº›æž¶æž„è®¾è®¡åŽŸåˆ™]]></title>
    <url>%2Fposts%2F5125d3e0.html</url>
    <content type="text"><![CDATA[ã€ŠClean Architectureã€‹ä¸€ä¹¦ä¸­å¯¹äºŽè½¯ä»¶æž¶æž„ç›®çš„çš„è§£é‡Šï¼š The goal of software architecture is to miminize the human resources required to build and maintain the required system. å³ï¼šè½¯ä»¶æž¶æž„çš„ç›®çš„å°±æ˜¯å°†æž„å»ºå’Œç»´æŠ¤ç³»ç»Ÿéœ€è¦çš„äººåŠ›æˆæœ¬é™åˆ°æœ€ä½Žã€‚ å› æ­¤ï¼Œå¯ä»¥å¾—å‡ºæž¶æž„è®¾è®¡çš„å…³é”®æ€ç»´å°±æ˜¯åˆ¤æ–­å’Œå–èˆï¼ˆç¨‹åºè®¾è®¡çš„å…³é”®æ€ç»´æ˜¯é€»è¾‘å’Œå®žçŽ°ï¼‰ï¼Œå³å¦‚ä½•é€‰æ‹©æŠ€æœ¯ã€ç»„åˆæŠ€æœ¯ä½¿å¾—éœ€è¦çš„äººåŠ›èµ„æºæœ€å°‘ã€‚ éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œè„±ç¦»ä¸šåŠ¡è°ˆæž¶æž„æ˜¯ä¸åˆç†çš„ï¼ŒæŠ€æœ¯æž¶æž„åŠå…¶æ¼”è¿›éƒ½æ˜¯ä¸šåŠ¡ç›®æ ‡é©±åŠ¨çš„ã€‚ æž¶æž„åŽŸåˆ™ é¿å…è¿‡åº¦è®¾è®¡ï¼šç®€å•çš„æž¶æž„å°±æ˜¯æœ€å¥½çš„æž¶æž„ã€‚æœ€ç®€å•çš„æ–¹æ¡ˆæœ€å®¹æ˜“å®žçŽ°å’Œç»´æŠ¤ï¼Œä¹Ÿå¯ä»¥é¿å…æµªè´¹èµ„æºã€‚ä½†æ–¹æ¡ˆä¸­éœ€è¦åŒ…æ‹¬æ‰©å±•ã€‚ å†—ä½™è®¾è®¡ï¼šå¯¹æœåŠ¡ã€æ•°æ®åº“çš„åšç»“ç‚¹å†—ä½™ï¼Œä¿è¯æœåŠ¡çš„é«˜å¯ç”¨ã€‚é€šè¿‡æ•°æ®åº“ä¸»ä»Žæ¨¡å¼ã€åº”ç”¨é›†ç¾¤æ¥å®žçŽ°ã€‚ å¤šæ´»æ•°æ®ä¸­å¿ƒï¼šä¸ºäº†å®¹ç¾ï¼Œä»Žæ ¹æœ¬ä¸Šä¿éšœåº”ç”¨çš„é«˜å¯ç”¨æ€§ã€‚éœ€è¦æž„å»ºå¤šæ´»çš„æ•°æ®ä¸­å¿ƒï¼Œä»¥é˜²æ­¢ä¸€ä¸ªæ•°æ®ä¸­å¿ƒç”±äºŽä¸å¯æŽ§å› ç´ å‡ºçŽ°æ•…éšœåŽï¼Œå¼•èµ·æ•´ä¸ªç³»ç»Ÿçš„ä¸å¯ç”¨ã€‚ æ— çŠ¶æ€è®¾è®¡ï¼šAPIã€æŽ¥å£ç­‰çš„è®¾è®¡ä¸èƒ½æœ‰å‰åŽä¾èµ–å…³ç³»ï¼Œä¸€ä¸ªèµ„æºä¸å—å…¶ä»–èµ„æºæ”¹åŠ¨çš„å½±å“ã€‚æ— çŠ¶æ€çš„ç³»ç»Ÿæ‰èƒ½æ›´å¥½åœ°è¿›è¡Œæ‰©å±•ã€‚å¦‚æžœéžå¾—æœ‰çŠ¶æ€ï¼Œåˆ™è¦ä¹ˆå®¢æˆ·ç«¯ç®¡ç†çŠ¶æ€ï¼Œè¦ä¹ˆæœåŠ¡ç«¯ç”¨åˆ†å¸ƒå¼ç¼“å­˜ç®¡ç†çŠ¶æ€ã€‚ å¯å›žæ»šï¼šå¯¹äºŽä»»ä½•ä¸šåŠ¡å°¤å…¶æ˜¯å…³é”®ä¸šåŠ¡ï¼Œéƒ½å…·æœ‰æ¢å¤æœºåˆ¶ã€‚å¯ä»¥ä½¿ç”¨åŸºäºŽæ—¥å¿—çš„WALã€åŸºäºŽäº‹ä»¶çš„Event sourcingç­‰æ¥å®žçŽ°å¯å›žæ»šã€‚ å¯ç¦ç”¨/è‡ªæˆ‘ä¿æŠ¤ï¼šå…·æœ‰é™æµæœºåˆ¶ï¼Œå½“ä¸Šæ¸¸çš„æµé‡è¶…è¿‡è‡ªèº«çš„è´Ÿè½½èƒ½åŠ›æ—¶ï¼Œèƒ½å¤Ÿæ‹’ç»æº¢å‡ºçš„è¯·æ±‚ã€‚å¯ä»¥é€šè¿‡æ‰‹åŠ¨å¼€å…³æˆ–è€…è‡ªåŠ¨å¼€å…³ï¼ˆç›‘æµ‹å¼‚å¸¸æµé‡è¡Œä¸ºï¼‰ï¼Œåœ¨åº”ç”¨å‰ç«¯æŒ¡ä½æµé‡ã€‚é™æµç®—æ³•åŒ…æ‹¬ï¼šä»¤ç‰Œæ¡¶ï¼ˆæ”¯æŒçªå‘æµé‡ï¼‰ã€æ¼æ¡¶ï¼ˆåŒ€é€Ÿæµé‡ï¼‰ã€è®¡æ•°å™¨ä»¥åŠä¿¡å·é‡ï¼ˆé™åˆ¶å¹¶å‘è®¿é—®çš„æ•°é‡ï¼‰ã€‚æ­¤å¤–æ°¸è¿œä¸è¦ä¿¡èµ–ç¬¬ä¸‰æ–¹æœåŠ¡çš„å¯é æ€§ï¼Œä¾èµ–äºŽç¬¬ä¸‰æ–¹çš„åŠŸèƒ½åŠ¡å¿…æœ‰æœåŠ¡é™çº§æŽªæ–½ä»¥åŠç†”æ–­ç®¡ç†ï¼Œå¦‚ï¼šå¯¹äºŽæ¯ä¸€ä¸ªç½‘ç»œæ“ä½œï¼Œéƒ½éœ€è¦è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±æ”¾å¼ƒæˆ–è€…è¿”å›žå…œåº•å“åº”ã€‚ é—®é¢˜å¯è¿½è¸ªï¼šå½“ç³»ç»Ÿå‡ºçŽ°é—®é¢˜æ—¶ï¼Œèƒ½å¤Ÿå®šä½è¯·æ±‚çš„è½¨è¿¹ã€æ¯ä¸€æ­¥çš„è¯·æ±‚ä¿¡æ¯ç­‰ã€‚åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªç³»ç»Ÿå³è§£å†³çš„æ­¤æ–¹é¢çš„é—®é¢˜ã€‚ å¯ç›‘æŽ§ï¼šå¯ç›‘æŽ§æ˜¯ä¿éšœç³»ç»Ÿèƒ½å¤Ÿç¨³å®šè¿è¡Œçš„å…³é”®ã€‚åŒ…æ‹¬å¯¹ä¸šåŠ¡é€»è¾‘çš„ç›‘æŽ§ã€åº”ç”¨è¿›ç¨‹çš„ç›‘æŽ§ä»¥åŠåº”ç”¨ä¾èµ–çš„CPUã€ç¡¬ç›˜ç­‰ç³»ç»Ÿèµ„æºçš„ç›‘æŽ§ã€‚æ¯ä¸€ä¸ªç³»ç»Ÿéƒ½éœ€è¦åšå¥½è¿™å‡ ä¸ªå±‚é¢çš„ç›‘æŽ§ã€‚ æ•…éšœéš”ç¦»ï¼šå°†ç³»ç»Ÿä¾èµ–çš„èµ„æº(çº¿ç¨‹ã€CPU)å’ŒæœåŠ¡éš”ç¦»å¼€æ¥èƒ½å¤Ÿä½¿å¾—æŸä¸ªæœåŠ¡çš„æ•…éšœä¸ä¼šå½±å“å…¶ä»–æœåŠ¡çš„è°ƒç”¨ã€‚é€šè¿‡çº¿ç¨‹æ± æˆ–è€…åˆ†æ•£éƒ¨ç½²ç»“ç‚¹å¯ä»¥å¯¹æ•…éšœè¿›è¡Œéš”ç¦»ã€‚æ­¤å¤–ï¼Œä¸ºä¸åŒçš„ç”¨æˆ·æä¾›å•ç‹¬çš„è®¿é—®é€šé“ï¼Œä¸ä»…ä»…èƒ½å¤Ÿåšæ•…éšœéš”ç¦»ï¼Œä¹Ÿæœ‰åˆ©äºŽåšç”¨æˆ·æƒé™æŽ§åˆ¶ã€‚ æˆç†Ÿå¯æŽ§çš„æŠ€æœ¯é€‰åž‹ï¼šä½¿ç”¨å¸‚é¢ä¸Šä¸»æµã€æˆç†Ÿã€æ–‡æ¡£ã€æ”¯æŒèµ„æºå¤šçš„æŠ€æœ¯ï¼Œé€‰æ‹©åˆé€‚çš„è€Œéžæœ€ç«çš„æŠ€æœ¯å®žçŽ°ç³»ç»Ÿã€‚å¦‚æžœé¢å¯¹è‡ªç ”å’Œå¼€æºæŠ€æœ¯çš„é€‰æ‹©ï¼Œéœ€è¦è€ƒè™‘å¥‘åˆåº¦ï¼šå¦‚æžœåŠŸèƒ½éœ€æ±‚å¥‘åˆåº¦å¾ˆé«˜ï¼Œé‚£ä¹ˆé€‰æ‹©å¼€æºå³å¯ï¼›å¦‚æžœå¼€æºæŠ€æœ¯æ˜¯éœ€æ±‚çš„å­é›†æˆ–è€…è¶…é›†ï¼Œé‚£ä¹ˆè¦è¡¡é‡åƒé€è¿™ä¸ªå¼€æºæŠ€æœ¯çš„æˆæœ¬å’Œè‡ªç ”çš„æˆæœ¬é‚£ä¸ªé«˜ã€‚ æ¢¯çº§å­˜å‚¨ï¼šå†…å­˜-&gt;SSDç¡¬ç›˜-&gt;ä¼ ç»Ÿç¡¬ç›˜-&gt;ç£å¸¦ï¼Œå¯ä»¥æ ¹æ®æ•°æ®çš„é‡è¦æ€§å’Œç”Ÿå‘½å‘¨æœŸå¯¹æ•°æ®è¿›è¡Œåˆ†çº§å­˜å‚¨ã€‚ ç¼“å­˜è®¾è®¡ï¼šéš”ç¦»è¯·æ±‚ä¸ŽåŽç«¯é€»è¾‘ã€å­˜å‚¨ï¼Œæ˜¯å°±è¿‘åŽŸåˆ™çš„ä¸€ç§æœºåˆ¶ã€‚åŒ…æ‹¬å®¢æˆ·ç«¯ç¼“å­˜ï¼ˆé¢„å…ˆä¸‹å‘èµ„æºï¼‰ã€Nginxç¼“å­˜ã€æœ¬åœ°ç¼“å­˜ä»¥åŠåˆ†å¸ƒå¼ç¼“å­˜ã€‚ å¼‚æ­¥è®¾è®¡ï¼šå¯¹äºŽè°ƒç”¨æ–¹ä¸å…³æ³¨ç»“æžœæˆ–è€…å…è®¸ç»“æžœå»¶æ—¶è¿”å›žçš„æŽ¥å£ï¼Œé‡‡ç”¨é˜Ÿåˆ—è¿›è¡Œå¼‚æ­¥å“åº”èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦æé«˜ç³»ç»Ÿæ€§èƒ½ï¼›è°ƒç”¨å…¶ä»–æœåŠ¡çš„æ—¶å€™ä¸åŽ»ç­‰å¾…æœåŠ¡æ–¹è¿”å›žç»“æžœç›´æŽ¥è¿”å›žï¼ŒåŒæ ·èƒ½å¤Ÿæå‡ç³»ç»Ÿå“åº”æ€§èƒ½ã€‚å¼‚æ­¥é˜Ÿåˆ—ä¹Ÿæ˜¯è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„å¸¸ç”¨æ‰‹æ®µã€‚ å‰çž»æ€§è®¾è®¡ï¼šæ ¹æ®è¡Œä¸šç»éªŒå’Œå¯¹ä¸šåŠ¡é‡çš„é¢„åˆ¤ï¼Œæå‰æŠŠå¯æ‰©å±•æ€§ã€åŽå‘å…¼å®¹æ€§ã€å®¹é‡é¢„è­¦è®¾è®¡å¥½ã€‚ä»¥é˜²æ­¢è¶…è¿‡ç³»ç»Ÿå®¹é‡åŽé€ æˆå„ç§é—®é¢˜å½±å“æœåŠ¡ã€‚ æ°´å¹³æ‰©å±•ï¼šç›¸æ¯”èµ·åž‚ç›´æ‰©å±•ï¼Œèƒ½å¤Ÿé€šè¿‡å †æœºå™¨è§£å†³é—®é¢˜æ˜¯æœ€ä¼˜å…ˆè€ƒè™‘çš„é—®é¢˜ï¼Œç³»ç»Ÿçš„è´Ÿè½½èƒ½åŠ›ä¹Ÿæ‰èƒ½æŽ¥è¿‘æ— é™æ‰©å±•ã€‚æ­¤å¤–ï¼ŒåŸºäºŽäº‘è®¡ç®—æŠ€æœ¯æ ¹æ®ç³»ç»Ÿçš„è´Ÿè½½è‡ªåŠ¨è°ƒæ•´å®¹é‡èƒ½å¤Ÿåœ¨èŠ‚çœæˆæœ¬çš„åŒæ—¶ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚ å°æ­¥æž„å»ºå’Œå‘å¸ƒï¼šå¿«é€Ÿè¿­ä»£é¡¹ç›®ï¼Œå¿«é€Ÿè¯•é”™ã€‚ä¸èƒ½æœ‰è·¨åº¦æ—¶é—´è¿‡é•¿çš„é¡¹ç›®è§„åˆ’ã€‚ è‡ªåŠ¨åŒ–ï¼šæ‰“åŒ…ã€æµ‹è¯•çš„è‡ªåŠ¨åŒ–ç§°ä¸ºæŒç»­é›†æˆï¼Œéƒ¨ç½²çš„è‡ªåŠ¨åŒ–ç§°ä¸ºæŒç»­éƒ¨ç½²ã€‚è‡ªåŠ¨åŒ–æœºåˆ¶æ˜¯å¿«é€Ÿè¿­ä»£å’Œè¯•é”™çš„åŸºç¡€ä¿è¯ã€‚ æž¶æž„å…­æ­¥æ€è€ƒæ³• ç¬”è€…å¯¹ç¾Žå›¢æ€»æž¶æž„å¸ˆå¤åŽå¤ä¸€æ¬¡åˆ†äº«æå‡ºçš„æž¶æž„å…­æ­¥æ€è€ƒæ³•çš„ç†è§£ã€‚ è¿™é‡Œå°¤å…¶éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯åœ¨é¢å¯¹é—®é¢˜æ—¶ï¼Œé¦–å…ˆè¦è¯•å›¾å°†æœªçŸ¥é—®é¢˜è½¬åŒ–ä¸ºå·²çŸ¥é—®é¢˜ï¼Œè€Œä¸æ˜¯åˆ›é€ æ–°é—®é¢˜ã€‚ æ•°æ®è®¾è®¡åŽŸåˆ™ æ³¨æ„å­˜å‚¨æ•ˆçŽ‡ å‡å°‘äº‹åŠ¡ å‡å°‘è”è¡¨æŸ¥è¯¢ é€‚å½“ä½¿ç”¨ç´¢å¼• è€ƒè™‘ä½¿ç”¨ç¼“å­˜ é¿å…ä¾èµ–äºŽæ•°æ®åº“çš„è¿ç®—åŠŸèƒ½(å‡½æ•°ã€å­˜å‚¨å™¨ã€è§¦å‘å™¨ç­‰)ï¼Œå°†è´Ÿè½½æ”¾åœ¨æ›´å®¹æ˜“æ‰©å±•çš„ä¸šåŠ¡åº”ç”¨ç«¯ æ•°æ®ç»Ÿè®¡åœºæ™¯ä¸­ï¼Œå®žæ—¶æ€§è¦æ±‚è¾ƒé«˜çš„æ•°æ®ç»Ÿè®¡å¯ä»¥ç”¨Redisï¼›éžå®žæ—¶æ•°æ®åˆ™å¯ä»¥ä½¿ç”¨å•ç‹¬è¡¨ï¼Œé€šè¿‡é˜Ÿåˆ—å¼‚æ­¥è¿ç®—æˆ–è€…å®šæ—¶è®¡ç®—æ›´æ–°æ•°æ®ã€‚æ­¤å¤–ï¼Œå¯¹äºŽä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜çš„ç»Ÿè®¡æ•°æ®ï¼Œéœ€è¦ä¾é äº‹åŠ¡æˆ–è€…å®šæ—¶æ ¡å¯¹æœºåˆ¶ä¿è¯å‡†ç¡®æ€§ã€‚ ç´¢å¼•åŒºåˆ†åº¦æ³•åˆ™ï¼šè¾¨è¯†åº¦è¶…è¿‡20%çš„å±žæ€§ï¼Œå¦‚æžœæœ‰æŸ¥è¯¢éœ€æ±‚ï¼Œå°±åº”è¯¥å»ºç«‹ç´¢å¼•ã€‚ å¯¹äºŽæ•°å€¼åž‹æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä¿åºåŽ‹ç¼©æ–¹å¼åœ¨ä¿è¯é¡ºåºä¸å˜çš„å‰æä¸‹å‡å°‘å­—ç¬¦ä¸²é•¿åº¦ã€‚å¦‚ï¼šè¿›è¡Œ36è¿›åˆ¶è½¬åŒ–å³ä¸€ç§ä¿åºåŽ‹ç¼©æ–¹å¼ã€‚ å¤§é‡æ•°æ®çš„åŽ»é‡è®¡æ•°å¦‚æžœå…è®¸è¯¯å·®å¯ä»¥é€‰æ‹©åŸºæ•°ä¼°è®¡ç®—æ³•ï¼ˆHyperhyperlogã€Loglogcountï¼‰æˆ–è€…å¸ƒéš†è¿‡æ»¤å™¨ã€‚ ç³»ç»Ÿå“åº”æ€§èƒ½æå‡äº”æ¿æ–§ å¼‚æ­¥ï¼šé˜Ÿåˆ—ç¼“å†²ã€å¼‚æ­¥è¯·æ±‚ã€‚ å¹¶å‘ï¼šåˆ©ç”¨å¤šCPUå¤šçº¿ç¨‹æ‰§è¡Œä¸šåŠ¡é€»è¾‘ã€‚ å°±è¿‘åŽŸåˆ™ï¼šç¼“å­˜ã€æ¢¯åº¦å­˜å‚¨ã€‚ å‡å°‘IOï¼šåˆå¹¶ç»†ç²’åº¦æŽ¥å£ä¸ºç²—ç²’åº¦æŽ¥å£ã€é¢‘ç¹çš„è¦†ç›–æ“ä½œå¯ä»¥åªåšæœ€åŽä¸€æ¬¡æ“ä½œã€‚è¿™é‡Œä¸€ä¸ªéœ€è¦ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹: ä»£ç ä¸­å°½é‡é¿å…åœ¨å¾ªçŽ¯ä¸­è°ƒç”¨å¤–éƒ¨æœåŠ¡ï¼Œæ›´å¥½çš„åšæ³•æ˜¯ä½¿ç”¨ç²—ç²’åº¦æ‰¹é‡æŽ¥å£åœ¨å¾ªçŽ¯å¤–é¢åªè¿›è¡Œä¸€æ¬¡è¯·æ±‚ã€‚ åˆ†åŒºï¼šé¢‘ç¹è®¿é—®çš„æ•°æ®é›†è§„æ¨¡ä¿æŒåœ¨åˆç†çš„èŒƒå›´ã€‚ ç³»ç»Ÿå®¹é‡è§„åˆ’éœ€è¦å¯¹ç³»ç»Ÿ/å…³é”®æ¨¡å—åšå¥½è¯„ä¼°ã€é‡åŒ–ï¼Œä»¥é˜²æ­¢è¶…å‡ºå®¹é‡æ—¶ä¸è‡³äºŽåŽ‹åž®æœåŠ¡å™¨ï¼Œä»ç„¶èƒ½å¤ŸæœåŠ¡äºŽå¤§éƒ¨åˆ†ç”¨æˆ·ã€‚ æ ¹æ®æµé‡æ¨¡åž‹ã€åŽ†å²æ•°æ®ã€é¢„æµ‹ç®—æ³•é¢„ä¼°æœªæ¥æŸä¸€ä¸ªæ—¶é—´ç‚¹çš„ä¸šåŠ¡é‡ï¼šQPSã€æ¯æ—¥æ•°æ®é‡ç­‰ã€‚ è¯„ä¼°å•ç‚¹æœ€å¤§æ‰¿è½½é‡ï¼ˆæ•°æ®åº“çš„å•ç‚¹æ‰¿è½½æ•°æ®é‡ã€åº”ç”¨æœåŠ¡å™¨çš„å•ç‚¹æ‰¿è½½å¹¶å‘é‡ï¼‰ã€é€šè¿‡æ€§èƒ½æµ‹è¯•ã€‘ï¼Œæ ¹æ®ä¸šåŠ¡é‡è®¡ç®—éœ€è¦éƒ¨ç½²çš„ç»“ç‚¹æ•°ç›®ï¼Œåš1.5å€éƒ¨ç½²ï¼ˆDIDåŽŸåˆ™ï¼‰ã€‚ æ€§èƒ½åŽ‹æµ‹éªŒè¯æ•´ä¸ªç³»ç»Ÿçš„è´Ÿè½½èƒ½åŠ›ã€‚ è®¾è®¡è¾¾åˆ°å®¹é‡é¢„ä¼°å€¼æ—¶çš„é¢„è­¦ã€é™æµã€å¿«é€Ÿæ¢å¤æŽªæ–½ä»¥åŠåŽç»­æ‰©å±•æ–¹æ¡ˆã€‚ PS: åœ¨å®¹é‡é¢„ä¼°ä¸­ï¼Œæœºå™¨æ•°ç›®çš„è®¡ç®—éµå¾ªDIDåŽŸåˆ™ï¼š20å€è®¾è®¡ã€3å€å®žæ–½/å®žçŽ°ã€1.5å€éƒ¨ç½²ã€‚å³éœ€è¦éƒ¨ç½²1.5å€çš„å¯æ‰¿è½½é¢„ä¼°ä¸šåŠ¡æµé‡çš„æœºå™¨æ•°ç›®ã€‚ æž¶æž„é‡æž„çš„åŽŸåˆ™ä¸€ä¸ªç³»ç»Ÿçš„æž¶æž„æ˜¯éšç€ä¸šåŠ¡è€Œä¸æ–­æ¼”åŒ–çš„ï¼Œå› æ­¤ä¸å¯é¿å…åœ°ä¼šç•™ä¸‹å¾ˆå¤šæŠ€æœ¯å€ºã€‚å¦‚æžœä¸€å‘³åœ°ä¸åŽ»ç®¡ï¼Œé‚£ä¹ˆæ€»æœ‰ä¸€å¤©æŠ€æœ¯å€ºä¼šçˆ†å‘å‡ºæ¥é€ æˆæ„æƒ³ä¸åˆ°çš„ç ´åã€‚å› æ­¤å¾ˆå¤šæ—¶å€™å¯¹æž¶æž„çš„é‡æž„æ˜¯å¿…é¡»çš„ã€‚å…¶éœ€è¦éµå¾ªçš„åŽŸåˆ™å¦‚ä¸‹ï¼š ç¡®å®šé‡æž„çš„ç›®çš„å’Œå¿…è¦æ€§ï¼šä¸ºäº†ä¸šåŠ¡éœ€è¦ï¼›æœ‰æ— å…¶ä»–å¤‡é€‰æ–¹æ¡ˆ å®šä¹‰â€œé‡æž„å®Œæˆâ€çš„ç•Œé™ æ¸è¿›å¼é‡æž„ ç¡®å®šå½“å‰çš„æž¶æž„çŠ¶æ€ ä¸è¦å¿½ç•¥æ•°æ® ç®¡ç†å¥½æŠ€æœ¯å€ºåŠ¡ è¿œç¦»é‚£äº›è™šè£çš„ä¸œè¥¿ åšå¥½é¢å¯¹åŽ‹åŠ›çš„å‡†å¤‡ äº†è§£ä¸šåŠ¡ åšå¥½é¢å¯¹éžæŠ€æœ¯å› ç´ çš„å‡†å¤‡ èƒ½å¤ŸæŽŒæ¡ä»£ç è´¨é‡ å…¶ä»– ç³»ç»Ÿæ‰©å±•æ€è·¯ é€šè¿‡å…‹éš†æ‰©å±•-&gt;é«˜å¯ç”¨ é€šè¿‡æ‹†åˆ†ä¸åŒçš„ä¸œè¥¿æ¥æ‰©å±•-&gt;åž‚ç›´æ‰©å±• æ‹†åˆ†ç±»ä¼¼çš„ä¸œè¥¿æ¥æ‰©å±•-&gt;æ°´å¹³æ‰©å±• è®¨è®ºæŠ€æœ¯æ–¹æ¡ˆæ—¶ï¼Œä»¥æ˜¯å¦åˆç†ä¸ºä¾æ®ï¼Œè€Œä¸è¦ä»¥å·¥ä½œé‡å°‘ä¸ºä¾æ®ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>æž¶æž„è®¾è®¡ä¸ŽåŽŸåˆ™</category>
      </categories>
      <tags>
        <tag>æž¶æž„è®¾è®¡ä¸ŽåŽŸåˆ™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è°ˆè°ˆæž¶æž„çš„æ¦‚å¿µã€æž¶æž„çš„å½¢å¼ã€æž¶æž„è®¾è®¡åŽŸåˆ™]]></title>
    <url>%2Fposts%2Fba1b4470.html</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>Java</category>
        <category>æž¶æž„è®¾è®¡ä¸ŽåŽŸåˆ™</category>
      </categories>
      <tags>
        <tag>æž¶æž„è®¾è®¡ä¸ŽåŽŸåˆ™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºåŽŸç”Ÿé«˜é¢œå€¼ç»„ä»¶åº“--ColorUIç»„ä»¶åº“]]></title>
    <url>%2Fposts%2F71ce4a1f.html</url>
    <content type="text"><![CDATA[ç®€ä»‹ColorUIæ˜¯ä¸€ä¸ªCssç±»çš„UIç»„ä»¶åº“ï¼ä¸æ˜¯ä¸€ä¸ªJsæ¡†æž¶ã€‚ç›¸æ¯”äºŽåŒç±»å°ç¨‹åºç»„ä»¶åº“ï¼ŒColorUIæ›´æ³¨é‡äºŽè§†è§‰äº¤äº’ï¼ æµè§ˆGitHubï¼šhttps://github.com/weilanwl/ColorUI å¦‚ä½•ä½¿ç”¨ï¼Ÿå…ˆä¸‹è½½æºç åŒ…â†’ Github å¼•å…¥åˆ°æˆ‘çš„å°ç¨‹åºå°† /demo/ ä¸‹çš„ colorui.wxss å’Œ icon.wxss å¤åˆ¶åˆ°å°ç¨‹åºçš„æ ¹ç›®å½•ä¸‹ åœ¨ app.wxss å¼•å…¥ä¸¤ä¸ªæ–‡ä»¶ 12@import "icon.wxss";@import "colorui.wxss"; ä½¿ç”¨æ¨¡æ¿å…¨æ–°å¼€å‘å¤åˆ¶ /template/ æ–‡ä»¶å¤¹å¹¶é‡å‘½åä¸ºä½ çš„é¡¹ç›®ï¼Œå¾®ä¿¡å¼€å‘è€…å·¥å…·å¯¼å…¥ä¸ºå°ç¨‹åºå°±å¯ä»¥ä½¿ç”¨ColorUIäº† ä½“éªŒæ²‰æµ¸å¼å¯¼èˆª App.js èŽ·å–ç³»ç»Ÿå‚æ•°å¹¶å†™å…¥å…¨å±€å‚æ•°ã€‚ 12345678910111213//App.jsApp(&#123; onLaunch: function() &#123; wx.getSystemInfo(&#123; success: e =&gt; &#123; this.globalData.StatusBar = e.statusBarHeight; let custom = wx.getMenuButtonBoundingClientRect(); this.globalData.Custom = custom; this.globalData.CustomBar = custom.bottom + custom.top - e.statusBarHeight; &#125; &#125;) &#125;&#125;) Page.js é¡µé¢é…ç½®èŽ·å–å…¨å±€å‚æ•°ã€‚ 123456789//Page.jsconst app = getApp()Page(&#123; data: &#123; StatusBar: app.globalData.StatusBar, CustomBar: app.globalData.CustomBar, Custom: app.globalData.Custom &#125; &#125;) Page.wxml é¡µé¢æž„é€ å¯¼èˆªã€‚æ›´å¤šå¯¼èˆªæ ·å¼è¯·ä¸‹è½½DemoæŸ¥é˜… æ“ä½œæ¡ç»„ä»¶ã€‚ 123456789&lt;view class="cu-custom" style="height:&#123;&#123;CustomBar&#125;&#125;px;"&gt; &lt;view class="cu-bar fixed bg-gradual-pink" style="height:&#123;&#123;CustomBar&#125;&#125;px;padding-top:&#123;&#123;StatusBar&#125;&#125;px;"&gt; &lt;navigator class='action border-custom' open-type="navigateBack" delta="1" hover-class="none" style='width:&#123;&#123;Custom.width&#125;&#125;px;height:&#123;&#123;Custom.height&#125;&#125;px;margin-left:calc(750rpx - &#123;&#123;Custom.right&#125;&#125;px)'&gt; &lt;text class='icon-back'&gt;&lt;/text&gt; &lt;text class='icon-homefill'&gt;&lt;/text&gt; &lt;/navigator&gt; &lt;view class='content' style='top:&#123;&#123;StatusBar&#125;&#125;px;'&gt;æ“ä½œæ¡&lt;/view&gt; &lt;/view&gt;&lt;/view&gt; è‡ªå®šä¹‰ç³»ç»ŸTabbar æŒ‰ç…§å®˜æ–¹ è‡ªå®šä¹‰ tabBar é…ç½®å¥½Tabbar (å¼€å‘å·¥å…·å’Œç‰ˆæœ¬åº“è¯·ä½¿ç”¨æœ€æ–°ç‰ˆ)ã€‚ ä½¿ç”¨ColorUIé…ç½®Tabbaråªéœ€è¦æ›´æ”¹ Wxml é¡µçš„å†…å®¹å³å¯ã€‚ æ›´å¤šTabbaræ ·å¼è¯·ä¸‹è½½DemoæŸ¥é˜… æ“ä½œæ¡ç»„ä»¶ã€‚ /custom-tab-bar/index.wxml 12345678 &lt;view class="cu-bar tabbar bg-white shadow"&gt; &lt;view class="action" wx:for="&#123;&#123;list&#125;&#125;" wx:key="index" data-path="&#123;&#123;item.pagePath&#125;&#125;" data-index="&#123;&#123;index&#125;&#125;" bindtap="switchTab"&gt; &lt;view class='icon-cu-image'&gt; &lt;image src='&#123;&#123;selected === index ? item.selectedIconPath : item.iconPath&#125;&#125;' class='&#123;&#123;selected === index ? "animation" : "animation"&#125;&#125;'&gt;&lt;/image&gt; &lt;/view&gt; &lt;view class='&#123;&#123;selected === index ? "text-green" : "text-gray"&#125;&#125;'&gt;&#123;&#123;item.text&#125;&#125;&lt;/view&gt; &lt;/view&gt;&lt;/view&gt; ä½œè€…å¨å¨ColorUIæ˜¯ä¸€ä¸ªé«˜åº¦è‡ªå®šä¹‰çš„Cssæ ·å¼åº“ï¼ŒåŒ…å«äº†å¼€å‘å¸¸ç”¨çš„å…ƒç´ å’Œç»„ä»¶ï¼Œå…ƒç´ ç»„ä»¶ä¹‹é—´ä¹Ÿèƒ½ç›¸äº’åµŒå¥—ä½¿ç”¨ã€‚æˆ‘ä¹Ÿä¼šä¸å®šæœŸæ›´æ–°ä¸€äº›æ‰©å±•åˆ°æºç ã€‚ æ„Ÿè°¢é˜…è¯»ã€‚ è½¬è‡ªé“¾æŽ¥ï¼šhttps://juejin.im/post/5c773b746fb9a049f43bff0f]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>ColorUI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ViewPagerè¦è¢«åºŸå¼ƒï¼Ÿå®˜æ–¹ViewPager2å‡çº§ç‰ˆæ¥ä¸´]]></title>
    <url>%2Fposts%2Fabf696ca.html</url>
    <content type="text"><![CDATA[ä»Žæ–‡æ¡£æ³¨é‡Šæ¥çœ‹ViewPager2ç¡®å®žæ˜¯ç”¨æ¥æ›¿ä»£ViewPager çš„ï¼Œé¡ºå¸¦è§£å†³ä¹‹å‰ViewPagerçš„ä¸€äº›é—®é¢˜ï¼Œå¹¶ä¸”åŠ å…¥äº† RTL,ç«–å‘æ»šåŠ¨æ”¯æŒï¼Œä¸‹é¢ä¸€èµ·æ¥è¯¦ç»†çœ‹ä¸‹å§ã€‚ ViewPager2 replaces ViewPager, addressing most of its predecessorâ€™s pain-points, including right-to-left layout support, vertical orientation, modifiable Fragment collections, etc. æ¦‚è¿°è¿™ä¸¤å¤©æµè§ˆå®‰å“å¼€å‘è€…å®˜ç½‘çš„æ—¶å€™ï¼Œå‘çŽ°googleæ‚„ç„¶æŽ¨å‡ºäº†ä¸€ä¸ªæ–°çš„æŽ§ä»¶ï¼šViewPager2ï¼Œä¸€çœ‹åç§°å°±çŸ¥é“è¿™æ˜¯ä¸€ä¸ªå’Œæˆ‘ä»¬å¸¸ç”¨çš„ViewPageråŠŸèƒ½ç›¸ä¼¼çš„æŽ§ä»¶ï¼Œç®—æ˜¯ViewPagerçš„å‡çº§ç‰ˆå§ã€‚ç›®å‰è¿˜åªæ˜¯æŽ¨å‡ºäº†ç¬¬ä¸€ä¸ªé¢„è§ˆç‰ˆï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥å¼•å…¥æ¥ä½¿ç”¨äº†ï¼š 1implementation &apos;androidx.viewpager2:viewpager2:1.0.0-alpha01&apos; https://developer.android.google.cn/reference/androidx/viewpager2/widget/ViewPager2 æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ‰å“ªäº›åŠŸèƒ½å’Œä½¿ç”¨ä¸Šçš„å˜åŒ–ï¼š æ–°åŠŸèƒ½ï¼š æ”¯æŒRTLå¸ƒå±€ æ”¯æŒç«–å‘æ»šåŠ¨ å®Œæ•´æ”¯æŒnotifyDataSetChanged APIçš„å˜åŠ¨ï¼š FragmentStateAdapteræ›¿æ¢äº†åŽŸæ¥çš„ FragmentStatePagerAdapter RecyclerView.Adapteræ›¿æ¢äº†åŽŸæ¥çš„ PagerAdapter registerOnPageChangeCallbackæ›¿æ¢äº†åŽŸæ¥çš„ addPageChangeListener çœ‹äº†ä¸Šé¢è¿™äº›ä»‹ç»ï¼Œæœ‰ä¸€ç‚¹æ¯”è¾ƒå¸å¼•äººçš„å°±æ˜¯æ”¯æŒç«–å‘æ»šåŠ¨äº†ï¼Œè¿™æ˜¯æ€Žä¹ˆå®žçŽ°çš„å‘¢ï¼ŸViewPager2çš„æºç ä¸é•¿ï¼Œæˆ‘ä»¬æ¥ç®€å•åˆ†æžä¸€ä¸‹ã€‚ ç®€å•è§£æžé€šè¿‡æŸ¥çœ‹æºç å¾—çŸ¥ï¼ŒViewPager2æ˜¯ç›´æŽ¥ç»§æ‰¿ViewGroupçš„ï¼Œæ„å‘³ç€å’ŒViewPagerä¸å…¼å®¹ï¼Œç±»æ³¨é‡Šä¸Šä¹Ÿå†™äº†å®ƒçš„ä½œç”¨æ˜¯å–ä»£ViewPagerï¼Œä¸è¿‡çŸ­æ—¶é—´å†…ViewPageråº”è¯¥è¿˜ä¸ä¼šè¢«åºŸå¼ƒæŽ‰ã€‚ ç»§ç»­æŸ¥çœ‹æºç ï¼Œå‘çŽ°äº†ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„æˆå‘˜å˜é‡ï¼š 12private RecyclerView mRecyclerView;private LinearLayoutManager mLayoutManager; æ‰€ä»¥å¾ˆæ¸…æ¥šå¾—çŸ¥ï¼ŒViewPager2çš„æ ¸å¿ƒå®žçŽ°å°±æ˜¯RecyclerView+LinearLayoutManageräº†ï¼Œå› ä¸ºLinearLayoutManageræœ¬èº«å°±æ”¯æŒç«–å‘å’Œæ¨ªå‘ä¸¤ç§å¸ƒå±€æ–¹å¼ï¼Œæ‰€ä»¥ViewPager2ä¹Ÿèƒ½å¾ˆå®¹æ˜“åœ°æ”¯æŒè¿™ä¸¤ç§æ»šåŠ¨æ–¹å‘äº†ï¼Œè€Œå‡ ä¹Žä¸éœ€è¦æ·»åŠ ä»»ä½•å¤šä½™çš„ä»£ç ã€‚ å…¶å®žåœ¨æ­¤ä¹‹å‰ä¹Ÿä¸ä¹æœ‰å¤§ç¥žé‡‡ç”¨RecyclerViewæ¥å®žçŽ°è½®æ’­å›¾æ•ˆæžœçš„ï¼Œå…·ä½“å®žçŽ°å‘ç”Ÿç•¥æœ‰ä¸åŒï¼Œä½†å¤§ä½“æ€æƒ³æ˜¯ä¸€è‡´çš„ã€‚è¿™æ¬¡ViewPager2çš„æŽ¨å‡ºæ„å‘³ç€è¿™ç§æ–¹æ³•ç»ˆäºŽè¢«æ‰¶æ­£äº†ã€‚ ä¸ºäº†è®©RecyclerViewå˜å¾—åƒåŽŸæ¥çš„ViewPagerï¼Œéœ€è¦è®¾ç½®ä¸‹SnapHelperï¼š 1new PagerSnapHelper().attachToRecyclerView(mRecyclerView); ç†Ÿæ‚‰RecyclerViewçš„åŒå­¦éƒ½çŸ¥é“ï¼ŒSnapHelperç”¨äºŽè¾…åŠ©RecyclerViewåœ¨æ»šåŠ¨ç»“æŸæ—¶å°†Itemå¯¹é½åˆ°æŸä¸ªä½ç½®ã€‚PagerSnapHelperçš„ä½œç”¨è®©æ»‘åŠ¨ç»“æŸæ—¶ä½¿å½“å‰Itemå±…ä¸­æ˜¾ç¤ºï¼Œå¹¶ä¸” é™åˆ¶ä¸€æ¬¡åªèƒ½æ»‘åŠ¨ä¸€é¡µï¼Œä¸èƒ½å¿«é€Ÿæ»‘åŠ¨ï¼Œè¿™æ ·å°±å’Œviewpagerçš„äº¤äº’å¾ˆåƒäº†ã€‚ å¦å¤–å’Œviewpagerä¸€æ ·ï¼Œviewpager2å¯ä»¥æ‰¿è½½fragmentï¼Œæˆ‘ä»¬éœ€è¦ç»§æ‰¿å®žçŽ°å®ƒæä¾›çš„FragmentStateAdapterï¼š 12public abstract class FragmentStateAdapter extends RecyclerView.Adapter&lt;FragmentViewHolder&gt; implements StatefulAdapter è¿™æ˜¯ä¸€ä¸ªåŒ…å«FragmentManagerå’Œæ•°æ®çŠ¶æ€æ¢å¤åŠŸèƒ½çš„RecyclerView.Adapterï¼Œå…·ä½“å®žçŽ°å¯ä»¥å‚çœ‹æºç ã€‚æ‰€ä»¥å¤§å®¶ä¹Ÿå¯ä»¥ç”¨TabLayout+ViewPager2+Fragmentæ¥å®žçŽ°è”åŠ¨å±•ç¤ºæ•ˆæžœã€‚ ä½¿ç”¨é€šè¿‡android:orientationæ¥æŒ‡å®šæ»šåŠ¨æ–¹å‘ 12345&lt;androidx.viewpager2.widget.ViewPager2 android:id="@+id/viewpager2" android:layout_width="match_parent" android:layout_height="200dp" android:orientation="vertical" /&gt; åœ¨ä»£ç ä¸­è®¾ç½®ä¸€ä¸ªæ™®é€šçš„RecyclerView.adapterï¼š 123ViewPager2 viewPager2=findViewById(R.id.viewpager2);RecyclerviewAdapter adapter = new RecyclerviewAdapter(this);viewPager2.setAdapter(adapter); è¿™æ ·ç«–ç›´è½®æ’­å›¾å°±å¤§åŠŸå‘Šæˆäº†ã€‚ å°ç»“viewpager2åˆ©ç”¨recyclerviewæ¥å®žçŽ°viewpagerçš„åŠŸèƒ½ï¼Œæ— ç–‘ä½¿ä½¿å…¶å¯æ‰©å±•æ€§å¤§å¤§æå‡ï¼Œä»£ç ä¹Ÿå˜å¾—æ›´ä¼˜é›…ç®€æ´ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ›´çµæ´»ã€‚ä¸è¿‡ç›®å‰viewpager2åªæ˜¯ç¬¬ä¸€ä¸ªé¢„è§ˆç‰ˆï¼Œè¿˜å­˜åœ¨ç¨³å®šæ€§æ–¹é¢çš„é—®é¢˜ï¼Œä¸å»ºè®®å¤§å®¶å¼•å…¥åˆ°æ­£å¼é¡¹ç›®ä¸­æ¥ï¼Œå°å°é²œå°±å¥½ã€‚ PSï¼šå¦‚æžœæœ‰è°æ„¿æ„æ·±å…¥è§£æžï¼Œç¤ºä¾‹å¯¹æ¯”æ¼”ç¤ºç­‰ï¼Œæ¬¢è¿Žç«é€Ÿè”ç³»æˆ‘ï¼ŒæŠ•ç¨¿åˆ†äº«ç»™å¤§å®¶ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ViewPager</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java å‡½æ•°å¼ç¼–ç¨‹å’Œ lambda è¡¨è¾¾å¼]]></title>
    <url>%2Fposts%2F81a39ed5.html</url>
    <content type="text"><![CDATA[ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å‡½æ•°å¼ç¼–ç¨‹æ›´å¤šæ—¶å€™æ˜¯ä¸€ç§ç¼–ç¨‹çš„æ€ç»´æ–¹å¼ï¼Œæ˜¯ç§æ–¹æ³•è®ºã€‚å‡½æ•°å¼ä¸Žå‘½ä»¤å¼ç¼–ç¨‹çš„åŒºåˆ«ä¸»è¦åœ¨äºŽï¼šå‡½æ•°å¼ç¼–ç¨‹æ˜¯å‘Šè¯‰ä»£ç ä½ è¦åšä»€ä¹ˆï¼Œè€Œå‘½ä»¤å¼ç¼–ç¨‹åˆ™æ˜¯å‘Šè¯‰ä»£ç è¦æ€Žä¹ˆåšã€‚è¯´ç™½äº†ï¼Œå‡½æ•°å¼ç¼–ç¨‹æ˜¯åŸºäºŽæŸç§è¯­æ³•æˆ–è°ƒç”¨APIåŽ»è¿›è¡Œç¼–ç¨‹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çŽ°åœ¨éœ€è¦ä»Žä¸€ç»„æ•°å­—ä¸­ï¼Œæ‰¾å‡ºæœ€å°çš„é‚£ä¸ªæ•°å­—ï¼Œè‹¥ä½¿ç”¨ç”¨å‘½ä»¤å¼ç¼–ç¨‹å®žçŽ°è¿™ä¸ªéœ€æ±‚çš„è¯ï¼Œé‚£ä¹ˆæ‰€ç¼–å†™çš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011public static void main(String[] args) &#123; int[] nums = new int[]&#123;1, 2, 3, 4, 5, 6, 7, 8&#125;; int min = Integer.MAX_VALUE; for (int num : nums) &#123; if (num &lt; min) &#123; min = num; &#125; &#125; System.out.println(min);&#125; è€Œä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹è¿›è¡Œå®žçŽ°çš„è¯ï¼Œæ‰€ç¼–å†™çš„ä»£ç å¦‚ä¸‹ï¼š 123456public static void main(String[] args) &#123; int[] nums = new int[]&#123;1, 2, 3, 4, 5, 6, 7, 8&#125;; int min = IntStream.of(nums).min().getAsInt(); System.out.println(min);&#125; ä»Žä»¥ä¸Šçš„ä¸¤ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå‘½ä»¤å¼ç¼–ç¨‹éœ€è¦è‡ªå·±åŽ»å®žçŽ°å…·ä½“çš„é€»è¾‘ç»†èŠ‚ã€‚è€Œå‡½æ•°å¼ç¼–ç¨‹åˆ™æ˜¯è°ƒç”¨APIå®Œæˆéœ€æ±‚çš„å®žçŽ°ï¼Œå°†åŽŸæœ¬å‘½ä»¤å¼çš„ä»£ç å†™æˆä¸€ç³»åˆ—åµŒå¥—çš„å‡½æ•°è°ƒç”¨ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸‹æ˜¾å¾—ä»£ç æ›´ç®€æ´ã€æ˜“æ‡‚ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„åŽŸå› ä¹‹ä¸€ã€‚æ‰€ä»¥æ‰è¯´å‡½æ•°å¼ç¼–ç¨‹æ˜¯å‘Šè¯‰ä»£ç ä½ è¦åšä»€ä¹ˆï¼Œè€Œå‘½ä»¤å¼ç¼–ç¨‹åˆ™æ˜¯å‘Šè¯‰ä»£ç è¦æ€Žä¹ˆåšï¼Œæ˜¯ä¸€ç§æ€ç»´çš„è½¬å˜ã€‚ è¯´åˆ°å‡½æ•°å¼ç¼–ç¨‹å°±ä¸å¾—ä¸æä¸€ä¸‹lambdaè¡¨è¾¾å¼ï¼Œå®ƒæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„åŸºç¡€ã€‚åœ¨Javaè¿˜ä¸æ”¯æŒlambdaè¡¨è¾¾å¼æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªçº¿ç¨‹çš„è¯ï¼Œéœ€è¦ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š 12345678public static void main(String[] args) &#123; new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println("running"); &#125; &#125;).start();&#125; è€Œä½¿ç”¨lambdaè¡¨è¾¾å¼ä¸€å¥ä»£ç å°±èƒ½å®Œæˆçº¿ç¨‹çš„åˆ›å»ºï¼Œlambdaå¼ºè°ƒäº†å‡½æ•°çš„è¾“å…¥è¾“å‡ºï¼Œéšè—äº†è¿‡ç¨‹çš„ç»†èŠ‚ï¼Œå¹¶ä¸”å¯ä»¥æŽ¥å—å‡½æ•°å½“ä½œè¾“å…¥ï¼ˆå‚æ•°ï¼‰å’Œè¾“å‡ºï¼ˆè¿”å›žå€¼ï¼‰ï¼š 123public static void main(String[] args) &#123; new Thread(() -&gt; System.out.println("running")).start();&#125; æ³¨ï¼šç®­å¤´çš„å·¦è¾¹æ˜¯è¾“å…¥ï¼Œå³è¾¹åˆ™æ˜¯è¾“å‡º è¯¥lambdaè¡¨è¾¾å¼çš„ä½œç”¨å…¶å®žå°±æ˜¯è¿”å›žäº†RunnableæŽ¥å£çš„å®žçŽ°å¯¹è±¡ï¼Œè¿™ä¸Žæˆ‘ä»¬è°ƒç”¨æŸä¸ªæ–¹æ³•èŽ·å–å®žä¾‹å¯¹è±¡ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯å°†å®žçŽ°ä»£ç ç›´æŽ¥å†™åœ¨äº†lambdaè¡¨è¾¾å¼é‡Œã€‚æˆ‘ä»¬å¯ä»¥åšä¸ªç®€å•çš„å¯¹æ¯”ï¼š 1234public static void main(String[] args) &#123; Runnable runnable1 = () -&gt; System.out.println("running"); Runnable runnable2 = RunnableFactory.getInstance();&#125; JDK8æŽ¥å£æ–°ç‰¹æ€§1.å‡½æ•°æŽ¥å£ï¼ŒæŽ¥å£åªèƒ½æœ‰ä¸€ä¸ªéœ€è¦å®žçŽ°çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨@FunctionalInterface æ³¨è§£è¿›è¡Œå£°æ˜Žã€‚å¦‚ä¸‹ï¼š 1234@FunctionalInterfaceinterface Interface1 &#123; int doubleNum(int i);&#125; ä½¿ç”¨lambdaè¡¨è¾¾å¼èŽ·å–è¯¥æŽ¥å£çš„å®žçŽ°å®žä¾‹çš„å‡ ç§å†™æ³•ï¼š 1234567891011121314public static void main(String[] args) &#123; // æœ€å¸¸è§çš„å†™æ³• Interface1 i1 = (i) -&gt; i * 2; Interface1 i2 = i -&gt; i * 2; // å¯ä»¥æŒ‡å®šå‚æ•°ç±»åž‹ Interface1 i3 = (int i) -&gt; i * 2; // è‹¥æœ‰å¤šè¡Œä»£ç å¯ä»¥è¿™ä¹ˆå†™ Interface1 i4 = (int i) -&gt; &#123; System.out.println(i); return i * 2; &#125;;&#125; 2.æ¯”è¾ƒé‡è¦çš„ä¸€ä¸ªæŽ¥å£ç‰¹æ€§æ˜¯æŽ¥å£çš„é»˜è®¤æ–¹æ³•ï¼Œç”¨äºŽæä¾›é»˜è®¤å®žçŽ°ã€‚é»˜è®¤æ–¹æ³•å’Œæ™®é€šå®žçŽ°ç±»çš„æ–¹æ³•ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨thisç­‰å…³é”®å­—ï¼š 12345678@FunctionalInterfaceinterface Interface1 &#123; int doubleNum(int i); default int add(int x, int y) &#123; return x + y; &#125;&#125; ä¹‹æ‰€ä»¥è¯´é»˜è®¤æ–¹æ³•è¿™ä¸ªç‰¹æ€§æ¯”è¾ƒé‡è¦ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬å€ŸåŠ©è¿™ä¸ªç‰¹æ€§å¯ä»¥åœ¨ä»¥å‰æ‰€ç¼–å†™çš„ä¸€äº›æŽ¥å£ä¸Šæä¾›é»˜è®¤å®žçŽ°ï¼Œå¹¶ä¸”ä¸ä¼šå½±å“ä»»ä½•çš„å®žçŽ°ç±»ä»¥åŠæ—¢æœ‰çš„ä»£ç ã€‚ä¾‹å¦‚æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ListæŽ¥å£ï¼Œåœ¨JDK1.2ä»¥æ¥ListæŽ¥å£å°±æ²¡æœ‰æ”¹åŠ¨è¿‡ä»»ä½•ä»£ç ï¼Œåˆ°äº†1.8ä¹‹åŽæ‰ä½¿ç”¨è¿™ä¸ªæ–°ç‰¹æ€§å¢žåŠ äº†ä¸€äº›é»˜è®¤å®žçŽ°ã€‚è¿™æ˜¯å› ä¸ºå¦‚æžœæ²¡æœ‰é»˜è®¤æ–¹æ³•çš„ç‰¹æ€§çš„è¯ï¼Œä¿®æ”¹æŽ¥å£ä»£ç å¸¦æ¥çš„å½±å“æ˜¯å·¨å¤§çš„ï¼Œè€Œæœ‰äº†é»˜è®¤æ–¹æ³•åŽï¼Œå¢žåŠ é»˜è®¤å®žçŽ°å¯ä»¥ä¸å½±å“ä»»ä½•çš„ä»£ç ã€‚ 3.å½“æŽ¥å£å¤šé‡ç»§æ‰¿æ—¶ï¼Œå¯èƒ½ä¼šå‘ç”Ÿé»˜è®¤æ–¹æ³•è¦†ç›–çš„é—®é¢˜ï¼Œè¿™æ—¶å¯ä»¥åŽ»æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªæŽ¥å£çš„é»˜è®¤æ–¹æ³•å®žçŽ°ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627@FunctionalInterfaceinterface Interface1 &#123; int doubleNum(int i); default int add(int x, int y) &#123; return x + y; &#125;&#125;@FunctionalInterfaceinterface Interface2 &#123; int doubleNum(int i); default int add(int x, int y) &#123; return x + y; &#125;&#125;@FunctionalInterfaceinterface Interface3 extends Interface1, Interface2 &#123; @Override default int add(int x, int y) &#123; // æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªæŽ¥å£çš„é»˜è®¤æ–¹æ³•å®žçŽ° return Interface1.super.add(x, y); &#125;&#125; å‡½æ•°æŽ¥å£æˆ‘ä»¬æœ¬å°èŠ‚æ¥çœ‹çœ‹JDK8é‡Œè‡ªå¸¦äº†å“ªäº›é‡è¦çš„å‡½æ•°æŽ¥å£ï¼š å¯ä»¥çœ‹åˆ°ä¸Šè¡¨ä¸­æœ‰å¥½å‡ ä¸ªæŽ¥å£ï¼Œè€Œå…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯FunctionæŽ¥å£ï¼Œå®ƒèƒ½ä¸ºæˆ‘ä»¬çœåŽ»å®šä¹‰ä¸€äº›ä¸å¿…è¦çš„å‡½æ•°æŽ¥å£ï¼Œå‡å°‘æŽ¥å£çš„æ•°é‡ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¼”ç¤ºä¸€ä¸‹ Function æŽ¥å£çš„ä½¿ç”¨ï¼š 123456789101112131415161718192021222324import java.text.DecimalFormat;import java.util.function.Function;class MyMoney &#123; private final int money; public MyMoney(int money) &#123; this.money = money; &#125; public void printMoney(Function&lt;Integer, String&gt; moneyFormat) &#123; System.out.println("æˆ‘çš„å­˜æ¬¾: " + moneyFormat.apply(this.money)); &#125;&#125;public class MoneyDemo &#123; public static void main(String[] args) &#123; MyMoney me = new MyMoney(99999999); Function&lt;Integer, String&gt; moneyFormat = i -&gt; new DecimalFormat("#,###").format(i); // å‡½æ•°æŽ¥å£æ”¯æŒé“¾å¼æ“ä½œï¼Œä¾‹å¦‚å¢žåŠ ä¸€ä¸ªå­—ç¬¦ä¸² me.printMoney(moneyFormat.andThen(s -&gt; "äººæ°‘å¸ " + s)); &#125;&#125; è¿è¡Œä»¥ä¸Šä¾‹å­ï¼ŒæŽ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š 1æˆ‘çš„å­˜æ¬¾: äººæ°‘å¸ 99,999,999 è‹¥åœ¨è¿™ä¸ªä¾‹å­ä¸­ä¸ä½¿ç”¨FunctionæŽ¥å£çš„è¯ï¼Œåˆ™éœ€è¦è‡ªè¡Œå®šä¹‰ä¸€ä¸ªå‡½æ•°æŽ¥å£ï¼Œå¹¶ä¸”ä¸æ”¯æŒé“¾å¼æ“ä½œï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728import java.text.DecimalFormat;// è‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•°æŽ¥å£@FunctionalInterfaceinterface IMoneyFormat &#123; String format(int i);&#125;class MyMoney &#123; private final int money; public MyMoney(int money) &#123; this.money = money; &#125; public void printMoney(IMoneyFormat moneyFormat) &#123; System.out.println("æˆ‘çš„å­˜æ¬¾: " + moneyFormat.format(this.money)); &#125;&#125;public class MoneyDemo &#123; public static void main(String[] args) &#123; MyMoney me = new MyMoney(99999999); IMoneyFormat moneyFormat = i -&gt; new DecimalFormat("#,###").format(i); me.printMoney(moneyFormat); &#125;&#125; ç„¶åŽæˆ‘ä»¬å†æ¥çœ‹çœ‹PredicateæŽ¥å£å’ŒConsumeræŽ¥å£çš„ä½¿ç”¨ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 123456789public static void main(String[] args) &#123; // æ–­è¨€å‡½æ•°æŽ¥å£ Predicate&lt;Integer&gt; predicate = i -&gt; i &gt; 0; System.out.println(predicate.test(-9)); // æ¶ˆè´¹å‡½æ•°æŽ¥å£ Consumer&lt;String&gt; consumer = System.out::println; consumer.accept("è¿™æ˜¯è¾“å…¥çš„æ•°æ®");&#125; è¿è¡Œä»¥ä¸Šä¾‹å­ï¼ŒæŽ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š 12falseè¿™æ˜¯è¾“å…¥çš„æ•°æ® è¿™äº›æŽ¥å£ä¸€èˆ¬æœ‰å¯¹åŸºæœ¬ç±»åž‹çš„å°è£…ï¼Œä½¿ç”¨ç‰¹å®šç±»åž‹çš„æŽ¥å£å°±ä¸éœ€è¦åŽ»æŒ‡å®šæ³›åž‹äº†ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 123456789public static void main(String[] args) &#123; // æ–­è¨€å‡½æ•°æŽ¥å£ IntPredicate intPredicate = i -&gt; i &gt; 0; System.out.println(intPredicate.test(-9)); // æ¶ˆè´¹å‡½æ•°æŽ¥å£ IntConsumer intConsumer = (value) -&gt; System.out.println("è¾“å…¥çš„æ•°æ®æ˜¯ï¼š" + value); intConsumer.accept(123);&#125; è¿è¡Œä»¥ä¸Šä»£ç ï¼ŒæŽ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š 12falseè¾“å…¥çš„æ•°æ®æ˜¯ï¼š123 æœ‰äº†ä»¥ä¸ŠæŽ¥å£ç¤ºä¾‹çš„é“ºåž«ï¼Œæˆ‘ä»¬åº”è¯¥å¯¹å‡½æ•°æŽ¥å£çš„ä½¿ç”¨æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„äº†è§£ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬æ¼”ç¤ºå‰©ä¸‹çš„å‡½æ•°æŽ¥å£ä½¿ç”¨æ–¹å¼ï¼š 12345678910111213public static void main(String[] args) &#123; // æä¾›æ•°æ®æŽ¥å£ Supplier&lt;Integer&gt; supplier = () -&gt; 10 + 1; System.out.println("æä¾›çš„æ•°æ®æ˜¯ï¼š" + supplier.get()); // ä¸€å…ƒå‡½æ•°æŽ¥å£ UnaryOperator&lt;Integer&gt; unaryOperator = i -&gt; i * 2; System.out.println("è®¡ç®—ç»“æžœä¸ºï¼š" + unaryOperator.apply(10)); // äºŒå…ƒå‡½æ•°æŽ¥å£ BinaryOperator&lt;Integer&gt; binaryOperator = (a, b) -&gt; a * b; System.out.println("è®¡ç®—ç»“æžœä¸ºï¼š" + binaryOperator.apply(10, 10));&#125; è¿è¡Œä»¥ä¸Šä»£ç ï¼ŒæŽ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š 123æä¾›çš„æ•°æ®æ˜¯ï¼š11è®¡ç®—ç»“æžœä¸ºï¼š20è®¡ç®—ç»“æžœä¸ºï¼š100 è€ŒBiFunctionæŽ¥å£å°±æ˜¯æ¯”FunctionæŽ¥å£å¤šäº†ä¸€ä¸ªè¾“å…¥è€Œå·²ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 12345678910111213141516171819202122class MyMoney &#123; private final int money; private final String name; public MyMoney(int money, String name) &#123; this.money = money; this.name = name; &#125; public void printMoney(BiFunction&lt;Integer, String, String&gt; moneyFormat) &#123; System.out.println(moneyFormat.apply(this.money, this.name)); &#125;&#125;public class MoneyDemo &#123; public static void main(String[] args) &#123; MyMoney me = new MyMoney(99999999, "å°æ˜Ž"); BiFunction&lt;Integer, String, String&gt; moneyFormat = (i, name) -&gt; name + "çš„å­˜æ¬¾: " + new DecimalFormat("#,###").format(i); me.printMoney(moneyFormat); &#125;&#125; è¿è¡Œä»¥ä¸Šä»£ç ï¼ŒæŽ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š 1å°æ˜Žçš„å­˜æ¬¾: 99,999,999 æ–¹æ³•å¼•ç”¨åœ¨å­¦ä¹ äº†lambdaè¡¨è¾¾å¼ä¹‹åŽï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥åˆ›å»ºåŒ¿åæ–¹æ³•ã€‚ä½†æœ‰çš„æ—¶å€™æˆ‘ä»¬ä»…ä»…æ˜¯éœ€è¦è°ƒç”¨ä¸€ä¸ªå·²å­˜åœ¨çš„æ–¹æ³•ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š 1Arrays.sort(stringsArray, (s1, s2) -&gt; s1.compareToIgnoreCase(s2)); åœ¨jdk8ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæ–°ç‰¹æ€§æ¥ç®€å†™è¿™æ®µlambdaè¡¨è¾¾å¼ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š 1Arrays.sort(stringsArray, String::compareToIgnoreCase); è¿™ç§ç‰¹æ€§å°±å«åšæ–¹æ³•å¼•ç”¨(Method Reference)ã€‚æ–¹æ³•å¼•ç”¨çš„æ ‡å‡†å½¢å¼æ˜¯ï¼šç±»å::æ–¹æ³•åã€‚ï¼ˆæ³¨æ„ï¼šåªéœ€è¦å†™æ–¹æ³•åï¼Œä¸éœ€è¦å†™æ‹¬å·ï¼‰ã€‚ ç›®å‰æ–¹æ³•å¼•ç”¨å…±æœ‰ä»¥ä¸‹å››ç§å½¢å¼ï¼š ç±»åž‹ ç¤ºä¾‹ ä»£ç ç¤ºä¾‹ å¯¹åº”çš„Lambdaè¡¨è¾¾å¼ å¼•ç”¨é™æ€æ–¹æ³• ContainingClass::staticMethodName String::valueOf (s) -&gt; String.valueOf(s) å¼•ç”¨æŸä¸ªå¯¹è±¡çš„å®žä¾‹æ–¹æ³• containingObject::instanceMethodName x::toString() () -&gt; this.toString() å¼•ç”¨æŸä¸ªç±»åž‹çš„ä»»æ„å¯¹è±¡çš„å®žä¾‹æ–¹æ³• ContainingType::methodName String::toString (s) -&gt; s.toString å¼•ç”¨æž„é€ æ–¹æ³• ClassName::new String::new () -&gt; new String() ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥æ¼”ç¤ºä¸€ä¸‹æ–¹æ³•å¼•ç”¨çš„å‡ ç§å†™æ³•ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªå®žä½“ç±»ï¼š 1234567891011121314151617181920212223242526public class Dog &#123; private String name = "äºŒå“ˆ"; private int food = 10; public Dog() &#123; &#125; public Dog(String name) &#123; this.name = name; &#125; public static void bark(Dog dog) &#123; System.out.println(dog + "å«äº†"); &#125; public int eat(int num) &#123; System.out.println("åƒäº†" + num + "æ–¤"); this.food -= num; return this.food; &#125; @Override public String toString() &#123; return this.name; &#125;&#125; é€šè¿‡æ–¹æ³•å¼•ç”¨æ¥è°ƒç”¨è¯¥å®žä½“ç±»ä¸­çš„æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940package org.zero01.example.demo;import java.util.function.*;/** * @ProjectName demo * @Author: zeroJun * @Date: 2018/9/21 13:09 * @Description: æ–¹æ³•å¼•ç”¨demo */public class MethodRefrenceDemo &#123; public static void main(String[] args) &#123; // æ–¹æ³•å¼•ç”¨ï¼Œè°ƒç”¨æ‰“å°æ–¹æ³• Consumer&lt;String&gt; consumer = System.out::println; consumer.accept("æŽ¥æ”¶çš„æ•°æ®"); // é™æ€æ–¹æ³•å¼•ç”¨ï¼Œé€šè¿‡ç±»åå³å¯è°ƒç”¨ Consumer&lt;Dog&gt; consumer2 = Dog::bark; consumer2.accept(new Dog()); // å®žä¾‹æ–¹æ³•å¼•ç”¨ï¼Œé€šè¿‡å¯¹è±¡å®žä¾‹è¿›è¡Œå¼•ç”¨ Dog dog = new Dog(); IntUnaryOperator function = dog::eat; System.out.println("è¿˜å‰©ä¸‹" + function.applyAsInt(2) + "æ–¤"); // å¦ä¸€ç§é€šè¿‡å®žä¾‹æ–¹æ³•å¼•ç”¨çš„æ–¹å¼ï¼Œä¹‹æ‰€ä»¥å¯ä»¥è¿™ä¹ˆå¹²æ˜¯å› ä¸ºJDKé»˜è®¤ä¼šæŠŠå½“å‰å®žä¾‹ä¼ å…¥åˆ°éžé™æ€æ–¹æ³•ï¼Œå‚æ•°åä¸ºthisï¼Œå‚æ•°ä½ç½®ä¸ºç¬¬ä¸€ä¸ªï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨éžé™æ€æ–¹æ³•ä¸­æ‰èƒ½è®¿é—®thisï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡BiFunctionä¼ å…¥å®žä¾‹å¯¹è±¡è¿›è¡Œå®žä¾‹æ–¹æ³•çš„å¼•ç”¨ Dog dog2 = new Dog(); BiFunction&lt;Dog, Integer, Integer&gt; biFunction = Dog::eat; System.out.println("è¿˜å‰©ä¸‹" + biFunction.apply(dog2, 2) + "æ–¤"); // æ— å‚æž„é€ å‡½æ•°çš„æ–¹æ³•å¼•ç”¨ï¼Œç±»ä¼¼äºŽé™æ€æ–¹æ³•å¼•ç”¨ï¼Œåªéœ€è¦åˆ†æžå¥½è¾“å…¥è¾“å‡ºå³å¯ Supplier&lt;Dog&gt; supplier = Dog::new; System.out.println("åˆ›å»ºäº†æ–°å¯¹è±¡ï¼š" + supplier.get()); // æœ‰å‚æž„é€ å‡½æ•°çš„æ–¹æ³•å¼•ç”¨ Function&lt;String, Dog&gt; function2 = Dog::new; System.out.println("åˆ›å»ºäº†æ–°å¯¹è±¡ï¼š" + function2.apply("æ—ºè´¢")); &#125;&#125; ç±»åž‹æŽ¨æ–­é€šè¿‡ä»¥ä¸Šçš„ä¾‹å­ï¼Œæˆ‘ä»¬çŸ¥é“ä¹‹æ‰€ä»¥èƒ½å¤Ÿä½¿ç”¨Lambdaè¡¨è¾¾å¼çš„ä¾æ®æ˜¯å¿…é¡»æœ‰ç›¸åº”çš„å‡½æ•°æŽ¥å£ã€‚è¿™ä¸€ç‚¹è·ŸJavaæ˜¯å¼ºç±»åž‹è¯­è¨€å»åˆï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¹¶ä¸èƒ½åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹ä»»æ€§çš„å†™Lambdaè¡¨è¾¾å¼ã€‚å®žé™…ä¸ŠLambdaçš„ç±»åž‹å°±æ˜¯å¯¹åº”å‡½æ•°æŽ¥å£çš„ç±»åž‹ã€‚Lambdaè¡¨è¾¾å¼å¦ä¸€ä¸ªä¾æ®æ˜¯ç±»åž‹æŽ¨æ–­æœºåˆ¶ï¼Œåœ¨ä¸Šä¸‹æ–‡ä¿¡æ¯è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥æŽ¨æ–­å‡ºå‚æ•°è¡¨çš„ç±»åž‹ï¼Œè€Œä¸éœ€è¦æ˜¾å¼æŒ‡åã€‚ å¦‚æžœå¤§å®¶æƒ³å­¦ä¹ ä»¥ä¸Šè·¯çº¿å†…å®¹ï¼Œåœ¨æ­¤æˆ‘å‘å¤§å®¶æŽ¨èä¸€ä¸ªæž¶æž„å­¦ä¹ äº¤æµç¾¤ã€‚äº¤æµå­¦ä¹ ç¾¤å·874811168 é‡Œé¢ä¼šåˆ†äº«ä¸€äº›èµ„æ·±æž¶æž„å¸ˆå½•åˆ¶çš„è§†é¢‘å½•åƒï¼šæœ‰Springï¼ŒMyBatisï¼ŒNettyæºç åˆ†æžï¼Œé«˜å¹¶å‘ã€é«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡æž¶æž„çš„åŽŸç†ï¼ŒJVMæ€§èƒ½ä¼˜åŒ–ã€åˆ†å¸ƒå¼æž¶æž„ç­‰è¿™äº›æˆä¸ºæž¶æž„å¸ˆå¿…å¤‡çš„çŸ¥è¯†ä½“ç³»ã€‚è¿˜èƒ½é¢†å–å…è´¹çš„å­¦ä¹ èµ„æºï¼Œç›®å‰å—ç›Šè‰¯å¤š æ‰€ä»¥è¯´ Lambda è¡¨è¾¾å¼çš„ç±»åž‹æ˜¯ä»Ž Lambda çš„ä¸Šä¸‹æ–‡æŽ¨æ–­å‡ºæ¥çš„ï¼Œä¸Šä¸‹æ–‡ä¸­ Lambda è¡¨è¾¾å¼éœ€è¦çš„ç±»åž‹ç§°ä¸ºç›®æ ‡ç±»åž‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æŽ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¼”ç¤ºä¸€ä¸‹ Lambda è¡¨è¾¾å¼çš„å‡ ç§ç±»åž‹æŽ¨æ–­ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªç®€å•çš„å‡½æ•°æŽ¥å£ï¼š 1234@FunctionalInterfaceinterface IMath &#123; int add(int x, int y);&#125; ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728public class TypeDemo &#123; public static void main(String[] args) &#123; // 1.é€šè¿‡å˜é‡ç±»åž‹å®šä¹‰ IMath iMath = (x, y) -&gt; x + y; // 2.æ•°ç»„æž„å»ºçš„æ–¹å¼ IMath[] iMaths = &#123;(x, y) -&gt; x + y&#125;; // 3.å¼ºè½¬ç±»åž‹çš„æ–¹å¼ Object object = (IMath) (x, y) -&gt; x + y; // 4.é€šè¿‡æ–¹æ³•è¿”å›žå€¼ç¡®å®šç±»åž‹ IMath result = createIMathObj(); // 5.é€šè¿‡æ–¹æ³•å‚æ•°ç¡®å®šç±»åž‹ test((x, y) -&gt; x + y); &#125; public static IMath createIMathObj() &#123; return (x, y) -&gt; x + y; &#125; public static void test(IMath iMath)&#123; return; &#125;&#125; å˜é‡å¼•ç”¨Lambdaè¡¨è¾¾å¼ç±»ä¼¼äºŽå®žçŽ°äº†æŒ‡å®šæŽ¥å£çš„å†…éƒ¨ç±»æˆ–è€…è¯´åŒ¿åç±»ï¼Œæ‰€ä»¥åœ¨Lambdaè¡¨è¾¾å¼ä¸­å¼•ç”¨å˜é‡å’Œæˆ‘ä»¬åœ¨åŒ¿åç±»ä¸­å¼•ç”¨å˜é‡çš„è§„åˆ™æ˜¯ä¸€æ ·çš„ã€‚å¦‚ä¸‹ç¤ºä¾‹ï¼š 12345public static void main(String[] args) &#123; String str = "å½“å‰çš„ç³»ç»Ÿæ—¶é—´æˆ³æ˜¯: "; Consumer&lt;Long&gt; consumer = s -&gt; System.out.println(str + s); consumer.accept(System.currentTimeMillis());&#125; å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨JDK1.8ä¹‹å‰æˆ‘ä»¬ä¸€èˆ¬ä¼šå°†åŒ¿åç±»é‡Œè®¿é—®çš„å¤–éƒ¨å˜é‡è®¾ç½®ä¸ºfinalï¼Œè€Œåœ¨JDK1.8é‡Œé»˜è®¤ä¼šå°†è¿™ä¸ªåŒ¿åç±»é‡Œè®¿é—®çš„å¤–éƒ¨å˜é‡ç»™è®¾ç½®ä¸ºfinalã€‚ä¾‹å¦‚æˆ‘çŽ°åœ¨æ”¹å˜strå˜é‡çš„å€¼ï¼Œideå°±ä¼šæç¤ºé”™è¯¯ï¼š è‡³äºŽä¸ºä»€ä¹ˆè¦å°†å˜é‡è®¾ç½®finalï¼Œè¿™æ˜¯å› ä¸ºåœ¨Javaé‡Œæ²¡æœ‰å¼•ç”¨ä¼ é€’ï¼Œå˜é‡éƒ½æ˜¯å€¼ä¼ é€’çš„ã€‚ä¸å°†å˜é‡è®¾ç½®ä¸ºfinalçš„è¯ï¼Œå¦‚æžœå¤–éƒ¨å˜é‡çš„å¼•ç”¨è¢«æ”¹å˜äº†ï¼Œé‚£ä¹ˆæœ€ç»ˆå¾—å‡ºæ¥çš„ç»“æžœå°±ä¼šæ˜¯é”™è¯¯çš„ã€‚ ä¸‹é¢ç”¨ä¸€ç»„å›¾ç‰‡ç®€å•æ¼”ç¤ºä¸€ä¸‹å€¼ä¼ é€’ä¸Žå¼•ç”¨ä¼ é€’çš„åŒºåˆ«ã€‚ä»¥åˆ—è¡¨ä¸ºä¾‹ï¼Œå½“åªæ˜¯å€¼ä¼ é€’æ—¶ï¼ŒåŒ¿åç±»é‡Œå¯¹å¤–éƒ¨å˜é‡çš„å¼•ç”¨æ˜¯ä¸€ä¸ªå€¼å¯¹è±¡ï¼š è‹¥æ­¤æ—¶listå˜é‡æŒ‡å‘äº†å¦ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆåŒ¿åç±»é‡Œå¼•ç”¨çš„è¿˜æ˜¯ä¹‹å‰é‚£ä¸ªå€¼å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰éœ€è¦å°†å…¶è®¾ç½®ä¸ºfinalé˜²æ­¢å¤–éƒ¨å˜é‡å¼•ç”¨æ”¹å˜ï¼š è€Œå¦‚æžœæ˜¯å¼•ç”¨ä¼ é€’çš„è¯ï¼ŒåŒ¿åç±»é‡Œå¯¹å¤–éƒ¨å˜é‡çš„å¼•ç”¨å°±ä¸æ˜¯å€¼å¯¹è±¡äº†ï¼Œè€Œæ˜¯æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªå¤–éƒ¨å˜é‡ï¼š æ‰€ä»¥å°±ç®—listå˜é‡æŒ‡å‘äº†å¦ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ¿åç±»é‡Œçš„å¼•ç”¨ä¹Ÿä¼šéšç€å¤–éƒ¨å˜é‡çš„å¼•ç”¨æ”¹å˜è€Œæ”¹å˜ï¼š çº§è”è¡¨è¾¾å¼å’ŒæŸ¯é‡ŒåŒ–åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå‡½æ•°æ—¢å¯ä»¥æŽ¥æ”¶ä¹Ÿå¯ä»¥è¿”å›žå…¶ä»–å‡½æ•°ã€‚å‡½æ•°ä¸å†åƒä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä¸€æ ·ï¼Œåªæ˜¯ä¸€ä¸ªå¯¹è±¡çš„å·¥åŽ‚æˆ–ç”Ÿæˆå™¨ï¼Œå®ƒä¹Ÿèƒ½å¤Ÿåˆ›å»ºå’Œè¿”å›žå¦ä¸€ä¸ªå‡½æ•°ã€‚è¿”å›žå‡½æ•°çš„å‡½æ•°å¯ä»¥å˜æˆçº§è” lambda è¡¨è¾¾å¼ï¼Œç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ä»£ç éžå¸¸ç®€çŸ­ã€‚å°½ç®¡æ­¤è¯­æ³•åˆçœ‹èµ·æ¥å¯èƒ½éžå¸¸é™Œç”Ÿï¼Œä½†å®ƒæœ‰è‡ªå·±çš„ç”¨é€”ã€‚ çº§è”è¡¨è¾¾å¼å°±æ˜¯å¤šä¸ªlambdaè¡¨è¾¾å¼çš„ç»„åˆï¼Œè¿™é‡Œæ¶‰åŠåˆ°ä¸€ä¸ªé«˜é˜¶å‡½æ•°çš„æ¦‚å¿µï¼Œæ‰€è°“é«˜é˜¶å‡½æ•°å°±æ˜¯ä¸€ä¸ªå¯ä»¥è¿”å›žå‡½æ•°çš„å‡½æ•°ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 123// å®žçŽ°äº† x + y çš„çº§è”è¡¨è¾¾å¼Function&lt;Integer, Function&lt;Integer, Integer&gt;&gt; function1 = x -&gt; y -&gt; x + y;System.out.println("è®¡ç®—ç»“æžœä¸º: " + function1.apply(2).apply(3)); // è®¡ç®—ç»“æžœä¸º: 5 è¿™é‡Œçš„ y -&amp;gt; x + y æ˜¯ä½œä¸ºä¸€ä¸ªå‡½æ•°è¿”å›žç»™ä¸Šä¸€çº§è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ç¬¬ä¸€çº§è¡¨è¾¾å¼çš„è¾“å‡ºæ˜¯ y -&amp;gt; x + yè¿™ä¸ªå‡½æ•°ï¼Œå¦‚æžœä½¿ç”¨æ‹¬å·æ‹¬èµ·æ¥å¯èƒ½ä¼šå¥½ç†è§£ä¸€äº›ï¼š 1x -&gt; (y -&gt; x + y) çº§è”è¡¨è¾¾å¼å¯ä»¥å®žçŽ°å‡½æ•°æŸ¯é‡ŒåŒ–ï¼Œç®€å•æ¥è¯´æŸ¯é‡ŒåŒ–å°±æ˜¯æŠŠæœ¬æ¥å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢ä¸ºåªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š 12Function&lt;Integer, Function&lt;Integer, Function&lt;Integer, Integer&gt;&gt;&gt; function2 = x -&gt; y -&gt; z -&gt; x + y + z;System.out.println("è®¡ç®—ç»“æžœä¸º: " + function2.apply(1).apply(2).apply(3)); // è®¡ç®—ç»“æžœä¸º: 6 å¦‚æžœå¤§å®¶æƒ³å­¦ä¹ ä»¥ä¸Šè·¯çº¿å†…å®¹ï¼Œåœ¨æ­¤æˆ‘å‘å¤§å®¶æŽ¨èä¸€ä¸ªæž¶æž„å­¦ä¹ äº¤æµç¾¤ã€‚äº¤æµå­¦ä¹ ç¾¤å·874811168 é‡Œé¢ä¼šåˆ†äº«ä¸€äº›èµ„æ·±æž¶æž„å¸ˆå½•åˆ¶çš„è§†é¢‘å½•åƒï¼šæœ‰Springï¼ŒMyBatisï¼ŒNettyæºç åˆ†æžï¼Œé«˜å¹¶å‘ã€é«˜æ€§èƒ½ã€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡æž¶æž„çš„åŽŸç†ï¼ŒJVMæ€§èƒ½ä¼˜åŒ–ã€åˆ†å¸ƒå¼æž¶æž„ç­‰è¿™äº›æˆä¸ºæž¶æž„å¸ˆå¿…å¤‡çš„çŸ¥è¯†ä½“ç³»ã€‚è¿˜èƒ½é¢†å–å…è´¹çš„å­¦ä¹ èµ„æºï¼Œç›®å‰å—ç›Šè‰¯å¤š å‡½æ•°æŸ¯é‡ŒåŒ–çš„ç›®çš„æ˜¯å°†å‡½æ•°æ ‡å‡†åŒ–ï¼Œå‡½æ•°å¯çµæ´»ç»„åˆï¼Œæ–¹ä¾¿ç»Ÿä¸€å¤„ç†ç­‰ï¼Œä¾‹å¦‚æˆ‘å¯ä»¥åœ¨å¾ªçŽ¯é‡Œåªéœ€è¦è°ƒç”¨åŒä¸€ä¸ªæ–¹æ³•ï¼Œè€Œä¸éœ€è¦è°ƒç”¨å¦å¤–çš„æ–¹æ³•å°±èƒ½å®žçŽ°ä¸€ä¸ªæ•°ç»„å†…å…ƒç´ çš„æ±‚å’Œè®¡ç®—ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314public static void main(String[] args) &#123; Function&lt;Integer, Function&lt;Integer, Function&lt;Integer, Integer&gt;&gt;&gt; f3 = x -&gt; y -&gt; z -&gt; x + y + z; int[] nums = &#123;1, 2, 3&#125;; for (int num : nums) &#123; if (f3 instanceof Function) &#123; Object obj = f3.apply(num); if (obj instanceof Function) &#123; f3 = (Function) obj; &#125; else &#123; System.out.println("è°ƒç”¨ç»“æŸ, ç»“æžœä¸º: " + obj); // è°ƒç”¨ç»“æŸ, ç»“æžœä¸º: 6 &#125; &#125; &#125;&#125; çº§è”è¡¨è¾¾å¼å’ŒæŸ¯é‡ŒåŒ–ä¸€èˆ¬åœ¨å®žé™…å¼€å‘ä¸­å¹¶ä¸æ˜¯å¾ˆå¸¸è§ï¼Œæ‰€ä»¥å¯¹å…¶æ¦‚å¿µç¨æœ‰ç†è§£å³å¯ï¼Œè¿™é‡Œåªæ˜¯ç®€å•å¸¦è¿‡ï¼Œè‹¥å¯¹å…¶æ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsä¸­å­—ç¬¦ä¸²å…¨éƒ¨æ›¿æ¢]]></title>
    <url>%2Fposts%2F5bf0344a.html</url>
    <content type="text"><![CDATA[åœ¨jsä¸­å­—ç¬¦ä¸²å…¨éƒ¨æ›¿æ¢å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š 1str.replace(/éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä¸²/gï¼Œ&quot;æ–°å­—ç¬¦ä¸²&quot;) æ¯”å¦‚ï¼š 1234&quot;yyyy-MM-dd-hh-mm-ss&quot;.replace(/-/g,&quot;/&quot;)ç»“æžœå¦‚ä¸‹ï¼š&quot;yyyy/MM/dd/hh/mm/ss&quot; åŽŸç†è¯·çœ‹JavaScript replace() æ–¹æ³•ä»‹ç» å®šä¹‰å’Œç”¨æ³•replace() æ–¹æ³•ç”¨äºŽåœ¨å­—ç¬¦ä¸²ä¸­ç”¨ä¸€äº›å­—ç¬¦æ›¿æ¢å¦ä¸€äº›å­—ç¬¦ï¼Œæˆ–æ›¿æ¢ä¸€ä¸ªä¸Žæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ã€‚ è¯­æ³•1stringObject.replace(regexp/substr,replacement) å‚æ•° æè¿° regexp/substr å¿…éœ€ã€‚è§„å®šå­å­—ç¬¦ä¸²æˆ–è¦æ›¿æ¢çš„æ¨¡å¼çš„ RegExp å¯¹è±¡ã€‚è¯·æ³¨æ„ï¼Œå¦‚æžœè¯¥å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™å°†å®ƒä½œä¸ºè¦æ£€ç´¢çš„ç›´æŽ¥é‡æ–‡æœ¬æ¨¡å¼ï¼Œè€Œä¸æ˜¯é¦–å…ˆè¢«è½¬æ¢ä¸º RegExp å¯¹è±¡ã€‚ replacement å¿…éœ€ã€‚ä¸€ä¸ªå­—ç¬¦ä¸²å€¼ã€‚è§„å®šäº†æ›¿æ¢æ–‡æœ¬æˆ–ç”Ÿæˆæ›¿æ¢æ–‡æœ¬çš„å‡½æ•°ã€‚ è¿”å›žå€¼ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ç”¨ replacement æ›¿æ¢äº† regexp çš„ç¬¬ä¸€æ¬¡åŒ¹é…æˆ–æ‰€æœ‰åŒ¹é…ä¹‹åŽå¾—åˆ°çš„ã€‚ è¯´æ˜Žå­—ç¬¦ä¸² stringObject çš„ replace() æ–¹æ³•æ‰§è¡Œçš„æ˜¯æŸ¥æ‰¾å¹¶æ›¿æ¢çš„æ“ä½œã€‚å®ƒå°†åœ¨ stringObject ä¸­æŸ¥æ‰¾ä¸Ž regexp ç›¸åŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œç„¶åŽç”¨ replacement æ¥æ›¿æ¢è¿™äº›å­ä¸²ã€‚å¦‚æžœ regexp å…·æœ‰å…¨å±€æ ‡å¿— gï¼Œé‚£ä¹ˆ replace() æ–¹æ³•å°†æ›¿æ¢æ‰€æœ‰åŒ¹é…çš„å­ä¸²ã€‚å¦åˆ™ï¼Œå®ƒåªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…å­ä¸²ã€‚ replacement å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°ã€‚å¦‚æžœå®ƒæ˜¯å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆæ¯ä¸ªåŒ¹é…éƒ½å°†ç”±å­—ç¬¦ä¸²æ›¿æ¢ã€‚ä½†æ˜¯ replacement ä¸­çš„ $ å­—ç¬¦å…·æœ‰ç‰¹å®šçš„å«ä¹‰ã€‚å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œå®ƒè¯´æ˜Žä»Žæ¨¡å¼åŒ¹é…å¾—åˆ°çš„å­—ç¬¦ä¸²å°†ç”¨äºŽæ›¿æ¢ã€‚ å­—ç¬¦ æ›¿æ¢æ–‡æœ¬ $1ã€$2ã€â€¦ã€$99 ä¸Ž regexp ä¸­çš„ç¬¬ 1 åˆ°ç¬¬ 99 ä¸ªå­è¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ–‡æœ¬ã€‚ $&amp; ä¸Ž regexp ç›¸åŒ¹é…çš„å­ä¸²ã€‚ $` ä½äºŽåŒ¹é…å­ä¸²å·¦ä¾§çš„æ–‡æœ¬ã€‚ $â€™ ä½äºŽåŒ¹é…å­ä¸²å³ä¾§çš„æ–‡æœ¬ã€‚ $$ ç›´æŽ¥é‡ç¬¦å·ã€‚ æ³¨æ„ï¼šECMAScript v3 è§„å®šï¼Œreplace() æ–¹æ³•çš„å‚æ•° replacement å¯ä»¥æ˜¯å‡½æ•°è€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ªåŒ¹é…éƒ½è°ƒç”¨è¯¥å‡½æ•°ï¼Œå®ƒè¿”å›žçš„å­—ç¬¦ä¸²å°†ä½œä¸ºæ›¿æ¢æ–‡æœ¬ä½¿ç”¨ã€‚è¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŒ¹é…æ¨¡å¼çš„å­—ç¬¦ä¸²ã€‚æŽ¥ä¸‹æ¥çš„å‚æ•°æ˜¯ä¸Žæ¨¡å¼ä¸­çš„å­è¡¨è¾¾å¼åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥æœ‰ 0 ä¸ªæˆ–å¤šä¸ªè¿™æ ·çš„å‚æ•°ã€‚æŽ¥ä¸‹æ¥çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå£°æ˜Žäº†åŒ¹é…åœ¨ stringObject ä¸­å‡ºçŽ°çš„ä½ç½®ã€‚æœ€åŽä¸€ä¸ªå‚æ•°æ˜¯ stringObject æœ¬èº«ã€‚ jså­—ç¬¦ä¸²æ›¿æ¢å‚è€ƒèµ„æ–™ï¼šhttp://www.w3school.com.cn/jsref/jsref_replace.asp jsæ­£åˆ™ä½¿ç”¨å‚è€ƒèµ„æ–™ï¼šhttp://www.w3school.com.cn/jsref/jsref_obj_regexp.asp]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[jsèŽ·å–æŒ‡å®šå­—ç¬¦å‰/åŽçš„å­—ç¬¦ä¸²ç®€å•å®žä¾‹]]></title>
    <url>%2Fposts%2F1dfc2d5c.html</url>
    <content type="text"><![CDATA[12345678910111213141516171819202122&lt;html&gt;&lt;head&gt;&lt;meta charset="utf-8"&gt;&lt;title&gt;æ— æ ‡é¢˜æ–‡æ¡£&lt;/title&gt;&lt;/head&gt;&lt;script type="text/javascript"&gt;/* string å­—ç¬¦ä¸²; str æŒ‡å®šå­—ç¬¦; split(),ç”¨äºŽæŠŠä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„; split(str)[0],è¯»å–æ•°ç»„ä¸­ç´¢å¼•ä¸º0çš„å€¼ï¼ˆç¬¬ä¸€ä¸ªå€¼ï¼‰,æ‰€æœ‰æ•°ç»„ç´¢å¼•é»˜è®¤ä»Ž0å¼€å§‹; */function getStr(string,str)&#123; var str_before = string.split(str)[0]; var str_after = string.split(str)[1]; alert('å‰ï¼š'+str_before+' - åŽï¼š'+str_after);&#125;&lt;/script&gt;&lt;body&gt;&lt;input type="button" onClick="getStr('string','r');" value="èŽ·å–å€¼" /&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Charlesåœ¨çº¿ç ´è§£å·¥å…·]]></title>
    <url>%2Fposts%2Fc05a8eb3.html</url>
    <content type="text"><![CDATA[ç‚¹å‡»åœ¨çº¿ç”Ÿæˆç ´è§£åŽçš„charles.jaræ–‡ä»¶ ç”¨æ³• è¾“å…¥RegisterName(æ­¤åç§°éšæ„ï¼Œç”¨äºŽæ˜¾ç¤º Registered to xxx)ï¼Œé€‰æ‹©æœ¬åœ°å·²å®‰è£…çš„ç‰ˆæœ¬ï¼Œç‚¹å‡»ç”Ÿæˆï¼Œå¹¶ä¸‹è½½charles.jaræ–‡ä»¶ æ›¿æ¢æœ¬åœ°charles.jaræ–‡ä»¶ macOS: /Applications/Charles.app/Contents/Java/charles.jar Windows: C:\Program Files\Charles\lib\charles.jar]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macç«¯å£è¢«å ç”¨çš„è§£å†³åŠžæ³•ï¼ˆHexoä¸ºä¾‹ï¼‰]]></title>
    <url>%2Fposts%2F3a2cfc51.html</url>
    <content type="text"><![CDATA[æŸ¥çœ‹ç«¯å£ çœ‹çœ‹ç«¯å£è¢«å“ªä¸ªè¿›ç¨‹å ç”¨ lsof -i :4000 è¾“å…¥kill PID è®°ä½è¦æ€æŽ‰çš„è¿›ç¨‹PIDï¼ŒåŠ åœ¨kill -9åŽé¢ kill -9 16149]]></content>
      <categories>
        <category>Mac</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>ç»ˆç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vue.jsé¢è¯•ä¸­å¸¸é—®çŸ¥è¯†ç‚¹æ•´ç†]]></title>
    <url>%2Fposts%2Fadbc7180.html</url>
    <content type="text"><![CDATA[çœ‹çœ‹é¢è¯•é¢˜ï¼Œåªæ˜¯ä¸ºäº†æŸ¥æ¼è¡¥ç¼ºï¼Œçœ‹çœ‹è‡ªå·±é‚£äº›æ–¹é¢è¿˜ä¸æ‡‚ã€‚åˆ‡è®°ä¸è¦ä»¥ä¸ºèƒŒäº†é¢è¯•é¢˜ï¼Œå°±ä¸‡äº‹å¤§å‰äº†ï¼Œæœ€å¥½æ˜¯ç†è§£èƒŒåŽçš„åŽŸç†ï¼Œè¿™æ ·é¢è¯•çš„æ—¶å€™æ‰èƒ½ä¾ƒä¾ƒè€Œè°ˆã€‚ä¸ç„¶ï¼Œç¨å¾®æœ‰æ°´å¹³çš„é¢è¯•å®˜ä¸€çœ‹å°±èƒ½çœ‹å‡ºï¼Œæ˜¯å¦æœ‰çœŸæ‰å®žå­¦è¿˜æ˜¯åˆšå¥½èƒŒä¸­äº†è¿™é“é¢è¯•é¢˜ï¼ˆæœ‰ç©ºå†æŠŠä¾‹å­ä¸­ä»£ç è¡¥ä¸Šï¼‰ã€‚ ä¸€ã€å¯¹äºŽMVVMçš„ç†è§£ï¼ŸMVVM æ˜¯ Model-View-ViewModel çš„ç¼©å†™ã€‚ Model ä»£è¡¨æ•°æ®æ¨¡åž‹ï¼Œä¹Ÿå¯ä»¥åœ¨Modelä¸­å®šä¹‰æ•°æ®ä¿®æ”¹å’Œæ“ä½œçš„ä¸šåŠ¡é€»è¾‘ã€‚ View ä»£è¡¨UI ç»„ä»¶ï¼Œå®ƒè´Ÿè´£å°†æ•°æ®æ¨¡åž‹è½¬åŒ–æˆUI å±•çŽ°å‡ºæ¥ã€‚ ViewModel ç›‘å¬æ¨¡åž‹æ•°æ®çš„æ”¹å˜å’ŒæŽ§åˆ¶è§†å›¾è¡Œä¸ºã€å¤„ç†ç”¨æˆ·äº¤äº’ï¼Œç®€å•ç†è§£å°±æ˜¯ä¸€ä¸ªåŒæ­¥View å’Œ Modelçš„å¯¹è±¡ï¼Œè¿žæŽ¥Modelå’ŒViewã€‚ åœ¨MVVMæž¶æž„ä¸‹ï¼ŒView å’Œ Model ä¹‹é—´å¹¶æ²¡æœ‰ç›´æŽ¥çš„è”ç³»ï¼Œè€Œæ˜¯é€šè¿‡ViewModelè¿›è¡Œäº¤äº’ï¼ŒModel å’Œ ViewModel ä¹‹é—´çš„äº¤äº’æ˜¯åŒå‘çš„ï¼Œ å› æ­¤View æ•°æ®çš„å˜åŒ–ä¼šåŒæ­¥åˆ°Modelä¸­ï¼Œè€ŒModel æ•°æ®çš„å˜åŒ–ä¹Ÿä¼šç«‹å³ååº”åˆ°View ä¸Šã€‚ ViewModel é€šè¿‡åŒå‘æ•°æ®ç»‘å®šæŠŠ View å±‚å’Œ Model å±‚è¿žæŽ¥äº†èµ·æ¥ï¼Œè€ŒView å’Œ Model ä¹‹é—´çš„åŒæ­¥å·¥ä½œå®Œå…¨æ˜¯è‡ªåŠ¨çš„ï¼Œæ— éœ€äººä¸ºå¹²æ¶‰ï¼Œå› æ­¤å¼€å‘è€…åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸éœ€è¦æ‰‹åŠ¨æ“ä½œDOMï¼Œä¸éœ€è¦å…³æ³¨æ•°æ®çŠ¶æ€çš„åŒæ­¥é—®é¢˜ï¼Œå¤æ‚çš„æ•°æ®çŠ¶æ€ç»´æŠ¤å®Œå…¨ç”± MVVM æ¥ç»Ÿä¸€ç®¡ç†ã€‚ äºŒã€Vueçš„ç”Ÿå‘½å‘¨æœŸbeforeCreateï¼ˆåˆ›å»ºå‰ï¼‰ï¼Œåœ¨æ•°æ®è§‚æµ‹å’Œåˆå§‹åŒ–äº‹ä»¶è¿˜æœªå¼€å§‹ createdï¼ˆåˆ›å»ºåŽï¼‰ï¼Œå®Œæˆæ•°æ®è§‚æµ‹ï¼Œå±žæ€§å’Œæ–¹æ³•çš„è¿ç®—ï¼Œåˆå§‹åŒ–äº‹ä»¶ï¼Œ $el å±žæ€§è¿˜æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ beforeMountï¼ˆè½½å…¥å‰ï¼‰ï¼Œåœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼Œç›¸å…³çš„renderå‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ã€‚å®žä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šç¼–è¯‘æ¨¡æ¿ï¼ŒæŠŠdataé‡Œé¢çš„æ•°æ®å’Œæ¨¡æ¿ç”Ÿæˆhtmlã€‚æ³¨æ„æ­¤æ—¶è¿˜æ²¡æœ‰æŒ‚è½½htmlåˆ°é¡µé¢ä¸Šã€‚ mountedï¼ˆè½½å…¥åŽï¼‰ï¼Œåœ¨el è¢«æ–°åˆ›å»ºçš„ vm.$el æ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®žä¾‹ä¸ŠåŽ»ä¹‹åŽè°ƒç”¨ã€‚å®žä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šç”¨ä¸Šé¢ç¼–è¯‘å¥½çš„htmlå†…å®¹æ›¿æ¢elå±žæ€§æŒ‡å‘çš„DOMå¯¹è±¡ã€‚å®Œæˆæ¨¡æ¿ä¸­çš„htmlæ¸²æŸ“åˆ°htmlé¡µé¢ä¸­ã€‚æ­¤è¿‡ç¨‹ä¸­è¿›è¡Œajaxäº¤äº’ã€‚ beforeUpdateï¼ˆæ›´æ–°å‰ï¼‰ï¼Œåœ¨æ•°æ®æ›´æ–°ä¹‹å‰è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰ã€‚å¯ä»¥åœ¨è¯¥é’©å­ä¸­è¿›ä¸€æ­¥åœ°æ›´æ”¹çŠ¶æ€ï¼Œä¸ä¼šè§¦å‘é™„åŠ çš„é‡æ¸²æŸ“è¿‡ç¨‹ã€‚ updatedï¼ˆæ›´æ–°åŽï¼‰ï¼Œåœ¨ç”±äºŽæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹åŽè°ƒç”¨ã€‚è°ƒç”¨æ—¶ï¼Œç»„ä»¶DOMå·²ç»æ›´æ–°ï¼Œæ‰€ä»¥å¯ä»¥æ‰§è¡Œä¾èµ–äºŽDOMçš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°æ— é™å¾ªçŽ¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚ beforeDestroyï¼ˆé”€æ¯å‰ï¼‰ï¼Œåœ¨å®žä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚å®žä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚ destroyedï¼ˆé”€æ¯åŽï¼‰ï¼Œåœ¨å®žä¾‹é”€æ¯ä¹‹åŽè°ƒç”¨ã€‚è°ƒç”¨åŽï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®žä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚ 1ã€ä»€ä¹ˆæ˜¯vueç”Ÿå‘½å‘¨æœŸï¼Ÿ ç­”ï¼š Vue å®žä¾‹ä»Žåˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç”Ÿå‘½å‘¨æœŸã€‚ä»Žå¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½Domâ†’æ¸²æŸ“ã€æ›´æ–°â†’æ¸²æŸ“ã€é”€æ¯ç­‰ä¸€ç³»åˆ—è¿‡ç¨‹ï¼Œç§°ä¹‹ä¸º Vue çš„ç”Ÿå‘½å‘¨æœŸã€‚ 2ã€vueç”Ÿå‘½å‘¨æœŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ ç­”ï¼šå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸­æœ‰å¤šä¸ªäº‹ä»¶é’©å­ï¼Œè®©æˆ‘ä»¬åœ¨æŽ§åˆ¶æ•´ä¸ªVueå®žä¾‹çš„è¿‡ç¨‹æ—¶æ›´å®¹æ˜“å½¢æˆå¥½çš„é€»è¾‘ã€‚ 3ã€vueç”Ÿå‘½å‘¨æœŸæ€»å…±æœ‰å‡ ä¸ªé˜¶æ®µï¼Ÿ ç­”ï¼šå®ƒå¯ä»¥æ€»å…±åˆ†ä¸º8ä¸ªé˜¶æ®µï¼šåˆ›å»ºå‰/åŽã€è½½å…¥å‰/åŽã€æ›´æ–°å‰/åŽã€é”€æ¯å‰/é”€æ¯åŽã€‚ 4ã€ç¬¬ä¸€æ¬¡é¡µé¢åŠ è½½ä¼šè§¦å‘å“ªå‡ ä¸ªé’©å­ï¼Ÿ ç­”ï¼šä¼šè§¦å‘ä¸‹é¢è¿™å‡ ä¸ªbeforeCreateã€createdã€beforeMountã€mounted ã€‚ 5ã€DOM æ¸²æŸ“åœ¨å“ªä¸ªå‘¨æœŸä¸­å°±å·²ç»å®Œæˆï¼Ÿ ç­”ï¼šDOM æ¸²æŸ“åœ¨ mounted ä¸­å°±å·²ç»å®Œæˆäº†ã€‚ ä¸‰ã€ Vueå®žçŽ°æ•°æ®åŒå‘ç»‘å®šçš„åŽŸç†ï¼šObject.defineProperty()vueå®žçŽ°æ•°æ®åŒå‘ç»‘å®šä¸»è¦æ˜¯ï¼šé‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡ Object.defineProperty() æ¥åŠ«æŒå„ä¸ªå±žæ€§çš„setterï¼Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”ç›‘å¬å›žè°ƒã€‚å½“æŠŠä¸€ä¸ªæ™®é€š Javascript å¯¹è±¡ä¼ ç»™ Vue å®žä¾‹æ¥ä½œä¸ºå®ƒçš„ data é€‰é¡¹æ—¶ï¼ŒVue å°†éåŽ†å®ƒçš„å±žæ€§ï¼Œç”¨ Object.defineProperty() å°†å®ƒä»¬è½¬ä¸º getter/setterã€‚ç”¨æˆ·çœ‹ä¸åˆ° getter/setterï¼Œä½†æ˜¯åœ¨å†…éƒ¨å®ƒä»¬è®© Vue è¿½è¸ªä¾èµ–ï¼Œåœ¨å±žæ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜åŒ–ã€‚ vueçš„æ•°æ®åŒå‘ç»‘å®š å°†MVVMä½œä¸ºæ•°æ®ç»‘å®šçš„å…¥å£ï¼Œæ•´åˆObserverï¼ŒCompileå’ŒWatcherä¸‰è€…ï¼Œé€šè¿‡Observeræ¥ç›‘å¬è‡ªå·±çš„modelçš„æ•°æ®å˜åŒ–ï¼Œé€šè¿‡Compileæ¥è§£æžç¼–è¯‘æ¨¡æ¿æŒ‡ä»¤ï¼Œæœ€ç»ˆåˆ©ç”¨watcheræ­èµ·observerå’ŒCompileä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ï¼Œè¾¾åˆ°æ•°æ®å˜åŒ– â€”&gt;è§†å›¾æ›´æ–°ï¼›è§†å›¾äº¤äº’å˜åŒ–ï¼ˆinputï¼‰â€”&gt;æ•°æ®modelå˜æ›´åŒå‘ç»‘å®šæ•ˆæžœã€‚ jså®žçŽ°ç®€å•çš„åŒå‘ç»‘å®šï¼š 1234567891011121314151617181920&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;text&quot; id=&quot;txt&quot;&gt; &lt;p id=&quot;show&quot;&gt;&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;script type=&quot;text/javascript&quot;&gt; var obj = &#123;&#125; Object.defineProperty(obj, &apos;txt&apos;, &#123; get: function () &#123; return obj &#125;, set: function (newValue) &#123; document.getElementById(&apos;txt&apos;).value = newValue document.getElementById(&apos;show&apos;).innerHTML = newValue &#125; &#125;) document.addEventListener(&apos;keyup&apos;, function (e) &#123; obj.txt = e.target.value &#125;)&lt;/script&gt; å››ã€Vueç»„ä»¶é—´çš„å‚æ•°ä¼ é€’1ã€çˆ¶ç»„ä»¶ä¸Žå­ç»„ä»¶ä¼ å€¼ çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶ï¼šå­ç»„ä»¶é€šè¿‡propsæ–¹æ³•æŽ¥å—æ•°æ®ï¼› å­ç»„ä»¶ä¼ ç»™çˆ¶ç»„ä»¶ï¼š $emit æ–¹æ³•ä¼ é€’å‚æ•° 2ã€éžçˆ¶å­ç»„ä»¶é—´çš„æ•°æ®ä¼ é€’ï¼Œå…„å¼Ÿç»„ä»¶ä¼ å€¼ eventBusï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªäº‹ä»¶ä¸­å¿ƒï¼Œç›¸å½“äºŽä¸­è½¬ç«™ï¼Œå¯ä»¥ç”¨å®ƒæ¥ä¼ é€’äº‹ä»¶å’ŒæŽ¥æ”¶äº‹ä»¶ã€‚é¡¹ç›®æ¯”è¾ƒå°æ—¶ï¼Œç”¨è¿™ä¸ªæ¯”è¾ƒåˆé€‚ï¼ˆè™½ç„¶ä¹Ÿæœ‰ä¸å°‘äººæŽ¨èç›´æŽ¥ç”¨VUEXï¼Œå…·ä½“æ¥è¯´çœ‹éœ€æ±‚å’¯ã€‚æŠ€æœ¯åªæ˜¯æ‰‹æ®µï¼Œç›®çš„è¾¾åˆ°æ‰æ˜¯çŽ‹é“ï¼‰ã€‚ äº”ã€Vueçš„è·¯ç”±å®žçŽ°ï¼šhashæ¨¡å¼ å’Œ historyæ¨¡å¼hashæ¨¡å¼ï¼šåœ¨æµè§ˆå™¨ä¸­ç¬¦å·â€œ#â€ï¼Œ#ä»¥åŠ#åŽé¢çš„å­—ç¬¦ç§°ä¹‹ä¸ºhashï¼Œç”¨ window.location.hash è¯»å–ã€‚ç‰¹ç‚¹ï¼šhashè™½ç„¶åœ¨URLä¸­ï¼Œä½†ä¸è¢«åŒ…æ‹¬åœ¨HTTPè¯·æ±‚ä¸­ï¼›ç”¨æ¥æŒ‡å¯¼æµè§ˆå™¨åŠ¨ä½œï¼Œå¯¹æœåŠ¡ç«¯å®‰å…¨æ— ç”¨ï¼Œhashä¸ä¼šé‡åŠ è½½é¡µé¢ã€‚ historyæ¨¡å¼ï¼šhistoryé‡‡ç”¨HTML5çš„æ–°ç‰¹æ€§ï¼›ä¸”æä¾›äº†ä¸¤ä¸ªæ–°æ–¹æ³•ï¼š pushState()ï¼Œ replaceState()å¯ä»¥å¯¹æµè§ˆå™¨åŽ†å²è®°å½•æ ˆè¿›è¡Œä¿®æ”¹ï¼Œä»¥åŠpopStateäº‹ä»¶çš„ç›‘å¬åˆ°çŠ¶æ€å˜æ›´ã€‚ å…­ã€Vueä¸ŽAngularä»¥åŠReactçš„åŒºåˆ«ï¼Ÿç‰ˆæœ¬åœ¨ä¸æ–­æ›´æ–°ï¼Œä»¥ä¸‹çš„åŒºåˆ«æœ‰å¯èƒ½ä¸æ˜¯å¾ˆæ­£ç¡®ã€‚æˆ‘å·¥ä½œä¸­åªç”¨åˆ°vueï¼Œå¯¹angularå’Œreactä¸æ€Žä¹ˆç†Ÿã€‚ 1ã€ä¸ŽAngularJSçš„åŒºåˆ« ç›¸åŒç‚¹ï¼šéƒ½æ”¯æŒæŒ‡ä»¤ï¼šå†…ç½®æŒ‡ä»¤å’Œè‡ªå®šä¹‰æŒ‡ä»¤ï¼›éƒ½æ”¯æŒè¿‡æ»¤å™¨ï¼šå†…ç½®è¿‡æ»¤å™¨å’Œè‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼›éƒ½æ”¯æŒåŒå‘æ•°æ®ç»‘å®šï¼›éƒ½ä¸æ”¯æŒä½Žç«¯æµè§ˆå™¨ã€‚ ä¸åŒç‚¹ï¼šAngularJSçš„å­¦ä¹ æˆæœ¬é«˜ï¼Œæ¯”å¦‚å¢žåŠ äº†Dependency Injectionç‰¹æ€§ï¼Œè€ŒVue.jsæœ¬èº«æä¾›çš„APIéƒ½æ¯”è¾ƒç®€å•ã€ç›´è§‚ï¼›åœ¨æ€§èƒ½ä¸Šï¼ŒAngularJSä¾èµ–å¯¹æ•°æ®åšè„æ£€æŸ¥ï¼Œæ‰€ä»¥Watcherè¶Šå¤šè¶Šæ…¢ï¼›Vue.jsä½¿ç”¨åŸºäºŽä¾èµ–è¿½è¸ªçš„è§‚å¯Ÿå¹¶ä¸”ä½¿ç”¨å¼‚æ­¥é˜Ÿåˆ—æ›´æ–°ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ç‹¬ç«‹è§¦å‘çš„ã€‚ 2ã€ä¸ŽReactçš„åŒºåˆ« ç›¸åŒç‚¹ï¼šReacté‡‡ç”¨ç‰¹æ®Šçš„JSXè¯­æ³•ï¼ŒVue.jsåœ¨ç»„ä»¶å¼€å‘ä¸­ä¹ŸæŽ¨å´‡ç¼–å†™.vueç‰¹æ®Šæ–‡ä»¶æ ¼å¼ï¼Œå¯¹æ–‡ä»¶å†…å®¹éƒ½æœ‰ä¸€äº›çº¦å®šï¼Œä¸¤è€…éƒ½éœ€è¦ç¼–è¯‘åŽä½¿ç”¨ï¼›ä¸­å¿ƒæ€æƒ³ç›¸åŒï¼šä¸€åˆ‡éƒ½æ˜¯ç»„ä»¶ï¼Œç»„ä»¶å®žä¾‹ä¹‹é—´å¯ä»¥åµŒå¥—ï¼›éƒ½æä¾›åˆç†çš„é’©å­å‡½æ•°ï¼Œå¯ä»¥è®©å¼€å‘è€…å®šåˆ¶åŒ–åœ°åŽ»å¤„ç†éœ€æ±‚ï¼›éƒ½ä¸å†…ç½®åˆ—æ•°AJAXï¼ŒRouteç­‰åŠŸèƒ½åˆ°æ ¸å¿ƒåŒ…ï¼Œè€Œæ˜¯ä»¥æ’ä»¶çš„æ–¹å¼åŠ è½½ï¼›åœ¨ç»„ä»¶å¼€å‘ä¸­éƒ½æ”¯æŒmixinsçš„ç‰¹æ€§ã€‚ ä¸åŒç‚¹ï¼šReacté‡‡ç”¨çš„Virtual DOMä¼šå¯¹æ¸²æŸ“å‡ºæ¥çš„ç»“æžœåšè„æ£€æŸ¥ï¼›Vue.jsåœ¨æ¨¡æ¿ä¸­æä¾›äº†æŒ‡ä»¤ï¼Œè¿‡æ»¤å™¨ç­‰ï¼Œå¯ä»¥éžå¸¸æ–¹ä¾¿ï¼Œå¿«æ·åœ°æ“ä½œVirtual DOMã€‚ ä¸ƒã€vueè·¯ç”±çš„é’©å­å‡½æ•°é¦–é¡µå¯ä»¥æŽ§åˆ¶å¯¼èˆªè·³è½¬ï¼ŒbeforeEachï¼ŒafterEachç­‰ï¼Œä¸€èˆ¬ç”¨äºŽé¡µé¢titleçš„ä¿®æ”¹ã€‚ä¸€äº›éœ€è¦ç™»å½•æ‰èƒ½è°ƒæ•´é¡µé¢çš„é‡å®šå‘åŠŸèƒ½ã€‚ beforeEachä¸»è¦æœ‰3ä¸ªå‚æ•°toï¼Œfromï¼Œnextã€‚ toï¼šrouteå³å°†è¿›å…¥çš„ç›®æ ‡è·¯ç”±å¯¹è±¡ã€‚ fromï¼šrouteå½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±ã€‚ nextï¼šfunctionä¸€å®šè¦è°ƒç”¨è¯¥æ–¹æ³•resolveè¿™ä¸ªé’©å­ã€‚æ‰§è¡Œæ•ˆæžœä¾èµ–nextæ–¹æ³•çš„è°ƒç”¨å‚æ•°ã€‚å¯ä»¥æŽ§åˆ¶ç½‘é¡µçš„è·³è½¬ã€‚ å…«ã€vuexæ˜¯ä»€ä¹ˆï¼Ÿæ€Žä¹ˆä½¿ç”¨ï¼Ÿå“ªç§åŠŸèƒ½åœºæ™¯ä½¿ç”¨å®ƒï¼Ÿåªç”¨æ¥è¯»å–çš„çŠ¶æ€é›†ä¸­æ”¾åœ¨storeä¸­ï¼› æ”¹å˜çŠ¶æ€çš„æ–¹å¼æ˜¯æäº¤mutationsï¼Œè¿™æ˜¯ä¸ªåŒæ­¥çš„äº‹ç‰©ï¼› å¼‚æ­¥é€»è¾‘åº”è¯¥å°è£…åœ¨actionä¸­ã€‚ åœ¨main.jså¼•å…¥storeï¼Œæ³¨å…¥ã€‚æ–°å»ºäº†ä¸€ä¸ªç›®å½•storeï¼Œâ€¦ export ã€‚ åœºæ™¯æœ‰ï¼šå•é¡µåº”ç”¨ä¸­ï¼Œç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ã€éŸ³ä¹æ’­æ”¾ã€ç™»å½•çŠ¶æ€ã€åŠ å…¥è´­ç‰©è½¦ stateï¼šVuex ä½¿ç”¨å•ä¸€çŠ¶æ€æ ‘,å³æ¯ä¸ªåº”ç”¨å°†ä»…ä»…åŒ…å«ä¸€ä¸ªstore å®žä¾‹ï¼Œä½†å•ä¸€çŠ¶æ€æ ‘å’Œæ¨¡å—åŒ–å¹¶ä¸å†²çªã€‚å­˜æ”¾çš„æ•°æ®çŠ¶æ€ï¼Œä¸å¯ä»¥ç›´æŽ¥ä¿®æ”¹é‡Œé¢çš„æ•°æ®ã€‚ mutationsï¼šmutationså®šä¹‰çš„æ–¹æ³•åŠ¨æ€ä¿®æ”¹Vuex çš„ store ä¸­çš„çŠ¶æ€æˆ–æ•°æ®ã€‚ gettersï¼šç±»ä¼¼vueçš„è®¡ç®—å±žæ€§ï¼Œä¸»è¦ç”¨æ¥è¿‡æ»¤ä¸€äº›æ•°æ®ã€‚ actionï¼šactionså¯ä»¥ç†è§£ä¸ºé€šè¿‡å°†mutationsé‡Œé¢å¤„é‡Œæ•°æ®çš„æ–¹æ³•å˜æˆå¯å¼‚æ­¥çš„å¤„ç†æ•°æ®çš„æ–¹æ³•ï¼Œç®€å•çš„è¯´å°±æ˜¯å¼‚æ­¥æ“ä½œæ•°æ®ã€‚view å±‚é€šè¿‡ store.dispath æ¥åˆ†å‘ actionã€‚ 123456789101112131415const store = new Vuex.Store(&#123; //storeå®žä¾‹ state: &#123; count: 0 &#125;, mutations: &#123; increment (state) &#123; state.count++ &#125; &#125;, actions: &#123; increment (context) &#123; context.commit('increment') &#125; &#125;&#125;) modulesï¼šé¡¹ç›®ç‰¹åˆ«å¤æ‚çš„æ—¶å€™ï¼Œå¯ä»¥è®©æ¯ä¸€ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„stateã€mutationã€actionã€gettersï¼Œä½¿å¾—ç»“æž„éžå¸¸æ¸…æ™°ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚ 12345678910111213141516const moduleA = &#123; state: &#123; ... &#125;, mutations: &#123; ... &#125;, actions: &#123; ... &#125;, getters: &#123; ... &#125; &#125;const moduleB = &#123; state: &#123; ... &#125;, mutations: &#123; ... &#125;, actions: &#123; ... &#125; &#125;const store = new Vuex.Store(&#123; modules: &#123; a: moduleA, b: moduleB&#125;) ä¹ã€å…¶å®ƒå°çŸ¥è¯†ç‚¹1ã€cssåªåœ¨å½“å‰ç»„ä»¶èµ·ä½œç”¨ ç­”ï¼šåœ¨styleæ ‡ç­¾ä¸­å†™å…¥scopedå³å¯ ä¾‹å¦‚ï¼š &lt;stylescoped&gt;&lt;/style&gt; 2ã€v-if å’Œ v-show åŒºåˆ« ç­”ï¼šv-ifæŒ‰ç…§æ¡ä»¶æ˜¯å¦æ¸²æŸ“ï¼Œv-showæ˜¯displayçš„blockæˆ–noneï¼› 3ã€$routeå’Œ$routerçš„åŒºåˆ« ç­”ï¼š$routeæ˜¯â€œè·¯ç”±ä¿¡æ¯å¯¹è±¡â€ï¼ŒåŒ…æ‹¬pathï¼Œparamsï¼Œhashï¼Œqueryï¼ŒfullPathï¼Œmatchedï¼Œnameç­‰è·¯ç”±ä¿¡æ¯å‚æ•°ã€‚è€Œ$routeræ˜¯â€œè·¯ç”±å®žä¾‹â€å¯¹è±¡åŒ…æ‹¬äº†è·¯ç”±çš„è·³è½¬æ–¹æ³•ï¼Œé’©å­å‡½æ•°ç­‰ã€‚ PSï¼šç¼ºå°‘çš„æ¡ˆä¾‹ä»£ç ï¼Œè¿™å‡ å¤©å†è¡¥ä¸ŠåŽ»ã€‚æœ‰äº›åœ°æ–¹å¯èƒ½æè¿°çš„ä¸å¤Ÿæ¸…æ¥šï¼Œå¦‚æžœæœ‰æ­§ä¹‰ï¼Œå¯èƒ½æ˜¯æˆ‘ç†è§£é”™äº†ã€‚]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidManifest.xmlæ–‡ä»¶è¯¦è§£ï¼ˆapplicationï¼‰]]></title>
    <url>%2Fposts%2F6f32c165.html</url>
    <content type="text"><![CDATA[è¯­æ³•ï¼ˆSYNATXï¼‰ï¼š 12345678910111213141516171819202122&lt;applicationandroid:allowTaskReparenting=["true" | "false"] android:backupAgent="string" android:debuggable=["true" | "false"] android:description="string resource" android:enabled=["true" | "false"] android:hasCode=["true" | "false"] android:hardwareAccelerated=["true" | "false"] android:icon="drawable resource" android:killAfterRestore=["true" | "false"] android:label="string resource" android:logo="drawable resource" android:manageSpaceActivity="string" android:name="string" android:permission="string" android:persistent=["true" | "false"] android:process="string" android:restoreAnyVersion=["true" | "false"] android:taskAffinity="string" android:theme="resource or theme" android:uiOptions=["none" | "splitActionBarWhenNarrow"] &gt; . . .&lt;/application&gt; è¢«åŒ…å«äºŽï¼ˆCONTAINED INï¼‰ï¼š** 1&lt;manifest&gt; èƒ½å¤ŸåŒ…å«çš„å…ƒç´ ï¼ˆCAN CONTAINï¼‰ï¼š 1234567891011&lt;activity&gt;&lt;activity-alias&gt;&lt;service&gt;&lt;receiver&gt;&lt;provider&gt;&lt;meta-data&gt; è¯´æ˜Žï¼ˆDESCRIPTIONï¼‰ï¼š è¿™ä¸ªå…ƒç´ ç”¨äºŽåº”ç”¨ç¨‹åºçš„ å£°æ˜Žã€‚å®ƒåŒ…å«äº†æ¯ä¸ªåº”ç”¨ç¨‹åºç»„ä»¶æ‰€å£°æ˜Žçš„å­å…ƒç´ ï¼Œå¹¶ä¸”è¿˜æœ‰èƒ½å¤Ÿå½±å“æ‰€æœ‰ç»„ä»¶çš„å±žæ€§ã€‚å…¶ä¸­çš„å¾ˆå¤šå±žæ€§ï¼ˆå¦‚iconã€labelã€permissionã€ processã€taskAffinityå’ŒallowTaskReparentingï¼‰ä¼šç»™ç»„ä»¶å…ƒç´ ä¸­å¯¹åº”çš„å±žæ€§è®¾ç½®é»˜è®¤å€¼ã€‚å…¶ä»–çš„ç»™æ˜¯åº”ç”¨ç¨‹åºæ•´ä½“è®¾ ç½®çš„å€¼ï¼ˆå¦‚debuggableã€enabledã€descriptionã€allowClearUserDataï¼‰ï¼Œå¹¶ä¸”è¿™äº›å±žæ€§å€¼ä¸èƒ½è¢«ç»„ä»¶çš„å±žæ€§æ‰€ è¦†ç›–ã€‚ å±žæ€§ï¼ˆATTRIBUTESï¼‰ï¼š Android:allowTaskReparenting å½“ä¸€ä¸ªä¸Žå½“å‰ä»»åŠ¡æœ‰äº²ç¼˜ å…³ç³»çš„ä»»åŠ¡è¢«å¸¦åˆ°å‰å°æ—¶ï¼Œç”¨è¿™ä¸ªå±žæ€§æ¥æŒ‡å®šåº”ç”¨ç¨‹åºä¸­å®šä¹‰çš„Activityèƒ½å¦ä»Žä»–ä»¬å½“å‰çš„ä»»åŠ¡ä¸­è½¬ç§»åˆ°è¿™ä¸ªæœ‰äº²ç¼˜å…³ç³»çš„ä»»åŠ¡ä¸­ã€‚å¦‚æžœè®¾ç½®ä¸ºtrueï¼Œ åˆ™èƒ½å¤Ÿè½¬ç§»ï¼Œå¦‚æžœè®¾ç½®ä¸ºfalseï¼Œåˆ™åº”ç”¨ç¨‹åºä¸­çš„Activityå¿…é¡»ä¿ç•™åœ¨å®ƒä»¬æ‰€åœ¨çš„ä»»åŠ¡ä¸­ã€‚é»˜è®¤å€¼æ˜¯falseã€‚ 1&lt;activity&gt;å…ƒç´ æœ‰å®ƒä»¬è‡ªå·±çš„allowTaskReparentingå±žæ€§ï¼Œå®ƒèƒ½å¤Ÿè¦†ç›–&lt;application&gt;å…ƒç´ ä¸­çš„è®¾ç½®ã€‚ android:allowBackup Whether to allow the application to participate in the backup and restore infrastructure. If this attribute is set to false, no backup or restore of the application will ever be performed, even by a full-system backup that would otherwise cause all application data to be saved via adb. The default value of this attribute is true. æ˜¯å¦å…è®¸å¤‡ä»½åº”ç”¨çš„æ•°æ®ï¼Œé»˜è®¤æ˜¯true,å½“å¤‡ä»½æ•°æ®çš„æ—¶å€™ï¼Œå®ƒçš„æ•°æ®ä¼šè¢«å¤‡ä»½ä¸‹æ¥ã€‚å¦‚æžœè®¾ä¸ºfalseï¼Œé‚£ä¹ˆç»å¯¹ä¸ä¼šå¤‡ä»½åº”ç”¨çš„æ•°æ®ï¼Œå³ä½¿æ˜¯å¤‡ä»½æ•´ä¸ªç³»ç»Ÿã€‚ android:backupAgent è¿™ä¸ªå±žæ€§ç”¨äºŽå®šä¹‰åº”ç”¨ç¨‹ åºå¤‡ä»½ä»£ç†çš„å®žçŽ°ç±»çš„åç§°ï¼Œè¿™ä¸ªç±»æ˜¯BackupAgentç±»çš„ä¸€ä¸ªå­ç±»ã€‚å®ƒçš„å±žæ€§å€¼åº”è¯¥æ˜¯å®Œæ•´çš„Javaç±»çš„åç§° ï¼ˆå¦‚ï¼Œcom.example.project.MyBackupAgentï¼‰ã€‚ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç”¨â€.â€ç¬¦å·å¼€å¤´çš„ç®€ç§° ï¼ˆå¦‚ï¼Œ.MyBackupAgentï¼‰ï¼Œç³»ç»Ÿä¼šæŠŠå…ƒç´ ä¸­æŒ‡å®šçš„åŒ…åè¿½åŠ åˆ°â€.â€ç¬¦å·çš„å‰é¢ã€‚ android:debuggable è¿™ä¸ªå±žæ€§ç”¨äºŽæŒ‡å®šåº”ç”¨ç¨‹åºæ˜¯å¦èƒ½å¤Ÿè¢«è°ƒè¯•ï¼Œå³ä½¿æ˜¯ä»¥ç”¨æˆ·æ¨¡å¼è¿è¡Œåœ¨è®¾å¤‡ä¸Šçš„æ—¶å€™ã€‚å¦‚æžœè®¾ç½®ä¸ºtrueï¼Œåˆ™èƒ½å¤Ÿè¢«è°ƒè¯•ï¼Œå¦åˆ™ä¸èƒ½è°ƒè¯•ï¼Œé»˜è®¤å€¼æ˜¯falseã€‚ android:description è¿™ä¸ªå±žæ€§ç”¨äºŽå®šä¹‰åº”ç”¨ç¨‹åºç›¸å…³çš„ç”¨æˆ·å¯è¯»æ–‡æœ¬ï¼Œå®ƒè¦æ¯”åº”ç”¨ç¨‹åºæ ‡ç­¾æ›´é•¿ã€æ›´è¯¦ç»†ã€‚å®ƒçš„çš„å€¼å¿…é¡»è¢«è®¾ç½®æˆä¸€ä¸ªå­—ç¬¦ä¸²èµ„æºçš„å¼•ç”¨ã€‚è·Ÿlabelå±žæ€§ä¸ä¸€æ ·ï¼Œlabelå±žæ€§å¯ä»¥ä½¿ç”¨åŽŸç”Ÿçš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå±žæ€§æ²¡æœ‰é»˜è®¤å€¼ã€‚ android:enabled è¿™ä¸ªå±žæ€§ç”¨äºŽæŒ‡å®š Androidç³»ç»Ÿèƒ½å¦å®žä¾‹åŒ–åº”ç”¨ç¨‹åºç»„ä»¶ã€‚å¦‚æžœè®¾ç½®ä¸ºtrueï¼Œè¿™ä¸ªå¯ä»¥å®žä¾‹åŒ–å…¶ç»„ä»¶ï¼Œå¦åˆ™ä¸èƒ½å¤Ÿå®žä¾‹åŒ–ã€‚å¦‚æžœè¿™ä¸ªå±žæ€§è¢«è®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨ æ¯ä¸ªç»„ä»¶è‡ªå·±enabledå±žæ€§çš„è®¾ç½®æ¥åˆ¤æ–­å…¶æ˜¯å¦èƒ½å¤Ÿè¢«å®žä¾‹åŒ–ã€‚å¦‚æžœè¿™ä¸ªå±žæ€§è¢«è®¾ç½®ä¸ºfalseï¼Œå®ƒä¼šè¦†ç›–å…¶æ‰€æœ‰ç»„ä»¶è‡ªå·±æŒ‡å®šçš„å€¼ï¼Œåº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰ç»„ ä»¶éƒ½ä¼šè¢«ç¦ç”¨ã€‚ é»˜è®¤å€¼æ˜¯trueã€‚ android:hasCode è¿™ä¸ªå±žæ€§ç”¨äºŽè®¾ç½®åº”ç”¨ç¨‹åºæ˜¯å¦åŒ…å«äº†ä»£ç ï¼Œå¦‚æžœè®¾ç½®ä¸ºtrueï¼Œåˆ™åŒ…å«ä»£ç ï¼Œå¦åˆ™ä¸åŒ…å«ä»»ä½•ä»£ç ã€‚åœ¨è¿™ä¸ªå±žæ€§è¢«è®¾ç½®ä¸ºfalseçš„æ—¶å€™ï¼Œç³»ç»Ÿåœ¨åŠ è½½ç»„ä»¶çš„æ—¶å€™ä¸ä¼šè¯•å›¾åŠ è½½ä»»ä½•åº”ç”¨ç¨‹åºçš„ä»£ç ã€‚é»˜è®¤å€¼æ˜¯trueã€‚ å¦‚æžœåº”ç”¨ç¨‹åºæ²¡æœ‰ä½¿ç”¨ä»»ä½•åº”ç”¨å†…ç½®ç»„ä»¶ç±»ä»¥å¤–çš„ç»„ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªåº”ç”¨ç¨‹åºå°±ä¸ä¼šæœ‰ä»»ä½•è‡ªå·±çš„ä»£ç ï¼Œåƒä½¿ç”¨AliasActivityç±»çš„Activityï¼Œæ˜¯å¾ˆå°‘å‘ç”Ÿçš„ã€‚ android:hardwareAccelerated è¿™ä¸ªå±žæ€§ç”¨äºŽè®¾ç½®èƒ½å¤Ÿç»™åº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰Activityå’ŒViewå¯¹è±¡å¯ç”¨ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ã€‚å¦‚æžœè®¾ç½®ä¸ºtrueï¼Œåˆ™åº”è¯¥å¯ç”¨ï¼Œå¦‚æžœè®¾ç½®ä¸ºfalseï¼Œåˆ™ä¸ä¼šå¯ç”¨ã€‚é»˜è®¤å€¼æ˜¯falseã€‚ ä»ŽAndroid3.0 å¼€å§‹ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„OpenGLæ¸²æŸ“å™¨ï¼Œæ¥æ”¹å–„å¾ˆå¤šå…±åŒçš„2Då›¾å½¢æ“ä½œçš„æ€§èƒ½ã€‚å½“ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“è¢«å¯åŠ¨çš„æ—¶å€™ï¼Œåœ¨Canvasã€Paintã€ Xfermodeã€ColorFilterã€Shaderå’ŒCameraä¸­çš„å¤§å¤šæ•°æ“ä½œéƒ½ä¼šè¢«åŠ é€Ÿã€‚è¿™æ ·ä¼šä½¿åŠ¨ç”»ã€æ»šåŠ¨æ›´åŠ å¹³æ»‘ï¼Œå¹¶ä¸”ä¼šæ”¹å–„æ•´ä½“çš„å“åº”æ•ˆ æžœï¼Œå³ä½¿åº”ç”¨ç¨‹åºæ²¡æœ‰æ˜Žç¡®çš„ä½¿ç”¨æ¡†æž¶çš„OpenGLç±»åº“ã€‚ è¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ˜¯æ‰€æœ‰çš„OpenGL 2Dæ“ä½œéƒ½ä¼šè¢«åŠ é€Ÿã€‚å¦‚æžœå¯ç”¨äº†ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“å™¨ï¼Œå°±è¦å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿ä½¿ç”¨æ¸²æŸ“å™¨æ—¶ä¸å‘ç”Ÿé”™è¯¯ã€‚ android:icon è¿™ä¸ªå±žæ€§ç”¨äºŽè®¾ç½®åº”ç”¨ç¨‹ åºçš„æ•´ä¸ªå›¾æ ‡ï¼Œä»¥åŠæ¯ä¸ªåº”ç”¨ç»„ä»¶çš„é»˜è®¤å›¾æ ‡ã€‚å¯¹äºŽã€ã€ã€ã€ å’Œå…ƒç´ ï¼Œè¯·çœ‹å®ƒä»¬å„è‡ªçš„iconå±žæ€§ã€‚ è®¾ç½®è¿™ä¸ªå±žæ€§æ—¶ï¼Œå¿…é¡»è¦å¼•ç”¨ä¸€ä¸ªåŒ…å«å›¾ç‰‡çš„å¯ç»˜åˆ¶èµ„æºï¼ˆä¾‹å¦‚ï¼Œâ€œ@drawable/iconâ€ï¼‰ã€‚æ²¡æœ‰é»˜è®¤çš„å›¾æ ‡ã€‚ android:killAfterRestore è¿™ä¸ªå±žæ€§ç”¨äºŽæŒ‡å®šåœ¨å…¨ç³»ç»Ÿçš„æ¢å¤æ“ä½œæœŸé—´ï¼Œåº”ç”¨çš„è®¾ç½®è¢«æ¢å¤ä»¥åŽï¼Œå¯¹åº”çš„é—®é¢˜ç¨‹åºæ˜¯å¦åº”è¯¥è¢«ç»ˆæ­¢ã€‚å•åŒ…æ¢å¤æ“ä½œä¸ä¼šå¯¼è‡´åº”ç”¨ç¨‹åºè¢«å…³æŽ‰ã€‚å…¨ç³»ç»Ÿçš„å¤åŽŸæ“ä½œé€šå¸¸åªä¼šå‘ç”Ÿä¸€æ¬¡ï¼Œå°±æ˜¯åœ¨ç”µè¯è¢«é¦–æ¬¡å»ºç«‹çš„æ—¶å€™ã€‚ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºé€šå¸¸ä¸éœ€è¦ä½¿ç”¨è¿™ä¸ªå±žæ€§ã€‚ é»˜è®¤å€¼æ˜¯trueï¼Œè¿™æ„å‘³ç€åœ¨å…¨ç³»ç»Ÿå¤åŽŸæœŸé—´ï¼Œåº”ç”¨ç¨‹åºå®Œæˆæ•°æ®å¤„ç†ä¹‹åŽï¼Œä¼šè¢«ç»ˆæ­¢ã€‚ android:largeHeap Whether your applicationâ€™s processes should be created with a large Dalvik heap. This applies to all processes created for the application. It only applies to the first application loaded into a process; if youâ€™re using a shared user ID to allow multiple applications to use a process, they all must use this option consistently or they will have unpredictable results.Most apps should not need this and should instead focus on reducing their overall memory usage for improved performance. Enabling this also does not guarantee a fixed increase in available memory, because some devices are constrained by their total available memory.To query the available memory size at runtime, use the methods getMemoryClass() or getLargeMemoryClass().æ— è®ºæ‚¨çš„åº”ç”¨ç¨‹åºçš„è¿›ç¨‹åº”è¯¥æ˜¯ä¸€ä¸ªå¤šå¤§çš„Dalvikå †ã€‚è¿™é€‚ç”¨äºŽä¸ºåº”ç”¨ç¨‹åºåˆ›å»ºçš„æ‰€æœ‰è¿›ç¨‹ã€‚å®ƒåªé€‚ç”¨äºŽåŠ è½½åˆ°è¿›ç¨‹ä¸­çš„ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå¦‚æžœä½ ä½¿ç”¨ä¸€ä¸ªå…±äº«çš„ç”¨æˆ·èº«ä»½è¯ï¼Œå…è®¸å¤šä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨ä¸€ä¸ªè¿›ç¨‹ï¼Œä»–ä»¬éƒ½å¿…é¡»ä½¿ç”¨æ­¤é€‰é¡¹ä¸€è‡´æˆ–ä»–ä»¬å°†æœ‰ä¸å¯é¢„æµ‹çš„ç»“æžœã€‚å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸åº”è¯¥éœ€è¦è¿™ä¸ªï¼Œè€Œåº”è¯¥æŠŠé‡ç‚¹æ”¾åœ¨å‡å°‘å¯¹æ€§èƒ½çš„æ•´ä½“å†…å­˜ä½¿ç”¨ä¸Šã€‚å¯ç”¨æ­¤ä¹Ÿä¸ä¿è¯å¯ç”¨å†…å­˜çš„å›ºå®šå¢žåŠ ï¼Œå› ä¸ºä¸€äº›è®¾å¤‡è¢«å…¶æ€»å¯ç”¨å†…å­˜é™åˆ¶ã€‚æŸ¥è¯¢å¯ç”¨çš„å†…å­˜å¤§å°åœ¨è¿è¡Œæ—¶ï¼Œä½¿ç”¨çš„æ–¹æ³•getmemoryclass()æˆ–getlargememoryclass()ã€‚ android:label è¿™ä¸ªå±žæ€§ç”¨äºŽè®¾ç½®åº”ç”¨ç¨‹ åºæ•´ä½“çš„ç”¨æˆ·å¯è¯»çš„æ ‡ç­¾ï¼Œå¹¶ä¹Ÿæ˜¯æ¯ä¸ªåº”ç”¨ç¨‹åºç»„ä»¶çš„é»˜è®¤æ ‡ç­¾ã€‚å¯¹äºŽã€ã€ã€å’Œå…ƒç´ ï¼Œè¯·çœ‹å®ƒä»¬å„è‡ªçš„ labelå±žæ€§ã€‚ è®¾ç½®è¿™ä¸ªå±žæ€§å€¼æ—¶ï¼Œåº”è¯¥å¼•ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²èµ„æºã€‚ä»¥ä¾¿å®ƒèƒ½å¤Ÿè·Ÿç”¨æˆ·ç•Œé¢ä¸­çš„å…¶ä»–å­—ç¬¦ä¸²ä¸€æ ·èƒ½å¤Ÿè¢«æœ¬åœ°åŒ–ã€‚ä½†æ˜¯ä¸ºäº†åº”ç”¨ç¨‹åºå¼€å‘çš„ä¾¿åˆ©ï¼Œä¹Ÿèƒ½å¤Ÿç”¨åŽŸç”Ÿçš„å­—ç¬¦ä¸²æ¥è®¾ç½®ã€‚ android:logo è¿™ä¸ªå±žæ€§ç”¨äºŽç»™æ•´ä¸ªåº”ç”¨ç¨‹åºè®¾ç½®ä¸€ä¸ªLogoï¼Œè€Œä¸”å®ƒä¹Ÿæ˜¯æ‰€æœ‰Activityçš„é»˜è®¤Logoã€‚ è®¾ç½®è¿™ä¸ªå±žæ€§æ—¶ï¼Œå¿…é¡»è¦å¼•ç”¨ä¸€ä¸ªåŒ…å«å›¾ç‰‡çš„å¯ç»˜åˆ¶èµ„æºï¼ˆå¦‚ï¼šâ€œ@drawable/logoâ€ï¼‰ã€‚æ²¡æœ‰é»˜è®¤çš„Logoã€‚ android:manageSpaceActivity è¿™ä¸ªå±žæ€§å®šä¹‰äº†ä¸€ä¸ªå®Œæ•´çš„Activityå­ç±»çš„åå­—ï¼Œç³»ç»Ÿèƒ½å¤ŸæŠŠè¿™ä¸ªåå­—åŠ è½½åˆ°ç”±ç”¨æˆ·ç®¡ç†è¢«åº”ç”¨ç¨‹åºæ‰€å ç”¨çš„è®¾å¤‡ä¸Šçš„å†…å­˜ã€‚è¿™ä¸ªActivityä¹Ÿåº”è¯¥ç”¨å…ƒç´ æ¥å£°æ˜Žã€‚ android:name è¿™æ•´ä¸ªå±žæ€§ç”¨å®Œæ•´çš„Javaç±»åï¼Œç»™åº”ç”¨ç¨‹åºå®šä¹‰äº†ä¸€ä¸ªApplicationå­ç±»çš„å®žçŽ°ã€‚å½“åº”ç”¨ç¨‹åºè¿›ç¨‹è¢«å¯åŠ¨æ—¶ï¼Œè¿™ä¸ªç±»åœ¨å…¶ä»–ä»»ä½•åº”ç”¨ç¨‹åºç»„ä»¶è¢«å®žä¾‹åŒ–ä¹‹å‰å®žä¾‹åŒ–ã€‚ è¿™ä¸ªå­ç±»å®žçŽ°æ˜¯å¯é€‰çš„ï¼Œå¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸éœ€è¦ä¸€ä¸ªå­ç±»çš„å®žçŽ°ã€‚å¦‚æžœæ²¡æœ‰å®žçŽ°è‡ªå·±çš„å­ç±»ï¼ŒAndroidç³»ç»Ÿä¼šä½¿ç”¨åŸºæœ¬çš„Applicationç±»çš„ä¸€ä¸ªå®žä¾‹ã€‚ android:permission è¿™ä¸ªå±žæ€§å®šä¹‰äº†ä¸€ä¸ªæƒé™ï¼Œä¸ºäº†è·Ÿåº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ï¼Œå®¢æˆ·ç«¯å¿…é¡»è¦æœ‰è¿™ä¸ªæƒé™ã€‚è¿™ä¸ªå±žæ€§æ˜¯ä¸ºç»™æ‰€æœ‰çš„åº”ç”¨ç¨‹åºç»„ä»¶è®¾ç½®æƒé™æä¾›äº†ä¾¿åˆ©çš„æ–¹æ³•ã€‚å®ƒèƒ½å¤Ÿè¢«ç‹¬ç«‹ç»„ä»¶æ‰€è®¾ç½®çš„permissionå±žæ€§æ‰€è¦†ç›–ã€‚ android:persistent è¿™ä¸ªå±žæ€§ç”¨æˆ·è®¾ç½®åº”ç”¨ç¨‹åºæ˜¯å¦åº”è¯¥æ—¶åˆ»ä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œå¦‚æžœè®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆå°±ä¿æŒï¼Œå¦åˆ™ä¸ä¿æŒã€‚é»˜è®¤å€¼æ˜¯falseã€‚æ™®é€šçš„åº”ç”¨ç¨‹åºä¸åº”è¯¥è®¾ç½®è¿™ä¸ªå±žæ€§ï¼ŒæŒä¹…è¿è¡Œæ¨¡å¼ä»…ç”¨äºŽæŸäº›ç³»ç»Ÿçº§çš„åº”ç”¨ç¨‹åºã€‚ android:process è¿™ä¸ªå±žæ€§ç”¨äºŽå®šä¹‰ä¸€ä¸ªè¿›ç¨‹åç§°ï¼Œåº”ç”¨ç¨‹åºçš„æ‰€æœ‰ç»„ä»¶éƒ½åº”è¯¥è¿è¡Œåœ¨è¿™ä¸ªè¿›ç¨‹ä¸­ã€‚æ¯ä¸ªç»„ä»¶éƒ½èƒ½å¤Ÿç”¨å®ƒè‡ªå·±processå±žæ€§çš„è®¾ç½®æ¥è¦†ç›–è¿™ä¸ªå…ƒç´ ä¸­çš„è®¾ç½®ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“åº”ç”¨ç¨‹åºçš„ç¬¬ä¸€ä¸ªç»„ä»¶éœ€è¦è¿è¡Œæ—¶ï¼ŒAndroidç³»ç»Ÿå°±ä¼šç»™è¿™ä¸ªåº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ã€‚ç„¶åŽï¼Œåº”ç”¨ä¸­çš„æ‰€æœ‰ç»„ä»¶éƒ½è¿è¡Œåœ¨è¿™ä¸ªè¿›ç¨‹ä¸­ã€‚é»˜è®¤çš„è¿›ç¨‹åæ˜¯è·Ÿå…ƒç´ ä¸­è®¾ç½®çš„åŒ…åè¿›è¡ŒåŒ¹é…çš„ã€‚ é€šè¿‡è®¾ç½®è¿™ä¸ªå±žæ€§ï¼Œèƒ½å¤Ÿè·Ÿå¦å¤–ä¸€ä¸ªåº”ç”¨ç¨‹åºå…±äº«ä¸€ä¸ªè¿›ç¨‹åï¼Œèƒ½å¤ŸæŠŠè¿™ä¸¤ä¸ªåº”ç”¨ç¨‹åºä¸­çš„ç»„ä»¶éƒ½å®‰æŽ’åˆ°åŒä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œâ€”ä½†æ˜¯ä»…é™äºŽè¿™ä¸¤ä¸ªåº”ç”¨ç¨‹åºå…±äº«ä¸€ä¸ªç”¨æˆ·IDï¼Œå¹¶ä¸”å¸¦æœ‰ç›¸åŒçš„æ•°å­—è¯ä¹¦ã€‚ å¦‚æžœè¿™ä¸ªè¿›ç¨‹åç§°ç”¨â€œï¼šâ€å¼€å¤´ï¼Œé‚£ä¹ˆåœ¨éœ€è¦çš„æ—¶å€™ï¼Œå°±ä¼šç»™åº”ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªæ–°çš„ã€ç§æœ‰çš„è¿›ç¨‹ã€‚å¦‚æžœè¿›ç¨‹åç”¨å°å†™å­—ç¬¦å¼€å¤´ï¼Œå°±ä¼šç”¨è¿™ä¸ªåå­—åˆ›å»ºä¸€ä¸ªå…¨å±€çš„è¿›ç¨‹ï¼Œè¿™ä¸ªå…¨å±€çš„è¿›ç¨‹èƒ½å¤Ÿè¢«å…¶ä»–åº”ç”¨ç¨‹åºå…±äº«ï¼Œä»Žè€Œå‡å°‘èµ„æºçš„ä½¿ç”¨ã€‚ android:restoreAnyVersion è®¾ç½®è¿™ä¸ªå±žæ€§è¡¨ç¤ºåº”ç”¨ç¨‹åºå‡†å¤‡å°è¯•æ¢å¤ä»»ä½•å¤‡ä»½çš„æ•°æ®é›†ï¼Œå³ä½¿å¤‡ä»½æ¯”è®¾å¤‡ä¸Šå½“å‰å®‰è£…çš„åº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬è¦æ–°ã€‚è¿™ä¸ªå±žæ€§è®¾ç½®ä¸ºtrueï¼Œå³ä½¿æ˜¯åœ¨ç‰ˆæœ¬ä¸åŒ¹é…è€Œäº§ç”Ÿæ•°æ®å…¼å®¹æ€§æç¤ºçš„æ—¶å€™ï¼Œä¹Ÿä¼šå…è®¸å¤‡ä»½ç®¡ç†æ¥æ¢å¤å¤‡ä»½çš„æ•°æ®ï¼Œæ‰€ä»¥è¦è°¨æ…Žä½¿ç”¨ã€‚ è¿™ä¸ªå±žæ€§çš„é»˜è®¤å€¼æ˜¯falseã€‚ android:taskAffinity è¿™ä¸ªå±žæ€§ç»™åº”ç”¨çš„æ‰€æœ‰çš„Activityè®¾ç½®äº†ä¸€ä¸ªäº²ç¼˜å…³ç³»åï¼Œé™¤äº†é‚£äº›ç”¨å®ƒä»¬è‡ªå·±çš„taskAffinityå±žæ€§è®¾ç½®ä¸åŒäº²ç¼˜å…³ç³»çš„ç»„ä»¶ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºä¸­çš„æ‰€æœ‰Activityéƒ½ä¼šå…±äº«ç›¸åŒçš„äº²ç¼˜å…³ç³»ï¼Œäº²ç¼˜å…³ç³»çš„åç§°è·Ÿç”±å…ƒç´ è®¾ç½®çš„åŒ…åç›¸åŒã€‚ android:theme è¿™ä¸ªå±žæ€§ç»™åº”ç”¨ç¨‹åºä¸­æ‰€æœ‰çš„Activityè®¾ç½®é»˜è®¤çš„ä¸»é¢˜ï¼Œå±žæ€§å€¼è¦å¼•ç”¨ä¸€ä¸ªæ ·å¼èµ„æºã€‚æ¯ä¸ªç‹¬ç«‹çš„Activityçš„ä¸»é¢˜ä¼šè¢«å®ƒä»¬è‡ªå·±çš„themeå±žæ€§æ‰€è¦†ç›–ã€‚ android:uiOptions è¿™ä¸ªå±žæ€§è®¾ç½®äº†Activityçš„UIçš„é¢å¤–é€‰é¡¹ã€‚å®ƒå¿…é¡»æ˜¯ä¸‹è¡¨ä¸­çš„ä¸€ä¸ªå€¼ï¼š å€¼ è¯´æ˜Ž none é»˜è®¤è®¾ç½®ï¼Œæ²¡æœ‰é¢å¤–çš„UIé€‰é¡¹ã€‚ splitActionBarWhenNarrow åœ¨æ°´å¹³ç©ºé—´å—åˆ°é™åˆ¶çš„æ—¶ å€™ï¼Œä¼šåœ¨å±å¹•çš„åº•éƒ¨æ·»åŠ ä¸€ä¸ªç”¨äºŽæ˜¾ç¤ºActionBarä¸­æ“ä½œé¡¹çš„æ ï¼Œä¾‹å¦‚ï¼šåœ¨çºµå‘çš„æ‰‹æŒè®¾å¤‡ä¸Šã€‚è€Œä¸æ˜¯åœ¨å±å¹•é¡¶éƒ¨çš„æ“ä½œæ ä¸­æ˜¾ç¤ºå°‘é‡çš„æ“ä½œé¡¹ã€‚å®ƒä¼šæŠŠæ“ ä½œæ åˆ†æˆä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼Œé¡¶éƒ¨ç”¨äºŽå¯¼èˆªé€‰æ‹©ï¼Œåº•éƒ¨ç”¨äºŽæ“ä½œé¡¹ç›®ã€‚è¿™æ ·å°±ä¼šç¡®ä¿å¯ç”¨çš„åˆç†ç©ºé—´ä¸ä»…åªæ˜¯é’ˆå¯¹æ“ä½œé¡¹ç›®ï¼Œè€Œä¸”è¿˜ä¼šåœ¨é¡¶éƒ¨ç»™å¯¼èˆªå’Œæ ‡é¢˜ç•™æœ‰ç©ºé—´ã€‚èœå• é¡¹ç›®ä¸èƒ½è¢«åˆ†å¼€åˆ°ä¸¤ä¸ªæ ä¸­ï¼Œå®ƒä»¬è¦æ˜¾ç¤ºåœ¨ä¸€èµ·ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[redis,mysql,sequelize,node,linux,docker,ç´¢å¼•ä¼˜ç§€æ–‡ç« é›†é”¦]]></title>
    <url>%2Fposts%2F325455a3.html</url>
    <content type="text"><![CDATA[redis Redis æ•°æ®åº“å…¥é—¨æŒ‡å— Redis æ•°æ®ç±»åž‹ä¹‹å­—ç¬¦ä¸²(String)ç±»åž‹ Redis æ•°æ®ç±»åž‹ä¹‹å“ˆå¸Œ(Hash)ç±»åž‹ Redis æ•°æ®ç±»åž‹ä¹‹åˆ—è¡¨(List)ç±»åž‹ Redis æ•°æ®ç±»åž‹ä¹‹é›†åˆ(Set)ç±»åž‹ Redis æ•°æ®ç±»åž‹ä¹‹æœ‰åºé›†åˆ(Sorted Set) Redis é”®(Key)çš„æ“ä½œå‘½ä»¤ redis - Node.js Rediså®¢æˆ·ç«¯æ¨¡å— mysql Linux æºç ç¼–è¯‘å®‰è£…MySQL 5.7 MySQL è‡ªå®šä¹‰å‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨ MySQL äº‹ä»¶è°ƒåº¦å™¨(Event Scheduler)åˆ›å»ºå®šæ—¶ä»»åŠ¡ MySqlè§†å›¾viewçš„ä½¿ç”¨ï¼šåˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ MySqlè§¦å‘å™¨triggerçš„ä½¿ç”¨ ä½¿ç”¨MySQLçš„DATE_FORMAT()å‡½æ•°è¿›è¡Œæ—¥æœŸ/æ—¶é—´æ ¼å¼åŒ– ç´¢å¼• å‚è€ƒ1 å‚è€ƒ2 Sequelize å®šä¹‰ç´¢å¼• MySQLç´¢å¼•ä½¿ç”¨ï¼åˆ›å»ºã€æŸ¥çœ‹ã€åˆ é™¤MySQLç´¢å¼• MySQLç´¢å¼•çš„ä¼˜ç‚¹å’Œç¼ºç‚¹åŠæ³¨æ„äº‹é¡¹ sequelize Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼1. å¿«é€Ÿå…¥é—¨ã€Sequelizeç±» Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼2. Model çš„å®šä¹‰ã€ä½¿ç”¨ä¸ŽModelç±»çš„API Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼3. æ¨¡åž‹ï¼ˆè¡¨ï¼‰ä¹‹é—´çš„å…³ç³»/å…³è” Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼4. æŸ¥è¯¢ä¸ŽåŽŸå§‹æŸ¥è¯¢ Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼5. å®žä¾‹çš„ä½¿ç”¨ã€Instanceç±»ä»‹ç» Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼6. äº‹åŠ¡çš„ä½¿ç”¨ä¸ŽTransactionç±» Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼8. é’©å­å‡½æ•°çš„ä½¿ç”¨ã€Hooksç›¸å…³API Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼7. Scopes ä½œç”¨åŸŸçš„ä½¿ç”¨ Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼9. æ•°æ®ç±»åž‹ç±» DataTypes åŠå…¶API Sequelize ä¸­æ–‡APIæ–‡æ¡£ï¼10. Migrations æ•°æ®è¿ç§»ä¸ŽQueryInterfaceå¯¹è±¡ Sequelize åµŒå¥—æ¨¡åž‹æŸ¥è¯¢åŠåµŒå¥—æ¨¡åž‹å­—æ®µæŽ’åº Sequelize è¿žæŽ¥æŸ¥è¯¢æ—¶includeä¸­modelä¸Žassociationçš„åŒºåˆ« åœ¨Sequelizeä¸­ä½¿ç”¨group byåˆ†ç»„èšåˆæŸ¥è¯¢ Node.js Sequelize å®žçŽ°æ•°æ®åº“è¯»å†™åˆ†ç¦» Sequelize belongsToManyå…³ç³»çš„ä½¿ç”¨åŠ is not associated with é—®é¢˜çš„å¤„ç† Sequelize ä¸­äº‹åŠ¡çš„ä½¿ç”¨ï¼å¯åŠ¨ã€æäº¤ã€å›žæ»š NODE Node.js åŸºäºŽæµå°†æ—¥å¿—ã€é”™è¯¯åˆ†åˆ«å†™å…¥ä¸åŒæ–‡ä»¶ Node.js æ ¸å¿ƒ(åŽŸç”Ÿ)æ¨¡å—æ•´ç† Node.js ä¸­æœ‰å“ªäº›ç±»åž‹çš„é”™è¯¯ Node.js äº‹ä»¶å¾ªçŽ¯ï¼ˆEvent Loopï¼‰ä»‹ç» Node.jsï¼ˆnpmï¼‰ä¸­çš„åŒ…å’Œæ¨¡å— Linux curl å‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨åŠå‘½ä»¤å‚æ•°è¯´æ˜Ž ssh-keygenå®žçŽ°åŸºäºŽSSHå¯†é’¥çš„SSHã€SCPæ— å¯†ç ç™»å½• Linuxå‘½ä»¤ftpæ–‡ä»¶ä¼ è¾“ æ­å»ºFTPæœåŠ¡å™¨ Linuxå‘½ä»¤grepæŸ¥æ‰¾æ–‡ä»¶é‡Œç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸² åŠ å¿«ç½‘é¡µè®¿é—®é€Ÿåº¦Nginxé…ç½®gzipåŽ‹ç¼©åŠŸèƒ½ docker Docker çš„å®‰è£… MySQL å®˜æ–¹Dockeré•œåƒçš„ä½¿ç”¨ ä½¿ç”¨ Docker éƒ¨æš‘Node.jsåº”ç”¨ Docker å®¹å™¨æ•°æ®å·(Data Volume)ä¸Žæ•°æ®ç®¡ç† Dockeré•œåƒæž„å»ºæ–‡ä»¶DockerfileåŠç›¸å…³å‘½ä»¤ä»‹ç» æž„å»ºè‡ªå·²çš„ Docker é•œåƒ Docker é•œåƒ(Image)ä¸Žä»“åº“(Repository)åŸºç¡€ Docker å®¹å™¨(Container)çš„ç®¡ç†]]></content>
      <categories>
        <category>awsome</category>
      </categories>
      <tags>
        <tag>awsome</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[editorConfigç¼–è¾‘å™¨é…ç½®]]></title>
    <url>%2Fposts%2F6d832a8b.html</url>
    <content type="text"><![CDATA[å½“å¤šäººå›¢é˜Ÿè¿›è¡Œä¸€ä¸ªé¡¹ç›®å¼€å‘æ—¶ï¼Œæ¯ä¸ªäººå¯èƒ½å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸åŒï¼Œæœ‰äººå–œæ¬¢Webstromã€æœ‰äººå–œæ¬¢sublimeã€è¿˜æœ‰äººå–œæ¬¢Hbuilderã€‚ è¿™ä¸ªæ—¶å€™ï¼Œé—®é¢˜ä¾¿è¿Žé¢è€Œæ¥ï¼Œå¦‚ä½•ä½¿ä½¿ç”¨ä¸åŒç¼–è¾‘å™¨çš„å¼€å‘è€…èƒ½å¤Ÿè½»æ¾æƒ¬æ„çš„éµå®ˆæœ€åŸºæœ¬çš„ä»£ç è§„èŒƒå‘¢ï¼Ÿ æœ€åŽç»ˆäºŽæ‰¾åˆ°äº†editorConfigè¿™ä¸ªä¸œä¸œï¼Œå‘çŽ°åœ¨è¿™é‡Œé…ç½®çš„ä»£ç è§„èŒƒè§„åˆ™ä¼˜å…ˆçº§é«˜äºŽç¼–è¾‘å™¨é»˜è®¤çš„ä»£ç æ ¼å¼åŒ–è§„åˆ™ã€‚æ¯”å¦‚æˆ‘ä½¿ç”¨çš„æ˜¯Webstromç¼–è¾‘å™¨ï¼Œæˆ‘æ¯ä¸€æ¬¡å†™å®Œä»£ç ä¹‹åŽï¼Œéƒ½ä¹ æƒ¯æ€§çš„æŒ‰ä¸‹â€œCtrl+Alt+Lâ€å¿«æ·é”®åŽ»æ•´ç†ä»£ç æ ¼å¼ã€‚å¦‚æžœæˆ‘æ²¡æœ‰é…ç½®editorconfigï¼Œæ‰§è¡Œçš„å°±æ˜¯ç¼–è¾‘å™¨é»˜è®¤çš„ä»£ç æ ¼å¼åŒ–è§„åˆ™ï¼›å¦‚æžœæˆ‘å·²ç»é…ç½®äº†editorConfigï¼Œåˆ™æŒ‰ç…§æˆ‘è®¾ç½®çš„è§„åˆ™æ¥ï¼Œä»Žè€Œå¿½ç•¥æµè§ˆå™¨çš„è®¾ç½®ã€‚ ä¸‹é¢è¯´è¯´å®ƒçš„å¸¸ç”¨é…ç½®å’Œä½¿ç”¨æ–¹æ³•ï¼š å¸¸ç”¨é…ç½® ï¼ˆ1ï¼‰charset ç¼–ç æ ¼å¼ ï¼ˆ2ï¼‰indent_style ç¼©è¿›æ–¹å¼ ï¼ˆ3ï¼‰indent_size ç¼©è¿›å¤§å° ï¼ˆ4ï¼‰insert_final_newline æ˜¯å¦è®©æ–‡ä»¶ä»¥ç©ºè¡Œç»“æŸ ï¼ˆ5ï¼‰trim_trailing_whitespace è‡ªåŠ¨åˆ é™¤æ–‡ä»¶æœ«å°¾ç©ºç™½è¡Œ ï¼ˆ6ï¼‰max_line_length ç–‘ä¼¼æœ€å¤§è¡Œå®½ ä½¿ç”¨æ–¹æ³• ï¼ˆ1ï¼‰ä¸‹è½½ç›¸å…³ç¼–è¾‘å™¨çš„editorconfigæ’ä»¶ã€‚ ï¼ˆ2ï¼‰åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ–°å»º.editorconfigæ–‡ä»¶ã€‚ ï¼ˆ3ï¼‰é…ç½®è§„èŒƒï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 12345678910111213141516171819202122# http://editorconfig.orgroot = true[*]#ç¼©è¿›é£Žæ ¼ï¼šç©ºæ ¼indent_style = space#ç¼©è¿›å¤§å°2indent_size = 2#æ¢è¡Œç¬¦lfend_of_line = lf#å­—ç¬¦é›†utf-8charset = utf-8#æ˜¯å¦åˆ é™¤è¡Œå°¾çš„ç©ºæ ¼trim_trailing_whitespace = true#æ˜¯å¦åœ¨æ–‡ä»¶çš„æœ€åŽæ’å…¥ä¸€ä¸ªç©ºè¡Œinsert_final_newline = true[*.md]trim_trailing_whitespace = false[Makefile]indent_style = tab å®˜æ–¹ç½‘ç«™ atomç½‘ç«™ï¼šhttps://atom.io/packages/editorconfig GitHubï¼šhttps://github.com/sindresorhus/atom-editorconfig ä½¿ç”¨å»ºè®®é…åˆä»£ç æ£€æŸ¥å·¥å…·ä½¿ç”¨ï¼Œæ¯”å¦‚è¯´ï¼šESLintå’ŒTSLintï¼Œç»Ÿä¸€ä»£ç é£Žæ ¼ã€‚ æ”¯æŒçš„ç¼–è¾‘å™¨ è™½ç„¶editorç¼–è¾‘å™¨çš„å¯ç”¨é…ç½®å¹¶ä¸å¤šï¼Œä½†ç›®å‰çŽ°æœ‰çš„ä¸€äº›é…ç½®ä¹Ÿå·®ä¸å¤šèƒ½æ»¡è¶³æœ€åŸºæœ¬æ ¼å¼éœ€æ±‚ã€‚]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>tips</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>editorConfig</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[webstormæ¿€æ´»ç ´è§£æ–¹æ³•å¤§å…¨]]></title>
    <url>%2Fposts%2F9468177.html</url>
    <content type="text"><![CDATA[webstorm ä½œä¸ºæœ€è¿‘æœ€ç«çš„å‰ç«¯å¼€å‘å·¥å…·,ä¹Ÿç¡®å®žå¯¹å¾—èµ·é‚£ä¸ªä»·æ ¼,ä½†æ˜¯ç§‰ç€å‹¤ä¿­èŠ‚çº¦çš„ä¼ ç»Ÿç¾Žå¾·,æˆ‘ä»¬è‚¯å®šæ˜¯èƒ½çœåˆ™çœå•Šã€‚ æ–¹æ³•ä¸€ï¼šï¼ˆæ›´æ–°æ—¶é—´ï¼š2018/4/8ï¼‰v3.3 ä¸ä¸€å®šé•¿æœŸæœ‰æ•ˆæ³¨å†Œæ—¶ï¼Œåœ¨æ‰“å¼€çš„License Activationçª—å£ä¸­é€‰æ‹©â€œLicense serverâ€ï¼Œåœ¨è¾“å…¥æ¡†è¾“å…¥ä¸‹é¢çš„ç½‘å€ï¼š http://180.76.140.202:9123 (2018/07/20) http://idea.wrbugtest.tk/ (2018/06/16) ç‚¹å‡»ï¼šActivateå³å¯ã€‚ æ–¹æ³•äºŒï¼šèŽ·å–æ³¨å†Œç ï¼ˆæŽ¨èï¼‰æ‰“å¼€ç½‘å€IntelliJ IDEA æ³¨å†Œç ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸‹é¢çš„ç•Œé¢ï¼Œç›´æŽ¥ç‚¹å‡»èŽ·å–æ¿€æ´»ç ï¼Œå°†ç”Ÿæˆçš„æ¿€æ´»ç ç²˜è´´åˆ°WebStormæ¿€æ´»å¯¹è¯æ¡†ä¸­çš„Lisence Codeè¾“å…¥æ¡†ï¼Œç‚¹å‡»OKå³å¯ç ´è§£ã€‚ æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ç ´è§£è¡¥ä¸ï¼ˆæŽ¨èï¼‰é¦–å…ˆä¸‹è½½è¡¥ä¸ï¼Œçœ‹å›¾ï¼ æœ€æ–°ç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼šIntelliJ IDEA æ³¨å†Œç  ç¬¬ä¸€æ­¥:å°†è¡¥ä¸å¤åˆ¶åˆ°å®‰è£…ç›®å½•çš„binç›®å½•ä¸‹ 1\...\WebStorm\bin PSï¼šä¸€å®šè¦æŠŠè¿™ä¸ªjaråŒ…å¤åˆ¶åˆ°è¿™ä¸ªbinç›®å½•ï¼Œä¸ç„¶åŽé¢æ“ä½œå¯èƒ½æ— æ³•è¿›è¡Œã€‚ *ç¬¬äºŒæ­¥ï¼šä¿®æ”¹åŒç›®å½•ä¸‹çš„ WebStorm.vmoptions * ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ä¹‹åŽï¼Œåœ¨æ–‡ä»¶æœ€ä¸Šé¢åŠ ä¸€è¡Œä»£ç  ï¼š 1-javaagent: D:/Program Files (x86)/JetBrains/WebStorm/bin/ç ´è§£è¡¥ä¸åå­—.jar ç¬¬ä¸‰æ­¥ï¼šé…ç½®å¥½ä¹‹åŽï¼Œä¿å­˜æ–‡ä»¶ã€‚åœ¨æ­¤å†æ¬¡å¯åŠ¨WebStormï¼Œé€‰æ‹©activation codeï¼Œå¹¶å°†-javaagent:ä½ çš„WebStormè·¯å¾„å‰ç¼€/WebStorm/bin/ç ´è§£è¡¥ä¸åå­—.jar æ–¹æ³•å››:è‡ªå·±æ­å»ºIntelliJ IDEAæŽˆæƒæœåŠ¡å™¨è¿™ä¸ªæ¯”è¾ƒç¹ç,å–œæ¬¢æŠ˜è…¾çš„äººå¯ä»¥è¯•è¯•: IntelliJ IDEA License Serveræœ¬åœ°æ­å»ºæ•™ç¨‹ ilanyuâ€™så¤§ç‰›çš„åšå®¢é‡Œæœ‰è¯¦ç»†çš„æ­¥éª¤ å¦‚æžœæœ‰æ›´å¥½çš„æ–¹æ³•,æ¬¢è¿Žç•™è¨€äº¤æµã€‚]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Chromeçš„æŽ§åˆ¶å°,Consoleå‘½ä»¤çš„å„ç§ç”¨æ³•ä½ çœŸçš„éƒ½å·²ç»äº†è§£äº†å—ï¼Ÿ]]></title>
    <url>%2Fposts%2F8910c6e9.html</url>
    <content type="text"><![CDATA[å‰è¨€ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬æ¯å¤©éƒ½ç¦»ä¸å¼€ç”¨æŽ§åˆ¶å°è°ƒè¯•ä»£ç ï¼Œconsole.logä¹Ÿæˆäº†æˆ‘ä»¬æœ€å¸¸ç”¨çš„å‘½ä»¤ï¼Œé‚£é™¤äº†ç”¨console.logï¼Œè¿˜æœ‰è®¸å¤šconsoleçš„æ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼Œç†Ÿç»ƒæŽŒæ¡å®ƒä»¬ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨æŽ§åˆ¶å°çœ‹åˆ°çš„ä¿¡æ¯æ›´ç¾Žè§‚å‡†ç¡®ï¼Œä¹Ÿä¼šå¤§å¤§æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆçŽ‡å“¦ï¼Œä¸‹é¢å°±è·Ÿå°è‚†ä¸€èµ·æ¥çœ‹çœ‹å§. Chromeçš„æŽ§åˆ¶å°å¤§éƒ¨åˆ†å¸¸ç”¨æµè§ˆå™¨éƒ½æœ‰å„è‡ªçš„æŽ§åˆ¶å°ï¼Œä¸è¿‡å°è‚†ç”¨ç€æœ€ä¹ æƒ¯çš„è¿˜æ˜¯Chromeçš„æŽ§åˆ¶å°ï¼Œæ‰“å¼€chromeï¼Œwinç³»ç»ŸæŒ‰F12ï¼Œmacç³»ç»ŸæŒ‰command+option+Jå°±å¯ä»¥å‘¼å‡ºæŽ§åˆ¶å°äº†ï¼Œåˆ‡æ¢åˆ°Consoleæ ‡ç­¾å°±èƒ½çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œbaiduè¿˜åœ¨æŽ§åˆ¶å°ç»™æˆ‘ä»¬ç•™äº†ä¸ªå°å½©è›‹ï¼Œæˆ‘æƒ³è¿™ä¸ªå½©è›‹ä¹Ÿæ˜¯ä¸ºæˆ‘ä»¬ç¨‹åºå‘˜åŒå­¦ç•™çš„å§ã€‚è®©æˆ‘ä»¬å…ˆå­¦ç¬¬ä¸€ä¸ªå‘½ä»¤æ¸…é™¤æŽ§åˆ¶å°æ¥å¼€å§‹å§ã€‚ æ¸…é™¤æŽ§åˆ¶å°åœ¨chormeä¸‹æ¸…é™¤æŽ§åˆ¶å°çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼š è¾“å…¥console.clear()å‘½ä»¤æˆ–clear()å‘½ä»¤ ä½¿ç”¨å¿«æ·é”® Control + J æˆ– Command + K ç‚¹å‡»æŽ§åˆ¶å°å·¦ä¸Šè§’ç¬¬äºŒä¸ªå›¾æ ‡ ðŸš« æ˜¾ç¤ºä¿¡æ¯çš„å‘½ä»¤12345console.log('æŠ€æœ¯æ”¾è‚†èŠ') // è¾“å‡ºæ™®é€šä¿¡æ¯console.info('æŠ€æœ¯æ”¾è‚†èŠ') // è¾“å‡ºæç¤ºä¿¡æ¯console.warn('æŠ€æœ¯æ”¾è‚†èŠ') // è¾“å‡ºè­¦å‘Šä¿¡æ¯console.error('æŠ€æœ¯æ”¾è‚†èŠ') // è¾“å‡ºé”™è¯¯ä¿¡æ¯console.debug('æŠ€æœ¯æ”¾è‚†èŠ') // è¾“å‡ºè°ƒè¯•ä¿¡æ¯ console.logã€console.infoã€console.debugè¿™ä¸‰ä¸ªå‘½ä»¤å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨console.logå°±è¡Œï¼Œå¹¶ä¸”chromeè¿˜ä¸æ”¯æŒconsole.debugå‘½ä»¤ã€‚ console.warnå‘½ä»¤è¾“å‡ºè­¦å‘Šä¿¡æ¯ï¼Œä¿¡æ¯å‰å¸¦æœ‰é»„è‰²è­¦å‘Šç¬¦å·ã€‚console.errorè¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œä¿¡æ¯å‰å¸¦æœ‰çº¢è‰²é”™è¯¯ç¬¦å·ï¼Œè¡¨ç¤ºå‡ºé”™ï¼ŒåŒæ—¶ä¼šæ˜¾ç¤ºé”™è¯¯å‘ç”Ÿçš„å †æ ˆã€‚ä¸Šæ®µä»£ç åœ¨chromeæŽ§åˆ¶å°è¾“å‡ºæ•ˆæžœå¦‚ä¸‹: åœ¨safariè¾“å‡ºæ•ˆæžœå¦‚ä¸‹: å ä½ç¬¦consoleä¸Šè¿°çš„å‘½ä»¤æ”¯æŒprintfçš„å ä½ç¬¦æ ¼å¼ï¼Œæ”¯æŒçš„å ä½ç¬¦æœ‰ï¼šå­—ç¬¦ï¼ˆ%sï¼‰ã€æ•´æ•°ï¼ˆ%dæˆ–%iï¼‰ã€æµ®ç‚¹æ•°ï¼ˆ%fï¼‰å’Œå¯¹è±¡ï¼ˆ%oï¼‰: å ä½ç¬¦ ä½œç”¨ %s å­—ç¬¦ä¸² %d or %i æ•´æ•° %f æµ®ç‚¹æ•° %o å¯å±•å¼€çš„DOM %O åˆ—å‡ºDOMçš„å±žæ€§ %c æ ¹æ®æä¾›çš„cssæ ·å¼æ ¼å¼åŒ–å­—ç¬¦ä¸² 123456//å­—ç¬¦(%s)console.log("%s","æŠ€æœ¯æ”¾è‚†èŠ");//æ•´æ•°(%dæˆ–%i)console.log("%då¹´%dæœˆ%dæ—¥",2019,1,6); //æµ®ç‚¹æ•°(%f)console.log("PI=%f",3.1415926); æ˜¾ç¤ºæ•ˆæžœå¦‚ä¸‹ï¼š %oã€%O éƒ½æ˜¯ç”¨æ¥è¾“å‡º Object å¯¹è±¡çš„ï¼Œå¯¹æ™®é€šçš„ Object å¯¹è±¡ï¼Œä¸¤è€…æ²¡åŒºåˆ«ï¼Œä½†æ˜¯æ‰“å°domèŠ‚ç‚¹æ—¶å°±ä¸ä¸€æ ·äº†ï¼š %c å ä½ç¬¦æ˜¯æœ€å¸¸ç”¨çš„ã€‚ä½¿ç”¨ %c å ä½ç¬¦æ—¶ï¼Œå¯¹åº”çš„åŽé¢çš„å‚æ•°å¿…é¡»æ˜¯ CSS è¯­å¥ï¼Œç”¨æ¥å¯¹è¾“å‡ºå†…å®¹è¿›è¡Œ CSS æ¸²æŸ“ã€‚å¸¸è§çš„è¾“å‡ºæ–¹å¼æœ‰ä¸¤ç§ï¼šæ–‡å­—æ ·å¼ã€å›¾ç‰‡è¾“å‡ºã€‚ ä¿¡æ¯åˆ†ç»„console.group()ç”¨äºŽå°†æ˜¾ç¤ºçš„ä¿¡æ¯åˆ†ç»„ï¼Œå¯ä»¥æŠŠä¿¡æ¯è¿›è¡ŒæŠ˜å å’Œå±•å¼€ã€‚console.groupEnd()ç»“æŸå†…è”åˆ†ç»„ å°†å¯¹è±¡ä»¥æ ‘çŠ¶ç»“æž„å±•çŽ°console.dir()å¯ä»¥æ˜¾ç¤ºä¸€ä¸ªå¯¹è±¡æ‰€æœ‰çš„å±žæ€§å’Œæ–¹æ³•. æ˜¾ç¤ºæŸä¸ªèŠ‚ç‚¹çš„å†…å®¹console.dirxml()ç”¨æ¥æ˜¾ç¤ºç½‘é¡µçš„æŸä¸ªèŠ‚ç‚¹(node)æ‰€åŒ…å«çš„html/xmlä»£ç  åˆ¤æ–­å˜é‡æ˜¯å¦æ˜¯çœŸconsole.assert()ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼æˆ–å˜é‡æ˜¯å¦ä¸ºçœŸï¼Œæ­¤æ–¹æ³•æŽ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ã€‚åªæœ‰å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºfalseï¼Œæ‰ä¼šè¾“å‡ºç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¸ä¼šæœ‰ä»»ä½•ç»“æžœã€‚ è®¡æ—¶åŠŸèƒ½console.time()å’Œconsole.timeEnd()ï¼Œç”¨æ¥æ˜¾ç¤ºä»£ç çš„è¿è¡Œæ—¶é—´ 12345console.time("æŽ§åˆ¶å°è®¡æ—¶å™¨");for(var i = 0; i &lt; 10000; i++)&#123; for(var j = 0; j &lt; 10000; j++)&#123;&#125; &#125;console.timeEnd("æŽ§åˆ¶å°è®¡æ—¶å™¨"); æ€§èƒ½åˆ†æžperformance profileconsole.profile()å’Œconsole.proileEnd()ç”¨æ¥åˆ†æžç¨‹åºå„ä¸ªéƒ¨åˆ†çš„è¿è¡Œæ—¶é—´ï¼Œæ‰¾å‡ºç“¶é¢ˆæ‰€åœ¨ã€‚ 123456789101112131415 function All()&#123; for(var i = 0; i &lt; 10; i++)&#123; funcA(100); &#125; funcB(1000); &#125; function funcA(count)&#123; for(var i = 0; i &lt; count; i++)&#123;&#125;; &#125;function funcB(count)&#123; for(var i = 0; i &lt; count; i++)&#123;&#125;;&#125;console.profile("æ€§èƒ½åˆ†æžå™¨");All();console.profileEnd(); è¯¦ç»†çš„ä¿¡æ¯åœ¨chromeæŽ§åˆ¶å°é‡Œçš„â€profileâ€é€‰é¡¹é‡ŒæŸ¥çœ‹ console.count()ç»Ÿè®¡ä»£ç è¢«æ‰§è¡Œçš„æ¬¡æ•°123456function myFunction()&#123; console.count("myFunction è¢«æ‰§è¡Œçš„æ¬¡æ•°");&#125;myFunction(); //myFunction è¢«æ‰§è¡Œçš„æ¬¡æ•°: 1myFunction(); //myFunction è¢«æ‰§è¡Œçš„æ¬¡æ•°: 2myFunction(); //myFunction è¢«æ‰§è¡Œçš„æ¬¡æ•°: 3 console.tableè¡¨æ ¼æ˜¾ç¤ºæ–¹æ³• æ€»ç»“åˆç†çš„åˆ©ç”¨consoleçš„å„ç§æ–¹æ³•ï¼Œä¼šä½¿æˆ‘ä»¬çš„è°ƒè¯•è¿‡ç¨‹æ›´åŠ æ„‰æ‚¦ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œäº†ï¼Œè®°å¾—å³ä¸‹è§’ç‚¹å¥½çœ‹å‘¦ï¼ è½¬è‡ªï¼šhttps://mp.weixin.qq.com/s/8jcqYIPZGQVsLo3fou41Zw]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>tips</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>Console</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¼ºåŠ›æŽ¨èï¼é‚£äº›ä½ ä¸èƒ½é”™è¿‡çš„GitHubæ’ä»¶å’Œå·¥å…·]]></title>
    <url>%2Fposts%2Ff033121.html</url>
    <content type="text"><![CDATA[ä»¥ä»£ç æ‰˜ç®¡å¹³å°èµ·å®¶çš„ GitHub ç½‘ç«™ï¼Œå·²ç„¶æˆä¸ºå…¨çƒç¨‹åºå‘˜å·¥ä½œå’Œç”Ÿæ´»ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ä»½å­ã€‚ä»Žä¼˜ç§€çš„ä¼ä¸šï¼Œåˆ°ä¼˜ç§€çš„ç¨‹åºå‘˜ï¼Œéƒ½å°†è‡ªå·±æœ€ä¼˜ç§€çš„ä»£ç ä½œå“å­˜æ”¾åœ¨è¿™ç‰‡å¼€æºå‡€åœŸé‡Œï¼Œä¾›å½¼æ­¤å­¦ä¹ äº¤æµã€‚ GitHub Trending æ ç›®ç”šè‡³å·²ç»æˆä¸º IT ä»Žä¸šäººå‘˜çš„æ–°é—»æ—¥æŠ¥ï¼Œæ¯æ—¥å¿…è¯»ã€‚ æ—¢ç„¶ GitHub è¿™ä¹ˆé‡è¦ï¼Œåˆè¢«æˆ‘ä»¬ä½¿ç”¨å¾—è¿™ä¹ˆé¢‘ç¹ï¼Œé‚£å…³äºŽ GitHub çš„ä¸€äº›ä¼˜ç§€æµè§ˆå™¨æ’ä»¶æˆ–è€…å…¶ä»–å·¥å…·ï¼Œæˆ‘ä»¬å°±ä¸€å®šä¸å¯é”™è¿‡å•¦ã€‚æœ¬æ–‡å°±æ¥æ•´ç†ä¸€äº›ï¼Œéƒ½æ˜¯æˆ‘å¹³å¸¸ä½¿ç”¨æœ€å¾—å¿ƒåº”æ‰‹çš„ä¸œè¥¿ï¼Œå…¨éƒ½å€¾åŠ›æŽ¨èå‡ºæ¥ï¼Œç»å¯¹å¹²è´§ï¼ Chrome æ‰©å±•ç¨‹åº å¤‡æ³¨ï¼šè¿™ä¸ªåˆ†ç±»çš„éƒ¨åˆ†å‡å¯ä»¥åœ¨ Chrome åº”ç”¨å•†åº— æœç´¢å¾—åˆ°ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥ç‚¹å‡»å°æ ‡é¢˜ç›´æŽ¥è·³è½¬è‡³æ’ä»¶è¯¦æƒ…é¡µã€‚ Octotree å¾ˆå¥½å¥‡çš„æ˜¯ï¼ŒGitHub ä½œä¸ºä»£ç æ‰˜ç®¡å¹³å°ï¼Œç«Ÿç„¶æ²¡æœ‰æä¾›é¡¹ç›®ç›®å½•ï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨çº¿å¿«é€Ÿæµè§ˆé¡¹ç›®ç»“æž„ã€‚æ‰€ä»¥ï¼Œåœ¨çº¿åˆ†æžé¡¹ç›®æºç å°±ä¼šå˜å¾—å¾ˆç¹çï¼Œå¿…é¡»ä¸€å±‚ä¸€å±‚ç‚¹å‡»ï¼Œç„¶åŽå†ä¸€æ¬¡ä¸€æ¬¡åœ°å‘ä¸Šè¿”å›žã€‚è¦çŸ¥é“ï¼Œæœ¬æ¥ GitHub ç½‘ç«™åœ¨ä¸­å›½åŒºçš„è®¿é—®å°±å·²ç»å¾ˆæ…¢äº†ã€‚æœ€æ— å¥ˆçš„åšæ³•å°±æ˜¯ï¼Œä¸‹è½½åˆ°æœ¬åœ°ï¼Œå†ä½¿ç”¨ Sublime ç­‰ç¼–è¾‘å™¨æ‰“å¼€ã€‚ Octotree ä½œä¸º Chrome æµè§ˆå™¨çš„ä¸€æ¬¾æ’ä»¶ï¼Œåˆšå¥½è§£å†³è¿™ä¸ªä½¿ç”¨ç—›ç‚¹ã€‚ä»–èƒ½å¤Ÿåƒ IDE ä¸€æ ·æä¾›é¡¹ç›®ç›®å½•ï¼Œå¿«æ·å¯¼èˆªï¼Œæ–¹ä¾¿æµè§ˆã€‚åŒæ—¶æ”¯æŒ GitHub å’Œ GitLab ä¸¤ä¸ªå¸¸ç”¨çš„ä»£ç æ‰˜ç®¡ç½‘ç«™ã€‚æ›´è´´å¿ƒçš„æ˜¯ï¼Œä½ å¯ä»¥è‡ªè¡Œé€‰æ‹©æ˜¯å¦æ˜¾ç¤ºç›®å½•ã€‚ GitHub Plus åŒæ ·ä½œä¸º Chrome çš„æ’ä»¶ï¼ŒGitHub Plus æä¾›çš„åŠŸèƒ½ä¹Ÿæ˜¯éžå¸¸å®žç”¨ã€‚èƒ½å¤Ÿæ˜¾ç¤ºä»£ç ä»“åº“çš„å¤§å°ï¼Œä»¥åŠå…¶ä¸­æ¯ä¸ªæ–‡ä»¶çš„å¤§å°å’Œä¸‹è½½é“¾æŽ¥ã€‚ä½¿ç”¨è¿™æ¬¾æ’ä»¶ï¼Œæˆ‘ä»¬å†ä¹Ÿä¸ç”¨å› ä¸ºéœ€è¦æŸä¸ªå•ä¸€æ–‡ä»¶è€Œè¢«è¿«ä¸‹è½½æ•´ä¸ªé¡¹ç›®æºç ï¼Œå°¤å…¶æ˜¯åœ¨ç½‘é€Ÿä¸ç»™åŠ›çš„æ—¶å€™ã€‚ GitHub Hovercard ä½¿ç”¨è¿™æ¬¾æ’ä»¶ï¼Œå½“ä½ å°†é¼ æ ‡åœç•™åœ¨ GitHub ç½‘ç«™çš„ç”¨æˆ·å¤´åƒæˆ–è€…ä»“åº“é“¾æŽ¥åœ°å€ä¸Šæ—¶ï¼Œä¼šè‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªæ‚¬æµ®æ¡†ï¼Œå¸¦ä½ æå‰é¢„è§ˆåŸºæœ¬ä¿¡æ¯ã€‚æœ‰ç‚¹ç±»ä¼¼ StackOverflow ç½‘ç«™çš„ç”¨æˆ·å¤´åƒçš„é¼ æ ‡æ‚¬åœæ•ˆæžœã€‚Hovercard æ’ä»¶æ”¯æŒçš„æ‚¬åœä½ç½®æ›´å¤šï¼ŒåŒ…æ‹¬ç”¨æˆ·å¤´åƒï¼Œä»“åº“åœ°å€ï¼ŒIssue é“¾æŽ¥ï¼Œä¸ªäººä¸»é¡µç­‰ã€‚å’±ä»¬è¿˜æ˜¯ç”¨å›¾è¯´è¯æ¯”è¾ƒç›´æŽ¥ï¼š Sourcegraph for GitHub ä»£ç æœç´¢ï¼ŒæŸ¥çœ‹å¼•ç”¨ï¼Œè‡ªåŠ¨è·³è½¬ï¼Œé¡¹ç›®ç›®å½•å¯¼èˆªï¼Œè¿™äº› IDE ä¸Šå¸¸ç”¨çš„åŠŸèƒ½æ“ä½œï¼Œå€ŸåŠ© Sourcegraph æ’ä»¶ï¼Œéƒ½èƒ½å¸®ä½ ç›´æŽ¥åœ¨çº¿ä½¿ç”¨ã€‚å¦‚å›¾ï¼š Octo Mate è¿™æ¬¾æ’ä»¶æä¾›çš„åŠŸèƒ½ä¸Žå‰é¢æåˆ°çš„ GitHub Plus æœ‰ç‚¹ç±»ä¼¼ï¼Œå±•ç¤ºé¡¹ç›®å¤§å°ï¼Œä»»æ„æ–‡ä»¶ç‚¹å‡»ä¸‹è½½ç­‰ã€‚å¦‚å›¾ï¼š Awesome Autocomplete for GitHub GitHub æ™ºèƒ½æœç´¢æ’ä»¶ã€‚æœ‰ç‚¹ç±»ä¼¼è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œå®žæ—¶ç›‘å¬è¾“å…¥çš„æœç´¢å…³é”®å­—ï¼Œè‡ªåŠ¨åˆ—å‡ºç›¸å…³å†…å®¹ã€‚æ­£å¦‚å®˜æ–¹ä»‹ç»é‚£æ ·ï¼Œè‡´åŠ›äºŽæ‰“é€  GitHub ä¸Šæœ€å¥½çš„æœç´¢å¼•æ“Žï¼ŒåŠ©ä½ åœ¨æœç´¢ä»“åº“å’Œç”¨æˆ·æ–¹é¢ï¼Œæ¯”ä»¥å¾€æ›´å¿«äººä¸€æ­¥ã€‚ Isometric Contributions 3D åƒç´ ç«‹ä½“å±•ç¤º GitHub ä¸Šçš„ä»“åº“æäº¤è®°å½•ã€‚ç›¸æ¯”ä¼ ç»Ÿçš„æ–¹å—å›¾è¡¨ï¼Œæ›´æœ‰ç¾Žæ„Ÿã€‚å½“ç„¶ï¼Œä½¿ç”¨è¿™æ¬¾æ’ä»¶ä¹‹åŽï¼Œä½ å¯ä»¥è‡ªç”±åˆ‡æ¢å±•ç¤ºæ–¹å¼ï¼Œè€Œä¸æ˜¯ä¸€åˆ€åˆ‡ã€‚ é«˜æ•ˆçŽ‡ç®¡ç†å·¥å…· å‰é¢æåˆ°çš„éƒ½æ˜¯ Chrome çš„æ’ä»¶ç³»åˆ—ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥è§£å†³å¹³æ—¶æˆ‘ä»¬ä½¿ç”¨ GitHub åœ¨çº¿æœç´¢æˆ–è€…æµè§ˆæŸä¸€ä»“åº“æ—¶æ‰€é‡åˆ°çš„ç—›ç‚¹é—®é¢˜ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç—›ç‚¹æ²¡æœ‰è§£å†³ï¼Œé‚£å°±æ˜¯æˆ‘ä»¬ Star è¿‡çš„ä»“åº“ç®¡ç†é—®é¢˜ã€‚ ä»»ä½•ä¸€ä¸ª IT é¢†åŸŸï¼ŒGitHub ç½‘ç«™éƒ½æœ‰æˆåƒä¸Šä¸‡ä¸ªä¼˜ç§€å¼€æºé¡¹ç›®å¯ä¾›å‚è€ƒå­¦ä¹ ã€‚æ‰€ä»¥ï¼Œæ”¶è—å…³æ³¨å‡ åå‡ ç™¾ä¸ªé¡¹ç›®æ˜¯å†å¹³å¸¸ä¸è¿‡çš„ä¸€ä»¶äº‹äº†ã€‚æ²¡æœ‰æ ‡ç­¾ï¼Œæ²¡æœ‰ä¾¿æ·çš„æ£€ç´¢åŠŸèƒ½ï¼Œå¦‚ä½•é«˜æ•ˆçŽ‡åœ°ç®¡ç†è¿™äº›å…³æ³¨è¿‡çš„é¡¹ç›®å‘¢ï¼Ÿä¹Ÿè®¸ä½ å¯ä»¥å°è¯•è¿™äº›ç½‘ç«™æä¾›çš„å·¥å…·ã€‚ OhMyStar2 å¼ºåŠ›æŽ¨è OhMyStar2 å®¢æˆ·ç«¯ï¼Œå·ç§°æ˜¯ç®¡ç† GitHub Stars æœ€å¥½çš„æ–¹å¼ã€‚è‡ªåŠ¨åŒæ­¥ GitHub è´¦å·çš„ Starsï¼Œæ‹¥æœ‰æ ‡ç­¾å’Œè¯„åˆ†ä¸¤ç§åˆ†ç±»æ–¹å¼åŠ©ä½ åˆ†ç»„ç®¡ç†é¡¹ç›®ï¼Œæ ¹æ®åç§°ã€æ—¥æœŸç­‰æŒ‡æ ‡è‡ªåŠ¨æŽ’åºï¼Œä¸‰æ–¹åˆ†äº«åŠŸèƒ½ï¼Œç”šè‡³æä¾›æ¯æ—¥ Trending æµè§ˆï¼Œè¯´æ˜¯æœ€å¥½ï¼Œåç¬¦å…¶å®žï¼ Astral ä¹Ÿæ˜¯æä¾›æ ‡ç­¾å¼çš„æ–¹å¼ç®¡ç† GitHub è´¦å·å…³æ³¨çš„é¡¹ç›®ã€‚åªä¸è¿‡ï¼Œé€šè¿‡ç½‘ç«™åœ¨çº¿ç®¡ç†ï¼Œæ²¡æœ‰æä¾› PC ç‰ˆå®¢æˆ·ç«¯ã€‚å…è´¹è¯•ç”¨ã€‚ Insight.io è¿™ä¸ªå·¥å…·ä½¿ç”¨èµ·æ¥æœ‰ç‚¹ç±»ä¼¼ IDEï¼Œæä¾›å¼€å‘ä¸­å¸¸ç”¨çš„å¿«é€Ÿå¯¼èˆªã€ä»£ç æœç´¢åŠŸèƒ½ã€æŸ¥çœ‹å¼•ç”¨å’Œç‚¹å‡»è·³è½¬ç­‰åŠŸèƒ½ã€‚ æˆ‘æƒ³ï¼Œæœ‰äº†è¿™äº›å·¥å…·ï¼Œä¸€å®šèƒ½å¤§å¹…æé«˜æˆ‘ä»¬ç¨‹åºå‘˜ä½¿ç”¨ GitHub æ—¶çš„æ•ˆçŽ‡ã€‚å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œæ›´å®¹æ˜“äº‹åŠåŠŸå€ã€‚åˆ©ç”¨å¥½å·¥å…·ï¼Œæ¢ç§è§’åº¦æ¥çœ‹ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¸å¯å¿½è§†çš„èƒ½åŠ›ã€‚ ä»Žäº‹ IT è¡Œä¸šä»¥æ¥ï¼Œè¶Šå‘è§‰å¾—ï¼Œäº’è”ç½‘å¯¹äºŽæˆ‘ä»¬æ¯ä¸ªäººæ¥è¯´ï¼Œéƒ½æ˜¯å…¬å¹³çš„ï¼Œå¦‚ä½•å¼€æ‹“è§†é‡Žï¼Œåˆ©ç”¨ç½‘ç»œå¹³å°æå‡è‡ªå·±çš„å­¦ä¹ èƒ½åŠ›å’Œå·¥ä½œæ•ˆçŽ‡ï¼Œæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚å¾ˆåº†å¹¸ï¼Œæˆ‘ä»¬éƒ½åœ¨è¿™ä¸ªæœ€æ½®æµçš„è¡Œä¸šï¼Œå…±åŒå­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥ã€‚ å¤‡æ³¨ï¼šæ›´å¤šå¼€å‘ä¸­çš„ä¼˜ç§€ Chrome æ’ä»¶ï¼Œå¯è®¿é—®æˆ‘çš„ GitHub ä»“åº“åœ°å€ï¼šhttps://github.com/zhangmiaocc/powerful-chrome-plugins]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MediaMetadataRetrieverèŽ·å–ç½‘ç»œ/æœ¬åœ°è§†é¢‘ç¬¬ä¸€å¸§å›¾ç‰‡]]></title>
    <url>%2Fposts%2Ff0cf7486.html</url>
    <content type="text"><![CDATA[èŽ·å–è§†é¢‘ç¬¬ä¸€å¸§å›¾ç‰‡ï¼Œè¿™ç§éœ€æ±‚ä¸å¤šï¼Œé¡¹ç›®ä¸­ç”¨åˆ°äº†è¿™ä¸ªåŠŸèƒ½è¸©äº†ç‚¹å‘ï¼Œå¾ˆéªšã€‚ èŽ·å–ç½‘ç»œè§†é¢‘123MediaMetadataRetriever mmr = new MediaMetadataRetriever();//åŽé¢è¿™ä¸ªæ˜¯ä¼ è¯·æ±‚Headersï¼Œå¦‚æžœæœ‰éœ€è¦å¯ä»¥æ·»åŠ mmr.setDataSource(url, new HashMap()); èŽ·å–æœ¬åœ°è§†é¢‘(setDataSourceä¸­ä¸éœ€è¦ä¼ ç¬¬äºŒä¸ªå‚æ•°ï¼Œç›´æŽ¥ä¼ è·¯å¾„å°±å¥½)123MediaMetadataRetriever mmr = new MediaMetadataRetriever();//åŽé¢è¿™ä¸ªæ˜¯ä¼ è¯·æ±‚Headersï¼Œå¦‚æžœæœ‰éœ€è¦å¯ä»¥æ·»åŠ mmr.setDataSource(path, new HashMap()); å°è£…çš„ä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108public class MediaUtils &#123; public static final int MEDIA_TYPE_IMAGE = 1; public static final int MEDIA_TYPE_VIDEO = 2; public static File file; /** * Create a file Uri for saving an image or video */ public static Uri getOutputMediaFileUri(Context context, int type) &#123; Uri uri = null; //é€‚é…Android N if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) &#123; return FileProvider.getUriForFile(context, context.getApplicationContext().getPackageName() + ".provider", getOutputMediaFile(type)); &#125; else &#123; return Uri.fromFile(getOutputMediaFile(type)); &#125; &#125; /** * Create a File for saving an image or video */ public static File getOutputMediaFile(int type) &#123; // To be safe, you should check that the SDCard is mounted // using Environment.getExternalStorageState() before doing this. File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory( Environment.DIRECTORY_PICTURES), "image"); // This location works best if you want the created images to be shared // between applications and persist after your app has been uninstalled. // Create the storage directory if it does not exist if (!mediaStorageDir.exists()) &#123; if (!mediaStorageDir.mkdirs()) &#123; return null; &#125; &#125; // Create a media file name String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date()); File mediaFile; if (type == MEDIA_TYPE_IMAGE) &#123; mediaFile = new File(mediaStorageDir.getPath() + File.separator + "IMG_" + timeStamp + ".jpg"); &#125; else if (type == MEDIA_TYPE_VIDEO) &#123; mediaFile = new File(mediaStorageDir.getPath() + File.separator + "VID_" + timeStamp + ".mp4"); &#125; else &#123; return null; &#125; file = mediaFile; return mediaFile; &#125; /** * èŽ·å–è§†é¢‘çš„ç¬¬ä¸€å¸§å›¾ç‰‡ */ public static void getImageForVideo(String videoPath, OnLoadVideoImageListener listener) &#123; LoadVideoImageTask task = new LoadVideoImageTask(listener); task.execute(videoPath); &#125; public static class LoadVideoImageTask extends AsyncTask&lt;String, Integer, File&gt; &#123; private OnLoadVideoImageListener listener; public LoadVideoImageTask(OnLoadVideoImageListener listener) &#123; this.listener = listener; &#125; @Override protected File doInBackground(String... params) &#123; MediaMetadataRetriever mmr = new MediaMetadataRetriever(); String path = params[0]; if (path.startsWith("http")) //èŽ·å–ç½‘ç»œè§†é¢‘ç¬¬ä¸€å¸§å›¾ç‰‡ mmr.setDataSource(path, new HashMap()); else //æœ¬åœ°è§†é¢‘ mmr.setDataSource(path); Bitmap bitmap = mmr.getFrameAtTime(); //ä¿å­˜å›¾ç‰‡ File f = getOutputMediaFile(MEDIA_TYPE_IMAGE); if (f.exists()) &#123; f.delete(); &#125; try &#123; FileOutputStream out = new FileOutputStream(f); bitmap.compress(Bitmap.CompressFormat.JPEG, 90, out); out.flush(); out.close(); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; mmr.release(); return f; &#125; @Override protected void onPostExecute(File file) &#123; super.onPostExecute(file); if (listener != null) &#123; listener.onLoadImage(file); &#125; &#125; &#125; public interface OnLoadVideoImageListener &#123; void onLoadImage(File file); &#125;&#125; å› ä¸ºè€ƒè™‘åˆ°å¤„ç†è§†é¢‘æ¯”è¾ƒè€—æ—¶ï¼Œä¸Šé¢ä»£ç ä½¿ç”¨äº†AsycTask+Callbackçš„æ–¹å¼æ¥å®žçŽ°ï¼Œå…ˆä¿å­˜åˆ°æœ¬åœ°åŽåœ¨åŠ è½½æœ¬åœ°çš„å›¾ç‰‡ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é…·ç‚«çš„Activityåˆ‡æ¢åŠ¨ç”»ï¼Œæ‰“é€ æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ]]></title>
    <url>%2Fposts%2F908dd83e.html</url>
    <content type="text"><![CDATA[æ¯«æ— ç–‘é—®ï¼ŒåŠ¨ç”»æ•ˆæžœèƒ½æé«˜ç”¨æˆ·ä½“éªŒã€‚æˆ‘ä»¬å¹³æ—¶ä½¿ç”¨æœ€å¤šçš„åŠ¨ç”»åŸºæœ¬ä¸Šæ˜¯å±žæ€§åŠ¨ç”»å’Œè¡¥é—´åŠ¨ç”»äº†ï¼Œå±žæ€§åŠ¨ç”»å¾ˆå¼ºï¼ŒåŸºæœ¬èƒ½å®šåˆ¶æˆ‘ä»¬æƒ³è¦çš„åŠ¨ç”»ï¼Œä½†æ˜¯ä½ æ˜¯å¦çŸ¥é“ï¼ŒAPI 21ï¼ˆ5.0ï¼‰åŽç³»ç»Ÿå†…ç½®äº†Activityä¹‹é—´çš„åˆ‡æ¢åŠ¨ç”»ï¼Œè€Œä¸”éžå¸¸é…·ç‚«ï¼Œä»Šå¤©æˆ‘è·Ÿå¤§å®¶ä¸€èµ·åˆ†äº«ä¸€ä¸‹ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ä¸¤ä¸ªActivityä¹‹é—´åˆ‡æ¢ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå†™å‡ºç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š 123Intent intent=new Intent(this,SecondActivity.class);startActivity(intent);overridePendingTransition(R.anim.enter_anim,R.anim.exit_anim); åœ¨API 21ä»¥åŽï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…ç½®çš„Activityåˆ‡æ¢åŠ¨ç”»å•¦ã€‚ä½†æ˜¯è¿™æ ·ä¹Ÿå°±æ„å‘³ç€åªèƒ½å…¼å®¹5.0ä¹‹åŽçš„ç³»ç»Ÿï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªæ•ˆæžœå›¾æ¥åŽ‹åŽ‹æƒŠï¼š â€‹ å…ˆçœ‹çœ‹ç¬¬ä¸€ä¸ªActivityï¼Œé€€å‡ºæ—¶ç”¨çš„æ˜¯Explodeæ•ˆæžœï¼Œç¬¬äºŒä¸ªActivityè¿›å…¥æ—¶ç”¨çš„æ˜¯Slideæ•ˆæžœã€‚è¿™äº›æ•ˆæžœæ— éœ€æˆ‘ä»¬è‡ªå·±åŽ»å®žçŽ°ï¼Œéƒ½æ˜¯å†…ç½®çš„æ•ˆæžœï¼Œæˆ‘ä»¬æ‰€ç¼–å†™çš„ä»£ç å‡ ä¹Žä¸ºé›¶ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬ä¸€ä¸€çœ‹çœ‹å†…ç½®äº†å“ªäº›æ•ˆæžœã€‚ 1 ä½¿ç”¨å†…ç½®Activityä¹‹é—´åˆ‡æ¢åŠ¨ç”»ä»£ç æ­¥éª¤Activityä¹‹é—´çš„åˆ‡æ¢æœŸé—´ï¼Œå¯¹äºŽæŸä¸ªActivityæ¥è¯´ï¼Œæ— éžå°±æ˜¯â€œè¿›å…¥â€å’Œâ€œé€€å‡ºâ€ä¸¤ç§æƒ…æ™¯ä¸‹çš„åŠ¨ç”»ã€‚è€Œâ€œè¿›å…¥â€åˆ†ä¸ºâ€œç¬¬ä¸€æ¬¡è¿›å…¥Activityâ€å’Œâ€œè¿”å›žå½“å‰Activityâ€è¿™ä¸¤ç§æƒ…å†µã€‚å¦å¤–ç³»ç»Ÿè¿˜æä¾›äº†ä¸€ç§åŠ¨ç”»ï¼Œå³å…±äº«å…ƒç´ ï¼Œè¿™æ˜¯è®©ä¸¤ä¸ªActivityä¸­çš„Viewæœ‰ä¸ªè¿‡æ¸¡åˆ‡æ¢çš„æ•ˆæžœã€‚æ‰§è¡ŒåŠ¨ç”»çš„çŠ¶æ€å¦‚ä¸‹æ‰€ç¤ºï¼š enterï¼šç”¨äºŽå†³å®šç¬¬ä¸€æ¬¡æ‰“å¼€å½“å‰Activityæ—¶çš„åŠ¨ç”» exit : ç”¨äºŽå†³å®šé€€å‡ºå½“å‰Activityæ—¶çš„åŠ¨ç”» reenter: ç”¨äºŽå†³å®šå¦‚æžœå½“å‰Activityå·²ç»æ‰“å¼€è¿‡ï¼Œå¹¶ä¸”å†æ¬¡æ‰“å¼€è¯¥Activityæ—¶çš„åŠ¨ç”» shared elements:ç”¨äºŽå†³å®šåœ¨ä¸¤ä¸ªActivityä¹‹é—´åˆ‡æ¢æ—¶ï¼ŒæŒ‡å®šä¸¤ä¸ªActivityä¸­å¯¹åº”çš„Viewçš„è¿‡æ¸¡æ•ˆæžœ é‚£ä¹ˆåº”è¯¥æ€Žä¹ˆåŽ»ä½¿ç”¨Activityåˆ‡æ¢åŠ¨ç”»å‘¢ï¼Ÿæˆ‘ä»¬çœ‹çœ‹ä½¿ç”¨æ­¥éª¤ï¼š 1.é¦–å…ˆåœ¨setContentView()ä¹‹å‰æ‰§è¡Œï¼Œç”¨äºŽå‘Šè¯‰Windowé¡µé¢åˆ‡æ¢éœ€è¦ä½¿ç”¨åŠ¨ç”» 1getWindow().requestFeature(Window.FEATURE_CONTENT_TRANSITIONS); 2.æŽ¥ä¸‹æ¥å°±æ˜¯åŠ è½½åˆ‡æ¢åŠ¨ç”» å…¶ä¸­R.transition.explodeå°±æ˜¯è¦æ‰§è¡Œçš„åŠ¨ç”»ï¼Œæ˜¯åœ¨res/transitionç›®å½•ä¸‹çš„xmlæ–‡ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿå†…ç½®çš„Explodeæ•ˆæžœåŠ¨ç”»ï¼Œå…³äºŽæ€Žä¹ˆåŽ»å†™explode.xmlï¼Œæˆ‘ä»¬æŽ¥ä¸‹æ¥å°èŠ‚åŽ»è®²è§£ã€‚ 1Transition explode = TransitionInflater.from(this).inflateTransition(R.transition.explode); 3.å‘Šè¯‰Windowï¼Œå½“å‰çš„Activityåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ä¸Šé¢çš„åŠ¨ç”» ä¸Šé¢æˆ‘ä»¬åˆ›å»ºå¥½äº†åˆ‡æ¢åŠ¨ç”»ï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯è¦å‘Šè¯‰å½“å‰çª—å£ï¼Œåœ¨ä»€ä¹ˆæƒ…å†µä¸‹åŽ»ä½¿ç”¨åŠ¨ç”»æ•ˆæžœå•¦ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚åœ¨ä¸åŒçš„åˆ‡æ¢æƒ…æ™¯ä¸­é€‰æ‹©ä¸åŒçš„æ•ˆæžœï¼š 123456//é€€å‡ºæ—¶ä½¿ç”¨getWindow().setExitTransition(explode);//ç¬¬ä¸€æ¬¡è¿›å…¥æ—¶ä½¿ç”¨getWindow().setEnterTransition(explode);//å†æ¬¡è¿›å…¥æ—¶ä½¿ç”¨getWindow().setReenterTransition(explode); å½“ç„¶äº†ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ä»£ç çš„æ–¹å¼ï¼Œç›´æŽ¥åœ¨ä½ ä½¿ç”¨çš„ä¸»é¢˜&lt;style&gt;æ ‡ç­¾é‡Œæ·»åŠ ç±»ä¼¼å¦‚ä¸‹ä»£ç ï¼š 123&lt;item name="android:windowExitTransition"&gt;@transition/explode&lt;/item&gt;&lt;item name="android:windowEnterAnimation"&gt;@transition/explode&lt;/item&gt;&lt;item name="android:windowReenterTransition"&gt;@transition/explode&lt;/item&gt; 4.è°ƒç”¨startActivity è·Ÿæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„startActivity(Intent intent);ä¸åŒï¼Œè¿™é‡Œå¤šäº†ä¸€ä¸ªå‚æ•°Bundleï¼Œæˆ‘ä»¬æ˜¯å…ˆé€šè¿‡makeSceneTransitionAnimationå‡½æ•°åˆ›å»ºä¸€ä¸ªActivityOptionså¯¹è±¡ï¼Œå†å°†å…¶è½¬ä¸ºBundleå¯¹è±¡: 1startActivity(intent,ActivityOptions.makeSceneTransitionAnimation(this).toBundle()); æ•´ä½“ä½¿ç”¨æ­¥éª¤å°±æ˜¯ä»¥ä¸Šè¿™äº›ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼ŸæŽ¥ä¸‹æ¥æˆ‘ä»¬åŽ»å­¦ä¹ å¦‚ä½•ä½¿ç”¨å†…ç½®åŠ¨ç”»~ 2 Explodeæ•ˆæžœExplodeå³çˆ†ç‚¸æ•ˆæžœï¼Œä½¿ç”¨Explodeæ•ˆæžœå¾ˆç®€å•ï¼Œåœ¨res/transitionç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªxmlæ–‡ä»¶(å¦‚explode.xml)ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12&lt;explode xmlns:android="http://schemas.android.com/apk/res/android" android:duration="300" /&gt; å…¶ä¸­durationè¡¨ç¤ºExplodeåŠ¨ç”»æŒç»­æ—¶é—´ï¼Œç”±äºŽæ˜¯Activityä¹‹é—´çš„åˆ‡æ¢ï¼Œæœ€å¥½ä¸è¦æŠŠåŠ¨ç”»æ—¶é—´è®¾ç½®è¿‡å¤§ï¼Œä¸€èˆ¬å–200500æ¯«ç§’æ¯”è¾ƒåˆé€‚ã€‚æˆ‘ä»¬çœ‹çœ‹æ•ˆæžœå§ 3 Slideæ•ˆæžœå³æ»‘åŠ¨æ•ˆæžœï¼Œä½¿ç”¨Slideè·ŸExplodeç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨res/transitionç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªxmlæ–‡ä»¶(å¦‚slide.xml)ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 123&lt;slide xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:interpolator=&quot;@android:interpolator/decelerate_cubic&quot; android:slideEdge=&quot;end&quot;/&gt; å…¶ä¸­ï¼ŒslideEdgeè¡¨ç¤ºèµ·å§‹æ»‘åŠ¨çš„ä¾§è¾¹ä½ç½®ï¼Œendè¡¨ç¤ºå³ä¾§ï¼Œstartè¡¨ç¤ºå·¦ä¾§ï¼Œtopè¡¨ç¤ºé¡¶éƒ¨ï¼Œbottomè¡¨ç¤ºåº•ä¾§ï¼Œå„ç§æ•ˆæžœä½ å¯ä»¥äº²è‡ªè¯•è¯•~ï¼Œä¸€èµ·çœ‹çœ‹æ»‘åŠ¨æ•ˆæžœå§ GIF æ•ˆæžœçœ‹çš„æ¯”è¾ƒæ­»æ¿ï¼Œå¯ä»¥ä¸‹è½½æˆ‘çš„æºç å®žé™…è¿è¡Œä¸€ä¸‹~ å¦‚æžœä½ ä¸å¸Œæœ›é¡¶éƒ¨çš„çŠ¶æ€æ ä»¥åŠåº•éƒ¨çš„å¯¼èˆªæ ä¸€èµ·æ‰§è¡ŒåŠ¨ç”»ï¼Œå¯ä»¥åœ¨xmlä¸­æŒ‡å®šï¼š 12345678&lt;slide xmlns:android="http://schemas.android.com/apk/res/android" android:interpolator="@android:interpolator/decelerate_cubic" android:slideEdge="end"&gt; &lt;targets&gt; &lt;target android:excludeId="@android:id/navigationBarBackground" /&gt; &lt;target android:excludeId="@android:id/statusBarBackground" /&gt; &lt;/targets&gt;&lt;/slide&gt; 4 Fadeæ•ˆæžœFadeæ•ˆæžœå³æ·¡åŒ–æ•ˆæžœï¼Œä½¿ç”¨æ·¡åŒ–æ•ˆæžœä¾ç„¶æ˜¯å¾ˆç®€å•ï¼Œåœ¨res/transitionç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªxmlæ–‡ä»¶(å¦‚fade.xml)ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 12&lt;fade xmlns:android="http://schemas.android.com/apk/res/android" android:duration="300" /&gt; Fadeæ•ˆæžœå°±æ˜¯å°†Viewé€æ­¥æ·¡åŒ–ï¼Œè¿™é‡Œä¸å†è´´æ•ˆæžœå•¦ï¼Œæƒ³çœ‹æ•ˆæžœçš„å¯ä»¥ä¸‹è½½æˆ‘çš„æºç è¿è¡Œçœ‹çœ‹~ 5 Shared Elementæ•ˆæžœå³å…±äº«å…ƒç´ æ•ˆæžœï¼Œä¸Žå‰é¢å‡ ç§æ•ˆæžœä¸åŒçš„æ˜¯ï¼Œå…±äº«å…ƒç´ æ•ˆæžœæ˜¯å°†å‰é¢ä¸€ä¸ªActivityçš„æŸä¸ªå­Viewä¸ŽåŽé¢ä¸€ä¸ªActivityçš„æŸä¸ªå­Viewä¹‹é—´æœ‰è¿‡æ¸¡æ•ˆæžœï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹åŠ¨æ€å›¾æ„Ÿå—ä¸€ä¸‹ï¼š ä»ŽåŠ¨æ€å›¾ä¸­çœ‹åˆ°ï¼Œç¬¬ä¸€ä¸ªActivityçš„å°ç»¿è‰²æ–¹å—åˆ°ç¬¬äºŒä¸ªActivityå¤§ç»¿è‰²æ–¹å—æœ‰ä¸ªè¿‡æ¸¡æ•ˆæžœ~ æŽ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å®žçŽ°è¿™ä¸ªæ•ˆæžœï¼š 1.å°†ä¸¤ä¸ªActivityä¸­éœ€è¦è¿‡æ¸¡çš„ViewåŠ ä¸Šandroid:transitionNameå±žæ€§ ä¸¤ä¸ªViewçš„android:transitionNameå±žæ€§å–å€¼è¦ä¸€è‡´ï¼Œæ¯”å¦‚ï¼š ç¬¬ä¸€ä¸ªActivityå¸ƒå±€ï¼š 12345678910111213&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent"&gt; &lt;View android:id="@+id/firstSharedView" android:layout_width="100dp" android:layout_height="100dp" android:background="#00cc00" android:onClick="onClick" android:transitionName="sharedView" /&gt;&lt;/RelativeLayout&gt; ç¬¬äºŒä¸ªActivityå¸ƒå±€ï¼š 1234567891011121314&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent"&gt; &lt;View android:layout_width="match_parent" android:layout_height="300dp" android:layout_alignParentBottom="true" android:background="#00cc00" android:onClick="onClick" android:transitionName="sharedView" /&gt;&lt;/RelativeLayout&gt; ä¸¤ä¸ªç»¿è‰²çš„Viewéƒ½æ·»åŠ android:transitionNameå±žæ€§ï¼Œå¹¶ä¸”å–åä¸€è‡´ã€‚ 2.è°ƒç”¨startActivity ActivityOptionsçš„makeSceneTransitionAnimationå‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°Activityæ²¡å•¥è§£é‡Šçš„ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ç¬¬ä¸€ä¸ªActivityä¸­çš„Viewå¯¹è±¡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯ä¸¤ä¸ªActivityçš„Viewçš„ android:transitionNameå±žæ€§çš„å€¼ã€‚ 1startActivity(intent, ActivityOptions.makeSceneTransitionAnimation(this, firstSharedView, "sharedView").toBundle()); çŽ°åœ¨å°±å¯ä»¥å®žçŽ°è¿™ç§Shared Elementæ•ˆæžœå•¦ï¼Œä½†æ˜¯å¯èƒ½ä½ ä¼šæƒ³å®žçŽ°åŒæ—¶è®©ä¸¤ä¸ªViewæœ‰è¿™æ ·çš„æ•ˆæžœï¼Œå¯æ˜¯makeSceneTransitionAnimationå‡½æ•°å´åªèƒ½è®©æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªViewå’Œä¸€ä¸ªtransitionNameå±žæ€§ã€‚å¦‚ä½•æ·»åŠ å¤šä¸ªå‘¢ï¼ŸæŽ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·å­¦ä¹ è®©å¤šä¸ªViewåŒæ—¶æœ‰åˆ‡æ¢æ•ˆæžœã€‚ é™¤äº†éœ€è¦å°†ä¸¤ä¸ªActivityä¸­éœ€è¦è¿‡æ¸¡çš„Viewå¯¹åº”å–ç›¸åŒçš„åç§°å¤–ï¼Œè¿˜éœ€å°†éœ€è¦è¿‡æ¸¡çš„Viewå’ŒtransitionNameå–å€¼å¯¹åº”çš„Stringè¿™ä¸¤ä¸ªå¯¹è±¡å°è£…åˆ°ä¸€ä¸ªPairå¯¹è±¡ä¸­ï¼š 123Pair first = new Pair&lt;&gt;(firstSharedView, ViewCompat.getTransitionName(firstSharedView));Pair second = new Pair&lt;&gt;(secondSharedView, ViewCompat.getTransitionName(secondSharedView)); ç„¶åŽè°ƒç”¨ActivityOptionsCompatç±»çš„makeSceneTransitionAnimationçš„å¦ä¸€ä¸ªé‡è½½å‡½æ•°makeSceneTransitionAnimation(Activity activity, Pair&lt;View, String&gt;... sharedElements)ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸è§£é‡Šï¼ŒåŽé¢å‚æ•°ä¸ºä¸å®šé•¿åº¦çš„å½¢å‚ï¼Œå³ä½ å¯ä»¥ä¼ é€’ä»»æ„å¤šä¸ªPairå¯¹è±¡ã€‚ 12ActivityOptionsCompat transitionActivityOptions = ActivityOptionsCompat.makeSceneTransitionAnimation(this, first, second); æœ€åŽè°ƒç”¨startActivity 12ActivityCompat.startActivity(this, intent, transitionActivityOptions.toBundle()); è¯´äº†è¿™ä¹ˆå¤šæ­¥éª¤ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæžœå§~ å¤šä¸ªå­Viewçš„è¿‡æ¸¡æ•ˆæžœ 5.1 è‡ªå®šä¹‰ Shared Elementåˆ‡æ¢åŠ¨ç”»å¦‚æžœä½ å¯¹å†…ç½®çš„ Shared Elementè¿˜ä¸å¤Ÿæ»¡æ„ï¼Œä½ è¿˜å¯ä»¥å®šåˆ¶Viewçš„è¿‡æ¸¡åˆ‡æ¢æ•ˆæžœã€‚æ­¥éª¤å¦‚ä¸‹ï¼š 1.åˆ›å»ºä¸€ä¸ªViewçš„è¿‡æ¸¡ç§»åŠ¨çš„è½¨è¿¹è·¯å¾„PathMotionç±» æˆ‘ä»¬å¯ä»¥åˆ›å»ºArcMotionå¯¹è±¡ï¼ŒArcMotionæ˜¯PathMotionå­ç±»ï¼Œæ˜¯ä¸ªæ›²çº¿è·¯å¾„ã€‚æƒ³è¦äº†è§£æ›´å¤šArcMotionå¯ä»¥æŸ¥çœ‹ã€ArcMotionå®˜æ–¹æ–‡æ¡£ã€‘ 123ArcMotion arcMotion = new ArcMotion();arcMotion.setMinimumHorizontalAngle(50f);arcMotion.setMinimumVerticalAngle(50f); 2.å®šä¹‰ChangeBoundsç±» æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªç»§æ‰¿ChangeBoundsçš„ç±»ï¼Œä¸»è¦é‡å†™createAnimatorå‡½æ•°ï¼Œå³åˆ›å»ºä½ è¦æ‰§è¡Œçš„åŠ¨ç”»ã€‚è¿™ä¸ªå‡½æ•°ç”±3ä¸ªå‚æ•°ï¼š 1.ViewGroup sceneRootï¼šå±å¹•æ ¹Viewï¼Œå³DecorViewï¼Œç¬¬äºŒä¸ªActivityçš„DecorViewã€‚ TransitionValues startValues ï¼šå±žæ€§åŠ¨ç”»çš„èµ·å§‹å±žæ€§å€¼ï¼ŒTransitionValues å¯¹è±¡å†…éƒ¨æœ‰å„Mapç±»åž‹çš„å±žæ€§valuesï¼Œç”¨äºŽä¿å­˜éœ€è¦æ‰§è¡Œå±žæ€§åŠ¨ç”»çš„å±žæ€§ã€‚è¿™ä¸ªé‡Œé¢çš„å±žæ€§å€¼æ˜¯åœ¨å‡½æ•°captureStartValuesé‡Œæ”¾ç½®ï¼Œå› æ­¤ä½ å¯ä»¥é‡å†™captureStartValueså‡½æ•°ï¼Œå¹¶æŠŠä½ è‡ªå®šä¹‰çš„å±žæ€§åŠ¨ç”»ä¸­çš„å±žæ€§æ”¾è¿›åŽ»ã€‚ TransitionValues endValues ï¼šä¸ŽstartValuesç±»ä¼¼ï¼Œè¡¨ç¤ºå±žæ€§åŠ¨ç”»ç»“æŸæ—¶çš„å±žæ€§å€¼ã€‚å¯ä»¥é€šè¿‡é‡å†™captureEndValueså‡½æ•°ï¼Œå¹¶æŠŠä½ è‡ªå®šä¹‰çš„å±žæ€§åŠ¨ç”»é‡Œé¢çš„æœ€ç»ˆå±žæ€§å€¼æ”¾è¿›åŽ»ã€‚ æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªæœ€ç®€å•çš„ç¤ºä¾‹ï¼š 1234567891011121314151617181920212223242526package com.zm.util;import android.animation.Animator;import android.transition.ChangeBounds;import android.transition.TransitionValues;import android.view.ViewGroup;import android.view.animation.AnimationUtils;public class CustomChangeBounds extends ChangeBounds &#123; @Override public Animator createAnimator(final ViewGroup sceneRoot, TransitionValues startValues, final TransitionValues endValues) &#123; Animator changeBounds = super.createAnimator(sceneRoot, startValues, endValues); if (startValues == null || endValues == null || changeBounds == null) return null; changeBounds.setDuration(300); changeBounds.setInterpolator(AnimationUtils.loadInterpolator(sceneRoot.getContext(), android.R.interpolator.fast_out_slow_in)); return changeBounds; &#125;&#125; çœ‹çœ‹æ•ˆæžœå§~ å‚è€ƒèµ„æ–™ï¼šhttps://labs.ribot.co.uk/exploring-meaningful-motion-on-android-1cd95a4bc61d#.cf6pub9xu https://github.com/hitherejoe/animate]]></content>
      <categories>
        <category>Android</category>
        <category>Animation</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Animation</tag>
        <tag>View</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Activityåˆ‡æ¢åŠ¨ç”»å¸¸ç”¨å®žçŽ°æ–¹å¼]]></title>
    <url>%2Fposts%2Fa8391ded.html</url>
    <content type="text"><![CDATA[ä¸€. overridePendingTransition()ï¼šæ­¤æ–¹å¼åªéœ€è¦åœ¨å¯åŠ¨å¦ä¸€ä¸ªactivityå’Œé€€å‡ºactivityçš„æ—¶å€™è°ƒç”¨å°±è¡Œï¼Œè¿™ä¸ªæ–¹æ³•æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æ–°å¯åŠ¨çš„activityè¿›å…¥æ—¶çš„åŠ¨ç”»ï¼Œå¦ä¸€ä¸ªæ˜¯å½“å‰activityæ¶ˆå¤±æ—¶çš„åŠ¨ç”»ã€‚ å¯åŠ¨ï¼š 12startActivity(newIntent(MainActivity.this,TestActivityWithTheme.class));overridePendingTransition(R.anim.open_in, R.anim.open_out); é€€å‡ºï¼š 12345@Override public void finish() &#123; super.finish(); overridePendingTransition(R.anim.close_in, R.anim.close_out); &#125; äºŒ. ActivityOptionsCompatï¼šè¿™ä¸ªç±»æ˜¯supportv4ä¸­æ–°åŠ çš„ä¸€ä¸ªç±»ï¼Œå¯ä»¥ä¸ºactivityæ·»åŠ å„ç§åŠ¨ç”»æ•ˆæžœï¼Œè¿™é‡Œé¢çš„apiè‡³å°‘è¦æ±‚4.0ä»¥ä¸Šçš„ç³»ç»Ÿï¼Œéƒ¨åˆ†è¦æ±‚5.0ä»¥ä¸Šï¼Œè°·æ­Œä¸ºæˆ‘ä»¬å°è£…å¥½äº†çš„ä¸€äº›æ‹‰ä¼¸æ‰©æ•£åŠ¨ç”»ï¼Œå…±äº«å…ƒç´ åŠ¨ç”»ç­‰ç­‰ï¼Œä¸‹é¢åªä»‹ç»ä¸€ç§ç®€å•æ•ˆæžœçš„å®žçŽ°æ–¹å¼ï¼Œ å¯åŠ¨ï¼š 12ActivityOptionsCompat compat = ActivityOptionsCompat.makeCustomAnimation(MainActivity.this, R.anim.open_in, R.anim.open_out);ActivityCompat.startActivity(MainActivity.this,intent, compat.toBundle()); é€€å‡ºï¼š 12345Overridepublic void onBackPressed() &#123; super.onBackPressed(); ActivityCompat.finishAfterTransition(this);&#125; æ³¨æ„ï¼šè¯¥é€€å‡ºæ–¹æ³•ä¸èƒ½è¾¾åˆ°é¢„æœŸçš„åŠ¨ç”»æ•ˆæžœï¼Œè¿˜éœ€è¦ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼å®žçŽ°é€€å‡ºoverridePendingTransition(R.anim.close_in, R.anim.close_out); ä¸‰.AppTheme: ç›´æŽ¥åœ¨ä¸»é¢˜ä¸­ä¿®æ”¹activityåŠ¨ç”»æ ·å¼ï¼šæˆ‘ä»¬å¯ä»¥åœ¨ AndroidManifest.xml æ–‡ä»¶ä¸­ï¼Œé€šè¿‡Android:theme å±žæ€§è®¾ç½® Activity çš„ä¸»é¢˜ã€‚ä¸»é¢˜ä¸­å¯ä»¥å®šä¹‰ Activity çš„åˆ‡æ¢åŠ¨ç”»ã€‚è¿™æ˜¯åº”ç”¨ Activity åˆ‡æ¢åŠ¨ç”»çš„ä¸€ç§æ–¹æ³•ã€‚ä¸‹é¢æ˜¯é€šè¿‡ä¸»é¢˜æ¥è®¾ç½® Activity é—´çš„åˆ‡æ¢åŠ¨ç”»çš„å®žçŽ°æ–¹å¼ã€‚ 3.1ã€å®šä¹‰åŒ…å«åŠ¨ç”»çš„ Activity ä¸»é¢˜res/values/styles.xml 123&lt;style name="AnimActivityTheme" parent="@android:style/Animation.Activity"&gt; &lt;item name="android:windowAnimationStyle"&gt;@style/MyWindowAnimTheme&lt;/item&gt;&lt;/style&gt; å°±æ˜¯ä½¿ç”¨ windowAnimationStyle è¿™ä¸ªå±žæ€§ï¼ŒæŒ‡å®šåˆ‡æ¢åŠ¨ç”»çš„styleå³å¯ã€‚ 3.2ã€å®šä¹‰åˆ‡æ¢åŠ¨ç”» styleres/values/styles.xml 123456&lt;style name="MyWindowAnimTheme"&gt; &lt;item name="android:activityOpenEnterAnimation"&gt;@anim/top_to_bottom_in&lt;/item&gt; &lt;item name="android:activityOpenExitAnimation"&gt;@anim/top_to_bottom_out&lt;/item&gt; &lt;item name="android:activityCloseEnterAnimation"&gt;@anim/bottom_to_top_in&lt;/item&gt; &lt;item name="android:activityCloseExitAnimation"&gt;@anim/bottom_to_top_out&lt;/item&gt;&lt;/style&gt; ä¸‹é¢å…·ä½“ä»‹ç»è¿™4ä¸ªå±žæ€§çš„æ„æ€ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ 2 ä¸ª Activityï¼Œåˆ†åˆ«æ˜¯ A å’Œ Bï¼š A å¯åŠ¨ B æ—¶ï¼ŒA ä»Žå±å¹•ä¸Šæ¶ˆå¤±ï¼Œè¿™æ—¶æ‰§è¡Œçš„æ˜¯Açš„ android:activityOpenExitAnimation A å¯åŠ¨ B æ—¶ï¼ŒB å‡ºçŽ°åœ¨å±å¹•ä¸Šï¼Œè¿™æ—¶æ‰§è¡Œçš„æ˜¯Bçš„ android:activityOpenEnterAnimation ä»Ž B è¿”å›žAæ—¶ï¼ŒBä»Žå±å¹•ä¸Šæ¶ˆå¤±ï¼Œè¿™æ—¶æ‰§è¡Œçš„æ˜¯Bçš„ android:activityCloseExitAnimation ä»Ž B è¿”å›žAæ—¶ï¼ŒA å‡ºçŽ°åœ¨å±å¹•ä¸Šï¼Œè¿™æ—¶æ‰§è¡Œçš„æ˜¯Açš„ android:activityCloseEnterAnimation 3.3ã€å®šä¹‰å…·ä½“åŠ¨ç”»æ–‡ä»¶ res/anmi/res/top_to_bottom_in.xml res/anmi/res/top_to_bottom_out.xml res/anmi/res/bottom_to_top_in.xml res/anmi/res/bottom_to_top_out.xml è¿™é‡Œä¸å†ä»‹ç»åŠ¨ç”»æ–‡ä»¶çš„å®žçŽ°ã€‚ 3.4ã€åº”ç”¨åˆ°å¯¹åº” ActivityAndroidMenifest.xml 12&lt;activity android:name=".MainActivity" android:theme="@style/AnimActivityThemeâ€&gt; 3.5ã€å¦å¤–åœ¨ä½¿ç”¨AppThemeè®¾ç½®åŠ¨ç”»æ—¶å‘çŽ°äº†ä¸¤ä¸ªé—®é¢˜ï¼Œ3.5.1ã€æ·»åŠ åŠ¨ç”»åŽï¼Œå‡ºçŽ°ä»Žé»‘å±åˆ°æ–°activityçš„è¿‡åº¦ã€‚åŽŸå› ï¼šæ²¡æœ‰è®¾ç½®ç›¸åº”çš„æ¶ˆå¤±åŠ¨ç”»ã€‚ è§£å†³æ–¹æ³•ï¼šè®¾ç½®ç›¸åº”çš„æ¶ˆå¤±åŠ¨ç”»ï¼Œå¦‚æžœä¸æƒ³è®¾ç½®æ¶ˆå¤±åŠ¨ç”»ï¼Œå¯ä»¥ä½¿ç”¨å†™ä¸€ä¸ªå‡åŠ¨ç”»ï¼Œè¿™ä¸ªåŠ¨ç”»æ˜¯æ²¡æœ‰ä»»ä½•æ•ˆæžœï¼Œåªæ˜¯ä¸ºäº†é¿å…å‡ºçŽ°é»‘å±ï¼Œè¿è¡Œæ•ˆæžœä¸ºåŽŸacticityé™æ­¢ä¸åŠ¨ï¼Œæ–°å¯åŠ¨çš„activityæ‰§è¡Œè¿›å…¥åŠ¨ç”»ã€‚ 3.5.2ã€æ²¡æœ‰åŠ¨ç”»ï¼Œæˆ–åŠ¨ç”»ä¸Žè®¾ç½®ä¸ä¸€è‡´åŽŸå› ï¼šå½“é¡µé¢åˆ‡æ¢æ—¶éœ€è¦è¿›å…¥å’Œæ¶ˆå¤±ä¸¤ä¸ªåŠ¨ç”»ï¼Œå½“æ²¡æœ‰è¿›å…¥åŠ¨ç”»æ—¶ï¼Œæ¶ˆå¤±åŠ¨ç”»ä¹Ÿä¸ä¼šæ‰§è¡Œï¼Œä¼šæ‰§è¡Œç³»ç»ŸåŠ¨ç”»ï¼Œå¦‚æžœæ²¡æœ‰ç³»ç»ŸåŠ¨ç”»åˆ™æ²¡æœ‰åŠ¨ç”»ï¼Œæˆ–è€…æŸä¸ªé¡µé¢ä½¿ç”¨ç¬¬ä¸€æˆ–ç¬¬äºŒç§æ–¹å¼è®¾ç½®äº†åŠ¨ç”»ï¼ˆåŠ¨ç”»æ‰§è¡Œä¼˜å…ˆçº§ï¼Œç³»ç»ŸåŠ¨ç”» &lt; AppTheme &lt; (overridePendingTransition\ActivityOptionsCompat)ï¼‰ã€‚ è§£å†³æ–¹æ³•ï¼šä¸ºäº†ä¿è¯è¿›å…¥å’Œæ¶ˆå¤±éƒ½æœ‰åŠ¨ç”»ï¼Œè¦å°†åŠ¨ç”»ä¸»é¢˜è®¾ç½®åˆ°ä¸¤ä¸ªActivityä¸Šã€‚ä¹Ÿå¯ä»¥å°†ä¸»é¢˜è®¾ç½®åˆ°applicationä¸Šï¼Œè¿™æ ·æ•´ä¸ªåº”ç”¨éƒ½æ˜¯ç”¨è¯¥åˆ‡æ¢åŠ¨ç”»ã€‚å¦‚æžœæ˜¯æŸä¸ªé¡µé¢ä½¿ç”¨ç¬¬ä¸€æˆ–ç¬¬äºŒç§æ–¹å¼è®¾ç½®äº†åŠ¨ç”»ï¼Œé‚£ä¹ˆåœ¨å¯åŠ¨å’Œé€€å‡ºæ—¶æœ€å¥½éƒ½è¦è®¾ç½®ï¼Œä¸ç„¶ä¼šé€ æˆå¯åŠ¨å’Œé€€å‡ºä¸ä¸€è‡´çš„æƒ…å†µã€‚ æ€»ç»“ï¼šç¬¬ä¸€ç§æ–¹å¼ï¼šçµæ´»å¯ä»¥éšæ„æŽ§è¿›å…¥æ¶ˆå¤±åŠ¨ç”»ï¼Œä½†æ˜¯å®žçŽ°ä¸æ–¹ä¾¿ã€‚ç¬¬äºŒç§æ–¹å¼ï¼šä¸Žç¬¬ä¸€ç§æ–¹å¼ç±»ä¼¼ï¼Œä½†æ˜¯è¯¥ç§æ–¹å¼ä¸ºæˆ‘ä»¬æä¾›äº†å¤šç§ç‰¹æ®ŠåŠ¨ç”»ã€‚ç¬¬ä¸‰ç§æ–¹å¼ï¼šä½¿ç”¨æ–¹ä¾¿ï¼Œåªéœ€è¦é…ç½®ä¸»é¢˜ï¼Œä¸éœ€è¦æ·»åŠ è¿‡å¤šä»£ç ï¼Œä½†æ˜¯ä¸å¤Ÿçµæ´» å»ºè®®ï¼šå®šä¹‰ä¸€ç§åŠ¨ç”»ä¸»é¢˜ï¼Œå¹¶è®¾ç½®åˆ°applicationä¸Šï¼Œå°†æ•´ä¸ªåº”ç”¨çš„åˆ‡æ¢åŠ¨ç”»ç»Ÿä¸€ï¼Œå¦‚æžœæŸä¸ªé¡µé¢æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œå†æ ¹æ®ä¸ç”¨éœ€æ±‚ä½¿ç”¨ç¬¬ä¸€æˆ–ç¬¬äºŒç§ç±»åž‹å•ç‹¬å¤„ç†ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Animation</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Animation</tag>
        <tag>View</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidæ¨ªç«–å±åˆ‡æ¢]]></title>
    <url>%2Fposts%2Fa6a76007.html</url>
    <content type="text"><![CDATA[Androidå¼€å‘ä¸­ï¼Œå¤§å¤šAPPå¯èƒ½æ ¹æ®å®žé™…æƒ…å†µç›´æŽ¥å°†APPçš„ç•Œé¢æ–¹å‘è®¾æ­»äº†ï¼Œæˆ–ç«–å±æˆ–æ¨ªå±ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¼šé‡åˆ°æ¨ªç«–å±åˆ‡æ¢çš„åŠŸèƒ½éœ€æ±‚ï¼Œä¸ç®¡æ˜¯é€šè¿‡ç‰©ç†é‡åŠ›æ„Ÿåº”è§¦å‘ï¼Œè¿˜æ˜¯ç”¨æˆ·æ‰‹åŠ¨è§¦å‘ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æœ‰å¿…è¦åŽ»å¼„æ¸…æ¥šAndroidä¸­æ¨ªç«–å±åˆ‡æ¢åˆ°åº•åšäº†ä»€ä¹ˆã€‚ Follow me â€¦â€¦ ä¸€ã€android:screenOrientation &amp; android:configChanges android:screenOrientationæ˜¯ç”¨æ¥è®¾ç½® activityåœ¨è®¾å¤‡ä¸Šçš„æ˜¾ç¤ºæ–¹å‘çš„ï¼Œåªèƒ½æ˜¯ä¸‹é¢çš„å”¯ä¸€å€¼ï¼š å€¼ æè¿° unspecified é»˜è®¤å€¼ã€‚ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©å±å¹•æ–¹å‘ behind è·Ÿactivityå †æ ˆä¸­çš„ä¸‹é¢ä¸€ä¸ªactivityçš„æ–¹å‘ä¸€è‡´ landscape æ¨ªå±æ–¹å‘ï¼Œæ˜¾ç¤ºçš„å®½æ¯”é«˜é•¿ portrait ç«–å±æ–¹å‘ï¼Œæ˜¾ç¤ºçš„é«˜æ¯”å®½é•¿ sensor ç”±è®¾å¤‡çš„ç‰©ç†æ–¹å‘ä¼ æ„Ÿå™¨å†³å®šï¼Œå¦‚æžœç”¨æˆ·æ—‹è½¬è®¾å¤‡ï¼Œè¿™å±å¹•å°±ä¼šæ¨ªç«–å±åˆ‡æ¢ nosensor å¿½ç•¥ç‰©ç†æ–¹å‘ä¼ æ„Ÿå™¨ï¼Œè¿™æ ·å°±ä¸ä¼šéšç€ç”¨æˆ·æ—‹è½¬è®¾å¤‡è€Œæ¨ªç«–å±åˆ‡æ¢äº†ï¼ˆâ€unspecifiedâ€è®¾ç½®é™¤å¤–ï¼‰ user ç”¨æˆ·å½“å‰é¦–é€‰çš„æ–¹å‘ reverseLandscape API 9 ä»¥ä¸Šï¼Œåå‘æ¨ªå± reversePortrait API 9 ä»¥ä¸Šï¼Œåå‘ç«–å± sensorLandscape API 9 ä»¥ä¸Šï¼Œæ¨ªå±ï¼Œä½†æ˜¯å¯ä»¥æ ¹æ® ç‰©ç†æ–¹å‘ä¼ æ„Ÿå™¨æ¥åˆ‡æ¢æ­£åå‘æ¨ªå± sensorPortrait API 9 ä»¥ä¸Šï¼Œç«–å±ï¼Œä½†æ˜¯å¯ä»¥æ ¹æ® ç‰©ç†æ–¹å‘ä¼ æ„Ÿå™¨æ¥åˆ‡æ¢æ­£åå‘ç«–å± fullSensor API 9 ä»¥ä¸Šï¼Œä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ï¼Œç”±ç‰©ç†æ–¹å‘ä¼ æ„Ÿå™¨å†³å®š locked API 18 ä»¥ä¸Šï¼Œé”æ­»å½“å‰å±å¹•çš„æ–¹å‘ å¦‚æžœä½ ä¸Šä¼ åº”ç”¨åˆ° Google Playï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹æç¤ºï¼š Note: When you declare one of the landscape or portrait values, it is considered a hard requirement for the orientation in which the activity runs. As such, the value you declare enables filtering by services such as Google Play so your application is available only to devices that support the orientation required by your activities. For example, if you declare eitherâ€landscapeâ€, â€œreverseLandscapeâ€, or â€œsensorLandscapeâ€, then your application will be available only to devices that support landscape orientation. However, you should also explicitly declare that your application requires either portrait or landscape orientation with the element. For example, . This is purely a filtering behavior provided by Google Play (and other services that support it) and the platform itself does not control whether your app can be installed when a device supports only certain orientations. android:configChangesç”¨æ¥è®¾ç½® activityé…ç½®æ”¹å˜ï¼ˆä¸ä»…ä»…æ˜¯å±å¹•æ–¹å‘ï¼Œè¿˜æœ‰è¯­è¨€ã€åœ°åŒºç­‰ç­‰ï¼‰çš„é›†åˆã€‚å½“ä¸€ä¸ªé…ç½®æ”¹å˜åœ¨è¿è¡Œä¸­å‘ç”Ÿæ—¶ï¼Œactivityé»˜è®¤æƒ…å†µä¸‹ä¼šå…ˆé”€æ¯ç„¶åŽé‡æ–°åˆ›å»ºã€‚ä½†æ˜¯ï¼Œå¦‚æžœé€šè¿‡è¿™ä¸ªå±žæ€§å£°æ˜Žäº†æŸä¸ªé…ç½®åŽï¼Œå°†å¯ä»¥é¿å…ä¸Šé¢çš„æƒ…å†µï¼Œè€Œæ˜¯ä¾ç„¶è¿è¡Œï¼Œå¹¶å›žè°ƒ onConfigurationChanged() æ–¹æ³•ã€‚è¯¥å±žæ€§å¯ä»¥è®¾ç½®å¤šä¸ªå€¼ï¼š å€¼ æè¿° mcc IMSIç§»åŠ¨å°çš„å›½å®¶ä»£ç ï¼ˆMCCï¼‰å‘ç”Ÿå˜åŒ–â€”â€”ä¸€ä¸ªSIMè¢«æŽ¢æµ‹åˆ°å¹¶ä¸”æ›´æ–°MCC mnc IMSIç§»åŠ¨å°çš„ç½‘ç»œä»£ç ï¼ˆMNCï¼‰å‘ç”Ÿå˜åŒ–â€”â€”ä¸€ä¸ªSIMè¢«æŽ¢æµ‹åˆ°å¹¶ä¸”æ›´æ–°MNC locale åŒºåŸŸå‘ç”Ÿå˜åŒ–â€”â€”ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªæ–‡æœ¬éœ€è¦æ˜¾ç¤ºçš„æ–°è¯­è¨€ keyboard é”®ç›˜ç±»åž‹å‘ç”Ÿå˜åŒ–â€”â€”ä¾‹å¦‚ï¼šç”¨æˆ·æ’å…¥äº†å¤–æŽ¥é”®ç›˜ã€‚ keyboardHidden é”®ç›˜çš„å¯è®¿é—®æ€§å‘ç”Ÿå˜åŒ–â€”â€”ä¾‹å¦‚ï¼šç”¨æˆ·å‘çŽ°äº†ç¡¬ä»¶é”®ç›˜ã€‚ screenLayout å±å¹•å¸ƒå±€å‘ç”Ÿå˜åŒ–â€”â€”è¿™ä¸ªä¼šå¯¼è‡´æ˜¾ç¤ºä¸åŒçš„Activityã€‚ orientation å±å¹•æ–¹å‘å‘ç”Ÿå˜åŒ–â€”â€”ç”¨æˆ·æ—‹è½¬äº†å±å¹•ã€‚æ³¨æ„ï¼šå¦‚æžœåº”ç”¨ç¨‹åºçš„ç›®æ ‡APIçº§åˆ«æ˜¯13æˆ–æ›´é«˜ï¼ˆé€šè¿‡å±žæ€§minSdkVersionå’Œå±žæ€§targetSdkVersionå£°æ˜Žï¼‰ï¼Œä½ ä¹Ÿéœ€è¦å£°æ˜Žé…ç½®é¡¹screenSizeï¼Œå› ä¸ºè¿™å°†åœ¨è®¾å¤‡é€‰æ‹©è‚–åƒå’Œå±å¹•æ–¹å‘æ—¶å‘ç”Ÿæ”¹å˜ã€‚ screenSize å½“å‰å¯ç”¨å±å¹•å¤§å°å‘ç”Ÿå˜åŒ–ã€‚è¿™ä»£è¡¨ä¸€ä¸ªå½“å‰å¯ç”¨å¤§å°çš„å˜åŒ–ï¼Œå’Œå½“å‰çš„æ¯”çŽ‡ç›¸å…³ï¼Œå› æ­¤å½“ç”¨æˆ·é€‰æ‹©ä¸åŒçš„ç”»é¢å’Œå›¾åƒï¼Œä¼šå‘ç”Ÿå˜åŒ–ã€‚ç„¶è€Œï¼Œå¦‚æžœä½ çš„ç¨‹åºç›®æ ‡APIçº§åˆ«æ˜¯12æˆ–æ›´ä½Žï¼Œä½ çš„Activityæ€»æ˜¯ä¼šè‡ªå·±å¤„ç†è¿™ä¸ªé…ç½®å˜åŒ–ï¼ˆè¿™ä¸ªå˜åŒ–ä¸ä¼šå¼•èµ·Activityçš„é‡å¯ï¼Œç”šè‡³åœ¨Android 3.2æˆ–æ›´æ–°çš„è®¾å¤‡ä¸Šï¼‰ã€‚åœ¨APIçº§åˆ«13é‡ŒåŠ å…¥çš„ã€‚ smallestScreenSize ç‰©ç†å±å¹•å¤§å°çš„å˜åŒ–ã€‚ä¸ç®¡æ–¹å‘çš„å˜åŒ–ï¼Œä»…ä»…åœ¨å®žé™…ç‰©ç†å±å¹•æ‰“åŒ…å˜åŒ–çš„æ—¶å€™ï¼Œå¦‚ï¼šå¤–æŽ¥æ˜¾ç¤ºå™¨ã€‚è¿™ä¸ªé…ç½®é¡¹çš„å˜åŒ–å¼•èµ·åœ¨smallestWidth configurationé‡Œçš„å˜åŒ–ã€‚ç„¶è€Œï¼Œå¦‚æžœä½ çš„ç¨‹åºç›®æ ‡APIçº§åˆ«æ˜¯12æˆ–æ›´ä½Žï¼Œä½ çš„Activityå°†è‡ªå·±å¤„ç†è¿™ä¸ªå˜åŒ–ï¼ˆè¿™ä¸ªå˜åŒ–ä¸ä¼šå¼•èµ·Activityçš„é‡å¯ï¼Œç”šè‡³åœ¨Android 3.2æˆ–æ›´æ–°çš„è®¾å¤‡ä¸Šï¼‰åœ¨APIçº§åˆ«13é‡ŒåŠ å…¥çš„ã€‚ layoutDirection å¸ƒå±€æ–¹å‘å˜åŒ–ã€‚ä¾‹å¦‚ä¹¦å†™æ–¹å¼ä»Žå·¦å‘å³ï¼ˆLTRï¼‰è½¬æ¢ä¸ºä»Žå³å‘å·¦ï¼ˆRTLï¼‰ æƒ³äº†è§£æ›´å¤šå°±çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ äºŒã€æ¨ªç«–å±åˆ‡æ¢å¯¹Activityç”Ÿå‘½å‘¨æœŸçš„å½±å“é€šè¿‡æ‰“å°Activityå„ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œæƒ…å†µï¼Œæˆ‘ä»¬æ ¹æ®ä»¥ä¸‹å‡ ç§æƒ…å†µæ¥åˆ†æžï¼š 1. ä¸é…ç½® configChanges2. é…ç½® android:configChanges=&quot;orientation&quot;3. é…ç½®android:configChanges=&quot;orientation|keyboardHidden&quot; ç«–å±åˆ‡æ¨ªå± 1234567811-02 20:17:44.898 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onPause11-02 20:17:45.008 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onSaveInstanceState11-02 20:17:45.008 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onStop11-02 20:17:45.018 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onDestroy11-02 20:17:45.038 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onCreate - orientation11-02 20:17:45.088 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onStart11-02 20:17:45.088 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onRestoreInstanceState11-02 20:17:45.088 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onResume æ¨ªå±åˆ‡ç«–å±ï¼š 1234567811-02 20:19:00.268 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onPause11-02 20:19:00.268 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onSaveInstanceState11-02 20:19:00.268 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onStop11-02 20:19:00.268 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onDestroy11-02 20:19:00.318 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onCreate - orientation11-02 20:19:00.338 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onStart11-02 20:19:00.338 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onRestoreInstanceState11-02 20:19:00.338 13324-13324/com.ys.yoosir.screenconfigchange D/MainActivity: -- onResume ä»Žä¸Šé¢çš„ 3ç§æ–¹å¼é…ç½® æ‰“å°çš„ Log ï¼ˆä¸‰ç§æ–¹å¼ Logæ˜¯ä¸€æ ·çš„ï¼Œæ•…åˆå¹¶æ˜¾ç¤ºï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š ä¸è®¾ç½®Activityçš„android:configChangesæ—¶ï¼Œæˆ– è®¾ç½®Activityçš„android:configChanges=&quot;orientation&quot;æ—¶ï¼Œæˆ–è®¾ç½®Activityçš„android:configChanges=&quot;orientation|keyboardHidden&quot;æ—¶ï¼Œåˆ‡å±ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªå±æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåˆ‡ç«–å±æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡æ–¹æ³•ã€‚ è€Œæˆ‘ä»¬ç»å¸¸åœ¨å…¶ä»–åœ°æ–¹çœ‹åˆ°çš„ç»“è®ºå¦‚ä¸‹ï¼š 1ã€ä¸è®¾ç½®Activityçš„android:configChangesæ—¶ï¼Œåˆ‡å±ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªå±æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåˆ‡ç«–å±æ—¶ä¼šæ‰§è¡Œä¸¤æ¬¡ 2ã€è®¾ç½®Activityçš„android:configChanges=â€orientationâ€æ—¶ï¼Œåˆ‡å±è¿˜æ˜¯ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªã€ç«–å±æ—¶åªä¼šæ‰§è¡Œä¸€æ¬¡ 3ã€è®¾ç½®Activityçš„android:configChanges=â€orientation|keyboardHiddenâ€æ—¶ï¼Œåˆ‡å±ä¸ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåªä¼šæ‰§è¡ŒonConfigurationChangedæ–¹æ³• 4. æ‰€ä»¥æ˜¯ä»€ä¹ˆåŽŸå› å¯¼è‡´æˆ‘ä»¬çš„ç»“è®ºä¸ä¸€æ ·å‘¢ï¼Ÿéœ€è¦è¯´æ˜Žçš„æ˜¯ï¼š** æˆ‘çš„æµ‹è¯•çŽ¯å¢ƒæ˜¯ targetSdkVersion 24ï¼Œæµ‹è¯•æ¨¡æ‹Ÿå™¨æ˜¯ ç³»ç»ŸAPI 5.0ï¼** æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå‘çŽ°æœ‰å¦‚ä¸‹æç¤ºï¼š æ³¨æ„ï¼šä»Ž Android 3.2ï¼ˆAPI çº§åˆ« 13ï¼‰å¼€å§‹ï¼Œå½“è®¾å¤‡åœ¨çºµå‘å’Œæ¨ªå‘ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œâ€œå±å¹•å°ºå¯¸â€ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ã€‚å› æ­¤ï¼Œåœ¨å¼€å‘é’ˆå¯¹ API çº§åˆ« 13 æˆ–æ›´é«˜ç‰ˆæœ¬ç³»ç»Ÿçš„åº”ç”¨æ—¶ï¼Œè‹¥è¦é¿å…ç”±äºŽè®¾å¤‡æ–¹å‘æ”¹å˜è€Œå¯¼è‡´è¿è¡Œæ—¶é‡å¯ï¼ˆæ­£å¦‚ minSdkVersion å’Œ targetSdkVersion å±žæ€§ä¸­æ‰€å£°æ˜Žï¼‰ï¼Œåˆ™é™¤äº†â€orientationâ€å€¼ä»¥å¤–ï¼Œæ‚¨è¿˜å¿…é¡»æ·»åŠ  â€œscreenSizeâ€å€¼ã€‚å³ï¼Œæ‚¨å¿…é¡»å£°æ˜Ž android:configChanges=â€orientation|screenSizeâ€ã€‚ä½†æ˜¯ï¼Œå¦‚æžœæ‚¨çš„åº”ç”¨æ˜¯é¢å‘ API çº§åˆ« 12 æˆ–æ›´ä½Žç‰ˆæœ¬çš„ç³»ç»Ÿï¼Œåˆ™ Activity å§‹ç»ˆä¼šè‡ªè¡Œå¤„ç†æ­¤é…ç½®å˜æ›´ï¼ˆå³ä¾¿æ˜¯åœ¨ Android 3.2 æˆ–æ›´é«˜ç‰ˆæœ¬çš„è®¾å¤‡ä¸Šè¿è¡Œï¼Œæ­¤é…ç½®å˜æ›´ä¹Ÿä¸ä¼šé‡å¯ Activityï¼‰ã€‚ æˆ‘ä»¬çŽ°åœ¨æµ‹è¯•ç¬¬å››ç§é…ç½®æ–¹å¼ã€‚ 5. é…ç½® android:configChanges=&quot;orientation|keyboardHidden|screenSize&quot; ç«–å±åˆ‡æ¨ªå± 111-02 20:44:06.568 7792-7792/com.ys.yoosir.screenconfigchange D/MainActivity: -- onConfigurationChanged æ¨ªå±åˆ‡ç«–å± 111-02 20:44:52.918 7792-7792/com.ys.yoosir.screenconfigchange D/MainActivity: -- onConfigurationChanged ç»“è®ºï¼š ä»Ž API 13å¼€å§‹ï¼Œé…ç½® android:configChanges=&quot;orientation|keyboardHidden|screenSize&quot;ï¼Œæ‰ä¸ä¼šé”€æ¯ activityï¼Œä¸”åªè°ƒç”¨ onConfigurationChangedæ–¹æ³•ã€‚ 6. æ¨ªç«–å±åˆ‡æ¢å°ç»“ ï¼ˆä¸€ï¼‰ã€Android 3.2 ï¼ˆAPI çº§åˆ« 13ï¼‰ä»¥å‰1ã€ä¸è®¾ç½®Activityçš„android:configChangesæ—¶ï¼Œåˆ‡å±ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªå±æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåˆ‡ç«–å±æ—¶ä¼šæ‰§è¡Œä¸¤æ¬¡ã€‚2ã€è®¾ç½®Activityçš„android:configChanges=â€orientationâ€æ—¶ï¼Œåˆ‡å±è¿˜æ˜¯ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªã€ç«–å±æ—¶åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚3ã€è®¾ç½®Activityçš„android:configChanges=â€orientation|keyboardHiddenâ€æ—¶ï¼Œåˆ‡å±ä¸ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåªä¼šæ‰§è¡ŒonConfigurationChangedæ–¹æ³•ã€‚ æ³¨æ„ï¼š ä¸è®¾ç½®Activityçš„android:configChangesæ—¶ï¼Œåˆ‡æ¢ç«–å±activityçš„å„ä¸ªç”Ÿå‘½å‘¨æœŸæ‰§è¡Œä¸¤æ¬¡ï¼Œæœ‰äººè¯´æ˜¯ åœ¨API 2.xä¸‹ï¼Œæˆ‘æœªæµ‹è¯•ï¼Œå¤§å®¶å¯ä»¥è€ƒè¯ä¸‹ã€‚ ï¼ˆäºŒï¼‰ã€ä»Ž Android 3.2 (APIçº§åˆ« 13)å¼€å§‹1ã€ä¸è®¾ç½®Activityçš„android:configChangesï¼Œæˆ–è®¾ç½®Activityçš„android:configChanges=&quot;orientation&quot;ï¼Œæˆ–è®¾ç½®Activityçš„android:configChanges=&quot;orientation|keyboardHidden&quot;ï¼Œåˆ‡å±ä¼šé‡æ–°è°ƒç”¨å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œåˆ‡æ¨ªå±æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œåˆ‡ç«–å±æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚2ã€é…ç½® android:configChanges=&quot;orientation|keyboardHidden|screenSize&quot;ï¼Œæ‰ä¸ä¼šé”€æ¯ activityï¼Œä¸”åªè°ƒç”¨ onConfigurationChangedæ–¹æ³•ã€‚ ä¸‰ã€ä»£ç ä¸­åŠ¨æ€åˆ‡æ¢æ¨ªç«–å±åœ¨ä»£ç ä¸­åˆ‡æ¢å±å¹•çš„æ–¹å‘ä¸»è¦è°ƒç”¨ setRequestedOrientationï¼ˆint requestedOrientationï¼‰ æ–¹æ³•ï¼Œæ­¤æ–¹æ³•çš„ä½œç”¨ç­‰åŒäºŽåœ¨ AndroidManifest.xmlè®¾ç½®Activity çš„android:screenOrientationï¼Œæ‰€ä»¥ï¼Œå…¶å¯ä¼ é€’çš„å‚æ•°å¦‚ android:screenOrientationè¡¨æ ¼ä¸­ä¸€æ ·ã€‚ ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314findViewById(R.id.btn_click).setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View view) &#123; Log.d(TAG,"è¢«ç‚¹å‡»äº†"); //åˆ¤æ–­å½“å‰å±å¹•æ–¹å‘ if(getRequestedOrientation() == ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE) &#123; //åˆ‡æ¢ç«–å± MainActivity.this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); &#125;else&#123; //åˆ‡æ¢æ¨ªå± MainActivity.this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); &#125; &#125;&#125;); éžé‡å¯Activityæ¨¡å¼ï¼šå³è®¾ç½®äº†android:configChanges=&quot;orientation|keyboardHidden|screenSize&quot;ï¼ŒLogè¾“å‡ºï¼ˆæ¨ªç«–å±åˆ‡æ¢ä¸€æ ·ï¼‰ 1211-03 10:38:33.998 20317-20317/com.ys.yoosir.screenconfigchange D/MainActivity: è¢«ç‚¹å‡»äº†11-03 10:38:34.108 20317-20317/com.ys.yoosir.screenconfigchange D/MainActivity: -- onConfigurationChanged é‡å¯Activityæ¨¡å¼ï¼šå³æ²¡æœ‰è®¾ç½®android:configChanges=&quot;orientation|keyboardHidden|screenSize&quot;ï¼ŒLogè¾“å‡ºï¼ˆæ¨ªç«–å±åˆ‡æ¢ä¸€æ ·ï¼‰ 12345678911-03 10:59:23.268 7724-7724/com.ys.yoosir.screenconfigchange D/MainActivity: è¢«ç‚¹å‡»äº†11-03 10:59:23.368 7724-7724/com.ys.yoosir.screenconfigchange D/MainActivity: -- onPause11-03 10:59:23.368 7724-7724/com.ys.yoosir.screenconfigchange D/MainActivity: -- onSaveInstanceState11-03 10:59:23.368 7724-7724/com.ys.yoosir.screenconfigchange D/MainActivity: -- onStop11-03 10:59:23.368 7724-7724/com.ys.yoosir.screenconfigchange D/MainActivity: -- onDestroy11-03 10:59:23.428 7724-7724/com.ys.yoosir.screenconfigchange D/MainActivity: -- onCreate - orientation11-03 10:59:23.458 7724-7724/com.ys.yoosir.screenconfigchange D/MainActivity: -- onStart11-03 10:59:23.458 7724-7724/com.ys.yoosir.screenconfigchange D/MainActivity: -- onRestoreInstanceState11-03 10:59:23.458 7724-7724/com.ys.yoosir.screenconfigchange D/MainActivity: -- onResume æ³¨æ„ï¼š é€šè¿‡ setRequestedOrientationï¼ˆint requestedOrientationï¼‰ ä¿®æ”¹äº†å±å¹•æ–¹å‘åŽï¼Œå°±ç±»ä¼¼äºŽè®¾ç½®äº†android:screenOrientationï¼Œæ•ˆæžœæ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚ï¼šè°ƒç”¨setRequestedOrientationï¼ˆActivityInfo.SCREEN_ORIENTATION_PORTRAITï¼‰ï¼Œæ— è®ºå±å¹•æ€Žä¹ˆæ—‹è½¬ï¼Œéƒ½ä¸ä¼šåˆ‡æ¢å±å¹•æ–¹å‘ã€‚å¦‚æžœè¦æ¢å¤ä¸ºå“åº”æ¨ªç«–å±éšç‰©ç†æ–¹å‘ä¼ æ„Ÿå™¨è®¾å¤‡å˜æ¢ï¼Œé‚£ä¹ˆå°±éœ€è¦æ‰‹åŠ¨è°ƒç”¨ç±»ä¼¼setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);ä»£ç è¿›è¡Œæ¢å¤ã€‚ å››ã€æ¨ªç«–å±åˆ‡æ¢æˆ‘ä»¬éœ€è¦åšçš„äº‹ é‡å¯Activityæ¨¡å¼åœ¨é‡å¯Activityæ¨¡å¼ä¸‹ï¼Œæ¨ªç«–å±åˆ‡æ¢çš„æ—¶å€™ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç æ¥ä¿æ­£æ•°æ®ä¸ä¸¢å¤±ï¼š 1234567891011121314151617181920 @Overrideprotected void onSaveInstanceState(Bundle outState) &#123; Log.d(TAG," -- onSaveInstanceState"); Log.d(TAG," -- onSaveInstanceState save: name = yoosir,age = 24,handsome = ture"); outState.putString("name","yoosir"); outState.putInt("age",24); outState.putBoolean("handsome",true); super.onSaveInstanceState(outState);&#125;.... @Overrideprotected void onRestoreInstanceState(Bundle savedInstanceState) &#123; super.onRestoreInstanceState(savedInstanceState); Log.d(TAG," -- onRestoreInstanceState"); if(savedInstanceState != null) &#123; String name = savedInstanceState.getString("name"); int age = savedInstanceState.getInt("age"); boolean isHandsome = savedInstanceState.getBoolean("handsome"); Log.d(TAG, " -- onRestoreInstanceState get: name = " + name + ",age = " + age + ",handsome = " + isHandsome); &#125;&#125; æ¨ªç«–å±åˆ‡æ¢Log è¾“å‡ºï¼š 123456789101111-03 12:03:31.678 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onPause11-03 12:03:31.678 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onSaveInstanceState11-03 12:03:31.678 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onSaveInstanceState save: name = yoosir,age = 24,handsome = ture11-03 12:03:31.688 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onStop11-03 12:03:31.688 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onDestroy11-03 12:03:31.758 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onCreate - orientation11-03 12:03:31.758 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onCreate get: name = yoosir,age = 24,handsome = true11-03 12:03:31.788 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onStart11-03 12:03:31.788 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onRestoreInstanceState11-03 12:03:31.788 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onRestoreInstanceState get: name = yoosir,age = 24,handsome = true11-03 12:03:31.788 3663-3663/com.ys.yoosir.screenconfigchange D/MainActivity: -- onResume å¦‚ä¸Šï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°åœ¨ onCreate() ä¸­ä¹Ÿæ˜¯å¯ä»¥æ‹¿åˆ°æˆ‘ä»¬ä¹‹å‰ä¿å­˜çš„æ•°æ®çš„ã€‚ è¡¥å……ä¸€ç‚¹ï¼š å¦‚æžœå¤§å®¶åœ¨èµ„æºç›®å½•res ä¸­æ·»åŠ äº† layout-landï¼ˆæ¨ªå‘å¸ƒå±€æ–‡ä»¶å¤¹ï¼‰ å’Œ layout-port ï¼ˆç«–æƒ³å¸ƒå±€æ–‡ä»¶å¤¹ï¼‰ï¼Œé‡å¯Activityæ¨¡å¼çš„æ¨ªç«–å±åˆ‡æ¢ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ˜¾ç¤ºæ­£ç¡®æ–¹å‘çš„å¸ƒå±€UIã€‚ éžé‡å¯Activityæ¨¡å¼éžé‡å¯Activityæ¨¡å¼ä¸‹æ¨ªç«–å±åˆ‡æ¢ï¼Œæˆ‘ä»¬çš„Activity ä¸ä¼šé”€æ¯é‡å»ºï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚ä½†æ˜¯ï¼Œå¦‚æžœæˆ‘ä»¬æƒ³æ ¹æ®ä¸åŒçš„å±å¹•æ–¹å‘æ¥å±•ç¤ºä¸åŒUIæˆ–åšä¸åŒçš„äº‹ï¼Œåº”è¯¥æ€Žä¹ˆåšå‘¢ï¼Ÿç›´æŽ¥ä¸Šä»£ç ï¼š 12345678910111213141516171819@Overridepublic void onConfigurationChanged(Configuration newConfig) &#123; super.onConfigurationChanged(newConfig); Log.d(TAG," -- onConfigurationChanged"); if(newConfig.orientation == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT)&#123; //åˆ‡æ¢åˆ°ç«–å± //ä¿®æ”¹å¸ƒå±€æ–‡ä»¶ setContentView(R.layout.activity_main); //findViewById .... //TODO something Log.d(TAG," -- onConfigurationChanged å¯ä»¥åœ¨ç«–å±æ–¹å‘ to do something"); &#125;else&#123; //åˆ‡æ¢åˆ°æ¨ªå± //ä¿®æ”¹å¸ƒå±€æ–‡ä»¶ setContentView(R.layout.activity_main); //findViewById .... //TODO something Log.d(TAG," -- onConfigurationChanged å¯ä»¥åœ¨æ¨ªå±æ–¹å‘ to do something"); &#125;&#125; æ¨ªç«–å±åˆ‡æ¢Log è¾“å‡ºï¼š 1211-03 14:56:50.465 28612-28612/com.ys.yoosir.screenconfigchange D/MainActivity: -- onConfigurationChanged11-03 14:56:50.495 28612-28612/com.ys.yoosir.screenconfigchange D/MainActivity: -- onConfigurationChanged å¯ä»¥åœ¨æ¨ªå±æ–¹å‘ to do something å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œåœ¨éžé‡å¯Activityæ¨¡å¼ä¸‹ï¼Œæ¨ªç«–å±åˆ‡æ¢ä¿®æ”¹UIå¸ƒå±€æ–‡ä»¶æ—¶ï¼Œå…¶å®žæŒºéº»çƒ¦çš„ï¼ˆæˆ‘æ˜¯è¿™æ ·çš„çœ‹æ³•ï¼Œ^_~ï¼‰ï¼Œéœ€è¦é‡æ–°åˆå§‹åŒ–ä¸€éUIã€‚ä¸è¿‡ï¼Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨ä¿å­˜æ•°æ®å€’æ˜¯æŒºæ–¹ä¾¿çš„ã€‚ äº”ã€æ¨ªç«–å±åˆ‡æ¢å¯¹Fragmentçš„å½±å“æ‰“å° Activity å’Œ Fragment å„ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶åœ¨Activity çš„ onCreate() ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 12345678910//æ˜¯å¦å·²ç» add äº† Fragmentif(getSupportFragmentManager().findFragmentByTag("child") == null) &#123; Log.d(TAG, " -- onCreate has no child "); FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction(); blankFragment = BlankFragment.newInstance("one", "two"); fragmentTransaction.add(R.id.root_view, blankFragment, "child"); fragmentTransaction.commit();&#125;else&#123; Log.d(TAG, " -- onCreate has child ");&#125; é‡å»ºActivityæ¨¡å¼Logï¼š å¸¦æœ‰ BlankFragment å³ä¸º Fragment çš„æ‰“å°ï¼Œå…¶ä»–åˆ™ä¸º Activity çš„æ‰“å°è¿›å…¥Activityçš„Logï¼š æˆ‘ä»¬å¯ä»¥å…³æ³¨ä¸‹ç¬¬ 2 è¡Œlogâ€”â€”-- onCreate has no child 1234567891011121311-03 17:56:19.465 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onCreate - orientation11-03 17:56:19.525 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onCreate has no child 11-03 17:56:19.545 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- newInstance 11-03 17:56:19.545 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onAttach 11-03 17:56:19.545 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onCreate 11-03 17:56:19.545 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onCreateView 11-03 17:56:19.585 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onActivityCreated 11-03 17:56:19.585 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onStart 11-03 17:56:19.585 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onStart11-03 17:56:19.585 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onResume11-03 17:56:19.585 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onResume 11-03 17:57:02.285 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- one btn click 11-03 17:57:05.705 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- two btn click æ¨ªç«–å±åˆ‡æ¢çš„Logï¼š 1ã€æˆ‘ä»¬å…³æ³¨ä¸€ä¸‹ ç¬¬17è¡Œ onCreate has child ï¼Œæ‰€ä»¥** Fragment æœ¬èº«æ˜¯æ²¡æœ‰è¢« destroyï¼Œå®ƒçš„views æ˜¯è¢«destroy çš„** 2ã€å…³æ³¨ä¸€ä¸‹ ç¬¬5ã€6ã€19 å’Œ 20 è¡Œï¼ŒFragment çš„å±€éƒ¨å˜é‡æ•°æ®è¢«é”€æ¯äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨onSaveInstanceState ä¿å­˜æ•°æ®ï¼Œè™½ç„¶ Fragment ä¸åƒ Activity æ‹¥æœ‰ onRestoreInstanceState æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ onActivityCreated ä¸­èŽ·å–ä¹‹å‰ä¿å­˜çš„æ•°æ®ã€‚ 123456789101112131415161718192021222324252611-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onPause 11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onPause11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onSaveInstanceState11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onSaveInstanceState save: name = yoosir,age = 24,handsome = ture11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onSaveInstanceState 11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onSaveInstanceState save str11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onStop 11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onStop11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onDestroyView 11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onDestroy 11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onDetach 11-03 17:57:40.095 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onDestroy11-03 17:57:40.165 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onAttach 11-03 17:57:40.165 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onCreate 11-03 17:57:40.165 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onCreate - orientation11-03 17:57:40.165 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onCreate get: name = yoosir,age = 24,handsome = true11-03 17:57:40.175 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onCreate has child 11-03 17:57:40.175 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onCreateView 11-03 17:57:40.185 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onActivityCreated 11-03 17:57:40.185 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onActivityCreated get æˆ‘è®¾ç½®äº†å‚æ•°11-03 17:57:40.185 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onStart 11-03 17:57:40.185 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onStart11-03 17:57:40.195 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onRestoreInstanceState11-03 17:57:40.195 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onRestoreInstanceState get: name = yoosir,age = 24,handsome = true11-03 17:57:40.195 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onResume11-03 17:57:40.195 26990-26990/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onResume éžé‡å»ºActivityæ¨¡å¼ï¼šæ¨ªç«–å±åˆ‡æ¢Log(è¿›å…¥Activityçš„Log ä¸Ž é‡å»ºActivityæ¨¡å¼ä¸€æ · )ï¼šæ¨ªç«–å±åˆ‡æ¢æ—¶ï¼ŒFragment å’Œ Activity éƒ½åªä¼šè°ƒç”¨ onConfigurationChanged æ–¹æ³•ã€‚ 12345611-03 18:31:21.725 27309-27309/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onConfigurationChanged 11-03 18:31:21.725 27309-27309/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onConfigurationChanged11-03 18:31:21.725 27309-27309/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onConfigurationChanged å¯ä»¥åœ¨æ¨ªå±æ–¹å‘ to do something11-03 18:31:36.545 27309-27309/com.ys.yoosir.screenconfigchange D/Main2Activity: BlankFragment -- onConfigurationChanged 11-03 18:31:36.545 27309-27309/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onConfigurationChanged11-03 18:31:36.545 27309-27309/com.ys.yoosir.screenconfigchange D/Main2Activity: -- onConfigurationChanged å¯ä»¥åœ¨ç«–å±æ–¹å‘ to do something å…­ã€å…¶ä»–å°æŠ€å·§å¦‚æžœæˆ‘ä»¬åº”ç”¨æ˜¯æ‰‹æœºå’Œå¹³æ¿éƒ½å¯ç”¨çš„ï¼Œä¸”æ‰‹æœºçš„åªèƒ½æ˜¯ç«–å±ä¸å¯åˆ‡æ¢ï¼Œå¹³æ¿çš„åªèƒ½æ˜¯æ¨ªå±ä¸å¯åˆ‡æ¢ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦åŒºåˆ†è®¾å¤‡æ˜¯æ‰‹æœºè¿˜æ˜¯å¹³æ¿ï¼Œç„¶åŽè®¾ç½®å±å¹•æ–¹å‘ã€‚ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718/** * åˆ¤æ–­æ˜¯å¦å¹³æ¿è®¾å¤‡ * @param context * @return true:å¹³æ¿,false:æ‰‹æœº */private boolean isTabletDevice(Context context) &#123; return (context.getResources().getConfiguration().screenLayout &amp; Configuration.SCREENLAYOUT_SIZE_MASK) &gt;= Configuration.SCREENLAYOUT_SIZE_LARGE;&#125;//è®¾ç½®å±å¹•æ–¹å‘private void setScreenOrientation(Context context)&#123; if(!isTabletDevice(context))&#123; //æ‰‹æœºï¼Œç«–å± MainActivity.this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); &#125;else&#123; //å¹³æ¿ï¼Œæ¨ªå± MainActivity.this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); &#125;&#125; å‚è€ƒå­¦ä¹ çš„æ–‡ç« ï¼šThe Real Best Practices to Save/Restore Activityâ€™s and Fragmentâ€™s state ã€Š===== é‡ç‚¹æŽ¨èé˜…è¯» [è¯‘] ä¿å­˜/æ¢å¤ Activity å’Œ Fragment çŠ¶æ€çš„æœ€ä½³å®žè·µ ã€Š=== ä¸Šé¢ä¸€ç¯‡æ–‡ç« çš„è¯‘æ–‡ å¦‚ä½•åœ¨Androidè®¾å¤‡æ—‹è½¬æ—¶æš‚å­˜æ•°æ®ä»¥ä¿æŠ¤å½“å‰çš„äº¤äº’çŠ¶æ€ï¼Ÿ Androidæ¨ªç«–å±åˆ‡æ¢å°ç»“ é™„å›¾ä¸¤å¼ ï¼š å°å°æ€»ç»“é€šè¿‡ä¸€æ­¥ä¸€æ­¥ä»£ç éªŒè¯ï¼Œæˆ‘ä»¬ç»ˆäºŽæ˜Žç™½äº†æ¨ªç«–å±åˆ‡æ¢æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼Œåˆå¯ä»¥æ„‰å¿«çš„å†™ä»£ç äº†ï¼Œå•¦å•¦å•¦â€¦ï¼ŒI AM CODERï¼è‹¥æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿Žå¤§å®¶æŒ‡æ­£å’Œè¯„è®ºï¼Œè°¢è°¢ï¼:-)]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[awesome-commentç¥žçº§æ³¨é‡Š]]></title>
    <url>%2Fposts%2F86664ecf.html</url>
    <content type="text"><![CDATA[ä¸€æ—¶å…´èµ·å°±æ”¶é›†äº†ä»¥ä¸‹ç¥žæ³¨é‡Šï¼Œå¸Œæœ›èƒ½ä¸ºå¹¿å¤§ITerå¸¦æ¥å¿«ä¹ï¼Œç¼“è§£ä½ ä»¬å·¥ä½œä¸­çš„åŽ‹åŠ›ï¼Œä¸‹é¢å¼€è½¦ï¼Œå…ˆè‡ªçˆ†å¤´åƒï¼Œä¸‹æ–‡ä¼šç»™å‡ºåˆ¶ä½œé“¾æŽ¥ã€‚ é­”æ€§å›¾ 123456789101112131415161718192021222324252627282930313233343536/** * ç“¦ç“¦ å * åé½±é¾ å·± äº…ç“¦è»Šå·± * ä¹™é¾é¾ æ¯‹æ—¥ä¸¶ ä¸¶ä¹™å·±æ¯‹æ¯‹ä¸¶ * åé¾ é¦¬é¬¼è»Šç“¦ å·±åç“¦æ¯‹æ¯‹ * é¬¼é¦¬é¾ é¦¬é¾ å å·±å·±æ¯‹è»Šæ¯‹ç“¦ * æ¯‹é¾ é¾ é¾é¾ é¬¼ä¹™ä¸¶ä¸¶ä¹™è»Šä¹™æ¯‹é¬¼è»Šå·± * ä¹™é¾ é¾é¾é¬¼é¾ç“¦ åç“¦æ¯‹ä¹™ç“¦é¾ ç“¦äº… * é¦¬é½±é¾é¦¬é¬¼åä¸¶æ—¥å·±å·±å·±æ¯‹è»Šä¹™ä¸¶ * å·±é½±é¦¬é¬¼è»Šååæ¯‹æ—¥ä¹™å·±å·±ä¹™ä¹™ * è»Šé¦¬é½±é½±æ—¥ä¹™æ¯‹ç“¦å·±ä¹™ç“¦æ—¥äº… * äº…è»Šé½ºé¾–ç“¦ä¹™è»Šé¾–é¾ä¹™ä¹™å * æ—¥é¾ é¾ åäº…è»Šé¾æ¯‹åå * æ—¥æ¯‹å·±äº… å·±å·±åäº…äº… * ä¸¶å·±ååä¹™ ä¸¶ä¸¶ä¸¶ä¸¶ä¸¶ * äº…å·±åé¾é¾–ç“¦ ä¸¶ ä¸¶ ä¹™å * äº…å·±åé¾ é¾–æ¯‹ ä¸¶ä¸¶ ä¸¶å·±é¬¼é¬¼ç“¦äº… * åæ—¥ååæ—¥äº…ä¸¶äº…ä¸¶ ä¸¶åæ—¥æ¯‹é¬¼é¦¬é¦¬è»Šä¹™ * åæ—¥ä¹™åäº…äº…äº…ä¸¶ åä¹™å·±æ¯‹é¬¼é¬¼é¬¼é¾é½ºé¦¬ä¹™ * ä¸¶ç“¦å·±ä¹™ååäº…ä¸¶äº…ä¹™ä¹™ä¹™å·±æ¯‹é¬¼é¬¼é¬¼é¾é½±é½ºé½ºé¬¼å * ä¹™ä¹™åååäº…ä¹™ç“¦ç“¦å·±æ—¥ç“¦æ¯‹é¬¼é¬¼é¾ é½±é½±é¾é¾é½±é½±æ¯‹ä¸¶ * äº…ååååä¹™ç“¦è»Šæ¯‹ç“¦ç“¦æ—¥è»Šé¦¬é¾ é¾é¾é¾é¾é¾é¾ é¾ é¾ é¦¬äº… * ååååå·±æ¯‹è»Šç“¦ç“¦ç“¦ç“¦é¬¼é¦¬é¾ é¾é¾ é¾ é¾é¾ é¾ é¾ é¦¬é¾ è»Š * äº…ååæ—¥æ¯‹ç“¦æ—¥æ—¥ç“¦é¬¼é¬¼é¬¼é¾ é¾ é¦¬é¦¬é¾ é¾é¾é¾ é¦¬é¦¬è»Š * äº…äº…äº…ä¹™ç“¦ç“¦æ¯‹è»Šè»Šè»Šé¦¬é¾é¾ é¬¼é¬¼é¦¬é¾ é¾é¾é¾ é¦¬é¦¬é¬¼ * ä¸¶ä¸¶ä¹™äº…äº…ä¹™è»Šé¬¼é¬¼é¬¼æ¯‹è»Šé¾é¾é¾ é¬¼é¦¬é¦¬é¾ é¾é½±é½±é¾é¦¬é¬¼ * äº…å·±ååå·±åæ—¥é¬¼é¬¼è»Šç“¦æ¯‹é¾ é¾é¾ é¦¬é¦¬é¾ é¾ é¾ é½±é½ºé½ºé½±é¾ é¬¼ * äº…ä¹™ä¹™ä¹™åè»Šé¦¬è»Šæ¯‹é¦¬é½±é½±é¾é¾ é¾ é¾ é¦¬é¾ é¾é½±é¾é¾ é¾ é¬¼ç“¦ * ä¸¶æ¯‹é¾ é¬¼è»Šç“¦è»Šé¦¬é¾ é¾é¾ é¾ é¾é½±é½±é¾ é¦¬é¦¬é¬¼æ¯‹æ—¥ * åä¹™å·±æ—¥å ä¸¶å·±é¬¼é¾é½±é½ºé½±é¾é¦¬é¦¬é¦¬è»Šæ¯‹å·± * ä¸¶åå·±ä¹™äº…ä¸¶ äº…ç“¦é¦¬é¾ é¾é¾ é¾ é¦¬æ¯‹ç“¦ä¹™ * ä¸¶ååä¹™äº…å äº…å·±ç“¦è»Šé¦¬é¾ é¬¼è»Šç“¦ä¹™ * ä¸¶åä¹™ååä¸¶ ä¸¶ä¸¶äº…åç“¦é¬¼è»Šç“¦å·± * ä¸¶äº…äº…ä¸¶ äº…æ—¥ç“¦æ—¥ * ä¸¶ */ å°±ä¸å–å…³å­äº†ï¼Œå›¾ç‰‡è½¬å­—ç¬¦å¯ä»¥ä¸Šè¿™ä¸ªä¼ é€é—¨ï¼Œç™½åº•çš„è¯ä¼šæŒ‰ç©ºæ ¼è¡¥å…¨ï¼Œå¦åˆ™éƒ½ä¸ºå­—ç¬¦ã€‚ å‰é¢çš„ä¼ é€é—¨è²Œä¼¼å‡ºäº†ç‚¹é—®é¢˜ï¼Œä¸‹é¢å†è¡¥ä¸Šä¸ªæ–°çš„ä¼ é€é—¨ï¼Œä¹Ÿæ˜¯å¾ˆå¥½ç”¨çš„ï¼Œå¯ä»¥é€‰æ‹©è´¨é‡ã€‚ è¿™ä¸ï¼Œä¸‹é¢çš„ä¸¤åªdogeå’Œä¸€å¤´æ»‘ç¨½å°±æ˜¯äº§è‡ªäºŽå®ƒï¼Œhave funï¼Œå¿«åŽ»åˆ¶ä½œä¸“å±žçš„å­—ç¬¦æ³¨é‡Šå§ã€‚ å†è¡¥ä¸Šä¸€ä¸ªå¥½çŽ©çš„ç½‘ç«™Ascii Worldï¼Œç”±äºŽè¿™ç½‘ç«™çš„å›¾å½¢å¤ªå¤šäº†ï¼Œæˆ‘å°±ä¸è´´ä¸Šæ¥äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627628629630631632633634635636637638639640641642643644645646647648649650651652653654655656657658659660661662663664665666667668669670671672673674675676677678679680681682683684685686687688689690691692693694695696697698699700701702703704705706707708709710711712713714715716717718719720721722723724725726727728729730731732733734735736737738/** * .,:,,, .::,,,::. * .::::,,;;, .,;;:,,....:i: * :i,.::::,;i:. ....,,:::::::::,.... .;i:,. ......;i. * :;..:::;::::i;,,:::;:,,,,,,,,,,..,.,,:::iri:. .,:irsr:,.;i. * ;;..,::::;;;;ri,,,. ..,,:;s1s1ssrr;,.;r, * :;. ,::;ii;:, . ................... .;iirri;;;,,;i, * ,i. .;ri:. ... ............................ .,,:;:,,,;i: * :s,.;r:... ....................................... .::;::s; * ,1r::. .............,,,.,,:,,........................,;iir; * ,s;........... ..::.,;:,,. ...............,;1s * :i,..,. .,:,,::,. .......... .......;1, * ir,....:rrssr;:, ,,.,::. .r5S9989398G95hr;. ....,.:s, * ;r,..,s9855513XHAG3i .,,,,,,,. ,S931,.,,.;s;s&amp;BHHA8s.,..,..:r: * :r;..rGGh, :SAG;;G@BS:.,,,,,,,,,.r83: hHH1sXMBHHHM3..,,,,.ir. * ,si,.1GS, sBMAAX&amp;MBMB5,,,,,,:,,.:&amp;8 3@HXHBMBHBBH#X,.,,,,,,rr * ;1:,,SH: .A@&amp;&amp;B#&amp;8H#BS,,,,,,,,,.,5XS, 3@MHABM&amp;59M#As..,,,,:,is, * .rr,,,;9&amp;1 hBHHBB&amp;8AMGr,,,,,,,,,,,:h&amp;&amp;9s; r9&amp;BMHBHMB9: . .,,,,;ri. * :1:....:5&amp;XSi;r8BMBHHA9r:,......,,,,:ii19GG88899XHHH&amp;GSr. ...,:rs. * ;s. .:sS8G8GG889hi. ....,,:;:,.:irssrriii:,. ...,,i1, * ;1, ..,....,,isssi;, .,,. ....,.i1, * ;h: i9HHBMBBHAX9: . ...,,,rs, * ,1i.. :A#MBBBBMHB##s ....,,,;si. * .r1,.. ,..;3BMBBBHBB#Bh. .. ....,,,,,i1; * :h;.. .,..;,1XBMMMMBXs,.,, .. :: ,. ....,,,,,,ss. * ih: .. .;;;, ;;:s58A3i,.. ,. ,.:,,. ...,,,,,:,s1, * .s1,.... .,;sh, ,iSAXs;. ,. ,,.i85 ...,,,,,,:i1; * .rh: ... rXG9XBBM#M#MHAX3hss13&amp;&amp;HHXr .....,,,,,,,ih; * .s5: ..... i598X&amp;&amp;A&amp;AAAAAA&amp;XG851r: ........,,,,:,,sh; * . ihr, ... . .. ........,,,,,;11:. * ,s1i. ... ..,,,..,,,.,,.,,.,.. ........,,.,,.;s5i. * .:s1r,...................... ..............;shs, * . .:shr:. .... ..............,ishs. * .,issr;,... ...........................,is1s;. * .,is1si;:,....................,:;ir1sr;, * ..:isssssrrii;::::::;;iirsssssr;:.. * .,::iiirsssssssssrri;;:. */ /** * ii. ;9ABH, * SA391, .r9GG35&amp;G * &amp;#ii13Gh; i3X31i;:,rB1 * iMs,:,i5895, .5G91:,:;:s1:8A * 33::::,,;5G5, ,58Si,,:::,sHX;iH1 * Sr.,:;rs13BBX35hh11511h5Shhh5S3GAXS:.,,::,,1AG3i,GG * .G51S511sr;;iiiishS8G89Shsrrsh59S;.,,,,,..5A85Si,h8 * :SB9s:,............................,,,.,,,SASh53h,1G. * .r18S;..,,,,,,,,,,,,,,,,,,,,,,,,,,,,,....,,.1H315199,rX, * ;S89s,..,,,,,,,,,,,,,,,,,,,,,,,....,,.......,,,;r1ShS8,;Xi * i55s:.........,,,,,,,,,,,,,,,,.,,,......,.....,,....r9&amp;5.:X1 * 59;.....,. .,,,,,,,,,,,... .............,..:1;.:&amp;s * s8,..;53S5S3s. .,,,,,,,.,.. i15S5h1:.........,,,..,,:99 * 93.:39s:rSGB@A; ..,,,,..... .SG3hhh9G&amp;BGi..,,,,,,,,,,,,.,83 * G5.G8 9#@@@@@X. .,,,,,,..... iA9,.S&amp;B###@@Mr...,,,,,,,,..,.;Xh * Gs.X8 S@@@@@@@B:..,,,,,,,,,,. rA1 ,A@@@@@@@@@H:........,,,,,,.iX: * ;9. ,8A#@@@@@@#5,.,,,,,,,,,... 9A. 8@@@@@@@@@@M; ....,,,,,,,,S8 * X3 iS8XAHH8s.,,,,,,,,,,...,..58hH@@@@@@@@@Hs ...,,,,,,,:Gs * r8, ,,,...,,,,,,,,,,..... ,h8XABMMHX3r. .,,,,,,,.rX: * :9, . .:,..,:;;;::,.,,,,,.. .,,. ..,,,,,,.59 * .Si ,:.i8HBMMMMMB&amp;5,.... . .,,,,,.sMr * SS :: h@@@@@@@@@@#; . ... . ..,,,,iM5 * 91 . ;:.,1&amp;@@@@@@MXs. . .,,:,:&amp;S * hS .... .:;,,,i3MMS1;..,..... . . ... ..,:,.99 * ,8; ..... .,:,..,8Ms:;,,,... .,::.83 * s&amp;: .... .sS553B@@HX3s;,. .,;13h. .:::&amp;1 * SXr . ...;s3G99XA&amp;X88Shss11155hi. ,;:h&amp;, * iH8: . .. ,;iiii;,::,,,,,. .;irHA * ,8X5; . ....... ,;iihS8Gi * 1831, .,;irrrrrs&amp;@ * ;5A8r. .:;iiiiirrss1H * :X@H3s....... .,:;iii;iiiiirsrh * r#h:;,...,,.. .,,:;;;;;:::,... .:;;;;;;iiiirrss1 * ,M8 ..,....,.....,,::::::,,... . .,;;;iiiiiirss11h * 8B;.,,,,,,,.,..... . .. .:;;;;iirrsss111h * i@5,:::,,,,,,,,.... . . .:::;;;;;irrrss111111 * 9Bi,:,,,,...... ..r91;;;;;iirrsss1ss1111 *//** * .,, .,:;;iiiiiiiii;;:,,. .,, * rGB##HS,.;iirrrrriiiiiiiiiirrrrri;,s&amp;##MAS, * r5s;:r3AH5iiiii;;;;;;;;;;;;;;;;iiirXHGSsiih1, * .;i;;s91;;;;;;::::::::::::;;;;iS5;;;ii: * :rsriii;;r::::::::::::::::::::::;;,;;iiirsi, * .,iri;;::::;;;;;;::,,,,,,,,,,,,,..,,;;;;;;;;iiri,,. * ,9BM&amp;, .,:;;:,,,,,,,,,,,hXA8: ..,,,. * ,;&amp;@@#r:;;;;;::::,,. ,r,,,,,,,,,,iA@@@s,,:::;;;::,,. .;. * :ih1iii;;;;;::::;;;;;;;:,,,,,,,,,,;i55r;;;;;;;;;iiirrrr,.. * .ir;;iiiiiiiiii;;;;::::::,,,,,,,:::::,,:;;;iiiiiiiiiiiiri * iriiiiiiiiiiiiiiii;;;::::::::::::::::;;;iiiiiiiiiiiiiiiir; * ,riii;;;;;;;;;;;;;:::::::::::::::::::::::;;;;;;;;;;;;;;iiir. * iri;;;::::,,,,,,,,,,:::::::::::::::::::::::::,::,,::::;;iir: * .rii;;::::,,,,,,,,,,,,:::::::::::::::::,,,,,,,,,,,,,::::;;iri * ,rii;;;::,,,,,,,,,,,,,:::::::::::,:::::,,,,,,,,,,,,,:::;;;iir. * ,rii;;i::,,,,,,,,,,,,,:::::::::::::::::,,,,,,,,,,,,,,::i;;iir. * ,rii;;r::,,,,,,,,,,,,,:,:::::,:,:::::::,,,,,,,,,,,,,::;r;;iir. * .rii;;rr,:,,,,,,,,,,,,,,:::::::::::::::,,,,,,,,,,,,,:,si;;iri * ;rii;:1i,,,,,,,,,,,,,,,,,,:::::::::,,,,,,,,,,,,,,,:,ss:;iir: * .rii;;;5r,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,sh:;;iri * ;rii;:;51,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.:hh:;;iir, * irii;::hSr,.,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,sSs:;;iir: * irii;;:iSSs:.,,,,,,,,,,,,,,,,,,,,,,,,,,,..:135;:;;iir: * ;rii;;:,r535r:...,,,,,,,,,,,,,,,,,,..,;sS35i,;;iirr: * :rrii;;:,;1S3Shs;:,............,:is533Ss:,;;;iiri, * .;rrii;;;:,;rhS393S55hh11hh5S3393Shr:,:;;;iirr: * .;rriii;;;::,:;is1h555555h1si;:,::;;;iirri:. * .:irrrii;;;;;:::,,,,,,,,:::;;;;iiirrr;, * .:irrrriiiiii;;;;;;;;iiiiiirrrr;,. * .,:;iirrrrrrrrrrrrrrrrri;:. * ..,:::;;;;:::,,. */ /** * â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” * â”‚Escâ”‚ â”‚ F1â”‚ F2â”‚ F3â”‚ F4â”‚ â”‚ F5â”‚ F6â”‚ F7â”‚ F8â”‚ â”‚ F9â”‚F10â”‚F11â”‚F12â”‚ â”‚P/Sâ”‚S Lâ”‚P/Bâ”‚ â”Œâ” â”Œâ” â”Œâ” * â””â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”˜ â””â”˜ â””â”˜ * â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â” * â”‚~ `â”‚! 1â”‚@ 2â”‚# 3â”‚$ 4â”‚% 5â”‚^ 6â”‚&amp; 7â”‚* 8â”‚( 9â”‚) 0â”‚_ -â”‚+ =â”‚ BacSp â”‚ â”‚Insâ”‚Homâ”‚PUpâ”‚ â”‚N Lâ”‚ / â”‚ * â”‚ - â”‚ * â”œâ”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤ * â”‚ Tab â”‚ Q â”‚ W â”‚ E â”‚ R â”‚ T â”‚ Y â”‚ U â”‚ I â”‚ O â”‚ P â”‚&#123; [â”‚&#125; ]â”‚ | \ â”‚ â”‚Delâ”‚Endâ”‚PDnâ”‚ â”‚ 7 â”‚ 8 â”‚ 9 â”‚ â”‚ * â”œâ”€â”€â”€â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”¬â”€â”€â”´â”€â”€â”€â”€â”€â”¤ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤ + â”‚ * â”‚ Caps â”‚ A â”‚ S â”‚ D â”‚ F â”‚ G â”‚ H â”‚ J â”‚ K â”‚ L â”‚: ;â”‚" 'â”‚ Enter â”‚ â”‚ 4 â”‚ 5 â”‚ 6 â”‚ â”‚ * â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”Œâ”€â”€â”€â” â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤ * â”‚ Shift â”‚ Z â”‚ X â”‚ C â”‚ V â”‚ B â”‚ N â”‚ M â”‚&lt; ,â”‚&gt; .â”‚? /â”‚ Shift â”‚ â”‚ â†‘ â”‚ â”‚ 1 â”‚ 2 â”‚ 3 â”‚ â”‚ * â”œâ”€â”€â”€â”€â”€â”¬â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”¼â”€â”€â”€â”´â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¤ â”Œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â” â”œâ”€â”€â”€â”´â”€â”€â”€â”¼â”€â”€â”€â”¤ Eâ”‚â”‚ * â”‚ Ctrlâ”‚ â”‚Alt â”‚ Space â”‚ Altâ”‚ â”‚ â”‚Ctrlâ”‚ â”‚ â† â”‚ â†“ â”‚ â†’ â”‚ â”‚ 0 â”‚ . â”‚â†â”€â”˜â”‚ * â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜ *//** * _ooOoo_ * o8888888o * 88" . "88 * (| -_- |) * O\ = /O * ____/`---'\____ * . ' \\| |// `. * / \\||| : |||// \ * / _||||| -:- |||||- \ * | | \\\ - /// | | * | \_| ''\---/'' | | * \ .-\__ `-` ___/-. / * ___`. .' /--.--\ `. . __ * ."" '&lt; `.___\_&lt;|&gt;_/___.' &gt;'"". * | | : `- \`.;`\ _ /`;.`/ - ` : | | * \ \ `-. \_ __\ /__ _/ .-` / / * ======`-.____`-.___\_____/___.-`____.-'====== * `=---=' * * ............................................. * ä½›ç¥–ä¿ä½‘ æ°¸æ— BUG *//** * ä½›æ›°: * å†™å­—æ¥¼é‡Œå†™å­—é—´ï¼Œå†™å­—é—´é‡Œç¨‹åºå‘˜ï¼› * ç¨‹åºäººå‘˜å†™ç¨‹åºï¼Œåˆæ‹¿ç¨‹åºæ¢é…’é’±ã€‚ * é…’é†’åªåœ¨ç½‘ä¸Šåï¼Œé…’é†‰è¿˜æ¥ç½‘ä¸‹çœ ï¼› * é…’é†‰é…’é†’æ—¥å¤æ—¥ï¼Œç½‘ä¸Šç½‘ä¸‹å¹´å¤å¹´ã€‚ * ä½†æ„¿è€æ­»ç”µè„‘é—´ï¼Œä¸æ„¿éž èº¬è€æ¿å‰ï¼› * å¥”é©°å®é©¬è´µè€…è¶£ï¼Œå…¬äº¤è‡ªè¡Œç¨‹åºå‘˜ã€‚ * åˆ«äººç¬‘æˆ‘å¿’ç–¯ç™«ï¼Œæˆ‘ç¬‘è‡ªå·±å‘½å¤ªè´±ï¼› * ä¸è§æ»¡è¡—æ¼‚äº®å¦¹ï¼Œå“ªä¸ªå½’å¾—ç¨‹åºå‘˜ï¼Ÿ *//** * _ooOoo_ * o8888888o * 88" . "88 * (| -_- |) * O\ = /O * ___/`---'\____ * . ' \\| |// `. * / \\||| : |||// \ * / _||||| -:- |||||- \ * | | \\\ - /// | | * | \_| ''\---/'' | | * \ .-\__ `-` ___/-. / * ___`. .' /--.--\ `. . __ * ."" '&lt; `.___\_&lt;|&gt;_/___.' &gt;'"". * | | : `- \`.;`\ _ /`;.`/ - ` : | | * \ \ `-. \_ __\ /__ _/ .-` / / * ======`-.____`-.___\_____/___.-`____.-'====== * `=---=' * ............................................. * ä½›æ›°ï¼šbugæ³›æ»¥ï¼Œæˆ‘å·²ç˜«ç—ªï¼ *//** * * â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–ˆ â–ˆâ–ˆ â–„â–ˆâ–ˆâ–ˆâ–ˆâ–„ â–ˆâ–ˆ â–„â–ˆâ–€ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— * â–“â–ˆâ–ˆ â–’ â–ˆâ–ˆ â–“â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–€ â–€â–ˆ â–ˆâ–ˆâ–„â–ˆâ–’ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â• * â–’â–ˆâ–ˆâ–ˆâ–ˆ â–‘â–“â–ˆâ–ˆ â–’â–ˆâ–ˆâ–‘â–’â–“â–ˆ â–„ â–“â–ˆâ–ˆâ–ˆâ–„â–‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•— * â–‘â–“â–ˆâ–’ â–‘â–“â–“â–ˆ â–‘â–ˆâ–ˆâ–‘â–’â–“â–“â–„ â–„â–ˆâ–ˆâ–’â–“â–ˆâ–ˆ â–ˆâ–„ â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ * â–‘â–’â–ˆâ–‘ â–’â–’â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“ â–’ â–“â–ˆâ–ˆâ–ˆâ–€ â–‘â–’â–ˆâ–ˆâ–’ â–ˆâ–„ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• * â–’ â–‘ â–‘â–’â–“â–’ â–’ â–’ â–‘ â–‘â–’ â–’ â–‘â–’ â–’â–’ â–“â–’ â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• * â–‘ â–‘â–‘â–’â–‘ â–‘ â–‘ â–‘ â–’ â–‘ â–‘â–’ â–’â–‘ * â–‘ â–‘ â–‘â–‘â–‘ â–‘ â–‘ â–‘ â–‘ â–‘â–‘ â–‘ * â–‘ â–‘ â–‘ â–‘ â–‘ *//** * .::::. * .::::::::. * ::::::::::: FUCK YOU * ..:::::::::::' * '::::::::::::' * .:::::::::: * '::::::::::::::.. * ..::::::::::::. * ``:::::::::::::::: * ::::``:::::::::' .:::. * ::::' ':::::' .::::::::. * .::::' :::: .:::::::'::::. * .:::' ::::: .:::::::::' ':::::. * .::' :::::.:::::::::' ':::::. * .::' ::::::::::::::' ``::::. * ...::: ::::::::::::' ``::. * ```` ':. ':::::::::' ::::.. * '.:::::' ':'````.. *//** * â”Œâ”€â” â”Œâ”€â” * â”Œâ”€â”€â”˜ â”´â”€â”€â”€â”€â”€â”€â”€â”˜ â”´â”€â”€â” * â”‚ â”‚ * â”‚ â”€â”€â”€ â”‚ * â”‚ â”€â”¬â”˜ â””â”¬â”€ â”‚ * â”‚ â”‚ * â”‚ â”€â”´â”€ â”‚ * â”‚ â”‚ * â””â”€â”€â”€â” â”Œâ”€â”€â”€â”˜ * â”‚ â”‚ * â”‚ â”‚ * â”‚ â”‚ * â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” * â”‚ â”‚ * â”‚ â”œâ”€â” * â”‚ â”Œâ”€â”˜ * â”‚ â”‚ * â””â”€â” â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â” â”Œâ”€â”€â”˜ * â”‚ â”€â”¤ â”€â”¤ â”‚ â”€â”¤ â”€â”¤ * â””â”€â”€â”´â”€â”€â”˜ â””â”€â”€â”´â”€â”€â”˜ * ç¥žå…½ä¿ä½‘ * ä»£ç æ— BUG! *//** * â”Œâ”€â” â”Œâ”€â” * â”Œâ”€â”€â”˜ â”´â”€â”€â”€â”€â”€â”€â”€â”˜ â”´â”€â”€â” * â”‚ â”‚ * â”‚ â”€â”€â”€ â”‚ * â”‚ &gt; &lt; â”‚ * â”‚ â”‚ * â”‚ ... âŒ’ ... â”‚ * â”‚ â”‚ * â””â”€â”€â”€â” â”Œâ”€â”€â”€â”˜ * â”‚ â”‚ * â”‚ â”‚ * â”‚ â”‚ * â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” * â”‚ â”‚ * â”‚ â”œâ”€â” * â”‚ â”Œâ”€â”˜ * â”‚ â”‚ * â””â”€â” â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â” â”Œâ”€â”€â”˜ * â”‚ â”€â”¤ â”€â”¤ â”‚ â”€â”¤ â”€â”¤ * â””â”€â”€â”´â”€â”€â”˜ â””â”€â”€â”´â”€â”€â”˜ * ç¥žå…½ä¿ä½‘ * ä»£ç æ— BUG! *//** * â”Œâ”€â” â”Œâ”€â” + + * â”Œâ”€â”€â”˜ â”´â”€â”€â”€â”€â”€â”€â”€â”˜ â”´â”€â”€â”++ * â”‚ â”‚ * â”‚ â”€â”€â”€ â”‚++ + + + * â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”€â”€â”€â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚+ * â”‚ â”‚+ * â”‚ â”€â”´â”€ â”‚ * â”‚ â”‚ * â””â”€â”€â”€â” â”Œâ”€â”€â”€â”˜ * â”‚ â”‚ * â”‚ â”‚ + + * â”‚ â”‚ * â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” * â”‚ â”‚ * â”‚ â”œâ”€â” * â”‚ â”Œâ”€â”˜ * â”‚ â”‚ * â””â”€â” â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â” â”Œâ”€â”€â”˜ + + + + * â”‚ â”€â”¤ â”€â”¤ â”‚ â”€â”¤ â”€â”¤ * â””â”€â”€â”´â”€â”€â”˜ â””â”€â”€â”´â”€â”€â”˜ + + + + * ç¥žå…½ä¿ä½‘ * ä»£ç æ— BUG! *//** * ___====-_ _-====___ * _--^^^#####// \\#####^^^--_ * _-^##########// ( ) \\##########^-_ * -############// |\^^/| \\############- * _/############// (@::@) \\############\_ * /#############(( \\// ))#############\ * -###############\\ (oo) //###############- * -#################\\ / VV \ //#################- * -###################\\/ \//###################- * _#/|##########/\######( /\ )######/\##########|\#_ * |/ |#/\#/\#/\/ \#/\##\ | | /##/\#/ \/\#/\#/\#| \| * ` |/ V V ` V \#\| | | |/#/ V ' V V \| ' * ` ` ` ` / | | | | \ ' ' ' ' * ( | | | | ) * __\ | | | | /__ * (vvv(VVV)(VVV)vvv) * ç¥žå…½ä¿ä½‘ * ä»£ç æ— BUG! *//** * * * __----~~~~~~~~~~~------___ * . . ~~//====...... __--~ ~~ * -. \_|// |||\\ ~~~~~~::::... /~ * ___-==_ _-~o~ \/ ||| \\ _/~~- * __---~~~.==~||\=_ -_--~/_-~|- |\\ \\ _/~ * _-~~ .=~ | \\-_ '-~7 /- / || \ / * .~ .~ | \\ -_ / /- / || \ / * / ____ / | \\ ~-_/ /|- _/ .|| \ / * |~~ ~~|--~~~~--_ \ ~==-/ | \~--===~~ .\ * ' ~-| /| |-~\~~ __--~~ * |-~~-_/ | | ~\_ _-~ /\ * / \ \__ \/~ \__ * _--~ _/ | .-~~____--~-/ ~~==. * ((-&gt;/~ '.|||' -_| ~~-/ , . _|| * -_ ~\ ~~---l__i__i__i--~~_/ * _-~-__ ~) \--______________--~~ * //.-~~~-~_--~- |-------~~~~~~~~ * //.-~~~--\ * ç¥žå…½ä¿ä½‘ * ä»£ç æ— BUG! *//** _ * _._ _..._ .-', _.._(`)) * '-. ` ' /-._.-' ',/ * ) \ '. * / _ _ | \ * | a a / | * \ .-. ; * '-('' ).-' ,' ; * '-; | .' * \ \ / * | 7 .__ _.-\ \ * | | | ``/ /` / * /,_| | /,_/ / * /,_/ '`-' *//** ************************************************************** * * * .=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-. * * | ______ | * * | .-" "-. | * * | / \ | * * | _ | | _ | * * | ( \ |, .-. .-. ,| / ) | * * | &gt; "=._ | )(__/ \__)( | _.=" &lt; | * * | (_/"=._"=._ |/ /\ \| _.="_.="\_) | * * | "=._"(_ ^^ _)"_.=" | * * | "=\__|IIIIII|__/=" | * * | _.="| \IIIIII/ |"=._ | * * | _ _.="_.="\ /"=._"=._ _ | * * | ( \_.="_.=" `--------` "=._"=._/ ) | * * | &gt; _.=" "=._ &lt; | * * | (_/ \_) | * * | | * * '-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=' * * * * LASCIATE OGNI SPERANZA, VOI CH'ENTRATE * ************************************************************** *//** * ,s555SB@@&amp; * :9H####@@@@@Xi * 1@@@@@@@@@@@@@@8 * ,8@@@@@@@@@B@@@@@@8 * :B@@@@X3hi8Bs;B@@@@@Ah, * ,8i r@@@B: 1S ,M@@@@@@#8; * 1AB35.i: X@@8 . SGhr ,A@@@@@@@@S * 1@h31MX8 18Hhh3i .i3r ,A@@@@@@@@@5 * ;@&amp;i,58r5 rGSS: :B@@@@@@@@@@A * 1#i . 9i hX. .: .5@@@@@@@@@@@1 * sG1, ,G53s. 9#Xi;hS5 3B@@@@@@@B1 * .h8h.,A@@@MXSs, #@H1: 3ssSSX@1 * s ,@@@@@@@@@@@@Xhi, r#@@X1s9M8 .GA981 * ,. rS8H#@@@@@@@@@@#HG51;. .h31i;9@r .8@@@@BS;i; * .19AXXXAB@@@@@@@@@@@@@@#MHXG893hrX#XGGXM@@@@@@@@@@MS * s@@MM@@@hsX#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&amp;, * :GB@#3G@@Brs ,1GM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B, * .hM@@@#@@#MX 51 r;iSGAM@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@8 * :3B@@@@@@@@@@@&amp;9@h :Gs .;sSXH@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@: * s&amp;HA#@@@@@@@@@@@@@@M89A;.8S. ,r3@@@@@@@@@@@@@@@@@@@@@@@@@@@r * ,13B@@@@@@@@@@@@@@@@@@@5 5B3 ;. ;@@@@@@@@@@@@@@@@@@@@@@@@@@@i * 5#@@#&amp;@@@@@@@@@@@@@@@@@@9 .39: ;@@@@@@@@@@@@@@@@@@@@@@@@@@@; * 9@@@X:MM@@@@@@@@@@@@@@@#; ;31. H@@@@@@@@@@@@@@@@@@@@@@@@@@: * SH#@B9.rM@@@@@@@@@@@@@B :. 3@@@@@@@@@@@@@@@@@@@@@@@@@@5 * ,:. 9@@@@@@@@@@@#HB5 .M@@@@@@@@@@@@@@@@@@@@@@@@@B * ,ssirhSM@&amp;1;i19911i,. s@@@@@@@@@@@@@@@@@@@@@@@@@@S * ,,,rHAri1h1rh&amp;@#353Sh: 8@@@@@@@@@@@@@@@@@@@@@@@@@#: * .A3hH@#5S553&amp;@@#h i:i9S #@@@@@@@@@@@@@@@@@@@@@@@@@A. * * * åˆçœ‹æºç ï¼Œçœ‹ä½ å¦¹å¦¹å‘€ï¼ *//** *_______________#########_______________________ *______________############_____________________ *______________#############____________________ *_____________##__###########___________________ *____________###__######_#####__________________ *____________###_#######___####_________________ *___________###__##########_####________________ *__________####__###########_####_______________ *________#####___###########__#####_____________ *_______######___###_########___#####___________ *_______#####___###___########___######_________ *______######___###__###########___######_______ *_____######___####_##############__######______ *____#######__#####################_#######_____ *____#######__##############################____ *___#######__######_#################_#######___ *___#######__######_######_#########___######___ *___#######____##__######___######_____######___ *___#######________######____#####_____#####____ *____######________#####_____#####_____####_____ *_____#####________####______#####_____###______ *______#####______;###________###______#________ *________##_______####________####______________ *//** * ,%%%%%%%%, * ,%%/\%%%%/\%% * ,%%%\c "" J/%%% * %. %%%%/ o o \%%% * `%%. %%%% _ |%%% * `%% `%%%%(__Y__)%%' * // ;%%%%`\-/%%%' * (( / `%%%%%%%' * \\ .' | * \\ / \ | | * \\/ ) | | * \ /_ | |__ * (___________))))))) æ”»åŸŽæ¹¿ * * _ _ * __ _(_)_ _(_) __ _ _ __ * \ \ / / \ \ / / |/ _` |'_ \ * \ V /| |\ V /| | (_| | | | | * \_/ |_| \_/ |_|\__,_|_| |_| *//** * https://gold.xitu.io/ * ï¼‘ï¼‘ï¼‘ ï¼‘ * ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ * ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ï¼‘ *//** * https://www.zhihu.com/ * _____ _____ _____ _____ * /\ \ /\ \ /\ \ /\ \ * /::\____\ /::\ \ /::\ \ /::\ \ * /:::/ / \:::\ \ /::::\ \ /::::\ \ * /:::/ / \:::\ \ /::::::\ \ /::::::\ \ * /:::/ / \:::\ \ /:::/\:::\ \ /:::/\:::\ \ * /:::/____/ \:::\ \ /:::/__\:::\ \ /:::/__\:::\ \ * /::::\ \ /::::\ \ /::::\ \:::\ \ /::::\ \:::\ \ * /::::::\ \ _____ ____ /::::::\ \ /::::::\ \:::\ \ /::::::\ \:::\ \ * /:::/\:::\ \ /\ \ /\ \ /:::/\:::\ \ /:::/\:::\ \:::\____\ /:::/\:::\ \:::\ \ * /:::/ \:::\ /::\____\/::\ \/:::/ \:::\____\/:::/ \:::\ \:::| |/:::/__\:::\ \:::\____\ * \::/ \:::\ /:::/ /\:::\ /:::/ \::/ /\::/ |::::\ /:::|____|\:::\ \:::\ \::/ / * \/____/ \:::\/:::/ / \:::\/:::/ / \/____/ \/____|:::::\/:::/ / \:::\ \:::\ \/____/ * \::::::/ / \::::::/ / |:::::::::/ / \:::\ \:::\ \ * \::::/ / \::::/____/ |::|\::::/ / \:::\ \:::\____\ * /:::/ / \:::\ \ |::| \::/____/ \:::\ \::/ / * /:::/ / \:::\ \ |::| ~| \:::\ \/____/ * /:::/ / \:::\ \ |::| | \:::\ \ * /:::/ / \:::\____\ \::| | \:::\____\ * \::/ / \::/ / \:| | \::/ / * \/____/ \/____/ \|___| \/____/ *//** * http://www.freebuf.com/ * _.._ ,------------. * ,' `. ( We want you! ) * / __) __` \ `-,----------' * ( (`-`(-') ) _.-' * /) \ = / ( * /' |--' . \ * ( ,---| `-.)__` * )( `-.,--' _`-. * '/,' ( Uu", * (_ , `/,-' ) * `.__, : `-'/ /`--' * | `--' | * ` `-._ / * \ ( * /\ . \. freebuf * / |` \ ,-\ * / \| .) / \ * ( ,'|\ ,' : * | \,`.`--"/ &#125; * `,' \ |,' / * / "-._ `-/ | * "-. "-.,'| ; * / _/["---'""] * : / |"- ' * ' | / * ` | *//** * https://campus.alibaba.com/ * `:::::::::::, * `::;:::::::;:::::::, ` * `::;;:::::::@@@@;:::::::` * ,:::::::::::::@ #@':::::` * :::::::::::::::'@@ @;:::: * ::::::::::::'@@@@'``` .+:::` * ::::::::::;@@@#. ,:::, * .::::::::+@#@` :::: * :::::::+@@' :::: * `:::::'@@: `:::. * ,::::@@: ` :::: * ;::::::@ .:::; * :;:::::;@` ` :::; * :::::::::@` @ ;:::: * :::::::::#` @` ,:::: * :::::::::@` +@ @ .::::` * .::::::'@@` `@@' @ ::::, * :::::::++@@@@@@@@@@. ::::; * ;:::::::+, `..` ::::: * ,::::::::', ::::: * :::::::::+, :::::` * :::::::::+@. ,::::.` `, * ::::::;;@+ .::;:: `; * :::::::@@ `:::;: `::`` * ::::::#@ ;:::: .::` * :::::;@ :::::` .;::` * :::::@ `:;::: `::::; * :::::# :::::. `,;::::: * :::::: ` ::::::,.,::::::::::. * ,::::::` .:: ::::::::::::::::;` * ;::::::::,````.,:::::, ::::::::::::::. * :::::::::::::::::: ` `::::::::::` * `::::::::::::, .:::. * `..` *//** * http://www.flvcd.com/ * .--, .--, * ( ( \.---./ ) ) * '.__/o o\__.' * &#123;= ^ =&#125; * &gt; - &lt; * / \ * // \\ * //| . |\\ * "'\ /'"_.-~^`'-. * \ _ /--' ` * ___)( )(___ * (((__) (__))) é«˜å±±ä»°æ­¢,æ™¯è¡Œè¡Œæ­¢.è™½ä¸èƒ½è‡³,å¿ƒå‘å¾€ä¹‹ã€‚ *//** * é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚ * é ‚é ‚é ‚é ‚é ‚é ‚é ‚ é ‚é ‚ * é ‚é ‚ é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚ * é ‚é ‚ é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚é ‚ * é ‚é ‚ é ‚é ‚ é ‚é ‚ * é ‚é ‚ é ‚é ‚ é ‚é ‚é ‚ é ‚é ‚ * é ‚é ‚ é ‚é ‚ é ‚é ‚é ‚ é ‚é ‚ * é ‚é ‚ é ‚é ‚ é ‚é ‚é ‚ é ‚é ‚ * é ‚é ‚ é ‚é ‚ é ‚é ‚é ‚ é ‚é ‚ * é ‚é ‚ é ‚é ‚é ‚ * é ‚é ‚ é ‚é ‚ é ‚é ‚ é ‚é ‚ * é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚é ‚ * é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚ é ‚é ‚é ‚é ‚ *//** * â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–‘â–‘ * â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–€â–’â–Œâ–‘ * â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–â–€â–’â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–„â–€â–’â–’â–’â– * â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–â–„â–€â–’â–’â–€â–€â–€â–€â–„â–„â–„â–€â–’â–’â–’â–’â–’â– * â–‘â–‘â–‘â–‘â–‘â–„â–„â–€â–’â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–’â–ˆâ–’â–’â–„â–ˆâ–’â– * â–‘â–‘â–‘â–„â–€â–’â–’â–’â–‘â–‘â–‘â–’â–’â–’â–‘â–‘â–‘â–’â–’â–’â–€â–ˆâ–ˆâ–€â–’â–Œ * â–‘â–‘â–â–’â–’â–’â–„â–„â–’â–’â–’â–’â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–€â–„â–’â–’ * â–‘â–‘â–Œâ–‘â–‘â–Œâ–ˆâ–€â–’â–’â–’â–’â–’â–„â–€â–ˆâ–„â–’â–’â–’â–’â–’â–’â–’â–ˆâ–’â– * â–‘â–â–‘â–‘â–‘â–’â–’â–’â–’â–’â–’â–’â–’â–Œâ–ˆâ–ˆâ–€â–’â–’â–‘â–‘â–‘â–’â–’â–’â–€â–„ * â–‘â–Œâ–‘â–’â–„â–ˆâ–ˆâ–„â–’â–’â–’â–’â–’â–’â–’â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’â–’ * â–€â–’â–€â–â–„â–ˆâ–„â–ˆâ–Œâ–„â–‘â–€â–’â–’â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–’â–’â–’ * å•èº«ç‹—å°±è¿™æ ·é»˜é»˜åœ°çœ‹ç€ä½ ï¼Œä¸€å¥è¯ä¹Ÿä¸è¯´ã€‚ *//** * /88888888888888888888888888\ * |88888888888888888888888888/ * |~~____~~~~~~~~~"""""""""| * / \_________/"""""""""""""\ * / | \ \ * / | 88 88 \ \ * / | 88 88 \ \ * / / \ | * / | ________ \ | * \ | \______/ / | * /"\ \ \____________ / | * | |__________\_ | | / / * /""""\ \_------' '-------/ -- * \____/,___________\ -------/ * ------* | \ * || | \ * || | ^ \ * || | | \ \ * || | | \ \ * || | | \ \ * \| / /"""\/ / * ------------- | | / * |\--_ \____/___/ * | |\-_ | * | | \_ | * | | \ | * | | \_ | * | | ----___ | * | | \----------| * / | | ----------""\ * /"\--"--_| | | \ * |_______/ \______________/ ) * \___/ *//** * d*##$. * zP"""""$e. $" $o * 4$ '$ $" $ * '$ '$ J$ $F * 'b $k $&gt; $ * $k $r J$ d$ * '$ $ $" $~ * '$ "$ '$E $ * $ $L $" $F ... * $. 4B $ $$$*"""*b * '$ $. $$ $$ $F * "$ R$ $F $" $ * $k ?$ u* dF .$ * ^$. $$" z$ u$$$$e * #$b $E.dW@e$" ?$ * #$ .o$$# d$$$$c ?F * $ .d$$#" . zo$&gt; #$r .uF * $L .u$*" $&amp;$$$k .$$d$$F * $$" ""^"$$$P"$P9$ * JP .o$$$$u:$P $$ * $ ..ue$" "" $" * d$ $F $ * $$ ....udE 4B * #$ """"` $r @$ * ^$L '$ $F * RN 4N $ * *$b d$ * $$k $F * $$b $F * $"" $F * '$ $ * $L $ * '$ $ * $ $ *//** * ,----------------, ,---------, * ,-----------------------, ," ,"| * ," ,"| ," ," | * +-----------------------+ | ," ," | * | .-----------------. | | +---------+ | * | | | | | | -==----'| | * | | I LOVE DOS! | | | | | | * | | Bad command or | | |/----|`---= | | * | | C:\&gt;_ | | | ,/|==== ooo | ; * | | | | | // |(((( [33]| ," * | `-----------------' |," .;'| |(((( | ," * +-----------------------+ ;; | | |," * /_)______________(_/ //' | +---------+ * ___________________________/___ `, * / oooooooooooooooo .o. oooo /, \,"----------- * / ==ooooooooooooooo==.o. ooo= // ,`\--&#123;)B ," * /_==__==========__==_ooo__ooo=_/' /___________," * *//** * .-~~~~~~~~~-._ _.-~~~~~~~~~-. * __.' ~. .~ `.__ * .'// \./ \\`. * .'// | \\`. * .'// .-~"""""""~~~~-._ | _,-~~~~"""""""~-. \\`. * .'//.-" `-. | .-' "-.\\`. * .'//______.============-.. \ | / ..-============.______\\`. * .'______________________________\|/______________________________`. * *//** æ— å¯å¥‰å‘Š ä¸€é¢—èµ›è‰‡ * uJjYJYYLLv7r7vJJ5kqSFFFUUjJ7rrr7LLYLJLJ7 * JuJujuYLrvuEM@@@B@@@B@B@B@@@MG5Y7vLjYjJL * JYjYJvr7XM@BB8GOOE8ZEEO8GqM8OBBBMu77LLJ7 * LJLY7ru@@@BOZ8O8NXFFuSkSu25X0OFZ8MZJ;vLv * YvL7i5@BM8OGGqk22uvriiriii;r7LuSZXEMXrvr * vv7iU@BMNkF1uY7v7rr;iiii:i:i:ii7JEPNBPir * L7iL@BM8Xjuujvv77rr;ri;i;:iiiii:iLXFOBJ: * 7ri@B@MOFuUS2Y7L7777rii;:::::i:iirjPG@O: * 7:1B@BBOPjXXSJvrL7rr7iiii:i::::i;iv5MBB, * r:0@BBM8SFPX2Y77rri::iirri:::::iii75O@G. * 7:SB@BBGqXPk0122UJL::i::r:::i:i;i:v2@Bk. * ri:MB@BBEqEMGq2JLLL1u7.iX51u77LF27iSB@r, * ri,v@B@MB8@qqNEqN1u:5B8BOFE0S7ii7qMB@F:: * ii,J80Eq1MZkqPPX5YkPE@B@iXPE52j7:vBjE7:: * ii:7MSqkS0PvLv7rrii0@L.Z1iLr::ir:rO,vi:: * ii::EZXPSkquLvii:iF@N:.,BUi7ri,::UY;r::: * i::.2ONXqkPXS5FUUEOPP;..iSPXkjLYLLrr:::, * :::,iMXNP0NPLriiLGZ@BB1P87;JuL7r:7ri:::, * :::,.UGqNX0EZF2uUjUuULr:::,:7uuvv77::::. * ::::..5OXqXNJ50NSY;i:.,,,:i77Yvr;v;,,::. * :::,:.jOEPqPJiqBMMMO8NqP0SYLJriirv:.:,:. * ,:,,,.,Zq0P0X7vPFqF1ujLv7r:irrr7j7.,,::. * ,,,....0qk0080v75ujLLv7ri:i:rvj2J...,,,. * ......8@UXqZEMNvJjr;ii::,:::7uuv...,.,,. * .....B@BOvX88GMGk52vririiirJS1i.......,. * .JEMB@B@BMvL0MOMMMO8PE8GPqSk2L:......... * @B@@@B@M@B@L:7PGBOO8MOMOEP0Xri@B@Mk7,... * B@B@BBMBB@B@0::rJP8MO0uvvu7..,B@B@B@B@Z7 * MMBM@BBB@B@B@Br:i,..:Lur:....7@OMMBM@B@@ * 8OOMMMOMMMMBB@B:....,PZENNi..JBOZ8GMOOOO */ ç¥žæ³¨é‡Š 1234/** * è¿™ä¸ªå…¬å¸æ²¡æœ‰å¹´ç»ˆå¥–çš„,å…„å¼Ÿåˆ«æŒ‡æœ›äº†,ä¹Ÿåˆ«æ¥äº†,æˆ‘å‡†å¤‡è¾žèŒäº† * å¦å¤–è¿™ä¸ªé¡¹ç›®æœ‰å¾ˆå¤š*Bug* ä½ åšæŒä¸äº†å¤šä¹…çš„,æ‹œæ‹œ! */ 123456789101112131415161718192021222324252627282930313233/** * 1åªç¾Š == one sheep * 2åªç¾Š == two sheeps * 3åªç¾Š == three sheeps * 4åªç¾Š == four sheeps * 5åªç¾Š == five sheeps * 6åªç¾Š == six sheeps * 7åªç¾Š == seven sheeps * 8åªç¾Š == eight sheeps * 9åªç¾Š == nine sheeps * 10åªç¾Š == ten sheeps * 11åªç¾Š == eleven sheeps * 12åªç¾Š == twelve sheeps * 13åªç¾Š == thirteen sheeps * 14åªç¾Š == fourteen sheeps * 15åªç¾Š == fifteen sheeps * 16åªç¾Š == sixteen sheeps * 17åªç¾Š == seventeen sheeps * 18åªç¾Š == eighteen sheeps * 19åªç¾Š == nineteen sheeps * 20åªç¾Š == twenty sheeps * 21åªç¾Š == twenty one sheeps * 22åªç¾Š == twenty two sheeps * 23åªç¾Š == twenty three sheeps * 24åªç¾Š == twenty four sheeps * 25åªç¾Š == twenty five sheeps * 26åªç¾Š == twenty six sheeps * 27åªç¾Š == twenty seven sheeps * 28åªç¾Š == twenty eight sheeps * 29åªç¾Š == twenty nine sheeps * 30åªç¾Š == thirty sheeps * çŽ°åœ¨çžŒç¡äº†å§ï¼Œå¥½äº†ï¼Œä¸è¦å†æ”¹ä¸‹é¢çš„ä»£ç äº†ï¼Œç¡è§‰å’¯~~ */ 12345678910111213/** * You may think you know what the following code does. * But you dont. Trust me. * Fiddle with it, and youll spend many a sleepless * night cursing the moment you thought youd be clever * enough to "optimize" the code below. * Now close this file and go play with something else. *//** * ä½ å¯èƒ½ä¼šè®¤ä¸ºä½ è¯»å¾—æ‡‚ä»¥ä¸‹çš„ä»£ç ã€‚ä½†æ˜¯ä½ ä¸ä¼šæ‡‚çš„ï¼Œç›¸ä¿¡æˆ‘å§ã€‚ * è¦æ˜¯ä½ å°è¯•çŽ©å¼„è¿™æ®µä»£ç çš„è¯ï¼Œä½ å°†ä¼šåœ¨æ— å°½çš„é€šå®µä¸­ä¸æ–­åœ°å’’éª‚è‡ªå·±ä¸ºä»€ä¹ˆä¼šè®¤ä¸ºè‡ªå·±èªæ˜Žåˆ°å¯ä»¥ä¼˜åŒ–è¿™æ®µä»£ç ã€‚ * çŽ°åœ¨è¯·å…³é—­è¿™ä¸ªæ–‡ä»¶åŽ»çŽ©ç‚¹åˆ«çš„å§ã€‚ */ 12345678/** * somedev1 - 6/7/02 Adding temporary tracking of Login screen * somedev2 - 5/22/07 Temporary my ass *//** * ä¸€äº›ä¿®æ”¹1 - 2002/6/7 å¢žåŠ ä¸´æ—¶çš„è·Ÿè¸ªç™»å½•ç•Œé¢ * ä¸€äº›ä¿®æ”¹2 - 2007/5/22 æˆ‘ä¸´æ—¶çš„çŠ¯å‚» */ 1234567/** * ç¨‹åºå‘˜1ï¼ˆäºŽ2010å¹´6æœˆ7æ—¥ï¼‰ï¼šåœ¨è¿™ä¸ªå‘ä¸´æ—¶åŠ å…¥ä¸€äº›è°ƒæ–™ * ç¨‹åºå‘˜2ï¼ˆäºŽ2011å¹´5æœˆ22æ—¥ï¼‰ï¼šä¸´ä½ ä¸ªå±å•Š * ç¨‹åºå‘˜3ï¼ˆäºŽ2012å¹´7æœˆ23æ—¥ï¼‰ï¼šæ¥¼ä¸Šéƒ½æ˜¯ç‹—å±Žï¼Œé‰´å®šå®Œæ¯• * ç¨‹åºå‘˜4ï¼ˆäºŽ2013å¹´8æœˆ2æ—¥ï¼‰ï¼šfuck æ¥¼ä¸Šï¼Œä¸‰å¹´äº†ï¼Œè¿™å‘è¿˜åœ¨ï¼ï¼ï¼ * ç¨‹åºå‘˜5ï¼ˆäºŽ2014å¹´8æœˆ21æ—¥ï¼‰ï¼šå“ˆå“ˆå“ˆï¼Œè¿™å‘å±…ç„¶å‘äº†è¿™ä¹ˆå¤šäººï¼Œå¹¸å¥½æˆ‘ä¹Ÿä¸ç”¨å¡«äº†ï¼Œç³»ç»Ÿç»ˆæ­¢è¿è¡Œäº†ï¼Œyou're died */ 1234567891011121314/** * For the brave souls who get this far: You are the chosen ones, * the valiant knights of programming who toil away, without rest, * fixing our most awful code. To you, true saviors, kings of men, * I say this: never gonna give you up, never gonna let you down, * never gonna run around and desert you. Never gonna make you cry, * never gonna say goodbye. Never gonna tell a lie and hurt you. *//** * è‡´ç»ˆäºŽæ¥åˆ°è¿™é‡Œçš„å‹‡æ•¢çš„äººï¼š * ä½ æ˜¯è¢«ä¸Šå¸é€‰ä¸­çš„äººï¼Œæ˜¯è‹±å‹‡çš„ã€ä¸æ•Œè¾›è‹¦çš„ã€ä¸çœ ä¸ä¼‘çš„æ¥ä¿®æ”¹æˆ‘ä»¬è¿™æœ€æ£˜æ‰‹çš„ä»£ç çš„ç¼–ç¨‹éª‘å£«ã€‚ * ä½ ï¼Œæˆ‘ä»¬çš„æ•‘ä¸–ä¸»ï¼Œäººä¸­ä¹‹é¾™ï¼Œæˆ‘è¦å¯¹ä½ è¯´ï¼šæ°¸è¿œä¸è¦æ”¾å¼ƒï¼Œæ°¸è¿œä¸è¦å¯¹è‡ªå·±å¤±æœ›ï¼Œæ°¸è¿œä¸è¦é€ƒèµ°ï¼Œè¾œè´Ÿäº†è‡ªå·±ï¼Œ * æ°¸è¿œä¸è¦å“­å•¼ï¼Œæ°¸è¿œä¸è¦è¯´å†è§ï¼Œæ°¸è¿œä¸è¦è¯´è°Žæ¥ä¼¤å®³è‡ªå·±ã€‚ */ 123456789101112131415161718/** * Dear maintainer: * * Once you are done trying to 'optimize' this routine, * and have realized what a terrible mistake that was, * please increment the following counter as a warning * to the next guy: * * total_hours_wasted_here = 42 *//** * äº²çˆ±çš„ç»´æŠ¤è€…ï¼š * * å¦‚æžœä½ å°è¯•äº†å¯¹è¿™æ®µç¨‹åºè¿›è¡Œ'ä¼˜åŒ–' * ä¸‹é¢è¿™ä¸ªè®¡æ•°å™¨çš„ä¸ªæ•°ç”¨æ¥å¯¹åŽæ¥äººè¿›è¡Œè­¦å‘Š * * æµªè´¹åœ¨è¿™é‡Œçš„æ€»æ—¶é—´ = 42h */ 12Exception up = new Exception("Something is really wrong.");throw up; //ha ha 12345678/** * When I wrote this, only God and I understood what I was doing * Now, God only knows *//*** å†™è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œåªæœ‰ä¸Šå¸å’Œæˆ‘çŸ¥é“å®ƒæ˜¯å¹²å˜›çš„* çŽ°åœ¨ï¼Œåªæœ‰ä¸Šå¸çŸ¥é“*/ 1stop(); // Hammertime! 1// Autogenerated, do not edit. All changes will be undone. 12// sometimes I believe compiler ignores all my comments// æœ‰æ—¶å€™æˆ‘ç›¸ä¿¡ç¼–è¯‘å™¨å¿½ç•¥äº†æˆ‘æ‰€æœ‰çš„æ³¨é‡Š 12345/** * I dedicate all this code, all my work, to my wife, Darlene, who will * have to support me and our three children and the dog once it gets * released into the public. */ 12// drunk, fix later// æœ‰ç‚¹æ™•äº†ï¼Œä»¥åŽå†ä¿®æ”¹ 12// Magic. Do not touch.// éº»é¸¡ã€‚å‹¿åŠ¨ã€‚ 1#define TRUE FALSE// Happy debugging suckers 1// I'm sorry. 1return 1; # returns 1 123456/** * Always returns true. */public boolean isAvailable() &#123; return false;&#125; 12&lt;!-- Here be dragons --&gt;&lt;!-- å‰æ–¹é«˜èƒ½ --&gt; 12double penetration; // ouch// è‡ªè¡Œäº†è§£ï¼Œä¸æ–¹ä¾¿è§£é‡Š 123456// To understand recursion, see the bottom of this fileAt the bottom of the file:// To understand recursion, see the top of this file// æƒ³è¦æ˜Žç™½é€’å½’é¡»çœ‹æ–‡ä»¶æœ«å°¾åˆ°äº†æ–‡æœ«// æƒ³è¦æ˜Žç™½é€’å½’é¡»çœ‹æ–‡ä»¶é¡¶éƒ¨ 1/* Please work */ 12long long ago; /* in a galaxy far far away */// å¾ˆä¹…å¾ˆä¹…ä»¥å‰ åœ¨ä¸€ä¸ªé¥è¿œçš„é“¶æ²³ä¸­ï¼ˆå‡ºè‡ªæ˜Ÿçƒå¤§æˆ˜ï¼‰ 1234// This code sucks, you know it and I know it. // Move on and call me an idiot later.// ä½ æˆ‘éƒ½çŸ¥é“è¿™ä»£ç å¾ˆçƒ‚// å…ˆä¸è¦éª‚æˆ‘2Bäº†ï¼Œè¯·å…ˆç»§ç»­å¾€ä¸‹çœ‹ 12// I am not sure why this works but it fixes the problem.// è™½ç„¶æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™æ ·ç®¡ç”¨ï¼Œä½†å®ƒå´æ˜¯ä¿®å¤äº†é—®é¢˜ 12// If this comment is removed the program will blow up// å¦‚æžœåˆ äº†æ­¤å¤„æ³¨é‡Šç¨‹åºå°±ç‚¸äº† 12// This function has been here since 1987. DON'T FXXKING TOUCH IT// è¿™å‡½æ•°1987å¹´å°±è¿™åœ¨äº†ï¼Œåˆ«ä»–å¨˜åŠ¨å®ƒ 12// if i ever see this again i'm going to start bringing guns to work// å¦‚æžœè¦æ˜¯å†è®©æˆ‘çœ‹è§è¿™æ ·çš„ä»£ç ï¼Œä¹Ÿè®¸æˆ‘ä¼šå¸¦ç€ä¸€æŠŠæžªæ¥ä¸Šç­ 1234// no comments for you// it was hard to write// so it should be hard to read// éš¾å†™çš„ä»£ç ï¼Œè‚¯å®šå¾ˆéš¾è¯»ã€‚å› æ­¤ï¼Œæˆ‘æ²¡æœ‰æ³¨é‡Šç•™ç»™ä½ ã€‚ 12// I will give you two of my seventy-two virgins if you can fix this.// è¦æ˜¯ä½ èƒ½ä¿®æ­£è¿™ä¸ªé—®é¢˜çš„è¯ï¼Œæˆ‘ä¼šåœ¨æˆ‘çš„ä¸ƒåäºŒä¸ªå¤„å¥³ä¸­æŒ‘ä¸¤ä¸ªé€ä½  123// I am not responsible of this code.// They made me write it, against my will.// ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä¸è´Ÿè´£ã€‚å› ä¸ºæ˜¯ä»–ä»¬é€¼æˆ‘å†™çš„ï¼Œè¿èƒŒäº†æˆ‘çš„æ„æ„¿ã€‚ 12/* You are not expected to understand this *//* ä½ ç»ä¸ä¼šæ˜Žç™½çš„ */ 12// I have to find a better job// çœ‹æ¥æˆ‘éœ€è¦æ‰¾ä»½æ›´å¥½çš„å·¥ä½œäº† 123/** * è¿™ä¸ªç±»æ˜¯Objectçš„å­ç±» */]]></content>
      <categories>
        <category>Android</category>
        <category>æ³¨é‡Šæ¨¡æ¿</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>æ³¨é‡Šæ¨¡æ¿</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»£ç é‡æž„ï¼Œå¦‚ä½•å·§å¦™è®¾è®¡ï¼Ÿ]]></title>
    <url>%2Fposts%2Fda9c2260.html</url>
    <content type="text"><![CDATA[é‡æž„ä¸æ­¢æ˜¯ä»£ç æ•´ç†ï¼Œå®ƒæä¾›äº†ä¸€ç§é«˜æ•ˆä¸”å—æŽ§çš„ä»£ç æ•´ç†æŠ€æœ¯ ï¼ˆä¸€ï¼‰é‡æž„åŽŸåˆ™1ã€ä½•è°“é‡æž„å¯¹è½¯ä»¶å†…éƒ¨ç»“æž„çš„ä¸€ç§è°ƒæ•´ï¼Œç›®çš„æ˜¯åœ¨ä¸æ”¹å˜è½¯ä»¶å¯è§‚å¯Ÿè¡Œä¸ºçš„å‰æä¸‹ï¼Œæé«˜å…¶å¯ç†è§£æ€§ï¼Œé™ä½Žå…¶ä¿®æ”¹æˆæœ¬ã€‚ å¦ä¸€ç§è§£é‡Šæ˜¯ï¼šä½¿ç”¨ä¸€ç³»åˆ—é‡æž„æ‰‹æ³•ï¼Œåœ¨ä¸æ”¹å˜è½¯ä»¶å¯è§‚å¯Ÿè¡Œä¸ºçš„å‰æä¸‹ï¼Œè°ƒæ•´å…¶ç»“æž„ã€‚ 2ã€ä¸ºä½•é‡æž„æ”¹è¿›è½¯ä»¶è®¾è®¡ï¼šå¦‚æžœæ²¡æœ‰é‡æž„ï¼Œç¨‹åºçš„è®¾è®¡ä¼šé€æ¸å˜è´¨ï¼Œé‡æž„å¾ˆåƒæ˜¯åœ¨æ•´ç†ä»£ç ï¼Œä½ æ‰€åšçš„å°±æ˜¯è®©æ‰€æœ‰çš„ä¸œè¥¿å›žåˆ°åº”å¤„çš„ä½ç½®ä¸Šã€‚å¸®åŠ©æ‰¾åˆ°bugï¼šå¯¹ä»£ç è¿›è¡Œé‡æž„ï¼Œå¯ä»¥æ·±å…¥ç†è§£ä»£ç çš„ä½œä¸ºï¼Œåœ¨æžæ¸…æ¥šç¨‹åºç»“æž„çš„åŒæ—¶ï¼Œæƒ³ä¸æŠŠbugæªå‡ºæ¥éƒ½éš¾ã€‚æé«˜ç¼–ç¨‹é€Ÿåº¦ï¼šè‰¯å¥½çš„è®¾è®¡æ˜¯å¿«é€Ÿå¼€å‘çš„æ ¹æœ¬ï¼Œæ”¹å–„è®¾è®¡ã€æé«˜å¯è¯»æ€§ï¼Œå‡å°‘é”™è¯¯ï¼Œè¿™äº›éƒ½æ˜¯æé«˜è´¨é‡ã€‚ 3ã€ä½•æ—¶é‡æž„ä»»ä½•æƒ…å†µä¸‹æˆ‘éƒ½åå¯¹ä¸“é—¨æ‹¨å‡ºæ—¶é—´è¿›è¡Œé‡æž„ã€‚é‡æž„æœ¬æ¥å°±ä¸æ˜¯ä¸€ä»¶åº”è¯¥ç‰¹åˆ«æ‹¨å‡ºæ—¶é—´åšçš„äº‹æƒ…ï¼Œé‡æž„åº”è¯¥éšæ—¶éšåœ°çš„è¿›è¡Œã€‚ ä¸‰æ¬¡æ³•åˆ™ ç¬¬ä¸€æ¬¡åšæŸä»¶äº‹æƒ…æ˜¯åªç®¡åŽ»åšï¼›ç¬¬äºŒæ¬¡åšç±»ä¼¼çš„äº‹æƒ…ä¼šäº§ç”Ÿåæ„Ÿï¼›ç¬¬ä¸‰æ¬¡å†åšç±»ä¼¼çš„äº‹ï¼Œä½ å°±åº”è¯¥é‡æž„ æœ€å¸¸è§çš„é‡æž„æ—¶æœºæ˜¯æƒ³ç»™è½¯ä»¶æ·»åŠ æ–°ç‰¹æ€§çš„æ—¶å€™ï¼› é‡æž„çš„å¦ä¸ªä¸€åŽŸåŠ¨åŠ›æ˜¯ï¼šä»£ç çš„è®¾è®¡æ— æ³•å¸®åŠ©æˆ‘è½»æ¾çš„æ·»åŠ æ‰€éœ€è¦çš„ç‰¹æ€§ ä¿®æ”¹é”™è¯¯çš„æ—¶å€™ï¼Œreviewä»£ç çš„æ—¶é‡æž„ é—´æŽ¥å±‚å’Œé‡æž„ è®¡ç®—æœºç§‘å­¦æ˜¯è¿™æ ·ä¸€é—¨ç§‘å­¦ï¼šå®ƒç›¸ä¿¡æ‰€æœ‰çš„é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¢žåŠ ä¸€ä¸ªé—´æŽ¥å±‚æ¥è§£å†³ã€‚ å¤§å¤šæ•°é‡æž„éƒ½ä¸ºç¨‹åºå¼•å…¥äº†æ›´å¤šçš„é—´æŽ¥å±‚ï¼Œé‡æž„å¾€å¾€æŠŠå¤§åž‹çš„å¯¹è±¡æ‹†æˆå¤šä¸ªå°åž‹çš„å¯¹è±¡ï¼ŒæŠŠå¤§åž‹çš„å‡½æ•°æ‹†æˆå¤šä¸ªå°åž‹çš„å‡½æ•°ã€‚ä½†æ˜¯ï¼Œé—´æŽ¥å±‚æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚æ¯æ¬¡æŠŠä¸€ä¸ªä¸œè¥¿åˆ†æˆä¸¤ä»½ï¼Œä½ å°±éœ€è¦å¤šç®¡ç†ä¸€ä¸ªä¸œè¥¿ã€‚å¦‚æžœæŸä¸ªå¯¹è±¡å§”æ‰˜å¦ä¸€ä¸ªå¯¹è±¡ï¼ŒåŽè€…åˆå§”æ‰˜å¦ä¸€ä¸ªå¯¹è±¡ï¼Œç¨‹åºä¼šæ„ˆåŠ éš¾ä»¥é˜…è¯»ã€‚ ä½•æ—¶ä¸è¯¥é‡æž„ï¼šæœ‰æ—¶å€™æ—¢æœ‰ä»£ç å®žåœ¨å¤ªæ··ä¹±ï¼Œé‡æž„å®ƒè¿˜ä¸å¦‚é‡æ–°å†™ä¸€ä¸ªæ¥å¾—ç®€å•ã€‚ é‡å†™è€Œéžé‡æž„çš„ä¸€ä¸ªæ¸…æ¥šè®¯å·æ˜¯ï¼šçŽ°æœ‰ä»£ç æ ¹æœ¬ä¸èƒ½æ­£å¸¸è¿ä½œã€‚ ï¼ˆäºŒï¼‰ä»£ç çš„åå‘³é“1ã€é‡å¤ä»£ç å¦‚æžœä½ åœ¨ä¸€ä¸ªä»¥ä¸Šçš„åœ°ç‚¹çœ‹åˆ°ç›¸åŒçš„ç¨‹åºç»“æž„ï¼Œé‚£ä¹ˆå¯ä»¥è‚¯å®šï¼šè®¾æ³•å°†å®ƒä»¬åˆäºŒä¸ºä¸€ï¼Œç¨‹åºä¼šå˜å¾—æ›´å¥½ ã€‚ åŒä¸€ä¸ªç±»ä¸­æœ‰ç›¸åŒçš„è¡¨è¾¾å¼ï¼šæç‚¼å‡ºé‡å¤çš„ä»£ç ï¼Œç„¶åŽè®©ä¸¤ä¸ªåœ°æ–¹éƒ½è°ƒç”¨è¢«æç‚¼å‡ºæ¥çš„é‚£ä¸€æ®µä»£ç ï¼› ä¸¤ä¸ªäº’ä¸ºå…„å¼Ÿçš„å­ç±»å†…å«æœ‰ç›¸åŒçš„è¡¨è¾¾å¼ï¼šæç‚¼å‡ºç›¸åŒä»£ç ï¼Œå°†å®ƒæŽ¨å…¥è¶…ç±»å†…ï¼› ä¸¤ä¸ªæ¯«ä¸ç›¸å¹²çš„ç±»ä¸­å‡ºçŽ°ï¼šå°†é‡å¤çš„ä»£ç æç‚¼åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ç±»ä¸­ã€‚ 2ã€è¿‡é•¿çš„ç±»æ‹¥æœ‰çŸ­å‡½æ•°çš„å¯¹è±¡æ´»å¾—æ¯”è¾ƒå¥½ã€æ¯”è¾ƒé•¿ã€‚ é—´æŽ¥å±‚æ‰€èƒ½å¸¦æ¥çš„å…¨éƒ¨åˆ©ç›Šâ€”â€”è§£é‡Šèƒ½åŠ›ã€å…±äº«èƒ½åŠ›ã€é€‰æ‹©èƒ½åŠ›â€”â€”éƒ½æ˜¯ç”±å°åž‹å‡½æ•°æ”¯æŒçš„ã€‚ æ¯å½“æ„Ÿè§‰éœ€è¦ä»¥æ³¨é‡Šæ¥è¯´æ˜Žç‚¹ä»€ä¹ˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±æŠŠéœ€è¦è¯´æ˜Žçš„ä¸œè¥¿å†™è¿›ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ä¸­ã€‚ å¦‚ä½•ç¡®å®šæç‚¼å“ªä¸€æ®µä»£ç ï¼Ÿå¯»æ‰¾æ³¨é‡Šæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æŠ€å·§ã€‚å®ƒä»¬é€šå¸¸èƒ½æŒ‡å‡ºä»£ç ç”¨é€”å’Œå®žçŽ°æ‰‹æ³•ä¹‹é—´çš„è¯­ä¹‰è·ç¦»ã€‚å¦‚æžœä»£ç å‰æ–¹æœ‰ä¸€è¡Œæ³¨é‡Šï¼Œå°±æ˜¯æé†’ä½ ï¼šå¯ä»¥å°†è¿™æ®µä»£ç æ›¿æ¢æˆä¸€ä¸ªå‡½æ•°ã€‚ æ¡ä»¶è¡¨è¾¾å¼å’Œå¾ªçŽ¯å¸¸å¸¸ä¹Ÿæ˜¯æç‚¼çš„ä¿¡å·ã€‚ 3ã€è¿‡å¤§çš„ç±»å¦‚æžœæƒ³åˆ©ç”¨å•ä¸ªç±»åšå¤ªå¤šçš„äº‹æƒ…ï¼Œå…¶å†…å¾€å¾€å°±ä¼šå‡ºçŽ°å¤ªå¤šå®žåŠ›å˜é‡ã€‚ç±»å†…å¦‚æžœæœ‰å¤ªå¤šä»£ç ï¼Œä¹Ÿæ˜¯ä»£ç é‡å¤ã€æ··ä¹±ç—…æœ€ç»ˆèµ°å‘æ­»äº¡çš„æºå¤´ã€‚ 4ã€è¿‡é•¿å‚æ•°åˆ—å¤ªé•¿çš„å‚æ•°åˆ—éš¾ä»¥ç†è§£ï¼Œå¤ªå¤šçš„å‚æ•°ä¼šé€ æˆå‰åŽä¸ä¸€è‡´ã€ä¸å®¹æ˜“ä½¿ç”¨ï¼Œè€Œä¸”ä¸€æ—¦ä½ éœ€è¦æ›´å¤šæ•°æ®ï¼Œå°±ä¸å¾—ä¸ä¿®æ”¹å®ƒã€‚å¦‚æžœå°†å¯¹è±¡ä¼ é€’ç»™å‡½æ•°ï¼Œå¤§å¤šæ•°ä¿®æ”¹éƒ½å°†æ²¡æœ‰å¿…è¦ã€‚ 5ã€å‘æ•£å¼å˜åŒ–å¦‚æžœæŸä¸ªç±»ç»å¸¸å› ä¸ºä¸åŒçš„åŽŸå› åœ¨ä¸åŒçš„æ–¹å‘ä¸Šå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¹Ÿè®¸å°†è¿™ä¸ªå¯¹è±¡åˆ†æˆä¸¤ä¸ªä¼šæ›´å¥½ï¼Œè¿™ä¹ˆä¸€æ¥æ¯ä¸ªå¯¹è±¡å°±å¯ä»¥åªå› ä¸ºä¸€ç§å˜åŒ–è€Œéœ€è¦ä¿®æ”¹ã€‚ 6ã€æ•£å¼¹å¼ä¿®æ”¹å¦‚æžœæ²¡é‡åˆ°æŸç§å˜åŒ–ï¼Œä½ éƒ½å¿…é¡»åœ¨è®¸å¤šä¸åŒçš„ç±»å†…åšå‡ºè®¸å¤šå°ä¿®æ”¹ï¼Œä½ æ‰€é¢ä¸´çš„åå‘³é“å°±æ˜¯æ•£å¼¹å¼ä¿®æ”¹ã€‚å¦‚æžœéœ€è¦ä¿®æ”¹çš„ä»£ç æ•£å¸ƒå››å¤„ï¼Œä½ ä¸ä½†å¾ˆéš¾æ‰¾åˆ°å®ƒä»¬ï¼Œä¹Ÿå¾ˆå®¹æ˜“å¿˜è®°æŸä¸ªé‡è¦çš„ä¿®æ”¹ã€‚ æŠŠæ‰€æœ‰éœ€è¦ä¿®æ”¹çš„ä»£ç æ”¾è¿›åŒä¸€ä¸ªç±»ä¸­ï¼Œå¦‚æžœçœ¼ä¸‹æ²¡æœ‰åˆé€‚çš„ç±»å¯ä»¥å®‰ç½®è¿™äº›ä»£ç å°±åˆ›é€ ä¸€ä¸ªã€‚ 7ã€ä¾æ‹æƒ…ç»“å¯¹è±¡æŠ€æœ¯çš„è¦ç‚¹åœ¨äºŽï¼šå°†æ•°æ®å’Œå¯¹æ•°æ®çš„æ“ä½œè¡Œä¸ºåŒ…è£…åœ¨ä¸€èµ·.æœ‰ä¸€ç§ç»å…¸çš„æ°”å‘³æ˜¯ï¼šå‡½æ•°å¯¹æŸä¸ªç±»çš„å…´è¶£é«˜è¿‡å¯¹è‡ªå·±æ‰€å¤„ç±»çš„å…´è¶£ã€‚æŸä¸ªå‡½æ•°ä¸ºäº†è®¡ç®—æŸä¸ªå€¼ï¼Œä»Žå¦ä¸€ä¸ªå¯¹è±¡é‚£è°ƒç”¨å‡ ä¹ŽåŠæ‰“çš„å–å€¼å‡½æ•°ã€‚ ä¸€ä¸ªå‡½æ•°å¾€å¾€ä¼šç”¨åˆ°å‡ ä¸ªç±»çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆå®ƒè¯¥ç½®äºŽä½•å¤„ï¼Ÿæˆ‘ä»¬çš„åŽŸåˆ™æ˜¯ï¼šåˆ¤æ–­å“ªä¸ªç±»æ‹¥æœ‰æœ€å¤§è¢«æ­¤å‡½æ•°ä½¿ç”¨çš„æ•°æ®ï¼Œç„¶åŽå°±æŠŠè¿™ä¸ªå‡½æ•°å’Œé‚£äº›æ•°æ®æ”¾åœ¨ä¸€èµ·ã€‚ 8ã€æ•°æ®æ³¥å›¢å¾ˆå¤šåœ°æ–¹çœ‹åˆ°ç›¸åŒçš„ä¸‰å››é¡¹æ•°æ®ä¸€èµ·å‡ºçŽ°ã€‚è¿™äº›æ€»æ˜¯ç»‘åœ¨ä¸€èµ·å‡ºçŽ°çš„æ•°æ®åº”è¯¥æ‹¥æœ‰å±žäºŽä»–ä»¬è‡ªå·±çš„å¯¹è±¡ã€‚ é¦–å…ˆæ‰¾åˆ°è¿™äº›æ•°æ®ä»¥å­—æ®µå½¢å¼å‡ºçŽ°çš„åœ°æ–¹ï¼Œå°†å®ƒä»¬æç‚¼åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å¯¹è±¡ä¸­ã€‚è¿™ä¹ˆåšçš„ç›´æŽ¥å¥½å¤„æ˜¯å¯ä»¥å°†å¾ˆå¤šå‚æ•°åˆ—ç¼©çŸ­ç®€åŒ–å‡½æ•°è°ƒç”¨ã€‚ 9ã€åŸºæœ¬ç±»åž‹åæ‰§å¯¹è±¡çš„ä¸€ä¸ªæžå¤§ä»·å€¼åœ¨äºŽï¼šå®ƒä»¬æ¨¡ç³Šäº†æ¨ªæ—¦ä¸ŽåŸºæœ¬æ•°æ®å’Œä½“ç§¯è¾ƒå¤§çš„ç±»ä¹‹é—´çš„ç•Œé™ å¯¹è±¡æŠ€æœ¯çš„æ–°æ‰‹é€šå¸¸ä¸æ„¿æ„åœ¨å°ä»»åŠ¡ä¸Šè¿ç”¨å°å¯¹è±¡â€”â€”ç»“åˆæ•°å€¼å’Œæ¯”é‡çš„moneyç±»ã€æœ‰ä¸€ä¸ªèµ·å§‹å€¼å’Œä¸€ä¸ªç»“æŸå€¼ç»„æˆçš„rangeç±»ã€‚å°†åŽŸæœ¬å•ç‹¬å­˜åœ¨çš„æ•°å€¼æ›¿æ¢æˆå¯¹è±¡ï¼Œä»Žè€Œèµ°å‡ºä¼ ç»Ÿçš„æ´žçªŸï¼Œè¿›å…¥ç‚™æ‰‹å¯çƒ­çš„å¯¹è±¡ä¸–ç•Œã€‚ 10ã€switchæƒŠæ‚šçŽ°èº«é¢å‘å¯¹è±¡çš„ä¸€ä¸ªæœ€æ˜Žæ˜¾çš„ç‰¹å¾æ˜¯ï¼šå°‘ç”¨switchè¯­å¥ä¸€çœ‹åˆ°switchè¯­å¥ï¼Œå°±åº”è¯¥è€ƒè™‘ä»¥å¤šæ€æ¥æ›¿æ¢å®ƒã€‚ å¦‚æžœåªæ˜¯åœ¨å•ä¸€å‡½æ•°ä¸­æœ‰äº›é€‰æ‹©å®žä¾‹ï¼Œä¸”å¹¶ä¸æƒ³æ”¹åŠ¨å®ƒä»¬ï¼Œé‚£ä¹ˆå¤šæ€å°±æœ‰ç‚¹æ€é¸¡ç”¨ç‰›åˆ€äº†ã€‚ 11ã€å¹³è¡Œé›†æˆä½“ç³»æ¯å½“ä½ ä¸ºæŸä¸ªç±»å¢žåŠ ä¸€ä¸ªå­ç±»ï¼Œå¿…é¡»ä¹Ÿä¸ºå¦ä¸€ä¸ªç±»ç›¸åº”å¢žåŠ ä¸€ä¸ªå­ç±»ã€‚æ¶ˆé™¤è¿™ç§é‡å¤æ€§çš„ä¸€èˆ¬ç­–ç•¥æ˜¯ï¼šè®©ä¸€ä¸ªç»§æ‰¿ä½“ç³»çš„å®žä¾‹å¼•ç”¨å¦ä¸€ä¸ªç»§æ‰¿ä½“ç³»çš„å®žä¾‹ã€‚ 12ã€å†—ä½™ç±»æŸä¸ªç±»åŽŸæœ¬å¯¹å¾—èµ·è‡ªå·±çš„èº«ä»·ï¼Œä½†é‡æž„ä½¿å®ƒèº«å½¢ç¼©æ°´ï¼Œä¸å†åšé‚£ä¹ˆå¤šå·¥ä½œï¼Œè¿™ä¸ªæ—¶å€™è¯·è®©è¿™ä¸ªç±»åº„ä¸¥èµ´ä¹‰å§ã€‚ 13ã€å¤¸å¤¸å…¶è°ˆæœªæ¥æ€§ä¼å›¾ä»¥å„ç§å„æ ·çš„é’©å­å’Œç‰¹æ®Šæƒ…å†µæ¥å¤„ç†ä¸€äº›éžå¿…è¦çš„äº‹æƒ…ï¼Œè¿™ç§æ€€å‘³é“å°±å‡ºçŽ°äº†ã€‚å¦‚æžœç”¨åˆ°äº†é‚£å°±å€¼å¾—åŽ»åšï¼Œå¦‚æžœç”¨ä¸åˆ°é‚£å°±ä¸å€¼å¾—ï¼Œåªä¼šæŒ¡ä½ çš„è·¯ï¼Œæ‰€ä»¥æŠŠå®ƒæŒªå¼€å§ã€‚ å¦‚æžœä½ çš„æŸä¸ªæŠ½è±¡ç±»å…¶å®žæ²¡æœ‰èµ·åˆ°å¤ªå¤§çš„ä½œç”¨ï¼Œå‡½æ•°ä¸Šçš„æŸäº›å‚æ•°æœªè¢«ä½¿ç”¨â€¦å¯ä»¥ç§»é™¤å®ƒä»¬äº†ã€‚ 14ã€ä»¤äººè¿·æƒ‘çš„æš‚æ—¶å­—æ®µæŸä¸ªå®žä¾‹å˜é‡ä»…ä¸ºæŸç§ç‰¹å®šçš„æƒ…å†µè€Œè®¾ã€‚è¿™æ ·çš„ä»£ç è®©äººä¸æ˜“ç†è§£ã€‚åœ¨å˜é‡æœªè¢«ä½¿ç”¨çš„æƒ…å†µä¸‹çŒœæµ‹å½“åˆå…¶è®¾ç½®ç›®çš„ï¼Œä¼šè®©ä½ å‘ç–¯çš„ã€‚ 15ã€è¿‡åº¦è€¦åˆæ¶ˆæ¯é“¾å¦‚æžœä½ çœ‹åˆ°ç”¨æˆ·å‘ä¸€ä¸ªå¯¹è±¡è¯·æ±‚å¦ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åŽå†å‘åŽè€…è¯·æ±‚å¦ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åŽå†è¯·æ±‚å¦ä¸ªä¸€å¯¹è±¡â€¦â€¦..è¿™å°±æ˜¯æ¶ˆæ¯é“¾ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼ï¼Œæ„å‘³ç€å®¢æˆ·ä»£ç å°†ä¸ŽæŸ¥æ‰¾è¿‡ç¨‹ä¸­çš„å¯¼èˆªç»“æž„ç´§å¯†è€¦åˆã€‚ä¸€æ—¦å¯¹è±¡é—´çš„å…³ç³»å‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œå®¢æˆ·ç«¯å°±ä¸å¾—ä¸åšå‡ºç›¸åº”çš„ä¿®æ”¹ã€‚ 16ã€ä¸­é—´äººå°è£…å¾€å¾€ä¼´éšç€å§”æ‰˜ã€‚ä½ ä¹Ÿè®¸ä¼šçœ‹åˆ°æŸä¸ªç±»æŽ¥å£æœ‰ä¸€åŠçš„å‡½æ•°éƒ½å§”æ‰˜ç»™å…¶ä»–ç±»ï¼Œè¿™æ ·å°±æ˜¯è¿‡åº¦è¿ç”¨ã€‚ 17ã€ç‹Žæ˜µå…³ç³»æœ‰æ—¶ä¼šçœ‹åˆ°ä¸¤ä¸ªç±»è¿‡äºŽäº²å¯†ï¼Œè¯è´¹å¤ªå¤šçš„æ—¶é—´åŽ»æŽ¢ç©¶å½¼æ­¤çš„privateæˆåˆ†ã€‚è¿‡åˆ†ç‹Žæ˜µçš„ç±»å¿…é¡»æ‹†æ•£ï¼Œå¸®å®ƒä»¬åˆ’æ¸…ç•Œçº¿ï¼Œä»Žè€Œå‡å°‘ç‹Žæ˜µè¡Œå¾„ã€‚ç»§æ‰¿å¾€å¾€é€ æˆè¿‡åº¦äº²å¯†ï¼Œå› ä¸ºå­ç±»å¯¹è¶…ç±»çš„äº†è§£æ€»æ˜¯è¶…è¿‡åŽè€…çš„ä¸»è§‚æ„¿æœ›ã€‚å¦‚æžœä½ è§‰å¾—è¯¥è®©å­©å­ç‹¬ç«‹ç”Ÿæ´»äº†ï¼Œè®©ä»–ç¦»å¼€ç»§æ‰¿ã€‚ 18ã€å¼‚æ›²åŒå·¥çš„ç±»ä¸¤ä¸ªå‡½æ•°åšåŒä¸€ä»¶äº‹ï¼Œå´æœ‰ç€ä¸åŒçš„ç­¾åã€‚ 19ã€ä¸å®Œç¾Žçš„ç±»åº“ç±»åº“å‡½æ•°æž„é€ çš„ä¸å¤Ÿå¥½ï¼Œåˆä¸èƒ½ä¿®æ”¹å®ƒä»¬ï¼š å¦‚æžœåªæƒ³ä¿®æ”¹ç±»çš„ä¸€ä¸¤ä¸ªå‡½æ•°ï¼Œå¯ä»¥å¼•å…¥å¤–åŠ å‡½æ•°ã€‚å¦‚æžœæƒ³è¦æ·»åŠ ä¸€å¤§å †é¢å¤–è¡Œä¸ºï¼Œå»ºç«‹ä¸€ä¸ªæ–°ç±»åŒ…å«è¿™äº›é¢å¤–è¡Œä¸ºï¼Œè®©å…¶æˆä¸ºå­ç±»ã€‚ 20ã€çº¯ç¨šçš„æ•°æ®ç±»çº¯ç¨šçš„æ•°æ®ç±»æ˜¯æŒ‡ï¼šå®ƒä»¬æ‹¥æœ‰ä¸€äº›å­—æ®µï¼Œä»¥åŠç”¨äºŽè®¿é—®ï¼ˆè¯»å†™ï¼‰è¿™äº›å­—æ®µçš„å‡½æ•°ï¼Œé™¤æ­¤ä¹‹å¤–ä¸€æ— é•¿ç‰©ã€‚ å°è£…publicå­—æ®µ; æ°å½“å°è£…å®¹å™¨ç±»å­—æ®µ; ç§»é™¤ä¸åº”ä¿®æ”¹çš„å­—æ®µçš„è®¾ç½®å‡½æ•°; æç‚¼è°ƒç”¨å‡½æ•°ä»¥éšè—å–å€¼/è®¾å€¼å‡½æ•°; 21ã€è¢«æ‹’ç»çš„é—èµ å­ç±»åªè¿ç”¨äº†çˆ¶ç±»çš„ä¸€éƒ¨åˆ†å‡½æ•°å’Œæ•°æ®ã€‚ ä¸ºå­ç±»å»ºç«‹ä¸€ä¸ªå…„å¼Ÿç±»,å°†æ‰€æœ‰ç”¨ä¸åˆ°çš„å­—æ®µ/å‡½æ•°ä¸‹ç§»è‡³å…„å¼Ÿç±»,ä¿è¯è¶…ç±»çš„çº¯ç²¹; 22ã€è¿‡å¤šçš„æ³¨é‡Šæ³¨é‡Šä¹‹æ‰€ä»¥å­˜åœ¨æ˜¯å› ä¸ºä»£ç å¾ˆç³Ÿç³• ã€‚æ³¨é‡Šçš„æœ€é«˜å¢ƒç•Œâ€”â€”ä»£ç å³æ³¨é‡Šã€‚ å½“ä½ æ„Ÿè§‰éœ€è¦æ’°å†™æ³¨é‡Šæ—¶ï¼Œè¯·å…ˆå°è¯•é‡æž„ï¼Œè¯•ç€è®©æ‰€æœ‰çš„æ³¨é‡Šéƒ½å˜å¾—å¤šä½™ã€‚ ï¼ˆä¸‰ï¼‰é‡æ–°ç»„ç»‡å‡½æ•°1ã€æç‚¼å‡½æ•°åŠ¨æœºï¼šçœ‹åˆ°ä¸€ä¸ªè¿‡é•¿çš„å‡½æ•°æˆ–è€…ä¸€æ®µéœ€è¦æ³¨é‡Šæ‰èƒ½è®©äººç†è§£ç”¨é€”çš„ä»£ç ï¼Œå°†è¿™æ®µä»£ç æ”¾ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ä¸­ï¼›åšæ³•ï¼š åˆ›é€ ä¸€ä¸ªæ–°å‡½æ•°ï¼Œæ ¹æ®è¿™ä¸ªå‡½æ•°çš„æ„å›¾æ¥å‘½åå®ƒï¼› åªè¦æ–°å‡½æ•°çš„åç§°èƒ½å¤Ÿä»¥æ›´å¥½çš„æ–¹å¼æ˜­ç¤ºä»£ç æ„å›¾ï¼Œä½ ä¹Ÿåº”è¯¥æç‚¼å®ƒã€‚ä½†å¦‚æžœæƒ³ä¸åˆ°ä¸€ä¸ªæ›´æœ‰æ„ä¹‰çš„åç§°å°±åˆ«åŠ¨ å°†æç‚¼çš„ä»£ç ä»ŽåŽŸå‡½æ•°å¤åˆ¶åˆ°æ–°å»ºçš„ç›®æ ‡å‡½æ•°ä¸­ï¼›å°†è¢«æç‚¼ä»£ç æ®µä¸­éœ€è¦è¯»å–çš„å±€éƒ¨å˜é‡ï¼Œå½“ä½œå‚æ•°ä¼ é€’ç»™ç›®æ ‡å‡½æ•°ï¼›åœ¨æºå‡½æ•°ä¸­ï¼Œå°†è¢«æç‚¼ä»£ç æ®µæ›¿æ¢ä¸ºç›®æ ‡å‡½æ•°è°ƒç”¨ã€‚ 2ã€å†…è”å‡½æ•°ä¸€ä¸ªå‡½æ•°çš„æœ¬ä½“ä¸Žåç§°åŒæ ·æ¸…æ¥šæ˜“æ‡‚ã€‚åœ¨å‡½æ•°è°ƒç”¨ç‚¹æ’å…¥å‡½æ•°æœ¬ä½“ï¼Œç„¶åŽç§»é™¤è¯¥å‡½æ•°ã€‚åŠ¨æœºï¼š ä¸€ç¾¤ç»„ç»‡ä¸ç”šåˆç†çš„å‡½æ•°ã€‚ä½ å¯ä»¥å°†å®ƒä»¬éƒ½å†…è”åˆ°ä¸€ä¸ªå¤§å‡½æ•°ä¸­ï¼Œå†ä»Žä¸­æç‚¼å‡ºç»„ç»‡åˆç†çš„å°åž‹å‡½æ•°ã€‚ä½¿ç”¨çš„å¤ªå¤šçš„é—´æŽ¥å±‚ï¼Œä½¿å¾—ç³»ç»Ÿä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½ä¼¼ä¹Žåªæ˜¯å¯¹å¦ä¸€ä¸ªå‡½æ•°çš„ç®€å•å§”æ‰˜ï¼Œé€ æˆåœ¨å§”æ‰˜åŠ¨ä½œä¹‹é—´æ™•å¤´è½¬å‘ã€‚ åšæ³•ï¼š 1ã€æ£€æŸ¥å‡½æ•°ï¼Œç¡®å®šä¸å…·å¤‡å¤šæ€ï¼›å¦‚æžœå­ç±»ç»§æ‰¿äº†è¿™ä¸ªå‡½æ•°ï¼Œå°±ä¸è¦å°†æ­¤å‡½æ•°å†…è”ï¼Œå› ä¸ºå­ç±»æ— æ³•å¤å†™ä¸€ä¸ªæ ¹æœ¬ä¸å­˜åœ¨çš„å‡½æ•°ã€‚ 2ã€æ‰¾å‡ºè¿™ä¸ªå‡½æ•°çš„æ‰€æœ‰è°ƒç”¨ç‚¹ï¼›3ã€å°†è¿™ä¸ªå‡½æ•°çš„æ‰€æœ‰è°ƒç”¨ç‚¹éƒ½æ›¿æ¢æˆå‡½æ•°æœ¬ä½“ã€‚3ã€å†…è”ä¸´æ—¶å˜é‡æœ‰ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œåªè¢«ä¸€ä¸ªç®€å•çš„è¡¨è¾¾æ˜¯èµ‹å€¼ä¸€æ¬¡ï¼Œè€Œå®ƒå¦¨ç¢äº†å…¶ä»–é‡æž„æ‰‹æ³•ã€‚å°†æ‰€æœ‰å¯¹è¯¥å˜é‡çš„å¼•ç”¨åŠ¨ä½œï¼Œæ›¿æ¢ä¸ºå¯¹å®ƒèµ‹å€¼çš„é‚£ä¸ªè¡¨è¾¾å¼è‡ªèº«double basePrice = anOrder.basePrice();return (base &gt; 10000 ); æ›¿æ¢ä¸ºï¼š return (anOrder.basePrice &gt; 1000); 4ã€ä»¥æŸ¥è¯¢å–ä»£ä¸´æ—¶å˜é‡ä½ çš„ç¨‹åºä»¥ä¸€ä¸ªä¸´æ—¶å˜é‡ä¿å­˜æŸä¸€è¡¨è¾¾å¼çš„è¿ç®—ç»“æžœã€‚å°†è¿™ä¸ªè¡¨è¾¾å¼æç‚¼åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ä¸­ã€‚å°†è¿™ä¸ªä¸´æ—¶å˜é‡çš„æ‰€æœ‰å¼•ç”¨ç‚¹æ›¿æ¢ä¸ºå¯¹æ–°å‡½æ•°çš„è°ƒç”¨ã€‚æ­¤åŽï¼Œæ–°å‡½æ•°å°±å¯è¢«å…¶ä»–å‡½æ•°ä½¿ç”¨ã€‚ 123456double basePrice = quantity * timePrice;if(basePrice &gt; 1000)&#123; return basePrice * 09.5;&#125; else &#123; return basePrice * 0.98;&#125; æ›¿æ¢ä¸ºï¼š 12345678if(basePrice() &gt; 1000)&#123; return basePrice * 09.5;&#125; else &#123; return basePrice * 0.98;&#125;double basePrice()&#123; return quantity * timePrice;&#125; ä¸´æ—¶å˜é‡åªåœ¨æ‰€å±žçš„å‡½æ•°ä¸­å¯è§ï¼Œå¦‚æžœæŠŠä¸´æ—¶å˜é‡æ›¿æ¢ä¸ºä¸€ä¸ªæŸ¥è¯¢ï¼Œé‚£ä¹ˆåŒä¸€ä¸ªç±»ä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½å°†å¯ä»¥èŽ·å¾—è¿™ä¸ªä»½ä¿¡æ¯ï¼Œè¿™å°†å¸¦ç»™ä½ æžå¤§çš„å¸®åŠ©ï¼Œä½¿ä½ èƒ½å¤Ÿä¸ºè¿™ä¸ªç±»ç¼–å†™æ›´æ¸…æ™°çš„ä»£ç ã€‚ 5ã€å¼•å…¥æ³¨é‡Šæ€§å˜é‡ä½ æœ‰ä¸€ä¸ªå¤æ‚çš„è¡¨è¾¾å¼ã€‚å°†è¯¥å¤æ‚è¡¨è¾¾å¼ï¼ˆæˆ–å…¶ä¸­ä¸€éƒ¨åˆ†ï¼‰çš„ç»“æžœæ”¾è¿›ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œä»¥æ­¤å˜é‡åç§°æ¥è§£é‡Šè¡¨è¾¾å¼ç”¨é€”ã€‚ 123if ((platform.toUpperCase().indexOf("MAC") &gt; -1) &amp;&amp; (browser.toUpperCase().indexOf("IE") &gt; -1) &amp;&amp; wasInitialized() &amp;&amp; resize &gt;0)&#123; //do smothing&#125; æ›¿æ¢ä¸ºï¼š 123456final boolean isMacOs = platform.toUpperCase().indexOf("MAC") &gt; -1;final boolean isIEBrowser = browser.toUpperCase().indexOf("IE") &gt; -1;final boolean wasResized = resize &gt;0;if(isMacOs &amp;&amp; isIEBrowser &amp;&amp; wasInitialized() &amp;&amp; wasResized)&#123; //do smothing&#125; è¡¨è¾¾å¼æœ‰å¯èƒ½éžå¸¸å¤æ‚éš¾ä»¥ç†è§£ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä¸´æ—¶å˜é‡å¯ä»¥å¸®åŠ©ä½ å°†è¡¨è¾¾å¼åˆ†è§£ä¸ºæ¯”è¾ƒå®¹æ˜“ç®¡ç†çš„å½¢å¼ã€‚ åœ¨æ¡ä»¶é€»è¾‘ä¸­ï¼Œä½ å¯ä»¥ç”¨è¿™é¡¹é‡æž„å°†æ¯ä¸ªæ¡ä»¶å­å¥æç‚¼å‡ºæ¥ï¼Œä»¥ä¸€ä¸ªè‰¯å¥½å‘½åçš„ä¸´æ—¶å˜é‡æ¥è§£é‡Šå¯¹åº”æ¡ä»¶å­å¥çš„æ„ä¹‰ã€‚å¦ä¸€ç§æƒ…å†µæ˜¯ï¼šåœ¨è¾ƒé•¿çš„ç®—æ³•ä¸­ï¼Œå¯ä»¥è¿ç”¨ä¸´æ—¶å˜é‡æ¥è§£é‡Šæ¯ä¸€æ­¥è¿ç®—çš„æ„ä¹‰ã€‚ 6ã€åˆ†è§£ä¸´æ—¶å˜é‡ä½ çš„ç¨‹åºæœ‰æŸä¸ªä¸´æ—¶å˜é‡è¢«èµ‹å€¼è¶…è¿‡ä¸€æ¬¡ï¼Œå®ƒæ—¢ä¸æ˜¯å¾ªçŽ¯å˜é‡ï¼Œä¹Ÿä¸è¢«ç”¨äºŽæ”¶é›†è®¡ç®—ç»“æžœã€‚ é’ˆå¯¹æ¯æ¬¡èµ‹å€¼ï¼Œåˆ›é€ ä¸€ä¸ªç‹¬ç«‹ã€å¯¹åº”çš„ä¸´æ—¶å˜é‡ã€‚ 1234double temp = 2 * (height + width);System.out.println(temp);temp = height * width;System.out.println(temp); æ›¿æ¢ä¸ºï¼š 1234double perimeter = 2 * (height + width);System.out.println(perimeter);double area = height * width;System.out.println(area); å¦‚æžœä¸´æ—¶å˜é‡è¢«èµ‹å€¼è¶…è¿‡ä¸€æ¬¡ï¼Œå°±æ„å‘³ç€å®ƒä»¬åœ¨å‡½æ•°ä¸­æ‰¿æ‹…äº†ä¸€ä¸ªä»¥ä¸Šçš„è´£ä»»ã€‚å¦‚æžœä¸´æ—¶å˜é‡æ‰¿æ‹…å¤šä¸ªè´£ä»»ï¼Œå®ƒå°±åº”è¯¥è¢«æ›¿æ¢ä¸ºå¤šä¸ªä¸´æ—¶å˜é‡ã€‚æ¯ä¸ªå˜é‡åªæ‰¿æ‹…ä¸€ä¸ªè´£ä»»ï¼ŒåŒä¸€ä¸ªä¸´æ—¶å˜é‡æ‰¿æ‹…ä¸¤ä»¶ä¸åŒçš„äº‹æƒ…ä¼šä»¤ä»£ç é˜…è¯»è€…ç³Šæ¶‚ 7ã€ç§»é™¤å¯¹å‚æ•°çš„èµ‹å€¼ä»£ç å¯¹ä¸€ä¸ªå‚æ•°è¿›è¡Œå¤åˆ¶ã€‚ä»¥ä¸€ä¸ªä¸´æ—¶å˜é‡å–ä»£è¯¥å‚æ•°çš„ä½ç½®ã€‚ 123int discount (int inputVal, int quantity, int yearToData)&#123; if(inputVal &gt; 50) inputVal -= 2;&#125; æ›¿æ¢ä¸ºï¼š 1234int discount (int inputVal, int quantity, int yearToData)&#123; int result = inputVal; if(inputVal &gt; 50) result -= 2;&#125; å¦‚æžœä»£ç çš„è¯­ä¹‰æ˜¯æŒ‰å¼•ç”¨ä¼ é€’çš„ï¼Œè¯·åœ¨è°ƒç”¨æ®µæ£€æŸ¥è°ƒç”¨åŽæ˜¯å¦è¿˜ä½¿ç”¨äº†è¿™ä¸ªå‚æ•°ã€‚ 8ã€æ›¿æ¢ç®—æ³•æƒ³è¦æŠŠæŸä¸ªç®—æ³•æ›¿æ¢ä¸ºå¦ä¸€ä¸ªæ›´æ¸…æ™°çš„ç®—æ³•ã€‚å°†å‡½æ•°æœ¬ä½“æ›¿æ¢æˆä¸ºå¦ä¸€ä¸ªç®—æ³•ã€‚ 1234567891011121314String foundPerson(String[] people)&#123; for(int i = 0;i &lt; people.length; i++)&#123; if(people[i].equals("Don"))&#123; return "Don"; &#125; if(people[i].equals("John"))&#123; return "John"; &#125; if(people[i].equals("Kent"))&#123; return "Kent"; &#125; &#125; return "";&#125; æ›¿æ¢ä¸ºï¼š 123456789String foundPerson(String[] people)&#123; List candidates = Arrays.asList(new String[]&#123;"Don", "John", "Kent"&#125;); for(int i = 0;i &lt; people.length; i++)&#123; if(candidates.contains(people[i]))&#123; return prople[i]; &#125; &#125; return "";&#125; ï¼ˆå››ï¼‰åœ¨å¯¹è±¡ä¹‹é—´æ¬ç§»ç‰¹æ€§åœ¨å¯¹è±¡è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œå†³å®šæŠŠè´£ä»»æ”¾åœ¨å“ªå„¿æ˜¯å³ä½¿ä¸æ˜¯æœ€é‡è¦çš„äº‹ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„äº‹ä¹‹ä¸€ã€‚ å¸¸å¸¸åªä½¿ç”¨æ¬ç§»å‡½æ•°å’Œæ¬ç§»å­—æ®µç®€å•åœ°ç§»åŠ¨å¯¹è±¡è¡Œä¸ºï¼Œå°±å¯ä»¥è§£å†³è¿™äº›é—®é¢˜ã€‚å¦‚æžœè¿™ä¸¤ä¸ªé‡æž„æ‰‹æ³•éƒ½éœ€è¦ç”¨åˆ°ï¼Œæˆ‘ä¼šé¦–å…ˆä½¿ç”¨æ¬ç§»å­—æ®µï¼Œå†ä½¿ç”¨æ¬ç§»æ–¹æ³•ã€‚ å¦‚æžœä¸€ä¸ªç±»æ‰¿æ‹…äº†å¤ªå¤šè´£ä»»è€Œå˜å¾—è‡ƒè‚¿ä¸å ªï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šä½¿ç”¨æç‚¼ç±»å°†ä¸€éƒ¨åˆ†è´£ä»»åˆ†ç¦»å‡ºåŽ»ã€‚å¦‚æžœä¸€ä¸ªç±»å˜å¾—å¤ªä¸è´Ÿè´£ä»»ï¼Œä½¿ç”¨å°†ç±»å†…è”åŒ–å°†å®ƒèžå…¥åˆ°å¦ä¸€ä¸ªç±»ä¸­ã€‚ 1ã€æ¬ç§»å‡½æ•°ä½ çš„ç¨‹åºä¸­ï¼Œæœ‰ä¸ªå‡½æ•°ä¸Žå…¶æ‰€é©»ç±»ä¹‹å¤–çš„å¦ä¸ªä¸€ç±»è¿›è¡Œè·Ÿè¿‡çš„äº¤æµï¼šè°ƒç”¨åŽè€…æˆ–è¢«åŽè€…è°ƒç”¨ã€‚åœ¨è¯¥å‡½æ•°æœ€é•¿å¼•ç”¨çš„ç±»ä¸­å»ºç«‹ä¸€ä¸ªæœ‰ç€ç±»ä¼¼è¡Œä¸ºçš„æ–°å‡½æ•°ã€‚å°†æ—§å‡½æ•°å˜æˆä¸€ä¸ªå•çº¯çš„å§”æ‰˜å‡½æ•°ï¼Œæˆ–è€…å°†æ—§å‡½æ•°å®Œå…¨ç§»é™¤ã€‚å¦‚æžœä¸€ä¸ªç±»æœ‰å¤ªå¤šè¡Œä¸ºï¼Œæˆ–å¦‚æžœä¸€ä¸ªç±»ä¸Žå¦ä¸€ä¸ªç±»æœ‰å¤ªå¤šåˆä½œè€Œé«˜åº¦è€¦åˆï¼Œå°±éœ€è¦æ¬ç§»å‡½æ•°ã€‚å¯ä»¥æ˜¯ç³»ç»Ÿä¸­çš„ç±»æ›´ç®€å• 2ã€æ¬ç§»å­—æ®µç¨‹åºä¸­ï¼ŒæŸä¸ªå­—æ®µè¢«å…¶æ‰€é©»ç±»ä¹‹å¤–çš„å¦ä¸€ä¸ªç±»æ›´å¤šçš„ç”¨åˆ°ã€‚åœ¨ç›®æ ‡ç±»æ–°å»ºä¸€ä¸ªå­—æ®µï¼Œä¿®æ”¹åŽŸå­—æ®µçš„æ‰€æœ‰ç”¨æˆ·ï¼Œä»¤ä»–ä»¬æ”¹ç”¨æ–°å­—æ®µ 3ã€æç‚¼ç±»æŸä¸ªç±»åšäº†åº”è¯¥ç”±ä¸¤ä¸ªç±»åšçš„äº‹ã€‚å»ºç«‹ä¸€ä¸ªæ–°ç±»ï¼Œå°†ç›¸å…³å­—æ®µå’Œå‡½æ•°ä»Žå°±ç±»æ¬åˆ°æ–°ç±»ã€‚ 4ã€å°†ç±»å†…è”åŒ–æŸä¸ªç±»æ²¡æœ‰åšå¤ªå¤šçš„äº‹æƒ…ï¼Œä¸åœ¨æ‰¿æ‹…è¶³å¤Ÿè´£ä»»ï¼Œä¸å†æœ‰çš„é‚£å•ç‹¬å­˜åœ¨çš„ç†ç”±ã€‚å°†è¿™ä¸ªç±»çš„æ‰€æœ‰ç‰¹æ€§æ¬ç§»åˆ°å¦ä¸€ä¸ªç±»ä¸­ï¼Œç„¶åŽç§»é™¤åŽŸç±»ã€‚ 5ã€éšè—â€œå§”æ‰˜å…³ç³»â€å®¢æˆ·é€šè¿‡ä¸€ä¸ªå§”æ‰˜ç±»æ¥è°ƒç”¨å¦ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨æœåŠ¡ç±»ä¸Šå»ºç«‹å®¢æˆ·æ‰€éœ€è¦çš„æ‰€æœ‰å‡½æ•°ï¼Œç”¨æ¥éšè—å§”æ‰˜å…³ç³»ã€‚ å°è£…æ„å‘³æ¯ä¸ªå¯¹è±¡éƒ½åº”è¯¥å°‘äº†è§£ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ã€‚ä¸€æ—¦å‘ç”Ÿå˜åŒ–ï¼Œéœ€è¦äº†è§£è¿™ä¸€å˜åŒ–çš„å¯¹è±¡å°±ä¼šæ¯”è¾ƒå°‘ã€‚ å¦‚æžœæŸä¸ªå®¢æˆ·å…ˆé€šè¿‡æœåŠ¡å¯¹è±¡çš„å­—æ®µå¾—åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åŽè°ƒç”¨åŽè€…çš„å‡½æ•°ã€‚é‚£ä¹ˆå®¢æˆ·å°±å¿…é¡»çŸ¥æ™“è¿™ä¸€å±‚å§”æ‰˜å…³ç³»ã€‚ä¸‡ä¸€å§”æ‰˜å…³ç³»å˜åŒ–ï¼Œå®¢æˆ·ä¹Ÿè¦ç›¸åº”å˜åŒ–ã€‚ 6ã€ç§»é™¤ä¸­é—´äººæŸä¸ªç±»åšäº†è¿‡å¤šçš„ç®€å•å§”æ‰˜ã€‚è®©å®¢æˆ·ç›´æŽ¥è°ƒç”¨å§”æ‰˜ç±»ã€‚æ¯å½“å®¢æˆ·è¦ä½¿ç”¨æ‰‹å§”æ‰˜ç±»çš„æ–°ç‰¹æ€§æ—¶ï¼Œä½ å°±å¿…é¡»åœ¨æœåŠ¡ç«¯æ·»åŠ ä¸€ä¸ªç®€å•å§”æ‰˜å‡½æ•°ã€‚éšç€å—å§”æ‰˜ç±»çš„ç‰¹æ€§è¶Šæ¥è¶Šå¤šï¼Œè¿™ä¸€è¿‡ç¨‹ä¼šè®©ä½ å¾ˆç—›è‹¦ã€‚ 7ã€å¼•å…¥å¤–åŠ å‡½æ•°ä½ éœ€è¦ä¸ºæä¾›æœåŠ¡çš„ç±»å¢žåŠ ä¸€ä¸ªå‡½æ•°ï¼Œä½†ä½ æ— æ³•ä¿®æ”¹è¿™ä¸ªç±»ã€‚åœ¨å®¢æˆ·ç±»ä¸­å»ºç«‹ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä»¥ç¬¬ä¸€å‚æ•°å½¢å¼ä¼ å…¥ä¸€ä¸ªæœåŠ¡ç±»å®žä¾‹ã€‚ 1Date newStart = new Date(year, month, date + 1); æ›¿æ¢ä¸ºï¼š 1234Date newStart = nextDay(nowDate);private static Date nextDay(Date arg)&#123; retrun new Date(arg.getYear(), arg.getMonth(), arg.getDate() + 1);&#125; å¦‚æžœå¯ä»¥ä¿®æ”¹æºç ï¼Œä½ å¯ä»¥è‡ªè¡Œæ·»åŠ ä¸€ä¸ªæ–°å‡½æ•°ï¼›å¦‚æžœä¸èƒ½ï¼Œä½ å°±å¾—åœ¨å®¢æˆ·ç«¯ç¼–ç ï¼Œè¡¥è¶³ä½ è¦çš„é‚£ä¸ªå‡½æ•° 8ã€å¼•å…¥æœ¬åœ°æ‰©å±•ä½ éœ€è¦ä¸ºæœåŠ¡ç±»è¸¢ç‹—ä¸€äº›é¢å¤–å‡½æ•°ï¼Œä½†ä½ æ— æ³•ä¿®æ”¹è¿™ä¸ªç±»ã€‚å»ºç«‹ä¸€ä¸ªæ–°ç±»ï¼Œä½¿å®ƒåŒ…å«è¿™äº›é¢å¤–å‡½æ•°ã€‚è®©è¿™ä¸ªæ‰©å±•å“æˆä¸ºæºç±»çš„å­ç±»æˆ–åŒ…è£…ç±»ã€‚ ##ï¼ˆäº”ï¼‰é‡æ–°ç»„ç»‡æ•°æ® 1ã€è‡ªå°è£…å­—æ®µç›´æŽ¥è®¿é—®ä¸€ä¸ªå­—æ®µã€‚ä¸ºè¿™ä¸ªå­—æ®µå»ºç«‹å–å€¼/è®¾å€¼å‡½æ•°ï¼Œå¹¶ä¸”åªä»¥è¿™äº›å‡½æ•°æ¥è®¿é—®å­—æ®µã€‚ 1234private int low, high;boolean includes(int arg)&#123; retrun arg &gt;= low &amp;&amp; arg &lt;= high;&#125; æ›¿æ¢ä¸ºï¼š 12345678910private int low, high;boolean includes(int arg)&#123; retrun arg &gt;= getLow() &amp;&amp; arg &lt;= getHigh();&#125;int getLow()&#123; retrun low;&#125;int getHigh()&#123; return high;&#125; åœ¨â€œå­—æ®µè®¿é—®æ–¹å¼â€è¿™ä¸ªé—®é¢˜ä¸Šï¼Œå­˜åœ¨ä¸¤ç§æˆªç„¶ä¸åŒçš„è§‚ç‚¹ï¼š åœ¨è¯¥å˜é‡å®šä¹‰æ‰€åœ¨çš„ç±»ä¸­ï¼Œä½ å¯ä»¥è‡ªç”±çš„è®¿é—®ã€‚ å³ä½¿åœ¨è¿™ä¸ªç±»ä¸­ä½ ä¹Ÿåº”è¯¥åªä½¿ç”¨è®¿é—®å‡½æ•°é—´æŽ¥è®¿é—®ã€‚*é—´æŽ¥è®¿é—®çš„å¥½å¤„æ˜¯ï¼šå­ç±»å¯ä»¥é€šè¿‡å¤å†™ä¸€ä¸ªå‡½æ•°è€Œæ”¹å˜èŽ·å–æ•°æ®çš„é€”å¾„ï¼›å®ƒæ”¯æŒæ›´çµæ´»çš„æ•°æ®ç®¡ç†æ–¹å¼ï¼Œä¾‹å¦‚å»¶è¿Ÿåˆå§‹åŒ–ã€‚ 2ã€ä»¥å¯¹è±¡å–ä»£æ•°æ®å€¼ä½ æœ‰ä¸€ä¸ªæ•°æ®é¡¹ï¼Œéœ€è¦ä¸Žå…¶ä»–æ•°æ®å’Œè¡Œä¸ºä¸€èµ·ä½¿ç”¨æ‰æœ‰æ„ä¹‰ã€‚å°†æ•°æ®é¡¹å˜ä¸ºå¯¹è±¡ã€‚ ä¸€å¼€å§‹ä½ è‚¯èƒ½ä¼šç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¥è¡¨ç¤ºâ€œç”µè¯å·ç â€æ¦‚å¿µï¼Œä½†æ˜¯éšåŽä½ ä¼šå‘çŽ°ï¼Œç”µè¯å·ç éœ€è¦â€œæ ¼å¼åŒ–â€ã€â€œåŒºå·â€ä¹‹ç±»çš„è¡Œä¸ºã€‚è¿™æ—¶å€™å°±éœ€è¦ä¸ºå¸¦æ›¿æ¢çš„æ•°å€¼æ–°å»ºä¸€ä¸ªç±»ã€‚ 3ã€å°†å€¼å¯¹è±¡æ”¹ä¸ºå¼•ç”¨å¯¹è±¡ä½ ä»Žä¸€ä¸ªç±»è¡ç”Ÿå‡ºè®¸å¤šå½¼æ­¤ç›¸ç­‰çš„å®žä¾‹ï¼Œå¸Œæœ›å°†å®ƒä»¬æ›¿æ¢ä¸ºåŒä¸€ä¸ªå¯¹è±¡ã€‚å°†è¿™ä¸ªå€¼å¯¹è±¡å˜æˆå¼•ç”¨å¯¹è±¡ã€‚ 4ã€å°†å¼•ç”¨å¯¹è±¡æ”¹ä¸ºå€¼å¯¹è±¡ä½ æœ‰ä¸€ä¸ªå¼•ç”¨å¯¹è±¡ï¼Œå¾ˆå°ä¸”ä¸å¯æ”¹å˜ï¼Œè€Œä¸”ä¸æ˜“ç®¡ç†ã€‚å°†å®ƒå˜æˆä¸€ä¸ªå€¼å¯¹è±¡ã€‚ 5ã€ä»¥å¯¹è±¡å–ä»£æ•°ç»„ä½ æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­çš„å…ƒç´ å„è‡ªä»£è¡¨ä¸åŒçš„ä¸œè¥¿ã€‚ä»¥å¯¹è±¡æ›¿æ¢æ•°ç»„ã€‚å¯¹äºŽæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œä»¥ä¸€ä¸ªå­—æ®µæ¥è¡¨ç¤º 6ã€å¤åˆ¶â€œè¢«ç›‘è§†æ•°æ®â€ä½ æœ‰ä¸€äº›é¢†åŸŸæ•°æ®ç½®èº«GUIæŽ§ä»¶ä¸­ï¼Œè€Œé¢†åŸŸå‡½æ•°éœ€è¦è®¿é—®è¿™äº›æ•°æ®ã€‚å°†è¯¥æ•°æ®å¤åˆ¶åˆ°ä¸€ä¸ªé¢†åŸŸå¯¹è±¡ä¸­ã€‚å»ºç«‹ä¸€ä¸ªObserveræ¨¡å¼ï¼Œç”¨ä»¥åŒæ­¥é¢†åŸŸå¯¹è±¡å’ŒGUIå¯¹è±¡å†…çš„é‡å¤æ•°æ®ã€‚ 7ã€å°†å•å‘å…³è”æ”¹ä¸ºåŒå‘å…³è”ä¸¤ä¸ªç±»éƒ½éœ€è¦ä½¿ç”¨å¯¹æ–¹ç‰¹æ€§ï¼Œä½†å…¶é—´åªæœ‰ä¸€æ¡å•å‘è¿žæŽ¥ã€‚æ·»åŠ ä¸€ä¸ªåå‘æŒ‡é’ˆï¼Œå¹¶ä½¿ä¿®æ”¹å‡½æ•°èƒ½å¤ŸåŒæ—¶æ›´æ–°ä¸¤æ¡è¿žæŽ¥ã€‚ 8ã€å°†åŒå‘å…³è”æ”¹ä¸ºå•å‘å…³è”ä¸¤ä¸ªç±»ä¹‹é—´æœ‰åŒå‘å…³è”ï¼Œä½†å…¶ä¸­ä¸€ä¸ªç±»å¦‚ä»Šä¸å†éœ€è¦å¦ä¸€ä¸ªç±»çš„ç‰¹æ€§ã€‚åŽ»é™¤ä¸å¿…è¦çš„å…³è”ã€‚ 9ã€ä»¥å­—é¢å¸¸é‡å–ä»£é­”æ•°ä½ æœ‰ä¸€ä¸ªå­—é¢æ•°å€¼ï¼Œå¸¦æœ‰ç‰¹åˆ«å«ä¹‰ã€‚ åˆ›é€ ä¸€ä¸ªå¸¸é‡ï¼Œæ ¹æ®å…¶æ„ä¹‰ä¸ºå®ƒå‘½åï¼Œå¹¶å°†ä¸Šè¿°çš„å­—é¢æ•°å€¼æ›¿æ¢ä¸ºå¸¸é‡ã€‚ 10ã€å°è£…å­—æ®µä½ çš„ç±»ä¸­å­˜åœ¨ä¸€ä¸ªpublicå­—æ®µã€‚å°†å®ƒå£°æ˜Žä¸ºprivateï¼Œå¹¶æä¾›ç›¸åº”çš„è®¿é—®å‡½æ•°ã€‚ 11ã€å°è£…é›†åˆæœ‰ä¸ªå‡½æ•°è¿”å›žä¸€ä¸ªé›†åˆã€‚è®©è¿™ä¸ªå‡½æ•°è¿”å›žè¯¥é›†åˆçš„ä¸€ä¸ªåªè¯»å‰¯æœ¬ï¼Œå¹¶åœ¨è¿™ä¸ªç±»ä¸­æä¾›æ·»åŠ /ç§»é™¤é›†åˆå…ƒç´ çš„å‡½æ•°ã€‚ ##ï¼ˆå…­ï¼‰ç®€åŒ–æ¡ä»¶è¡¨è¾¾å¼ 1ã€åˆ†è§£æ¡ä»¶è¡¨è¾¾å¼æœ‰ä¸€å¤æ‚çš„æ¡ä»¶è¯­å¥ã€‚ä»Žifã€thenã€elseä¸‰ä¸ªæ®µè½ä¸­åˆ†åˆ«æç‚¼å‡ºç‹¬ç«‹å‡½æ•°ã€‚ 2ã€åˆå¹¶è¡¨è¾¾å¼ä½ æœ‰ä¸€ç³»åˆ—æ¡ä»¶æµ‹è¯•ï¼Œéƒ½å¾—åˆ°ç›¸åŒç»“æžœã€‚å°†è¿™äº›æµ‹è¯•åˆå¹¶ä¸ºä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼ï¼Œå¹¶å°†è¿™ä¸ªæ¡ä»¶è¡¨è¾¾å¼æç‚¼æˆä¸€ä¸ªç‹¬ç«‹å‡½æ•°ã€‚ 3ã€åˆå¹¶é‡å¤çš„æ¡ä»¶ä»£ç åœ¨è¡¨è¾¾å¼çš„æ¯ä¸ªåˆ†æ”¯ä¸Šéƒ½æ‰§è¡Œäº†ç›¸åŒçš„ä¸€æ®µä»£ç ã€‚ å°†è¿™æ®µé‡å¤ä»£ç æ¬ç§»åˆ°æ¡ä»¶è¡¨è¾¾å¼ä¹‹å¤–ã€‚ 4ã€ç§»é™¤æŽ§åˆ¶æ ‡è®°åœ¨ä¸€ç³»åˆ—å¸ƒå°”è¡¨è¾¾å¼ä¸­,æŸä¸ªå˜é‡å¸¦æœ‰â€æŽ§åˆ¶æ ‡è®°â€çš„ä½œç”¨ã€‚ ä»¥break/returnè¯­å¥å–ä»£æŽ§åˆ¶æ ‡è®°ã€‚ 5ã€ä»¥å¤šæ€å–ä»£æ¡ä»¶è¡¨è¾¾å¼æœ‰ä¸ªæ¡ä»¶è¡¨è¾¾å¼æ ¹æ®å¯¹è±¡ç±»åž‹çš„ä¸åŒè€Œé€‰æ‹©ä¸åŒçš„è¡Œä¸ºã€‚ å°†è¿™ä¸ªæ¡ä»¶è¡¨è¾¾å¼çš„æ¯ä¸ªåˆ†æ”¯æ”¾è¿›ä¸€ä¸ªå­ç±»å†…çš„è¦†å†™å‡½æ•°ä¸­ï¼Œç„¶åŽå°†åŽŸå§‹å‡½æ•°å£°æ˜Žä¸ºæŠ½è±¡å‡½æ•° ï¼ˆä¸ƒï¼‰ç®€åŒ–å‡½æ•°è°ƒç”¨1ã€å‡½æ•°æ”¹åå‡½æ•°çš„åç§°æœªèƒ½æ­ç¤ºå…¶ç”¨é€”ã€‚ ä¿®æ”¹å‡½æ•°åç§°ã€‚ 2ã€æ·»åŠ å‚æ•°æŸä¸ªå‡½æ•°éœ€è¦ä»Žè°ƒç”¨ç«¯å¾—åˆ°æ›´å¤šä¿¡æ¯ã€‚ä¸ºæ­¤å‡½æ•°æ·»åŠ ä¸€ä¸ªå¯¹è±¡å‚æ•°ï¼Œè®©è¯¥å¯¹è±¡å¸¦ä»…å‡½æ•°æ‰€éœ€ä¿¡æ¯ã€‚ 3ã€ç§»é™¤å‚æ•°å‡½æ•°æœ¬ä½“ä¸å†éœ€è¦æŸä¸ªå‚æ•°ã€‚ åŽ»é™¤å‚æ•°ã€‚ 4ã€åˆ†ç¦»æŸ¥è¯¢å‡½æ•°å’Œä¿®æ”¹å‡½æ•°æŸä¸ªå‡½æ•°æ—¢è¿”å›žå¯¹è±¡çŠ¶æ€å€¼ï¼Œåˆä¿®æ”¹å¯¹è±¡å€¼ã€‚ å»ºç«‹ä¸¤ä¸ªä¸åŒå‡½æ•°,å…¶ä¸­ä¸€ä¸ªè´Ÿè´£æŸ¥è¯¢,å¦ä¸€ä¸ªè´Ÿè´£ä¿®æ”¹ã€‚ 5ã€ä»¤å‡½æ•°æºå¸¦å‚æ•°è‹¥å¹²å‡½æ•°åšäº†ç±»ä¼¼çš„å·¥ä½œï¼Œä½†åœ¨å‡½æ•°æœ¬ä½“ä¸­åŒ…å«äº†ä¸åŒçš„å€¼ã€‚å»ºç«‹å•ä¸€å‡½æ•°,ä»¥å‚æ•°è¡¨è¾¾é‚£äº›ä¸åŒçš„å€¼ã€‚æœ‰è¿™æ ·ä¸¤ä¸ªå‡½æ•°ï¼šå®ƒä»¬åšç€ç±»ä¼¼çš„å·¥ä½œï¼Œä½†å› å°‘æ•°å‡ ä¸ªå€¼è‡´ä½¿è¡Œä¸ºç•¥æœ‰ä¸åŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°†è¿™äº›å„è‡ªåˆ†ç¦»çš„å‡½æ•°åŒä¸€èµ·æ¥ï¼Œå¹¶é€šè¿‡å‚æ•°æ¥å¤„ç†é‚£äº›å˜åŒ–æƒ…å†µï¼Œç”¨ä»¥ç®€åŒ–é—®é¢˜ã€‚ 6ã€ä»¥æ˜Žç¡®å‡½æ•°å–ä»£å‚æ•°ä½ æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä¸­å®Œå…¨å–å†³äºŽå‚æ•°å€¼è€Œé‡‡ç”¨ä¸åŒè¡Œä¸ºã€‚ é’ˆå¯¹è¯¥å‚æ•°çš„æ¯ä¸€ä¸ªå¯èƒ½å€¼ï¼Œå»ºç«‹ä¸€ä¸ªç‹¬ç«‹å‡½æ•°ã€‚å¦‚æžœæŸä¸ªå‚æ•°æœ‰å¤šç§å¯èƒ½çš„å€¼ï¼Œè€Œå‡½æ•°å†…åˆä»¥æ¡ä»¶è¡¨è¾¾å¼æ£€æŸ¥è¿™äº›å‚æ•°å€¼ï¼Œå¹¶æ ¹æ®ä¸åŒå‚æ•°å€¼åšå‡ºä¸åŒçš„è¡Œä¸ºï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨æœ¬é¡¹é‡æž„ã€‚ 7ã€ä¿æŒå¯¹è±¡å®Œæ•´ä»ŽæŸä¸ªå¯¹è±¡ä¸­å–å‡ºè‹¥å¹²å€¼ï¼Œå°†å®ƒä»¬ä½œä¸ºæŸä¸€æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°ã€‚æ”¹ä¸ºä¼ é€’æ•´ä¸ªå¯¹è±¡ã€‚ 8ã€ä»¥å‡½æ•°å–ä»£å‚æ•°å¯¹è±¡è°ƒç”¨æŸä¸ªå‡½æ•°ï¼Œå¹¶å°†æ‰€å¾—ç»“æžœä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™å¦ä¸€å‡½æ•°ï¼Œè€ŒæŽ¥å—è¯¥å‚æ•°çš„å‡½æ•°æœ¬èº«ä¹Ÿèƒ½å¤Ÿè°ƒç”¨å‰ä¸€ä¸ªå‡½æ•°ã€‚è®©å‚æ•°æŽ¥å—è€…åŽ»é™¤è¯¥å‚æ•°ï¼Œç›´æŽ¥è°ƒç”¨å‰ä¸€ä¸ªå‡½æ•°ã€‚ 9ã€å¼•å…¥å‚æ•°å¯¹è±¡æŸäº›å‚æ•°æ€»æ˜¯å¾ˆè‡ªç„¶çš„åŒæ—¶å‡ºçŽ°ã€‚ä»¥ä¸€ä¸ªå¯¹è±¡å–ä»£è¿™äº›å‚æ•°ã€‚ 10ã€ç§»é™¤è®¾å€¼å‡½æ•°ç±»ä¸­æŸä¸ªå­—æ®µåœ¨å¯¹è±¡åˆ›å»ºæ—¶è¢«è®¾å€¼ï¼Œç„¶åŽä¸å†æ”¹å˜ã€‚åŽ»æŽ‰è¯¥å­—æ®µçš„æ‰€æœ‰è®¾å€¼å‡½æ•°ã€‚ 11ã€éšè—å‡½æ•°æŸä¸ªå‡½æ•°ï¼Œä»Žæ¥æ²¡æœ‰è¢«å…¶ä»–ä»»ä½•ç±»ç”¨åˆ° ã€‚å°†å‡½æ•°ä¿®æ”¹ä¸ºprivateã€‚ 12 ã€ä»¥å·¥åŽ‚å‡½æ•°å–ä»£æž„é€ å‡½æ•°å¸Œæœ›åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä»…ä»…æ˜¯åšç®€å•çš„å»ºæž„åŠ¨ä½œ ã€‚ å°†æž„é€ å‡½æ•°æ›¿æ¢ä¸ºå·¥åŽ‚å‡½æ•°ã€‚ ##ï¼ˆå…«ï¼‰å¤„ç†æ¦‚æ‹¬å…³ç³» 1ã€å­—æ®µä¸Šç§»ä¸¤ä¸ªå­ç±»æ‹¥æœ‰ç›¸åŒçš„å­—æ®µã€‚å°†è¯¥å­—æ®µç§»è‡³è¶…ç±»ã€‚ 2 ã€å‡½æ•°ä¸Šç§»æœ‰äº›å‡½æ•°åœ¨å„å­ç±»ä¸­äº§ç”Ÿå®Œå…¨ç›¸åŒçš„ç»“æžœã€‚å°†è¯¥å‡½æ•°ç§»è‡³è¶…ç±»ã€‚ 3 ã€æž„é€ å‡½æ•°æœ¬ä½“ä¸Šç§»å„ä¸ªå­ç±»ä¸­æœ‰ä¸€äº›æž„é€ å‡½æ•°æœ¬ä½“å‡ ä¹Žå®Œå…¨ä¸€è‡´ ã€‚åœ¨è¶…ç±»ä¸­æ–°å»ºä¸€ä¸ªæž„é€ å‡½æ•°ï¼Œå¹¶åœ¨å­ç±»æž„é€ å‡½æ•°ä¸­è°ƒç”¨å®ƒã€‚ 4ã€å‡½æ•°ä¸‹ç§»è¶…ç±»ä¸­çš„æŸä¸ªå‡½æ•°åªä¸Žéƒ¨åˆ†(è€Œéžå…¨éƒ¨)å­ç±»ç”¨åˆ°ã€‚ å°†å‡½æ•°ç§»åˆ°ç›¸å…³çš„å­ç±»ä¸­ã€‚ 5ã€å­—æ®µä¸‹ç§»è¶…ç±»ä¸­çš„æŸä¸ªå­—æ®µåªè¢«éƒ¨åˆ†(è€Œéžå…¨éƒ¨)å­ç±»ç”¨åˆ°ã€‚ å°†å­—æ®µç§»åˆ°éœ€è¦å®ƒçš„å­ç±»ä¸­ã€‚ 6ã€æç‚¼å­ç±»ç±»ä¸­çš„æŸäº›ç‰¹æ€§åªè¢«æŸäº›(è€Œéžå…¨éƒ¨)å®žä¾‹ç”¨åˆ°ã€‚ æ–°å»ºä¸€ä¸ªå­ç±»ï¼Œå°†ä¸Šè¿°éƒ¨åˆ†çš„ç‰¹æ€§ç§»åˆ°å­ç±»ä¸­ã€‚ 7ã€æç‚¼è¶…ç±»ä¸¤ä¸ªç±»æœ‰ç›¸ä¼¼ç‰¹æ€§ã€‚ ä¸ºè¿™ä¸¤ä¸ªç±»å»ºç«‹ä¸€ä¸ªè¶…ç±»,å°†ç›¸åŒç‰¹æ€§ç§»è‡³è¶…ç±»ã€‚ 8ã€æç‚¼æŽ¥å£è‹¥å¹²å®¢æˆ·ä½¿ç”¨ç±»æŽ¥å£ä¸­çš„åŒä¸€å­é›†ï¼Œæˆ–ä¸¤ä¸ªç±»çš„æŽ¥å£æœ‰éƒ¨åˆ†ç›¸åŒã€‚å°†ç›¸åŒçš„å­é›†æç‚¼åˆ°ä¸€ä¸ªç‹¬ç«‹æŽ¥å£ä¸­ã€‚ 9ã€æŠ˜å ç»§æ‰¿ä½“ç³»è¶…ç±»å’Œå­ç±»ä¹‹é—´æ— å¤ªå¤§åŒºåˆ«ã€‚ å°†å®ƒä»¬åˆä¸ºä¸€ä½“ã€‚ 10ã€å¡‘é€ æ¨¡æ¿å‡½æ•°å­ç±»ä¸­æŸäº›å‡½æ•°ä»¥ç›¸åŒé¡ºåºæ‰§è¡Œç±»ä¼¼æ“ä½œï¼Œä½†å„æ“ä½œç»†èŠ‚ç•¥æœ‰ä¸åŒã€‚å°†æ“ä½œæ”¾è¿›ç‹¬ç«‹å‡½æ•°(ä¿æŒç­¾åç›¸åŒ)ï¼Œç„¶åŽå°†å®ƒä»¬ç§»è‡³è¶…ç±»ã€‚ 11ã€ä»¥å§”æ‰˜å–ä»£ç»§æ‰¿æŸä¸ªå­ç±»åªä½¿ç”¨è¶…ç±»æŽ¥å£ä¸­çš„ä¸€éƒ¨åˆ†æˆ–æ ¹æœ¬ä¸éœ€è¦ç»§æ‰¿è€Œæ¥çš„æ•°æ®ã€‚å­ç±»æ–°å»ºå­—æ®µä¿å­˜è¶…ç±»ï¼Œè°ƒæ•´å­ç±»å‡½æ•°ä¸ºå§”æ‰˜è¶…ç±»ï¼Œå–æ¶ˆç»§æ‰¿å…³ç³»ã€‚ 12ã€ä»¥ç»§æ‰¿å–ä»£å§”æ‰˜ä½ åœ¨ä¸¤ä¸ªç±»ä¸­ä½¿ç”¨å§”æ‰˜å…³ç³»ï¼Œå¹¶ç»å¸¸ä¸ºæ•´ä¸ªæŽ¥å£ç¼–å†™è®¸å¤šæžç®€å•çš„å§”æ‰˜å‡½æ•°ã€‚`è®©å§”æ‰˜ç±»ç»§æ‰¿å—æ‰˜ç±»ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç è§„èŒƒ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>ä»£ç è§„èŒƒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UUIDé€šç”¨å”¯ä¸€è¯†åˆ«ç ]]></title>
    <url>%2Fposts%2Fb4fbe497.html</url>
    <content type="text"><![CDATA[1234567891011121314151617181920212223242526import java.util.UUID; public class UploadUtils &#123; /** * ä¼ å…¥æ–‡ä»¶çš„åç§°ï¼Œè¿”å›žçš„å”¯ä¸€çš„åç§° * ä¾‹å¦‚ï¼šgril.jpg è¿”å›žsdjsljfsjdl.jpg * @param filename * @return */ public static String getUUIDName(String filename)&#123; // å…ˆæŸ¥æ‰¾ int index = filename.lastIndexOf("."); // æˆªå– String lastname = filename.substring(index, filename.length()); // å”¯ä¸€ å­—ç¬¦ä¸² fsd-sfsdf-sfsd-sdfsd String uuid = UUID.randomUUID().toString().replace("-", ""); return uuid+lastname; &#125; public static void main(String[] args) &#123; String filename = "girl.jpg"; String uuid = getUUIDName(filename); System.out.println(uuid); &#125;&#125; UUIDå«ä¹‰æ˜¯é€šç”¨å”¯ä¸€è¯†åˆ«ç  (Universally Unique Identifier)ï¼Œè¿™ æ˜¯ä¸€ä¸ªè½¯ä»¶å»ºæž„çš„æ ‡å‡†ï¼Œä¹Ÿæ˜¯è¢«å¼€æºè½¯ä»¶åŸºé‡‘ä¼š (Open Software Foundation, OSF) çš„ç»„ç»‡åœ¨åˆ†å¸ƒå¼è®¡ç®—çŽ¯å¢ƒ (Distributed Computing Environment, DCE) é¢†åŸŸçš„ä¸€éƒ¨ä»½ã€‚UUID çš„ç›®çš„ï¼Œæ˜¯è®©åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œéƒ½èƒ½æœ‰å”¯ä¸€çš„è¾¨è¯†èµ„è®¯ï¼Œè€Œä¸éœ€è¦é€è¿‡ä¸­å¤®æŽ§åˆ¶ç«¯æ¥åšè¾¨è¯†èµ„è®¯çš„æŒ‡å®šã€‚å¦‚æ­¤ä¸€æ¥ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥å»ºç«‹ä¸ä¸Žå…¶å®ƒäººå†²çªçš„ UUIDã€‚åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œå°±ä¸éœ€è€ƒè™‘æ•°æ®åº“å»ºç«‹æ—¶çš„åç§°é‡å¤é—®é¢˜ã€‚ç›®å‰æœ€å¹¿æ³›åº”ç”¨çš„ UUIDï¼Œå³æ˜¯å¾®è½¯çš„ Microsoftâ€™s Globally Unique Identifiers (GUIDs)ï¼Œè€Œå…¶ä»–é‡è¦çš„åº”ç”¨ï¼Œåˆ™æœ‰ Linux ext2/ext3 æ¡£æ¡ˆç³»ç»Ÿã€LUKS åŠ å¯†åˆ†å‰²åŒºã€GNOMEã€KDEã€Mac OS X ç­‰ç­‰ã€‚ UUID.randomUUID().toString()æ˜¯javaJDKæä¾›çš„ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆä¸»é”®çš„æ–¹æ³•ã€‚UUID(Universally Unique Identifier)å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦,æ˜¯æŒ‡åœ¨ä¸€å°æœºå™¨ä¸Šç”Ÿæˆçš„æ•°å­—ï¼Œå®ƒä¿è¯å¯¹åœ¨åŒä¸€æ—¶ç©ºä¸­çš„æ‰€æœ‰æœºå™¨éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ˜¯ç”±ä¸€ä¸ªåå…­ä½çš„æ•°å­—ç»„æˆ,è¡¨çŽ°å‡ºæ¥çš„å½¢å¼ã€‚ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†çš„ç»„åˆï¼šå½“å‰æ—¥æœŸå’Œæ—¶é—´(UUIDçš„ç¬¬ä¸€ä¸ªéƒ¨åˆ†ä¸Žæ—¶é—´æœ‰å…³ï¼Œå¦‚æžœä½ åœ¨ç”Ÿæˆä¸€ä¸ªUUIDä¹‹åŽï¼Œè¿‡å‡ ç§’åˆç”Ÿæˆä¸€ä¸ªUUIDï¼Œåˆ™ç¬¬ä¸€ä¸ªéƒ¨åˆ†ä¸åŒï¼Œå…¶ä½™ç›¸åŒ)ï¼Œæ—¶é’Ÿåºåˆ—ï¼Œå…¨å±€å”¯ä¸€çš„IEEEæœºå™¨è¯†åˆ«å·ï¼ˆå¦‚æžœæœ‰ç½‘å¡ï¼Œä»Žç½‘å¡èŽ·å¾—ï¼Œæ²¡æœ‰ç½‘å¡ä»¥å…¶ä»–æ–¹å¼èŽ·å¾—ï¼‰ï¼ŒUUIDçš„å”¯ä¸€ç¼ºé™·åœ¨äºŽç”Ÿæˆçš„ç»“æžœä¸²ä¼šæ¯”è¾ƒé•¿ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android:label=REPLACE and android:label=REPLACE]]></title>
    <url>%2Fposts%2Fc46aabc2.html</url>
    <content type="text"><![CDATA[Multiple entries with same key: å°è¯•ä»Žtools:replaceåˆ—è¡¨ä¸­åˆ é™¤ç©ºæ ¼ã€‚ 1tools:replace=&quot;android:label,theme,allowBackup,android:icon,android:supportsRtl&quot; è¿™ä¸ºæˆ‘ä¿®å¤äº†æž„å»ºé”™è¯¯ï¼Œä½†æˆ‘ä»åœ¨è¯•å›¾æ‰¾å‡ºä¸ºä»€ä¹ˆå¿½ç•¥ç©ºæ ¼åŽçš„æ¡ç›®.]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptå­¦ä¹ ]]></title>
    <url>%2Fposts%2Fd3a7443d.html</url>
    <content type="text"><![CDATA[JavaScriptæƒå¨æŒ‡å—ç¬¬6ç‰ˆä¸­æ–‡ç‰ˆJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬3ç‰ˆï¼‰ä¸­æ–‡ä½ ä¸çŸ¥é“çš„ JavaScriptï¼ˆä¸Šå·ï¼‰ä½ ä¸çŸ¥é“çš„ JavaScriptï¼ˆä¸­å·ï¼‰ä½ ä¸çŸ¥é“çš„ JavaScriptï¼ˆä¸‹å·ï¼‰]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo ä¸»é¢˜ next æ·»åŠ å›¾ç‰‡èƒŒæ™¯]]></title>
    <url>%2Fposts%2F60e96c42.html</url>
    <content type="text"><![CDATA[å‰è¨€next ä¸»é¢˜é»˜è®¤èƒŒæ™¯æ˜¯ç™½è‰², çœ‹å¤šäº†éš¾å…æ„Ÿè§‰ä¹å‘³. æˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ ·å¼ä¸ºå…¶æ·»åŠ èƒŒæ™¯å›¾ç‰‡. æ“ä½œæµç¨‹æˆ‘ä»¬ç›´æŽ¥åœ¨ NEXT é¢„ç•™çš„è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶ â€œthemes/next/source/css/_custom/custom.stylâ€ ä¸­æ·»åŠ è‡ªå·±çš„æ ·å¼å³å¯, åœ¨è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹ä»£ç : 12345678910111213141516171819// æ·»åŠ èƒŒæ™¯å›¾ç‰‡body &#123; background: url(https://source.unsplash.com/random/1600x900?wallpapers); background-size: cover; background-repeat: no-repeat; background-attachment: fixed; background-position: 50% 50%;&#125;// ä¿®æ”¹ä¸»ä½“é€æ˜Žåº¦.main-inner &#123; background: #fff; opacity: 0.8;&#125;// ä¿®æ”¹èœå•æ é€æ˜Žåº¦.header-inner &#123; opacity: 0.8;&#125; å…¶ä¸­: background: url() ä¸­å¡«å†™çš„æ˜¯èƒŒæ™¯å›¾ç‰‡çš„ url åœ°å€, è¿™é‡Œè°ƒç”¨äº† Unsplash çš„ API, éšæœºé€‰ç”¨è¯¥ç½‘ç«™çš„é«˜æ¸…ç¾Žå›¾ä½œä¸ºåšå®¢èƒŒæ™¯. è¯¥ç½‘ç«™æ‰€æœ‰å›¾ç‰‡éƒ½æ˜¯å…è´¹å•†ç”¨çš„, æ‰€ä»¥æ— é¡»æ‹…å¿ƒä¾µæƒé—®é¢˜;ç½‘ç«™ API è¿˜æœ‰å¾ˆå¤šæœ‰è¶£çš„çŽ©æ³•, å‚è§: Documentation opacity æŒ‡å®šäº†å¯¹åº”å…ƒç´ çš„é€æ˜Žåº¦, è¿™é‡Œæ˜¯ â€œ0.8â€, å¯ä»¥æŒ‰éœ€æ›´æ”¹.]]></content>
      <categories>
        <category>å»ºç«™</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>å»ºç«™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoä¿®æ”¹æ°¸ä¹…é“¾æŽ¥çš„é»˜è®¤æ ¼å¼]]></title>
    <url>%2Fposts%2F36589e41.html</url>
    <content type="text"><![CDATA[Hexoçš„æ°¸ä¹…é“¾æŽ¥çš„é»˜è®¤æ ¼å¼æ˜¯:year/:month/:day/:title/ï¼Œæ¯”å¦‚è®¿é—®ç«™ç‚¹ä¸‹æŸä¸€ç¯‡æ–‡ç« æ—¶ï¼Œå…¶è·¯å¾„æ˜¯ 2018/04/12/xxxx/ï¼Œå¦‚æžœæˆ‘ä»¬çš„æ–‡ç« æ ‡é¢˜æ˜¯ä¸­æ–‡çš„ï¼Œé‚£ä¹ˆè¯¥è·¯å¾„å°±ä¼šå‡ºçŽ°ä¸­æ–‡å­—ç¬¦ã€‚åœ¨è·¯å¾„ä¸­å‡ºçŽ°äº†ä¸­æ–‡å­—ç¬¦å¾ˆå®¹æ˜“å¼•å‘å„ç§é—®é¢˜ï¼Œè€Œä¸”ä¹Ÿä¸åˆ©äºŽseoï¼Œå› ä¸ºè·¯å¾„åŒ…å«äº†å¹´æœˆæ—¥ä¸‰ä¸ªå±‚çº§ï¼Œå±‚çº§å¤ªæ·±ä¸åˆ©äºŽç™¾åº¦èœ˜è››æŠ“å–ã€‚ *è§£å†³åŠžæ³•å°±æ˜¯åˆ©ç”¨å…¶å®ƒçš„æ’ä»¶æ¥ç”Ÿæˆå”¯ä¸€çš„è·¯å¾„ï¼Œè¿™æ ·å°±ç®—æˆ‘ä»¬çš„æ–‡ä»¶æ ‡é¢˜éšæ„ä¿®æ”¹ï¼Œè€Œä¸ä¼šå¯¼è‡´åŽŸæœ¬çš„é“¾æŽ¥å¤±æ•ˆè€Œé€ æˆç«™ç‚¹ä¸‹å­˜åœ¨å¤§é‡çš„æ­»é“¾ã€‚ * å®‰è£…æ’ä»¶åœ¨ç«™ç‚¹æ ¹ç›®å½•ä½¿ç”¨ git bash æ‰§è¡Œå‘½ä»¤ï¼š 1npm install hexo-abbrlink --save ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„_config.yml æ–‡ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼š 123456# permalink: :year/:month/:day/:title/# permalink_defaults:permalink: posts/:abbrlink.htmlabbrlink: alg: crc32 # ç®—æ³•ï¼šcrc16(default) and crc32 rep: hex # è¿›åˆ¶ï¼šdec(default) and hex è¿™é‡Œå°†é¡µé¢éƒ½æ·»åŠ äº†.htmlçš„åŽç¼€ï¼Œç”¨æ¥ä¼ªè£…æˆé™æ€é¡µé¢(è™½è¯´Hexoçš„é¡µé¢æœ¬èº«å°±æ˜¯é™æ€é¡µé¢)ï¼Œè¿™æ ·å¯ä»¥ç›´æŽ¥ä»Žè·¯å¾„å°±çŸ¥é“è¿™æ˜¯ä¸ªé™æ€é¡µé¢ï¼Œæ–¹ä¾¿seoã€‚ æŽ¥ä¸‹æ¥é‡æ–°éƒ¨ç½²ä¸‰è¿žï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ–‡ç« è·¯å¾„å˜æˆäº†/posts/xxxxx.htmlï¼ŒæŽ¥ä¸‹æ¥å°±ç®—æˆ‘ä»¬å°†æ–‡å­—æ ‡é¢˜å‘½åä¸ºä¸­æ–‡ä¹Ÿæ²¡é—®é¢˜äº†ã€‚]]></content>
      <categories>
        <category>å»ºç«™</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>å»ºç«™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Animationä½ç§»æ¸å˜ç»„åˆåŠ¨ç”»äº†è§£ä¸€ä¸‹]]></title>
    <url>%2Fposts%2F91718fcd.html</url>
    <content type="text"><![CDATA[ä¸€ï¼šéœ€æ±‚åˆ†æžæœ€è¿‘è¦å®žçŽ°ä¸€ä¸ªviewä¸Šä¸‹å¾ªçŽ¯æ»šåŠ¨çš„åŠ¨ç”»ï¼Œéœ€è¦å¸¦æœ‰ä½ç½®ç§»åŠ¨å’Œé€æ˜Žåº¦è½¬å˜çš„åŠ¨ç”»ã€‚ç±»ä¼¼äºŽä»ŽAåˆ°Bå‘ç”Ÿä½ç§»åŠ¨ç”»ï¼Œä¸”viewé€æ¸æ˜¾ç¤ºã€‚è€Œä»ŽBåˆ°Cå‘ç”Ÿä½ç§»åŠ¨ç”»ï¼Œä¸”viewæ¸å˜æš—æ¶ˆå¤±ã€‚å®žçŽ°æ•ˆæžœå¦‚å›¾æ‰€ç¤ºï¼š äºŒï¼šéœ€æ±‚æ‹†åˆ†æŽ¥åˆ°è¿™ä¸ªéœ€æ±‚åŽï¼Œé¦–å…ˆå°†éœ€æ±‚è¿›è¡Œç»†åˆ†ï¼Œåˆ†ä¸ºä½ç§»åŠ¨ç”»å’Œé€æ¸å˜é‡ï¼ˆå˜æš—ï¼‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚å¯¹åº”çš„Androidçš„åŠ¨ç”»ç±»åˆ†åˆ«æ˜¯TranslateAnimation(ä½ç§»åŠ¨ç”»)å’ŒAlphaAniamtion(é€æ˜Žåº¦å˜åŒ–åŠ¨ç”»)ã€‚é¦–å…ˆå…ˆç†Ÿæ‚‰ä¸€ä¸‹è¿™ä¸¤ç§åŠ¨ç”»ã€‚ 1ï¼šTranslateAnimation ä½ç§»åŠ¨ç”»123456789101112131415private void startTranslateAnimation() &#123; /** * è¿›è¡Œä½ç§»åŠ¨ç”»ï¼Œæ ‡å‡†æ­¥éª¤ * 1. åˆ›å»ºä½ç§»åŠ¨ç”»å¯¹è±¡ * æž„é€ å‡½æ•° TranslateAnimation(float fromXDelta, float toXDelta, float fromYDelta, float toYDelta) * å‚æ•°å«ä¹‰ï¼šç›¸å¯¹äºŽåŽŸå›¾ä½ç½® fromXDelta Xè½´èµ·ç‚¹ç›¸å¯¹äºŽåŽŸå›¾åç§» toXDelta Xè½´ç»ˆç‚¹ç›¸å¯¹äºŽåŽŸå›¾åç§» * fromYDelta Yè½´èµ·ç‚¹ç›¸å¯¹äºŽåŽŸå›¾åç§» toYDelta Yè½´ç»ˆç‚¹ç›¸å¯¹äºŽåŽŸå›¾åç§» * 2. è®¾ç½®åŠ¨ç”»ç»ˆç‚¹æ˜¯å¦ä¿æŒ setFillAfter ï¼š true åŠ¨ç”»ç»“æŸåŽç•™åœ¨ç»ˆç‚¹ false:åŠ¨ç”»ç»“æŸåŽè¿”å›žèµ·ç‚¹ */ TranslateAnimation translateAnimation = new TranslateAnimation(0.0f, 0.0f, 0.0f, -200.0f); translateAnimation.setFillAfter(true); translateAnimation.setDuration(1000); mTextView.startAnimation(translateAnimation);&#125; è¿™é‡Œéœ€è¦æ³¨æ„çš„ä¸€ä¸ªå°ç‚¹ï¼šè®¾ç½®FillAfterçš„å€¼ï¼Œä¸ºtrueä»£è¡¨åŠ¨ç”»åŽViewåœç•™åœ¨ç»ˆç‚¹ä½ç½®å¤„ï¼Œfalseä»£è¡¨åŠ¨ç”»ç»“æŸåŽè¿”å›žèµ·ç‚¹ã€‚ 2ï¼šAlphaAnimation é€æ˜Žåº¦è½¬å˜åŠ¨ç”»123456789101112private void startAlphaAnimation() &#123; /** * è¿›è¡Œé€æ˜Žåº¦å˜åŒ–åŠ¨ç”»ï¼Œæ ‡å‡†æ­¥éª¤ * 1. åˆ›å»ºAlphaAnimationåŠ¨ç”» * æž„é€ å‡½æ•° AlphaAnimation fromAlphaVal toAlphaVal */ AlphaAnimation alphaAnimation = new AlphaAnimation(0.0f, 1.0f); alphaAnimation.setFillAfter(true); alphaAnimation.setDuration(1000); mTextView.startAnimation(alphaAnimation);&#125; 3ï¼šåŒæ—¶å®Œæˆä½ç§»å’Œé€æ˜Žåº¦åŠ¨ç”»éœ€æ±‚1234567891011121314151617private void startAppearanceAnimation() &#123; /** * æ ¸å¿ƒç±» AnimationSet é¡¾åæ€ä¹‰ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå°†å¤šç§åŠ¨ç”»æ”¾åœ¨ä¸€ä¸ªseté›†åˆé‡Œé¢ * äº§ç”Ÿæ¸æ¸æ˜¾ç¤º+ä½ç§»åŠ¨ç”»ï¼Œå°†åŠ é€Ÿå°ç«ç®­æ¸æ¸æ˜¾ç¤ºå‡ºæ¥; * */ TranslateAnimation translateAnimation = new TranslateAnimation(0.0f, 0.0f, 0.0f, -200.0f); AlphaAnimation alphaAnimation = new AlphaAnimation(0.0f, 1.0f); AnimationSet animationSet = new AnimationSet(true); animationSet.setFillAfter(true); animationSet.setDuration(1000); animationSet.addAnimation(translateAnimation); animationSet.addAnimation(alphaAnimation); mTextView.startAnimation(animationSet);&#125; å®žçŽ°å åŠ çš„åŠ¨ç”»æ•ˆæžœï¼šè¿™é‡Œä¸€å®šè¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹AnimationSetåŠ¨ç”»ï¼ŒfillAfterå’Œdurationéœ€è¦åœ¨AniamtionSetå¯¹è±¡ä¸­è®¾ç½®ï¼Œä¸è¦è®¾ç½®å•ä¸ªåŠ¨ç”»å¯¹è±¡ä¸Šã€‚ 4ï¼šå®Œæˆçš„åŠ¨ç”»è¿‡ç¨‹ï¼ˆä½ç§»+æ¸æ¸æ˜¾ç¤º åœç•™ ä½ç§»+æ¸æ¸éšè—ï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114package com.zm.animationdemo;import android.os.Bundle;import android.os.Handler;import android.support.v7.app.AppCompatActivity;import android.view.View;import android.view.animation.AlphaAnimation;import android.view.animation.Animation;import android.view.animation.AnimationSet;import android.view.animation.TranslateAnimation;import android.widget.Button;import android.widget.TextView;import java.util.ArrayList;import java.util.List;public class MainActivity extends AppCompatActivity &#123; TextView tv_text; Button btn; List&lt;String&gt; textList = new ArrayList&lt;String&gt;(); @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); tv_text = findViewById(R.id.tv_text); btn = findViewById(R.id.btn); btn.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; startAppearanceAnimation(); &#125; &#125;); textList.add("Hello World!"); textList.add("Welcome to my blog!"); textList.add("https://zhangmiao.cc"); textList.add("Knowledge is power."); textList.add("Learn and live."); textList.add("å¯ä»¥ä¸æˆåŠŸï¼Œä½†ä¸å¯ä»¥ä¸æˆé•¿ï¼"); textList.add("åŠ æ²¹ðŸ’ª"); &#125; private void startAppearanceAnimation() &#123; /** * æ ¸å¿ƒç±» AnimationSet é¡¾åæ€ä¹‰ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºå°†å¤šç§åŠ¨ç”»æ”¾åœ¨ä¸€ä¸ªseté›†åˆé‡Œé¢ * äº§ç”Ÿæ¸æ¸æ˜¾ç¤º+ä½ç§»åŠ¨ç”» * */ TranslateAnimation translateAnimation = new TranslateAnimation(0.0f, 0.0f, 0.0f, -50.0f); AlphaAnimation alphaAnimation = new AlphaAnimation(0.0f, 1.0f); AnimationSet animationSet = new AnimationSet(true); animationSet.setFillAfter(true); animationSet.setDuration(1000); animationSet.addAnimation(translateAnimation); animationSet.addAnimation(alphaAnimation); animationSet.setAnimationListener(new Animation.AnimationListener() &#123; @Override public void onAnimationStart(Animation animation) &#123; &#125; @Override public void onAnimationEnd(Animation animation) &#123; new Handler().postDelayed(new Runnable() &#123; @Override public void run() &#123; startDisappearanceAnimation(); &#125; &#125;, 1500); &#125; @Override public void onAnimationRepeat(Animation animation) &#123; &#125; &#125;); tv_text.startAnimation(animationSet); int index = (int) (Math.random() * textList.size()); tv_text.setText(textList.get(index)); &#125; private void startDisappearanceAnimation() &#123; TranslateAnimation translateAnimation = new TranslateAnimation(0.0f, 0.0f, -50.0f, -100.0f); AlphaAnimation alphaAnimation = new AlphaAnimation(1.0f, 0.0f); AnimationSet animationSet = new AnimationSet(true); animationSet.setFillAfter(true); animationSet.setDuration(1000); animationSet.addAnimation(translateAnimation); animationSet.addAnimation(alphaAnimation); animationSet.setAnimationListener(new Animation.AnimationListener() &#123; @Override public void onAnimationStart(Animation animation) &#123; &#125; @Override public void onAnimationEnd(Animation animation) &#123; startAppearanceAnimation(); &#125; @Override public void onAnimationRepeat(Animation animation) &#123; &#125; &#125;); tv_text.startAnimation(animationSet); &#125;&#125; æ€»ç»“ ä½ç§»åŠ¨ç”»TranslateAnimationå®žçŽ°ä½ç§»ï¼ŒSetFIllAfter=trueå¯è®©Viewåœç•™åœ¨åŠ¨ç”»ç»ˆç‚¹å¤„,falseè¿”å›žåŠ¨ç”»èµ·ç‚¹ é€æ˜Žåº¦åŠ¨ç”» AlphaAnimationå®žçŽ°é€æ˜Žåº¦å˜åŒ–ï¼Œå¯å®žçŽ°Viewçš„æ¸æ˜¾æˆ–è€…æ¸éšæ•ˆæžœ åŠ¨ç”»æ•ˆæžœå¯ä»¥å åŠ å±•ç¤ºï¼Œé€šè¿‡AnimationSetå®žçŽ°ã€‚æ•´ä¸ªåŠ¨ç”»çš„fillAfterå’Œdurationéœ€è¦è®¾ç½®åœ¨AnimationSetå¯¹è±¡ä¸Šï¼Œè€Œä¸æ˜¯å•ä¸ªå¯¹è±¡å•ç‹¬è®¾ç½®ï¼ˆå•ç‹¬è®¾ç½®ä¸ä¼šæœ‰æ•ˆæžœï¼‰]]></content>
      <categories>
        <category>Android</category>
        <category>Animation</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Animation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸¤ç§èŽ·å–æ ˆé¡¶Activityçš„æ–¹æ³•]]></title>
    <url>%2Fposts%2F104e2eeb.html</url>
    <content type="text"><![CDATA[æœ‰æ—¶å€™ï¼Œéœ€è¦èŽ·å–å½“å‰ä½äºŽæ ˆé¡¶çš„activityçš„å®žä¾‹ã€‚è¿™é‡Œä»‹ç»2ç§æ–¹æ³•ï¼Œä»¥åŠå„è‡ªé€‚ç”¨çš„åœºæ™¯ã€‚ ç¬¬ä¸€ç§æ–¹æ³•ï¼šèŽ·å–æ ˆé¡¶activityçš„å®žä¾‹åº”ç”¨åœºæ™¯ï¼šé¡¹ç›®ä¸­ï¼Œactivityéƒ½ç»§æ‰¿äºŽä¸€ä¸ªBaseActivityï¼Œåœ¨è¿™ä¸ªbaseä¸­ï¼Œæœ‰ä¸ªå¹¿æ’­æŽ¥æ”¶å™¨ï¼Œæ”¶åˆ°å¹¿æ’­ï¼Œå°±å¼¹å‡ºä¸€ä¸ªdialogã€‚çŽ°æ‰“å¼€å¤šä¸ªactivityï¼Œè¿™ä¸ªæ—¶å€™ï¼Œé€šè¿‡ä¸‰æ–¹æŽ¨é€ç­‰æ–¹æ³•ï¼Œå‘å‡ºä¸€ä¸ªå¹¿æ’­ï¼ŒbaseæŽ¥æ”¶åˆ°ã€‚å› ä¸ºåªéœ€è¦åœ¨æ ˆé¡¶çš„activityå¼¹å‡ºï¼Œè€Œä¸æ˜¯æ¯ä¸ªactivityéƒ½å¼¹å‡ºï¼Œæ‰€ä»¥ï¼Œéœ€è¦èŽ·å–æ ˆé¡¶activityçš„å®žä¾‹ï¼ˆå³ä¸Šä¸‹æ–‡ï¼Œä¼ ç»™dialogçš„æž„é€ æ–¹æ³•ï¼‰ï¼Œè€Œä¸èƒ½ç®€å•çš„ä¼ ä¸ªthisï¼Œå¦åˆ™ï¼Œä¼šå¯¼è‡´æ¯ä¸ªactivityéƒ½æœ‰dialogå¼¹å‡ºã€‚ èŽ·å–æ–¹æ³•ï¼šåœ¨applicationä¸­ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273public class MyApplication extends Application &#123; private static MyApplication mInstance; private Activity app_activity = null; @Override public void onCreate() &#123; super.onCreate(); mInstance = this; initGlobeActivity(); &#125; private void initGlobeActivity() &#123; registerActivityLifecycleCallbacks(new ActivityLifecycleCallbacks() &#123; @Override public void onActivityCreated(Activity activity, Bundle savedInstanceState) &#123; app_activity = activity; Log.e("onActivityCreated===", app_activity + ""); &#125; @Override public void onActivityDestroyed(Activity activity) &#123; app_activity = activity; Log.e("onActivityDestroyed===", app_activity + ""); &#125; /** Unused implementation **/ @Override public void onActivityStarted(Activity activity) &#123; app_activity = activity; Log.e("onActivityStarted===", app_activity + ""); &#125; @Override public void onActivityResumed(Activity activity) &#123; app_activity = activity; Log.e("onActivityResumed===", app_activity + ""); &#125; @Override public void onActivityPaused(Activity activity) &#123; app_activity = activity; Log.e("onActivityPaused===", app_activity + ""); &#125; @Override public void onActivityStopped(Activity activity) &#123; app_activity = activity; Log.e("onActivityStopped===", app_activity + ""); &#125; @Override public void onActivitySaveInstanceState(Activity activity, Bundle outState) &#123; &#125; &#125;); &#125; /** * èŽ·å–å®žä¾‹ * @return */ public static MyApplication getInstance() &#123; return mInstance; &#125; /** * å…¬å¼€æ–¹æ³•ï¼Œå¤–éƒ¨å¯é€šè¿‡ MyApplication.getInstance().getCurrentActivity() èŽ·å–åˆ°å½“å‰æœ€ä¸Šå±‚çš„activity */ public Activity getCurrentActivity() &#123; return app_activity; &#125;&#125; æ³¨æ„ï¼šinitGlobeActivity()ã€getInstance()ã€getCurrentActivity() è¿™3ä¸ªæ–¹æ³• ä½¿ç”¨æ–¹æ³•ï¼šåœ¨baseçš„å±•ç¤ºdialogæ–¹æ³•ä¸­123Activity currentActivity = MyApplication.getInstance().getCurrentActivity();Dialog dialog = new Dialog(currentActivity, R.style.PushDialog); ç¬¬äºŒç§æ–¹æ³•ï¼šèŽ·å–æ ˆé¡¶activityçš„å®Œæ•´åŒ…ååº”ç”¨åœºæ™¯ï¼šä»…ä»…ä¸ºäº†åˆ¤æ–­å½“å‰activityæ˜¯ä¸æ˜¯åœ¨æ ˆé¡¶ï¼Œä»¥ä¾¿å†³å®šè¦ä¸è¦å¼¹toastç­‰ç­‰ã€‚æ³¨æ„ï¼šèŽ·å–åˆ°çš„ä»…ä»…æ˜¯å®Œæ•´åŒ…åï¼Œåˆ¤æ–­å½“å‰activityåœ¨ä¸åœ¨æ ˆé¡¶ï¼Œéœ€è¦ç”¨åˆ°Stringæ–¹æ³•ä¸­çš„containsæ–¹æ³•ç­‰ã€‚è¿™ä¸ªæ—¶å€™éœ€è¦æ³¨æ„ï¼Œä»¥å…å‡ºé”™ã€‚å¦‚ï¼šæ ˆé¡¶activityåä¸ºABï¼Œé‡Œé¢åŒ…å«Aï¼Œå°±è®¤ä¸ºAæ˜¯åœ¨æ ˆé¡¶ï¼Œå°±å‡ºé”™äº†ã€‚æœ€å¥½è¿™ä¸ªactivityçš„åå­—å¾ˆç‰¹æ®Šï¼Œå’Œå…¶ä»–çš„æ²¡æœ‰é‡åˆéƒ¨åˆ† åœ¨å·¥å…·ç±»ä¸­åˆ›å»ºæ–¹æ³•ï¼š123456789101112131415/** * èŽ·å¾—æ ˆä¸­æœ€é¡¶å±‚çš„Activity * * @param context * @return */public static String getTopActivity(Context context) &#123; android.app.ActivityManager manager = (android.app.ActivityManager) context.getSystemService(context.ACTIVITY_SERVICE); List&lt;ActivityManager.RunningTaskInfo&gt; runningTaskInfos = manager.getRunningTasks(1); if (runningTaskInfos != null) &#123; return (runningTaskInfos.get(0).topActivity).toString(); &#125; else return null; &#125; ä½¿ç”¨ï¼š12String topActivity_1 = Util.getTopActivity(this);Log.e("topActivity_1", topActivity_1);]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Viewpager+FragmentåŠ¨æ€å¤„ç†ï¼ˆæ·»åŠ ã€åˆ é™¤ï¼‰]]></title>
    <url>%2Fposts%2Fbcdbaf4f.html</url>
    <content type="text"><![CDATA[é—®é¢˜åœ¨è¿›è¡ŒFragmentçš„æ·»åŠ å’Œåˆ é™¤æ—¶ï¼Œé€‚é…å™¨åˆ·æ–°ä¹‹åŽå‘çŽ°å¹¶æ²¡æœ‰ä»€ä¹ˆå˜åŒ–ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ ç†è§£FragmentPagerAdapter é€‚åˆå°‘é‡çš„é¡µé¢æ˜¾ç¤ºã€‚è¯¥ç±»æ¯ä¸€ä¸ªç”Ÿæˆçš„Fragmentå¯¹è±¡éƒ½ä¼šå‚¨å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥é€‚åˆç›¸å¯¹é™æ€ã€é¡µé¢å°‘çš„æƒ…å†µï¼Œå¦‚æžœæ˜¯é¡µé¢å¤šï¼Œä¸”Fragmentçš„å¤„ç†ç›¸å¯¹åŠ¨æ€ï¼ˆæ·»åŠ ã€åˆ é™¤ç­‰ï¼‰æ—¶ï¼Œä½¿ç”¨FragmentStatePagerAdapterè¾ƒä¸ºé€‚åˆã€‚ FragmentStatePagerAdapter é€‚åˆå¤§é‡çš„é¡µé¢æ˜¾ç¤ºï¼Œå½“é¡µé¢å¤„äºŽä¸å¯è§æ—¶ï¼Œå¯èƒ½ä¼šè¢«é”€æ¯ï¼Œåªä¿ç•™è¯¥ç‰‡æ®µçš„ä¿å­˜çŠ¶æ€ã€‚ä¸ŽFragmentPagerAdapteråˆ‡æ¢é¡µé¢äº§ç”Ÿçš„å¤§é‡å¼€é”€å¯¹æ¯”ï¼Œè¿™å…è®¸äº†é€‚é…å™¨ä¿æŒä¸Žæ¯ä¸ªè¢«è®¿é—®é¡µé¢ç›¸å…³è”çš„æ›´å°‘çš„å­˜å‚¨å™¨ã€‚ åˆ†æžåœ¨åˆ‡æ¢é¡µé¢æ—¶ï¼ŒFragmentPagerAdapterä¸ŽFragmentStatePagerAdapterå¯¹äºŽä¸Šä¸Šé¡µï¼ˆé¢„åŠ è½½é»˜è®¤1ï¼Œæ‰€ä»¥å–ä¸Šä¸Šé¡µï¼‰çš„å¤„ç†æ˜¯ä¸ç›¸åŒçš„ï¼ŒFragmentPagerAdapteråªæ˜¯é”€æ¯å¯¹åº”Fragmentçš„è§†å›¾ï¼Œè€ŒFragmentStatePagerAdapteråˆ™æ˜¯æŠŠFragmentçš„å®žä¾‹å’Œè§†å›¾éƒ½é”€æ¯äº†ã€‚ å½“æˆ‘ä»¬å¯¹é¡µé¢è¿›è¡ŒåŠ¨æ€å¤„ç†æ—¶ï¼Œæ·»åŠ ï¼ˆæˆ–åˆ é™¤ï¼‰æ˜¯å¯¹é€‚é…å™¨æ‰€æŒæœ‰çš„listå¯¹è±¡è¿›è¡Œé•¿åº¦çš„å˜åŒ–ï¼Œæ“ä½œå®Œä¹‹åŽå°±è¿›è¡Œé€‚é…å™¨çš„åˆ·æ–°ï¼Œä¹Ÿå°±æ˜¯notifyDataSetChangedæ–¹æ³•ï¼Œå…ˆçœ‹çœ‹è¯¥æ–¹æ³•ï¼š 12345678910//PagerAdapter.classpublic void notifyDataSetChanged() &#123; synchronized (this) &#123; if (mViewPagerObserver != null) &#123; //æ ¹æ®æºç å¯çŸ¥mViewPagerObserverçš„å¯¹è±¡æ˜¯ViewPageré‡Œé¢PagerObserverç±»çš„å®žä¾‹ mViewPagerObserver.onChanged(); &#125; &#125; mObservable.notifyChanged(); &#125; 123456789101112131415//ViewPager.classprivate class PagerObserver extends DataSetObserver &#123; PagerObserver() &#123; &#125; @Override public void onChanged() &#123; //è°ƒç”¨çš„æ˜¯è¯¥æ–¹æ³• dataSetChanged(); &#125; @Override public void onInvalidated() &#123; dataSetChanged(); &#125; &#125; å¯¹FragmentPagerAdapterï¼ˆæˆ–FragmentStatePagerAdapterï¼‰æ‰§è¡Œçš„æ–¹æ³•å¤§æ¦‚è¿›è¡Œæ³¨é‡Šä¸€ä¸‹ï¼Œæ–¹ä¾¿ç†è§£ï¼Œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374//ViewPager.classvoid dataSetChanged() &#123; // This method only gets called if our observer is attached, so mAdapter is non-null. final int adapterCount = mAdapter.getCount(); mExpectedAdapterCount = adapterCount; boolean needPopulate = mItems.size() &lt; mOffscreenPageLimit * 2 + 1 &amp;&amp; mItems.size() &lt; adapterCount; int newCurrItem = mCurItem; boolean isUpdating = false; //éåŽ†æ‰€æœ‰item for (int i = 0; i &lt; mItems.size(); i++) &#123; final ItemInfo ii = mItems.get(i); //å…ˆè°ƒç”¨adapterçš„getItemPositionæ–¹æ³•ï¼ŒèŽ·å¾—newPoså€¼ final int newPos = mAdapter.getItemPosition(ii.object); if (newPos == PagerAdapter.POSITION_UNCHANGED) &#123; continue; &#125; if (newPos == PagerAdapter.POSITION_NONE) &#123; mItems.remove(i); i--; if (!isUpdating) &#123; mAdapter.startUpdate(this); isUpdating = true; &#125; //newPoså€¼ä¸ºPagerAdapter.POSITION_NONEçš„æ—¶å€™æ‰ä¼šæ‰§è¡ŒdestroyItemæ–¹æ³• mAdapter.destroyItem(this, ii.position, ii.object); needPopulate = true; if (mCurItem == ii.position) &#123; // Keep the current item in the valid range newCurrItem = Math.max(0, Math.min(mCurItem, adapterCount - 1)); needPopulate = true; &#125; continue; &#125; if (ii.position != newPos) &#123; if (ii.position == mCurItem) &#123; // Our current item changed position. Follow it. newCurrItem = newPos; &#125; ii.position = newPos; needPopulate = true; &#125; &#125; if (isUpdating) &#123; //finishUpdateæ–¹æ³•ä¸»è¦æ˜¯å¯¹äº‹åŠ¡çš„æ“ä½œè¿›è¡Œcommit mAdapter.finishUpdate(this); &#125; Collections.sort(mItems, COMPARATOR); if (needPopulate) &#123; // Reset our known page widths; populate will recompute them. final int childCount = getChildCount(); for (int i = 0; i &lt; childCount; i++) &#123; final View child = getChildAt(i); final LayoutParams lp = (LayoutParams) child.getLayoutParams(); if (!lp.isDecor) &#123; lp.widthFactor = 0.f; &#125; &#125; // setCurrentItemInternal(newCurrItem, false, true); requestLayout(); &#125; &#125; Adapter.getItemPositionæ–¹æ³•é»˜è®¤è¿”å›žçš„æ˜¯PagerAdapter.POSITION_UNCHANGEDå€¼ï¼Œå¦‚æžœæˆ‘ä»¬ä¸é‡å†™getItemPositionæ–¹æ³•ï¼Œä½¿å…¶è¿”å›žPagerAdapter.POSITION_NONEçš„è¯ï¼Œé‚£ä¹ˆé»˜è®¤æ˜¯ä¸æ“ä½œdestroyItemæ–¹æ³•çš„ï¼Œè€Œåœ¨destroyItemæ–¹æ³•ä¸­ï¼ŒFragmentPagerAdapterå’ŒFragmentStatePagerAdapter å¯¹Fragmentå¯¹è±¡çš„æ“ä½œä¹Ÿä¸ä¸€æ ·ï¼Œä¸Šé¢æœ‰è¯´è¿‡ï¼ŒFragmentPagerAdapteræ˜¯åªé”€æ¯è§†å›¾ï¼ŒFragmentStatePagerAdapter æ˜¯æŠŠå®žä¾‹å’Œè§†å›¾éƒ½é”€æ¯ï¼Œå°±æ˜¯åœ¨destroyItemæ–¹æ³•å®žçŽ°çš„ï¼Œè´´ä»£ç ï¼š 123456789101112131415161718192021222324252627282930//FragmentPagerAdapter@Overridepublic void destroyItem(ViewGroup container, int position, Object object) &#123; if (mCurTransaction == null) &#123; mCurTransaction = mFragmentManager.beginTransaction(); &#125; if (DEBUG) Log.v(TAG, "Detaching item #" + getItemId(position) + ": f=" + object + " v=" + ((Fragment)object).getView()); //è¿™é‡Œæ˜¯å¯¹fragmentè¿›è¡Œdetachæ“ä½œï¼ŒfragmentManagerä¸­è¿˜ä¿å­˜è¯¥å®žä¾‹ mCurTransaction.detach((Fragment)object); &#125;//FragmentStatePagerAdapter @Overridepublic void destroyItem(ViewGroup container, int position, Object object) &#123; Fragment fragment = (Fragment) object; if (mCurTransaction == null) &#123; mCurTransaction = mFragmentManager.beginTransaction(); &#125; if (DEBUG) Log.v(TAG, "Removing item #" + position + ": f=" + object + " v=" + ((Fragment)object).getView()); while (mSavedState.size() &lt;= position) &#123; mSavedState.add(null); &#125; mSavedState.set(position, fragment.isAdded() ? mFragmentManager.saveFragmentInstanceState(fragment) : null); mFragments.set(position, null); //è€Œè¿™é‡Œæ˜¯å¯¹fragmentè¿›è¡Œremoveï¼Œç›´æŽ¥åœ¨fragmentManagerä¸­ç§»é™¤æŽ‰ mCurTransaction.remove(fragment); &#125; è§£å†³æ ¹æ®ä¸Šé¢çš„åˆ†æžï¼Œåœ¨è¿›è¡Œæ·»åŠ åˆ é™¤çš„æ—¶å€™ï¼Œæˆ‘é‡‡ç”¨äº†FragmentStatePagerAdapterçš„å­ç±»ï¼Œè¿›è¡Œæ–¹æ³•çš„é‡å†™ï¼Œä¸»è¦æ˜¯å¯¹è¯¥ç±»çš„ä¸¤ä¸ªæ–¹æ³•ï¼ˆinstantiateItemå’ŒdestroyItemï¼‰è¿›è¡Œé‡å†™ï¼Œæ›¿æ¢çˆ¶ç±»çš„å®žçŽ°ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081package com.voctex.adapter;import android.os.Parcelable;import android.support.v4.app.Fragment;import android.support.v4.app.FragmentManager;import android.support.v4.app.FragmentStatePagerAdapter;import android.support.v4.view.PagerAdapter;import android.view.ViewGroup;import java.util.ArrayList;import java.util.List;public class DynamicFragmentAdapter extends FragmentStatePagerAdapter &#123; private FragmentManager mFragmentManager; private List&lt;Fragment&gt; mFragments = new ArrayList&lt;&gt;(); public DynamicFragmentAdapter(FragmentManager fm, List&lt;Fragment&gt; list) &#123; super(fm); this.mFragmentManager = fm; if (list == null) return; this.mFragments.addAll(list); &#125; public void updateData(List&lt;Fragment&gt; mlist) &#123; if (mlist == null) return; this.mFragments.clear(); this.mFragments.addAll(mlist); notifyDataSetChanged(); &#125; @Override public Fragment getItem(int arg0) &#123; return mFragments.get(arg0);// &#125; @Override public int getCount() &#123; return mFragments.size();// &#125; @Override public Parcelable saveState() &#123; return null; &#125; @Override public int getItemPosition(Object object) &#123; if (!((Fragment) object).isAdded() || !mFragments.contains(object)) &#123; return PagerAdapter.POSITION_NONE; &#125; return mFragments.indexOf(object); &#125; @Override public Object instantiateItem(ViewGroup container, int position) &#123; Fragment instantiateItem = ((Fragment) super.instantiateItem(container, position)); Fragment item = mFragments.get(position); if (instantiateItem == item) &#123; return instantiateItem; &#125; else &#123; //å¦‚æžœé›†åˆä¸­å¯¹åº”ä¸‹æ ‡çš„fragmentå’ŒfragmentManagerä¸­çš„å¯¹åº”ä¸‹æ ‡çš„fragmentå¯¹è±¡ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆå°±æ˜¯æ–°æ·»åŠ çš„ï¼Œæ‰€ä»¥è‡ªå·±addè¿›å…¥ï¼›è¿™é‡Œä¸ºä»€ä¹ˆä¸ç›´æŽ¥è°ƒç”¨superæ–¹æ³•å‘¢ï¼Œå› ä¸ºfragmentçš„mIndexæžçš„é¬¼ï¼Œä»¥åŽæœ‰æœºä¼šå†è¡¥ä¸€è¡¥ã€‚ mFragmentManager.beginTransaction().add(container.getId(), item).commitNowAllowingStateLoss(); return item; &#125; &#125; @Override public void destroyItem(ViewGroup container, int position, Object object) &#123; Fragment fragment = (Fragment) object; //å¦‚æžœgetItemPositionä¸­çš„å€¼ä¸ºPagerAdapter.POSITION_NONEï¼Œå°±æ‰§è¡Œè¯¥æ–¹æ³•ã€‚ if (mFragments.contains(fragment)) &#123; super.destroyItem(container, position, fragment); return; &#125; //è‡ªå·±æ‰§è¡Œç§»é™¤ã€‚å› ä¸ºmFragmentsåœ¨åˆ é™¤çš„æ—¶å€™å°±æŠŠæŸä¸ªfragmentå¯¹è±¡ç§»é™¤äº†ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½å¾—è‡ªå·±ç§»é™¤åœ¨fragmentManagerä¸­çš„è¯¥å¯¹è±¡ã€‚ mFragmentManager.beginTransaction().remove(fragment).commitNowAllowingStateLoss(); &#125; &#125; ç»“æŸè¯­ åœ¨ä¸æ–­çš„çœ‹æºç ï¼ŒæŸ¥èµ„æ–™ï¼Œè°ƒè¯•ç¨‹åºä¸­ï¼Œç»ˆäºŽæ˜¯æŠŠè¯¥é—®é¢˜è§£å†³äº†ï¼Œç½‘ä¸Šçš„èµ„æ–™éƒ½è¯´å¾—æ¨¡æ£±ä¸¤å¯ï¼Œå¾ˆå¤šæ—¶å€™éƒ½å¾—è‡ªå·±æ“åˆ€ï¼Œç†è§£äº†æ‰æ˜¯è‡ªå·±çš„ï¼Œç‰¹åˆ«æ˜¯Fragmentåœ¨FragmentManagerä¸­çš„mIndexå€¼ï¼Œæœ‰ç‚¹å‘ï¼Œè¿™é‡Œæ²¡æ‹¿å‡ºæ¥è¯´ï¼Œä»¥åŽæœ‰æœºä¼šå†è¡¥è¡¥ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Viewpager</tag>
        <tag>Fragment</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½ å¯èƒ½ä¸çŸ¥é“çš„ Mac æŠ€å·§ - æˆªå›¾ï¼ŒGif åˆ¶ä½œåŠ App æŽ¨è]]></title>
    <url>%2Fposts%2Fae0ce15d.html</url>
    <content type="text"><![CDATA[æ¦‚è¿°é¦–å…ˆè¦è¯´æ˜Žçš„æ˜¯ï¼Œæˆ‘ä¸å¯èƒ½ï¼Œä¹Ÿä¸æ‰“ç®—æŠŠæ‰€æœ‰å¿«æ·é”®éƒ½åˆ—å‡ºæ¥ã€‚å†™è¿™ç¯‡åšæ–‡çš„ç›®çš„æ˜¯åˆ—å‡ºæ¥é‚£äº›æˆ‘ç»å¸¸ä½¿ç”¨çš„ï¼Œè€Œä¸”æˆ‘è®¤ä¸ºå¯ä»¥æ˜¾è‘—çš„æé«˜å·¥ä½œæ•ˆçŽ‡çš„å¿«æ·é”®ã€‚æ‰€ä»¥å¤šå°‘ä¼šæœ‰äº›ä¸»è§‚è‰²å½© Anywayï¼Œè€è§„çŸ©ï¼Œå¦‚æžœå¤§å®¶æœ‰ä»»ä½•ç–‘é—®ã€æ„è§æˆ–è€…å»ºè®®ï¼Œè¯·åœ¨ä¸‹æ–¹ç•™è¨€è¯„è®º æˆªå›¾macOS ç³»ç»Ÿå†…ç½®äº†æˆªå›¾åŠŸèƒ½ï¼Œæ¯æ¬¡æˆªå›¾éƒ½ä¼šå‘å‡ºå£°éŸ³ï¼Œå½“ç„¶è¿™ä¸ªå£°éŸ³å¯ä»¥å…³ï¼ŒåŽé¢ä¼šæåˆ°ã€‚åŸºç¡€æ“ä½œæœ‰ä»¥ä¸‹å››ç§ï¼ˆå¿«æ·é”®ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼ŒåŽé¢ä¹Ÿä¼šæåˆ°ï¼‰ï¼š 1. æˆªå›¾å¹¶ä¿å­˜è‡³æ¡Œé¢123Cmd + Shift + 3 æˆªå–æ•´ä¸ªå±å¹•ï¼Œå¹¶ä¿å­˜æˆªå›¾è‡³æ¡Œé¢Cmd + Shift + 4 æˆªå–åŒºåŸŸï¼Œå¹¶ä¿å­˜æˆªå›¾è‡³æ¡Œé¢ æ¿€æ´»åŒºåŸŸæˆªå›¾ä¹‹åŽï¼Œé¼ æ ‡æŒ‡é’ˆä¼šå˜æˆä¸‹å›¾è¿™æ ·ï¼Œç„¶åŽæŒ‰ä½æ‹–åŠ¨å°±å¯ä»¥äº† 2. æˆªå›¾å¹¶å¤åˆ¶æœ‰äº›æ—¶å€™ï¼Œæˆªå›¾å†…å®¹åªæ˜¯æˆ‘ä»¬ä¸´æ—¶è¦ç”¨ä¸€ä¸‹çš„ï¼Œè€Œä¸æ‰“ç®—ä¿å­˜ä¸‹æ¥ã€‚æˆ‘ä»¬åªéœ€è¦ï¼š 123Cmd + Ctrl + Shift + 3 æˆªå–æ•´ä¸ªå±å¹•å¹¶å¤åˆ¶Cmd + Ctrl + Shift + 4 æˆªå–åŒºåŸŸå¹¶å¤åˆ¶ ä»¥ä¸Šä¸¤ä¸ªå¿«æ·é”®ï¼Œæˆªå›¾ä¹‹åŽï¼Œæˆ‘ä»¬åªéœ€è¦ â€œCmdâ€ + â€œvâ€ å°±å¯ä»¥éšæ„ç²˜è´´äº† 3. å…³äºŽæ–°ç‰ˆ MacBook çš„ Touch Baræ–°ç‰ˆçš„ MacBook åŠ å…¥äº† Touch Barï¼ŒåŒæ—¶ç³»ç»Ÿä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†æˆªå– Touch Bar å±å¹•çš„å¿«æ·é”®ï¼š 123Cmd + Shift + 6 æˆªå– Touch Bar æ˜¾ç¤ºå†…å®¹ï¼Œå¹¶ä¿å­˜è‡³æ¡Œé¢Cmd + Ctrl + Shift + 6 æˆªå– Touch Bar æ˜¾ç¤ºå†…å®¹å¹¶å¤åˆ¶ 4. ä¸€äº›é«˜çº§æ“ä½œa. æˆªå–çª—å£ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„åŠŸèƒ½å°±æ˜¯æˆªå–æŸä¸ªçª—å£ï¼Œä¸éœ€è¦ç”¨æˆªå–åŒºåŸŸçš„å¿«æ·é”®ç„¶åŽæ‹‰æ»¡æ•´ä¸ªçª—å£ï¼Œåªéœ€è¦åœ¨ â€œCmdâ€ + [â€œCtrlâ€ +] â€œShiftâ€ + â€œ4â€ ä¹‹åŽæŒ‰ä¸€ä¸‹ ç©ºæ ¼ï¼Œç„¶åŽé¼ æ ‡å’Œçª—å£å°±ä¼šå˜æˆè¿™æ ·ï¼š é¼ æ ‡ä¼šå˜æˆçº¢è‰²ç®­å¤´æŒ‡çš„é‚£ä¸ªç…§ç›¸æœºå½¢çŠ¶ï¼Œè¦æˆªå–çš„çª—å£ä¹Ÿä¼šå˜æˆâ€œé€‰ä¸­â€æ¨¡å¼çš„é¢œè‰²ã€‚è¿™æ—¶å€™åªè¦å•å‡»ä¸€ä¸‹é¼ æ ‡å°±å¯ä»¥äº†ç›´æŽ¥æˆªå–çª—å£äº†ï¼Œè¦å–æ¶ˆçš„è¯å°±æŒ‰ â€œESCâ€ã€‚åŒæ ·é“ç†ï¼Œå¿«æ·é”®åŠ ä¸Šäº† â€œCtrlâ€ å°±ä¼šå¤åˆ¶è¿™ä¸ªçª—å£çš„æˆªå›¾ã€‚å¦‚æžœæ²¡åŠ ï¼Œé‚£å°±ä¼šæŠŠè¿™ä¸ªçª—å£æˆªå›¾ä¿å­˜è‡³æ¡Œé¢ å¯èƒ½æœ‰äº›äººä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸Šé¢çš„â€œé€‰ä¸­â€æ¨¡å¼æ˜¯è¿™ä¹ˆæ¼‚ï¼ˆnanï¼‰äº®ï¼ˆkanï¼‰çš„é¢œè‰²ï¼Œåœ¨è¿™é‡Œå°±å¯ä»¥è®¾ç½®ï¼Œé¢œè‰²æ˜¯æˆ‘è‡ªå·±è°ƒçš„ï¼Œéžç³»ç»Ÿé»˜è®¤ï¼š b. å®žæ—¶è°ƒæ•´å¤§å°è¿˜æœ‰ä¸€äº›é«˜çº§æ“ä½œï¼Œéƒ½æ˜¯åœ¨å¼€å¯åŒºåŸŸæ¨¡å¼å¹¶é€‰ä¸­ä¸€ä¸ªåŒºåŸŸï¼Œæ¾å¼€é¼ æ ‡æŒ‰é”®å‰å¯ä»¥æ‰§è¡Œçš„ï¼Œè¿™é‡Œå°±ç®€å•æä¸€ä¸‹ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªå·±è¯•è¯•ï¼š è¿™æ—¶å€™æŒ‰ä½ â€œç©ºæ ¼â€ å¹¶ç§»åŠ¨é¼ æ ‡ï¼Œå°±å¯ä»¥ä¿æŒåŒºåŸŸå¤§å°ä¸å˜ï¼ŒåŒæ—¶ç§»åŠ¨åŒºåŸŸ è¿™æ—¶å€™æŒ‰ä½ â€œShiftâ€ å¹¶ç§»åŠ¨é¼ æ ‡ï¼Œå°±å¯ä»¥ä¿æŒåŒºåŸŸçš„å…¶ä»–ä¸‰ä¸ªè¾¹ä¸å˜ï¼Œç§»åŠ¨ä¸€ä¸ªè¾¹çš„ä½ç½® è¿™æ—¶å€™æŒ‰ä½ â€œAltâ€ å¹¶ç§»åŠ¨é¼ æ ‡ï¼Œå°±å¯ä»¥å¯¹ç§°åœ°è°ƒæ•´åŒºåŸŸå¤§å° å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œç©ºæ ¼é‚£ä¸ªæˆ‘å¶å°”ä¼šç”¨ä¸‹ï¼Œä¸è¿‡ â€œShiftâ€ å’Œ â€œAltâ€ è¿™ä¸¤ä¸ªï¼Œæˆ‘æ˜¯ç”¨çš„çœŸä¸å¤š 3. æˆªå›¾æ ‡æ³¨æˆ‘ä»¬åªéœ€è¦ç”¨è‡ªå¸¦çš„ Previewï¼ˆé¢„è§ˆï¼‰å°±å¯ä»¥å®Œæˆæˆªå›¾æ ‡æ³¨ å¯¹äºŽä¿å­˜åˆ°æ¡Œé¢çš„æˆªå›¾ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨æ¡Œé¢ä¸Šå•å‡»ä¸€ä¸‹å›¾ç‰‡ï¼Œç„¶åŽç›´æŽ¥æŒ‰ä¸‹ â€œç©ºæ ¼â€ã€‚ç©ºæ ¼é”®æ˜¯ macOS ä¸Šçš„ Quick Viewï¼ˆå¿«é€Ÿé¢„è§ˆï¼‰ï¼Œä»¥åŽçš„æ–‡ç« ä¸­æˆ‘ä»¬ä¼šç»†è¯´ã€‚ç„¶åŽåªéœ€è¦ç‚¹å‡»ä¸‹å›¾ç®­å¤´æŒ‡çš„è¿™ä¸ª Open with Previewï¼š ç„¶åŽå†ç‚¹ä¸€ä¸‹ç®­å¤´æŒ‡çš„è¿™ä¸ªå·¥å…·ç®±å›¾æ ‡ï¼Œå°±å¯ä»¥è¿›è¡Œæ ‡æ³¨äº†ã€‚macOS ä¸ºæˆ‘ä»¬æä¾›çš„æ ‡æ³¨åŠŸèƒ½æœ‰é€‰å–ï¼ˆåœ†å½¢ã€çŸ©å½¢åŠå¥—ç´¢ï¼‰ã€äº®åº¦é€‰å–ã€ç”»ç¬”ã€å‡ ä½•å›¾å½¢æ ‡æ³¨ï¼ˆåœ†å½¢ã€çŸ©å½¢ã€ç®­å¤´ç­‰ï¼‰ã€æ–‡å­—ã€ç­¾åã€è°ƒè‰²ä»¥åŠè£å‰ªï¼š è¿™é‡Œä¸å¾—ä¸æä¸€ä¸‹äº®åº¦é€‰å–ï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥æ ¹æ®äº®åº¦æ™ºèƒ½é€‰å–èƒŒæ™¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸Šé¢çš„æˆªå›¾ï¼Œç‚¹å‡»äº®åº¦é€‰å–ï¼Œç„¶åŽæŒ‰ä½é¼ æ ‡ï¼Œå·¦å³ï¼ˆæˆ–ä¸Šä¸‹ï¼‰æ‹–åŠ¨ï¼Œå°±èƒ½çœ‹åˆ°é€‰å–åŒºåŸŸçš„å˜åŒ–ã€‚é€‰å¥½èƒŒæ™¯åŽï¼Œæˆ‘ä»¬åè½¬ä¸€ä¸‹é€‰å–ï¼ˆå¿«æ·é”® â€œCmdâ€ + â€œShiftâ€ + â€œiâ€ï¼‰ï¼Œç„¶åŽç›´æŽ¥ â€œdeleteâ€ï¼Œå°±å¾—åˆ°äº†è¿™ä¸ªï¼š 4. å»¶æ—¶æˆªå›¾åŠ Grab åº”ç”¨a. Grabæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å»¶æ—¶æˆªå›¾ï¼ŒmacOS ä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¸ªåŠŸèƒ½ï¼Œåªæ˜¯è—çš„æ¯”è¾ƒæ·±ã€‚æˆ‘ä»¬å¯ä»¥ç›´æŽ¥ç”¨ Alfred æˆ–è€… macOS è‡ªå¸¦çš„ Spotlight æœç´¢åˆ°ï¼Œç›´æŽ¥è¾“å…¥ Grab å³å¯ï¼š å›žè½¦ä¹‹åŽæ²¡æœ‰æ‰“å¼€ä»»ä½•çª—å£ï¼Œä½ å¯èƒ½è§‰å¾—åˆšåˆšæ˜¯æ‰“å¼€äº†å‡çš„ Appã€‚ä½†å…¶å®žï¼Œè¿™ä¸ª App æœ¬èº«å°±æ˜¯æ²¡æœ‰ UI çš„ï¼Œåªä¼šåœ¨ Menu Bar ä¸Šé¢æ˜¾ç¤ºä¸€æ¡èœå•ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å»¶æ—¶æˆªå›¾çš„é€‰é¡¹ï¼š ç‚¹å‡»ä¹‹åŽï¼ŒæŒ‰ç…§æç¤ºæ“ä½œå°±å¥½ï¼Œé»˜è®¤çš„å»¶æ—¶æ—¶é—´æ˜¯ 10 ç§’ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œå»¶æ—¶æˆªå›¾ä¼šæˆªå–æ•´ä¸ªå±å¹•ï¼Œä¸èƒ½æˆªåŒºåŸŸã€‚æˆ‘ä»¬å¯ä»¥å…ˆæŠŠå›¾ç‰‡ä¿å­˜ä¸‹æ¥ï¼Œç„¶åŽå†æ‰“å¼€ Previewï¼ˆé¢„è§ˆï¼‰App è£å‰ªå°±å¥½äº† b. ä¸ªæ€§åŒ–é»˜è®¤çš„å»¶æ—¶æ—¶é—´å’Œä¿å­˜è·¯å¾„éƒ½æ˜¯å¯ä»¥æ›´æ”¹çš„ã€‚åªè¦æ‰“å¼€ Terminalï¼ˆç»ˆç«¯ï¼‰ï¼Œç„¶åŽè¾“å…¥è¿™ä¸ªå‘½ä»¤å¹¶æ‰§è¡Œï¼š 1screencapture -T 10 screenshot1.jpg å…¶ä¸­ï¼Œ10 å°±è¡¨ç¤ºå»¶æ—¶åç§’ï¼Œâ€screenshot1â€ å°±æ˜¯é»˜è®¤çš„æ–‡ä»¶åï¼Œä½ å¯ä»¥æŠŠå®ƒæ”¹æˆå…¶ä»–æ–‡ä»¶åï¼Œä¹Ÿå¯ä»¥ç»™å®ƒåŠ ä¸Šä¸€ä¸ªæ–‡ä»¶å¤¹è·¯å¾„ç”¨äºŽè®¾ç½®é»˜è®¤çš„ä¿å­˜ä½ç½® 5. æˆªå›¾åŠŸèƒ½çš„é…ç½®a. ç¦ç”¨æç¤ºéŸ³æˆªå›¾æç¤ºéŸ³æ˜¯å¯ä»¥å…³é—­çš„ï¼Œå¤§å®¶åªéœ€è¦æ‰“å¼€ System Preferencesï¼Œç„¶åŽé€‰æ‹© Sound (å£°éŸ³)ï¼Œç„¶åŽåªè¦æŠŠçº¢è‰²ç®­å¤´æŒ‡çš„è¿™ä¸ªå…³æŽ‰å°±è¡Œï¼š b. å¿«æ·é”®è®¾ç½®å¯èƒ½æœ‰æœ‹å‹è§‰å¾—ç³»ç»Ÿè‡ªå¸¦å¿«æ·é”®å¥½éº»çƒ¦ï¼Œè®²çœŸï¼Œä¹ æƒ¯å‡ å¤©å°±å¥½äº†ã€‚åŽŸåˆ™ä¸Šæˆ‘ä¸æ˜¯å¾ˆå»ºè®®å¤§å®¶è‡ªå·±æ”¹ï¼Œå› ä¸ºå¦‚æžœå¿«æ·é”®è®¾ç½®çš„ä¸å½“ï¼Œå°±å¾ˆå¯èƒ½ä¼šåœ¨æŸäº› App ä¸­äº§ç”Ÿå¿«æ·é”®å†²çªã€‚æ¯”å¦‚ï¼Œä½ æŠŠæˆªå›¾å¿«æ·é”®æ”¹æˆäº† â€œCtrlâ€ + â€œcâ€ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä»¥åŽå…³é—­ Server åªèƒ½ â€œkill ${pid}â€ äº†?ã€‚å½“ç„¶ï¼Œå¦‚æžœä½ è¶³å¤Ÿç†Ÿæ‚‰å¿«æ·é”®ï¼Œæ”¹æ”¹å€’æ˜¯ä¹Ÿæ— å¦¨ï¼Œå¤§ä¸äº†å¼„ä¹±äº†ç›´æŽ¥æ¢å¤æˆé»˜è®¤ æˆ‘ä»¬å¯ä»¥åœ¨ â€œç³»ç»Ÿè®¾ç½® -&gt; é”®ç›˜ -&gt; å¿«æ·é”®â€ ä¸­è®¾å®šå¿«æ·é”®ï¼Œå…ˆå®šä½åˆ° Services ï¼ˆæœåŠ¡ï¼‰ï¼Œç„¶åŽå°±å¯ä»¥æ‰¾åˆ°è®¾ç½®æˆªå›¾çš„å¿«æ·é”®äº†ï¼š å°±ç®—æŠŠè¿™äº›éƒ½å…³æŽ‰ï¼Œåƒä¸Šå›¾é‚£æ ·ï¼Œæ–‡ä¸­ä¹‹å‰æåˆ°çš„é‚£äº›å¿«æ·é”®ä¹Ÿéƒ½æ˜¯èƒ½ç”¨çš„ï¼Œå› ä¸ºé‚£äº›éƒ½æ˜¯ç³»ç»Ÿé»˜è®¤çš„å¿«æ·é”®ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°è¿™é‡Œä¹Ÿæä¾›äº†å»¶æ—¶æˆªå›¾çš„å¿«æ·é”®ï¼Œå¦‚æžœä½ å¸¸ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¸å¦¨ä¹Ÿç»‘å®šä¸€ä¸ªå¿«æ·é”®å§ï¼Œæ¯”å¦‚ â€œCmdâ€ + â€œShiftâ€ + â€œ5â€ï¼Œæ–¹ä¾¿åˆå¥½è®° c. æˆªå›¾é»˜è®¤ä¿å­˜è·¯å¾„è®¾ç½®åŒæ ·ï¼Œæˆ‘ä¹Ÿä¸æŽ¨èæ”¹è¿™ä¸ªè®¾ç½®ï¼Œè™½ç„¶æ”¹ä¸€ä¸‹ä¹Ÿä¸ä¼šç‚¸ã€‚æ¯”å¦‚ä½ æƒ³æŠŠæˆªå›¾æ”¾åˆ°æ¡Œé¢çš„ myScreenshot æ–‡ä»¶å¤¹ï¼Œé‚£ä¹ˆæ‰“å¼€ Terminalï¼ˆç»ˆç«¯ï¼‰ï¼Œè¾“å…¥ï¼š 1defaults write com.apple.screencapture location ~/Desktop/myScreenshot ç„¶åŽï¼Œè®°å¾—è¦é‡å¯ä¸€ä¸‹ç³»ç»Ÿçš„ UI æœåŠ¡ï¼Œæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼š 1killall SystemUiServer ä¹‹åŽï¼Œå¦‚æžœä½ å†é€šè¿‡ â€œCmdâ€ + â€œShiftâ€ + â€œ3/4â€ æˆªå›¾ï¼Œå›¾ç‰‡å°±ä¼šä¿å­˜åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œ macOS ä¸Šæˆªå›¾ç›¸å…³çš„å¿«æ·é”®å°±ä»‹ç»åˆ°è¿™é‡Œï¼Œèƒ½æƒ³åˆ°çš„ä¹Ÿå°±è¿™äº›äº†ã€‚ä»¥ä¸‹ä¸º App æŽ¨èçŽ¯èŠ‚ï¼Œå†™ç»™æœ‰éœ€è¦çš„æœ‹å‹ æˆªå›¾ App æŽ¨èç»å¸¸ä¼šè¢«é—®åˆ°ï¼ŒMac ä¸Šå¦‚ä½•åˆ¶ä½œ Gifï¼Œä»¥åŠæœ‰ä»€ä¹ˆæˆªå›¾ App å¯ä»¥æ›¿ä»£åŽŸç”Ÿçš„æˆªå›¾å·¥å…·ã€‚è¿™é‡ŒæŽ¨èä»¥ä¸‹å‡ æ¬¾ï¼Œä»Žå…è´¹åˆ°æ”¶è´¹çš„éƒ½æœ‰ã€‚é¡ºä¾¿æä¸€å¥ï¼ŒWindows ç³»ç»Ÿè‡ªå¸¦çš„æˆªå›¾å·¥å…·å°±å¾ˆæ–¹ä¾¿äº†ï¼Œå¦å¤– PicPick ä¹Ÿæ˜¯æžå¥½çš„ã€‚å¯ä»¥ä¸€ç›´å…è´¹è¯•ç”¨ï¼Œä¸éœ€è¦åŽ»æ‰¾ç ´è§£ï¼Œåªæ˜¯è¿™æ¬¾ App æ²¡æœ‰ Mac ç‰ˆæœ¬ 1. ç³»ç»Ÿæˆªå›¾ App æ›¿ä»£å“ä»¥ä¸‹æåˆ°çš„ä¸‰æ¬¾è½¯ä»¶å‡å…è´¹ï¼Œè‡³å°‘åœ¨æ ‡æ³¨æ–¹é¢æ¯”åŽŸç”Ÿçš„ç•¥èƒœä¸€ç­¹ï¼Œè¯¦æƒ…è¯·ç‚¹å‡»é“¾æŽ¥æŸ¥çœ‹ a. æµè§ˆå™¨æ’ä»¶ Awesome ScreenshotAwesome Screenshot æ˜¯ä¸€æ¬¾å…è´¹çš„æˆªå›¾å·¥å…·ï¼Œéžæœ¬åœ° Appï¼Œåªæ˜¯ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ã€‚å®ƒæ”¯æŒå»¶æ—¶æˆªå›¾åŒºåŸŸæˆªå›¾ç­‰å¸¸ç”¨åŠŸèƒ½ã€‚ä¹Ÿå†…ç½®äº†ä¸€ä¸ªç½‘é¡µç‰ˆçš„æ ‡æ³¨å·¥å…· b. Evernote æ——ä¸‹çš„ SkitchSkitch | Evernote ä¹Ÿæ˜¯ä¸€æ¬¾å…è´¹çš„æˆªå›¾ Appï¼Œæ ‡æ³¨åŠŸèƒ½ç›¸æ¯” Awesome Screenshot ä¼šç¨å¥½ä¸€äº›ã€‚å¦‚æžœä½ ç”¨ Evernoteï¼ˆå°è±¡ç¬”è®°ï¼‰ï¼Œç»å¸¸éœ€è¦æˆªå›¾å¹¶ä¿å­˜åˆ°è‡ªå·±çš„ç¬”è®°ä¸­ï¼Œé‚£ä¹ˆè¿™æ¬¾ App å¯èƒ½ä¼šæ¯”è¾ƒé€‚åˆä½ ã€‚åŒæ—¶ï¼ŒSkitch ä¹Ÿæœ‰ iOS ç‰ˆæœ¬ c. JingJing åŒæ ·æ˜¯ä¸€æ¬¾å…è´¹çš„æˆªå›¾ Appï¼Œæ¥è‡ª TechSmith å…¬å¸ï¼Œè¿™å®¶å…¬å¸å‡ºå“çš„å¦ä¸€æ¬¾æ›´ä¸ºå¼ºå¤§çš„æˆªå›¾å·¥å…· SnagIt ä¼šåœ¨åŽæ–‡è¯¦ç»†è¯´æ˜Ž 2. åˆ¶ä½œ Gifç»å¸¸ä¼šè¢«é—®åˆ°ï¼Œå¦‚ä½•åœ¨ macOS ä¸Šåˆ¶ä½œ Gifã€‚è¿™é‡Œç»™å¤§å®¶æŽ¨èä»¥ä¸‹å‡ ä¸ªä¸é”™çš„ App a. LICEcap (æ”¶è´¹)LICEcap æ˜¯ä¸€æ¬¾è€ç‰Œçš„ macOS ç³»ç»Ÿ Gif åˆ¶ä½œå·¥å…·ï¼Œä¸å…è´¹ã€‚ç›¸æ¯”å…¶ä»– Appï¼ŒLICEcap æœ¬èº«å¹¶ä¸æä¾›åˆ†äº«å’Œä¸Šä¼ åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘æœ¬äººå¹¶ä¸æ˜¯å¾ˆæŽ¨è b. Giphy Capture (å…è´¹)GIPHY Capture æ˜¯ç”±ä¸€ä¸ªå¾ˆç«çš„ Gif åˆ†äº«ç½‘ç«™ GIPHY å¼€å‘çš„ã€‚ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„åŠŸèƒ½å°±æ˜¯å¯ä»¥ç›´æŽ¥ä¸Šä¼ è‡³ giphy.comï¼ˆå¯èƒ½éœ€è¦ VPN æ‰èƒ½è®¿é—®ï¼‰ï¼Œç„¶åŽæŠŠé“¾æŽ¥ Share ç»™æœ‹å‹å°±å¯ä»¥äº†ã€‚åŒæ ·ï¼Œä¿å­˜è‡³æœ¬åœ°ä¹Ÿæ²¡é—®é¢˜ 3. SnagIt - å…¨å¥—è§£å†³æ–¹æ¡ˆæˆ‘ä¸€èˆ¬çš„ä¹ æƒ¯æ˜¯ï¼Œå¦‚æžœæˆªå›¾åªæ˜¯ä¸ºäº†ç²˜è´´åˆ°èŠå¤©æ¡†ä¹‹ç±»çš„åœ°æ–¹ï¼Œè€Œä¸”ä¸éœ€è¦æ ‡æ³¨çš„è¯ï¼Œå°±ä¼šç”¨ç³»ç»Ÿæˆªå›¾ã€‚å¦‚æžœéœ€è¦æ ‡æ³¨ï¼Œæˆ–è€…æƒ³è¦ç•™ä¸‹æ¥ï¼Œå°±ä¼šç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„ Appï¼šSnagit)ã€‚è™½ç„¶æ˜¯ä»˜è´¹è½¯ä»¶ï¼Œä»·æ ¼ä¹Ÿæœ‰ç‚¹å„¿é«˜ï¼Œä½†æˆ‘è§‰å¾—è¿˜æ˜¯å¾ˆå€¼å¾—è´­ä¹°çš„ã€‚ç›®å‰æˆ‘çš„åšå®¢å’Œ GitHub ä¸Šçš„æˆªå›¾ã€åŠ¨å›¾éƒ½æ˜¯ç”¨è¿™ä¸ªåšçš„ a. æˆªå›¾åŠŸèƒ½SnagIt åœ¨æˆªå›¾æ–¹é¢æä¾›äº†åŒºåŸŸå»¶æ—¶æˆªå›¾ã€å…¨æ™¯æˆªå›¾ã€Expose æ¨¡å¼æˆªå›¾ç”šè‡³æ‘„åƒå¤´è¾“å…¥å†…å®¹æˆªå›¾è¿™äº›å¾ˆå®žç”¨çš„åŠŸèƒ½ã€‚ä¸ªäººè§‰å¾—ï¼Œå®ƒ Menu Bar çš„ Panelï¼ˆé¢æ¿ï¼‰æœ¬èº«é¢œå€¼å°±å¾ˆé«˜ï¼š è€Œä¸”è‡ªå¸¦ä¸€ä¸ªé¢œå€¼æ›´é«˜ï¼ŒåŠŸèƒ½ä¹Ÿæ›´å¤šçš„å›¾ç‰‡ç¼–è¾‘å™¨ï¼š ä¿å­˜çš„å›¾ç‰‡æ ¼å¼ä¹Ÿå¯ä»¥è‡ªå·±é€‰æ‹©ï¼Œè¿˜å¯ä»¥ä¿å­˜ä¸ºæ„Ÿäººçš„ Retina æ¸…æ™°åº¦ b. ç¼–è¾‘åŠŸèƒ½ä½œä¸ºä¸€æ¬¾ä»˜è´¹ Appï¼Œå®ƒç¡®å®žä¸ºæˆ‘ä»¬æä¾›äº†ç›¸æ¯” macOS åŽŸç”Ÿ Preview æ›´å¤šçš„ç¼–è¾‘åŠŸèƒ½ã€‚æš‚ä¸”ä¸åŽ»æ¯”è¾ƒå·²æœ‰çš„ç®­å¤´ä¹‹ç±»çš„åŠŸèƒ½ï¼Œè™½ç„¶æˆ‘è¿˜æ˜¯è§‰å¾— SnagIt é‡Œé¢çš„å…ƒç´ æ›´å¥½çœ‹äº›ï¼ŒSnagIt è¿˜æä¾›äº†æ‰“ç åŠŸèƒ½ï¼Œæ•ˆæžœå˜›ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸‹ä¸Šé¢ Grab é‚£é‡Œçš„é…å›¾ã€‚æ”¾å¤§é•œåŠŸèƒ½ä¹Ÿæ˜¯æžå¥½çš„ï¼Œçªå‡ºé‡ç‚¹çš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚è¿˜æœ‰ Stampï¼ˆå›¾ç« ï¼‰ï¼Œæœ‰èŒ«èŒ«å¤šçš„å›¾ç« é€‰æ‹©ï¼Œä»Ž PC é”®ç›˜æŒ‰é”®å›¾ç« ï¼Œåˆ° Emoji è¡¨æƒ…ï¼Œå†åˆ°æ•°å­¦ç¬¦å·å’ŒèŠ±ä½“è‹±æ–‡å­—æ¯ï¼Œéƒ½å¯ä»¥ç›´æŽ¥æ‰”åˆ°æˆªå›¾ä¸Šã€‚è™½ç„¶æ²¡æœ‰æä¾›ç›´æŽ¥çš„æ‹¼å›¾å·¥å…·ï¼Œä½†æ‹¼èµ·æ¥ä¹Ÿä¸éº»çƒ¦ï¼Œè£å¥½å›¾ï¼ŒåŠ ä¸Šåˆ†å‰²çº¿ï¼Œç²˜è´´åˆ°ä¸€èµ·å°±å¯ä»¥äº† c. è§†é¢‘åŠŸèƒ½é¦–å…ˆï¼ŒSnagIt å¯ä»¥å½•åˆ¶å¾ˆé«˜æ¸…çš„è§†é¢‘ï¼Œæ—¶é•¿ä¹Ÿæ˜¯æ²¡æœ‰é™åˆ¶çš„ã€‚æ”¯æŒå…¨å±å’ŒåŒºåŸŸå½•åˆ¶ä¸¤ç§æ¨¡å¼ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å½•åˆ¶æ‘„åƒå¤´è¾“å…¥å’Œéº¦å…‹é£Žè¾“å…¥ï¼Œè¿™ä¸ªåŠŸèƒ½ç”¨æ¥å½•åˆ¶ä¼šè®®è§†é¢‘åº”è¯¥ä¹Ÿæ˜¯æžå¥½çš„ã€‚å¦ä¸€ä¸ªåº”ç”¨åœºæ™¯å°±æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä¸€äº›ç½‘ç«™ä¸Šçœ‹åˆ°å–œæ¬¢çš„è§†é¢‘æƒ³ç•™ä¸‹æ¥ï¼Œè€Œç½‘ç«™åˆä¸æä¾›ä¸‹è½½ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ç›´æŽ¥é€‰å¥½è§†é¢‘æ’­æ”¾çš„åŒºåŸŸæ¥è‡ªå·±å½•æˆè§†é¢‘ d. ä¸Šä¼ ä¸ŽåŒæ­¥åŠŸèƒ½TechSmith è‡ªå·±æä¾›äº† http://screencast.com å’Œ TechSmith relay æœåŠ¡ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€‰æ‹©ä¸Šä¼ åˆ° Google Drive æˆ–è€… Dropboxã€‚ä¹Ÿä»¥é…ç½®è‡ªå·±çš„ FTPï¼Œæˆ–è€…ç›´æŽ¥æ‰”åˆ° iCloud æ–‡ä»¶å¤¹ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚åŒæ ·ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æœ¬åœ°æ–‡ä»¶å¤¹ä¿å­˜ï¼Œæ”¯æŒå‘½åè§„åˆ™ç­‰æ–¹é¢çš„è®¾ç½®]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>æˆªå›¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidåŸºç¡€æŽ§ä»¶ViewFlipperçš„ä½¿ç”¨ï¼Œåž‚ç›´æ»šåŠ¨å¹¿å‘Šæ¡]]></title>
    <url>%2Fposts%2Fced0f833.html</url>
    <content type="text"><![CDATA[å­¦ä¹ ï¼Œå­¦ä¹ ï¼Œå­¦ä»¥è‡´ç”¨ViewFlipperæ˜¯å®‰å“è‡ªå¸¦çš„æŽ§ä»¶ï¼Œå¾ˆå¤šäººå¯èƒ½å¾ˆå°‘çŸ¥é“è¿™ä¸ªæŽ§ä»¶ï¼Œè¿™ä¸ªæŽ§ä»¶å¾ˆç®€å•ï¼Œä¹Ÿå¾ˆå¥½ç†è§£ã€‚ ä»Žæºç å¯ä»¥çœ‹å‡ºï¼Œå…¶å®žViewFlipperé—´æŽ¥çš„ç»§æ‰¿äº†FrameLayoutï¼Œä¹Ÿå¯ä»¥è¯´ViewFlipperå…¶å®žå°±æ˜¯ä¸ªFrameLayoutï¼Œåªä¸è¿‡åœ¨å†…éƒ¨å°è£…äº†åŠ¨ç”»å®žçŽ°å’ŒHandlerå®žçŽ°ä¸€ä¸ªå¾ªçŽ¯è€Œå·²ã€‚ ViewFlipperDemo ###ä¸€ã€ViewFlipperçš„å¸ƒå±€å®žçŽ°å¸ƒå±€çš„ç¼–å†™å¾ˆç®€å•ï¼Œè·Ÿæ™®é€šå¸ƒå±€ä¸€æ ·çš„ 12345678910111213141516171819202122&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical"&gt; &lt;ViewFlipper android:id="@+id/marqueeView" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginTop="10dip" android:layout_marginBottom="30dip" android:autoStart="true" android:background="#fff" android:flipInterval="3000" android:inAnimation="@anim/anim_marquee_in" android:outAnimation="@anim/anim_marquee_out" android:paddingLeft="30dp"/&gt;&lt;/LinearLayout&gt; è¿™é‡Œä»‹ç»ViewFlipperç”¨åˆ°çš„å±žæ€§ï¼Œè¿™äº›å±žæ€§å…¶å®žéƒ½å¯ä»¥ä½¿ç”¨ä»£ç å®žçŽ°ï¼Œåªä¸è¿‡è¿™é‡Œä¸ºäº†ä»£ç çœ‹ä¸ŠåŽ»ç¾Žè§‚ï¼Œæ‰æ”¾åœ¨å¸ƒå±€é‡Œçš„ android:autoStartï¼šè®¾ç½®è‡ªåŠ¨åŠ è½½ä¸‹ä¸€ä¸ªView android:flipIntervalï¼šè®¾ç½®Viewä¹‹é—´åˆ‡æ¢çš„æ—¶é—´é—´éš” android:inAnimationï¼šè®¾ç½®åˆ‡æ¢Viewçš„è¿›å…¥åŠ¨ç”» android:outAnimationï¼šè®¾ç½®åˆ‡æ¢Viewçš„é€€å‡ºåŠ¨ç”» ä¸‹é¢æ˜¯ViewFlipperå¸¸ç”¨çš„æ–¹æ³•ä»‹ç»ï¼Œé™¤äº†å¯ä»¥è®¾ç½®ä¸Šé¢çš„å±žæ€§ä¹‹å¤–ï¼Œè¿˜æä¾›äº†å…¶ä»–æ–¹æ³• isFlippingï¼š åˆ¤æ–­Viewåˆ‡æ¢æ˜¯å¦æ­£åœ¨è¿›è¡Œ setFilpIntervalï¼šè®¾ç½®Viewä¹‹é—´åˆ‡æ¢çš„æ—¶é—´é—´éš” startFlippingï¼šå¼€å§‹Viewçš„åˆ‡æ¢ï¼Œè€Œä¸”ä¼šå¾ªçŽ¯è¿›è¡Œ stopFlippingï¼šåœæ­¢Viewçš„åˆ‡æ¢ setOutAnimationï¼šè®¾ç½®åˆ‡æ¢Viewçš„é€€å‡ºåŠ¨ç”» setInAnimationï¼šè®¾ç½®åˆ‡æ¢Viewçš„è¿›å…¥åŠ¨ç”» showNextï¼š æ˜¾ç¤ºViewFlipperé‡Œçš„ä¸‹ä¸€ä¸ªView showPreviousï¼šæ˜¾ç¤ºViewFlipperé‡Œçš„ä¸Šä¸€ä¸ªView è¿™é‡Œè¿˜æ¶‰åŠåˆ°ä¸¤ä¸ªåŠ¨ç”»å…¶å®žå°±æ˜¯ä¸€ä¸ªå¹³ç§»çš„åŠ¨ç”»ï¼Œå®ƒä»¬éƒ½ä¿å­˜åœ¨animæ–‡ä»¶å¤¹ä¸­ anim_marquee_in.xml 1234567&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;set xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;translate android:duration="1500" android:fromYDelta="100%p" android:toYDelta="0"/&gt;&lt;/set&gt; anim_marquee_out.xml 1234567&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;set xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;translate android:duration="1500" android:fromYDelta="0" android:toYDelta="-100%p"/&gt;&lt;/set&gt; å½“ç„¶ï¼Œå¦‚æžœä½ å¯¹åŠ¨ç”»xmlæ¯”è¾ƒç†Ÿæ‚‰ï¼Œè‡ªå·±å¯ä»¥å®žçŽ°æ›´å¤šå¥½çœ‹çš„æ•ˆæžœ ###äºŒã€è‡ªå®šä¹‰ViewFlipperçš„å¹¿å‘Šæ¡å½“æˆ‘ä»¬å‡†å¤‡å¥½äº†ViewFlipperä¹‹åŽï¼Œå°±åº”è¯¥åœ¨ViewFlipperé‡Œé¢æ·»åŠ æˆ‘ä»¬çš„å¹¿å‘Šæ¡äº†ï¼Œä¸‹é¢æ˜¯å…¶ä¸­ä¸€ä¸ªå¹¿å‘Šæ¡çš„å¸ƒå±€æ–‡ä»¶ï¼Œå¦å¤–ä¸¤ä¸ªé›·åŒï¼Œåªä¸è¿‡æ”¹äº†æ–‡å­—è€Œå·² 123456789101112131415161718192021&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="wrap_content" android:layout_height="25dip" android:orientation="horizontal"&gt; &lt;ImageView android:id="@+id/iv_image" android:layout_width="25dip" android:layout_height="25dip" android:src="@mipmap/ic_launcher"/&gt; &lt;TextView android:id="@+id/tv_text" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_gravity="center" android:layout_marginLeft="10dip" android:text="åŽä¸ºçŽ‹ç‰Œäº®ç›¸ï¼Œ5G+4000ä¸‡å¾•å¡"/&gt;&lt;/LinearLayout&gt; ###ä¸‰ã€ä»£ç ä¸ºViewFlipperæ·»åŠ å¹¿å‘Šæ¡æ‰€æœ‰çš„å‡†å¤‡æ¡ä»¶éƒ½å‡†å¤‡å¥½äº†ï¼Œè¯¥å¼€å§‹ä½¿ç”¨ä»£ç å°†å‡†å¤‡å¥½çš„ä¸œè¥¿é»åœ¨ä¸€èµ·äº†ï¼Œä»£ç å¾ˆç®€å•ï¼Œè¿™é‡Œå°±ä¸å¤šè§£é‡Šäº† 12345678910111213141516171819202122232425262728293031323334353637package com.zm.viewflipperdemo;import android.os.Bundle;import android.support.v7.app.AppCompatActivity;import android.view.LayoutInflater;import android.view.View;import android.widget.TextView;import android.widget.ViewFlipper;public class MainActivity extends AppCompatActivity &#123; private ViewFlipper marqueeView; private String[] textArray = &#123;"åŽä¸ºçŽ‹ç‰Œäº®ç›¸ï¼Œ5G+4000ä¸‡å¾•å¡", "åœ£è¯žæ¥è¢­ï¼Œæ‰«ç å…³æ³¨é¢†å–å¤§ç¤¼ï¼", "2018å³å°†è¿‡åŽ»ï¼Œè¯´è¯´æ‚¨çš„å¿ƒé‡Œè¯"&#125;; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); initView(); initData(); &#125; private void initView() &#123; marqueeView = findViewById(R.id.marqueeView); &#125; private void initData() &#123; LayoutInflater inflater = LayoutInflater.from(this); for (int i = 0; i &lt; textArray.length; i++) &#123; View view = inflater.inflate(R.layout.marquee_scroll_content, null); TextView text = view.findViewById(R.id.tv_text); text.setText(textArray[i]); marqueeView.addView(view); &#125; &#125;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ViewFlipper</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ViewèŽ·å–widthå’Œheightçš„å››ç§æ–¹æ³•]]></title>
    <url>%2Fposts%2Fdd1673d3.html</url>
    <content type="text"><![CDATA[å¾ˆç»å¸¸å½“æˆ‘ä»¬åŠ¨æ€åˆ›å»ºæŸäº›Viewæ—¶ï¼Œéœ€è¦é€šè¿‡èŽ·å–ä»–ä»¬çš„widthå’Œheightæ¥ç¡®å®šåˆ«çš„viewçš„å¸ƒå±€ï¼Œä½†æ˜¯åœ¨onCreate()èŽ·å–viewçš„widthå’Œheightä¼šå¾—åˆ°0.view.getWidth()å’Œview.getHeight()ä¸º0çš„æ ¹æœ¬åŽŸå› æ˜¯æŽ§ä»¶è¿˜æ²¡æœ‰å®Œæˆç»˜åˆ¶ï¼Œä½ å¿…é¡»ç­‰å¾…ç³»ç»Ÿå°†ç»˜åˆ¶å®ŒViewæ—¶ï¼Œæ‰èƒ½èŽ·å¾—ã€‚è¿™ç§æƒ…å†µå½“ä½ éœ€è¦ä½¿ç”¨åŠ¨æ€å¸ƒå±€ï¼ˆä½¿ç”¨wrap_contentæˆ–match_parentï¼‰å°±ä¼šå‡ºçŽ°ã€‚ä¸€èˆ¬æ¥è®²åœ¨Activity.onCreate(â€¦)ã€onResume()æ–¹æ³•ä¸­éƒ½æ²¡æœ‰åŠžæ³•èŽ·å–åˆ°Viewçš„å®žé™…å®½é«˜ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¿…é¡»ç”¨ä¸€ç§å˜é€šçš„æ–¹æ³•ï¼Œç­‰åˆ°Viewç»˜åˆ¶å®ŒæˆåŽåŽ»èŽ·å–widthå’ŒHeightã€‚ä¸‹é¢æœ‰ä¸€äº›å¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚ 1ã€ç›‘å¬Draw/Layoutäº‹ä»¶ï¼šViewTreeObserverViewTreeObserverç›‘å¬å¾ˆå¤šä¸åŒçš„ç•Œé¢ç»˜åˆ¶äº‹ä»¶ã€‚ä¸€èˆ¬æ¥è¯´OnGlobalLayoutListenerå°±æ˜¯å¯ä»¥è®©æˆ‘ä»¬èŽ·å¾—åˆ°viewçš„widthå’Œheightçš„åœ°æ–¹.ä¸‹é¢onGlobalLayoutå†…çš„ä»£ç ä¼šåœ¨Viewå®ŒæˆLayoutè¿‡ç¨‹åŽè°ƒç”¨ã€‚ 12345678910view.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() &#123; @Override public void onGlobalLayout() &#123; mScrollView.post(new Runnable() &#123; public void run() &#123; view.getHeight(); //height is ready &#125; &#125;); &#125;&#125;); ä½†æ˜¯è¦æ³¨æ„è¿™ä¸ªæ–¹æ³•åœ¨æ¯æ¬¡æœ‰äº›viewçš„Layoutå‘ç”Ÿå˜åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ï¼ˆæ¯”å¦‚æŸä¸ªViewè¢«è®¾ç½®ä¸ºInvisibleï¼‰,æ‰€ä»¥åœ¨å¾—åˆ°ä½ æƒ³è¦çš„å®½é«˜åŽï¼Œè®°å¾—ç§»é™¤onGlobleLayoutListenerï¼š åœ¨ SDK Lvl &lt; 16æ—¶ä½¿ç”¨public void removeGlobalOnLayoutListener (ViewTreeObserver.OnGlobalLayoutListener victim) åœ¨ SDK Lvl &gt;= 16æ—¶ä½¿ç”¨public void removeOnGlobalLayoutListener (ViewTreeObserver.OnGlobalLayoutListener victim) 2ã€å°†ä¸€ä¸ªrunnableæ·»åŠ åˆ°Layouté˜Ÿåˆ—ä¸­ï¼šView.post()è¿™ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯æˆ‘æœ€å–œæ¬¢çš„ï¼Œä½†æ˜¯å‡ ä¹Žæ²¡äººçŸ¥é“æœ‰è¿™ä¸ªæ–¹æ³•ã€‚ç®€å•åœ°è¯´ï¼Œåªè¦ç”¨View.post()ä¸€ä¸ªrunnableå°±å¯ä»¥äº†ã€‚runnableå¯¹è±¡ä¸­çš„æ–¹æ³•ä¼šåœ¨Viewçš„measureã€layoutç­‰äº‹ä»¶åŽè§¦å‘ï¼Œå…·ä½“çš„å‚è€ƒRomain Guyï¼š UIäº‹ä»¶é˜Ÿåˆ—ä¼šæŒ‰é¡ºåºå¤„ç†äº‹ä»¶ã€‚åœ¨setContentView()è¢«è°ƒç”¨åŽï¼Œäº‹ä»¶é˜Ÿåˆ—ä¸­ä¼šåŒ…å«ä¸€ä¸ªè¦æ±‚é‡æ–°layoutçš„messageï¼Œæ‰€ä»¥ä»»ä½•ä½ poståˆ°é˜Ÿåˆ—ä¸­çš„ä¸œè¥¿éƒ½ä¼šåœ¨Layoutå‘ç”Ÿå˜åŒ–åŽæ‰§è¡Œã€‚ 12345678final View view=//smth;...view.post(new Runnable() &#123; @Override public void run() &#123; view.getHeight(); //height is ready &#125; &#125;); è¿™ä¸ªæ–¹æ³•æ¯”ViewTreeObserverå¥½ï¼š1ã€ä½ çš„ä»£ç åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸”ä½ ä¸ç”¨åœ¨åœ¨æ¯æ¬¡æ‰§è¡ŒåŽå°†Observerç¦ç”¨ï¼Œçœå¿ƒå¤šäº†ã€‚2ã€è¯­æ³•å¾ˆç®€å•å‚è€ƒï¼šhttp://stackoverflow.com/a/3602144/774398http://stackoverflow.com/a/3948036/774398 3ã€é‡å†™Viewçš„onLayoutæ–¹æ³•è¿™ä¸ªæ–¹æ³•åªåœ¨æŸäº›åœºæ™¯ä¸­å®žç”¨ï¼Œæ¯”å¦‚å½“ä½ æ‰€è¦æ‰§è¡Œçš„ä¸œè¥¿åº”è¯¥ä½œä¸ºä»–çš„å†…åœ¨é€»è¾‘è¢«å†…èšã€æ¨¡å—åŒ–åœ¨viewä¸­ï¼Œå¦è€…è¿™ä¸ªè§£å†³æ–¹æ¡ˆå°±æ˜¾å¾—ååˆ†å†—é•¿å’Œç¬¨é‡ã€‚ 1234567view = new View(this) &#123; @Override protected void onLayout(boolean changed, int l, int t, int r, int b) &#123; super.onLayout(changed, l, t, r, b); view.getHeight(); //height is ready &#125;&#125;; éœ€è¦æ³¨æ„çš„æ˜¯onLayoutæ–¹æ³•ä¼šè°ƒç”¨å¾ˆå¤šæ¬¡ï¼Œæ‰€ä»¥è¦è€ƒè™‘å¥½åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¦åšä»€ä¹ˆï¼Œæˆ–è€…åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡ŒåŽç¦ç”¨æŽ‰ä½ çš„ä»£ç ã€‚ 4ã€èŽ·å–å›ºå®šå®½é«˜å¦‚æžœä½ è¦èŽ·å–çš„viewçš„widthå’Œheightæ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼š 12View.getMeasureWidth()View.getMeasureHeight() ä½†æ˜¯è¦æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ‰€èŽ·å–çš„widthå’Œheightå¯èƒ½è·Ÿå®žé™…drawåŽçš„ä¸ä¸€æ ·ã€‚å®˜æ–¹æ–‡æ¡£è§£é‡Šäº†ä¸åŒçš„åŽŸå› ï¼š Viewçš„å¤§å°ç”±widthå’Œheightå†³å®šã€‚ä¸€ä¸ªViewå®žé™…ä¸ŠåŒæ—¶æœ‰ä¸¤ç§widthå’Œheightå€¼ã€‚ ç¬¬ä¸€ç§æ˜¯measure widthå’Œmeasure heightã€‚ä»–ä»¬å®šä¹‰äº†viewæƒ³è¦åœ¨çˆ¶Viewä¸­å ç”¨å¤šå°‘widthå’Œheightï¼ˆè¯¦æƒ…è§Layoutï¼‰ã€‚measured heightå’Œwidthå¯ä»¥é€šè¿‡getMeasuredWidth() å’Œ getMeasuredHeight()èŽ·å¾—ã€‚ ç¬¬äºŒç§æ˜¯widthå’Œheightï¼Œæœ‰æ—¶å€™ä¹Ÿå«åšdrawing widthå’Œdrawing heightã€‚è¿™äº›å€¼å®šä¹‰äº†viewåœ¨å±å¹•ä¸Šç»˜åˆ¶å’ŒLayoutå®ŒæˆåŽçš„å®žé™…å¤§å°ã€‚è¿™äº›å€¼æœ‰å¯èƒ½è·Ÿmeasure widthå’Œheightä¸åŒã€‚widthå’Œheightå¯ä»¥é€šè¿‡getWidth()å’ŒgetHeightèŽ·å¾—ã€‚ å‚è€ƒé“¾æŽ¥ https://stackoverflow.com/questions/3591784/getwidth-and-getheight-of-view-returns-0/24035591#24035591]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpannableStringä¹‹å¯Œæ–‡æœ¬æ˜¾ç¤ºæ•ˆæžœ]]></title>
    <url>%2Fposts%2F9e398b2.html</url>
    <content type="text"><![CDATA[TextViewSpannableStringä¸€ï¼šç®€ä»‹SpannableStringå…¶å®žå’ŒStringä¸€æ ·ï¼Œéƒ½æ˜¯ä¸€ç§å­—ç¬¦ä¸²ç±»åž‹ï¼ŒSpannableStringå¯ä»¥ç›´æŽ¥ä½œä¸ºTextViewçš„æ˜¾ç¤ºæ–‡æœ¬ï¼Œä¸åŒçš„æ˜¯SpannableStringå¯ä»¥é€šè¿‡ä½¿ç”¨å…¶æ–¹æ³•setSpanæ–¹æ³•å®žçŽ°å­—ç¬¦ä¸²å„ç§å½¢å¼é£Žæ ¼çš„æ˜¾ç¤º,é‡è¦çš„æ˜¯å¯ä»¥æŒ‡å®šè®¾ç½®çš„åŒºé—´ï¼Œä¹Ÿå°±æ˜¯ä¸ºå­—ç¬¦ä¸²æŒ‡å®šä¸‹æ ‡åŒºé—´å†…çš„å­å­—ç¬¦ä¸²è®¾ç½®æ ¼å¼ã€‚ setSpan(Object what, int start, int end, int flags)æ–¹æ³•éœ€è¦ç”¨æˆ·è¾“å…¥å››ä¸ªå‚æ•°ï¼Œwhatè¡¨ç¤ºè®¾ç½®çš„æ ¼å¼æ˜¯ä»€ä¹ˆï¼Œå¯ä»¥æ˜¯å‰æ™¯è‰²ã€èƒŒæ™¯è‰²ä¹Ÿå¯ä»¥æ˜¯å¯ç‚¹å‡»çš„æ–‡æœ¬ç­‰ç­‰ï¼Œstartè¡¨ç¤ºéœ€è¦è®¾ç½®æ ¼å¼çš„å­å­—ç¬¦ä¸²çš„èµ·å§‹ä¸‹æ ‡ï¼ŒåŒç†endè¡¨ç¤ºç»ˆäº†ä¸‹æ ‡ï¼Œflagså±žæ€§å°±æœ‰æ„æ€äº†ï¼Œå…±æœ‰å››ç§å±žæ€§ï¼š Spanned.SPAN_INCLUSIVE_EXCLUSIVE ä»Žèµ·å§‹ä¸‹æ ‡åˆ°ç»ˆäº†ä¸‹æ ‡ï¼ŒåŒ…æ‹¬èµ·å§‹ä¸‹æ ‡Spanned.SPAN_INCLUSIVE_INCLUSIVE ä»Žèµ·å§‹ä¸‹æ ‡åˆ°ç»ˆäº†ä¸‹æ ‡ï¼ŒåŒæ—¶åŒ…æ‹¬èµ·å§‹ä¸‹æ ‡å’Œç»ˆäº†ä¸‹æ ‡Spanned.SPAN_EXCLUSIVE_EXCLUSIVE ä»Žèµ·å§‹ä¸‹æ ‡åˆ°ç»ˆäº†ä¸‹æ ‡ï¼Œä½†éƒ½ä¸åŒ…æ‹¬èµ·å§‹ä¸‹æ ‡å’Œç»ˆäº†ä¸‹æ ‡Spanned.SPAN_EXCLUSIVE_INCLUSIVE ä»Žèµ·å§‹ä¸‹æ ‡åˆ°ç»ˆäº†ä¸‹æ ‡ï¼ŒåŒ…æ‹¬ç»ˆäº†ä¸‹æ ‡ SpannableStringçš„setSpan()æ–¹æ³•å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªï¼Œå®žçŽ°å¤šç§æ•ˆæžœå åŠ ã€‚ äºŒï¼šSpanå¸¸ç”¨çš„æ ¼å¼2.1ï¼šForegroundColorSpan ForegroundColorSpanï¼Œä¸ºæ–‡æœ¬è®¾ç½®å‰æ™¯è‰²ï¼Œæ•ˆæžœå’ŒTextViewçš„setTextColor()ç±»ä¼¼ï¼Œå®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 1234SpannableString spannableString = new SpannableString("è®¾ç½®æ–‡å­—çš„å‰æ™¯è‰²ä¸ºæ·¡è“è‰²");ForegroundColorSpan colorSpan = new ForegroundColorSpan(Color.parseColor("#0099EE"));spannableString.setSpan(colorSpan, 9, spannableString.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE); textView.setText(spannableString); è®¾ç½®çš„åŒºé—´æ˜¯9åˆ°å­—ç¬¦ä¸²çš„æœ€åŽï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­â€œæ·¡è“è‰²â€ä¸‰å­—ã€‚ 2.2ï¼šBackgroundColorSpan BackgroundColorSpanï¼Œä¸ºæ–‡æœ¬è®¾ç½®èƒŒæ™¯è‰²ï¼Œæ•ˆæžœå’ŒTextViewçš„setBackground()ç±»ï¼Œå®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 1234SpannableString spannableString = new SpannableString("è®¾ç½®æ–‡å­—çš„èƒŒæ™¯è‰²ä¸ºæ·¡ç»¿è‰²");BackgroundColorSpan colorSpan = new BackgroundColorSpan(Color.parseColor("#AC00FF30"));spannableString.setSpan(colorSpan, 9, spannableString.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setText(spannableString); 2.3ï¼šRelativeSizeSpan RelativeSizeSpanï¼Œè®¾ç½®æ–‡å­—ç›¸å¯¹å¤§å°ï¼Œåœ¨TextViewåŽŸæœ‰çš„æ–‡å­—å¤§å°çš„åŸºç¡€ä¸Šï¼Œç›¸å¯¹è®¾ç½®æ–‡å­—å¤§å°ï¼Œå®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718SpannableString spannableString = new SpannableString("ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·");RelativeSizeSpan sizeSpan01 = new RelativeSizeSpan(1.2f);RelativeSizeSpan sizeSpan02 = new RelativeSizeSpan(1.4f);RelativeSizeSpan sizeSpan03 = new RelativeSizeSpan(1.6f);RelativeSizeSpan sizeSpan04 = new RelativeSizeSpan(1.8f);RelativeSizeSpan sizeSpan05 = new RelativeSizeSpan(1.6f);RelativeSizeSpan sizeSpan06 = new RelativeSizeSpan(1.4f);RelativeSizeSpan sizeSpan07 = new RelativeSizeSpan(1.2f);spannableString.setSpan(sizeSpan01, 0, 1, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);spannableString.setSpan(sizeSpan02, 1, 2, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);spannableString.setSpan(sizeSpan03, 2, 3, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);spannableString.setSpan(sizeSpan04, 3, 4, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);spannableString.setSpan(sizeSpan05, 4, 5, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);spannableString.setSpan(sizeSpan06, 5, 6, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);spannableString.setSpan(sizeSpan07, 6, 7, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setText(spannableString); 2.4ï¼šStrikethroughSpan StrikethroughSpanï¼Œä¸ºæ–‡æœ¬è®¾ç½®ä¸­åˆ’çº¿ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„åˆ é™¤çº¿ï¼Œå®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 1234SpannableString spannableString = new SpannableString("ä¸ºæ–‡å­—è®¾ç½®åˆ é™¤çº¿");StrikethroughSpan strikethroughSpan = new StrikethroughSpan();spannableString.setSpan(strikethroughSpan, 5, spannableString.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setText(spannableString); 2.5ï¼šUnderlineSpan UnderlineSpanï¼Œä¸ºæ–‡æœ¬è®¾ç½®ä¸‹åˆ’çº¿ï¼Œå…·ä½“å®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 1234SpannableString spannableString = new SpannableString("ä¸ºæ–‡å­—è®¾ç½®ä¸‹åˆ’çº¿");UnderlineSpan underlineSpan = new UnderlineSpan();spannableString.setSpan(underlineSpan, 5, spannableString.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setText(spannableString); 2.6ï¼šSuperscriptSpan SuperscriptSpanï¼Œè®¾ç½®ä¸Šæ ‡ï¼Œå…·ä½“å®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 1234SpannableString spannableString = new SpannableString("ä¸ºæ–‡å­—è®¾ç½®ä¸Šæ ‡");SuperscriptSpan superscriptSpan = new SuperscriptSpan();spannableString.setSpan(superscriptSpan, 5, spannableString.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setText(spannableString); ä»Žæ•ˆæžœå›¾å¯ä»¥çœ‹å‡ºï¼Œè¢«è®¾ç½®ä¸ºä¸Šæ ‡çš„æ–‡å­—å¤§å°å’Œä¸‹é¢çš„æ–‡æœ¬æ–‡å­—å¤§å°ä¸€æ ·ï¼Œåªè¦æˆ‘ä»¬ç¨åŠ ä¿®é¥°ï¼Œç»“åˆRelativeSizeSpanè®¾ç½®å°å­—ä½“æ–‡æœ¬ä½œä¸ºä¸Šæ ‡ï¼Œåˆ†åˆ†é’Ÿå®žçŽ°æŒ‡æ•°å…¬å¼æœ‰æœ¨æœ‰ï¼Œå†ä¹Ÿä¸ç”¨2^2+3^2=13è¿™æ ·ç¼ºä¹å®¡ç¾Žçš„æ•°å­¦å…¬å¼äº†ï¼Œæ˜¯ä¸æ˜¯è¶…å®žç”¨ï¼Ÿ 2.7ï¼šSubscriptSpan SubscriptSpanï¼Œè®¾ç½®ä¸‹æ ‡ï¼ŒåŠŸèƒ½ä¸Žè®¾ç½®ä¸Šæ ‡ç±»ä¼¼ï¼Œä¸åšè¿‡å¤šæè¿°ï¼Œå…·ä½“å®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 1234SpannableString spannableString = new SpannableString("ä¸ºæ–‡å­—è®¾ç½®ä¸‹æ ‡");SubscriptSpan subscriptSpan = new SubscriptSpan();spannableString.setSpan(subscriptSpan, 5, spannableString.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setText(spannableString); 2.8ï¼šStyleSpan StyleSpanï¼Œä¸ºæ–‡å­—è®¾ç½®é£Žæ ¼ï¼ˆç²—ä½“ã€æ–œä½“ï¼‰ï¼Œå’ŒTextViewå±žæ€§textStyleç±»ä¼¼ï¼Œå®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 1234567SpannableString spannableString = new SpannableString("ä¸ºæ–‡å­—è®¾ç½®ç²—ä½“ã€æ–œä½“é£Žæ ¼");StyleSpan styleSpan_B = new StyleSpan(Typeface.BOLD);StyleSpan styleSpan_I = new StyleSpan(Typeface.ITALIC);spannableString.setSpan(styleSpan_B, 5, 7, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);spannableString.setSpan(styleSpan_I, 8, 10, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setHighlightColor(Color.parseColor("#36969696"));textView.setText(spannableString); 2.9ï¼šImageSpan ImageSpanï¼Œè®¾ç½®æ–‡æœ¬å›¾ç‰‡ï¼Œå®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 123456SpannableString spannableString = new SpannableString("åœ¨æ–‡æœ¬ä¸­æ·»åŠ è¡¨æƒ…ï¼ˆè¡¨æƒ…ï¼‰");Drawable drawable = getResources().getDrawable(R.mipmap.a9c);drawable.setBounds(0, 0, 42, 42);ImageSpan imageSpan = new ImageSpan(drawable);spannableString.setSpan(imageSpan, 6, 8, Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setText(spannableString); è¿™ä¸€ä¸ªæ˜¯ä¸æ˜¯å¾ˆç‚«é…·ï¼Ÿå†åŠ ä¸€ä¸ªè§£æžç®—æ³•ï¼Œå°†æ–‡æœ¬ä¸­ç‰¹å®šçš„æ–‡æœ¬è½¬æ¢æˆç‰¹å®šçš„è¡¨æƒ…å›¾ç‰‡ï¼Œåˆ†åˆ†é’Ÿå®žçŽ°èŠå¤©è¡¨æƒ…æ˜¾ç¤ºæ•ˆæžœæœ‰æœ¨æœ‰å•Šæœ‹å‹ä»¬ï¼ 3.0ï¼šClickableSpanClickableSpanï¼Œè®¾ç½®å¯ç‚¹å‡»çš„æ–‡æœ¬ï¼Œè®¾ç½®è¿™ä¸ªå±žæ€§çš„æ–‡æœ¬å¯ä»¥ç›¸åº”ç”¨æˆ·ç‚¹å‡»äº‹ä»¶ï¼Œè‡³äºŽç‚¹å‡»äº‹ä»¶ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ï¼Œå°±åƒæ•ˆæžœå›¾æ˜¾ç¤ºä¸€æ ·ï¼Œç”¨æˆ·å¯ä»¥å®žçŽ°ç‚¹å‡»è·³è½¬é¡µé¢çš„æ•ˆæžœï¼Œå…·ä½“å®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 123456SpannableString spannableString = new SpannableString("ä¸ºæ–‡å­—è®¾ç½®ç‚¹å‡»äº‹ä»¶");MyClickableSpan clickableSpan = new MyClickableSpan("https://zhangmiao.cc/");spannableString.setSpan(clickableSpan, 5, spannableString.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setMovementMethod(LinkMovementMethod.getInstance());textView.setHighlightColor(Color.parseColor("#36969696")); textView.setText(spannableString); 12345678910111213141516171819202122class MyClickableSpan extends ClickableSpan &#123; private String content; public MyClickableSpan(String content) &#123; this.content = content; &#125; @Override public void updateDrawState(TextPaint ds) &#123; ds.setUnderlineText(false); &#125; @Override public void onClick(View widget) &#123; Intent intent = new Intent(MainActivity.this, OtherActivity.class); Bundle bundle = new Bundle(); bundle.putString("content", content); intent.putExtra("bundle", bundle); startActivity(intent); &#125;&#125; ä»£ç ä¸­æˆ‘ä»¬è‡ªå®šä¹‰MyClickableSpanç±»ï¼Œç»§æ‰¿è‡³ClickableSpanï¼Œå¹¶é‡å†™å…¶ä¸­ä¸€äº›æ–¹æ³•ã€‚ds.setUnderlineText()æŽ§åˆ¶æ˜¯å¦è®©å¯ç‚¹å‡»æ–‡æœ¬æ˜¾ç¤ºä¸‹åˆ’çº¿ï¼Œå¾ˆæ˜Žæ˜¾ï¼Œåœ¨ä¸Šé¢ä»£ç ä¸­æˆ‘é€‰æ‹©äº†falseï¼Œä¸æ˜¾ç¤ºä¸‹æ»‘å†™ã€‚onClickç‚¹å‡»äº‹ä»¶çš„å…·ä½“å®žçŽ°æ–¹æ³•å†™åœ¨å…¶ä¸­ã€‚å¦‚ä¸Šä»£ç ï¼Œæˆ‘ä»¬é‡å†™ClickableSpançš„onClickæ–¹æ³•å®žçŽ°Activityçš„è·³è½¬æ•ˆæžœï¼Œå¹¶ä¼ é€’è·³è½¬æ•°æ®ã€‚ æ³¨æ„ï¼šä½¿ç”¨ClickableSpançš„æ–‡æœ¬å¦‚æžœæƒ³çœŸæ­£å®žçŽ°ç‚¹å‡»ä½œç”¨ï¼Œå¿…é¡»ä¸ºTextViewè®¾ç½®setMovementMethodæ–¹æ³•ï¼Œå¦åˆ™æ²¡æœ‰ç‚¹å‡»ç›¸åº”ï¼Œè‡³äºŽsetHighlightColoræ–¹æ³•åˆ™æ˜¯æŽ§åˆ¶ç‚¹å‡»æ˜¯çš„èƒŒæ™¯è‰²ã€‚ URLSpanURLSpanï¼Œè®¾ç½®è¶…é“¾æŽ¥æ–‡æœ¬ï¼Œå…¶å®žèªæ˜Žçš„å°ä¼™å¸®åœ¨è®²åˆ°ClickableSpançš„æ—¶å€™å°±èƒ½å®žçŽ°è¶…é“¾æŽ¥æ–‡æœ¬çš„æ•ˆæžœäº†ï¼Œé‡å†™onClickç‚¹å‡»äº‹ä»¶å°±è¡Œï¼Œä¹Ÿç¡®å®žçœ‹äº†URLSpançš„æºç ï¼ŒURLSpanå°±æ˜¯ç»§æ‰¿è‡ªClickableSpanï¼Œä¹Ÿå’Œæƒ³è±¡ä¸­ä¸€æ ·ï¼Œå°±æ˜¯é‡å†™äº†çˆ¶ç±»çš„onClickäº‹ä»¶ï¼Œç”¨ç³»ç»Ÿè‡ªå¸¦æµè§ˆå™¨æ‰“å¼€é“¾æŽ¥ï¼Œå…·ä½“å®žçŽ°æ–¹æ³•å¦‚ä¸‹ï¼š 123456SpannableString spannableString = new SpannableString("ä¸ºæ–‡å­—è®¾ç½®è¶…é“¾æŽ¥");URLSpan urlSpan = new URLSpan("https://zhangmiao.cc/");spannableString.setSpan(urlSpan, 5, spannableString.length(), Spanned.SPAN_INCLUSIVE_EXCLUSIVE);textView.setMovementMethod(LinkMovementMethod.getInstance());textView.setHighlightColor(Color.parseColor("#36969696"));textView.setText(spannableString); URLSpanonClickäº‹ä»¶çš„æºç å¦‚ä¸‹ï¼š 123456789101112@Overridepublic void onClick(View widget) &#123; Uri uri = Uri.parse(getURL()); Context context = widget.getContext(); Intent intent = new Intent(Intent.ACTION_VIEW, uri); intent.putExtra(Browser.EXTRA_APPLICATION_ID, context.getPackageName()); try &#123; context.startActivity(intent); &#125; catch (ActivityNotFoundException e) &#123; Log.w("URLSpan", "Actvity was not found for intent, " + intent.toString()); &#125;&#125; é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰MaskFilterSpanå¯ä»¥å®žçŽ°æ¨¡ç³Šå’Œæµ®é›•æ•ˆæžœï¼ŒRasterizerSpanå¯ä»¥å®žçŽ°å…‰æ …æ•ˆæžœï¼Œå› ä¸ºä»¥ä¸Šä¸¤ä¸ªä½¿ç”¨é¢‘çŽ‡ä¸é«˜ï¼Œè€Œä¸”æ•ˆæžœä¹Ÿä¸æ˜¯å¾ˆæ˜Žæ˜¾ï¼Œå°±ä¸åšè¯¦ç»†è¯´æ˜Žï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´ä¸å¦¨åŽ»è¯•ä¸€è¯•ã€‚ SpannableStringBuilderåº”è¯¥æœ‰ä¸å°‘å¼€å‘çš„å°ä¼™ä¼´çŸ¥é“StringBuilderï¼Œå¯ä»¥ä½¿ç”¨append()æ–¹æ³•å®žçŽ°å­—ç¬¦ä¸²æ‹¼æŽ¥ï¼Œéžå¸¸æ–¹ä¾¿ã€‚åŒæ ·ï¼ŒSpannableStringä¸­ä¹Ÿæœ‰SpannableStringBuilderï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯å®žçŽ°å¯¹ï¼ŒSpannableStringçš„ä¸€ä¸ªæ‹¼æŽ¥æ•ˆæžœï¼ŒåŒæ ·æ˜¯append()æ–¹æ³•ï¼Œå¯ä»¥å®žçŽ°å„ç§é£Žæ ¼æ•ˆæžœçš„SpannableStringæ‹¼æŽ¥ï¼Œéžå¸¸å®žç”¨ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>SpannableString</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidè·³è½¬æƒé™è®¾ç½®ç•Œé¢çš„ç»ˆæžé€‚é…ï¼ˆæ”¯æŒå„å¤§å®šåˆ¶ROMï¼‰]]></title>
    <url>%2Fposts%2F559aa4a0.html</url>
    <content type="text"><![CDATA[å‰è¨€ï¼š å½“æˆ‘ä»¬çš„ç”¨æˆ·ä½¿ç”¨Appæ—¶ä¸å°å¿ƒæ‹’ç»äº†æŸé¡¹å¿…è¦æƒé™ï¼Œè€Œå¯¼è‡´æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚è¿™æ—¶å€™å¸Œæœ›é‡æ–°åŽ»æ‰“å¼€è¯¥æƒé™ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒAndroidåŽ‚å®¶å®šåˆ¶çš„roomäº”èŠ±å…«é—¨ï¼Œå¾ˆå¤šæ—¶å€™å´å‘çŽ°æ‰¾ä¸åˆ°æƒé™ç®¡ç†çš„å…¥å£ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¦‚æžœæˆ‘ä»¬åº”ç”¨ä¸­ç›´æŽ¥æä¾›æƒé™ç®¡ç†å…¥å£ç»™ç”¨æˆ·ï¼Œæ˜¯ä¸æ˜¯ä¼šå¾ˆæ–¹ä¾¿çš„è§£å†³ç”¨æˆ·è¿™ä¸€å›°æ‰°å‘¢?ç»è¿‡ä¸€ç•ªç ”ç©¶ï¼Œæ•´ç†å‡ºäº†å¤§éƒ¨åˆ†å›½äº§æ‰‹æœºç›´æŽ¥æ‰“å¼€æƒé™ç®¡ç†ç•Œé¢çš„æ–¹æ³• æƒé™ç•Œé¢çš„è·³è½¬ä¸€èˆ¬é¡¹ç›®ä¸­æˆ‘ä»¬éƒ½ä¼šé€šè¿‡ä¸€ä¸ªç±»æ¥ç®¡ç†æˆ‘ä»¬çš„Permissionï¼Œå³PermissionPageUtils 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245/** * æƒé™è¯·æ±‚é¡µé€‚é…ï¼Œä¸åŒæ‰‹æœºç³»ç»Ÿè·³è½¬åˆ°ä¸åŒçš„æƒé™è¯·æ±‚é¡µ * * @author Donkor */public class PermissionPageUtils &#123; private final String TAG = "PermissionPageManager"; private Context mContext; //è‡ªå·±çš„é¡¹ç›®åŒ…å private String packageName="com.zm.demo"; public PermissionPageUtils(Context context) &#123; this.mContext = context; &#125; public void jumpPermissionPage() &#123; String name = Build.MANUFACTURER; L.e(TAG, "jumpPermissionPage --- name : " + name); switch (name) &#123; case "HUAWEI": goHuaWeiMainager(); break; case "vivo": goVivoMainager(); break; case "OPPO": goOppoMainager(); break; case "Coolpad": goCoolpadMainager(); break; case "Meizu": goMeizuMainager(); break; case "Xiaomi": goXiaoMiMainager(); break; case "samsung": goSangXinMainager(); break; case "Sony": goSonyMainager(); break; case "LG": goLGMainager(); break; default: goIntentSetting(); break; &#125; &#125; private void goLGMainager()&#123; try &#123; Intent intent = new Intent(packageName); ComponentName comp = new ComponentName("com.android.settings", "com.android.settings.Settings$AccessLockSummaryActivity"); intent.setComponent(comp); mContext.startActivity(intent); &#125; catch (Exception e) &#123; Toast.makeText(mContext, "è·³è½¬å¤±è´¥", Toast.LENGTH_LONG).show(); e.printStackTrace(); goIntentSetting(); &#125; &#125; private void goSonyMainager()&#123; try &#123; Intent intent = new Intent(packageName); ComponentName comp = new ComponentName("com.sonymobile.cta", "com.sonymobile.cta.SomcCTAMainActivity"); intent.setComponent(comp); mContext.startActivity(intent); &#125; catch (Exception e) &#123; Toast.makeText(mContext, "è·³è½¬å¤±è´¥", Toast.LENGTH_LONG).show(); e.printStackTrace(); goIntentSetting(); &#125; &#125; private void goHuaWeiMainager() &#123; try &#123; Intent intent = new Intent(packageName); intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); ComponentName comp = new ComponentName("com.huawei.systemmanager", "com.huawei.permissionmanager.ui.MainActivity"); intent.setComponent(comp); mContext.startActivity(intent); &#125; catch (Exception e) &#123; Toast.makeText(mContext, "è·³è½¬å¤±è´¥", Toast.LENGTH_LONG).show(); e.printStackTrace(); goIntentSetting(); &#125; &#125; private static String getMiuiVersion() &#123; String propName = "ro.miui.ui.version.name"; String line; BufferedReader input = null; try &#123; Process p = Runtime.getRuntime().exec("getprop " + propName); input = new BufferedReader( new InputStreamReader(p.getInputStream()), 1024); line = input.readLine(); input.close(); &#125; catch (IOException ex) &#123; ex.printStackTrace(); return null; &#125; finally &#123; try &#123; input.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; return line; &#125; private void goXiaoMiMainager() &#123; String rom = getMiuiVersion(); L.e(TAG,"goMiaoMiMainager --- rom : "+rom); Intent intent=new Intent(); if ("V6".equals(rom) || "V7".equals(rom)) &#123; intent.setAction("miui.intent.action.APP_PERM_EDITOR"); intent.setClassName("com.miui.securitycenter", "com.miui.permcenter.permissions.AppPermissionsEditorActivity"); intent.putExtra("extra_pkgname", packageName); &#125; else if ("V8".equals(rom) || "V9".equals(rom)) &#123; intent.setAction("miui.intent.action.APP_PERM_EDITOR"); intent.setClassName("com.miui.securitycenter", "com.miui.permcenter.permissions.PermissionsEditorActivity"); intent.putExtra("extra_pkgname", packageName); &#125; else &#123; goIntentSetting(); &#125; mContext.startActivity(intent); &#125; private void goMeizuMainager() &#123; try &#123; Intent intent = new Intent("com.meizu.safe.security.SHOW_APPSEC"); intent.addCategory(Intent.CATEGORY_DEFAULT); intent.putExtra("packageName", packageName); mContext.startActivity(intent); &#125; catch (ActivityNotFoundException localActivityNotFoundException) &#123; localActivityNotFoundException.printStackTrace(); goIntentSetting(); &#125; &#125; private void goSangXinMainager() &#123; //ä¸‰æ˜Ÿ4.3å¯ä»¥ç›´æŽ¥è·³è½¬ goIntentSetting(); &#125; private void goIntentSetting() &#123; Intent intent = new Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS); Uri uri = Uri.fromParts("package", mContext.getPackageName(), null); intent.setData(uri); try &#123; mContext.startActivity(intent); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; private void goOppoMainager() &#123; doStartApplicationWithPackageName("com.coloros.safecenter"); &#125; /** * doStartApplicationWithPackageName("com.yulong.android.security:remote") * å’ŒIntent open = getPackageManager().getLaunchIntentForPackage("com.yulong.android.security:remote"); * startActivity(open); * æœ¬è´¨ä¸Šæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé€šè¿‡Intent open...æ‰“å¼€æ¯”è°ƒç”¨doStartApplicationWithPackageNameæ–¹æ³•æ›´å¿«ï¼Œä¹Ÿæ˜¯androidæœ¬èº«æä¾›çš„æ–¹æ³• */ private void goCoolpadMainager() &#123; doStartApplicationWithPackageName("com.yulong.android.security:remote"); /* Intent openQQ = getPackageManager().getLaunchIntentForPackage("com.yulong.android.security:remote"); startActivity(openQQ);*/ &#125; private void goVivoMainager() &#123; doStartApplicationWithPackageName("com.bairenkeji.icaller"); /* Intent openQQ = getPackageManager().getLaunchIntentForPackage("com.vivo.securedaemonservice"); startActivity(openQQ);*/ &#125; /** * æ­¤æ–¹æ³•åœ¨æ‰‹æœºå„ä¸ªæœºåž‹è®¾ç½®ä¸­å·²ç»å¤±æ•ˆ * * @return */ private Intent getAppDetailSettingIntent() &#123; Intent localIntent = new Intent(); localIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); if (Build.VERSION.SDK_INT &gt;= 9) &#123; localIntent.setAction("android.settings.APPLICATION_DETAILS_SETTINGS"); localIntent.setData(Uri.fromParts("package", mContext.getPackageName(), null)); &#125; else if (Build.VERSION.SDK_INT &lt;= 8) &#123; localIntent.setAction(Intent.ACTION_VIEW); localIntent.setClassName("com.android.settings", "com.android.settings.InstalledAppDetails"); localIntent.putExtra("com.android.settings.ApplicationPkgName", mContext.getPackageName()); &#125; return localIntent; &#125; private void doStartApplicationWithPackageName(String packagename) &#123; // é€šè¿‡åŒ…åèŽ·å–æ­¤APPè¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬Activitiesã€servicesã€versioncodeã€nameç­‰ç­‰ PackageInfo packageinfo = null; try &#123; packageinfo = mContext.getPackageManager().getPackageInfo(packagename, 0); &#125; catch (PackageManager.NameNotFoundException e) &#123; e.printStackTrace(); &#125; if (packageinfo == null) &#123; return; &#125; // åˆ›å»ºä¸€ä¸ªç±»åˆ«ä¸ºCATEGORY_LAUNCHERçš„è¯¥åŒ…åçš„Intent Intent resolveIntent = new Intent(Intent.ACTION_MAIN, null); resolveIntent.addCategory(Intent.CATEGORY_LAUNCHER); resolveIntent.setPackage(packageinfo.packageName); // é€šè¿‡getPackageManager()çš„queryIntentActivitiesæ–¹æ³•éåŽ† List&lt;ResolveInfo&gt; resolveinfoList = mContext.getPackageManager() .queryIntentActivities(resolveIntent, 0); Log.e("PermissionPageManager", "resolveinfoList" + resolveinfoList.size()); for (int i = 0; i &lt; resolveinfoList.size(); i++) &#123; Log.e("PermissionPageManager", resolveinfoList.get(i).activityInfo.packageName + resolveinfoList.get(i).activityInfo.name); &#125; ResolveInfo resolveinfo = resolveinfoList.iterator().next(); if (resolveinfo != null) &#123; // packageNameå‚æ•°2 = å‚æ•° packname String packageName = resolveinfo.activityInfo.packageName; // è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„è¯¥APPçš„LAUNCHERçš„Activity[ç»„ç»‡å½¢å¼ï¼špackageNameå‚æ•°2.mainActivityname] String className = resolveinfo.activityInfo.name; // LAUNCHER Intent Intent intent = new Intent(Intent.ACTION_MAIN); intent.addCategory(Intent.CATEGORY_LAUNCHER); // è®¾ç½®ComponentNameå‚æ•°1:packageNameå‚æ•°2:MainActivityè·¯å¾„ ComponentName cn = new ComponentName(packageName, className); intent.setComponent(cn); try &#123; mContext.startActivity(intent); &#125; catch (Exception e) &#123; goIntentSetting(); e.printStackTrace(); &#125; &#125; &#125;&#125; å¦å¤–ï¼šå½“å‰å·²é€‚é…æµ‹è¯•çš„æœºåž‹åŒ…æ‹¬å°ç±³ï¼ŒåŽä¸ºï¼Œä¸‰æ˜Ÿï¼Œé”¤å­ã€‚ä»£ç ä»…ä¾›å‚è€ƒã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>ä»£ç ç‰‡æ®µ</tag>
        <tag>æƒé™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Omniplan 5åˆ†é’Ÿå…¥ä¸ªé—¨]]></title>
    <url>%2Fposts%2F3df11d4f.html</url>
    <content type="text"><![CDATA[https://xclient.info/s/omni-plan.html 00:00 ä»€ä¹ˆè¦ç”¨omniplanï¼Ÿæœ€è¿‘å·¥ä½œå½“ä¸­ï¼Œå¯¹é¡¹ç›®äº¤ä»˜çš„è¦æ±‚è¶Šæ¥è¶Šé«˜äº†ã€‚ è¿™æ„å‘³ç€ä¸èƒ½åƒä¹‹å‰é‚£æ ·ï¼Œåšå®Œæ–¹æ¡ˆå°±ä¸¢ç»™å¼€å‘ï¼Œç„¶åŽåˆ°äº†æŒ‡å®šæ—¶é—´å†æ”¶èŽ·äº†ã€‚ é‚£ä¹ˆæ€Žä¹ˆæŽŒæ¡é¡¹ç›®å…¨éƒ¨çš„è¿›åº¦å‘¢ï¼Œç”¨ä¸‡èƒ½çš„excelç”»æ ¼å­å—ï¼Ÿ ç”»æ ¼å­ å½“ç„¶åœ¨äº§å“ç»ç†é¢å‰ï¼ŒExcelæ— æ‰€ä¸èƒ½ï¼Œä¸Šåˆ°ç”»åŽŸåž‹ï¼Œä¸‹åˆ°æ•°æ®åº“ç®¡ç†ã€‚ä½†æ˜¯åœ¨é¢å¯¹ä¸€ä¸ªè¾ƒå¤§çš„é¡¹ç›®çš„æ—¶å€™ï¼Œä»ç„¶ä¼šæœ‰ä¸€äº›é—®é¢˜ï¼š æˆ‘çš„é¡¹ç›®è¿›åº¦åˆ°å“ªäº†ï¼Ÿ é¡¹ç›®ç“¶é¢ˆæ˜¯ä»€ä¹ˆï¼Ÿ è¿˜æœ‰æ²¡æœ‰æ›´å¥½çš„é¡¹ç›®ç»„ç»‡çš„æ–¹æ¡ˆï¼Ÿ è¿™äº›é—®é¢˜çš„ç­”æ¡ˆå°±æ˜¯ omniplanã€‚ 00:30 æ‰“å¼€omniplançœ‹çœ‹ä»€ä¹ˆï¼Œæ‰è¿‡äº†30ç§’ï¼Ÿæ˜¯çš„ã€‚ å®‰è£…ä¸‹è½½omniplanå¯ä»¥ç›´æŽ¥åˆ°å®˜ç½‘æˆ–è€…mac app storeè´­ä¹°ä¸‹è½½ï¼Œå¯¹äºŽä¸€ä¸ªç”Ÿäº§åŠ›å·¥å…·æ¥è¯´ï¼Œä»·æ ¼ä¸ç®—è´µã€‚ å½“ç„¶ä½ è¦æ˜¯æ‰¾åˆ°äº†åˆ«çš„æ¸ é“æ¥ä¸‹è½½â€¦â€¦é‚£æˆ‘æ˜¯ç®¡ä¸ç€çš„ã€‚ ç•Œé¢ æ©ï¼Œè¿™äº›çº¢å­—åŠ çš„å¾ˆä¸ä¼˜é›…ï¼Œä½†ä¸é‡è¦ã€‚ å·¦è¾¹æ˜¯ä»»åŠ¡åˆ—è¡¨ï¼Œå¯ä»¥åŠ åˆ†ç»„ï¼Œä¸­é—´æ˜¯æ—¶é—´çš„ç”˜ç‰¹å›¾ï¼Œå¯ä»¥æ‹–æ‹½ã€‚ä¸Šè¾¹æ˜¯é¢æ¿çš„åˆ‡æ¢ã€‚ å³è¾¹æ˜¯ä¿¡æ¯åˆ—è¡¨ï¼Œå¯ä»¥å¡«å†™ä¸€äº›æ›´ä»”ç»†çš„ä¿¡æ¯ã€‚ ç›¸ä¿¡æˆ‘ï¼Œ5åˆ†é’Ÿæ—¶é—´é‡Œï¼Œä½ åŸºæœ¬æ˜¯ç”¨ä¸åˆ°å³ä¾§çš„è¿™äº›å†…å®¹çš„ã€‚ 01:00 å½•å…¥ä»»åŠ¡ï¼Œåˆ†ç»„ç‚¹å‡»å·¦è¾¹çš„åˆ—è¡¨ï¼Œå°±å¯ä»¥å½•å…¥ä»»åŠ¡ï¼Œæ‰“å®Œä¹‹åŽæŒ‰å›žè½¦ï¼Œå¿«é€Ÿæ–°å»ºä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚ åˆ†ç»„ å¦ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„åŠŸèƒ½æ˜¯å¤šé€‰å¤šä¸ªä»»åŠ¡ï¼Œæ–°å»ºä¸€ä¸ªç¾¤ç»„ã€‚ç¾¤ç»„çš„æ—¶é—´å’Œè¿›åº¦ä¼šæ ¹æ®å­ä»»åŠ¡è®¡ç®—ã€‚ åŒæ ·çš„ï¼Œä½ ä¹Ÿå¯ä»¥æ‹–æ‹½ä»»åŠ¡ä¸Šä¸‹ç§»ï¼ŒæŽ’åºï¼Œå‰ªåˆ‡ï¼Œå¤åˆ¶ä»€ä¹ˆçš„ã€‚ 01:20 ç»™ä»»åŠ¡å®‰æŽ’æ—¶é—´ç»™ä»»åŠ¡å®‰æŽ’æ—¶é—´å¾ˆç®€å•ï¼Œé¼ æ ‡æ”¾åˆ°è“æ¡çš„æœ€å³è¾¹ï¼Œç„¶åŽæ‹–æ‹½æ‹‰é•¿å°±è¡Œã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œä»»åŠ¡å®žé™…ä¸Šæ˜¯å­˜åœ¨é€»è¾‘é¡ºåºçš„ï¼Œæ¯”å¦‚å¾—å…ˆå®ŒæˆåŽŸåž‹ï¼Œæ‰èƒ½åšè§†è§‰ï¼Œæ‰èƒ½å¼€å§‹å¼€å‘ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™è¿™äº›ä»»åŠ¡åŠ ä¸Šå…³è”å…³ç³»ï¼š æ‹–æ‹½è¿™ä¸ªå³è¾¹çš„ç®­å¤´å…³è”åˆ°ä¸‹ä¸€ä¸ªä»»åŠ¡ä¸Šï¼Œå°±å®Œæˆäº† Aä»»åŠ¡å®Œæˆæ—¶-Bä»»åŠ¡å¼€å§‹çš„é€»è¾‘ã€‚ omniplanä¼šæ ¹æ®ä½ çš„ä»»åŠ¡é€»è¾‘å…³ç³»è‡ªåŠ¨å®‰æŽ’æ—¶é—´ï¼Œçœ‹èµ·æ¥ä¸é”™ï¼ 02:00 èŠ‚å¥å¥½åƒä¸å¯¹ï¼Ÿæ‰€æœ‰çš„é¡¹ç›®éƒ½å®‰æŽ’å¥½äº†æ—¶é—´ï¼Œä½†æ˜¯çŽ°åœ¨æœ‰ä¸¤ä¸ªæ—¶é—´ä¸Šçš„é—®é¢˜ï¼š webä¸Šçº¿å¥½åƒæ˜¯ä¸€ä¸ªèŠ‚ç‚¹è€Œä¸æ˜¯ä¸€ä¸ªæ—¶é—´æ®µã€‚ appå‘ç‰ˆæ˜¯æŒ‰å›ºå®šèŠ‚å¥æ¥çš„ï¼Œå¹¶ä¸æ˜¯åšå®Œå°±ä¸Šçº¿ï¼Œåªæœ‰åœ¨å‘ç‰ˆä¹‹åŽï¼Œæ‰ç®—æ˜¯å¼€å‘å®Œæ¯•ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¦å¤–ä¸¤ä¸ªè¡¨çŽ°ä»»åŠ¡èŠ‚ç‚¹çš„å·¥å…·ã€‚ é‡Œç¨‹ç¢‘ å¼¹æ€§ä»»åŠ¡ï¼ˆomniplanä¸­å«åšåŠåºŠä»»åŠ¡ï¼‰ é‡Œç¨‹ç¢‘æ˜¯ä¸€ç§æ²¡æœ‰æ—¶é—´æ¶ˆè€—çš„ä»»åŠ¡ï¼Œç”¨æ¥æ ‡è®°ä¸€ä¸ªé¡¹ç›®çš„çŠ¶æ€å˜åŒ–ï¼Œæˆ–è€…æŠŠä¸€ä¸ªå¤§é¡¹ç›®æ‹†æˆè‹¥å¹²é˜¶æ®µéƒ½æ˜¯å¾ˆå¥½ç”¨çš„ã€‚ å¼¹æ€§ä»»åŠ¡å¾ˆæœ‰æ„æ€ï¼Œå®ƒè‡ªå·±æœ¬èº«çš„èµ·ç‚¹å’Œç»ˆç‚¹éƒ½å–å†³äºŽå‰åŽçš„ä»»åŠ¡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç›´åˆ°å‘ç‰ˆä¹‹å‰ï¼Œå·¥ç¨‹å¸ˆéƒ½å¯ä»¥ç»§ç»­å¯¹æ€§èƒ½è°ƒä¼˜ã€‚ æƒ³è¦åˆ‡æ¢ä»»åŠ¡çŠ¶æ€å¾ˆç®€å•ï¼Œåœ¨å³è¾¹ä¿¡æ¯é¢æ¿ä¸­åˆ‡æ¢å°±è¡Œï¼ˆæ€Žä¹ˆæ„Ÿè§‰æ‰“è‡ªå·±è„¸äº†ï¼‰ã€‚ 03:00 è°æ¥è´Ÿè´£ï¼Ÿå®Œæˆäº†æ‰€æœ‰é¡¹ç›®èŠ‚å¥ä¹‹åŽï¼ŒæŽ¥ä¸‹æ¥è¦è§£å†³çš„é—®é¢˜æ˜¯äººå‘˜å®‰æŽ’çš„é—®é¢˜ï¼ˆå½“ç„¶ä½ å¯ä»¥å…ˆæŠŠäººå‘˜ç¡®å®šä¹‹åŽå†å®‰æŽ’æ—¶é—´èŠ‚å¥ã€‚ï¼‰ ç‚¹ç¬¬äºŒä¸ªè§†å›¾ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªç•Œé¢ã€‚ è¿™é‡Œæ˜¯èµ„æºåˆ—è¡¨ï¼ˆèµ„æºå¯ä»¥æ˜¯äººï¼Œä¹Ÿå¯ä»¥æ˜¯è®¾å¤‡ï¼Œç´ æç­‰ã€‚ï¼‰è€ƒè™‘åˆ°æˆ‘ä»¬çš„ä¾‹å­æ˜¯ä¸ªå¼€å‘çš„é¡¹ç›®ï¼Œæˆ‘æ·»åŠ ä¸€äº›å·¥ç¨‹å¸ˆè¿›åŽ»å§ã€‚ å¥½åƒå…¨æ˜¯çŠ¬ç§‘åŠ¨ç‰©â€¦â€¦åŽé¢çš„å•ä½è¡¨ç¤ºè¿™ä¸ªäººæ˜¯å…¨èŒï¼ˆ100%å·¥æ—¶ï¼‰ã€‚ æŽ¥ä¸‹æ¥ç»™ä»–ä»¬æŠŠå·¥ä½œéƒ½åˆ†é…ä¸€ä¸‹ï¼Œå¾ˆç®€å•ï¼Œç”¨æ‹–åŠ¨çš„åŠžæ³•ã€‚ è¿™æ—¶è¿”å›žä»»åŠ¡é¢æ¿çœ‹ä¸€ä¸‹ï¼š çœ‹èµ·æ¥ä¸é”™ï¼ 04:00 é¡¹ç›®åœ¨è¿è¡Œé¡¹ç›®å¼€å§‹è¿è¡Œèµ·æ¥ä¹‹åŽï¼Œæˆ‘ä»¬éœ€è¦æ—¶åˆ»å…³æ³¨å…¶ä¸­çš„è¿›åº¦å˜åŒ–ã€‚ æ¯”å¦‚ç”°å›­çŠ¬å®Œæˆäº†è‡ªå·±çš„åŽŸåž‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç”˜ç‰¹å›¾ä¸­æ ‡è¯†å‡ºæ¥ã€‚ æ‹–åŠ¨è¿™ä¸ªè¿›åº¦æŒ‡ç¤ºå™¨æ¥å±•ç¤ºå·¥ä½œçš„è¿›åº¦ã€‚ å¦‚æžœä»»åŠ¡å»ºäº†åˆ†ç»„ï¼Œé‚£ä¹ˆåˆ†ç»„çš„è¿›åº¦ä¹Ÿä¼šå˜åŒ–ã€‚ 04:30 ç³Ÿç³•ï¼Œé¡¹ç›®å»¶è¯¯äº†ï¼è¿™å¤§æ¦‚æ˜¯å¤§å®¶éƒ½ä¸æ„¿æ„é‡åˆ°çš„é—®é¢˜ï¼Œé¡¹ç›®é‡åˆ°äº†ä¸€äº›ä¸æŒ‰é¢„æœŸè¿›å±•çš„æƒ…å†µã€‚ è¿™é‡Œå‡è®¾ä¸€ä¸‹ï¼Œäº§å“ç»ç†è¿™å‡ å¤©çŠ¶æ€ä¸å¥½ï¼Œæ¯”å®žé™…ä¸Šç”¨æ—¶æ™šäº†ä¸€å¤©ã€‚ æœ¬æ¥23å·è®¾è®¡å¸ˆå°±å¼€å§‹å·¥ä½œäº†ï¼Œä½†æ˜¯å› ä¸ºäº§å“ç»ç†ä¸ç»™åŠ›ï¼Œå¯¼è‡´24å·æ‰å¼€å§‹ã€‚è¿™é‡Œæˆ‘ä»¬éœ€è¦å°†äº§å“ç»ç†çš„ç”¨æ—¶æ‹‰é•¿ä¸€å¤©ï¼Œå…¶ä»–çš„ä»»åŠ¡ä¼šä¸€èµ·åŽç§»ã€‚ æ€Žä¹ˆä½“çŽ°å‡ºæ¥äº§å“ç»ç†ç¡®å®žå»¶è¯¯äº†å‘¢ï¼Ÿ æˆ‘ä»¬éœ€è¦è®²ä¸€ä¸‹ä»Šå¤©æœ€åŽä¸€ä¸ªåŠŸèƒ½ï¼šåŸºçº¿ã€‚ è¿™ä¸ªåŠŸèƒ½æ˜¯å°†å½“å‰çš„é¡¹ç›®è¿›åº¦ä¿å­˜ä¸€ä»½ï¼Œæ–¹ä¾¿ä¸Žå®žé™…çš„è¿›åº¦è¿›è¡Œæ¯”å¯¹ã€‚ ç‚¹å‡»é¢æ¿åˆ‡æ¢å³è¾¹çš„åŸºçº¿æ¯”å¯¹é€‰é¡¹ï¼Œç›´æŽ¥é€‰æ‹© æ‹†åˆ†ï¼šå®žé™… vs åŸºçº¿ã€‚ è¿™ä¹ˆä¸€æ¯”å¯¹å°±å¾ˆæ¸…æ™°äº† éƒ½æ˜¯äº§å“ç»ç†çš„é”…ï¼ï¼ 05:00 ç»“è¯­äº”åˆ†é’Ÿæ—¶é—´å¸¦ç€å¤§å®¶é£žå¿«çš„è¿‡äº†ä¸€ä¸‹æ ¸å¿ƒçš„åŠŸèƒ½ï¼Œä½†æ˜¯omniå®¶çš„è¿™äº›è½¯ä»¶å…¶å®žåŠŸèƒ½éƒ½å¾ˆå¼ºå¤§ï¼Œè¿˜æœ‰å¾ˆå¤šå€¼å¾—ç ”ç©¶å­¦ä¹ çš„ã€‚ å¸Œæœ›å¤§å®¶éƒ½èƒ½æŠŠé¡¹ç›®è·‘çš„å¹³ç¨³ï¼Œåƒå¥½å–å¥½ä¸åŠ ç­ï¼]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>å·¥å…·</tag>
        <tag>omniplan</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Genymotionä¸Šä¸èƒ½å®‰è£…APKè½¯ä»¶çš„é—®é¢˜]]></title>
    <url>%2Fposts%2Ff1cdd64c.html</url>
    <content type="text"><![CDATA[Genymotionæ¨¡æ‹Ÿå™¨ä¸èƒ½å®‰è£…APKçš„åŽŸå› å®˜ç½‘ç»™å‡ºçš„è§£é‡Šï¼šGenymotionæ¨¡æ‹Ÿå™¨ä½¿ç”¨çš„æ˜¯x86æž¶æž„ï¼Œåœ¨ç¬¬ä¸‰æ–¹å¸‚åœºä¸Šçš„åº”ç”¨æœ‰éƒ¨åˆ†ä¸é‡‡ç”¨x86è¿™ä¹ˆä¸€ç§æž¶æž„ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™ä¸é€šè¿‡ï¼ŒæŠ¥â€œAPP not installedâ€ï¼Œå¯ä»¥ä¸‹è½½Genymotionæä¾›çš„ARMè½¬æ¢å·¥å…·åŒ…ï¼Œå°†åº”ç”¨å¸‚åœºä¸­çš„ARMæž¶æž„çš„apkè½¬æ¢æˆGenymotionå¯ä»¥ç¼–è¯‘çš„x86æž¶æž„ï¼› ç›´æŽ¥å®‰è£…æŠ¥é”™å¦‚ä¸‹å›¾ï¼šAn error occured while deploying the file.This probably means that the app contains ARM native code and your Genymotion device cannot run ARM instructions. You should either build your native code to x86 or install an ARM translation tool in your device.éƒ¨ç½²æ–‡ä»¶æ—¶å‡ºé”™ã€‚è¿™å¯èƒ½æ„å‘³ç€åº”ç”¨ç¨‹åºåŒ…å«æœ¬åœ°ARMä»£ç å’Œä½ çš„genymotionè®¾å¤‡æ— æ³•è¿è¡ŒARMæŒ‡ä»¤ã€‚ä½ å¯ä»¥å»ºç«‹ä½ çš„åŽŸç”Ÿä»£ç çš„x86æˆ–åœ¨æ‚¨çš„è®¾å¤‡ä¸Šå®‰è£…ä¸€ä¸ªè‡‚çš„ç¿»è¯‘å·¥å…·ã€‚ è§£å†³æ–¹æ³•1.ç”¨Android Studio åˆ›å»ºä¸€ä¸ªARMçš„è™šæ‹Ÿæœºï¼›ï¼ˆå½“ç„¶è¿™ä¸ªä¸æ˜¯ä½ æƒ³è¦çš„ï¼‰2.ä¸‹è½½Genymotion-ARM-Translation-Libraritieså·¥å…·è½¬æ¢åŒ…ï¼›ä¸‹è½½è·¯å¾„ï¼š é“¾æŽ¥:https://pan.baidu.com/s/1OOj72JqNnTtSZJnCXCoFzA å¯†ç :p8c4 å°†ä¸‹è½½å·çš„å·¥å…·åŒ…ç›´æŽ¥æ‹–æ‹½åˆ°Genymotionä¸­ï¼Œç„¶åŽæç¤ºé‡å¯æ¨¡æ‹Ÿå™¨ï¼›]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>Genymotion</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®Œç¾Žè§£å†³Genymotionæ— æ³•ä½¿ç”¨adbå‘½ä»¤çš„é—®é¢˜]]></title>
    <url>%2Fposts%2Fc3520239.html</url>
    <content type="text"><![CDATA[æˆ‘åœ¨è¿è¡ŒGenymotionè™šæ‹Ÿæœºè¿›è¡Œandroidåº”ç”¨è°ƒè¯•çš„æ—¶å€™ï¼Œæ— æ³•ç”¨Powershell(cmd)è¿›å…¥adb shellï¼Œæ˜¾ç¤ºçš„ç•Œé¢æ˜¯è¿™æ ·çš„ï¼š å¯¼è‡´æ— æ³•æ­£å¸¸è¿›è¡Œadbè°ƒè¯•ï¼Œæ‰¾äº†å¾ˆå¤šæ–¹æ³•éƒ½æ²¡ç”¨ï¼ŒåŽæ¥ä¿®æ”¹äº†genymotionä¸­çš„settings ä¸­çš„ADBé€‰é¡¹ä¸­çš„SDKè·¯å¾„ï¼Œä¿æŒè·Ÿä½ å½“å‰åº”ç”¨çš„eclipseæˆ–è€…android studioä¸­çš„SDKåº“ä¸€è‡´ï¼Œç„¶åŽé—®é¢˜å°±è§£å†³äº†ï¼›]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>Genymotion</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”Ÿæ´»è®¡åˆ’]]></title>
    <url>%2Fposts%2Fa5f172c4.html</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OkHttp3æºç åˆ†æžäºŒ]]></title>
    <url>%2Fposts%2F9c0f9a31.html</url>
    <content type="text"><![CDATA[1.å‰è¨€ Androidå¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹çš„æ¡†æž¶åº“å·²æˆå®¶å¸¸ä¾¿é¥­ï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹å¥½å¤„é¿å…é‡å¤é€ è½®å­ã€é™ä½Žæˆæœ¬ã€æå‡æ•ˆçŽ‡ã€é™ä½Žé£Žé™©ç­‰ç­‰ï¼Œå½“é‡åˆ°æ¡†æž¶åº“ä¸èƒ½æ»¡è¶³çŽ°æœ‰ä¸šåŠ¡ã€æ¡†æž¶åº“è®¾è®¡ç¼ºé™·æˆ–è€…æ¼æ´žã€APIä½¿ç”¨æ·±åº¦ä¸å¤Ÿæ—¶ï¼Œå¦‚æžœåœç•™åªä¼šä½¿ç”¨å±‚é¢ï¼Œå°±ä¼šå¢žåŠ ä¿®æ”¹è¿‡ç¨‹çš„éš¾åº¦ï¼Œæ‰€ä»¥å¯¹äºŽä½¿ç”¨çš„æ¡†æž¶åº“æœ€å¥½è¿˜æ˜¯æœ‰ä¸ªç³»ç»Ÿçš„è®¤è¯†ï¼› æœ¬æ–‡å¸¦å¤§å®¶æ·±å…¥è®²è§£ OkHttpï¼› 2.ç›®å½• 3.å®šä¹‰ ä¸€æ¬¾å¤„ç†ç½‘ç»œè¯·æ±‚çš„å¼€æºé¡¹ç›®ï¼Œç”±Squareå…¬å¸è´¡çŒ®ã€‚ 4.ä½œç”¨ é€šè¿‡å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰æ–¹å¼ï¼Œå®Œæˆå¤æ‚çš„ç½‘ç»œè¯·æ±‚ã€‚ 5.ç‰¹ç‚¹ 1.åŒæ—¶æ”¯æŒHTTP1.1ä¸Žæ”¯æŒHTTP2.0ï¼› 2.åŒæ—¶æ”¯æŒåŒæ­¥ä¸Žå¼‚æ­¥è¯·æ±‚ï¼› 3.åŒæ—¶å…·å¤‡HTTPä¸ŽWebSocketåŠŸèƒ½ï¼› 4.æ‹¥æœ‰è‡ªåŠ¨ç»´æŠ¤çš„socketè¿žæŽ¥æ± ï¼Œå‡å°‘æ¡æ‰‹æ¬¡æ•°ï¼› 5.æ‹¥æœ‰é˜Ÿåˆ—çº¿ç¨‹æ± ï¼Œè½»æ¾å†™å¹¶å‘ï¼› 6.æ‹¥æœ‰Interceptors(æ‹¦æˆªå™¨)ï¼Œè½»æ¾å¤„ç†è¯·æ±‚ä¸Žå“åº”é¢å¤–éœ€æ±‚(ä¾‹ï¼šè¯·æ±‚å¤±è´¥é‡è¯•ã€å“åº”å†…å®¹é‡å®šå‘ç­‰ç­‰)ï¼› 6.OkHttpç³»ç»Ÿå›¾ 7.OkHttpClient(å°è£…è¯·æ±‚å‚æ•°) OkHttpClienté€šè¿‡å»ºé€ è€…æ¨¡å¼æ–¹å¼ï¼Œå®Œæˆè¯·æ±‚å‚æ•°é…ç½®ã€‚å¸¸ç”¨å¦‚ä¸‹ï¼š connectTimeout ï¼šè¿žæŽ¥è¶…æ—¶ readTimeoutï¼šè¯»å–è¶…æ—¶ writeTimeoutï¼šå†™å…¥è¶…æ—¶ pingIntervalï¼šwebsocketæƒ…å†µä¸‹è¿žæŽ¥å¿ƒè·³é—´éš” interceptorsï¼šè‡ªå®šä¹‰æ‹¦æˆªå™¨ networkInterceptorsï¼šè‡ªå®šä¹‰ç½‘ç»œè¿žæŽ¥æˆåŠŸçš„æ‹¦æˆªå™¨ OkHttpClient é™¤äº†å®Œæˆè¯·æ±‚å‚æ•°çš„é…ç½®ä¹‹å¤–ï¼Œè¿˜æä¾›èŽ·å–WebSocketã€Call(Callå®žçŽ°ç±»ä¸ºRealCallï¼Œä¸‹æ–‡ä¼šä»‹ç»)ç›¸å…³ç±»ï¼› 7.1 WebSocket WebSocketæ˜¯ä¸€ç§åœ¨å•ä¸ªTCPè¿žæŽ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šä¿¡çš„åè®®ï¼Œæ”¯æŒæœåŠ¡å™¨æƒ³å®¢æˆ·ç«¯çš„å‘é€è¯·æ±‚ï¼Œç”±OkHttpClientåˆ›å»ºï¼Œæºç å¦‚ä¸‹ï¼š 12345678/** * Uses &#123;@code request&#125; to connect a new web socket. */@Override public WebSocket newWebSocket(Request request, WebSocketListener listener) &#123; RealWebSocket webSocket = new RealWebSocket(request, listener, new Random(), pingInterval);// 1 webSocket.connect(this); return webSocket;&#125; æ³¨é‡Š1ï¼šWebSocketæ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œå®ƒçš„å®žçŽ°ç±»RealWebSocketï¼Œè¯¥ç±»å®ŒæˆWebSocketçš„è¿žæŽ¥ã€æ•°æ®è¯·æ±‚ä¸ŽæŽ¥æ”¶åŠŸèƒ½ã€‚ 7.2 Callåˆå§‹åŒ–1234567891011//OkHttpClient åˆå§‹åŒ–Callçš„å‡½æ•°@Override public Call newCall(Request request) &#123; return RealCall.newRealCall(this, request, false /* for web socket */);&#125;// RealCall åˆå§‹åŒ–å‡½æ•°static RealCall newRealCall(OkHttpClient client, Request originalRequest, boolean forWebSocket) &#123; // Safely publish the Call instance to the EventListener. RealCall call = new RealCall(client, originalRequest, forWebSocket); call.eventListener = client.eventListenerFactory().create(call); return call;&#125; 8.RealCallåŒæ­¥å¼‚æ­¥ RealCall æ˜¯çœŸæ­£è§¦å‘ç½‘ç»œè¯·æ±‚çš„ç±»(å®žçŽ°CallæŽ¥å£ï¼Œä¸€æ¬¡è¯·æ±‚ = ä¸€ä¸ªRealCallå®žä¾‹)ï¼Œå®ƒæä¾›äº†åŒæ­¥è¯·æ±‚ã€å¼‚æ­¥è¯·æ±‚ï¼› 8.1 åŒæ­¥è¯·æ±‚12345678910111213141516171819202122232425262728293031323334353637 @Override public Response execute() throws IOException &#123; // å¤„ç†ä¸èƒ½é‡å¤è¯·æ±‚ï¼Œå› ä¸ºä¸€ä¸ªRealCallå¯¹åº”ä¸€ä¸ªè¯·æ±‚ã€‚ synchronized (this) &#123; if (executed) throw new IllegalStateException("Already Executed"); executed = true; &#125; captureCallStackTrace(); eventListener.callStart(this); try &#123; client.dispatcher().executed(this);//1 Response result = getResponseWithInterceptorChain();//2 if (result == null) throw new IOException("Canceled"); return result; &#125; catch (IOException e) &#123; eventListener.callFailed(this, e); throw e; &#125; finally &#123; client.dispatcher().finished(this); &#125; &#125;Response getResponseWithInterceptorChain() throws IOException &#123; // Build a full stack of interceptors. List&lt;Interceptor&gt; interceptors = new ArrayList&lt;&gt;(); interceptors.addAll(client.interceptors()); interceptors.add(retryAndFollowUpInterceptor); interceptors.add(new BridgeInterceptor(client.cookieJar())); interceptors.add(new CacheInterceptor(client.internalCache())); interceptors.add(new ConnectInterceptor(client)); if (!forWebSocket) &#123; interceptors.addAll(client.networkInterceptors()); &#125; interceptors.add(new CallServerInterceptor(forWebSocket)); Interceptor.Chain chain = new RealInterceptorChain(interceptors, null, null, null, 0, originalRequest, this, eventListener, client.connectTimeoutMillis(), client.readTimeoutMillis(), client.writeTimeoutMillis());//3 return chain.proceed(originalRequest);//4 &#125; æ³¨é‡Š1ï¼šå°†RealCallå®žä¾‹æ·»åŠ è‡³Dispatcherä¸­(ä¸‹æ–‡ä¼šä»‹ç»Dispatcher)ã€‚æ³¨é‡Š2ï¼šé€šè¿‡getResponseWithInterceptorChain()èŽ·å–å“åº”ã€‚æ³¨é‡Š3ï¼šé€šè¿‡å°è£…å¥½çš„æ‹¦æˆªå™¨é›†åˆï¼ŒèŽ·å–ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨çš„ä»»åŠ¡ã€‚æ³¨é‡Š4ï¼šè§¦å‘ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨çš„ä»»åŠ¡ï¼Œè¯¥ä»»åŠ¡å°±è§¦å‘ä¸€ä¸‹æ‹¦æˆªå™¨çš„ä»»åŠ¡ï¼Œä»¥æ­¤ç±»æŽ¨ï¼ŒåŽŸç†(Androidäº‹ä»¶ä¼ é€’æœºåˆ¶)å¦‚ä¸‹å›¾ï¼š 8.2 å¼‚æ­¥è¯·æ±‚123456789@Override public void enqueue(Callback responseCallback) &#123; synchronized (this) &#123; if (executed) throw new IllegalStateException("Already Executed"); executed = true; &#125; captureCallStackTrace(); eventListener.callStart(this); client.dispatcher().enqueue(new AsyncCall(responseCallback));//1&#125; æ³¨é‡Š1ï¼šæŠŠAsyncCallè¯·æ±‚å¯¹è±¡ä¼ é€’è¿›Dispatcherçº¿ç¨‹æ± ç®¡ç†ï¼› AsyncCall å°†è¯·æ±‚ä¸šåŠ¡æ”¾å…¥åˆ°Runnableä¸­ã€‚ 1234567891011121314151617181920212223242526final class AsyncCall extends NamedRunnable &#123; // ...... @Override protected void execute() &#123; boolean signalledCallback = false; try &#123; Response response = getResponseWithInterceptorChain();//2 if (retryAndFollowUpInterceptor.isCanceled()) &#123; signalledCallback = true; responseCallback.onFailure(RealCall.this, new IOException("Canceled")); &#125; else &#123; signalledCallback = true; responseCallback.onResponse(RealCall.this, response); &#125; &#125; catch (IOException e) &#123; if (signalledCallback) &#123; // Do not signal the callback twice! Platform.get().log(INFO, "Callback failure for " + toLoggableString(), e); &#125; else &#123; eventListener.callFailed(RealCall.this, e); responseCallback.onFailure(RealCall.this, e); &#125; &#125; finally &#123; client.dispatcher().finished(this); &#125; &#125;&#125; æ³¨é‡Š2ï¼šé€šè¿‡getResponseWithInterceptorChain()èŽ·å–å“åº”; 9.Dispatcherçº¿ç¨‹æ±  Dispatcher ç®¡ç†ç½‘ç»œè¯·æ±‚çš„çº¿ç¨‹æ± ï¼Œå…¶å®žå°±æ˜¯æŠŠåŒæ­¥(RealCall)ä¸Žå¼‚æ­¥(AsyncCall)çš„è¯·æ±‚æ”¾è¿›é›†åˆä¸­ç»Ÿä¸€ç®¡ç†ï¼Œç„¶åŽé€šè¿‡çº¿ç¨‹æ± æ‰§è¡ŒAsyncCallçš„è¯·æ±‚ã€‚ 9.1 Dispatcherä¸­åŒæ­¥(RealCall) RealCallåœ¨Dispatcherä¸­ï¼Œå…¶å®žä¸»è¦å°±æ˜¯ä¸€ä¸ªå­˜å‚¨åŠŸèƒ½(å³ç”¨ä¸€ä¸ªé›†åˆæŠŠRealCallçš„è¯·æ±‚è¿›è¡Œå­˜å‚¨)ã€‚ 9.2 Dispatcherä¸­å¼‚æ­¥(AsyncCall) AsyncCallåœ¨Dispatcherä¸­ï¼Œé™¤äº†ä½¿ç”¨é›†åˆå­˜å‚¨AsyncCallçš„è¯·æ±‚ï¼ŒDispatcherè¿˜åˆå§‹åŒ–äº†ä¸€ä¸ªçº¿ç¨‹æ± (ThreadPoolExecutor)å¤„ç†AsyncCallçš„ç½‘ç»œè¯·æ±‚ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public final class Dispatcher &#123; //æœ€å¤§è¯·æ±‚æ•°é‡ private int maxRequests = 64; //ç›¸åŒhostçš„æœ€å¤§è¯·æ±‚æ•°æ® private int maxRequestsPerHost = 5; // ...... public synchronized ExecutorService executorService() &#123; if (executorService == null) &#123; executorService = new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;(), Util.threadFactory("OkHttp Dispatcher", false));//1 &#125; return executorService; &#125; // ...... synchronized void enqueue(AsyncCall call) &#123; if (runningAsyncCalls.size() &lt; maxRequests &amp;&amp; runningCallsForHost(call) &lt; maxRequestsPerHost) &#123;//2 runningAsyncCalls.add(call);//3 executorService().execute(call);//4 &#125; else &#123; readyAsyncCalls.add(call);//5 &#125; &#125; /** Used by &#123;@code AsyncCall#run&#125; to signal completion. */ void finished(AsyncCall call) &#123; finished(runningAsyncCalls, call, true); &#125; /** Used by &#123;@code Call#execute&#125; to signal completion. */ void finished(RealCall call) &#123; finished(runningSyncCalls, call, false);//6 &#125; private &lt;T&gt; void finished(Deque&lt;T&gt; calls, T call, boolean promoteCalls) &#123; int runningCallsCount; Runnable idleCallback; synchronized (this) &#123; if (!calls.remove(call)) throw new AssertionError("Call wasn't in-flight!"); if (promoteCalls) promoteCalls();//7 runningCallsCount = runningCallsCount(); idleCallback = this.idleCallback; &#125; if (runningCallsCount == 0 &amp;&amp; idleCallback != null) &#123; idleCallback.run(); &#125; &#125; private void promoteCalls() &#123; if (runningAsyncCalls.size() &gt;= maxRequests) return; // Already running max capacity. if (readyAsyncCalls.isEmpty()) return; // No ready calls to promote. for (Iterator&lt;AsyncCall&gt; i = readyAsyncCalls.iterator(); i.hasNext(); ) &#123; AsyncCall call = i.next(); if (runningCallsForHost(call) &lt; maxRequestsPerHost) &#123; i.remove(); runningAsyncCalls.add(call); executorService().execute(call); &#125; if (runningAsyncCalls.size() &gt;= maxRequests) return; // Reached max capacity. &#125; &#125; // ......&#125; æ³¨é‡Š1ï¼šèŽ·å–è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼›æ³¨é‡Š2ï¼šåˆ¤æ–­æ­£åœ¨æ‰§è¡Œçš„å¼‚æ­¥è¯·æ±‚æ•°é‡ä¸Žè¯·æ±‚é›†åˆä¸­ç›¸åŒhostçš„æ•°é‡æ˜¯å¦æ»¡è¶³ï¼Œå¦‚æžœæ»¡è¶³å°±æ·»åŠ åˆ°æ‰§è¡Œä¸­çš„é›†åˆä¸­ï¼Œå¹¶æ·»åŠ è‡³çº¿ç¨‹æ± ä¸­æ‰§è¡Œè¯·æ±‚ï¼›å¦‚æžœä¸æ»¡è¶³å°±æ·»åŠ è‡³å¾…æ‰§è¡Œè¯·æ±‚çš„é›†åˆä¸­ï¼Œç­‰å¾…æ‰§è¡Œä¸­çš„è¯·æ±‚å®Œæˆä¹‹åŽï¼Œå†æ‰§è¡Œç›¸åŒhostæ•°é‡åˆ¤æ–­æ»¡è¶³æ‰æ·»åŠ è‡³çº¿ç¨‹æ± ä¸­æ‰§è¡Œè¯·æ±‚ï¼›æ³¨é‡Š3ï¼šå°†è¯·æ±‚å¯¹è±¡AsyncCallæ·»åŠ è¿›è¯·æ±‚æ‰§è¡Œçš„é›†åˆä¸­ï¼›æ³¨é‡Š4ï¼šå°†è¯·æ±‚å¯¹è±¡AsyncCallæ·»åŠ è¿›çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼›æ³¨é‡Š5ï¼šå½“ä¸æ»¡è¶³æ‰§è¡Œæ¡ä»¶æ—¶(æ³¨é‡Š2)ï¼ŒæŠŠè¯·æ±‚å¯¹è±¡æ·»åŠ è‡³å¾…æ‰§è¡Œçš„é›†åˆä¸­ï¼›æ³¨é‡Š6ï¼šæ¯å½“ä¸€ä¸ªè¯·æ±‚æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå°±ä¼šè°ƒç”¨finished()åŽ»æŽ‰å¯¹åº”é›†åˆä¸­çš„å­˜å‚¨å¯¹è±¡ï¼Œå¹¶åœ¨æ¬¡åˆ¤æ–­å¾…æ‰§è¡Œçš„é›†åˆä¸­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„è¯·æ±‚ï¼Œè‹¥æ»¡è¶³å°±æ·»åŠ è‡³æ‰§è¡Œçš„é›†åˆä¸Žçº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œè‹¥ä¸æ»¡è¶³ç»§ç»­ç­‰å¾…ä¸‹ä¸€ä¸ªè¯·æ±‚å®Œæˆå†æ¬¡åˆ¤æ–­ã€‚æ³¨é‡Š7ï¼šåˆ¤æ–­å¾…æ‰§è¡Œçš„é›†åˆä¸­æ˜¯å¦æ»¡è¶³å¯æ‰§è¡Œçš„å¯¹è±¡ã€‚ 10.Interceptoræ‹¦æˆªå™¨åŠè°ƒç”¨é“¾ Interceptor æ‹¦æˆªå™¨ï¼Œä¾›ä½¿ç”¨è€…å¯åœ¨è¯·æ±‚è¿‡ç¨‹æˆ–è€…å“åº”è¿‡ç¨‹ä¸­è‡ªå®šä¹‰é¢å¤–çš„ä¸šåŠ¡å¤„ç†(ä¾‹å¦‚ï¼šæœ€å¸¸è§çš„è¯·æ±‚å¤±è´¥é‡è¯•ã€å“åº”æ•°æ®çš„é‡å®šå‘ç­‰ç­‰)ã€‚ OkHttp3ä¸­ï¼Œé™¤äº†å¯è‡ªå®šä¹‰é¢å¤–çš„æ‹¦æˆªå™¨ä¹‹å¤–ï¼Œå®ƒå†…éƒ¨ä¹Ÿå­˜å‚¨ä¸€äº›å›ºå®šçš„æ‹¦æˆªå™¨å¤„ç†å…¶å†…éƒ¨ä¸šåŠ¡é€»è¾‘ï¼Œä¸‹é¢å°±ä¼šä»‹ç»å®ƒä»¬(RetryAndFollowUpInterceptorã€BridgeInterceptorã€CacheInterceptorã€ConnectInterceptorã€CallServerInterceptor)ï¼› 10.1 RetryAndFollowUpInterceptor å®šä¹‰ï¼šé‡å®šå‘æ‹¦æˆªå™¨ï¼› ä½œç”¨ï¼šåœ¨æ— æ³•è¯·æ±‚æœåŠ¡å™¨æˆ–è€…è¯·æ±‚å¤±è´¥æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå‘Šè¯‰å®¢æˆ·ç«¯å¯ä»¥å¤„ç†è¯·æ±‚çš„urlï¼Œç„¶åŽé‡å®šå‘æ‹¦æˆªå™¨æ‰¿å½“é‡æ–°è¯·æ±‚æ–°urlçš„ä½œç”¨(æœåŠ¡å™¨è¿”å›ž3XXé”™è¯¯ç ä¸ºé‡å®šå‘ï¼Œå¯ä»¥é€šè¿‡å“åº”å¤´çš„LocationèŽ·å–æ–°è¯·æ±‚çš„url); 10.2 BridgeInterceptor å®šä¹‰ï¼šæ¡¥æ‹¦æˆªå™¨ï¼› ä½œç”¨ï¼šå°è£…è¯·æ±‚å¤´(Content-Typeã€Connectionã€Cookieâ€¦)ä¸Žå“åº”å¤´(â€œContent-Encodingâ€¦)çš„ä¿¡æ¯ã€‚ 10.3 CacheInterceptor å®šä¹‰ï¼šç¼“å­˜æ‹¦æˆªå™¨ï¼› ä½œç”¨ï¼šä¸ºç½‘ç»œè¯·æ±‚æä¾›ç¼“å­˜åŠŸèƒ½ï¼ŒåŠ å¿«ç›¸åŒè¯·æ±‚çš„è®¿é—®é€Ÿåº¦ï¼Œå‡å°‘èµ„æºæŸè€—ã€‚ 10.4 ConnectInterceptor å®šä¹‰ï¼šè¿žæŽ¥æ‹¦æˆªå™¨ï¼› ä½œç”¨ï¼šä¸ŽæœåŠ¡å™¨å»ºç«‹é€šè®¯è¿žæŽ¥ã€‚ 10.5 CallServerInterceptor å®šä¹‰ï¼šè¯·æ±‚æœåŠ¡å™¨æ‹¦æˆªå™¨ï¼› ä½œç”¨ï¼šä¸ŽæœåŠ¡å™¨è¿›è¡Œæ•°æ®é€šè®¯(åŒ…å«è¯·æ±‚å¤´ã€è¯·æ±‚å†…å®¹)ã€‚ 10.6 è°ƒç”¨é“¾ ä¸Šæ–‡ä¹Ÿæåˆ°ä»»åŠ¡é“¾ç»“æž„å›¾(è´£ä»»é“¾æ¨¡å¼)ï¼š å…¶å®žå®ƒçš„åŽŸç†ç±»ä¼¼äºŽ(Android äº‹ä»¶ä¼ é€’æœºåˆ¶)ï¼Œå‘ä¸‹ä¼ é€’è¯·æ±‚ï¼Œå‘ä¸Šåé¦ˆå“åº”ï¼Œåœ¨è°ƒç”¨RealInterceptorChainçš„proceed()æ—¶ï¼Œåˆ›å»ºä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨çš„ä»»åŠ¡ï¼Œå¹¶é€šè¿‡æ‹¦æˆªå™¨ä¸­intercept()æŠŠä»»åŠ¡ä¼ é€’è‡³å½“å‰æ‹¦æˆªå™¨è¿›è¡Œå…³è”ï¼Œç„¶åŽä»¥æ­¤ç±»æŽ¨ï¼Œç›¸å…³ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516public final class RealInterceptorChain implements Interceptor.Chain &#123; public Response proceed(Request request, StreamAllocation streamAllocation, HttpCodec httpCodec, RealConnection connection) throws IOException &#123; // ...... // åˆ›å»ºä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨çš„ä»»åŠ¡ RealInterceptorChain next = new RealInterceptorChain(interceptors, streamAllocation, httpCodec, connection, index + 1, request, call, eventListener, connectTimeout, readTimeout, writeTimeout); // èŽ·å–å½“å‰ä»»åŠ¡ä¸­çš„æ‹¦æˆªå™¨ Interceptor interceptor = interceptors.get(index); // å°†ä¸‹ä¸€ä¸ªä»»åŠ¡ä¼ é€’è‡³å½“å‰æ‹¦æˆªå™¨ä¸­è¿›è¡Œå…³è”ï¼Œå¹¶åœ¨æ‹¦æˆªå™¨ä¸­ä¼ å…¥çš„ä»»åŠ¡è§¦å‘æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ Response response = interceptor.intercept(next); // ...... return response; &#125;&#125; 11.ç¼“å­˜æœºåˆ¶CacheInterceptor çœ‹çœ‹ç¼“å­˜æœºåˆ¶CacheInterceptorçš„å®žçŽ°åŽŸç†ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889public final class CacheInterceptor implements Interceptor &#123; // .... @Override public Response intercept(Chain chain) throws IOException &#123; // æ ¹æ®è¯·æ±‚å†…å®¹é€šè¿‡Cacheç±»åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨å“åº”çš„ç¼“å­˜ä¿¡æ¯ Response cacheCandidate = cache != null ? cache.get(chain.request()) : null; long now = System.currentTimeMillis(); // é€šè¿‡è¯·æ±‚å¯¹è±¡ä¸Žç¼“å­˜å¯¹è±¡èŽ·å–ç¼“å­˜ç­–ç•¥ï¼Œæ ¹æ®è¯·æ±‚å¤´çš„å†…å®¹(Dateã€Expiresã€Last-Modified....)åˆ¶å®šç¼“å­˜ç­–ç•¥ CacheStrategy strategy = new CacheStrategy.Factory(now, chain.request(), cacheCandidate).get(); Request networkRequest = strategy.networkRequest; Response cacheResponse = strategy.cacheResponse; // è®°å½•è¯·æ±‚è¿‡ç¨‹çš„ç›¸å…³æ•°æ®ï¼ˆè¯·æ±‚æ¬¡æ•°ã€ç¼“å­˜æ¬¡æ•°....ï¼‰ if (cache != null) &#123; cache.trackResponse(strategy); &#125; if (cacheCandidate != null &amp;&amp; cacheResponse == null) &#123; closeQuietly(cacheCandidate.body()); // The cache candidate wasn't applicable. Close it. &#125; // å½“è¯·æ±‚å¤´ä¸­åŒ…å«only-if-cachedæ—¶ï¼ŒnetworkRequest ä¸Ž cacheResponse éƒ½ä¸ºç©ºï¼Œè¡¨ç¤ºä¸è¿›è¡Œç½‘ç»œè¯·æ±‚ if (networkRequest == null &amp;&amp; cacheResponse == null) &#123; return new Response.Builder() .request(chain.request()) .protocol(Protocol.HTTP_1_1) .code(504) .message("Unsatisfiable Request (only-if-cached)") .body(Util.EMPTY_RESPONSE) .sentRequestAtMillis(-1L) .receivedResponseAtMillis(System.currentTimeMillis()) .build(); &#125; // ä¸è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œå¹¶è¯·æ±‚å¤´åŒ…å«ç¼“å­˜æ ‡è¯†æ—¶ï¼Œæž„å»ºç¼“å­˜å†…å®¹. if (networkRequest == null) &#123; return cacheResponse.newBuilder() .cacheResponse(stripBody(cacheResponse)) .build(); &#125; Response networkResponse = null; try &#123; // æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ä»»åŠ¡ networkResponse = chain.proceed(networkRequest); &#125; finally &#123; // If we're crashing on I/O or otherwise, don't leak the cache body. if (networkResponse == null &amp;&amp; cacheCandidate != null) &#123; closeQuietly(cacheCandidate.body()); &#125; &#125; // å¦‚æžœæœ¬åœ°æœ‰ç¼“å­˜ï¼Œå¹¶ä¸”å“åº”ç»“æžœä¸ºæ²¡æœ‰ä¿®æ”¹æ—¶ï¼Œç›´æŽ¥ä»Žæœ¬åœ°ç¼“å­˜èŽ·å–ç›¸å…³ä¿¡æ¯æ•°æ® if (cacheResponse != null) &#123; if (networkResponse.code() == HTTP_NOT_MODIFIED) &#123; Response response = cacheResponse.newBuilder() .headers(combine(cacheResponse.headers(), networkResponse.headers())) .sentRequestAtMillis(networkResponse.sentRequestAtMillis()) .receivedResponseAtMillis(networkResponse.receivedResponseAtMillis()) .cacheResponse(stripBody(cacheResponse)) .networkResponse(stripBody(networkResponse)) .build(); networkResponse.body().close(); // æ›´æ–°å“åº”å¯¹è±¡è‡³ç¼“å­˜ä¸­ cache.trackConditionalCacheHit(); cache.update(cacheResponse, response); return response; &#125; else &#123; closeQuietly(cacheResponse.body()); &#125; &#125; // æ²¡æœ‰å“åº”ç¼“å­˜æ—¶ï¼Œå°è£…è¯·æ±‚è¿”å›žçš„å“åº”å¹¶æ·»åŠ è‡³æœ¬åœ°ç¼“å­˜ä¸­ Response response = networkResponse.newBuilder() .cacheResponse(stripBody(cacheResponse)) .networkResponse(stripBody(networkResponse)) .build(); if (cache != null) &#123; if (HttpHeaders.hasBody(response) &amp;&amp; CacheStrategy.isCacheable(response, networkRequest)) &#123; // æ·»åŠ æœ¬åœ°ç¼“å­˜ä¸­ CacheRequest cacheRequest = cache.put(response); return cacheWritingResponse(cacheRequest, response); &#125; // åŽ»æŽ‰ï¼ˆPOST\PUT\DELETE\MOVE\PATCHï¼‰è¯·æ±‚æ–¹æ³•çš„æœ¬åœ°ç¼“å­˜ if (HttpMethod.invalidatesCache(networkRequest.method())) &#123; try &#123; cache.remove(networkRequest); &#125; catch (IOException ignored) &#123; // The cache cannot be written. &#125; &#125; &#125; return response; &#125;&#125; 12.è¿žæŽ¥ä¸Žè¯·æ±‚ï¼ˆStreamAllocationï¼ŒRealConnectionï¼ŒHttpCodecï¼‰ OkHttp3æŠŠç½‘ç»œè¿žæŽ¥ã€è¯·æ±‚æ•°æ®é€šè®¯è¿‡ç¨‹å°è£…StreamAllocationï¼ŒRealConnectionï¼ŒHttpCodecä¸­ï¼› StreamAllocationï¼šè´Ÿè´£åˆå§‹åŒ–RealConnectionã€HttpCodecï¼Œå¹¶å°†å‰2è€…ä¸ŽRealCallè¿›è¡Œå…³è”ï¼›1.StreamAllocationåˆå§‹åŒ–(åœ¨RetryAndFollowUpInterceptorè¿›è¡Œå®žä¾‹åŒ–) 12345678910public final class RetryAndFollowUpInterceptor implements Interceptor &#123; @Override public Response intercept(Chain chain) throws IOException &#123; //...... // å®žä¾‹åŒ– StreamAllocation streamAllocation = new StreamAllocation(client.connectionPool(), createAddress(request.url()), call, eventListener, callStackTrace); this.streamAllocation = streamAllocation; //...... &#125;&#125; 2.RealConnectionä¸ŽHttpCodecåˆå§‹åŒ–(RealConnectionåœ¨ConnectInterceptorä¸­é€šè¿‡StreamAllocationçš„newStream()åˆå§‹åŒ–ï¼Œè€ŒHttpCodecåœ¨RealConnectionä¸­è¢«åˆå§‹åŒ–) 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950public final class ConnectInterceptor implements Interceptor &#123; @Override public Response intercept(Chain chain) throws IOException &#123; RealInterceptorChain realChain = (RealInterceptorChain) chain; Request request = realChain.request(); StreamAllocation streamAllocation = realChain.streamAllocation(); boolean doExtensiveHealthChecks = !request.method().equals("GET"); // èŽ·å–HttpCodec å¯¹è±¡ HttpCodec httpCodec = streamAllocation.newStream(client, chain, doExtensiveHealthChecks); RealConnection connection = streamAllocation.connection(); return realChain.proceed(request, streamAllocation, httpCodec, connection); &#125;&#125;public final class StreamAllocation &#123; //...... public HttpCodec newStream( OkHttpClient client, Interceptor.Chain chain, boolean doExtensiveHealthChecks) &#123; int connectTimeout = chain.connectTimeoutMillis(); int readTimeout = chain.readTimeoutMillis(); int writeTimeout = chain.writeTimeoutMillis(); int pingIntervalMillis = client.pingIntervalMillis(); boolean connectionRetryEnabled = client.retryOnConnectionFailure(); try &#123; // åˆå§‹åŒ–RealConnectionï¼Œæœ€åŽä¼šè°ƒç”¨RealConnectionçš„connectå‡½æ•°å»ºç«‹ç½‘ç»œè¿žæŽ¥ RealConnection resultConnection = findHealthyConnection(connectTimeout, readTimeout, writeTimeout, pingIntervalMillis, connectionRetryEnabled, doExtensiveHealthChecks); // é€šè¿‡RealConnection å®žä¾‹åŒ–HttpCpdec HttpCodec resultCodec = resultConnection.newCodec(client, chain, this); synchronized (connectionPool) &#123; codec = resultCodec; return resultCodec; &#125; &#125; catch (IOException e) &#123; throw new RouteException(e); &#125; &#125;&#125;public final class RealConnection extends Http2Connection.Listener implements Connection &#123; public HttpCodec newCodec(OkHttpClient client, Interceptor.Chain chain, StreamAllocation streamAllocation) throws SocketException &#123; //åˆ¤æ–­HTTPæ˜¯å¦ä¸ºHttp2ï¼Œå¦‚æžœæ˜¯å®žä¾‹åŒ–Http2Codecï¼Œå¦åˆ™å®žä¾‹åŒ–Http1Codec if (http2Connection != null) &#123; return new Http2Codec(client, chain, streamAllocation, http2Connection); &#125; else &#123; socket.setSoTimeout(chain.readTimeoutMillis()); source.timeout().timeout(chain.readTimeoutMillis(), MILLISECONDS); sink.timeout().timeout(chain.writeTimeoutMillis(), MILLISECONDS); return new Http1Codec(client, streamAllocation, source, sink); &#125; &#125;&#125; RealConnectionï¼šçœŸæ­£çš„è´Ÿè´£å®Œæˆç½‘ç»œè¿žæŽ¥ï¼› 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172public final class RealConnection extends Http2Connection.Listener implements Connection &#123;public void connect(int connectTimeout, int readTimeout, int writeTimeout, int pingIntervalMillis, boolean connectionRetryEnabled, Call call, EventListener eventListener) &#123; if (protocol != null) throw new IllegalStateException("already connected"); RouteException routeException = null; List&lt;ConnectionSpec&gt; connectionSpecs = route.address().connectionSpecs(); ConnectionSpecSelector connectionSpecSelector = new ConnectionSpecSelector(connectionSpecs); if (route.address().sslSocketFactory() == null) &#123; if (!connectionSpecs.contains(ConnectionSpec.CLEARTEXT)) &#123; throw new RouteException(new UnknownServiceException( "CLEARTEXT communication not enabled for client")); &#125; String host = route.address().url().host(); if (!Platform.get().isCleartextTrafficPermitted(host)) &#123; throw new RouteException(new UnknownServiceException( "CLEARTEXT communication to " + host + " not permitted by network security policy")); &#125; &#125; else &#123; if (route.address().protocols().contains(Protocol.H2_PRIOR_KNOWLEDGE)) &#123; throw new RouteException(new UnknownServiceException( "H2_PRIOR_KNOWLEDGE cannot be used with HTTPS")); &#125; &#125; while (true) &#123; try &#123; if (route.requiresTunnel()) &#123; connectTunnel(connectTimeout, readTimeout, writeTimeout, call, eventListener); if (rawSocket == null) &#123; // We were unable to connect the tunnel but properly closed down our resources. break; &#125; &#125; else &#123; // æœ€åŽä¼šè°ƒç”¨socket.connect()è¿›è¡Œç½‘ç»œè¿žæŽ¥ connectSocket(connectTimeout, readTimeout, call, eventListener); &#125; establishProtocol(connectionSpecSelector, pingIntervalMillis, call, eventListener); eventListener.connectEnd(call, route.socketAddress(), route.proxy(), protocol); break; &#125; catch (IOException e) &#123; closeQuietly(socket); closeQuietly(rawSocket); socket = null; rawSocket = null; source = null; sink = null; handshake = null; protocol = null; http2Connection = null; eventListener.connectFailed(call, route.socketAddress(), route.proxy(), null, e); if (routeException == null) &#123; routeException = new RouteException(e); &#125; else &#123; routeException.addConnectException(e); &#125; if (!connectionRetryEnabled || !connectionSpecSelector.connectionFailed(e)) &#123; throw routeException; &#125; &#125; &#125; if (route.requiresTunnel() &amp;&amp; rawSocket == null) &#123; ProtocolException exception = new ProtocolException("Too many tunnel connections attempted: " + MAX_TUNNEL_ATTEMPTS); throw new RouteException(exception); &#125; if (http2Connection != null) &#123; synchronized (connectionPool) &#123; allocationLimit = http2Connection.maxConcurrentStreams(); &#125; &#125; &#125;&#125; HttpCodecï¼š è´Ÿè´£å®Œæˆå‘é€è¯·æ±‚å¤´ä¸Žæ•°æ®å†…å®¹(ä½¿ç”¨okioå®Œæˆæ•°æ®çš„å†™å…¥ä¸Žè¯»å‡º)ï¼› Http1Codecï¼šå¤„ç†HTTP1.1åè®®çš„æ•°æ®ä¼ é€’ã€‚ Http2Codecï¼šå¤„ç†HTTP2.0åè®®çš„æ•°æ®ä¼ é€’ã€‚ 13.å®žä¾‹ ç¼–å†™ä¸€ä¸ªç®€å•GETè¯·æ±‚ï¼š 12345678910111213141516171819public void get()&#123; OkHttpClient okHttpClient = new OkHttpClient() .newBuilder()// .addInterceptor() .readTimeout(30, TimeUnit.SECONDS) .build(); Request request = new Request.Builder()// .header() .url("http://www.baidu.com") .build(); okHttpClient.newCall(request).enqueue(new Callback() &#123; @Override public void onFailure(Call call, IOException e) &#123; &#125; @Override public void onResponse(Call call, Response response) throws IOException &#123; &#125; &#125;);&#125; 14.æ€»ç»“ åˆ°æ­¤ï¼ŒAndroid OkHttp3å°±è®²è§£å®Œæ¯•ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>å¼€æºåº“</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å¼€æºåº“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OkHttp3æºç åˆ†æžä¸€]]></title>
    <url>%2Fposts%2F1eadb261.html</url>
    <content type="text"><![CDATA[ä¸€ã€OkHttp3æµç¨‹å›¾ äºŒã€æºç æ•´ä½“æž¶æž„ ä¸Šå›¾æ˜¯OkHttp3çš„æ•´ä½“æ¡†æž¶ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ å±‚ï¼š Interfaceâ€”â€”æŽ¥å£å±‚ï¼šæŽ¥æ”¶ç”¨æˆ·çš„ç½‘ç»œè®¿é—®è¯·æ±‚ï¼ˆåŒæ­¥è¯·æ±‚/å¼‚æ­¥è¯·æ±‚ï¼‰ï¼Œå‘èµ·å®žé™…çš„ç½‘ç»œè®¿é—® Protocolâ€”â€”åè®®å±‚ï¼šå¤„ç†åè®®é€»è¾‘ Connectionâ€”â€”è¿žæŽ¥å±‚ï¼šç®¡ç†ç½‘ç»œè¿žæŽ¥ï¼Œå‘é€æ–°çš„è¯·æ±‚ï¼ŒæŽ¥æ”¶æœåŠ¡å™¨è®¿é—® Cacheâ€”â€”ç¼“å­˜å±‚ï¼šç®¡ç†æœ¬åœ°ç¼“å­˜ I/Oâ€”â€”I/Oå±‚ï¼šå®žé™…æ•°æ®è¯»å†™å®žçŽ° Inteceptorâ€”â€”æ‹¦æˆªå™¨å±‚ï¼šæ‹¦æˆªç½‘ç»œè®¿é—®ï¼Œæ’å…¥æ‹¦æˆªé€»è¾‘ 2.1 Interfaceâ€”â€”æŽ¥å£å±‚æŽ¥å£å±‚æŽ¥æ”¶ç”¨æˆ·çš„ç½‘ç»œè®¿é—®è¯·æ±‚ï¼ˆåŒæ­¥è¯·æ±‚/å¼‚æ­¥è¯·æ±‚ï¼‰ï¼Œå‘èµ·å®žé™…çš„ç½‘ç»œè®¿é—® OkHttpClientï¼šæ˜¯OkHttpæ¡†æž¶çš„å®¢æˆ·ç«¯ï¼Œæ›´ç¡®åˆ‡çš„è¯´æ˜¯ä¸€ä¸ªç”¨æˆ·é¢æ¿ã€‚ç”¨æˆ·ä½¿ç”¨OkHttpè¿›è¡Œå„ç§è®¾ç½®ï¼Œå‘èµ·å„ç§ç½‘ç»œè¯·æ±‚éƒ½æ˜¯é€šè¿‡OkHttpClientå®Œæˆçš„ã€‚æ¯ä¸ªOkHttpClientå†…éƒ¨éƒ½ç»´æŠ¤äº†å±žäºŽè‡ªå·±çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿žæŽ¥æ± ï¼ŒCacheï¼Œæ‹¦æˆªå™¨ç­‰ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨OkHttpä½œä¸ºç½‘ç»œæ¡†æž¶æ—¶åº”è¯¥å…¨å±€å…±äº«ä¸€ä¸ªOkHttpClientå®žä¾‹ã€‚ Callï¼šCallæ˜¯æè¿°ä¸€ä¸ªå®žé™…çš„è®¿é—®è¯·æ±‚ï¼Œç”¨æˆ·çš„æ¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚éƒ½æ˜¯ä¸€ä¸ªCallå®žä¾‹ã€‚Callæœ¬èº«åªæ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œå®šä¹‰äº†Callçš„æŽ¥å£æ–¹æ³•ï¼Œå®žé™…æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒOkHttpä¼šä¸ºæ¯ä¸€ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªRealCall,æ¯ä¸€ä¸ªRealCallå†…éƒ¨æœ‰ä¸€ä¸ªAsyncCallï¼ŒAsyncCallæ˜¯RealCallçš„ä¸€ä¸ªå†…éƒ¨ç±»å¹¶ä¸”ç»§æ‰¿NamedRunnableï¼Œé‚£ä¹ˆé¦–å…ˆçœ‹NamedRunnableç±»æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œå¦‚ä¸‹ï¼š 1234567891011121314public abstract class NamedRunnable implements Runnable &#123; ...... @Override public final void run() &#123; ...... try &#123; execute(); &#125; ...... &#125; protected abstract void execute();&#125; NamedRunnableå®žçŽ°äº†RunnableæŽ¥å£å¹¶ä¸”æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•execute()ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨run()ä¸­è¢«è°ƒç”¨ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€NamedRunnableæ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸”å…¶å­ç±»åº”è¯¥å®žçŽ°executeæ–¹æ³•ã€‚ä¸‹é¢å†çœ‹AsyncCallçš„å®žçŽ°ï¼š 1234567891011121314151617181920212223242526272829final class AsyncCall extends NamedRunnable &#123; private final Callback responseCallback; AsyncCall(Callback responseCallback) &#123; super("OkHttp %s", redactedUrl()); this.responseCallback = responseCallback; &#125; ......final class RealCall implements Call &#123; @Override protected void execute() &#123; boolean signalledCallback = false; try &#123; Response response = getResponseWithInterceptorChain(); if (retryAndFollowUpInterceptor.isCanceled()) &#123; signalledCallback = true; responseCallback.onFailure(RealCall.this, new IOException("Canceled")); &#125; else &#123; signalledCallback = true; responseCallback.onResponse(RealCall.this, response); &#125; &#125; catch (IOException e) &#123; ...... responseCallback.onFailure(RealCall.this, e);&#125; finally &#123; client.dispatcher().finished(this); &#125;&#125; AsyncCallç»§æ‰¿NamedRunnableï¼Œå®žçŽ°äº†æŠ½è±¡æ–¹æ³•executeï¼ˆï¼‰ï¼Œæ‰€ä»¥æ¯ä¸€ä¸ªCallå°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè€Œæ‰§è¡ŒCallçš„è¿‡ç¨‹å°±æ˜¯æ‰§è¡Œå…¶executeï¼ˆï¼‰æ–¹æ³•çš„è¿‡ç¨‹ã€‚ Dispatcher(è°ƒåº¦å™¨)æ˜¯OkHttpçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œå…¶å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå½“æœ‰æŽ¥æ”¶åˆ°ä¸€ä¸ªCallæ—¶ï¼ŒDispatcherè´Ÿè´£åœ¨çº¿ç¨‹æ± ä¸­æ‰¾åˆ°ç©ºé—²çš„çº¿ç¨‹å¹¶æ‰§è¡Œå…¶executeæ–¹æ³•ã€‚ é’ˆå¯¹å¼‚æ­¥è¯·æ±‚ï¼ŒDispatcherä½¿ç”¨äº†ä¸¤ä¸ªDequeï¼Œä¸€ä¸ªä¿å­˜å‡†å¤‡æ‰§è¡Œçš„è¯·æ±‚ï¼Œä¸€ä¸ªä¿å­˜æ­£åœ¨æ‰§è¡Œçš„è¯·æ±‚ï¼Œä¸ºä»€ä¹ˆè¦ç”¨ä¸¤ä¸ªå‘¢ï¼Ÿå› ä¸ºDispatcheré»˜è®¤æ”¯æŒæœ€å¤§çš„å¹¶å‘è¯·æ±‚æ˜¯64ä¸ªï¼Œå•ä¸ªHostæœ€å¤šæ‰§è¡Œ5ä¸ªå¹¶å‘è¯·æ±‚ï¼Œå¦‚æžœè¶…è¿‡ï¼Œåˆ™Callä¼šå…ˆè¢«æ”¾å…¥åˆ°readyAsyncCallä¸­ï¼Œå½“å‡ºçŽ°ç©ºé—²çš„çº¿ç¨‹æ—¶ï¼Œå†å°†readyAsyncCallä¸­çš„çº¿ç¨‹ç§»å…¥åˆ°runningAsynCallsä¸­ï¼Œæ‰§è¡Œè¯·æ±‚ã€‚ å¦‚æžœæ­£åœ¨æ‰§è¡Œçš„è¯·æ±‚æ€»æ•°&lt;=64 &amp;&amp; å•ä¸ªHostæ­£åœ¨æ‰§è¡Œçš„è¯·æ±‚&lt;=5ï¼Œåˆ™å°†è¯·æ±‚åŠ å…¥åˆ°runningAsyncCallsé›†åˆä¸­ï¼Œç´§æŽ¥ç€å°±æ˜¯åˆ©ç”¨çº¿ç¨‹æ± æ‰§è¡Œè¯¥è¯·æ±‚ï¼Œå¦åˆ™å°±å°†è¯¥è¯·æ±‚æ”¾å…¥readyAsyncCallsé›†åˆä¸­ã€‚ 2.2 Protocolâ€”â€”åè®®å±‚Protocolå±‚è´Ÿè´£å¤„ç†åè®®é€»è¾‘ï¼ŒOkHttpæ”¯æŒHttp1/Http2/WebSocketåè®®ï¼Œå¹¶åœ¨3.7ç‰ˆæœ¬ä¸­æ”¾å¼ƒäº†å¯¹Spdyåè®®ï¼Œé¼“åŠ±å¼€å‘è€…ä½¿ç”¨Http/2ã€‚åœ¨æ—©æœŸçš„ç‰ˆæœ¬ä¸­ï¼ŒOkHttpæ”¯æŒHttp1.0,1.1,SPDYåè®®ï¼Œä½†æ˜¯Http2åè®®çš„é—®ä¸–ï¼Œå¯¼è‡´OkHttpä¹Ÿåšå‡ºäº†æ”¹å˜ï¼ŒOkHttpé¼“åŠ±å¼€å‘è€…ä½¿ç”¨HTTP2ï¼Œä¸å†å¯¹SPDYåè®®ç»™äºˆæ”¯æŒã€‚å¦å¤–ï¼Œæ–°ç‰ˆæœ¬çš„OkHttpè¿˜æœ‰ä¸€ä¸ªæ–°çš„äº®ç‚¹å°±æ˜¯æ”¯æŒWebScoketï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥éžå¸¸æ–¹ä¾¿çš„å»ºç«‹é•¿è¿žæŽ¥äº†ã€‚åœ¨å®‰å…¨æ–¹ä¾¿ï¼ŒOkHttpç›®å‰æ”¯æŒäº†TLSç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿ä¸€ä¸ªå®‰å…¨çš„Socketè¿žæŽ¥ã€‚ 2.3 Connectionâ€”â€”è¿žæŽ¥å±‚ï¼šç®¡ç†ç½‘ç»œè¿žæŽ¥ï¼Œå‘é€æ–°çš„è¯·æ±‚ï¼ŒæŽ¥æ”¶æœåŠ¡å™¨è®¿é—®è¿žæŽ¥å±‚é¡¾åæ€ä¹‰å°±æ˜¯è´Ÿè´£ç½‘ç»œè¿žæŽ¥ã€‚åœ¨è¿žæŽ¥å±‚ä¸­æœ‰ä¸€ä¸ªè¿žæŽ¥æ± ï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰çš„Socketè¿žæŽ¥ï¼Œå½“ç”¨æˆ·æ–°å‘èµ·ä¸€ä¸ªç½‘ç»œè¯·æ±‚æ—¶ï¼ŒOkHttpä¼šé¦–å…ˆä»Žè¿žæŽ¥æ± ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ç¬¦åˆè¦æ±‚çš„è¿žæŽ¥ï¼Œå¦‚æžœæœ‰åˆ™ç›´æŽ¥é€šè¿‡è¯¥è¿žæŽ¥å‘é€ç½‘ç»œè¯·æ±‚ï¼›å¦åˆ™æ–°åˆ›å»ºä¸€ä¸ªç½‘ç»œè¿žæŽ¥ã€‚è™½ç„¶ä½ åªéœ€è¦æä¾›URL,ä½†OkHttpè®¡åˆ’å®ƒè¿žæŽ¥åˆ°æ‚¨çš„ç½‘ç»œæœåŠ¡å™¨éœ€è¦ä½¿ç”¨ä¸‰ç§ç±»åž‹:URL,åœ°å€å’Œè·¯çº¿. RealConnectionï¼šæè¿°ä¸€ä¸ªç‰©ç†Socketè¿žæŽ¥ï¼Œè¿žæŽ¥æ± ä¸­ç»´æŠ¤å¤šä¸ªRealConnectionå®žä¾‹ã€‚StreamAllocationï¼š ç”±äºŽHttp/2æ”¯æŒå¤šè·¯å¤ç”¨ï¼Œä¸€ä¸ªRealConnectionå¯ä»¥æ”¯æŒå¤šä¸ªç½‘ç»œè®¿é—®è¯·æ±‚ï¼Œæ‰€ä»¥OkHttpåˆå¼•å…¥äº†StreamAllocationæ¥æè¿°ä¸€ä¸ªå®žé™…çš„ç½‘ç»œè¯·æ±‚å¼€é”€ï¼ˆä»Žé€»è¾‘ä¸Šä¸€ä¸ªStreamå¯¹åº”ä¸€ä¸ªCallï¼Œä½†åœ¨å®žé™…ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­ä¸€ä¸ªCallå¸¸å¸¸æ¶‰åŠåˆ°å¤šæ¬¡è¯·æ±‚ã€‚å¦‚é‡å®šå‘ï¼ŒAuthenticateç­‰åœºæ™¯ã€‚æ‰€ä»¥å‡†ç¡®åœ°è¯´ï¼Œä¸€ä¸ªStreamå¯¹åº”ä¸€æ¬¡è¯·æ±‚ï¼Œè€Œä¸€ä¸ªCallå¯¹åº”ä¸€ç»„æœ‰é€»è¾‘å…³è”çš„Streamï¼‰ï¼Œä¸€ä¸ªRealConnectionå¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªStreamAllocation,æ‰€ä»¥StreamAllocationå¯ä»¥çœ‹åšæ˜¯RealConenctionçš„è®¡æ•°å™¨ï¼Œå½“RealConnectionçš„å¼•ç”¨è®¡æ•°å˜ä¸º0ï¼Œä¸”é•¿æ—¶é—´æ²¡æœ‰è¢«å…¶ä»–è¯·æ±‚é‡æ–°å ç”¨å°±å°†è¢«é‡Šæ”¾ã€‚ 2.4 Cacheâ€”â€”ç¼“å­˜å±‚Cacheå±‚è´Ÿè´£ç»´æŠ¤è¯·æ±‚ç¼“å­˜ï¼Œå½“ç”¨æˆ·çš„ç½‘ç»œè¯·æ±‚åœ¨æœ¬åœ°å·²æœ‰ç¬¦åˆè¦æ±‚çš„ç¼“å­˜æ—¶ï¼ŒOkHttpä¼šç›´æŽ¥ä»Žç¼“å­˜ä¸­è¿”å›žç»“æžœï¼Œä»Žè€ŒèŠ‚çœç½‘ç»œå¼€é”€ã€‚ ç¼“å­˜ç­–ç•¥ï¼šæåˆ°ç¼“å­˜ç­–ç•¥ï¼Œå°±è¦æåˆ°CacheInterceptoræ‹¦æˆªå™¨ï¼Œå¦‚ä¸‹å›¾ CacheStrategyå®žçŽ°ç¼“å­˜ç­–ç•¥ï¼ŒCacheStrategyä½¿ç”¨Factoryæ¨¡å¼è¿›è¡Œæž„é€ ï¼Œè¯¥ç±»å†³å®šæ˜¯ä½¿ç”¨ç¼“å­˜è¿˜æ˜¯ä½¿ç”¨ç½‘ç»œè¯·æ±‚ Cacheæ˜¯å°è£…äº†å®žé™…çš„ç¼“å­˜æ“ä½œï¼›DiskLruCache:CacheåŸºäºŽDiskLruCacheï¼› 2.5 I/Oå±‚I/Oå±‚è´Ÿè´£å®žé™…çš„æ•°æ®è¯»å†™ã€‚OkHttpçš„å¦ä¸€å¤§æœ‰ç‚¹å°±æ˜¯å…¶é«˜æ•ˆçš„I/Oæ“ä½œï¼Œè¿™å½’å› äºŽå…¶é«˜æ•ˆçš„I/Oåº“okioã€‚ 2.6 Inteceptorâ€”â€”æ‹¦æˆªå™¨å±‚æ‹¦æˆªå™¨æ˜¯ä¸€ç§å¼ºå¤§çš„æœºåˆ¶,å¯ä»¥ç›‘è§†ã€é‡å†™å’Œé‡è¯•è°ƒç”¨ã€‚æ‹¦æˆªå™¨å±‚æä¾›äº†ä¸€ä¸ªç±»AOPæŽ¥å£ï¼Œæ–¹ä¾¿ç”¨æˆ·å¯ä»¥åˆ‡å…¥åˆ°å„ä¸ªå±‚é¢å¯¹ç½‘ç»œè®¿é—®è¿›è¡Œæ‹¦æˆªå¹¶æ‰§è¡Œç›¸å…³é€»è¾‘ã€‚ ä¸‰ã€ä¸ºä»€ä¹ˆokHttp3 å¥½ç”¨å‘¢ï¼ŸOkHttpæ˜¯ä¸€ä¸ªç²¾å·§çš„ç½‘ç»œè¯·æ±‚åº“,æœ‰å¦‚ä¸‹ç‰¹æ€§: æ”¯æŒhttp2ï¼Œå¯¹ä¸€å°æœºå™¨çš„æ‰€æœ‰è¯·æ±‚å…±äº«åŒä¸€ä¸ªsocket å†…ç½®è¿žæŽ¥æ± ï¼Œæ”¯æŒè¿žæŽ¥å¤ç”¨ï¼Œå‡å°‘å»¶è¿Ÿ æ”¯æŒé€æ˜Žçš„gzipåŽ‹ç¼©å“åº”ä½“ é€šè¿‡ç¼“å­˜é¿å…é‡å¤çš„è¯·æ±‚ è¯·æ±‚å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•ä¸»æœºçš„å…¶ä»–ipï¼Œè‡ªåŠ¨é‡å®šå‘ å¥½ç”¨çš„API å››ã€å®žçŽ°ç½‘ç»œè¯·æ±‚æ–¹æ³•:OkHttp3çš„æœ€åº•å±‚æ˜¯Socketï¼Œè€Œä¸æ˜¯URLConnectionï¼Œå®ƒé€šè¿‡Platformçš„Class.forName()åå°„èŽ·å¾—å½“å‰Runtimeä½¿ç”¨çš„socketåº“ socketå‘èµ·ç½‘ç»œè¯·æ±‚çš„æµç¨‹ä¸€èˆ¬æ˜¯ï¼š(1). åˆ›å»ºsocketå¯¹è±¡;(2). è¿žæŽ¥åˆ°ç›®æ ‡ç½‘ç»œ;(3). è¿›è¡Œè¾“å…¥è¾“å‡ºæµæ“ä½œã€‚ (1)(2)çš„å®žçŽ°ï¼Œå°è£…åœ¨connectionæŽ¥å£ä¸­ï¼Œå…·ä½“çš„å®žçŽ°ç±»æ˜¯RealConnectionã€‚(3)æ˜¯é€šè¿‡streamæŽ¥å£æ¥å®žçŽ°ï¼Œæ ¹æ®ä¸åŒçš„ç½‘ç»œåè®®ï¼Œæœ‰Http1xStreamå’ŒHttp2xStreamä¸¤ä¸ªå®žçŽ°ç±»ç”±äºŽåˆ›å»ºç½‘ç»œè¿žæŽ¥çš„æ—¶é—´è¾ƒä¹…(å¦‚æžœæ˜¯HTTPçš„è¯ï¼Œéœ€è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹)ï¼Œè€Œè¯·æ±‚ç»å¸¸æ˜¯é¢‘ç¹çš„ç¢Žç‰‡åŒ–çš„ï¼Œæ‰€ä»¥ä¸ºäº†æé«˜ç½‘ç»œè¿žæŽ¥çš„æ•ˆçŽ‡ï¼ŒOKHttp3å®žçŽ°äº†ç½‘ç»œè¿žæŽ¥å¤ç”¨ äº”ã€è¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ï¼šå•ä¾‹æ¨¡å¼ï¼šï¼ˆå»ºè®®ç”¨å•ä¾‹æ¨¡å¼åˆ›å»ºokHttpClientï¼‰OkHttpClientï¼Œ å¯ä»¥é€šè¿‡ new OkHttpClient() æˆ– new OkHttpClient.Builder() æ¥åˆ›å»ºå¯¹è±¡ï¼Œ ä½†æ˜¯â€”ç‰¹åˆ«æ³¨æ„ï¼Œ OkHttpClient() å¯¹è±¡æœ€å¥½æ˜¯å…±äº«çš„ï¼Œ å»ºè®®ä½¿ç”¨å•ä¾‹æ¨¡å¼åˆ›å»ºã€‚ å› ä¸ºæ¯ä¸ª OkHttpClient å¯¹è±¡éƒ½ç®¡ç†è‡ªå·±ç‹¬æœ‰çš„çº¿ç¨‹æ± å’Œè¿žæŽ¥æ± ã€‚ è¿™ä¸€ç‚¹å¾ˆå¤šåŒå­¦ï¼Œç”šè‡³åœ¨æˆ‘ç»åŽ†çš„å›¢é˜Ÿä¸­å°±æœ‰äººè¸©è¿‡å‘ï¼Œ æ¯ä¸€ä¸ªè¯·æ±‚éƒ½åˆ›å»ºä¸€ä¸ª OkHttpClient å¯¼è‡´å†…å­˜çˆ†æŽ‰ *å¤–è§‚æ¨¡å¼ : *OKHttpClient é‡Œé¢ç»„åˆäº†å¾ˆå¤šçš„ç±»å¯¹è±¡ã€‚å…¶å®žæ˜¯å°†OKHttpçš„å¾ˆå¤šåŠŸèƒ½æ¨¡å—ï¼Œå…¨éƒ¨åŒ…è£…è¿›è¿™ä¸ªç±»ä¸­ï¼Œè®©è¿™ä¸ªç±»å•ç‹¬æä¾›å¯¹å¤–çš„APIï¼Œè¿™ç§è®¾è®¡å«åšå¤–è§‚æ¨¡å¼ï¼ˆå¤–è§‚æ¨¡å¼ï¼šéšè—ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶å‘å®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥è®¿é—®ç³»ç»Ÿçš„æŽ¥å£ï¼‰ Builderæ¨¡å¼ : OkHttpClient æ¯”è¾ƒå¤æ‚ï¼Œ å¤ªå¤šå±žæ€§ï¼Œ è€Œä¸”å®¢æˆ·çš„ç»„åˆéœ€æ±‚å¤šæ ·åŒ–ï¼Œ æ‰€ä»¥OKhttpä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼ˆBuildæ¨¡å¼ï¼šä½¿ç”¨å¤šä¸ªç®€å•çš„å¯¹è±¡ä¸€æ­¥ä¸€æ­¥æž„å»ºæˆä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œä¸€ä¸ª Builder ç±»ä¼šä¸€æ­¥ä¸€æ­¥æž„é€ æœ€ç»ˆçš„å¯¹è±¡ï¼‰ å·¥åŽ‚æ–¹æ³•æ¨¡å¼ï¼šCallæŽ¥å£æä¾›äº†å†…éƒ¨æŽ¥å£Factory(ç”¨äºŽå°†å¯¹è±¡çš„åˆ›å»ºå»¶è¿Ÿåˆ°è¯¥å·¥åŽ‚ç±»çš„å­ç±»ä¸­è¿›è¡Œï¼Œä»Žè€Œå®žçŽ°åŠ¨æ€çš„é…ç½®ï¼Œå·¥åŽ‚æ–¹æ³•æ¨¡å¼ã€‚ï¼ˆå·¥åŽ‚æ–¹æ³•æ¨¡å¼ï¼šè¿™ç§ç±»åž‹çš„è®¾è®¡æ¨¡å¼å±žäºŽåˆ›å»ºåž‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚åœ¨å·¥åŽ‚æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æŽ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚ï¼‰ äº«å…ƒæ¨¡å¼ï¼šåœ¨Dispatcherçš„çº¿ç¨‹æ± ä¸­ï¼Œæ‰€ç”¨åˆ°äº†äº«å…ƒæ¨¡å¼ï¼Œä¸€ä¸ªä¸é™å®¹é‡çš„çº¿ç¨‹æ±  ï¼Œ çº¿ç¨‹ç©ºé—²æ—¶å­˜æ´»æ—¶é—´ä¸º 60 ç§’ã€‚çº¿ç¨‹æ± å®žçŽ°äº†å¯¹è±¡å¤ç”¨ï¼Œé™ä½Žçº¿ç¨‹åˆ›å»ºå¼€é”€ï¼Œä»Žè®¾è®¡æ¨¡å¼ä¸Šæ¥è®²ï¼Œä½¿ç”¨äº†äº«å…ƒæ¨¡å¼ã€‚ï¼ˆäº«å…ƒæ¨¡å¼ï¼šå°è¯•é‡ç”¨çŽ°æœ‰çš„åŒç±»å¯¹è±¡ï¼Œå¦‚æžœæœªæ‰¾åˆ°åŒ¹é…çš„å¯¹è±¡ï¼Œåˆ™åˆ›å»ºæ–°å¯¹è±¡ï¼Œä¸»è¦ç”¨äºŽå‡å°‘åˆ›å»ºå¯¹è±¡çš„æ•°é‡ï¼Œä»¥å‡å°‘å†…å­˜å ç”¨å’Œæé«˜æ€§èƒ½ï¼‰ è´£ä»»é“¾æ¨¡å¼ï¼šå¾ˆæ˜Žæ˜¾ï¼Œåœ¨okhttpä¸­çš„æ‹¦æˆªå™¨æ¨¡å—ï¼Œæ‰§è¡Œè¿‡ç¨‹ç”¨åˆ°ã€‚OkHttp3 çš„æ‹¦æˆªå™¨é“¾ä¸­ï¼Œ å†…ç½®äº†5ä¸ªé»˜è®¤çš„æ‹¦æˆªå™¨ï¼Œåˆ†åˆ«ç”¨äºŽé‡è¯•ã€è¯·æ±‚å¯¹è±¡è½¬æ¢ã€ç¼“å­˜ã€é“¾æŽ¥ã€ç½‘ç»œè¯»å†™ï¼ˆè´£ä»»é“¾æ¨¡å¼ï¼šä¸ºè¯·æ±‚åˆ›å»ºäº†ä¸€ä¸ªæŽ¥æ”¶è€…å¯¹è±¡çš„é“¾ã€‚è¿™ç§æ¨¡å¼ç»™äºˆè¯·æ±‚çš„ç±»åž‹ï¼Œå¯¹è¯·æ±‚çš„å‘é€è€…å’ŒæŽ¥æ”¶è€…è¿›è¡Œè§£è€¦ã€‚è¿™ç§ç±»åž‹çš„è®¾è®¡æ¨¡å¼å±žäºŽè¡Œä¸ºåž‹æ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œé€šå¸¸æ¯ä¸ªæŽ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæŽ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¦‚æžœä¸€ä¸ªå¯¹è±¡ä¸èƒ½å¤„ç†è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç›¸åŒçš„è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæŽ¥æ”¶è€…ï¼Œä¾æ­¤ç±»æŽ¨ã€‚ï¼‰ ç­–ç•¥æ¨¡å¼ ï¼šCacheInterceptor å®žçŽ°äº†æ•°æ®çš„é€‰æ‹©ç­–ç•¥ï¼Œ æ¥è‡ªç½‘ç»œè¿˜æ˜¯æ¥è‡ªæœ¬åœ°ï¼Ÿ è¿™ä¸ªåœºæ™¯ä¹Ÿæ˜¯æ¯”è¾ƒå¥‘åˆç­–ç•¥æ¨¡å¼åœºæ™¯ï¼Œ CacheInterceptor éœ€è¦ä¸€ä¸ªç­–ç•¥æä¾›è€…æä¾›å®ƒä¸€ä¸ªç­–ç•¥ï¼ˆé”¦å›Šï¼‰ï¼Œ CacheInterceptor æ ¹æ®è¿™ä¸ªç­–ç•¥åŽ»é€‰æ‹©èµ°ç½‘ç»œæ•°æ®è¿˜æ˜¯æœ¬åœ°ç¼“å­˜ã€‚ç¼“å­˜çš„ç­–ç•¥è¿‡ç¨‹ï¼š1ã€ è¯·æ±‚å¤´åŒ…å« â€œIf-Modified-Sinceâ€ æˆ– â€œIf-None-Matchâ€ æš‚æ—¶ä¸èµ°ç¼“å­˜2ã€ å®¢æˆ·ç«¯é€šè¿‡ cacheControl æŒ‡å®šäº†æ— ç¼“å­˜ï¼Œä¸èµ°ç¼“å­˜3ã€å®¢æˆ·ç«¯é€šè¿‡ cacheControl æŒ‡å®šäº†ç¼“å­˜ï¼Œåˆ™çœ‹ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œç¬¦åˆè¦æ±‚èµ°ç¼“å­˜ã€‚ 4ã€ å¦‚æžœèµ°äº†ç½‘ç»œè¯·æ±‚ï¼Œå“åº”çŠ¶æ€ç ä¸º 304ï¼ˆåªæœ‰å®¢æˆ·ç«¯è¯·æ±‚å¤´åŒ…å« â€œIf-Modified-Sinceâ€ æˆ– â€œIf-None-Matchâ€ ï¼ŒæœåŠ¡å™¨æ•°æ®æ²¡å˜åŒ–çš„è¯ä¼šè¿”å›ž304çŠ¶æ€ç ï¼Œä¸ä¼šè¿”å›žå“åº”å†…å®¹ï¼‰ï¼Œ è¡¨ç¤ºå®¢æˆ·ç«¯ç»§ç»­ç”¨ç¼“å­˜ã€‚ ï¼ˆç­–ç•¥æ¨¡å¼ï¼šä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹ã€‚è¿™ç§ç±»åž‹çš„è®¾è®¡æ¨¡å¼å±žäºŽè¡Œä¸ºåž‹æ¨¡å¼ã€‚ç­–ç•¥æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨ç¤ºå„ç§ç­–ç•¥çš„å¯¹è±¡å’Œä¸€ä¸ªè¡Œä¸ºéšç€ç­–ç•¥å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„ context å¯¹è±¡ã€‚ç­–ç•¥å¯¹è±¡æ”¹å˜ context å¯¹è±¡çš„æ‰§è¡Œç®—æ³•ã€‚ï¼‰ å…­ã€æºç ä¸­ç”¨åˆ°çš„å‡ ä¸ªé‡è¦çš„ç±»åŠä½œç”¨è§£é‡Šï¼šOkhttpClient :å¯¹å¤–çš„APIï¼ŒOKHttpçš„å¾ˆå¤šåŠŸèƒ½æ¨¡å—ï¼Œå…¨éƒ¨åŒ…è£…è¿›è¿™ä¸ªç±»ï¼›åˆ›å»ºåˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯new OkHttpClient()çš„æ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯ä½¿ç”¨å»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼ â€“ new OkHttpClient.Builder()â€¦.Build()ã€‚é‚£ä¹ˆè¿™ä¸¤ç§æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ ç¬¬ä¸€ç§ï¼šnew OkHttpClient()ï¼ŒOkHttpåšäº†å¾ˆå¤šå·¥ä½œï¼Œå¾ˆå¤šæˆ‘ä»¬éœ€è¦çš„å‚æ•°åœ¨è¿™é‡Œéƒ½èŽ·å¾—é»˜è®¤å€¼,ä¹Ÿå°±æ˜¯é»˜è®¤å€¼è®¾å®šã€‚ ç¬¬äºŒç§ï¼šé»˜è®¤çš„è®¾ç½®å’Œç¬¬ä¸€ç§æ–¹å¼ç›¸åŒï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å»ºé€ è€…æ¨¡å¼å•ç‹¬çš„è®¾ç½®æ¯ä¸€ä¸ªå±žæ€§ï¼›æ³¨æ„äº‹é¡¹ï¼šOkHttpClientå¼ºçƒˆå»ºè®®å…¨å±€å•ä¾‹ä½¿ç”¨ï¼Œå› ä¸ºæ¯ä¸€ä¸ªOkHttpClientéƒ½æœ‰è‡ªå·±å•ç‹¬çš„è¿žæŽ¥æ± å’Œçº¿ç¨‹æ± ï¼Œå¤ç”¨è¿žæŽ¥æ± å’Œçº¿ç¨‹æ± èƒ½å¤Ÿå‡å°‘å»¶è¿Ÿã€èŠ‚çœå†…å­˜ã€‚ RealCallç±»ï¼šé›†æˆCallç±»ï¼Œä»Žæºä»£ç ä¸­ï¼Œå¯çœ‹åˆ°ä½¿ç”¨Callç±»ï¼Œå‘é€å‡ºï¼ˆåŒæ­¥ï¼å¼‚æ­¥ï¼‰è¯·æ±‚.RealCallçš„ä¸»è¦ä½œç”¨ï¼šå‘é€è¯·æ±‚ï¼Œå½“ä¸­è¿˜æœ‰æ‹¦æˆªå™¨çš„å»ºç«‹è¿‡ç¨‹ï¼Œå¼‚æ­¥å›žè°ƒã€‚ Dispatcherç±»ï¼ˆè°ƒåº¦å™¨ï¼Œå¤šçº¿ç¨‹ï¼‰ï¼šä¿å­˜åŒæ­¥å’Œå¼‚æ­¥Callçš„åœ°æ–¹ï¼Œå¹¶è´Ÿè´£æ‰§è¡Œå¼‚æ­¥AsyncCall æ‹¦æˆªå™¨é“¾ï¼šæœ‰ç”¨æˆ·è‡ªå®šä¹‰çš„interceptorã€retryAndFollowUpInterceptorã€BridgeInterceptorã€CacheInterceptorã€ConnectInterceptorã€ networkInterceptorsã€CallServerInterceptorã€‚ä¾æ¬¡é€šè¿‡ä»¥ä¸Šæ‹¦æˆªå™¨ï¼Œä¼ é€’ç»™RealCallä¸­çš„ApplicationInterceptorChainã€‚æ‹¦æˆªå™¨ä¹‹æ‰€ä»¥å¯ä»¥ä¾æ¬¡è°ƒç”¨ï¼Œå¹¶æœ€ç»ˆå†ä»ŽåŽå…ˆå‰è¿”å›žResponseï¼Œéƒ½ä¾èµ–äºŽApplicatiionInterceptorChainçš„proceedæ–¹æ³•. HttpEngineç±»ï¼šOKhttpåº•å±‚çš„å®žçŽ°]]></content>
      <categories>
        <category>Android</category>
        <category>å¼€æºåº“</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å¼€æºåº“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå„ç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§]]></title>
    <url>%2Fposts%2F50d707a8.html</url>
    <content type="text"><![CDATA[ä¸€. ä½Žç‰ˆæœ¬SDKå¦‚ä½•å®žçŽ°é«˜ç‰ˆæœ¬apiï¼Ÿå¹³æ—¶å¦‚æžœä½ çš„minSdkæ¯”è¾ƒå°ï¼Œä½†æ˜¯æƒ³è°ƒç”¨é«˜ç‰ˆæœ¬çš„ä¸€äº›APIï¼Œandroid studioä¼šæé†’è¯¥æ–¹æ³•åœ¨XXç‰ˆæœ¬ä¸Šæ‰æœ‰ï¼Œå½“å‰é¡¹ç›®minSdkæ˜¯å¤šå°‘ã€‚å¾ˆå¤šä½Žç‰ˆæœ¬çš„ç³»ç»Ÿä¸Šå°±ä¼šæ‰¾ä¸åˆ°è¿™ä¸ªæ–¹æ³•ã€‚ é‚£æ€Žä¹ˆåšå‘¢ï¼Ÿå¯ä»¥åŽ»supportåŒ…ä¸­æ‰¾ç›¸åº”çš„æ–¹æ³•ã€‚ ä¾‹å¦‚5.0æ‰å‡ºçš„background tintï¼Œé‚£ä¹ˆå¦‚æžœä½ çš„minSdkæ˜¯å°äºŽ5.0çš„è¯ï¼Œé‚£ä¹ˆstudioå°±æŠ¥é”™äº†ï¼Œä½ å¯ä»¥åŽ»ä½¿ç”¨support-v4åŒ…ä¸­çš„DrawableCompatç±»ã€‚ ä¾‹å¦‚ï¼šåœ¨5.0ä¸Šå¦‚ä¸‹è°ƒç”¨ 12Drawable d = getContext().getResources().getDrawable(R.drawable.defalut_icon_big);d.setTint(0xffffffff); é‚£ä¹ˆä½¿ç”¨DrawableCompatå¯ä»¥è¿™æ ·è°ƒç”¨ï¼š 12Drawable d = getContext().getResources().getDrawable(R.drawable.defalut_icon_big);DrawableCompat.setTint(d,0xffffffff); åœ¨æ–°çš„SDKä¸Šæ€»æ˜¯ä¼šå‡ºçŽ°è®©äººçœ¼å‰ä¸€äº®éžå¸¸æ–¹ä¾¿å¥½ç”¨çš„APIã€‚ä½†æ˜¯è¿™äº›æ–°çš„APIå‘¢åœ¨ä½Žç‰ˆæœ¬çš„SDKä¸Šæ˜¯æ²¡æœ‰çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬çš„minSdkVersionçš„ç‰ˆæœ¬ä½ŽäºŽæ–°APIæ‰€åœ¨çš„ç‰ˆæœ¬æ—¶ï¼Œæˆ‘ä»¬ç›´æŽ¥ä½¿ç”¨æ–°APIåœ¨ç¼–è¯‘æ—¶ä¼šå‡ºçŽ°æŠ¥é”™ã€‚å¦‚æžœåªæ˜¯æƒ³è§£å†³ç¼–è¯‘æŠ¥é”™çš„é—®é¢˜å‘¢ï¼ŒAndroidç»™æˆ‘ä»¬æä¾›äº†ä¸¤ç§æ³¨è§£çš„æ–¹å¼é¿å…ç¼–è¯‘æ—¶æŠ¥é”™ï¼š @SuppressLint @TargetApi è¿™ä¸¤ç§æ–¹æ³•åˆæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ .SupressLint å’Œ TargetApi SupressLintå¾ˆæ˜¾ç„¶çš„æ„æ€æ˜¯å¿½ç•¥Lintæ£€æŸ¥ï¼Œå¯¹äºŽæˆ‘ä»¬ä½¿ç”¨é«˜ç‰ˆæœ¬APIæ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨@SuppressLint(â€œNewApiâ€)çš„æ–¹å¼è®©Lintåœ¨ç¼–è¯‘æ—¶å¿½ç•¥æ‰€è°ƒç”¨APIå¯¹ç‰ˆæœ¬çš„è¦æ±‚ã€‚è€Œ@TargetApiæ˜¯å¿½ç•¥ç‰¹å®šç‰ˆæœ¬çš„APIè°ƒç”¨æŠ¥é”™ã€‚ ä¸¾ä¸ªæ —å­ï¼šå½“ä½ çš„é¡¹ç›®minSdkVersion=9ï¼Œä½ æƒ³ä½¿ç”¨API 11çš„æ–°çš„æ–¹æ³•æ—¶ã€‚æ­¤æ—¶ï¼Œä½¿ç”¨@TargetApi(11)å’Œ@SuppressLint(â€œNewApiâ€ï¼‰çš„æ•ˆæžœä¸€æ ·ï¼Œä»£ç éƒ½ä¸ä¼šæŠ¥é”™ã€‚ä½†æ˜¯å¦‚æžœä½ ä½¿ç”¨äº†Api 19æ‰å‡ºçŽ°çš„æ–°çš„æ–¹æ³•æ—¶ï¼Œåœ¨ä½¿ç”¨@TargetApiçš„æ–¹æ³•ä¸­è¿˜æ˜¯ä¼šç»™ä½ æŠ¥é”™ï¼Œè€Œåœ¨å¦ä¸€ä¸ªæ–¹å¼ä¸­ä¾ç„¶ä¸ä¼šæŠ¥é”™ã€‚ é‚£è¿™ä¹ˆè®²ä½¿ç”¨@SuppressLint(â€œNewApiâ€)å°±æ›´å¥½äº†ï¼Ÿ äºŒ. Android å„ç‰ˆæœ¬ç‰¹ç‚¹Android 1.5ï¼ˆCupcakeçº¸æ¯è›‹ç³•ï¼‰ï¼š æ™ºèƒ½è™šæ‹Ÿé”®ç›˜ï¼›ä½¿ç”¨widgetså®žçŽ°æ¡Œé¢ä¸ªæ€§åŒ–ï¼›åœ¨çº¿æ–‡ä»¶å¤¹(Live Folder)å¿«é€Ÿæµè§ˆåœ¨çº¿æ•°æ®ï¼›è§†é¢‘å½•åˆ¶å’Œåˆ†äº«ï¼›å›¾ç‰‡ä¸Šä¼ ï¼› æ›´å¿«çš„æ ‡å‡†å…¼å®¹æµè§ˆå™¨ï¼›Voice search è¯­éŸ³æœç´¢ï¼›ç«‹ä½“å£°è“ç‰™å’Œå…æç”µè¯ Android 1.6ï¼ˆDonutç”œç”œåœˆï¼‰ï¼š å®Œå…¨é‡æ–°è®¾è®¡çš„Android Marketï¼Œå¯ä»¥æ˜¾ç¤ºæ›´å¤šçš„å±å¹•æˆªå›¾ï¼›æ‰‹åŠ¿æ”¯æŒï¼Œå¯ä»¥è®©å¼€å‘è€…ç”Ÿæˆé’ˆå¯¹æŸä¸ªåº”ç”¨ç¨‹åºçš„æ‰‹åŠ¿åº“ï¼› æ”¯æŒCDMAç½‘ç»œï¼šä¸­å›½ç”µä¿¡çš„ç”¨æˆ·å¯ä»¥æœŸå¾…EVDOçš„Androidæ‰‹æœºäº†ï¼› TXT-2-Speechï¼Œæ”¯æŒäº†æ›´å¤šè¯­è¨€çš„å‘éŸ³ï¼ŒåŒ…æ‹¬è‹±è¯­ã€æ³•è¯­ã€å¾·è¯­ã€æ„å¤§åˆ©è¯­ç­‰ å¿«é€Ÿæœç´¢æ¡†ï¼Œå¯ç›´æŽ¥æœç´¢æ‹¬è”ç³»äººï¼ŒéŸ³ä¹ï¼Œæµè§ˆåŽ†å²ï¼Œä¹¦ç­¾ç­‰æ‰‹æœºå†…å®¹ï¼› å…¨æ–°çš„æ‹ç…§ç•Œé¢ï¼šæ–°ç‰ˆç›¸æœºç¨‹åºå¯åŠ¨é€Ÿåº¦å¿«äº†39%ï¼Œæ‹ç…§é—´çš„å»¶è¿Ÿå‡å°‘äº†28%ï¼› åº”ç”¨ç¨‹åºè€—ç”µæŸ¥çœ‹ï¼šè¿™ä¸‹å¥½äº†ï¼Œå“ªä¸ªè½¯ä»¶è€—å¤šå°‘ç”µï¼ŒçŽ°åœ¨ä¸€è§äº†ç„¶äº†ï¼› æ–°å¢žé¢å‘è§†è§‰æˆ–å¬è§‰å›°éš¾äººç¾¤çš„æ˜“ç”¨æ€§æ’ä»¶ï¼› Linuxå†…æ ¸å‡çº§åˆ°2.6.29ï¼› å…¶ä»–ï¼šæ”¯æŒæ›´å¤šçš„å±å¹•åˆ†è¾¨çŽ‡ï¼Œå¦‚WVGAï¼ŒQVGAç­‰ Android 2.0 ï¼ˆ2.0~2.1 Eclairæ¾é¥¼ï¼ˆé—ªç”µæ³¡èŠ™ï¼‰ï¼‰: ç”±äºŽæ–‡ä»¶ç»“æž„çš„æ”¹åŠ¨ä¼˜åŒ–ï¼Œä½¿å¾—æ•´ä¸ªæ“ä½œæµç•…æ€§å¾—åˆ°äº†å¾ˆå¤§çš„æå‡; è‡ªå¸¦çš„Chrome Liteæµè§ˆå™¨çŽ°åœ¨åŠ å…¥äº†å¯¹åŒå‡»å±å¹•è¿›è¡Œç¼©æ”¾çš„æ”¯æŒ; åŠ å¼ºäº†ç½‘ç»œç¤¾äº¤åŠŸèƒ½ï¼Œæ¯”å¦‚Facebookå¥½å‹æ•´åˆè‡³è”ç³»äººåŠŸèƒ½; å¼ºåŒ–äº†è¯­éŸ³è¯†åˆ«çš„æœç´¢æŽ§åˆ¶ã€‚æ•´ä¸ªç³»ç»Ÿå¤šå¤„éƒ½æ”¯æŒè¯­éŸ³æŽ§åˆ¶ï¼Œå¹¶æ‹¥æœ‰ç‹¬ç«‹çš„æŽ§åˆ¶é¢æ¿; è°·æ­Œåœ°å›¾æœåŠ¡æ›´æ–°ï¼ŒåŠ å…¥äº†å…¨æ–°çš„å¯¼èˆªç³»ç»Ÿï¼Œç”šè‡³æ¯”è½¬ä¸šçš„å¯¼èˆªè½¯ä»¶æ›´ä¸ºå…ˆè¿›; åŠ å…¥äº†åŽŸç”Ÿå¾®è½¯Exchangeé‚®ä»¶æœåŠ¡æ”¯æŒ; æä¾›äº†å¤šä¸ªä¸åŒå¸æˆ·ï¼Œç»Ÿä¸€çš„é‚®ä»¶æ”¶ä»¶ç®±; åªéœ€åŒå‡»å°±èƒ½ä¸Šä¼ å›¾ç‰‡è‡³YouTube; ä¼˜åŒ–äº†é©¾è½¦æ—¶çš„ä½“éªŒï¼Œæ–°çš„â€œCar Homeâ€åº”ç”¨ç¨‹åºä¸ºå„åŠŸèƒ½æä¾›äº†æ˜“äºŽæ“ä½œçš„å¿«æ·é“¾æŽ¥ï¼Œè¿˜èƒ½æ–¹ä¾¿åœ°ä½¿ç”¨è¯­éŸ³æŽ§åˆ¶åŠŸèƒ½ï¼Œä¾¿äºŽç”¨æˆ·é©¾è½¦æ—¶ä½¿ç”¨ Android 2.1 å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªGoogleè´¦å·; æ— çº¿æŽ§ä»¶é‡Œæœ‰äº†VPNè®¾ç½®; å¢žåŠ äº†è¿žæŽ¥åˆ°PCè®¾ç½®; å¢žå¼ºäº†è¯­è¨€å’Œå£°éŸ³çš„è½¬æ¢åŠŸèƒ½ï¼Œå¹¶åŠ å…¥äº†æ–‡å­—åˆ°è¯­éŸ³è½¬æ¢; å…¨æ–°çš„æ‹¨å·ç•Œé¢ï¼ŒæŒ‰é”®æ›´å¤§ï¼Œæ›´æ˜“äºŽæ“ä½œ; æ›´å¤šæ¡Œé¢Widget; æ–°çš„Googleåœ°å›¾å¯ä»¥ä½¿ç”¨è°·æ­Œåœ°å›¾å¯¼èˆªåŠŸèƒ½; æ–°çš„æµè§ˆå™¨ç‰ˆæœ¬ï¼ŒåŠ å¼ºäº†ç¨³å®šæ€§å’Œç½‘é¡µæ¸²æŸ“èƒ½åŠ›; å…¨å±€æœç´¢åŠŸèƒ½åŠ å¼º; å…¨æ–°çš„Marketç¨‹åºï¼Œæœç´¢æ›´å¿«å¸ƒå±€æ›´åˆç† Android 2.2(Froyoå†»é…¸å¥¶): å…¨é¢æ”¯æŒFlash 10.1; åº”ç”¨ç¨‹åºè‡ªåŠ¨å‡çº§ï¼Œè®©å‡çº§æ›´åŠ äººæ€§åŒ–; æ”¯æŒåº”ç”¨ç¨‹åºå®‰è£…åœ¨å¤–ç½®å†…å­˜ä¸Š; Linuxå†…æ ¸å°†å‡çº§ä¸ºæœ€æ–°çš„2.6.32ç‰ˆæœ¬ï¼Œç³»ç»Ÿæ›´åŠ ç¨³å®š; å¯¹ç³»ç»Ÿæ€§èƒ½è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œè®©æ‰‹æœºæœ‰æ›´å¤šçš„è¿è¡Œå†…å­˜; å¢žåŠ äº†è½¨è¿¹çƒLEDæŒ‡ç¤ºç¯å˜è‰²è¿™ä¸ªæ–°åŠŸèƒ½; å¢žåŠ äº†å¯¹3Dæ€§èƒ½çš„ä¼˜åŒ–ï¼Œ3Dæ€§èƒ½æ›´åŠ å¼ºå¤§; FMåŠŸèƒ½ä¹Ÿå°†åœ¨æ–°ç³»ç»Ÿä¸­å¾—åˆ°å…¨é¢æ”¯æŒ Android 2.3(2.3 Gingerbreadå§œé¥¼) ç”¨æˆ·ç•Œé¢æ›´ç¾Žè§‚; æå‡æ¸¸æˆä½“éªŒ; æå‡å¤šåª’ä½“èƒ½åŠ›; å¢žåŠ å®˜æ–¹è¿›ç¨‹ç®¡ç†; æ”¹å–„ç”µæºç®¡ç†; NFCè¿‘åœºé€šä¿¡; å…¨å±€ä¸‹è½½ç®¡ç†; å…¨æ–°è™šæ‹Ÿé”®ç›˜; åŽŸç”Ÿæ”¯æŒå‰ç½®å‰ç½®æ‘„åƒå¤´; SIPç½‘ç»œç”µè¯ Android3.0åˆ°3.1(3.0 Honeycomb èœ‚å·¢)ï¼šå®‰å“3.0ç³»ç»Ÿä¸»è¦ç”¨äºŽå®‰å“çš„å¹³æ¿äº§å“ï¼Œç”»é¢åŠ¨æ„Ÿï¼Œå¯æ“æŽ§æ€§æ›´å¼ºï¼Œä»£è¡¨æœ‰æ‘©æ‰˜ç½—æ‹‰çš„å¹³æ¿äº§å“XOOMï¼Œ3.1ä¹Ÿå·²ç»å‘å¸ƒï¼Œä¹Ÿä¸»è¦ç”¨äºŽå¹³æ¿äº§å“ã€‚ Android4.0(4.0 Ice CreamSandwich)1ã€å•ä¸€ç³»ç»Ÿ Android 4.0å°†åªæä¾›ä¸€ä¸ªç‰ˆæœ¬ï¼ŒåŒæ—¶æ”¯æŒæ™ºèƒ½æ‰‹æœºã€å¹³æ¿ç”µè„‘ã€ç”µè§†ç­‰è®¾å¤‡ã€‚2ã€ä¸€æµçš„æ–°UI3ã€å¼€æº æ­¤å‰Android 3.0æ›¾ä¸€åº¦å®£å¸ƒä¸é‡‡å–å¼€æºæŽªæ–½ï¼Œç„¶è€Œè°·æ­Œæ·±çŸ¥Androidç³»ç»Ÿä¸€å¤§æˆåŠŸç‰¹æ€§å°±æ˜¯å¼€æºã€‚å¹³æ¿ä¸Šåƒåˆ°çš„è‹¦å¤´åŠ¿å¿…åœ¨å…¨æ–°çš„Android 4.0ä¸Šé¿å…ï¼Œç”¨æˆ·ä¸ºä¸­å¿ƒçš„åˆ·æœºèµ„æºä¸€å®šä¼šè®©Android 4.0é”¦ä¸Šæ·»èŠ±ã€‚ Android5.01ã€android 5.0 Hello 5.0 5.0çš„ç‰ˆæœ¬å·å°±èƒ½å‘Šè¯‰æˆ‘ä»¬ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤§çš„å‡çº§ç‰ˆæœ¬ã€‚ 2ã€åŸºäºŽLinuxå†…æ ¸3.0 Linuxåˆšåˆšå‘å¸ƒLinux 3.0å†…æ ¸æ²¡å¤šä¹…ï¼ŒåŽæ¥åˆæ›´æ–°åˆ°äº†3.0.1 ã€‚ 3ã€é€šè¿‡Android Marketè´­ä¹°éŸ³ä¹è°·æ­Œå·²ç»è¯•æ°´æ€§è´¨çš„æŽ¨å‡ºäº†Google Music Beta ï¼Œå…è®¸ä¸Šä¼ 2ä¸‡é¦–éŸ³ä¹åˆ°Googleçš„äº‘ç«¯æœåŠ¡å™¨ï¼Œè‡ªåŠ¨åˆ›å»ºæ’­æ”¾åˆ—è¡¨åœ¨ä»»ä½•æ”¯æŒflashçš„è®¾å¤‡ä¸Šå›žæ”¾ï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡è¿™ç§åœ¨Appstoreå½±å“ä¸‹çš„æ•°å­—è§†é¢‘ã€éŸ³é¢‘æœåŠ¡å†…å®¹çš„æä¾›ä¹Ÿå°†ä¼šå‡ºçŽ°åœ¨Androidä¸Šã€‚ 4ã€å¤šæ ¸å¤„ç†å™¨ä¼˜åŒ–çŽ°åœ¨å„åŽ‚å•†éƒ½åœ¨æŽ¨åŒæ ¸çš„æ™ºèƒ½æ‰‹æœºï¼Œå®žé™…çš„æ•ˆæžœå¦‚ä½•æˆ‘ä»¬ä¸äºˆè¯„è¯´ï¼Œä½†Android 4.0å°†ç‰¹åˆ«ä¸ºä½¿ç”¨åŒæ ¸ä¹ƒè‡³å¤šæ ¸å¤„ç†å™¨çš„æ‰‹æœºè¿›è¡Œä¸“é—¨çš„ä¼˜åŒ–ã€‚ 5ã€è¿è¡Œé€Ÿåº¦æ¯”3.1æé«˜1.8å€Googleçš„äººå‘˜åªæ˜¯è¿™ä¹ˆä¸€è¯´ï¼Œå¹¶æ²¡æœ‰æåŠè¿™ä¸ªæ€§èƒ½å…·ä½“ä½“çŽ°åœ¨ä»€ä¹ˆæ–¹é¢ï¼Œå› æ­¤æˆ‘ä»¬ä¸çŸ¥é“è¿™æ˜¯å…³äºŽæµè§ˆå™¨ã€GPUè¿˜æ˜¯æ•´ä½“æ€§èƒ½ï¼Œåªæœ‰ç­‰å¾…ã€‚ 6ã€é›†æˆGoogleç”µè§†å’ŒChrome OSçš„æ™ºèƒ½åœæ”¾ 7ã€ä¸ºOEMæä¾›äº†å®˜æ–¹çš„ä¸»é¢˜å¼•æ“Ž æœ‰äº†è¿™ä¸ªå¼•æ“Žï¼Œä¾¿å¯é€šè¿‡Googleçš„å‡çº§ç¨‹åºæ›´æ–°åˆ°è¿™äº›ç¬¬ä¸‰æ–¹çš„ä¸»é¢˜ã€‚ 8ã€è‹¹æžœæ¸¸æˆä¸­å¿ƒçš„ä¸€ä¸ªçœŸæ­£çš„ç«žäº‰è€… 9ã€æ”¯æŒçŽ°æœ‰çš„æ™ºèƒ½æ‰‹æœº æ®ç§°çŽ°è¡Œæ‰€æœ‰è¿è¡ŒAndroid 2.3çš„æ‰‹æœºéƒ½æœ‰å¯èƒ½å‡çº§åˆ°4.0ç‰ˆæœ¬ï¼Œè¿™æ¡æ¶ˆæ¯æ˜¯æˆ‘å–œé—»ä¹è§çš„ï¼Œè€ŒGoogleå®˜æ–¹çš„Nexus Oneå’ŒNexus Så°†æ˜¯ç¬¬ä¸€æ‰¹å‡çº§åˆ°4.0çš„æ‰‹æœºã€‚ 10ã€æ–°çš„æ‘„å½±æŠ€å·§ä»¥åŠè™šæ‹Ÿæ‘„åƒæœº è¿™å°†ä¸ºå¼€å‘è€…æä¾›æ›´ä¸°å¯Œçš„æ‘„åƒå¤´æŽ§åˆ¶APIã€‚ android 6.0é”å±ä¸‹è¯­éŸ³æœç´¢ ç”¨æˆ·å¯ä»¥ç›´æŽ¥åœ¨é”å±çŠ¶æ€ä¸‹è¿›è¡Œè¯­éŸ³æœç´¢ï¼Œè™½ç„¶çŽ°åœ¨çš„ä¸€äº›å®‰å“æ‰‹æœºæ”¯æŒè¯­éŸ³å”¤é†’åŠŸèƒ½ï¼Œä½†è¿™äº›è¯­éŸ³å”¤é†’éƒ½æ˜¯ç¬¬ä¸‰æ–¹åŽ‚å•†å¼€å‘çš„ï¼Œè€Œæ­¤æ¬¡çš„Android 6.0åœ¨ç³»ç»Ÿå±‚é¢åŠ å…¥é”å±ä¸‹è¯­éŸ³æœç´¢ï¼Œè¿™æ— ç–‘ä¼šåœ¨ä½“éªŒä¸Šæœ‰ä¸€ä¸ªæ˜Žæ˜¾çš„æå‡ã€‚ æŒ‡çº¹è¯†åˆ« è¯´åˆ°æŒ‡çº¹è¯†åˆ«ï¼Œå¾ˆå¤šç”¨æˆ·éƒ½ä¼šè§‰å¾—çŽ°åœ¨çš„ä¸­é«˜ç«¯å®‰å“æ‰‹æœºéƒ½æ”¯æŒï¼Œä½†äº‹å®žä¸Šè¿™äº›å®‰å“æ‰‹æœºçš„æŒ‡çº¹è¯†åˆ«éƒ½æ˜¯å„ä¸ªåŽ‚å•†è‡ªè¡Œå¼€å‘çš„å¹¶æ²¡æœ‰ç³»ç»Ÿåº•å±‚çš„æ”¯æŒã€‚Android 6.0åˆ™åœ¨ç³»ç»Ÿå±‚é¢åŠ å…¥æŒ‡çº¹è¯†åˆ«ï¼Œèƒ½æä¾›åŽŸç”ŸæŒ‡çº¹è¯†åˆ«APIï¼Œè¿™ä¸ä½†é™ä½Žäº†åŽ‚å•†å¼€å‘æŒ‡çº¹è¯†åˆ«æ¨¡å—çš„æˆæœ¬ï¼Œæœ€é‡è¦çš„æ˜¯åŽŸç”ŸæŒ‡çº¹è¯†åˆ«å°†ä¼šå¤§å¤§æå‡å®‰å“æ‰‹æœºçš„æŒ‡çº¹è¯†åˆ«æ”¯ä»˜å®‰å…¨æ€§ã€‚ æ›´å®Œæ•´çš„åº”ç”¨æƒé™ç®¡ç† åœ¨æ­¤å‰çš„åŽŸç”Ÿå®‰å“ç³»ç»Ÿä¸­æœ‰åº”ç”¨é€šçŸ¥ç®¡ç†åŠŸèƒ½ï¼Œä½†æ›´ä¸ºæ·±å…¥çš„åº”ç”¨æƒé™ç®¡ç†åªèƒ½é ç¬¬ä¸‰æ–¹åº”ç”¨å®žçŽ°ã€‚Android 6.0è¿›ä¸€æ­¥å¼ºåŒ–åº”ç”¨æƒé™ç®¡ç†ï¼Œåº”ç”¨æƒé™ç®¡ç†ä¹Ÿæˆä¸ºç³»ç»Ÿçº§çš„åŠŸèƒ½ï¼Œä¸è¿‡è¿™å¯¹äºŽé‚£äº›æƒé™ç®¡ç†è½¯ä»¶æ¥è¯´å¹¶ä¸æ˜¯ä»€ä¹ˆå¥½æ¶ˆæ¯ã€‚ Dozeç”µé‡ç®¡ç† Android 6.0è‡ªå¸¦Dozeç”µé‡ç®¡ç†åŠŸèƒ½ï¼Œåœ¨â€œDozeâ€æ¨¡å¼ä¸‹ï¼Œæ‰‹æœºä¼šåœ¨ä¸€æ®µæ—¶é—´æœªæ£€æµ‹åˆ°ç§»åŠ¨æ—¶ï¼Œè®©åº”ç”¨ä¼‘çœ æ¸…æ€åŽå°è¿›ç¨‹å‡å°‘åŠŸè€—ï¼Œè°·æ­Œè¡¨ç¤ºï¼Œå½“å±å¹•å¤„äºŽå…³é—­çŠ¶æ€ï¼Œå¹³å‡ç»­èˆªæ—¶é—´æé«˜30%ã€‚ Now on TapåŠŸèƒ½ Now on TapåŠŸèƒ½æ˜¯å’ŒGoogleæœç´¢ç´§å¯†ç»“åˆçš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è®©è°·æ­Œä»Žä»»ä½•åº”ç”¨ä¸­è¿›è¡Œæœç´¢ã€‚ä¾‹å¦‚ï¼Œåœ¨å¾®ä¿¡ä¸­èŠå¤©çš„æ—¶å€™æåˆ°é¤é¦†ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ä¸è·³è½¬çš„æƒ…å†µä¸‹è¿›è¡Œè°·æ­Œæœç´¢ã€‚ App Links é€šè¿‡App LinksåŠŸèƒ½ï¼ŒAndroidå¹³å°èƒ½å¤Ÿå‘ç½‘ç»œæœåŠ¡å™¨æå‡ºç”³è¯·ï¼Œè‡ªä¸»è¯†åˆ«é“¾æŽ¥å†…å®¹ã€‚ç›´æŽ¥è·³è½¬åˆ°Appå®¢æˆ·ç«¯ä¸­ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œæœ‰åˆ©äºŽè®©ç”¨æˆ·åœ¨ä½“éªŒæ›´å®Œå–„çš„Appå®¢æˆ·ç«¯å®Œæˆæ›´å¤šæ“ä½œã€‚ æ­¤å¤–ï¼Œåœ¨Android 6.0è°·æ­Œè¿˜åŠ å…¥äº†Android Payè¿›ä¸€æ­¥å¼ºåŒ–ç§»åŠ¨æ”¯ä»˜ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸ºäº†å¯¹æŠ—Apple Payã€‚åœ¨å‘å¸ƒä¼šä¸Šè°·æ­Œè¡¨ç¤ºAndroid 6.0å°†åœ¨ä¸‹å‘¨å¼€å§‹æŽ¨é€ï¼ŒNexus5/6/7/9ä»¥åŠNexus Playerå°†èƒ½å¤Ÿåœ¨ç¬¬ä¸€æ—¶é—´å¾—åˆ°å‡çº§ã€‚ Android7.0åˆ†å±å¤šä»»åŠ¡ è¿›å…¥åŽå°å¤šä»»åŠ¡ç®¡ç†é¡µé¢ï¼Œç„¶åŽæŒ‰ä½å…¶ä¸­ä¸€ä¸ªå¡ç‰‡ï¼Œç„¶åŽå‘ä¸Šæ‹–åŠ¨è‡³é¡¶éƒ¨å³å¯å¼€å¯åˆ†å±å¤šä»»åŠ¡ï¼Œæ”¯æŒä¸Šä¸‹åˆ†æ å’Œå·¦å³åˆ†æ ï¼Œå…è®¸æ‹–åŠ¨ä¸­é—´çš„åˆ†å‰²çº¿è°ƒæ•´ä¸¤ä¸ªAPPæ‰€å çš„æ¯”ä¾‹ã€‚ç›®å‰ï¼Œå®‰å“7.0å¼€å‘è€…é¢„è§ˆç‰ˆæ”¯æŒå…¨éƒ¨ç¬¬ä¸‰æ–¹åº”ç”¨å°è¯•åˆ†å±æ“ä½œï¼Œä½†ä¸ªåˆ«åº”ç”¨é€‚é…å¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œåˆ†å±åŽå¯èƒ½å¯¼è‡´ç•Œé¢æ˜¾ç¤ºä¸å…¨ç­‰é—®é¢˜. å…¨æ–°ä¸‹æ‹‰å¿«æ·å¼€å…³é¡µ åœ¨å®‰å“7.0ä¸­ï¼Œä¸‹æ‹‰æ‰“å¼€é€šçŸ¥æ é¡¶éƒ¨å³å¯æ˜¾ç¤º5ä¸ªç”¨æˆ·å¸¸ç”¨çš„å¿«æ·å¼€å…³ï¼Œæ”¯æŒå•å‡»å¼€å…³ä»¥åŠé•¿æŒ‰è¿›å…¥å¯¹åº”è®¾ç½®ã€‚å¦‚æžœç»§ç»­ä¸‹æ‹‰é€šçŸ¥æ å³å¯æ˜¾ç¤ºå…¨éƒ¨å¿«æ·å¼€å…³ï¼Œæ­¤å¤–åœ¨å¿«æ·å¼€å…³é¡µå³ä¸‹è§’ä¹Ÿä¼šæ˜¾ç¤ºä¸€ä¸ªâ€œç¼–è¾‘â€æŒ‰é’®ï¼Œç‚¹å‡»ä¹‹åŽå³å¯è‡ªå®šä¹‰æ·»åŠ /åˆ é™¤å¿«æ·å¼€å…³ï¼Œæˆ–æ‹–åŠ¨è¿›è¡ŒæŽ’åºã€‚ é€šçŸ¥æ¶ˆæ¯å¿«æ·å›žå¤ å®‰å“7.0åŠ å…¥äº†å…¨æ–°çš„APIï¼Œæ”¯æŒç¬¬ä¸‰æ–¹åº”ç”¨é€šçŸ¥çš„å¿«æ·æ“ä½œå’Œå›žå¤ï¼Œä¾‹å¦‚æ¥ç”µä¼šä»¥æ¨ªå¹…æ–¹å¼åœ¨å±å¹•é¡¶éƒ¨å‡ºçŽ°ï¼Œæä¾›æŽ¥å¬/æŒ‚æ–­ä¸¤ä¸ªæŒ‰é’®ï¼›ä¿¡æ¯/ç¤¾äº¤ç±»åº”ç”¨é€šçŸ¥ï¼Œè¿˜å¯ä»¥ç›´æŽ¥æ‰“å¼€é”®ç›˜ï¼Œåœ¨è¾“å…¥æ é‡Œè¿›è¡Œå¿«æ·å›žå¤ã€‚ é€šçŸ¥æ¶ˆæ¯å½’æ‹¢ å®‰å“7.0ä¼šå°†åŒä¸€åº”ç”¨çš„å¤šæ¡é€šçŸ¥æç¤ºæ¶ˆæ¯å½’æ‹¢ä¸ºä¸€é¡¹ï¼Œç‚¹å‡»è¯¥é¡¹å³å¯å±•å¼€æ­¤å‰çš„å…¨éƒ¨é€šçŸ¥ï¼Œå…è®¸ç”¨æˆ·å¯¹æ¯ä¸ªé€šçŸ¥æ‰§è¡Œå•ç‹¬æ“ä½œã€‚ å¤œé—´æ¨¡å¼ å®‰å“7.0ä¸­é‡æ–°åŠ å…¥äº†å¤œé—´æ·±è‰²ä¸»é¢˜æ¨¡å¼ï¼Œè¯¥åŠŸèƒ½ä¾ç„¶éœ€è¦åœ¨ç³»ç»Ÿè°ƒè°å™¨ä¸­å¼€å¯ï¼Œä»Žé¡¶éƒ¨ä¸‹åˆ’æ‰“å¼€å¿«æ·è®¾ç½®é¡µï¼Œç„¶åŽé•¿æŒ‰å…¶ä¸­çš„è®¾ç½®å›¾æ ‡ï¼Œé½¿è½®æ—‹è½¬10ç§’é’Ÿå·¦å³å³å¯æç¤ºå·²å¼€å¯ç³»ç»Ÿè°ƒè°å™¨ï¼Œä¹‹åŽç”¨æˆ·åœ¨è®¾ç½®ä¸­å³å¯æ‰¾åˆ°â€œç³»ç»Ÿè°ƒè°å™¨â€è®¾ç½®é¡¹ã€‚ç‚¹å¼€å…¶ä¸­çš„â€œè‰²å½©å’Œå¤–è§‚â€ï¼Œå³å¯æ‰¾åˆ°å¤œé—´æ¨¡å¼ï¼Œå¼€å¯åŽå³å¯ä½¿ç”¨å…¨å±€çš„æ·±è‰²ä¸»é¢˜æ¨¡å¼ï¼ŒåŒæ—¶äº®åº¦å’Œè‰²å½©ä¹Ÿä¼šè¿›è¡Œä¸€å®šçš„è°ƒæ•´ï¼Œè¯¥åŠŸèƒ½å¯ä»¥åŸºäºŽæ—¶é—´æˆ–åœ°ç†ä½ç½®è‡ªåŠ¨å¼€å¯ã€‚å¦å¤–ï¼Œç³»ç»Ÿè°ƒè°å™¨ä¸­ä¹Ÿæä¾›äº†RGBçº¢ç»¿è“ä¸‰è‰²è°ƒèŠ‚æ»‘åŠ¨æ¡ï¼Œå…è®¸ç”¨æˆ·æ‰‹åŠ¨ç²¾ç»†è°ƒèŠ‚ï¼Œä¾‹å¦‚å‡å°‘è“è‰²æˆ–å¢žåŠ çº¢è‰²ä»¥æä¾›ç±»ä¼¼æŠ¤çœ¼æ¨¡å¼çš„æ•ˆæžœã€‚ æµé‡ä¿æŠ¤æ¨¡å¼ å®‰å“7.0æ–°å¢žçš„æµé‡ä¿æŠ¤æ¨¡å¼ä¸ä»…å¯ä»¥ç¦æ­¢åº”ç”¨åœ¨åŽå°ä½¿ç”¨æµé‡ï¼Œè¿˜ä¼šè¿›ä¸€æ­¥å‡å°‘è¯¥åº”ç”¨åœ¨å‰å°æ—¶çš„æµé‡ä½¿ç”¨ã€‚å…¶å…·ä½“å®žçŽ°åŽŸç†ç›®å‰å°šä¸æ¸…æ¥šï¼ŒæŽ¨æµ‹å…¶æœ‰å¯èƒ½ä½¿ç”¨äº†ç±»ä¼¼Chromeæµè§ˆå™¨çš„æ•°æ®åŽ‹ç¼©æŠ€æœ¯ã€‚æ­¤å¤–ï¼Œè°·æ­Œè¿˜æ‰©å±•äº†ConnectivityManager APIçš„èƒ½åŠ›ï¼Œä½¿å¾—åº”ç”¨å¯ä»¥æ£€æµ‹ç³»ç»Ÿæ˜¯å¦å¼€å¯äº†æµé‡ä¿æŠ¤æ¨¡å¼ï¼Œæˆ–è€…æ£€æµ‹è‡ªå·±æ˜¯å¦åœ¨ç™½åå•ä¸­ã€‚å®‰å“7.0å…è®¸ç”¨æˆ·å•ç‹¬é’ˆå¯¹æ¯ä¸ªåº”ç”¨ï¼Œé€‰æ‹©æ˜¯å¦å¼€å¯æ•°æ®ä¿æŠ¤æ¨¡å¼ã€‚ å…¨æ–°è®¾ç½®æ ·å¼ å®‰å“7.0å¯ç”¨äº†å…¨æ–°çš„è®¾ç½®æ ·å¼ï¼Œé¦–å…ˆæ¯ä¸ªåˆ†ç±»ä¸‹å„ä¸ªå­é¡¹ä¹‹é—´çš„åˆ†å‰²çº¿æ¶ˆå¤±äº†ï¼Œåªä¿ç•™åˆ†ç±»ä¹‹é—´çš„åˆ†å‰²çº¿ã€‚å…¨æ–°çš„è®¾ç½®èœå•è¿˜æä¾›äº†ä¸€ä¸ªç»¿è‰²çš„é¡¶æ ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡åŽæ–¹çš„ä¸‹æ‹‰ç®­å¤´ï¼Œå¿«é€Ÿè®¾å®šå‹¿æ‰°æ¨¡å¼ç­‰ã€‚é™¤äº†å‹¿æ‰°æ¨¡å¼å¤–ï¼Œé¡¶æ èœå•è¿˜å¯ä»¥æ˜¾ç¤ºè¯¸å¤šå…¶ä»–çš„è®¾ç½®çŠ¶æ€ï¼Œä¾‹å¦‚æ•°æ®æµé‡çš„ä½¿ç”¨æƒ…å†µï¼Œè‡ªåŠ¨äº®åº¦æ˜¯å¦å¼€å¯ç­‰ã€‚è°·æ­Œä¹Ÿåœ¨å®‰å“7.0çš„è®¾ç½®ä¸­åŠ å…¥äº†æ±‰å ¡èœå•ï¼Œåœ¨äºŒçº§è®¾ç½®ç•Œé¢ä¸­çš„å·¦ä¸Šè§’ï¼Œä½ å°±ä¼šçœ‹åˆ°è¿™ä¸ªæ±‰å ¡èœå•ï¼Œç‚¹å‡»åŽå³å¯çœ‹åˆ°æ‰€æœ‰è®¾ç½®é¡¹ï¼Œæ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿè·³è½¬ã€‚ æ”¹è¿›çš„Dozeä¼‘çœ æœºåˆ¶ è°·æ­Œåœ¨å®‰å“7.0ä¸­å¯¹Dozeä¼‘çœ æœºåˆ¶åšäº†è¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼Œåœ¨æ­¤å‰çš„å®‰å“6.0ä¸­ï¼ŒDozeæ·±åº¦ä¼‘çœ æœºåˆ¶å¯¹äºŽæ”¹å–„å®‰å“çš„ç»­èˆªæä¾›äº†å·¨å¤§çš„ä½œç”¨ã€‚è€Œåœ¨å®‰å“7.0ä¸­ï¼Œè°·æ­Œå¯¹Dozeè¿›è¡Œäº†æ›´å¤šçš„ä¼˜åŒ–ï¼Œä¼‘çœ æœºåˆ¶çš„ä½¿ç”¨è§„åˆ™å’Œåœºæ™¯æœ‰æ‰€æ‰©å±•ï¼Œä¾‹å¦‚åªè¦æ‰‹åŠ¨åœ¨åŽå°åˆ æŽ‰åº”ç”¨å¡ç‰‡ï¼Œå…³å±åŽè¯¥åº”ç”¨å°±ä¼šè¢«å¾ˆå¿«æ·±åº¦ä¼‘çœ ã€‚ ç³»ç»Ÿçº§ç”µè¯é»‘åå•åŠŸèƒ½ å®‰å“7.0å°†ç”µè¯æ‹¦æˆªåŠŸèƒ½å˜æˆäº†ä¸€ä¸ªç³»ç»Ÿçº§åŠŸèƒ½ã€‚å…¶å®ƒåº”ç”¨å¯ä»¥è°ƒç”¨è¿™ä¸ªæ‹¦æˆªåå•ï¼Œä½†åªæœ‰ä¸ªåˆ«åº”ç”¨å¯ä»¥å†™å…¥ï¼ŒåŒ…æ‹¬æ‹¨å·åº”ç”¨ã€é»˜è®¤çš„çŸ­ä¿¡åº”ç”¨ç­‰ã€‚è¢«æ‹¦æˆªå·ç å°†ä¸ä¼šå‡ºçŽ°åœ¨æ¥ç”µè®°å½•ä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºçŽ°é€šçŸ¥ã€‚å¦å¤–ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡è´¦æˆ·ä½“ç³»å¤‡ä»½å’Œæ¢å¤è¿™ä¸ªæ‹¦æˆªåå•ï¼Œä»¥ä¾¿å¿«é€Ÿå¯¼å…¥å…¶å®ƒè®¾å¤‡æˆ–è´¦å·ã€‚ èœå•é”®å¿«é€Ÿåº”ç”¨åˆ‡æ¢ åŒå‡»èœå•é”®ï¼Œå°±èƒ½è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåº”ç”¨ã€‚æ­¤å¤–ï¼Œå¦‚æžœä½ ä¸åœåœ°ç‚¹å‡»èœå•é”®çš„è¯ï¼Œå°±ä¼šåœ¨æ‰€æœ‰åº”ç”¨ä¸­ä¸é—´æ–­åœ°è½®æ¢ï¼Œåº”ç”¨çª—å£ä¼šè‡ªåŠ¨æ”¾å¤§ï¼Œé¡¶éƒ¨è¿˜ä¼šå‡ºçŽ°å€’è®¡æ—¶æ¡ï¼Œåœæ­¢ç‚¹å‡»ä¸”å€’è®¡æ—¶ç»“æŸåŽï¼Œå½“å‰åº”ç”¨ä¼šè‡ªåŠ¨æ”¾å¤§å¹¶è¿”å›žåˆ°å‰å°ã€‚ Android8.0çš„æ­£å¼ç‰ˆ Android Oreoï¼ˆå¥¥åˆ©å¥¥ï¼‰1.é€šçŸ¥ä¸­å¿ƒ ç”¨æˆ·åœ¨é€šçŸ¥ç•Œé¢å¯ä»¥å‘çŽ°é¡¶éƒ¨çš„å¿«æ·é”®æœ‰äº†æ›´å……è£•çš„ç©ºé—´ï¼Œå¹¶ä¸”æ ¹æ®ç½‘ç»œå¤§æ•°æ®çš„ç”¨æˆ·ä½¿ç”¨é¢‘ç¹åº¦è°ƒæ•´äº†è¿™å‡ ä¸ªå¿«æ·é”®çš„é¡ºåºï¼›å¹¶ä¸”é•¿æŒ‰æŽ¨é€æ¶ˆæ¯å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¼€å…³ï¼Œæ“ä½œå®ƒå¯ä»¥å¼€å¯å’Œå…³é—­è¿™ä¸ªè¯¥åº”ç”¨çš„æœªæ¥æ‰€æœ‰é€šçŸ¥ã€‚ 2.è®¾ç½®èœå• åœ¨æ–°çš„AndroidOç³»ç»Ÿä¸­ï¼Œè®¾ç½®çš„ç•Œé¢æœ‰äº†å¤§å¹…å˜åŒ–ï¼Œä¸»èœå•çš„è¦†ç›–æ€§å˜å¾—æ›´å¹¿ï¼Œæ›´å¤šçš„åŠŸèƒ½å°†åœ¨å­èœå•ä¸­ä½“çŽ°ï¼Œå¹¶ä¸”åœ¨èœå•ç•Œé¢ä¸­é‡æ–°è®¾è®¡äº†å¾ˆå¤šå›¾æ ‡ã€‚ 3.PinnedShortcuts å®‰å“åˆ›é€ å‡ºäº†PinnedShortcutsåŠŸèƒ½ï¼Œç±»ä¼¼è‹¹æžœçš„3DTouchï¼Œé•¿æŒ‰ä¸€ä¸ªè½¯ä»¶åŽå¯ä»¥å¼¹å‡ºå­èœå•ï¼Œç„¶åŽå°±å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼å¿«æ·çš„ä½¿ç”¨è¯¥åº”ç”¨çš„éƒ¨åˆ†åŠŸèƒ½ã€‚ 4.å›¾æ ‡å½¢çŠ¶ æ–°çš„ç³»ç»Ÿä¸­å¼€å‘è€…å¯ä»¥ä½¿ç”¨ä¸åŒçš„åº”ç”¨å›¾æ ‡ï¼Œæ¯”å¦‚åœ†è§’çŸ©å½¢æˆ–è€…åœ†å½¢å›¾æ ‡ï¼Œä¸è¿‡æ‰€æœ‰çš„å›¾æ ‡éœ€è¦ä¿è¯æ˜¯åŒä¸€ä¸ªå½¢çŠ¶ï¼Œä¸èƒ½æœ‰ä¸€ä¸ªæ–¹ä¸€ä¸ªåœ†è¿™æ ·â€œä¸ªæ€§â€çš„æ ·å¼å‡ºçŽ°ã€‚ 5.åŽå°é™åˆ¶ AndroidOå°†è¿›ä¸€æ­¥ä¼˜åŒ–åŽå°ç¨‹åºï¼Œå‡å°‘åº”ç”¨åœ¨æ²¡å®Œå…¨é€€å‡ºåŽå ç”¨ç³»ç»Ÿçš„èµ„æºï¼Œå¹¶ä¸”å‡å°‘ç”µé‡çš„æ¶ˆè€—ã€‚ 6.å®‰è£…é™åˆ¶ æ–°ç³»ç»Ÿä¸­ç”¨æˆ·å¯ä»¥åœ¨æƒé™è®¾ç½®ä¸­æ·»åŠ å®‰è£…é™åˆ¶åŠŸèƒ½ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆçš„é¿å…å¸¦æœ‰ä¸­å›½ç‰¹è‰²çš„â€œå…¨å®¶æ¡¶â€è¡Œä¸ºã€‚ 7.TensorFlowLite è¿™ä¸ªæ–°åŠŸèƒ½å¹¶ä¸ä¼šç›´æŽ¥ä½“çŽ°åœ¨æ‰‹æœºå’Œç³»ç»Ÿä¸­ï¼Œå®ƒæ˜¯è°·æ­Œçš„ä¸€é¡¹æ–°æŠ€æœ¯ï¼Œç”¨æ¥æŠŠäººå·¥æ™ºèƒ½åœ¨æ›´å¤šçš„è½¯ä»¶ä¸Šç»§ç»­æ‹“å±•ï¼Œå¹¶æé«˜å·¥ä½œå¤„ç†çš„æ•ˆçŽ‡ï¼Œè®©ä½ çš„æ‰‹æœºæ›´â€œèªæ˜Žâ€ã€‚ 8.åˆ†å± åœ¨AndroidOä¸­ï¼Œåˆ†å±ç”»ä¸­ç”»åŠŸèƒ½å¾—åˆ°äº†å¼ºåŒ–ï¼Œå˜å¾—æ›´åŠ æµç•…ï¼Œè€Œä¸”æ‚¬æµ®çª—å¯ä»¥éšæ„æ‹–åŠ¨ä½ç½®ï¼Œç„¶åŽåœ¨ä¸»å±å¹•ä¸­ç»§ç»­å·¥ä½œ NotificationDots åœ¨è°·æ­Œçš„Pixelæ‰‹æœºä¸Šï¼Œå®‰å“8è¿˜æ–°åŠ äº†é€šçŸ¥åŠŸèƒ½Notification Dotsï¼Œä¼šæ ‡å‡ºç”¨æˆ·çš„è¡Œç¨‹ã€ä¿¡æ¯ç­‰ï¼Œæœ‰äº›é€šçŸ¥è¿˜å¯ä»¥è¢«è®¾å®šä¸ºç¨åŽæé†’ã€‚æ­¤å¤–é•¿æŒ‰æŸä¸ªåº”ç”¨å›¾æ ‡çŽ°åœ¨å¯ä»¥æ˜¾ç¤ºä¸€äº›ä¿¡æ¯ï¼Œä¸ŽiOSä¸Šçš„3D Touchç±»ä¼¼ï¼Œè¿™é¡¹åŠŸèƒ½åœ¨å®‰å“7.0ä¸Šå·²ç»æœ‰æ‰€ä½“çŽ° 10.SmartTextSelection ç³»ç»Ÿå°†ä¼šé¢„æµ‹ç”¨æˆ·å°†ä½¿ç”¨æŸäº›ç”µè¯æˆ–è€…å…¶ä»–é€‰é¡¹å‡ºçŽ°åœ¨å°†ä¼šç”¨åˆ°çš„åº”ç”¨ä¸­ï¼Œä¸¾ä¸ªä¾‹å­å°±æ˜¯å¦‚æžœé‚€è¯·æœ‹å‹æ¥åƒé¥­ï¼Œç³»ç»Ÿä¼šæ ¹æ®å‘é€çš„åœ°å€æ¥å¼€å¯åœ°å›¾å¹¶ä¸”å¯¼èˆª ã€‚ 11.è‡ªåŠ¨ä¿å­˜å¯†ç  è¿™ä¸ªåŠŸèƒ½å°†ä¼šä¿å­˜ç”¨æˆ·çš„éƒ¨åˆ†å¸å·å’Œå¯†ç ï¼Œç”¨äºŽåœ¨ç½‘ç«™æˆ–è€…åº”ç”¨ä¸­çš„å¿«é€Ÿç™»å½•ï¼Œæ•ˆçŽ‡æå‡äº†ä¸å°‘ ã€‚ 12.GooglePlayProtect è¿™ä¸ªåŠŸèƒ½ä¸»è¦ç”¨äºŽGooglePlayä¸­ï¼Œä¸‹è½½çš„åº”ç”¨å’Œæ¸¸æˆå°†ä¼šç»è¿‡å®ƒçš„æŽ’æŸ¥ï¼Œæ¥çœ‹çœ‹æ˜¯å¦æ˜¯æœ‰å®³ç”šè‡³æºå¸¦ç—…æ¯’çš„åº”ç”¨ï¼Œä¸è¿‡å›½å†…ç”¨æˆ·å¯èƒ½ä¸èƒ½è®¿é—®GooglePlay ã€‚ 13.åº”ç”¨åŠ é€Ÿ åœ¨AndroidOä¸­ï¼Œå¤§éƒ¨åˆ†åº”ç”¨çš„å¯åŠ¨é€Ÿåº¦å°†ä¼šå¿«ä¸Šä¸€å€ï¼Œè¿™ä¸ªè¦å½’åŠŸäºŽæ–°ç³»ç»Ÿçš„ä¼˜åŒ–ï¼Œä½¿åŽå°å ç”¨èµ„æºå‡å°‘ï¼Œå¹¶ä¸”å¯¹å¹¶å‘è¿›ç¨‹ç­‰é—®é¢˜çš„å¤„ç†æ›´åŠ å‡ºè‰²ï¼Œä¹Ÿæ˜¯ä¸ªç›¸å½“æœ‰ç”¨çš„åŠŸèƒ½ ã€‚ 14.å­—ä½“ä¼˜åŒ– AndroidOä¸­è°·æ­Œè¿˜å¢žåŠ äº†å¯¹ç³»ç»Ÿå­—ä½“çš„æ›´å¤šæ”¯æŒï¼Œå¼€å‘è€…å¯ä»¥è‡ªè¡Œæ›´æ”¹å­—ä½“æ ·å¼ï¼Œè®©ç”¨æˆ·æœ‰äº†æ›´å¤šå­—ä½“çš„é€‰æ‹© ã€‚ 15.è¡¨æƒ…ç¬¦å· å®‰å“8è¿˜å¸¦æ¥äº†ç¬¦åˆUnicode 10æ ‡å‡†çš„è¡¨æƒ…ç¬¦å·ï¼Œæ¯”åŽŸæ¥æ–°åŠ è¶…è¿‡60ä¸ªè¡¨æƒ…ç¬¦ï¼Œè¿™ä¹Ÿæ˜¯æ¯”è¾ƒæ˜Žæ˜¾çš„æ”¹å˜ä¹‹ä¸€ AndroidP 9.0æ–°åŠŸèƒ½åŒ…æ‹¬ï¼šè°·æ­Œç»Ÿä¸€æŽ¨é€å‡çº§ã€æ·±åº¦é›†æˆProject Trebleæ¨¡å¼ã€æ›´åŠ å°é—­ã€åŽŸç”Ÿæ”¯æŒé€šè¯å½•éŸ³ç­‰ã€‚ 1.å…¨é¢å±çš„å…¨é¢æ”¯æŒ 2.é€šçŸ¥æ çš„å¤šç§é€šçŸ¥ 3.å¤šæ‘„åƒå¤´çš„æ›´å¤šç”»é¢ 4.GPSå®šä½ä¹‹å¤–çš„WiFiå®šä½ 5.ç½‘ç»œè¿˜æœ‰ç¥žç»ç½‘ç»œ 6.Material Designè¿Žæ¥2.0æ—¶ä»£ æ–°è®¾è®¡ï¼š Android 9.0å°†ä¼šæ–°å¢žæ”¯æŒç±»ä¼¼äºŽiPhone Xçš„åˆ˜æµ·å±è®¾è®¡ï¼Œå…·ä½“ä½“çŽ°ä¸ºä¼˜åŒ–å±å¹•å†…å®¹æ˜¾ç¤ºï¼Œèƒ½å¤Ÿè®©ç³»ç»Ÿæˆ–è€…åº”ç”¨å……åˆ†åˆ©ç”¨æ•´å—å±å¹•ï¼Œå°¤å…¶æ˜¯ä¸¤åªâ€œçŒ«è€³æœµâ€ä½ç½®ã€‚åœ¨Android 9.0ç³»ç»Ÿå½“ä¸­ï¼Œè°·æ­Œè¿˜ä¼šè¿›ä¸€æ­¥å°†è°·æ­ŒåŠ©æ‰‹é›†æˆåˆ°åº”ç”¨ä¸­ã€è¿›ä¸€æ­¥ä¼˜åŒ–ç”µæ± ç»­èˆªã€æ”¯æŒå¤šå±å’Œå¯æŠ˜å å±ç­‰ã€‚ æ–°ç‰¹æ€§ï¼š å…¨å±€é»‘å¤œæ¨¡å¼ ä¸ºå…·å¤‡Always-on displayï¼ˆå±å¹•å¸¸æ˜¾ï¼‰åŠŸèƒ½æ‰‹æœºåŠ å…¥åŽŸç”Ÿçš„å¤©æ°”æ”¯æŒã€‚ AndroidQ 10.0æš—é»‘æ¨¡å¼ Android Q çš„æš—é»‘æ¨¡å¼å’Œ Android Pie çš„æš—é»‘æ¨¡å¼ä¸åŒï¼Œåœ¨ Android Q ä¸­ï¼Œæš—é»‘æ¨¡å¼é€‚ç”¨äºŽä»»ä½•åœ°æ–¹ï¼Œå¦‚æžœåº”ç”¨ä¸æ”¯æŒæš—é»‘æ¨¡å¼ï¼Œé‚£ä¹ˆç³»ç»Ÿå°†è‡ªåŠ¨è®¾ç½®ä¸€ä¸ªæš—é»‘æ¨¡å¼ã€‚ éšç§å¢žå¼º Android Q è¿˜å°†æ›´å¤šåœ°ä½¿ç”¨ Android Pie ä¸­æŽ¨å‡ºçš„éšç§åŠŸèƒ½ã€‚ åœ¨ Android Qä¸­ï¼Œæ‚¨å¯ä»¥é€‰æ‹©åº”ç”¨ç¨‹åºåœ¨åŽå°è¿è¡Œæ—¶æ˜¯å¦å¯ä»¥è®¿é—®è¯¥ä½ç½®ã€‚ è¿è¥å•†é”å®š å¦‚æžœä½ ä»Žè¿è¥å•†é‚£é‡Œè´­ä¹°é”å®šçš„ Android Q è®¾å¤‡ï¼Œä»–ä»¬å°†æœ‰èƒ½åŠ›é˜»æ­¢ä½ ä½¿ç”¨å…¶ä»–ç‰¹å®šè¿è¥å•†çš„SIMå¡ã€‚ å¤šæ˜¾ç¤ºå™¨æ”¯æŒ ç³»ç»Ÿåº•å±‚æ”¯æŒå°†è®¾å¤‡è¿žæŽ¥åˆ°å¤–æŽ¥çš„æ˜¾ç¤ºå™¨ï¼Œå¹¶å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªå±å¹•æ˜¾ç¤ºã€‚å¦‚æ‰‹æœº/å¹³æ¿ç”µè„‘æˆ–ç‹¬ç«‹æ˜¾ç¤ºå™¨ï¼Œå®žé™…æ•ˆæžœå¯ä»¥å‚è€ƒå·²ç»ä»Žç¬¬ä¸‰æ–¹èŽ·å¾—æ”¯æŒçš„åŽä¸ºMate 10ã€ä¸‰æ˜ŸGalaxy Note 9ã€‚ Vulkan API ç³»ç»Ÿåº•å±‚æ”¯æŒç”¨äºŽ UI å‘ˆçŽ°çš„ Vulkan API æŽ¥å£è§„èŒƒï¼ŒåŸºäºŽè¿™é¡¹æŠ€æœ¯åŽŸç†çš„æ›´å¤šæ‰©å±•ï¼Œå°†å®Œæˆæ›´å¼ºçš„ç³»ç»ŸåŠç¨‹åºä¼˜åŒ–ï¼Œä»¥æ›´å¥½çš„èŽ·å¾—å»¶é•¿ç”µæ± å¯¿å‘½ã€å®žçŽ°æ›´æµç•…çš„åŠ¨ç”»å±•çŽ°å’Œèœå•è½¬æ¢æ•ˆæžœã€‚ é¢éƒ¨è¯†åˆ« XDA å›¢é˜Ÿå‘çŽ°äº†ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²è¡¨æ˜Ž Android 10 å°†å…·æœ‰å†…éƒ¨é¢éƒ¨è¯†åˆ«åŠŸèƒ½ã€‚ è¿™æ„å‘³ç€è°·æ­Œå®˜æ–¹æ”¯æŒé¢éƒ¨è§£é”ç³»ç»Ÿã€‚ æ¡Œé¢æ¨¡å¼ Android Q å°†æ”¯æŒæ¡Œé¢æ¨¡å¼ï¼Œç±»ä¼¼ä¸‰æ˜Ÿ Dex å’ŒåŽä¸ºçš„æŠ•å½±æ¨¡å¼ã€‚å®ƒæä¾›ç±»ä¼¼ä¸€ä¸ªç±»ä¼¼äºŽ PC çš„ä½“éªŒï¼Œä½†æ˜¯è¿œè¿œä¸èƒ½ä»£æ›¿ PCã€‚ å±å¹•å½•åˆ¶ å¾—ç›ŠäºŽOPPOã€ä¸‰æ˜Ÿå’ŒåŽä¸ºç­‰ç¬¬ä¸‰æ–¹OEMåŽ‚å•†ï¼Œæˆ‘ä»¬ä»¥å‰åœ¨å®‰å“æ‰‹æœºä¸Šè§è¿‡å½•å±åŠŸèƒ½ã€‚é—æ†¾çš„æ˜¯ï¼ŒåŽŸç”Ÿå®‰å“ç³»ç»Ÿè¿˜ç¼ºå°‘è¿™ä¸ªåŠŸèƒ½ï¼Œä½†çœ‹èµ·æ¥æˆ‘ä»¬åœ¨Android Qç³»ç»Ÿä¸Šç»ˆäºŽè¦çœ‹åˆ°å®ƒäº†ã€‚ æ›´å®‰å…¨Smart Lock è°·æ­Œæ—©åœ¨Android Lollipopæ—¶ä»£å°±å¼•å…¥äº†Smart LockåŠŸèƒ½ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯å½“ä½ çš„æ‰‹æœºä¸åœ¨èº«è¾¹æ—¶ï¼Œä½ å¯ä»¥æŠŠè¿œç¨‹å®ƒé”èµ·æ¥ã€‚è¿™ä¸ªåŠŸèƒ½è¿˜å¯ä»¥è®©ç”¨æˆ·æ ¹æ®ä½ç½®(æ¯”å¦‚å®¶å’ŒäºŒå…¬å¸)ã€ä¸åŒçš„è“ç‰™è®¾å¤‡(æ¯”å¦‚è¿åŠ¨æ‰‹çŽ¯)ï¼Œæˆ–è€…ä¸åŒçš„ä½¿ç”¨æ—¶é—´æ¥è‡ªåŠ¨è§£é”è®¾å¤‡ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidæƒé™å¤§å…¨]]></title>
    <url>%2Fposts%2Fcf915ee9.html</url>
    <content type="text"><![CDATA[æ¦‚è¿°Androidå®‰å…¨æž¶æž„è§„å®šï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œä»»ä½•åº”ç”¨éƒ½æ²¡æœ‰æƒé™æ‰§è¡Œå¯¹å…¶ä»–åº”ç”¨ã€æ“ä½œç³»ç»Ÿæˆ–ç”¨æˆ·æœ‰ä¸åˆ©å½±å“çš„ä»»ä½•æ“ä½œã€‚è¿™åŒ…æ‹¬è¯»å†™ç”¨æˆ·çš„ç§æœ‰æ•°æ®ï¼ˆå¦‚è”ç³»äººæˆ–ç”µå­é‚®ä»¶ç­‰ï¼‰ã€è¯»å†™å…¶ä»–åº”ç”¨çš„æ–‡ä»¶ã€æ‰§è¡Œç½‘ç»œè®¿é—®ã€ä½¿è®¾å¤‡ä¿æŒå”¤é†’çŠ¶æ€ç­‰ç­‰ã€‚å¦‚æžœè¦ä½¿ç”¨è¿™äº›å—ä¿æŠ¤çš„è®¾å¤‡åŠŸèƒ½ï¼Œé¦–å…ˆè¦åœ¨åº”ç”¨çš„æ¸…å•æ–‡ä»¶(AndroidManifest.xml)ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ª æ ‡è®°ï¼š 12345&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.android.app.myapp" &gt; &lt;uses-permission android:name="android.permission.RECEIVE_SMS" /&gt; ...&lt;/manifest&gt; æ¦‚è¿° æƒé™ è¯´æ˜Ž è®¿é—®ç™»è®°å±žæ€§ android.permission.ACCESS_CHECKIN_PROPERTIES è¯»å–æˆ–å†™å…¥ç™»è®°check-inæ•°æ®åº“å±žæ€§è¡¨çš„æƒé™ èŽ·å–é”™ç•¥ä½ç½® android.permission.ACCESS_COARSE_LOCATION é€šè¿‡WiFiæˆ–ç§»åŠ¨åŸºç«™çš„æ–¹å¼èŽ·å–ç”¨æˆ·é”™ç•¥çš„ç»çº¬åº¦ä¿¡æ¯ï¼Œå®šä½ç²¾åº¦å¤§æ¦‚è¯¯å·®åœ¨30~1500ç±³ èŽ·å–ç²¾ç¡®ä½ç½® android.permission.ACCESS_FINE_LOCATION é€šè¿‡GPSèŠ¯ç‰‡æŽ¥æ”¶å«æ˜Ÿçš„å®šä½ä¿¡æ¯ï¼Œå®šä½ç²¾åº¦è¾¾10ç±³ä»¥å†… è®¿é—®å®šä½é¢å¤–å‘½ä»¤ android.permission.ACCESS_LOCATION_EXTRA_COMMANDS å…è®¸ç¨‹åºè®¿é—®é¢å¤–çš„å®šä½æä¾›è€…æŒ‡ä»¤ èŽ·å–æ¨¡æ‹Ÿå®šä½ä¿¡æ¯ android.permission.ACCESS_MOCK_LOCATION èŽ·å–æ¨¡æ‹Ÿå®šä½ä¿¡æ¯ï¼Œä¸€èˆ¬ç”¨äºŽå¸®åŠ©å¼€å‘è€…è°ƒè¯•åº”ç”¨ èŽ·å–ç½‘ç»œçŠ¶æ€ android.permission.ACCESS_NETWORK_STATE èŽ·å–ç½‘ç»œä¿¡æ¯çŠ¶æ€ï¼Œå¦‚å½“å‰çš„ç½‘ç»œè¿žæŽ¥æ˜¯å¦æœ‰æ•ˆ è®¿é—®Surface Flinger android.permission.ACCESS_SURFACE_FLINGER Androidå¹³å°ä¸Šåº•å±‚çš„å›¾å½¢æ˜¾ç¤ºæ”¯æŒï¼Œä¸€èˆ¬ç”¨äºŽæ¸¸æˆæˆ–ç…§ç›¸æœºé¢„è§ˆç•Œé¢å’Œåº•å±‚æ¨¡å¼çš„å±å¹•æˆªå›¾ èŽ·å–WiFiçŠ¶æ€ android.permission.ACCESS_WIFI_STATE èŽ·å–å½“å‰WiFiæŽ¥å…¥çš„çŠ¶æ€ä»¥åŠWLANçƒ­ç‚¹çš„ä¿¡æ¯ è´¦æˆ·ç®¡ç† android.permission.ACCOUNT_MANAGER èŽ·å–è´¦æˆ·éªŒè¯ä¿¡æ¯ï¼Œä¸»è¦ä¸ºGMailè´¦æˆ·ä¿¡æ¯ï¼Œåªæœ‰ç³»ç»Ÿçº§è¿›ç¨‹æ‰èƒ½è®¿é—®çš„æƒé™ éªŒè¯è´¦æˆ· android.permission.AUTHENTICATE_ACCOUNTS å…è®¸ä¸€ä¸ªç¨‹åºé€šè¿‡è´¦æˆ·éªŒè¯æ–¹å¼è®¿é—®è´¦æˆ·ç®¡ç†ACCOUNT_MANAGERç›¸å…³ä¿¡æ¯ ç”µé‡ç»Ÿè®¡ android.permission.BATTERY_STATS èŽ·å–ç”µæ± ç”µé‡ç»Ÿè®¡ä¿¡æ¯ ç»‘å®šå°æ’ä»¶ android.permission.BIND_APPWIDGET å…è®¸ä¸€ä¸ªç¨‹åºå‘Šè¯‰appWidgetæœåŠ¡éœ€è¦è®¿é—®å°æ’ä»¶çš„æ•°æ®åº“ï¼Œåªæœ‰éžå¸¸å°‘çš„åº”ç”¨æ‰ç”¨åˆ°æ­¤æƒé™ ç»‘å®šè®¾å¤‡ç®¡ç† android.permission.BIND_DEVICE_ADMIN è¯·æ±‚ç³»ç»Ÿç®¡ç†å‘˜æŽ¥æ”¶è€…receiverï¼Œåªæœ‰ç³»ç»Ÿæ‰èƒ½ä½¿ç”¨ ç»‘å®šè¾“å…¥æ³• android.permission.BIND_INPUT_METHOD è¯·æ±‚InputMethodServiceæœåŠ¡ï¼Œåªæœ‰ç³»ç»Ÿæ‰èƒ½ä½¿ç”¨ ç»‘å®šRemoteView android.permission.BIND_REMOTEVIEWS å¿…é¡»é€šè¿‡RemoteViewsServiceæœåŠ¡æ¥è¯·æ±‚ï¼Œåªæœ‰ç³»ç»Ÿæ‰èƒ½ç”¨ ç»‘å®šå£çº¸ android.permission.BIND_WALLPAPER å¿…é¡»é€šè¿‡WallpaperServiceæœåŠ¡æ¥è¯·æ±‚ï¼Œåªæœ‰ç³»ç»Ÿæ‰èƒ½ç”¨ ä½¿ç”¨è“ç‰™ android.permission.BLUETOOTH å…è®¸ç¨‹åºè¿žæŽ¥é…å¯¹è¿‡çš„è“ç‰™è®¾å¤‡ è“ç‰™ç®¡ç† android.permission.BLUETOOTH_ADMIN å…è®¸ç¨‹åºè¿›è¡Œå‘çŽ°å’Œé…å¯¹æ–°çš„è“ç‰™è®¾å¤‡ å˜æˆç –å¤´ android.permission.BRICK èƒ½å¤Ÿç¦ç”¨æ‰‹æœºï¼Œéžå¸¸å±é™©ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯è®©æ‰‹æœºå˜æˆç –å¤´ åº”ç”¨åˆ é™¤æ—¶å¹¿æ’­ android.permission.BROADCAST_PACKAGE_REMOVED å½“ä¸€ä¸ªåº”ç”¨åœ¨åˆ é™¤æ—¶è§¦å‘ä¸€ä¸ªå¹¿æ’­ æ”¶åˆ°çŸ­ä¿¡æ—¶å¹¿æ’­ android.permission.BROADCAST_SMS å½“æ”¶åˆ°çŸ­ä¿¡æ—¶è§¦å‘ä¸€ä¸ªå¹¿æ’­ è¿žç»­å¹¿æ’­ android.permission.BROADCAST_STICKY å…è®¸ä¸€ä¸ªç¨‹åºæ”¶åˆ°å¹¿æ’­åŽå¿«é€Ÿæ”¶åˆ°ä¸‹ä¸€ä¸ªå¹¿æ’­ WAP PUSHå¹¿æ’­ android.permission.BROADCAST_WAP_PUSH WAP PUSHæœåŠ¡æ”¶åˆ°åŽè§¦å‘ä¸€ä¸ªå¹¿æ’­ æ‹¨æ‰“ç”µè¯ android.permission.CALL_PHONE å…è®¸ç¨‹åºä»Žéžç³»ç»Ÿæ‹¨å·å™¨é‡Œè¾“å…¥ç”µè¯å·ç  é€šè¯æƒé™ android.permission.CALL_PRIVILEGED å…è®¸ç¨‹åºæ‹¨æ‰“ç”µè¯ï¼Œæ›¿æ¢ç³»ç»Ÿçš„æ‹¨å·å™¨ç•Œé¢ æ‹ç…§æƒé™ android.permission.CAMERA å…è®¸è®¿é—®æ‘„åƒå¤´è¿›è¡Œæ‹ç…§ æ”¹å˜ç»„ä»¶çŠ¶æ€ android.permission.CHANGE_COMPONENT_ENABLED_STATE æ”¹å˜ç»„ä»¶æ˜¯å¦å¯ç”¨çŠ¶æ€ æ”¹å˜é…ç½® android.permission.CHANGE_CONFIGURATION å…è®¸å½“å‰åº”ç”¨æ”¹å˜é…ç½®ï¼Œå¦‚å®šä½ æ”¹å˜ç½‘ç»œçŠ¶æ€ android.permission.CHANGE_NETWORK_STATE æ”¹å˜ç½‘ç»œçŠ¶æ€å¦‚æ˜¯å¦èƒ½è”ç½‘ æ”¹å˜WiFiå¤šæ’­çŠ¶æ€ android.permission.CHANGE_WIFI_MULTICAST_STATE æ”¹å˜WiFiå¤šæ’­çŠ¶æ€ æ”¹å˜WiFiçŠ¶æ€ android.permission.CHANGE_WIFI_STATE æ”¹å˜WiFiçŠ¶æ€ æ¸…é™¤åº”ç”¨ç¼“å­˜ android.permission.CLEAR_APP_CACHE æ¸…é™¤åº”ç”¨ç¼“å­˜ æ¸…é™¤ç”¨æˆ·æ•°æ® android.permission.CLEAR_APP_USER_DATA æ¸…é™¤åº”ç”¨çš„ç”¨æˆ·æ•°æ® åº•å±‚è®¿é—®æƒé™ android.permission.CWJ_GROUP å…è®¸CWJè´¦æˆ·ç»„è®¿é—®åº•å±‚ä¿¡æ¯ æ‰‹æœºä¼˜åŒ–å¤§å¸ˆæ‰©å±•æƒé™ android.permission.CELL_PHONE_MASTER_EX æ‰‹æœºä¼˜åŒ–å¤§å¸ˆæ‰©å±•æƒé™ æŽ§åˆ¶å®šä½æ›´æ–° android.permission.CONTROL_LOCATION_UPDATES å…è®¸èŽ·å¾—ç§»åŠ¨ç½‘ç»œå®šä½ä¿¡æ¯æ”¹å˜ åˆ é™¤ç¼“å­˜æ–‡ä»¶ android.permission.DELETE_CACHE_FILES å…è®¸åº”ç”¨åˆ é™¤ç¼“å­˜æ–‡ä»¶ åˆ é™¤åº”ç”¨ android.permission.DELETE_PACKAGES å…è®¸ç¨‹åºåˆ é™¤åº”ç”¨ ç”µæºç®¡ç† android.permission.DEVICE_POWER å…è®¸è®¿é—®åº•å±‚ç”µæºç®¡ç† åº”ç”¨è¯Šæ–­ android.permission.DIAGNOSTIC å…è®¸ç¨‹åºåˆ°RWåˆ°è¯Šæ–­èµ„æº ç¦ç”¨é”®ç›˜é” android.permission.DISABLE_KEYGUARD å…è®¸ç¨‹åºç¦ç”¨é”®ç›˜é” è½¬å­˜ç³»ç»Ÿä¿¡æ¯ android.permission.DUMP å…è®¸ç¨‹åºèŽ·å–ç³»ç»Ÿdumpä¿¡æ¯ä»Žç³»ç»ŸæœåŠ¡ çŠ¶æ€æ æŽ§åˆ¶ android.permission.EXPAND_STATUS_BAR å…è®¸ç¨‹åºæ‰©å±•æˆ–æ”¶ç¼©çŠ¶æ€æ  å·¥åŽ‚æµ‹è¯•æ¨¡å¼ android.permission.FACTORY_TEST å…è®¸ç¨‹åºè¿è¡Œå·¥åŽ‚æµ‹è¯•æ¨¡å¼ ä½¿ç”¨é—ªå…‰ç¯ android.permission.FLASHLIGHT å…è®¸è®¿é—®é—ªå…‰ç¯ å¼ºåˆ¶åŽé€€ android.permission.FORCE_BACK å…è®¸ç¨‹åºå¼ºåˆ¶ä½¿ç”¨backåŽé€€æŒ‰é”®ï¼Œæ— è®ºActivityæ˜¯å¦åœ¨é¡¶å±‚ è®¿é—®è´¦æˆ·Gmailåˆ—è¡¨ android.permission.GET_ACCOUNTS è®¿é—®GMailè´¦æˆ·åˆ—è¡¨ èŽ·å–åº”ç”¨å¤§å° android.permission.GET_PACKAGE_SIZE èŽ·å–åº”ç”¨çš„æ–‡ä»¶å¤§å° èŽ·å–ä»»åŠ¡ä¿¡æ¯ android.permission.GET_TASKS å…è®¸ç¨‹åºèŽ·å–å½“å‰æˆ–æœ€è¿‘è¿è¡Œçš„åº”ç”¨ å…è®¸å…¨å±€æœç´¢ android.permission.GLOBAL_SEARCH å…è®¸ç¨‹åºä½¿ç”¨å…¨å±€æœç´¢åŠŸèƒ½ ç¡¬ä»¶æµ‹è¯• android.permission.HARDWARE_TEST è®¿é—®ç¡¬ä»¶è¾…åŠ©è®¾å¤‡ï¼Œç”¨äºŽç¡¬ä»¶æµ‹è¯• æ³¨å°„äº‹ä»¶ android.permission.INJECT_EVENTS å…è®¸è®¿é—®æœ¬ç¨‹åºçš„åº•å±‚äº‹ä»¶ï¼ŒèŽ·å–æŒ‰é”®ã€è½¨è¿¹çƒçš„äº‹ä»¶æµ å®‰è£…å®šä½æä¾› android.permission.INSTALL_LOCATION_PROVIDER å®‰è£…å®šä½æä¾› å®‰è£…åº”ç”¨ç¨‹åº android.permission.INSTALL_PACKAGES å…è®¸ç¨‹åºå®‰è£…åº”ç”¨ å†…éƒ¨ç³»ç»Ÿçª—å£ android.permission.INTERNAL_SYSTEM_WINDOW å…è®¸ç¨‹åºæ‰“å¼€å†…éƒ¨çª—å£ï¼Œä¸å¯¹ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºå¼€æ”¾æ­¤æƒé™ è®¿é—®ç½‘ç»œ android.permission.INTERNET è®¿é—®ç½‘ç»œè¿žæŽ¥ï¼Œå¯èƒ½äº§ç”ŸGPRSæµé‡ ç»“æŸåŽå°è¿›ç¨‹ android.permission.KILL_BACKGROUND_PROCESSES å…è®¸ç¨‹åºè°ƒç”¨killBackgroundProcesses(String).æ–¹æ³•ç»“æŸåŽå°è¿›ç¨‹ ç®¡ç†è´¦æˆ· android.permission.MANAGE_ACCOUNTS å…è®¸ç¨‹åºç®¡ç†AccountManagerä¸­çš„è´¦æˆ·åˆ—è¡¨ ç®¡ç†ç¨‹åºå¼•ç”¨ android.permission.MANAGE_APP_TOKENS ç®¡ç†åˆ›å»ºã€æ‘§æ¯ã€Zè½´é¡ºåºï¼Œä»…ç”¨äºŽç³»ç»Ÿ é«˜çº§æƒé™ android.permission.MTWEAK_USER å…è®¸mTweakç”¨æˆ·è®¿é—®é«˜çº§ç³»ç»Ÿæƒé™ ç¤¾åŒºæƒé™ android.permission.MTWEAK_FORUM å…è®¸ä½¿ç”¨mTweakç¤¾åŒºæƒé™ è½¯æ ¼å¼åŒ– android.permission.MASTER_CLEAR å…è®¸ç¨‹åºæ‰§è¡Œè½¯æ ¼å¼åŒ–ï¼Œåˆ é™¤ç³»ç»Ÿé…ç½®ä¿¡æ¯ ä¿®æ”¹å£°éŸ³è®¾ç½® android.permission.MODIFY_AUDIO_SETTINGS ä¿®æ”¹å£°éŸ³è®¾ç½®ä¿¡æ¯ ä¿®æ”¹ç”µè¯çŠ¶æ€ android.permission.MODIFY_PHONE_STATE ä¿®æ”¹ç”µè¯çŠ¶æ€ï¼Œå¦‚é£žè¡Œæ¨¡å¼ï¼Œä½†ä¸åŒ…å«æ›¿æ¢ç³»ç»Ÿæ‹¨å·å™¨ç•Œé¢ æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿ android.permission.MOUNT_FORMAT_FILESYSTEMS æ ¼å¼åŒ–å¯ç§»åŠ¨æ–‡ä»¶ç³»ç»Ÿï¼Œæ¯”å¦‚æ ¼å¼åŒ–æ¸…ç©ºSDå¡ æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ android.permission.MOUNT_UNMOUNT_FILESYSTEMS æŒ‚è½½ã€åæŒ‚è½½å¤–éƒ¨æ–‡ä»¶ç³»ç»Ÿ å…è®¸NFCé€šè®¯ android.permission.NFC å…è®¸ç¨‹åºæ‰§è¡ŒNFCè¿‘è·ç¦»é€šè®¯æ“ä½œï¼Œç”¨äºŽç§»åŠ¨æ”¯æŒ æ°¸ä¹…Activity android.permission.PERSISTENT_ACTIVITY åˆ›å»ºä¸€ä¸ªæ°¸ä¹…çš„Activityï¼Œè¯¥åŠŸèƒ½æ ‡è®°ä¸ºå°†æ¥å°†è¢«ç§»é™¤ å¤„ç†æ‹¨å‡ºç”µè¯ android.permission.PROCESS_OUTGOING_CALLS å…è®¸ç¨‹åºç›‘è§†ï¼Œä¿®æ”¹æˆ–æ”¾å¼ƒæ’­å‡ºç”µè¯ è¯»å–æ—¥ç¨‹æé†’ android.permission.READ_CALENDAR å…è®¸ç¨‹åºè¯»å–ç”¨æˆ·çš„æ—¥ç¨‹ä¿¡æ¯ è¯»å–è”ç³»äºº android.permission.READ_CONTACTS å…è®¸åº”ç”¨è®¿é—®è”ç³»äººé€šè®¯å½•ä¿¡æ¯ å±å¹•æˆªå›¾ android.permission.READ_FRAME_BUFFER è¯»å–å¸§ç¼“å­˜ç”¨äºŽå±å¹•æˆªå›¾ è¯»å–æ”¶è—å¤¹å’ŒåŽ†å²è®°å½• com.android.browser.permission.READ_HISTORY_BOOKMARKS è¯»å–æµè§ˆå™¨æ”¶è—å¤¹å’ŒåŽ†å²è®°å½• è¯»å–è¾“å…¥çŠ¶æ€ android.permission.READ_INPUT_STATE è¯»å–å½“å‰é”®çš„è¾“å…¥çŠ¶æ€ï¼Œä»…ç”¨äºŽç³»ç»Ÿ è¯»å–ç³»ç»Ÿæ—¥å¿— android.permission.READ_LOGS è¯»å–ç³»ç»Ÿåº•å±‚æ—¥å¿— è¯»å–ç”µè¯çŠ¶æ€ android.permission.READ_PHONE_STATE è®¿é—®ç”µè¯çŠ¶æ€ è¯»å–çŸ­ä¿¡å†…å®¹ android.permission.READ_SMS è¯»å–çŸ­ä¿¡å†…å®¹ è¯»å–åŒæ­¥è®¾ç½® android.permission.READ_SYNC_SETTINGS è¯»å–åŒæ­¥è®¾ç½®ï¼Œè¯»å–Googleåœ¨çº¿åŒæ­¥è®¾ç½® è¯»å–åŒæ­¥çŠ¶æ€ android.permission.READ_SYNC_STATS è¯»å–åŒæ­¥çŠ¶æ€ï¼ŒèŽ·å¾—Googleåœ¨çº¿åŒæ­¥çŠ¶æ€ é‡å¯è®¾å¤‡ android.permission.REBOOT å…è®¸ç¨‹åºé‡æ–°å¯åŠ¨è®¾å¤‡ å¼€æœºè‡ªåŠ¨å…è®¸ android.permission.RECEIVE_BOOT_COMPLETED å…è®¸ç¨‹åºå¼€æœºè‡ªåŠ¨è¿è¡Œ æŽ¥æ”¶å½©ä¿¡ android.permission.RECEIVE_MMS æŽ¥æ”¶å½©ä¿¡ æŽ¥æ”¶çŸ­ä¿¡ android.permission.RECEIVE_SMS æŽ¥æ”¶çŸ­ä¿¡ æŽ¥æ”¶Wap Push android.permission.RECEIVE_WAP_PUSH æŽ¥æ”¶WAP PUSHä¿¡æ¯ å½•éŸ³ android.permission.RECORD_AUDIO å½•åˆ¶å£°éŸ³é€šè¿‡æ‰‹æœºæˆ–è€³æœºçš„éº¦å…‹ æŽ’åºç³»ç»Ÿä»»åŠ¡ android.permission.REORDER_TASKS é‡æ–°æŽ’åºç³»ç»ŸZè½´è¿è¡Œä¸­çš„ä»»åŠ¡ ç»“æŸç³»ç»Ÿä»»åŠ¡ android.permission.RESTART_PACKAGES ç»“æŸä»»åŠ¡é€šè¿‡restartPackage(String)æ–¹æ³•ï¼Œè¯¥æ–¹å¼å°†åœ¨å¤–æ¥æ”¾å¼ƒ å‘é€çŸ­ä¿¡ android.permission.SEND_SMS å‘é€çŸ­ä¿¡ è®¾ç½®Activityè§‚å¯Ÿå™¨ android.permission.SET_ACTIVITY_WATCHER è®¾ç½®Activityè§‚å¯Ÿå™¨ä¸€èˆ¬ç”¨äºŽmonkeyæµ‹è¯• è®¾ç½®é—¹é“ƒæé†’ com.android.alarm.permission.SET_ALARM è®¾ç½®é—¹é“ƒæé†’ è®¾ç½®æ€»æ˜¯é€€å‡º android.permission.SET_ALWAYS_FINISH è®¾ç½®ç¨‹åºåœ¨åŽå°æ˜¯å¦æ€»æ˜¯é€€å‡º è®¾ç½®åŠ¨ç”»ç¼©æ”¾ android.permission.SET_ANIMATION_SCALE è®¾ç½®å…¨å±€åŠ¨ç”»ç¼©æ”¾ è®¾ç½®è°ƒè¯•ç¨‹åº android.permission.SET_DEBUG_APP è®¾ç½®è°ƒè¯•ç¨‹åºï¼Œä¸€èˆ¬ç”¨äºŽå¼€å‘ è®¾ç½®å±å¹•æ–¹å‘ android.permission.SET_ORIENTATION è®¾ç½®å±å¹•æ–¹å‘ä¸ºæ¨ªå±æˆ–æ ‡å‡†æ–¹å¼æ˜¾ç¤ºï¼Œä¸ç”¨äºŽæ™®é€šåº”ç”¨ è®¾ç½®åº”ç”¨å‚æ•° android.permission.SET_PREFERRED_APPLICATIONS è®¾ç½®åº”ç”¨çš„å‚æ•°ï¼Œå·²ä¸å†å·¥ä½œå…·ä½“æŸ¥çœ‹addPackageToPreferred(String)ä»‹ç» è®¾ç½®è¿›ç¨‹é™åˆ¶ android.permission.SET_PROCESS_LIMIT å…è®¸ç¨‹åºè®¾ç½®æœ€å¤§çš„è¿›ç¨‹æ•°é‡çš„é™åˆ¶ è®¾ç½®ç³»ç»Ÿæ—¶é—´ android.permission.SET_TIME è®¾ç½®ç³»ç»Ÿæ—¶é—´ è®¾ç½®ç³»ç»Ÿæ—¶åŒº android.permission.SET_TIME_ZONE è®¾ç½®ç³»ç»Ÿæ—¶åŒº è®¾ç½®æ¡Œé¢å£çº¸ android.permission.SET_WALLPAPER è®¾ç½®æ¡Œé¢å£çº¸ è®¾ç½®å£çº¸å»ºè®® android.permission.SET_WALLPAPER_HINTS è®¾ç½®å£çº¸å»ºè®® å‘é€æ°¸ä¹…è¿›ç¨‹ä¿¡å· android.permission.SIGNAL_PERSISTENT_PROCESSES å‘é€ä¸€ä¸ªæ°¸ä¹…çš„è¿›ç¨‹ä¿¡å· çŠ¶æ€æ æŽ§åˆ¶ android.permission.STATUS_BAR å…è®¸ç¨‹åºæ‰“å¼€ã€å…³é—­ã€ç¦ç”¨çŠ¶æ€æ  è®¿é—®è®¢é˜…å†…å®¹ android.permission.SUBSCRIBED_FEEDS_READ è®¿é—®è®¢é˜…ä¿¡æ¯çš„æ•°æ®åº“ å†™å…¥è®¢é˜…å†…å®¹ android.permission.SUBSCRIBED_FEEDS_WRITE å†™å…¥æˆ–ä¿®æ”¹è®¢é˜…å†…å®¹çš„æ•°æ®åº“ æ˜¾ç¤ºç³»ç»Ÿçª—å£ android.permission.SYSTEM_ALERT_WINDOW æ˜¾ç¤ºç³»ç»Ÿçª—å£ æ›´æ–°è®¾å¤‡çŠ¶æ€ android.permission.UPDATE_DEVICE_STATS æ›´æ–°è®¾å¤‡çŠ¶æ€ ä½¿ç”¨è¯ä¹¦ android.permission.USE_CREDENTIALS å…è®¸ç¨‹åºè¯·æ±‚éªŒè¯ä»ŽAccountManager ä½¿ç”¨SIPè§†é¢‘ android.permission.USE_SIP å…è®¸ç¨‹åºä½¿ç”¨SIPè§†é¢‘æœåŠ¡ ä½¿ç”¨æŒ¯åŠ¨ android.permission.VIBRATE å…è®¸æŒ¯åŠ¨ å”¤é†’é”å®š android.permission.WAKE_LOCK å…è®¸ç¨‹åºåœ¨æ‰‹æœºå±å¹•å…³é—­åŽåŽå°è¿›ç¨‹ä»ç„¶è¿è¡Œ å†™å…¥GPRSæŽ¥å…¥ç‚¹è®¾ç½® android.permission.WRITE_APN_SETTINGS å†™å…¥ç½‘ç»œGPRSæŽ¥å…¥ç‚¹è®¾ç½® å†™å…¥æ—¥ç¨‹æé†’ android.permission.WRITE_CALENDAR å†™å…¥æ—¥ç¨‹ï¼Œä½†ä¸å¯è¯»å– å†™å…¥è”ç³»äºº android.permission.WRITE_CONTACTS å†™å…¥è”ç³»äººï¼Œä½†ä¸å¯è¯»å– å†™å…¥å¤–éƒ¨å­˜å‚¨ android.permission.WRITE_EXTERNAL_STORAGE å…è®¸ç¨‹åºå†™å…¥å¤–éƒ¨å­˜å‚¨ï¼Œå¦‚SDå¡ä¸Šå†™æ–‡ä»¶ å†™å…¥Googleåœ°å›¾æ•°æ® android.permission.WRITE_GSERVICES å…è®¸ç¨‹åºå†™å…¥Google MapæœåŠ¡æ•°æ® å†™å…¥æ”¶è—å¤¹å’ŒåŽ†å²è®°å½• com.android.browser.permission.WRITE_HISTORY_BOOKMARKS å†™å…¥æµè§ˆå™¨åŽ†å²è®°å½•æˆ–æ”¶è—å¤¹ï¼Œä½†ä¸å¯è¯»å– è¯»å†™ç³»ç»Ÿæ•æ„Ÿè®¾ç½® android.permission.WRITE_SECURE_SETTINGS å…è®¸ç¨‹åºè¯»å†™ç³»ç»Ÿå®‰å…¨æ•æ„Ÿçš„è®¾ç½®é¡¹ è¯»å†™ç³»ç»Ÿè®¾ç½® android.permission.WRITE_SETTINGS å…è®¸è¯»å†™ç³»ç»Ÿè®¾ç½®é¡¹ ç¼–å†™çŸ­ä¿¡ android.permission.WRITE_SMS å…è®¸ç¼–å†™çŸ­ä¿¡ å†™å…¥åœ¨çº¿åŒæ­¥è®¾ç½® android.permission.WRITE_SYNC_SETTINGS å†™å…¥Googleåœ¨çº¿åŒæ­¥è®¾ç½®]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>æƒé™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Viewçš„ç»˜åˆ¶æµç¨‹]]></title>
    <url>%2Fposts%2Fbfd836fe.html</url>
    <content type="text"><![CDATA[Android ä¸­ Activity æ˜¯ä½œä¸ºåº”ç”¨ç¨‹åºçš„è½½ä½“å­˜åœ¨ï¼Œä»£è¡¨ç€ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ç•Œé¢ï¼Œæä¾›äº†ä¸€ä¸ªçª—å£æ¥ç»˜åˆ¶å„ç§è§†å›¾ï¼Œå½“ Activity å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡ setContentView æ–¹æ³•æ¥è®¾ç½®ä¸€ä¸ªå†…å®¹è§†å›¾ï¼Œè¿™ä¸ªå†…å®¹è§†å›¾å°±æ˜¯ç”¨æˆ·çœ‹åˆ°çš„ç•Œé¢ã€‚ PhoneWindow æ˜¯ Android ç³»ç»Ÿä¸­æœ€åŸºæœ¬çš„çª—å£ç³»ç»Ÿï¼Œæ¯ä¸ª Activity ä¼šåˆ›å»ºä¸€ä¸ªã€‚PhoneWindow æ˜¯ Activity å’Œ View ç³»ç»Ÿäº¤äº’çš„å€Ÿå£ã€‚DecorView æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª FrameLayoutï¼Œæ˜¯ Activity ä¸­æ‰€æœ‰ View çš„ç¥–å…ˆã€‚ ç»˜åˆ¶çš„æ•´ä½“æµç¨‹å½“ä¸€ä¸ªåº”ç”¨å¯åŠ¨æ—¶ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªä¸» Activityï¼ŒAndroid ç³»ç»Ÿä¼šæ ¹æ® Activity çš„å¸ƒå±€æ¥å¯¹å®ƒè¿›è¡Œç»˜åˆ¶ã€‚ç»˜åˆ¶ä¼šä»Žæ ¹è§†å›¾ ViewRoot çš„ performTraversals() æ–¹æ³•å¼€å§‹ï¼Œä»Žä¸Šåˆ°ä¸‹éåŽ†æ•´ä¸ªè§†å›¾æ ‘ï¼Œæ¯ä¸ª View æŽ§åˆ¶è´Ÿè´£ç»˜åˆ¶è‡ªå·±ï¼Œè€Œ ViewGroup è¿˜éœ€è¦è´Ÿè´£é€šçŸ¥è‡ªå·±çš„å­ View è¿›è¡Œç»˜åˆ¶æ“ä½œã€‚è§†å›¾æ“ä½œçš„è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼Œåˆ†åˆ«æ˜¯æµ‹é‡(Measure)ã€å¸ƒå±€(Layout)å’Œç»˜åˆ¶(Draw)ã€‚performTraversals æ–¹æ³•åœ¨ç±» ViewRootImpl å†…ï¼Œå…¶æ ¸å¿ƒä»£ç å¦‚ä¸‹ã€‚ 1234567891011int childWidthMeasureSpec = getRootMeasureSpec(mWidth, lp.width);int childHeightMeasureSpec = getRootMeasureSpec(mHeight, lp.height);...// æµ‹é‡performMeasure(childWidthMeasureSpec, childHeightMeasureSpec);...// å¸ƒå±€performLayout(lp, mWidth, mHeight);...// ç»˜åˆ¶performDraw(); MeasureSpecMeasureSpec è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª 32 ä½çš„æ•´æ•°å€¼ï¼Œå®ƒçš„é«˜ 2 ä½è¡¨ç¤ºæµ‹é‡æ¨¡å¼ SpecModeï¼Œä½Ž 30 ä½è¡¨ç¤ºæŸç§æµ‹é‡æ¨¡å¼ä¸‹çš„è§„æ ¼å¤§å° SpecSizeã€‚MeasureSpec æ˜¯ View ç±»çš„ä¸€ä¸ªé™æ€å†…éƒ¨ç±»ï¼Œç”¨æ¥è¯´æ˜Žåº”è¯¥å¦‚ä½•æµ‹é‡è¿™ä¸ªViewã€‚ ä¸‰ç§æµ‹é‡æ¨¡å¼ã€‚ UNSPECIFIEDï¼šä¸æŒ‡å®šæµ‹é‡æ¨¡å¼ï¼Œçˆ¶è§†å›¾æ²¡æœ‰é™åˆ¶å­è§†å›¾çš„å¤§å°ï¼Œå­è§†å›¾å¯ä»¥æ˜¯æƒ³è¦çš„ä»»ä½•å°ºå¯¸ï¼Œé€šå¸¸ç”¨äºŽç³»ç»Ÿå†…éƒ¨ï¼Œåº”ç”¨å¼€å‘ä¸­å¾ˆå°‘ä½¿ç”¨åˆ°ã€‚ EXACTLYï¼šç²¾ç¡®æµ‹é‡æ¨¡å¼ï¼Œå½“è¯¥è§†å›¾çš„ layout_width æˆ–è€… layout_height æŒ‡å®šä¸ºå…·ä½“æ•°å€¼æˆ–è€… match_parent æ—¶ç”Ÿæ•ˆï¼Œè¡¨ç¤ºçˆ¶è§†å›¾å·²ç»å†³å®šäº†å­è§†å›¾çš„ç²¾ç¡®å¤§å°ï¼Œè¿™ç§æ¨¡å¼ä¸‹ View çš„æµ‹é‡å€¼å°±æ˜¯ SpecSize çš„å€¼ã€‚ AT_MOSTï¼šæœ€å¤§å€¼æ¨¡å¼ï¼Œå½“å‰è§†å›¾çš„ layout_width æˆ–è€… layout_height æŒ‡å®šä¸º wrap_content æ—¶ç”Ÿæ•ˆï¼Œæ­¤æ—¶å­è§†å›¾çš„å°ºå¯¸å¯ä»¥æ˜¯ä¸è¶…è¿‡çˆ¶è§†å›¾è¿è¡Œçš„æœ€å¤§å°ºå¯¸çš„ä»»ä½•å°ºå¯¸ã€‚ å¯¹ DecorView è€Œè¨€ï¼Œå®ƒçš„ MeasureSpec ç”±çª—å£å°ºå¯¸å’Œå…¶è‡ªèº«çš„ LayoutParams å…±åŒå†³å®šï¼›å¯¹äºŽæ™®é€šçš„ Viewï¼Œå®ƒçš„ MeasureSpec ç”±çˆ¶è§†å›¾çš„ MeasureSpec å’Œå…¶æœ¬èº«çš„ LayoutParams å…±åŒå†³å®šã€‚ MeasureMeasure ç”¨æ¥è®¡ç®— View çš„å®žé™…å¤§å°ã€‚é¡µé¢çš„æµ‹é‡æµç¨‹ä»Ž performMeasure æ–¹æ³•å¼€å§‹ã€‚ 1234567891011private void performMeasure(int childWidthMeasureSpec, int childHeightMeasureSpec) &#123; if (mView == null) &#123; return; &#125; Trace.traceBegin(Trace.TRACE_TAG_VIEW, "measure"); try &#123; mView.measure(childWidthMeasureSpec, childHeightMeasureSpec); &#125; finally &#123; Trace.traceEnd(Trace.TRACE_TAG_VIEW); &#125;&#125; å…·ä½“æ“ä½œæ˜¯åˆ†å‘ç»™ ViewGroup çš„ï¼Œç”± ViewGroup åœ¨å®ƒçš„ measureChild æ–¹æ³•ä¸­ä¼ é€’ç»™å­ Viewã€‚ViewGroup é€šè¿‡éåŽ†è‡ªèº«æ‰€æœ‰çš„å­ Viewï¼Œå¹¶é€ä¸ªè°ƒç”¨å­ View çš„ measure æ–¹æ³•å®žçŽ°æµ‹é‡æ“ä½œã€‚ 123456789101112131415161718192021222324// éåŽ†æµ‹é‡ ViewGroup ä¸­æ‰€æœ‰çš„ Viewprotected void measureChildren(int widthMeasureSpec, int heightMeasureSpec) &#123; final int size = mChildrenCount; final View[] children = mChildren; for (int i = 0; i &lt; size; ++i) &#123; final View child = children[i]; if ((child.mViewFlags &amp; VISIBILITY_MASK) != GONE) &#123; measureChild(child, widthMeasureSpec, heightMeasureSpec); &#125; &#125;&#125;// æµ‹é‡æŸä¸ªæŒ‡å®šçš„ Viewprotected void measureChild(View child, int parentWidthMeasureSpec, int parentHeightMeasureSpec) &#123; final LayoutParams lp = child.getLayoutParams(); final int childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec, mPaddingLeft + mPaddingRight, lp.width); final int childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec, mPaddingTop + mPaddingBottom, lp.height); child.measure(childWidthMeasureSpec, childHeightMeasureSpec);&#125; View (ViewGroup) çš„ Measure æ–¹æ³•ï¼Œæœ€ç»ˆçš„æµ‹é‡æ˜¯é€šè¿‡å›žè°ƒ onMeasure æ–¹æ³•å®žçŽ°çš„ï¼Œè¿™ä¸ªé€šå¸¸ç”± View çš„ç‰¹å®šå­ç±»è‡ªå·±å®žçŽ°ï¼Œå¯ä»¥é€šè¿‡é‡å†™è¿™ä¸ªæ–¹æ³•å®žçŽ°è‡ªå®šä¹‰ Viewã€‚ 1234567891011121314151617181920212223242526272829public final void measure(int widthMeasureSpec, int heightMeasureSpec) &#123; ... onMeasure(widthMeasureSpec, heightMeasureSpec); ....&#125;// å¦‚æžœéœ€è¦è‡ªå®šä¹‰æµ‹é‡ï¼Œå­ç±»éœ€é‡å†™è¿™ä¸ªæ–¹æ³•protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec), getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));&#125;// å¦‚æžœ View æ²¡æœ‰é‡å†™onMeasure æ–¹æ³•ï¼Œé»˜è®¤ä¼šç›´æŽ¥è°ƒç”¨ getDefaultSize public static int getDefaultSize(int size, int measureSpec) &#123; int result = size; int specMode = MeasureSpec.getMode(measureSpec); int specSize = MeasureSpec.getSize(measureSpec); switch (specMode) &#123; case MeasureSpec.UNSPECIFIED: result = size; break; case MeasureSpec.AT_MOST: case MeasureSpec.EXACTLY: result = specSize; break; &#125; return result; &#125; LayoutLayout è¿‡ç¨‹ç”¨æ¥ç¡®å®š View åœ¨çˆ¶å®¹å™¨çš„å¸ƒå±€ä½ç½®ï¼Œä»–æ˜¯çˆ¶å®¹å™¨èŽ·å–å­ View çš„ä½ç½®å‚æ•°åŽï¼Œè°ƒç”¨å­ View çš„ layout æ–¹æ³•å¹¶å°†ä½ç½®å‚æ•°ä¼ å…¥å®žçŽ°çš„ã€‚ViewRootImpl çš„ performLayout ä»£ç å¦‚ä¸‹ã€‚ 123456private void performLayout(WindowManager.LayoutParams lp, int desiredWindowWidth, int desiredWindowHeight) &#123; ... host.layout(0, 0, host.getMeasuredWidth(), host.getMeasuredHeight()); ...&#125; View çš„ layout æ–¹æ³•ä»£ç ã€‚ 1234567public void layout(int l, int t, int r, int b) &#123; onLayout(changed, l, t, r, b);&#125;// ç©ºæ–¹æ³•ï¼Œå­ç±»å¦‚æžœæ˜¯ ViewGroup ç±»åž‹ï¼Œåˆ™é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œå®žçŽ° ViewGroup ä¸­æ‰€æœ‰ View æŽ§ä»¶å¸ƒå±€protected void onLayout(boolean changed, int left, int top, int right, int bottom) &#123;&#125; DrawDraw æ“ä½œç”¨æ¥å°†æŽ§ä»¶ç»˜åˆ¶å‡ºæ¥ï¼Œç»˜åˆ¶çš„æµç¨‹ä»Ž performDraw æ–¹æ³•å¼€å§‹ã€‚performDraw æ–¹æ³•åœ¨ç±» ViewRootImpl å†…ï¼Œå…¶æ ¸å¿ƒä»£ç å¦‚ä¸‹ã€‚ 123456789101112131415161718private void performDraw() &#123; boolean canUseAsync = draw(fullRedrawNeeded);&#125;private boolean draw(boolean fullRedrawNeeded) &#123; ... if (!drawSoftware(surface, mAttachInfo, xOffset, yOffset, scalingRequired, dirty, surfaceInsets)) &#123; return false; &#125;&#125;private boolean drawSoftware(Surface surface, AttachInfo attachInfo, int xoff, int yoff, boolean scalingRequired, Rect dirty, Rect surfaceInsets) &#123; ... mView.draw(canvas); ...&#125; æœ€ç»ˆè°ƒç”¨åˆ°æ¯ä¸ª View çš„ draw æ–¹æ³•ç»˜åˆ¶æ¯ä¸ªå…·ä½“çš„ Viewï¼Œç»˜åˆ¶åŸºæœ¬ä¸Šå¯ä»¥åˆ†ä¸ºå…­ä¸ªæ­¥éª¤ã€‚ 123456789101112131415161718192021222324public void draw(Canvas canvas) &#123; ... // Step 1, draw the background, if needed if (!dirtyOpaque) &#123; drawBackground(canvas); &#125; ... // Step 2, save the canvas' layers saveCount = canvas.getSaveCount(); ... // Step 3, draw the content if (!dirtyOpaque) onDraw(canvas); // Step 4, draw the children dispatchDraw(canvas); // Step 5, draw the fade effect and restore layers canvas.drawRect(left, top, right, top + length, p); ... canvas.restoreToCount(saveCount); ... // Step 6, draw decorations (foreground, scrollbars) onDrawForeground(canvas);&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>View</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­RelativeLayoutå’ŒLinearLayoutæ€§èƒ½åˆ†æž]]></title>
    <url>%2Fposts%2Fe61a64df.html</url>
    <content type="text"><![CDATA[Optimizing Layout HierarchiesIt is a common misconception that using the basic layout structures leads to the most efficient layouts. However, each widget and layout you add to your application requires initialization, layout, and drawing. For example, using nested instances of LinearLayout can lead to an excessively deep view hierarchy. Furthermore, nesting several instances ofLinearLayout that use the layout_weight parameter can be especially expensive as each child needs to be measured twice. This is particularly important when the layout is inflated repeatedly, such as when used in a ListViewor GridView. è¿™å¥è¯æ˜¯å¯¹å‡å°‘å¸ƒå±€å±‚æ¬¡çš„æè¿°ã€‚ æœ‰ä¸€ä¸ªè¯¯è§£å°±æ˜¯ï¼Œä½¿ç”¨åŸºç±»å¸ƒå±€å¯ç”¨äº§ç”Ÿæ›´æœ‰æ•ˆçš„å¸ƒå±€æ–¹å¼ã€‚ç„¶è€Œæ¯ä¸€ä¸ªä½ æ·»åŠ åˆ°applicationé‡Œé¢çš„æŽ§ä»¶å’Œå¸ƒå±€ï¼Œéƒ½éœ€è¦åˆå§‹åŒ–ï¼Œå¸ƒå±€ï¼Œç»˜åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¸ƒå±€å¤æ‚çš„æ—¶å€™ä½¿ç”¨LinearLayoutï¼Œä¼šå¯¼è‡´æ·±å±‚æ¬¡çš„å¸ƒå±€åµŒå¥—é—®é¢˜ï¼Œè€Œè¿›ä¸€æ­¥æ¥è¯´ï¼Œä½¿ç”¨LinearLayoutçš„weightå±žæ€§ç»™æ¯ä¸ªå­viewåŽ»åˆ†é…ä½ç½®çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´æ¯ä¸€ä¸ªå­viewè¢«ç»˜åˆ¶ä¸¤æ¬¡ï¼Œè€ŒLinearLayoutåµŒå¥—LinearLayoutä½¿ç”¨weightä¼šæ›´åŠ ä¸¥é‡ã€‚å¦‚æžœå¸ƒå±€è¢«é‡å¤çš„inflatedçš„è¯ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ListViewæˆ–è€…GridViewçš„æ—¶å€™å°±ä¼šç‰¹åˆ«æ˜Žæ˜¾çš„å½±å“ç»˜åˆ¶æ•ˆçŽ‡ã€‚ å…ˆçœ‹ä¸€äº›çŽ°è±¡å§ï¼šç”¨eclipseæˆ–è€…Android studioï¼Œæ–°å»ºä¸€ä¸ªActivityè‡ªåŠ¨ç”Ÿæˆçš„å¸ƒå±€æ–‡ä»¶éƒ½æ˜¯RelativeLayoutï¼Œæˆ–è®¸ä½ ä¼šè®¤ä¸ºè¿™æ˜¯IDEçš„é»˜è®¤è®¾ç½®é—®é¢˜ï¼Œå…¶å®žä¸ç„¶ï¼Œè¿™æ˜¯ç”± android-sdk\tools\templates\activities\BlankActivity\root\res\layout\activity_simple.xml.ftl è¿™ä¸ªæ–‡ä»¶äº‹å…ˆå°±å®šå¥½äº†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯Googleçš„é€‰æ‹©ï¼Œè€ŒéžIDEçš„é€‰æ‹©ã€‚é‚£SDKä¸ºä»€ä¹ˆä¼šé»˜è®¤ç»™å¼€å‘è€…æ–°å»ºä¸€ä¸ªé»˜è®¤çš„RelativeLayoutå¸ƒå±€å‘¢ï¼Ÿå½“ç„¶æ˜¯å› ä¸ºRelativeLayoutçš„æ€§èƒ½æ›´ä¼˜ï¼Œæ€§èƒ½è‡³ä¸Šå˜›ã€‚ä½†æ˜¯æˆ‘ä»¬å†çœ‹çœ‹é»˜è®¤æ–°å»ºçš„è¿™ä¸ªRelativeLayoutçš„çˆ¶å®¹å™¨ï¼Œä¹Ÿå°±æ˜¯å½“å‰çª—å£çš„é¡¶çº§Viewâ€”â€”DecorViewï¼Œå®ƒå´æ˜¯ä¸ªåž‚ç›´æ–¹å‘çš„LinearLayoutï¼Œä¸Šé¢æ˜¯æ ‡é¢˜æ ï¼Œä¸‹é¢æ˜¯å†…å®¹æ ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒGoogleä¸ºä»€ä¹ˆç»™å¼€å‘è€…é»˜è®¤æ–°å»ºäº†ä¸ªRelativeLayoutï¼Œè€Œè‡ªå·±å´å·å·ç”¨äº†ä¸ªLinearLayoutï¼Œåˆ°åº•è°çš„æ€§èƒ½æ›´é«˜ï¼Œå¼€å‘è€…è¯¥æ€Žä¹ˆé€‰æ‹©å‘¢ï¼Ÿ Viewçš„ä¸€äº›åŸºæœ¬å·¥ä½œåŽŸç†å…ˆé€šè¿‡å‡ ä¸ªé—®é¢˜ï¼Œç®€å•çš„äº†è§£å†™androidä¸­Viewçš„å·¥ä½œåŽŸç†å§ã€‚ Viewæ˜¯ä»€ä¹ˆï¼Ÿç®€å•æ¥è¯´ï¼ŒViewæ˜¯Androidç³»ç»Ÿåœ¨å±å¹•ä¸Šçš„è§†è§‰å‘ˆçŽ°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨æ‰‹æœºå±å¹•ä¸Šçœ‹åˆ°çš„ä¸œè¥¿éƒ½æ˜¯Viewã€‚ Viewæ˜¯æ€Žä¹ˆç»˜åˆ¶å‡ºæ¥çš„ï¼ŸViewçš„ç»˜åˆ¶æµç¨‹æ˜¯ä»ŽViewRootçš„performTraversalsï¼ˆï¼‰æ–¹æ³•å¼€å§‹ï¼Œä¾æ¬¡ç»è¿‡measureï¼ˆï¼‰ï¼Œlayoutï¼ˆï¼‰å’Œdrawï¼ˆï¼‰ä¸‰ä¸ªè¿‡ç¨‹æ‰æœ€ç»ˆå°†ä¸€ä¸ªViewç»˜åˆ¶å‡ºæ¥ã€‚ Viewæ˜¯æ€Žä¹ˆå‘ˆçŽ°åœ¨ç•Œé¢ä¸Šçš„ï¼ŸAndroidä¸­çš„è§†å›¾éƒ½æ˜¯é€šè¿‡Windowæ¥å‘ˆçŽ°çš„ï¼Œä¸ç®¡Activityã€Dialogè¿˜æ˜¯Toastå®ƒä»¬éƒ½æœ‰ä¸€ä¸ªWindowï¼Œç„¶åŽé€šè¿‡WindowManageræ¥ç®¡ç†Viewã€‚Windowå’Œé¡¶çº§Viewâ€”â€”DecorViewçš„é€šä¿¡æ˜¯ä¾èµ–ViewRootå®Œæˆçš„ã€‚ Viewå’ŒViewGroupä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ç®¡ç®€å•çš„Buttonå’ŒTextViewè¿˜æ˜¯å¤æ‚çš„RelativeLayoutå’ŒListViewï¼Œä»–ä»¬çš„å…±åŒåŸºç±»éƒ½æ˜¯Viewã€‚æ‰€ä»¥è¯´ï¼ŒViewæ˜¯ä¸€ç§ç•Œé¢å±‚æŽ§ä»¶çš„æŠ½è±¡ï¼Œä»–ä»£è¡¨äº†ä¸€ä¸ªæŽ§ä»¶ã€‚é‚£ViewGroupæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œå®ƒå¯ä»¥è¢«ç¿»è¯‘æˆæŽ§ä»¶ç»„ï¼Œå³ä¸€ç»„Viewã€‚ViewGroupä¹Ÿæ˜¯ç»§æ‰¿Viewï¼Œè¿™å°±æ„å‘³ç€Viewæœ¬èº«å¯ä»¥æ˜¯å•ä¸ªæŽ§ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªæŽ§ä»¶ç»„æˆçš„æŽ§ä»¶ç»„ã€‚æ ¹æ®è¿™ä¸ªç†è®ºï¼ŒButtonæ˜¾ç„¶æ˜¯ä¸ªViewï¼Œè€ŒRelativeLayoutä¸ä½†æ˜¯ä¸€ä¸ªViewè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªViewGroupï¼Œè€ŒViewGroupå†…éƒ¨æ˜¯å¯ä»¥æœ‰å­Viewçš„ï¼Œè¿™ä¸ªå­ViewåŒæ ·ä¹Ÿå¯èƒ½æ˜¯ViewGroupï¼Œä»¥æ­¤ç±»æŽ¨ã€‚ RelativeLayoutå’ŒLinearLayoutæ€§èƒ½PKåŸºäºŽä»¥ä¸ŠåŽŸç†å’Œå¤§èƒŒæ™¯ï¼Œæˆ‘ä»¬è¦æŽ¢è®¨çš„æ€§èƒ½é—®é¢˜ï¼Œè¯´çš„ç®€å•æ˜Žäº†ä¸€ç‚¹å°±æ˜¯ï¼šå½“RelativeLayoutå’ŒLinearLayoutåˆ†åˆ«ä½œä¸ºViewGroupï¼Œè¡¨è¾¾ç›¸åŒå¸ƒå±€æ—¶ç»˜åˆ¶åœ¨å±å¹•ä¸Šæ—¶è°æ›´å¿«ä¸€ç‚¹ã€‚ä¸Šé¢å·²ç»ç®€å•è¯´äº†Viewçš„ç»˜åˆ¶ï¼Œä»ŽViewRootçš„performTraversalsï¼ˆï¼‰æ–¹æ³•å¼€å§‹ä¾æ¬¡è°ƒç”¨perfromMeasureã€performLayoutå’ŒperformDrawè¿™ä¸‰ä¸ªæ–¹æ³•ã€‚è¿™ä¸‰ä¸ªæ–¹æ³•åˆ†åˆ«å®Œæˆé¡¶çº§Viewçš„measureã€layoutå’Œdrawä¸‰å¤§æµç¨‹ï¼Œå…¶ä¸­perfromMeasureä¼šè°ƒç”¨measureï¼Œmeasureåˆä¼šè°ƒç”¨onMeasureï¼Œåœ¨onMeasureæ–¹æ³•ä¸­åˆ™ä¼šå¯¹æ‰€æœ‰å­å…ƒç´ è¿›è¡Œmeasureï¼Œè¿™ä¸ªæ—¶å€™measureæµç¨‹å°±ä»Žçˆ¶å®¹å™¨ä¼ é€’åˆ°å­å…ƒç´ ä¸­äº†ï¼Œè¿™æ ·å°±å®Œæˆäº†ä¸€æ¬¡measureè¿‡ç¨‹ï¼ŒæŽ¥ç€å­å…ƒç´ ä¼šé‡å¤çˆ¶å®¹å™¨çš„measureï¼Œå¦‚æ­¤åå¤å°±å®Œæˆäº†æ•´ä¸ªViewæ ‘çš„éåŽ†ã€‚åŒç†ï¼ŒperformLayoutå’ŒperformDrawä¹Ÿåˆ†åˆ«å®ŒæˆperfromMeasureç±»ä¼¼çš„æµç¨‹ã€‚é€šè¿‡è¿™ä¸‰å¤§æµç¨‹ï¼Œåˆ†åˆ«éåŽ†æ•´æ£µViewæ ‘ï¼Œå°±å®žçŽ°äº†Measureï¼ŒLayoutï¼ŒDrawè¿™ä¸€è¿‡ç¨‹ï¼ŒViewå°±ç»˜åˆ¶å‡ºæ¥äº†ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±åˆ†åˆ«æ¥è¿½è¸ªä¸‹RelativeLayoutå’ŒLinearLayoutè¿™ä¸‰å¤§æµç¨‹çš„æ‰§è¡Œè€—æ—¶ã€‚å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬åˆ†åˆ«ç”¨ä¸¤ç”¨ç§æ–¹å¼ç®€å•çš„å®žçŽ°å¸ƒå±€æµ‹è¯•ä¸‹ LinearLayoutMeasureï¼š0.738ms Layoutï¼š0.176ms drawï¼š7.655ms RelativeLayoutMeasureï¼š2.280ms Layoutï¼š0.153ms drawï¼š7.696ms ä»Žè¿™ä¸ªæ•°æ®æ¥çœ‹æ— è®ºä½¿ç”¨RelativeLayoutè¿˜æ˜¯LinearLayoutï¼Œlayoutå’Œdrawçš„è¿‡ç¨‹ä¸¤è€…ç›¸å·®æ— å‡ ï¼Œè€ƒè™‘åˆ°è¯¯å·®çš„é—®é¢˜ï¼Œå‡ ä¹Žå¯ä»¥è®¤ä¸ºä¸¤è€…ä¸åˆ†ä¼¯ä»²ï¼Œå…³é”®æ˜¯Measureçš„è¿‡ç¨‹RelativeLayoutå´æ¯”LinearLayoutæ…¢äº†ä¸€å¤§æˆªã€‚ Measureéƒ½å¹²ä»€ä¹ˆäº†RelativeLayoutçš„onMeasure()æ–¹æ³•1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768View[] views = mSortedHorizontalChildren; int count = views.length; for (int i = 0; i &lt; count; i++) &#123; View child = views[i]; if (child.getVisibility() != GONE) &#123; LayoutParams params = (LayoutParams) child.getLayoutParams(); int[] rules = params.getRules(layoutDirection); applyHorizontalSizeRules(params, myWidth, rules); measureChildHorizontal(child, params, myWidth, myHeight); if (positionChildHorizontal(child, params, myWidth, isWrapContentWidth)) &#123; offsetHorizontalAxis = true; &#125; &#125; &#125; views = mSortedVerticalChildren; count = views.length; final int targetSdkVersion = getContext().getApplicationInfo().targetSdkVersion; for (int i = 0; i &lt; count; i++) &#123; View child = views[i]; if (child.getVisibility() != GONE) &#123; LayoutParams params = (LayoutParams) child.getLayoutParams(); applyVerticalSizeRules(params, myHeight); measureChild(child, params, myWidth, myHeight); if (positionChildVertical(child, params, myHeight, isWrapContentHeight)) &#123; offsetVerticalAxis = true; &#125; if (isWrapContentWidth) &#123; if (isLayoutRtl()) &#123; if (targetSdkVersion &lt; Build.VERSION_CODES.KITKAT) &#123; width = Math.max(width, myWidth - params.mLeft); &#125; else &#123; width = Math.max(width, myWidth - params.mLeft - params.leftMargin); &#125; &#125; else &#123; if (targetSdkVersion &lt; Build.VERSION_CODES.KITKAT) &#123; width = Math.max(width, params.mRight); &#125; else &#123; width = Math.max(width, params.mRight + params.rightMargin); &#125; &#125; &#125; if (isWrapContentHeight) &#123; if (targetSdkVersion &lt; Build.VERSION_CODES.KITKAT) &#123; height = Math.max(height, params.mBottom); &#125; else &#123; height = Math.max(height, params.mBottom + params.bottomMargin); &#125; &#125; if (child != ignore || verticalGravity) &#123; left = Math.min(left, params.mLeft - params.leftMargin); top = Math.min(top, params.mTop - params.topMargin); &#125; if (child != ignore || horizontalGravity) &#123; right = Math.max(right, params.mRight + params.rightMargin); bottom = Math.max(bottom, params.mBottom + params.bottomMargin); &#125; &#125; &#125; æ ¹æ®æºç æˆ‘ä»¬å‘çŽ°RelativeLayoutä¼šå¯¹å­Viewåšä¸¤æ¬¡measureã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆRelativeLayoutä¸­å­Viewçš„æŽ’åˆ—æ–¹å¼æ˜¯åŸºäºŽå½¼æ­¤çš„ä¾èµ–å…³ç³»ï¼Œè€Œè¿™ä¸ªä¾èµ–å…³ç³»å¯èƒ½å’Œå¸ƒå±€ä¸­Viewçš„é¡ºåºå¹¶ä¸ç›¸åŒï¼Œåœ¨ç¡®å®šæ¯ä¸ªå­Viewçš„ä½ç½®çš„æ—¶å€™ï¼Œå°±éœ€è¦å…ˆç»™æ‰€æœ‰çš„å­ViewæŽ’åºä¸€ä¸‹ã€‚åˆå› ä¸ºRelativeLayoutå…è®¸Aï¼ŒB 2ä¸ªå­Viewï¼Œæ¨ªå‘ä¸ŠBä¾èµ–Aï¼Œçºµå‘ä¸ŠAä¾èµ–Bã€‚æ‰€ä»¥éœ€è¦æ¨ªå‘çºµå‘åˆ†åˆ«è¿›è¡Œä¸€æ¬¡æŽ’åºæµ‹é‡ã€‚ LinearLayoutçš„onMeasure()æ–¹æ³•12345678@Overrideprotected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; if (mOrientation == VERTICAL) &#123; measureVertical(widthMeasureSpec, heightMeasureSpec); &#125; else &#123; measureHorizontal(widthMeasureSpec, heightMeasureSpec); &#125;&#125; ä¸ŽRelativeLayoutç›¸æ¯”LinearLayoutçš„measureå°±ç®€å•æ˜Žäº†çš„å¤šäº†ï¼Œå…ˆåˆ¤æ–­çº¿æ€§è§„åˆ™ï¼Œç„¶åŽæ‰§è¡Œå¯¹åº”æ–¹å‘ä¸Šçš„æµ‹é‡ã€‚éšä¾¿çœ‹ä¸€ä¸ªå§ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960for (int i = 0; i &lt; count; ++i) &#123; final View child = getVirtualChildAt(i); if (child == null) &#123; mTotalLength += measureNullChild(i); continue; &#125; if (child.getVisibility() == View.GONE) &#123; i += getChildrenSkipCount(child, i); continue; &#125; if (hasDividerBeforeChildAt(i)) &#123; mTotalLength += mDividerHeight; &#125; LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams) child.getLayoutParams(); totalWeight += lp.weight; if (heightMode == MeasureSpec.EXACTLY &amp;&amp; lp.height == 0 &amp;&amp; lp.weight &gt; 0) &#123; // Optimization: don't bother measuring children who are going to use // leftover space. These views will get measured again down below if // there is any leftover space. final int totalLength = mTotalLength; mTotalLength = Math.max(totalLength, totalLength + lp.topMargin + lp.bottomMargin); &#125; else &#123; int oldHeight = Integer.MIN_VALUE; if (lp.height == 0 &amp;&amp; lp.weight &gt; 0) &#123; // heightMode is either UNSPECIFIED or AT_MOST, and this // child wanted to stretch to fill available space. // Translate that to WRAP_CONTENT so that it does not end up // with a height of 0 oldHeight = 0; lp.height = LayoutParams.WRAP_CONTENT; &#125; // Determine how big this child would like to be. If this or // previous children have given a weight, then we allow it to // use all available space (and we will shrink things later // if needed). measureChildBeforeLayout( child, i, widthMeasureSpec, 0, heightMeasureSpec, totalWeight == 0 ? mTotalLength : 0); if (oldHeight != Integer.MIN_VALUE) &#123; lp.height = oldHeight; &#125; final int childHeight = child.getMeasuredHeight(); final int totalLength = mTotalLength; mTotalLength = Math.max(totalLength, totalLength + childHeight + lp.topMargin + lp.bottomMargin + getNextLocationOffset(child)); if (useLargestChild) &#123; largestChildHeight = Math.max(childHeight, largestChildHeight); &#125; &#125; çˆ¶è§†å›¾åœ¨å¯¹å­è§†å›¾è¿›è¡Œmeasureæ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨å˜é‡mTotalLengthä¿å­˜å·²ç»measureè¿‡çš„childæ‰€å ç”¨çš„é«˜åº¦ï¼Œè¯¥å˜é‡åˆšå¼€å§‹æ—¶æ˜¯0ã€‚åœ¨forå¾ªçŽ¯ä¸­è°ƒç”¨measureChildBeforeLayoutï¼ˆï¼‰å¯¹æ¯ä¸€ä¸ªchildè¿›è¡Œæµ‹é‡ï¼Œè¯¥å‡½æ•°å®žé™…ä¸Šä»…ä»…æ˜¯è°ƒç”¨äº†measureChildWithMargins(),åœ¨è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œä½¿ç”¨äº†ä¸¤ä¸ªå‚æ•°ã€‚å…¶ä¸­ä¸€ä¸ªæ˜¯heightMeasureSpecï¼Œè¯¥å‚æ•°ä¸ºLinearLayoutæœ¬èº«çš„measureSpecï¼›å¦ä¸€ä¸ªå‚æ•°å°±æ˜¯mTotalLengthï¼Œä»£è¡¨è¯¥LinearLayoutå·²ç»è¢«å…¶å­è§†å›¾æ‰€å ç”¨çš„é«˜åº¦ã€‚ æ¯æ¬¡forå¾ªçŽ¯å¯¹childæµ‹é‡å®Œæ¯•åŽï¼Œè°ƒç”¨child.getMeasuredHeight()èŽ·å–è¯¥å­è§†å›¾æœ€ç»ˆçš„é«˜åº¦ï¼Œå¹¶å°†è¿™ä¸ªé«˜åº¦æ·»åŠ åˆ°mTotalLengthä¸­ã€‚åœ¨æœ¬æ­¥éª¤ä¸­ï¼Œæš‚æ—¶é¿å¼€äº†lp.weight&gt;0çš„å­è§†å›¾ï¼Œå³æš‚æ—¶å…ˆä¸æµ‹é‡è¿™äº›å­è§†å›¾ï¼Œå› ä¸ºåŽé¢å°†æŠŠçˆ¶è§†å›¾å‰©ä½™çš„é«˜åº¦æŒ‰ç…§weightå€¼çš„å¤§å°å¹³å‡åˆ†é…ç»™ç›¸åº”çš„å­è§†å›¾ã€‚æºç ä¸­ä½¿ç”¨äº†ä¸€ä¸ªå±€éƒ¨å˜é‡totalWeightç´¯è®¡æ‰€æœ‰å­è§†å›¾çš„weightå€¼ã€‚å¤„ç†lp.weight&gt;0çš„æƒ…å†µéœ€è¦æ³¨æ„ï¼Œå¦‚æžœå˜é‡heightModeæ˜¯EXACTLYï¼Œé‚£ä¹ˆï¼Œå½“å…¶ä»–å­è§†å›¾å æ»¡çˆ¶è§†å›¾çš„é«˜åº¦åŽï¼Œweight&gt;0çš„å­è§†å›¾å¯èƒ½åˆ†é…ä¸åˆ°å¸ƒå±€ç©ºé—´ï¼Œä»Žè€Œä¸è¢«æ˜¾ç¤ºï¼Œåªæœ‰å½“heightModeæ˜¯AT_MOSTæˆ–è€…UNSPECIFIEDæ—¶ï¼Œweight&gt;0çš„è§†å›¾æ‰èƒ½ä¼˜å…ˆèŽ·å¾—å¸ƒå±€é«˜åº¦ã€‚æœ€åŽæˆ‘ä»¬çš„ç»“è®ºæ˜¯ï¼šå¦‚æžœä¸ä½¿ç”¨weightå±žæ€§ï¼ŒLinearLayoutä¼šåœ¨å½“å‰æ–¹å‘ä¸Šè¿›è¡Œä¸€æ¬¡measureçš„è¿‡ç¨‹ï¼Œå¦‚æžœä½¿ç”¨weightå±žæ€§ï¼ŒLinearLayoutä¼šé¿å¼€è®¾ç½®è¿‡weightå±žæ€§çš„viewåšç¬¬ä¸€æ¬¡measureï¼Œå®Œäº†å†å¯¹è®¾ç½®è¿‡weightå±žæ€§çš„viewåšç¬¬äºŒæ¬¡measureã€‚ç”±æ­¤å¯è§ï¼Œweightå±žæ€§å¯¹æ€§èƒ½æ˜¯æœ‰å½±å“çš„ï¼Œè€Œä¸”æœ¬èº«æœ‰å¤§å‘ï¼Œè¯·æ³¨æ„é¿è®©ã€‚ å°ç»“ä»Žæºç ä¸­æˆ‘ä»¬ä¼¼ä¹Žèƒ½çœ‹å‡ºï¼Œæˆ‘ä»¬å…ˆå‰çš„æµ‹è¯•ç»“æžœä¸­RelativeLayoutä¸å¦‚LinearLayoutå¿«çš„æ ¹æœ¬åŽŸå› æ˜¯RelativeLayoutéœ€è¦å¯¹å…¶å­Viewè¿›è¡Œä¸¤æ¬¡measureè¿‡ç¨‹ã€‚è€ŒLinearLayoutåˆ™åªéœ€ä¸€æ¬¡measureè¿‡ç¨‹ï¼Œæ‰€ä»¥æ˜¾ç„¶ä¼šå¿«äºŽRelativeLayoutï¼Œä½†æ˜¯å¦‚æžœLinearLayoutä¸­æœ‰weightå±žæ€§ï¼Œåˆ™ä¹Ÿéœ€è¦è¿›è¡Œä¸¤æ¬¡measureï¼Œä½†å³ä¾¿å¦‚æ­¤ï¼Œåº”è¯¥ä»ç„¶ä¼šæ¯”RelativeLayoutçš„æƒ…å†µå¥½ä¸€ç‚¹ã€‚ RelativeLayoutå¦ä¸€ä¸ªæ€§èƒ½é—®é¢˜å¯¹æ¯”åˆ°è¿™é‡Œå°±ç»“æŸäº†å˜›ï¼Ÿæ˜¾ç„¶æ²¡æœ‰ï¼æˆ‘ä»¬å†çœ‹çœ‹Viewçš„Measureï¼ˆï¼‰æ–¹æ³•éƒ½å¹²äº†äº›ä»€ä¹ˆï¼Ÿ 12345678910111213public final void measure(int widthMeasureSpec, int heightMeasureSpec) &#123; if ((mPrivateFlags &amp; PFLAG_FORCE_LAYOUT) == PFLAG_FORCE_LAYOUT || widthMeasureSpec != mOldWidthMeasureSpec || heightMeasureSpec != mOldHeightMeasureSpec) &#123; ...... &#125; mOldWidthMeasureSpec = widthMeasureSpec; mOldHeightMeasureSpec = heightMeasureSpec; mMeasureCache.put(key, ((long) mMeasuredWidth) &lt;&lt; 32 | (long) mMeasuredHeight &amp; 0xffffffffL); // suppress sign extension &#125; Viewçš„measureæ–¹æ³•é‡Œå¯¹ç»˜åˆ¶è¿‡ç¨‹åšäº†ä¸€ä¸ªä¼˜åŒ–ï¼Œå¦‚æžœæˆ‘ä»¬æˆ–è€…æˆ‘ä»¬çš„å­Viewæ²¡æœ‰è¦æ±‚å¼ºåˆ¶åˆ·æ–°ï¼Œè€Œçˆ¶Viewç»™å­Viewçš„ä¼ å…¥å€¼ä¹Ÿæ²¡æœ‰å˜åŒ–ï¼ˆä¹Ÿå°±æ˜¯è¯´å­Viewçš„ä½ç½®æ²¡å˜åŒ–ï¼‰ï¼Œå°±ä¸ä¼šåšæ— è°“çš„measureã€‚ä½†æ˜¯ä¸Šé¢å·²ç»è¯´äº†RelativeLayoutè¦åšä¸¤æ¬¡measureï¼Œè€Œåœ¨åšæ¨ªå‘çš„æµ‹é‡æ—¶ï¼Œçºµå‘çš„æµ‹é‡ç»“æžœå°šæœªå®Œæˆï¼Œåªå¥½æš‚æ—¶ä½¿ç”¨myHeightä¼ å…¥å­Viewç³»ç»Ÿï¼Œå‡å¦‚å­Viewçš„Heightä¸ç­‰äºŽï¼ˆè®¾ç½®äº†marginï¼‰myHeightçš„é«˜åº¦ï¼Œé‚£ä¹ˆmeasureä¸­ä¸Šé¢ä»£ç æ‰€åšå¾—ä¼˜åŒ–å°†ä¸èµ·ä½œç”¨ï¼Œè¿™ä¸€è¿‡ç¨‹å°†è¿›ä¸€æ­¥å½±å“RelativeLayoutçš„ç»˜åˆ¶æ€§èƒ½ã€‚è€ŒLinearLayoutåˆ™æ— è¿™æ–¹é¢çš„æ‹…å¿§ã€‚è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆå¥½åŠžï¼Œå¦‚æžœå¯ä»¥ï¼Œå°½é‡ä½¿ç”¨paddingä»£æ›¿marginã€‚ ç»“è®º1.RelativeLayoutä¼šè®©å­Viewè°ƒç”¨2æ¬¡onMeasureï¼ŒLinearLayout åœ¨æœ‰weightæ—¶ï¼Œä¹Ÿä¼šè°ƒç”¨å­View2æ¬¡onMeasure 2.RelativeLayoutçš„å­Viewå¦‚æžœé«˜åº¦å’ŒRelativeLayoutä¸åŒï¼Œåˆ™ä¼šå¼•å‘æ•ˆçŽ‡é—®é¢˜ï¼Œå½“å­Viewå¾ˆå¤æ‚æ—¶ï¼Œè¿™ä¸ªé—®é¢˜ä¼šæ›´åŠ ä¸¥é‡ã€‚å¦‚æžœå¯ä»¥ï¼Œå°½é‡ä½¿ç”¨paddingä»£æ›¿marginã€‚ 3.åœ¨ä¸å½±å“å±‚çº§æ·±åº¦çš„æƒ…å†µä¸‹,ä½¿ç”¨LinearLayoutå’ŒFrameLayoutè€Œä¸æ˜¯RelativeLayoutã€‚ æœ€åŽå†æ€è€ƒä¸€ä¸‹æ–‡ç« å¼€å¤´é‚£ä¸ªçŸ›ç›¾çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆGoogleç»™å¼€å‘è€…é»˜è®¤æ–°å»ºäº†ä¸ªRelativeLayoutï¼Œè€Œè‡ªå·±å´åœ¨DecorViewä¸­ç”¨äº†ä¸ªLinearLayoutã€‚å› ä¸ºDecorViewçš„å±‚çº§æ·±åº¦æ˜¯å·²çŸ¥è€Œä¸”å›ºå®šçš„ï¼Œä¸Šé¢ä¸€ä¸ªæ ‡é¢˜æ ï¼Œä¸‹é¢ä¸€ä¸ªå†…å®¹æ ã€‚é‡‡ç”¨RelativeLayoutå¹¶ä¸ä¼šé™ä½Žå±‚çº§æ·±åº¦ï¼Œæ‰€ä»¥æ­¤æ—¶åœ¨æ ¹èŠ‚ç‚¹ä¸Šç”¨LinearLayoutæ˜¯æ•ˆçŽ‡æœ€é«˜çš„ã€‚è€Œä¹‹æ‰€ä»¥ç»™å¼€å‘è€…é»˜è®¤æ–°å»ºäº†ä¸ªRelativeLayoutæ˜¯å¸Œæœ›å¼€å‘è€…èƒ½é‡‡ç”¨å°½é‡å°‘çš„Viewå±‚çº§æ¥è¡¨è¾¾å¸ƒå±€ä»¥å®žçŽ°æ€§èƒ½æœ€ä¼˜ï¼Œå› ä¸ºå¤æ‚çš„ViewåµŒå¥—å¯¹æ€§èƒ½çš„å½±å“ä¼šæ›´å¤§ä¸€äº›ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HelloWord Vueé¡¹ç›®åˆ›å»º]]></title>
    <url>%2Fposts%2F55860431.html</url>
    <content type="text"><![CDATA[å‡†å¤‡ node &amp; npm 1$ brew install node æ£€æŸ¥ node &amp; npm 12$ node -v$ npm -v vue-cli 1$ npm install -g vue-cli æˆ– 1$ npm install -g @vue/cli @vue/cli-init @vue/cli-service-global åˆå§‹åŒ– 1$ vue create hello-world æ ¹æ®æç¤ºä¾æ¬¡è¾“å…¥ç›¸å…³ä¿¡æ¯â†“ æœ€åŽå‡ºçŽ°finishedå®‰è£…å®Œæˆ â†“ åœ¨ç»ˆç«¯ä¸­è¿è¡Œ â†“ å³å¯æŸ¥çœ‹åˆå§‹åŒ–å®Œæˆçš„æ•ˆæžœ 12cd hello-world/npm run serve æ·»åŠ ä¾èµ–é¡¹ç›®åˆå§‹åŒ–å®ŒæˆåŽæ·»åŠ é¡¹ç›®å¸¸ç”¨ä¾èµ–åŒ… 12npm install --save vuex axios qsnpm install --save-dev node-sass sass-loader pug pug-loader åŒ…å«vuexã€axiosã€qsã€sassã€pugç­‰ï¼Œå…¶ä»–ä¾èµ–åŒ…æ ¹æ®é¡¹ç›®éœ€æ±‚è‡ªå·±é€‰æ‹©vue-routeråœ¨è„šæ‰‹æž¶ init çš„æ—¶å€™ä¼šæç¤ºæ˜¯å¦é€‰æ‹©å®‰è£… å®Œå–„é¡¹ç›®ç»“æž„æ·»åŠ viewsæ–‡ä»¶å¤¹ src ä¸‹æ·»åŠ  views æ–‡ä»¶å¤¹ä¸»è¦å­˜æ”¾é¡µé¢çº§çš„ vue ç»„ä»¶src ä¸‹çš„ components æ–‡ä»¶å¤¹ä¸»è¦ç”¨äºŽå­˜æ”¾é€šç”¨çš„ç»„ä»¶ åœ¨ views æ–‡ä»¶å¤¹ä¸­åˆ›å»ºHome.vueä½œä¸ºä¸»é¡µ åˆ é™¤App.vueä¸­æ— ç”¨çš„å†…å®¹ï¼Œåªä¿ç•™router-view 12345&lt;template&gt; &lt;div id="app"&gt; &lt;router-view/&gt; &lt;/div&gt;&lt;/template&gt; å¦‚æžœæ˜¯ç§»åŠ¨ç«¯é¡¹ç›®ç”¨ rem ä½œä¸ºå•ä½ï¼Œå¯ä»¥åœ¨src/main.jsä¸­æ·»åŠ å¦‚ä¸‹ä»£ç åšè‡ªé€‚åº” â†“ 1234567891011121314if (window.addEventListener) &#123; const html = document.documentElement function setFont() &#123; const k = 750 html.style.fontSize = (html.clientWidth / k) * 100 + 'px' &#125; setFont() setTimeout(function() &#123; setFont() &#125;, 300) document.addEventListener('DOMContentLoaded', setFont, false) window.addEventListener('resize', setFont, false) window.addEventListener('load', setFont, false)&#125; è°ƒæ•´routeré…ç½® æ›´å¤šè·¯ç”±ç›¸å…³ä½¿ç”¨æ–¹æ³•è¯·è®¿é—®ï¼šhttps://router.vuejs.org/zh-cn/ ç›®å½•ç»“æž„ â†“ 123456router â”œâ”€â”€ index.js # æˆ‘ä»¬ç»„è£…æ¨¡å—å¹¶å¯¼å‡º store çš„åœ°æ–¹ â””â”€â”€ modules â”œâ”€â”€ home.js # é¦–é¡µæ¨¡å— â”œâ”€â”€ cart.js # è´­ç‰©è½¦æ¨¡å— â””â”€â”€ products.js # äº§å“æ¨¡å— ä¿®æ”¹è·¯ç”±ä¸»æ–‡ä»¶router/index.js ä½¿ç”¨require.contextå®žçŽ°è·¯ç”±åŽ»ä¸­å¿ƒåŒ– 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import Vue from 'vue'import Router from 'vue-router'Vue.use(Router)let router = new Router(&#123; base: '/', // åº”ç”¨çš„åŸºè·¯å¾„ mode: 'hash', // "hash" (URL hash æ¨¡å¼) | "history"(HTML5 History æ¨¡å¼) | "abstract" (Node.js çŽ¯å¢ƒ) scrollBehavior(to, from, savedPosition) &#123; // è·¯ç”±åˆ‡æ¢çš„æ»šåŠ¨è¡Œä¸ºï¼Œåªåœ¨ HTML5 history æ¨¡å¼ä¸‹å¯ç”¨ if (savedPosition) &#123; return savedPosition &#125; else &#123; return &#123; x: 0, y: 0 &#125; &#125; &#125;, routes: (r =&gt; &#123; // åŽ»ä¸­å¿ƒåŒ– // console.log('r', r); // __webpack_require__ let sourceMap = [] let res = r.keys().map(key =&gt; &#123; let rKey = r(key) sourceMap.push(...rKey.default) // console.log('key', key, rKey); // ./modules/home/route.js // &#123;default: Array(3), __esModule: true&#125; return rKey &#125;) return sourceMap &#125;)(require.context('./', true, /^\.\/modules\/\w+\.js$/)),&#125;)router.beforeEach((to, from, next) =&gt; &#123; // console.log('router beforeEach=&gt;', to, from) // å…¨å±€è·¯ç”±åˆ‡æ¢å‰æ‰§è¡Œ // æ˜¯å¦æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶ä¸”ç”¨æˆ·IDæ˜¯å¦å­˜åœ¨ // if (window.localStorage.getItem("loginInfo") &amp;&amp; JSON.stringify(window.localStorage.getItem("loginInfo")).userId) &#123; // next(&#123;path: '/login'&#125;)//é‡å®šå‘åˆ°ç™»å½•é¡µé¢ // &#125; else &#123; // next()//æ­£å¸¸è·³è½¬ // &#125; next()&#125;)router.afterEach((to, from) =&gt; &#123; // console.log('router afterEach=&gt;', router)&#125;)export default router åœ¨ router æ–‡ä»¶å¤¹ä¸‹æ·»åŠ  modules æ–‡ä»¶å¤¹ åœ¨ modules æ–‡ä»¶å¤¹ä¸‹æ·»åŠ  home.js ï¼Œè¿™ä¸ª home.js å¯¹åº”é¦–é¡µä¸šåŠ¡æ¨¡å—ï¼Œé¦–é¡µç›¸å…³çš„è·¯ç”±é¡µé¢éƒ½å¯ä»¥å†™åˆ° home.js æ–‡ä»¶é‡Œã€‚ å¦‚æžœä»¥åŽæ·»åŠ å…¶ä»–ä¸šåŠ¡æ¨¡å—ï¼Œåªéœ€è¦åœ¨ modules æ–‡ä»¶å¤¹æ·»åŠ ç›¸å¯¹åº”çš„ä¸šåŠ¡æ¨¡å—æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä¸šåŠ¡ç›¸å…³çš„è·¯ç”±é¡µé¢ã€‚è¿™æ ·æ‰€æœ‰ä¸åŒä¸šåŠ¡çº¿çš„å¼€å‘äººå‘˜å°±å¯ä»¥äº’ä¸å¹²æ‰° â†“ 1234567891011121314import Home from '../../views/Home'const routes = [ &#123; path: '/', name: 'index', redirect: '/home', &#125;, &#123; path: '/home', name: 'home', component: Home, &#125;,]export default routes å¯¹äºŽä¸éœ€è¦å³æ—¶åŠ è½½çš„éžä¸€çº§é¡µé¢å¯ä»¥ä½¿ç”¨å¼‚æ­¥è·¯ç”±ç»„ä»¶ 123456789101112// region å¼‚æ­¥ç»„ä»¶ - è·¯ç”±åœ°å€demo// ES ææ¡ˆçš„ importï¼ˆæŽ¨èï¼‰&#123; name: 'index', path: '/', component: () =&gt; import('../views/index')&#125;,// ES ææ¡ˆçš„ importï¼Œå¸¦åˆ†ç»„ï¼ŒæŒ‡å®šwebpackChunkNameï¼Œç›¸åŒçš„nameæ‰“åŒ…åˆ°ä¸€ä¸ªjsæ–‡ä»¶&#123; name: 'index', path: '/', component: () =&gt; import(webpackChunkName:'viewsIndex','../views/index')&#125;,// Webpack é£Žæ ¼çš„å¼‚æ­¥ç»„ä»¶&#123; name: 'index', path: '/', component: resolve =&gt; require.ensure(['views/Foo.vue'], () =&gt; resolve(require('views/Foo.vue')))&#125;,// Webpack é£Žæ ¼çš„å¼‚æ­¥ç»„ä»¶ï¼Œå¸¦åˆ†ç»„&#123; name: 'index', path: '/', component: resolve =&gt; require.ensure([], () =&gt; resolve(require('views/index.vue')), 'group-index')&#125;,// AMD é£Žæ ¼çš„å¼‚æ­¥ç»„ä»¶&#123; name: 'index', path: '/', component: resolve =&gt; require(['views/index.vue'], resolve)&#125;,// endregion æ·»åŠ storeæ–‡ä»¶å¤¹ src ä¸‹çš„ store æ–‡ä»¶å¤¹ä¸»è¦æ˜¯å­˜æ”¾ vuex ç›¸å…³ä¿¡æ¯çš„æ›´å¤š vuex ç›¸å…³ä½¿ç”¨æ–¹æ³•è¯·è®¿é—®ï¼šhttps://vuex.vuejs.org/zh-cn/ åœ¨ store æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºç›®å½•ç»“æž„ â†“ 12345678910store â”œâ”€â”€ index.js # æˆ‘ä»¬ç»„è£…æ¨¡å—å¹¶å¯¼å‡º store çš„åœ°æ–¹ â”œâ”€â”€ getters.js # æ ¹çº§åˆ«çš„ getter â”œâ”€â”€ actions.js # æ ¹çº§åˆ«çš„ action â”œâ”€â”€ mutations.js # æ ¹çº§åˆ«çš„ mutation â”œâ”€â”€ mutation-types.js # å®šä¹‰é“¾æŽ¥ action å’Œ mutation çš„æ–¹æ³•åå¸¸é‡ â””â”€â”€ modules â”œâ”€â”€ base.js # é¦–é¡µæ¨¡å— â”œâ”€â”€ cart.js # è´­ç‰©è½¦æ¨¡å— â””â”€â”€ products.js # äº§å“æ¨¡å— ä¸‹é¢å¼€å§‹æ”¹é€  store æ–‡ä»¶å¤¹ â†“ åœ¨mutation-types.jsä¸­æ·»åŠ ä¸€ä¸ªå¸¸é‡ 123export const BASE = &#123; SET_USER_INFO: 'SET_USER_INFO',&#125; åœ¨action-types.jsä¸­æ·»åŠ ä¸€ä¸ªå¸¸é‡ 123export const BASE = &#123; login: 'login',&#125; ä¿®æ”¹modules/base.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849import Vue from 'vue'import &#123; base &#125; from '../mutation-types'import axios from 'axios'import qs from 'qs'const state = &#123; version: '', token: null, user: &#123; userID: '', userName: '', name: '', tel: '', email: '', head: '', &#125;,&#125;const getters = &#123; versionGetter(state, getters) &#123; return state.version &#125;,&#125;const mutations = &#123; [BASE.SET_USER_INFO](state, userInfo) &#123; userInfo.userID &amp;&amp; (state.user.userID = userInfo.userID) userInfo.USERNAME &amp;&amp; (state.user.userName = userInfo.USERNAME) userInfo.NAME &amp;&amp; (state.user.name = userInfo.NAME) userInfo.TEL &amp;&amp; (state.user.tel = userInfo.TEL) userInfo.EMAIL &amp;&amp; (state.user.email = userInfo.EMAIL) userInfo.HEAD &amp;&amp; (state.user.head = userInfo.HEAD) &#125;,&#125;const actions = &#123; async login(&#123; commit, dispatch, state &#125;, &#123; userName, password &#125;) &#123; let userInfo = await axios.post('/api/login', qs.stringify(&#123; userName, password &#125;)) commit(BASE.SET_USER_INFO, userInfo) &#125;,&#125;export default &#123; // namespaced: true, // https://vuex.vuejs.org/zh/guide/modules.html#å‘½åç©ºé—´ state, mutations, actions, getters,&#125; ä¿®æ”¹ vuex ä¸»æ–‡ä»¶index.jsï¼Œç»„åˆæ‰€æœ‰çŠ¶æ€æ¨¡å— 12345678910111213141516171819202122232425262728293031import Vue from 'vue'import Vuex from 'vuex'import getters from './getters'import actions from './actions'import mutations from './mutations'import base from './modules/base'import cart from './modules/cart'import products from './modules/products'// import createLogger from 'vuex/dist/logger' //vuexå†…ç½®çš„Loggeræ—¥å¿—æ’ä»¶const debug = process.env.NODE_ENV !== 'production' // å‘å¸ƒå“ç§æ—¶éœ€è¦ç”¨ Webpack çš„ DefinePlugin æ¥è½¬æ¢ process.env.NODE_ENV !== 'production' çš„å€¼ä¸º falseVue.use(Vuex)const state = &#123;&#125;export default new Vuex.Store(&#123; state, getters, mutations, actions, modules: &#123; base, cart, products, // https://vuex.vuejs.org/zh/guide/modules.html#æ¨¡å—åŠ¨æ€æ³¨å†Œ &#125;, strict: debug, // å¼€å‘é˜¶æ®µä½¿ç”¨ // plugins: debug ? [createLogger()] : []//vuexæ’ä»¶,https://vuex.vuejs.org/zh/guide/plugins.html&#125;) ä¿®æ”¹main.jsï¼Œå¼•å…¥ vuex 123456789101112//...import store from './store/index'//...new Vue(&#123; el: '#app', router, store, // components: &#123; App &#125;, // template: '&lt;App/&gt;', render: h =&gt; h(App), // https://cn.vuejs.org/v2/guide/render-function.html#JSX&#125;) https://juejin.im/post/5bcd967b6fb9a05d07197b1e Vuex å®žæˆ˜ï¼šå¦‚ä½•åœ¨å¤§è§„æ¨¡ Vue åº”ç”¨ä¸­ç»„ç»‡ Vuex ä»£ç  super-vuex æ·»åŠ mixinsæ–‡ä»¶å¤¹ç›®å½•ç»“æž„ â†“ 12mixins â”œâ”€â”€ index.js # å…¨å±€mixin æ·»åŠ filtersæ–‡ä»¶å¤¹ç›®å½•ç»“æž„ â†“ 12filters â”œâ”€â”€ index.js # å…¨å±€è¿‡æ»¤å™¨ æ·»åŠ utilsæ–‡ä»¶å¤¹ç›®å½•ç»“æž„ â†“ 1234utils â”œâ”€â”€ fetch.js # axios â”œâ”€â”€ filters.js # å…¨å±€filter â””â”€â”€ mixin.js # å…¨å±€mixin src/main.jsä¸­æ·»åŠ å…¨å±€å¼•ç”¨ â†“ 12345678910import * as filters from './utils/filters'import fetch from './utils/fetch'/* å…¨å±€æ³¨å†Œfetch */Vue.prototype.$fetch = fetch/* æ³¨å†Œå…¨å±€è¿‡æ»¤å™¨ */Object.keys(filters).forEach(key =&gt; &#123; Vue.filter(key, filters[key])&#125;) å°è£… axios123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138import Vue from 'vue'import router from '../router'import axios from 'axios'import qs from 'qs'import Toast from '../components/toast'// #region config// æ¯é¡µæ¡æ•°export const ROW = 10// åŠ è½½æœ€å°æ—¶é—´export const MINI_TIME = 300// è¶…æ—¶æ—¶é—´ï¼ˆè¶…æ—¶æ—¶é—´ï¼‰export const TIME_OUT_MAX = 8000// çŽ¯å¢ƒvalueexport const _env = process.env.NODE_ENV// è¯·æ±‚ç»„ï¼ˆåˆ¤æ–­å½“å‰è¯·æ±‚æ•°ï¼‰export const _requests = []// #endregion// #region å®žä¾‹åŒ–axiosconst _instance = axios.create(&#123; timeout: TIME_OUT_MAX,&#125;)// #endregion// region requestç»Ÿä¸€å¤„ç†æ“ä½œ_instance.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8'// POSTä¼ å‚åºåˆ—åŒ–_instance.interceptors.request.use( config =&gt; &#123; if (config.method === 'post') &#123; config.data = qs.stringify(config.data) &#125; return config &#125;, error =&gt; &#123; Toast('é”™è¯¯çš„ä¼ å‚') return Promise.reject(error) &#125;,)// endregion// region responseç»Ÿä¸€å¤„ç†æ“ä½œ_instance.interceptors.response.use( res =&gt; &#123; let _message = null if (res.status !== 200) &#123; console.error(res) switch (res.status) &#123; case 404: _message = '404,é”™è¯¯è¯·æ±‚' break case 401: router.push(&#123; path: '/login', query: &#123; redirect: router.currentRoute.fullPath &#125; &#125;) _message = 'æœªæŽˆæƒ' break case 403: _message = 'ç¦æ­¢è®¿é—®' break case 408: _message = 'è¯·æ±‚è¶…æ—¶' break case 500: _message = 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯' break case 501: _message = 'åŠŸèƒ½æœªå®žçŽ°' break case 503: _message = 'æœåŠ¡ä¸å¯ç”¨' break case 504: _message = 'ç½‘å…³é”™è¯¯' break default: _message = 'æœªçŸ¥é”™è¯¯' &#125; Toast(_message) return Promise.reject(_message) &#125; else &#123; return res &#125; &#125;, error =&gt; &#123; console.error(error) Toast(error || 'æœåŠ¡å™¨ç¹å¿™ï¼Œè¯·ç¨åŽé‡è¯•') return Promise.reject(error || 'æœåŠ¡å™¨ç¹å¿™ï¼Œè¯·ç¨åŽé‡è¯•') &#125;,)// endregion// #region send get/postlet toast = null/** * å‘é€GETè¯·æ±‚ * @param api æŽ¥å£api * @param params è¯·æ±‚å‚æ•° * @returns &#123;Promise.&lt;T&gt;&#125; */async function get(api, params) &#123; try &#123; if (!toast) toast = Toast(&#123; time: -1, message: 'åŠ è½½ä¸­', icon: 'loading' &#125;) let &#123; data &#125; = await _instance.get(api, &#123; params &#125;) toast.close() return data &#125; catch (e) &#123; toast.close() Toast(&#123; message: 'ç½‘ç»œå¼‚å¸¸', position: 'bottom' &#125;) throw e &#125;&#125;/** * å‘é€POSTè¯·æ±‚ * @param api æŽ¥å£api * @param params è¯·æ±‚å‚æ•° * @returns &#123;Promise.&lt;T&gt;&#125; */async function post(api, params) &#123; try &#123; if (!toast) toast = Toast(&#123; time: -1, message: 'åŠ è½½ä¸­', icon: 'loading' &#125;) let &#123; data &#125; = await _instance.post(api, qs.stringify(params)) toast.close() return data &#125; catch (e) &#123; toast.close() Toast(&#123; message: 'ç½‘ç»œå¼‚å¸¸', position: 'bottom' &#125;) throw e &#125;&#125;// #endregionexport default &#123; _instance, get, post,&#125; config é…ç½®build ç”Ÿæˆçš„æ–‡ä»¶è·¯å¾„ä½¿ç”¨ç›¸å¯¹è·¯å¾„ä¿®æ”¹config/index.jsæ–‡ä»¶ä¸­buildèŠ‚ç‚¹çš„assetsPublicPathå€¼ 1234567891011module.exports = &#123; dev: &#123; // ... &#125;, build: &#123; // ... assetsPublicPath: './', // ... &#125;,&#125; å¼€å‘çš„çš„æ—¶å€™éœ€è¦ä½¿ç”¨ä»£ç†(proxy)è·¨åŸŸè®¿é—®æœåŠ¡å™¨æŽ¥å£ä¿®æ”¹config/index.jsæ–‡ä»¶ä¸­devèŠ‚ç‚¹çš„proxyTableå€¼ 123456789101112131415module.exports = &#123; dev: &#123; // ... proxyTable: &#123; '/api': &#123; target: 'https://123.57.89.97:8081', changeOrigin: true, // pathRewrite: &#123; // '^/api': '/api' // &#125; &#125;, &#125;, // ... &#125;,&#125; åˆ†ç¦»çº¿ä¸ŠçŽ¯å¢ƒå’Œæœ¬åœ°çŽ¯å¢ƒçš„é…ç½®ä¿¡æ¯ä¿®æ”¹config/dev.env.jsä¸Žconfig/prod.env.jsï¼Œä¸ºä¸åŒçš„çŽ¯å¢ƒé…ç½®æ–‡ä»¶æ·»åŠ ä¸ŽNODE_ENVåŒçº§çš„çŽ¯å¢ƒå˜é‡ 1234module.exports = &#123; NODE_ENV: '"development"', API: '"https://123.57.89.97:8081"',&#125; é€šç”¨æ ·å¼(SCSS)ç›®å½•ç»“æž„ â†“ 1234567assets â””â”€â”€ scss â”œâ”€â”€ base.scss # åŸºç¡€æ ·å¼ â”œâ”€â”€ common.scss # é€šç”¨æ ·å¼ â”œâ”€â”€ fun.scss # å‡½æ•° â”œâ”€â”€ mixin.scss # æ··åˆ â””â”€â”€ variable.js # å˜é‡ base.scss12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788@charset "utf-8";@import 'variable';@import 'fun';@import 'mixin';@import 'common';/*åŸºç¡€æ ·å¼*/html,body,#app &#123; position: absolute; top: 0; bottom: 0; left: 0; right: 0; z-index: 1; width: 100%; height: 100%; font-family: Arial, 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', Verdana, sans-serif;&#125;ul,li &#123; padding: 0; margin: 0; list-style: none;&#125;* &gt; img &#123; max-width: 100%; max-height: 100%;&#125;button &#123; position: relative; display: block; margin-left: auto; margin-right: auto; padding-left: 14px; padding-right: 14px; box-sizing: border-box; font-size: 18px; text-align: center; text-decoration: none; line-height: 2.55555556; border-radius: 5px; -webkit-tap-highlight-color: transparent; overflow: hidden; color: #000000; background-color: #f8f8f8; &amp;::after &#123; content: ' '; width: 200%; height: 200%; position: absolute; top: 0; left: 0; border: 1px solid rgba(0, 0, 0, 0.2); -webkit-transform: scale(0.5); transform: scale(0.5); -webkit-transform-origin: 0 0; transform-origin: 0 0; box-sizing: border-box; border-radius: 10px; &#125;&#125;//é¡µé¢åˆ‡æ¢åŠ¨ç”».slide &#123; &amp;-enter, &amp;-leave-to &#123; -webkit-transform: translate(100%, 0); transform: translate(100%, 0); &#125; &amp;-enter-active, &amp;-leave-active &#123; transition: all 0.5s cubic-bezier(0.55, 0, 0.1, 1); &#125; &amp;-enter-to, &amp;-leave &#123; -webkit-transform: translate(0, 0); transform: translate(0, 0); &#125;&#125; common.scss123456789101112131415161718192021222324252627282930313233@charset "UTF-8";@import 'fun';@import 'mixin';@import 'variable';/*é€šç”¨æ ·å¼*/* &#123; box-sizing: border-box;&#125;.clear &#123; display: block !important; clear: both !important; float: none !important; margin: 0 !important; padding: 0 !important; height: 0; line-height: 0; font-size: 0; overflow: hidden;&#125;.clearfix &#123; zoom: 1;&#125;.clearfix:after &#123; content: ''; display: block; clear: both; height: 0;&#125; fun.scss1234567@charset "UTF-8";/*å‡½æ•°*/@function rem($pixels) &#123; @return $pixels / 100px * 1rem;&#125; mixin.scss1234567891011@charset "UTF-8";/*æ··åˆ*/@mixin fullpage &#123; position: absolute; top: 0; bottom: 0; right: 0; left: 0;&#125; variable.scss1234567@charset "UTF-8";@import 'fun';/*å˜é‡*/$headerHeight: rem(50px); æŸ¥ç¼ºè¡¥æ¼æˆ‘ç”¨äº† axios , ä¸ºä»€ä¹ˆ IE æµè§ˆå™¨ä¸è¯†åˆ«(IE9+)é‚£æ˜¯å› ä¸º IE æ•´ä¸ªå®¶æ—éƒ½ä¸æ”¯æŒ promise, è§£å†³æ–¹æ¡ˆ: 1234npm install es6-promise// åœ¨ main.js å¼•å…¥å³å¯// ES6çš„polyfillrequire('es6-promise').polyfill()]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Style Guide For å‰ç«¯]]></title>
    <url>%2Fposts%2F16482fed.html</url>
    <content type="text"><![CDATA[å‘½å æ–‡ä»¶å¤¹ã€.JSã€.CSS: å°é©¼å³°(little camel-case) .vue ç»„ä»¶: å¤§é©¼å³°(big camel-case)* cssçš„classå‘½åéµå¾ª BEM é‡æž„ç»„ä»¶ç»„ä»¶å­˜æ”¾ä½ç½®åªæœ‰ ä¸€ä¸ª é¡µé¢å†…çš„ç»„ä»¶ï¼Œæ”¾åœ¨é¡µé¢æ–‡ä»¶å¤¹ä¸‹çš„ components æ–‡ä»¶å¤¹ä¸‹ï¼› ä¸¤ä¸ª é¡µé¢å…±ç”¨çš„ç»„ä»¶ï¼Œæ”¾åœ¨ç¬¬ä¸€ä¸ªé¡µé¢æ–‡ä»¶å¤¹ä¸‹çš„ components æ–‡ä»¶å¤¹ä¸‹ï¼› ä¸‰ä¸ªä»¥ä¸Š é¡µé¢çš„å…±ç”¨ç»„ä»¶ï¼Œæ”¾åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹çš„ components æ–‡ä»¶å¤¹ä¸‹ã€‚ ç»„ä»¶å­˜æ”¾çš„ä½ç½®ä¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸æ–­çš„è°ƒæ•´é‡æž„ã€‚ æ·»åŠ é¡¹ç›®çº§å…¬ç”¨ç»„ä»¶éœ€å°†ç»„ä»¶å‚æ•°åŠç”¨æ³•æè¿°æ·»åŠ åˆ° README.md ã€‚ Vue å¼•ç”¨ç»„ä»¶ä¸€å¾‹ä½¿ç”¨ å¤§é©¼å³°(big camel-case) å‘½åã€‚ å¦‚é‡ Footer ç»„ä»¶åˆ™å¯å°†ç»„ä»¶åå®šä¹‰ä¸º VFooter ï¼Œä¸è¦ä½¿ç”¨ MyFooter ã€‚ weexé¡µé¢æ–‡ä»¶å¤¹å‘½åä½¿ç”¨ å°é©¼å³°(little camel-case) ï¼Œæ–‡ä»¶å¤¹ç”± è‡³å°‘ä¸¤ä¸ªå•è¯ç»„æˆ ã€‚ gittag å‘½åè§„èŒƒ åˆ†æ”¯+ç‰ˆæœ¬å·+æ—¥æœŸã€‚ç‰ˆæœ¬å·å‰3ä½é€¢9è¿›1ï¼Œæœ€åŽä¸€ä½æžé™é€¢99è¿›1ã€‚ä¾‹å¦‚ï¼šdev-v0.3.3.01-20180110 pre-v0.3.9.05-20181101 master-v0.3.9.05-20180101 masterçš„tagæ ¹æ®preçš„æœ€åŽä¸€ä¸ªç‰ˆæœ¬ã€‚ æ›´å¤š Vue é£Žæ ¼æŒ‡å— Airbnb JavaScript Style Guide]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>ä»£ç è§„èŒƒ</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è¿™æ¬¡ï¼Œå½»åº•å¼„æ‡‚æŽ¥å£åŠæŠ½è±¡ç±»]]></title>
    <url>%2Fposts%2F912e5c18.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡æ—¨åœ¨è®¨è®ºæŠ½è±¡ç±»å’ŒæŽ¥å£çš„ä½œç”¨ã€å®žä¾‹åŠä½¿ç”¨åœºæ™¯ï¼Œéƒ½æ˜¯æˆ‘çš„ç†è§£å’Œæ€»ç»“ã€‚æ›´å¤šå…³äºŽæŽ¥å£å’ŒæŠ½è±¡ç±»çš„æ¦‚å¿µçŸ¥è¯†ï¼Œå¯è‡ªè¡ŒæŸ¥é˜…ç›¸å…³æ–‡æ¡£ã€‚ 1. æŠ½è±¡ç±»åŠå…¶ä½œç”¨æŠ½è±¡ç±»ï¼Œé¡¾åæ€ä¹‰ï¼Œå³ç±»çš„æŠ½è±¡ã€‚ åœ¨ä»‹ç»é¢å‘å¯¹è±¡æ¦‚å¿µæ—¶ï¼Œæˆ‘ä»¬çŸ¥é“ç±»æ˜¯å®¢è§‚äº‹ç‰©çš„æŠ½è±¡ï¼Œè€ŒæŠ½è±¡ç±»åˆæ˜¯ç±»çš„è¿›ä¸€æ­¥æŠ½è±¡ï¼Œè¯¥æ€Žä¹ˆç†è§£å‘¢ï¼Ÿ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å®šä¹‰è‹¥å¹²ä¸ªç±» class BMWã€class Benzã€class Audiï¼Œåˆ†åˆ«å¯¹å®¢è§‚äº‹ç‰©â€œå®é©¬â€ã€â€œå¥”é©°â€ã€â€œå¥¥è¿ªâ€ä¸‰ç§æ±½è½¦è¿›è¡ŒæŠ½è±¡ï¼ŒåŒ…å«ç›¸å…³å±žæ€§å’Œè¡Œä¸ºï¼ˆå³æ–¹æ³•ï¼‰ã€‚ä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼Œæ±½è½¦éƒ½æœ‰é€šç”¨çš„å±žæ€§å’Œè¡Œä¸ºï¼Œæ¯”å¦‚å“ç‰Œã€å‘åŠ¨æœºã€æ–¹å‘ç›˜ã€è½®èƒŽç­‰å±žæ€§ï¼Œå‰è¿›ã€åŽé€€ã€è½¬å¼¯ç­‰è¡Œä¸ºï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å®é©¬ã€å¥”é©°ç­‰æ±½è½¦ä¹‹ä¸Šï¼Œè¿›ä¸€æ­¥æŠ½è±¡å‡ºâ€œæ±½è½¦â€ç±» abstract class Carï¼ŒåŒ…å«é€šç”¨çš„ç‰¹æ€§ï¼ˆå±žæ€§å’Œæ–¹æ³•ï¼‰ã€‚è®© BMWã€Benzã€Audi ç­‰ç»§æ‰¿æŠ½è±¡ç±» extends Carï¼Œä¾¿æ‹¥æœ‰äº†æ±½è½¦çš„é€šç”¨ç‰¹æ€§ï¼Œç„¶åŽåœ¨æŠ½è±¡ç±»åŸºç¡€ä¸Šå®šä¹‰å„è‡ªçš„ç‰¹æ®Šå±žæ€§åŠæ–¹æ³•ã€‚ è¿™é‡Œçš„ abstract class Car å³æŠ½è±¡ç±»ï¼Œå¯ä»¥çœ‹å‡ºï¼ŒæŠ½è±¡ç±»æ˜¯ç”¨æ¥æ•æ‰å­ç±»çš„é€šç”¨ç‰¹æ€§çš„ï¼ŒåŒ…æ‹¬å±žæ€§åŠè¡Œä¸ºã€‚ 2. æŽ¥å£åŠå…¶ä½œç”¨ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹æŽ¥å£ï¼Œå‡ä½¿æˆ‘ç ”å‘å‡ºæ¥ä¸€å°ä¼šé£žçš„æ±½è½¦â€œä¼¯ç‰¹èŽ±æ–¯â€ï¼ˆBote-Royceï¼‰ï¼Œåœ¨ç¨‹åºä¸­å®šä¹‰å¦‚ä¸‹ï¼š 12345678910class BoteRoyce extends Car &#123; //...çœç•¥é€šç”¨ç‰¹æ€§ /** * å¯ä»¥é£ž */ void fly() &#123; System.out.println("å‡è£…ä¼šé£ž~"); &#125;&#125; çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼š BoteRoyce extends Carï¼šè¡¨è¾¾è¿™æ˜¯ä¸€è¾†æ±½è½¦ï¼› fly() æ–¹æ³•ï¼šä½“çŽ°è¿™è½¦å¯ä»¥é£žã€‚ ä½†æ˜¯ï¼Œéšç€æŠ€æœ¯å‘å±•ï¼Œå‡ºçŽ°äº†ä¼—å¤šå¯ä»¥åˆ¶é€ é£žè¡Œæ±½è½¦çš„åŽ‚å•†ï¼Œéš¾é“æ¯ä¸€ä¸ªå¯ä»¥é£žçš„æ±½è½¦éƒ½åŽ»å®šä¹‰ä¸€ä¸ª fly() æ–¹æ³•ï¼Ÿ å¿ƒæƒ³è¿™è¿˜ä¸ç®€å•ï¼Œåœ¨æŠ½è±¡ç±» Car ä¸­å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³• abstract void fly() è®©å­ç±»åŽ»å®žçŽ°ï¼Œä¸å°±å¯ä»¥äº†å—ï¼Ÿ No No Noâ€¦ æ­£å¦‚ä¸æ˜¯æ‰€æœ‰ç‰›å¥¶éƒ½å«ç‰¹ä»‘è‹ä¸€æ ·ï¼Œä¸æ˜¯æ‰€æœ‰æ±½è½¦éƒ½ä¼šé£žï¼Œé£žè¡ŒåŠŸèƒ½ä¸æ˜¯æ±½è½¦çš„é€šç”¨ç‰¹æ€§ã€‚å°† fly() æ–¹æ³•å®šä¹‰åœ¨ Car ä¸­ï¼Œæ˜¾ç„¶è¿èƒŒäº†â€œæŠ½è±¡ç±»ç”¨æ¥æ•æ‰å­ç±»çš„é€šç”¨ç‰¹æ€§â€è¿™ä¸€åŽŸåˆ™ã€‚ åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œè§£å†³æ–¹æ¡ˆä¹‹ä¸€å°±æ˜¯ä½¿ç”¨æŽ¥å£ï¼Œå¦‚ä¸‹ï¼š 1234567/** * é£žè¡Œå™¨æŽ¥å£ */public interface Aircraft &#123; //å®šä¹‰æŠ½è±¡æ–¹æ³• void fly();&#125; ç±» BoteRoyce çš„å®šä¹‰ä¿®æ”¹å¦‚ä¸‹ï¼š 12345678910111213/* * å®žçŽ° Aircraft æŽ¥å£ï¼Œè¡¨ç¤ºå…·å¤‡é£žè¡Œå™¨èƒ½åŠ› */class BoteRoyce extends Car implements Aircraft &#123; /** * è¦†å†™æŽ¥å£æ–¹æ³•ï¼Œå®žçŽ°é£žè¡Œèƒ½åŠ› */ @Override void fly() &#123; System.out.println("å‡è£…ä¼šé£ž~"); &#125;&#125; å†æœ‰å…¶ä»–å“ç‰Œçš„é£žè¡Œæ±½è½¦ï¼Œéƒ½å¯ä»¥é€šè¿‡ extends Car implements Aircraft å®žçŽ°é£žè¡Œèƒ½åŠ›ã€‚ ä¸Šè¿°å®šä¹‰çš„ interface Aircraft å³ä¸ºæŽ¥å£ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æŽ¥å£å¯¹è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ã€‚ 3. æŽ¥å£å’ŒæŠ½è±¡ç±»çš„åŒºåˆ«å…³äºŽäºŒè€…çš„åŒºåˆ«ï¼Œå¯ä»¥ç»“åˆå‰é¢çš„ä¾‹å­ï¼Œæ¥åŠ æ·±ç†è§£ã€‚ æŠ½è±¡ç±»æ˜¯å¯¹ç±»æœ¬è´¨çš„æŠ½è±¡ï¼Œè¡¨è¾¾çš„æ˜¯ is a çš„å…³ç³»ï¼Œæ¯”å¦‚ï¼šBMW is a Carã€‚æŠ½è±¡ç±»åŒ…å«å¹¶å®žçŽ°å­ç±»çš„é€šç”¨ç‰¹æ€§ï¼Œå°†å­ç±»å­˜åœ¨å·®å¼‚åŒ–çš„ç‰¹æ€§è¿›è¡ŒæŠ½è±¡ï¼Œäº¤ç”±å­ç±»åŽ»å®žçŽ°ã€‚ è€ŒæŽ¥å£æ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œè¡¨è¾¾çš„æ˜¯ like a çš„å…³ç³»ã€‚æ¯”å¦‚ï¼šBote-Royce like a Aircraftï¼ˆåƒé£žè¡Œå™¨ä¸€æ ·å¯ä»¥é£žï¼‰ï¼Œä½†å…¶æœ¬è´¨ä¸Š is a Carã€‚æŽ¥å£çš„æ ¸å¿ƒæ˜¯å®šä¹‰è¡Œä¸ºï¼Œå³å®žçŽ°ç±»å¯ä»¥åšä»€ä¹ˆï¼Œè‡³äºŽå®žçŽ°ç±»ä¸»ä½“æ˜¯è°ã€æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼ŒæŽ¥å£å¹¶ä¸å…³å¿ƒã€‚ 4. æŽ¥å£ä¸ŽæŠ½è±¡ç±»çš„ä½¿ç”¨åœºæ™¯ç†Ÿæ‚‰ Java çš„åŒå­¦å¯èƒ½ä¼šè´¨ç–‘ï¼Œä¸Šè¿°å…³äºŽæŽ¥å£çš„ä½¿ç”¨ï¼Œå®Œå…¨å¯ä»¥é€šè¿‡å†æ¬¡æŠ½è±¡ Car åŽ»å®žçŽ°ï¼š 12345678/** * ä¼šé£žçš„æ±½è½¦ */abstract class FlyCar extends Car &#123; //å®šä¹‰æŠ½è±¡æ–¹æ³• public abstract void fly();&#125; æ™®é€šçš„æ±½è½¦ä¾ç„¶ extends Carï¼Œå¯ä»¥é£žè¡Œçš„æ±½è½¦ extends FlyCar å³å¯ï¼š 12345678910111213/* * ç»§æ‰¿ FlyCarï¼Œè¡¨ç¤ºæ˜¯å¯ä»¥é£žè¡Œçš„æ±½è½¦ */class BoteRoyce extends FlyCar &#123; /** * è¦†å†™æŠ½è±¡æ–¹æ³•ï¼Œå®žçŽ°é£žè¡Œèƒ½åŠ› */ @Override public void fly() &#123; System.out.println("å‡è£…ä¼šé£ž~"); &#125;&#125; å¦‚æžœä½ ä¹Ÿè¿™ä¹ˆæƒ³ï¼Œè¡¨ç¤ºä½  get åˆ°äº†æŠ½è±¡ç±»çš„ç‚¹ã€‚ä¸è¿‡è¯è¯´å›žæ¥ï¼Œè¿™æ ·çš„è¯æŽ¥å£å²‚ä¸æ˜¯æ²¡æœ‰å­˜åœ¨çš„æ„ä¹‰äº†ï¼Ÿ å½“ç„¶ä¸æ˜¯äº†ã€‚å°± BoteRoyce è€Œè¨€ï¼Œå¦‚æžœä½ å…³å¿ƒçš„æ˜¯â€œé£žè¡Œæ±½è½¦â€è¿™ä¸ªæ•´ä½“ï¼Œé‚£ä¹ˆå®šä¹‰æŠ½è±¡ç±» FlyCar æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼›å¦‚æžœä½ å…³å¿ƒçš„æ˜¯æ±½è½¦å…·å¤‡â€œé£žè¡Œâ€çš„è¡Œä¸ºï¼Œé‚£ä¸å¦¨ç»§ç»­æ²¿ç”¨å‰é¢ä½¿ç”¨ Aircraft æŽ¥å£çš„æ–¹æ¡ˆã€‚ è¿™ä¸€ç‚¹ä¸Žè®¾è®¡æ¨¡å¼ä¸­å…­å¤§åŽŸåˆ™ä¹‹ä¸€çš„â€œé‡Œæ°æ›¿æ¢åŽŸåˆ™â€ä¸è°‹è€Œåˆï¼Œè¯¥åŽŸåˆ™æŒ‡å‡ºï¼šæ‰€æœ‰å¼•ç”¨åŸºç±»ï¼ˆæŠ½è±¡ç±»æˆ–æŽ¥å£ï¼‰çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜Žåœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä½ éµå¾ªè¯¥åŽŸåˆ™æ—¶ï¼Œä½ å¿…é¡»è¦è€ƒè™‘ä½ å…³å¿ƒçš„æ˜¯â€œé£žè¡Œæ±½è½¦â€å®žä½“ï¼Œè¿˜æ˜¯â€œé£žè¡Œâ€è¡Œä¸ºï¼Œå¹¶å°†å…¶ä½œä¸ºåŸºç±»ï¼Œä»Žè€Œå†³å®šç¨‹åºæ‰€èƒ½æŽ¥å—çš„å­ç±»å¯¹è±¡ã€‚ åŒæ—¶ï¼Œâ€œæŽ¥å£éš”ç¦»åŽŸåˆ™â€æŒ‡å¯¼æˆ‘ä»¬ï¼Œä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æŽ¥å£ä¸Šã€‚ç›¸æ¯”äºŽæŠ½è±¡ç±» FlyCarï¼ŒæŽ¥å£ Aircraft èƒ½æœ€å¤§é™åº¦çš„å‡å°‘å¯¹å¤–æš´éœ²çš„æŽ¥å£ï¼Œå¹¶éšè—ç»†èŠ‚ï¼Œæ›´ç¬¦åˆè¿™ä¸€åŽŸåˆ™ã€‚ æ‰€ä»¥è¯´å•Šï¼Œé¢å‘å¯¹è±¡åªæ˜¯æŒ‡å¯¼æˆ‘ä»¬ç¼–ç¨‹çš„æ€æƒ³ï¼Œè€Œéžæ¡æ¡æ¡†æ¡†ã€‚åœ¨å®žé™…å¼€å‘ä¸­ï¼Œå…·ä½“ä½¿ç”¨æŠ½è±¡ç±»è¿˜æ˜¯æŽ¥å£ï¼Œå¹¶æ²¡æœ‰ç»å¯¹é™åˆ¶ï¼Œè€Œæ˜¯å–å†³äºŽä½ çš„ä¸šåŠ¡åœºæ™¯å’Œæž¶æž„è®¾è®¡ã€‚ 5. æ€»ç»“å¥½äº†ï¼Œæœ¬æ¬¡å…³äºŽæŽ¥å£ä¸ŽæŠ½è±¡ç±»çš„æ€»ç»“å°±åˆ°è¿™å„¿ï¼Œä½ å½»åº•å¼„æ‡‚äº†å—ï¼Ÿä¸‹æœŸåˆ†äº«å†è§~]]></content>
      <categories>
        <category>Java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>æŽ¥å£</tag>
        <tag>æŠ½è±¡ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤¯å®žJavaï¼šä»Žé¢å‘å¯¹è±¡è¯´èµ·]]></title>
    <url>%2Fposts%2F92341839.html</url>
    <content type="text"><![CDATA[åˆšå­¦ä¹  Java é‚£ä¼šå°±æŽ¥è§¦äº†â€œé¢å‘å¯¹è±¡â€çš„æ¦‚å¿µï¼Œä½†å½“æ—¶å¹¶æ²¡æœ‰å¤ªå¤šå®žæˆ˜ç»éªŒï¼Œæ‰€ä»¥å¯¹å…¶çš„ç†è§£ä¹Ÿä»…é™äºŽæ¦‚å¿µã€‚å½“å·¥ä½œä¸¤å¹´åŽå†å›žé¡¾ä¸€ä¸‹ï¼Œæœ‰äº›æ¦‚å¿µèƒ½å¤Ÿè½åœ°äº†ï¼Œé‚è®°å½•ä¸€ä¸‹ã€‚ 1. ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡é¢å‘å¯¹è±¡æ˜¯ä¸€ç§ç¨‹åºè®¾è®¡çš„æ€æƒ³ï¼Œè€Œä¸æ˜¯ä¸€ç§æ–¹æ³•ï¼Œäº¦æˆ–å‡†åˆ™ã€‚å…¶æŒ‡å¯¼æˆ‘ä»¬ä»ŽçŽ°å®žä¸–ç•Œä¸­å®¢è§‚å­˜åœ¨çš„äº‹ç‰©å‡ºå‘ï¼Œè¿›è¡Œç¨‹åºè®¾è®¡ã€‚ 2. ä»€ä¹ˆæ˜¯å¯¹è±¡Everything is Objectï¼Œåœ¨ Java è¯­è¨€çš„ä¸–ç•Œä¸­ï¼Œä¸‡äº‹ä¸‡ç‰©çš†å¯¹è±¡ã€‚ä¸Šé¢æåˆ°â€œä»ŽçŽ°å®žä¸–ç•Œä¸­å®¢è§‚å­˜åœ¨çš„äº‹ç‰©å‡ºå‘â€ï¼Œè¿™é‡Œå®¢è§‚å­˜åœ¨çš„äº‹ç‰©ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œå¯¹è±¡â€ã€‚ åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡æ˜¯ç¨‹åºçš„åŸºæœ¬æž„æˆå•å…ƒï¼Œæ˜¯å®¢è§‚å­˜åœ¨çš„äº‹ç‰©çš„ä½“çŽ°ã€‚ä¸€ä¸ªå¯¹è±¡é€šå¸¸ç”±ä¸€ç»„å±žæ€§å’Œå¯¹è¿™ç»„å±žæ€§è¿›è¡Œæ“ä½œçš„è‹¥å¹²æœåŠ¡ï¼ˆæ–¹æ³•ï¼‰æž„æˆã€‚ 3. é¢å‘å¯¹è±¡ä¸Žé¢å‘è¿‡ç¨‹çš„å‡ºçŽ°é¢å¯¹ç®€å•çš„è½¯ä»¶ç¨‹åºï¼Œæˆ‘ä»¬å¾€å¾€ä¸éœ€è¦è€ƒè™‘è¿‡å¤šçš„è®¾è®¡ï¼Œä»»ä½•ä¸€ä¸ªå°çš„åŠŸèƒ½å•å…ƒæˆ–æ¨¡å—ï¼Œéƒ½å¯ä»¥æŒ‰ç…§ä¸€å®šçš„æ­¥éª¤åŽ»å®žçŽ°ï¼Œè¿™ç§ step by step çš„æ–¹å¼å³ä¸ºé¢å‘è¿‡ç¨‹ã€‚ éšç€ç¨‹åºçš„å¤æ‚æ€§æå‡ï¼Œæˆ‘ä»¬æ— æ³•æŒ‰æ­¥éª¤åŽ»æè¿°å¹¶å®žçŽ°ç¼–ç ï¼Œæ‰€ä»¥é¢å‘è¿‡ç¨‹å·²æ— æ³•é€‚åº”ã€‚åŠ ä¹‹è€ƒè™‘åˆ°ä»£ç çš„å¯è¯»åŠå¤ç”¨æ€§ç­‰ï¼Œä¾¿æœ‰äº†å¯¹è±¡çš„æ¦‚å¿µï¼Œä»¥åŠé¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³ã€‚ å½“ç„¶ï¼Œè¿˜æœ‰é¢å‘ç»„ä»¶ã€é¢å‘æœåŠ¡ç­‰è®¾è®¡æ€æƒ³ï¼Œä¸åœ¨æ­¤è®¨è®ºã€‚ 4. é¢å‘å¯¹è±¡ä¸Žé¢å‘è¿‡ç¨‹çš„åŒºåˆ«è¦çŸ¥é“ï¼ŒäºŒè€…å¹¶ä¸æ˜¯éžæ­¤å³å½¼ï¼Œè€Œæ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚ é¢å‘å¯¹è±¡æ€æƒ³è¦æ±‚æˆ‘ä»¬ä»Žå®è§‚ä¸Šè¿›è¡Œç¨‹åºè®¾è®¡ï¼ŒæŠ½è±¡å‡ºä¸€ä¸ªä¸ªâ€œå¯¹è±¡â€ã€‚è€Œé¢å‘è¿‡ç¨‹ï¼Œåˆ™åœ¨å¾®è§‚ä¸Šå¯¹â€œå¯¹è±¡â€å†…éƒ¨è¿›è¡Œå…·ä½“çš„å®žçŽ°ã€‚ å¯ä»¥çœ‹å‡ºï¼Œé¢å‘å¯¹è±¡æœ€ç»ˆè¿˜æ˜¯ç¦»ä¸å¼€é¢å‘è¿‡ç¨‹ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œéœ€è¦ç¼–ç¨‹å®žçŽ°ç»˜åˆ¶åœ†å½¢ã€ä¸‰è§’å½¢ã€çŸ©å½¢ã€‚ é¢å‘è¿‡ç¨‹å®žçŽ°ï¼š 123drawCircle... //ä¸€å¨ç»˜åˆ¶ç›¸å…³çš„ä»£ç ï¼Œä¸‹åŒdrawTriangledrawRect é¢å‘å¯¹è±¡å®žçŽ°ï¼š 123456789101112131415//æŠ½è±¡å‡ºç”»ç¬”å¯¹è±¡class Painter &#123; drawCircle()&#123; //ä¸Šè¿°é¢å‘è¿‡ç¨‹å®žçŽ°ï¼Œä¸‹åŒ &#125; drawTriangle()&#123;&#125; drawRect()&#123;&#125;&#125;//é¢å‘å¯¹è±¡ï¼Œä½¿ç”¨ç”»ç¬”ç»˜åˆ¶1. painter.drawCircle() //æ­¤å¤„åªéœ€è¦è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•ï¼Œä¸‹åŒ1. painter.drawTriangle()2. painter.drawRect() 5. å¯¹è±¡ä¸Žç±»å‰é¢ä»‹ç»äº†å¯¹è±¡ä»¥åŠé¢å‘å¯¹è±¡ï¼Œä¸‹é¢å›žåˆ° Java ä¸­èŠèŠç±»çš„æ¦‚å¿µã€‚ 5.1 ç±»æˆ‘ä»¬å¸¸è¯´â€œç‰©ä»¥ç±»èšâ€ï¼Œè¡¨è¾¾â€œ åŒç±»çš„ä¸œè¥¿èšåœ¨ä¸€èµ·â€ã€‚å…¶å®ž Java ä¸­çš„ç±»ä¹Ÿå¯ä»¥è¿™ä¹ˆåŽ»ç†è§£ï¼šâ€œç‰©â€å³å®¢è§‚å­˜åœ¨çš„â€œå¯¹è±¡â€ï¼ŒåŒç±»ç‰©ä½“çš„ç‰¹å¾æè¿°ï¼Œå³ä¸ºâ€œç±»â€ã€‚ ä¸Šé¢æ˜¯æˆ‘çš„ä¸ªäººç†è§£ï¼Œç”¨æœ¯è¯­æ¦‚æ‹¬å°±æ˜¯ï¼šç±»æ˜¯å®¢è§‚äº‹ç‰©çš„æŠ½è±¡ï¼Œæˆ–è€…è¯´æ˜¯å¯¹çŽ°å®žç”Ÿæ´»ä¸­äº‹ç‰©çš„ä¸€ç§æè¿°ï¼ˆå±žæ€§å’Œè¡Œä¸ºï¼‰ã€‚ ä¾‹å¦‚å‰é¢å®šä¹‰çš„ Painter ç±»ï¼Œæ˜¯å¯¹å®¢è§‚äº‹ç‰©ç”»ç¬”çš„æŠ½è±¡ï¼ŒåŒ…å«äº†ä¸€äº›ç»˜åˆ¶çš„æ–¹æ³•ï¼ˆè¡Œä¸ºï¼‰ã€‚ 5.2 å¯¹è±¡ä¸Žç±»çš„å…³ç³»ç±»è¿›è¡Œå®žä¾‹åŒ–å¯ç”Ÿæˆå¯¹è±¡ï¼Œæ‰€ä»¥ï¼Œç±»çš„å…·ä½“è¡¨çŽ°æˆ–è€…å®žä¾‹å°±æ˜¯å¯¹è±¡ï¼Œè€Œå¯¹è±¡çš„æŠ½è±¡æˆ–è€…æ€»æ¦‚æ‹¬å°±æ˜¯ç±»ã€‚ 6. é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§è¯´åˆ°é¢å‘å¯¹è±¡ï¼Œå°±ä¸å¾—ä¸è¯´å…¶ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿å’Œå¤šæ€ã€‚ ä¸‹é¢ç®€å•è¯´è¯´è‡ªå·±çš„ç†è§£å§ï¼Œå°±ä¸å†è´´ç›¸å…³ç¤ºä¾‹äº†ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šä¼˜ç§€çš„ä¾‹å­ã€‚ 6.1 å°è£…å°è£…æ˜¯é¢å‘å¯¹è±¡æœ€åŸºç¡€çš„ç‰¹æ€§ã€‚åœ¨å‰é¢ä»‹ç»å¯¹è±¡æ—¶ï¼Œæåˆ°â€œä¸€ä¸ªå¯¹è±¡é€šå¸¸ç”±ä¸€ç»„å±žæ€§å’Œå¯¹è¿™ç»„å±žæ€§è¿›è¡Œæ“ä½œçš„è‹¥å¹²æœåŠ¡ï¼ˆæ–¹æ³•ï¼‰æž„æˆâ€ï¼Œè¿™é‡Œçš„æž„æˆä½“çŽ°çš„å°±æ˜¯å°è£…æ€§ã€‚ å°è£…ï¼Œæ˜¯æŒ‡å¯¹å¤–éšè—å¯¹è±¡å†…éƒ¨çš„å±žæ€§å’Œå®žçŽ°ç»†èŠ‚ï¼Œåªæä¾›ç›¸åº”çš„æŽ¥å£å’Œæ–¹æ³•è¿›è¡Œäº¤äº’ã€‚ä¸€æ–¹é¢ï¼Œå¤–éƒ¨åªéœ€ä¸“æ³¨äºŽå¯¹è±¡æ‰€æä¾›çš„èƒ½åŠ›ï¼Œè€Œä¸ç”¨å…³å¿ƒå†…éƒ¨å®žçŽ°ç»†èŠ‚ï¼›å¦ä¸€æ–¹é¢ï¼Œé¿å…äº†å¤–éƒ¨éšæ„ä¿®æ”¹æˆ–è®¿é—®å†…éƒ¨å±žæ€§å’Œæ–¹æ³•ï¼Œä»Žè€Œæå‡äº†ç¨‹åºçš„å¥å£®æ€§ï¼›åŒæ—¶ï¼Œå°è£…èƒ½æå‡ä»£ç çš„å¤ç”¨çŽ‡ã€‚ 6.2 ç»§æ‰¿ç»§æ‰¿æŒ‡ä¸€ä¸ªå¯¹è±¡ä»Žå¦ä¸€ä¸ªå¯¹è±¡ä¸­èŽ·å¾—å±žæ€§å’Œæ–¹æ³•çš„è¿‡ç¨‹ï¼Œç»§æ‰¿è€…ç§°ä¸ºå­ç±»ï¼Œè¢«ç»§æ‰¿è€…ç§°ä¸ºçˆ¶ç±»ã€‚ç»§æ‰¿ä½¿å¾—å­ç±»å¯¹è±¡æ‹¥æœ‰çˆ¶ç±»å¯¹è±¡çš„å…¨éƒ¨å±žæ€§ä¸Žæ–¹æ³•ï¼ˆéžç§æœ‰ï¼‰ã€‚ Key point: å­ç±»ä¹Ÿå¯ä»¥è¢«å…¶ä»–ç±»ç»§æ‰¿æˆä¸ºçˆ¶ç±»ï¼› çˆ¶ç±»å¯ä»¥æ‹¥æœ‰å¤šä¸ªå­ç±»ï¼Œä½†ä¸€ä¸ªå­ç±»åªèƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»ã€‚è¿™ä¸€ç‚¹ä¸ŽçŽ°å®žä¸­çˆ¶äº²ä¸Žå­©å­çš„å…³ç³»æ˜¯ä¸€è‡´çš„ï¼› Java ä¸­ä»»ä½•ç±»éƒ½æ˜¯ java.lang.Object çš„ç›´æŽ¥æˆ–é—´æŽ¥å­ç±»ï¼› å­ç±»ä¸èƒ½ç»§æ‰¿çˆ¶ç±»ä¸­è®¿é—®æƒé™ä¸º private çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼› å­ç±»å¯ä»¥é‡å†™ï¼ˆoverrideï¼‰çˆ¶ç±»çš„æ–¹æ³•ï¼› å­ç±»å¯ä»¥é€šè¿‡ super å…³é”®å­—è®¿é—®çˆ¶ç±»çš„æˆå‘˜å˜é‡ã€æ–¹æ³•å’Œæž„é€ å™¨ï¼› final å£°æ˜Žçš„ç±»æˆ–æ–¹æ³•ï¼Œä¸èƒ½è¢«ç»§æ‰¿æˆ–é‡å†™ï¼› 6.3 å¤šæ€å¤šæ€æ˜¯åœ¨ç»§æ‰¿çš„åŸºç¡€ä¸Šå®žçŽ°çš„ï¼Œå¤šæ€å®žçŽ°çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼š ç»§æ‰¿ æ–¹æ³•é‡å†™ï¼ˆoverrideï¼‰ çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ï¼Œä¾‹å¦‚ï¼šHuman human = new Man()ï¼Œè¿™é‡Œ Man extends Humanã€‚ å½“ä½¿ç”¨å¤šæ€æ–¹å¼è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šä¾æ®ä»¥ä¸‹è§„åˆ™ï¼š é¦–å…ˆæ£€æŸ¥çˆ¶ç±»ä¸­æ˜¯å¦æœ‰è¯¥æ–¹æ³•ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œåˆ™ç¼–è¯‘é”™è¯¯ï¼› è‹¥å­ç±»é‡å†™äº†è¯¥æ–¹æ³•ï¼Œè°ƒç”¨å­ç±»çš„é‡å†™æ–¹æ³•ï¼› è‹¥å­ç±»æ²¡æœ‰é‡å†™è¯¥æ–¹æ³•ï¼Œåˆ™è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼› å¤šæ€çš„å¥½å¤„ï¼šå¯ä»¥ä½¿ç¨‹åºæœ‰è‰¯å¥½çš„æ‰©å±•ï¼Œå¹¶å¯ä»¥å¯¹æ‰€æœ‰ç±»çš„å¯¹è±¡è¿›è¡Œé€šç”¨å¤„ç†ã€‚ 7. æ€»ç»“ä»¥ä¸Šæ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¯å‘ã€‚å†…å®¹è¯´ä¸ä¸Šå…¨é¢ã€æ— è¯¯ï¼Œè¿˜æœ›è¯»è€…æœ‹å‹è¡¥å……ã€æŒ‡æ­£ã€‚ æœ€åŽï¼Œæ„Ÿè°¢é˜…è¯»ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidçš„.soæ–‡ä»¶ã€abiå…¼å®¹ï¼Œé€šç”¨armeabi-v7aå’Œarm64-v8aæž¶æž„çš„æ–¹æ³•]]></title>
    <url>%2Fposts%2F75a88a70.html</url>
    <content type="text"><![CDATA[äº†è§£å®Œ armeabiã€armeabi-v7aã€arm64-v8aã€mipsã€mips64ã€x86ã€x86_64ç­‰abiçš„åŽŸç†åŽï¼Œå¾ˆä¹…ä»¥å‰ä¸€èˆ¬éƒ½åªæ˜¯ç”¨armeabiåœ¨åšå…¼å®¹ã€‚ çŽ°åœ¨å…¶å®žå¸‚é¢ä¸Šä¸»æµçš„æ‰‹æœºéƒ½æ”¯æŒarmeabi-v7aå’Œarm64-v8aã€‚è¯·çœ‹å¦‚ä¸‹ç®€ä»‹ï¼šå„ç‰ˆæœ¬çš„åˆ†æžå¦‚ä¸‹æ‰€ç¤ºï¼š mips / mips64: æžå°‘ç”¨äºŽæ‰‹æœºå¯ä»¥å¿½ç•¥ï¼Œæœ‰å…´è¶£çš„å¯ä»¥ç™¾åº¦ä¸€ä¸‹ã€‚ x86 / x86_64: x86 æž¶æž„çš„æ‰‹æœºéƒ½ä¼šåŒ…å«ç”± Intel æä¾›çš„ç§°ä¸º Houdini çš„æŒ‡ä»¤é›†åŠ¨æ€è½¬ç å·¥å…·ï¼Œå®žçŽ° å¯¹ arm .so çš„å…¼å®¹ï¼Œå†è€ƒè™‘ x86 1% ä»¥ä¸‹çš„å¸‚åœºå æœ‰çŽ‡ï¼Œx86 ç›¸å…³çš„ä¸¤ä¸ª .so ä¹Ÿæ˜¯å¯ä»¥å¿½ç•¥çš„ armeabi: ARM v5 è¿™æ˜¯ç›¸å½“è€æ—§çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œç¼ºå°‘å¯¹æµ®ç‚¹æ•°è®¡ç®—çš„ç¡¬ä»¶æ”¯æŒï¼Œåœ¨éœ€è¦å¤§é‡è®¡ç®—æ—¶æœ‰æ€§èƒ½ç“¶é¢ˆ armeabi-v7a: ARM v7 ç›®å‰ä¸»æµç‰ˆæœ¬ï¼Œä¸€èˆ¬å¸‚é¢ä¸Šçš„éªé¾™ç³»åˆ—æˆ–è€…éº’éºŸç³»åˆ—çš„å¤„ç†å™¨ç»å¤§éƒ¨åˆ†éƒ½æ˜¯è¿™ç§æž¶æž„ arm64-v8a: 64ä½æ”¯æŒæ‰€è°“çš„ARMv8æž¶æž„ï¼Œå°±æ˜¯åœ¨MIPS64æž¶æž„ä¸Šå¢žåŠ äº†ARMv7æž¶æž„ä¸­å·²ç»æ‹¥æœ‰çš„çš„TrustZoneæŠ€æœ¯ã€è™šæ‹ŸåŒ–æŠ€æœ¯åŠNEON advanced SIMDæŠ€æœ¯ç­‰ç‰¹æ€§ï¼Œç ”å‘æˆçš„ã€‚ ç»¼ä¸Šæ‰€è¿°å»ºè®®å¤§å®¶å…¼å®¹armeabi-v7aå’Œarm64-v8aè¿™ä¸¤ä¸ªï¼Œå…¶ä»–æž¶æž„å°‘ä¹‹åˆå°‘ï¼ŒarmeabiåŸºæœ¬æ·˜æ±°æ‰€ä»¥çŽ°åœ¨å°±ä¸æ€Žä¹ˆè€ƒè™‘äº†ã€‚å¯¹äºŽä¸€èˆ¬é¡¹ç›®æ¥è¯´ï¼Œè¶³å¤Ÿäº†ã€‚ åœ¨build.gradleçš„androidé‡Œçš„defaultConfigå†…æ·»åŠ å¦‚ä¸‹å†…å®¹: 12345defaultConfig &#123; ndk &#123; abiFilters &quot;armeabi-v7a&quot; abiFilters &quot;arm64-v8a&quot; &#125; ç„¶åŽåœ¨é¡¹ç›®ä¸­é›†æˆsoæ–‡ä»¶çš„æ—¶å€™ åªæŠŠarmeabi-v7aå’Œarm64-v8aè¿™ä¸¤ä¸ªçš„soæ–‡ä»¶å¤¹copyåˆ°libsé‡Œé¢ï¼Œå…·ä½“ç»†èŠ‚ç¬¬ä¸‰æ–¹å¹³å°çš„æ•™ç¨‹é‡Œé¢éƒ½å†™å¾—å¾ˆè¯¦ç»† å¦‚æžœæŠ¥é”™: 12Error:(15, 1) A problem occurred evaluating project ':app'.&gt; Error: NDK integration is deprecated in the current plugin. Consider trying the new experimental plugin. For details, see http://tools.android.com/tech-docs/new-build-system/gradle-experimental. Set "android.useDeprecatedNdk=true" in gradle.properties to continue using the current NDK integration. è¯·åœ¨ gradle.properties ä¸­ æ·»åŠ  1android.useDeprecatedNdk=true å¯¹äºŽæ–°æ‰‹Androidå¼€å‘è€…æ¥è¯´ï¼Œåƒé›†æˆç™¾åº¦åœ°å›¾SDKã€JPushç­‰å†å‡ºçŽ°æ‰¾ä¸åˆ°.soæ–‡ä»¶çš„é—®é¢˜ç›´æŽ¥åªä½¿ç”¨armeabi-v7aå’Œarm64-v8aå°±è¶³ä»¥ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>.soæ–‡ä»¶</tag>
        <tag>armeabi-v7a</tag>
        <tag>arm64-v8a</tag>
        <tag>abiå…¼å®¹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidçš„.soæ–‡ä»¶ã€ABIå’ŒCPUçš„å…³ç³»]]></title>
    <url>%2Fposts%2Fb9d5fd68.html</url>
    <content type="text"><![CDATA[æ—©æœŸçš„Androidç³»ç»Ÿå‡ ä¹Žåªæ”¯æŒARMv5çš„CPUæž¶æž„ï¼Œä½ çŸ¥é“çŽ°åœ¨å®ƒæ”¯æŒå¤šå°‘ç§å—ï¼Ÿ Androidç³»ç»Ÿç›®å‰æ”¯æŒä»¥ä¸‹ä¸ƒç§ä¸åŒçš„CPUæž¶æž„ï¼šARMv5ï¼ŒARMv7 (ä»Ž2010å¹´èµ·)ï¼Œx86 (ä»Ž2011å¹´èµ·)ï¼ŒMIPS (ä»Ž2012å¹´èµ·)ï¼ŒARMv8ï¼ŒMIPS64å’Œx86_64 (ä»Ž2014å¹´èµ·)ï¼Œæ¯ä¸€ç§éƒ½å…³è”ç€ä¸€ä¸ªç›¸åº”çš„ABIã€‚ åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æŽ¥å£ABIï¼ˆApplication Binary Interfaceï¼‰å®šä¹‰äº†äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå°¤å…¶æ˜¯.soæ–‡ä»¶ï¼‰å¦‚ä½•è¿è¡Œåœ¨ç›¸åº”çš„ç³»ç»Ÿå¹³å°ä¸Šï¼Œä»Žä½¿ç”¨çš„æŒ‡ä»¤é›†ï¼Œå†…å­˜å¯¹é½åˆ°å¯ç”¨çš„ç³»ç»Ÿå‡½æ•°åº“ã€‚ ä¸ºä»€ä¹ˆä½ éœ€è¦é‡ç‚¹å…³æ³¨.soæ–‡ä»¶ é¡¹ç›®ä¸­ä½¿ç”¨åˆ°äº†NDKï¼Œå®ƒå°†ä¼šç”Ÿæˆ.soæ–‡ä»¶ã€‚ å¦‚æžœåªä½¿ç”¨Javaè¯­è¨€è¿›è¡Œç¼–ç ï¼Œä½ å¯èƒ½åœ¨æƒ³ä¸éœ€è¦å…³æ³¨.soæ–‡ä»¶äº†å§ï¼Œå› ä¸ºJavaæ˜¯è·¨å¹³å°çš„ã€‚ä½†ä½ å¯èƒ½å¹¶æ²¡æœ‰æ„è¯†åˆ°é¡¹ç›®ä¸­ä¾èµ–çš„å‡½æ•°åº“æˆ–è€…å¼•æ“Žåº“é‡Œé¢å·²ç»åµŒå…¥äº†.soæ–‡ä»¶ï¼Œå¹¶ä¾èµ–äºŽä¸åŒçš„ABIã€‚ Androidåº”ç”¨æ”¯æŒçš„ABIå–å†³äºŽAPKä¸­ä½äºŽlib/ABIç›®å½•ä¸­çš„.soæ–‡ä»¶ï¼Œå…¶ä¸­ABIå¯èƒ½æ˜¯ä¸Šé¢è¯´è¿‡çš„ä¸ƒç§ABIä¸­çš„ä¸€ç§ã€‚ æœ¬åœ°åº“ç›‘è§†å™¨Native Libs Monitorè¿™ä¸ªåº”ç”¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£æ‰‹æœºä¸Šå®‰è£…çš„APKç”¨åˆ°äº†å“ªäº›.soæ–‡ä»¶ï¼Œä»¥åŠ.soæ–‡ä»¶æ¥æºäºŽå“ªäº›å‡½æ•°åº“æˆ–è€…æ¡†æž¶ã€‚ ABIå’ŒCPUçš„å…³ç³»å¾ˆå¤šè®¾å¤‡éƒ½æ”¯æŒå¤šäºŽä¸€ç§çš„ABIã€‚å½“ä¸€ä¸ªåº”ç”¨å®‰è£…åœ¨è®¾å¤‡ä¸Šï¼Œåªæœ‰è¯¥è®¾å¤‡æ”¯æŒçš„CPUæž¶æž„å¯¹åº”çš„.soæ–‡ä»¶ä¼šè¢«å®‰è£…ã€‚ä½†æœ€å¥½æ˜¯é’ˆå¯¹ç‰¹å®šå¹³å°æä¾›ç›¸åº”å¹³å°çš„äºŒè¿›åˆ¶åŒ…ï¼Œè¿™ç§æƒ…å†µä¸‹è¿è¡Œæ—¶å°±å°‘äº†ä¸€ä¸ªæ¨¡æ‹Ÿå±‚ï¼ˆä¾‹å¦‚x86è®¾å¤‡ä¸Šæ¨¡æ‹Ÿarmçš„è™šæ‹Ÿå±‚ï¼‰ï¼Œä»Žè€Œå¾—åˆ°æ›´å¥½çš„æ€§èƒ½ï¼ˆå½’åŠŸäºŽæœ€è¿‘çš„æž¶æž„æ›´æ–°ï¼Œä¾‹å¦‚ç¡¬ä»¶fpuï¼Œæ›´å¤šçš„å¯„å­˜å™¨ï¼Œæ›´å¥½çš„å‘é‡åŒ–ç­‰ï¼‰ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡Build.SUPPORTED_ABISå¾—åˆ°æ ¹æ®åå¥½æŽ’åºçš„è®¾å¤‡æ”¯æŒçš„ABIåˆ—è¡¨ã€‚ä½†ä½ ä¸åº”è¯¥ä»Žä½ çš„åº”ç”¨ç¨‹åºä¸­è¯»å–å®ƒï¼Œå› ä¸ºAndroidåŒ…ç®¡ç†å™¨å®‰è£…APKæ—¶ï¼Œä¼šè‡ªåŠ¨é€‰æ‹©APKåŒ…ä¸­ä¸ºå¯¹åº”ç³»ç»ŸABIé¢„ç¼–è¯‘å¥½çš„.soæ–‡ä»¶ ABIç›®å½•ï¼ˆæ¨ªå‘ï¼‰å’Œcpuï¼ˆçºµå‘ï¼‰ armeabi armeabi-v7a arm64-v8a mips mips64 x86 x86_64 ARMv5 æ”¯æŒ ARMv7 æ”¯æŒ æ”¯æŒ ARMv8 æ”¯æŒ æ”¯æŒ æ”¯æŒ MIPS æ”¯æŒ MIPS64 æ”¯æŒ æ”¯æŒ x86 æ”¯æŒ æ”¯æŒ æ”¯æŒ x86_64 æ”¯æŒ æ”¯æŒ æ”¯æŒ ä¸åŒçš„ABIï¼Œé’ˆå¯¹ä¸åŒçš„cpuæž¶æž„æœ‰ä¸åŒçš„ä¼˜å…ˆæƒ ä¾‹å¦‚ï¼š x86è®¾å¤‡ä¸Šï¼Œlibs/x86ç›®å½•ä¸­å¦‚æžœå­˜åœ¨.soæ–‡ä»¶çš„è¯ï¼Œä¼šè¢«å®‰è£…ï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œåˆ™ä¼šé€‰æ‹©armeabi-v7aä¸­çš„.soæ–‡ä»¶ï¼Œå¦‚æžœä¹Ÿä¸å­˜åœ¨ï¼Œåˆ™é€‰æ‹©armeabiç›®å½•ä¸­çš„.soæ–‡ä»¶ã€‚ x86è®¾å¤‡èƒ½å¤Ÿå¾ˆå¥½çš„è¿è¡ŒARMç±»åž‹å‡½æ•°åº“ï¼Œä½†å¹¶ä¸ä¿è¯100%ä¸å‘ç”Ÿcrashï¼Œç‰¹åˆ«æ˜¯å¯¹æ—§è®¾å¤‡ã€‚ 64ä½è®¾å¤‡ï¼ˆarm64-v8a, x86_64, mips64ï¼‰èƒ½å¤Ÿè¿è¡Œ32ä½çš„å‡½æ•°åº“ï¼Œä½†æ˜¯ä»¥32ä½æ¨¡å¼è¿è¡Œï¼Œåœ¨64ä½å¹³å°ä¸Šè¿è¡Œ32ä½ç‰ˆæœ¬çš„ARTå’ŒAndroidç»„ä»¶ï¼Œå°†ä¸¢å¤±ä¸“ä¸º64ä½ä¼˜åŒ–è¿‡çš„æ€§èƒ½ï¼ˆARTï¼Œwebviewï¼Œmediaç­‰ç­‰ï¼‰ã€‚ .soæ–‡ä»¶é‡è¦æ³•åˆ™å¤„ç†.soæ–‡ä»¶æ—¶æœ‰ä¸€æ¡ç®€å•å´å¹¶ä¸çŸ¥åçš„é‡è¦æ³•åˆ™ã€‚ ä½ åº”è¯¥å°½å¯èƒ½çš„æä¾›ä¸“ä¸ºæ¯ä¸ªABIä¼˜åŒ–è¿‡çš„.soæ–‡ä»¶ï¼Œä½ ä¸åº”è¯¥æ··åˆç€ä½¿ç”¨ï¼ˆä¸èƒ½å°±è£…å¯¹ä¸åŒcpuæž¶æž„çš„soæ–‡ä»¶ï¼Œæ”¾åœ¨åŒä¸€ä¸ªABIç›®å½•ä¸‹ï¼‰ã€‚ä½ åº”è¯¥ä¸ºæ¯ä¸ªABIç›®å½•æä¾›å¯¹åº”çš„.soæ–‡ä»¶ã€‚ NDKå…¼å®¹æ€§ä½¿ç”¨NDKæ—¶ï¼Œä½ å¯èƒ½ä¼šå€¾å‘äºŽä½¿ç”¨æœ€æ–°çš„ç¼–è¯‘å¹³å°ï¼Œä½†äº‹å®žä¸Šè¿™æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºNDKå¹³å°ä¸æ˜¯åŽå‘å…¼å®¹ï¼ˆå…¼å®¹è¿‡åŽ»çš„ç‰ˆæœ¬ï¼‰çš„ï¼Œè€Œæ˜¯å‰å‘å…¼å®¹ï¼ˆå…¼å®¹å°†æ¥çš„ç‰ˆæœ¬ï¼‰çš„ã€‚æŽ¨èä½¿ç”¨appçš„minSdkVersionå¯¹åº”çš„ç¼–è¯‘å¹³å°ã€‚ è¿™ä¹Ÿæ„å‘³ç€å½“ä½ å¼•å…¥ä¸€ä¸ªé¢„ç¼–è¯‘å¥½çš„.soæ–‡ä»¶æ—¶ï¼Œä½ éœ€è¦æ£€æŸ¥å®ƒè¢«ç¼–è¯‘æ‰€ç”¨çš„å¹³å°ç‰ˆæœ¬ã€‚ æ··åˆä½¿ç”¨ä¸åŒC++è¿è¡Œæ—¶ç¼–è¯‘çš„.soæ–‡ä»¶.soæ–‡ä»¶å¯ä»¥ä¾èµ–äºŽä¸åŒçš„C++è¿è¡Œæ—¶ï¼Œé™æ€ç¼–è¯‘æˆ–è€…åŠ¨æ€åŠ è½½ã€‚æ··åˆä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„C++è¿è¡Œæ—¶å¯èƒ½å¯¼è‡´å¾ˆå¤šå¥‡æ€ªçš„crashï¼Œæ˜¯åº”è¯¥é¿å…çš„ã€‚ ä¸€ä¸ªç»éªŒæ³•åˆ™ å½“åªæœ‰ä¸€ä¸ª.soæ–‡ä»¶æ—¶ï¼Œé™æ€ç¼–è¯‘C++è¿è¡Œæ—¶æ˜¯æ²¡é—®é¢˜çš„ï¼Œ å½“å­˜åœ¨å¤šä¸ª.soæ–‡ä»¶æ—¶ï¼Œåº”è¯¥è®©æ‰€æœ‰çš„.soæ–‡ä»¶éƒ½åŠ¨æ€é“¾æŽ¥ç›¸åŒçš„C++è¿è¡Œæ—¶ã€‚ è¿™æ„å‘³ç€å½“å¼•å…¥ä¸€ä¸ªæ–°çš„é¢„ç¼–è¯‘.soæ–‡ä»¶ï¼Œè€Œä¸”é¡¹ç›®ä¸­è¿˜å­˜åœ¨å…¶ä»–çš„.soæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆç¡®è®¤æ–°å¼•å…¥çš„.soæ–‡ä»¶ä½¿ç”¨çš„C++è¿è¡Œæ—¶æ˜¯å¦å’Œå·²ç»å­˜åœ¨çš„.soæ–‡ä»¶ä¸€è‡´ã€‚ ###å…³äºŽ.soæ–‡ä»¶çš„é”™è¯¯ç¤ºä¾‹*é—®é¢˜ï¼š *ä½ çš„appç›®å‰åªæ”¯æŒarmeabi-v7aå’Œx86æž¶æž„ï¼Œä½ æƒ³è®©appæ”¯æŒæ›´å¤šçš„cpuç±»åž‹ï¼Œæ–°å¢žäº†ä¸€ä¸ªå‡½æ•°åº“ä¾èµ–ï¼Œè¿™ä¸ªå‡½æ•°åº“åŒ…å«.soæ–‡ä»¶å¹¶æ”¯æŒæ›´å¤šçš„CPUæž¶æž„ã€‚ å‘å¸ƒæˆ‘ä»¬çš„appåŽï¼Œä¼šå‘çŽ°å®ƒåœ¨æŸäº›è®¾å¤‡ä¸Šä¼šå‘ç”ŸCrashï¼Œä¾‹å¦‚Galaxy S6ï¼Œæœ€ç»ˆå¯ä»¥å‘çŽ°åªæœ‰64ä½ç›®å½•ä¸‹çš„.soæ–‡ä»¶è¢«å®‰è£…è¿›æ‰‹æœºã€‚ è§£å†³æ–¹æ¡ˆï¼š é‡æ–°ç¼–è¯‘æˆ‘ä»¬çš„.soæ–‡ä»¶ä½¿å…¶æ”¯æŒç¼ºå¤±çš„ABIs ä¹Ÿå¯ä»¥è®¾ç½®ndk.abiFiltersæ˜¾ç¤ºæŒ‡å®šæ”¯æŒçš„ABIs åœ¨IDEä¸­çš„è·¯å¾„ Android Studioå·¥ç¨‹æ”¾åœ¨jniLibs/ABIç›®å½•ä¸­ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡åœ¨build.gradleæ–‡ä»¶ä¸­çš„è®¾ç½®jniLibs.srcDirå±žæ€§è‡ªå·±æŒ‡å®šï¼‰ Eclipseå·¥ç¨‹æ”¾åœ¨libs/ABIç›®å½•ä¸­ï¼ˆè¿™ä¹Ÿæ˜¯ndk-buildå‘½ä»¤é»˜è®¤ç”Ÿæˆ.soæ–‡ä»¶çš„ç›®å½•ï¼‰ åœ¨AARåŽ‹ç¼©åŒ…ä¸­çš„è·¯å¾„AARåŽ‹ç¼©åŒ…ä¸­ä½äºŽjni/ABIç›®å½•ä¸­ï¼ˆ.soæ–‡ä»¶ä¼šè‡ªåŠ¨åŒ…å«åˆ°å¼•ç”¨AARåŽ‹ç¼©åŒ…çš„APKä¸­ï¼‰ åœ¨APKä¸­çš„è·¯å¾„æœ€ç»ˆAPKæ–‡ä»¶ä¸­çš„lib/ABIç›®å½•ä¸­ é€šè¿‡PackageManagerå®‰è£…åŽï¼Œ.soæ–‡ä»¶è·¯å¾„é€šè¿‡PackageManagerå®‰è£…åŽï¼Œåœ¨å°äºŽAndroid 5.0çš„ç³»ç»Ÿä¸­ï¼Œ.soæ–‡ä»¶ä½äºŽappçš„nativeLibraryPathç›®å½•ä¸­ï¼›åœ¨å¤§äºŽç­‰äºŽAndroid 5.0çš„ç³»ç»Ÿä¸­ï¼Œ.soæ–‡ä»¶ä½äºŽappçš„nativeLibraryRootDir/CPU_ARCHç›®å½•ä¸­ã€‚ ç”Ÿæˆä¸åŒABIç‰ˆæœ¬çš„APKä»¥å‡å°‘APKåŒ…å¤§å°ä¸ºç”±æ˜¯ä¸€ä¸ªé”™è¯¯çš„å€Ÿå£ï¼Œå› ä¸ºä½ ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨åº”ç”¨å¸‚åœºä¸Šä¼ æŒ‡å®šABIç‰ˆæœ¬çš„APKï¼Œç”Ÿæˆä¸åŒABIç‰ˆæœ¬çš„APKå¯ä»¥åœ¨build.gradleä¸­å¦‚ä¸‹é…ç½®ï¼š 12345678910111213141516171819202122android &#123; ... splits &#123; abi &#123; enable true reset() include 'x86', 'x86_64', 'armeabi-v7a', 'arm64-v8a' //select ABIs to build APKs for universalApk true //generate an additional APK that contains all the ABIs &#125; &#125; // map for the version code project.ext.versionCodes = ['armeabi': 1, 'armeabi-v7a': 2, 'arm64-v8a': 3, 'mips': 5, 'mips64': 6, 'x86': 8, 'x86_64': 9] android.applicationVariants.all &#123; variant -&gt; // assign different version code for each output variant.outputs.each &#123; output -&gt; output.versionCodeOverride = project.ext.versionCodes.get(output.getFilter(com.android.build.OutputFile.ABI), 0) * 1000000 + android.defaultConfig.versionCode &#125; &#125; &#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>ABI</tag>
        <tag>CPU</tag>
        <tag>.soæ–‡ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½ å¿…é¡»çŸ¥é“çš„ABIå’ŒCPUå…³ç³»]]></title>
    <url>%2Fposts%2F8c0a549.html</url>
    <content type="text"><![CDATA[ABIå’ŒCPUçš„é‡è¦çŸ¥è¯†1ã€ å¤§éƒ¨åˆ†cpuéƒ½æ”¯æŒå¤šäºŽä¸€ç§çš„ABIã€‚2ã€ å½“ä¸€ä¸ªåº”ç”¨å®‰è£…åœ¨è®¾å¤‡ä¸Šï¼Œåªæœ‰è¯¥è®¾å¤‡æ”¯æŒçš„CPUæž¶æž„å¯¹åº”çš„.soæ–‡ä»¶ä¼šè¢«å®‰è£…ã€‚3ã€ ABIç›®å½•ï¼ˆæ¨ªå‘ï¼‰å’Œcpuï¼ˆçºµå‘ï¼‰ armeabi armeabi-v7a arm64-v8a mips mips64 x86 x86_64 ARMv5 æ”¯æŒ ARMv7 æ”¯æŒ æ”¯æŒ ARMv8 æ”¯æŒ æ”¯æŒ æ”¯æŒ MIPS æ”¯æŒ MIPS64 æ”¯æŒ æ”¯æŒ x86 æ”¯æŒ æ”¯æŒ æ”¯æŒ x86_64 æ”¯æŒ æ”¯æŒ æ”¯æŒ æ³¨æ„ï¼šä¸Šè¡¨æ ¼ä¸­çš„ç©ºç™½éƒ¨åˆ†ï¼Œæ˜¯æˆ‘ä¸çŸ¥é“å®ƒæ˜¯å¦æ”¯æŒï¼Œæžæœ‰å¯èƒ½æ˜¯ä¸æ”¯æŒ è§£æžï¼š x86è®¾å¤‡ä¸Šï¼Œé€‰æ‹©ABIçš„ä¼˜å…ˆçº§ libs/x86ç›®å½•ä¸­å¦‚æžœå­˜åœ¨.soæ–‡ä»¶çš„è¯ï¼Œä¼šè¢«å®‰è£… å¦‚æžœä¸å­˜åœ¨ï¼Œåˆ™ä¼šé€‰æ‹©armeabi-v7aä¸­çš„.soæ–‡ä»¶ å¦‚æžœä¹Ÿä¸å­˜åœ¨ï¼Œåˆ™é€‰æ‹©armeabiç›®å½•ä¸­çš„.soæ–‡ä»¶ x86è®¾å¤‡èƒ½å¤Ÿå¾ˆå¥½çš„è¿è¡ŒARMç±»åž‹å‡½æ•°åº“ï¼Œä½†å¹¶ä¸ä¿è¯100%ä¸å‘ç”Ÿcrashï¼Œç‰¹åˆ«æ˜¯å¯¹æ—§è®¾å¤‡ï¼Œå› ä¸ºæ˜¯è¿è¡Œåœ¨x86è®¾å¤‡ä¸Šæ¨¡æ‹Ÿarmçš„è™šæ‹Ÿå±‚ä¸Šã€‚ 4ã€ 64ä½è®¾å¤‡ï¼ˆarm64-v8a, x86_64, mips64ï¼‰èƒ½å¤Ÿè¿è¡Œ32ä½çš„å‡½æ•°åº“ï¼Œä½†æ˜¯ä»¥32ä½æ¨¡å¼è¿è¡Œï¼Œåœ¨64ä½å¹³å°ä¸Šè¿è¡Œ32ä½ç‰ˆæœ¬çš„ARTå’ŒAndroidç»„ä»¶ï¼Œå°†ä¸¢å¤±ä¸“ä¸º64ä½ä¼˜åŒ–è¿‡çš„æ€§èƒ½ï¼ˆARTï¼Œwebviewï¼Œmediaç­‰ç­‰ï¼‰ã€‚ 5ã€ æœ€å¥½æ˜¯é’ˆå¯¹ç‰¹å®šå¹³å°æä¾›ç›¸åº”å¹³å°çš„äºŒè¿›åˆ¶åŒ…ï¼Œè¿™ç§æƒ…å†µä¸‹è¿è¡Œæ—¶å°±å°‘äº†ä¸€ä¸ªæ¨¡æ‹Ÿå±‚ï¼ˆä¾‹å¦‚x86è®¾å¤‡ä¸Šæ¨¡æ‹Ÿarmçš„è™šæ‹Ÿå±‚ï¼‰ï¼Œä»Žè€Œå¾—åˆ°æ›´å¥½çš„æ€§èƒ½ï¼ˆå½’åŠŸäºŽæœ€è¿‘çš„æž¶æž„æ›´æ–°ï¼Œä¾‹å¦‚ç¡¬ä»¶fpuï¼Œæ›´å¤šçš„å¯„å­˜å™¨ï¼Œæ›´å¥½çš„å‘é‡åŒ–ç­‰ï¼‰ã€‚ 6ã€ ä¼šå®‰è£…ä¼˜å…ˆçº§è¾ƒé«˜çš„ABIç›®å½•ï¼Œåˆ™å…¶å®ƒä¼˜å…ˆçº§è¾ƒä½Žçš„ABIç›®å½•ï¼ˆåŒ…æ‹¬å…¶å®ƒmoduleä¸­çš„ABIç›®å½•ï¼‰ï¼Œéƒ½æ— æ³•å®‰è£…ã€‚ä¾‹å¦‚ï¼šåœ¨cpuæ˜¯ARMv7æž¶æž„çš„æ‰‹æœºä¸Šï¼Œå¦‚æžœæ£€æµ‹åˆ°armeabi-v7aï¼Œå°±ä¼šé€‰æ‹©å®‰è£…armeabi-v7aï¼Œåˆ™armeabiä¸‹çš„æ–‡ä»¶ï¼Œéƒ½æ— æ³•å®‰è£…äº†ã€‚ 7ã€ ç›¸åº”çš„ABIäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè¦æ”¾è¿›ç›¸åº”çš„ABIç›®å½•ä¸­ 8ã€ä¸€èˆ¬æƒ…å†µä¸‹ä¸è¦ç®€å•å¾—ä¿®æ”¹æž¶æž„ç›®å½•å æˆ‘ä»¬å¯ä»¥é€šè¿‡Build.SUPPORTED_ABISå¾—åˆ°æ ¹æ®åå¥½æŽ’åºçš„è®¾å¤‡æ”¯æŒçš„ABIåˆ—è¡¨ã€‚ä½†ä½ ä¸åº”è¯¥ä»Žä½ çš„åº”ç”¨ç¨‹åºä¸­è¯»å–å®ƒï¼Œå› ä¸ºAndroidåŒ…ç®¡ç†å™¨å®‰è£…APKæ—¶ï¼Œä¼šè‡ªåŠ¨é€‰æ‹©APKåŒ…ä¸­ä¸ºå¯¹åº”ç³»ç»ŸABIé¢„ç¼–è¯‘å¥½çš„.soæ–‡ä»¶ï¼Œå¦‚æžœåœ¨å¯¹åº”çš„libï¼ABIç›®å½•ä¸­å­˜åœ¨.soæ–‡ä»¶çš„è¯ã€‚ ###å·¥å…·æŸ¥çœ‹é¡¹ç›®ä¸­ABIæ–‡ä»¶çš„æž¶æž„ç±»åž‹è…¾è®¯buglyï¼Œç¬¦å·è¡¨å·¥å…·ï¼Œä¸‹è½½åœ°å€ï¼šhttp://bugly.qq.com/whitebook Native Libs Monitorè¿™ä¸ªåº”ç”¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç†è§£æ‰‹æœºä¸Šå®‰è£…çš„APKç”¨åˆ°äº†å“ªäº›.soæ–‡ä»¶ï¼Œä»¥åŠ.soæ–‡ä»¶æ¥æºäºŽå“ªäº›å‡½æ•°åº“æˆ–è€…æ¡†æž¶ã€‚ ###ç–‘éš¾æ‚ç—‡è™½ç„¶è§„åˆ™åˆ¶å®šå‡ºæ¥äº†ï¼Œä½†æ€»æ˜¯ä¼šå‡ºçŽ°ä¸€äº›ï¼Œä¸åˆè§„çš„çŽ°è±¡ï¼Œå¯¼è‡´ä¸€äº›é”™è¯¯ï¼Œéš¾ä»¥ç†è§£ã€‚çŽ°åœ¨å°±è®©æˆ‘ä»¬æ¥ä¸€èµ·æŠŠæŠŠè„‰ï¼Œçœ‹çœ‹åˆ°åº•æ˜¯ä»€ä¹ˆç–‘éš¾æ‚ç—‡ ####ä¸€ã€.soæ–‡ä»¶ï¼Œæ”¾è¿›äº†ä¼˜å…ˆçº§ä½Žçš„ABIç›®å½• 1ã€å¦‚æžœä½ çš„é¡¹ç›®ä¸­ï¼Œæœ‰å…¶ä»–ä¼˜å…ˆçº§æ›´é«˜çš„ABIç›®å½•ï¼Œä½†æ˜¯ä½ æŠŠABIæ–‡ä»¶æ”¾åˆ°äº†ä¼˜å…ˆçº§ä½Žçš„ç›®å½•ï¼Œåˆ™ä½ çš„ABIæ–‡ä»¶æ— æ³•è¢«åŠ è½½2ã€å¦‚æžœä½ çš„é¡¹ç›®ä¸­ï¼ŒABIæ–‡ä»¶æ”¾åœ¨äº†ï¼Œé¡¹ç›®ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„ABIç›®å½•ä¸­ï¼ˆè¿™ä¸ªABIç›®å½•æ˜¯æ‰‹æœºæ‰€æ”¯æŒçš„åœ¨é¡¹ç›®ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„ï¼Œä½†ä¸ä¸€å®šæ˜¯æ‰‹æœºæ‰€æ”¯æŒçš„ä¼˜å…ˆçº§æœ€é«˜çš„ï¼‰ï¼Œåˆ™è¿™ä¸ªABIæ–‡ä»¶ï¼Œå¯ä»¥è¢«åŠ è½½ï¼ŒåŠ è½½ä¸ºABIç›®å½•çš„æ‰€è¡¨ç¤ºçš„æž¶æž„ç±»åž‹ã€‚ä¾‹å­ï¼š æˆ‘çš„æ‰‹æœºcpuæž¶æž„æ˜¯ARMv7ï¼ŒABIæ–‡ä»¶æ˜¯armeabi-v7aï¼Œä½†æ˜¯æ”¾è¿›äº†armeabiç›®å½•ä¸­ åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ä¼šå‡ºçŽ°ä¸¤ç§æƒ…å†µï¼š 1ã€é¡¹ç›®ä¸­æœ‰armeabi-v7açš„ç›®å½•ï¼Œarmeabiç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œæ— æ³•è¢«åŠ è½½ï¼Œè¿è¡ŒåŽæŠ¥é”™ï¼Œå‡ºçŽ°å¦‚ä¸‹logä¿¡æ¯ã€‚ 1Caused by: java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file "/data/app/.xx../base.apk"],nativeLibraryDirectories=[/data/app/.xx../lib/arm, /vendor/lib, /system/lib]]] couldn't find "lib..xx...so" 2ã€é¡¹ç›®ä¸­åªæœ‰armeabiçš„ç›®å½•ï¼Œarmeabiç›®å½•æ˜¯è¯¥é¡¹ç›®ä¼˜å…ˆçº§æœ€é«˜çš„ABIç›®å½•ï¼ˆè™½ç„¶armeabiç›®å½•åœ¨ARMv7æ‰€æ”¯æŒçš„ä¼˜å…ˆçº§æœ€é«˜çš„ABIç›®å½•ä¸æ˜¯æœ€é«˜ï¼‰ï¼Œä½œä¸ºarmv5ï¼Œå®‰è£…åˆ°æ‰‹æœºä¸Šã€‚ ####äºŒã€ABIäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ”¾è¿›äº†ä¼˜å…ˆçº§é«˜çš„ABIç›®å½•å¯ä»¥è¢«åŠ è½½ä½¿ç”¨ï¼Œè¢«åŠ è½½ä¸ºABIæ–‡ä»¶æ‰€è¡¨ç¤ºçš„ç»“æž„ç±»åž‹ ä¾‹å­ï¼š æˆ‘çš„æ‰‹æœºcpuæž¶æž„æ˜¯ARMv7ï¼ŒABIæ–‡ä»¶æ˜¯armeabi-v5teï¼Œä½†æ˜¯æ”¾è¿›äº†armeabi-v7aç›®å½•ä¸­ã€‚ å¯ä»¥è¢«åŠ è½½ï¼Œä½†æ˜¯åŠ è½½ä¸ºABIæ–‡ä»¶æ‰€è¡¨ç¤ºçš„æž¶æž„ç±»åž‹ã€‚è¿™æ ·å°±å‡ºçŽ°äº†ï¼ŒåŒä¸€ä¸ªåº”ç”¨ä¸­ABIæ–‡ä»¶ï¼Œå‡ºçŽ°ä¸¤ç§çš„æƒ…å†µã€‚ ####ä¸‰ã€ä¸¤ä¸ªç¬¬ä¸‰çš„SDKä¸­ABIæ–‡ä»¶ä¼˜å…ˆçº§ä¸ä¸€æ ·é—®é¢˜ï¼š ä¸¤ä¸ªç¬¬ä¸‰æ–¹çš„SDKä¸­ABIæ–‡ä»¶ä¼˜å…ˆçº§ä¸ä¸€æ ·ï¼Œæ‰‹æœºåŠ è½½è¿è¡Œæ—¶ï¼Œä¼šå¯¼è‡´ä¼˜å…ˆçº§ä½Žçš„åº“ï¼Œæ— æ³•è¢«åŠ è½½ ä¾‹å­ï¼š æˆ‘çš„æ‰‹æœºcpuæž¶æž„æ˜¯ARMv7ï¼Œé¡¹ç›®ä¸­ä½¿ç”¨ä¸¤ä¸ªç¬¬ä¸‰æ–¹SDKï¼šä¼ä¸šAå’Œä¼ä¸šB ä¼ä¸šAï¼šABIæ–‡ä»¶æ˜¯armeabi-v7aï¼Œæ”¾è¿›armeabi-v7aç›®å½•ä¸­ã€‚ä¼ä¸šBï¼šABIæ–‡ä»¶æ˜¯armeabi-v5teï¼Œæ”¾è¿›armeabiç›®å½•ä¸­ã€‚ åœ¨è¿è¡Œæ—¶ï¼Œä¼šå‘çŽ°è¿è¡ŒåŽcrashï¼Œå‡ºçŽ°å¦‚ä¸‹logä¿¡æ¯ã€‚ 1Caused by: java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file "/data/app/.xx../base.apk"],nativeLibraryDirectories=[/data/app/.xx../lib/arm, /vendor/lib, /system/lib]]] couldn't find "lib..xx...so" è§£å†³åŠžæ³•ï¼š #####1ã€ä½¿ç”¨åŒä¸€ä¼˜å…ˆçº§çš„ABIæ–‡ä»¶ï¼ŒABIæ–‡ä»¶æ”¾å…¥ä¼˜å…ˆçº§ç›¸åŒçš„ABIç›®å½• ä¼ä¸šAï¼šABIæ–‡ä»¶æ˜¯armeabi-v5teï¼Œæ”¾è¿›armeabiç›®å½•ä¸­ã€‚ä¼ä¸šBï¼šABIæ–‡ä»¶æ˜¯armeabi-v5teï¼Œæ”¾è¿›armeabiç›®å½•ä¸­ã€‚æˆ–ä¼ä¸šAï¼šABIæ–‡ä»¶æ˜¯armeabi-v7aï¼Œæ”¾è¿›armeabi-v7aç›®å½•ä¸­ã€‚ä¼ä¸šBï¼šABIæ–‡ä»¶æ˜¯armeabi-v7aï¼Œæ”¾è¿›armeabi-v7aç›®å½•ä¸­ã€‚ #####2ã€ä½¿ç”¨ä¸åŒä¼˜å…ˆçº§çš„ABIæ–‡ä»¶ï¼ŒABIæ–‡ä»¶æ”¾å…¥ä¼˜å…ˆçº§ç›¸åŒçš„ABIç›®å½•ã€‚ä¸€èˆ¬æƒ…å†µä¸å»ºè®®è¿™ä¹ˆåšã€‚ ä¼ä¸šAï¼šABIæ–‡ä»¶æ˜¯armeabi-v7aï¼Œä½†æ˜¯æ”¾è¿›armeabiç›®å½•ä¸­ã€‚ä¼ä¸šBï¼šABIæ–‡ä»¶æ˜¯armeabi-v5teï¼Œæ”¾è¿›armeabiç›®å½•ä¸­ã€‚æˆ–ä¼ä¸šAï¼šABIæ–‡ä»¶æ˜¯armeabi-v7aï¼Œæ”¾è¿›armeabi-v7aç›®å½•ä¸­ã€‚ä¼ä¸šBï¼šABIæ–‡ä»¶æ˜¯armeabi-v5teï¼Œä½†æ˜¯æ”¾è¿›armeabi-v7aç›®å½•ä¸­ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>ABI</tag>
        <tag>CPU</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸‹setTextSizeçš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿]]></title>
    <url>%2Fposts%2F99d586fa.html</url>
    <content type="text"><![CDATA[é—®å‡ ä¸ªé—®é¢˜å…ˆåœ¨app/src/main/res/values/dimens.xmlä¸­å®šä¹‰å°ºå¯¸å¦‚ä¸‹ï¼š 1&lt;dimen name="font1"&gt;18sp&lt;/dimen&gt; åœ¨ä»£ç ä¸­å¼•ç”¨æ­¤å°ºå¯¸å¦‚ä¸‹ï¼š 1234mText.setTextSize(18); // æ–¹æ³•1mText.setTextSize(getResources().getDimension(R.dimen.font1)); // æ–¹æ³•2mText.setTextSize(TypedValue.COMPLEX_UNIT_PX,getResources().getDimension(R.dimen.font1)); // æ–¹æ³•3mText.setTextSize(TypedValue.COMPLEX_UNIT_SP,18); // æ–¹æ³•4 é—®é¢˜1: æ–¹æ³•1å’Œæ–¹æ³•2è®¾ç½®çš„æ–‡å­—å°ºå¯¸å¤§å°ç›¸åŒä¹ˆï¼Ÿé—®é¢˜2:æ–¹æ³•3å’Œæ–¹æ³•4è®¾ç½®çš„æ–‡å­—å°ºå¯¸å¤§å°ç›¸åŒä¹ˆï¼Ÿé—®é¢˜3:æ–¹æ³•1å’Œæ–¹æ³•4è®¾ç½®çš„æ–‡å­—å°ºå¯¸å¤§å°ç›¸åŒä¹ˆï¼Ÿ å¦‚æžœä½ èƒ½å¾ˆæ¸…æ¥šçš„ç»™å‡ºä¸Šé¢é—®é¢˜çš„ç­”æ¡ˆï¼Œé‚£å°±æ²¡å¿…è¦å†å‘ä¸‹çœ‹äº†ï¼›å¦‚æžœä½ å¯¹ä»¥ä¸Šé—®é¢˜æ„Ÿåˆ°æ¨¡æ£±ä¸¤å¯çš„è¯ï¼Œè¯·ç»§ç»­å¾€ä¸‹çœ‹: è¦æƒ³è§£å¼€ä»¥ä¸Šç–‘æƒ‘ï¼Œå…¶å®žä¸»è¦ä»Žä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•çš„æºç å…¥æ‰‹ setTextSize(â€¦)è¿›å…¥TextViewç±»ï¼Œæ‰¾åˆ°setTextSize(â€¦)æ–¹æ³•ï¼Œå‘çŽ°å®ƒè°ƒç”¨äº†å¦ä¸€ä¸ªé‡è½½æ–¹æ³•ï¼Œæ³¨æ„è¿™é‡Œè°ƒç”¨é‡è½½æ–¹æ³•æ—¶ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé»˜è®¤å€¼ TypedValue.COMPLEX_UNIT_SPï¼Œå› æ­¤æ–¹æ³•1å’Œæ–¹æ³•4è®¾ç½®çš„æ–‡å­—å°ºå¯¸å¤§å°ç›¸åŒ. 1234567891011121314public void setTextSize(float size) &#123; setTextSize(TypedValue.COMPLEX_UNIT_SP, size);&#125;public void setTextSize(int unit, float size) &#123; Context c = getContext(); Resources r; if (c == null) r = Resources.getSystem(); else r = c.getResources(); setRawTextSize(TypedValue.applyDimension(unit, size, r.getDisplayMetrics()));&#125; é‡è½½æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•éœ€è¦é‡ç‚¹çœ‹setRawTextSize(â€¦)æ–¹æ³•é€šè¿‡å®ƒçš„å‡ ä¸ªæ–¹æ³•ä¼šå‘çŽ°å®ƒçš„ä½œç”¨å°±æ˜¯çœŸæ­£è®¾ç½®æ–‡å­—å¤§å°å¹¶åˆ·æ–°æ˜¾ç¤ºï¼š 12345678910private void setRawTextSize(float size) &#123; if (size != mTextPaint.getTextSize()) &#123; mTextPaint.setTextSize(size); if (mLayout != null) &#123; nullLayouts(); requestLayout(); invalidate(); &#125; &#125;&#125; TypedValueç±»ä¸­çš„applyDimension(â€¦)æ–¹æ³•æ ¹æ®ä¼ å…¥çš„unitå•ä½æ¥å¤„ç†æ–‡å­—å¤§å°ï¼Œè¿”å›žçš„å°ºå¯¸ä¸ºpx (é€šè¿‡ç¬¬ä¸€ä¸ªcaseæ¡ä»¶å¾—çŸ¥). 1234567891011121314151617public static float applyDimension(int unit, float value, DisplayMetrics metrics)&#123; switch (unit) &#123; case COMPLEX_UNIT_PX: return value; case COMPLEX_UNIT_DIP: return value * metrics.density; case COMPLEX_UNIT_SP: return value * metrics.scaledDensity; case COMPLEX_UNIT_PT: return value * metrics.xdpi * (1.0f/72); case COMPLEX_UNIT_IN: return value * metrics.xdpi; case COMPLEX_UNIT_MM: return value * metrics.xdpi * (1.0f/25.4f); &#125; return 0;&#125; å¦‚æžœä¼ å…¥çš„unitä¸ºCOMPLEX_UNIT_PXï¼Œåˆ™ä¼šå°†valueç›´æŽ¥è¿”å›žå¦‚æžœä¼ å…¥çš„unitä¸ºCOMPLEX_UNIT_SPï¼Œåˆ™ä¼šå°†valueå¤„ç†æˆpxè¿”å›ž getDimension(â€¦)è¿›å…¥Resourcesç±»ï¼Œæ‰¾åˆ°getDimension(â€¦)æ–¹æ³• 12345678910111213public float getDimension(@DimenRes int id) throws NotFoundException &#123; synchronized (mAccessLock) &#123; TypedValue value = mTmpValue; if (value == null) &#123; mTmpValue = value = new TypedValue(); &#125; getValue(id, value, true); if (value.type == TypedValue.TYPE_DIMENSION) &#123; return TypedValue.complexToDimension(value.data, mMetrics); &#125; throw new NotFoundException("Resource ID #0x" + Integer.toHexString(id) + " type #0x" + Integer.toHexString(value.type) + " is not valid"); &#125;&#125; è¿™é‡Œæ–¹æ³•ä¸å¤šï¼Œç‚¹getValue(â€¦)æ–¹æ³•è¿›åŽ»çœ‹ä¼šå‘çŽ°å®ƒå†…éƒ¨åˆè°ƒç”¨äº†nativeæ–¹æ³•ï¼Œè¿™é‡Œæˆ‘æ— æ³•è¿›ä¸€æ­¥è¿½æº¯å®ƒçš„å®žçŽ°ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œå› ä¸ºæˆ‘å‘çŽ°æœ‰ä¸ªæ–¹æ³•å¾ˆçœ¼ç†Ÿé‚£å°±æ˜¯ï¼šTypedValue.complexToDimension(â€¦) ï¼Œè¿›å…¥æ­¤æ–¹æ³•ä¼šæƒŠå¥‡çš„å‘çŽ°å®ƒä¹Ÿè°ƒç”¨äº†ä¸Šé¢è®²åˆ°çš„applyDimension(â€¦)æ–¹æ³•. 1234public static float complexToDimension(int data, DisplayMetrics metrics)&#123; return applyDimension( (data&gt;&gt;COMPLEX_UNIT_SHIFT)&amp;COMPLEX_UNIT_MASK, complexToFloat(data), metrics);&#125; ç”±æ­¤å¯ä»¥å¤§èƒ†çš„çŒœæµ‹ getDimension(â€¦)æ–¹æ³•æœ€ç»ˆä¹Ÿä¼šå°†æ•°æ®å¤„ç†æˆpxè¿”å›žï¼Œå› æ­¤æ–¹æ³•3å’Œæ–¹æ³•4è®¾ç½®çš„æ–‡å­—å°ºå¯¸å¤§å°ç›¸åŒï¼Œåªæ˜¯å†™æ³•ä¸åŒè€Œå·². å¥½äº†ï¼Œå›žåˆ°å¼€ç¯‡æåˆ°çš„å››ä¸ªé—®é¢˜ï¼Œå¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š æ–¹æ³•1ï¼šæ–‡å­—å°ºå¯¸ä»¥spä¸ºå•ä½ï¼Œå¤§å°ä¸º18æ–¹æ³•2ï¼šæ–‡å­—å°ºå¯¸ä»¥spä¸ºå•ä½ï¼Œå¤§å°ä¸ºï¼ˆ18spè½¬æ¢ä¸ºpxçš„å€¼ï¼‰æ–¹æ³•3ï¼šæ–‡å­—å°ºå¯¸ä»¥pxä¸ºå•ä½ï¼Œå¤§å°ä¸ºï¼ˆ18spè½¬æ¢ä¸ºpxçš„å€¼ï¼‰æ–¹æ³•4ï¼šæ–‡å­—å°ºå¯¸ä»¥spä¸ºå•ä½ï¼Œå¤§å°ä¸º18æ–¹æ³•1=æ–¹æ³•3=æ–¹æ³•4!ï¼æ–¹æ³•2 è‡³æ­¤ï¼Œæ–‡ç« ç»“æŸï¼Œå¸Œæœ›æ­¤æ–‡èƒ½å¸®åŠ©åˆ°ä½ ï¼Œå¦‚æžœå¯¹æ­¤æ–‡æœ‰ä¸åŒè§è§£ï¼Œæ¬¢è¿Žç›´æŽ¥è¯„è®ºï¼]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>TypedValue</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­ä½¿ç”¨Handleré€ æˆå†…å­˜æ³„éœ²çš„åˆ†æžå’Œè§£å†³]]></title>
    <url>%2Fposts%2F91b033d9.html</url>
    <content type="text"><![CDATA[Javaä½¿ç”¨æœ‰å‘å›¾æœºåˆ¶ï¼Œé€šè¿‡GCè‡ªåŠ¨æ£€æŸ¥å†…å­˜ä¸­çš„å¯¹è±¡ï¼ˆä»€ä¹ˆæ—¶å€™æ£€æŸ¥ç”±è™šæ‹Ÿæœºå†³å®šï¼‰ï¼Œå¦‚æžœGCå‘çŽ°ä¸€ä¸ªæˆ–ä¸€ç»„å¯¹è±¡ä¸ºä¸å¯åˆ°è¾¾çŠ¶æ€ï¼Œåˆ™å°†è¯¥å¯¹è±¡ä»Žå†…å­˜ä¸­å›žæ”¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå¯¹è±¡ä¸è¢«ä»»ä½•å¼•ç”¨æ‰€æŒ‡å‘ï¼Œåˆ™è¯¥å¯¹è±¡ä¼šåœ¨è¢«GCå‘çŽ°çš„æ—¶å€™è¢«å›žæ”¶ï¼›å¦å¤–ï¼Œå¦‚æžœä¸€ç»„å¯¹è±¡ä¸­åªåŒ…å«äº’ç›¸çš„å¼•ç”¨ï¼Œè€Œæ²¡æœ‰æ¥è‡ªå®ƒä»¬å¤–éƒ¨çš„å¼•ç”¨ï¼ˆä¾‹å¦‚æœ‰ä¸¤ä¸ªå¯¹è±¡Aå’ŒBäº’ç›¸æŒæœ‰å¼•ç”¨ï¼Œä½†æ²¡æœ‰ä»»ä½•å¤–éƒ¨å¯¹è±¡æŒæœ‰æŒ‡å‘Aæˆ–Bçš„å¼•ç”¨ï¼‰ï¼Œè¿™ä»ç„¶å±žäºŽä¸å¯åˆ°è¾¾ï¼ŒåŒæ ·ä¼šè¢«GCå›žæ”¶ã€‚ Androidä¸­ä½¿ç”¨Handleré€ æˆå†…å­˜æ³„éœ²çš„åŽŸå› 123456Handler mHandler = new Handler() &#123; @Override public void handleMessage(Message msg) &#123; mImageView.setImageBitmap(mBitmap); &#125;&#125; ä¸Šé¢æ˜¯ä¸€æ®µç®€å•çš„Handlerçš„ä½¿ç”¨ã€‚å½“ä½¿ç”¨å†…éƒ¨ç±»ï¼ˆåŒ…æ‹¬åŒ¿åç±»ï¼‰æ¥åˆ›å»ºHandlerçš„æ—¶å€™ï¼ŒHandlerå¯¹è±¡ä¼šéšå¼åœ°æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»å¯¹è±¡ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªActivityï¼‰çš„å¼•ç”¨ï¼ˆä¸ç„¶ä½ æ€Žä¹ˆå¯èƒ½é€šè¿‡Handleræ¥æ“ä½œActivityä¸­çš„Viewï¼Ÿï¼‰ã€‚è€ŒHandleré€šå¸¸ä¼šä¼´éšç€ä¸€ä¸ªè€—æ—¶çš„åŽå°çº¿ç¨‹ï¼ˆä¾‹å¦‚ä»Žç½‘ç»œæ‹‰å–å›¾ç‰‡ï¼‰ä¸€èµ·å‡ºçŽ°ï¼Œè¿™ä¸ªåŽå°çº¿ç¨‹åœ¨ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ˆä¾‹å¦‚å›¾ç‰‡ä¸‹è½½å®Œæ¯•ï¼‰ä¹‹åŽï¼Œé€šè¿‡æ¶ˆæ¯æœºåˆ¶é€šçŸ¥Handlerï¼Œç„¶åŽHandleræŠŠå›¾ç‰‡æ›´æ–°åˆ°ç•Œé¢ã€‚ç„¶è€Œï¼Œå¦‚æžœç”¨æˆ·åœ¨ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­å…³é—­äº†Activityï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼ŒActivityä¸å†è¢«ä½¿ç”¨ï¼Œå®ƒå°±æœ‰å¯èƒ½åœ¨GCæ£€æŸ¥æ—¶è¢«å›žæ”¶æŽ‰ï¼Œä½†ç”±äºŽè¿™æ—¶çº¿ç¨‹å°šæœªæ‰§è¡Œå®Œï¼Œè€Œè¯¥çº¿ç¨‹æŒæœ‰Handlerçš„å¼•ç”¨ï¼ˆä¸ç„¶å®ƒæ€Žä¹ˆå‘æ¶ˆæ¯ç»™Handlerï¼Ÿï¼‰ï¼Œè¿™ä¸ªHandleråˆæŒæœ‰Activityçš„å¼•ç”¨ï¼Œå°±å¯¼è‡´è¯¥Activityæ— æ³•è¢«å›žæ”¶ï¼ˆå³å†…å­˜æ³„éœ²ï¼‰ï¼Œç›´åˆ°ç½‘ç»œè¯·æ±‚ç»“æŸï¼ˆä¾‹å¦‚å›¾ç‰‡ä¸‹è½½å®Œæ¯•ï¼‰ã€‚å¦å¤–ï¼Œå¦‚æžœä½ æ‰§è¡Œäº†Handlerçš„postDelayed()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šå°†ä½ çš„Handlerè£…å…¥ä¸€ä¸ªMessageï¼Œå¹¶æŠŠè¿™æ¡MessageæŽ¨åˆ°MessageQueueä¸­ï¼Œé‚£ä¹ˆåœ¨ä½ è®¾å®šçš„delayåˆ°è¾¾ä¹‹å‰ï¼Œä¼šæœ‰ä¸€æ¡MessageQueue -&gt; Message -&gt; Handler -&gt; Activityçš„é“¾ï¼Œå¯¼è‡´ä½ çš„Activityè¢«æŒæœ‰å¼•ç”¨è€Œæ— æ³•è¢«å›žæ”¶ã€‚ å†…å­˜æ³„éœ²çš„å±å®³åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯è™šæ‹Ÿæœºå ç”¨å†…å­˜è¿‡é«˜ï¼Œå¯¼è‡´OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰ï¼Œç¨‹åºå‡ºé”™ã€‚å¯¹äºŽAndroidåº”ç”¨æ¥è¯´ï¼Œå°±æ˜¯ä½ çš„ç”¨æˆ·æ‰“å¼€ä¸€ä¸ªActivityï¼Œä½¿ç”¨å®Œä¹‹åŽå…³é—­å®ƒï¼Œå†…å­˜æ³„éœ²ï¼›åˆæ‰“å¼€ï¼Œåˆå…³é—­ï¼Œåˆæ³„éœ²ï¼›å‡ æ¬¡ä¹‹åŽï¼Œç¨‹åºå ç”¨å†…å­˜è¶…è¿‡ç³»ç»Ÿé™åˆ¶ï¼ŒFCã€‚ ä½¿ç”¨Handlerå¯¼è‡´å†…å­˜æ³„éœ²çš„è§£å†³æ–¹æ³• é€šè¿‡ç¨‹åºé€»è¾‘æ¥è¿›è¡Œä¿æŠ¤1.åœ¨å…³é—­Activityçš„æ—¶å€™åœæŽ‰ä½ çš„åŽå°çº¿ç¨‹ã€‚çº¿ç¨‹åœæŽ‰äº†ï¼Œå°±ç›¸å½“äºŽåˆ‡æ–­äº†Handlerå’Œå¤–éƒ¨è¿žæŽ¥çš„çº¿ï¼ŒActivityè‡ªç„¶ä¼šåœ¨åˆé€‚çš„æ—¶å€™è¢«å›žæ”¶ã€‚ 2.å¦‚æžœä½ çš„Handleræ˜¯è¢«delayçš„MessageæŒæœ‰äº†å¼•ç”¨ï¼Œé‚£ä¹ˆä½¿ç”¨ç›¸åº”çš„Handlerçš„removeCallbacks()æ–¹æ³•ï¼ŒæŠŠæ¶ˆæ¯å¯¹è±¡ä»Žæ¶ˆæ¯é˜Ÿåˆ—ç§»é™¤å°±è¡Œäº†ã€‚ å°†Handlerå£°æ˜Žä¸ºé™æ€ç±»é™æ€ç±»ä¸æŒæœ‰å¤–éƒ¨ç±»çš„å¯¹è±¡ï¼Œæ‰€ä»¥ä½ çš„Activityå¯ä»¥éšæ„è¢«å›žæ”¶ã€‚ä»£ç å¦‚ä¸‹ï¼š 123456static class MyHandler extends Handler &#123; @Override public void handleMessage(Message msg) &#123; mImageView.setImageBitmap(mBitmap); &#125;&#125; ä½†å…¶å®žæ²¡è¿™ä¹ˆç®€å•ã€‚ä½¿ç”¨äº†ä»¥ä¸Šä»£ç ä¹‹åŽï¼Œä½ ä¼šå‘çŽ°ï¼Œç”±äºŽHandlerä¸å†æŒæœ‰å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯¼è‡´ç¨‹åºä¸å…è®¸ä½ åœ¨Handlerä¸­æ“ä½œActivityä¸­çš„å¯¹è±¡äº†ã€‚æ‰€ä»¥ä½ éœ€è¦åœ¨Handlerä¸­å¢žåŠ ä¸€ä¸ªå¯¹Activityçš„å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰ï¼š 123456789101112131415static class MyHandler extends Handler &#123; WeakReference&lt;Activity &gt; mActivityReference; MyHandler(Activity activity) &#123; mActivityReference= new WeakReference&lt;Activity&gt;(activity); &#125; @Override public void handleMessage(Message msg) &#123; final Activity activity = mActivityReference.get(); if (activity != null) &#123; mImageView.setImageBitmap(mBitmap); &#125; &#125;&#125; å°†ä»£ç æ”¹ä¸ºä»¥ä¸Šå½¢å¼ä¹‹åŽï¼Œå°±ç®—å®Œæˆäº†ã€‚ å…·ä½“ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * * å®žçŽ°çš„ä¸»è¦åŠŸèƒ½ã€‚ * * @version 1.0.0 * @author Abay Zhuang &lt;br/&gt; * Create at 2014-7-28 */public class HandlerActivity2 extends Activity &#123; private static final int MESSAGE_1 = 1; private static final int MESSAGE_2 = 2; private static final int MESSAGE_3 = 3; private final Handler mHandler = new MyHandler(this); @Override public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); mHandler.sendMessageDelayed(Message.obtain(), 60000); // just finish this activity finish(); &#125; public void todo() &#123; &#125;; private static class MyHandler extends Handler &#123; private final WeakReference&lt;HandlerActivity2&gt; mActivity; public MyHandler(HandlerActivity2 activity) &#123; mActivity = new WeakReference&lt;HandlerActivity2&gt;(activity); &#125; @Override public void handleMessage(Message msg) &#123; System.out.println(msg); if (mActivity.get() == null) &#123; return; &#125; mActivity.get().todo(); &#125; &#125; ä¸Šé¢è¿™æ ·å°±å¯ä»¥äº†å—ï¼Ÿ å½“Activity finishåŽ handlerå¯¹è±¡è¿˜æ˜¯åœ¨Messageä¸­æŽ’é˜Ÿã€‚ è¿˜æ˜¯ä¼šå¤„ç†æ¶ˆæ¯ï¼Œè¿™äº›å¤„ç†æœ‰å¿…è¦ï¼Ÿæ­£å¸¸Activitiy finishåŽï¼Œå·²ç»æ²¡æœ‰å¿…è¦å¯¹æ¶ˆæ¯å¤„ç†ï¼Œé‚£éœ€è¦æ€Žä¹ˆåšå‘¢ï¼Ÿè§£å†³æ–¹æ¡ˆä¹Ÿå¾ˆç®€å•ï¼Œåœ¨Activity onStopæˆ–è€…onDestroyçš„æ—¶å€™ï¼Œå–æ¶ˆæŽ‰è¯¥Handlerå¯¹è±¡çš„Messageå’ŒRunnableã€‚é€šè¿‡æŸ¥çœ‹Handlerçš„APIï¼Œå®ƒæœ‰å‡ ä¸ªæ–¹æ³•ï¼šremoveCallbacks(Runnable r)å’ŒremoveMessages(int what)ç­‰ã€‚ ä»£ç å¦‚ä¸‹ï¼š 12345@Overridepublic void onDestroy() &#123; // If null, all callbacks and messages will be removed. mHandler.removeCallbacksAndMessages(null);&#125; å»¶ä¼¸ï¼šä»€ä¹ˆæ˜¯WeakReferenceï¼ŸWeakReferenceå¼±å¼•ç”¨ï¼Œä¸Žå¼ºå¼•ç”¨ï¼ˆå³æˆ‘ä»¬å¸¸è¯´çš„å¼•ç”¨ï¼‰ç›¸å¯¹ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯ï¼ŒGCåœ¨å›žæ”¶æ—¶ä¼šå¿½ç•¥æŽ‰å¼±å¼•ç”¨ï¼Œå³å°±ç®—æœ‰å¼±å¼•ç”¨æŒ‡å‘æŸå¯¹è±¡ï¼Œä½†åªè¦è¯¥å¯¹è±¡æ²¡æœ‰è¢«å¼ºå¼•ç”¨æŒ‡å‘ï¼ˆå®žé™…ä¸Šå¤šæ•°æ—¶å€™è¿˜è¦æ±‚æ²¡æœ‰è½¯å¼•ç”¨ï¼Œä½†æ­¤å¤„è½¯å¼•ç”¨çš„æ¦‚å¿µå¯ä»¥å¿½ç•¥ï¼‰ï¼Œè¯¥å¯¹è±¡å°±ä¼šåœ¨è¢«GCæ£€æŸ¥åˆ°æ—¶å›žæ”¶æŽ‰ã€‚å¯¹äºŽä¸Šé¢çš„ä»£ç ï¼Œç”¨æˆ·åœ¨å…³é—­Activityä¹‹åŽï¼Œå°±ç®—åŽå°çº¿ç¨‹è¿˜æ²¡ç»“æŸï¼Œä½†ç”±äºŽä»…æœ‰ä¸€æ¡æ¥è‡ªHandlerçš„å¼±å¼•ç”¨æŒ‡å‘Activityï¼Œæ‰€ä»¥GCä»ç„¶ä¼šåœ¨æ£€æŸ¥çš„æ—¶å€™æŠŠActivityå›žæ”¶æŽ‰ã€‚è¿™æ ·ï¼Œå†…å­˜æ³„éœ²çš„é—®é¢˜å°±ä¸ä¼šå‡ºçŽ°äº†ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>Handler</tag>
        <tag>å†…å­˜æ³„éœ²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¸¸ç”¨æŽ’åºç®—æ³•æ€»ç»“]]></title>
    <url>%2Fposts%2Fe3c0f347.html</url>
    <content type="text"><![CDATA[æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„æŽ’åºç®—æ³•å¾€å¾€æŒ‡çš„æ˜¯å†…éƒ¨æŽ’åºç®—æ³•ï¼Œå³æ•°æ®è®°å½•åœ¨å†…å­˜ä¸­è¿›è¡ŒæŽ’åºã€‚ æŽ’åºç®—æ³•å¤§ä½“å¯åˆ†ä¸ºä¸¤ç§ï¼š ä¸€ç§æ˜¯æ¯”è¾ƒæŽ’åºï¼Œæ—¶é—´å¤æ‚åº¦O(nlogn) ~ O(n^2)ï¼Œä¸»è¦æœ‰ï¼šå†’æ³¡æŽ’åºï¼Œé€‰æ‹©æŽ’åºï¼Œæ’å…¥æŽ’åºï¼Œå½’å¹¶æŽ’åºï¼Œå †æŽ’åºï¼Œå¿«é€ŸæŽ’åºç­‰ã€‚ å¦ä¸€ç§æ˜¯éžæ¯”è¾ƒæŽ’åºï¼Œæ—¶é—´å¤æ‚åº¦å¯ä»¥è¾¾åˆ°O(n)ï¼Œä¸»è¦æœ‰ï¼šè®¡æ•°æŽ’åºï¼ŒåŸºæ•°æŽ’åºï¼Œæ¡¶æŽ’åºç­‰ã€‚ ä¸‹è¡¨ç»™å‡ºäº†å¸¸è§æ¯”è¾ƒæŽ’åºç®—æ³•çš„æ€§èƒ½ï¼š ä¸€ç‚¹æˆ‘ä»¬å¾ˆå®¹æ˜“å¿½ç•¥çš„æ˜¯æŽ’åºç®—æ³•çš„ç¨³å®šæ€§ æŽ’åºç®—æ³•ç¨³å®šæ€§çš„ç®€å•å½¢å¼åŒ–å®šä¹‰ä¸ºï¼šå¦‚æžœAi = Ajï¼ŒæŽ’åºå‰Aiåœ¨Ajä¹‹å‰ï¼ŒæŽ’åºåŽAiè¿˜åœ¨Ajä¹‹å‰ï¼Œåˆ™ç§°è¿™ç§æŽ’åºç®—æ³•æ˜¯ç¨³å®šçš„ã€‚é€šä¿—åœ°è®²å°±æ˜¯ä¿è¯æŽ’åºå‰åŽä¸¤ä¸ªç›¸ç­‰çš„æ•°çš„ç›¸å¯¹é¡ºåºä¸å˜ã€‚ å¯¹äºŽä¸ç¨³å®šçš„æŽ’åºç®—æ³•ï¼Œåªè¦ä¸¾å‡ºä¸€ä¸ªå®žä¾‹ï¼Œå³å¯è¯´æ˜Žå®ƒçš„ä¸ç¨³å®šæ€§ï¼›è€Œå¯¹äºŽç¨³å®šçš„æŽ’åºç®—æ³•ï¼Œå¿…é¡»å¯¹ç®—æ³•è¿›è¡Œåˆ†æžä»Žè€Œå¾—åˆ°ç¨³å®šçš„ç‰¹æ€§ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŽ’åºç®—æ³•æ˜¯å¦ä¸ºç¨³å®šçš„æ˜¯ç”±å…·ä½“ç®—æ³•å†³å®šçš„ï¼Œä¸ç¨³å®šçš„ç®—æ³•åœ¨æŸç§æ¡ä»¶ä¸‹å¯ä»¥å˜ä¸ºç¨³å®šçš„ç®—æ³•ï¼Œè€Œç¨³å®šçš„ç®—æ³•åœ¨æŸç§æ¡ä»¶ä¸‹ä¹Ÿå¯ä»¥å˜ä¸ºä¸ç¨³å®šçš„ç®—æ³•ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºŽå†’æ³¡æŽ’åºï¼ŒåŽŸæœ¬æ˜¯ç¨³å®šçš„æŽ’åºç®—æ³•ï¼Œå¦‚æžœå°†è®°å½•äº¤æ¢çš„æ¡ä»¶æ”¹æˆA[i] &gt;= A[i + 1]ï¼Œåˆ™ä¸¤ä¸ªç›¸ç­‰çš„è®°å½•å°±ä¼šäº¤æ¢ä½ç½®ï¼Œä»Žè€Œå˜æˆä¸ç¨³å®šçš„æŽ’åºç®—æ³•ã€‚ å…¶æ¬¡ï¼Œè¯´ä¸€ä¸‹æŽ’åºç®—æ³•ç¨³å®šæ€§çš„å¥½å¤„ã€‚æŽ’åºç®—æ³•å¦‚æžœæ˜¯ç¨³å®šçš„ï¼Œé‚£ä¹ˆä»Žä¸€ä¸ªé”®ä¸ŠæŽ’åºï¼Œç„¶åŽå†ä»Žå¦ä¸€ä¸ªé”®ä¸ŠæŽ’åºï¼Œå‰ä¸€ä¸ªé”®æŽ’åºçš„ç»“æžœå¯ä»¥ä¸ºåŽä¸€ä¸ªé”®æŽ’åºæ‰€ç”¨ã€‚åŸºæ•°æŽ’åºå°±æ˜¯è¿™æ ·ï¼Œå…ˆæŒ‰ä½Žä½æŽ’åºï¼Œé€æ¬¡æŒ‰é«˜ä½æŽ’åºï¼Œä½Žä½æŽ’åºåŽå…ƒç´ çš„é¡ºåºåœ¨é«˜ä½ä¹Ÿç›¸åŒæ—¶æ˜¯ä¸ä¼šæ”¹å˜çš„ã€‚ 1ã€å†’æ³¡æŽ’åº(Bubble Sort)â€‹ å†’æ³¡æŽ’åºæ˜¯ä¸€ç§æžå…¶ç®€å•çš„æŽ’åºç®—æ³•ï¼Œä¹Ÿæ˜¯æˆ‘æ‰€å­¦çš„ç¬¬ä¸€ä¸ªæŽ’åºç®—æ³•ã€‚å®ƒé‡å¤åœ°èµ°è®¿è¿‡è¦æŽ’åºçš„å…ƒç´ ï¼Œä¾æ¬¡æ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªå…ƒç´ ï¼Œå¦‚æžœä»–ä»¬çš„é¡ºåºé”™è¯¯å°±æŠŠä»–ä»¬è°ƒæ¢è¿‡æ¥ï¼Œç›´åˆ°æ²¡æœ‰å…ƒç´ å†éœ€è¦äº¤æ¢ï¼ŒæŽ’åºå®Œæˆã€‚è¿™ä¸ªç®—æ³•çš„åå­—ç”±æ¥æ˜¯å› ä¸ºè¶Šå°(æˆ–è¶Šå¤§)çš„å…ƒç´ ä¼šç»ç”±äº¤æ¢æ…¢æ…¢â€œæµ®â€åˆ°æ•°åˆ—çš„é¡¶ç«¯ã€‚ â€‹ å†’æ³¡æŽ’åºç®—æ³•çš„è¿ä½œå¦‚ä¸‹ï¼š æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ï¼Œå¦‚æžœå‰ä¸€ä¸ªæ¯”åŽä¸€ä¸ªå¤§ï¼Œå°±æŠŠå®ƒä»¬ä¸¤ä¸ªè°ƒæ¢ä½ç½®ã€‚ å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œï¼Œä»Žå¼€å§‹ç¬¬ä¸€å¯¹åˆ°ç»“å°¾çš„æœ€åŽä¸€å¯¹ã€‚è¿™æ­¥åšå®ŒåŽï¼Œæœ€åŽçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°ã€‚ é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œé™¤äº†æœ€åŽä¸€ä¸ªã€‚ æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚ ç”±äºŽå®ƒçš„ç®€æ´ï¼Œå†’æ³¡æŽ’åºé€šå¸¸è¢«ç”¨æ¥å¯¹äºŽç¨‹åºè®¾è®¡å…¥é—¨çš„å­¦ç”Ÿä»‹ç»ç®—æ³•çš„æ¦‚å¿µã€‚å†’æ³¡æŽ’åºçš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package sort;/** * å†’æ³¡æŽ’åº * ä»Žå°åˆ°å¤§æŽ’åˆ— * åˆ†ç±» -------------- å†…éƒ¨æ¯”è¾ƒæŽ’åº * æ•°æ®ç»“æž„ ---------- æ•°ç»„ * æœ€å·®æ—¶é—´å¤æ‚åº¦ ---- O(n^2) * æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ ---- å¦‚æžœèƒ½åœ¨å†…éƒ¨å¾ªçŽ¯ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶,ä½¿ç”¨ä¸€ä¸ªæ——æ ‡æ¥è¡¨ç¤ºæœ‰æ— éœ€è¦äº¤æ¢çš„å¯èƒ½,å¯ä»¥æŠŠæœ€ä¼˜æ—¶é—´å¤æ‚åº¦é™ä½Žåˆ°O(n) * å¹³å‡æ—¶é—´å¤æ‚åº¦ ---- O(n^2) * æ‰€éœ€è¾…åŠ©ç©ºé—´ ------ O(1) * ç¨³å®šæ€§ ------------ ç¨³å®š */public class BubbleSort &#123; //æ‰“å°æ•°ç»„ public static void printArr(int[] arr) &#123; for (int temp : arr) &#123; System.out.print(temp + " "); &#125; System.out.println(); &#125; //äº¤æ¢æ•°ç»„å…ƒç´  public static void swapArr(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; //å†’æ³¡æŽ’åº public static void bubbleSort(int[] arr) &#123; for (int i = 0; i &lt; arr.length - 1; i++) &#123; for (int j = 0; j &lt; arr.length - i - 1; j++) &#123; if (arr[j] &gt; arr[j + 1]) &#123; swapArr(arr, j, j + 1); &#125; &#125; &#125; &#125; //ä¸»æ–¹æ³• public static void main(String[] args) &#123; int[] arr = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; //æ•°ç»„åˆå§‹åŒ– System.out.print("åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(arr); //æ‰“å°æ•°ç»„ System.out.print("æŽ’åºåŽæ•°ç»„å…ƒç´ ï¼š"); bubbleSort(arr); //å†’æ³¡æŽ’åº printArr(arr); //æ‰“å°æ•°ç»„ &#125;&#125; ä¸Šè¿°ä»£ç å¯¹åºåˆ—{ 6, 5, 3, 1, 8, 7, 2, 4 }è¿›è¡Œå†’æ³¡æŽ’åºçš„å®žçŽ°è¿‡ç¨‹å¦‚ä¸‹ å°½ç®¡å†’æ³¡æŽ’åºæ˜¯æœ€å®¹æ˜“äº†è§£å’Œå®žçŽ°çš„æŽ’åºç®—æ³•ä¹‹ä¸€ï¼Œä½†å®ƒå¯¹äºŽå°‘æ•°å…ƒç´ ä¹‹å¤–çš„æ•°åˆ—æŽ’åºæ˜¯å¾ˆæ²¡æœ‰æ•ˆçŽ‡çš„ã€‚ 2ã€é¸¡å°¾é…’æŽ’åº é¸¡å°¾é…’æŽ’åºï¼Œä¹Ÿå«å®šå‘å†’æ³¡æŽ’åºï¼Œæ˜¯å†’æ³¡æŽ’åºçš„ä¸€ç§æ”¹è¿›ã€‚æ­¤ç®—æ³•ä¸Žå†’æ³¡æŽ’åºçš„ä¸åŒå¤„åœ¨äºŽä»Žä½Žåˆ°é«˜ç„¶åŽä»Žé«˜åˆ°ä½Žï¼Œè€Œå†’æ³¡æŽ’åºåˆ™ä»…ä»Žä½Žåˆ°é«˜åŽ»æ¯”è¾ƒåºåˆ—é‡Œçš„æ¯ä¸ªå…ƒç´ ã€‚ä»–å¯ä»¥å¾—åˆ°æ¯”å†’æ³¡æŽ’åºç¨å¾®å¥½ä¸€ç‚¹çš„æ•ˆèƒ½ã€‚ é¸¡å°¾é…’æŽ’åºçš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162package sort;/** * é¸¡å°¾é…’æŽ’åºï¼šå†’æ³¡æŽ’åºçš„æ”¹è¿› * ä»Žå°åˆ°å¤§æŽ’åˆ— * åˆ†ç±» -------------- å†…éƒ¨æ¯”è¾ƒæŽ’åº * æ•°æ®ç»“æž„ ---------- æ•°ç»„ * æœ€å·®æ—¶é—´å¤æ‚åº¦ ---- O(n^2) * æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ ---- å¦‚æžœåºåˆ—åœ¨ä¸€å¼€å§‹å·²ç»å¤§éƒ¨åˆ†æŽ’åºè¿‡çš„è¯,ä¼šæŽ¥è¿‘O(n) * å¹³å‡æ—¶é—´å¤æ‚åº¦ ---- O(n^2) * æ‰€éœ€è¾…åŠ©ç©ºé—´ ------ O(1) * ç¨³å®šæ€§ ------------ ç¨³å®š */public class CocktailSort &#123; //æ‰“å°æ•°ç»„ public static void printArr(int[] arr) &#123; for (int temp : arr) &#123; System.out.print(temp + " "); &#125; System.out.println(); &#125; //äº¤æ¢æ•°ç»„å…ƒç´  public static void swapArr(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; //é¸¡å°¾é…’æŽ’åº public static void CocktailSort(int[] arr) &#123; //åˆå§‹åŒ–è¾¹ç•Œ int left = 0; int right = arr.length - 1; while (left &lt; right) &#123; //å‰åŠéƒ¨åˆ† for (int i = left; i &lt; right; i++) &#123; if (arr[i] &gt; arr[i + 1]) &#123; //å°†æœ€å¤§å…ƒç´ æ”¾åˆ°åŽè¾¹ swapArr(arr, i, i + 1); &#125; &#125; right--; //åŽåŠéƒ¨åˆ† for (int j = right; j &gt; left; j--) &#123; if (arr[j] &lt; arr[j - 1]) &#123; //å°†æœ€å°å…ƒç´ æ”¾åˆ°å‰è¾¹ swapArr(arr, j, j - 1); &#125; &#125; left++; &#125; &#125; //ä¸»æ–¹æ³• public static void main(String[] args) &#123; int[] arr = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; //æ•°ç»„åˆå§‹åŒ– System.out.print("åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(arr); //æ‰“å°æ•°ç»„ System.out.print("æŽ’åºåŽæ•°ç»„å…ƒç´ ï¼š"); CocktailSort(arr); //é¸¡å°¾é…’æŽ’åº printArr(arr); //æ‰“å°æ•°ç»„ &#125;&#125; ä»¥åºåˆ—(2,3,4,5,1)ä¸ºä¾‹ï¼Œé¸¡å°¾é…’æŽ’åºåªéœ€è¦è®¿é—®ä¸€æ¬¡åºåˆ—å°±å¯ä»¥å®ŒæˆæŽ’åºï¼Œä½†å¦‚æžœä½¿ç”¨å†’æ³¡æŽ’åºåˆ™éœ€è¦å››æ¬¡ã€‚ä½†æ˜¯åœ¨ä¹±æ•°åºåˆ—çš„çŠ¶æ€ä¸‹ï¼Œé¸¡å°¾é…’æŽ’åºä¸Žå†’æ³¡æŽ’åºçš„æ•ˆçŽ‡éƒ½å¾ˆå·®åŠ²ã€‚ 3ã€é€‰æ‹©æŽ’åº(Selection Sort) é€‰æ‹©æŽ’åºä¹Ÿæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æŽ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŽŸç†å¾ˆå®¹æ˜“ç†è§£ï¼šåˆå§‹æ—¶åœ¨åºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œæ”¾åˆ°åºåˆ—çš„èµ·å§‹ä½ç½®ä½œä¸ºå·²æŽ’åºåºåˆ—ï¼›ç„¶åŽï¼Œå†ä»Žå‰©ä½™æœªæŽ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œæ”¾åˆ°å·²æŽ’åºåºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æŽ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æŽ’åºå®Œæ¯•ã€‚ æ³¨æ„é€‰æ‹©æŽ’åºä¸Žå†’æ³¡æŽ’åºçš„åŒºåˆ«ï¼šå†’æ³¡æŽ’åºé€šè¿‡ä¾æ¬¡äº¤æ¢ç›¸é‚»ä¸¤ä¸ªé¡ºåºä¸åˆæ³•çš„å…ƒç´ ä½ç½®ï¼Œä»Žè€Œå°†å½“å‰æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼›è€Œé€‰æ‹©æŽ’åºæ¯éåŽ†ä¸€æ¬¡éƒ½è®°ä½äº†å½“å‰æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ çš„ä½ç½®ï¼Œæœ€åŽä»…éœ€ä¸€æ¬¡äº¤æ¢æ“ä½œå³å¯å°†å…¶æ”¾åˆ°åˆé€‚çš„ä½ç½®ã€‚ é€‰æ‹©æŽ’åºçš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package sort;/** * é€‰æ‹©æŽ’åº * ä»Žå°åˆ°å¤§æŽ’åˆ— * // åˆ†ç±» -------------- å†…éƒ¨æ¯”è¾ƒæŽ’åº * æ•°æ®ç»“æž„ ---------- æ•°ç»„ * æœ€å·®æ—¶é—´å¤æ‚åº¦ ---- O(n^2) * æœ€ä¼˜æ—¶é—´å¤æ‚åº¦ ---- O(n^2) * å¹³å‡æ—¶é—´å¤æ‚åº¦ ---- O(n^2) * æ‰€éœ€è¾…åŠ©ç©ºé—´ ------ O(1) * ç¨³å®šæ€§ ------------ ä¸ç¨³å®š */public class SelectionSort &#123; //æ‰“å°æ•°ç»„ public static void printArr(int[] arr) &#123; for (int temp : arr) &#123; System.out.print(temp + " "); &#125; System.out.println(); &#125; //äº¤æ¢æ•°ç»„å…ƒç´  public static void swapArr(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; //é€‰æ‹©æŽ’åº public static void SelectionSort(int[] arr) &#123; for (int i = 0; i &lt; arr.length - 1; i++) &#123; int minValue = i; //å®šä¹‰ä¸€ä¸ªæœ€å°ä¸‹æ ‡ï¼Œå‡è®¾iä¸ºæœ€å°å€¼çš„ä¸‹æ ‡ for (int j = i + 1; j &lt; arr.length; j++) &#123; //æ³¨æ„ï¼šj&lt;arr.length if (arr[minValue] &gt; arr[j]) //å¦‚æžœæœ‰æœ‰æ¯”arr[minValue]å°çš„ï¼Œåˆ™å°†minValue = j minValue = j; &#125; //åˆ¤æ–­æœ€å°ä¸‹æ ‡æ˜¯å¦æ”¹å˜ï¼Œå¦‚æžœæ”¹å˜åˆ™å°†æœ€å°çš„æ”¾åˆ°içš„ä½ç½®ä¸Š if (minValue != i) &#123; swapArr(arr, minValue, i); //æ•°ç»„å…ƒç´ äº¤æ¢ &#125; &#125; &#125; //ä¸»æ–¹æ³• public static void main(String[] args) &#123; int[] arr = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; //æ•°ç»„åˆå§‹åŒ– System.out.print("åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(arr); //æ‰“å°æ•°ç»„ System.out.print("æŽ’åºåŽæ•°ç»„å…ƒç´ ï¼š"); SelectionSort(arr); //é€‰æ‹©æŽ’åº printArr(arr); //æ‰“å°æ•°ç»„ &#125;&#125; ä¸Šè¿°ä»£ç å¯¹åºåˆ—{ 8, 5, 2, 6, 9, 3, 1, 4, 0, 7 }è¿›è¡Œé€‰æ‹©æŽ’åºçš„å®žçŽ°è¿‡ç¨‹å¦‚å³å›¾ ä½¿ç”¨é€‰æ‹©æŽ’åºä¸ºä¸€åˆ—æ•°å­—è¿›è¡ŒæŽ’åºçš„å®è§‚è¿‡ç¨‹ï¼š é€‰æ‹©æŽ’åºæ˜¯ä¸ç¨³å®šçš„æŽ’åºç®—æ³•ï¼Œä¸ç¨³å®šå‘ç”Ÿåœ¨æœ€å°å…ƒç´ ä¸ŽA[i]äº¤æ¢çš„æ—¶åˆ»ã€‚ æ¯”å¦‚åºåˆ—ï¼š{ 5, 8, 5, 2, 9 }ï¼Œä¸€æ¬¡é€‰æ‹©çš„æœ€å°å…ƒç´ æ˜¯2ï¼Œç„¶åŽæŠŠ2å’Œç¬¬ä¸€ä¸ª5è¿›è¡Œäº¤æ¢ï¼Œä»Žè€Œæ”¹å˜äº†ä¸¤ä¸ªå…ƒç´ 5çš„ç›¸å¯¹æ¬¡åºã€‚ 4ã€æ’å…¥æŽ’åº(Insertion Sort)æ’å…¥æŽ’åºæ˜¯ä¸€ç§ç®€å•ç›´è§‚çš„æŽ’åºç®—æ³•ã€‚å®ƒçš„å·¥ä½œåŽŸç†éžå¸¸ç±»ä¼¼äºŽæˆ‘ä»¬æŠ“æ‰‘å…‹ç‰Œ å¯¹äºŽæœªæŽ’åºæ•°æ®(å³æ‰‹æŠ“åˆ°çš„ç‰Œ)ï¼Œåœ¨å·²æŽ’åºåºåˆ—(å·¦æ‰‹å·²ç»æŽ’å¥½åºçš„æ‰‹ç‰Œ)ä¸­ä»ŽåŽå‘å‰æ‰«æï¼Œæ‰¾åˆ°ç›¸åº”ä½ç½®å¹¶æ’å…¥ã€‚ æ’å…¥æŽ’åºåœ¨å®žçŽ°ä¸Šï¼Œé€šå¸¸é‡‡ç”¨in-placeæŽ’åºï¼ˆå³åªéœ€ç”¨åˆ°O(1)çš„é¢å¤–ç©ºé—´çš„æŽ’åºï¼‰ï¼Œå› è€Œåœ¨ä»ŽåŽå‘å‰æ‰«æè¿‡ç¨‹ä¸­ï¼Œéœ€è¦åå¤æŠŠå·²æŽ’åºå…ƒç´ é€æ­¥å‘åŽæŒªä½ï¼Œä¸ºæœ€æ–°å…ƒç´ æä¾›æ’å…¥ç©ºé—´ã€‚ å…·ä½“ç®—æ³•æè¿°å¦‚ä¸‹ï¼š ä»Žç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æŽ’åº å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æŽ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»ŽåŽå‘å‰æ‰«æ å¦‚æžœè¯¥å…ƒç´ ï¼ˆå·²æŽ’åºï¼‰å¤§äºŽæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½® é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æŽ’åºçš„å…ƒç´ å°äºŽæˆ–è€…ç­‰äºŽæ–°å…ƒç´ çš„ä½ç½® å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åŽ é‡å¤æ­¥éª¤2~5 æ’å…¥æŽ’åºçš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344package sort;/** * æ’å…¥æŽ’åº */public class InserttionSort &#123; //æ‰“å°æ•°ç»„ public static void printArr(int[] arr) &#123; for (int temp : arr) &#123; System.out.print(temp + " "); &#125; System.out.println(); &#125; //äº¤æ¢æ•°ç»„å…ƒç´  public static void swapArr(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; //æ’å…¥æŽ’åº public static void InsertionSort(int[] arr) &#123; for (int i = 1; i &lt; arr.length; i++) &#123; //å‡è®¾ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå·²æŽ’åºåºåˆ—ï¼Œä»Žç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹èµ·æ’å…¥ int j = i - 1; //å·²æŽ’åºåºåˆ—å…ƒç´ ä¸ªæ•°ï¼Œä¸‹æ ‡ä»Ž0å¼€å§‹ï¼Œ0ä»£è¡¨ä¸€ä¸ª int get = arr[i]; while (j &gt;= 0 &amp;&amp; arr[j] &gt; get) &#123; //å°†è¦æ’å…¥å…ƒç´ ä¸Žå·²æŽ’åºçš„åºåˆ—ä»Žå³å‘å·¦è¿›è¡Œæ¯”è¾ƒ arr[j + 1] = arr[j]; //å¦‚æžœè¯¥å…ƒç´ å¤§äºŽè¦æ’å…¥å…ƒç´ ï¼Œåˆ™å°†å…¶åŽç§» j--; &#125; arr[j + 1] = get; //ç›´åˆ°è¯¥å…ƒç´ å°äºŽæˆ–ç­‰äºŽè¦æ’å…¥å…ƒç´ ï¼Œåˆ™å°†å…¶æ’å…¥åˆ°è¯¥å…ƒç´ çš„åŽè¾¹ &#125; &#125; //ä¸»æ–¹æ³• public static void main(String[] args) &#123; int[] arr = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; //æ•°ç»„åˆå§‹åŒ– System.out.print("åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(arr); //æ‰“å°æ•°ç»„ System.out.print("æŽ’åºåŽæ•°ç»„å…ƒç´ ï¼š"); InsertionSort(arr); //ç›´æŽ¥æ’å…¥æŽ’åº printArr(arr); //æ‰“å°æ•°ç»„ &#125;&#125; ä¸Šè¿°ä»£ç å¯¹åºåˆ—{ 6, 5, 3, 1, 8, 7, 2, 4 }è¿›è¡Œæ’å…¥æŽ’åºçš„å®žçŽ°è¿‡ç¨‹å¦‚ä¸‹ ä½¿ç”¨æ’å…¥æŽ’åºä¸ºä¸€åˆ—æ•°å­—è¿›è¡ŒæŽ’åºçš„å®è§‚è¿‡ç¨‹ï¼š æ’å…¥æŽ’åºä¸é€‚åˆå¯¹äºŽæ•°æ®é‡æ¯”è¾ƒå¤§çš„æŽ’åºåº”ç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æžœéœ€è¦æŽ’åºçš„æ•°æ®é‡å¾ˆå°ï¼Œæ¯”å¦‚é‡çº§å°äºŽåƒï¼Œé‚£ä¹ˆæ’å…¥æŽ’åºè¿˜æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ æ’å…¥æŽ’åºåœ¨å·¥ä¸šçº§åº“ä¸­ä¹Ÿæœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œåœ¨STLçš„sortç®—æ³•å’Œstdlibçš„qsortç®—æ³•ä¸­ï¼Œéƒ½å°†æ’å…¥æŽ’åºä½œä¸ºå¿«é€ŸæŽ’åºçš„è¡¥å……ï¼Œç”¨äºŽå°‘é‡å…ƒç´ çš„æŽ’åºï¼ˆé€šå¸¸ä¸º8ä¸ªæˆ–ä»¥ä¸‹ï¼‰ã€‚ 5ã€äºŒåˆ†æ’å…¥æŽ’åº æ’å…¥æŽ’åºçš„æ”¹è¿› å¯¹äºŽæ’å…¥æŽ’åºï¼Œå¦‚æžœæ¯”è¾ƒæ“ä½œçš„ä»£ä»·æ¯”äº¤æ¢æ“ä½œå¤§çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•æ¥å‡å°‘æ¯”è¾ƒæ“ä½œçš„æ¬¡æ•°ï¼Œæˆ‘ä»¬ç§°ä¸ºäºŒåˆ†æ’å…¥æŽ’åºï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package sort;/** * äºŒåˆ†æ’å…¥æŽ’åº */public class DichotomyInsertionSort &#123; //æ‰“å°æ•°ç»„ public static void printArr(int[] arr) &#123; for (int temp : arr) &#123; System.out.print(temp + " "); &#125; System.out.println(); &#125; //äº¤æ¢æ•°ç»„å…ƒç´  public static void swapArr(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; //äºŒåˆ†æ’å…¥æŽ’åº public static void DichotomyInsertionSort(int[] arr) &#123; for (int i = 1; i &lt; arr.length; i++) &#123; //åˆå§‹åŒ–å·²æŽ’åºåºåˆ—çš„è¾¹ç•Œ int left = 0; int right = i - 1; int get = arr[i]; //äºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°å·²æŽ’åºå…ƒç´ åºåˆ—ä¸­å°äºŽæˆ–ç­‰äºŽè¦æ’å…¥å…ƒç´ çš„ä½ç½®left while (left &lt;= right) &#123; int mid = (left + right) / 2; if (arr[mid] &gt; get) &#123; right = mid - 1; &#125; else &#123; left = mid + 1; &#125; &#125; for (int j = i - 1; j &gt;= left; j--) &#123; arr[j + 1] = arr[j]; //&gt;=leftä½ç½®ä¹‹åŽçš„å…ƒç´ æ•´ä½“åŽç§» &#125; arr[left] = get; //å°†leftä½ç½®èµ‹å€¼ä¸ºget &#125; &#125; //ä¸»æ–¹æ³• public static void main(String[] args) &#123; int[] arr = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; //æ•°ç»„åˆå§‹åŒ– System.out.print("åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(arr); //æ‰“å°æ•°ç»„ System.out.print("æŽ’åºåŽæ•°ç»„å…ƒç´ ï¼š"); DichotomyInsertionSort(arr); //äºŒåˆ†æ’å…¥æŽ’åº printArr(arr); //æ‰“å°æ•°ç»„ &#125;&#125; å½“nè¾ƒå¤§æ—¶ï¼ŒäºŒåˆ†æ’å…¥æŽ’åºçš„æ¯”è¾ƒæ¬¡æ•°æ¯”ç›´æŽ¥æ’å…¥æŽ’åºçš„æœ€å·®æƒ…å†µå¥½å¾—å¤šï¼Œä½†æ¯”ç›´æŽ¥æ’å…¥æŽ’åºçš„æœ€å¥½æƒ…å†µè¦å·®ï¼Œæ‰€å½“ä»¥å…ƒç´ åˆå§‹åºåˆ—å·²ç»æŽ¥è¿‘å‡åºæ—¶ï¼Œç›´æŽ¥æ’å…¥æŽ’åºæ¯”äºŒåˆ†æ’å…¥æŽ’åºæ¯”è¾ƒæ¬¡æ•°å°‘ã€‚äºŒåˆ†æ’å…¥æŽ’åºå…ƒç´ ç§»åŠ¨æ¬¡æ•°ä¸Žç›´æŽ¥æ’å…¥æŽ’åºç›¸åŒï¼Œä¾èµ–äºŽå…ƒç´ åˆå§‹åºåˆ—ã€‚ 6ã€å¸Œå°”æŽ’åº(Shell Sort) æ’å…¥æŽ’åºçš„æ›´é«˜æ•ˆæ”¹è¿›ï¼š å¸Œå°”æŽ’åºï¼Œä¹Ÿå«é€’å‡å¢žé‡æŽ’åºï¼Œæ˜¯æ’å…¥æŽ’åºçš„ä¸€ç§æ›´é«˜æ•ˆçš„æ”¹è¿›ç‰ˆæœ¬ã€‚å¸Œå°”æŽ’åºæ˜¯ä¸ç¨³å®šçš„æŽ’åºç®—æ³•ã€‚ å¸Œå°”æŽ’åºæ˜¯åŸºäºŽæ’å…¥æŽ’åºçš„ä»¥ä¸‹ä¸¤ç‚¹æ€§è´¨è€Œæå‡ºæ”¹è¿›æ–¹æ³•çš„ï¼š æ’å…¥æŽ’åºåœ¨å¯¹å‡ ä¹Žå·²ç»æŽ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆçŽ‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°çº¿æ€§æŽ’åºçš„æ•ˆçŽ‡ ä½†æ’å…¥æŽ’åºä¸€èˆ¬æ¥è¯´æ˜¯ä½Žæ•ˆçš„ï¼Œå› ä¸ºæ’å…¥æŽ’åºæ¯æ¬¡åªèƒ½å°†æ•°æ®ç§»åŠ¨ä¸€ä½ å¸Œå°”æŽ’åºé€šè¿‡å°†æ¯”è¾ƒçš„å…¨éƒ¨å…ƒç´ åˆ†ä¸ºå‡ ä¸ªåŒºåŸŸæ¥æå‡æ’å…¥æŽ’åºçš„æ€§èƒ½ã€‚è¿™æ ·å¯ä»¥è®©ä¸€ä¸ªå…ƒç´ å¯ä»¥ä¸€æ¬¡æ€§åœ°æœæœ€ç»ˆä½ç½®å‰è¿›ä¸€å¤§æ­¥ã€‚ç„¶åŽç®—æ³•å†å–è¶Šæ¥è¶Šå°çš„æ­¥é•¿è¿›è¡ŒæŽ’åºï¼Œç®—æ³•çš„æœ€åŽä¸€æ­¥å°±æ˜¯æ™®é€šçš„æ’å…¥æŽ’åºï¼Œä½†æ˜¯åˆ°äº†è¿™æ­¥ï¼Œéœ€æŽ’åºçš„æ•°æ®å‡ ä¹Žæ˜¯å·²æŽ’å¥½çš„äº†ï¼ˆæ­¤æ—¶æ’å…¥æŽ’åºè¾ƒå¿«ï¼‰ã€‚ å‡è®¾æœ‰ä¸€ä¸ªå¾ˆå°çš„æ•°æ®åœ¨ä¸€ä¸ªå·²æŒ‰å‡åºæŽ’å¥½åºçš„æ•°ç»„çš„æœ«ç«¯ã€‚å¦‚æžœç”¨å¤æ‚åº¦ä¸ºO(n^2)çš„æŽ’åºï¼ˆå†’æ³¡æŽ’åºæˆ–ç›´æŽ¥æ’å…¥æŽ’åºï¼‰ï¼Œå¯èƒ½ä¼šè¿›è¡Œnæ¬¡çš„æ¯”è¾ƒå’Œäº¤æ¢æ‰èƒ½å°†è¯¥æ•°æ®ç§»è‡³æ­£ç¡®ä½ç½®ã€‚è€Œå¸Œå°”æŽ’åºä¼šç”¨è¾ƒå¤§çš„æ­¥é•¿ç§»åŠ¨æ•°æ®ï¼Œæ‰€ä»¥å°æ•°æ®åªéœ€è¿›è¡Œå°‘æ•°æ¯”è¾ƒå’Œäº¤æ¢å³å¯åˆ°æ­£ç¡®ä½ç½®ã€‚ å¸Œå°”æŽ’åºçš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152package sort;/** * å¸Œå°”æŽ’åºï¼šæ’å…¥æŽ’åºçš„æ›´é«˜çº§æ”¹è¿› * ä»Žå°åˆ°å¤§æŽ’åˆ— */public class ShellSort &#123; // æ‰“å°æ•°ç»„ public static void printArr(int[] arr) &#123; for (int temp : arr) &#123; System.out.print(temp + " "); &#125; System.out.println(); &#125; // äº¤æ¢æ•°ç»„å…ƒç´  public static void swapArr(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; // å¸Œå°”æŽ’åº public static void ShellSort(int[] arr) &#123; int h = 0; while (h &lt;= arr.length) &#123; // ç”Ÿæˆåˆå§‹åŒ–å¢žé‡ h = 3 * h + 1; &#125; while (h &gt;= 1) &#123; for (int i = h; i &lt; arr.length; i++) &#123; int j = i - h; int get = arr[i]; while (j &gt;= 0 &amp;&amp; arr[j] &gt; get) &#123; arr[j + 1] = arr[j]; j = j - h; &#125; arr[j + h] = get; &#125; h = (h - 1) / 3; // é€’å‡å¢žé‡ &#125; &#125; //ä¸»æ–¹æ³• public static void main(String[] args) &#123; int[] arr = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; // æ•°ç»„åˆå§‹åŒ– System.out.print("åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(arr); // æ‰“å°æ•°ç»„ System.out.print("å¸Œå°”æŽ’åºåŽæ•°ç»„å…ƒç´ ï¼š"); ShellSort(arr); // å¸Œå°”æŽ’åº printArr(arr); // æ‰“å°æ•°ç»„ &#125;&#125; ä»¥23, 10, 4, 1çš„æ­¥é•¿åºåˆ—è¿›è¡Œå¸Œå°”æŽ’åºï¼š å¸Œå°”æŽ’åºæ˜¯ä¸ç¨³å®šçš„æŽ’åºç®—æ³•ï¼Œè™½ç„¶ä¸€æ¬¡æ’å…¥æŽ’åºæ˜¯ç¨³å®šçš„ï¼Œä¸ä¼šæ”¹å˜ç›¸åŒå…ƒç´ çš„ç›¸å¯¹é¡ºåºï¼Œä½†åœ¨ä¸åŒçš„æ’å…¥æŽ’åºè¿‡ç¨‹ä¸­ï¼Œç›¸åŒçš„å…ƒç´ å¯èƒ½åœ¨å„è‡ªçš„æ’å…¥æŽ’åºä¸­ç§»åŠ¨ï¼Œæœ€åŽå…¶ç¨³å®šæ€§å°±ä¼šè¢«æ‰“ä¹±ã€‚ æ¯”å¦‚åºåˆ—ï¼š{ 3, 5, 10, 8, 7, 2, 8, 1, 20, 6 }ï¼Œh=2æ—¶åˆ†æˆä¸¤ä¸ªå­åºåˆ— { 3, 10, 7, 8, 20 } å’Œ { 5, 8, 2, 1, 6 } ï¼ŒæœªæŽ’åºä¹‹å‰ç¬¬äºŒä¸ªå­åºåˆ—ä¸­çš„8åœ¨å‰é¢ï¼ŒçŽ°åœ¨å¯¹ä¸¤ä¸ªå­åºåˆ—è¿›è¡Œæ’å…¥æŽ’åºï¼Œå¾—åˆ° { 3, 7, 8, 10, 20 } å’Œ { 1, 2, 5, 6, 8 } ï¼Œå³ { 3, 1, 7, 2, 8, 5, 10, 6, 20, 8 } ï¼Œä¸¤ä¸ª8çš„ç›¸å¯¹æ¬¡åºå‘ç”Ÿäº†æ”¹å˜ã€‚ 7ã€å½’å¹¶æŽ’åº(Merge Sort) å½’å¹¶æŽ’åºæ˜¯åˆ›å»ºåœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æŽ’åºç®—æ³•ï¼Œæ•ˆçŽ‡ä¸ºO(nlogn)ï¼Œ1945å¹´ç”±å†¯Â·è¯ºä¼Šæ›¼é¦–æ¬¡æå‡ºã€‚ å½’å¹¶æŽ’åºçš„å®žçŽ°åˆ†ä¸ºé€’å½’å®žçŽ°ä¸Žéžé€’å½’(è¿­ä»£)å®žçŽ°ã€‚é€’å½’å®žçŽ°çš„å½’å¹¶æŽ’åºæ˜¯ç®—æ³•è®¾è®¡ä¸­åˆ†æ²»ç­–ç•¥çš„å…¸åž‹åº”ç”¨ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªå¤§é—®é¢˜åˆ†å‰²æˆå°é—®é¢˜åˆ†åˆ«è§£å†³ï¼Œç„¶åŽç”¨æ‰€æœ‰å°é—®é¢˜çš„ç­”æ¡ˆæ¥è§£å†³æ•´ä¸ªå¤§é—®é¢˜ã€‚éžé€’å½’(è¿­ä»£)å®žçŽ°çš„å½’å¹¶æŽ’åºé¦–å…ˆè¿›è¡Œæ˜¯ä¸¤ä¸¤å½’å¹¶ï¼Œç„¶åŽå››å››å½’å¹¶ï¼Œç„¶åŽæ˜¯å…«å…«å½’å¹¶ï¼Œä¸€ç›´ä¸‹åŽ»ç›´åˆ°å½’å¹¶äº†æ•´ä¸ªæ•°ç»„ã€‚ å½’å¹¶æŽ’åºç®—æ³•ä¸»è¦ä¾èµ–å½’å¹¶(Merge)æ“ä½œã€‚å½’å¹¶æ“ä½œæŒ‡çš„æ˜¯å°†ä¸¤ä¸ªå·²ç»æŽ’åºçš„åºåˆ—åˆå¹¶æˆä¸€ä¸ªåºåˆ—çš„æ“ä½œï¼Œå½’å¹¶æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š ç”³è¯·ç©ºé—´ï¼Œä½¿å…¶å¤§å°ä¸ºä¸¤ä¸ªå·²ç»æŽ’åºåºåˆ—ä¹‹å’Œï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åŽçš„åºåˆ— è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æŽ’åºåºåˆ—çš„èµ·å§‹ä½ç½® æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½® é‡å¤æ­¥éª¤3ç›´åˆ°æŸä¸€æŒ‡é’ˆåˆ°è¾¾åºåˆ—å°¾ å°†å¦ä¸€åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æŽ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ å½’å¹¶æŽ’åºçš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081package sort;/** * å½’å¹¶æŽ’åº * ä»Žå°åˆ°å¤§æŽ’åº */public class MergeSort &#123; // æ‰“å°æ•°ç»„ public static void printArr(int[] arr) &#123; for (int temp : arr) &#123; System.out.print(temp + " "); &#125; System.out.println(); &#125; // åˆå¹¶ä¸¤ä¸ªå·²æŽ’å¥½åºçš„æ•°ç»„A[left...mid]å’ŒA[mid+1...right] public static void merge(int A[], int left, int mid, int right) &#123; int len = right - left + 1; int[] temp = new int[len]; int index = 0; int i = left; //å‰ä¸€æ•°ç»„çš„èµ·å§‹å…ƒç´  int j = mid + 1; //åŽä¸€æ•°ç»„çš„èµ·å§‹å…ƒç´  while (i &lt;= mid &amp;&amp; j &lt;= right) &#123; temp[index++] = A[i] &lt;= A[j] ? A[i++] : A[j++]; // å¸¦ç­‰å·ä¿è¯å½’å¹¶æŽ’åºçš„ç¨³å®šæ€§ &#125; while (i &lt;= mid) &#123; temp[index++] = A[i++]; &#125; while (j &lt;= right) &#123; temp[index++] = A[j++]; &#125; for (int k = 0; k &lt; len; k++) &#123; A[left++] = temp[k]; &#125; &#125; // é€’å½’å®žçŽ°çš„å½’å¹¶æŽ’åº public static void mergeSortRecursion(int A[], int left, int right) &#123; // å½“å¾…æŽ’åºçš„åºåˆ—é•¿åº¦ä¸º1æ—¶ï¼Œé€’å½’å¼€å§‹å›žæº¯ï¼Œè¿›è¡Œmergeæ“ä½œ if (left == right) &#123; return; &#125; int mid = (left + right) / 2; mergeSortRecursion(A, left, mid); mergeSortRecursion(A, mid + 1, right); merge(A, left, mid, right); &#125; // éžé€’å½’(è¿­ä»£) å®žçŽ°çš„å½’å¹¶æŽ’åºï¼ˆè‡ªåº•å‘ä¸Šï¼‰ public static void mergeSortIteration(int A[], int len) &#123; // å­æ•°ç»„ç´¢å¼•ï¼Œå‰ä¸€ä¸ªä¸ºA[left...mid]ï¼ŒåŽä¸€ä¸ªå­æ•°ç»„ä¸ºA[mid+1...right] int left, mid, right; for (int i = 1; i &lt; len; i *= 2) &#123; // å­æ•°ç»„çš„å¤§å°iåˆå§‹åŒ–ä¸º1ï¼Œæ¯è½®ç¿»å€ left = 0; while (left + i &lt; len) &#123; // åŽä¸€ä¸ªæ•°ç»„å­˜åœ¨ï¼ˆéœ€è¦å½’å¹¶ï¼‰ mid = left + i - 1; right = mid + i &lt; len ? mid + i : len - 1; // åŽä¸€ä¸ªå­æ•°ç»„å¤§å°å¯èƒ½ä¸å¤Ÿ merge(A, left, mid, right); left = right + 1; // å‰ä¸€ä¸ªå­æ•°ç»„å‘åŽç§»åŠ¨ &#125; &#125; &#125; public static void main(String[] args) &#123; // ä»Žå°åˆ°å¤§å½’å¹¶æŽ’åº int[] A1 = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; int[] A2 = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; int n1 = A1.length; int n2 = A2.length; System.out.print("A1åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(A1); // æ‰“å°æ•°ç»„ System.out.print("é€’å½’å®žçŽ°çš„å½’å¹¶æŽ’åºç»“æžœï¼š"); mergeSortRecursion(A1, 0, n1 - 1); // é€’å½’å®žçŽ° printArr(A1); System.out.print("A2åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(A2); // æ‰“å°æ•°ç»„ System.out.print("éžé€’å½’å®žçŽ°çš„å½’å¹¶æŽ’åºç»“æžœï¼š"); mergeSortIteration(A2, n2); // éžé€’å½’å®žçŽ° printArr(A2); &#125;&#125; ä¸Šè¿°ä»£ç å¯¹åºåˆ—{ 6, 5, 3, 1, 8, 7, 2, 4 }è¿›è¡Œå½’å¹¶æŽ’åºçš„å®žä¾‹å¦‚ä¸‹ ä½¿ç”¨å½’å¹¶æŽ’åºä¸ºä¸€åˆ—æ•°å­—è¿›è¡ŒæŽ’åºçš„å®è§‚è¿‡ç¨‹ï¼š å½’å¹¶æŽ’åºé™¤äº†å¯ä»¥å¯¹æ•°ç»„è¿›è¡ŒæŽ’åºï¼Œè¿˜å¯ä»¥é«˜æ•ˆçš„æ±‚å‡ºæ•°ç»„å°å’Œï¼ˆå³å•è°ƒå’Œï¼‰ä»¥åŠæ•°ç»„ä¸­çš„é€†åºå¯¹ã€‚ 8ã€å †æŽ’åº(Heap Sort)â€‹ å †æŽ’åºæ˜¯æŒ‡åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æž„æ‰€è®¾è®¡çš„ä¸€ç§é€‰æ‹©æŽ’åºç®—æ³•ã€‚å †æ˜¯ä¸€ç§è¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„ç»“æž„ï¼ˆé€šå¸¸å †æ˜¯é€šè¿‡ä¸€ç»´æ•°ç»„æ¥å®žçŽ°çš„ï¼‰ï¼Œå¹¶æ»¡è¶³æ€§è´¨ï¼šä»¥æœ€å¤§å †ï¼ˆä¹Ÿå«å¤§æ ¹å †ã€å¤§é¡¶å †ï¼‰ä¸ºä¾‹ï¼Œå…¶ä¸­çˆ¶ç»“ç‚¹çš„å€¼æ€»æ˜¯å¤§äºŽå®ƒçš„å­©å­èŠ‚ç‚¹ã€‚ æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å®šä¹‰å †æŽ’åºçš„è¿‡ç¨‹ï¼š ç”±è¾“å…¥çš„æ— åºæ•°ç»„æž„é€ ä¸€ä¸ªæœ€å¤§å †ï¼Œä½œä¸ºåˆå§‹çš„æ— åºåŒº æŠŠå †é¡¶å…ƒç´ ï¼ˆæœ€å¤§å€¼ï¼‰å’Œå †å°¾å…ƒç´ äº’æ¢ æŠŠå †ï¼ˆæ— åºåŒºï¼‰çš„å°ºå¯¸ç¼©å°1ï¼Œå¹¶è°ƒç”¨heapify(A, 0)ä»Žæ–°çš„å †é¡¶å…ƒç´ å¼€å§‹è¿›è¡Œå †è°ƒæ•´ é‡å¤æ­¥éª¤2ï¼Œç›´åˆ°å †çš„å°ºå¯¸ä¸º1 å †æŽ’åºçš„ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768package sort;/** * å †æŽ’åº * ä»Žå°åˆ°å¤§æŽ’åˆ— */public class HeapSort &#123; // æ‰“å°æ•°ç»„ public static void printArr(int[] arr) &#123; for (int temp : arr) &#123; System.out.print(temp + " "); &#125; System.out.println(); &#125; // äº¤æ¢æ•°ç»„å…ƒç´  public static void swapArr(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; // ä»ŽA[i]å‘ä¸‹è¿›è¡Œå †è°ƒæ•´ public static void heapify(int A[], int i, int size) &#123; int left_child = 2 * i + 1; // å·¦å­©å­ç´¢å¼• int right_child = 2 * i + 2; // å³å­©å­ç´¢å¼• int max = i; // é€‰å‡ºå½“å‰èŠ‚ç‚¹ä¸Žå…¶å·¦å³å­©å­ä¸‰è€…ä¹‹ä¸­çš„æœ€å¤§å€¼ if (left_child &lt; size &amp;&amp; A[left_child] &gt; A[max]) &#123; max = left_child; &#125; if (right_child &lt; size &amp;&amp; A[right_child] &gt; A[max]) &#123; max = right_child; &#125; if (max != i) &#123; swapArr(A, i, max); // æŠŠå½“å‰èŠ‚ç‚¹å’Œå®ƒçš„æœ€å¤§ï¼ˆç›´æŽ¥ï¼‰å­èŠ‚ç‚¹è¿›è¡Œäº¤æ¢ heapify(A, max, size); // é€’å½’è°ƒç”¨ï¼Œç»§ç»­ä»Žå½“å‰èŠ‚ç‚¹å‘ä¸‹è¿›è¡Œå †è°ƒæ•´ &#125; &#125; // å»ºå † public static int buildHeap(int A[], int n) &#123; int heap_size = n; for (int i = heap_size / 2 - 1; i &gt;= 0; i--) // ä»Žæ¯ä¸€ä¸ªéžå¶å­ç»“ç‚¹å¼€å§‹å‘ä¸‹è¿›è¡Œè°ƒæ•´ heapify(A, i, heap_size); return heap_size; &#125; // å †æŽ’åº public static void heapSort(int A[], int n) &#123; int heap_size = buildHeap(A, n); // å»ºç«‹ä¸€ä¸ªæœ€å¤§å † while (heap_size &gt; 1) &#123; // å †ï¼ˆæ— åºåŒºï¼‰å…ƒç´ ä¸ªæ•°å¤§äºŽ1ï¼Œæœªå®ŒæˆæŽ’åº // å°†å †é¡¶å…ƒç´ ä¸Žå †çš„æœ€åŽä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œå¹¶ä»Žå †ä¸­åŽ»æŽ‰æœ€åŽä¸€ä¸ªå…ƒç´  // æ­¤å¤„äº¤æ¢æ“ä½œå¾ˆæœ‰å¯èƒ½æŠŠåŽé¢å…ƒç´ çš„ç¨³å®šæ€§æ‰“ä¹±ï¼Œæ‰€ä»¥å †æŽ’åºæ˜¯ä¸ç¨³å®šçš„æŽ’åºç®—æ³• swapArr(A, 0, --heap_size); heapify(A, 0, heap_size); // ä»Žæ–°çš„å †é¡¶å…ƒç´ å¼€å§‹å‘ä¸‹è¿›è¡Œå †è°ƒæ•´ï¼Œæ—¶é—´å¤æ‚åº¦O(log n) &#125; &#125; // ä¸»æ–¹æ³• public static void main(String[] args) &#123; int[] arr = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; // æ•°ç»„åˆå§‹åŒ– System.out.print("åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(arr); // æ‰“å°æ•°ç»„ System.out.print("å †æŽ’åºåŽæ•°ç»„å…ƒç´ ï¼š"); heapSort(arr, arr.length); // å †æŽ’åº printArr(arr); // æ‰“å°æ•°ç»„ &#125;&#125; å †æŽ’åºç®—æ³•çš„æ¼”ç¤ºï¼š åŠ¨ç”»ä¸­åœ¨æŽ’åºè¿‡ç¨‹ä¹‹å‰ç®€å•çš„è¡¨çŽ°äº†åˆ›å»ºå †çš„è¿‡ç¨‹ä»¥åŠå †çš„é€»è¾‘ç»“æž„ã€‚ å †æŽ’åºæ˜¯ä¸ç¨³å®šçš„æŽ’åºç®—æ³•ï¼Œä¸ç¨³å®šå‘ç”Ÿåœ¨å †é¡¶å…ƒç´ ä¸ŽA[i]äº¤æ¢çš„æ—¶åˆ»ã€‚ æ¯”å¦‚åºåˆ—ï¼š{ 9, 5, 7, 5 }ï¼Œå †é¡¶å…ƒç´ æ˜¯9ï¼Œå †æŽ’åºä¸‹ä¸€æ­¥å°†9å’Œç¬¬äºŒä¸ª5è¿›è¡Œäº¤æ¢ï¼Œå¾—åˆ°åºåˆ— { 5, 5, 7, 9 }ï¼Œå†è¿›è¡Œå †è°ƒæ•´å¾—åˆ°{ 7, 5, 5, 9 }ï¼Œé‡å¤ä¹‹å‰çš„æ“ä½œæœ€åŽå¾—åˆ°{ 5, 5, 7, 9 }ä»Žè€Œæ”¹å˜äº†ä¸¤ä¸ª5çš„ç›¸å¯¹æ¬¡åºã€‚ 9ã€å¿«é€ŸæŽ’åº(Quick Sort)â€‹ å¿«é€ŸæŽ’åºæ˜¯ç”±ä¸œå°¼Â·éœå°”æ‰€å‘å±•çš„ä¸€ç§æŽ’åºç®—æ³•ã€‚åœ¨å¹³å‡çŠ¶å†µä¸‹ï¼ŒæŽ’åºnä¸ªå…ƒç´ è¦O(nlogn)æ¬¡æ¯”è¾ƒã€‚åœ¨æœ€åçŠ¶å†µä¸‹åˆ™éœ€è¦O(n^2)æ¬¡æ¯”è¾ƒï¼Œä½†è¿™ç§çŠ¶å†µå¹¶ä¸å¸¸è§ã€‚äº‹å®žä¸Šï¼Œå¿«é€ŸæŽ’åºé€šå¸¸æ˜Žæ˜¾æ¯”å…¶ä»–O(nlogn)ç®—æ³•æ›´å¿«ï¼Œå› ä¸ºå®ƒçš„å†…éƒ¨å¾ªçŽ¯å¯ä»¥åœ¨å¤§éƒ¨åˆ†çš„æž¶æž„ä¸Šå¾ˆæœ‰æ•ˆçŽ‡åœ°è¢«å®žçŽ°å‡ºæ¥ã€‚ å¿«é€ŸæŽ’åºä½¿ç”¨åˆ†æ²»ç­–ç•¥(Divide and Conquer)æ¥æŠŠä¸€ä¸ªåºåˆ—åˆ†ä¸ºä¸¤ä¸ªå­åºåˆ—ã€‚æ­¥éª¤ä¸ºï¼š ä»Žåºåˆ—ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œä½œä¸ºâ€åŸºå‡†â€(pivot). æŠŠæ‰€æœ‰æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ”¾åœ¨åŸºå‡†å‰é¢ï¼Œæ‰€æœ‰æ¯”åŸºå‡†å€¼å¤§çš„å…ƒç´ æ”¾åœ¨åŸºå‡†çš„åŽé¢ï¼ˆç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹ï¼‰ï¼Œè¿™ä¸ªç§°ä¸ºåˆ†åŒº(partition)æ“ä½œã€‚ å¯¹æ¯ä¸ªåˆ†åŒºé€’å½’åœ°è¿›è¡Œæ­¥éª¤1~2ï¼Œé€’å½’çš„ç»“æŸæ¡ä»¶æ˜¯åºåˆ—çš„å¤§å°æ˜¯0æˆ–1ï¼Œè¿™æ—¶æ•´ä½“å·²ç»è¢«æŽ’å¥½åºäº†ã€‚ å¿«é€ŸæŽ’åºçš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package sort;/** * å¿«é€ŸæŽ’åº * ä»Žå°åˆ°å¤§æŽ’åˆ— */public class QuickSort &#123; // æ‰“å°æ•°ç»„ public static void printArr(int[] arr) &#123; for (int temp : arr) &#123; System.out.print(temp + " "); &#125; System.out.println(); &#125; // äº¤æ¢æ•°ç»„å…ƒç´  public static void swapArr(int[] arr, int i, int j) &#123; int temp = arr[i]; arr[i] = arr[j]; arr[j] = temp; &#125; // åˆ’åˆ†å‡½æ•° public static int partition(int A[], int left, int right) &#123; int pivot = A[right]; // è¿™é‡Œæ¯æ¬¡éƒ½é€‰æ‹©æœ€åŽä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡† int tail = left - 1; // tailä¸ºå°äºŽåŸºå‡†çš„å­æ•°ç»„æœ€åŽä¸€ä¸ªå…ƒç´ çš„ç´¢å¼• for (int i = left; i &lt; right; i++) &#123; //éåŽ†åŸºå‡†ä»¥å¤–çš„å…¶ä»–å…ƒç´  if (A[i] &lt;= pivot) &#123; // æŠŠå°äºŽç­‰äºŽåŸºå‡†çš„å…ƒç´ æ”¾åˆ°å‰ä¸€ä¸ªå­æ•°ç»„æœ«å°¾ swapArr(A, ++tail, i); &#125; &#125; // æœ€åŽæŠŠåŸºå‡†æ”¾åˆ°å‰ä¸€ä¸ªå­æ•°ç»„çš„åŽè¾¹ï¼Œå‰©ä¸‹çš„å„¿å­æ•°ç»„æ—¢æ˜¯å¤§äºŽåŸºå‡†çš„å­æ•°ç»„ // è¯¥æ“ä½œå¾ˆæœ‰å¯èƒ½æŠŠåŽé¢çš„ç¨³å®šæ€§æ‰“ä¹±ï¼Œæ‰€ä»¥å¿«é€ŸæŽ’åºæ˜¯ä¸ç¨³å®šçš„æŽ’åºç®—æ³• swapArr(A, tail + 1, right); return tail + 1; &#125; // å¿«é€ŸæŽ’åº public static void quickSort(int A[], int left, int right) &#123; if (left &gt;= right) &#123; return; &#125; int pivot_index = partition(A, left, right); // åŸºå‡†çš„ç´¢å¼• quickSort(A, left, pivot_index - 1); quickSort(A, pivot_index + 1, right); &#125; // ä¸»æ–¹æ³• public static void main(String[] args) &#123; int[] arr = &#123;6, 5, 3, 1, 8, 7, 2, 4&#125;; // æ•°ç»„åˆå§‹åŒ– System.out.print("åŽŸæ•°ç»„å…ƒç´ ï¼š"); printArr(arr); // æ‰“å°æ•°ç»„ System.out.print("å¿«é€ŸæŽ’åºåŽæ•°ç»„å…ƒç´ ï¼š"); quickSort(arr, 0, arr.length - 1); // å¿«é€ŸæŽ’åº printArr(arr); // æ‰“å°æ•°ç»„ &#125;&#125; ä½¿ç”¨å¿«é€ŸæŽ’åºæ³•å¯¹ä¸€åˆ—æ•°å­—è¿›è¡ŒæŽ’åºçš„è¿‡ç¨‹ï¼š å¿«é€ŸæŽ’åºæ˜¯ä¸ç¨³å®šçš„æŽ’åºç®—æ³•ï¼Œä¸ç¨³å®šå‘ç”Ÿåœ¨åŸºå‡†å…ƒç´ ä¸ŽA[tail+1]äº¤æ¢çš„æ—¶åˆ»ã€‚ æ¯”å¦‚åºåˆ—ï¼š{ 1, 3, 4, 2, 8, 9, 8, 7, 5 }ï¼ŒåŸºå‡†å…ƒç´ æ˜¯5ï¼Œä¸€æ¬¡åˆ’åˆ†æ“ä½œåŽ5è¦å’Œç¬¬ä¸€ä¸ª8è¿›è¡Œäº¤æ¢ï¼Œä»Žè€Œæ”¹å˜äº†ä¸¤ä¸ªå…ƒç´ 8çš„ç›¸å¯¹æ¬¡åºã€‚ Javaç³»ç»Ÿæä¾›çš„Arrays.sortå‡½æ•°ã€‚å¯¹äºŽåŸºç¡€ç±»åž‹ï¼Œåº•å±‚ä½¿ç”¨å¿«é€ŸæŽ’åºã€‚å¯¹äºŽéžåŸºç¡€ç±»åž‹ï¼Œåº•å±‚ä½¿ç”¨å½’å¹¶æŽ’åºã€‚è¯·é—®æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ ç­”ï¼šè¿™æ˜¯è€ƒè™‘åˆ°æŽ’åºç®—æ³•çš„ç¨³å®šæ€§ã€‚å¯¹äºŽåŸºç¡€ç±»åž‹ï¼Œç›¸åŒå€¼æ˜¯æ— å·®åˆ«çš„ï¼ŒæŽ’åºå‰åŽç›¸åŒå€¼çš„ç›¸å¯¹ä½ç½®å¹¶ä¸é‡è¦ï¼Œæ‰€ä»¥é€‰æ‹©æ›´ä¸ºé«˜æ•ˆçš„å¿«é€ŸæŽ’åºï¼Œå°½ç®¡å®ƒæ˜¯ä¸ç¨³å®šçš„æŽ’åºç®—æ³•ï¼›è€Œå¯¹äºŽéžåŸºç¡€ç±»åž‹ï¼ŒæŽ’åºå‰åŽç›¸ç­‰å®žä¾‹çš„ç›¸å¯¹ä½ç½®ä¸å®œæ”¹å˜ï¼Œæ‰€ä»¥é€‰æ‹©ç¨³å®šçš„å½’å¹¶æŽ’åºã€‚]]></content>
      <categories>
        <category>ç®—æ³•</category>
        <category>æŽ’åº</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>å†’æ³¡æŽ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å†’æ³¡æŽ’åºä¼˜åŒ–]]></title>
    <url>%2Fposts%2F4ef397b8.html</url>
    <content type="text"><![CDATA[å‰ä¸€é˜µå­æœ‰ä¸ªè¯»è€…åœ¨å¾®ä¿¡é‡Œè·Ÿæˆ‘èŠäº†ä¸€ä»¶å¾ˆæœ‰è¶£çš„äº‹æƒ…ï¼Œä»–åŽ»ç¾Žå›¢å®žä¹ ï¼Œé¢è¯•è®©ä»–å“­ç¬‘ä¸å¾—ï¼Œå› ä¸ºè´¥åœ¨äº†å†’æ³¡æŽ’åºä¸Šã€‚ æƒ…å†µæ˜¯è¿™æ ·å­çš„ï¼Œå½“æ—¶å’Œé¢è¯•å®˜èŠçš„æ„Ÿè§‰è¿˜å¯ä»¥ï¼Œå°±åœ¨ä»–è§‰å¾—å¥½åƒå·®ä¸å¤šå¿«ç»“æŸçš„æ—¶å€™ï¼Œé¢è¯•å®˜ç»™ä»–æ‰”äº†ä¸ªé¢˜ï¼šâ€œæˆ‘è¿™åˆšå¥½æœ‰çº¸å’Œç¬”ï¼Œä½ æ¥å†™ä¸ªå†’æ³¡æŽ’åºå§ã€‚â€ è¿™ä½è¯»è€…å¿ƒé‡Œä¸€æ…Œï¼Œä¸ºä»€ä¹ˆæ…Œï¼Œå€’å¹¶ä¸æ˜¯å› ä¸ºä¸ä¼šå†™ï¼Œå› ä¸ºä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œå†’æ³¡æŽ’åºåŸºæœ¬ä¸Šæ²¡æœ‰ä¸ä¼šå†™çš„ï¼Œè€Œæ˜¯äº‹å‘çªç„¶ï¼Œæ„Ÿè§‰ä¸å¤ªå¦™ã€‚å½“æ—¶ä»–æ˜¯è¿™ä¹ˆå†™çš„ï¼š 123456789public void bubbleSort(int[] a) &#123; for(int i = a.length - 1; i &gt; 0; i--) &#123; for(int j = 0; j &lt; i; j++) &#123; if(a[j] &gt; a[j+1]) //äº¤æ¢ï¼Œå…·ä½“å®žçŽ°ç•¥ swap(a, j, j+1); &#125; &#125;&#125; æžœä¸å…¶ç„¶ï¼Œä»–å†™äº†ä¹‹åŽï¼Œé¢è¯•å®˜å°±é—®ä»–ï¼Œè¿™ç§å†™æ³•æœ‰æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿèƒ½å¦ç»§ç»­ä¼˜åŒ–ï¼Ÿç»“æžœè¿˜çœŸæ²¡ç­”ä¸Šæ¥ã€‚ï¼ˆçœ‹åˆ°è¿™é‡Œï¼Œè¯»è€…ä»¬ä¸å¦¨ä¹Ÿå…ˆæ€è€ƒä¸‹å¦‚ä½•ä¼˜åŒ–ã€‚ï¼‰ ä»Šå¤©å°±è¿™ä¸ªå†’æ³¡æŽ’åºï¼Œæˆ‘ä»¬å†å¤šèŠå‡ å¥ï¼Œå›žå½’ä¸€ä¸‹ç»å…¸ã€‚ä¹Ÿå¸Œæœ›ä»¥åŽæœ‰æœ‹å‹å®žä¹ ä¹Ÿå¥½ï¼Œæ ¡æ‹›ä¹Ÿç½¢ï¼Œä¸è¦å†æ ½åœ¨åŒæ ·çš„é—®é¢˜ä¸Šäº†ã€‚ å†’æ³¡æŽ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦é«˜ï¼Œå¦‚æžœä¸æ¸…æ¥šç®—æ³•å¤æ‚åº¦å¦‚ä½•è®¡ç®—ï¼Œå¯ä»¥å‚è€ƒä¸‹è¿™ç¯‡æ–‡ç« ï¼šå¾ªåºæ¸è¿›å¸¦ä½ å­¦ä¹ æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ã€‚ä½†æ˜¯å†’æ³¡æŽ’åºç®€å•ï¼ŒåŸºæœ¬æµç¨‹æ˜¯ï¼šæ¯ä¸€è½®ä»Žå¤´å¼€å§‹ä¸¤ä¸¤æ¯”è¾ƒï¼Œå°†è¾ƒå¤§çš„é¡¹æ”¾åœ¨è¾ƒå°é¡¹çš„å³è¾¹ï¼Œè¿™æ ·æ¯è½®ä¸‹æ¥ä¿è¯è¯¥è½®æœ€å¤§çš„æ•°åœ¨æœ€å³è¾¹ã€‚å¦‚ä½•å®žçŽ°ï¼Ÿå°±å¦‚ä¸Šé¢è¿™ä½æœ‹å‹æ‰€å†™çš„é‚£æ ·ï¼ŒåŸºæœ¬ä¸Šå¤§å®¶éƒ½ä¼šå†™ã€‚ ä½†æ˜¯ä»Šå¤©ä¸»è¦è®¨è®ºçš„æ˜¯å¦‚ä½•ä¼˜åŒ–ï¼Œæœ‰äººå¯èƒ½ä¼šè¯´ï¼Œè¿™æ˜¯å†ç®€å•ä¸è¿‡çš„ç®—æ³•äº†ï¼Œè¿˜æœ‰ä»€ä¹ˆå¥½ä¼˜åŒ–çš„ï¼Ÿç¡®å®žï¼Œä¸Šé¢è¿™æ®µä»£ç æ²¡æœ‰æ¯›ç—…ï¼Œä½†çš„ç¡®æ˜¯æœ‰å¯ä¼˜åŒ–ä¹‹å¤„çš„ã€‚ æˆ‘ä»¬å¯ä»¥å‡è®¾ä¸€ç§åœºæ™¯ï¼Œæ¯”å¦‚ 8 1 2 3 5 7ï¼Œè¿›è¡Œä¸€æ¬¡æŽ’åºä¹‹åŽï¼Œç»“æžœå°±å˜æˆäº† 1 2 3 5 7 8ï¼Œé‚£æˆ‘ä»¬è¿˜æœ‰å¿…è¦å†åƒä¸Šé¢ä»£ç é‡Œé‚£æ ·ç»§ç»­å¾ªçŽ¯ä¸‹åŽ»å—ï¼Ÿè‚¯å®šæ²¡æœ‰å¿…è¦äº†ï¼Œå› ä¸ºè¿™å·²ç»æ˜¯æœ€ç»ˆç»“æžœäº†ã€‚ é‚£é’ˆå¯¹ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä¼˜åŒ–çš„ç‚¹ä¸»è¦åœ¨äºŽï¼šå‡å¦‚æŸä¸€è¶ŸæŽ’åºä¹‹åŽå·²ç»æœ‰åºï¼Œæˆ‘ä»¬éœ€è¦å‡å°‘æŽ’åºçš„è¶Ÿæ•°ã€‚å¦åˆ™å°±åšäº†å¾ˆå¤šæ— ç”¨åŠŸã€‚ é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘åœ¨ç®—æ³•ä¸­åŠ å…¥ä¸€ä¸ªå¸ƒå°”å˜é‡ï¼Œæ¥æ ‡è¯†è¯¥è½®æœ‰æ²¡æœ‰è¿›è¡Œæ•°æ®çš„äº¤æ¢ï¼Œè‹¥åœ¨æŸä¸€è¶ŸæŽ’åºä¸­æœªå‘çŽ°æ•°æ®ä½ç½®çš„äº¤æ¢ï¼Œåˆ™è¯´æ˜Žå¾…æŽ’åºçš„æ— åºåŒºä¸­æ‰€æœ‰çš„é¡¹å‡å·²æ»¡è¶³æŽ’åºåŽçš„ç»“æžœã€‚é‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦å†æ¬¡æŽ’åºä¸‹åŽ»äº†ã€‚å¯ä»¥å¦‚ä¸‹æ”¹é€ ï¼š 12345678910111213public void bubbleSort(int[] a) &#123; boolean exchange; for(int i = a.length - 1; i &gt; 0; i--) &#123; exchange = false; for(int j = 0; j &lt; i; j++) &#123; if(a[j] &gt; a[j+1]) &#123; swap(a, j, j+1); exchange = true; &#125; &#125; if(!exchange) return; &#125;&#125; è¿™æ ·å°±ä¼˜åŒ–å®Œäº†ï¼Œå…¶å®žä»£ç é€»è¾‘å¾ˆç®€å•ï¼Œé€šè¿‡ä¸€ä¸ªå¸ƒå°”å˜é‡å³å¯ç›‘æŽ§ä¸€è¶Ÿè¿‡ç¨‹æœ‰æ²¡æœ‰è¿›è¡Œæ•°æ®äº¤æ¢ã€‚ å†’æ³¡æŽ’åºæœ€å¥½çš„æƒ…å†µæ˜¯åˆå§‹çŠ¶æ€æ˜¯æ­£åºçš„ï¼Œä¸€æ¬¡æ‰«æå³å¯å®ŒæˆæŽ’åºï¼Œæ‰€ä»¥æœ€å¥½çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)ï¼›æœ€åçš„æƒ…å†µæ˜¯ååºçš„ï¼Œæ­¤æ—¶æœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N^2)ã€‚å¹³å‡æƒ…å†µï¼Œæ¯è½®N/2æ¬¡å¾ªçŽ¯ï¼ŒNè½®æ—¶é—´å¤æ‚åº¦ä¸ºO(N^2)ã€‚æ‰€ä»¥å®ƒå¹¶ä¸æ˜¯ä¸ªå¥½çš„æŽ’åºç®—æ³•ã€‚è¿™ä¸ªé—®é¢˜çš„è®¨è®ºå°±åˆ°æ­¤ç»“æŸï¼Œå¦‚æžœæœ‰æ›´å¥½çš„ä¼˜åŒ–ç®—æ³•ä¹Ÿæ¬¢è¿Žç•™è¨€è®¨è®ºã€‚ å†’æ³¡æŽ’åºå¹¶ä¸å¥½ï¼Œä½†ä¸ºä»€ä¹ˆé¢è¯•å®˜è¿˜ä¼šåŽ»é—®ï¼Ÿé’ˆå¯¹è¿™ä»¶äº‹æƒ…ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„ä»€ä¹ˆå‘¢ï¼Ÿ ç»å…¸çš„ä¸œè¥¿ï¼Œå¯èƒ½å·²ç»ä¸ç”¨äº†ï¼Œä½†æ˜¯ä»Žç»å…¸çš„ä¸œè¥¿èº«ä¸Šï¼Œæˆ‘ä»¬èƒ½å­¦åˆ°çš„è¿˜æœ‰å¾ˆå¤šï¼Œå¦åˆ™ä¹Ÿä¸ä¼šæˆä¸ºç»å…¸ã€‚ç‰¹åˆ«æ˜¯é‚£äº›é¢è¯•ç»å¸¸è¢«é—®åˆ°çš„ï¼Œæ€»æœ‰å®ƒå­˜åœ¨çš„åˆç†æ€§ã€‚ æ•™ç§‘ä¹¦ä¸Šçš„ä¸œè¥¿ä¸ä»£è¡¨å®žæˆ˜ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™è€ƒè™‘åˆ°éžç†æƒ³æƒ…å†µä¸‹ï¼Œå°±å¯èƒ½ä¸é‚£ä¹ˆé€‚ç”¨äº†ã€‚é¢è¯•å®˜å¾€å¾€æ›´åŠ æ³¨é‡çš„æ˜¯åœ¨ä¸é€‚ç”¨çš„æƒ…å†µä¸‹ï¼Œé¢è¯•è€…æ˜¯å¦‚ä½•åº”å¯¹çš„ã€‚é¢è¯•å®˜æ›´åŠ çœ‹é‡çš„æ˜¯é¢è¯•è€…çš„æ€è·¯ã€‚ åº”å±Šç”Ÿä¸èƒ½æµ®èºï¼Œç‰¹åˆ«æ˜¯åœ¨å‡†å¤‡é¢è¯•çš„æ—¶å€™ï¼Œä¸€å®šè¦æ­¥æ­¥ä¸ºè¥ï¼Œåˆ‡å¿Œå¥½é«˜éª›è¿œï¼Œæµ…å°è¾„æ­¢ï¼Œå¤šå­¦ä¹ å­¦ä¹ ç»å…¸çš„æ•°æ®ç»“æž„å’Œç®—æ³•ï¼Œå¤šåšåšç®—æ³•é¢˜è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚]]></content>
      <categories>
        <category>ç®—æ³•</category>
        <category>æŽ’åº</category>
      </categories>
      <tags>
        <tag>ç®—æ³•</tag>
        <tag>å†’æ³¡æŽ’åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gradleä¾èµ–é…ç½®è¯´æ˜Ž]]></title>
    <url>%2Fposts%2F7a69db10.html</url>
    <content type="text"><![CDATA[ä¹‹å‰å¯¹Android Gradleæž„å»ºçš„ä¾èµ–ä¸€ç›´å‚»å‚»åˆ†ä¸æ¸…ï¼Œè¿™æ®µæ—¶é—´æ­£å¥½æŽ¥å…¥é›†å›¢çš„ä¸€ä¸ªäºŒæ–¹åº“ï¼Œè¸©äº†å¾ˆå¤šå‘ï¼Œä¹Ÿé¡ºå¸¦æŠŠGradleä¾èµ–è¿™å—æžæ¸…æ¥šäº†ï¼Œä¸»è¦æ•´ç†äº†ä¸‹Gradleä¾èµ–çš„ç±»åž‹ã€ä¾èµ–é…ç½®ã€å¦‚ä½•æŸ¥çœ‹ä¾èµ–ã€ä¾èµ–å†²çªå¦‚ä½•è§£å†³ã€‚ ä¾èµ–ç±»åž‹dependencies DSLæ ‡ç­¾æ˜¯æ ‡å‡†Gradle APIä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯Android Gradleæ’ä»¶çš„ç‰¹æ€§ï¼Œæ‰€ä»¥å®ƒä¸å±žäºŽandroidæ ‡ç­¾ã€‚ ä¾èµ–æœ‰ä¸‰ç§æ–¹å¼ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 1234567891011121314apply plugin: 'com.android.application'android &#123; ... &#125;dependencies &#123; // Dependency on a local library module implementation project(":mylibrary") // Dependency on local binaries implementation fileTree(dir: 'libs', include: ['*.jar']) // Dependency on a remote binary implementation 'com.example.android:app-magic:12.3'&#125; æœ¬åœ°libraryæ¨¡å—ä¾èµ– 1implementation project(":mylibrary") è¿™ç§ä¾èµ–æ–¹å¼æ˜¯ç›´æŽ¥ä¾èµ–æœ¬åœ°åº“å·¥ç¨‹ä»£ç çš„ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œmylibraryçš„åå­—å¿…é¡»åŒ¹é…åœ¨settings.gradleä¸­includeæ ‡ç­¾ä¸‹å®šä¹‰çš„æ¨¡å—åå­—ï¼‰ã€‚ æœ¬åœ°äºŒè¿›åˆ¶ä¾èµ– 1implementation fileTree(dir: 'libs', include: ['*.jar']) è¿™ç§ä¾èµ–æ–¹å¼æ˜¯ä¾èµ–å·¥ç¨‹ä¸­çš„ module_name/libs/ç›®å½•ä¸‹çš„Jaræ–‡ä»¶ï¼ˆæ³¨æ„Gradleçš„è·¯å¾„æ˜¯ç›¸å¯¹äºŽbuild.gradleæ–‡ä»¶æ¥è¯»å–çš„ï¼Œæ‰€ä»¥ä¸Šé¢æ˜¯è¿™æ ·çš„ç›¸å¯¹è·¯å¾„ï¼‰ã€‚ å¦‚æžœåªæƒ³ä¾èµ–å•ä¸ªç‰¹å®šæœ¬åœ°äºŒè¿›åˆ¶åº“ï¼Œå¯ä»¥å¦‚ä¸‹é…ç½®ï¼š 1implementation files('libs/foo.jar', 'libs/bar.jar') è¿œç¨‹äºŒè¿›åˆ¶ä¾èµ– 1implementation 'com.example.android:app-magic:12.3' ä¸Šé¢æ˜¯ç®€å†™çš„æ–¹å¼ï¼Œè¿™ç§ä¾èµ–å®Œæ•´çš„å†™æ³•å¦‚ä¸‹ï¼š 1implementation group: 'com.example.android', name: 'app-magic', version: '12.3' groupã€nameã€versionå…±åŒå®šä½ä¸€ä¸ªè¿œç¨‹ä¾èµ–åº“ã€‚éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œversionæœ€å¥½ä¸è¦å†™æˆâ€12.3+â€è¿™ç§æ–¹å¼ï¼Œé™¤éžæœ‰æ˜Žç¡®çš„é¢„æœŸï¼Œå› ä¸ºéžé¢„æœŸçš„ç‰ˆæœ¬æ›´æ–°ä¼šå¸¦æ¥æž„å»ºé—®é¢˜ã€‚è¿œç¨‹ä¾èµ–éœ€è¦åœ¨repositoriesæ ‡ç­¾ä¸‹å£°æ˜Žè¿œç¨‹ä»“åº“ï¼Œä¾‹å¦‚jcenter()ã€google()ã€mavenä»“åº“ç­‰ã€‚ ä¾èµ–é…ç½®ç›®å‰Gradleç‰ˆæœ¬æ”¯æŒçš„ä¾èµ–é…ç½®æœ‰ï¼šimplementationã€apiã€compileOnlyã€runtimeOnlyå’ŒannotationProcessorï¼Œå·²ç»åºŸå¼ƒçš„é…ç½®æœ‰ï¼šcompileã€providedã€apkã€providedCompileã€‚æ­¤å¤–ä¾èµ–é…ç½®è¿˜å¯ä»¥åŠ ä¸€äº›é…ç½®é¡¹ï¼Œä¾‹å¦‚AndroidTestImplementationã€debugApiç­‰ç­‰ã€‚ å¸¸ç”¨çš„æ˜¯implementationã€apiã€compileOnlyä¸‰ä¸ªä¾èµ–é…ç½®ï¼Œå«ä¹‰å¦‚ä¸‹ï¼š implementationä¸Žcompileå¯¹åº”ï¼Œä¼šæ·»åŠ ä¾èµ–åˆ°ç¼–è¯‘è·¯å¾„ï¼Œå¹¶ä¸”ä¼šå°†ä¾èµ–æ‰“åŒ…åˆ°è¾“å‡ºï¼ˆaaræˆ–apkï¼‰ï¼Œä½†æ˜¯åœ¨ç¼–è¯‘æ—¶ä¸ä¼šå°†ä¾èµ–çš„å®žçŽ°æš´éœ²ç»™å…¶ä»–moduleï¼Œä¹Ÿå°±æ˜¯åªæœ‰åœ¨è¿è¡Œæ—¶å…¶ä»–moduleæ‰èƒ½è®¿é—®è¿™ä¸ªä¾èµ–ä¸­çš„å®žçŽ°ã€‚ä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå¯ä»¥æ˜¾è‘—æå‡æž„å»ºæ—¶é—´ï¼Œå› ä¸ºå®ƒå¯ä»¥å‡å°‘é‡æ–°ç¼–è¯‘çš„moduleçš„æ•°é‡ã€‚å»ºè®®ï¼Œå°½é‡ä½¿ç”¨è¿™ä¸ªä¾èµ–é…ç½®ã€‚ apiä¸Žcompileå¯¹åº”ï¼ŒåŠŸèƒ½å®Œå…¨ä¸€æ ·ï¼Œä¼šæ·»åŠ ä¾èµ–åˆ°ç¼–è¯‘è·¯å¾„ï¼Œå¹¶ä¸”ä¼šå°†ä¾èµ–æ‰“åŒ…åˆ°è¾“å‡ºï¼ˆaaræˆ–apkï¼‰ï¼Œä¸Žimplementationä¸åŒï¼Œè¿™ä¸ªä¾èµ–å¯ä»¥ä¼ é€’ï¼Œå…¶ä»–moduleæ— è®ºåœ¨ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶éƒ½å¯ä»¥è®¿é—®è¿™ä¸ªä¾èµ–çš„å®žçŽ°ï¼Œä¹Ÿå°±æ˜¯ä¼šæ³„æ¼ä¸€äº›ä¸åº”è¯¥ä¸ä½¿ç”¨çš„å®žçŽ°ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒAä¾èµ–Bï¼ŒBä¾èµ–Cï¼Œå¦‚æžœéƒ½æ˜¯ä½¿ç”¨apié…ç½®çš„è¯ï¼ŒAå¯ä»¥ç›´æŽ¥ä½¿ç”¨Cä¸­çš„ç±»ï¼ˆç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶ï¼‰ï¼Œè€Œå¦‚æžœæ˜¯ä½¿ç”¨implementationé…ç½®çš„è¯ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼ŒAæ˜¯æ— æ³•è®¿é—®Cä¸­çš„ç±»çš„ã€‚ compileOnlyä¸Žprovidedå¯¹åº”ï¼ŒGradleæŠŠä¾èµ–åŠ åˆ°ç¼–è¯‘è·¯å¾„ï¼Œç¼–è¯‘æ—¶ä½¿ç”¨ï¼Œä¸ä¼šæ‰“åŒ…åˆ°è¾“å‡ºï¼ˆaaræˆ–apkï¼‰ã€‚è¿™å¯ä»¥å‡å°‘è¾“å‡ºçš„ä½“ç§¯ï¼Œåœ¨åªåœ¨ç¼–è¯‘æ—¶éœ€è¦ï¼Œåœ¨è¿è¡Œæ—¶å¯é€‰çš„æƒ…å†µï¼Œå¾ˆæœ‰ç”¨ã€‚ runtimeOnlyä¸Žapkå¯¹åº”ï¼Œgradleæ·»åŠ ä¾èµ–åªæ‰“åŒ…åˆ°APKï¼Œè¿è¡Œæ—¶ä½¿ç”¨ï¼Œä½†ä¸ä¼šæ·»åŠ åˆ°ç¼–è¯‘è·¯å¾„ã€‚è¿™ä¸ªæ²¡æœ‰ä½¿ç”¨è¿‡ã€‚ annotationProcessorä¸Žcompileå¯¹åº”ï¼Œç”¨äºŽæ³¨è§£å¤„ç†å™¨çš„ä¾èµ–é…ç½®ï¼Œè¿™ä¸ªæ²¡ç”¨è¿‡ã€‚ æŸ¥çœ‹ä¾èµ–æ ‘å¯ä»¥æŸ¥çœ‹å•ä¸ªmoduleæˆ–è€…è¿™ä¸ªprojectçš„ä¾èµ–ï¼Œé€šè¿‡è¿è¡Œä¾èµ–çš„Gradleä»»åŠ¡ï¼Œå¦‚ä¸‹ï¼š 1ã€View -&gt; Tools Windows -&gt; Gradleï¼ˆæˆ–è€…ç‚¹å‡»å³ä¾§çš„Gradleæ ï¼‰ï¼› 2ã€å±•å¼€ AppName -&gt; Tasks -&gt; androidï¼Œç„¶åŽåŒå‡»è¿è¡ŒAndroidDependenciesã€‚è¿è¡Œå®Œï¼Œå°±ä¼šåœ¨Runçª—å£æ‰“å‡ºä¾èµ–æ ‘äº†ã€‚ ### ä¾èµ–å†²çªè§£å†³éšç€å¾ˆå¤šä¾èµ–åŠ å…¥åˆ°é¡¹ç›®ä¸­ï¼Œéš¾å…ä¼šå‡ºçŽ°ä¾èµ–å†²çªï¼Œå‡ºçŽ°ä¾èµ–å†²çªå¦‚ä½•è§£å†³ï¼Ÿ å®šä½å†²çª ä¾èµ–å†²çªå¯èƒ½ä¼šæŠ¥ç±»ä¼¼ä¸‹é¢çš„é”™è¯¯ï¼š 1Program type already present com.example.MyClass é€šè¿‡æŸ¥æ‰¾ç±»çš„æ–¹å¼ï¼ˆcommand + Oï¼‰å®šä½åˆ°å†²çªçš„ä¾èµ–ï¼Œè¿›è¡ŒæŽ’é™¤ã€‚ å¦‚ä½•æŽ’é™¤ä¾èµ– 1ã€dependenciesä¸­æŽ’é™¤ï¼ˆç»†ç²’åº¦ï¼‰ 1234compile('com.taobao.android:accs-huawei:1.1.2@aar') &#123; transitive = true exclude group: 'com.taobao.android', module: 'accs_sdk_taobao'&#125; 2ã€å…¨å±€é…ç½®æŽ’é™¤ 123456configurations &#123; compile.exclude module: 'cglib' //å…¨å±€æŽ’é™¤åŽŸæœ‰çš„tnet jaråŒ…ä¸ŽsoåŒ…åˆ†ç¦»çš„é…ç½®ï¼Œç»Ÿä¸€ä½¿ç”¨aaråŒ…ä¸­çš„å†…å®¹ all*.exclude group: 'com.taobao.android', module: 'tnet-jni' all*.exclude group: 'com.taobao.android', module: 'tnet-so'&#125; 3ã€ç¦ç”¨ä¾èµ–ä¼ é€’ 1234567compile('com.zhyea:ar4j:1.0') &#123; transitive = false&#125;configurations.all &#123; transitive = false&#125; è¿˜å¯ä»¥åœ¨å•ä¸ªä¾èµ–é¡¹ä¸­ä½¿ç”¨@jaræ ‡è¯†ç¬¦å¿½ç•¥ä¼ é€’ä¾èµ–ï¼š 1compile 'com.zhyea:ar4j:1.0@jar' 4ã€å¼ºåˆ¶ä½¿ç”¨æŸä¸ªç‰ˆæœ¬ å¦‚æžœæŸä¸ªä¾èµ–é¡¹æ˜¯å¿…éœ€çš„ï¼Œè€Œåˆå­˜åœ¨ä¾èµ–å†²çªæ—¶ï¼Œæ­¤æ—¶æ²¡å¿…è¦é€ä¸ªè¿›è¡ŒæŽ’é™¤ï¼Œå¯ä»¥ä½¿ç”¨forceå±žæ€§æ ‡è¯†éœ€è¦è¿›è¡Œä¾èµ–ç»Ÿä¸€ã€‚å½“ç„¶è¿™ä¹Ÿæ˜¯å¯ä»¥å…¨å±€é…ç½®çš„ï¼š 123456789compile('com.zhyea:ar4j:1.0') &#123; force = true&#125;configurations.all &#123; resolutionStrategy &#123; force 'org.hamcrest:hamcrest-core:1.3' &#125;&#125; 5ã€åœ¨æ‰“åŒ…æ—¶æŽ’é™¤ä¾èµ– å…ˆçœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š 1234567891011task zip(type: Zip) &#123; into('lib') &#123; from(configurations.runtime) &#123; exclude '*unwanted*', '*log*' &#125; &#125; into('') &#123; from jar from 'doc' &#125;&#125; ä»£ç è¡¨ç¤ºåœ¨æ‰“zipåŒ…çš„æ—¶å€™ä¼šè¿‡æ»¤æŽ‰åç§°ä¸­åŒ…å«â€œunwantedâ€å’Œâ€œlogâ€çš„jaråŒ…ã€‚è¿™é‡Œè°ƒç”¨çš„excludeæ–¹æ³•çš„å‚æ•°å’Œå‰é¢çš„ä¾‹å­ä¸å¤ªä¸€æ ·ï¼Œå‰é¢çš„å‚æ•°å¤šæ˜¯mapç»“æž„ï¼Œè¿™é‡Œåˆ™æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨æ‰“åŒ…æ—¶è°ƒç”¨includeæ–¹æ³•é€‰æ‹©åªæ‰“åŒ…æŸäº›éœ€è¦çš„ä¾èµ–é¡¹ï¼š 1234567891011task zip(type: Zip) &#123; into('lib') &#123; from(configurations.runtime) &#123; include '*ar4j*', '*spring*' &#125; &#125; into('') &#123; from jar from 'doc' &#125;&#125; ä¸»è¦æ˜¯ä½¿ç”¨dependenciesä¸­æŽ’é™¤å’Œå…¨å±€é…ç½®æŽ’é™¤ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¼˜åŒ–æ€»ç»“]]></title>
    <url>%2Fposts%2F51192665.html</url>
    <content type="text"><![CDATA[ç›®å½•ä»‹ç» 1.OOMå’Œå´©æºƒä¼˜åŒ– 1.1 OOMä¼˜åŒ– 1.2 ANRä¼˜åŒ– 1.3 Crashä¼˜åŒ– 2.å†…å­˜æ³„æ¼ä¼˜åŒ– 2.0 åŠ¨ç”»èµ„æºæœªé‡Šæ”¾ 2.1 é”™è¯¯ä½¿ç”¨å•åˆ© 2.2 é”™è¯¯ä½¿ç”¨é™æ€å˜é‡ 2.3 handlerå†…å­˜æ³„æ¼ 2.4 çº¿ç¨‹é€ æˆå†…å­˜æ³„æ¼ 2.5 éžé™æ€å†…éƒ¨ç±» 2.6 æœªç§»é™¤ç›‘å¬ 2.7 æŒæœ‰activityå¼•ç”¨ 2.8 èµ„æºæœªå…³é—­ 2.9 å…¶ä»–åŽŸå›  3.å¸ƒå±€ä¼˜åŒ– 3.1 includeä¼˜åŒ– 3.2 ViewStubä¼˜åŒ– 3.3 mergeä¼˜åŒ– 3.4 å…¶ä»–å»ºè®® 4.ä»£ç ä¼˜åŒ– 4.1 lintä»£ç æ£€æµ‹ 4.2 ä»£ç è§„èŒƒä¼˜åŒ– 4.3 Viewå¼‚å¸¸ä¼˜åŒ– 4.4 åŽ»é™¤æ·¡é»„è‰²è­¦å‘Šä¼˜åŒ– 4.5 åˆç†ä½¿ç”¨é›†åˆ 4.6 Activityä¸å¯è§ä¼˜åŒ– 4.7 èŠ‚åˆ¶çš„ä½¿ç”¨Service 5.ç½‘ç»œä¼˜åŒ– 5.1 å›¾ç‰‡åˆ†ç±» 5.2 èŽ·å–ç½‘ç»œæ•°æ®ä¼˜åŒ– 5.3 ç½‘ç»œè¯·æ±‚å¼‚å¸¸æ‹¦æˆªä¼˜åŒ– 6.çº¿ç¨‹ä¼˜åŒ– 6.1 ä½¿ç”¨çº¿ç¨‹æ±  7.å›¾ç‰‡ä¼˜åŒ– 7.1 bitmapä¼˜åŒ– 7.2 glideåŠ è½½ä¼˜åŒ– 8.åŠ è½½ä¼˜åŒ– 8.1 æ‡’åŠ è½½ä¼˜åŒ– 8.2 å¯åŠ¨é¡µä¼˜åŒ– 9.å…¶ä»–ä¼˜åŒ– 9.1 é™æ€å˜é‡ä¼˜åŒ– 9.2 æ³¨è§£æ›¿ä»£æžšä¸¾ 9.3 å¤šæ¸ é“æ‰“åŒ…ä¼˜åŒ– 9.4 TrimMemoryå’ŒLowMemoryä¼˜åŒ– 9.5 è½®è¯¢æ“ä½œä¼˜åŒ– 9.6 åŽ»é™¤é‡å¤ä¾èµ–åº“ä¼˜åŒ– 9.7 å››ç§å¼•ç”¨ä¼˜åŒ– 9.8 åŠ è½½loadingä¼˜åŒ– 9.9 å¯¹è±¡æ± Poolsä¼˜åŒ– 10.RecyclerViewä¼˜åŒ– 10.1 é¡µé¢ä¸ºä½•å¡é¡¿ 10.2 å…·ä½“ä¼˜åŒ–æ–¹æ¡ˆ 1.OOMå’Œå´©æºƒä¼˜åŒ–1.2 ANRä¼˜åŒ– ANRçš„äº§ç”Ÿéœ€è¦æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ ä¸»çº¿ç¨‹ï¼šåªæœ‰åº”ç”¨ç¨‹åºè¿›ç¨‹çš„ä¸»çº¿ç¨‹å“åº”è¶…æ—¶æ‰ä¼šäº§ç”ŸANRï¼› è¶…æ—¶æ—¶é—´ï¼šäº§ç”ŸANRçš„ä¸Šä¸‹æ–‡ä¸åŒï¼Œè¶…æ—¶æ—¶é—´ä¹Ÿä¼šä¸åŒï¼Œä½†åªè¦åœ¨è¿™ä¸ªæ—¶é—´ä¸Šé™å†…æ²¡æœ‰å“åº”å°±ä¼šANRï¼› è¾“å…¥äº‹ä»¶/ç‰¹å®šæ“ä½œï¼šè¾“å…¥äº‹ä»¶æ˜¯æŒ‡æŒ‰é”®ã€è§¦å±ç­‰è®¾å¤‡è¾“å…¥äº‹ä»¶ï¼Œç‰¹å®šæ“ä½œæ˜¯æŒ‡BroadcastReceiverå’ŒServiceçš„ç”Ÿå‘½å‘¨æœŸä¸­çš„å„ä¸ªå‡½æ•°ï¼Œäº§ç”ŸANRçš„ä¸Šä¸‹æ–‡ä¸åŒï¼Œå¯¼è‡´ANRçš„åŽŸå› ä¹Ÿä¼šä¸åŒï¼› ANRä¼˜åŒ–å…·ä½“æŽªæ–½ å°†æ‰€æœ‰è€—æ—¶æ“ä½œï¼Œæ¯”å¦‚è®¿é—®ç½‘ç»œï¼ŒSocketé€šä¿¡ï¼ŒæŸ¥è¯¢å¤§é‡SQL è¯­å¥ï¼Œå¤æ‚é€»è¾‘è®¡ç®—ç­‰éƒ½æ”¾åœ¨å­çº¿ç¨‹ä¸­åŽ»ï¼Œç„¶ åŽé€šè¿‡handler.sendMessageã€runonUIThreadã€AsyncTask ç­‰æ–¹å¼æ›´æ–°UIã€‚æ— è®ºå¦‚ä½•éƒ½è¦ç¡®ä¿ç”¨æˆ·ç•Œé¢ä½œçš„æµç•… åº¦ã€‚å¦‚æžœè€—æ—¶æ“ä½œéœ€è¦è®©ç”¨æˆ·ç­‰å¾…ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºåº¦æ¡ã€‚ ä½¿ç”¨AsyncTaskå¤„ç†è€—æ—¶IOæ“ä½œã€‚åœ¨ä¸€äº›åŒæ­¥çš„æ“ä½œä¸»çº¿ç¨‹æœ‰å¯èƒ½è¢«é”ï¼Œéœ€è¦ç­‰å¾…å…¶ä»–çº¿ç¨‹é‡Šæ”¾ç›¸åº”é”æ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·ä¼šæœ‰ä¸€å®šçš„ANRé£Žé™©ï¼Œå¯¹äºŽè¿™ç§æƒ…å†µæœ‰æ—¶ä¹Ÿå¯ä»¥ç”¨å¼‚æ­¥çº¿ç¨‹æ¥æ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚å¦å¤–ï¼Œè¦é¿å…æ­»é”çš„å‘ç”Ÿã€‚ ä½¿ç”¨Handlerå¤„ç†å·¥ä½œçº¿ç¨‹ç»“æžœï¼Œè€Œä¸æ˜¯ä½¿ç”¨Thread.wait()æˆ–è€…Thread.sleep()æ¥é˜»å¡žä¸»çº¿ç¨‹ã€‚ Activityçš„onCreateå’ŒonResumeå›žè°ƒä¸­å°½é‡é¿å…è€—æ—¶çš„ä»£ç  BroadcastReceiverä¸­onReceiveä»£ç ä¹Ÿè¦å°½é‡å‡å°‘è€—æ—¶ï¼Œå»ºè®®ä½¿ç”¨IntentServiceå¤„ç†ã€‚ å„ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°éƒ½ä¸åº”è¯¥æœ‰å¤ªè€—æ—¶çš„æ“ä½œï¼Œå³ä½¿å¯¹äºŽåŽå°Serviceæˆ–è€…ContentProvideræ¥è®²ï¼Œåº”ç”¨åœ¨åŽå°è¿è¡Œæ—¶å€™å…¶onCreate()æ—¶å€™ä¸ä¼šæœ‰ç”¨æˆ·è¾“å…¥å¼•èµ·äº‹ä»¶æ— å“åº”ANRï¼Œä½†å…¶æ‰§è¡Œæ—¶é—´è¿‡é•¿ä¹Ÿä¼šå¼•èµ·Serviceçš„ANRå’ŒContentProviderçš„ANR 2.å†…å­˜æ³„æ¼ä¼˜åŒ– å†…å­˜æ£€æµ‹ç¬¬ä¸€ç§ï¼šä»£ç æ–¹å¼èŽ·å–å†…å­˜ 123456789101112131415/** * å†…å­˜ä½¿ç”¨æ£€æµ‹ï¼šå¯ä»¥è°ƒç”¨ç³»ç»Ÿçš„getMemoryInfo()æ¥èŽ·å–å½“å‰å†…å­˜çš„ä½¿ç”¨æƒ…å†µ */private void initMemoryInfo() &#123; ActivityManager activityManager = (ActivityManager) Utils.getApp() .getSystemService(Context.ACTIVITY_SERVICE); ActivityManager.MemoryInfo memoryInfo = new ActivityManager.MemoryInfo(); if (activityManager != null) &#123; activityManager.getMemoryInfo(memoryInfo); LogUtils.d("totalMem=" + memoryInfo.totalMem + ",availMem=" + memoryInfo.availMem); if (!memoryInfo.lowMemory) &#123; // è¿è¡Œåœ¨ä½Žå†…å­˜çŽ¯å¢ƒ &#125; &#125;&#125; å†…å­˜æ£€æµ‹ç¬¬äºŒç§ï¼šleakcanaryå·¥å…· LeakCanaryçš„åŽŸç†æ˜¯ç›‘æŽ§æ¯ä¸ªactivityï¼Œåœ¨activity ondestoryåŽï¼Œåœ¨åŽå°çº¿ç¨‹æ£€æµ‹å¼•ç”¨ï¼Œç„¶åŽè¿‡ä¸€æ®µæ—¶é—´è¿›è¡Œgcï¼ŒgcåŽå¦‚æžœå¼•ç”¨è¿˜åœ¨ï¼Œé‚£ä¹ˆdumpå‡ºå†…å­˜å †æ ˆï¼Œå¹¶è§£æžè¿›è¡Œå¯è§†åŒ–æ˜¾ç¤ºã€‚ 2.0 åŠ¨ç”»èµ„æºæœªé‡Šæ”¾ é—®é¢˜ä»£ç  123456789101112public class LeakActivity extends AppCompatActivity &#123; private TextView textView; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_leak); textView = (TextView)findViewById(R.id.text_view); ObjectAnimator objectAnimator = ObjectAnimator.ofFloat(textView,"rotation",0,360); objectAnimator.setRepeatCount(ValueAnimator.INFINITE); objectAnimator.start(); &#125;&#125; è§£å†³åŠžæ³• åœ¨å±žæ€§åŠ¨ç”»ä¸­æœ‰ä¸€ç±»æ— é™å¾ªçŽ¯åŠ¨ç”»ï¼Œå¦‚æžœåœ¨Activityä¸­æ’­æ”¾è¿™ç±»åŠ¨ç”»å¹¶ä¸”åœ¨onDestroyä¸­åŽ»åœæ­¢åŠ¨ç”»ï¼Œé‚£ä¹ˆè¿™ä¸ªåŠ¨ç”»å°†ä¼šä¸€ç›´æ’­æ”¾ä¸‹åŽ»ï¼Œè¿™æ—¶å€™Activityä¼šè¢«Viewæ‰€æŒæœ‰ï¼Œä»Žè€Œå¯¼è‡´Activityæ— æ³•è¢«é‡Šæ”¾ã€‚è§£å†³æ­¤ç±»é—®é¢˜åˆ™æ˜¯éœ€è¦æ—©Activityä¸­onDestroyåŽ»åŽ»è°ƒç”¨objectAnimator.cancel()æ¥åœæ­¢åŠ¨ç”»ã€‚ 12345@Overrideprotected void onDestroy() &#123; super.onDestroy(); mAnimator.cancel();&#125; 2.1 é”™è¯¯ä½¿ç”¨å•åˆ© åœ¨å¼€å‘ä¸­å•ä¾‹ç»å¸¸éœ€è¦æŒæœ‰Contextå¯¹è±¡ï¼Œå¦‚æžœæŒæœ‰çš„Contextå¯¹è±¡ç”Ÿå‘½å‘¨æœŸä¸Žå•ä¾‹ç”Ÿå‘½å‘¨æœŸæ›´çŸ­æ—¶ï¼Œæˆ–å¯¼è‡´Contextæ— æ³•è¢«é‡Šæ”¾å›žæ”¶ï¼Œåˆ™æœ‰å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ã€‚æ¯”å¦‚ï¼šåœ¨ä¸€ä¸ªActivityä¸­è°ƒç”¨çš„ï¼Œç„¶åŽå…³é—­è¯¥Activityåˆ™ä¼šå‡ºçŽ°å†…å­˜æ³„æ¼ã€‚ è§£å†³åŠžæ³•ï¼š è¦ä¿è¯Contextå’ŒAppLicationçš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·ï¼Œä¿®æ”¹åŽä»£ç å¦‚ä¸‹ï¼š this.mContext = context.getApplicationContext(); 1ã€å¦‚æžœæ­¤æ—¶ä¼ å…¥çš„æ˜¯ Application çš„ Contextï¼Œå› ä¸º Application çš„ç”Ÿå‘½å‘¨æœŸå°±æ˜¯æ•´ä¸ªåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥è¿™å°†æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ 2ã€å¦‚æžœæ­¤æ—¶ä¼ å…¥çš„æ˜¯ Activity çš„ Contextï¼Œå½“è¿™ä¸ª Context æ‰€å¯¹åº”çš„ Activity é€€å‡ºæ—¶ï¼Œç”±äºŽè¯¥ Context çš„å¼•ç”¨è¢«å•ä¾‹å¯¹è±¡æ‰€æŒæœ‰ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸç­‰äºŽæ•´ä¸ªåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥å½“å‰ Activity é€€å‡ºæ—¶å®ƒçš„å†…å­˜å¹¶ä¸ä¼šè¢«å›žæ”¶ï¼Œè¿™å°±é€ æˆæ³„æ¼äº†ã€‚ 2.2 é”™è¯¯ä½¿ç”¨é™æ€å˜é‡ ä½¿ç”¨é™æ€æ–¹æ³•æ˜¯ååˆ†æ–¹ä¾¿çš„ã€‚ä½†æ˜¯åˆ›å»ºçš„å¯¹è±¡ï¼Œå»ºè®®ä¸è¦å…¨å±€åŒ–ï¼Œå…¨å±€åŒ–çš„å˜é‡å¿…é¡»åŠ ä¸Šstaticã€‚å…¨å±€åŒ–åŽçš„å˜é‡æˆ–è€…å¯¹è±¡ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼ åŽŸå› åˆ†æž è¿™é‡Œå†…éƒ¨ç±»AClasséšå¼çš„æŒæœ‰å¤–éƒ¨ç±»Activityçš„å¼•ç”¨ï¼Œè€Œåœ¨Activityçš„onCreateæ–¹æ³•ä¸­è°ƒç”¨äº†ã€‚è¿™æ ·AClasså°±ä¼šåœ¨Activityåˆ›å»ºçš„æ—¶å€™æ˜¯æœ‰äº†ä»–çš„å¼•ç”¨ï¼Œè€ŒAClassæ˜¯é™æ€ç±»åž‹çš„ä¸ä¼šè¢«åžƒåœ¾å›žæ”¶ï¼ŒActivityåœ¨æ‰§è¡ŒonDestoryæ–¹æ³•çš„æ—¶å€™ç”±äºŽè¢«AClassæŒæœ‰äº†å¼•ç”¨è€Œæ— æ³•è¢«å›žæ”¶ï¼Œæ‰€ä»¥è¿™æ ·Activityå°±æ€»æ˜¯è¢«AClassæŒæœ‰è€Œæ— æ³•å›žæ”¶é€ æˆå†…å­˜æ³„éœ²ã€‚ 2.3 handlerå†…å­˜æ³„æ¼ é€ æˆå†…å­˜æ³„æ¼åŽŸå› åˆ†æž é€šè¿‡å†…éƒ¨ç±»çš„æ–¹å¼åˆ›å»ºmHandlerå¯¹è±¡,æ­¤æ—¶mHandlerä¼šéšå¼åœ°æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»å¯¹è±¡å¼•ç”¨è¿™é‡Œå°±æ˜¯MainActivityï¼Œå½“æ‰§è¡ŒpostDelayedæ–¹æ³•æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šå°†ä½ çš„Handlerè£…å…¥ä¸€ä¸ªMessageï¼Œå¹¶æŠŠè¿™æ¡MessageæŽ¨åˆ°MessageQueueä¸­ï¼ŒMessageQueueæ˜¯åœ¨ä¸€ä¸ªLooperçº¿ç¨‹ä¸­ä¸æ–­è½®è¯¢å¤„ç†æ¶ˆæ¯ï¼Œé‚£ä¹ˆå½“è¿™ä¸ªActivityé€€å‡ºæ—¶æ¶ˆæ¯é˜Ÿåˆ—ä¸­è¿˜æœ‰æœªå¤„ç†çš„æ¶ˆæ¯æˆ–è€…æ­£åœ¨å¤„ç†æ¶ˆæ¯ï¼Œè€Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„MessageæŒæœ‰mHandlerå®žä¾‹çš„å¼•ç”¨ï¼ŒmHandleråˆæŒæœ‰Activityçš„å¼•ç”¨ï¼Œæ‰€ä»¥å¯¼è‡´è¯¥Activityçš„å†…å­˜èµ„æºæ— æ³•åŠæ—¶å›žæ”¶ï¼Œå¼•å‘å†…å­˜æ³„æ¼ã€‚ è§£å†³Handlerå†…å­˜æ³„éœ²ä¸»è¦2ç‚¹ æœ‰å»¶æ—¶æ¶ˆæ¯ï¼Œè¦åœ¨Activityé”€æ¯çš„æ—¶å€™ç§»é™¤Messagesç›‘å¬ åŒ¿åå†…éƒ¨ç±»å¯¼è‡´çš„æ³„éœ²æ”¹ä¸ºåŒ¿åé™æ€å†…éƒ¨ç±»ï¼Œå¹¶ä¸”å¯¹ä¸Šä¸‹æ–‡æˆ–è€…Activityä½¿ç”¨å¼±å¼•ç”¨ã€‚ 2.4 çº¿ç¨‹é€ æˆå†…å­˜æ³„æ¼ æ—©æ—¶æœŸçš„æ—¶å€™å¤„ç†è€—æ—¶æ“ä½œå¤šæ•°éƒ½æ˜¯é‡‡ç”¨Thread+Handlerçš„æ–¹å¼ï¼ŒåŽæ¥é€æ­¥è¢«AsyncTaskå–ä»£ï¼Œç›´åˆ°çŽ°åœ¨é‡‡ç”¨RxJavaçš„æ–¹å¼æ¥å¤„ç†å¼‚æ­¥ã€‚ é€ æˆå†…å­˜æ³„æ¼åŽŸå› åˆ†æž åœ¨å¤„ç†ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ—¶ï¼Œå¯èƒ½è¿˜æ²¡å¤„ç†ç»“æŸMainActivityå°±æ‰§è¡Œäº†é€€å‡ºæ“ä½œï¼Œä½†æ˜¯æ­¤æ—¶AsyncTaskä¾ç„¶æŒæœ‰å¯¹MainActivityçš„å¼•ç”¨å°±ä¼šå¯¼è‡´MainActivityæ— æ³•é‡Šæ”¾å›žæ”¶å¼•å‘å†…å­˜æ³„æ¼ã€‚ è§£å†³åŠžæ³• åœ¨ä½¿ç”¨AsyncTaskæ—¶ï¼Œåœ¨Activityé”€æ¯æ—¶å€™ä¹Ÿåº”è¯¥å–æ¶ˆç›¸åº”çš„ä»»åŠ¡AsyncTask.cancel()æ–¹æ³•ï¼Œé¿å…ä»»åŠ¡åœ¨åŽå°æ‰§è¡Œæµªè´¹èµ„æºï¼Œè¿›è€Œé¿å…å†…å­˜æ³„æ¼çš„å‘ç”Ÿã€‚ 2.5 éžé™æ€å†…éƒ¨ç±» éžé™æ€å†…éƒ¨ç±»åˆ›å»ºé™æ€å®žä¾‹é€ æˆçš„å†…å­˜æ³„æ¼ã€‚æœ‰çš„æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¼šåœ¨å¯åŠ¨é¢‘ç¹çš„Activityä¸­ï¼Œä¸ºäº†é¿å…é‡å¤åˆ›å»ºç›¸åŒçš„æ•°æ®èµ„æºï¼Œå¯èƒ½ä¼šå‡ºçŽ°è¿™ç§å†™æ³•ã€‚ é—®é¢˜ä»£ç  12345678910111213private static TestResource mResource = null;@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); if(mResource == null)&#123; mResource = new TestResource(); &#125;&#125;class TestResource &#123; //é‡Œé¢ä»£ç å¼•ç”¨ä¸Šä¸‹æ–‡ï¼ŒActivity.thisä¼šå¯¼è‡´å†…å­˜æ³„æ¼&#125; è§£å†³åŠžæ³• å°†è¯¥å†…éƒ¨ç±»è®¾ä¸ºé™æ€å†…éƒ¨ç±»æˆ–å°†è¯¥å†…éƒ¨ç±»æŠ½å–å‡ºæ¥å°è£…æˆä¸€ä¸ªå•ä¾‹ï¼Œå¦‚æžœéœ€è¦ä½¿ç”¨Contextï¼Œè¯·æŒ‰ç…§ä¸Šé¢æŽ¨èçš„ä½¿ç”¨Application çš„ Contextã€‚ åˆ†æžé—®é¢˜ è¿™æ ·å°±åœ¨Activityå†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªéžé™æ€å†…éƒ¨ç±»çš„å•ä¾‹ï¼Œæ¯æ¬¡å¯åŠ¨Activityæ—¶éƒ½ä¼šä½¿ç”¨è¯¥å•ä¾‹çš„æ•°æ®ï¼Œè¿™æ ·è™½ç„¶é¿å…äº†èµ„æºçš„é‡å¤åˆ›å»ºï¼Œä¸è¿‡è¿™ç§å†™æ³•å´ä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Œå› ä¸ºéžé™æ€å†…éƒ¨ç±»é»˜è®¤ä¼šæŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œè€Œè¯¥éžé™æ€å†…éƒ¨ç±»åˆåˆ›å»ºäº†ä¸€ä¸ªé™æ€çš„å®žä¾‹ï¼Œè¯¥å®žä¾‹çš„ç”Ÿå‘½å‘¨æœŸå’Œåº”ç”¨çš„ä¸€æ ·é•¿ï¼Œè¿™å°±å¯¼è‡´äº†è¯¥é™æ€å®žä¾‹ä¸€ç›´ä¼šæŒæœ‰è¯¥Activityçš„å¼•ç”¨ï¼Œå¯¼è‡´Activityçš„å†…å­˜èµ„æºä¸èƒ½æ­£å¸¸å›žæ”¶ã€‚ 2.6 æœªç§»é™¤ç›‘å¬ é—®é¢˜ä»£ç  1234567//addç›‘å¬ï¼Œæ”¾åˆ°é›†åˆé‡Œé¢tv.getViewTreeObserver().addOnWindowFocusChangeListener(new ViewTreeObserver.OnWindowFocusChangeListener() &#123; @Override public void onWindowFocusChanged(boolean b) &#123; //ç›‘å¬viewçš„åŠ è½½ï¼ŒviewåŠ è½½å‡ºæ¥çš„æ—¶å€™ï¼Œè®¡ç®—ä»–çš„å®½é«˜ç­‰ã€‚ &#125;&#125;); è§£å†³åŠžæ³• 12//è®¡ç®—å®ŒåŽï¼Œä¸€å®šè¦ç§»é™¤è¿™ä¸ªç›‘å¬tv.getViewTreeObserver().removeOnWindowFocusChangeListener(this); æ³¨æ„äº‹é¡¹ï¼š 12tv.setOnClickListener();//ç›‘å¬æ‰§è¡Œå®Œå›žæ”¶å¯¹è±¡ï¼Œä¸ç”¨è€ƒè™‘å†…å­˜æ³„æ¼tv.getViewTreeObserver().addOnWindowFocusChangeListene,addç›‘å¬ï¼Œæ”¾åˆ°é›†åˆé‡Œé¢ï¼Œéœ€è¦è€ƒè™‘å†…å­˜æ³„æ¼ 2.7 æŒæœ‰activityå¼•ç”¨2.8 èµ„æºæœªå…³é—­ åœ¨ä½¿ç”¨IOã€Fileæµæˆ–è€…Sqliteã€Cursorç­‰èµ„æºæ—¶è¦åŠæ—¶å…³é—­ã€‚è¿™äº›èµ„æºåœ¨è¿›è¡Œè¯»å†™æ“ä½œæ—¶é€šå¸¸éƒ½ä½¿ç”¨äº†ç¼“å†²ï¼Œå¦‚æžœåŠæ—¶ä¸å…³é—­ï¼Œè¿™äº›ç¼“å†²å¯¹è±¡å°±ä¼šä¸€ç›´è¢«å ç”¨è€Œå¾—ä¸åˆ°é‡Šæ”¾ï¼Œä»¥è‡´å‘ç”Ÿå†…å­˜æ³„éœ²ã€‚å› æ­¤æˆ‘ä»¬åœ¨ä¸éœ€è¦ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™å°±åŠæ—¶å…³é—­ï¼Œä»¥ä¾¿ç¼“å†²èƒ½åŠæ—¶å¾—åˆ°é‡Šæ”¾ï¼Œä»Žè€Œé¿å…å†…å­˜æ³„éœ²ã€‚ BroadcastReceiverï¼ŒContentObserverï¼ŒFileObserverï¼ŒCursorï¼ŒCallbackç­‰åœ¨ Activity onDestroy æˆ–è€…æŸç±»ç”Ÿå‘½å‘¨æœŸç»“æŸä¹‹åŽä¸€å®šè¦ unregister æˆ–è€… close æŽ‰ï¼Œå¦åˆ™è¿™ä¸ª Activity ç±»ä¼šè¢« system å¼ºå¼•ç”¨ï¼Œä¸ä¼šè¢«å†…å­˜å›žæ”¶ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå…³é—­çš„è¯­å¥å¿…é¡»åœ¨finallyä¸­è¿›è¡Œå…³é—­ï¼Œå¦åˆ™æœ‰å¯èƒ½å› ä¸ºå¼‚å¸¸æœªå…³é—­èµ„æºï¼Œè‡´ä½¿activityæ³„æ¼ã€‚ 2.9 å…¶ä»–åŽŸå›  é™æ€é›†åˆä½¿ç”¨ä¸å½“å¯¼è‡´çš„å†…å­˜æ³„æ¼ æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æŠŠä¸€äº›å¯¹è±¡åŠ å…¥åˆ°é›†åˆå®¹å™¨ï¼ˆä¾‹å¦‚ArrayListï¼‰ä¸­ï¼Œå½“ä¸å†éœ€è¦å½“ä¸­æŸäº›å¯¹è±¡æ—¶ï¼Œå¦‚æžœä¸æŠŠè¯¥å¯¹è±¡çš„å¼•ç”¨ä»Žé›†åˆä¸­æ¸…ç†æŽ‰ï¼Œä¹Ÿä¼šä½¿å¾—GCæ— æ³•å›žæ”¶è¯¥å¯¹è±¡ã€‚å¦‚æžœé›†åˆæ˜¯staticç±»åž‹çš„è¯ï¼Œé‚£å†…å­˜æ³„æ¼æƒ…å†µå°±ä¼šæ›´ä¸ºä¸¥é‡ã€‚å› æ­¤ï¼Œå½“ä¸å†éœ€è¦æŸå¯¹è±¡æ—¶ï¼Œéœ€è¦ä¸»åŠ¨å°†ä¹‹ä»Žé›†åˆä¸­ç§»é™¤ã€‚ ä¸éœ€è¦ç”¨çš„ç›‘å¬æœªç§»é™¤ä¼šå‘ç”Ÿå†…å­˜æ³„éœ² é—®é¢˜ä»£ç  1234567//addç›‘å¬ï¼Œæ”¾åˆ°é›†åˆé‡Œé¢tv.getViewTreeObserver().addOnWindowFocusChangeListener(new ViewTreeObserver.OnWindowFocusChangeListener() &#123; @Override public void onWindowFocusChanged(boolean b) &#123; //ç›‘å¬viewçš„åŠ è½½ï¼ŒviewåŠ è½½å‡ºæ¥çš„æ—¶å€™ï¼Œè®¡ç®—ä»–çš„å®½é«˜ç­‰ã€‚ &#125;&#125;); è§£å†³åŠžæ³• 12//è®¡ç®—å®ŒåŽï¼Œä¸€å®šè¦ç§»é™¤è¿™ä¸ªç›‘å¬tv.getViewTreeObserver().removeOnWindowFocusChangeListener(this); æ³¨æ„äº‹é¡¹ï¼š 123tv.setOnClickListener();//ç›‘å¬æ‰§è¡Œå®Œå›žæ”¶å¯¹è±¡ï¼Œä¸ç”¨è€ƒè™‘å†…å­˜æ³„æ¼ tv.getViewTreeObserver().addOnWindowFocusChangeListene,addç›‘å¬ï¼Œæ”¾åˆ°é›†åˆé‡Œé¢ï¼Œéœ€è¦è€ƒè™‘å†…å­˜æ³„æ¼ å¤åˆ¶ä»£ç  3.å¸ƒå±€ä¼˜åŒ–3.1 includeä¼˜åŒ– é‡ç”¨å¸ƒå±€æ–‡ä»¶ æ ‡ç­¾å¯ä»¥å…è®¸åœ¨ä¸€ä¸ªå¸ƒå±€å½“ä¸­å¼•å…¥å¦ä¸€ä¸ªå¸ƒå±€ï¼Œé‚£ä¹ˆæ¯”å¦‚è¯´æˆ‘ä»¬ç¨‹åºçš„æ‰€æœ‰ç•Œé¢éƒ½æœ‰ä¸€ä¸ªå…¬å…±çš„éƒ¨åˆ†ï¼Œè¿™ä¸ªæ—¶å€™æœ€å¥½çš„åšæ³•å°±æ˜¯å°†è¿™ä¸ªå…¬å…±çš„éƒ¨åˆ†æå–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å¸ƒå±€ä¸­ï¼Œç„¶åŽæ¯ä¸ªç•Œé¢çš„å¸ƒå±€æ–‡ä»¶å½“ä¸­æ¥å¼•ç”¨è¿™ä¸ªå…¬å…±çš„å¸ƒå±€ã€‚ å¦‚æžœæˆ‘ä»¬è¦åœ¨æ ‡ç­¾ä¸­è¦†å†™layoutå±žæ€§ï¼Œå¿…é¡»è¦å°†layout_widthå’Œlayout_heightè¿™ä¸¤ä¸ªå±žæ€§ä¹Ÿè¿›è¡Œè¦†å†™ï¼Œå¦åˆ™è¦†å†™æ•ˆæžœå°†ä¸ä¼šç”Ÿæ•ˆã€‚ æ ‡ç­¾æ˜¯ä½œä¸ºæ ‡ç­¾çš„ä¸€ç§è¾…åŠ©æ‰©å±•æ¥ä½¿ç”¨çš„ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºäº†é˜²æ­¢åœ¨å¼•ç”¨å¸ƒå±€æ–‡ä»¶æ—¶å¼•ç”¨æ–‡ä»¶æ—¶äº§ç”Ÿå¤šä½™çš„å¸ƒå±€åµŒå¥—ã€‚å¸ƒå±€åµŒå¥—è¶Šå¤šï¼Œè§£æžèµ·æ¥å°±è¶Šè€—æ—¶ï¼Œæ€§èƒ½å°±è¶Šå·®ã€‚å› æ­¤ç¼–å†™å¸ƒå±€æ–‡ä»¶æ—¶åº”è¯¥è®©åµŒå¥—çš„å±‚æ•°è¶Šå°‘è¶Šå¥½ã€‚ ä¸¾ä¾‹ï¼šæ¯”å¦‚åœ¨LinearLayouté‡Œè¾¹ä½¿ç”¨ä¸€ä¸ªå¸ƒå±€ã€‚é‡Œè¾¹åˆæœ‰ä¸€ä¸ªLinearLayoutï¼Œé‚£ä¹ˆå…¶å®žå°±å­˜åœ¨äº†å¤šä½™çš„å¸ƒå±€åµŒå¥—ï¼Œä½¿ç”¨mergeå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 3.2 ViewStubä¼˜åŒ– ä»…åœ¨éœ€è¦æ—¶æ‰åŠ è½½å¸ƒå±€[ViewStub] æŸä¸ªå¸ƒå±€å½“ä¸­çš„å…ƒç´ ä¸æ˜¯ä¸€èµ·æ˜¾ç¤ºå‡ºæ¥çš„ï¼Œæ™®é€šæƒ…å†µä¸‹åªæ˜¾ç¤ºéƒ¨åˆ†å¸¸ç”¨çš„å…ƒç´ ï¼Œè€Œé‚£äº›ä¸å¸¸ç”¨çš„å…ƒç´ åªæœ‰åœ¨ç”¨æˆ·è¿›è¡Œç‰¹å®šæ“ä½œæ—¶æ‰ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚ ä¸¾ä¾‹ï¼šå¡«ä¿¡æ¯æ—¶ä¸æ˜¯éœ€è¦å…¨éƒ¨å¡«çš„ï¼Œæœ‰ä¸€ä¸ªæ·»åŠ æ›´å¤šå­—æ®µçš„é€‰é¡¹ï¼Œå½“ç”¨æˆ·éœ€è¦æ·»åŠ å…¶ä»–ä¿¡æ¯çš„æ—¶å€™ï¼Œæ‰å°†å¦å¤–çš„å…ƒç´ æ˜¾ç¤ºåˆ°ç•Œé¢ä¸Šã€‚ç”¨VISIBLEæ€§èƒ½è¡¨çŽ°ä¸€èˆ¬ï¼Œå¯ä»¥ç”¨ViewStubã€‚ ViewStubä¹Ÿæ˜¯Viewçš„ä¸€ç§ï¼Œä½†æ˜¯æ²¡æœ‰å¤§å°ï¼Œæ²¡æœ‰ç»˜åˆ¶åŠŸèƒ½ï¼Œä¹Ÿä¸å‚ä¸Žå¸ƒå±€ï¼Œèµ„æºæ¶ˆè€—éžå¸¸ä½Žï¼Œå¯ä»¥è®¤ä¸ºå®Œå…¨ä¸å½±å“æ€§èƒ½ã€‚ ViewStubæ‰€åŠ è½½çš„å¸ƒå±€æ˜¯ä¸å¯ä»¥ä½¿ç”¨æ ‡ç­¾çš„ï¼Œå› æ­¤è¿™æœ‰å¯èƒ½å¯¼è‡´åŠ è½½å‡ºæ¥å‡ºæ¥çš„å¸ƒå±€å­˜åœ¨ç€å¤šä½™çš„åµŒå¥—ç»“æž„ã€‚ è‡ªå®šä¹‰å…¨å±€çš„çŠ¶æ€ç®¡ç†å™¨ã€å……åˆ†ä½¿ç”¨ViewStubã€‘ é’ˆå¯¹å¤šçŠ¶æ€ï¼Œæœ‰æ•°æ®ï¼Œç©ºæ•°æ®ï¼ŒåŠ è½½å¤±è´¥ï¼ŒåŠ è½½å¼‚å¸¸ï¼Œç½‘ç»œå¼‚å¸¸ç­‰ã€‚é’ˆå¯¹ç©ºæ•°æ®ï¼ŒåŠ è½½å¤±è´¥ï¼Œå¼‚å¸¸ä½¿ç”¨viewStubå¸ƒå±€ï¼Œä¸€é”®è®¾ç½®è‡ªå®šä¹‰å¸ƒå±€ï¼Œä¹Ÿæ˜¯ä¼˜åŒ–çš„ä¸€ç§ã€‚ é¡¹ç›®åœ°å€ï¼š 3.3 mergeä¼˜åŒ– è§†å›¾å±‚çº§ è¿™ä¸ªæ ‡ç­¾åœ¨UIçš„ç»“æž„ä¼˜åŒ–ä¸­èµ·ç€éžå¸¸é‡è¦çš„ä½œç”¨ï¼Œå®ƒå¯ä»¥åˆ å‡å¤šä½™çš„å±‚çº§ï¼Œä¼˜åŒ–UIã€‚ä½†æ˜¯å°±æœ‰ä¸€ç‚¹ä¸å¥½ï¼Œæ— æ³•é¢„è§ˆå¸ƒå±€æ•ˆæžœï¼ 3.4 å…¶ä»–å»ºè®® å‡å°‘å¤ªå¤šé‡å çš„èƒŒæ™¯(overdraw) è¿™ä¸ªé—®é¢˜å…¶å®žæœ€å®¹æ˜“è§£å†³ï¼Œå»ºè®®å°±æ˜¯æ£€æŸ¥ä½ åœ¨å¸ƒå±€å’Œä»£ç ä¸­è®¾ç½®çš„èƒŒæ™¯ï¼Œæœ‰äº›èƒŒæ™¯æ˜¯éšè—åœ¨åº•ä¸‹çš„ï¼Œå®ƒæ°¸è¿œä¸å¯èƒ½æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™ç§æ²¡å¿…è¦çš„èƒŒæ™¯ä¸€å®šè¦ç§»é™¤ï¼Œå› ä¸ºå®ƒå¾ˆå¯èƒ½ä¼šä¸¥é‡å½±å“åˆ°appçš„æ€§èƒ½ã€‚å¦‚æžœé‡‡ç”¨çš„æ˜¯selectorçš„èƒŒæ™¯ï¼Œå°†normalçŠ¶æ€çš„colorè®¾ç½®ä¸ºâ€@android:color/transparentâ€,ä¹ŸåŒæ ·å¯ä»¥è§£å†³é—®é¢˜ã€‚ é¿å…å¤æ‚çš„Layoutå±‚çº§ è¿™é‡Œçš„å»ºè®®æ¯”è¾ƒå¤šä¸€äº›ï¼Œé¦–å…ˆæŽ¨èä½¿ç”¨Androidæä¾›çš„å¸ƒå±€å·¥å…·Hierarchy Vieweræ¥æ£€æŸ¥å’Œä¼˜åŒ–å¸ƒå±€ã€‚ç¬¬ä¸€ä¸ªå»ºè®®æ˜¯ï¼šå¦‚æžœåµŒå¥—çš„çº¿æ€§å¸ƒå±€åŠ æ·±äº†å¸ƒå±€å±‚æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å¯¹å¸ƒå±€æ¥å–ä»£ã€‚ç¬¬äºŒä¸ªå»ºè®®æ˜¯ï¼šç”¨æ ‡ç­¾æ¥åˆå¹¶å¸ƒå±€ã€‚ç¬¬ä¸‰ä¸ªå»ºè®®æ˜¯ï¼šç”¨æ ‡ç­¾æ¥é‡ç”¨å¸ƒå±€ï¼ŒæŠ½å–é€šç”¨çš„å¸ƒå±€å¯ä»¥è®©å¸ƒå±€çš„é€»è¾‘æ›´æ¸…æ™°æ˜Žäº†ã€‚è®°ä½ï¼Œè¿™äº›å»ºè®®çš„æœ€ç»ˆç›®çš„éƒ½æ˜¯ä½¿å¾—ä½ çš„Layoutåœ¨Hierarchy Vieweré‡Œå˜å¾—å®½è€Œæµ…ï¼Œè€Œä¸æ˜¯çª„è€Œæ·±ã€‚ æ€»ç»“ï¼šå¯ä»¥è€ƒè™‘å¤šä½¿ç”¨mergeå’Œincludeï¼ŒViewStubã€‚å°½é‡ä½¿å¸ƒå±€æµ…å¹³ï¼Œæ ¹å¸ƒå±€å°½é‡å°‘ä½¿ç”¨RelactivityLayout,å› ä¸ºRelactivityLayoutæ¯æ¬¡éœ€è¦æµ‹é‡2æ¬¡ã€‚ 4.ä»£ç ä¼˜åŒ– éƒ½æ˜¯ä¸€äº›å¾®ä¼˜åŒ–ï¼Œåœ¨æ€§èƒ½æ–¹é¢çœ‹ä¸å‡ºæœ‰ä»€ä¹ˆæ˜¾è‘—çš„æå‡çš„ã€‚ä½¿ç”¨åˆé€‚çš„ç®—æ³•å’Œæ•°æ®ç»“æž„æ˜¯ä¼˜åŒ–ç¨‹åºæ€§èƒ½çš„æœ€ä¸»è¦æ‰‹æ®µã€‚ 4.1 å»ºè®®ä½¿ç”¨lintæ£€æŸ¥åŽ»é™¤æ— æ•ˆä»£ç  lintåŽ»é™¤æ— æ•ˆèµ„æºå’Œä»£ç  å¦‚ä½•æ£€æµ‹å“ªäº›å›¾ç‰‡æœªè¢«ä½¿ç”¨ ç‚¹å‡»èœå•æ  Analyze -&gt; Run Inspection by Name -&gt; unused resources -&gt; Moudule â€˜appâ€™ -&gt; OKï¼Œè¿™æ ·ä¼šæœå‡ºæ¥å“ªäº›æœªè¢«ä½¿ç”¨åˆ°æœªä½¿ç”¨åˆ°xmlå’Œå›¾ç‰‡ï¼Œå¦‚ä¸‹ï¼š å¦‚ä½•æ£€æµ‹å“ªäº›æ— æ•ˆä»£ç  ä½¿ç”¨Android Studioçš„Lintï¼Œæ­¥éª¤ï¼šç‚¹å‡»èœå•æ  Analyze -&gt; Run Inspection by Name -&gt; unused declaration -&gt; Moudule â€˜appâ€™ -&gt; OK 4.2 ä»£ç è§„èŒƒä¼˜åŒ– é¿å…åˆ›å»ºä¸å¿…è¦çš„å¯¹è±¡ ä¸å¿…è¦çš„å¯¹è±¡åº”è¯¥é¿å…åˆ›å»ºï¼š å¦‚æžœæœ‰éœ€è¦æ‹¼æŽ¥çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå¯ä»¥ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨StringBufferæˆ–è€…StringBuilderæ¥è¿›è¡Œæ‹¼æŽ¥ï¼Œè€Œä¸æ˜¯åŠ å·è¿žæŽ¥ç¬¦ï¼Œå› ä¸ºä½¿ç”¨åŠ å·è¿žæŽ¥ç¬¦ä¼šåˆ›å»ºå¤šä½™çš„å¯¹è±¡ï¼Œæ‹¼æŽ¥çš„å­—ç¬¦ä¸²è¶Šé•¿ï¼ŒåŠ å·è¿žæŽ¥ç¬¦çš„æ€§èƒ½è¶Šä½Žã€‚ å½“ä¸€ä¸ªæ–¹æ³•çš„è¿”å›žå€¼æ˜¯Stringçš„æ—¶å€™ï¼Œé€šå¸¸éœ€è¦åŽ»åˆ¤æ–­ä¸€ä¸‹è¿™ä¸ªStringçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œå¦‚æžœæ˜Žç¡®çŸ¥é“è°ƒç”¨æ–¹ä¼šå°†è¿”å›žçš„Stringå†è¿›è¡Œæ‹¼æŽ¥æ“ä½œçš„è¯ï¼Œå¯ä»¥è€ƒè™‘è¿”å›žä¸€ä¸ªStringBufferå¯¹è±¡æ¥ä»£æ›¿ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è¿›è¡Œè¿”å›žï¼Œè€Œè¿”å›žStringçš„è¯å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªçŸ­ç”Ÿå‘½å‘¨æœŸçš„ä¸´æ—¶å¯¹è±¡ã€‚ å°½å¯èƒ½åœ°å°‘åˆ›å»ºä¸´æ—¶å¯¹è±¡ï¼Œè¶Šå°‘çš„å¯¹è±¡æ„å‘³ç€è¶Šå°‘çš„GCæ“ä½œã€‚ nDrawæ–¹æ³•é‡Œé¢ä¸è¦æ‰§è¡Œå¯¹è±¡çš„åˆ›å»º é™æ€ä¼˜äºŽæŠ½è±¡ å¦‚æžœä½ å¹¶ä¸éœ€è¦è®¿é—®ä¸€ä¸ªå¯¹ç³»é‚£ä¸ªä¸­çš„æŸäº›å­—æ®µï¼Œåªæ˜¯æƒ³è°ƒç”¨å®ƒçš„æŸäº›æ–¹æ³•æ¥åŽ»å®Œæˆä¸€é¡¹é€šç”¨çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆå¯ä»¥å°†è¿™ä¸ªæ–¹æ³•è®¾ç½®æˆé™æ€æ–¹æ³•ï¼Œè°ƒç”¨é€Ÿåº¦æå‡15%-20%ï¼ŒåŒæ—¶ä¹Ÿä¸ç”¨ä¸ºäº†è°ƒç”¨è¿™ä¸ªæ–¹æ³•åŽ»ä¸“é—¨åˆ›å»ºå¯¹è±¡äº†ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒè°ƒç”¨è¿™ä¸ªæ–¹æ³•åŽæ˜¯å¦ä¼šæ”¹å˜å¯¹è±¡çš„çŠ¶æ€(é™æ€æ–¹æ³•æ— æ³•è®¿é—®éžé™æ€å­—æ®µ)ã€‚ å¯¹å¸¸é‡ä½¿ç”¨static finalä¿®é¥°ç¬¦ static int intVal = 42; static String strVal = â€œHello, world!â€; ç¼–è¯‘å™¨ä¼šä¸ºä¸Šé¢çš„ä»£ç ç”Ÿæˆä¸€ä¸ªåˆå§‹æ–¹æ³•ï¼Œç§°ä¸ºæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨å®šä¹‰ç±»ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨çš„æ—¶å€™è°ƒç”¨ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå°†42çš„å€¼èµ‹å€¼åˆ°intValå½“ä¸­ï¼Œä»Žå­—ç¬¦ä¸²å¸¸é‡è¡¨ä¸­æå–ä¸€ä¸ªå¼•ç”¨èµ‹å€¼åˆ°strValä¸Šã€‚å½“èµ‹å€¼å®ŒæˆåŽï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å­—æ®µæœå¯»çš„æ–¹å¼åŽ»è®¿é—®å…·ä½“çš„å€¼äº†ã€‚ finalè¿›è¡Œä¼˜åŒ–: static final int intVal = 42; static final String strVal = â€œHello, world!â€; è¿™æ ·ï¼Œå®šä¹‰ç±»å°±ä¸éœ€è¦æ–¹æ³•äº†ï¼Œå› ä¸ºæ‰€æœ‰çš„å¸¸é‡éƒ½ä¼šåœ¨dexæ–‡ä»¶çš„åˆå§‹åŒ–å™¨å½“ä¸­è¿›è¡Œåˆå§‹åŒ–ã€‚å½“æˆ‘ä»¬è°ƒç”¨intValæ—¶å¯ä»¥ç›´æŽ¥æŒ‡å‘42çš„å€¼ï¼Œè€Œè°ƒç”¨strValä¼šç”¨ä¸€ç§ç›¸å¯¹è½»é‡çº§çš„å­—ç¬¦ä¸²å¸¸é‡æ–¹å¼ï¼Œè€Œä¸æ˜¯å­—æ®µæœå¯»çš„æ–¹å¼ã€‚ è¿™ç§ä¼˜åŒ–æ–¹å¼åªå¯¹åŸºæœ¬æ•°æ®ç±»åž‹ä»¥åŠStringç±»åž‹çš„å¸¸é‡æœ‰æ•ˆï¼Œå¯¹äºŽå…¶ä»–æ•°æ®ç±»åž‹çš„å¸¸é‡æ˜¯æ— æ•ˆçš„ã€‚ åœ¨æ²¡æœ‰ç‰¹æ®ŠåŽŸå› çš„æƒ…å†µä¸‹ï¼Œå°½é‡ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»åž‹æ¥ä»£æ›¿å°è£…æ•°æ®ç±»åž‹ï¼Œintæ¯”Integerè¦æ›´åŠ æœ‰æ•ˆï¼Œå…¶å®ƒæ•°æ®ç±»åž‹ä¹Ÿæ˜¯ä¸€æ ·ã€‚ åŸºæœ¬æ•°æ®ç±»åž‹çš„æ•°ç»„ä¹Ÿè¦ä¼˜äºŽå¯¹è±¡æ•°æ®ç±»åž‹çš„æ•°ç»„ã€‚å¦å¤–ä¸¤ä¸ªå¹³è¡Œçš„æ•°ç»„è¦æ¯”ä¸€ä¸ªå°è£…å¥½çš„å¯¹è±¡æ•°ç»„æ›´åŠ é«˜æ•ˆï¼Œä¸¾ä¸ªä¾‹å­ï¼ŒFoo[]å’ŒBar[]è¿™æ ·çš„æ•°ç»„ï¼Œä½¿ç”¨èµ·æ¥è¦æ¯”Custom(Foo,Bar)[]è¿™æ ·çš„ä¸€ä¸ªæ•°ç»„é«˜æ•ˆçš„å¤šã€‚ 4.3 Viewå¼‚å¸¸ä¼˜åŒ– viewè‡ªå®šä¹‰æŽ§ä»¶å¼‚å¸¸é”€æ¯ä¿å­˜çŠ¶æ€ ç»å¸¸å®¹æ˜“è¢«äººå¿½ç•¥ï¼Œä½†æ˜¯ä¸ºäº†è¿½æ±‚é«˜è´¨é‡ä»£ç ï¼Œè¿™ä¸ªä¹Ÿæœ‰å¿…è¦åŠ ä¸Šã€‚ä¸¾ä¸ªä¾‹å­ï¼ 12345678910111213141516171819202122@Overrideprotected Parcelable onSaveInstanceState() &#123; //å¼‚å¸¸æƒ…å†µä¿å­˜é‡è¦ä¿¡æ¯ã€‚ //return super.onSaveInstanceState(); final Bundle bundle = new Bundle(); bundle.putInt("selectedPosition",selectedPosition); bundle.putInt("flingSpeed",mFlingSpeed); bundle.putInt("orientation",orientation); return bundle;&#125;@Overrideprotected void onRestoreInstanceState(Parcelable state) &#123; if (state instanceof Bundle) &#123; final Bundle bundle = (Bundle) state; selectedPosition = bundle.getInt("selectedPosition",selectedPosition); mFlingSpeed = bundle.getInt("flingSpeed",mFlingSpeed); orientation = bundle.getInt("orientation",orientation); return; &#125; super.onRestoreInstanceState(state);&#125; 4.4 åŽ»é™¤æ·¡é»„è‰²è­¦å‘Šä¼˜åŒ– æ·¡é»„è‰²è­¦å‘Šè™½ç„¶ä¸ä¼šé€ æˆå´©æºƒï¼Œä½†æ˜¯ä½œä¸ºç¨‹åºå‘˜è¿˜æ˜¯è¦å°½é‡åŽ»é™¤æ·¡é»„è‰²è­¦å‘Šï¼Œè§„èŒƒä»£ç  4.5 åˆç†ä½¿ç”¨é›†åˆ ä½¿ç”¨ä¼˜åŒ–è¿‡çš„æ•°æ®é›†åˆ Androidæä¾›äº†ä¸€ç³»åˆ—ä¼˜åŒ–è¿‡åŽçš„æ•°æ®é›†åˆå·¥å…·ç±»ï¼Œå¦‚SparseArrayã€SparseBooleanArrayã€LongSparseArrayï¼Œä½¿ç”¨è¿™äº›APIå¯ä»¥è®©æˆ‘ä»¬çš„ç¨‹åºæ›´åŠ é«˜æ•ˆã€‚HashMapå·¥å…·ç±»ä¼šç›¸å¯¹æ¯”è¾ƒä½Žæ•ˆï¼Œå› ä¸ºå®ƒéœ€è¦ä¸ºæ¯ä¸€ä¸ªé”®å€¼å¯¹éƒ½æä¾›ä¸€ä¸ªå¯¹è±¡å…¥å£ï¼Œè€ŒSparseArrayå°±é¿å…æŽ‰äº†åŸºæœ¬æ•°æ®ç±»åž‹è½¬æ¢æˆå¯¹è±¡æ•°æ®ç±»åž‹çš„æ—¶é—´ã€‚ 4.6 Activityä¸å¯è§ä¼˜åŒ– å½“Activityç•Œé¢ä¸å¯è§æ—¶é‡Šæ”¾å†…å­˜ å½“ç”¨æˆ·æ‰“å¼€äº†å¦å¤–ä¸€ä¸ªç¨‹åºï¼Œæˆ‘ä»¬çš„ç¨‹åºç•Œé¢å·²ç»ä¸å¯è§çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”å½“å°†æ‰€æœ‰å’Œç•Œé¢ç›¸å…³çš„èµ„æºè¿›è¡Œé‡Šæ”¾ã€‚é‡å†™Activityçš„onTrimMemory()æ–¹æ³•ï¼Œç„¶åŽåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ç›‘å¬TRIM_MEMORY_UI_HIDDENè¿™ä¸ªçº§åˆ«ï¼Œä¸€æ—¦è§¦å‘è¯´æ˜Žç”¨æˆ·ç¦»å¼€äº†ç¨‹åºï¼Œæ­¤æ—¶å°±å¯ä»¥è¿›è¡Œèµ„æºé‡Šæ”¾æ“ä½œäº†ã€‚ å½“æ—¶çœ‹åˆ°è¿™ä¸ªè§‰å¾—å¾ˆæ–°å¥‡çš„ï¼Œä½†æ˜¯å…·ä½“è¿˜æ˜¯æ²¡æœ‰ç”¨åˆ°ï¼Œè¦æ˜¯é‚£ä¸ªå¤§ç¥žæœ‰å…·ä½“æ“ä½œæ–¹æ¡ˆï¼Œå¯ä»¥åˆ†äº«ä¸€ä¸‹ã€‚ 4.7 èŠ‚åˆ¶çš„ä½¿ç”¨Service èŠ‚åˆ¶çš„ä½¿ç”¨Service å¦‚æžœåº”ç”¨ç¨‹åºéœ€è¦ä½¿ç”¨Serviceæ¥æ‰§è¡ŒåŽå°ä»»åŠ¡çš„è¯ï¼Œåªæœ‰å½“ä»»åŠ¡æ­£åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰åº”è¯¥è®©Serviceè¿è¡Œèµ·æ¥ã€‚å½“å¯åŠ¨ä¸€ä¸ªServiceæ—¶ï¼Œç³»ç»Ÿä¼šå€¾å‘äºŽå°†è¿™ä¸ªServiceæ‰€ä¾èµ–çš„è¿›ç¨‹è¿›è¡Œä¿ç•™ï¼Œç³»ç»Ÿå¯ä»¥åœ¨LRUcacheå½“ä¸­ç¼“å­˜çš„è¿›ç¨‹æ•°é‡ä¹Ÿä¼šå‡å°‘ï¼Œå¯¼è‡´åˆ‡æ¢ç¨‹åºçš„æ—¶å€™è€—è´¹æ›´å¤šæ€§èƒ½ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨IntentServiceï¼Œå½“åŽå°ä»»åŠ¡æ‰§è¡Œç»“æŸåŽä¼šè‡ªåŠ¨åœæ­¢ï¼Œé¿å…äº†Serviceçš„å†…å­˜æ³„æ¼ã€‚ 5.ç½‘ç»œä¼˜åŒ–5.1 å›¾ç‰‡åˆ†ç±» å›¾ç‰‡ç½‘ç»œä¼˜åŒ– æ¯”å¦‚æˆ‘ä¹‹å‰çœ‹åˆ°è±†ç“£æŽ¥å£ï¼Œæä¾›ä¸€ç§åŠ è½½å›¾ç‰‡æ–¹å¼ç‰¹åˆ«å¥½ã€‚æŽ¥å£è¿”å›žå›¾ç‰‡çš„æ•°æ®æœ‰ä¸‰ç§ï¼Œä¸€ç§æ˜¯é«˜æ¸…å¤§å›¾ï¼Œä¸€ç§æ˜¯æ­£å¸¸å›¾ç‰‡ï¼Œä¸€ç§æ˜¯ç¼©ç•¥å°å›¾ã€‚å½“ç”¨æˆ·å¤„äºŽwifiä¸‹ç»™æŽ§ä»¶è®¾ç½®é«˜æ¸…å¤§å›¾ï¼Œå½“4gæˆ–è€…3gæ¨¡å¼ä¸‹åŠ è½½æ­£å¸¸å›¾ç‰‡ï¼Œå½“å¼±ç½‘æ¡ä»¶ä¸‹åŠ è½½ç¼©ç•¥å›¾ã€ä¹Ÿç§°ä¸ŽåŠ è½½å›¾ã€‘ã€‚ ç®€å•æ¥è¯´æ ¹æ®ç”¨æˆ·çš„å½“å‰çš„ç½‘ç»œè´¨é‡æ¥åˆ¤æ–­ä¸‹è½½ä»€ä¹ˆè´¨é‡çš„å›¾ç‰‡ï¼ˆç”µå•†ç”¨çš„æ¯”è¾ƒå¤šï¼‰ã€‚è±†ç“£å¼€æºæŽ¥å£å¯ä»¥å‚è€ƒä¸€ä¸‹ï¼ 5.2 èŽ·å–ç½‘ç»œæ•°æ®ä¼˜åŒ– ç§»åŠ¨ç«¯èŽ·å–ç½‘ç»œæ•°æ®ä¼˜åŒ–çš„å‡ ä¸ªç‚¹ è¿žæŽ¥å¤ç”¨ï¼šèŠ‚çœè¿žæŽ¥å»ºç«‹æ—¶é—´ï¼Œå¦‚å¼€å¯ keep-aliveã€‚ å¯¹äºŽAndroidæ¥è¯´é»˜è®¤æƒ…å†µä¸‹HttpURLConnectionå’ŒHttpClientéƒ½å¼€å¯äº†keep-aliveã€‚åªæ˜¯2.2ä¹‹å‰HttpURLConnectionå­˜åœ¨å½±å“è¿žæŽ¥æ± çš„Bugï¼Œå…·ä½“å¯è§ï¼šAndroid HttpURLConnectionåŠHttpClienté€‰æ‹© è¯·æ±‚åˆå¹¶ï¼šå³å°†å¤šä¸ªè¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªè¿›è¡Œè¯·æ±‚ï¼Œæ¯”è¾ƒå¸¸è§çš„å°±æ˜¯ç½‘é¡µä¸­çš„CSS Image Spritesã€‚å¦‚æžœæŸä¸ªé¡µé¢å†…è¯·æ±‚è¿‡å¤šï¼Œä¹Ÿå¯ä»¥è€ƒè™‘åšä¸€å®šçš„è¯·æ±‚åˆå¹¶ã€‚ å‡å°‘è¯·æ±‚æ•°æ®çš„å¤§å°ï¼šå¯¹äºŽpostè¯·æ±‚ï¼Œbodyå¯ä»¥åšgzipåŽ‹ç¼©çš„ï¼Œheaderä¹Ÿå¯ä»¥åšæ•°æ®åŽ‹ç¼©(ä¸è¿‡åªæ”¯æŒhttp è¿”å›žæ•°æ®çš„bodyä¹Ÿå¯ä»¥åšgzipåŽ‹ç¼©ï¼Œbodyæ•°æ®ä½“ç§¯å¯ä»¥ç¼©å°åˆ°åŽŸæ¥çš„30%å·¦å³ã€‚ï¼ˆä¹Ÿå¯ä»¥è€ƒè™‘åŽ‹ç¼©è¿”å›žçš„jsonæ•°æ®çš„keyæ•°æ®çš„ä½“ç§¯ï¼Œå°¤å…¶æ˜¯é’ˆå¯¹è¿”å›žæ•°æ®æ ¼å¼å˜åŒ–ä¸å¤§çš„æƒ…å†µï¼Œæ”¯ä»˜å®èŠå¤©è¿”å›žçš„æ•°æ®ç”¨åˆ°äº†ï¼‰ 5.3 ç½‘ç»œè¯·æ±‚å¼‚å¸¸æ‹¦æˆªä¼˜åŒ– åœ¨èŽ·å–æ•°æ®çš„æµç¨‹ä¸­ï¼Œè®¿é—®æŽ¥å£å’Œè§£æžæ•°æ®æ—¶éƒ½æœ‰å¯èƒ½ä¼šå‡ºé”™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹¦æˆªå™¨åœ¨è¿™ä¸¤å±‚æ‹¦æˆªé”™è¯¯ã€‚ 1.åœ¨è®¿é—®æŽ¥å£æ—¶ï¼Œæˆ‘ä»¬ä¸ç”¨è®¾ç½®æ‹¦æˆªå™¨ï¼Œå› ä¸ºä¸€æ—¦å‡ºçŽ°é”™è¯¯ï¼ŒRetrofitä¼šè‡ªåŠ¨æŠ›å‡ºå¼‚å¸¸ã€‚æ¯”å¦‚ï¼Œå¸¸è§è¯·æ±‚å¼‚å¸¸404ï¼Œ500ï¼Œ503ç­‰ç­‰ã€‚ 2.åœ¨è§£æžæ•°æ®æ—¶ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œåˆ¤æ–­Resulté‡Œé¢çš„codeæ˜¯å¦ä¸ºæˆåŠŸï¼Œå¦‚æžœä¸æˆåŠŸï¼Œåˆ™è¦æ ¹æ®ä¸ŽæœåŠ¡å™¨çº¦å®šå¥½çš„é”™è¯¯ç æ¥æŠ›å‡ºå¯¹åº”çš„å¼‚å¸¸ã€‚æ¯”å¦‚ï¼Œtokenå¤±æ•ˆï¼Œç¦ç”¨åŒè´¦å·ç™»é™†å¤šå°è®¾å¤‡ï¼Œç¼ºå°‘å‚æ•°ï¼Œå‚æ•°ä¼ é€’å¼‚å¸¸ç­‰ç­‰ã€‚ 3.é™¤æ­¤ä»¥å¤–ï¼Œä¸ºäº†æˆ‘ä»¬è¦å°½é‡é¿å…åœ¨Viewå±‚å¯¹é”™è¯¯è¿›è¡Œåˆ¤æ–­ï¼Œå¤„ç†ï¼Œæˆ‘ä»¬å¿…é¡»è¿˜è¦è®¾ç½®ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªonErroräº‹ä»¶ï¼Œç„¶åŽä½¿ç”¨ExceptionUtilsï¼Œè®©å…¶æ ¹æ®é”™è¯¯ç±»åž‹æ¥åˆ†åˆ«å¤„ç†ã€‚ å…·ä½“å¯ä»¥ç›´æŽ¥çœ‹libä¸­çš„ExceptionUtilsç±»ï¼Œé‚£ä¹ˆå¦‚ä½•è°ƒç”¨å‘¢ï¼Ÿå…¥ä¾µæ€§æžä½Žï¼Œä¸ç”¨æ”¹å˜ä¹‹å‰çš„ä»£ç ï¼ 12345@Overridepublic void onError(Throwable e) &#123; //ç›´æŽ¥è°ƒç”¨å³å¯ ExceptionUtils.handleException(e);&#125; 6.çº¿ç¨‹ä¼˜åŒ–6.1 ä½¿ç”¨çº¿ç¨‹æ±  å°†å…¨å±€çº¿ç¨‹ç”¨çº¿ç¨‹æ± ç®¡ç† ç›´æŽ¥åˆ›å»ºThreadå®žçŽ°runnableæ–¹æ³•çš„å¼Šç«¯ å¤§é‡çš„çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯å¾ˆå®¹æ˜“å¯¼è‡´GCé¢‘ç¹çš„æ‰§è¡Œï¼Œä»Žè€Œå‘ç”Ÿå†…å­˜æŠ–åŠ¨çŽ°è±¡ï¼Œè€Œå‘ç”Ÿäº†å†…å­˜æŠ–åŠ¨ï¼Œå¯¹äºŽç§»åŠ¨ç«¯æ¥è¯´ï¼Œæœ€å¤§çš„å½±å“å°±æ˜¯é€ æˆç•Œé¢å¡é¡¿ çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯éƒ½éœ€è¦æ—¶é—´ï¼Œå½“æœ‰å¤§é‡çš„çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯æ—¶ï¼Œé‚£ä¹ˆè¿™äº›æ—¶é—´çš„æ¶ˆè€—åˆ™æ¯”è¾ƒæ˜Žæ˜¾ï¼Œå°†å¯¼è‡´æ€§èƒ½ä¸Šçš„ç¼ºå¤± ä¸ºä»€ä¹ˆè¦ç”¨çº¿ç¨‹æ±  é‡ç”¨çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹ï¼Œé¿å…é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ï¼›æœ‰æ•ˆæŽ§åˆ¶çº¿ç¨‹çš„æœ€å¤§å¹¶å‘æ•°é‡ï¼Œé˜²æ­¢çº¿ç¨‹è¿‡å¤§å¯¼è‡´æŠ¢å èµ„æºé€ æˆç³»ç»Ÿé˜»å¡žï¼›å¯ä»¥å¯¹çº¿ç¨‹è¿›è¡Œä¸€å®šåœ°ç®¡ç†ã€‚ ä½¿ç”¨çº¿ç¨‹æ± ç®¡ç†çš„ç»å…¸ä¾‹å­ RxJavaï¼ŒRxAndroidï¼Œåº•å±‚å¯¹çº¿ç¨‹æ± çš„å°è£…ç®¡ç†ç‰¹åˆ«å€¼å¾—å‚è€ƒ å…³äºŽçº¿ç¨‹æ± ï¼Œçº¿ç¨‹ï¼Œå¤šçº¿ç¨‹çš„å…·ä½“å†…å®¹ å‚è€ƒï¼šè½»é‡çº§çº¿ç¨‹æ± å°è£…åº“ï¼Œæ”¯æŒå¼‚æ­¥å›žè°ƒï¼Œå¯ä»¥æ£€æµ‹çº¿ç¨‹æ‰§è¡Œçš„çŠ¶æ€ è¯¥é¡¹ç›®ä¸­å“ªé‡Œç”¨åˆ°é¢‘ç¹new Thread ä¿å­˜å›¾ç‰‡[æ³¨æ„ï¼Œå°¤å…¶æ˜¯å¤§å›¾å’Œå¤šå›¾åœºæ™¯ä¸‹æ³¨æ„è€—æ—¶å¤ªä¹…]ï¼›æŸäº›é¡µé¢ä»Žæ•°æ®åº“æŸ¥è¯¢æ•°æ®ï¼›è®¾ç½®ä¸­å¿ƒæ¸…é™¤å›¾ç‰‡ï¼Œè§†é¢‘ï¼Œä¸‹è½½æ–‡ä»¶ï¼Œæ—¥å¿—ï¼Œç³»ç»Ÿç¼“å­˜ç­‰ç¼“å­˜å†…å®¹ ä½¿ç”¨çº¿ç¨‹æ± ç®¡ç†åº“å¥½å¤„ï¼Œæ¯”å¦‚ä¿å­˜å›¾ç‰‡ï¼Œè€—æ—¶æ“ä½œæ”¾åˆ°å­çº¿ç¨‹ä¸­ï¼Œå¤„ç†è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æ£€æµ‹åˆ°æ‰§è¡Œå¼€å§‹ï¼Œå¼‚å¸¸ï¼ŒæˆåŠŸï¼Œå¤±è´¥ç­‰å¤šç§çŠ¶æ€ã€‚ 7.å›¾ç‰‡ä¼˜åŒ–7.1 bitmapä¼˜åŒ– åŠ è½½å›¾ç‰‡æ‰€å çš„å†…å­˜å¤§å°è®¡ç®—æ–¹å¼ åŠ è½½ç½‘ç»œå›¾ç‰‡ï¼šbitmapå†…å­˜å¤§å° = å›¾ç‰‡é•¿åº¦ x å›¾ç‰‡å®½åº¦ x å•ä½åƒç´ å ç”¨çš„å­—èŠ‚æ•°ã€çœ‹åˆ°ç½‘ä¸Šå¾ˆå¤šéƒ½æ˜¯è¿™æ ·å†™çš„ï¼Œä½†æ˜¯ä¸å…¨é¢ã€‘ åŠ è½½æœ¬åœ°å›¾ç‰‡ï¼šbitmapå†…å­˜å¤§å° = width * height * nTargetDensity/inDensity ä¸€ä¸ªåƒç´ æ‰€å çš„å†…å­˜ã€‚æ³¨æ„ä¸è¦å¿½ç•¥äº†ä¸€ä¸ªå½±å“é¡¹ï¼šDensity ç¬¬ä¸€ç§åŠ è½½å›¾ç‰‡ä¼˜åŒ–å¤„ç†ï¼šåŽ‹ç¼©å›¾ç‰‡ è´¨é‡åŽ‹ç¼©æ–¹æ³•ï¼šåœ¨ä¿æŒåƒç´ çš„å‰æä¸‹æ”¹å˜å›¾ç‰‡çš„ä½æ·±åŠé€æ˜Žåº¦ç­‰ï¼Œæ¥è¾¾åˆ°åŽ‹ç¼©å›¾ç‰‡çš„ç›®çš„ï¼Œè¿™æ ·é€‚åˆåŽ»ä¼ é€’äºŒè¿›åˆ¶çš„å›¾ç‰‡æ•°æ®ï¼Œæ¯”å¦‚åˆ†äº«å›¾ç‰‡ï¼Œè¦ä¼ å…¥äºŒè¿›åˆ¶æ•°æ®è¿‡åŽ»ï¼Œé™åˆ¶500kbä¹‹å†…ã€‚ é‡‡æ ·çŽ‡åŽ‹ç¼©æ–¹æ³•ï¼šè®¾ç½®inSampleSizeçš„å€¼(intç±»åž‹)åŽï¼Œå‡å¦‚è®¾ä¸ºnï¼Œåˆ™å®½å’Œé«˜éƒ½ä¸ºåŽŸæ¥çš„1/nï¼Œå®½é«˜éƒ½å‡å°‘ï¼Œå†…å­˜é™ä½Žã€‚ ç¼©æ”¾æ³•åŽ‹ç¼©ï¼šAndroidä¸­ä½¿ç”¨Matrixå¯¹å›¾åƒè¿›è¡Œç¼©æ”¾ã€æ—‹è½¬ã€å¹³ç§»ã€æ–œåˆ‡ç­‰å˜æ¢çš„ã€‚åŠŸèƒ½ååˆ†å¼ºå¤§ï¼ ç¬¬äºŒç§åŠ è½½å›¾ç‰‡ä¼˜åŒ–ï¼šä¸åŽ‹ç¼©åŠ è½½é«˜æ¸…å›¾ç‰‡å¦‚ä½•åšï¼Ÿ ä½¿ç”¨BitmapRegionDecoderï¼Œä¸»è¦ç”¨äºŽæ˜¾ç¤ºå›¾ç‰‡çš„æŸä¸€å—çŸ©å½¢åŒºåŸŸï¼Œå¦‚æžœä½ éœ€è¦æ˜¾ç¤ºæŸä¸ªå›¾ç‰‡çš„æŒ‡å®šåŒºåŸŸï¼Œé‚£ä¹ˆè¿™ä¸ªç±»éžå¸¸åˆé€‚ã€‚ 7.2 glideåŠ è½½ä¼˜åŒ– åœ¨ç”»å»Šä¸­åŠ è½½å¤§å›¾ å‡å¦‚ä½ æ»‘åŠ¨ç‰¹åˆ«å¿«ï¼ŒglideåŠ è½½ä¼˜åŒ–å°±æ˜¾å¾—éžå¸¸é‡è¦å‘¢ï¼Œå…·ä½“ä¼˜åŒ–æ–¹æ³•å¦‚ä¸‹æ‰€ç¤º 12345678910111213recyclerView.addOnScrollListener(new RecyclerView.OnScrollListener() &#123; @Override public void onScrollStateChanged(@NonNull RecyclerView recyclerView, int newState) &#123; super.onScrollStateChanged(recyclerView, newState); if (newState == RecyclerView.SCROLL_STATE_IDLE) &#123; LoggerUtils.e("initRecyclerView"+ "æ¢å¤GlideåŠ è½½å›¾ç‰‡"); Glide.with(ImageBrowseActivity.this).resumeRequests(); &#125;else &#123; LoggerUtils.e("initRecyclerView"+"ç¦æ­¢GlideåŠ è½½å›¾ç‰‡"); Glide.with(ImageBrowseActivity.this).pauseRequests(); &#125; &#125;&#125;); 8.åŠ è½½ä¼˜åŒ–8.1 æ‡’åŠ è½½ä¼˜åŒ– è¯¥ä¼˜åŒ–åœ¨æ–°é—»ç±»appä¸­ååˆ†å¸¸è§ ViewPager+Fragmentçš„æ­é…åœ¨æ—¥å¸¸å¼€å‘ä¸­ä¹Ÿæ¯”è¾ƒå¸¸è§ï¼Œå¯ç”¨äºŽåˆ‡æ¢å±•ç¤ºä¸åŒç±»åˆ«çš„é¡µé¢ã€‚ æ‡’åŠ è½½,å…¶å®žä¹Ÿå°±æ˜¯å»¶è¿ŸåŠ è½½,å°±æ˜¯ç­‰åˆ°è¯¥é¡µé¢çš„UIå±•ç¤ºç»™ç”¨æˆ·æ—¶,å†åŠ è½½è¯¥é¡µé¢çš„æ•°æ®(ä»Žç½‘ç»œã€æ•°æ®åº“ç­‰),è€Œä¸æ˜¯ä¾é ViewPageré¢„åŠ è½½æœºåˆ¶æå‰åŠ è½½ä¸¤ä¸‰ä¸ªï¼Œç”šè‡³æ›´å¤šé¡µé¢çš„æ•°æ®ã€‚è¿™æ ·å¯ä»¥æé«˜æ‰€å±žActivityçš„åˆå§‹åŒ–é€Ÿåº¦,ä¹Ÿå¯ä»¥ä¸ºç”¨æˆ·èŠ‚çœæµé‡.è€Œè¿™ç§æ‡’åŠ è½½çš„æ–¹å¼ä¹Ÿå·²ç»/æ­£åœ¨è¢«è¯¸å¤šAPPæ‰€é‡‡ç”¨ã€‚ å…·ä½“çœ‹è¿™ç¯‡æ–‡ç«  www.jianshu.com/p/cf1f4104dâ€¦ 8.2 å¯åŠ¨é¡µä¼˜åŒ– å¯åŠ¨æ—¶é—´åˆ†æž ç³»ç»Ÿåˆ›å»ºè¿›ç¨‹çš„æ—¶é—´å’Œåº”ç”¨è¿›ç¨‹å¯åŠ¨çš„æ—¶é—´ï¼Œå‰è€…æ˜¯ç”±ç³»ç»Ÿè‡ªè¡Œå®Œæˆçš„ï¼Œä¸€èˆ¬éƒ½ä¼šå¾ˆå¿«ï¼Œæˆ‘ä»¬ä¹Ÿå¹²é¢„ä¸äº†ï¼Œæˆ‘è§‰å¾—èƒ½åšçš„å°±æ˜¯åŽ»ä¼˜åŒ–åº”ç”¨è¿›ç¨‹å¯åŠ¨ï¼Œå…·ä½“è¯´æ¥å°±æ˜¯ä»Žå‘Applicationçš„onCreate()æ‰§è¡Œå¼€å§‹åˆ°MainActivityçš„onCreate()æ‰§è¡Œç»“æŸè¿™ä¸€æ®µæ—¶é—´ã€‚ å¯åŠ¨æ—¶é—´ä¼˜åŒ– Applicationçš„onCreate()æ–¹æ³• MainActivityçš„onCreate()æ–¹æ³• ä¼˜åŒ–çš„æ‰‹æ®µä¹Ÿæ— éžä¸‰ç§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å»¶è¿Ÿåˆå§‹åŒ– åŽå°ä»»åŠ¡ å¯åŠ¨ç•Œé¢é¢„åŠ è½½ å¯åŠ¨é¡µç™½å±ä¼˜åŒ– ä¸ºä»€ä¹ˆå­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Ÿ å½“ç³»ç»Ÿå¯åŠ¨ä¸€ä¸ªAPPæ—¶ï¼Œzygoteè¿›ç¨‹ä¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹åŽ»è¿è¡Œè¿™ä¸ªAPPï¼Œä½†æ˜¯è¿›ç¨‹çš„åˆ›å»ºæ˜¯éœ€è¦æ—¶é—´çš„ï¼Œåœ¨åˆ›å»ºå®Œæˆä¹‹å‰ï¼Œç•Œé¢æ˜¯å‘ˆçŽ°å‡æ­»çŠ¶æ€ï¼ŒäºŽæ˜¯ç³»ç»Ÿæ ¹æ®ä½ çš„manifestæ–‡ä»¶è®¾ç½®çš„ä¸»é¢˜é¢œè‰²çš„ä¸åŒæ¥å±•ç¤ºä¸€ä¸ªç™½å±æˆ–è€…é»‘å±ã€‚è€Œè¿™ä¸ªé»‘ï¼ˆç™½ï¼‰å±æ­£å¼çš„ç§°å‘¼åº”è¯¥æ˜¯Preview Windowï¼Œå³é¢„è§ˆçª—å£ã€‚ å®žé™…ä¸Šå°±æ˜¯æ˜¯activityé»˜è®¤çš„ä¸»é¢˜ä¸­çš„android:windowBackgroundä¸ºç™½è‰²æˆ–è€…é»‘è‰²å¯¼è‡´çš„ã€‚ æ€»ç»“æ¥è¯´å¯åŠ¨é¡ºåºå°±æ˜¯ï¼šappå¯åŠ¨â€”â€”Preview Window(ä¹Ÿç§°ä¸ºé¢„è§ˆçª—å£)â€”â€”å¯åŠ¨é¡µ è§£å†³åŠžæ³• å¸¸è§æœ‰ä¸‰ç§ï¼Œè¿™é‡Œè§£å†³åŠžæ³•æ˜¯ç»™å½“å‰å¯åŠ¨é¡µæ·»åŠ ä¸€ä¸ªæœ‰èƒŒæ™¯çš„styleæ ·å¼ï¼Œç„¶åŽSplashActivityå¼•ç”¨å½“å‰themeä¸»é¢˜ï¼Œæ³¨æ„åœ¨è¯¥é¡µé¢å°†windowçš„èƒŒæ™¯å›¾è®¾ç½®ä¸ºç©ºï¼ æ›´å¤šå…³äºŽå¯åŠ¨é¡µä¸ºä»€ä¹ˆç™½å±é—ªå±ï¼Œä»¥åŠä¸åŒè§£å†³åŠžæ³•ï¼Œå¯ä»¥çœ‹æˆ‘è¿™ç¯‡åšå®¢ï¼šAppå¯åŠ¨é¡µé¢ä¼˜åŒ– å¯åŠ¨æ—¶é—´ä¼˜åŒ– IntentServiceå­çº¿ç¨‹åˆ†æ‹…éƒ¨åˆ†åˆå§‹åŒ–å·¥ä½œ çŽ°åœ¨applicationåˆå§‹åŒ–å†…å®¹æœ‰ï¼šé˜¿é‡Œäº‘æŽ¨é€åˆå§‹åŒ–ï¼Œè…¾è®¯buglyåˆå§‹åŒ–ï¼Œimåˆå§‹åŒ–ï¼Œç¥žç­–åˆå§‹åŒ–ï¼Œå†…å­˜æ³„æ¼å·¥å…·åˆå§‹åŒ–ï¼Œå¤´æ¡é€‚é…æ–¹æ¡ˆåˆå§‹åŒ–ï¼Œé˜¿é‡Œäº‘çƒ­ä¿®å¤â€¦â€¦ç­‰ç­‰ã€‚å°†éƒ¨åˆ†é€»è¾‘æ”¾åˆ°IntentServiceä¸­å¤„ç†ï¼Œå¯ä»¥ç¼©çŸ­å¾ˆå¤šæ—¶é—´ã€‚ å¼€å¯IntentSerViceçº¿ç¨‹ï¼Œå°†éƒ¨åˆ†é€»è¾‘å’Œè€—æ—¶çš„åˆå§‹åŒ–æ“ä½œæ”¾åˆ°è¿™é‡Œå¤„ç†ï¼Œå¯ä»¥å‡å°‘applicationåˆå§‹åŒ–æ—¶é—´ å…³äºŽIntentServiceä½¿ç”¨å’Œæºç åˆ†æžï¼Œæ€§èƒ½åˆ†æžç­‰å¯ä»¥å‚è€ƒåšå®¢ï¼šIntentServiceæºç åˆ†æž 9.å…¶ä»–ä¼˜åŒ–9.1 é™æ€å˜é‡ä¼˜åŒ– å°½é‡ä¸ä½¿ç”¨é™æ€å˜é‡ä¿å­˜æ ¸å¿ƒæ•°æ®ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ - è¿™æ˜¯å› ä¸ºandroidçš„è¿›ç¨‹å¹¶ä¸æ˜¯å®‰å…¨çš„ï¼ŒåŒ…æ‹¬applicationå¯¹è±¡ä»¥åŠé™æ€å˜é‡åœ¨å†…çš„è¿›ç¨‹çº§åˆ«å˜é‡å¹¶ä¸ä¼šä¸€ç›´å‘†ç€å†…å­˜é‡Œé¢ï¼Œå› ä¸ºå®ƒå¾ˆæœ‰ä¼šè¢«killæŽ‰ã€‚ - å½“è¢«killæŽ‰ä¹‹åŽï¼Œå®žé™…ä¸Šappä¸ä¼šé‡æ–°å¼€å§‹å¯åŠ¨ã€‚Androidç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Applicationå¯¹è±¡ï¼Œç„¶åŽå¯åŠ¨ä¸Šæ¬¡ç”¨æˆ·ç¦»å¼€æ—¶çš„activityä»¥é€ æˆè¿™ä¸ªappä»Žæ¥æ²¡æœ‰è¢«killæŽ‰çš„å‡è±¡ã€‚è€Œè¿™æ—¶å€™é™æ€å˜é‡ç­‰æ•°æ®ç”±äºŽè¿›ç¨‹å·²ç»è¢«æ€æ­»è€Œè¢«åˆå§‹åŒ–ï¼Œæ‰€ä»¥å°±æœ‰äº†ä¸æŽ¨èåœ¨é™æ€å˜é‡ï¼ˆåŒ…æ‹¬Applicationä¸­ä¿å­˜å…¨å±€æ•°æ®é™æ€æ•°æ®ï¼‰çš„è§‚ç‚¹ã€‚ 9.2 æ³¨è§£æ›¿ä»£æžšä¸¾ ä½¿ç”¨æ³¨è§£é™å®šä¼ å…¥ç±»åž‹ æ¯”å¦‚ï¼Œå°¤å…¶æ˜¯å†™ç¬¬ä¸‰æ–¹å¼€æºåº“ï¼Œå¯¹äºŽæœ‰äº›æš´éœ²ç»™å¼€å‘è€…çš„æ–¹æ³•ï¼Œéœ€è¦é™å®šä¼ å…¥ç±»åž‹æ˜¯æœ‰å¿…è¦çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š åˆšå¼€å§‹çš„ä»£ç  123456789/** * è®¾ç½®æ’­æ”¾å™¨ç±»åž‹ï¼Œå¿…é¡»è®¾ç½® * æ³¨æ„ï¼šæ„Ÿè°¢æŸäººå»ºè®®ï¼Œè¿™é‡Œé™å®šäº†ä¼ å…¥å€¼ç±»åž‹ * è¾“å…¥å€¼ï¼š111 æˆ–è€… 222 * @param playerType IjkPlayer or MediaPlayer. */public void setPlayerType(int playerType) &#123; mPlayerType = playerType;&#125; ä¼˜åŒ–åŽçš„ä»£ç ï¼Œæœ‰æ•ˆé¿å…ç¬¬ä¸€ç§æ–¹å¼å¼€å‘è€…ä¼ å…¥å€¼é”™è¯¯ 12345678910111213141516171819202122/** * è®¾ç½®æ’­æ”¾å™¨ç±»åž‹ï¼Œå¿…é¡»è®¾ç½® * æ³¨æ„ï¼šæ„Ÿè°¢æŸäººå»ºè®®ï¼Œè¿™é‡Œé™å®šäº†ä¼ å…¥å€¼ç±»åž‹ * è¾“å…¥å€¼ï¼šConstantKeys.IjkPlayerType.TYPE_IJK æˆ–è€… ConstantKeys.IjkPlayerType.TYPE_NATIVE * @param playerType IjkPlayer or MediaPlayer. */public void setPlayerType(@ConstantKeys.PlayerType int playerType) &#123; mPlayerType = playerType;&#125;/** * é€šè¿‡æ³¨è§£é™å®šç±»åž‹ * TYPE_IJK IjkPlayerï¼ŒåŸºäºŽIjkPlayerå°è£…æ’­æ”¾å™¨ * TYPE_NATIVE MediaPlayerï¼ŒåŸºäºŽåŽŸç”Ÿè‡ªå¸¦çš„æ’­æ”¾å™¨æŽ§ä»¶ */@Retention(RetentionPolicy.SOURCE)public @interface IjkPlayerType &#123; int TYPE_IJK = 111; int TYPE_NATIVE = 222;&#125;@IntDef(&#123;IjkPlayerType.TYPE_IJK,IjkPlayerType.TYPE_NATIVE&#125;)public @interface PlayerType&#123;&#125; ä½¿ç”¨æ³¨è§£æ›¿ä»£æžšä¸¾ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤º 1234567@Retention(RetentionPolicy.SOURCE)public @interface ViewStateType &#123; int HAVE_DATA = 1; int EMPTY_DATA = 2; int ERROR_DATA = 3; int ERROR_NETWORK = 4;&#125; 9.3 å¤šæ¸ é“æ‰“åŒ…ä¼˜åŒ– è¿˜åœ¨æ‰‹åŠ¨æ‰“åŒ…å—ï¼Ÿå°è¯•ä¸€ä¸‹pythonè‡ªåŠ¨åŒ–æ‰“åŒ…å§â€¦â€¦ ç“¦åŠ›å¤šæ¸ é“æ‰“åŒ…çš„Pythonè„šæœ¬æµ‹è¯•å·¥å…·ï¼Œé€šè¿‡è¯¥è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œè‡ªéœ€è¦runä¸€ä¸‹æˆ–è€…å‘½ä»¤è¡Œè¿è¡Œè„šæœ¬å³å¯å®žçŽ°ç¾Žå›¢ç“¦åŠ›å¤šæ¸ é“æ‰“åŒ…ï¼Œæ‰“åŒ…é€Ÿåº¦å¾ˆå¿«ã€‚é…ç½®ä¿¡æ¯ååˆ†ç®€å•ï¼Œä»£ç ä¸­å·²ç»æ³¨é‡Šååˆ†è¯¦ç»†ã€‚å¯ä»¥è‡ªå®šä¹‰è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥ä¿®æ”¹å¤šæ¸ é“é…ç½®ä¿¡æ¯ï¼Œç®€å•å®žç”¨ã€‚ é¡¹ç›®åœ°å€ï¼šgithub.com/yangchong21â€¦ 9.4 TrimMemoryå’ŒLowMemoryä¼˜åŒ– å¯ä»¥ä¼˜åŒ–ä»€ä¹ˆï¼Ÿ åœ¨ onTrimMemory() å›žè°ƒä¸­ï¼Œåº”è¯¥åœ¨ä¸€äº›çŠ¶æ€ä¸‹æ¸…ç†æŽ‰ä¸é‡è¦çš„å†…å­˜èµ„æºã€‚å¯¹äºŽè¿™äº›ç¼“å­˜ï¼Œåªè¦æ˜¯è¯»è¿›å†…å­˜å†…çš„éƒ½ç®—ï¼Œä¾‹å¦‚æœ€å¸¸è§çš„å›¾ç‰‡ç¼“å­˜ã€æ–‡ä»¶ç¼“å­˜ç­‰ã€‚æ‹¿å›¾ç‰‡ç¼“å­˜æ¥è¯´ï¼Œå¸‚åœºä¸Šï¼Œå¸¸è§„çš„å›¾ç‰‡åŠ è½½åº“ï¼Œä¸€èˆ¬è€Œè¨€éƒ½æ˜¯ä¸‰çº§ç¼“å­˜ï¼Œæ‰€ä»¥åœ¨å†…å­˜åƒç´§çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±åº”è¯¥ä¼˜å…ˆæ¸…ç†æŽ‰è¿™éƒ¨åˆ†å›¾ç‰‡ç¼“å­˜ï¼Œæ¯•ç«Ÿå›¾ç‰‡æ˜¯åƒå†…å­˜å¤§æˆ·ï¼Œè€Œä¸”å†æ¬¡å›žæ¥çš„æ—¶å€™ï¼Œè™½ç„¶å†…å­˜ä¸­çš„èµ„æºè¢«å›žæ”¶æŽ‰äº†ï¼Œä¾ç„¶å¯ä»¥ä»Žç£ç›˜æˆ–è€…ç½‘ç»œä¸Šæ¢å¤å®ƒã€‚ å¤§æ¦‚çš„æ€è·¯å¦‚ä¸‹æ‰€ç¤º åœ¨lowMemoryçš„æ—¶å€™ï¼Œè°ƒç”¨Glide.cleanMemory()æ¸…ç†æŽ‰æ‰€æœ‰çš„å†…å­˜ç¼“å­˜ã€‚ åœ¨Appè¢«ç½®æ¢åˆ°åŽå°çš„æ—¶å€™ï¼Œè°ƒç”¨Glide.cleanMemory()æ¸…ç†æŽ‰æ‰€æœ‰çš„å†…å­˜ç¼“å­˜ã€‚ åœ¨å…¶å®ƒæƒ…å†µçš„onTrimMemory()å›žè°ƒä¸­ï¼Œç›´æŽ¥è°ƒç”¨Glide.trimMemory()æ–¹æ³•æ¥äº¤ç»™Glideå¤„ç†å†…å­˜æƒ…å†µã€‚ 9.5 è½®è¯¢æ“ä½œä¼˜åŒ– ä»€ä¹ˆå«è½®è®­è¯·æ±‚ï¼Ÿ ç®€å•ç†è§£å°±æ˜¯Appç«¯æ¯éš”ä¸€å®šçš„æ—¶é—´é‡å¤è¯·æ±‚çš„æ“ä½œå°±å«åšè½®è®­è¯·æ±‚ï¼Œæ¯”å¦‚ï¼šAppç«¯æ¯éš”ä¸€æ®µæ—¶é—´ä¸ŠæŠ¥ä¸€æ¬¡å®šä½ä¿¡æ¯ï¼ŒAppç«¯æ¯éš”ä¸€æ®µæ—¶é—´æ‹‰åŽ»ä¸€æ¬¡ç”¨æˆ·çŠ¶æ€ç­‰ï¼Œè¿™äº›åº”è¯¥éƒ½æ˜¯è½®è®­è¯·æ±‚ã€‚æ¯”å¦‚ï¼Œç”µå•†ç±»é¡¹ç›®ï¼ŒæŸä¸ªæŠ½å¥–æ´»åŠ¨é¡µé¢ï¼Œéš”1åˆ†é’Ÿè°ƒç”¨ä¸€æ¬¡æŽ¥å£ï¼Œå¼¹å‡ºä¸€äº›èŽ·å¥–äººä¿¡æ¯ï¼Œä½ åº”è¯¥æŸä¸ªé˜¶æ®µçœ‹è¿‡è¿™ç±»è½®è¯¢æ“ä½œï¼ å…·ä½“ä¼˜åŒ–æ“ä½œ é•¿è¿žæŽ¥å¹¶ä¸æ˜¯ç¨³å®šçš„å¯é çš„ï¼Œè€Œæ‰§è¡Œè½®è®­æ“ä½œçš„æ—¶å€™ä¸€èˆ¬éƒ½æ˜¯è¦ç¨³å®šçš„ç½‘ç»œè¯·æ±‚ï¼Œè€Œä¸”è½®è®­æ“ä½œä¸€èˆ¬éƒ½æ˜¯æœ‰ç”Ÿå‘½å‘¨æœŸçš„ï¼Œå³åœ¨ä¸€å®šçš„ç”Ÿå‘½å‘¨æœŸå†…æ‰§è¡Œè½®è®­æ“ä½œï¼Œè€Œé•¿è¿žæŽ¥ä¸€èˆ¬éƒ½æ˜¯æ•´ä¸ªè¿›ç¨‹ç”Ÿå‘½å‘¨æœŸçš„ï¼Œæ‰€ä»¥ä»Žè¿™æ–¹é¢è®²ä¹Ÿä¸å¤ªé€‚åˆã€‚ å»ºè®®åœ¨serviceä¸­åšè½®è¯¢æ“ä½œï¼Œè½®è¯¢è¯·æ±‚æŽ¥å£ï¼Œå…·ä½“åšæ³•å’Œæ³¨æ„è¦ç‚¹ï¼Œå¯ä»¥ç›´æŽ¥çœ‹è¯¥é¡¹ç›®ä»£ç ã€‚çœ‹appåŒ…ä¸‹çš„LoopRequestServiceç±»å³å¯ã€‚ å¤§æ¦‚æ€è·¯ï¼šå½“ç”¨æˆ·æ‰“å¼€è¿™ä¸ªé¡µé¢çš„æ—¶å€™åˆå§‹åŒ–TimerTaskå¯¹è±¡ï¼Œæ¯ä¸ªä¸€åˆ†é’Ÿè¯·æ±‚ä¸€æ¬¡æœåŠ¡å™¨æ‹‰å–è®¢å•ä¿¡æ¯å¹¶æ›´æ–°UIï¼Œå½“ç”¨æˆ·ç¦»å¼€é¡µé¢çš„æ—¶å€™æ¸…é™¤TimerTaskå¯¹è±¡ï¼Œå³å–æ¶ˆè½®è®­è¯·æ±‚æ“ä½œã€‚ 9.6 åŽ»é™¤é‡å¤ä¾èµ–åº“ä¼˜åŒ– æˆ‘ç›¸ä¿¡ä½ çœ‹åˆ°äº†è¿™é‡Œä¼šæœ‰ç–‘é—®ï¼Œç½‘ä¸Šæœ‰è®¸å¤šåšå®¢ä½œäº†è¿™æ–¹é¢è¯´æ˜Žã€‚ä½†æ˜¯æˆ‘åœ¨è¿™é‡Œæƒ³è¯´ï¼Œå¦‚ä½•æŸ¥æ‰¾è‡ªå·±é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–å…³ç³»æ ‘ æ³¨æ„è¦ç‚¹ï¼šå…¶ä¸­appå°±æ˜¯é¡¹ç›®muduleåå­—ã€‚ æ­£å¸¸æƒ…å†µä¸‹å°±æ˜¯appï¼ 1gradlew app:dependencies å…³äºŽä¾èµ–å…³ç³»æ ‘çš„ç»“æž„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼Œæ­¤å¤„çœç•¥å¾ˆå¤šä»£ç  12345678910111213| | | | | | \--- android.arch.core:common:1.1.1 (*)| | | | \--- com.android.support:support-annotations:26.1.0 -&gt; 28.0.0| +--- com.journeyapps:zxing-android-embedded:3.6.0| | +--- com.google.zxing:core:3.3.2| | \--- com.android.support:support-v4:25.3.1| | +--- com.android.support:support-compat:25.3.1 -&gt; 28.0.0 (*)| | +--- com.android.support:support-media-compat:25.3.1| | | +--- com.android.support:support-annotations:25.3.1 -&gt; 28.0.0| | | \--- com.android.support:support-compat:25.3.1 -&gt; 28.0.0 (*)| | +--- com.android.support:support-core-utils:25.3.1 -&gt; 28.0.0 (*)| | +--- com.android.support:support-core-ui:25.3.1 -&gt; 28.0.0 (*)| | \--- com.android.support:support-fragment:25.3.1 -&gt; 28.0.0 (*)\--- com.android.support:multidex:1.0.2 -&gt; 1.0.3 ç„¶åŽæŸ¥çœ‹å“ªäº›é‡å¤jar ç„¶åŽä¿®æ”¹gradleé…ç½®ä»£ç  1234api (rootProject.ext.dependencies[&quot;zxing&quot;])&#123; exclude module: &apos;support-v4&apos; exclude module: &apos;appcompat-v7&apos;&#125; 9.7 å››ç§å¼•ç”¨ä¼˜åŒ– è½¯å¼•ç”¨ä½¿ç”¨åœºæ™¯ æ­£å¸¸æ˜¯ç”¨æ¥å¤„ç†å¤§å›¾ç‰‡è¿™ç§å ç”¨å†…å­˜å¤§çš„æƒ…å†µ ä»£ç å¦‚ä¸‹æ‰€ç¤º 1234567Bitmap bitmap = bitmaps.get(position);//æ­£å¸¸æ˜¯ç”¨æ¥å¤„ç†å›¾ç‰‡è¿™ç§å ç”¨å†…å­˜å¤§çš„æƒ…å†µbitmapSoftReference = new SoftReference&lt;&gt;(bitmap);if(bitmapSoftReference.get() != null) &#123; viewHolder.imageView.setImageBitmap(bitmapSoftReference.get());&#125;//å…¶å®žçœ‹glideåº•å±‚æºç å¯çŸ¥ï¼Œä¹Ÿåšäº†ç›¸å…³è½¯å¼•ç”¨çš„æ“ä½œ è¿™æ ·ä½¿ç”¨è½¯å¼•ç”¨å¥½å¤„ é€šè¿‡è½¯å¼•ç”¨çš„get()æ–¹æ³•ï¼Œå–å¾—bitmapå¯¹è±¡å®žä¾‹çš„å¼ºå¼•ç”¨ï¼Œå‘çŽ°å¯¹è±¡è¢«æœªå›žæ”¶ã€‚åœ¨GCåœ¨å†…å­˜å……è¶³çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå›žæ”¶è½¯å¼•ç”¨å¯¹è±¡ã€‚æ­¤æ—¶viewçš„èƒŒæ™¯æ˜¾ç¤º å®žé™…æƒ…å†µä¸­,æˆ‘ä»¬ä¼šèŽ·å–å¾ˆå¤šå›¾ç‰‡.ç„¶åŽå¯èƒ½ç»™å¾ˆå¤šä¸ªviewå±•ç¤º, è¿™ç§æƒ…å†µä¸‹å¾ˆå®¹æ˜“å†…å­˜åƒç´§å¯¼è‡´oom,å†…å­˜åƒç´§ï¼Œç³»ç»Ÿå¼€å§‹ä¼šGCã€‚è¿™æ¬¡GCåŽï¼ŒbitmapSoftReference.get()ä¸å†è¿”å›žbitmapå¯¹è±¡ï¼Œè€Œæ˜¯è¿”å›žnullï¼Œè¿™æ—¶å±å¹•ä¸ŠèƒŒæ™¯å›¾ä¸æ˜¾ç¤ºï¼Œè¯´æ˜Žåœ¨ç³»ç»Ÿå†…å­˜ç´§å¼ çš„æƒ…å†µä¸‹ï¼Œè½¯å¼•ç”¨è¢«å›žæ”¶ã€‚ ä½¿ç”¨è½¯å¼•ç”¨ä»¥åŽï¼Œåœ¨OutOfMemoryå¼‚å¸¸å‘ç”Ÿä¹‹å‰ï¼Œè¿™äº›ç¼“å­˜çš„å›¾ç‰‡èµ„æºçš„å†…å­˜ç©ºé—´å¯ä»¥è¢«é‡Šæ”¾æŽ‰çš„ï¼Œä»Žè€Œé¿å…å†…å­˜è¾¾åˆ°ä¸Šé™ï¼Œé¿å…Crashå‘ç”Ÿã€‚ å¼±å¼•ç”¨ä½¿ç”¨åœºæ™¯ å¼±å¼•ç”¨â€“&gt;éšæ—¶å¯èƒ½ä¼šè¢«åžƒåœ¾å›žæ”¶å™¨å›žæ”¶ï¼Œä¸ä¸€å®šè¦ç­‰åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸è¶³æ—¶æ‰å¼ºåˆ¶å›žæ”¶ã€‚ å¯¹äºŽä½¿ç”¨é¢‘æ¬¡å°‘çš„å¯¹è±¡ï¼Œå¸Œæœ›å°½å¿«å›žæ”¶ï¼Œä½¿ç”¨å¼±å¼•ç”¨å¯ä»¥ä¿è¯å†…å­˜è¢«è™šæ‹Ÿæœºå›žæ”¶ã€‚æ¯”å¦‚handlerï¼Œå¦‚æžœå¸Œæœ›ä½¿ç”¨å®ŒåŽå°½å¿«å›žæ”¶ï¼Œçœ‹ä¸‹é¢ä»£ç  1234567891011121314private MyHandler handler = new MyHandler(this);private static class MyHandler extends Handler&#123; WeakReference&lt;FirstActivity&gt; weakReference; MyHandler(FirstActivity activity) &#123; weakReference = new WeakReference&lt;&gt;(activity); &#125; @Override public void handleMessage(Message msg) &#123; super.handleMessage(msg); switch (msg.what)&#123; &#125; &#125;&#125; åˆ°åº•ä»€ä¹ˆæ—¶å€™ä½¿ç”¨è½¯å¼•ç”¨ï¼Œä»€ä¹ˆæ—¶å€™ä½¿ç”¨å¼±å¼•ç”¨å‘¢ï¼Ÿ ä¸ªäººè®¤ä¸ºï¼Œå¦‚æžœåªæ˜¯æƒ³é¿å…OutOfMemoryå¼‚å¸¸çš„å‘ç”Ÿï¼Œåˆ™å¯ä»¥ä½¿ç”¨è½¯å¼•ç”¨ã€‚å¦‚æžœå¯¹äºŽåº”ç”¨çš„æ€§èƒ½æ›´åœ¨æ„ï¼Œæƒ³å°½å¿«å›žæ”¶ä¸€äº›å ç”¨å†…å­˜æ¯”è¾ƒå¤§çš„å¯¹è±¡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¼±å¼•ç”¨ã€‚ è¿˜æœ‰å°±æ˜¯å¯ä»¥æ ¹æ®å¯¹è±¡æ˜¯å¦ç»å¸¸ä½¿ç”¨æ¥åˆ¤æ–­ã€‚å¦‚æžœè¯¥å¯¹è±¡å¯èƒ½ä¼šç»å¸¸ä½¿ç”¨çš„ï¼Œå°±å°½é‡ç”¨è½¯å¼•ç”¨ã€‚å¦‚æžœè¯¥å¯¹è±¡ä¸è¢«ä½¿ç”¨çš„å¯èƒ½æ€§æ›´å¤§äº›ï¼Œå°±å¯ä»¥ç”¨å¼±å¼•ç”¨ã€‚ 9.8 åŠ è½½loadingä¼˜åŒ– ä¸€èˆ¬å®žé™…å¼€å‘ä¸­ä¼šè‡³å°‘æœ‰ä¸¤ç§loading ç¬¬ä¸€ç§æ˜¯ä»ŽAé¡µé¢è¿›å…¥Bé¡µé¢æ—¶çš„åŠ è½½loadingï¼Œè¿™ä¸ªæ—¶å€™ç‰¹ç‚¹æ˜¯æ˜¾ç¤ºloadingçš„æ—¶å€™ï¼Œé¡µé¢æ˜¯çº¯ç™½è‰²çš„ï¼ŒåŠ è½½å®Œæ•°æ®åŽæ‰æ˜¾ç¤ºå†…å®¹é¡µé¢ã€‚ ç¬¬äºŒç§æ˜¯åœ¨æŸä¸ªé¡µé¢æ“ä½œæŸç§é€»è¾‘ï¼Œæ¯”å¦‚æŸäº›è€—æ—¶æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™æ˜¯å±€éƒ¨loading[ä¸€èˆ¬ç”¨ä¸ªå¸§åŠ¨ç”»æˆ–è€…è¡¥é—´åŠ¨ç”»]ï¼Œç”±äºŽä½¿ç”¨é¢‘ç¹ï¼Œå› ä¸ºå»ºè®®åœ¨é”€æ¯å¼¹çª—æ—¶ï¼Œæ·»åŠ é”€æ¯åŠ¨ç”»çš„æ“ä½œã€‚ è‡ªå®šä¹‰loadingåŠ è½½ github.com/yangchong21â€¦ 9.9 å¯¹è±¡æ± Poolsä¼˜åŒ– å¯¹è±¡æ± Poolsä¼˜åŒ–é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡ ä½¿ç”¨å¯¹è±¡æ± ï¼Œå¯ä»¥é˜²æ­¢é¢‘ç¹åˆ›å»ºå’Œé”€æ¯å¯¹è±¡è€Œå‡ºçŽ°å†…å­˜æŠ–åŠ¨ åœ¨æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é¢‘ç¹ä½¿ç”¨ä¸€äº›ä¸´æ—¶å¯¹è±¡ï¼Œå¦‚æžœæ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™éƒ½ç”³è¯·æ–°çš„èµ„æºï¼Œå¾ˆæœ‰å¯èƒ½ä¼šå¼•å‘é¢‘ç¹çš„ gc è€Œå½±å“åº”ç”¨çš„æµç•…æ€§ã€‚è¿™ä¸ªæ—¶å€™å¦‚æžœå¯¹è±¡æœ‰æ˜Žç¡®çš„ç”Ÿå‘½å‘¨æœŸï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ± æ¥é«˜æ•ˆçš„å®Œæˆå¤ç”¨å¯¹è±¡ã€‚ å…·ä½“å‚è€ƒæ¡ˆä¾‹ï¼Œå¯ä»¥çœ‹è¯¥é¡¹ç›®ï¼šgithub.com/yangchong21â€¦ 10.RecyclerViewä¼˜åŒ–10.1 é¡µé¢ä¸ºä½•å¡é¡¿ RecyclerViewæ»‘åŠ¨å¡é¡¿çš„åŽŸå› æœ‰å“ªäº›ï¼Ÿ ç¬¬ä¸€ç§ï¼šåµŒå¥—å¸ƒå±€æ»‘åŠ¨å†²çª å¯¼è‡´åµŒå¥—æ»‘åŠ¨éš¾å¤„ç†çš„å…³é”®åŽŸå› åœ¨äºŽå½“å­æŽ§ä»¶æ¶ˆè´¹äº†äº‹ä»¶, é‚£ä¹ˆçˆ¶æŽ§ä»¶å°±ä¸ä¼šå†æœ‰æœºä¼šå¤„ç†è¿™ä¸ªäº‹ä»¶äº†, æ‰€ä»¥ä¸€æ—¦å†…éƒ¨çš„æ»‘åŠ¨æŽ§ä»¶æ¶ˆè´¹äº†æ»‘åŠ¨æ“ä½œ, å¤–éƒ¨çš„æ»‘åŠ¨æŽ§ä»¶å°±å†ä¹Ÿæ²¡æœºä¼šå“åº”è¿™ä¸ªæ»‘åŠ¨æ“ä½œäº† ç¬¬äºŒç§ï¼šåµŒå¥—å¸ƒå±€å±‚æ¬¡å¤ªæ·±ï¼Œæ¯”å¦‚å…­ä¸ƒå±‚ç­‰ æµ‹é‡ï¼Œç»˜åˆ¶å¸ƒå±€å¯èƒ½ä¼šå¯¼è‡´æ»‘åŠ¨å¡é¡¿ ç¬¬ä¸‰ç§ï¼šæ¯”å¦‚ç”¨RecyclerViewå®žçŽ°ç”»å»Šï¼ŒåŠ è½½æ¯”è¾ƒå¤§çš„å›¾ç‰‡ï¼Œå¦‚æžœå¿«é€Ÿæ»‘åŠ¨ï¼Œåˆ™å¯èƒ½ä¼šå‡ºçŽ°å¡é¡¿ï¼Œä¸»è¦æ˜¯åŠ è½½å›¾ç‰‡éœ€è¦æ—¶é—´ ç¬¬å››ç§ï¼šåœ¨onCreateViewHolderæˆ–è€…åœ¨onBindViewHolderä¸­åšäº†è€—æ—¶çš„æ“ä½œå¯¼è‡´å¡é¡¿ã€‚æŒ‰stackoverflowä¸Šé¢æ¯”è¾ƒé€šä¿—çš„è§£é‡Šï¼šRecyclerView.Adapteré‡Œé¢çš„onCreateViewHolder()æ–¹æ³•å’ŒonBindViewHolder()æ–¹æ³•å¯¹æ—¶é—´éƒ½éžå¸¸æ•æ„Ÿã€‚ç±»ä¼¼I/Oè¯»å†™ï¼ŒBitmapè§£ç ä¸€ç±»çš„è€—æ—¶æ“ä½œï¼Œæœ€å¥½ä¸è¦åœ¨å®ƒä»¬é‡Œé¢è¿›è¡Œã€‚ å…³äºŽRecyclerViewå°è£…åº“ github.com/yangchong21â€¦ 10.2 å…·ä½“ä¼˜åŒ–æ–¹æ¡ˆ 03.SparseArrayæ›¿ä»£HashMap 04.ç€‘å¸ƒæµå›¾ç‰‡é”™ä¹±é—®é¢˜è§£å†³ 05.itemç‚¹å‡»äº‹ä»¶æ”¾åœ¨å“ªé‡Œä¼˜åŒ– 06.ViewHolderä¼˜åŒ– 07.è¿žç»­ä¸Šæ‹‰åŠ è½½æ›´å¤šä¼˜åŒ– 08.æ‹–æ‹½æŽ’åºä¸Žæ»‘åŠ¨åˆ é™¤ä¼˜åŒ– 09.æš‚åœæˆ–åœæ­¢åŠ è½½æ•°æ®ä¼˜åŒ– 11.å¼‚å¸¸æƒ…å†µä¸‹ä¿å­˜çŠ¶æ€ 12.å¤šçº¿ç¨‹ä¸‹æ’å…¥æ•°æ®ä¼˜åŒ– 14.recyclerViewä¼˜åŒ–å¤„ç† 15.adapterä¼˜åŒ– å…·ä½“çœ‹è¿™ç¯‡åšå®¢ï¼šrecyclerViewä¼˜åŒ– å…³äºŽå…¶ä»–å†…å®¹ä»‹ç»äºŽåšå®¢æ±‡æ€»é“¾æŽ¥ 1.æŠ€æœ¯åšå®¢æ±‡æ€» 2.å¼€æºé¡¹ç›®æ±‡æ€» 3.ç”Ÿæ´»åšå®¢æ±‡æ€» 4.å–œé©¬æ‹‰é›…éŸ³é¢‘æ±‡æ€» 5.å…¶ä»–æ±‡æ€»]]></content>
      <categories>
        <category>Android</category>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidéª¨æž¶å±ï¼Œäº†è§£ä¸€ä¸‹]]></title>
    <url>%2Fposts%2F2114cdef.html</url>
    <content type="text"><![CDATA[ä»¥å‰åšåº”ç”¨å¼€å‘æ—¶ï¼Œåœ¨æ•°æ®å°šæœªåŠ è½½å‰ä¸€èˆ¬ä¼šå…ˆç»™ç”¨æˆ·ä¸€ä¸ªæç¤ºï¼Œæœ€ç®€å•ç²—æš´çš„æ–¹å¼å°±æ˜¯èŠèŠ±å›¾ï¼Œå¤§å¤šæ•°åšæ³•æ˜¯æ”¾ä¸€å¼ æœ‰ä¸ªæ€§çš„é™æ€å›¾ï¼Œç¤ºæ„æ­£åœ¨åŠ è½½æ•°æ®ï¼Œè¿™æ ·ä½“éªŒä¼šå¥½äº›ï¼Œç›´åˆ°å‡ºçŽ° Skeleton Screenï¼ˆä¸­æ–‡ä¸€èˆ¬å«åšéª¨æž¶å±ï¼‰æžå¤§åœ°æå‡ç”¨æˆ·æ„ŸçŸ¥ä½“éªŒã€‚å…¶å®žä¸€å¼€å§‹æˆ‘å¹¶ä¸çŸ¥é“è¿™ä¸ªæ•ˆæžœå«ä»€ä¹ˆåå­—ï¼ŒåŽæ¥åœ¨ GitHub çœ‹åˆ°æœ‰äººå¼€æºäº†ï¼Œèµ¶ç´§ Starã€‚ä»Šå¤©æˆ‘ç»™å¤§å®¶æŽ¨èå‡ ä¸ª Skeleton Screen ç›¸å…³åº“ï¼Œæ¥äº†è§£å­¦ä¹ ä¸€æ³¢ã€‚ 1ã€ShimmerRecyclerViewç®€ä»‹A custom recycler view with shimmer views to indicate that views are loading ï¼ˆè‹±è¯­æ¸£æ¸£ï¼Œè¿™å¥è¯å§‹ç»ˆç¿»è¯‘ä¸é¡º/æ‚è„¸ï¼‰ã€‚ æ•ˆæžœé¢„è§ˆ 2ã€Skeletonç®€ä»‹è¿™ä¸ªåº“æä¾›äº†ä¸€ç§æ˜¾ç¤ºéª¨æž¶åŠ è½½è§†å›¾çš„ç®€ä¾¿æ–¹æ³•ï¼Œå®ƒçŽ°åœ¨ä½¿ç”¨é—ªå­˜åŠ¨ç”»çš„å†…å­˜ä¼˜åŒ–ç‰ˆæœ¬ï¼Œå› æ­¤é€Ÿåº¦æ›´å¿«ï¼Œæ‚¨ä¹Ÿå¯ä»¥è®¾ç½®æ›´å¤§çš„å¸ƒå±€åŠ¨ç”»ã€‚ æ•ˆæžœé¢„è§ˆ 3ã€spruce-androidç®€ä»‹Spruce æ˜¯ä¸€ä¸ªè½»é‡çº§åŠ¨ç”»åº“ï¼Œå¯å¸®åŠ©ç¼–æŽ’å±å¹•ä¸Šçš„åŠ¨ç”»ã€‚è¯¥åº“åŒæ—¶æ”¯æŒ iOSã€‚ æ•ˆæžœé¢„è§ˆ]]></content>
      <categories>
        <category>Android</category>
        <category>å¼€æºåº“</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>View</tag>
        <tag>éª¨æž¶å±</tag>
        <tag>åŠ è½½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½ å¥½ï¼ŒFlutter]]></title>
    <url>%2Fposts%2Fbe2502a3.html</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯Flutter2018å¹´2æœˆ27æ—¥ï¼Œåœ¨2018ä¸–ç•Œç§»åŠ¨å¤§ä¼šä¸Šï¼ŒGoogleå‘å¸ƒäº†Flutterçš„ç¬¬ä¸€ä¸ªBetaç‰ˆæœ¬ã€‚Flutteræ˜¯Googleç”¨ä»¥å¸®åŠ©å¼€å‘è€…åœ¨Ioså’ŒAndroidä¸¤ä¸ªå¹³å°å¼€å‘é«˜è´¨é‡åŽŸç”Ÿåº”ç”¨çš„å…¨æ–°ç§»åŠ¨UIæ¡†æž¶ï¼Œç‚¹å‡»æŸ¥çœ‹Flutterä»‹ç»è§†é¢‘ã€‚ å…¶å®žæˆ‘ç¬¬ä¸€æ¬¡å¬è¯´Flutteræ˜¯åœ¨æ”¶åˆ°è°·æ­Œå¼€å‘è€…å…¬ä¼—å·çš„æŽ¨é€é‡Œï¼Œå½“æ—¶è¯»å®Œäº†é‚£ç¯‡æ–‡ç« è§‰å¾—Flutterçš„ä¼˜ç‚¹ç¡®å®žæ¯”è¾ƒçªå‡ºï¼š çƒ­é‡è½½ï¼ˆHot Reloadï¼‰ï¼Œä½œä¸ºä¸€ä¸ªèœé¸Ÿå®‰å“å¼€å‘è€…ï¼Œèƒ½çƒ­é‡è½½çœŸçš„å¤ªèˆ’æœäº†ï¼Œåˆ©ç”¨Android Studioç›´æŽ¥ä¸€ä¸ªctrl+så°±å¯ä»¥ä¿å­˜å¹¶é‡è½½ï¼Œæ¨¡æ‹Ÿå™¨ç«‹é©¬å°±å¯ä»¥çœ‹è§æ•ˆæžœï¼Œå°±è¿™ä¸€ç‚¹æ¯”åŽŸç”Ÿå®‰å“åˆ¶ä½œç®€ç›´ä¸çŸ¥é“é«˜åˆ°å“ªé‡ŒåŽ»äº†ã€‚ ä¸€åˆ‡çš†ä¸ºWidgetçš„ç†å¿µï¼Œå¯¹äºŽFlutteræ¥è¯´ï¼Œæ‰‹æœºåº”ç”¨é‡Œçš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯Widgetï¼Œé€šè¿‡å¯ç»„åˆçš„ç©ºé—´é›†åˆã€ä¸°å¯Œçš„åŠ¨ç”»åº“ä»¥åŠåˆ†å±‚è¯¾æ‰©å±•çš„æž¶æž„å®žçŽ°äº†å¯Œæœ‰æ„ŸæŸ“åŠ›çš„çµæ´»ç•Œé¢è®¾è®¡ã€‚ å€ŸåŠ©å¯ç§»æ¤çš„GPUåŠ é€Ÿçš„æ¸²æŸ“å¼•æ“Žä»¥åŠé«˜æ€§èƒ½æœ¬åœ°ä»£ç è¿è¡Œæ—¶ä»¥è¾¾åˆ°è·¨å¹³å°è®¾å¤‡çš„é«˜è´¨é‡ç”¨æˆ·ä½“éªŒã€‚ è¿™æ®µä»‹ç»æ˜¯ç›´æŽ¥æŠ„ä¸‹æ¥çš„ï¼Œè™½ç„¶æˆ‘å¹¶ä¸çŸ¥é“ä»€ä¹ˆå«å¯ç§»æ¤çš„GPUåŠ é€Ÿçš„æ¸²æŸ“å¼•æ“Žï¼Œä½†æ˜¯æœ€ç»ˆç»“æžœå°±æ˜¯åˆ©ç”¨Flutteræž„å»ºçš„åº”ç”¨åœ¨è¿è¡Œæ•ˆçŽ‡ä¸Šä¼šå’ŒåŽŸç”Ÿåº”ç”¨å·®ä¸å¤šã€‚ é…·å®‰ä¸Šæœ‰ä¸€ä¸ªFlutterçš„æ¼”ç¤ºDemoï¼ŒFlutter Galleryã€‚ å¦‚æžœç»å¸¸é€›é…·å®‰çš„ä¸€å®šä¼šå‘çŽ°è¿™ä¸ªç”»å»Šçš„æ¼”ç¤ºDemoçš„å›¾æ ‡å’Œå¦ä¸€ä¸ªæ¼”ç¤ºDemoçš„å›¾æ ‡æ˜¯ä¸€æ ·çš„ï¼ŒGoogle Fuchsia OS Preview,è¿™ä¸ªåº”ç”¨çš„æ˜¯ä¼ é—»çš„Googleæ­£åœ¨ç ”å‘çš„æ–°ä¸€ä»£æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥ä¸ªäººè®¤ä¸ºï¼ŒFlutterçš„å­˜åœ¨å¯èƒ½ä¸ä»…ä»…æ˜¯å®žçŽ°åœ¨å®‰å“å’ŒIOSä¸Šçš„è¿è¡Œï¼Œæ›´æ˜¯ä¸ºäº†æ—¥åŽä¸°å¯ŒFuchsiaè¿™ä¸ªæ–°ç³»ç»Ÿçš„è½¯ä»¶ç”Ÿæ€è€Œå­˜åœ¨çš„ã€‚ Flutterçš„æ ¸å¿ƒå†…å®¹æŽ¥ä¸‹æ¥æˆ‘æƒ³å†™ä¸€ä¸‹æˆ‘è‡ªå·±é€šè¿‡è¿™ä¸¤å¤©çš„æŽ¥è§¦å¯¹äºŽFlutterçš„æ ¸å¿ƒå†…å®¹ä¹Ÿå°±æ˜¯ä¸Šé¢å¥½å¤„çš„ç¬¬äºŒç‚¹çš„ç†è§£ã€‚ ä¸€åˆ‡éƒ½æ˜¯æŽ§ä»¶ï¼ˆWidgetï¼‰åœ¨Flutterä¸­ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½æ˜¯Widgetï¼Œè¿™ç‚¹å’Œå…¶ä»–çš„åº”ç”¨æ¡†æž¶ä¸ä¸€æ ·ï¼ŒFlutterçš„å¯¹è±¡æ¨¡åž‹æ˜¯ç»Ÿä¸€çš„ï¼Œä¹Ÿå°±æ˜¯æŽ§ä»¶ã€‚ ä¸€ä¸ªæŽ§ä»¶å¯ä»¥å®šä¹‰ï¼š ç»“æž„å…ƒç´ ï¼ˆæ¯”å¦‚æŒ‰é’®æˆ–è€…èœå•ï¼‰ é£Žæ ¼å…ƒç´ ï¼ˆæ¯”å¦‚å­—ä½“æˆ–è€…é¢œè‰²æ–¹æ¡ˆï¼‰ å¸ƒå±€ ä¸€äº›ä¸šåŠ¡é€»è¾‘ ç­‰ç­‰ã€‚ã€‚ã€‚ã€‚ æŽ§ä»¶æ˜¯åŸºäºŽæž„å›¾å½¢æˆå±‚æ¬¡ç»“æž„ï¼Œæ¯ä¸ªæŽ§ä»¶åµŒå¥—åœ¨å…¶ä¸­ï¼Œå¹¶ä»Žå…¶çˆ¶ä»£ç»§æ‰¿å±žæ€§ï¼Œæ²¡æœ‰å•ç‹¬çš„â€œåº”ç”¨ç¨‹åºâ€å¯¹è±¡ï¼Œåªæœ‰æ ¹æŽ§ä»¶ã€‚ æ‚¨å¯ä»¥é€šè¿‡å‘ŠçŸ¥æ¡†æž¶ç”¨å¦ä¸€ä¸ªæŽ§ä»¶æ›¿æ¢å±‚æ¬¡ç»“æž„ä¸­çš„æŽ§ä»¶æ¥å“åº”äº‹ä»¶ï¼Œæ¯”å¦‚ç”¨æˆ·äº¤äº’ï¼Œç„¶åŽæ¡†æž¶ä¼šå¯¹æ¯”æ–°çš„æŽ§ä»¶å’Œæ—§çš„æŽ§ä»¶ï¼Œå¹¶æœ‰æ•ˆçš„æ›´æ–°ç”¨æˆ·ç•Œé¢ï¼Œå³æ›´æ–°æœ‰å˜åŒ–çš„æŽ§ä»¶ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨Flutterä¸­ï¼Œä¸€ä¸ªåº”ç”¨å°±æ˜¯æœ‰è®¸è®¸å¤šå¤šçš„Widgetç»„åˆè€Œæˆçš„ã€‚ æž„å»ºç¬¬ä¸€ä¸ªFlutterå®žä¾‹å…ˆæ¥ä»‹ç»ä¸€ä¸‹Flutteré‡Œé¢çš„åŸºæœ¬ç©ºé—´ï¼š Textï¼šæ–‡æœ¬æŽ§ä»¶ï¼Œåœ¨åº”ç”¨ä¸­åˆ›å»ºå„ç§æ ·å¼çš„æ–‡æœ¬ã€‚ Row,Columnï¼šFlexæŽ§ä»¶ï¼Œå¯ä»¥åˆ›å»ºæ°´å¹³(Row)æˆ–åž‚ç›´(Column)æ–¹å‘çš„å¸ƒå±€ï¼Œæ˜¯åŸºäºŽWebçš„flexboxçš„å¸ƒå±€æ¨¡å¼è®¾è®¡çš„ã€‚ Stackï¼šéžçº¿æ€§å¸ƒå±€ï¼ˆæ°´å¹³æˆ–åž‚ç›´ï¼‰ï¼ŒæŽ§ä»¶å¯ä»¥å †å åœ¨å…¶ä»–æŽ§ä»¶ä¸Šï¼Œå¯ä»¥ä½¿ç”¨PositionedæŽ§ä»¶æŽ§åˆ¶Stackç›¸å¯¹é¡¶éƒ¨ã€å³éƒ¨ã€åº•éƒ¨å’Œå·¦éƒ¨çš„ä½ç½®ï¼Œæ˜¯åŸºäºŽWebçš„absoluteå®šä½çš„å¸ƒå±€æ¨¡å¼ã€‚ Containerï¼šåˆ›å»ºçŸ©å½¢çš„å¯è§†å…ƒç´ ï¼Œå¯ä»¥ç”¨BoxDecorationæ¥è®¾è®¡æ ·å¼ï¼Œæ¯”å¦‚èƒŒæ™¯ã€è¾¹æ¡†å’Œé˜´å½±ï¼ŒContainerä¹Ÿæœ‰è¾¹è·ã€å¡«å……å’Œå¤§å°é™åˆ¶ï¼Œå¦å¤–ï¼Œè¿˜å¯ä»¥åœ¨ä¸‰ç»´ç©ºé—´åˆ©ç”¨çŸ©é˜µè¿›è¡Œå˜æ¢ã€‚ ç»“åˆå®žä¾‹åˆ†æžï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071import 'package:flutter/material.dart';class MyAppBar extends StatelessWidget &#123; MyAppBar(&#123;this.title&#125;); final Widget title; @override Widget build(BuildContext context) &#123; // TODO: implement build return new Container( height: 56.0, padding: const EdgeInsets.symmetric(horizontal: 8.0), decoration: new BoxDecoration(color: Colors.blue[500]), //new Rowæ„å‘³ç€è¯¥å­å¸ƒå±€ä¸ºæ°´å¹³å¸ƒå±€ child: new Row( children: &lt;Widget&gt;[ //å¸ƒå±€ä¾æ¬¡ä¸ºå›¾æ ‡æŒ‰é’®ï¼Œå‰©ä½™å®¹å™¨å’Œå›¾æ ‡æŒ‰é’®ï¼Œå¦‚æžœæŠŠç¬¬äºŒä¸ªIconButtonç§»åŠ¨åˆ°Expandedå‰åˆ™å†…å®¹ä¼šå‘ç”Ÿæ”¹å˜ new IconButton( icon: new Icon(Icons.menu), tooltip: 'å¯¼èˆªèœå•', onPressed: null ), //Expandedçš„ä½œç”¨å¯ä»¥ä½¿ç”¨å‰©ä½™çš„æ‰€æœ‰ç©ºé—´ã€‚ new Expanded( child: title ), new IconButton( icon: new Icon(Icons.search), tooltip: 'æœç´¢', onPressed: null ) ], ), ); &#125;&#125;class MyScaffold extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return new Material( child: new Column( children: &lt;Widget&gt;[ new MyAppBar( title: new Text( 'ç¤ºä¾‹æ ‡é¢˜', style: Theme .of(context) .primaryTextTheme .title, ), ), new Expanded( child: new Center( child: new Text('ä½ å¥½ä¸–ç•Œï¼'), ), ) ], ), ); &#125;&#125;void main() &#123; runApp(new MaterialApp( title: 'æˆ‘çš„åº”ç”¨', home: new MyScaffold(), ));&#125; å…¶å®žè¯´çœŸçš„æˆ‘ç¬¬ä¸€çœ¼çœ‹åˆ°è¿™æ®µä»£ç çš„æ—¶å€™ï¼Œç¬¬ä¸€æƒ³æ³•å°±æ˜¯ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤šæ‹¬å·ï¼Ÿä½†æ˜¯è¿™ä¸æ˜¯é‡ç‚¹ï¼Œæœ‰ç‚¹ç¼–ç¨‹ç»éªŒçš„éƒ½çŸ¥é“è¦å…ˆä»Žmainå‡½æ•°çœ‹èµ·ï¼Œè¿™é‡Œçš„mainå‡½æ•°é‡Œé¢å¥—äº†ä¸€ä¸ªrunAppå‡½æ•°ï¼Œ runAppå‡½æ•°æŽ¥å—æŒ‡å®šçš„æŽ§ä»¶(Widget)ï¼Œå¹¶ä½¿å…¶ä½œä¸ºæŽ§ä»¶æ ‘(widget tree)çš„æ ¹æŽ§ä»¶ã€‚ runAppé‡Œé¢newäº†ä¸€ä¸ªMaterialAppå¯¹è±¡ï¼Œç„¶åŽè¿™ä¸ªå¯¹è±¡æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯titileï¼ŒæŒ‡æ˜Žäº†è¿™ä¸ªæŽ§ä»¶çš„æ ‡é¢˜æ˜¯å•¥ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯homeï¼ŒæŒ‡æ˜Žäº†è¿™ä¸ªæŽ§ä»¶çš„ä¸»ä½“æ˜¯å•¥ã€‚ å†æ·±å…¥çš„çœ‹å°±ä¼šå‘çŽ°ï¼Œhomeçš„å€¼æ˜¯ä¸€ä¸ªnewå‡ºæ¥çš„MyScaffoldå¯¹è±¡ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥åŽ»æŸ¥çœ‹MyScaffoldè¿™ä¸ªç±»çš„å£°æ˜Žä»£ç ã€‚ MyScaffoldæŽ§ä»¶ä¸ºå­æŽ§ä»¶è®¾ç½®åž‚ç›´å¸ƒå±€ï¼Œåœ¨åž‚ç›´é¡¶éƒ¨æ”¾ç½®ä¸€ä¸ªMyAppBarçš„å®žä¾‹ï¼ˆè¿™ä¸ªæŽ§ä»¶ä¹Ÿæ˜¯è‡ªå·±åˆ›å»ºçš„ï¼‰ï¼Œå°†MyAppBarçš„TextæŽ§ä»¶ä½œä¸ºæ ‡é¢˜ä½¿ç”¨ï¼Œå°†æŽ§ä»¶ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–æŽ§ä»¶éžå¸¸æ–¹ä¾¿å®žç”¨çš„ï¼Œä½ å¯ä»¥åˆ›å»ºé€šç”¨çš„æŽ§ä»¶ï¼Œä»¥å„ç§æ–¹å¼é‡å¤çš„ä½¿ç”¨ã€‚æœ€åŽï¼ŒMyScaffoldä½¿ç”¨Expandedï¼Œç”¨ä¸€ä¸ªä¸­å¿ƒæ–‡æœ¬æ¥å¡«å……å‰©ä½™çš„ç©ºé—´ã€‚ MyAppBaræŽ§ä»¶åˆ›å»ºäº†ä¸€ä¸ªContainer(å®¹å™¨)ï¼Œé«˜åº¦ä¸º56è®¾å¤‡æ— å…³åƒç´ (device-independent pixels)ï¼Œå†…éƒ¨å·¦å³å¡«å……8åƒç´ (pixels)ã€‚åœ¨å®¹å™¨å†…éƒ¨ï¼ŒMyAppBarä¸ºå­æŽ§ä»¶è®¾ç½®Row(æ°´å¹³)å¸ƒå±€ï¼Œä¸­é—´çš„titleæŽ§ä»¶è¢«è®¾ç½®æˆExpandedï¼ŒExpandedçš„ä½œç”¨æ˜¯å±•å¼€Rowã€Columnå’ŒFlexçš„å­æŽ§ä»¶ï¼Œæ„å‘³å®ƒå¯ä»¥ä½¿ç”¨å‰©ä½™çš„æ‰€æœ‰ç©ºé—´ã€‚ å…¶å®žä¸Šè¿°çš„åˆ†æžè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªå¯¹æŽ§ä»¶æ•°çš„ä¸€ä¸ªéåŽ†ï¼Œä»Žæ ¹æŽ§ä»¶åˆ°é‡Œé¢çš„å­æŽ§ä»¶ï¼ŒFlutterçš„è®¾è®¡ç†å¿µå°±æ˜¯ä¸€åˆ‡çš†ä¸ºæŽ§ä»¶ï¼Œç»„ä»¶å¥—ç»„å»ºã€‚è™½ç„¶ä¸Šè¿°ä»£ç ä¸æ˜¯javaï¼Œcç­‰ä¸»æµä»£ç ï¼Œä½†æ˜¯ç†è§£èµ·æ¥å´å¹¶ä¸æ˜¯éžå¸¸éš¾æ‡‚ï¼Œä¸Šæ‰‹éš¾åº¦ç¡®å®žä¸å¤§ï¼Œå€¼å¾—ä½“éªŒã€‚ æœ€åŽï¼ŒæŽ¨èä¸€äº›é“¾æŽ¥ï¼š Flutterå®˜ç½‘http://blog.csdn.net/column/details/13593.html) Flutterä¸­æ–‡å¼€å‘è€…è®ºå›]]></content>
      <categories>
        <category>Android</category>
        <category>Flutter</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Flutter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPé•¿è¿žæŽ¥è¯´æ˜Ž]]></title>
    <url>%2Fposts%2Fa8aa4c4c.html</url>
    <content type="text"><![CDATA[[HTTPåè®®ä¸ŽTCP/IPåè®®çš„å…³ç³»] [å¦‚ä½•ç†è§£HTTPåè®®æ˜¯æ— çŠ¶æ€çš„] ä»€ä¹ˆæ˜¯é•¿è¿žæŽ¥ã€çŸ­è¿žæŽ¥ï¼Ÿ [TCPè¿žæŽ¥] [TCPçŸ­è¿žæŽ¥] [TCPé•¿è¿žæŽ¥] [é•¿è¿žæŽ¥å’ŒçŸ­è¿žæŽ¥çš„ä¼˜ç‚¹å’Œç¼ºç‚¹] ç›®å‰è…¾è®¯äº‘è´Ÿè½½å‡è¡¡å¯¹ä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„HTTPé•¿è¿žæŽ¥é…ç½®ï¼Œå¯è®¾ç½®ä¸ºé»˜è®¤å€¼75sï¼Œç”¨æˆ·å¯å¯¹ä¸åŒçš„è´Ÿè½½å‡è¡¡å®žä¾‹è¿›è¡Œè‡ªå®šä¹‰é…ç½®ã€‚é‚£ä¹ˆï¼ŒHTTPé•¿è¿žæŽ¥ã€çŸ­è¿žæŽ¥ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ HTTPåè®®ä¸ŽTCP/IPåè®®çš„å…³ç³»HTTPçš„é•¿è¿žæŽ¥å’ŒçŸ­è¿žæŽ¥æœ¬è´¨ä¸Šæ˜¯TCPé•¿è¿žæŽ¥å’ŒçŸ­è¿žæŽ¥ã€‚HTTPå±žäºŽåº”ç”¨å±‚åè®®ï¼Œåœ¨ä¼ è¾“å±‚ä½¿ç”¨TCPåè®®ï¼Œåœ¨ç½‘ç»œå±‚ä½¿ç”¨IPåè®®ã€‚ IPåè®®ä¸»è¦è§£å†³ç½‘ç»œè·¯ç”±å’Œå¯»å€é—®é¢˜ï¼ŒTCPåè®®ä¸»è¦è§£å†³å¦‚ä½•åœ¨IPå±‚ä¹‹ä¸Šå¯é åœ°ä¼ é€’æ•°æ®åŒ…ï¼Œä½¿å¾—ç½‘ç»œä¸ŠæŽ¥æ”¶ç«¯æ”¶åˆ°å‘é€ç«¯æ‰€å‘å‡ºçš„æ‰€æœ‰åŒ…ï¼Œå¹¶ä¸”é¡ºåºä¸Žå‘é€é¡ºåºä¸€è‡´ã€‚TCPåè®®æ˜¯å¯é çš„ã€é¢å‘è¿žæŽ¥çš„ã€‚ å¦‚ä½•ç†è§£HTTPåè®®æ˜¯æ— çŠ¶æ€çš„HTTPåè®®æ˜¯æ— çŠ¶æ€çš„ï¼ŒæŒ‡çš„æ˜¯åè®®å¯¹äºŽäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ï¼ŒæœåŠ¡å™¨ä¸çŸ¥é“å®¢æˆ·ç«¯æ˜¯ä»€ä¹ˆçŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰“å¼€ä¸€ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µå’Œä¸Šä¸€æ¬¡æ‰“å¼€è¿™ä¸ªæœåŠ¡å™¨ä¸Šçš„ç½‘é¡µä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ã€‚HTTPæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„é¢å‘è¿žæŽ¥çš„åè®®ï¼Œæ— çŠ¶æ€ä¸ä»£è¡¨HTTPä¸èƒ½ä¿æŒTCPè¿žæŽ¥ï¼Œæ›´ä¸èƒ½ä»£è¡¨HTTPä½¿ç”¨çš„æ˜¯UDPåè®®ï¼ˆæ— è¿žæŽ¥ï¼‰ã€‚ ä»€ä¹ˆæ˜¯é•¿è¿žæŽ¥ã€çŸ­è¿žæŽ¥ï¼Ÿåœ¨HTTP/1.0ä¸­é»˜è®¤ä½¿ç”¨çŸ­è¿žæŽ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æ¯è¿›è¡Œä¸€æ¬¡HTTPæ“ä½œï¼Œå°±å»ºç«‹ä¸€æ¬¡è¿žæŽ¥ï¼Œä»»åŠ¡ç»“æŸå°±ä¸­æ–­è¿žæŽ¥ã€‚å½“å®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®çš„æŸä¸ªHTMLæˆ–å…¶ä»–ç±»åž‹çš„Webé¡µä¸­åŒ…å«æœ‰å…¶ä»–çš„Webèµ„æºï¼ˆå¦‚JavaScriptæ–‡ä»¶ã€å›¾åƒæ–‡ä»¶ã€CSSæ–‡ä»¶ç­‰ï¼‰ï¼Œæ¯é‡åˆ°è¿™æ ·ä¸€ä¸ªWebèµ„æºï¼Œæµè§ˆå™¨å°±ä¼šé‡æ–°å»ºç«‹ä¸€ä¸ªHTTPä¼šè¯ã€‚ è€Œä»ŽHTTP/1.1èµ·ï¼Œé»˜è®¤ä½¿ç”¨é•¿è¿žæŽ¥ï¼Œç”¨ä»¥ä¿æŒè¿žæŽ¥ç‰¹æ€§ã€‚ä½¿ç”¨é•¿è¿žæŽ¥çš„HTTPåè®®ï¼Œä¼šåœ¨å“åº”å¤´åŠ å…¥è¿™è¡Œä»£ç ï¼š 1Connection:keep-alive åœ¨ä½¿ç”¨é•¿è¿žæŽ¥çš„æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç½‘é¡µæ‰“å¼€å®ŒæˆåŽï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ç”¨äºŽä¼ è¾“HTTPæ•°æ®çš„TCPè¿žæŽ¥ä¸ä¼šå…³é—­ï¼Œå®¢æˆ·ç«¯å†æ¬¡è®¿é—®è¿™ä¸ªæœåŠ¡å™¨æ—¶ï¼Œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸€æ¡å·²ç»å»ºç«‹çš„è¿žæŽ¥ã€‚Keep-Aliveä¸ä¼šæ°¸ä¹…ä¿æŒè¿žæŽ¥ï¼Œå®ƒæœ‰ä¸€ä¸ªä¿æŒæ—¶é—´ï¼Œå¯ä»¥åœ¨ä¸åŒçš„æœåŠ¡å™¨è½¯ä»¶ï¼ˆå¦‚Apacheï¼‰ä¸­è®¾å®šè¿™ä¸ªæ—¶é—´ã€‚å®žçŽ°é•¿è¿žæŽ¥éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ”¯æŒé•¿è¿žæŽ¥ã€‚ HTTPåè®®çš„é•¿è¿žæŽ¥å’ŒçŸ­è¿žæŽ¥ï¼Œå®žè´¨ä¸Šæ˜¯TCPåè®®çš„é•¿è¿žæŽ¥å’ŒçŸ­è¿žæŽ¥ã€‚ TCPè¿žæŽ¥å½“ç½‘ç»œé€šä¿¡æ—¶é‡‡ç”¨TCPåè®®æ—¶ï¼Œåœ¨çœŸæ­£çš„è¯»å†™æ“ä½œä¹‹å‰ï¼Œå®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨ç«¯ä¹‹é—´å¿…é¡»å»ºç«‹ä¸€ä¸ªè¿žæŽ¥ï¼Œå½“è¯»å†™æ“ä½œå®ŒæˆåŽï¼ŒåŒæ–¹ä¸å†éœ€è¦è¿™ä¸ªè¿žæŽ¥æ—¶å¯ä»¥é‡Šæ”¾è¿™ä¸ªè¿žæŽ¥ã€‚è¿žæŽ¥çš„å»ºç«‹ä¾é â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œè€Œé‡Šæ”¾åˆ™éœ€è¦â€œå››æ¬¡æ¡æ‰‹â€ï¼Œæ‰€ä»¥æ¯ä¸ªè¿žæŽ¥çš„å»ºç«‹éƒ½æ˜¯éœ€è¦èµ„æºæ¶ˆè€—å’Œæ—¶é—´æ¶ˆè€—çš„ã€‚ ç»å…¸çš„ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿žæŽ¥ç¤ºæ„å›¾ï¼š ç»å…¸çš„å››æ¬¡æ¡æ‰‹å…³é—­è¿žæŽ¥ç¤ºæ„å›¾ï¼š TCPçŸ­è¿žæŽ¥æ¨¡æ‹Ÿä¸€ä¸‹TCPçŸ­è¿žæŽ¥çš„æƒ…å†µï¼šclientå‘serverå‘èµ·è¿žæŽ¥è¯·æ±‚ï¼ŒserveræŽ¥åˆ°è¯·æ±‚ï¼Œç„¶åŽåŒæ–¹å»ºç«‹è¿žæŽ¥ã€‚clientå‘serverå‘é€æ¶ˆæ¯ï¼Œserverå›žåº”clientï¼Œç„¶åŽä¸€æ¬¡è¯·æ±‚å°±å®Œæˆäº†ã€‚è¿™æ—¶å€™åŒæ–¹ä»»æ„éƒ½å¯ä»¥å‘èµ·closeæ“ä½œï¼Œä¸è¿‡ä¸€èˆ¬éƒ½æ˜¯clientå…ˆå‘èµ·closeæ“ä½œã€‚ä¸Šè¿°å¯çŸ¥ï¼ŒçŸ­è¿žæŽ¥ä¸€èˆ¬åªä¼šåœ¨ client/serveré—´ä¼ é€’ä¸€æ¬¡è¯·æ±‚æ“ä½œã€‚ çŸ­è¿žæŽ¥çš„ä¼˜ç‚¹æ˜¯ï¼šç®¡ç†èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå­˜åœ¨çš„è¿žæŽ¥éƒ½æ˜¯æœ‰ç”¨çš„è¿žæŽ¥ï¼Œä¸éœ€è¦é¢å¤–çš„æŽ§åˆ¶æ‰‹æ®µã€‚ TCPé•¿è¿žæŽ¥æˆ‘ä»¬å†æ¨¡æ‹Ÿä¸€ä¸‹é•¿è¿žæŽ¥çš„æƒ…å†µï¼šclientå‘serverå‘èµ·è¿žæŽ¥ï¼ŒserveræŽ¥å—clientè¿žæŽ¥ï¼ŒåŒæ–¹å»ºç«‹è¿žæŽ¥ï¼Œclientä¸Žserverå®Œæˆä¸€æ¬¡è¯·æ±‚åŽï¼Œå®ƒä»¬ä¹‹é—´çš„è¿žæŽ¥å¹¶ä¸ä¼šä¸»åŠ¨å…³é—­ï¼ŒåŽç»­çš„è¯»å†™æ“ä½œä¼šç»§ç»­ä½¿ç”¨è¿™ä¸ªè¿žæŽ¥ã€‚ TCPçš„ä¿æ´»åŠŸèƒ½ä¸»è¦ä¸ºæœåŠ¡å™¨åº”ç”¨æä¾›ã€‚å¦‚æžœå®¢æˆ·ç«¯å·²ç»æ¶ˆå¤±è€Œè¿žæŽ¥æœªæ–­å¼€ï¼Œåˆ™ä¼šä½¿å¾—æœåŠ¡å™¨ä¸Šä¿ç•™ä¸€ä¸ªåŠå¼€æ”¾çš„è¿žæŽ¥ï¼Œè€ŒæœåŠ¡å™¨åˆåœ¨ç­‰å¾…æ¥è‡ªå®¢æˆ·ç«¯çš„æ•°æ®ï¼Œæ­¤æ—¶æœåŠ¡å™¨å°†æ°¸è¿œç­‰å¾…å®¢æˆ·ç«¯çš„æ•°æ®ã€‚ä¿æ´»åŠŸèƒ½å°±æ˜¯è¯•å›¾åœ¨æœåŠ¡ç«¯å™¨ç«¯æ£€æµ‹åˆ°è¿™ç§åŠå¼€æ”¾çš„è¿žæŽ¥ã€‚ å¦‚æžœä¸€ä¸ªç»™å®šçš„è¿žæŽ¥åœ¨ä¸¤å°æ—¶å†…æ²¡æœ‰ä»»ä½•åŠ¨ä½œï¼ŒæœåŠ¡å™¨å°±å‘å®¢æˆ·å‘é€ä¸€ä¸ªæŽ¢æµ‹æŠ¥æ–‡æ®µï¼Œæ ¹æ®å®¢æˆ·ç«¯ä¸»æœºå“åº”æŽ¢æµ‹4ä¸ªå®¢æˆ·ç«¯çŠ¶æ€ï¼š å®¢æˆ·ä¸»æœºä¾ç„¶æ­£å¸¸è¿è¡Œï¼Œä¸”æœåŠ¡å™¨å¯è¾¾ã€‚æ­¤æ—¶å®¢æˆ·çš„TCPå“åº”æ­£å¸¸ï¼ŒæœåŠ¡å™¨å°†ä¿æ´»å®šæ—¶å™¨å¤ä½ã€‚ å®¢æˆ·ä¸»æœºå·²ç»å´©æºƒï¼Œå¹¶ä¸”å…³é—­æˆ–è€…æ­£åœ¨é‡æ–°å¯åŠ¨ã€‚ä¸Šè¿°æƒ…å†µä¸‹å®¢æˆ·ç«¯éƒ½ä¸èƒ½å“åº”TCPã€‚æœåŠ¡ç«¯å°†æ— æ³•æ”¶åˆ°å®¢æˆ·ç«¯å¯¹æŽ¢æµ‹çš„å“åº”ã€‚æœåŠ¡å™¨æ€»å…±å‘é€10ä¸ªè¿™æ ·çš„æŽ¢æµ‹ï¼Œæ¯ä¸ªé—´éš”75ç§’ã€‚è‹¥æœåŠ¡å™¨æ²¡æœ‰æ”¶åˆ°ä»»ä½•ä¸€ä¸ªå“åº”ï¼Œå®ƒå°±è®¤ä¸ºå®¢æˆ·ç«¯å·²ç»å…³é—­å¹¶ç»ˆæ­¢è¿žæŽ¥ã€‚ å®¢æˆ·ç«¯å´©æºƒå¹¶å·²ç»é‡æ–°å¯åŠ¨ã€‚æœåŠ¡å™¨å°†æ”¶åˆ°ä¸€ä¸ªå¯¹å…¶ä¿æ´»æŽ¢æµ‹çš„å“åº”ï¼Œè¿™ä¸ªå“åº”æ˜¯ä¸€ä¸ªå¤ä½ï¼Œä½¿å¾—æœåŠ¡å™¨ç»ˆæ­¢è¿™ä¸ªè¿žæŽ¥ã€‚ å®¢æˆ·æœºæ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯æœåŠ¡å™¨ä¸å¯è¾¾ã€‚è¿™ç§æƒ…å†µä¸Žç¬¬äºŒç§çŠ¶æ€ç±»ä¼¼ã€‚ é•¿è¿žæŽ¥å’ŒçŸ­è¿žæŽ¥çš„ä¼˜ç‚¹å’Œç¼ºç‚¹ç”±ä¸Šå¯ä»¥çœ‹å‡ºï¼Œé•¿è¿žæŽ¥å¯ä»¥çœåŽ»è¾ƒå¤šçš„TCPå»ºç«‹å’Œå…³é—­çš„æ“ä½œï¼Œå‡å°‘æµªè´¹ï¼ŒèŠ‚çº¦æ—¶é—´ã€‚å¯¹äºŽé¢‘ç¹è¯·æ±‚èµ„æºçš„å®¢æˆ·ç«¯é€‚åˆä½¿ç”¨é•¿è¿žæŽ¥ã€‚åœ¨é•¿è¿žæŽ¥çš„åº”ç”¨åœºæ™¯ä¸‹ï¼Œclientç«¯ä¸€èˆ¬ä¸ä¼šä¸»åŠ¨å…³é—­è¿žæŽ¥ï¼Œå½“clientä¸Žserverä¹‹é—´çš„è¿žæŽ¥ä¸€ç›´ä¸å…³é—­ï¼Œéšç€å®¢æˆ·ç«¯è¿žæŽ¥è¶Šæ¥è¶Šå¤šï¼Œserverä¼šä¿æŒè¿‡å¤šè¿žæŽ¥ã€‚è¿™æ—¶å€™serverç«¯éœ€è¦é‡‡å–ä¸€äº›ç­–ç•¥ï¼Œå¦‚å…³é—­ä¸€äº›é•¿æ—¶é—´æ²¡æœ‰è¯·æ±‚å‘ç”Ÿçš„è¿žæŽ¥ï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸€äº›æ¶æ„è¿žæŽ¥å¯¼è‡´serverç«¯æœåŠ¡å—æŸï¼›å¦‚æžœæ¡ä»¶å…è®¸åˆ™å¯ä»¥é™åˆ¶æ¯ä¸ªå®¢æˆ·ç«¯çš„æœ€å¤§é•¿è¿žæŽ¥æ•°ï¼Œè¿™æ ·å¯ä»¥å®Œå…¨é¿å…æ¶æ„çš„å®¢æˆ·ç«¯æ‹–åž®æ•´ä½“åŽç«¯æœåŠ¡ã€‚ çŸ­è¿žæŽ¥å¯¹äºŽæœåŠ¡å™¨æ¥è¯´ç®¡ç†è¾ƒä¸ºç®€å•ï¼Œå­˜åœ¨çš„è¿žæŽ¥éƒ½æ˜¯æœ‰ç”¨çš„è¿žæŽ¥ï¼Œä¸éœ€è¦é¢å¤–çš„æŽ§åˆ¶æ‰‹æ®µã€‚ä½†å¦‚æžœå®¢æˆ·è¯·æ±‚é¢‘ç¹ï¼Œå°†åœ¨TCPçš„å»ºç«‹å’Œå…³é—­æ“ä½œä¸Šæµªè´¹è¾ƒå¤šæ—¶é—´å’Œå¸¦å®½ã€‚ é•¿è¿žæŽ¥å’ŒçŸ­è¿žæŽ¥çš„äº§ç”Ÿåœ¨äºŽclientå’Œserveré‡‡å–çš„å…³é—­ç­–ç•¥ã€‚ä¸åŒçš„åº”ç”¨åœºæ™¯é€‚åˆé‡‡ç”¨ä¸åŒçš„ç­–ç•¥ã€‚ è½¬è‡ªè…¾è®¯äº‘ï¼šHTTPé•¿è¿žæŽ¥è¯´æ˜Ž]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
        <tag>HTTPé•¿è¿žæŽ¥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç§»åŠ¨Appç½‘ç»œä¼˜åŒ–æ¦‚è¿°]]></title>
    <url>%2Fposts%2F38627c74.html</url>
    <content type="text"><![CDATA[ä¸€èˆ¬å¼€å‘ä¸€ä¸ª APPï¼Œä¼šç›´æŽ¥è°ƒç”¨ç³»ç»Ÿæä¾›çš„ç½‘ç»œè¯·æ±‚æŽ¥å£åŽ»æœåŠ¡ç«¯è¯·æ±‚æ•°æ®ï¼Œå†é’ˆå¯¹è¿”å›žçš„æ•°æ®è¿›è¡Œä¸€äº›å¤„ç†ï¼Œæˆ–è€…ä½¿ç”¨AFNetworking/OKHttpè¿™æ ·çš„ç½‘ç»œåº“ï¼Œç®¡ç†å¥½è¯·æ±‚çº¿ç¨‹å’Œé˜Ÿåˆ—ï¼Œå†è‡ªåŠ¨åšä¸€äº›æ•°æ®è§£æžï¼Œå°±ç»“æŸäº†ã€‚ ä½†å¯¹äºŽä¸€äº›å¤§åž‹ APPï¼Œè¿˜ä¼šæƒ³é’ˆå¯¹ç½‘ç»œçš„ä¸€äº›é—®é¢˜è¿›è¡Œè¿›ä¸€æ­¥ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ï¼š é€Ÿåº¦ï¼šç½‘ç»œè¯·æ±‚çš„é€Ÿåº¦æ€Žæ ·èƒ½è¿›ä¸€æ­¥æå‡ï¼Ÿ å¼±ç½‘ï¼šç§»åŠ¨ç«¯ç½‘ç»œçŽ¯å¢ƒéšæ—¶å˜åŒ–ï¼Œç»å¸¸å‡ºçŽ°ç½‘ç»œè¿žæŽ¥å¾ˆä¸ç¨³å®šå¯ç”¨æ€§å·®çš„æƒ…å†µï¼Œæ€Žæ ·åœ¨è¿™ç§æƒ…å†µä¸‹æœ€å¤§é™åº¦æœ€å¿«åœ°æˆåŠŸè¯·æ±‚ï¼Ÿ å®‰å…¨ï¼šæ€Žæ ·é˜²æ­¢è¢«ç¬¬ä¸‰æ–¹çªƒå¬/ç¯¡æ”¹æˆ–å†’å……ï¼Œé˜²æ­¢è¿è¥å•†åŠ«æŒï¼ŒåŒæ—¶åˆä¸å½±å“æ€§èƒ½ï¼Ÿ å¯¹åŸºäºŽæµè§ˆå™¨çš„å‰ç«¯å¼€å‘æ¥è¯´ï¼Œç½‘ç»œè¿™å—èƒ½åšçš„äº‹æƒ…å¾ˆå°‘ï¼Œä½†å¯¹äºŽå®¢æˆ·ç«¯ APP æ¥è¯´ï¼Œæ•´ä¸ªç½‘ç»œè¯·æ±‚è¿‡ç¨‹æ˜¯è‡ªç”±æŽ§åˆ¶çš„ï¼Œå¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œå¾ˆå¤šå¤§åž‹ APP éƒ½é’ˆå¯¹è¿™ä¸‰ä¸ªé—®é¢˜åšäº†å¾ˆå¤šç½‘ç»œå±‚çš„ä¼˜åŒ–ï¼Œä¸€äº›æ–°çš„ç½‘ç»œå±‚åè®®åƒ HTTP2 / QUIC ä¹Ÿæ˜¯åœ¨è¿™äº›æ–¹é¢è¿›è¡Œäº†ä¸å°‘ä¼˜åŒ–ï¼Œåœ¨è¿™é‡Œè¾¹å­¦ä¹ è¾¹æ•´ç†ï¼Œå¤§è‡´åˆ—ä¸¾ä¸€ä¸‹å¸¸è§çš„åšæ³•ã€‚ é€Ÿåº¦æ­£å¸¸ä¸€æ¡ç½‘ç»œè¯·æ±‚éœ€è¦ç»è¿‡çš„æµç¨‹æ˜¯è¿™æ ·ï¼š DNS è§£æžï¼Œè¯·æ±‚DNSæœåŠ¡å™¨ï¼ŒèŽ·å–åŸŸåå¯¹åº”çš„ IP åœ°å€ã€‚ ä¸ŽæœåŠ¡ç«¯å»ºç«‹è¿žæŽ¥ï¼ŒåŒ…æ‹¬ tcp ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®‰å…¨åè®®åŒæ­¥æµç¨‹ã€‚ è¿žæŽ¥å»ºç«‹å®Œæˆï¼Œå‘é€å’ŒæŽ¥æ”¶æ•°æ®ï¼Œè§£ç æ•°æ®ã€‚ è¿™é‡Œæœ‰æ˜Žæ˜¾çš„ä¸‰ä¸ªä¼˜åŒ–ç‚¹ï¼š ç›´æŽ¥ä½¿ç”¨ IP åœ°å€ï¼ŒåŽ»é™¤ DNS è§£æžæ­¥éª¤ã€‚ ä¸è¦æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°å»ºç«‹è¿žæŽ¥ï¼Œå¤ç”¨è¿žæŽ¥æˆ–ä¸€ç›´ä½¿ç”¨åŒä¸€æ¡è¿žæŽ¥(é•¿è¿žæŽ¥)ã€‚ åŽ‹ç¼©æ•°æ®ï¼Œå‡å°ä¼ è¾“çš„æ•°æ®å¤§å°ã€‚ é€æ¡æ¥çœ‹èƒ½åšä»€ä¹ˆã€‚ 1.DNSDNS å®Œæ•´çš„è§£æžæµç¨‹å¾ˆé•¿ï¼Œä¼šå…ˆä»Žæœ¬åœ°ç³»ç»Ÿç¼“å­˜å–ï¼Œè‹¥æ²¡æœ‰å°±åˆ°æœ€è¿‘çš„ DNS æœåŠ¡å™¨å–ï¼Œè‹¥æ²¡æœ‰å†åˆ°ä¸»åŸŸåæœåŠ¡å™¨å–ï¼Œæ¯ä¸€å±‚éƒ½æœ‰ç¼“å­˜ï¼Œä½†ä¸ºäº†åŸŸåè§£æžçš„å®žæ—¶æ€§ï¼Œæ¯ä¸€å±‚ç¼“å­˜éƒ½æœ‰è¿‡æœŸæ—¶é—´ï¼Œè¿™ç§ DNS è§£æžæœºåˆ¶æœ‰å‡ ä¸ªç¼ºç‚¹ï¼š ç¼“å­˜æ—¶é—´è®¾ç½®å¾—é•¿ï¼ŒåŸŸåæ›´æ–°ä¸åŠæ—¶ï¼Œè®¾ç½®å¾—çŸ­ï¼Œå¤§é‡ DNS è§£æžè¯·æ±‚å½±å“è¯·æ±‚é€Ÿåº¦ã€‚ åŸŸååŠ«æŒï¼Œå®¹æ˜“è¢«ä¸­é—´äººæ”»å‡»ï¼Œæˆ–è¢«è¿è¥å•†åŠ«æŒï¼ŒæŠŠåŸŸåè§£æžåˆ°ç¬¬ä¸‰æ–¹ IP åœ°å€ï¼Œæ®ç»Ÿè®¡åŠ«æŒçŽ‡ä¼šè¾¾åˆ°7%ã€‚ DNS è§£æžè¿‡ç¨‹ä¸å—æŽ§åˆ¶ï¼Œæ— æ³•ä¿è¯è§£æžåˆ°æœ€å¿«çš„IP ä¸€æ¬¡è¯·æ±‚åªèƒ½è§£æžä¸€ä¸ªåŸŸåã€‚ ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå°±æœ‰äº† HTTPDNSï¼ŒåŽŸç†å¾ˆç®€å•ï¼Œå°±æ˜¯è‡ªå·±åšåŸŸåè§£æžçš„å·¥ä½œï¼Œé€šè¿‡ HTTP è¯·æ±‚åŽå°åŽ»æ‹¿åˆ°åŸŸåå¯¹åº”çš„ IP åœ°å€ï¼Œç›´æŽ¥è§£å†³ä¸Šè¿°æ‰€æœ‰é—®é¢˜ï¼š åŸŸåè§£æžä¸Žè¯·æ±‚åˆ†ç¦»ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ç›´æŽ¥ç”¨IPåœ°å€ï¼Œæ— éœ€ DNS è§£æžï¼ŒAPP å®šæ—¶è¯·æ±‚ HTTPDNS æœåŠ¡å™¨æ›´æ–°IPåœ°å€å³å¯ã€‚ é€šè¿‡ç­¾åç­‰æ–¹å¼ï¼Œä¿è¯ HTTPDNS è¯·æ±‚çš„å®‰å…¨ï¼Œé¿å…è¢«åŠ«æŒã€‚ DNS è§£æžç”±è‡ªå·±æŽ§åˆ¶ï¼Œå¯ä»¥ç¡®ä¿æ ¹æ®ç”¨æˆ·æ‰€åœ¨åœ°è¿”å›žå°±è¿‘çš„ IP åœ°å€ï¼Œæˆ–æ ¹æ®å®¢æˆ·ç«¯æµ‹é€Ÿç»“æžœä½¿ç”¨é€Ÿåº¦æœ€å¿«çš„ IPã€‚ ä¸€æ¬¡è¯·æ±‚å¯ä»¥è§£æžå¤šä¸ªåŸŸåã€‚ å…¶ä½™ç»†èŠ‚å°±ä¸å¤šè¯´äº†ï¼ŒHTTPDNS ä¼˜ç‚¹è¿™ä¹ˆå¤šï¼Œå‡ ä¹Žæˆä¸ºä¸­å¤§åž‹ APP çš„æ ‡é…ã€‚è‡³æ­¤è§£å†³äº†ç¬¬ä¸€ä¸ªé—®é¢˜ â€” DNS è§£æžè€—æ—¶çš„é—®é¢˜ï¼Œé¡ºä¾¿æŠŠä¸€éƒ¨åˆ†å®‰å…¨é—®é¢˜ â€” DNS åŠ«æŒä¹Ÿè§£å†³äº†ã€‚ 2.è¿žæŽ¥ç¬¬äºŒä¸ªé—®é¢˜ï¼Œè¿žæŽ¥å»ºç«‹è€—æ—¶çš„é—®é¢˜ï¼Œè¿™é‡Œä¸»è¦çš„ä¼˜åŒ–æ€è·¯æ˜¯å¤ç”¨è¿žæŽ¥ï¼Œä¸ç”¨æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°å»ºç«‹è¿žæŽ¥ï¼Œå¦‚ä½•æ›´æœ‰æ•ˆçŽ‡åœ°å¤ç”¨è¿žæŽ¥ï¼Œå¯ä»¥è¯´æ˜¯ç½‘ç»œè¯·æ±‚é€Ÿåº¦ä¼˜åŒ–é‡Œæœ€ä¸»è¦çš„ç‚¹äº†ï¼Œå¹¶ä¸”è¿™é‡Œçš„ä¼˜åŒ–ä»åœ¨æ¼”è¿›è¿‡ç¨‹ä¸­ï¼Œå€¼å¾—äº†è§£ä¸‹ã€‚ keep-aliveHTTP åè®®é‡Œæœ‰ä¸ª keep-aliveï¼ŒHTTP1.1é»˜è®¤å¼€å¯ï¼Œä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†æ¯æ¬¡è¯·æ±‚éƒ½è¦è¿›è¡ŒTCPä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿žæŽ¥çš„è€—æ—¶ã€‚åŽŸç†æ˜¯è¯·æ±‚å®ŒæˆåŽä¸ç«‹å³é‡Šæ”¾è¿žæŽ¥ï¼Œè€Œæ˜¯æ”¾å…¥è¿žæŽ¥æ± ä¸­ï¼Œè‹¥è¿™æ—¶æœ‰å¦ä¸€ä¸ªè¯·æ±‚è¦å‘å‡ºï¼Œè¯·æ±‚çš„åŸŸåå’Œç«¯å£æ˜¯ä¸€æ ·çš„ï¼Œå°±ç›´æŽ¥æ‹¿å‡ºè¿žæŽ¥æ± ä¸­çš„è¿žæŽ¥è¿›è¡Œå‘é€å’ŒæŽ¥æ”¶æ•°æ®ï¼Œå°‘äº†å»ºç«‹è¿žæŽ¥çš„è€—æ—¶ã€‚ å®žé™…ä¸ŠçŽ°åœ¨æ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æµè§ˆå™¨éƒ½é»˜è®¤å¼€å¯äº†keep-aliveï¼Œå¯¹åŒä¸ªåŸŸåä¸ä¼šå†æœ‰æ¯å‘ä¸€ä¸ªè¯·æ±‚å°±è¿›è¡Œä¸€æ¬¡å»ºè¿žçš„æƒ…å†µï¼Œçº¯çŸ­è¿žæŽ¥å·²ç»ä¸å­˜åœ¨äº†ã€‚ä½†æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¿™ä¸ª keep-alive çš„è¿žæŽ¥ä¸€æ¬¡åªèƒ½å‘é€æŽ¥æ”¶ä¸€ä¸ªè¯·æ±‚ï¼Œåœ¨ä¸Šä¸€ä¸ªè¯·æ±‚å¤„ç†å®Œæˆä¹‹å‰ï¼Œæ— æ³•æŽ¥å—æ–°çš„è¯·æ±‚ã€‚è‹¥åŒæ—¶å‘èµ·å¤šä¸ªè¯·æ±‚ï¼Œå°±æœ‰ä¸¤ç§æƒ…å†µï¼š è‹¥ä¸²è¡Œå‘é€è¯·æ±‚ï¼Œå¯ä»¥ä¸€ç›´å¤ç”¨ä¸€ä¸ªè¿žæŽ¥ï¼Œä½†é€Ÿåº¦å¾ˆæ…¢ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½è¦ç­‰å¾…ä¸Šä¸ªè¯·æ±‚å®Œæˆå†è¿›è¡Œå‘é€ã€‚ è‹¥å¹¶è¡Œå‘é€è¿™äº›è¯·æ±‚ï¼Œé‚£ä¹ˆé¦–æ¬¡æ¯ä¸ªè¯·æ±‚éƒ½è¦è¿›è¡Œtcpä¸‰æ¬¡æ¡æ‰‹å»ºç«‹æ–°çš„è¿žæŽ¥ï¼Œè™½ç„¶ç¬¬äºŒæ¬¡å¯ä»¥å¤ç”¨è¿žæŽ¥æ± é‡Œè¿™å †è¿žæŽ¥ï¼Œä½†è‹¥è¿žæŽ¥æ± é‡Œä¿æŒçš„è¿žæŽ¥è¿‡å¤šï¼Œå¯¹æœåŠ¡ç«¯èµ„æºäº§ç”Ÿè¾ƒå¤§æµªè´¹ï¼Œè‹¥é™åˆ¶äº†ä¿æŒçš„è¿žæŽ¥æ•°ï¼Œå¹¶è¡Œè¯·æ±‚é‡Œè¶…å‡ºçš„è¿žæŽ¥ä»æ¯æ¬¡è¦å»ºè¿žã€‚ å¯¹è¿™ä¸ªé—®é¢˜ï¼Œæ–°ä¸€ä»£åè®® HTTP2 æå‡ºäº†å¤šè·¯å¤ç”¨åŽ»è§£å†³ã€‚ å¤šè·¯å¤ç”¨HTTP2 çš„å¤šè·¯å¤ç”¨æœºåˆ¶ä¸€æ ·æ˜¯å¤ç”¨è¿žæŽ¥ï¼Œä½†å®ƒå¤ç”¨çš„è¿™æ¡è¿žæŽ¥æ”¯æŒåŒæ—¶å¤„ç†å¤šæ¡è¯·æ±‚ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½å¯ä»¥å¹¶å‘åœ¨è¿™æ¡è¿žæŽ¥ä¸Šè¿›è¡Œï¼Œä¹Ÿå°±è§£å†³äº†ä¸Šé¢è¯´çš„å¹¶å‘è¯·æ±‚éœ€è¦å»ºç«‹å¤šæ¡è¿žæŽ¥å¸¦æ¥çš„é—®é¢˜ï¼Œç½‘ç»œä¸Šæœ‰å¼ å›¾å¯ä»¥è¾ƒå½¢è±¡åœ°è¡¨çŽ°è¿™ä¸ªè¿‡ç¨‹ï¼š ï¿¼ HTTP1.1çš„åè®®é‡Œï¼Œåœ¨ä¸€ä¸ªè¿žæŽ¥é‡Œä¼ é€æ•°æ®éƒ½æ˜¯ä¸²è¡Œé¡ºåºä¼ é€çš„ï¼Œå¿…é¡»ç­‰ä¸Šä¸€ä¸ªè¯·æ±‚å…¨éƒ¨å¤„ç†å®ŒåŽï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚æ‰èƒ½è¿›è¡Œå¤„ç†ï¼Œå¯¼è‡´è¿™äº›è¯·æ±‚æœŸé—´è¿™æ¡è¿žæŽ¥å¹¶ä¸æ˜¯æ»¡å¸¦å®½ä¼ è¾“çš„ï¼Œå³ä½¿æ˜¯HTTP1.1çš„pipeliningå¯ä»¥åŒæ—¶å‘é€å¤šä¸ªrequestï¼Œä½†responseä»æ˜¯æŒ‰è¯·æ±‚çš„é¡ºåºä¸²è¡Œè¿”å›žï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªè¯·æ±‚çš„responseç¨å¾®å¤§ä¸€ç‚¹æˆ–å‘ç”Ÿé”™è¯¯ï¼Œå°±ä¼šé˜»å¡žä½åŽé¢çš„è¯·æ±‚ã€‚ HTTP2 è¿™é‡Œçš„å¤šè·¯å¤ç”¨åè®®è§£å†³äº†è¿™äº›é—®é¢˜ï¼Œå®ƒæŠŠåœ¨è¿žæŽ¥é‡Œä¼ è¾“çš„æ•°æ®éƒ½å°è£…æˆä¸€ä¸ªä¸ªstreamï¼Œæ¯ä¸ªstreaméƒ½æœ‰æ ‡è¯†ï¼Œstreamçš„å‘é€å’ŒæŽ¥æ”¶å¯ä»¥æ˜¯ä¹±åºçš„ï¼Œä¸ä¾èµ–é¡ºåºï¼Œä¹Ÿå°±ä¸ä¼šæœ‰é˜»å¡žçš„é—®é¢˜ï¼ŒæŽ¥æ”¶ç«¯å¯ä»¥æ ¹æ®streamçš„æ ‡è¯†åŽ»åŒºåˆ†å±žäºŽå“ªä¸ªè¯·æ±‚ï¼Œå†è¿›è¡Œæ•°æ®æ‹¼æŽ¥ï¼Œå¾—åˆ°æœ€ç»ˆæ•°æ®ã€‚ è§£é‡Šä¸‹å¤šè·¯å¤ç”¨è¿™ä¸ªè¯ï¼Œå¤šè·¯å¯ä»¥è®¤ä¸ºæ˜¯å¤šä¸ªè¿žæŽ¥ï¼Œå¤šä¸ªæ“ä½œï¼Œå¤ç”¨å°±æ˜¯å­—é¢ä¸Šçš„æ„æ€ï¼Œå¤ç”¨ä¸€æ¡è¿žæŽ¥æˆ–ä¸€ä¸ªçº¿ç¨‹ã€‚HTTP2è¿™é‡Œæ˜¯è¿žæŽ¥çš„å¤šè·¯å¤ç”¨ï¼Œç½‘ç»œç›¸å…³çš„è¿˜æœ‰ä¸€ä¸ªI/Oçš„å¤šè·¯å¤ç”¨(select/epoll)ï¼ŒæŒ‡é€šè¿‡äº‹ä»¶é©±åŠ¨çš„æ–¹å¼è®©å¤šä¸ªç½‘ç»œè¯·æ±‚è¿”å›žçš„æ•°æ®åœ¨åŒä¸€æ¡çº¿ç¨‹é‡Œå®Œæˆè¯»å†™ã€‚ å®¢æˆ·ç«¯æ¥è¯´ï¼ŒiOS9 ä»¥ä¸Š NSURLSession åŽŸç”Ÿæ”¯æŒ HTTP2ï¼Œåªè¦æœåŠ¡ç«¯ä¹Ÿæ”¯æŒå°±å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼ŒAndroid çš„ okhttp3 ä»¥ä¸Šä¹Ÿæ”¯æŒäº† HTTP2ï¼Œå›½å†…ä¸€äº›å¤§åž‹ APP ä¼šè‡ªå»ºç½‘ç»œå±‚ï¼Œæ”¯æŒ HTTP2 çš„å¤šè·¯å¤ç”¨ï¼Œé¿å…ç³»ç»Ÿçš„é™åˆ¶ä»¥åŠæ ¹æ®è‡ªèº«ä¸šåŠ¡éœ€è¦å¢žåŠ ä¸€äº›ç‰¹æ€§ï¼Œä¾‹å¦‚å¾®ä¿¡çš„å¼€æºç½‘ç»œåº“ marsï¼Œåšåˆ°ä¸€æ¡é•¿è¿žæŽ¥å¤„ç†å¾®ä¿¡ä¸Šçš„å¤§éƒ¨åˆ†è¯·æ±‚ï¼Œå¤šè·¯å¤ç”¨çš„ç‰¹æ€§ä¸ŠåŸºæœ¬è·Ÿ HTTP2 ä¸€è‡´ã€‚ TCPé˜Ÿå¤´é˜»å¡žHTTP2 çš„å¤šè·¯å¤ç”¨çœ‹èµ·æ¥æ˜¯å®Œç¾Žçš„è§£å†³æ–¹æ¡ˆï¼Œä½†è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯é˜Ÿå¤´é˜»å¡žï¼Œè¿™æ˜¯å—é™äºŽ TCP åè®®ï¼ŒTCP åè®®ä¸ºäº†ä¿è¯æ•°æ®çš„å¯é æ€§ï¼Œè‹¥ä¼ è¾“è¿‡ç¨‹ä¸­ä¸€ä¸ª TCP åŒ…ä¸¢å¤±ï¼Œä¼šç­‰å¾…è¿™ä¸ªåŒ…é‡ä¼ åŽï¼Œæ‰ä¼šå¤„ç†åŽç»­çš„åŒ…ã€‚HTTP2çš„å¤šè·¯å¤ç”¨è®©æ‰€æœ‰è¯·æ±‚éƒ½åœ¨åŒä¸€æ¡è¿žæŽ¥è¿›è¡Œï¼Œä¸­é—´æœ‰ä¸€ä¸ªåŒ…ä¸¢å¤±ï¼Œå°±ä¼šé˜»å¡žç­‰å¾…é‡ä¼ ï¼Œæ‰€æœ‰è¯·æ±‚ä¹Ÿå°±è¢«é˜»å¡žäº†ã€‚ å¯¹äºŽè¿™ä¸ªé—®é¢˜ä¸æ”¹å˜ TCP åè®®å°±æ— æ³•ä¼˜åŒ–ï¼Œä½† TCP åè®®ä¾èµ–æ“ä½œç³»ç»Ÿå®žçŽ°ä»¥åŠéƒ¨åˆ†ç¡¬ä»¶çš„å®šåˆ¶ï¼Œæ”¹è¿›ç¼“æ…¢ï¼ŒäºŽæ˜¯ GOOGLE æå‡º QUIC åè®®ï¼Œç›¸å½“äºŽåœ¨ UDP åè®®ä¹‹ä¸Šå†å®šä¹‰ä¸€å¥—å¯é ä¼ è¾“åè®®ï¼Œè§£å†³ TCP çš„ä¸€äº›ç¼ºé™·ï¼ŒåŒ…æ‹¬é˜Ÿå¤´é˜»å¡žã€‚å…·ä½“è§£å†³åŽŸç†ç½‘ä¸Šèµ„æ–™è¾ƒå¤šï¼Œå¯ä»¥çœ‹çœ‹ã€‚ QUIC å¤„äºŽèµ·æ­¥é˜¶æ®µï¼Œå°‘æœ‰å®¢æˆ·ç«¯æŽ¥å…¥ï¼ŒQUIC åè®®ç›¸å¯¹äºŽ HTTP2 æœ€å¤§çš„ä¼˜åŠ¿æ˜¯å¯¹TCPé˜Ÿå¤´é˜»å¡žçš„è§£å†³ï¼Œå…¶ä»–çš„åƒå®‰å…¨æ¡æ‰‹ 0RTT / è¯ä¹¦åŽ‹ç¼©ç­‰ä¼˜åŒ– TLS1.3 å·²è·Ÿè¿›ï¼Œå¯ä»¥ç”¨äºŽ HTTP2ï¼Œå¹¶ä¸æ˜¯ç‹¬æœ‰ç‰¹æ€§ã€‚TCP é˜Ÿå¤´é˜»å¡žåœ¨ HTTP2 ä¸Šå¯¹æ€§èƒ½çš„å½±å“æœ‰å¤šå¤§ï¼Œåœ¨é€Ÿåº¦ä¸Š QUIC èƒ½å¸¦æ¥å¤šå¤§æå‡å¾…ç ”ç©¶ã€‚ 3.æ•°æ®ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œä¼ è¾“æ•°æ®å¤§å°çš„é—®é¢˜ã€‚æ•°æ®å¯¹è¯·æ±‚é€Ÿåº¦çš„å½±å“åˆ†ä¸¤æ–¹é¢ï¼Œä¸€æ˜¯åŽ‹ç¼©çŽ‡ï¼ŒäºŒæ˜¯è§£åŽ‹åºåˆ—åŒ–ååºåˆ—åŒ–çš„é€Ÿåº¦ã€‚ç›®å‰æœ€æµè¡Œçš„ä¸¤ç§æ•°æ®æ ¼å¼æ˜¯ json å’Œ protobufï¼Œjson æ˜¯å­—ç¬¦ä¸²ï¼Œprotobuf æ˜¯äºŒè¿›åˆ¶ï¼Œå³ä½¿ç”¨å„ç§åŽ‹ç¼©ç®—æ³•åŽ‹ç¼©åŽï¼Œprotobuf ä»ä¼šæ¯” json å°ï¼Œæ•°æ®é‡ä¸Š protobuf æœ‰ä¼˜åŠ¿ï¼Œåºåˆ—åŒ–é€Ÿåº¦ protobuf ä¹Ÿæœ‰ä¸€äº›ä¼˜åŠ¿ï¼Œè¿™ä¸¤è€…çš„å¯¹æ¯”å°±ä¸ç»†è¯´äº†ã€‚ åŽ‹ç¼©ç®—æ³•å¤šç§å¤šæ ·ï¼Œä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ï¼Œæœ€æ–°å‡ºçš„ Brotli å’ŒZ-standardå®žçŽ°äº†æ›´é«˜çš„åŽ‹ç¼©çŽ‡ï¼ŒZ-standard å¯ä»¥æ ¹æ®ä¸šåŠ¡æ•°æ®æ ·æœ¬è®­ç»ƒå‡ºé€‚åˆçš„å­—å…¸ï¼Œè¿›ä¸€æ­¥æé«˜åŽ‹ç¼©çŽ‡ï¼Œç›®å‰åŽ‹ç¼©çŽ‡è¡¨çŽ°æœ€å¥½çš„ç®—æ³•ã€‚ é™¤äº†ä¼ è¾“çš„ body æ•°æ®ï¼Œæ¯ä¸ªè¯·æ±‚ HTTP åè®®å¤´çš„æ•°æ®ä¹Ÿæ˜¯ä¸å¯å¿½è§†ï¼ŒHTTP2 é‡Œå¯¹ HTTP åè®®å¤´ä¹Ÿè¿›è¡Œäº†åŽ‹ç¼©ï¼ŒHTTP å¤´å¤§å¤šæ˜¯é‡å¤æ•°æ®ï¼Œå›ºå®šçš„å­—æ®µå¦‚ method å¯ä»¥ç”¨é™æ€å­—å…¸ï¼Œä¸å›ºå®šä½†å¤šä¸ªè¯·æ±‚é‡å¤çš„å­—æ®µä¾‹å¦‚ cookie ç”¨åŠ¨æ€å­—å…¸ï¼Œå¯ä»¥è¾¾åˆ°éžå¸¸é«˜çš„åŽ‹ç¼©çŽ‡ï¼Œè¿™é‡Œæœ‰è¯¦ç»†ä»‹ç»ã€‚ é€šè¿‡ HTTPDNSï¼Œè¿žæŽ¥å¤šè·¯å¤ç”¨ï¼Œæ›´å¥½çš„æ•°æ®åŽ‹ç¼©ç®—æ³•ï¼Œå¯ä»¥æŠŠç½‘ç»œè¯·æ±‚çš„é€Ÿåº¦ä¼˜åŒ–åˆ°è¾ƒä¸é”™çš„ç¨‹åº¦äº†ï¼ŒæŽ¥ä¸‹æ¥å†çœ‹çœ‹å¼±ç½‘å’Œå®‰å…¨ä¸Šå¯ä»¥åšçš„äº‹æƒ…ã€‚ å¼±ç½‘æ‰‹æœºæ— çº¿ç½‘ç»œçŽ¯å¢ƒä¸ç¨³å®šï¼Œé’ˆå¯¹å¼±ç½‘çš„ä¼˜åŒ–ï¼Œå¾®ä¿¡æœ‰è¾ƒå¤šå®žè·µå’Œåˆ†äº«ï¼ŒåŒ…æ‹¬ï¼š æå‡è¿žæŽ¥æˆåŠŸçŽ‡å¤åˆè¿žæŽ¥ï¼Œå»ºç«‹è¿žæŽ¥æ—¶ï¼Œé˜¶æ¢¯å¼å¹¶å‘è¿žæŽ¥ï¼Œå…¶ä¸­ä¸€æ¡è¿žé€šåŽå…¶ä»–è¿žæŽ¥éƒ½å…³é—­ã€‚è¿™ä¸ªæ–¹æ¡ˆç»“åˆä¸²è¡Œå’Œå¹¶å‘çš„ä¼˜åŠ¿ï¼Œæé«˜å¼±ç½‘ä¸‹çš„è¿žæŽ¥æˆåŠŸçŽ‡ï¼ŒåŒæ—¶åˆä¸ä¼šå¢žåŠ æœåŠ¡å™¨èµ„æºæ¶ˆè€—ï¼šï¿¼ åˆ¶å®šæœ€åˆé€‚çš„è¶…æ—¶æ—¶é—´å¯¹æ€»è¯»å†™è¶…æ—¶(ä»Žè¯·æ±‚åˆ°å“åº”çš„è¶…æ—¶)ã€é¦–åŒ…è¶…æ—¶ã€åŒ…åŒ…è¶…æ—¶(ä¸¤ä¸ªæ•°æ®æ®µä¹‹é—´çš„è¶…æ—¶)æ—¶é—´åˆ¶å®šä¸åŒçš„è®¡ç®—æ–¹æ¡ˆï¼ŒåŠ å¿«å¯¹è¶…æ—¶çš„åˆ¤æ–­ï¼Œå‡å°‘ç­‰å¾…æ—¶é—´ï¼Œå°½æ—©é‡è¯•ã€‚è¿™é‡Œçš„è¶…æ—¶æ—¶é—´è¿˜å¯ä»¥æ ¹æ®ç½‘ç»œçŠ¶æ€åŠ¨æ€è®¾å®šã€‚ è°ƒä¼˜TCPå‚æ•°ï¼Œä½¿ç”¨TCPä¼˜åŒ–ç®—æ³•ã€‚å¯¹æœåŠ¡ç«¯çš„TCPåè®®å‚æ•°è¿›è¡Œè°ƒä¼˜ï¼Œä»¥åŠå¼€å¯å„ç§ä¼˜åŒ–ç®—æ³•ï¼Œä½¿å¾—é€‚åˆä¸šåŠ¡ç‰¹æ€§å’Œç§»åŠ¨ç«¯ç½‘ç»œçŽ¯å¢ƒï¼ŒåŒ…æ‹¬RTOåˆå§‹å€¼ï¼Œæ··åˆæ…¢å¯åŠ¨ï¼ŒTLPï¼ŒF-RTOç­‰ã€‚ é’ˆå¯¹å¼±ç½‘çš„è¿™äº›ç»†è‡´ä¼˜åŒ–æœªæˆä¸ºæ ‡å‡†ï¼Œç³»ç»Ÿç½‘ç»œåº“æ²¡æœ‰å†…ç½®ï¼Œä¸è¿‡å‰ä¸¤ä¸ªå®¢æˆ·ç«¯ä¼˜åŒ–å¾®ä¿¡çš„å¼€æºç½‘ç»œåº“ mars æœ‰å®žçŽ°ï¼Œè‹¥æœ‰éœ€è¦å¯ä»¥ä½¿ç”¨ã€‚ å®‰å…¨æ ‡å‡†åè®® TLS ä¿è¯äº†ç½‘ç»œä¼ è¾“çš„å®‰å…¨ï¼Œå‰èº«æ˜¯ SSLï¼Œä¸æ–­åœ¨æ¼”è¿›ï¼Œç›®å‰æœ€æ–°æ˜¯ TLS1.3ã€‚å¸¸è§çš„ HTTPS å°±æ˜¯ HTTP åè®®åŠ ä¸Š TLS å®‰å…¨åè®®ã€‚ å®‰å…¨åè®®æ¦‚æ‹¬æ€§åœ°è¯´è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼š1.ä¿è¯å®‰å…¨ 2. é™ä½ŽåŠ å¯†æˆæœ¬ åœ¨ä¿è¯å®‰å…¨ä¸Šï¼š ä½¿ç”¨åŠ å¯†ç®—æ³•ç»„åˆå¯¹ä¼ è¾“æ•°æ®åŠ å¯†ï¼Œé¿å…è¢«çªƒå¬å’Œç¯¡æ”¹ã€‚ è®¤è¯å¯¹æ–¹èº«ä»½ï¼Œé¿å…è¢«ç¬¬ä¸‰æ–¹å†’å……ã€‚ åŠ å¯†ç®—æ³•ä¿æŒçµæ´»å¯æ›´æ–°ï¼Œé˜²æ­¢å®šæ­»ç®—æ³•è¢«ç ´è§£åŽæ— æ³•æ›´æ¢ï¼Œç¦ç”¨å·²è¢«ç ´è§£çš„ç®—æ³•ã€‚ é™ä½ŽåŠ å¯†æˆæœ¬ä¸Šï¼š ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•åŠ å¯†ä¼ è¾“æ•°æ®ï¼Œè§£å†³éžå¯¹ç§°åŠ å¯†ç®—æ³•çš„æ€§èƒ½ä½Žä»¥åŠé•¿åº¦é™åˆ¶é—®é¢˜ã€‚ ç¼“å­˜å®‰å…¨åè®®æ¡æ‰‹åŽçš„å¯†é’¥ç­‰æ•°æ®ï¼ŒåŠ å¿«ç¬¬äºŒæ¬¡å»ºè¿žçš„é€Ÿåº¦ã€‚ åŠ å¿«æ¡æ‰‹è¿‡ç¨‹ï¼š2RTT-&gt; 0RTTã€‚åŠ å¿«æ¡æ‰‹çš„æ€è·¯ï¼Œå°±æ˜¯åŽŸæœ¬å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éœ€è¦åå•†ä½¿ç”¨ä»€ä¹ˆç®—æ³•åŽæ‰èƒ½åŠ å¯†å‘é€æ•°æ®ï¼Œå˜æˆé€šè¿‡å†…ç½®çš„å…¬é’¥å’Œé»˜è®¤çš„ç®—æ³•ï¼Œåœ¨æ¡æ‰‹çš„åŒæ—¶å°±æŠŠæ•°æ®å‘å‡ºåŽ»ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦ç­‰å¾…æ¡æ‰‹å°±å¼€å§‹å‘é€æ•°æ®ï¼Œè¾¾åˆ°0RTTã€‚ è¿™äº›ç‚¹æ¶‰åŠçš„ç»†èŠ‚éžå¸¸å¤šï¼Œå¯¹ TLS çš„ä»‹ç»æœ‰ä¸€ç¯‡é›„æ–‡ï¼Œè¯´å¾—å¾ˆè¯¦ç»†ï¼Œåœ¨æ­¤æŽ¨èã€‚ ç›®å‰åŸºæœ¬ä¸»æµéƒ½æ”¯æŒ TLS1.2ï¼ŒiOS ç½‘ç»œåº“é»˜è®¤ä½¿ç”¨ TLS1.2ï¼ŒAndroid4.4 ä»¥ä¸Šæ”¯æŒ 1.2ã€‚TLS1.3 iOS è¿˜å¤„äºŽæµ‹è¯•é˜¶æ®µï¼ŒAndroid æœªæŸ¥åˆ°æ¶ˆæ¯ã€‚å¯¹äºŽæ™®é€š APPï¼Œåªè¦æ­£ç¡®é…ç½®è¯ä¹¦ï¼ŒTLS1.2 å·²ç»èƒ½ä¿è¯ä¼ è¾“å®‰å…¨ï¼Œåªæ˜¯åœ¨å»ºè¿žé€Ÿåº¦ä¸Šä¼šæœ‰æ‰€æŸè€—ï¼Œæœ‰ä¸€äº›å¤§åž‹ APP åƒå¾®ä¿¡å°±è‡ªè¡Œå®žçŽ°äº† TLS1.3 çš„éƒ¨åˆ†åè®®ï¼Œæ—©ä¸€æ­¥å…¨å¹³å°æ”¯æŒã€‚ æœ€åŽç½‘ç»œä¼˜åŒ–è¿™ä¸ªè¯é¢˜éžå¸¸åºžå¤§ï¼Œæœ¬æ–‡åªæ˜¯åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä»Žä¼˜åŒ–æ€è·¯ä¸Šåˆ—ä¸¾äº†ç›®å‰ä¸šç•Œå¸¸è§çš„ä¼˜åŒ–ç‚¹ï¼Œè¿˜æœ‰å¾ˆå¤šç»†èŠ‚å¾ˆå¤šæ›´æ·±å…¥çš„ä¼˜åŒ–æ²¡æ¶‰åŠåˆ°ï¼Œç½‘ç»œå±‚å®žè·µå¼€å‘ç»éªŒä¸è¶³ï¼Œè‹¥æœ‰é”™è¯¯æ¬¢è¿ŽæŒ‡å‡ºã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>ä¼˜åŒ–</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ç½‘ç»œä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…¬å¸Androidé¡¹ç›®æž¶æž„æ¼”è¿›]]></title>
    <url>%2Fposts%2F600a4740.html</url>
    <content type="text"><![CDATA[å…¥èŒZTCæŽ¥è¿‘ä¸¤å¹´ï¼Œå› ä¸ºä¸šåŠ¡ç¹é‡ï¼Œä»Žå…¥èŒå¼€å§‹ä¸€ç›´åœ¨åšä¸šåŠ¡ä¸Šçš„éœ€æ±‚ï¼Œé¡¹ç›®è¿˜æ˜¯MVCæ¨¡å¼å¼€å‘ï¼Œç”±æ­¤å¯è§å·¥ç¨‹çš„è€¦åˆåº¦æžé«˜ï¼Œä¹Ÿæ˜¯ä¼—å¤šåé”çš„ä¸šåŠ¡äº’ç›¸å…³è”å¯¼è‡´æœ€åˆå¼€å‘çš„æ—¶å€™æ²¡æœ‰å¾ˆå¥½çš„è®¾è®¡æž¶æž„ã€‚ç»è¿‡å¤§åŠå¹´çš„è¾¹é‡æž„é¡¹ç›®è¾¹åˆå¹¶è€é¡¹ç›®æ–°éœ€æ±‚çš„å¼€å‘ï¼Œè§è¯äº†å¼€å‘å›¢é˜Ÿä¸€è·¯èµ°æ¥çš„åŠªåŠ›ï¼ŒAndroidå›¢é˜Ÿä¹Ÿåœ¨è‡ªå·±é¢„æœŸçš„æƒ³æ³•ä¸­å‘å‰è¿ˆè¿›ã€‚ å‰è¨€åœ¨å…¬å¸çš„å‘å±•æ–¹å‘ä¸Šï¼Œç”±å•ä¸€çš„æ±‚èŒå¹³å°ï¼Œåˆ°äººè„‰ç¤¾äº¤ï¼Œé—®ç­”ç¤¾åŒºçš„æ‰©å±•ï¼Œè®©æˆ‘å¯Ÿè§‰åˆ°ç»„ä»¶åŒ–å¿…ç„¶æ˜¯æ­£ç¡®çš„æ¼”è¿›æ–¹å‘ã€‚åœ¨é¡¹ç›®gradleå‡çº§åˆ°3.xåŽï¼Œä¾èµ–éš”ç¦»çš„æ–°ç‰¹æ€§æ›´æ˜¯å¸®åŠ©æˆ‘å¯¹ç»„ä»¶åŒ–çš„æŽ¨è¿›å·¥ä½œã€‚ ç»„ä»¶åŒ–ä¼˜ç‚¹åœ¨çŽ°åœ¨çš„å¤§çŽ¯å¢ƒä¸‹ç»„ä»¶åŒ–çš„ä¼˜ç‚¹ç›¸ä¿¡å¤§å®¶éƒ½æ¯”è¾ƒç†Ÿæ‚‰ã€‚ é«˜å†…èšï¼Œä½Žè€¦åˆï¼Œä»£ç è¾¹ç•Œæ¸…æ™°ï¼Œæ¯ä¸€ä¸ªç»„ä»¶éƒ½å¯ä»¥æ‹†åˆ†å‡ºæ¥ç‹¬ç«‹è¿è¡Œ åŠŸèƒ½é›†ä¸­ï¼Œæ¯ä¸€ä¸ªç»„ä»¶è´Ÿè´£å±žäºŽè‡ªå·±ç»„ä»¶çš„å·¥ä½œï¼Œä¸å—å…¶ä»–ç»„ä»¶å½±å“ä¹Ÿä¸å½±å“å…¶ä»–ç»„ä»¶åŠŸèƒ½ æé«˜å¼€å‘æ•ˆçŽ‡ï¼Œæ¯ä¸ªç»„ä»¶å¯å•ç‹¬è°ƒè¯•ï¼Œä¿è¯ä»£ç è´¨é‡ å‡å°‘é‡å¤é€ è½®å­å’Œç»´æŠ¤å·¥ä½œé‡ åŠ å¿«ç¼–è¯‘é€Ÿåº¦ï¼Œæœ€ç†æƒ³çš„æƒ…å†µæ˜¯ï¼ŒAppå·¥ç¨‹ä»…ä»…æ˜¯ä¸€ä¸ªç©ºå£³ï¼Œç”¨äºŽåŠ è½½å„ä¸ªç»„ä»¶ ç»„ä»¶åŒ–æ–¹æ¡ˆçŽ°åœ¨GitHubä¸Šé¢æµè¡Œç€å„å¤§å®¶å…¬å¸å¼€æºçš„è·¯ç”±åº“ï¼Œä»–ä»¬åŸºæœ¬é‡‡ç”¨ç»„ä»¶åŒ–çš„æ–¹æ¡ˆæ˜¯ è¿™ä¸ªæ˜¯æ¯”è¾ƒé€šç”¨ç»„ä»¶åŒ–çš„ä¸€ä¸ªæ–¹å¼ï¼Œå½“ç„¶ä¸åŒåŽ‚æœ‰ç€ä¼šæ ¹æ®è‡ªå·±çš„å®žé™…æƒ…å†µè¿›è¡Œæ”¹é€ æµç¨‹ï¼Œä½†æ˜¯åŸºæœ¬å¤§åŒå°å¼‚ï¼Œæˆ‘ä»¬äº”èŠ±å…«é—¨è®¨è®ºå¾—æœ€å¤šçš„æ˜¯ä¸åŒä¸šåŠ¡ç»„ä»¶çš„è·¯ç”±é€šè®¯åè®®å°è£…ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªä¸ªä¸šåŠ¡ç»„ä»¶ç»†åŒ–æ‹†åˆ†ï¼Œä¸å¯èƒ½æœ€åŽæ˜¯äº’ç›¸ç›´æŽ¥ä¾èµ–ä½¿ç”¨å¯¼è‡´å„ç§æ··ä¹±å’Œè€¦åˆï¼Œæˆ‘ä»¬æ­¤æ—¶éœ€è¦çš„æ˜¯è·¯ç”±ï¼Œå®ƒå¸®æˆ‘ä»¬ç®¡ç†å„ä¸šåŠ¡ç»„ä»¶é—´æœ‰åºåœ°é€šè®¯ï¼Œè·¯ç”±é‡ç‚¹åˆ’ä¸€ä¸‹:äº‹ä»¶åˆ†å‘å’ŒåŠ¨æ€æ‹¦æˆªã€‚ æˆ‘ç¬¬ä¸€æœŸç»„ä»¶åŒ–çš„å·¥ä½œæ–¹å‘æ˜¯åŠŸèƒ½æ¨¡å—åŒ–ä¸Žä¸šåŠ¡ç»„ä»¶åŒ–ç›¸ç»“åˆã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬é¡¹ç›®æ˜¯ä¸€ç›´éµå¾ªç€æ¨¡å—åŒ–ï¼Œå¯¹åŠŸèƒ½çš„æ•´ç†æ¯”è¾ƒå¥½ï¼Œæˆ‘è¿™è¾¹ä¸å¯¹æ¯ä¸€ä¸ªä¸šåŠ¡è¿›è¡Œæ‹†åˆ†ç»„ä»¶åŒ–ï¼Œä¹Ÿå°±æ˜¯ä¸é‡‡ç”¨çŽ°å¾ˆçƒ­é—¨çš„è·¯ç”±é€šè®¯æ–¹å¼ï¼Œå› ä¸ºå¦‚æžœæˆ‘å°†é¡¹ç›®å¼„æˆå®Œå…¨ç»„ä»¶åŒ–ï¼Œæ˜¯è¿‡åº¦å°è£…äº†ï¼Œå¯¼è‡´å¼€å‘æˆæœ¬ä¸åè°ƒï¼Œç„¶è€Œç›®å‰æˆ‘ä»¬é¦–è¦å¤„ç†çš„é—®é¢˜æ˜¯ä¸šåŠ¡ç»„ä»¶å¤ç”¨é—®é¢˜ï¼Œæ‰€ä»¥é¿å…æˆ‘ä»¬é‡å¤é€ è½®å­ï¼Œæˆ‘ä»¬å…ˆå°†å’¨è¯¢ç»„ä»¶ã€æ”¯ä»˜ç»„ä»¶ã€å®šä½ç»„ä»¶ã€ç½‘ç»œè¯·æ±‚ç»„ä»¶ã€æŽ¨é€ç»„ä»¶è¿›è¡Œåˆ†ç¦»ï¼ŒåŒæ—¶ä¼˜åŒ–å°è£…å›¾ç‰‡åŠ è½½åº“ã€æ™®é€šå·¥å…·åº“ã€Bannerå·¥å…·åº“ã€å‹ç›Ÿç¬¬ä¸‰æ–¹åº“ã€å›¾ç‰‡é€‰æ‹©åº“ã€JSBridgeåº“ã€åœ°å›¾åº“ç­‰éžä¸šåŠ¡æ€§çš„åŸºç¡€åº“ã€‚ æ€»ç»“ç»„ä»¶åŒ–çš„æŽ¨è¿›å·¥ä½œï¼Œä»Žç®€å•çš„åˆ†ç¦»ä»£ç ï¼Œé‡Œé¢å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æ¢³ç†äº†é™ˆæ—§ä»£ç ï¼ŒåŠæ—¶æ•´ç†å¥½wikiã€‚åˆ°äº«å—é¢å‘è¿‡ç¨‹ã€é¢å‘å¯¹è±¡ã€é¢å‘æŽ¥å£ã€é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ä¹è¶£ã€‚ å±•æœ›åˆ°äº†æœ€åŽï¼Œè¿™æ¬¡ç»„ä»¶åŒ–æž„æž¶æ¼”è¿›ï¼Œåªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œå°±å¦‚ä¸€å¼€å§‹æ‰€è¯´çš„ï¼Œå°†æ¥ä¼šæœ‰ä¸€å¤©å¤šæ¬¾Appä¼šè¿›è¡Œæ•´åˆï¼Œæˆ‘ä¸ªäººæŽ¨èçš„æ˜¯é€šè¿‡æ’ä»¶åŒ–çš„æ–¹å¼åŠ è½½å¯¹åº”çš„ä¸šåŠ¡æ¨¡å—ï¼Œåœ¨å‰æ®µæ—¶é—´å®˜æ–¹æ‰€æŽ¨å‡ºçš„åŠ¨æ€åŒ–æ¡†æž¶Android App Bundlesæ›´é€‚åˆæœªæ¥çš„å‘å±•ã€‚å¦å¤–åœ¨æœªæ¥å¤§å‰ç«¯å®Œå…¨ä»‹å…¥å•†åŸŽæ—¥å¸¸å¼€å‘ï¼Œæž¶æž„è¿˜ä¼šç»§ç»­è¿›è¡Œè°ƒæ•´ã€‚ä»¥ä¸Šæ˜¯æˆ‘çš„ç®€å•æ€»ç»“å’Œå¯¹æ¨¡å—åŒ–çš„ä¸€äº›å°è¯•ï¼Œä¸è¶³ä¹‹å¤„è¿˜æœ›å¤§å®¶äº¤æµæŒ‡æ­£ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>ç»„ä»¶åŒ–</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ç»„ä»¶åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­JSBridgeçš„åŽŸç†ä¸Žå®žçŽ°]]></title>
    <url>%2Fposts%2F88a3890e.html</url>
    <content type="text"><![CDATA[Androidä¸­çš„JSBridgeæ˜¯H5ä¸ŽNativeé€šä¿¡çš„æ¡¥æ¢ï¼Œå…¶ä½œç”¨æ˜¯å®žçŽ°H5ä¸ŽNativeé—´çš„åŒå‘é€šä¿¡ã€‚è¦å®žçŽ°H5ä¸ŽNativeçš„åŒå‘é€šä¿¡ï¼Œè§£å†³å¦‚ä¸‹å››ä¸ªé—®é¢˜å³å¯ï¼š 1ã€Javaå¦‚ä½•è°ƒç”¨JavaScript 2ã€JavaScriptå¦‚ä½•è°ƒç”¨Java 3ã€æ–¹æ³•å‚æ•°ä»¥åŠå›žè°ƒå¦‚ä½•å¤„ç† 4ã€é€šä¿¡çš„æ•°æ®æ ¼å¼æ˜¯æ€Žä¹ˆæ ·çš„ ä¸‹é¢ä»Žä»¥ä¸Šé—®é¢˜ä¾æ¬¡å¼€å§‹è®¨è®º: 1ã€Javaå¦‚ä½•è°ƒç”¨JavaScriptåœ¨Android ä¸­ï¼ŒJavaä¸ŽJavaScriptçš„ä¸€åˆ‡äº¤äº’éƒ½æ˜¯ä¾æ‰˜äºŽWebViewçš„ã€‚å¯é€šè¿‡å¦‚ä¸‹æ–¹æ³•æ¥å®Œæˆï¼Œå…¶ä¸­functionï¼ˆï¼‰å³ä¸ºJavaScriptä»£ç ï¼Œæ¥å®žçŽ°ç›¸åº”çš„å…·ä½“H5å±‚åŠŸèƒ½ 1WebView.loadUrl("javascript:function()"); 2ã€JavaScriptå¦‚ä½•è°ƒç”¨Javaè¦å®žçŽ°åœ¨JavaScriptä¸­è°ƒç”¨Javaï¼Œå°±éœ€è¦åœ¨JavaScriptä¸­æœ‰è§¦å‘Javaæ–¹æ³•çš„å¯¹è±¡å’Œæ–¹æ³•ã€‚åœ¨JavaScriptä¸­ï¼Œå½“è°ƒç”¨windowå¯¹è±¡çš„promptæ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘Javaä¸­çš„WebChromeClientå¯¹è±¡çš„onJsPromptæ–¹æ³•ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨è¿™ä¸ªæœºåˆ¶æ¥å®žçŽ°jsè°ƒç”¨nativeçš„ä»£ç ã€‚ 3ã€æ–¹æ³•å‚æ•°ä»¥åŠå›žè°ƒå¤„ç†ä»»ä½•IPCé€šä¿¡éƒ½æ¶‰åŠåˆ°å‚æ•°åºåˆ—åŒ–çš„é—®é¢˜ï¼ŒåŒç†ï¼ŒJavaä¸ŽJavaScriptä¹‹é—´åªèƒ½ä¼ é€’åŸºç¡€ç±»åž‹ï¼ˆåŒ…æ‹¬åŸºæœ¬ç±»åž‹å’Œå­—ç¬¦ä¸²ï¼‰ï¼Œä¸åŒ…æ‹¬å…¶ä»–å¯¹è±¡æˆ–è€…å‡½æ•°ã€‚æ‰€ä»¥å¯ä»¥é‡‡ç”¨jsonæ ¼å¼æ¥ä¼ é€’æ•°æ®ã€‚JavaScriptä¸ŽJavaç›¸äº’è°ƒç”¨ä¸èƒ½ç›´æŽ¥èŽ·å–è¿”å›žå€¼ï¼Œåªèƒ½é€šè¿‡å›žè°ƒçš„æ–¹å¼æ¥èŽ·å–è¿”å›žç»“æžœã€‚ 4ã€é€šä¿¡çš„æ•°æ®æ ¼å¼Javaä¸ŽJavaScripté€šä¿¡éœ€è¦éµå¾ªä¸€å®šçš„é€šä¿¡åè®®ï¼Œå¯ä»¥ä»¿ç…§HTTPSåè®®æ¥å°†æ­¤åè®®å®šä¹‰ä¸ºjsbridgeåè®®ï¼š 1jsbridge://className:port/methodName?jsonObj å½“jsè°ƒç”¨nativeåŠŸèƒ½æ—¶ï¼Œåº”å½“æŒ‡å®šnativeå±‚è¦å®ŒæˆæŸä¸ªåŠŸèƒ½è°ƒç”¨çš„ç±»åï¼ˆclassNameï¼‰å’Œæ–¹æ³•åï¼ˆmethodNameï¼‰ï¼Œä»¥åŠjsä¼ é€’è¿‡æ¥çš„å‚æ•°ï¼ˆjsonObjï¼‰ã€‚portå€¼æ˜¯æŒ‡å½“nativeéœ€è¦å°†æ“ä½œç»“æžœè¿”å›žç»™jsæ—¶ï¼Œåœ¨jsä¸­å®šä¹‰ä¸€ä¸ªcallbackï¼Œå¹¶å°†è¿™ä¸ªcallbackå­˜å‚¨åœ¨æŒ‡å®šçš„ä½ç½®ä¸Šï¼Œè¿™ä¸ªportå°±å®šä¹‰äº†callbackçš„å­˜å‚¨ä½ç½®ã€‚ JSBridgeçš„å…·ä½“å·¥ä½œæµç¨‹å›¾å¦‚ä¸Šæ‰€ç¤ºï¼š1ã€jsè§¦å‘è°ƒç”¨nativeå±‚çš„è¡Œä¸º 1JSBridge.call(className, methodName, params, callback); å°†callæ–¹æ³•ä¸­çš„å‚æ•°ç»„åˆæˆjsbridgeåè®®æ ¼å¼çš„urlã€‚ç„¶åŽé€šè¿‡promptæ–¹æ³•å°†urlä¼ é€’åˆ°nativeå±‚ã€‚ 1window.prompt(url); 2ã€é€šè¿‡WebChromeClientæ¥èŽ·å–jsä¼ é€’è¿‡æ¥çš„url. 1234567public class JSBridgeWebChromeClient extends WebChromeClient &#123; @Override public boolean onJsPrompt(WebView view, String url, String message, String defaultValue, JsPromptResult result) &#123; result.confirm(JSBridge.callJava(view, message)); return true; &#125;&#125; 3ã€JSBridgeç±»ç®¡ç†æš´éœ²ç»™å‰ç«¯æ–¹æ³•ï¼Œå‰ç«¯è°ƒç”¨çš„æ–¹æ³•åº”è¯¥åœ¨æ­¤ç±»ä¸­æ³¨å†Œæ‰å¯ä½¿ç”¨ã€‚registerçš„å®žçŽ°æ˜¯ä»ŽMapä¸­æŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åå°„å–å¾—å¯¹åº”classä¸­çš„æ‰€æœ‰æ–¹æ³•,å…·ä½“æ–¹æ³•æ˜¯åœ¨BridgeImplä¸­å®šä¹‰çš„ï¼Œæ–¹æ³•åŒ…æ‹¬ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºWebViewã€JSONObjectã€CallBackã€‚å¦‚æžœæ»¡è¶³æ¡ä»¶ï¼Œåˆ™å°†æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„æ–¹æ³•putåˆ°mapä¸­ã€‚ 12345678910private static Map&lt;String, HashMap&lt;String, Method&gt;&gt; exposedMethods = new HashMap&lt;&gt;();public static void register(String exposedName, Class&lt;? extends IBridge&gt; clazz) &#123; if (!exposedMethods.containsKey(exposedName)) &#123; try &#123; exposedMethods.put(exposedName, getAllMethod(clazz)); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125; JSBridgeç±»ä¸­çš„callJavaæ–¹æ³•å°±æ˜¯å°†jsä¼ é€’è¿‡æ¥çš„URLè§£æžï¼Œæ ¹æ®å°†è¦è°ƒç”¨çš„ç±»åä»Žåˆšåˆšå»ºç«‹çš„Mapä¸­æ‰¾å‡ºï¼Œæ ¹æ®æ–¹æ³•åè°ƒç”¨å…·ä½“çš„æ–¹æ³•ï¼Œå¹¶å°†è§£æžå‡ºçš„ä¸‰ä¸ªå‚æ•°ä¼ é€’è¿›åŽ»ã€‚ 123456789101112131415161718192021222324252627282930313233public static String callJava(WebView webView, String uriString) &#123; String methodName = ""; String className = ""; String param = "&#123;&#125;"; String port = ""; if (!TextUtils.isEmpty(uriString) &amp;&amp; uriString.startsWith("JSBridge")) &#123; Uri uri = Uri.parse(uriString); className = uri.getHost(); param = uri.getQuery(); port = uri.getPort() + ""; String path = uri.getPath(); if (!TextUtils.isEmpty(path)) &#123; methodName = path.replace("/", ""); &#125; &#125; if (exposedMethods.containsKey(className)) &#123; HashMap&lt;String, Method&gt; methodHashMap = exposedMethods.get(className); if (methodHashMap != null &amp;&amp; methodHashMap.size() != 0 &amp;&amp; methodHashMap.containsKey(methodName)) &#123; Method method = methodHashMap.get(methodName); if (method != null) &#123; try &#123; method.invoke(null, webView, new JSONObject(param), new Callback(webView, port)); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; return null; &#125; 4ã€CallBackç±»æ˜¯ç”¨æ¥å›žè°ƒjsä¸­å›žè°ƒæ–¹æ³•çš„Javaå¯¹åº”ç±»ã€‚Javaå±‚å¤„ç†å¥½çš„è¿”å›žç»“æžœæ˜¯é€šè¿‡CallBackç±»æ¥å®žçŽ°çš„ã€‚åœ¨è¿™ä¸ªå›žè°ƒç±»ä¸­ä¼ é€’çš„å‚æ•°æ˜¯JSONObjectï¼ˆè¿”å›žç»“æžœï¼‰ã€WebViewå’Œportï¼Œportåº”ä¸Žjsä¼ é€’è¿‡æ¥çš„portç›¸å¯¹åº”ã€‚ 1234567891011121314151617181920private static Handler mHandler = new Handler(Looper.getMainLooper()); private static final String CALLBACK_JS_FORMAT = "javascript:JSBridge.onFinish('%s', %s);"; private String mPort; private WeakReference&lt;WebView&gt; mWebViewRef; public Callback(WebView view, String port) &#123; mWebViewRef = new WeakReference&lt;&gt;(view); mPort = port; &#125; public void apply(JSONObject jsonObject) &#123; final String execJs = String.format(CALLBACK_JS_FORMAT, mPort, String.valueOf(jsonObject)); if (mWebViewRef != null &amp;&amp; mWebViewRef.get() != null) &#123; mHandler.post(new Runnable() &#123; @Override public void run() &#123; mWebViewRef.get().loadUrl(execJs); &#125; &#125;); &#125; &#125; 5ã€JSBridgeImplç±»ä¸­å®šä¹‰æ‰€æœ‰æš´éœ²ç»™å‰ç«¯çš„æ–¹æ³•çš„å…·ä½“å®žçŽ°ã€‚æœ¬æ–‡ä»¥showToastä¸ºä¾‹æ¥é€šè¿‡nativeä»£ç æ˜¾ç¤ºtoastï¼Œå¹¶ç»™å‡ºjsçš„å›žè°ƒå‡½æ•°ï¼Œè¿”å›žä¸€ä¸ªJSONObjectå¯¹è±¡ã€‚ 1234567891011121314public static void showToast(WebView webView, JSONObject param, final Callback callback) &#123; String message = param.optString("msg"); Toast.makeText(webView.getContext(), message, Toast.LENGTH_SHORT).show(); if (null != callback) &#123; try &#123; JSONObject object = new JSONObject(); object.put("key", "value"); object.put("key1", "value1"); callback.apply(getJSONObject(0, "ok", object)); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125; 6ã€åœ¨jsä¸­é€šè¿‡ 12JSBridge.call('bridge','showToast',&#123;'msg': 'Hello'&#125;, function(res)&#123;alert(JSON.stringi fy(res))&#125;)" å³å¯è°ƒç”¨åœ¨Javaå±‚å®šä¹‰çš„showToastæ–¹æ³•ï¼Œè°ƒç”¨å‰ä¸è¦å¿˜è®°åœ¨javaå±‚çš„JSBridgeä¸­æ³¨å†Œè¯¥æ–¹æ³•ã€‚ 1JSBridge.register("bridge", BridgeImpl.class); äºŒã€æ€»ç»“ï¼šJSBridgeçš„åŸºæœ¬åŽŸç†ä¸ºï¼šH5-&gt;é€šè¿‡æŸç§æ–¹å¼è§¦å‘ä¸€ä¸ªurl-&gt;Nativeæ•èŽ·åˆ°url,è¿›è¡Œåˆ†æž-&gt;åŽŸç”Ÿåšå¤„ç†-&gt;Nativeè°ƒç”¨H5çš„JSBridgeå¯¹è±¡ä¼ é€’å›žè°ƒã€‚å¦‚ä¸‹å›¾ ä¸‰ã€å®‰å…¨æ€§ï¼š Android4.2ä»¥ä¸‹ï¼ŒaddJavascriptInterfaceæ–¹æ³•æœ‰å®‰å…¨æ¼æ´žï¼Œjsä»£ç å¯ä»¥èŽ·å–åˆ°Javaå±‚çš„è¿è¡Œæ—¶å¯¹è±¡ï¼Œæ¥ä¼ªé€ å½“å‰ç”¨æˆ·æ‰§è¡Œæ¶æ„ä»£ç ã€‚ ios7ä»¥ä¸‹ï¼ŒJavaScriptæ— æ³•è°ƒç”¨nativeä»£ç ã€‚ é€šè¿‡jså£°æ˜Žçš„å¯¹è±¡ï¼Œæ˜¯é€šè¿‡loadUrlæ³¨å…¥åˆ°é¡µé¢ä¸­çš„ï¼Œæ‰€ä»¥è¿™ä¸ªå¯¹è±¡æ˜¯jså¯¹è±¡ï¼Œè€Œä¸æ˜¯Javaå¯¹è±¡ï¼Œæ²¡æœ‰getClassç­‰Objectæ–¹æ³•ï¼Œå› æ­¤ä¹Ÿæ— æ³•èŽ·å¾—Runtimeå¯¹è±¡ï¼Œé¿å…äº†æ¶æ„ä»£ç çš„æ³¨å…¥ã€‚ JSBridgeé‡‡ç”¨URLè§£æžçš„äº¤äº’æ–¹å¼ï¼Œæ˜¯ä¸€å¥—æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆï¼Œä¾¿äºŽæ‹“å±•ï¼Œæ— é‡å¤§å®‰å…¨æ€§é—®é¢˜ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Webview</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Webview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[127.0.0.1å’Œ0.0.0.0åœ°å€çš„åŒºåˆ«]]></title>
    <url>%2Fposts%2F21cd72b5.html</url>
    <content type="text"><![CDATA[1. é—®é¢˜å¼•å…¥ä¹‹å‰åœ¨ä½¿ç”¨tomcatçš„æ—¶å€™ï¼Œå¯åŠ¨tomcaté»˜è®¤éƒ½ä¼šç»‘å®šåˆ°127.0.0.1è¿™ä¸ªåœ°å€ï¼Œæœ€è¿‘åœ¨ä½¿ç”¨hexoå†™åšå®¢çš„æ—¶å€™å‘çŽ°é€šè¿‡ hexo serverå‘½ä»¤å¯åŠ¨æœåŠ¡çš„æ—¶å€™ç»‘å®šçš„ipåœ°å€æ˜¯0.0.0.0ã€‚é‚£ä¹ˆè¿™ä¸¤ä¸ªIPåœ°å€åˆ°åº•æœ‰ä»€ä¹ˆä¸åŒå‘¢? åœ¨è®²è§£ä¸¤ä¸ªåœ°å€çš„ä¸åŒä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›žé¡¾ä¸€ä¸‹IPåœ°å€çš„åŸºç¡€çŸ¥è¯†ã€‚ 2. IPåœ°å€åˆ†ç±»2.1 IPåœ°å€è¡¨ç¤ºIPåœ°å€ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼Œnet-idå’Œhost-idï¼Œå³ç½‘ç»œå·å’Œä¸»æœºå·ã€‚net-id:è¡¨ç¤ºipåœ°å€æ‰€åœ¨çš„ç½‘ç»œå·ã€‚host-idï¼šè¡¨ç¤ºipåœ°å€æ‰€åœ¨ç½‘ç»œä¸­çš„æŸä¸ªä¸»æœºå·ç ã€‚ å³ï¼š 1IP-address ::= &#123; &lt;Network-number&gt;, &lt;Host-number&gt; &#125; 2.2 IPåœ°å€åˆ†ç±»IPåœ°å€ä¸€å…±åˆ†ä¸º5ç±»ï¼Œå³Aï½žEï¼Œå®ƒä»¬åˆ†ç±»çš„ä¾æ®æ˜¯å…¶net-idæ‰€å çš„å­—èŠ‚é•¿åº¦ä»¥åŠç½‘ç»œå·å‰å‡ ä½ã€‚ Aç±»åœ°å€:ç½‘ç»œå·å 1ä¸ªå­—èŠ‚ã€‚ç½‘ç»œå·çš„ç¬¬ä¸€ä½å›ºå®šä¸º0ã€‚ Bç±»åœ°å€ï¼šç½‘ç»œå·å 2ä¸ªå­—èŠ‚ã€‚ç½‘ç»œå·çš„å‰ä¸¤ä½å›ºå®šä¸º10ã€‚ Cç±»åœ°å€ï¼šç½‘ç»œå·å 3ä¸ªå­—èŠ‚ã€‚ç½‘ç»œå·çš„å‰ä¸‰ä½å›ºå®šä½110ã€‚ Dç±»åœ°å€ï¼šå‰å››ä½æ˜¯1110ï¼Œç”¨äºŽå¤šæ’­(multicast)ï¼Œå³ä¸€å¯¹å¤šé€šä¿¡ã€‚ Eç±»åœ°å€ï¼šå‰å››ä½æ˜¯1111ï¼Œä¿ç•™ä¸ºä»¥åŽä½¿ç”¨ã€‚å…¶ä¸­ï¼ŒABCä¸‰ç±»åœ°å€ä¸ºå•æ’­åœ°å€ï¼ˆunicast),ç”¨äºŽä¸€å¯¹ä¸€é€šä¿¡ï¼Œæ˜¯æœ€å¸¸ç”¨çš„ã€‚ 2.3 ç‰¹æ®ŠIPåœ°å€ç‰¹æ®ŠIPåœ°å€å°±æ˜¯ç”¨æ¥åšä¸€äº›ç‰¹æ®Šçš„äº‹æƒ…ã€‚RFC1700ä¸­å®šä¹‰äº†ä»¥ä¸‹ç‰¹æ®ŠIPåœ°å€ã€‚ {0,0}:ç½‘ç»œå·å’Œä¸»æœºå·éƒ½å…¨éƒ¨ä¸º0ï¼Œè¡¨ç¤ºâ€œæœ¬ç½‘ç»œä¸Šçš„æœ¬ä¸»æœºâ€ï¼Œåªèƒ½ç”¨ä½œæºåœ°å€ã€‚ {0ï¼Œhost-id}:æœ¬ç½‘ç»œä¸Šçš„æŸå°ä¸»æœºã€‚åªèƒ½ç”¨ä½œæºåœ°å€ã€‚ {-1,-1}ï¼šè¡¨ç¤ºç½‘ç»œå·å’Œä¸»æœºå·çš„æ‰€æœ‰ä½ä¸Šéƒ½æ˜¯1ï¼ˆäºŒè¿›åˆ¶ï¼‰ï¼Œç”¨äºŽæœ¬ç½‘ç»œä¸Šçš„å¹¿æ’­ï¼Œåªèƒ½ç”¨ä½œç›®çš„åœ°å€ï¼Œå‘åˆ°è¯¥åœ°å€çš„æ•°æ®åŒ…ä¸èƒ½è½¬å‘åˆ°æºåœ°å€æ‰€åœ¨ç½‘ç»œä¹‹å¤–ã€‚ {net-id,-1}:ç›´æŽ¥å¹¿æ’­åˆ°æŒ‡å®šçš„ç½‘ç»œä¸Šã€‚åªèƒ½ç”¨ä½œç›®çš„åœ°å€ã€‚ {net-id,subnet-id,-1}:ç›´æŽ¥å¹¿æ’­åˆ°æŒ‡å®šç½‘ç»œçš„æŒ‡å®šå­ç½‘ç»œä¸Šã€‚åªç”¨ä½œç›®çš„åœ°å€ã€‚ {net-id,-1,-1}:ç›´æŽ¥å¹¿æ’­åˆ°æŒ‡å®šç½‘ç»œçš„æ‰€æœ‰å­ç½‘ç»œä¸Šã€‚åªèƒ½ç”¨ä½œç›®çš„åœ°å€ã€‚ {127ï¼Œ}:å³ç½‘ç»œå·ä¸º127çš„ä»»æ„ipåœ°å€ã€‚éƒ½æ˜¯å†…éƒ¨ä¸»æœºå›žçŽ¯åœ°å€(loopback),æ°¸è¿œéƒ½ä¸èƒ½å‡ºçŽ°åœ¨ä¸»æœºå¤–éƒ¨çš„ç½‘ç»œä¸­ã€‚ 3. é—®é¢˜è§£ç­”æŽ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¹‹å‰é—®è¿‡çš„é—®é¢˜ï¼š127.0.0.1å’Œ0.0.0.0åœ°å€çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å…±åŒç‚¹ï¼š éƒ½å±žäºŽç‰¹æ®Šåœ°å€ã€‚ éƒ½å±žäºŽAç±»åœ°å€ã€‚ éƒ½æ˜¯IPV4åœ°å€ã€‚ æŽ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«çœ‹ä¸‹è¿™ä¸¤ä¸ªåœ°å€ï¼š 0.0.0.0IPV4ä¸­ï¼Œ0.0.0.0åœ°å€è¢«ç”¨äºŽè¡¨ç¤ºä¸€ä¸ªæ— æ•ˆçš„ï¼ŒæœªçŸ¥çš„æˆ–è€…ä¸å¯ç”¨çš„ç›®æ ‡ã€‚ åœ¨æœåŠ¡å™¨ä¸­ï¼Œ0.0.0.0æŒ‡çš„æ˜¯æœ¬æœºä¸Šçš„æ‰€æœ‰IPV4åœ°å€ï¼Œå¦‚æžœä¸€ä¸ªä¸»æœºæœ‰ä¸¤ä¸ªIPåœ°å€ï¼Œ192.168.1.1 å’Œ 10.1.2.1ï¼Œå¹¶ä¸”è¯¥ä¸»æœºä¸Šçš„ä¸€ä¸ªæœåŠ¡ç›‘å¬çš„åœ°å€æ˜¯0.0.0.0,é‚£ä¹ˆé€šè¿‡ä¸¤ä¸ªipåœ°å€éƒ½èƒ½å¤Ÿè®¿é—®è¯¥æœåŠ¡ã€‚ åœ¨è·¯ç”±ä¸­ï¼Œ0.0.0.0è¡¨ç¤ºçš„æ˜¯é»˜è®¤è·¯ç”±ï¼Œå³å½“è·¯ç”±è¡¨ä¸­æ²¡æœ‰æ‰¾åˆ°å®Œå…¨åŒ¹é…çš„è·¯ç”±çš„æ—¶å€™æ‰€å¯¹åº”çš„è·¯ç”±ã€‚ ç”¨é€”æ€»ç»“ å½“ä¸€å°ä¸»æœºè¿˜æ²¡æœ‰è¢«åˆ†é…ä¸€ä¸ªIPåœ°å€çš„æ—¶å€™ï¼Œç”¨äºŽè¡¨ç¤ºä¸»æœºæœ¬èº«ã€‚ï¼ˆDHCPåˆ†é…IPåœ°å€çš„æ—¶å€™ï¼‰ ç”¨ä½œé»˜è®¤è·¯ç”±ï¼Œè¡¨ç¤ºâ€ä»»æ„IPV4ä¸»æœºâ€ã€‚ç”¨æ¥è¡¨ç¤ºç›®æ ‡æœºå™¨ä¸å¯ç”¨ã€‚ ç”¨ä½œæœåŠ¡ç«¯ï¼Œè¡¨ç¤ºæœ¬æœºä¸Šçš„ä»»æ„IPV4åœ°å€ã€‚ 127.0.0.1127.0.0.1å±žäºŽ{127,}é›†åˆä¸­çš„ä¸€ä¸ªï¼Œè€Œæ‰€æœ‰ç½‘ç»œå·ä¸º127çš„åœ°å€éƒ½è¢«ç§°ä¹‹ä¸ºå›žçŽ¯åœ°å€ï¼Œæ‰€ä»¥å›žçŽ¯åœ°å€ï¼=127.0.0.1,å®ƒä»¬æ˜¯åŒ…å«å…³ç³»ï¼Œå³å›žçŽ¯åœ°å€åŒ…å«127.0.0.1ã€‚å›žçŽ¯åœ°å€ï¼šæ‰€æœ‰å‘å¾€è¯¥ç±»åœ°å€çš„æ•°æ®åŒ…éƒ½åº”è¯¥è¢«loop backã€‚ ç”¨é€” å›žçŽ¯æµ‹è¯•,é€šè¿‡ä½¿ç”¨ping 127.0.0.1 æµ‹è¯•æŸå°æœºå™¨ä¸Šçš„ç½‘ç»œè®¾å¤‡ï¼Œæ“ä½œç³»ç»Ÿæˆ–è€…TCP/IPå®žçŽ°æ˜¯å¦å·¥ä½œæ­£å¸¸ã€‚ DDosæ”»å‡»é˜²å¾¡ï¼šç½‘ç«™æ”¶åˆ°DDosæ”»å‡»ä¹‹åŽï¼Œå°†åŸŸåAè®°å½•åˆ°127.0.0.1ï¼Œå³è®©æ”»å‡»è€…è‡ªå·±æ”»å‡»è‡ªå·±ã€‚ å¤§éƒ¨åˆ†Webå®¹å™¨æµ‹è¯•çš„æ—¶å€™ç»‘å®šçš„æœ¬æœºåœ°å€ã€‚ localhostç›¸æ¯”127.0.0.1ï¼Œlocalhostå…·æœ‰æ›´å¤šçš„æ„ä¹‰ã€‚localhostæ˜¯ä¸ªåŸŸåï¼Œè€Œä¸æ˜¯ä¸€ä¸ªipåœ°å€ã€‚ä¹‹æ‰€ä»¥æˆ‘ä»¬ç»å¸¸æŠŠlocalhostä¸Ž127.0.0.1è®¤ä¸ºæ˜¯åŒä¸€ä¸ªæ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„å¤§å¤šæ•°ç”µè„‘ä¸Šéƒ½è®²localhostæŒ‡å‘äº†127.0.0.1è¿™ä¸ªåœ°å€ã€‚åœ¨ubuntuç³»ç»Ÿä¸­ï¼Œ/ets/hostsæ–‡ä»¶ä¸­éƒ½ä¼šæœ‰å¦‚ä¸‹å†…å®¹ï¼š 1127.0.0.1 localhost127.0.1.1 jason-Lenovo-V3000# The following lines are desirable for IPv6 capable hosts::1 ip6-localhost ip6-loopbackfe00::0 ip6-localnetff00::0 ip6-mcastprefixff02::1 ip6-allnodesff02::2 ip6-allrouters ä¸Šé¢ç¬¬ä¸€è¡Œæ˜¯å‡ ä¹Žæ¯å°ç”µè„‘ä¸Šéƒ½ä¼šæœ‰çš„é»˜è®¤é…ç½®ã€‚ä½†æ˜¯localhostçš„æ„ä¹‰å¹¶ä¸å±€é™äºŽ127.0.0.1ã€‚ localhostæ˜¯ä¸€ä¸ªåŸŸåï¼Œç”¨äºŽæŒ‡ä»£this computeræˆ–è€…this host,å¯ä»¥ç”¨å®ƒæ¥èŽ·å–è¿è¡Œåœ¨æœ¬æœºä¸Šçš„ç½‘ç»œæœåŠ¡ã€‚åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œlocalhostè¢«æŒ‡å‘äº†IPV4çš„127.0.0.1å’ŒIPV6çš„::1ã€‚ 1127.0.0.1 localhost::1 localhost æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„ç¡®è®¤IPV4è¿˜æ˜¯IPV6 4. æ€»ç»“127.0.0.1 æ˜¯ä¸€ä¸ªçŽ¯å›žåœ°å€ã€‚å¹¶ä¸è¡¨ç¤ºâ€œæœ¬æœºâ€ã€‚0.0.0.0æ‰æ˜¯çœŸæ­£è¡¨ç¤ºâ€œæœ¬ç½‘ç»œä¸­çš„æœ¬æœºâ€ã€‚åœ¨å®žé™…åº”ç”¨ä¸­ï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨æœåŠ¡ç«¯ç»‘å®šç«¯å£çš„æ—¶å€™å¯ä»¥é€‰æ‹©ç»‘å®šåˆ°0.0.0.0ï¼Œè¿™æ ·æˆ‘çš„æœåŠ¡è®¿é—®æ–¹å°±å¯ä»¥é€šè¿‡æˆ‘çš„å¤šä¸ªipåœ°å€è®¿é—®æˆ‘çš„æœåŠ¡ã€‚ æ¯”å¦‚æˆ‘æœ‰ä¸€å°æœåŠ¡å™¨ï¼Œä¸€ä¸ªå¤–ç½‘åœ°å€A,ä¸€ä¸ªå†…ç½‘åœ°å€Bï¼Œå¦‚æžœæˆ‘ç»‘å®šçš„ç«¯å£æŒ‡å®šäº†0.0.0.0ï¼Œé‚£ä¹ˆé€šè¿‡å†…ç½‘åœ°å€æˆ–å¤–ç½‘åœ°å€éƒ½å¯ä»¥è®¿é—®æˆ‘çš„åº”ç”¨ã€‚ä½†æ˜¯å¦‚æžœæˆ‘åªç»‘å®šäº†å†…ç½‘åœ°å€ï¼Œé‚£ä¹ˆé€šè¿‡å¤–ç½‘åœ°å€å°±ä¸èƒ½è®¿é—®ã€‚æ‰€ä»¥å¦‚æžœç»‘å®š0.0.0.0,ä¹Ÿæœ‰ä¸€å®šå®‰å…¨éšæ‚£ï¼Œå¯¹äºŽåªéœ€è¦å†…ç½‘è®¿é—®çš„æœåŠ¡ï¼Œå¯ä»¥åªç»‘å®šå†…ç½‘åœ°å€ã€‚]]></content>
      <categories>
        <category>ç½‘ç»œ</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
        <tag>IP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gradle.propertiesæ–‡ä»¶ä½¿ç”¨]]></title>
    <url>%2Fposts%2Ffb76c4ba.html</url>
    <content type="text"><![CDATA[åœ¨ä¸€äº›é¡¹ç›®ä¸­ä¼šåˆ†æ‹†app å’Œ lib , è¿™æ—¶å€™å¼•ç”¨supportçš„æ—¶å€™,ä¸€æ—¦æ›´æ”¹ç‰ˆæœ¬ä¼šå‡ºçŽ°éœ€è¦åŒæ­¥æ›´æ”¹ä¸¤ä¸ªåœ°æ–¹çš„é—®é¢˜.è¿™ç§æƒ…å†µ,å¯ä»¥é€šè¿‡é…ç½®gradle.propertieså®žçŽ°æ›¿æ¢.åœ¨é¡¹ç›®ç¼–è¯‘è¿‡ç¨‹ä¸­,gradle.propertiesé…ç½®çš„å€¼ä¼šè¢«ç¼–è¯‘è§£æž,å…¶ä½œä¸ºé…ç½®æ–‡ä»¶ä½¿ç”¨æ˜¯å¾ˆæœ‰å¿…è¦çš„. 1. æ¦‚è¿°åœ¨Android Studio åˆ›å»ºä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼ŒProjectä¸‹é¢ä¼šç”Ÿæˆgradle.propertieså’Œlocal.propertiesæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾: 2. propertiesçš„æ•°æ®æ ¼å¼propertiesé‡Œé¢çš„æ•°æ®æ ¼å¼é‡‡ç”¨é”®å€¼å¯¹çš„æ–¹å¼ï¼Œå¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç§å†™æ³•: 12341. key=value 2. key:value 3. key :value 4. # ä½œä¸ºæ³¨é‡Š è¿™é‡Œä¸»è¦å‚è€ƒä»¥ä¸‹é“¾æŽ¥ï¼šhttps://docs.oracle.com/javase/8/docs/api/java/util/Properties.html*æ³¨æ„: *åœ¨Android Studio ä¸­æœ€å¥½ä½¿ç”¨ç¬¬ä¸€ç§å†™æ³•ï¼Œè¦ä¸ä¼šæœ‰è­¦å‘Š 3. å¦‚ä½•ä½¿ç”¨3.1 åœ¨é¡¹ç›®æ ¹ç›®å½•çš„gradle.propertiesæ–‡ä»¶é…ç½®:1234567891011121314151617# Project-wide Gradle settings.#æ·»åŠ ndkæ”¯æŒ(æŒ‰éœ€æ·»åŠ )android.useDeprecatedNdk=true# åº”ç”¨ç‰ˆæœ¬åç§°VERSION_NAME=1.0.0# åº”ç”¨ç‰ˆæœ¬å·VERSION_CODE=100# æ”¯æŒåº“ç‰ˆæœ¬SUPPORT_LIBRARY=24.2.1# MIN_SDK_VERSIONANDROID_BUILD_MIN_SDK_VERSION=14# TARGET_SDK_VERSIONANDROID_BUILD_TARGET_SDK_VERSION=24# BUILD_SDK_VERSIONANDROID_BUILD_SDK_VERSION=24# BUILD_TOOLS_VERSIONANDROID_BUILD_TOOLS_VERSION=24.0.3 3.2 è¿™æ—¶å€™é…ç½®appå’Œlibçš„build.gradleå¯ä»¥è¿™æ ·å†™:1234567891011121314151617181920212223android &#123; compileSdkVersion project.ANDROID_BUILD_SDK_VERSION as int buildToolsVersion project.ANDROID_BUILD_TOOLS_VERSION defaultConfig &#123; applicationId project.APPLICATION_ID // libé¡¹ç›®ä¸éœ€è¦é…ç½®è¿™ä¸€é¡¹ versionCode project.VERSION_CODE as int versionName project.VERSION_NAME minSdkVersion project.ANDROID_BUILD_MIN_SDK_VERSION as int targetSdkVersion project.ANDROID_BUILD_TARGET_SDK_VERSION as int &#125;&#125;dependencies &#123; compile fileTree(include: [&apos;*.jar&apos;], dir: &apos;libs&apos;) //è¿™é‡Œæ³¨æ„æ˜¯åŒå¼•å· compile &quot;com.android.support:appcompat-v7:$&#123;SUPPORT_LIBRARY&#125;&quot; compile &quot;com.android.support:design:$&#123;SUPPORT_LIBRARY&#125;&quot; compile &quot;com.android.support:recyclerview-v7:$&#123;SUPPORT_LIBRARY&#125;&quot; compile &quot;com.android.support:support-annotations:$&#123;SUPPORT_LIBRARY&#125;&quot; compile &quot;com.android.support:cardview-v7:$&#123;SUPPORT_LIBRARY&#125;&quot; compile &quot;com.android.support:support-v4:$&#123;SUPPORT_LIBRARY&#125;&quot;&#125; è¿™æ ·é…ç½®åŽ,å½“ä½ éœ€è¦å‡çº§ä½ çš„ç¼–è¯‘ç‰ˆæœ¬,ç‰ˆæœ¬å·,æ”¯æŒåº“ç­‰çš„æ—¶å€™,ä»…éœ€è¦ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•çš„gradle.propertiesæ–‡ä»¶å³å¯,æ˜¯ä¸æ˜¯åˆæ–¹ä¾¿äº†ä¸€ç‚¹ç‚¹?]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Unable to resolve dependency for ':trunk@debug/compileClasspath']]></title>
    <url>%2Fposts%2F4cae3fd9.html</url>
    <content type="text"><![CDATA[1234repositories &#123; google() jcenter() &#125; Go to File-&gt;Settings-&gt;Build, Execution, Deployment-&gt;Gradle-&gt;Uncheck Offline work option.]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä»£ç è§„èŒƒæŒ‡å—]]></title>
    <url>%2Fposts%2F89cc132f.html</url>
    <content type="text"><![CDATA[å‰è¨€ æ— è®ºä½ æ˜¯ä¸ªäººå¼€å‘è¿˜æ˜¯å›¢é˜Ÿï¼Œä¸€ä¸ªè‰¯å¥½çš„ä»£ç è§„èŒƒï¼Œèƒ½å¤Ÿåœ¨é¡¹ç›®å½“ä¸­å‘æŒ¥ä¸¾è¶³è½»é‡çš„ä½œç”¨ï¼›å®ƒä¸ä»…èƒ½ä½¿ä½ ä»¬çš„å¼€å‘æ›´åŠ é«˜æ•ˆï¼Œè€Œä¸”è¿˜ä¼šå‡å°‘BUGäº§ç”Ÿçš„å‡ çŽ‡ï¼Œå¢žå¼ºä»£ç å¯ç»´æŠ¤æ€§åŠç¨³å®šæ€§ã€‚ å…³äºŽè§„èŒƒï¼Œæˆ‘ä»¬åˆ†ä¸¤éƒ¨åˆ†æ¥è®²ï¼Œå› ä¸ºAndroidä¸»è¦æ˜¯ç”¨Javaè¯­è¨€æ¥å†™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åŒºåˆ«å¯¹å¾…ã€‚ JAVAä»£ç è§„èŒƒå¼ºåˆ¶æ€§è§„èŒƒ: ä»£ç ä¸­çš„å‘½åå‡ä¸èƒ½ä»¥ä¸‹åˆ’çº¿æˆ–ç¾Žå…ƒç¬¦å·å¼€å§‹ï¼Œä¹Ÿä¸èƒ½ä»¥ä¸‹åˆ’çº¿æˆ–ç¾Žå…ƒç¬¦å·ç»“æŸã€‚ ä»£ç ä¸­çš„å‘½åä¸¥ç¦ä½¿ç”¨æ‹¼éŸ³ä¸Žè‹±æ–‡æ··åˆçš„æ–¹å¼ï¼Œæ›´ä¸å…è®¸ç›´æŽ¥ä½¿ç”¨ä¸­æ–‡çš„æ–¹å¼ã€‚ ç±»åä½¿ç”¨UpperCamelCase é£Žæ ¼ï¼Œå¿…é¡»éµä»Žé©¼å³°å½¢å¼ã€‚ æ–¹æ³•åã€å‚æ•°åã€æˆå‘˜å˜é‡ã€å±€éƒ¨å˜é‡éƒ½ç»Ÿä¸€ä½¿ç”¨ lowerCamelCase é£Žæ ¼ï¼Œå¿…é¡»éµä»Žé©¼å³°å½¢å¼ã€‚ å¸¸é‡å‘½åå…¨éƒ¨å¤§å†™ï¼Œå•è¯é—´ç”¨ä¸‹åˆ’çº¿éš”å¼€ï¼ŒåŠ›æ±‚è¯­ä¹‰è¡¨è¾¾å®Œæ•´æ¸…æ¥šï¼Œä¸è¦å«Œåå­—é•¿ä¾‹å¦‚ï¼šMAX_STOCK_COUNTã€‚ æŠ½è±¡ç±»å‘½åä½¿ç”¨ Abstract æˆ– Base å¼€å¤´;å¼‚å¸¸ç±»å‘½åä½¿ç”¨ Exception ç»“å°¾;æµ‹è¯•ç±» å‘½åä»¥å®ƒè¦æµ‹è¯•çš„ç±»çš„åç§°å¼€å§‹ã€‚ æœç»ä¸è§„èŒƒçš„è‹±æ–‡ç¼©å†™ï¼šAbstractClass ç¼©å†™æˆAbsClassï¼›conditionç¼©å†™æˆcondi;æ­¤ç±»éšæ„ç¼©å†™ä¸¥é‡é™ä½Žäº†ä»£ç çš„å¯é˜…è¯»æ€§ã€‚ å¦‚æžœä½¿ç”¨åˆ°äº†è®¾è®¡æ¨¡å¼ï¼Œå»ºè®®åœ¨ç±»åä¸­ä½“çŽ°å‡ºå…·ä½“çš„æ¨¡å¼ï¼š å…³äºŽServiceæˆ–Daoå±‚çš„å‘½å 123public class ComponentFactorypublic class BufferStrategypublic class ScrollerProxy å®žä½“ç±»å¿…é¡»é‡è½½toString()æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥é€šè¿‡è°ƒç”¨å¯¹è±¡çš„toString()æ¥æŽ’æŸ¥é—®é¢˜ã€‚ Object çš„ equals æ–¹æ³•å®¹æ˜“æŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œåº”ä½¿ç”¨å¸¸é‡æˆ–ç¡®å®šæœ‰å€¼çš„å¯¹è±¡æ¥è°ƒç”¨ equalsã€‚ æ­£ä¾‹: â€œtestâ€.equals(object); åä¾‹: object.equals(â€œtestâ€); é¿å…é€šè¿‡ä¸€ä¸ªç±»çš„å¯¹è±¡å¼•ç”¨è®¿é—®æ­¤ç±»çš„é™æ€å˜é‡æˆ–é™æ€æ–¹æ³•ï¼Œæ— è°“å¢žåŠ ç¼–è¯‘å™¨è§£æžæˆæœ¬ï¼Œç›´æŽ¥ç”¨ç±»åæ¥è®¿é—®å³å¯ã€‚ æŽ¨èè§„èŒƒï¼š é›†åˆåˆå§‹åŒ–æ—¶ï¼Œå°½é‡æŒ‡å®šé›†åˆåˆå§‹å€¼å¤§å°ï¼› ArrayListå°½é‡ä½¿ç”¨ArrayList(int initialCapacity) åˆå§‹åŒ– ã€‚ ä½¿ç”¨ entrySet éåŽ† Map ç±»é›†åˆ KVï¼Œè€Œä¸æ˜¯ keySet æ–¹å¼è¿›è¡ŒéåŽ† è¯´æ˜Ž:keySet å…¶å®žæ˜¯éåŽ†äº† 2 æ¬¡ï¼Œä¸€æ¬¡æ˜¯è½¬ä¸º Iterator å¯¹è±¡ï¼Œå¦ä¸€æ¬¡æ˜¯ä»Ž hashMap ä¸­å–å‡º key æ‰€å¯¹åº”çš„ valueã€‚è€Œ entrySet åªæ˜¯éåŽ†äº†ä¸€æ¬¡å°±æŠŠ key å’Œ value éƒ½æ”¾åˆ°äº† entry ä¸­ï¼Œæ•ˆ çŽ‡æ›´é«˜ã€‚å¦‚æžœæ˜¯ JDK8ï¼Œä½¿ç”¨ Map.foreach æ–¹æ³•ã€‚ é«˜åº¦æ³¨æ„ Map ç±»é›†åˆ K/V èƒ½ä¸èƒ½å­˜å‚¨ null å€¼çš„æƒ…å†µï¼Œå¦‚ä¸‹è¡¨æ ¼: é›†åˆç±» Key Value Super è¯´æ˜Ž Hashtable ä¸å…è®¸ä¸ºnull ä¸å…è®¸ä¸ºnull Dictionary çº¿ç¨‹å®‰å…¨ ConcurrentHashMap ä¸å…è®¸ä¸ºnull ä¸å…è®¸ä¸ºnull AbstractMap åˆ†æ®µé”æŠ€æœ¯ TreeMap ä¸å…è®¸ä¸ºnull å…è®¸ä¸ºnull AbstractMap çº¿ç¨‹ä¸å®‰å…¨ HashMap å…è®¸ä¸ºnull å…è®¸ä¸ºnull AbstractMap çº¿ç¨‹ä¸å®‰å…¨ åˆ©ç”¨ Set å…ƒç´ å”¯ä¸€çš„ç‰¹æ€§ï¼Œå¯ä»¥å¿«é€Ÿå¯¹ä¸€ä¸ªé›†åˆè¿›è¡ŒåŽ»é‡æ“ä½œï¼Œé¿å…ä½¿ç”¨ List çš„ contains æ–¹æ³•è¿›è¡ŒéåŽ†ã€å¯¹æ¯”ã€åŽ»é‡æ“ä½œã€‚ é€šè¿‡åŒé‡æ£€æŸ¥é”(double-checked locking)(åœ¨å¹¶å‘åœºæ™¯)å®žçŽ°å»¶è¿Ÿåˆå§‹åŒ–çš„ä¼˜ åŒ–é—®é¢˜éšæ‚£(å¯å‚è€ƒ The â€œDouble-Checked Locking is Brokenâ€ Declaration),æŽ¨èé—®é¢˜ è§£å†³æ–¹æ¡ˆä¸­è¾ƒä¸ºç®€å•ä¸€ç§(é€‚ç”¨äºŽ JDK5 åŠä»¥ä¸Šç‰ˆæœ¬)ï¼Œå°†ç›®æ ‡å±žæ€§å£°æ˜Žä¸º volatile åž‹ã€‚ 1234567891011121314*åä¾‹*ï¼šclass Foo &#123; private Helper helper = null; public Helper getHelper() &#123; if (helper == null) synchronized(this) &#123; if (helper == null) helper = new Helper(); &#125; return helper; &#125; // other functions and members... &#125; Androidä»£ç è§„èŒƒä»£ç ï¼š Activity å‘½åä¸€å¾‹ä½¿ç”¨ æ¨¡å—å+Activity çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼ŒLoginActivityã€SignupActivityï¼› Fragment å‘½åä¸€å¾‹ä½¿ç”¨ æ¨¡å—å+Fragment çš„æ–¹å¼ï¼› è‡ªå®šä¹‰Viewï¼šCustom(å»ºè®®)+åŠŸèƒ½å+View/ViewGroup(å…·ä½“çš„ç»„ä»¶åç§°)ã€‚ä¾‹å¦‚ï¼šCustomImageScrollerã€CustomRatingBarã€‚ Widget å°ç»„ä»¶ï¼šScanWidgetã€WeatherWidgetã€‚ Dialogå¯¹è¯æ¡†ï¼šåŠŸèƒ½å+Dialogã€‚ä¾‹å¦‚ï¼šLoginDialogã€ProgressDialog å°½é‡åœ¨æ¯ä¸€ä¸ªActivityæˆ–ç±»ä¸­åŠ å…¥TAG,æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹Activityçš„ä¿¡æ¯ã€‚(Tip : ä½¿ç”¨Android Studioæä¾›çš„å¿«æ·é”®logtå¯å¿«é€Ÿç”Ÿæˆå½“å‰ ç±»çš„å¸¸é‡) å¯¹äºŽä½¿ç”¨Intentä¼ é€’æ•°æ®ï¼Œå£°æ˜Žä¸€äº›Keyçš„æ—¶å€™ï¼š EXTRA_KEY_+å…·ä½“Keyåç§°ï¼Œä¾‹å¦‚æˆ‘ä»¬çŽ°åœ¨æœ‰ä¸€ä¸ªäººçš„åå­—å’Œå¹´é¾„è¦ä¼ é‚£ä¹ˆé¦–å…ˆå®šä¹‰ï¼š 12public static final String EXTRA_KEY_PERSON_NAME=&quot;EXTRA_KEY_PERSON_NAME&quot;public static final String EXTRA_KEY_PERSON_AGE=&quot;EXTRA_KEY_PERSON_AGE&quot; ç„¶åŽåœ¨å…·ä½“çš„é¡µé¢ new Intent()ï¼Œä¾æ¬¡ä¼ é€’è¿›åŽ»å€¼ï¼Œè¿™æ ·å†™å…¶å®žæ²¡ä»€ä¹ˆé—®é¢˜ï¼›ä½†æ˜¯è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœä½ è¦è°ƒç”¨çš„Activityæ˜¯ç±»ä¼¼äºŽä¸€ä¸ªå·¥å…·æ€§è´¨æˆ–é€šç”¨çš„Activityï¼ˆå›¾ç‰‡é€‰æ‹©å™¨ã€ç™»å½•ã€æ³¨å†Œç­‰ç­‰ï¼‰ï¼Œè¿™æ—¶å€™ä½ è¦ä¼ é€’çš„keyåˆå¾ˆå¤šï¼Œå¦‚æžœä¸šåŠ¡å¤æ‚çš„è¯ï¼Œä½ åº”è¯¥ä¼šè¢«è¿™æ ·å†—ä½™ä¸”ä¸æ˜“é˜…è¯»çš„ä»£ç ç›´æŽ¥æžå´©æºƒæŽ‰ã€‚ æ‰€ä»¥æœ€å¥½çš„åŠžæ³•å°±æ˜¯åœ¨ä½ è¦è°ƒç”¨Activityæä¾›ä¸€ä¸ªé™æ€å·¥åŽ‚æ–¹æ³•ï¼Œè¦çŸ¥é“é™æ€å·¥åŽ‚æ–¹æ³•æ‰€å¸¦æ¥çš„å¥½å¤„å¤ªå¤šäº†ï¼Œç”±äºŽActivityæ˜¯ä¸å…è®¸é€šè¿‡newçš„æ–¹å¼æ¥åˆå§‹åŒ–çš„ï¼Œæ‰€ä»¥é™æ€å·¥åŽ‚æ–¹æ³•çš„å¥½å¤„åœ¨æ­¤å°±ä¸é‚£ä¹ˆæ˜Žæ˜¾ï¼Œä½†æ˜¯å·²ç»è¶³å¤Ÿæˆ‘ä»¬ä¼˜åŒ–æˆ‘ä»¬çš„ä»£ç äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç¬”è®° NoteActivityï¼Œç”¨äºŽåˆ›å»ºç¬”è®°å’Œä¿®æ”¹ç¬”è®°ï¼Œ 123456789101112131415161718192021222324//ç¬”è®°Idprivate static final String EXTRA_KEY_NOTE_ID =&quot;EXTRA_KEY_NOTE_ID&quot; ;//ç¬”è®°å†…å®¹private static final String EXTRA_KEY_NOTE_CONTENT =&quot;EXTRA_KEY_NOTE_CONTENT&quot; ;//ç¬”è®°æ¨¡å¼private static final String EXTRA_KEY_NOTE_MODE =&quot;EXTRA_KEY_NOTE_MODE&quot; ;//ç”¨äºŽåˆ›å»ºç¬”è®°public static void startForCreate(Context context, int noteId) &#123; start(context, noteId, null, MODE_CREATE);&#125; //ç”¨äºŽç¼–è¾‘ç¬”è®°public static void startForEdit(Context context, int noteId, String content) &#123; start(context, noteId, content, MODE_UPDATE);&#125;public static void start(Context context, int noteId, String content, int mode) &#123; Intent starter = new Intent(context, TableShareListSettingActivity.class); starter.putExtra(EXTRA_KEY_NOTE_ID,noteId); starter.putExtra(EXTRA_KEY_NOTE_CONTENT,content); starter.putExtra(EXTRA_KEY_NOTE_CONTENT,mode); context.startActivity(starter);&#125; é€šè¿‡ä»¥ä¸Šæ–¹æ³•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¾ˆå¥½çš„è§£è€¦å¤æ‚çš„Activityä¹‹é—´çš„è°ƒç”¨ï¼Œå†åŠ ä¸Šé™æ€æ–¹æ³•å·¥åŽ‚æ–¹æ³•åï¼Œä»£ç å¯é˜…è¯»è¡Œå¤§å¤§æé«˜ï¼Œæœ€ç»ˆæˆ‘ä»¬çœ‹åˆ°çš„è°ƒç”¨NoteActivityå°†ä¼šæ˜¯å¾ˆç®€æ´çš„ä¸€æ®µä»£ç ï¼š 12NoteActivity.startForCreate(this,noteId);NoteActivity.startForEdit(this,noteId,content); æ­¤å¤–ï¼ŒAndroid Studioå·¥å…·ä¸­å…¶å®žå·²ç»åœ¨Live Templateä¸­æä¾›äº†è¿™æ ·çš„ä»£ç :CMD+J( For MAC OS),ç®€å•çš„è¾“å…¥starterå°±å¯ä»¥å¿«é€Ÿåœ°åœ¨å½“å‰çš„Activityä¸­æ·»åŠ ä¸€ä¸ªIntentçš„é™æ€æ“ä½œæ–¹æ³•ï¼Œè¿™å…¶å®žä¹Ÿè¯´æ˜Žäº†Androidå®˜æ–¹å›¢é˜Ÿä¹Ÿé¼“åŠ±æˆ‘ä»¬è¿™ä¹ˆåšã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸€ä¸‹å­çœäº†å¥½å¤šä»£ç ï¼Œç®€ç›´å¤ªèµžäº†æœ‰æœ¨æœ‰ï¼ å¢žåŠ ç±»æ³¨é‡Šï¼Œä½¿ç”¨Android Studioçš„ File And Code Templateï¼š æ‰€æœ‰çš„å¸¸é‡åŠ ä¸Šæ³¨é‡Šï¼Œä¸”åŠŸèƒ½ç›¸åŒçš„æŽ’æ”¾åœ¨ä¸€èµ·ï¼Œä¸åŒçš„è¿›è¡Œæ¢è¡Œï¼› Activityä¸­å˜é‡é‡‡ç”¨må¼€å¤´+ç±»åã€‚ä¾‹å¦‚ï¼ŒmTableã€mPersonï¼› Activityä¸­çš„æŽ§ä»¶ï¼šm+æ¨¡å—å+æŽ§ä»¶ç±»åž‹åç§°ã€‚ä¾‹å¦‚ï¼ŒmLoginEditText,mLoginTextView; èµ„æºRes1.æŒ‰ç…§èµ„æºçš„ç±»åž‹ï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ ç§ æŽ§ä»¶Idå‘½åï¼šæŽ§ä»¶ç¼©å†™ _æ¨¡å—ï¼ˆmodule) _åŠŸèƒ½å(function) æŽ§ä»¶ç±»åž‹ IDå‘½åè§„åˆ™ TextView tv_module_function EditText et_module_function ImageView iv_module_function Button btn_module_function ListView lv_module_function GridView gv_module_function CheckBox check_module_function RadioButton radio_module_function LinearLayout ll_module_function RelativeLayout rl_module_function FrameLayout fl_module_function GridLayout gl_module_function Â·Â·Â· Â·Â·Â· Colorèµ„æºå‘½å Resources Type å‘½åè§„åˆ™ color ç»„ä»¶å+å…·ä½“ä½œç”¨åã€‚ä¾‹ R.color.button_text Stringèµ„æºå‘½å Resources Type å‘½åè§„åˆ™ string å…·ä½“åŠŸèƒ½ã€‚ ä¾‹ R.string.hello Drawableèµ„æºå‘½å Resources Type å‘½åè§„åˆ™ launcher icon ic_launcherã€‚ä¾‹R.drawable.ic_launcher normal icon ic_å…·ä½“æ¨¡å—_åŠŸèƒ½ã€‚ä¾‹R.drawable.ic_audio_pause Toolbar icon ic_ab_åŠŸèƒ½åã€‚ä¾‹å¦‚ic_ab_search selector selector_æ¨¡å—_åŠŸèƒ½åã€‚ä¾‹å¦‚ selector_login_button shape shape_æ¨¡å—åŠŸèƒ½åçŠ¶æ€ã€‚ä¾‹å¦‚ R.drawable.shape_login_button_normal Layoutèµ„æºå‘½å ç±»åž‹ å‘½åè§„åˆ™ activity activity_æ¨¡å—åã€‚ä¾‹å¦‚ R.layout.activity_login fragment fragment_æ¨¡å—åã€‚ä¾‹å¦‚ R.layout.fragment_login_layout_header include layout_æ¨¡å—å_åŠŸèƒ½åã€‚ä¾‹å¦‚ @layout/layout_login_bottom adapter adapter_item_æ¨¡å—å_åŠŸèƒ½åã€‚ä¾‹å¦‚ R.layout.adapter_item_simple_text dialog dialog_æ¨¡å—_åŠŸèƒ½åã€‚ä¾‹å¦‚ R.layout.dialog_time_picker list header header_æ¨¡å—_åŠŸèƒ½ã€‚ä¾‹å¦‚ R.layout.header_main_top_ad list footer footer_æ¨¡å—_åŠŸèƒ½ã€‚ä¾‹å¦‚ R.layout.footer_main_bottom_action widget widget_æ¨¡å—_åŠŸèƒ½ã€‚ä¾‹å¦‚ R.layout.widget_app_clock Â·Â·Â· Â·Â·Â· Menuèµ„æºå‘½å Resources Type å‘½åè§„åˆ™ menu menu_æ¨¡å—åã€‚ä¾‹å¦‚ menu_login Valuesèµ„æºå‘½å Resources Type å‘½åè§„åˆ™ color æ¨¡å—å_colorã€‚ä¾‹å¦‚ material_design_color dimens æ¨¡å—å_dimensã€‚ä¾‹å¦‚ material_design_dimens style æ¨¡å—å_styleã€‚ä¾‹å¦‚ material_design_style themes æ¨¡å—å_themesã€‚ä¾‹å¦‚ material_design_themes æ€»ç»“å…¶å®žä»£ç è§„èŒƒåªæ˜¯ä¸€ä¸ªGuidelineï¼Œæ²¡æœ‰è¯´éžè¦æŸä¸€ç§é£Žæ ¼æ¥ç¼–å†™ä»£ç ã€‚å¦‚æžœä½ çš„å›¢é˜Ÿæœ‰è‡ªå·±çš„ä¸€å¥—ä»£ç è§„èŒƒï¼Œç„¶åŽå¼€å‘ä¹Ÿå¾ˆé«˜æ•ˆï¼Œä»£ç ä¹Ÿå¾ˆå®¹æ˜“é˜…è¯»ä¸”å¯ç»´æŠ¤ï¼Œå°±å®Œå…¨å¯ä»¥æŒ‰ç…§è‡ªå·±çš„å›¢é˜Ÿçš„æŠ€æœ¯è§„èŒƒæ¥ã€‚æˆ‘æƒ³è¡¨è¾¾çš„æ˜¯ï¼Œåœ¨ç¼–å†™çš„ä»£ç çš„æ—¶å€™ï¼Œèƒ½æœ‰ä¸€ä¸ªGuidelineï¼ˆå‡†åˆ™ï¼‰æˆ–è€…è¯´æ˜¯ä¸€ä¸ªçº¦å®šï¼Œæˆ‘ä»¬å…±åŒéµå®ˆè¿™æ ·çš„çº¦å®šï¼Œæ¥è¾¾åˆ°æˆ‘ä¸€å¼€å§‹è¯´çš„ä»£ç è§„èŒƒæ€§æ‰€å¸¦æ¥çš„æ„ä¹‰ã€‚ æ­£æ‰€è°“ï¼Œâ€œç¦»å¨„ä¹‹æ˜Žï¼Œå…¬è¾“å­ä¹‹å·§ï¼Œä¸ä»¥è§„çŸ©ï¼Œä¸èƒ½æˆæ–¹åœ†ã€‚â€ å‚è€ƒèµ„æ–™é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œ]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç è§„èŒƒ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>ä»£ç è§„èŒƒ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾ç½®iPhoneæ¥ç”µé“ƒå£°]]></title>
    <url>%2Fposts%2Fb0d3dc9.html</url>
    <content type="text"><![CDATA[æ­¥éª¤ 1ä¿è¯ç”µè„‘ä¸Šæœ‰å¯ä»¥æ’­æ”¾çš„éŸ³ä¹ï¼Œæ‰¾åˆ°å–œæ¬¢çš„ä¸€é¦–æ­Œæ›²ï¼Œé¼ æ ‡å³å‡»ç”¨ iTunes æ‰“å¼€ï¼Œã€Œé€‰ä¸­æ­Œæ›²ã€Šæ•…ä¹¡ã€‹ã€â€”ã€Œå³é”®ã€â€”ã€Œæ­Œæ›²ä¿¡æ¯ã€ï¼Œå¦‚ä¸‹å›¾ï¼š ç‚¹å‡»ã€Œæ­Œæ›²ä¿¡æ¯ã€åŽï¼Œå‡ºçŽ°ä¸€ä¸ªå¼¹æ¡†ï¼Œç‚¹å‡»ã€Œé€‰é¡¹ã€ï¼Œå‹¾é€‰ã€Œåœæ­¢ã€ï¼Œå³è¾¹çš„è¾“å…¥æ¡†é‡Œé¢è¾“å…¥ 0:28ï¼Œå› ä¸ºé“ƒå£°å¿…é¡»æ˜¯40ç§’ä¹‹å†…çš„ï¼Œç„¶åŽç‚¹å‡»ã€Œå¥½ã€ï¼Œå¦‚å›¾ï¼š ï¼ˆPSï¼šå‡è®¾è¿™é¦–æ­Œçš„æ—¶é—´æ˜¯5:20ï¼Œä½ å¯ä»¥ä»»æ„è®¾ç½®æ’­æ”¾çš„æ—¶é—´æ®µï¼Œå‡å¦‚é«˜æ½®éƒ¨åˆ†æ˜¯1:32åˆ°2:05ï¼Œåˆ™å‹¾é€‰â€™å¼€å§‹â€™å¹¶è¾“å…¥1:32ï¼Œå‹¾é€‰â€™åœæ­¢â€™å¹¶è¾“å…¥2:05ï¼‰ æ­¥éª¤ 2è¿˜æ˜¯é€‰ä¸­æ­Œæ›²ã€Šæ•…ä¹¡ã€‹ï¼Œå³ä¸Šè§’ï¼Œä¾æ¬¡é€‰æ‹©ã€Œæ–‡ä»¶ã€â€”ã€Œè½¬æ¢ã€â€”ã€Œåˆ›å»º AAC ç‰ˆæœ¬ã€ï¼Œå¦‚å›¾ï¼š ç„¶åŽå¯èƒ½ä¼šå¬åˆ°ä¸€ä¸ªå£°éŸ³ï¼Œè¯´æ˜Žåˆ›å»ºæˆåŠŸï¼Œåœ¨åˆšåˆšé€‰ä¸­çš„æ­Œæ›²ã€Šæ•…ä¹¡ã€‹ä¸‹é¢ä¼šå¤šå‡ºä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ¥ï¼Œåªä¸è¿‡æ—¶é—´å˜æˆåˆšåˆšæˆ‘å¡«å†™çš„ï¼Œå¦‚å›¾ï¼š æ­¥éª¤ 3é€‰ä¸­æ—¶é—´è¾ƒçŸ­çš„ã€Šæ•…ä¹¡ã€‹ï¼Œå³é”®é€‰æ‹©ã€Œåœ¨ Finder ä¸­æ˜¾ç¤ºã€ï¼Œå¦‚å›¾ï¼š è¿™æ—¶å¯ä»¥çœ‹åˆ°æ•…ä¹¡.m4aè¿™æ ·ä¸€ä¸ªæ–‡ä»¶ï¼Œæ˜¯å¯ä»¥æ’­æ”¾çš„ï¼ŒæŠŠå®ƒå¤åˆ¶åˆ°æ¡Œé¢ä¸Šæ¥ã€‚é¼ æ ‡é€‰ä¸­æ¡Œé¢ä¸Šçš„æ•…ä¹¡.m4aï¼Œæ”¹ä¸ºæ•…ä¹¡.m4rï¼Œé€‰æ‹©ã€Œä½¿ç”¨ .m4rã€ï¼Œå¦‚å›¾ï¼š æ­¥éª¤ 4é€‰æ‹©ä½ çš„æ‰‹æœºï¼Œå¦‚å›¾ï¼š å‹¾é€‰ã€Œæ‰‹åŠ¨ç®¡ç†éŸ³ä¹å’Œè§†é¢‘ã€ï¼Œä¹‹åŽç‚¹å‡»ã€Œåº”ç”¨ã€ï¼Œç­‰å¾…å®Œæˆï¼Œå¦‚å›¾ï¼š æ­¥éª¤ 5åœ¨æ¡Œé¢ä¸ŠæŠŠæ•…ä¹¡.m4ræ­Œæ›²æ‹–åˆ°æ‰‹æœºä¸Šï¼Œå¦‚ä¸‹å›¾ï¼š è¿™æ—¶å€™å‘çŽ°æ‰‹æœºä¸‹çš„ã€Œé“ƒå£°ã€ç›®å½•ï¼Œä¼šå‡ºçŽ°åˆšåˆšçš„æ­Œæ›²ï¼Œå¦‚å›¾ï¼š ç»§ç»­é€‰æ‹©ä½ çš„æ‰‹æœºï¼Œç‚¹å‡»åŒæ­¥ï¼Œé™é™ç­‰å¾…å®Œæˆã€‚ åœ¨åŒæ­¥çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æžœå‡ºçŽ°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåˆ™è¯´æ˜Žè®¾ç½®çš„é“ƒå£°æ—¶é—´è¿‡é•¿ï¼Œåº”å½“åœ¨ 40s ä¹‹å†…ï¼š ç»“æŸåŒæ­¥å®ŒæˆåŽï¼Œç®—æ˜¯å¤§åŠŸå‘Šæˆäº†ï¼Œæ‹¿èµ·iPhoneï¼ŒæŒ‰é¡ºåº é€‰æ‹©ã€Œè®¾ç½®ã€â€”ã€Œå£°éŸ³ã€â€”ã€Œç”µè¯é“ƒå£°ã€ï¼Œæ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»ç»ˆäºŽæ¥äº†~ å¤§åŠŸå‘Šæˆ.png]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidViewçš„ç»˜åˆ¶æµç¨‹]]></title>
    <url>%2Fposts%2Fd94c207f.html</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸»è¦æ˜¯æ¢³ç† View ç»˜åˆ¶çš„æ•´ä½“æµç¨‹ï¼Œå¸®åŠ©å¼€å‘è€…å¯¹ View çš„ç»˜åˆ¶æœ‰ä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„ç†è§£ã€‚ æ•´ä½“æµç¨‹View ç»˜åˆ¶ä¸­ä¸»è¦æµç¨‹åˆ†ä¸ºmeasureï¼Œlayoutï¼Œ draw ä¸‰ä¸ªé˜¶æ®µã€‚ measure ï¼šæ ¹æ®çˆ¶ view ä¼ é€’çš„ MeasureSpec è¿›è¡Œè®¡ç®—å¤§å°ã€‚ layout ï¼šæ ¹æ® measure å­ View æ‰€å¾—åˆ°çš„å¸ƒå±€å¤§å°å’Œå¸ƒå±€å‚æ•°ï¼Œå°†å­Viewæ”¾åœ¨åˆé€‚çš„ä½ç½®ä¸Šã€‚ draw ï¼šæŠŠ View å¯¹è±¡ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚ é‚£ä¹ˆå‘èµ·ç»˜åˆ¶çš„å…¥å£åœ¨å“ªé‡Œå‘¢ï¼Ÿåœ¨ä»‹ç»å‘èµ·ç»˜åˆ¶çš„å…¥å£ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£Windowï¼ŒViewRootImplï¼ŒDecorViewä¹‹é—´çš„è”ç³»ã€‚ ä¸€ä¸ª Activity åŒ…å«ä¸€ä¸ªWindowï¼ŒWindowæ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œæ˜¯ Activity å’Œæ•´ä¸ª View ç³»ç»Ÿäº¤äº’çš„æŽ¥å£ï¼Œåªæœ‰ä¸€ä¸ªå­ç±»å®žçŽ°ç±»PhoneWindowï¼Œæä¾›äº†ä¸€ç³»åˆ—çª—å£çš„æ–¹æ³•ï¼Œæ¯”å¦‚è®¾ç½®èƒŒæ™¯ï¼Œæ ‡é¢˜ç­‰ã€‚ä¸€ä¸ªPhoneWindow å¯¹åº”ä¸€ä¸ª DecorView è·Ÿ ä¸€ä¸ª ViewRootImplï¼ŒDecorView æ˜¯ViewTree é‡Œé¢çš„é¡¶å±‚å¸ƒå±€ï¼Œæ˜¯ç»§æ‰¿äºŽFrameLayoutï¼ŒåŒ…å«ä¸¤ä¸ªå­Viewï¼Œä¸€ä¸ªid=statusBarBackground çš„ View å’Œ LineaLayoutï¼ŒLineaLayout é‡Œé¢åŒ…å« title è·Ÿ contentï¼Œtitleå°±æ˜¯å¹³æ—¶ç”¨çš„TitleBaræˆ–è€…ActionBarï¼Œcontentyä¹Ÿæ˜¯ FrameLayoutï¼Œactivityé€šè¿‡ setContentï¼ˆï¼‰åŠ è½½å¸ƒå±€çš„æ—¶å€™åŠ è½½åˆ°è¿™ä¸ªViewä¸Šã€‚ViewRootImpl å°±æ˜¯å»ºç«‹ DecorView å’Œ Window ä¹‹é—´çš„è”ç³»ã€‚ è¿™ä¸‰ä¸ªé˜¶æ®µçš„æ ¸å¿ƒå…¥å£æ˜¯åœ¨ ViewRootImpl ç±»çš„ performTraversals() æ–¹æ³•ä¸­ã€‚ 123456789101112private void performTraversals() &#123; ...... int childWidthMeasureSpec = getRootMeasureSpec(mWidth, lp.width); int childHeightMeasureSpec = getRootMeasureSpec(mHeight, lp.height); ...... mView.measure(childWidthMeasureSpec, childHeightMeasureSpec); ...... mView.layout(0, 0, mView.getMeasuredWidth(), mView.getMeasuredHeight()); ...... mView.draw(canvas); ...... &#125; åœ¨æºç ä¸­è¿™ä¸ªæ–¹æ³•è´¼é•¿ï¼Œä½†æ˜¯æ ¸å¿ƒè¿˜æ˜¯è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œå°±æ˜¯åˆ¤æ–­æ ¹æ®ä¹‹å‰çš„çŠ¶æ€åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–° measureï¼Œæ˜¯å¦éœ€è¦é‡æ–° layout ï¼Œæ˜¯å¦éœ€è¦é‡æ–° drawã€‚ measureSpeacåœ¨ä»‹ç» measure æ–¹æ³•ä¹‹å‰ï¼Œéœ€è¦äº†è§£ä¸€ä¸ªå¾ˆæ ¸å¿ƒçš„æ¦‚å¿µï¼šmeasureSpeac ã€‚åœ¨ Google å®˜æ–¹æ–‡æ¡£ä¸­æ˜¯è¿™ä¹ˆå®šä¹‰ measureSpeac çš„ A MeasureSpec encapsulates the layout requirements passed from parent to child. Each MeasureSpec represents a requirement for either the width or the height. A MeasureSpec is comprised of a size and a mode.å¤§æ¦‚æ„æ€æ˜¯ï¼šMeasureSpec å°è£…äº†ä»Žçˆ¶View ä¼ é€’ç»™åˆ°å­Viewçš„å¸ƒå±€éœ€æ±‚ã€‚æ¯ä¸ªMeasureSpecä»£è¡¨å®½åº¦æˆ–é«˜åº¦çš„è¦æ±‚ã€‚æ¯ä¸ªMeasureSpecéƒ½åŒ…å«äº†sizeï¼ˆå¤§å°ï¼‰å’Œmodeï¼ˆæ¨¡å¼ï¼‰ã€‚ æˆ‘è§‰å¾—è¿™æ˜¯measureSpeac æœ€å¥½çš„è§£é‡Šäº†ã€‚ åŽé¢ä¸¤å¥ä¸éš¾ç†è§£ã€‚MeasureSpec ä¸€ä¸ª32ä½äºŒè¿›åˆ¶çš„æ•´æ•°åž‹ï¼Œå‰é¢2ä½ä»£è¡¨çš„æ˜¯modeï¼ŒåŽé¢30ä½ä»£è¡¨çš„æ˜¯sizeã€‚mode ä¸»è¦åˆ†ä¸º3ç±»ï¼Œåˆ†åˆ«æ˜¯ EXACTLYï¼šçˆ¶å®¹å™¨å·²ç»æµ‹é‡å‡ºå­Viewçš„å¤§å°ã€‚å¯¹åº”æ˜¯ View çš„LayoutParamsçš„match_parent æˆ–è€…ç²¾ç¡®æ•°å€¼ã€‚ AT_MOSTï¼šçˆ¶å®¹å™¨å·²ç»é™åˆ¶å­viewçš„å¤§å°ï¼ŒView æœ€ç»ˆå¤§å°ä¸å¯è¶…è¿‡è¿™ä¸ªå€¼ã€‚å¯¹åº”æ˜¯ View çš„LayoutParamsçš„wrap_content UNSPECIFIEDï¼šçˆ¶å®¹å™¨ä¸å¯¹Viewæœ‰ä»»ä½•é™åˆ¶ï¼Œè¦å¤šå¤§ç»™å¤šå¤§ï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬ç”¨äºŽç³»ç»Ÿå†…éƒ¨ï¼Œè¡¨ç¤ºä¸€ç§æµ‹é‡çš„çŠ¶æ€ã€‚(è¿™ç§ä¸æ€Žä¹ˆå¸¸ç”¨ï¼Œä¸‹é¢åˆ†æžä¹Ÿä¼šç›´æŽ¥å¿½ç•¥è¿™ç§æƒ…å†µ) å°è£…äº†ä»Žçˆ¶ View ä¼ é€’ç»™åˆ°å­ View çš„å¸ƒå±€éœ€æ±‚ï¼Œè¿™å¥è¯åˆæ€Žä¹ˆç†è§£å‘¢ï¼Ÿ View çš„ MeasureSpec å¹¶ä¸æ˜¯çˆ¶ View ç‹¬è‡ªå†³å®šï¼Œå®ƒæ˜¯æ ¹æ®çˆ¶ view çš„MeasureSpecåŠ ä¸Šå­ View çš„è‡ªå·±çš„ LayoutParamsï¼Œé€šè¿‡ç›¸åº”çš„è§„åˆ™è½¬åŒ–ã€‚ çœ‹ä»£ç ï¼š View æµ‹é‡æµç¨‹æ˜¯çˆ¶ View å…ˆæµ‹é‡å­ Viewï¼Œç­‰å­ View æµ‹é‡å®Œäº†ï¼Œå†æ¥æµ‹é‡è‡ªå·±ã€‚åœ¨ViewGroup æµ‹é‡å­ View çš„å…¥å£å°±æ˜¯ measureChildWithMargins 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192protected void measureChildWithMargins(View child, int parentWidthMeasureSpec, int widthUsed, int parentHeightMeasureSpec, int heightUsed) &#123; //èŽ·å–å­Viewçš„LayoutParam final MarginLayoutParams lp = (MarginLayoutParams) child.getLayoutParams(); //é€šè¿‡çˆ¶Viewçš„MeasureSpecå’Œå­Viewçš„marginï¼Œçˆ¶Viewçš„paddingè®¡ç®—ï¼Œç®—å‡ºå­Viewçš„MeasureSpec final int childWidthMeasureSpec = getChildMeasureSpec(parentWidthMeasureSpec, mPaddingLeft + mPaddingRight + lp.leftMargin + lp.rightMargin + widthUsed, lp.width); final int childHeightMeasureSpec = getChildMeasureSpec(parentHeightMeasureSpec, mPaddingTop + mPaddingBottom + lp.topMargin + lp.bottomMargin + heightUsed, lp.height); //é€šè¿‡è®¡ç®—å‡ºæ¥çš„MeasureSpecï¼Œè®©å­Viewè‡ªå·±æµ‹é‡ã€‚ child.measure(childWidthMeasureSpec, childHeightMeasureSpec);&#125;public static int getChildMeasureSpec(int spec, int padding, int childDimension) &#123; int specMode = MeasureSpec.getMode(spec); int specSize = MeasureSpec.getSize(spec); //è®¡ç®—å­Viewçš„å¤§å° int size = Math.max(0, specSize - padding); int resultSize = 0; int resultMode = 0; switch (specMode) &#123; // çˆ¶Viewæ˜¯EXACTLYçš„ case MeasureSpec.EXACTLY: //å­Viewçš„widthæˆ–heightæ˜¯ä¸ªç²¾ç¡®å€¼,åˆ™sizeä¸ºç²¾ç¡®å€¼ï¼Œmodeä¸º EXACTLY if (childDimension &gt;= 0) &#123; resultSize = childDimension; resultMode = MeasureSpec.EXACTLY; //å­Viewçš„widthæˆ–heightæ˜¯MATCH_PARENT,åˆ™sizeä¸ºçˆ¶è§†å›¾å¤§å°ï¼Œmodeä¸º EXACTLY &#125; else if (childDimension == LayoutParams.MATCH_PARENT) &#123; // Child wants to be our size. So be it. resultSize = size; resultMode = MeasureSpec.EXACTLY; //å­Viewçš„widthæˆ–heightæ˜¯WRAP_CONTENT,åˆ™sizeä¸ºçˆ¶è§†å›¾å¤§å°ï¼Œmodeä¸º AT_MOST &#125; else if (childDimension == LayoutParams.WRAP_CONTENT) &#123; // Child wants to determine its own size. It can't be // bigger than us. resultSize = size; resultMode = MeasureSpec.AT_MOST; &#125; break; // 2ã€çˆ¶Viewæ˜¯AT_MOSTçš„ case MeasureSpec.AT_MOST: //å­Viewçš„widthæˆ–heightæ˜¯ä¸ªç²¾ç¡®å€¼,åˆ™sizeä¸ºç²¾ç¡®å€¼ï¼Œmodeä¸º EXACTLY if (childDimension &gt;= 0) &#123; // Child wants a specific size... so be it resultSize = childDimension; resultMode = MeasureSpec.EXACTLY; //å­Viewçš„widthæˆ–heightæ˜¯MATCH_PARENT,åˆ™sizeä¸ºçˆ¶è§†å›¾å¤§å°ï¼Œmodeä¸º AT_MOST &#125; else if (childDimension == LayoutParams.MATCH_PARENT) &#123; // Child wants to be our size, but our size is not fixed. // Constrain child to not be bigger than us. resultSize = size; resultMode = MeasureSpec.AT_MOST; //å­Viewçš„widthæˆ–heightæ˜¯MATCH_PARENT,åˆ™sizeä¸ºçˆ¶è§†å›¾å¤§å°ï¼Œmodeä¸º AT_MOST &#125; else if (childDimension == LayoutParams.WRAP_CONTENT) &#123; // Child wants to determine its own size. It can't be // bigger than us. resultSize = size; resultMode = MeasureSpec.AT_MOST; &#125; break; // çˆ¶Viewæ˜¯UNSPECIFIEDçš„ case MeasureSpec.UNSPECIFIED: if (childDimension &gt;= 0) &#123; // Child wants a specific size... let him have it resultSize = childDimension; resultMode = MeasureSpec.EXACTLY; &#125; else if (childDimension == LayoutParams.MATCH_PARENT) &#123; // Child wants to be our size... find out how big it should // be resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size; resultMode = MeasureSpec.UNSPECIFIED; &#125; else if (childDimension == LayoutParams.WRAP_CONTENT) &#123; // Child wants to determine its own size.... find out how // big it should be resultSize = View.sUseZeroUnspecifiedMeasureSpec ? 0 : size; resultMode = MeasureSpec.UNSPECIFIED; &#125; break; &#125; //noinspection ResourceType return MeasureSpec.makeMeasureSpec(resultSize, resultMode);&#125; é€šè¿‡ä»£ç æˆ‘ä»¬å¾ˆå¯ä»¥å¾ˆçœ‹åˆ° View çš„å­ View çš„ MeasureSpec è½¬åŒ–è§„åˆ™ï¼Œä½†æ˜¯æ„Ÿè§‰å¯èƒ½æœ‰ç‚¹æ‡µï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªâ€å•†åŸŽ-è¡£æœâ€ä¾‹å­æ¥æ¯”å–»ä¸€ä¸‹ï¼š æˆ‘ä»¬æŠŠçˆ¶ View çœ‹åšæˆå•†åŸŽï¼Œå­ View çœ‹åšæˆè¡£æœï¼ŒEXACTLY / MATCH_PARENT çœ‹åšæˆé«˜æ¡£å“ç‰Œï¼ŒAT_MOST / WRAP_CONTENT çœ‹åšæˆæ‚ç‰Œï¼Œç²¾ç¡®å€¼çœ‹åšæˆä»·æ ¼ï¼ŒViewçš„å¤§å°çœ‹åšä»·æ ¼ã€‚ å¦‚æžœæ˜¯è¡£æœï¼ˆå­ Viewï¼‰äº§åœ°æ˜¯é«˜æ¡£å“ç‰Œï¼ˆLayoutParams = LayoutParams.MATCH_PARENTï¼‰ï¼Œå•†åŸŽæ˜¯ï¼ˆçˆ¶ Viewï¼‰é«˜æ¡£çš„å•†åŸŽï¼ˆEXACTLYï¼‰ï¼Œé‚£ä¹ˆè¡£æœçš„ä»·æ ¼ï¼ˆsize å¤§å°ï¼‰å°±ä¼šæ ¹æ®é«˜æ¡£å•†åŸŽä»·æ ¼æ¥å®šï¼Œèƒ½æœ‰å¤šé«˜å°±å–å¤šé«˜ï¼ˆViewçš„å¤§å°å–å†³äºŽçˆ¶Viewå¤§å°ï¼‰ã€‚ å¦‚æžœæ˜¯è¡£æœï¼ˆå­ Viewï¼‰äº§åœ°æ˜¯é«˜æ¡£å“ç‰Œï¼ˆLayoutParams = LayoutParams.MATCH_PARENTï¼‰ï¼Œå•†åŸŽæ˜¯ï¼ˆçˆ¶ Viewï¼‰æ‚ç‰Œçš„å•†åŸŽï¼ˆAT_MOSTï¼‰ï¼Œé‚£ä¹ˆè¡£æœçš„ä»·æ ¼ï¼ˆsize å¤§å°ï¼‰ä¹Ÿä¼šæ ¹æ®ä½Žæ¡£å•†åŸŽä»·æ ¼æ¥å®šï¼Œå¤ªé«˜æ™®é€šäººä¹Ÿä¹°ä¸èµ·å‘€ï¼ˆViewçš„å¤§å°å–å†³äºŽçˆ¶Viewå¤§å°ï¼‰ã€‚ å¦‚æžœæ˜¯è¡£æœï¼ˆå­ Viewï¼‰äº§åœ°æ˜¯æ‚ç‰Œï¼ˆLayoutParams = LayoutParams.WRAP_CONTENTï¼‰ï¼Œå•†åŸŽæ˜¯ï¼ˆçˆ¶ Viewï¼‰é«˜æ¡£çš„å•†åŸŽï¼ˆEXACTLYï¼‰ï¼Œé‚£ä¹ˆè¡£æœçš„ä»·æ ¼ï¼ˆsize å¤§å°ï¼‰ä¹Ÿä¼šæ ¹æ®é«˜æ¡£å•†åŸŽä»·æ ¼æ¥å®šï¼Œèƒ½æœ‰å¤šé«˜å°±å–å¤šé«˜ï¼Œæ¯•ç«Ÿåº—å¤§æ¬ºäººï¼Œç»ä¸æ‰“æŠ˜ï¼ˆViewçš„å¤§å°å–å†³äºŽçˆ¶Viewå¤§å°ï¼‰ã€‚ å¦‚æžœæ˜¯è¡£æœï¼ˆå­ Viewï¼‰äº§åœ°æ˜¯æ‚ç‰Œï¼ˆLayoutParams = LayoutParams.WRAP_CONTENTï¼‰ï¼Œå•†åŸŽæ˜¯ï¼ˆçˆ¶ Viewï¼‰æ‚ç‰Œçš„å•†åŸŽï¼ˆAT_MOSTï¼‰ï¼Œé‚£ä¹ˆè¡£æœçš„ä»·æ ¼ï¼ˆsize å¤§å°ï¼‰å°±ä¼šæ ¹æ®ä½Žæ¡£å•†åŸŽä»·æ ¼æ¥å®šï¼Œå°å··æ­¥è¡Œè¡—ä¸éƒ½æ˜¯è¿™æ ·å–çš„å—ï¼ˆViewçš„å¤§å°å–å†³äºŽçˆ¶Viewå¤§å°ï¼‰ å¦‚æžœæ˜¯è¡£æœï¼ˆå­ Viewï¼‰å·²ç»å…¨å›½æ˜Žç æ ‡ä»·ï¼ˆandroid:layout_xxxx=â€200dpâ€ï¼‰ï¼Œå•†åŸŽæ˜¯ï¼ˆçˆ¶ Viewï¼‰æ— è®ºæ˜¯æ‚ç‰Œçš„å•†åŸŽï¼ˆAT_MOSTï¼‰è¿˜æ˜¯é«˜æ¡£çš„å•†åŸŽï¼ˆEXACTLYï¼‰ï¼Œé‚£ä¹ˆè¡£æœçš„ä»·æ ¼ï¼ˆsize å¤§å°ï¼‰å°±ä¸ä¼šå˜çš„ã€‚ï¼Œä¸ç„¶æ‰“ä½ å°å±å±ã€‚ å¦‚æžœä½ è§‰å¾—ä¾‹å­çœŸçš„ç³Ÿç³•é€äº†ï¼Œé‚£ä¹ˆçœ‹ä»¥ä¸‹ä¸€è¡¨æ­£ç»æ€»ç»“ï¼š ä¸€è¡¨æ­£ç»æ€»ç»“ä»¥ä¸‹ï¼š å½“çˆ¶Viewçš„modeæ˜¯EXACTLYçš„æ—¶å€™ï¼šè¯´æ˜Žçˆ¶Viewçš„å¤§å°æ˜¯ç¡®å®šçš„ å­Viewçš„å®½æˆ–é«˜æ˜¯MATCH_PARENTï¼š å­Viewçš„å®½æˆ–é«˜æ˜¯WRAP_CONTENTï¼šå­Viewæ˜¯åŒ…è£¹å¸ƒå±€ï¼Œè¯´æ˜Žå­Viewçš„å¤§å°è¿˜ä¸ç¡®å®šï¼Œæ‰€ä»¥å­Viewæœ€å¤§ä¸èƒ½è¶…è¿‡çˆ¶Viewçš„å¤§å°mode=AT_MOSTã€‚ å­Viewçš„å®½æˆ–é«˜æ˜¯å…·ä½“æ•°å€¼ï¼šå­viewdå¤§å°å·²ç»å›ºå®šäº†ï¼Œå­Viewçš„å¤§å°å°±æ˜¯å›ºå®šè¿™ä¸ªæ•°å€¼ï¼Œmode=EXACTLYã€‚ å½“çˆ¶Viewçš„modeæ˜¯AT_MOSTçš„æ—¶å€™ï¼šè¯´æ˜Žçˆ¶Viewå¤§å°æ˜¯ä¸ç¡®å®šçš„ã€‚ å­Viewçš„å®½æˆ–é«˜æ˜¯MATCH_PARENTï¼šçˆ¶Viewå¤§å°æ˜¯ä¸ç¡®å®šçš„ï¼Œå­Viewæ˜¯å¡«å……å¸ƒå±€æƒ…å†µï¼Œä¹Ÿä¸èƒ½ç¡®å®šå¤§å°ï¼Œæ‰€ä»¥Viewå¤§å°ä¸èƒ½è¶…è¿‡çˆ¶Viewçš„å¤§å°ï¼Œmode=AT_MOST å­Viewçš„å®½æˆ–é«˜æ˜¯WRAP_CONTENTï¼šå­Viewæ˜¯åŒ…è£¹å¸ƒå±€ï¼Œå¤§å°ä¸èƒ½è¶…è¿‡çˆ¶Viewçš„å¤§å°ï¼Œmode=AT_MOSTã€‚ å­Viewçš„å®½æˆ–é«˜æ˜¯å…·ä½“æ•°å€¼ï¼šå­viewdå¤§å°å·²ç»å›ºå®šäº†ï¼Œå­Viewçš„å¤§å°å°±æ˜¯å›ºå®šè¿™ä¸ªæ•°å€¼ï¼Œmode=EXACTLYã€‚ éœ€è¦æ³¨æ„ä¸€ç‚¹å°±æ˜¯ï¼Œæ­¤æ—¶çš„MeasureSpecå¹¶ä¸æ˜¯ViewçœŸæ­£çš„å¤§å°ï¼Œåªæœ‰setMeasuredDimensionä¹‹åŽæ‰èƒ½çœŸæ­£ç¡®å®šViewçš„å¤§å°ã€‚ measuremeasure ä¸»è¦åŠŸèƒ½å°±æ˜¯æµ‹é‡è®¾ç½® View çš„å¤§å°ã€‚è¯¥æ–¹æ³•æ˜¯ final ç±»åž‹ï¼Œå­ç±»ä¸èƒ½è¦†ç›–ï¼Œåœ¨æ–¹æ³•é‡Œé¢ä¼šè°ƒç”¨ onMeasure()ï¼Œæˆ‘ä»¬å¯ä»¥å¤å†™ onMeasureï¼ˆï¼‰ æ–¹æ³•åŽ»æµ‹é‡è®¾ç½® View çš„å¤§å°ã€‚ 1234567public final void measure(int widthMeasureSpec, int heightMeasureSpec) &#123; /*-----------çœç•¥ä»£ç ---------------* onMeasure(widthMeasureSpec, heightMeasureSpec); /*-----------çœç•¥ä»£ç ---------------*/ &#125; åœ¨ onMeasure( ) æ–¹æ³•ä¸­ 1234protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec), getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec)); &#125; onMeasure( ) æ–¹æ³•å°±æ˜¯æ‰§è¡Œæµ‹é‡è®¾ç½® View ä»£ç çš„æ ¸å¿ƒæ‰€åœ¨ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ getSuggestedMinimumWidth() 1234protected int getSuggestedMinimumWidth() &#123; //è¿”å›žå»ºè®® View è®¾ç½®æœ€å°å€¼å®½åº¦ return (mBackground == null) ? mMinWidth : max(mMinWidth, mBackground.getMinimumWidth()); &#125; è¿™é‡Œè¿”å›žçš„å»ºè®®æœ€å°å€¼å°±æ˜¯æˆ‘ä»¬xml å¸ƒå±€ä¸­ç”¨çš„å±žæ€§ minWidthæˆ–è€…æ˜¯èƒŒæ™¯å¤§å°ã€‚ åŒç†å¯å¾— getSuggestedMinimumHeight()ã€‚ çœ‹ä¸‹ getDefaultSize ä¸»è¦ä½œç”¨å°±æ˜¯æ ¹æ®Viewçš„å»ºè®®æœ€å°å€¼ï¼Œç»“åˆçˆ¶Viewä¼ é€’çš„measureSpecï¼Œå¾—å‡ºå¹¶è¿”å›žmeasureSpec çœ‹ä»£ç  123456789101112131415161718 public static int getDefaultSize(int size, int measureSpec) &#123; int result = size; //èŽ·å–çˆ¶Viewä¼ é€’è¿‡æ¥çš„æ¨¡å¼ int specMode = MeasureSpec.getMode(measureSpec); //èŽ·å–çˆ¶Viewä¼ é€’è¿‡æ¥çš„å¤§å° int specSize = MeasureSpec.getSize(measureSpec); switch (specMode) &#123; case MeasureSpec.UNSPECIFIED: result = size;//Viewçš„å¤§å°çˆ¶Viewæœªå®šï¼Œè®¾ç½®ä¸ºå»ºè®®æœ€å°å€¼ break; case MeasureSpec.AT_MOST: case MeasureSpec.EXACTLY: result = specSize; break; &#125; return result;&#125; getDefaultSize çš„é€»è¾‘è·Ÿæˆ‘ä»¬ä¹‹å‰åˆ†æžçš„ MeasureSpec è½¬åŒ–è§„åˆ™éžå¸¸ç›¸ä¼¼ã€‚å°±æ˜¯æ ¹æ®specModeè®¾ç½®å¤§å°ã€‚å¦‚æžœspecModeæ˜¯UNSPECIFIED æœªç¡®å®šå¤§å°ï¼Œåˆ™ä¼šä½¿ç”¨å»ºè®®æœ€å°å€¼ï¼Œå¦‚æžœå…¶ä»–ä¸¤ç§æƒ…å†µï¼Œåˆ™ä½¿ç”¨çˆ¶Viewä¼ é€’è¿‡æ¥çš„å¤§å°ã€‚å†æ¬¡å¼ºè°ƒï¼šå¹¶ä¸æ˜¯çˆ¶View ç‹¬è‡ªå†³å®šï¼Œå®ƒæ˜¯æ ¹æ®çˆ¶ view çš„MeasureSpecåŠ ä¸Šå­vIewçš„è‡ªå·±çš„LayoutParamsï¼Œé€šè¿‡ç›¸åº”çš„è§„åˆ™è½¬åŒ–è€Œå¾—åˆ°çš„å¤§å°ã€‚ å†æ¥çœ‹ä¸‹ setMeasuredDimension setMeasuredDimension ä½œç”¨å°±æ˜¯å°†æµ‹é‡å¥½çš„å®½è·Ÿé«˜è¿›è¡Œå­˜å‚¨ã€‚åœ¨onMeasureï¼ˆï¼‰ å¿…é¡»è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¸ç„¶å°±ä¼šæŠ›å‡º IllegalStateException å¼‚å¸¸ã€‚ æˆ‘ä»¬é‡æ–°æ¢³ç†ä¸€ä¸‹åˆšæ‰é‚£äº›æµç¨‹ï¼š åœ¨measure æ–¹æ³•ï¼Œæ ¸å¿ƒå°±æ˜¯è°ƒç”¨onMeasure( ) è¿›è¡ŒViewçš„æµ‹é‡ã€‚åœ¨onMeasure( )é‡Œé¢ï¼ŒèŽ·å–åˆ°æœ€å°å»ºè®®å€¼ï¼Œå¦‚æžœçˆ¶ç±»ä¼ é€’è¿‡æ¥çš„æ¨¡å¼æ˜¯MeasureSpec.UNSPECIFIEDï¼Œä¹Ÿå°±æ˜¯çˆ¶Viewå¤§å°æœªå®šçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æœ€å°å»ºè®®å€¼ï¼Œå¦‚æžœæ˜¯AT_MOSTæˆ–è€…EXACTLYæ¨¡å¼ï¼Œåˆ™è®¾ç½®çˆ¶ç±»ä¼ é€’è¿‡æ¥çš„å¤§å°ï¼Œç„¶åŽè°ƒç”¨setMeasuredDimension æ–¹æ³•è¿›è¡Œå­˜å‚¨å¤§å°ã€‚ layout()ä½œç”¨æè¿°measureï¼ˆï¼‰ æ–¹æ³•ä¸­æˆ‘ä»¬å·²ç»æµ‹é‡å‡ºViewçš„å¤§å°ï¼Œæ ¹æ®è¿™äº›å¤§å°ï¼Œæˆ‘ä»¬æŽ¥ä¸‹æ¥å°±éœ€è¦ç¡®å®š View åœ¨çˆ¶ View çš„ä½ç½®è¿›è¡ŒæŽ’ç‰ˆå¸ƒå±€ï¼Œè¿™å°±æ˜¯layout ä½œç”¨ã€‚å¯¹ View è¿›è¡ŒæŽ’ç‰ˆå¸ƒå±€ï¼Œè¿˜æ˜¯è¦çœ‹çˆ¶ Viewï¼Œä¹Ÿå°±æ˜¯ ViewGroupã€‚ çœ‹ä»£ç  123456789101112@Overridepublic final void layout(int l, int t, int r, int b) &#123; if (!mSuppressLayout &amp;&amp; (mTransition == null || !mTransition.isChangingLayout())) &#123; if (mTransition != null) &#123; mTransition.layoutChange(this); &#125; super.layout(l, t, r, b); &#125; else &#123; // record the fact that we noop'd it; request layout when transition finishes mLayoutCalledWhileSuppressed = true; &#125;&#125; ä»£ç ä¸å¤šï¼Œå¤§è‡´ä½œç”¨å°±æ˜¯åˆ¤æ–­ View æ˜¯å¦åœ¨æ‰§è¡ŒåŠ¨ç”»ï¼Œå¦‚æžœæ˜¯åœ¨æ‰§è¡ŒåŠ¨ç”»ï¼Œåˆ™ç­‰å¾…åŠ¨ç”»æ‰§è¡Œå®Œè°ƒç”¨ requestLayout()ï¼Œå¦‚æžœæ²¡æœ‰æ·»åŠ åŠ¨ç”»æˆ–è€…åŠ¨ç”»å·²ç»æ‰§è¡Œå®Œäº†ï¼Œåˆ™è°ƒç”¨ layoutï¼ˆï¼‰ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨Viewçš„ layoutï¼ˆï¼‰ã€‚ 1234567891011121314151617181920212223242526272829303132public void layout(int l, int t, int r, int b) &#123; /*-----------çœç•¥ä»£ç ---------------*/ boolean changed = isLayoutModeOptical(mParent) ? setOpticalFrame(l, t, r, b) : setFrame(l, t, r, b); if (changed || (mPrivateFlags &amp; PFLAG_LAYOUT_REQUIRED) == PFLAG_LAYOUT_REQUIRED) &#123; onLayout(changed, l, t, r, b); if (shouldDrawRoundScrollbar()) &#123; if(mRoundScrollbarRenderer == null) &#123; mRoundScrollbarRenderer = new RoundScrollbarRenderer(this); &#125; &#125; else &#123; mRoundScrollbarRenderer = null; &#125; mPrivateFlags &amp;= ~PFLAG_LAYOUT_REQUIRED; ListenerInfo li = mListenerInfo; if (li != null &amp;&amp; li.mOnLayoutChangeListeners != null) &#123; ArrayList&lt;OnLayoutChangeListener&gt; listenersCopy = (ArrayList&lt;OnLayoutChangeListener&gt;)li.mOnLayoutChangeListeners.clone(); int numListeners = listenersCopy.size(); for (int i = 0; i &lt; numListeners; ++i) &#123; listenersCopy.get(i).onLayoutChange(this, l, t, r, b, oldL, oldT, oldR, oldB); &#125; &#125; &#125; /*-----------çœç•¥ä»£ç ---------------*/&#125; View çš„ layout çš„æ–¹æ³•ä¹Ÿæ˜¯éžå¸¸é•¿ã€‚å¤§è‡´ä½œç”¨å°±æ˜¯è®¾ç½® View çš„åœ¨çˆ¶ View çš„ä½ç½®ï¼Œç„¶åŽåˆ¤æ–­ä½ç½®æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œæ˜¯å¦éœ€è¦é‡æ–°è°ƒç”¨æŽ’ç‰ˆå¸ƒå±€ï¼Œå¦‚æžœæ˜¯éœ€è¦é‡æ–°å¸ƒå±€åˆ™ç”¨äº† onLayoutï¼ˆï¼‰æ–¹æ³•ã€‚åœ¨OnLayout æ–¹æ³•ä¸­ï¼ŒView é‡Œé¢æ˜¯ä¸€ä¸ªç©ºå®žçŽ°ï¼Œè€Œ ViewGroup åˆ™æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡å‘¢ï¼Ÿå› ä¸ºonLayoutä¸­ä¸»è¦å°±æ˜¯ä¸ºäº†ç»™éåŽ†Viewç„¶åŽè¿›è¡ŒæŽ’ç‰ˆå¸ƒå±€ï¼Œåˆ†åˆ«è®¾ç½®Viewåœ¨çˆ¶Viewä¸­çš„ä½ç½®ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£ä¹ˆViewçš„æ„ä¹‰å°±ä¸å¤§äº†ï¼Œè€ŒViewGruo å¿…é¡»å®žçŽ°ï¼Œä¸ç„¶æ²¡æ³•å¯¹å­Viewè¿›è¡Œå¸ƒå±€ã€‚é‚£ä¹ˆå¦‚ä½•å¯¹ View è¿›è¡ŒæŽ’ç‰ˆå‘¢ï¼Ÿä¸¾ä¾‹ä¸ªç®€å•çš„demoã€‚ 12345678910111213protected void onLayout(boolean changed, int l, int t, int r, int b) &#123; int childCount = getChildCount(); for ( int i = 0; i &lt; childCount; i++) &#123; View child = getChildAt(i); child.layout(l, t, r, b); &#125;&#125; å°±æ˜¯éåŽ†æ‰€æœ‰çš„å­ View ç„¶åŽè°ƒç”¨ child.layout(l, t, r, b)ã€‚ å¤§å®¶æœ‰å…´è¶£ä¹Ÿå¯ä»¥å‚è€ƒä¸€ä¸‹ FrameLayoutï¼Œ LinearLayoutè¿™ç±»å¸ƒå±€ã€‚ drawï¼ˆï¼‰ç»è¿‡å‰é¢ä¸¤éƒ¨çš„æµ‹é‡è·Ÿå¸ƒå±€ä¹‹åŽï¼ŒæŽ¥ä¸‹æ¥å°±æ˜¯ç»˜åˆ¶äº†ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£æŠŠ View ç»˜åˆ¶åœ¨å±å¹•å¯è§è§†å›¾ä¸Šã€‚drawï¼ˆï¼‰ä½œç”¨å°±æ˜¯ç»˜åˆ¶View çš„èƒŒæ™¯ï¼Œå†…å®¹ï¼Œç»˜åˆ¶å­View,è¿˜æœ‰å‰æ™¯è·Ÿæ»šåŠ¨æ¡ã€‚çœ‹ä¸‹ View çš„drawï¼ˆï¼‰ æºç  1234567891011121314151617181920212223242526272829303132333435@CallSuperpublic void draw(Canvas canvas) &#123; /*-----------çœç•¥ä»£ç ---------------*/ // Step 1, draw the background, if needed int saveCount; if (!dirtyOpaque) &#123; drawBackground(canvas); &#125; /*-----------çœç•¥ä»£ç ---------------*/ if (!verticalEdges &amp;&amp; !horizontalEdges) &#123; // Step 3, draw the content if (!dirtyOpaque) onDraw(canvas); // Step 4, draw the children dispatchDraw(canvas); drawAutofilledHighlight(canvas); // Overlay is part of the content and draws beneath Foreground if (mOverlay != null &amp;&amp; !mOverlay.isEmpty()) &#123; mOverlay.getOverlayView().dispatchDraw(canvas); &#125; // Step 6, draw decorations (foreground, scrollbars) onDrawForeground(canvas); // Step 7, draw the default focus highlight drawDefaultFocusHighlight(canvas); /*-----------çœç•¥ä»£ç ---------------*/ return; &#125; draw è¿‡ç¨‹ä¸­ä¸€å…±åˆ†æˆ7æ­¥ï¼Œå…¶ä¸­ä¸¤æ­¥æˆ‘ä»¬ç›´æŽ¥ç›´æŽ¥è·³è¿‡ä¸åˆ†æžäº†ã€‚ ç¬¬ä¸€æ­¥ï¼šdrawBackground(canvas)ï¼š ä½œç”¨å°±æ˜¯ç»˜åˆ¶ View çš„èƒŒæ™¯ã€‚ ç¬¬äºŒæ­¥ï¼šonDraw(canvas) ï¼šç»˜åˆ¶ View çš„å†…å®¹ã€‚View çš„å†…å®¹æ˜¯æ ¹æ®è‡ªå·±éœ€æ±‚è‡ªå·±ç»˜åˆ¶çš„ï¼Œæ‰€ä»¥æ–¹æ³•æ˜¯ä¸€ä¸ªç©ºæ–¹æ³•ï¼ŒViewçš„ç»§æ‰¿ç±»è‡ªå·±å¤å†™å®žçŽ°ç»˜åˆ¶å†…å®¹ã€‚ ç¬¬ä¸‰æ­¥ï¼šdispatchDrawï¼ˆcanvasï¼‰ï¼šéåŽ†å­Viewè¿›è¡Œç»˜åˆ¶å†…å®¹ã€‚åœ¨ View é‡Œé¢æ˜¯ä¸€ä¸ªç©ºå®žçŽ°ï¼ŒViewGroup é‡Œé¢æ‰ä¼šæœ‰å®žçŽ°ã€‚åœ¨è‡ªå®šä¹‰ ViewGroup ä¸€èˆ¬ä¸ç”¨å¤å†™è¿™ä¸ªæ–¹æ³•ï¼Œå› ä¸ºå®ƒåœ¨é‡Œé¢çš„å®žçŽ°å¸®æˆ‘ä»¬å®žçŽ°äº†å­ View çš„ç»˜åˆ¶è¿‡ç¨‹ï¼ŒåŸºæœ¬æ»¡è¶³éœ€æ±‚ã€‚ ç¬¬å››æ­¥ï¼šonDrawForeground(canvas)ï¼šå¯¹å‰æ™¯è‰²è·Ÿæ»šåŠ¨æ¡è¿›è¡Œç»˜åˆ¶ã€‚ ç¬¬äº”æ­¥ï¼šdrawDefaultFocusHighlight(canvas)ï¼šç»˜åˆ¶é»˜è®¤ç„¦ç‚¹é«˜äº®ã€‚ å¥½äº†ï¼Œæ•´ä¸ªç»˜åˆ¶æµç¨‹å°±åˆ†æžå®Œæ¯•äº†ï¼]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>View</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¹´è½»äººä¸€å®šè¦çŸ¥é“çš„71æ¡åšé¥­æŠ€å·§ï¼Œè®©ä½ åšå‡ºç¾Žå‘³åˆè¥å…»çš„ç¾Žé£Ÿï¼]]></title>
    <url>%2Fposts%2F7de80bae.html</url>
    <content type="text"><![CDATA[1ã€ç…®æ°´é¥ºæ—¶ï¼Œåœ¨æ°´é‡Œæ”¾ä¸€é¢—å¤§è‘±æˆ–åœ¨æ°´å¼€åŽåŠ ç‚¹ç›ï¼Œå†æ”¾é¥ºå­ï¼Œé¥ºå­å‘³é“é²œç¾Žä¸ç²˜è¿žï¼›åœ¨å’Œé¢æ—¶ï¼Œæ¯500å…‹é¢ç²‰åŠ æ‹Œä¸€ä¸ªé¸¡è›‹ï¼Œé¥ºå­çš®æŒºåˆ®ä¸ç²˜è¿ž2ã€ ç‚–è‚‰æ—¶ï¼Œåœ¨é”…é‡ŒåŠ ä¸Šå‡ å—æ¡”çš®ï¼Œå¯é™¤å¼‚å‘³å’Œæ²¹è…»å¹¶å¢žåŠ æ±¤çš„é²œå‘³3ã€ç…®éª¨å¤´æ±¤æ—¶åŠ ä¸€å°åŒ™é†‹ï¼Œå¯ä½¿éª¨å¤´ä¸­çš„ç£·ã€é’™æº¶è§£äºŽæ±¤ä¸­ï¼Œå¹¶å¯ä¿å­˜æ±¤ä¸­çš„ç»´ç”Ÿç´ ã€‚5ã€çƒ§è±†è…æ—¶ï¼ŒåŠ å°‘è®¸è±†è…ä¹³æˆ–æ±ï¼Œå‘³é“èŠ³é¦™7ã€å°†ç»¿è±†åœ¨é“é”…ä¸­ç‚’10åˆ†é’Ÿå†ç…®èƒ½å¾ˆå¿«ç…®çƒ‚ï¼Œä½†æ³¨æ„ä¸è¦ç‚’ç„¦8ã€ç…®è›‹æ—¶æ°´é‡ŒåŠ ç‚¹é†‹å¯é˜²è›‹å£³è£‚å¼€ï¼Œäº‹å…ˆåŠ ç‚¹ç›ä¹Ÿå¯ 9ã€ç…®æµ·å¸¦æ—¶åŠ å‡ æ»´é†‹æ˜“çƒ‚ï¼›æ”¾å‡ æ£µæ³¢èœä¹Ÿè¡Œ 10ã€ç…®ç«è…¿ä¹‹å‰ï¼Œå°†ç«è…¿çš®ä¸Šæ¶‚äº›ç™½ç³–ï¼Œå®¹æ˜“ç…®çƒ‚ï¼Œå‘³é“æ›´é²œç¾Ž12ã€ç…®æ°´é¥ºæ—¶ï¼Œåœ¨é”…ä¸­åŠ å°‘è®¸é£Ÿç›ï¼Œé”…å¼€æ—¶æ°´ä¹Ÿä¸å¤–æº¢ 15ã€ç†¬ç²¥æˆ–ç…®è±†æ—¶ä¸è¦æ”¾ç¢±ï¼Œå¦åˆ™ä¼šç ´åç±³ã€è±†ä¸­çš„è¥å…»ç‰©è´¨ 16ã€ç”¨å¼€æ°´ç…®æ–°ç¬‹å®¹æ˜“ç†Ÿï¼Œä¸”æ¾è„†å¯å£ï¼›è¦ä½¿ç¬‹ç…®åŽä¸ç¼©å°ï¼Œå¯åŠ å‡ ç‰‡è–„è·å¶æˆ–ç›17ã€çŒªè‚šç…®ç†ŸåŽï¼Œåˆ‡æˆé•¿å—ï¼Œæ”¾åœ¨ç¢—å†…åŠ ä¸€äº›é²œæ±¤å†è’¸ä¸€ä¼šå„¿ï¼ŒçŒªè‚šä¾¿ä¼šåŠ åŽšä¸€å€18ã€ç…®çŒªè‚šæ—¶ï¼Œåƒä¸‡ä¸èƒ½å…ˆæ”¾ç›ï¼Œç­‰ç…®ç†ŸåŽåƒæ—¶å†æ”¾ç›ï¼Œå¦åˆ™çŒªè‚šä¼šç¼©å¾—è±¡ç‰›ç­‹ä¸€æ ·ç¡¬ 20ã€ç…®ç‰›è‚‰å’Œå…¶ä»–éŸ§ã€ç¡¬è‚‰ç±»ä»¥åŠé‡Žå‘³ç¦½ç±»æ—¶ï¼ŒåŠ ç‚¹é†‹å¯ä½¿å…¶è½¯åŒ–ã€‚ 21ã€ç‚–è€é¸¡ï¼šåœ¨é”…å†…åŠ äºŒä¸‰åé¢—é»„è±†åŒç‚–ï¼Œç†Ÿå¾—å¿«ä¸”å‘³é“é²œï¼›æˆ–åœ¨æ€è€é¸¡ä¹‹å‰ï¼Œå…ˆçŒç»™é¸¡ä¸€æ±¤åŒ™é£Ÿé†‹ï¼Œç„¶åŽå†æ€ï¼Œç”¨æ–‡ç«ç…®ç‚–ï¼Œå°±ä¼šç…®å¾—çƒ‚ç†Ÿï¼›æˆ–æ”¾ï¼“ï½žï¼”æžšå±±æ¥‚ï¼Œé¸¡è‚‰æ˜“çƒ‚ 23ã€ç‚–è€é¸­ï¼šåœ¨é”…é‡Œæ”¾å‡ ä¸ªç”°èžºå®¹æ˜“çƒ‚ç†Ÿ 24ã€çƒ§é¸­å­æ—¶ï¼ŒæŠŠé¸­å­å°¾ç«¯ä¸¤ä¾§çš„è‡Šè±†åŽ»æŽ‰ï¼Œå‘³é“æ›´ç¾Ž 25ã€ç…®å’¸è‚‰ï¼šç”¨åå‡ ä¸ªé’»æœ‰è®¸å¤šå°å­”çš„æ ¸æ¡ƒåŒç…®ï¼Œå¯æ¶ˆé™¤è‡­å‘³26ã€çº¢çƒ§ç‰›è‚‰æ—¶ï¼ŒåŠ å°‘è®¸é›ªé‡Œçº¢ï¼Œè‚‰å‘³é²œç¾Ž 27ã€åšçº¢çƒ§è‚‰å‰ï¼Œå…ˆç”¨å°‘è®¸ç¡¼ç ‚æŠŠè‚‰è…Œä¸€ä¸‹ï¼Œçƒ§å‡ºæ¥çš„è‚‰è‚¥è€Œä¸è…»ï¼Œç”˜é¦™å¯å£ 28ã€æ²¹ç‚¸é£Ÿç‰©æ—¶ï¼Œé”…é‡Œæ”¾å°‘è®¸é£Ÿç›ï¼Œæ²¹ä¸ä¼šå¤–æº… 29ã€åœ¨æ˜¥å·çš„æ‹Œé¦…ä¸­é€‚é‡åŠ äº›é¢ç²‰ï¼Œèƒ½é¿å…ç‚¸åˆ¶è¿‡ç¨‹ä¸­é¦…å†…èœæ±æµå‡ºç³Šé”…åº•çš„çŽ°è±¡30ã€ç‚¸åœŸè±†ä¹‹å‰ï¼Œå…ˆæŠŠåˆ‡å¥½çš„åœŸè±†ç‰‡æ”¾åœ¨æ°´é‡Œç…®ä¸€ä¼šå„¿ï¼Œä½¿åœŸè±†çš®çš„è¡¨é¢å½¢æˆä¸€å±‚è–„è–„çš„èƒ¶è´¨å±‚ï¼Œç„¶åŽå†ç”¨æ²¹ç‚¸ 31ã€ç‚¸çŒªæŽ’æ—¶ï¼Œåœ¨æœ‰ç­‹çš„åœ°æ–¹å‰²ï¼’ï½žï¼“ä¸ªåˆ‡å£ï¼Œç‚¸å‡ºæ¥çš„çŒªæŽ’å°±ä¸ä¼šæ”¶ç¼© 32ã€å°†é¸¡è‚‰å…ˆè…Œä¸€ä¼šå„¿ï¼Œå°ä¸ŠæŠ¤è†œæ”¾å…¥å†°ç®±ï¼Œå¾…ç‚¸æ—¶å†å–å‡ºï¼Œç‚¸å‡ºçš„é¸¡è‚‰é…¥è„†å¯å£33ã€ç…Žè·åŒ…è›‹æ—¶ï¼Œåœ¨è›‹é»„å³å°†å‡å›ºä¹‹é™…æµ‡ä¸€ç‚¹å†·å¼€æ°´ï¼Œä¼šä½¿è›‹åˆé»„åˆå«©34ã€ç…Žé¸¡è›‹æ—¶ï¼Œåœ¨å¹³åº•é”…æ”¾è¶³æ²¹ï¼Œæ²¹å¾®çƒ­æ—¶è›‹ä¸‹é”…ï¼Œé¸¡è›‹æ…¢æ…¢å˜ç†Ÿï¼Œå¤–è§‚ç¾Žï¼Œä¸ç²˜é”…35ã€ç…Žé¸¡è›‹æ—¶ï¼Œåœ¨çƒ­æ²¹ä¸­æ’’ç‚¹é¢ç²‰ï¼Œè›‹ä¼šç…Žå¾—é»„äº®å¥½çœ‹ï¼Œæ²¹ä¹Ÿä¸æ˜“æº…å‡ºé”…å¤–36ã€ç”¨ç¾Šæ²¹ç‚’é¸¡è›‹ï¼Œå‘³é¦™æ— å¼‚å‘³ 38ã€ç‚’é¸¡è›‹æ—¶åŠ å…¥å‡ æ»´é†‹ï¼Œç‚’å‡ºçš„è›‹æ¾è½¯å‘³é¦™ 39ã€ç‚’èŒ„å­æ—¶ï¼Œåœ¨é”…é‡Œæ”¾ç‚¹é†‹ï¼Œç‚’å‡ºçš„èŒ„å­é¢œè‰²ä¸ä¼šå˜é»‘ 40ã€ç‚’åœŸè±†æ—¶åŠ é†‹ï¼Œå¯é¿å…çƒ§ç„¦ï¼Œåˆå¯åˆ†è§£åœŸè±†ä¸­çš„æ¯’ç´ ï¼Œå¹¶ä½¿è‰²ã€å‘³ç›¸å®œ41ã€ç‚’è±†èŠ½æ—¶ï¼Œå…ˆåŠ ç‚¹é»„æ²¹ï¼Œç„¶åŽå†æ”¾ç›ï¼Œèƒ½åŽ»æŽ‰è±†è…¥å‘³ 42ã€ç‚’æ³¢èœæ—¶ä¸å®œåŠ ç›– 43ã€ç‚’è‚‰ç‰‡ï¼šè‚‰åˆ‡æˆè–„ç‰‡åŠ é…±æ²¹ã€é»„æ²¹ã€æ·€ç²‰ï¼Œæ‰“å…¥ä¸€ä¸ªé¸¡è›‹ï¼Œæ‹ŒåŒ€ï¼Œç‚’æ•£ï¼›ç­‰è‚‰ç‰‡å˜è‰²åŽï¼Œå†åŠ ä½æ–™ç¨ç‚’å‡ ä¸‹ï¼Œè‚‰ç‰‡å‘³ç¾Žã€é²œå«©45ã€ç‚’è‚‰èœæ—¶æ”¾ç›è¿‡æ—©ç†Ÿå¾—æ…¢ï¼Œå®œåœ¨å°†ç†Ÿæ—¶åŠ ç›ï¼Œåœ¨å‡ºé”…å‰å†åŠ ä¸Šå‡ æ»´é†‹ï¼Œé²œå«©å¯å£48ã€åšè‚‰é¥¼å’Œè‚‰ä¸¸å­æ—¶ï¼Œä¸€å…¬æ–¤è‚‰é¦…æ”¾2å°åŒ™ç› 49ã€åšä¸¸å­æŒ‰50å…‹è‚‰10å…‹æ·€ç²‰çš„æ¯”ä¾‹è°ƒåˆ¶ï¼Œæˆèœè½¯å«© 50ã€åšæ»‘ç‚’è‚‰ç‰‡æˆ–è¾£å­è‚‰ä¸ï¼ŒæŒ‰50å…‹è‚‰ï¼•å…‹æ·€ç²‰çš„æ¯”ä¾‹ä¸Šæµ†ï¼Œæˆèœé²œå«©å‘³ç¾Ž51ã€åšé¦’å¤´æ—¶ï¼Œå¦‚æžœåœ¨å‘é¢é‡Œæ‰è¿›ä¸€å°å—çŒªæ²¹ï¼Œè’¸å‡ºæ¥çš„é¦’å¤´ä¸ä»…æ´ç™½ã€æ¾è½¯ï¼Œè€Œä¸”å‘³é¦™52ã€è’¸é¦’å¤´æ—¶æŽºå…¥å°‘è®¸æ¡”çš®ä¸ï¼Œå¯ä½¿é¦’å¤´å¢žåŠ æ¸…é¦™ 53ã€è’¸é¦’å¤´ç¢±æ”¾å¤šäº†èµ·é»„ï¼Œå¦‚åœ¨åŽŸè’¸é”…æ°´é‡ŒåŠ é†‹ï¼’ï½žï¼“æ±¤åŒ™ï¼Œå†è’¸10ï½ž15åˆ†é’Ÿå¯å˜ç™½54ã€å°†å°‘é‡æ˜ŽçŸ¾å’Œé£Ÿç›æ”¾å…¥æ¸…æ°´ä¸­ï¼ŒæŠŠåˆ‡å¼€çš„ç”Ÿçº¢è–¯æµ¸å…¥åå‡ åˆ†é’Ÿï¼Œæ´—å‡€åŽè’¸ç…®ï¼Œå¯é˜²æ­¢æˆ–å‡è½»è…¹èƒ€56ã€æ”¾æœ‰è¾£æ¤’çš„èœå¤ªè¾£æ—¶æˆ–ç‚’è¾£æ¤’æ—¶åŠ ç‚¹é†‹ï¼Œè¾£å‘³å¤§å‡57ã€çƒ¹è°ƒæ—¶ï¼Œæ”¾é…±æ²¹è‹¥é”™å€’äº†é£Ÿé†‹ï¼Œå¯æ’’æ”¾å°‘è®¸å°è‹æ‰“ï¼Œé†‹å‘³å³å¯æ¶ˆé™¤58ã€èœå¤ªé…¸ï¼Œå°†ä¸€åªæ¾èŠ±è›‹æ£çƒ‚æ”¾å…¥ï¼Œèœå¤ªè¾£ï¼Œæ”¾ä¸€åªé¸¡è›‹åŒç‚’ ï¼Œèœå¤ªè‹¦ï¼Œæ»´å…¥å°‘è®¸ç™½é†‹62ã€æ±¤å¤ªå’¸åˆä¸å®œå…‘æ°´æ—¶ï¼Œå¯æ”¾å‡ å—è±†è…æˆ–åœŸè±†æˆ–å‡ ç‰‡è•ƒèŒ„åˆ°æ±¤ä¸­ï¼›ä¹Ÿå¯å°†ä¸€æŠŠç±³æˆ–é¢ç²‰ç”¨å¸ƒåŒ…èµ·æ¥æ”¾å…¥æ±¤ä¸­63ã€æ±¤å¤ªè…»ï¼Œå°†å°‘é‡ç´«èœåœ¨ç«ä¸Šçƒ¤ä¸€ä¸‹ï¼Œç„¶åŽæ’’å…¥æ±¤ä¸­64ã€èŠ±ç”Ÿç±³ç”¨æ²¹ç‚¸ç†Ÿï¼Œç››å…¥ç›˜ä¸­ï¼Œè¶çƒ­æ’’ä¸Šå°‘è®¸ç™½é…’ï¼Œç¨å‡‰åŽå†æ’’ä¸Šå°‘è®¸é£Ÿç›ï¼Œæ”¾ç½®å‡ å¤©å‡ å¤œéƒ½ç¨£è„†å¦‚åˆ65ã€èœç±½æ²¹æœ‰ä¸€è‚¡å¼‚å‘³ï¼Œå¯æŠŠæ²¹çƒ§çƒ­åŽæŠ•å…¥é€‚é‡ç”Ÿå§œã€è’œã€è‘±ã€ä¸é¦™ã€é™ˆçš®åŒç‚¸ç‰‡åˆ»ï¼Œæ²¹å³å¯å˜é¦™66ã€ç”¨èœæ²¹ç‚¸ä¸€æ¬¡èŠ±ç”Ÿç±³å°±æ²¡æœ‰æ€ªå‘³äº†ï¼Œç‚’å‡ºçš„èœè‚´é¦™å‘³å¯å£ï¼Œå¹¶å¯åšå‡‰æ‹Œèœ67ã€ç‚¸å®Œé£Ÿç‰©åŽçš„æ²¹ç•™ä¸‹ä¸€äº›æ®‹æ¸£å¹¶å˜å¾—æ··æµŠï¼Œå¯å°†ç™½èåœåˆ‡æˆåŽšåœ†ç‰‡ï¼Œç”¨ç­·å­æŠŠèåœæˆ³å‡ ä¸ªæ´žï¼Œæ”¾å…¥å‰©æ²¹ä¸­ç‚¸ï¼Œæ®‹æ¸£ä¼šé™„ç€åœ¨èåœç‰‡ä¸Šï¼Œå–å‡ºæ¸…é™¤æ®‹æ¸£ï¼Œå†åå¤æ”¾å…¥é”…ä¸­ç‚¸ï¼Œæ··æµŠçš„æ²¹å¯å˜æ¸…æ¾ˆ69ã€å½“é”…å†…æ¸©åº¦è¾¾åˆ°æœ€é«˜æ—¶åŠ å…¥æ–™é…’ï¼Œæ˜“ä½¿é…’è’¸å‘è€ŒåŽ»é™¤é£Ÿç‰©ä¸­çš„è…¥å‘³70ã€ç†¬çŒªæ²¹ï¼šåœ¨ç”µé¥­è¤’å†…æ”¾ä¸€ç‚¹æ°´æˆ–æ¤ç‰©æ²¹ï¼Œç„¶åŽæ”¾å…¥çŒªæ¿æ²¹æˆ–è‚¥è‚‰ï¼ŒæŽ¥é€šç”µæºåŽï¼Œèƒ½è‡ªåŠ¨å°†æ²¹ç‚¼å¥½ï¼Œä¸æº…æ²¹ï¼Œä¸ç³Šæ²¹æ¸£ï¼Œæ²¹è´¨æ¸…çº¯71ã€æ³¡èœå›ä¸­æ”¾åå‡ ç²’èŠ±æ¤’æˆ–å°‘è®¸éº¦èŠ½ç³–ï¼Œå¯é˜²æ­¢äº§ç”Ÿç™½èŠ±]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macç»ˆç«¯ä½¿ç”¨æŠ€å·§ï¼Œåˆ‡æ¢åˆ°å…¶ä»–è·¯å¾„å’Œç›®å½•]]></title>
    <url>%2Fposts%2F14a2657.html</url>
    <content type="text"><![CDATA[å¦‚æžœä½ æƒ³å°†å½“å‰ command line ä¼šè¯åˆ‡æ¢åˆ°å…¶ä»–ç›®å½•ï¼Œéœ€è¦ç”¨åˆ°ä¸‰ä¸ªå‘½ä»¤ï¼špwdï¼Œlså’Œcd pwdçš„å«ä¹‰æ˜¯â€œprint working directoryâ€ï¼Œä¼šæ˜¾ç¤ºå½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„ã€‚ lsçš„å«ä¹‰æ˜¯â€œlist directory contentsâ€ï¼Œå®ƒä¼šåˆ—å‡ºå½“å‰ç›®å½•çš„å†…å®¹ã€‚è¿™ä¸ªå‘½ä»¤è¿˜æœ‰å…¶ä»–å‚æ•°å¯é€‰ã€‚ cdçš„å«ä¹‰æ˜¯â€œchange directoryâ€ï¼Œå®ƒä¼šæ”¹å˜å½“å‰ç›®å½•åˆ°ä½ æŒ‡å®šçš„ç›®å½•ã€‚å¦‚æžœä½ ä¸æŒ‡å®šï¼Œåˆ™ä¼šè¿”å›žä½ çš„ home folderã€‚ å‘½ä»¤ å«ä¹‰ pwd å½“å‰å·¥ä½œç›®å½• cdï¼ˆä¸åŠ å‚æ•°ï¼‰ è¿›root cdï¼ˆfolderï¼‰ è¿›å…¥æ–‡ä»¶å¤¹ cd .. ä¸Šçº§ç›®å½• cd ~ è¿”å›žroot cd - è¿”å›žä¸Šä¸€ä¸ªè®¿é—®çš„ç›®å½• rm æ–‡ä»¶å åˆ é™¤ cat æ–‡ä»¶å åœ¨ç»ˆç«¯ä¸‹æŸ¥çœ‹æ–‡ä»¶ ls åˆ—å‡ºç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶ cp æ–‡ä»¶å ç›®æ ‡ç›®å½• å°†æ–‡ä»¶æ‹·è´åˆ°ç›®æ ‡ç›®å½•ä¸‹ ~ä»£è¡¨root å¦‚ï¼š~/Document/ZM/ mkdiv æ–°å»ºæ–‡ä»¶å¤¹]]></content>
      <categories>
        <category>Mac</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>ç»ˆç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidStudioæ··æ·†æ¨¡æ¿åŠå¸¸ç”¨ç¬¬ä¸‰æ–¹æ··æ·†]]></title>
    <url>%2Fposts%2F9a4f9efd.html</url>
    <content type="text"><![CDATA[é¦–å…ˆè¦åœ¨build.gradleä¸­å¼€å¯æ··æ·†ï¼Œä¹Ÿå°±æ˜¯ minifyEnabled true ï¼Œæˆ‘ç”¨çš„build.gradleå…·ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718192021222324252627282930313233def releaseTime() &#123; return new Date().format("yyyy.MM.dd", TimeZone.getTimeZone("UTC"))&#125;android &#123; .... buildTypes &#123; release &#123; // æ··æ·† minifyEnabled true // Zipalignä¼˜åŒ– zipAlignEnabled true // ç§»é™¤æ— ç”¨çš„resourceæ–‡ä»¶ shrinkResources true // å‰ä¸€éƒ¨åˆ†ä»£è¡¨ç³»ç»Ÿé»˜è®¤çš„androidç¨‹åºçš„æ··æ·†æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å·²ç»åŒ…å«äº†åŸºæœ¬çš„æ··æ·†å£°æ˜Žï¼ŒåŽä¸€ä¸ªæ–‡ä»¶æ˜¯è‡ªå·±çš„å®šä¹‰æ··æ·†æ–‡ä»¶ proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' applicationVariants.all &#123; variant -&gt; variant.outputs.each &#123; output -&gt; def outputFile = output.outputFile if (outputFile != null &amp;&amp; outputFile.name.endsWith('.apk')) &#123; // è¾“å‡ºapkåç§°ä¸ºappname-1.0-beta1-xxxx-xx-xx.apk def fileName = "app-$&#123;defaultConfig.versionName&#125;-beta1-$&#123;releaseTime()&#125;.apk" output.outputFile = new File(outputFile.parent, fileName) &#125; &#125; &#125; &#125; &#125; ....&#125; ä¸Šé¢æ³¨é‡Šä¸­å†™åˆ°proguard-android.txtæ–‡ä»¶ï¼Œè¿™æ˜¯ç³»ç»Ÿé»˜è®¤çš„æ··æ·†æ–‡ä»¶ï¼Œå…·ä½“åœ¨../sdk/tools/proguard/ç›®å½•ä¸‹ï¼Œå…¶ä¸­åŒ…å«äº†androidæœ€åŸºæœ¬çš„æ··æ·†ï¼Œä¸€èˆ¬ä¸éœ€è¦æ”¹åŠ¨ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®çš„æ˜¯é¡¹ç›®ä¸­appä¸‹çš„proguard-rules.proæ–‡ä»¶ï¼Œåœ¨æ­¤æä¾›ä¸€ä»½æ··æ·†æ¨¡æ¿ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165############################################### å¯¹äºŽä¸€äº›åŸºæœ¬æŒ‡ä»¤çš„æ·»åŠ ############################################### ä»£ç æ··æ·†åŽ‹ç¼©æ¯”ï¼Œåœ¨0~7ä¹‹é—´ï¼Œé»˜è®¤ä¸º5ï¼Œä¸€èˆ¬ä¸åšä¿®æ”¹-optimizationpasses 5 # æ··åˆæ—¶ä¸ä½¿ç”¨å¤§å°å†™æ··åˆï¼Œæ··åˆåŽçš„ç±»åä¸ºå°å†™-dontusemixedcaseclassnames # æŒ‡å®šä¸åŽ»å¿½ç•¥éžå…¬å…±åº“çš„ç±»-dontskipnonpubliclibraryclasses # è¿™å¥è¯èƒ½å¤Ÿä½¿æˆ‘ä»¬çš„é¡¹ç›®æ··æ·†åŽäº§ç”Ÿæ˜ å°„æ–‡ä»¶# åŒ…å«æœ‰ç±»å-&gt;æ··æ·†åŽç±»åçš„æ˜ å°„å…³ç³»-verbose # æŒ‡å®šä¸åŽ»å¿½ç•¥éžå…¬å…±åº“çš„ç±»æˆå‘˜-dontskipnonpubliclibraryclassmembers # ä¸åšé¢„æ ¡éªŒï¼Œpreverifyæ˜¯proguardçš„å››ä¸ªæ­¥éª¤ä¹‹ä¸€ï¼ŒAndroidä¸éœ€è¦preverifyï¼ŒåŽ»æŽ‰è¿™ä¸€æ­¥èƒ½å¤ŸåŠ å¿«æ··æ·†é€Ÿåº¦ã€‚-dontpreverify # ä¿ç•™Annotationä¸æ··æ·†-keepattributes *Annotation*,InnerClasses # é¿å…æ··æ·†æ³›åž‹-keepattributes Signature # æŠ›å‡ºå¼‚å¸¸æ—¶ä¿ç•™ä»£ç è¡Œå·-keepattributes SourceFile,LineNumberTable # æŒ‡å®šæ··æ·†æ˜¯é‡‡ç”¨çš„ç®—æ³•ï¼ŒåŽé¢çš„å‚æ•°æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨# è¿™ä¸ªè¿‡æ»¤å™¨æ˜¯è°·æ­ŒæŽ¨èçš„ç®—æ³•ï¼Œä¸€èˆ¬ä¸åšæ›´æ”¹-optimizations !code/simplification/cast,!field/*,!class/merging/* ############################################### Androidå¼€å‘ä¸­ä¸€äº›éœ€è¦ä¿ç•™çš„å…¬å…±éƒ¨åˆ†############################################## # ä¿ç•™æˆ‘ä»¬ä½¿ç”¨çš„å››å¤§ç»„ä»¶ï¼Œè‡ªå®šä¹‰çš„Applicationç­‰ç­‰è¿™äº›ç±»ä¸è¢«æ··æ·†# å› ä¸ºè¿™äº›å­ç±»éƒ½æœ‰å¯èƒ½è¢«å¤–éƒ¨è°ƒç”¨-keep public class * extends android.app.Activity-keep public class * extends android.app.Appliction-keep public class * extends android.app.Service-keep public class * extends android.content.BroadcastReceiver-keep public class * extends android.content.ContentProvider-keep public class * extends android.app.backup.BackupAgentHelper-keep public class * extends android.preference.Preference-keep public class * extends android.view.View-keep public class com.android.vending.licensing.ILicensingService # ä¿ç•™supportä¸‹çš„æ‰€æœ‰ç±»åŠå…¶å†…éƒ¨ç±»-keep class android.support.** &#123;*;&#125; # ä¿ç•™ç»§æ‰¿çš„-keep public class * extends android.support.v4.**-keep public class * extends android.support.v7.**-keep public class * extends android.support.annotation.** # ä¿ç•™Rä¸‹é¢çš„èµ„æº-keep class **.R$* &#123;*;&#125; # ä¿ç•™æœ¬åœ°nativeæ–¹æ³•ä¸è¢«æ··æ·†-keepclasseswithmembernames class * &#123; native &lt;methods&gt;;&#125; # ä¿ç•™åœ¨Activityä¸­çš„æ–¹æ³•å‚æ•°æ˜¯viewçš„æ–¹æ³•ï¼Œ# è¿™æ ·ä»¥æ¥æˆ‘ä»¬åœ¨layoutä¸­å†™çš„onClickå°±ä¸ä¼šè¢«å½±å“-keepclassmembers class * extends android.app.Activity&#123; public void *(android.view.View);&#125; # ä¿ç•™æžšä¸¾ç±»ä¸è¢«æ··æ·†-keepclassmembers enum * &#123; public static **[] values(); public static ** valueOf(java.lang.String);&#125; # ä¿ç•™æˆ‘ä»¬è‡ªå®šä¹‰æŽ§ä»¶ï¼ˆç»§æ‰¿è‡ªViewï¼‰ä¸è¢«æ··æ·†-keep public class * extends android.view.View&#123; *** get*(); void set*(***); public &lt;init&gt;(android.content.Context); public &lt;init&gt;(android.content.Context, android.util.AttributeSet); public &lt;init&gt;(android.content.Context, android.util.AttributeSet, int);&#125; # ä¿ç•™Parcelableåºåˆ—åŒ–ç±»ä¸è¢«æ··æ·†-keep class * implements android.os.Parcelable &#123; public static final android.os.Parcelable$Creator *;&#125; # ä¿ç•™Serializableåºåˆ—åŒ–çš„ç±»ä¸è¢«æ··æ·†-keepclassmembers class * implements java.io.Serializable &#123; static final long serialVersionUID; private static final java.io.ObjectStreamField[] serialPersistentFields; !static !transient &lt;fields&gt;; !private &lt;fields&gt;; !private &lt;methods&gt;; private void writeObject(java.io.ObjectOutputStream); private void readObject(java.io.ObjectInputStream); java.lang.Object writeReplace(); java.lang.Object readResolve();&#125; # å¯¹äºŽå¸¦æœ‰å›žè°ƒå‡½æ•°çš„onXXEventã€**On*Listenerçš„ï¼Œä¸èƒ½è¢«æ··æ·†-keepclassmembers class * &#123; void *(**On*Event); void *(**On*Listener);&#125; # webViewå¤„ç†ï¼Œé¡¹ç›®ä¸­æ²¡æœ‰ä½¿ç”¨åˆ°webViewå¿½ç•¥å³å¯-keepclassmembers class fqcn.of.javascript.interface.for.webview &#123; public *;&#125;-keepclassmembers class * extends android.webkit.webViewClient &#123; public void *(android.webkit.WebView, java.lang.String, android.graphics.Bitmap); public boolean *(android.webkit.WebView, java.lang.String);&#125;-keepclassmembers class * extends android.webkit.webViewClient &#123; public void *(android.webkit.webView, jav.lang.String);&#125; # ç§»é™¤Logç±»æ‰“å°å„ä¸ªç­‰çº§æ—¥å¿—çš„ä»£ç ï¼Œæ‰“æ­£å¼åŒ…çš„æ—¶å€™å¯ä»¥åšä¸ºç¦logä½¿ç”¨ï¼Œè¿™é‡Œå¯ä»¥ä½œä¸ºç¦æ­¢logæ‰“å°çš„åŠŸèƒ½ä½¿ç”¨# è®°å¾—proguard-android.txtä¸­ä¸€å®šä¸è¦åŠ -dontoptimizeæ‰èµ·ä½œç”¨# å¦å¤–çš„ä¸€ç§å®žçŽ°æ–¹æ¡ˆæ˜¯é€šè¿‡BuildConfig.DEBUGçš„å˜é‡æ¥æŽ§åˆ¶#-assumenosideeffects class android.util.Log &#123;# public static int v(...);# public static int i(...);# public static int w(...);# public static int d(...);# public static int e(...);#&#125; ############################################### é¡¹ç›®ä¸­ç‰¹æ®Šå¤„ç†éƒ¨åˆ†############################################## #-----------å¤„ç†åå°„ç±»--------------- #-----------å¤„ç†jsäº¤äº’--------------- #-----------å¤„ç†å®žä½“ç±»---------------# åœ¨å¼€å‘çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„å®žä½“ç±»æ”¾åœ¨ä¸€ä¸ªåŒ…å†…ï¼Œè¿™æ ·æˆ‘ä»¬å†™ä¸€æ¬¡æ··æ·†å°±è¡Œäº†ã€‚#-keep public class com.ljd.example.entity.** &#123;# public void set*(***);# public *** get*();# public *** is*();#&#125; #-----------å¤„ç†ç¬¬ä¸‰æ–¹ä¾èµ–åº“--------- ä¸‹é¢ä»‹ç»å¸¸ç”¨ç¬¬ä¸‰æ–¹æ··æ·†é…ç½®ï¼ˆå·²æŒ‰å­—æ¯æŽ’åºï¼Œä¸å®šæœŸæ›´æ–°ï¼‰ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275# AndroidEventBus-keep class org.simple.** &#123; *; &#125;-keep interface org.simple.** &#123; *; &#125;-keepclassmembers class * &#123; @org.simple.eventbus.Subscriber &lt;methods&gt;;&#125;# ç™¾åº¦åœ°å›¾ï¼ˆjaråŒ…æ¢æˆè‡ªå·±çš„ç‰ˆæœ¬ï¼Œè®°å¾—ç­¾åè¦åŒ¹é…ï¼‰-libraryjars libs/baidumapapi_v2_1_3.jar-keep class com.baidu.** &#123;*;&#125;-keep class vi.com.** &#123;*;&#125;-keep class com.sinovoice.** &#123;*;&#125;-keep class pvi.com.** &#123;*;&#125;-dontwarn com.baidu.**-dontwarn vi.com.**-dontwarn pvi.com.**# Bugly-dontwarn com.tencent.bugly.**-keep class com.tencent.bugly.** &#123;*;&#125;# ButterKnife-keep class butterknife.** &#123; *; &#125;-dontwarn butterknife.internal.**-keep class **$$ViewBinder &#123; *; &#125; -keepclasseswithmembernames class * &#123; @butterknife.* &lt;fields&gt;;&#125;-keepclasseswithmembernames class * &#123; @butterknife.* &lt;methods&gt;;&#125;# EventBus-keepattributes *Annotation*-keepclassmembers class ** &#123; @org.greenrobot.eventbus.Subscribe &lt;methods&gt;;&#125;-keep enum org.greenrobot.eventbus.ThreadMode &#123; *; &#125;# Facebook-keep class com.facebook.** &#123;*;&#125;-keep interface com.facebook.** &#123;*;&#125;-keep enum com.facebook.** &#123;*;&#125;# FastJson-dontwarn com.alibaba.fastjson.**-keep class com.alibaba.fastjson.** &#123; *; &#125;-keepattributes Signature-keepattributes *Annotation*# Fresco-keep class com.facebook.fresco.** &#123;*;&#125;-keep interface com.facebook.fresco.** &#123;*;&#125;-keep enum com.facebook.fresco.** &#123;*;&#125;# é«˜å¾·ç›¸å…³ä¾èµ–# é›†åˆåŒ…:3Dåœ°å›¾3.3.2 å¯¼èˆª1.8.0 å®šä½2.5.0-dontwarn com.amap.api.**-dontwarn com.autonavi.**-keep class com.amap.api.**&#123;*;&#125;-keep class com.autonavi.**&#123;*;&#125;# åœ°å›¾æœåŠ¡-dontwarn com.amap.api.services.**-keep class com.map.api.services.** &#123;*;&#125;# 3Dåœ°å›¾-dontwarn com.amap.api.mapcore.**-dontwarn com.amap.api.maps.**-dontwarn com.autonavi.amap.mapcore.**-keep class com.amap.api.mapcore.**&#123;*;&#125;-keep class com.amap.api.maps.**&#123;*;&#125;-keep class com.autonavi.amap.mapcore.**&#123;*;&#125;# å®šä½-dontwarn com.amap.api.location.**-dontwarn com.aps.**-keep class com.amap.api.location.**&#123;*;&#125;-keep class com.aps.**&#123;*;&#125;# å¯¼èˆª-dontwarn com.amap.api.navi.**-dontwarn com.autonavi.**-keep class com.amap.api.navi.** &#123;*;&#125;-keep class com.autonavi.** &#123;*;&#125;# Glide-keep public class * implements com.bumptech.glide.module.GlideModule-keep public enum com.bumptech.glide.load.resource.bitmap.ImageHeaderParser$** &#123; **[] $VALUES; public *;&#125;# Gson-keepattributes Signature-keepattributes *Annotation*-keep class sun.misc.Unsafe &#123; *; &#125;-keep class com.google.gson.stream.** &#123; *; &#125;# ä½¿ç”¨Gsonæ—¶éœ€è¦é…ç½®Gsonçš„è§£æžå¯¹è±¡åŠå˜é‡éƒ½ä¸æ··æ·†ã€‚ä¸ç„¶Gsonä¼šæ‰¾ä¸åˆ°å˜é‡ã€‚# å°†ä¸‹é¢æ›¿æ¢æˆè‡ªå·±çš„å®žä½“ç±»-keep class com.example.bean.** &#123; *; &#125;# Jackson-dontwarn org.codehaus.jackson.**-dontwarn com.fasterxml.jackson.databind.**-keep class org.codehaus.jackson.** &#123; *;&#125;-keep class com.fasterxml.jackson.** &#123; *; &#125;# æžå…‰æŽ¨é€-dontoptimize-dontpreverify-dontwarn cn.jpush.**-keep class cn.jpush.** &#123; *; &#125;# OkHttp-keep class com.squareup.okhttp.** &#123; *; &#125;-keep interface com.squareup.okhttp.** &#123; *; &#125;-dontwarn com.squareup.okhttp.**# OkHttp3-dontwarn com.squareup.okhttp3.**-keep class com.squareup.okhttp3.** &#123; *;&#125;-dontwarn okio.**# Okio-dontwarn com.squareup.** -dontwarn okio.** -keep public class org.codehaus.* &#123; *; &#125; -keep public class java.nio.* &#123; *; &#125;# OrmLite-keepattributes *DatabaseField* -keepattributes *DatabaseTable* -keepattributes *SerializedName* -keep class com.j256.**-keepclassmembers class com.j256.** &#123; *; &#125;-keep enum com.j256.**-keepclassmembers enum com.j256.** &#123; *; &#125;-keep interface com.j256.**-keepclassmembers interface com.j256.** &#123; *; &#125;# Realm-keep class io.realm.annotations.RealmModule-keep @io.realm.annotations.RealmModule class *-keep class io.realm.internal.Keep-keep @io.realm.internal.Keep class * &#123; *; &#125;-dontwarn javax.**-dontwarn io.realm.**# Retrofit-dontwarn retrofit2.**-keep class retrofit2.** &#123; *; &#125;-keepattributes Signature-keepattributes Exceptions# Retrolambda-dontwarn java.lang.invoke.*# RxJava RxAndroid-dontwarn sun.misc.**-keepclassmembers class rx.internal.util.unsafe.*ArrayQueue*Field* &#123; long producerIndex; long consumerIndex;&#125;-keepclassmembers class rx.internal.util.unsafe.BaseLinkedQueueProducerNodeRef &#123; rx.internal.util.atomic.LinkedQueueNode producerNode;&#125;-keepclassmembers class rx.internal.util.unsafe.BaseLinkedQueueConsumerNodeRef &#123; rx.internal.util.atomic.LinkedQueueNode consumerNode;&#125;# Universal-Image-Loader-v1.9.5-libraryjars libs/universal-image-loader-1.9.5-SNAPSHOT-with-sources.jar-dontwarn com.nostra13.universalimageloader.**-keep class com.nostra13.universalimageloader.** &#123; *; &#125;# å¾®ä¿¡æ”¯ä»˜-dontwarn com.tencent.mm.**-dontwarn com.tencent.wxop.stat.**-keep class com.tencent.mm.** &#123;*;&#125;-keep class com.tencent.wxop.stat.**&#123;*;&#125;# ä¿¡é¸½-keep public class * extends android.app.Service-keep public class * extends android.content.BroadcastReceiver-keep class com.tencent.android.tpush.** &#123;* ;&#125;-keep class com.tencent.mid.** &#123;* ;&#125;-keepattributes *Annotation*# æ–°æµªå¾®åš-keep class com.sina.weibo.sdk.* &#123; *; &#125; -keep class android.support.v4.* &#123; *; &#125; -keep class com.tencent.* &#123; *; &#125; -keep class com.baidu.* &#123; *; &#125; -keep class lombok.ast.ecj.* &#123; *; &#125; -dontwarn android.support.v4.** -dontwarn com.tencent.**s -dontwarn com.baidu.** # è®¯é£žè¯­éŸ³-dontwarn com.iflytek.**-keep class com.iflytek.** &#123;*;&#125;# xUtils3.0-keepattributes Signature,Annotation-keep public class org.xutils.** &#123;public protected *;&#125;-keep public interface org.xutils.** &#123;public protected *;&#125;-keepclassmembers class * extends org.xutils.** &#123;public protected *;&#125;-keepclassmembers @org.xutils.db.annotation.* class * &#123;;&#125;-keepclassmembers @org.xutils.http.annotation. class * &#123;*;&#125;-keepclassmembers class * &#123;@org.xutils.view.annotation.Event ;&#125;# é“¶è”-dontwarn com.unionpay.**-keep class com.unionpay.** &#123; *; &#125;# å‹ç›Ÿç»Ÿè®¡åˆ†æž-keepclassmembers class * &#123; public &lt;init&gt;(org.json.JSONObject); &#125;-keepclassmembers enum com.umeng.analytics.** &#123; public static **[] values(); public static ** valueOf(java.lang.String);&#125;# å‹ç›Ÿè‡ªåŠ¨æ›´æ–°-keepclassmembers class * &#123; public &lt;init&gt;(org.json.JSONObject); &#125;-keep public class cn.irains.parking.cloud.pub.R$*&#123; public static final int *; &#125;-keep public class * extends com.umeng.**-keep class com.umeng.** &#123; *; &#125;# æ”¯ä»˜å®é’±åŒ…-dontwarn com.alipay.**-dontwarn HttpUtils.HttpFetcher-dontwarn com.ta.utdid2.**-dontwarn com.ut.device.**-keep class com.alipay.android.app.IAlixPay&#123;*;&#125;-keep class com.alipay.android.app.IAlixPay$Stub&#123;*;&#125;-keep class com.alipay.android.app.IRemoteServiceCallback&#123;*;&#125;-keep class com.alipay.android.app.IRemoteServiceCallback$Stub&#123;*;&#125;-keep class com.alipay.sdk.app.PayTask&#123; public *;&#125;-keep class com.alipay.sdk.app.AuthTask&#123; public *;&#125;-keep class com.alipay.mobilesecuritysdk.*-keep class com.ut.*]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>ä»£ç æ··æ·†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½ çœŸçš„ä¼šå†™å•ä¾‹å—]]></title>
    <url>%2Fposts%2F6bfd7458.html</url>
    <content type="text"><![CDATA[æåˆ°å•ä¾‹æ¨¡å¼ï¼Œç›¸ä¿¡éƒ½ä¸ä¼šé™Œç”Ÿï¼Œä»Šå¤©å¯¹å…¶è¿›è¡Œæ€»ç»“ã€‚ ä»¥ä¸‹æ˜¯å•ä¾‹æ¨¡å¼çš„ç‰¹ç‚¹ï¼š å•ä¾‹ç±»åªèƒ½æœ‰ä¸€ä¸ªå®žä¾‹ã€‚ å•ä¾‹ç±»å¿…é¡»è‡ªå·±è‡ªå·±åˆ›å»ºè‡ªå·±çš„å”¯ä¸€å®žä¾‹ã€‚ å•ä¾‹ç±»å¿…é¡»ç»™æ‰€æœ‰å…¶ä»–å¯¹è±¡æä¾›è¿™ä¸€å®žä¾‹ã€‚ ç§ç±»çš„è¯ä¸å¥½è¯´æœ‰å‡ ç±»ï¼Œå› ä¸ºè¦è€ƒè™‘åˆ°æ˜¯å¦åœ¨å¤šçº¿ç¨‹ä¸‹è¿è¡Œï¼Œä¸‹é¢æ¥ä»‹ç»ä¸»è¦çš„å‡ ç±»ï¼š æ‡’æ±‰ç±»123456789101112131415//æ‡’æ±‰å¼å•ä¾‹ç±».åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™å®žä¾‹åŒ–è‡ªå·± public class Singleton &#123; private Singleton() &#123; &#125; private static Singleton single = null; //é™æ€å·¥åŽ‚æ–¹æ³• public static Singleton getInstance() &#123; if (single == null) &#123; single = new Singleton(); &#125; return single; &#125;&#125; æ‡’æ±‰ä¹ˆï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹ä¸‹ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥ä¸‹é¢ä»‹ç»ä¸‰ç§æ‡’æ±‰çš„å‡çº§ç‰ˆæ¥é€‚åº”å¤šçº¿ç¨‹ åœ¨getinstanceå‰åŠ ä¸Šsynchronizedï¼ˆåŒæ­¥ï¼‰ï¼Œä½†è¿™å¯¼è‡´çš„æ˜¯æ¯æ¬¡getInstanceéƒ½ä¼šåŽ»åŒæ­¥ï¼Œæ¶ˆè€—èµ„æºã€‚ 1234567891011121314public class Singleton &#123; private Singleton() &#123; &#125; private static Singleton single = null; // é™æ€å·¥åŽ‚æ–¹æ³• public static synchronized Singleton getInstance() &#123; if (single == null) &#123; single = new Singleton(); &#125; return single; &#125;&#125; åŒé‡æ£€æŸ¥é”ï¼Œå®ƒæ˜¯åœ¨ä»¥ä¸Šåšçš„ä¿®æ”¹ï¼Œåˆ¤æ–­ä¸¤æ¬¡ç©ºï¼Œæ‰€ä»¥åªæœ‰åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™ä¼šåŒæ­¥ï¼Œé¿å…äº†æ¯æ¬¡åŒæ­¥èµ„æºçš„æ¶ˆè€—ï¼Œæ³¨æ„ volatile å…³é”®å­—ã€‚ 123456789101112131415161718public class Singleton &#123; private Singleton() &#123; &#125; private volatile static Singleton singleton = null; // å£°æ˜Žæˆ volatile //é™æ€å·¥åŽ‚æ–¹æ³• public static Singleton getInstance() &#123; if (singleton == null) &#123; synchronized (Singleton.class) &#123; if (singleton == null) &#123; singleton = new Singleton(); &#125; &#125; &#125; return singleton; &#125;&#125; å†…éƒ¨é™æ€ç±»ï¼Œè¿™ç§æˆ‘è§‰å¾—æ˜¯æœ€å¥½çš„ï¼Œæ—¢å®žçŽ°äº†çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿé¿å…äº†åŒæ­¥å¸¦æ¥çš„æ€§èƒ½å½±å“ã€‚ 123456789101112public class Singleton &#123; private static class LazyHolder &#123; private static final Singleton INSTANCE = new Singleton(); &#125; private Singleton() &#123; &#125; public static Singleton getInstance() &#123; return LazyHolder.INSTANCE; &#125;&#125; é¥¿æ±‰ç±»é¥¿æ±‰å¼æ˜¯å…¸åž‹çš„ç©ºé—´æ¢æ—¶é—´ï¼Œå½“ç±»è£…è½½çš„æ—¶å€™å°±ä¼šåˆ›å»ºç±»çš„å®žä¾‹ï¼Œä¸ç®¡ä½ ç”¨ä¸ç”¨ï¼Œå…ˆåˆ›å»ºå‡ºæ¥ï¼Œç„¶åŽæ¯æ¬¡è°ƒç”¨çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦å†åˆ¤æ–­ï¼ŒèŠ‚çœäº†è¿è¡Œæ—¶é—´ã€‚ 123456789101112//é¥¿æ±‰å¼å•ä¾‹ç±».åœ¨ç±»åˆå§‹åŒ–æ—¶ï¼Œå·²ç»è‡ªè¡Œå®žä¾‹åŒ–public class Singleton &#123; private Singleton() &#123; &#125; private static final Singleton single = new Singleton(); //é™æ€å·¥åŽ‚æ–¹æ³• public static Singleton getInstance() &#123; return single; &#125;&#125; è¿™ç§ä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢çš„ï¼Œå› ä¸ºç®€å•æ˜“æ‡‚ï¼Œä½†å½“å®žçŽ°äº†SerializableæŽ¥å£åŽï¼Œååºåˆ—åŒ–æ—¶å•ä¾‹ä¼šè¢«ç ´åï¼Œå®žçŽ°SerializableæŽ¥å£éœ€è¦é‡å†™readResolveï¼Œæ‰èƒ½ä¿è¯å…¶ååºåˆ—åŒ–ä¾æ—§æ˜¯å•ä¾‹ï¼š 123private Object readResolve() throws ObjectStreamException &#123; return single; &#125; æžšä¸¾ç±»123456public enum Singleton &#123; INSTANCE; public void whateverMethod() &#123; &#125;&#125; è¿™ç§æ–¹å¼æ˜¯Effective Javaä½œè€…Josh Bloch æå€¡çš„æ–¹å¼ï¼Œå®ƒä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå¯è°“æ˜¯å¾ˆåšå¼ºçš„å£åž’å•Šï¼Œä¸è¿‡ï¼Œä¸ªäººè®¤ä¸ºç”±äºŽ1.5ä¸­æ‰åŠ å…¥enumç‰¹æ€§ï¼Œç”¨è¿™ç§æ–¹å¼å†™ä¸å…è®©äººæ„Ÿè§‰ç”Ÿç–ï¼Œåœ¨å®žé™…å·¥ä½œä¸­ï¼Œæˆ‘ä¹Ÿå¾ˆå°‘çœ‹è§æœ‰äººè¿™ä¹ˆå†™è¿‡ã€‚ ä»¥ä¸Šå°±æ˜¯å¸¸ç”¨çš„å•ä¾‹æ¨¡å¼ï¼Œä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä¼šä½¿ç”¨é¥¿æ±‰å¼ï¼Œåªæœ‰åœ¨è¦æ˜Žç¡®å®žçŽ°lazy loadingæ•ˆæžœæ—¶æ‰ä¼šä½¿ç”¨å†…éƒ¨é™æ€ç±»ï¼Œå¦å¤–ï¼Œå¦‚æžœæ¶‰åŠåˆ°ååºåˆ—åŒ–åˆ›å»ºå¯¹è±¡æ—¶æˆ‘ä¼šè¯•ç€ä½¿ç”¨æžšä¸¾çš„æ–¹å¼æ¥å®žçŽ°å•ä¾‹ï¼Œä¸è¿‡ï¼Œæˆ‘ä¸€ç›´ä¼šä¿è¯æˆ‘çš„ç¨‹åºæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå‘é€çŸ­ä¿¡çš„ä¸¤ç§æ–¹å¼]]></title>
    <url>%2Fposts%2F9f23975a.html</url>
    <content type="text"><![CDATA[Demoåœ°å€ï¼šSendSMSDemo SMSæ¶‰åŠçš„ä¸»è¦ç±»SmsManagerå®žçŽ°SMSä¸»è¦ç”¨åˆ°SmsManagerç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ªjava.lang.Objectç±»ï¼Œä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹è¯¥ç±»çš„ä¸»è¦æˆå‘˜ã€‚ å…¬æœ‰æ–¹æ³•ï¼š ArrayList divideMessage(String text)å½“çŸ­ä¿¡è¶…è¿‡SMSæ¶ˆæ¯çš„æœ€å¤§é•¿åº¦æ—¶ï¼Œå°†çŸ­ä¿¡åˆ†å‰²ä¸ºå‡ å—ã€‚å‚æ•°ï¼štextâ€”â€”åˆå§‹çš„æ¶ˆæ¯ï¼Œä¸èƒ½ä¸ºç©ºè¿”å›žå€¼ï¼šæœ‰åºçš„ArrayListï¼Œå¯ä»¥é‡æ–°ç»„åˆä¸ºåˆå§‹çš„æ¶ˆæ¯ static SmsManager getDefault()èŽ·å–SmsManagerçš„é»˜è®¤å®žä¾‹ã€‚è¿”å›žå€¼ï¼šSmsManagerçš„é»˜è®¤å®žä¾‹ void SendDataMessage(String destinationAddress, String scAddress, short destinationPort, byte[] data,PendingIntent sentIntent, PendingIntent deliveryIntent)å‘é€ä¸€ä¸ªåŸºäºŽSMSçš„æ•°æ®åˆ°æŒ‡å®šçš„åº”ç”¨ç¨‹åºç«¯å£ã€‚å‚æ•°ï¼š1)ã€destinationAddressâ€”â€”æ¶ˆæ¯çš„ç›®æ ‡åœ°å€2)ã€scAddressâ€”â€”æœåŠ¡ä¸­å¿ƒçš„åœ°å€orä¸ºç©ºä½¿ç”¨å½“å‰é»˜è®¤çš„SMSC 3)destinationPortâ€”â€”æ¶ˆæ¯çš„ç›®æ ‡ç«¯å£å·4)ã€dataâ€”â€”æ¶ˆæ¯çš„ä¸»ä½“ï¼Œå³æ¶ˆæ¯è¦å‘é€çš„æ•°æ®5)ã€sentIntentâ€”â€”å¦‚æžœä¸ä¸ºç©ºï¼Œå½“æ¶ˆæ¯æˆåŠŸå‘é€æˆ–å¤±è´¥è¿™ä¸ªPendingIntentå°±å¹¿æ’­ã€‚ç»“æžœä»£ç æ˜¯Activity.RESULT_OKè¡¨ç¤ºæˆåŠŸï¼Œæˆ–RESULT_ERROR_GENERIC_FAILUREã€RESULT_ERROR_RADIO_OFFã€RESULT_ERROR_NULL_PDUä¹‹ä¸€è¡¨ç¤ºé”™è¯¯ã€‚å¯¹åº”RESULT_ERROR_GENERIC_FAILUREï¼ŒsentIntentå¯èƒ½åŒ…æ‹¬é¢å¤–çš„â€œé”™è¯¯ä»£ç â€åŒ…å«ä¸€ä¸ªæ— çº¿ç”µå¹¿æ’­æŠ€æœ¯ç‰¹å®šçš„å€¼ï¼Œé€šå¸¸åªåœ¨ä¿®å¤æ•…éšœæ—¶æœ‰ç”¨ã€‚æ¯ä¸€ä¸ªåŸºäºŽSMSçš„åº”ç”¨ç¨‹åºæŽ§åˆ¶æ£€æµ‹sentIntentã€‚å¦‚æžœsentIntentæ˜¯ç©ºï¼Œè°ƒç”¨è€…å°†æ£€æµ‹æ‰€æœ‰æœªçŸ¥çš„åº”ç”¨ç¨‹åºï¼Œè¿™å°†å¯¼è‡´åœ¨æ£€æµ‹çš„æ—¶å€™å‘é€è¾ƒå°æ•°é‡çš„SMSã€‚6)ã€deliveryIntentâ€”â€”å¦‚æžœä¸ä¸ºç©ºï¼Œå½“æ¶ˆæ¯æˆåŠŸä¼ é€åˆ°æŽ¥æ”¶è€…è¿™ä¸ªPendingIntentå°±å¹¿æ’­ã€‚å¼‚å¸¸ï¼šå¦‚æžœdestinationAddressæˆ–dataæ˜¯ç©ºæ—¶ï¼ŒæŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸ã€‚ void sendMultipartTextMessage(String destinationAddress, String scAddress, ArrayList parts,ArrayList sentIntents, ArrayList deliverIntents)å‘é€ä¸€ä¸ªåŸºäºŽSMSçš„å¤šéƒ¨åˆ†æ–‡æœ¬ï¼Œè°ƒç”¨è€…åº”ç”¨å·²ç»é€šè¿‡è°ƒç”¨divideMessage(String text)å°†æ¶ˆæ¯åˆ†å‰²æˆæ­£ç¡®çš„å¤§å°ã€‚å‚æ•°ï¼š1)ã€destinationAddressâ€”â€”æ¶ˆæ¯çš„ç›®æ ‡åœ°å€2)ã€scAddressâ€”â€”æœåŠ¡ä¸­å¿ƒçš„åœ°å€orä¸ºç©ºä½¿ç”¨å½“å‰é»˜è®¤çš„SMSC3)ã€partsâ€”â€”æœ‰åºçš„ArrayListï¼Œå¯ä»¥é‡æ–°ç»„åˆä¸ºåˆå§‹çš„æ¶ˆæ¯4)ã€sentIntentsâ€”â€”è·ŸSendDataMessageæ–¹æ³•ä¸­ä¸€æ ·ï¼Œåªä¸è¿‡è¿™é‡Œçš„æ˜¯ä¸€ç»„PendingIntent5)ã€deliverIntentsâ€”â€”è·ŸSendDataMessageæ–¹æ³•ä¸­ä¸€æ ·ï¼Œåªä¸è¿‡è¿™é‡Œçš„æ˜¯ä¸€ç»„PendingIntentå¼‚å¸¸ï¼šå¦‚æžœdestinationAddressæˆ–dataæ˜¯ç©ºæ—¶ï¼ŒæŠ›å‡ºIllegalArgumentExceptionå¼‚å¸¸ã€‚ void sendTextMessage(String destinationAddress, String scAddress, String text, PendingIntent sentIntent,PendingIntent deliveryIntent)å‘é€ä¸€ä¸ªåŸºäºŽSMSçš„æ–‡æœ¬ã€‚å‚æ•°çš„æ„ä¹‰å’Œå¼‚å¸¸å‰é¢çš„å·²å­˜åœ¨çš„ä¸€æ ·ï¼Œä¸å†ç´¯è¿°ã€‚ å¸¸é‡ï¼š public static final int RESULT_ERROR_GENERIC_FAILURE è¡¨ç¤ºæ™®é€šé”™è¯¯ï¼Œå€¼ä¸º1(0x00000001) public static final int RESULT_ERROR_NO_SERVICEè¡¨ç¤ºæœåŠ¡å½“å‰ä¸å¯ç”¨ï¼Œå€¼ä¸º4 (0x00000004) public static final int RESULT_ERROR_NULL_PDUè¡¨ç¤ºæ²¡æœ‰æä¾›pduï¼Œå€¼ä¸º3 (0x00000003) public static final int RESULT_ERROR_RADIO_OFFè¡¨ç¤ºæ— çº¿å¹¿æ’­è¢«æ˜Žç¡®åœ°å…³é—­ï¼Œå€¼ä¸º2 (0x00000002) public static final int STATUS_ON_ICC_FREEè¡¨ç¤ºè‡ªç”±ç©ºé—´ï¼Œå€¼ä¸º0 (0x00000000) public static final int STATUS_ON_ICC_READè¡¨ç¤ºæŽ¥æ”¶ä¸”å·²è¯»ï¼Œå€¼ä¸º1 (0x00000001) public static final int STATUS_ON_ICC_SENTè¡¨ç¤ºå­˜å‚¨ä¸”å·²å‘é€ï¼Œå€¼ä¸º5 (0x00000005) public static final int STATUS_ON_ICC_UNREADè¡¨ç¤ºæŽ¥æ”¶ä½†æœªè¯»ï¼Œå€¼ä¸º3 (0x00000003) public static final int STATUS_ON_ICC_UNSENTè¡¨ç¤ºå­˜å‚¨ä½†ä¸ºå‘é€ï¼Œå€¼ä¸º7 (0x00000007) ç¬¬ä¸€ï¼šè°ƒç”¨ç³»ç»ŸçŸ­ä¿¡æŽ¥å£ç›´æŽ¥å‘é€çŸ­ä¿¡ï¼›ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516/** * ç›´æŽ¥è°ƒç”¨çŸ­ä¿¡æŽ¥å£å‘çŸ­ä¿¡ * * @param phoneNumber * @param message */ public void sendSMS(String phoneNumber, String message) &#123; // èŽ·å–çŸ­ä¿¡ç®¡ç†å™¨ android.telephony.SmsManager smsManager = android.telephony.SmsManager .getDefault(); // æ‹†åˆ†çŸ­ä¿¡å†…å®¹ï¼ˆæ‰‹æœºçŸ­ä¿¡é•¿åº¦é™åˆ¶ï¼‰ List&lt;String&gt; divideContents = smsManager.divideMessage(message); for (String text : divideContents) &#123; smsManager.sendTextMessage(phoneNumber, null, text, sentPI,deliverPI); &#125; &#125; ç¬¬äºŒï¼šè°ƒèµ·ç³»ç»Ÿå‘çŸ­ä¿¡åŠŸèƒ½ï¼›ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š 12345678910111213/** * è°ƒèµ·ç³»ç»Ÿå‘çŸ­ä¿¡åŠŸèƒ½ * * @param phoneNumber * @param message */ public void doSendSMSTo(String phoneNumber, String message) &#123; if (PhoneNumberUtils.isGlobalPhoneNumber(phoneNumber)) &#123; Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.parse("smsto:" + phoneNumber)); intent.putExtra("sms_body", message); startActivity(intent); &#125; &#125; ä¸‹é¢æ¥ä¸»è¦è®²è§£ç¬¬ä¸€ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ–¹æ³•å¯ä»¥ç›‘æŽ§å‘é€çŠ¶æ€å’Œå¯¹æ–¹æŽ¥æ”¶çŠ¶æ€ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚ å¤„ç†è¿”å›žçš„çŠ¶æ€ä»£ç å¦‚ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738//å¤„ç†è¿”å›žçš„å‘é€çŠ¶æ€ String SENT_SMS_ACTION = "SENT_SMS_ACTION"; Intent sentIntent = new Intent(SENT_SMS_ACTION); sentPI= PendingIntent.getBroadcast(this, 0, sentIntent, 0); // register the Broadcast Receivers this.registerReceiver(new BroadcastReceiver() &#123; @Override public void onReceive(Context _context, Intent _intent) &#123; switch (getResultCode()) &#123; case Activity.RESULT_OK: Toast.makeText(MainActivity.this, "çŸ­ä¿¡å‘é€æˆåŠŸ", Toast.LENGTH_SHORT) .show(); break; case SmsManager.RESULT_ERROR_GENERIC_FAILURE: break; case SmsManager.RESULT_ERROR_RADIO_OFF: break; case SmsManager.RESULT_ERROR_NULL_PDU: break; &#125; &#125; &#125;, new IntentFilter(SENT_SMS_ACTION)); //å¤„ç†è¿”å›žçš„æŽ¥æ”¶çŠ¶æ€ String DELIVERED_SMS_ACTION = "DELIVERED_SMS_ACTION"; // create the deilverIntent parameter Intent deliverIntent = new Intent(DELIVERED_SMS_ACTION); deliverPI = PendingIntent.getBroadcast(this, 0,deliverIntent, 0); this.registerReceiver(new BroadcastReceiver() &#123; @Override public void onReceive(Context _context, Intent _intent) &#123; Toast.makeText(MainActivity.this,"æ”¶ä¿¡äººå·²ç»æˆåŠŸæŽ¥æ”¶", Toast.LENGTH_SHORT) .show(); &#125; &#125;, new IntentFilter(DELIVERED_SMS_ACTION)); åˆ«å¿˜äº†æƒé™çš„é—®é¢˜ï¼š 1&lt;uses-permission android:name="android.permission.SEND_SMS" /&gt;]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>SMS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android 6.0ï½ž9.0é€‚é…]]></title>
    <url>%2Fposts%2Fdd367189.html</url>
    <content type="text"><![CDATA[1.å‰è¨€ å¤§å®¶è¿˜è®°å¾—Android 6.0æƒé™é€‚é…çš„æ³ªæ°´å—ï¼Ÿè€ŒçŽ°åœ¨è°·æ­Œå·²ç»å‡ºäº†Android Pçš„ç¨³å®šç‰ˆï¼Œè€Œä¸”è°·æ­Œç²‘ç²‘ï¼Œä¸ºäº†å¤§å®¶èƒ½ç»™è¾›è‹¦ç†¬å¤œåŠ ç­ï¼Œç‰¹åœ°çš„å’Œä¸ªå¤§å¸‚åœºåˆä½œï¼Œè¦å¼ºåˆ¶æŽ¨å‡º9.0çš„é€‚é…ï¼Œè€Œè¿‘æœŸåœ¨ä¸‹ä¸æ‰ï¼Œä¸ºäº†æŠ¥ç€å¤šè¸©å‘çš„å¿ƒæ€ï¼Œåšäº†ä¸€ä¸‹7.0ï½ž9.0çš„é€‚é…ï¼Œè„¸é¢Šä¹Ÿæ˜¯è€æ³ªä¸¤è¡Œ 2.å®‰å“6.0çš„é€‚é…2.1 æ€Žä¹ˆé€‚é… â— åœ¨6.0æ‰€æœ‰æƒé™éƒ½éœ€è¦ç”³è¯·ï¼Ÿ æ›°ï¼šå½“ç„¶ä¸æ˜¯ã€‚åªæœ‰å±žäºŽå±é™©æƒé™çš„æ‰éœ€è¦ç”³è¯·ã€‚å±é™©æƒé™çœ‹ä¸‹è¡¨1-2 â— é‚£å±é™©æƒé™ä¹Ÿå¾ˆå¤šå•Šï¼Œä¹Ÿè¦ä¸€ä¸ªä¸ªç”³è¯·ï¼Ÿ æ›°ï¼šå½“ç„¶ä¸æ˜¯ã€‚ä½ çœ‹çœ‹ä¸‹é¢çš„è¡¨ï¼Œéƒ½åˆ†å¥½ç»„äº†ï¼ˆ9ç»„ï¼‰ï¼Œå¯¹äºŽåŒä¸€ç»„å†…çš„æƒé™ï¼Œåªè¦æœ‰ä¸€ä¸ªè¢«åŒæ„ï¼Œå…¶ä»–çš„éƒ½ä¼šè¢«åŒæ„ã€‚ â— è°æœ€å¸… æ›°ï¼šå½“ç„¶æ˜¯å­ä¿¡ã€‚ 2.2 åˆ—ä¸¾æƒé™çš„åˆ†ç»„ è¡¨1-2å±é™©æƒé™åˆ†ç»„ åˆ†ç»„ åå­— åˆ†å‰²çº¿ PHONE android.permission.READ_PHONE_STATE android.permission.CALL_PHONE android.permission.READ_CALL_LOG android.permission.ADD_VOICEMAIL android.permission.WRITE_CALL_LOG android.permission.USE_SIP android.permission.PROCESS_OUTGOING_CALLS CALENDAR android.permission.READ_CALENDAR android.permission.WRITE_CALENDAR CAMERA android.permission.CAMERA CONTACTS android.permission.READ_CONTACTS android.permission.WRITE_CONTACTS android.permission.GET_ACCOUNTS LOCATION android.permission.ACCESS_FINE_LOCATION android.permission.ACCESS_COARSE_LOCATION MICROPHONE android.permission.RECORD_AUDIO SENSORS android.permission.BODY_SENSORS SMS android.permission.SEND_SMS android.permission.RECEIVE_SMS android.permission.READ_SMS android.permission.RECEIVE_WAP_PUSH android.permission.RECEIVE_MMS STORAGE android.permission.READ_EXTERNAL_STORAGE android.permission.WRITE_EXTERNAL_STORAGE 1234567891011121314151617181920212223242526272829303132333435&lt;!-- å±é™©æƒé™ start --&gt;&lt;!--PHONE--&gt;&lt;uses-permission android:name="android.permission.READ_PHONE_STATE"/&gt;&lt;uses-permission android:name="android.permission.CALL_PHONE"/&gt;&lt;uses-permission android:name="android.permission.READ_CALL_LOG"/&gt;&lt;uses-permission android:name="android.permission.ADD_VOICEMAIL"/&gt;&lt;uses-permission android:name="android.permission.WRITE_CALL_LOG"/&gt;&lt;uses-permission android:name="android.permission.USE_SIP"/&gt;&lt;uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/&gt;&lt;!--CALENDAR--&gt;&lt;uses-permission android:name="android.permission.READ_CALENDAR"/&gt;&lt;uses-permission android:name="android.permission.WRITE_CALENDAR"/&gt;&lt;!--CAMERA--&gt;&lt;uses-permission android:name="android.permission.CAMERA"/&gt;&lt;!--CONTACTS--&gt;&lt;uses-permission android:name="android.permission.READ_CONTACTS"/&gt;&lt;uses-permission android:name="android.permission.WRITE_CONTACTS"/&gt;&lt;uses-permission android:name="android.permission.GET_ACCOUNTS"/&gt;&lt;!--LOCATION--&gt;&lt;uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/&gt;&lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/&gt;&lt;!--MICROPHONE--&gt;&lt;uses-permission android:name="android.permission.RECORD_AUDIO"/&gt;&lt;!--SENSORS--&gt;&lt;uses-permission android:name="android.permission.BODY_SENSORS"/&gt;&lt;!--SMS--&gt;&lt;uses-permission android:name="android.permission.SEND_SMS"/&gt;&lt;uses-permission android:name="android.permission.RECEIVE_SMS"/&gt;&lt;uses-permission android:name="android.permission.READ_SMS"/&gt;&lt;uses-permission android:name="android.permission.RECEIVE_WAP_PUSH"/&gt;&lt;uses-permission android:name="android.permission.RECEIVE_MMS"/&gt;&lt;!--STORAGE--&gt;&lt;uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/&gt;&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;&lt;!-- å±é™©æƒé™ Permissions end --&gt; ä»¥ä¸Šæ˜¯åˆ—å‡º9ç»„éœ€è¦åŠ¨æ€ç”³è¯·çš„æƒé™ï¼Œå»ºè®®è‡ªå·±ä»£ç ç»Ÿä¸€å°è£…æˆä¸€ä¸ªå·¥å…·ç±»ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº†ï¼Œ Android6.0æƒé™å·¥å…· 3.Android 7.0çš„é€‚é…3.1 åº”ç”¨é—´å…±äº«æ–‡ä»¶ åœ¨targetSdkVersionå¤§äºŽç­‰äºŽçš„24çš„Appä¸­ï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰åŽ»é€‚é…7.0ã€‚é‚£ä¹ˆåœ¨è°ƒç”¨å®‰è£…é¡µé¢ï¼Œæˆ–ä¿®æ”¹ç”¨æˆ·å¤´åƒæ“ä½œæ—¶ï¼Œå°±ä¼šå¤±è´¥ã€‚é‚£ä¹ˆå°±éœ€è¦ä½ åŽ»é€‚é…7.0æˆ–æ˜¯å°†targetSdkVersionæ”¹ä¸º24ä»¥ä¸‹ï¼ˆä¸æŽ¨èï¼‰ã€‚é€‚é…çš„æ–¹æ³•è¿™é‡Œå°±ä¸ç»†è®²ï¼Œå¤§å®¶å¯ä»¥çœ‹é¸¿æ´‹å¤§ç¥žçš„ Android 7.0 è¡Œä¸ºå˜æ›´ é€šè¿‡FileProvideråœ¨åº”ç”¨é—´å…±äº«æ–‡ä»¶è¿™ç¯‡æ–‡ç«  3.2 APK signature scheme v2 Android 7.0 å¼•å…¥ä¸€é¡¹æ–°çš„åº”ç”¨ç­¾åæ–¹æ¡ˆ APK Signature Scheme v2ï¼Œå®ƒèƒ½æä¾›æ›´å¿«çš„åº”ç”¨å®‰è£…æ—¶é—´å’Œæ›´å¤šé’ˆå¯¹æœªæŽˆæƒ APK æ–‡ä»¶æ›´æ”¹çš„ä¿æŠ¤ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒAndroid Studio 2.2 å’Œ Android Plugin for Gradle 2.2 ä¼šä½¿ç”¨ APK Signature Scheme v2 å’Œä¼ ç»Ÿç­¾åæ–¹æ¡ˆæ¥ç­¾ç½²æ‚¨çš„åº”ç”¨ã€‚ 1ï¼‰åªå‹¾é€‰v1ç­¾åå°±æ˜¯ä¼ ç»Ÿæ–¹æ¡ˆç­¾ç½²ï¼Œä½†æ˜¯åœ¨7.0ä¸Šä¸ä¼šä½¿ç”¨V2å®‰å…¨çš„éªŒè¯æ–¹å¼ã€‚ 2ï¼‰åªå‹¾é€‰V2ç­¾å7.0ä»¥ä¸‹ä¼šæ˜¾ç¤ºæœªå®‰è£…ï¼Œ7.0ä¸Šåˆ™ä¼šä½¿ç”¨äº†V2å®‰å…¨çš„éªŒè¯æ–¹å¼ã€‚ 3ï¼‰åŒæ—¶å‹¾é€‰V1å’ŒV2åˆ™æ‰€æœ‰ç‰ˆæœ¬éƒ½æ²¡é—®é¢˜ã€‚ 3.3 org.apacheä¸æ”¯æŒé—®é¢˜ 1234// build.gradleé‡Œé¢åŠ ä¸Šè¿™å¥è¯defaultConfig &#123; useLibrary 'org.apache.http.legacy' &#125; 3.3 SharedPreferencesé—ªé€€ 12SharedPreferences read = getSharedPreferences(RELEASE_POOL_DATA, MODE_WORLD_READABLE);//MODE_WORLD_READABLE ï¼š7.0ä»¥åŽä¸èƒ½ä½¿ç”¨è¿™ä¸ªèŽ·å–ï¼Œä¼šé—ªé€€ï¼Œä¿®æ”¹æˆMODE_PRIVATE 4.Android 8.0çš„é€‚é…4.1 å®‰å“8.0ä¸­PHONEæƒé™ç»„æ–°å¢žä¸¤ä¸ªæƒé™ 12ANSWER_PHONE_CALLSï¼šå…è®¸æ‚¨çš„åº”ç”¨é€šè¿‡ç¼–ç¨‹æ–¹å¼æŽ¥å¬å‘¼å…¥ç”µè¯ã€‚è¦åœ¨æ‚¨çš„åº”ç”¨ä¸­å¤„ç†å‘¼å…¥ç”µè¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ acceptRingingCall() å‡½æ•°ã€‚READ_PHONE_NUMBERS ï¼šæƒé™å…è®¸æ‚¨çš„åº”ç”¨è¯»å–è®¾å¤‡ä¸­å­˜å‚¨çš„ç”µè¯å·ç ã€‚ 4.2 é€šçŸ¥é€‚é… å®‰å“8.0ä¸­ï¼Œä¸ºäº†æ›´å¥½çš„ç®¡åˆ¶é€šçŸ¥çš„æé†’ï¼Œä¸æƒ³ä¸€äº›ä¸é‡è¦çš„é€šçŸ¥æ‰“æ‰°ç”¨æˆ·ï¼Œæ–°å¢žäº†é€šçŸ¥æ¸ é“ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®æ¸ é“æ¥å±è”½ä¸€äº›ä¸æƒ³è¦çš„é€šçŸ¥ å…¼å®¹çš„ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128/** * å®‰å“8ã€‚0é€šçŸ¥çš„å…¼å®¹ç±»å“¦ï¼Œ * NotifyCompatYc yc : æ˜¯é›¨è¾°çš„ç®€å†™ï¼Œè°¢è°¢å“¦ï¼Œå˜¿å˜¿ ----é«˜è´µçš„å­ä¿¡ */public class NotifyCompatYc &#123; public static final String QFMD_CHANNEL_ID = "com.oms.mingdeng"; public static final String QFMD_CHANNEL_NAME = "ç¥ˆç¦æ˜Žç‡ˆ"; public static final String LJMS_DEFAULT_CHANNEL_NAME = "éˆæ©Ÿå¦™ç®—"; public static final String LJMS_CHANNEL_ID = "com.oms.mmcnotity"; public static final String XYS_CHANNEL_ID = "com.oms.xuyuanshu"; public static final String XYS_CHANNEL_NAME = "è¨±é¡˜æ¨¹"; public static void setONotifyChannel(NotificationManager manager, NotificationCompat.Builder builder, String channeId, String channelName) &#123; if (TextUtils.isEmpty(channeId)||TextUtils.isEmpty(channelName))&#123; L.e("NotifyCompatYc: ".concat("å®‰å“8.0çš„é€šçŸ¥å…¼å®¹åº“ä¸­ channeId ä¸Ž channelName ä¸èƒ½ä¸ºempty")); &#125; if (Build.VERSION.SDK_INT &gt;= 26) &#123; //ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®é€šçŸ¥çš„ä¼˜å…ˆçº§åˆ« NotificationChannel channel = new NotificationChannel(channeId, channelName, NotificationManager.IMPORTANCE_DEFAULT); channel.canBypassDnd();//æ˜¯å¦å¯ä»¥ç»•è¿‡è¯·å‹¿æ‰“æ‰°æ¨¡å¼ channel.canShowBadge();//æ˜¯å¦å¯ä»¥æ˜¾ç¤ºiconè§’æ ‡ channel.enableLights(true);//æ˜¯å¦æ˜¾ç¤ºé€šçŸ¥é—ªç¯ channel.enableVibration(true);//æ”¶åˆ°å°æ—¶æ—¶éœ‡åŠ¨æç¤º channel.setBypassDnd(true);//è®¾ç½®ç»•è¿‡å…æ‰“æ‰° channel.setLockscreenVisibility(NotificationCompat.VISIBILITY_SECRET); channel.setLightColor(Color.RED);//è®¾ç½®é—ªå…‰ç¯é¢œè‰² channel.getAudioAttributes();//èŽ·å–è®¾ç½®é“ƒå£°è®¾ç½® channel.setVibrationPattern(new long[]&#123;100, 200, 100&#125;);//è®¾ç½®éœ‡åŠ¨æ¨¡å¼ channel.shouldShowLights();//æ˜¯å¦ä¼šé—ªå…‰ if (manager != null) &#123; manager.createNotificationChannel(channel); &#125; if (builder != null) &#123; builder.setChannelId(channeId);//è¿™ä¸ªidå‚æ•°è¦ä¸Žä¸Šé¢channelæž„å»ºçš„ç¬¬ä¸€ä¸ªå‚æ•°å¯¹åº” &#125; &#125; &#125; public static void setONotifyChannel(NotificationManager manager, String channeId, String channelName) &#123; setONotifyChannel(manager,null,channeId,channelName); &#125; public static Notification getNotification(Context context, String channelId) &#123; NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(context, channelId); Notification notification = notificationBuilder.setOngoing(true) .setSmallIcon(R.drawable.ic_launcher) .setPriority(NotificationManager.IMPORTANCE_MIN) .setCategory(Notification.CATEGORY_SERVICE) .build(); return notification; &#125;&#125;å¤åˆ¶ä»£ç public class NotifyManager &#123; // å•ä¾‹å¼€å§‹ private volatile static NotifyManager INSTANCE; private NotifyManager(Context context) &#123; initNotifyManager(context); &#125; public static NotifyManager getInstance(Context context) &#123; if (INSTANCE == null) &#123; synchronized (NotifyManager.class) &#123; if (INSTANCE == null) &#123; INSTANCE = new NotifyManager(context); &#125; &#125; &#125; return INSTANCE; &#125; // å•ä¾‹ç»“æŸ private NotificationManager manager; // NotificationManagerCompat private NotificationCompat.Builder builder; //åˆå§‹åŒ–é€šçŸ¥æ é…ç½® private void initNotifyManager(Context context) &#123; context = context.getApplicationContext(); manager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE); // å¦‚æžœå­˜åœ¨åˆ™æ¸…é™¤ä¸Šä¸€ä¸ªæ¶ˆæ¯// manager.cancel(news_flag); builder = new NotificationCompat.Builder(context,NotifyCompatYc.QFMD_CHANNEL_ID); NotifyCompatYc.setONotifyChannel(manager,builder,NotifyCompatYc.QFMD_CHANNEL_ID,NotifyCompatYc.QFMD_CHANNEL_NAME); // è®¾ç½®æ ‡é¢˜ builder.setContentTitle(context.getResources().getString(R.string.qfmd_notify_title1)); // çŠ¶æ€æ çš„åŠ¨ç”»æé†’è¯­å¥ builder.setTicker(context.getResources().getString(R.string.qfmd_notify_ticker)); // ä»€ä¹ˆæ—¶å€™æé†’çš„ builder.setWhen(System.currentTimeMillis()); // è®¾ç½®é€šçŸ¥æ çš„ä¼˜å…ˆçº§ builder.setPriority(Notification.PRIORITY_DEFAULT); // è®¾ç½®ç‚¹å‡»å¯æ¶ˆå¤± builder.setAutoCancel(true); // è®¾ç½®æ˜¯å¦éœ‡åŠ¨ç­‰ builder.setDefaults(Notification.DEFAULT_VIBRATE); // è®¾ç½®icon builder.setSmallIcon(R.drawable.lingji_icon); // è®¾ç½®ç‚¹å‡»æ„å›¾ Intent intent = new Intent(context, GongdenggeActivity.class); Bundle bundle = new Bundle(); bundle.putBoolean(Contants.INTENT_GOTO_MYLMAP, true); intent.putExtras(bundle); intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); PendingIntent pendingIntent = PendingIntent.getActivity(context, 230, intent, PendingIntent.FLAG_UPDATE_CURRENT); builder.setContentIntent(pendingIntent); &#125; /** * æ˜¾ç¤ºç¥ˆç¦æ˜Žç¯è¿‡æœŸé€šçŸ¥ */ public void showQiFuLampOutOfDateNotify(Context context) &#123; // è®¾ç½®å†…å®¹ builder.setContentText(context.getResources().getString(R.string.qfmd_notify_content1)); manager.notify(13251, builder.build()); &#125; public void showQiFuLampBlessNotify(Context context) &#123; builder.setContentText(context.getResources().getString(R.string.qfmd_notify_content2)); manager.notify(13255, builder.build()); &#125;&#125; 4.3 å®‰è£…APK é¦–å…ˆåœ¨AndroidManifestæ–‡ä»¶ä¸­æ·»åŠ å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨çš„æƒé™: 1&lt;uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES"/&gt; è¿™æ ·ç³»ç»Ÿä¼šè‡ªåŠ¨è¯¢é—®ç”¨æˆ·å®ŒæˆæŽˆæƒã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å…ˆä½¿ç”¨ canRequestPackageInstalls()æŸ¥è¯¢æ˜¯å¦æœ‰æ­¤æƒé™ï¼Œå¦‚æžœæ²¡æœ‰çš„è¯ä½¿ç”¨Settings.ACTION_MANAGE_UNKNOWN_APP_SOURCESè¿™ä¸ªactionå°†ç”¨æˆ·å¼•å¯¼è‡³å®‰è£…æœªçŸ¥åº”ç”¨æƒé™ç•Œé¢åŽ»æŽˆæƒã€‚ 12345678910111213141516171819202122232425262728private static final int REQUEST_CODE_UNKNOWN_APP = 100; private void installAPK()&#123; if (Build.VERSION.SDK_INT &gt;= 26) &#123; boolean hasInstallPermission = getPackageManager().canRequestPackageInstalls(); if (hasInstallPermission) &#123; //å®‰è£…åº”ç”¨ &#125; else &#123; //è·³è½¬è‡³â€œå®‰è£…æœªçŸ¥åº”ç”¨â€æƒé™ç•Œé¢ï¼Œå¼•å¯¼ç”¨æˆ·å¼€å¯æƒé™ Uri selfPackageUri = Uri.parse("package:" + this.getPackageName()); Intent intent = new Intent(Settings.ACTION_MANAGE_UNKNOWN_APP_SOURCES, selfPackageUri); startActivityForResult(intent, REQUEST_CODE_UNKNOWN_APP); &#125; &#125;else &#123; //å®‰è£…åº”ç”¨ &#125; &#125; //æŽ¥æ”¶â€œå®‰è£…æœªçŸ¥åº”ç”¨â€æƒé™çš„å¼€å¯ç»“æžœ @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; super.onActivityResult(requestCode, resultCode, data); if (requestCode == REQUEST_CODE_UNKNOWN_APP) &#123; installAPK(); &#125; &#125; 4.4 SecurityExceptionçš„é—ªé€€ é—®é¢˜åŽŸå› ï¼šé¡¹ç›®ä½¿ç”¨äº†ActiveAndroidï¼Œåœ¨ 8.0 æˆ– 8.1 ç³»ç»Ÿä¸Šä½¿ç”¨ 26 æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬çš„ SDK æ—¶ï¼Œè°ƒç”¨ ContentResolver çš„ notifyChange æ–¹æ³•é€šçŸ¥æ•°æ®æ›´æ–°ï¼Œæˆ–è€…è°ƒç”¨ ContentResolver çš„ registerContentObserver æ–¹æ³•ç›‘å¬æ•°æ®å˜åŒ–æ—¶ï¼Œä¼šå‡ºçŽ°ä¸Šè¿°å¼‚å¸¸ã€‚ è§£å†³æ–¹æ¡ˆï¼š ï¼ˆ1ï¼‰åœ¨æ¸…å•æ–‡ä»¶é…ç½® 1234567&lt;provider android:name=&quot;com.activeandroid.content.ContentProvider&quot; android:authorities=&quot;com.ylmf.androidclient&quot; android:enabled=&quot;true&quot; android:exported=&quot;false&quot;&gt;&lt;/provider&gt;å¤åˆ¶ä»£ç  ï¼ˆ2ï¼‰åŽ»æŽ‰è¿™ä¸ªç›‘å¬åˆ·æ–°çš„æ–¹æ³•ï¼Œæ”¹ä¸ºå¹¿æ’­åˆ·æ–° 4.5 é™æ€å¹¿æ’­æ— æ³•æ­£å¸¸æŽ¥æ”¶ é—®é¢˜åŽŸå› ï¼š Android 8.0 å¼•å…¥äº†æ–°çš„å¹¿æ’­æŽ¥æ”¶å™¨é™åˆ¶ï¼Œå› æ­¤æ‚¨åº”è¯¥ç§»é™¤æ‰€æœ‰ä¸ºéšå¼å¹¿æ’­ Intent æ³¨å†Œçš„å¹¿æ’­æŽ¥æ”¶å™¨ è§£å†³æ–¹æ¡ˆï¼š ä½¿ç”¨åŠ¨æ€å¹¿æ’­ä»£æ›¿é™æ€å¹¿æ’­ 4.6 Caused by: java.lang.IllegalStateException: Only fullscreen opaque activities can request orientation 123456é—®é¢˜åŽŸå› ï¼š Android 8.0 éžå…¨å±é€æ˜Žé¡µé¢ä¸å…è®¸è®¾ç½®æ–¹å‘ï¼ˆåŽé¢8.1ç³»ç»Ÿè°·æ­Œå°±åŽ»æŽ‰äº†è¿™ä¸ªé™åˆ¶ï¼Œå¯èƒ½å¾ˆå¤šäººçœŸçš„ä¸ä¹ æƒ¯å§ï¼‰è§£å†³æ–¹æ¡ˆï¼š ï¼ˆ1ï¼‰android:windowIsTranslucentè®¾ç½®ä¸ºfalse (2)å¦‚æžœè¿˜æ˜¯æƒ³ç”¨çš„è¯ï¼Œå°±åŽ»æŽ‰æ¸…å•æ–‡ä»¶ä¸­Activityä¸­çš„android:screenOrientation=&quot;portrait&quot;ï¼Œ ï¼ˆ3ï¼‰å°±æ˜¯ä½¿ç”¨é€æ˜Žçš„dialogæˆ–è€…PopupWindowæ¥ä»£æ›¿ï¼Œä¹Ÿå¯ä»¥ç”¨DialogFragmentï¼Œçœ‹è‡ªå·±çš„éœ€æ±‚å’Œå–œå¥½. Android 9.0çš„é€‚é…9.1 CLEARTEXT communication to life.115.com not permitted by network security policy é—®é¢˜åŽŸå› ï¼š Android P é™åˆ¶äº†æ˜Žæ–‡æµé‡çš„ç½‘ç»œè¯·æ±‚ï¼ŒéžåŠ å¯†çš„æµé‡è¯·æ±‚éƒ½ä¼šè¢«ç³»ç»Ÿç¦æ­¢æŽ‰ è§£å†³æ–¹æ¡ˆï¼š åœ¨èµ„æºæ–‡ä»¶æ–°å»ºxmlç›®å½•ï¼Œæ–°å»ºæ–‡ä»¶ 1234&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;network-security-config&gt; &lt;base-config cleartextTrafficPermitted="true" /&gt;&lt;/network-security-config&gt; æ¸…å•æ–‡ä»¶é…ç½®ï¼š 1234567&lt;application android:networkSecurityConfig="@xml/network_security_config"&gt; &lt;!--9.0åŠ çš„ï¼Œå“¦å“¦--&gt; &lt;uses-library android:name="org.apache.http.legacy" android:required="false" /&gt; &lt;/application&gt; ä½†è¿˜æ˜¯å»ºè®®éƒ½ä½¿ç”¨httpsè¿›è¡Œä¼ è¾“ 9.2 å…¶ä»–Apiçš„ä¿®æ”¹ java.lang.IllegalArgumentException: Invalid Region.Op - only INTERSECT and DIFFERENCE are allowed 12345if (Build.VERSION.SDK_INT &gt;= 26) &#123; canvas.clipPath(mPath); &#125; else &#123; canvas.clipPath(mPath, Region.Op.REPLACE); &#125; æ€»ç»“ ç»è¿‡å‡ å¤©çš„è¸©å‘ï¼Œç»ˆäºŽæŠŠtargetSdkVersionå‡çº§åˆ°28ï¼Œå¯¹äºŽä»¥ä¸Šçš„ç»éªŒï¼Œä¹Ÿè®¸è¿˜å­˜åœ¨æŸäº›ç–æ¼çš„ï¼Œä¹Ÿå¸Œæœ›å¤§å®¶å¯ä»¥æŒ‡æ­£ï¼Œè¡¥å……ï¼Œå‘Šè¯‰ï¼Œå¸Œæœ›å¯¹ä½ æœ‰ä¸€å®šçš„å¸®åŠ©ï¼Œé„™äººä¹Ÿå¾ˆå¼€å¿ƒã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android Tips</tag>
        <tag>æƒé™</tag>
        <tag>é€‚é…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macç»ˆç«¯-iTerm2ä½¿ç”¨]]></title>
    <url>%2Fposts%2Fe6bc65de.html</url>
    <content type="text"><![CDATA[iTerm2 https://www.zhihu.com/question/27447370 https://medium.com/ayuth/iterm2-zsh-oh-my-zsh-the-most-power-full-of-terminal-on-macos-bdb2823fb04c https://jeremysu0131.github.io/Tool-Mac-iTerm-2-Oh-My-Zsh-Powerlevel9k-è¨­å®š/ æ™ºèƒ½é€‰ä¸­åŒå‡»é€‰ä¸­ã€ä¸‰å‡»é€‰ä¸­æ•´è¡Œã€å››å‡»æ™ºèƒ½é€‰ä¸­ï¼ˆæ™ºèƒ½è§„åˆ™å¯é…ç½®ï¼‰ï¼Œé€‰ä¸­å³å¤åˆ¶ å·§ç”¨ âŒ˜ é”®æŒ‰ä½ âŒ˜ é”® å¯ä»¥æ‹–æ‹½é€‰ä¸­çš„å­—ç¬¦ä¸²ï¼› ç‚¹å‡» urlï¼šè°ƒç”¨é»˜è®¤æµè§ˆå™¨è®¿é—®è¯¥ç½‘å€ï¼› ç‚¹å‡»æ–‡ä»¶ï¼šè°ƒç”¨é»˜è®¤ç¨‹åºæ‰“å¼€æ–‡ä»¶ï¼› å¦‚æžœæ–‡ä»¶åæ˜¯filename:42ï¼Œä¸”é»˜è®¤æ–‡æœ¬ç¼–è¾‘å™¨æ˜¯ Macvimã€Textmateæˆ–BBEditï¼Œå°†ä¼šç›´æŽ¥æ‰“å¼€åˆ°è¿™ä¸€è¡Œï¼› ç‚¹å‡»æ–‡ä»¶å¤¹ï¼šåœ¨ finder ä¸­æ‰“å¼€è¯¥æ–‡ä»¶å¤¹ï¼› åŒæ—¶æŒ‰ä½âŒ¥é”®ï¼Œå¯ä»¥ä»¥çŸ©å½¢é€‰ä¸­ï¼Œç±»ä¼¼äºŽ vim ä¸­çš„âŒƒ væ“ä½œã€‚ å¿«æ·é”®æ ‡ç­¾æ–°å»ºæ ‡ç­¾ï¼šâŒ˜ + t å…³é—­æ ‡ç­¾ï¼šâŒ˜ + w åˆ‡æ¢æ ‡ç­¾ï¼šâŒ˜ + æ•°å­— âŒ˜ + å·¦å³æ–¹å‘é”® åˆ‡æ¢å…¨å±ï¼šâŒ˜ + enter æŸ¥æ‰¾ï¼šâŒ˜ + f åˆ†å±åž‚ç›´åˆ†å±ï¼šâŒ˜ + d æ°´å¹³åˆ†å±ï¼šâŒ˜ + â‡§ + d åˆ‡æ¢å±å¹•ï¼šâŒ˜ + âŒ¥ + æ–¹å‘é”®âŒ˜ + [ æˆ– âŒ˜ + ] æŸ¥çœ‹åŽ†å²å‘½ä»¤ï¼šâŒ˜ + ; æŸ¥çœ‹å‰ªè´´æ¿åŽ†å²ï¼šâŒ˜ + â‡§ + h å…¶ä»–æ¸…é™¤å½“å‰è¡Œï¼šâŒƒ + u åˆ°è¡Œé¦–ï¼šâŒƒ + a åˆ°è¡Œå°¾ï¼šâŒƒ + e å‰è¿›åŽé€€ï¼šâŒƒ + f/b (ç›¸å½“äºŽå·¦å³æ–¹å‘é”®) ä¸Šä¸€æ¡å‘½ä»¤ï¼šâŒƒ + p æœç´¢å‘½ä»¤åŽ†å²ï¼šâŒƒ + r åˆ é™¤å½“å‰å…‰æ ‡çš„å­—ç¬¦ï¼šâŒƒ + d åˆ é™¤å…‰æ ‡ä¹‹å‰çš„å­—ç¬¦ï¼šâŒƒ + h åˆ é™¤å…‰æ ‡ä¹‹å‰çš„å•è¯ï¼šâŒƒ + w åˆ é™¤åˆ°æ–‡æœ¬æœ«å°¾ï¼šâŒƒ + k äº¤æ¢å…‰æ ‡å¤„æ–‡æœ¬ï¼šâŒƒ + t æ¸…å± 1ï¼šâŒ˜ + r æ¸…å± 2ï¼šâŒƒ + l æ—¶é—´çº¿ï¼šâŒ˜ + â‡§ + e è‡ªå¸¦æœ‰å“ªäº›å¾ˆå®žç”¨çš„åŠŸèƒ½/å¿«æ·é”®âŒ˜ + æ•°å­— åœ¨å„ tab æ ‡ç­¾ç›´æŽ¥æ¥å›žåˆ‡æ¢ é€‰æ‹©å³å¤åˆ¶ + é¼ æ ‡ä¸­é”®ç²˜è´´ï¼Œè¿™ä¸ªå¾ˆå®žç”¨ âŒ˜ + f æ‰€æŸ¥æ‰¾çš„å†…å®¹ä¼šè¢«è‡ªåŠ¨å¤åˆ¶ âŒ˜ + d æ¨ªç€åˆ†å± /âŒ˜ + â‡§ + d ç«–ç€åˆ†å± âŒ˜ + r = clearï¼Œè€Œä¸”åªæ˜¯æ¢åˆ°æ–°ä¸€å±ï¼Œä¸ä¼šæƒ³ clear ä¸€æ ·åˆ›å»ºä¸€ä¸ªç©ºå± âŒƒ + u æ¸…ç©ºå½“å‰è¡Œï¼Œæ— è®ºå…‰æ ‡åœ¨ä»€ä¹ˆä½ç½® è¾“å…¥å¼€å¤´å‘½ä»¤åŽ æŒ‰ âŒ˜ + ; ä¼šè‡ªåŠ¨åˆ—å‡ºè¾“å…¥è¿‡çš„å‘½ä»¤ âŒ˜ + â‡§ + h ä¼šåˆ—å‡ºå‰ªåˆ‡æ¿åŽ†å² å¯ä»¥åœ¨ Preferences &gt; keys è®¾ç½®å…¨å±€å¿«æ·é”®è°ƒå‡º itermï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥ç”¨è¿‡ Alfred å®žçŽ° å¸¸ç”¨çš„ä¸€äº›å¿«æ·é”®âŒ˜ + 1 / 2 å·¦å³ tab ä¹‹é—´æ¥å›žåˆ‡æ¢ï¼Œè¿™ä¸ªåœ¨ å‰é¢ å·²ç»ä»‹ç»è¿‡äº† 1âŒ˜â†` / `âŒ˜â†’` åˆ°ä¸€è¡Œå‘½ä»¤æœ€å·¦è¾¹/æœ€å³è¾¹ ï¼Œè¿™ä¸ªåŠŸèƒ½åŒ `C+a` / `C+e âŒ¥â† / âŒ¥â†’ æŒ‰å•è¯å‰ç§»/åŽç§»ï¼Œç›¸å½“ä¸Ž C+f / C+bï¼Œå…¶å®žè¿™ä¸ªåŠŸèƒ½åœ¨ Iterm ä¸­å·²ç»é¢„å®šä¹‰å¥½äº†ï¼ŒâŒ¥f / âŒ¥bï¼Œçœ‹ä¸ªäººä¹ æƒ¯äº† å¥½åƒå°±è¿™å‡ ä¸ª è®¾ç½®æ–¹æ³•å¦‚ä¸‹ å½“ç„¶é™¤äº†è¿™äº›å¯ä»¥è‡ªå®šä¹‰çš„ä¹Ÿä¸èƒ½å¿˜äº† linux ä¸‹é‚£äº›å¥½ç”¨çš„ç»„åˆ C+a / C+e è¿™ä¸ªå‡ ä¹Žåœ¨å“ªéƒ½å¯ä»¥ä½¿ç”¨ C+p / !! ä¸Šä¸€æ¡å‘½ä»¤ C+k ä»Žå…‰æ ‡å¤„åˆ è‡³å‘½ä»¤è¡Œå°¾ (æœ¬æ¥ C+u æ˜¯åˆ è‡³å‘½ä»¤è¡Œé¦–ï¼Œä½† iterm ä¸­æ˜¯åˆ æŽ‰æ•´è¡Œ) C+w A+d ä»Žå…‰æ ‡å¤„åˆ è‡³å­—é¦–/å°¾ C+h C+d åˆ æŽ‰å…‰æ ‡å‰åŽçš„è‡ªè´Ÿ C+y ç²˜è´´è‡³å…‰æ ‡åŽ C+r æœç´¢å‘½ä»¤åŽ†å²ï¼Œè¿™ä¸ªè¾ƒå¸¸ç”¨ æ ‡è®°è·³è½¬ ç±»ä¼¼ç¼–è¾‘å™¨çš„ mark å·¥å…·ï¼ŒiTerm2 ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œä½ç½®è®¾ç½®æ ‡è®° è®¾ç½®æ ‡è®°ï¼šâŒ˜ + â‡§ + m è·³è½¬åˆ°ä¸Šä¸ªæ ‡è®°ï¼šâŒ˜ + â‡§ + j å¤šä¸ªæ ‡è®°åˆ‡æ¢ï¼šâŒ˜ + â‡§ + æ–¹å‘é”® é€‰ä¸­å³å¤åˆ¶iterm2 æœ‰ 2 ç§å¥½ç”¨çš„é€‰ä¸­å³å¤åˆ¶æ¨¡å¼ã€‚ ä¸€ç§æ˜¯ç”¨é¼ æ ‡ï¼Œåœ¨ iterm2 ä¸­ï¼Œé€‰ä¸­æŸä¸ªè·¯å¾„æˆ–è€…æŸä¸ªè¯æ±‡ï¼Œé‚£ä¹ˆï¼Œiterm2 å°±è‡ª åŠ¨å¤åˆ¶äº†ã€‚å¦ä¸€ç§æ˜¯æ— é¼ æ ‡æ¨¡å¼ï¼ŒâŒ˜+f,å¼¹å‡º iterm2 çš„æŸ¥æ‰¾æ¨¡å¼ï¼Œè¾“å…¥è¦æŸ¥æ‰¾å¹¶å¤åˆ¶çš„å†…å®¹çš„å‰å‡ ä¸ªå­—æ¯ï¼Œç¡®è®¤æ‰¾åˆ°çš„æ˜¯è‡ªå·±çš„å†…å®¹ä¹‹åŽï¼Œè¾“å…¥ tabï¼ŒæŸ¥æ‰¾çª—å£å°†è‡ªåŠ¨å˜åŒ–å†…å®¹ï¼Œå¹¶å°†å…¶å¤åˆ¶ã€‚å¦‚æžœè¾“å…¥çš„æ˜¯ â‡§+tabï¼Œåˆ™è‡ªåŠ¨å°†æŸ¥æ‰¾å†…å®¹çš„å·¦è¾¹é€‰ä¸­å¹¶å¤åˆ¶ã€‚ è‡ªåŠ¨å®Œæˆè¾“å…¥æ‰“å¤´å‡ ä¸ªå­—æ¯ï¼Œç„¶åŽè¾“å…¥ âŒ˜+; iterm2 å°†è‡ªåŠ¨åˆ—å‡ºä¹‹å‰è¾“å…¥è¿‡çš„ç±»ä¼¼å‘½ä»¤ã€‚ å‰ªåˆ‡åŽ†å²è¾“å…¥ âŒ˜+â‡§+hï¼Œiterm2 å°†è‡ªåŠ¨åˆ—å‡ºå‰ªåˆ‡æ¿çš„åŽ†å²è®°å½•ã€‚å¦‚æžœéœ€è¦å°†å‰ªåˆ‡æ¿çš„åŽ†å²è®°å½•ä¿å­˜åˆ°ç£ç›˜ï¼Œåœ¨ Preferences &gt; General &gt; Save copy/paste history to disk ä¸­è®¾ç½®ã€‚ åŠæ—¶å›žæ”¾ æŸä¸ªäº¤äº’å‘½ä»¤ä¼šè¦†å†™å±å¹•ä¸Šçš„è¾“å…¥ï¼Œä¹‹å‰çš„åŽ†å²ä¿¡æ¯å¯èƒ½ä¼šè¢«è¦†ç›–æŽ‰ï¼Œæ— æ³•æŸ¥çœ‹ï¼Œiterm2 è¿™ä¸ªåŠæ—¶å›žæ”¾åŠŸèƒ½ï¼Œä¼šè®°å½•åŽ†å²è¾“å…¥ï¼Œè¾“å‡ºï¼Œæœ‰ç‚¹ç±»ä¼¼è§†é¢‘å½•åˆ¶ã€‚ è¿›å…¥å›žæ”¾ï¼šâŒ˜ + opt + b æ–¹å‘é”®æŽ§åˆ¶æ—¶é—´ ï¼šarrow é€€å‡ºå›žæ”¾ï¼šesc oh-my-zsh https://www.zhihu.com/question/29977255 æ™ºèƒ½è¡¥å…¨cd ~/ åˆ‡æ¢ç›®å½•ï¼Œæ•²å‡»ä¸¤ä¸‹tabï¼Œä¼šåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨é”®ç›˜ä¸Šä¸‹å·¦å³é”®æ¥é€‰æ‹©è¦è¿›å…¥çš„ç›®å½•ã€‚ å‘½ä»¤é€‰é¡¹è¡¥é½ï¼Œæ¯”å¦‚è¾“å…¥ dockerï¼Œç„¶åŽæŒ‰ tabï¼Œå³å¯æ˜¾ç¤ºå‡º docker éƒ½æœ‰å“ªäº›å‘½ä»¤é€‰é¡¹ã€‚ æ™ºèƒ½åˆ‡æ¢ç›®å½•è¿›å…¥ä¸€ä¸ªå¾ˆæ·±çš„ç›®å½•ï¼Œä¾‹å¦‚ /var/log/nginx/error/lastyear/may/first/monday, ç”¨ zsh å¯ä»¥è¿™æ ·è¾“å…¥ cd /v/l/n/e/l/m/f/m ç„¶åŽæŒ‰ tab å³å¯è¡¥å…¨æ•´ä¸ªè·¯å¾„ã€‚æˆ–è€…ä½ å®žçŽ°çŸ¥é“å½“å‰ç›®å½•åç§°ï¼Œå¯ä»¥ç›´æŽ¥è¾“å…¥ç›®å½•ï¼Œå³å¯è¿›åŽ»ç›®å½•ã€‚ åœ¨ zsh ä¸‹å¯ä»¥è®°å½•æœ€è¿‘è¿›è¿‡çš„ 10 ä¸ªç›®å½•ï¼Œåªéœ€è¦è¾“å…¥dï¼Œç„¶åŽå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ 0-9 çš„ç›®å½•ï¼Œè¾“å…¥cd -æ•°å­—å³å¯è¿›å…¥å¯¹åº”çš„ç›®å½•ã€‚ æˆ–è€…ç›´æŽ¥è¾“å…¥ cd - ç„¶åŽ tabï¼Œä¼šåˆ—å‡ºæœ€è¿‘ä½¿ç”¨è¿‡çš„ 31 ä¸ªç›®å½•ã€‚ é…ç½®éœ€è¦çš„æ—¶å€™æŠŠ iterm2 å‘¼å‡ºæ¥,ä¸éœ€è¦çš„æ—¶å€™è‡ªåŠ¨éšè—iTerm2 &gt; Preferences &gt; Keysï¼Œå·¦ä¾§ Hotkey é€‰é¡¹ å‹¾é€‰ Show/hide iTerm2 with a system-wide hotkeyï¼Œè®¾ç½®å¿«æ·é”® å¤ç”¨ä¸Šä¸ªä¼šè¯çš„ç›®å½•1iTerm2 &gt; Preferences &gt; Profiles &gt; Working Directory &gt; Reuse previous sessionâ€™s directory åˆ«å1alias zsh-config=&apos;vim ~/.zshrc&apos; ç»ˆç«¯ä¸‹å‘½ä»¤è¡Œä¸‹ç”¨ Sublimeã€vscodeã€atom æ‰“å¼€æ–‡ä»¶å¤¹æˆ–ç›®å½•vscode å‘½ä»¤è¡Œè°ƒç”¨VS Code æä¾›äº†ä¸€ä¸ª code å‘½ä»¤ï¼Œç”¨æ¥åœ¨ shell çŽ¯å¢ƒä¸‹è°ƒç”¨ç¼–è¾‘å™¨ã€‚ä½¿ç”¨å¿«æ·é”® â‡§âŒ˜Pï¼ˆæˆ– F1ï¼‰ å”¤èµ·å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å³å¯å®Œæˆå®‰è£…ã€‚ code å‘½ä»¤åŽå¯æŽ¥å¤šä¸ªè·¯å¾„æˆ–æ–‡ä»¶ï¼š 1code pro6.js pro6.scss ../ æ–‡ä»¶å¯¹æ¯”ï¼š 1code -d new-file.js old-file.js æ‰“å¼€æ–‡ä»¶å¹¶è·³è‡³æŒ‡å®šè¡Œï¼š 1code -g source/cn/static/global/tracker.js:15 æ›´å¤š code å‘½ä»¤è¡Œä½¿ç”¨æ–¹æ³•ï¼Œå‚è§ã€ŠAdditional Command line argumentsã€‹ã€‚ æ‰‹åŠ¨æ·»åŠ  æ‰“å¼€ç»ˆç«¯ï¼Œéšä¾¿ä¸€ä¸ªç›®å½•è¾“å…¥ 1cd æ£€æŸ¥æ˜¯å¦æœ‰.zshrcæ–‡ä»¶ 1ls -al 1) æ·»åŠ å¯åŠ¨å‘½ä»¤ 1sudo nano .zshrc åœ¨æ–‡ä»¶æœ«å°¾åŠ ä¸Šåˆ«åï¼š alias atom=&apos;/Applications/Atom.app/Contents/MacOS/Atom&apos;alias subl=&apos;/Applications/SublimeText.app/Contents/SharedSupport/bin/subl&apos;alias code=&apos;/Applications/Visual\ Studio\ Code.app/Contents/Resources/app/bin/code&apos; `âŒ˜ + X` å†è¾“å…¥ `y` ä¿å­˜ï¼Œé‡å¯ iterm2ã€‚ æŸ¥æ‰¾ APP è·¯å¾„ï¼š vimé…è‰²ç»ˆç«¯è¾“å…¥vim ~/.vimrcï¼Œè®¾ç½®å†…å®¹å¦‚ä¸‹ï¼Œ 123syntax onset numberset ruler powerlevel9kä¸»é¢˜ é…ç½®é¡¹Stylizing Your Prompt å…¶ä»–äººçš„é…ç½®Show Off Your Config æˆ‘çš„é…ç½®123456789101112131415161718export DEFAULT_USER=&quot;Leo&quot;export TERM=&quot;xterm-256color&quot;ZSH_THEME=&quot;powerlevel9k/powerlevel9k&quot;# è°ƒæ•´å­—ä½“æ¨¡å¼POWERLEVEL9K_MODE=&apos;nerdfont-complete&apos;# å·¦ä¾§æç¤ºç¬¦æ˜¾ç¤ºå†…å®¹:ç³»ç»Ÿæ—¶é—´(time)ã€rootæƒé™æŒ‡ç¤º(root_indicator)ã€username and host(context)ã€å½“å‰å·¥ä½œç›®å½•(dir)ã€ç›®å½•å†™å…¥æƒé™(dir_writable)ã€gitä¿¡æ¯(vcs)POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(time root_indicator dir dir_writable vcs)# å³ä¾§æç¤ºç¬¦æ˜¾ç¤ºå†…å®¹:ä¸Šä¸€å‘½ä»¤æ‰§è¡ŒçŠ¶æ€(status)ã€åŽå°ä»»åŠ¡ä¸ªæ•°(background_jobs)ã€ä¸Šä¸€å‘½ä»¤æ‰§è¡Œæ—¶é—´(command_execution_time)ã€å¯ç”¨RAM(ram)ã€ç³»ç»Ÿçš„è´Ÿè½½å‡å€¼(load)POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status background_jobs command_execution_time ram load)# contextä¹Ÿå°±æ˜¯ä½ çš„ç”¨æˆ·åä»¥åŠç»ˆç«¯åç§°ï¼Œé»˜è®¤æ˜¯ `%n@%m`ã€‚POWERLEVEL9K_CONTEXT_TEMPLATE=&quot;Leo&quot;# ä½ŽäºŽè¿™ä¸ªå€¼çš„å‘½ä»¤æ‰§è¡Œæ—¶é—´ä¸æ˜¾ç¤ºï¼Œ0 ä¹Ÿå°±æ˜¯å‘½ä»¤æ‰§è¡Œæ—¶é—´å¤šé•¿éƒ½æ˜¾ç¤ºPOWERLEVEL9K_COMMAND_EXECUTION_TIME_THRESHOLD=&quot;0&quot;# æ—¶é—´æ ¼å¼åŒ–POWERLEVEL9K_TIME_FORMAT=&quot;%D&#123;%H:%M&#125;&quot;# æ˜¾ç¤ºåˆ†æ”¯ç‰ˆæœ¬POWERLEVEL9K_SHOW_CHANGESET=true å¦‚æžœå›¾æ ‡æ˜¾ç¤ºä¸å‡ºæ¥å¯ä»¥è¿›å…¥ iTerm çš„è®¾ç½® &gt; Profiles &gt; Text &gt; Change Font &gt; é€‰æ‹© Hack Nerd Font å­—ä½“ Regular å¤§å° 18ptï¼Œå®ŒæˆåŽé‡æ–°å¯åŠ¨ iTerm ï¼Œè®¾ç½®å®Œæˆã€‚ æ’ä»¶ æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š~/.zshrc autojumpï¼šå¿«é€Ÿåˆ‡æ¢ç›®å½• zsh-syntax-highlightingï¼šzsh å¯ç”¨å‘½ä»¤é«˜äº® 1git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting zsh-autosuggestionsï¼šå‘½ä»¤è‡ªåŠ¨æç¤º 1git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions 1plugins=(brew git node npm osx autojump zsh-autosuggestions zsh-syntax-highlighting)]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>å·¥å…·</tag>
        <tag>iTerm2</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ„Ÿæ©èŠ‚çš„ç®€ä»‹å’Œä¹ ä¿—]]></title>
    <url>%2Fposts%2F3b06da8c.html</url>
    <content type="text"><![CDATA[æ„Ÿæ©èŠ‚çš„ç®€ä»‹æ¯å¹´11æœˆçš„ç¬¬å››ä¸ªæ˜ŸæœŸå››æ˜¯æ„Ÿæ©èŠ‚ã€‚æ„Ÿæ©èŠ‚æ˜¯ç¾Žå›½äººæ°‘ç‹¬åˆ›çš„â€”ä¸ªå¤è€èŠ‚æ—¥ï¼Œä¹Ÿæ˜¯ç¾Žå›½äººåˆå®¶æ¬¢èšçš„èŠ‚æ—¥ï¼Œå› æ­¤ç¾Žå›½äººæèµ·æ„Ÿæ©èŠ‚æ€»æ˜¯å€æ„Ÿäº²åˆ‡ã€‚ æ„Ÿæ©èŠ‚çš„ç”±æ¥ï¼Œè¦ä¸€ç›´è¿½æº¯åˆ°ç¾Žå›½åŽ†å²çš„å‘ç«¯ã€‚1620å¹´9æœˆï¼Œè‘—åçš„â€œäº”æœˆèŠ±â€å·èˆ¹ï¼Œæ»¡è½½ä¸å ªå¿å—è‹±å›½å›½å†…è¿«å®³çš„æ¸…æ•™å¾’102äººç¦»æ¸¯å¯èˆªã€‚åœ¨æ¼«æ— è¾¹é™…çš„å¤§æ´‹ä¸­ï¼Œæ¼‚æ³Šäº†æ•´æ•´65å¤©ï¼Œç»åŽ†äº†ç‹‚é£Žå·¨æµªçš„ç§ç§æŠ˜ç£¨ï¼Œæ–¹æ‰åœ¨é©¬è¨è¯¸å¡žå·žç§‘å¾·è§’é¡¶çš„æ™®æ´›æ–‡æ–¯æ•¦æ¸¯é å²¸ã€‚æŽ¥ç€ï¼Œâ€œäº”æœˆèŠ±â€å·æŒ‰è®¡åˆ’ç»§ç»­å—è¡Œï¼Œæ‰“ç®—åœ¨å¼—å‰å°¼äºšçš„è©¹å§†æ–¯æ•¦é å²¸ï¼Œä½†å› èˆªè¡Œè¯¯å·®ï¼Œä»–ä»¬æ¥åˆ°äº†æ™®åˆ©èŒ…æ–¯é™„è¿‘ã€‚åœ¨é‚£é‡Œï¼Œç”±äºŽå¯¹åœ°å½¢å’ŒçŽ¯å¢ƒèŒ«æ— æ‰€çŸ¥ï¼Œä»–ä»¬ååˆ†è°¨æ…Žåœ°è®©å¤§éƒ¨åˆ†äººä»ç„¶ç•™åœ¨èˆ¹ä¸Šï¼Œåªæ´¾ä¸€æ‰¹ç²¾æ˜Žå¼ºå¹²çš„äººå‡ºå¤–æŽ¢æµ‹åœ°å½¢ã€‚1ä¸ªæœˆåŽï¼Œä»–ä»¬ç»ˆäºŽå‘çŽ°äº†æ™®åˆ©èŒ…æ–¯æ¸¯å£ï¼Œå¹¶ä¸”æ„å¤–åœ°åœ¨è¿™é‡Œæ‰¾åˆ°äº†ä¸€ä¸ªä¼˜è‰¯çš„æ¸”æ¸¯ã€‚è¿™é‡Œæœ‰å‡ å—å·²ç»æ”¶èŽ·è¿‡çš„çŽ‰ç±³ç”°ï¼Œæœ‰æ¸…äº®çš„æ·¡æ°´å°æºªï¼Œè¿˜æœ‰ååˆ†å®œäºŽç­‘åž’è®¾é˜²çš„å±±ä¸˜ï¼Œä½†ç©ºæ— ä¸€äººã€‚åŽŸæ¥è¿™é‡Œæ˜¯ä¸€ä¸ªå°ç¬¬å®‰äººçš„æ‘è½ã€ä¸ä¹…å‰å¤©èŠ±æµè¡Œã€‚å¤ºåŽ»äº†å…¨ä½“æ‘æ°‘çš„ç”Ÿå‘½ã€‚å‡ å¤©åŽï¼Œâ€œäº”æœˆèŠ±â€å·å°±æ¸¡è¿‡ç§‘å¾·è§’æ¹¾ï¼Œåœ¨æ™®åˆ©èŒ…æ–¯æ¸¯æŠ›é”šä¸Šå²¸ã€‚è¿™é‡Œæˆä¸ºè‹±å›½ç§»æ°‘åœ¨ç¾Žæ´²çš„ç¬¬äºŒå—æ°¸ä¹…å±…ç•™åœ°ã€‚åŽæ¥ä»–ä»¬æŠŠç™»å²¸çš„ä¸€å—å¤§ç¤çŸ³å‘½åä¸ºæ™®åˆ©èŒ…æ–¯çŸ³ã€‚â€‹åˆ°äº†1620å¹´å’Œ1621å¹´ä¹‹äº¤çš„å†¬å¤©ï¼Œä»–ä»¬é‡åˆ°äº†éš¾ä»¥æƒ³è±¡çš„å›°éš¾ã€‚åœ¨å¯’å†·æ— æ¯”çš„å†¬å­£ï¼Œä»–ä»¬è‡ªå·±æ­ç›–çš„ç®€é™‹æˆ¿å±‹éš¾ä»¥æŠµå¾¡é£Žé›ªï¼Œç²®é£Ÿä¹Ÿä¸è¶³ï¼Œå†åŠ ä¸Šç¹é‡çš„åŠ³åŠ¨å’Œä¼ æŸ“ç—…çš„ä¾µè¢­ï¼Œå¾…åˆ°å†¬å¤©ç»“æŸï¼Œæ´»ä¸‹æ¥çš„ç§»æ°‘åªæœ‰50æ¥äººäº†ã€‚â€‹å¼€æ˜¥æ—¶èŠ‚ï¼Œæ™®åˆ©èŒ…æ–¯æ‘çš„ç§»æ°‘ç»“è¯†äº†ä¸€ä½åå«æ–¯Â·æ˜†å›¾çš„å°ç¬¬å®‰äººã€‚æ–¯Â·æ˜†å›¾å¯¹ç§»æ°‘ä»¬ååˆ†å‹å¥½ã€‚ä¸ä¹…ï¼Œä»–æŠŠè‡ªå·±éƒ¨è½çš„é…‹é•¿é©¬è¨ç´¢å¾·ä»‹ç»ç»™ç§»æ°‘ã€‚å¿ƒåœ°å–„è‰¯çš„å°ç¬¬å®‰äººçƒ­æƒ…åœ°æ¬¢è¿Žè¿œé“è€Œæ¥çš„å®¢äººï¼Œé©¬è¨ç´¢å¾·ä¸ä»…ç»™ç§»æ°‘å¸¦æ¥ç¤¼ç‰©ï¼Œè¿˜ç‰¹åœ°æ´¾æœ¬éƒ¨è½çš„äººæ•™ä¼šç§»æ°‘ä»¬æ€Žæ ·ç‹©çŒŽã€æ•é±¼å’Œç§æ¤çŽ‰ç±³ã€å—ç“œã€èš•è±†ã€‚åœ¨å°ç¬¬å®‰äººçš„å¸®åŠ©ä¸‹ï¼Œç§»æ°‘ä»¬ç»ˆäºŽèŽ·å¾—äº†ä¸°æ”¶ã€‚â€‹ç§»æ°‘ä»¬åœ¨æ¬¢åº†ä¸°æ”¶çš„æ—¥å­é‡Œï¼ŒæŒ‰ç…§ä¼ ç»Ÿä¹ ä¿—ï¼Œè§„å®šäº†æ„Ÿè°¢ä¸Šå¸çš„æ—¥å­ï¼Œå¹¶å†³å®šä¸ºæ„Ÿè°¢å°ç¬¬å®‰æœ‹å‹çš„çœŸè¯šå¸®åŠ©ï¼Œé‚€è¯·ä»–ä»¬ä¸€åŒæ¥æ¬¢åº†èŠ‚æ—¥ã€‚å°ç¬¬å®‰äººæ¬£ç„¶æŽ¥å—äº†é‚€è¯·ï¼Œå¹¶ä¸”æå‰é€æ¥äº†5åªé¹¿ï¼Œè¡¨ç¤ºä»–ä»¬çš„å‹å¥½æƒ…è°Šã€‚è¿™å°±æ˜¯æ„Ÿæ©èŠ‚çš„ç”±æ¥ã€‚ æ„Ÿæ©èŠ‚çš„ä¹ ä¿—é›†ä½“åº†ç¥åˆæ—¶æ„Ÿæ©èŠ‚æ²¡æœ‰å›ºå®šæ—¥æœŸï¼Œç”±å„å·žä¸´æ—¶å†³å®šï¼Œç›´åˆ°ç¾Žå›½ç‹¬ç«‹åŽï¼Œæ„Ÿæ©èŠ‚æ‰æˆä¸ºå…¨å›½æ€§çš„èŠ‚æ—¥ã€‚ æ¯é€¢æ„Ÿæ©èŠ‚è¿™ä¸€å¤©ï¼Œç¾Žå›½ä¸¾å›½ä¸Šä¸‹çƒ­é—¹éžå¸¸ï¼ŒåŸºç£å¾’æŒ‰ç…§ä¹ ä¿—å‰å¾€æ•™å ‚åšæ„Ÿæ©ç¥ˆç¥·ï¼ŒåŸŽå¸‚ä¹¡é•‡åˆ°å¤„éƒ½æœ‰åŒ–è£…æ¸¸è¡Œã€æˆå‰§è¡¨æ¼”æˆ–ä½“è‚²æ¯”èµ›ç­‰ã€‚åˆ†åˆ«äº†ä¸€å¹´çš„äº²äººä»¬ä¹Ÿä¼šä»Žå¤©å—æµ·åŒ—å½’æ¥ï¼Œä¸€å®¶äººå›¢åœ†ï¼Œå“å°ä»¥â€œç«é¸¡â€ä¸ºä¸»çš„æ„Ÿæ©èŠ‚ç¾Žé£Ÿã€‚ â€‹ç¾Žå›½å½“åœ°æœ€è‘—åçš„åº†å…¸åˆ™æ˜¯ä»Ž1924å¹´å¼€å§‹çš„æ¢…è¥¿ç™¾è´§æ„Ÿæ©èŠ‚æ¸¸è¡Œï¼ˆMacyâ€™s Thanksgiving Day Paradeï¼‰ã€‚ æ¯é€¢æ„Ÿæ©èŠ‚è¿™ä¸€å¤©ï¼Œç¾Žå›½ä¸¾å›½ä¸Šä¸‹çƒ­é—¹éžå‡¡ï¼Œäººä»¬æŒ‰ç…§ä¹ ä¿—å‰å¾€æ•™å ‚åšæ„Ÿæ©ç¥ˆç¥·ï¼ŒåŸŽä¹¡å¸‚é•‡åˆ°å¤„ä¸¾è¡ŒåŒ–è£…æ¸¸è¡Œã€æˆå‰§è¡¨æ¼”å’Œä½“è‚²æ¯”èµ›ç­‰ï¼Œå­¦æ ¡å’Œå•†åº—ä¹Ÿéƒ½æŒ‰è§„å®šæ”¾å‡ä¼‘æ¯ã€‚å­©å­ä»¬è¿˜æ¨¡ä»¿å½“å¹´å°ç¬¬å®‰äººçš„æ¨¡æ ·ç©¿ä¸Šç¦»å¥‡å¤æ€ªçš„æœè£…ï¼Œç”»ä¸Šè„¸è°±æˆ–æˆ´ä¸Šé¢å…·åˆ°è¡—ä¸Šå”±æ­Œã€å¹å–‡å­ã€‚æ•£å±…åœ¨ä»–ä¹¡å¤–åœ°çš„å®¶äººä¹Ÿä¼šå›žå®¶è¿‡èŠ‚ï¼Œä¸€å®¶äººå›¢å›¢å›´ååœ¨ä¸€èµ·ï¼Œå¤§åš¼ç¾Žå‘³ç«é¸¡ï¼Œå¹¶ä¸”å¯¹å®¶äººè¯´ï¼šâ€œè°¢è°¢ï¼â€ã€‚æ„Ÿæ©èŠ‚åŽï¼Œå­¦æ ¡ä¼šè®©åŒå­¦ä»¬ç”»ä¸€å¼ æ„Ÿæ©èŠ‚çš„ç”»ï¼Œå¤§éƒ¨åˆ†å­¦ç”Ÿéƒ½ç”»çš„æ˜¯ç«é¸¡ã€‚ åŒæ—¶ï¼Œå¥½å®¢çš„ç¾Žå›½äººä¹Ÿå¿˜ä¸æŽ‰è¿™ä¸€å¤©é‚€è¯·å¥½å‹ã€å•èº«æ±‰æˆ–è¿œç¦»å®¶ä¹¡çš„äººå…±åº¦ä½³èŠ‚ã€‚ä»Ž18ä¸–çºªèµ·ï¼Œç¾Žå›½å°±å¼€å§‹å‡ºçŽ°ä¸€ç§ç»™è´«ç©·äººå®¶é€ä¸€ç¯®å­é£Ÿç‰©çš„é£Žä¿—ã€‚å½“æ—¶æœ‰ä¸€ç¾¤å¹´è½»å¦‡å¥³æƒ³åœ¨ä¸€å¹´ä¸­é€‰ä¸€å¤©ä¸“é—¨åšå–„äº‹ï¼Œè®¤ä¸ºé€‰å®šæ„Ÿæ©èŠ‚æ˜¯æœ€æ°å½“ä¸è¿‡çš„ã€‚æ‰€ä»¥æ„Ÿæ©èŠ‚ä¸€åˆ°ï¼Œå¥¹ä»¬å°±è£…ä¸Šæ»¡æ»¡ä¸€ç¯®é£Ÿç‰©äº²è‡ªé€åˆ°ç©·äººå®¶ã€‚è¿™ä»¶äº‹è¿œè¿‘ä¼ é—»ï¼Œä¸ä¹…å°±æœ‰è®¸å¤šäººå­¦ç€å¥¹ä»¬çš„æ ·å­åšèµ·æ¥ã€‚ä¸ç®¡é‡åˆ°è°ï¼Œä»–ä»¬éƒ½ä¼šè¯´ï¼šâ€œThank youï¼â€ èŠ‚æ—¥è´­ç‰©æ„Ÿæ©èŠ‚è´­ç‰©å·²ç»æˆä¸ºäº†ç¾Žå›½äººçš„ä¹ ä¿—ã€‚ä»Žæ„Ÿæ©èŠ‚åˆ°åœ£è¯žèŠ‚è¿™ä¸€ä¸ªæœˆï¼Œç¾Žå›½é›¶å”®ä¸šå¥¥å·´é©¬ç‰¹èµ¦ç«é¸¡â€œå‹‡æ°”â€ã€‚â€‹æ€»é”€å”®é¢èƒ½å åˆ°å…¨å¹´çš„1/3å¼ºï¼Œæ˜¯å„ä¸ªå•†å®¶ä¼ ç»Ÿçš„æ‰“æŠ˜ä¿ƒé”€æ—ºå­£ã€‚ç–¯ç‹‚çš„è´­ç‰©æœˆä»Žæ„Ÿæ©èŠ‚çš„æ¬¡æ—¥ï¼ˆæ˜ŸæœŸäº”ï¼‰å¼€å§‹ï¼Œè¿™ä¸€å¤©å³è¢«ç§°ä¸ºBlack Fridayï¼ˆé»‘è‰²æ˜ŸæœŸäº”ï¼‰ã€‚ä¹‹æ‰€ä»¥å«è¿™ä¸ªåå­—ï¼Œæ®è¯´æ˜¯å› ä¸ºå‘¨äº”è¿™å¤©ä¸€å¤§æ—©ï¼Œæ‰€æœ‰äººéƒ½è¦æ‘¸ç€é»‘å†²åˆ°å•†åœºæŽ’é˜Ÿä¹°ä¾¿å®œè´§ï¼Œè¿™ç§è¡Œä¸ºæœ‰ä¸ªéžå¸¸å½¢è±¡çš„è¯´æ³•ï¼Œå«Early Birdï¼ˆæ—©èµ·çš„é¸Ÿå„¿ï¼‰[4]ã€‚åœ¨å¤–å›½â€œæ„Ÿæ©èŠ‚â€å’Œä¸­å›½çš„æ˜¥èŠ‚ä¸€æ ·é‡è¦ï¼ æ¯å¹´ä¸€åº¦çš„æ€»ç»Ÿæ”¾ç”Ÿç«é¸¡ä»ªå¼å§‹äºŽ1947å¹´æœé²é—¨æ€»ç»Ÿå½“æ”¿æ—¶æœŸï¼Œä½†å®žé™…ä¸Šè¿™ä¸ªä¼ ç»Ÿä»ªå¼å¯ä»¥è¿½æº¯åˆ°ç¾Žå›½å†…æˆ˜æž—è‚¯æ€»ç»Ÿå½“æ”¿çš„æ—¶æœŸã€‚1863å¹´çš„ä¸€å¤©ï¼Œæž—è‚¯çš„å„¿å­æ³°å¾·çªç„¶é—¯å…¥å†…é˜ä¼šè®®è¯·æ±‚èµ¦å…ä¸€åªåå«æ°å…‹çš„å® ç‰©ç«é¸¡ï¼Œå› ä¸ºè¿™åªè¢«é€è¿›ç™½å®«çš„ç«é¸¡ï¼Œå³å°†æˆä¸ºäººä»¬çš„æ„Ÿæ©èŠ‚å¤§é¤ã€‚ â€‹2006å¹´11æœˆ22æ—¥ï¼Œå¸ƒä»€åœ¨ç™½å®«çŽ«ç‘°èŠ±å›­ä¸¾è¡Œæ„Ÿæ©èŠ‚æ”¾ç”Ÿä»ªå¼ä¸Šï¼Œç‰¹èµ¦äº†ä¸€åªåå¸ƒä»€ç‰¹èµ¦â€œé£žé¸Ÿâ€ç«é¸¡å«â€œé£žé¸Ÿâ€çš„ç«é¸¡ã€‚ ç¾Žå›½æ€»ç»Ÿå¥¥å·´é©¬25å·ç‰¹èµ¦æ„Ÿæ©èŠ‚ç«é¸¡ï¼Žå¹¶å°†ç«é¸¡è¢«å‘½åä¸ºâ€œå‹‡æ°”â€ã€‚è¿™ä¹Ÿæ˜¯ä»–ä¸Šä»»ä»¥æ¥ï¼Œé¦–æ¬¡ç‰¹èµ¦ç«é¸¡ï¼Žå¥¥å·´é©¬å¹¶å¯¹ä¿æŠ¤ç¾Žå›½äººæ°‘èº«å®¶å®‰å…¨çš„è‹±å‹‡æˆ˜å£«è¡¨ç¤ºæ„Ÿæ©ã€‚ æ¯å¹´11æœˆçš„ç¬¬4ä¸ªæ˜ŸæœŸå››æ˜¯ç¾Žå›½æ„Ÿæ©èŠ‚ã€‚åœ¨å¥³å„¿è¨èŽŽå’ŒçŽ›ä¸½äºšçš„é™ªä¼´ä¸‹ï¼Œå¥¥å·´é©¬ç‰¹èµ¦äº†æœ¬æ¥è¦ç”¨åšç›˜ä¸­é¤çš„ç«é¸¡ï¼Žå¥¥å·´é©¬è¯´ï¼Œæˆ‘åŽŸæœ¬æ‰“ç®—åƒæŽ‰è¿™åªç«é¸¡ã€‚ç”±äºŽè¨èŽŽå’ŒçŽ›ä¸½äºšçš„å¹²é¢„ï¼Œæˆ‘èµ¦å…äº†â€œå‹‡æ°”â€ã€‚è¿™åªç«é¸¡å°†è¢«é€åˆ°è¿ªå£«å°¼ä¹å›­ã€‚ä¸ºé˜²æ­¢æ„å¤–ï¼Œå½“å±€è¿˜å‡†å¤‡äº†ä¸€åªå¤‡ç”¨ç«é¸¡ï¼Œåå«â€œå¡ç½—ç³å¨œâ€ã€‚]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Webviewå¸¸è§é—®é¢˜æ±‡æ€»]]></title>
    <url>%2Fposts%2F8c79d027.html</url>
    <content type="text"><![CDATA[å‰è¨€ é€šå¸¸æˆ‘ä»¬åœ¨è‡ªå·±å¼€å‘çš„ APP ä¸­æ‰“å¼€ç½‘é¡µæ— éžä¸¤ç§æ–¹æ³•ï¼š ä¸€æ˜¯è·³è½¬åˆ°ç³»ç»Ÿè‡ªå¸¦çš„æµè§ˆå™¨ï¼ŒäºŒæ˜¯ä½¿ç”¨ WebView æŽ§ä»¶åŠ è½½é¡µé¢ã€‚ä½¿ç”¨ WebView æŽ§ä»¶çš„å¥½å¤„å°±æ˜¯å¯ä»¥é€šè¿‡å„ç§ api æŽ¥å£æ¥å®šåˆ¶å„ç§è¡Œä¸ºï¼Œå¸¸ç”¨çš„å‡ ä¸ªè®¾ç½®åœ°æ–¹ä¸º WebSettingsã€JavaScriptInterfaceã€WebViewClient å’ŒWebChromeClientã€‚å¹³æ—¶å‡ºçŽ°çš„é—®é¢˜éƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹è¿™äº›è®¾ç½®æ¥è§£å†³ã€‚ é—®é¢˜æ€»ç»“1ã€ä½¿ç”¨äº† WebView è¿˜æ˜¯è·³è½¬åˆ°äº†ç³»ç»Ÿè‡ªå¸¦çš„æµè§ˆå™¨ï¼Ÿå¾ˆç®€å•çš„è§£å†³æ–¹æ³•ï¼Œä¸ºä½ çš„ webview è®¾ç½®ä¸€ä¸ªæ–°çš„ WebViewClientã€‚ 1234567webView.setWebViewClient(new WebViewClient()&#123; @Override public boolean shouldOverrideUrlLoading(WebView view, String url) &#123; view.loadUrl(url); return true; &#125;&#125;); 12// æˆ–è€…ç›´æŽ¥æ·»åŠ ï¼Œæ•ˆæžœæ˜¯ä¸€æ ·çš„webView.setWebViewClient(new WebViewClient()); 2ã€èŽ·å–ç½‘é¡µçš„æ ‡é¢˜å’Œå›¾æ ‡é€šè¿‡ WebChromeClient å¯ä»¥èŽ·å–åˆ°è¿™äº›ä¿¡æ¯ã€‚ 1234567891011121314webView.setWebChromeClient(new WebChromeClient() &#123; @Override public void onReceivedTitle(WebView view, String title) &#123; super.onReceivedTitle(view, title); setTitle(title); &#125; @Override public void onReceivedIcon(WebView view, Bitmap icon) &#123; super.onReceivedIcon(view, icon); setIcon(icon); &#125;&#125;); ä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå½“é€šè¿‡ webView.goBack() æ–¹å¼è¿”å›žä¸Šä¸€çº§Webé¡µé¢çš„æ—¶å€™ä¸ä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤ä¼šå¯¼è‡´æ ‡é¢˜æ— æ³•è·ŸéšåŽ†å²è®°å½•è¿”å›žä¸Šä¸€çº§é¡µé¢ã€‚æ‰€ä»¥éœ€è¦åœ¨ onPageFinished() ä¸­å¯¹ç•Œé¢æ ‡é¢˜é‡æ–°è®¾ç½®ã€‚ 1234567webView.setWebViewClient(new WebViewClient()&#123; @Override public void onPageFinished(WebView view, String url) &#123; super.onPageFinished(view, url); setTitle(String.valueOf(view.getTitle())); &#125;&#125;); 3ã€è¿”å›žé”®å®žçŽ°ç½‘é¡µçš„åŽé€€é”®åœ¨ WebView ä¸­å¯ä»¥é€šè¿‡ goBack() æ–¹æ³•åŽé€€åˆ°åŽ†å²è®°å½•çš„ä¸Šä¸€é¡¹ã€‚ 12345678// åœ¨ Actvity ä¸­ç›‘å¬è¿”å›žé”®æŒ‰é’® @Override public void onBackPressed() &#123; if (webView.canGoBack()) webView.goBack(); else super.onBackPressed(); &#125; 4ã€è®¾ç½® WebView çš„ headeråœ¨ WebView çš„ loadUrl() æ–¹æ³•ä¸­ä¼ å…¥ Header å‚æ•°å³å¯ã€‚ 1234567public void loadURLWithHTTPHeaders() &#123; final String url = "http://cpacm.net"; WebView webView = new WebView(getActivity()); Map&lt;String,String&gt; extraHeaders = new HashMap&lt;String, String&gt;(); extraHeaders.put("Referer", "http://www.google.com"); webView.loadUrl(url, extraHeaders);&#125; 5ã€è®¾ç½® WebView çš„ User-Agentä¸è¦è¯•å›¾åœ¨ Header é‡Œé¢åŽ»ä¿®æ”¹ï¼Œè€Œæ˜¯åœ¨ WebSettings ä¿®æ”¹ 1webView.getSettings().setUserAgentString("Mozilla/5.0 (Windows NT 10.0; WOW64; rv:50.0) Gecko/20100101 Firefox/50.0"); 6ã€å¦‚ä½•è®¾ç½® WebView çš„ç¼“å­˜å½“éœ€è¦æœ¬åœ°ç¼“å­˜ç½‘é¡µçš„æ—¶å€™å°±éœ€è¦æ‰“å¼€ WebViewSettings çš„ç¼“å­˜å¼€å…³,è¿™æ ·å­å½“ä¸‹æ¬¡è¿›åˆ°è¯¥é¡µé¢æ— ç½‘ç»œçš„æƒ…å†µä¸‹ä¹Ÿèƒ½æ‰“å¼€é¡µé¢ã€‚ 123456789WebSettings settings = webView.getSettings();settings.setAppCacheEnabled(true); //å¯ç”¨åº”ç”¨ç¼“å­˜settings.setDomStorageEnabled(true); //å¯ç”¨æˆ–ç¦ç”¨DOMç¼“å­˜ã€‚settings.setDatabaseEnabled(true); //å¯ç”¨æˆ–ç¦ç”¨DOMç¼“å­˜ã€‚if (SystemUtil.isNetworkConnected()) &#123; //åˆ¤æ–­æ˜¯å¦è”ç½‘ settings.setCacheMode(WebSettings.LOAD_DEFAULT); //é»˜è®¤çš„ç¼“å­˜ä½¿ç”¨æ¨¡å¼&#125; else &#123; settings.setCacheMode(WebSettings.LOAD_CACHE_ONLY); //ä¸ä»Žç½‘ç»œåŠ è½½æ•°æ®ï¼Œåªä»Žç¼“å­˜åŠ è½½æ•°æ®ã€‚&#125; å½“æˆ‘ä»¬åŠ è½½Htmlæ—¶å€™ï¼Œä¼šåœ¨æˆ‘ä»¬data/åº”ç”¨packageä¸‹ç”Ÿæˆdatabaseä¸Žcacheä¸¤ä¸ªæ–‡ä»¶å¤¹:æˆ‘ä»¬è¯·æ±‚çš„Urlè®°å½•æ˜¯ä¿å­˜åœ¨webviewCache.dbé‡Œï¼Œè€Œurlçš„å†…å®¹æ˜¯ä¿å­˜åœ¨webviewCacheæ–‡ä»¶å¤¹ä¸‹.WebViewä¸­å­˜åœ¨ç€ä¸¤ç§ç¼“å­˜ï¼šç½‘é¡µæ•°æ®ç¼“å­˜ï¼ˆå­˜å‚¨æ‰“å¼€è¿‡çš„é¡µé¢åŠèµ„æºï¼‰ã€H5ç¼“å­˜ï¼ˆå³AppCacheï¼‰ã€‚ ç½‘é¡µæ•°æ®ç¼“å­˜ WebSettingså¯è®¾ç½®ç¼“å­˜æ–¹å¼ï¼š â‘ LOAD_DEFAULTï¼šé»˜è®¤è®¾ç½®ï¼Œå½“æœ‰ç¼“å­˜è€Œä¸”æ²¡æœ‰è¿‡æœŸä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™ä½¿ç”¨ç½‘ç»œæ•°æ®ã€‚ â‘¡LOAD_CACHE_ELSE_NETWORKï¼šåªè¦æœ‰ç¼“å­˜å°±ä½¿ç”¨ç¼“å­˜ï¼Œå³ä½¿å·²ç»è¿‡æœŸï¼Œå¦åˆ™ä½¿ç”¨ç½‘ç»œæ•°æ®ã€‚ â‘¢LOAD_NO_CACHEï¼šä¸é€‚ç”¨ç¼“å­˜ï¼ŒåªåŠ è½½ç½‘ç»œæ•°æ®ã€‚ â‘£LOAD_CACHE_ONLYï¼šä¸ä½¿ç”¨ç½‘ç»œï¼Œåªä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚ â‘¤LOAD_CACHE_NORMALï¼š API level 17ä¸­å·²ç»åºŸå¼ƒ, ä»ŽAPI level 11å¼€å§‹ä½œç”¨åŒLOAD_DEFAULTæ¨¡å¼ æ–¹æ³•è°ƒç”¨ï¼š webSettings.setCacheMode(WebSettings.LOAD_NO_CACHE); AppCache æŸ¥é˜…ç›¸å…³èµ„æ–™ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š â‘ AppCacheç®€ä»‹ï¼šå¯¹appå†…å­˜ç¼“å­˜çš„æ–¹æ¡ˆï¼Œå…·ä½“è¡¨çŽ°ä¸ºå½“è¯·æ±‚æŸä¸ªæ–‡ä»¶æ—¶ä¸æ˜¯ä»Žç½‘ç»œèŽ·å–è¯¥æ–‡ä»¶ï¼Œè€Œæ˜¯ä»Žæœ¬åœ°èŽ·å–ã€‚ â‘¡AppCacheçš„å¥½å¤„ï¼šç¦»çº¿æµè§ˆ ï¼Œé€Ÿåº¦ - å·²ç¼“å­˜èµ„æºåŠ è½½å¾—æ›´å¿«ï¼Œå‡å°‘æœåŠ¡å™¨è´Ÿè½½ - æµè§ˆå™¨å°†åªä»ŽæœåŠ¡å™¨ä¸‹è½½æ›´æ–°è¿‡æˆ–æ›´æ”¹è¿‡çš„èµ„æºã€‚åœ¨WebViewä¸­ä½¿ç”¨ç›¸å…³api1ã€ç¼“å­˜æž„æˆæ ¹æ®setAppCachePath(String appCachePath)æä¾›çš„è·¯å¾„ï¼Œåœ¨H5ä½¿ç”¨ç¼“å­˜è¿‡ç¨‹ä¸­ç”Ÿæˆçš„ç¼“å­˜æ–‡ä»¶ã€‚/data/data/package_name/cache//data/data/package_name/database/webview.db/data/data/package_name/database/webviewCache.dbç»¼åˆå¯ä»¥å¾—çŸ¥ webview ä¼šå°†æˆ‘ä»¬æµè§ˆè¿‡çš„ç½‘é¡µurlå·²ç»ç½‘é¡µæ–‡ä»¶(cssã€å›¾ç‰‡ã€jsç­‰)ä¿å­˜åˆ°æ•°æ®åº“è¡¨ä¸­ 2ã€ç¼“å­˜æ¨¡å¼æ— æ¨¡å¼é€‰æ‹©ï¼Œé€šè¿‡setAppCacheEnabled(boolean flag)è®¾ç½®æ˜¯å¦æ‰“å¼€ã€‚é»˜è®¤å…³é—­ï¼Œå³ï¼ŒH5çš„ç¼“å­˜æ— æ³•ä½¿ç”¨ã€‚ 3ã€æ¸…é™¤ç¼“å­˜æ‰¾åˆ°è°ƒç”¨setAppCachePath(String appCachePath)è®¾ç½®ç¼“å­˜çš„è·¯å¾„ï¼ŒæŠŠå®ƒä¸‹é¢çš„æ–‡ä»¶å…¨éƒ¨åˆ é™¤å°±OKäº†ã€‚ 4ã€æŽ§åˆ¶å¤§å°é€šè¿‡setAppCacheMaxSize(long appCacheMaxSize)è®¾ç½®ç¼“å­˜æœ€å¤§å®¹é‡ï¼Œé»˜è®¤ä¸ºMax Integerã€‚åŒæ—¶ï¼Œå¯èƒ½é€šè¿‡è¦†ç›–WebChromeClient.onReachedMaxAppCacheSize(long requiredStorage, long quota, WebStorage.QuotaUpdater quotaUpdater)æ¥è®¾ç½®ç¼“å­˜è¶…è¿‡å…ˆå‰è®¾ç½®çš„æœ€å¤§å®¹é‡æ—¶çš„ç­–ç•¥ã€‚ å¦‚ï¼šwww.taobao.comçš„cache-controlä¸ºno-cacheï¼Œåœ¨æ¨¡å¼LOAD_DEFAULTä¸‹ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šä»Žç½‘ç»œä¸Šå–æ•°æ®ï¼Œå¦‚æžœæ²¡æœ‰ç½‘ç»œï¼Œå°±ä¼šå‡ºçŽ°é”™è¯¯é¡µé¢ï¼›åœ¨LOAD_CACHE_ELSE_NETWORKæ¨¡å¼ä¸‹ï¼Œæ— è®ºæ˜¯å¦æœ‰ç½‘ç»œï¼Œåªè¦æœ¬åœ°æœ‰ç¼“å­˜ï¼Œéƒ½ä½¿ç”¨ç¼“å­˜ã€‚æœ¬åœ°æ²¡æœ‰ç¼“å­˜æ—¶æ‰ä»Žç½‘ç»œä¸ŠèŽ·å–ã€‚www.360.com.cnçš„cache-controlä¸ºmax-age=60ï¼Œåœ¨ä¸¤ç§æ¨¡å¼ä¸‹éƒ½ä½¿ç”¨æœ¬åœ°ç¼“å­˜æ•°æ®ã€‚ æ€»ç»“ï¼šæ ¹æ®ä»¥ä¸Šä¸¤ç§æ¨¡å¼ï¼Œå»ºè®®ç¼“å­˜ç­–ç•¥ä¸ºï¼Œåˆ¤æ–­æ˜¯å¦æœ‰ç½‘ç»œï¼Œæœ‰çš„è¯ï¼Œä½¿ç”¨LOAD_DEFAULTï¼Œæ— ç½‘ç»œæ—¶ï¼Œä½¿ç”¨LOAD_CACHE_ELSE_NETWORKã€‚ è®¾ç½®WebView ç¼“å­˜æ¨¡å¼ 12345678910111213141516171819private void initWebView() &#123; mWebView.getSettings().setJavaScriptEnabled(true); mWebView.getSettings().setRenderPriority(RenderPriority.HIGH); mWebView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT); //è®¾ç½® ç¼“å­˜æ¨¡å¼ // å¼€å¯ DOM storage API åŠŸèƒ½ mWebView.getSettings().setDomStorageEnabled(true); //å¼€å¯ database storage API åŠŸèƒ½ mWebView.getSettings().setDatabaseEnabled(true); String cacheDirPath = getFilesDir().getAbsolutePath()+APP_CACAHE_DIRNAME; // String cacheDirPath = getCacheDir().getAbsolutePath()+Constant.APP_DB_DIRNAME; Log.i(TAG, "cacheDirPath="+cacheDirPath); //è®¾ç½®æ•°æ®åº“ç¼“å­˜è·¯å¾„ mWebView.getSettings().setDatabasePath(cacheDirPath); //è®¾ç½® Application Caches ç¼“å­˜ç›®å½• mWebView.getSettings().setAppCachePath(cacheDirPath); //å¼€å¯ Application Caches åŠŸèƒ½ mWebView.getSettings().setAppCacheEnabled(true); &#125; æ¸…é™¤ç¼“å­˜ 1234567891011121314151617181920212223242526272829/** * æ¸…é™¤WebViewç¼“å­˜ */ public void clearWebViewCache()&#123; //æ¸…ç†Webviewç¼“å­˜æ•°æ®åº“ try &#123; deleteDatabase("webview.db"); deleteDatabase("webviewCache.db"); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; //WebView ç¼“å­˜æ–‡ä»¶ File appCacheDir = new File(getFilesDir().getAbsolutePath()+APP_CACAHE_DIRNAME); Log.e(TAG, "appCacheDir path="+appCacheDir.getAbsolutePath()); File webviewCacheDir = new File(getCacheDir().getAbsolutePath()+"/webviewCache"); Log.e(TAG, "webviewCacheDir path="+webviewCacheDir.getAbsolutePath()); //åˆ é™¤webview ç¼“å­˜ç›®å½• if(webviewCacheDir.exists())&#123; deleteFile(webviewCacheDir); &#125; //åˆ é™¤webview ç¼“å­˜ ç¼“å­˜ç›®å½• if(appCacheDir.exists())&#123; deleteFile(appCacheDir); &#125; &#125; å®Œæ•´ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209package com.example.webviewtest; import java.io.File; import android.app.Activity; import android.graphics.Bitmap; import android.os.Bundle; import android.util.Log; import android.view.View; import android.webkit.JsPromptResult; import android.webkit.JsResult; import android.webkit.WebChromeClient; import android.webkit.WebSettings; import android.webkit.WebSettings.RenderPriority; import android.webkit.WebView; import android.webkit.WebViewClient; import android.widget.RelativeLayout; import android.widget.TextView; import android.widget.Toast; public class MainActivity extends Activity &#123; private static final String TAG = MainActivity.class.getSimpleName(); private static final String APP_CACAHE_DIRNAME = "/webcache"; private TextView tv_topbar_title; private RelativeLayout rl_loading; private WebView mWebView; private String url; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); //url:http://m.dianhua.cn/detail/31ccb426119d3c9eaa794df686c58636121d38bc?apikey=jFaWGVHdFVhekZYWTBWV1ZHSkZOVlJWY&amp;app=com.yulore.yellowsdk_ios&amp;uid=355136051337627 url = "http://m.dianhua.cn/detail/31ccb426119d3c9eaa794df686c58636121d38bc?apikey=jFaWGVHdFVhekZYWTBWV1ZHSkZOVlJWY&amp;app=com.yulore.yellowsdk_ios&amp;uid=355136051337627"; findView(); &#125; private void findView() &#123; tv_topbar_title = (TextView) findViewById(R.id.tv_topbar_title); rl_loading = (RelativeLayout) findViewById(R.id.rl_loading); mWebView = (WebView) findViewById(R.id.mWebView); initWebView(); mWebView.setWebViewClient(new WebViewClient() &#123; @Override public void onLoadResource(WebView view, String url) &#123; Log.i(TAG, "onLoadResource url="+url); super.onLoadResource(view, url); &#125; @Override public boolean shouldOverrideUrlLoading(WebView webview, String url) &#123; Log.i(TAG, "intercept url="+url); webview.loadUrl(url); return true; &#125; @Override public void onPageStarted(WebView view, String url, Bitmap favicon) &#123; Log.e(TAG, "onPageStarted"); rl_loading.setVisibility(View.VISIBLE); // æ˜¾ç¤ºåŠ è½½ç•Œé¢ &#125; @Override public void onPageFinished(WebView view, String url) &#123; String title = view.getTitle(); Log.e(TAG, "onPageFinished WebView title=" + title); tv_topbar_title.setText(title); tv_topbar_title.setVisibility(View.VISIBLE); rl_loading.setVisibility(View.GONE); // éšè—åŠ è½½ç•Œé¢ &#125; @Override public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) &#123; rl_loading.setVisibility(View.GONE); // éšè—åŠ è½½ç•Œé¢ Toast.makeText(getApplicationContext(), "", Toast.LENGTH_LONG).show(); &#125; &#125;); mWebView.setWebChromeClient(new WebChromeClient() &#123; @Override public boolean onJsAlert(WebView view, String url, String message, JsResult result) &#123; Log.e(TAG, "onJsAlert " + message); Toast.makeText(getApplicationContext(), message, Toast.LENGTH_SHORT).show(); result.confirm(); return true; &#125; @Override public boolean onJsConfirm(WebView view, String url, String message, JsResult result) &#123; Log.e(TAG, "onJsConfirm " + message); return super.onJsConfirm(view, url, message, result); &#125; @Override public boolean onJsPrompt(WebView view, String url, String message, String defaultValue, JsPromptResult result) &#123; Log.e(TAG, "onJsPrompt " + url); return super.onJsPrompt(view, url, message, defaultValue, result); &#125; &#125;); mWebView.loadUrl(url); &#125; private void initWebView() &#123; mWebView.getSettings().setJavaScriptEnabled(true); mWebView.getSettings().setRenderPriority(RenderPriority.HIGH); mWebView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT); //è®¾ç½® ç¼“å­˜æ¨¡å¼ // å¼€å¯ DOM storage API åŠŸèƒ½ mWebView.getSettings().setDomStorageEnabled(true); //å¼€å¯ database storage API åŠŸèƒ½ mWebView.getSettings().setDatabaseEnabled(true); String cacheDirPath = getFilesDir().getAbsolutePath()+APP_CACAHE_DIRNAME; // String cacheDirPath = getCacheDir().getAbsolutePath()+Constant.APP_DB_DIRNAME; Log.i(TAG, "cacheDirPath="+cacheDirPath); //è®¾ç½®æ•°æ®åº“ç¼“å­˜è·¯å¾„ mWebView.getSettings().setDatabasePath(cacheDirPath); //è®¾ç½® Application Caches ç¼“å­˜ç›®å½• mWebView.getSettings().setAppCachePath(cacheDirPath); //å¼€å¯ Application Caches åŠŸèƒ½ mWebView.getSettings().setAppCacheEnabled(true); &#125; /** * æ¸…é™¤WebViewç¼“å­˜ */ public void clearWebViewCache()&#123; //æ¸…ç†Webviewç¼“å­˜æ•°æ®åº“ try &#123; deleteDatabase("webview.db"); deleteDatabase("webviewCache.db"); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; //WebView ç¼“å­˜æ–‡ä»¶ File appCacheDir = new File(getFilesDir().getAbsolutePath()+APP_CACAHE_DIRNAME); Log.e(TAG, "appCacheDir path="+appCacheDir.getAbsolutePath()); File webviewCacheDir = new File(getCacheDir().getAbsolutePath()+"/webviewCache"); Log.e(TAG, "webviewCacheDir path="+webviewCacheDir.getAbsolutePath()); //åˆ é™¤webview ç¼“å­˜ç›®å½• if(webviewCacheDir.exists())&#123; deleteFile(webviewCacheDir); &#125; //åˆ é™¤webview ç¼“å­˜ ç¼“å­˜ç›®å½• if(appCacheDir.exists())&#123; deleteFile(appCacheDir); &#125; &#125; /** * é€’å½’åˆ é™¤ æ–‡ä»¶/æ–‡ä»¶å¤¹ * * @param file */ public void deleteFile(File file) &#123; Log.i(TAG, "delete file path=" + file.getAbsolutePath()); if (file.exists()) &#123; if (file.isFile()) &#123; file.delete(); &#125; else if (file.isDirectory()) &#123; File files[] = file.listFiles(); for (int i = 0; i &lt; files.length; i++) &#123; deleteFile(files[i]); &#125; &#125; file.delete(); &#125; else &#123; Log.e(TAG, "delete file no exists " + file.getAbsolutePath()); &#125; &#125; &#125; 7ã€æ— æ³•ä¸‹è½½æ–‡ä»¶ï¼Ÿåœ¨è‡ªå·±å†™çš„ WebView ä¸‹æ˜¯æ— æ³•ç›´æŽ¥ä¸‹è½½æ–‡ä»¶ï¼Œéœ€è¦è‡ªå·±ç›‘å¬ä¸‹è½½äº‹ä»¶å¹¶å¯¹ä¸‹è½½çš„åŠ¨ä½œè¿›è¡Œå¤„ç†ã€‚ 12345678910111213/*** å½“ä¸‹è½½æ–‡ä»¶æ—¶æ‰“å¼€ç³»ç»Ÿè‡ªå¸¦çš„æµè§ˆå™¨è¿›è¡Œä¸‹è½½ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æ•èŽ·åˆ°çš„ url è¿›è¡Œå¤„ç†åœ¨åº”ç”¨å†…ä¸‹è½½ã€‚**/webView.setDownloadListener(new FileDownLoadListener());private class FileDownLoadListener implements DownloadListener &#123; @Override public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimetype, long contentLength) &#123; Uri uri = Uri.parse(url); Intent intent = new Intent(Intent.ACTION_VIEW, uri); startActivity(intent); &#125;&#125; 8ã€æ— æ³•æ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨ï¼Ÿé€šè¿‡é‡å†™ WebChromeClient æ¥å®žçŽ°ç‚¹å‡» æ¥æ‰“å¼€ç³»ç»Ÿæ–‡ä»¶é€‰æ‹©å™¨ã€‚ ä¸€ä¸ªå®Œæ•´çš„Activityç¤ºä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144public class MainActivity extends AppCompatActivity &#123; /** Android 5.0ä»¥ä¸‹ç‰ˆæœ¬çš„æ–‡ä»¶é€‰æ‹©å›žè°ƒ */ protected ValueCallback&lt;Uri&gt; mFileUploadCallbackFirst; /** Android 5.0åŠä»¥ä¸Šç‰ˆæœ¬çš„æ–‡ä»¶é€‰æ‹©å›žè°ƒ */ protected ValueCallback&lt;Uri[]&gt; mFileUploadCallbackSecond; protected static final int REQUEST_CODE_FILE_PICKER = 51426; protected String mUploadableFileTypes = "image/*"; private WebView mWebView; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); initWebView(); &#125; private void initWebView() &#123; mWebView = (WebView) findViewById(R.id.my_webview); mWebView.loadUrl("file:///android_asset/index.html"); mWebView.setWebChromeClient(new OpenFileChromeClient()); &#125; private class OpenFileChromeClient extends WebChromeClient &#123; // Android 2.2 (API level 8)åˆ°Android 2.3 (API level 10)ç‰ˆæœ¬é€‰æ‹©æ–‡ä»¶æ—¶ä¼šè§¦å‘è¯¥éšè—æ–¹æ³• @SuppressWarnings("unused") public void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg) &#123; openFileChooser(uploadMsg, null); &#125; // Android 3.0 (API level 11)åˆ° Android 4.0 (API level 15))ç‰ˆæœ¬é€‰æ‹©æ–‡ä»¶æ—¶ä¼šè§¦å‘ï¼Œè¯¥æ–¹æ³•ä¸ºéšè—æ–¹æ³• public void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg, String acceptType) &#123; openFileChooser(uploadMsg, acceptType, null); &#125; // Android 4.1 (API level 16) -- Android 4.3 (API level 18)ç‰ˆæœ¬é€‰æ‹©æ–‡ä»¶æ—¶ä¼šè§¦å‘ï¼Œè¯¥æ–¹æ³•ä¸ºéšè—æ–¹æ³• @SuppressWarnings("unused") public void openFileChooser(ValueCallback&lt;Uri&gt; uploadMsg, String acceptType, String capture) &#123; openFileInput(uploadMsg, null, false); &#125; // Android 5.0 (API level 21)ä»¥ä¸Šç‰ˆæœ¬ä¼šè§¦å‘è¯¥æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸ºå…¬å¼€æ–¹æ³• @SuppressWarnings("all") public boolean onShowFileChooser(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, WebChromeClient.FileChooserParams fileChooserParams) &#123; if (Build.VERSION.SDK_INT &gt;= 21) &#123; final boolean allowMultiple = fileChooserParams.getMode() == FileChooserParams.MODE_OPEN_MULTIPLE;//æ˜¯å¦æ”¯æŒå¤šé€‰ openFileInput(null, filePathCallback, allowMultiple); return true; &#125; else &#123; return false; &#125; &#125; &#125; @SuppressLint("NewApi") protected void openFileInput(final ValueCallback&lt;Uri&gt; fileUploadCallbackFirst, final ValueCallback&lt;Uri[]&gt; fileUploadCallbackSecond, final boolean allowMultiple) &#123; //Android 5.0ä»¥ä¸‹ç‰ˆæœ¬ if (mFileUploadCallbackFirst != null) &#123; mFileUploadCallbackFirst.onReceiveValue(null); &#125; mFileUploadCallbackFirst = fileUploadCallbackFirst; //Android 5.0åŠä»¥ä¸Šç‰ˆæœ¬ if (mFileUploadCallbackSecond != null) &#123; mFileUploadCallbackSecond.onReceiveValue(null); &#125; mFileUploadCallbackSecond = fileUploadCallbackSecond; Intent i = new Intent(Intent.ACTION_GET_CONTENT); i.addCategory(Intent.CATEGORY_OPENABLE); if (allowMultiple) &#123; if (Build.VERSION.SDK_INT &gt;= 18) &#123; i.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true); &#125; &#125; i.setType(mUploadableFileTypes); startActivityForResult(Intent.createChooser(i, "é€‰æ‹©æ–‡ä»¶"), REQUEST_CODE_FILE_PICKER); &#125; public void onActivityResult(final int requestCode, final int resultCode, final Intent intent) &#123; if (requestCode == REQUEST_CODE_FILE_PICKER) &#123; if (resultCode == Activity.RESULT_OK) &#123; if (intent != null) &#123; //Android 5.0ä»¥ä¸‹ç‰ˆæœ¬ if (mFileUploadCallbackFirst != null) &#123; mFileUploadCallbackFirst.onReceiveValue(intent.getData()); mFileUploadCallbackFirst = null; &#125; else if (mFileUploadCallbackSecond != null) &#123;//Android 5.0åŠä»¥ä¸Šç‰ˆæœ¬ Uri[] dataUris = null; try &#123; if (intent.getDataString() != null) &#123; dataUris = new Uri[] &#123; Uri.parse(intent.getDataString()) &#125;; &#125; else &#123; if (Build.VERSION.SDK_INT &gt;= 16) &#123; if (intent.getClipData() != null) &#123; final int numSelectedFiles = intent.getClipData().getItemCount(); dataUris = new Uri[numSelectedFiles]; for (int i = 0; i &lt; numSelectedFiles; i++) &#123; dataUris[i] = intent.getClipData().getItemAt(i).getUri(); &#125; &#125; &#125; &#125; &#125; catch (Exception ignored) &#123; &#125; mFileUploadCallbackSecond.onReceiveValue(dataUris); mFileUploadCallbackSecond = null; &#125; &#125; &#125; else &#123; //è¿™é‡ŒmFileUploadCallbackFirstè·ŸmFileUploadCallbackSecondåœ¨ä¸åŒç³»ç»Ÿç‰ˆæœ¬ä¸‹åˆ†åˆ«æŒæœ‰äº† //WebViewå¯¹è±¡ï¼Œåœ¨ç”¨æˆ·å–æ¶ˆæ–‡ä»¶é€‰æ‹©å™¨çš„æƒ…å†µä¸‹ï¼Œéœ€ç»™onReceiveValueä¼ nullè¿”å›žå€¼ //å¦åˆ™WebViewåœ¨æœªæ”¶åˆ°è¿”å›žå€¼çš„æƒ…å†µä¸‹ï¼Œæ— æ³•è¿›è¡Œä»»ä½•æ“ä½œï¼Œæ–‡ä»¶é€‰æ‹©å™¨ä¼šå¤±æ•ˆ if (mFileUploadCallbackFirst != null) &#123; mFileUploadCallbackFirst.onReceiveValue(null); mFileUploadCallbackFirst = null; &#125; else if (mFileUploadCallbackSecond != null) &#123; mFileUploadCallbackSecond.onReceiveValue(null); mFileUploadCallbackSecond = null; &#125; &#125; &#125; &#125;&#125; 9ã€æ€Žä¹ˆä¸º WebView çš„åŠ è½½æ·»åŠ è¿›åº¦æ¡è¿™é‡Œçš„ onPageFinished() æœ‰ä¸ªé—®é¢˜ï¼Œä¸èƒ½åœ¨è¿™é‡Œç›‘å¬é¡µé¢æ˜¯å¦åŠ è½½å®Œæ¯•ï¼ˆæˆ‘è‡ªå·±æµ‹è¯•çš„æ—¶å€™ï¼Œå¥½åƒåœ¨é‡å®šå‘å’ŒåŠ è½½å®Œ iframes æ—¶éƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼‰ã€‚ æŠŠé¡µé¢åŠ è½½å®Œæ¯•çš„åˆ¤æ–­æ”¾åœ¨ onProgressChanged() é‡Œå¯èƒ½ä¼šæ›´ä¸ºå‡†ç¡®ã€‚ 12345678910111213141516171819webView.setWebChromeClient(new WebChromeClient() &#123; @Override public void onProgressChanged(WebView view, int position) &#123; progressBar.setProgress(position); if (position == 100) &#123; progressBar.setVisibility(View.GONE); &#125; super.onProgressChanged(view, position); &#125;&#125;);webView.setWebViewClient(new WebViewClient()&#123; @Override public void onPageStarted(WebView view, String url, Bitmap favicon) &#123; progressBar.setVisibility(View.VISIBLE); super.onPageStarted(view, url, favicon); &#125;&#125;); 10ã€æ€Žæ ·å¯¹é¡µé¢è¿›è¡Œ Js æ³¨å…¥ï¼Ÿé¦–å…ˆä½ è¦åœ¨ WebView å¼€å¯ JavaScript,ç„¶åŽæ­å»ºæ¡¥æ¢ 1234567891011WebSettings webSettings = webView.getSettings();webSettings.setJavaScriptEnabled(true);webView.addJavascriptInterface(new WebAppBridge(new WebAppBridge.OauthLoginImpl() &#123; @Override public void getResult(String s) &#123; //TODO &#125; &#125;), "oauth");webView.loadUrl("javascript:" + getAssetsJs("autologin.js"));webView.loadUrl("javascript:adduplistener()"); WebAppBridgeçš„ä»£ç  123456789101112131415161718public class WebAppBridge &#123; private OauthLoginImpl oauthLogin; public WebAppBridge(OauthLoginImpl oauthLogin) &#123; this.oauthLogin = oauthLogin; &#125; @JavascriptInterface public void getResult(String str) &#123; if (oauthLogin != null) oauthLogin.getResult(str); &#125; public interface OauthLoginImpl &#123; void getResult(String s); &#125;&#125; ç®€å•çš„è¯´å°±æ˜¯å‘ç½‘é¡µæ³¨å…¥ä¸€æ®µ js, åœ¨è¿™æ®µ js é‡Œé¢è®¾ç½®å›žè°ƒåˆ°javaä¸­çš„æ–¹æ³• getResult()ï¼Œç”± WebAppBridge.getResult æ¥å›žæ”¶ã€‚å…¶ä¸­jsçš„æ ¸å¿ƒä»£ç ä¸º: 1oauth.getResult(str); å…¶ä¸­ oauth è¿™ä¸ªåç§°è¦ä¸Ž webView.addJavascriptInterface()æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·ã€‚ å…·ä½“çš„ä»£ç å¯ä»¥å‚è€ƒè¿™ä¸ªé¡¹ç›®ä¸­å†™çš„ js æ³¨å…¥é€»è¾‘ OauthDialogåœ°å€ï¼šhttps://github.com/cpacm/MoeMusic/blob/master/app/src/main/java/com/cpacm/moemusic/ui/widgets/dialogs/OauthDialog.java 11ã€å¦‚ä½•æ‰‹åŠ¨æ·»åŠ  Cookieéœ€è¦èŽ·å¾— CookieManager çš„å¯¹è±¡å¹¶å°† cookie è®¾ç½®è¿›åŽ»ã€‚ ä»ŽæœåŠ¡å™¨çš„è¿”å›žå¤´ä¸­å–å‡º cookie æ ¹æ®Httpè¯·æ±‚çš„å®¢æˆ·ç«¯ä¸åŒï¼ŒèŽ·å– cookie çš„æ–¹å¼ä¹Ÿä¸åŒï¼Œè¯·è‡ªè¡ŒèŽ·å–ã€‚ 123456789101112131415161718/*** å°†cookieè®¾ç½®åˆ° WebView* @param url è¦åŠ è½½çš„ url* @param cookie è¦åŒæ­¥çš„ cookie*/public static void syncCookie(String url,String cookie) &#123; if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) &#123; CookieSyncManager.createInstance(context); &#125; CookieManager cookieManager = CookieManager.getInstance(); cookieManager.setAcceptCookie(true); /** * cookie è®¾ç½®å½¢å¼ * cookieManager.setCookie(url, "key=value;" + "domain=[your domain];path=/;") **/ cookieManager.setCookie(url, cookie);&#125; åˆ é™¤ Cookie çš„æ–¹æ³• 12345678910111213141516171819/*** è¿™ä¸ªä¸¤ä¸ªåœ¨ API level 21 è¢«æŠ›å¼ƒ* CookieManager.getInstance().removeSessionCookie();* CookieManager.getInstance().removeAllCookie();** æŽ¨èä½¿ç”¨è¿™ä¸¤ä¸ªï¼Œ level 21 æ–°åŠ çš„* CookieManager.getInstance().removeSessionCookies();* CookieManager.getInstance().removeAllCookies();**/public static void removeCookies() &#123; CookieManager cookieManager = CookieManager.getInstance(); cookieManager.removeAllCookie(); if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; cookieManager.flush(); &#125; else &#123; CookieSyncManager.createInstance(Application.getInstance()); CookieSyncManager.getInstance().sync(); &#125;&#125; 12ã€å¦‚ä½•ä½¿ HTML5 video åœ¨ WebView å…¨å±æ˜¾ç¤ºå½“ç½‘é¡µå…¨å±æ’­æ”¾è§†é¢‘æ—¶ä¼šè°ƒç”¨ WebChromeClient.onShowCustomView() æ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡å°† video æ’­æ”¾çš„è§†å›¾å…¨å±è¾¾åˆ°ç›®çš„ã€‚ 1234567891011121314151617181920212223242526272829@Overridepublic void onShowCustomView(View view, CustomViewCallback callback) &#123; if (view instanceof FrameLayout &amp;&amp; fullScreenView != null) &#123; // A video wants to be shown this.videoViewContainer = (FrameLayout) view; this.videoViewCallback = callback; fullScreenView.addView(videoViewContainer, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT)); fullScreenView.setVisibility(View.VISIBLE); isVideoFullscreen = true; &#125;&#125;@Overridepublic void onHideCustomView() &#123; if (isVideoFullscreen &amp;&amp; fullScreenView != null) &#123; // Hide the video view, remove it, and show the non-video view fullScreenView.setVisibility(View.INVISIBLE); fullScreenView.removeView(videoViewContainer); // Call back (only in API level &lt;19, because in API level 19+ with chromium webview it crashes) if (videoViewCallback != null &amp;&amp; !videoViewCallback.getClass().getName().contains(".chromium.")) &#123; videoViewCallback.onCustomViewHidden(); &#125; isVideoFullscreen = false; videoViewContainer = null; videoViewCallback = null; &#125;&#125; ä½†æ˜¯å¾ˆå¤šçš„æ‰‹æœºç‰ˆæœ¬åœ¨ç½‘é¡µè§†é¢‘æ’­æ”¾æ—¶æ˜¯ä¸ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•å±€é™æ€§å¾ˆå¤§ã€‚ 13ã€Android5.0ä¸Š WebViewä¸­Httpå’ŒHttpsæ··åˆé—®é¢˜12345678/*** MIXED_CONTENT_ALWAYS_ALLOWï¼šå…è®¸ä»Žä»»ä½•æ¥æºåŠ è½½å†…å®¹ï¼Œå³ä½¿èµ·æºæ˜¯ä¸å®‰å…¨çš„ï¼›* MIXED_CONTENT_NEVER_ALLOWï¼šä¸å…è®¸HttpsåŠ è½½Httpçš„å†…å®¹ï¼Œå³ä¸å…è®¸ä»Žå®‰å…¨çš„èµ·æºåŽ»åŠ è½½ä¸€ä¸ªä¸å®‰å…¨çš„èµ„æºï¼›* MIXED_CONTENT_COMPATIBILITY_MODEï¼šå½“æ¶‰åŠåˆ°æ··åˆå¼å†…å®¹æ—¶ï¼ŒWebView ä¼šå°è¯•åŽ»å…¼å®¹æœ€æ–°Webæµè§ˆå™¨çš„é£Žæ ¼ã€‚**/if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; webView.getSettings().setMixedContentMode(WebSettings.MIXED_CONTENT_ALWAYS_ALLOW);&#125; 14ã€å¦‚ä½•é¿å… WebView çš„å†…å­˜æ³„éœ²é—®é¢˜ å¯ä»¥å°† Webview çš„ Activity æ–°èµ·ä¸€ä¸ªè¿›ç¨‹ï¼Œç»“æŸçš„æ—¶å€™ç›´æŽ¥System.exit(0);é€€å‡ºå½“å‰è¿›ç¨‹ï¼› ä¸åœ¨xmlä¸­å®šä¹‰ WebViewï¼Œè€Œæ˜¯åœ¨ä»£ç ä¸­åˆ›å»ºï¼Œä½¿ç”¨ getApplicationgContext() ä½œä¸ºä¼ é€’çš„ Conetextï¼› åœ¨ Activity é”€æ¯çš„æ—¶å€™ï¼Œå°† WebView ç½®ç©º 1234567891011@Overrideprotected void onDestroy() &#123; if (webView != null) &#123; webView.loadDataWithBaseURL(null, "", "text/html", "utf-8", null); webView.clearHistory(); ((ViewGroup) webView.getParent()).removeView(webView); webView.destroy(); webView = null; &#125; super.onDestroy();&#125; æ€»ç»“ å¦‚æžœä½ è¸©åˆ°äº† WebView ä¸Šçš„å‘ï¼Œè¯·å…ˆé»˜å“€ä¸€åˆ†é’Ÿï¼Œç„¶åŽåŠªåŠ›æ‰¾æ‰¾è§£å†³æ–¹æ³•å§ï¼Œæ€»ä¼šæœ‰äººä½“éªŒè¿‡ä½ çš„æ‚²å‰§ï¼Œä¹Ÿä¼šæœ‰äººé‡è¹ˆä½ çš„è¦†è¾™ã€‚å½“ç„¶ WebView é‡Œè‚¯å®šä¸æ­¢æˆ‘ä¸Šé¢åˆ—å‡ºæ¥çš„è¿™äº›é—®é¢˜ï¼Œå¦‚æžœä½ æœ‰æ›´å¤šçš„ WebView é—®é¢˜è§£å†³æ–¹æ¡ˆæ¬¢è¿Žè¯„è®ºäº¤æµã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Webview</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Webview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å­¦ä¹ æŒ‡å—]]></title>
    <url>%2Fposts%2Fca8423a1.html</url>
    <content type="text"><![CDATA[éšç€ReactNativeã€Weexä¸ŽFlutterç­‰è·¨ç«¯æ¡†æž¶çš„å‘å±•ï¼Œå¤§å‰ç«¯çš„æ¦‚å¿µä¹Ÿé€æ¸æ™®åŠå¼€æ¥ï¼Œçº¯ç²¹çš„Nativeå¼€å‘ç›¸å¯¹å˜å¾—æ¯”è¾ƒå°‘ï¼Œå‰ç«¯ä¹Ÿæˆä¸ºäº†å®¢æˆ·ç«¯åŒå­¦å¿…é¡»è¦æŽŒæ¡çš„ä¸€é—¨æŠ€æœ¯ï¼Œä½†æ˜¯å®¢æˆ·ç«¯åŒå­¦åšçš„æ˜¯è·¨ç«¯å¼€å‘ï¼Œåœ¨å­¦ä¹ è·¯çº¿ä¸Šå’Œå‰ç«¯åŒå­¦åˆç¨æœ‰ä¸åŒï¼Œä¸‹é¢ä»Žå®¢æˆ·ç«¯åŒå­¦çš„è§†è§’åŽ»è®¨è®ºå¦‚ä½•å­¦ä¹ å‰ç«¯çŸ¥è¯†ã€‚ è¿™é‡Œä¸ºå¤§å®¶æ•´ç†äº†ä¸€ä»½è·¨ç«¯æŠ€æœ¯å›¾è°±ï¼Œè¿™ä»½å›¾è°±å¹¶æ²¡æœ‰åŽ»ç©·å°½æ‰€æœ‰çš„å‰ç«¯æŠ€æœ¯ï¼Œåªæ˜¯ä»Žå®¢æˆ·ç«¯å¼€å‘çš„è§†è§’åŽ»æ¢³ç†å¸¸ç”¨çš„æŠ€æœ¯ç‚¹ï¼Œå¸®åŠ©å¤§å®¶ç†æ¸…è„‰ç»œã€‚ æ›´å¤šå…³äºŽè·¨ç«¯æŠ€æœ¯çš„è®¨è®ºå¯ä»¥å‚è§BeesHybridé¡¹ç›®ã€‚ å¼€å‘å·¥å…·IDEæŽ¨èVSCodeï¼Œè½»é‡çº§ã€æ’ä»¶ä¸°å¯Œï¼Œå¸¸ç”¨æ’ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š Terminalï¼šå‘½ä»¤è¡Œå·¥å…·ã€‚ Git Historyï¼šæŸ¥çœ‹å•è¡Œæäº¤è®°å½•å’Œæ–‡ä»¶æäº¤è®°å½•ã€‚ Git Project Managerï¼šGité¡¹ç›®ç®¡ç†å·¥å…·ã€‚ Git Lenï¼šè§£å†³æ—¥å¸¸å¼€å‘åä½œç—›ç‚¹ï¼ŒæŽ¨èå®‰è£…ã€‚ vscode-iconsï¼šè®©ä½ çš„æ–‡ä»¶éƒ½å¸¦ä¸Šå¥½çœ‹çš„å›¾æ ‡ã€‚ Path Intellisenseï¼šæ–‡ä»¶è·¯å¾„è‡ªåŠ¨è¡¥å…¨ã€‚ Auto Close Tagï¼šè‡ªåŠ¨é—­åˆHTMLæ ‡ç­¾ã€‚ Baracket Pair Colorizerï¼šæˆå¯¹æ‹¬å·åˆ†é¢œè‰²æ˜¾ç¤ºï¼Œæ–¹ä¾¿åŒºåˆ†ã€‚ Settings Syncï¼šåŒæ­¥ä½ çš„é…ç½®å’Œæ‰©å±•ï¼Œå‚è§åŒæ­¥æ•™ç¨‹ã€‚ VS Color Pickerï¼šå–è‰²å™¨ã€‚ ES7 React/Redux/GraphQL/React-Native snippetsï¼šReactä»£ç æç¤ºã€‚ Vue 2 Snippetsï¼šVue2ä»£ç æç¤ºã€‚ æ›´å¤šå…³äºŽVSCodeçš„ä½¿ç”¨æŠ€å·§å¯ä»¥å‚è§å¼ºå¤§çš„VSCodeã€‚ å‰ç«¯åŸºç¡€å¯¹äºŽå®¢æˆ·ç«¯åŒå­¦æ¥è¯´ï¼Œè¦æƒ³ä¸Šæ‰‹Reactã€Vueè¿™äº›æ¡†æž¶ï¼Œéœ€è¦å…ˆæŽŒæ¡HTMLã€CSSä¸ŽJavaScriptç­‰åŸºç¡€çŸ¥è¯†ï¼Œè¿™éƒ¨åˆ†çš„å†…å®¹å»ºè®®é€šè¿‡ä¹¦ç±æ¥å­¦ä¹  ï¼Œä¸€ç‚¹ä¸€æ»´æ‰“æžåŸºç¡€ï¼Œè¦æœ‰è€å¿ƒã€‚ HTMLä¹¦ç±ï¼šã€ŠHTML5æƒå¨æŒ‡å—ã€‹ CSSä¹¦ç±ï¼šã€ŠCSSæƒå¨æŒ‡å—ã€‹ã€ã€Šç²¾é€šCSSã€‹ JavaScriptä¹¦ç±ï¼šã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ã€ã€Šä½ ä¸çŸ¥é“çš„Javascriptã€‹ é™¤äº†åŸºç¡€çš„JavaScriptçŸ¥è¯†ï¼Œä½ è¿˜éœ€è¦æŽŒæ¡ES6ç›¸å…³æ¦‚å¿µï¼Œè¿™å—å¯ä»¥å‚è€ƒECMAScript 6 å…¥é—¨ã€‚ NPMæˆ‘ä»¬è¿˜éœ€è¦äº†è§£NPMç›¸å…³çŸ¥è¯†ï¼ŒNPMå°±åƒAndroidé‡Œçš„Mavenä»“åº“ä¸€æ ·ï¼Œå®ƒæ˜¯ä¸€ä¸ªJavaScriptä»“åº“ã€‚ Node.jsçš„åŒ…ç®¡ç†å·¥å…·ã€‚ å®˜æ–¹æ–‡æ¡£ NPMæ–°æ‰‹æ•™ç¨‹ å‰ç«¯æ¡†æž¶Vue Vue.jsï¼ˆè¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äºŽ view çš„è¯»éŸ³ï¼‰æ˜¯ä¸€å¥—æž„å»ºç”¨æˆ·ç•Œé¢(user interface)çš„æ¸è¿›å¼æ¡†æž¶ã€‚ å®˜æ–¹æ–‡æ¡£ awesome-vue Vue.js 2.0 å¿«é€Ÿä¸Šæ‰‹ç²¾åŽæ¢³ç† Vueå­¦ä¹ çœ‹è¿™ç¯‡å°±å¤Ÿ [è¯‘] ä»Ž1ä¸‡ç¯‡æ–‡ç« ä¸­æŒ‘å‡ºçš„40ç¯‡æœ€æ£’çš„ Vue å­¦ä¹ æŒ‡å—ï¼ˆ2018ç‰ˆï¼‰ React ç”¨äºŽæž„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚ å®˜æ–¹æ–‡æ¡£ React.js å°ä¹¦ Reactå…¥é—¨æ•™ç¨‹ æ­ç§˜reactç”Ÿæ€ä½“ç³» [è¯‘] ä»Ž1.8ä¸‡ç¯‡æ–‡ç« ä¸­è„±é¢–è€Œå‡º45ä¸ªæœ€æ£’çš„ React.js å­¦ä¹ æŒ‡å—ï¼ˆ2018ç‰ˆï¼‰ [è¯‘] State of Vue.js report 2017 ä¸­æ–‡ç‰ˆ è·¨ç«¯æ¡†æž¶ä»ŽPCæ—¶ä»£å¼€å§‹ï¼ŒNativeä¸ŽWebå°±ä¸€ç›´æ˜¯ç›¸äº’ç«žäº‰ã€ç›¸äº’èžåˆçš„å…³ç³»ï¼Œæˆ‘ä»¬å…ˆæ¥ç®€å•çœ‹çœ‹å®ƒä»¬ä¹‹é—´çš„ä¼˜åŠ¿ä¸ŽåŠ£åŠ¿ã€‚ Native Web æ€§èƒ½ é«˜ ä½Ž ç”¨æˆ·ä½“éªŒ å¥½ å·® åŠŸèƒ½ å¯ä»¥å……åˆ†åˆ©ç”¨å¹³å°è‡ªèº«çš„èƒ½åŠ› åªæœ‰ä½¿ç”¨W3Cçš„æ ‡å‡†èƒ½åŠ› è¿­ä»£ å‘¨æœŸé•¿ï¼Œéœ€è¦å‘å¸ƒ å‘¨æœŸçŸ­ï¼Œéšæ—¶å‘å¸ƒ ç»´æŠ¤æˆæœ¬ é«˜ ä½Ž è·¨å¹³å° å·® å¥½ çº¿ç¨‹ å¤šçº¿ç¨‹ å•çº¿ç¨‹ å¯ä»¥çœ‹å‡ºï¼ŒNativeä¸ŽWebä¹‹é—´å„æœ‰ä¼˜åŠ£ï¼Œåœ¨ç§»åŠ¨äº’è”ç½‘å‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…ä»¬ä¹Ÿä¸€ç›´åœ¨å¯»æ‰¾èžåˆåŒæ–¹ä¼˜åŠ¿çš„æ–¹æ¡ˆï¼Œç»åŽ†äº†ä»¥ä¸‹å››ä¸ªé˜¶æ®µçš„å‘å±•ï¼š Hybrid 1.0ï¼šä¸ºWebé¡µé¢æä¾›Naive APIçš„èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯ç”¨JS BridgeåŽ»å¢žå¼ºç³»ç»Ÿçš„WebViewçš„åŠŸèƒ½ã€‚ç¼ºç‚¹æ˜¯ï¼šä½“éªŒå·®ï¼Œå¦‚æ»šåŠ¨ã€åŠ¨ç”»ä¸Žäº¤äº’ç­‰ï¼Œç¨³å®šæ€§å·®ï¼Œå¦‚åˆ—è¡¨å†…å­˜å ç”¨å¤§ç­‰ã€‚ Hybrid 2.0ï¼šå°†Nativeç»„ä»¶è¦†ç›–åœ¨WebViewä¹‹ä¸Šï¼Œä¾‹å¦‚å¾®ä¿¡çš„cover-viewï¼Œæä¾›æ›´å¤šçš„æ‰©å±•èƒ½åŠ›ã€‚ç¼ºç‚¹æ˜¯ï¼šç”¨æˆ·ä½“éªŒèžåˆæ€§ä¸å¥½ï¼Œå¦‚å±‚çº§ã€äº‹ä»¶ã€å¸ƒå±€ç­‰ã€‚ Hybrid 3.0ï¼šå‰ç«¯DSLå¼€å‘ï¼ŒNativeæ¸²æŸ“ï¼Œä¾‹å¦‚React Nativeä¸ŽWeexã€‚ç¼ºç‚¹ï¼šå¯¹W3Cæ ‡å‡†èƒ½åŠ›æ”¯æŒæœ‰é™ï¼Œå­˜åœ¨å¹³å°å·®å¼‚ï¼Œä¸‰ç«¯å¹¶ä¸å®Œå…¨ç»Ÿä¸€ã€‚ Hybrid 4.0ï¼šç™¾èŠ±é½æ”¾çš„å°ç¨‹åºã€å¿«åº”ç”¨ã€è½»åº”ç”¨æ–¹æ¡ˆï¼Œè¿™ä¸ªå®¹å™¨ä¹Ÿæœ‰ä¸¤ç§ï¼šWebViewå®¹å™¨ä¸Žç±»ReatNativeå®¹å™¨ã€‚æŠ€æœ¯æ–¹æ¡ˆä¸Šå¹¶æ²¡æœ‰å¤ªå¤šçš„èŠ±æ ·ï¼Œè¿™ç§æ–¹æ¡ˆçš„å…´èµ·ç”±å¾®ä¿¡å¸¦èµ·ï¼Œæœ¬è´¨ä¸Š è¿˜æ˜¯æºäºŽå„å¤§å…¬å¸å¯¹äºŽæµé‡å…¥å£å’Œç”Ÿæ€çš„ç«žäº‰ã€‚åŽç»­æˆ‘ä»¬ä¼šç€é‡èŠä¸€ä¸‹ã€‚ æ³¨ï¼šå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒåŒå±‚æ¸²æŸ“çŽ°åœ¨å·²ç»é€æ¸åœ¨Androidå’ŒiOSå¹³å°çš„WebViewä¸Šå®žçŽ°ï¼Œæœªæ¥Hybridä¼šæœ‰æ›´å¤šçš„çŽ©æ³•ã€‚ ReactNative ä½¿ç”¨JavaScriptå’ŒReactç¼–å†™åŽŸç”Ÿç§»åŠ¨åº”ç”¨. å®˜æ–¹æ–‡æ¡£ React-Nativeå­¦ä¹ æŒ‡å— ç»™æ‰€æœ‰å¼€å‘è€…çš„React Nativeè¯¦ç»†å…¥é—¨æŒ‡å—ï¼ˆç¬¬ä¸€é˜¶æ®µï¼‰ Weex Weexæ˜¯ä¸€ä¸ªåŸºäºŽçŽ°ä»£webå¼€å‘ç»éªŒæž„å»ºé«˜æ€§èƒ½ç§»åŠ¨åº”ç”¨ç¨‹åºçš„æ¡†æž¶ã€‚ å®˜æ–¹æ–‡æ¡£ awesome-weex WEEXä»Žå…¥é—¨åˆ°æ”¾è‚†-å›¾æ–‡è§†é¢‘æ•™ç¨‹ï¼ˆå®Œæ•´ç‰ˆï¼‰ awesome-weexï¼šWeex å­¦ä¹ ä¸Žå¼€å‘èµ„æ–™ Flutter Flutterå…è®¸æ‚¨é€šè¿‡ä¸€ä¸ªä»£ç åº“åœ¨iOSå’ŒAndroidä¸Šæž„å»ºæ¼‚äº®çš„æœ¬åœ°åº”ç”¨ç¨‹åºã€‚ å®˜æ–¹æ–‡æ¡£ Flutter å¼€å‘èµ„æºæ±‡æ€» [è¯‘] Awesome Flutterï¼šå¸¦ä½ ä»Žå…¥é—¨åˆ°è¿›é˜¶çš„ Flutter æŒ‡å— å°ç¨‹åºå°ç¨‹åºä¹Ÿå±žäºŽè·¨ç«¯æ¡†æž¶çš„èŒƒç•´ï¼Œä½†å®ƒä¸ŽWeexè¿™äº›æ¡†æž¶ä¸åŒï¼Œæ¯”èµ·åƒReactNativeè¿™ç§æŠ€æœ¯åˆ›æ–°ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ç§å•†ä¸šåˆ›æ–°ï¼Œå®ƒæºäºŽå„å¤§å·¨å¤´å¯¹äºŽæµé‡ä¸Žå…¥å£çš„ç«žäº‰ã€‚è¯¦æƒ…å¯å‚è§2018å¹´ä¸ŠåŠå¹´å°ç¨‹åºç”Ÿæ€ç™½çš®ä¹¦ã€‚ æˆ‘ä»¬å…ˆå°±ä»–ä»¬çš„æŠ€æœ¯æ–¹æ¡ˆåšä¸ªç®€å•çš„å¯¹æ¯”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š å¾®ä¿¡å°ç¨‹åºï¼šåŸºäºŽWebViewæ¸²æŸ“ï¼Œè‡ªå»ºçš„DSLï¼Œä¸ŽVue 1.0æœ‰ç‚¹åƒï¼Œä¸æ˜¯å¾ˆå¥½ç”¨ï¼ŒåŽç»­åˆå‡ºäº†WePYã€mpVueã€Taroç­‰DSLã€‚ æ”¯ä»˜å®å°ç¨‹åºï¼šåŸºäºŽWebViewä¸ŽReactNativeä¸¤å¥—å®¹å™¨æ¸²æŸ“ï¼Œè‡ªå»ºäº†ä¸€å¥—ç±»Reactçš„DSLã€‚ å¿«åº”ç”¨ï¼šåŸºäºŽNativeè¿›è¡Œæ¸²æŸ“ï¼Œè‡ªå·±å®šä¹‰äº†ä¸€å¥—ç±»Vueçš„DSLã€‚ æ·˜å®è½»åº”ç”¨ï¼šåŸºäºŽWebViewä¸ŽWeexä¸¤å¥—å®¹å™¨æ¸²æŸ“ï¼Œè‡ªå»ºäº†ä¸€å¥—ç±»Vueçš„DSLã€‚ äº‹å®žä¸Šï¼Œå°ç¨‹åºæ‰¿è½½çš„æ›´å¤šæ˜¯ä¸šåŠ¡å½¢æ€ï¼Œæˆ‘ä»¬ä»Žä¸šåŠ¡å¼€å‘è§’åº¦å¯¹å°ç¨‹åºçš„å‰ç«¯æž¶æž„åšä¸ªæ€»ç»“ã€‚ å¾®ä¿¡å°ç¨‹åº å°ç¨‹åºæ˜¯ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å°ç¨‹åºå¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°èŽ·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚ å®˜æ–¹æ–‡æ¡£ å¾®ä¿¡å°ç¨‹åºå…¬å¼€è¯¾ å¾®ä¿¡å°ç¨‹åºå¼€å‘èµ„æºæ±‡æ€» æ”¯ä»˜å®å°ç¨‹åº æ”¯ä»˜å®å°ç¨‹åºæ˜¯ä¸€ç§å…¨æ–°çš„å¼€æ”¾æ¨¡å¼ï¼Œå®ƒè¿è¡Œåœ¨æ”¯ä»˜å®å®¢æˆ·ç«¯ï¼Œå¯ä»¥è¢«ä¾¿æ·åœ°èŽ·å–å’Œä¼ æ’­ï¼Œä¸ºç»ˆç«¯ç”¨æˆ·æä¾›æ›´ä¼˜çš„ç”¨æˆ·ä½“éªŒ. å®˜æ–¹æ–‡æ¡£ æ”¯ä»˜å®å°ç¨‹åºç¤¾åŒº å¿«åº”ç”¨ å¿«åº”ç”¨æ˜¯åŸºäºŽæ‰‹æœºç¡¬ä»¶å¹³å°çš„æ–°åž‹åº”ç”¨å½¢æ€ï¼›æ ‡å‡†æ˜¯ç”±ä¸»æµæ‰‹æœºåŽ‚å•†ç»„æˆçš„å¿«åº”ç”¨è”ç›Ÿè”åˆåˆ¶å®šï¼›å¿«åº”ç”¨æ ‡å‡†çš„è¯žç”Ÿå°†åœ¨ç ”å‘æŽ¥å£ã€èƒ½åŠ›æŽ¥å…¥ã€å¼€å‘è€…æœåŠ¡ç­‰å±‚é¢å»ºè®¾æ ‡å‡†å¹³å°ï¼›ä»¥å¹³å°åŒ–çš„ç”Ÿæ€æ¨¡å¼å¯¹ä¸ªäººå¼€å‘è€…å’Œä¼ä¸šå¼€å‘è€…å…¨å“ç±»å¼€æ”¾ã€‚ å®˜æ–¹æ–‡æ¡£ å¿«åº”ç”¨å®˜æ–¹å¼€æºé¡¹ç›® å¿«åº”ç”¨å¼€å‘åœˆèµ„æºæ±‡æ€» å°ç±³ç›´è¾¾æœåŠ¡ä»‹ç»ä¸Žå¼€å‘å®žæˆ˜ æ·˜å®å°ç¨‹åº å®˜æ–¹æ–‡æ¡£ æ¨¡å—åŒ– commonjs AMD(CMD) UMD ES Module ä»»åŠ¡ç®¡ç†å™¨ npm scripts grunt gulp æ¨¡å—æ‰“åŒ…å·¥å…· r.js webpack rollup browserify CSSé¢„å¤„ç†å™¨ Sass Less Stylus Postcss é™æ€æ£€æŸ¥å™¨ flow typescript æµ‹è¯•å·¥å…· mocha jasmine jest ava ä»£ç æ£€æµ‹å·¥å…· eslint jslint é™„å½•èµ„æº å‰ç«¯èµ„æºåº“ å‰ç«¯æŠ€èƒ½æ ‘ å‰ç«¯å¼€å‘æŠ€èƒ½æ ‘é­”å…½å¤©èµ‹æ¸¸æˆç‰ˆ JavaScriptç®—æ³•ä¸Žæ•°æ®ç»“æž„ æ€Žæ ·æˆé•¿ä¸ºä¸€ä¸ªä¼˜ç§€çš„ Web å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Ÿ æŠ€æœ¯æ ˆå‰ç«¯æŠ€æœ¯ä»Žåº•å±‚åˆ°é¡¶å±‚ä¸€å…±å¯ä»¥åˆ†ä¸º20ä¸ªï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š æµè§ˆå™¨ æ¸²æŸ“å¼•æ“Žã€JavaScriptå¼•æ“Ž HTML/JavaScript/CSSä¸‰æ”¯æŸ± ç¼–è¾‘å™¨ ç¼–è¯‘ä»»åŠ¡ ç¼–è¯‘å·¥å…· æ‰“åŒ…ã€è°ƒè¯•ã€è´¨é‡ æµ‹è¯• JSåŸºç¡€ç±»åº“ JSç±»åº“ UIæ¡†æž¶ CSSé¢„å¤„ç†å™¨ æ¨¡æ¿ çŽ°ä»£åŒ– å®‰å…¨/æ¨¡å¼ ä¸­é—´è¯­è¨€ è·¨å¹³å°è§£å†³æ–¹æ¡ˆ å›¾ç‰‡æ¥æº]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>å­¦ä¹ æŒ‡å—</category>
      </categories>
      <tags>
        <tag>åšå®¢</tag>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlinå¸¸ç”¨è¯­æ³•ä»¥åŠæ³¨æ„äº‹é¡¹]]></title>
    <url>%2Fposts%2Fa1a08df3.html</url>
    <content type="text"><![CDATA[ç±»åž‹çš„å£°æ˜Žä¸Žä½¿ç”¨valä¸Žvarval ä¸å¯å˜å¼•ç”¨ï¼Œvar å¯å˜å¼•ç”¨ã€‚ æˆ‘ä»¬åº”è¯¥å°½å¯èƒ½ä½¿ç”¨valå…³é”®å­—æ¥å£°æ˜Žæ‰€æœ‰çš„kotlinå˜é‡ï¼Œwhyï¼Ÿ é¦–å…ˆä¸€ä¸ªå˜é‡åœ¨å£°æ˜Žæ—¶æ˜¯ä¸å¯å˜çš„ï¼Œé‚£å°±ä»£è¡¨ä½ åœ¨ä½¿ç”¨çš„æ—¶å€™ä¸éœ€è¦è€ƒè™‘å…¶ä»–åœ°æ–¹ä¼šå¯¹å®ƒé‡æ–°èµ‹å€¼å’Œæ”¹å˜(å¯¹äºŽå¯¹è±¡æ³¨æ„åªæ˜¯å¼•ç”¨ä¸å¯å˜)ï¼Œç›´æŽ¥ä½¿ç”¨ã€‚ valå£°æ˜Žçš„ç±»åž‹ç”±äºŽå¿…é¡»åˆå§‹åŒ–,å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ kotlinä¸ºäº†ä¿è¯ç±»åž‹å®‰å…¨ï¼Œæ‰€æœ‰å˜é‡å£°æ˜Žçš„åœ°æ–¹å¿…é¡»è¦åšåˆå§‹åŒ–ï¼Œå³æ˜¾ç¤ºèµ‹ä¸€ä¸ªåˆå€¼ã€‚ ç©ºä¸Žéžç©ºkotlinå¯¹äºŽå¯ç©ºç±»åž‹å’Œéžç©ºç±»åž‹è®¤ä¸ºæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ç±»åž‹ï¼Œæ¯”å¦‚Intä¸ŽInt?,ä»–ä»¬ä¿©å°±ä¸æ˜¯ç›¸åŒçš„ç±»åž‹ã€‚åˆ©ç”¨è¿™ä¸ªç‰¹ç‚¹å’Œç¼–è¯‘æ—¶æ£€æŸ¥ï¼ŒkotlinåŸºæœ¬å¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ ä¸Šé¢å·²ç»è¯´äº†kotlinçš„ç±»åž‹å£°æ˜Žæ—¶å¿…é¡»è¦æœ‰åˆå€¼ï¼Œæ‰€ä»¥ç©ºä¸Žéžç©ºç±»åž‹å’Œvalä¸Žvarä¸€ç»„åˆå°±ä¼šå˜æˆ4ç§æƒ…å†µï¼Œä¸‹é¢æˆ‘ä»¬å¯¹ä¸€ä¸ªPersonå¯¹è±¡è¿›è¡Œå£°æ˜Ž: 1234val p:Person = Person() val p:Person? = null // è¿™ä¸ªæƒ…å†µæ˜¯æ²¡æœ‰æ„ä¹‰çš„var p:Person = Person() // å¦‚æžœè¿™ä¸ªå¯¹è±¡æ˜¯éžç©ºç±»åž‹ï¼Œé‚£ä¹ˆåˆå§‹åŒ–çš„æ—¶å€™å¿…é¡»èµ‹ä¸€ä¸ªéžnullåˆå€¼var p:Person? = null //å¯ä»¥ç»™ä¸€ä¸ªnull,ä¹Ÿå¯ä»¥ç»™ä¸€ä¸ªå¯¹è±¡å®žä¾‹ ä¸Šé¢è¿™æ®µä»£ç åŸºæœ¬è§£é‡Šäº†valä¸Žvarå’Œç©ºä¸Žéžç©ºçš„å…³ç³»ã€‚ ç©ºä¸Žéžç©ºçš„ä½¿ç”¨kotlinå¯¹ç©ºä¸Žéžç©ºåšäº†ä¸¥æ ¼çš„é™åˆ¶ï¼Œé‚£æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶ä¸éƒ½è¦å¯¹å¯ç©ºç±»åž‹ç±»åž‹åšåˆ¤æ–­å—ï¼Ÿä¸ºäº†é¿å…è¿™ä¸ªé—®é¢˜ï¼Œkotlinæä¾›äº†è®¸å¤šè¿ç®—ç¬¦æ¥ä½¿å¼€å‘äººå‘˜å¯¹äºŽå¯ç©ºä¸Žéžç©ºç¼–ç æ›´åŠ æ„‰å¿«ã€‚ å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ â€œ?.â€ æ¯”å¦‚æˆ‘ä»¬å£°æ˜Žäº†è¿™æ ·ä¸€ä¸ªç±»åž‹var p:Person? = nullã€‚å¦‚æžœæˆ‘ä»¬ç›´æŽ¥ä½¿ç”¨p.nameï¼Œkotlinç¼–è¯‘å™¨æ˜¯ä¼šæŠ¥é”™çš„æ— æ³•ç¼–è¯‘é€šè¿‡ï¼Œæ‰€æœ‰æˆ‘ä»¬å¿…é¡»è¿™ä¹ˆåš: 1if(p != null) p.name è¿™ç§ä»£ç å†™å¤šäº†å®žåœ¨æ˜¯å¤ªæ²¡æœ‰æ„ä¹‰äº†ï¼Œæ‰€æœ‰kotlinæä¾›äº†?.ã€‚ä¸Šé¢ä»£ç æˆ‘ä»¬å¯ä»¥ç›´æŽ¥è¿™æ ·ä»£æ›¿p?.nameã€‚å®ƒçš„å®žé™…æ‰§è¡Œè¿‡ç¨‹æ˜¯è¿™æ ·çš„:å¦‚æžœpä¸ºç©ºåˆ™ä¸æ“ä½œï¼Œå¦‚æžœpä¸ä¸ºç©ºåˆ™è°ƒç”¨p.nameã€‚ Elvis è¿ç®—ç¬¦ â€œ?:â€ åœ¨kotlinä¸­æˆ‘ä»¬ä¼šå†™è¿™ç§ä»£ç : 1val name = if(p != null) p.name else &quot;&quot; //kotlinä¸­çš„ifæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ ä¸è¿‡ä½¿ç”¨?:å¯ä»¥æ›´ç®€å•å®žçŽ°ä¸Šé¢çš„é€»è¾‘ : val name = p?.name ?: &quot;&quot; ã€‚ å®ƒçš„å®žé™…æ‰§è¡Œé€»è¾‘æ˜¯å¦‚æžœpä¸ºnullï¼Œp?.nameå°±ä¼šä¸ºnullï¼Œ ?:ä¼šæ£€æŸ¥å‰é¢çš„ç»“æžœï¼Œå¦‚æžœæ˜¯nullï¼Œé‚£ä¹ˆåˆ™è¿”å›ž&quot;&quot;ã€‚ å®‰å…¨è½¬æ¢ â€œas?â€ åœ¨kotlinä¸­ç±»åž‹è½¬æ¢å…³é”®å­—ä¸ºasã€‚ä¸è¿‡ç±»åž‹è½¬æ¢ä¼šä¼´éšç€è½¬æ¢å¤±è´¥çš„é£Žé™©ã€‚ä½¿ç”¨as?æˆ‘ä»¬å¯ä»¥æ›´ä¼˜é›…çš„å†™å‡ºè½¬æ¢æ— é£Žé™©çš„ä»£ç : 12345//Personç±»ä¸­çš„æ–¹æ³•fun equals(o:Any?):Boolean&#123; val otherPerson = o as? Person ?: return false ....&#125; å³as?åœ¨è½¬æ¢ç±»åž‹å¤±è´¥æ—¶ä¼šè¿”å›žnull éžç©ºæ–­è¨€ â€œ!!â€ å¦‚æžœä½¿ç”¨ä¸€ä¸ªå¯ç©ºç±»åž‹çš„æ–¹æ³•ï¼Œå¹¶ä¸”ä½ ä¸æƒ³åšéžç©ºåˆ¤æ–­ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¿™æ ·åš: person!!.getAge()ã€‚ ä¸è¿‡å¦‚æžœpersonä¸ºnullï¼Œè¿™é‡Œå°±ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ å…¶å®žè¿˜æ˜¯åœ¨è›®å¤šcaseä¸‹å¯ä»¥ä½¿ç”¨å®ƒï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨ï¼Œæ„éš¾å¿˜ä½ å®Œå…¨å¯ä»¥ä½¿ç”¨ï¼Ÿã€ï¼Ÿæ¥åšæ›´ä¼˜é›…çš„å¤„ç†ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨lateinitæ¥é¿å…ç¼–è¯‘å™¨çš„å¯ç©ºæç¤ºã€‚ valä¸Žbylazyã€varä¸Žlateinit bylazy å®ƒåªèƒ½å’Œvalä¸€å—ä½¿ç”¨ã€‚ 123private val mResultViewï¼šView = bylazy&#123; initResultView()&#125; ä½¿ç”¨bylazyæˆ‘ä»¬å¯ä»¥å¯¹ä¸€ä¸ªå˜é‡å»¶è¿Ÿåˆå§‹åŒ–ï¼Œå³æ‡’åŠ è½½ã€‚å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å…·ä½“åŽŸç†æ˜¯:å½“æˆ‘ä»¬ä½¿ç”¨bylazyå£°æ˜Žçš„å˜é‡æ—¶ï¼Œå¦‚æžœè¿™ä¸ªå˜é‡ä¸ºnull,é‚£ä¹ˆå°±ä¼šè°ƒç”¨bylazyä»£ç å—æ¥åˆå§‹åŒ–è¿™ä¸ªå˜é‡ã€‚ lateinit å®ƒåªèƒ½å’Œvarä¸€å—ä½¿ç”¨ï¼Œå¹¶ä¸”ä¸å…è®¸ä¿®é¥°å¯ç©ºç±»åž‹ï¼Œé‚£å®ƒçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ åœ¨æœ‰äº›caseä¸‹ï¼Œæ¯”å¦‚ä¸€ä¸ªæž„é€ å¤æ‚çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å°±æ˜¯æƒ³æŠŠå˜é‡å£°æ˜Žä¸ºéžç©ºç±»åž‹å¹¶ä¸”å°±æ˜¯ä¸æƒ³ç»™ä»–ä¸€ä¸ªåˆå€¼(ä»£ä»·å¤ªå¤§äº†),è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨lateinit : 123456lateinit var p : Person //Personçš„æž„é€ å‡½æ•°å¤ªå¤æ‚äº†ï¼Œä¸æƒ³åœ¨è¿™é‡Œç»™ä¸€ä¸ªåˆå€¼fun refreshUI(p2:Person)&#123; //p = p2 val name = p.name //æ³¨æ„è¿™ä¸ªåœ°æ–¹æ˜¯å¯èƒ½ä¼šæŠ›pä¸ºåˆå§‹åŒ–å¼‚å¸¸çš„ï¼ï¼ï¼å¦‚æžœä½ æ²¡æœ‰åˆå§‹åŒ–&#125; ç”±äºŽä½¿ç”¨lateinitçš„æ—¶å€™æˆ‘ä»¬è¦äººå·¥ä¿è¯è¿™ä¸ªå˜é‡å·²ç»è¢«åˆå§‹åŒ–ï¼Œå¹¶ä¸”kotlinåœ¨ä½ æ¯ä¸ªä½¿ç”¨è¿™ä¸ªå˜é‡çš„åœ°æ–¹éƒ½ä¼šæ·»åŠ ä¸€ä¸ªéžnullåˆ¤æ–­ã€‚æ‰€ä»¥lateinitå°½é‡å°‘ç”¨ã€‚ when ä¸Ž ifififåœ¨kotlinä¸­ä¸åªæ˜¯ä¸€ä¸ªæŽ§åˆ¶ç»“æž„å®ƒä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼,å³å®ƒæ˜¯æœ‰è¿”å›žç»“æžœçš„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥ä»£æ›¿javaä¸­çš„ä¸‰ç›®è¿ç®—ç¬¦: 1val background = if(isBlcak) R.drawable.black_image else R.drawable.white_image whenå®ƒçš„ä½¿ç”¨æ–¹æ³•æœ‰å¤šç§: ä»£æ›¿switchçš„åŠŸèƒ½ 1234when(color)&#123; &quot;red&quot;,&quot;green&quot; -&gt;&#123; &#125; &quot;blue&quot;-&gt;&#123; &#125;&#125; kotlinä¸­çš„whenå¯ä»¥ç”¨æ¥åˆ¤æ–­ä»»ä½•å¯¹è±¡ï¼Œå®ƒä¼šé€ä¸€æ£€æŸ¥æ¯ä¸€ä¸ªåˆ†æ”¯ï¼Œå¦‚æžœæ»¡è¶³è¿™ä¸ªåˆ†æ”¯çš„æ¡ä»¶å°±æ‰§è¡Œã€‚ å¤šæ¡ä»¶åˆ¤æ–­ å¯ä»¥ä½¿ç”¨whenæ¥é¿å…if..elseif..elseif..elseçš„å†™æ³•: 12345678val a = 1val b = 2when&#123; a &gt; 0 &amp;&amp; b &gt; 0 -&gt;&#123;&#125; a &lt; 0 &amp;&amp; b &gt; 0 -&gt;&#123;&#125; a &lt; 0 &amp;&amp; b &lt; 0 -&gt;&#123;&#125; else -&gt;&#123; &#125;&#125; whenæ˜¯å¸¦æœ‰è¿”å›žå€¼çš„è¡¨è¾¾å¼ å’Œifä¸€æ ·ï¼Œwhenä¹Ÿæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼: 12345val desColor = when(color)&#123; &quot;red&quot;, &quot;gren&quot; -&gt; &quot;red&amp;green&quot; &quot;blue&quot; -&gt; &quot;blue&quot; else -&gt; &quot;black&quot; // whenä½œä¸ºè¡¨è¾¾å¼æ—¶å¿…é¡»è¦æœ‰elseåˆ†æ”¯ã€‚ &#125; ç±»ç±»çš„æž„é€ ä¸Žä¸»æž„é€ å‡½æ•° ç®€å•çš„å£°æ˜Žä¸€ä¸ª javabean åœ¨kotlinä¸­æˆ‘ä»¬å¯ä»¥è¿™æ ·ç®€å•çš„å®šä¹‰ä¸€ä¸ªç±»: class Person(val name:String = &quot;&quot;, var age:Int = 0) è¿™æ ·å°±å®šä¹‰äº†ä¸€ä¸ªPersonç±»ï¼Œè¿™ä¸ªç±»æœ‰ä¸¤ä¸ªå±žæ€§:nameå’Œageã€‚å¹¶ä¸”ä»–æœ‰ä¸€ä¸ªä¸¤ä¸ªå‚æ•°çš„æž„é€ å‡½æ•°æ¥å¯¹è¿™ä¸¤ä¸ªå±žæ€§åˆå§‹åŒ–ã€‚å¯ä»¥çœ‹å‡ºkotlinå°†ä¸€ä¸ªç±»çš„å£°æ˜Žå˜çš„ååˆ†æ–¹ä¾¿ã€‚ ä¸»æž„é€ å‡½æ•° æ™®é€šçš„javaæž„é€ å‡½æ•°æ˜¯æœ‰ä»£ç å—çš„ï¼Œå³å¯ä»¥åšä¸€äº›é€»è¾‘æ“ä½œï¼Œé‚£æŒ‰ç…§kotlinä¸Šé¢çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ€Žä¹ˆåšæž„é€ å‡½æ•°çš„é€»è¾‘æ“ä½œå‘¢? kotlinæä¾›äº†åˆå§‹åŒ–ä»£ç å—: 123456class Person(val name:String = &quot;&quot;, var age:Int = 0)&#123; init&#123; name = &quot;susion&quot; age = 13 &#125;&#125; initä»£ç å—ä¼šåœ¨ä¸»æž„é€ å‡½æ•°ä¹‹åŽè¿è¡Œï¼Œæ³¨æ„ä¸æ˜¯æ‰€æœ‰çš„æž„é€ å‡½æ•°ã€‚ æ•°æ®ç±» data classæ›´æ–¹ä¾¿çš„å®šä¹‰ä¸€ä¸ªjavabeanï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°æ®ç±»: 1data class Person(val name:String = &quot;&quot;, val age:Int = 0) ä½¿ç”¨dataå®šä¹‰çš„Personä¼šé»˜è®¤ç”Ÿæˆequalsã€hashCodeã€toStringæ–¹æ³•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æ•°æ®ç±»çš„å±žæ€§æˆ‘ä»¬åº”è¯¥å°½é‡å®šä¹‰æˆvalçš„ã€‚è¿™æ˜¯å› ä¸ºåœ¨ä¸»æž„é€ å‡½æ•°ä¸­å£°æ˜Žçš„è¿™äº›å±žæ€§éƒ½ä¼šçº³å…¥åˆ°equalså’ŒhashCodeæ–¹æ³•ä¸­ã€‚å¦‚æžœæŸä¸ªå±žæ€§æ˜¯å¯å˜çš„ï¼Œ é‚£ä¹ˆè¿™ä¸ªå¯¹è±¡åœ¨è¢«åŠ å…¥åˆ°å®¹å™¨åŽå°±ä¼šæ˜¯ä¸€ä¸ªæ— æ•ˆçš„çŠ¶æ€ã€‚ object å’Œ companion objectåœ¨kotlinä¸­æ²¡æœ‰é™æ€æ–¹æ³•ï¼Œä¹Ÿæ²¡æœ‰é™æ€ç±»ã€‚ä¸è¿‡kotlinæä¾›äº†objectä¸Žcompanion object object å•ä¾‹ç±» ä½¿ç”¨objectæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„åˆ›å»ºä¸€ä¸ªå•ä¾‹ç±» : 12345678object LoginStatus&#123; var isLogin = false fun login()&#123; isLogin = true &#125; ...&#125; æˆ‘ä»¬å¯ä»¥è¿™æ ·ç›´æŽ¥ä½¿ç”¨LoginStatus.isLogin()ã€‚ é‚£è¿™ä¸ªå•ä¾‹åœ¨kotlinä¸­æ˜¯æ€Žä¹ˆå®žçŽ°çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åç¼–è¯‘çœ‹ä¸€ä¸‹å®ƒç”Ÿæˆçš„javaä»£ç : 123456789101112131415161718public final class LoginStatus &#123; private static boolean isLogin; public static final LoginStatus INSTANCE; // for javaè°ƒç”¨ ..... //çœç•¥ä¸é‡è¦çš„éƒ¨åˆ† public final void login() &#123; isLogin = true; &#125; private LoginStatus() &#123; INSTANCE = (LoginStatus)this; &#125; static &#123; //ç±»åŠ è½½çš„æ—¶å€™æž„é€ å®žä¾‹ new LoginStatus(); &#125;&#125; å³kotlin objectå®žçŽ°çš„å•ä¾‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å®ƒçš„å¯¹è±¡æ˜¯åœ¨ç±»åˆ›å»ºçš„æ—¶å€™å°±äº§ç”Ÿäº†ã€‚ objectçš„é™æ€æ–¹æ³•çš„ä½¿ç”¨ ä¸Šé¢æˆ‘ä»¬å·²ç»çŸ¥é“objectåˆ›å»ºå•ä¾‹çš„åŽŸç†äº†ã€‚è¿™åœ¨æŸäº›caseä¸‹å°±å¾ˆæ£’ï¼Œä½†æ˜¯æŸäº›æ—¶å€™æˆ‘ä»¬ä¸æ˜¯æƒ³è¦å•ä¾‹ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³è¦ä¸€äº›é™æ€æ–¹æ³•å‘¢ï¼Ÿæ¯”å¦‚æˆ‘ä»¬ç»å¸¸åˆ›å»ºçš„ä¸€äº›å·¥å…·ç±»(UIUtilsã€StringUtils)ç­‰ã€‚æˆ‘ä»¬å¯ä»¥ç›´æŽ¥ä½¿ç”¨objectæ¥å®Œæˆ: 123456public object UIUtils&#123; ... ... ... ..å¾ˆå¤šæ–¹æ³•&#125; æŒ‰ç…§kotlinå•ä¾‹çš„è®¾è®¡ï¼Œæˆ‘ä»¬åªè¦ä¸€æ—¦ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œé‚£ä¹ˆä¸€ç›´æœ‰ä¸€ä¸ªå•ä¾‹å¯¹è±¡UIUtilså­˜åœ¨äºŽå†…å­˜ä¸­ã€‚é‚£ä¹ˆè¿™æ ·å¥½å—? æˆ‘ä»¬æ˜¯å¦å¯ä»¥è¿™æ ·å†™å‘¢ : 123456public class UIUtils&#123; ... ... ... ..å¾ˆå¤šæ–¹æ³•&#125; ç„¶åŽåœ¨ä½¿ç”¨çš„æ—¶å€™:UIUtils().dp2Px(1)ã€‚è¿™æ ·è‡³å°‘ä¸ä¼šæœ‰ä¸€ä¸ªå¯¹è±¡ä¸€ç›´åœ¨å†…å­˜ä¸­ã€‚æˆ‘æƒ³æˆ‘ä»¬åœ¨æŸäº›caseä¸‹å¯ä»¥è¿™æ ·ä½¿ç”¨æˆ‘ä»¬çš„å·¥å…·ç±»ã€‚æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨kotlinçš„æ‰©å±•å‡½æ•°æˆ–é¡¶å±‚å‡½æ•°æ¥å®šä¹‰ä¸€äº›å·¥å…·æ–¹æ³•ã€‚æ‰€ä»¥å¯¹äºŽkotlinçš„objectçš„ä½¿ç”¨éœ€è¦æ³¨æ„ã€‚ companion object companion objectä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªç±»ä¸­åˆ›å»ºä¸€äº›é™æ€æ–¹æ³•è€Œå­˜åœ¨çš„ï¼Œæ¯”å¦‚: 123456class Person(val name: String) &#123; companion object &#123; fun isMeal(p: Person) = false &#125; &#125; ä¾æ—§çœ‹ä¸€ä¸‹å®ƒåç¼–è¯‘åŽçš„javaä»£ç : 123456789101112131415public final class Person &#123; ... public static final Person.Companion Companion = new Person.Companion((DefaultConstructorMarker)null); .... public static final class Companion &#123; public final boolean isMeal(@NotNull Person p) &#123; Intrinsics.checkParameterIsNotNull(p, &quot;p&quot;); return false; &#125; private Companion() &#123; &#125; ..... &#125;&#125; å³å®ƒä¹Ÿæ˜¯ç”Ÿæˆäº†ä¸€ä¸ªå•ä¾‹ç±»Person.Companionã€‚ä¸è¿‡è¿™ä¸ªå•ä¾‹ç±»æ˜¯ä¸€ä¸ªé™æ€ç±»ã€‚ä¸å…è®¸æž„é€ ã€‚ä¸è¿‡å®ƒçš„å®žçŽ°æœºåˆ¶å‡ ä¹Žå’Œobjectç›¸åŒã€‚ lambdakotlinä¸­lambdaçš„æœ¬è´¨å°±æ˜¯å¯ä»¥ä¼ é€’ç»™å…¶ä»–å‡½æ•°çš„ä¸€å°æ®µä»£ç ã€‚kotlinä¸­lambdaä½¿ç”¨çš„æœ€å¤šçš„å°±æ˜¯å’Œé›†åˆä¸€å—ä½¿ç”¨ã€‚ lambadä¸ŽjavaæŽ¥å£ æ¯”å¦‚æˆ‘ä»¬ç»å¸¸ç»™Viewè®¾ç½®onClickListener,åœ¨kotlinä¸­æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®žçŽ°è¿™æ®µä»£ç : 123userView.setOnClickListener&#123;&#125; // å¦‚æžœlambdaæ˜¯å‡½æ•°çš„æœ€åŽä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆæ˜¯å¯ä»¥æ”¾åœ¨æ‹¬å·å¤–é¢çš„ã€‚ å³ä½ å¯ä»¥ç›´æŽ¥ä¼ é€’ç»™å®ƒä¸€ä¸ªlambdaã€‚kotlinåœ¨å®žé™…ç¼–è¯‘çš„æ—¶å€™ä¼šæŠŠè¿™ä¸ªlambdaç¼–è¯‘æˆä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ã€‚ é‚£ä¹ˆæ‰€æœ‰javaä¼ å¯¹è±¡çš„åœ°æ–¹éƒ½å¯ä»¥è¿™æ ·ä½¿ç”¨å—ï¼Ÿ å½“ç„¶ä¸æ˜¯, åªæœ‰javaå‚æ•°æ»¡è¶³ä¸‹é¢æ¡ä»¶æ‰å¯ä»¥ä½¿ç”¨: è¿™ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæŽ¥å£ï¼Œå¹¶ä¸”è¿™ä¸ªæŽ¥å£åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ã€‚å°±å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼Œæ¯”å¦‚Runnableã€Callableç­‰ã€‚ with ä¸Ž apply withä¸ªäººæ„Ÿè§‰æ¯”è¾ƒé¸¡è‚‹ï¼Œè¿™é‡Œå°±ä¸è®²å®ƒäº†ã€‚ä¸è¿‡applyæ˜¯ååˆ†å®žç”¨çš„ã€‚åœ¨kotlinä¸­applyè¢«å®žçŽ°ä¸ºä¸€ä¸ªå‡½æ•°: 1public inline fun &lt;T&gt; T.apply(block: T.() -&gt; kotlin.Unit): T &#123; &#125; å³å®ƒæ˜¯ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼ŒæŽ¥æ”¶ä¸€ä¸ªlambdaï¼Œå¹¶è¿”å›žå¯¹è±¡æœ¬èº«,å¹¶ä¸”ä»–æ˜¯ä¸€ä¸ªå†…è”çš„å‡½æ•°(ä¸‹é¢ä¼šè®²) æˆ‘æœ€å¸¸ç”¨çš„ä¸€ä¸ªcaseæ˜¯ç»™viewè®¾ç½®å‚æ•°: 123456val tvName = TextView(context).apply&#123; textSize = 10 textColor = xx text = &quot;susion&quot; ...&#125; å¸¸ç”¨çš„åº“å‡½æ•°å†…è”å‡½æ•°kotliné›†åˆåº“ä¸­å¾ˆå¤šå‡½æ•°å¯ä»¥æŽ¥æ”¶lambdaä½œä¸ºå‚æ•°ã€‚ä½†æˆ‘ä»¬å‰é¢è¯´äº†kotlinçš„lambdaè¡¨è¾¾å¼ä¼šè¢«ç¼–è¯‘ä¸ºä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œå³æ¯ä¸€æ¬¡lambdaçš„è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼Œæ‰€ä»¥ä¼šå¸¦æ¥è¿è¡Œæ—¶çš„å¼€é”€ã€‚ kotliné›†åˆåº“ä¸­å‡½æ•°æ—¶ç»™æˆ‘ä»¬ä½¿ç”¨çš„ï¼Œå¦‚æžœæœ‰è¿™ç§å¼€é”€çš„è¯ï¼Œè¿™è‚¯å®šæ˜¯ä¸€ä¸ªä¸å¥½çš„è®¾è®¡ï¼Œå› æ­¤kotliné›†åˆåº“ä¸­çš„å¤§éƒ¨åˆ†å‡½æ•°éƒ½æ˜¯å†…è”å‡½æ•°ã€‚ æ¯”å¦‚ä¸Šé¢çš„applyå£°æ˜Ž : public inline fun &lt;T&gt; T.apply(block: T.() -&gt; kotlin.Unit): T { .... } ä½•ä¸ºå†…è”å‘¢ï¼Ÿ: å½“ä¸€ä¸ªå‡½æ•°è¢«å£°æ˜Žä¸ºinlineæ—¶ï¼Œå®ƒçš„å‡½æ•°ä½“æ˜¯å†…è”çš„ï¼Œå³å‡½æ•°ä½“ä¼šè¢«ç›´æŽ¥æ›¿æ¢åˆ°å‡½æ•°è¢«è°ƒç”¨çš„åœ°æ–¹ã€‚å³ä¸ä¼šå­˜åœ¨è¿è¡Œæ—¶å¼€é”€ï¼Œä¸‹é¢è¦è¯´çš„filterå’Œmapéƒ½æ˜¯å†…è”å‡½æ•°ã€‚ filter ä¸Ž map filteræŽ¥æ”¶ä¸€ä¸ªè¿”å›žBooleançš„lambdaï¼Œç”¨äºŽå¯¹ä¸€ä¸ªé›†åˆåšç­›é€‰å·¥ä½œ,å¹¶è¿”å›žä¸€ä¸ªæ–°é›†åˆ: 1val wangList = userList.filter&#123;it.firstName == &quot;wang&quot;&#125; mapä¹Ÿæ˜¯æŽ¥æ”¶ä¸€ä¸ªlambdaï¼Œå®ƒçš„è¿”å›žå€¼æ˜¯å¦ä¸€ä¸ªç±»åž‹çš„é›†åˆï¼Œå³mapå¯ä»¥æŠŠä¸€ä¸ªç±»åž‹çš„é›†åˆå˜æˆå¦ä¸€ä¸ªç±»åž‹çš„é›†åˆã€‚ 1val ageList = userList.map&#123; it.age &#125; è¿™ä¸¤ä¸ªå‡½æ•°è™½ç„¶å¥½ç”¨ï¼Œä¸è¿‡æˆ‘ä»¬è¦æ³¨æ„ä»–ä»¬çš„å®žçŽ°ï¼Œä»¥å…å¸¦æ¥ä¸å¿…è¦çš„æ€§èƒ½æŸè€— : filterå’Œmapå‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°é›†åˆï¼Œå› æ­¤å¦‚æžœä½ æ˜¯ä¸‹é¢è¿™ç§ç”¨æ³•å°±å¯èƒ½å‡ºçŽ°ä¸å¿…è¦çš„é›†åˆåˆ›å»º: 1val wangList = userList.map&#123; it.name &#125;.filter&#123;it == &quot;wang&quot;&#125; åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒuserListé›†åˆéžå¸¸å¤§çš„è¯ï¼Œé‚£ä¹ˆmapæ“ä½œä¹‹åŽç”Ÿæˆçš„ä¸­é—´é›†åˆä¹Ÿå¯èƒ½éžå¸¸å¤§ï¼Œå¯¹äºŽè¿™ç§æƒ…å†µå¯ä»¥è€ƒè™‘ä½¿ç”¨ kotlinåºåˆ—ã€‚ countä¸Žfind countç”¨äºŽç»Ÿè®¡é›†åˆä¸­æ»¡è¶³æŸä¸ªæ¡ä»¶çš„æ•°é‡ï¼Œå¯ä»¥å¯¹æ¯”ä¸‹é¢è¿™ç§å†™æ³• 123val wangCount= userList.filter&#123;it.firstName == &quot;wang&quot;&#125;.sizeval wangCount2 = userList.count&#123;it.firstName == &quot;wang&quot;&#125; //å¾ˆæ˜Žæ˜¾ï¼Œè¿™ç§å†™æ³•è¿œå¥½äºŽç¬¬ä¸€ç§ findç”¨æ¥å¯»æ‰¾é›†åˆä¸­æ»¡è¶³æŸä¸ªcaseçš„å…ƒç´ ã€‚ å…·ä½“ç”¨æ³•å°±ä¸å†™äº†ã€‚ Kotlinçš„ä¸€äº›ä¼˜ç§€çš„è®¾è®¡æ€æƒ³kotlinæ˜¯åŸºäºŽjavaçš„ï¼Œä¸è¿‡å®ƒåœ¨è®¾è®¡æ‘’å¼ƒäº†å¾ˆå¤šjavaä¸å¥½çš„æ€æƒ³ã€‚ä¸‹é¢ç®€å•åˆ—ä¸¾ä¸€äº›: kotlinä¸­å¹¶ä¸åŒºåˆ†å—æ£€æŸ¥å¼‚å¸¸å’Œæœªå—æ£€æŸ¥å¼‚å¸¸ã€‚å³ä¸ç”¨æŒ‡å®šå‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥ä¸å¤„ç†å¼‚å¸¸ kotlinä¸­ç±»å’Œç±»çš„æ–¹æ³•é»˜è®¤æ˜¯finalçš„ï¼Œå³ä¸å…è®¸ç»§æ‰¿å’Œé‡å†™ã€‚è¿™ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘ç»§æ‰¿ï¼Œé¿å…è„†å¼±åŸºç±»çš„é—®é¢˜ kotlinä¸­é›†åˆæŽ¥å£åˆ†ä¸ºè®¿é—®é›†åˆæ•°æ®å’Œä¿®æ”¹é›†åˆæ•°æ®ã€‚æ¯”å¦‚kotlin.collections.Collectionä¸­å°±æ²¡æœ‰ä¿®æ”¹é›†åˆçš„æ–¹æ³•ã€‚ kotlinä¸­çš„å‡½æ•°æ”¯æŒé»˜è®¤å‚æ•°ï¼Œé¿å…äº†å¤šæ¬¡é‡å†™ä¸€ä¸ªå‡½æ•°çš„æƒ…å†µ kotlinæ”¯æŒæ‰©å±•å‡½æ•°ã€‚å®ƒå®žé™…ä¸Šå°±æ˜¯æŸä¸ªç±»çš„é™æ€æ–¹æ³•ã€‚ â€¦..]]></content>
      <categories>
        <category>Android</category>
        <category>Kotlin</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®©hexoçš„é¦–é¡µåªæ˜¾ç¤ºæ–‡ç« çš„éƒ¨åˆ†å†…å®¹è€Œä¸æ˜¯å…¨éƒ¨]]></title>
    <url>%2Fposts%2Fe778c36e.html</url>
    <content type="text"><![CDATA[Hexo çš„ Next ä¸»é¢˜é»˜è®¤æ˜¯é¦–é¡µæ˜¾ç¤ºä½ æ¯ç¯‡æ–‡ç« çš„å…¨æ–‡å†…å®¹ï¼Œé‚£ä¹ˆè¦å¦‚ä½•è®¾ç½®åªæ˜¾ç¤ºéƒ¨åˆ†å‘¢ï¼Ÿç›®æ ‡ &gt; åœ¨ç½‘ç«™é¦–é¡µåªæ˜¾ç¤ºæ¯ç¯‡æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ï¼Œä¸è¦å…¨éƒ¨å†…å®¹éƒ½å±•ç¤ºå‡ºæ¥ã€‚è§£å†³ &gt; è¦è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼šä¸€æ˜¯ä¿®æ”¹ ä¸»é¢˜ _config.yml æ–‡ä»¶è®¾ç½®ï¼Œè€Œæ˜¯ç›´æŽ¥åœ¨ä½ çš„ md ä¸­åŠ ä¸€å¥ä»£ç å³å¯ã€‚ ç¬¬ä¸€ç§æ–¹æ³•ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ themes/ ç›®å½•ä¸‹çš„å¯¹åº”çš„ä¸»é¢˜çš„themeæ–‡ä»¶å¤¹ä¸‹çš„ _config.yml æ–‡ä»¶ï¼Œæ‰¾åˆ°è¿™æ®µä»£ç ï¼Œå¦‚æžœæ²¡æœ‰åˆ™æ–°å»ºï¼Œå¯èƒ½ä¸åŒçš„ä¸»é¢˜ä¼šä¸æ”¯æŒè¿™ç§æ–¹æ³•ï¼š 12345# Automatically Excerpt. Not recommend.# Please use &lt;!-- more --&gt; in the post to control excerpt accurately.auto_excerpt: enable: false length: 150 æŠŠ enable çš„ false æ”¹æˆ true å°±è¡Œäº†ï¼Œç„¶åŽ length æ˜¯è®¾å®šæ–‡ç« é¢„è§ˆçš„æ–‡æœ¬é•¿åº¦ã€‚ ä¿®æ”¹åŽé‡å¯ hexo å°±okäº†ã€‚ ç¬¬äºŒç§æ–¹æ³•åœ¨ä½ å†™ md æ–‡ç« çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨å†…å®¹ä¸­åŠ ä¸Š &lt;!--more--&gt;ï¼Œè¿™æ ·é¦–é¡µå’Œåˆ—è¡¨é¡µå±•ç¤ºçš„æ–‡ç« å†…å®¹å°±æ˜¯ &lt;!--more--&gt; ä¹‹å‰çš„æ–‡å­—ï¼Œè€Œä¹‹åŽçš„å°±ä¸ä¼šæ˜¾ç¤ºäº†ã€‚ æ•ˆæžœ ä¸Šé¢ä¸¤ç§æ–¹å¼å±•ç¤ºå‡ºæ¥çš„æ•ˆæžœæ˜¯ä¸ä¸€æ ·çš„ã€‚ ç¬¬ä¸€ç§ä¿®æ”¹ _config.yml æ–‡ä»¶çš„æ•ˆæžœæ˜¯ä¼šæ ¼å¼åŒ–ä½ æ–‡ç« çš„æ ·å¼ï¼Œç›´æŽ¥æŠŠæ–‡å­—æŒ¤åœ¨ä¸€èµ·æ˜¾ç¤ºï¼Œæœ€åŽä¼šæœ‰ â€¦ã€‚ è€Œç¬¬äºŒç§åŠ ä¸Š &lt;!--more--&gt;å±•ç¤ºå‡ºæ¥çš„å°±æ˜¯ä½ åŽŸæœ¬æ–‡ç« çš„æ ·å¼ï¼Œæœ€åŽä¸ä¼šæœ‰â€¦ã€‚ ç¬¬ä¸‰ç§æ–¹å¼åœ¨æ–‡ç« çš„ front-matter ä¸­æ·»åŠ  descriptionï¼Œå¹¶æä¾›æ–‡ç« æ‘˜å½• 1234567891011---title: è®©hexoçš„é¦–é¡µåªæ˜¾ç¤ºæ–‡ç« çš„éƒ¨åˆ†å†…å®¹è€Œä¸æ˜¯å…¨éƒ¨id: set-hexo-show-more-button-on-indexcategories: - WEBå¼€å‘date: 2017-09-30 11:01:40tags: - blog - hexodescription: Hexo çš„ Next ä¸»é¢˜é»˜è®¤æ˜¯é¦–é¡µæ˜¾ç¤ºä½ æ¯ç¯‡æ–‡ç« çš„å…¨æ–‡å†…å®¹ï¼Œé‚£ä¹ˆè¦å¦‚ä½•è®¾ç½®åªæ˜¾ç¤ºéƒ¨åˆ†å‘¢ï¼Ÿæ­£å¦‚ä½ çŽ°åœ¨çœ‹åˆ°çš„æœ¬ç¯‡æ–‡ç« ï¼Œåªæ˜¾ç¤ºåˆ°è¿™é‡Œã€‚--- ä½†æ˜¯ä½¿ç”¨è¿™ç§æ–¹å¼ç”Ÿæˆçš„æè¿°ä¿¡æ¯åœ¨æ–‡ç« çš„è¯¦æƒ…é¡µæ˜¯ä¸å†æ˜¾ç¤ºçš„ã€‚ æ€»ç»“å„ç§æ–¹å¼å±•ç¤ºçš„æ•ˆæžœå„æœ‰å¥½å¤„ï¼Œç¬¬äºŒç§æ–¹æ³•ä¿ç•™äº†æ ·å¼è€Œä¸”å¯ä»¥è‡ªè¡Œé€‰æ‹©æ˜¾ç¤ºå“ªäº›å†…å®¹æ¥é¢„è§ˆï¼ŒæŽ¨èä½¿ç”¨æ­¤æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ–¹æ³•æ˜¾ç¤ºçš„æ¯ç¯‡æ–‡ç« çš„é¢„è§ˆéƒ½æ˜¯ä¸€æ ·çš„é«˜åº¦ï¼Œç¬¬ä¸‰ç§åˆ™éœ€è¦åœ¨æ–‡ç« çš„[front-matter]{https://hexo.io/docs/front-matter.html}é‡Œé¢æ·»åŠ ã€‚ ç»¼åˆè€ƒè™‘çš„è¯è¿˜æ˜¯å»ºè®®ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œæ¯•ç«Ÿä»¥åŽå„ç§æ’ä»¶ä¹Ÿèƒ½å‡†ç¡®çš„èŽ·å–åˆ°ä½ æƒ³è¦è¾“å‡ºçš„æœ¬ç¯‡çš„æè¿°ä¿¡æ¯ã€‚ å‚è€ƒé“¾æŽ¥ï¼š http://www.5isjyx.com/coding/201704/nextreadthefulltext.html http://theme-next.iissnan.com/faqs.html]]></content>
      <categories>
        <category>å»ºç«™</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>å»ºç«™</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidStudioGitè®¾ç½®å¿½ç•¥æ–‡ä»¶ä¸ç”Ÿæ•ˆ]]></title>
    <url>%2Fposts%2F40a53d12.html</url>
    <content type="text"><![CDATA[åœ¨Androidä¸­gitæäº¤æƒ³å¿½ç•¥æŸäº›ä¸æƒ³æäº¤çš„æ–‡ä»¶ï¼Œå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª.gitignoreï¼Œå¦‚æžœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥æ‰‹åŠ¨å»ºä¸€ä¸ªã€‚é‡Œé¢åŒ¹é…ä¸€ä¸‹ä½ ä¸æƒ³æäº¤çš„æ–‡ä»¶ã€‚ ä¸‹é¢è¿™æ˜¯Android Studioçš„å¿½ç•¥è§„åˆ™ 1234567891011121314151617181920212223242526272829303132333435363738394041# OSX*.DS_Store# Gradle filesbuild/.gradle/*/build/# IDEA*.iml.idea/.name.idea/encodings.xml.idea/inspectionProfiles/Project_Default.xml.idea/inspectionProfiles/profiles_settings.xml.idea/misc.xml.idea/modules.xml.idea/scopes/scope_settings.xml.idea/vcs.xml.idea/workspace.xml.idea/libraries# Built application files*.apk*.ap_# Files for the Dalvik VM*.dex# Java class files*.class# Generated filesantLauncher/binantLauncher/gen# Local configuration file (sdk path, etc)local.properties# Log Files*.log è§„åˆ™ç½‘ä¸Šå¾ˆå¤šï¼Œå¯ä»¥è‡ªå·±æœä¸‹ï¼Œæˆ–è€…è‡ªå·±å†™ä¸€ä¸ªä¹Ÿè¡Œã€‚ä½†æ˜¯å½“æˆ‘ä»¬æäº¤çš„æ—¶å€™ï¼Œå´å‘çŽ°è¿™äº›è§„åˆ™å¹¶æ²¡æœ‰å¤±æ•ˆï¼ŒåŽŸå› å°±æ˜¯å› ä¸º.gitignoreåªèƒ½å¿½ç•¥é‚£äº›åŽŸæ¥æ²¡æœ‰è¢«trackçš„æ–‡ä»¶ï¼Œå¦‚æžœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹.gitignoreæ˜¯æ— æ•ˆçš„ã€‚è§£å†³æ–¹æ³•å°±æ˜¯å…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼ˆæ”¹å˜æˆæœªtrackçŠ¶æ€ï¼‰ï¼Œç„¶åŽå†æäº¤ï¼š 123git rm -r --cached .git add .git commit -m &apos;update .gitignore&apos;]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¼€å¯ä½ çš„ç»ˆç«¯è£…é€¼ç¬¬ä¸€æ­¥]]></title>
    <url>%2Fposts%2F9253a935.html</url>
    <content type="text"><![CDATA[ä½œä¸ºå¼€å‘äººå‘˜ï¼Œå’Œç»ˆç«¯çš„äº²å¯†åº¦é‚£è‚¯å®šä¸æ˜¯ä¸€èˆ¬åœ°é«˜ï¼Œä»¥ä¸Šä¾¿æ˜¯æˆ‘æ‰“å¼€ç»ˆç«¯è¿Žé¢è€Œæ¥çš„ç”»é¢ï¼Œæ˜¯ä¸æ˜¯é€¼æ ¼æ»¡æ»¡ï¼Œ23333ï¼Œä¸‹é¢æ¥æ•™å¤§å®¶å¦‚ä½•åœ¨ mac ä¸Šé…ç½®ï¼Œå…¶ä»–ç³»ç»Ÿåº”è¯¥ä¹ŸåŒç†ã€‚ é¦–å…ˆæ‰“å¼€ç»ˆç«¯ï¼ˆè¿™ä¸€æ­¥è¦æ˜¯ä¸ä¼šï¼Œé‚£è€é“ä½ å°±åˆ«é…ç½®äº†å§ï¼‰ã€‚ è¾“å…¥ cd /etc è¿›å…¥ç›®å½•ã€‚ è¾“å…¥ sudo pico motd,ç„¶åŽè¾“å…¥å¯†ç åŽè¿›å…¥ä¿®æ”¹é¡µé¢ã€‚ ç„¶åŽåœ¨å…¶ä¸­è¾“å…¥ä½ æƒ³æ˜¾ç¤ºçš„è£…é€¼å†…å®¹ï¼Œå†æ­¤æä¾›ä¸€ä¸ªå›¾å½¢ç•Œé¢ç½‘ç«™ï¼šè¿™æ˜¯ä¸€ä¸ªç¥žå¥‡çš„ç½‘ç«™ï¼Œå¹²è´§æ»¡æ»¡å§ã€‚ æœ€åŽ control + xï¼Œè¾“å…¥ y ä¿å­˜ï¼Œé‡å¯ç»ˆç«¯å°±å¯ä»¥çœ‹åˆ°é€¼æ ¼æ»¡æ»¡çš„æ¬¢è¿Žé¡µäº†ã€‚ å¦‚ä¸‹å›¾æ˜¯æˆ‘çš„ï¼š]]></content>
      <categories>
        <category>Mac</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>åšå®¢</tag>
        <tag>ç»ˆç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RecyclerView æ€§èƒ½ä¼˜åŒ–]]></title>
    <url>%2Fposts%2F20aedb71.html</url>
    <content type="text"><![CDATA[æ•°æ®å¤„ç†å’Œè§†å›¾åŠ è½½åˆ†ç¦»æˆ‘ä»¬çŸ¥é“ï¼Œä»Žè¿œç«¯æ‹‰å–æ•°æ®è‚¯å®šæ˜¯è¦æ”¾åœ¨å¼‚æ­¥çš„ï¼Œåœ¨æˆ‘ä»¬æ‹‰å–ä¸‹æ¥æ•°æ®ä¹‹åŽå¯èƒ½å°±åŒ†åŒ†æŠŠæ•°æ®ä¸¢ç»™äº† VH å¤„ç†ï¼Œå…¶å®žï¼Œæ•°æ®çš„å¤„ç†é€»è¾‘æˆ‘ä»¬ä¹Ÿåº”è¯¥æ”¾åœ¨å¼‚æ­¥å¤„ç†ï¼Œè¿™æ · Adapter åœ¨ notify change åŽï¼ŒViewHolder å°±å¯ä»¥ç®€å•æ— åŽ‹åŠ›åœ°åšæ•°æ®ä¸Žè§†å›¾çš„ç»‘å®šé€»è¾‘ï¼Œæ¯”å¦‚ï¼š 1mTextView.setText(Html.fromHtml(data).toString()); è¿™é‡Œçš„ Html.fromHtml(data) æ–¹æ³•å¯èƒ½å°±æ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œå­˜åœ¨å¤šä¸ª TextView çš„è¯è€—æ—¶ä¼šæ›´ä¸ºä¸¥é‡ï¼Œè¿™æ ·ä¾¿ä¼šå¼•å‘æŽ‰å¸§ã€å¡é¡¿ï¼Œè€Œå¦‚æžœæŠŠè¿™ä¸€æ­¥ä¸Žç½‘ç»œå¼‚æ­¥çº¿ç¨‹æ”¾åœ¨ä¸€èµ·ï¼Œç«™åœ¨ç”¨æˆ·è§’åº¦ï¼Œæœ€å¤šå°±æ˜¯ç½‘ç»œåˆ·æ–°æ—¶é—´ç¨é•¿ä¸€ç‚¹ã€‚ æ•°æ®ä¼˜åŒ–åˆ†é¡µæ‹‰å–è¿œç«¯æ•°æ®ï¼Œå¯¹æ‹‰å–ä¸‹æ¥çš„è¿œç«¯æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œæå‡äºŒæ¬¡åŠ è½½é€Ÿåº¦ï¼›å¯¹äºŽæ–°å¢žæˆ–è€…åˆ é™¤æ•°æ®é€šè¿‡ DiffUtil æ¥è¿›è¡Œå±€éƒ¨åˆ·æ–°æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸€å‘³åœ°å…¨å±€åˆ·æ–°æ•°æ®ã€‚ å¸ƒå±€ä¼˜åŒ–å‡å°‘è¿‡æ¸¡ç»˜åˆ¶å‡å°‘å¸ƒå±€å±‚çº§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è‡ªå®šä¹‰ View æ¥å‡å°‘å±‚çº§ï¼Œæˆ–è€…æ›´åˆç†åœ°è®¾ç½®å¸ƒå±€æ¥å‡å°‘å±‚çº§ï¼Œä¸æŽ¨èåœ¨ RecyclerView ä¸­ä½¿ç”¨ ConstraintLayoutï¼Œæœ‰å¾ˆå¤šå¼€å‘è€…å·²ç»åæ˜ äº†ä½¿ç”¨å®ƒæ•ˆæžœæ›´å·®ï¼Œç›¸å…³é“¾æŽ¥æœ‰ï¼šIs ConstraintLayout that slow?ã€constraintlayout 1.1.1 not work well in listviewã€‚ å‡å°‘ xml æ–‡ä»¶ inflate æ—¶é—´è¿™é‡Œçš„ xml æ–‡ä»¶ä¸ä»…åŒ…æ‹¬ layout çš„ xmlï¼Œè¿˜åŒ…æ‹¬ drawable çš„ xmlï¼Œxml æ–‡ä»¶ inflate å‡º ItemView æ˜¯é€šè¿‡è€—æ—¶çš„ IO æ“ä½œï¼Œå°¤å…¶å½“ Item çš„å¤ç”¨å‡ çŽ‡å¾ˆä½Žçš„æƒ…å†µä¸‹ï¼Œéšç€ Type çš„å¢žå¤šï¼Œè¿™ç§ inflate å¸¦æ¥çš„æŸè€—æ˜¯ç›¸å½“å¤§çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç”¨ä»£ç åŽ»ç”Ÿæˆå¸ƒå±€ï¼Œå³ new View() çš„æ–¹å¼ï¼Œåªè¦æžæ¸…æ¥š xml ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å±žæ€§å¯¹åº”çš„ API å³å¯ã€‚ å‡å°‘ View å¯¹è±¡çš„åˆ›å»ºä¸€ä¸ªç¨å¾®å¤æ‚çš„ Item ä¼šåŒ…å«å¤§é‡çš„ Viewï¼Œè€Œå¤§é‡çš„ View çš„åˆ›å»ºä¹Ÿä¼šæ¶ˆè€—å¤§é‡æ—¶é—´ï¼Œæ‰€ä»¥è¦å°½å¯èƒ½ç®€åŒ– ItemViewï¼›è®¾è®¡ ItemType æ—¶ï¼Œå¯¹å¤š ViewType èƒ½å¤Ÿå…±ç”¨çš„éƒ¨åˆ†å°½é‡è®¾è®¡æˆè‡ªå®šä¹‰ Viewï¼Œå‡å°‘ View çš„æž„é€ å’ŒåµŒå¥—ã€‚ å…¶ä»–å…¶ä»–å¹¶ä¸ä»£è¡¨ä¸é‡è¦ï¼Œè€Œæ˜¯æˆ‘ä¸èƒ½æŠŠä»–ä»¬è¿›è¡Œåˆ†ç±»å“ˆï¼Œå…¶ä¸­å¯èƒ½æŸäº›æ“ä½œä¼šå¯¹ä½ çš„ RecyclerView æœ‰å¾ˆå¤§çš„ä¼˜åŒ–ã€‚ å‡çº§ RecycleView ç‰ˆæœ¬åˆ° 25.1.0 åŠä»¥ä¸Šä½¿ç”¨ Prefetch åŠŸèƒ½ï¼Œå¯å‚è€ƒ RecyclerView æ•°æ®é¢„å–ã€‚ å¦‚æžœ Item é«˜åº¦æ˜¯å›ºå®šçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ RecyclerView.setHasFixedSize(true); æ¥é¿å… requestLayoutæµªè´¹èµ„æºï¼› è®¾ç½® RecyclerView.addOnScrollListener(listener); æ¥å¯¹æ»‘åŠ¨è¿‡ç¨‹ä¸­åœæ­¢åŠ è½½çš„æ“ä½œã€‚ å¦‚æžœä¸è¦æ±‚åŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡ ((SimpleItemAnimator) rv.getItemAnimator()).setSupportsChangeAnimations(false); æŠŠé»˜è®¤åŠ¨ç”»å…³é—­æ¥æç¥žæ•ˆçŽ‡ã€‚ å¯¹ TextView ä½¿ç”¨ String.toUpperCase æ¥æ›¿ä»£ android:textAllCaps=&quot;true&quot;ã€‚ å¯¹ TextView ä½¿ç”¨ StaticLayout æˆ–è€… DynamicLayout çš„è‡ªå®šä¹‰ View æ¥ä»£æ›¿å®ƒã€‚ é€šè¿‡é‡å†™ RecyclerView.onViewRecycled(holder) æ¥å›žæ”¶èµ„æºã€‚ é€šè¿‡ RecycleView.setItemViewCacheSize(size); æ¥åŠ å¤§ RecyclerView çš„ç¼“å­˜ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´æ¥æé«˜æ»šåŠ¨çš„æµç•…æ€§ã€‚ å¦‚æžœå¤šä¸ª RecycledView çš„ Adapter æ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚åµŒå¥—çš„ RecyclerView ä¸­å­˜åœ¨ä¸€æ ·çš„ Adapterï¼Œå¯ä»¥é€šè¿‡è®¾ç½® RecyclerView.setRecycledViewPool(pool); æ¥å…±ç”¨ä¸€ä¸ª RecycledViewPoolã€‚ å¯¹ ItemView è®¾ç½®ç›‘å¬å™¨ï¼Œä¸è¦å¯¹æ¯ä¸ª Item éƒ½è°ƒç”¨ addXxListenerï¼Œåº”è¯¥å¤§å®¶å…¬ç”¨ä¸€ä¸ª XxListenerï¼Œæ ¹æ® ID æ¥è¿›è¡Œä¸åŒçš„æ“ä½œï¼Œä¼˜åŒ–äº†å¯¹è±¡çš„é¢‘ç¹åˆ›å»ºå¸¦æ¥çš„èµ„æºæ¶ˆè€—ã€‚ é€šè¿‡ getExtraLayoutSpace æ¥å¢žåŠ  RecyclerView é¢„ç•™çš„é¢å¤–ç©ºé—´ï¼ˆæ˜¾ç¤ºèŒƒå›´ä¹‹å¤–ï¼Œåº”è¯¥é¢å¤–ç¼“å­˜çš„ç©ºé—´ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456new LinearLayoutManager(this) &#123; @Override protected int getExtraLayoutSpace(RecyclerView.State state) &#123; return size; &#125;&#125;;]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>RecyclerView</tag>
        <tag>æ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MACåº”ç”¨æ— æ³•æ‰“å¼€æˆ–æ–‡ä»¶æŸåçš„å¤„ç†æ–¹æ³•]]></title>
    <url>%2Fposts%2Fef30a8ec.html</url>
    <content type="text"><![CDATA[æœ‰äº›ç”¨æˆ·ä¸‹è½½äº†ä¸€äº›ç¨‹åºä¹‹åŽï¼Œå´å‘çŽ°æ— æ³•åœ¨MACä¸­å®‰è£…ï¼Œå®‰è£…æ—¶ä¼šå¼¹å‡ºä¸‹å›¾æ‰€ç¤ºè­¦å‘Šæ¡†ï¼šâ€œæ‰“ä¸å¼€ xxxï¼Œå› ä¸ºå®ƒæ¥è‡ªèº«ä»½ä¸æ˜Žçš„å¼€å‘è€…â€ã€‚é‚£ä¹ˆè¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ åœ¨MACä¸‹å®‰è£…ä¸€äº›è½¯ä»¶æ—¶æç¤ºâ€æ¥è‡ªèº«ä»½ä¸æ˜Žå¼€å‘è€…â€ï¼Œå…¶å®žè¿™æ˜¯MACæ–°ç³»ç»Ÿå¯ç”¨äº†æ–°çš„å®‰å…¨æœºåˆ¶ã€‚é»˜è®¤åªä¿¡ä»» Mac App Store ä¸‹è½½çš„è½¯ä»¶å’Œæ‹¥æœ‰å¼€å‘è€… ID ç­¾åçš„åº”ç”¨ç¨‹åºã€‚æ¢å¥è¯è¯´å°±æ˜¯ MAC ç³»ç»Ÿé»˜è®¤åªèƒ½å®‰è£…é è°±æ¸ é“ï¼ˆæœ‰è‹¹æžœå®¡æ ¸çš„ Mac App Storeï¼‰ä¸‹è½½çš„è½¯ä»¶æˆ–è¢«è®¤å¯çš„äººå¼€å‘çš„è½¯ä»¶ã€‚ è¿™å½“ç„¶æ˜¯ä¸ºäº†ç”¨æˆ·ä¸ä¼šç¨€é‡Œç³Šæ¶‚å®‰è£…æµæ°“è½¯ä»¶ä¸­æ‹›ï¼Œä½†æ²¡æœ‰å¼€å‘è€…ç­¾åçš„ â€œè€å®žè½¯ä»¶â€ ä¹Ÿå—å½±å“äº†ï¼Œå®‰è£…å°±ä¼šå¼¹å‡ºä¸‹å›¾æ‰€ç¤ºè­¦å‘Šæ¡†ï¼šâ€œæ‰“ä¸å¼€ xxxï¼Œå› ä¸ºå®ƒæ¥è‡ªèº«ä»½ä¸æ˜Žçš„å¼€å‘è€…â€ã€‚ å‡ºçŽ°è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ³•æœ‰2ç§ï¼š æœ€ç®€å•çš„æ–¹å¼ï¼šæŒ‰ä½ControlåŽï¼Œå†æ¬¡ç‚¹å‡»è½¯ä»¶å›¾æ ‡ï¼Œå³å¯ã€‚ ä¿®æ”¹ç³»ç»Ÿé…ç½®ï¼šç³»ç»Ÿåå¥½è®¾ç½®â€¦ -&gt; å®‰å…¨æ€§ä¸Žéšç§ã€‚ ç³»ç»Ÿåå¥½è®¾ç½® å®‰å…¨æ€§ä¸Žéšç§ è®¤è¯ ä¿®æ”¹ä¸ºä»»ä½•æ¥æº é«˜èƒ½é¢„è­¦ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼(ä¸“é—¨ä¸ºä¸ä»”ç»†çœ‹æ–‡ç« çš„å‡†å¤‡çš„ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚æ²¡åŠžæ³•ï¼Œåªèƒ½æ”¾è¿™ä¹ˆå¤§äº†ï¼Œè¦ä¸è€æœ‰äººåœ¨è¯„è®ºé‡Œé¢é—®)å¦‚æžœæ²¡æœ‰è¿™ä¸ªé€‰é¡¹çš„è¯ï¼ˆmacOS Sierra 10.12ï¼‰,æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥sudo spctl --master-disableç„¶åŽæŒ‰å›žè½¦ã€‚ç„¶åŽä¼šçœ‹è§ä¸ªpasswordåŽé¢è¿˜æœ‰ä¸ªé’¥åŒ™å›¾æ ‡ï¼Œç„¶åŽä¸ç”¨ç®¡ä»–ç›´æŽ¥å†ç»§ç»­è¾“å…¥ä½ è‡ªå·±ç”µè„‘è§£é”å¯†ç ï¼ˆè¾“å…¥çš„æ—¶å€™ä¸æ˜¾ç¤ºä½ è¾“å…¥çš„å¯†ç ï¼Œæ„Ÿè§‰å°±æ˜¯è¾“å…¥ä¸äº†ä¸œè¥¿ä¸€æ ·ï¼Œä¹Ÿä¸ç”¨ç®¡ï¼Œå‡­æ„Ÿè§‰è¾“å…¥å®ŒæŒ‰å›žè½¦é”®ï¼‰ã€‚ç„¶åŽå†å›žåˆ°éšç§é‡Œï¼Œå°±çœ‹è§ä»»ä½•æ¥æºäº†ã€‚ Â©è½¯ä»¶è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰;æœ¬ç«™æ‰€æœ‰è½¯ä»¶å‡æ¥æºäºŽç½‘ç»œï¼Œä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œè¯·æ”¯æŒæ­£ç‰ˆï¼ è½¬è½½è¯·æ³¨æ˜Žå‡ºå¤„ï¼šç²¾å“MACåº”ç”¨åˆ†äº« Â» MACåº”ç”¨æ— æ³•æ‰“å¼€æˆ–æ–‡ä»¶æŸåçš„å¤„ç†æ–¹æ³•]]></content>
      <categories>
        <category>Mac</category>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>å…¶ä»–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå¼€å‘æŠ€å·§]]></title>
    <url>%2Fposts%2F56f29aad.html</url>
    <content type="text"><![CDATA[æœ‰åŒå­¦é—®æˆ‘ï¼Œå¯¹åº”ç”¨å¼€å‘ä½ æœ‰æ²¡æœ‰å€¼å¾—æ³¨æ„æˆ–å°æŠ€å·§çš„åœ°æ–¹å¯ä»¥åˆ†äº«çš„ã€‚æ¯”å¦‚é€‚é…ã€ä¼˜åŒ–ã€æŽ’æŸ¥é”™è¯¯ä»€ä¹ˆçš„ã€‚é¸¡æŽ’æŠŠè‡ªå·±çš„æ€»ç»“ç¬”è®°æ•´ç†å‡ºæ¥äº†ã€‚ä¾›å¤§å®¶å‚è€ƒã€‚ å¼€å·¥å‡†å¤‡åœ¨é¡¹ç›®ä¸šåŠ¡ä»£ç å¼€å·¥ä¹‹å‰ï¼Œæœ€å¥½æŠŠè¿™äº›é—®é¢˜éƒ½è§£å†³æŽ‰ï¼Œå¦åˆ™å¿…å°†é…¿æˆå¤§ç¥¸å®³ã€‚å®ƒä»¬æ˜¯ï¼š ç»„ä»¶è·¯ç”± å¼‚æ­¥å¤„ç† ç»„ä»¶åŒ–æ¨¡å—å·¥ç¨‹ å…¨å±€ç½‘ç»œæ‹¦æˆªå™¨ å¼‚å¸¸ç»Ÿä¸€å¤„ç†å™¨ åŸºç¡€è§†å›¾ç»„ä»¶å°è£… æ—¥å¿—è®°å½•å·¥å…· è§£å†³å†™æ— æ•°æ¬¡ä¸€æ¨¡ä¸€æ ·ä»£ç çš„æ¨¡æ¿ï¼ˆå¦‚è‡ªå®šä¹‰MVPæ¨¡æ¿ï¼‰ æœºåž‹é€‚é…ç‰¹å®šçš„æœºåž‹ä¸Šå‡ºé—®é¢˜æ—¶ï¼Œåˆ«ç€æ€¥ã€‚æˆ‘ä»¬å¯ä»¥å°è¯•ä»¥ä¸‹å‡ ä¸ªåŠžæ³•ã€‚ åç¼–è¯‘romï¼Œçœ‹åº•å±‚æ”¹åŠ¨(æ¡ä»¶ç•¥é«˜) è”ç³»è¯¥åŽ‚å•†çš„å·¥ç¨‹å¸ˆï¼ˆå¦‚æžœå¯ä»¥çš„è¯ï¼‰ æ‹·è´æ•´ä¸ªæˆ‘ä»¬è°ƒç”¨apiçš„æºç è¿›è¡Œå•ç‹¬ä¾èµ–ï¼Œè€Œæ”¾å¼ƒç³»ç»Ÿå†…çš„ é€†å‘åœ¨è¯¥æœºåž‹ä¸Šæ­£å¸¸çš„åŒç±»appï¼Œå‚è€ƒé€†å‘åŽçš„ä»£ç å®žçŽ° å‚è€ƒå„ä¸ªç‰ˆæœ¬ä¸åŒçš„Android APIå˜åŒ–ï¼Œå¯ä»¥ä»Žæºç å…¥æ‰‹è¿›è¡Œå¯¹ åˆ©ç”¨åå°„èŽ·å–è¯¥ç‰¹å®šæœºåž‹ä¸Šçš„æŸä¸ªæˆ‘ä»¬æƒ³çŸ¥é“çš„æ–¹æ³•ï¼ŒåŠ¨æ€è°ƒè¯• æŽ’æŸ¥å´©æºƒé—ªé€€æ—¥å¿—: å¦‚æžœappåœ¨è°ƒè¯•çš„è¿‡ç¨‹ä¸­å‡ºçŽ°é—ªé€€,æ­¤æ—¶åœ¨logcatä¸‹æ—¥å¿—ä¼šè¢«æ–°èµ·æ¥çš„è¿›ç¨‹å†²åˆ·æŽ‰ã€‚è¿™æ—¶éœ€è¦æŠŠè¿‡æ»¤å™¨é€‰æ‹©ä¸ºNo filter æŠŠæ—¥å¿—çº§åˆ«é€‰ä¸º errorå³å¯æŸ¥çœ‹åˆ°ä¸Šä¸€æ¬¡å´©æºƒçš„æ—¥å¿—ã€‚ æœ‰ä¸€ç§æƒ…å†µæ˜¯æ‰‹æœºå¹¶ä¸åœ¨æˆ‘ä»¬èº«è¾¹,æˆ‘ä»¬ä¹Ÿæ— æ³•ä½¿ç”¨è°ƒè¯•å·¥å…·ã€‚æ­¤æ—¶å¯ä»¥æŽ¥å…¥ä¸€äº›ç¬¬ä¸‰æ–¹çš„æ—¥å¿—è®°å½•å·¥å…·ã€‚åœ¨å¼€å‘çŠ¶æ€ä¸‹ä¸å»ºè®®ä½¿ç”¨å‹ç›Ÿ 360ä¹‹ç±»sdk,å› ä¸ºå¾ˆæœ‰å¯èƒ½æˆ‘ä»¬çš„appæ ¹æœ¬æ— æ³•è¿žæŽ¥åˆ°ç½‘ç»œå°±å´©æºƒäº†ã€‚ å¯ä»¥é€‰æ‹©æŠŠæ—¥å¿—å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­ã€‚å†åˆä½¿ç”¨æ‰‹æœºçš„äººå‘å›žæ¥ã€‚ä¸€èˆ¬è¿™ä¸ªäººæ˜¯æµ‹è¯•ã€‚ å¦‚æžœappæœªæŽ¥å…¥ä»»ä½•æ—¥å¿—ä¿å­˜å·¥å…·,å¯ä»¥åœ¨data/anr/ç›®å½•ä¸‹æŸ¥çœ‹åˆ°æ‰€æœ‰çš„ANRå¼‚å¸¸ä¿¡æ¯ã€‚ä½†éœ€è¦suæƒé™ã€‚å¦åˆ™æ— æ³•è®¿é—®åˆ°ã€‚ APPæ€§èƒ½ä½“éªŒä¼˜åŒ– ç´ ææœ‰å¿…è¦ä½¿ç”¨åŽ‹ç¼©åŽçš„ã€‚æŽ¨èç†ŠçŒ«PNGåŽ‹ç¼©ã€‚ èµ„æºèƒ½ç”¨ä»£ç ç”»å°½é‡ä½¿ç”¨ä»£ç åŽ»ç”»ï¼Œè€Œä¸è¦ä½¿ç”¨é™æ€èµ„æºã€‚ åœ¨å¤æ‚çš„å¸ƒå±€ä¸Š,æ¯”å¦‚å¾ˆå¤šappçš„é¦–é¡µéœ€è¦åŠ è½½ä¸åŒç±»åž‹çš„itemã€‚ä½¿ç”¨äº†RecyclerViewå¤šç±»åž‹åŠ è½½,åˆ·æ–°æ•°æ®æ—¶ä¸€å®šè¦ä½¿ç”¨å•ç‹¬å¯¹itemåˆ·æ–°apiã€‚åˆ‡å‹¿ä½¿ç”¨notifyitemchanged()æ–¹æ³•,è¿™é‡Œè¦ç”¨ä¸¤ä¸ªå‚æ•°çš„notifyItemChanged(1,&quot;gfg&quot;)æ–¹æ³•ã€‚ æ•°æ®æ‡’åŠ è½½ï¼Œæˆ–æŽ’é˜ŸåŠ è½½ æ··æ·†å¯ä»¥ä½¿åŒ…å‡å°å«:(xml èµ„æº classç­‰) å¦‚æžœçŽ©å¾—ä¸æ˜¯å¾ˆ6ï¼Œå°½é‡ä¸è¦å†™é™æ€å¼•ç”¨ï¼ŒåŒ¿åå†…éƒ¨ç±»è¿™ç§ä¼šå¯¼è‡´å†…å­˜æ³„æ¼çš„ä¸œè¥¿ã€‚å¦‚æžœå¾ˆæ‹…å¿ƒè‡ªå·±å¤±è¯¯çš„å†™äº†ï¼Œä¸€å®šè¦åŽ»åˆ†æžå®ƒä»¬ï¼ŒæŠŠä»–ä»¬æªå‡ºæ¥ã€‚ Activityçš„å±‚çº§ä¸è¦å¤ªæ·±ã€‚è¿‡æ·±ä¼šåœ¨ä½Žå†…å­˜è®¾å¤‡ä¸Šè¢«å›žæ”¶æ ˆåº•çš„ã€‚ å»ºè®®å’ŒæŠ€å·§ å‘çŽ°æŸå¤„ä»£ç å¯ä»¥å¤ç”¨æ€§çš„å°è£…ä¸€ä¸‹æˆ–è€…æ”¹è‰¯ä¸€ä¸‹ä¼šæ›´å¥½çš„æ—¶å€™ä¸€å®šè¦ä¹˜æ—©ï¼Œä¸è¦æ‹–å»¶ã€‚ï¼ˆçƒ‚æ³¥å·´åªä¼šè¶Šæ¥è¶Šçƒ‚ï¼ŒåŽé¢æ”¹=æ°¸è¿œæ²¡å¯èƒ½ï¼‰ debugç¼–è¯‘æœŸé—´å¯ä»¥æŠŠç”¨ä¸åˆ°çš„abiè¿‡æ»¤æŽ‰ï¼Œä¼šè®©æˆ‘ä»¬åŠ é€Ÿéƒ¨ç½²ã€‚ å°½é‡ä¿æŒè¾ƒæ–°çš„ support libraryä¾èµ–ã€‚å› ä¸ºè¾ƒé«˜çš„ç‰ˆæœ¬ä¸­ä¿®å¤äº†ä¸€äº›bugã€‚ æŽ¥å…¥ç¬¬ä¸‰æ–¹åŒ…æ—¶ï¼Œæœ€å¥½ä¸Žè‡ªèº«æ¨¡å—ä¿æŒç‹¬ç«‹ï¼Œåšåˆ°éšæ—¶è§£è€¦ï¼Œéšä¾¿å¤ç”¨ã€‚ å¤šä¸ªnativeåº“ä¾èµ–æ—¶ï¼Œè‹¥å‘çŽ°æŸäº›abiä¸Šä¸æ”¯æŒï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿æŒæœ€å°çš„abiã€‚å¦åˆ™ä¼šç»™æŸäº›æœºåž‹ä¼˜å…ˆè¯»å–å®ƒæ›´åˆé€‚çš„æž¶æž„ã€‚ä¼šé€ æˆç¾éš¾æ€§çš„å´©æºƒã€‚å¦‚:ARMæ–‡ä»¶å¤¹ä¸­å«ä¸¤ä¸ªsoï¼ŒARMv8ä¸­åªæœ‰ä¸€ä¸ªã€‚å±Šæ—¶æ‰‹æœºä¼˜å…ˆåŠ è½½äº†ARMV8çš„æƒ…å†µä¸‹ï¼Œå°†å¸¦æ¥æ‰¾ä¸åˆ°soåº“çš„å´©æºƒå¼‚å¸¸ã€‚ ä¸è¦å¤ªéšæ€§çš„å¼•å…¥ç¬¬ä¸‰æ–¹ä¾èµ–åº“ï¼Œå¦‚æžœåªæ˜¯ç”¨äº†å¾ˆå°ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼Œå»ºè®®å‰¥å‡ºæ¥è‡ªå·±å°è£…ã€‚ ç¬¬ä¸‰æ–¹çš„åŒ…å«ç§æœ‰apiä¸ºæš´éœ²æ—¶ï¼Œè®°å¾—ç”¨åå°„åŽ»å®žçŽ°ã€‚å½“ç„¶è¿™ä¸€åˆ‡éœ€è¦æˆ‘ä»¬èƒ½ç¿»ä»–ä»¬çš„sdkæºç è¯»ã€‚ä¹Ÿè®¸è¢«æ··æ·†äº†ã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨åŠ¨æ€è°ƒè¯•åŽ»è·Ÿè¸ªã€‚ å¤šæ•°æƒ…å†µä¸‹å®˜æ–¹çš„supportåŒ…æ¯”ç¬¬ä¸‰æ–¹è¦å¥½å¾—å¤šã€‚åªæ˜¯æˆ‘ä»¬ä¸çŸ¥é“ï¼Œæˆ–è€…ä¸ç†Ÿæ‚‰ã€‚ æ¸å˜å›¾ã€çº¯è‰²å›¾ã€å¸¦ä¸€æ ¹çº¿çš„å›¾ç”¨shapeï¼Œä¸è¦é™æ€å›¾ã€‚ä¼šå¼•å‘è¡€æ¡ˆï¼ å½“æ— æ³•é€šè¿‡æœç´¢è§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œè¯»æºç æ˜¯æœ€å¿«çš„è§£å†³æ€è·¯ã€‚åƒä¸‡ä¸è¦çžŽçŒœå’Œå°è¯•éšç¼˜å†™ä»£ç æ¥è§£å†³é—®é¢˜ã€‚ å°è£…æŽ§ä»¶æ—¶æ³¨æ„å¯¹èµ„æºç±»åž‹åšæ ¡éªŒå¦‚:Image.setImageResource(img);è¿™é‡Œçš„imgéœ€è¦åšå¼ºæ ¡éªŒï¼Œç±»åž‹æ£€æµ‹ï¼Œé˜²æ­¢åˆ«äººç”¨çš„æ—¶å€™ä¸å°å¿ƒå†™é”™äº†ã€‚å› ä¸ºå¦‚æžœæˆ‘ä»¬ä¸ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ã€‚é LayoutInflateré€šè¿‡åå°„åŽ»è§£æžxmlæ—¶æç¤ºå‡ºäº†çš„é”™è¯¯æ—¥å¿—éžå¸¸éš¾çœ‹ã€‚ä¸€èˆ¬è¿˜ä¼šä¼´éšä¸€å¤§å †è°ƒç”¨æ ˆå’Œé—ªé€€å‡ºçŽ°ã€‚ å†·å¯åŠ¨ä¼˜åŒ–ï¼Œä¸è¦åœ¨Applicationå¯åŠ¨æ—¶é‡Œåšè¿‡å¤šçš„ä»»åŠ¡&amp;ç¬¬ä¸€ä¸ªActivityé‡Œä¹Ÿæ˜¯ä¸€æ ·ã€‚æœ€å¥½æŠŠåˆå§‹åŒ–çš„ç™½å±Windowè®¾ä¸Šä¸€å¼ å›¾ç‰‡è¿‡æ¸¡ä¸€ä¸‹ã€‚ æœ‰ä¸å¦¥ä¹‹å¤„ï¼Œæ¬¢è¿ŽæŒ‡å‡ºå’Œè¡¥å……ï¼Œæ‹¼æ­»æŒ£æ‰Žçš„Androidç¨‹åºå‘˜ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>å¼€å‘æŠ€å·§</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å¼€å‘æŠ€å·§</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android 8.0é‡‡å‘ä»¥åŠè§£å†³æ–¹æ³•]]></title>
    <url>%2Fposts%2Fb2677b13.html</url>
    <content type="text"><![CDATA[è™½ç„¶ Android 9.0 éƒ½å·²ç»é¢ä¸–äº†ï¼Œæœ¬ç¯‡æ–‡ç« å†™çš„æœ‰ç‚¹è¿Ÿäº†ã€‚ ä½†æ˜¯è¿Ÿåˆ°å¥½è¿‡ä¸åˆ°ï¼Œå› æ­¤åŸºäºŽæ­¤è¿™è¾¹è¿˜æ˜¯è®°å½•ä¸€ä¸‹é¡¹ç›®ä¸­é‡åˆ°çš„ Android 8.0 çš„å‘åŠå¯¹åº”è§£å†³æ–¹æ³•ã€‚ æ¯æ¬¡ç³»ç»Ÿå‡çº§ï¼Œè™½ç„¶ç³»ç»ŸåŠŸèƒ½æ›´åŠ å¼ºå¤§äº†ï¼Œå„æ–¹é¢æ€§èƒ½ä¹Ÿæé«˜äº†ã€‚ ä½†æ˜¯å¯¹äºŽå¼€å‘è€…è€Œè¨€ï¼Œä¸€ä¸ªå›°æ‰°çš„é—®é¢˜ä¹Ÿæ˜¯éšä¹‹è€Œæ¥â€”â€”å…¼å®¹ã€‚ å°¤å…¶å¯¹äºŽä¸€äº›å·²ç»ä¸Šå¸‚çš„ App è€Œè¨€ï¼Œåœ¨æ–°ç³»ç»Ÿå‘å¸ƒä¹‹å‰å°±è¦äº†è§£åˆ°åº•æœ‰å“ªäº›æ”¹åŠ¨ï¼Œä»¥é¿å…ç”¨æˆ·å‡çº§æ–°ç³»ç»ŸåŽå¯¼è‡´ App æ²¡æ³•æ­£å¸¸è¿è¡Œã€‚ å¥½äº†ï¼Œå›žå½’ä¸»é¢˜ï¼Œè¯´è¯´ Android 8.0 é‡Œé¢çš„å‡ ä¸ªå‘å§ã€‚ å”¤ä¸èµ·ç³»ç»Ÿå®‰è£…å™¨å¦‚æžœä½ çš„ App æä¾›äº†æ›´æ–°åŠŸèƒ½ï¼Œç”¨æˆ·ç‚¹å‡»æ›´æ–°ï¼Œä½ ä¸‹è½½å®Œ Apk ä¹‹åŽä¼šè‡ªåŠ¨å¼¹å‡ºå®‰è£…ç•Œé¢ã€‚ è¿™ä¸ªå®‰è£…ç•Œé¢çš„å¼¹å‡ºå°±æ˜¯ä¾èµ–äºŽç³»ç»Ÿçš„å®‰è£…å™¨ã€‚ å‡è®¾ä½ åœ¨ Android 8.0 ä»¥ä¸‹çš„æ‰‹æœºæ“ä½œæ­£å¸¸ï¼Œä½†æ˜¯åœ¨ 8.0 çš„æ‰‹æœºä¸Šï¼Œä½ ä¼šå‘çŽ°ï¼Œä¸‹è½½å®Œä¹‹åŽå®Œå…¨æ²¡ååº”ã€‚ å‡è®¾ä½ ä»¥ä¸ºè¯´å¼¹ä¸ªæç¤ºè®©ç”¨æˆ·è‡ªå·±å®‰è£…ï¼Œæˆ‘æƒ³è¯´ç”¨æˆ·æ‰ä¸ä¼šç†ä½ ã€‚ç”¨æˆ·åˆ†åˆ†é’Ÿå°±ä¸æ›´æ–°äº†ã€‚ æ‰€ä»¥è¯´æˆ‘ä»¬è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®©è¿™ä¸ªå®‰è£…å™¨åœ¨ Android 8.0 çš„æ‰‹æœºä¹Ÿèƒ½æ­£å¸¸å”¤èµ·ã€‚ å…¶å®žè§£å†³æ–¹æ³•éžå¸¸ç®€å•ã€‚ åªéœ€è¦åœ¨ AndroidManifest.xml ä¸­å£°æ˜Žä»¥ä¸‹æƒé™å³å¯ã€‚ 1&lt;uses-permission android:name=&quot;android.permission.REQUEST_INSTALL_PACKAGES&quot; /&gt; è€Œä¸”è¿˜ä¸éœ€è¦ä½ åœ¨ä»£ç åŠ¨æ€ç”³è¯·ï¼Œæ˜¯ä¸æ˜¯ So easyã€‚ ä¸€è¡Œä»£ç è§£å†³è¿™ä¸ªå…¼å®¹æ€§é—®é¢˜ã€‚ é€šçŸ¥é—®é¢˜å‡è®¾ä½ çš„ App éœ€è¦åœ¨ä»»åŠ¡æ æ˜¾ç¤ºé€šçŸ¥ã€‚å¦‚æžœä½ æ˜¯æŒ‰ç…§ Android 8.0 ä¹‹å‰çš„å†™æ³•çš„è¯ã€‚é‚£ä¹ˆåœ¨ 8.0 çš„æ‰‹æœºä¸Šé¢ä½ æ˜¯æ˜¾ç¤ºä¸äº†çš„ã€‚ é‚£æ€Žä¹ˆåŠžå‘¢ï¼Ÿ å…³äºŽé€šçŸ¥çš„åŸºæœ¬å†™æ³•è¿™è¾¹å°±ä¸å†èµ˜ä½™ï¼Œå¦‚æžœä¸æ¸…æ¥šçš„å°ä¼™ä¼´è‡ªè¡ŒæŸ¥é˜…èµ„æ–™ã€‚è¿™è¾¹é‡ç‚¹è¯´ä¸‹è§£å†³æ–¹æ³•ã€‚ é¦–å…ˆè¯´ä¸‹ä¸‹é¢ä»£ç å‡ºçŽ°çš„å‡ ä¸ªå˜é‡ï¼š 123private static NotificationManager manager;public static final String NOTIFICATION_CHANNEL = &quot;your app pkg name&quot;;private static final String NOTIFICATION_CHANNEL_NAME = &quot;App Channel&quot;; ç¬¬ä¸€ä¸ªå†™è¿‡é€šçŸ¥çš„éƒ½çŸ¥é“ï¼Œä¸€ä¸ªç®¡ç†ç±»ã€‚ ç¬¬äºŒä¸ªæ˜¯é€šçŸ¥çš„ä¸€ä¸ª CHANNELï¼Œè¿™ä¸ªä¹Ÿæ˜¯ 8.0 ä¹‹åŽæ‰å¼•å…¥çš„ã€‚å–å€¼ App åŒ…åå³å¯ã€‚ ç¬¬ä¸‰ä¸ªè‡ªå®šä¹‰ï¼Œåªè¦ä¿è¯å”¯ä¸€å³å¯ã€‚ å…¼å®¹æœ‰ä¸¤æ­¥éœ€è¦æ“ä½œã€‚ 1. åˆ›å»ºChannel12345678910private static void createChannel() &#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; NotificationChannel notifyChannel = new NotificationChannel(NOTIFICATION_CHANNEL, NOTIFICATION_CHANNEL_NAME, NotificationManager.IMPORTANCE_DEFAULT); notifyChannel.setLightColor(Color.GREEN); notifyChannel.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE); manager.createNotificationChannel(notifyChannel); &#125; &#125; 2. èŽ·å– Notification.Builder1234567private Notification.Builder getNotificationBuilder(Context sourceContext) &#123; if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) &#123; return new Notification.Builder(sourceContext, NOTIFICATION_CHANNEL); &#125; else &#123; return new Notification.Builder(sourceContext); &#125; &#125; å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢çš„æ“ä½œéƒ½ä»¥ 8.0 ä½œä¸ºåˆ†ç•Œå¤„ç†ã€‚ åšå®Œè¿™ä¸¤æ­¥ï¼Œä¹‹å‰ä¸èƒ½æ˜¾ç¤ºé€šçŸ¥çš„ App å°±å¯ä»¥æ˜¾ç¤ºäº†ã€‚ æ›´å¤šå†…å®¹å¯ä»¥çœ‹å®˜æ–¹ç¤ºä¾‹ï¼š github.com/googlesamplâ€¦]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidStudioæ¸…ç†ç¼“å­˜CleanProjectä¸ŽInvalidateCaches]]></title>
    <url>%2Fposts%2Fc7a76d2f.html</url>
    <content type="text"><![CDATA[####Android studio æœ‰æ—¶æ‰¾ä¸åˆ°Ræ–‡ä»¶ã€ å¯¼å…¥çš„èµ„æºã€å¸ƒå±€ ã€ jaråŒ… ç­‰ . å¯èƒ½æ˜¯studio ç¼“å­˜é€ æˆçš„ . 1.ä½¿ç”¨clean projectå·¥å…·æ  Build â€“&gt; clean project 2. ä½¿ç”¨invalidate caches restarté€‰æ‹©å·¥å…·æ  File â€“&gt; Invalidate Caches /Restartâ€¦ -&gt; Invalidate and Restart é‡å¯Android studio]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HexoNextç‚¹å‡»æœç´¢ä¸€ç›´è½¬åœˆåœˆï¼Œè§£å†³æŽ§åˆ¶å­—ç¬¦é—®é¢˜]]></title>
    <url>%2Fposts%2Fb30a2a4e.html</url>
    <content type="text"><![CDATA[1. çŽ¯å¢ƒ macOS Sierra 10.13.6 vscode 1.29.0 æœ€æ–°ç‰ˆ 2. å¦‚ä½•é‡çŽ°è¿™ä¸ªé—®é¢˜åœ¨ä½¿ç”¨ä¸­æ–‡è¾“å…¥æ³•è¾“å…¥ä¸­æ–‡çš„æ—¶å€™ï¼Œä¸€ç›´æŒ‰åŽé€€é”®ï¼Œä¾‹å¦‚è¾“å…¥sfsfï¼Œå½“ä½ æŒ‰äº†4ä¸‹åŽé€€é”®æ—¶ï¼Œä½ ä¼šå‘çŽ°ï¼Œæœç‹—è¾“å…¥æ³•å¼¹å‡ºæ¡†è™½ç„¶æ¶ˆå¤±äº†ï¼Œä½†æ˜¯é¡µé¢ä¸Šè¿˜ä¼šå‰©ä¸‹ä¸€ä¸ªs, è¿™æ˜¯ä½ å¦‚ä½•å†æ¬¡æŒ‰ä¸€ä¸‹åŽé€€çš„è¯ï¼Œså°±ä¼šå˜æˆbs, å˜æˆéšè—å­—ç¬¦ã€‚è¿™ä¸ªä¸€èˆ¬æ˜¯å³è¾¹æœ‰markdownæ¸²æŸ“æ’ä»¶æ—¶æ‰ä¼šå‡ºçŽ°ã€‚ ä»Žæ›´ç¡®åˆ‡çš„è§’åº¦è¯´ï¼Œæ˜¯ä½ çš„ç¼–è¾‘å™¨ä¸€æ—¦å¼€äº†webviewï¼Œå°±ä¼šå‡ºçŽ°è¿™ä¸ªé—®é¢˜ï¼Œå³ä½¿æ˜¯vscodeçš„æ¬¢è¿Žé¡µï¼Œä¹Ÿæ˜¯webviewï¼Œä¹Ÿä¼šå¯¼è‡´è¿™ä¸ªé—®é¢˜ã€‚æ‰€ä»¥æœ€å¥½åœ¨å†™ä»£ç æ—¶å°½é‡å…³é—­webviewã€‚ 3. å¦‚ä½•è®©éšè—å­—ç¬¦çŽ°èº«Macç‰ˆçš„vscodeæŽ§åˆ¶å­—ç¬¦ä¸€èˆ¬æ˜¯ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥çš„ï¼Œå¯ä»¥ç”¨ä¸€ä¸‹çš„æ–¹æ³•è®©å…¶æ˜¾ç¤ºå‡ºæ¥ 1&quot;editor.renderControlCharacters&quot;: true åœ¨ç¼–è¾‘å™¨ä¸­æ˜¾ç¤ºçš„åƒå¾ˆå°çš„BS, è¡¨ç¤ºbackspaceçš„æ„æ€ã€‚ä¸€èˆ¬æ˜¯åœ¨è¾“å…¥æ—¶ï¼ŒæŒ‰äº†åŽé€€æˆ–è€…åˆ é™¤ä¼šå¶å°”å‡ºçŽ°è¿™ä¸ªå­—ç¬¦ã€‚ 4. éšè—çš„æŽ§åˆ¶å­—ç¬¦ä¼šå‡ºçŽ°ä»€ä¹ˆé—®é¢˜ï¼Ÿ4.1. æŽ§åˆ¶å­—ç¬¦åœ¨githubä¸Šä¼šå‡ºçŽ°é—®å·ä¾‹å¦‚ä¸‹å›¾çš„çš„å’ŒåŒå­—ä¹‹é—´å°±æ˜¯å‡ºçŽ°ä¸€ä¸ªéšè—å­—ç¬¦ï¼Œåœ¨githubä¸Šå°±ä¼šå‡ºçŽ°ä¸€ä¸ªå¸¦æœ‰èƒŒæ™¯çš„é—®å·ã€‚ 4.2. æŽ§åˆ¶å­—ç¬¦åœ¨Hexo NexT Local Search ä¼šå¯¼è‡´search.xmlæ¸²æŸ“å¤±è´¥ï¼Œæœç´¢æ¡†ä¸€ç›´åœ¨è½¬åœˆå¦‚æžœä½ ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€search.xmlï¼Œä¼šå‘çŽ°è§£æžæŠ¥é”™ 5. å¦‚ä½•è§£å†³5.1. æ‰‹åŠ¨åˆ é™¤éšè—å­—ç¬¦å¯ä»¥ä½¿ç”¨æ›¿æ¢ï¼Œå…ˆå¤åˆ¶ä¸€ä¸ªéšè—å­—ç¬¦ï¼Œç„¶åŽæŠŠéšè—å­—ç¬¦æ›¿æ¢æˆç©º 5.2. ä½¿ç”¨æ’ä»¶ Remove backspace control characterRemove backspace control character åœ¨æœ¬å®¶chromiumå·²è¢«åˆå¹¶ï¼Œå› æ­¤ï¼Œåœ¨8æœˆä¸Šæ—¬å‘è¡Œçš„vscode 1.15å°†ä¼šé‡æ–°ç¡®å®š(vscode 1.15, electron 1.7.4)ã€‚äº‹å®žä¸Šï¼Œåˆ°çŽ°åœ¨è¿™ä¸ªé—®é¢˜è¿˜æ˜¯æ²¡è§£å†³çš„ ç‰¹ç‚¹ æ ¼å¼åŒ–ç¨‹åºï¼Œç”¨äºŽåˆ é™¤æ‰“å¼€çš„æ–‡æ¡£ä¸­åŒ…å«çš„æŽ§åˆ¶å­—ç¬¦ã€‚è¦è¢«åˆ é™¤çš„æŽ§åˆ¶å­—ç¬¦é»˜è®¤å¦‚ä¸‹ã€‚ 1/[\u0000]|[\u0001]|[\u0002]|[\u0003]|[\u0004]|[\u0005]|[\u0006]|[\u0007]|[\u0008]|[\u000b]|[\u000c]|[\u000d]|[\u000e]|[\u000f]|[\u0010]|[\u0011]|[\u0012]|[\u0013]|[\u0014]|[\u0015]|[\u0016]|[\u0017]|[\u0018]|[\u0019]|[\u001a]|[\u001b]|[\u001c]|[\u001d]|[\u001e]|[\u001f]|[\u001c]|[\u007f]/gm ç”¨æ³• â€œeditor.formatOnSaveâ€: true å¦‚æžœè¢«è®¾å®š,ä¿å­˜æ—¶å¯åŠ¨ â€œeditor.formatOnTypeâ€: true åœ¨è¢«è®¾å®šçš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œå˜æ¢æ—¶;è¾“å…¥æ—¶å¯åŠ¨ 7. å‚è€ƒ Mac ä¸Šçš„ VSCode ç¼–å†™ Markdown æ€»æ˜¯å‡ºçŽ°éšè—å­—ç¬¦ï¼Ÿ Hexo next ä¸»é¢˜çš„ local search åŠŸèƒ½å¤±æ•ˆï¼Œç‚¹å‡»æœç´¢é“¾æŽ¥æ— æ³•å¼¹å‡ºå åŠ å±‚ Backspace can not erase the last one character during Chinese/Japanese IME conversion (macOS) #24981 Backspace can not erase the last one character during Japanese IME conversion (macOS) #9173 Two backspaces required to delete last character in webview input æŽ§åˆ¶å­—ç¬¦ Using IME with markdown preview enabled, press ESC/BACKSPACE leads in control characters #37114]]></content>
      <categories>
        <category>å»ºç«™</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>å»ºç«™</tag>
        <tag>VSCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸åŒçš„å›½å®¶/åœ°åŒºä¸Žè¯­è¨€ç¼©å†™ä»£ç ]]></title>
    <url>%2Fposts%2Ff8376e8.html</url>
    <content type="text"><![CDATA[å›½å®¶/åœ°åŒº è¯­è¨€ä»£ç  å›½å®¶åœ°åŒº è¯­è¨€ä»£ç  ç®€ä½“ä¸­æ–‡(ä¸­å›½) zh-cn ç®€ä½“ä¸­æ–‡(å°æ¹¾åœ°åŒº) zh-tw ç¹ä½“ä¸­æ–‡(é¦™æ¸¯) zh-hk è‹±è¯­(é¦™æ¸¯) en-hk è‹±è¯­(ç¾Žå›½) en-us è‹±è¯­(è‹±å›½) en-gb è‹±è¯­(å…¨çƒ) en-ww è‹±è¯­(åŠ æ‹¿å¤§) en-ca è‹±è¯­(æ¾³å¤§åˆ©äºš) en-au è‹±è¯­(çˆ±å°”å…°) en-ie è‹±è¯­(èŠ¬å…°) en-fi èŠ¬å…°è¯­(èŠ¬å…°) fi-fi è‹±è¯­(ä¸¹éº¦) en-dk ä¸¹éº¦è¯­(ä¸¹éº¦) da-dk è‹±è¯­(ä»¥è‰²åˆ—) en-il å¸Œä¼¯æ¥è¯­(ä»¥è‰²åˆ—) he-il è‹±è¯­(å—éž) en-za è‹±è¯­(å°åº¦) en-in è‹±è¯­(æŒªå¨) en-no è‹±è¯­(æ–°åŠ å¡) en-sg è‹±è¯­(æ–°è¥¿å…°) en-nz è‹±è¯­(å°åº¦å°¼è¥¿äºš) en-id è‹±è¯­(è²å¾‹å®¾) en-ph è‹±è¯­(æ³°å›½) en-th è‹±è¯­(é©¬æ¥è¥¿äºš) en-my è‹±è¯­(é˜¿æ‹‰ä¼¯) en-xa éŸ©æ–‡(éŸ©å›½) ko-kr æ—¥è¯­(æ—¥æœ¬) ja-jp è·å…°è¯­(è·å…°) nl-nl è·å…°è¯­(æ¯”åˆ©æ—¶) nl-be è‘¡è„ç‰™è¯­(è‘¡è„ç‰™) pt-pt è‘¡è„ç‰™è¯­(å·´è¥¿) pt-br æ³•è¯­(æ³•å›½) fr-fr æ³•è¯­(å¢æ£®å ¡) fr-lu æ³•è¯­(ç‘žå£«) fr-ch æ³•è¯­(æ¯”åˆ©æ—¶) fr-be æ³•è¯­(åŠ æ‹¿å¤§) fr-ca è¥¿ç­ç‰™è¯­(æ‹‰ä¸ç¾Žæ´²) es-la è¥¿ç­ç‰™è¯­(è¥¿ç­ç‰™) es-es è¥¿ç­ç‰™è¯­(é˜¿æ ¹å»·) es-ar è¥¿ç­ç‰™è¯­(ç¾Žå›½) es-us è¥¿ç­ç‰™è¯­(å¢¨è¥¿å“¥) es-mx è¥¿ç­ç‰™è¯­(å“¥ä¼¦æ¯”äºš) es-co è¥¿ç­ç‰™è¯­(æ³¢å¤šé»Žå„) es-pr å¾·è¯­(å¾·å›½) de-de å¾·è¯­(å¥¥åœ°åˆ©) de-at å¾·è¯­(ç‘žå£«) de-ch ä¿„è¯­(ä¿„ç½—æ–¯) ru-ru æ„å¤§åˆ©è¯­(æ„å¤§åˆ©) it-it å¸Œè…Šè¯­(å¸Œè…Š) el-gr æŒªå¨è¯­(æŒªå¨) no-no åŒˆç‰™åˆ©è¯­(åŒˆç‰™åˆ©) hu-hu åœŸè€³å…¶è¯­(åœŸè€³å…¶) tr-tr æ·å…‹è¯­(æ·å…‹å…±å’Œå›½) cs-cz æ–¯æ´›æ–‡å°¼äºšè¯­ sl-sl æ³¢å…°è¯­(æ³¢å…°) pl-pl ç‘žå…¸è¯­(ç‘žå…¸) sv-se è¥¿ç­ç‰™è¯­ (æ™ºåˆ©) es-cl]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidç»„ä»¶åŒ–ï¼Œå®Œå…¨è§£è€¦]]></title>
    <url>%2Fposts%2Fd7e6359d.html</url>
    <content type="text"><![CDATA[ç›®å‰,Android ç»„ä»¶åŒ–æ™®éä½¿ç”¨äºŽç§»åŠ¨å¼€å‘,ä½†æ˜¯ç»„ä»¶åŒ–çš„åˆè¡·æ˜¯ä¸ºäº†è§£è€¦ä»£ç ,å¹¶è¡Œå¼€å‘æ•ˆçŽ‡;å°åž‹appä¼¼ä¹Žä¼šcareä¸åˆ°,å®Œå…¨è§£è€¦çš„ç»„ä»¶åŒ–ä¼šåœ¨appè¶Šæ¥è¶Šè‡ƒè‚¿çš„æ—¶å€™å¸¦æ¥å¾ˆå¤§çš„æå‡; 1.ç»„ä»¶åŒ–ä»‹ç»ok,é‚£ä¹ˆæˆ‘ä»¬éœ€è¦çŸ¥é“å®Œå…¨è§£è€¦çš„ç»„ä»¶åŒ–æ¡†æž¶åº”è¯¥æ³¨æ„å“ªäº›ç‚¹: ä¸»appåªåŠ è½½ä¸šåŠ¡ç»„ä»¶,ä¸å¯è°ƒç”¨ç»„ä»¶;ç»„ä»¶ä¸Žç»„ä»¶ä¹‹é—´ä¸å­˜åœ¨è°ƒç”¨å…³ç³»;è¿™æ ·æ— è®ºæ˜¯ä¸»appå’Œä¸šåŠ¡ç»„ä»¶éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹,å®Œå…¨è§£è€¦çš„; ä¸»appå’Œç»„ä»¶éƒ½ä¾èµ–commonç»„ä»¶,é€šè¿‡commonçš„æ³¨å†Œå’Œåˆ†å‘å®žçŽ°ç»„ä»¶ä¹‹é—´çš„äº¤äº’,è¿™ä¸ªcommonæˆ‘ä»¬å§‘ä¸”å«åšä¸šåŠ¡ä¸»çº¿ androidä¸­pageä½¿ç”¨commonä¸‹å±‚æŽ¥å£å’Œè·¯ç”±è¿›è¡Œå®žçŽ°(åœ¨æœ¬æ¡†æž¶ä¸­,ARouterå®žçŽ°Activityè·³è½¬,ARouter-Interceptorå®žçŽ°Activityè·³è½¬çš„æ‹¦æˆª;Fragmenté€šè¿‡commonä¸‹æ²‰æ³¨å†Œåˆ†å‘å®žçŽ°Fragmentçš„å¡«å……) æ¯ä¸€ä¸ªç»„ä»¶åº”å½“æ˜¯ä¸€ä¸ªappå¯å•ç‹¬ç¼–è¯‘:Libraryå’ŒApplicationä¹‹é—´è½¬åŒ–ä½¿ç”¨gradleé…ç½®ç›¸åº”çš„Manifestå’ŒapplicationId 2.å•ç‹¬ç¼–è¯‘ç»„ä»¶åŒ–é…ç½®(gradle)ä¾èµ–å…³ç³» App ä¾èµ–common Home/Login/News ä¾èµ–common common ä¾èµ–component-base 2.1. é¦–å…ˆåœ¨æ•´ä¸ªå·¥ç¨‹çš„gradle.propertiesä¸­é…ç½®ç»„ä»¶ Library/Applicationåˆ‡æ¢çš„å¼€å…³: 123isRunLogin = false //loginç»„ä»¶isRunHome = false //homeç»„ä»¶isRunNews = false //newsç»„ä»¶ 2.2. ç”±äºŽandroidä¸­Library(ç»„ä»¶)/Applicationåˆ‡æ¢æ—¶çš„å·®å¼‚,éœ€è¦å•ç‹¬é…ç½®ä¸»è§ä»¥homeç»„ä»¶ä¸ºä¾‹:é¦–å…ˆå¼€build.gradle: 12345678910111213141516171819202122232425//æ³¨é‡Š1: é…ç½®åˆ‡æ¢application/Libraryçš„æ‰“åŒ…if (isRunHome.toBoolean())&#123; apply plugin: &apos;com.android.application&apos;&#125;else&#123; apply plugin: &apos;com.android.library&apos;&#125;android &#123; ....... sourceSets &#123; //æ³¨é‡Š2: Library/Applicationåˆ‡æ¢ AndroidManifest main &#123; if (isRunLogin.toBoolean())&#123; manifest.srcFile &apos;src/main/AndroidManifest.xml&apos; &#125;else&#123; manifest.srcFile &apos;src/main/manifest/AndroidManifest.xml&apos; &#125; &#125; &#125; ......&#125;...... æ³¨é‡Š1: åˆ‡æ¢application/Libarayçš„æ‰“åŒ…é…ç½® æ³¨é‡Š2: Applicationä¸ºå•ç‹¬ç¼–è¯‘,éœ€è¦æœ‰applicationId,å¹¶ä¸”ä¸»Activityéœ€è¦é…ç½®mainå±žæ€§;Libarayä¸ºé›†æˆç¼–è¯‘,ç»„ä»¶ä¸èƒ½æœ‰applicationId,ä¸”ä¸å¯ä»¥è®¾ç½®å¯åŠ¨çš„main Activityä¸‹é¢çœ‹é›†æˆç¼–è¯‘(Library)å’Œå•ç‹¬ç¼–è¯‘(Application)çš„Manifesté…ç½®: 123456789//é›†æˆç¼–è¯‘,æ‰“åŒ…ä¸ºLibrary&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android" package="component.android.com.home"&gt; &lt;application android:theme="@style/home_AppTheme"&gt; &lt;activity android:name=".view.activity.HomeActivity"/&gt; &lt;/application&gt;&lt;/manifest&gt; 12345678910111213141516171819202122//å•ç‹¬ç¼–è¯‘,æ‰“åŒ…ä¸ºå•ç‹¬Application å¯å•ç‹¬ç¼–è¯‘&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android" package="component.android.com.home"&gt; &lt;application android:allowBackup="true" android:icon="@mipmap/ic_launcher" android:label="@string/app_name" android:name=".global.HomeApp" android:roundIcon="@mipmap/ic_launcher_round" android:supportsRtl="true" android:theme="@style/home_AppTheme"&gt; &lt;activity android:name=".view.activity.HomeActivity"&gt; &lt;intent-filter&gt; &lt;action android:name="android.intent.action.MAIN" /&gt; &lt;category android:name="android.intent.category.LAUNCHER" /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; &lt;/application&gt;&lt;/manifest&gt; 3.ç»„ä»¶ä¹‹é—´activityè·³è½¬(Actiivityè·³è½¬)3.1. ç»„ä»¶ä¹‹é—´çš„activityè·³è½¬,è¿™é‡Œä½¿ç”¨ARouter ARouteræ˜¯é˜¿é‡Œå¼€æºçš„ä¸€ç§é¡µé¢è·³è½¬task é¦–å…ˆçœ‹ARouteråœ¨build.graldeçš„é…ç½®: 12345678910111213141516171819202122//ä¸»app build.gradle......dependencies &#123; ...... androidTestImplementation 'com.android.support.test:runner:1.0.2' androidTestImplementation 'com.android.support.test.espresso:espresso-core:3.0.2' &#125;//home/login/news ç»„ä»¶ build.gradledependencies &#123; ........ annotationProcessor 'com.alibaba:arouter-compiler:1.1.4'&#125;//common build.gradledependencies &#123; ...... api 'com.alibaba:arouter-api:1.3.1' // arouter-compiler çš„æ³¨è§£ä¾èµ–éœ€è¦æ‰€æœ‰ä½¿ç”¨ ARouter çš„ module éƒ½æ·»åŠ ä¾èµ– annotationProcessor 'com.alibaba:arouter-compiler:1.1.4'&#125; 3.2 åœ¨appå’Œå„ç»„ä»¶ä¸­è¿›è¡Œpageè·³è½¬ é¦–å…ˆæ˜¯ARouterçš„åˆå§‹åŒ– 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475public class MainApplication extends BaseApp &#123; @Override public void onCreate() &#123; super.onCreate(); //åœ¨ä¸»appä¸­åˆå§‹åŒ–ARouter initRouter(); initMoudleApp(this); initMoudleData(this); &#125; private void initRouter() &#123; if (BuildConfig.DEBUG)&#123; //æ‰“å°æ—¥å¿— ARouter.openLog(); ARouter.openDebug(); &#125; ARouter.init(this); &#125; @Override public void initMoudleApp(Application application) &#123; for (String moduleApp : AppConfig.moduleApps) &#123; try &#123; Class clazz = Class.forName(moduleApp); BaseApp baseApp = (BaseApp) clazz.newInstance(); baseApp.initMoudleApp(this); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IllegalAccessException e) &#123; e.printStackTrace(); &#125; catch (InstantiationException e) &#123; e.printStackTrace(); &#125; &#125; &#125; @Override public void initMoudleData(Application application) &#123; for (String moduleApp : AppConfig.moduleApps) &#123; try &#123; Class clazz = Class.forName(moduleApp); BaseApp baseApp = (BaseApp) clazz.newInstance(); baseApp.initMoudleData(this); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IllegalAccessException e) &#123; e.printStackTrace(); &#125; catch (InstantiationException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125;//ç»„ä»¶ä¸­ home--HomeApplicationpublic class HomeApp extends BaseApp &#123; @Override public void initMoudleApp(Application application) &#123; if (BuildConfig.DEBUG)&#123; //æ‰“å°æ—¥å¿— ARouter.openLog(); ARouter.openDebug(); &#125; ARouter.init(this); &#125; @Override public void initMoudleData(Application application) &#123; &#125;&#125; è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ å½“é›†æˆç¼–è¯‘æ—¶å€™ ,ç»„ä»¶ä»…ä»…æ˜¯ä¸€ä¸ªç»„ä»¶,ä¸ä¼šå•ç‹¬å…·å¤‡Applicagtionå…¥å£,æ‰€ä»¥éœ€è¦åœ¨ä¸»appçš„MainApplicationä¸­åˆ©ç”¨åå°„çš„æ–¹å¼ initMoudleData/initMoudleDataè¿›è¡ŒARouterç­‰åˆå§‹åŒ–çš„é…ç½®; ä¸‹é¢çœ‹ARouterçš„è·³è½¬å®žä¾‹: 123456789//app/MainActivity....private void initClick() &#123; findViewById(R.id.btn_nav_home).setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; ARouter.getInstance().build("/home/homeActivity").navigation() &#125;&#125; åœ¨appä¸­å®žçŽ°è·³è½¬,ä½†æ˜¯è¿™ä¸ª path/home/homeActivityéœ€è¦åœ¨homeç»„ä»¶ç›®æ ‡ä½ç½®æ·»åŠ æ³¨è§£æ‰èƒ½å®žçŽ°activityçš„è·³è½¬: 123456789@Route(path = "/myhome/homeActivity")public class HomeActivity extends AppCompatActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_home); &#125;&#125; è¿™æ · å°±æˆåŠŸå®žçŽ°ç±»ç»„ä»¶ä¹‹é—´çš„activityçš„è·³è½¬; 4.ç»„ä»¶ä¹‹é—´çš„é€»è¾‘äº¤äº’Appç‚¹å‡»è·³è½¬home,é¡»åˆ¤æ–­ç™»å½•é€»è¾‘: 1.ç™»å½•åˆ™è·³è½¬homeç»„ä»¶çš„homeActivity 2.æœªç™»å½•åˆ™è·³è½¬loginç»„ä»¶çš„loginActivity,ç‚¹å‡»ç™»å½•,å†é‡å¤ä»¥ä¸Šé€»è¾‘è¿™æ · ä¸»app,homeå’Œloginå°±å®žçŽ°äº†ä¸€ä¸ªç®€å•çš„äº¤äº’é€»è¾‘é¦–å…ˆå¼€component: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//ILoginServicepublic interface ILoginService &#123; boolean getLoginStatus(); int getLoginUserId();&#125;//DefultLoginServicepublic class DefultLoginService implements ILoginService &#123; @Override public boolean getLoginStatus() &#123; return false; &#125; @Override public int getLoginUserId() &#123; return 0; &#125;&#125;//ComponentServiceFactorypublic class ComponentServiceFactory &#123; ...... public static ComponentServiceFactory getInstance(Context context)&#123; if (instance == null)&#123; synchronized (ComponentServiceFactory.class)&#123; if (instance == null)&#123; instance = new ComponentServiceFactory(); &#125; &#125; &#125; return instance; &#125; private ILoginService loginService; public void setLoginService(ILoginService iloginService)&#123; loginService = iloginService; &#125; public ILoginService getLoginService()&#123; if (loginService == null)&#123; loginService = new DefultLoginService(); &#125; return loginService; &#125;&#125; ç„¶åŽåœ¨loginä¸­é€šè¿‡commonçš„ComponentServiceFactoryæ³¨å†Œå¯¹åº”çš„loginService 12345678910111213141516171819202122232425262728293031323334//LoginServicepublic class LoginService implements ILoginService &#123; @Override public boolean getLoginStatus() &#123; return AccountUtils.getInstance().isAccountStatus(); &#125; @Override public int getLoginUserId() &#123; return 0; &#125;&#125;//Loginç»„ä»¶LoginAppæ³¨å†Œservice........public class LoginApp extends BaseApp &#123; @Override public void initMoudleApp(Application application) &#123; Log.i("LoginApp","initMoudleApp"); if (BuildConfig.DEBUG)&#123; //æ‰“å°æ—¥å¿— ARouter.openLog(); ARouter.openDebug(); &#125; ARouter.init(this); ComponentServiceFactory.getInstance(this).setLoginService(new LoginService()); &#125; @Override public void initMoudleData(Application application) &#123; &#125;&#125; åœ¨App-MainActivityä¸­è·³è½¬homeActivity,åœ¨homeç»„ä»¶ä¸­ä½¿ç”¨ARouterçš„æ‹¦æˆªå™¨: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990//app-mainActivityprivate void initClick() &#123; findViewById(R.id.btn_nav_home).setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; ARouter.getInstance().build("/home/homeActivity").navigation(MainActivity.this, new NavCallback() &#123; //ARouteræ‹¦æˆªå™¨çš„ç›‘å¬ @Override public void onArrival(Postcard postcard) &#123; LogUtils.LogI("loginInterceptor","done"); &#125; @Override public void onFound(Postcard postcard) &#123; //super.onFound(postcard); LogUtils.LogI("loginInterceptor","found"); &#125; @Override public void onLost(Postcard postcard) &#123; //super.onLost(postcard); LogUtils.LogI("loginInterceptor","lost"); &#125; @Override public void onInterrupt(Postcard postcard) &#123; //super.onInterrupt(postcard); LogUtils.LogI("loginInterceptor","interrupt"); &#125; &#125;); &#125; &#125;); &#125;//home-HomeInterceptor@Interceptor(priority = 1,name = "homeInterceptor")public class HomeInterceptor implements IInterceptor &#123; private Context context; @Override public void process(Postcard postcard, InterceptorCallback callback) &#123; switch (postcard.getPath())&#123; case "/myhome/homeActivity": //é€šè¿‡componentè¿›è¡Œé€»è¾‘äº¤äº’ if (ComponentServiceFactory.getInstance(context).getLoginService().getLoginStatus())&#123; callback.onContinue(postcard); &#125;else &#123; ARouter.getInstance().build("/login/loginActivity").navigation(); //callback.onInterrupt(new RuntimeException("è¯·ç™»å½•")); //callback.onContinue(postcard); &#125; break; default: callback.onContinue(postcard); break; &#125; &#125; @Override public void init(Context context) &#123; this.context = context; &#125;&#125;//login-loginInterceptor@Interceptor(priority = 2,name = "loginInterceptor")public class LoginInterceptor implements IInterceptor &#123; private Context context; @Override public void process(Postcard postcard, InterceptorCallback callback) &#123; switch (postcard.getPath())&#123; case "/login/loginActivity": LogUtils.LogI("loginInterceptor","è¯·ç‚¹å‡»ç™»å½•æŒ‰é’®"); callback.onContinue(postcard); break; default: callback.onContinue(postcard); //åœ¨æ¯ä¸€ä¸ªç»„ä»¶ä¸­æ·»åŠ ä¸€ä¸ªnaviçš„æ‹¦æˆªå™¨ é€»è¾‘åœ¨ &#125; &#125; @Override public void init(Context context) &#123; this.context = context; &#125;&#125; 1.åœ¨è·³è½¬homeActivityæ—¶,è·³è½¬åˆ°homeç»„ä»¶çš„homeInterceptoræ‹¦æˆªå™¨ 2.åœ¨homeInterceptorä¸­é€šè¿‡componentèŽ·å–loginæ³¨å†Œçš„lohginserviceæ¥èŽ·å–ç™»å½•çŠ¶æ€,å®žçŽ°ä¸‹ä¸€æ­¥è·³è½¬ å¯ä»¥çœ‹åˆ° app é€šè¿‡ARouterè·³home homeé€šè¿‡componentçš„æ³¨å†Œåˆ†å‘,åˆ¤æ–­ç™»å½•é€»è¾‘ è¿›è¡Œä¸‹ä¸€æ­¥è·³è½¬;è¿™æ ·å°±å®žçŽ°äº†ä¸ä¾èµ–å…¶ä»–ç»„ä»¶çš„é€»è¾‘äº¤äº’ 5.ç»„ä»¶åŒ–fragmentè§£è€¦åœ¨androidä¸­æˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„å°±æ˜¯fragment,ä¸€èˆ¬æƒ…å†µä¸‹ æˆ‘ä»¬ä¼šå®žä¾‹åŒ–fragmentå†è¿›è¡Œä¸‹ä¸€æ­¥é€»è¾‘;ä¸ºäº†è§£è€¦æˆ‘ä»¬åœ¨componentä¸­æ³¨å†ŒfragmentæŽ¥å£,åœ¨ç›¸åº”ç»„ä»¶ä¸­æ³¨å†Œfragmentservice,åœ¨å…¶ä»–ç»„ä»¶ä¸­å®žçŽ°åˆ†å‘: 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162//component-LoginFragmentServicepublic class LoginFragmentService implements IFragmentService &#123; @Override public Fragment getFragment(String tag) &#123; return new LginHomeFragment(); &#125; @Override public void newFragment(Activity activity, int resId, FragmentManager fragmentManager, Bundle bundle, String tag) &#123; FragmentTransaction transaction = fragmentManager.beginTransaction(); transaction.add(resId,new LginHomeFragment(),tag); transaction.commit(); &#125;&#125;//component-ComponentServiceFactorypublic class ComponentServiceFactory &#123; private static volatile ComponentServiceFactory instance; private IFragmentService newsFragmentService; private IFragmentService homeFragmentService; private IFragmentService loginFragmentService; public static ComponentServiceFactory getInstance(Context context)&#123; if (instance == null)&#123; synchronized (ComponentServiceFactory.class)&#123; if (instance == null)&#123; instance = new ComponentServiceFactory(); &#125; &#125; &#125; return instance; &#125;........ //ä¸»å†Œfragmentserviceå…¥å£ public void setHomeFragmentService(IFragmentService iFragmentService)&#123; homeFragmentService = iFragmentService; &#125; public void setLoginFragmentService(IFragmentService iFragmentService)&#123; loginFragmentService = iFragmentService; &#125; public void setNewsFragmentService(IFragmentService iFragmentService)&#123; newsFragmentService = iFragmentService; &#125; public IFragmentService getNewsFragmentService() &#123; return newsFragmentService; &#125; public IFragmentService getHomeFragmentService() &#123; return homeFragmentService; &#125; public IFragmentService getLoginFragmentService() &#123; return loginFragmentService; &#125;&#125; åœ¨homeç»„ä»¶ä¸­è¿›è¡Œfragmentserviceçš„æ³¨å†Œå·¥ä½œ: 1234567891011121314151617181920//home-HomeApppublic class HomeApp extends BaseApp &#123; @Override public void initMoudleApp(Application application) &#123; if (BuildConfig.DEBUG)&#123; //æ‰“å°æ—¥å¿— ARouter.openLog(); ARouter.openDebug(); &#125; ARouter.init(this); ComponentServiceFactory.getInstance(this).setHomeFragmentService(new HomeFragmentService()); &#125; @Override public void initMoudleData(Application application) &#123; &#125;&#125; åœ¨Appä¸­è°ƒç”¨: 1234567// app-MainActivity:private void initBaseView() &#123; FragmentManager supportFragmentManager = getSupportFragmentManager(); ComponentServiceFactory.getInstance(this) .getHomeFragmentService().newFragment(this,R.id.content,supportFragmentManager,null,null); &#125; è¿™æ ·ä¸€ä¸ªhomeç»„ä»¶ä¸­çš„homeFragmentå°±åŠ è½½åˆ°ä¸»appçš„xmlä¸­åŒç†ç»„ä»¶ä¹‹é—´çš„fragmentå¼•ç”¨äº¦å¦‚æ­¤æ³¨æ„æ¡†æž¶ä¸­component-IFragmentServiceå®žçŽ°äº†ä¸¤ä¸ªæ–¹æ³•: 12345//èŽ·å–ç›®æ ‡çš„fragmentæ¥è¿›è¡Œæ“ä½œ Fragment getFragment(String tag); //ç”¨äºŽå›ºå®šçš„åŒºåŸŸæ¥å¡«å……ç›¸åº”fragment void newFragment(Activity activity, int resId, FragmentManager fragmentManager, Bundle bundle, String tag); getFragment(String tag);ä¸ºèŽ·å–ç›®æ ‡fragmentæŽ¥å£,èŽ·å–åˆ°å®žä¾‹ä¹‹åŽå¼€å‘è€…è‡ªå·±å®žçŽ°fragmentç›¸å…³é€»è¾‘ newFragment(...);é€‚ç”¨äºŽåœ¨å¸ƒå±€ä¸­é™æ€æ·»åŠ fragment,ä¸€æ­¥åˆ°ä½ å½“ç„¶æ¡†æž¶ä¸­è¿˜æœ‰éƒ¨åˆ†é™åˆ¶ç»„ä»¶èµ„æºçš„gradleé…ç½®,æœ‰å…´è¶£å¯ä»¥åœ¨githubä¸‹è½½demo]]></content>
      <categories>
        <category>Android</category>
        <category>ç»„ä»¶åŒ–</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ARouter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Handleræ¶ˆæ¯æœºåˆ¶å­¦ä¹ ]]></title>
    <url>%2Fposts%2F7a63eeca.html</url>
    <content type="text"><![CDATA[1.æ¦‚è¿° Handlerå…è®¸ä½ å‘é€å’Œå¤„ç†Messageï¼Œä»¥åŠå’Œçº¿ç¨‹ç›¸å…³è”çš„Runnableå¯¹è±¡ã€‚æ¯ä¸€ä¸ªHandlerå®žä¾‹éƒ½ä¸Žä¸€ä¸ªçº¿ç¨‹åŠè¯¥çº¿ç¨‹çš„MessageQueueç›¸å…³è”ã€‚æ—¢å½“ä½ åˆ›å»ºä¸€ä¸ªHandleræ—¶ï¼Œè¯¥Handlerå¿…é¡»ç»‘å®šä¸€ä¸ªçº¿ç¨‹ä»¥åŠè¯¥çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸€æ—¦å®ƒè¢«åˆ›å»ºï¼Œå®ƒèƒ½æŠŠmessageså’Œrunnablesä¼ é€åˆ°message queueï¼Œå¹¶åœ¨å®ƒä»¬ä»Žmessage queueä¸­å‡ºæ¥çš„æ—¶å€™æ‰§è¡Œå®ƒä»¬ã€‚ Handlerä¸»è¦æœ‰ä¸¤ä¸ªä¸»è¦ç”¨é€”ï¼š åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹è°ƒåº¦messageså’Œrunnablesçš„æ‰§è¡Œ å°†è¦åœ¨ä¸åŒçº¿ç¨‹ä¸Šæ‰§è¡Œçš„æ“ä½œåŠ å…¥é˜Ÿåˆ— å½“ä½ çš„åº”ç”¨ç¨‹åºè¢«åˆ›å»ºå‡ºæ¥çš„æ—¶å€™ï¼Œä¸»çº¿ç¨‹ä¼šä¸“é—¨è¿è¡Œä¸€ä¸ªmessage queueæ¥ç®¡ç†æœ€é¡¶çº§çš„åº”ç”¨å¯¹è±¡(å¦‚activities, broadcast receiversï¼Œç­‰ç­‰)ä»¥åŠå®ƒä»¬åˆ›å»ºçš„ä»»ä½•å…¶å®ƒçª—å£ã€‚ä½ å¯ä»¥åˆ›å»ºä½ è‡ªå·±çš„çº¿ç¨‹ï¼Œé€šè¿‡Handleræ¥ä¸Žä¸»çº¿ç¨‹å»ºç«‹è”ç³» 2.æºç åˆ†æž2.1 MessageQueue-æ¶ˆæ¯é˜Ÿåˆ— MessageQueueæ˜¯ä¸€ä¸ªé€šè¿‡Looperåˆ†å‘å®ƒæŒæœ‰çš„æ¶ˆæ¯åˆ—è¡¨çš„ä½Žå±‚çº§ç±»ã€‚Messagesæ²¡æœ‰ç›´æŽ¥æ·»åŠ åˆ°MessageQueueä¸­ï¼Œè€Œæ˜¯é€šè¿‡ä¸ŽLooperç›¸å…³è”çš„Handlerå¯¹è±¡ã€‚ Message-æ¶ˆæ¯ è¯¥ç±»å®žçŽ°äº†ParcelableæŽ¥å£ï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹ä½œä¸€ä¸ªæ•°æ®ç±» 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849** * * Defines a message containing a description and arbitrary data object that can be * sent to a &#123;@link Handler&#125;. This object contains two extra int fields and an * extra object field that allow you to not do allocations in many cases. * å®šä¹‰åŒ…å«æè¿°å’Œä»»æ„æ•°æ®å¯¹è±¡çš„æ¶ˆæ¯ * å‘é€åˆ°Handlerã€‚è¿™ä¸ªå¯¹è±¡åŒ…å«ä¸¤ä¸ªé¢å¤–çš„intå­—æ®µå’Œä¸€ä¸ª * é¢å¤–çš„å¯¹è±¡å­—æ®µï¼Œå…è®¸æ‚¨åœ¨å¾ˆå¤šæƒ…å†µä¸‹ä¸è¿›è¡Œåˆ†é…ã€‚ * &lt;p class="note"&gt;While the constructor of Message is public, the best way to get * one of these is to call &#123;@link #obtain Message.obtain()&#125; or one of the * &#123;@link Handler#obtainMessage Handler.obtainMessage()&#125; methods, which will pull * them from a pool of recycled objects.&lt;/p&gt; * æ³¨æ„ï¼šä¸è¦ç›´æŽ¥ä½¿ç”¨New Message()åˆ›å»ºMessageå¯¹è±¡ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯é€šè¿‡Handler.obtainMessage() * æ–¹æ³•ï¼Œå®ƒä¼šä»Žå¯¹è±¡å›žæ”¶æ± ä¸­æ‹‰å–è¯¥æ¶ˆæ¯å¯¹è±¡ */public final class Message implements Parcelable &#123; /** @hide */ public static final Object sPoolSync = new Object(); /** * Return a new Message instance from the global pool. Allows us to * avoid allocating new objects in many cases. * ä»Žå…¨å±€æ± è¿”å›žä¸€ä¸ªæ–°çš„æ¶ˆæ¯å®žä¾‹ã€‚è®©æˆ‘ä»¬åœ¨å¾ˆå¤šæƒ…å†µä¸‹é¿å…åˆ†é…æ–°å¯¹è±¡ã€‚ */ public static Message obtain() &#123; synchronized (sPoolSync) &#123; if (sPool != null) &#123; Message m = sPool; sPool = m.next; m.next = null; m.flags = 0; // clear in-use flag sPoolSize--; return m; &#125; &#125; return new Message(); &#125; ** * Same as &#123;@link #obtain()&#125;, but sets the value for the target member on the Message returned. * ä¸Žobtain()ç›¸åŒï¼Œä½†åœ¨è¿”å›žçš„æ¶ˆæ¯ä¸Šè®¾ç½®ç›®æ ‡æˆå‘˜çš„å€¼ã€‚ * @return A Message object from the global pool. * è¿”å›žæ¥è‡ªå…¨å±€æ± çš„æ¶ˆæ¯å¯¹è±¡ */ public static Message obtain(Handler h) &#123; Message m = obtain(); m.target = h;//æŽ¥æ”¶ä¼ é€’è¿‡æ¥çš„Handler return m; &#125;&#125; 2.2 Looper-æ¶ˆæ¯è½®è¯¢å™¨ Looperç”¨äºŽä¸ºçº¿ç¨‹è½®è¯¢messagesã€‚çº¿ç¨‹é»˜è®¤æ˜¯æ²¡æœ‰ä¸Žä¹‹ç›¸å…³è”çš„Lopperï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡Looper.prepare()æ–¹æ³•åŽ»åˆ›å»ºå®ƒã€‚ç¤ºä¾‹ï¼š 123456789101112131415class LooperThread extends Thread &#123; public Handler mHandler; public void run() &#123; Looper.prepare(); mHandler = new Handler() &#123; public void handleMessage(Message msg) &#123; // process incoming messages here &#125; &#125;; Looper.loop(); &#125;&#125; ThreadLocalæä¾›çº¿ç¨‹çš„å±€éƒ¨å˜é‡ï¼Œé€šè¿‡å®ƒè®¿é—®çº¿ç¨‹ç‹¬ç«‹åˆå§‹åŒ–å˜é‡çš„å‰¯æœ¬ã€‚å³Looperé€šè¿‡ThreadLocalç±»æ¥ä¸Žå½“å‰çº¿ç¨‹è¿›è¡Œäº¤äº’ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115//ç§ç”¨æž„é€ æ–¹æ³•//quitAllowedæ˜¯å¦å…è®¸é€€å‡ºprivate Looper(boolean quitAllowed) &#123; mQueue = new MessageQueue(quitAllowed);//å®žä¾‹åŒ–æ¶ˆæ¯é˜Ÿåˆ— mThread = Thread.currentThread();//èŽ·å–å½“å‰çº¿ç¨‹&#125;/** Initialize the current thread as a looper.* This gives you a chance to create handlers that then reference* this looper, before actually starting the loop. Be sure to call* &#123;@link #loop()&#125; after calling this method, and end it by calling* &#123;@link #quit()&#125;.* åˆå§‹åŒ–å½“å‰çº¿ç¨‹çš„Looper* åœ¨å®ƒå‡†å¤‡è½®è¯¢ä¹‹å‰ï¼Œç»™ä½ ä¸€ä¸ªæ—¶æœºç‚¹åŽ»åˆ›å»ºä¸€ä¸ªHandlerå¹¶å¼•ç”¨å®ƒ* è°ƒç”¨è¯¥æ–¹æ³•åŽä¸€å®šè®°å¾—Looper.loop()æ–¹æ³•ï¼Œå¹¶ç»“æŸçš„æ—¶å€™è°ƒç”¨Looper.quit()æ–¹æ³•é€€å‡º*/public static void prepare() &#123; prepare(true);&#125;// sThreadLocal.get() will return null unless you have called prepare().//å¿…é¡»å…ˆè°ƒç”¨Looper.prepare()æ–¹æ³•ï¼Œå¦åˆ™è¿”å›žç©ºstatic final ThreadLocal&lt;Looper&gt; sThreadLocal = new ThreadLocal&lt;Looper&gt;();private static void prepare(boolean quitAllowed) &#123; //æ¯ä¸€ä¸ªçº¿ç¨‹åªèƒ½æœ‰å”¯ä¸€çš„ä¸€ä¸ªlooper if (sThreadLocal.get() != null) &#123;//ä¸ä¸ºç©ºæŠ›å‡ºå¼‚å¸¸ throw new RuntimeException("Only one Looper may be created per thread"); &#125; sThreadLocal.set(new Looper(quitAllowed));//è®¾ç½®Looper&#125;/** * Return the Looper object associated with the current thread. Returns * null if the calling thread is not associated with a Looper. * è¿”å›žä¸Žå½“å‰çº¿ç¨‹å…³è”çš„looper */public static @Nullable Looper myLooper() &#123; return sThreadLocal.get();&#125;/** * Run the message queue in this thread. Be sure to call * &#123;@link #quit()&#125; to end the loop. * åœ¨å½“å‰çº¿ç¨‹è¿è¡Œæ¶ˆæ¯é˜Ÿå‹ */public static void loop() &#123; final Looper me = myLooper();//èŽ·å–looper if (me == null) &#123;//ä¸ºç©ºåˆ™æŠ›å‡ºå¼‚å¸¸ throw new RuntimeException("No Looper; Looper.prepare() wasn't called on this thread."); &#125; final MessageQueue queue = me.mQueue;//èŽ·å–looperçš„æ¶ˆæ¯é˜Ÿåˆ— // Make sure the identity of this thread is that of the local process, // and keep track of what that identity token actually is. //ç¡®ä¿è¿™ä¸ªçº¿ç¨‹çš„æ ‡è¯†æ˜¯æœ¬åœ°è¿›ç¨‹çš„æ ‡è¯†ï¼Œ //å¹¶è·Ÿè¸ªèº«ä»½ä»¤ç‰Œçš„å®žé™…æƒ…å†µã€‚ Binder.clearCallingIdentity(); final long ident = Binder.clearCallingIdentity(); // Allow overriding a threshold with a system prop. e.g. // adb shell 'setprop log.looper.1000.main.slow 1 &amp;&amp; stop &amp;&amp; start' final int thresholdOverride = SystemProperties.getInt("log.looper." + Process.myUid() + "." + Thread.currentThread().getName() + ".slow", 0); boolean slowDeliveryDetected = false; for (;;) &#123;//æ— é™è½®è¯¢ Message msg = queue.next(); // might block if (msg == null) &#123; //æ²¡æœ‰messageåˆ™ä¸å¾€ä¸‹æ‰§è¡Œ // No message indicates that the message queue is quitting. return; &#125; ***çœç•¥ä»£ç *** final long dispatchStart = needStartTime ? SystemClock.uptimeMillis() : 0; final long dispatchEnd; try &#123; msg.target.dispatchMessage(msg);//è°ƒç”¨Handlerçš„dispatchMessage(msg)æ–¹æ³• dispatchEnd = needEndTime ? SystemClock.uptimeMillis() : 0; &#125; finally &#123; if (traceTag != 0) &#123; Trace.traceEnd(traceTag); &#125; &#125; //å›žæ”¶å¯èƒ½æ­£åœ¨ä½¿ç”¨çš„æ¶ˆæ¯ã€‚ //åœ¨å¤„ç†æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼ŒMessageQueueå’ŒLooperåœ¨å†…éƒ¨ä½¿ç”¨ã€‚ msg.recycleUnchecked(); &#125;&#125;//sThreadLocal.get()public T get() &#123; Thread t = Thread.currentThread();//é€šè¿‡Threadçš„é™æ€æ–¹æ³•èŽ·å–å½“å‰çš„çº¿ç¨‹ //ThreadLocalMapæ˜¯ä¸€ä¸ªå®šåˆ¶çš„HashMap(),ä»…é€‚ç”¨äºŽç»´æŠ¤çº¿ç¨‹å±€éƒ¨å€¼,æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æŒæœ‰ä¸€ä¸ªThreadLocalMapå¯¹è±¡ ThreadLocalMap map = getMap(t);//ä¼ å…¥å½“å‰çº¿ç¨‹èŽ·å–å½“å‰çº¿ç¨‹çš„ThreadLocalMapå¯¹è±¡-------------------------------------------------------------------------------â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ThreadLocalMap getMap(Thread t) &#123; return t.threadLocals; &#125;-------------------------------------------------------------------------------â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” if (map != null) &#123; ThreadLocalMap.Entry e = map.getEntry(this); if (e != null) &#123; @SuppressWarnings("unchecked") T result = (T)e.value; return result; &#125; &#125; return setInitialValue();&#125; 2.3 Handler2.3.1 åˆ›å»ºHandlerå¯¹è±¡123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131/** * Callback interface you can use when instantiating a Handler to avoid * having to implement your own subclass of Handler. * å¦‚æžœä½ ä¸æƒ³é€šè¿‡ç»§æ‰¿Handleræ¥å®žçŽ°ï¼Œä½ å¿…é¡»å®žçŽ°CallbackæŽ¥å£ */public interface Callback &#123; /** * @param msg A &#123;@link android.os.Message Message&#125; object * @return True if no further handling is desired */ public boolean handleMessage(Message msg);&#125;//é»˜è®¤æž„æˆå™¨//å¦‚æžœè¯¥Handleræ‰€ç»‘å®šçš„çº¿ç¨‹æ²¡æœ‰looperï¼Œå®ƒå°†æ”¶ä¸åˆ°ä»»ä½•messagesï¼Œå¹¶ä¸”ä¼šæŠ›å‡ºå¼‚å¸¸public Handler() &#123; this(null, false);&#125;//é»˜è®¤æž„é€ å™¨çš„Callbackä¸ºç©ºï¼Œæ‰€ä»¥å½“æˆ‘ä»¬é€šè¿‡new Handler()æ¥åˆ›å»ºå®žä¾‹æ—¶ï¼Œ//æˆ‘ä»¬å¿…é¡»é‡å†™Handlerçš„handleMessage(Message msg)æ–¹æ³•ï¼Œå³ï¼šcompanion object &#123;//æ³¨æ„å†™æˆé™æ€å†…éƒ¨ç±»çš„å½¢å¼ï¼Œé¿å…å†…å­˜æ³„æ¼ private class MyHandler :Handler()&#123; override fun handleMessage(msg: Message?) &#123; super.handleMessage(msg) &#125; &#125;&#125;-------------------------------------------------------------------------------â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”//ä¸»åŠ¨å®žçŽ°CallbackæŽ¥å£ï¼Œæ¥åˆ›å»ºHandlerå®žä¾‹public Handler(Callback callback) &#123; this(callback, false);&#125; companion object &#123; private val mHandler1:Handler = Handler(object :Handler.Callback&#123; override fun handleMessage(msg: Message?): Boolean &#123; return true &#125; &#125;) æˆ– private val mHandler2:Handler = Handler(Handler.Callback &#123; true &#125;)&#125;-------------------------------------------------------------------------------â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” /** * Use the provided &#123;@link Looper&#125; instead of the default one. * * @param looper The looper, must not be null. * //ä¸ä½¿ç”¨é»˜è®¤çš„looper */public Handler(Looper looper) &#123; this(looper, null, false);&#125;//ä¹‹å‰æˆ‘çœ‹åˆ°æŸäº›å‰è¾ˆæ˜¯é€šè¿‡ä¸‹é¢è¿™ç§æ–¹å¼æ¥åˆ›å»ºHandlerå®žä¾‹ï¼Œé€šè¿‡ä¼ é€’ä¸»çº¿ç¨‹çš„looper//ä½†è¿™æ˜¯æ²¡å¿…è¦çš„ï¼ŒHandleré»˜è®¤å°±æ˜¯ä½¿ç”¨ä¸»çº¿ç¨‹çš„looper(ä¸‹é¢ä¼šåˆ†æž)//å¹¶ä¸”æºç æ³¨é‡Šä¹Ÿè¯´äº†ï¼Œä½¿ç”¨ä½ è‡ªå·±çš„æä¾›çš„looperè€Œä¸æ˜¯é»˜è®¤çš„private val mHandler:Handler = object :Handler(Looper.getMainLooper())&#123; override fun handleMessage(msg: Message?) &#123; super.handleMessage(msg) &#125;&#125;-------------------------------------------------------------------------------â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”//è¯¥æž„é€ åŒä¸Šï¼Œå¦‚æžœä½ ä¸æƒ³é‡å†™handleMessage(msg: Message?)æ–¹æ³•ï¼Œé‚£ä¹ˆä½ å°±é‡å†™CallbackæŽ¥å£public Handler(Looper looper, Callback callback) &#123; this(looper, callback, false);&#125;//æ˜¯å¦éœ€è¦å¼‚æ­¥å¤„ç†messagesï¼Œé»˜è®¤æ˜¯å¼‚æ­¥çš„public Handler(boolean async) &#123; this(null, async);&#125;//è‡ªå·±æä¾›looperï¼Œå®žçŽ°CallbackæŽ¥å£ï¼Œå†³å®šæ˜¯å¦å¼‚æ­¥public Handler(Looper looper, Callback callback, boolean async) &#123; mLooper = looper; mQueue = looper.mQueue; mCallback = callback; mAsynchronous = async;&#125;-------------------------------------------------------------------------------â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”/* * Set this flag to true to detect anonymous, local or member classes * that extend this Handler class and that are not static. These kind * of classes can potentially create leaks. * å°†æ­¤æ ‡å¿—è®¾ç½®ä¸ºtrueä»¥æ£€æµ‹åŒ¿åç±»ã€æœ¬åœ°ç±»æˆ–æˆå‘˜ç±» * ç»§æ‰¿äº†Handlerä¸æ˜¯é™æ€çš„ï¼Œå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼ */private static final boolean FIND_POTENTIAL_LEAKS = false;//é€šè¿‡Handler()ã€Handler(Callback callback)ã€Handler(boolean async)//éƒ½ä¼šè°ƒç”¨è¯¥æž„é€ å™¨public Handler(Callback callback, boolean async) &#123; if (FIND_POTENTIAL_LEAKS) &#123;//æ£€æŸ¥å¯èƒ½å­˜åœ¨çš„å†…å­˜æ³„æ¼ï¼Œé»˜è®¤æ˜¯false final Class&lt;? extends Handler&gt; klass = getClass(); if ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp; (klass.getModifiers() &amp; Modifier.STATIC) == 0) &#123; Log.w(TAG, "The following Handler class should be static or leaks might occur: " + klass.getCanonicalName()); &#125; &#125; mLooper = Looper.myLooper();//èŽ·å–looper if (mLooper == null) &#123;//å¦‚æžœä¸ºç©ºæŠ›å‡ºå¼‚å¸¸ throw new RuntimeException( "Can't create handler inside thread " + Thread.currentThread() + " that has not called Looper.prepare()"); &#125; mQueue = mLooper.mQueue;//èŽ·å–Looperä¸­çš„æ¶ˆæ¯é˜Ÿåˆ— mCallback = callback; mAsynchronous = async;&#125;private static void handleCallback(Message message) &#123; message.callback.run();//æ‰§è¡ŒMessageæŒæœ‰çš„Runnable&#125;/** * Handle system messages here. * å¤„ç†ç³»ç»ŸMessages */public void dispatchMessage(Message msg) &#123; if (msg.callback != null) &#123;//å¦‚æžœMessageçš„Runnableä¸ä¸ºç©º handleCallback(msg);è°ƒç”¨Handlerçš„handleMessage(msg)æ–¹æ³•å¤„ç†Message &#125; else &#123; if (mCallback != null) &#123;//å¦‚æžœHandlerçš„Callbackä¸ä¸ºç©º if (mCallback.handleMessage(msg)) &#123;//è°ƒç”¨Callbackçš„handleMessage(msg)æ–¹æ³• return; &#125; &#125; //å¦åˆ™è°ƒç”¨Handlerçš„handleMessage(msg)æ–¹æ³• handleMessage(msg); &#125;&#125; 2.3.2 åˆ›å»ºMessageå¯¹è±¡1234567891011121314151617181920public final Message obtainMessage()&#123; return Message.obtain(this);&#125;public final Message obtainMessage(int what)&#123; return Message.obtain(this, what);&#125;public final Message obtainMessage(int what, Object obj)&#123; return Message.obtain(this, what, obj);&#125;public final Message obtainMessage(int what, int arg1, int arg2)&#123; return Message.obtain(this, what, arg1, arg2);&#125;public final Message obtainMessage(int what, int arg1, int arg2, Object obj)&#123; return Message.obtain(this, what, arg1, arg2, obj);&#125; 2.3.3 å‘é€Message123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123/** * Causes the Runnable r to be added to the message queue. * The runnable will be run on the thread to which this handler is * attached. * å°†Runnableæ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ã€‚ * runnableå°†åœ¨æ­¤Handleræ‰€åœ¨çš„çº¿ç¨‹ä¸Šè¿è¡Œã€‚ * * @return Returns true if the Runnable was successfully placed in to the * message queue. Returns false on failure, usually because the * looper processing the message queue is exiting. * RunnableæˆåŠŸæ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­è¿”å›žtureï¼Œå¤±è´¥è¿”å›žfalse */public final boolean post(Runnable r)&#123; return sendMessageDelayed(getPostMessage(r), 0);&#125;private static Message getPostMessage(Runnable r) &#123; Message m = Message.obtain();åˆ›å»ºMessageå¯¹è±¡ m.callback = r;æŠŠRunnaleä¼ é€’ç»™Message return m;&#125;public final boolean sendMessageDelayed(Message msg, long delayMillis)&#123; if (delayMillis &lt; 0) &#123;//å»¶è¿Ÿæ—¶é—´å°äºŽ0ï¼Œåˆ™ç½®ä¸º0 delayMillis = 0; &#125; return sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);&#125;//å»¶è¿Ÿå‘é€public final boolean postDelayed(Runnable r, long delayMillis)&#123; return sendMessageDelayed(getPostMessage(r), delayMillis);&#125;public final boolean postDelayed(Runnable r, Object token, long delayMillis)&#123; return sendMessageDelayed(getPostMessage(r, token), delayMillis);&#125;public final boolean sendMessageDelayed(Message msg, long delayMillis)&#123; if (delayMillis &lt; 0) &#123; delayMillis = 0; &#125; return sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);&#125; public boolean sendMessageAtTime(Message msg, long uptimeMillis) &#123; MessageQueue queue = mQueue; if (queue == null) &#123; RuntimeException e = new RuntimeException( this + " sendMessageAtTime() called with no mQueue"); Log.w("Looper", e.getMessage(), e); return false; &#125; return enqueueMessage(queue, msg, uptimeMillis);&#125;private boolean enqueueMessage(MessageQueue queue, Message msg, long uptimeMillis) &#123; msg.target = this;//æŠŠå½“å‰çš„Handlerä¼ é€’ç»™Messageçš„Handler if (mAsynchronous) &#123;//æ˜¯å¦å¼‚æ­¥ msg.setAsynchronous(true); &#125; //æœ€ç»ˆè°ƒç”¨MessageQueueçš„enqueueMessageæ–¹æ³• return queue.enqueueMessage(msg, uptimeMillis);&#125;MessageQueueï¼šboolean enqueueMessage(Message msg, long when) &#123; if (msg.target == null) &#123;//Messageçš„Handlerä¸ºç©ºï¼ŒæŠ›å‡ºå¼‚å¸¸ throw new IllegalArgumentException("Message must have a target."); &#125; if (msg.isInUse()) &#123;//Messageæ­£åœ¨ä½¿ç”¨ï¼ŒæŠ›å‡ºå¼‚å¸¸ throw new IllegalStateException(msg + " This message is already in use."); &#125; synchronized (this) &#123; if (mQuitting) &#123;//åˆ¤æ–­æ˜¯å¦é€€å‡º IllegalStateException e = new IllegalStateException( msg.target + " sending message to a Handler on a dead thread"); Log.w(TAG, e.getMessage(), e); msg.recycle();//å›žæ”¶Message return false; &#125; msg.markInUse();è®¾ç½®Messageæ˜¯å¦æ­£åœ¨ä½¿ç”¨çš„Flag msg.when = when; Message p = mMessages; boolean needWake;//æ˜¯å¦éœ€è¦å”¤é†’ if (p == null || when == 0 || when &lt; p.when) &#123; // New head, wake up the event queue if blocked. msg.next = p; mMessages = msg; needWake = mBlocked; &#125; else &#123; // Inserted within the middle of the queue. Usually we don't have to wake // up the event queue unless there is a barrier at the head of the queue // and the message is the earliest asynchronous message in the queue. //æ’å…¥åˆ°é˜Ÿåˆ—çš„ä¸­é—´ã€‚é€šå¸¸æˆ‘ä»¬ä¸éœ€è¦å”¤é†’ //å¯åŠ¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Œé™¤éžé˜Ÿåˆ—å¤´éƒ¨æœ‰é˜»ç¢ //æ¶ˆæ¯æ˜¯é˜Ÿåˆ—ä¸­æœ€æ—©çš„å¼‚æ­¥æ¶ˆæ¯ã€‚ needWake = mBlocked &amp;&amp; p.target == null &amp;&amp; msg.isAsynchronous(); Message prev; for (;;) &#123;//å¼€å¯æ— é™è½®è¯¢ prev = p; p = p.next; if (p == null || when &lt; p.when) &#123; break; &#125; if (needWake &amp;&amp; p.isAsynchronous()) &#123; needWake = false; &#125; &#125; msg.next = p; // invariant: p == prev.next prev.next = msg; &#125; // We can assume mPtr != 0 because mQuitting is false. if (needWake) &#123; nativeWake(mPtr); &#125; &#125; return true;&#125; ###]]></content>
      <categories>
        <category>Android</category>
        <category>æºç è§£æž</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Handler</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ARouterè·¯ç”±æ¡†æž¶]]></title>
    <url>%2Fposts%2Fa9949862.html</url>
    <content type="text"><![CDATA[1ä¸€ä¸ªç”¨äºŽå¸®åŠ© Android App è¿›è¡Œç»„ä»¶åŒ–æ”¹é€ çš„æ¡†æž¶ â€”â€” æ”¯æŒæ¨¡å—é—´çš„è·¯ç”±ã€é€šä¿¡ã€è§£è€¦ Demoå±•ç¤ºDemo apkä¸‹è½½ã€Demo Gifä¸€ã€ä»€ä¹ˆæ˜¯è·¯ç”±è¯´ç®€å•ç‚¹å°±æ˜¯æ˜ å°„é¡µé¢è·³è½¬å…³ç³»çš„ï¼Œå½“ç„¶å®ƒä¹ŸåŒ…å«è·³è½¬ç›¸å…³çš„ä¸€åˆ‡åŠŸèƒ½ã€‚ äºŒã€ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±Androidç³»ç»Ÿå·²ç»ç»™æˆ‘ä»¬æä¾›äº†apiæ¥åšé¡µé¢è·³è½¬ï¼Œæ¯”å¦‚startActivityï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦è·¯ç”±æ¡†æž¶å‘¢ï¼Ÿæˆ‘ä»¬æ¥ç®€å•åˆ†æžä¸‹è·¯ç”±æ¡†æž¶å­˜åœ¨çš„æ„ä¹‰ï¼š åœ¨ä¸€äº›å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ä¸‹ï¼ˆæ¯”å¦‚ç”µå•†ï¼‰ï¼Œçµæ´»æ€§æ¯”è¾ƒå¼ºï¼Œå¾ˆå¤šåŠŸèƒ½éƒ½æ˜¯è¿è¥äººå‘˜åŠ¨æ€é…ç½®çš„ï¼Œæ¯”å¦‚ä¸‹å‘ä¸€ä¸ªæ´»åŠ¨é¡µé¢ï¼Œæˆ‘ä»¬äº‹å…ˆå¹¶ä¸çŸ¥é“å…·ä½“çš„ç›®æ ‡é¡µé¢ï¼Œä½†å¦‚æžœäº‹å…ˆåšäº†çº¦å®šï¼Œæå‰åšå¥½é¡µé¢æ˜ å°„ï¼Œä¾¿å¯ä»¥è‡ªç”±é…ç½®ã€‚ éšç€ä¸šåŠ¡é‡çš„å¢žé•¿ï¼Œå®¢æˆ·ç«¯å¿…ç„¶éšä¹‹è†¨èƒ€ï¼Œå¼€å‘äººå‘˜çš„å·¥ä½œé‡è¶Šæ¥è¶Šå¤§ï¼Œæ¯”å¦‚64Ké—®é¢˜ï¼Œæ¯”å¦‚åä½œå¼€å‘é—®é¢˜ã€‚Appä¸€èˆ¬éƒ½ä¼šèµ°å‘ç»„ä»¶åŒ–ã€æ’ä»¶åŒ–çš„é“è·¯ï¼Œè€Œç»„ä»¶åŒ–ã€æ’ä»¶åŒ–çš„å‰æå°±æ˜¯è§£è€¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆè¦åšçš„å°±æ˜¯è§£è€¦é¡µé¢ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ ç®€åŒ–ä»£ç ã€‚æ•°è¡Œè·³è½¬ä»£ç ç²¾ç®€æˆä¸€è¡Œä»£ç ã€‚ å…¶ä»–â€¦ ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦è·¯ç”±ARouteræ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„Androidå¹³å°ä¸­å¯¹é¡µé¢ã€æœåŠ¡æä¾›è·¯ç”±åŠŸèƒ½çš„ä¸­é—´ä»¶ï¼Œæå€¡çš„æ˜¯ç®€å•ä¸”å¤Ÿç”¨ã€‚GitHubï¼šhttps://github.com/alibaba/ARouter å››ã€åŠŸèƒ½ä»‹ç» æ”¯æŒç›´æŽ¥è§£æžæ ‡å‡†URLè¿›è¡Œè·³è½¬ï¼Œå¹¶è‡ªåŠ¨æ³¨å…¥å‚æ•°åˆ°ç›®æ ‡é¡µé¢ä¸­ æ”¯æŒå¤šæ¨¡å—å·¥ç¨‹ä½¿ç”¨ æ”¯æŒæ·»åŠ å¤šä¸ªæ‹¦æˆªå™¨ï¼Œè‡ªå®šä¹‰æ‹¦æˆªé¡ºåº æ”¯æŒä¾èµ–æ³¨å…¥ï¼Œå¯å•ç‹¬ä½œä¸ºä¾èµ–æ³¨å…¥æ¡†æž¶ä½¿ç”¨ æ”¯æŒInstantRun æ”¯æŒMultiDex(Googleæ–¹æ¡ˆ) æ˜ å°„å…³ç³»æŒ‰ç»„åˆ†ç±»ã€å¤šçº§ç®¡ç†ï¼ŒæŒ‰éœ€åˆå§‹åŒ– æ”¯æŒç”¨æˆ·æŒ‡å®šå…¨å±€é™çº§ä¸Žå±€éƒ¨é™çº§ç­–ç•¥ é¡µé¢ã€æ‹¦æˆªå™¨ã€æœåŠ¡ç­‰ç»„ä»¶å‡è‡ªåŠ¨æ³¨å†Œåˆ°æ¡†æž¶ æ”¯æŒå¤šç§æ–¹å¼é…ç½®è½¬åœºåŠ¨ç”» æ”¯æŒèŽ·å–Fragment å®Œå…¨æ”¯æŒKotlinä»¥åŠæ··ç¼–(é…ç½®è§æ–‡æœ« å…¶ä»–) æ”¯æŒç¬¬ä¸‰æ–¹ App åŠ å›º(ä½¿ç”¨ arouter-register å®žçŽ°è‡ªåŠ¨æ³¨å†Œ) æ”¯æŒç”Ÿæˆè·¯ç”±æ–‡æ¡£ äº”ã€å…¸åž‹åº”ç”¨ ä»Žå¤–éƒ¨URLæ˜ å°„åˆ°å†…éƒ¨é¡µé¢ï¼Œä»¥åŠå‚æ•°ä¼ é€’ä¸Žè§£æž è·¨æ¨¡å—é¡µé¢è·³è½¬ï¼Œæ¨¡å—é—´è§£è€¦ æ‹¦æˆªè·³è½¬è¿‡ç¨‹ï¼Œå¤„ç†ç™»é™†ã€åŸ‹ç‚¹ç­‰é€»è¾‘ è·¨æ¨¡å—APIè°ƒç”¨ï¼Œé€šè¿‡æŽ§åˆ¶åè½¬æ¥åšç»„ä»¶è§£è€¦ å…­ã€åŸºç¡€åŠŸèƒ½ æ·»åŠ ä¾èµ–å’Œé…ç½® 1234567891011121314151617181920android &#123; defaultConfig &#123; ... javaCompileOptions &#123; annotationProcessorOptions &#123; arguments = [AROUTER_MODULE_NAME: project.getName()] &#125; &#125; &#125;&#125;dependencies &#123; // æ›¿æ¢æˆæœ€æ–°ç‰ˆæœ¬, éœ€è¦æ³¨æ„çš„æ˜¯api // è¦ä¸ŽcompileråŒ¹é…ä½¿ç”¨ï¼Œå‡ä½¿ç”¨æœ€æ–°ç‰ˆå¯ä»¥ä¿è¯å…¼å®¹ compile &apos;com.alibaba:arouter-api:x.x.x&apos; annotationProcessor &apos;com.alibaba:arouter-compiler:x.x.x&apos; ...&#125;// æ—§ç‰ˆæœ¬gradleæ’ä»¶(&lt; 2.2)ï¼Œå¯ä»¥ä½¿ç”¨aptæ’ä»¶ï¼Œé…ç½®æ–¹æ³•è§æ–‡æœ«&apos;å…¶ä»–#4&apos;// Kotliné…ç½®å‚è€ƒæ–‡æœ«&apos;å…¶ä»–#5&apos; æ·»åŠ æ³¨è§£ 123456// åœ¨æ”¯æŒè·¯ç”±çš„é¡µé¢ä¸Šæ·»åŠ æ³¨è§£(å¿…é€‰)// è¿™é‡Œçš„è·¯å¾„éœ€è¦æ³¨æ„çš„æ˜¯è‡³å°‘éœ€è¦æœ‰ä¸¤çº§ï¼Œ/xx/xx@Route(path = "/test/activity")public class YourActivity extend Activity &#123; ...&#125; åˆå§‹åŒ–SDK 12345if (isDebug()) &#123; // è¿™ä¸¤è¡Œå¿…é¡»å†™åœ¨initä¹‹å‰ï¼Œå¦åˆ™è¿™äº›é…ç½®åœ¨initè¿‡ç¨‹ä¸­å°†æ— æ•ˆ ARouter.openLog(); // æ‰“å°æ—¥å¿— ARouter.openDebug(); // å¼€å¯è°ƒè¯•æ¨¡å¼(å¦‚æžœåœ¨InstantRunæ¨¡å¼ä¸‹è¿è¡Œï¼Œå¿…é¡»å¼€å¯è°ƒè¯•æ¨¡å¼ï¼çº¿ä¸Šç‰ˆæœ¬éœ€è¦å…³é—­,å¦åˆ™æœ‰å®‰å…¨é£Žé™©)&#125;ARouter.init(mApplication); // å°½å¯èƒ½æ—©ï¼ŒæŽ¨èåœ¨Applicationä¸­åˆå§‹åŒ– å‘èµ·è·¯ç”±æ“ä½œ 123456789// 1. åº”ç”¨å†…ç®€å•çš„è·³è½¬(é€šè¿‡URLè·³è½¬åœ¨'è¿›é˜¶ç”¨æ³•'ä¸­)ARouter.getInstance().build("/test/activity").navigation();// 2. è·³è½¬å¹¶æºå¸¦å‚æ•°ARouter.getInstance().build("/test/1") .withLong("key1", 666L) .withString("key3", "888") .withObject("key4", new Test("Jack", "Rose")) .navigation(); æ·»åŠ æ··æ·†è§„åˆ™(å¦‚æžœä½¿ç”¨äº†Proguard) 123456789-keep public class com.alibaba.android.arouter.routes.**&#123;*;&#125;-keep public class com.alibaba.android.arouter.facade.**&#123;*;&#125;-keep class * implements com.alibaba.android.arouter.facade.template.ISyringe&#123;*;&#125;# å¦‚æžœä½¿ç”¨äº† byType çš„æ–¹å¼èŽ·å– Serviceï¼Œéœ€æ·»åŠ ä¸‹é¢è§„åˆ™ï¼Œä¿æŠ¤æŽ¥å£-keep interface * implements com.alibaba.android.arouter.facade.template.IProvider# å¦‚æžœä½¿ç”¨äº† å•ç±»æ³¨å…¥ï¼Œå³ä¸å®šä¹‰æŽ¥å£å®žçŽ° IProviderï¼Œéœ€æ·»åŠ ä¸‹é¢è§„åˆ™ï¼Œä¿æŠ¤å®žçŽ°# -keep class * implements com.alibaba.android.arouter.facade.template.IProvider ä½¿ç”¨ Gradle æ’ä»¶å®žçŽ°è·¯ç”±è¡¨çš„è‡ªåŠ¨åŠ è½½ 1234567891011apply plugin: &apos;com.alibaba.arouter&apos;buildscript &#123; repositories &#123; jcenter() &#125; dependencies &#123; classpath &quot;com.alibaba:arouter-register:?&quot; &#125;&#125; å¯é€‰ä½¿ç”¨ï¼Œé€šè¿‡ ARouter æä¾›çš„æ³¨å†Œæ’ä»¶è¿›è¡Œè·¯ç”±è¡¨çš„è‡ªåŠ¨åŠ è½½(power by AutoRegister)ï¼Œ é»˜è®¤é€šè¿‡æ‰«æ dex çš„æ–¹å¼è¿›è¡ŒåŠ è½½é€šè¿‡ gradle æ’ä»¶è¿›è¡Œè‡ªåŠ¨æ³¨å†Œå¯ä»¥ç¼©çŸ­åˆå§‹åŒ–æ—¶é—´è§£å†³åº”ç”¨åŠ å›ºå¯¼è‡´æ— æ³•ç›´æŽ¥è®¿é—®dex æ–‡ä»¶ï¼Œåˆå§‹åŒ–å¤±è´¥çš„é—®é¢˜ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ’ä»¶å¿…é¡»æ­é… api 1.3.0 ä»¥ä¸Šç‰ˆæœ¬ä½¿ç”¨ï¼ ä¸ƒã€è¿›é˜¶ç”¨æ³• é€šè¿‡URLè·³è½¬1234567891011// æ–°å»ºä¸€ä¸ªActivityç”¨äºŽç›‘å¬Schameäº‹ä»¶,ä¹‹åŽç›´æŽ¥æŠŠurlä¼ é€’ç»™ARouterå³å¯public class SchameFilterActivity extends Activity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); Uri uri = getIntent().getData(); ARouter.getInstance().build(uri).navigation(); finish(); &#125;&#125; AndroidManifest.xml 12345678910111213&lt;activity android:name=".activity.SchameFilterActivity"&gt; &lt;!-- Schame --&gt; &lt;intent-filter&gt; &lt;data android:host="m.aliyun.com" android:scheme="arouter"/&gt; &lt;action android:name="android.intent.action.VIEW"/&gt; &lt;category android:name="android.intent.category.DEFAULT"/&gt; &lt;category android:name="android.intent.category.BROWSABLE"/&gt; &lt;/intent-filter&gt;&lt;/activity&gt; è§£æžURLä¸­çš„å‚æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142// ä¸ºæ¯ä¸€ä¸ªå‚æ•°å£°æ˜Žä¸€ä¸ªå­—æ®µï¼Œå¹¶ä½¿ç”¨ @Autowired æ ‡æ³¨// URLä¸­ä¸èƒ½ä¼ é€’Parcelableç±»åž‹æ•°æ®ï¼Œé€šè¿‡ARouter apiå¯ä»¥ä¼ é€’Parcelableå¯¹è±¡@Route(path = "/test/activity")public class Test1Activity extends Activity &#123; @Autowired public String name; @Autowired int age; @Autowired(name = "girl") // é€šè¿‡nameæ¥æ˜ å°„URLä¸­çš„ä¸åŒå‚æ•° boolean boy; @Autowired TestObj obj; // æ”¯æŒè§£æžè‡ªå®šä¹‰å¯¹è±¡ï¼ŒURLä¸­ä½¿ç”¨jsonä¼ é€’ @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); ARouter.getInstance().inject(this); // ARouterä¼šè‡ªåŠ¨å¯¹å­—æ®µè¿›è¡Œèµ‹å€¼ï¼Œæ— éœ€ä¸»åŠ¨èŽ·å– Log.d("param", name + age + boy); &#125;&#125;// å¦‚æžœéœ€è¦ä¼ é€’è‡ªå®šä¹‰å¯¹è±¡ï¼Œæ–°å»ºä¸€ä¸ªç±»ï¼ˆå¹¶éžè‡ªå®šä¹‰å¯¹è±¡ç±»ï¼‰ï¼Œç„¶åŽå®žçŽ° SerializationService,å¹¶ä½¿ç”¨@Routeæ³¨è§£æ ‡æ³¨(æ–¹ä¾¿ç”¨æˆ·è‡ªè¡Œé€‰æ‹©åºåˆ—åŒ–æ–¹å¼)ï¼Œä¾‹å¦‚ï¼š@Route(path = "/yourservicegroupname/json")public class JsonServiceImpl implements SerializationService &#123; @Override public void init(Context context) &#123; &#125; @Override public &lt;T&gt; T json2Object(String text, Class&lt;T&gt; clazz) &#123; return JSON.parseObject(text, clazz); &#125; @Override public String object2Json(Object instance) &#123; return JSON.toJSONString(instance); &#125;&#125; å£°æ˜Žæ‹¦æˆªå™¨(æ‹¦æˆªè·³è½¬è¿‡ç¨‹ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹) 123456789101112131415161718// æ¯”è¾ƒç»å…¸çš„åº”ç”¨å°±æ˜¯åœ¨è·³è½¬è¿‡ç¨‹ä¸­å¤„ç†ç™»é™†äº‹ä»¶ï¼Œè¿™æ ·å°±ä¸éœ€è¦åœ¨ç›®æ ‡é¡µé‡å¤åšç™»é™†æ£€æŸ¥// æ‹¦æˆªå™¨ä¼šåœ¨è·³è½¬ä¹‹é—´æ‰§è¡Œï¼Œå¤šä¸ªæ‹¦æˆªå™¨ä¼šæŒ‰ä¼˜å…ˆçº§é¡ºåºä¾æ¬¡æ‰§è¡Œ@Interceptor(priority = 8, name = "æµ‹è¯•ç”¨æ‹¦æˆªå™¨")public class TestInterceptor implements IInterceptor &#123; @Override public void process(Postcard postcard, InterceptorCallback callback) &#123; ... callback.onContinue(postcard); // å¤„ç†å®Œæˆï¼Œäº¤è¿˜æŽ§åˆ¶æƒ // callback.onInterrupt(new RuntimeException("æˆ‘è§‰å¾—æœ‰ç‚¹å¼‚å¸¸")); // è§‰å¾—æœ‰é—®é¢˜ï¼Œä¸­æ–­è·¯ç”±æµç¨‹ // ä»¥ä¸Šä¸¤ç§è‡³å°‘éœ€è¦è°ƒç”¨å…¶ä¸­ä¸€ç§ï¼Œå¦åˆ™ä¸ä¼šç»§ç»­è·¯ç”± &#125; @Override public void init(Context context) &#123; // æ‹¦æˆªå™¨çš„åˆå§‹åŒ–ï¼Œä¼šåœ¨sdkåˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä»…ä¼šè°ƒç”¨ä¸€æ¬¡ &#125;&#125; å¤„ç†è·³è½¬ç»“æžœ 123456789101112// ä½¿ç”¨ä¸¤ä¸ªå‚æ•°çš„navigationæ–¹æ³•ï¼Œå¯ä»¥èŽ·å–å•æ¬¡è·³è½¬çš„ç»“æžœARouter.getInstance().build("/test/1").navigation(this, new NavigationCallback() &#123; @Override public void onFound(Postcard postcard) &#123; ... &#125; @Override public void onLost(Postcard postcard) &#123; ... &#125;&#125;); è‡ªå®šä¹‰å…¨å±€é™çº§ç­–ç•¥ 12345678910111213// å®žçŽ°DegradeServiceæŽ¥å£ï¼Œå¹¶åŠ ä¸Šä¸€ä¸ªPathå†…å®¹ä»»æ„çš„æ³¨è§£å³å¯@Route(path = "/xxx/xxx")public class DegradeServiceImpl implements DegradeService &#123; @Override public void onLost(Context context, Postcard postcard) &#123; // do something. &#125; @Override public void init(Context context) &#123; &#125;&#125; ä¸ºç›®æ ‡é¡µé¢å£°æ˜Žæ›´å¤šä¿¡æ¯ 1234// æˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ç›®æ ‡é¡µé¢ä¸­é…ç½®ä¸€äº›å±žæ€§ï¼Œæ¯”æ–¹è¯´"æ˜¯å¦éœ€è¦ç™»é™†"ä¹‹ç±»çš„// å¯ä»¥é€šè¿‡ Route æ³¨è§£ä¸­çš„ extras å±žæ€§è¿›è¡Œæ‰©å±•ï¼Œè¿™ä¸ªå±žæ€§æ˜¯ä¸€ä¸ª intå€¼ï¼Œæ¢å¥è¯è¯´ï¼Œå•ä¸ªintæœ‰4å­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯32ä½ï¼Œå¯ä»¥é…ç½®32ä¸ªå¼€å…³// å‰©ä¸‹çš„å¯ä»¥è‡ªè¡Œå‘æŒ¥ï¼Œé€šè¿‡å­—èŠ‚æ“ä½œå¯ä»¥æ ‡è¯†32ä¸ªå¼€å…³ï¼Œé€šè¿‡å¼€å…³æ ‡è®°ç›®æ ‡é¡µé¢çš„ä¸€äº›å±žæ€§ï¼Œåœ¨æ‹¦æˆªå™¨ä¸­å¯ä»¥æ‹¿åˆ°è¿™ä¸ªæ ‡è®°è¿›è¡Œä¸šåŠ¡é€»è¾‘åˆ¤æ–­@Route(path = "/test/activity", extras = Consts.XXXX) é€šè¿‡ä¾èµ–æ³¨å…¥è§£è€¦:æœåŠ¡ç®¡ç†(ä¸€) æš´éœ²æœåŠ¡ 12345678910111213141516171819// å£°æ˜ŽæŽ¥å£,å…¶ä»–ç»„ä»¶é€šè¿‡æŽ¥å£æ¥è°ƒç”¨æœåŠ¡public interface HelloService extends IProvider &#123; String sayHello(String name);&#125;// å®žçŽ°æŽ¥å£@Route(path = "/yourservicegroupname/hello", name = "æµ‹è¯•æœåŠ¡")public class HelloServiceImpl implements HelloService &#123; @Override public String sayHello(String name) &#123; return "hello, " + name; &#125; @Override public void init(Context context) &#123; &#125;&#125; é€šè¿‡ä¾èµ–æ³¨å…¥è§£è€¦:æœåŠ¡ç®¡ç†(äºŒ) å‘çŽ°æœåŠ¡ 12345678910111213141516171819202122232425262728public class Test &#123; @Autowired HelloService helloService; @Autowired(name = "/yourservicegroupname/hello") HelloService helloService2; HelloService helloService3; HelloService helloService4; public Test() &#123; ARouter.getInstance().inject(this); &#125; public void testService() &#123; // 1. (æŽ¨è)ä½¿ç”¨ä¾èµ–æ³¨å…¥çš„æ–¹å¼å‘çŽ°æœåŠ¡,é€šè¿‡æ³¨è§£æ ‡æ³¨å­—æ®µ,å³å¯ä½¿ç”¨ï¼Œæ— éœ€ä¸»åŠ¨èŽ·å– // Autowiredæ³¨è§£ä¸­æ ‡æ³¨nameä¹‹åŽï¼Œå°†ä¼šä½¿ç”¨byNameçš„æ–¹å¼æ³¨å…¥å¯¹åº”çš„å­—æ®µï¼Œä¸è®¾ç½®nameå±žæ€§ï¼Œä¼šé»˜è®¤ä½¿ç”¨byTypeçš„æ–¹å¼å‘çŽ°æœåŠ¡(å½“åŒä¸€æŽ¥å£æœ‰å¤šä¸ªå®žçŽ°çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨byNameçš„æ–¹å¼å‘çŽ°æœåŠ¡) helloService.sayHello("Vergil"); helloService2.sayHello("Vergil"); // 2. ä½¿ç”¨ä¾èµ–æŸ¥æ‰¾çš„æ–¹å¼å‘çŽ°æœåŠ¡ï¼Œä¸»åŠ¨åŽ»å‘çŽ°æœåŠ¡å¹¶ä½¿ç”¨ï¼Œä¸‹é¢ä¸¤ç§æ–¹å¼åˆ†åˆ«æ˜¯byNameå’ŒbyType helloService3 = ARouter.getInstance().navigation(HelloService.class); helloService4 = (HelloService) ARouter.getInstance().build("/yourservicegroupname/hello").navigation(); helloService3.sayHello("Vergil"); helloService4.sayHello("Vergil"); &#125;&#125; å…«ã€æ›´å¤šåŠŸèƒ½ åˆå§‹åŒ–ä¸­çš„å…¶ä»–è®¾ç½® 123ARouter.openLog(); // å¼€å¯æ—¥å¿—ARouter.openDebug(); // ä½¿ç”¨InstantRunçš„æ—¶å€™ï¼Œéœ€è¦æ‰“å¼€è¯¥å¼€å…³ï¼Œä¸Šçº¿ä¹‹åŽå…³é—­ï¼Œå¦åˆ™æœ‰å®‰å…¨é£Žé™©ARouter.printStackTrace(); // æ‰“å°æ—¥å¿—çš„æ—¶å€™æ‰“å°çº¿ç¨‹å †æ ˆ è¯¦ç»†çš„APIè¯´æ˜Ž 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465// æž„å»ºæ ‡å‡†çš„è·¯ç”±è¯·æ±‚ARouter.getInstance().build("/home/main").navigation();// æž„å»ºæ ‡å‡†çš„è·¯ç”±è¯·æ±‚ï¼Œå¹¶æŒ‡å®šåˆ†ç»„ARouter.getInstance().build("/home/main", "ap").navigation();// æž„å»ºæ ‡å‡†çš„è·¯ç”±è¯·æ±‚ï¼Œé€šè¿‡Uriç›´æŽ¥è§£æžUri uri;ARouter.getInstance().build(uri).navigation();// æž„å»ºæ ‡å‡†çš„è·¯ç”±è¯·æ±‚ï¼ŒstartActivityForResult// navigationçš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯Activityï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯RequestCodeARouter.getInstance().build("/home/main", "ap").navigation(this, 5);// ç›´æŽ¥ä¼ é€’BundleBundle params = new Bundle();ARouter.getInstance() .build("/home/main") .with(params) .navigation();// æŒ‡å®šFlagARouter.getInstance() .build("/home/main") .withFlags(); .navigation();// èŽ·å–FragmentFragment fragment = (Fragment) ARouter.getInstance().build("/test/fragment").navigation(); // å¯¹è±¡ä¼ é€’ARouter.getInstance() .withObject("key", new TestObj("Jack", "Rose")) .navigation();// è§‰å¾—æŽ¥å£ä¸å¤Ÿå¤šï¼Œå¯ä»¥ç›´æŽ¥æ‹¿å‡ºBundleèµ‹å€¼ARouter.getInstance() .build("/home/main") .getExtra();// è½¬åœºåŠ¨ç”»(å¸¸è§„æ–¹å¼)ARouter.getInstance() .build("/test/activity2") .withTransition(R.anim.slide_in_bottom, R.anim.slide_out_bottom) .navigation(this);// è½¬åœºåŠ¨ç”»(API16+)ActivityOptionsCompat compat = ActivityOptionsCompat. makeScaleUpAnimation(v, v.getWidth() / 2, v.getHeight() / 2, 0, 0);// ps. makeSceneTransitionAnimation ä½¿ç”¨å…±äº«å…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦åœ¨navigationæ–¹æ³•ä¸­ä¼ å…¥å½“å‰ActivityARouter.getInstance() .build("/test/activity2") .withOptionsCompat(compat) .navigation(); // ä½¿ç”¨ç»¿è‰²é€šé“(è·³è¿‡æ‰€æœ‰çš„æ‹¦æˆªå™¨)ARouter.getInstance().build("/home/main").greenChannel().navigation();// ä½¿ç”¨è‡ªå·±çš„æ—¥å¿—å·¥å…·æ‰“å°æ—¥å¿—ARouter.setLogger();// ä½¿ç”¨è‡ªå·±æä¾›çš„çº¿ç¨‹æ± ARouter.setExecutor(); èŽ·å–åŽŸå§‹çš„URI 1String uriStr = getIntent().getStringExtra(ARouter.RAW_URI); é‡å†™è·³è½¬URL 123456789101112131415161718192021// å®žçŽ°PathReplaceServiceæŽ¥å£ï¼Œå¹¶åŠ ä¸Šä¸€ä¸ªPathå†…å®¹ä»»æ„çš„æ³¨è§£å³å¯@Route(path = "/xxx/xxx") // å¿…é¡»æ ‡æ˜Žæ³¨è§£public class PathReplaceServiceImpl implements PathReplaceService &#123; /** * For normal path. * * @param path raw path */ String forString(String path) &#123; return path; // æŒ‰ç…§ä¸€å®šçš„è§„åˆ™å¤„ç†ä¹‹åŽè¿”å›žå¤„ç†åŽçš„ç»“æžœ &#125; /** * For uri type. * * @param uri raw uri */ Uri forUri(Uri uri) &#123; return url; // æŒ‰ç…§ä¸€å®šçš„è§„åˆ™å¤„ç†ä¹‹åŽè¿”å›žå¤„ç†åŽçš„ç»“æžœ &#125;&#125; ç”Ÿæˆè·¯ç”±æ–‡æ¡£ 123456789101112// æ›´æ–° build.gradle, æ·»åŠ å‚æ•° AROUTER_GENERATE_DOC = enable// ç”Ÿæˆçš„æ–‡æ¡£è·¯å¾„ : build/generated/source/apt/(debug or release)/com/alibaba/android/arouter/docs/arouter-map-of-$&#123;moduleName&#125;.jsonandroid &#123; defaultConfig &#123; ... javaCompileOptions &#123; annotationProcessorOptions &#123; arguments = [AROUTER_MODULE_NAME: project.getName(), AROUTER_GENERATE_DOC: &quot;enable&quot;] &#125; &#125; &#125;&#125; ä¹ã€å…¶ä»– è·¯ç”±ä¸­çš„åˆ†ç»„æ¦‚å¿µ SDKä¸­é’ˆå¯¹æ‰€æœ‰çš„è·¯å¾„(/test/1 /test/2)è¿›è¡Œåˆ†ç»„ï¼Œåˆ†ç»„åªæœ‰åœ¨åˆ†ç»„ä¸­çš„æŸä¸€ä¸ªè·¯å¾„ç¬¬ä¸€æ¬¡è¢«è®¿é—®çš„æ—¶å€™ï¼Œè¯¥åˆ†ç»„æ‰ä¼šè¢«åˆå§‹åŒ– å¯ä»¥é€šè¿‡ @Route æ³¨è§£ä¸»åŠ¨æŒ‡å®šåˆ†ç»„ï¼Œå¦åˆ™ä½¿ç”¨è·¯å¾„ä¸­ç¬¬ä¸€æ®µå­—ç¬¦ä¸²(/*/)ä½œä¸ºåˆ†ç»„ æ³¨æ„ï¼šä¸€æ—¦ä¸»åŠ¨æŒ‡å®šåˆ†ç»„ä¹‹åŽï¼Œåº”ç”¨å†…è·¯ç”±éœ€è¦ä½¿ç”¨ ARouter.getInstance().build(path, group) è¿›è¡Œè·³è½¬ï¼Œæ‰‹åŠ¨æŒ‡å®šåˆ†ç»„ï¼Œå¦åˆ™æ— æ³•æ‰¾åˆ°1@Route(path = "/test/1", group = "app") æ‹¦æˆªå™¨å’ŒæœåŠ¡çš„å¼‚åŒ æ‹¦æˆªå™¨å’ŒæœåŠ¡æ‰€éœ€è¦å®žçŽ°çš„æŽ¥å£ä¸åŒï¼Œä½†æ˜¯ç»“æž„ç±»ä¼¼ï¼Œéƒ½å­˜åœ¨ init(Context context) æ–¹æ³•ï¼Œä½†æ˜¯ä¸¤è€…çš„è°ƒç”¨æ—¶æœºä¸åŒ æ‹¦æˆªå™¨å› ä¸ºå…¶ç‰¹æ®Šæ€§ï¼Œä¼šè¢«ä»»ä½•ä¸€æ¬¡è·¯ç”±æ‰€è§¦å‘ï¼Œæ‹¦æˆªå™¨ä¼šåœ¨ARouteråˆå§‹åŒ–çš„æ—¶å€™å¼‚æ­¥åˆå§‹åŒ–ï¼Œå¦‚æžœç¬¬ä¸€æ¬¡è·¯ç”±çš„æ—¶å€™æ‹¦æˆªå™¨è¿˜æ²¡æœ‰åˆå§‹åŒ–ç»“æŸï¼Œè·¯ç”±ä¼šç­‰å¾…ï¼Œç›´åˆ°åˆå§‹åŒ–å®Œæˆã€‚ æœåŠ¡æ²¡æœ‰è¯¥é™åˆ¶ï¼ŒæŸä¸€æœåŠ¡å¯èƒ½åœ¨Appæ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­éƒ½ä¸ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥æœåŠ¡åªæœ‰è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè§¦å‘åˆå§‹åŒ–æ“ä½œ æ—§ç‰ˆæœ¬gradleæ’ä»¶çš„é…ç½®æ–¹å¼ 1234567891011121314151617181920212223apply plugin: &apos;com.neenbedankt.android-apt&apos;buildscript &#123; repositories &#123; jcenter() &#125; dependencies &#123; classpath &apos;com.neenbedankt.gradle.plugins:android-apt:1.4&apos; &#125;&#125;apt &#123; arguments &#123; AROUTER_MODULE_NAME project.getName(); &#125;&#125;dependencies &#123; compile &apos;com.alibaba:arouter-api:x.x.x&apos; apt &apos;com.alibaba:arouter-compiler:x.x.x&apos; ...&#125; Kotliné¡¹ç›®ä¸­çš„é…ç½®æ–¹å¼ 1234567891011121314// å¯ä»¥å‚è€ƒ module-kotlin æ¨¡å—ä¸­çš„å†™æ³•apply plugin: &apos;kotlin-kapt&apos;kapt &#123; arguments &#123; arg(&quot;AROUTER_MODULE_NAME&quot;, project.getName()) &#125;&#125;dependencies &#123; compile &apos;com.alibaba:arouter-api:x.x.x&apos; kapt &apos;com.alibaba:arouter-compiler:x.x.x&apos; ...&#125; åã€Q&amp;A â€œW/ARouter::: ARouter::No postcard![ ]â€ è¿™ä¸ªLogæ­£å¸¸çš„æƒ…å†µä¸‹ä¹Ÿä¼šæ‰“å°å‡ºæ¥ï¼Œå¦‚æžœæ‚¨çš„ä»£ç ä¸­æ²¡æœ‰å®žçŽ°DegradeServiceå’ŒPathReplaceServiceçš„è¯ï¼Œå› ä¸ºARouteræœ¬èº«çš„ä¸€äº›åŠŸèƒ½ä¹Ÿä¾èµ– è‡ªå·±æä¾›çš„Serviceç®¡ç†åŠŸèƒ½ï¼ŒARouteråœ¨è·³è½¬çš„æ—¶å€™ä¼šå°è¯•å¯»æ‰¾ç”¨æˆ·å®žçŽ°çš„PathReplaceServiceï¼Œç”¨äºŽå¯¹è·¯å¾„è¿›è¡Œé‡å†™(å¯é€‰åŠŸèƒ½)ï¼Œæ‰€ä»¥å¦‚æžœæ‚¨æ²¡æœ‰ å®žçŽ°è¿™ä¸ªæœåŠ¡çš„è¯ï¼Œä¹Ÿä¼šæŠ›å‡ºè¿™ä¸ªæ—¥å¿— æŽ¨èåœ¨appä¸­å®žçŽ°DegradeServiceã€PathReplaceService â€œW/ARouter::: ARouter::There is no route match the path [/xxx/xxx], in group [xxx][ ]â€ é€šå¸¸æ¥è¯´è¿™ç§æƒ…å†µæ˜¯æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡é¡µé¢ï¼Œç›®æ ‡ä¸å­˜åœ¨ å¦‚æžœè¿™ä¸ªé¡µé¢æ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤è¿›è¡ŒæŽ’æŸ¥ æ£€æŸ¥ç›®æ ‡é¡µé¢çš„æ³¨è§£æ˜¯å¦é…ç½®æ­£ç¡®ï¼Œæ­£ç¡®çš„æ³¨è§£å½¢å¼åº”è¯¥æ˜¯ (@Route(path=â€/test/testâ€), å¦‚æ²¡æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œè¯·å‹¿æŒ‡å®šgroupå­—æ®µï¼ŒåºŸå¼ƒåŠŸèƒ½) æ£€æŸ¥ç›®æ ‡é¡µé¢æ‰€åœ¨çš„æ¨¡å—çš„gradleè„šæœ¬ä¸­æ˜¯å¦ä¾èµ–äº† arouter-compiler sdk (éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦ä½¿ç”¨aptä¾èµ–ï¼Œè€Œä¸æ˜¯compileå…³é”®å­—ä¾èµ–) æ£€æŸ¥ç¼–è¯‘æ‰“åŒ…æ—¥å¿—ï¼Œæ˜¯å¦å‡ºçŽ°äº†å½¢å¦‚ ARouter:Compiler &gt;&gt;&gt; xxxxx çš„æ—¥å¿—ï¼Œæ—¥å¿—ä¸­ä¼šæ‰“å°å‡ºå‘çŽ°çš„è·¯ç”±ç›®æ ‡ å¯åŠ¨Appçš„æ—¶å€™ï¼Œå¼€å¯debugã€log(openDebug/openLog), æŸ¥çœ‹æ˜ å°„è¡¨æ˜¯å¦å·²ç»è¢«æ‰«æå‡ºæ¥ï¼Œå½¢å¦‚ D/ARouter::: LogisticsCenter has already been loaded, GroupIndex[4]ï¼ŒGroupIndex &gt; 0 å¼€å¯InstantRunä¹‹åŽæ— æ³•è·³è½¬(é«˜ç‰ˆæœ¬Gradleæ’ä»¶ä¸‹æ— æ³•è·³è½¬)ï¼Ÿâ€‹ å› ä¸ºå¼€å¯InstantRunä¹‹åŽï¼Œå¾ˆå¤šç±»æ–‡ä»¶ä¸ä¼šæ”¾åœ¨åŽŸæœ¬çš„dexä¸­ï¼Œéœ€è¦å•ç‹¬åŽ»åŠ è½½ï¼ŒARouteré»˜è®¤ä¸ä¼šåŽ»åŠ è½½è¿™äº›æ–‡ä»¶ï¼Œå› ä¸ºå®‰å…¨åŽŸå› ï¼Œåªæœ‰åœ¨å¼€å¯äº†openDebugä¹‹åŽ ARouteræ‰å›žåŽ»åŠ è½½InstantRunäº§ç”Ÿçš„æ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨ä»¥ä¸Šçš„æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨initä¹‹å‰è°ƒç”¨openDebug TransformException:java.util.zip.ZipException: duplicate entry â€¦. ARouteræœ‰æŒ‰ç»„åŠ è½½çš„æœºåˆ¶ï¼Œå…³äºŽåˆ†ç»„å¯ä»¥å‚è€ƒ 6-1 éƒ¨åˆ†ï¼ŒARouterå…è®¸ä¸€ä¸ªmoduleä¸­å­˜åœ¨å¤šä¸ªåˆ†ç»„ï¼Œä½†æ˜¯ä¸å…è®¸å¤šä¸ªmoduleä¸­å­˜åœ¨ç›¸åŒçš„åˆ†ç»„ï¼Œä¼šå¯¼è‡´æ˜ å°„æ–‡ä»¶å†²çª Kotlinç±»ä¸­çš„å­—æ®µæ— æ³•æ³¨å…¥å¦‚ä½•è§£å†³ï¼Ÿ é¦–å…ˆï¼ŒKotlinä¸­çš„å­—æ®µæ˜¯å¯ä»¥è‡ªåŠ¨æ³¨å…¥çš„ï¼Œä½†æ˜¯æ³¨å…¥ä»£ç ä¸ºäº†å‡å°‘åå°„ï¼Œä½¿ç”¨çš„å­—æ®µèµ‹å€¼çš„æ–¹å¼æ¥æ³¨å…¥çš„ï¼ŒKotliné»˜è®¤ä¼šç”Ÿæˆset/getæ–¹æ³•ï¼Œå¹¶æŠŠå±žæ€§è®¾ç½®ä¸ºprivate æ‰€ä»¥åªè¦ä¿è¯Kotlinä¸­å­—æ®µå¯è§æ€§ä¸æ˜¯privateå³å¯ï¼Œç®€å•è§£å†³å¯ä»¥åœ¨å­—æ®µä¸Šæ·»åŠ  @JvmField é€šè¿‡URLè·³è½¬ä¹‹åŽï¼Œåœ¨intentä¸­æ‹¿ä¸åˆ°å‚æ•°å¦‚ä½•è§£å†³ï¼Ÿ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœä¸ä½¿ç”¨è‡ªåŠ¨æ³¨å…¥ï¼Œé‚£ä¹ˆå¯ä»¥ä¸å†™ ARouter.getInstance().inject(this)ï¼Œä½†æ˜¯éœ€è¦å–å€¼çš„å­—æ®µä»ç„¶éœ€è¦æ ‡ä¸Š @Autowired æ³¨è§£ï¼Œå› ä¸º åªæœ‰æ ‡ä¸Šæ³¨è§£ä¹‹åŽï¼ŒARouteræ‰èƒ½çŸ¥é“ä»¥å“ªä¸€ç§æ•°æ®ç±»åž‹æå–URLä¸­çš„å‚æ•°å¹¶æ”¾å…¥Intentä¸­ï¼Œè¿™æ ·æ‚¨æ‰èƒ½åœ¨intentä¸­èŽ·å–åˆ°å¯¹åº”çš„å‚æ•° æ–°å¢žé¡µé¢ä¹‹åŽï¼Œæ— æ³•è·³è½¬ï¼Ÿ ARouteråŠ è½½Dexä¸­çš„æ˜ å°„æ–‡ä»¶ä¼šæœ‰ä¸€å®šè€—æ—¶ï¼Œæ‰€ä»¥ARouterä¼šç¼“å­˜æ˜ å°„æ–‡ä»¶ï¼Œç›´åˆ°æ–°ç‰ˆæœ¬å‡çº§(ç‰ˆæœ¬å·æˆ–è€…versionCodeå˜åŒ–)ï¼Œè€Œå¦‚æžœæ˜¯å¼€å‘ç‰ˆæœ¬(ARouter.openDebug())ï¼Œ ARouter æ¯æ¬¡å¯åŠ¨éƒ½ä¼šé‡æ–°åŠ è½½æ˜ å°„æ–‡ä»¶ï¼Œå¼€å‘é˜¶æ®µä¸€å®šè¦æ‰“å¼€ Debug åŠŸèƒ½]]></content>
      <categories>
        <category>Android</category>
        <category>æ¡†æž¶</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ARouter</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Tangramä¸ŽVirtualView]]></title>
    <url>%2Fposts%2Fb1fd08a9.html</url>
    <content type="text"><![CDATA[VirtualViewTangramä¸­å·²ç»å®žçŽ°äº†é¡µé¢å¸ƒå±€çš„åŠ¨æ€åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®jsonæ–‡ä»¶è‡ªç”±çš„å¸ƒå±€ï¼›ä½†è¿˜æœ‰ä¸€ä¸ªå±€é™æ€§ï¼Œjsonä¸­ä½¿ç”¨çš„å¡ç‰‡æˆ–è€…ç»„ä»¶çš„typeï¼Œå¿…é¡»æ˜¯æ³¨å†ŒOKçš„ï¼ˆä¹Ÿå°±æ˜¯åœ¨å®¢æˆ·ç«¯å·²ç»å®žçŽ°å¥½çš„ï¼‰æ‰èƒ½ä½¿ç”¨ï¼›å¦‚æžœæƒ³è¦åœ¨åŽŸæ¥çš„ç‰ˆæœ¬ä¸­æ–°å¢žä¸€ä¸ªtypeç±»åž‹çš„ç»„ä»¶ï¼Œè¿™æ˜¯æ²¡æœ‰åŠžæ³•åšåˆ°çš„ï¼Œè¿˜æ˜¯åªèƒ½é€šè¿‡å‡çº§å®¢æˆ·ç«¯æ¥å®žçŽ°ã€‚ äºŽæ˜¯ï¼ŒVirtualViewå‡ºçŽ°äº†ã€‚ åŸºå¸ƒå±€ææœ¯æ–‡ä»¶æ˜¯ä¸€ä¸ªxmlæ–‡ä»¶ï¼Œå¹¶é™„å¸¦ä¸€ä¸ªjsonæ•°æ®æ–‡ä»¶:æè¿°å¸ƒå±€æ–‡ä»¶ç¤ºä¾‹ï¼šï¼ˆå…¶ä¸­çš„ç›¸å…³æ•°æ®æ¥æºéƒ½å¯ä»¥ä»Žæ•°æ®jsonæ–‡ä»¶ä¸­ä½¿ç”¨è¡¨è¾¾å¼èŽ·å–ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869 &lt;RatioLayout orientation="H" layoutWidth="match_parent" layoutHeight="wrap_content" background="#f8f8f8"&gt; &lt;VHLayout layoutRatio="1" orientation="V" layoutWidth="0" layoutHeight="match_parent" background="#f8f8f8"&gt; &lt;VImage layoutWidth="match_parent" layoutHeight="120.5" scaleType="fit_xy" src="$&#123;picture_2&#125;"/&gt; &lt;VLine layoutWidth="match_parent" layoutHeight="0.5" paintWidth="0.5" orientation="H" color="#e8ecef" /&gt; &lt;VImage layoutWidth="match_parent" layoutHeight="60" scaleType="fit_xy" src="$&#123;picture_5&#125;"/&gt; &lt;/VHLayout&gt; &lt;VLine layoutWidth="0.5" layoutHeight="match_parent" paintWidth="0.5" orientation="V" color="#e8ecef" /&gt; &lt;VHLayout layoutRatio="1" orientation="V" layoutWidth="0" layoutHeight="match_parent" background="#f8f8f8"&gt; &lt;VImage layoutWidth="match_parent" layoutHeight="60" scaleType="fit_xy" src="$&#123;picture_3&#125;"/&gt; &lt;VLine layoutWidth="match_parent" layoutHeight="0.5" paintWidth="0.5" orientation="H" color="#e8ecef" /&gt; &lt;VImage layoutWidth="match_parent" layoutHeight="60" scaleType="fit_xy" src="$&#123;picture_4&#125;"/&gt; &lt;VLine layoutWidth="match_parent" layoutHeight="0.5" paintWidth="0.5" orientation="H" color="#e8ecef" /&gt; &lt;VImage layoutWidth="match_parent" layoutHeight="60" scaleType="fit_xy" src="$&#123;picture_6&#125;"/&gt; &lt;/VHLayout&gt;&lt;/RatioLayout&gt; æ•°æ®jsonæ–‡ä»¶ç¤ºä¾‹ï¼š 1234567&#123; "picture_2": "http://xxxx/images/59afb155c769f.png", "picture_3": "http://xxxx/images/59afb303042ca.png", "picture_4": "http://xxxx/images/59afb303042cb.png", "picture_5": "http://xxxx/images/59afb36cf1eb8.png", "picture_6": "http://xxxx/images/59afb303042cd.png"&#125; xmlæ–‡ä»¶éœ€è¦ç»è¿‡ç¼–ç»Žç”Ÿæˆç›®æ ‡æ–‡ä»¶æ‰å¯åŠ è½½ä½¿ç”¨ï¼Œå¦‚æžœç”¨äºŽé¡¹ç›®ä¸­ä¸€èˆ¬ä¸‹å‘çš„éƒ½æ˜¯ç»è¿‡ç¼–ç»ŽåŽçš„æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯å®žæ—¶ç¼–ç»Žã€‚ ä¸€ä¸ªxmlå°±æ˜¯ä¸€ä¸ªç»„ä»¶ï¼ŒTangramé€šè¿‡åŠ è½½è¿™ä¸ªxmlæ–‡ä»¶å³å¯ä½¿ç”¨è¯¥xmlæ–‡ä»¶æ‰€ææœ¯çš„ç»„ä»¶ï¼Œä»Žè€Œå®žçŽ°äº†åŠ¨æ€æ–°å¢žç»„ä»¶ç±»åž‹çš„åŠŸèƒ½ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Tragram Androidä½¿ç”¨æŒ‡å—]]></title>
    <url>%2Fposts%2F37457476.html</url>
    <content type="text"><![CDATA[å…·ä½“ç»„ä»¶å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttp://tangram.pingguohe.net/docs/android/access-tangram æŽ¥å…¥Tangramä»£ç 1.å¼•å…¥ä¾èµ–12// gradlecompile &apos;com.alibaba.android:tangram:1.0.0@aar&apos; æˆ–è€… 1234567// maven&lt;dependency&gt; &lt;groupId&gt;com.alibaba.android&lt;/groupId&gt; &lt;artifactId&gt;tangram&lt;/artifactId&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;type&gt;aar&lt;/type&gt;&lt;/dependency&gt; 2.åˆå§‹åŒ– Tangram çŽ¯å¢ƒåº”ç”¨å…¨å±€åªéœ€è¦åˆå§‹åŒ–ä¸€æ¬¡ï¼Œæä¾›ä¸€ä¸ªé€šç”¨çš„å›¾ç‰‡åŠ è½½å™¨ï¼Œä¸€ä¸ªåº”ç”¨å†…é€šç”¨çš„ImageViewç±»åž‹ï¼ˆé€šå¸¸æƒ…å†µä¸‹æ¯ä¸ªåº”ç”¨éƒ½æœ‰è‡ªå®šä¹‰çš„ ImageViewï¼Œå¦‚æžœæ²¡æœ‰çš„è¯å°±æä¾›ç³»ç»Ÿçš„ ImageView ç±»ï¼‰ã€‚ 12345678TangramBuilder.init(context, new IInnerImageSetter() &#123; @Override public &lt;IMAGE extends ImageView&gt; void doLoadImageUrl(@NonNull IMAGE view, @Nullable String url) &#123; //å‡è®¾ä½ ä½¿ç”¨ Picasso åŠ è½½å›¾ç‰‡ Picasso.with(context).load(url).into(view); &#125;&#125;, ImageView.class); 3.åˆå§‹åŒ– TangramBuilderåœ¨ Activity ä¸­åˆå§‹åŒ–TangramBuilderï¼Œå‡è®¾ä½ çš„ Activity æ˜¯TangramActivityã€‚ 1TangramBuilder.InnerBuilder builder = TangramBuilder.newInnerBuilder(TangramActivity.this); è¿™ä¸€æ­¥ builder å¯¹è±¡ç”Ÿæˆçš„æ—¶å€™ï¼Œå†…éƒ¨å·²ç»æ³¨å†Œäº†æ¡†æž¶æ‰€æ”¯æŒçš„æ‰€æœ‰ç»„ä»¶å’Œå¡ç‰‡ï¼Œä»¥åŠé»˜è®¤çš„IAdapterBuilderï¼ˆå®ƒè¢«ç”¨æ¥åˆ›å»º ç»‘å®šåˆ° RecyclerView çš„Adapterï¼‰ã€‚ 4.æ³¨å†Œè‡ªå®šä¹‰çš„å¡ç‰‡å’Œç»„ä»¶1234567//TangramBuilderä¸­å·²ç»é¢„å…ˆæ³¨å†Œäº†è®¸å¤šç»„ä»¶åŠå¡ç‰‡ï¼Œå¯ç›´æŽ¥ä½¿ç”¨ï¼›æ­¤å¤„åªéœ€è¦æ³¨å†Œè‡ªå®šä¹‰çš„ç»„ä»¶åŠå¡ç‰‡å³å¯builder = TangramBuilder.newInnerBuilder(this);builder.registerCell("è‡ªå®šä¹‰åå­—1", è‡ªå®šä¹‰ç»„ä»¶1.class);builder.registerCell("è‡ªå®šä¹‰åå­—2", è‡ªå®šä¹‰ç»„ä»¶2.class);builder.registerCard("è‡ªå®šä¹‰åå­—3", è‡ªå®šä¹‰å¡ç‰‡3.class);builder.registerCell(æ•°å­—, è‡ªå®šä¹‰ç»„ä»¶4.class);builder.registerVirtualView("VirtualViewåå­—");//Tangramå¯¹VirtualViewçš„æ”¯æŒ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå†…ç½®å¡ç‰‡çš„ç±»åž‹å·²ç»æ»¡è¶³å¤§éƒ¨åˆ†åœºæ™¯äº†ï¼Œä¸šåŠ¡æ–¹ä¸»è¦æ˜¯æ³¨å†Œä¸€ä¸‹è‡ªå®šä¹‰ç»„ä»¶ã€‚æ³¨å†Œç»„ä»¶æœ‰3ç§æ–¹å¼ï¼š æ³¨å†Œç»‘å®šç»„ä»¶ç±»åž‹å’Œè‡ªå®šä¹‰Viewï¼Œæ¯”å¦‚builder.registerCell(1, TestView.class);ã€‚æ„æ€æ˜¯ç±»åž‹ä¸º1çš„ç»„ä»¶æ¸²æŸ“æ—¶ä¼šè¢«ç»‘å®šåˆ°TestViewçš„å®žä¾‹ä¸Šï¼Œè¿™ç§æ–¹å¼æ³¨å†Œçš„ç»„ä»¶ä½¿ç”¨é€šç”¨çš„ç»„ä»¶æ¨¡åž‹BaseCellã€‚ æ³¨å†Œç»‘å®šç»„ä»¶ç±»åž‹ã€è‡ªå®šä¹‰ modelã€è‡ªå®šä¹‰Viewï¼Œæ¯”å¦‚builder.registerCell(1, TestCell.class, TestView.class);ã€‚æ„æ€æ˜¯ç±»åž‹ä¸º1çš„ç»„ä»¶ä½¿ç”¨è‡ªå®šä¹‰çš„ç»„ä»¶æ¨¡åž‹TestCellï¼Œå®ƒåº”å½“ç»§æ‰¿äºŽBaseCellï¼Œåœ¨æ¸²æŸ“æ—¶ä¼šè¢«ç»‘å®šåˆ°TestViewçš„å®žä¾‹ä¸Šã€‚ æ³¨å†Œç»‘å®šç»„ä»¶ç±»åž‹ã€è‡ªå®šä¹‰modelã€è‡ªå®šä¹‰ViewHolderï¼Œæ¯”å¦‚builder.registerCell(1, TestCell.class, new ViewHolderCreator&lt;&gt;(R.layout.item_holder, TestViewHolder.class, TestView.class));ã€‚æ„æ€æ˜¯ç±»åž‹ä¸º1çš„ç»„ä»¶ä½¿ç”¨è‡ªå®šä¹‰çš„ç»„ä»¶æ¨¡åž‹TestCellï¼Œå®ƒåº”å½“ç»§æ‰¿äºŽBaseCellï¼Œåœ¨æ¸²æŸ“æ—¶ä»¥R.layout.item_holderä¸ºå¸ƒå±€åˆ›å»ºç±»åž‹ä¸ºTestViewçš„ viewï¼Œå¹¶ç»‘å®šåˆ°ç±»åž‹ä¸ºTestViewHolderçš„ viewHolder ä¸Šï¼Œç»„ä»¶æ•°æ®è¢«ç»‘å®šåˆ°å®šåˆ°TestViewçš„å®žä¾‹ä¸Šã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨å‰ä¸¤ç§æ–¹å¼æ³¨å†Œç»„ä»¶å³å¯ã€‚è‡³äºŽç»„ä»¶å¼€å‘è§„èŒƒï¼Œè¯·å‚è€ƒç»„ä»¶å¼€å‘ã€‚ 5.ç”ŸæˆTangramEngineå®žä¾‹åœ¨ä¸Šè¿°åŸºç¡€ä¸Šè°ƒç”¨ï¼š 1TangramEngine engine = builder.build(); 6.ç»‘å®šä¸šåŠ¡ support ç±»åˆ° engineTangram å†…éƒ¨æä¾›äº†ä¸€äº›å¸¸ç”¨çš„ support ç±»è¾…åŠ©ä¸šåŠ¡å¼€å‘ï¼Œä¸šåŠ¡æ–¹ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ‰€éœ€è¦çš„åŠŸèƒ½æ¨¡å—æ³¨å†Œè¿›åŽ»ã€‚ä»¥ä¸‹å¸¸ç”¨ä¸‰ä¸ªå¸¸ç”¨çš„supportï¼Œåˆ†åˆ«å¤„ç†ç‚¹å‡»ã€å¡ç‰‡æ•°æ®åŠ è½½ã€æ›å…‰é€»è¾‘ï¼Œè¯¦æƒ…è¯·å‚è€ƒæ–‡æ¡£ã€‚ 123engine.register(SimpleClickSupport.class, new XXClickSupport());engine.register(CardLoadSupport.class, new XXCardLoadSupport());engine.register(ExposureSupport.class, new XXExposureSuport()); 7.ç»‘å®š recyclerView1234setContentView(R.layout.main_activity);RecyclerView recyclerView = (RecyclerView) findViewById(R.id.main_view);...engine.bindView(recyclerView); 8.ç›‘å¬ recyclerView çš„æ»šåŠ¨äº‹ä»¶12345678recyclerView.addOnScrollListener(new RecyclerView.OnScrollListener() &#123; @Override public void onScrolled(RecyclerView recyclerView, int dx, int dy) &#123; super.onScrolled(recyclerView, dx, dy); //åœ¨ scroll äº‹ä»¶ä¸­è§¦å‘ engine çš„ onScrollï¼Œå†…éƒ¨ä¼šè§¦å‘éœ€è¦å¼‚æ­¥åŠ è½½çš„å¡ç‰‡åŽ»æå‰åŠ è½½æ•°æ® engine.onScrolled(); &#125;&#125;); 9.è®¾ç½®æ‚¬æµ®ç±»åž‹å¸ƒå±€çš„åç§»ï¼ˆå¯é€‰ï¼‰å¦‚æžœä½ çš„ recyclerView ä¸Šæ–¹è¿˜è¦†ç›–æœ‰å…¶ä»– viewï¼Œæ¯”å¦‚åº•éƒ¨çš„ tabbar æˆ–è€…é¡¶éƒ¨çš„ actionbarï¼Œä¸ºäº†é˜²æ­¢æ‚¬æµ®ç±» view å’Œè¿™äº›å¤–éƒ¨ view é‡å ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªåç§»é‡ã€‚ 1engine.getLayoutManager().setFixOffset(0, 40, 0, 0); 10.è®¾ç½®å¡ç‰‡é¢„åŠ è½½çš„åç§»é‡ï¼ˆå¯é€‰ï¼‰åœ¨é¡µé¢æ»šåŠ¨è¿‡ç¨‹ä¸­è§¦å‘engine.onScrolled()æ–¹æ³•ï¼Œä¼šåŽ»å¯»æ‰¾å±å¹•å¤–éœ€è¦å¼‚æ­¥åŠ è½½æ•°æ®çš„å¡ç‰‡ï¼Œé»˜è®¤å¾€ä¸‹å¯»æ‰¾5ä¸ªï¼Œè®©æ•°æ®é¢„åŠ è½½å‡ºæ¥ï¼Œå¯ä»¥ä¿®æ”¹è¿™ä¸ªåç§»é‡ã€‚ 1engine.setPreLoadNumber(3) 11.åŠ è½½æ•°æ®å¹¶ä¼ é€’ç»™ engineæ•°æ®ä¸€èˆ¬æ˜¯è°ƒç”¨æŽ¥å£åŠ è½½è¿œç¨‹æ•°æ®ï¼Œè¿™é‡Œæ¼”ç¤ºçš„æ˜¯ mock åŠ è½½æœ¬åœ°çš„æ•°æ®ï¼š 12345678String json = new String(getAssertsFile(this, "data.json")); JSONArray data = null; try &#123; data = new JSONArray(json); engine.setData(data); &#125; catch (JSONException e) &#123; e.printStackTrace(); &#125; 12.é€€å‡ºçš„æ—¶å€™é”€æ¯ engine1engine.destroy(); é€šè¿‡ä¸»åŠ¨è°ƒç”¨ destroy æ–¹æ³•ï¼Œå¯ä»¥é‡Šæ”¾å†…éƒ¨çš„èµ„æºï¼Œæ¯”å¦‚æ¸…ç† adapterã€æ¸…ç†äº‹ä»¶æ€»çº¿ç¼“å­˜çš„æœªå¤„ç†æ¶ˆæ¯ã€æ³¨é”€å¹¿æ’­ç­‰ã€‚æ³¨æ„è°ƒç”¨ destroy æ–¹æ³•ä¹‹åŽå°±ä¸éœ€è¦è°ƒç”¨ unbind æ–¹æ³•äº†ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨ TAC ä¸Šä½¿ç”¨ Tangram4 TAC SDK]]></title>
    <url>%2Fposts%2F1365aa6d.html</url>
    <content type="text"><![CDATA[èƒŒæ™¯Tangram å®¢æˆ·ç«¯ SDK å¯¹åŽç«¯æ•°æ®æ ¼å¼æœ‰æ ‡å‡†åŒ–çš„éœ€æ±‚ï¼Œè€ŒåŽç«¯æŽ¥å£æ ¼å¼åƒåƒä¸‡ä¸‡ï¼Œæ€»ä¸ä¼šæ˜¯æ¯ä¸ªæŽ¥å£æ ¼å¼éƒ½èƒ½å¦‚ä½ æ‰€æ„¿ï¼ŒTangram4TAC å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜æž„å»ºï¼Œä»¥æ ‡å‡†åŒ–æ¨¡åž‹æ¥åœ¨ TAC åœ¨æž„å»ºä¸€ä¸ª Tangram é¡µé¢ã€‚ SDK ä»‹ç» ä¸€æœŸ SDK éžå¸¸ç®€å•ï¼Œå°½é‡ç²¾ç®€æŠ½è±¡ï¼Œä¸»è¦æä¾›äº† Tangram ç»„ä»¶æ¨¡åž‹çš„å®šä¹‰å’Œé»˜è®¤çš„æ•°æ®è½¬æ¢è¾“å‡ºæœåŠ¡ï¼ˆç§°ä¹‹ä¸º renderï¼‰ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ©˜è‰²éƒ¨åˆ†ä¸º SDK æä¾›çš„æ ¸å¿ƒæ¨¡åž‹å¯¹è±¡ï¼ŒCell æ˜¯ç»„ä»¶å®šä¹‰ï¼ŒContainer æ˜¯å®¹å™¨å®šä¹‰ï¼ŒStyle æ˜¯æ ·å¼å®šä¹‰ã€‚æµ…ç»¿è‰²éƒ¨åˆ†ä¸º Tangram å†…ç½®çš„å¸ƒå±€ç±»åž‹ç»„ä»¶å®šä¹‰ã€‚ç™½è‰²éƒ¨åˆ†ä¸ºä¸šåŠ¡è‡ªå®šä¹‰ç»„ä»¶ï¼Œä¸é›†æˆåœ¨ SDK å†…éƒ¨ï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±æ‰©å±•ä»»æ„éƒ¨åˆ†æ¥å®žçŽ°è‡ªå·±çš„ç»„ä»¶ model å¯¹è±¡ã€‚ Cellã€Containerã€Style çš„å±žæ€§å®šä¹‰ä¹Ÿæ˜¯æŒ‰ç…§çŽ°æœ‰ Tangram çš„è§„èŒƒæ¥å®šä¹‰ï¼Œä¸šåŠ¡å­—æ®µéœ€è¦ç”¨æˆ·è‡ªå·±ç»§æ‰¿å¯¹åº”çš„ç±»æ¥æ‰©å±•ã€‚ å½“æˆ‘ä»¬ç”¨è¿™äº›æ¨¡åž‹å¯¹è±¡æž„å»ºå¥½ Tangram ç»„ä»¶æ ‘ä¹‹åŽï¼Œå°±éœ€è¦å¯¹å¤–è¾“å‡ºæ•°æ®ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å¯¹å¤–è¾“å‡ºçš„ä¸æ˜¯åŽŸå§‹çš„å¯¹è±¡ï¼Œå¯èƒ½æ˜¯éœ€è¦è½¬æ¢æˆ JSON æˆ–è€… Map å¯¹è±¡ï¼Œè¿‡ç¨‹ä¸­è¿˜éœ€è¦å¯¹å­—æ®µè¿›è¡Œä¸€äº›å¤„ç†ã€‚SDK å†…æä¾›äº†å‡ ä¸ªè¾…åŠ©å·¥å…·ï¼š @FieldExcluder æ³¨è§£ï¼šmodel å†…éƒ¨å¯èƒ½ä¼šæœ‰ä¸€äº›ç”¨æ¥ä¿å­˜çŠ¶æ€ï¼Œä¼ é€’ä¸Šä¸‹æ–‡ä¿¡æ¯çš„å­—æ®µï¼Œå¹¶ä¸éœ€è¦æœ€ç»ˆè¾“å‡ºå±žæ€§ï¼Œé€šè¿‡æ­¤æ³¨è§£å°†è¿™äº›å±žæ€§åœ¨è½¬æ¢è¿‡ç¨‹ä¸­è¿‡æ»¤æŽ‰ï¼Œå‡å°‘å†—ä½™æ•°æ®ã€‚ @FieldNameMapper æ³¨è§£ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æœŸæœ› model å†…éƒ¨çš„å±žæ€§å®šä¹‰åå’Œè¾“å‡ºå­—æ®µåä¸€è‡´ï¼Œä½†ä¹Ÿæœ‰å­˜åœ¨ä¸å…¼å®¹çš„æƒ…å†µï¼Œæ¯”å¦‚ Style é‡Œçš„èƒŒæ™¯è‰²å­—æ®µè¦æ±‚æŒ‰ç…§ CSS çš„è§„èŒƒè¾“å‡º background-color å±žæ€§åï¼Œè€Œ JAVA çš„å˜é‡åä¸æ”¯æŒè¿™ç§è§„èŒƒï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è¯¥æ³¨è§£æä¾›ä¸€ä¸ªåˆ«åï¼Œæ¯”å¦‚ï¼š 12@FieldNameMapper(key = &quot;background-color&quot;)protected String backgroundColor; SDK é»˜è®¤çš„ render ç±» DefaultRender éµå¾ªä¸Šè¿°åŽŸåˆ™ï¼Œå¹¶å°† Cell å¯¹è±¡è½¬æ¢æˆ Map ç»“æž„ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥æä¾›è‡ªå®šä¹‰çš„ render å¯¹è±¡ç»™ Cell æ›´æ”¹è½¬æ¢é€»è¾‘ã€‚ ä¸¾ä¾‹è¯´æ˜Žä¸Šè¿°å°±æ˜¯ SDK çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œéžå¸¸çš„ç²¾ç®€ï¼Œä¸‹é¢ç”¨ä¸€ä¸ªä¾‹å­è¯´æ˜Žä½¿ç”¨æµç¨‹ã€‚ä»¥å¤©çŒ«é¦–é¡µ icon åŒºæ”¹é€ ä¸ºä¾‹ã€‚ 1.å®žçŽ°ä¸€ä¸ª TmallCell ç»§æ‰¿è‡ª Cellï¼Œå†…éƒ¨å°è£…å¤©çŒ«å®¢æˆ·ç«¯çŽ¯å¢ƒä¸‹æ‰©å±•çš„å…¬å…±ä¸šåŠ¡å­—æ®µã€‚ 12345678910111213141516171819202122232425262728293031323334353637abstract public class TmallCell&lt;T extends Style&gt; extends Cell&lt;T&gt; &#123; protected String action; protected String title; protected String imgUrl; public TmallCell() &#123; &#125; public String getTitle() &#123; return title; &#125; public void setTitle(String title) &#123; this.title = title; &#125; public String getImgUrl() &#123; return imgUrl; &#125; public void setImgUrl(String imgUrl) &#123; this.imgUrl = imgUrl; &#125; public String getAction() &#123; return action; &#125; public void setAction(String action) &#123; this.action = action; &#125;&#125; 2.å®žçŽ° Icon ç»§æ‰¿è‡ª TmallCellï¼Œå°è£… icon è‡ªèº«çš„æ•°æ®ã€‚ 12345678910111213141516171819202122232425262728293031323334353637public class Icon extends TmallCell&lt;IconStyle&gt; &#123; private String title; private String imgUrl; private String bizId; public String getTitle() &#123; return title; &#125; public void setTitle(String title) &#123; this.title = title; &#125; public String getImgUrl() &#123; return imgUrl; &#125; public void setImgUrl(String imgUrl) &#123; this.imgUrl = imgUrl; &#125; public String getBizId() &#123; return bizId; &#125; public void setBizId(String bizId) &#123; this.bizId = bizId; &#125; @Override public String getType() &#123; return &quot;icon&quot;; &#125;&#125; 3.å®žçŽ° IconStyle ç»§æ‰¿è‡ª Styleï¼Œå°è£… icon è‡ªèº«çš„ç‰¹æœ‰æ ·å¼å±žæ€§ã€‚ 123456789101112public class IconStyle extends Style &#123; protected String titleColor; public String getTitleColor() &#123; return titleColor; &#125; public void setTitleColor(String titleColor) &#123; this.titleColor = titleColor; &#125;&#125; 4.è°ƒç”¨æŽ¥å£èŽ·å–ä¸šåŠ¡æ•°æ®åŽï¼Œå‡†å¤‡æž„é€ ç»„ä»¶æ ‘ï¼Œå…ˆæž„é€ å¸ƒå±€å®¹å™¨å¯¹è±¡ï¼Œè®¾ç½®æ ·å¼ï¼Œæä¾›ä¸€ä¸ªé»˜è®¤çš„ render å¯¹è±¡ã€‚ 12345678910FiveColumnContainer fiveColumnContainer = new FiveColumnContainer();fiveColumnContainer.setId(&quot;icon&quot;);FlowStyle style = new FlowStyle();style.setBackgroundColor(&quot;#FFFFFF&quot;);style.setPadding(6, 12, 11, 12);style.setMargin(-80, 0, -26, 0);style.setCols(new float[]&#123;10.1f, 102.1f&#125;);style.sethGap(6);style.setzIndex(5);fiveColumnContainer.setStyle(style); 5.æ ¹æ®æ•°æ®æž„é€  Icon ç»„ä»¶å¯¹è±¡ï¼Œå¹¶è®¾ç½®æ ·å¼å’Œå±žæ€§ã€‚ 1234567891011121314for (int i = 0; i &lt; 5; i++) &#123; IconStyle iconStyle = new IconStyle(); iconStyle.setTitleColor(&quot;#FF0000&quot;); if (i == 1) &#123; iconStyle.setDisableReuse(true); &#125; Icon icon = new Icon(); icon.setStyle(iconStyle); icon.setId(String.valueOf(i)); icon.setTitle(&quot;icon_&quot; + i); icon.setImgUrl(&quot;https://gw.alicdn.com/tfs/TB1ISdWSFXXXXbFXXXXXXXXXXXX-146-147.png&quot;); icon.setAction(&quot;https://www.tmall.com/&quot;); fiveColumnContainer.addChild(icon);&#125; 6.è°ƒç”¨ render æ–¹æ³•è¾“å‡ºæ•°æ®è¿”å›žç»™ TACã€‚ 12Map&lt;String, Object&gt; result = (Map&lt;String, Object&gt;) fiveColumnContainer.render();resultList.add(result); ä¸Šè¿°æµç¨‹æ€»ç»“èµ·æ¥å¦‚å›¾ï¼š]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç»„ä»¶çš„åŠ¨æ€åŒ–æ–¹æ¡ˆ-Tangram2.0]]></title>
    <url>%2Fposts%2F270f0900.html</url>
    <content type="text"><![CDATA[Tangram 2.0 åº“Android Tangram-Android Virtualview-Android iOS Tangram-iOS Virtualview-iOS èƒŒæ™¯æŠ€æœ¯èƒŒæ™¯ä¸€ç›´ä»¥æ¥ï¼Œæ— çº¿åº”ç”¨éƒ½åœ¨ä¸æ–­å¯»æ±‚åŠ¨æ€åŒ–é¡µé¢çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨é˜¿é‡Œå·´å·´é›†å›¢å†…ï¼Œé™¤äº†é£Žé£Žç«ç«åœ° Weex é¡¹ç›®å¤–ï¼Œå„ä¸ªå›¢é˜Ÿéƒ½æœ‰å¤§å¤§å°å°çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬çŒ«å®¢ä¸€ç›´æŒç»­åŸºäºŽ Tangram æ–¹æ¡ˆæ¥è§£å†³é¡µé¢åŠ¨æ€åŒ–çš„é—®é¢˜ï¼Œç„¶è€Œåœ¨é¢å¯¹æŒç»­å‡çº§çš„ä¸šåŠ¡éœ€æ±‚æ—¶ï¼ŒåŽŸæœ‰çš„å¼€å‘æ¨¡å¼ä¹Ÿæ…¢æ…¢å˜å¾—æ— æ³•èƒœä»»ï¼Œæœ¬å¹´åº¦ä»¥æ¥ï¼Œæˆ‘ä»¬ Tangram ä½“ç³»åœ¨å„ä¸ªå±‚é¢éƒ½è¿›è¡Œäº†å¤§è·¨åº¦çš„æŠ€æœ¯å‡çº§ï¼ˆå¯å‚è€ƒæ–‡ç« å¤©çŒ«APPæ”¹ç‰ˆä¹‹é¦–é¡µæž¶æž„&amp;å¼€å‘æ¨¡å¼å…¨é¢å‡çº§ï¼‰ï¼Œæœ¬æ–‡å†è¯¦ç»†ä»‹ç»ä¸€ä¸‹é¡µé¢å†…ç»„ä»¶ä½“ç³»å‡çº§æ–¹æ¡ˆã€‚ è€ç»„ä»¶ä½“ç³»çš„é—®é¢˜åœ¨åŽŸæœ‰çš„ Tangram ä½“ç³»é‡Œï¼Œä¸»è¦è§£å†³äº†é¡µé¢å†…å¸ƒå±€ç»“æž„çš„åŠ¨æ€åŒ–èƒ½åŠ›ï¼Œé€šè¿‡ json æ•°æ®æè¿°å¯ä»¥ç»„åˆå‡ºå¸¸ç”¨çš„é¡µé¢ç»“æž„ã€‚ç„¶è€Œé¡µé¢å†…å…·ä½“çš„å‘ä½æ ·å¼ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä¸šåŠ¡ç»„ä»¶ï¼Œæ˜¯é‡‡ç”¨å¸¸è§„çš„ native ä»£ç å¼€å‘çš„ï¼Œé™¤éžå†…ç½®äº†è¶³å¤Ÿå¤šçš„é€»è¾‘ï¼Œå¦åˆ™ç»„ä»¶çš„æ ·å¼è°ƒæ•´æˆ–è€…æ–°ç»„ä»¶çš„å¼€å‘éƒ½è¦å‘å¸ƒç‰ˆæœ¬ï¼Œæ— æ³•æ»¡è¶³ä¸šåŠ¡èŠ‚å¥ï¼›å½“ç„¶æˆ‘ä»¬ä¹Ÿå°è¯•è¿‡ä½¿ç”¨ Weex å¼€å‘ä¸šåŠ¡ç»„ä»¶è´´åˆ°é¡µé¢ä¸Šï¼Œä½†æ˜¯åœ¨ä½“éªŒå’Œæ€§èƒ½ä¸Šè¿˜æ˜¯æœ‰è¾ƒå¤§çš„ç¼ºé™·ã€‚ æ‰€ä»¥æ€»ç»“èµ·æ¥ï¼Œå°±æ˜¯ä¸¤ç‚¹é—®é¢˜ï¼š ä¸šåŠ¡ç»„ä»¶æ— æ³•åŠ¨æ€æ›´æ–°ï¼› çŽ°æœ‰çš„åŠ¨æ€ç»„ä»¶æ–¹æ¡ˆè¾ƒé‡ï¼Œå½±å“æ€§èƒ½å’Œä½“éªŒï¼› è§£å†³ä¹‹é“å¯¹äºŽä¸Šè¿°é—®é¢˜ï¼Œè§£å†³æ€è·¯å…¶å®žæ˜¯æ¯”è¾ƒé€šç”¨çš„ï¼Œè¦åŠ¨æ€æ›´æ–°ç•Œé¢è§†å›¾ï¼Œå°±éœ€è¦ç”¨ç•Œé¢æ¨¡æ¿æè¿°è§†å›¾ï¼Œæ¨¡æ¿ä¸Žæ•°æ®åˆ†ç¦»ã€‚å°†åŠ¨æ€ä¸‹å‘çš„æ¨¡æ¿å’Œæ•°æ®åœ¨ç«¯ä¸Šç»‘å®šæ¸²æŸ“ã€‚è¦æå‡æ€§èƒ½ï¼Œä¹Ÿæœ‰ä¸‰å¤§ç€åŠ›ç‚¹â€”â€”å‡å°‘è§†å›¾å±‚çº§ä¸Žä¸ªæ•°ï¼Œç»“æž„å°½é‡æ‰å¹³åŒ–ï¼›å¼‚æ­¥å¸ƒå±€æ¸²æŸ“æµç¨‹ï¼Œè§£æ”¾ä¸»çº¿ç¨‹è®¡ç®—é‡ï¼›å›žæ”¶ä¸Žå¤ç”¨ç»„ä»¶ï¼Œå‡å°‘å†…å­˜å¼€é”€ã€‚ æ–°çš„ç»„ä»¶ä½“ç³»å°±æ˜¯åœ¨æ¨¡æ¿åŒ–æè¿°è§†å›¾ï¼ŒåŠ¨æ€æ›´æ–°è§†å›¾ï¼Œå‡å°‘è§†å›¾å±‚çº§å‡ ä¸ªæ–¹é¢åšæ–‡ç« ï¼Œè‡³äºŽç»„ä»¶çš„å›žæ”¶å¤ç”¨ï¼Œåˆ™æ˜¯åœ¨é¡µé¢çº§åˆ«ç»Ÿä¸€å®Œæˆï¼›è€Œå¼‚æ­¥å¸ƒå±€æ¸²æŸ“æµç¨‹ï¼Œåˆ™æ˜¯åŽç»­çš„ä¼˜åŒ–æ–¹å‘ã€‚ æ–°çš„ç»„ä»¶æ–¹æ¡ˆç§°ä¹‹ä¸º VirtualViewï¼Œç®€ç§° VVï¼Œä¹Ÿç§°ä¸º2.0ç»„ä»¶ï¼Œå®ƒçš„è®¾è®¡éµå¾ªä»¥ä¸‹å‡ ä¸ªæ€è·¯ï¼š ä»¥äº†ä¸€ç§è™šæ‹ŸåŒ–å¼€å‘åŸºç¡€ç»„ä»¶çš„æŠ€æœ¯ï¼Œä½¿ç”¨æ–¹åªè¦æŒ‰ç…§æŒ‡å®šåè®®å®žçŽ°ä¸€ä¸ªåŸºç¡€ç»„ä»¶çš„å°ºå¯¸è®¡ç®—ã€ç»˜åˆ¶é€»è¾‘ã€å¸ƒå±€é€»è¾‘ï¼Œå³èƒ½å®žçŽ°åœ¨å®¿ä¸»å®¹å™¨çš„ canvas é‡Œå®žçŽ°ç›´æŽ¥ç»˜åˆ¶ UI å†…å®¹çš„ï¼Œè®©æœ€ç»ˆæ¸²æŸ“å‡ºæ¥çš„è§†å›¾ç»“æž„å‘ˆçŽ°æ‰å¹³åŒ–ï¼Œæå‡ç»„ä»¶æ¸²æŸ“æ€§èƒ½ã€‚åŒæ—¶ä¸ºäº†è§£å†³è™šæ‹ŸåŒ– View å¸¦æ¥çš„åŽŸç”Ÿ View çš„èƒ½åŠ›æŸå¤±çš„é—®é¢˜ï¼Œå®ƒæ”¯æŒåŠ è½½å’Œæ¸²æŸ“åŽŸç”ŸåŸºç¡€ç»„ä»¶ï¼Œä¸¤è€…ç»„åˆäº§ç”ŸåˆåŠ›ï¼Œæ—¢èƒ½å‡å°‘å¼€é”€ï¼Œåˆèƒ½æ»¡è¶³ç‰¹æ®Šåœºæ™¯ä¸‹çš„ä¸šåŠ¡éœ€æ±‚ã€‚ å†…ç½®å®žçŽ°äº†ä¸€ç³»åˆ—åŸºç¡€ç»„ä»¶ï¼Œå¯ä»¥è®©ä½¿ç”¨æ–¹ç›´æŽ¥ä¸Šæ‰‹å°è¯•ï¼›è€Œæ­å»ºä¸šåŠ¡ç»„ä»¶çš„æ–¹å¼é‡‡ç”¨ XML æ¨¡æ¿æ¥ç¼–å†™ï¼Œé…å¥— XML æ¨¡æ¿æ›´æ–° sdkï¼Œè¿™ä½¿å¾—ä¸šåŠ¡ç»„ä»¶åŠ¨æ€æ›´æ–°æˆä¸ºäº†å¯èƒ½ã€‚XML æ¨¡æ¿é‡Œè¿˜æ”¯æŒå†™æ•°æ®ç»‘å®šçš„è¡¨è¾¾å¼ï¼Œåœ¨æ ·å¼åŠ¨æ€åŒ–ã€æ•°æ®åŠ¨æ€åŒ–çš„åœºæ™¯ä¸‹èƒ½éžå¸¸æ–¹ä¾¿åœ°å®žçŽ°ä¸šåŠ¡éœ€æ±‚ã€‚ XML æ¨¡æ¿é‡Œæ¶‰åŠåˆ°çš„åŸºç¡€èŠ‚ç‚¹ã€å±žæ€§ã€å­—ç¬¦ä¸²èµ„æºç­‰éƒ½è¢«æå‰ç¼–è¯‘æˆäºŒè¿›åˆ¶èµ„æºï¼Œå®¢æˆ·ç«¯åŠ è½½é€šè¿‡åŠ è½½ç¼–è¯‘åŽçš„æ¨¡æ¿æ•°æ®æ¥åˆ›å»ºè§†å›¾ã€‚ è®¾è®¡æ–¹æ¡ˆæ•´ä½“æž¶æž„å…ˆä»Žæ•´ä½“ä¸Šé¢„è§ˆä¸€ä¸‹æ•´ä¸ªæ–¹æ¡ˆçš„å¤§ä½“ç»“æž„ï¼š è‡ªä¸‹å¾€ä¸Šï¼Œè‡ªå·¦å¾€å³çš„é¡ºåºä»‹ç»å„ä¸ªæ¨¡å—ï¼š åŸºç¡€æ¨¡æ¿åŠ è½½å™¨è´Ÿè´£åŠ è½½ç¼–è¯‘åŽçš„æ¨¡æ¿æ•°æ®ï¼Œæ¯”å¦‚ä»Žæ–‡ä»¶åŠ è½½ã€ä»ŽäºŒè¿›åˆ¶æ•°ç»„åŠ è½½ã€ä»Žç½‘ç»œåŠ è½½ï¼Œå°†ç¼–è¯‘åŽçš„äºŒè¿›åˆ¶æ¨¡æ¿æ•°æ®åŠ è½½åˆ°å†…å­˜é‡Œï¼Œé€šè¿‡ç»„ä»¶åŠ è½½å™¨ã€å­—ç¬¦ä¸²èµ„æºåŠ è½½å™¨ã€è¡¨è¾¾å¼èµ„æºåŠ è½½å™¨ç­‰æå–å‡ºå…¶ä¸­çš„èµ„æºã€‚ æ¡†æž¶è¿˜å†…ç½®äº†åŸºç¡€ç»„ä»¶ï¼ŒåŒ…æ‹¬åŽŸå­çš„åŸºç¡€ç»„ä»¶å¦‚æ–‡æœ¬ã€å›¾ç‰‡ã€çº¿æ¡ï¼Œè¿˜åŒ…æ‹¬å¸ƒå±€ç±»åž‹çš„åŸºç¡€ç»„ä»¶ï¼Œæ¯”å¦‚çº¿æ€§å¸ƒå±€ã€å¸§å¸ƒå±€ã€ç½‘æ ¼å¸ƒå±€ç­‰ï¼›æ¯ä¸€ç§ç±»åž‹çš„åŸºç¡€ç»„ä»¶æä¾›äº†åŽŸç”Ÿ Native ç‰ˆæœ¬çš„å®žçŽ°å’Œè™šæ‹ŸåŒ–çš„å®žçŽ°ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„åŸºç¡€ç»„ä»¶æ³¨å†Œåˆ°æ¡†æž¶å†…éƒ¨ï¼Œç»„ä»¶æž„é€ å™¨é€šè¿‡åŠ è½½å¥½çš„ç»„ä»¶æ•°æ®ï¼Œæ¥æž„é€ å‡ºæ•´ä¸ªä¸šåŠ¡ç»„ä»¶æ ‘ï¼Œå¹¶æ·»åŠ åˆ°å®¿ä¸»å®¹å™¨é‡Œï¼Œå¯¹äºŽè™šæ‹Ÿç»„ä»¶ï¼Œä¼šåœ¨æ¸²æŸ“é˜¶æ®µç»˜åˆ¶åˆ°å®¿ä¸»å®¹å™¨çš„ canvas ä¸Šï¼Œè€ŒåŽŸç”Ÿç»„ä»¶ä¼šä½œä¸ºå­ View æ·»åŠ åˆ°å®¿ä¸»å®¹å™¨é‡Œã€‚ æ¡†æž¶å†…éƒ¨ä¹Ÿæä¾›äº†åŸºç¡€çš„è¡¨è¾¾å¼èƒ½åŠ›ï¼Œä¸»è¦åˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯ç®€å•çš„æ•°æ®ç»‘å®šè¡¨è¾¾å¼ï¼Œä¸€ç§æ˜¯ç®€å•çš„é€»è¾‘è¡¨è¾¾å¼ï¼›å‰è€…ç”¨äºŽåœ¨æ¨¡æ¿é‡Œå†™è¡¨è¾¾å¼ç»‘å®šæ•°æ®åˆ°åŸºç¡€ç»„ä»¶çš„å±žæ€§ä¸Šï¼Œè€ŒåŽè€…æä¾›äº†ä¸€ç§è½»é‡çº§çš„é€»è¾‘è¿ç®—èƒ½åŠ›ï¼Œå¯ä»¥è®¿é—®åŸºç¡€ç»„ä»¶çš„å±žæ€§å¹¶æ›´æ–°ï¼Œå®žçŽ°ä¸€äº›è”åŠ¨æ•ˆæžœã€‚ äº‹ä»¶ç®¡ç†ï¼Œæœ¬æ–¹æ¡ˆèšç„¦äºŽç•Œé¢çš„åŠ¨æ€åŒ–åˆ›å»ºï¼Œä½†å¯¹ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ä¸»è¦è¿˜æ˜¯é åŽŸç”Ÿçš„ä»£ç å®žçŽ°ï¼Œå› æ­¤å¤„ç†ç»„ä»¶çš„ä¸€äº›å¸¸ç”¨äº¤äº’äº‹ä»¶ï¼Œæ¯”å¦‚ç»„ä»¶çš„ç‚¹å‡»ã€é•¿æŒ‰ã€è§¦æ‘¸ã€æ›å…‰äº‹ä»¶ç­‰ã€‚äº‹ä»¶ç®¡ç†æ¨¡å—è´Ÿè´£å°†å¤–éƒ¨çš„å„ä¸ªç±»åž‹çš„äº‹ä»¶å¤„ç†æ¨¡å—æ³¨å†Œè¿›æ¥ï¼Œå½“ç»„ä»¶å‘ç”Ÿç‰¹å®šçš„äº‹ä»¶æ—¶ï¼Œæ‰¾åˆ°å¯¹åº”ç±»åž‹çš„å¤„ç†æ¨¡å—æ¥è°ƒç”¨å¤„ç†ã€‚ å®¿ä¸»å®¹å™¨ç®¡ç†è´Ÿè´£å¯¹è™šæ‹Ÿç»„ä»¶çš„å®¿ä¸»å®¹å™¨è¿›è¡Œæž„å»ºå’Œå›žæ”¶å¤ç”¨çš„ç®¡ç†ã€‚å½“åŽŸæœ‰çš„ç»„ä»¶æ»‘å‡ºå±å¹•åŽï¼Œå¯ä»¥å›žæ”¶åˆ°ç»Ÿä¸€çš„æ± å­é‡Œï¼Œä»¥ä¾¿åŽç»­å¤ç”¨ã€‚ ç»„ä»¶ç®¡ç†è´Ÿè´£å¯¹åŸºç¡€ç»„ä»¶è¿›è¡Œæž„å»ºå’Œå›žæ”¶å¤ç”¨ç®¡ç†ã€‚å½“åŽŸæœ‰çš„ç»„ä»¶æ»‘å‡ºå±å¹•åŽï¼Œé™¤äº†å®¿ä¸»å®¹å™¨å¯ä»¥å›žæ”¶å¤ç”¨ï¼Œå†…éƒ¨çš„åŸºç¡€ç»„ä»¶å¯¹è±¡ä¹Ÿå¯ä»¥å›žæ”¶åˆ°ç»Ÿä¸€çš„æ± å­é‡Œã€‚å¦‚æžœç»„ä»¶çš„æ± å­æ˜¯ç©ºçš„ï¼Œåˆ™åœ¨éœ€è¦çš„æ—¶å€™æž„é€ æ–°çš„ç»„ä»¶ã€‚ æ‰©å±•æ¨¡å—ç®¡ç†åˆ™ç”¨äºŽæ³¨å†Œå¤–éƒ¨åŠŸèƒ½æ‰©å±•æ¨¡å—ï¼Œå½“å†…ç½®çš„åŸºç¡€èƒ½åŠ›æ— æ³•æ»¡è¶³ä¸šåŠ¡åœºæ™¯çš„æ—¶å€™ï¼Œé€šè¿‡æ‰©å±•æ¨¡å—æ³¨å†Œç‰¹å®šçš„åŠŸèƒ½æ¨¡å—ï¼Œç„¶åŽç¼–å†™è‡ªå®šä¹‰åŸºç¡€ç»„ä»¶æ¥å®žçŽ°ç‰¹å®šåŠŸèƒ½ã€‚ æ¨¡æ¿å­˜å‚¨ã€æ¨¡æ¿æ ¡éªŒã€æ¨¡æ¿æ›´æ–°ã€æ¨¡æ¿æ³¨å†Œåˆ™åˆ†åˆ«è´Ÿè´£æ¨¡æ¿æ•°æ®çš„å­˜å‚¨ã€å®‰å…¨æ€§æ ¡éªŒã€ç‰ˆæœ¬æ ¡éªŒã€ä¸Žæ›´æ–°æ£€æŸ¥ä¸Žæ–°æ¨¡æ¿ä¸‹è½½ã€æ³¨å†Œæ¨¡æ¿æ•°æ®åˆ°æ¡†æž¶ï¼Œæ•´ä½“ååŒæ¥å®Œæˆä¸šåŠ¡ç»„ä»¶çš„åŠ¨æ€æ›´æ–°ï¼Œå®ƒå¹¶ä¸ä¸Žæ•´ä¸ªæ¸²æŸ“ç»„ä»¶çš„æ ¸å¿ƒæ¡†æž¶è€¦åˆï¼Œå¯ä»¥ä½œä¸ºç‹¬ç«‹æ¨¡å—å­˜åœ¨ã€‚ é…å¥—çš„å·¥å…·å’ŒæœåŠ¡ä¸»è¦åŒ…æ‹¬æ¨¡æ¿ç¼–å†™å·¥å…·ã€æ¨¡æ¿ç¼–è¯‘å·¥å…·ã€æ¨¡æ¿æ›´æ–°æœåŠ¡.æ¨¡æ¿ç¼–å†™å·¥å…·ç”¨äºŽ XML çš„æ¨¡æ¿çš„ç¼–è¾‘ï¼Œå¹¶è°ƒç”¨ç¼–è¯‘æ¨¡å—ç¼–è¯‘æ¨¡æ¿ï¼Œæ¨¡æ¿é‡Œæ¶‰åŠåˆ°çš„ç»„ä»¶èµ„æºã€å­—ç¬¦ä¸²èµ„æºã€è¡¨è¾¾å¼èµ„æºä¼šåˆ†åˆ«ç”¨å¯¹åº”çš„æ¨¡å—å¤„ç†ã€‚ç¼–è¯‘åŽç«¯æ¨¡æ¿æ•°æ®å¯ä»¥ä¸Šä¼ åˆ°æ¨¡æ¿æ›´æ–°æœåŠ¡é‡Œï¼Œå®¢æˆ·ç«¯è°ƒç”¨ç›¸åº”çš„æŽ¥å£æ£€æŸ¥æ˜¯å¦æœ‰æ›´æ–°ã€‚ è¿è¡Œæµç¨‹æœ‰äº†ä¸Šè¿°åŸºç¡€ï¼Œå½“æˆ‘ä»¬è¦å¼€å‘æ–°çš„ä¸šåŠ¡ç»„ä»¶çš„æ—¶å€™ï¼Œé™¤äº†æœ‰æ–°å¢ž Native é€»è¾‘çš„éœ€æ±‚åœºæ™¯ï¼ˆæ¯”å¦‚æ–°å¢žè§†é¢‘åŠŸèƒ½ï¼‰ï¼Œå¤§éƒ¨åˆ†éœ€æ±‚éƒ½å¯ä»¥å‘Šåˆ«åŽŸç”Ÿä»£ç çš„ç¼–å†™ï¼Œè½¬è€Œç¼–å†™ç»„ä»¶æ¨¡æ¿ã€‚ å…ˆç¼–å†™ä¸šåŠ¡ç»„ä»¶çš„æ¨¡æ¿ã€‚ é€šè¿‡å·¥å…·å°†æ¨¡æ¿æ•°æ®ç¼–è¯‘æˆäºŒè¿›åˆ¶æ•°æ®ã€‚ å®¢æˆ·ç«¯åŠ è½½äºŒè¿›åˆ¶æ•°æ®å¯ä»¥æœ‰ä¸¤ç§è·¯å¾„ï¼Œä¸€æ˜¯ç›´æŽ¥æ‰“åŒ…åˆ°å®¢æˆ·ç«¯é‡Œï¼Œå†™ä»£ç åŠ è½½ï¼Œå¦ä¸€ç§æ˜¯å‘å¸ƒåˆ°æ¨¡æ¿ç®¡ç†åŽå°ï¼Œå®¢æˆ·ç«¯åœ¨çº¿æ›´æ–°åˆ°æ¨¡æ¿æ•°æ®ã€‚ ä¸è®ºå“ªç§æ–¹å¼åŠ è½½äºŒè¿›åˆ¶æ•°æ®ï¼Œå®¢æˆ·ç«¯æŽ¥ä¸‹æ¥çš„å·¥ä½œæ˜¯è§£æžäºŒè¿›åˆ¶æ•°æ®é‡Œï¼Œæ¯”å¦‚æ ¡éªŒç‰ˆæœ¬å·ï¼Œåˆæ³•æ€§ï¼Œè¯»å–å¤´ä¿¡æ¯ç­‰ç­‰ã€‚ ç­‰è¦çœŸæ­£åˆ›å»ºç»„ä»¶çš„æ—¶å€™ï¼Œæ ¹æ®ç»„ä»¶åç§°æ‰¾åˆ°äºŒè¿›åˆ¶æ•°æ®ï¼Œä»Žä¸­è§£æžå¹¶åˆ›å»ºå‡ºçœŸæ­£çš„ç»„ä»¶æ¨¡åž‹æ•°æ®ã€‚ ä»Žæ¨¡æ¿é‡Œåˆ›å»ºåœ¨ç»„ä»¶å¾€å¾€ä¸å«æœ‰ä¸šåŠ¡æ•°æ®ï¼Œå› ä¸ºä¸šåŠ¡æ•°æ®æ˜¯åŠ¨æ€æ€§çš„ï¼Œç”¨æˆ·éœ€è¦èŽ·å–åˆ°ä¸šåŠ¡æ•°æ®ç»‘å®šåˆ°ç»„ä»¶ä¸Šï¼Œç»„ä»¶çš„å±žæ€§é‡Œå¯ä»¥å†™è¡¨è¾¾å¼æ¥æŒ‡å®šä½¿ç”¨å“ªä¸€ä¸ªæ•°æ®å­—æ®µã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸Šè¿°æž¶æž„åŠæµç¨‹é‡Œï¼Œæè¿°äº†ä¸€ä¸ªå®Œæ•´çš„å®žè·µç»éªŒï¼Œä½†å¯¹äºŽæœ¬æ–¹æ¡ˆæ¥è¯´ï¼Œæ ¸å¿ƒç‚¹åœ¨äºŽæä¾›äº†å¯¹ç»„ä»¶ä»Žç¼–å†™åˆ°å±•ç¤ºæµç¨‹çš„å®žçŽ°ï¼Œå…¶å‘¨è¾¹çš„é…å¥—è®¾æ–½ï¼Œå¹¶æ²¡æœ‰å†…ç½®åœ¨æ¡†æž¶é‡Œï¼ŒåŒ…æ‹¬å®¢æˆ·ç«¯ä¸Šçš„æ¨¡æ¿ç®¡ç†ã€æ›´æ–°ã€æ³¨å†Œæ¨¡å—ï¼Œä»¥åŠåŽç«¯çš„æ¨¡æ¿å‘å¸ƒæœåŠ¡ï¼Œå› ä¸ºè¿™äº›æ¨¡å—å¾€å¾€æ¶‰åŠä¸šåŠ¡é€»è¾‘ï¼Œä¸”ä¸Žå„ä¸ªåº”ç”¨çš„åŸºç¡€è®¾æ–½ç›¸å…³ï¼Œå†…ç½®åœ¨æ¡†æž¶é‡Œåè€Œé™åˆ¶äº†ä½¿ç”¨æ–¹çš„æŽ¥å…¥ã€‚è¿™é‡Œæä¾›ä¸€äº›å¯ä¾›å‚è€ƒçš„ç»éªŒï¼š æ¨¡æ¿ç®¡ç†åŽå°è¦èƒ½å¯¹æ¨¡æ¿çš„è¿›è¡Œå‘å¸ƒã€æ›´æ–°ï¼Œå¹¶ä¸”æŒ‰ç…§å®¢æˆ·ç«¯ç‰ˆæœ¬ã€å¹³å°ã€ç»„ä»¶ç‰ˆæœ¬ã€ç”Ÿæ•ˆä¼˜å…ˆçº§ç­‰å‡ ä¸ªç»´åº¦æ¥ç®¡ç†æ¨¡æ¿ï¼› æ¨¡æ¿æ–‡ä»¶å¯ä»¥å­˜æ”¾åˆ° CDN ä¸Šä¾›å®¢æˆ·ç«¯ä¸‹è½½ï¼Œç®¡ç†å¹³å°åªæ˜¯å¯¹æ¯”ä¸‹å‘è¿œä¿¡æ¯ï¼›ä¸‹è½½æ–‡ä»¶è¦åšè¶³å¤Ÿçš„æ ¡éªŒï¼› å®¢æˆ·ç«¯è¦å†…ç½®ä¸€ä»½æ‰“åº•çš„æ¨¡æ¿æ•°æ®ï¼Œè¿™æ ·ä¸è‡³äºŽå› ä¸ºæ¨¡æ¿ä¸å­˜åœ¨è€Œå‡ºçŽ°ç©ºçª—ï¼› å®¢æˆ·ç«¯å¯æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¨¡æ¿ç®¡ç†æ¨¡å—ï¼Œé¢å‘å…¨åº”ç”¨æä¾›æœåŠ¡ï¼Œåœ¨åˆé€‚çš„æ—¶å€™è¯·æ±‚ç®¡ç†å¹³å°æ£€æŸ¥æœ‰æ²¡æœ‰æ›´æ–°ï¼Œæ¯”å¦‚å¯åŠ¨ã€ç”¨æˆ·åˆ·æ–°ã€æŽ¨é€æŒ‡ä»¤çš„åˆ°è¾¾ï¼Œå¹¶ä¸”è´Ÿè´£ä¸‹è½½ã€æ–‡ä»¶æ ¡éªŒã€é€šçŸ¥é¡µé¢åˆ·æ–°ç­‰åŠŸèƒ½ï¼›é¡µé¢åˆ·æ–°å¯ä»¥åšä¼˜å…ˆçº§åŒºåˆ†ï¼Œæ¯”å¦‚é«˜ä¼˜å…ˆçº§çš„æ¨¡æ¿æ›´æ–°ä¸»åŠ¨åŽ»åˆ·æ–°ä¸‹é¡µé¢ï¼Œè€Œä½Žä¼˜å…ˆçº§çš„å¯ä»¥ç­‰äºŒæ¬¡è¿›å…¥é¡µé¢æˆ–è€…åˆ·æ–°é¡µé¢çš„æ—¶å€™ç”Ÿæ•ˆï¼› å‡ ä¸ªæ ¸å¿ƒè®¾è®¡ç»„ä»¶çš„åŸºç¡€æ¨¡åž‹å¯¹äºŽç»„ä»¶ï¼Œæˆ‘ä»¬åšäº†å¦‚ä¸‹å®šä¹‰ï¼Œæ¯ä¸€ä¸ªåŸºç¡€çš„åŽŸå­ç»„ä»¶æˆ–è€…å®¹å™¨ç»„ä»¶éƒ½ä¼šæœ‰ä»¥ä¸‹å±žæ€§ï¼Œè‡ªå®šä¹‰çš„åŸºç¡€ç»„ä»¶åº”å½“ç»§æ‰¿è‡ªåŸºç¡€å®šä¹‰å¹¶åšæ‰©å±•ã€‚ åç§° ç±»åž‹ é»˜è®¤å€¼ æè¿° id int 0 ç»„ä»¶id layoutWidth int/float/enum(match_parent/wrap_content) 0 ç»„ä»¶çš„å¸ƒå±€å®½åº¦ï¼Œä¸ŽAndroidé‡Œçš„æ¦‚å¿µç±»ä¼¼ï¼Œå†™ç»å¯¹å€¼çš„æ—¶å€™è¡¨ç¤ºç»å¯¹å®½é«˜ï¼Œmatch_parentè¡¨ç¤ºå°½å¯èƒ½æ’‘æ»¡çˆ¶å®¹å™¨æä¾›çš„å®½é«˜ï¼Œwrap_contentè¡¨ç¤ºæ ¹æ®è‡ªèº«å†…å®¹çš„å®½é«˜æ¥å¸ƒå±€ layoutHeight int/float/enum(match_parent/wrap_content) 0 ç»„ä»¶çš„å¸ƒå±€å®½åº¦ï¼Œä¸ŽAndroidé‡Œçš„æ¦‚å¿µç±»ä¼¼ï¼Œå†™ç»å¯¹å€¼çš„æ—¶å€™è¡¨ç¤ºç»å¯¹å®½é«˜ï¼Œmatch_parentè¡¨ç¤ºå°½å¯èƒ½æ’‘æ»¡çˆ¶å®¹å™¨æä¾›çš„å®½é«˜ï¼Œwrap_contentè¡¨ç¤ºæ ¹æ®è‡ªèº«å†…å®¹çš„å®½é«˜æ¥å¸ƒå±€ layoutGravity enum(left/right/top/bottom/v_center/h_center) left|top æè¿°ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å¯¹é½æ–¹å¼ï¼Œleftï¼šé å·¦ï¼Œrightï¼šé å³ï¼Œtopï¼šé ä¸Šï¼Œbottomï¼šé åº•ï¼Œv_centerï¼šåž‚ç›´æ–¹å‘å±…ä¸­ï¼Œh_centerï¼šæ°´å¹³æ–¹å‘å±…ä¸­ï¼Œå¯ç”¨æˆ–ç»„åˆæè¿° autoDimX int/float 1 ç»„ä»¶å®½é«˜æ¯”è®¡ç®—çš„æ¨ªå‘å€¼ autoDimY int/float 1 ç»„ä»¶å®½é«˜æ¯”è®¡ç®—çš„ç«–å‘å€¼ autoDimDirection enum(X/Y/NONE) NONE ç»„ä»¶åœ¨å¸ƒå±€ä¸­çš„åŸºå‡†æ–¹å‘ï¼Œç”¨äºŽè®¡ç®—ç»„ä»¶çš„å®½é«˜æ¯”ï¼Œä¸ŽautoDimXã€autoDimYé…åˆä½¿ç”¨ï¼Œè®¾ç½®äº†è¿™ä¸‰ä¸ªå±žæ€§æ—¶ï¼Œåœ¨è®¡ç®—ç»„ä»¶å°ºå¯¸æ—¶å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚å½“autoDimDirection=Xæ—¶ï¼Œç»„ä»¶çš„å®½åº¦ç”±layoutWidthå’Œçˆ¶å®¹å™¨å†³ç­–å†³å®šï¼Œä½†é«˜åº¦ = width * (autoDimY / autoDimX)ï¼Œå½“autoDimDirection=Yæ—¶ï¼Œç»„ä»¶çš„é«˜åº¦ç”±layoutHeightå’Œçˆ¶å®¹å™¨å†³ç­–å†³å®šï¼Œä½†å®½åº¦ = height * (autoDimX / autoDimY) minWidth int/float 0 æœ€å°å®½åº¦ minHeight int/float 0 æœ€å°é«˜åº¦ paddingLeft int/float 0 å·¦å†…è¾¹è· paddingRight int/float 0 å³å†…è¾¹è· paddingTop int/float 0 ä¸Šå†…è¾¹è· paddingBottom int/float 0 ä¸‹å†…è¾¹è· layoutMarginLeft int/float 0 å·¦å¤–è¾¹è· layoutMarginRight int/float 0 å³å¤–è¾¹è· layoutMarginTop int/float 0 ä¸Šå¤–è¾¹è· layoutMarginBottom int/float 0 ä¸‹å¤–è¾¹è· background int 0 èƒŒæ™¯è‰² backgroundImage string null èƒŒæ™¯å›¾åœ°å€ borderWidth int 0 è¾¹æ¡†å®½åº¦ borderColor int 0 è¾¹æ¡†é¢œè‰² visibility enum(visible/invisible/gone) visible å¯è§æ€§ï¼Œä¸ŽAndroidé‡Œçš„æ¦‚å¿µç±»ä¼¼ï¼Œvisibleï¼šå¯è§ï¼Œinvisibleï¼šä¸å¯è§ï¼Œä½†å ä½ï¼Œgoneï¼šä¸å¯è§ä¹Ÿä¸å ä½ gravity enum(left/right/top/bottom/v_center/h_center) left|top æè¿°å†…å®¹çš„å¯¹é½ï¼Œæ¯”å¦‚æ–‡å­—åœ¨æ–‡æœ¬ç»„ä»¶é‡Œçš„ä½ç½®ã€åŽŸå­ç»„ä»¶åœ¨å®¹å™¨é‡Œçš„ä½ç½®ï¼Œleftï¼šé å·¦ï¼Œrightï¼šé å³ï¼Œtopï¼šé ä¸Šï¼Œbottomï¼šé åº•ï¼Œv_centerï¼šåž‚ç›´æ–¹å‘å±…ä¸­ï¼Œh_centerï¼šæ°´å¹³æ–¹å‘å±…ä¸­ï¼Œå¯ç”¨æˆ–ç»„åˆæè¿° æ–¹æ¡ˆå†…å†…ç½®äº†ä¸€ç³»åˆ—åŸºç¡€ç»„ä»¶ï¼Œå®Œæ•´çš„ç»„ä»¶åˆ—è¡¨å¦‚ä¸‹ï¼š è™šæ‹Ÿæ–‡æœ¬ç»„ä»¶ åŽŸç”Ÿæ–‡æœ¬ç»„ä»¶ è™šæ‹Ÿå›¾ç‰‡ç»„ä»¶ åŽŸç”Ÿå›¾ç‰‡ç»„ä»¶ è™šæ‹Ÿçº¿æ¡ç»„ä»¶ åŽŸç”Ÿçº¿æ¡ç»„ä»¶ è™šæ‹Ÿè¿›åº¦æ¡ç»„ä»¶ è™šæ‹Ÿå›¾å½¢ç»„ä»¶ åŽŸç”Ÿç¿»é¡µå¸ƒå±€å®¹å™¨ç»„ä»¶ åŽŸç”Ÿæ»šåŠ¨å¸ƒå±€å®¹å™¨ç»„ä»¶ è™šæ‹Ÿå¸§å¸ƒå±€å®¹å™¨ç»„ä»¶ è™šæ‹Ÿæ¯”ä¾‹å¸ƒå±€å®¹å™¨ç»„ä»¶ è™šæ‹Ÿç½‘æ ¼å¸ƒå±€å®¹å™¨ç»„ä»¶ åŽŸç”Ÿç½‘æ ¼å¸ƒå±€å®¹å™¨ç»„ä»¶ è™šæ‹Ÿçº¿æ€§å¸ƒå±€å®¹å™¨ç»„ä»¶ åŽŸç”Ÿçº¿æ€§å¸ƒå±€å®¹å™¨ç»„ä»¶ è™šæ‹Ÿç»„ä»¶ä¸Šæ–‡æåˆ°è™šæ‹ŸåŒ–å¼€å‘çš„ç»„ä»¶çš„æŠ€æœ¯ï¼Œç®€ç§°è™šæ‹Ÿç»„ä»¶ã€‚å¾ˆå¤šåšæ€§èƒ½ä¼˜åŒ–çš„æ–¹æ¡ˆã€å»ºè®®éƒ½ä¼šæåˆ°é‡‡ç”¨ Canvas ç›´æŽ¥ç»˜åˆ¶çš„æ–¹å¼æ¥å‡å°‘ View çš„ä¸ªæ•°ï¼Œè™šæ‹Ÿå°†è¿™ä¸ªå¼€å‘æµç¨‹åšäº†æŠ½è±¡ä¸Žè§„èŒƒï¼Œå¯ä»¥è®©å¼€å‘äººå‘˜åƒå®šä¹‰åŽŸç”Ÿç»„ä»¶ä¸€æ ·å®šä¹‰è™šæ‹Ÿç»„ä»¶ã€‚ å…·ä½“æ¥è®²ï¼ŒåŸºç¡€ç»„ä»¶éœ€è¦éµå¾ªä¸€ä¸ªæŽ¥å£çš„è§„èŒƒï¼Œè¿™ä¸ªå£å®šä¹‰äº†æ¸²æŸ“è¿‡ç¨‹ä¸­éœ€è¦çš„ä¸‰ä¸ªæµç¨‹ï¼šè®¡ç®—å°ºå¯¸é˜¶æ®µã€å¸ƒå±€é˜¶æ®µã€ç»˜åˆ¶é˜¶æ®µï¼›å®šä¹‰è¿™ä¸ªä¸‰ä¸ªé˜¶æ®µæ˜¯ä¸ºäº†æ›´å¥½çš„ä¸Žç³»ç»Ÿå¹³å°ç‰¹åˆ«æ˜¯ Android å¹³å°å¯¹æŽ¥ï¼Œå› ä¸ºåœ¨ Android åŽŸç”Ÿå¹³å°ä¸‹ä¹Ÿä¼šæœ‰è¿™ä¸ªä¸‰ä¸ªé˜¶æ®µï¼Œåœ¨ iOS å¹³å°ä¸‹åˆ™ä¹Ÿéœ€è¦æŒ‰ç…§æœ¬æ–¹æ¡ˆé‡Œè¦æ±‚çš„è§„èŒƒåŽ»å¤„ç†ã€‚è®¡ç®—å°ºå¯¸é˜¶æ®µå®šä¹‰è¦è§¦å‘ä¸€æ¬¡å°ºå¯¸è®¡ç®—ï¼Œéœ€è¦å¯¹å…¶åŒ…å«çš„å­ç»„ä»¶è¿›è¡Œè®¡ç®—è°ƒç”¨ï¼›å¸ƒå±€é˜¶æ®µå®šä¹‰äº†è¦è§¦å‘ä¸€æ¬¡å¸ƒå±€ï¼Œå°†å­å…ƒç´ æŒ‰ç…§è®¡ç®—å¥½çš„ä½ç½®å°ºå¯¸æŽ’å¸ƒï¼Œä¹Ÿè¦å¯¹åŒ…å«çš„å­ç»„ä»¶è¿›è¡Œå¸ƒå±€è°ƒç”¨ï¼›ç»˜åˆ¶é˜¶æ®µå®šä¹‰è¦è¿›è¡Œè§†å›¾ç»˜åˆ¶ï¼Œå½“ç„¶ä¹Ÿè¦å¯¹èµ·åŒ…å«çš„å­ç»„ä»¶è¿›è¡Œç»˜åˆ¶çš„è°ƒç”¨ï¼›å¯¹äºŽè™šæ‹Ÿç»„ä»¶ï¼Œå°±åœ¨è¿™äº›æŽ¥å£é‡Œå®žçŽ°ç›¸å…³é€»è¾‘ï¼Œè€Œå¯¹äºŽåŽŸç”Ÿç»„ä»¶ï¼Œåœ¨è¿™äº›æŽ¥å£å®žçŽ°é‡Œè°ƒç”¨åŽŸç”Ÿç»„ä»¶çš„å¯¹åº”é€»è¾‘ã€‚ ä¸è®ºæ˜¯è™šæ‹ŸåŒ–ç»„ä»¶è¿˜æ˜¯åŽŸç”Ÿç»„ä»¶ï¼Œéƒ½é‡‡ç”¨ä¸Šè¿°ç›¸åŒçš„æ¨¡åž‹æ¥å®šä¹‰ï¼Œå†åŠ ä¸Šç›¸åŒçš„å°ºå¯¸è®¡ç®—æŽ¥å£ã€å¸ƒå±€æŽ¥å£ã€ç»˜åˆ¶æŽ¥å£ï¼Œè¿™æ ·å¯¹äºŽå®¿ä¸»å®¹å™¨æ¥è¯´ï¼ŒåŒ…è£…åœ¨å†…éƒ¨çš„ç»„ä»¶å°±ä¸åˆ†è™šæ‹ŸåŒ–è¿˜æ˜¯åŽŸç”Ÿï¼Œä¸€è§†åŒä»ï¼Œæš´éœ²ç»™å¤–é¢çš„æŽ¥å£ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œåªè¦å°†å®¿ä¸»å®¹å™¨åƒæ™®é€šçš„ View ä¸€æ ·æ·»åŠ åˆ°çš„è§†å›¾ç•Œé¢ä¸Šï¼Œå°±å¯ä»¥åœ¨åŽç»­çš„æ¸²æŸ“è¿‡ç¨‹ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚å¦‚æžœè™šæ‹Ÿç»„ä»¶ä½¿ç”¨çš„è¶Šå¤šï¼ŒView çš„ä¸ªæ•°å°±è¶Šå°‘ï¼Œå¯¹äºŽç³»ç»Ÿæ¥è¯´å±‚çº§è¶Šæ‰å¹³ã€‚ä»¥ä¸‹å›¾ç¤ºä¾‹çš„ç»„ä»¶æ¥è¯´ï¼Œæœ€ç»ˆå‘ˆçŽ°çš„ View åªæœ‰å®¿ä¸»å®¹å™¨å’Œä¸¤ä¸ªå›¾ç‰‡ç»„ä»¶ï¼Œå¦‚æžœå°†å›¾ç‰‡ä¹Ÿç”¨è™šæ‹ŸåŒ–çš„æ–¹å¼å®žçŽ°ï¼Œæœ€ç»ˆ View åªæœ‰ä¸€ä¸ªå®¿ä¸»å®¹å™¨ï¼Œè€Œç•Œé¢ä»ç„¶ä¿æŒä¸å˜ã€‚ äºŒè¿›åˆ¶æ–‡ä»¶çš„æ ¼å¼é€šè¿‡ XML ç¼–å†™çš„ä¸šåŠ¡ç»„ä»¶ï¼Œå¹¶ä¸ç›´æŽ¥åœ¨å®¢æˆ·ç«¯é‡Œè¿è¡Œä½¿ç”¨ï¼Œè€Œæ˜¯å…ˆè¿›è¡Œä¸€æ¬¡äºŒè¿›åˆ¶åºåˆ—åŒ–æ“ä½œï¼ŒåŽŸå§‹çš„ XML æ¨¡æ¿æ–‡ä»¶ä¿å­˜æˆæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±æ˜¯ä»¥çº¯æ–‡æœ¬çš„å½¢å¼å­˜åœ¨ï¼Œä¼šåŒ…å«å¾ˆå¤šå†—ä½™ä¿¡æ¯ï¼Œæ¯”å¦‚ç©ºæ ¼ã€æ¢è¡Œã€è¿˜æœ‰é‡å¤å‡ºçŽ°çš„å­—ç¬¦ä¸²ç­‰ï¼Œæ–‡ä»¶ä½“ç§¯æ¯”è¾ƒå¤§ï¼Œä»¥xmlè§£æžå™¨åŽ»è§£æžçš„æ—¶å€™ï¼Œä¹Ÿä¼šéœ€è¦å¤§é‡å­—ç¬¦ä¸²æ“ä½œï¼Œæ•ˆçŽ‡å’Œæ€§èƒ½ä¸èƒ½è¾¾åˆ°æœ€ä¼˜ã€‚è€Œå°†å®ƒç¼–è¯‘æˆäºŒè¿›åˆ¶æ ¼å¼ï¼Œä¼šé¿å…è¿™äº›é—®é¢˜ï¼Œæ¯”å¦‚æ–‡ä»¶é‡å¤å‡ºçŽ°çš„å­—ç¬¦ä¸²åªä¿ç•™ä¸€ä»½ï¼Œé€šè¿‡å­—ç¬¦ä¸²ç´¢å¼•åŽ»å¼•ç”¨å®ƒï¼Œæ‰€æœ‰çš„ç»„ä»¶ç±»åž‹ä¹Ÿéƒ½ä¼šè¢«è½¬æ¢æˆä¸€ä¸ªæ•°å­—ç´¢å¼•ï¼Œåœ¨å®¢æˆ·ç«¯å†…é€šè¿‡æ•°å­—ç´¢å¼•åè¿‡æ¥æ‰¾åˆ°å¯¹åº”çš„ç±»å®žä¾‹åŒ–ã€‚è¿™æ ·æ–‡ä»¶æ ¼å¼ä¼šéžå¸¸ç´§å‡‘ï¼Œä½“ç§¯æ›´å°ã€‚æ•´ä¸ªè®¾è®¡ä¹Ÿå€Ÿé‰´äº† Android ç³»ç»Ÿç¼–è¯‘æ¨¡æ¿æ–‡ä»¶çš„æ€è·¯ã€‚å®ƒçš„å…·ä½“æ ¼å¼è¯´æ˜Žå¦‚ä¸‹ï¼š æŒ‰ç…§å›¾ä¸­ä»Žå·¦å¾€å³ã€ä»Žä¸Šå¾€ä¸‹çš„é¡ºåºåˆ†åˆ«è¯´æ˜Žæ¯ä¸ªæ®µçš„ä½œç”¨ï¼š å¼€å§‹5ä¸ªå­—èŠ‚å›ºå®šä¸º ALIVVï¼›ç›¸å½“äºŽæˆ‘ä»¬çš„æ–‡ä»¶æ ¼å¼çš„ä¸€ä¸ªæ ‡è®°ã€‚ ç‰ˆæœ¬å·åˆ†ä¸‰ä¸ªï¼Œåˆ†åˆ«ä¸ºä¸»ç‰ˆæœ¬å·ï¼Œæ¬¡ç‰ˆæœ¬å·å’Œä¿®è®¢ç‰ˆæœ¬å·ï¼Œå‡ä¸º 2 ä¸ªå­—èŠ‚ï¼›åœ¨æ— é‡å¤§é‡æž„æ›´æ–°æ—¶ï¼Œå‰ä¸¤ä½ä¸€èˆ¬ä¸å˜ï¼Œç¬¬ä¸‰ä½ç”¨äºŽç»„ä»¶çš„ä¸šåŠ¡çº§åˆ«å˜æ›´å‡çº§ï¼› ç»„ä»¶åŒºçš„èµ·å§‹ä½ç½®å’Œé•¿åº¦ï¼Œå‡ä¸º 4 ä¸ªå­—èŠ‚ï¼›è¡¨ç¤ºè¿™ä»½æ–‡ä»¶é‡Œç»„ä»¶åŒºæ•°æ®ä»Žç¬¬å‡ ä¸ªå­—èŠ‚å¼€å§‹ï¼Œå®ƒæ€»å…±æœ‰å¤šå°‘ä¸ªå­—èŠ‚ï¼Œè¿™æ ·è§£æžè¿™ä»½æ•°æ®çš„æ—¶å€™èƒ½ç›´æŽ¥å°†æ–‡ä»¶æŒ‡é’ˆå®šä½åˆ°ç‰¹å®šä½ç½®æ¥è¯»å–æ•°æ®ã€‚ å­—ç¬¦ä¸²åŒºçš„èµ·å§‹ä½ç½®å’Œé•¿åº¦ï¼Œå‡ä¸º 4 ä¸ªå­—èŠ‚ï¼›è¡¨ç¤ºè¿™ä»½æ–‡ä»¶é‡Œå­—ç¬¦ä¸²æ•°æ®ä»Žç¬¬å‡ ä¸ªå­—èŠ‚å¼€å§‹ï¼Œå®ƒæ€»å…±æœ‰å¤šå°‘ä¸ªå­—èŠ‚ã€‚ è¡¨è¾¾å¼åŒºçš„èµ·å§‹ä½ç½®å’Œé•¿åº¦ï¼Œå‡ä¸º 4 ä¸ªå­—èŠ‚ï¼›è¡¨ç¤ºè¿™ä»½æ–‡ä»¶é‡Œå­—ç¬¦ä¸²æ•°æ®ä»Žç¬¬å‡ ä¸ªå­—èŠ‚å¼€å§‹ï¼Œå®ƒæ€»å…±æœ‰å¤šå°‘ä¸ªå­—èŠ‚ã€‚ æ•°æ®åŒºçš„èµ·å§‹ä½ç½®å’Œé•¿åº¦ï¼Œå‡ä¸º 4 ä¸ªå­—èŠ‚ï¼›è¡¨ç¤ºè¿™ä»½æ–‡ä»¶é‡Œé™„åŠ æ•°æ®ä»Žç¬¬å‡ ä¸ªå­—èŠ‚å¼€å§‹ï¼Œå®ƒæ€»å…±æœ‰å¤šå°‘ä¸ªå­—èŠ‚ã€‚ç›®å‰è¿™ä¸€åŒºå—æ˜¯ä½œä¸ºä¸€ç§ä¿ç•™åŒºï¼Œå®žé™…è¿˜æœªä½¿ç”¨åˆ°ã€‚ å½“å‰æ–‡ä»¶æ‰€å±žé¡µç¼–ç ï¼Œ2 ä¸ªå­—èŠ‚ï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªé¡µï¼ˆä¿ç•™ä½¿ç”¨ï¼‰ å½“å‰æ–‡ä»¶ä¾èµ–é¡µçš„ä¸ªæ•°ä¸º 2 ä¸ªå­—èŠ‚ï¼ŒåŽé¢ä¸ºä¾èµ–é¡µçš„ Idï¼Œä¾èµ–é¡µä¸ªæ•°å¤§äºŽ 0 è¡¨ç¤ºè¯¥é¡µç”¨åˆ°äº†å…¶ä»–é¡µçš„èµ„æºæˆ–è€…ä»£ç ï¼Œåœ¨è¯¥é¡µåŠ è½½ä¹‹å‰éœ€è¦ç¡®ä¿ä¾èµ–é¡µå¿…é¡»å·²ç»åŠ è½½ï¼›ï¼ˆä¿ç•™ä½¿ç”¨ï¼‰ ç»„ä»¶åŒºå¼€å§‹ï¼Œå‰ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºæ–‡ä»¶é‡Œä¸šåŠ¡ç»„ä»¶ä¸ªæ•°ï¼Œç›®å‰ä¸€ä¸ª XML æ¨¡æ¿ç¼–è¯‘æˆä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæ•…å…¶å€¼å›ºå®šä¸º 1ã€‚æ¯ä¸ªä¸šåŠ¡ç»„ä»¶å‰ 2 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸šåŠ¡ç»„ä»¶åç§°å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ŒåŽé¢ä¸ºæŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²å­—èŠ‚æ•°æ®ï¼›ç´§æŽ¥ç€æ˜¯ 2 ä¸ªå­—èŠ‚çš„ç¼–è¯‘åŽç»„ä»¶äºŒè¿›åˆ¶æµé•¿åº¦ï¼ŒåŽé¢ä¸ºäºŒè¿›åˆ¶ä»£ç ï¼› å­—ç¬¦ä¸²åŒºå¼€å§‹ï¼Œå‰4ä¸ªå­—èŠ‚è¡¨ç¤ºå­—ç¬¦ä¸²ä¸ªæ•°ï¼Œåœ¨æˆ‘ä»¬çš„æ¡†æž¶é‡Œï¼Œä¼šå†…ç½®ä¸€äº›ç³»ç»Ÿçº§åˆ«çš„å­—ç¬¦ä¸²èµ„æºï¼Œæ¯”å¦‚ä¸Šæ–‡5.2å¼€ç«¯è¡¨æ ¼é‡Œæåˆ°çš„é‚£äº›å±žæ€§åï¼Œè¿™äº›å­—ç¬¦ä¸²ä¸ç”¨åºåˆ—åŒ–åˆ°äºŒè¿›åˆ¶æ–‡ä»¶é‡Œï¼Œè€Œæ¨¡æ¿æ–‡ä»¶é‡Œå‡ºçŽ°çš„éžç³»ç»Ÿå­—ç¬¦ä¸²æ‰ä¼šä½œä¸ºèµ„æºåºåˆ—åŒ–åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ã€‚æ¯ä¸ªå­—ç¬¦ä¸²èµ„æºå‰ 4 ä¸ªå­—èŠ‚å­—ç¬¦ä¸²ç´¢å¼• Id å³å®ƒçš„ hashCodeï¼ŒåŽé¢ 2 ä¸ªè‡ªå·±ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå†åŽé¢ä¸ºå¯¹åº”çš„å­—ç¬¦ä¸²ï¼› é€»è¾‘è¡¨è¾¾å¼ä»£ç è¡¨ã€‚å‰ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºé€»è¾‘è¡¨è¾¾å¼èµ„æºä¸ªæ•°ï¼Œæ¯ä¸ªè¡¨è¾¾å¼èµ„æºå‰4ä¸ªè‡ªå·±è¡¨ç¤ºè¡¨è¾¾å¼çš„ç´¢å¼•ï¼Œå®ƒæ˜¯è¡¨è¾¾å¼åŽŸå§‹å­—ç¬¦ä¸²çš„hashCodeï¼ŒåŽé¢ä¸¤ä¸ª2 ä¸ªå­—èŠ‚è¡¨ç¤ºè¡¨è¾¾å¼çš„é•¿åº¦ï¼ŒåŽé¢ä¸ºå¯¹åº”çš„è¡¨è¾¾å¼å†…å®¹ï¼Œå®ƒæ˜¯è¡¨è¾¾å¼æŒ‰ç…§å…³é”®å­—åˆ‡å‰²åŽçš„å­—ç¬¦ä¸²ç»“æž„ï¼› æ‰©å±•æ•°æ®æ®µæ˜¯ä¿ç•™ä¸ºç¬¬ä¸‰æ–¹æ‰©å±•ä½¿ç”¨ï¼› ç»‘å®šæ•°æ®çš„è¡¨è¾¾å¼å¼€å‘ä¸šåŠ¡ç»„ä»¶çš„æ—¶å€™ï¼ŒåŸºç¡€å±žæ€§æˆ–è€…æ ·å¼å¾€å¾€ä¸èƒ½åœ¨æ¨¡æ¿é‡Œç›´æŽ¥å†™æ­»ï¼Œè€Œæ˜¯éœ€è¦ä»Žæ•°æ®é‡ŒèŽ·å–ï¼Œæ‰€ä»¥å¼•å…¥äº†ç”¨æˆ·æ•°æ®ç»‘å®šçš„è¡¨è¾¾å¼ï¼Œè¯­æ³•å’Œå®žçŽ°ä¸Šç›®å‰æ¯”è¾ƒç®€å•ï¼Œå‚è€ƒäº†å¾ˆå¤šåŒç±»çš„è®¾è®¡ï¼Œå°½å¯èƒ½ç¬¦åˆå¼€å‘äººå‘˜çš„ç›´è§‰ã€‚ è®¿é—®æ•°æ®å±žæ€§çš„è¡¨è¾¾å¼ è¯­æ³•ä¸Šä»¥ ${ å¼€å¤´ï¼Œä»¥ } ç»“æŸã€‚å¯¹äºŽMapï¼Œé€šè¿‡ . æ“ä½œç¬¦è¿›è¡Œè®¿é—®ï¼Œå¯¹äºŽ Array æˆ–è€… List é€šè¿‡ [] æ“ä½œç¬¦è¿›è¡Œè®¿é—®ã€‚ æ¯”å¦‚ï¼š 12$&#123;benefitImgUrl&#125;$&#123;data[0].benefitImgUrl&#125; æ¡ä»¶è¡¨è¾¾å¼ ç”¨æ¥ç»™é‚£äº›éœ€è¦æ ¹æ®æ•°æ®ä¸­æŸä¸ªå­—æ®µæ¥è®¾ç½®å€¼çš„å±žæ€§ï¼Œè¯­æ³•ä¸Šä»¥ @{ å¼€å¤´ï¼Œä»¥ } ç»“æŸï¼Œä¸­é—´éƒ¨åˆ†ä¸ºè¡¨è¾¾å¼çš„å…·ä½“å†…å®¹ã€‚ 1æ¡ä»¶è¡¨è¾¾å¼ ? ç»“æžœè¡¨è¾¾å¼[1] : ç»“æžœè¡¨è¾¾å¼[2] å½“æ¡ä»¶è¡¨è¾¾å¼æˆç«‹çš„æ—¶å€™ï¼Œä½¿ç”¨ç»“æžœè¡¨è¾¾å¼[1]ï¼Œå¦åˆ™ä½¿ç”¨ç»“æžœè¡¨è¾¾å¼[2]ã€‚ å…¶ä¸­ï¼š æ¡ä»¶è¡¨è¾¾å¼æ”¯æŒå¸ƒå°”ç±»åž‹ã€å­—ç¬¦ä¸²ç±»åž‹ã€JSONObjectã€JSONArrayã€‚ ä»¥ä¸‹åœºæ™¯å‡ä¸º falseï¼š å¸ƒå°”ç±»åž‹å€¼ä¸º false å­—ç¬¦ä¸²ä¸º null æˆ–è€… â€œâ€ æˆ–è€… â€œnullâ€ å­—ç¬¦ä¸² â€œfalseâ€ æˆ–è€… â€œFALSEâ€ JSONObject ä¸ºç©ºæˆ– JSONObject.NULL JSONArray é•¿åº¦ä¸º 0 å­—æ®µä¸å­˜åœ¨ æ¯”å¦‚ï¼š 1@&#123;$&#123;logoUrl&#125; ? visible : invisible &#125; è€ƒè™‘åˆ°ç¯‡å¹…é™åˆ¶ï¼Œä¸èƒ½å°†ä¸Šè¿°æž¶æž„å’Œæµç¨‹ä¸­çš„æ¯ä¸€ç»†èŠ‚å®Œå…¨å±•å¼€ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒè‹¹æžœæ ¸è¿™é‡Œçš„æ–‡æ¡£ã€‚ æ•ˆæžœä¸Ž Tangram åŠ TAC ç»“åˆVirtualView æ–¹æ¡ˆæ˜¯ Tangram çš„æžå¤§è¡¥å……ï¼Œå¯ä»¥è§£å†³80%åœºæ™¯ä¸‹çš„åŠ¨æ€åŒ–éœ€æ±‚ï¼Œè€Œ Tangram ä¾èµ–çš„æ•°æ®åˆ™é€šè¿‡ TAC æä¾›è§£å†³ï¼Œä¸‰è€…ç»“åˆå¯ä»¥å½¢æˆä¸€ä¸ªé—­çŽ¯ï¼Œè®©ä¸€ä¸ªå¼€å‘ä»Žç«¯åˆ°ç«¯åœ°è§£å†³æ•´å—ä¸šåŠ¡çš„å¼€å‘ã€‚ ç»„ä»¶åŠ¨æ€ä¸‹å‘ä»¥åŒåä¸€æœŸé—´ä¸ºä¾‹ï¼Œ90%çš„åŒåä¸€ä¸šåŠ¡ç»„ä»¶éƒ½æ˜¯åŠ¨æ€ä¸‹å‘çš„ï¼Œä¸”éšæ—¶å¯æ ¹æ®ä¸šåŠ¡èŠ‚å¥è°ƒæ•´ã€‚ å±•æœ›å°½ç®¡åœ¨åŠŸèƒ½æµç¨‹ä¸Šå·²ç»é€æ­¥ç¨³å®šï¼Œèƒ½æ‰¿è½½èµ·æ—¥å¸¸åŠå¤§ä¿ƒçš„éœ€æ±‚å˜æ›´ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆè¿˜æ˜¯æœ‰å¾ˆå¤šä¸è¶³ä¹‹å¤„çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬æœŸæœ›æ›´é«˜çš„è¿è¡Œæ•ˆçŽ‡ã€æ›´åŠ æ‰å¹³åŒ–çš„UIç»“æž„ã€æ›´åŠ æ–¹ä¾¿çš„å¼€å‘ä½“éªŒï¼Œå¯¹æ­¤ä¹Ÿåšäº†æ›´è¿›ä¸€æ­¥çš„è§„åˆ’å»ºè®¾ï¼š åŠŸèƒ½ è®¡åˆ’ æä¾›æ›´åŠ å®Œå–„çš„æ–‡æ¡£å’Œæ•™ç¨‹ã€Demoï¼Œå†…å¤–ç‰ˆæœ¬åŒæ­¥ï¼Œå»ºç«‹ä»¥ github ä¸ºä¸­å¿ƒçš„è¿­ä»£å¼€å‘æœºåˆ¶ 17å¹´12æœˆ ç»„ä»¶åˆ›å»ºã€å¸ƒå±€è®¡ç®—ã€æ•°æ®ç»‘å®šæœºåˆ¶ä¼˜åŒ–ï¼Œæå‡æ€§èƒ½ 18å¹´1æœˆ é‡æž„æ¨¡æ¿ç¼–è¯‘å·¥å…·ï¼Œæå‡ç¼–è¯‘å¼€å‘ä½“éªŒ 18å¹´1æœˆ æä¾›é¢„è§ˆæœåŠ¡ï¼Œæå‡å¼€å‘æ•ˆçŽ‡ 18å¹´3æœˆ æä¾›é…å¥—çš„åŽç«¯æ•°æ®æœåŠ¡ä¸ŽåŸºç¡€è®¾æ–½ï¼Œå³ TAC å¹³å°å¼€æ”¾ 18å¹´3æœˆ é™„å½•Tangram 2.0 ä¸»è¦æ›´æ–°è¯´æ˜Ž ç»„ä»¶æ¨¡åž‹çš„æ¦‚å¿µå‡çº§ï¼Œä»ŽåŽŸæ¥çš„ã€Žå¡ç‰‡ã€+ã€Žç»„ä»¶ã€å‡çº§æˆã€Žå¸ƒå±€ã€+ã€Žç»„ä»¶ã€ï¼Œå³åŽŸæ¥çš„ã€Žå¡ç‰‡ã€è®¤ä¸ºæ˜¯ä¸€ç§å…·æœ‰å¸ƒå±€èƒ½åŠ›çš„ç»„ä»¶ï¼Œå…·å¤‡åµŒå¥—å¦ä¸€ç»„ä»¶çš„èƒ½åŠ›ï¼› é¡µé¢ç»“æž„ä¼˜åŒ–ï¼Œé¡µé¢ä¸‹å¯ä»¥ç›´æŽ¥æŒ‚è½½ç»„ä»¶ï¼Œä¸éœ€è¦åµŒå¥—ä¸€å±‚å¸ƒå±€ï¼› ç»„ä»¶ç±»åž‹çš„è¯­ä¹‰åŒ–ï¼Œä»ŽåŽŸæ¥çš„ 1ã€2ã€3ã€4â€¦ç­‰æ•°å­—æžšä¸¾ç±»åž‹å®šä¹‰ï¼Œå‡çº§æˆå­—ç¬¦ä¸²ç±»åž‹çš„å®šä¹‰ï¼Œå…¼å®¹è§£æžåŽŸæœ‰çš„æ•°å­—æžšä¸¾å®šä¹‰ï¼› æ›´å¥½çš„åµŒå¥—å¸ƒå±€å®žçŽ°ï¼Œæµå¼å¸ƒå±€åœ¨æ¨¡åž‹æè¿°ä¸Šæ”¯æŒå¤šå±‚æ¬¡çš„åµŒå¥—ï¼Œå¹¶ä¼˜åŒ–äº† Android ç«¯ä¸Šçš„å®žçŽ°æ–¹å¼ï¼› margin åŽ»é‡çš„å®žçŽ°ï¼ŒåŒä¸€å±‚çº§çš„å®¹å™¨ç»„ä»¶æˆ–åŽŸå­ç»„ä»¶ç›´æŽ¥ï¼Œæ”¯æŒå¤–è¾¹è· margin çš„åŽ»é‡ï¼Œä½¿å¾—åŠ¨æ€æ•°æ®ä¸‹æŽ§åˆ¶é—´è·æ›´æ–¹ä¾¿ï¼› æ”¯æŒ zIndexï¼Œæ— è®ºæ˜¯å®¹å™¨ç»„ä»¶è¿˜æ˜¯åŽŸå­ç»„ä»¶ï¼Œæ”¯æŒåœ¨å…¶æ ·å¼ä¸Šé…ç½® zIndexï¼ŒzIndex å€¼è¶Šå¤§ï¼Œç»˜åˆ¶å±‚æ¬¡è¶Šé«˜ï¼› å‡çº§ç»„ä»¶å¼€å‘æ–¹å¼ï¼Œå¼•å…¥åŠ¨æ€åŒ–ç»„ä»¶å¼€å‘æŠ€æœ¯ï¼Œæå‡ç»„ä»¶åŠ¨æ€æ€§ï¼Œå®žçŽ°ç»„ä»¶æ ·å¼çš„é«˜æ•ˆæ¸²æŸ“ä¸ŽåŠ¨æ€æ›´æ–°ï¼› å…¶ä»–ç›¸å…³çš„ Tangram åº“Android vlayout UltraViewPager iOS LazyScrollView å·¥å…· virtualview_tools]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Tangram Androidè®¾è®¡è¯´æ˜Ž]]></title>
    <url>%2Fposts%2F1867f4d.html</url>
    <content type="text"><![CDATA[å‰è¨€å‰æ®µæ—¶é—´å¼€æºäº†å›¢é˜Ÿå†…çš„vlayouté¡¹ç›®ï¼Œä»Ž Github ä¸Šåé¦ˆæ¥çœ‹ï¼Œè¿˜æ˜¯æ·±å—æ¬¢è¿Žã€‚ ä½†å¦‚æžœä»…ä»…æ˜¯é‡‡ç”¨ vlayout æ­å»ºé¡µé¢ï¼Œä½¿ç”¨èµ·æ¥è¿˜ä¸æ˜¯ç‰¹åˆ«çµæ´»ï¼Œåœ¨æ­¤åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘ä»¬å°è£…äº†ä¸€å¥—åŠ¨æ€åŒ–è°ƒæ•´ç•Œé¢çš„æ¨¡å—ï¼Œå‘½åä¸º Tangramï¼ŒçŽ°åœ¨åŒæ ·å·²å¼€æºâ€”â€”Tangram Androidå’ŒTangram iOSã€‚æˆ‘ä»¬å¸Œæœ›å°†å®ƒæ‰“é€ æˆæŸä¸€ç‰¹å®šé¢†åŸŸçš„è§£å†³æ–¹æ¡ˆï¼Œæé€Ÿä¸šåŠ¡å¼€å‘ã€‚ åŸºæœ¬æ¨¡åž‹åœ¨å‰é¢çš„æ–‡ç« ã€Šé¡µé¢åŠ¨æ€åŒ–çš„åŸºç¡€ â€”â€” Tangramã€‹é‡Œï¼Œå·²ç»é‡ç‚¹ä»‹ç»äº† Tangram é‡Œæ¶‰åŠçš„å‡ ä¸ªä¸»è¦æ¦‚å¿µå’Œæ¨¡åž‹è®¾è®¡ï¼Œè¿™é‡Œç®€å•é‡å¤ä¸€ä¸‹ï¼Œå°†é¡µé¢æ‹†åˆ†æˆä¸‰ä¸ªå±‚æ¬¡ï¼šé¡µé¢â€”â€”å¡ç‰‡â€”â€”ç»„ä»¶ã€‚é¡µé¢æŒ‡çš„å°±æ˜¯æ•´ä½“å¯æ»‘åŠ¨é¡µé¢å®žä½“ï¼›å¡ç‰‡æŒ‡çš„æ˜¯é¡µé¢å†…å¯æŒ‰è¡Œåˆ’åˆ†çš„ä¸€ä¸ªä¸€ä¸ªç‹¬ç«‹åŒºå—ï¼Œç»„ä»¶æŒ‡çš„æ˜¯å¡ç‰‡å†…éƒ¨ä¸€ä¸ªç‹¬ç«‹çš„ã€ä¸šåŠ¡çº§åˆ«çš„å•å…ƒï¼Œå®ƒå¯ä»¥æ˜¯ä¸€å¼ å›¾ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡å­— + å›¾çš„ç»„åˆã€‚å› æ­¤æ•´ä½“æ•´ä¸ªé¡µé¢å¯ä»¥è¿™æ ·æè¿°ï¼šä¸€ä¸ªé¡µé¢åµŒå¥—äº†å¤šä¸ªå¡ç‰‡ï¼Œä¸€ä¸ªå¡ç‰‡åµŒå¥—äº†å¤šä¸ªç»„ä»¶ã€‚Tangram ä½“ç³»å°±æ˜¯è§„èŒƒäº†è¿™ä¸‰å±‚çš„æ•°æ®ç»“æž„æè¿°ï¼Œå°†å…¶æ¸²æŸ“å‡ºä¸€å¼ é¡µé¢ã€‚ æž¶æž„æ•´ä½“çš„å±‚æ¬¡ç»“æž„å¦‚ä¸‹ï¼Œæˆ‘ä»¬è‡ªåº•å‘ä¸Šè¿›è¡Œè¯´æ˜Žï¼š æ•´ä¸ª Tangram æ¡†æž¶çš„é¡µé¢UIæ­å»ºåŸºäºŽ vlayout å’Œ UltraViewPagerã€‚vlayout ä¹‹å‰å·²ç»æåˆ°è¿‡äº†ï¼Œç”¨æ¥æž„å»ºå¤šç±»åž‹ã€å¤šå¸ƒå±€ç±»åž‹çš„ RecyclerViewï¼›UltraViewPager æ˜¯ ViewPager çš„ä¸€ç§æ‰©å±•ï¼Œæ•´åˆäº†å¤šç§ç‰¹æ€§ï¼Œæ¯”å¦‚æ¨ªå‘æ»‘åŠ¨ï¼Œç«–å‘æ»‘åŠ¨ï¼Œå¾ªçŽ¯æ»šåŠ¨ç­‰ï¼Œç”¨æ¥å®žçŽ° Tangram å†…éƒ¨æ‰€éœ€è¦çš„è½®æ’­æ»šåŠ¨å¡ç‰‡ï¼›è¿™ä¸¤ä¸ªéƒ½æ¯”è¾ƒç‹¬ç«‹ï¼Œå› æ­¤ç‹¬ç«‹æˆåº“å…ˆè¡Œå¼€æºäº†ï¼Œå³ä½¿ä¸ä½¿ç”¨ Tangramï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨å®ƒä»¬ã€‚ vlayout ä¸»è¦æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ LayoutManagerï¼Œå› æ­¤ Tangram è¿˜éœ€è¦æä¾›ä¸€ä¸ª RecyclerView å’Œ Adapter æ¥æ‰èƒ½é…åˆ vlayout è¿è¡Œã€‚è¿™é‡Œçš„ RecyclerView å¯ä»¥ç”±å¤–éƒ¨ä¸šåŠ¡æ–¹é€šè¿‡ TangramEngine æ³¨å…¥ï¼Œä¹Ÿå¯ä»¥å†…éƒ¨é»˜è®¤æž„é€ ã€‚GroupBasicAdapter åˆ™å°è£…äº† vlayout æ‰€éœ€è¦çš„ Adapter çš„é€»è¾‘ï¼Œç»„ä»¶çš„åˆ›å»ºã€ç»„ä»¶æ•°æ®çš„ç»‘å®šã€ç»„ä»¶ç±»åž‹çš„å®šä¹‰ç­‰éƒ½ç”±å®ƒè´Ÿè´£ã€‚ åœ¨ UI åŸºç¡€ä¹‹ä¸Šçš„ä¾¿æ˜¯å„ç§åŠŸèƒ½é€»è¾‘æ¨¡å—ï¼š TangramEngine æ˜¯æ ¸å¿ƒç±»ï¼Œå®ƒè´Ÿè´£ç»‘å®š RecyclerView åˆ°åº•å±‚ vlayoutï¼Œç»‘å®šé¡µé¢æ•°æ®ï¼Œæ“ä½œé¡µé¢æ•°æ®ï¼ˆåŒ…æ‹¬å¢žã€åˆ ã€æ”¹ï¼‰ï¼Œè¿˜æä¾›æ³¨å†Œå¤–éƒ¨æœåŠ¡çš„æŽ¥å£ã€‚ ServiceManager æ˜¯æœåŠ¡ç®¡ç†æ¨¡å—ï¼Œä¸è½®æ˜¯å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨åŠŸèƒ½æ¨¡å—ï¼Œéƒ½å¯ä»¥æ³¨å†Œåˆ°è¿™é‡Œï¼Œä¸€æ–¹é¢èƒ½è¢« Tangram å†…éƒ¨çš„å…¶ä»–æ¨¡å—è®¿é—®åˆ°ä½¿ç”¨ï¼Œå¦ä¸€æ–¹é¢è§£è€¦äº†æ¡†æž¶ä¸Žä¸šåŠ¡æ¨¡å—ã€‚ Bus æ˜¯äº‹ä»¶æ€»çº¿ï¼Œå®ƒåœ¨å†…éƒ¨ä¹Ÿè¢«æ³¨å†Œåˆ° ServieManagerï¼Œå†…éƒ¨æ¨¡å—å’Œä¸šåŠ¡ä½¿ç”¨æ–¹éƒ½å¯ä»¥ä½¿ç”¨å®ƒè¿›è¡Œé€šä¿¡ï¼Œè§£è€¦ä¸šåŠ¡ä»£ç ã€‚ DataParser è´Ÿè´£è§£æžæ•°æ®ï¼Œå®ƒå°†åŽŸå§‹æ•°æ®è§£æžæˆå¡ç‰‡ã€ç»„ä»¶çš„ model å¯¹è±¡ã€‚æ¡†æž¶é‡Œæä¾›çš„æ˜¯è§£æž JSON æ•°æ®çš„è§£æžå™¨ï¼Œä¹Ÿæ”¯æŒæ‰©å±•è§£æžå…¶ä»–ç±»åž‹çš„æ•°æ®ã€‚ DataResolver è´Ÿè´£è¯†åˆ«å¡ç‰‡ã€ç»„ä»¶å¹¶æž„å»ºå¯¹è±¡ï¼Œè§£æžå™¨è§£æžæ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦ä¾èµ–è¿™äº› ResolveråŽ»è¯†åˆ«æ•°æ®ä¸­çš„å¡ç‰‡æˆ–è€…ç»„ä»¶æ˜¯å¦åˆæ³•ï¼ŒResolver è¯†åˆ«çš„æ–¹å¼å°±æ˜¯åŽ»ç»„ä»¶åº“æˆ–è€…å¡ç‰‡åº“é‡Œå¯»æ‰¾è¿™äº›ç»„ä»¶æ˜¯å¦å·²ç»æ³¨å†Œè¿‡ã€‚ ä¸Žä¸šåŠ¡ç›¸å…³æ€§è¾ƒå¤§çš„å°±æ˜¯ç»„ä»¶åº“ã€å¡ç‰‡åº“ä»¥åŠç›¸å…³ä¸šåŠ¡æŽ¥å£ã€‚TangramBuilder æ˜¯ä¸šåŠ¡æ–¹æž„å»º TangramEngine çš„å…¥å£ã€‚ç»„ä»¶åº“é‡Œæ³¨å†Œäº†ä¸šåŠ¡æ–¹æ‰€éœ€æœ‰çš„ç»„ä»¶ï¼ŒTangram çš„å®žä¾‹æ˜¯ä¸€ä¸ªé¡µé¢ä¸€ä»½ï¼Œå› æ­¤æ¯ä¸ªä¸šåŠ¡æ–¹å¯ä»¥åˆ†åˆ«æ³¨å†Œå„è‡ªæ‰€éœ€è¦çš„ç»„ä»¶ï¼Œå½“ä¸šåŠ¡æ–¹ä½¿ç”¨ Tangram è¿›è¡Œä¸šåŠ¡å¼€å‘çš„æ—¶å€™ï¼Œä¸»è¦å·¥ä½œå¯èƒ½å°±åœ¨ç»„ä»¶çš„å¼€å‘ä¸Šã€‚å¡ç‰‡åº“æ³¨å†Œçš„æ˜¯å¡ç‰‡ç±»åž‹ï¼Œæ¡†æž¶é‡Œå·²ç»å†…ç½®äº†ä¸€ç³»åˆ—å¡ç‰‡ï¼Œå¦‚æžœä¸šåŠ¡æ–¹æœ‰éœ€è¦å¯ä»¥å•ç‹¬å†æ³¨å†Œç‰¹æ®Šç±»åž‹çš„å¡ç‰‡ã€‚è€Œ ClickSupportã€ExposureSupport ç­‰éƒ½æ˜¯è¾…åŠ©ä¸šåŠ¡å¼€å‘çš„åŠŸèƒ½æ¨¡å—ï¼Œå‰è€…å®šä¹‰äº†ç»„ä»¶ç‚¹å‡»å¤„ç†çš„æŽ¥å£ï¼ŒåŽè€…å®šä¹‰äº†ç»„ä»¶æ›å…‰å¤„ç†çš„æŽ¥å£ã€‚å®ƒä»¬éƒ½è¢«æ³¨å†Œåˆ° ServiceManager é‡Œï¼Œä¸šåŠ¡æ–¹åœ¨ç»„ä»¶æˆ–è€…é¡µé¢å†…éƒ½å¯ä»¥ä½¿ç”¨å®ƒä»¬ã€‚ åˆå§‹åŒ–æµç¨‹ åˆå§‹åŒ– Tangram çš„æµç¨‹å…¶å®žæ¯”è¾ƒç®€å•ï¼Œæ— éžå°±æ˜¯æž„é€  TangramEngine å¯¹è±¡ï¼Œæ³¨å†Œä¸šåŠ¡ç»„ä»¶æˆ–è€…å¡ç‰‡ï¼Œæ³¨å†ŒæœåŠ¡æ¨¡å—ï¼Œç»‘å®š RecyclerViewï¼Œæˆ‘ä»¬åœ¨æŽ¥å…¥æ–‡æ¡£â€”â€”æŽ¥å…¥Tangramä»£ç é‡Œè¯¦ç»†è¯´æ˜Žäº†æ­¥éª¤ã€‚è¿™é‡Œä¸ä¸€ä¸€èµ˜è¿°ï¼Œåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå„ä¸ªæ ¸å¿ƒæ¨¡å—ä¹Ÿéƒ½å®Œæˆäº†åˆå§‹åŒ–ã€‚ è¿è¡Œæµç¨‹åŸºæœ¬æµç¨‹å›¾ é¡µé¢æ•°æ®ç¤ºä¾‹12345678910111213141516171819202122232425262728293031323334353637[ &#123; "id": "banner1", "type": 1, "style": &#123; "aspectRatio": 3.223 &#125;, "items": [ &#123; "bizId":"item1", "type": 110, "msg": "info1" &#125;, &#123; "bizId":"item2", "type": 110, "msg": "info2" &#125; ] &#125;, &#123; "type": 1, "style": &#123; "aspectRatio": 3.223 &#125;, "items": [ &#123; "type": 10, "imgUrl": "https://gw.alicdn.com/tfs/TB1pdJFQpXXXXbUXpXXXXXXXXXX-750-243.png" &#125;, &#123; "type": 10, "imgUrl": "https://gw.alicdn.com/tfs/TB1pdJFQpXXXXbUXpXXXXXXXXXX-750-243.png" &#125; ] &#125;] æ•´ä¸ª Tangram å¯¹ç•Œé¢çš„åŠ¨æ€è°ƒæ•´æ˜¯é€šè¿‡æ•°æ®æ¥é©±åŠ¨çš„ï¼Œæ‰€ä»¥é¦–å…ˆè¦å°†åŽŸå§‹æ•°æ®ä¼ é€’ç»™ TangramEngineï¼Œç”±äºŽé›†å›¢ä½“ç³»å†…çš„æŽ¥å£éƒ½é‡‡ç”¨ JSON æ•°æ®ï¼ŒTangram æ¡†æž¶çš„é»˜è®¤è®¾è®¡ä¹Ÿæ˜¯æŽ¥æ”¶ JSON æ ¼å¼çš„æ•°æ®ï¼Œä¸è¿‡ä¹Ÿæ”¯æŒé€šè¿‡è‡ªå®šä¹‰ DataParser æå‰å°†å…¶ä»–æ ¼å¼çš„æ•°æ®è§£æžå¥½ä¹‹åŽå†ä¼ ç»™ TangramEngineã€‚ä»¥ä¸Šè¿°çš„ç¤ºä¾‹çš„ JSON æ•°æ®ä¸ºä¾‹ï¼Œä¸€ä¸ªé¡µé¢ä¸‹æŒ‚è½½äº†ä¸€ä¸ªå¡ç‰‡æ•°ç»„ï¼Œæ¯ä¸ªå¡ç‰‡éƒ½å®šä¹‰äº† idã€typeã€styleã€itemsèŠ‚ç‚¹ï¼›items å†…éƒ¨çš„æ•°ç»„å®šä¹‰çš„æ˜¯ç»„ä»¶æ•°æ®ï¼Œç»„ä»¶ä¹Ÿæœ‰typeã€bizId ç­‰ä¸šåŠ¡å­—æ®µæ•°æ®ã€‚ ä¸è®ºæ˜¯ä¼ é€’åŽŸå§‹ JSON æ•°æ®ç»™ TangramEngineè¿˜æ˜¯é€šè¿‡ç›´æŽ¥è§£æžåŽŸå§‹æ•°æ®ï¼Œéƒ½æ˜¯é€šè¿‡ DataParser æ¥å®Œæˆçš„ï¼Œå®ƒä¼šæŒ‰ç…§æ ‘åž‹ç»“æž„è§£æžå‡ºå¯¹åº”çš„å¡ç‰‡å’Œç»„ä»¶çš„ model å¯¹è±¡ï¼Œè§£æžè¿‡ç¨‹ä¾èµ–äºŽç›¸åº”çš„å¡ç‰‡ Resolver å’Œç»„ä»¶ Resolver æ¥è¯†åˆ«å¡ç‰‡ã€ç»„ä»¶æ˜¯å¦å·²æ³¨å†Œï¼Œå…³é”®ç‚¹å°±æ˜¯è¯†åˆ« type å­—æ®µã€‚è‹¥ç¢°åˆ°æ— æ³•è¯†åˆ«çš„ typeï¼Œåˆ™ä¸ä¼šè§£æžå‡ºå¯¹åº”çš„ model å¯¹è±¡ã€‚ è§£æžå®Œæˆä¹‹åŽä¼šå¾—åˆ°ä¸€ä¸ªå¡ç‰‡åˆ—è¡¨ï¼Œæ¯ä¸ªåˆ—è¡¨çš„å¡ç‰‡ model å…ƒç´ é‡ŒæŒæœ‰å®ƒæ‰€åŒ…å«çš„ç»„ä»¶åˆ—è¡¨ã€‚ model åˆ—è¡¨äº¤ç»™ GroupBasicAdapter è¿›è¡Œå¤„ç†ï¼Œé¦–å…ˆæå–å¡ç‰‡åˆ—è¡¨ï¼Œå°†åŒ…å«ç©ºç»„ä»¶åˆ—è¡¨çš„å¡ç‰‡è¿‡æ»¤æŽ‰ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä¸œè¥¿å¯ä»¥æ¸²æŸ“å±•ç¤ºï¼Œç„¶åŽåˆ›å»ºå‡º vlayout æ‰€éœ€è¦çš„ LayoutHelper åˆ—è¡¨ï¼Œè®¾ç½®å®ƒä»¬çš„æ ·å¼å±žæ€§ï¼Œè¿™æ ·å°±æ‰“é€šäº†é€šè¿‡ JSON æ•°æ®æœ€ç»ˆæŽ§åˆ¶å¸ƒå±€æŽ’ç‰ˆçš„æµç¨‹ã€‚ åŒæ—¶å°†æ‰€æœ‰çš„ç»„ä»¶ model æå–å‡ºæ¥æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„åˆ—è¡¨ï¼ŒçœŸæ­£äº¤ç»™ GroupBasicAdapter åŽ»æ¸²æŸ“æ•°æ®ï¼Œç»„ä»¶ model åˆ—è¡¨çš„å¤§å°å°±æ˜¯ GroupBasicAdapter çš„ item çš„å¤§å°ï¼Œ RecyclerView ä¹Ÿå°±ç›´æŽ¥åŠ è½½ç»„ä»¶è§†å›¾ï¼Œå¡ç‰‡ç›¸å¯¹äºŽåªè´Ÿè´£äº†å¸ƒå±€é€»è¾‘çš„æŽ§åˆ¶ï¼Œå¹¶æ²¡æœ‰ UI å®žä½“çš„æ‰¿è½½ã€‚ æ•°æ®éƒ½å‡†å¤‡å®Œæ¯•ä¹‹åŽï¼ŒRecyclerView å°±é©±åŠ¨ vlayout é‡Œçš„ LayoutManager è¿›è¡Œæ¸²æŸ“å’Œå¸ƒå±€ã€‚ LayoutManager é¦–å…ˆå›žè°ƒ RecyclerView å†…éƒ¨èŽ·å– ViewHolderï¼Œè‹¥å¤ç”¨æ± é‡Œå­˜åœ¨å¤ç”¨çš„å¯¹è±¡ï¼Œå°±å›žè°ƒ GroupBasicAdapter è¿›è¡Œæ•°æ®ç»‘å®šï¼Œå¦åˆ™å…ˆå›žè°ƒ GroupBasicAdapter è¿›è¡Œç»„ä»¶ ViewHolder çš„åˆ›å»ºï¼Œç„¶åŽè¿›è¡Œæ•°æ®ç»‘å®šã€‚ViewHolder çš„åˆ›å»ºä¹Ÿæ˜¯é€šè¿‡ Resolver å†…éƒ¨åˆ›å»º UI çš„æ¨¡å—è¿›è¡Œæž„é€ ã€‚ è¿™å°±æ˜¯ Tangram æ¸²æŸ“é¡µé¢çš„æ•´ä½“æµç¨‹ï¼Œæœ¬èº«å¹¶æ²¡æœ‰ç‰¹åˆ«å¤æ‚çš„é€»è¾‘ã€‚è€Œæ•´ä¸ªæ¡†æž¶é‡Œçš„å…¶ä»–æ¨¡å—æ¯”å¦‚äº‹ä»¶æ€»çº¿ã€ServiceManager ç­‰éƒ½æ˜¯åœ¨ç»„ä»¶è‡ªèº«ç»‘å®šæ•°æ®ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨åˆ°ï¼Œå¯¹äºŽè¿™äº›åŠŸèƒ½æ¨¡å—çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬ä¹Ÿç¼–å†™äº†ç›¸åº”çš„æ•™ç¨‹æ–‡æ¡£ä¾›å‚è€ƒã€‚ ç›¸å…³æ–‡ç« æœ¬æ–‡ç®€è¦åœ°å¯¹ Tangram Android å†…éƒ¨çš„è®¾è®¡å’Œå·¥ä½œæµç¨‹è¿›è¡Œäº†è¯´æ˜Žï¼Œæœ‰åŠ©äºŽå¯¹é˜…è¯»æºç çš„ç†è§£ã€‚ä½†æ˜¯å»ºè®®è¯»è€…åœ¨å¯¹ Tangram æœ‰ä¸€å®šäº†è§£çš„åŸºç¡€ä¹‹ä¸Šå†é˜…è¯»æ­¤æ–‡ï¼Œå¦åˆ™å¯èƒ½æœ‰äº‘é‡Œé›¾é‡Œçš„æ„Ÿè§‰ï¼Œå› ä¸ºè¿™é‡Œæ¶‰åŠåˆ°å¤§é‡çš„çŸ¥è¯†ç‚¹æ²¡æ³•å®Œå…¨å±•å¼€ï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹æ–‡ç« è¿›è¡Œäº†è§£ã€‚ ã€ŠTangramæ˜¯æˆ‘ä»¬å¯¹ç•Œé¢åŠ¨æ€åŒ–çš„æ€åº¦ã€‹ ã€Šé¡µé¢åŠ¨æ€åŒ–çš„åŸºç¡€ â€”â€” Tangramã€‹ ã€ŠTangram çš„åŸºç¡€ â€”â€” vlayoutï¼ˆAndroidï¼‰ã€‹ ã€ŠTangram Android ä½¿ç”¨æŒ‡å—ã€‹]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Tangram1.0æŠ€æœ¯æž¶æž„]]></title>
    <url>%2Fposts%2F6aeb1897.html</url>
    <content type="text"><![CDATA[Tangramä½œä¸ºä¸€ä¸ªé¢å‘å¸¸è§„ä¸šåŠ¡äº§å“çš„è§£å†³æ–¹æ¡ˆç”±3ä¸ªéƒ¨åˆ†ç»„æˆï¼š Tangram SDKï¼šç›®å‰Tangram 1.0å¼€æºäº†iOSå’ŒAndroidä¸¤ä¸ªå¹³å°çš„SDKï¼Œè´Ÿè´£ç«¯ä¸Šçš„ç•Œé¢æ¸²æŸ“ã€‚Tangram SDKåŸºäºŽä¸¤ä¸ªè‡ªå»ºçš„é«˜æ•ˆç»„ä»¶å¤ç”¨å®¹å™¨ï¼ˆVLayout-Androidå’ŒLazyScroll-iOSï¼‰ï¼Œå¼€å‘çš„ç•Œé¢è§†å›¾ç”Ÿæˆå™¨ã€‚ Tangram ACï¼šTangram App Containerï¼Œæ˜¯æ•´ä¸ªTangramä½“ç³»ä¸­çš„ä¸šåŠ¡æ ¸å¿ƒã€‚è´Ÿè´£æŠŠæ¨¡æ¿å’Œæ•°æ®æŒ‰ç…§ä¸šåŠ¡é€»è¾‘è¿›è¡Œç»„è£…ï¼Œå¹¶è¾“å‡ºç»™SDKã€‚ Tangram OPï¼šTangram Operatorï¼Œæ˜¯TangramæŽ§åˆ¶å°ï¼Œæ˜¯ä¸šåŠ¡äººå‘˜è°ƒæ•´ç•Œé¢ç»“æž„ã€æ ·å¼å’Œæ•°æ®æºçš„æŽ§åˆ¶å°ã€‚ Tangram SDK çŽ°åœ¨æˆ‘ä»¬è®¨è®ºçš„æ˜¯Tangram 1.0æž¶æž„ï¼Œä¹Ÿå°±æ˜¯æ­£åœ¨æœåŠ¡æ‰‹æœºå¤©çŒ«å’Œå…¶ä»–å‡ ä¸ªAppçš„ç‰ˆæœ¬ã€‚Tangram 2.0å°†åœ¨æ¨¡åž‹è®¾è®¡å’Œæ ¸å¿ƒæŠ€æœ¯ä¸Šéƒ½æœ‰è¾ƒå¤§å‡çº§ï¼Œæš‚ä¸åšè®¨è®ºã€‚ è§†å›¾åˆ†å±‚Tangramä»¥ä¸€æ£µæ·±åº¦ä¸º3çš„æ ‘å½¢ç»“æž„æž„å»ºè§†å›¾ï¼š æ ¹èŠ‚ç‚¹æ˜¯Tangram Viewã€‚Tangram Viewæ˜¯Tangramçš„æœ€ç»ˆäº§ç‰©ï¼Œä¸Žä½¿ç”¨è€…ç›´æŽ¥äº¤äº’çš„æŽ¥å£ï¼Œä¸€ä¸ªViewå®žä¾‹ã€‚ ç¬¬äºŒå±‚èŠ‚ç‚¹è¢«å®šä¹‰ä¸ºå¸ƒå±€ã€‚å¸ƒå±€æ˜¯ä¸€ä¸ªèµ·åˆ°å®¹å™¨ä½œç”¨çš„Viewå®žä¾‹ï¼Œè¢«è¦æ±‚éµå®ˆTangramå¸ƒå±€æŽ¥å£è§„èŒƒã€‚ä¸€èˆ¬æ¥è¯´ä¸€ä¸ªå¸ƒå±€ä¼šç‹¬å Tangram Viewçš„ä¸€è¡Œï¼Œå¤šä¸ªå¸ƒå±€ä¾æ¬¡å‘ä¸‹æŽ’åˆ—ã€‚æ­¤å¤–è¿˜ä¼šæœ‰ç‰¹æ®Šå¸ƒå±€ï¼Œå¦‚ï¼šæµ®åŠ¨å¸ƒå±€ï¼Œæ˜¯æ¼‚æµ®åœ¨å±å¹•ä¸Šçš„ä¸€ä¸ªå¸ƒå±€ï¼Œå¯ä»¥è¢«æ‹–åŠ¨åˆ°ä»»ä½•ä½ç½®ã€‚ï¼ˆè®¿é—®Tangramä¸»é¡µ - å†…ç½®å¸ƒå±€æ”¯æŒï¼Œäº†è§£æ›´å¤šå¸ƒå±€ï¼‰ å¶å­èŠ‚ç‚¹æ˜¯ç»„ä»¶ã€‚ç»„ä»¶å°±æ˜¯è¦å±•ç¤ºä¸šåŠ¡ä¿¡æ¯çš„Viewï¼Œæ˜¯Tangramä¸­çš„åŽŸå­Viewã€‚ç›¸æ¯”å¸ƒå±€è€Œè¨€ï¼Œå¼€å‘ä¸€ä¸ªç»„ä»¶çš„é™åˆ¶è¦å°å¾ˆå¤šï¼Œåªéœ€è¦å®žçŽ°å°‘æ•°å‡ ä¸ªæ–¹æ³•å³å¯ã€‚æŠŠä»»æ„ä¸€ä¸ªè‡ªå®šä¹‰çš„Viewè½¬åŒ–ä¸ºTangramç»„ä»¶éƒ½éžå¸¸æ–¹ä¾¿ï¼Œè¿™ä¹Ÿæ˜¯Tangramæ‰€å€¡å¯¼çš„ï¼šæŠŠä»»æ„æ­£åœ¨ä½¿ç”¨çš„è§†å›¾ç»„ä»¶å¿«é€Ÿè½¬åŒ–ä¸ºTangramè§†å›¾ã€‚ Tangram ViewTangram Viewä½œä¸ºæ•´ä¸ªä½“ç³»çš„æ ¸å¿ƒäº§ç‰©ï¼Œæ˜¯åŸºäºŽä¸Šæ–‡æåˆ°è¿‡çš„LazyScrollViewï¼ˆiOSï¼‰å’ŒVLayoutï¼ˆAndroidï¼‰å¼€å‘çš„ã€‚å…¶æœ€ä¸»è¦çš„ä½œç”¨æ˜¯åœ¨è¿è¡Œæ—¶å¤„ç†ä¸Šè¿°ä¸‰å±‚ç»“æž„ä¸­ç»„ä»¶çš„å›žæ”¶å’Œå¤ç”¨ã€‚ Tangram Viewçš„å›žæ”¶å’Œå¤ç”¨åŸºäºŽä¸€ä¸ªåŒç´¢å¼•ç»“æž„ã€‚åœ¨æ¸²æŸ“å‡†å¤‡æœŸéœ€è¦æå‰çŸ¥æ™“ç•Œé¢ä¸­å…¨éƒ¨å¶å­èŠ‚ç‚¹çš„å°ºå¯¸å’Œç›¸å¯¹æ ¹èŠ‚ç‚¹çš„ç›¸å¯¹ä½ç½®ï¼Œç»™äºˆä½ç½®å’Œå°ºå¯¸ä¿¡æ¯æž„å»ºä¸¤ä¸ªç´¢å¼•ï¼šæ‰€æœ‰ç»„ä»¶é¡¶éƒ¨ç›¸å¯¹ä½ç½®é¡ºåºçš„å€’æŽ’å’Œåº•éƒ¨ç›¸å¯¹ä½ç½®çš„å€’æŽ’ã€‚å½“æ•´ä¸ªç•Œé¢ä¸­å‡ºçŽ°ç»„ä»¶çš„å¢žå‡æˆ–ä½ç½®å˜åŒ–ï¼Œéƒ½éœ€è¦è°ƒç”¨ä¸€æ¬¡Reloadæ“ä½œé‡å»ºç´¢å¼•ï¼Œå½“ç„¶åˆ›å»ºç´¢å¼•è¿‡ç¨‹é‡‡ç”¨äº†æ•ˆçŽ‡è¾ƒé«˜çš„æŽ’åºç®—æ³•ã€‚ æ¸²æŸ“åˆå§‹çŠ¶æ€æˆ–å±å¹•å‘ç”Ÿæ»šåŠ¨åŽï¼ŒTangram Viewä¼šæ‹¿åˆ°å½“å‰å±å¹•çš„å¯è§†èŒƒå›´ç›¸å¯¹æ ¹èŠ‚ç‚¹çš„åæ ‡ï¼Œå¹¶å¿«é€Ÿåœ¨ä¸Šè¿°åŒç´¢å¼•ç»“æž„ä¸­æ‰¾åˆ°å¤„åœ¨å¯è§†èŒƒå›´å†…çš„ç»„ä»¶é›†åˆã€‚ç„¶åŽï¼Œå¯è§†ç»„ä»¶é›†åˆä¸Žå½“å‰å­˜æ´»ç»„ä»¶é›†åˆåˆ†åˆ«ç›¸å‡å°±å¯ä»¥å¾—åˆ°éœ€è¦æž„é€ çš„æ–°ç»„ä»¶å’Œå¯ä»¥å›žæ”¶çš„æ—§ç»„ä»¶ã€‚å…ˆæŠŠæ—§ç»„ä»¶æ ‡è®°ä¸ºå¯è¢«å›žæ”¶ï¼ˆæ³¨æ„ï¼šè¿™é‡Œé™¤äº†æ ‡è®°ï¼Œä¸åšä»»ä½•å…¶ä»–æ“ä½œï¼‰ï¼ŒåŠ å…¥å¤ç”¨æ± ï¼Œå†éåŽ†æ–°ç»„ä»¶é›†åˆï¼šçœ‹å¤ç”¨æ± é‡Œæœ‰æ²¡æœ‰åŒç±»åž‹ç»„ä»¶å¯ä»¥è¢«å¤ç”¨ï¼Œè‹¥æ²¡æœ‰åˆ™è°ƒç”¨å·¥åŽ‚æž„é€ ä¸€ä¸ªæ–°çš„ã€‚ Tangram BusTangram Busæ˜¯Tangramæä¾›çš„ä¸€ä¸ªäº‹ä»¶æ€»çº¿ï¼Œä¸»è¦ä¸ºäº†é¿å…å„ä¸ªæ¨¡å—ä¸ºäº†éœ€è¦ç›¸äº’é€šä¿¡è€Œé€ æˆè€¦åˆã€‚Tangram Busçš„è®¾è®¡æ€æƒ³ä¸Žå¸¸è§„çš„äº‹ä»¶æ€»çº¿è®¾è®¡å¤§åŒå°å¼‚ï¼Œä½¿ç”¨æ–¹æ³•ä¹Ÿæ˜¯é‡‡ç”¨ç›‘å¬æ¨¡å¼ï¼šéœ€è¦å“åº”æ—¶é—´çš„æ¨¡å—æ³¨å†Œä¸€ä¸ªç›‘å¬æ–¹æ³•åˆ°æ€»çº¿ï¼Œè€Œå…¶ä»–æ¨¡å—äº§ç”Ÿå“åº”äº‹ä»¶åŽä¼šé€šçŸ¥æ€»çº¿ï¼Œæ€»çº¿åˆ™ä¼šè°ƒç”¨ç›‘å¬æ–¹æ³•ã€‚è¿™é‡Œé€šè¿‡ä¸¤ä¸ªä¾‹å­æ¥è¯´æ˜ŽTangram Busçš„ä½œç”¨ï¼š è·³è½¬æ“ä½œï¼šç•Œé¢çš„è·³è½¬é€»è¾‘æ˜¯æœ‰Controllerå±‚è´Ÿè´£çš„ï¼Œè€Œè§¦å‘ç‚¹å‡»çš„ä¸€å®šæ˜¯ç»„ä»¶ã€‚ä¸ºäº†é¿å…ç»„ä»¶å’ŒCå±‚çš„è€¦åˆï¼ŒCæ³¨å†Œä¸€ä¸ªè·³è½¬çš„ç›‘å¬è·³è½¬äº‹ä»¶çš„æ–¹æ³•åˆ°æ€»çº¿ï¼Œè€Œç»„ä»¶å‘ç”Ÿéœ€è¦è·³è½¬çš„æ“ä½œæ—¶ï¼Œä¼šæŠ›ä¸€ä¸ªè·³è½¬äº‹ä»¶åˆ°æ€»çº¿é‡Œï¼Œå¹¶åœ¨äº‹ä»¶ä¸­å¸¦ä¸Šè·³è½¬å¿…éœ€çš„ä¿¡æ¯ã€‚ ç´¢å¼•é‡å»ºï¼šä¸Šæ–‡æåˆ°ç»„ä»¶ä½ç½®æˆ–å°ºå¯¸å‘ç”Ÿå˜åŒ–éœ€è¦è§¦å‘ç´¢å¼•é‡å»ºï¼Œæ‰€ä»¥Tangram Coreä¼šæ³¨å†Œä¸€ä¸ªæ–¹æ³•ç›‘å¬ä½ç½®æˆ–å°ºå¯¸å˜æ›´äº‹ä»¶ï¼Œå½“ç»„ä»¶æˆ–å¸ƒå±€å‘ç”Ÿå˜åŒ–åˆ™æŠ›ä¸€ä¸ªå“åº”äº‹ä»¶åˆ°æ€»çº¿ã€‚ Tangram ACä¸»è¦ç›®çš„Tangram ACæ˜¯ä¸€ä¸ªåŽç«¯ç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªAppå®¹å™¨ï¼Œä¸»è¦ç›®çš„æ˜¯é€šè¿‡è§„èŒƒåŒ–çš„å¼€å‘æ¨¡å¼æ‰“ç ´åŽç«¯å¼€å‘åœ¨æµç¨‹å’ŒçŽ¯å¢ƒä¸Šçš„å£åž’ï¼Œå¹¶é€šè¿‡å®¹å™¨æœ¬èº«çš„æ€§èƒ½å’Œç¨³å®šæ€§ä¿éšœç»•è¿‡ç»éªŒå£åž’ï¼Œç»™å‰ç«¯å·¥ç¨‹å¸ˆä¸€ä¸ªç›´æŽ¥å¼€å‘åŽç«¯é€»è¾‘çš„æœºä¼šã€‚ åœ¨ä¼ ç»Ÿçš„å¼€å‘æ¨¡å¼é‡Œï¼Œä¸€ä¸ªåŠŸèƒ½çš„å¼€å‘æµç¨‹è‡³å°‘è¦åŒ…æ‹¬ï¼šæŽ¥å£çº¦å®šã€Mockæ•°æ®å’Œæ•°æ®è”è°ƒï¼Œä¸‰ä¸ªéœ€è¦å‰åŽç«¯åä½œçš„è¿‡ç¨‹ï¼Œè€Œä¸”æ¯ä¸ªè¿‡ç¨‹éƒ½ä¼šæ¶ˆè€—å¤§é‡èµ„æºï¼Œè€Œä¸”åœ¨æˆ‘çœ‹æ¥è¿™æ ·çš„æ¶ˆè€—æ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰çš„ï¼Œä¸äº§ç”Ÿä»·å€¼çš„ã€‚å¦ä¸€æ–¹é¢åœ¨çŽ°åœ¨çš„äº§å“å½¢æ€é‡Œå¯¹åŠ¨æ€æ€§è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œå¤§é‡é€»è¾‘åŽç§»ï¼Œå®¢æˆ·ç«¯è¶Šæ¥è¶Šè–„ã€‚ä½œä¸ºç›´æŽ¥æŽ¥è§¦ç”¨æˆ·çš„å‰ç«¯å¼€å‘ï¼Œå¯¹æ•´ä¸ªäº§å“é€»è¾‘çš„æŽ§åˆ¶å´è¶Šæ¥è¶Šå°‘ï¼Œç»™æŠ€æœ¯é©±åŠ¨çš„äº§å“åˆ›æ–°é€ æˆäº†å·¨å¤§éšœç¢ã€‚ é‚£ä¹ˆé—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿå°±æ˜¯è¢«ä¸Šè¿°æåˆ°è¿‡çš„æµç¨‹ã€çŽ¯å¢ƒå’Œç»éªŒçš„å£åž’åŒºåˆ†å¼€æ¥çš„å‰ç«¯å’ŒåŽç«¯ã€‚æ‰€ä»¥æ‰“ç ´è¿™ç§å£åž’ï¼Œè®©å¬åˆ°ç‚®ç«å£°çš„å‰ç«¯å¼€å‘æœ‰æ›´å¤šçš„é€»è¾‘æŽ§åˆ¶æƒï¼ŒåŒæ—¶æŠŠåŽç«¯å¼€å‘ä»Žæ— èŠçš„ç»“æž„è½¬æ¢ï¼Œæ•°æ®æ‹¼è£…ä¸­è§£æ”¾å‡ºæ¥å°±æ˜¾å¾—æ„ä¹‰éžå‡¡ã€‚Tangram ACå°±æ˜¯åŸºäºŽè¿™æ ·çš„æƒ³æ³•è¯žç”Ÿã€‚ æµç¨‹è®¾è®¡TACæŠŠæ¯ä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„é€»è¾‘ç§°ä¸ºä¸€ä¸ªæœåŠ¡ï¼Œå¤šä¸ªæœåŠ¡ç»„æˆä¸€ä¸ªåº”ç”¨å¯¹å¤–æä¾›æ•°æ®æœåŠ¡ã€‚ TACçš„æ¯ä¸€ä¸ªæœåŠ¡æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æºç ä»“åº“ï¼Œå¼€å‘è€…æäº¤æœåŠ¡æºç åŽåœ¨æŽ§åˆ¶å°é’ˆå¯¹ç‰¹å®šåˆ†æ”¯æäº¤æ‰“åŒ…è¯·æ±‚ï¼ŒTACå°†æŠŠåˆ¶å®šæºç æ‰“æˆä¸€ä¸ªå¯æ‰§è¡Œçš„æœåŠ¡åŒ…ã€‚å¼€å‘è€…é€šè¿‡æŽ§åˆ¶å°æŠŠé€‰å®šçš„æœåŠ¡åŒ…å‘å¸ƒåˆ°æ—¥å¸¸æˆ–é¢„å‘çŽ¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•å’Œè”è°ƒï¼Œé€šè¿‡TACå¼ºåˆ¶éªŒè¯åŽï¼Œå¯ä»¥æŠŠè¿™ä¸ªåŒ…å‘å¸ƒåˆ°ç”Ÿäº§çŽ¯å¢ƒç›´æŽ¥å¯¹çº¿ä¸Šåº”ç”¨æä¾›æœåŠ¡ã€‚ åœ¨TACçš„è¿è¡Œæ—¶ï¼Œæœ‰ä¸€å¥—å®Œæ•´çš„è´¨é‡ç›‘æŽ§è®¾æ–½ï¼Œå®žæ—¶ç›‘æŽ§æ•´ä½“å®¹å™¨çš„å’Œå„ä¸ªæœåŠ¡çš„çŠ¶æ€ï¼Œä¿è¯æ•´ä½“å®¹å™¨è¿è¡Œæ­£å¸¸ã€‚æ­¤å¤–ï¼Œä¸ºäº†ä¿éšœæ ¸å¿ƒåº”ç”¨çš„ç¨³å®šæ€§ï¼ŒTACè¿˜æä¾›äº†ç‹¬ç«‹éƒ¨ç½²çš„æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´éƒ¨åˆ†æ ¸å¿ƒåº”ç”¨æ‰€æ¶‰åŠåˆ°çš„æœåŠ¡å…è®¸è¢«ç‹¬ç«‹éƒ¨ç½²çš„ä¸€ä¸ªç‰©ç†é›†ç¾¤ä¸Šç‹¬å èµ„æºã€‚å¦‚æ­¤æ—¢ä¿è¯äº†æ ¸å¿ƒæœåŠ¡çš„ç¨³å®šæ€§ï¼Œä¸ä¼šè¢«ç¨³å®šæ€§çº§åˆ«æ›´ä½Žçš„åº”ç”¨å½±å“ï¼Œä¹Ÿä¿è¯äº†æ ¸å¿ƒæœåŠ¡åœ¨å¤§é‡å ç”¨èµ„æºæ—¶ä¸ä¼šæ‹–æ…¢å…¶ä»–åº”ç”¨ã€‚ Tangram OPTangram OPæ˜¯æ•´ä¸ªä½“ç³»æœ€é‡è¦çš„æŽ§åˆ¶å°ï¼Œä¸Šæ–‡ä¸­æåˆ°è¿‡çš„å¸ƒå±€æŽ’å¸ƒæ–¹å¼ç­‰éƒ½å¯ä»¥é€šè¿‡OP GUIçš„æ–¹å¼é…ç½®å®Œæˆï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨éƒ¨ç½²äº†OPçš„ä½“ç³»ä¸­ï¼Œå¯ä»¥ç›´æŽ¥é€šè¿‡é…ç½®ç”Ÿæˆä¸€å¼ é¡µé¢ç»“æž„ã€‚å¹¶é€šè¿‡OPæä¾›çš„æ•°æ®å…³è”åŠŸèƒ½å…³è”åˆ°ACçš„æŸä¸ªæ•°æ®æœåŠ¡ä¸Šï¼Œç»„æˆä¸€ä¸ªå®Œæ•´çš„äº§å“ã€‚ å…³äºŽOPçš„å…·ä½“å®žçŽ°ä¸æ¶‰åŠåˆ°Tangramçš„æŽ¥å…¥ï¼Œæ›´å¤šæ˜¯ä¸ºäº†æå‡ä½¿ç”¨æ•ˆçŽ‡ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä¸åšèµ˜è¿°ï¼Œæ—¥åŽTangram OPå¼€æºåŽå°†åšæ›´å¤šä»‹ç»ã€‚ ç»“è¯­Tangramæ—¨åœ¨æ‰“é€ ä¸€ä¸ªå¸¸è§„äº§å“å¼€å‘æ–°æ¨¡å¼ï¼Œä¼ è¾¾ä¸€ä¸ªä»¥åˆ›é€ ä»·å€¼ä¸ºç›®çš„çš„å¼€å‘ç†å¿µï¼Œå»ºè®¾ä¸€ä¸ªå¼€å‘ç”Ÿæ€ï¼š ä¸ä¸ºäº†åˆ›æ–°è€Œåˆ›æ–°ï¼Œè€Œä¸ºäº†åˆ›é€ ä»·å€¼è€Œåˆ›æ–°ï¼Œå·¥ç¨‹å¸ˆè¦åœ¨æœ‰ä»·å€¼çš„æ–¹å‘ä¸Šè¿½æ±‚æžè‡´ï¼Œè€Œåœ¨ä»…ä»…èƒ½å¨±ä¹è‡ªå·±çš„æ–¹å‘ä¸Šé€‚å¯è€Œæ­¢ è®©å‰ç«¯å’ŒåŽç«¯åšåº”è¯¥åšçš„äº‹ï¼Œåšæ›´æœ‰ä»·å€¼çš„äº‹ï¼Œä¸å› æŸäº›å£åž’è€Œæ— æ³•æ›´å¥½çš„åˆ›é€ ä»·å€¼]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vlayoutä½¿ç”¨è¯´æ˜Žï¼ˆäºŒï¼‰]]></title>
    <url>%2Fposts%2F2be51ee4.html</url>
    <content type="text"><![CDATA[å‰è¨€vlayout çš„è®¾è®¡æ€è·¯è¯·å‚è€ƒTangram çš„åŸºç¡€ â€”â€” vlayoutï¼ˆAndroidï¼‰ã€‚æ¡†æž¶å·²ç»å¼€æºï¼Œæ¬¢è¿Žç§»æ­¥åˆ° githubä¸ŠæŒ‡æ•™ã€‚æœ¬æ–‡ä»‹ç» vlayout çš„åŸºæœ¬å¸ƒå±€æ ·å¼ä¸Šçš„å±žæ€§è¯´æ˜Žã€‚ margin, paddingMargin, paddingå°±æ˜¯å¤–è¾¹è·ã€å†…è¾¹è·ï¼Œæ¦‚å¿µä¸ŽAndroidç³»ç»Ÿçš„margin, paddingä¸€æ ·ï¼Œä½†ä¹Ÿæœ‰ä¸åŒçš„åœ°æ–¹ï¼š å®ƒä¸æ˜¯æ•´ä¸ªRecyclerViewé¡µé¢çš„marginå’Œpaddingï¼Œå®ƒæ˜¯æ¯ä¸€å—LayoutHelperæ‰€è´Ÿè´£çš„åŒºåŸŸçš„marginå’Œpaddingã€‚ ä¸€ä¸ªé¡µé¢é‡Œå¯ä»¥æœ‰å¤šä¸ªLayoutHelperï¼Œæ„å‘³ç€ä¸åŒLayoutHelperå¯ä»¥è®¾ç½®ä¸åŒçš„marginå’Œpaddingã€‚ LayoutHelperçš„marginå’Œpaddingä¸Žé¡µé¢RecyclerViewçš„marginå’Œpaddingå¯ä»¥å…±å­˜ã€‚ ç›®å‰ä¸»è¦é’ˆå¯¹éžfixç±»åž‹çš„LayoutHelperå®žçŽ°äº†marginå’Œpaddingï¼Œfixç±»åž‹LayoutHelperå†…éƒ¨æ²¡æœ‰ç›¸å¯¹ä½ç½®å…³ç³»ï¼Œä¸å¤„ç†è¾¹è·ã€‚ æŽ¥å£å¯¹äºŽLayoutHelperï¼Œè°ƒç”¨ 12public void setPadding(int leftPadding, int topPadding, int rightPadding, int bottomPadding)public void setMargin(int leftMargin, int topMargin, int rightMargin, int bottomMargin) bgColor, bgImgèƒŒæ™¯é¢œè‰²æˆ–è€…èƒŒæ™¯å›¾ï¼Œè¿™å…¶å®žä¸æ˜¯å¸ƒå±€å±žæ€§ï¼Œä½†æ˜¯ç”±äºŽåœ¨vlayoutå¯¹è§†å›¾è¿›è¡Œäº†ç›´æŽ¥å¸ƒå±€ï¼Œä¸åŒåŒºåŸŸçš„è§†å›¾çš„çˆ¶èŠ‚ç‚¹éƒ½æ˜¯RecyclerViewï¼Œå¦‚æžœæƒ³è¦é’ˆå¯¹æŸä¸€å—åŒºåŸŸå•ç‹¬ç»˜åˆ¶èƒŒæ™¯ï¼Œå°±å¾ˆéš¾åšåˆ°äº†ã€‚vlayoutæ¡†æž¶å¯¹æ­¤åšäº†ç‰¹æ®Šå¤„ç†ï¼Œå¯¹äºŽéžfixã€éžfloatç±»åž‹çš„LayoutHelperï¼Œæ”¯æŒé…ç½®èƒŒæ™¯è‰²æˆ–èƒŒæ™¯å›¾ã€‚åŒæ ·ç›®å‰ä¸»è¦é’ˆå¯¹éžfixç±»åž‹çš„LayoutHelperå®žçŽ°è¿™ä¸ªç‰¹æ€§ã€‚ æŽ¥å£ä½¿ç”¨èƒŒæ™¯è‰² 1public void setBgColor(int bgColor) ä½¿ç”¨èƒŒæ™¯å›¾ é¦–å…ˆä¸ºLayoutManageræä¾›ä¸€ä¸ªImageViewç®€å•å·¥åŽ‚ 123456this.mLayoutManager.setLayoutViewFactory(new LayoutViewFactory() &#123; @Override public opinion generateLayoutView(@NonNull Context context) &#123; return new XXImageView(context); &#125; &#125;); å†ä¸ºLayoutHelperæè®¾ç½®å›¾ç‰‡åŠ è½½çš„Listener 1234567891011121314151617181920212223242526272829baseHelper.setLayoutViewBindListener(new BindListener(imgUrl));baseHelper.setLayoutViewUnBindListener(new UnbindListener(imgUrl));private static class BindListener implements BaseLayoutHelper.LayoutViewBindListener &#123; private String imgUrl; public BindListener(String imgUrl) &#123; this.imgUrl = imgUrl; &#125; @Override public void onBind(View layoutView, BaseLayoutHelper baseLayoutHelper) &#123; //loading image &#125; &#125; private static class UnbindListener implements BaseLayoutHelper.LayoutViewUnBindListener &#123; private String imgUrl; public UnbindListener(String imgUrl) &#123; this. imgUrl = imgUrl; &#125; @Override public void onUnbind(View layoutView, BaseLayoutHelper baseLayoutHelper) &#123; //cancel loading image &#125; &#125; aspectRatioä¸ºäº†ä¿è¯å¸ƒå±€è¿‡ç¨‹ä¸­è§†å›¾çš„é«˜åº¦ä¸€è‡´ï¼Œæˆ‘ä»¬è®¾è®¡äº†aspectRatioå±žæ€§ï¼Œå®ƒæ˜¯å®½ä¸Žé«˜çš„æ¯”ä¾‹ï¼ŒLayoutHelperé‡Œæœ‰aspectRatioå±žæ€§ï¼Œé€šè¿‡vlayoutæ·»åŠ çš„è§†å›¾çš„LayoutParamsä¹Ÿæœ‰aspectRatioå±žæ€§ï¼ŒåŽè€…çš„ä¼˜å…ˆçº§æ¯”å‰è€…é«˜ï¼Œä½†å«ä¹‰ä¸ä¸€æ ·ã€‚ LayoutHelperå®šä¹‰çš„aspectRatioï¼ŒæŒ‡çš„æ˜¯ä¸€è¡Œè§†å›¾æ•´ä½“çš„å®½åº¦ä¸Žé«˜åº¦ä¹‹æ¯”ï¼Œå½“ç„¶æ•´ä½“çš„å®½åº¦æ˜¯å‡åŽ»äº†RecyclerViewå’Œå¯¹åº”çš„LayoutHelperçš„margin, paddingã€‚ è§†å›¾çš„LayoutParamså®šä¹‰çš„aspectRatioï¼ŒæŒ‡çš„æ˜¯åœ¨LayoutHelperè®¡ç®—å‡ºè§†å›¾å®½åº¦ä¹‹åŽï¼Œç”¨æ¥ç¡®å®šè§†å›¾é«˜åº¦æ—¶ä½¿ç”¨çš„ï¼Œå®ƒä¼šè¦†ç›–é€šè¿‡LayoutHelperçš„aspectRatioè®¡ç®—å‡ºæ¥çš„è§†å›¾é«˜åº¦ï¼Œå› æ­¤å…·å¤‡æ›´é«˜ä¼˜å…ˆçº§ã€‚ æŽ¥å£å¯¹äºŽLayoutHelperï¼Œè°ƒç”¨ 1public void setAspectRatio(float aspectRatio) å¯¹äºŽLayoutParamsï¼Œè°ƒç”¨ 1((VirutalLayoutManager.LayoutParams) layoutParams).mAspectRatio dividerHeightLinearLayoutHelperçš„å±žæ€§ï¼ŒLinearLayoutHelperæ˜¯åƒListViewä¸€æ ·çš„çº¿æ€§å¸ƒå±€ï¼ŒdividerHeightå°±æ˜¯æ¯ä¸ªç»„ä»¶ä¹‹é—´çš„é—´è·ã€‚ æŽ¥å£å¯¹äºŽLinearLayoutHelperï¼Œè°ƒç”¨ 1public void setDividerHeight(int dividerHeight) weightsColumnLayoutHelper, GridLayoutHelperçš„å±žæ€§ï¼Œå®ƒä»¬éƒ½æ˜¯æä¾›ç½‘æ ¼çŠ¶çš„å¸ƒå±€èƒ½åŠ›ï¼Œå»ºè®®ä½¿ç”¨GridLayoutHelperï¼Œå®ƒçš„èƒ½åŠ›æ›´åŠ å¼ºå¤§ï¼Œå‚è€ƒä¸‹æ–‡ä»‹ç»ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªç½‘æ ¼ä¸­æ¯ä¸€åˆ—çš„å®½åº¦æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡weightså±žæ€§ï¼Œå¯ä»¥æŒ‡å®šè®©æ¯ä¸€åˆ—çš„å®½åº¦æˆæ¯”ä¾‹åˆ†é…ï¼Œå°±åƒLinearLayoutçš„weightå±žæ€§ä¸€æ ·ã€‚ weightså±žæ€§æ˜¯ä¸€ä¸ªfloatæ•°ç»„ï¼Œæ¯ä¸€é¡¹ä»£è¡¨æŸä¸€åˆ—å çˆ¶å®¹å™¨å®½åº¦çš„ç™¾åˆ†æ¯”ï¼Œæ€»å’Œå»ºè®®æ˜¯100ï¼Œå¦åˆ™å¸ƒå±€ä¼šè¶…å‡ºå®¹å™¨å®½åº¦ï¼›å¦‚æžœå¸ƒå±€ä¸­æœ‰4åˆ—ï¼Œé‚£ä¹ˆweightsçš„é•¿åº¦ä¹Ÿåº”è¯¥æ˜¯4ï¼›é•¿åº¦å¤§äºŽ4ï¼Œå¤šå‡ºçš„éƒ¨åˆ†ä¸å‚ä¸Žå®½åº¦è®¡ç®—ï¼›å¦‚æžœå°äºŽ4ï¼Œä¸è¶³çš„éƒ¨åˆ†é»˜è®¤å¹³åˆ†å‰©ä½™çš„ç©ºé—´ã€‚ æŽ¥å£å¯¹äºŽColumnLayoutHelper, GridLayoutHelperï¼Œè°ƒç”¨ 1public void setWeights(float[] weights) vGap, hGapGridLayoutHelperä¸ŽStaggeredGridLayoutHelperéƒ½æœ‰è¿™ä¸¤ä¸ªå±žæ€§ï¼Œåˆ†åˆ«æŽ§åˆ¶è§†å›¾ä¹‹é—´çš„åž‚ç›´é—´è·å’Œæ°´å¹³é—´è·ã€‚ æŽ¥å£å¯¹äºŽGridLayoutHelper, StaggeredGridLayoutHelperï¼Œè°ƒç”¨ 12public void setHGap(int hGap)public void setVGap(int vGap) spanCount, spanSizeLookupGridLayoutHelperçš„å±žæ€§ï¼Œå‚è€ƒäºŽç³»ç»Ÿçš„GridLayoutManagerï¼ŒspanCountè¡¨ç¤ºç½‘æ ¼çš„åˆ—æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸€ä¸ªè§†å›¾éƒ½å ç”¨ä¸€ä¸ªç½‘æ ¼åŒºåŸŸï¼Œä½†é€šè¿‡æä¾›è‡ªå®šä¹‰çš„spanSizeLookUpï¼Œå¯ä»¥æŒ‡å®šæŸä¸ªä½ç½®çš„è§†å›¾å ç”¨å¤šä¸ªç½‘æ ¼åŒºåŸŸã€‚ æŽ¥å£ä½¿ç”¨spanCountè°ƒç”¨ 1public void setSpanCount(int spanCount) ä½¿ç”¨spanSizeLookup 1public void setSpanSizeLookup(SpanSizeLookup spanSizeLookup) autoExpandGridLayoutHelperçš„å±žæ€§ï¼Œå½“ä¸€è¡Œé‡Œè§†å›¾çš„ä¸ªæ•°å°‘äºŽspanCountå€¼çš„æ—¶å€™ï¼Œå¦‚æžœautoExpandä¸ºtrueï¼Œè§†å›¾çš„æ€»å®½åº¦ä¼šå¡«æ»¡å¯ç”¨åŒºåŸŸï¼›å¦åˆ™ä¼šåœ¨å±å¹•ä¸Šç•™ç©ºç™½åŒºåŸŸã€‚ æŽ¥å£è°ƒç”¨ 1public void setAutoExpand(boolean isAutoExpand) laneStaggeredGridLayoutHelperä¸­æœ‰è¿™ä¸ªå±žæ€§ï¼Œä¸ŽGridLayoutHelperé‡Œçš„spanCountç±»ä¼¼ï¼ŒæŽ§åˆ¶ç€‘å¸ƒæµçš„åˆ—æ•°ã€‚ æŽ¥å£è°ƒç”¨ 1public void setLane(int lane) fixAreaAdjusterfixç±»åž‹çš„LayoutHelperï¼Œåœ¨å¯èƒ½éœ€è¦è®¾ç½®ä¸€ä¸ªç›¸å¯¹çˆ¶å®¹å™¨å››ä¸ªè¾¹çš„åç§»é‡ï¼Œæ¯”å¦‚æ•´ä¸ªé¡µé¢é‡Œæœ‰ä¸€ä¸ªå›ºå®šçš„æ ‡é¢˜æ æ·»åŠ åœ¨vlayoutå®¹å™¨ä¸Šï¼Œvlayoutå†…éƒ¨çš„fixç±»åž‹è§†å›¾ä¸å¸Œæœ›ä¸Žå¤–éƒ¨çš„æ ‡é¢˜æœ‰æ‰€é‡å ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªfixAreaAdjusteræ¥åšåç§»ã€‚ æŽ¥å£è°ƒç”¨ 1public void setAdjuster(FixAreaAdjuster adjuster) alignType, x, yFixLayoutHelper, ScrollFixLayoutHelper, FloatLayoutHelperçš„å±žæ€§ï¼Œè¡¨ç¤ºå¸è¾¹æ—¶çš„åŸºå‡†ä½ç½®ï¼Œæœ‰å››ä¸ªå–å€¼ï¼Œåˆ†åˆ«æ˜¯TOP_LEFT, TOP_RIGHT, BOTTOM_LEFT, BOTTOM_RIGHTã€‚xå’Œyæ˜¯ç›¸å¯¹è¿™å››ä¸ªä½ç½®çš„åç§»é‡ï¼Œæœ€ç»ˆçš„åç§»é‡è¿˜è¦å—ä¸Šè¿°çš„fixAreaAdjusterå½±å“ã€‚ TOP_LEFTï¼šåŸºå‡†ä½ç½®æ˜¯å·¦ä¸Šè§’ï¼Œxæ˜¯è§†å›¾å·¦è¾¹ç›¸å¯¹çˆ¶å®¹å™¨çš„å·¦è¾¹è·åç§»é‡ï¼Œyæ˜¯è§†å›¾é¡¶è¾¹ç›¸å¯¹çˆ¶å®¹å™¨çš„ä¸Šè¾¹è·åç§»é‡ï¼› TOP_RIGHTï¼šåŸºå‡†ä½ç½®æ˜¯å³ä¸Šè§’ï¼Œxæ˜¯è§†å›¾å³è¾¹ç›¸å¯¹çˆ¶å®¹å™¨çš„å³è¾¹è·åç§»é‡ï¼Œyæ˜¯è§†å›¾é¡¶è¾¹ç›¸å¯¹çˆ¶å®¹å™¨çš„ä¸Šè¾¹è·åç§»é‡ï¼› BOTTOM_LEFTï¼šåŸºå‡†ä½ç½®æ˜¯å·¦ä¸‹è§’ï¼Œxæ˜¯è§†å›¾å·¦è¾¹ç›¸å¯¹çˆ¶å®¹å™¨çš„å·¦è¾¹è·åç§»é‡ï¼Œyæ˜¯è§†å›¾åº•è¾¹ç›¸å¯¹çˆ¶å®¹å™¨çš„ä¸‹è¾¹è·åç§»é‡ï¼› BOTTOM_RIGHTï¼šåŸºå‡†ä½ç½®æ˜¯å³ä¸‹è§’ï¼Œxæ˜¯è§†å›¾å³è¾¹ç›¸å¯¹çˆ¶å®¹å™¨çš„å³è¾¹è·åç§»é‡ï¼Œyæ˜¯è§†å›¾åº•è¾¹ç›¸å¯¹çˆ¶å®¹å™¨çš„ä¸‹è¾¹è·åç§»é‡ï¼› æŽ¥å£è®¾ç½®åŸºå‡†è°ƒç”¨ 1public void setAlignType(int alignType) è®¾ç½®åç§»é‡è°ƒç”¨ 12public void setX(int x)public void setY(int y) showTypeScrollFixLayoutHelperçš„å±žæ€§ï¼Œå–å€¼æœ‰SHOW_ALWAYS, SHOW_ON_ENTER, SHOW_ON_LEAVEã€‚ SHOW_ALWAYSï¼šä¸ŽFixLayoutHelperçš„è¡Œä¸ºä¸€è‡´ï¼Œå›ºå®šåœ¨æŸä¸ªä½ç½®ï¼› SHOW_ON_ENTERï¼šé»˜è®¤ä¸æ˜¾ç¤ºè§†å›¾ï¼Œå½“é¡µé¢æ»šåŠ¨åˆ°è¿™ä¸ªè§†å›¾çš„ä½ç½®çš„æ—¶å€™ï¼Œæ‰æ˜¾ç¤ºï¼› SHOW_ON_LEAVEï¼šé»˜è®¤ä¸æ˜¾ç¤ºè§†å›¾ï¼Œå½“é¡µé¢æ»šå‡ºè¿™ä¸ªè§†å›¾çš„ä½ç½®çš„æ—¶å€™æ˜¾ç¤ºï¼› è°ƒç”¨ 1public void setShowType(int showType) stickyStart, offsetStickyLayoutHelperçš„å±žæ€§ï¼Œå½“è§†å›¾çš„ä½ç½®åœ¨å±å¹•èŒƒå›´å†…æ—¶ï¼Œè§†å›¾ä¼šéšé¡µé¢æ»šåŠ¨è€Œæ»šåŠ¨ï¼›å½“è§†å›¾çš„ä½ç½®æ»‘å‡ºå±å¹•æ—¶ï¼ŒStickyLayoutHelperä¼šå°†è§†å›¾å›ºå®šåœ¨é¡¶éƒ¨ï¼ˆstickyStart = trueï¼‰æˆ–è€…åº•éƒ¨ï¼ˆstickyStart = falseï¼‰ï¼Œå›ºå®šçš„ä½ç½®æ”¯æŒè®¾ç½®åç§»é‡offsetã€‚ è°ƒç”¨ 12public void setStickyStart(boolean stickyStart)public void setOffset(int offset)]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[vlayoutä½¿ç”¨è¯´æ˜Žï¼ˆä¸€ï¼‰]]></title>
    <url>%2Fposts%2Fb89a9b41.html</url>
    <content type="text"><![CDATA[å‰è¨€vlayout çš„è®¾è®¡æ€è·¯è¯·å‚è€ƒTangram çš„åŸºç¡€ â€”â€” vlayoutï¼ˆAndroidï¼‰ã€‚æ¡†æž¶å·²ç»å¼€æºï¼Œæ¬¢è¿Žç§»æ­¥åˆ° githubä¸ŠæŒ‡æ•™ã€‚æœ¬æ–‡ä»‹ç» vlayout çš„åŸºæœ¬ä½¿ç”¨ã€‚ é»˜è®¤å®žçŽ° é»˜è®¤é€šç”¨å¸ƒå±€å®žçŽ°ï¼Œè§£è€¦æ‰€æœ‰çš„Viewå’Œå¸ƒå±€ä¹‹é—´çš„å…³ç³»: Linear, Grid, å¸é¡¶, æµ®åŠ¨, å›ºå®šä½ç½®ç­‰ã€‚ LinearLayoutHelper: çº¿æ€§å¸ƒå±€ GridLayoutHelper: Gridå¸ƒå±€ï¼Œ æ”¯æŒæ¨ªå‘çš„colspan FixLayoutHelper: å›ºå®šå¸ƒå±€ï¼Œå§‹ç»ˆåœ¨å±å¹•å›ºå®šä½ç½®æ˜¾ç¤º ScrollFixLayoutHelper: å›ºå®šå¸ƒå±€ï¼Œä½†ä¹‹åŽå½“é¡µé¢æ»‘åŠ¨åˆ°è¯¥å›¾ç‰‡åŒºåŸŸæ‰æ˜¾ç¤º, å¯ä»¥ç”¨æ¥åšè¿”å›žé¡¶éƒ¨æˆ–å…¶ä»–ä¹¦ç­¾ç­‰ FloatLayoutHelper: æµ®åŠ¨å¸ƒå±€ï¼Œå¯ä»¥å›ºå®šæ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œä½†ç”¨æˆ·å¯ä»¥æ‹–æ‹½å…¶ä½ç½® ColumnLayoutHelper: æ æ ¼å¸ƒå±€ï¼Œéƒ½å¸ƒå±€åœ¨ä¸€æŽ’ï¼Œå¯ä»¥é…ç½®ä¸åŒåˆ—ä¹‹é—´çš„å®½åº¦æ¯”å€¼ SingleLayoutHelper: é€šæ å¸ƒå±€ï¼Œåªä¼šæ˜¾ç¤ºä¸€ä¸ªç»„ä»¶View OnePlusNLayoutHelper: ä¸€æ‹–Nå¸ƒå±€ï¼Œå¯ä»¥é…ç½®1-5ä¸ªå­å…ƒç´  StickyLayoutHelper: stikcyå¸ƒå±€ï¼Œ å¯ä»¥é…ç½®å¸é¡¶æˆ–è€…å¸åº• StaggeredGridLayoutHelper: ç€‘å¸ƒæµå¸ƒå±€ï¼Œå¯é…ç½®é—´éš”é«˜åº¦/å®½åº¦ ä¸Šè¿°é»˜è®¤å®žçŽ°é‡Œå¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤ç±»ï¼šä¸€æ˜¯éžfixç±»åž‹å¸ƒå±€ï¼Œåƒçº¿æ€§ã€Gridã€æ æ ¼ç­‰ï¼Œå®ƒä»¬çš„ç‰¹ç‚¹æ˜¯å¸ƒå±€åœ¨æ•´ä¸ªé¡µé¢æµé‡Œï¼Œéšé¡µé¢æ»šåŠ¨è€Œæ»šåŠ¨ï¼›å¦ä¸€ç±»å°±æ˜¯fixç±»åž‹çš„å¸ƒå±€ï¼Œå®ƒä»¬çš„å­èŠ‚ç‚¹å¾€å¾€ä¸éšé¡µé¢æ»šåŠ¨è€Œæ»šåŠ¨ã€‚ æ‰€æœ‰é™¤å¸ƒå±€å¤–çš„ç»„ä»¶å¤ç”¨ï¼ŒVirtualLayoutå°†ç”¨æ¥ç®¡ç†å¤§çš„æ¨¡å—å¸ƒå±€ç»„åˆï¼Œæ‰©å±•äº†RecyclerViewï¼Œä½¿å¾—åŒä¸€RecyclerViewå†…çš„ç»„ä»¶å¯ä»¥å¤ç”¨ï¼Œå‡å°‘Viewçš„åˆ›å»ºå’Œé”€æ¯è¿‡ç¨‹ã€‚ ä½¿ç”¨ç‰ˆæœ¬è¯·å‚è€ƒmvn repositoryä¸Šçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆç›®å‰æœ€æ–°ç‰ˆæœ¬æ˜¯1.0.1ï¼‰ï¼Œæœ€æ–°çš„ aar éƒ½ä¼šå‘å¸ƒåˆ° jcenter å’Œ MavenCentral ä¸Šï¼Œç¡®ä¿é…ç½®äº†è¿™ä¸¤ä¸ªä»“åº“æºï¼Œç„¶åŽå¼•å…¥aarä¾èµ–ï¼š 1234// gradlecompile (&apos;com.alibaba.android:vlayout:1.0.1@aar&apos;) &#123; transitive = true&#125; æˆ–è€…maven 1234567// pom.xml in maven&lt;dependency&gt; &lt;groupId&gt;com.alibaba.android&lt;/groupId&gt; &lt;artifactId&gt;vlayout&lt;/artifactId&gt; &lt;version&gt;1.0.1&lt;/version&gt; &lt;type&gt;aar&lt;/type&gt;&lt;/dependency&gt; åˆå§‹åŒ–LayoutManager 123final RecyclerView recyclerView = (RecyclerView) findViewById(R.id.recycler_view);final VirtualLayoutManager layoutManager = new VirtualLayoutManager(this);recyclerView.setLayoutManager(layoutManager); è®¾ç½®å›žæ”¶å¤ç”¨æ± å¤§å°ï¼Œï¼ˆå¦‚æžœä¸€å±å†…ç›¸åŒç±»åž‹çš„ View ä¸ªæ•°æ¯”è¾ƒå¤šï¼Œéœ€è¦è®¾ç½®ä¸€ä¸ªåˆé€‚çš„å¤§å°ï¼Œé˜²æ­¢æ¥å›žæ»šåŠ¨æ—¶é‡æ–°åˆ›å»º Viewï¼‰ï¼š 123RecyclerView.RecycledViewPool viewPool = new RecyclerView.RecycledViewPool();recyclerView.setRecycledViewPool(viewPool);viewPool.setMaxRecycledViews(0, 10); æ›´æ–°ï¼šçœ‹äº†å¾ˆå¤šäººå†™çš„demoå’Œæºç è§£æžåŽï¼Œéœ€æ±‚æé†’æ³¨æ„ä¸Šè¿°ç¤ºä¾‹ä»£ç é‡Œåªé’ˆå¯¹type=0çš„itemè®¾ç½®äº†å¤ç”¨æ± çš„å¤§å°ï¼Œå¦‚æžœä½ çš„é¡µé¢æœ‰å¤šç§typeï¼Œéœ€è¦ä¸ºæ¯ä¸€ç§ç±»åž‹çš„åˆ†åˆ«è°ƒæ•´å¤ç”¨æ± å¤§å°å‚æ•°ã€‚ åŠ è½½æ•°æ®æ—¶æœ‰ä¸¤ç§æ–¹å¼: ä¸€ç§æ˜¯ä½¿ç”¨ DelegateAdapter, å¯ä»¥åƒå¹³å¸¸ä¸€æ ·å†™ç»§æ‰¿è‡ªDelegateAdapter.Adapterçš„Adapter, åªæ¯”ä¹‹å‰çš„Adapteréœ€è¦å¤šé‡è½½onCreateLayoutHelperæ–¹æ³•ã€‚ å…¶ä»–çš„å’Œé»˜è®¤Adapterä¸€æ ·ã€‚ 1234567891011121314DelegateAdapter delegateAdapter = new DelegateAdapter(layoutManager, hasConsistItemType);recycler.setAdapter(delegateAdapter);// ä¹‹åŽå¯ä»¥é€šè¿‡ setAdapters æˆ– addAdapteræ–¹æ³•æ·»åŠ DelegateAdapter.AdapterdelegateAdapter.setAdapters(adapters);// orpublic class CustomAdapter extends DelegateAdapter.Adapter &#123; ......&#125;CustomAdapter adapter = new CustomAdapter(data, new GridLayoutHelper());delegateAdapter.addAdapter(adapter); æ›´æ–°ï¼šhasConsistItemTypeè¿™ä¸ªå‚æ•°æœ‰æ—¶å€™å®¹æ˜“è¢«äººå¿½ç•¥ï¼Œå½“hasConsistItemType=trueçš„æ—¶å€™ï¼Œä¸è®ºæ˜¯ä¸æ˜¯å±žäºŽåŒä¸€ä¸ªå­adapterï¼Œç›¸åŒç±»åž‹çš„iteméƒ½èƒ½å¤ç”¨ã€‚è¡¨ç¤ºå®ƒä»¬å…±äº«ä¸€ä¸ªç±»åž‹ã€‚ å½“hasConsistItemType=falseçš„æ—¶å€™ï¼Œä¸åŒå­adapterä¹‹é—´çš„ç±»åž‹ä¸å…±äº« å¦ä¸€ç§æ˜¯å½“ä¸šåŠ¡æœ‰è‡ªå®šä¹‰çš„å¤æ‚éœ€æ±‚çš„æ—¶å€™, å¯ä»¥ç»§æ‰¿è‡ªVirtualLayoutAdapter, å®žçŽ°è‡ªå·±çš„Adapter 123456789101112131415161718192021public class MyAdapter extends VirtualLayoutAdapter &#123; ......&#125;MyAdapter myAdapter = new MyAdapter(layoutManager);//æž„é€  layoutHelper åˆ—è¡¨List&lt;LayoutHelper&gt; helpers = new LinkedList&lt;&gt;();GridLayoutHelper gridLayoutHelper = new GridLayoutHelper(4);gridLayoutHelper.setItemCount(25);helpers.add(gridLayoutHelper);GridLayoutHelper gridLayoutHelper2 = new GridLayoutHelper(2);gridLayoutHelper2.setItemCount(25);helpers.add(gridLayoutHelper2);//å°† layoutHelper åˆ—è¡¨ä¼ é€’ç»™ adaptermyAdapter.setLayoutHelpers(helpers);//å°† adapter è®¾ç½®ç»™ recyclerViewrecycler.setAdapter(myAdapter); åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦ä½¿ç”¨è€…æ³¨æ„åœ¨å½“LayoutHelpersçš„ç»“æž„æˆ–è€…æ•°æ®æ•°é‡ç­‰ä¼šå½±å“åˆ°å¸ƒå±€çš„å…ƒç´ å˜åŒ–æ—¶ï¼Œéœ€è¦ä¸»åŠ¨è°ƒç”¨setLayoutHelpersåŽ»æ›´æ–°å¸ƒå±€æ¨¡å¼ã€‚ Demo è¯¦ç»†ä»£ç å‚è€ƒï¼šgithub æ‰©å±•å¸ƒå±€å¦‚æžœé»˜è®¤çš„å¸ƒå±€å®žçŽ°æ»¡è¶³ä¸äº†ï¼Œä½ çš„éœ€æ±‚ï¼Œå¯ä»¥æ³¨å†Œè‡ªå®šä¹‰çš„LayoutHelperæ¥å®žçŽ°å¸ƒå±€é€»è¾‘ã€‚æœ‰ä¸‰ç§åŸºç±»å¯ä»¥ä¾›ä½ ä½¿ç”¨ï¼š BaseLayoutHelperï¼šåƒLinearLayoutHelperã€GridLayoutHelperç­‰ï¼Œå†…éƒ¨Viewå¯ä»¥æŒ‰è¡Œå›žæ”¶çš„å¸ƒå±€ï¼Œå¯ç›´æŽ¥ç»§æ‰¿æ­¤ç±»ï¼Œä¸»è¦å®žçŽ°layoutViews()ã€computeAlignOffset()ç­‰æ–¹æ³•ã€‚ AbstractFullFillLayoutHelperï¼šæœ‰äº›å¸ƒå±€å†…éƒ¨çš„View å¹¶ä¸æ˜¯ä»Žä¸Šè‡³ä¸‹æŽ’åˆ—çš„é¡ºåºï¼Œå³ Adatper é‡Œçš„æ•°æ®é¡ºåºå’Œç‰©ç†è§†å›¾é¡ºåºä¸ä¸€è‡´ï¼Œé‚£ä¹ˆå¯èƒ½å°±ä¸èƒ½æŒ‰æ•°æ®é¡ºåºå¸ƒå±€å’Œå›žæ”¶ï¼Œéœ€è¦ä¸€æ¬¡æ€§å¸ƒå±€ã€ä¸€æ¬¡æ€§å›žæ”¶ã€‚ä¸»è¦å®žçŽ°layoutViews()ç­‰æ–¹æ³•ã€‚å¯å‚è€ƒOnePlusNLayoutHelperã€‚ FixAreaLayoutHelperï¼šfix ç±»åž‹çš„å¸ƒå±€ï¼Œå­èŠ‚ç‚¹ä¸éšé¡µé¢æ»šåŠ¨è€Œæ»šåŠ¨ã€‚ä¸»è¦å®žçŽ°layoutViews()ã€beforeLayout()ã€afterLayout()ç­‰æ–¹æ³•ï¼Œå¯å‚è€ƒFixLayoutHelperã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Tangramçš„åŸºç¡€ vlayout for android]]></title>
    <url>%2Fposts%2Fdf690640.html</url>
    <content type="text"><![CDATA[å‰è¨€vlayout æ˜¯æ‰‹æœºå¤©çŒ« Android ç‰ˆå†…å¹¿æ³›ä½¿ç”¨çš„ä¸€ä¸ªåŸºç¡€ UI æ¡†æž¶é¡¹ç›® æä¾›äº†ä¸€ä¸ªç”¨äºŽRecyclerViewçš„è‡ªå®šä¹‰çš„LayoutMangerï¼Œå¯ä»¥å®žçŽ°ä¸åŒå¸ƒå±€æ ¼å¼çš„æ··æŽ’ï¼Œç›®æ ‡æ˜¯æ”¯æ’‘å®¢æˆ·ç«¯nativeé¡µé¢çš„å¿«é€Ÿå¼€å‘ã€‚å®ƒä¹Ÿæ˜¯ Tangram æ¡†æž¶çš„åŸºç¡€æ¨¡å—ï¼ŒçŽ°å·²å¼€æºï¼Œæ¬¢è¿Žç§»æ­¥åˆ° github ä¸ŠæŒ‡æ•™ã€‚ ç®€ä»‹èƒŒæ™¯Androidä¸­UIæ€§èƒ½æ¶ˆè€—ä¸»è¦æ¥è‡ªäºŽä¸¤ä¸ªæ–¹é¢ï¼š å¸ƒå±€å±‚æ¬¡åµŒå¥—å¯¼è‡´å¤šé‡measure/layout ViewæŽ§ä»¶çš„åˆ›å»ºå’Œé”€æ¯ é™¤äº†ä»Žåœ¨å®žè·µä¸­æ³¨æ„æ¶ˆé™¤åµŒå¥—å¸ƒå±€ï¼ŒAndroidå®˜æ–¹ä¹Ÿæä¾›äº†ListView/GirdView/RecyclerViewç­‰åŸºç¡€ç©ºé—´æ¥å¤„ç†Viewçš„å›žæ”¶ä¸Žå¤ç”¨ã€‚ ä½†å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½ä¼šç¢°åˆ°è§†è§‰éœ€è¦åœ¨ä¸€ä¸ªé•¿åˆ—è¡¨ä¸‹åšå¤šç§ç±»åž‹çš„å¸ƒå±€æ¥åˆ†é…å„ç§å…ƒç´ , ç‰¹åˆ«æ˜¯ç”µå•†ä¸šåŠ¡å„ç±»é¦–é¡µï¼Œé¢‘é“ç­‰é¡µé¢ï¼Œå…ƒç´ ç»“æž„å¤æ‚å¤šæ ·ã€‚ è¿™ç§æ—¶å€™å®žçŽ°çš„é€‰æ‹©æœ‰ä¸ç”¨å¤ç”¨ï¼Œç›´æŽ¥ç”¨å„ä¸ªç»„ä»¶è¿›è¡Œæ‹¼æŽ¥ï¼Œä½†è¿™æ ·ä¼šæŸå¤±æ€§èƒ½ï¼›é€‰æ‹©ä¸€ä¸ªä¸»è¦çš„å¤ç”¨å®¹å™¨, å¦‚ListViewæˆ–è€…RecyclerView+LinearLayoutManagerç­‰ï¼Œç„¶åŽåœ¨å…¶ä¸­ä½¿ç”¨åµŒå¥—ç­‰æ–¹å¼å¯¹å…¶ä»–çš„å¸ƒå±€æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·ä¸€ä¸ªæ˜¯å‡å°‘äº†å¤ç”¨çš„èƒ½åŠ›ï¼Œå¦ä¸€ä¸ªæ˜¯å¦‚æžœéœ€è¦åµŒå¥—æ— æ³•å…¼å®¹çš„å¸ƒå±€çš„æ—¶å€™ï¼Œéœ€è¦å¤„ç†åµŒå¥—æ»‘åŠ¨çš„æƒ…å†µã€‚ æ—¢ç„¶RecyclerViewæä¾›äº†åŸºç¡€çš„å›žæ”¶å¤ç”¨åŠŸèƒ½ï¼Œä¹Ÿæ”¯æŒLayoutManagerçš„æ‰©å±•ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½ç”¨ä¸€ä¸ªLayoutManagerå°±å®Œæˆæ‰€æœ‰çš„å¸ƒå±€ç±»åž‹å‘¢ï¼Ÿ æ„Ÿè§‰çš„è¿™æ˜¯ä¸€ä¸ªä¸é”™çš„æ–¹å‘ï¼Œç›®å‰åœ¨ github ä¸Šä¹Ÿèƒ½æ‰¾åˆ°ç±»ä¼¼çš„é¡¹ç›®ï¼Œä½†æ˜¯è¿™äº›ä¹‹å‰ä¹ŸåŸ‹æœ‰ä¸å°‘bug, å¤§éƒ¨åˆ†éƒ½æ˜¯å› ä¸ºåœ¨ä¸€äº›ç‰¹æ®Šåœºæ™¯ä¸‹å’ŒRecyclerViewç›¸å…³çš„å…¶ä»–çš„ç±»ä¸€èµ·ä½¿ç”¨æ—¶å‡ºçŽ°é—®é¢˜ã€‚ ä¸ºäº†é¿å…æŽ‰å…¥bugå¤§å‘ï¼Œæˆ‘ä»¬å†³å®šåŸºäºŽLinearLayoutManageræ¥åšæ”¹é€ ã€‚ ç‰¹æ€§ è‡ªå®šä¹‰äº†ä¸€ä¸ªVirtualLayoutManagerï¼Œå®ƒç»§æ‰¿è‡ª LinearLayoutManagerï¼›å¼•å…¥äº† LayoutHelper çš„æ¦‚å¿µï¼Œå®ƒè´Ÿè´£å…·ä½“çš„å¸ƒå±€é€»è¾‘ï¼›VirtualLayoutManagerç®¡ç†äº†ä¸€ç³»åˆ—LayoutHelperï¼Œå°†å…·ä½“çš„å¸ƒå±€èƒ½åŠ›äº¤ç»™LayoutHelperæ¥å®Œæˆï¼Œæ¯ä¸€ç§LayoutHelperæä¾›ä¸€ç§å¸ƒå±€æ–¹å¼ï¼Œæ¡†æž¶å†…ç½®æä¾›äº†å‡ ç§å¸¸ç”¨çš„å¸ƒå±€ç±»åž‹ï¼ŒåŒ…æ‹¬ï¼šç½‘æ ¼å¸ƒå±€ã€çº¿æ€§å¸ƒå±€ã€ç€‘å¸ƒæµå¸ƒå±€ã€æ‚¬æµ®å¸ƒå±€ã€å¸è¾¹å¸ƒå±€ç­‰ã€‚è¿™æ ·å®žçŽ°äº†æ··åˆå¸ƒå±€çš„èƒ½åŠ›ï¼Œå¹¶ä¸”æ”¯æŒæ‰©å±•å¤–éƒ¨ï¼Œæ³¨å†Œæ–°çš„LayoutHelperï¼Œå®žçŽ°ç‰¹æ®Šçš„å¸ƒå±€æ–¹å¼ã€‚ æ¯ä¸€ç§LayoutHelperè´Ÿè´£å¸ƒå±€ä¸€æ‰¹ç»„ä»¶èŒƒå›´å†…çš„ç»„ä»¶ï¼Œä¸åŒç»„ä»¶èŒƒå›´å†…çš„ç»„ä»¶ä¹‹é—´ï¼Œå¦‚æžœç±»åž‹ç›¸åŒï¼Œå¯ä»¥åœ¨æ»‘åŠ¨è¿‡ç¨‹ä¸­å›žæ”¶å¤ç”¨ã€‚å› æ­¤å›žæ”¶ç²’åº¦æ¯”è¾ƒç»†ï¼Œä¸”å¯ä»¥è·¨å¸ƒå±€ç±»åž‹å¤ç”¨ã€‚ æä¾›äº†è‡ªå®šä¹‰çš„å¸ƒå±€æ ·å¼ï¼Œå¯ä»¥æ»¡è¶³å¤šæ ·åŒ–çš„å¸ƒå±€éœ€æ±‚ï¼Œæ¯”å¦‚æ¯ä¸€ä¸ªç»„ä»¶èŒƒå›´å†…çš„å¸ƒå±€æ”¯æŒä¸€ä¸ªèƒŒæ™¯é¢œè‰²ã€èƒŒæ™¯å›¾ç‰‡ï¼›ç½‘æ ¼å¸ƒå±€é‡Œï¼Œå¯ä»¥æ”¯æŒ1åˆ—ã€2åˆ—ã€3åˆ—ã€4åˆ—ã€5åˆ—å…±5ç§æ ·å¼ï¼Œæ¯ä¸€åˆ—çš„å®½åº¦é»˜è®¤å¹³å‡åˆ†é…å±å¹•å®½åº¦ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæŒ‰æ¯”ä¾‹åˆ†é…åˆ—å®½ã€‚å¸è¾¹å¸ƒå±€æ”¯æŒå¸åˆ°å±å¹•åº•éƒ¨ã€å±å¹•é¡¶éƒ¨ã€å±å¹•å·¦è¾¹ã€å±å¹•å³è¾¹ã€‚è¿™äº›éƒ½æ˜¯ç³»ç»Ÿé»˜è®¤çš„LayoutManagerä¸æ”¯æŒçš„ã€‚ æž¶æž„æ•´ä½“çš„è®¾è®¡æ–¹æ¡ˆå’Œæ€è·¯å¦‚ä¸‹ï¼š RecyclerViewæ˜¯æ•´ä¸ªé¡µé¢çš„ä¸»ä½“ï¼Œå®ƒçš„è¿è¡Œéœ€è¦ç»‘å®šä¸€ä¸ªAdapterå’ŒLayoutManagerï¼Œåœ¨æˆ‘ä»¬çš„è®¾è®¡é‡Œè‡ªå®šä¹‰äº†VirtualLayoutAdapterå’ŒVirtualLayoutManageræ¥ç»‘å®šåˆ°RecyclerViewã€‚ VirtualLayoutAdapterç»§æ‰¿è‡ªç³»ç»Ÿçš„Adaperï¼Œå®ƒé™¤äº†æä¾›ç³»ç»Ÿè¦æ±‚åˆ›å»ºç»„ä»¶ã€ç»‘å®šæ•°æ®åˆ°ç»„ä»¶çš„åŠŸèƒ½ï¼Œå®šä¹‰äº†ä¸¤ä¸ªæŽ¥å£ï¼šgetLayoutHelper()â€”â€”ç”¨äºŽè¿”å›žæŸä¸ªä½ç½®ç»„ä»¶å¯¹åº”çš„ä¸€ä¸ªLayoutHelperï¼›setLayoutHelpers()â€”â€”ä¸šåŠ¡æ–¹è°ƒç”¨æ­¤æ–¹æ³•è®¾ç½®æ•´ä¸ªé¡µé¢æ‰€éœ€è¦çš„ä¸€ç³»åˆ—LayoutHelperã€‚ä¸è¿‡è¿™ä¸¤ä¸ªæ–¹æ³•çš„å…·ä½“å®žçŽ°éƒ½å§”æ‰˜ç»™VirtualLayoutManageræ¥å®Œæˆã€‚ VirtualLayoutManagerç»§æ‰¿è‡ªç³»ç»Ÿçš„ LinearLayoutManagerï¼Œåœ¨RecyclerViewåŠ è½½ç»„ä»¶æˆ–è€…æ»‘åŠ¨çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨VirtualLayoutManagerï¼Œå‘Šè¯‰å®ƒå½“å‰è¿˜æœ‰å“ªäº›ç©ºç™½åŒºåŸŸå¯ä»¥ç”¨æ¥æ‘†æ”¾ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨äº†æž¶æž„å›¾ä¸­æ‰€ç¤ºçš„layoutChunkæ–¹æ³•ã€‚ VirtualLayoutManagerä¼šæŒæœ‰ä¸€ä¸ªLayoutHelperFinderï¼Œå½“layoutChunckè¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šä¼ å…¥ä¸€ä¸ªä½ç½®å‚æ•°ï¼Œå‘Šè¯‰LayoutManagerå½“å‰è¦å¸ƒå±€ç¬¬å‡ ä¸ªç»„ä»¶ï¼ŒLayoutHelperFinderå°±é€šè¿‡è¿™ä¸ªä½ç½®æ‰¾åˆ°å½“å‰è¿™ä¸ªä½ç½®å¯¹åº”çš„LayoutHelperï¼Œå› ä¸ºæ¯ä¸ªLayoutHelperéƒ½ä¼šç»‘å®šå®ƒè´Ÿè´£çš„å¸ƒå±€åŒºåŸŸçš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚ LayoutHelperè´Ÿè´£å…·ä½“çš„å¸ƒå±€é€»è¾‘ï¼Œå®ƒæœ‰ä¸€ç³»åˆ—å­æ¨¡å—ï¼Œå…¶ä¸­åŸºç±»LayoutHelperå®šä¹‰äº†ä¸€ç³»åˆ—æŽ¥å£ï¼Œç”¨æ¥å’ŒVirtualLayoutManageré€šä¿¡ï¼ŒåŒ…æ‹¬isOutOfRange()â€”â€”å‘Šè¯‰VirtualLayoutManagerå®ƒæ‰€ä¼ é€’è¿‡æ¥ä½ç½®æ˜¯å¦åœ¨å½“å‰LayoutHelperçš„å¸ƒå±€åŒºåŸŸå†…ï¼›setRange()â€”â€”è®¾ç½®å½“å‰LayoutHelperè´Ÿè´£çš„å¸ƒå±€åŒºåŸŸï¼›beforeLayout()â€”â€”åœ¨çœŸæ­£å¸ƒå±€ä¹‹å‰åšä¸€äº›å‰ç½®å·¥ä½œï¼›doLayout()â€”â€”çœŸæ­£çš„å¸ƒå±€é€»è¾‘æŽ¥å£ï¼›afterLayout()â€”â€”åœ¨å¸ƒå±€å®Œæˆä¹‹åŽåšä¸€äº›åŽç½®å·¥ä½œï¼›MarginLayoutHelperç¨å¾®æ‰©å±•LayoutHelperï¼Œæä¾›äº†å¸ƒå±€å¸¸ç”¨çš„å†…è¾¹è·paddingã€å¤–è¾¹è·marginçš„è®¡ç®—åŠŸèƒ½ï¼›BaseLayoutHelperæ˜¯ç¬¬ä¸€å±‚å…·ä½“å®žçŽ°ï¼Œå®žçŽ°äº†å½“å‰LayoutHelperåœ¨å±å¹•èŒƒå›´å†…çš„å…·ä½“åŒºåŸŸï¼Œç”¨äºŽå¡«å……å¯¹è¿™ä¸€åŒºåŸŸå¡«å……èƒŒæ™¯è‰²ã€èƒŒæ™¯å›¾ç­‰é€»è¾‘ã€‚è€Œå‰©ä¸‹çš„LinearLayoutHelperã€GridLayoutHelperç­‰è´Ÿè´£äº†å…·ä½“çš„å¸ƒå±€é€»è¾‘ï¼Œå®ƒä»¬éƒ½é‡ç‚¹å®žçŽ°äº†beforeLayout()ã€doLayout()ã€afterLayout()æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯åœ¨doLayout()æ–¹æ³•é‡Œï¼Œä¼šèŽ·å–ä¸€ä¸ªä¸€ç»„ä»¶ï¼ŒæŒ‰ç…§å„è‡ªçš„åè®®å¯¹ç»„ä»¶è¿›è¡Œå°ºå¯¸è®¡ç®—ã€ç•Œé¢å¸ƒå±€ã€‚æ¡†æž¶å†…ç½®äº†ä»¥ä¸‹å‡ ç§é‡è¦çš„ LayoutHelperï¼š LinearLayoutHelperï¼Œå®žçŽ°ç®€å•çš„çº¿æ€§å¸ƒå±€ï¼› GridLayoutHelperï¼Œå®žçŽ°ç½‘æ ¼å¸ƒå±€ï¼Œæ”¯æŒ1-5åˆ—çš„ç½‘æ ¼ï¼Œæ”¯æŒé…ç½®åˆ—é—´è·ã€è¡Œé—´è·ï¼Œæ”¯æŒä¸ç­‰å®½çš„ç½‘æ ¼ï¼› StaggeredLayoutHelperï¼Œå®žçŽ°ç€‘å¸ƒæµå¼çš„å¸ƒå±€ï¼› FloatLayoutHelperï¼Œè´Ÿè´£æ‚¬æµ®æ•ˆæžœï¼Œå¤„äºŽè¯¥å¸ƒå±€ä¸­çš„ç»„ä»¶ä¼šæ‚¬æµ®åœ¨æ•´ä¸ªé¡µé¢ä¸Šæ–¹ï¼Œå¹¶ä¸”å¯æ‹–æ‹½ï¼Œä¸éšé¡µé¢æ»šåŠ¨è€Œæ»šåŠ¨ï¼› FixedLayoutHelperï¼Œè´Ÿè´£å›ºå®šä½ç½®çš„å¸ƒå±€ï¼Œå®ƒå¯å›ºå®šåœ¨å±å¹•æŸä¸ªä½ç½®ï¼Œä¸å¯æ‹–æ‹½ï¼Œä¸éšé¡µé¢æ»šåŠ¨è€Œæ»šåŠ¨ï¼› StickyLayoutHelperï¼Œå®ƒæ˜¯ä¸€ç§å¸è¾¹çš„å¸ƒå±€ï¼Œå½“å®ƒåŒ…å«çš„ç»„ä»¶å¤„äºŽå±å¹•å¯è§èŒƒå›´å†…çš„æ—¶å€™ï¼Œåƒæ­£å¸¸çš„ç»„ä»¶ä¸€æ ·éšé¡µé¢æ»šåŠ¨è€Œæ»šåŠ¨ï¼Œå½“ç»„ä»¶å°†è¦è¢«æ»‘å‡ºå±å¹•è¿”å›žçš„æ—¶å€™ï¼Œå¯ä»¥å¸åˆ°å±å¹•çš„é¡¶éƒ¨æˆ–è€…åº•éƒ¨ï¼Œå®žçŽ°ä¸€ç§å¸ä½çš„æ•ˆæžœï¼› å·¥ä½œæµç¨‹åˆå§‹åŒ– åœ¨ä½¿ç”¨vlayoutçš„æ—¶å€™ï¼Œé¦–å…ˆåšåˆå§‹åŒ–å·¥ä½œï¼Œå¯¹ä¸šåŠ¡ä½¿ç”¨æ–¹æ¥è¯´ï¼Œå’Œä½¿ç”¨æ™®é€šçš„ RecyclerView + LayoutManager åˆå§‹åŒ–æµç¨‹åŸºæœ¬ä¸€è‡´ã€‚å¯¹äºŽæ¡†æž¶æµç¨‹ä¸Šæ¥è¯´ï¼Œå‰å‰åŽåŽæ¶‰åŠäº†6ä¸ªè§’è‰²ï¼ŒåŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š vlayoutçš„ä¸šåŠ¡ä½¿ç”¨æ–¹åˆå§‹åŒ–RecyclerViewå¯¹è±¡ã€‚ åˆ›å»ºä¸€ä¸ªVirtualLayoutAdapterå¯¹è±¡ï¼Œå®žçŽ°ç›¸å…³æŽ¥å£ã€‚ åˆå§‹åŒ–ä¸€ä¸ªVirtualLayoutManagerå¯¹è±¡ã€‚åœ¨åˆå§‹åŒ–VirtualLayoutAdapterçš„æ—¶å€™ï¼Œå†…éƒ¨ä¹Ÿåˆå§‹åŒ–äº†ä¸€ä¸ªRangeLayoutFinderå¯¹è±¡ï¼Œç”¨æ¥åŽç»­çš„LayoutHelperæŸ¥æ‰¾ã€‚ ä¸šåŠ¡ä½¿ç”¨æ–¹éœ€è¦å°†VirtualLayoutAdapterå’ŒVirtualLayoutManageréƒ½ç»‘å®šåˆ°RecyclerViewé‡Œã€‚ èŽ·å–æ•°æ®åˆ—è¡¨ï¼Œè¿™ä¸ªæ•°æ®å°±æ˜¯è¦æ˜¾ç¤ºåˆ°é¡µé¢ä¸Šçš„æºæ•°æ®ï¼Œå®ƒå¯ä»¥æ˜¯åŒæ­¥èŽ·å–ï¼Œä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥ä»Žæœ¬åœ°ç£ç›˜æˆ–è€…è¿œç¨‹æœåŠ¡å™¨èŽ·å–ã€‚æœ€å…³é”®çš„åœ°æ–¹åœ¨ç”¨è¿™ä¸ªæ•°æ®åˆ—è¡¨è¦åŒ…å«ä¸€ç»„å¸ƒå±€å’Œä½ç½®ä¿¡æ¯ï¼Œèƒ½å¤Ÿç”¨æ¥è¯†åˆ«æ•°æ®åˆ—è¡¨ä¸­ä»Žç¬¬mä¸ªä½ç½®åˆ°ç¬¬nä¸ªä½ç½®çš„æ•°æ®å®ƒä»¬æ˜¯è¯¥ç”¨é‚£ç§å¸ƒå±€æ–¹å¼è¿›è¡Œå¸ƒå±€ã€‚è¿™ä¸ªå¸ƒå±€å’Œä½ç½®ä¿¡æ¯çš„æ•°æ®ç»“æž„å¹¶ä¸åšå¼ºåˆ¶é™åˆ¶ï¼Œåªè¦èƒ½æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œç”¨æ¥å¿«é€Ÿæ–¹ä¾¿åœ°å®Œæˆä¸‹è¿°ç¬¬6æ­¥ã€‚ æ ¹æ®æ•°æ®åˆ—è¡¨å’Œæºæ•°æ®æä¾›çš„å¸ƒå±€ä½ç½®ä¿¡æ¯ï¼Œç”ŸæˆLayoutHelperåˆ—è¡¨ï¼Œæ¯ä¸ªLayoutHelperå¯¹è±¡ä¼šè¢«çŸ¥é“å®ƒè´Ÿè´£çš„æºæ•°æ®ä½ç½®èŒƒå›´ã€æºæ•°æ®çš„ä¸ªæ•°ç­‰ä¿¡æ¯ã€‚ å°†ç”Ÿæˆçš„LayoutHelperåˆ—è¡¨ä¼ é€’ç»™VirtualLayoutAdapterã€‚ VirtualLayoutAdapterè¿›ä¸€æ­¥å°†LayoutHelperåˆ—è¡¨ç»™VirtualLayoutManagerã€‚ VirtualLayoutManagerä¹Ÿè¿›ä¸€æ­¥å°†LayoutHelperåˆ—è¡¨ä¼ é€’ç»™RangeLayoutHelperFinderã€‚ RangeLayoutHelperFinderçœŸæ­£å¼€å§‹å¤„ç†è¿™äº›LayoutHelperåˆ—è¡¨ï¼Œå®ƒä¼šæ ¹æ®æ¯ä¸ªLayoutHelperè´Ÿè´£å¸ƒå±€çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ï¼Œå¯¹LayoutHelperåšç´¢å¼•ï¼Œè¿™æ ·å½“åŽç»­VirtualLayoutManagerä¼ å…¥ä¸€ä¸ªä½ç½®å‚æ•°è®©RangeLayoutHelperFinderæŸ¥æ‰¾ä¸€ä¸ªå¯¹åº”çš„LayoutHelperæ—¶ï¼ŒRangeLayoutHelperFinderä¼šé€šè¿‡äºŒåˆ†æŸ¥æ‰¾çš„æ–¹å¼è¿”å›žä¸€ä¸ªLayoutHelperã€‚ æŽ¥ä¸‹æ¥è¿˜è¦å°†æ•°æ®åˆ—è¡¨ä¹Ÿä¼ é€’ç»™VirtualLayoutAdapterã€‚ è‡³æ­¤ï¼Œæ•´ä¸ªåˆå§‹åŒ–æµç¨‹å°±å®Œæˆï¼Œè¿™é‡Œæš´éœ²ç»™ä¸šåŠ¡æ–¹çš„ä¸»è¦æ˜¯VirtualLayoutAdapterï¼Œå®ƒæŽ¥æ”¶æ•°æ®åˆ—è¡¨å’ŒLayoutHelperåˆ—è¡¨ï¼Œå†…éƒ¨åœ¨ä¼ é€’ç»™RecyclerViewå’ŒVirtualLayoutManagerè¿›è¡ŒåŽç»­çš„å·¥ä½œã€‚ å¸ƒå±€è¿‡ç¨‹ å½“å®Œæˆå‰é¢çš„åˆå§‹åŒ–å·¥ä½œï¼Œå°†æ•°æ®å’ŒLayoutHelperéƒ½ç»‘å®šåˆ°vlayoutå†…éƒ¨ä¹‹åŽï¼Œç´§æŽ¥ç€å°±å¯ä»¥å¼€å§‹å¸ƒå±€æµç¨‹äº†ã€‚è¿™é‡Œæ— è®ºæ˜¯åˆšæ‰“å¼€é¡µé¢ç¬¬ä¸€æ¬¡å¸ƒå±€ï¼Œè¿˜æ˜¯ç”¨æˆ·æ»‘åŠ¨é¡µé¢ï¼Œè¿›è¡Œä¸€æ¬¡æ–°çš„å¸ƒå±€ï¼Œæµç¨‹éƒ½æ˜¯ä¸€è‡´çš„ã€‚ RecyclerViewå†…éƒ¨ä¼šç»´æŠ¤ä¸€ä¸ªçŠ¶æ€ï¼Œè®¡ç®—å½“å‰æ˜¯å¦å­˜åœ¨æœªå¡«å……æ»¡ç»„ä»¶çš„åŒºåŸŸï¼ŒåŒºåŸŸè¿˜æœ‰å¤šå¤§ã€‚ å¦‚æžœå‘çŽ°æœ‰ç©ºç™½åŒºåŸŸï¼Œå°±å°†é¡µé¢çŠ¶æ€ä¼ ç»™LayoutManagerâ€”â€”åœ¨æˆ‘ä»¬çš„æ¡†æž¶é‡Œâ€”â€”å°±æ˜¯VirtualLayoutManagerï¼Œå‘Šè¯‰å®ƒè¦è¿›è¡Œç»„ä»¶çš„å¡«å……å¸ƒå±€ã€‚VirtualLayoutManagerèƒ½èŽ·å–åˆ°çš„ä¿¡æ¯æœ‰å½“å‰å¯è§çš„ç¬¬ä¸€ä¸ªç»„ä»¶çš„ä½ç½®ï¼Œå½“å‰å¯è§çš„æœ€åŽä¸€ä¸ªç»„ä»¶çš„ä½ç½®ï¼Œå½“å‰ç©ºç™½åŒºåŸŸçš„å¤§å°ï¼Œè¿™äº›ä¿¡æ¯éƒ½æ˜¯RecyclerViewæä¾›çš„ï¼ŒåŽé¢æ‰å¼€å§‹çœŸæ­£vlayoutå‘æŒ¥ä½œç”¨çš„æ—¶å€™ã€‚ VirtualLayoutManagerå…ˆåŽ»éåŽ†æ‰€æœ‰LayoutHelperï¼Œå‘Šè¯‰å®ƒä»¬å½“å‰å¯è§†èŒƒå›´çš„ä½ç½®ä¿¡æ¯ï¼Œä¸åœ¨èŒƒå›´ä¹‹å†…çš„LayoutHelperå¯ä»¥åšä¸€äº›æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚å°†ç»‘å®šè¿‡èƒŒæ™¯çš„LayoutHelperè¦æ¸…ç†èƒŒæ™¯ã€‚ VirtualLayoutManagerèŽ·å–åˆ°ä¸‹ä¸€ä¸ªè¦å¡«å……çš„ç»„ä»¶çš„ä½ç½®ä¿¡æ¯ã€‚ é€šè¿‡RangeLayoutHelperFinderæ‰¾åˆ°ä¸‹ä¸€ä¸ªç»„ä»¶å¯¹åº”çš„LayoutHelperã€‚ LayoutHelperå¼€å§‹çœŸæ­£å¸ƒå±€ä¸€ä¸ªæˆ–è€…å¤šä¸ªç»„ä»¶ï¼Œ æ³¨æ„ä¸€ä¸ªLayoutHelperä¸€æ¬¡å¸ƒå±€åœ¨å®½åº¦ä¸Šä¼šå¸ƒå±€æ»¡ä¸€æ•´è¡Œçš„åŒºåŸŸï¼Œå¯¹äºŽLinearLayoutHelperã€FixedLayoutHelperç­‰LayoutHelperï¼Œä¸€ä¸ªç»„ä»¶å°±å ä¸€æ•´è¡Œï¼Œè¿™ä¸ªæ—¶å€™å°±å¸ƒå±€ä¸€ä¸ªç»„ä»¶å°±è¡Œäº†ï¼›è€ŒGridLayoutHelperã€StaggeredLayoutHelperç­‰ä¸€è¡Œå¯èƒ½ä¼šæ‘†å¤šä¸ªç»„ä»¶ï¼Œå®ƒä»¬ä¸€æ¬¡å¸ƒå±€ä¼šå°†å°½å¯èƒ½å¤šçš„ç»„ä»¶éƒ½èŽ·å–åˆ°å¡«å……æ»¡ä¸€è¡Œå®½åº¦ã€‚è‡³äºŽèƒ½å¡«å……å¤šå°‘é«˜åº¦ï¼Œé‚£å°±æ ¹æ®ç»„ä»¶è‡ªå·±å ç”¨çš„é«˜åº¦æ¥å†³å®šäº†ã€‚ LayoutHelperä¼šä»Žè®©RecyclerViewè¿”å›žä¸€ä¸ªç»„ä»¶ï¼ŒRecyclerViewä¼šå°è¯•ä»Žå›žæ”¶æ± é‡ŒèŽ·å–ä¸€ä¸ªè¢«ç¼“å­˜çš„ç»„ä»¶ï¼Œå¦‚æžœå­˜åœ¨ç¼“å­˜ç»„ä»¶ï¼Œå°±ç›´æŽ¥è¿”å›žç»™LayoutHelperä½¿ç”¨ï¼Œå¦‚æžœä¸å­˜åœ¨ï¼Œåˆ™è¦è°ƒç”¨Adapterâ€”â€”åœ¨vlayoutæ¡†æž¶é‡Œâ€”â€”å°±æ˜¯VirtualLayoutAdapteråŽ»ç”Ÿæˆä¸€ä¸ªæ–°çš„ ç»„ä»¶å®žä¾‹ã€‚è¿™ä¸ªé€»è¾‘æ˜¯RecyclerViewçš„å›ºæœ‰é€»è¾‘ï¼Œä¹Ÿå°±ç»„ä»¶å¤ç”¨çš„èƒ½åŠ›ã€‚ å½“RecyclerViewå†…éƒ¨ä¸å­˜åœ¨ä¸€ä¸ªç±»åž‹çš„ç»„ä»¶ç¼“å­˜æ—¶ï¼ŒVirtualLayoutAdapterç”Ÿæˆä¸€ä¸ªç»„ä»¶ï¼Œä¸€æ­¥ä¸€æ­¥è¿”å›žç»™LayoutHelperã€‚ LayoutHelperèŽ·å–åˆ°äº†ä¸‹ä¸€ä¸ªè¦å¸ƒå±€çš„ç»„ä»¶ï¼Œå¼€å§‹å¸ƒå±€ã€‚ å¸ƒå±€ä¹‹å‰å…ˆå¯¹ç»„ä»¶è¿›è¡Œä¸€æ¬¡å®½ã€é«˜çš„æµ‹é‡è®¡ç®—ï¼Œå®½åº¦æ˜¯LayoutHelperé€šè¿‡å¸ƒå±€ä¿¡æ¯ã€æ ·å¼ç­‰æ¡ä»¶è®¡ç®—å¾—åˆ°çš„ï¼Œé™å®šäº†å½“å‰è¿™ä¸ªç»„ä»¶åªèƒ½è¿™ä¹ˆå®½ï¼Œè€Œé«˜åº¦ä¸ç”±LayoutHelperå†³å®šï¼Œè€Œæ˜¯é€šè¿‡æµ‹é‡ç»„ä»¶çš„é«˜åº¦æ¥èŽ·å–ã€‚ æœ‰äº†ç»„ä»¶çš„å®½é«˜ä¿¡æ¯ï¼Œç»“åˆä¸€äº›æ ·å¼ï¼Œæ¯”å¦‚å†…è¾¹è·ã€å¤–è¾¹è·ã€ç»„ä»¶é—´é—´è·ç­‰ä¿¡æ¯ï¼ŒLayoutHelperå¼€å§‹å¸ƒå±€å½“å‰ç»„ä»¶çš„ä½ç½®ã€‚ å½“å¸ƒå±€å®Œä¸€è¡Œç»„ä»¶ä¹‹åŽï¼Œè¦å†åŽ»éåŽ†æ‰€æœ‰LayoutHelperï¼Œå‘Šè¯‰å®ƒä»¬å½“å‰å¯è§†èŒƒå›´çš„ä½ç½®ä¿¡æ¯ï¼Œåšä¸€äº›åŽç½®å·¥ä½œï¼Œæ¯”å¦‚æ–°å¸ƒå±€çš„åŒºåŸŸæ˜¯ä¸æ˜¯æœ‰èƒŒæ™¯è¦ç»‘å®šï¼Œæœ‰çš„è¯è¦åšèƒŒæ™¯çš„è®¾ç½®ã€‚æ‚¬æµ®ç±»å¸ƒå±€è¦æ ¹æ®ä½ç½®åšå¸é¡¶æˆ–è€…å¸åº•çš„ç‰¹æ®Šå¤„ç†ï¼Œåœ¨å¯è§èŒƒå›´å†…çš„æ‚¬æµ®ç±»å¸ƒå±€å¯¹ç»„ä»¶åšæ­£å¸¸å¸ƒå±€ç­‰ã€‚ é€šè¿‡å‰é¢å¸ƒå±€è¿‡ç¨‹ä¸­ç»„ä»¶çš„é«˜åº¦è®¡ç®—ï¼Œé‚£ä¹ˆä¹Ÿå°±çŸ¥é“å½“å‰ä¸€æ¬¡å¸ƒå±€æ¶ˆè€—äº†å¤šå°‘çš„ç©ºç™½åŒºåŸŸã€‚ è¿™ä¸ªç©ºç™½åŒºåŸŸè¿›ä¸€æ­¥åé¦ˆç»™RecyclerViewã€‚RecyclerViewä¼šè¿›è¡ŒçŠ¶æ€è·Ÿæ›´æ–°ï¼Œå¦‚æžœç©ºç™½åŒºåŸŸéƒ½è¢«å¡«å……æ»¡äº†ï¼Œé‚£ä¹ˆå°±ç»“æŸä¸€æ¬¡å¸ƒå±€äº†ï¼Œå¦‚æžœè¿˜æœ‰ï¼Œå°±è¦è§¦å‘ä¸‹ä¸€ä¸ªä½ç½®çš„å¸ƒå±€ï¼Œåœ¨é‡å¤ä¸Šè¿°æµç¨‹ã€‚ æ•ˆæžœdemoåŠ¨æ•ˆ å®žæˆ˜æ•ˆæžœ æ€»ç»“æœ¬æ–‡ç€é‡ä»‹ç» vlayout çš„è®¾è®¡æ€è·¯å’ŒåŽŸç†ï¼Œå¦‚æžœè¦è¿›ä¸€æ­¥ç†Ÿæ‚‰å…¶ç»†èŠ‚ï¼Œæœ€å¥½æ˜¯åˆ° github ä¸Šä¸‹è½½æºç é˜…è¯»ï¼Œç»“åˆæœ¬æ–‡çš„è¯´æ˜Žï¼Œæ•ˆæžœä¼šæ›´ä½³ã€‚å¦‚æžœæƒ³è¦å°è¯•ä½¿ç”¨ vlayout æ­å»ºé¡µé¢ï¼Œä¹Ÿå¯ä»¥åˆ° github ä¸Šä¸‹è½½ demoï¼Œé˜…è¯»ä½¿ç”¨æ–‡æ¡£å’Œæ ·å¼å±žæ€§è¯´æ˜Žæ–‡æ¡£ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Tangramä¸ƒå·§æ¿å®žçŽ°ç•Œé¢åŠ¨æ€åŒ–]]></title>
    <url>%2Fposts%2F57a68464.html</url>
    <content type="text"><![CDATA[Tangramï¼Œä¸ƒå·§æ¿ï¼Œå‡ å—ç®€å•çš„ç§¯æœ¨å°±èƒ½æ‹¼å‡ºå¤§åƒä¸–ç•Œã€‚æˆ‘ä»¬ç”¨Tangramæ¥å‘½åè¿™å¥—ç•Œé¢æ–¹æ¡ˆï¼Œä¹Ÿæ˜¯å¸Œæœ›ä»–èƒ½åƒä¸ƒå·§æ¿ä¸€æ ·å¯ä»¥é€šè¿‡å‡ å—ç§¯æœ¨å°±æ­å‡ºä¸°å¯Œå¤šå½©çš„ç•Œé¢ã€‚ å·å¤–ï¼šTangramå¼€æºäº†ï¼é€šè¿‡http://tangram.pingguohe.netå¯ä»¥äº†è§£æ›´å¤šæŠ€æœ¯ç»†èŠ‚ï¼Œç›´æŽ¥åŽ»GitHubæŸ¥çœ‹iOS(https://github.com/alibaba/tangram-ios)å’ŒAndroid(https://github.com/alibaba/tangram-android)æºç ã€‚ ä»€ä¹ˆæ˜¯TangramTangramä¸ä»…ä»…æ˜¯ä¸€ä¸ªNativeï¼ˆiOS &amp; Androidï¼‰çš„ç•Œé¢å¼€å‘æ¡†æž¶ï¼Œè€Œæ˜¯æˆ‘ä»¬ä»Žæ—¥å¸¸å·¥ä½œä¸­æ²‰æ·€å‡ºçš„ä¸€å¥—ç•Œé¢è§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–äº†Native SDKï¼ŒGUIæ“ä½œå°ï¼ŒåŽç«¯é€»è¾‘å®¹å™¨ï¼Œç»„ä»¶åº“æœºåˆ¶çš„ä¸€æ•´å¥—æ–¹æ¡ˆã€‚ Tangramä»Žæ‰‹æœºå¤©çŒ« - é¦–é¡µæ–¹æ¡ˆæŠ½è±¡è€Œæ¥ï¼Œæ˜¯é¢å‘ç»„ä»¶çš„ç•Œé¢æ–¹æ¡ˆï¼Œæ˜¯æˆ‘ä»¬ä¸æ–­æƒè¡¡æ€§èƒ½ã€ç¨³å®šæ€§ã€å¼€å‘æ•ˆçŽ‡ã€çµæ´»æ€§å’ŒåŠ¨æ€æ€§å¤šæ–¹é¢è¡¨çŽ°çš„ç»“æžœã€‚é™¤äº†æ‰‹æœºå¤©çŒ«é¦–é¡µå¤–ï¼Œè¿˜æ”¯æ’‘äº†å¤©çŒ«Appä¸­çš„å¤©çŒ«ç›´æ’­ï¼Œæˆ‘çš„å¤©çŒ«ï¼ŒçŒœä½ å–œæ¬¢ç­‰å¤šä¸ªä¸šåŠ¡ï¼Œå¹¶ä¸”åœ¨é˜¿é‡Œæ˜Ÿçƒç­‰å¤šä¸ªé˜¿é‡Œç³»Appä¸­æœ‰æ‰€åº”ç”¨ã€‚ å°±å¦‚Tangramä¸»é¡µæ‰€è¯´ï¼Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨æ–¹æ¡ˆçš„å¤šå¹³å°ä¸€è‡´æ€§ï¼Œé«˜æ€§èƒ½å’Œä¸šåŠ¡æ”¯æ’‘èƒ½åŠ›ã€‚ Tangramæ€Žä¹ˆæ¥çš„ä»Ž2013å¹´å¤©çŒ«åœ¨ç§»åŠ¨å¹³å°å‘åŠ›å¼€å§‹ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨æŽ¢ç´¢ç•Œé¢åŠ¨æ€åŒ–æ–¹æ¡ˆã€‚å…ˆåŽç»åŽ†äº†WebView+HTMLæ–¹æ¡ˆï¼ŒåŠ¨æ€Nativeæ–¹æ¡ˆï¼Œç›´è‡³Tangramçš„åŽŸåž‹â€”â€”ç»„ä»¶åŒ–æ–¹æ¡ˆã€‚ æœ€åˆæˆ‘ä»¬çœ‹é‡åŠ¨æ€æ€§ï¼Œåœ¨HTMLæ¡†æž¶å’Œå‘å¸ƒå·¥å…·ä¸Šåšäº†å¤§é‡çš„æ–‡ç« ã€‚æˆ‘ä»¬å¯ä»¥å¿«é€Ÿå¼€å‘å‡ºä¸€å¼ HTMLé¡µé¢ï¼Œå¹¶æŽ¨é€åˆ°ç«¯ä¸Šï¼Œè€Œä¸”é€šè¿‡HybridæŽ¥å£è¿˜èƒ½ä¸ŽNativeè¿›è¡Œäº¤äº’ã€‚ç„¶è€Œåœ¨å¤§è§„æ¨¡ï¼ˆåŒ11ï¼‰åº”ç”¨çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å¾ˆå¿«å‘çŽ°äº†é—®é¢˜â€”â€”æ€§èƒ½ã€‚å½“æ—¶æˆ‘ä»¬è®¤ä¸ºWebViewçš„æ€§èƒ½æ˜¯HTMLé¡µé¢çš„ç“¶é¢ˆï¼ŒçŽ°åœ¨è¿˜ä¸æ˜¯å¤§è§„æ¨¡æŽ¨å¹¿HTMLçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—æ›¿ä»£æ–¹æ¡ˆã€‚ å¾ˆå¿«æˆ‘ä»¬æå‡ºäº†Dynativeæ–¹æ¡ˆï¼Œæ¡†æž¶å†…ç½®åŸºç¡€ç»„ä»¶ï¼ˆæ–‡æœ¬ï¼Œå›¾ç‰‡ï¼ŒButtonç­‰ï¼‰å’Œå‡½æ•°ï¼ˆæ•°å­¦è¿ç®—ï¼Œå­—ç¬¦ä¸²ï¼Œç½‘ç»œç­‰ï¼‰ï¼Œä»¥JSONä¸ºæ¨¡æ¿æè¿°é¡µé¢ã€‚Dynativeæ–¹æ¡ˆå…¼å…·HTMLæ–¹æ¡ˆçš„åŠ¨æ€æ€§å’ŒNativeæ–¹æ¡ˆçš„é«˜æ€§èƒ½ï¼Œçœ‹ä¼¼å®Œç¾Žã€‚ä½†å¾ˆå¿«åœ¨ä¸‹ä¸€æ¬¡çš„åŒ11æˆ‘ä»¬å†æ¬¡è·Œå€’â€”â€”æ•ˆçŽ‡ã€‚ç”±äºŽåŸºäºŽJSONå®šä¹‰çš„æ¨¡æ¿ä¸å…·å¤‡é€šç”¨æ€§ï¼Œå†™ä¸€å¼ æœ‰é€»è¾‘çš„ä¼šåœºé¡µé¢å°±éœ€è¦æ•°åƒè¡ŒJSONï¼Œè€Œä¸”é‡Œè¾¹è¿˜æœ‰å„ç§æ½œè§„åˆ™ã€‚èƒ½æžå®šè¿™ä»½æ¨¡æ¿çš„äººï¼Œä¸è¶…è¿‡5ä¸ªã€‚ ç—›å®šæ€ç—›ï¼Œä½œä¸ºä¸šåŠ¡å›¢é˜Ÿæˆ‘ä»¬å¼€å§‹ä»Žä¸šåŠ¡çš„è§’åº¦å®¡è§†æŠ€æœ¯æ–¹æ¡ˆã€‚å¸¦ç•Œé¢çš„ä¸šåŠ¡åŸºæœ¬åˆ†ä¸‰ç§ï¼š ä¸´æ—¶æ€§ä¸šåŠ¡â€”â€”æ¯”å¦‚æ´»åŠ¨ï¼Œå‡ å¼ é¡µé¢ç”Ÿå‘½å‘¨æœŸå¯èƒ½2å‘¨ï¼Œ1å‘¨ï¼Œç”šè‡³ä¸€ä¸¤å¤©ã€‚æ•°é‡å¤šï¼Œéœ€æ±‚é¢‘ç¹ï¼Œæœ‰å¯æ²‰æ·€çš„ä¸œè¥¿ï¼Œä½†å˜åŒ–æ›´å¤šã€‚å¯¹æžè‡´æ€§èƒ½ä¸æ•æ„Ÿã€‚ å¸¸è§„ä¸šåŠ¡â€”â€”æ¯”å¦‚é¢‘é“ï¼Œç”Ÿå‘½å‘¨æœŸé•¿ï¼Œéœ€è¦é•¿æœŸç»´æŠ¤ã€‚æ•°é‡æœ‰é™ï¼Œéœ€æ±‚ç¨³å®šï¼Œæ²‰æ·€æ€§å¥½ã€‚å¯¹æžè‡´æ€§èƒ½ç›¸å½“æ•æ„Ÿã€‚ åŸºç¡€ä¸šåŠ¡â€”â€”è·Ÿå¸¸è§„ä¸šåŠ¡ç›¸æ¯”éœ€æ±‚ç¨³å®šæ€§æ›´é«˜ï¼Œå¯¹æ€§èƒ½å’Œç¨³å®šæ€§æœ‰æžé«˜çš„è¦æ±‚ã€‚ å¯¹äºŽç¬¬1åž‹ï¼Œæˆ‘ä»¬è®¤ä¸ºæœªæ¥ä¸€å®šå±žäºŽHTMLï¼Œéšç€WebViewæ€§èƒ½çš„æå‡å’ŒMobileå¼€å‘æ¡†æž¶ä¸Žå¼€å‘æŠ€èƒ½æ—¥è¶‹æˆç†Ÿï¼ŒçŽ°é˜¶æ®µHTMLä½“çŽ°å‡ºçš„åŠ£åŠ¿ç»ˆå°†è¡ç„¶æ— å­˜ã€‚è€Œç¬¬2åž‹å’Œç¬¬3åž‹æ˜¯å€¼å¾—æˆ‘ä»¬åŽ»æ€è€ƒçš„ï¼Œç»“åˆæˆ‘ä»¬å›¢é˜Ÿæ‰€è´Ÿè´£çš„ä¸šåŠ¡å½¢æ€ï¼Œæˆ‘ä»¬ç»“åˆå¤šå¹´åœ¨ä¸šåŠ¡ä¸Šçš„ç»éªŒåˆ¶å®šäº†ä»¥ç²—ç²’åº¦ç»„ä»¶åŒ–+çµæ´»å¸ƒå±€å®¹å™¨ä¸ºåŸºæœ¬ç†å¿µçš„ç•Œé¢è§£å†³æ–¹æ¡ˆã€‚ æ•´ä½“ä¸Šï¼ŒTangram Viewä½œä¸ºæ ¹èŠ‚ç‚¹ï¼Œå…·å¤‡æ»šåŠ¨èƒ½åŠ›ï¼›é¡µé¢çš„å­èŠ‚ç‚¹ä¸ºå¸ƒå±€å®¹å™¨ï¼Œæ¯è¡Œä¸€ä¸ªå®¹å™¨ï¼Œå‘ä¸‹å•è¡ŒæŽ’åˆ—ï¼›å¸ƒå±€å®¹å™¨ä¸­æŒ‰ç…§å„è‡ªçš„å¸ƒå±€è§„åˆ™ï¼Œåœ¨å…¶å†…å¯¹ä»»æ„ç»„ä»¶è¿›è¡ŒæŽ’åˆ—ã€‚ è‡³æ­¤ï¼ŒTangramçš„åŸºç¡€æ¨¡åž‹å·²ç»ç¡®å®šï¼Œæ”¾å¼ƒäº†ç¬¬1åž‹å’Œç¬¬3åž‹ï¼Œé‡ç‚¹å…³æ³¨ç¬¬2åž‹ã€‚ä»Žæ”¹é€ æ‰‹æœºå¤©çŒ«é¦–é¡µçš„å®žçŽ°æ–¹æ¡ˆå¼€å§‹ï¼Œé€šè¿‡å‡ ä¸ªæœˆçš„æ—¶é—´è¯æ˜Žè¿™å¥—æ¨¡åž‹å’Œæ–¹æ¡ˆåœ¨ä¸šåŠ¡ä¸Šå®Œå…¨å¯è¡Œã€‚è¿›ä¸€æ­¥å¯¹æ–¹æ¡ˆè¿›è¡ŒæŠ½è±¡ï¼Œå¹¶ä¸”å¼€å§‹å‘¨è¾¹å»ºè®¾ã€‚ Tangramå…³æ³¨çš„é‡ç‚¹æ­£å¦‚Tangramä¸»é¡µä¸Šæ‰€è¿°çš„ï¼ŒTangramå…³æ³¨ä¸‰ä¸ªé‡ç‚¹ï¼šé¢å‘ä¸šåŠ¡ã€å¤šç«¯ä¸€è‡´æ€§å’Œé«˜æ€§èƒ½ã€‚ é¢å‘ä¸šåŠ¡æ­£å¦‚ç¬¬ä¸€éƒ¨åˆ†æ‰€è®²çš„ï¼ŒTangramæ¥æºäºŽå¤šæ¬¡è¯•é”™å’Œæ–¹å‘çš„è°ƒæ•´ï¼Œæœ€ç»ˆç«™åœ¨ä¸šåŠ¡è§’åº¦å‡ºå‘ï¼Œæƒè¡¡å¤šé¡¹æŠ€æœ¯æŒ‡æ ‡çš„ç»“æžœã€‚æ‰€ä»¥é¢å‘ä¸šåŠ¡æ˜¯å‡ºå‘ç‚¹ï¼Œæ˜¯æ•´ä¸ªTangramä½“ç³»çš„æœ€åŸºæœ¬åŽŸåˆ™ã€‚ åŸºäºŽè¿™ä¸ªåŽŸåˆ™ï¼Œåœ¨ç«¯ä¸ŠTangramå§‹ç»ˆåšæŒç²—ç²’åº¦ç»„ä»¶ã€‚ç²—ç²’åº¦æ„å‘³ç€é€šç”¨æ€§å’Œçµæ´»æ€§çš„ä¸‹é™ï¼ŒæŸç§ç¨‹åº¦ä¸Šè¿˜ä¼šå¯¹åŠ¨æ€æ€§é€ æˆå½±å“ï¼Œä½†åœ¨ç¬¬2åž‹ä¸šåŠ¡ä¸­é€šç”¨æ€§ã€çµæ´»æ€§å’ŒåŠ¨æ€æ€§çš„éœ€æ±‚æ˜¯æœ‰èŠ‚åˆ¶çš„ï¼Œåœ¨ç²—ç²’åº¦ä¸Šå®Œå…¨å¯ä»¥æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚è€Œä¸”ï¼Œç²—ç²’åº¦è¿˜ä¼šå¸¦ç»™æˆ‘ä»¬ä½¿ç”¨æˆæœ¬ä½Žï¼Œæ€§èƒ½æ›´å¥½ç­‰ä¼˜åŠ¿ã€‚åœ¨ç«¯ä¸Šé‡ç‚¹ç²¾åŠ›åˆ™æŠ•å…¥åˆ°æå‡ç»„ä»¶åº“å¤ç”¨åº¦ï¼Œå¸ƒå±€å®¹å™¨å’Œç»„ä»¶çš„ä¸°å¯Œæ€§ï¼Œä»Žè€ŒæŽ¨åŠ¨ä¸šåŠ¡å‘å±•ã€‚ é™¤äº†ç«¯ä¸Šçš„å·¥ä½œï¼Œå¦ä¸€éƒ¨åˆ†é‡ç‚¹å·¥ä½œåœ¨æŽ§åˆ¶å°å’ŒæœåŠ¡ç½‘å…³çš„å»ºè®¾ä¸Šã€‚ä½œä¸ºä¸€ä¸ªé¢å‘ä¸šåŠ¡çš„æ–¹æ¡ˆï¼ŒæŽ§åˆ¶å°æ˜¯ä¸šåŠ¡æ–¹å’Œäº§å“çš„æŽ¥å£ï¼ŒæŽ§åˆ¶å°çš„ä¸»è¦ç›®æ ‡æ˜¯è®©ä¸šåŠ¡æ–¹å¯ä»¥ç›´æŽ¥æŽ§åˆ¶åŸºäºŽTangramå»ºè®¾çš„äº§å“â€”â€”è°ƒæ•´é¡µé¢å¸ƒå±€ï¼Œåˆ‡æ¢é¡µé¢æ•°æ®ï¼Œç­‰ã€‚æœåŠ¡ç½‘å…³çš„å»ºè®¾ç›®æ ‡æ˜¯æœ€å¤§ç¨‹åº¦çš„é™ä½Žä¸šåŠ¡åˆ›å»ºTangramé¡µé¢çš„åŽ‹åŠ›å’Œæˆæœ¬ã€‚ å¤šç«¯ä¸€è‡´æ€§åœ¨å¤šå¹´çš„ä¸šåŠ¡å¼€å‘ç»åŽ†ä¸­ï¼Œæˆ‘ä»¬å±¡æ¬¡è¢«å¤šç«¯è¡¨çŽ°ä¸ä¸€è‡´çš„é—®é¢˜å›°æ‰°ã€‚ä¸ºäº†å®žçŽ°ä¸šåŠ¡è¯‰æ±‚ï¼Œä¸å¾—ä¸é€šè¿‡å¤æ‚çš„ç½‘å…³é€»è¾‘æ¥å…¼å®¹å¤šç«¯é€»è¾‘ä¸ä¸€è‡´æƒ…å†µï¼Œä»¥å®žçŽ°è¡¨çŽ°ä¸€è‡´ã€‚å› æ­¤æˆ‘ä»¬æ—©æ—©çš„åˆ¶å®šäº†ä¸¤ä¸ªTangramç«¯å¼€å‘åŽŸåˆ™ï¼š ä»»æ„æ–°åŠŸèƒ½çš„æå‡ºéƒ½æ˜¯ä¸åŒºåˆ†å¹³å°ï¼Œåœ¨åŠŸèƒ½è®¾è®¡ä¸­å¿…é¡»åŒæ—¶è€ƒè™‘å¤šç«¯åŠŸèƒ½ï¼Œå…·ä½“çš„å®žçŽ°æ–¹æ¡ˆå’Œé€»è¾‘å¿…é¡»å¤šç«¯ç»Ÿä¸€Reviewä»¥ä¿è¯å¤šç«¯è¡¨çŽ°ä¸€è‡´ã€‚ ä»»æ„ä¸€ç«¯çš„å˜æ›´éƒ½å¿…é¡»åœ¨æ”¹åŠ¨å‰æŠŠæ–¹æ¡ˆåŒæ­¥ç»™å…¶ä»–ç«¯ï¼Œè€Œä¸”å˜æ›´å¿…é¡»å¤šç«¯åŒæ­¥å‘å¸ƒã€‚ é«˜æ€§èƒ½åœ¨é¢å‘ä¸šåŠ¡çš„åŽŸåˆ™ä¹‹ä¸‹ï¼Œå·²ç»ç»™é«˜æ€§èƒ½æ‰“ä¸‹äº†ä¸€ä¸ªè‰¯å¥½çš„åŸºç¡€ã€‚è€Œåœ¨é«˜æ€§èƒ½çš„æ€è€ƒä¸Šæˆ‘ä»¬é‡ç‚¹åŸºäºŽé¡µé¢æ¸²æŸ“æ•ˆçŽ‡å’Œç»„ä»¶å›žæ”¶å¤ç”¨ä¸¤æ–¹é¢ã€‚ é¡µé¢æ¸²æŸ“â€”â€”ä¸ºäº†æå‡æ¸²æŸ“æ•ˆçŽ‡ï¼ŒTangramå°†åœ¨è§†å›¾æ¸²æŸ“ä¹‹å‰æŠŠå¤§é‡çš„è®¡ç®—å·¥ä½œåœ¨VMä¸­å®Œæˆï¼Œå¹¶ç¼“å­˜åœ¨VMç»„æˆçš„æ ‘å½¢ç»“æž„é‡Œã€‚ å›žæ”¶å’Œå¤ç”¨â€”â€”Tangramåœ¨Androidå’ŒiOSå¹³å°ä¸Šåˆ†åˆ«å¼€å‘äº†VLayoutå’ŒLazyScrollä¸¤ä¸ªåŸºç¡€ç»„ä»¶ï¼Œé€šè¿‡ä¸€ä¸ªåŒç´¢å¼•å¯è§åŒºåŸŸç»„ä»¶å‘çŽ°ç®—æ³•ï¼Œå®žçŽ°äº†è·¨çˆ¶èŠ‚ç‚¹ç»„ä»¶çš„é«˜æ•ˆå›žæ”¶å’Œå¤ç”¨ã€‚ æ€»ç»“ä»¥ä¸Šæ˜¯å¯¹ç›®å‰å·²ç»å¼€æºçš„Tangram 1.0çš„ä»‹ç»ï¼Œè€Œç›®å‰æˆ‘ä»¬å·²ç»å®Œæˆäº†Tangram 2.0çš„è®¨è®ºï¼Œå¼€å§‹æ‰§è¡Œ2.0ç‰ˆæœ¬çš„é‡æž„å·¥ä½œã€‚åœ¨Tangram 2.0ä¸­å‡ºäºŽé€‚åº”ä¸šåŠ¡å½¢æ€çš„å˜åŒ–ï¼Œå¯¹Tangram 1.0ä¸­åŸºäºŽå¸ƒå±€å’Œç»„ä»¶çš„äºŒç»´ç»“æž„è¿›è¡Œè¿›ä¸€æ­¥çš„æŠ½è±¡ï¼Œç”¨äºŽæ”¯æ’‘æ›´å¤æ‚çš„æµå¼å¸ƒå±€ã€‚å¹¶ä¸”å¯¹äºŽæŽ§åˆ¶å°å’ŒæœåŠ¡ç½‘å…³ä¹Ÿå°†è¿›ä¸€æ­¥å‡çº§ï¼Œå¤§å¹…æå‡æ–°ä¸šåŠ¡å¼€å‘æ•ˆçŽ‡ã€‚åœ¨æ€§èƒ½å±‚é¢ï¼Œå¯¹ç»„ä»¶å¼€å‘æ¨¡åž‹å’Œæ¸²æŸ“æ¨¡å¼è¿›è¡Œä¸€æ¬¡è¾ƒå¤§çš„å‡çº§ï¼Œåœ¨æ¸²æŸ“å’Œæ»šåŠ¨æ•ˆçŽ‡ä¸Šå°†å¾—åˆ°å·¨å¤§æå‡ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é¡µé¢åŠ¨æ€åŒ–çš„åŸºç¡€Tangram]]></title>
    <url>%2Fposts%2F2ee0ad3d.html</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯Tangram é¡¾åæ€ä¹‰ï¼ŒTangramä¸­æ–‡åæ˜¯ä¸ƒå·§æ¿çš„æ„æ€ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªæ¡†æž¶æä¾›ä¸€ç³»åˆ—åŸºæœ¬å•å…ƒï¼Œå°±åƒç§¯æœ¨å—ä¸€æ ·ï¼Œé€šè¿‡å¿«é€Ÿæ‹¼è£…å°±èƒ½æ­å»ºå‡ºä¸€ä¸ªé¡µé¢æˆ–è€…è°ƒæ•´é¡µé¢çš„ç»“æž„ã€‚é‡è¿è¥çš„ä¸šåŠ¡ç‰¹åˆ«æ˜¯ç”µå•†ä¸šåŠ¡ï¼Œå¾€å¾€è®²ç©¶çµæ´»å¤šå˜ï¼Œéœ€è¦å¯¹çº¿ä¸Šä¸šåŠ¡åšå®žæ—¶è°ƒæ•´ï¼Œæ­¤ç±»é¡µé¢åŠ¨æ€åŒ–çš„éœ€æ±‚ä¾¿åº”è¿è€Œç”Ÿã€‚ Tangramçš„è®¾è®¡ç†å¿µ å¯¹äºŽå®¢æˆ·ç«¯å¼€å‘æ¥è¯´ï¼Œç‰ˆæœ¬å‘å‡ºåŽ»ä¹‹åŽï¼Œå†è¦ä¿®æ”¹ä»£ç ï¼Œæ˜¯ä¸€ä»¶æˆæœ¬æ¯”è¾ƒé«˜çš„äº‹æƒ…ï¼Œé’ˆå¯¹çº¿ä¸Šå®žæ—¶è°ƒæ•´æ¯”è¾ƒå¤šçš„åœ°æ–¹ï¼Œå¾€å¾€å°±é‡‡ç”¨äº†H5çš„æ–¹å¼ä¸Šçº¿ã€‚ç”±äºŽH5çš„ä½“éªŒç›¸å¯¹Nativeæ¬ ç¼ºä¸€äº›ï¼Œå°±æœ‰äº†åŽæ¥Facebookçš„ReactNative(RN)ï¼Œä»¥åŠé˜¿é‡Œè‡ªå·±çš„è§£å†³æ–¹æ¡ˆWeexï¼Œä»¥Nativeçš„æ–¹å¼å®žçŽ°é¡µé¢åŠ¨æ€è°ƒæ•´çš„èƒ½åŠ›ã€‚åœ¨å¦‚ä»Šï¼Œè¡¨é¢ä¸Šçœ‹èµ·æ¥Tangramçš„æ–¹æ¡ˆä¼šæœ‰äº›å¤šä½™ï¼Œä½†æ˜¯é€šè¿‡äº†è§£å®ƒçš„è®¾è®¡ä¸Žæ¼”å˜ï¼Œé‚£å°±çŸ¥é“å®ƒè¿˜æ˜¯æœ‰å­˜åœ¨çš„ç†ç”±ã€‚ åœ¨åŽ†å²ä¸Šï¼Œå¤§æ¦‚ä¸¤å¹´å‰çš„è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å›¢é˜ŸæŽ¥æ‰‹å¤©çŒ«é¦–é¡µçš„ä¸šåŠ¡ï¼Œè¿«åˆ‡éœ€è¦ä¸€å¥—é¡µé¢åŠ¨æ€åŒ–æ–¹æ¡ˆã€‚é‚£ä¸ªæ—¶å€™RNåˆšåˆšé¢ä¸–ä¸ä¹…ï¼Œç‰¹åˆ«æ˜¯Androidç‰ˆæœ¬çš„RNè¿˜ä¸ç¨³å®šï¼Œæ›´ä¸ç”¨è¯´åŽæ¥çš„Weexäº†ã€‚è€Œæˆ‘ä»¬æ‰‹é‡Œæœ‰çš„ä¸€å¥—æ–¹æ¡ˆæ˜¯è‡ªå·±å¼€å‘è¿‡çš„Dynativeï¼ˆå¯ä»¥ç†è§£ä¸ºåˆçº§ç‰ˆæœ¬çš„Weexï¼‰ã€‚ä½†è¿™äº›æ–¹æ¡ˆæœ‰ä¸ªå…±åŒç‚¹å°±æ˜¯æ¯”è¾ƒé‡é‡çº§ï¼Œå®ƒä»¬éƒ½æœŸæœ›ä»ŽåŸºæœ¬çš„UIå…ƒç´ å¼€å§‹åšä¸€å¥—çº¯åŠ¨æ€çš„æ–¹æ¡ˆã€‚åœ¨ç§ç§çŽ°æœ‰æ¡†æž¶ä¸æˆç†Ÿçš„æ—¶å€™ï¼Œå¯¹äºŽé¦–é¡µè¿™ç§é‡é‡çº§çš„é¡µé¢ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¸Œæœ›ä»¥ä¸€ç§æ›´åŠ çº¯ç²¹çš„Nativeå¼€å‘æ¨¡å¼æ¥æ”¯æ’‘ä¸šåŠ¡ã€‚ åœ¨è®¾è®¡ç†å¿µä¸Šï¼ŒTangramä¹Ÿæœ‰å®ƒçš„ç‰¹æ®Šä¹‹å¤„ï¼Œæ— è®ºæ˜¯H5è¿˜æ˜¯Weexä¹‹ç±»çš„æ–¹æ¡ˆï¼Œå®ƒä»¬çš„åŠ¨æ€èƒ½åŠ›åœ¨äºŽéšæ—¶å¯å‘å¸ƒä»£ç ï¼Œå®ƒä»¬æ˜¯é¢å‘å¼€å‘çš„åŠ¨æ€åŒ–æ–¹æ¡ˆï¼Œå‘å¸ƒä»£ç æ„å‘³ç€æµ‹è¯•ã€ç°åº¦ã€å‘å¸ƒç­‰ä¸€ç³»åˆ—æµç¨‹ã€‚è€ŒTangramæ˜¯é¢å‘è¿è¥å’Œäº§å“çš„æ–¹æ¡ˆï¼Œå®ƒçš„åŠ¨æ€èƒ½åŠ›ä½“çŽ°åœ¨æ— é¡»åšä»£ç æ”¹åŠ¨ï¼Œæä¾›è¶³å¤Ÿå¤šçš„åŠ¨æ€å¯é…ç½®çš„èƒ½åŠ›ï¼Œé€šè¿‡åœ¨åŽå°åšæ ·å¼çš„è°ƒæ•´æ¥è¾¾åˆ°é¡µé¢è°ƒæ•´çš„ç›®çš„ã€‚æ‰€ä»¥ç®€å•æ¯”è¾ƒå¦‚ä¸‹ï¼š H5 Weex/RN Tangram åŠ¨æ€èƒ½åŠ› å¼º è¾ƒå¼º åå¼± é¢å‘äººå‘˜ å¼€å‘ å¼€å‘ è¿è¥/äº§å“ ä½“é‡ å®Œå–„çš„ä½“ç³» è¾ƒé‡é‡çº§ è½»é‡çº§ ä½“éªŒ å¸¸è§„H5ä½“éªŒ é‰´äºŽH5å’Œnativeä¹‹é—´ çº¯nativeä½“éªŒ é‰´äºŽè¿™æ ·çš„è®¾è®¡ç›®æ ‡ï¼Œåœ¨è¿™ä¸ªæ¡†æž¶é‡Œï¼Œé‡ç‚¹ç€æ‰‹äºŽä»¥ä¸‹å››ä¸ªæ–¹é¢ï¼š é¡µé¢å¸ƒå±€åŠ¨æ€åŒ–ï¼Œæ„æ€æ˜¯é¡µé¢çš„æŽ’ç‰ˆå¸ƒå±€ï¼Œå¯ä»¥é€šè¿‡åŽç«¯æ•°æ®çš„ä¸‹å‘æ¥è°ƒæ•´ã€‚ ç»„ä»¶ä¸šåŠ¡åŒ–ï¼Œè¿™é‡Œçš„ç»„ä»¶ä¸æ˜¯æŒ‡åŸºæœ¬çš„æ–‡æœ¬ã€å›¾ç‰‡ã€æŒ‰é’®ç­‰åŸºæœ¬UIæŽ§ä»¶ï¼Œè€Œæ˜¯æŒ‡èƒ½æ‰¿æ‹…ä¸€å®šä¸šåŠ¡èƒ½åŠ›çš„æœ€å°å¤ç”¨å•å…ƒï¼Œå› æ­¤å®ƒå¯èƒ½æ˜¯ä¸€ä¸ªæ–‡æœ¬å’Œä¸€ä¸ªå›¾ç‰‡çš„ç»„åˆè¿™æ ·å­çš„ä¸€ç§å½¢å¼ã€‚ åŠ¨æ€èƒ½åŠ›ç²—ç²’åº¦åŒ–ï¼Œé€šè¿‡å¸ƒå±€+ç»„ä»¶çš„å½¢å¼æ­å»ºæ•´ä¸ªé¡µé¢ï¼Œæœ‰å¤šå°‘ç§å¸ƒå±€èƒ½åŠ›æ˜¯å†…ç½®åœ¨æ¡†æž¶é‡Œçš„ï¼Œæœ‰å¤šå°‘ç»„ä»¶ä¹Ÿæ˜¯ä¸šåŠ¡æŽ¥å…¥çš„æ—¶å€™æ³¨å†Œåˆ°æ¡†æž¶é‡Œçš„ï¼ŒåŽç«¯ä¸‹å‘çš„æ•°æ®å£°æ˜Žäº†ç”¨å“ªäº›å¸ƒå±€ã€ç”¨å“ªäº›ç»„ä»¶ï¼Œé€šè¿‡å¸ƒå±€åµŒå¥—ç»„ä»¶çš„å½¢å¼æ¸²æŸ“æ•´ä¸ªé¡µé¢ã€‚æ‰€ä»¥è¿™ä¸ªåŠ¨æ€èƒ½åŠ›æ¯”è¾ƒç²—ï¼Œä¸åƒH5æˆ–è€…Weexä»ŽåŸºæœ¬çš„UIå…ƒç´ å¼€å§‹æ­å»ºæ•´ä¸ªé¡µé¢ã€‚ ç»„ä»¶çš„å¤ç”¨ï¼Œä¸ºäº†æ‰¿è½½é‚£äº›ä¸ªè¶…é•¿é¡µé¢ï¼Œéœ€è¦å¯¹åŒç±»åž‹çš„ç»„ä»¶å…·å¤‡å›žæ”¶å¤ç”¨çš„èƒ½åŠ›ï¼Œå°±åƒListViewã€RecyclerViewé‚£æ ·ã€‚ Tangramé‡Œé‡è¦çš„æ¦‚å¿µæ¨¡åž‹é¡µé¢æ‹†è§£ ä»Žä¸€ä¸ªå®žä¾‹å‡ºå‘ï¼Œä¸Šå›¾ä¸­å±•ç¤ºçš„æ˜¯ä¸€ä¸ªæ—©æœŸçš„å¤©çŒ«é¦–é¡µï¼Œæ ¹æ®å¯¼è´­é¡µé¢çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å°†é¡µé¢æ‹†åˆ†æˆä¸‰ä¸ªå±‚æ¬¡ï¼šé¡µé¢â€”â€”å¡ç‰‡â€”â€”ç»„ä»¶ï¼Œé¡µé¢ï¼ˆç¬¬ä¸€å¼ å›¾ï¼‰æŒ‡çš„å°±æ˜¯æ•´ä½“å¯æ»‘åŠ¨é¡µé¢å®žä½“ï¼Œå¹¶æ²¡æœ‰ç‰¹æ®Šä¹‹å¤„ï¼›å¡ç‰‡æŒ‡çš„æ˜¯é¡µé¢å†…å¯æŒ‰è¡Œåˆ’åˆ†çš„ä¸€ä¸ªä¸€ä¸ªç‹¬ç«‹åŒºå—ï¼ˆå‚è€ƒç¬¬äºŒå¼ å›¾ï¼‰ï¼Œç»„ä»¶ï¼ˆå‚è€ƒç¬¬ä¸‰å¼ å›¾ï¼‰æŒ‡çš„æ˜¯å¡ç‰‡å†…éƒ¨ä¸€ä¸ªç‹¬ç«‹çš„ã€ä¸šåŠ¡çº§åˆ«çš„å•å…ƒï¼Œå®ƒå¯ä»¥æ˜¯ä¸€å¼ å›¾ï¼Œä¹Ÿå¯ä»¥æ˜¯æ–‡å­—+å›¾çš„ç»„åˆã€‚å› æ­¤æ•´ä½“æ•´ä¸ªé¡µé¢å¯ä»¥è¿™æ ·æè¿°ï¼šä¸€ä¸ªé¡µé¢åµŒå¥—äº†å¤šä¸ªå¡ç‰‡ï¼Œä¸€ä¸ªå¡ç‰‡åµŒå¥—äº†å¤šä¸ªç»„ä»¶ã€‚ é¡µé¢ç»“æž„ é€šè¿‡å°†é¡µé¢æ‹†åˆ†æˆä¸‰å±‚ç»“æž„ï¼Œæ•´ä¸ªé¡µé¢åœ¨modelä¸Šå°±å¯ä»¥æè¿°æˆè¿™æ ·ä¸€ä¸ªæ ‘çŠ¶ç»“æž„ã€‚è¿™é‡Œæœ€é‡è¦çš„ä¸¤ä¸ªmodelæ˜¯å¡ç‰‡å’Œç»„ä»¶çš„modelï¼Œæ•´ä¸ªé¡µé¢çš„åŠ¨æ€åŒ–å°†é€šè¿‡å®ƒä»¬çš„åŠ¨æ€åŒ–ä»¥åŠå®ƒä»¬ä¹‹é—´ç»„åˆå…³ç³»çš„åŠ¨æ€åŒ–æ¥å®Œæˆã€‚ä¸‹é¢çœ‹è¿™ä¸¤å±‚çš„å…·ä½“åè®®æè¿°ï¼š å¡ç‰‡æ¨¡åž‹ å¡ç‰‡çš„èŒè´£æ˜¯è´Ÿè´£å¯¹ç»„ä»¶è¿›è¡Œå¸ƒå±€ï¼Œé‚£ä¹ˆå¦‚ä½•æè¿°å¸ƒå±€å‘¢ï¼Œå‰é¢è¯´è¿‡ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ç²—ç²’åº¦çš„åŠ¨æ€åŒ–æ–¹å¼ï¼Œå¡ç‰‡çš„å¸ƒå±€æè¿°å°±æ˜¯ä¸€ç§å£°æ˜Žå¼çš„æ–¹å¼ï¼Œå› æ­¤å¡ç‰‡ä¸éœ€è¦å¸ƒå±€æ¨¡æ¿ï¼Œåªè¦åœ¨modelçš„æ•°æ®é‡Œæè¿°å¡ç‰‡çš„ç±»åž‹å³å¯ï¼Œè‡³äºŽå¡ç‰‡æœ‰å“ªäº›ç±»åž‹ï¼Œåˆ™æ˜¯æ³¨å†Œåœ¨Tangramæ¡†æž¶é‡Œçš„ï¼Œä¸šåŠ¡æ–¹åœ¨æŽ¥å…¥æ¡†æž¶çš„æ—¶å€™ä¹Ÿå¯ä»¥æ³¨å†Œè‡ªå®šä¹‰çš„å¡ç‰‡ç±»åž‹ã€‚è¿™æ ·å°±è®©TangramçœåŽ»äº†å¯¹å¸ƒå±€æ¨¡æ¿çš„è§£æžï¼Œç®€åŒ–äº†æ¡†æž¶å¤æ‚åº¦çš„åŒæ—¶ï¼Œç®€åŒ–äº†å¼€å‘å¤æ‚åº¦ã€‚ å¡ç‰‡modelæè¿°ä¸Šæœ‰å››ä¸ªç»„æˆï¼šheaderã€footerã€bodyã€styleã€‚æœ€é‡è¦çš„æ˜¯bodyéƒ¨åˆ†ï¼Œå®ƒåŒ…å«äº†å†…åµŒçš„ç»„ä»¶modelï¼Œå¦‚æžœå¡ç‰‡æ²¡æœ‰bodyï¼Œå³æ²¡æœ‰ç»„ä»¶ï¼Œä¹Ÿå°±ä¸åœ¨è§†è§‰ä¸Šåšæ¸²æŸ“ã€‚å¡ç‰‡çš„å¸ƒå±€ä¹Ÿå°±æ˜¯å¯¹bodyé‡ŒåŒ…å«çš„ç»„ä»¶æ¥è¿›è¡Œå¸ƒå±€ã€‚Tangramå†…ç½®äº†ä¸€ç³»åˆ—å¸ƒå±€èƒ½åŠ›å¯¹ç»„ä»¶è¿›è¡Œå¸ƒå±€ï¼ŒåŒ…æ‹¬æµå¼å¸ƒå±€ã€ç€‘å¸ƒæµå¸ƒå±€ã€å¸é¡¶å¸ƒå±€ã€æ‚¬æµ®å¸ƒå±€ã€è½®æ’­å¸ƒå±€ç­‰ç­‰ï¼ŒåŸºæœ¬ä¸Šå¸¸è§çš„å¸ƒå±€æ–¹å¼éƒ½å¯ä»¥è¦†ç›–åˆ°ã€‚headerã€footeræ˜¯å¡ç‰‡çš„æ ‡é¢˜å’Œå°¾éƒ¨ï¼Œè¿™æ˜¯æ ¹æ®ä¸šåŠ¡åœºæ™¯è®¾è®¡çš„å¯é€‰å†…å®¹ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™ä¸€å—ä¸šåŠ¡åŒºåŸŸä¼šæœ‰ä¸ªæ ‡é¢˜ä¹‹ç±»çš„ä¸œè¥¿ã€‚åœ¨å®žçŽ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»–ä»¬è½¬æ¢åˆ°bodyé‡Œçš„ç»„ä»¶ï¼Œä½†åœ¨æ¦‚å¿µä¸Šï¼Œå•ç‹¬æè¿°ä¼šæ›´å®¹æ˜“ç†è§£ã€‚styleæ˜¯å¯¹å¸ƒå±€æ ·å¼çš„æè¿°ï¼Œæ‰€æœ‰å¸ƒå±€ä¼šæœ‰ä¸€äº›é€šç”¨çš„æ ·å¼å±žæ€§ï¼Œä¹Ÿæœ‰ä¸€äº›ç‰¹æœ‰çš„ï¼Œé€šè¿‡æ ·å¼çš„æè¿°ï¼Œå¯ä»¥è®©å¸ƒå±€èƒ½åŠ›æ›´åŠ ä¸°å¯Œã€‚ç”»å›¾ä¸¾å‡ ä¸ªä¾‹å­ï¼š å¡ç‰‡æ ·å¼ç®€ä»‹ è¿™é‡Œå¯¹å¡ç‰‡çš„æ ·å¼åšä¸€äº›ä»‹ç»ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™é¡µé¢è°ƒæ•´å°±æ˜¯å¯¹æ ·å¼çš„è°ƒæ•´ï¼Œç»“æž„è°ƒæ•´ä¹Ÿä¼šæ¶‰åŠåˆ°æ ·å¼è°ƒæ•´ï¼Œå› æ­¤æ ·å¼çš„åŠ¨æ€æ€§å¯¹é¡µé¢çš„åŠ¨æ€æ€§å…·æœ‰é‡è¦è´¡çŒ®ï¼Œè¿™é‡Œä¸¾ä¾‹çš„æ˜¯å‡ ä¸ªé€šç”¨çš„æ ·å¼å±žæ€§ï¼Œå¦‚æžœå¡ç‰‡æ¯”è¾ƒç‰¹æ®Šï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰æ ·å¼å±žæ€§ã€‚ backgroundColor: å¡ç‰‡çš„èƒŒæ™¯ï¼Œåœ¨åšé¡µé¢æ°›å›´çš„æ—¶å€™ç»å¸¸ä¼šç”¨åˆ°ã€‚ margin/padding: å¡ç‰‡å¤–è¾¹è·ã€å†…è¾¹è·ï¼Œè¿™æ˜¯é€šç”¨UIç³»ç»Ÿéƒ½ä¼šæ”¯æŒçš„å±žæ€§ã€‚ gap: å¡ç‰‡å†…çš„ç»„ä»¶å¾€å¾€éœ€è¦å¢žåŠ é—´è·ï¼Œå¦‚æžœé€šè¿‡ç»„ä»¶çš„marginæ¥å®žçŽ°ï¼Œä¼šæœ‰å¾ˆå¤šä¸ä¾¿ä¹‹å¤„ï¼Œç›¸é‚»ç»„ä»¶é—´å·¦å³æˆ–è€…ä¸Šä¸‹éƒ½é…ç½®äº†marginï¼Œåˆ™éœ€è¦è€ƒè™‘åŽ»é‡çš„å®žçŽ°ï¼Œè¦ä¹ˆå°±åœ¨é…ç½®çš„æ—¶å€™å¯¹ç›¸é‚»ç»„ä»¶çš„marginåšç²¾å¿ƒæŽ§åˆ¶ã€‚ç”¨gapçš„æ¦‚å¿µåˆ™å¾ˆæ–¹ä¾¿ï¼Œå®ƒå¯ä»¥æŒ‡å®šæ°´å¹³æ–¹å‘é—´è·ã€åž‚ç›´æ–¹å‘é—´è·ã€‚ cols: é»˜è®¤æƒ…å†µä¸‹ï¼Œæµå¼å¸ƒå±€æ¯ä¸€åˆ—å®½åº¦éƒ½æ˜¯ç­‰åˆ†å±å¹•å®½åº¦çš„ï¼Œå¦‚æžœéœ€è¦åšä¸ç­‰åˆ†çš„å¸ƒå±€ï¼Œå°±å¯ä»¥é€šè¿‡colsæ¥æŒ‡å®šæ¯ä¸€åˆ—çš„å æ¯”ï¼Œè¿™æ ·å¸ƒå±€èƒ½åŠ›å°±èƒ½æ›´åŠ ä¸°å¯Œäº†ã€‚ ç»„ä»¶æ¨¡åž‹ ç»„ä»¶çš„èŒè´£æ˜¯è´Ÿè´£ä¸šåŠ¡é€»è¾‘å’ŒUIå…ƒç´ å±•ç¤ºï¼Œå®ƒæ˜¯å°½å¯èƒ½å°çš„ä¸šåŠ¡å•å…ƒï¼Œä¸€èˆ¬ä»¥å®žé™…è®¾è®¡ç¨¿å‡ºå‘ï¼ŒæŠ½è±¡å‡ºæœ€å°å¯å¤ç”¨å•å…ƒã€‚ç»„ä»¶ä¹Ÿæ˜¯å£°æ˜Žå¼çš„ï¼Œéœ€è¦åœ¨modelçš„æ•°æ®é‡Œæè¿°ç»„ä»¶çš„ç±»åž‹ï¼Œè‡³äºŽæœ‰å“ªäº›ç±»åž‹ï¼Œä¹Ÿæ˜¯ä¸šåŠ¡æ–¹åœ¨æŽ¥å…¥æ—¶é¢„å…ˆæ³¨å†Œï¼Œå› ä¸ºç»„ä»¶çš„ä¸šåŠ¡æˆåˆ†æ¯”è¾ƒé‡ï¼ŒTangramä¸€èˆ¬å°±ä¸å†…ç½®äº†ã€‚é™¤äº†ç±»åž‹æè¿°ï¼Œmodelæ•°æ®é‡Œå‰©ä¸‹çš„å°±æ˜¯ç»„ä»¶çš„æ•°æ®å’Œæ ·å¼æè¿°äº†ã€‚ç»„ä»¶çš„æ•°æ®ä¸åšå…·ä½“è§„èŒƒï¼Œä¸€èˆ¬æ»¡è¶³ç»„ä»¶è‡ªèº«çš„éœ€æ±‚å³å¯ï¼Œæ ·å¼ä¹Ÿä¸åšå¼ºåˆ¶è§„èŒƒï¼Œä½†æœ‰ä¸€äº›å’Œå¸ƒå±€ç›¸å…³çš„æ ·å¼åœ¨æ¡†æž¶å±‚é¢ä¼šè¿›è¡Œæ”¯æŒï¼Œè¿™ä¸ªä¸‹æ–‡ä»‹ç»ã€‚ åœ¨ç»„ä»¶çš„å®žçŽ°ä¸Šï¼Œå®ƒé¦–å…ˆæ˜¯ä¸€ä¸ªæ™®é€šçš„Viewï¼Œå¹¶ç‰¹æ®Šä¹‹å¤„ï¼Œå¦‚æžœè„±ç¦»Tangramæ¡†æž¶ï¼Œå®ƒä¹Ÿåº”è¯¥èƒ½æ­£å¸¸è¿è¡Œä½¿ç”¨ã€‚ä½†åœ¨Tangramé‡Œï¼Œæˆ‘ä»¬ä¸ºç»„ä»¶è®¾è®¡äº†ä¸€ä¸ªç»Ÿä¸€çš„ViewModelï¼Œå®šä¹‰äº†å‡ ä¸ªç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼›é€šè¿‡ViewModelå¯¹ç»„ä»¶çš„å±žæ€§è¿›è¡Œèµ‹å€¼ï¼Œåœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶ä¼šè°ƒç”¨initï¼Œåœ¨æ»‘å…¥å±å¹•ç»‘å®šæ•°æ®æ—¶å€™è°ƒç”¨bindï¼Œåœ¨æ»‘å‡ºå±å¹•è§£é™¤ç»‘å®šæ—¶è°ƒç”¨unbindã€‚ é™¤æ­¤ä¹‹å¤–ç»„ä»¶çš„è¡Œä¸ºåŸºæœ¬ä¸Šéƒ½æ˜¯ä¸šåŠ¡é€»è¾‘äº†ï¼Œä¸åšè¿‡å¤šä»‹ç»ï¼Œè¿™é‡Œå†ä»‹ç»å‡ ä¸ªå’Œé¡µé¢åŠ¨æ€æ€§ç›¸å…³çš„æ ·å¼ã€‚ ç»„ä»¶æ ·å¼ç®€ä»‹ backgroundColor: ç»„ä»¶çš„èƒŒæ™¯ï¼ŒåŒæ ·ä¹Ÿæ˜¯åœ¨åšé¡µé¢æ°›å›´çš„æ—¶å€™ç»å¸¸ä¼šç”¨åˆ°ã€‚ margin/padding: ç»„ä»¶å¤–è¾¹è·ã€å†…è¾¹è·ï¼ŒåŒæ ·ä¹Ÿæ˜¯UIç³»ç»Ÿéƒ½ä¼šæ”¯æŒçš„å±žæ€§ã€‚ display: å‚è€ƒcssçš„è®¾è®¡ï¼Œç‰¹åˆ«æ˜¯åœ¨æµå¼å¸ƒå±€é‡Œï¼Œç»„ä»¶é»˜è®¤éƒ½æ˜¯å†…è”(inline)çš„ï¼Œå½“å¸ƒå±€å æ»¡å±å¹•å®½åº¦æ—¶ï¼Œå†è€ƒè™‘æ¢è¡Œã€‚å¦‚æžœåœ¨æ­£å¸¸çš„æµå¼å¡ç‰‡å¸ƒå±€é‡Œè¦æ¨ªæ’ä¸€è¡Œï¼Œåˆ™å¯ä»¥å°†ç»„ä»¶å£°æ˜Žä¸ºblockï¼Œä¸ç„¶çš„è¯ï¼Œå°±å¾—å°†è¿™ä¸ªå¡ç‰‡æ‰“æ•£æˆä¸‰ä¸ªå¡ç‰‡æ‰è¡Œã€‚ colspan: é»˜è®¤æƒ…å†µä¸‹ï¼Œæµå¼å¸ƒå±€æ¯ä¸€åˆ—å®½åº¦éƒ½æ˜¯ç­‰åˆ†å±å¹•å®½åº¦çš„ï¼Œä¹Ÿå°±æ˜¯å ç”¨ä¸€ä¸ªæ ¼å­ï¼Œç»„ä»¶ä¸Šå£°æ˜Žcolspanå¯ä»¥è®©è¿™ä¸ªç»„ä»¶å ç”¨å¤šä¸ªæ ¼å­ã€‚å®ƒä¸Žå¡ç‰‡ä¸Šçš„colsåŒºåˆ«åœ¨äºŽå®ƒå ç”¨çš„å®½åº¦å€¼æ˜¯ç¦»æ•£çš„ï¼Œè€Œcolsé€šè¿‡ç™¾åˆ†æ¯”å¯ä»¥åšåˆ°å®½åº¦å€¼çš„è¿žç»­åˆ†å¸ƒã€‚ width/height: å…¶å®žæ˜¯ç»„ä»¶çš„å®½é«˜æ¯”ï¼Œç”¨æ¥å¯¹ç»„ä»¶è¿›è¡Œå¯¹é½ï¼Œåˆ©äºŽç•Œé¢æŽ’ç‰ˆã€‚ æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥å£°æ˜Žé¢å¤–çš„è‡ªå®šä¹‰æ ·å¼å±žæ€§ï¼Œæ¯”å¦‚å­—ä½“é¢œè‰²ã€å­—ä½“å¤§å°ç­‰ç­‰ï¼Œè¿™é‡Œå°±ä¸åšè¿‡å¤šä»‹ç»ã€‚é€šè¿‡å¡ç‰‡å’Œç»„ä»¶çš„æ ·å¼ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥ç»„åˆå‡ºå¤§éƒ¨åˆ†åœºæ™¯çš„é¡µé¢ç»“æž„äº†ï¼Œä¹Ÿå°±æ˜¯Tangramçš„åˆè¡·â€”â€”åƒæ­ç§¯æœ¨ä¸€æ ·æ‹¼è£…ä¸€ä¸ªé¡µé¢ã€‚ å®žçŽ°åŽŸç†ä¸Šé¢ä»‹ç»äº†æ•´ä¸ªTangramçš„åŸºæœ¬æ¦‚å¿µï¼ŒèŠ±äº†è¿™ä¹ˆå¤šç¯‡å¹…è®²æ¦‚å¿µæ¨¡åž‹ï¼Œé™¤äº†å‘Šè¯‰å¤§å®¶è¿™ä¸ªä¸œè¥¿æ˜¯ä»€ä¹ˆã€å®ƒåšä»€ä¹ˆã€å®ƒæ˜¯æ€Žä¹ˆè®¾è®¡çš„ï¼Œæœ€é‡è¦ä¼ é€’çš„ä¸€ä¸ªä¿¡æ¯æ˜¯ï¼Œä½œä¸ºä¸šåŠ¡ç³»ç»Ÿï¼Œéœ€è¦é¦–å…ˆåœ¨æ¦‚å¿µæ¨¡åž‹ä¸Šåšå¥½æž¶æž„è®¾è®¡ï¼Œåœ¨åè®®è§„èŒƒä¸Šåšå¥½ç»Ÿä¸€ï¼Œè¿™æ ·å…·ä½“çš„å¹³å°åŽ»å®žçŽ°çš„æ—¶å€™ï¼Œéƒ½èƒ½æ ¹æ®è¿™ä¸ªè§„èŒƒæ¥åšå®žçŽ°ï¼Œä¸ç®¡è°å®žçŽ°çš„ï¼Œéƒ½å±žäºŽTangramï¼Œè¿™å°±å¥½æ¯”JAVAè™šæ‹Ÿæœºè§„èŒƒå’ŒJAVAè™šæ‹Ÿæœºçš„å…³ç³»ä¸€æ ·ã€‚å¯¹äºŽæˆ‘ä»¬å›¢é˜Ÿæ¥è¯´ï¼Œå¯¹Tangramçš„å®žçŽ°ä¹Ÿç»åŽ†äº†ä¸€ç³»åˆ—å˜æ›´ï¼Œä½†åŸºæœ¬è§„èŒƒæ²¡æ€Žä¹ˆå˜åŠ¨ï¼Œè¿™ä¹Ÿæ˜¯èƒ½å¤§è§„æ¨¡åŽ»æ”¯æŒä¸šåŠ¡çš„ä¸€ä¸ªé‡è¦æ”¯ç‚¹ã€‚ä¸‹é¢ä¼šä»‹ç»ç›®å‰å®žçŽ°ä¸Šçš„æ€è·¯å’Œé‡è¦æŠ€æœ¯ç‚¹ã€‚ åŸºæœ¬ç»“æž„å’Œæµç¨‹ ä¸»è¦æœ‰è¿™ä¹ˆå‡ ä¸ªç»„æˆï¼šæ ¸å¿ƒå¼•æ“Žã€æ•°æ®è§£æžå™¨ã€å¡ç‰‡åº“ã€ç»„ä»¶åº“ã€å¸ƒå±€æ¡†æž¶ï¼Œæ ¸å¿ƒå¼•æ“Žè´Ÿè´£è°ƒåº¦æ•´ä¸ªæµç¨‹ï¼Œåœ¨å¯åŠ¨æ¡†æž¶çš„æ—¶å€™è¦æ ¸å¿ƒå¼•æ“Žè¦åšä¸€ç³»åˆ—åˆå§‹åŒ–ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–å¡ç‰‡åº“å’Œç»„ä»¶åº“ï¼Œä¹Ÿå°±å°†å†…ç½®çš„å¡ç‰‡ç±»åž‹æ³¨å†Œè¿›æ¡†æž¶ï¼Œå°†å¤–éƒ¨ä¸šåŠ¡æä¾›çš„ç»„ä»¶ä¹Ÿæ³¨å†Œå¥½ï¼ŒåŒæ—¶ä¹Ÿè¦å°†æ•°æ®è§£æžå™¨åˆå§‹åŒ–å¥½ï¼Œå¸ƒå±€æ¡†æž¶ä¹Ÿè¦åˆå§‹åŒ–å¥½ã€‚å½“é¡µé¢æ•°æ®ä¼ å…¥çš„æ—¶å€™ï¼Œæ ¸å¿ƒå¼•æ“Žè°ƒç”¨æ•°æ®è§£æžå™¨å°†æ•°æ®è½¬æ¢æˆå¡ç‰‡å’Œç»„ä»¶çš„modelå¯¹è±¡ï¼Œè§£æžè¿‡ç¨‹ä¼šæ ¹æ®ä¹‹å‰æ³¨å†Œè¿‡çš„å¡ç‰‡ã€ç»„ä»¶ç±»åž‹æ¥è§£æžï¼Œä¸è®¤è¯†çš„æ•°æ®å°†ä¼šè¢«æŠ›å¼ƒï¼Œå¡ç‰‡å’Œç»„ä»¶çš„åŸºæœ¬æ ·å¼ä¹Ÿä¼šè§£æžã€‚è§£æžå®Œæ¯•çš„å¡ç‰‡ã€ç»„ä»¶modelå°†ä¼šæ‰”ç»™å¸ƒå±€æ¡†æž¶è¿›è¡Œé¡µé¢æ¸²æŸ“ã€‚å¸ƒå±€æ¡†æž¶æ ¹æ®å¡ç‰‡æä¾›çš„å¸ƒå±€ä¿¡æ¯è¿›è¡Œå¸ƒå±€ï¼Œæ ¹æ®ç»„ä»¶æä¾›çš„ç»„ä»¶ä¿¡æ¯è¿›ä¸€æ­¥èŽ·å–ç»„ä»¶å®žä¾‹ï¼Œè´´åˆ°å¸ƒå±€å®¹å™¨é‡Œã€‚ å¸ƒå±€æ¡†æž¶å®žçŽ° å®žçŽ°ä¸Šéš¾åº¦æœ€å¤§çš„åœ¨äºŽå¸ƒå±€æ¡†æž¶ï¼Œå¸ƒå±€æ¡†æž¶çš„çµæ´»æ€§ã€æ€§èƒ½å†³å®šäº†æ•´ä¸ªTangramçš„çµæ´»æ€§å’Œæ€§èƒ½ã€‚åœ¨Androidä¸Šï¼Œå¸ƒå±€æ¡†æž¶åŸºäºŽRecyclerView+è‡ªå®šä¹‰LayoutManagerçš„æ–¹å¼å®žçŽ°ï¼›åœ¨iOSä¸Šï¼Œå¸ƒå±€æ¡†æž¶åŸºäºŽè‡ªå®šä¹‰çš„LazyScrollViewæ¥å®žçŽ°ã€‚è¿™ä¸¤æ¡†æž¶åŸºæœ¬ä¸Šéƒ½èƒ½åšåˆ°å¯¹é¡µé¢çš„æ‰å¹³åŒ–å®žçŽ°ï¼Œæä¾›äº†è·¨å¡ç‰‡çš„ç»„ä»¶çº§åˆ«å¤ç”¨èƒ½åŠ›ã€‚å…ˆå¯¹è¿™ä¸¤å—åšä¸€ä¸ªä»‹ç»ï¼š æ•´ä¸ªé¡µé¢æ ‘è¢«è§£æžå‡ºå¡ç‰‡+ç»„ä»¶çš„æ•°æ®åˆ—è¡¨ä¹‹åŽï¼Œä¼šå¯¹å—æ•°æ®åšè¿›ä¸€æ­¥è½¬æ¢ã€‚é¦–å…ˆæå–æ‰€æœ‰ç»„ä»¶modelï¼Œä¹Ÿå°±æ˜¯å°†ç»„ä»¶éƒ½æ‰“å¹³åˆ°åŒä¸€çº§åˆ«çš„åˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨ä¼šè¢«ä¼ é€’ç»™RecyclerViewçš„Adapterï¼Œå› æ­¤æ•°æ®çš„ä½ç½®å…¶å®žå°±å¯¹åº”äº†RecyclerViewçœ‹åˆ°çš„ç»„ä»¶ä½ç½®ã€‚è€Œå¡ç‰‡modelï¼Œå°†ä¼šæ‹¿æ¥æž„å»ºä¸€ä¸ªä¸ªLayoutHelperï¼Œè¿™äº›LayoutHelperæ˜¯è´Ÿè´£å…·ä½“å¸ƒå±€çš„å¯¹è±¡ï¼Œä¸€ç§å¸ƒå±€ç±»åž‹çš„å¡ç‰‡å¯¹åº”äºŽä¸€ç§LayoutHelperï¼Œè€Œä¸”LayoutHelperè¿˜åŒ…å«äº†å®ƒè´Ÿè´£çš„ç»„ä»¶çš„ä½ç½®èµ·å§‹åŒºåŸŸï¼Œå®ƒä»¬ä¼šè¢«ä¼ é€’ç»™è‡ªå®šä¹‰çš„LayoutManagerã€‚å½“RecyclerViewå¼€å§‹æ¸²æŸ“é¡µé¢æˆ–è€…æ»‘åŠ¨æ—¶ï¼Œå®ƒå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªå¸ƒå±€çŠ¶æ€ï¼ŒèŽ·å–å½“å‰å±å¹•èŒƒå›´å†…è¿˜æœ‰å¤šå°‘åŒºåŸŸæ˜¯ç©ºç™½çš„ï¼Œä¸‹ä¸€ä¸ªè¦åŠ è½½çš„Viewçš„ä½ç½®æ˜¯å¤šå°‘ï¼Œç„¶åŽæŠŠè¿™äº›ä¿¡æ¯å‘Šè¯‰LayoutManageråŽ»åŠ è½½Viewåšå¸ƒå±€ã€‚æˆ‘ä»¬çš„è‡ªå®šä¹‰LayoutManageræ‹¿åˆ°è¿™ä¸ªä½ç½®ä¹‹åŽï¼Œå°±åå‘æŸ¥æ‰¾å¯¹åº”çš„LayoutHelperï¼Œç„¶åŽäº¤ç»™LayoutHelperåŽ»å¸ƒå±€ï¼Œè¿™ä¸ªè¿‡ç¨‹è¿˜ä¼šæ¶‰åŠåˆ°ä»Žå›žæ”¶å¤ç”¨æ± æˆ–è€…é€šè¿‡AdapterèŽ·å–ä¸€ä¸ªç»„ä»¶å®žä¾‹ã€‚ä¸åŒçš„LayoutHelperä¼šæŒ‰ç…§çº¦å®šçš„åè®®è¿›è¡Œè¿›ä¸€æ­¥å¸ƒå±€ã€‚ å¯¹äºŽiOSæ¥è¯´ï¼Œä¹Ÿæœ‰ç±»ä¼¼çš„å¸ƒå±€é€»è¾‘ï¼Œä½†è¿™é‡Œé‡ç‚¹ä»‹ç»iOSçš„é¡µé¢å®¹å™¨LazyScrollViewã€‚è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„æ»šåŠ¨å¸ƒå±€ï¼Œå…·å¤‡å›žæ”¶å¤ç”¨èƒ½åŠ›ã€‚å®ƒçš„å›žæ”¶å¤ç”¨ç®—æ³•æ˜¯è¿™æ ·çš„ï¼šåœ¨é¡µé¢æ¸²æŸ“å‰å…ˆè®¡ç®—æ‰€æœ‰ç»„ä»¶çš„ä½ç½®ä¿¡æ¯ï¼Œæ ¹æ®ç»„ä»¶åœ¨é¡µé¢å†…ä½ç½®çš„ä¸Šè¾¹è·åšä¸€ä¸ªæŽ’åºç´¢å¼•ï¼Œæ ¹æ®ä¸‹è¾¹è·å†åšä¸€ä¸ªæŽ’åºç´¢å¼•ã€‚é¡µé¢æ»šåŠ¨çš„æ—¶å€™é€šè¿‡æ»šåŠ¨åŒºåŸŸä¸Žä¸Šä¸‹è¾¹è·çš„å–äº¤é›†ï¼Œå°±å¯ä»¥èŽ·å–åˆ°å½“å‰å¯è§èŒƒå›´çš„ç»„ä»¶æ˜¯å“ªäº›ï¼Œç„¶åŽä¸å¯è§èŒƒå›´å†…çš„ç»„ä»¶å®žä¾‹å¯ä»¥å›žæ”¶ï¼Œæ–°è¿›å…¥å¯è§†åŒºåŸŸçš„ç»„ä»¶å¯ä»¥ä»Žå›žæ”¶å¤ç”¨æ± é‡Œæ‹¿åˆ°ç»„ä»¶å®žä¾‹æˆ–è€…æ–°åˆ›å»ºä¸€ä¸ªç»„ä»¶å®žä¾‹è´´åˆ°å¸ƒå±€é‡Œã€‚ æ‰©å±•ä¸Šé¢ä»‹ç»çš„å†…å®¹æž„å»ºé‡ŒTangramçš„åŸºæœ¬éª¨æž¶ï¼Œä½†è¦æ”¯æ’‘èµ·ä¸šåŠ¡ï¼Œè¿˜éœ€è¦å¾ˆå¤šè¾…åŠ©å·¥å…·ï¼Œå¦‚æžœæ²¡æœ‰è¿™äº›æ‰©å±•ï¼Œå°†å¾ˆéš¾æ”¯æ’‘ä¸šåŠ¡ã€‚è¿™äº›æ‰©å±•æœ‰äº›æ˜¯å†…éƒ¨æ³¨å†Œåœ¨æ¡†æž¶ï¼Œä¹Ÿæœ‰äº›æ˜¯å¤–éƒ¨æ³¨å…¥ã€‚ ç‚¹å‡»å¤„ç†æ¨¡å—ï¼Œç»„ä»¶éƒ½éœ€è¦æœ‰ç‚¹å‡»äº¤äº’ï¼Œç‚¹å‡»å¤„ç†æ¨¡å—å®šä¹‰äº†æŽ¥å£ï¼Œä¸šåŠ¡æ–¹æ ¹æ®æŽ¥å£å®žçŽ°å…·ä½“æ¨¡å—ç„¶åŽæ³¨å…¥ã€‚ æ›å…‰å¤„ç†æ¨¡å—ï¼Œä¸Žç‚¹å‡»æ¨¡å—ç±»ä¼¼ï¼Œå¯æä¾›ç»„ä»¶æ›å…‰æ—¶çš„ä¸šåŠ¡é€»è¾‘åŠ è½½ã€‚ é€šç”¨å®šæ—¶å™¨æ¨¡å—ï¼Œç”¨æ¥æä¾›è®¡æ—¶åŠŸèƒ½ï¼Œæ»¡è¶³ç»„ä»¶å†…çš„å€’è®¡æ—¶éœ€æ±‚ã€å®šæ—¶éœ€æ±‚ã€‚ äº‹ä»¶æ€»çº¿ï¼Œç”¨æ¥åšç»„ä»¶ä¸Žå¡ç‰‡çš„é€šä¿¡ï¼Œæˆ–è€…ç»„ä»¶ä¸Žå¤–éƒ¨é€šä¿¡ç­‰ç­‰ã€‚ è„šæœ¬åŠ¨ç”»ï¼Œå°†åŠ¨ç”»è„šæœ¬åŒ–ï¼Œæä¾›åŠ¨ç”»çš„åŠ¨æ€èƒ½åŠ›ï¼Œè®©ç»„ä»¶çš„äº¤äº’æ›´åŠ ä¸°å¯Œã€‚ é€šç”¨è¯·æ±‚æ¨¡å—ï¼Œæœ‰æ—¶å€™å¡ç‰‡æ•°æ®ã€æˆ–è€…ç»„ä»¶æ•°æ®éœ€è¦è°ƒç”¨è¿œç¨‹æŽ¥å£æ›´æ–°ï¼ŒåŒé€šç”¨è¯·æ±‚ä¹Ÿæ˜¯å®šä¹‰äº†åŠ è½½æŽ¥å£ï¼Œå¤–éƒ¨ä¸šåŠ¡æ–¹è‡ªè¡Œå®žçŽ°æ³¨å…¥ã€‚ çº¯åŠ¨æ€ç»„ä»¶ï¼Œè§£å†³ç»„ä»¶åŠ¨æ€é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬çš„åŠ¨æ€åŒ–æ˜¯ç²—ç²’åº¦çš„ï¼Œè¡Œèµ°æ±Ÿæ¹–å…ä¸äº†å†…ç½®åŠ¨æ€èƒ½åŠ›æ»¡è¶³ä¸äº†ä¸€ä¸ªä¸´æ—¶éœ€æ±‚çš„åœºæ™¯ã€‚åŠ¨æ€ç»„ä»¶é›†æˆäº†é›†å›¢å†…çš„åŠ¨æ€åŒ–æ–¹æ¡ˆï¼Œç›®å‰æœ€ä¸»è¦çš„å°±æ˜¯é˜¿é‡Œçš„Weexæ–¹æ¡ˆï¼Œé€šè¿‡Weexçš„åŠ¨æ€èƒ½åŠ›æ¥è§£å†³ç»„ä»¶çš„åŠ¨æ€èƒ½åŠ›ã€‚ æœ‰äº†è¿™äº›æ‰©å±•åŠŸèƒ½ï¼Œæ•´ä¸ªTangramè½åœ°åˆ°ä¸šåŠ¡å°±éžå¸¸æ–¹ä¾¿äº†ï¼Œç›®å‰æˆ‘ä»¬æ”¯æ’‘äº†å¤©çŒ«é¦–é¡µã€å¤©çŒ«ç›´æ’­é¦–é¡µã€å¤©çŒ«è¶…å¸‚é¦–é¡µç­‰é‡è¦ä¸šåŠ¡ï¼Œè¿˜æŽ¨å¹¿åˆ°äº†é›†å›¢å…¶ä»–éƒ¨é—¨ã€‚ å®žè·µç»éªŒæœ€åŽåˆ†äº«ä¸€äº›ä¸šåŠ¡å¼€å‘çš„ç»éªŒï¼Œåˆ†å®¢æˆ·ç«¯å’ŒåŽç«¯è¿è¥ä¸¤æ–¹é¢ä»‹ç»ã€‚å»¶ä¼¸åˆ°å…¶ä»–ä¸šåŠ¡ï¼Œè¿™äº›ç»éªŒåº”è¯¥ä¹Ÿæ˜¯æœ‰å€Ÿé‰´æ„ä¹‰çš„ã€‚ å®¢æˆ·ç«¯ é¦–å…ˆæ˜¯è§„èŒƒä¸Žåè®®çš„ç»Ÿä¸€ï¼Œæˆ‘ä»¬è¿™ä¸ªæ¡†æž¶æ”¯æ’‘äº†å¤šä¸ªä¸šåŠ¡ï¼Œä¸åŒä¸šåŠ¡ã€ä¸åŒå¹³å°ä¹‹é—´ï¼Œåªæœ‰è§„èŒƒç»Ÿä¸€ï¼Œæ‰èƒ½å°½å¯èƒ½æ”¯æ’‘å¤šçš„ä¸šåŠ¡ï¼Œå¦åˆ™ä¸åŒä¸šåŠ¡æŽ¥å…¥ï¼Œè¦åšè½¬æ¢ï¼Œæ˜¯ä¸€ä»¶æˆæœ¬å¾ˆé«˜çš„äº‹æƒ…ã€‚åœ¨ä¸åŒå¹³å°ä¹‹é—´ç»Ÿä¸€è§„èŒƒï¼Œä¹Ÿå¯ä»¥è®©ä¸€ä»½æ•°æ®åœ¨å¤šç«¯ä½¿ç”¨ã€‚ åœ¨å®¢æˆ·ç«¯ä¸Šå¼€å‘ï¼Œç¨³å®šæ€§æ˜¯ä¸€ä¸ªéžå¸¸é‡è¦çš„æŒ‡æ ‡ï¼Œæ•´ä¸ªåº”ç”¨åº”è¯¥æœ‰è‡ªå·±çš„ä¿æŠ¤æ¨¡å¼ï¼Œå¯¹äºŽæ¡†æž¶æ¥è¯´ï¼Œæˆ‘ä»¬ä¹Ÿè¦æœ‰é˜²å¾¡æ€§ç¼–ç¨‹çš„æ€ç»´ï¼Œç‰¹åˆ«æ˜¯æ˜¯åŠ¨æ€åŒ–æ–¹æ¡ˆï¼Œå¾€å¾€æ ¹æ®æ•°æ®æ¥æ‰§è¡Œä»£ç ï¼Œè®¿é—®æ•°æ®æœ¬èº«è¦è¶³å¤Ÿå°å¿ƒï¼Œåƒç©ºå­—æ®µã€ç±»åž‹è½¬æ¢ã€æ•°ç»„è¶Šç•Œéƒ½æ˜¯å¸¸è§çš„é—®é¢˜ï¼Œé€šè¿‡å®‰å…¨æ–¹æ³•çš„ä½¿ç”¨ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªåœ°æ–¹ä¿è¯æ•°æ®è®¿é—®çš„å®‰å…¨æ€§ã€‚ ç»„ä»¶åº“ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéžå¸¸é‡è¦çš„å»ºè®¾ï¼Œä¸åŒä¸šåŠ¡ä¹‹é—´å¯ä»¥å¤ç”¨ç›¸åŒçš„ç»„ä»¶ï¼Œå‡å°‘ç»„ä»¶å¼€å‘ã€‚ å®¹å™¨åŒ–æ˜¯å®žçŽ°é¡µé¢åœ¨çº¿æ‹¼è£…çš„ä¸€ä¸ªå¿…è¦çš„å»ºè®¾ï¼Œå®¢æˆ·ç«¯éœ€è¦æœ‰ä¸€ä¸ªå®¹å™¨é¡µé¢ï¼Œå°±åƒwebviewä¸€æ ·ï¼Œç»™ä¸€ä¸ªurlï¼Œå°±å¯ä»¥åŠ è½½é¡µé¢ï¼ŒåŽç«¯ä¹Ÿä¹Ÿéœ€è¦åšæ•°æ®çš„å®¹å™¨åŒ–æŽ¥å…¥ï¼Œèƒ½å¯¼å…¥ä¸šåŠ¡æ•°æ®ï¼ŒæŒ‰ç…§Tangramåè®®è¾“å‡ºã€‚å†åˆ©ç”¨ç»„ä»¶åº“é‡Œçš„çŽ°æœ‰ç»„ä»¶ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªé¡µé¢æ­å»ºï¼Œç›®å‰æœ‰ä¸€äº›ç®€å•çš„é¡µé¢ï¼ˆæœç´¢ä¸“è¾‘ã€æŽ¨èä¸“è¾‘ï¼‰å°±æ˜¯è¿™æ ·å®Œæˆä¸Šçº¿çš„ã€‚ è§£è€¦ä¹Ÿæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œåœ¨Tangramé‡Œå®žçŽ°æ‰©å±•èƒ½åŠ›çš„æ—¶å€™ï¼Œè§£è€¦è¿™ä¸€æ–¹é¢åšå¾—å°±ç‰¹åˆ«æ£’ï¼Œåƒè„šæœ¬åŠ¨ç”»ã€Weexéƒ½æ˜¯å…¶ä»–å›¢é˜Ÿçš„æˆæžœï¼Œä½†æ˜¯å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ’å…¥åˆ°Tangramæ¡†æž¶é‡Œï¼Œè€Œä¸”å¯ä»¥çƒ­æ’æ‹”ï¼Œä¸šåŠ¡æ–¹ä¸æƒ³ä½¿ç”¨å°±å¯ä»¥ä¸æŽ¥å…¥ã€‚ è¿è¥ç®¡ç† Tangramæ˜¯ä¸€ä¸ªåŠ¨æ€æ¡†æž¶ï¼Œè™½ç„¶å®ƒçš„é‡ç‚¹æŠ€æœ¯åœ¨å®¢æˆ·ç«¯ï¼Œä½†æ˜¯æ²¡æœ‰åŽç«¯çš„è¯æ˜¯ä¸å®Œæ•´çš„ï¼Œå¿…é¡»è¦æœ‰ä¸€ä¸ªå®Œå–„çš„åŽç«¯ç®¡ç†å¹³å°æ¥åšé¡µé¢çš„æ—¥å¸¸è¿ç»´æ‰è¡Œã€‚æˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªä¸“é—¨çš„ç®¡ç†åŽå°ï¼Œå¯ä»¥å¯¹Tangramé¡µé¢åšå¤šç»´åº¦çš„ç®¡ç†ã€‚åŽç«¯ç®¡ç†å¹³å°è¿˜æ‰¿è½½äº†é¡µé¢çš„ç¨³å®šæ€§ã€é¡µé¢å‘å¸ƒçš„æ•ˆçŽ‡ã€é¡µé¢è¯•é”™ç­‰èƒ½åŠ›ã€‚ Tangramé¡µé¢åŠ¨æ€è°ƒæ•´éƒ½æ˜¯é…ç½®å‘å¸ƒï¼Œè§†è§‰è°ƒæ•´ã€‚å› æ­¤æˆ‘ä»¬æœ‰ç‹¬ç‰¹çš„å‘å¸ƒæµç¨‹ï¼Œé¦–å…ˆåŽå°å˜æ›´å®Œæˆä¹‹åŽä¸ä¼šç›´æŽ¥å‘å¸ƒï¼Œè€Œæ˜¯è¿›å…¥åˆ°é¢„å‘å¸ƒçŠ¶æ€ï¼Œåœ¨è¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œå¯ä»¥é€šè¿‡ç™½åå•é¢„è§ˆæå‰æ£€æŸ¥å˜æ›´æ•ˆæžœï¼Œé¢„è§ˆçš„æ–¹å¼æ˜¯å°†å˜æ›´ç”Ÿæˆä¸€ä¸ªäºŒç»´ç ï¼Œåœ¨æ‰‹æœºä¸Šæ‰«ç é¢„è§ˆï¼Œæ£€æŸ¥æœ€çœŸå®žçš„æ•ˆæžœã€‚é€šè¿‡æ—¶é—´æœºå™¨è°ƒæ•´æ—¶é—´ï¼Œä¸ä»…å¯ä»¥é¢„è§ˆè¿™æ¬¡å˜æ›´åœ¨å½“å‰æ—¶é—´çš„æ•ˆæžœï¼Œè¿˜å¯ä»¥é¢„è§ˆå°†æ¥æŸä¸ªæ—¶é—´çš„æ•ˆæžœï¼Œå› ä¸ºä¸åŒçš„æ—¶é—´ç‚¹ï¼Œç”Ÿæ•ˆçš„æ•°æ®ä¸ä¸€æ ·ï¼Œå› æ­¤æ—¶é—´ç»´åº¦çš„é¢„è§ˆç‰¹åˆ«æœ‰ç”¨ã€‚å¦å¤–ç®¡ç†å¹³å°å¯¹å˜æ›´äººå‘˜ä¹Ÿåšäº†æƒé™æŽ§åˆ¶ï¼Œæ¯ä¸ªä¸šåŠ¡æ–¹äººå‘˜åªèƒ½å˜æ›´è‡ªå·±è´Ÿè´£çš„ä¸šåŠ¡ï¼Œä¸ä¼šæ”¹åŠ¨åˆ°å…¶ä»–ä¸šåŠ¡çš„é¡µé¢ï¼Œé€šè¿‡å¯¹æŽ¥æµç¨‹å¹³å°ï¼Œè®©æ¯æ¬¡å˜æ›´éƒ½æœ‰è®°å½•å¯æŸ¥ï¼Œé˜²æ­¢çº¿ä¸Šæ•°æ®éšæ„æ›´æ”¹ã€‚ æœ‰äº†é¡µé¢å‘å¸ƒã€å˜æ›´çš„ç¨³å®šæ€§ä¿è¯ï¼Œå‘å¸ƒçš„æ•ˆçŽ‡ä¹Ÿæ˜¯ä¸‹ä¸€ä¸ªé‡è¦è€ƒè™‘çš„é—®é¢˜ã€‚å®šæ—¶å‘å¸ƒå¯ä»¥è®©å˜æ›´åœ¨æŒ‡å®šæ—¶é—´ç”Ÿæ•ˆï¼Œæ¯”å¦‚åŒåä¸€çš„æ—¶å€™å¾ˆå¤šä¸œè¥¿è¦0ç‚¹ç”Ÿæ•ˆï¼Œå¦‚æžœ0ç‚¹åšå˜æ›´ã€é¢„è§ˆã€å†ä¸Šçº¿ï¼Œé£Žé™©å¾ˆå¤§ï¼Œæœ‰äº†å®šæ—¶å‘å¸ƒï¼Œå¯ä»¥æå‰åšå¥½å‡†å¤‡ã€‚ä¸€é”®ä¸‹çº¿çš„åŠŸèƒ½ï¼Œå¯ä»¥åšå¤šç‰ˆæœ¬é‡Œçš„æŸä¸ªå…±ç”¨å¡ç‰‡æ‰¹é‡ä¸‹çº¿ï¼Œç‰¹åˆ«æ˜¯ç´§æ€¥æƒ…å†µã€‚æ‰¹é‡å¤åˆ¶åˆ›å»ºå¡ç‰‡å’Œç‰ˆæœ¬é€šé…ï¼Œéƒ½æ˜¯ä¸ºäº†è§£å†³æ–°ç‰ˆæœ¬å‘å¸ƒæ—¶å€™çš„æ•ˆçŽ‡ï¼Œç›®å‰æˆ‘ä»¬é’ˆå¯¹ä¸€ä¸ªç‰ˆæœ¬å®¢æˆ·ç«¯å°±å‘å¸ƒä¸€ä»½é¡µé¢é…ç½®æ•°æ®ï¼Œæœ‰äº†ç‰ˆæœ¬é€šé…ï¼Œå¯ä»¥å‡å°‘é¡µé¢é…ç½®çš„æ•°é‡ï¼Œæœ‰äº†æ‰¹é‡å¤åˆ¶åˆ›å»ºï¼Œå¯ä»¥åœ¨è¦åˆ›å»ºæ–°ç‰ˆæœ¬é¡µé¢çš„æ—¶å€™å¤åˆ¶é¡µé¢ã€‚ å¿«é€Ÿè¯•é”™ï¼Œè¿™æ˜¯è¿‘å¹´æ¥éžå¸¸çƒ­é—¨çš„ä¸€ä¸ªé¢†åŸŸï¼Œå½“é¡µé¢è¦è¿›è¡Œè°ƒæ•´çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›çœ‹åˆ°è°ƒæ•´çš„æ•ˆæžœï¼Œè¿™ä¸ªæ—¶å€™abtestå°±æ´¾ä¸Šäº†ç”¨åœºã€‚å¤©çŒ«æœ‰ä¸€å¥—è‡ªå·±çš„è¯•é”™å¹³å°ï¼ŒTangramå‰åŽç«¯éƒ½å¯¹æŽ¥äº†è¿™æ¡è¯•é”™å¹³å°ï¼Œåœ¨ç®¡ç†å¹³å°å¯ä»¥å°†å˜æ›´åšæˆå®žéªŒå˜æ›´ï¼Œç„¶åŽå¯¼å…¥åˆ°è¯•é”™å¹³å°ä¸‹å‘åˆ°å®¢æˆ·ç«¯ï¼Œè¿›å…¥åˆ°å®žéªŒåˆ†æ¡¶çš„ç”¨æˆ·å°±å¯ä»¥è®¿é—®åˆ°å®žéªŒå˜æ›´ï¼ŒåŒæ—¶è¯•éªŒå¹³å°åœ¨ç«¯ä¸Šä¹Ÿåšäº†æ•°æ®é‡‡é›†ï¼Œè¿™æ ·å¯ä»¥åœ¨å°èŒƒå›´å†…å…ˆè¯•éªŒå˜æ›´çš„æ•ˆæžœï¼Œæ ¹æ®æ•°æ®æ¥åšæŽ¥ä¸‹æ¥çš„å†³ç­–ã€‚ å°ç»“æœ¬æ¬¡åˆ†äº«æ•´ä½“æ€§çš„ä»‹ç»äº†Tangramçš„æŠ€æœ¯æ–¹æ¡ˆå’Œä¸€äº›å¼€å‘ç»éªŒï¼Œå†…å®¹æ¯”è¾ƒå¤šï¼Œå¾ˆå¤šåœ°æ–¹åªèƒ½åœ¨æ•´ä½“æ€è·¯ä¸Šè¿›è¡Œä»‹ç»ï¼ŒåŽç»­æˆ‘ä»¬ä¼šé€æ­¥å°†ä¸€äº›ç»†èŠ‚å¼€æ”¾å‡ºæ¥åˆ†äº«ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TangramçŸ¥è¯†å›¾è°±]]></title>
    <url>%2Fposts%2Fa76b266e.html</url>
    <content type="text"><![CDATA[ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¯¹ Tangram æœ‰ä¸ªå…¨å±€çš„äº†è§£ï¼Œåšäº†ä¸€å¼ å›¾è°±åšæŒ‡å¯¼ã€‚ ç›¸å…³å¼€æºåº“Android Tangram-Android Virtualview-Android vlayout UltraViewPager iOS Tangram-iOS Virtualview-iOS LazyScrollView å·¥å…· virtualview_tools]]></content>
      <categories>
        <category>Android</category>
        <category>Tangram</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Tangram</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nodeå‡çº§çš„æ­£ç¡®æ–¹æ³•]]></title>
    <url>%2Fposts%2Fc2ade9d5.html</url>
    <content type="text"><![CDATA[å®‰è£…æ–¹æ³•:1.æŸ¥çœ‹nodeç‰ˆæœ¬ï¼Œæ²¡å®‰è£…çš„è¯·å…ˆå®‰è£…ï¼›12 $ brew install node $ node -vn 2.æ¸…æ¥šnodeç¼“å­˜ï¼›1$ sudo npm cache clean -f 3.å®‰è£…nodeç‰ˆæœ¬ç®¡ç†å·¥å…·â€™nâ€™;1$ sudo npm install n -g 4.ä½¿ç”¨ç‰ˆæœ¬ç®¡ç†å·¥å…·å®‰è£…æŒ‡å®šnodeæˆ–è€…å‡çº§åˆ°æœ€æ–°nodeç‰ˆæœ¬ï¼›123$ sudo n stable ï¼ˆå®‰è£…nodeæœ€æ–°ç‰ˆæœ¬ï¼‰$ sudo n 8.9.4 ï¼ˆå®‰è£…nodeæŒ‡å®šç‰ˆæœ¬8.9.4ï¼‰ 5.ä½¿ç”¨node -væŸ¥çœ‹nodeç‰ˆæœ¬ï¼Œå¦‚æžœç‰ˆæœ¬å·æ”¹å˜ä¸ºä½ æƒ³è¦çš„åˆ™å‡çº§æˆåŠŸã€‚è‹¥ç‰ˆæœ¬å·æœªæ”¹å˜åˆ™è¿˜éœ€é…ç½®nodeçŽ¯å¢ƒå˜é‡1.æŸ¥çœ‹é€šè¿‡nå®‰è£…çš„nodeçš„ä½ç½®ï¼›1$ which node (å¦‚ï¼š/usr/local/n/versions/node/6.12.3ï¼‰ 2.cdè¿›å…¥/usr/local/n/versions/node/ ä½ åº”è¯¥èƒ½çœ‹åˆ°ä½ åˆšé€šè¿‡nå®‰è£…çš„nodeç‰ˆæœ¬è¿™é‡Œå¦‚ï¼š8.9.4ï¼›ç¼–è¾‘/etc/profile;1$ vim /etc/profile 3.å°†nodeå®‰è£…çš„è·¯å¾„ï¼ˆè¿™é‡Œä¸ºï¼š/usr/local/n/versions/node/8.9.4ï¼‰æ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾ï¼›12345set node pathexport NODE_HOME=/usr/local/n/versions/node/8.9.4export PATH=$NODE_HOME/bin:$PATH 4.wqé€€å‡ºä¿å­˜æ–‡ä»¶ï¼Œç¼–è¯‘/etc/profile;1$ source /etc/profile 5.å†æ¬¡ä½¿ç”¨node -væŸ¥çœ‹nodeç‰ˆæœ¬ï¼Œä¸å‡ºæ„å¤–ç‰ˆæœ¬å·åº”è¯¥å˜ä¸ºä½ æƒ³è¦çš„ã€‚]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>node</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[23ç§è®¾è®¡æ¨¡å¼çš„ä¼˜ç‚¹ä¸Žç¼ºç‚¹æ¦‚å†µ]]></title>
    <url>%2Fposts%2Fb5467332.html</url>
    <content type="text"><![CDATA[è®¾è®¡æ¨¡å¼æ ‡ç­¾ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼š è®¾è®¡æ¨¡å¼ä¼˜ç‚¹ åº”ç”¨åœºæ™¯ å•ä¾‹æ¨¡å¼ä¼˜ç‚¹ï¼š åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œå‡å°‘äº†å†…å­˜å¼€æ”¯ï¼› å¯ä»¥é¿å…å¯¹ç³»ç»Ÿèµ„æºçš„å¤šé‡å ç”¨ï¼› å¯ä»¥åœ¨ç³»ç»Ÿä¸­è®¾ç½®å…¨å±€çš„è®¿é—®ç‚¹ï¼Œä¼˜åŒ–å’Œå…±äº«èµ„æºè®¿é—®ï¼› ç¼ºç‚¹ï¼š æ²¡æœ‰æŽ¥å£ï¼Œæ‰©å±•å›°éš¾ï¼› å¯¹æµ‹è¯•å¼€å‘ä¸åˆ©ï¼› åº”ç”¨åœºæ™¯ï¼š è¦æ±‚ç”Ÿæˆå”¯ä¸€åºåˆ—å·çš„åœºæ™¯ï¼› éœ€è¦ä¸€ä¸ªå…±äº«è®¿é—®ç‚¹ï¼› åˆ›å»ºä¸€ä¸ªå¯¹è±¡éœ€è¦æ¶ˆè€—è¿‡å¤šçš„èµ„æºæ—¶ éœ€è¦å®šä¹‰å¤§é‡çš„é™æ€å¸¸é‡å’Œé™æ€æ–¹æ³•æ—¶ï¼ˆä¹Ÿå¯ç›´æŽ¥å£°æ˜Žä¸ºstaticçš„æ–¹å¼ï¼‰ï¼› å·¥åŽ‚æ–¹æ³•æ¨¡å¼ä¼˜ç‚¹ï¼š è‰¯å¥½çš„å°è£…æ€§ï¼Œä»£ç ç»“æž„æ¸…æ™°ï¼› æ‰©å±•éžå¸¸å¥½ï¼› å±è”½äº§å“ç±»ï¼› åº”ç”¨åœºæ™¯ï¼š æ˜¯newä¸€ä¸ªå¯¹è±¡çš„æ›¿ä»£å“ï¼› éœ€è¦çµæ´»çš„ï¼Œå¯æ‰©å±•çš„æ¡†æž¶æ—¶ï¼› ä½¿ç”¨åœ¨æµ‹è¯•é©±åŠ¨å¼€å‘çš„æ¡†æž¶ä¸‹ï¼› æŠ½è±¡å·¥åŽ‚æ¨¡å¼ä¼˜ç‚¹ï¼š å°è£…æ€§ï¼› äº§å“æ—å†…éƒ¨çš„çº¦æŸä¸ºéžå…¬å¼€çŠ¶æ€ï¼› ç¼ºç‚¹ï¼š äº§å“æ—æ‰©å±•å›°éš¾ï¼› æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¼˜ç‚¹ï¼š å°è£…ä¸å˜éƒ¨åˆ†ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†ï¼ŒæŠŠä¸å˜çš„ç®—æ³•å°è£…åˆ°çˆ¶ç±»å®žçŽ°ï¼Œå¯å˜çš„éƒ¨åˆ†åˆ™é€šè¿‡ç»§æ‰¿æ¥æ‰©å±•ï¼› æå–å…¬å…±éƒ¨åˆ†ä»£ç ï¼Œä¾¿äºŽç»´æŠ¤ï¼› è¡Œä¸ºç”±çˆ¶ç±»æŽ§åˆ¶ï¼Œå­ç±»å®žçŽ°; ç¼ºç‚¹ï¼š å­ç±»å¯¹çˆ¶ç±»äº§ç”Ÿå½±å“ï¼Œå­ç±»æ‰§è¡Œçš„ç»“æžœå½±å“äº†çˆ¶ç±»çš„ç»“æžœ; åº”ç”¨åœºæ™¯ï¼š å¤šä¸ªå­ç±»æœ‰å…¬æœ‰çš„æ–¹æ³•ï¼Œä¸”é€»è¾‘ç›¸åŒæ—¶ï¼› é‡è¦ï¼Œå¤æ‚çš„ç®—æ³•ï¼Œå¯ä»¥æŠŠæ ¸å¿ƒç®—æ³•è®¾è®¡ä¸ºæ¨¡æ¿æ–¹æ³•ï¼› é‡æž„æ—¶ï¼ŒæŠŠç›¸åŒçš„ä»£ç æŠ½å–åˆ°çˆ¶ç±»ï¼Œç„¶åŽé€šè¿‡é’©å­å‡½æ•°ç»“æŸå…¶è¡Œä¸ºï¼› å»ºé€ è€…æ¨¡å¼ä¼˜ç‚¹ï¼š å°è£…æ€§ï¼Œä½¿å¾—å®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨çš„ç»„æˆç»†èŠ‚ï¼Œæˆ‘ä»¬ä¸ç”¨å…³å¿ƒæ¯ä¸€ä¸ªå…·ä½“çš„æ¨¡åž‹å†…éƒ¨æ˜¯å¦‚ä½•å®žçŽ°çš„ã€‚ å»ºé€ è€…ç‹¬ç«‹ï¼Œå®¹æ˜“æ‰©å±• ä¾¿äºŽæŽ§åˆ¶ç»†èŠ‚é£Žé™©ï¼Œç”±äºŽå…·ä½“çš„å»ºé€ è€…æ˜¯ç‹¬ç«‹çš„ï¼Œå› æ­¤å¯ä»¥å¯¹å»ºé€ è¿‡ç¨‹é€æ­¥ç»†åŒ–ï¼Œè€Œä¸å¯¹å…¶ä»–çš„æ¨¡å—äº§ç”Ÿä»»ä½•å½±å“; å»ºé€ è€…æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š ç›¸åŒçš„æ–¹æ³•ï¼Œä¸åŒçš„æ‰§è¡Œé¡ºåºï¼Œä¼šäº§ç”Ÿä¸åŒçš„ç»“æžœæ—¶ï¼› å¤šä¸ªéƒ¨ä»¶æˆ–é›¶ä»¶ï¼Œéƒ½å¯ä»¥è£…é…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œä½†äº§ç”Ÿçš„è¿è¡Œç»“æžœåˆä¸ç›¸åŒæ—¶ï¼Œå¦‚Androidä¸­çš„AlertDialogçš„æž„é€ ; äº§å“ç±»éžå¸¸å¤æ‚ï¼Œæˆ–äº§å“ç±»çš„çš„è°ƒç”¨é¡ºåºä¸åŒäº§ç”Ÿä¸åŒçš„æ•ˆæžœï¼› ä»£ç†æ¨¡å¼ä¼˜ç‚¹ï¼š èŒè´£æ¸…æ™°ï¼Œå…¶å®žçš„è§’è‰²å°±æ˜¯å®žçŽ°å®žé™…çš„ä¸šåŠ¡çš„é€»è¾‘ï¼Œä¸ç”¨å…³å¿ƒå…¶ä»–éžæœ¬èŒè´£çš„äº‹åŠ¡ï¼› é«˜æ‰©å±•æ€§ï¼Œå…·ä½“ä¸»é¢˜è§’è‰²éšæ—¶éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†åªè¦å®ƒå®žçŽ°äº†æŽ¥å£ï¼Œæˆ‘ä»¬çš„ä»£ç†ç±»å°±å¯ä»¥åœ¨å®Œå…¨ä¸åšä»»ä½•ä¿®æ”¹çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼› åŽŸåž‹æ¨¡å¼ï¼ˆé€šè¿‡å®žçŽ°CloneableæŽ¥å£ï¼‰ä¼˜ç‚¹ï¼š æ€§èƒ½ä¼˜è‰¯ï¼ŒåŽŸåž‹æ¨¡å¼æ˜¯åœ¨å†…å­˜äºŒè¿›åˆ¶æµçš„æ‹·è´ï¼Œè¦æ¯”ç›´æŽ¥newä¸€ä¸ªå¯¹è±¡æ€§èƒ½å¥½ï¼Œç‰¹åˆ«æ˜¯è¦åœ¨å¾ªçŽ¯ä½“å†…äº§ç”Ÿå¤§é‡å¯¹è±¡æ—¶ï¼Œ é¿å…æž„é€ å‡½æ•°çš„çº¦æŸï¼Œç›´æŽ¥æ˜¯åœ¨å†…å­˜ä¸­æ‹·è´çš„ï¼Œæž„é€ å‡½æ•°æ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚ åº”ç”¨åœºæ™¯ï¼š ç±»åˆå§‹åŒ–éœ€è¦æ¶ˆåŒ–éžå¸¸å¤šçš„èµ„æºæ—¶ æ€§èƒ½å’Œå®‰å…¨è¦æ±‚çš„åœºæ™¯ï¼Œé€šè¿‡ newäº§ç”Ÿä¸€ä¸ªå¯¹è±¡éœ€è¦éžå¸¸ç¹ççš„æ•°æ®å‡†å¤‡å’Œè®¿é—®æƒé™æ—¶ï¼› ä¸€ä¸ªå¯¹è±¡å¤šä¸ªä¿®æ”¹è€…çš„åœºæ™¯ï¼Œä¸€ä¸ªå¯¹è±¡éœ€è¦æä¾›ç»™å¤šä¸ªå¯¹è±¡è®¿é—®ï¼Œè€Œä¸”å„ä¸ªè°ƒç”¨è€…éƒ½å¯ä»¥ä¿®æ”¹å…¶å€¼æ—¶ï¼› æ³¨æ„åœ°æ–¹ï¼šæµ…æ‹·è´ä¸Žæ·±æ‹·è´Javaçš„Objectç±»æä¾›çš„cloneæ–¹æ³•åªæ˜¯æ‹·è´æœ¬å¯¹è±¡ï¼Œå…¶å¯¹è±¡å†…éƒ¨çš„æ•°ç»„ã€å¼•ç”¨å¯¹è±¡ç­‰éƒ½ä¸æ‹·è´ï¼Œå…¶ä»–çš„åŽŸå§‹ç±»åž‹å¦‚int,charç­‰éƒ½ä¼šè¢«æ‹·è´ï¼Œæ‹·è´åŽçš„å¯¹è±¡ä¸ŽåŽŸç”Ÿå¯¹è±¡å…±äº«å†…éƒ¨å…ƒç´ çš„åœ°å€ï¼ˆæµ…æ‹·è´ï¼‰ï¼Œå¦‚æžœæ‹·è´åŽçš„å¯¹è±¡ä¿®æ”¹äº†åŽŸç”Ÿå¯¹è±¡çš„æ•°ç»„ï¼Œåˆ™åŽŸç”Ÿå¯¹è±¡ä¹Ÿä¼šçœ‹åˆ°ä¿®æ”¹ã€‚å¦‚æžœéœ€è¦è¿›è¡Œæ·±æ‹·è´ï¼Œåˆ™éœ€è¦åœ¨å¤å†™çš„cloneæ–¹æ³•é‡Œå¯¹ç§æœ‰çš„ç±»å˜é‡ï¼ˆå†…éƒ¨æ•°ç»„ï¼Œå¼•ç”¨å¯¹è±¡ï¼‰è¿›è¡Œç‹¬ç«‹çš„æ‹·è´ã€‚å¹¶ä¸”ä½¿ç”¨finalå…³é”®å­—ä¿®é¥°çš„å˜é‡ä¸èƒ½è¢«æ‹·è´ï¼› ä¸­ä»‹è€…æ¨¡å¼ä¼˜ç‚¹ï¼š å‡å°‘äº†ç±»é—´çš„ä¾èµ–ï¼ŒæŠŠåŽŸæœ‰çš„ä¸€å¯¹å¤šçš„ä¾èµ–å˜æˆäº†ä¸€å¯¹ä¸€çš„ä¾èµ–ï¼› ç¼ºç‚¹ï¼š ä¸­ä»‹è€…ä¼šè†¨èƒ€å¾—å¾ˆå¤§ï¼Œè€Œä¸”é€»è¾‘å¤æ‚ï¼›åŽŸæœ¬Nä¸ªå¯¹è±¡çš„ä¾èµ–å…³ç³»è½¬æ¢ä¸ºä¸­ä»‹è€…ä¸Žå¯¹è±¡çš„ä¾èµ–å…³ç³»ï¼› å‘½ä»¤æ¨¡å¼ä¼˜ç‚¹ï¼š ç±»é—´è§£è€¦ï¼Œè°ƒç”¨è€…ä¸ŽæŽ¥æ”¶è€…ä¹‹é—´æ²¡æœ‰ä»»ä½•ä¾èµ–å…³ç³»ï¼Œè°ƒç”¨è€…å®žçŽ°åŠŸèƒ½æ—¶ä¸éœ€è¦äº†è§£åˆ°åº•æ˜¯å“ªä¸ªæŽ¥æ”¶è€…æ‰§è¡Œï¼Œåªéœ€è°ƒç”¨CommandæŠ½è±¡ç±»çš„executeæ–¹æ³•å°±å¯ä»¥äº†ï¼› å¯æ‰©å±•æ€§ï¼ŒCommandçš„å­ç±»å¯ä»¥éžå¸¸å®¹æ˜“æ‰©å±•ï¼Œå¹¶ä¸”è°ƒç”¨è€…å’Œé«˜å±‚æ¨¡å—ä¸äº§ç”Ÿä¸¥é‡çš„ä»£ç è€¦åˆï¼› ç¼ºç‚¹ï¼š Commandç±»è†¨èƒ€åŽ‰å®³ï¼Œå¦‚æžœæœ‰Nä¸ªå‘½ä»¤ï¼Œåˆ™Commandç±»çš„å­ç±»å°±ä¸ºNä¸ªï¼› åº”ç”¨åœºæ™¯ï¼šå¦‚Androidä¸­å„ç§äº‹ä»¶çš„å¤„ç†ï¼› è´£ä»»é“¾æ¨¡å¼ä¼˜ç‚¹ï¼š è¯·æ±‚ä¸Žå¤„ç†åˆ†å¼€ï¼Œè¯·æ±‚è€…å¯ä»¥ä¸ç”¨çŸ¥é“æ˜¯è°å¤„ç†çš„ï¼Œå¤„ç†è€…å¯ä»¥ä¸ç”¨çŸ¥é“è¯·æ±‚çš„å…¨è²Œï¼› ç¼ºç‚¹ï¼š æ€§èƒ½é—®é¢˜ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ä»Žé“¾å¤´éåŽ†åˆ°é“¾å°¾çš„ï¼Œå½“è¿™ä¸ªè´£ä»»é“¾æ¯”è¾ƒé•¿æ—¶ï¼ŒéåŽ†å¼€é”€ä¼šæ¯”è¾ƒå¤§ï¼› åº”ç”¨åœºæ™¯: å¦‚Androidäº‹ä»¶çš„ä¼ é€’æœºåˆ¶ï¼› è£…é¥°å™¨æ¨¡å¼ä¼˜ç‚¹ï¼š è£…é¥°ç±»å’Œè¢«è£…é¥°ç±»å¯ä»¥ç‹¬ç«‹å‘å±•ï¼Œè€Œä¸ä¼šäº’ç›¸è€¦åˆï¼› è£…é¥°æ¨¡å¼æ˜¯ç»§æ‰¿å…³ç³»çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆï¼Œä¸ç®¡è£…é¥°å¤šå°‘å±‚ï¼Œæœ€ç»ˆè¿”å›žçš„ä¹Ÿè¿˜æ˜¯é‚£ä¸ªå¯¹è±¡ï¼› è£…é¥°æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå®žçŽ°ç±»çš„åŠŸèƒ½ï¼› ç¼ºç‚¹ï¼š å¤šå±‚çš„è£…é¥°æ¯”è¾ƒå¤æ‚ï¼Œå½“ä½¿ç”¨å¤šå±‚è£…é¥°å‡ºçŽ°é—®é¢˜æ—¶ï¼ŒæŽ’æŸ¥é—®é¢˜çš„å·¥ä½œé‡æ¯”è¾ƒå¤§ åº”ç”¨åœºæ™¯ï¼š éœ€è¦æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ï¼Œæˆ–ç»™ä¸€ä¸ªç±»å¢žåŠ é™„åŠ åŠŸèƒ½ï¼› éœ€è¦ä¸ºä¸€æ‰¹å…„å¼Ÿç±»è¿›è¡Œæ”¹è£…æˆ–åŠ è£…åŠŸèƒ½ï¼› ç­–ç•¥æ¨¡å¼ä¼˜ç‚¹ï¼š ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢ï¼Œåªè¦å®žçŽ°æŠ½è±¡ç­–ç•¥ï¼Œå®ƒå°±æˆä¸ºç­–ç•¥å®¶åº­çš„ä¸€ä¸ªæˆå‘˜ï¼› é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­ï¼Œ æ‰©å±•æ€§è‰¯å¥½ï¼Œåœ¨çŽ°æœ‰çš„ç³»ç»Ÿä¸­å¢žåŠ ä¸€ä¸ªç­–ç•¥å¤ªå®¹æ˜“ï¼Œåªè¦å®žçŽ°æŽ¥å£å°±å¯ä»¥äº†; ç¼ºç‚¹ï¼š ç­–ç•¥ç±»æ•°é‡å¤šï¼Œæ¯ä¸€ä¸ªç­–ç•¥éƒ½æ˜¯ä¸€ä¸ªç±»ï¼Œå¤ç”¨çš„å¯èƒ½æ€§å¾ˆå°ï¼› æ‰€æœ‰çš„ç­–ç•¥ç±»éƒ½éœ€è¦å¯¹å¤–æš´éœ²ï¼Œä¸Šå±‚æ¨¡å—å¿…é¡»çŸ¥é“æœ‰å“ªäº›ç­–ç•¥ï¼Œç„¶åŽå†³å®šä½¿ç”¨å“ªä¸€ä¸ªç­–ç•¥ï¼› åº”ç”¨åœºæ™¯ï¼š å¤šä¸ªç±»åªæœ‰åœ¨ç®—æ³•æˆ–è¡Œä¸ºä¸Šç¨æœ‰ä¸åŒçš„åœºæ™¯ï¼› ç®—æ³•éœ€è¦è‡ªç”±åˆ‡æ¢çš„åœºæ™¯ï¼› éœ€è¦å±è”½ç®—æ³•è§„åˆ™çš„åœºæ™¯ï¼› é€‚é…å™¨æ¨¡å¼ä¼˜ç‚¹ï¼š è®©ä¸¤ä¸ªæ²¡æœ‰ä»»ä½•è”ç³»çš„ç±»åœ¨ä¸€èµ·è¿è¡Œï¼› å¢žåŠ äº†ç±»çš„é€æ˜Žæ€§ï¼› æé«˜äº†ç±»çš„å¤ç”¨åº¦ï¼› çµæ´»æ€§å¥½ï¼Œå½“ä¸éœ€è¦é€‚é…å™¨æ—¶ï¼Œåªè¦åˆ æŽ‰è¿™ä¸ªé€‚é…å™¨å°±å¯ä»¥äº†ï¼Œ åº”ç”¨åœºæ™¯ï¼š ä¿®æ”¹ä¸€ä¸ªå·²ç»æŠ•äº§çš„æŽ¥å£æ—¶ï¼Œ Androidä¸­å„ç§Adapterï¼Œ è¿­ä»£å™¨æ¨¡å¼ è¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸ºè§£å†³éåŽ†å®¹å™¨ä¸­çš„å…ƒç´ è€Œè¯žç”Ÿçš„ï¼Œæ²¡æœ‰äººä¼šå•ç‹¬å†™ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½¿ç”¨Javaæä¾›çš„Itreatorå°±å¯ä»¥æ»¡è¶³è¦æ±‚äº†ï¼› ç»„åˆæ¨¡å¼ä¼˜ç‚¹ï¼š é«˜å±‚æ¨¡å—è°ƒç”¨ç®€å•ï¼Œé«˜å±‚æ¨¡å—ä¸éœ€è¦å…³å¿ƒè‡ªå·±å¤„ç†çš„æ˜¯å•ä¸ªå¯¹è±¡è¿˜æ˜¯æ•´ä¸ªç»„åˆç»“æž„ï¼Œ èŠ‚ç‚¹å¯ä»¥è‡ªç”±å¢žåŠ ï¼› ç¼ºç‚¹ï¼š è°ƒç”¨æ—¶ä¼šç›´æŽ¥ä½¿ç”¨å®žçŽ°ç±»ï¼Œä¸ç¬¦åˆé¢å‘æŽ¥å£ç¼–ç¨‹æ€æƒ³ï¼› åº”ç”¨åœºæ™¯ï¼š ç»´æŠ¤å’Œå±•ç¤ºéƒ¨åˆ†-æ•´ä½“å…³ç³»çš„åœºæ™¯ï¼Œå¦‚æ ‘åž‹èœå•ï¼Œæ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„ç®¡ç†ï¼› åªè¦æ˜¯æ ‘åž‹ç»“æž„ï¼Œå°±è¦è€ƒè™‘ä½¿ç”¨ç»„åˆæ¨¡å¼ï¼› è§‚å¯Ÿè€…æ¨¡å¼ä¼˜ç‚¹ï¼š è§‚å¯Ÿè€…ä¸Žè¢«è§‚å¯Ÿè€…ä¹‹é—´æ˜¯æŠ½è±¡è€¦åˆï¼Œä¸ç®¡æ˜¯å¢žåŠ è§‚å¯Ÿè€…è¿˜æ˜¯è¢«è§‚å¯Ÿè€…éƒ½éžå¸¸å®¹æ˜“æ‰©å±•ï¼› å»ºç«‹ä¸€å¥—è§¦å‘æœºåˆ¶ï¼› ç¼ºç‚¹ï¼š ä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œå¤šä¸ªè§‚å¯Ÿè€…ï¼Œå¼€å‘ä¸Žè°ƒåº¦ä¼šæ¯”è¾ƒå¤æ‚ï¼Œåœ¨Javaä¸­æ¶ˆæ¯çš„é€šçŸ¥é»˜è®¤æ˜¯é¡ºåºæ‰§è¡Œï¼Œå…¶ä¸­ä¸€ä¸ªè§‚å¯Ÿè€…å¡å£³ï¼Œä¼šå½±å“æ•´ä½“çš„æ‰§è¡Œæ•ˆçŽ‡ï¼Œä¸€èˆ¬è¦è€ƒè™‘é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼ï¼› åº”ç”¨åœºæ™¯ï¼š å…³è”è¡Œä¸ºåœºæ™¯ï¼Œå¦‚Androidä¸­æ•°æ®å˜åŒ–ä¼šå¼•èµ·UIçš„å˜åŒ–ï¼› äº‹ä»¶å¤šçº§è§¦å‘åœºæ™¯ï¼› è·¨ç³»ç»Ÿçš„æ¶ˆæ¯äº¤æ¢åœºæ™¯ï¼› é—¨é¢æ¨¡å¼ä¼˜ç‚¹ï¼š å‡å°‘ç³»ç»Ÿçš„ç›¸äº’ä¾èµ–ï¼Œæ‰€æœ‰çš„ä¾èµ–éƒ½æ˜¯ä¸Žé—¨é¢å¯¹è±¡çš„ä¾èµ–ï¼Œä¸Žå­ç³»ç»Ÿæ— å…³ã€‚ æé«˜äº†çµæ´»æ€§ï¼› æé«˜äº†å®‰å…¨æ€§ï¼Œæƒ³è®©ä½ è®¿é—®å­ç³»ç»Ÿçš„å“ªäº›ä¸šåŠ¡å°±å¼€é€šå“ªäº›é€»è¾‘ï¼› ç¼ºç‚¹ï¼š ä¸ç¬¦åˆå¼€é—­åŽŸåˆ™ï¼Œå½“å‡ºçŽ°bugåŽï¼Œåªèƒ½é€šè¿‡ä¿®æ”¹é—¨é¢è§’è‰²çš„ä»£ç æ¥ä¿®å¤ï¼› åº”ç”¨åœºæ™¯ï¼š ä¸ºä¸€ä¸ªå¤æ‚çš„æ¨¡å—æˆ–å­ç³»ç»Ÿæä¾›ä¸€ä¸ªä¾›å¤–ç•Œè®¿é—®çš„æŽ¥å£ï¼Œå¦‚Androidçš„Contextç±»åªæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‰€æœ‰çš„åŠŸèƒ½éƒ½æ˜¯åœ¨ContextImplç±»å®žçŽ°çš„ï¼Œæˆ‘ä»¬ä¸ä¼šå¯Ÿè§‰åˆ°ContextImplçš„å­˜åœ¨ï¼Œåªéœ€è¦è°ƒç”¨Contextå°±å¯ä»¥äº†ï¼› å­ç³»ç»Ÿç›¸å¯¹ç‹¬ç«‹ï¼Œå¤–ç•Œå¯¹å­ç³»ç»Ÿçš„è®¿é—®åªè¦é»‘ç®±æ“ä½œå³å¯ï¼› é¢„é˜²ä½Žæ°´å¹³å¼€å‘äººå‘˜å¸¦æ¥çš„é£Žé™©ï¼Œè¢«é™å®šåœ¨æŒ‡å®šçš„å­ç³»ç»Ÿå¼€å‘ï¼› å¤‡å¿˜å½•æ¨¡å¼åº”ç”¨åœºæ™¯ï¼š éœ€è¦ä¿å­˜å’Œæ¢å¤æ•°æ®çš„ç›¸å…³çŠ¶æ€åœºæ™¯ï¼› æä¾›ä¸€ä¸ªå¯å›žæ»šçš„æ“ä½œåœºæ™¯ï¼› éœ€è¦ç›‘æŽ§çš„å‰¯æœ¬åœºæ™¯ä¸­ï¼› æ•°æ®åº“è¿žæŽ¥çš„äº‹åŠ¡ç®¡ç†å°±æ˜¯ç”¨çš„å¤‡å¿˜å½•æ¨¡å¼ï¼› æ³¨æ„äº‹é¡¹ï¼š å¤‡å¿˜å½•çš„ç”Ÿå‘½æœŸï¼Œè¦ä¸»åŠ¨ç®¡ç†å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œå»ºç«‹å°±è¦ä½¿ç”¨ï¼Œä¸ä½¿ç”¨å°±åˆ é™¤ï¼› å¤‡å¿˜å½•çš„æ€§èƒ½ï¼Œä¸è¦åœ¨é¢‘ç¹å»ºç«‹å¤‡ä»½çš„åœºæ™¯ä¸­ä½¿ç”¨å¤‡å¿˜å½•æ¨¡å¼ï¼›ï¼ˆå¯¹è±¡çš„åˆ›å»ºæ˜¯éœ€è¦æ¶ˆè€—èµ„æºçš„ï¼‰ è®¿é—®è€…æ¨¡å¼ä¼˜ç‚¹ï¼š ç¬¦åˆå•ä¸€èŒè´£åŽŸåˆ™ï¼Œå…·ä½“å…ƒç´ è§’è‰²è´Ÿè´£æ•°æ®çš„åŠ è½½ï¼Œè€Œè®¿é—®è€…ç±»åˆ™è´Ÿè´£æ•°æ®çš„å‘ˆçŽ°ï¼› ä¼˜ç§€çš„æ‰©å±•æ€§ï¼Œ çµæ´»æ€§éžå¸¸é«˜ï¼› ç¼ºç‚¹ï¼š å…·ä½“å…ƒç´ å¯¹è®¿é—®è€…å…¬å¸ƒç»†èŠ‚ï¼Œè®¿é—®è€…è¦è®¿é—®ä¸€ä¸ªç±»å°±å¿…é¡»è¦æ±‚è¿™ä¸ªç±»å…¬å¸ƒä¸€äº›æ–¹æ³•å’Œæ•°æ®ï¼› å…·ä½“å…ƒç´ å˜æ›´æ¯”è¾ƒå›°éš¾ï¼›å…·ä½“å…ƒç´ è§’è‰²çš„å¢žåŠ ã€åˆ é™¤ã€ä¿®æ”¹éƒ½æ˜¯æ¯”è¾ƒå›°éš¾ï¼› è¿èƒŒäº†ä¾èµ–å€’ç½®åŽŸåˆ™ï¼Œè®¿é—®è€…ä¾èµ–çš„æ˜¯å…·ä½“çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯æŠ½è±¡çš„å…ƒç´ ï¼› åº”ç”¨åœºæ™¯ ï¼š ä¸€ä¸ªå¯¹è±¡ç»“æž„åŒ…å«å¾ˆå¤šç±»å¯¹è±¡ï¼Œå®ƒä»¬æœ‰ä¸åŒçš„æŽ¥å£ï¼Œè€Œä½ æƒ³å¯¹è¿™äº›å¯¹è±¡å®žæ–½ä¸€äº›ä¾èµ–äºŽå…¶å…·ä½“ç±»çš„æ“ä½œï¼› éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡ç»“æž„ä¸­çš„å¯¹è±¡è¿›è¡Œå¾ˆå¤šä¸åŒå¹¶ä¸”ä¸ç›¸å…³çš„æ“ä½œï¼Œè€Œä½ æƒ³é¿å…è®©è¿™äº›æ“ä½œâ€æ±¡æŸ“â€œè¿™äº›å¯¹è±¡çš„ç±»ï¼› ä¸šåŠ¡è§„åˆ™è¦æ±‚éåŽ†å¤šä¸ªä¸åŒçš„å¯¹è±¡ï¼› çŠ¶æ€æ¨¡å¼ä¼˜ç‚¹ï¼š ç»“æž„æ¸…æ™°ï¼Œé¿å…äº†è¿‡å¤šçš„switch...caseæˆ–if...elseè¯­å¥çš„ä½¿ç”¨ï¼› éµå¾ªè®¾è®¡åŽŸåˆ™ï¼Œæ¯ä¸ªçŠ¶æ€å°±æ˜¯ä¸€ä¸ªå­ç±»ï¼› å°è£…æ€§éžå¸¸å¥½ï¼Œå°†çŠ¶æ€å˜æ¢æ”¾ç½®åˆ°ç±»çš„å†…éƒ¨æ¥å®žçŽ°ï¼› ç¼ºç‚¹ï¼š å­ç±»ä¼šå¤ªå¤šï¼Œä¹Ÿå°±æ˜¯ç±»è†¨èƒ€ï¼Œæœ‰å¤šå°‘ä¸ªçŠ¶æ€ï¼Œå°±ä¼šæœ‰å¤šå°‘ä¸ªå­ç±»ï¼› åº”ç”¨åœºæ™¯ï¼š è¡Œä¸ºéšçŠ¶æ€æ”¹å˜è€Œæ”¹å˜çš„åœºæ™¯ï¼Œå¦‚æƒé™è®¾è®¡ï¼› æ¡ä»¶ã€åˆ†æ”¯åˆ¤æ–­è¯­å¥çš„æ›¿ä»£è€…ï¼Œé€šè¿‡æ‰©å±•å­ç±»å®žçŽ°æ¡ä»¶çš„åˆ¤æ–­å¤„ç†ï¼› çŠ¶æ€çš„ä¸ªæ•°æœ€å¥½ä¸è¦è¶…è¿‡5ä¸ªï¼› è§£é‡Šå™¨æ¨¡å¼ï¼ˆçŽ°åœ¨ä½¿ç”¨è¾ƒå°‘ï¼‰ä¼˜ç‚¹ï¼š æ‰©å±•æ€§å¥½ï¼Œ ç¼ºç‚¹ï¼š è§£é‡Šå™¨æ¨¡å¼ä¼šå¼•èµ·ç±»è†¨èƒ€ï¼› é‡‡ç”¨äº†é€’å½’è°ƒç”¨æ–¹æ³•ï¼› äº«å…ƒæ¨¡å¼ä¼˜ç‚¹ï¼š å¤§å¤§å‡å°‘åº”ç”¨ç¨‹åºåˆ›å»ºçš„å¯¹è±¡ï¼Œé™ä½Žç¨‹åºå†…å­˜çš„å ç”¨; ç¼ºç‚¹ï¼š æé«˜äº†ç³»ç»Ÿå¤æ‚æ€§ï¼Œéœ€è¦åˆ†ç¦»å‡ºå†…éƒ¨å’Œå¤–éƒ¨çŠ¶æ€ï¼› åº”ç”¨åœºæ™¯ï¼š ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡çš„ç›¸ä¼¼å¯¹è±¡ï¼› éœ€è¦ç¼“å†²æ± çš„åœºæ™¯ï¼› ç»†ç²’åº¦çš„å¯¹è±¡éƒ½å…·æœ‰è¾ƒæŽ¥è¿‘çš„å¤–éƒ¨çŠ¶æ€ï¼›ä¸”å†…éƒ¨çŠ¶æ€ä¸ŽçŽ¯å¢ƒæ— å…³ æ¡¥æ¢æ¨¡å¼ä¼˜ç‚¹ï¼š æŠ½è±¡ä¸Žå®žçŽ°åˆ†ç¦»ï¼› ä¼˜ç§€çš„æ‰©å……èƒ½åŠ›ï¼› å®žçŽ°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜Žï¼› åº”ç”¨åœºæ™¯ï¼š ä¸å¸Œæœ›æˆ–ä¸é€‚ç”¨ç»§æ‰¿çš„åœºæ™¯ï¼› æŽ¥å£æˆ–æŠ½è±¡ç±»ä¸ç¨³å®šçš„æƒ…å†µï¼› é‡è¦æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼›]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹23ç§å¸¸ç”¨æ¨¡å¼]]></title>
    <url>%2Fposts%2F8af7915a.html</url>
    <content type="text"><![CDATA[åœ¨å¸¸ç”¨çš„23ç§è®¾è®¡æ¨¡å¼ä¸­ï¼Œæ ¹æ®è®¾è®¡æ¨¡å¼çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åˆå¯ä»¥æŠŠè¿™23ä¸ªè®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰å¤§ç±»ï¼šåˆ›å»ºç±»æ¨¡å¼ï¼Œç»“æž„ç±»æ¨¡å¼ï¼Œè¡Œä¸ºç±»æ¨¡å¼ï¼› åˆ›å»ºç±»æ¨¡å¼ å·¥åŽ‚æ–¹æ³•æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªç”¨äºŽåˆ›å»ºå¯¹è±¡çš„æŽ¥å£ï¼Œè®©å­ç±»å†³å®šå®žä¾‹åŒ–å“ªä¸€ç±»ï¼Œä½¿ä¸€ä¸ªç±»çš„å®žä¾‹åŒ– å»¶è¿Ÿåˆ°å…¶å­ç±»ï¼› å»ºé€ è€…æ¨¡å¼ï¼Œå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æž„å»ºä¸Žå®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æž„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºï¼› æŠ½è±¡å·¥åŽ‚æ¨¡å¼ï¼Œä¸ºåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡æä¾›ä¸€ä¸ªæŽ¥å£ï¼Œè€Œä¸”æ— é¡»æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»ã€‚ å•ä¾‹æ¨¡å¼ï¼Œç¡®ä¿æŸä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®žä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®žä¾‹ï¼› åŽŸåž‹æ¨¡å¼ï¼Œé€šè¿‡å¯¹è±¡å¤åˆ¶æ¥å®žçŽ°çš„æ¨¡å¼å°±å«åšåŽŸåž‹æ¨¡å¼ï¼Œç”¨åŽŸåž‹å®žä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŽŸåž‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ ç»“æž„ç±»æ¨¡å¼ é€‚é…å™¨æ¨¡å¼,å°†ä¸€ä¸ªç±»çš„æŽ¥å£å˜æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æŽ¥å£ï¼Œä»Žè€Œä½¿åŽŸæœ¬å› æŽ¥å£ä¸åŒ¹é…è€Œæ— æ³•åœ¨ä¸€èµ·å·¥ä½œçš„ä¸¤ä¸ªç±»èƒ½å¤Ÿåœ¨ä¸€èµ·å·¥ä½œï¼› æ¡¥æ¢æ¨¡å¼ï¼Œå°†æŠ½è±¡ä¸Žå®žçŽ°è§£è€¦ï¼Œä½¿å¾—ä¸¤è€…å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ï¼› ç»„åˆæ¨¡å¼ï¼Œå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æž„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„åœºæ¬¡ç»“æž„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚ è£…é¥°æ¨¡å¼ï¼ŒåŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢žåŠ åŠŸèƒ½æ¥è¯´ ï¼Œè£…é¥°æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ï¼› é—¨é¢æ¨¡å¼ï¼Œè¦æ±‚ä¸€ä¸ªå­ç³»ç»Ÿçš„å¤–éƒ¨ä¸Žå…¶å†…éƒ¨é€šä¿¡å¿…é¡»é€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å¯¹è±¡è¿›è¡Œã€‚é—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æŽ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºŽä½¿ç”¨ã€‚ äº«å…ƒæ¨¡å¼ï¼Œæ˜¯æ± æŠ€æœ¯çš„é‡è¦å®žçŽ°æ–¹å¼ï¼Œä½¿å¾—å…±äº«å¯¹è±¡å¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡çš„ç»†ç²’åº¦çš„å¯¹è±¡ã€‚ ä»£ç†æ¨¡å¼ï¼Œä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æŽ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ è¡Œä¸ºç±»æ¨¡å¼ è´£ä»»é“¾æ¨¡å¼ï¼Œä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»Žè€Œé¿å…äº†è¯·æ±‚çš„å‘é€è€…å’ŒæŽ¥å—è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå°†è¿™äº›å¯¹è±¡è¿žæˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ï¼› å‘½ä»¤æ¨¡å¼ï¼Œè¿™æ˜¯ä¸€ä¸ªé«˜å†…èšçš„æ¨¡å¼ï¼Œå°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»Žè€Œè®©ä½ ä½¿ç”¨ä¸åŒçš„è¯·æ±‚æŠŠå®¢æˆ·ç«¯å‚æ•°åŒ–ï¼Œå¯¹è¯·æ±‚æŽ’é˜Ÿæˆ–è€…è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œå¯ä»¥æä¾›å‘½ä»¤çš„æ’¤é”€å’Œæ¢å¤åŠŸèƒ½ï¼› è§£é‡Šå™¨æ¨¡å¼ï¼Œæ˜¯ä¸€ç§æŒ‰ç…§è§„å®šè¯­æ³•è¿›è¡Œè§£æžçš„æ–¹æ¡ˆï¼›å®šä¹‰ä¸ºï¼šç»™å®šä¸€é—¨è¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨ä½¿ç”¨è¯¥è¡¨ç¤ºä¸šè§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚ è¿­ä»£å™¨æ¨¡å¼ï¼Œï¼Œå®ƒæä¾›ä¸€ç§æ–¹æ³•è®¿é—®ä¸€ä¸ªå®¹å™¨å¯¹è±¡ä¸­å„ä¸ªå¯¹è±¡ï¼Œè€Œåˆä¸éœ€æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚ã€‚ï¼ˆç›®å‰å·²ç»æ²¡è½ï¼‰ï¼› ä¸­ä»‹è€…æ¨¡å¼ï¼Œç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ï¼Œä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾ç¤ºåœ°ç›¸äº’ä½œç”¨ï¼Œä»Žè€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ å¤‡å¿˜å½•æ¨¡å¼ï¼Œåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•èŽ·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åŽå°±å¯å°†å¯¹è±¡æ¢å¤åˆ°åŽŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚é€šä¿—åœ°è®²ï¼Œå¤‡å¿˜å½•æ¨¡å¼å°±æ˜¯ä¸€ä¸ªå¯¹è±¡çš„å¤‡ä»½æ¨¡å¼ï¼Œæä¾›äº†ä¸€ç§ç¨‹åºæ•°æ®çš„å¤‡ä»½æ–¹æ³•ï¼› è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¹Ÿå«åšå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå®šä¹‰å¯¹è±¡é—´ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡æ”¹å˜çŠ¶æ€ï¼Œåˆ™æ‰€æœ‰ä¾èµ–äºŽå®ƒçš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚ çŠ¶æ€æ¨¡å¼ï¼ŒçŠ¶æ€æ¨¡å¼çš„æ ¸å¿ƒæ˜¯å°è£…ï¼ŒçŠ¶æ€çš„å˜æ›´å¼•èµ·äº†è¡Œä¸ºçš„å˜æ›´ã€‚å½“ä¸€ä¸ªå¯¹è±¡å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶å…è®¸å…¶æ”¹å˜è¡Œä¸ºï¼Œè¿™ä¸ªå¯¹è±¡çœ‹èµ·æ¥åƒæ”¹å˜äº†å…¶ç±»ã€‚ ç­–ç•¥æ¨¡å¼ï¼Œå®šä¹‰ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬ä¹‹é—´å¯ä»¥äº’æ¢ï¼› æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„æ¡†æž¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æž„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›æ¡†æž¶ï¼› è®¿é—®è€…æ¨¡å¼ï¼Œå°è£…ä¸€äº›ä½œç”¨äºŽæŸç§æ•°æ®ç»“æž„ä¸­çš„å„å…ƒç´ çš„æ“ä½œï¼Œå®ƒå¯ä»¥åœ¨ä¸æ”¹å˜æ•°æ®ç»“æž„çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºŽè¿™äº›å…ƒç´ çš„æ–°çš„æ“ä½œã€‚]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è®¾è®¡æ¨¡å¼ä¹‹6å¤§è®¾è®¡åŽŸåˆ™]]></title>
    <url>%2Fposts%2Ffbde7e42.html</url>
    <content type="text"><![CDATA[å•ä¸€èŒè´£åŽŸåˆ™å•ä¸€èŒè´£çš„å®šä¹‰ä¸ºï¼šåº”è¯¥æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå¯ä»¥å¼•èµ·ç±»çš„å˜æ›´ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªèŒè´£ä¸€ä¸ªæŽ¥å£ï¼ˆä¸šåŠ¡é€»è¾‘çš„åˆ’åˆ†ï¼‰ï¼›å¥½å¤„ï¼š ç±»çš„å¤æ‚æ€§é™ä½Žï¼› å¯è¯»æ€§æé«˜ï¼› å¯ç»´æŠ¤æ€§æé«˜ï¼› å˜æ›´å¼•èµ·çš„é£Žé™©é™ä½Žï¼›ä¸€ä¸ªæŽ¥å£ä¿®æ”¹åªå¯¹ç›¸åº”çš„å®žçŽ°ç±»æœ‰å½±å“ï¼Œå¯¹å…¶ä»–æŽ¥å£æ²¡æœ‰å½±å“ é‡Œæ°æ›¿æ¢åŽŸåˆ™é€šä¿—åœ°è¯´ï¼Œåªè¦çˆ¶ç±»èƒ½å‡ºçŽ°çš„åœ°æ–¹å­ç±»å°±å¯ä»¥å‡ºçŽ°ï¼Œè€Œä¸”æ›¿æ¢ä¸ºå­ç±»ä¹Ÿä¸ä¼šäº§ç”Ÿä»»ä½•é”™è¯¯æˆ–å¼‚å¸¸ï¼›ä½†åè¿‡æ¥å°±ä¸è¡Œï¼Œæœ‰å­ç±»å‡ºçŽ°çš„åœ°æ–¹ï¼Œçˆ¶ç±»æœªå¿…å°±èƒ½é€‚åº”ï¼›ï¼ˆå› æ­¤åœ¨ç±»ä¸­è°ƒç”¨å…¶ä»–ç±»æ—¶ï¼Œå°±åŠ¡å¿…ä½¿ç”¨çˆ¶ç±»æˆ–æŽ¥å£ï¼Œå¦‚æžœä¸èƒ½è¿™æ ·åšï¼Œåˆ™è¯´æ˜Žç±»çš„è®¾è®¡å·²ç»è¿èƒŒäº†LSPåŽŸåˆ™äº†ï¼‰ å¦‚æžœå­ç±»ä¸èƒ½å®Œæ•´åœ°å®žçŽ°å®žçŽ°çˆ¶ç±»çš„æ–¹æ³•ï¼Œæˆ–è€…çˆ¶ç±»çš„æŸäº›æ–¹æ³•åœ¨å­ç±»ä¸­å·²ç»å‘ç”Ÿâ€œç•¸å˜â€ï¼Œåˆ™å»ºè®®æ–­å¼€çˆ¶å­ç»§æ‰¿å…³ç³»ï¼Œé‡‡ç”¨ä¾èµ–ï¼Œèšé›†ï¼Œç»„åˆç­‰å…³ç³»ä»£æ›¿ç»§æ‰¿ï¼› æ–¹æ³•ä¸­çš„è¾“å…¥å‚æ•°ç§°ä¸ºå‰ç½®æ¡ä»¶ï¼Œå¹¶ä¸”å­ç±»ä¸­çš„æ–¹æ³•çš„å‰ç½®æ¡ä»¶å¿…é¡»ä¸Žçˆ¶ç±»ä¸­è¢«è¦†å†™çš„æ–¹æ³•çš„å‰ç½®æ¡ä»¶ç›¸åŒæˆ–è€…æ›´å®½æ¾ï¼›ï¼ˆçˆ¶ç±»å‡ºçŽ°çš„åœ°æ–¹ï¼Œå­ç±»å°±å¯ä»¥å‡ºçŽ°ï¼‰ ä¾èµ–å€’ç½®åŽŸåˆ™æœ€ç›´æŽ¥çš„ç†è§£å°±æ˜¯ï¼šé¢å‘æŽ¥å£ç¼–ç¨‹ï¼ŒæŠ½è±¡å®šä¹‰ï¼š é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºŽä½Žå±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼› æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼› ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ï¼› åœ¨Javaè¯­è¨€ä¸­çš„è¡¨çŽ°ä¸ºï¼š æ¨¡å—é—´çš„ä¾èµ–é€šè¿‡æŠ½è±¡å‘ç”Ÿï¼Œå®žçŽ°ç±»ä¹‹é—´ä¸å‘ç”Ÿç›´æŽ¥çš„ä¾èµ–å…³ç³»ï¼Œå…¶ä¾èµ–å…³ç³»æ˜¯é€šè¿‡æŽ¥å£æˆ–æŠ½è±¡ç±»äº§ç”Ÿçš„ï¼› æŽ¥å£æˆ–æŠ½è±¡ç±»ä¸ä¾èµ–äºŽå®žçŽ°ç±»ï¼› å®žçŽ°ç±»ä¾èµ–æŽ¥å£æˆ–æŠ½è±¡ç±»ï¼› æŽ¥å£éš”ç¦»åŽŸåˆ™æŽ¥å£çš„ç§ç±»ï¼š å®žä¾‹æŽ¥å£ï¼Œå¦‚æˆ‘ä»¬åœ¨Javaä¸­å£°æ˜Žä¸€ä¸ªç±»ï¼Œç„¶åŽç”¨new å…³é”®å­—æ¥äº§ç”Ÿä¸€ä¸ªå®žä¾‹ï¼Œå®ƒæ˜¯å¯¹ä¸€ä¸ªç±»åž‹çš„äº‹ç‰©çš„ä¾›è¿°ï¼Œè¿™æ˜¯ä¸€ä¸ªæŽ¥å£ï¼› ç±»æŽ¥å£ï¼Œåœ¨Javaä¸­ä½¿ç”¨å…³é”®å­—interfaceå®šä¹‰çš„æŽ¥å£ï¼› å®šä¹‰ï¼šè¯´ç™½äº†å°±æ˜¯æŽ¥å£å°½é‡ç»†åŒ–ï¼ŒåŒæ—¶æŽ¥å£ä¸­çš„æ–¹æ³•å°½é‡å°‘ è¿ªç±³ç‰¹æ³•åˆ™ä¹Ÿå«æœ€å°‘çŸ¥è¯†åŽŸåˆ™ï¼Œç®€å•è¯´åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡æœ‰æœ€å°‘çš„äº†è§£ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªç±»åº”è¯¥å¯¹è‡ªå·±éœ€è¦è€¦åˆæˆ–è°ƒç”¨çš„ç±»çŸ¥é“å¾—æœ€å°‘ï¼›ä¹Ÿå°±æ˜¯ç±»é—´è§£è€¦ï¼Œå¼±è€¦åˆ å¼€é—­åŽŸåˆ™å®šä¹‰ï¼šè½¯ä»¶å®žä½“åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œä¹Ÿå°±æ˜¯è¯´è½¯ä»¶å®žä½“åº”è¯¥é€šè¿‡æ‰©å±•æ¥å®žçŽ°å˜åŒ–ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹å·²æœ‰çš„ä»£ç æ¥å®žçŽ°å˜åŒ–ï¼›å¦‚ä½•åº”ç”¨åˆ°å®žé™…ç¼–ç¨‹ä¸­ï¼Ÿï¼š æŠ½è±¡çº¦æŸï¼Œä¹Ÿå°±æ˜¯é€šè¿‡æŽ¥å£æˆ–æŠ½è±¡ç±»çº¦æŸå®žçŽ°æ‰©å±•ï¼Œå¯¹æ‰©å±•è¿›è¡Œè¾¹ç•Œçš„é™å®šï¼Œä¸å…è®¸å‡ºçŽ°åœ¨æŽ¥å£æˆ–æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨çš„public æ–¹æ³•ï¼›å¹¶ä¸”å‚æ•°çš„ç±»åž‹ã€å¼•ç”¨å¯¹è±¡å°½é‡ä½¿ç”¨æŽ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œæœ€åŽå°±æ˜¯æŠ½è±¡å±‚å°½é‡ä¿æŒç¨³å®šï¼Œä¸€æ—¦ç¡®å®šå°±ä¸å…è®¸ä¿®æ”¹ï¼› å…ƒæ•°æ®æŽ§åˆ¶æ¨¡å—è¡Œä¸ºï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨å…ƒæ•°æ®æ¥æŽ§åˆ¶ç¨‹åºçš„è¡Œä¸ºï¼Œå‡å°‘é‡å¤å¼€å‘ã€‚å…ƒæ•°æ®å°±æ˜¯ç”¨æ¥æè¿°çŽ¯å¢ƒå’Œæ•°æ®çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„é…ç½®å‚æ•°ï¼› åˆ¶å®šé¡¹ç›®ç« ç¨‹ï¼Œè®©å›¢é˜Ÿçš„æ‰€æœ‰æˆå‘˜éƒ½éµå®ˆçº¦å®šï¼› å°è£…å˜åŒ–ï¼Œå°†ç›¸åŒçš„å˜åŒ–å°è£…åˆ°ä¸€ä¸ªæŽ¥å£æˆ–æŠ½è±¡ç±»ä¸­ï¼Œä¸åŒçš„å˜åŒ–å°è£…åˆ°ä¸åŒçš„æŽ¥å£æˆ–å˜åŒ–ï¼›]]></content>
      <categories>
        <category>Java</category>
        <category>è®¾è®¡æ¨¡å¼</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>è®¾è®¡æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Atom_For_ReactNative]]></title>
    <url>%2Fposts%2F321ed7e5.html</url>
    <content type="text"><![CDATA[Atomä¸‹è½½é“¾æŽ¥https://atom.io/ Atomæ’ä»¶https://atom.io/packageså¸¸ç”¨æ’ä»¶ï¼šâ€‹ æµè§ˆå™¨æµè§ˆåŠŸèƒ½ open-in-browser (å¯ä»¥è®¾ç½®å¿«æ·é”®)â€‹ åˆ†é¡µå±•ç¤ºhtmlé¡µé¢æ•ˆæžœ atom-html-preview (å¯ä»¥è®¾ç½®å¿«æ·é”®)â€‹ æ–‡ä»¶è·¯å¾„è¡¥å…¨ autocomplete-pathâ€‹ Reactå®˜ç½‘https://facebook.github.io/react/]]></content>
      <categories>
        <category>Android</category>
        <category>ReactNative</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ReactNative</tag>
        <tag>Atom</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å…¨å±€å¼¹æ¡†GlobalDialog]]></title>
    <url>%2Fposts%2F5bbd3c9c.html</url>
    <content type="text"><![CDATA[Demoåœ°å€ï¼šGlobalDialogDemo å…¨å±€å¼¹æ¡†ï¼Œæ¯”å¦‚å¼‚åœ°ç™»å½•æç¤ºã€‚æ€è·¯å°±æ˜¯é€šè¿‡éž Activity çš„ Context æ¥å¯åŠ¨ä¸€ä¸ªé€æ˜Ž activityï¼Œ ç„¶åŽä½¿ç”¨è¿™ä¸ª activity æ¥æ˜¾ç¤ºä¸€ä¸ª dialogã€‚ AndroidManifest.xml123456789101112131415161718192021222324&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.whohelp.globaldialogdemo"&gt; &lt;application android:allowBackup="true" android:icon="@mipmap/ic_launcher" android:label="@string/app_name" android:roundIcon="@mipmap/ic_launcher_round" android:supportsRtl="true" android:theme="@style/AppTheme"&gt; &lt;activity android:name=".MainActivity"&gt; &lt;intent-filter&gt; &lt;action android:name="android.intent.action.MAIN" /&gt; &lt;category android:name="android.intent.category.LAUNCHER" /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; &lt;activity android:name=".GlobalDialogActivity" android:theme="@style/Transparent" /&gt; &lt;/application&gt;&lt;/manifest&gt; styles.xml123456789101112131415161718&lt;resources&gt; &lt;!-- Base application theme. --&gt; &lt;style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar"&gt; &lt;!-- Customize your theme here. --&gt; &lt;item name="colorPrimary"&gt;@color/colorPrimary&lt;/item&gt; &lt;item name="colorPrimaryDark"&gt;@color/colorPrimaryDark&lt;/item&gt; &lt;item name="colorAccent"&gt;@color/colorAccent&lt;/item&gt; &lt;/style&gt; &lt;style name="Transparent" parent="Theme.AppCompat.Light.NoActionBar"&gt; &lt;item name="android:windowBackground"&gt;@android:color/transparent&lt;/item&gt; &lt;item name="android:windowIsTranslucent"&gt;true&lt;/item&gt; &lt;item name="android:windowAnimationStyle"&gt;@android:style/Animation&lt;/item&gt; &lt;item name="android:windowNoTitle"&gt;true&lt;/item&gt; &lt;/style&gt;&lt;/resources&gt; MainActivity.java1234567891011121314public class MainActivity extends AppCompatActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); &#125; public void showDialog(View view) &#123; GlobalDialogActivity.start(this.getApplicationContext()); &#125;&#125; GlobalDialogActivity123456789101112131415161718192021222324252627282930313233public class GlobalDialogActivity extends AppCompatActivity &#123; public static void start(Context context) &#123; Intent starter = new Intent(context, GlobalDialogActivity.class); //è®¾ç½®å¯åŠ¨æ–¹å¼ starter.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); context.startActivity(starter); &#125; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_global_dialog); //æ˜¾ç¤ºdialog new AlertDialog.Builder(this) .setTitle("å…¨å±€dialog") .setMessage("è¿™æ˜¯ä¸€ä¸ªå…¨å±€dialog") .setNegativeButton("å–æ¶ˆ", new DialogInterface.OnClickListener() &#123; @Override public void onClick(DialogInterface dialog, int which) &#123; finish(); &#125; &#125;) .setPositiveButton("ç¡®å®š", new DialogInterface.OnClickListener() &#123; @Override public void onClick(DialogInterface dialog, int which) &#123; finish(); &#125; &#125;) .setCancelable(false) .show(); &#125;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>GlobalDialog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[TextViewæ–‡å­—åŠ ç²—]]></title>
    <url>%2Fposts%2F752c11de.html</url>
    <content type="text"><![CDATA[xmlåŠ ç²—1android:textStyle="bold" ä»£ç åŠ ç²—æŽ¨èæ–¹å¼1textView.typeface = Typeface.defaultFromStyle(Typeface.BOLD) éžæŽ¨èæ–¹å¼1textView.paint.isFakeBoldText = true]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå¯åŠ¨æ¨¡å¼å’Œåº”ç”¨åœºæ™¯]]></title>
    <url>%2Fposts%2F7bd182af.html</url>
    <content type="text"><![CDATA[åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä¼šåŒ…æ‹¬ç€å¤šä¸ªActivityï¼Œç³»ç»Ÿä¸­ä½¿ç”¨ä»»åŠ¡æ ˆæ¥å­˜å‚¨åˆ›å»ºçš„Activityå®žä¾‹ï¼Œä»»åŠ¡æ ˆæ˜¯ä¸€ç§â€œåŽè¿›å…ˆå‡ºâ€çš„æ ˆç»“æž„ã€‚ä¸¾ä¸ªæ —å­ï¼Œè‹¥æˆ‘ä»¬å¤šæ¬¡å¯åŠ¨åŒä¸€ä¸ªActivityã€‚ç³»ç»Ÿä¼šåˆ›å»ºå¤šä¸ªå®žä¾‹ä¾æ¬¡æ”¾å…¥ä»»åŠ¡æ ˆä¸­ã€‚å½“æŒ‰backé”®è¿”å›žæ—¶ï¼Œæ¯æŒ‰ä¸€æ¬¡ï¼Œä¸€ä¸ªActivityå‡ºæ ˆï¼Œç›´åˆ°æ ˆç©ºä¸ºæ­¢ã€‚å½“æ ˆä¸­æ— ä¸è®ºä»€ä¹ˆActivityã€‚ç³»ç»Ÿå°±ä¼šå›žæ”¶æ­¤ä»»åŠ¡æ ˆã€‚ ä¸Šé¢è¿™ä¸ªæ ·ä¾‹ä¸­çš„Activityå¹¶æ²¡æœ‰è®¾ç½®å¯åŠ¨æ¨¡å¼ï¼Œä½ ä¼šå‘çŽ°å¤šæ¬¡å¯åŠ¨åŒä¸€ä¸ªActivityã€‚è€Œç³»ç»Ÿå´åˆ›å»ºäº†å¤šä¸ªå®žä¾‹ï¼Œç™½ç™½æµªè´¹å†…å­˜ï¼Œè¿™æ ·çš„æƒ…å†µAndroidæ—©å°±æ›¿æˆ‘ä»¬è€ƒè™‘å¥½äº†ã€‚Androidä¸ºActivity çš„åˆ›å»ºæä¾›äº†4ç§å¯åŠ¨æ¨¡å¼ï¼Œè€Œä¾æ®å®žé™…åº”ç”¨åœºæ™¯çš„ä¸åŒã€‚ä¸ºActivity é€‰æ‹©ä¸åŒçš„å¯åŠ¨æ¨¡å¼ï¼Œæœ€å¤§åŒ–é™ä½Žäº†æ¯æ¬¡éƒ½é¡»è¦åœ¨æ ˆä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„Activityçš„åŽ‹åŠ›ï¼Œé™ä½Žå†…å­˜ä½¿ç”¨ã€‚ å¯åŠ¨æ¨¡å¼çš„å…·ä½“è¯´æ˜Žå’Œä½¿ç”¨åœºæ™¯ï¼Ÿä»¥ä¸‹ä¾æ®è¿™ç¯‡åšæ–‡æ¥ä¸€ä¸€è§£æƒ‘ã€‚ ä¸€. Androidå¯åŠ¨æ¨¡å¼å…·ä½“è§£é‡Š 1. Standard æ ‡å‡†æ¨¡å¼è¯´æ˜Žï¼š Androidåˆ›å»ºActivityæ—¶çš„é»˜è®¤æ¨¡å¼ï¼Œå‡è®¾æ²¡æœ‰ä¸ºActivityè®¾ç½®å¯åŠ¨æ¨¡å¼çš„è¯ï¼Œé»˜è§‰å¾—æ ‡å‡†æ¨¡å¼ã€‚æ¯æ¬¡å¯åŠ¨ä¸€ä¸ªActivityéƒ½ä¼šåˆä¸€æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„å®žä¾‹å…¥æ ˆï¼Œæ— è®ºè¿™ä¸ªå®žä¾‹æ˜¯å¦å­˜åœ¨ã€‚ ç”Ÿå‘½å‘¨æœŸï¼šå¦‚ä¸Šæ‰€çœ‹åˆ°çš„ï¼Œæ¯æ¬¡è¢«åˆ›å»ºçš„å®žä¾‹Activity çš„ç”Ÿå‘½å‘¨æœŸç¬¦åˆå…¸åž‹æƒ…å†µï¼Œå®ƒçš„onCreateã€onStartã€onResumeéƒ½ä¼šè¢«è°ƒç”¨ã€‚ ä¸¾ä¾‹ï¼šæ­¤æ—¶Activity æ ˆä¸­ä»¥æ­¤æœ‰Aã€Bã€Cä¸‰ä¸ªActivityï¼Œæ­¤æ—¶Cå¤„äºŽæ ˆé¡¶ï¼Œå¯åŠ¨æ¨¡å¼ä¸ºStandard æ¨¡å¼ã€‚ è‹¥åœ¨C Activityä¸­åŠ å…¥ç‚¹å‡»äº‹ä»¶ï¼Œé¡»è¦è·³è½¬åˆ°è¿˜æœ‰ä¸€ä¸ªåŒç±»åž‹çš„C Activityã€‚ç»“æžœæ˜¯è¿˜æœ‰ä¸€ä¸ªC Activityè¿›å…¥æ ˆä¸­ï¼Œæˆä¸ºæ ˆé¡¶ã€‚ 2. SingleTop æ ˆé¡¶å¤ç”¨æ¨¡å¼è¯´æ˜Žï¼šåˆ†ä¸¤ç§å¤„ç†æƒ…å†µï¼š é¡»è¦åˆ›å»ºçš„Activityå·²ç»å¤„äºŽæ ˆé¡¶æ—¶ï¼Œæ­¤æ—¶ä¼šç›´æŽ¥å¤ç”¨æ ˆé¡¶çš„Activityã€‚ä¸ä¼šå†åˆ›å»ºæ–°çš„Activityï¼› è‹¥é¡»è¦åˆ›å»ºçš„Activityä¸å¤„äºŽæ ˆé¡¶ï¼Œæ­¤æ—¶ä¼šåˆä¸€æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„Activityå…¥æ ˆï¼ŒåŒStandardæ¨¡å¼ä¸€æ ·ã€‚ ç”Ÿå‘½å‘¨æœŸï¼šè‹¥æƒ…å†µä¸€ä¸­æ ˆé¡¶çš„Activityè¢«ç›´æŽ¥å¤ç”¨æ—¶ï¼Œå®ƒçš„onCreateã€onStartä¸ä¼šè¢«ç³»ç»Ÿè°ƒç”¨ï¼Œç”±äºŽå®ƒå¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚å¯æ˜¯ä¸€ä¸ªæ–°çš„æ–¹æ³• onNewIntentä¼šè¢«å›žè°ƒï¼ˆActivityè¢«æ­£å¸¸åˆ›å»ºæ—¶ä¸ä¼šå›žè°ƒæ­¤æ–¹æ³•ï¼‰ã€‚ ä¸¾ä¾‹ï¼šæ­¤æ—¶Activity æ ˆä¸­ä»¥æ­¤æœ‰Aã€Bã€Cä¸‰ä¸ªActivityï¼Œæ­¤æ—¶Cå¤„äºŽæ ˆé¡¶ï¼Œå¯åŠ¨æ¨¡å¼ä¸ºSingleTop æ¨¡å¼ã€‚æƒ…å†µä¸€ï¼šåœ¨C Activityä¸­åŠ å…¥ç‚¹å‡»äº‹ä»¶ï¼Œé¡»è¦è·³è½¬åˆ°è¿˜æœ‰ä¸€ä¸ªåŒç±»åž‹çš„C Activityã€‚ ç»“æžœæ˜¯ç›´æŽ¥å¤ç”¨æ ˆé¡¶çš„C Activityã€‚ æƒ…å†µäºŒï¼šåœ¨C Activityä¸­åŠ å…¥ç‚¹å‡»äº‹ä»¶ï¼Œé¡»è¦è·³è½¬åˆ°è¿˜æœ‰ä¸€ä¸ªA Activityã€‚ç»“æžœæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„Activityå…¥æ ˆã€‚æˆä¸ºæ ˆé¡¶ã€‚ 3. SingleTask æ ˆå†…å¤ç”¨æ¨¡å¼è¯´æ˜Žï¼šè‹¥é¡»è¦åˆ›å»ºçš„Activityå·²ç»å¤„äºŽæ ˆä¸­æ—¶ï¼Œæ­¤æ—¶ä¸ä¼šåˆ›å»ºæ–°çš„Activityï¼Œè€Œæ˜¯å°†å­˜åœ¨æ ˆä¸­çš„Activityä¸Šé¢çš„å…¶ä»–Activityæ‰€æœ‰é”€æ¯ï¼Œä½¿å®ƒæˆä¸ºæ ˆé¡¶ã€‚ ç”Ÿå‘½å‘¨æœŸï¼šåŒSingleTop æ¨¡å¼ä¸­çš„æƒ…å†µä¸€åŒæ ·ã€‚ä»…ä»…ä¼šåˆä¸€æ¬¡å›žè°ƒActivityä¸­çš„ onNewIntentæ–¹æ³• ä¸¾ä¾‹ï¼šæ­¤æ—¶Activity æ ˆä¸­ä»¥æ­¤æœ‰Aã€Bã€Cä¸‰ä¸ªActivityã€‚æ­¤æ—¶Cå¤„äºŽæ ˆé¡¶ï¼Œå¯åŠ¨æ¨¡å¼ä¸ºSingleTask æ¨¡å¼ã€‚ æƒ…å†µä¸€ï¼šåœ¨C Activityä¸­åŠ å…¥ç‚¹å‡»äº‹ä»¶ï¼Œé¡»è¦è·³è½¬åˆ°è¿˜æœ‰ä¸€ä¸ªåŒç±»åž‹çš„C Activityã€‚ç»“æžœæ˜¯ç›´æŽ¥ç”¨æ ˆé¡¶çš„C Activityã€‚æƒ…å†µäºŒï¼šåœ¨C Activityä¸­åŠ å…¥ç‚¹å‡»äº‹ä»¶ï¼Œé¡»è¦è·³è½¬åˆ°è¿˜æœ‰ä¸€ä¸ªA Activityã€‚ ç»“æžœæ˜¯å°†A Activityä¸Šé¢çš„Bã€Cæ‰€æœ‰é”€æ¯ï¼Œä½¿A Activityæˆä¸ºæ ˆé¡¶ã€‚ 4. SingleInstance å•å®žä¾‹æ¨¡å¼è¯´æ˜Žï¼š SingleInstanceæ¯”è¼ƒç‰¹æ®Šï¼Œæ˜¯å…¨å±€å•ä¾‹æ¨¡å¼ï¼Œæ˜¯ä¸€ç§åŠ å¼ºçš„SingleTaskæ¨¡å¼ã€‚å®ƒé™¤äº†å…·æœ‰å®ƒæ‰€æœ‰ç‰¹æ€§å¤–ï¼Œè¿˜åŠ å¼ºäº†ä¸€ç‚¹ï¼šå…·æœ‰æ­¤æ¨¡å¼çš„Activityä»…ä»…èƒ½å•ç‹¬ä½äºŽä¸€ä¸ªä»»åŠ¡æ ˆä¸­ã€‚ è¿™ä¸ªç»å¸¸ä½¿ç”¨äºŽç³»ç»Ÿä¸­çš„åº”ç”¨ï¼Œæ¯”å¦‚Launchã€é”å±é”®çš„åº”ç”¨ç­‰ç­‰ï¼Œæ•´ä¸ªç³»ç»Ÿä¸­ä»…ä»…æœ‰ä¸€ä¸ªï¼æ‰€ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ä¸€èˆ¬ä¸ä¼šç”¨åˆ°ã€‚äº†è§£å°±å¯ä»¥ã€‚ ä¸¾ä¾‹ï¼šæ¯”æ–¹ A Activityæ˜¯è¯¥æ¨¡å¼ï¼Œå¯åŠ¨AåŽã€‚ç³»ç»Ÿä¼šä¸ºå®ƒåˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ä»»åŠ¡æ ˆï¼Œç”±äºŽæ ˆå†…å¤ç”¨çš„ç‰¹æ€§ã€‚å…´è®¸çš„è¯·æ±‚å‡ä¸ä¼šåˆ›å»ºæ–°çš„Activityï¼Œé™¤éžè¿™ä¸ªç‹¬ç‰¹çš„ä»»åŠ¡æ ˆè¢«ç³»ç»Ÿé”€æ¯ã€‚ äºŒ.å¯åŠ¨æ¨¡å¼çš„ä½¿ç”¨æ–¹å¼1. åœ¨ Manifest.xmlä¸­æŒ‡å®šActivityå¯åŠ¨æ¨¡å¼ä¸€ç§é™æ€çš„æŒ‡å®šæ–¹æ³•ï¼Œåœ¨Manifest.xmlæ–‡ä»¶é‡Œå£°æ˜ŽActivityçš„åŒä¸€æ—¶å€™æŒ‡å®šå®ƒçš„å¯åŠ¨æ¨¡å¼ï¼Œè¿™æ ·åœ¨ä»£ç ä¸­è·³è½¬æ—¶ä¼šä¾ç…§æŒ‡å®šçš„æ¨¡å¼æ¥åˆ›å»ºActivityã€‚æ ·ä¾‹ä¾‹å¦‚ä»¥ä¸‹ï¼š 123&lt;activity android:name="..activity.MultiportActivity" android:launchMode="singleTask"/&gt; 2. å¯åŠ¨Activityæ—¶ã€‚åœ¨Intentä¸­æŒ‡å®šå¯åŠ¨æ¨¡å¼åŽ»åˆ›å»ºActivityä¸€ç§åŠ¨æ€çš„å¯åŠ¨æ¨¡å¼ï¼Œåœ¨new ä¸€ä¸ªIntentåŽï¼Œé€šè¿‡Intentçš„addFlagsæ–¹æ³•åŽ»åŠ¨æ€æŒ‡å®šä¸€ä¸ªå¯åŠ¨æ¨¡å¼ã€‚æ ·ä¾‹ä¾‹å¦‚ä»¥ä¸‹ï¼š 1234Intent intent = new Intent();intent.setClass(context, MainActivity.class);intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);context.startActivity(intent); æ³¨æ„ï¼šä»¥ä¸Šä¸¤ç§æ–¹å¼éƒ½èƒ½å¤Ÿä¸ºActivityæŒ‡å®šå¯åŠ¨æ¨¡å¼ï¼Œå¯æ˜¯äºŒè€…è¿˜æ˜¯æœ‰å·®åˆ«çš„ã€‚ ï¼ˆ1ï¼‰ä¼˜å…ˆçº§ï¼šåŠ¨æ€æŒ‡å®šæ–¹å¼å³å¦å¤–ä¸€ç§æ¯”ç¬¬ä¸€ç§ä¼˜å…ˆçº§è¦é«˜ï¼Œè‹¥ä¸¤è€…åŒä¸€æ—¶å€™å­˜åœ¨ï¼Œä»¥å¦å¤–ä¸€ç§æ–¹å¼ä¸ºå‡†ã€‚ï¼ˆ2ï¼‰é™å®šèŒƒå›´ï¼šç¬¬ä¸€ç§æ–¹å¼æ— æ³•ä¸ºActivityç›´æŽ¥æŒ‡å®š FLAG_ACTIVITY_CLEAR_TOP æ ‡è¯†ï¼Œå¦å¤–ä¸€ç§æ–¹å¼æ— æ³•ä¸ºActivityæŒ‡å®š singleInstance æ¨¡å¼ã€‚ ä¸‰. Activity çš„ Flagsæ ‡è®°ä½æ—¢èƒ½å¤Ÿè®¾å®šActivityçš„å¯åŠ¨æ¨¡å¼ï¼Œå¦‚åŒä¸Šé¢ä»‹ç»çš„ï¼Œåœ¨åŠ¨æ€æŒ‡å®šå¯åŠ¨æ¨¡å¼ï¼Œæ¯”æ–¹ FLAG_ACTIVITY_NEW_TASK å’Œ FLAG_ACTIVITY_SINGLE_TOP ç­‰ã€‚å®ƒè¿˜èƒ½å¤Ÿå½±å“Activity çš„è¿è¡ŒçŠ¶æ€ ï¼Œæ¯”æ–¹ FLAG_ACTIVITY_CLEAN_TOP å’Œ FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS ç­‰ã€‚ ä»¥ä¸‹ä»‹ç»å‡ ä¸ªåŸºæœ¬çš„æ ‡è®°ä½ï¼Œåˆ‡å‹¿æ­»è®°ï¼Œç†è§£å‡ ä¸ªå°±å¯ä»¥ï¼Œé¡»è¦æ—¶å†æŸ¥å®˜æ–¹æ–‡æ¡£ã€‚ 1. FLAG_ACTIVITY_NEW_TASKä½œç”¨æ˜¯ä¸ºActivityæŒ‡å®š â€œSingleTaskâ€å¯åŠ¨æ¨¡å¼ã€‚è·Ÿåœ¨AndroidMainfest.xmlæŒ‡å®šæ•ˆæžœåŒæ ·ã€‚ 2. FLAG_ACTIVITY_SINGLE_TOPä½œç”¨æ˜¯ä¸ºActivityæŒ‡å®š â€œSingleTopâ€å¯åŠ¨æ¨¡å¼ï¼Œè·Ÿåœ¨AndroidMainfest.xmlæŒ‡å®šæ•ˆæžœåŒæ ·ã€‚ 3. FLAG_ACTIVITY_CLEAN_TOPå…·æœ‰æ­¤æ ‡è®°ä½çš„Activityï¼Œå¯åŠ¨æ—¶ä¼šå°†ä¸Žè¯¥Activityåœ¨åŒä¸€ä»»åŠ¡æ ˆçš„å…¶ä»–Activityå‡ºæ ˆã€‚ä¸€èˆ¬ä¸ŽSingleTaskå¯åŠ¨æ¨¡å¼ä¸€èµ·å‡ºçŽ°ã€‚å®ƒä¼šå®Œæ¯•SingleTaskçš„ä½œç”¨ã€‚ä½†äº‹å®žä¸ŠSingleTaskå¯åŠ¨æ¨¡å¼é»˜è®¤å…·æœ‰æ­¤æ ‡è®°ä½çš„ä½œç”¨ 4.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTSå…·æœ‰æ­¤æ ‡è®°ä½çš„Activityä¸ä¼šå‡ºå¦‚ä»ŠåŽ†å²Activityçš„åˆ—è¡¨ä¸­ï¼Œä½¿ç”¨åœºæ™¯ï¼šå½“æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬ä¸å¸Œæœ›ç”¨æˆ·é€šè¿‡åŽ†å²åˆ—è¡¨å›žåˆ°Activityæ—¶ï¼Œæ­¤æ ‡è®°ä½ä¾¿ä½“çŽ°äº†å®ƒçš„æ•ˆæžœã€‚å®ƒç­‰åŒäºŽåœ¨xmlä¸­æŒ‡å®šActivityçš„å±žæ€§ï¼š 1android:excludeFromRecents="trure" å››. å¯åŠ¨æ¨¡å¼çš„å®žé™…åº”ç”¨åœºæ™¯è¿™å››ç§æ¨¡å¼ä¸­çš„Standardæ¨¡å¼æ˜¯æœ€æ™®é€šçš„ä¸€ç§ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«æ³¨æ„ã€‚è€ŒSingleInstanceæ¨¡å¼æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å•ä¾‹æ¨¡å¼ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­ä¸€èˆ¬ä¸ä¼šåº”ç”¨åˆ°ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œå°±å…·ä½“è§£è¯´ SingleTop å’Œ SingleTaskæ¨¡å¼çš„è¿ç”¨åœºæ™¯ï¼š 1. SingleTaskæ¨¡å¼çš„è¿ç”¨åœºæ™¯æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯å°±æ˜¯ä¿æŒæˆ‘ä»¬åº”ç”¨å¼€å¯åŽä»…ä»…æœ‰ä¸€ä¸ªActivityçš„å®žä¾‹ã€‚æœ€å…¸åž‹çš„æ ·ä¾‹å°±æ˜¯åº”ç”¨ä¸­å±•ç¤ºçš„ä¸»é¡µï¼ˆHomeé¡µï¼‰ã€‚ å‡è®¾ç”¨æˆ·åœ¨ä¸»é¡µè·³è½¬åˆ°å…¶ä»–é¡µé¢ï¼Œè¿è¡Œå¤šæ¬¡æ“ä½œåŽæƒ³è¿”å›žåˆ°ä¸»é¡µï¼Œå‡è®¾ä¸ä½¿ç”¨SingleTaskæ¨¡å¼ï¼Œåœ¨ç‚¹å‡»è¿”å›žçš„è¿‡ç¨‹ä¸­ä¼šå¤šæ¬¡çœ‹åˆ°ä¸»é¡µï¼Œè¿™æ˜Žæ˜¾å°±æ˜¯è®¾è®¡ä¸åˆç†äº†ã€‚ 2. SingleTopæ¨¡å¼çš„è¿ç”¨åœºæ™¯å‡è®¾ä½ åœ¨å½“å‰çš„Activityä¸­åˆè¦å¯åŠ¨åŒç±»åž‹çš„Activityï¼Œæ­¤æ—¶å»ºè®®å°†æ­¤ç±»åž‹Activityçš„å¯åŠ¨æ¨¡å¼æŒ‡å®šä¸ºSingleTopï¼Œèƒ½å¤Ÿé™ä½ŽActivityçš„åˆ›å»ºï¼ŒèŠ‚çœå†…å­˜ï¼ 3. æ³¨æ„ï¼šå¤ç”¨Activityæ—¶çš„ç”Ÿå‘½å‘¨æœŸå›žè°ƒè¿™é‡Œè¿˜é¡»è¦è€ƒè™‘ä¸€ä¸ªActivityè·³è½¬æ—¶æºå¸¦é¡µé¢åƒæ•°çš„é—®é¢˜ã€‚ ç”±äºŽå½“ä¸€ä¸ªActivityè®¾ç½®äº†SingleTopæˆ–è€…SingleTaskæ¨¡å¼åŽï¼Œè·³è½¬æ­¤Activityå‡ºçŽ°å¤ç”¨åŽŸæœ‰Activityçš„æƒ…å†µæ—¶ï¼Œæ­¤Activityçš„onCreateæ–¹æ³•å°†ä¸ä¼šå†æ¬¡è¿è¡Œã€‚onCreateæ–¹æ³•ä»…ä»…ä¼šåœ¨ç¬¬ä¸€æ¬¡åˆ›å»ºActivityæ—¶è¢«è¿è¡Œã€‚ è€Œä¸€èˆ¬onCreateæ–¹æ³•ä¸­ä¼šè¿›è¡Œè¯¥é¡µé¢çš„æ•°æ®åˆå§‹åŒ–ã€UIåˆå§‹åŒ–ï¼Œå‡è®¾é¡µé¢çš„å±•ç¤ºæ•°æ®æ— å…³é¡µé¢è·³è½¬ä¼ é€’çš„åƒæ•°ï¼Œåˆ™ä¸å¿…æ“å¿ƒæ­¤é—®é¢˜ï¼Œè‹¥é¡µé¢å±•ç¤ºçš„æ•°æ®å°±æ˜¯é€šè¿‡getInten() æ–¹æ³•æ¥èŽ·å–ï¼Œé‚£ä¹ˆé—®é¢˜å°±ä¼šå‡ºçŽ°ï¼šgetInten()èŽ·å–çš„ä¸€ç›´éƒ½æ˜¯è€æ•°æ®ï¼Œæ ¹æœ¬æ— æ³•æŽ¥æ”¶è·³è½¬æ—¶ä¼ é€çš„æ–°æ•°æ®ï¼ ä»¥ä¸‹ï¼Œé€šè¿‡ä¸€ä¸ªæ ·ä¾‹æ¥å…·ä½“è§£é‡Šï¼š 1234&lt;activity android:name=".activity.CourseDetailActivity" android:launchMode="singleTop" android:screenOrientation="portrait" /&gt; 12345678910111213141516171819202122public class CourseDetailActivity extends BaseActivity&#123; ...... @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_course_detail_layout); initData(); initView(); &#125; //åˆå§‹åŒ–æ•°æ® private void initData() &#123; Intent intent = getIntent(); mCourseID = intent.getStringExtra(COURSE_ID); &#125; //åˆå§‹åŒ–UI private void initView() &#123; ...... &#125; ......&#125; ä»¥ä¸Šä»£ç ä¸­çš„CourseDetailActivityåœ¨é…ç½®æ–‡ä»¶é‡Œè®¾ç½®äº†å¯åŠ¨æ¨¡å¼æ˜¯SingleTopæ¨¡å¼ï¼Œä¾æ®ä¸Šé¢å¯åŠ¨æ¨¡å¼çš„ä»‹ç»å¯å¾—çŸ¥ï¼Œå½“CourseDetailActivityå¤„äºŽæ ˆé¡¶æ—¶ã€‚å†æ¬¡è·³è½¬é¡µé¢åˆ°CourseDetailActivityæ—¶ä¼šç›´æŽ¥å¤ç”¨åŽŸæœ‰çš„Activityï¼Œå¹¶ä¸”æ­¤é¡µé¢é¡»è¦å±•ç¤ºçš„æ•°æ®æ˜¯ä»ŽgetIntent(ï¼‰æ–¹æ³•å¾—æ¥ï¼Œå¯æ˜¯initData()æ–¹æ³•ä¸ä¼šå†æ¬¡è¢«è°ƒç”¨ï¼Œæ­¤æ—¶é¡µé¢å°±æ— æ³•æ˜¾ç¤ºæ–°çš„æ•°æ®ã€‚ å½“ç„¶è¿™æ ·çš„æƒ…å†µç³»ç»Ÿæ—©å°±ä¸ºæˆ‘ä»¬æƒ³è¿‡äº†ï¼Œè¿™æ—¶æˆ‘ä»¬é¡»è¦å¦å¤–ä¸€ä¸ªå›žè°ƒ onNewIntentï¼ˆIntent intentï¼‰æ–¹æ³•ã€‚æ­¤æ–¹æ³•ä¼šä¼ å…¥æœ€æ–°çš„intentï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿè§£å†³ä¸Šè¿°é—®é¢˜ã€‚è¿™é‡Œå»ºè®®çš„æ–¹æ³•æ˜¯åˆä¸€æ¬¡åŽ»setIntentã€‚ç„¶åŽåˆä¸€æ¬¡åŽ»åˆå§‹åŒ–æ•°æ®å’ŒUIã€‚ä»£ç ä¾‹å¦‚ä»¥ä¸‹æ‰€çœ‹åˆ°çš„ï¼š 12345678910/** å¤ç”¨Activityæ—¶çš„ç”Ÿå‘½å‘¨æœŸå›žè°ƒ*/ @Override protected void onNewIntent(Intent intent) &#123; super.onNewIntent(intent); setIntent(intent); initData(); initView(); &#125; è¿™æ ·ï¼Œåœ¨ä¸€ä¸ªé¡µé¢ä¸­èƒ½å¤Ÿåå¤è·³è½¬å¹¶æ˜¾ç¤ºä¸åŒçš„å†…å®¹ã€‚ å¯åŠ¨æ¨¡å¼äº‹å®žä¸Šæ˜¯åˆå­¦Androidæ—¶ä¼šå­¦åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œæ›¾ç»ä¹Ÿæ˜¯ä¸€çŸ¥åŠæ‡‚ï¼Œæœ‰äº›çŸ¥è¯†ç‚¹äº‹å®žä¸Šè·Ÿè®¾è®¡æ¨¡å¼ä¸€æ ·ï¼Œä½ ä¸åŽ»ä½¿ç”¨è€Œä»…ä»…æ˜¯å­¦ä¹ å¹¶ä¸æ˜¯èƒ½å¤ŸæŽŒæ¡åˆ°ç²¾é«“ï¼Œä»…ä»…æœ‰çœŸæ­£åŽ»ä½¿ç”¨æ‰ä¼šå°†è¿™äº›å˜æˆä½ è‡ªå·±çš„ï¼Œæ–‡ç« éƒ¨åˆ†å†…å®¹åƒè€ƒäº†ã€ŠAndroidå¼€å‘è‰ºæœ¯æŽ¢ç´¢ã€‹ã€‚å¥½ä¹¦æŽ¨èã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android IPC è¿›ç¨‹é—´é€šä¿¡]]></title>
    <url>%2Fposts%2Fef58aead.html</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯IPCIPC(Inter-Process Communication) è¿›ç¨‹é—´é€šä¿¡ï¼Œæ˜¯æŒ‡ä¸¤ä¸ªä¸åŒè¿›ç¨‹ä¹‹é—´æ•°æ®äº¤æ¢çš„è¿‡ç¨‹ã€‚ åœ¨æ˜Žç¡®å…¶ä¹‹å‰ï¼Œéœ€è¦å…ˆæžæ‡‚å‡ ä¸ªæ¦‚å¿µ: çº¿ç¨‹ï¼šCPUå¯è°ƒåº¦çš„æœ€å°å•ä½ï¼Œæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒï¼›çº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„ä¸€ä¸ªå®žä½“ï¼Œæ˜¯è¢«ç³»ç»Ÿç‹¬ç«‹è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹è‡ªå·±ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰ä¸€ç‚¹å„¿åœ¨è¿è¡Œä¸­å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†å®ƒå¯ä¸ŽåŒå±žä¸€ä¸ªè¿›ç¨‹çš„å…¶å®ƒçº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æºã€‚ è¿›ç¨‹ï¼š ä¸€ä¸ªæ‰§è¡Œå•å…ƒï¼Œåœ¨PC å’Œç§»åŠ¨è®¾å¤‡ä¸Šä¸€èˆ¬æŒ‡ä¸€ä¸ªç¨‹åºæˆ–è€…åº”ç”¨ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰å®ƒè‡ªå·±çš„åœ°å€ç©ºé—´ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒåŒ…æ‹¬æ–‡æœ¬åŒºåŸŸï¼ˆtext regionï¼‰ã€æ•°æ®åŒºåŸŸï¼ˆdata regionï¼‰å’Œå †æ ˆï¼ˆstack regionï¼‰ã€‚ åœ¨Androidç¨‹åºä¸­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸€ä¸ªç¨‹åºå°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼ˆåœ¨æ— ç‰¹åˆ«çš„ä»£ç å®žçŽ°ä¸‹ï¼‰ï¼ŒUIçº¿ç¨‹å³ä¸»çº¿ç¨‹ã€‚å¦‚æžœæœ‰è€—æ—¶æ“ä½œï¼Œåˆ™ä¼šå¯¼è‡´ä¸»çº¿ç¨‹å µæ­»ã€‚è€Œåœ¨Androidä¸­ä¸»çº¿ç¨‹è´Ÿè´£UIï¼Œå’Œç”¨æˆ·äº¤äº’ï¼Œå¦‚æžœå µå¡žUIçº¿ç¨‹ä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚æ‰€ä»¥Androidè¦æ±‚è¦å°†è€—æ—¶æ“ä½œæ”¾åœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ IPC ä½¿ç”¨åœºæ™¯ ç¨‹åºå› ä¸ºè‡ªèº«åŽŸå› ï¼Œéœ€è¦é‡‡ç”¨å¤šè¿›ç¨‹æ¨¡å¼æ¥å®žçŽ°ã€‚ æœ‰äº›æ¨¡å—ç”±äºŽç‰¹æ®ŠåŽŸå› éœ€è¦è¿è¡Œè¿è¡Œåœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­ã€‚ ä¸ºäº†åŠ å¤§ä¸€ä¸ªåº”ç”¨å¯ä½¿ç”¨çš„å†…å­˜æ‰€ä»¥éœ€è¦é€šè¿‡å¤šè¿›ç¨‹æ¥èŽ·å–å†…å­˜ç©ºé—´ã€‚ å½“å‰åº”ç”¨éœ€è¦å‘å…¶ä»–åº”ç”¨èŽ·å–æ•°æ®ã€‚ç”±äºŽæ˜¯ä¸¤ä¸ªåº”ç”¨ï¼Œå³ä¸¤ä¸ªè¿›ç¨‹ã€‚ åœ¨Android ä¸­ï¼Œæ¯ä¸€ä¸ªåº”ç”¨å¯ä½¿ç”¨çš„å†…å­˜å¤§å°æœ‰é™åˆ¶ï¼Œæ—©èµ·çš„ä¸€äº›ç‰ˆæœ¬åœ¨16Må·¦å³ï¼Œä¸åŒçš„è®¾å¤‡æœ‰ä¸åŒçš„å¤§å°ã€‚å¯ä»¥é€šè¿‡å¤šè¿›ç¨‹èŽ·å–å¤šä»½å†…å­˜ç©ºé—´ã€‚ Androidå¤šè¿›ç¨‹å¦‚ä½•å¼€å¯å¤šè¿›ç¨‹Androidä¸­å¼€å¯å¤šè¿›ç¨‹åªæœ‰ä¸€ç§æ–¹æ³•ï¼Œä¾¿æ˜¯ç»™å››å¤§ç»„ä»¶æŒ‡å®šandroid:processå±žæ€§ï¼Œé™¤æ­¤ä¹‹å¤–æ²¡æœ‰å…¶ä»–æ–¹æ³•ã€‚ è¯·æ³¨æ„ï¼Œä¸èƒ½æŒ‡å®šæŸä¸€ä¸ªçº¿ç¨‹æˆ–è€…å®žä½“ç±»æŒ‡å®šå…¶æ‰€è¿è¡Œçš„è¿›ç¨‹ã€‚ é€šè¿‡jniè°ƒç”¨åº•å±‚åŽ»å¼€å¯å¤šè¿›ç¨‹ä¹Ÿæ˜¯ä¸€ç§æ–¹æ³•ï¼Œä½†å±žäºŽç‰¹æ®Šæƒ…å†µï¼Œä¸è¿›è¡Œè€ƒè™‘ã€‚ é¦–å…ˆç¼–å†™ä¸‰ä¸ªActivityï¼Œå¹¶åœ¨AndroidManifest.xmlä¸­æ³¨å†Œï¼š 12345678910111213141516&lt;activity android:name=".MainActivity" android:label="@string/app_name" &gt; &lt;intent-filter&gt; &lt;action android:name="android.intent.action.MAIN" /&gt; &lt;category android:name="android.intent.category.LAUNCHER" /&gt; &lt;/intent-filter&gt;&lt;/activity&gt;&lt;activity android:name="com.example.ipc.SecondActivity" android:process=":remote" /&gt;&lt;activity android:name="com.example.ipc.ThirdActivity" android:process=".remote" /&gt; å¯¹MainActivityä¸è¿›è¡ŒæŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ºå½“å‰è¿›ç¨‹ã€‚ å¯¹SecondActivityæŒ‡å®šå±žæ€§android:process=â€:remoteâ€ã€‚ å¯¹ThirdActivityæŒ‡å®šå±žæ€§android:process=â€.remoteâ€ã€‚ æ³¨æ„SencodActivityå’ŒThirdActivityçš„è¿›ç¨‹å‚æ•°ä¸åŒã€‚ æŠŠä¸‰ä¸ªé¡µé¢éƒ½æ‰“å¼€ï¼Œé€šè¿‡DDMSå¯ä»¥çœ‹åˆ°ä¸‰ä¸ªè¿›ç¨‹çš„å¼€å¯ï¼š é‚£ä¹ˆSecondActivityå’ŒThirdActivity ï¼Œè¿›ç¨‹åä¸åŒæœ‰ä»€ä¹ˆåŒºåˆ«å—ï¼› å¦‚æžœè¿›ç¨‹åä»¥ï¼šå¼€å§‹ï¼Œè¡¨ç¤ºæ˜¯è¦åœ¨å½“å‰çš„è¿›ç¨‹åå‰é™„åŠ ä¸Šå½“å‰çš„åŒ…åï¼Œè¡¨ç¤ºè¯¥è¿›ç¨‹æ˜¯æœ¬åº”ç”¨çš„ç§æœ‰è¿›ç¨‹ï¼Œå…¶ä»–åº”ç”¨ä¸å¯ä»¥å’Œå…¶è·‘åœ¨åŒä¸€ä¸ªè¿›ç¨‹ã€‚å¦‚æžœè¿›ç¨‹åä¸ä»¥:å¼€å§‹ï¼Œè¡¨ç¤ºä¸éœ€é™„åŠ åŒ…åä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªå®Œå…¨çš„å‘½åã€‚åŒæ—¶è¯¥è¿›ç¨‹æ˜¯å…¨å±€è¿›ç¨‹ï¼Œå…¶ä»–åº”ç”¨å¯ä»¥é€šè¿‡ShareUIDå’Œå…¶è·‘åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ã€‚ å¼€å¯å¤šè¿›ç¨‹å­˜åœ¨çš„é—®é¢˜é€šè¿‡å¦‚ä¸Šæ–¹å¼ï¼Œå¾ˆç®€å•çš„å˜å¼€å¯äº†å¤šè¿›ç¨‹ï¼Œä½†æ˜¯ï¼Œå¦‚æžœä»…ä»…è¿™æ ·çš„è¯ï¼Œä¼šæœ‰å¤§é—®é¢˜ã€‚ çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­ã€‚ æ·»åŠ ä¸€ä¸ªå…¬æœ‰çš„ç±»ï¼Œæ·»åŠ é™æ€å­—æ®µï¼š 12345public class PublicContant &#123; public static int m = 1;&#125; åœ¨MainActivityä¸­Logä¸€ä¸‹å¹¶ä¿®æ”¹å­—æ®µï¼š 12345678910@Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); Log.i("info", PublicContant.m+""); PublicContant.m++; &#125; åœ¨SecondActivityä¸­æ‰“å°logï¼š 1234567@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_second); Log.i("info", PublicContant.m+""); &#125; æ ¹æ®ä¸Šé¢çš„é€»è¾‘ï¼ŒLogä¿¡æ¯åº”è¯¥æ˜¯1ï¼Œå’Œ2 ã€‚ä½†æ˜¯å‘¢ï¼Œä¸æ˜¯è¿™æ ·çš„ã€‚ åŽŸå› åˆ†æžï¼š Android ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿæœºï¼Œä¸åŒçš„è™šæ‹Ÿæœºåœ¨å†…å­˜åˆ†é…ä¸Šæœ‰ä¸åŒçš„åœ°å€ç©ºé—´ï¼Œè¿™å°±å¯¼è‡´åœ¨ä¸åŒè™šæ‹Ÿæœºä¸­è®¿é—®åŒä¸€ä¸ªç±»å¯¹è±¡ä¼šäº§ç”Ÿå¤šä¸ªå‰¯æœ¬ã€‚ å¯¹äºŽå½“å‰æ¥è¯´ï¼Œè¿›ç¨‹com.example.ipcå’Œcom.example.ipc:remoteéƒ½å­˜åœ¨ä¸€ä¸ªPublicContantç±»ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªç±»æ˜¯ç›¸äº’ä¸å¹²æ‰°çš„ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­ä¿®æ”¹äº†è¯¥å€¼çš„å¯¹è±¡ï¼Œå¯¹å…¶ä»–è¿›ç¨‹ä¸­çš„è¯¥å€¼ä¸ä¼šé€ æˆä»»ä½•å½±å“ã€‚ è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„ç»„ä»¶æ˜¯å±žäºŽåŒä¸€ä¸ªè™šæ‹Ÿæœºå’ŒåŒä¸€ä¸ªApplicationçš„ã€‚åŒç†ï¼Œè¿è¡Œåœ¨ä¸åŒè¿›ç¨‹ä¸­çš„ç»„ä»¶æ˜¯å±žäºŽä¸¤ä¸ªä¸åŒçš„è™šæ‹Ÿæœºå’ŒApplicationçš„ã€‚ æ ¹æ®å¦‚ä¸Šæ‰€è¿°ï¼Œå¤šè¿›ç¨‹æ‰€é€ æˆçš„é—®é¢˜åˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š é™æ€æˆå‘˜å’Œå•ä¾‹æ¨¡å¼å®Œå…¨å¤±æ•ˆï¼›å¦‚ä¸Šåˆ†æžï¼Œåˆ›å»ºäº†ä¸åŒçš„å†…å­˜ï¼Œå¤šä¸ªå¯¹è±¡ï¼Œå½“ç„¶å•ä¾‹ä»€ä¹ˆçš„éƒ½æ— æ•ˆäº†ã€‚ çº¿ç¨‹åŒæ­¥æœºåˆ¶å®Œå…¨å¤±æ•ˆ ï¼›ä¸æ˜¯ä¸€å—å†…å­˜åŒºåŸŸï¼Œçº¿ç¨‹é”å½“ç„¶æ— æ•ˆäº†ã€‚ SharedPreferenceçš„å¯é æ€§ä¸‹é™ ï¼›sharedPreferenceçš„åº•å±‚å®žçŽ°æ˜¯é€šè¿‡è¯»å†™XMLæ–‡ä»¶ï¼Œä¸¤ä¸ªè¿›ç¨‹åŽ»è¯»å†™ï¼Œå¹¶å‘æ˜¾ç„¶æ˜¯å¯èƒ½å‡ºçŽ°é—®é¢˜çš„ã€‚ Applicationä¼šå¤šæ¬¡åˆ›å»ºã€‚ åºåˆ—åŒ–å’Œååºåˆ—åŒ–åœ¨äº†è§£å¤šè¿›ç¨‹é€šä¿¡ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ä¸¤ä¸ªåŸºç¡€çš„æ¦‚å¿µï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚ åºåˆ—åŒ–ï¼šå°†å¯¹è±¡è½¬åŒ–ä¸ºå¯ä¿å­˜çš„å­—èŠ‚åºåˆ—ï¼ˆæ³¨æ„æ˜¯å¯¹è±¡ï¼‰ï¼› ååºåˆ—ï¼šå°†å­—èŠ‚åºåˆ—æ¢å¤ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ã€‚ åºåˆ—åŒ–å’Œååºåˆ—çš„ç”¨é€”ï¼š ä»¥æŸç§å­˜å‚¨å½¢å¼ä½¿è‡ªå®šä¹‰å¯¹è±¡åºåˆ—åŒ–ï¼› å°†å¯¹è±¡ä»Žä¸€ä¸ªåœ°æ–¹ä¼ é€’åˆ°å¦ä¸€ä¸ªåœ°æ–¹ï¼› é€šè¿‡åºåˆ—åŒ–åœ¨è¿›ç¨‹é—´ä¼ é€’å¯¹è±¡ã€‚ åœ¨Androidä¸­å®žçŽ°åºåˆ—åŒ–çš„æ–¹å¼æœ‰ä¸¤ç§ï¼ŒSerializableå’ŒParcelableã€‚ SerializableSerializableæ˜¯Javaæä¾›çš„ä¸€ä¸ªåºåˆ—åŒ–æŽ¥å£ï¼Œä»–æ˜¯ä¸€ä¸ªç©ºæŽ¥å£ï¼Œæ˜¯ç±»å®žçŽ°è¯¥æŽ¥å£å³å¯å®žçŽ°åºåˆ—åŒ–ã€‚ 123456789101112131415/** * Serializable åºåˆ—åŒ–å¯¹è±¡ */public class Book implements Serializable &#123; /** * åºåˆ—åŒ–å’Œååºåˆ—çš„å…³é”® */ private static final long serialVersionUID = 1L; public int bookId; public String bookName;&#125; åœ¨å®žçŽ°Serializableæ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæç¤ºï¼Œè®©æˆ‘ä»¬æ·»åŠ serialVersionUIDå­—æ®µï¼Œè¯¥å­—æ®µæ˜¯ä¸€ä¸ªå…³é”®çš„å­—æ®µï¼ŒåŽé¢ä¼šè¯´ã€‚ ç›¸åº”çš„å®žçŽ°å¥½äº†ï¼Œé‚£ä¹ˆå¦‚ä½•å†™å…¥å’Œè¯»å–å‘¢ï¼Ÿ å†™å…¥ï¼š 1234567891011121314public void writeSerializable() &#123; try &#123; // æž„é€ å¯¹è±¡ Book book = new Book(); // æž„é€ åºåˆ—åŒ–è¾“å‡ºå­—èŠ‚æµ ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("xxx.txt")); // åºåˆ—åŒ–å¯¹è±¡ oos.writeObject(book); // å…³é—­æµ oos.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; è¯»å–ï¼š 12345678910111213public void readSerializable() &#123; try &#123; // åˆ›å»ºåºåˆ—åŒ–è¯»å–å­—èŠ‚æµ ObjectInputStream ois = new ObjectInputStream(new FileInputStream( "xxx.txt")); // ååºåˆ—åŒ–ï¼ˆè¯»å–ï¼‰å¯¹è±¡ Book book = (Book) ois.readObject(); // å…³é—­æµ ois.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; åœ¨åºåˆ—åŒ–æ—¶ï¼Œå¦‚æžœæˆ‘ä»¬åºåˆ—åŒ–å¯¹è±¡ä¹‹åŽï¼Œæ”¹å˜äº†æˆ‘ä»¬çš„ç±»ç»“æž„ï¼ˆæ·»åŠ æˆ–æ”¹å˜å­—æ®µï¼‰ï¼Œç”šè‡³æ˜¯ä¿®æ”¹äº†å­—æ®µçš„ç±»åž‹ï¼Œä¿®æ”¹äº†ç±»åï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½ååºåˆ—åŒ–æˆåŠŸå—ã€‚ é‚£ä¹ˆå…³é”®å°±åœ¨äºŽserialVersionUIDå­—æ®µã€‚ å¦‚æžœæˆ‘ä»¬ä¸æŒ‡å®šçš„è¯ã€‚åœ¨åºåˆ—åŒ–æ—¶ï¼Œä¼šè®¡ç®—å½“å‰ç±»ç»“æž„çš„hashå€¼å¹¶å°†è¯¥å€¼èµ‹ç»™serialVersionUIDï¼Œå½“ååºåˆ—æ—¶ï¼Œä¼šæ¯”å¯¹è¯¥å€¼æ˜¯å¦ç›¸åŒï¼Œå¦‚æžœä¸ç›¸åŒï¼Œåˆ™æ— æ³•åºåˆ—åŒ–æˆåŠŸã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šï¼Œæ‰‹åŠ¨æŒ‡å®šçš„å¥½å¤„æ˜¯åœ¨ç±»ç»“æž„å‘ç”Ÿå˜åŒ–æ—¶ï¼Œèƒ½å¤Ÿæœ€å¤§ç¨‹åº¦çš„ååºåˆ—ï¼Œå½“ç„¶å‰ææ˜¯åªæ˜¯åˆ é™¤æˆ–æ·»åŠ äº†å­—æ®µï¼Œå¦‚æžœæ˜¯å˜é‡ç±»åž‹å‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™ä¾ç„¶æ— æ³•ååºåˆ—æˆåŠŸã€‚ serialVersionUID çš„å·¥ä½œæœºåˆ¶ï¼šåºåˆ—åŒ–æ—¶ç³»ç»Ÿä¼šæŠŠå½“å‰ç±»çš„serialVersionUIDå†™å…¥åºåˆ—åŒ–æ–‡ä»¶ä¸­ï¼Œå½“ååºåˆ—åŒ–æ—¶å€™ç³»ç»Ÿä¼šåŽ»æ£€æµ‹æ–‡ä»¶ä¸­çš„serialVersionUID,çœ‹å®ƒæ˜¯å¦å’Œå½“å‰ç±»çš„serialVersionUIDä¸€è‡´ï¼Œå¦‚æžœä¸€è‡´è¯´æ˜Žåºåˆ—åŒ–ç±»çš„ç‰ˆæœ¬å’Œå½“å‰ç±»çš„ç‰ˆæœ¬æ˜¯ç›¸åŒçš„ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥æˆåŠŸååºåˆ—åŒ–ï¼Œå¦åˆ™å°±è¯´æ˜Žå½“å‰ç±»å’Œåºåˆ—åŒ–çš„ç±»ç›¸æ¯”å‘ç”Ÿäº†æŸäº›å˜åŒ–ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬æœ€å¥½æŒ‡å®šserialVersionUIDï¼Œé¿å…ä»–è‡ªå®šç”Ÿæˆã€‚ ParcelableParcelableæ˜¯Androidä¸­ç‰¹æœ‰çš„ä¸€ç§åºåˆ—åŒ–æ–¹å¼ï¼Œåœ¨intentä¼ å€¼æ—¶ï¼Œé€šå¸¸ä½¿ç”¨è¯¥æ–¹å¼ã€‚ è¯¥æ–¹å¼å®žçŽ°åºåˆ—åŒ–ï¼Œä¾ç„¶å®žçŽ°Parcelableï¼Œç„¶åŽå®žçŽ°ä¸€äº›è¯¥æŽ¥å£çš„æ–¹æ³•ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041public class Book implements Parcelable &#123; public int bookId; public String bookName; @Override public int describeContents() &#123; // è¿”å›žå½“å‰å¯¹è±¡çš„å†…å®¹æè¿°ã€‚å‡ ä¹Žæ‰€æœ‰æƒ…å†µä¸‹éƒ½æ˜¯è¿”å›ž0 return 0; &#125; @Override public void writeToParcel(Parcel dest, int flags) &#123; // å°†å½“å‰å¯¹è±¡å†™å…¥åˆ°åºåˆ—åŒ–ç»“æž„ä¸­ dest.writeInt(bookId); dest.writeString(bookName); &#125; public static final Parcelable.Creator&lt;Book&gt; CREATOR = new Parcelable.Creator&lt;Book&gt;() &#123; @Override public Book createFromParcel(Parcel source) &#123; //ä»Žåºåˆ—åŒ–åŽçš„å¯¹è±¡ä¸­åˆ›å»ºåŽŸå§‹çš„å€¼ Book book = new Book(); book.bookId = source.readInt(); book.bookName = source.readString(); return book; &#125; @Override public Book[] newArray(int size) &#123; //åˆ›å»ºæŒ‡å®šé•¿åº¦çš„åŽŸå§‹å¯¹è±¡æ•°ç»„ return new Book[size]; &#125; &#125;;&#125; Parcelableå®žçŽ°ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ›å»ºä¸€ä¸ªå­—æ®µï¼š å®žçŽ°describeContents()ï¼šè¿”å›žå½“å‰å¯¹è±¡çš„å†…å®¹æè¿°ã€‚å‡ ä¹Žæ‰€æœ‰æƒ…å†µä¸‹éƒ½æ˜¯è¿”å›ž0ã€‚ å®žçŽ°public void writeToParcel(Parcel dest, int flags)ï¼š// å°†å½“å‰å¯¹è±¡å†™å…¥åˆ°åºåˆ—åŒ–ç»“æž„ä¸­ æž„é€ Parcelable.Creatorå­—æ®µï¼Œè¯¥å¯¹è±¡éœ€è¦å®žçŽ°ä¸¤ä¸ªæ–¹æ³•ï¼š public Book createFromParcel(Parcel source)ï¼šä»Žåºåˆ—åŒ–åŽçš„å¯¹è±¡ä¸­åˆ›å»ºåŽŸå§‹çš„å€¼ã€‚ public Book[] newArray(int size)ï¼šåˆ›å»ºæŒ‡å®šé•¿åº¦çš„åŽŸå§‹å¯¹è±¡æ•°ç»„ã€‚ Serializableå’ŒParcelableçš„æ¯”è¾ƒ Serializableæ˜¯Javaä¸­çš„åºåˆ—åŒ–æŽ¥å£ï¼Œå…¶ä½¿ç”¨èµ·æ¥ç®€å•ä½†æ˜¯å¼€é”€è¾ƒå¤§ï¼Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–éœ€è¦å¤§é‡çš„I/Oæ“ä½œã€‚ Parcelableæ˜¯Androidä¸­çš„åºåˆ—åŒ–æ–¹å¼ï¼Œæ›´é€‚ç”¨äºŽAndroidçš„å¹³å°ä¸Šï¼Œä»–çš„ç¼ºç‚¹æ˜¯ä½¿ç”¨èµ·æ¥ç¨å¾®éº»çƒ¦ï¼Œä½†æ˜¯æ•ˆçŽ‡å¾ˆé«˜ã€‚ Parcelableé€‚åˆè¿›ç¨‹é—´çš„é€šä¿¡ï¼Œè¿è¡ŒæœŸã€‚Serializableé€‚åˆæ–‡ä»¶å­˜å‚¨å³ç½‘ç»œä¼ è¾“ã€‚ Android è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ä½¿ç”¨Bundle ä¼ è¾“æ•°æ®Androidä¸­çš„å››å¤§ç»„ä»¶ä¸­ï¼Œå…¶ä¸­æœ‰ä¸‰å¤§ç»„ä»¶ï¼ˆActivity,Service,Receiverï¼‰éƒ½æ”¯æŒIntentä¸­ä¼ é€’Bundleæ•°æ®ï¼Œå¦‚æžœçœ‹å…¶æºç ï¼Œä¼šå‘çŽ°å…¶ä¹Ÿæ˜¯å®žçŽ°äº†ParcelableæŽ¥å£ï¼Œæ‰€ä»¥å…¶èƒ½å¤Ÿåœ¨ä¸åŒè¿›ç¨‹ä¸­ä¼ è¾“ã€‚ å½“ç„¶åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œå…¶æ‰€ä¼ è¾“çš„æ•°æ®å¿…é¡»æ”¯æŒåºåˆ—åŒ–ã€‚æ¯”å¦‚åŸºæœ¬æ•°æ®ç±»åž‹ï¼Œå­—ç¬¦ä¸²ï¼ŒParcelableçš„å®žçŽ°ç±»ï¼ŒSerializableçš„å®žçŽ°ç±»ã€‚ç”±äºŽè¯¥æ–¹æ³•éžå¸¸å¸¸ç”¨ï¼Œä¸åœ¨å¤šè¯´ã€‚ æ–‡ä»¶å…±äº«æ–‡ä»¶å…±äº«ï¼š å°†å¯¹è±¡åºåˆ—åŒ–ä¹‹åŽä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œåœ¨é€šè¿‡ååºåˆ—ï¼Œå°†å¯¹è±¡ä»Žæ–‡ä»¶ä¸­è¯»å–ã€‚ åœ¨MainActvityä¸­å†™å†™å…¥å¯¹è±¡ 1234567891011121314151617181920212223/** * å†™å…¥åºåˆ—åŒ–å¯¹è±¡ */ public void wirte() &#123; Book book = new Book(); book.bookId = 1; book.bookName = "si"; try &#123; // æž„é€ åºåˆ—åŒ–è¾“å‡ºå­—èŠ‚æµ ObjectOutputStream oos = new ObjectOutputStream( new FileOutputStream(PATH)); // åºåˆ—åŒ–å¯¹è±¡ oos.writeObject(book); // å…³é—­æµ oos.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; System.out.println(book); &#125; åœ¨SecondActivityä¸­ï¼Œè¯»å–æ–‡ä»¶ï¼ˆååºåˆ—åŒ–ï¼‰ 12345678910111213141516public void read() &#123; Book book = null; try &#123; // åˆ›å»ºåºåˆ—åŒ–è¯»å–å­—èŠ‚æµ ObjectInputStream ois = new ObjectInputStream(new FileInputStream( MainActivity.PATH)); // ååºåˆ—åŒ–ï¼ˆè¯»å–ï¼‰å¯¹è±¡ book = (Book) ois.readObject(); // å…³é—­æµ ois.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; System.out.println(book); &#125; è¾“å‡ºç»“æžœå¦‚ä¸‹ï¼š 1206-28 09:20:47.916: com.example.ipc(è¿›ç¨‹å) I/System.out(12399): Book [bookId=1, bookName=si]06-28 09:20:53.376: com.example.ipc:remoteï¼ˆè¿›ç¨‹åï¼‰ I/System.out(12866): Book [bookId=1, bookName=si] åˆ†å±žä¸åŒçš„è¿›ç¨‹æˆåŠŸçš„èŽ·å–åˆ°äº†å…±äº«çš„æ•°æ®ã€‚ é€šè¿‡å…±äº«æ–‡ä»¶è¿™ç§æ–¹å¼æ¥å…±äº«æ•°æ®å¯¹æ–‡ä»¶çš„æ ¼å¼æ˜¯æ²¡æœ‰å…·ä½“çš„è¦æ±‚çš„ã€‚æ¯”å¦‚å¯ä»¥æ˜¯æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯Xmlã€JSON ç­‰ã€‚åªè¦è¯»å†™åŒæ–¹çº¦å®šä¸€å®šçš„æ ¼å¼å³å¯ã€‚ åŒæ–‡ä»¶å…±äº«æ–¹å¼ä¹Ÿå­˜åœ¨ç€å¾ˆå¤§çš„å±€é™æ€§ã€‚å³å¹¶å‘è¯»/ å†™çš„é—®é¢˜ã€‚è¯»/å†™ä¼šé€ æˆæ•°æ®ä¸æ˜¯æœ€æ–°ã€‚è¯»å†™å¾ˆæ˜Žæ˜¾ä¼šå‡ºçŽ°é”™è¯¯ã€‚ æ–‡ä»¶å…±äº«é€‚åˆåœ¨å¯¹æ•°æ®åŒæ­¥è¦æ±‚ä¸é«˜çš„è¿›ç¨‹ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚å¹¶ä¸”è¦å¦¥å–„å¤„ç†å¹¶å‘è¯»å†™çš„é—®é¢˜ã€‚ SharedPreference åº•å±‚æ–‡ä»¶çš„æ–¹å¼ã€‚ä¸é€‚åˆåœ¨å¤šè¿›ç¨‹ä¸­å…±äº«æ•°æ®ã€‚ MessengerMessenger å¯ä»¥ç¿»è¯‘ä¸ºä¿¡ä½¿ï¼Œé€šè¿‡è¯¥å¯¹è±¡ï¼Œå¯ä»¥åœ¨ä¸åŒçš„è¿›ç¨‹ä¸­ä¼ é€’Messageå¯¹è±¡ã€‚æ³¨æ„ï¼Œä¸¤ä¸ªå•è¯ä¸åŒã€‚ ä¸‹é¢å°±é€šè¿‡æœåŠ¡ç«¯ï¼ˆServiceï¼‰å’Œå®¢æˆ·ç«¯(Activity)çš„æ–¹å¼è¿›è¡Œæ¼”ç¤ºã€‚ å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯ï¼Œå¯åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ã€‚ æœåŠ¡ç«¯ åˆ›å»ºService æž„é€ Handlerå¯¹è±¡ï¼Œå®žçŽ°handlerMessageæ–¹æ³•ã€‚ é€šè¿‡Handlerå¯¹è±¡æž„é€ Messengerä¿¡ä½¿å¯¹è±¡ã€‚ é€šè¿‡Serviceçš„onBind()è¿”å›žä¿¡ä½¿ä¸­çš„Binderå¯¹è±¡ã€‚ å®¢æˆ·ç«¯ åˆ›å»ºActvity ç»‘å®šæœåŠ¡ åˆ›å»ºServiceConnection,ç›‘å¬ç»‘å®šæœåŠ¡çš„å›žè°ƒã€‚ é€šè¿‡onServiceConnected()æ–¹æ³•çš„å‚æ•°ï¼Œæž„é€ å®¢æˆ·ç«¯Messengerå¯¹è±¡ é€šè¿‡Messengerå‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯ã€‚ å®žçŽ°æœåŠ¡ç«¯ 1234567891011121314151617181920212223242526public class MessengerService extends Service &#123; /** * æž„å»ºhandler å¯¹è±¡ */ public static Handler handler = new Handler()&#123; public void handleMessage(android.os.Message msg) &#123; // æŽ¥å—å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯ String msgClient = msg.getData().getString("msg"); Log.i("messenger","æŽ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æ¶ˆæ¯--"+msgClient); &#125;; &#125;; // é€šè¿‡handler æž„å»ºMesenger å¯¹è±¡ private final Messenger messenger = new Messenger(handler); @Override public IBinder onBind(Intent intent) &#123; // è¿”å›žbinder å¯¹è±¡ return messenger.getBinder(); &#125;&#125; æ³¨æ„ï¼šMessengerServiceéœ€è¦åœ¨AndroidManifest.xmlä¸­æ³¨å†Œã€‚ å®žçŽ°å®¢æˆ·ç«¯ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859public class MessengerActivity extends AppCompatActivity &#123; /** * Messenger å¯¹è±¡ */ private Messenger mService; private ServiceConnection conn = new ServiceConnection() &#123; @Override public void onServiceConnected(ComponentName name, IBinder service) &#123; // IBinder å¯¹è±¡ // é€šè¿‡æœåŠ¡ç«¯è¿”å›žçš„Binder å¯¹è±¡ æž„é€ Messenger mService = new Messenger(service); Log.i("messenger", "å®¢æˆ·ç«¯ä»¥èŽ·å–æœåŠ¡ç«¯Messengerå¯¹è±¡"); &#125; @Override public void onServiceDisconnected(ComponentName name) &#123; &#125; &#125;; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_messenger); // å¯åŠ¨æœåŠ¡ Intent intent = new Intent(this, MessengerService.class); bindService(intent, conn, BIND_AUTO_CREATE); &#125; /** * å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ äº†ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»è¯¥æŒ‰é’®çš„å¤„ç†æ–¹æ³• * @param view */ public void send(View view) &#123; try &#123; // å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯ Message message = Message.obtain(); Bundle data = new Bundle(); data.putString("msg", "lalala"); message.setData(data); // å‘é€æ¶ˆæ¯ mService.send(message); Log.i("messenger","å‘æœåŠ¡ç«¯å‘é€äº†æ¶ˆæ¯"); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; è¾“å‡ºç»“æžœå¦‚ä¸‹ï¼š æ³¨é‡Šå¾ˆæ¸…æ¥šï¼Œä¸åœ¨å¤šè¯´ï¼ŒæŒ‰ç…§æµç¨‹å®žçŽ°å³å¯ã€‚ å…¶ä¸­æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼š æˆ‘ä»¬æ˜¯é€šè¿‡Messageä½œä¸ºåª’ä»‹åŽ»æºå¸¦æ•°æ®çš„ã€‚ä½†æ˜¯ï¼ŒMessageçš„obj å¹¶æ²¡æœ‰å®žçŽ°åºåˆ—åŒ–ï¼ˆå®žçŽ°Serializableæˆ–Parcelableï¼‰,ä¹Ÿå°±æ˜¯å…¶ä¸èƒ½ä¿å­˜æ•°æ®ã€‚å¿…é¡»ä½¿ç”¨message.setData()æ–¹æ³•åŽ»ä¼ å…¥ä¸€ä¸ªBundleå¯¹è±¡ï¼ŒBundleä¸­ä¿å­˜éœ€è¦ä¼ å…¥çš„æ•°æ®ã€‚ ä¼ é€’æ—¶ä½¿ç”¨çš„æ˜¯Messenger.send(Message)æ–¹æ³•ã€‚ æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€äº†æ¶ˆæ¯ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ä¹Ÿç±»ä¼¼ï¼š å…³é”®ç‚¹ï¼š å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯æ˜¯ï¼Œé€šè¿‡msg.replyToå°†å®¢æˆ·ç«¯Messengerå¯¹è±¡ä¼ ç»™æœåŠ¡ç«¯ã€‚ å®¢æˆ·ç«¯ä»£ç è¿›è¡Œä¿®æ”¹ï¼š åˆ›å»ºå®¢æˆ·ç«¯Handlerå’ŒMessengerå¯¹è±¡ã€‚ ä¿®æ”¹send()æ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * æž„å»ºhandler å¯¹è±¡ */ public static Handler handler = new Handler()&#123; public void handleMessage(android.os.Message msg) &#123; // æŽ¥å—æœåŠ¡ç«¯å‘é€çš„æ¶ˆæ¯ String msgService = msg.getData().getString("msg"); Log.i("messenger","æŽ¥æ”¶åˆ°æœåŠ¡ç«¯çš„æ¶ˆæ¯--"+msgService); &#125;; &#125;; // é€šè¿‡handler æž„å»ºMesenger å¯¹è±¡ private final Messenger messengerClient = new Messenger(handler); /** * å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ äº†ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»è¯¥æŒ‰é’®çš„å¤„ç†æ–¹æ³• * @param view */ public void send(View view) &#123; try &#123; // å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯ Message message = Message.obtain(); Bundle data = new Bundle(); data.putString("msg", "lalala"); message.setData(data); // ----- ä¼ å…¥Messenger å¯¹è±¡ message.replyTo = messengerClient; // å‘é€æ¶ˆæ¯ mService.send(message); Log.i("messenger","å‘æœåŠ¡ç«¯å‘é€äº†æ¶ˆæ¯"); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; æœåŠ¡ç«¯ä»£ç ä¿®æ”¹ï¼š 123456789101112131415161718192021222324252627282930313233/** * æž„å»ºhandler å¯¹è±¡ */ public static Handler handler = new Handler() &#123; public void handleMessage(android.os.Message msg) &#123; // æŽ¥å—å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯ String msgClient = msg.getData().getString("msg"); Log.i("messenger", "æŽ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„æ¶ˆæ¯--" + msgClient); // èŽ·å–å®¢æˆ·ç«¯Messenger å¯¹è±¡ Messenger messengetClient = msg.replyTo; // å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ Message message = Message.obtain(); Bundle data = new Bundle(); data.putString("msg", "ccccc"); message.setData(data); try &#123; // å‘é€æ¶ˆæ¯ messengetClient.send(message); &#125; catch (RemoteException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125;; &#125;; ç»“æžœä¸å†æ¼”ç¤ºäº†ã€‚ AIDLAIDLæ˜¯ä¸€ç§æŽ¥å£å®šä¹‰è¯­è¨€ï¼Œç”¨äºŽçº¦æŸä¸¤ä¸ªè¿›ç¨‹é—´çš„é€šè®¯è§„åˆ™ï¼Œä¾›ç¼–è¯‘å™¨ç”Ÿæˆä»£ç ï¼Œå®žçŽ°Androidè®¾å¤‡ä¸Šçš„ä¸¤ä¸ªè¿›ç¨‹é—´é€šä¿¡(IPC)ã€‚ è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ä¿¡æ¯ï¼Œé¦–å…ˆä¼šè¢«è½¬æ¢æˆAIDLåè®®æ¶ˆæ¯ï¼Œç„¶åŽå‘é€ç»™å¯¹æ–¹ï¼Œå¯¹æ–¹æ”¶åˆ°AIDLåè®®æ¶ˆæ¯åŽå†è½¬æ¢æˆç›¸åº”çš„å¯¹è±¡ã€‚ AIDLçš„å…³é”®ä¾¿æ˜¯Binder,å…³äºŽBinderï¼ŒåŽé¢çš„åšå®¢ä¼šåˆ†æžã€‚åœ¨è¿™é‡Œä¹‹å°†å¦‚ä½•ä½¿ç”¨å®ƒã€‚ å› ä¸ºéœ€è¦æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å…±ç”¨aidlæ–‡ä»¶ï¼Œæ‰€ä»¥æœ€å¥½å•ç‹¬å»ºä¸€ä¸ªåŒ…ï¼Œé€‚åˆæ‹·è´åˆ°å®¢æˆ·ç«¯ã€‚ æœåŠ¡ç«¯ï¼š æ·»åŠ å¦‚ä¸‹åŒ…åï¼šcom.example.ipc.aidl åˆ›å»ºBookAidl.java,è¯¥å¯¹è±¡éœ€è¦ä½œä¸ºä¼ è¾“ã€‚æ‰€ä»¥éœ€è¦å®žçŽ°Parcelableã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public class BookAidl implements Parcelable &#123; public int bookId; public String bookName; public BookAidl() &#123; super(); &#125; public BookAidl(int bookId, String bookName) &#123; super(); this.bookId = bookId; this.bookName = bookName; &#125; @Override public int describeContents() &#123; return 0; &#125; @Override public void writeToParcel(Parcel dest, int flags) &#123; dest.writeInt(bookId); dest.writeString(bookName); &#125; public static final Parcelable.Creator&lt;BookAidl&gt; CREATOR = new Creator&lt;BookAidl&gt;() &#123; @Override public BookAidl[] newArray(int size) &#123; return new BookAidl[size]; &#125; @Override public BookAidl createFromParcel(Parcel source) &#123; BookAidl book = new BookAidl(); book.bookId = source.readInt(); book.bookName = source.readString(); return book; &#125; &#125;; @Override public String toString() &#123; return "BookAidl [bookId=" + bookId + ", bookName=" + bookName + "]"; &#125;&#125; åˆ›å»º.aidlæ–‡ä»¶ã€‚å› ä¸ºéœ€è¦ç”¨åˆ°BookAidlå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦å…ˆå£°æ˜Žã€‚ åˆ›å»ºBookAidl.aidlæ–‡ä»¶ï¼Œå¹¶æ‰‹åŠ¨æ·»åŠ ã€‚ 123package com.example.ipc.aidl;Parcelable BookAidl; åˆ›å»ºIBookManager.aidlæ–‡ä»¶ï¼ŒæŽ¥å£æ–‡ä»¶ï¼Œé¢å‘å®¢æˆ·ç«¯è°ƒç”¨ï¼š 12345678package com.example.ipc.aidl;import com.example.ipc.aidl.BookAidl;interface IBookManager&#123; List&lt;BookAidl&gt; getBookList(); void addBook(in BookAidl book);&#125; å†™å®Œä¹‹åŽcleanä¸€ä¸‹å·¥ç¨‹ï¼Œä¹‹åŽä¼šåœ¨genç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„javaæ–‡ä»¶ã€‚æ­¤javaä¸­çš„å…·ä½“å«ä¹‰åŽé¢ä¼šè§£é‡Šï¼Œåœ¨æ­¤ä¸åšå¤šè¿°ã€‚ ç»§ç»­ç¼–å†™æœåŠ¡ç«¯ï¼Œåˆ›å»ºServiceç±»ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940public class BookService extends Service &#123; /** * æ”¯æŒçº¿ç¨‹åŒæ­¥ï¼Œå› ä¸ºå…¶å­˜åœ¨å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶è¿žæŽ¥çš„æƒ…å†µ */ private CopyOnWriteArrayList&lt;BookAidl&gt; list = new CopyOnWriteArrayList&lt;&gt;(); /** * æž„é€  aidlä¸­å£°æ˜Žçš„æŽ¥å£çš„Stubå¯¹è±¡ï¼Œå¹¶å®žçŽ°æ‰€å£°æ˜Žçš„æ–¹æ³• */ private Binder mBinder = new IBookManager.Stub() &#123; @Override public List&lt;BookAidl&gt; getBookList() throws RemoteException &#123; return list; &#125; @Override public void addBook(BookAidl book) throws RemoteException &#123; list.add(book); Log.i("aidl", "æœåŠ¡ç«¯æ·»åŠ äº†ä¸€æœ¬ä¹¦"+book.toString()); &#125; &#125;; @Override public void onCreate() &#123; super.onCreate(); //åŠ ç‚¹ä¹¦ list.add(new BookAidl(1, "java")); list.add(new BookAidl(2, "android")); &#125; @Override public IBinder onBind(Intent intent) &#123; // è¿”å›žç»™å®¢æˆ·ç«¯çš„Binderå¯¹è±¡ return mBinder; &#125;&#125; åœ¨Serviceä¸­ï¼Œä¸»è¦å¹²äº†ä¸¤ä»¶äº‹æƒ…ï¼š å®žçŽ°aidlæ–‡ä»¶ä¸­çš„æŽ¥å£çš„Stubå¯¹è±¡ã€‚å¹¶å®žçŽ°æ–¹æ³•ã€‚ å°†Binderå¯¹è±¡é€šè¿‡onBinderè¿”å›žç»™å®¢æˆ·ç«¯ã€‚ ä¸ºäº†çœäº‹ï¼Œåœ¨è¿™é‡Œä¸åœ¨å¦èµ·ä¸€ä¸ªå·¥ç¨‹äº†ï¼Œç›´æŽ¥å°†Serviceåœ¨å¦ä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œã€‚ 123&lt;service android:name="com.example.ipc.BookService" android:process=":remote" /&gt; å¼€å§‹ç¼–å†™å®¢æˆ·ç«¯ å› ä¸ºåœ¨åŒä¸€ä¸ªå·¥ç¨‹ä¸­ï¼Œä¸éœ€è¦æ‹·è´aidlåŒ…ä¸­çš„æ–‡ä»¶ã€‚å¦‚æžœä¸åœ¨åŒä¸€ä¸ªå·¥ç¨‹ï¼Œéœ€è¦æ‹·è´ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566public class BookActivity extends AppCompatActivity&#123; /** * æŽ¥å£å¯¹è±¡ */ private IBookManager mService; /** * ç»‘å®šæœåŠ¡çš„å›žè°ƒ */ private ServiceConnection conn = new ServiceConnection()&#123; @Override public void onServiceConnected(ComponentName name, IBinder service) &#123; // èŽ·å–åˆ°ä¹¦ç±ç®¡ç†çš„å¯¹è±¡ mService = IBookManager.Stub.asInterface(service); Log.i("aidl", "è¿žæŽ¥åˆ°æœåŠ¡ç«¯ï¼ŒèŽ·å–IBookManagerçš„å¯¹è±¡"); &#125; @Override public void onServiceDisconnected(ComponentName name) &#123; &#125; &#125;; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_book); // å¯åŠ¨æœåŠ¡ Intent intent = new Intent(this,BookService.class); bindService(intent, conn, BIND_AUTO_CREATE); &#125; /** * èŽ·å–æœåŠ¡ç«¯ä¹¦ç±åˆ—è¡¨ * @param view */ public void getBookList(View view)&#123; try &#123; Log.i("aidl","å®¢æˆ·ç«¯æŸ¥è¯¢ä¹¦ç±"+mService.getBookList().toString()); &#125; catch (RemoteException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125; /** * æ·»åŠ ä¹¦ç± */ public void add(View view)&#123; try &#123; // è°ƒç”¨æœåŠ¡ç«¯æ·»åŠ ä¹¦ç± mService.addBook(new BookAidl(3,"iOS")); &#125; catch (RemoteException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125;&#125; å®¢æˆ·ç«¯çš„ä»£ç å’Œä¹‹å‰çš„Messengerå¾ˆç±»ä¼¼ï¼š ç»‘å®šæœåŠ¡ï¼Œç›‘å¬å›žè°ƒã€‚ å°†å›žè°ƒä¸­çš„IBinder serviceé€šè¿‡IBookManager.Stub.asInterfaceï¼ˆï¼‰è½¬åŒ–ä¸ºå€Ÿå£å¯¹è±¡ã€‚ è°ƒç”¨å€Ÿå£å¯¹è±¡çš„æ–¹æ³•ã€‚ æ•ˆæžœ æ€»ç»“æ¥è¯´å¯åˆ†ä¸ºå¦‚ä¸‹å‡ æ­¥ æœåŠ¡ç«¯ï¼š æœåŠ¡ç«¯åˆ›å»º.aidlæ–‡ä»¶å’Œå£°æ˜ŽæŽ¥å£ åˆ›å»ºç±»ï¼Œç»§æ‰¿Serviceï¼Œå¹¶å®žçŽ°onBindæ–¹æ³• åœ¨Serviceç±»ä¸­å®šä¹‰aidlä¸­å£°æ˜ŽæŽ¥å£çš„Stubå¯¹è±¡ï¼Œå¹¶å®žçŽ°aidlæŽ¥å£ä¸­å£°æ˜Žçš„æ–¹æ³• åœ¨onBindæ–¹æ³•ä¸­è¿”å›žStubå¯¹è±¡ åœ¨AndroidManifest.xmlä¸­æ³¨å†ŒServiceå¹¶å£°æ˜Žå…¶Action å®¢æˆ·ç«¯ ä½¿ç”¨æœåŠ¡ç«¯æä¾›çš„aidlæ–‡ä»¶ åœ¨Activityå®šä¹‰aidlæŽ¥å£å¯¹è±¡ å®šä¹‰ServiceConnectionå¯¹è±¡ï¼Œç›‘å¬ç»‘å®šæœåŠ¡çš„å›žè°ƒ å›žè°ƒä¸­é€šè¿‡æ–¹æ³•èŽ·å–å€Ÿå£å¯¹è±¡ ContentProviderä½œä¸ºandroid å››å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œè™½ç„¶ç”¨çš„åœ°æ–¹ä¸æ˜¯å¤ªå¤šã€‚ä½†æ˜¯å…¶ç¡®å®žæ˜¯å¤šè¿›ç¨‹é€šä¿¡çš„ä¸€ç§æ–¹å¼ã€‚ä¾‹å¦‚ï¼ŒèŽ·å–é€šè®¯å½•ä¿¡æ¯ï¼Œè¿™æ˜Žæ˜¾è·¨åº”ç”¨äº†ï¼Œè‚¯å®šæ˜¯å¤šè¿›ç¨‹é€šä¿¡å•Šã€‚ å…¶åº•å±‚å®žçŽ°å’ŒMessengerä¸€æ ·ï¼Œéƒ½æ˜¯é€šè¿‡Binder,åŽé¢ä¼šä¸“é—¨åˆ†æžBinderå¯¹è±¡ã€‚ ContentProviderå¾ˆå¤šä»‹ç»ï¼Œåœ¨è¿™ä¸åœ¨å¤šæã€‚ SocketSocketä¹Ÿç§°ä¸ºâ€œå¥—æŽ¥å­—â€ï¼Œæ˜¯ç½‘ç»œé€šä¿¡ä¸­çš„æ¦‚å¿µï¼Œå®ƒåˆ†ä¸ºæµå¼å¥—æŽ¥å­—å’Œç”¨æˆ·æ•°æ®æŠ¥å¥—æŽ¥å­—ï¼Œåˆ†åˆ«å¯¹åº”äºŽç½‘ç»œä¼ è¾“ä¸­çš„ä¼ è¾“æŽ§åˆ¶å±‚çš„TCPå’ŒUDPã€‚ è¯¥æ–¹é¢ä½¿ç”¨çš„æ˜¯JAVA æ–¹é¢çš„çŸ¥è¯†ã€‚è¯¥ä¸¾ä¾‹åªæ˜¯è¯´æ˜Žä¸€ä¸ªæ€è·¯ã€‚ä¸åšç»†è‡´çš„å®žçŽ°ã€‚ æœåŠ¡ç«¯ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869public class SocketService extends Service &#123; /** * è¿žæŽ¥çš„çŠ¶æ€ */ private boolean isConnState = true; @Override public void onCreate() &#123; super.onCreate(); // å¯åŠ¨TCP æœåŠ¡ new Thread(new TCPServer()).start(); &#125; @Override public IBinder onBind(Intent intent) &#123; return null; &#125; @Override public void onDestroy() &#123; // ç»“æŸTCP æœåŠ¡ isConnState = false; super.onDestroy(); &#125; /** * æœåŠ¡ç«¯TCP æœåŠ¡ï¼Œç›¸å½“äºŽæœåŠ¡å™¨ï¼ŒæŽ¥å—Socket è¿žæŽ¥ * @author MH * */ class TCPServer implements Runnable&#123; @Override public void run() &#123; try &#123; // ç›‘å¬æœ¬åœ°çš„12345 ç«¯å£ ServerSocket ss = new ServerSocket(12345); while(isConnState)&#123; // èŽ·å–å®¢æˆ·ç«¯çš„Socket å¯¹è±¡ Socket socket = ss.accept(); // èŽ·å–è¾“å…¥æµ --- BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream())); // é€šè¿‡è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯çš„æ¶ˆæ¯ //String line = br.readLine(); // è¾“å‡ºæµ BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())); // é€šè¿‡è¾“å‡ºæµå‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ //bw.write("...."); // å…³é—­è¿žæŽ¥ socket.close(); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; æœåŠ¡å¯åŠ¨æ—¶ï¼Œåœ¨onCreateæ–¹æ³•ä¸­å¯åŠ¨äº†TCPServerï¼Œè¯¥çº¿ç¨‹æ—¶åˆ»æŽ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ å®¢æˆ·ç«¯ 1234567891011121314151617public void conn()&#123; try &#123; // æŒ‡å®šipå’Œç«¯å£ Socket s = new Socket("localhost", 12345); // ----- å’ŒæœåŠ¡ç«¯ç±»ä¼¼ BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream())); //String line = br.readLine(); // è¾“å‡ºæµ BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(s.getOutputStream())); //bw.write("...."); // å…³é—­è¿žæŽ¥ s.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; å…³äºŽSocketï¼Œåœ¨æ­¤åªæ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºèŒƒã€‚ Android è¿›ç¨‹é—´é€šä¿¡ä¸åŒæ–¹å¼çš„æ¯”è¾ƒ Bundle:å››å¤§ç»„ä»¶é—´çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼Œç®€å•æ˜“ç”¨ï¼Œä½†ä¼ è¾“çš„æ•°æ®ç±»åž‹å—é™ã€‚ æ–‡ä»¶å…±äº«ï¼š ä¸é€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼Œå¹¶ä¸”æ— æ³•åšåˆ°è¿›ç¨‹é—´çš„åŠæ—¶é€šä¿¡ã€‚ Messenger: æ•°æ®é€šè¿‡Messageä¼ è¾“ï¼Œåªèƒ½ä¼ è¾“Bundleæ”¯æŒçš„ç±»åž‹ ContentProviderï¼šandroid ç³»ç»Ÿæä¾›çš„ã€‚ç®€å•æ˜“ç”¨ã€‚ä½†ä½¿ç”¨å—é™ï¼Œåªèƒ½æ ¹æ®ç‰¹å®šè§„åˆ™è®¿é—®æ•°æ®ã€‚ AIDL:åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒå®žæ—¶é€šä¿¡ï¼Œä½†ä½¿ç”¨ç¨å¾®å¤æ‚ã€‚ Socketï¼šç½‘ç»œæ•°æ®äº¤æ¢çš„å¸¸ç”¨æ–¹å¼ã€‚ä¸æŽ¨èä½¿ç”¨ã€‚ Binder çš„ç»†è‡´åˆ†æžåœ¨å®žçŽ°å¤šè¿›ç¨‹é€šä¿¡æ—¶ï¼Œå…¶ä¸­Messenger,ContentProvider,AIDLçš„åº•å±‚å®žçŽ°éƒ½æ˜¯Binderï¼Œå¾ˆæœ‰å¿…è¦å¯¹å…¶è¿›è¡Œç»§ç»­åˆ†æžã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gradleä½¿ç”¨æ€»ç»“ï¼ˆäºŒï¼‰]]></title>
    <url>%2Fposts%2F1f4ffc21.html</url>
    <content type="text"><![CDATA[ä¸€ã€è‡ªå®šä¹‰Android gradleå·¥ç¨‹1ã€defaultConfigé»˜è®¤é…ç½® defaultConfig æ˜¯é»˜è®¤çš„é…ç½®ï¼Œæ˜¯ä¸€ä¸ªProductFlavourã€‚å¯¹äºŽå¤šæ¸ é“æ‰“åŒ…ï¼Œç­‰æƒ…å†µï¼Œå¦‚æžœä¸é’ˆå¯¹è‡ªå®šä¹‰çš„æ˜¯ä¸€ä¸ªProductFlavourå•ç‹¬é…ç½®çš„è¯ï¼Œåˆ™é»˜è®¤ä½¿ç”¨defaultConfigçš„é…ç½® ï¼ˆ1ï¼‰applicationIdæŒ‡å®šç”Ÿæˆçš„appåŒ…åï¼Œå¯¹åº”å€¼æ˜¯ Stringï¼Œå¦‚ï¼šapplicationId &quot;com.android.xx&quot; ï¼ˆ2ï¼‰minSdkVersionAppæœ€ä½Žæ”¯æŒçš„Androidæ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼Œå¯¹åº”å€¼æ˜¯ intåž‹ï¼ˆå³å¯¹äºŽsdk çš„ApiLevelï¼‰å¦‚ï¼ŒminSdkVersion 25 ï¼ˆ3ï¼‰targetSdkVersioné…ç½®å½“å‰æ˜¯åŸºäºŽå“ªä¸ªsdkç‰ˆæœ¬è¿›è¡Œå¼€å‘ï¼Œå¯é€‰å€¼ä¸Ž minSdkVersionä¸€æ · ï¼ˆ4ï¼‰versionCodeå†…éƒ¨ç‰ˆæœ¬å·ï¼Œå¯¹åº”å€¼æ˜¯intåž‹ï¼Œç”¨äºŽé…ç½®Android Appå†…éƒ¨ç‰ˆæœ¬å·ï¼Œé€šå¸¸ç”¨äºŽç‰ˆæœ¬çš„å‡çº§ ï¼ˆ5ï¼‰versionNameç”¨äºŽé…ç½®appçš„ç‰ˆæœ¬åç§°ï¼Œå¯¹åº”å€¼æ˜¯Stringï¼Œå¦‚â€v1.0.0â€ï¼Œè®©ç”¨æˆ·çŸ¥é“å½“å‰appç‰ˆæœ¬ã€‚versionCodeæ˜¯å†…éƒ¨ä½¿ç”¨ï¼ŒversionNameæ˜¯å¤–éƒ¨ä½¿ç”¨ï¼Œä¸€èµ·é…åˆå®Œæˆappçš„ç‰ˆæœ¬å‡çº§æŽ§åˆ¶ã€‚ ï¼ˆ6ï¼‰testApplicationIdé…ç½®æµ‹è¯•appçš„åŒ…åï¼Œé»˜è®¤æ˜¯ applicationId + â€œ.testâ€ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨é»˜è®¤çš„å³å¯ã€‚ ï¼ˆ7ï¼‰testInstrumentationRunnerç”¨äºŽé…ç½®å•å…ƒæµ‹è¯•æ—¶ä½¿ç”¨çš„Runnerï¼Œé»˜è®¤ä½¿ç”¨android.test.InstrumentationTestRunnerã€‚ ï¼ˆ8ï¼‰signingConfigé…ç½®é»˜è®¤çš„ç­¾åä¿¡æ¯ï¼Œå¯¹ç”Ÿæˆçš„appè¿›è¡Œç­¾åã€‚å¯¹åº”å€¼æ˜¯SigningConfigå¯¹è±¡ã€‚ å…·ä½“ä½¿ç”¨ï¼ŒæŸ¥çœ‹*é…ç½®ç­¾åä¿¡æ¯*éƒ¨åˆ†ã€‚ ï¼ˆ9ï¼‰proguardFile å’Œ proguardFilesä¸¤è€…éƒ½æ˜¯é…ç½®æ··æ·†è§„åˆ™æ–‡ä»¶ï¼ŒåŒºåˆ«æ˜¯proguardFileæŽ¥å—ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼Œè€ŒproguardFileså¯ä»¥åŒæ—¶æŽ¥å—å¤šä¸ªã€‚ ï¼ˆ10ï¼‰multiDexEnabledæ˜¯å¦å¯åŠ¨è‡ªåŠ¨æ‹†åˆ†å¤šä¸ªDexçš„åŠŸèƒ½ï¼Œç”¨äºŽçªç ´æ–¹æ³•è¶…è¿‡65535çš„è®¾ç½®ï¼ŒåŽé¢å†å…·ä½“ä»‹ç» 1multiDexEnabled true 2ã€é…ç½®ç­¾åä¿¡æ¯ Android Gradle æä¾›äº†signingConfigs{}é…ç½®å—ï¼Œç”¨äºŽç”Ÿæˆå¤šä¸ªç­¾åé…ç½®ä¿¡æ¯ï¼Œå…¶ç±»åž‹æ˜¯NamedDomainObjectContainerï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åœ¨signingConfigs{}ä¸­å®šä¹‰çš„éƒ½æ˜¯ä¸€ä¸ªSigningConfigçš„å¯¹è±¡å®žä¾‹ã€‚ ä¸€ä¸ªSigningConfigï¼Œå³ç­¾åé…ç½®ï¼Œå¯é…ç½®çš„å…ƒç´ æœ‰ï¼šstoreFile: ç­¾åæ–‡ä»¶ä½ç½®ï¼›storeTypeï¼šç­¾åè¯ä¹¦ç±»åž‹ï¼ˆå¯ä¸å¡«ï¼‰ï¼›storePasswordï¼šç­¾åè¯ä¹¦å¯†ç ï¼›keyAliasï¼šç­¾åè¯ä¹¦å¯†é’¥åˆ«åï¼›keyPasswordï¼šç­¾åè¯ä¹¦ä¸­çš„å¯†é’¥çš„å¯†ç ã€‚å¦‚ï¼š 12345678signingConfigs&#123; release&#123; //ç”Ÿæˆäº†releaseçš„ç­¾åé…ç½® storeFile file('../John.jks') storePassword '12345678' keyAlias 'key0' keyPassword '12345678' &#125; &#125; æ³¨ï¼šdebugç­¾åæ–‡ä»¶ä¸€èˆ¬ä½äºŽ$HOME/.android/debug.keystore å¯¹äºŽç”Ÿæˆçš„ç­¾åé…ç½®ï¼Œå¯ä»¥åº”ç”¨åˆ° defaultConfigä¸­çš„signingConfigè¿›è¡Œé»˜è®¤ç­¾åé…ç½®æˆ–åº”ç”¨åˆ°buildTypesä¸­é’ˆå¯¹æž„å»ºç±»åž‹è¿›è¡Œç­¾åé…ç½®ã€‚å¦‚ï¼š 1234567891011121314151617buildTypes &#123; release &#123; signingConfig signingConfigs.release //é…ç½®releaseç±»åž‹ç­¾å minifyEnabled false proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' &#125; &#125; defaultConfig &#123; applicationId "com.example.john.tapeview" minSdkVersion 24 targetSdkVersion 28 versionCode 1 versionName "1.0" signingConfig signingConfigs.release //é…ç½®é»˜è®¤ç­¾å testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner" &#125; 3ã€æž„å»ºç±»åž‹ï¼ˆbuildTypesï¼‰ buildTypes{} å’ŒsigningConfigs{}ä¸€æ ·ï¼Œéƒ½æ˜¯Android çš„ä¸€ä¸ªæ–¹æ³•ï¼ŒæŽ¥æ”¶åˆ°ä¹Ÿæ˜¯åŸŸå¯¹è±¡ NamedDomainObjectContainerï¼Œæ·»åŠ çš„æ¯ä¸€ä¸ªéƒ½æ˜¯BuildTypeç±»åž‹ã€‚ æ¯ä¸€ä¸ªBuildTypeéƒ½ä¼šç”Ÿæˆä¸€ä¸ªSourceSetï¼Œé»˜è®¤ä½ç½®æ˜¯src//ï¼Œå› æ­¤ï¼Œå¯ä»¥å•ç‹¬ä¸ºå…¶æŒ‡å®šJavaæºä»£ç å’Œresèµ„æºç­‰ã€‚ä¸”ï¼Œæ–°å¢žçš„BuildTypeä¸èƒ½å‘½åä¸º main æˆ– androidTestï¼ˆå› androidé»˜è®¤å·²ç»ç”Ÿæˆï¼‰ï¼Œä¸”ç›¸äº’ä¹‹é—´ä¸èƒ½åŒåã€‚ ï¼ˆ1ï¼‰applicationIdSuffixç”¨äºŽé…ç½®åŸºäºŽapplicationIdçš„åŽç¼€ï¼Œå¦‚applicationIdä¸º com.John.gradle.sample , åœ¨debugçš„buildTypeä¸­æŒ‡å®š applicationIdSuffix &quot;.debug&quot;ï¼Œåˆ™ç”Ÿæˆçš„debugçš„åŒ…åä¸ºcom.John.gradle.sample.debug ï¼ˆ2ï¼‰signingConfigé…ç½®ç­¾åä¿¡æ¯ï¼Œä½¿ç”¨åŒå‰é¢æåˆ°çš„ defaultConfigä¸€æ ·ã€‚ ï¼ˆ3ï¼‰å¯åŠ¨zipAlignä¼˜åŒ–zipalignæ˜¯androidæä¾›çš„æ•´ç†ä¼˜åŒ–apkçš„å·¥å…·ï¼Œèƒ½æé«˜ç³»ç»Ÿå’Œåº”ç”¨çš„è¿è¡Œæ•ˆçŽ‡ï¼Œæ›´å¿«è¯»å†™apkèµ„æºï¼Œé™ä½Žå†…å­˜ï¼Œæ‰€ä»¥ï¼Œå¯¹äºŽå‘å¸ƒçš„apkï¼Œä¸€èˆ¬å¼€å¯ zipAlignEnabled true //trueä¸ºå¼€å¯ ï¼ˆ4ï¼‰èµ„æºæ¸…ç†shrinkResourcesç”¨äºŽé…ç½®æ˜¯å¦è‡ªåŠ¨æ¸…ç†æœªä½¿ç”¨çš„èµ„æºï¼Œtrueä¸ºå¼€å¯ï¼Œfalseä¸ºå…³é—­ã€‚éœ€ç»“åˆæ··æ·†ä½¿ç”¨ã€‚ ï¼ˆ5ï¼‰ä½¿ç”¨æ··æ·† minifyEnabledå¯ç”¨æ··æ·†å¯ä»¥ä¼˜åŒ–ä»£ç ï¼ŒåŒæ—¶ç»“åˆshrinkResourcesæ¸…ç†èµ„æºï¼Œå¯ä»¥ç¼©å°apkåŒ…ï¼Œè¿˜å¯ä»¥æ··æ·†ä»£ç ã€‚ä¸€èˆ¬å‘å¸ƒçš„éƒ½æ˜¯è¦æ··æ·†çš„ã€‚ å¼€å¯æ··æ·†ï¼šminifyEnabled true //trueä¸ºå¼€å¯ï¼›ä½¿ç”¨proguardFileå’ŒproguardFilesè®¾ç½®æ··æ·†è§„åˆ™æ–‡ä»¶ï¼Œä¸¤è€…åŒºåˆ«å¦‚å‰é¢defaultConfigä¸­è¯´æ˜Žã€‚ æ³¨ï¼šå¯¹äºŽå¤šæ¸ é“æ‰“åŒ…ï¼Œæ¯ä¸ªproductFlavoréƒ½å¯ä»¥å•ç‹¬é…ç½®æ··æ·†è§„åˆ™æ–‡ä»¶ï¼ˆé€šè¿‡å„è‡ªçš„proguardFileå’ŒproguardFilesï¼‰ã€‚ ï¼ˆ6ï¼‰multiDexEnabledæ˜¯å¦å¯åŠ¨è‡ªåŠ¨æ‹†åˆ†å¤šä¸ªDexçš„åŠŸèƒ½ï¼Œç”¨äºŽçªç ´æ–¹æ³•è¶…è¿‡65535çš„è®¾ç½®ï¼ŒåŽé¢å†å…·ä½“ä»‹ç» 1multiDexEnabled true ï¼ˆ7ï¼‰debuggable å’Œ jniDebuggabledebuggableï¼šæ˜¯å¦ç”Ÿæˆä¸€ä¸ªå¯ä¾›è°ƒè¯•çš„apkï¼Œå¯¹åº”å€¼ä¸ºbooleanç±»åž‹ï¼› jniDebuggableï¼šæ˜¯å¦ç”Ÿæˆä¸€ä¸ªå¯ä¾›è°ƒè¯•Jniï¼ˆC/C++ï¼‰ä»£ç çš„apkï¼Œå¯¹åº”å€¼ä¸ºbooleanç±»åž‹ï¼› äºŒã€Android gradleé«˜çº§è‡ªå®šä¹‰1ã€æ‰¹é‡ä¿®æ”¹ç”Ÿæˆçš„apkæ–‡ä»¶åAndroid Gradleæä¾›äº†3ä¸ªå±žæ€§ï¼ŒapplicationVariantsï¼ˆä»…ä»…é€‚ç”¨äºŽAndroid åº”ç”¨Gradleæ’ä»¶ï¼‰ï¼Œå’ŒlibraryVariantsï¼ˆä»…ä»…é€‚ç”¨äºŽAndroidåº“gradleæ’ä»¶ï¼‰ï¼ŒtestVariantsï¼ˆä»¥ä¸Šä¸¤ç§éƒ½é€‚ç”¨ï¼‰ applicationVariantsæ˜¯ä¸€ä¸ªé›†åˆï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªç”Ÿæˆçš„äº§ç‰©ï¼Œå³ xxxRelease å’Œ xxxDebug ç­‰ï¼ˆå³ç”Ÿæˆapkï¼‰ ï¼Œå®ƒæœ‰ä¸€ä¸ªoutputsä½œä¸ºè¾“å‡ºé›†åˆã€‚éåŽ†ï¼Œè‹¥åå­—ä»¥.apkç»“å°¾ï¼Œé‚£ä¹ˆå°±æ˜¯è¦ä¿®æ”¹çš„apkè¾“å‡ºã€‚ 1234567891011//åŠ¨æ€æ”¹å˜ç”Ÿæˆçš„apkçš„åå­—ï¼š é¡¹ç›®å_æ¸ é“å_vç‰ˆæœ¬å_æž„å»ºæ—¥æœŸ.apk applicationVariants.all &#123; variant -&gt; variant.outputs.all &#123; output -&gt; if (output.outputFile != null &amp;&amp; output.outputFile.name.endsWith('.apk') &amp;&amp;'release'==(variant.buildType.name)) &#123; def flavorName = variant.flavorName.startsWith("_") ? variant.flavorName.substring(1) : variant.flavorName def apkFileName = "Example92_$&#123;flavorName&#125;_v$&#123;variant.versionName&#125;_$&#123;buildTime()&#125;.apk" outputFileName = apkFileName &#125; &#125; &#125; 2ã€å¤šæ–¹å¼é…ç½® VersionCode å’Œ VersionNameï¼ˆ1ï¼‰é€šè¿‡åº”ç”¨è„šæœ¬æ’ä»¶ï¼ˆapply fromï¼‰ æ–°å»ºä¸€ä¸ªversion.gradleï¼ˆå½“å‰å­˜æ”¾åœ¨é¡¹ç›®è·¯å¾„ä¸‹çš„gradleæ–‡ä»¶å¤¹ä¸­ï¼‰ï¼Œå¹¶è®¾ç½®è‡ªå®šä¹‰å±žæ€§ 1234ext&#123; appVersionCode = 1 appVersionName = '1.0.2'&#125; åœ¨rootProjectä¸­åº”ç”¨è¯¥è„šæœ¬æ–‡ä»¶ 1apply from : 'gradle/version.gradle' å¯åœ¨ä»»æ„å­å·¥ç¨‹ä¸­å¼•ç”¨è¯¥è®¾ç½®ï¼š ï¼ˆ2ï¼‰ç›´æŽ¥åœ¨å±žæ€§æ–‡ä»¶ï¼ˆxxx.propertiesï¼‰ä¸­å®šä¹‰ä½¿ç”¨ åœ¨å·¥ç¨‹ç›®å½•ä¸‹çš„gradle.propertiesä¸­å®šä¹‰ å¯åœ¨ä»»æ„å­å·¥ç¨‹ä¸­å¼•ç”¨è¯¥è®¾ç½®ï¼š ï¼ˆ3ï¼‰ä»Ž git çš„ tag ä¸ŠèŽ·å– VersionName å’Œ versionCode12345678910111213141516171819202122232425/** * ä»¥git tagçš„æ•°é‡ä½œä¸ºå…¶ç‰ˆæœ¬å· * @return tagçš„æ•°é‡ */def static getAppVersionCode()&#123; def stdout = new ByteArrayOutputStream() exec &#123; commandLine 'git','tag','--list' standardOutput = stdout &#125; return stdout.toString().split("\n").size()&#125;/** * ä»Žgit tagä¸­èŽ·å–åº”ç”¨çš„ç‰ˆæœ¬åç§° * @return git tagçš„åç§° */def static getAppVersionName()&#123; def stdout = new ByteArrayOutputStream() exec &#123; commandLine 'git','describe','--abbrev=0','--tags' standardOutput = stdout &#125; return stdout.toString().replaceAll("\n","")&#125; 3ã€åŠ¨æ€é…ç½®AndroidManifestæ–‡ä»¶ åœ¨æž„å»ºè¿‡ç¨‹ï¼ŒåŠ¨æ€ä¿®æ”¹AndroidManifestæ–‡ä»¶ä¸­çš„å†…å®¹ android gradle æä¾›äº†éžå¸¸ä¾¿æ·çš„æ–¹æ³•æ›¿æ¢AndroidManifestæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå³manifestPlaceholderã€Manifestå ä½ç¬¦ã€‚ manifestPlaceholdersæ˜¯ProductFlavorçš„ä¸€ä¸ªå±žæ€§ï¼ŒMapç±»åž‹ï¼Œæ‰€ä»¥å¯ä»¥åŒæ—¶é…ç½®å¤šä¸ªå ä½ç¬¦ã€‚ å®šä¹‰å ä½ç¬¦ï¼š 123456789101112...productFlavors&#123; google&#123; manifestPlaceholders.put("UMENG_CHANNEL","google") &#125; baidu&#123; manifestPlaceholders.put("UMENG_CHANNEL","baidu") &#125;&#125;... åœ¨AndroidManifesä¸­ä½¿ç”¨è¿™ä¸ªå ä½ç¬¦ â€œUMENG_CHANNELâ€ 1234567...&lt;application&gt; ... &lt;meta-data android:value="$&#123;UMENG_CHANNEL&#125;" android:name = "UMENG_CHANNEL"/&gt; ...&lt;/application&gt;... äº¦å¯ä»¥è¿­ä»£ä¿®æ”¹å ä½ç¬¦ 1234567891011...productFlavors&#123; google&#123; &#125; baidu&#123; &#125; &#125;productFlavors.all&#123;flavor-&gt; manifestPlaceholders.put("UMENG_CHANNEL",flavor.name)&#125;... 4ã€è‡ªå®šä¹‰BuildConfigAndroid gradleæä¾›äº†buildConfigField(Srting type,String name ,String value) æ¥å®žçŽ°æ·»åŠ å¸¸é‡åˆ°BuildConfigä¸­ã€‚ä¸€èˆ¬åœ¨productFlavorsæˆ–buildTypesä¸­ä½¿ç”¨: æ³¨ï¼šå¯¹äºŽvalueæ˜¯Stringç±»åž‹çš„ï¼ŒåŒå¼•å·ä¸€å®šå¾—åŠ ä¸Šï¼Œè¿™é‡Œå†™äº†ä»€ä¹ˆï¼ŒbuildConfigä¼šåŽŸå°ä¸åŠ¨æ”¾ä¸ŠåŽ» 1234567891011...productFlavors&#123; google&#123; //å¯¹äºŽvalueæ˜¯Stringç±»åž‹çš„ï¼ŒåŒå¼•å·ä¸€å®šå¾—åŠ ä¸Šï¼Œè¿™é‡Œå†™äº†ä»€ä¹ˆï¼ŒbuildConfigä¼šåŽŸå°ä¸åŠ¨æ”¾ä¸ŠåŽ» buildConfigField 'String','name','"google"' &#125; baidu&#123; buildConfigField 'String','name','"baidu"' &#125;&#125;... 5ã€åŠ¨æ€æ·»åŠ è‡ªå®šä¹‰çš„èµ„æºAndroid gradleæä¾›äº†resValue(String type,String name,String value)æ¥ æ·»åŠ èµ„æºã€‚åªèƒ½åœ¨productFlavorsæˆ–buildTypesä¸­ä½¿ç”¨ æ³¨ï¼šè¿™é‡Œå†™äº†ä»€ä¹ˆï¼Œç¼–è¯‘å‡ºæ¥åŽä¹Ÿä¼šåŽŸå°ä¸åŠ¨æ”¾ä¸ŠåŽ» 6ã€Dexé€‰é¡¹é…ç½®123456789101112android &#123; ... dexOptions &#123; incremental true //android studio3.xä»¥ä¸Šå·²åºŸå¼ƒï¼Œæ˜¯å¦å¼€å¯dxå¢žé‡æ¨¡å¼ javaMaxHeapSize '4g' //æé«˜javaæ‰§è¡Œdxå‘½ä»¤æ—¶çš„æœ€å¤§åˆ†é…å†…å­˜ jumboMode true //å¼ºåˆ¶å¼€å¯jumboModeæ¨¡å¼ï¼Œè®©æ–¹æ³•è¶…è¿‡65535ä¹Ÿæž„å»ºæˆåŠŸ pre &#125; ...&#125; 7ã€ç¼–è¯‘é€‰é¡¹å’Œadbæ“ä½œé€‰é¡¹123456789101112131415android &#123; ... compileOptions &#123; encoding = 'utf-8' sourceCompatibility JavaVersion.VERSION_1_8 targetCompatibility JavaVersion.VERSION_1_8 &#125; adbOptions&#123; timeOutInMs = 5000 //è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå•ä½ ms installOptions '-r','-s'//å®‰è£…é€‰é¡¹ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨ &#125; ...&#125; 8ã€çªç ´æ–¹æ³•è¶…è¿‡65535çš„é™åˆ¶ åœ¨defaultConfigæˆ–buildTypesæˆ–productFlavorsä¸­ï¼Œå¼€å¯multiDexEnabledï¼šmultiDexEnabled true å¢žåŠ ä¾èµ–ï¼šimplementation &#39;com.android.support:multidex:1.0.3&#39; åœ¨è‡ªå®šä¹‰çš„ Application ä¸­è®¾ç½®ï¼ˆ5.0ä»¥ä¸Šå¤©ç„¶æ”¯æŒï¼‰ï¼š ä½¿è‡ªå®šä¹‰çš„Applicationç»§æ‰¿MultiDexApplication æˆ–ç›´æŽ¥åœ¨javaä»£ç ä¸­ä¿®æ”¹ï¼š 1234567...@Overrideprotected void attachBaseContext(Context base) &#123; super.attachBaseContext(base); MultiDex.install(this);&#125;... å¤šæ¸ é“æž„å»º ä¸€ä¸ªæž„å»ºäº§ç‰©ï¼ˆapkï¼‰ï¼Œå³Build Variant = BuildType + ProductFlavorï¼Œå…¶ä¸­ProductFlavoråˆè¿›ä¸€æ­¥åˆ’åˆ†dimensionsï¼Œå³Build Variant = BuildType + ProductFlavorâ€™s dimensions 1ã€å¤šæ¸ é“æž„å»ºProductFlavorå±žæ€§1234567...productFlavors&#123; google&#123; applicationId "com.john.xxx" &#125;&#125;... ï¼ˆ1ï¼‰applicationIdï¼Œè·Ÿå‰é¢æ‰€è¿°ä¸€æ ·ã€‚ï¼ˆ2ï¼‰manifestPlaceholdersï¼Œè·Ÿå‰é¢æ‰€è¿°ä¸€æ ·ã€‚ï¼ˆ3ï¼‰multiDexEnabledï¼Œè·Ÿå‰é¢æ‰€è¿°ä¸€æ ·ã€‚ï¼ˆ4ï¼‰proguardFilesï¼Œè·Ÿå‰é¢æ‰€è¿°ä¸€æ ·ã€‚ï¼ˆ5ï¼‰signingConfigï¼Œè·Ÿå‰é¢æ‰€è¿°ä¸€æ ·ã€‚ï¼ˆ6ï¼‰testApplicationIdï¼Œè·Ÿå‰é¢æ‰€è¿°ä¸€æ ·ã€‚ï¼ˆ7ï¼‰versionCode å’Œ versionNameï¼Œè·Ÿå‰é¢æ‰€è¿°ä¸€æ ·ã€‚ï¼ˆ8ï¼‰dimension ä½œä¸ºProductFlavorçš„ç»´åº¦ï¼Œå¯ç†è§£ä¸ºProductFlavorçš„åˆ†ç»„ å¦‚ï¼Œfree å’Œ paid å±žäºŽversionåˆ†ç»„ï¼Œè€Œx86 å’Œ armå±žäºŽæž¶æž„åˆ†ç»„ï¼š 1234567891011121314151617181920android&#123; ... flavorDimensions "version","abi" //å®šä¹‰åˆ†ç»„ productFlavors&#123; free&#123; dimension 'version' &#125; paid&#123; dimension 'version' &#125; x86&#123; dimension 'abi' &#125; arm&#123; dimension 'abi' &#125; &#125; ...&#125; å¯¹äºŽä»¥ä¸Šçš„è®¾ç½®ï¼ŒBuild Variant = BuildType + ProductFlavorâ€™s dimensionsï¼Œåˆ™ç”Ÿæˆçš„assembleä»»åŠ¡ï¼Œ å³variantï¼š ArmFreeDebug ArmFreeRelaese ArmPaidDebug ArmPaidRelease X86FreeDebug X86FreeRelaese X86PaidDebug X86PaidRelease å‚è€ƒé“¾æŽ¥Android Developerå®˜ç½‘]]></content>
      <categories>
        <category>Android</category>
        <category>Gradle</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gradleä½¿ç”¨æ€»ç»“ï¼ˆä¸€ï¼‰]]></title>
    <url>%2Fposts%2F2f5910f9.html</url>
    <content type="text"><![CDATA[Gradleæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æž„å»ºç³»ç»Ÿå·¥å…·ï¼Œå®ƒçš„DSL(é¢†åŸŸç‰¹å®šè¯­è¨€)åŸºäºŽGroovyå®žçŽ°ï¼Œå¯ä»¥æ–¹ä¾¿åœ°é€šè¿‡ä»£ç æŽ§åˆ¶è¿™äº›DSLæ¥è¾¾åˆ°æž„å»ºçš„ç›®çš„ã€‚ æ³¨ï¼šæ‰§è¡Œgradleå‘½ä»¤æ—¶ï¼Œé»˜è®¤åŠ è½½å½“å‰ç›®å½•ä¸‹çš„build.gradleæ–‡ä»¶ï¼Œäº¦å¯ä»¥é€šè¿‡-b æŒ‡å®šè¦åŠ è½½çš„æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚ï¼š gradlew -b ./app/build.gradle assemble Gradleå¸¸ç”¨åŸºç¡€1ã€è®°å¾—ä½¿ç”¨å¸®åŠ©ï¼ˆ1ï¼‰æŸ¥çœ‹æ‰€æœ‰å¯æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆTasksï¼‰1gradlew tasks Gradleä¼šä»¥åˆ†ç»„çš„æ–¹å¼åˆ—å‡ºtaskåˆ—è¡¨ï¼Œæ¯”å¦‚æž„å»ºç±»çš„ assemableï¼Œå¸®åŠ©ç±»çš„ helpç­‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283------------------------------------------------------------All tasks runnable from root project------------------------------------------------------------Android tasks-------------androidDependencies - Displays the Android dependencies of the project.signingReport - Displays the signing info for each variant.sourceSets - Prints out all the source sets defined in this project.Build tasks-----------assemble - Assembles all variants of all applications and secondary packages.assembleAndroidTest - Assembles all the Test applications.assembleDebug - Assembles all Debug builds.assembleRelease - Assembles all Release builds.build - Assembles and tests this project.buildDependents - Assembles and tests this project and all projects that depend on it.buildNeeded - Assembles and tests this project and all projects it depends on.bundleDebug - Creates all Debug bundles.bundleRelease - Creates all Release bundles.clean - Deletes the build directory.cleanBuildCache - Deletes the build cache directory.compileDebugAndroidTestSourcescompileDebugSourcescompileDebugUnitTestSourcescompileReleaseSourcescompileReleaseUnitTestSourcesBuild Setup tasks-----------------init - Initializes a new Gradle build.wrapper - Generates Gradle wrapper files.Cleanup tasks-------------lintFix - Runs lint on all variants and applies any safe suggestions to the source code.Help tasks----------buildEnvironment - Displays all buildscript dependencies declared in root project 'tapeView'.components - Displays the components produced by root project 'tapeView'. [incubating]dependencies - Displays all dependencies declared in root project 'tapeView'.dependencyInsight - Displays the insight into a specific dependency in root project 'tapeView'.dependentComponents - Displays the dependent components of components in root project 'tapeView'. [incubating]help - Displays a help message.model - Displays the configuration model of root project 'tapeView'. [incubating]projects - Displays the sub-projects of root project 'tapeView'.properties - Displays the properties of root project 'tapeView'.tasks - Displays the tasks runnable from root project 'tapeView' (some of the displayed tasks may belong to subprojects).Install tasks-------------installDebug - Installs the Debug build.installDebugAndroidTest - Installs the android (on device) tests for the Debug build.installRelease - Installs the Release build.uninstallAll - Uninstall all applications.uninstallDebug - Uninstalls the Debug build.uninstallDebugAndroidTest - Uninstalls the android (on device) tests for the Debug build.uninstallRelease - Uninstalls the Release build.Verification tasks------------------check - Runs all checks.connectedAndroidTest - Installs and runs instrumentation tests for all flavors on connected devices.connectedCheck - Runs all device checks on currently connected devices.connectedDebugAndroidTest - Installs and runs the tests for debug on connected devices.deviceAndroidTest - Installs and runs instrumentation tests using all Device Providers.deviceCheck - Runs all device checks using Device Providers and Test Servers.lint - Runs lint on all variants.lintDebug - Runs lint on the Debug build.lintRelease - Runs lint on the Release build.lintVitalRelease - Runs lint on just the fatal issues in the release build.test - Run unit tests for all variants.testDebugUnitTest - Run unit tests for the debug build.testReleaseUnitTest - Run unit tests for the release build.To see all tasks and more detail, run gradle tasks --allTo see more detail about a task, run gradle help --task &lt;task&gt;BUILD SUCCESSFUL in 18s1 actionable task: 1 executed ï¼ˆ2ï¼‰Gradle Helpä»»åŠ¡gradleå†…ç½®çš„helpä»»åŠ¡ï¼Œå¯ä»¥äº†è§£æ¯ä¸€ä¸ªTaskçš„ä½¿ç”¨å¸®åŠ©ï¼Œç”¨æ³•æ˜¯gradlew help --task &lt;taskName&gt; å¦‚ï¼šgradlew help --task assemable 2ã€å¼ºåˆ¶åˆ·æ–°ä¾èµ–1gradlew --refresh-dependencies assemable 3ã€å¤šä»»åŠ¡æ‰§è¡Œåªéœ€æŒ‰é¡ºåºä»¥ç©ºæ ¼åˆ†å¼€å³å¯ï¼Œå¦‚gradlew clean jarï¼Œå…ˆæ‰§è¡Œcleanå†æ‰§è¡Œç”Ÿæˆjar 4ã€è‡ªå®šä¹‰å±žæ€§è‡ªå®šä¹‰å±žæ€§å…·æœ‰æ›´å¹¿æ³›çš„ä½œç”¨åŸŸï¼Œå¯ä»¥è·¨Projectï¼Œè·¨Taskè®¿é—®ã€‚åªè¦èƒ½è®¿é—®è¿™äº›å±žæ€§æ‰€å±žçš„å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™äº›å±žæ€§å°±å¯ä»¥è¢«è®¿é—®åˆ°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839apply plugin: "java"ext.age = 18 //è‡ªå®šä¹‰ä¸€ä¸ªå±žæ€§//è‡ªå®šä¹‰å¤šä¸ªå±žæ€§ext&#123; phone = '020' address = '' dep = [android : "androidan"] //map&#125;sourceSets.all&#123; ext.resourcesDir = null&#125;sourceSets &#123; main&#123; resourcesDir="main/res" &#125; test&#123; resourcesDir="test/res" &#125;&#125;task customProperty&#123; doLast&#123; println "age: $&#123;age&#125;" println "phone: $phone" println "address: $address" println "android: $&#123;dep.android&#125;" sourceSets.each&#123; println"$&#123;it.name&#125;'s resourcesDir is: $&#123;it.resourcesDir&#125;" &#125; &#125; &#125; 5ã€ä»»åŠ¡çš„ç¦ç”¨å’Œå¼€å¯ä»»åŠ¡ç¦ç”¨æ—¶ï¼Œå½“æ‰§è¡Œåˆ°è¯¥ä»»åŠ¡ï¼Œä¼šskipæŽ‰ 1234567task task1&#123; doLast&#123; println 'xxx' &#125;&#125;task1.enabled = false; //false:ç¦ç”¨ï¼Œtrue:å¼€å¯ 6ã€ä»»åŠ¡çš„onlyif æ–­è¨€ä»»åŠ¡æœ‰ä¸€ä¸ªonlyIfæ–¹æ³•ï¼ŒæŽ¥æ”¶ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°ï¼Œå¦‚æžœè¯¥é—­åŒ…è¿”å›žtrueï¼Œåˆ™è¯¥ä»»åŠ¡æ‰§è¡Œï¼Œå¦åˆ™è·³è¿‡ ä»¥é”®å€¼å¯¹çš„å½¢å¼æ·»åŠ å±žæ€§ï¼š-PK=Vï¼Œä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ ï¼Œå¦‚ï¼šgradle -Pbuild_apps=shoufa build 12345678910111213141516171819202122232425262728293031323334final String BUILD_APPS_ALL="all";final String BUILD_APPS_SHOUFA="shoufa";final String BUILD_APPS_EXCLUDE_SHOUFA="exclude_shoufa";task QQRelease&#123; doLast&#123; println "QQRelease" &#125; &#125;task BaiduRelease&#123; doLast&#123; println "BaiduRelease" &#125; &#125;task build&#123; group BasePlugin.BUILD_GROUP description 'æ‰“æ¸ é“åŒ…' dependsOn QQRelease,BaiduRelease&#125;QQRelease.onlyIf&#123; if (project.hasProperty('build_apps')) &#123; Object buildApps = project.property("build_apps") if (BUILD_APPS_SHOUFA.equals(buildApps)) &#123; return false &#125; &#125; return true;&#125;//gradle -Pbuild_apps=shoufa build; //ä»¥é”®å€¼å¯¹çš„å½¢å¼æ·»åŠ å±žæ€§ï¼š-PK=Vï¼Œä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ 7ã€è„šæœ¬å³ä»£ç ï¼Œä»£ç ä¹Ÿæ˜¯è„šæœ¬è™½ç„¶Gradleæ˜¯ä¸ªè„šæœ¬æ–‡ä»¶ï¼Œä½†å†™çš„ä¾æ—§æ˜¯ä»£ç ï¼ŒGroovyæ˜¯å…¼å®¹Javaçš„ï¼Œèƒ½çµæ´»å®žçŽ°å¾ˆå¤šåŠŸèƒ½ã€‚å¦‚ï¼Œç»™ç”Ÿæˆçš„apkä»¥å½“å‰æ—¶é—´å‘½åï¼š 12345def buildTime()&#123; def date = new Date() def formattedDate = data.format('yyyyMMdd') return formattedDate&#125; GroovyåŸºç¡€1ã€å­—ç¬¦ä¸²å•å¼•å·å’ŒåŒå¼•å·éƒ½èƒ½å®šä¹‰å­—ç¬¦ä¸²ã€‚åŒºåˆ«åœ¨äºŽï¼Œå•å¼•å·è¡¨ç¤ºçº¯ç²¹çš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œè€ŒåŒå¼•å·å…·æœ‰è¿ç®—èƒ½åŠ›ã€‚ å¦‚: 1234def name = "John"println 'å•å¼•å·$&#123;name&#125;' //è¾“å‡º: å•å¼•å·$&#123;name&#125;println "åŒå¼•å·$&#123;name&#125;" //è¾“å‡º: åŒå¼•å·Johnprintln "åŒå¼•å·$name" //è¾“å‡º: åŒå¼•å·John ä¸€ä¸ªç¾Žå…ƒç¬¦å·ç´§æŽ¥ç€ä¸€å¯¹èŠ±æ‹¬å·ï¼ŒèŠ±æ‹¬å·é‡Œæ”¾è¡¨è¾¾å¼ï¼Œå¦‚${name}ï¼Œå½“åªæœ‰ä¸€ä¸ªå˜é‡æ—¶ï¼Œå¯ä»¥çœç•¥èŠ±æ‹¬å·ï¼Œå¦‚$name; 2ã€é›†åˆï¼ˆ1ï¼‰List12345def nums = [1,2,3,4] //å®šä¹‰arrayListprintln nums[1] //ä¸‹æ ‡ç´¢å¼•è®¿é—®nums.each&#123; println it //forEach,å…¶ä¸­itå˜é‡ä¸ºæ­£åœ¨è¿­ä»£çš„å…ƒç´ &#125; ï¼ˆ2ï¼‰Map123456def map = ['width':1024,'height':768] //å®šä¹‰mapprintln map['width'] //è®¿é—®println map.height //è®¿é—®map.each&#123; println "Key:$&#123;it.key&#125;,Value:$it.value" //forEach,è¢«å˜é‡çš„æ˜¯Map.Entry&#125; ï¼ˆ3ï¼‰æ–¹æ³• æ‹¬å·æ˜¯å¯ä»¥å¿½ç•¥çš„ 12345method1(2,3) //method1 2,3 //å¯å¿½ç•¥æ‹¬å·ï¼Œdef method1(int a,int b)&#123; println a+b&#125; return æ˜¯å¯ä»¥ä¸å†™çš„ï¼Œæœ€åŽä¸€å¥ä»£ç ä½œä¸ºå…¶è¿”å›žå€¼ 1234567def method2(int a,int b)&#123; if(a&gt;b)&#123; a //å³return a; &#125;else &#123; b //å³return b; &#125;&#125; ä»£ç å—/æ–¹æ³•æ˜¯å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’çš„ 12345678910111213141516171819202122//å‘†æ¿å†™æ³•nums.each(&#123;println it&#125;)//æ ¼å¼åŒ–ä¸€äº›nums.each(&#123; println it&#125;)//Groovyä¸­ï¼Œå¦‚æžœæ–¹æ³•çš„æœ€åŽä¸€ä¸ªå‚æ•°æ˜¯ é—­åŒ…ï¼Œåˆ™å¯ä»¥æ”¾åˆ°æ–¹æ³•å¤–é¢nums.each()&#123; println it&#125;//ç„¶åŽçœç•¥æ‹¬å·ï¼Œåˆ™å˜æˆå¸¸è§çš„æ ·å¼nums.each&#123; println it&#125;//å¤šå‚æ•°è°ƒç”¨eachMap&#123;k,v-&gt; println "$k is $v"&#125; JavaBean,å¯ä»¥å¾ˆå®¹æ˜“åœ°è®¿é—®å’Œä¿®æ”¹å±žæ€§å€¼ï¼Œè€Œä¸ç”¨é€šè¿‡getter/setterï¼Œå› Groovyå†…éƒ¨å·²å¸®æˆ‘ä»¬æžå®šå¥½ã€‚ 12345678def Person p = new Person()println "name is $p.name" //è¾“å‡ºnullp.name = "John" println "name is $p.name" //è¾“å‡ºJohnclass Person &#123; private String name&#125; é—­åŒ…å§”æ‰˜ Groovyçš„é—­åŒ…æœ‰thisObjectã€ownerå’Œdelegateä¸‰ä¸ªå±žæ€§ï¼Œä¸€èˆ¬æ˜¯thisObject&gt;owner&gt;delegateï¼Œä½†å¯ä»¥ä¿®æ”¹delegateã€‚ä¸€èˆ¬æŒ‡å®šdelegateä¸ºå½“å‰itï¼Œè¿™æ ·å°±å¯ä»¥åœ¨é—­åŒ…å†…å¯¹è¯¥itè¿›è¡Œé…ç½®ï¼Œæˆ–è°ƒç”¨å…¶æ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728293031task delegate&#123; doLast&#123; person&#123; name = "cap" //åœ¨é—­åŒ…å†…å¯¹è¯¥itè¿›è¡Œé…ç½® age = 20 //åœ¨é—­åŒ…å†…å¯¹è¯¥itè¿›è¡Œé…ç½® dumpPersion() //åœ¨é—­åŒ…å†…å¯¹è¯¥itè°ƒç”¨å…¶æ–¹æ³• &#125; &#125;&#125;def dumpPersion()&#123; println "project delegate"&#125;class Person&#123; private String name private int age def dumpPersion()&#123; println "name:$&#123;name&#125;;age:$&#123;age&#125;" &#125;&#125;def person(Closure&lt;Person&gt; closure)&#123; Person p = new Person() closure.delegate = p //è®¾ç½®å§”æ‰˜ closure.setResolveStrategy(Closure.DELEGATE_FIRST)//è®¾ç½®å§”æ‰˜ä¼˜å…ˆ closure(p)&#125; Gradle æ’ä»¶1ã€Java Gradle çš„sourceSetså¸¸ç”¨å±žæ€§sourceSetï¼Œå³æºä»£ç é›†åˆï¼ˆAndroidçš„buildTypeså’Œè¿™ä¸ªç±»ä¼¼ï¼‰ï¼Œç”¨æ¥æè¿°å’Œç®¡ç†æºä»£ç å’Œèµ„æºå­˜æ”¾ç­‰åŠŸèƒ½ã€‚æä¾›æœ‰sourceSets{}é—­åŒ…æ”¾é…ç½®å’Œç”ŸæˆsourceSetï¼Œå¦‚ï¼š 123456789101112131415sourceSets&#123; main&#123; //åœ¨è¿™é‡Œå¯ä»¥å¯¹main sourceSetè¿›è¡Œé…ç½® java&#123; srcDir 'src/java' //æ›´æ”¹äº†javaæºä»£ç å­˜æ”¾ç›®å½•ï¼Œé»˜è®¤æ˜¯ src/main/java &#125; resources&#123; srcDir 'src/resources' //æ›´æ”¹äº†èµ„æºæ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œé»˜è®¤æ˜¯ src/main/resources &#125; &#125; vip&#123; //ç”Ÿæˆäº†æ–°çš„ vip sourceSet &#125;&#125; SourceSetå¸¸ç”¨å±žæ€§ï¼š å±žæ€§å ç±»åž‹ æè¿° name String åªè¯»ï¼Œå¦‚ï¼Œmain java SourceDirectorySet è¯¥æºé›†çš„javaæºæ–‡ä»¶ java.srcDirs Set è¯¥æºé›†çš„javaæºæ–‡ä»¶æ‰€åœ¨ç›®å½• resources SourceDirectorySet è¯¥æºé›†çš„èµ„æºæ–‡ä»¶ resources.srcDirs Set è¯¥æºé›†çš„èµ„æºæ–‡ä»¶çš„æ‰€åœ¨ç›®å½• output.classesDir File è¯¥æºé›†ç¼–è¯‘åŽçš„classæ–‡ä»¶ç›®å½• output.resourcesDir File ç¼–è¯‘åŽç”Ÿæˆçš„èµ„æºç›®å½• compileClassPath FileCollection ç¼–è¯‘è¯¥æºé›†æ—¶æ‰€éœ€çš„classPath 2ã€Android Gradleæ’ä»¶åˆ†ç±»å’Œä¸‰ä¸ªsourceSetAndroid Gradleæ’ä»¶çš„åˆ†ç±»æ˜¯æ ¹æ®Anroidå·¥ç¨‹çš„å±žæ€§åˆ†ç±»çš„ï¼Œåœ¨Androidä¸­ï¼Œæœ‰3ç±»ï¼š Appåº”ç”¨å·¥ç¨‹æ’ä»¶id: com.android.application Libraryåº“å·¥ç¨‹æ’ä»¶id: com.android.library Testæµ‹è¯•å·¥ç¨‹æ’ä»¶id: com.android.test æ³¨ï¼šsrcç›®å½•ä¸‹çš„androidTestï¼Œmainï¼Œteståˆ†åˆ«æ˜¯3ä¸ªsourceSetï¼Œåˆ†åˆ«å¯¹åº”ï¼ŒAndroidå•å…ƒæµ‹è¯•ä»£ç ï¼ŒAndroid appä¸»ä»£ç å’Œèµ„æºï¼Œæ™®é€šå•å…ƒæµ‹è¯•ä»£ç ã€‚ åœ¨mainä¸­ï¼Œç‰¹æœ‰AndroidManifest.xmlå’Œresè¿™ä¸¤ä¸ªAndroidç‰¹æœ‰çš„ï¼Œç”¨äºŽæè¿°Android App é…ç½®å’Œèµ„æºæ–‡ä»¶ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Gradle</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Gradle</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è·¨å¹³å°Flutterrï¼ŒRNï¼ŒWeexå’ŒåŽŸç”ŸAndroidçš„æ¯”è¾ƒ]]></title>
    <url>%2Fposts%2F59072e32.html</url>
    <content type="text"><![CDATA[]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå¸¸ç”¨åº“å’Œæ’ä»¶]]></title>
    <url>%2Fposts%2Fbb30f1ae.html</url>
    <content type="text"><![CDATA[ä¸‹æ‹‰åˆ·æ–°PullLoadMoreRecyclerView å®žçŽ°RecyclerViewä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½æ›´å¤šä»¥åŠRecyclerViewçº¿æ€§ã€ç½‘æ ¼ã€ç€‘å¸ƒæµæ•ˆæžœæ¼”ç¤º https://github.com/WuXiaolong/PullLoadMoreRecyclerView start 1247 android-Ultra-Pull-To-Refresh è¿™æ˜¯çŽ°åœ¨å·²ç»åœæ­¢ç»´æŠ¤çš„ä¸‹æ‹‰åˆ·æ–°é¡¹ç›®çš„æ›¿ä»£æ–¹æ¡ˆã€‚ç»§æ‰¿äºŽViewGroupå¯ä»¥åŒ…å«ä»»ä½•Viewã€‚åŠŸèƒ½æ¯”SwipeRefreshLayoutå¼ºå¤§ã€‚ä½¿ç”¨èµ·æ¥éžå¸¸ç®€å•ã€‚è‰¯å¥½çš„è®¾è®¡ï¼Œå¦‚æžœä½ æƒ³å®šåˆ¶è‡ªå·±çš„UIæ ·å¼ï¼Œéžå¸¸ç®€å•ï¼Œå°±åƒç»™ListViewåŠ ä¸€ä¸ªHeader Viewé‚£ä¹ˆç®€å•ã€‚ https://github.com/liaohuqiu/android-Ultra-Pull-To-Refresh start 9322 SmartRefreshLayout ä¸‹æ‹‰åˆ·æ–°ã€ä¸Šæ‹‰åŠ è½½ã€äºŒçº§åˆ·æ–°ã€æ·˜å®äºŒæ¥¼ã€RefreshLayoutã€OverScrollï¼ŒAndroidæ™ºèƒ½ä¸‹æ‹‰åˆ·æ–°æ¡†æž¶ï¼Œæ”¯æŒè¶Šç•Œå›žå¼¹ã€è¶Šç•Œæ‹–åŠ¨ï¼Œå…·æœ‰æžå¼ºçš„æ‰©å±•æ€§ï¼Œé›†æˆäº†å‡ åç§ç‚«é…·çš„Headerå’Œ Footerã€‚ https://github.com/scwang90/SmartRefreshLayout start 14453 ä¸€ä¸ªå®žç”¨çš„å¤šæ¡ä»¶ç­›é€‰èœå•DropDownMenu ä¸€ä¸ªå®žç”¨çš„å¤šæ¡ä»¶ç­›é€‰èœå•ï¼Œåœ¨å¾ˆå¤šAppä¸Šéƒ½èƒ½çœ‹åˆ°è¿™ä¸ªæ•ˆæžœï¼Œå¦‚ç¾Žå›¢ï¼Œçˆ±å¥‡è‰ºç”µå½±ç¥¨ç­‰ https://github.com/dongjunkun/DropDownMenu start 2997 å¼ºå¤§æ˜“ç”¨çš„å®‰å“å·¥å…·ç±»åº“AndroidUtilCode æ˜¯ä¸€ä¸ªå¼ºå¤§æ˜“ç”¨çš„å®‰å“å·¥å…·ç±»åº“ï¼Œå®ƒåˆç†åœ°å°è£…äº†å®‰å“å¼€å‘ä¸­å¸¸ç”¨çš„å‡½æ•°ï¼Œå…·æœ‰å®Œå–„çš„ Demo å’Œå•å…ƒæµ‹è¯•ï¼Œåˆ©ç”¨å…¶å°è£…å¥½çš„ APIs å¯ä»¥å¤§å¤§æé«˜å¼€å‘æ•ˆçŽ‡ï¼Œå¦‚ä»Šå®ƒä¸»è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†æ¨¡å—ï¼Œå…¶ä¸€æ˜¯ä¸»å·¥å…·ç±»æ¨¡å—ï¼šutilcodeï¼Œå…¶ä¸­çš„å·¥å…·ç±»æ˜¯å¼€å‘ä¸­å¸¸ç”¨åˆ°çš„ï¼›å…¶äºŒæ˜¯å­å·¥å…·ç±»æ¨¡å—ï¼šsubutilï¼Œå®ƒåŒ…å«çš„å·¥å…·ç±»å¹¶ä¸æ˜¯å¾ˆå¸¸ç”¨ï¼Œå®ƒçš„å‡ºçŽ°æ˜¯ä¸ºäº†é˜²æ­¢ä¸»å·¥å…·ç±»çš„è‡ƒè‚¿ã€‚ https://github.com/Blankj/AndroidUtilCode start 20125 SuperUtils å›Šæ‹¬äº†ä¸€å¤§éƒ¨åˆ†Androidåº”ç”¨å¼€å‘è¿‡ç¨‹å½“ä¸­å¸¸ç”¨çš„å·¥å…·ç±»ã€‚å·¥å…·ç±»æ¥æºæ•´ç†è‡ªç½‘ç»œå’Œè‡ªå·±ç¼–å†™ã€‚ https://github.com/AllenCoder/SuperUtils start 310 Androidç¬¬ä¸‰æ–¹ç›¸å†Œé€‰æ‹©å™¨Matisse çŸ¥ä¹Žå¼€æºç›¸å†Œ https://github.com/hamuamu0/Matisse start 7881 ImagePicker å®Œå…¨ä»¿å¾®ä¿¡çš„å›¾ç‰‡é€‰æ‹© https://github.com/jeasonlzy/ImagePicker start 3262 PictureSelector ä¸€æ¬¾é’ˆå¯¹androidå¹³å°ä¸‹çš„å›¾ç‰‡é€‰æ‹©å™¨ï¼Œæ”¯æŒä»Žç›¸å†Œæˆ–æ‹ç…§é€‰æ‹©å›¾ç‰‡æˆ–è§†é¢‘ã€éŸ³é¢‘ï¼Œæ”¯æŒåŠ¨æ€æƒé™èŽ·å–ã€è£å‰ª(å•å›¾orå¤šå›¾è£å‰ª)ã€åŽ‹ç¼©ã€ä¸»é¢˜è‡ªå®šä¹‰é…ç½®ç­‰åŠŸèƒ½ã€é€‚é…android 6.0+ç³»ç»Ÿçš„å¼€æºå›¾ç‰‡é€‰æ‹©æ¡†æž¶ã€‚ https://github.com/LuckSiege/PictureSelector start 4762 ImagePicker ä¸€æ¬¾åŠŸèƒ½è¶…å¼ºçš„å›¾ç‰‡é€‰æ‹©å™¨ã€‚æ”¯æŒè¶…å¤§å›¾é¢„è§ˆ(æ¯”å¦‚10000*5000çš„å›¾)ï¼Œæ”¯æŒå›¾ç‰‡è£å‰ªï¼Œå¯é…ç½®å¤´åƒæ¨¡å¼å’Œæ™®é€šæ¨¡å¼ï¼Œæ”¯æŒåŠ¨æ€é…ç½®ImageLoaderä»¥æ”¯æŒå¤šç§å›¾ç‰‡åŠ è½½åº“ï¼Œä»¥åŠå®žçŽ°æµç•…çš„è·³è½¬åŠ¨ç”» https://github.com/martin90s/ImagePicker start 832 TakePhoto ä¸€æ¬¾ç”¨äºŽåœ¨Androidè®¾å¤‡ä¸ŠèŽ·å–ç…§ç‰‡ï¼ˆæ‹ç…§æˆ–ä»Žç›¸å†Œã€æ–‡ä»¶ä¸­é€‰æ‹©ï¼‰ã€è£å‰ªå›¾ç‰‡ã€åŽ‹ç¼©å›¾ç‰‡çš„å¼€æºå·¥å…·åº“ https://github.com/crazycodeboy/TakePhoto start 5553 Album https://github.com/yanzhenjie/Album start 1802 å¯ç”¨äºŽåŠ¨æ€ç”ŸæˆéªŒè¯ç ï¼Œå¸¸è§äºŽé‡‘èžç±»appVerificationCodeView https://github.com/Freshman111/VerificationCodeView start 354 ç±»ä¼¼äºŽå¾®ä¿¡ä¾§æ»‘è¿”å›žä¸Šä¸€çº§Activityçš„å·¥å…·SwipeBackHelper https://github.com/Jude95/SwipeBackHelper/blob/master/README_ch.md start 1266 SwipeBackLayout https://github.com/ikew0ng/SwipeBackLayout start 5352 Bannerè½®æ’­ViewPagerandroid-auto-scroll-view-pager https://github.com/Trinea/android-auto-scroll-view-pager start 1603 UltraViewPager UltraViewPageræ˜¯ä¸€ä¸ªå°è£…å¤šç§ç‰¹æ€§çš„ViewPagerï¼Œä¸»è¦æ˜¯ä¸ºå¤šé¡µé¢åˆ‡æ¢åœºæ™¯æä¾›ç»Ÿä¸€è§£å†³æ–¹æ¡ˆã€‚æ”¯æŒæ¨ªåˆ’ç«–åˆ’ï¼›æ”¯æŒä¸€å±å†…æ˜¾ç¤ºå¤šé¡µï¼›æ”¯æŒå¾ªçŽ¯æ»šåŠ¨ï¼›æ”¯æŒå®šæ—¶æ»šåŠ¨ï¼Œè®¡æ—¶å™¨ä½¿ç”¨Handlerå®žçŽ° https://github.com/alibaba/UltraViewPager start 3942 ViewPagerIndicator Indicator å–ä»£ tabhostï¼Œå®žçŽ°ç½‘æ˜“é¡¶éƒ¨tabï¼Œæ–°æµªå¾®åšä¸»é¡µåº•éƒ¨tabï¼Œå¼•å¯¼é¡µï¼Œæ— é™è½®æ’­bannerç­‰æ•ˆæžœï¼Œé«˜åº¦è‡ªå®šä¹‰tabå’Œç‰¹æ•ˆ https://github.com/LuckyJayce/ViewPagerIndicator start 2166 RecyclerViewPager æ‰©å½¢å¼çš„recyclerViewï¼Œé…åˆViewPagerå®žçŽ°å„ç§æ•ˆæžœ https://github.com/lsjwzh/RecyclerViewPager start 3149 banner Androidå¹¿å‘Šå›¾ç‰‡è½®æ’­æŽ§ä»¶ï¼Œæ”¯æŒæ— é™å¾ªçŽ¯å’Œå¤šç§ä¸»é¢˜ï¼Œå¯ä»¥çµæ´»è®¾ç½®è½®æ’­æ ·å¼ã€åŠ¨ç”»ã€è½®æ’­å’Œåˆ‡æ¢æ—¶é—´ã€ä½ç½®ã€å›¾ç‰‡åŠ è½½æ¡†æž¶ç­‰ï¼ https://github.com/youth5201314/banner start 6938 XBanner æ”¯æŒå›¾ç‰‡æ— é™è½®æ’­ï¼Œæ”¯æŒè‡ªå®šä¹‰æŒ‡ç¤ºç‚¹ã€æ˜¾ç¤ºæç¤ºæ–‡å­—ã€åˆ‡æ¢åŠ¨ç”»ç­‰ https://github.com/xiaohaibin/XBanner start 516 BGABanner-Android å¼•å¯¼ç•Œé¢æ»‘åŠ¨å¯¼èˆª + å¤§äºŽç­‰äºŽ1é¡µæ—¶æ— é™è½®æ’­ + å„ç§åˆ‡æ¢åŠ¨ç”»è½®æ’­æ•ˆæžœ https://github.com/bingoogolapple/BGABanner-Android start 2914 Androidå›¾ç‰‡åŽ‹ç¼©å·¥å…·Luban(é²ç­) å¯èƒ½æ˜¯æœ€æŽ¥è¿‘å¾®ä¿¡æœ‹å‹åœˆçš„å›¾ç‰‡åŽ‹ç¼©ç®—æ³• https://github.com/Curzibn/Luban start 8469 ä¾§æ»‘èœå•SlidingRootNav https://github.com/yarolegovich/SlidingRootNav start 2385 é€‰æ‹©å™¨Android-PickerView ä¸€æ¬¾ä»¿iOSçš„PickerViewæŽ§ä»¶ï¼Œæœ‰æ—¶é—´é€‰æ‹©å’Œé€‰é¡¹é€‰æ‹©ï¼Œå¹¶æ”¯æŒä¸€äºŒä¸‰çº§è”åŠ¨ï¼Œæ”¯æŒè‡ªå®šä¹‰æ ·å¼ https://github.com/Bigkoo/Android-PickerView start 8346 android-picker å®‰å“é€‰æ‹©å™¨ç±»åº“ï¼ŒåŒ…æ‹¬æ—¥æœŸé€‰æ‹©å™¨ã€æ—¶é—´é€‰æ‹©å™¨ã€å•é¡¹é€‰æ‹©å™¨ã€åŸŽå¸‚é€‰æ‹©å™¨ã€é¢œè‰²é€‰æ‹©å™¨ã€æ–‡ä»¶é€‰æ‹©å™¨ã€ç›®å½•é€‰æ‹©å™¨ã€æ•°å­—é€‰æ‹©å™¨ã€æ˜Ÿåº§é€‰æ‹©å™¨ã€ç”Ÿè‚–é€‰æ‹©å™¨ç­‰ï¼Œå¯è‡ªå®šä¹‰é¡¶éƒ¨åŠåº•éƒ¨ç•Œé¢ï¼Œå¯è‡ªå®šä¹‰çª—å£åŠ¨ç”»ã€‚ https://github.com/sevenli777/android-picker start 36 MultiType-FilePicker ç¬¬ä¸‰æ–¹é€‰æ‹©å™¨ï¼Œå¯ä»¥é€‰æ‹©æ–‡ä»¶ã€å›¾ç‰‡ https://github.com/fishwjy/MultiType-FilePicker ç®€æ´éªŒè¯ç è¾“å…¥æ¡†ï¼Œèƒ½è‡ªå®šä¹‰è¾“å…¥æ¡†ä¸ªæ•°å’Œæ ·å¼VerificationCodeInput https://github.com/liuguangli/VerificationCodeInput start 257 RecyclerViewIndexRecyclerView ä¸€æ¬¾è”ç³»äººé€‰æ‹©çš„recyclerViewåˆ—è¡¨ï¼Œæ”¯æŒé¡¶éƒ¨æ‚¬æµ®å’Œä¾§è¾¹æ»‘åŠ¨é¦–å­—æ¯é€‰æ‹© https://github.com/jiang111/IndexRecyclerView start 1114 ExpandableLayout ç‚¹å‡»å¯æ‰©å¤§éšè—åˆ—è¡¨ https://github.com/traex/ExpandableLayout start 1499 SwipeRecyclerView ä¾§æ»‘èœå•ï¼Œé•¿æŒ‰æ‹–æ‹½ï¼Œæ»‘åŠ¨åˆ é™¤ï¼Œè‡ªåŠ¨åŠ è½½æ›´å¤šï¼Œå’ŒViewPagerç»“åˆä½¿ç”¨ï¼Œå’Œä»»ä½•ä¸‹æ‹‰åˆ·æ–°æ¡†æž¶ç»“åˆä½¿ç”¨ã€‚ https://github.com/yanzhenjie/SwipeRecyclerView start 3446 IndexableRecyclerView è½»è½»æ¾å®žçŽ°ï¼šé€‰æ‹©åŸŽå¸‚ï¼Œé€‰æ‹©è”ç³»äººç­‰éœ€è¦ç´¢å¼•çš„åŠŸèƒ½æ¾å®žçŽ°ï¼šé€‰æ‹©åŸŽå¸‚ï¼Œé€‰æ‹©è”ç³»äººç­‰éœ€è¦ç´¢å¼•çš„åŠŸèƒ½ https://github.com/YoKeyword/IndexableRecyclerView start 982 Androidæ¢è‚¤ï¼å¤œé—´æ¨¡å¼çš„Androidæ¡†æž¶MultipleTheme https://github.com/dersoncheng/MultipleTheme start 1521 å¼ºå¤§çš„RecyclerAdapteræ¡†æž¶BaseRecyclerViewAdapterHelper https://github.com/CymChad/BaseRecyclerViewAdapterHelper start 3215 SuperAdapter https://github.com/byteam/SuperAdapter start 629 æ›´æ¢ä¸»é¢˜ã€è®¾ç½®çŠ¶æ€æ çš„å·¥å…·ç±»StatusBarUtil (å®žçŽ°æ²‰æµ¸æ çŠ¶æ€æ é¢œè‰²çŠ¶æ€) https://github.com/laobie/StatusBarUtil start 6211 MagicaSakura Android å¤šä¸»é¢˜æ¡†æž¶ https://github.com/Bilibili/MagicaSakura start 2915 DialogBasePopup æ‰“é€ é€šç”¨çš„popupwindow https://github.com/razerdp/BasePopup start 1618 AndroidBottomSheet åº•éƒ¨å¼¹å‡ºpopupwindow https://github.com/michael-rapp/AndroidBottomSheet start 300 BottomDialog è‡ªå®šä¹‰çš„ä»Žåº•éƒ¨å¼¹å‡ºçš„dialogï¼Œä»¿ç…§å¾®åšçš„åˆ†äº«å¼¹æ¡† https://github.com/Curzibn/BottomDialog start 375 AndroidSuperDialog æ”¯æŒè‡ªå®šä¹‰è¾¹æ¡†åœ†è§’ã€èƒŒæ™¯é€æ˜Žåº¦ã€å­—ä½“å¤§å°ä¸Žè‰²å€¼ç­‰ https://github.com/mylhyl/AndroidSuperDialog start 131 material-dialogs mdé£Žæ ¼çš„dialog https://github.com/afollestad/material-dialogs start 14288 Android-AlertView ä»¿iOSçš„AlertViewController å‡ ä¹Žå®Œç¾Žè¿˜åŽŸiOS çš„ AlertViewController ï¼ŒåŒæ—¶æ”¯æŒAlertå’ŒActionSheetæ¨¡å¼ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚éƒ½æ˜¯ç²¾é›•ç»†ç¢ï¼Œå¹¶æŠŠapiå°è£…æˆæ‡’åˆ°æžè‡´æ¨¡å¼ï¼Œä¸€è¡Œä»£ç å°±å¯ä»¥è¿›è¡Œå¼¹çª—. https://github.com/Bigkoo/Android-AlertView start 1212 åŠ è½½LoadingLoadingLayout é¡¹ç›®é‡Œéƒ½ä¼šé‡åˆ°å‡ ç§é¡µé¢ï¼Œåˆ†åˆ«ä¸ºåŠ è½½ä¸­ã€æ— ç½‘ç»œã€æ— æ•°æ®ã€å‡ºé”™å››ç§æƒ…å†µï¼Œç»å¸¸è¦ä½¿ç”¨ï¼Œæ‰€ä»¥å°æˆåº“å¼•ç”¨äº† https://github.com/weavey/LoadingLayoutDemo start 634 NumberProgressBar å¸¦æ•°å­—çš„è¿›åº¦æ¡æ»šåŠ¨ https://github.com/daimajia/NumberProgressBar start 5162 KProgressHUD ä»¿iOSåŠ è½½ https://github.com/Kaopiz/KProgressHUD start 1128 GifLoadingView https://github.com/Rogero0o/GifLoadingView start 1177 éŸ³ä¹æ’­æ”¾Timber MDé£Žæ ¼çš„éŸ³ä¹æ’­æ”¾ https://github.com/naman14/Timber start 5145 CustomLrcView-master è‡ªå®šä¹‰æ˜¾ç¤ºæ­Œè¯çš„æŽ§ä»¶ï¼Œå®žçŽ°äº†æ­Œè¯çš„å¹³æ»‘å‘ä¸Šæ»šåŠ¨ï¼Œå½“é«˜äº®æ­Œè¯å®½åº¦è¶…è¿‡äº†viewçš„å®½çš„æ—¶å€™ï¼Œæ°´å¹³æ»šåŠ¨ https://github.com/android-lili/CustomLrcView-master start 109 LyricViewDemo æ­Œè¯æ˜¾ç¤º https://github.com/zhengken/LyricViewDemo start 576 æ•°æ®åº“LitePal https://github.com/LitePalFramework/LitePal start 5343 realm-java https://github.com/realm/realm-java start 9941 greenDAO https://github.com/greenrobot/greenDAO start 10559 åŠ¨ç”»åº“lottie-android æ”¯æŒè·¨å¹³å°åŠ¨ç”»åº“ï¼Œç”±UIè®¾è®¡æŒ‡å®šåˆ‡jsonï¼Œå°†jsonåŠ è½½å‡ºæ¥å®žçŽ°åŠ¨ç”» https://github.com/airbnb/lottie-android start 22620 TransitionHelper ä¸€ä¸ªç®€å•çš„Activityè½¬åœºåŠ¨ç”» å·¥å…·ç±» https://github.com/ImmortalZ/TransitionHelper start 1569 TranslationCompat é¡µé¢è¿‡æ¸¡åŠ¨ç”»å…¼å®¹åº“ï¼Œå…¼å®¹Android5.0ä¹‹åŽè½¬åœºåŠ¨ç”»è‡³Android4.0ã€‚ https://github.com/zhangke3016/TranslationCompat start 259 android-pathview SVGåŠ¨ç”»åº“ https://github.com/geftimov/android-pathview start 2485 å›¾è¡¨ç±»å·¥å…·MPAndroidChart è‚¡ç¥¨æŠ˜çº¿å›¾ã€é¥¼çŠ¶å›¾ç­‰ https://github.com/PhilJay/MPAndroidChart start 24227 KChartView è‚¡ç¥¨kçº¿å›¾ https://github.com/tifezh/KChartView start 356 hellocharts-android https://github.com/lecho/hellocharts-android start 6126 æ³¢æµªæ•ˆæžœWaveView https://github.com/gelitenight/WaveView start 1328 Androidå¼€æºé¡¹ç›®åŠåº“TimLiu-Android https://github.com/Tim9Liu9/TimLiu-Android#UI start 2334 æ’­æ”¾å™¨PLDroidPlayer ä¸ƒç‰›æŽ¨å‡ºçš„ä¸€æ¬¾å…è´¹çš„é€‚ç”¨äºŽ Android å¹³å°çš„æ’­æ”¾å™¨ SDKï¼Œé‡‡ç”¨å…¨è‡ªç ”çš„è·¨å¹³å°æ’­æ”¾å†…æ ¸ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„åŠŸèƒ½å’Œä¼˜å¼‚çš„æ€§èƒ½ï¼Œå¯é«˜åº¦å®šåˆ¶åŒ–å’ŒäºŒæ¬¡å¼€å‘ https://github.com/pili-engineering/PLDroidPlayer start 3518 æ ‡é¢˜å¯¼èˆªæ ByeBurger è¿™æ˜¯ä¸€ä¸ªæžå…¶ç®€ä¾¿çš„å¿«é€Ÿå®žçŽ°éšè—æ ‡é¢˜æ å’Œå¯¼èˆªæ çš„åº“ã€‚ https://github.com/githubwing/ByeBurger start 1061 ç½‘ç»œåŠ è½½okhttp-OkGo å…¨æ–°å®Œç¾Žæ”¯æŒRxJavaï¼Œæ¯”Retrofitæ›´ç®€å•æ˜“ç”¨ã€‚è¯¥åº“æ˜¯å°è£…äº†okhttpçš„æ ‡å‡†RESTfulé£Žæ ¼çš„ç½‘ç»œæ¡†æž¶ï¼Œæ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ï¼Œä¸Šä¼ è¿›åº¦å›žè°ƒï¼Œä¸‹è½½è¿›åº¦å›žè°ƒï¼Œè¡¨å•ä¸Šä¼ ï¼ˆå¤šæ–‡ä»¶å’Œå¤šå‚æ•°ä¸€èµ·ä¸Šä¼ ï¼‰ï¼Œé“¾å¼è°ƒç”¨ï¼Œå¯ä»¥è‡ªå®šä¹‰è¿”å›žå¯¹è±¡ï¼Œæ”¯æŒHttpså’Œè‡ªç­¾åè¯ä¹¦ï¼Œæ”¯æŒè¶…æ—¶è‡ªåŠ¨é‡è¿žï¼Œæ”¯æŒcookieçš„æŒä¹…åŒ–å’Œè‡ªåŠ¨ç®¡ç†ï¼Œæ”¯æŒäº”ç§ç¼“å­˜æ¨¡å¼ç¼“å­˜ç½‘ç»œæ•°æ®ï¼Œæ”¯æŒ301å’Œ302é‡å®šå‘ï¼Œæ‰©å±•äº†ç»Ÿä¸€çš„ä¸Šä¼ ç®¡ç†å’Œä¸‹è½½ç®¡ç†åŠŸèƒ½ https://github.com/jeasonlzy/okhttp-OkGo start 8221 NoHttp Androidå®žçŽ°Httpæ ‡å‡†åè®®æ¡†æž¶ï¼Œæ”¯æŒå¤šç§ç¼“å­˜æ¨¡å¼ï¼Œåº•å±‚å¯åŠ¨æ€åˆ‡æ¢OkHttpã€URLConnectionã€‚ https://github.com/yanzhenjie/NoHttp start 3525 OkHttpFinal OkHttpå°è£…çš„ä¸€ä¸ªç®€å•æ˜“ç”¨HTTPè¯·æ±‚ https://github.com/pengjianbo/OkHttpFinal start 770 okhttputils okhttpçš„è¾…åŠ©ç±» https://github.com/hongyangAndroid/okhttputils start 6402 äºŒç»´ç android-zxingLibrary å‡ è¡Œä»£ç å¿«é€Ÿé›†æˆäºŒç»´ç æ‰«æåŠŸèƒ½ https://github.com/yipianfengye/android-zxingLibrary start 3531 QRCode-Android äºŒç»´ç ã€æ¡å½¢ç é€šç”¨æ‰«æ https://github.com/XuDaojie/QRCode-Android start 362 QrCodeScan Androidæ‰‹æœºå®¢æˆ·ç«¯äºŒç»´ç æ‰«æ https://github.com/chentao0707/QrCodeScan start 1080 è‡ªå®šä¹‰é”®ç›˜CustomizeKeyboard å®Œå…¨è‡ªå®šä¹‰çš„Androidå®‰å…¨é”®ç›˜ https://github.com/StomHong/CustomizeKeyboard start 312 è“ç‰™æ“ä½œåº“BluetoothHelper https://github.com/a-voyager/BluetoothHelper start 1111 ç‰ˆæœ¬æ›´æ–°CheckVersionLib ç‰ˆæœ¬æ£€æµ‹å‡çº§ï¼ˆæ›´æ–°ï¼‰åº“ã€‚ https://github.com/AlexLiuSheng/CheckVersionLib start 1432 UpdateApp å¼€ç®±å³ç”¨çš„appæ›´æ–°ï¼Œä¸»è¦è´Ÿè´£è½¯ä»¶ä¸‹è½½ã€è½¯ä»¶å®‰è£…ç­‰ Permissionå’ŒServiceé»˜è®¤æ·»åŠ åœ¨aaråŒ…é‡Œé¢çš„ï¼Œå¦‚æžœä½¿ç”¨gradleä¸éœ€è¦ åœ¨æ„ä¸‹é¢çš„é…ç½®äº†ã€‚ https://github.com/yaming116/UpdateApp start 327 ç¼“å­˜ASimpleCache ä¸€ä¸ªä¸ºandroidåˆ¶å®šçš„ è½»é‡çº§çš„ å¼€æºç¼“å­˜æ¡†æž¶ã€‚è½»é‡åˆ°åªæœ‰ä¸€ä¸ªjavaæ–‡ä»¶ï¼ˆç”±åå‡ ä¸ªç±»ç²¾ç®€è€Œæ¥ï¼‰ https://github.com/yangfuhai/ASimpleCache start 3147 æƒé™ç®¡ç†AndPermission https://github.com/yanzhenjie/AndPermission start 4525 FcPermissions https://github.com/lypeer/FcPermissions start 406 RxPermissions https://github.com/tbruyelle/RxPermissions start 7166 Tagæ ‡ç­¾AndroidTagGroup https://github.com/2dxgujun/AndroidTagGroup start 2168 æ‰‹åŠ¿å¯†ç è§£é”LockPattern ä»¿æ”¯ä»˜å®æ‰‹åŠ¿å¯†ç è§£é” https://github.com/sym900728/LockPattern start 184 PatternLockView MDé£Žæ ¼çš„æ‰‹æœºå¯†ç è§£é” https://github.com/aritraroy/PatternLockView start 2219 BlurLockView é«˜æ–¯æ¨¡ç³Šé”å±ç•Œé¢ https://github.com/Nightonke/BlurLockView start 987 AppLock AppLockåº”ç”¨é”ï¼Œä¿æŠ¤ä½ çš„éšç§ã€‚ https://github.com/lizixian18/AppLock start 463 LolliPin Pinè§£é” https://github.com/omadahealth/LolliPin start 1480 PinLockView MDé£Žæ ¼Pinè§£é” https://www.cnblogs.com/abao0/p/6726763.html start 1145]]></content>
      <categories>
        <category>Android</category>
        <category>æ’ä»¶åº“</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Studioè‡ªå®šä¹‰æ³¨é‡Šæ¨¡æ¿]]></title>
    <url>%2Fposts%2Fd339abc3.html</url>
    <content type="text"><![CDATA[ä»£ç çš„æ³¨é‡Šæ˜¯æˆ‘ä»¬å¹³æ—¶å¿…é¡»é¢å¯¹çš„é—®é¢˜ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•è‡ªå®šä¹‰å±žäºŽè‡ªå·±çš„æ³¨é‡Šæ¨¡æ¿ï¼Œæé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆçŽ‡ã€‚ 1.æ–°å»ºçš„ç±»è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Šï¼› 2.è‡ªå®šä¹‰æ³¨é‡Šæ¨¡æ¿ã€‚ æ–°å»ºç±»è‡ªåŠ¨ç”Ÿæˆçš„æ³¨é‡Š1.æ‰“å¼€ç›¸åº”çš„è®¾ç½®ï¼šâ€‹ Fileâ€“&gt;Settingsâ€“&gt;Editorâ€“&gt;File and code Templateã€‚ é€‰æ‹©Filesä¸­çš„Class åœ¨ä¸Šé¢æ·»åŠ ä½ æƒ³è¦æ·»åŠ çš„æ³¨é‡Šï¼š ä¸‹é¢æœ‰ä¸€äº›å˜é‡å¯ä»¥é€‰æ‹©ï¼š {USER} ï¼šè¡¨ç¤ºä½ ç³»ç»Ÿåå­—ï¼›{DATE}ï¼š è¡¨ç¤ºå½“å‰æ—¶é—´ï¼›{NAME}:è¡¨ç¤ºç±»åã€‚è€Œä¸”åŽé¢éƒ½æœ‰æ³¨é‡Šï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½èƒ½çœ‹å¾—æ‡‚ã€‚ è¿™æ˜¯è®¾ç½®åŽçš„ç»“æžœç”»é¢ï¼š è¿™è¾¹æœ‰è®¸å¤šå˜é‡å¯ä»¥å¼•ç”¨ï¼Œæƒ³è¦å“ªäº›å˜é‡ï¼Œæˆ–è€…æƒ³è‡ªå®šä¹‰æˆä»€ä¹ˆæ ·çš„æ³¨é‡Šï¼Œå°±çœ‹ä½ è‡ªå·±çš„æƒ³è±¡åŠ›äº†ã€‚ ä¸‡èƒ½æ³¨é‡Šæ¨¡æ¿ Javaç¯‡1.æ‰“å¼€ç›¸åº”ä½ç½®ï¼š Fileâ€“&gt;Settingâ€“&gt;Editorâ€“&gt;LiveTemplateï¼š 2.æ–°å»ºä¸€ä¸ªLive Group: ç‚¹å‡»å³è¾¹çš„+å·ï¼Œé€‰æ‹©Template Group,å‘½åè‡ªå·±çš„ä¸€ä¸ªæ³¨é‡ŠåŒ…ã€‚æˆ‘è‡ªå·±å‘½åä¸ºZm Template Groupã€‚ 3.æ–°å»ºä¸€ä¸ªLIve Templateï¼š åœ¨ä½ åˆšåˆšæ–°å»ºçš„groupä¸‹ç‚¹å‡»+å·ï¼Œæ–°å»ºä¸€ä¸ªLive Template: Abbraviation:æ˜¯ä½ è®¾ç½®çš„å¿«æ·é”®ï¼Œæˆ‘çš„å¿«æ·é”®æ˜¯zã€‚ Expand with :è¡¥å…¨ä½ çš„æ³¨é‡Šçš„å¿«æ·é”®ï¼Œé»˜è®¤ä¸ºTAB,æˆ‘æ”¹ä¸ºäº†Enterã€‚ 4.æ·»åŠ ä½ çš„æ³¨é‡Šï¼š åœ¨ä¸‹é¢è‡ªå®šä¹‰ä½ æƒ³è¦çš„æ³¨é‡Šï¼Œè¿™è¾¹çš„æ³¨é‡Šæœ‰ç‚¹ä¸åŒäº†ï¼Œè¿™è¾¹å¯ä»¥è‡ªå®šä¹‰å˜é‡åï¼Œæ ¼å¼å’Œæˆ‘çš„ä¸€æ ·ï¼Œç”¨åŒ$åŒ…èµ·æ¥ã€‚ 123456/** * @author $user$ * @email zm@zhangmiao.cc * @date $date$ $time$ * @describe $desc$ */ 5.ç‚¹å‡»Edit Variablesï¼Œåœ¨Expressioné€‰æ‹©ä½ éœ€è¦æ–¹æ³•ï¼Œç›¸å½“äºŽç»™ä½ çš„å˜é‡èµ‹å€¼: 6.é€‰æ‹©ä½ è¦è¿ç”¨çš„åœ°æ–¹ï¼š ä½ å¯ä»¥é€‰æ‹©Javaï¼ŒC++ ç­‰ç­‰ã€‚ ç‚¹å‡»Applyã€‚å°±æˆåŠŸäº†ï¼Œä¸‹é¢è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæžœï¼š]]></content>
      <categories>
        <category>Android</category>
        <category>æ³¨é‡Šæ¨¡æ¿</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>æ³¨é‡Šæ¨¡æ¿</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[androidç¼–è¯‘implementã€apiå’ŒcompileåŒºåˆ«]]></title>
    <url>%2Fposts%2Fde9d44d2.html</url>
    <content type="text"><![CDATA[2017 å¹´google åŽï¼ŒAndroid studioç‰ˆæœ¬æ›´æ–°è‡³3.0ï¼Œæ›´æ–°ä¸­ï¼Œè¿žå¸¦ç€com.android.tools.build:gradle å·¥å…·ä¹Ÿå‡çº§åˆ°äº†3.0.0ï¼Œåœ¨3.0.0ä¸­ä½¿ç”¨äº†æœ€æ–°çš„Gralde 4.0 é‡Œç¨‹ç¢‘ç‰ˆæœ¬ä½œä¸ºgradleçš„ç¼–è¯‘ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬gradleç¼–è¯‘é€Ÿåº¦æœ‰æ‰€åŠ é€Ÿï¼Œæ›´åŠ æ¬£å–œçš„æ˜¯ï¼Œå®Œå…¨æ”¯æŒJava8ã€‚ å½“ç„¶ï¼Œå¯¹äºŽKotlinçš„æ”¯æŒï¼Œåœ¨è¿™ä¸ªç‰ˆæœ¬ä¹Ÿæœ‰æ‰€ä½“çŽ°ï¼ŒKotlinæ’ä»¶é»˜è®¤æ˜¯å®‰è£…çš„ã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹æ–°å»ºä¸€ä¸ªé¡¹ç›®åœ¨Moudleä¸­çš„ dependencies ä¸­çš„å˜åŒ–ã€‚ 12345678dependencies &#123; implementation fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;]) implementation &apos;com.android.support:appcompat-v7:26.1.0&apos; implementation &apos;com.android.support.constraint:constraint-layout:1.0.2&apos; testImplementation &apos;junit:junit:4.12&apos; androidTestImplementation &apos;com.android.support.test:runner:1.0.1&apos; androidTestImplementation &apos;com.android.support.test.espresso:espresso-core:3.0.1&apos;&#125; ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ä»–ä»¬ä¹‹å‰çš„å·®å¼‚ï¼š é¦–å…ˆæ˜¯2.xç‰ˆæœ¬çš„ä¾èµ–æ–¹å¼ å†æ¥çœ‹çœ‹3.0çš„ å¯ä»¥çœ‹åˆ°åœ¨Android studio3.0ä¸­ï¼Œcompileä¾èµ–å…³ç³»å·²è¢«å¼ƒç”¨ï¼Œè¢«implementationå’Œapiæ›¿ä»£ï¼Œprovidedè¢«compile onlyæ›¿ä»£ï¼Œapkè¢«runtime onlyæ›¿ä»£ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹implementationå’Œapiçš„åŒºåˆ«ï¼š apiï¼šè·Ÿ 2.x ç‰ˆæœ¬çš„ compileå®Œå…¨ç›¸åŒimplementationï¼šä½¿ç”¨äº†è¯¥å‘½ä»¤ç¼–è¯‘çš„ä¾èµ–ï¼Œå®ƒä»…ä»…å¯¹å½“å‰çš„Moudleæä¾›æŽ¥å£ã€‚ä¾‹å¦‚æˆ‘ä»¬å½“å‰é¡¹ç›®ç»“æž„å¦‚ä¸‹ LibraryA ä¸­å¼•ç”¨äº† LibraryC çš„åº“ï¼Œå¦‚æžœå¯¹ LibraryC çš„ä¾èµ–ç”¨çš„æ˜¯ implementation å…³é”®å­—ã€‚ å¦‚ä¸‹ï¼š 1234dependencies &#123; . . . . implementation projectï¼ˆpathï¼š&apos;ï¼šlibraryC&apos;ï¼‰&#125; é‚£ä¹ˆLibraryC ä¸­çš„æŽ¥å£ï¼Œä»…ä»…åªèƒ½ç»™ LibraryA ä½¿ç”¨ï¼Œè€Œæˆ‘ä»¬çš„ App Moudle æ˜¯æ— æ³•è®¿é—®åˆ° LibraryC æä¾›çš„æŽ¥å£çš„ï¼Œä¹Ÿå°±æ˜¯å°†è¯¥ä¾èµ–éšè—åœ¨å†…éƒ¨ï¼Œè€Œä¸å¯¹å¤–éƒ¨å…¬å¼€ã€‚è¿™å°±æ˜¯implementationå…³é”®å­—çš„ä½œç”¨ã€‚ api æŒ‡ä»¤ å®Œå…¨ç­‰åŒäºŽcompileæŒ‡ä»¤ï¼Œæ²¡åŒºåˆ«ï¼Œä½ å°†æ‰€æœ‰çš„compileæ”¹æˆapiï¼Œå®Œå…¨æ²¡æœ‰é”™ã€‚ implementæŒ‡ä»¤ è¿™ä¸ªæŒ‡ä»¤çš„ç‰¹ç‚¹å°±æ˜¯ï¼Œå¯¹äºŽä½¿ç”¨äº†è¯¥å‘½ä»¤ç¼–è¯‘çš„ä¾èµ–ï¼Œå¯¹è¯¥é¡¹ç›®æœ‰ä¾èµ–çš„é¡¹ç›®å°†æ— æ³•è®¿é—®åˆ°ä½¿ç”¨è¯¥å‘½ä»¤ç¼–è¯‘çš„ä¾èµ–ä¸­çš„ä»»ä½•ç¨‹åºï¼Œä¹Ÿå°±æ˜¯å°†è¯¥ä¾èµ–éšè—åœ¨å†…éƒ¨ï¼Œè€Œä¸å¯¹å¤–éƒ¨å…¬å¼€ã€‚ å»ºè®®åœ¨Google IO ç›¸å…³è¯é¢˜çš„ä¸­æåˆ°äº†ä¸€ä¸ªå»ºè®®ï¼Œå°±æ˜¯ä¾èµ–é¦–å…ˆåº”è¯¥è®¾ç½®ä¸ºimplementçš„ï¼Œå¦‚æžœæ²¡æœ‰é”™ï¼Œé‚£å°±ç”¨implementï¼Œå¦‚æžœæœ‰é”™ï¼Œé‚£ä¹ˆä½¿ç”¨apiæŒ‡ä»¤ï¼Œè¿™æ ·ä¼šä½¿ç¼–è¯‘é€Ÿåº¦æœ‰æ‰€å¢žå¿«ã€‚ é‚£ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š 1. åŠ å¿«ç¼–è¯‘é€Ÿåº¦ã€‚2. éšè—å¯¹å¤–ä¸å¿…è¦çš„æŽ¥å£ã€‚ ä¸ºä»€ä¹ˆèƒ½åŠ å¿«ç¼–è¯‘é€Ÿåº¦å‘¢ï¼Ÿ è¿™å¯¹äºŽå¤§åž‹é¡¹ç›®å«æœ‰å¤šä¸ªMoudleæ¨¡å—çš„ï¼Œ ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œæ¯”å¦‚æˆ‘ä»¬æ”¹åŠ¨ LibraryC æŽ¥å£çš„ç›¸å…³ä»£ç ï¼Œè¿™æ—¶å€™ç¼–è¯‘åªéœ€è¦å•ç‹¬ç¼–è¯‘LibraryAæ¨¡å—å°±è¡Œï¼Œ å¦‚æžœä½¿ç”¨çš„æ˜¯apiæˆ–è€…æ—§æ—¶ä»£çš„compileï¼Œç”±äºŽApp Moudle ä¹Ÿå¯ä»¥è®¿é—®åˆ° LibraryC,æ‰€ä»¥ App Moudleéƒ¨åˆ†ä¹Ÿéœ€è¦é‡æ–°ç¼–è¯‘ã€‚å½“ç„¶è¿™æ˜¯åœ¨å…¨ç¼–çš„æƒ…å†µä¸‹ã€‚ è¿˜ä¸ç†Ÿæ‚‰ 2.x ç‰ˆæœ¬ä¾èµ–çš„å¯ä»¥çœ‹çœ‹ä¸‹é¢çš„è¯´æ˜Žï¼Œæ‹¬å·é‡Œå¯¹åº”çš„æ˜¯ 3.0 ç‰ˆæœ¬çš„ä¾èµ–æ–¹å¼ã€‚ compileï¼ˆapiï¼‰è¿™ç§æ˜¯æˆ‘ä»¬æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œä½¿ç”¨è¯¥æ–¹å¼ä¾èµ–çš„åº“å°†ä¼šå‚ä¸Žç¼–è¯‘å’Œæ‰“åŒ…ã€‚ å½“æˆ‘ä»¬ä¾èµ–ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°com.android.supportå†²çªçš„é—®é¢˜ï¼Œå°±æ˜¯å› ä¸ºå¼€å‘è€…ä½¿ç”¨çš„compileä¾èµ–çš„com.android.supportåŒ…ï¼Œè€Œä»–æ‰€ä¾èµ–çš„åŒ…ä¸Žæˆ‘ä»¬æœ¬åœ°æ‰€ä¾èµ–çš„com.android.supportåŒ…ç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å°±ä¼šæŠ¥All com.android.support libraries must use the exact same version specification (mixing versions can lead to runtime crashesè¿™ä¸ªé”™è¯¯ã€‚ è§£å†³åŠžæ³•å¯ä»¥çœ‹è¿™ç¯‡åšå®¢ï¼šcom.android.supportå†²çªçš„è§£å†³åŠžæ³• providedï¼ˆcompileOnlyï¼‰åªåœ¨ç¼–è¯‘æ—¶æœ‰æ•ˆï¼Œä¸ä¼šå‚ä¸Žæ‰“åŒ… å¯ä»¥åœ¨è‡ªå·±çš„moudleä¸­ä½¿ç”¨è¯¥æ–¹å¼ä¾èµ–ä¸€äº›æ¯”å¦‚com.android.supportï¼Œgsonè¿™äº›ä½¿ç”¨è€…å¸¸ç”¨çš„åº“ï¼Œé¿å…å†²çªã€‚ apkï¼ˆruntimeOnlyï¼‰åªåœ¨ç”Ÿæˆapkçš„æ—¶å€™å‚ä¸Žæ‰“åŒ…ï¼Œç¼–è¯‘æ—¶ä¸ä¼šå‚ä¸Žï¼Œå¾ˆå°‘ç”¨ã€‚ testCompileï¼ˆtestImplementationï¼‰testCompile åªåœ¨å•å…ƒæµ‹è¯•ä»£ç çš„ç¼–è¯‘ä»¥åŠæœ€ç»ˆæ‰“åŒ…æµ‹è¯•apkæ—¶æœ‰æ•ˆã€‚ debugCompileï¼ˆdebugImplementationï¼‰debugCompile åªåœ¨ debug æ¨¡å¼çš„ç¼–è¯‘å’Œæœ€ç»ˆçš„ debug apk æ‰“åŒ…æ—¶æœ‰æ•ˆ releaseCompileï¼ˆreleaseImplementationï¼‰Release compileä»…ä»…é’ˆå¯¹ Release æ¨¡å¼çš„ç¼–è¯‘å’Œæœ€ç»ˆçš„ Release apk æ‰“åŒ…ã€‚ å‚è€ƒé“¾æŽ¥ï¼š Android Studio3.xæ–°çš„ä¾èµ–æ–¹å¼ï¼ˆimplementationã€apiã€compileOnlyï¼‰ è¿˜å†ç”¨compileä¾èµ–ï¼Ÿé‚£ä½ å°±è½åŽå•¦ android gradle tools 3.X ä¸­ä¾èµ–ï¼Œimplementã€api æŒ‡ä»¤]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå¿«é€Ÿå¼€å‘æ¡†æž¶æŽ¨è10ä¸ªæ¡†æž¶]]></title>
    <url>%2Fposts%2F7a5476f9.html</url>
    <content type="text"><![CDATA[ä¸€ã€ Afinalå®˜æ–¹ä»‹ç»ï¼š Afinalæ˜¯ä¸€ä¸ªAndroidçš„iocï¼Œormæ¡†æž¶ï¼Œå†…ç½®äº†å››å¤§æ¨¡å—åŠŸèƒ½ï¼šFinalAcitivity,FinalBitmap,FinalDb,FinalHttpã€‚é€šè¿‡finalActivityï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨è§£çš„æ–¹å¼è¿›è¡Œç»‘å®šuiå’Œäº‹ä»¶ã€‚é€šè¿‡finalBitmapï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„åŠ è½½bitmapå›¾ç‰‡ï¼Œè€Œæ— éœ€è€ƒè™‘oomç­‰é—®é¢˜ã€‚é€šè¿‡finalDBæ¨¡å—ï¼Œæˆ‘ä»¬ä¸€è¡Œä»£ç å°±å¯ä»¥å¯¹androidçš„sqliteæ•°æ®åº“è¿›è¡Œå¢žåˆ æ”¹æŸ¥ã€‚é€šè¿‡FinalHttpæ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ajaxå½¢å¼è¯·æ±‚httpæ•°æ®ã€‚è¯¦æƒ…è¯·é€šè¿‡ä»¥ä¸‹ç½‘å€æŸ¥çœ‹ã€‚ Afinal æ˜¯ä¸€ä¸ªandroidçš„sqlite orm å’Œ ioc æ¡†æž¶ã€‚åŒæ—¶å°è£…äº†androidä¸­çš„httpæ¡†æž¶ï¼Œä½¿å…¶æ›´åŠ ç®€å•æ˜“ç”¨ï¼› ä½¿ç”¨finalBitmapï¼Œæ— éœ€è€ƒè™‘bitmapåœ¨androidä¸­åŠ è½½çš„æ—¶å€™oomçš„é—®é¢˜å’Œå¿«é€Ÿæ»‘åŠ¨çš„æ—¶å€™å›¾ç‰‡åŠ è½½ä½ç½®é”™ä½ç­‰é—®é¢˜ã€‚ Afinalçš„å®—æ—¨æ˜¯ç®€æ´ï¼Œå¿«é€Ÿã€‚çº¦å®šå¤§äºŽé…ç½®çš„æ–¹å¼ã€‚å°½é‡ä¸€è¡Œä»£ç å®Œæˆæ‰€æœ‰äº‹æƒ…ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/yangfuhai/afinal åŠŸèƒ½ï¼š ä¸€ä¸ªandroidçš„iocï¼Œormæ¡†æž¶ï¼Œå†…ç½®äº†å››å¤§æ¨¡å—åŠŸèƒ½ï¼šFinalAcitivity,FinalBitmap,FinalDb,FinalHttpã€‚é€šè¿‡finalActivityï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨è§£çš„æ–¹å¼è¿›è¡Œç»‘å®šuiå’Œäº‹ä»¶ã€‚é€šè¿‡finalBitmapï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„åŠ è½½bitmapå›¾ç‰‡ï¼Œè€Œæ— éœ€è€ƒè™‘oomç­‰é—®é¢˜ã€‚é€šè¿‡finalDBæ¨¡å—ï¼Œæˆ‘ä»¬ä¸€è¡Œä»£ç å°±å¯ä»¥å¯¹androidçš„sqliteæ•°æ®åº“è¿›è¡Œå¢žåˆ æ”¹æŸ¥ã€‚é€šè¿‡FinalHttpæ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ajaxå½¢å¼è¯·æ±‚httpæ•°æ®ã€‚ ä¼˜ç‚¹ï¼šåŠŸèƒ½æ¯”è¾ƒå…¨é¢ï¼Œæ–‡æ¡£å®Œå–„ï¼Œä»£ç æ•ˆçŽ‡æ¯”è¾ƒé«˜ã€‚ ç¼ºç‚¹ï¼šæ²¡æœ‰é¡¹ç›®demoï¼Œæ¡†æž¶çš„æ—¶é—´æ¯”è¾ƒä¹…ï¼Œä»£ç å†—ä½™æ¯”è¾ƒå¤šï¼ˆè¿™ä¹Ÿæ˜¯æ— å¯é¿å…çš„ï¼‰ï¼Œæ–‡æ¡£æ¯”è¾ƒè€è·Ÿä¸ä¸Šä»£ç æ›´æ–°è¿›åº¦ã€‚ ï¼ˆè¿™ä¸ªè¯„ä»·æ˜¯å…¶ä»–é«˜äººè¯„çš„ï¼Œä»–è‡ªå·±ä¹Ÿæœ‰å†™äº†æ¡†æž¶ã€‚æˆ‘ä¸ªäººè§‰å¾—ä»¥å‰Afinalç®—æ˜¯ç»å…¸äº† ç”¨çš„äººå¤šï¼‰ã€‚ äºŒã€ xUtilsGitåœ°å€ï¼šhttps://github.com/wyouflf/xUtils xUtilsï¼šå¯ä»¥è¯´æ˜¯Afinalçš„å‡çº§ç‰ˆã€‚ xUtils åŒ…å«äº†å¾ˆå¤šå®žç”¨çš„androidå·¥å…·ã€‚ xUtils æ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼ ï¼Œæ›´å…¨é¢çš„httpè¯·æ±‚åè®®æ”¯æŒ(10ç§è°“è¯)ï¼Œæ‹¥æœ‰æ›´åŠ çµæ´»çš„ORMï¼Œæ›´å¤šçš„äº‹ä»¶æ³¨è§£æ”¯æŒä¸”ä¸å—æ··æ·†å½±å“â€¦ xUitls æœ€ä½Žå…¼å®¹android 2.2 (api level 8) ä¸‰ã€ ThinkAndroidé¡¹ç›®åœ°å€ï¼šhttps://github.com/white-cat/ThinkAndroid å®˜æ–¹ä»‹ç»ï¼š ThinkAndroidæ˜¯ä¸€ä¸ªå…è´¹çš„å¼€æºçš„ã€ç®€æ˜“çš„ã€éµå¾ªApache2å¼€æºåè®®å‘å¸ƒçš„Androidå¼€å‘æ¡†æž¶ï¼Œå…¶å¼€å‘å®—æ—¨æ˜¯ç®€å•ã€å¿«é€Ÿçš„è¿›è¡ŒAndroidåº”ç”¨ç¨‹åºçš„å¼€å‘ï¼ŒåŒ…å«Android mvcã€ç®€æ˜“sqlite ormã€iocæ¨¡å—ã€å°è£…Android httpclitentçš„httpæ¨¡å—,å…·æœ‰å¿«é€Ÿæž„å»ºæ–‡ä»¶ç¼“å­˜åŠŸèƒ½ï¼Œæ— éœ€è€ƒè™‘ç¼“å­˜æ–‡ä»¶çš„æ ¼å¼ï¼Œéƒ½å¯ä»¥éžå¸¸è½»æ¾çš„å®žçŽ°ç¼“å­˜ï¼Œå®ƒè¿˜åŸºäºŽæ–‡ä»¶ç¼“å­˜æ¨¡å—å®žçŽ°äº†å›¾ç‰‡ç¼“å­˜åŠŸèƒ½ï¼Œåœ¨androidä¸­åŠ è½½çš„å›¾ç‰‡çš„æ—¶å€™ï¼Œå¯¹oomçš„é—®é¢˜ï¼Œå’Œå¯¹åŠ è½½å›¾ç‰‡é”™ä½çš„é—®é¢˜éƒ½è½»æ˜“è§£å†³ã€‚ä»–è¿˜åŒ…æ‹¬äº†ä¸€ä¸ªæ‰‹æœºå¼€å‘ä¸­ç»å¸¸åº”ç”¨çš„å®žç”¨å·¥å…·ç±»ï¼Œå¦‚æ—¥å¿—ç®¡ç†ï¼Œé…ç½®æ–‡ä»¶ç®¡ç†ï¼Œandroidä¸‹è½½å™¨æ¨¡å—ï¼Œç½‘ç»œåˆ‡æ¢æ£€æµ‹ç­‰ç­‰å·¥å…· ä¼˜ç‚¹ï¼šåŠŸèƒ½çœ‹èµ·æ¥æ¯”è¾ƒå®Œå–„ã€‚ä¸ªäººè§‰å¾—åå­—èµ·çš„å¥½ã€‚ ç¼ºç‚¹ï¼šä»Ž2013å¹´å°±åœæ­¢ç»´æŠ¤äº†ï¼Œæ²¡æœ‰é¡¹ç›®æ–‡æ¡£ã€‚ å››ã€ LoonAndroidå®˜æ–¹ä»‹ç»ï¼š å¦‚æžœä½ æƒ³çœ‹uiæ–¹é¢çš„ä¸œè¥¿ï¼Œè¿™é‡Œæ²¡æœ‰ï¼Œæƒ³è¦çœ‹ç‰›é€¼çš„æ•ˆæžœè¿™é‡Œä¹Ÿæ²¡æœ‰ã€‚è¿™åªæ˜¯çº¯å®žçŽ°åŠŸèƒ½çš„æ¡†æž¶ï¼Œå®ƒçš„ç›®æ ‡æ˜¯èŠ‚çœä»£ç é‡ï¼Œé™ä½Žè€¦åˆï¼Œè®©ä»£ç å±‚æ¬¡çœ‹èµ·æ¥æ›´æ¸…æ™°ã€‚æ•´ä¸ªæ¡†æž¶ä¸€éƒ¨åˆ†æ˜¯ç½‘ä¸Šçš„ï¼Œä¸€éƒ¨åˆ†æ˜¯æˆ‘æ”¹çš„ï¼Œä¸ºäº†é€‚åº”æˆ‘çš„ç¼–ç ä¹ æƒ¯ï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†åƒormå®Œå…¨æ˜¯ç½‘ä¸Šçš„ç»„ä»¶ã€‚åœ¨æ­¤æ„Ÿè°¢é‚£äº›æœ‹å‹ä»¬ã€‚ æ•´ä¸ªæ¡†æž¶å¼çš„åˆè¡·æ˜¯ä¸ºäº†å·æ‡’ï¼Œä¹‹å‰éƒ½æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸€ä¸ªjarï¼Œåšé¡¹ç›®çš„æ—¶å€™æ‹‰è¿›åŽ»ï¼Œè¿™æ ·å¯¹äºŽæˆ‘æ¥è¯´ä¾ç„¶è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ã€‚æœ€åŽå°±å¯¼è‡´æˆ‘æŠŠæ‰€æœ‰çš„jaråšæˆäº†ä¸€ä¸ªå·¥å…·é›†åˆåŒ…ã€‚ æœ‰å¾ˆå¤šæ¡†æž¶éƒ½å«æœ‰è¿™ä¸ªå·¥å…·é›†åˆé‡Œçš„åŠŸèƒ½ï¼Œè¿™äº›ä¸ä¸€å®šéƒ½å¥½ç”¨ï¼Œå› ä¸ºè¿™æ˜¯æ ¹æ®æˆ‘ä¸ªäººä½¿ç”¨å–œæ¬¢æ¥å®žçŽ°çš„ï¼Œå¦‚æžœä½ ä»¬æœ‰è‡ªå·±çš„æƒ³æ³•ï¼Œå¯ä»¥è‡ªå·±æŠŠæž¶åŒ…è§£åŽ‹äº†ä»¥åŽï¼Œæºç æ‹‰å‡ºæ¥æ”¹åŠ¨ä¸‹ã€‚ ç›®å‰å¾ˆå¤šæ¡†æž¶éƒ½ç”¨åˆ°äº†æ³¨è§£ï¼Œé™¤äº†androidannotationsæ²¡æœ‰å…¥ä¾µæˆ‘ä»¬åº”ç”¨çš„ä»£ç ä»¥å¤–ï¼Œå…¶ä»–çš„åŸºæœ¬ä¸Šéƒ½æœ‰ï¼Œè¦ä¹ˆæ˜¯å¿…é¡»ç»§æ‰¿æ¡†æž¶é‡Œé¢çš„activity,è¦ä¹ˆæ˜¯å¿…é¡»åœ¨activityçš„oncreaté‡Œé¢è°ƒç”¨æŸä¸ªæ–¹æ³•ã€‚ æ•´ä¸ªæ¡†æž¶å¼ä¸åŒäºŽandroidannotationsï¼ŒRoboguiceç­‰iocæ¡†æž¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç±»ä¼¼springçš„å®žçŽ°æ–¹å¼ã€‚åœ¨æ•´åº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸä¸­æ‰¾åˆ°åˆ‡å…¥ç‚¹ï¼Œç„¶åŽå¯¹activityçš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œæ‹¦æˆªï¼Œç„¶åŽæ’å…¥è‡ªå·±çš„åŠŸèƒ½ã€‚ å¼€æºåœ°å€ï¼šhttps://github.com/gdpancheng/LoonAndroid åŠŸèƒ½ï¼š 1è‡ªåŠ¨æ³¨å…¥æ¡†æž¶ï¼ˆåªéœ€è¦ç»§æ‰¿æ¡†æž¶å†…çš„applicationæ—¢å¯ï¼‰ 2å›¾ç‰‡åŠ è½½æ¡†æž¶ï¼ˆå¤šé‡ç¼“å­˜ï¼Œè‡ªåŠ¨å›žæ”¶ï¼Œæœ€å¤§é™åº¦ä¿è¯å†…å­˜çš„å®‰å…¨æ€§ï¼‰ 3ç½‘ç»œè¯·æ±‚æ¨¡å—ï¼ˆç»§æ‰¿äº†åŸºæœ¬ä¸ŠçŽ°åœ¨æ‰€æœ‰çš„httpè¯·æ±‚ï¼‰ 4 eventbusï¼ˆé›†æˆä¸€ä¸ªå¼€æºçš„æ¡†æž¶ï¼‰ 5éªŒè¯æ¡†æž¶ï¼ˆé›†æˆå¼€æºæ¡†æž¶ï¼‰ 6 jsonè§£æžï¼ˆæ”¯æŒè§£æžæˆé›†åˆæˆ–è€…å¯¹è±¡ï¼‰ 7 æ•°æ®åº“ï¼ˆä¸çŸ¥é“æ˜¯å“ªä½å†™çš„ å¿˜è®°äº†ï¼‰ 8 å¤šçº¿ç¨‹æ–­ç‚¹ä¸‹è½½ï¼ˆè‡ªåŠ¨åˆ¤æ–­æ˜¯å¦æ”¯æŒå¤šçº¿ç¨‹ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯é‡å®šå‘ï¼‰ 9 è‡ªåŠ¨æ›´æ–°æ¨¡å— 10 ä¸€ç³»åˆ—å·¥å…·ç±» æœ‰ç‚¹ï¼šåŠŸèƒ½å¤š ç¼ºç‚¹ï¼šæ–‡æ¡£æ–¹é¢ äº”ã€ KJFrameForAndroidé¡¹ç›®åœ°å€ï¼šhttps://github.com/kymjs/KJFrameForAndroid å®˜æ–¹ä»‹ç»ï¼š KJFrameForAndroid åˆå«KJLibraryï¼Œæ˜¯ä¸€ä¸ªandroidçš„orm å’Œ ioc æ¡†æž¶ã€‚åŒæ—¶å°è£…äº†androidä¸­çš„Bitmapä¸ŽHttpæ“ä½œçš„æ¡†æž¶ï¼Œä½¿å…¶æ›´åŠ ç®€å•æ˜“ç”¨ï¼›KJFrameForAndroidçš„è®¾è®¡æ€æƒ³æ˜¯é€šè¿‡å°è£…AndroidåŽŸç”ŸSDKä¸­å¤æ‚çš„å¤æ‚æ“ä½œè€Œè¾¾åˆ°ç®€åŒ–Androidåº”ç”¨çº§å¼€å‘ï¼Œæœ€ç»ˆå®žçŽ°å¿«é€Ÿè€Œåˆå®‰å…¨çš„å¼€å‘APPã€‚æˆ‘ä»¬æå€¡ç”¨æœ€å°‘çš„ä»£ç ï¼Œå®Œæˆæœ€å¤šçš„æ“ä½œï¼Œç”¨æœ€é«˜çš„æ•ˆçŽ‡ï¼Œå®Œæˆæœ€å¤æ‚çš„åŠŸèƒ½ã€‚ åŠŸèƒ½ï¼š ä¸€ä¸ªandroidçš„orm å’Œ ioc æ¡†æž¶ã€‚åŒæ—¶å°è£…äº†androidä¸­çš„Bitmapä¸ŽHttpæ“ä½œçš„æ¡†æž¶ï¼Œä½¿å…¶æ›´åŠ ç®€å•æ˜“ç”¨ï¼› KJFrameForAndroidå¼€å‘æ¡†æž¶çš„è®¾è®¡æ€æƒ³æ˜¯é€šè¿‡å°è£…AndroidåŽŸç”ŸSDKä¸­å¤æ‚çš„å¤æ‚æ“ä½œè€Œè¾¾åˆ°ç®€åŒ–Androidåº”ç”¨çº§å¼€å‘ï¼Œæœ€ç»ˆå®žçŽ°å¿«é€Ÿè€Œåˆå®‰å…¨çš„å¼€å‘APPã€‚æ€»å…±åˆ†ä¸ºäº”å¤§æ¨¡å—ï¼šUILibraryï¼ŒUtilsLibraryï¼ŒHttpLibraryï¼ŒBitmapLibraryï¼ŒDBLibraryã€‚ ä¼˜ç‚¹ï¼šåŠŸèƒ½æ¯”è¾ƒå…¨é¢ï¼Œä»£ç æ•ˆçŽ‡å¾ˆé«˜ï¼Œæ–‡æ¡£å®Œå–„ï¼Œæœ‰é¡¹ç›®demoï¼Œå‡ºæ¥çš„æ¯”è¾ƒæ™šå€Ÿé‰´äº†å¾ˆå¤šå¤§åž‹æ¡†æž¶ç»éªŒã€‚ ç¼ºç‚¹ï¼šé¡¹ç›®æ–‡æ¡£æ˜¯htmlé¡µé¢ï¼ŒæŸ¥çœ‹èµ·æ¥å¾ˆä¸æ–¹ä¾¿ï¼Œé¡¹ç›®äº¤æµå¹³å°æ²¡å¤šå°‘äººè¯´è¯ï¼ˆéš¾é“å¤§ç¥žéƒ½æ˜¯ä¸è¯´è¯çš„ï¼Ÿï¼‰ ï¼ˆè¿™ä¸¤ä¸ªè¯„ä»·æ˜¯KJFrameForAndroidçš„ä½œè€…å¯¹è‡ªå·±çš„è¯„ä»·ï¼Œä¸ªäººè§‰å¾—ä½œè€…æ˜¯ä¸ªå¤©æ‰ã€‚ä»–çš„è¯„ä»·å¯èƒ½åˆšå†™å®Œç½‘ä¸Šå‘å¸ƒåŽå†™çš„ã€‚æˆ‘åœ¨ç»™ä»–æ›´æ–°è¯„ä»·ã€‚å› ä¸ºçŽ°åœ¨å·²ç»è¿‡åŽ»äº†å‡ ä¸ªæœˆä¸€ç›´åœ¨æ—¶ä¸æ—¶æ›´æ–°ã€‚åŠŸèƒ½å¾ˆå…¨ï¼Œé¡¹ç›®æ–‡æ¡£ä¹Ÿå¾ˆå…¨é¢ï¼Œè€Œä¸”ä»£ç é‡Œæ³¨é‡Šæœ€å¤š è¿™æ–¹é¢è¿™ä¸ªå¾ˆéš¾å¾—ã€‚äº¤æµå¹³å°äººå¾ˆå¤šæŒºçƒ­é—¹ï¼Œä½œè€…å¸Œæœ›æ›´çƒ­é—¹è¿™æ ·æ¡†æž¶è¶Šæ¥è¶Šå®Œå–„ã€‚å¯¹äºŽåˆå­¦è€…å¸Œæœ›çœ‹åˆ°Demoæ›´å®Œå–„ï¼‰ å…­ã€ dhroidå®˜æ–¹ä»‹ç»ï¼š dhroid æ˜¯åŸºäºŽandroid å¹³å°, æžé€Ÿå¼€å‘æ¡†æž¶ï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç›®æ ‡æ˜¯å¼€å‘è¿…é€Ÿã€ä»£ç é‡å°‘ã€å­¦ä¹ ç®€å•ã€åŠŸèƒ½å¼ºå¤§ã€è½»é‡çº§ã€æ˜“æ‰©å±•.ä½¿ä½ æ›´å¿«,æ›´å¥½çš„å¼€å‘å•†ä¸šçº§åˆ«åº”ç”¨ å¼€æºåœ°å€: http://git.oschina.net/tengzhinei/dhroid åŠŸèƒ½ï¼š 1.Iocå®¹å™¨: (ç”¨è¿‡springçš„éƒ½çŸ¥é“)è§†å›¾æ³¨å…¥,å¯¹è±¡æ³¨å…¥,æŽ¥å£æ³¨å…¥,è§£å†³ç±»ä¾èµ–å…³ç³» 2.Eventbus: androidå¹³å°äº‹ä»¶æ€»çº¿æ¡†æž¶,ç‹¬åˆ›å»¶æ—¶äº‹ä»¶,äº‹ä»¶ç®¡ç†è½»æ¾ 3.Dhnet: ç½‘ç»œhttpè¯·æ±‚çš„è§£å†³æ–¹æ¡ˆ,ä½¿ç”¨ç®€å•,å‡å°‘ä»£ç ,è‡ªå¸¦å¤šç§ç½‘ç»œè®¿é—®ç¼“å­˜ç­–ç•¥ 4.adapteræ¨¡å—: æ•°æ®ç»‘å®šè½»æ¾,ä¸ç”¨å†™å¤šä½™çš„adapter,å¤©ç”Ÿç½‘ç»œæ”¯æŒ(ä¸€è¡Œä»£ç æžå®šåŠ è½½,åˆ·æ–°é—®é¢˜) 5.DhDb: androidä¸­sqliteçš„æœ€è½»é‡ormæ¡†æž¶(å¢žåˆ æ”¹æŸ¥è½»æ¾æžå®š) 6.Perference: androidè‡ªå¸¦Perference å‡çº§ç‰ˆ,è®©ä½ çš„Perferenceæ›´å¼ºå¤§,æ›´æ–¹ä¾¿ å·¥å…·é›†åˆ JSONUtil(å®‰å…¨å¤„ç†json),ViewUtil(æ•°æ®ç»‘å®šæ›´å¿«) ThreadWorker(å¼‚æ­¥ä»»åŠ¡å·¥å…·)â€¦ ä¼˜ç‚¹ï¼šåŠŸèƒ½å…¨é¢ï¼Œæœ‰demoï¼Œä½œè€…ä¹Ÿæ˜¯ä¸ºå…¬å¸å¼€å‘çš„æ¡†æž¶ã€‚ ç¼ºç‚¹ï¼šæ–‡æ¡£æ–¹é¢çŽ°åœ¨ä¸æ˜¯å¾ˆå¥½ï¼Œå°±eoeä¸Šçš„é‚£äº›ã€‚ ä¸ƒã€ SmartAndroidé¡¹ç›®åœ°å€ï¼šhttp://www.aplesson.com/smartAndroid/demos å®˜æ–¹ä»‹ç»ï¼š SmartAndroidæ˜¯ä¸€å¥—ç»™ Androidå¼€å‘è€…ä½¿ç”¨çš„åº”ç”¨ç¨‹åºå¼€å‘æ¡†æž¶å’Œå·¥å…·åŒ…ã€‚å®ƒæä¾›ä¸€å¥—ä¸°å¯Œçš„æ ‡å‡†åº“ä»¥åŠç®€å•çš„æŽ¥å£å’Œé€»è¾‘ç»“æž„ï¼Œå…¶ç›®çš„æ˜¯ä½¿å¼€å‘äººå‘˜æ›´å¿«é€Ÿåœ°è¿›è¡Œé¡¹ç›®å¼€å‘ã€‚ä½¿ç”¨ SmartAndroidå¯ä»¥å‡å°‘ä»£ç çš„ç¼–å†™é‡ï¼Œå¹¶å°†ä½ çš„ç²¾åŠ›æŠ•å…¥åˆ°é¡¹ç›®çš„åˆ›é€ æ€§å¼€å‘ä¸Šã€‚ åŠŸèƒ½ï¼š SmartAndroid æ‹¥æœ‰å…¨èŒƒå›´çš„ç±»åº“ï¼Œå¯ä»¥å®Œæˆå¤§å¤šæ•°é€šå¸¸éœ€è¦çš„APPå¼€å‘ä»»åŠ¡ï¼ŒåŒ…æ‹¬ï¼š å¼‚æ­¥ç½‘ç»œæ“ä½œç›¸å…³æ‰€æœ‰åŠŸèƒ½ã€å¼ºå¤§çš„å›¾ç‰‡å¤„ç†æ“ä½œã€è½»é‡çº§ORMæ•°æ®åº“Sqliteåº“ã€zipæ“ä½œ ã€åŠ¨ç”»ç‰¹æ•ˆã€Htmlç­‰è§£æžé‡‡é›†ã€äº‹ä»¶æ€»çº¿EventBus/Ottoã€Gson(Json)ã€AQueryã€ä¸»æµæ‰€æœ‰UIæŽ§ä»¶ï¼ˆä¾‹å¦‚ï¼šActionbarSherlockï¼ŒSlidingMenuï¼ŒBottomViewï¼ŒActionbarï¼ŒDragListViewç­‰10å¤šç§UIåº“ï¼‰ç­‰ã€‚ ä¼˜ç‚¹ï¼šåŠŸèƒ½éžå¸¸å…¨ï¼Œè¶…å‡ºä½ ç´¢è¦ã€æ–‡æ¡£å®Œå–„ï¼ˆä½œè€…å¾ˆå…¨é¢ï¼Œå®˜æ–¹ç½‘ç«™æ˜¯webå“åº”å¼ç½‘ç«™ï¼Œæ¡†æž¶é‡ŒåŠŸèƒ½æœ‰UIå„ç§ç‰¹æ•ˆåº”è¯¥æœ€å…¨äº†ï¼Œä¸€ç›´æ›´æ–°ä¸­ï¼‰ ç¼ºç‚¹ï¼šjaråŒ…å¤§ç‚¹ï¼Ÿï¼ˆåŠŸèƒ½å¤šä¸å¯é¿å…ï¼Œä¸æ˜¯é—®é¢˜ï¼‰ï¼Œåœ¨çº¿æ–‡æ¡£ï¼ˆéšå“åº”å¼çš„æ‰‹æœºè®¿é—®ä¹Ÿæ–¹ä¾¿ï¼Œä½†æ˜¯ç½‘é€Ÿæ…¢å°±ä¸å¥½äº†ï¼Œé¡µé¢æ‰“å¼€ä¸æ˜¯å¾ˆæµç•…ï¼‰ å…«ã€ andBaseå®˜æ–¹ä»‹ç»ï¼š andbaseæ˜¯ä¸ºAndroidå¼€å‘è€…é‡èº«æ‰“é€ çš„ä¸€æ¬¾å¼€æºç±»åº“äº§å“ å¼€æºåœ°å€ï¼šhttps://code.jd.com/zhaoqp2010_m/andbase åŠŸèƒ½ï¼š 1.andbaseä¸­åŒ…å«äº†å¤§é‡çš„å¼€å‘å¸¸ç”¨æ‰‹æ®µã€‚ å¦‚ç½‘ç»œä¸‹è½½ï¼Œå¤šçº¿ç¨‹ä¸Žçº¿ç¨‹æ± çš„ç®¡ç†ï¼Œæ•°æ®åº“ORMï¼Œå›¾ç‰‡ç¼“å­˜ç®¡ç†ï¼Œå›¾ç‰‡æ–‡ä»¶ä¸‹è½½ä¸Šä¼ ï¼ŒHttpè¯·æ±‚å·¥å…·ï¼Œå¸¸ç”¨å·¥å…·ç±»ï¼ˆå­—ç¬¦ä¸²ï¼Œæ—¥æœŸï¼Œæ–‡ä»¶å¤„ç†ï¼Œå›¾ç‰‡å¤„ç†å·¥å…·ç±»ç­‰ï¼‰ï¼Œèƒ½å¤Ÿä½¿æ‚¨çš„åº”ç”¨åœ¨å›¢é˜Ÿå¼€å‘ä¸­å‡å°‘å†—ä½™ä»£ç ï¼Œå¾ˆå¤§çš„æé«˜äº†ä»£ç çš„ç»´æŠ¤æ€§ä¸Žå¼€å‘é«˜æ•ˆæ€§ï¼Œèƒ½å¾ˆå¥½çš„è§„é¿ç”±äºŽå¼€å‘ç–å¿½è€Œå¯¼è‡´å¸¸çŠ¯çš„é”™è¯¯ã€‚ 2.andbaseå°è£…äº†å¤§é‡çš„å¸¸ç”¨æŽ§ä»¶ã€‚ å¦‚liståˆ†é¡µï¼Œä¸‹æ‹‰åˆ·æ–°ï¼Œå›¾ç‰‡è½®æ’­ï¼Œè¡¨æ ¼ï¼Œå¤šçº¿ç¨‹ä¸‹è½½å™¨ï¼Œä¾§è¾¹æ ï¼Œå›¾ç‰‡ä¸Šä¼ ï¼Œè½®å­é€‰æ‹©ï¼Œå›¾è¡¨ï¼ŒTabæ»‘åŠ¨ï¼Œæ—¥åŽ†é€‰æ‹©å™¨ç­‰ã€‚ 3.å¼ºå¤§çš„AbActivityï¼Œæ‚¨æ²¡æœ‰ç†ç”±ä¸ç»§æ‰¿å®ƒã€‚ ç»§æ‰¿å®ƒä½ èƒ½å¤ŸèŽ·å¾—ä¸€ä¸ªç®€å•å¼ºå¤§å¯è®¾ç½®çš„æ“ä½œæ ï¼Œä»¥åŠä¸€ç³»åˆ—çš„ç®€å•è°ƒç”¨ï¼Œå¦‚å¼¹å‡ºæ¡†ï¼Œæç¤ºæ¡†ï¼Œè¿›åº¦æ¡†ï¼Œå‰¯æ“ä½œæ ç­‰ã€‚ 4.æä¾›æ•ˆçŽ‡è¾ƒé«˜å›¾ç‰‡ç¼“å­˜ç®¡ç†ç­–ç•¥ï¼Œä½¿å†…å­˜å¤§å¹…åº¦èŠ‚çœï¼Œåˆ©ç”¨çŽ‡æé«˜ï¼Œæ•ˆçŽ‡æé«˜ã€‚ ç¨‹åºä¸­è¦ç®¡ç†å¤§é‡çš„å›¾ç‰‡èµ„æºï¼Œandbaseæä¾›ç®€å•çš„æ–¹æ³•ï¼Œå‡ æ­¥å®Œæˆä¸‹è½½ä¸Žæ˜¾ç¤ºï¼Œå¹¶æ”¯æŒç¼©æ”¾ï¼Œè£å‰ªï¼Œç¼“å­˜åŠŸèƒ½ã€‚ 5.å°è£…äº†å¤§é‡å¸¸è§å·¥å…·ç±»ã€‚ åŒ…æ‹¬æ—¥æœŸï¼Œå­—ç¬¦ï¼Œæ–‡ä»¶ï¼Œå›¾ç‰‡ç­‰å„ç§å¤„ç†å‡½æ•°ï¼Œå¤šè€Œå…¨ã€‚ 6.ç”¨andbaseå¤§é‡å‡å°‘handlerçš„ä½¿ç”¨ï¼Œè€Œé‡‡ç”¨å›žè°ƒå‡½æ•°ï¼Œä»£ç æ›´æ•´æ´ã€‚ handlerä¼šäº§ç”Ÿå¤§é‡ä»£ç ï¼Œå¹¶ä¸”ä¸å¥½ç»´æŠ¤ï¼Œandbaseå¯¹handlerè¿›è¡Œäº†å°è£…ã€‚ 7.ç®€å•è½»é‡æ”¯æŒæ³¨è§£è‡ªåŠ¨å»ºè¡¨çš„ORMæ¡†æž¶ï¼ˆæ”¯æŒä¸€/å¤šå¯¹å¤šçš„å…³è”æ“ä½œï¼‰ã€‚ å†™sqlï¼Œå»ºè¡¨ï¼Œå·¥ä½œé‡å¤§ï¼Œandbaseæä¾›æ›´å‚»ç“œå¼‚æ­¥å¢žåˆ æ”¹æŸ¥å·¥å…·ç±»ã€‚ 8.å¼‚æ­¥è¯·æ±‚httpæ¡†æž¶ï¼Œç½‘ç»œè¯·æ±‚æ ‡å‡†åŒ–ï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ ä¸‹è½½ï¼Œgetï¼Œpostï¼Œè¿›åº¦æ˜¾ç¤ºã€‚ åŒ…å«äº†å¼‚æ­¥ä¸Žhttpè¯·æ±‚çš„å·¥å…·ç±»ï¼Œå®žç”¨ã€‚ 9.çƒ­æƒ…çš„æ”¯æŒç¾¤ä½“ã€‚ ä¼˜ç‚¹ï¼šåŠŸèƒ½å¾ˆå…¨ï¼Œdemoåšçš„å¥½ ã€APIæ–‡æ¡£å®Œå–„ã€æŽ¥è¿‘å®Œç¾Ž ç¼ºç‚¹ï¼šå¸Œæœ›æ–‡æ¡£æ›´è¯¦ç»†äº›ã€‚ ä¹ã€ AndroidAnnotationsé¡¹ç›®åœ°å€ï¼šhttps://github.com/excilys/androidannotations åŠŸèƒ½ï¼š å®Œå…¨æ³¨è§£æ¡†æž¶ï¼Œä¸€åˆ‡çš†ä¸ºæ³¨è§£ï¼šå£°æ˜ŽæŽ§ä»¶ï¼Œç»‘å®šæŽ§ä»¶ï¼Œè®¾ç½®ç›‘å¬ï¼Œsetcontentviewï¼Œé•¿æŒ‰äº‹ä»¶ï¼Œå¼‚æ­¥çº¿ç¨‹ï¼Œå…¨éƒ¨é€šè¿‡æ³¨è§£å®žçŽ°ã€‚ ä¼˜ç‚¹ï¼šå®Œå…¨çš„æ³¨è§£ï¼Œä½¿å¼€å‘èµ·æ¥æ›´åŠ ä¾¿åˆ©ï¼Œç¨‹åºå‘˜å†™çš„ä»£ç ä¹Ÿæ›´å°‘ã€‚ ç¼ºç‚¹ï¼šæ–‡æ¡£æ˜¯å…¨è‹±æ–‡çš„åŠ ä¸ŠåŠŸèƒ½æ¯”è¾ƒå°‘æ²¡æœ‰å…·ä½“ç ”ç©¶ï¼Œç”±äºŽä¸€åˆ‡éƒ½æ˜¯æ³¨è§£ï¼Œæ„Ÿè§‰æ•ˆçŽ‡ä¸é«˜ï¼Œä¸è¿‡æ ¹æ®å®˜æ–¹ä»‹ç»è¯´å¹¶ä¸æ˜¯ä½¿ç”¨çš„åå°„åŠ è½½ï¼Œæ‰€ä»¥æ•ˆçŽ‡æ¯”ä¸€èˆ¬æ³¨è§£é«˜å¾ˆå¤šã€‚ åã€ volleyé¡¹ç›®åœ°å€ï¼š https://github.com/smanikandan14/Volley-demo åŠŸèƒ½ï¼š Volleyæ˜¯Androidå¹³å°ä¸Šçš„ç½‘ç»œé€šä¿¡åº“ï¼Œèƒ½ä½¿ç½‘ç»œé€šä¿¡æ›´å¿«ï¼Œæ›´ç®€å•ï¼Œæ›´å¥å£®å¼‚æ­¥åŠ è½½ç½‘ç»œå›¾ç‰‡ã€ç½‘ç»œæ•°æ® ä¼˜ç‚¹ï¼šGoogleå®˜æ–¹æŽ¨èï¼Œè¯·çœ‹åŽ»å¹´çš„å¼€å‘è€…å¤§ä¼šä»‹ç»ã€‚ ç¼ºç‚¹ï¼šåŠŸèƒ½æ¯”è¾ƒå°‘ï¼Œåªæœ‰ç½‘ç»œæ•°æ®åŠ è½½å’Œç½‘ç»œå›¾ç‰‡åŠ è½½ åä¸€ã€ android-async-http é¡¹ç›®åœ°å€ï¼šhttps://github.com/loopj/android-async-httpæ–‡æ¡£ä»‹ç»ï¼šhttp://loopj.com/android-async-http/ (1) åœ¨åŒ¿åå›žè°ƒä¸­å¤„ç†è¯·æ±‚ç»“æžœ (2) åœ¨UIçº¿ç¨‹å¤–è¿›è¡Œhttpè¯·æ±‚ (3) æ–‡ä»¶æ–­ç‚¹ä¸Šä¼  (4) æ™ºèƒ½é‡è¯• (5) é»˜è®¤gzipåŽ‹ç¼© (6) æ”¯æŒè§£æžæˆJsonæ ¼å¼ (7) å¯å°†CookiesæŒä¹…åŒ–åˆ°SharedPreferences æœ‰ç‚¹ï¼šå¾ˆç®€å•å¾ˆå®žç”¨ ç¼ºç‚¹ï¼šåŠŸèƒ½æ¯”è¾ƒå°‘ï¼Œ ï¼ˆåªæ˜¯é’ˆå¯¹çš„åŠŸèƒ½ä¸æ˜¯ä»€ä¹ˆç¼ºç‚¹ï¼‰ æœ€åŽæ¥ä¸ªæ€»ç»“å§ï¼š â€‹ ä»¥ä¸Šçš„å¼€å‘æ¡†æž¶ç½‘ä¸Šéƒ½å¯ä»¥ä¸‹è½½æºç ï¼Œä¹Ÿæœ‰demoå®žä¾‹çš„ã€‚å½“ç„¶æˆ‘æ²¡åˆ†æžå’Œå¯¹æ¯”æ¡†æž¶çš„æ•ˆçŽ‡æ€§èƒ½ï¼Œä½†æ˜¯éƒ½éžå¸¸å®žç”¨ï¼Œå…¶ä½œè€…å¤§éƒ¨åˆ†æ˜¯ä¸ªäººï¼Œéƒ½æ˜¯äº›ç‰›äººæˆ–å¤©æ‰ã€‚ä½ å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æŠŠæœ‰ç”¨è·³å‡ºæ¥ç”¨ï¼Œè‡³å°‘æœ‰å¾ˆå¤šä½¿ç”¨å·¥å…·ã€‚å¦‚æžœæœ‰å‘çŽ°Bugï¼Œä½œè€…å¸Œæœ›æŠŠbugäº¤ç»™ä»–ã€‚ â€‹ Afinal å’Œ xUtilsç®€å•å®žç”¨ä½†æ˜¯demoå’Œæ›´æ–°çš„é—®é¢˜ã€‚ KJFrameForAndroid ç®—æ˜¯æ–°å‡ºçš„ï¼ŒåŠŸèƒ½ä¹Ÿå¤šï¼Œæ•ˆçŽ‡ä¹Ÿåº”è¯¥å¥½ï¼Œä»£ç ä¹Ÿæ³¨é‡Šå¤š ç”¨èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ Dhroid ä½œè€…è‡ªå·±å…¬å¸çš„æ¡†æž¶ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥è¯·æ•™ã€‚ SmartAndroid å¼ºåŠ²çš„æ¡†æž¶åŠŸèƒ½ä¿±å…¨ã€‚ andBase å‡ºæ¥æ—©å„ä¸ªæ–¹é¢ç®—æ˜¯å®Œæ•´çš„å§ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>æ¡†æž¶</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>æ¡†æž¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android é¡¹ç›®æœ€æ–°æž¶æž„]]></title>
    <url>%2Fposts%2Fb043c117.html</url>
    <content type="text"><![CDATA[å‰è¨€ä¸ºäº†å¸®åŠ©å¼€å‘ç€æ‰“é€ ä¸€æ¬¾ä¼˜ç§€çš„APPï¼ŒGoogleå¯è°“è´¹å°½å¿ƒåŠ›ï¼ŒæŽ¨å‡ºäº†å„ç§è¯¸å¦‚MVP,MVVMç­‰ç­‰é¡¹ç›®æž¶æž„çš„æ€è·¯ï¼Œå¸®åŠ©å¼€å‘è€…æ›´åŠ é«˜æ•ˆçš„å¼€å‘ï¼Œå°½ç®¡è¿™æ ·ï¼ŒGoogleè¿˜æ˜¯æŽ¥ç€æŽ¨å‡ºäº†ä¸€ä¸ªæ–°çš„é¡¹ç›®æž¶æž„ï¼Œä»¥ä¾¿ç»™äºˆå¼€å‘è€…æ›´å¤šçš„é€‰æ‹©ï¼Œè‡³äºŽè¿™ç§æž¶æž„æ€è·¯å’ŒMVPç­‰æ¡†æž¶çš„ä¼˜åŠ£ï¼Œå„ä½çœ‹å®Œæ–‡ç« æˆ–è®¸è‡ªæœ‰å®šè®ºã€‚ 1.ç”Ÿå‘½å‘¨æœŸåœ¨ç§»åŠ¨æ“ä½œç³»ç»Ÿä¸Šå¼€å‘è½¯ä»¶å…¶å®žæ˜¯ååˆ†å¤æ‚çš„ä¸€ä»¶äº‹æƒ…ï¼Œå› ä¸ºæˆ‘ä»¬éšæ—¶éœ€è¦é¢å¯¹ç³»ç»Ÿå’Œç”¨æˆ·çš„å„ç§ä¸å¯é¢„æ–™çš„æ“ä½œï¼Œå¾ˆå¤šæ—¶å€™ï¼Œäº‹æƒ…å¹¶ä¸å‘ç€æˆ‘ä»¬é¢„è®¾çš„æ–¹å‘æ–¹å‘è¿›å±•ã€‚å› æ­¤ç³»ç»Ÿå‘æˆ‘ä»¬æä¾›äº†æ ¸å¿ƒç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸè¿™ç§ä¸œè¥¿ï¼Œå‘ŠçŸ¥æˆ‘ä»¬çš„APPæ­£å¤„åœ¨ä»€ä¹ˆæ ·çš„çŠ¶å†µä¸­ï¼Œä»¥ä¾¿äºŽæˆ‘ä»¬åšå‡ºç›¸åº”çš„å¤„ç†ã€‚ å¦‚ä¸Šå›¾ã€‚è™½ç„¶Googleç»™å‡ºäº†Activityéžå¸¸è¯¦å°½çš„ç”Ÿå‘½å‘¨æœŸç»“æž„ï¼Œå› æ­¤æˆ‘ä»¬å¯¹æ ¹æ®ç”Ÿå‘½å‘¨æœŸåšå‡ºç›¸åº”çš„åˆç†çš„å®‰æŽ’ï¼Œæ¯”å¦‚æ·»åŠ å’Œç§»é™¤å®žæ—¶GPSä½ç½®ç›‘å¬ï¼š å¯æ˜¯éšç€ä¸šåŠ¡çš„é€æ¸å¤æ‚ï¼Œæˆ‘ä»¬å¯èƒ½åœ¨æ·»åŠ ç›‘å¬ä¹‹é—´éœ€è¦å‘æœåŠ¡å™¨éªŒè¯æŸäº›ç”¨æˆ·ä¿¡æ¯ï¼Œç­‰è¿”å›žä¿¡æ¯æ­£ç¡®æ‰åŽ»ç›‘å¬å®šä½ã€‚é‚£ä¹ˆåœ¨ç½‘ç»œå¼‚æ­¥å›žè°ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¾ˆéš¾çŸ¥é“å½“å‰çš„activityçš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ã€‚ å¦‚æžœå‘ç”Ÿä¸Šå›¾çš„æƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å ç”¨çš„ç›¸å…³èµ„æºå°±å¯èƒ½æ°¸è¿œæ— æ³•ç§»é™¤äº†ã€‚è¿™è¿˜åªæ˜¯å†°å±±ä¸€è§’ï¼Œå¤§å®¶å°½å¯ä»¥æƒ³æƒ³ï¼Œå½“æˆ‘ä»¬çš„å¼‚æ­¥è°ƒç”¨é¢å¯¹æ— æ³•é¢„çŸ¥çš„ç”¨æˆ·æ“ä½œå’Œç³»ç»Ÿå¤„ç†çš„æ—¶å€™ï¼Œä»€ä¹ˆé—®é¢˜éƒ½å¯èƒ½å‘ç”Ÿã€‚ æ€»è€Œè¨€ä¹‹ï¼Œç”±äºŽæˆ‘ä»¬å¯¹äºŽUIå®žæ—¶çš„çŠ¶æ€åšä¸åˆ°äº†å¦‚æŒ‡æŽŒï¼Œä»¥è‡³äºŽå¯¹æ•°æ®å’Œé€»è¾‘çš„å¤„ç†å°±æ— æ³•å°½å–„å°½ç¾Žã€‚è¿™æ˜¯ç±»ä¼¼éšæ‚£å¾—ä¸åˆ°å¾ˆå¥½çš„è§£å†³æ ¹æœ¬åŽŸå› ã€‚ 2. Googleå¤§ç¤¼åŒ…è¿™æ¬¡GoogleæŽ¨å‡ºäº†ä¸€å¥—æ–°çš„é¡¹ç›®æž¶æž„ç»„ä»¶å’Œæž¶æž„æ€è·¯ï¼Œä»ŽUIåˆ°Data,å¸®åŠ©æˆ‘ä»¬æ›´åŠ ç²¾å‡†çš„å¼€å‘è‡ªå·±çš„APPã€‚ 2.1 æ ¸å¿ƒï¼šLifecycle Componentsè¿™å¥—æž¶æž„æœ€æ ¸å¿ƒçš„å°±æ˜¯ç”Ÿå‘½å‘¨æœŸç»„ä»¶ï¼Œï¼šLifecycle Componentsç”¨äºŽç®¡ç†UIæŽ§åˆ¶å™¨ï¼ˆActivity/Freagmentï¼‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ–¹ä¾¿æŸ¥è¯¢å½“å‰ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„çŠ¶æ€ã€‚ å¯æŸ¥è¯¢çš„çŠ¶æ€å¦‚ä¸‹ï¼š å…·ä½“çš„ä½¿ç”¨æ–¹å¼æœ‰ä¸¤ç§ï¼š ç»§æ‰¿LifecycleActivity/LifecycleFragmentå³å¯ è‡ªå·±å®žçŽ°LifecycleRegistryOwneræŽ¥å£ java 1234// é€šè¿‡ç»§æ‰¿ï¼Œå°±å·²ç»å°†è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸçš„äº¤ç»™äº†Lifecycle Componentsç®¡ç†äº†ã€‚public class MainActivity extends LifecycleActivity &#123;&#125; é‚£æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ 12345678910111213141516171819202122232425262728293031323334353637// é€šè¿‡ç»§æ‰¿LifecycleObserverï¼Œä¿è¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ³¨è§£æˆ–è€…æŽ¥å£æŸ¥è¯¢UIçš„ç”Ÿå‘½å‘¨æœŸpublic class MyTest implements LifecycleObserver &#123; private Lifecycle lifecycle; // LifecycleåŒ…å«äº†å½“å‰ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ public MyTest(Lifecycle lifecycle)&#123; lifecycle.addObserver(this); this.lifecycle=lifecycle; &#125;// å½“onResumeå‘ç”Ÿçš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨ @OnLifecycleEvent(Lifecycle.Event.ON_RESUME) public void resume()&#123; Log.i(&quot;TAG&quot;,&quot;it called when resume &quot;); &#125; public void doTest(String s)&#123; // éšæ—¶å¯ä»¥æŸ¥è¯¢å½“å‰çš„UIçŠ¶æ€ if(lifecycle.getCurrentState().equals(Lifecycle.State.RESUMED))&#123; Log.i(&quot;TAG&quot;,&quot;resume&quot;); &#125;else&#123; Log.i(&quot;TAG&quot;,&quot;is not resume !! &quot;); &#125; &#125;&#125;public class MainActivity extends LifecycleActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); //å°†å½“å‰Activityçš„ç”Ÿå‘½å‘¨æœŸä¼ é€’åˆ°MyTestä¸­å³å¯ MyTest myTest=new MyTest(this.getLifecycle()); &#125;&#125; çœ‹åˆ°è¿™é‡Œï¼Œä½ ä¸€å®šå¿ƒå¤´ä¸€å–œï¼Œå¦‚æžœæœ‰è¿™ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å®Œå…¨æœ‰èƒ½åŠ›å°†Activityä½œä¸ºä¸€ä¸ªUIçš„æŽ§åˆ¶å™¨ï¼Œä»…ä»…ç”¨æ¥æ˜¾ç¤ºUIå’Œç›¸åº”ç”¨æˆ·æ“ä½œï¼ŒæŠŠActivityçš„å¤§å°ç¼©å°è‡³æœ€å°ã€‚ä¸ç”¨ç€æ€¥ï¼Œå¤§ç¤¼åŒ…è¿œä¸æ­¢è¿™äº›ã€‚ 3.ViewModelå’ŒLiveData ViewModel æ˜¯ä¸€ä¸ªUIç›¸å…³æ•°æ®çš„æš‚å­˜å™¨ï¼Œå½“æ‰€æœ‰ç›¸å…³çš„UIéƒ½finishæŽ‰çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šæ¸…é™¤è‡ªå·±çš„æ•°æ®ã€‚ LiveDataåˆ™æ˜¯ä¸€ä¸ªæŒæœ‰å…·ä½“æ•°æ®å¹¶ä¸”å¯è¢«è§‚å¯Ÿï¼Œèƒ½æ„ŸçŸ¥ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ï¼ˆå®ƒå°±åƒRxJavaä¸­ä¸€ä¸ªèƒ½éµå¾ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„Observableï¼‰ ä»–ä¿©çš„å…³ç³»ï¼Œå°±æ˜¯ï¼ŒViewModelè´Ÿè´£ç®¡ç†ç€ä¸åŒçš„LiveData,å¹¶æŠŠå®ƒæä¾›ç»™UIã€‚ 3.1 LiveDataæˆ‘ä»¬å¯ä»¥å…ˆæ¥è¯´è¯´LiveDataã€‚ç”±äºŽå®ƒå·²ç»èƒ½å¤Ÿæ„ŸçŸ¥ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬å¹¶ä¸éœ€è¦åœ¨åŽ»æŸ¥è¯¢å½“å‰UIçš„ç”Ÿå‘½å‘¨æœŸï¼Œç”±äºŽå¯è¢«è§‚å¯Ÿï¼Œä¹Ÿå°±æ„å‘³ç€å½“å®ƒæŒæœ‰çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œè§‚å¯Ÿè€…å¯ä»¥ç«‹å³å—åˆ°ä¿¡æ¯ã€‚livedataæœ€é‡è¦çš„æ–¹æ³•æ˜¯ä¸€ä¸‹å‡ ä¸ªï¼š 12345678 onActive() // å½“å‰LiveDataæœ‰è¶…è¿‡ä¸€ä¸ªçš„æ´»è·ƒçš„è§‚å¯Ÿè€…æ—¶ï¼Œè¢«è°ƒç”¨onInactive() // å½“å‰æ²¡æœ‰ä»»ä½•æ´»è·ƒçš„è§‚å¯Ÿæ—¶ï¼Œç€è¢«è°ƒç”¨setValue() // å‹‡äºŽæ”¹å˜å½“å‰æ•°æ®ï¼Œè¿™æ ·è§‚å¯Ÿè€…å¯ä»¥å—åˆ°æ”¹å˜åŽçš„æ•°æ®ã€‚// è§‚å¯Ÿæ•°æ®å˜åŒ–ï¼Œå¹¶æ„ŸçŸ¥å½“å‰UIçš„ç”Ÿå‘½å‘¨æœŸobserve(LifecycleOwner owner, Observer&lt;T&gt; observer) è¿™é‡Œæœ‰ä¸€ä¸ªæ´»è·ƒçš„è§‚å¯Ÿè€…çš„æ¦‚å¿µï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠå®ƒæ”¾åœ¨åŽé¢æ¥çœ‹ã€‚LiveDataçš„ç”¨æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public class LocationLiveData extends LiveData&lt;Location&gt; &#123; private LocationManager locationManager; private SimpleLocationListener listener = new SimpleLocationListener() &#123; @Override public void onLocationChanged(Location location) &#123; setValue(location); &#125; &#125;; public LocationLiveData(Context context) &#123; locationManager = (LocationManager) context.getSystemService( Context.LOCATION_SERVICE); &#125; @Override protected void onActive() &#123; locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener); &#125; @Override protected void onInactive() &#123; locationManager.removeUpdates(listener); &#125;&#125;public class MainActivity extends LifecycleActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); LiveData&lt;Location&gt; myLocationListener = new LocationLiveData(); /* * observe(LifecycleOwner owner, Observer&lt;T&gt; observer) * è¿™ä¸ªæ–¹æ³•å°±æ˜¯å‘LiveDataä¸­æ·»åŠ è§‚å¯Ÿè€…ï¼Œ * LiveDataåˆ™å¯ä»¥é€šè¿‡LifecycleOwneræ¥åˆ¤æ–­ * å½“å‰ä¼ å…¥çš„è§‚å¯Ÿè€…æ˜¯å¦æ˜¯æ´»è·ƒçš„ï¼ˆä¹Ÿå°±æ˜¯UIæ˜¯å¦å¯è§äº†ï¼‰ */ myLocationListener.observe(this, new Observer&lt;Location&gt;() &#123; @Override public void onChanged(@Nullable Location location) &#123; // update //å½“LiveDataä¸­é€šè¿‡setValue()ä¿®æ”¹äº†æ•°æ®æ—¶ï¼Œ //è¿™é‡Œå°†ä¼šå—åˆ°ä¿®æ”¹åŽçš„æ•°æ® &#125; &#125;); &#125;&#125; å¥½äº†ï¼ŒLiveDataåŸºæœ¬çš„ç”¨æ³•è®²å®Œäº†ï¼Œç”±äºŽæœ‰äº†LiveDataï¼Œæˆ‘ä»¬çš„dataæ›´åŠ â€œæ™ºèƒ½â€äº†ã€‚å½“UIä¸å¯è§çš„æ—¶å€™ï¼Œæ”¹å˜çš„æ•°æ®å°†ä¸ä¼šè¢«æ›´æ–°åˆ°UIä¸Šã€‚ è€Œä¸”å¦‚æžœæ•°æ®åœ¨ä¸åŒçš„UIç•Œé¢éƒ½ä¼šè¢«ç”¨åˆ°çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸€ä¸ªå•ä¾‹çš„LiveDataï¼Œä¸ºä¸åŒçš„UIæä¾›ç»Ÿä¸€çš„æ•°æ®ã€‚è¿™äº›æ“ä½œå°±ä¸åŽ»ç»†è®²äº†ã€‚ çŽ°åœ¨å›žå¤´çœ‹LiveDataï¼Œæˆ‘ä»¬å‘çŽ°å®ƒè‡³å°‘æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š å¯ä»¥é¿å…å†…å­˜æ³„éœ²ï¼šç”±äºŽ Observer å’Œ Lifecycle ç»‘å®šï¼Œå½“ Lifecycle è¢«é”€æ¯åŽï¼ŒObserver è‡ªåŠ¨è¢«æ¸…ç†ã€‚ é¿å…åœ¨ Activity è¢«é”€æ¯åŽæ›´æ–°æ•°æ®å¯¼è‡´çš„å´©æºƒæƒ…å†µ æ•°æ®å¯å…±äº« æ•°æ®æ›´æ–°æ›´æ™ºèƒ½ï¼šå½“æ•°æ®åœ¨UIä¸å¯è§çš„æ—¶å€™æ›´æ–°äº†ï¼Œåœ¨æ¢å¤å¯è§çš„æ—¶å€™ï¼Œæœ€æ–°çš„æ•°æ®ä¼šåŠæ—¶æ›´æ–°åˆ°UIä¸Šã€‚ ä¸éœ€è¦åœ¨Activityä¸­é¢å¤–å¤„ç†ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ ä¸€é¢—èµ›è‰‡ï¼ 3.2 ViewModelViewModelåˆ™ç›¸å¯¹ç®€å•äº›ï¼Œå› ä¸ºä»–çš„ä½œç”¨æ˜¯æš‚å­˜UIç›¸å…³çš„æ•°æ®ï¼Œä¿è¯å³ä½¿Activityé…ç½®æ›´æ”¹ï¼Œé‡æ–°åˆ›å»ºæ—¶ï¼Œæ•°æ®ä¾ç„¶èƒ½å¤Ÿè¢«ä¿å­˜å¥½ã€‚ åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526public class MyViewModel extends ViewModel &#123; // MyViewModelç”¨äºŽç®¡ç†ä¸åŒçš„LiveData private MutableLiveData&lt;List&lt;User&gt;&gt; users; public LiveData&lt;List&lt;User&gt;&gt; getUsers() &#123; if (users == null) &#123; users = new MutableLiveData&lt;List&lt;Users&gt;&gt;(); loadUsers(); &#125; return users; &#125; private void loadUsers() &#123; // do async operation to fetch users &#125;&#125;public class MyActivity extends AppCompatActivity &#123; public void onCreate(Bundle savedInstanceState) &#123; // é€šè¿‡äº†ViewModelProvidersæ¥èŽ·å–ViewModel // ç”¨æˆ·èŽ·å–å’ŒActivityç»‘å®šçš„ViewModel MyViewModel model = ViewModelProviders.of(this).get(MyViewModel.class); model.getUsers().observe(this, users -&gt; &#123; // update UI &#125;); &#125;&#125; è¿™æ˜¯ViewModelçš„æœ€åŸºæœ¬çš„ç”¨æ³•ï¼Œå®ƒè´Ÿè´£ä»Žå„ä¸ªåœ°æ–¹èŽ·å–æ•°æ®ï¼Œç„¶åŽæŠŠæ•°æ®è£…åˆ°LiveDataä¸­ï¼Œæä¾›ç»™UIï¼›å½“ç„¶ViewModelä¹Ÿå¯ä»¥åœ¨ä¸åŒçš„Fragmentä¸­å…±äº«ï¼Œåœ¨è¿™é‡Œå°±ä¸å¤šè®²äº†ã€‚ ç”±äºŽViewModelçš„æœ¬èº«å’Œactivity/fragmentçš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œå½“ä¸Žä¹‹ç»‘å®šçš„æœ€åŽä¸€ä¸ªUI é”€æ¯æ—¶ï¼ŒViewModelæ‰ä¼šcleanè‡ªèº«çš„æ•°æ®ã€‚ å¦‚å›¾æ‰€ç¤º 4.æ•°æ®æŒä¹…åŒ–ï¼šRoomRoomæ˜¯Googleæä¾›çš„SQLiteçš„ORMçš„è§£å†³æ–¹æ¡ˆï¼Œå…¶å®žæœ¬è´¨ä¸Šå’Œå…¶ä»–çš„ORMæ¡†æž¶æ²¡ä»€ä¹ˆç‰¹åˆ«å¤§çš„å·®åˆ«ï¼Œæ²¡æœ‰å¤ªå¤šæ–°æ„ï¼Œå› æ­¤åªç»™å‡ºå¤§ä½“çš„æž¶æž„å›¾ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡ŒåŽ»å­¦ä¹  5.æ€»ç»“æˆ‘ä»¬çŽ°åœ¨å›žå¤´çœ‹æ•´ä¸ªæž¶æž„ å…¶å®žæœ€æœ‰æœ‰è¶£çš„å°±æ˜¯UI-ViewModelè¿™ä¸ªéƒ¨åˆ†ï¼Œè¿™å¥—æž¶æž„è‡³å°‘å¯ä»¥å¸®åŠ©æˆ‘ä»¬åšåˆ°ä¸€ä¸‹å‡ ç‚¹ï¼š UIä¸ŽDataçœŸæ­£åˆ†ç¦» å¼‚æ­¥è°ƒç”¨å’Œé€»è¾‘æŽ§åˆ¶å¯ä»¥æ›´åŠ ç²¾ç»†ï¼ˆå› ä¸ºå¯¹ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥æ›´å¤šï¼‰ å®žçŽ°Modelé©±åŠ¨UI 6.å‹˜è¯¯æš‚æ—  é™„å½•androidå®˜ç½‘ï¼š https://developer.android.com/topic/libraries/architecture/index.html]]></content>
      <categories>
        <category>Android</category>
        <category>è®¾è®¡æž¶æž„</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>è®¾è®¡æž¶æž„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android - Glide4.xçš„ä½¿ç”¨]]></title>
    <url>%2Fposts%2F6944411e.html</url>
    <content type="text"><![CDATA[æœ€è¿‘ä»ŽGlidev3å‡çº§åˆ°äº†Glide4.xï¼Œæˆ‘ç”¨çš„æ˜¯æœ€æ–°çš„Glide4.1.1å“ˆï¼Œç”±äºŽ3.xåˆ°4.xçš„å˜åŒ–è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹ï¼Œä¹Ÿå’Œéœ€è¦çš„æœ‹å‹åˆ†äº«ä¸€ä¸‹ã€‚ Glideå®˜æ–¹å­¦ä¹ åœ°å€ ä½¿ç”¨1ã€åœ¨appçš„build.gradleä¸­æ·»åŠ å¦‚ä¸‹é…ç½® 12345dependencies &#123;//Glideæ¡†æž¶å¼•å…¥ compile 'com.github.bumptech.glide:glide:4.1.1' annotationProcessor 'com.github.bumptech.glide:compiler:4.1.1'&#125; 2ã€åœ¨projectçš„build.gradleä¸­æ·»åŠ å¦‚ä¸‹ä»“åº“åœ°å€** 1234repositories &#123; mavenCentral() maven &#123; url 'https://maven.google.com' &#125;&#125; 3ã€è‡ªå®šä¹‰AppGlideModuleï¼š ä¸ºè¿ç”¨ç¨‹åºå®šä¹‰ä¸€ä¸ªå¸¦æœ‰@GlideModuleæ³¨è§£çš„AppGlideModuleï¼Œè¿ç”¨ç¨‹åºä¼šä½¿ç”¨å’ŒAppGlideMoudleåŒä¸€ä¸ªåŒ…ä¸‹çš„GlideAppç±»ã€‚é€šè¿‡GlideApp.with()æ–¹å¼ä½¿ç”¨Glideçš„Generated APIã€‚å…·ä½“æ“ä½œï¼Œå°±æ˜¯æ–°å»ºä¸€ä¸ªç±»ï¼Œç»§æ‰¿ä¸ŽAppGlideModuleï¼Œè¿˜å¿…é¡»å¸¦æœ‰@GlideModuleæ³¨è§£ï¼Œ 1234@GlideModulepublic final class MyAppGlideModule extends AppGlideModule &#123; &#125; æ³¨æ„ï¼š å¿…éœ€å¸¦æœ‰@GlideModuleæ³¨è§£ã€‚ å®˜æ–¹æ–‡æ¡£æ˜Žç¡®è¯´æ˜Žï¼Œè¿™ä¸ªç±»ï¼Œä½ å¯ä»¥è®©å®ƒä¿ç•™ç©ºç™½ï¼Œä¸ç”¨å®žçŽ°ä»»ä½•æ–¹æ³•ï¼Œå°±å¯ä»¥ä½¿ç”¨Glideçš„Generated APIã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å®žçŽ°ä¸€äº›æ–¹æ³•ï¼Œå…·ä½“å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ 4ã€GlideåŠ è½½åœ†å½¢å›¾ç‰‡ï¼Œå’ŒGlide3.xå·®å¼‚ä¸å¤§ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455** * Glideåœ†å½¢å›¾ç‰‡ */public class GlideCircleTransform extends BitmapTransformation &#123; public GlideCircleTransform() &#123; super(); &#125; @Override public Bitmap transform(BitmapPool pool, Bitmap toTransform, int outWidth, int outHeight) &#123; return circleCrop(pool, toTransform); &#125; private static Bitmap circleCrop(BitmapPool pool, Bitmap source) &#123; if (source == null) return null; int size = Math.min(source.getWidth(), source.getHeight()); int x = (source.getWidth() - size) / 2; int y = (source.getHeight() - size) / 2; // TODO this could be acquired from the pool too Bitmap squared = Bitmap.createBitmap(source, x, y, size, size); Bitmap result = pool.get(size, size, Bitmap.Config.ARGB_8888); if (result == null) &#123; result = Bitmap.createBitmap(size, size, Bitmap.Config.ARGB_8888); &#125; Canvas canvas = new Canvas(result); Paint paint = new Paint(); paint.setShader(new BitmapShader(squared, BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP)); paint.setAntiAlias(true); float r = size / 2f; canvas.drawCircle(r, r, r, paint); return result; &#125; @Override public void updateDiskCacheKey(MessageDigest messageDigest) &#123; &#125;&#125;//è°ƒç”¨/** * åŠ è½½åœ†å½¢å›¾ç‰‡ */public static void loadCircleImg(Context context, String url, final ImageView imageView) &#123; GlideApp.with(context) .load(url) .placeholder(R.mipmap.ic_launcher) .error(R.mipmap.ic_launcher) .centerCrop() .transform(new GlideCircleTransform()) .into(imageView); &#125; 5ã€GlideåŠ è½½åœ†è§’å›¾ç‰‡ è¯´é“è¿™ä¸ªæˆ‘ä¸å¾—ä¸åæ§½ä¸€ä¸‹ç½‘ä¸Šçš„å„è·¯å¤§ç¥žäº†ï¼Œ4.xå’Œ3.xåŠ è½½åœ†è§’çœŸä¸ä¸€æ ·äº†ï¼Œä¸‹é¢ä¸¾ä¸ªç½‘ä¸Šçš„ä¾‹å­ï¼Œå’Œ3.xå·®ä¸å¤š 12public class GlideRoundTransform extends BitmapTransformation &#123;&#125; å°¼çŽ›ï¼Œæ ¹æœ¬æ˜¾ç¤ºä¸äº†åœ†è§’å•Šï¼ŒåŽæ¥æŸ¥èµ„æ–™æ‰å‘çŽ°åŽŸæ¥æ˜¯Glideåœ†è§’å’ŒcenterCropçš„å†²çªï¼Œä¸è¿‡ä¹Ÿå¾—åˆ°äº†è§£å†³ï¼Œæ„Ÿè°¢è¿™ä½ä½œè€… Glide .centerCrop() å’Œtransformåœ†è§’å›¾ç‰‡ä¸èƒ½åŒæ—¶å­˜åœ¨è§£å†³æ–¹æ³• ä¸‹é¢è´´å‡ºæˆ‘çš„åŠ è½½åœ†è§’çš„æ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/** * åœ†è§’å›¾ç‰‡ */public class GlideRoundTransform extends CenterCrop &#123; private static float radius = 0f; public GlideRoundTransform() &#123; this(4); &#125; public GlideRoundTransform(int dp) &#123; super(); this.radius = Resources.getSystem().getDisplayMetrics().density * dp; &#125; @Override protected Bitmap transform(BitmapPool pool, Bitmap toTransform, int outWidth, int outHeight) &#123; Bitmap transform = super.transform(pool, toTransform, outWidth, outHeight); return roundCrop(pool, transform);// return roundCrop(pool, toTransform); &#125; private static Bitmap roundCrop(BitmapPool pool, Bitmap source) &#123; if (source == null) return null; Bitmap result = pool.get(source.getWidth(), source.getHeight(), Bitmap.Config.ARGB_8888); if (result == null) &#123; result = Bitmap.createBitmap(source.getWidth(), source.getHeight(), Bitmap.Config.ARGB_8888); &#125; Canvas canvas = new Canvas(result); Paint paint = new Paint(); paint.setShader(new BitmapShader(source, BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP)); paint.setAntiAlias(true); RectF rectF = new RectF(0f, 0f, source.getWidth(), source.getHeight()); canvas.drawRoundRect(rectF, radius, radius, paint); return result; &#125; @Override public void updateDiskCacheKey(MessageDigest messageDigest) &#123; &#125;&#125;//è°ƒç”¨/** * åŠ è½½åœ†è§’å›¾ç‰‡ * * @param context * @param url * @param imageView */ public static void loadRoundImg(Context context, String url, final ImageView imageView) &#123; GlideApp.with(context) .load(url) .placeholder(R.mipmap.ic_launcher) .error(R.mipmap.ic_launcher) .centerCrop() .transform(new GlideRoundTransform(8)) .into(imageView); &#125; 6ã€GlideåŠ è½½å›¾ç‰‡è¿›åº¦çš„ç›‘å¬ 12345678910111213141516171819GlideApp.with(context) .load(url) .placeholder(R.mipmap.ic_launcher) .error(R.mipmap.ic_launcher) .centerCrop() .listener(new RequestListener&lt;Drawable&gt;() &#123; @Override public boolean onLoadFailed(@Nullable GlideException e, Object o, Target&lt;Drawable&gt; target, boolean b) &#123; Log.i(TAG, "å›¾ç‰‡åŠ è½½å¤±è´¥ "); return false; &#125; @Override public boolean onResourceReady(Drawable drawable, Object o, Target&lt;Drawable&gt; target, DataSource dataSource, boolean b) &#123; Log.i(TAG, "å›¾ç‰‡åŠ è½½å®Œæˆ: "); return false; &#125; &#125;) .into(imageView);]]></content>
      <categories>
        <category>Android</category>
        <category>Glide</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Glide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android - å›¾ç‰‡å¤„ç†ä¹‹Glide4.0ç‰ˆæœ¬]]></title>
    <url>%2Fposts%2Faf2ff32e.html</url>
    <content type="text"><![CDATA[å‰è¨€ä¸€èˆ¬é¡¹ç›®æˆ‘éƒ½ä¼šä½¿ç”¨Glideä½œä¸ºæˆ‘çš„å›¾ç‰‡åŠ è½½æ¡†æž¶ï¼Œä»–å’ŒPicasso ,çœŸçš„å¾ˆåƒï¼Œéƒ­å¤§ç¥žæ—©å°±åˆ†æžè¿‡äº†ï¼Œå¾ˆè¯¦ç»†ï¼Œè¿™é‡Œä¹Ÿå°±ç®€å•åšä¸ªè®°å½•ã€‚å°ç™½ç™½ä¸€æžšï¼Œå­¦ä¹ è·¯ä¸Š Androidå›¾ç‰‡åŠ è½½æ¡†æž¶æœ€å…¨è§£æžï¼ˆä¸€ï¼‰ï¼ŒGlideçš„åŸºæœ¬ç”¨æ³• Androidå›¾ç‰‡åŠ è½½æ¡†æž¶æœ€å…¨è§£æžï¼ˆäºŒï¼‰ï¼Œä»Žæºç çš„è§’åº¦ç†è§£Glideçš„æ‰§è¡Œæµç¨‹ Androidå›¾ç‰‡åŠ è½½æ¡†æž¶æœ€å…¨è§£æžï¼ˆä¸‰ï¼‰ï¼Œæ·±å…¥æŽ¢ç©¶Glideçš„ç¼“å­˜æœºåˆ¶ Androidå›¾ç‰‡åŠ è½½æ¡†æž¶æœ€å…¨è§£æžï¼ˆå››ï¼‰ï¼ŒçŽ©è½¬Glideçš„å›žè°ƒä¸Žç›‘å¬ Androidå›¾ç‰‡åŠ è½½æ¡†æž¶æœ€å…¨è§£æžï¼ˆäº”ï¼‰ï¼ŒGlideå¼ºå¤§çš„å›¾ç‰‡å˜æ¢åŠŸèƒ½ Androidå›¾ç‰‡åŠ è½½æ¡†æž¶æœ€å…¨è§£æžï¼ˆå…­ï¼‰ï¼ŒæŽ¢ç©¶Glideçš„è‡ªå®šä¹‰æ¨¡å—åŠŸèƒ½ Androidå›¾ç‰‡åŠ è½½æ¡†æž¶æœ€å…¨è§£æžï¼ˆä¸ƒï¼‰ï¼Œå®žçŽ°å¸¦è¿›åº¦çš„Glideå›¾ç‰‡åŠ è½½åŠŸèƒ½ Androidå›¾ç‰‡åŠ è½½æ¡†æž¶æœ€å…¨è§£æžï¼ˆå…«ï¼‰ï¼Œå¸¦ä½ å…¨é¢äº†è§£Glide 4çš„ç”¨æ³• ä¸€ï¼šGitHubbumptech/glideäºŒï¼šä¸‹è½½ä½¿ç”¨ç‚¹å‡»ï¼Œè·³è½¬åˆ°å®˜ç½‘ï¼Œä»‹ç»å¾ˆè¯¦ç»† 1. Gradle1234repositories &#123; mavenCentral() maven &#123; url 'https://maven.google.com' &#125;&#125; 1234dependencies &#123; compile 'com.github.bumptech.glide:glide:4.4.0' annotationProcessor 'com.github.bumptech.glide:compiler:4.4.0'&#125; 2. Android SDK è¦æ±‚ Min Sdk Version - ä½¿ç”¨ Glide éœ€è¦ min SDK ç‰ˆæœ¬ API 14 (Ice Cream Sandwich) æˆ–æ›´é«˜ã€‚ Compile Sdk Version - Glide å¿…é¡»ä½¿ç”¨ API 26 (Oreo) æˆ–æ›´é«˜ç‰ˆæœ¬çš„ SDK æ¥ç¼–è¯‘ã€‚ Support Library Version - Glide ä½¿ç”¨çš„æ”¯æŒåº“ç‰ˆæœ¬ä¸º 27ã€‚ å¦åˆ™ä¼šå‡ºçŽ°å¼‚å¸¸ è§£å†³æ–¹æ¡ˆ12345dependencies &#123; implementation 'com.android.support:appcompat-v7:27.0.2' //è¿™ä¸ªç‰ˆæœ¬çš„å°±å¯ä»¥äº† implementation 'com.github.bumptech.glide:glide:4.4.0' annotationProcessor 'com.github.bumptech.glide:compiler:4.4.0'&#125; 3.æƒé™1234&lt;uses-permission android:name="android.permission.INTERNET"/&gt;&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/&gt;&lt;uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /&gt;&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /&gt; äºŒï¼šapply &amp;&amp; RequestOptions4.0ä¹‹å‰æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œå½“ç„¶çŽ°åœ¨ä¹Ÿæ˜¯å“ˆ 123Glide.with(this) .load(url) .into(img); 4.0ä¹‹åŽï¼Œæœ‰ä¸€ä¸ªæ–°çš„ä¸œè¥¿ 1234 Glide.with(this) .load(url)// .apply(RequestOptions options) .into(img); æ¯”å¦‚ æˆ‘ä»¬åŠ è½½å ä½å›¾å’Œé”™è¯¯å›¾ 1234567RequestOptions options = new RequestOptions() .error(R.drawable.error) .placeholder(R.drawable.loading);Glide.with(this) .load(url) .apply(options) .into(imageView); å°ä¼™ä¼´ä»¬æ²¡çœ‹é”™ï¼Œè¿™æ ·çš„æ–¹å¼ï¼Œæ‘†è„±äº†ï¼Œä»¥å‰é“¾å¼å†™æ³•ä¸­ï¼ŒGlideå¾ˆé•¿å¾ˆé•¿ï¼ŒçŽ°åœ¨çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªRequestOptionsï¼Œå¯¹è±¡ï¼Œå°±æœ‰å°ä¼™ä¼´é—®äº†ï¼Œæœ‰å•¥ç”¨ï¼Œæˆ‘è§‰å¾—ï¼Œæ¯”è¾ƒå®¹æ˜“å°è£…ï¼Œ ä¾‹å¦‚ 123456789101112public class GlideUtil &#123; public static void load(Context context, String url, ImageView imageView, RequestOptions options) &#123; Glide.with(context) .load(url) .apply(options) .into(imageView); &#125;&#125; ä¸‰ï¼šAPI ä»‹ç» API ä»‹ç» å ä½ç¬¦(Placeholder) å½“è¯·æ±‚æ­£åœ¨æ‰§è¡Œæ—¶è¢«å±•ç¤ºçš„ Drawable é”™è¯¯ç¬¦(Error) è¯·æ±‚æ°¸ä¹…æ€§å¤±è´¥æ—¶å±•ç¤º åŽå¤‡å›žè°ƒç¬¦(Fallback) åœ¨è¯·æ±‚çš„url/modelä¸º null æ—¶å±•ç¤º override æŒ‡å®šäº†ä¸€ä¸ªå›¾ç‰‡çš„å°ºå¯¸,Target.SIZE_ORIGINALåŠ è½½å›¾ç‰‡çš„åŽŸå§‹å°ºå¯¸ skipMemoryCache(true) ç¦ç”¨å†…å­˜ç¼“å­˜åŠŸèƒ½ diskCacheStrategy(DiskCacheStrategy.NONE) ç¦ç”¨ç¡¬ç›˜ç¼“å­˜åŠŸèƒ½,å‚æ•°åˆ—è¡¨å¦‚ä¸‹ å››ï¼ˆ1ï¼‰ asBitmap() åªå…è®¸åŠ è½½é™æ€å›¾ç‰‡,ã€‚å¦‚æžœä¼ å…¥çš„æ˜¯GIFå›¾,ä¼šå±•ç¤ºGIFå›¾çš„ç¬¬ä¸€å¸§ asFile() æŒ‡å®šæ–‡ä»¶æ ¼å¼ æ³¨æ„äº‹é¡¹ å¦‚ä¸‹ å››ï¼ˆ2ï¼‰ asDrawable() æŒ‡å®šDrawableæ ¼å¼ submit() ä½¿ç”¨å¦‚ä¸‹å››ï¼ˆ3ï¼‰ transforms å›¾ç‰‡å˜æ¢ï¼ŒGlide é»˜è®¤æœ‰3ä¸ªï¼Œå¦‚ä¸‹å››ï¼ˆ4ï¼‰ å››ï¼š è¡¥å……è¯´æ˜Ž1. diskCacheStrategyå‚æ•°è¡¥å…… å‚æ•° è¯´æ˜Ž DiskCacheStrategy.NONE è¡¨ç¤ºä¸ç¼“å­˜ä»»ä½•å†…å®¹ã€‚ DiskCacheStrategy.DATA è¡¨ç¤ºåªç¼“å­˜åŽŸå§‹å›¾ç‰‡ã€‚ DiskCacheStrategy.RESOURCE è¡¨ç¤ºåªç¼“å­˜è½¬æ¢è¿‡åŽçš„å›¾ç‰‡ã€‚ DiskCacheStrategy.ALL è¡¨ç¤ºæ—¢ç¼“å­˜åŽŸå§‹å›¾ç‰‡ï¼Œä¹Ÿç¼“å­˜è½¬æ¢è¿‡åŽçš„å›¾ç‰‡ã€‚ DiskCacheStrategy.AUTOMATIC è¡¨ç¤ºè®©Glideæ ¹æ®å›¾ç‰‡èµ„æºæ™ºèƒ½åœ°é€‰æ‹©ä½¿ç”¨å“ªä¸€ç§ç¼“å­˜ç­–ç•¥ï¼ˆé»˜è®¤é€‰é¡¹ï¼‰ã€‚ 2. asBitmap()æ³¨æ„å‘ç†Ÿæ‚‰Glide 3çš„æœ‹å‹å¯¹asBitmap()æ–¹æ³•è‚¯å®šä¸ä¼šé™Œç”Ÿå¯¹å§ï¼Ÿä½†æ˜¯åƒä¸‡ä¸è¦è§‰å¾—è¿™é‡Œå°±æ²¡æœ‰é™·é˜±äº†ï¼Œåœ¨Glide 3ä¸­çš„è¯­æ³•æ˜¯å…ˆload()å†asBitmap()çš„ï¼Œè€Œåœ¨Glide 4ä¸­æ˜¯å…ˆasBitmap()å†load()çš„ã€‚ä¹ä¸€çœ‹å¯èƒ½åˆ†è¾¨ä¸å‡ºæ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†å¦‚æžœä½ å†™é”™äº†é¡ºåºå°±è‚¯å®šä¼šæŠ¥é”™äº† 3. submit()é€šè¿‡å¦‚ä¸‹ä»£ç ï¼Œå¯ä»¥èŽ·å–åˆ°ï¼Œä¸‹è½½å¥½çš„å›¾ç‰‡æ”¾åœ¨å“ªï¼Œå¯ä»¥çœ‹åˆ° éƒ½åœ¨cacheä¸‹ 1234567891011121314151617181920 new Thread(new Runnable() &#123; @Override public void run() &#123; try &#123; File file = Glide.with(MainActivity.this) .asFile() .load(url) .submit() .get(); Log.e("Tag", "path--&gt;" + file.getPath()); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (ExecutionException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start();E/Tag: path--&gt;/data/user/0/com.allens.glidedemo/cache/image_manager_disk_cache/309df01e6362ddc8939a4e3c549e8276dffb0446a89f2facee371909301fe76a.0 4. transformså†…ç½®æœ‰è¿™3ä¸ª 12345678RequestOptions options = new RequestOptions() .centerCrop();RequestOptions options = new RequestOptions() .fitCenter();RequestOptions options = new RequestOptions() .circleCrop();//åœ†å½¢ ä¸€èˆ¬æˆ‘ä»¬è¿˜ä¼šè‡ªå·±åŽ»å®šä¹‰ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„3ç§è½¬æ¢ ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å• 1234567891011RequestOptions options = new RequestOptions() .skipMemoryCache(true) .diskCacheStrategy(DiskCacheStrategy.NONE); //åœ†å½¢ .transforms(new CircleTransform(mContext,2, Color.DKGRAY))//å¤–åœˆå®½åº¦ï¼Œå¤–åœˆé¢œè‰² //é»‘ç™½ .transforms(new BlackWhiteTransformation()); //é«˜æ–¯æ¨¡ç³Š èŒƒå›´åœ¨ 0 -- 25 è¶Šå¤§æ¨¡ç³Šç¨‹åº¦è¶Šé«˜ .transforms(new BlurTransformation(mContext, 25)); // (0 &lt; r &lt;= 25) //å¯ä»¥ä½¿ç”¨å¤šç§ .transforms(new BlurTransformation(mContext, 25),new CircleTransform(mContext,2, Color.DKGRAY)) ï¼ˆ1ï¼‰ è½¬æˆé»‘ç™½123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960package com.allens.lib_glide.Transformation;import android.graphics.Bitmap;import android.media.ThumbnailUtils;import android.support.annotation.NonNull;import android.view.animation.Transformation;import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;import com.bumptech.glide.load.resource.bitmap.BitmapTransformation;import java.security.MessageDigest;/** * æè¿°: * &lt;p&gt; é»‘ç™½ * Created by allens on 2018/1/8. */public class BlackWhiteTransformation extends BitmapTransformation &#123; @Override protected Bitmap transform(@NonNull BitmapPool pool, @NonNull Bitmap toTransform, int outWidth, int outHeight) &#123; return convertToBlackWhite(toTransform); &#125; @Override public void updateDiskCacheKey(MessageDigest messageDigest) &#123; &#125; private Bitmap convertToBlackWhite(Bitmap bmp) &#123; int width = bmp.getWidth(); // èŽ·å–ä½å›¾çš„å®½ int height = bmp.getHeight(); // èŽ·å–ä½å›¾çš„é«˜ int[] pixels = new int[width * height]; // é€šè¿‡ä½å›¾çš„å¤§å°åˆ›å»ºåƒç´ ç‚¹æ•°ç»„ bmp.getPixels(pixels, 0, width, 0, 0, width, height); int alpha = 0xFF &lt;&lt; 24; for (int i = 0; i &lt; height; i++) &#123; for (int j = 0; j &lt; width; j++) &#123; int grey = pixels[width * i + j]; //åˆ†ç¦»ä¸‰åŽŸè‰² int red = ((grey &amp; 0x00FF0000) &gt;&gt; 16); int green = ((grey &amp; 0x0000FF00) &gt;&gt; 8); int blue = (grey &amp; 0x000000FF); //è½¬åŒ–æˆç°åº¦åƒç´  grey = (int) (red * 0.3 + green * 0.59 + blue * 0.11); grey = alpha | (grey &lt;&lt; 16) | (grey &lt;&lt; 8) | grey; pixels[width * i + j] = grey; &#125; &#125; //æ–°å»ºå›¾ç‰‡ Bitmap newBmp = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565); //è®¾ç½®å›¾ç‰‡æ•°æ® newBmp.setPixels(pixels, 0, width, 0, 0, width, height); Bitmap resizeBmp = ThumbnailUtils.extractThumbnail(newBmp, 380, 460); return resizeBmp; &#125;&#125; ï¼ˆ2ï¼‰é«˜æ–¯æ¨¡ç³Š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283package com.allens.lib_glide.Transformation;import android.annotation.TargetApi;import android.content.Context;import android.graphics.Bitmap;import android.graphics.Canvas;import android.graphics.Paint;import android.os.Build;import android.renderscript.Allocation;import android.renderscript.Element;import android.renderscript.RSRuntimeException;import android.renderscript.RenderScript;import android.renderscript.ScriptIntrinsicBlur;import android.support.annotation.NonNull;import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;import com.bumptech.glide.load.resource.bitmap.BitmapTransformation;import java.security.MessageDigest;/** * æè¿°: é«˜æ–¯æ¨¡ç³Š * &lt;p&gt; * Created by allens on 2018/1/8. */public class BlurTransformation extends BitmapTransformation &#123; private Context context; private float blurRadius; public BlurTransformation(Context context, float blurRadius) &#123; this.context = context; this.blurRadius = blurRadius; &#125; @Override protected Bitmap transform(@NonNull BitmapPool pool, @NonNull Bitmap toTransform, int outWidth, int outHeight) &#123; return blurBitmap(context, toTransform, blurRadius, outWidth, outHeight); &#125; @Override public void updateDiskCacheKey(MessageDigest messageDigest) &#123; &#125; /** * @param context ä¸Šä¸‹æ–‡å¯¹è±¡ * @param image éœ€è¦æ¨¡ç³Šçš„å›¾ç‰‡ * @param outWidth è¾“å…¥å‡ºçš„å®½åº¦ * @param outHeight è¾“å‡ºçš„é«˜åº¦ * @return æ¨¡ç³Šå¤„ç†åŽçš„Bitmap */ @TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1) public Bitmap blurBitmap(Context context, Bitmap image, float blurRadius, int outWidth, int outHeight) &#123; // å°†ç¼©å°åŽçš„å›¾ç‰‡åšä¸ºé¢„æ¸²æŸ“çš„å›¾ç‰‡ Bitmap inputBitmap = Bitmap.createScaledBitmap(image, outWidth, outHeight, false); // åˆ›å»ºä¸€å¼ æ¸²æŸ“åŽçš„è¾“å‡ºå›¾ç‰‡ Bitmap outputBitmap = Bitmap.createBitmap(inputBitmap); // åˆ›å»ºRenderScriptå†…æ ¸å¯¹è±¡ RenderScript rs = RenderScript.create(context); // åˆ›å»ºä¸€ä¸ªæ¨¡ç³Šæ•ˆæžœçš„RenderScriptçš„å·¥å…·å¯¹è±¡ ScriptIntrinsicBlur blurScript = ScriptIntrinsicBlur.create(rs, Element.U8_4(rs)); // ç”±äºŽRenderScriptå¹¶æ²¡æœ‰ä½¿ç”¨VMæ¥åˆ†é…å†…å­˜,æ‰€ä»¥éœ€è¦ä½¿ç”¨Allocationç±»æ¥åˆ›å»ºå’Œåˆ†é…å†…å­˜ç©ºé—´ // åˆ›å»ºAllocationå¯¹è±¡çš„æ—¶å€™å…¶å®žå†…å­˜æ˜¯ç©ºçš„,éœ€è¦ä½¿ç”¨copyTo()å°†æ•°æ®å¡«å……è¿›åŽ» Allocation tmpIn = Allocation.createFromBitmap(rs, inputBitmap); Allocation tmpOut = Allocation.createFromBitmap(rs, outputBitmap); // è®¾ç½®æ¸²æŸ“çš„æ¨¡ç³Šç¨‹åº¦, 25fæ˜¯æœ€å¤§æ¨¡ç³Šåº¦ if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) &#123; blurScript.setRadius(blurRadius); &#125; // è®¾ç½®blurScriptå¯¹è±¡çš„è¾“å…¥å†…å­˜ blurScript.setInput(tmpIn); // å°†è¾“å‡ºæ•°æ®ä¿å­˜åˆ°è¾“å‡ºå†…å­˜ä¸­ blurScript.forEach(tmpOut); // å°†æ•°æ®å¡«å……åˆ°Allocationä¸­ tmpOut.copyTo(outputBitmap); return outputBitmap; &#125;&#125; ï¼ˆ3ï¼‰ åœ†å½¢123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475package com.allens.lib_glide.Transformation;import android.content.Context;import android.content.res.Resources;import android.graphics.Bitmap;import android.graphics.BitmapShader;import android.graphics.Canvas;import android.graphics.Paint;import android.support.annotation.NonNull;import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;import com.bumptech.glide.load.resource.bitmap.BitmapTransformation;import java.security.MessageDigest;/** * æè¿°: * &lt;p&gt; åœ†å½¢ * Created by allens on 2018/1/8. */public class CircleTransform extends BitmapTransformation &#123; private Paint mBorderPaint; private float mBorderWidth; public CircleTransform(Context context) &#123; super(context); &#125; public CircleTransform(Context context, int borderWidth, int borderColor) &#123; super(context); mBorderWidth = Resources.getSystem().getDisplayMetrics().density * borderWidth; mBorderPaint = new Paint(); mBorderPaint.setDither(true); mBorderPaint.setAntiAlias(true); mBorderPaint.setColor(borderColor); mBorderPaint.setStyle(Paint.Style.STROKE); mBorderPaint.setStrokeWidth(mBorderWidth); &#125; @Override protected Bitmap transform(@NonNull BitmapPool pool, @NonNull Bitmap toTransform, int outWidth, int outHeight) &#123; return circleCrop(pool, toTransform); &#125; @Override public void updateDiskCacheKey(MessageDigest messageDigest) &#123; &#125; private Bitmap circleCrop(BitmapPool pool, Bitmap source) &#123; if (source == null) &#123; return null; &#125; int size = (int) (Math.min(source.getWidth(), source.getHeight()) - (mBorderWidth / 2)); int x = (source.getWidth() - size) / 2; int y = (source.getHeight() - size) / 2; Bitmap squared = Bitmap.createBitmap(source, x, y, size, size); Bitmap result = pool.get(size, size, Bitmap.Config.ARGB_8888); if (result == null) &#123; result = Bitmap.createBitmap(size, size, Bitmap.Config.ARGB_8888); &#125; Canvas canvas = new Canvas(result); Paint paint = new Paint(); paint.setShader(new BitmapShader(squared, BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP)); paint.setAntiAlias(true); float r = size / 2f; canvas.drawCircle(r, r, r, paint); if (mBorderPaint != null) &#123; float borderRadius = r - mBorderWidth / 2; canvas.drawCircle(r, r, borderRadius, mBorderPaint); &#125; return result; &#125;&#125; 4.0 åœ†è§’123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778package com.starot.spark.transformation;import android.content.Context;import android.content.res.Resources;import android.graphics.Bitmap;import android.graphics.BitmapShader;import android.graphics.Canvas;import android.graphics.Paint;import android.support.annotation.NonNull;import com.bumptech.glide.load.engine.bitmap_recycle.BitmapPool;import com.bumptech.glide.load.resource.bitmap.BitmapTransformation;import java.security.MessageDigest;/** * æè¿°: * &lt;p&gt; åœ†å½¢ * * @author allens * @date 2018/1/8 */public class CircleTransform extends BitmapTransformation &#123; private Paint mBorderPaint; private float mBorderWidth; public CircleTransform(Context context) &#123; super(context); &#125; public CircleTransform(Context context, int borderWidth, int borderColor) &#123; super(context); mBorderWidth = Resources.getSystem().getDisplayMetrics().density * borderWidth; mBorderPaint = new Paint(); mBorderPaint.setDither(true); mBorderPaint.setAntiAlias(true); mBorderPaint.setColor(borderColor); mBorderPaint.setStyle(Paint.Style.STROKE); mBorderPaint.setStrokeWidth(mBorderWidth); &#125; @Override protected Bitmap transform(@NonNull BitmapPool pool, @NonNull Bitmap toTransform, int outWidth, int outHeight) &#123; return circleCrop(pool, toTransform); &#125; @Override public void updateDiskCacheKey(MessageDigest messageDigest) &#123; &#125; private Bitmap circleCrop(BitmapPool pool, Bitmap source) &#123; if (source == null) &#123; return null; &#125; int size = (int) (Math.min(source.getWidth(), source.getHeight()) - (mBorderWidth / 2)); int x = (source.getWidth() - size) / 2; int y = (source.getHeight() - size) / 2; Bitmap squared = Bitmap.createBitmap(source, x, y, size, size); Bitmap result = pool.get(size, size, Bitmap.Config.ARGB_8888); if (result == null) &#123; result = Bitmap.createBitmap(size, size, Bitmap.Config.ARGB_8888); &#125; Canvas canvas = new Canvas(result); Paint paint = new Paint(); paint.setShader(new BitmapShader(squared, BitmapShader.TileMode.CLAMP, BitmapShader.TileMode.CLAMP)); paint.setAntiAlias(true); float r = size / 2f; canvas.drawCircle(r, r, r, paint); if (mBorderPaint != null) &#123; float borderRadius = r - mBorderWidth / 2; canvas.drawCircle(r, r, borderRadius, mBorderPaint); &#125; return result; &#125;&#125; 5.Generated APIå¦‚æžœ4.0ç”¨çš„ä¸çˆ½ï¼Œå°±æƒ³ä½¿ç”¨3.0ç‰ˆæœ¬çš„é‚£ç§é“¾å¼å†™æ³•,å°†Glide å…³é”®å­—æ”¹æˆ GlideAppå³å¯ 123456789GlideApp.with(this) .load(url) .placeholder(R.drawable.loading) .error(R.drawable.error) .skipMemoryCache(true) .diskCacheStrategy(DiskCacheStrategy.NONE) .override(Target.SIZE_ORIGINAL) .circleCrop() .into(imageView);]]></content>
      <categories>
        <category>Android</category>
        <category>Glide</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Glide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidï¼šæ—¶é—´å·¥å…·ç±» -- æ—¶é—´æˆ³è½¬æ¢æˆæ—¥æœŸï¼Œæ—¥æœŸè½¬æ¢æˆæ—¶é—´æˆ³]]></title>
    <url>%2Fposts%2F29c9b34b.html</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486 public class DateUtils &#123; public static String getTodayDateTime() &#123; SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.getDefault()); return format.format(new Date()); &#125; /** * æŽ‰æ­¤æ–¹æ³•è¾“å…¥æ‰€è¦è½¬æ¢çš„æ—¶é—´è¾“å…¥ä¾‹å¦‚ï¼ˆ"2014å¹´06æœˆ14æ—¥16æ—¶09åˆ†00ç§’"ï¼‰è¿”å›žæ—¶é—´æˆ³ * * @param time * @return */ public String data(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥HHæ—¶mmåˆ†ssç§’", Locale.CHINA); Date date; String times = null; try &#123; date = sdr.parse(time); long l = date.getTime(); String stf = String.valueOf(l); times = stf.substring(0, 10); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return times; &#125; public static String getTodayDateTimes() &#123; SimpleDateFormat format = new SimpleDateFormat("MMæœˆddæ—¥", Locale.getDefault()); return format.format(new Date()); &#125; /** * èŽ·å–å½“å‰æ—¶é—´ * * @return */ public static String getCurrentTime_Today() &#123; SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss"); return sdf.format(new java.util.Date()); &#125; /** * è°ƒæ­¤æ–¹æ³•è¾“å…¥æ‰€è¦è½¬æ¢çš„æ—¶é—´è¾“å…¥ä¾‹å¦‚ï¼ˆ"2014-06-14-16-09-00"ï¼‰è¿”å›žæ—¶é—´æˆ³ * * @param time * @return */ public static String dataOne(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss", Locale.CHINA); Date date; String times = null; try &#123; date = sdr.parse(time); long l = date.getTime(); String stf = String.valueOf(l); times = stf.substring(0, 10); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return times; &#125; public static String getTimestamp(String time, String type) &#123; SimpleDateFormat sdr = new SimpleDateFormat(type, Locale.CHINA); Date date; String times = null; try &#123; date = sdr.parse(time); long l = date.getTime(); String stf = String.valueOf(l); times = stf.substring(0, 10); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return times; &#125; /** * è°ƒç”¨æ­¤æ–¹æ³•è¾“å…¥æ‰€è¦è½¬æ¢çš„æ—¶é—´æˆ³è¾“å…¥ä¾‹å¦‚ï¼ˆ1402733340ï¼‰è¾“å‡ºï¼ˆ"2014å¹´06æœˆ14æ—¥16æ—¶09åˆ†00ç§’"ï¼‰ * * @param time * @return */ public static String times(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥HHæ—¶mmåˆ†ssç§’"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); return times; &#125; /** * è°ƒç”¨æ­¤æ–¹æ³•è¾“å…¥æ‰€è¦è½¬æ¢çš„æ—¶é—´æˆ³è¾“å…¥ä¾‹å¦‚ï¼ˆ1402733340ï¼‰è¾“å‡ºï¼ˆ"2014-06-14 16:09:00"ï¼‰ * * @param time * @return */ public static String timedate(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); return times; &#125; /** * è°ƒç”¨æ­¤æ–¹æ³•è¾“å…¥æ‰€è¦è½¬æ¢çš„æ—¶é—´æˆ³è¾“å…¥ä¾‹å¦‚ï¼ˆ1402733340ï¼‰è¾“å‡ºï¼ˆ"2014å¹´06æœˆ14æ—¥16:09"ï¼‰ * * @param time * @return */ public static String timet(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥ HH:mm"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); return times; &#125; /** * @param timeæ–œæ åˆ†å¼€ * @return */ public static String timeslash(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyy/MM/dd,HH:mm"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); return times; &#125; /** * @param timeæ–œæ åˆ†å¼€ * @return */ public static String timeslashData(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyy/MM/dd"); @SuppressWarnings("unused") long lcc = Long.valueOf(time);// int i = Integer.parseInt(time); String times = sdr.format(new Date(lcc * 1000L)); return times; &#125; /** * @param timeæ–œæ åˆ†å¼€ * @return */ public static String timeMinute(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("HH:mm"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); return times; &#125; public static String tim(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyyMMdd HH:mm"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); return times; &#125; public static String time(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyy-MM-dd HH:mm"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); return times; &#125; // è°ƒç”¨æ­¤æ–¹æ³•è¾“å…¥æ‰€è¦è½¬æ¢çš„æ—¶é—´æˆ³ä¾‹å¦‚ï¼ˆ1402733340ï¼‰è¾“å‡ºï¼ˆ"2014å¹´06æœˆ14æ—¥16æ—¶09åˆ†00ç§’"ï¼‰ public static String times(long timeStamp) &#123; SimpleDateFormat sdr = new SimpleDateFormat("MMæœˆddæ—¥ # HH:mm"); return sdr.format(new Date(timeStamp)).replaceAll("#", getWeek(timeStamp)); &#125; private static String getWeek(long timeStamp) &#123; int mydate = 0; String week = null; Calendar cd = Calendar.getInstance(); cd.setTime(new Date(timeStamp)); mydate = cd.get(Calendar.DAY_OF_WEEK); // èŽ·å–æŒ‡å®šæ—¥æœŸè½¬æ¢æˆæ˜ŸæœŸå‡  if (mydate == 1) &#123; week = "å‘¨æ—¥"; &#125; else if (mydate == 2) &#123; week = "å‘¨ä¸€"; &#125; else if (mydate == 3) &#123; week = "å‘¨äºŒ"; &#125; else if (mydate == 4) &#123; week = "å‘¨ä¸‰"; &#125; else if (mydate == 5) &#123; week = "å‘¨å››"; &#125; else if (mydate == 6) &#123; week = "å‘¨äº”"; &#125; else if (mydate == 7) &#123; week = "å‘¨å…­"; &#125; return week; &#125; // å¹¶ç”¨åˆ†å‰²ç¬¦æŠŠæ—¶é—´åˆ†æˆæ—¶é—´æ•°ç»„ /** * è°ƒç”¨æ­¤æ–¹æ³•è¾“å…¥æ‰€è¦è½¬æ¢çš„æ—¶é—´æˆ³è¾“å…¥ä¾‹å¦‚ï¼ˆ1402733340ï¼‰è¾“å‡ºï¼ˆ"2014-06-14-16-09-00"ï¼‰ * * @param time * @return */ public String timesOne(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); return times; &#125; public static String timesTwo(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyy-MM-dd"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); return times; &#125; /** * å¹¶ç”¨åˆ†å‰²ç¬¦æŠŠæ—¶é—´åˆ†æˆæ—¶é—´æ•°ç»„ * * @param time * @return */ public static String[] timestamp(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥HHæ—¶mmåˆ†ssç§’"); @SuppressWarnings("unused") long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); String[] fenge = times.split("[å¹´æœˆæ—¥æ—¶åˆ†ç§’]"); return fenge; &#125; /** * æ ¹æ®ä¼ é€’çš„ç±»åž‹æ ¼å¼åŒ–æ—¶é—´ * * @param str * @param type * ä¾‹å¦‚ï¼šyy-MM-dd * @return */ public static String getDateTimeByMillisecond(String str, String type) &#123; Date date = new Date(Long.valueOf(str)); SimpleDateFormat format = new SimpleDateFormat(type); String time = format.format(date); return time; &#125; /** * åˆ†å‰²ç¬¦æŠŠæ—¶é—´åˆ†æˆæ—¶é—´æ•°ç»„ * * @param time * @return */ public String[] division(String time) &#123; String[] fenge = time.split("[å¹´æœˆæ—¥æ—¶åˆ†ç§’]"); return fenge; &#125; /** * è¾“å…¥æ—¶é—´æˆ³å˜æ˜ŸæœŸ * * @param time * @return */ public static String changeweek(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥HHæ—¶mmåˆ†ssç§’"); long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); Date date = null; int mydate = 0; String week = null; try &#123; date = sdr.parse(times); Calendar cd = Calendar.getInstance(); cd.setTime(date); mydate = cd.get(Calendar.DAY_OF_WEEK); // èŽ·å–æŒ‡å®šæ—¥æœŸè½¬æ¢æˆæ˜ŸæœŸå‡  &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; if (mydate == 1) &#123; week = "æ˜ŸæœŸæ—¥"; &#125; else if (mydate == 2) &#123; week = "æ˜ŸæœŸä¸€"; &#125; else if (mydate == 3) &#123; week = "æ˜ŸæœŸäºŒ"; &#125; else if (mydate == 4) &#123; week = "æ˜ŸæœŸä¸‰"; &#125; else if (mydate == 5) &#123; week = "æ˜ŸæœŸå››"; &#125; else if (mydate == 6) &#123; week = "æ˜ŸæœŸäº”"; &#125; else if (mydate == 7) &#123; week = "æ˜ŸæœŸå…­"; &#125; return week; &#125; /** * èŽ·å–æ—¥æœŸå’Œæ˜ŸæœŸ ä¾‹å¦‚ï¼šï¼’ï¼ï¼‘ï¼”ï¼ï¼‘ï¼‘ï¼ï¼‘ï¼“ ï¼‘ï¼‘:ï¼ï¼ æ˜ŸæœŸä¸€ * * @param time * @param type * @return */ public static String getDateAndWeek(String time, String type) &#123; return getDateTimeByMillisecond(time + "000", type) + " " + changeweekOne(time); &#125; /** * è¾“å…¥æ—¶é—´æˆ³å˜æ˜ŸæœŸ * * @param time * @return */ public static String changeweekOne(String time) &#123; SimpleDateFormat sdr = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss"); long lcc = Long.valueOf(time); int i = Integer.parseInt(time); String times = sdr.format(new Date(i * 1000L)); Date date = null; int mydate = 0; String week = null; try &#123; date = sdr.parse(times); Calendar cd = Calendar.getInstance(); cd.setTime(date); mydate = cd.get(Calendar.DAY_OF_WEEK); // èŽ·å–æŒ‡å®šæ—¥æœŸè½¬æ¢æˆæ˜ŸæœŸå‡  &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; if (mydate == 1) &#123; week = "æ˜ŸæœŸæ—¥"; &#125; else if (mydate == 2) &#123; week = "æ˜ŸæœŸä¸€"; &#125; else if (mydate == 3) &#123; week = "æ˜ŸæœŸäºŒ"; &#125; else if (mydate == 4) &#123; week = "æ˜ŸæœŸä¸‰"; &#125; else if (mydate == 5) &#123; week = "æ˜ŸæœŸå››"; &#125; else if (mydate == 6) &#123; week = "æ˜ŸæœŸäº”"; &#125; else if (mydate == 7) &#123; week = "æ˜ŸæœŸå…­"; &#125; return week; &#125; /** * èŽ·å–å½“å‰æ—¶é—´ * * @return */ public static String getCurrentTime() &#123; SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm"); return sdf.format(new java.util.Date()); &#125; /** * è¾“å…¥æ—¥æœŸå¦‚ï¼ˆ2014å¹´06æœˆ14æ—¥16æ—¶09åˆ†00ç§’ï¼‰è¿”å›žï¼ˆæ˜ŸæœŸæ•°ï¼‰ * * @param time * @return */ public String week(String time) &#123; Date date = null; SimpleDateFormat sdr = new SimpleDateFormat("yyyyå¹´MMæœˆddæ—¥HHæ—¶mmåˆ†ssç§’"); int mydate = 0; String week = null; try &#123; date = sdr.parse(time); Calendar cd = Calendar.getInstance(); cd.setTime(date); mydate = cd.get(Calendar.DAY_OF_WEEK); // èŽ·å–æŒ‡å®šæ—¥æœŸè½¬æ¢æˆæ˜ŸæœŸå‡  &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; if (mydate == 1) &#123; week = "æ˜ŸæœŸæ—¥"; &#125; else if (mydate == 2) &#123; week = "æ˜ŸæœŸä¸€"; &#125; else if (mydate == 3) &#123; week = "æ˜ŸæœŸäºŒ"; &#125; else if (mydate == 4) &#123; week = "æ˜ŸæœŸä¸‰"; &#125; else if (mydate == 5) &#123; week = "æ˜ŸæœŸå››"; &#125; else if (mydate == 6) &#123; week = "æ˜ŸæœŸäº”"; &#125; else if (mydate == 7) &#123; week = "æ˜ŸæœŸå…­"; &#125; return week; &#125; /** * è¾“å…¥æ—¥æœŸå¦‚ï¼ˆ2014-06-14-16-09-00ï¼‰è¿”å›žï¼ˆæ˜ŸæœŸæ•°ï¼‰ * * @param time * @return */ public String weekOne(String time) &#123; Date date = null; SimpleDateFormat sdr = new SimpleDateFormat("yyyy-MM-dd-HH-mm-ss"); int mydate = 0; String week = null; try &#123; date = sdr.parse(time); Calendar cd = Calendar.getInstance(); cd.setTime(date); mydate = cd.get(Calendar.DAY_OF_WEEK); // èŽ·å–æŒ‡å®šæ—¥æœŸè½¬æ¢æˆæ˜ŸæœŸå‡  &#125; catch (Exception e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; if (mydate == 1) &#123; week = "æ˜ŸæœŸæ—¥"; &#125; else if (mydate == 2) &#123; week = "æ˜ŸæœŸä¸€"; &#125; else if (mydate == 3) &#123; week = "æ˜ŸæœŸäºŒ"; &#125; else if (mydate == 4) &#123; week = "æ˜ŸæœŸä¸‰"; &#125; else if (mydate == 5) &#123; week = "æ˜ŸæœŸå››"; &#125; else if (mydate == 6) &#123; week = "æ˜ŸæœŸäº”"; &#125; else if (mydate == 7) &#123; week = "æ˜ŸæœŸå…­"; &#125; return week; &#125; &#125;]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å·¥å…·ç±»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android éŸ³é¢‘amræ–‡ä»¶æ—¶é•¿]]></title>
    <url>%2Fposts%2F45412865.html</url>
    <content type="text"><![CDATA[ä¸€ã€æ–‡ä»¶æ—¶é•¿èŽ·å– 1234567891011public int getDurations()&#123; String curAudioFile = â€œXXX.amrâ€; MediaPlayer mediaPlayer = new MediaPlayer(); mediaPlayer.setDataSource(curAudioFile); mediaPlayer.prepare(); return mediaPlayer.getDuration();// å•ä½æ¯«ç§’&#125; äºŒã€æ–‡ä»¶æ—¶é•¿è½¬æ¢** 1234567891011121314151617181920212223242526272829303132333435private static String getAudioDuration(int nDuration0) &#123; DecimalFormat df = new DecimalFormat("#.00"); String fileSizeString = ""; String wrongSize = "0ms"; if (nDuration0 == 0) &#123; return wrongSize; &#125; if (nDuration0 &lt; 1000) &#123; fileSizeString = df.format((double) nDuration0) + "ms"; &#125; else if (nDuration0 &lt; 60000) &#123; fileSizeString = df.format((double) nDuration0 / 1000) + "s"; &#125; else if (nDuration0 &lt; 3600000) &#123; fileSizeString = df.format((double) nDuration0 / 60000) + "min"; &#125; else &#123; fileSizeString = df.format((double) nDuration0 / 3600000) + "h"; &#125; return fileSizeString;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­å®žçŽ°å»¶æ—¶æ‰§è¡Œæ“ä½œçš„å‡ ç§æ–¹æ³•]]></title>
    <url>%2Fposts%2Ffdc60895.html</url>
    <content type="text"><![CDATA[åœ¨Androidå¼€å‘ä¸­æˆ‘ä»¬å¯èƒ½ä¼šæœ‰å»¶æ—¶æ‰§è¡ŒæŸä¸ªæ“ä½œçš„éœ€æ±‚ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯åŠ¨åº”ç”¨çš„æ—¶å€™ï¼Œä¸€å¼€å§‹å‘ˆçŽ°çš„æ˜¯ä¸€ä¸ªå¼•å¯¼é¡µé¢ï¼Œè¿‡äº†ä¸¤ä¸‰ç§’åŽï¼Œä¼šè‡ªåŠ¨è·³è½¬åˆ°ä¸»ç•Œé¢ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå»¶æ—¶æ“ä½œã€‚ä¸‹é¢æ˜¯å®žçŽ°å»¶æ—¶æ‰§è¡Œæ“ä½œçš„å‡ ç§æ–¹æ³•ï¼š ä½¿ç”¨çº¿ç¨‹çš„ä¼‘çœ å®žçŽ°å»¶æ—¶æ“ä½œ12345678910new Thread() &#123; @Override public void run() &#123; super.run(); Thread.sleep(3000);//ä¼‘çœ 3ç§’ /** * è¦æ‰§è¡Œçš„æ“ä½œ */ &#125; &#125;.start(); ä½¿ç”¨TimerTaskå®žçŽ°å»¶æ—¶æ“ä½œ**12345678910TimerTask task = new TimerTask() &#123; @Override public void run() &#123; /** *è¦æ‰§è¡Œçš„æ“ä½œ */ &#125; &#125;; Timer timer = new Timer(); timer.schedule(task, 3000);//3ç§’åŽæ‰§è¡ŒTimeTaskçš„runæ–¹æ³• ä½¿ç”¨Handlerçš„postDelayedæ–¹æ³•å®žçŽ°å»¶æ—¶æ“ä½œ123456789Handler handler = new Handler(); handler.postDelayed(new Runnable() &#123; @Override public void run() &#123; /** *è¦æ‰§è¡Œçš„æ“ä½œ */ &#125; &#125;, 3000);//3ç§’åŽæ‰§è¡ŒRunnableä¸­çš„runæ–¹æ³•]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[androidåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨,æ–°å»ºã€åˆ é™¤]]></title>
    <url>%2Fposts%2F547382f.html</url>
    <content type="text"><![CDATA[123456public static boolean fileIsExists(String fileName) &#123; File folder = new File(fileName); if (!folder.exists()) &#123; folder.mkdir(); &#125; &#125; 1234567891011121314//åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ public boolean fileIsExists(String strFile) &#123; try &#123; File f = new File(strFile); if (!f.exists()) &#123; return false; &#125; &#125; catch (Exception e) &#123; return false; &#125; return true;&#125; 123456789101112131415 /** * è¦åˆ é™¤çš„æ–‡ä»¶å¤¹çš„æ‰€åœ¨ä½ç½® */ public static void deleteFile(File file) &#123; if (file.isDirectory()) &#123; File[] files = file.listFiles(); for (int i = 0; i &lt; files.length; i++) &#123; File f = files[i]; deleteFile(f); &#125;// file.delete();//å¦‚è¦ä¿ç•™æ–‡ä»¶å¤¹ï¼Œåªåˆ é™¤æ–‡ä»¶ï¼Œè¯·æ³¨é‡Šè¿™è¡Œ &#125; else if (file.exists()) &#123; file.delete(); &#125; &#125;]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidçŸ¥è¯†ç‚¹å½’çº³æ€»ç»“æçº²]]></title>
    <url>%2Fposts%2F9a278d8c.html</url>
    <content type="text"><![CDATA[Androidéƒ¨åˆ† ä¸€ã€Androidå››å¤§ç»„ä»¶ äºŒã€Fragmentç›¸å…³ ä¸‰ã€åŠ¨ç”»ç›¸å…³ å››ã€å¸ƒå±€ç›¸å…³ äº”ã€æ•°æ®å­˜å‚¨ å…­ã€çº¿ç¨‹ã€è¿›ç¨‹ ä¸ƒã€ç½‘ç»œ å…«ã€WebView ä¹ã€å›¾ç‰‡ åã€Cameraç›¸å…³ åä¸€ã€éŸ³è§†é¢‘ç›¸å…³ åäºŒã€ViewPagerç›¸å…³ åä¸‰ã€RecyclerViewç›¸å…³ åå››ã€Canvasç›¸å…³ åäº”ã€ä¼ æ„Ÿå™¨ç›¸å…³ åå…­ã€æ€§èƒ½ä¼˜åŒ– åä¸ƒã€UIé€‚é… åå…«ã€Androidä¸­çš„Context åä¹ã€åºåˆ—åŒ–ä¸Žååºåˆ—åŒ– äºŒåã€JSONè§£æž äºŒåä¸€ã€äºŒç»´ç  äºŒåäºŒã€Permissionæƒé™ äºŒåä¸‰ã€Activityå·¥ä½œåŽŸç† äºŒåå››ã€Viewäº‹ä»¶åˆ†å‘æœºåˆ¶ äºŒåäº”ã€Viewçš„ç»˜åˆ¶æµç¨‹ äºŒåå…­ã€è‡ªå®šä¹‰viewåŸºæœ¬æµç¨‹ äºŒåä¸ƒã€Apkçš„æ‰“åŒ…/å®‰è£…è¿‡ç¨‹ äºŒåå…«ã€Appæ··æ·† äºŒåä¹ã€Appå†·å¯åŠ¨ä¼˜åŒ– ä¸‰åã€å­çº¿ç¨‹ä¸èƒ½æ›´æ–°UI ä¸‰åä¸€ã€Android Studio Gradle ä¸‰åäºŒã€adbç›¸å…³ ä¸‰åä¸‰ã€é€†å‘å®‰å…¨ ä¸‰åå››ã€NDKå¼€å‘ ä¸‰åäº”ã€è®¾è®¡æ¨¡å¼ ä¸‰åå…­ã€æž¶æž„æ¨¡å¼ RxJava Kotlin Dagger 2 Flutter Weex Hybrid æ··åˆå¼€å‘ OpenGL æµ‹è¯•å·¥å…·å…¶ä»–å†·é—¨çŸ¥è¯†å…¶ä»–è¡¥å……ï¼šJavaéƒ¨åˆ† ä¸€ã€JavaåŸºç¡€ äºŒã€Javaæ•°æ®ç»“æž„å’Œç®—æ³• Androidéƒ¨åˆ† ä¸€ã€Androidå››å¤§ç»„ä»¶1ï¼šActivityç›¸å…³ï¼Œ Activityç”Ÿå‘½å‘¨æœŸç†è§£ï¼ŒActivityå¯åŠ¨å¦ä¸€ä¸ªActivityè¿”å›žçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œ Activityå››ç§å¯åŠ¨æ¨¡å¼ï¼ŒActivityä»»åŠ¡æ ˆç†è§£ï¼ˆå…ˆè¿›åŽå‡ºï¼‰ï¼ŒActivityçš„æ˜¾ç¤ºéšå¼å¯åŠ¨ï¼ŒActivityçš„éšå¼å¯åŠ¨ï¼ˆç†è§£Schemeè·³è½¬åè®®ï¼‰ï¼ŒActivityä¹‹é—´çš„è·³è½¬ä¸Žå›žè°ƒï¼ŒActivityä¹‹é—´çš„intentæ•°æ®ä¼ é€’ï¼Œç†è§£Activityå·¥ä½œåŽŸç†Activityä¸ŽWindowä¹‹é—´çš„å…³ç³»ï¼ŒActivityå’ŒdectorViewç­‰2ï¼šServiceç›¸å…³ï¼Œ Serviceç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ŒServiceçš„ä¸¤ç§å¯åŠ¨æ–¹å¼çš„ä½¿ç”¨ï¼Œstartä¸Žbindçš„åŒºåˆ«ï¼Œä½•æ—¶éœ€è¦åœæ­¢Service, Serviceçš„ä½¿ç”¨åœºæ™¯ç†è§£, åŽå°Serviceä¸Žå‰å°Serviceï¼Œå¦‚ä½•æé«˜åŽå°æœåŠ¡çš„å­˜æ´»çŽ‡ï¼Œå¦‚ä½•ä¿è¯ä¸€ä¸ªåŽå°æœåŠ¡ä¸è¢«kill, IntentServiceçš„ä½¿ç”¨ç­‰3ï¼šBroadcastReceiverç›¸å…³ï¼Œå¹¿æ’­çš„ä¸¤ç§æ³¨å†Œæ–¹å¼ï¼ˆéšå¼/æ˜¾ç¤ºå¹¿æ’­ï¼‰ï¼Œå¹¿æ’­çš„æ³¨å†Œ/åæ³¨å†Œæ³¨æ„äº‹é¡¹ï¼Œæœ‰åºå¹¿æ’­ã€æœ¬åœ°å¹¿æ’­ï¼ŒæŽ¥æ”¶åˆ°å¹¿æ’­ActionåŽçš„å¤„ç†æ–¹æ³•ç­‰4ï¼šContentProviderç›¸å…³ï¼ŒContentProviderçš„ä½¿ç”¨ï¼Œå¦‚ä½•ä½¿ç”¨ContentProviderå®žçŽ°åº”ç”¨é—´çš„æ•°æ®å…±äº«ï¼ŒContentProviderä½¿ç”¨çš„content URIå½¢å¼çš„ç†è§£ç­‰ äºŒã€Fragmentç›¸å…³è™½ç„¶Fragmentä¸å±žäºŽAndroidå››å¤§ç»„ä»¶ï¼ˆä¹Ÿæœ‰äººè¯´å®ƒæ˜¯ç¬¬äº”å¤§ç»„ä»¶ï¼‰ï¼Œä½†æ˜¯ä½œä¸ºAndroidæ—¥å¸¸å¼€å‘ä½¿ç”¨çš„é«˜é¢‘ç»„ä»¶ä¹‹ä¸€ï¼Œå¿…é¡»è¦äº†è§£Fragmentçš„ä½¿ç”¨æ–¹æ³•å’Œæ³¨æ„äº‹é¡¹ 1ï¼šFragmentçš„ç”Ÿå‘½å‘¨æœŸï¼Œä»¥åŠFragmentç”Ÿå‘½å‘¨æœŸä¸Žå…¶å®¿ä¸»Activityç”Ÿå‘½å‘¨æœŸçš„å¯¹åº”å…³ç³»2ï¼šå¦‚ä½•é€šè¿‡FragmentTransactionå®žçŽ°Fragmentçš„æ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ã€æ˜¾ç¤ºã€éšè—ç­‰3ï¼šFragmentä¹‹é—´çš„è·³è½¬ï¼ŒFragmentå¦‚ä½•ä¸ŽActivityäº¤äº’4ï¼šå¦‚ä½•ç®¡ç†Fragmentå›žé€€æ ˆ5ï¼šæ²¡æœ‰è§†å›¾çš„Fragmentçš„ç”¨å¤„6ï¼šFragmentManagerå¯æä¾›ä½¿ç”¨çš„æ–¹æ³•7ï¼šv4åŒ…ä¸ŽappåŒ…æä¾›çš„Fragmentä½¿ç”¨çš„åŒºåˆ«æ³¨æ„é¡¹8ï¼šFragmentä½¿ç”¨çš„å…¶ä»–å‘ ä¸‰ã€åŠ¨ç”»ç›¸å…³1ï¼šå¸§åŠ¨ç”»ï¼ˆFrameAnimationï¼‰ï¼Œå¸§åŠ¨ç”»çš„ä½¿ç”¨æ–¹å¼ï¼Œxmlå’Œä»£ç ä¸¤ç§å®žçŽ°æ–¹å¼ï¼Œå¸§åŠ¨ç”»ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼Œåˆ©å¼Šç­‰2ï¼šè¡¥é—´åŠ¨ç”»ï¼ˆTweenAnimationï¼‰, å››ç§å¸¸ç”¨çš„è¡¥é—´åŠ¨ç”»ï¼šalphaï¼ˆæ·¡å…¥æ·¡å‡ºï¼‰ï¼Œtranslateï¼ˆä½ç§»ï¼‰ï¼Œscaleï¼ˆç¼©æ”¾å¤§å°ï¼‰ï¼Œrotateï¼ˆæ—‹è½¬ï¼‰çš„ä½¿ç”¨æ–¹å¼ï¼Œxmlå’Œä»£ç ä¸¤ç§å®žçŽ°æ–¹å¼ï¼Œç›¸å…³å±žæ€§çš„ç†è§£ä¸Žæ³¨æ„äº‹é¡¹ï¼ŒåŠ¨ç”»çš„ç›‘å¬è®¾ç½®ï¼Œä½¿ç”¨AnimatorSetæ’­æ”¾å¤šä¸ªç»„åˆåŠ¨ç”»ç­‰3ï¼šå±žæ€§åŠ¨ç”»ï¼ˆPropertyAnimationï¼‰, å±žæ€§åŠ¨ç”»çš„ä½¿ç”¨æ–¹æ³•ï¼ŒValueAnimatorä¸ŽObjectAnimatorçš„ä½¿ç”¨ï¼Œç›¸å…³å±žæ€§çš„ç†è§£ï¼ŒAnimatorSetåŒæ—¶æ’­æ”¾å¤šä¸ªåŠ¨ç”»ï¼ŒInterpolatorï¼ˆåŠ¨ç”»å·®å€¼å™¨ï¼‰çš„ç†è§£ä¸Žä½¿ç”¨ï¼ŒAnimatorListenerçš„è®¾ç½®ï¼Œå±žæ€§åŠ¨ç”»çš„å·¥ä½œåŽŸç†ç­‰4ï¼šå¦‚ä½•åˆ©ç”¨Canvasç»˜åˆ¶åŠ¨ç”»5ï¼šäº†è§£Android çŸ¢é‡åŠ¨ç”»å®žçŽ°6ï¼šè½¬åœºåŠ¨ç”»ï¼Œè§¦æ‘¸åé¦ˆåŠ¨ç”»ï¼Œå…¶ä»–è‡ªå®šä¹‰åŠ¨ç”» å››ã€å¸ƒå±€ç›¸å…³1ï¼šå¸¸ç”¨å¸ƒå±€LinearLayoutã€RelativeLayoutã€FrameLayout, xmlä¸Žä»£ç ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œç›¸å…³å±žæ€§çš„ç†è§£ï¼Œä¼šåœ¨ä»£ç ä¸­åŠ¨æ€çš„è®¾ç½®ä¸Žæ”¹å˜LayoutParamsçš„ç›¸å…³å±žæ€§æŽ§åˆ¶view2ï¼šéžå¸¸ç”¨å¸ƒå±€AbsoluteLayoutã€TableLayoutã€GridLayoutçš„ä½¿ç”¨3ï¼šç™¾åˆ†æ¯”å¸ƒå±€ï¼ŒPercentRelativeLayoutã€PercentLinearLayoutã€PercentFrameLayoutçš„äº†è§£ä¸Žä½¿ç”¨4ï¼šConstraintLayoutï¼ˆçº¦æŸå¸ƒå±€ï¼‰çš„ä½¿ç”¨ï¼Œç›¸å…³å±žæ€§çš„ç†è§£5ï¼šFlexboxLayoutï¼ˆæµåŠ¨å¸ƒå±€ï¼‰çš„ä½¿ç”¨ï¼Œç›¸å…³å±žæ€§çš„ç†è§£6ï¼šCoordinatorLayoutçš„ä½¿ç”¨ï¼Œä¼šä½¿ç”¨support.designåº“æä¾›çš„CoordinatorLayoutå¸ƒå±€æ¥å®žçŽ°å¸¸è§çš„æ»‘åŠ¨æŠ˜å /å±•å¼€æµ¸å…¥å¼è”åŠ¨ç‰¹æ•ˆï¼Œç†è§£Behaviorè§£å†³åµŒå¥—æ»‘åŠ¨å†²çªä¸Žäº‹ä»¶æ‹¦æˆªå¤„ç†çš„åŽŸç†ï¼Œç†è§£NestedScrollæœºåˆ¶7ï¼šç•Œé¢å¸ƒå±€ç±»åž‹çš„é€‰æ‹©å’Œæ€§èƒ½ä¼˜åŒ– äº”ã€æ•°æ®å­˜å‚¨1ï¼šSharedPreferencesï¼Œspçš„ä½¿ç”¨åœºæ™¯ï¼Œspçš„å¸¸ç”¨æ–¹æ³•ï¼Œspèƒ½ä¿å­˜çš„æ•°æ®ç±»åž‹ï¼Œspçš„ä¿å­˜ä½ç½®ï¼Œæ³¨æ„äº‹é¡¹ç­‰æ–‡ä»¶å­˜å‚¨ï¼Œå¸¸è§„æ–‡ä»¶æ“ä½œï¼ˆI/Oè¯»å†™æ“ä½œã€æ–‡ä»¶çš„åˆ›å»º/åˆ é™¤/å¤åˆ¶ï¼‰ã€å¤–ç½®sdcardå¡çš„æ–‡ä»¶å­˜å‚¨ï¼Œè¯»å†™æƒé™ï¼Œ å¦‚ä½•ä½¿ç”¨FileProvideré€‚é…Android 7.0 (file uri exposedé—®é¢˜)ï¼Œåº”ç”¨ç›®å½•ä¸‹æ–‡ä»¶çš„åˆ›å»ºå­˜å–ï¼ˆåº”ç”¨ç§æœ‰æ–‡ä»¶ï¼‰ï¼ŒåŽ‹ç¼©æ–‡ä»¶ï¼ˆzip/rarï¼‰çš„åŽ‹ç¼©ä¸Žè§£åŽ‹ç¼©2ï¼šSQLiteæ•°æ®åº“å­˜å‚¨ï¼ŒSQLiteOpenHelperçš„ä½¿ç”¨ï¼Œæ•°æ®åº“éœ€è¦å‡çº§æ—¶çš„æ³¨æ„äº‹é¡¹ï¼ˆæ–°è€æ•°æ®çš„ä¿ç•™ï¼‰ï¼Œæ•°æ®åº“è¡¨çš„åˆ›å»º/åˆ é™¤/æ¸…ç©ºï¼ŒSQLè¯­å¥è¯­æ³•ï¼ˆå¢žåˆ æ”¹æŸ¥ã€æŽ’åºã€å¤šè¡¨è”æŸ¥ï¼‰ï¼Œåˆ©ç”¨execSqlå’Œç³»ç»Ÿæä¾›çš„å¢žåˆ æ”¹æŸ¥apiä¸¤ç§æ–¹å¼æ“ä½œï¼Œå¤šçº¿ç¨‹æ“ä½œæ•°æ®åº“å®‰å…¨é—®é¢˜ï¼ˆåŠ é”åŒæ­¥ï¼‰ï¼Œå¤§é‡é¢‘ç¹æ•°æ®åº“æ“ä½œä½¿ç”¨äº‹åŠ¡ï¼Œç¬¬ä¸‰æ–¹çš„åŸºäºŽæ•°æ®åº“çš„å¼€æºåº“æ–¹æ¡ˆ3ï¼šContentProviderï¼Œè‡ªå®šä¹‰ContentProviderçš„ä½¿ç”¨ï¼ŒContentProviderçš„æŠ½è±¡æ–¹æ³•å¢žåˆ æ”¹æŸ¥çš„å®žçŽ°ï¼ŒContentProviderå¦‚ä½•åœ¨åº”ç”¨é—´å…±äº«æ•°æ®ï¼ŒContentProvideræ¶‰åŠçš„Uriæ¦‚å¿µç†è§£ï¼Œæœ‰å“ªäº›ç³»ç»Ÿçš„ContentUrlï¼Œä»€ä¹ˆæ˜¯ContentResolverï¼Œå¦‚ä½•ç”¨ContentResolveræŸ¥è¯¢æ‰‹æœºçš„å­˜å‚¨ä¿¡æ¯ï¼ˆå¦‚è”ç³»äººã€å¤šåª’ä½“å›¾ç‰‡ã€éŸ³è§†é¢‘ç­‰ï¼‰4ï¼šç½‘ç»œå­˜å‚¨ï¼Œå¦‚ä½•è¯»å–æ–‡ä»¶æµä¸Šä¼ æ–‡ä»¶ï¼ˆè¡¨å•æ–¹å¼ï¼‰ï¼Œå¦‚ä½•ä¸‹è½½æ–‡ä»¶å¹¶ä¿å­˜ï¼Œå¦‚ä½•æäº¤jsonæ ¼å¼çš„æ•°æ®ï¼Œå¦‚ä½•è§£æžæœåŠ¡å™¨è¿”å›žçš„jsonæ•°æ®ï¼Œç½‘ç»œä¼ è¾“æ•°æ®çš„åŠ å¯†è§£å¯†ï¼Œå¸¸è§„çš„æ•°æ®æäº¤æ–¹å¼ï¼ˆGET/POSTï¼‰ä»¥åŠ Content-typeçš„å‡ ç§å¸¸è§æ–¹å¼çš„ç†è§£ï¼ˆå…·ä½“å‚è€ƒç½‘ç»œéƒ¨åˆ†æ€»ç»“ï¼‰ å…­ã€çº¿ç¨‹ã€è¿›ç¨‹1ï¼šä»€ä¹ˆæ˜¯è¿›ç¨‹ï¼Œä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Œç†è§£è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«å’Œè”ç³»ï¼ˆé»˜è®¤ä¸€ä¸ªandroidåº”ç”¨æ˜¯ç³»ç»Ÿçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œçº¿ç¨‹å…±äº«è¿›ç¨‹çš„æ‰€æœ‰èµ„æºï¼Œappçš„é»˜è®¤å·¥ä½œçº¿ç¨‹æ˜¯ä¸»çº¿ç¨‹UIçº¿ç¨‹ï¼‰2ï¼šå¦‚ä½•åœ¨appåˆ›å»ºå¤šè¿›ç¨‹/å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹ä¸Žä¸»è¿›ç¨‹çš„å…³ç³»ï¼Œè¿›ç¨‹é—´é€šä¿¡æ–¹å¼IPCï¼ˆæ–‡ä»¶å…±äº«/Messenger/AIDL/ContentProvider/é¥¿äº†ä¹ˆHermesEventBusç­‰ï¼‰ï¼Œappå¼€å¯å¤šè¿›ç¨‹æœ‰å“ªäº›å¥½å¤„/åå¤„ï¼ŒAndroidè¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼ˆå‰å°/å¯è§/æœåŠ¡/åŽå°/ç©ºï¼‰ï¼Œå¦‚ä½•æå‡appè‡ªèº«çš„è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œè¿›ç¨‹ä¿æ´»æ–¹æ¡ˆï¼Œå¤šè¿›ç¨‹æƒ…å†µä¸‹Applicationåˆ›å»ºçš„åŒºåˆ«ï¼ˆonCreateï¼‰3ï¼šå¦‚ä½•åœ¨appåˆ›å»ºå­çº¿ç¨‹ï¼Œå­çº¿ç¨‹ä¸Žä¸»çº¿ç¨‹çš„é€šä¿¡æ–¹å¼ï¼ˆå…±äº«å†…å­˜å˜é‡/Handler/runOnUiThread/EventBusç­‰ï¼‰ï¼Œçº¿ç¨‹æ± çš„ä½¿ç”¨ï¼Œå¦‚ä½•æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ± ï¼Œçº¿ç¨‹æ± å„ä¸ªå‚æ•°çš„åˆç†è®¾ç½®ï¼Œç³»ç»Ÿæä¾›çš„å››ç§çº¿ç¨‹æ± çš„ä½¿ç”¨ï¼ŒThreadå’ŒRunnableçš„åŒºåˆ«ï¼Œå¦‚ä½•å®‰å…¨çš„å–æ¶ˆ/ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹çš„è¿è¡Œï¼ˆæœ‰å‡ ç§æ–¹å¼ï¼‰ï¼ŒThreadç±»çš„wait() sleep() notify()ï¼Œçº¿ç¨‹/çº¿ç¨‹æ± æœ‰ä¸Šé™å—4ï¼šçº¿ç¨‹åŒæ­¥ï¼Œå¤šçº¿ç¨‹è®¿é—®å…±äº«èµ„æºä¼šå¸¦æ¥çš„å®‰å…¨é—®é¢˜ï¼Œçº¿ç¨‹æ­»é”ï¼Œçº¿ç¨‹åŒæ­¥çš„å‡ ç§æ–¹å¼ï¼ˆåŒæ­¥æ–¹æ³•/åŒæ­¥ä»£ç å—/volatile/ThreadLocal/é˜»å¡žé˜Ÿåˆ—/åŽŸå­å˜é‡ï¼‰5ï¼šAsyncTaskçš„ä½¿ç”¨ï¼ŒAsyncTaskä¸‰ä¸ªæ–¹æ³•çš„è§£æžï¼ŒAsyncTaskæºç å®žçŽ°åŽŸç†è§£æžï¼Œä»€ä¹ˆæƒ…å†µä¸‹AsyncTaskçš„doInBackgroundä¼šä¸è¢«æ‰§è¡Œï¼Œä¸ºä»€ä¹ˆnew AsyncTaskåªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚ä½•é¿å…AsyncTaskå¯¼è‡´å†…å­˜æ³„éœ²ã€é”€æ¯ActivityåŽå®ƒå†…éƒ¨çš„AsyncTaskä¸€å®šä¼šç»ˆæ­¢è¿è¡Œå—ï¼Œå¦‚ä½•å–æ¶ˆAsyncTask6ï¼šHandler, Handlerå‘æ¶ˆæ¯çš„æ‰€æœ‰ä½¿ç”¨æ–¹å¼åŠåŒºåˆ«ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ç›´æŽ¥åœ¨å­çº¿ç¨‹ä¸­ç›´æŽ¥new Handler ï¼Œå¦‚ä½•Handlerå®žçŽ°ä¸»çº¿ç¨‹ç»™å­çº¿ç¨‹å‘æ¶ˆæ¯ï¼ŒHandlerçš„æ¶ˆæ¯é˜Ÿåˆ—å®žçŽ°åŽŸç†ï¼ŒHandlerä¸ŽLooperã€Messageçš„å…³ç³»ï¼Œå¦‚ä½•é¿å…Handlerå†…å­˜æ³„æ¼ï¼ŒHandlerThreadçš„ä½¿ç”¨7ï¼šAIDLçš„å®žçŽ°ä½¿ç”¨ï¼ŒAIDLçš„åŽŸç†åˆ†æžï¼ˆBinderæœºåˆ¶ï¼‰8ï¼šEventBuså®žçŽ°åŽŸç†åˆ†æž ä¸ƒã€ç½‘ç»œ1ï¼šä¸ƒå±‚ç½‘ç»œç»“æž„OSIï¼Œæ¯å±‚çš„å«ä¹‰ç†è§£2ï¼šåŸŸåè§£æžçš„è¿‡ç¨‹ï¼Œä¸€æ¬¡ç½‘ç»œè¯·æ±‚çš„å®Œæ•´æµç¨‹3ï¼šHTTPåè®®ï¼Œä»€ä¹ˆæ˜¯HTTPåè®®ï¼ŒHTTP1.0ä¸Ž2.0çš„åŒºåˆ«ï¼Œhttpå®Œæ•´æŠ¥æ–‡çš„æ ¼å¼ï¼ˆè¯·æ±‚å¤´ã€è¯·æ±‚æ­£æ–‡ã€å“åº”å¤´ã€å“åº”æ­£æ–‡ï¼‰ï¼Œè¯·æ±‚å¤´å’Œå“åº”å¤´ä¸­å¸¸ç”¨å­—æ®µçš„å«ä¹‰è§£æžï¼ŒGET/POSTï¼Œä¸Šä¼ æ–‡ä»¶ã€ä¸Šä¼ jsonæ ¼å¼ä¸Žæ™®é€šæ–‡æœ¬æ•°æ®çš„get/postæ–¹å¼çš„åŒºåˆ«ï¼ˆæŠ¥æ–‡è§’åº¦è§£æžï¼‰ï¼ŒHTTPå“åº”å¤´å„ä¸ªçŠ¶æ€ç çš„å«ä¹‰, å¸¸è§ç½‘ç»œæ¡†æž¶æ˜¯å¦‚ä½•è§£æžå“åº”å¤´/å“åº”æ­£æ–‡çš„ï¼Œå¯ä»¥è‡ªå®šä¹‰å“åº”å¤´ä¸­çš„ResponseCodeå—, Cookieå’ŒSession, é•¿è¿žæŽ¥å’ŒçŸ­è¿žæŽ¥4ï¼šTCPä¸‰æ¬¡æ¡æ‰‹, TCPä¸ŽUDPçš„åŒºåˆ«ï¼ŒAndroidä»£ç å®žçŽ°TCPå’ŒUDPé€šä¿¡ï¼ˆSocket apiå®žçŽ°ï¼‰ï¼ŒSocketï¼Œå¦‚ä½•ä½¿ç”¨Socketè‡ªå®šä¹‰åè®®ï¼ˆå¦‚å¯ä»¥ç”¨Socket apiå®žçŽ°httpåè®®ï¼Œæˆ–ä»»ä½•åŒæ–¹çº¦å®šå¥½çš„è‡ªå®šä¹‰åè®®ï¼‰ï¼Œä½¿ç”¨Websocketå®žçŽ°æ”¶å‘æ¶ˆæ¯ç­‰5ï¼šå¸¸è§ç½‘ç»œè¯·æ±‚åº“ï¼ˆOkHttp3/Volley/Retrofitï¼‰åŠå®žçŽ°åŽŸç†è§£æžï¼ŒåŽŸç”Ÿçš„ç½‘ç»œè¯·æ±‚ä½¿ç”¨ï¼Œç†è§£å¼‚æ­¥è¯·æ±‚å’ŒåŒæ­¥è¯·æ±‚6ï¼šHttpså®‰å…¨é€šä¿¡ï¼Œä¸ŽHttpçš„åŒºåˆ«ï¼ŒTSL/SSLåŠ å¯†åè®®ï¼ŒCAè¯ä¹¦ï¼Œé˜²æ­¢è¿è¥å•†åŠ«æŒ7ï¼šå¦‚ä½•è‡ªå·±å®žçŽ°ä¸€ä¸ªç½‘ç»œè¯·æ±‚æ¡†æž¶ å…«ã€WebView1ï¼šWebViewçš„åŸºæœ¬ä½¿ç”¨å’Œè®¾ç½®æ–¹æ³•2ï¼šWebView JSä¸ŽåŽŸç”Ÿä»£ç äº¤äº’çš„å‡ ç§æ–¹å¼ï¼ˆæ–¹æ³•äº’è°ƒã€ä¼ å‚ã€è¿”å›žå€¼ï¼‰ï¼Œä¼˜ç¼ºç‚¹/å®‰å…¨æ€§ï¼ŒJSBridge, å¦‚ä½•è‡ªå®šä¹‰åè®®å®žçŽ°ä¸€ä¸ªJSBridge3ï¼šWebViewçš„å„ç§å‘ï¼Œé¿å…WebViewå†…å­˜æ³„æ¼4ï¼šWebViewå®‰å…¨æ¼æ´žï¼Œä¸åŒAndroidç‰ˆæœ¬çš„å·®å¼‚ï¼Œå¦‚ä½•é¿å…WebViewå®‰å…¨æ¼æ´ž5ï¼šHybrid Appæ··åˆå¼€å‘çš„åŽŸç†ï¼ŒHybridä¸ŽåŽŸç”Ÿå¼€å‘æœ‰å“ªäº›ä¼˜åŠ¿ä¸Žä¸è¶³ï¼ŒH5/CSS/JSè¯­æ³•äº†è§£ ä¹ã€å›¾ç‰‡1ï¼šä¸»æµå›¾ç‰‡æ ¼å¼ï¼ˆpng jpg gif bmp wbmp ï¼‰çš„åŒºåˆ«ï¼ŒARGB_8888ï¼ŒRGB_888ï¼ŒRGB_565, RGB_444ç­‰è‰²å½©æ ¼å¼çš„åŒºåˆ«2ï¼šå¦‚ä½•è®¡ç®—ä¸€å¼ å›¾ç‰‡ï¼ˆBitmapï¼‰åœ¨Androidä¸­å ç”¨çš„å†…å­˜å¤§å°åˆ†æžï¼ˆåŠ è½½ç½‘ç»œ/sdcardå›¾ç‰‡ä¸ŽåŠ è½½drawableä¸‹çš„å›¾ç‰‡ä¸¤ç§ï¼‰ï¼Œ3ï¼šå›¾ç‰‡çš„åŽ‹ç¼©ï¼Œä»Žå›¾ç‰‡å°ºå¯¸ï¼ˆèŠ‚çº¦å†…å­˜ï¼‰ï¼Œå›¾ç‰‡å¤§å°ï¼ˆèŠ‚çº¦æµé‡ï¼‰ï¼Œå›¾ç‰‡æ ¼å¼ï¼ˆè‰²å½©åƒç´ å¤§å°ï¼‰ä¸‰æ–¹é¢è€ƒè™‘4ï¼šåŠ è½½å¤§å›¾æ³¨æ„äº‹é¡¹ï¼ŒOOM5ï¼šå›¾ç‰‡ç¼“å­˜ï¼Œä¸‰çº§ç¼“å­˜ï¼ŒLRU CacheåŽŸç†ï¼Œç¼“å­˜å¤§å°æ˜¯å¦‚ä½•è°ƒæ•´çš„ï¼ŒAndroidæä¾›çš„LRUCacheè§£æž6ï¼šå›¾ç‰‡åŠ è½½åº“ï¼ˆGlide/Picasso/Frescoï¼‰çš„ä½¿ç”¨æ–¹æ³•ï¼Œå®žçŽ°åŽŸç†ï¼ˆå¦‚ä½•åšåˆ°ä¿è¯è·ŸActivity/Fragmentç”Ÿå‘½å‘¨æœŸä¸€è‡´çš„ï¼‰ï¼Œä½¿ç”¨çš„ç¼“å­˜ç­–ç•¥ï¼Œå†…å­˜ç­–ç•¥ï¼Œå¦‚ä½•è‡ªå·±å®žçŽ°ä¸€ä¸ªå›¾ç‰‡åŠ è½½åº“7ï¼šå¦‚ä½•ä»Žå›¾ç‰‡æ–‡ä»¶/èµ„æºå›¾ç‰‡æ–‡ä»¶åŠ è½½Bitmap. BitmapåŽ‹ç¼©å­˜å‚¨åˆ°æ–‡ä»¶8ï¼šå›¾ç‰‡å‰ªè£ã€æ—‹è½¬ã€ç¼©æ”¾9ï¼šåœ†è§’å›¾ç‰‡çš„å®žçŽ°ï¼ˆå‡ ç§æ–¹å¼ï¼‰ä»¥åŠå…¶ä»–å„ç§å½¢çŠ¶å›¾ç‰‡10ï¼šå›¾ç‰‡é€‰æ‹©åº“ï¼Œç¬¬ä¸‰æ–¹å¼€æºçš„ä¸Žè°ƒç”¨ç³»ç»Ÿçš„ åã€Cameraç›¸å…³1ï¼šåˆ©ç”¨ç³»ç»ŸCamera apiè‡ªå®šä¹‰ä¸€ä¸ªCameraçš„æµç¨‹ï¼Œå¦‚ä½•é…åˆSurfaceview/TextureViewä½¿ç”¨ï¼ŒCameraå‚æ•°çš„è®¾ç½®ï¼ŒCameraé¢„è§ˆï¼Œé¢„è§ˆå¤§å°æ‹ç…§å¤§å°çš„é€‰æ‹©ï¼Œé¢„è§ˆç”»é¢æ—‹è½¬è§’åº¦é—®é¢˜çš„å¤„ç†ï¼Œé—ªå…‰ç¯ï¼Œå‰ç½®æ‘„åƒå¤´ä¸ŽåŽç½®æ‘„åƒå¤´åˆ‡æ¢ï¼Œè‡ªåŠ¨å¯¹ç„¦é—®é¢˜ï¼ŒCameraåæ ‡ç³»ï¼Œå¦‚ä½•æ•èŽ·Cameraé¢„è§ˆæ•°æ®ä¿å­˜ä¸ºå›¾ç‰‡ï¼ˆæ‹ç…§åŠŸèƒ½çš„å®žçŽ°ï¼‰ï¼Œä¿å­˜å›¾ç‰‡æ—¶æ—‹è½¬è§’åº¦é—®é¢˜çš„å¤„ç†ï¼Œä½•æ—¶éœ€è¦é‡Šæ”¾Cameraèµ„æºï¼ˆä¸é‡Šæ”¾ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼‰ï¼Œå¦‚ä½•æ‰“å¼€ç³»ç»Ÿç›¸æœºè¿›è¡Œæ‹ç…§/å½•è§†é¢‘ï¼ˆéœ€è¦æ³¨æ„ä»€ä¹ˆï¼‰ï¼ŒCameraå½•åˆ¶è§†é¢‘ï¼ˆé…ç½®MediaRecorderä½¿ç”¨ï¼‰2ï¼šCamera2ï¼ŒCamera2ä¸ŽCameraçš„åŒºåˆ«ï¼ŒCamera2ä¸­å¸¸ç”¨çš„ç±»ï¼Œå¦‚ä½•åˆ©ç”¨Camera2å®žçŽ°é¢„è§ˆã€æ‹ç…§ç­‰åŠŸèƒ½ åä¸€ã€éŸ³è§†é¢‘ç›¸å…³1ï¼šä½¿ç”¨MediaRecorderå½•åˆ¶éŸ³é¢‘2ï¼šä½¿ç”¨MediaRecorderå½•åˆ¶è§†é¢‘ï¼ˆé…åˆCameraä½¿ç”¨ï¼‰3ï¼šä½¿ç”¨AudioRecordå½•åˆ¶éŸ³é¢‘ï¼Œç‰¹æ®Šæ ¼å¼å¦‚Mp3æ ¼å¼çš„å½•åˆ¶ï¼ŒAndroidå¸¸è§å“ªäº›éŸ³é¢‘æ ¼å¼, å“ªäº›æ˜¯åŒæ—¶å¯ä»¥å…¼å®¹IOSå¹³å°çš„4ï¼šä½¿ç”¨MediaPlayeræ’­æ”¾è§†é¢‘/éŸ³é¢‘5ï¼šä½¿ç”¨AudioTrackæ’­æ”¾éŸ³é¢‘6ï¼šéŸ³è§†é¢‘ç¼–è§£ç ï¼Œå¸¸è§çš„éŸ³è§†é¢‘çš„ç¼–ç æ ¼å¼ï¼Œç¡¬è§£ä¸Žè½¯è§£/ç¡¬ç¼–ä¸Žè½¯ç¼–çš„åŒºåˆ«åŠå¸¸ç”¨è§£å†³æ–¹æ¡ˆï¼ˆç›®å‰ç¡¬ä»¶ç¼–è§£ç ä¸»è¦æ˜¯ç”¨Androidçš„MediaCodecï¼Œè½¯è§£ç¼–è§£ç ä¸€èˆ¬æ˜¯é‡‡ç”¨å¼€æºåº“FFMpegï¼‰7ï¼šè§†é¢‘çš„ç‰¹æ•ˆå®žçŽ°ï¼ˆå¦‚æ»¤é•œã€åˆæˆã€è½¬åœºã€æ¶‚é¸¦ã€æ°´å°ã€ç¾Žé¢œã€å åŠ ç­‰ï¼‰ï¼Œç¾Žæ‹ã€æŠ–éŸ³ã€ç›´æ’­ç­‰è§†é¢‘ç‰¹æ•ˆï¼Œå¸‚åœºä¸»æµçš„çŸ­è§†é¢‘SDK8ï¼šAndroidè§†é¢‘ç›´æ’­çš„å®žçŽ°ï¼ˆæŽ¨æµã€æ’­æ”¾ï¼‰ï¼Œæµåª’ä½“ï¼Œä¸»è¦çš„æµåª’ä½“åè®®ï¼ˆRTMPã€RTSPç­‰ï¼‰ï¼Œè·ŸHTTPåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå¸‚åœºä¸»æµçš„ç›´æ’­SDK9ï¼šè§†é¢‘æ’­æ”¾å™¨ï¼Œè‡ªå®šä¹‰å®žçŽ°æ’­æ”¾åŠŸèƒ½ï¼ˆMediaPlayeræˆ–VideoViewï¼‰, æ’­æ”¾æœ¬åœ°è§†é¢‘/åœ¨çº¿è§†é¢‘ï¼Œå¸¸è§å¼€æºæ’­æ”¾å™¨å¼•æ“Žï¼ˆå¦‚bilibiliçš„ijkPlayerçš„ï¼ŒGoogleçš„ExoPlayerï¼‰çš„å­¦ä¹ ä½¿ç”¨æºç è§£æžï¼Œå¦‚ä½•å®žçŽ°å¸¸è§è§†é¢‘appè½¯ä»¶çš„å¼¹å¹•ã€éŸ³é‡è°ƒèŠ‚ã€äº®åº¦è°ƒèŠ‚ã€ å€é€Ÿè°ƒèŠ‚ã€ æ¸…æ™°åº¦åˆ‡æ¢ç­‰åŠŸèƒ½ï¼ˆå¯ä»¥å‚è€ƒä¸»æµå¼€æºåº“GSYVideoPlayerã€JiaoZiVideoPlayerç­‰çš„å®žçŽ°ï¼‰10ï¼šå½•å±ï¼ˆè§†é¢‘/Gifï¼‰ï¼Œæˆªå± åäºŒã€ViewPagerç›¸å…³1ï¼šViewPager + PagerAdapter+Viewçš„ä½¿ç”¨æ–¹å¼2ï¼šViewPager + FragmentPagerAdapter + Fragmentçš„ä½¿ç”¨æ–¹å¼3ï¼šViewPagerçš„é¡µé¢é¢„åŠ è½½ç‰¹æ€§ï¼Œå¦‚ä½•é˜²æ­¢/è¿›è¡Œæ•°æ®é¢„åŠ è½½ï¼ˆViewå’ŒFragmentä¸¤ç§ï¼‰ï¼ŒPagerAdapter/FragmentPagerAdapter çš„ç¼ºé™·ï¼ŒViewPageråˆ·æ–°é—®é¢˜ï¼ˆPagerAdapter/FragmentPagerAdapterï¼‰, POSITION_NONEé—®é¢˜4ï¼šViewPagerçš„å¸¸è§ç‰¹æ•ˆå®žçŽ°ï¼Œå¦‚æ— é™å¾ªçŽ¯æ»‘åŠ¨çš„Bannerå¹¿å‘Šæ¡ï¼Œå•é¡µæ˜¾ç¤º3ä¸ªItemçš„ViewPagerç‚«é…·åˆ‡æ¢æ•ˆæžœï¼ŒViewPageræ¢é¡µæ»‘åŠ¨ç‰¹æ•ˆï¼ˆPageTransformeråº”ç”¨åŠ¨ç”»æ•ˆæžœï¼‰5ï¼šViewPagerçš„å·¦å³æ»‘åŠ¨ç›‘å¬ï¼ŒPageChangeListenerä¸­çš„å‡ ä¸ªæ–¹æ³•è§£æžï¼ŒViewPageræŒ‡ç¤ºå™¨ï¼Œè‡ªå®šä¹‰å®žçŽ°ï¼Œå¸¸è§å¼€æºåº“ï¼ˆViewPagerIndicatorã€MagicIndicatorï¼‰ åä¸‰ã€RecyclerViewç›¸å…³1ï¼šRecyclerViewçš„åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼Œå¦‚ä½•ä½¿ç”¨RecyclerViewçš„ä¸‰ç§å¸ƒå±€ç®¡ç†å™¨LinearLayoutManagerã€GridLayoutManagerã€StaggeredGridLayoutManagerå®žçŽ°ä»¥å‰ListViewã€GridViewä»¥åŠç€‘å¸ƒæµçš„æ•ˆæžœï¼ŒRecyclerViewAdapterçš„ä½¿ç”¨ï¼Œå¤šç±»åž‹å¸ƒå±€çš„ã€åˆ†ç»„å¸ƒå±€çš„Adapterä½¿ç”¨ï¼ˆå¯ä»¥å‚è€ƒRecyclerViewAdapterç®€åŒ–ä½¿ç”¨å¼€æºåº“BRVAHï¼‰ï¼ŒRecyclerViewè®¾ç½®header/footer, RecyclerViewä¸Šæ‹‰åˆ·æ–°ã€ä¸‹æ‹‰åˆ·æ–°ï¼ˆé…åˆSwipeRefreshLayoutï¼‰ï¼ŒRecyclerViewè®¾ç½®åˆ†å‰²çº¿ï¼ˆItemDecorationï¼‰ï¼ŒRecyclerViewç‚¹å‡»äº‹ä»¶2ï¼šRecyclerViewçš„æºç è§£æžï¼Œä¸ŽListViewç›¸æ¯”çš„å·®å¼‚ï¼Œ ViewHolder3ï¼šRecyclerViewçš„å±€éƒ¨åˆ·æ–°ï¼Œå¦‚ä½•åªåˆ·æ–°æŸä¸€é¡¹ï¼Œåªåˆ·æ–°æŸä¸€é¡¹ä¸­çš„æŸä¸ªæŽ§ä»¶ï¼Œä¸ŽListViewçš„å±€éƒ¨åˆ·æ–°æ¯”è¾ƒ åå››ã€Canvasç›¸å…³1ï¼šCanvasåŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œç”»ç¬”Paintçš„ä½¿ç”¨ï¼ŒCanvasç»˜åˆ¶å„ç§å½¢çŠ¶ã€æ–‡å­—ã€å›¾ç‰‡ã€æ›²çº¿ï¼ŒCanvasç”»ç¬”è®¾ç½®ï¼ŒCanvaså‰ªè£ï¼ŒCanvasçš„çŽ°åœºä¿å­˜/æ¢å¤ï¼ŒCanvasçš„å˜æ¢ã€å¹³ç§»ã€ç¼©æ”¾ã€æ—‹è½¬ç­‰2ï¼šCanvasåœ¨è‡ªå®šä¹‰Viewå½“ä¸­çš„ä½¿ç”¨ åäº”ã€ä¼ æ„Ÿå™¨ç›¸å…³1ï¼šGPS, å¦‚ä½•ä½¿ç”¨AndroidåŽŸå§‹ä»£ç å®žçŽ°GPSå®šä½çš„èŽ·å–ï¼ˆLocationManagerï¼‰ï¼Œæƒé™ï¼Œæ³¨æ„äº‹é¡¹ï¼ˆè€—ç”µé‡é«˜ï¼Œä¸èƒ½ä¸€ç›´å¼€ç€ï¼‰ï¼Œæ‹“å±•ï¼šLBSåŸºç«™å®šä½ï¼ˆå›½å†…å¸¸ç”¨çš„åœ°å›¾SDKé«˜å¾·/ç™¾åº¦ç­‰å®šä½éƒ½æ˜¯ä»¥ä¸Šä¸¤ç§æ–¹å¼çš„ç»„åˆï¼‰2ï¼šå…¶ä»–æ‰‹æœºæ”¯æŒçš„å¸¸è§ä¼ æ„Ÿå™¨ï¼Œå¦‚åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ã€æ–¹å‘ä¼ æ„Ÿå™¨ã€é™€èžºä»ªä¼ æ„Ÿå™¨ã€é‡åŠ›ä¼ æ„Ÿå™¨ã€åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨ã€è·ç¦»ä¼ æ„Ÿå™¨ã€è®¡æ­¥ä¼ æ„Ÿå™¨ã€å…‰çº¿ä¼ æ„Ÿå™¨ç­‰ï¼Œå¦‚ä½•ä»£ç ä¸­è®¾ç½®ç›‘å¬å™¨å®žæ—¶ç›‘å¬è¿™äº›ä¼ æ„Ÿå™¨çš„å˜åŒ–å‚æ•°å€¼ï¼ŒSensorManagerï¼Œæ³¨å†Œ/åæ³¨å†Œç›‘å¬ åå…­ã€æ€§èƒ½ä¼˜åŒ–1ï¼šANR, ä»€ä¹ˆæ˜¯ANR, Activity/BroadcastReceiver/Serviceå¯¹ANRçš„å“åº”æ—¶é—´ï¼ŒANRäº§ç”Ÿçš„æ ¹æœ¬åŽŸå› æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•é¿å…ANR, å¦‚ä½•é¿å…åœ¨UIçº¿ç¨‹æ‰§è¡Œè€—æ—¶ä»»åŠ¡ï¼Œå“ªäº›æ—¥å¸¸æ“ä½œä»»åŠ¡æ˜¯è€—æ—¶ä»»åŠ¡ï¼ˆæ–‡ä»¶I/Oã€æ•°æ®åº“ã€ç½‘ç»œã€è§£æžç­‰ç­‰ï¼‰ã€æœ‰å“ªäº›æ–¹å¼å¯ä»¥å¼‚æ­¥å¤„ç†è€—æ—¶ä»»åŠ¡ï¼ˆçº¿ç¨‹ã€Aynctaskç­‰ï¼‰ï¼ŒåŒºåˆ†UIçº¿ç¨‹å’Œå­çº¿ç¨‹ï¼Œå“ªäº›æ—¥å¸¸åœºæ™¯æ˜¯åœ¨UIçº¿ç¨‹ä¸­è¿è¡Œçš„ï¼ˆå¦‚å››å¤§ç»„ä»¶éƒ½æ˜¯åœ¨UIçº¿ç¨‹æ‰§è¡Œçš„ï¼‰ï¼Œåœ¨ä¸ç¡®å®šæ˜¯UIè¿˜æ˜¯éžUIçº¿ç¨‹çš„è¿è¡ŒçŽ¯å¢ƒä¸­å¦‚ä½•åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯ä¸»çº¿ç¨‹ï¼Ÿï¼ˆæœ‰å‡ ç§æ–¹æ³•ï¼‰2ï¼šOOMï¼Œä»€ä¹ˆæ˜¯OOM, å“ªäº›æƒ…å†µå®¹æ˜“äº§ç”ŸOOMï¼Œå¦‚ä½•é¿å…OOM3ï¼šListViewä¼˜åŒ–ï¼Œç†è§£ListViewçš„é‡ç”¨itemæœºåˆ¶åŽŸç†ï¼Œåˆ©ç”¨ViewHolderç¼“å­˜viewå‡å°‘getViewçš„æ‰§è¡Œæ—¶é—´ï¼Œå‡å°‘ItemViewçš„å¸ƒå±€å±‚æ¬¡ï¼Œå‡å°‘getViewæ–¹æ³•ä¸­çš„åˆ¤æ–­/è®¡ç®—/è€—æ—¶é€»è¾‘ï¼Œitemä¸­çš„å›¾ç‰‡é¿å…æ¯æ¬¡éƒ½é‡æ–°åŠ è½½ï¼Œåšå¥½å›¾ç‰‡ç¼“å­˜ï¼ˆä½¿ç”¨å›¾ç‰‡åŠ è½½åº“ï¼‰ï¼Œå¿«é€Ÿæ»‘åŠ¨æ—¶ä¸åŠ è½½å›¾ç‰‡, æ•°æ®åˆ†é¡µåŠ è½½ï¼Œå›¾ç‰‡é”™ä¹±é—®é¢˜4ï¼šUI å¡é¡¿ï¼ŒUI å¡é¡¿çš„åŽŸå› ï¼Œå¸§çŽ‡ï¼Œ16ms, è¿‡æ¸¡ç»˜åˆ¶ï¼Œè€—æ—¶ä»»åŠ¡ï¼Œå¦‚ä½•å¸ƒå±€ä¼˜åŒ–ï¼Œå‡å°‘å¸ƒå±€åµŒå¥—5ï¼šå†…å­˜æ³„æ¼ï¼ŒGCåžƒåœ¾å›žæ”¶æœºåˆ¶ï¼Œå¯èƒ½é€ æˆAndroidå†…å­˜æ³„æ¼çš„å‡ ç§æƒ…å†µï¼Œå¦‚ä½•é¿å…å†…å­˜æ³„æ¼ï¼ŒJavaå†…å­˜åˆ†é…ç®¡ç†çš„æœºåˆ¶ï¼Œå †å†…å­˜å’Œæ ˆå†…å­˜çš„åŒºåˆ«ï¼ŒAndroidç³»ç»Ÿä¼šä¸ºä¸€ä¸ªåº”ç”¨åˆ†é…å¤šå¤§å†…å­˜ï¼Œå¦‚ä½•æé«˜åº”ç”¨å†…å­˜ï¼Œå†…å­˜æ³„æ¼çš„æŽ’æŸ¥æ–¹æ³•/å·¥å…·6ï¼šå†…å­˜ä¼˜åŒ–ï¼Œå¼±å¼•ç”¨ä¸Žè½¯å¼•ç”¨ï¼ˆWeakreferenceã€Softreferenceï¼‰, é¿å…å¯¹Activityä½œä¸ºContextçš„é•¿æ—¶é—´å¼•ç”¨æˆ–é™æ€å¼•ç”¨(å¦‚åˆ›å»ºHandler AsyncTaskçš„æ­£ç¡®å§¿åŠ¿)ï¼ŒSparseArray, ä¸ºä»€ä¹ˆAndroidæŽ¨èä½¿ç”¨SparseArrayæ¥æ›¿ä»£1ï¼šHashMap? ä¼˜è¶Šåœ¨å“ªé‡Œ7ï¼šCrashå´©æºƒå¼‚å¸¸ï¼ŒForceCloseï¼Œå„ç§è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆå¦‚ç©ºæŒ‡é’ˆï¼‰ï¼Œå¦‚ä½•é¿å…ï¼Œå‘ç”ŸCrashæ—¶å¦‚ä½•åœ¨appä¸­æ•èŽ·å¹¶ä¿å­˜æœ¬åœ°æˆ–ä¸Šä¼ æœåŠ¡å™¨8ï¼šå¹¿æ’­å’ŒServiceä¸­å¯ä»¥è¿›è¡Œç½‘ç»œè¯·æ±‚å—ï¼Œå¯ä»¥æ‰§è¡Œè€—æ—¶ä»»åŠ¡å—9ï¼šASå“ªäº›å·¥å…·å¯ä»¥ç”¨æ¥æŽ’æŸ¥æ€§èƒ½é—®é¢˜10ï¼šç”µæ± ä¼˜åŒ–ï¼Œç½‘ç»œä¼˜åŒ– ï¼ˆç¼“å­˜/ç¦»çº¿ï¼‰ åä¸ƒã€UIé€‚é…1ï¼špxã€dpã€spã€åƒç´ å¯†åº¦densityå’Œå±å¹•åˆ†è¾¨çŽ‡ä»¥åŠå±å¹•å°ºå¯¸ä¹‹é—´çš„å…³ç³»ï¼Œres/drawable-xxxå„ä¸ªæ–‡ä»¶å¤¹ä¸Žå±å¹•åƒç´ å¯†åº¦ä¹‹é—´çš„å…³ç³»2ï¼šä¿è¯ä¸åŒå±å¹•å±•ç¤ºçš„æ•ˆæžœæœ€å¥½ç”¨Androidç³»ç»Ÿæä¾›çš„å¸ƒå±€å±žæ€§ï¼Œä¸è¦å†™æ­»å›ºå®šå¤§å°ï¼Œå›¾ç‰‡æŒ‰ç…§æ¯”ä¾‹æ”¾åœ¨ä¸åŒå¯†åº¦çš„drawableæ–‡ä»¶ä¸‹æˆ–åªç”¨ä¸€å¥—3ï¼šä½¿ç”¨ç™¾åˆ†æ¯”å¸ƒå±€ï¼ˆPercentxxxLayoutï¼‰4ï¼šä½¿ç”¨çº¦æŸå¸ƒå±€ï¼ˆConstraintLayoutï¼‰5ï¼šç›®å‰ä¸»æµé€‚é…æ–¹æ¡ˆï¼Œä»Šæ—¥å¤´æ¡å±å¹•é€‚é…æ–¹æ¡ˆå’ŒsmallestWidthé™å®šç¬¦é€‚é…æ–¹æ¡ˆåˆ†æž6ï¼šç›®å‰å¸‚é¢ä¸Šæµè¡Œçš„åˆ˜æµ·å±å¹•é€‚é…æ–¹æ³•ç›®å‰å¸‚é¢ä¸Šæµè¡Œçš„åˆ˜æµ·å±å¹•é€‚é…æ–¹æ³• åå…«ã€Androidä¸­çš„Context1ï¼šç†è§£Contextçš„å«ä¹‰ï¼ŒActivityã€Contextã€Applicationçš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ï¼Œ ContextWrapperè§£æžï¼ŒgetActivity()/getContext()/getApplication()/getApplicationContext()çš„åŒºåˆ«2ï¼šé¿å…Contexté™æ€æŒæœ‰ï¼Œé¿å…å†…å­˜æ³„æ¼ åä¹ã€åºåˆ—åŒ–ä¸Žååºåˆ—åŒ–1ï¼šSerializableå®žçŽ°ï¼Œå®žçŽ°æ–¹æ³•ï¼ŒIntentä¼ é€’ä¸ŽèŽ·å–Serializableçš„æ–¹æ³•2ï¼šParcelableå®žçŽ°ï¼Œå®žçŽ°æ–¹æ³•ï¼Œï¼ŒIntentä¼ é€’ä¸ŽèŽ·å–Parcelableçš„æ–¹æ³•3ï¼šSerializableå’ŒParcelableåŒºåˆ«ï¼Œé€‚åˆçš„ä½¿ç”¨åœºæ™¯ï¼ˆå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒæŽ¨èä½¿ç”¨parcelableï¼Œå­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šï¼ŒæŽ¨èä½¿ç”¨Serializableï¼‰ äºŒåã€JSONè§£æž1ï¼šç†è§£jsonæ ¼å¼çš„å®šä¹‰ï¼Œä»€ä¹ˆæ˜¯åˆæ³•/ä¸åˆæ³•çš„jsonæ ¼å¼ï¼Œä»€ä¹ˆæ ·çš„jsonæ ¼å¼åˆ©äºŽ/ä¸åˆ©äºŽå®¢æˆ·ç«¯å¼€å‘çš„è§£æž2ï¼šJsonçš„è§£æžï¼Œä½¿ç”¨åŽŸç”Ÿä»£ç è§£æžï¼Œä½¿ç”¨ç¬¬ä¸‰æ–¹åº“è§£æžï¼ˆGsonã€FastJsonã€Jacksonï¼‰ï¼ŒJavaç±»ä¸ŽJsonå­—ç¬¦ä¸²äº’è½¬ï¼Œæ³¨æ„äº‹é¡¹ï¼ŒåŒä¸€ä¸ªå­—æ®µå¤šç±»åž‹çš„jsonè§£æž äºŒåä¸€ã€äºŒç»´ç 1ï¼šäºŒç»´ç æ‰«æï¼ŒåŸºäºŽZXingæˆ–Zbarå¼€æºåº“çš„å¼€å‘ï¼ˆå¦‚å¼€æºåº“BGAQRCode-Androidï¼‰ï¼Œå¦‚ä½•æé«˜äºŒç»´ç æ‰«æçš„è¯†åˆ«çŽ‡ï¼Œç”ŸæˆäºŒç»´ç  äºŒåäºŒã€Permissionæƒé™1ï¼šAndroid 6.0ä»¥åŽçš„æƒé™é€‚é…ï¼ŒåŠ¨æ€æ£€æŸ¥æ˜¯å¦æœ‰æŸé¡¹æƒé™ï¼ŒåŠ¨æ€ç”³è¯·æƒé™ï¼Œç”³è¯·æƒé™çš„å›žè°ƒå¤„ç†ï¼ˆæœ‰å“ªäº›ç¬¬ä¸‰æ–¹åº“å¯ç®€åŒ–å¤„ç†ï¼‰ã€æ˜Žç¡®å“ªäº›è¡Œä¸ºæ˜¯å±é™©æƒé™éœ€è¦åŠ¨æ€ç”³è¯·çš„ï¼Œ6.0ä»¥å‰çš„æƒé™å¤„ç†æ–¹å¼å¯¹æ¯” äºŒåä¸‰ã€Activityå·¥ä½œåŽŸç†1ï¼šä»Žæ‰‹æŒ‡ç‚¹å‡»æ¡Œé¢çš„appå¼€å§‹åˆ°ç•Œé¢å‘ˆçŽ°å‘ç”Ÿäº†å“ªäº›è¿‡ç¨‹ï¼Œç¬¬ä¸€ä¸ªActivityå¯¹è±¡æ˜¯å¦‚ä½•è¢«åˆ›å»ºçš„ï¼ŒApplicationå¯¹è±¡æ˜¯å¦‚ä½•è¢«åˆ›å»ºçš„ï¼Œé»˜è®¤çš„å·¥ä½œçº¿ç¨‹ï¼ˆUIçº¿ç¨‹ï¼‰æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œä¸»çº¿ç¨‹Looperçš„å¦‚ä½•åˆ›å»ºçš„ï¼ŒActivityä¸ŽWindowçš„å…³ç³»ï¼ŒWindowManagerè§£æžï¼ŒAndroidç³»ç»Ÿæ˜¯å¦‚ä½•é€šè¿‡WindowManagerç®¡ç†çª—å£çš„ äºŒåå››ã€Viewäº‹ä»¶åˆ†å‘æœºåˆ¶1ï¼šTouchäº‹ä»¶çš„å„ä¸ªActionå«ä¹‰ï¼Œä½•æ—¶ä¼šè¢«è§¦å‘2ï¼šTouchäº‹ä»¶åœ¨Viewä¹‹é—´çš„ä¼ é€’è¿‡ç¨‹ï¼ˆViewã€ViewGroupã€Activityï¼‰,åˆ†å‘ä¸Žå¤„ç†çš„æµç¨‹ï¼Œä½•æ—¶ä¼šè¢«æ¶ˆè´¹ï¼Œä½•æ—¶ä¼šè¢«æ‹¦æˆªï¼Œå¦‚ä½•è§£å†³æ»‘åŠ¨å†²çª, onTouch å’Œ onTouchEventåŒºåˆ«ï¼ŒonClickä¸ŽonTouchçš„å…³ç³»3ï¼šAndroidæ‰‹åŠ¿å¤„ç†ï¼ŒåŒæŒ‡ç¼©æ”¾ã€åŒå‡»ã€å•å‡»ï¼Œå¤šç‚¹è§¦æŽ§ äºŒåäº”ã€Viewçš„ç»˜åˆ¶æµç¨‹1ï¼šActivityçš„setContentView()åšäº†ä»€ä¹ˆï¼ŒWindow&amp;PhoneWindow&amp;DectorView&amp;ViewRoot&amp;contentViewä¹‹é—´çš„å…³ç³»2ï¼šViewç»˜åˆ¶çš„ä¸‰ä¸ªé˜¶æ®µmeasureï¼Œlayout, drawçš„è§£æž3ï¼šrequestLayoutï¼ŒonLayout, onDraw, drawChildçš„åŒºåˆ«ä¸Žè”ç³»4ï¼šinvalidateä¸ŽpostInvalidateçš„åŒºåˆ«ä¸Žè”ç³» äºŒåå…­ã€è‡ªå®šä¹‰viewåŸºæœ¬æµç¨‹1ï¼šè‡ªå®šä¹‰å±žæ€§ï¼ŒonMesure()ï¼ŒonLayout(ViewGroup) , onDraw(), TouchEventçš„å¤„ç†2ï¼šç»„åˆæŽ§ä»¶çš„è‡ªå®šä¹‰æ–¹å¼ äºŒåä¸ƒã€Apkçš„æ‰“åŒ…/å®‰è£…è¿‡ç¨‹1ï¼šapkçš„æ‰“åŒ…è¿‡ç¨‹ï¼Œç»è¿‡å“ªäº›æ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤åšäº†ä»€ä¹ˆï¼ŒASçš„æ‰“åŒ…è¿‡ç¨‹æ‰§è¡Œå“ªäº›taskï¼Œæ¯ä¸ªtaskå¹²äº†ä»€ä¹ˆï¼Œapkç­¾åï¼ˆç­¾åæ–‡ä»¶ç”Ÿæˆï¼ŒASæ‰“åŒ…apkæ—¶v1ä¸Žv2é€‰é¡¹çš„åŒºåˆ«ï¼‰ï¼Œapkå¯¹é½ï¼ŒapkåŠ å›ºï¼ˆç¬¬ä¸‰æ–¹éƒ½æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼‰2ï¼šapkçš„å®‰è£…è¿‡ç¨‹ï¼Œç³»ç»Ÿåœ¨å®‰è£…ä¹‹å‰ä¼šåšå“ªäº›å·¥ä½œï¼Ÿæ ¡éªŒå“ªäº›ä¿¡æ¯ï¼Ÿï¼ˆä¸åŒAndroidç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚ï¼‰ï¼Œå®‰è£…apkçš„è¿‡ç¨‹åšäº†ä»€ä¹ˆï¼Œä¼šç”Ÿæˆå“ªäº›æ–‡ä»¶ï¼Œapkä¼šè¢«å®‰è£…åˆ°ç³»ç»Ÿå“ªä¸ªè·¯å¾„ï¼Œappçš„ç§æœ‰æ•°æ®ï¼ˆsp/æ•°æ®åº“/ç§æœ‰æ–‡ä»¶ï¼‰å­˜å‚¨åœ¨å“ªä¸ªè·¯å¾„ï¼Œå“ªäº›æƒ…å†µä¸‹å®‰è£…apkä¼šä¸æˆåŠŸï¼Œè¦†ç›–å®‰è£…æ—¶ï¼ˆappå‡çº§ï¼‰ä¸Žappçš„åŒ…åã€ç­¾åã€ç‰ˆæœ¬å·versionCodeä¹‹é—´çš„å…³ç³», ä»€ä¹ˆæ˜¯ART, Android 5.0ä»¥åŽARTæ›¿ä»£ä¹‹å‰çš„Dalvikè™šæ‹Ÿæœºæœ‰å“ªäº›ä¼˜ç‚¹ï¼ŒAOTï¼Œä¸ºå•¥5.0ä»¥åŽå®‰è£…çš„æ—¶å€™æ—¶é—´ç‰¹åˆ«é•¿ä½†æ˜¯è¿è¡Œé€Ÿåº¦æ¯”ä»¥å‰å¿«3ï¼šappçš„å¸è½½è¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆï¼Œç³»ç»Ÿä¼šåˆ é™¤å“ªäº›ä¸Žapkç›¸å…³çš„ä¸œè¥¿ äºŒåå…«ã€Appæ··æ·†1ï¼šæ··æ·†å¸¸ç”¨åŸºæœ¬è¯­æ³•ï¼Œæ··æ·†ç±»ã€æˆå‘˜ã€æ–¹æ³•ï¼Œå“ªäº›ç±»éœ€è¦æ··æ·†ï¼Œå“ªäº›ç±»ä¸èƒ½è¢«æ··æ·†çš„ï¼Œæ··æ·†æ–‡ä»¶çš„é…ç½®2ï¼šå¦‚ä½•æ ¹æ®æ··æ·†ä¹‹åŽçš„é”™è¯¯æ—¥å¿—å®šä½æ··æ·†ä¹‹å‰çš„ä»£ç  äºŒåä¹ã€Appå†·å¯åŠ¨ä¼˜åŒ–1ï¼šå†·å¯åŠ¨ä¸Žçƒ­å¯åŠ¨çš„åŒºåˆ«ï¼Œä»Žç‚¹å‡»æ¡Œé¢appå›¾æ ‡åˆ°appçš„ç¬¬ä¸€ä¸ªActivityé¡µé¢å‘ˆçŽ°ç»åŽ†äº†ä»€ä¹ˆï¼Œä¼˜åŒ–å“ªä¸ªåœ°æ–¹èƒ½åŠ å¿«é¡µé¢çš„å‘ˆçŽ°2ï¼šå¦‚ä½•å®žçŽ°appå†·å¯åŠ¨ç§’å¼€ï¼Œå¦‚ä½•é¿å…å†·å¯åŠ¨ç™½å±/é»‘å±/ç¼“æ…¢ï¼Œæœ‰å“ªäº›ä¼˜åŒ–æ–¹æ¡ˆ ä¸‰åã€å­çº¿ç¨‹ä¸èƒ½æ›´æ–°UI1ï¼šæ­£å¸¸æƒ…å†µä¸‹å­çº¿ç¨‹ä¸èƒ½æ›´æ–°UIï¼Œâ€œå­çº¿ç¨‹ä¸èƒ½æ›´æ–°UIâ€è¿™å¥è¯æ˜¯ä¸€å®šçš„å—ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹å­çº¿ç¨‹å¯ä»¥æ›´æ–°UIï¼Ÿï¼ˆå¦‚è¿™ä¸ªUIæŽ§ä»¶æ˜¯ç”±è¿™ä¸ªçº¿ç¨‹åˆ›å»ºæ—¶ï¼ŒSurfaceViewä¹Ÿå¯ä»¥åœ¨å•ç‹¬çº¿ç¨‹ä¸­åˆ·æ–°ï¼ŒOpenGLå¯ä»¥åœ¨æ¸²æŸ“çº¿ç¨‹ä¸­ç»˜åˆ¶ï¼‰2ï¼šview.postDelay(Runnable r)æ–¹æ³•æ˜¯è¿è¡Œåœ¨å­çº¿ç¨‹ä¸­çš„å—ï¼ŸåŒºåˆ†å“ªäº›åœºæ™¯æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­çš„ ä¸‰åä¸€ã€Android Studio Gradle1ï¼šbuild.gradleå¸¸ç”¨é…ç½®ï¼ŒminSdkVersionã€targetSdkVersionã€compileSdkVersionä¸‰è€…çš„å…³ç³»åŒºåˆ«ï¼Œè¿™ä¸‰ä¸ªå€¼å¯¹appä»£ç å¼€å‘/å®‰è£…è¿è¡Œ/ç‰ˆæœ¬æ›´æ–°æ—¶çš„å½±å“ï¼ŒåŒ…å/ç­¾å/æ··æ·†/æºç è·¯å¾„çš„é…ç½®ã€å¦‚ä½•åˆ©ç”¨BuildConfigæ·»åŠ è‡ªå®šä¹‰çš„å±žæ€§é…ç½®ï¼Œä»Žgradleä¸­åŠ è½½propertiesé…ç½®æ–‡ä»¶ï¼Œå¦‚ä½•åœ¨gradleä¸­å¼€å¯/å…³é—­æ··æ·†/è°ƒè¯•/Logè¾“å‡ºï¼Œå¦‚ä½•ä½¿ç”¨gradleä»»åŠ¡æ‰“åŒ…ï¼Œå¦‚ä½•åœ¨dependenceä¸­æ·»åŠ ä¾èµ–(æœ¬åœ°jaråŒ…ã€aaråŒ…ã€soåº“ä¾èµ–ï¼Œè¿œç¨‹ä¾èµ–)ï¼Œ3.0ä»¥åŽçš„implementationã€apiã€compileOnlyä¸Ž3.0ä»¥å‰çš„compile providedçš„åŒºåˆ«ï¼Œå¦‚ä½•é…ç½®product falvorå®žçŽ°Build Variantå˜ä½“æ‰“åŒ…ï¼Œç®€å•çš„Gradle taskå®šä¹‰ï¼ŒæŒ‡å®štaskä¾èµ–ä»»åŠ¡ï¼ŒAndroid Studioçš„Gradleä»»åŠ¡åˆ†æžï¼ŒGradleæ’ä»¶ï¼ŒGradleç‰ˆæœ¬/ä»“åº“é…ç½®ï¼Œgroovyè¯­æ³•äº†è§£ ä¸‰åäºŒã€adbç›¸å…³1ï¼šæŽŒæ¡å¸¸ç”¨çš„adbå‘½ä»¤ï¼Œå¦‚ä½¿ç”¨adb pull/pushä»Žæ‰‹æœºä¸­æ‹‰å–/æŽ¨é€æ–‡ä»¶ï¼Œadb æˆªå±ï¼Œä½¿ç”¨adb æŠ“å–logæ—¥å¿—, ä½¿ç”¨adb å®‰è£…/å¸è½½åº”ç”¨ï¼Œadbå‘½ä»¤ä¸‹è°ƒè¯•åº”ç”¨ç­‰ç­‰ ä¸‰åä¸‰ã€é€†å‘å®‰å…¨1ï¼šappæ•æ„Ÿæ•°æ®çš„å­˜å‚¨ï¼Œå¦‚è´¦æˆ·å¯†ç ï¼Œè¯·æ±‚çš„ç§˜é’¥ç­‰ï¼Œé“¶è¡Œç±»äº¤æ˜“ç±»è‡ªå®šä¹‰è¾“å…¥é”®ç›˜ï¼ˆé¿å…æ‹¦æˆªï¼‰ï¼Œè®¾å¤‡å”¯ä¸€æ ‡è¯†ï¼ˆAndroidç›®å‰æœ‰å“ªå‡ ç§æ–¹å¼ï¼‰2ï¼šåç¼–è¯‘ apk, åç¼–è¯‘soç­‰, æ··æ·†3ï¼šappåŠ å›º4ï¼šå¦‚ä½•é˜²æ­¢appç½‘ç»œè¯·æ±‚è¢«ç¬¬ä¸‰æ–¹æŠ“åŒ…ï¼ˆsocket/httpsï¼‰5ï¼šWebViewå¼€å‘JSäº¤äº’é¿å…è¿œç¨‹æ‰§è¡Œæ¼æ´ž6ï¼šåŠ å¯†ç®—æ³•ï¼ˆDES,AES,RSA,MD5,SHA1,Base64ï¼‰,å¯¹ç§°åŠ å¯†ä¸Žéžå¯¹ç§°åŠ å¯†7ï¼šè§†é¢‘åŠ å¯† ä¸‰åå››ã€NDKå¼€å‘1ï¼šJNIåŸºæœ¬æ•°æ®ç±»åž‹ï¼Œjniå‡½æ•°ç­¾åï¼Œjniæ³¨å†Œnativeå‡½æ•°çš„ä¸¤ç§æ–¹å¼ï¼ˆé™æ€ã€åŠ¨æ€ï¼‰2ï¼šjavaä¸Žjniäº’è°ƒï¼Œjavaå¦‚ä½•è°ƒç”¨jniå±‚ï¼Œjniå±‚å¦‚ä½•è°ƒç”¨javaä»£ç , JNIå„ç§å±‚æ•°æ®ç±»åž‹ä¸ŽJava/Cå±‚å„ç§æ•°æ®ç±»åž‹äº’è½¬è°ƒç”¨3ï¼šAndroid.mkæ–‡ä»¶ç¼–å†™ï¼Œå¦‚ä½•è¿žæŽ¥æºæ–‡ä»¶ã€.a .soåº“æ–‡ä»¶ï¼Œå¦‚ä½•ç¼–è¯‘ç”ŸæˆåŠ¨æ€é“¾æŽ¥åº“soæ–‡ä»¶ï¼Œç¼–è¯‘ä¸åŒå¹³å°çš„so, ç¼–è¯‘ç”Ÿæˆarm64ä½å¹³å°soæ—¶æ³¨æ„ä»€ä¹ˆï¼ˆæŒ‡é’ˆè¦longåž‹å­˜ï¼‰, Application.mk, buildè¿‡ç¨‹è§£æž4ï¼šAndroid StudioçŽ¯å¢ƒä¸‹å¦‚ä½•ä½¿ç”¨CMakeæ–¹å¼è¿›è¡ŒNDKå¼€å‘ ä¸‰åäº”ã€è®¾è®¡æ¨¡å¼1ï¼šUMLç±»å›¾ã€æ—¶åºå›¾2ï¼šOOå…­å¤§è®¾è®¡åŽŸåˆ™ï¼Œé¢å‘å¯¹è±¡çš„ä¸‰ä¸ªåŸºæœ¬ç‰¹å¾3ï¼š23ç§è®¾è®¡æ¨¡å¼ï¼Œäº†è§£å¸¸ç”¨å¸¸è§çš„è®¾è®¡æ¨¡å¼å¹¶åœ¨é¡¹ç›®ä¸­å®žè·µï¼ŒAndroidæºç ä¸­çš„è®¾è®¡æ¨¡å¼4ï¼šå¦‚ä½•ä¼˜åŒ–ä»£ç ï¼Œå¦‚ä½•é‡æž„ä»£ç ï¼ŒåŽ»é™¤é‡å¤ä»£ç ï¼Œä»£ç è§„èŒƒ ä¸‰åå…­ã€æž¶æž„æ¨¡å¼1ï¼šMVPæ¨¡å¼ï¼Œ MVPã€ MVCã€MVVMï¼ˆæ•°æ®ç»‘å®šå¼çš„MVPï¼‰çš„åŒºåˆ«, MVP + Cleanæ¨¡å¼2ï¼šæ¨¡å—åŒ–ï¼ˆä»ŽåŠŸèƒ½/ä¸šåŠ¡ä¸ŠåŒºåˆ†ï¼‰3ï¼šç»„ä»¶åŒ–çš„å¼€å‘æž¶æž„ï¼Œç»„ä»¶åŒ–å¸¦æ¥çš„é—®é¢˜ï¼Œæ¨¡å—ä¹‹é—´çš„è·³è½¬ï¼Œè·¯ç”±ï¼ŒARouter4ï¼šæ’ä»¶åŒ–çš„å¼€å‘æž¶æž„ï¼Œæ’ä»¶åŒ–çš„æ ¸å¿ƒåŽŸç†ï¼Œè™šæ‹Ÿæœº(å†…å­˜ç®¡ç†ï¼Œç±»åŠ è½½ï¼ŒåŒäº²å§”æ´¾), ä¸»æµæ’ä»¶åŒ–æ¡†æž¶åŽŸç†åˆ†æž5ï¼šçƒ­ä¿®å¤æ ¸å¿ƒåŽŸç†ï¼Œä¸»æµçƒ­ä¿®å¤æ¡†æž¶åŽŸç†åˆ†æž RxJava å®žçŽ°åŽŸç†ï¼Œä»€ä¹ˆæ˜¯å“åº”å¼ç¼–ç¨‹ï¼Œè§‚å¯Ÿè€…/è®¢é˜…æ¨¡å¼ï¼ŒRxJavaæ˜¯å¦‚ä½•å®žçŽ°çº¿ç¨‹è‡ªç”±åˆ‡æ¢çš„, RxJavaåœ¨ç©ºé—´å’Œæ—¶é—´ç»´åº¦ä¸Šé‡æ–°ç»„ç»‡äº‹ä»¶çš„èƒ½åŠ› Kotlin Kotlinå­¦ä¹ äº†è§£ï¼Œä¸ŽJavaçš„åŒºåˆ«ï¼Œå“ªä¸ªæ›´å¥½ç”¨ Dagger 2 ä¾èµ–æ³¨å…¥æ¡†æž¶ï¼Œä½¿ç”¨ä¸ŽåŽŸç†è§£æž Flutter Flutterå­¦ä¹ äº†è§£ï¼Œè·¨å¹³å°ï¼ŒåŒæ—¶æ”¯æŒiOSå’ŒAndroid Weex Weexå­¦ä¹ äº†è§£ï¼Œè·¨å¹³å°ï¼ŒåŒæ—¶æ”¯æŒiOSå’ŒAndroid Hybrid æ··åˆå¼€å‘ é™¤H5ä»¥å¤–ï¼Œæœ‰å“ªäº›æ··åˆå¼€å‘æ–¹å¼ï¼ˆweexï¼Œå°ç¨‹åºï¼ŒReact Nativeç­‰äº†è§£ï¼‰ OpenGL OpenGLäº†è§£ï¼Œäº†è§£OpenGL çš„æ¸²æŸ“æµç¨‹ï¼ˆé¡¶ç‚¹ç€è‰²å™¨ã€ç‰‡å…ƒç€è‰²å™¨ã€å…‰æ …åŒ–ã€é¡¶ç‚¹åæ ‡ç³»ã€æ³•å‘é‡ã€å…‰ç…§ã€æŠ•å½±ã€å‰ªè£ç­‰ç­‰ï¼‰ å­¦ä¹ Androidç³»ç»Ÿä¸­OpenGL ES 2.0/3.0çš„Apiï¼Œä½¿ç”¨OpenGLé…åˆGLSurfaceViewã€Renderç­‰ç»˜åˆ¶ç‚¹ã€çº¿ã€é¢ã€çº¹ç†è´´å›¾ç­‰ç­‰ æµ‹è¯•å·¥å…· å†…å­˜åˆ†æž:MAT,DDMS,Leakcanary(Square) é™æ€åˆ†æž:Find Bugs,Lint åŽ‹åŠ›æµ‹è¯•:Monkey è‡ªåŠ¨åŒ–æµ‹è¯•: UiAutomator,MonkeyRunner,Rubotium,Athrun(æ·˜å®) å…¶ä»–å†·é—¨çŸ¥è¯† Androidè¿‘åœºé€šä¿¡NFCã€Wifiã€è“ç‰™ã€USBä¸²å£é€šä¿¡ç­‰å¼€å‘ Androidå†…æ ¸ç§»æ¤ã€åµŒå…¥å¼ç»ˆç«¯å¼€å‘(éžæ‰‹æœºï¼Œå¦‚å®šåˆ¶çš„å¹³æ¿ã€TVï¼Œå®šåˆ¶çš„ç‚¹é¤å¹³å°ï¼Œæ˜¾ç¤ºå™¨ç­‰), æˆ–åŸºäºŽç»ˆç«¯ç³»ç»Ÿä¹‹ä¸Šçš„åº”ç”¨å¼€å‘ æ‰‹æœºå¼€å‘(éžappå¼€å‘ï¼Œè¿™é‡ŒæŒ‡æ‰‹æœºåŽ‚å•†ï¼Œå¦‚åŽä¸ºï¼Œå°ç±³ï¼Œéœ€è¦ç²¾é€šframeworkå±‚ä»¥åŠAndroidç³»ç»Ÿåº•å±‚æºç )ï¼Œæ‰‹æœºæ“ä½œç³»ç»Ÿå®šåˆ¶ Androidæ¸¸æˆå¼€å‘ï¼ˆè¿™ä¸ªä¸ç®—å†·é—¨ï¼Œåªæ˜¯å¹³æ—¶æŽ¥è§¦æ¯”è¾ƒå°‘ï¼‰ å…¶ä»–è¡¥å……ï¼š Notification Dialog Bitmapå¯¹è±¡çš„ç†è§£ AndroidManifestçš„ä½œç”¨ä¸Žç†è§£ Appä¸­å”¤é†’å…¶ä»–è¿›ç¨‹/åº”ç”¨çš„å®žçŽ°æ–¹å¼ ButterKnifeå®žçŽ°åŽŸç† Daggerä¾èµ–æ³¨å…¥ Android å¤šè¿›ç¨‹å’ŒApplicationå…³ç³» Androidé¡µé¢æ¢å¤ å¦‚ä½•ç›‘å¬Homeé”®å’Œbacké”®ç‚¹å‡» apkå¤šå…¥å£ ç¬¬ä¸‰æ–¹æ¶ˆæ¯æŽ¨é€SDK åœ°å›¾ ç¡¬ä»¶åŠ é€Ÿ Emoji å¤šå›½è¯­è¨€é€‚é…ï¼ˆä¸å•å•æŒ‡è¯­è¨€strings.xmlé€‚é… å¸ƒå±€ä¹Ÿå¯èƒ½è¦æ”¯æŒRTLï¼‰ æ­£åˆ™è¡¨è¾¾å¼ armeabi/armeabi-v7a/arm64-v8aç­‰soåº“å…¼å®¹é—®é¢˜ ç±»çš„åŠ è½½æœºåˆ¶ Android 65Ké—®é¢˜ï¼Œåˆ†åŒ…ï¼Œå¼•å…¥ç¬¬ä¸‰æ–¹åŒ…å†²çªè§£å†³æ–¹æ¡ˆ è®¡æ—¶å™¨/å®šæ—¶ä»»åŠ¡ï¼ˆAndroidæœ‰å“ªå‡ ç§å®žçŽ°æ–¹å¼ï¼‰ Theme å’Œ Styles å¤šç‚¹è§¦æŽ§ é—¹é’Ÿ éŸ³ä¹æ’­æ”¾å™¨ è¾“å…¥æ³•è½¯é”®ç›˜ç›¸å…³ åˆ†å± å¤œé—´æ¨¡å¼ å¾…ç»­â€¦ Javaéƒ¨åˆ†ä¸€ã€JavaåŸºç¡€1ï¼šJavaåŸºç¡€æ•°æ®ç±»åž‹ï¼Œå„å ç”¨å¤šå°‘å­—èŠ‚ï¼Œæ•°æ®ç±»åž‹ä¹‹é—´çš„ç›¸äº’è½¬æ¢ï¼Œæ•°æ®ç±»åž‹ä¹‹é—´çš„æ¯”è¾ƒ==å’Œequalsçš„åŒºåˆ«2ï¼šStringã€StringBufferã€StringBuilderåŒºåˆ«ï¼Œå“ªä¸ªæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½•æ—¶éœ€è¦ä½¿ç”¨åŽé¢ä¸¤ä¸ªï¼ˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼‰ï¼ŒStringå±žäºŽJavaçš„åŸºç¡€æ•°æ®ç±»åž‹å—ï¼Œå­—ç¬¦ä¸²æ“ä½œï¼ˆåˆ†éš”ã€æ‹¼æŽ¥ã€æ›¿æ¢ã€æŸ¥æ‰¾ï¼‰ï¼Œå­—ç¬¦ä¸²æ¯”è¾ƒï¼ŒStringä¸Žå…¶ä»–åŸºç¡€æ•°æ®ç±»åž‹çš„åŒ…è£…ç±»åž‹ä¹‹é—´çš„äº’è½¬ï¼ŒStringä¸Žcharæˆ–byte Arrayä¹‹é—´çš„äº’è½¬ï¼Œåˆ›å»ºå­—ç¬¦ä¸²å˜é‡æœ‰å‡ ç§æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²æ± ï¼Œä¸ºä»€ä¹ˆè¯´Javaå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜å¯¹è±¡3ï¼šJavaé›†åˆç›¸å…³ï¼Œé›†åˆçš„æŽ’åº/éåŽ†/å¤åˆ¶ï¼Œ HashMapåŽŸç†ï¼ŒHashMap å’Œ HashTable åŒºåˆ«ï¼ŒLinkedHashMapæºç åˆ†æžï¼Œ HashCode ä½œç”¨ï¼Œå¦‚ä½•é‡è½½hashCodeæ–¹æ³•ï¼ŒArrayListä¸ŽLinkListåŒºåˆ«ä¸Žè”ç³», Listä¸Žæ•°ç»„[]ç›¸äº’è½¬æ¢ï¼ŒList,Set,Mapçš„åŒºåˆ«ï¼ŒConcurrentHashMapçš„å®žçŽ°åŽŸç†ï¼Œè¦å­˜å‚¨ä¸€ä¸ªæ•°æ®å…ƒç´ ä¸é‡å¤çš„é›†åˆè¯¥ä½¿ç”¨å“ªç§é›†åˆï¼Œè¦å­˜å‚¨ä¸€ä¸ªæ•°æ®å…ƒç´ æ˜¯æœ‰åºçš„é›†åˆè¯¥ä½¿ç”¨å“ªç§é›†åˆï¼ŒArrayListå’ŒHashMap ç­‰é›†åˆæ˜¯å¦‚ä½•æ‰©å®¹çš„4ï¼šJavaåå°„ç›¸å…³ï¼Œæ–¹æ³•ã€æˆå‘˜å˜é‡5ï¼šJavaæ³¨è§£ç›¸å…³6ï¼šJavaçº¿ç¨‹åŒæ­¥ç›¸å…³ï¼ŒJavaæ­»é”äº§ç”Ÿçš„åŽŸå› åŠé¿å…ï¼Œæ–¹æ³•é”ã€å¯¹è±¡é”ã€ç±»é”çš„æ„ä¹‰å’ŒåŒºåˆ«ï¼Œçº¿ç¨‹åŒæ­¥çš„æ–¹æ³•ï¼šSynchronizedã€lockã€reentrantLockåˆ†æžï¼ŒSynchronizedåŽŸç†ï¼ŒVolatileå®žçŽ°åŽŸç†ï¼ŒThreadLocalçš„åŽŸç†å’Œç”¨æ³•ï¼ŒThreadPoolçš„ç”¨æ³•å’Œç¤ºä¾‹ï¼Œwait()å’Œsleep()çš„åŒºåˆ«ï¼Œwait/notifyå…³é”®å­—çš„ç†è§£7ï¼šJavaæžšä¸¾ç›¸å…³8ï¼šJavaå†…å­˜ç®¡ç†ï¼Œè™šæ‹Ÿæœº ï¼ŒGCæœºåˆ¶ï¼ŒJavaå¼•ç”¨ç±»åž‹ï¼Œå¾ªçŽ¯å¼•ç”¨ï¼ŒJavaå†…å­˜æ³„æ¼ï¼ŒJavaå†…å­˜æ¨¡åž‹ï¼ˆå †å†…å­˜ æ ˆå†…å­˜ å¸¸é‡æ± ï¼‰ï¼ŒJavaä¸­new ä¸€ä¸ªå¯¹è±¡æ˜¯å­˜åœ¨å“ªé‡Œçš„9ï¼šJVMç±»åŠ è½½æœºåˆ¶ï¼ŒClassLoader(ç±»åŠ è½½å™¨)çš„ç†è§£ï¼ŒAndroidä¸­çš„åŒºåˆ«10ï¼šä»€ä¹ˆæ˜¯å¤šæ€ï¼ŒJavaå°è£…ã€ç»§æ‰¿å’Œå¤šæ€çš„ç†è§£11ï¼šä»€ä¹ˆæ˜¯å†…éƒ¨ç±»ï¼Ÿå†…éƒ¨ç±»çš„ä½œç”¨ï¼Œé™æ€å†…éƒ¨ç±»çš„ä½œç”¨12ï¼šä»€ä¹ˆæ˜¯æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»å’ŒæŽ¥å£åŒºåˆ«ï¼ŒæŠ½è±¡ç±»æ˜¯å¦å¯ä»¥æ²¡æœ‰æ–¹æ³•å’Œå±žæ€§ï¼ŒæŽ¥å£çš„æ„ä¹‰13ï¼šJavaæ³›åž‹ç›¸å…³ï¼Œå¦‚ä½•é€šè¿‡æ³›åž‹ä¼ é€’Javaç±»ä½œä¸ºå‚æ•°14ï¼šåºåˆ—åŒ–çš„æ–¹å¼ Serializable å’ŒParcelable çš„åŒºåˆ«15ï¼šé™æ€å±žæ€§å’Œé™æ€æ–¹æ³•æ˜¯å¦å¯ä»¥è¢«ç»§æ‰¿ï¼Ÿé‡å†™ï¼Ÿä»¥åŠåŽŸå› ï¼Ÿ16ï¼šfinalï¼Œfinallyï¼Œfinalizeçš„åŒºåˆ«17ï¼šutf-8ç¼–ç ä¸­çš„ä¸­æ–‡å å‡ ä¸ªå­—èŠ‚ï¼›intåž‹å‡ ä¸ªå­—èŠ‚ï¼Ÿï¼Œjava unicodeç¼–ç ï¼Œä¸­æ–‡ä¸Žunicodeäº’è½¬18ï¼šä»€ä¹ˆæ˜¯æ·±æ‹·è´å’Œæµ…æ‹·è´19ï¼šå¦‚ä½•å®žçŽ°å¤šçº¿ç¨‹æ–­ç‚¹ç»­ä¼ 20ï¼šClass.forName()å’ŒClassLoaderçš„åŒºåˆ«21ï¼šå¾…ç»­â€¦ äºŒã€Javaæ•°æ®ç»“æž„å’Œç®—æ³•1ï¼šæ ˆå’Œé˜Ÿåˆ—ï¼Œæ ˆå’Œé˜Ÿåˆ—çš„æ¦‚å¿µç†è§£ï¼ŒJavaä»£ç å®žçŽ°æ ˆLIFOï¼ˆåŽè¿›å…ˆå‡ºï¼‰å’Œé˜Ÿåˆ—FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ï¼Œå®žçŽ°æ€è·¯ï¼Œå…¥æ ˆ/å‡ºæ ˆï¼Œæ ˆé¡¶/æ ˆåº•ï¼Œå…¥é˜Ÿ/å‡ºé˜Ÿï¼Œé˜Ÿå¤´/é˜Ÿå°¾ï¼Œæ ˆ/é˜Ÿçš„éåŽ†ï¼Œå¾ªçŽ¯é˜Ÿåˆ—ï¼Œåˆ¤æ–­æ ˆ/é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º2ï¼šæ•°ç»„å’Œé“¾è¡¨ï¼Œæ•°ç»„å’Œé“¾è¡¨çš„ç‰¹ç‚¹å’ŒåŒºåˆ«ï¼ŒJavaä»£ç å®žçŽ°é“¾è¡¨ç»“æž„ï¼Œæ•°ç»„å’Œé“¾è¡¨åˆ†åˆ«å®žçŽ°æŸ¥æ‰¾ã€æ’å…¥ï¼Œåˆ é™¤ç­‰æ“ä½œä»¥åŠå„è‡ªçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œé“¾è¡¨çš„ååºï¼Œä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„åˆå¹¶ï¼ŒåŒå‘é“¾è¡¨ç»“æž„çš„å®žçŽ°ï¼ŒåŒå‘é“¾è¡¨çš„æ’å…¥ã€åˆ é™¤ç­‰ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼ŒJava ç±»ä¸­å“ªäº›ç»“æž„å±žäºŽæ•°ç»„/é“¾è¡¨3ï¼šæŽ’åºç®—æ³•ï¼ŒJavaå…«å¤§æŽ’åºç®—æ³•çš„å®žçŽ°æ€è·¯ï¼ˆé€‰æ‹©æŽ’åºï¼Œå¿«é€ŸæŽ’åºï¼Œå†’æ³¡æŽ’åºï¼Œå †æŽ’åºï¼Œå¸Œå°”æŽ’åºï¼Œå½’å¹¶æŽ’åºï¼Œç›´æŽ¥æ’å…¥æŽ’åºï¼ŒåŸºæ•°æŽ’åºï¼‰ä»¥åŠå„è‡ªçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œæœ€å¿«çš„æŽ’åºç®—æ³•æ˜¯å“ªä¸ªï¼Ÿ å“ªäº›æ˜¯ç¨³å®š/ä¸ç¨³å®šçš„æŽ’åºç®—æ³•ï¼Œå¿«æŽ’çš„ä¼˜åŒ–ï¼Œæ‰‹å†™å†’æ³¡ã€å¿«æŽ’ä»£ç 4ï¼šæŸ¥æ‰¾ç®—æ³•ï¼ŒJavaä»£ç å®žçŽ°é¡ºåºæŸ¥æ‰¾å’ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå®žçŽ°æ€è·¯5ï¼šäºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘æŽ’åºï¼ŒäºŒå‰æ ‘éåŽ†ã€æŸ¥æ‰¾ã€åˆ é™¤ï¼Œå“ˆå¤«æ›¼æ ‘ã€çº¢é»‘æ ‘6ï¼šHashè¡¨ï¼ŒåŠHashå†²çªçš„è§£å†³7ï¼šJavaæœ‰å‘å›¾çš„éåŽ†ï¼ŒBFSéåŽ†å’ŒDFSéåŽ†ï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•å’Œå¹¿åº¦ä¼˜å…ˆæœç´¢ç®—æ³•ï¼‰ã€Primã€Dijkstraç®—æ³•8ï¼šç»å…¸é—®é¢˜ï¼šæµ·é‡æ•°æ®çš„å¤„ç† ï¼ˆ10äº¿ä¸ªæ•°ä¸­æ‰¾å‡ºæœ€å¤§çš„10000ä¸ªæ•° TOP Ké—®é¢˜ï¼‰9ï¼šä¸¤ä¸ªä¸é‡å¤çš„æ•°ç»„é›†åˆä¸­ï¼Œä¸¤ä¸ªé›†åˆéƒ½æ˜¯æµ·é‡æ•°æ®ï¼Œå†…å­˜ä¸­æ”¾ä¸ä¸‹ï¼Œæ±‚å…±åŒå…ƒç´ 10ï¼šçƒ§ä¸€æ ¹ä¸å‡åŒ€çš„ç»³ï¼Œä»Žå¤´çƒ§åˆ°å°¾æ€»å…±éœ€è¦1ä¸ªå°æ—¶ã€‚çŽ°åœ¨æœ‰è‹¥å¹²æ¡æè´¨ç›¸åŒçš„ç»³å­ï¼Œé—®å¦‚ä½•ç”¨çƒ§ç»³çš„æ–¹æ³•æ¥è®¡æ—¶ä¸€ä¸ªå°æ—¶åäº”åˆ†é’Ÿå‘¢ï¼Ÿ11ï¼šæ—¶é’ˆèµ°ä¸€åœˆï¼Œæ—¶é’ˆåˆ†é’ˆé‡åˆå‡ æ¬¡12ï¼šN*Nçš„æ–¹æ ¼çº¸,é‡Œé¢æœ‰å¤šå°‘ä¸ªæ­£æ–¹å½¢13ï¼šå¾…ç»­â€¦]]></content>
      <categories>
        <category>Android</category>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ListViewä¸­æ·»åŠ çš„HeadViewéšè—æ—¶ä»ç„¶å ç”¨ç©ºé—´çš„è§£å†³æ–¹æ³•]]></title>
    <url>%2Fposts%2Fdf7e47f7.html</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨å¼€å‘çš„æ—¶å€™é‡åˆ°äº†ä¸€ä¸ªListViewä¸­æ·»åŠ çš„HeadViewéšè—æ—¶ä»ç„¶å ç”¨ç©ºé—´çš„è§£å†³æ–¹æ³•ï¼› å…·ä½“é—®é¢˜å¦‚ä¸‹ï¼šlistView.addHeadView(headView); ä½†æ˜¯åœ¨æ‰§è¡ŒheadView.setVisibility(View.GONE);åŽheadViewè™½ç„¶éšè—äº†ï¼Œä½†æ˜¯ä»ç„¶å ç”¨äº†ç©ºé—´ï¼› è§£å†³æ–¹æ³•ï¼š åœ¨æ·»åŠ HeadViewä¹‹å‰é¦–å…ˆåˆ›å»ºä¸€ä¸ªçˆ¶å¸ƒå±€parentView,å³ï¼š 12345LinearLayout parentView=new LinearLayout (Context context);parentView.addView(headView);listView.addHeadView(parentView); ä¹‹åŽå†è¿›è¡Œéšè—ï¼š 12//å°±å¯ä»¥å®žçŽ°ä»¥ä¸Šæ‰€è¯´çš„æ•ˆæžœäº†ã€‚headView.setVisibility(View.GONE);]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android APPåˆ†äº«å¾®ä¿¡å°ç¨‹åº]]></title>
    <url>%2Fposts%2F83fb494f.html</url>
    <content type="text"><![CDATA[éœ€æ±‚ï¼šAPPç«¯ å°†å…¬å¸çš„å¾®ä¿¡å°ç¨‹åº åˆ†äº«è‡³å¾®ä¿¡å¥½å‹ æœ€è¿‘ï¼Œå¾®ä¿¡å°ç¨‹åºæ¯”è¾ƒç«çƒ­ï¼Œå…¬å¸ä¹Ÿåœ¨åšè¿™ä¸€å—ï¼Œç›®å‰å…¬å¸çš„å°ç¨‹åºéƒ½æ˜¯ç”±H5ç«¯å¼€å‘çš„ï¼Œæˆ‘ä»¬Androidç«¯ä¹ŸæŽ¥åˆ°ä¸€ä¸ªä»»åŠ¡ï¼Œé‚£å°±æ˜¯Androidç«¯åº”æ”¯æŒå¾®ä¿¡å°ç¨‹åºçš„åˆ†äº«ï¼Œå¹¶ä¸”é€šè¿‡åˆ†äº«å‡ºåŽ»çš„å°ç¨‹åºå¯ä»¥å¯åŠ¨æˆ‘ä»¬çš„APPï¼› ä»Šå¤©æˆ‘ä»¬å…ˆæ¥å®Œæˆï¼šAndroidç«¯åº”æ”¯æŒå¾®ä¿¡å°ç¨‹åºçš„åˆ†äº«ï¼ï¼ï¼ åˆ†æžï¼š å¾®ä¿¡å¼€æ”¾å¹³å°SDKæ”¯æŒå°ç¨‹åºç±»åž‹åˆ†äº«ï¼Œè¯¦è§å®˜æ–¹æ–‡æ¡£ï¼š https://open.weixin.qq.com/cgi-bin/showdocument?action=dir_list&amp;t=resource/res_list&amp;verify=1&amp;id=open1419317340&amp;token=&amp;lang=zh_CN a) è¦æ±‚å‘èµ·åˆ†äº«çš„Appä¸Žå°ç¨‹åºå±žäºŽåŒä¸€å¾®ä¿¡å¼€æ”¾å¹³å°å¸å·ï¼› b) æ”¯æŒåˆ†äº«å°ç¨‹åºç±»åž‹æ¶ˆæ¯è‡³å¥½å‹ä¼šè¯ï¼Œä¸æ”¯æŒâ€œåˆ†äº«è‡³æœ‹å‹åœˆâ€ â€œæ”¶è—â€ï¼› c) å¾®ä¿¡å®¢æˆ·ç«¯ç‰ˆæœ¬è¦æ±‚ï¼š6.5.6åŠä»¥ä¸Šå¾®ä¿¡å®¢æˆ·ç«¯ç‰ˆæœ¬ï¼Œè‹¥å®¢æˆ·ç«¯ç‰ˆæœ¬ä½ŽäºŽ6.5.6ï¼Œå°ç¨‹åºç±»åž‹åˆ†äº«å°†è‡ªåŠ¨è½¬æˆç½‘é¡µç±»åž‹åˆ†äº«ã€‚å¼€å‘è€…å¿…é¡»å¡«å†™ç½‘é¡µé“¾æŽ¥å­—æ®µï¼Œç¡®ä¿ä½Žç‰ˆæœ¬å®¢æˆ·ç«¯èƒ½æ­£å¸¸æ‰“å¼€ç½‘é¡µé“¾æŽ¥ï¼› d) æ”¯æŒåˆ†äº«å¤§å›¾å¡ç‰‡æ ·å¼ï¼Œè‡ªå®šä¹‰å›¾ç‰‡å»ºè®®é•¿å®½æ¯”æ˜¯ 5:4ã€‚6.5.9åŠä»¥ä¸Šç‰ˆæœ¬å¾®ä¿¡å®¢æˆ·ç«¯å°ç¨‹åºç±»åž‹åˆ†äº«ä½¿ç”¨å¤§å›¾å¡ç‰‡æ ·å¼ã€‚ e)æ”¯æŒåˆ†äº«å¼€å‘ç‰ˆ/ä½“éªŒç‰ˆå°ç¨‹åºï¼Œä¸ºæ”¯æŒå¼€å‘è€…è°ƒè¯•ï¼Œå¼€å‘è€…å·¥å…·åŒ…æ”¯æŒåˆ†äº«å¼€å‘ç‰ˆ/ä½“éªŒç‰ˆå°ç¨‹åºè‡³å¾®ä¿¡ï¼Œå¼€å‘è€…å¯æŽ§åˆ¶åˆ†äº«çš„å°ç¨‹åºç‰ˆæœ¬ã€‚ æŠŠæ–‡æ¡£çœ‹äº†ä¸€éï¼Œå‘çŽ°é™åˆ¶æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œä½†æ˜¯åŠŸèƒ½å®žçŽ°è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œä¸‹é¢è®©æˆ‘ä»¬å¼€å§‹å§ï¼ï¼ï¼ å¼€å‘ï¼š å‰æœŸå‡†å¤‡ å°ç¨‹åºä¸ŽAPPä¸»ä½“è´¦å·ç»‘å®šå¼€å‘äººå‘˜å¸Œæœ›é€šè¿‡APPåˆ†äº«å°ç¨‹åºï¼Œéœ€è¦å…ˆå°†å°ç¨‹åºä¸ŽAPPä¸»ä½“è´¦å·ï¼ˆå³APPçš„å¾®ä¿¡å¼€æ”¾å¹³å°è´¦å·ï¼‰ç»‘å®šï¼ŒAPPæ‰å…·æœ‰åˆ†äº«å¯¹åº”å°ç¨‹åºçš„èƒ½åŠ›ã€‚å¦‚æžœæ²¡æœ‰ä¸Žä¸»ä½“è´¦å·ç»‘å®šï¼Œåˆ†äº«æ—¶æ˜¯æŠ¥é”™çš„ï¼Œå¦‚ä¸‹å›¾ï¼šâ€‹ ç™»å½•APPæ‰€åœ¨çš„å¾®ä¿¡å¼€æ”¾å¹³å°ï¼šhttps://open.weixin.qq.com/ç»‘å®šå°ç¨‹åº ç”±ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œç»‘å®šå°ç¨‹åºçš„æ•°é‡æ˜¯æœ‰é™åˆ¶çš„ã€‚æˆ‘ä»¬ç‚¹å‡»ã€ç»‘å®šå°ç¨‹åºã€‘æŒ‰é’®ï¼Œæ‰“å¼€çš„æ–°é¡µé¢ è¾“å…¥å°ç¨‹åºå¼€å‘çš„ä¸»è´¦å·å’Œå¯†ç ï¼Œè¾“å…¥éªŒè¯ç æäº¤å°±å¯ä»¥äº†ï¼Œç„¶åŽå†é€šè¿‡æ‰‹æœºå¾®ä¿¡æ‰«ç éªŒè¯ä¸€ä¸‹ã€‚ ç»‘å®šæˆåŠŸåŽï¼Œç›´æŽ¥å°±èƒ½åœ¨ç»‘å®šåˆ—è¡¨ä¸­çœ‹åˆ°å·²ç»‘å®šçš„å°ç¨‹åºï¼ï¼ï¼ ä»£ç å®žçŽ°å°ç¨‹åºç«¯æä¾›å‚æ•°ï¼š12miniProgram.userName="xxx"; //å°ç¨‹åºIDminiProgram.path="pages/xxx/xxx"; //å°ç¨‹åºè·¯å¾„ é…ç½®gradle123dependencies &#123; compile 'com.tencent.mm.opensdk:wechat-sdk-android-with-mta:+'&#125; åˆ†äº«å°ç¨‹åºçš„æ ¸å¿ƒä»£ç 12345678910111213141516171819202122232425262728293031323334public void shareMinP(ShareMiniPModel shareModel)&#123; if (shareModel == null) return; WXMiniProgramObject miniProgramObj = new WXMiniProgramObject(); miniProgramObj.webpageUrl = shareModel.getWebPageUrl(); // å…¼å®¹ä½Žç‰ˆæœ¬çš„ç½‘é¡µé“¾æŽ¥ miniProgramObj.miniprogramType = shareModel.getMiniProgramType(); // åˆ†äº«å°ç¨‹åºç‰ˆ æ­£å¼ç‰ˆ:0ï¼Œæµ‹è¯•ç‰ˆ:1ï¼Œä½“éªŒç‰ˆ:2 miniProgramObj.userName = shareModel.getMiniId(); // å°ç¨‹åºåŽŸå§‹id miniProgramObj.path = shareModel.getMiniPath(); // å°ç¨‹åºé¡µé¢è·¯å¾„ localWXMediaMessage = new WXMediaMessage(miniProgramObj); localWXMediaMessage.title = shareModel.getTitle(); // å°ç¨‹åºæ¶ˆæ¯title localWXMediaMessage.description = shareModel.getDescription(); // è¯¦ç»†æè¿° if (!TextUtils.isEmpty(shareModel.getImageUrl()))&#123; inflateImage(shareModel.getImageUrl(), new Callback() &#123; // å°ç¨‹åºå›¾ç‰‡ @Override public void onLoadingComplete(String s, View view, Bitmap bitmap) &#123; thumbBmp = bitmap; localWXMediaMessage.thumbData = bmpToByteArray(thumbBmp, true); if (localWXMediaMessage.thumbData.length &lt; 131072)&#123; WXsendReq(SendMessageToWX.Req.WXSceneSession, localWXMediaMessage); &#125; else &#123; LogUtils.e("åˆ†äº«å°ç¨‹åºï¼Œç¼©ç•¥å›¾ä¸å¾—è¶…è¿‡128kb"); &#125; &#125; &#125;); &#125; else if (shareModel.getImageBitmap() != null)&#123; thumbBmp = shareModel.getImageBitmap(); localWXMediaMessage.thumbData = bmpToByteArray(thumbBmp, true); if (localWXMediaMessage.thumbData.length &lt; 131072)&#123; WXsendReq(SendMessageToWX.Req.WXSceneSession, localWXMediaMessage); &#125; else &#123; LogUtils.e("åˆ†äº«å°ç¨‹åºï¼Œç¼©ç•¥å›¾ä¸å¾—è¶…è¿‡128kb"); &#125; &#125;&#125; Demoæ¼”ç¤ºä¸ºäº†é¿å…éº»çƒ¦ï¼Œæˆ‘ä»¬ç›´æŽ¥ä¸‹è½½ä½¿ç”¨å®˜æ–¹Demoï¼Œåœ¨å…¶æºä»£ç ä¸Šç›´æŽ¥ä¿®æ”¹ï¼Œä¿®æ”¹çš„å†…å®¹ä¸»è¦å¦‚ä¸‹ï¼š a. åŒ…åï¼ˆå¿…é¡»ä¿®æ”¹ï¼Œä½¿ç”¨ä½ é¡¹ç›®APPçš„å®žé™…åŒ…åï¼‰ b. é…ç½®gradleï¼ˆå¾®ä¿¡sdkåŒ…ã€ç­¾åæ–‡ä»¶ï¼‰ c. å¢žåŠ åˆ†äº«å°ç¨‹åºçš„æŒ‰é’®å’Œäº‹ä»¶ä¸‹è½½å¾®ä¿¡å¼€æ”¾å¹³å°å®˜æ–¹Demo https://open.weixin.qq.com/zh_CN/htmledition/res/dev/download/sdk/WeChatSDK_sample_Android.zip ä¿®æ”¹åŒ…å ä½¿ç”¨Androidstudioæ‰“å¼€demoï¼Œç›®å½•ç»“æž„å¦‚ä¸‹å›¾ï¼Œä¿®æ”¹å…¶åŒ…å å¦‚ä¸Šå›¾ï¼Œå–æ¶ˆcompact empty middle packagesçš„é»˜è®¤é€‰ä¸­åœ¨å¯¹åº”åŒ…åçš„æ–‡ä»¶å¤¹ä¸Šï¼Œç›´æŽ¥å³é”®ä¿®æ”¹åç§°ï¼Œæ”¹æˆåŒ…åå¯¹åº”çš„åç§°ï¼Œå¹¶å…¨éƒ¨åº”ç”¨å¯å‚è€ƒï¼šhttps://www.jianshu.com/p/557e1906db1aä¿®æ”¹åŽçš„åŒ…åï¼Œå¿…é¡»æ˜¯ä½ é¡¹ç›®APPçš„å®žé™…åŒ…åï¼Œä¸”å·²é€šè¿‡å¾®ä¿¡å¼€æ”¾å¹³å°å®¡æ ¸çš„APPåŒ…åï¼› é…ç½®gradleï¼ˆä¿®æ”¹ä¾èµ–ã€ä¿®æ”¹ç­¾åï¼‰ ç­¾åå¿…é¡»ä½¿ç”¨ä½ é¡¹ç›®APPå¯¹åº”çš„ç­¾åæ–‡ä»¶ï¼Œå³ä½ ç”³è¯·å¾®ä¿¡å¼€æ”¾å¹³å°æ—¶APPå¯¹åº”çš„ç­¾åæ–‡ä»¶ï¼› ä¿®æ”¹APP_ID12345678910public class Constants &#123; // APP_ID æ›¿æ¢ä¸ºä½ çš„åº”ç”¨ä»Žå®˜æ–¹ç½‘ç«™ç”³è¯·åˆ°çš„åˆæ³•appId public static final String APP_ID = "wxf666676666636666"; public static class ShowMsgActivity &#123; public static final String STitle = "showmsg_title"; public static final String SMessage = "showmsg_message"; public static final String BAThumbData = "showmsg_thumb_data"; &#125;&#125; å¢žåŠ åˆ†äº«å°ç¨‹åºçš„æŒ‰é’®å’Œäº‹ä»¶ æµ‹è¯• é€‰æ‹©åˆ†äº«çš„äººå‘˜ æ”¶åˆ°åˆ†äº«çš„å°ç¨‹åºå¡ç‰‡]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å¾®ä¿¡å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Snackbarçš„ä½¿ç”¨]]></title>
    <url>%2Fposts%2F30a2bcae.html</url>
    <content type="text"><![CDATA[Snackbaræ˜¯design support libraryä¸­çš„ç»„ä»¶çš„å…¶ä¸­ä¹‹ä¸€ï¼Œå®ƒçš„ä½¿ç”¨æ•ˆæžœä¸ŽToastç±»ä¼¼ï¼Œä½†æ›´åŠ çµæ´»Snackbaræ‹¥æœ‰çš„ç‰¹æ€§ï¼š æ˜¾ç¤ºä¸€æ®µæ—¶é—´æˆ–å½“ç”¨æˆ·ä¸Žä¹‹è¿›è¡Œäº¤äº’åŽï¼Œä¼šè‡ªåŠ¨æ¶ˆå¤± é€šè¿‡CoordinatorLayoutå¯ä»¥å®žçŽ°å‘å³æ»‘åŠ¨æ¶ˆé™¤Snackbarçš„æ•ˆæžœ åŒä¸€æ—¶é—´åªèƒ½æ˜¾ç¤ºä¸€ä¸ªSnackbar ä¸ŽToastç±»ä¼¼åœ°ä½¿ç”¨LENGTH_LONG å’Œ LENGTH_SHORTè®¾ç½®æ˜¾ç¤ºæ—¶é—´ æä¾›Actionå±žæ€§ä¾›æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬ æä¾›å›žè°ƒå‡½æ•°å¯ä»¥å¯¹Snackbarè¿›è¡Œç›‘å¬ æƒ³è¦ä½¿ç”¨Snackbarï¼Œé¦–å…ˆéœ€è¦æ·»åŠ com.android.support:designä¾èµ–é¡¹ ä¸€ã€ Snackbarçš„æœ€ç®€å•ç”¨æ³•æ˜¯å’ŒToastä¸€æ ·å£°æ˜Ž1Snackbar.make(textView, "æ¶ˆæ¯", Snackbar.LENGTH_SHORT).show(); å¤§éƒ¨åˆ†å±žæ€§ä¸ŽToastç›¸åŒï¼Œä¸è¿‡ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„ä¸æ˜¯Contextï¼Œè€Œåº”è¯¥æ˜¯ä¸€ä¸ªViewï¼Œå› ä¸ºSnackbaréœ€è¦ä¸€ä¸ªæŽ§ä»¶å®¹å™¨ç”¨æ¥å®¹çº³è‡ªèº«ï¼Œè¿™é‡Œä½¿ç”¨ä¸€ä¸ªTextViewæ‰€ä»¥ï¼Œä¸»å¸ƒå±€æ–‡ä»¶å¯ä¿®æ”¹ä¸º 123456789101112131415161718192021&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical" tools:context="com.zy.snackbartest.MainActivity"&gt; &lt;TextView android:id="@+id/text" android:layout_width="match_parent" android:layout_height="wrap_content" android:gravity="center" android:text="Snackbar" /&gt; &lt;Button android:id="@+id/button" android:layout_width="match_parent" android:layout_height="wrap_content" android:text="ç‚¹å‡»æŒ‰é’®" /&gt;&lt;/LinearLayout&gt; MainActivity ä¿®æ”¹ä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼Œå½“ç‚¹å‡»äº†ButtonåŽå¼¹å‡ºSnackbar 12345678910111213141516171819202122public class MainActivity extends AppCompatActivity &#123; private TextView textView; private Button button; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); textView = (TextView) findViewById(R.id.text); button = (Button) findViewById(R.id.button); button.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Snackbar.make(textView, "æ¶ˆæ¯", Snackbar.LENGTH_SHORT).show(); &#125; &#125;); &#125;&#125; äºŒã€ æ­¤å¤–ï¼ŒSnackbarå¯ä»¥é€šè¿‡Actionæ¥ä¸Žä¹‹è¿›è¡Œäº¤äº’1234567891011121314button.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Snackbar.make(textView, "æ¶ˆæ¯", Snackbar.LENGTH_SHORT) .setAction("Action", new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Toast.makeText(MainActivity.this, "ç‚¹å‡»äº†Action", Toast.LENGTH_SHORT).show(); &#125; &#125;) .setActionTextColor(Color.parseColor("#375ED1")) .show(); &#125; &#125;); ä¸‰ã€ å®˜æ–¹æŽ¨èä½¿ç”¨CoordinatorLayoutä½œä¸ºSnackbarçš„å®¹çº³å®¹å™¨ï¼Œè¿™æ ·å°±å¯ä»¥å®žçŽ°å‘å³æ»‘åŠ¨æ¶ˆé™¤Snackbarçš„æ•ˆæžœå°†ä¸»å¸ƒå±€æ–‡ä»¶ä¿®æ”¹ä¸º 123456789101112131415161718192021&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical" tools:context="com.zy.snackbartest.MainActivity"&gt; &lt;android.support.design.widget.CoordinatorLayout android:id="@+id/layoutRoot" android:layout_width="match_parent" android:layout_height="match_parent"&gt; &lt;Button android:id="@+id/button" android:layout_width="match_parent" android:layout_height="wrap_content" android:text="æŒ‰é’®" /&gt; &lt;/android.support.design.widget.CoordinatorLayout&gt;&lt;/LinearLayout&gt; MainActivity æ–‡ä»¶ä¿®æ”¹ä¸º 123456789101112131415161718192021222324252627282930public class MainActivity extends AppCompatActivity &#123; private CoordinatorLayout layout; private Button button; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); layout = (CoordinatorLayout) findViewById(R.id.layoutRoot); button = (Button) findViewById(R.id.button); button.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Snackbar.make(layout, "æ¶ˆæ¯", Snackbar.LENGTH_SHORT) .setAction("Action", new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Toast.makeText(MainActivity.this, "ç‚¹å‡»äº†Action", Toast.LENGTH_SHORT).show(); &#125; &#125;) .setActionTextColor(Color.parseColor("#375ED1")) .show(); &#125; &#125;); &#125;&#125; å››ã€ å¯ä»¥è®¾ç½®Snackbarçš„å‡ºçŽ°æ¶ˆå¤±ç›‘å¬å‡½æ•°åœ¨Snackbarå‡ºçŽ°å’Œæ¶ˆå¤±æ—¶åˆ†åˆ«å¼¹å‡ºä¸€ä¸ªToastè¿›è¡Œæç¤º 123456789101112131415161718192021222324252627button.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Snackbar.make(layout, "æ¶ˆæ¯", Snackbar.LENGTH_SHORT) .setAction("Action", new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Toast.makeText(MainActivity.this, "ç‚¹å‡»äº†Action", Toast.LENGTH_SHORT).show(); &#125; &#125;) .setActionTextColor(Color.parseColor("#375ED1")) .setCallback(new Snackbar.Callback() &#123; @Override public void onDismissed(Snackbar snackbar, int event) &#123; super.onDismissed(snackbar, event); Toast.makeText(MainActivity.this, "æ¶ˆå¤±äº†", Toast.LENGTH_SHORT).show(); &#125; @Override public void onShown(Snackbar snackbar) &#123; super.onShown(snackbar); Toast.makeText(MainActivity.this, "å‡ºçŽ°äº†", Toast.LENGTH_SHORT).show(); &#125; &#125;) .show(); &#125; &#125;); äº”ã€æ”¹å˜Snackbarçš„èƒŒæ™¯è‰²æƒ³è¦è®¾ç½®Snackbarçš„èƒŒæ™¯è‰²ï¼Œå°±è¦é€šè¿‡getView()æ–¹æ³•äº†ï¼Œè¿™é‡ŒSnackbaréœ€è¦æ¢ä¸€ç§å£°æ˜Žæ–¹å¼ 123456789button.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Snackbar snackbar = Snackbar.make(layout, "æ¶ˆæ¯", Snackbar.LENGTH_SHORT); //è®¾ç½®èƒŒæ™¯è‰² snackbar.getView().setBackgroundColor(Color.parseColor("#375ED1")); snackbar.show(); &#125; &#125;); å…­ã€Snackbarä¸ä¸€å®šåªèƒ½ä»Žå±å¹•åº•ç«¯å‡ºçŽ°Snackbarä¼šæ²¿ç€View çš„æ ‘çŠ¶è·¯å¾„ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªåˆé€‚çš„å¸ƒå±€æˆ–çª—å£è§†å›¾ï¼Œä½œä¸ºçˆ¶ Viewå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜Snackbarçš„çˆ¶Viewä½ç½®ï¼Œä»Žè€Œæ”¹å˜Snackbarçš„å‡ºçŽ°ä½ç½®ä¿®æ”¹ä¸»å¸ƒå±€æ–‡ä»¶ï¼Œå°†å±å¹•å¹³å‡åˆ†ä¸ºä¸Šä¸‹ä¸¤ä¸ªç©ºé—´ 12345678910111213141516171819202122232425262728293031&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools" android:layout_width="match_parent" android:layout_height="match_parent" android:orientation="vertical" tools:context="com.zy.snackbartest.MainActivity"&gt; &lt;android.support.design.widget.CoordinatorLayout android:id="@+id/layoutRoot" android:layout_width="match_parent" android:layout_height="0dp" android:layout_weight="1"&gt; &lt;Button android:id="@+id/button" android:layout_width="match_parent" android:layout_height="wrap_content" android:text="æŒ‰é’®" /&gt; &lt;/android.support.design.widget.CoordinatorLayout&gt; &lt;FrameLayout android:layout_width="match_parent" android:layout_height="0dp" android:layout_weight="1" android:background="#adc"&gt; &lt;/FrameLayout&gt;&lt;/LinearLayout&gt;]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Viewåæ ‡è¯¦è§£]]></title>
    <url>%2Fposts%2Fbc32efd9.html</url>
    <content type="text"><![CDATA[è½¬ï¼šhttps://blog.csdn.net/yanbober/article/details/50419117 èƒŒæ™¯å­¦ä¹ è‡ªå®šä¹‰æŽ§ä»¶ä»¥æ­¤ä¸ºåŸºç¡€ï¼Œå…ˆæ€»ç»“ä¸€ä¸‹è‡ªå®šä¹‰æŽ§ä»¶çš„ä¸€ä¸ªæ ¸å¿ƒçŸ¥è¯†ç‚¹â€”â€”åæ ‡ç³»ã€‚ å¾ˆå¤šäººå¯èƒ½ä¸å±‘ä¸€é¡¾Androidçš„åæ ‡ç³»ï¼Œä½†æ˜¯å¦‚æžœä½ æƒ³å½»åº•å­¦ä¼šè‡ªå®šä¹‰æŽ§ä»¶ï¼Œæˆ‘æƒ³è¯´äº†è§£Androidå„ç§åæ ‡ç³»åŠä¸€äº›APIçš„åæ ‡å«ä¹‰ç»å¯¹ç®—ä¸€ä¸ªå°è€Œä¸å¯å¿½è§†çš„æŠ€èƒ½ï¼›æ‰€è°“Androidè‡ªå®šä¹‰Viewé‚£å‡ å¤§ä¸»è¦onXXX()æ–¹æ³•çš„é‡å†™å®žè´¨å…¶å®žå¤§å¤šæ•°éƒ½æ˜¯åœ¨å¤„ç†åæ ‡é€»è¾‘è¿ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å…ˆæ¥å°±é¢˜é‡è°ˆä¸€ä¸‹Androidåæ ‡ç³»ã€‚ androidåæ ‡ç³»è¯´åˆ°Androidåæ ‡ç³»å…¶å®žå°±æ˜¯ä¸€ä¸ªä¸‰ç»´åæ ‡ï¼ŒZè½´å‘ä¸Šï¼ŒXè½´å‘å³ï¼ŒYè½´å‘ä¸‹ã€‚è¿™ä¸‰ç»´åæ ‡çš„ç‚¹å¤„ç†å°±èƒ½æž„æˆAndroidä¸°å¯Œçš„ç•Œé¢æˆ–è€…åŠ¨ç”»ç­‰æ•ˆæžœï¼Œæ‰€ä»¥Androidåæ ‡ç³»åœ¨æ•´ä¸ªAndroidç•Œé¢ä¸­ç®—æ˜¯ç›–æ¥¼æˆ¿çš„å°ºå¯¸è‰å›¾ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹è¿™äº›ç›¸å…³çš„æ¦‚å¿µã€‚ androidå±å¹•åŒºåŸŸåˆ’åˆ†æˆ‘ä»¬å…ˆçœ‹ä¸€å‰¯å›¾æ¥äº†è§£ä¸€ä¸‹Androidå±å¹•çš„åŒºåŸŸåˆ’åˆ† é€šè¿‡ä¸Šå›¾æˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚çš„çœ‹åˆ°Androidå¯¹äºŽå±å¹•çš„åˆ’åˆ†å®šä¹‰ã€‚ä¸‹é¢æˆ‘ä»¬å°±ç»™å‡ºè¿™äº›åŒºåŸŸé‡Œå¸¸ç”¨åŒºåŸŸçš„ä¸€äº›åæ ‡æˆ–è€…åº¦é‡æ–¹å¼ã€‚å¦‚ä¸‹ï¼š 12345//èŽ·å–å±å¹•åŒºåŸŸçš„å®½é«˜ç­‰å°ºå¯¸èŽ·å–DisplayMetrics metrics = new DisplayMetrics();getWindowManager().getDefaultDisplay().getMetrics(metrics);int widthPixels = metrics.widthPixels;int heightPixels = metrics.heightPixels; 123//åº”ç”¨ç¨‹åºAppåŒºåŸŸå®½é«˜ç­‰å°ºå¯¸èŽ·å–Rect rect = new Rect();getWindow().getDecorView().getWindowVisibleDisplayFrame(rect); 1234//èŽ·å–çŠ¶æ€æ é«˜åº¦Rect rect= new Rect();getWindow().getDecorView().getWindowVisibleDisplayFrame(rect);int statusBarHeight = rectangle.top; 123//Viewå¸ƒå±€åŒºåŸŸå®½é«˜ç­‰å°ºå¯¸èŽ·å–Rect rect = new Rect(); getWindow().findViewById(Window.ID_ANDROID_CONTENT).getDrawingRect(rect); ç‰¹åˆ«æ³¨æ„ï¼šä¸Šé¢è¿™äº›æ–¹æ³•æœ€å¥½åœ¨Activityçš„onWindowFocusChanged ()æ–¹æ³•æˆ–è€…ä¹‹åŽè°ƒè¿ï¼Œå› ä¸ºåªæœ‰è¿™æ—¶å€™æ‰æ˜¯çœŸæ­£çš„æ˜¾ç¤ºOKï¼Œä¸æ‡‚çš„å¯ä»¥çœ‹æˆ‘ä¹‹å‰å…³äºŽsetContentViewç›¸å…³çš„åšå®¢ã€‚ android viewç»å¯¹ç›¸å¯¹åæ ‡ç³»ä¸Šé¢æˆ‘ä»¬åˆ†æžäº†Androidå±å¹•çš„åˆ’åˆ†ï¼Œå¯ä»¥å‘çŽ°æˆ‘ä»¬å¹³æ—¶å¼€å‘çš„é‡ç‚¹å…¶å®žéƒ½åœ¨å…³æ³¨Viewå¸ƒå±€åŒºåŸŸï¼Œé‚£ä¹ˆä¸‹é¢æˆ‘ä»¬å°±æ¥ç»†è¯´ä¸€ä¸‹ViewåŒºåŸŸç›¸å…³çš„å„ç§åæ ‡ç³»ã€‚å…ˆçœ‹ä¸‹é¢è¿™å¹…å›¾ï¼š é€šè¿‡ä¸Šå›¾æˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚çš„ç»™å‡ºViewä¸€äº›åæ ‡ç›¸å…³çš„æ–¹æ³•è§£é‡Šï¼Œä¸è¿‡å¿…é¡»è¦æ˜Žç¡®çš„æ˜¯ä¸Šé¢è¿™äº›æ–¹æ³•å¿…é¡»è¦åœ¨layoutä¹‹åŽæ‰æœ‰æ•ˆï¼Œå¦‚ä¸‹ï¼š Viewçš„é™æ€åæ ‡æ–¹æ³• è§£é‡Š getLeft() è¿”å›žViewè‡ªèº«å·¦è¾¹åˆ°çˆ¶å¸ƒå±€å·¦è¾¹çš„è·ç¦» getTop() è¿”å›žViewè‡ªèº«é¡¶è¾¹åˆ°çˆ¶å¸ƒå±€é¡¶è¾¹çš„è·ç¦» getRight() è¿”å›žViewè‡ªèº«å³è¾¹åˆ°çˆ¶å¸ƒå±€å·¦è¾¹çš„è·ç¦» getBottom() è¿”å›žViewè‡ªèº«åº•è¾¹åˆ°çˆ¶å¸ƒå±€é¡¶è¾¹çš„è·ç¦» getX() è¿”å›žå€¼ä¸ºgetLeft()+getTranslationX()ï¼Œå½“setTranslationX()æ—¶getLeft()ä¸å˜ï¼ŒgetX()å˜ã€‚ getY() è¿”å›žå€¼ä¸ºgetTop()+getTranslationY()ï¼Œå½“setTranslationY()æ—¶getTop()ä¸å˜ï¼ŒgetY()å˜ã€‚ åŒæ—¶ä¹Ÿå¯ä»¥çœ‹è§ä¸Šå›¾ä¸­ç»™å‡ºäº†æ‰‹æŒ‡è§¦æ‘¸å±å¹•æ—¶MotionEventæä¾›çš„ä¸€äº›æ–¹æ³•è§£é‡Šï¼Œå¦‚ä¸‹ï¼š MotionEventåæ ‡æ–¹æ³• è§£é‡Š getX() å½“å‰è§¦æ‘¸äº‹ä»¶è·ç¦»å½“å‰Viewå·¦è¾¹çš„è·ç¦» getY() å½“å‰è§¦æ‘¸äº‹ä»¶è·ç¦»å½“å‰Viewé¡¶è¾¹çš„è·ç¦» getRawX() å½“å‰è§¦æ‘¸äº‹ä»¶è·ç¦»æ•´ä¸ªå±å¹•å·¦è¾¹çš„è·ç¦» getRawY() å½“å‰è§¦æ‘¸äº‹ä»¶è·ç¦»æ•´ä¸ªå±å¹•é¡¶è¾¹çš„è·ç¦» ä¸Šé¢å°±è§£é‡Šäº†ä½ åœ¨å¾ˆå¤šä»£ç ä¸­çœ‹è§å„ç§getXXXæ–¹æ³•è¿›è¡Œæ•°å­¦é€»è¾‘è¿ç®—åˆ¤æ–­çš„å«ä¹‰ã€‚ä¸è¿‡ä¸Šé¢åªæ˜¯è¯´äº†ä¸€äº›ç›¸å¯¹é™æ­¢çš„Androidåæ ‡ç‚¹å…³ç³»ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å‡ ä¸ªå’Œä¸Šé¢æ–¹æ³•ç´§å¯†ç›¸å…³çš„Viewæ–¹æ³•ã€‚å¦‚ä¸‹ï¼š Viewå®½é«˜æ–¹æ³• è§£é‡Š getWidth() layoutåŽæœ‰æ•ˆï¼Œè¿”å›žå€¼æ˜¯mRight-mLeftï¼Œä¸€èˆ¬ä¼šå‚è€ƒmeasureçš„å®½åº¦ï¼ˆmeasureå¯èƒ½æ²¡ç”¨ï¼‰ï¼Œä½†ä¸æ˜¯å¿…é¡»çš„ã€‚ getHeight() layoutåŽæœ‰æ•ˆï¼Œè¿”å›žå€¼æ˜¯mBottom-mTopï¼Œä¸€èˆ¬ä¼šå‚è€ƒmeasureçš„é«˜åº¦ï¼ˆmeasureå¯èƒ½æ²¡ç”¨ï¼‰ï¼Œä½†ä¸æ˜¯å¿…é¡»çš„ã€‚ getMeasuredWidth() è¿”å›žmeasureè¿‡ç¨‹å¾—åˆ°çš„mMeasuredWidthå€¼ï¼Œä¾›layoutå‚è€ƒï¼Œæˆ–è®¸æ²¡ç”¨ã€‚ getMeasuredHeight() è¿”å›žmeasureè¿‡ç¨‹å¾—åˆ°çš„mMeasuredHeightå€¼ï¼Œä¾›layoutå‚è€ƒï¼Œæˆ–è®¸æ²¡ç”¨ã€‚ ä¸Šé¢è§£é‡Šäº†è‡ªå®šä¹‰Viewæ—¶å„ç§èŽ·å–å®½é«˜çš„ä¸€äº›å«ä¹‰ï¼Œä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹çœ‹å…³äºŽViewèŽ·å–å±å¹•ä¸­ä½ç½®çš„ä¸€äº›æ–¹æ³•ï¼Œä¸è¿‡è¿™äº›æ–¹æ³•éœ€è¦åœ¨Activityçš„onWindowFocusChanged ()æ–¹æ³•ä¹‹åŽæ‰èƒ½ä½¿ç”¨ã€‚å¦‚ä¸‹å›¾ï¼š ä¸‹é¢æˆ‘ä»¬å°±ç»™å‡ºä¸Šé¢è¿™å¹…å›¾æ¶‰åŠçš„Viewçš„ä¸€äº›åæ ‡æ–¹æ³•çš„ç»“æžœï¼ˆç»“æžœé‡‡ç”¨ä½¿ç”¨æ–¹æ³•è¿”å›žçš„å®žé™…åæ ‡ï¼Œä¸ä¾èµ–ä¸Šé¢å®žé™…ç»å¯¹åæ ‡è½¬æ¢ï¼Œä¸Šé¢ç»å¯¹åæ ‡åªæ˜¯ä¸ºäº†è¯´æ˜Žä¾‹å­ä¸­çš„ä½ç½®è€Œå·²ï¼‰ï¼Œå¦‚ä¸‹ï¼š Viewçš„æ–¹æ³• ä¸Šå›¾View1ç»“æžœ ä¸Šå›¾View2ç»“æžœ ç»“è®ºæè¿° getLocalVisibleRect() (0, 0 - 410, 100) (0, 0 - 410, 470) èŽ·å–Viewè‡ªèº«å¯è§çš„åæ ‡åŒºåŸŸï¼Œåæ ‡ä»¥è‡ªå·±çš„å·¦ä¸Šè§’ä¸ºåŽŸç‚¹(0,0)ï¼Œå¦ä¸€ç‚¹ä¸ºå¯è§åŒºåŸŸå³ä¸‹è§’ç›¸å¯¹è‡ªå·±(0,0)ç‚¹çš„åæ ‡ï¼Œå…¶å®žView2å½“å‰heightä¸º550ï¼Œå¯è§heightä¸º470ã€‚ getGlobalVisibleRect() (30, 100 - 440, 200) (30, 250 - 440, 720) èŽ·å–Viewåœ¨å±å¹•ç»å¯¹åæ ‡ç³»ä¸­çš„å¯è§†åŒºåŸŸï¼Œåæ ‡ä»¥å±å¹•å·¦ä¸Šè§’ä¸ºåŽŸç‚¹(0,0)ï¼Œå¦ä¸€ä¸ªç‚¹ä¸ºå¯è§åŒºåŸŸå³ä¸‹è§’ç›¸å¯¹å±å¹•åŽŸç‚¹(0,0)ç‚¹çš„åæ ‡ã€‚ getLocationOnScreen() (30, 100) (30, 250) åæ ‡æ˜¯ç›¸å¯¹æ•´ä¸ªå±å¹•è€Œè¨€ï¼ŒYåæ ‡ä¸ºViewå·¦ä¸Šè§’åˆ°å±å¹•é¡¶éƒ¨çš„è·ç¦»ã€‚ getLocationInWindow() (30, 100) (30, 250) å¦‚æžœä¸ºæ™®é€šActivityåˆ™Yåæ ‡ä¸ºViewå·¦ä¸Šè§’åˆ°å±å¹•é¡¶éƒ¨ï¼ˆæ­¤æ—¶Windowä¸Žå±å¹•ä¸€æ ·å¤§ï¼‰ï¼›å¦‚æžœä¸ºå¯¹è¯æ¡†å¼çš„Activityåˆ™Yåæ ‡ä¸ºå½“å‰Dialogæ¨¡å¼Activityçš„æ ‡é¢˜æ é¡¶éƒ¨åˆ°Viewå·¦ä¸Šè§’çš„è·ç¦»ã€‚ åˆ°æ­¤å¸¸ç”¨çš„ç›¸å…³Viewçš„é™æ€åæ ‡èŽ·å–å¤„ç†çš„æ–¹æ³•å’Œå«ä¹‰éƒ½å·²ç»å™è¿°å®Œäº†ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹åŠ¨æ€çš„ä¸€äº›è§£é‡Šï¼ˆæ‰€è°“åŠ¨é™åªæ˜¯æˆ‘ä¸ªäººç§°å‘¼è€Œå·²ï¼‰ã€‚ Android ViewåŠ¨ç”»ç›¸å…³åæ ‡ç³»å…¶å®žåœ¨æˆ‘ä»¬ä½¿ç”¨åŠ¨ç”»æ—¶ï¼Œå°¤å…¶æ˜¯è¡¥é—´åŠ¨ç”»æ—¶ï¼Œä½ ä¼šå‘çŽ°å…¶ä¸­æ¶‰åŠå¾ˆå¤šåæ ‡å‚æ•°ï¼Œä¸€ä¼šå„¿ä¸ºç›¸å¯¹çš„ï¼Œä¸€ä¼šå„¿ä¸ºç»å¯¹çš„ï¼Œä½ å¯èƒ½ä¼šå„ç§è’™åœˆã€‚é‚£ä¹ˆä¸å¦¨çœ‹ä¸‹ã€ŠAndroidåº”ç”¨å¼€å‘ä¹‹æ‰€æœ‰åŠ¨ç”»ä½¿ç”¨è¯¦è§£ ã€‹è¿™ç¯‡åšå®¢ï¼Œè¿™é‡Œé¢è¯¦ç»†ä»‹ç»äº†å…³äºŽAndroidåŠ¨ç”»ç›¸å…³çš„åæ ‡ç³»ç»Ÿï¼Œè¿™é‡Œä¸å†ç´¯èµ˜å™è¿°ã€‚ Android Viewæ»‘åŠ¨ç›¸å…³åæ ‡ç³»å…³äºŽViewæä¾›çš„ä¸Žåæ ‡æ¯æ¯ç›¸å…³çš„å¦ä¸€ç»„å¸¸ç”¨çš„é‡è¦æ–¹æ³•å°±æ˜¯æ»šåŠ¨æˆ–è€…æ»‘åŠ¨ç›¸å…³çš„ï¼Œä¸‹é¢æˆ‘ä»¬ç»™å‡ºç›¸å…³çš„è§£é‡Šï¼ˆç‰¹åˆ«æ³¨æ„ï¼šViewçš„scrollTo()å’ŒscrollBy()æ˜¯ç”¨äºŽæ»‘åŠ¨Viewä¸­çš„å†…å®¹ï¼Œè€Œä¸æ˜¯æ”¹å˜Viewçš„ä½ç½®ï¼›æ”¹å˜Viewåœ¨å±å¹•ä¸­çš„ä½ç½®å¯ä»¥ä½¿ç”¨offsetLeftAndRight()å’ŒoffsetTopAndBottom()æ–¹æ³•ï¼Œä»–ä¼šå¯¼è‡´getLeft()ç­‰å€¼æ”¹å˜ã€‚ï¼‰ï¼Œå¦‚ä¸‹ï¼š Viewçš„æ»‘åŠ¨æ–¹æ³• æ•ˆæžœåŠæè¿° offsetLeftAndRight(int offset) æ°´å¹³æ–¹å‘æŒªåŠ¨Viewï¼Œoffsetä¸ºæ­£åˆ™xè½´æ­£å‘ç§»åŠ¨ï¼Œç§»åŠ¨çš„æ˜¯æ•´ä¸ªViewï¼ŒgetLeft()ä¼šå˜çš„ï¼Œè‡ªå®šä¹‰Viewå¾ˆæœ‰ç”¨ã€‚ offsetTopAndBottom(int offset) åž‚ç›´æ–¹å‘æŒªåŠ¨Viewï¼Œoffsetä¸ºæ­£åˆ™yè½´æ­£å‘ç§»åŠ¨ï¼Œç§»åŠ¨çš„æ˜¯æ•´ä¸ªViewï¼ŒgetTop()ä¼šå˜çš„ï¼Œè‡ªå®šä¹‰Viewå¾ˆæœ‰ç”¨ã€‚ scrollTo(int x, int y) å°†Viewä¸­å†…å®¹ï¼ˆä¸æ˜¯æ•´ä¸ªViewï¼‰æ»‘åŠ¨åˆ°ç›¸åº”çš„ä½ç½®ï¼Œå‚è€ƒåæ ‡åŽŸç‚¹ä¸ºParentViewå·¦ä¸Šè§’ï¼Œxï¼Œyä¸ºæ­£åˆ™å‘xyè½´åæ–¹å‘ç§»åŠ¨ï¼Œåä¹‹åŒç†ã€‚ scrollBy(int x, int y) åœ¨scrollTo()çš„åŸºç¡€ä¸Šç»§ç»­æ»‘åŠ¨xyã€‚ setScrollX(int value) å®žè´¨ä¸ºscrollTo()ï¼Œåªæ˜¯åªæ”¹å˜Yè½´æ»‘åŠ¨ã€‚ setScrollY(int value) å®žè´¨ä¸ºscrollTo()ï¼Œåªæ˜¯åªæ”¹å˜Xè½´æ»‘åŠ¨ã€‚ getScrollX()/getScrollY() èŽ·å–å½“å‰æ»‘åŠ¨ä½ç½®åç§»é‡ã€‚ å…³äºŽAndroid Viewçš„scrollBy()å’ŒscrollTo()å‚æ•°ä¼ é€’æ­£æ•°å´å‘åæ ‡ç³»è´Ÿæ–¹å‘ç§»åŠ¨çš„ç‰¹æ€§å¯èƒ½å¾ˆå¤šäººéƒ½æœ‰ç–‘æƒ‘ï¼Œç”šè‡³æ˜¯æ­»è®°ç»“è®ºï¼Œè¿™é‡Œæˆ‘ä»¬ç®€å•ç»™å‡ºäº§ç”Ÿè¿™ç§ç‰¹æ€§çš„çœŸå®žåŽŸå› â€”-æºç åˆ†æžï¼Œå¦‚ä¸‹ï¼š 12345678910111213public void scrollTo(int x, int y) &#123; if (mScrollX != x || mScrollY != y) &#123; int oldX = mScrollX; int oldY = mScrollY; mScrollX = x; mScrollY = y; invalidateParentCaches(); onScrollChanged(mScrollX, mScrollY, oldX, oldY); if (!awakenScrollBars()) &#123; postInvalidateOnAnimation(); &#125; &#125;&#125; Viewçš„è¯¥æ–¹æ³•æ³¨é‡Šé‡Œæ˜Žç¡®è¯´æ˜Žäº†è°ƒè¿ä»–ä¼šè§¦å‘onScrollChanged()å’Œinvalidated()æ–¹æ³•ï¼Œé‚£æˆ‘ä»¬å°±å°†çŸ›å¤´è½¬å‘invalidated()æ–¹æ³•è§¦å‘çš„draw()è¿‡ç¨‹ï¼Œdraw()è¿‡ç¨‹ä¸­æœ€ç»ˆå…¶å®žä¼šè§¦å‘ä¸‹é¢çš„invalidate()æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š 123456public void invalidate(int l, int t, int r, int b) &#123; final int scrollX = mScrollX; final int scrollY = mScrollY; //scrolleræ—¶ä¸ºä½•å‚æ•°å’Œåæ ‡åå‘çš„çœŸå®žåŽŸå›  invalidateInternal(l - scrollX, t - scrollY, r - scrollX, b - scrollY, true, false);&#125; æ ¸å¿ƒå°±åœ¨è¿™é‡Œï¼Œç›¸ä¿¡ä¸ç”¨æˆ‘è§£é‡Šå¤§å®¶ä¹ŸçŸ¥é“å’‹å›žäº‹äº†ï¼Œè‡ªè¡Œè„‘è¡¥ã€‚ scrollTo()å’ŒscrollBy()æ–¹æ³•ç‰¹åˆ«æ³¨æ„ï¼šå¦‚æžœä½ ç»™ä¸€ä¸ªViewGroupè°ƒç”¨scrollTo()æ–¹æ³•æ»šåŠ¨çš„æ˜¯ViewGroupé‡Œé¢çš„å†…å®¹ï¼Œå¦‚æžœæƒ³æ»šåŠ¨ä¸€ä¸ªViewGroupåˆ™å†ç»™ä»–åµŒå¥—ä¸€ä¸ªå¤–å±‚ï¼Œæ»šåŠ¨å¤–å±‚å³å¯ã€‚ æ€»ç»“å¯ä»¥å‘çŽ°ï¼Œä¸Šé¢åªæ˜¯è¯´æ˜Žäº†ä¸€äº›Viewé‡Œå¸¸ç”¨çš„ä¸Žåæ ‡ç›¸å…³çš„æ¦‚å¿µï¼Œå…³äºŽè‡ªå®šä¹‰æŽ§ä»¶äº†è§£å­¦ä¹ è¿™äº›åæ ‡æ¦‚å¿µåªæ˜¯ä¸€ä¸ªåŸºç¡€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåŽç»­å†…å®¹çš„é“ºåž«ï¼Œæ‰€ä»¥æœ‰å¿…è¦å…ˆå®Œå…¨åƒé€æ­¤éƒ¨åˆ†å†…å®¹æ‰èƒ½ç»§ç»­æ‹“å±•å­¦ä¹ æ–°çš„ä¸œä¸œã€‚ Viewä¸­è¿˜æœ‰ä¸€äº›å…¶ä»–ä¸Žåæ ‡èŽ·å–ç›¸å…³çš„æ–¹æ³•ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½æ¯”è¾ƒä¸å¸¸ç”¨ï¼Œæ‰€ä»¥ç”¨åˆ°æ—¶å¯ä»¥çŽ°æŸ¥APIæˆ–è€…Debugçœ‹çŽ°è±¡è¿›è¡Œå­¦ä¹ å³å¯ï¼Œè¿™é‡Œç¯‡å¹…å’Œæ—¶é—´æœ‰é™å°±ä¸ä¸€ä¸€é“æ¥äº†ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android æŽ§ä»¶ RecyclerView]]></title>
    <url>%2Fposts%2F4fcbe74a.html</url>
    <content type="text"><![CDATA[è½¬è‡ªï¼šhttps://www.jianshu.com/p/4f9591291365 æ¦‚è¿°RecyclerViewæ˜¯ä»€ä¹ˆä»ŽAndroid 5.0å¼€å§‹ï¼Œè°·æ­Œå…¬å¸æŽ¨å‡ºäº†ä¸€ä¸ªç”¨äºŽå¤§é‡æ•°æ®å±•ç¤ºçš„æ–°æŽ§ä»¶RecylerViewï¼Œå¯ä»¥ç”¨æ¥ä»£æ›¿ä¼ ç»Ÿçš„ListViewï¼Œæ›´åŠ å¼ºå¤§å’Œçµæ´»ã€‚RecyclerViewçš„å®˜æ–¹å®šä¹‰å¦‚ä¸‹ï¼š A flexible view for providing a limited window into a large data set. ä»Žå®šä¹‰å¯ä»¥çœ‹å‡ºï¼Œflexibleï¼ˆå¯æ‰©å±•æ€§ï¼‰æ˜¯RecyclerViewçš„ç‰¹ç‚¹ã€‚ RecyclerViewæ˜¯support-v7åŒ…ä¸­çš„æ–°ç»„ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ»‘åŠ¨ç»„ä»¶ï¼Œä¸Žç»å…¸çš„ListViewç›¸æ¯”ï¼ŒåŒæ ·æ‹¥æœ‰itemå›žæ”¶å¤ç”¨çš„åŠŸèƒ½ï¼Œè¿™ä¸€ç‚¹ä»Žå®ƒçš„åå­—Recyclerviewå³å›žæ”¶viewä¹Ÿå¯ä»¥çœ‹å‡ºã€‚ RecyclerViewçš„ä¼˜ç‚¹RecyclerViewå¹¶ä¸ä¼šå®Œå…¨æ›¿ä»£ListViewï¼ˆè¿™ç‚¹ä»ŽListViewæ²¡æœ‰è¢«æ ‡è®°ä¸º@Deprecatedå¯ä»¥çœ‹å‡ºï¼‰ï¼Œä¸¤è€…çš„ä½¿ç”¨åœºæ™¯ä¸ä¸€æ ·ã€‚ä½†æ˜¯RecyclerViewçš„å‡ºçŽ°ä¼šè®©å¾ˆå¤šå¼€æºé¡¹ç›®è¢«åºŸå¼ƒï¼Œä¾‹å¦‚æ¨ªå‘æ»šåŠ¨çš„ListView, æ¨ªå‘æ»šåŠ¨çš„GridView, ç€‘å¸ƒæµæŽ§ä»¶ï¼Œå› ä¸ºRecyclerViewèƒ½å¤Ÿå®žçŽ°æ‰€æœ‰è¿™äº›åŠŸèƒ½ã€‚ æ¯”å¦‚ï¼šæœ‰ä¸€ä¸ªéœ€æ±‚æ˜¯å±å¹•ç«–ç€çš„æ—¶å€™çš„æ˜¾ç¤ºå½¢å¼æ˜¯ListViewï¼Œå±å¹•æ¨ªç€çš„æ—¶å€™çš„æ˜¾ç¤ºå½¢å¼æ˜¯2åˆ—çš„GridViewï¼Œæ­¤æ—¶å¦‚æžœç”¨RecyclerViewï¼Œåˆ™é€šè¿‡è®¾ç½®LayoutManagerä¸€è¡Œä»£ç å®žçŽ°æ›¿æ¢ã€‚ RecylerViewç›¸å¯¹äºŽListViewçš„ä¼˜ç‚¹ç½—åˆ—å¦‚ä¸‹ï¼š RecyclerViewå°è£…äº†viewholderçš„å›žæ”¶å¤ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´RecyclerViewæ ‡å‡†åŒ–äº†ViewHolderï¼Œç¼–å†™Adapteré¢å‘çš„æ˜¯ViewHolderè€Œä¸å†æ˜¯Viewäº†ï¼Œå¤ç”¨çš„é€»è¾‘è¢«å°è£…äº†ï¼Œå†™èµ·æ¥æ›´åŠ ç®€å•ã€‚ ç›´æŽ¥çœåŽ»äº†listviewä¸­convertView.setTag(holder)å’ŒconvertView.getTag()è¿™äº›ç¹ççš„æ­¥éª¤ã€‚ æä¾›äº†ä¸€ç§æ’æ‹”å¼çš„ä½“éªŒï¼Œé«˜åº¦çš„è§£è€¦ï¼Œå¼‚å¸¸çš„çµæ´»ï¼Œé’ˆå¯¹ä¸€ä¸ªItemçš„æ˜¾ç¤ºRecyclerViewä¸“é—¨æŠ½å–å‡ºäº†ç›¸åº”çš„ç±»ï¼Œæ¥æŽ§åˆ¶Itemçš„æ˜¾ç¤ºï¼Œä½¿å…¶çš„æ‰©å±•æ€§éžå¸¸å¼ºã€‚ è®¾ç½®å¸ƒå±€ç®¡ç†å™¨ä»¥æŽ§åˆ¶Itemçš„å¸ƒå±€æ–¹å¼ï¼Œæ¨ªå‘ã€ç«–å‘ä»¥åŠç€‘å¸ƒæµæ–¹å¼ ä¾‹å¦‚ï¼šä½ æƒ³æŽ§åˆ¶æ¨ªå‘æˆ–è€…çºµå‘æ»‘åŠ¨åˆ—è¡¨æ•ˆæžœå¯ä»¥é€šè¿‡LinearLayoutManagerè¿™ä¸ªç±»æ¥è¿›è¡ŒæŽ§åˆ¶(ä¸ŽGridViewæ•ˆæžœå¯¹åº”çš„æ˜¯GridLayoutManager,ä¸Žç€‘å¸ƒæµå¯¹åº”çš„è¿˜StaggeredGridLayoutManagerç­‰)ã€‚ä¹Ÿå°±æ˜¯è¯´RecyclerViewä¸å†æ‹˜æ³¥äºŽListViewçš„çº¿æ€§å±•ç¤ºæ–¹å¼ï¼Œå®ƒä¹Ÿå¯ä»¥å®žçŽ°GridViewçš„æ•ˆæžœç­‰å¤šç§æ•ˆæžœã€‚ å¯è®¾ç½®Itemçš„é—´éš”æ ·å¼ï¼ˆå¯ç»˜åˆ¶ï¼‰ é€šè¿‡ç»§æ‰¿RecyclerViewçš„ItemDecorationè¿™ä¸ªç±»ï¼Œç„¶åŽé’ˆå¯¹è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚åŽ»ä¹¦å†™ä»£ç ã€‚ å¯ä»¥æŽ§åˆ¶Itemå¢žåˆ çš„åŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡ItemAnimatorè¿™ä¸ªç±»è¿›è¡ŒæŽ§åˆ¶ï¼Œå½“ç„¶é’ˆå¯¹å¢žåˆ çš„åŠ¨ç”»ï¼ŒRecyclerViewæœ‰å…¶è‡ªå·±é»˜è®¤çš„å®žçŽ°ã€‚ ä½†æ˜¯å…³äºŽItemçš„ç‚¹å‡»å’Œé•¿æŒ‰äº‹ä»¶ï¼Œéœ€è¦ç”¨æˆ·è‡ªå·±åŽ»å®žçŽ°ã€‚ åŸºæœ¬ä½¿ç”¨123456789101112recyclerView = (RecyclerView) findViewById(R.id.recyclerView); LinearLayoutManager layoutManager = new LinearLayoutManager(this ); //è®¾ç½®å¸ƒå±€ç®¡ç†å™¨ recyclerView.setLayoutManager(layoutManager); //è®¾ç½®ä¸ºåž‚ç›´å¸ƒå±€ï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤çš„ layoutManager.setOrientation(OrientationHelper. VERTICAL); //è®¾ç½®Adapter recyclerView.setAdapter(recycleAdapter); //è®¾ç½®åˆ†éš”çº¿ recyclerView.addItemDecoration( new DividerGridItemDecoration(this )); //è®¾ç½®å¢žåŠ æˆ–åˆ é™¤æ¡ç›®çš„åŠ¨ç”» recyclerView.setItemAnimator( new DefaultItemAnimator()); åœ¨ä½¿ç”¨RecyclerViewæ—¶å€™ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸ªé€‚é…å™¨Adapterå’Œä¸€ä¸ªå¸ƒå±€ç®¡ç†å™¨LayoutManagerã€‚é€‚é…å™¨ç»§æ‰¿RecyclerView.Adapterç±»ï¼Œå…·ä½“å®žçŽ°ç±»ä¼¼ListViewçš„é€‚é…å™¨ï¼Œå–å†³äºŽæ•°æ®ä¿¡æ¯ä»¥åŠå±•ç¤ºçš„UIã€‚å¸ƒå±€ç®¡ç†å™¨ç”¨äºŽç¡®å®šRecyclerViewä¸­Itemçš„å±•ç¤ºæ–¹å¼ä»¥åŠå†³å®šä½•æ—¶å¤ç”¨å·²ç»ä¸å¯è§çš„Itemï¼Œé¿å…é‡å¤åˆ›å»ºä»¥åŠæ‰§è¡Œé«˜æˆæœ¬çš„findViewById()æ–¹æ³•ã€‚ å¯ä»¥çœ‹è§RecyclerViewç›¸æ¯”ListViewä¼šå¤šå‡ºè®¸å¤šæ“ä½œï¼Œè¿™ä¹Ÿæ˜¯RecyclerViewçµæ´»çš„åœ°æ–¹ï¼Œå®ƒå°†è®¸å¤šåŠ¨èƒ½æš´éœ²å‡ºæ¥ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ€§çš„è‡ªå®šä¹‰å±žæ€§ä»¥æ»¡è¶³éœ€æ±‚ã€‚ åŸºæœ¬ä½¿ç”¨å¼•ç”¨åœ¨build.gradleæ–‡ä»¶ä¸­å¼•å…¥è¯¥ç±»ã€‚ 1compile &apos;com.android.support:recyclerview-v7:23.4.0&apos; å¸ƒå±€Activityå¸ƒå±€æ–‡ä»¶activity_rv.xml â€¦ Itemçš„å¸ƒå±€æ–‡ä»¶item_1.xml â€¦ åˆ›å»ºé€‚é…å™¨æ ‡å‡†å®žçŽ°æ­¥éª¤å¦‚ä¸‹ï¼š â‘  åˆ›å»ºAdapterï¼šåˆ›å»ºä¸€ä¸ªç»§æ‰¿RecyclerView.Adapterçš„Adapterç±»ï¼ˆVHæ˜¯ViewHolderçš„ç±»åï¼‰ â‘¡ åˆ›å»ºViewHolderï¼šåœ¨Adapterä¸­åˆ›å»ºä¸€ä¸ªç»§æ‰¿RecyclerView.ViewHolderçš„é™æ€å†…éƒ¨ç±»ï¼Œè®°ä¸ºVHã€‚ViewHolderçš„å®žçŽ°å’ŒListViewçš„ViewHolderå®žçŽ°å‡ ä¹Žä¸€æ ·ã€‚ â‘¢ åœ¨Adapterä¸­å®žçŽ°3ä¸ªæ–¹æ³•ï¼š onCreateViewHolder()è¿™ä¸ªæ–¹æ³•ä¸»è¦ç”Ÿæˆä¸ºæ¯ä¸ªItem inflaterå‡ºä¸€ä¸ªViewï¼Œä½†æ˜¯è¯¥æ–¹æ³•è¿”å›žçš„æ˜¯ä¸€ä¸ªViewHolderã€‚è¯¥æ–¹æ³•æŠŠViewç›´æŽ¥å°è£…åœ¨ViewHolderä¸­ï¼Œç„¶åŽæˆ‘ä»¬é¢å‘çš„æ˜¯ViewHolderè¿™ä¸ªå®žä¾‹ï¼Œå½“ç„¶è¿™ä¸ªViewHolderéœ€è¦æˆ‘ä»¬è‡ªå·±åŽ»ç¼–å†™ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯åœ¨onCreateViewHolder()ä¸­ï¼Œæ˜ å°„Layoutå¿…é¡»ä¸º 1View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_1, parent, false); è€Œä¸èƒ½æ˜¯ï¼š 1View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_1, null); onBindViewHolder()è¿™ä¸ªæ–¹æ³•ä¸»è¦ç”¨äºŽé€‚é…æ¸²æŸ“æ•°æ®åˆ°Viewä¸­ã€‚æ–¹æ³•æä¾›ç»™ä½ äº†ä¸€viewHolderè€Œä¸æ˜¯åŽŸæ¥çš„convertViewã€‚ getItemCount()è¿™ä¸ªæ–¹æ³•å°±ç±»ä¼¼äºŽBaseAdapterçš„getCountæ–¹æ³•äº†ï¼Œå³æ€»å…±æœ‰å¤šå°‘ä¸ªæ¡ç›®ã€‚ å¯ä»¥çœ‹å‡ºï¼ŒRecyclerViewå°†ListViewä¸­getView()çš„åŠŸèƒ½æ‹†åˆ†æˆäº†onCreateViewHolder()å’ŒonBindViewHolder()ã€‚ åŸºæœ¬çš„Adapterå®žçŽ°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940// â‘  åˆ›å»ºAdapterpublic class NormalAdapter extends RecyclerView.Adapter&lt;NormalAdapter.VH&gt;&#123; //â‘¡ åˆ›å»ºViewHolder public static class VH extends RecyclerView.ViewHolder&#123; public final TextView title; public VH(View v) &#123; super(v); title = (TextView) v.findViewById(R.id.title); &#125; &#125; private List&lt;String&gt; mDatas; public NormalAdapter(List&lt;String&gt; data) &#123; this.mDatas = data; &#125; //â‘¢ åœ¨Adapterä¸­å®žçŽ°3ä¸ªæ–¹æ³• @Override public void onBindViewHolder(VH holder, int position) &#123; holder.title.setText(mDatas.get(position)); holder.itemView.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; //item ç‚¹å‡»äº‹ä»¶ &#125; &#125;); &#125; @Override public int getItemCount() &#123; return mDatas.size(); &#125; @Override public VH onCreateViewHolder(ViewGroup parent, int viewType) &#123; //LayoutInflater.fromæŒ‡å®šå†™æ³• View v = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_1, parent, false); return new VH(v); &#125;&#125; è®¾ç½®RecyclerViewåˆ›å»ºå®ŒAdapterï¼ŒæŽ¥ç€å¯¹RecyclerViewè¿›è¡Œè®¾ç½®ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œéœ€è¦ä¸ºRecyclerViewè¿›è¡Œå››å¤§è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯åŽæ–‡è¯´çš„å››å¤§ç»„æˆï¼š Layout Manager(å¿…é€‰) Adapter(å¿…é€‰) Item Decoration(å¯é€‰ï¼Œé»˜è®¤ä¸ºç©º) Item Animator(å¯é€‰ï¼Œé»˜è®¤ä¸ºDefaultItemAnimator) å¦‚æžœè¦å®žçŽ°ListViewçš„æ•ˆæžœï¼Œåªéœ€è¦è®¾ç½®Adapterå’ŒLayout Managerï¼Œå¦‚ä¸‹ï¼š 1234List&lt;String&gt; data = initData();RecyclerView rv = (RecyclerView) findViewById(R.id.rv);rv.setLayoutManager(new LinearLayoutManager(this));rv.setAdapter(new NormalAdapter(data)); å››å¤§ç»„æˆRecyclerViewçš„å››å¤§ç»„æˆæ˜¯ï¼š Layout Managerï¼šItemçš„å¸ƒå±€ã€‚ Adapterï¼šä¸ºItemæä¾›æ•°æ®ã€‚ Item Decorationï¼šItemä¹‹é—´çš„Dividerã€‚ Item Animatorï¼šæ·»åŠ ã€åˆ é™¤ItemåŠ¨ç”»ã€‚ Layout Managerå¸ƒå±€ç®¡ç†å™¨åœ¨æœ€å¼€å§‹å°±æåˆ°ï¼ŒRecyclerView èƒ½å¤Ÿæ”¯æŒå„ç§å„æ ·çš„å¸ƒå±€æ•ˆæžœï¼Œè¿™æ˜¯ ListView æ‰€ä¸å…·æœ‰çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™ä¸ªåŠŸèƒ½å¦‚ä½•å®žçŽ°çš„å‘¢ï¼Ÿå…¶æ ¸å¿ƒå…³é”®åœ¨äºŽ RecyclerView.LayoutManager ç±»ä¸­ã€‚ä»Žå‰é¢çš„åŸºç¡€ä½¿ç”¨å¯ä»¥çœ‹åˆ°ï¼ŒRecyclerView åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¦æ¯” ListView å¤šä¸€ä¸ª setLayoutManager æ­¥éª¤ï¼Œè¿™ä¸ª LayoutManager å°±æ˜¯ç”¨äºŽæŽ§åˆ¶æˆ‘ä»¬ RecyclerView æœ€ç»ˆçš„å±•ç¤ºæ•ˆæžœçš„ã€‚ LayoutManagerè´Ÿè´£RecyclerViewçš„å¸ƒå±€ï¼Œå…¶ä¸­åŒ…å«äº†Item Viewçš„èŽ·å–ä¸Žå›žæ”¶ã€‚ RecyclerViewæä¾›äº†ä¸‰ç§å¸ƒå±€ç®¡ç†å™¨ï¼š LinerLayoutManager ä»¥åž‚ç›´æˆ–è€…æ°´å¹³åˆ—è¡¨æ–¹å¼å±•ç¤ºItem GridLayoutManager ä»¥ç½‘æ ¼æ–¹å¼å±•ç¤ºItem StaggeredGridLayoutManager ä»¥ç€‘å¸ƒæµæ–¹å¼å±•ç¤ºItem å¦‚æžœä½ æƒ³ç”¨ RecyclerView æ¥å®žçŽ°è‡ªå·±è‡ªå®šä¹‰æ•ˆæžœï¼Œåˆ™åº”è¯¥åŽ»ç»§æ‰¿å®žçŽ°è‡ªå·±çš„ LayoutManagerï¼Œå¹¶é‡å†™ç›¸åº”çš„æ–¹æ³•ï¼Œè€Œä¸åº”è¯¥æƒ³ç€åŽ»æ”¹å†™ RecyclerViewã€‚ LayoutManager å¸¸è§ APIå…³äºŽ LayoutManager çš„ä½¿ç”¨æœ‰ä¸‹é¢ä¸€äº›å¸¸è§çš„ APIï¼ˆæœ‰äº›åœ¨ LayoutManager å®žçŽ°çš„å­ç±»ä¸­ï¼‰ 123456789101112canScrollHorizontally();//èƒ½å¦æ¨ªå‘æ»šåŠ¨canScrollVertically();//èƒ½å¦çºµå‘æ»šåŠ¨scrollToPosition(int position);//æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®setOrientation(int orientation);//è®¾ç½®æ»šåŠ¨çš„æ–¹å‘getOrientation();//èŽ·å–æ»šåŠ¨æ–¹å‘findViewByPosition(int position);//èŽ·å–æŒ‡å®šä½ç½®çš„Item ViewfindFirstCompletelyVisibleItemPosition();//èŽ·å–ç¬¬ä¸€ä¸ªå®Œå…¨å¯è§çš„Itemä½ç½®findFirstVisibleItemPosition();//èŽ·å–ç¬¬ä¸€ä¸ªå¯è§Itemçš„ä½ç½®findLastCompletelyVisibleItemPosition();//èŽ·å–æœ€åŽä¸€ä¸ªå®Œå…¨å¯è§çš„Itemä½ç½®findLastVisibleItemPosition();//èŽ·å–æœ€åŽä¸€ä¸ªå¯è§Itemçš„ä½ç½® ä¸Šé¢ä»…ä»…æ˜¯åˆ—å‡ºä¸€äº›å¸¸ç”¨çš„ API è€Œå·²ï¼Œæ›´å¤šçš„ API å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œé€šå¸¸ä½ æƒ³ç”¨ RecyclerView å®žçŽ°æŸç§æ•ˆæžœï¼Œä¾‹å¦‚æŒ‡å®šæ»šåŠ¨åˆ°æŸä¸ª Item ä½ç½®ï¼Œä½†æ˜¯ä½ åœ¨ RecyclerView ä¸­åˆæ‰¾ä¸åˆ°å¯ä»¥è°ƒç”¨çš„ API æ—¶ï¼Œå°±å¯ä»¥è·‘åˆ° LayoutManager çš„æ–‡æ¡£åŽ»çœ‹çœ‹ï¼ŒåŸºæœ¬éƒ½åœ¨é‚£é‡Œã€‚ å¦å¤–è¿˜æœ‰ä¸€ç‚¹å…³äºŽç€‘å¸ƒæµå¸ƒå±€æ•ˆæžœ StaggeredGridLayoutManager æƒ³è¯´çš„ï¼Œçœ‹åˆ°ç½‘ä¸Šæœ‰äº›æ–‡ç« å†™çš„ç¤ºä¾‹ä»£ç ï¼Œåœ¨è®¾ç½®äº† StaggeredGridLayoutManager åŽä»è¦åŽ» Adapter ä¸­åŠ¨æ€è®¾ç½® View çš„é«˜åº¦ï¼Œæ‰èƒ½å®žçŽ°ç€‘å¸ƒæµï¼Œè¿™ç§åšæ³•æ˜¯å®Œå…¨é”™è¯¯çš„ï¼Œä¹‹æ‰€ä»¥ StaggeredGridLayoutManager çš„ç€‘å¸ƒæµæ•ˆæžœå‡ºä¸æ¥ï¼ŒåŸºæœ¬æ˜¯ item å¸ƒå±€çš„ xml é—®é¢˜ä»¥åŠæ•°æ®é—®é¢˜å¯¼è‡´ã€‚å¦‚æžœè¦åœ¨ Adapter ä¸­è®¾ç½® View çš„é«˜åº¦ï¼Œåˆ™å®Œå…¨è¿èƒŒäº† LayoutManager çš„è®¾è®¡ç†å¿µäº†ã€‚ LinearLayoutManageræºç åˆ†æž è¿™é‡Œæˆ‘ä»¬ç®€å•åˆ†æžLinearLayoutManagerçš„å®žçŽ°ã€‚ å¯¹äºŽLinearLayoutManageræ¥è¯´ï¼Œæ¯”è¾ƒé‡è¦çš„å‡ ä¸ªæ–¹æ³•æœ‰ï¼š onLayoutChildren(): å¯¹RecyclerViewè¿›è¡Œå¸ƒå±€çš„å…¥å£æ–¹æ³•ã€‚ fill(): è´Ÿè´£å¡«å……RecyclerViewã€‚ scrollVerticallyBy():æ ¹æ®æ‰‹æŒ‡çš„ç§»åŠ¨æ»‘åŠ¨ä¸€å®šè·ç¦»ï¼Œå¹¶è°ƒç”¨fill()å¡«å……ã€‚ canScrollVertically()æˆ–canScrollHorizontally(): åˆ¤æ–­æ˜¯å¦æ”¯æŒçºµå‘æ»‘åŠ¨æˆ–æ¨ªå‘æ»‘åŠ¨ã€‚ onLayoutChildren()çš„æ ¸å¿ƒå®žçŽ°å¦‚ä¸‹ï¼š 1234public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) &#123; detachAndScrapAttachedViews(recycler); //å°†åŽŸæ¥æ‰€æœ‰çš„Item Viewå…¨éƒ¨æ”¾åˆ°Recyclerçš„Scrap Heapæˆ–Recycle Pool fill(recycler, mLayoutState, state, false); //å¡«å……çŽ°åœ¨æ‰€æœ‰çš„Item View&#125; RecyclerViewçš„å›žæ”¶æœºåˆ¶æœ‰ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå³å°†å›žæ”¶ç«™åˆ†ä¸ºScrap Heapå’ŒRecycle Poolï¼Œå…¶ä¸­Scrap Heapçš„å…ƒç´ å¯ä»¥è¢«ç›´æŽ¥å¤ç”¨ï¼Œè€Œä¸éœ€è¦è°ƒç”¨onBindViewHolder()ã€‚detachAndScrapAttachedViews()ä¼šæ ¹æ®æƒ…å†µï¼Œå°†åŽŸæ¥çš„Item Viewæ”¾å…¥Scrap Heapæˆ–Recycle Poolï¼Œä»Žè€Œåœ¨å¤ç”¨æ—¶æå‡æ•ˆçŽ‡ã€‚ fill()æ˜¯å¯¹å‰©ä½™ç©ºé—´ä¸æ–­åœ°è°ƒç”¨layoutChunk()ï¼Œç›´åˆ°å¡«å……å®Œä¸ºæ­¢ã€‚layoutChunk()çš„æ ¸å¿ƒå®žçŽ°å¦‚ä¸‹ï¼š 123456public void layoutChunk() &#123; View view = layoutState.next(recycler); //è°ƒç”¨äº†getViewForPosition() addView(view); //åŠ å…¥View measureChildWithMargins(view, 0, 0); //è®¡ç®—Viewçš„å¤§å° layoutDecoratedWithMargins(view, left, top, right, bottom); //å¸ƒå±€View&#125; å…¶ä¸­next()è°ƒç”¨äº†getViewForPosition(currentPosition)ï¼Œè¯¥æ–¹æ³•æ˜¯ä»ŽRecyclerViewçš„å›žæ”¶æœºåˆ¶å®žçŽ°ç±»Recyclerä¸­èŽ·å–åˆé€‚çš„Viewï¼Œåœ¨åŽæ–‡çš„å›žæ”¶æœºåˆ¶ä¸­ä¼šä»‹ç»è¯¥æ–¹æ³•çš„å…·ä½“å®žçŽ°ã€‚ å¦‚æžœè¦è‡ªå®šä¹‰LayoutManagerï¼Œå¯ä»¥å‚è€ƒï¼š åˆ›å»ºä¸€ä¸ª RecyclerView LayoutManager â€“ Part 1 åˆ›å»ºä¸€ä¸ª RecyclerView LayoutManager â€“ Part 2 åˆ›å»ºä¸€ä¸ª RecyclerView LayoutManager â€“ Part 3 Adapteré€‚é…å™¨Adapterçš„ä½¿ç”¨æ–¹å¼å‰é¢å·²ç»ä»‹ç»äº†ï¼ŒåŠŸèƒ½å°±æ˜¯ä¸ºRecyclerViewæä¾›æ•°æ®ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»ä¸‡èƒ½é€‚é…å™¨çš„å®žçŽ°ã€‚å…¶å®žä¸‡èƒ½é€‚é…å™¨çš„æ¦‚å¿µåœ¨ListViewå°±å·²ç»å­˜åœ¨äº†ï¼Œå³base-adapter-helperã€‚ è¿™é‡Œæˆ‘ä»¬åªé’ˆå¯¹RecyclerViewï¼ŒèŠèŠä¸‡èƒ½é€‚é…å™¨å‡ºçŽ°çš„åŽŸå› ã€‚ä¸ºäº†åˆ›å»ºä¸€ä¸ªRecyclerViewçš„Adapterï¼Œæ¯æ¬¡æˆ‘ä»¬éƒ½éœ€è¦åŽ»åšé‡å¤åŠ³åŠ¨ï¼ŒåŒ…æ‹¬é‡å†™onCreateViewHolder(),getItemCount()ã€åˆ›å»ºViewHolderï¼Œå¹¶ä¸”å®žçŽ°è¿‡ç¨‹å¤§åŒå°å¼‚ï¼Œå› æ­¤ä¸‡èƒ½é€‚é…å™¨å‡ºçŽ°äº†ã€‚ ä¸‡èƒ½é€‚é…å™¨è¿™é‡Œè®²è§£ä¸‹ä¸‡èƒ½é€‚é…å™¨çš„å®žçŽ°æ€è·¯ã€‚ æˆ‘ä»¬é€šè¿‡public abstract class QuickAdapter&lt;T&gt; extends RecyclerView.Adapter&lt;QuickAdapter.VH&gt;å®šä¹‰ä¸‡èƒ½é€‚é…å™¨QuickAdapterç±»ï¼ŒTæ˜¯åˆ—è¡¨æ•°æ®ä¸­æ¯ä¸ªå…ƒç´ çš„ç±»åž‹ï¼ŒQuickAdapter.VHæ˜¯QuickAdapterçš„ViewHolderå®žçŽ°ç±»ï¼Œç§°ä¸ºä¸‡èƒ½ViewHolderã€‚ é¦–å…ˆä»‹ç»QuickAdapter.VHçš„å®žçŽ°ï¼š 1234567891011121314151617181920212223242526272829static class VH extends RecyclerView.ViewHolder&#123; private SparseArray&lt;View&gt; mViews; private View mConvertView; private VH(View v)&#123; super(v); mConvertView = v; mViews = new SparseArray&lt;&gt;(); &#125; public static VH get(ViewGroup parent, int layoutId)&#123; View convertView = LayoutInflater.from(parent.getContext()).inflate(layoutId, parent, false); return new VH(convertView); &#125; public &lt;T extends View&gt; T getView(int id)&#123; View v = mViews.get(id); if(v == null)&#123; v = mConvertView.findViewById(id); mViews.put(id, v); &#125; return (T)v; &#125; public void setText(int id, String value)&#123; TextView view = getView(id); view.setText(value); &#125;&#125; å…¶ä¸­çš„å…³é”®ç‚¹åœ¨äºŽé€šè¿‡SparseArray&lt;View&gt;å­˜å‚¨item viewçš„æŽ§ä»¶ï¼ŒgetView(int id)çš„åŠŸèƒ½å°±æ˜¯é€šè¿‡idèŽ·å¾—å¯¹åº”çš„Viewï¼ˆé¦–å…ˆåœ¨mViewsä¸­æŸ¥è¯¢æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æžœæ²¡æœ‰ï¼Œé‚£ä¹ˆfindViewById()å¹¶æ”¾å…¥mViewsä¸­ï¼Œé¿å…ä¸‹æ¬¡å†æ‰§è¡ŒfindViewById()ï¼‰ã€‚ QuickAdapterçš„å®žçŽ°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455public abstract class QuickAdapter&lt;T&gt; extends RecyclerView.Adapter&lt;QuickAdapter.VH&gt;&#123; private List&lt;T&gt; mDatas; public QuickAdapter(List&lt;T&gt; datas)&#123; this.mDatas = datas; &#125; public abstract int getLayoutId(int viewType); @Override public VH onCreateViewHolder(ViewGroup parent, int viewType) &#123; return VH.get(parent,getLayoutId(viewType)); &#125; @Override public void onBindViewHolder(VH holder, int position) &#123; convert(holder, mDatas.get(position), position); &#125; @Override public int getItemCount() &#123; return mDatas.size(); &#125; public abstract void convert(VH holder, T data, int position); static class VH extends RecyclerView.ViewHolder&#123; private SparseArray&lt;View&gt; mViews; private View mConvertView; private VH(View v)&#123; super(v); mConvertView = v; mViews = new SparseArray&lt;&gt;(); &#125; public static VH get(ViewGroup parent, int layoutId)&#123; View convertView = LayoutInflater.from(parent.getContext()).inflate(layoutId, parent, false); return new VH(convertView); &#125; public &lt;T extends View&gt; T getView(int id)&#123; View v = mViews.get(id); if(v == null)&#123; v = mConvertView.findViewById(id); mViews.put(id, v); &#125; return (T)v; &#125; public void setText(int id, String value)&#123; TextView view = getView(id); view.setText(value); &#125; &#125;&#125; å…¶ä¸­ï¼š getLayoutId(int viewType)æ˜¯æ ¹æ®viewTypeè¿”å›žå¸ƒå±€IDã€‚ convert()åšå…·ä½“çš„bindæ“ä½œã€‚ å°±è¿™æ ·ï¼Œä¸‡èƒ½é€‚é…å™¨å®žçŽ°å®Œæˆäº†ã€‚ é€šè¿‡ä¸‡èƒ½é€‚é…å™¨èƒ½é€šè¿‡ä»¥ä¸‹æ–¹å¼å¿«æ·åœ°åˆ›å»ºä¸€ä¸ªAdapterï¼š 123456789101112mAdapter = new QuickAdapter&lt;String&gt;(data) &#123; @Override public int getLayoutId(int viewType) &#123; return R.layout.item; &#125; @Override public void convert(VH holder, String data, int position) &#123; holder.setText(R.id.text, data); //holder.itemView.setOnClickListener(); æ­¤å¤„è¿˜å¯ä»¥æ·»åŠ ç‚¹å‡»äº‹ä»¶ &#125;&#125;; æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚å½“ç„¶å¤æ‚æƒ…å†µä¹Ÿå¯ä»¥è½»æ¾è§£å†³ã€‚ 123456789101112131415161718192021222324252627282930313233mAdapter = new QuickAdapter&lt;Model&gt;(data) &#123; @Override public int getLayoutId(int viewType) &#123; switch(viewType)&#123; case TYPE_1: return R.layout.item_1; case TYPE_2: return R.layout.item_2; &#125; &#125; @Override public int getItemViewType(int position) &#123; if(position % 2 == 0)&#123; return TYPE_1; &#125; else&#123; return TYPE_2; &#125; &#125; @Override public void convert(VH holder, Model data, int position) &#123; int type = getItemViewType(position); switch(type)&#123; case TYPE_1: holder.setText(R.id.text, data.text); break; case TYPE_2: holder.setImage(R.id.image, data.image); break; &#125; &#125;&#125;; ç»“è®º åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œå¦‚ç•Œé¢åˆå§‹åŒ–ï¼Œæ»‘åŠ¨ç­‰ï¼ŒListViewå’ŒRecyclerViewéƒ½èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼Œä¸¤è€…å¹¶æ²¡æœ‰å¾ˆå¤§çš„å·®å¼‚ï¼š æ•°æ®æºé¢‘ç¹æ›´æ–°çš„åœºæ™¯ï¼Œå¦‚å¼¹å¹•ï¼šhttp://www.jianshu.com/p/2232a63442d6ç­‰RecyclerViewçš„ä¼˜åŠ¿ä¼šéžå¸¸æ˜Žæ˜¾ï¼› è¿›ä¸€æ­¥æ¥è®²ï¼Œç»“è®ºæ˜¯ï¼š åˆ—è¡¨é¡µå±•ç¤ºç•Œé¢ï¼Œéœ€è¦æ”¯æŒåŠ¨ç”»ï¼Œæˆ–è€…é¢‘ç¹æ›´æ–°ï¼Œå±€éƒ¨åˆ·æ–°ï¼Œå»ºè®®ä½¿ç”¨RecyclerViewï¼Œæ›´åŠ å¼ºå¤§å®Œå–„ï¼Œæ˜“æ‰©å±•ï¼›å…¶å®ƒæƒ…å†µ(å¦‚å¾®ä¿¡å¡åŒ…åˆ—è¡¨é¡µ)ä¸¤è€…éƒ½OKï¼Œä½†ListViewåœ¨ä½¿ç”¨ä¸Šä¼šæ›´åŠ æ–¹ä¾¿ï¼Œå¿«æ·ã€‚ æ‰©å±•é˜…è¯» Google I/O 2016: RecyclerView Ins and Outs RecyclerViewä¼˜ç§€æ–‡ç« é›† å¼•ç”¨ï¼š â˜…â˜…â˜…â˜…RecyclerView å¿…çŸ¥å¿…ä¼š â˜…â˜…â˜…â˜…Android ListView ä¸Ž RecyclerView å¯¹æ¯”æµ…æžâ€“ç¼“å­˜æœºåˆ¶ â˜…â˜…â˜…RecyclerViewä½¿ç”¨å®Œå…¨æŒ‡å—ï¼Œæ˜¯æ—¶å€™ä½“éªŒæ–°æŽ§ä»¶äº†ï¼ˆä¸€ï¼‰ â˜…â˜…â˜…RecyclerViewä½¿ç”¨å®Œå…¨æŒ‡å—ï¼Œæ˜¯æ—¶å€™ä½“éªŒæ–°æŽ§ä»¶äº†ï¼ˆäºŒï¼‰ ä¸€ç¯‡åšå®¢ç†è§£Recyclerviewçš„ä½¿ç”¨ RecyclerViewä½¿ç”¨å…¨è§£æž Demoåœ°å€ï¼š RecyclerViewåŸºæœ¬ç”¨æ³• RecyclerViewDemo Demo1: RecyclerViewæ·»åŠ HeaderViewå’ŒFooterViewï¼ŒItemDecorationèŒƒä¾‹ã€‚ Demo2: ListViewå®žçŽ°å±€éƒ¨åˆ·æ–°ã€‚ Demo3: RecyclerViewå®žçŽ°æ‹–æ‹½ã€ä¾§æ»‘åˆ é™¤ã€‚ Demo4: RecyclerViewé—ªå±é—®é¢˜ã€‚ Demo5: RecyclerViewå®žçŽ°setEmptyView()ã€‚ Demo6: RecyclerViewå®žçŽ°ä¸‡èƒ½é€‚é…å™¨ï¼Œç€‘å¸ƒæµå¸ƒå±€ï¼ŒåµŒå¥—æ»‘åŠ¨æœºåˆ¶ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>RecyclerView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é¢å‘å¿™ç¢Œå¼€å‘è€…çš„Android]]></title>
    <url>%2Fposts%2F793c26e.html</url>
    <content type="text"><![CDATA[é¢å‘å¿™ç¢Œå¼€å‘è€…çš„ Android è§†é¢‘æ•™ç¨‹ï¼ˆTuts+ï¼‰ Android å¼€å‘èµ„æºåˆ—è¡¨ï¼ˆSharif Ahmedï¼‰ æˆ‘å¦‚ä½•åœ¨23å¤©å†…å¼€å‘äº†ä¸€æ¬¾ Android æ¸¸æˆï¼Ÿï¼ˆBigosaurï¼‰ Android å­¦ä¹ æ•™ç¨‹ Android Bootstrap [PDF] Android æ€§èƒ½å°è´´å£«ï¼ˆRomain Guy &amp; Chet Haaseï¼‰ [PDF] Android åº”ç”¨ä¸­ä½¿ç”¨ Daggerï¼ˆJake Whartonï¼‰ Android åº”ç”¨æ€§èƒ½ä¼˜åŒ– ã€ŠAndroid æµ‹è¯•ä¸Žè°ƒè¯•å®žæˆ˜ã€‹å‚è€ƒèµ„æ–™ï¼ˆ@æ–½æ‡¿æ°‘ï¼‰ [è§†é¢‘] Android å…¥é—¨æ•™ç¨‹ï¼ˆ@å¤šè´å…¬å¼€è¯¾ï¼‰ Android æµ‹è¯•å…¥é—¨ï¼ˆCorey Scottï¼‰ Android äº‹ä»¶ä¼ é€’æœºåˆ¶ï¼ˆ@å”éŸ§_Ryanï¼‰ [PDF] Android å¼€å‘æŠ€å·§æ–°æ•´ç†ï¼ˆ@51CTOæŠ€æœ¯ç¤¾åŒºï¼‰ AndroidQuery - ä¸€ä¸ªå¤„ç†å¼‚æ­¥ä»»åŠ¡çš„å¼€æºé¡¹ç›®ï¼ˆPeter Liuï¼‰ Android å¼€å‘è€…å¿…å¤‡çš„42ä¸ªé“¾æŽ¥ï¼ˆMikailï¼‰ ä¸€äº›æœ‰ç”¨çš„ Android adb å‘½ä»¤ï¼ˆDaniel Immsï¼‰ Android å¸ƒå±€ä¼˜åŒ–ï¼ˆ@å”éŸ§_Ryanï¼‰ ç³»åˆ—æ–‡ç« ï¼šå‰ç«¯ä¹‹ Android å…¥é—¨ (ct) Android è®¾è®¡æŒ‡å—éžå®˜æ–¹ç®€ä½“ä¸­æ–‡ç‰ˆ ç³»åˆ—æ•™ç¨‹ï¼šå¼€å‘ä½ çš„ç¬¬ä¸€ä¸ª Android åº”ç”¨ (Matt Luedke) å†™ç»™ iOS å¼€å‘è€…çš„ Android æ•™ç¨‹ (Stuart Hall) [slide] Android å‡½æ•°å“åº”å¼ç¼–ç¨‹ (Yaroslav Heriatovych) é¢å‘ iOS å¼€å‘è€…çš„ Android ç³»åˆ—æ•™ç¨‹ [è¯‘] Android é€šçŸ¥ä¸­å¿ƒï¼ˆ@å”¯æœ¨å¿µï¼‰ ä½¿ç”¨ Android API æœ€ä½³å®žè·µ (MeetMe) ã€Š50 Android Hacksã€‹è¯»ä¹¦ç¬”è®° (Vector_Yi) [è¯‘] å“åº”å¼ Android åº”ç”¨ (Daisyyaya) Android å¼€æºé¡¹ç›®åˆ†ç±»æ±‡æ€» (@Trinea) ç³»åˆ—æ–‡ç« ï¼šAndroid å¼€å‘å°è´´å£« (Dan Lew) Android Arsenal - ä¸€ä¸ª Android å­¦ä¹ èµ„æºç½‘ç«™ [è¯‘] Android å¼€å‘è€…å¿…çŸ¥çš„ 5 ä¸ªå¼€æºåº“ï¼ˆåˆ˜ç’ç’ï¼‰ SEAndroid å®‰å…¨æœºåˆ¶ç®€è¦ä»‹ç»å’Œå­¦ä¹ è®¡åˆ’ï¼ˆ@ç½—å‡é˜³ï¼‰ Material Design ä¸­æ–‡ç‰ˆ Android å­¦ä¹ ä¹‹è·¯ (@googdev) SEAndroid å®‰å…¨æœºåˆ¶å¯¹ Binder IPC çš„ä¿æŠ¤åˆ†æžï¼ˆç½—å‡é˜³ï¼‰ æœ€æµè¡Œçš„ Android ç»„ä»¶å¤§å…¨ (@colobu) [è¯‘] 2014 å¹´ Android ç¢Žç‰‡åŒ–æŠ¥å‘Š (boxi) ç³»åˆ—æ–‡ç« ï¼šAndroid UI å¼€å‘ï¼ˆ@å¼ å…´ä¸šTBOWï¼‰ Android æ’ä»¶åŒ– (@Trinea) [ä»£ç ] æ¨¡ä»¿ QQ è®¨è®ºç»„å¤´åƒï¼ˆ@ç½‘æ˜“å­”æ¥ ï¼‰ Android ä¸­ Java å’Œ JavaScript äº¤äº’ (androidyue) [è§†é¢‘åˆè¾‘] 3 ä¸ªæœˆç³»ç»Ÿå­¦ä¹  Android å¼€å‘ï¼ˆæžå®¢å­¦é™¢ï¼‰ æ­£ç¡®ä½¿ç”¨ Android æ€§èƒ½åˆ†æžå·¥å…·â€”â€”TraceView (@ç™½ç“¦åŠ›) [è¯‘] ç†è§£ Android ä¸­åžƒåœ¾å›žæ”¶æ—¥å¿—ä¿¡æ¯ (@Androidæœˆ) æ”¾å¼ƒ WebViewï¼Œä½¿ç”¨ Crosswalk åšå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ (GavinCT) æ•™ä½ ç”¨ Visual Studio 2015 åš Android åº”ç”¨ åå¤§ Material Design å¼€æºé¡¹ç›® (å”å°å¼•) Android Studio ç³»åˆ—æ•™ç¨‹ (@googdev) åˆ›æ–°ã€ä¸¥è‚ƒã€å¥½çŽ©çš„ Android åº”ç”¨ç¨‹åºå¼€å‘ Android æ‰¹é‡æ‰“åŒ…æé€Ÿ (@GavinCT) å­¦ Android å¼€å‘ä»…ç”¨ 3 ä¸ªæœˆï¼Œå°±æ˜¯è¿™ä¹ˆä»»æ€§ï¼ ä»£ç è§„èŒƒå’Œ Android é¡¹ç›®ä¸­çš„ä¸€äº›å¯ç”¨å·¥å…· (åˆ˜èª) å­¦ Android å¼€å‘ä»…ç”¨ 3 ä¸ªæœˆï¼Œå°±æ˜¯è¿™ä¹ˆä»»æ€§ï¼ [è¯‘] Android æ€§èƒ½ä¼˜åŒ–è¯¾ç¨‹ï¼ˆä¸€ï¼‰ï¼šæ¸²æŸ“æ€§èƒ½ (@åˆ˜æ™ºå‹‡åŒå­¦) Java for Android Android æ€§èƒ½ä¼˜åŒ–å…¸èŒƒ (@èƒ¡å‡¯me) Context-Menu.Android - Android åŠ¨ç”»ä¸Šä¸‹æ–‡èœå• (Yalantis) å¤§é‡ Material Design å­¦ä¹ èµ„æº (@light_sky) ç³»åˆ—æ–‡ç« ï¼š50 ä¸ª Android å¼€å‘æŠ€å·§ (fwy19930618) Android å¼€å‘æ•™ç¨‹å¤§å…¨ï¼ˆè§†é¢‘ + æºç ï¼‰ Android å¼€æºé¡¹ç›®æºç è§£æž (android-cn) æ·±èŠ Material Design å¤æ‚å“åº”å¼è®¾è®¡ Navigation drawer - ä¸€ä¸ª Material Design çš„æŠ½å±‰å¼å¯¼èˆªåº“ (Rudson Lima) Android å¼€å‘æœ€ä½³å®žè·µ ä½¿ç”¨ Chrome è°ƒè¯• Android App (@googdev) [è¯‘] ä¸€æ¬¡ Material Design çš„è®¾è®¡æŽ¢ç´¢ (éƒ­æ¥ ) ç³»åˆ—æ–‡ç« ï¼šå…¨é¢ç†è§£ Android å®‰å…¨æœºåˆ¶ (@stackvoid) [è¯‘] å…³äºŽ Material Design ä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡ (DATSè®¾è®¡ç¿»è¯‘ç»„) Android æºç è®¾è®¡æ¨¡å¼åˆ†æž (@MrSimp1e) [è¯‘] Android xUtils æºç è§£æž (@code-KK) [è¯‘] Android æ€§èƒ½ä¼˜åŒ–åŽç»­ (@é«˜å»ºæ­¦_Gracker) å¼€æº Android åº”ç”¨é›†é”¦ (Joker) Fresco - ä¸€ä¸ªå¼ºå¤§çš„ Android åº”ç”¨å›¾ç‰‡ç®¡ç†åº“ (Facebook) Euclid - ä¸€ä¸ªç”¨æˆ· Profile ç•Œé¢åŠ¨ç”»çš„ Android å®žçŽ° (Yalantis) [è¯‘] ä½¿ç”¨ Kotlin åˆ›å»ºä¸€ä¸ª Android åº”ç”¨ (Lollypo) ç³»åˆ—æ–‡ç« ï¼šAndroid å†…å­˜ä¼˜åŒ– (@é«˜å»ºæ­¦_Gracker) æ·±å…¥ç†è§£ Android ä¸­çš„è‡ªå®šä¹‰å±žæ€§ (é¸¿æ´‹_) Android æ€§èƒ½ä¼˜åŒ–ä¹‹å†…å­˜ç¯‡ (@èƒ¡å‡¯me) ä¸€å † Android å¼€å‘èµ„æºé“¾æŽ¥ (Anirudh S) ã€ŠAndroid å¼€å‘å­¦ä¹ è·¯å¾„å›¾ã€‹2.0 ç‰ˆ [è¯‘] Android Lollipop 5.1.1 é¢ä¸– (@MrSimp1e) [è¯‘] Instagram æ˜¯å¦‚ä½•æå‡ TextView æ¸²æŸ“æ€§èƒ½çš„ï¼Ÿ (@archieyang) Android åº”ç”¨å†…ç¤¾åŒº SDK æŠ€æœ¯æž¶æž„æµ…æž (liubin) Android æ€§èƒ½ä¼˜åŒ–å…¸èŒƒï¼ˆç¬¬ 2 å­£ï¼‰ (@èƒ¡å‡¯me) ç³»åˆ—è¯‘æ–‡ï¼šAndroid çš„ MVP æ¨¡å¼å¼€å‘ (shadev) ä¸€ä¸ª Mac ä¸Šçš„ Android å·¥å…· (mortenjust) SquiDB - ä¸€ä¸ªç”¨äºŽ Android çš„ SQLite æ•°æ®åº“æ¡†æž¶ ç³»åˆ—è¯‘æ–‡ï¼šAndroid ç ”å‘å·¥ç¨‹å¸ˆé«˜çº§è¿›é˜¶ (asce1885) Android åŠ è½½ä¸åŒ DPI èµ„æºä¸Žå†…å­˜æ¶ˆè€—ä¹‹é—´çš„å…³ç³» (Will) MaterialViewPager - ä¸€ä¸ªæ˜“äºŽä½¿ç”¨çš„ Material Design ViewPager åº“ (florent37) Android RecyclerView ä½¿ç”¨å®Œå…¨è§£æž (é¸¿æ´‹_) Android ä¸­çš„ MVP (@é„­æ›‰éµ¬-Rocko) Material é€‚é…ï¼ˆäºŒï¼‰ï¼šé«˜çº§ç¯‡ (@GavinCT) Anko - ä¸€ä¸ªè®© Android åº”ç”¨å¼€å‘æ›´å¿«ã€æ›´ç®€å•çš„åº“ Android å¼€å‘ä¸­ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜æ³„éœ²çš„é—®é¢˜ (@ç»™ç«‹ä¹) Android å¸ƒå±€ä¼˜åŒ–ä¹‹ ViewStubã€includeã€merge ä½¿ç”¨ä¸Žæºç åˆ†æž (@MrSimp1e) è…¾è®¯æ‰‹æœºç®¡å®¶ Android ç‰ˆå®žæˆ˜åˆ†æžï¼šå†…å­˜çªå¢žæ˜¯ä¸ºç¥žé©¬ï¼Ÿ (è…¾è®¯Bugly) å¤§é‡ Material Design å­¦ä¹ èµ„æº (@light_sky) Google I/O 2015 ä¸º Android å¼€å‘è€…å¸¦æ¥äº†å“ªäº›ç¦åˆ©ï¼Ÿ (ä»£ç å®¶) ç³»åˆ—æ–‡ç« ï¼šAndroid å†…æ ¸å¼€å‘ä¹‹ç³»ç»Ÿç¼–è¯‘è¾“å‡ºçš„é•œåƒæ–‡ä»¶ (@å¢_ä¿Š) [è¯‘] MVP æ¡†æž¶ Ted Mosby çš„è½¯ä»¶æž¶æž„ï¼ˆAndroidï¼‰ (@MrSimp1e) FlyRefreshï¼šè¶…èµžçš„åˆ·æ–°åŠ¨ç”»ï¼ˆAndroidï¼‰ (@è°¢æƒ1991) Android ç³»ç»Ÿæž¶æž„ä¹‹å¾®æœåŠ¡æž¶æž„ (MrSimple) Android å¼‚æ­¥æŒ‡å— (@alexhilton) Gradle Android Plugin ä½¿ç”¨æ‰‹å†Œï¼ˆä¸­æ–‡ç‰ˆï¼‰ (@ChaosLeong) Android å¼€å‘æ•™ç¨‹å¤§å…¨ï¼ˆè§†é¢‘ + æºç ï¼‰ [è¯‘] Material Design å¼€å‘åˆ©å™¨ï¼šAndroid Design Support Library ä»‹ç» Android UITestRunner - ä¸€ä¸ªéžå¸¸ç®€å•çš„ç”¨äºŽæµ‹è¯• UI çš„å•å…ƒæµ‹è¯•æ¡†æž¶ (chengkai) FlyRefreshï¼šè®©äººçœ¼å‰ä¸€äº®çš„ä¸‹æ‹‰åˆ·æ–° (Androidç¬”è®°) æµ…è°ˆ MVP å®žçŽ° Android åº”ç”¨å±‚å¼€å‘ (å·¥åŒ è‹¥æ°´) æ•™ä½ å†™ Android ç½‘ç»œæ¡†æž¶ä¹‹åŸºæœ¬æž¶æž„ (@MrSimp1e) Android å®žçŽ°é€Ÿåº¦ä»ªï¼Œä»ªè¡¨ç›˜æ•ˆæžœ (è°¢æƒ1991) Android Studio æ–°æ‰‹å®Œå…¨æŒ‡å¼• (ASCE1885) æ•™ä½ å†™ Android ç½‘ç»œæ¡†æž¶ä¹‹ HTTP è¯·æ±‚çš„åˆ†å‘ä¸Žæ‰§è¡Œ (@MrSimp1e) ç¾Žå›¢ Android DEX è‡ªåŠ¨æ‹†åŒ…åŠåŠ¨æ€åŠ è½½ç®€ä»‹ (xijianshuai &amp; lixiaoyang) çŸ­ä¿¡éªŒè¯ç åŠ©æ‰‹ï¼šä¸€æ¬¾æ–°çš„å¼€æºè½» Appï¼ˆAndroidï¼‰ (Dracut) SublimePickerï¼šAndroid Material é£Žæ ¼æ—¶é—´é€‰æ‹©å™¨ (vikramkakkar) ä½¿ç”¨ Kotlin è¿›è¡Œ Android å¼€å‘ (@RagnarokStack) Android åº”ç”¨ç¨‹åº UI ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“çš„åŠ¨ç”»æ‰§è¡Œè¿‡ç¨‹åˆ†æž (@ç½—å‡é˜³) [è¯‘] Android å¼€å‘æœ€ä½³å®žè·µ (andyiac) [è¯‘] Android Design Support Library çš„ä»£ç å®žéªŒ (MrFu) Android å¼€æºé¡¹ç›®æºç è§£æžï¼ˆç¬¬äºŒæœŸï¼‰ (@code-KK) [è¯‘] Android ä¸­çš„å¸§åŠ¨ç”» (jianghejie) æŽ¨èå‡ ä¸ªæœ‰ç”¨çš„ Android Studio æ’ä»¶å’Œå·¥å…· (@googdev) Dexposedï¼šé˜¿é‡Œå·´å·´å¼€æºçš„æ— ä¾µå…¥è¿è¡ŒæœŸ AOP æ¡†æž¶ï¼ˆAndroidï¼‰ å°ç±³å¼€æºçš„å†…æ ¸æºä»£ç  å¾ˆæ£’çš„ä¸‹æ‹‰åˆ·æ–°é¡¹ç›® Android Ultra Pull To Refresh æºç è§£æž (grumoon) Android åº”ç”¨ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“çš„ä¸€äº›æŽ¢ç©¶ (@ç å†œæ˜Žæ˜Žæ¡‘) ä¸€ä¸ª Demo å­¦ä¼šç”¨ Android å…¼å®¹åŒ…æ–°æŽ§ä»¶ (@å®‰å“çŒ´) Android å¸¸ç”¨å¼€å‘å·¥å…·ä»¥åŠ Mac å¸¸ç”¨è½¯ä»¶ (è‚¥è‚¥é±¼) DynamicLoadApk æºç è§£æž (code-KK) InstalMaterial å­¦ä¹ ç¬”è®°ä¹‹ Reveal æ•ˆæžœ (ç¨‹åºäº¦éžçŒ¿) å¿«é€Ÿæé«˜ Android å¼€å‘æ•ˆçŽ‡çš„ Web å·¥å…· (@æŠ€æœ¯å°é»‘å±‹) [è¯‘] Android UI è‡ªåŠ¨åŒ–æµ‹è¯• (DorisMinmin) ç³»åˆ—è¯‘æ–‡ï¼šä½¿ç”¨ Kotlin å¼€å‘ Android åº”ç”¨ (ASCE1885) ä½¿ç”¨ Gradle ç®¡ç†ä½ çš„ Android Studio å·¥ç¨‹ (é£žé›ªæ— æƒ…) [è¯‘] å­¦ä¹  Android å¼€å‘çš„äºŒåå¥—å…è´¹ç†æƒ³èµ„æº (æ ¸å­å¯ä¹) HTTPDNSLib - ä¸€ä¸ªæ”¯æŒ DNSPod D+ å’Œè‡ªå®šä¹‰ HttpDNS æœåŠ¡çš„ HttpDNS SDKï¼ˆAndroidï¼‰ (SinaMSRE) ä¸€ä¸ªä¼˜ç§€çš„ Android åº”ç”¨ä»Žå»ºé¡¹ç›®å¼€å§‹ (Jude95) [è¯‘] æ£€æµ‹å’Œè§£å†³ Android åº”ç”¨çš„æ€§èƒ½é—®é¢˜ (@MrSimp1e) Android ä¸­ TextView é¢„æ¸²æŸ“ç ”ç©¶ (RagnarokStack) Android å¼€å‘è€…çš„æµè§ˆå™¨ä¹¦ç­¾ (é„­æ›‰éµ¬-Rocko) Android ä»£ç å†…å­˜ä¼˜åŒ–å»ºè®®ï¼šOnTrimMemory ä¼˜åŒ– (Android Performance) Android APK åŠ å›ºæŠ€æœ¯æ–¹æ¡ˆè°ƒç ” (ASCE1885) ä½¿ç”¨ Android lint å‘çŽ°å¹¶è§£å†³é«˜ç‰ˆæœ¬ API é—®é¢˜ (æŠ€æœ¯å°é»‘å±‹) Smalidea æ— æºç è°ƒè¯• Android åº”ç”¨ (ç˜¦è›Ÿèˆž) å¦‚æžœè®©æˆ‘é‡æ–°è®¾è®¡ä¸€æ¬¾ Android App (aspook) æŽ¢ç©¶ android:largeHeap (æŠ€æœ¯å°é»‘å±‹) è·Ÿæˆ‘ä¸€èµ·å†™ EventBusï¼ˆä¸€ï¼‰ (mcxiaoke) ä¸€æ­¥ä¸€æ­¥æ•™ä½  150 è¡Œä»£ç å®žçŽ°ç®€ä¹¦æ»‘åŠ¨è¿”å›žæ•ˆæžœ (ç¨‹åºäº¦éžçŒ¿) Android Material Design åŠ¨ç”»å®žçŽ° (é˜³æ˜¥é¢) Android Gradle æ’ä»¶ä¸­æ–‡æŒ‡å— (é£žé›ªæ— æƒ…) Android å¤šæ¸ é“æ‰“åŒ…å·¥å…· Gradle æ’ä»¶ (mcxiaoke) AWebDB å¯ä»¥åœ¨æµè§ˆå™¨æ“ä½œ Android æ•°æ®åº“å•¦ (Bai) ä¸€ä¸ªä¸Šä¼  APK åˆ° fir çš„ Gradle æ’ä»¶ (ç å†œæ˜Žæ˜Žæ¡‘) Cool Android Apis æ•´ç†ï¼ˆä¸€ï¼‰ (@Oak_Zmm) Android åº”ç”¨å¼€å‘ä¹‹æ‰€æœ‰åŠ¨ç”»ä½¿ç”¨è¯¦è§£ (@å·¥åŒ è‹¥æ°´) Android è§†é¢‘å½•åˆ¶ App è§£å†³æ–¹æ¡ˆæ±‡æ€» (è€ç‰›) 5 ç§ä¼˜åŒ–ä½ çš„ Android 5.0 Lollipop ä»£ç çš„æ–¹æ³• Android é¡¹ç›®ä¸­å¦‚ä½•ç”¨å¥½æž„å»ºç¥žå™¨ Gradleï¼Ÿ (å¯’æ±Ÿä¸é’“) é€šè¿‡è“ç‰™* LE (BLE) ä»Ž Android è¿žæŽ¥åˆ°è‹±ç‰¹å°” EDISON Android å¹³å°å… Root æ— ä¾µå…¥ AOP æ¡†æž¶ Dexposed ä½¿ç”¨è¯¦è§£ (ASCE1885) BatchPackApkï¼šApk æ‰¹é‡å¿«é€Ÿæ‰“åŒ…å·¥å…· (MasonLiuChn) SlideBottomPanelï¼šåº•éƒ¨åˆ’å‡ºè§†å›¾ï¼Œè½»æ¾å®žçŽ°â€œçŸ¥ä¹Žæ—¥æŠ¥ Î² ç‰ˆâ€æ•ˆæžœ (NeXT___) CNode ç¤¾åŒºç¬¬ä¸‰æ–¹ Android å®¢æˆ·ç«¯ (TakWolf) å¼€æºä¸­å›½ Maven åº“ ä¸€ä¸ªè¶…èµžè¶…å…¨çš„ Android Library (Huqiu Liao) Android æ€§èƒ½ä¼˜åŒ–å…¸èŒƒï¼ˆç¬¬ 3 å­£ï¼‰ (@èƒ¡å‡¯me) æœ€ç¾Žåº”ç”¨ï¼šä»Ž Android ç ”å‘å·¥ç¨‹å¸ˆçš„è§’åº¦ä¹‹â€œåŽ¨æˆ¿æ•…äº‹â€ (ASCE1885) [è¯‘] æ·±å…¥è®²è§£ Android ä¸­ Activity launchMode (æŠ€æœ¯å°é»‘å±‹) [è¯‘] Android ä¸­çš„ AOP ç¼–ç¨‹ (byronwind) é¢å‘ Android* ç›®æ ‡çš„è‹±ç‰¹å°” INDE OpenCV å…¥é—¨ Android æŠ€æœ¯æ–‡æ¡£ç¿»è¯‘ï¼šå·¥å…·å±žæ€§ (é£žé›ªæ— æƒ…) Jenkin + Git + Gradle ä¸º Android é¡¹ç›®æ­å»º CI çŽ¯å¢ƒ (ç¦»æ˜Ÿè¿åŠ¨) Google Places for Android å…¥é—¨æŒ‡å— (@æ±¤å¥‡V) [è‹±] Parse å¼€æºå…¶æ‰€æœ‰ SDKï¼ˆAndroid &amp; iOSï¼‰ (Nikita Lutsenko) xBus ä½¿ç”¨æŒ‡å— (mcxiaoke) LayoutCastï¼šæŠŠä»£ç å’Œèµ„æºæ–‡ä»¶çš„æ”¹åŠ¨ç›´æŽ¥åŒæ­¥åˆ°æ‰‹æœºä¸Šï¼Œåº”ç”¨ä¸éœ€è¦é‡å¯ (mmin18) Android 6.0 ä¸­æ–°çš„æ–°æŠ€æœ¯ (@Androidç¬”è®°) Android è¯€çªï¼šLayouts ä¸Ž Views (llitfk@DockOne) Android NestedScrolling å®žæˆ˜ (Androidç¬”è®°) Android åç¼–è¯‘çš„å·¥å…·å’Œæ–¹æ³• (@æ¨å‰‘åŒå­¸) Next åº“ä½¿ç”¨æŒ‡å—ä¹‹ Core æ¨¡å—ï¼ˆAndroidï¼‰ (mcxiaoke) [è¯‘] CoordinatorLayout ä¸Žå¿«é€Ÿè¿”å›žçš„å®žçŽ°ï¼ˆAndroidï¼‰ (hejie) SimpleCropView - ä¸€ä¸ªç®€å•çš„å›¾ç‰‡å‰ªè£åº“ï¼ˆAndroidï¼‰ (IsseiAoki) TransitionPlayer - ä¸€ä¸ª Android å¼•å¯¼åŠ¨ç”»åº“ (XMFE-TEAM) å¾®ä¿¡ Android å®¢æˆ·ç«¯ï¼šä¼šè¯é€Ÿåº¦æå‡ 70% çš„èƒŒåŽ (charven) [è¯‘] ä½¿ç”¨ TDD çš„æ–¹å¼å¼€å‘ä¸€ä¸ª Hacker News Android å®¢æˆ·ç«¯ (Anthonyeef) æ”¹å˜ support ä¸­ AlertDialog çš„æ ·å¼ï¼ˆAndroidï¼‰ (ç å†œæ˜Žæ˜Žæ¡‘) ä¸ºä»€ä¹ˆ Android ä¸­ä¸å»ºè®®ä½¿ç”¨ Enums (Lusfold) Android é€†å‘å·¥ç¨‹å·¥å…·é›† (J.D.Song) DroidPluginï¼š360 æ‰‹æœºåŠ©æ‰‹åœ¨ Android ç³»ç»Ÿä¸Šå®žçŽ°çš„ä¸€ç§æ–°çš„æ’ä»¶æœºåˆ¶ (Qihoo360) Android Log æœ€ä½³å®žè·µ (@å¤©ä¹‹ç•Œçº¿2010) å‰–æž Android ä¸­è¿›ç¨‹ä¸Žçº¿ç¨‹è°ƒåº¦ä¹‹ nice (æŠ€æœ¯å°é»‘å±‹) Android OkHttp æ–‡ä»¶ä¸Šä¼ ä¸Žä¸‹è½½çš„è¿›åº¦ç›‘å¬æ‰©å±• (lizhangqu) åŸºäºŽè‹±ç‰¹å°”æž¶æž„ä½¿ç”¨ Linderdaum* å¼•æ“Žå¼€å‘ C++ å®‰å“* NDK æ¸¸æˆ (è‹±ç‰¹å°”å¼€å‘äººå‘˜ä¸“åŒº) å…¨å¹³å°åç¼–è¯‘å·¥å…· Jadx (ç¨‹åºäº¦éžçŒ¿) ç§¯æœ¨ï¼šå¸®åŠ©ä½ å¿«é€Ÿæ­å»ºå±žäºŽè‡ªå·±çš„åº”ç”¨ (æ±¤å¥‡V) Android Tipsï¼šå¡«å‘å¿…å¤‡ (æ±¤å¥‡V) React Native for Android on GitHub (Facebook) Android å›¾æ ‡èµ„æºç”Ÿæˆå™¨ (JuneLegency) XLogï¼šAndroid è°ƒè¯•ç¥žå™¨ (promeG) DecompileApkï¼šä¸€é”®åç¼–è¯‘ APKï¼Œè¾“å‡ºæ‰€æœ‰åç¼–è¯‘åŽçš„ä»£ç ã€èµ„æº (MasonLiuChn) Colorfulï¼šåŸºäºŽ Theme çš„ Android åŠ¨æ€æ¢è‚¤åº“ (@MrSimp1e) Otto äº‹ä»¶æ€»çº¿æ¡†æž¶çš„ä½¿ç”¨ (Sunzxyong) React Native For Android åˆä½“éªŒ (ASCE1885) Android è¿›ç¨‹çº¿ç¨‹è°ƒåº¦ä¹‹ cgroups (æŠ€æœ¯å°é»‘å±‹) Gradle å¤šæ¸ é“æ‰“åŒ… (å®‰å“çŒ´) Android é¡¹ç›®æ”¶é›† (snowdream) Android æ€§èƒ½ä¼˜åŒ–è§†é¢‘ã€æ–‡æ¡£å’Œå·¥å…·æ”¶é›† (J.D.Song) [è¯‘] Retrofit 2.0ï¼šæœ‰å²ä»¥æ¥æœ€å¤§çš„æ”¹è¿› (hejie) æ·±å…¥è®²è§£ WebViewï¼ˆä¸Šï¼‰ (å¼ æ¶›) [è¯‘] Android 6.0 æ–°ç‰¹æ€§è¯¦è§£ï¼ˆè¿è¡Œæ—¶æƒé™ã€å­˜å‚¨ã€ç”µæºç®¡ç†ï¼‰ (é»‘å±±é¾˜) Android å¼€å‘æœ€ä½³å®žè·µ (@èƒ¡å‡¯me) AndroidCatï¼šAndroid å¼€å‘ç›¸å…³çš„ç½‘å€å¯¼èˆª (å¤§èŠ±çŒ«) Android ä»¿æœç‹—æµè§ˆå™¨åŠ è½½åŠ¨ç”» (@_é‚“å£«ä¼Ÿ) StatusBarColorï¼šAndroid 4.4+ è®¾ç½®çŠ¶æ€æ ã€å¯¼èˆªæ é¢œè‰²ã€ä¾§æ»‘èœå•æ²‰æµ¸ (MasonLiuChn) KJBitmap ä¸Ž KJHttp çš„æ·±åº¦ç”¨æ³• (å¼ æ¶›) App å¯åŠ¨åŠ é€Ÿï¼Œä»¥åŠä½¿ç”¨ FSA æ¥å¤„ç†çŠ¶æ€è½¬æ¢é¿å… Activity State Loss (Piasy) RecyclerView çš„é€šç”¨é€‚é…å™¨ï¼Œå’Œæ»šåŠ¨æ—¶ä¸åŠ è½½å›¾ç‰‡çš„å°è£… (å¼ æ¶›) Android GC é‚£ç‚¹äº‹ Android æ€§èƒ½ä¼˜åŒ–å­¦ä¹ å°ç»“ Android 6.0 Runtime Permission æµ‹è¯• ä¸€æ­¥ä¸€æ­¥å¸¦ä½ ä»¿å„å¤§ä¸»æµ App åœ°å›¾å®šä½ç§»åŠ¨é€‰å€åŠŸèƒ½ï¼ˆAndroidï¼‰ KJFrameForAndroid 2.25 å‘å¸ƒï¼Œæ”¯æŒ 6.0 ç½‘ç»œè¯·æ±‚ å¾ˆå°‘æœ‰äººä¼šå‘Šè¯‰ä½ çš„ Android å¼€å‘åŸºæœ¬å¸¸è¯† Android Handler æ¶ˆæ¯æœºåˆ¶çš„ç†è§£ Android UIï¼šæœºæ™ºçš„è¿œç¨‹åŠ¨æ€æ›´æ–°ç­–ç•¥ Android å¿«é€Ÿå¼€å‘æ¡†æž¶ FastDev4Android ä»‹ç»ï¼ˆä¸€ï¼‰ [è¯‘] Android æž¶æž„æ¼”åŒ–ä¹‹è·¯ Android é¡¹ç›®é‡æž„ä¹‹è·¯ï¼ˆæž¶æž„ç¯‡ï¼‰ Android å¼€å‘ä¸­ï¼Œæœ‰å“ªäº›å‘éœ€è¦æ³¨æ„ï¼Ÿ [è¯‘] é€šè¿‡ Hardware Layer æå‡ Android åŠ¨ç”»æ€§èƒ½ å…³äºŽ Android Log çš„ä¸€äº›æ€è€ƒ Android Support Library 23.1 çš„å˜åŒ– AVLoadingIndicatorViewï¼šAndroid åŠ è½½åŠ¨ç”»åˆé›† ç§»æ¤ C ç¨‹åºåˆ° Android MVVM_Android-CleanArchitecture Android æ‰“åŒ…çš„é‚£äº›äº‹ Android 6.0 è¿è¡Œæ—¶æƒé™å¤„ç† TextViewForFullHtmlï¼šå¯¹åŽŸç”Ÿ TextView è§£æž HTML æ ¼å¼æ–‡æœ¬çš„å¢žå¼º DynamicAPKï¼šæºç¨‹ App çš„æ’ä»¶åŒ–å’ŒåŠ¨æ€åŠ è½½æ¡†æž¶ #Kotlin# ä½ å¥½æ€ªå…½ TraceView è‡ªåŠ¨åŒ–æŠ“å–æ–¹æ¡ˆå®žè·µ InteractiveCanvasï¼šç‚«é…·çš„è·¨å±å¹• Canvas åŠ¨ç”» Android å¿«æ·æ–¹å¼è§£å¯† Android å¾®ä¿¡ä¸Šçš„ Wear çš„å¼€å‘æ€»ç»“ Android åˆ†è¾¨çŽ‡ç›¸å…³çŸ¥è¯† Android çƒ­æ›´æ–°å®žçŽ°åŽŸç† å¦‚ä½•å§¿åŠ¿æ­£ç¡®åœ°åšä¸€ä¸ªå……æ»¡æžœå‘³çš„ Android åº”ç”¨ å†è®®æºç¨‹ Android åŠ¨æ€åŠ è½½æ¡†æž¶ DynamicAPK Treasure - ä¸€ä¸ª Android å¹³å°ä¸ŠåŸºäºŽ SharePreferences çš„åå¥½å­˜å‚¨åº“ Nuwaï¼šçƒ­ä¿®å¤ä½ çš„ Android åº”ç”¨ EasyImageï¼šAndroid å›¾ç‰‡é€‰æ‹©æŽ§ä»¶ [è¯‘] æŽŒæ¡ Coordinator Layout BlurImageViewï¼šå®žçŽ°ç±» Medium çš„å›¾ç‰‡åŠ è½½ å¤©çŒ« Android App çº¿ä¸Šçƒ­ä¿®å¤æ–¹æ¡ˆ Andriod æ€§èƒ½ä¼˜åŒ–ä¹‹åˆ—è¡¨å¡é¡¿ï¼šä»¥â€œç®€ä¹¦â€ APP ä¸ºä¾‹ AndroidAutoLayoutï¼šAndroid å±å¹•é€‚é…æ–¹æ¡ˆ WXTabBarControllerï¼šå®žçŽ° Android ç‰ˆå¾®ä¿¡ TabBar çš„æ»‘åŠ¨åˆ‡æ¢åŠŸèƒ½ï¼ˆOCï¼‰ EZScalpelï¼šAndroid è§†å›¾å±‚çº§æŸ¥çœ‹åˆ©å™¨ å®žè·µè‡ªå®šä¹‰ UIï¼šRLF Backboard - ä¸€ä¸ªåŸºäºŽ Facebook Rebound çš„åŠ¨æ•ˆæ¡†æž¶ åŠ å¿« Android ç¼–è¯‘é€Ÿåº¦ å¦‚ä½•å¼€å‘ä¸€ä¸ª Android App dex åˆ†åŒ…å˜å½¢è®° é¢å‘å¯¹è±¡å…­å¤§åŽŸåˆ™ 1000 ä¸ª Android å¼€æºé¡¹ç›®é›†åˆ Gradle è„šæœ¬åŸºç¡€å…¨æ”»ç•¥ stetho-js-rhinoï¼šFacebook Stetho æ’ä»¶ï¼Œä¸º Android æä¾› JavaScript è°ƒè¯•çª—å£ è®°ä¸€æ¬¡ ListView æ€§èƒ½ä¼˜åŒ–è¿‡ç¨‹ XhsParallaxWelcomeï¼šå°çº¢ä¹¦æ¬¢è¿Žå¼•å¯¼é¡µå®žçŽ°ï¼ˆç¬¬äºŒç‰ˆï¼‰ å¾®ä¿¡æŠ¢çº¢åŒ…æ’ä»¶æºç è§£æžï¼ˆAndroidï¼‰ [è¯‘] æ¯ä¸ª Android å¼€å‘è€…éƒ½åº”è¯¥äº†è§£çš„èµ„æºåˆ—è¡¨ Android å›¾ç‰‡é€‰æ‹©å™¨ OverscrollScaleï¼šä»¿å°ç±³åˆ—è¡¨æ‹‰ä¼¸æ•ˆæžœï¼ˆAndroidï¼‰ [è¯‘] ä½¿ç”¨ Systrace åˆ†æž UI æ€§èƒ½ [è¯‘] å¼€å‘å®‰å…¨çš„ Android åº”ç”¨ è¯´è¯´ Android çš„ MVP æ¨¡å¼ é¢è¯•æ—¶ï¼Œé—®å“ªäº›é—®é¢˜èƒ½è¯•å‡ºä¸€ä¸ª Android åº”ç”¨å¼€å‘è€…çœŸæ­£çš„æ°´å¹³ï¼Ÿ åŠ¨æ€ Android ç¼–ç¨‹ EventBus æºç ç ”è¯»ï¼ˆä¸Šï¼‰ ä½¿ç”¨ Picasso åŠ è½½å›¾ç‰‡çš„å†…å­˜ä¼˜åŒ–å®žè·µ é«˜ä»¿å¾®ä¿¡ JustWeEngineï¼šAndroid è½»é‡çº§æ¸¸æˆæ¡†æž¶ Android ä¸‹æ‹‰åˆ·æ–°å¼€æºåº“å¯¹æ¯” Android View æ€»ç»“ å…³äºŽ Android ä¸­å·¥ä½œè€…çº¿ç¨‹çš„æ€è€ƒ Android 6.0 ç³»ç»Ÿå­¦ä¹ ä¹‹ JNI Android Studio ä½ ä¸çŸ¥é“çš„è°ƒè¯•æŠ€å·§ Android å¼€å‘è€…ç«™ç‚¹èµ„æº [PDF] æ·±å…¥ç†è§£ Android ä¹‹ Dalvik Android ä»£ç è´¨é‡æ£€æŸ¥åˆ©å™¨ ç”¨é»‘å®¢æ€ç»´åšæµ‹è¯•ï¼šç¥žå™¨ Xposed æ¡†æž¶ä»‹ç» Android å•å…ƒæµ‹è¯•ç ”ç©¶ä¸Žå®žè·µ æž„å»ºæ›´é«˜è´¨é‡çš„ Android åº”ç”¨ï¼š2015 Playtime ä¹‹ Build Better 2015 å¹´åå¤§çƒ­é—¨ Android å¼€æºæ–°é¡¹ç›® Android è½¯é”®ç›˜å’Œ emoji è¡¨æƒ…åˆ‡æ¢æ–¹æ¡ˆ PeriscopeLayout - ä¸€ä¸ªç±»ä¼¼ Android Periscope ç‚¹èµžæ•ˆæžœçš„ Layout HTextViewï¼šAndroid TextView åŠ¨ç”»æ•ˆæžœ å€¼å¾—æŽ¨èçš„ Android åº”ç”¨æ€§èƒ½æ£€æµ‹å·¥å…·åˆ—è¡¨ Android ç”Ÿæ€çš„ç ´ä¸Žç«‹ AndResGuardï¼šå¾®ä¿¡çš„ Android èµ„æºæ··æ·†æ–¹æ¡ˆ GalleryFinalï¼šå²ä¸Šæœ€å¼ºçš„å›¾ç‰‡é€‰æ‹©å™¨ï¼ˆAndroidï¼‰ Android æ€§èƒ½ä¼˜åŒ–å…¸èŒƒ Android targetSdkVersion åŽŸç† Android Linker å­¦ä¹ ç¬”è®° Android åº”ç”¨å¼€å‘æž¶æž„æ¦‚è¿° [è¯‘] Android UI æ€§èƒ½ä¼˜åŒ–è¯¦è§£ Android å¹³å°çš„å´©æºƒæ•èŽ·æœºåˆ¶åŠå®žçŽ° Android å¼€å‘ç»•ä¸è¿‡çš„å‘ï¼šä½ çš„ Bitmap ç©¶ç«Ÿå å¤šå¤§å†…å­˜ï¼Ÿ BasePedo - ä¸€ä¸ªç¨³å®šçš„ Android è®¡æ­¥æºä»£ç  ä¸€ä¸ªéžå®˜æ–¹ç‰ˆçš„å¹²å‡€çš„ â€œONE â€¢ ä¸€ä¸ªâ€ BrokenViewï¼šçŽ»ç’ƒç ´ç¢Žçš„æ•ˆæžœï¼ˆAndroidï¼‰ Smallï¼šå¼ºå¤§çš„è½»é‡çº§ Android æ’ä»¶æ¡†æž¶ Binder å­¦ä¹ æŒ‡å—]]></content>
      <categories>
        <category>Android</category>
        <category>å¼€æºåº“</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[xBus-ç®€æ´çš„EventBuså®žçŽ°]]></title>
    <url>%2Fposts%2F9105b80c.html</url>
    <content type="text"><![CDATA[Demoåœ°å€ï¼šMyXBus åŸºäºŽå‘å¸ƒè®¢é˜…(Pub/Sub)æ¨¡å¼çš„ä¸€ä¸ªäº‹ä»¶æ¶ˆæ¯åº“ï¼Œä½¿ç”¨é€šç”¨çš„ register(target), unregister(target), post(event) æ¶ˆæ¯é€šä¿¡æŽ¥å£ï¼Œèƒ½æœ‰æ•ˆçš„å‡å°‘ç”šè‡³æ¶ˆé™¤Androidåº”ç”¨ä¸­å¼‚æ­¥ä»»åŠ¡é€»è¾‘å’Œç•Œé¢æ›´æ–°ä¹‹é—´çš„è€¦åˆï¼Œå®žçŽ°æ¨¡å—åŒ–ï¼Œæé«˜å¼€å‘æ•ˆçŽ‡ã€‚ 2015.09.15 1.0.2 - ä¿®å¤å¤šçº¿ç¨‹å‘é€äº‹ä»¶çš„åŒæ­¥é—®é¢˜ 2015.08.18 1.0.1 - ä¿®å¤ unresiger() çš„ç©ºæŒ‡é’ˆé—®é¢˜ 2015.08.08 1.0.0 - åŸºæœ¬åŠŸèƒ½å…¨éƒ¨å®Œæˆï¼Œå‘å¸ƒ1.0.0æ­£å¼ç‰ˆ ä½¿ç”¨æŒ‡å—Gradleé›†æˆ1compile &apos;com.mcxiaoke.xbus:bus:1.0.+&apos; æŽ¥æ”¶äº‹ä»¶123456789101112131415161718192021222324252627282930313233343536public class SimpleActivity extends Activity &#123; @Override protected void onCreate(final Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); // æ³¨å†Œ Bus.getDefault().register(this); &#125; @Override protected void onDestroy() &#123; super.onDestroy(); // å–æ¶ˆæ³¨å†Œ Bus.getDefault().unregister(this); &#125; @BusReceiver public void onStringEvent(String event) &#123; // handle your event // è¿™é‡Œå¤„ç†äº‹ä»¶ &#125; @BusReceiver public void onSomeEvent(SomeEventClass event) &#123; // SomeEventClassè¡¨ç¤ºä»»æ„çš„è‡ªå®šä¹‰ç±» // handle your event // è¿™é‡Œå¤„ç†äº‹ä»¶ &#125; @BusReceiver public void onObjectEvent(Object event) &#123; // ä¸å»ºè®®ä½¿ç”¨Objectï¼Œä¼šæ”¶åˆ°æ‰€æœ‰ç±»åž‹çš„äº‹ä»¶ // handle your event // è¿™é‡Œå¤„ç†äº‹ä»¶ &#125;&#125; å‘é€äº‹ä»¶ç„¶åŽåœ¨éœ€è¦çš„åœ°æ–¹è°ƒç”¨ post(event) å‘é€äº‹ä»¶é€šçŸ¥ï¼Œå¦‚ Service æˆ–æŸä¸ªçº¿ç¨‹é‡Œï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å‘é€äº‹ä»¶ï¼š 123456789101112131415// æ¯”å¦‚åœ¨IntentServiceé‡Œpublic class SimpleService extends IntentService &#123; public SimpleService() &#123; super("SimpleService"); &#125; @Override protected void onHandleIntent(final Intent intent) &#123; // è¿™é‡Œæ˜¯ä¸¾ä¾‹ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å‘é€äº‹ä»¶ Bus.getDefault().post("String Event"); Bus.getDefault().post(new SomeEventClass()); Bus.getDefault().post(new Object()); &#125;&#125; é«˜çº§ç”¨æ³•ä»»ä½•åœ°æ–¹æ³¨å†Œä½ è¿˜å¯ä»¥é€‰æ‹©åœ¨ onStart() é‡Œæ³¨å†Œï¼Œåœ¨ onStop() é‡Œå–æ¶ˆæ³¨å†Œã€‚ä½ å®Œå…¨å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚ä½†æ˜¯å»ºè®®ä½ åœ¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶æ–¹æ³•é‡Œæ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œï¼Œå¦‚ Activity/Fragment/Service çš„ onCreate/onDestroy æ–¹æ³•é‡Œï¼Œ register() å’Œ unregister() å»ºè®®é…å¯¹ä½¿ç”¨ï¼Œé¿å…å†…å­˜æ³„éœ²ã€‚ 12345678910111213@Overrideprotected void onStart() &#123; super.onStart(); // you can also register here Bus.getDefault().register(this);&#125;@Overrideprotected void onStop() &#123; super.onStop(); // you can also unregister here Bus.getDefault().unregister(this);&#125; è‡ªå®šä¹‰ Busä½ ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨é»˜è®¤çš„ Bus.getDefault()ï¼Œæ”¹ç”¨è‡ªå·±åˆ›å»ºçš„ Bus å¯¹è±¡ï¼š 12345678910111213public class MainApp extends Application &#123; private Bus mBus = new Bus(); @Override public void onCreate() &#123; super.onCreate(); &#125; public Bus getBus() &#123; return mBus; &#125;&#125; Debugé»˜è®¤ä¸è¾“å‡ºä»»ä½•LOGä¿¡æ¯ï¼Œå¯ä»¥è¿™æ ·å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š 1public Bus setDebug(final boolean debug) MethodFinderé»˜è®¤ä½¿ç”¨æ³¨è§£(@BusReceiver)è¯†åˆ«äº‹ä»¶æŽ¥æ”¶å™¨æ–¹æ³•ï¼Œå¯ä»¥è¿™æ ·ä¿®æ”¹ ï¼š 1public Bus setMethodFinder(final MethodFinder finder) é»˜è®¤ä½¿ç”¨çš„æ˜¯ AnnotationMethodFinderï¼Œåªæœ‰ä½¿ç”¨äº† @BusReceiver çš„æ–¹æ³•æ‰å¯ä»¥æŽ¥å—äº‹ä»¶ã€‚ å¯é€‰ä½¿ç”¨ NamedMethodFinder ï¼ŒNamedMethodFinder ä½¿ç”¨æ–¹æ³•åè¯†åˆ«ï¼Œé»˜è®¤æ–¹æ³•åæ˜¯ onEvent ï¼Œä½ å¯ä»¥æŒ‡å®šå…¶å®ƒçš„æ–¹æ³•åã€‚ ä½¿ç”¨ NamedMethodFinder ä¼šæ¯”ä½¿ç”¨ AnnotationMethodFinder æ•ˆçŽ‡é«˜ä¸€ç‚¹ï¼Œå› ä¸ºå®ƒå¿½ç•¥æ³¨è§£ï¼Œç›´æŽ¥ä½¿ç”¨æ–¹æ³•åå­—ç¬¦ä¸²åŒ¹é…ã€‚ä¸€èˆ¬ä½¿ç”¨ï¼Œä¸¤è€…å·®åˆ«ä¸å¤§ã€‚ ä½ è¿˜å¯ä»¥å®žçŽ° MethodFinder æŽ¥å£ï¼Œè‡ªå®šä¹‰å…¶å®ƒçš„äº‹ä»¶æŽ¥æ”¶å™¨æ–¹æ³•åŒ¹é…æ¨¡å¼ï¼š 1234interface MethodFinder &#123; Set&lt;MethodInfo&gt; find(final Bus bus, final Class&lt;?&gt; targetClass);&#125; StrictModeå®½æ³›åŒ¹é…æ¨¡å¼é»˜è®¤æƒ…å†µä¸‹ï¼Œ Bus ä½¿ç”¨å®½æ³›çš„äº‹ä»¶ç±»åž‹åŒ¹é…æ¨¡å¼ï¼Œäº‹ä»¶å‚æ•°ä¼šåŒ¹é…å®ƒçš„çˆ¶ç±»å’ŒæŽ¥å£ï¼Œå¦‚æžœä½ è°ƒç”¨ post(String)ï¼Œé‚£ä¹ˆè¿™å‡ ä¸ªæ–¹æ³•éƒ½ä¼šæ”¶åˆ°ä¸¾ä¾‹ï¼š 123456789101112// å¦‚æžœä½ è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå‘é€ä¸€ä¸ªStringBuilderç±»åž‹çš„äº‹ä»¶Bus.getDefault().post(new StringBuilder("Event"));// è¿™å‡ ä¸ªæ–¹æ³•ä¼šæ”¶åˆ°äº‹ä»¶public void onEvent1(StringBuilder event) // åŒ¹é…ï¼Œç±»åž‹ç›¸ç¬¦public void onEvent2(Object event) // åŒ¹é…ï¼ŒStringBuilderæ˜¯Objectçš„å­ç±»public void onEvent3(CharSequence event) // åŒ¹é…ï¼ŒStringBuilderæ˜¯CharSequenceçš„å®žçŽ°ç±»public void onEvent4(Serializable event) // åŒ¹é…ï¼ŒStringBuilderå®žçŽ°äº†SerializableæŽ¥å£// è¿™å‡ ä¸ªæ–¹æ³•ä¸ä¼šæ”¶åˆ°äº‹ä»¶public void onEvent5(Exception event) ä¸åŒ¹é…ï¼ŒExceptionä¸ŽStringå®Œå…¨æ— å…³public void onEvent6(String event) // ä¸åŒ¹é…ï¼ŒStringBuilderä¸èƒ½è½¬æ¢æˆStringç±»åž‹ å¯¹äºŽ post(event) å’Œ onEvent(EventType) ï¼ŒåŒ¹é…è§„åˆ™æ˜¯ï¼šå¦‚æžœ event.getClass() å¯ä»¥å¼ºåˆ¶è½¬æ¢æˆ EventTypeï¼Œé‚£ä¹ˆåŒ¹é…æˆåŠŸï¼Œèƒ½æ”¶åˆ°äº‹ä»¶ã€‚ ä¸¥æ ¼åŒ¹é…æ¨¡å¼å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ›´æ”¹é»˜è®¤è¡Œä¸ºï¼Œä½¿ç”¨ä¸¥æ ¼çš„äº‹ä»¶ç±»åž‹åŒ¹é…æ¨¡å¼ï¼š 1public Bus setStrictMode(final boolean strictMode) å¯ç”¨ä¸¥æ ¼åŒ¹é…æ¨¡å¼åŽï¼Œå‘é€å’ŒæŽ¥å—æ–¹æ³•çš„å‚æ•°ç±»åž‹å¿…é¡»ä¸¥æ ¼åŒ¹é…æ‰èƒ½æ”¶åˆ°äº‹ä»¶ï¼Œä¸¾ä¾‹ï¼š 123456789// setStrictMode(true) å¯ç”¨ä¸¥æ ¼æ¨¡å¼åŽï¼šBus.getDefault().post(new StringBuilder("Event"));// åªæœ‰ onEvent1 èƒ½æ”¶åˆ°äº‹ä»¶public void onEvent1(StringBuilder event)public void onEvent2(Object event)public void onEvent3(CharSequence event)public void onEvent4(Serializable event)public void onEvent5(Exception event)public void onEvent6(String event) å¯¹äºŽ post(event) å’Œ onEvent(EventType) ï¼Œä¸¥æ ¼æ¨¡å¼çš„åŒ¹é…è§„åˆ™æ˜¯å½“ä¸”ä»…å½“ event.getClass().equals(EventType) æ—¶æ‰èƒ½æ”¶åˆ°äº‹ä»¶ã€‚ è¯´æ˜Žï¼šå¯ç”¨ä¸¥æ ¼æ¨¡å¼æ•ˆçŽ‡ä¼šç¨å¾®é«˜ä¸€ç‚¹ï¼Œå› ä¸ºä¸ä¼šé€’å½’æŸ¥æ‰¾ event çš„çˆ¶ç±»å’Œå®žçŽ°çš„æŽ¥å£ï¼Œä½†æ˜¯ç”±äºŽ Bus å†…éƒ¨ä½¿ç”¨äº†ç¼“å­˜ï¼Œå¯¹äºŽåŒä¸€ä¸ªäº‹ä»¶ç±»åž‹ï¼Œå¹¶ä¸ä¼šé‡å¤æŸ¥æ‰¾ï¼Œæ‰€ä»¥å®žé™…ä½¿ç”¨å‡ ä¹Žæ²¡æœ‰å·®åˆ«ã€‚ StickyEventå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•å‘é€ Sticky äº‹ä»¶ï¼Œè¿™ç§äº‹ä»¶ä¼šä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå½“ä¸‹ä¸€ä¸ªæ³¨å†Œè€…æ³¨å†Œæ—¶ï¼Œä¼šç«‹å³æ”¶åˆ°ä¸Šä¸€æ¬¡å‘é€çš„è¯¥ç±»åž‹äº‹ä»¶ï¼Œæ¯ç§ç±»åž‹çš„äº‹ä»¶åªä¼šä¿ç•™ä¸€ä¸ªï¼Œ Sticky äº‹ä»¶ä½¿ç”¨ä¸¥æ ¼åŒ¹é…æ¨¡å¼ã€‚ 1public &lt;E&gt; void postSticky(E event) ä¸€èˆ¬ä¸éœ€è¦ä½¿ç”¨ Sticky äº‹ä»¶ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹å¯ä»¥ç”¨åˆ°ï¼Œæ¯”å¦‚ä¸€ä¸ªç½‘ç»œçŠ¶æ€ç›‘å¬æœåŠ¡ï¼Œä¼šä¸æ–­çš„å‘é€ç½‘ç»œçŠ¶æ€ä¿¡æ¯ï¼ŒæŽ¥å—è€…ä¸€æ—¦æ³¨å†Œå°±å¯ä»¥ç«‹å³æ”¶åˆ°ä¸€ä¸ªäº‹ä»¶ï¼Œå¯ä»¥çŸ¥é“å½“å‰çš„ç½‘ç»œçŠ¶æ€ã€‚ @BusEventè¿˜æœ‰ä¸€ä¸ªæ³¨è§£ @BusEvent å¯ç”¨äºŽæ ‡æ³¨æŸä¸ªç±»æ˜¯äº‹ä»¶ç±»ï¼Œè¿™ä¸ªåƒ @Override æ³¨è§£ä¸€æ ·ï¼Œçº¯æ ‡æ³¨ç”¨ï¼Œæ²¡æœ‰å…¶å®ƒç”¨é€”ï¼Œæ²¡æœ‰è¿è¡Œæ—¶æ¶ˆè€—ã€‚ å®žçŽ°æ•™ç¨‹ è·Ÿæˆ‘ä¸€èµ·å†™EventBusï¼ˆä¸€ï¼‰ è·Ÿæˆ‘ä¸€èµ·å†™EventBusï¼ˆäºŒï¼‰ è·Ÿæˆ‘ä¸€èµ·å†™EventBusï¼ˆä¸‰ï¼‰ è·Ÿæˆ‘ä¸€èµ·å†™EventBusï¼ˆå››ï¼‰ xBusä½¿ç”¨æ•™ç¨‹]]></content>
      <categories>
        <category>Android</category>
        <category>æ¡†æž¶</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>EventBus</tag>
        <tag>XBus</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidæ¡†æž¶ä¹‹è·¯â€”â€”EventBusçš„ä½¿ç”¨]]></title>
    <url>%2Fposts%2F6037db63.html</url>
    <content type="text"><![CDATA[ä¸€ã€ç®€ä»‹EventBusæ˜¯ç”±greenrobot ç»„ç»‡è´¡çŒ®çš„ä¸€ä¸ªAndroidäº‹ä»¶å‘å¸ƒ/è®¢é˜…è½»é‡çº§æ¡†æž¶ã€‚EventBusæ˜¯ä¸€ä¸ªAndroidç«¯ä¼˜åŒ–çš„publish/subscribeæ¶ˆæ¯æ€»çº¿ï¼Œç®€åŒ–äº†åº”ç”¨ç¨‹åºå†…å„ç»„ä»¶é—´ã€ç»„ä»¶ä¸ŽåŽå°çº¿ç¨‹é—´çš„é€šä¿¡ã€‚æ¯”å¦‚è¯·æ±‚ç½‘ç»œï¼Œç­‰ç½‘ç»œè¿”å›žæ—¶é€šè¿‡Handleræˆ–Broadcasté€šçŸ¥UIï¼Œä¸¤ä¸ªFragmentä¹‹é—´éœ€è¦é€šè¿‡Listeneré€šä¿¡ï¼Œè¿™äº›éœ€æ±‚éƒ½å¯ä»¥é€šè¿‡EventBuså®žçŽ°ã€‚ å®˜ç½‘åœ°å€ï¼šhttp://greenrobot.org/eventbus/ç¿»è¯‘ï¼šhttp://blog.csdn.net/poorkick/article/details/55099311 äºŒã€æ·»åŠ ä¾èµ–1compile &apos;org.greenrobot:eventbus:3.0.0&apos; ä¸‰ã€è§£é”æŠ€èƒ½ EventBusçš„ä¸‰è¦ç´  Eventï¼šäº‹ä»¶ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»åž‹çš„å¯¹è±¡ã€‚ Subscriberï¼šäº‹ä»¶è®¢é˜…è€…ï¼Œåœ¨EventBus3.0ä¹‹å‰æ¶ˆæ¯å¤„ç†çš„æ–¹æ³•åªèƒ½é™å®šäºŽonEventã€onEventMainThreadã€onEventBackgroundThreadå’ŒonEventAsyncï¼Œä»–ä»¬åˆ†åˆ«ä»£è¡¨å››ç§çº¿ç¨‹æ¨¡åž‹ã€‚è€Œåœ¨EventBus3.0ä¹‹åŽï¼Œäº‹ä»¶å¤„ç†çš„æ–¹æ³•å¯ä»¥éšä¾¿å–åï¼Œä½†æ˜¯éœ€è¦æ·»åŠ ä¸€ä¸ªæ³¨è§£@Subscribeï¼Œå¹¶ä¸”è¦æŒ‡å®šçº¿ç¨‹æ¨¡åž‹ï¼ˆé»˜è®¤ä¸ºPOSTINGï¼‰ã€‚ Publisherï¼šäº‹ä»¶å‘å¸ƒè€…ï¼Œå¯ä»¥åœ¨ä»»æ„çº¿ç¨‹ä»»æ„ä½ç½®å‘é€äº‹ä»¶ï¼Œç›´æŽ¥è°ƒç”¨EventBusçš„post(Object)æ–¹æ³•ã€‚å¯ä»¥è‡ªå·±å®žä¾‹åŒ–EventBuså¯¹è±¡ï¼Œä½†ä¸€èˆ¬ä½¿ç”¨EventBus.getDefault()å°±å¥½äº†ï¼Œæ ¹æ®postå‡½æ•°å‚æ•°çš„ç±»åž‹ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨è®¢é˜…ç›¸åº”ç±»åž‹äº‹ä»¶çš„å‡½æ•°ã€‚ EventBusçš„å››ç§çº¿ç¨‹æ¨¡åž‹ï¼ˆThreadModeï¼‰ POSTINGï¼ˆé»˜è®¤ï¼‰ï¼šå¦‚æžœä½¿ç”¨äº‹ä»¶å¤„ç†å‡½æ•°æŒ‡å®šäº†çº¿ç¨‹æ¨¡åž‹ä¸ºPOSTINGï¼Œé‚£ä¹ˆè¯¥äº‹ä»¶åœ¨å“ªä¸ªçº¿ç¨‹å‘å¸ƒå‡ºæ¥çš„ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°å°±ä¼šåœ¨è¿™ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´å‘å¸ƒäº‹ä»¶å’ŒæŽ¥æ”¶äº‹ä»¶åœ¨åŒä¸€ä¸ªçº¿ç¨‹ã€‚åœ¨çº¿ç¨‹æ¨¡åž‹ä¸ºPOSTINGçš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸­å°½é‡é¿å…æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå› ä¸ºå®ƒä¼šé˜»å¡žäº‹ä»¶çš„ä¼ é€’ï¼Œç”šè‡³æœ‰å¯èƒ½ä¼šå¼•èµ·åº”ç”¨ç¨‹åºæ— å“åº”ï¼ˆANRï¼‰ã€‚ MAINï¼šäº‹ä»¶çš„å¤„ç†ä¼šåœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œã€‚äº‹ä»¶å¤„ç†æ—¶é—´ä¸èƒ½å¤ªé•¿ï¼Œé•¿äº†ä¼šANRçš„ã€‚ BACKGROUNDï¼šå¦‚æžœäº‹ä»¶æ˜¯åœ¨UIçº¿ç¨‹ä¸­å‘å¸ƒå‡ºæ¥çš„ï¼Œé‚£ä¹ˆè¯¥äº‹ä»¶å¤„ç†å‡½æ•°å°±ä¼šåœ¨æ–°çš„çº¿ç¨‹ä¸­è¿è¡Œï¼Œå¦‚æžœäº‹ä»¶æœ¬æ¥å°±æ˜¯å­çº¿ç¨‹ä¸­å‘å¸ƒå‡ºæ¥çš„ï¼Œé‚£ä¹ˆè¯¥äº‹ä»¶å¤„ç†å‡½æ•°ç›´æŽ¥åœ¨å‘å¸ƒäº‹ä»¶çš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚åœ¨æ­¤äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ç¦æ­¢è¿›è¡ŒUIæ›´æ–°æ“ä½œã€‚ ASYNCï¼šæ— è®ºäº‹ä»¶åœ¨å“ªä¸ªçº¿ç¨‹å‘å¸ƒï¼Œè¯¥äº‹ä»¶å¤„ç†å‡½æ•°éƒ½ä¼šåœ¨æ–°å»ºçš„å­çº¿ç¨‹ä¸­æ‰§è¡Œï¼ŒåŒæ ·ï¼Œæ­¤äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ç¦æ­¢è¿›è¡ŒUIæ›´æ–°æ“ä½œã€‚ ä½¿ç”¨æ­¥éª¤ æ³¨å†Œï¼šEventBus.getDefault().register(this); è§£æ³¨å†Œï¼ˆä¸ºé˜²æ­¢å†…å­˜æ³„æ¼ï¼‰ï¼šEventBus.getDefault().unregister(this); æž„é€ å‘é€æ¶ˆæ¯ç±»ï¼š 123456789public class MessageEvent &#123; public String name; public String password; public MessageEvent(String name, String password) &#123; this.name = name; this.password = password; &#125;&#125; å‘å¸ƒæ¶ˆæ¯ï¼šEventBus.getDefault().post(new MessageEvent(â€œnameâ€,â€passwordâ€)); æŽ¥æ”¶æ¶ˆæ¯ï¼šå¯ä»¥æœ‰å››ç§çº¿ç¨‹æ¨¡åž‹é€‰æ‹© 1234@Subscribe(threadMode = ThreadMode.MAIN)public void messageEventBus(MessageEvent event)&#123; tv_result.setText("name:"+event.name+" passwrod:"+event.password);&#125; ç²˜æ€§äº‹ä»¶â€‹ ä¹‹å‰è¯´çš„ä½¿ç”¨æ–¹æ³•ï¼Œéƒ½æ˜¯éœ€è¦å…ˆæ³¨å†Œ(register)ï¼Œå†post,æ‰èƒ½æŽ¥å—åˆ°äº‹ä»¶ï¼›å¦‚æžœä½ ä½¿ç”¨postStickyå‘é€äº‹ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä¸éœ€è¦å…ˆæ³¨å†Œï¼Œä¹Ÿèƒ½æŽ¥å—åˆ°äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå»¶è¿Ÿæ³¨å†Œçš„è¿‡ç¨‹ã€‚â€‹ æ™®é€šçš„äº‹ä»¶æˆ‘ä»¬é€šè¿‡postå‘é€ç»™EventBusï¼Œå‘é€è¿‡åŽä¹‹åŽå½“å‰å·²ç»è®¢é˜…è¿‡çš„æ–¹æ³•å¯ä»¥æ”¶åˆ°ã€‚ä½†æ˜¯å¦‚æžœæœ‰äº›äº‹ä»¶éœ€è¦æ‰€æœ‰è®¢é˜…äº†è¯¥äº‹ä»¶çš„æ–¹æ³•éƒ½èƒ½æ‰§è¡Œå‘¢ï¼Ÿä¾‹å¦‚ä¸€ä¸ªActivityï¼Œè¦æ±‚å®ƒç®¡ç†çš„æ‰€æœ‰Fragmentéƒ½èƒ½æ‰§è¡ŒæŸä¸€ä¸ªäº‹ä»¶ï¼Œä½†æ˜¯å½“å‰æˆ‘åªåˆå§‹åŒ–äº†3ä¸ªFragmentï¼Œå¦‚æžœè¿™æ—¶å€™é€šè¿‡postå‘é€äº†äº‹ä»¶ï¼Œé‚£ä¹ˆå½“å‰çš„3ä¸ªFragmentå½“ç„¶èƒ½æ”¶åˆ°ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™åˆåˆå§‹åŒ–äº†2ä¸ªFragmentï¼Œé‚£ä¹ˆæˆ‘å¿…é¡»é‡æ–°å‘é€äº‹ä»¶ï¼Œè¿™ä¸¤ä¸ªFragmentæ‰èƒ½æ‰§è¡Œåˆ°è®¢é˜…æ–¹æ³•ã€‚â€‹ ç²˜æ€§äº‹ä»¶å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé€šè¿‡ postSticky å‘é€ç²˜æ€§äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶ä¸ä¼šåªè¢«æ¶ˆè´¹ä¸€æ¬¡å°±æ¶ˆå¤±ï¼Œè€Œæ˜¯ä¸€ç›´å­˜åœ¨ç³»ç»Ÿä¸­ï¼ŒçŸ¥é“è¢« removeStickyEvent åˆ é™¤æŽ‰ã€‚é‚£ä¹ˆåªè¦è®¢é˜…äº†è¯¥ç²˜æ€§äº‹ä»¶çš„æ‰€æœ‰æ–¹æ³•ï¼Œåªè¦è¢«register çš„æ—¶å€™ï¼Œå°±ä¼šè¢«æ£€æµ‹åˆ°ï¼Œå¹¶ä¸”æ‰§è¡Œã€‚è®¢é˜…çš„æ–¹æ³•éœ€è¦æ·»åŠ  sticky = true å±žæ€§ã€‚ æž„é€ å‘é€ä¿¡æ¯ç±»ï¼š 1234567public class StickyEvent &#123; public String msg; public StickyEvent(String msg) &#123; this.msg = msg; &#125;&#125; å‘å¸ƒæ¶ˆæ¯ï¼šEventBus.getDefault().postSticky(new StickyEvent(â€œæˆ‘æ˜¯ç²˜æ€§äº‹ä»¶â€)); æŽ¥æ”¶æ¶ˆæ¯ï¼šå’Œä¹‹å‰çš„æ–¹æ³•ä¸€æ ·ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ª sticky = true çš„å±žæ€§ã€‚ 1234@Subscribe(threadMode = ThreadMode.MAIN, sticky = true)public void onEvent(StickyEvent event)&#123; tv_c_result.setText(event.msg);&#125; æ³¨å†Œï¼š 1EventBus.getDefault().register(CActivity.this); è§£æ³¨å†Œï¼š 12EventBus.getDefault().removeAllStickyEvents();EventBus.getDefault().unregister(CActivity.class); ### å››ã€ä¸¾ä¸ªæ —å­ ä¸»çº¿ç¨‹å‘é€äº‹ä»¶ï¼š è‡ªå®šä¹‰äº‹ä»¶ï¼ˆç±»ä¼¼å®šä¹‰JavaBeanï¼‰ï¼ŒåŒ…å«ç”¨æˆ·çš„å§“åå’Œå¯†ç ï¼› 123456789101112131415161718192021222324252627282930313233343536public class UserEvent &#123; private String name; private String password; public UserEvent() &#123; &#125; public UserEvent(String name, String password) &#123; this.name = name; this.password = password; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password; &#125; @Override public String toString() &#123; return "UserEvent&#123;" + "name='" + name + '\'' + ", password='" + password + '\'' + '&#125;'; &#125;&#125; åœ¨onCreateæ–¹æ³•ä¸­æ³¨å†Œè®¢é˜…è€…ï¼Œåœ¨onDestroyä¸­è§£æ³¨å†Œã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142public class MainActivity extends AppCompatActivity &#123; @BindView(R.id.jump) Button mJump; @BindView(R.id.send) Button mSend; @BindView(R.id.tv_result) TextView mTvResult; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); ButterKnife.bind(this); //æ³¨å†Œè®¢é˜…è€… EventBus.getDefault().register(this); &#125; @OnClick(&#123;R.id.jump, R.id.send&#125;) public void onViewClicked(View view) &#123; switch (view.getId()) &#123; case R.id.jump: startActivity(new Intent(MainActivity.this, SecActivity.class)); break; case R.id.send: break; &#125; &#125; //å®šä¹‰å¤„ç†æŽ¥æ”¶çš„æ–¹æ³• @Subscribe(threadMode = ThreadMode.MAIN) public void userEventBus(UserEvent userEvent)&#123; mTvResult.setText(userEvent.toString()); &#125; @Override protected void onDestroy() &#123; super.onDestroy(); //æ³¨é”€æ³¨å†Œ EventBus.getDefault().unregister(this); &#125;&#125; åœ¨å¦ä¸€ä¸ªactivityä¸­å‘é€äº‹ä»¶ï¼Œè®©è®¢é˜…è€…èƒ½å¤ŸæŽ¥æ”¶ï¼› 123456789101112@OnClick(&#123;R.id.sendData, R.id.receive&#125;)public void onViewClicked(View view) &#123; switch (view.getId()) &#123; case R.id.sendData: //å‘é€äº‹ä»¶ EventBus.getDefault().post(new UserEvent("Mr.sorrow", "123456")); finish(); break; case R.id.receive: break; &#125;&#125; å®žçŽ°ç»“æžœï¼š å‘é€ç²˜æ€§äº‹ä»¶ï¼š MainActivityä¸­å‘é€ç²˜æ€§äº‹ä»¶ï¼› 1234case R.id.send: EventBus.getDefault().postSticky(new MessageEvent("ç²˜æ€§äº‹ä»¶", "urgent")); startActivity(new Intent(MainActivity.this, SecActivity.class)); break; SecActivityä¸­æŽ¥å—æ³¨å†Œå¹¶å¤„ç†ï¼› 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class SecActivity extends AppCompatActivity &#123; @BindView(R.id.sendData) Button mSendData; @BindView(R.id.receive) Button mReceive; @BindView(R.id.tv_receive) TextView mTvReceive; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_sec); ButterKnife.bind(this); &#125; @OnClick(&#123;R.id.sendData, R.id.receive&#125;) public void onViewClicked(View view) &#123; switch (view.getId()) &#123; case R.id.sendData: //å‘é€äº‹ä»¶ EventBus.getDefault().post(new UserEvent("Mr.sorrow", "123456")); finish(); break; case R.id.receive: //è¦æŽ¥æ”¶æ—¶å¼€å§‹æ³¨å†Œ EventBus.getDefault().register(SecActivity.this); break; &#125; &#125; //å¤„ç†äº‹ä»¶é€»è¾‘ @Subscribe(threadMode = ThreadMode.MAIN, sticky = true) public void receiveEventBus(MessageEvent messageEvent) &#123; mTvReceive.setText(messageEvent.toString()); &#125; @Override protected void onDestroy() &#123; super.onDestroy(); //è§£æ³¨å†Œ EventBus.getDefault().removeAllStickyEvents(); EventBus.getDefault().unregister(SecActivity.this); &#125;&#125; å®žçŽ°æ•ˆæžœ]]></content>
      <categories>
        <category>Android</category>
        <category>æ¡†æž¶</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>EventBus</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå¸¸ç”¨ä¸‰æ–¹æ¡†æž¶]]></title>
    <url>%2Fposts%2F4514f8cf.html</url>
    <content type="text"><![CDATA[1.ä¸‹æ‹‰åˆ·æ–°Android-Ptr-Comparison-Android ä¸‹æ‹‰åˆ·æ–°å¼€æºåº“å¯¹æ¯”ï¼Œéžå¸¸niceï¼ï¼ Android-PullToRefresh- æœ€ç»å…¸ã€æœ€å¤šäººç”¨çš„ä¸‹æ‹‰åˆ·æ–°ã€åŠ è½½æ›´å¤šã€‚ PullDownListView- ä¸€ä¸ªä¸‹æ‹‰åˆ·æ–°çš„æŽ§ä»¶ï¼Œå®žçŽ°äº†ä»¿å¾®ä¿¡ä¸‹æ‹‰ä¸­çœ¼ç›åŠ¨ç”»çš„æ•ˆæžœã€‚ DragTopLayout- å®žçŽ°æ•´ä¸ªlayoutä¸‹æ‹‰åˆ·æ–°ã€‚ ZrcListView- ä¸€ä¸ªé¡ºæ»‘åˆæ¼‚äº®çš„Androidä¸‹æ‹‰åˆ·æ–°ä¸ŽåŠ è½½æ›´å¤šåˆ—è¡¨ç»„ä»¶ï¼Œå¢žåŠ ä¸‹æ‹‰åˆ·æ–°åŠæ»šåŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½çš„åŠŸèƒ½ï¼›å¢žåŠ è¶Šç•Œå›žå¼¹æ•ˆæžœï¼›å¢žåŠ è‡ªå®šä¹‰åˆ—è¡¨é¡¹åŠ¨ç”»çš„åŠŸèƒ½ã€‚ TwitterCover-Android- Twitter Androidå®¢æˆ·ç«¯çš„ä¸‹æ‹‰å°é¢æ¨¡ç³Šæ•ˆæžœã€‚ android-Ultra-Pull-To-Refresh- å®žçŽ°æ•´ä¸ªlayoutä¸‹æ‹‰åˆ·æ–°ï¼Œæ²¡æœ‰åŠ è½½æ›´è¿‡ï¼ŒDemoï¼Œæºç åˆ†æžã€‚ StikkyHeader- ã€AndroidæŽ§ä»¶æºç ï¼šå¤´éƒ¨å›ºå®šçš„æŽ§ä»¶åˆ—è¡¨æ•ˆæžœã€‘è¿™æ˜¯ä¸€ä¸ªå¯ä»¥æ”¯æŒå¤´éƒ¨å›ºå®šçš„æŽ§ä»¶åˆ—è¡¨åŠŸèƒ½ï¼Œæºç StikkyHeaderï¼ŒStikkyHeaderæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨æ»šåŠ¨çš„æ—¶å€™å°†å¤´éƒ¨å›ºå®šçš„æŽ§ä»¶ï¼Œè¿˜å¯ä»¥å°†åŠ¨ç”»æ•ˆæžœå’ŒStikkyHeaderä¸€èµ·ä½¿ç”¨ï¼Œapiéžå¸¸ç®€å•ï¼Œ æ”¯æŒListView,RecyclerView,ScrollViewã€‚æ”¯æŒ2.3ä¸€ä¸‹è®¾å¤‡ä½¿ç”¨çš„StikkyHeader PullDownListView- å®žçŽ°äº†æ¨¡ä»¿å¾®ä¿¡çœ¼ç›ä¸‹æ‹‰æ•ˆæžœï¼Œæºç PullDownListViewï¼Œä¸‹æ‹‰åˆ·æ–°ï¼Œä¸Šæ‹‰åŠ è½½ï¼Œæ¨¡ä»¿å¾®ä¿¡çœ¼ç›ã€‚ CircleRefreshLayout- åˆä¸€ä¸ªä¸‹æ‹‰åˆ·æ–°çš„å®žçŽ°ï¼Œæ°´æ»´æ•ˆæžœã€‚ BGARefreshLayout-Android- å¤šç§ä¸‹æ‹‰åˆ·æ–°æ•ˆæžœã€ä¸Šæ‹‰åŠ è½½æ›´å¤šã€å¯é…ç½®è‡ªå®šä¹‰å¤´éƒ¨å¹¿å‘Šä½ï¼Œç›®å‰å·²ç»å®žçŽ°äº†å››ç§ä¸‹æ‹‰åˆ·æ–°æ•ˆæžœ:æ–°æµªå¾®åšä¸‹æ‹‰åˆ·æ–°é£Žæ ¼ã€æ…•è¯¾ç½‘ä¸‹æ‹‰åˆ·æ–°é£Žæ ¼ã€ç¾Žå›¢ä¸‹æ‹‰åˆ·æ–°é£Žæ ¼ã€ç±»ä¼¼qqå¥½å‹åˆ—è¡¨é»æ€§ä¸‹æ‹‰åˆ·æ–°é£Žæ ¼ã€‚ Pull-to-Refresh.Rentals-Android- æä¾›ä¸€ä¸ªç®€å•å¯ä»¥è‡ªå®šä¹‰çš„ä¸‹æ‹‰åˆ·æ–°å®žçŽ°ã€‚ Pull-to-Refresh.Tours- Taurusï¼Œå¾ˆç²¾ç¾Žçš„ä¸‹æ‹‰åˆ·æ–°ã€‚ ParallaxListView- æ¨¡ä»¿Pathçš„ä¸‹æ‹‰åˆ·æ–°ï¼ŒHeadå¤´éƒ¨å›¾ç‰‡ä¸‹æ‹‰æ”¾å¤§ã€‚ WaveRefreshForAndroid- ä¸‹æ‹‰åˆ·æ–°æ°´æ³¢çº¹åŠ¨ç”»ã€‚ CoordinatorLayoutDemos- æ”¶é›†äº†ä¸å°‘èµ„æºå†™äº†ä¸€ä¸ªåŸºäºŽCoordinatorLayoutå®žçŽ°çš„ä¸‹æ‹‰åˆ·æ–°æ•ˆæžœã€‚ Android_PullToRefreshLibrary_Collection- ä¸‹æ‹‰åˆ·æ–°å¼€æºåº“é›†é”¦ ã€‚ HitBlockRefresh- ä¸‹æ‹‰åˆ·æ–°ï¼šæ‰“ç –å—å’Œæ‰“å¦å…‹ã€‚ jd_tmall_refresh_demo- ä»¿å†™äº¬ä¸œã€å¤©çŒ«ä¸‹æ‹‰åˆ·æ–°ã€‚ android-Ultra-Pull-To-Refresh- ä¸‹æ‹‰åˆ·æ–°æ¡†æž¶ï¼Œéžå¸¸å¼ºå¤§ï¼Œå¯æ‰©å±•æ€§éžå¸¸å¼ºï¼Œå…¼å®¹å„ç§viewçš„ä¸‹æ‹‰åˆ·æ–°äº‹ä»¶ã€‚ 2.å«æ˜Ÿèœå•android-satellite-menu- ç‚¹å‡»ä¸»æŒ‰é’®ï¼Œä¼šå¼¹å‡ºå¤šä¸ªå›´ç»•ç€ä¸»æŒ‰é’®æŽ’åˆ—çš„å­æŒ‰é’®ï¼Œä»Žè€Œå½¢æˆä¸€ä¸ªå¼¹å‡ºå¼èœå•ã€‚å­æŒ‰é’®å¼¹å‡ºå’Œæ¶ˆå¤±çš„åŠ¨ç”»æ•ˆæžœéƒ½å¾ˆæ£’ã€‚è¿™ç§å¼¹å‡ºå¼èœå•æŒ‰é’®åº”ç”¨åœ¨Path appä¸­ã€‚ ArcMenu- å®žçŽ°å¼¹å‡ºå¼æŒ‰é’®ç¾¤ï¼ˆèœå•ï¼‰ã€‚ç‚¹å‡»ä¸»æŒ‰é’®ï¼Œä¼šåœ¨ä½æŒ‰é’®æ—è¾¹å¼¹å‡ºå¤šä¸ªæŒ‰é’®ï¼ˆèœå•ï¼‰ã€‚å¼¹å‡ºçš„æŒ‰é’®æœ‰ä¸¤ç§æŽ’åˆ—å½¢å¼ï¼Œä¸€ç§æ˜¯å›´ç»•ç€ä¸»æŒ‰é’®æˆåœ†å¼§å½¢æŽ’åˆ—ï¼Œä¸€ç§æ˜¯å’Œä¸»æŒ‰é’®å¹¶æŽ’æˆä¸€å­—åž‹æŽ’åˆ—ï¼Œ ä»¿Path 2.0 (for iOS)ã€‚ Radial Menu Widget- å®žçŽ°å„ç§åœ†å½¢æˆ–è€…åŠåœ†å½¢èœå•ï¼Œä»¥åŠåœ†å½¢è¿›åº¦æ¡ã€‚ android-circlebutton- åœ†å½¢æŒ‰é’®ï¼Œæœ‰åŠ¨ç”»ç‚¹å‡»æ•ˆæžœ CircularFloatingActionMenu- å«æ˜Ÿèœå•ã€‚ ElasticDownload- æŒºé…·çš„ä¸‹è½½è¿›åº¦æ¡ã€‚ android-snake-menu- ä»¿ Tumblr çš„ Android å¯æ‹–æ‹½è›‡å½¢åŠ¨ç”»èœå•ã€‚ 3.èŠ‚é€‰å™¨SegmentView- ç±»ä¼¼iOSçš„Segment ControlæŽ§ä»¶ï¼Œç¬¬ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ RadioGroup å®žçŽ°ï¼ŒOç½‘é¡µé“¾æŽ¥ã€‚ SHSegmentControl- ç±»ä¼¼iOSçš„Segment ControlæŽ§ä»¶ï¼Œæ­¤ç§æ–¹å¼çš„å¯å®šåˆ¶åŒ–æ›´å¥½ã€‚ android-segmentedradiobutton- åœ¨Androidä¸­å®žçŽ°ç±»ä¼¼iOSçš„åˆ†æ®µå•é€‰æŒ‰é’®ï¼ˆsegmented controlï¼‰ï¼Œæœ¬äººä»¥å‰é¡¹ç›®ä¸€ç›´ä½¿ç”¨ï¼Œå€¼å¾—æ‹¥æœ‰ã€‚ android-segmented-control- RadioGroupå®žçŽ°ç±»ä¼¼iosçš„åˆ†æ®µé€‰æ‹©(UISegmentedControl)æŽ§ä»¶ã€‚ 4.æ¨¡ç³Šæ•ˆæžœBlurNavigationDrawer- èƒŒæ™¯æ¨¡ç³Šçš„Navigation Drawerã€‚ 5.HUDä¸ŽToastandroid-UCToast- åœ¨ä¸ç”³è¯·ä»»ä½•æƒé™çš„æƒ…å†µä¸‹åœ¨ Android åº”ç”¨ä¸­å¼¹å‡ºæ‚¬æµ®çª—,å®žçŽ°æ–‡æ¡£ã€‚ sweet-alert-dialog- sweet-alert-dialogæ˜¯ä¸€æ¬¾æ¸…æ–°æ–‡è‰ºçš„ Android å¼¹çª—, çµæ„Ÿæ¥è‡ªäºŽ JS ç‰ˆçš„ SweetAlertã€‚ 6.è¿›åº¦æ¡easyloadingbtn- æ¨¡ä»¿äº†ä¸€ä¸ªDribbbleä¸Šçš„Material Designæ•ˆæžœï¼ŒçŽ¯å½¢loadingï¼Œ è¿›åº¦æ¡ã€è¿›åº¦åœˆã€‚ android-square-progressbar- ä¸€ä¸ªä¸é”™çš„æ–¹å½¢è¿›åº¦æ¡ã€‚ Radial Menu Widget- å®žçŽ°å„ç§åœ†å½¢æˆ–è€…åŠåœ†å½¢èœå•ï¼Œä»¥åŠåœ†å½¢è¿›åº¦æ¡ã€‚ AnimatedCircleLoadingView- ä¸€ä¸ªæœ‰é™ï¼æ— é™åŠ è½½åŠ¨ç”»æ•ˆæžœã€‚åŸºäºŽNils Bannerçš„android-watch-loading-animationè®¾è®¡å›¾ã€‚è¯¥è®¾è®¡æœ¬æ¥æ˜¯é’ˆå¯¹æ™ºèƒ½æ‰‹è¡¨çš„ã€‚ circular-progress-button- å¸¦åŠ¨æ€æ•ˆæžœçš„Button(æŒ‰é’®)å¯è¦æ¯”é™æ€çš„æŒ‰é’®ç‚«é…·çš„å¤šäº†ï¼Œå¤§å®¶çœ‹åˆ°æ•ˆæžœå›¾å°±çŸ¥é“äº† CircularBarPager- Androidå®žçŽ°çš„åŠ¨æ€æ•ˆæžœï¼Œä¸€ä¸ªæ•°å­—åœ†åœˆè¿›åº¦æ•ˆæžœï¼Œæºç CircularBarPagerï¼Œmaterial é£Žæ ¼çš„æ•°å­—åœ†åœˆè¿›åº¦æ˜¾ç¤ºåº“ï¼ˆapi10 +ï¼‰ã€‚ dotted-progress-bar- ä¸€ä¸ªå°æ¸…æ–°çš„è¿›åº¦æ¡ã€‚ WhorlView- ä¸€ä¸ªç‚«é…·çš„æ¼©æ¶¡åŠ è½½æ•ˆæžœè‡ªå®šä¹‰Viewã€‚ AVLoadingIndicatorView- AVLoadingIndicatorViewæ•´åˆäº†ä¸€äº›æ¼‚äº®çš„ Android åŠ¨ç”»åŠ è½½æ•ˆæžœã€‚ MagicProgressWidget- æ¸å˜çš„åœ†å½¢è¿›åº¦æ¡ä¸Žè½»é‡æ¨ªå‘è¿›åº¦æ¡ã€‚ GBSlideBar- GBSlideBarç±»ä¼¼uber/æ»´æ»´ç­‰appçš„æ»‘åŠ¨é€‰æ‹©å·¥å…·æ¡ã€‚ GifLoadingView- ä¸€äº›å¥½çœ‹çš„ loadingviewã€‚ HouseLoading- ä¸€ä¸ªæœ‰è¶£çš„androidåŠ è½½loadingåŠ¨ç”»ã€‚å®žçŽ°åŽŸç† 7.UIå…¶ä»–MixtureTextView- å¯Œæ–‡æœ¬ï¼Œæ”¯æŒAndroidå›¾æ–‡æ··æŽ’ã€æ–‡å­—çŽ¯ç»•å›¾ç‰‡ç­‰æ•ˆæžœã€‚ android-ActionQueue- Action Queue ç”¨äºŽæ‰§è¡Œæœ‰æ¬¡åºçš„é˜Ÿåˆ—æ“ä½œï¼Œæ¯”å¦‚æŒ‰æ¬¡åºå¼¹å‡ºå¯¹è¯æ¡†ï¼Œè¿™åœ¨ Android ä¸­å°¤å…¶æœ‰ç”¨ã€‚ WheelView-Android- WheelView-Android æ˜¯ä¸€æ¬¾å¼€æºçš„ Android æ»šåŠ¨é€‰æ‹©æŽ§ä»¶, é€‚ç”¨äºŽä¸å°‘åº”ç”¨åœºæ™¯ã€‚ Android Wheel- å¸¦æœ‰åˆ»åº¦çš„æ—‹è½¬å™¨ï¼šæ—¥åŽ†ã€ä¸‰çº§è”åŠ¨ã€‚ CharacterPickerView- å¯å®žçŽ°ä¸‰çº§è”åŠ¨çš„é€‰æ‹©å™¨ï¼Œé«˜ä»¿iOSçš„æ»šè½®æŽ§ä»¶,å¯å®žçŽ°å•é¡¹é€‰æ‹©ï¼Œå¹¶æ”¯æŒä¸€äºŒä¸‰çº§è”åŠ¨æ•ˆæžœã€‚ Highlight- Highlightä¸€æ¬¾å¯åº”ç”¨äºŽ Android åº”ç”¨ä¸Šçš„æŒ‡å‘æ€§åŠŸèƒ½é«˜äº®çš„åº“, å¯ä»¥å¿«é€Ÿçš„ç»™åº”ç”¨æ·»åŠ ä¸Šåº”ç”¨å¼•å¯¼çš„æ•ˆæžœã€‚ HeaderAndFooterRecyclerView- æ”¯æŒaddHeaderViewã€ addFooterViewã€åˆ†é¡µåŠ è½½çš„RecyclerViewè§£å†³æ–¹æ¡ˆ ã€‚ CleverRecyclerView- æ˜¯ä¸€ä¸ªåŸºäºŽRecyclerViewçš„æ‰©å±•åº“ï¼Œæä¾›äº†ä¸ŽViewPagerç±»ä¼¼çš„æ»‘åŠ¨æ•ˆæžœå¹¶ä¸”æ·»åŠ äº†ä¸€äº›æœ‰ç”¨çš„ç‰¹æ€§ã€‚ drag-select-recyclerview- å®žçŽ°äº†ç±»ä¼¼ Google Photos é£Žæ ¼çš„å›¾ç‰‡å¤šé€‰æ•ˆæžœã€‚ FlycoTabLayout- ä¸€ä¸ªAndroid TabLayoutåº“,ç›®å‰æœ‰ä¸¤ä¸ªTabLayout:SlidingTabLayoutã€CommonTabLayoutã€‚ AndroidChangeSkin- ä¸€ç§å®Œå…¨æ— ä¾µå…¥çš„ Android åº”ç”¨æ¢è‚¤æ–¹å¼ï¼Œæ”¯æŒæ’ä»¶å¼å’Œåº”ç”¨å†…æ¢è‚¤ï¼Œæ— éœ€é‡å¯ Activityã€‚ Lobsterpicker- Lobsterpicker ä¸º Android å¼€å‘è€…æä¾›äº†æ»¡è¶³ Material Design é£Žæ ¼çš„é¢œè‰²é€‰æ‹©å™¨ã€‚ FlycoRoundView- ä¸€ä¸ªæ‰©å±•åŽŸç”ŸæŽ§ä»¶æ”¯æŒåœ†è§’çŸ©å½¢æ¡†èƒŒæ™¯çš„åº“,å¯ä»¥å‡å°‘ç›¸å…³shapeèµ„æºæ–‡ä»¶ä½¿ç”¨ã€‚ FlowingDrawer- FlowingDrawer ä¸€ä¸ªå¼¹æ€§æ•ˆæžœçš„æŠ½å±‰èœå•ï¼Œå›¾ç‰‡æ˜¯æ¦‚å¿µå›¾ï¼Œå®žé™…æ•ˆæžœå®žçŽ°äº†70%ï¼ˆä¾§æ»‘èœå•ï¼‰ã€‚ TextSurface-æ˜¯ç”¨ Java å†™çš„ä¸€æ¬¾å€ŸåŠ©é…·ç‚«çš„åŠ¨ç”»æ•ˆæžœæ¥å®Œæˆæ¶ˆæ¯å±•ç¤ºçš„å¾®åž‹åŠ¨ç”»æ¡†æž¶ã€‚ android-animate-RichEditor-android-animate-RichEditoræ˜¯ä¸€æ¬¾æ”¯æŒå›¾ç‰‡æ’å…¥åŠ¨ç”»æ•ˆæžœçš„ Android å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ FlycoPageIndicator- android-animate-RichEditoræ˜¯ä¸€æ¬¾æ”¯æŒå›¾ç‰‡æ’å…¥åŠ¨ç”»æ•ˆæžœçš„ Android å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ AndroidMosaicLayout- é©¬èµ›å…‹æ•ˆæžœ Layout,ç£ç‰‡é£Žæ ¼View è‡ªé€‚åº”å¤§å°ã€‚ DropDownMenu- ä¸€ä¸ªå®žç”¨çš„å¤šæ¡ä»¶ç­›é€‰èœå•ï¼Œåœ¨å¾ˆå¤šAppä¸Šéƒ½èƒ½çœ‹åˆ°è¿™ä¸ªæ•ˆæžœï¼Œå¦‚ç¾Žå›¢ï¼Œçˆ±å¥‡è‰ºç”µå½±ç¥¨ç­‰ã€‚ Swipe-Deck- ä»¿ Tinder çš„å¯ä»¥å·¦å³æ»‘åŠ¨æ¶ˆé™¤å¡ç‰‡æ•ˆæžœçš„è‡ªå®šä¹‰æŽ§ä»¶ã€‚ IntlPhoneInput- ä¸€ä¸ªæ”¯æŒå›½é™…åŒ–çš„ç”µè¯å·ç è¾“å…¥çš„è‡ªå®šä¹‰æŽ§ä»¶ã€‚ AndroidUI4Web- AndroidUI4Webæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„WebAppæ¡†æž¶, åœ¨ç§»åŠ¨æµè§ˆå™¨ä¸Šæœ‰ä¸ŽåŽŸç”ŸAppä¸€è‡´çš„ä½“éªŒã€‚ SmoothCheckBox- SmoothCheckBoxå¸¦æœ‰åˆ‡æ¢åŠ¨ç”»çš„CheckBoxã€‚ AndroidTimelineViewx- AndroidTimelineViewxä»¿å¾®ä¿¡æœ‹å‹åœˆ æ—¶é—´è½´ã€‚ CityPicker- CityPickerä»¿ç¾Žå›¢ç­‰é€‰æ‹©åŸŽå¸‚åˆ—è¡¨ã€‚ material-intro- Material Design é£Žæ ¼çš„å¼•å¯¼é¡µã€‚ EmphasisTextView- æ”¯æŒéƒ¨åˆ†æ–‡å­—é«˜äº®çš„ TextViewã€‚ greedo-layout-for-android- æ·±åº¦å®šåˆ¶çš„ LayoutManagerï¼Œåœ¨æ˜¾ç¤ºç½‘æ ¼å¸ƒå±€çš„æ—¶å€™ä¼šè€ƒè™‘å±å¹•å®½é«˜æ¯”ã€‚ Rosie- å¯ä»¥è®©ä½ åˆ›å»ºéµå¾ª Clean Architecture çš„åº”ç”¨çš„æ¡†æž¶ã€‚ CreditCardView- ä¸€ä¸ªäº¤äº’å¾ˆèµžçš„ä¿¡ç”¨å¡è‡ªå®šä¹‰ Viewã€‚ android-md-core- Materialé£Žæ ¼bootstrapçš„æ¡†æž¶ã€‚ SwipeCardView- ä¸€ä¸ªå¸¦æ¸å˜å±‚å åŠ¨ç”»çš„å·¦å³æ»‘åŠ¨æ•ˆæžœï¼ˆç±»ä¼¼äºŽæŽ¢æŽ¢å·¦å³åˆ·è„¸ï¼‰ã€‚ SwipeSelector- å¯ä»¥å·¦å³æ»‘åŠ¨åˆ‡æ¢ item çš„ Selectorã€‚ ForegroundViews- ç±»ä¼¼äºŽ FrameLayout çš„æ”¯æŒçš„å‰æ™¯è‡ªå®šä¹‰ Viewã€‚ android-material-chips- Material Design çš„ Chips æŽ§ä»¶å®žçŽ°ã€‚ XhsEmoticonsKeyboard- è¡¨æƒ…é”®ç›˜è§£å†³æ–¹æ¡ˆã€‚ JKeyboardPanelSwitch- ä¸€å¥— Android é”®ç›˜é¢æ¿å†²çª, å¸ƒå±€é—ªåŠ¨çš„å¤„ç†æ–¹æ¡ˆã€‚ GestureLibray- ä¹å®«æ ¼è§£é”ã€‚ RecyclerItemDecoration- RecyclerViewç›¸å…³çš„ItemDecorstionä»ç„¶ä¿æŒé«˜åº¦å®šåˆ¶æ€§ï¼Œæ˜“ç”¨æ€§ã€‚ materiallogindemo- ä¸€ä¸ªç‚«é…·çš„Material Design é£Žæ ¼çš„ç™»å½•å’Œæ³¨å†Œé¡µé¢ ã€‚æ•™ç¨‹ ScrollablePanel- ä¸€ä¸ªäºŒç»´å¯æ‹–åŠ¨çš„é¢æ¿æŽ§ä»¶ï¼Œäº¤äº’åƒä¸€ä¸ªäºŒç»´çš„RecyclerViewï¼Œç”¨æ³•ä¹Ÿéžå¸¸ç®€å•å’ŒRecyclerViewçš„ç”¨æ³•åŸºæœ¬ä¸€æ ·ï¼Œæ¨ªå‘ç«–å‘æ»‘åŠ¨ä¹Ÿéƒ½å®žçŽ°äº†Viewçš„å¤ç”¨ã€‚ å¦‚æžœä½ æƒ³åšæˆ¿æ€ã€è®¡åˆ’è¡¨ã€å¾…åŠžäº‹é¡¹ã€è¯¾ç¨‹è¡¨ç­‰éœ€è¦ä¸€ä¸ªäºŒç»´çš„é¢æ¿çš„è¯ï¼Œè¿™ä¸ªæŽ§ä»¶åº”è¯¥æ˜¯æ¯”è¾ƒé€‚åˆçš„ã€‚ VerificationCodeView- å¯ç”¨äºŽåŠ¨æ€ç”ŸæˆéªŒè¯ç ï¼Œå¸¸è§äºŽé‡‘èžç±»appã€‚ ShimmerRecyclerView- ç±»ä¼¼ Facebook åŠ è½½æ—¶ï¼Œæ¡ç›®çš„é—ªçƒæ•ˆæžœï¼Œé…·é…·çš„ã€‚ StatusView- ç®€æ´ä¼˜é›…çš„ç½‘ç»œçŠ¶æ€æç¤ºã€‚ 8.åŠ¨ç”»Androidåº”ç”¨å¼€å‘ä¹‹æ‰€æœ‰åŠ¨ç”»ä½¿ç”¨è¯¦è§£- Androidåº”ç”¨å¼€å‘ä¹‹æ‰€æœ‰åŠ¨ç”»ä½¿ç”¨è¯¦è§£ã€‚ åŠ¨ç”»ç‰¹æ•ˆå¤§å…¨- Android åŠ¨ç”»ç‰¹æ•ˆå¤§å…¨ã€‚ SwitchLayout- å›½å†…å¼€å‘è€…ï¼Œ Androidçš„Activityåˆ‡æ¢åŠ¨ç”»ç‰¹æ•ˆåº“SwitchLayoutï¼Œè§†å›¾åˆ‡æ¢åŠ¨ç”»åº“ï¼Œåª²ç¾ŽIOSã€‚ ActivityOptionsICS- ä¸€ä¸ªä½Žç‰ˆæœ¬activityåŠ¨ç”»å…¼å®¹åº“â€”â€”ActivityOptionsICSï¼Œå¯ä»¥å¾ˆå¥½çš„å®žçŽ°MDçš„åŠ¨ç”»æ•ˆæžœã€‚ SwipeBack- ä¸€ä¸ªå¯ä»¥é€šè¿‡æ‰‹åŠ¿è¿”å›žåˆ°ä¸Šä¸€ä¸ªActivityçš„å¼€æºåº“ï¼Œæ”¯æŒä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘è¿”å›žï¼Œæ”¯æŒå¤šä¸ªViewä¸ºChildã€‚ SpringIndicator- æ¨¡ä»¿Morning Routineçš„å¼•å¯¼é¡µæ•ˆæžœSpringIndicatorï¼›åŸºäºŽæ¨¡ä»¿çº¢ç‚¹æ‹–æ‹½çš„Demoå®žçŽ°ï¼šBezierDemoï¼›sampleä¸­ä½¿ç”¨åˆ° å¿«é€Ÿåˆ›å»ºViewPagerå’ŒListViewç­‰çš„ç¬¬ä¸‰æ–¹åº“ï¼šMultipleModelã€‚ XhsWelcomeAnim- å›½å†…å¼€å‘è€…ï¼Œ åŽä¸½é…·ç‚«æ¬¢è¿Žå¼•å¯¼ç•Œé¢ åŠ¨ç”»æ²¡æœ‰ä¹‹ä¸€ã€‚ Material-Animations- Materialé£Žæ ¼åŠ¨ç”»ï¼Œå¯ä»¥å®šä¹‰ä¸¤ä¸ªActivityä¹‹é—´çš„åŠ¨ç”»ã€‚ android-shapeLoadingView- android-shapeLoadingViewå®žçŽ°é«˜ä»¿æ–°ç‰ˆ58 åŠ è½½åŠ¨ç”»ï¼Œloadingã€‚ ä¸€ä¸ªç»šä¸½çš„loading- ä¸€ä¸ªç»šä¸½çš„loadingåŠ¨æ•ˆåˆ†æžä¸Žå®žçŽ°ã€‚ TransitionPlayer- ä¸€ä¸ª Transition åŠ¨ç”»æŽ§åˆ¶æŽ§åˆ¶åº“ï¼Œå¯ä»¥è®©ä½ å¾ˆè½»æ¾çš„åˆ›å»ºä¸€ä¸ªå¯äº¤äº’çš„åŠ¨ç”»ã€‚ loading-balls- loading-balls ä¸€æ¬¾æ”¯æŒé«˜åº¦é…ç½®çš„ Android åŠ è½½è¿›åº¦çƒã€‚ SogoLoading- ä»¿æœç‹—æµè§ˆå™¨åŠ è½½åŠ¨ç”»ï¼Œå®žçŽ°è¯´æ˜Žã€‚ ExplosionField- Androidä¸­View ç‚¸è£‚ç‰¹æ•ˆçš„å®žçŽ°åˆ†æžã€‚ AZExplosion- AZExplosionï¼šæ¨¡ä»¿ExplosionFieldçš„ç²’å­ç ´ç¢Žæ•ˆæžœã€‚ BrokenView-çŽ»ç’ƒç¢Žè£‚åŠ¨ç”»æ•ˆæžœã€‚ SwipeCardView- SwipeCardViewä¸€ä¸ªå¸¦æ¸å˜å±‚å åŠ¨ç”»çš„å·¦å³æ»‘åŠ¨æ•ˆæžœï¼ˆç±»ä¼¼äºŽæŽ¢æŽ¢å·¦å³åˆ·è„¸ï¼‰ã€‚ç±»ä¼¼SwipeCard CRAudioVisualizationView- æ°´æ³¢çº¹æ•ˆæžœçš„å£°éŸ³å¯è§†åŒ–è‡ªå®šä¹‰ Viewã€‚ LoadingDrawable- ä¸€äº›é…·ç‚«çš„åŠ è½½åŠ¨ç”»ï¼Œ å¯ä»¥ä¸Žä»»ä½•Viewé…åˆä½¿ç”¨ï¼Œä½œä¸ºåŠ è½½åŠ¨ç”»æˆ–è€…Progressbar, æ­¤å¤–å¾ˆé€‚åˆä¸ŽRecyclerRefreshLayout é…åˆä½¿ç”¨ä½œä¸ºåˆ·æ–°çš„loading åŠ¨ç”»ã€‚ Depth-LIB-Android-- ä¸€æ¬¾é…·ç‚«çš„ Android ç•Œé¢è¿‡æ¸¡åŠ¨ç”»æ•ˆæžœã€‚ SwipeCaptcha- è‡ªå®šä¹‰Viewï¼Œä»¿ä¸€ä¸ªæ–—é±¼webç«¯æ»‘åŠ¨éªŒè¯ç ã€‚åšæ–‡ AndroidAHRSView- æ˜¾ç¤ºé£žè¡Œå™¨å§¿æ€çš„AndroidæŽ§ä»¶ã€‚ Material-Animations- ç‚«é…·çš„Activityåˆ‡æ¢æ•ˆæžœï¼Œå…±äº«å…ƒç´ ã€‚ BGASwipeBackLayout-Android- ä¿®æ”¹ v4 åŒ…ä¸­ SlidingPaneLayout çš„æºç æ¥å®žçŽ°æ»‘åŠ¨è¿”å›žå¸ƒå±€ã€‚ android-snowfall- æ¼‚äº®çš„ä¸‹é›ªæ•ˆæžœã€‚ ViewSpreadTranslationController- ä¸¤è¡Œä»£ç æžå®šAndroidè§†å›¾æ‰©æ•£åˆ‡æ¢æ•ˆæžœã€‚ 9.ç½‘ç»œç›¸å…³9.1ç½‘ç»œè¿žæŽ¥â€‹ ion- ä¸€ä¸ªå¼‚æ­¥ç½‘ç»œè¯·æ±‚å’Œå›¾ç‰‡åŠ è½½çš„åº“ï¼Œä¸€ä¸ªåº“èƒ½æžå®šå‡ ä¹Žæ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ã€‚ â€‹ å¤šçº¿ç¨‹ä¸‹è½½- Android å®žçŽ°å¤šçº¿ç¨‹ä¸‹è½½ å®Œç¾Žä»£ç ã€‚ â€‹ opandroid- android p2pçš„å¼€æºå®žçŽ°ã€‚ â€‹ okio- squareå‡ºçš„Okioè¿™ä¸ªåº“ï¼Œå°¤å…¶æ“…é•¿å¤„ç†äºŒè¿›åˆ¶æ•°æ®ã€‚å¦‚æžœè§‰å¾—Javaçš„è¾“å…¥è¾“å‡ºæµå®žåœ¨å¤ªå¤æ‚å•°å—¦ï¼Œä¸å¦¨è¯•è¯•Okioã€‚ â€‹ okhttp- squareå‡ºçš„okhttpåº“ã€‚ â€‹ okhttp-OkGo- å…¨æ–°å®Œç¾Žæ”¯æŒRxJavaï¼Œæ¯”Retrofitæ›´ç®€å•æ˜“ç”¨ã€‚è¯¥åº“æ˜¯å°è£…äº†okhttpçš„æ ‡å‡†RESTfulé£Žæ ¼çš„ç½‘ç»œæ¡†æž¶ã€‚ â€‹ OkHttpPlus- OkHttp çš„ä¸€ä¸ªå·¥å…·ç±»å¼€æºé¡¹ç›®OkHttpPlusâ€”â€”æ”¯æŒGETã€POSTã€UIçº¿ç¨‹å›žè°ƒã€JSONæ ¼å¼è§£æžã€é“¾å¼è°ƒ ç”¨ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ ï¼ŒOkHttpPlusä»‹ç»ã€‚https://github.com/jeasonlzy/okhttp-OkGo â€‹ Android-Download-Manager-Pro- ä¸€ä¸ªä¸‹è½½ç®¡ç†åº“ï¼Œå¦‚æžœä½ çš„ App æœ‰å¤§é‡çš„ä¸‹è½½å·¥ä½œï¼Œè¿™ä¸ªåº“èƒ½å¸®åˆ°ä½ ã€‚ â€‹ FileDownloader- æ–‡ä»¶ä¸‹è½½å¼•æ“Žï¼Œç¨³å®šã€é«˜æ•ˆã€ç®€å•æ˜“ç”¨ã€‚ â€‹ jchat-android- ä¸€ä¸ªèŠå¤© App,å…·æœ‰å®Œå¤‡çš„å³æ—¶é€šè®¯åŠŸèƒ½,JChat çš„åŠŸèƒ½åŸºäºŽæžå…‰ JMessage SDK æ¥å¼€å‘ã€‚ â€‹ RxDownload- åŸºäºŽRxJavaå’ŒRetrofitæ‰“é€ çš„ä¸‹è½½å·¥å…·, æ”¯æŒå¤šçº¿ç¨‹ä¸‹è½½å’Œæ–­ç‚¹ç»­ä¼ , æ™ºèƒ½åˆ¤æ–­æ˜¯å¦æ”¯æŒæ–­ç‚¹ç»­ä¼ ç­‰åŠŸèƒ½ã€‚ 9.2ç½‘ç»œæµ‹è¯•â€‹ augmented-traffic-control- Facebookå®£å¸ƒå¼€æºç§»åŠ¨ç½‘ç»œæµ‹è¯•å·¥å…·ATCï¼Œè¯¥å·¥å…·æ”¯æŒåˆ©ç”¨Wi-Fiç½‘ç»œæ¨¡æ‹Ÿ2Gã€2.5Gã€3Gä»¥ åŠLTE 4Gç§»åŠ¨ç½‘ç»œçŽ¯å¢ƒï¼Œè®©æµ‹è¯•å·¥ç¨‹å¸ˆä»¬èƒ½å¤Ÿå¿«é€Ÿå¯¹æ™ºèƒ½æ‰‹æœºå’ŒAppåœ¨ä¸åŒå›½å®¶åœ°åŒºå’Œåº”ç”¨çŽ¯å¢ƒä¸‹çš„æ€§èƒ½è¡¨çŽ°è¿›è¡Œæµ‹ è¯•ã€‚ 10.å›¾åƒèŽ·å–glide- glide googleå‡ºå“ï¼Œä½¿ç”¨æ•™ç¨‹ã€GlidePaletteã€‚5 ä¸ªé¡¶çº§ Android å¼€æºåº“ Universal Image Loader- Universal Image Loader æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€å¯é«˜åº¦å®šåˆ¶çš„å›¾ç‰‡ç¼“å­˜ï¼Œç®€ç§°ï¼šUILï¼Œå¯ä»¥é«˜åº¦é…ç½®çš„ç½‘ç»œå›¾ç‰‡ç¼“å­˜åº“ï¼Œéžå¸¸çµæ´»ï¼Œç”¨æˆ·é‡æœ€å¤š ã€‚ picasso- picasso åŠŸèƒ½å•ä¸€ï¼Œæ²¡æœ‰ç¼“å­˜è¿‡æœŸï¼ŒåŒandroidQueryä¸€æ ·é“¾å¼è°ƒç”¨ï¼Œè½½å…¥æœ¬åœ°æ–‡ä»¶é€Ÿåº¦æ…¢ï¼ˆæ²¡æœ‰ç”Ÿæˆthumbnailsï¼‰ ,Picasso and Android-Universal-Image-Loader,å¦å¤–çš„ä¸€äº›è¯¸å¦‚è£å‰ªå›¾ç‰‡ï¼šPicasso.with(context) .load(url) .resize(50, 50) .centerCrop() .into(imageView)ã€‚ fresco- Facebook åˆæ”¾å‡ºçš„ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œä¸€ä¸ªç±»ä¼¼ Picasso, Glide çš„åº“ï¼Œä¸è¿‡æ¯”ä»–ä»¬åšçš„æ›´å¥½ã€‚ å¼ºçƒˆæŽ¨èï¼ï¼»Frescoé›†æˆç¤ºä¾‹ï¼½ï¼ˆhttps://github.com/liaohuqiu/fresco-demo-for-gradleï¼‰ã€‚ tape- ç±»ä¼¼äºŽå›¾ç‰‡åŠ è½½åº“ï¼ˆä¾‹å¦‚UILã€Picassoç­‰ï¼‰å®žçŽ°å¼‚æ­¥åŠ è½½ï¼Œä½†æ˜¯åŠ è½½çš„ä¸ä¸€å®šæ˜¯å›¾ç‰‡ã€‚ï¼ ImageLoader- ImageLoader ã€‚ Volley- Volley ç»¼åˆæ¡†æž¶,åŒ…å«å›¾ç‰‡éƒ¨åˆ†ï¼ŒVolleyä¸ŽPicassoçš„å¯¹æ¯” enif- enif ã€‚ wqgallery- wqgalleryå®žçŽ°ç±»ä¼¼å¾®ä¿¡é€‰æ‹©ç…§ç‰‡åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ç›¸æœºæˆ–ç›¸å†Œé€‰æ‹©ï¼Œæ”¯æŒå•å¼ è£å‰ªï¼Œæ”¯æŒå•é€‰æ¨¡å¼ã€æ”¯æŒå¤šé€‰æ¨¡å¼ã€‚ httplite- A android http libraryã€‚Androidç½‘ç»œæ¡†æž¶httpliteä½¿ç”¨æŒ‡å— PanoramaImageView- é€šè¿‡ç›‘å¬æ‰‹è…•æ—‹è½¬è¿›è¡Œäº¤äº’ï¼Œè‡ªåŠ¨æ»šåŠ¨å›¾ç‰‡ã€‚ 11.å“åº”å¼ç¼–ç¨‹RxAndroid- RxAndroidï¼šå‡½æ•°å“åº”å¼ç¼–ç¨‹ ï¼ŒRxJava- Rxå’ŒRxJavaæ–‡æ¡£ä¸­æ–‡ç¿»è¯‘é¡¹ç›®,RxJava è¯¦è§£ï¼ŒRxJavaèµ„æ–™æ±‡æ€»ã€‚Rxjava+Retrofit å®žçŽ°å…¨å±€è¿‡æœŸ Token è‡ªåŠ¨åˆ·æ–° 12.åœ°å›¾ç™¾åº¦åœ°å›¾- Androidç™¾åº¦åœ°å›¾ çº¿è·¯è§„åˆ’ï¼Œæ¨¡æ‹Ÿè¿åŠ¨è½¨è¿¹ï¼ŒåŠå…¨æ™¯æ•ˆæžœã€‚ AirMapView- æ”¯æŒå¤šä¸ªæœ¬åœ°åœ°å›¾æä¾›è€…åŒ…æ‹¬è°·æ­Œåœ°å›¾V2å’Œäºšé©¬é€Šåœ°å›¾V2ã€‚å¦‚æžœè®¾å¤‡æ²¡æœ‰ä»»ä½•å—æ”¯æŒçš„æœ¬åœ°åœ°å›¾æä¾›è€…,AirMapViewä¼šå›žé€€åˆ°åŸºäºŽwebçš„åœ°å›¾æä¾›è€…(ç›®å‰è°·æ­Œåœ°å›¾)ã€‚ 13.æ•°æ®åº“ORMLite- ORMLiteåšçš„æœ€æ£’ä½†æ˜¯å­¦ä¹ æˆæœ¬æœ‰ç‚¹å„¿é«˜ï¼ŒORMLiteçš„æ–‡æ¡£æœ‰ç‚¹å„¿çƒ‚ã€‚ SugarORM- SugarORMæ¯”è¾ƒè½»ä¾¿ï¼Œ æ”¯æŒHas a å’Œ Has manyæ˜ å°„ï¼Œä½†æ— æ³•ä¿å­˜é›†åˆï¼Œæ²¡æœ‰æ˜ å°„å…³ç³»ã€‚ GreenDAO- GreenDAOè¦å…ˆå»ºç«‹ä¸€ä¸ªjavaé¡¹ç›®æ¥ç”Ÿæˆå¯¹åº”çš„è¡¨ï¼Œä¸€å˜åŠ¨åˆè¦ç”Ÿæˆï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚ ActiveDriod- ActiveDriodä¹Ÿä¸é”™å®˜ç½‘ã€‚ ORMDroid- ormdroid ã€‚ sqlbrite- è‰¯å¿ƒä¼ä¸šSquareçš„åˆä¸€å¼€æºé¡¹ç›®ï¼Œå½“ä½ ä¸æƒ³ç»™ç”¨ContentProviderï¼Œåªæƒ³ç®€å•ç›‘å¬SQLiteè¡¨å¢žåˆ æ”¹çš„æ•°æ®å˜æ›´æ—¶å¯ä»¥è¯•è¯•å®ƒã€‚ sqlbrite- DBExecutor android ORMæ•°æ®åº“ 1.ä½¿ç”¨äº†è¯»å†™é”ï¼Œæ”¯æŒå¤šçº¿ç¨‹æ“ä½œæ•°æ®ã€‚ 2.æ”¯æŒæ“ä½œå¤šä¸ªæ•°æ®åº“ 3.æ”¯æŒäº‹åŠ¡ 4.ç¼“å­˜Sqlï¼Œç¼“å­˜è¡¨ç»“æž„ã€‚ Iron- ä¸€ä¸ªå¿«é€Ÿå’Œæ˜“ç”¨çš„ NoSQL æ•°æ®å­˜å‚¨æ¡†æž¶ã€‚ hawk- ä¸€ä¸ªå¿«é€Ÿå’Œæ˜“ç”¨çš„é”®å€¼å¯¹æ•°æ®å­˜å‚¨æ¡†æž¶ï¼Œæ”¯æŒAESåŠ å¯†ï¼Œæ”¯æŒSharedPreferencesæˆ–Sqliteå­˜å‚¨ï¼Œæ”¯æŒGsonè§£æžã€‚ AndroidKeyValueStore- ä¸€ä¸ªåŸºäºŽ SQLite çš„ Key/Value å­˜å‚¨æ¡†æž¶ã€‚ DBFlow- ä¸€ä¸ªé€Ÿåº¦æžå¿«ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œè€Œä¸”éžå¸¸ç®€å•çš„ Android æ•°æ®åº“ ORM åº“ï¼Œä¸ºä½ ç¼–å†™æ•°æ®åº“ä»£ç ,DBFlow å·²è¢«è¯æ˜Žæ˜¯æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚5 ä¸ªé¡¶çº§ Android å¼€æºåº“ 14.å›¾åƒæµè§ˆåŠå¤„ç†MPAndroidChart- MPAndroidChartæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å›¾è¡¨å¼€æºç±»åº“ï¼šæ›²çº¿å›¾ã€æŸ±å½¢å›¾ã€çŽ¯å½¢å›¾ã€‚ XCL-Charts- (å›½äººå¼€å‘)åŸºäºŽAndroid Canvasæ¥ç»˜åˆ¶å„ç§å›¾è¡¨,ä½¿ç”¨ç®€ä¾¿,å®šåˆ¶çµæ´»ã€‚ WilliamChart- ç»˜åˆ¶å›¾è¡¨çš„åº“ï¼Œæ”¯æŒLineChartViewã€BarChartViewå’ŒStackBarChartViewä¸‰ä¸­å›¾è¡¨ç±»åž‹ï¼Œå¹¶ä¸”æ”¯æŒ Android 2.2åŠä»¥ä¸Šçš„ç³»ç»Ÿã€‚ CropImageView- åŽŸç”ŸImageViewåªæ”¯æŒcenterCropï¼Œè¿™é‡Œæœ‰æ”¯æŒ9ä¸ªæ–¹å‘è£å‰ªçš„ImageViewã€‚ SimpleCropView- ä¸€ä¸ªAndroidçš„å›¾ç‰‡è£å‰ªåº“ï¼Œä½¿ç”¨ç®€å•ï¼Œæ˜“äºŽå®šåˆ¶ã€‚ DrawableView- DrawableViewå®žçŽ°ç”»æ¿åŠŸèƒ½ï¼Œå¯ä»¥æ”¹å˜ç”»ç¬”ç²—ç»†ï¼Œé¢œè‰²ï¼Œæ”¯æŒæ’¤é”€åŠŸèƒ½ã€‚ ImageCoverFlow- ImageCoverFlowæ•ˆæžœä¸é”™çš„ç”»å»ŠæŽ§ä»¶ å¯ä»¥è®¾ç½®ç”»å»Šä¸€æ¬¡å¯è§å›¾ç‰‡çš„å¼ æ•°ï¼Œå’Œå…¶ä»–ç¬¬ä¸‰æ–¹GalleryæŽ§ä»¶ä¸åŒçš„æ˜¯ï¼Œè¯¥æŽ§ä»¶ç›´æŽ¥ç»§æ‰¿è‡ªViewï¼Œè€Œä¸æ˜¯sdkä¸­çš„GalleryæŽ§ä»¶ã€‚ FancyCoverFlow- æ”¯æŒItemåˆ‡æ¢åŠ¨ç”»æ•ˆæžœçš„ç±»ä¼¼Gallery Viewã€‚æ”¹è¿›ç‰ˆæœ¬å¯ä»¥æ— é™è½®æ’­ï¼Œå¯ä»¥é€‰æ‹©è‡ªåŠ¨è½®æ’­æˆ–è€… æ‰‹åŠ¨æ»‘åŠ¨ã€‚ BGABanner-Android- demoä¸­æ¼”ç¤ºäº†å¼•å¯¼é¡µã€ä»¥åŠé€šè¿‡frescoã€android-async-httpã€gsonå®žçŽ°å¹¿å‘Šæ¡çš„è‡ªåŠ¨è½®æ’­æ•ˆæžœï¼ˆsplash ã€ ViewPageråˆ‡æ¢åŠ¨ç”»ï¼‰ ã€‚ RecyclerViewPager- é‡å†™åŽçš„ RecyclerViewPager å®Œå…¨ç»§æ‰¿è‡ªRecyclerViewï¼Œå¯ä»¥è‡ªå®šä¹‰è§¦å‘ç¿»é¡µçš„è·ç¦»ï¼Œå¯è‡ªå®šä¹‰ç¿»é¡µé€Ÿåº¦ï¼Œæ”¯æŒVerticalViewPagerï¼Œæ”¯æŒFragmentã€‚ StickerCamera- å¯ä»¥è¯´æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç›¸æœºã€å›¾ç‰‡ç¼–è¾‘çš„ APPï¼Œé›†æˆäº†å¤§éƒ¨åˆ†å¸‚é¢ä¸Šæœ‰çš„åŒç±» APP çš„åŠŸèƒ½ï¼Œè£å‰ªã€æ»¤é•œã€è´´çº¸åº”æœ‰å°½æœ‰ã€‚ demo6_PhotoRiver- å›¾ç‰‡æµåŠ¨æ˜¾ç¤ºçš„demoï¼Œå¯ä»¥ç‚¹å‡»æµåŠ¨ä¸­çš„å›¾ç‰‡æ”¾å¤§æ˜¾ç¤ºï¼ŒåŒå‡»ç©ºç™½å¤„å›¾ç‰‡ä»¥ä¹å®«æ ¼æŽ’åˆ—ã€‚ glide-transformations- ä¸€ä¸ªåŸºäºŽGlideçš„transformationåº“ï¼Œæ‹¥æœ‰è£å‰ªï¼Œç€è‰²ï¼Œæ¨¡ç³Šï¼Œæ»¤é•œç­‰å¤šç§è½¬æ¢æ•ˆæžœã€‚ ColoringLoading- ä¸€ä¸ªç”¨çº¯ä»£ç å®žçŽ°è‡ªåŠ¨ç»˜ç”»æ•ˆæžœåŠ¨ç”»çš„é¡¹ç›®ã€‚ SmartDrawing- ä¸€ä¸ªè½»é‡çº§çš„æ‰‹ç»˜æ¿ï¼ŒåŠ å…¥äº†ä¸€ç‚¹æˆªå›¾åŠŸèƒ½ã€‚è¿™åªæ˜¯ä¸€ä¸ªDemoã€‚å¹¶ä¸èƒ½ä½œä¸ºç±»åº“ï¼Œä¹Ÿä¸æ˜¯å®Œæ•´çš„é¡¹ç›®å·¥ç¨‹ï¼Œä»…ä¾›å­¦ä¹ æˆ–å‚è€ƒä½¿ç”¨ã€‚ SlidingCard- æ¼‚äº®çš„å¡ç‰‡æ»‘åŠ¨ç¿»é¡µç‰¹æ•ˆã€‚ LargeImage- åŠ è½½å¤§å›¾ å¯ä»¥é«˜æ¸…æ˜¾ç¤º10000*10000åƒç´ çš„å›¾ç‰‡ã€‚ GalleryFinal- è‡ªå®šä¹‰ç›¸å†Œï¼Œå®žçŽ°äº†æ‹ç…§ã€å›¾ç‰‡é€‰æ‹©ï¼ˆå•é€‰/å¤šé€‰ï¼‰ã€ è£å‰ªï¼ˆå•/å¤šè£å‰ªï¼‰ã€æ—‹è½¬ã€ImageLoaderæ— ç»‘å®šä»»ç”±å¼€å‘è€…é€‰ æ‹©ã€åŠŸèƒ½å¯é…ç½®ã€ä¸»é¢˜æ ·å¼å¯é…ç½®ã€‚GalleryFinalä¸ºä½ å®šåˆ¶ç›¸å†Œã€‚ AndroidAlbum- AndroidAlbumå›¾ç‰‡é€‰æ‹©å™¨ï¼š1ã€MVPç»“æž„è®¾è®¡ï¼›2ã€å·¥åŽ‚æ¨¡å¼å¯¹è½½å›¾æ¡†æž¶è¿›è¡Œå°è£…æŠ½è±¡ï¼Œæ–¹ä¾¿æ›¿æ¢å…¶ä»–è½½å›¾æ¡†æž¶ï¼›3ã€é—ªé€€æ—¥å¿—çš„æœé›†ï¼Œæ–¹ä¾¿æªBUGã€‚ uCrop- uCrop æ˜¯ Yalantis æŽ¨å‡ºçš„åˆä¸€æ¬¾åŠ›ä½œ, ç”¨äºŽè£å‰ª Android ç³»ç»Ÿä¸Šçš„å›¾ç‰‡, è‡´åŠ›äºŽæ‰“é€ æœ€ä½³çš„å›¾ç‰‡è£å‰ªä½“éªŒã€‚ crop-image-layout- crop-image-layoutï¼šå›¾ç‰‡è£åˆ‡å¸ƒå±€ã€‚ RenderscriptHistogramEqualization-RenderScript :ç®€å•è€Œå¿«é€Ÿçš„å›¾åƒå¤„ç† 15.è§†é¢‘éŸ³é¢‘å¤„ç†ijkplayer- Bç«™å¼€æºçš„è§†é¢‘æ’­æ”¾å™¨ï¼Œæ”¯æŒAndroidå’ŒiOSã€‚ DanmakuFlameMaster- è¿™é‡Œæ˜¯Androidä¸Šæœ€å¥½çš„å¼€æºå¼¹å¹•å¼•æ“ŽÂ·çƒˆç„°å¼¹å¹•ä½¿ã€‚ YouTubePlayerActivity- ä¸€ä¸ªå¯ä»¥æ’­æ”¾YouTubeè§†é¢‘çš„Activityï¼Œæ”¯æŒå±å¹•æ—‹è½¬ã€å£°éŸ³æŽ§åˆ¶ã€æ’­æ”¾å¤±è´¥å¤„ç†ã€å¯ä»¥è‡ªå®šä¹‰Activityå…³é—­åŠ¨ç”»ä»¥åŠåœ¨æ¨ªå±æ’­æ”¾çš„æ—¶å€™è‡ªåŠ¨éšè—status barã€‚ AndroidVideoPlayer- å¼€æºçš„ Android è§†é¢‘æ’­æ”¾å™¨ï¼Œæ”¯æŒ DLNAã€‚ Hide-Music-Player- HideéŸ³ä¹æ’­æ”¾å™¨ã€‚ JamsMusicPlayer- æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Android å¼€æºæ’­æ”¾å™¨, ä½œè€…å°†åŽŸæœ¬æ”¶è´¹çš„é¡¹ç›®æ‹¿å‡ºæ¥å¼€æº, å®žåœ¨ä»¤äººæ•¬ä½©ã€‚ RxAndroidAudior- RxAndroidAudiorç›®å‰æœ€é²æ£’çš„Androidå£°éŸ³å½•åˆ¶å’Œæ’­æ”¾å°è£…åº“äº†,è¯´æ˜Žã€‚ Timber- ä¸€æ¬¾éµå¾ªäº†Material Designå¹¶ä¸”è®¾è®¡ç²¾ç¾Žçš„æ’­æ”¾å™¨ Timber Music Playerï¼Œå·²ç»åœ¨google playä¸Šæž¶ã€‚ LandscapeVideoCamera- ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ Android è§†é¢‘å½•åˆ¶åº“, ä»…å…è®¸æ¨ªå±å½•åˆ¶, æä¾›ç»†ç²’åº¦æŽ§åˆ¶è§†é¢‘çš„è´¨é‡ä¸Žæ–‡ä»¶å¤§å°ã€‚ MovieHub- éžå¸¸æ¼‚äº®çš„ä¸€æ¬¾ Android Movie å·¥å…·ã€‚ LyricViewDemo- æ­Œè¯æ˜¾ç¤ºæŽ§ä»¶ï¼Œæ”¯æŒå¤šè¡Œæ˜¾ç¤ºã€æ‹–æ›³æ’­æ”¾ã€è‡ªåŠ¨è¯†åˆ«æ­Œè¯æ–‡ä»¶çš„ç¼–ç ã€‚ 16.æµ‹è¯•åŠè°ƒè¯•DevelopQuickSetting- å¿«é€Ÿå¼€å¯å…³é—­å¼€å‘è€…è®¾ç½®çš„å·¥å…·ï¼Œæä¾›äº†appç•Œé¢å’Œæ¡Œé¢widgetï¼Œèƒ½å¿«é€Ÿæ‰“å¼€å…³é—­overdrawï¼Œlayout borderï¼Œgpu renderingï¼Œadb wifiï¼Œä¸ä¿å­˜activityå®žä¾‹ç­‰åŠŸèƒ½ã€‚ decompileandroid- åœ¨çº¿åç¼–è¯‘apkæ–‡ä»¶ã€‚ jadx- ä¸€ä¸ªAndroidåç¼–è¯‘ç¥žå™¨ï¼Œä¸åŒäºŽå¸¸è§çš„dex2jarï¼Œè¿™ä¸ªåç¼–è¯‘å™¨ç”Ÿæˆä»£ç çš„try/catchæ¬¡æ•°æ›´å°‘ï¼ŒViewä¹Ÿä¸å†æ˜¯æ•°å­—idäº†ï¼Œå¯è¯»æ€§æ›´é«˜ã€‚ Androguard- Androguardä½¿ç”¨Pythonå†™çš„ä¸€ç³»åˆ—é€†å‘å·¥å…·é›†ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§å“¦ï¼Œå¯¹é€†å‘å·¥ç¨‹æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è¿™ä¸ªç³»åˆ—ï¼Œæ•™ç¨‹ã€‚ logger- ä¸€ä¸ªç®€å•ã€æ¼‚äº®ã€åŠŸèƒ½å¼ºå¤§çš„Androidæ—¥å¿—ç¨‹åºã€‚ stf- WEB ç«¯æ‰¹é‡ç§»åŠ¨è®¾å¤‡ç®¡ç†æŽ§åˆ¶å·¥å…· STF çš„çŽ¯å¢ƒæ­å»ºå’Œè¿è¡Œï¼Œä½¿ç”¨è¯´æ˜Žã€‚ DecompileApk- ä¸€é”®åç¼–è¯‘ APKï¼Œè¾“å‡ºæ‰€æœ‰åç¼–è¯‘åŽçš„ä»£ç ã€èµ„æºï¼Œä½¿ç”¨æ–¹ä¾¿ã€‚ AppCrashTracker- ä¸€ä¸ªå¼‚å¸¸è¿½è¸ªå™¨ï¼Œå¯ä»¥ç”Ÿæˆä¸€ä¸ª JSON æ ¼å¼çš„æ—¥å¿—å¹¶å¯ä»¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ preferator- å¼€å‘è¾…åŠ©å·¥å…·ï¼Œå¸®åŠ©ä½ å¿«é€Ÿçš„åœ¨ Android ç«¯ä¿®æ”¹ SharedPreferenceï¼Œä»¥è¾¾åˆ°æµ‹è¯•çš„ç›®çš„ã€‚ 17.åŠ¨æ€æ›´æ–°çƒ­æ›´æ–°dexposed- æ·˜å® æ”¯ä»˜å®çš„Androidåº•å±‚æŠ€æœ¯å›¢é˜Ÿå³å°†ä¸ºDexposedå¼€æºé¡¹ç›®è´¡çŒ®ä¸€ä¸ªé‡è¦çš„æ‰©å±•èƒ½åŠ› â€”â€” æ–¹æ³•ç²’åº¦çš„å®Œæ•´æ›¿æ¢ï¼Œå¤§å¹…åº¦é™ä½ŽåŸºäºŽAOPæ–¹å¼æ›¿æ¢å¤§åž‹æ–¹æ³•çš„å¼€å‘æˆæœ¬ï¼Œä½¿ç”¨æ•™ç¨‹ï¼ŒAndroidå¹³å°å…Rootæ— ä¾µå…¥AOPæ¡†æž¶Dexposedä½¿ç”¨è¯¦è§£ã€‚Android Hotpatchç³»åˆ—ä¹‹-é¡¹ç›®ä»‹ç»-å®¢æˆ·ç«¯ä¾‹å­å®žçŽ°,æœåŠ¡å™¨ç®€æ˜“å®žçŽ°ã€‚çƒ­æ›´æ–°ã€‚ Xposed- Xposedæ˜¯ä¸€æ¬¾å¯ä»¥åœ¨ä¸ä¿®æ”¹APKçš„æƒ…å†µä¸‹å½±å“ç¨‹åºè¿è¡Œçš„æ¡†æž¶æœåŠ¡,Android Hookç¥žå™¨ï¼šXPosedå…¥é—¨ä¸Žç™»é™†åŠ«æŒæ¼”ç¤ºã€‚çƒ­æ›´æ–°ã€‚ code-push-å¤§å¾®è½¯æŽ¨å‡ºçš„ä¸€å¥—å¯ä»¥ä¸ºç”¨ React Native å’Œ Cordova å¼€å‘çš„ App æä¾›ä»£ç çƒ­æ›´æ–°çš„æ–¹æ¡ˆã€‚ DynamicAPK- å®žçŽ°Android Appå¤šapkæ’ä»¶åŒ–å’ŒåŠ¨æ€åŠ è½½ï¼Œæ”¯æŒèµ„æºåˆ†åŒ…å’Œçƒ­ä¿®å¤ã€‚ AndFixDemo- AndFixæ˜¯alibabaå‡ºå“çš„å¼€æºçƒ­æ›´æ–°æŠ€æœ¯ã€‚ gradle_plugin_android_aspectjx- é€šè¿‡Gradle Transformå’Œaspectjæ¥å®žçŽ°ä»£ç åŠ¨æ€ä¿®æ”¹ï¼Œä¸šåŠ¡é€»è¾‘æ•°æ®åŸ‹ç‚¹ã€æ€§èƒ½æ•°æ®ç»Ÿè®¡ç­‰ä¾µå…¥æ€§ä¿®æ”¹ä»Žæ­¤ä¸å†éœ€è¦ä¿®æ”¹ä¸šåŠ¡ä»£ç ï¼Œå®Œç¾Žè§£å†³Dexposedå…¼å®¹æ€§é—®é¢˜ï¼Œå®žçŽ°ä»£ç è‡ªåŠ¨æ’æ¡©ã€‚AspectJX-Demo RoboAspectJ- ç¾Žå›¢å‡ºå“çš„å¼€æºçƒ­æ›´æ–°æŠ€æœ¯ã€‚ 18.æ¶ˆæ¯æŽ¨é€ä¸Žå³æ—¶é€šè®¯å³æ—¶é€šè®¯å’Œsnså¼€æºé¡¹ç›®æ±‡æ€»- æºç æä¾›ï¼Androidå³æ—¶é€šè®¯å’Œsnså¼€æºé¡¹ç›®æ±‡æ€»ï¼Œgithubåœ°å€ã€‚ 19.å®Œæ•´é¡¹ç›®SuesNewsæ–°é—»å®¢æˆ·ç«¯- è…¾é£žæ–°é—»ï¼Œä¸€ä¸ªç¬¦åˆ Google Material Design çš„ Android æ ¡å›­æ–°é—»å®¢æˆ·ç«¯ ï¼Œæ–°é—»å®¢æˆ·ç«¯è¯´æ˜Žã€‚ æ–°é—»å®¢æˆ·ç«¯- Androidåº”ç”¨æºç æ¯”è¾ƒä¸é”™çš„æ–°é—»å®¢æˆ·ç«¯ï¼Œæœ¬é¡¹ç›®å¯åŠ¨å¼•å¯¼ç™»å½•æ³¨å†Œç”¨æˆ·ä¸­å¿ƒåˆ—è¡¨æ˜¾ç¤ºæ–‡ç« åˆ†é¡µä¸‹æ‹‰åˆ·æ–°æ–‡ç« æ”¶è—æ›´æ–°åé¦ˆç­‰æ–°é—»å®¢æˆ·ç«¯å¸¸è§çš„åŠŸèƒ½éƒ½æœ‰ï¼Œé¡¹ç›®åˆ†å±‚åˆç†ï¼Œä»£ç è´¨é‡è¾ƒé«˜ã€‚ materialistic- Material Desginé£Žæ ¼çš„Hacker Newså®¢æˆ·ç«¯ã€‚ Telegram- Telegram æ˜¯ä¸€æ¬¾ä¸“æ³¨äºŽé€Ÿåº¦ã€å®‰å…¨çš„çŸ­ä¿¡æ¯åº”ç”¨ï¼Œå¿«é€Ÿã€ç®€å•ã€å…è´¹ã€‚Telegram æ”¯æŒç¾¤ç»„èŠå¤©ï¼Œæœ€é«˜200äººï¼Œæœ€é«˜æ”¯æŒåˆ†äº«1GBçš„è§†é¢‘ï¼Œå…¶å®ƒå›¾ç‰‡ç­‰ç­‰æ›´æ˜¯ä¸åœ¨è¯ä¸‹ã€‚è€Œä¸”æ‰€æœ‰ä¿¡æ¯å…¨éƒ¨æ”¯æŒåŒæ­¥ã€‚ç”±äºŽé¢‘å‘çš„éšç§é—®é¢˜ï¼Œæ‰€ä»¥ Telegram ä¹Ÿå¾ˆæ³¨é‡é€šä¿¡å®‰å…¨ã€‚ SuZhouTong-client-for-android- è‹å·žé€šandroidå®¢æˆ·ç«¯ï¼Œéžå¸¸å¤šçš„UIæ•ˆæžœã€‚ ele_demo- ä»¿ã€é¥¿äº†ä¹ˆã€‘è®¢é¤è½¯ä»¶çš„ä¸€ä¸ªdemoã€‚ MD-BiliBili- Material Design ç‰ˆ BiliBili Android å®¢æˆ·ç«¯ã€‚ AisenWeiBo- Aisenå¾®åšæ˜¯æ–°æµªå¾®åšçš„ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯ï¼ŒUIéµå¾ªMaterial Designï¼šéµå¾ªMaterial Designã€å‘å¸ƒå¤šå›¾ã€ç¦»çº¿ä¸‹è½½ã€ç§ä¿¡ï¼ˆè§¦å±ç‰ˆã€é¢œè‰²ä¸»é¢˜åˆ‡æ¢ã€æ‰‹åŠ¿è¿”å›žï¼Œ4.4ã€5.0çŠ¶æ€æ å˜è‰²ã€ç¦»çº¿ç¼–è¾‘ï¼Œå®šæ—¶å‘å¸ƒå¤šå›¾ã€gifã€é•¿å¾®åšé¢„è§ˆã€‚FrescoDemoã€‚ å¿«é€’æŸ¥è¯¢- ä½¿ç”¨äº†çˆ±æŸ¥å¿«é€’www.ickd.cnçš„apiæŽ¥å£ï¼Œå¯ä»¥æŸ¥è¯¢ç”³é€šã€EMSã€é¡ºé£Žã€åœ†é€šã€ä¸­é€šã€éŸµè¾¾ã€å¤©å¤©ã€æ±‡é€šã€å…¨é”‹ã€å¾·é‚¦ã€å®…æ€¥é€ç­‰11ç§å¿«é€’çš„å•å·ä¿¡æ¯ï¼Œæ”¯æŒæ‰‹åŠ¨è¾“å…¥å•å·å’Œæ‰«æå•å·(çº¢ç±³æµ‹è¯•çš„æ—¶å€™æ‰«æå•å·æœ‰ç‚¹é—®é¢˜)ï¼Œå¯ä»¥ä¿å­˜å•å·æŸ¥è¯¢è®°å½•æ–¹ä¾¿ä¸‹æ¬¡æŸ¥è¯¢ï¼Œï¼Œå¦å¤–è¿˜åŒ…æ‹¬äº†ç½‘ç»œçŠ¶æ€åˆ¤æ–­ã€å¿«é€’è‡ªåŠ¨æ›´æ–°ã€è½¯ä»¶æ›´æ–°ç­‰åŠŸèƒ½ï¼Œé¡¹ç›®å®Œç¾Žè¿è¡Œï¼Œæœ‰å¾ˆè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šå’Œé€»è¾‘åˆ†å±‚ã€‚ SmartCall- SmartCall Android ä¼ä¸šé€šè®¯å½•ã€‚ Android-é«˜ä»¿å¤§ä¼—ç‚¹è¯„å®¢æˆ·ç«¯æºç - Android-é«˜ä»¿å¤§ä¼—ç‚¹è¯„å®¢æˆ·ç«¯æºç ã€‚ å…«ä¸ªAndroidé¡¹ç›®æºç - å…«ä¸ªAndroidé¡¹ç›®æºç ï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½ç›¸ä¿¡å¯ä»¥åœ¨å®žæˆ˜é¡¹ç›®ä¸­ç›´æŽ¥ä½¿ç”¨ï¼Œä¾›å¤§å®¶ä¸‹è½½å­¦ä¹ ï¼Œå¤§éƒ¨åˆ†é¡¹ç›®æ˜¯åŸºäºŽAndroid Studioå¼€å‘ï¼ŒIDEä¸ºEclipseçš„ç«¥éž‹å¯é€šè¿‡ç½‘ä¸Šæ•™ç¨‹è‡ªè¡Œè½¬æ¢ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚å¤§å®¶å¯ä»¥ä¸‹è½½ä¸‹æ¥å­¦ä¹ çœ‹çœ‹ï¼ç™¾åº¦äº‘ç›˜ä¸‹è½½åœ°å€ã€‚ minicat- ä¸€ä¸ªç®€æ´çš„é¥­å¦Appï¼Œæ”¯æŒAndroid 4.0ä»¥ä¸Šç‰ˆæœ¬ã€‚ SimplifyReader- ä¸€æ¬¾åŸºäºŽGoogle Material Designè®¾è®¡å¼€å‘çš„Androidå®¢æˆ·ç«¯ï¼ŒåŒ…æ‹¬æ–°é—»ç®€è¯»ï¼Œå›¾ç‰‡æµè§ˆï¼Œè§†é¢‘çˆ½çœ‹ ï¼ŒéŸ³ä¹è½»å¬ä»¥åŠäºŒç»´ç æ‰«æäº”ä¸ªå­æ¨¡å—ã€‚ GithubTrends- æ˜¯ä¸€ä¸ªç”¨æ¥çœ‹æŸ¥çœ‹ GitHub çƒ­é—¨é¡¹ç›®çš„ Android App, éµå¾ª Material Design, æ”¯æŒè®¢é˜… 50 å¤šç§ç¼–ç¨‹è¯­è¨€, 9 ç§é¢œè‰²ä¸»é¢˜åˆ‡æ¢, å¯åœ¨ä¸Šé¢æ”¶è—å–œæ¬¢çš„é¡¹ç›®ã€‚ jianshi- jianshiç®€è¯—æ˜¯å›½äººå¼€å‘çš„ä¸€ä¸ªç”¨äºŽè®°å½•æ–‡å­—ä¿¡æ¯çš„ Android å®Œæ•´åº”ç”¨, ä½œè€…ä»…ç”¨äº†ä¸€å¤©ä¾¿å°†å…¶å¼€å‘å‡ºæ¥, å¹¶å°†å¼€å‘çš„æµç¨‹è®°å½•æˆæ–‡æ”¾åˆ°äº†ç®€ä¹¦ä¸Šã€‚ BuildingBlocks- ç§¯æœ¨ï¼š ä¸€ä¸ªä»¥çŸ¥ä¹Žæ—¥æŠ¥ä½œä¸ºæ•°æ®å±•çŽ°å†…å®¹ï¼›ä»¥æŠ½å±‰èœå•ä½œä¸ºåŠŸèƒ½æ‰©å±•å…¥å£ï¼›ä¾å¾ª Material Design ä½œä¸ºä¸»å¯¼è®¾è®¡ UI çš„åº”ç”¨ã€‚ Douya- å¼€æºçš„ Material Design è±†ç“£å®¢æˆ·ç«¯ã€‚ TranslateApp- ä¸€ä¸ªå®žçŽ°ã€Žåˆ’è¯ç¿»è¯‘ã€åŠŸèƒ½çš„ Android å¼€æºåº”ç”¨ã€‚ likequanmintvp- åŸºäºŽMVPçš„Retrofit2(okhttp3)+rxjava+dagger2+greendao+glide+rtmpç›´æ’­ã€‚è¯¥é¡¹ç›®ç³»ä»¿å…¨æ°‘TVã€‚ 20.æ’ä»¶Android Studio æ’ä»¶å’Œå·¥å…·- 5ä¸ª æŽ¨èå‡ ä¸ªæœ‰ç”¨çš„ Android Studio æ’ä»¶å’Œå·¥å…·ï¼ˆButterKnifeã€selectorChapekã€GsonFormatã€ParcelableGeneratorã€LeakCanaryï¼‰ã€‚ 8 ä¸ªæœ€ä¼˜ç§€çš„ Android Studio æ’ä»¶- 8 ä¸ªæœ€ä¼˜ç§€çš„ Android Studio æ’ä»¶ï¼ˆH.A.X.Mï¼ˆç¡¬ä»¶åŠ é€Ÿæ‰§è¡Œç®¡ç†å™¨ï¼‰ã€Genymotionã€Android Drawable Importerã€Android ButterKnife Zeleznyã€Android Holo Colors Generatorã€Robotium Recorderã€jimu Mirrorã€Strings-xml-toolsï¼‰ã€‚ smalidea- ä¸€æ¬¾ IntelliJ IDEA/Android Studio çš„ smali æ’ä»¶ï½ž ï¼ŒSmalidea æ— æºç è°ƒè¯• Android åº”ç”¨ã€‚ gradle-fir-plugin- ä¸€ä¸ªä¸Šä¼ apkåˆ°firçš„gradleæ’ä»¶ï¼Œä½¿ç”¨è¯´æ˜Žã€‚ android-butterknife-zelezny- ä¸€ä¸ªButterKnifeçš„Android Studioæ’ä»¶, è¯¥æ’ä»¶å¯ä»¥è®©ä½ æ‰‹åŠ¨ç”Ÿæˆä¸Šè¿°æ³¨å…¥ä»£ç ã€‚ GradleDependenciesHelperPlugin- Gradle ä¾èµ–è‡ªåŠ¨è¡¥å…¨æ’ä»¶ã€‚ android-selector-intellij-plugin- å¯ä»¥æ ¹æ®æŒ‡å®šé¢œè‰²ç”ŸæˆSelector Drawableçš„æ’ä»¶ã€‚ 7ä¸ªæœ€ä½³çš„Androidæ¨¡æ‹Ÿå™¨- 7ä¸ªæœ€ä½³çš„Androidæ¨¡æ‹Ÿå™¨ã€‚ gradle-android-javadoc-plugin- å¯ä»¥ç”Ÿæˆ java doc çš„ Gradle æ’ä»¶ã€‚ gradle-android-junit-jacoco-plugin- å¯ä»¥ç”Ÿæˆä»£ç å•å…ƒæµ‹è¯•è¦†ç›–çŽ‡æŠ¥å‘Šçš„ Gradle æ’ä»¶ã€‚ gradle-android-apk-size-plugin- å¯ä»¥å°† Apk å¤§å°è®°å½•åˆ° CSV æ–‡ä»¶çš„ Gradle æ’ä»¶ã€‚ å‡ æ¬¾å®žç”¨çš„Android Studio æ’ä»¶- å‡ æ¬¾å®žç”¨çš„Android Studio æ’ä»¶ï¼š1ã€android-butterknife-zeleznyï¼›2ã€Gsonformatï¼šå¯æ ¹æ®jsonæ•°æ®å¿«é€Ÿç”Ÿæˆjavaå®žä½“ç±»ï¼›3ã€Android Postfix Completionï¼›4ã€AndroidAccessorsï¼›5ã€Lifecycle Sorterï¼šæ ¹æ®Activityæˆ–è€…fragmentçš„ç”Ÿå‘½å‘¨æœŸå¯¹å…¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä½ç½®è¿›è¡Œå…ˆåŽæŽ’åºï¼Œå¿«æ·é”®Ctrl + alt + Kï¼›6ã€JsonOnlineViewerï¼›7ã€CodeGlanceï¼›8ã€findBugs-IDEAï¼šå¸®ä½ ä¸€èµ·æ‰¾bugçš„ï¼›9ã€ADB WIFIï¼šä½¿ç”¨wifiæ— çº¿è°ƒè¯•ä½ çš„appï¼Œæ— éœ€rootæƒé™ã€‚ Leisure- é—²æš‡(Leisure)æ˜¯ä¸€æ¬¾é›†â€çŸ¥ä¹Žæ—¥æŠ¥â€ã€â€œæžœå£³ç§‘å­¦äººâ€ã€â€œæ–°åŽç½‘æ–°é—»â€ä»¥åŠâ€œè±†ç“£å›¾ä¹¦â€äºŽä¸€ä½“çš„é˜…è¯»ç±»Androidåº”ç”¨ã€‚ æžœå£³ã€çŸ¥ä¹Žå’Œè±†ç“£åœ¨å›½å†…æ‹¥æœ‰å¤§é‡ç”¨æˆ·ï¼Œè¿™äº›ç¤¾åŒºçš„ç”¨æˆ·æ¯å¤©éƒ½äº§ç”Ÿå¾ˆå¤šé«˜è´¨é‡å†…å®¹ã€‚é—²æš‡ä»¥å…¶ç®€ä»‹çš„é£Žæ ¼å°†è¿™å‡ å¤§ç¤¾åŒº çš„ä¼˜è´¨å†…å®¹æ•´åˆäºŽä¸€ä½“ï¼Œä½¿å¾—ç”¨æˆ·èƒ½æœ‰æ•ˆåœ°èŽ·å–è¿™äº›å†…å®¹ï¼Œå¤§å¤§èŠ‚çœäº†ç”¨æˆ·çš„æ—¶é—´ã€‚é…·å®‰ä¸‹è½½åœ°å€. LayoutFormatteræ’ä»¶- å¯è‡ªåŠ¨å°†ä¹±åºçš„å¸ƒå±€æ–‡ä»¶è¿›è¡Œé‡æ–°å±žæ€§æŽ’åºå¹¶æ ¼å¼åŒ–ï¼Œæ¯”å¦‚ style å’Œ android:id å¿…é¡»æŽ’åœ¨å‰é¢ï¼Œç´§æŽ¥ç€ layoutã€paddingï¼Œè€Œå€¼è®¾å®šå¦‚ text åªèƒ½æŽ’åœ¨æœ€åŽã€‚ 21.è‘—åæ¡†æž¶xUtils- xUtils åŒ…å«äº†å¾ˆå¤šå®žç”¨çš„androidå·¥å…·ã€‚æ”¯æŒå¤§æ–‡ä»¶ä¸Šä¼ ï¼Œæ›´å…¨é¢çš„httpè¯·æ±‚åè®®æ”¯æŒ(10ç§è°“è¯)ï¼Œæ‹¥æœ‰æ›´åŠ çµæ´»çš„ORMï¼Œæ›´å¤šçš„äº‹ä»¶æ³¨è§£æ”¯æŒä¸”ä¸å—æ··æ·†å½±å“ã€‚æœ€ä½Žå…¼å®¹android 2.2 (api level 8)ã€‚ç›®å‰xUtilsä¸»è¦æœ‰å››å¤§æ¨¡å—ï¼šDbUtilsæ¨¡å—ã€ViewUtilsæ¨¡å—ã€HttpUtilsæ¨¡å—ã€BitmapUtilsæ¨¡å—ã€‚ afinal- Afinalæ˜¯ä¸€ä¸ªandroidçš„iocï¼Œormæ¡†æž¶ï¼Œå†…ç½®äº†å››å¤§æ¨¡å—åŠŸèƒ½ï¼šFinalAcitivity,FinalBitmap,FinalDb,FinalHttpã€‚ ButterKnife- ButterKnifeæ˜¯ä¸€ä¸ªä¸“æ³¨äºŽAndroidç³»ç»Ÿçš„Viewæ³¨å…¥æ¡†æž¶ï¼Œè®©ä½ ä»Žæ­¤ä»Žè¿™äº›çƒ¦äººè‡ƒè‚¿çš„ä»£ç ä¸­è§£è„±å‡ºæ¥ï¼ŒButterKnifeâ€“Viewæ³¨å…¥æ¡†æž¶ã€‚5 ä¸ªé¡¶çº§ Android å¼€æºåº“ EventBus- EventBusæ˜¯ä¸€æ¬¾é’ˆå¯¹Androidä¼˜åŒ–çš„å‘å¸ƒ/è®¢é˜…äº‹ä»¶æ€»çº¿ã€‚ä¸»è¦åŠŸèƒ½æ˜¯æ›¿ä»£Intent,Handler,BroadCaståœ¨Fragmentï¼ŒActivityï¼ŒServiceï¼Œçº¿ç¨‹ä¹‹é—´ä¼ é€’æ¶ˆæ¯.ä¼˜ç‚¹æ˜¯å¼€é”€å°ï¼Œä»£ç æ›´ä¼˜é›…ã€‚ä»¥åŠå°†å‘é€è€…å’ŒæŽ¥æ”¶è€…è§£è€¦ã€‚xBus- xBus - ç®€æ´çš„EventBuså®žçŽ°ã€‚ Small- åšæœ€è½»å·§çš„è·¨å¹³å°æ’ä»¶åŒ–æ¡†æž¶ï¼Œç›®å‰å·²æ”¯æŒAndroidã€iOSä»¥åŠhtml5æ’ä»¶ã€‚å¹¶ä¸”ä¸‰è€…ä¹‹é—´å¯ä»¥é€šè¿‡åŒä¸€å¥—javascriptæŽ¥å£è¿›è¡Œé€šä¿¡ã€‚ LayoutCast- LayoutCastå¯ä»¥åœ¨åº”ç”¨ä¸é‡å¯çš„æƒ…å†µä¸‹ï¼Œå°†resæ–‡ä»¶å¤¹ä¸‹çš„æ”¹åŠ¨ç›´æŽ¥åŒæ­¥åˆ°æ‰‹æœºä¸Šã€‚ä½¿ç”¨LayoutCastï¼Œå¯ä»¥èŠ‚çº¦Androidå¼€å‘è€…çš„å¤§é‡ç¼–è¯‘ç­‰å¾…æ—¶é—´ï¼Œéžå¸¸é€‚åˆçœŸæœºè°ƒè¯•ç•Œé¢çš„æ—¶å€™ä½¿ç”¨ï¼ŒæŽ¨èæ¯ä¸€ä½å¼€å‘è€…å®‰è£…è¯¥åˆ©å™¨ã€‚BUCKå¾ˆå¿«ï¼Œä½†å…¥ä¾µæ€§å¼ºï¼Œé¡¹ç›®æ”¹åŠ¨å¤§ï¼ŒLayoutCastå¯¹é¡¹ç›®æ”¹åŠ¨å°ã€‚ retrofit- retrofitå°† REST API è½¬æ¢ä¸º Java æŽ¥å£ã€‚5 ä¸ªé¡¶çº§ Android å¼€æºåº“ Dagger2- Dagger 2 æ˜¯è‘—åçš„ä¾èµ–æ³¨å…¥åº“Daggerçš„ç»§æ‰¿è€…ï¼Œæˆ‘ä»¬å¼ºçƒˆæŽ¨èå®ƒã€‚æ–‡æ¡£ï¼Œ5 ä¸ªé¡¶çº§ Android å¼€æºåº“ 22.å…¶ä»–java-zhconverter- java-zhconverteræ˜¯ä¸€ä¸ªç®€ç¹ä½“ä¸­æ–‡äº’æ¢çš„Javaå¼€æºç±»åº“ã€‚ joda-time-android- ä¸€ä¸ªè¶…èµžçš„æ—¶é—´å¤„ç†çš„åº“ï¼ŒJoda-Time ï¼ ä»–èƒ½å¸®ä½ è½»æ¾å¤„ç†æ—¶åŒºï¼Œå¤„ç†æ—¶é—´åŠ å‡ï¼Œè®¡ç®—åˆ°æœŸæ—¶é—´ç­‰ç­‰åœºæ™¯ä¸‹çš„é—®é¢˜ã€‚javaç‰ˆæœ¬ AssistiveTouch- é…åˆAndroidæ‰‹æœºæ²‰æµ¸å¼éšè—è™šæ‹ŸæŒ‰é”®åŽå¿«æ·æ“ä½œ (Nexus5å±å¹•å˜å¤§äº†)ã€‚ S-Tools- S-Toolsä¸€ä¸ªå¯ä»¥å®žæ—¶æŸ¥çœ‹çš„CPUçŠ¶æ€å’Œæ‰‹æœºå„ç±»ä¼ æ„Ÿå™¨æ•°æ®ï¼Œè¿˜æœ‰ä¸€äº›ä¾‹å¦‚é¢œè‰²é€‰æ‹©ã€æŒ‡å—é’ˆå’Œè®¾å¤‡ä¿¡æ¯ç­‰åŠŸèƒ½ã€‚ JsBridge- æ¨¡ä»¿å¾®ä¿¡webviewçš„JsBridgeï¼Œå®‰å…¨æ–¹ä¾¿çš„å®žçŽ°jså’ŒJavaçš„äº’ç›¸è°ƒç”¨ï¼Œä¸»è¦é€šè¿‡loadUrlå’ŒshouldOverrideUrlå®žçŽ°ã€‚ Sample Of All Samples- æä¾›å¤§éƒ¨åˆ†Android5.0ç»„ä»¶çš„ç¤ºä¾‹åº”ç”¨ã€‚ Android-Package-Channel- ç¾Žå›¢ç½‘åšçš„æŠŠAndroidå¤šæ¸ é“æ‰“åŒ…å·¥å…·ï¼Œæ‰“åŒ…æ—¶é—´ç¼©çŸ­åˆ°ä¸€åˆ†é’Ÿï¼Œpythonè„šæœ¬ã€‚ fast-apk-packaging- Androidä¸éœ€è¦é‡æ–°ç¼–è¯‘æ‰“æ¸ é“åŒ…ã€‚ android_gradle_script- gradleæ‰¹é‡æ‰“åŒ…è„šæœ¬ï¼Œç”¨txté…ç½®ä¸€ä¸‹ï¼Œå°±å¯ä»¥æ”¯æŒå¤šä¸ªæ¸ é“æ‰“åŒ…ï¼Œé€‚åˆå›½å†…è¿™ç§åŠ¨ä¸åŠ¨ä¸Šç™¾ä¸ªæ¸ é“åŒ…çš„çŽ¯å¢ƒã€‚ç›®å‰æœ‰ä¸ªé—®é¢˜ï¼Œä¸€æ¬¡æ‰“åŒ…è„šæœ¬è¶…è¿‡80ä¸ªå°±ä¼šGCé—®é¢˜ã€‚ BatchPackApk- å…ç­¾åç›´æŽ¥æ‰“åŒ…å·¥å…·ã€‚ Androidå¤šæ¸ é“æ‰“åŒ…å·¥å…·Gradleæ’ä»¶- Androidå¤šæ¸ é“æ‰“åŒ…å·¥å…·Gradleæ’ä»¶ã€‚ Androidæ‰¹é‡æ‰“åŒ…æžé€Ÿç‰ˆ- ç”¨pythonå®žçŽ°çš„åœ¨META-INFç›®å½•å†…æ·»åŠ ç©ºæ–‡ä»¶çš„æ–¹å¼ï¼Œå®žçŽ°æ‰¹é‡å¿«é€Ÿæ‰“åŒ…Androidåº”ç”¨ã€‚ Gradle-Plugin-User-Guide-Chinese-Verision- Gradleæ’ä»¶ä½¿ç”¨æŒ‡å—ä¸­æ–‡ç‰ˆã€‚ gradle-guide.books- Android Gradle æ’ä»¶ä¸­æ–‡æŒ‡å—ï¼ˆGitBookï¼‰ã€‚ Android-package_tool- è¯¥å·¥ç¨‹ç”¨äºŽç¼–è¯‘å¤šæ¸ é“Androidåº”ç”¨ï¼Œæ›¿æ¢ç›¸åº”çš„æ ‡ç­¾ï¼Œç„¶åŽé‡æ–°æ‰“åŒ…ï¼Œç”¨perlè„šæœ¬å®žçŽ°ã€‚ å…°è´å£³å„¿- Androidå¤šæ¸ é“æ‰“åŒ…è§£å†³æ–¹æ¡ˆ(å…°è´å£³å„¿)ï¼Œeclipseæ’ä»¶ã€‚ Algorithms- å¸¸è§ç®—æ³•é—®é¢˜çš„Javaå®žçŽ°ã€‚ java-design-patterns- ä¸€ä¸ªå¸¸è§è®¾è®¡æ¨¡å¼çš„javaå®žçŽ°ã€‚ PreferenceInjector- SharedPreferenceæ³¨å…¥å¼€æºåº“ï¼ŒSharedPreference keyä¸ŽæŸä¸ªå˜é‡ç»‘å®šã€ç›‘å¬keyå˜åŒ–ã€åˆå§‹åŒ–keyéƒ½å¯ä»¥é€šè¿‡æ³¨è§£å®Œæˆã€‚ prettytime- ä¸€ä¸ªå®žç”¨çš„äººæ€§åŒ–çš„æ—¶é—´æ˜¾ç¤ºï¼Œæ¯”å¦‚ï¼šå‡ åˆ†é’Ÿå‰ï¼Œå‡ å¤©å‰ã€‚ Material-Movies- Material Design ä¸‹çš„Movie Appï¼ˆç”µå½±å±•ç¤ºï¼‰ï¼Œå¯ä¾›å­¦ä¹ ï¼Œæˆ–è€…ç›´æŽ¥äºŒæ¬¡å¼€å‘ã€‚ Clean-Contacts- å……æ»¡æŠ€æœ¯å«é‡çš„ä¸€ä¸ª Contact Appï¼ˆè”ç³»äººï¼‰ã€‚ RedEnvelopeAssistant- å®Œå…¨å…è´¹å¼€æºçš„æŠ¢çº¢åŒ…è½¯ä»¶ã€åšè¿™ä¸ªè½¯ä»¶çº¯ç²¹æ˜¯å‘çŽ°Androidçš„æ¨¡æ‹Ÿç‚¹å‡»ååˆ†å¥½çŽ©ï¼Œç„¶åŽé¡ºé“å†™äº†ä¸€ä¸ªï¼Œæœ‰æ­¤åŸºç¡€ï¼Œå¯ä»¥å†æ‰©å±•å…¶ä»–çš„å¾ˆå¤šæ¨¡æ‹Ÿç‚¹å‡»ç¨‹åº ã€‚ superCleanMaster- ä¸€é”®æ¸…ç†å¼€æºç‰ˆï¼ŒåŒ…æ‹¬å†…å­˜åŠ é€Ÿï¼Œç¼“å­˜æ¸…ç†ï¼Œè‡ªå¯ç®¡ç†ï¼Œè½¯ä»¶ç®¡ç†ç­‰ã€‚ LoadViewHelper- åˆ‡æ¢åŠ è½½ä¸­ï¼ŒåŠ è½½å¤±è´¥ï¼ŒåŠ è½½æˆåŠŸå¸ƒå±€ï¼Œå®šä¹‰ä¸€ä¸ªLoadViewHelperæ‰€æœ‰ç•Œé¢é€šç”¨ã€‚ android-best-practices- androidæœ€ä½³å®žè·µ Androidæœ€ä½³å®žè·µ- å®‰å“æœ€ä½³å®žè·µï¼ˆ1ï¼‰ï¼šå®‰å“å¼€å‘â€“ä¸­æ–‡ã€‚ Androidæœ€ä½³å®žè·µ- ä»ŽFuturiceå…¬å¸Androidå¼€å‘è€…ä¸­å­¦åˆ°çš„ç»éªŒã€‚ éµå¾ªä»¥ä¸‹å‡†åˆ™ï¼Œé¿å…é‡å¤å‘æ˜Žè½®å­ã€‚è‹¥æ‚¨å¯¹å¼€å‘iOSæˆ–Windows Phone æœ‰å…´è¶£ï¼Œ è¯·çœ‹iOS Good Practices å’Œ Windows client Good Practices è¿™ä¸¤ç¯‡æ–‡ç« ã€‚ å¦‚ä½•å®‰è£…ACRA- å¦‚ä½•å®‰è£…ACRA-ä¸€ä¸ªAndroidåº”ç”¨Crashè·Ÿè¸ªç³»ç»Ÿâ€”åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šã€‚ Android ocrè¯†åˆ«æ–‡å­—ä»‹ç»- Android ocrè¯†åˆ«æ–‡å­—ä»‹ç» ã€‚ DaVinci- DaVinciæ˜¯ä¸€ä¸ªé€‚ç”¨äºŽAndroid Wearå¹³å°çš„å›¾ç‰‡ä¸‹è½½å’Œç¼“å­˜libraryã€‚ Point-of-Android- Android ä¸€äº›é‡è¦çŸ¥è¯†ç‚¹è§£æžæ•´ç† ã€‚ AppStoreLibrary- æ£€æµ‹æ˜¯å¦åœ¨appstoreå®‰è£…äº†åº”ç”¨ï¼Œæœç´¢åº”ç”¨ã€‚ LeakCanary- åˆ©ç”¨æ­¤ç±»åº“ï¼ŒæŽ’æŸ¥å†…å­˜æ³„éœ²å˜å¾—éžå¸¸ç®€å•ï¼ŒLeakCanary ä¸­æ–‡ä½¿ç”¨è¯´æ˜Žï¼ŒLeakCanary: è®©å†…å­˜æ³„éœ²æ— æ‰€éå½¢ã€‚ anko- å¿«é€Ÿå¼€å‘æ¡†æž¶ã€‚ CommonAdapter- é€šè¿‡å¯¹äºŽåŽŸç”ŸAdapterçš„å°è£…ï¼Œäº§ç”Ÿäº†æ”¯æŒListViewï¼ŒGridViewï¼ŒRecyclerViewçš„ç®€å•é€šç”¨çš„Adapterã€‚è¿™ç§æ–¹å¼å°†itemå˜æˆç‹¬ç«‹çš„â€œè§†å›¾â€å¯¹è±¡ï¼Œæ–¹ä¾¿æ“ä½œï¼Œåˆå¢žåŠ äº†å¯æ‰©å±•æ€§ã€‚ MVPAndroidBootstrap- ä¸€ä¸ªAndroid MVP æ¨¡å¼å®žä¾‹é¡¹ç›®ã€‚ json2notification- ä¸€ä¸ªå¤šåŠŸèƒ½æ–¹ä¾¿å¥½ç”¨çš„notificationé€šçŸ¥æ é€šçŸ¥å¼€æºåº“ã€‚ barcodescanner- ä¸€ä¸ªå°è£…å¥½çš„åŸºäºŽzxingäºŒç»´ç æ‰«æåº“ã€‚ BGAQRCode-Android- ä¸€ä¸ªå¯é«˜åº¦å®šåˆ¶äºŒç»´ç æ‰«æç•Œé¢ã€ç”ŸæˆäºŒç»´ç ã€è¯†åˆ«å›¾ç‰‡äºŒç»´ç åº“ã€‚ mqtt- MQTT åè®® 3.1.1 ä¸­æ–‡ç¿»è¯‘ç‰ˆã€‚ Droid Plugin- DroidPlugin æ˜¯360æ‰‹æœºåŠ©æ‰‹åœ¨Androidç³»ç»Ÿä¸Šå®žçŽ°äº†ä¸€ç§æ–°çš„æ’ä»¶æœºåˆ¶:å®ƒå¯ä»¥åœ¨æ— éœ€å®‰è£…ã€ä¿®æ”¹çš„æƒ…å†µä¸‹è¿è¡ŒAPKæ–‡ä»¶,æ­¤æœºåˆ¶å¯¹æ”¹è¿›å¤§åž‹APPçš„æž¶æž„ï¼Œå®žçŽ°å¤šå›¢é˜Ÿåä½œå¼€å‘å…·æœ‰ä¸€å®šçš„å¥½å¤„ã€‚ JsonAnnotation- åˆ©ç”¨æ³¨è§£è‡ªåŠ¨ç”ŸæˆGsonâ€˜s Modelçš„åº“ã€‚ WeChatLuckyMoney- å¾®ä¿¡æŠ¢çº¢åŒ…æ’ä»¶ã€‚ android-support-23.2-sample- support åº“åœ¨ 23.2 ç‰ˆæœ¬æ–°å¢žå†…å®¹ç¤ºä¾‹é¡¹ç›®ã€‚ Sunoath- åŸºäºŽMVP+Retrofit+Material Designçš„Demoã€‚ ActivityRouter- ä¸€ä¸ªurlæ‰“å¼€activityçš„Routeråº“ï¼Œæ”¯æŒæŒ‡å®šå‚æ•°ç±»åž‹ï¼Œæ”¯æŒå‚æ•°transferï¼Œæ”¯æŒcallbackã€‚ AnalysisApp- ä¸€ä¸ªå¿«é€Ÿåˆ†æž Android App ä½¿ç”¨äº†å“ªäº› SDK çš„å·¥å…·ã€‚ AndroidLuaExample- å°è£…äº†æœ€æ–°Luaä»£ç çš„Androidåº“ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>æ¡†æž¶</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>æ¡†æž¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Cannot resolve method getSupportFragmentManager();]]></title>
    <url>%2Fposts%2F2ed74455.html</url>
    <content type="text"><![CDATA[åœ¨ä½¿ç”¨Fragmentçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°å°ä¼šç”¨åˆ°Fragmentç®¡ç†å™¨ï¼Œé‚£ä¹ˆåˆå§‹åŒ–Fragmentç®¡ç†å™¨çš„æ—¶å€™æˆ‘ä»¬ä¼šé‡åˆ°getSupportFragmentManager();æ–¹æ³•æ‰¾ä¸åˆ°çš„æƒ…å†µï¼Œè¿™é‡Œä¸»è¦æœ‰ä¸¤ä¸ªåŽŸå› ï¼š import android.support.v4.app.FragmentManager; æ²¡æœ‰å¯¼å…¥v4åŒ…ä¸‹çš„Fragmanager. Activityæ²¡æœ‰ç»§æ‰¿FragmentActivityã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ViewPagerè½®æ’­å›¾ï¼ˆæ–‡å­—&å›¾ç‰‡ï¼‰]]></title>
    <url>%2Fposts%2F3bedd12e.html</url>
    <content type="text"><![CDATA[Demoåœ°å€ï¼šMyViewPager ViewPagerå¸¸ç”¨æ¥å®žçŽ°å›¾ç‰‡çš„è½®æ’­ï¼Œæ¯”å¦‚æ·˜å®é¦–é¡µï¼Œä¼šæŠŠä¸€äº›ä¿ƒé”€çš„å•†å“çš„å›¾ç‰‡å’Œæè¿°ä¿¡æ¯æ¥å›žçš„æ’­æ”¾ï¼Œè¿™å°±æ˜¯å…¸åž‹çš„ä½¿ç”¨ViewPagerå®žçŽ°çš„ã€‚ ViewPagerå±žäºŽå¸ƒå±€ç®¡ç†å™¨ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡é¡µé¢ç¿»è½¬æŸ¥çœ‹å·¦å³çš„æ•°æ®ï¼Œä¸‹é¢é€šè¿‡ä¸€ä¸ªå®žä¾‹æ¥è®²è§£ViewPagerå®žçŽ°å›¾ç‰‡è½®æ’­å’Œæ‰‹åŠ¿æ»‘åŠ¨ã€‚ æ•ˆæžœå›¾ å¸ƒå±€æ–‡ä»¶ activity_main.xml123456789101112131415161718192021222324252627282930313233343536&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="180dp"&gt; &lt;android.support.v4.view.ViewPager android:id="@+id/vp" android:layout_width="match_parent" android:layout_height="180dp"/&gt; &lt;LinearLayout android:layout_width="match_parent" android:layout_height="wrap_content" android:layout_alignParentBottom="true" android:background="#6000" android:gravity="center_horizontal" android:orientation="vertical" android:padding="5dp"&gt; &lt;TextView android:id="@+id/tv_desc" android:layout_width="wrap_content" android:layout_height="wrap_content" android:textColor="#fff"/&gt; &lt;LinearLayout android:id="@+id/ll_point" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginTop="5dp" android:orientation="horizontal"&gt; &lt;/LinearLayout&gt; &lt;/LinearLayout&gt;&lt;/RelativeLayout&gt; å°åœ†ç‚¹é€‰æ‹©å™¨point_enable.xml 123456&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval"&gt; &lt;corners android:radius="8dp"/&gt; &lt;solid android:color="#fff"/&gt;&lt;/shape&gt; point_disable.xml 123456&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval"&gt; &lt;corners android:radius="8dp"/&gt; &lt;solid android:color="@android:color/darker_gray"/&gt;&lt;/shape&gt; point_selector.xml 12345&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;item android:state_enabled="true" android:drawable="@drawable/point_enable"/&gt; &lt;item android:state_enabled="false" android:drawable="@drawable/point_disable"/&gt;&lt;/selector&gt; MainActivityMianActivityçš„ä»£ç å¦‚ä¸‹ï¼Œä¸‹é¢çš„ä»£ç ä¸»è¦æ˜¯å®žçŽ°å›¾ç‰‡è½®æ’­å’Œæ‰‹åŠ¿æ»‘åŠ¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›é‡Œä¸€ä¸ªè§£å†³å›¾ç‰‡è½®æ’­åˆ°æœ€åŽä¸€ä¸ªæˆ–æ»‘åŠ¨åˆ°æœ€åŽä¸€ä¸ªï¼ˆæˆ–ç¬¬ä¸€ä¸ªæ—¶ï¼‰åœäº†ä¸‹æ¥çš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å¯¹ç”¨æˆ·ä½“éªŒæ¥è¯´æ˜¯å¾ˆç³Ÿç³•çš„ï¼Œæ‰€ä»¥è¦è§£å†³ã€‚åŒæ—¶æä¾›äº†æ¸©ä¹ äº†ä¸€ä¸‹MVCå¼€å‘æ¨¡åž‹ï¼Œè¿™ç§æ¨¡åž‹èƒ½å¤Ÿè®©ä»£ç æ˜¾å¾—ç»“æž„æ¸…æ™°ã€‚ä¸ºäº†ä¿è¯ä»£ç çš„è¿žè´¯æ€§ï¼ŒæŠŠä»£ç å†™åœ¨äº†ä¸€ä¸ªç±»ä¸­ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197package com.zm.myviewpager;import android.os.Bundle;import android.support.v4.view.PagerAdapter;import android.support.v4.view.ViewPager;import android.support.v7.app.AppCompatActivity;import android.view.View;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.TextView;import java.util.ArrayList;public class MainActivity extends AppCompatActivity implements ViewPager.OnPageChangeListener &#123; private ViewPager vp; private LinearLayout ll_point; private TextView tv_desc; private int[] imageResIds; //å­˜æ”¾å›¾ç‰‡èµ„æºidçš„æ•°ç»„ private ArrayList&lt;ImageView&gt; imageViews; //å­˜æ”¾å›¾ç‰‡çš„é›†åˆ private String[] contentDescs; //å›¾ç‰‡å†…å®¹æè¿° private int lastPosition; private boolean isRunning = false; //viewpageræ˜¯å¦åœ¨è‡ªåŠ¨è½®è¯¢ @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); //ä½¿ç”¨M-V-Cæ¨¡åž‹ //V--viewè§†å›¾ initViews(); //M--modelæ•°æ® initData(); //C--controlæŽ§åˆ¶å™¨(å³é€‚é…å™¨) initAdapter(); //å¼€å¯å›¾ç‰‡çš„è‡ªåŠ¨è½®è¯¢ new Thread() &#123; @Override public void run() &#123; isRunning = true; while (isRunning) &#123; try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; runOnUiThread(new Runnable() &#123; @Override public void run() &#123; //åœ¨å­çº¿ç¨‹ä¸­å¼€å¯å­çº¿ç¨‹ //å¾€ä¸‹ç¿»ä¸€é¡µï¼ˆsetCurrentItemæ–¹æ³•ç”¨æ¥è®¾ç½®ViewPagerçš„å½“å‰é¡µï¼‰ vp.setCurrentItem(vp.getCurrentItem() + 1); &#125; &#125;); &#125; &#125; &#125;.start(); &#125; /* åˆå§‹åŒ–è§†å›¾ */ private void initViews() &#123; //åˆå§‹åŒ–æ”¾å°åœ†ç‚¹çš„æŽ§ä»¶ ll_point = (LinearLayout) findViewById(R.id.ll_point); //åˆå§‹åŒ–ViewPageræŽ§ä»¶ vp = (ViewPager) findViewById(R.id.vp); //è®¾ç½®ViewPagerçš„æ»šåŠ¨ç›‘å¬ vp.setOnPageChangeListener(this); //æ˜¾ç¤ºå›¾ç‰‡æè¿°ä¿¡æ¯çš„æŽ§ä»¶ tv_desc = (TextView) findViewById(R.id.tv_desc); &#125; /* åˆå§‹åŒ–æ•°æ® */ private void initData() &#123; //åˆå§‹åŒ–å¡«å……ViewPagerçš„å›¾ç‰‡èµ„æº imageResIds = new int[]&#123;R.mipmap.aa, R.mipmap.bb, R.mipmap.cc, R.mipmap.dd, R.mipmap.ee&#125;; //å›¾ç‰‡çš„æè¿°ä¿¡æ¯ contentDescs = new String[]&#123; "å¿™ç¢Œçš„ç”Ÿæ´»ç–äºŽå½¼æ­¤è”ç³»ï¼Œä½†å´æ— æ³•å†²æ·¡å¯¹ä½ çš„æ€å¿µã€‚ç›¸ä¿¡æˆ‘ä»¬çš„å¿ƒç”µæ„Ÿåº”ï¼Œä¼šæŠŠæˆ‘æ¯ä¸€æ¬¡ç¥ˆç¥·å’Œç¥ç¦æ‚„æ‚„ä¼ é€ã€‚", "ä½ ä¼šå› ä¸ºä¸€é¦–æ­Œå–œæ¬¢ä¸Šä¸€ä¸ªäººï¼Œå› ä¸ºä¸€ä¸ªäººå–œæ¬¢ä¸€ä¸ªåŸŽå¸‚ï¼Œå› ä¸ºä¸€ä¸ªåŸŽå¸‚å–œæ¬¢ä¸Šä¸€ç§ç”Ÿæ´»ï¼Œç„¶åŽæˆä¸ºä¸€é¦–æ­Œï¼Œæƒ³å¿µæŸä¸ªäººã€‚", "æˆ‘ä»¬å¯¹äº²äººçš„æ€å¿µæ˜¯æ°¸ä¸ä¼šåœæ­¢çš„ï¼Œè€Œæ€å¿µå´æ˜¯å¤šç§çš„ï¼Œé˜¿å©†çš„ä¼¤ç—›ï¼Œå¦ˆå¦ˆçš„æ–‡å­—ï¼Œæˆ‘çš„å°å¥³å„¿æƒ…ç»ªï¼Œä¸ç®¡æ€Žæ ·ï¼Œå·²æ•…çš„äº²äººæ°¸è¿œæ´»åœ¨æˆ‘ä»¬çš„å¿ƒé‡Œã€‚", "æ¯ä¸€å¤©é†’æ¥ï¼Œä½ çš„æ¸…å½±å°±åœ¨æˆ‘çœ¼å‰è½¬ã€‚ä¸ç®¡æ‰‹é‡Œå¹²ä»€ä¹ˆäº‹ï¼Œä¸€ä¼šå„¿ï¼Œå‡†èµ°ç¥žå„¿äº†ï¼Œå‘†å‘†çš„åªæƒ³ä½ ï¼Œç®—ç€ä½ ä»€ä¹ˆæ—¶å€™å›žæ¥ã€‚", "åœ¨ä¸€å¹´çš„æ¯ä¸ªæ—¥å­ï¼Œåœ¨ä¸€å¤©æ¯ä¸ªå°æ—¶ï¼Œåœ¨ä¸€å°æ—¶çš„æ¯ä¸€åˆ†é’Ÿï¼Œåœ¨ä¸€åˆ†é’Ÿçš„æ¯ä¸€ç§’ï¼Œæˆ‘éƒ½åœ¨æƒ³ä½ ã€‚" &#125;; //ä¿å­˜å›¾ç‰‡èµ„æºçš„é›†åˆ imageViews = new ArrayList&lt;&gt;(); ImageView imageView; View pointView; //å¾ªçŽ¯éåŽ†å›¾ç‰‡èµ„æºï¼Œç„¶åŽä¿å­˜åˆ°é›†åˆä¸­ for (int i = 0; i &lt; imageResIds.length; i++) &#123; //æ·»åŠ å›¾ç‰‡åˆ°é›†åˆä¸­ imageView = new ImageView(this); imageView.setBackgroundResource(imageResIds[i]); imageViews.add(imageView); //åŠ å°ç™½ç‚¹ï¼ŒæŒ‡ç¤ºå™¨ï¼ˆè¿™é‡Œçš„å°åœ†ç‚¹å®šä¹‰åœ¨äº†drawableä¸‹çš„é€‰æ‹©å™¨ä¸­äº†ï¼Œä¹Ÿå¯ä»¥ç”¨å°å›¾ç‰‡ä»£æ›¿ï¼‰ pointView = new View(this); pointView.setBackgroundResource(R.drawable.point_selector); //ä½¿ç”¨é€‰æ‹©å™¨è®¾ç½®èƒŒæ™¯ LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(8, 8); if (i != 0) &#123; //å¦‚æžœä¸æ˜¯ç¬¬ä¸€ä¸ªç‚¹ï¼Œåˆ™è®¾ç½®ç‚¹çš„å·¦è¾¹è· layoutParams.leftMargin = 10; &#125; pointView.setEnabled(false); //é»˜è®¤éƒ½æ˜¯æš—è‰²çš„ ll_point.addView(pointView, layoutParams); &#125; &#125; /* åˆå§‹åŒ–é€‚é…å™¨ */ private void initAdapter() &#123; ll_point.getChildAt(0).setEnabled(true); //åˆå§‹åŒ–æŽ§ä»¶æ—¶ï¼Œè®¾ç½®ç¬¬ä¸€ä¸ªå°åœ†ç‚¹ä¸ºäº®è‰² tv_desc.setText(contentDescs[0]); //è®¾ç½®ç¬¬ä¸€ä¸ªå›¾ç‰‡å¯¹åº”çš„æ–‡å­— lastPosition = 0; //è®¾ç½®ä¹‹å‰çš„ä½ç½®ä¸ºç¬¬ä¸€ä¸ª vp.setAdapter(new MyPagerAdapter()); //è®¾ç½®é»˜è®¤æ˜¾ç¤ºä¸­é—´çš„æŸä¸ªä½ç½®ï¼ˆè¿™æ ·å¯ä»¥å·¦å³æ»‘åŠ¨ï¼‰ï¼Œè¿™ä¸ªæ•°åªæœ‰åœ¨æ•´æ•°èŒƒå›´å†…ï¼Œå¯ä»¥éšä¾¿è®¾ç½® vp.setCurrentItem(5000000); //æ˜¾ç¤º5000000è¿™ä¸ªä½ç½®çš„å›¾ç‰‡ &#125; //ç•Œé¢é”€æ¯æ—¶ï¼Œåœæ­¢viewpagerçš„è½®è¯¢ @Override protected void onDestroy() &#123; super.onDestroy(); isRunning = false; &#125; //--------------ä»¥ä¸‹æ˜¯è®¾ç½®ViewPagerçš„æ»šåŠ¨ç›‘å¬æ‰€éœ€å®žçŽ°çš„æ–¹æ³•-------- //é¡µé¢æ»‘åŠ¨ @Override public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) &#123; &#125; //æ–°çš„é¡µé¢è¢«é€‰ä¸­ @Override public void onPageSelected(int position) &#123; //å½“å‰çš„ä½ç½®å¯èƒ½å¾ˆå¤§ï¼Œä¸ºäº†é˜²æ­¢ä¸‹æ ‡è¶Šç•Œï¼Œå¯¹è¦æ˜¾ç¤ºçš„å›¾ç‰‡çš„æ€»æ•°è¿›è¡Œå–ä½™ int newPosition = position % 5; //è®¾ç½®æè¿°ä¿¡æ¯ tv_desc.setText(contentDescs[newPosition]); //è®¾ç½®å°åœ†ç‚¹ä¸ºé«˜äº®æˆ–æš—è‰² ll_point.getChildAt(lastPosition).setEnabled(false); ll_point.getChildAt(newPosition).setEnabled(true); lastPosition = newPosition; //è®°å½•ä¹‹å‰çš„ç‚¹ &#125; //é¡µé¢æ»‘åŠ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜ @Override public void onPageScrollStateChanged(int state) &#123; &#125; /** * è‡ªå®šä¹‰é€‚é…å™¨ï¼Œç»§æ‰¿è‡ªPagerAdapter */ class MyPagerAdapter extends PagerAdapter &#123; //è¿”å›žæ˜¾ç¤ºæ•°æ®çš„æ€»æ¡æ•°ï¼Œä¸ºäº†å®žçŽ°æ— é™å¾ªçŽ¯ï¼ŒæŠŠè¿”å›žçš„å€¼è®¾ç½®ä¸ºæœ€å¤§æ•´æ•° @Override public int getCount() &#123; return Integer.MAX_VALUE; &#125; //æŒ‡å®šå¤ç”¨çš„åˆ¤æ–­é€»è¾‘ï¼Œå›ºå®šå†™æ³•ï¼šview == object @Override public boolean isViewFromObject(View view, Object object) &#123; //å½“åˆ›å»ºæ–°çš„æ¡ç›®ï¼Œåˆåå›žæ¥ï¼Œåˆ¤æ–­viewæ˜¯å¦å¯ä»¥è¢«å¤ç”¨(å³æ˜¯å¦å­˜åœ¨) return view == object; &#125; //è¿”å›žè¦æ˜¾ç¤ºçš„æ¡ç›®å†…å®¹ @Override public Object instantiateItem(ViewGroup container, int position) &#123; //container å®¹å™¨ ç›¸å½“äºŽç”¨æ¥å­˜æ”¾imageView //ä»Žé›†åˆä¸­èŽ·å¾—å›¾ç‰‡ int newPosition = position % 5; //æ•°ç»„ä¸­æ€»å…±æœ‰5å¼ å›¾ç‰‡ï¼Œè¶…è¿‡æ•°ç»„é•¿åº¦æ—¶ï¼Œå–æ‘¸ï¼Œé˜²æ­¢ä¸‹æ ‡è¶Šç•Œ ImageView imageView = imageViews.get(newPosition); //æŠŠå›¾ç‰‡æ·»åŠ åˆ°containerä¸­ container.addView(imageView); //æŠŠå›¾ç‰‡è¿”å›žç»™æ¡†æž¶ï¼Œç”¨æ¥ç¼“å­˜ return imageView; &#125; //é”€æ¯æ¡ç›® @Override public void destroyItem(ViewGroup container, int position, Object object) &#123; //object:åˆšæ‰åˆ›å»ºçš„å¯¹è±¡ï¼Œå³è¦é”€æ¯çš„å¯¹è±¡ container.removeView((View) object); &#125; &#125;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ViewPager</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¹‹uriã€fileã€pathç›¸äº’è½¬åŒ–]]></title>
    <url>%2Fposts%2F6f91fcbd.html</url>
    <content type="text"><![CDATA[uri &amp; file äº’è½¬1File file = new File(new URI(uri.toString())); 1URI uri = file.toURI(); uri &amp; path äº’è½¬1234567private String getPath(Uri uri) &#123; String[] projection = &#123;MediaStore.Video.Media.DATA&#125;; Cursor cursor = managedQuery(uri, projection, null, null, null); int column_index = cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA); cursor.moveToFirst(); return cursor.getString(column_index); &#125; 1Uri uri = Uri.parse(path); file &amp; path äº’è½¬1String path = file.getPath() 1File file = new File(path)]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸°å®åä¸Šè‰åŽŸ2æ—¥æ¸¸çº¿è·¯è¡Œç¨‹]]></title>
    <url>%2Fposts%2Fabebff90.html</url>
    <content type="text"><![CDATA[ä¸°å®åä¸Šè‰åŽŸ2æ—¥æ¸¸çº¿è·¯è¡Œç¨‹ç¬¬ä¸€å¤©07ï¼š00 åŒ—äº¬çº¦å®šåœ°ç‚¹é›†åˆ 12ï¼š00 åˆ°è¾¾ç›®çš„åœ°ï¼Œ20äººä»¥ä¸Šå›¢é˜Ÿæˆ‘ä»¬å®‰æŽ’é©¬é˜Ÿæ¬¢è¿Žä»ªå¼ï¼Œéž­ç‚®æ¬¢è¿Žï¼ï¼ï¼ä½†æ™šä¸Šæ— æ³•è¿›è¡Œæ­¤æ´»åŠ¨ 12ï¼š10 åˆ†æˆ¿ï¼Œåˆé¤ 14ï¼š00 éª‘é©¬å‡ºå‘å‰å¾€å½±è§†åŸºåœ°æƒ…äººè°·ï¼ˆè‰åŽŸä¸Šçš„å¦ä¸€ç•ªæ™¯è‰²æœ›ä¸åˆ°è¾¹é™…çš„ç™½æ¡¦æž—ï¼‰ï¼Œå½±è§†æ‘ï¼ˆåŽŸæ±åŽŸå‘³è‰åŽŸä¸Šçš„è€æ‘åº„ï¼‰æƒ…äººè°·åŒ—å½±åŽ‚çš„å¤–æ™¯åœ°ï¼ˆç« å­æ€¡ä¸»æ¼”çš„ã€Šæˆ‘çš„çˆ¶äº²æ¯äº²ã€‹ï¼›é»„å®ä¸»æ¼”çš„ã€Š25ä¸ªå­©å­ä¸€ä¸ªçˆ¹ã€‹ï¼›ç”µè§†å‰§ã€Šæš–æ˜¥ã€‹ç­‰å¤šéƒ¨å½±è§†å‰§çš„æ‹æ‘„å¤–æ™¯åœ°ï¼‰ã€‚ è‰åŽŸçš„è½æ—¥ä¹Ÿæ˜¯å€¼å¾—ä¸€çœ‹çš„ç¾Žæ™¯ï¼Œä½ ä¼šæ„Ÿå—åˆ°ç¦»å¼€å–§åš£ä¸–ç•Œï¼ŒçœŸæ­£å›žå½’è‡ªç„¶çš„é‚£ä»½è‡ªç”±è‡ªåœ¨ï¼Œæ€¡ç„¶è‡ªå¾—ã€‚è§‚èµè‰åŽŸå¤•é˜³ï¼Œç„¶åŽå‡†å¤‡å…±è¿›è‰åŽŸæ™šé¤ã€‚ 19ï¼š00 æ™šé¤åƒçƒ¤å…¨ç¾Šã€ç¯ç«èšä¼šã€è§‚èµçƒŸèŠ±ã€ç¯ç«è·³èˆžï¼ŒKTVã€‚å¤§å®¶ä¸€èµ·å–é…’èŠå¤©ï¼Œå”±èµ·æˆ‘ä»¬å–œæ¬¢çš„æ­Œæ›²ï¼Œåœ¨æ¬¢å¿«çš„æ­Œå£°ä¸­è®©æˆ‘ä»¬èˆžåŠ¨èº«ä½“ï¼Œåº¦è¿‡ç¾Žå¥½çš„è‰åŽŸä¹‹å¤œã€‚ ç¬¬äºŒå¤©06ï¼š00 æ™¨è§‚æ—¥å‡º 07ï¼š30 æ—©é¤åŽï¼Œå‰å¾€è‰åŽŸå¨±ä¹åœºï¼ˆä»·å€¼180å…ƒå·²å«ï¼‰ï¼Œè¿›å…¥è’™å¤äººå®¶ï¼Œæ„Ÿå—è’™æ—é£Žæƒ…ï¼Œå–é©¬å¥¶é…’ï¼Œå‚åŠ è’™å¤ä»ªå¼ç¥­ç¥€æ•–åŒ…ï¼›å¯çŽ©æ»‘è‰ã€å°„ç®­ã€æ»‘ç´¢ã€é£žæ–§ã€é‡Žæˆ˜æå‡»ã€å¼¹è·³é£žäººã€å–·ç«ç¥žæžªã€æµ·ç›—èˆ¹ã€æ¿€æƒ…è½¬é©¬ã€æµæ˜Ÿç‚®è½¦ã€ç–¯ç‹‚æ–—ç‰›ã€è’™å¤äººå®¶ã€æ‚æŠ€è¡¨æ¼”ç­‰å¨±ä¹é¡¹ç›®ã€‚ 10ï¼š00å‰å¾€ç¾Žä¸½çš„è‰åŽŸæ»¦æ²³æºå¤´ã€é—ªç”µæ¹–ã€‘æ‹ç…§ã€çœ‹è‰åŽŸã€‚æ»¦æ²³ä¸Šæ¸¸æœ€å¤§çš„æ¹–ï¼Œå› å…¥æ¹–å‰çš„æ²³æµä¸ºé—ªç”µæ²³è€Œå¾—åã€‚åœ¨å¤©è‹è‹ã€é‡ŽèŒ«èŒ«çš„è‰åŽŸä¸Šé—ªçŽ°å‡ºè¿™æ ·æ•žäº®æ¸…æ¾ˆç¾Žä¸½çš„æ¹–æ°´ï¼Œå½“åœ°äººå«å®ƒé—ªç”µæ¹–ã€‚ æˆ–10:00å¼€å§‹å›¢å»ºæ´»åŠ¨ï¼Œå…è´¹å›¢å»ºè£…å¤‡ï¼šæ‹”æ²³ã€èƒŒå¤¹çƒã€è‰åœ°è¶³çƒã€è¢‹é¼ è·³è·³è¢‹ã€å¤šäººè·³ç»³ã€å·¨äººè„šæ­¥ã€æ‘¸çŸ³è¿‡æ²³ç –ã€ç è¡Œåƒé‡Œã€æ’•åç‰Œã€æŒ‡åŽ‹æ¿ç­‰æ´»åŠ¨ã€‚ 12ï¼š00 åˆé¤åŽè¿”ç¨‹åŒ—äº¬ï¼Œæ²¿é€”ä¸€è·¯ç¾Žæ™¯ç›¸ä¼´ï¼Œä¹Ÿä¸ä¼šè§‰å¾—æž¯ç‡¥ï¼Œä»Žæµ·æ‹”2000ç±³åˆ°å¹³åŽŸåœ°å¸¦ï¼Œå„è·¯ç¾Žæ™¯è®©æ‚¨å……åˆ†é¢†ç•¥ã€‚ ä½å®¿åƒé¤ æ ‡å‡†åž‹æ–¹æ¡ˆ 128å…ƒ/äºº3æ­£é¤+1æ—©é¤+1æ™šä½å®¿ï¼ˆè‰åŽŸé£Žå†œå®¶é™¢ ä¸¤æ˜Ÿæ ‡å‡†,åŒäºº/ä¸‰äººæ ‡é—´,ç‹¬ç«‹å«æµ´,çƒ­æ°´,æœ‰çº¿ç”µè§†,WiFiï¼‰+å…è´¹ç¯ç«ä¸“ä¸šéŸ³å“ è¶…å€¼åž‹æ–¹æ¡ˆ 168å…ƒ/äºº3æ­£é¤+1æ—©é¤+1æ™šä½å®¿ï¼ˆè‰åŽŸé£Žå†œå®¶é™¢ ä¸¤æ˜Ÿæ ‡å‡†,åŒäºº/ä¸‰äººæ ‡é—´,ç‹¬ç«‹å«æµ´,çƒ­æ°´,æœ‰çº¿ç”µè§†,WiFiï¼‰+å…è´¹ç¯ç«ä¸“ä¸šéŸ³å“+15é¡¹å¨±ä¹åœºå¥—ç¥¨ ç‰¹æƒ åž‹æ–¹æ¡ˆ 268å…ƒ/äºº3æ­£é¤+1æ—©é¤+1æ™šä½å®¿ï¼ˆè¿œå±±.åˆ«é™¢ å‡†å››æ˜Ÿé…’åº—æ ‡å‡†,åŒäºº/ä¸‰äººæ ‡é—´,ç‹¬ç«‹å«æµ´æ·‹æµ´æˆ¿,è§‚æ™¯æˆ¿,çƒ­æ°´,æœ‰çº¿ç”µè§†,WiFiï¼‰+å…è´¹ç¯ç«ä¸“ä¸šéŸ³å“+15é¡¹å¨±ä¹åœºå¥—ç¥¨ 15é¡¹å¨±ä¹å¥—ç¥¨å…¥åœºé—¨ç¥¨10å…ƒï¼›é«˜å±±æ»‘è‰20å…ƒï¼›ç¼†è½¦40å…ƒï¼›å¼¹è·³é£žäºº30å…ƒï¼›å°„ç®­20å…ƒï¼› çœŸäººCS30å…ƒï¼›ç«¹æž—è¿·å®«20å…ƒï¼›è’™å¤äººå®¶20å…ƒï¼›æ•–åŒ…ç¥ˆç¦20å…ƒï¼›æ¬¢ä¹è½¬é©¬20å…ƒï¼›ç™»æœˆé£žè½¦20å…ƒï¼›æ¡‘å·´æ±½çƒ20å…ƒï¼›å°æµ·ç›—èˆ¹20å…ƒï¼›è‰åŽŸé£žæ–§(6æŠŠ/äºº)20å…ƒï¼›é«˜å°”å¤«çƒ20å…ƒï¼›ä»·å€¼330å…ƒ è´¹ç”¨åŒ…å« ä½å®¿è´¹ï¼šé…’åº—åŒäººæˆ–ä¸‰äººæ ‡é—´ï¼› é¤è´¹ï¼šä¸‰æ­£é¤ä¸€æ—©é¤ï¼› æ´»åŠ¨è´¹ï¼šæ‹”æ²³ã€æ”¾é£Žç­ã€è‰åœ°è¶³çƒã€è¶£å‘³è¿åŠ¨ä¼šç­‰ï¼› ç¯ç«æ™šä¼šè´¹ï¼šæ»¡20äººå³å¯ç»„ç»‡ç¯ç«æ™šä¼šï¼› å…¨ç¨‹å¸æœºã€é¢†é˜Ÿé£Ÿå®¿è´¹ç­‰ï¼› åŒ»ç”¨è£…å¤‡ï¼šåŒ»è¯ç®±ã€æ€¥æ•‘åŒ…ç­‰ï¼ˆé¢†é˜ŸåŒ»è¯ç®±ä¸­åŒ…å«è¯å“ç§ç±»ï¼šäº‘å—ã€ç™½è¯å–·é›¾å‰‚ã€äº‘å—ç™½è¯ç²‰ã€é£Žæ²¹ç²¾ã€ç»¿è¯è†ã€çƒ«ä¼¤è†ã€ä½“æ¸©è®¡ã€åˆ›å¯è´´ã€ç»·å¸¦ã€çº±å¸ƒå—ã€é…’ç²¾ã€æ£‰ç­¾ã€åŒ»ç”¨èƒ¶å¸ƒã€å°å‰ªåˆ€ï¼‰å¦‚éœ€ç‰¹æ®Šè¯ç‰©è¯·æå‰è‡ªå¤‡ï¼› èµ é€å¨±ä¹å¥—ç¥¨ï¼š15é¡¹å¨±ä¹åœºå¥—ç¥¨ï¼ˆæ»‘è‰ã€å°„ç®­ã€æ»‘ç´¢ã€é£žæ–§ã€é‡Žæˆ˜æå‡»ã€å¼¹è·³é£žäººã€å–·ç«ç¥žæžªã€æµ·ç›—èˆ¹ã€æ¿€æƒ…è½¬é©¬ã€æµæ˜Ÿç‚®è½¦ã€ç–¯ç‹‚æ–—ç‰›ã€è’™å¤äººå®¶ã€æ‚æŠ€è¡¨æ¼”ç­‰ï¼‰ï¼Œæ­¤ç¥¨ä¸é€€ä¸æ¢ï¼›åä¸Šç‹¬å®¶å¸ç¯·è¥åœ°ã€é‡Žé¤åŸºåœ°ã€é‡Žå¤–çƒ§çƒ¤åŸºåœ°ï¼Œå¯æ ¹æ®æ‚¨çš„éœ€è¦å®‰æŽ’ã€‚ è´¹ç”¨ä¸å« éª‘é©¬ï¼šéª‘é©¬50å…ƒ/å°æ—¶ï¼Œç‰µé©¬è´¹20å…ƒ/å°æ—¶ï¼› çƒ¤å…¨ç¾Šï¼š30å…ƒ/æ–¤ï¼Œæ´»ç¾Šç§°é‡ï¼› ç§Ÿè½¦è´¹ç”¨ï¼š6-55åº§å„åž‹æ—…æ¸¸è½¦ï¼Œæ­£è§„è½¦ï¼Œæ‰‹ç»­é½å…¨ï¼› æ™¯ç‚¹é—¨ç¥¨ï¼šæƒ…äººè°· å…è´¹ã€æŸ³æ ‘æ²Ÿ70å…ƒ/äººã€åƒæ¾åæ£®æž—å…¬å›­100å…ƒ/äººã€å¤§æ±—è¡Œå®«90å…ƒ/äººã€é—ªç”µæ¹–30å…ƒ/äººã€è€æŽŒæ²Ÿ20å…ƒ/äººã€è‰åŽŸå¤©è·¯ å…è´¹ï¼›ä»¥ä¸Šé—¨ç¥¨ä½å®¿å’±å®¶éƒ½æœ‰æŠ˜æ‰£ç¥¨ã€‚ å‘ç¥¨ï¼šä¸å«å‘ç¥¨ï¼Œå¼€å‘ç¥¨éœ€è¦å¦å¤–åŠ 6%ç¨Žç‚¹ï¼› åä¸Šè‰åŽŸæ—…æ¸¸æ³¨æ„äº‹é¡¹1ã€åä¸Šé£Žå¤§ï¼Œæ—©æ™šæ¸©å·®å¤§ï¼Œå»ºè®®å¤šå¸¦äº›è¡£ç‰©ã€‚2ã€è‰åŽŸé˜³å…‰è¾ƒæ™’ï¼Œåº”æˆ´å¤ªé˜³é•œã€å¸½å­å¹¶æ¶‚æŠ¹é˜²æ™’éœœã€‚3ã€è‰åŽŸå¸¸æœ‰é›·é›¨å¤©æ°”ï¼Œé›¨å…·åº”å¿…å¤‡ã€‚4ã€åä¸Šè‰åŽŸæœ‰å¾ˆå¤šçš„æ‘åº„ï¼Œè™½ç„¶å·²ç»å¤šå¹´æŽ¥å¾…æ¸¸å®¢ï¼Œä½†æ˜¯å±±æ‘äººè´¨æœ´ã€å•çº¯çš„æ€§æ ¼è¿˜æ˜¯ç»™æ¸¸å®¢å¸¦æ¥å¾ˆå¤šçš„æ¸©é¦¨ï¼Œä½ æ•¬ä»–ä¸€å°ºï¼Œä»–æ•¬ä½ ä¸€ä¸ˆï¼Œåä¹‹ä¹Ÿæ˜¯ä¸€æ ·ã€‚æ‰€ä»¥å¤„äº‹è¦ä»¥å’Œä¸ºè´µï¼Œèƒ½é¥¶äººå¤„ä¸”é¥¶äººï¼Œåƒä¸‡ä¸å¯æ„Ÿæƒ…ç”¨äº‹ï¼Œæœ‰äº‹å¤šå’Œæ‚¨æ‰€ä½çš„é…’åº—æ—…é¦†ã€å†œå®¶å°é™¢çš„è´Ÿè´£äººå•†é‡ï¼Œæ±‚å…¶å¸®åŠ©è§£å†³ã€‚æ¥åä¸Šè‰åŽŸï¼Œå°½é‡é¿å…å‘¨æœ«äººå¤šçš„çš„æ—¶å€™ï¼Œæ ¹æ®ä»¥å¾€çš„ç»éªŒï¼Œå‘¨ä¸€åˆ°å‘¨å››å·äººç›¸å¯¹å°‘äº›ï¼Œå„æ–¹é¢çš„ä»·æ ¼ä¹Ÿç›¸å¯¹ä½Žä¸€äº›ã€‚5ã€å¼€å¿ƒä¹‹æ—¶è¦ç‰¹åˆ«æ³¨æ„ç®¡ç†å¥½è‡ªå·±çš„ä¸œè¥¿ã€‚ç”±äºŽæ—…æ¸¸åŒºäººå‘˜è¾ƒå¤šã€æ¯”è¾ƒæ‚ï¼Œè¦ç‰¹åˆ«å°å¿ƒã€‚éª‘é©¬æ˜¯å¾ˆå¤šäººå–œå¥½çš„å¨±ä¹å’Œå¥èº«æ´»åŠ¨ã€‚å¤–å‡ºéª‘é©¬æ˜¯ä¸€å®šè¦æ”¾å¥½è‡ªå·±çš„ä¸œè¥¿ï¼Œå°½é‡ä¸è¦å¸¦æ‰‹æœºå’Œé’±åŒ…ï¼Œå¦‚æžœå¸¦ä¸€å®šè¦æ”¾åœ¨å¦¥å–„çš„ã€ä¸æ˜“ä¸¢æŽ‰çš„åœ°æ–¹ã€‚å› ä¸ºéª‘é©¬ä¼šä¸Šä¸‹é¢ ç°¸ï¼Œå£è¢‹é‡Œçš„ä¸œè¥¿å¾ˆå®¹æ˜“æŽ‰å‡ºæ¥ï¼Œæ‰€ä»¥ï¼Œéª‘é©¬ä¸¢æ‰‹æœºã€é’±åŒ…ã€çœ¼é•œã€ç…§ç›¸æœºã€æ‰‹è¡¨ã€é’¥åŒ™ã€æ‰“ç«æœºã€é¦™çƒŸç­‰çš„äººä¸å°‘ã€‚6ã€æ”¾éž­ç‚®ã€å¼€è¶Šé‡Žè½¦ã€å››é©±ã€æ‘©æ‰˜è½¦ç­‰éƒ½è¦æ³¨æ„å®‰å…¨ï¼Œå®‰å…¨ç¬¬ä¸€ã€‚]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å½•éŸ³SoundRecording]]></title>
    <url>%2Fposts%2F58d30177.html</url>
    <content type="text"><![CDATA[æ•ˆæžœå›¾ é¦–é¡µ å½•éŸ³ æ’­æ”¾ å®žçŽ°å½•éŸ³çš„ Serviceè¿™ä¸ªç±»å¯ä»¥è¯´æ˜¯è¿™ä¸ªåŒ…çš„æ ¸å¿ƒäº†ï¼Œå¦‚æžœç†è§£äº†è¿™ä¸ª Serviceï¼Œå½•éŸ³è¿™ä¸€å—åŸºæœ¬å°±æ²¡ä»€ä¹ˆé—®é¢˜äº†ã€‚ å½•éŸ³ä¸»è¦æ˜¯åˆ©ç”¨ MediaRecoder è¿™ä¸ªç±»ï¼Œè¿›è¡Œå£°éŸ³çš„è®°å½•ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹å…·ä½“çš„å®žçŽ°ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091public class RecordingService extends Service &#123; private static final String LOG_TAG = "RecordingService"; private String mFileName = null; private String mFilePath = null; private MediaRecorder mRecorder = null; private long mStartingTimeMillis = 0; private long mElapsedMillis = 0; private TimerTask mIncrementTimerTask = null; @Override public IBinder onBind(Intent intent) &#123; return null; &#125; @Override public void onCreate() &#123; super.onCreate(); &#125; @Override public int onStartCommand(Intent intent, int flags, int startId) &#123; startRecording(); return START_STICKY; &#125; @Override public void onDestroy() &#123; if (mRecorder != null) &#123; stopRecording(); &#125; super.onDestroy(); &#125; public void startRecording() &#123; setFileNameAndPath(); mRecorder = new MediaRecorder(); mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC); mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4); mRecorder.setOutputFile(mFilePath); mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC); mRecorder.setAudioChannels(1); mRecorder.setAudioSamplingRate(44100); mRecorder.setAudioEncodingBitRate(192000); try &#123; mRecorder.prepare(); mRecorder.start(); mStartingTimeMillis = System.currentTimeMillis(); &#125; catch (IOException e) &#123; Log.e(LOG_TAG, "prepare() failed"); &#125; &#125; public void setFileNameAndPath() &#123; int count = 0; File f; do &#123; count++; mFileName = getString(R.string.default_file_name) + "_" + (System.currentTimeMillis()) + ".mp4"; mFilePath = Environment.getExternalStorageDirectory().getAbsolutePath(); mFilePath += "/SoundRecorder/" + mFileName; f = new File(mFilePath); &#125; while (f.exists() &amp;&amp; !f.isDirectory()); &#125; public void stopRecording() &#123; mRecorder.stop(); mElapsedMillis = (System.currentTimeMillis() - mStartingTimeMillis); mRecorder.release(); getSharedPreferences("sp_name_audio", MODE_PRIVATE) .edit() .putString("audio_path", mFilePath) .putLong("elpased", mElapsedMillis) .apply(); if (mIncrementTimerTask != null) &#123; mIncrementTimerTask.cancel(); mIncrementTimerTask = null; &#125; mRecorder = null; &#125;&#125; å¯ä»¥çœ‹åˆ°åœ¨ onStartCommand() é‡Œé¢æœ‰ä¸€ä¸ª startRecording() æ–¹æ³•ï¼Œåœ¨å¤–éƒ¨å¯åŠ¨è¿™ä¸ª RecordingService çš„æ—¶å€™ï¼Œä¾¿ä¼šè°ƒç”¨è¿™ä¸ª startRecording() æ–¹æ³•å¼€å§‹å½•éŸ³ã€‚ åœ¨ startRecording() æ–¹æ³•ä¸­å…ˆè°ƒç”¨äº† setFileNameAndPath æ–¹æ³•ï¼Œåˆå§‹åŒ–äº†å½•éŸ³æ–‡ä»¶çš„åå­—å’Œä¿å­˜çš„è·¯å¾„ï¼Œä¸ºäº†è®©æ¯ä¸ªå½•éŸ³æ–‡ä»¶éƒ½æœ‰å”¯ä¸€çš„åå­—ï¼Œæˆ‘è°ƒç”¨ System.currentMillis() æ‹¼æŽ¥åˆ°å½•éŸ³æ–‡ä»¶çš„åå­—é‡Œé¢ã€‚ 12345678910111213public void setFileNameAndPath() &#123; int count = 0; File f; do &#123; count++; mFileName = getString(R.string.default_file_name) + "_" + (System.currentTimeMillis()) + ".mp4"; mFilePath = Environment.getExternalStorageDirectory().getAbsolutePath(); mFilePath += "/SoundRecorder/" + mFileName; f = new File(mFilePath); &#125; while (f.exists() &amp;&amp; !f.isDirectory());&#125; è®¾ç½®å¥½äº†æ–‡ä»¶çš„åå­—å’Œä¿å­˜è·¯å¾„ä¹‹åŽï¼Œå¯¹ mRecorder è¿›è¡Œä¸€ç³»åˆ—å‚æ•°çš„è®¾ç½®ï¼Œè¿™ä¸ªmRecorder æ˜¯ MediaRecorder çš„ä¸€ä¸ªå®žä¾‹ï¼Œä¸“é—¨ç”¨äºŽå½•éŸ³çš„å­˜å‚¨ã€‚ 1234567891011121314151617181920public void startRecording() &#123; setFileNameAndPath(); mRecorder = new MediaRecorder(); mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC); mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4); mRecorder.setOutputFile(mFilePath); mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC); mRecorder.setAudioChannels(1); mRecorder.setAudioSamplingRate(44100); mRecorder.setAudioEncodingBitRate(192000); try &#123; mRecorder.prepare(); mRecorder.start(); mStartingTimeMillis = System.currentTimeMillis(); &#125; catch (IOException e) &#123; Log.e(LOG_TAG, "prepare() failed"); &#125;&#125; è®¾ç½®å¥½å‚æ•°ä¹‹åŽï¼Œå¯åŠ¨ mRecorder å¼€å§‹å½•éŸ³ï¼Œå¯ä»¥çœ‹åˆ°å¯åŠ¨ mRecorder å¼€å§‹å½•éŸ³åŽï¼Œæˆ‘è¿˜å°†å½“å‰çš„æ—¶é—´èµ‹å€¼ç»™ mStartingTimeMillsï¼Œè¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†è®°å½•å½•éŸ³çš„æ—¶é•¿ï¼Œç­‰åˆ°å½•éŸ³ç»“æŸåŽå†èŽ·å–ä¸€æ¬¡å½“å‰çš„æ—¶é—´ï¼Œç„¶åŽå°†ä¸¤ä¸ªæ—¶é—´è¿›è¡Œç›¸å‡ï¼Œå°±èƒ½å¾—åˆ°å½•éŸ³çš„å…·ä½“æ—¶é•¿äº†ã€‚ ç­‰åˆ°å½•éŸ³ç»“æŸï¼Œåœæ­¢æœåŠ¡åŽï¼Œä¾¿ä¼šå›žè°ƒ RecordingService çš„ onDestroy() æ–¹æ³•ï¼Œè¿™æ—¶å€™ä¾¿ä¼šè°ƒç”¨ stopRecording() æ–¹æ³•ï¼Œå…³é—­ mRecorderï¼Œå¹¶ç”¨ SharedPreferences ä¿å­˜å½•éŸ³æ–‡ä»¶çš„ä¿¡æ¯ï¼Œæœ€åŽå°† mRecorder ç½®ç©ºï¼Œé˜²æ­¢å†…å­˜æ³„éœ²ã€‚ 1234567891011121314151617public void stopRecording() &#123; mRecorder.stop(); mElapsedMillis = (System.currentTimeMillis() - mStartingTimeMillis); mRecorder.release(); getSharedPreferences("sp_name_audio", MODE_PRIVATE) .edit() .putString("audio_path", mFilePath) .putLong("elpased", mElapsedMillis) .apply(); if (mIncrementTimerTask != null) &#123; mIncrementTimerTask.cancel(); mIncrementTimerTask = null; &#125; mRecorder = null;&#125; æ˜¾ç¤ºå½•éŸ³ç•Œé¢çš„ RecordAudioDialogFragment123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156public class RecordAudioDialogFragment extends DialogFragment &#123; private static final String TAG = "RecordAudioDialogFragme"; private int mRecordPromptCount = 0; private boolean mStartRecording = true; private boolean mPauseRecording = true; long timeWhenPaused = 0; private FloatingActionButton mFabRecord; private Chronometer mChronometerTime; private ImageView mIvClose; private OnAudioCancelListener mListener; public static RecordAudioDialogFragment newInstance() &#123; RecordAudioDialogFragment dialogFragment = new RecordAudioDialogFragment(); Bundle bundle = new Bundle(); dialogFragment.setArguments(bundle); return dialogFragment; &#125; @Override public void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); &#125; @Override public void onActivityCreated(Bundle savedInstanceState) &#123; super.onActivityCreated(savedInstanceState); &#125; @NonNull @Override public Dialog onCreateDialog(Bundle savedInstanceState) &#123; Dialog dialog = super.onCreateDialog(savedInstanceState); final AlertDialog.Builder builder = new AlertDialog.Builder(getActivity()); View view = getActivity().getLayoutInflater().inflate(R.layout.fragment_record_audio, null); initView(view); mFabRecord.setColorNormal(getResources().getColor(R.color.colorAccent)); mFabRecord.setColorPressed(getResources().getColor(R.color.colorAccent)); mFabRecord.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; if (ContextCompat.checkSelfPermission(getActivity(), Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) &#123; ActivityCompat.requestPermissions(getActivity() , new String[]&#123;Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.RECORD_AUDIO&#125;, 1); &#125; else &#123; onRecord(mStartRecording); mStartRecording = !mStartRecording; &#125; &#125; &#125;); mIvClose.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; mListener.onCancel(); &#125; &#125;); builder.setCancelable(false); builder.setView(view); return builder.create(); &#125; private void initView(View view) &#123; mChronometerTime = (Chronometer) view.findViewById(R.id.record_audio_chronometer_time); mFabRecord = (FloatingActionButton) view.findViewById(R.id.record_audio_fab_record); mIvClose = (ImageView) view.findViewById(R.id.record_audio_iv_close); &#125; Intent intent; private void onRecord(boolean start) &#123; intent = new Intent(getActivity(), RecordingService.class); if (start) &#123; // start recording mFabRecord.setImageResource(R.drawable.ic_media_stop); //mPauseButton.setVisibility(View.VISIBLE); Toast.makeText(getActivity(), "å¼€å§‹å½•éŸ³...", Toast.LENGTH_SHORT).show(); File folder = new File(Environment.getExternalStorageDirectory() + "/SoundRecorder"); if (!folder.exists()) &#123; //folder /SoundRecorder doesn't exist, create the folder folder.mkdir(); &#125; //start Chronometer mChronometerTime.setBase(SystemClock.elapsedRealtime()); mChronometerTime.start(); //start RecordingService getActivity().startService(intent); //keep screen on while recording// getActivity().getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); &#125; else &#123; //stop recording mFabRecord.setImageResource(R.drawable.ic_mic_white_36dp); //mPauseButton.setVisibility(View.GONE); mChronometerTime.stop(); timeWhenPaused = 0; Toast.makeText(getActivity(), "å½•éŸ³ç»“æŸ...", Toast.LENGTH_SHORT).show(); getActivity().stopService(intent); //allow the screen to turn off again once recording is finished getActivity().getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); &#125; &#125; @Override public void onDestroyView() &#123; if (!mStartRecording) &#123; //stop recording mFabRecord.setImageResource(R.drawable.ic_mic_white_36dp); //mPauseButton.setVisibility(View.GONE); mChronometerTime.stop(); timeWhenPaused = 0; Toast.makeText(getActivity(), "å½•éŸ³ç»“æŸ...", Toast.LENGTH_SHORT).show(); getActivity().stopService(intent); //allow the screen to turn off again once recording is finished getActivity().getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); &#125; super.onDestroyView(); &#125; public void setOnCancelListener(OnAudioCancelListener listener) &#123; this.mListener = listener; &#125; @Override public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) &#123; switch (requestCode) &#123; case 1: if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED &amp;&amp; grantResults[1] == PackageManager.PERMISSION_GRANTED) &#123; onRecord(mStartRecording); &#125; break; &#125; &#125; public interface OnAudioCancelListener &#123; void onCancel(); &#125;&#125; å¯ä»¥çœ‹åˆ°åœ¨ RecordAudioDialogFragment æœ‰ä¸€ä¸ª newInstance(int maxTime) çš„é™æ€æ–¹æ³•ä¾›å¤–éƒ¨è°ƒç”¨ï¼Œå¦‚æžœæƒ³è®¾ç½®å½•éŸ³çš„æœ€å¤§æ—¶é•¿ï¼Œç›´æŽ¥ä¼ å‚æ•°è¿›åŽ»å°±è¡Œäº†ã€‚ è¿™ä¸ªå¯¹è¯æ¡†çš„é‡ç‚¹éƒ¨åˆ†å°±æ˜¯åœ¨ onCreateDialog()ä¸­ï¼Œæˆ‘ä»¬å…ˆåŠ è½½äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„å¯¹è¯æ¡†çš„å¸ƒå±€ï¼Œå½“ç‚¹å‡»å½•éŸ³çš„æŒ‰é’®çš„æ—¶å€™ï¼Œå…ˆè¿›è¡Œç›¸å…³æƒé™çš„ç”³è¯·ï¼Œå½•éŸ³æƒé™ android.permission.RECORD_AUDIO 1234567891011121314151617181920212223242526272829303132333435public Dialog onCreateDialog(Bundle savedInstanceState) &#123; Dialog dialog = super.onCreateDialog(savedInstanceState); final AlertDialog.Builder builder = new AlertDialog.Builder(getActivity()); View view = getActivity().getLayoutInflater().inflate(R.layout.fragment_record_audio, null); initView(view); mFabRecord.setColorNormal(getResources().getColor(R.color.colorAccent)); mFabRecord.setColorPressed(getResources().getColor(R.color.colorAccent)); mFabRecord.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; if (ContextCompat.checkSelfPermission(getActivity(), Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) &#123; ActivityCompat.requestPermissions(getActivity() , new String[]&#123;Manifest.permission.WRITE_EXTERNAL_STORAGE, Manifest.permission.RECORD_AUDIO&#125;, 1); &#125; else &#123; onRecord(mStartRecording); mStartRecording = !mStartRecording; &#125; &#125; &#125;); mIvClose.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; mListener.onCancel(); &#125; &#125;); builder.setCancelable(false); builder.setView(view); return builder.create();&#125; ç”³è¯·å¥½æƒé™ä¹‹åŽä¾¿ä¼šè°ƒç”¨ onRecord() è¿™ä¸ªæ–¹æ³•ï¼Œç„¶åŽå°† boolean mStartRecording è¿›è¡Œåè½¬ï¼Œè¿™æ ·å°±ä¸ç”¨å†™éš¾çœ‹çš„ if else äº†ï¼Œç›´æŽ¥æ”¹å˜ mStartRecording çš„å€¼ï¼Œç„¶åŽåœ¨ onRecord() é‡Œé¢è¿›è¡Œå¤„ç†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738private void onRecord(boolean start) &#123; intent = new Intent(getActivity(), RecordingService.class); if (start) &#123; // start recording mFabRecord.setImageResource(R.drawable.ic_media_stop); //mPauseButton.setVisibility(View.VISIBLE); Toast.makeText(getActivity(), "å¼€å§‹å½•éŸ³...", Toast.LENGTH_SHORT).show(); File folder = new File(Environment.getExternalStorageDirectory() + "/SoundRecorder"); if (!folder.exists()) &#123; //folder /SoundRecorder doesn't exist, create the folder folder.mkdir(); &#125; //start Chronometer mChronometerTime.setBase(SystemClock.elapsedRealtime()); mChronometerTime.start(); //start RecordingService getActivity().startService(intent); //keep screen on while recording// getActivity().getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); &#125; else &#123; //stop recording mFabRecord.setImageResource(R.drawable.ic_mic_white_36dp); //mPauseButton.setVisibility(View.GONE); mChronometerTime.stop(); timeWhenPaused = 0; Toast.makeText(getActivity(), "å½•éŸ³ç»“æŸ...", Toast.LENGTH_SHORT).show(); getActivity().stopService(intent); //allow the screen to turn off again once recording is finished getActivity().getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); &#125; &#125; åˆ›å»ºäº†ä¿å­˜å½•éŸ³æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œç„¶åŽæ ¹æ® mStartRecording çš„å€¼è¿›è¡Œ RecordingService çš„å¯åŠ¨å’Œå…³é—­ç½¢äº†ã€‚åœ¨å¯åŠ¨æ—¶è¿˜é¡ºä¾¿å¼€å§‹äº† mChronometer çš„è®¡æ—¶æ˜¾ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ª Android åŽŸç”Ÿçš„æ˜¾ç¤ºè®¡æ—¶çš„ä¸€ä¸ªæŽ§ä»¶ã€‚ æ’­æ”¾å½•éŸ³çš„ PlaybackDialogFragmentå¤–éƒ¨è°ƒç”¨è¿™ä¸ªå¯¹è¯æ¡†çš„æ—¶å€™ï¼Œåªéœ€è¦ä¼ å…¥ä¸€ä¸ªåŒ…å«å½•éŸ³æ–‡ä»¶ä¿¡æ¯çš„ RecordingItemï¼Œå› ä¸ºåŒ…å«çš„ä¿¡æ¯æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥æœ€å¥½å°† RecordingItem è¿›è¡Œåºåˆ—åŒ–ã€‚ 1234567public static PlaybackDialogFragment newInstance(RecordingItem item) &#123; PlaybackDialogFragment f = new PlaybackDialogFragment(); Bundle b = new Bundle(); b.putParcelable(ARG_ITEM, item); f.setArguments(b); return f;&#125; æ¥çœ‹çœ‹ onCreateDialog() æ–¹æ³•ï¼Œåœ¨åŠ è½½äº†å¸ƒå±€ä¹‹åŽï¼Œç»™ mSeekBar è®¾ç½®ç›‘å¬ï¼ŒmSeekBar æ˜¯ä¸€ä¸ªæ˜¾ç¤ºè¿›åº¦æ¡çš„æŽ§ä»¶ï¼Œå½“å¼€å§‹æ’­æ”¾å½•éŸ³æ—¶å€™ï¼Œå°†å½•éŸ³æ–‡ä»¶çš„æ—¶é•¿ï¼Œè®¾ç½®è¿› mSeekBar é‡Œé¢ï¼Œæ’­æ”¾å½•éŸ³çš„åŒæ—¶ï¼Œè¿è¡Œ mSeekBarï¼Œé€šè¿‡ç›‘å¬ mSeekBar çš„è¿›åº¦ï¼Œåˆ·æ–°æ˜¾ç¤ºçš„æ’­æ”¾è¿›åº¦ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879public Dialog onCreateDialog(Bundle savedInstanceState) &#123; Dialog dialog = super.onCreateDialog(savedInstanceState); AlertDialog.Builder builder = new AlertDialog.Builder(getActivity()); View view = getActivity().getLayoutInflater().inflate(R.layout.fragment_media_playback, null); mFileNameTextView = (TextView) view.findViewById(R.id.file_name_text_view); mFileLengthTextView = (TextView) view.findViewById(R.id.file_length_text_view); mCurrentProgressTextView = (TextView) view.findViewById(R.id.current_progress_text_view); mSeekBar = (SeekBar) view.findViewById(R.id.seekbar); ColorFilter filter = new LightingColorFilter (getResources().getColor(R.color.green), getResources().getColor(R.color.green)); mSeekBar.getProgressDrawable().setColorFilter(filter); mSeekBar.getThumb().setColorFilter(filter); mFileLengthTextView.setText(String.valueOf(mFileLength)); mSeekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() &#123; @Override public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) &#123; if(mMediaPlayer != null &amp;&amp; fromUser) &#123; mMediaPlayer.seekTo(progress); mHandler.removeCallbacks(mRunnable); long minutes = TimeUnit.MILLISECONDS.toMinutes(mMediaPlayer.getCurrentPosition()); long seconds = TimeUnit.MILLISECONDS.toSeconds(mMediaPlayer.getCurrentPosition()) - TimeUnit.MINUTES.toSeconds(minutes); mCurrentProgressTextView.setText(String.format("%02d:%02d", minutes,seconds)); updateSeekBar(); &#125; else if (mMediaPlayer == null &amp;&amp; fromUser) &#123; prepareMediaPlayerFromPoint(progress); updateSeekBar(); &#125; &#125; @Override public void onStartTrackingTouch(SeekBar seekBar) &#123; if(mMediaPlayer != null) &#123; // remove message Handler from updating progress bar mHandler.removeCallbacks(mRunnable); &#125; &#125; @Override public void onStopTrackingTouch(SeekBar seekBar) &#123; if (mMediaPlayer != null) &#123; mHandler.removeCallbacks(mRunnable); mMediaPlayer.seekTo(seekBar.getProgress()); long minutes = TimeUnit.MILLISECONDS.toMinutes(mMediaPlayer.getCurrentPosition()); long seconds = TimeUnit.MILLISECONDS.toSeconds(mMediaPlayer.getCurrentPosition()) - TimeUnit.MINUTES.toSeconds(minutes); mCurrentProgressTextView.setText(String.format("%02d:%02d", minutes,seconds)); updateSeekBar(); &#125; &#125; &#125;); mPlayButton = (FloatingActionButton) view.findViewById(R.id.fab_play); mPlayButton.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; onPlay(isPlaying); isPlaying = !isPlaying; &#125; &#125;); mFileNameTextView.setText(item.getName()); mFileLengthTextView.setText(String.format("%02d:%02d", minutes,seconds)); builder.setView(view); // request a window without the title dialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE); return builder.create();&#125; å½“ç‚¹å‡»æ’­æ”¾å½•éŸ³çš„æŒ‰é’®ä¹‹åŽï¼Œä¼šè°ƒç”¨ onPlay() æ–¹æ³•ï¼Œç„¶åŽæ ¹æ® isPlayingï¼ˆæ ‡è¯†å½“å‰æ˜¯å¦æ’­æ”¾å½•éŸ³ï¼‰çš„å€¼ï¼Œæ¥è°ƒç”¨ä¸åŒçš„æ–¹æ³•ã€‚ 12345678910111213private void onPlay(boolean isPlaying)&#123; if (!isPlaying) &#123; //currently MediaPlayer is not playing audio if(mMediaPlayer == null) &#123; startPlaying(); //start from beginning &#125; else &#123; resumePlaying(); //resume the currently paused MediaPlayer &#125; &#125; else &#123; pausePlaying(); &#125;&#125; æˆ‘ä»¬æœ€å…³å¿ƒçš„ï¼ŒèŽ«è¿‡äºŽ startPlaying() è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¾¿æ˜¯æ¥å¼€å¯æ’­æ”¾å½•éŸ³çš„ï¼Œæˆ‘ä»¬é¦–å…ˆå°†å¤–éƒ¨ä¼ å…¥çš„æœ‰å…³çš„å½•éŸ³ä¿¡æ¯ï¼Œè®¾ç½®ç»™ MediaPlayerï¼Œç„¶åŽå¼€å§‹è°ƒç”¨ mMediaPlayer.start() è¿›è¡Œå½•éŸ³çš„æ’­æ”¾ï¼Œç„¶åŽè°ƒç”¨ updateSeekbar() å®žæ—¶æ›´æ–°è¿›åº¦æ¡çš„å†…å®¹ã€‚å½“ MediaPlayer çš„å†…å®¹æ’­æ”¾å®ŒæˆåŽï¼Œè°ƒç”¨ stopPlaying() æ–¹æ³•ï¼Œå…³é—­ mMediaPlayerã€‚ 12345678910111213141516171819202122232425262728293031private void startPlaying() &#123; mPlayButton.setImageResource(R.drawable.ic_media_pause); mMediaPlayer = new MediaPlayer(); try &#123; mMediaPlayer.setDataSource(item.getFilePath()); mMediaPlayer.prepare(); mSeekBar.setMax(mMediaPlayer.getDuration()); mMediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() &#123; @Override public void onPrepared(MediaPlayer mp) &#123; mMediaPlayer.start(); &#125; &#125;); &#125; catch (IOException e) &#123; Log.e(LOG_TAG, "prepare() failed"); &#125; mMediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() &#123; @Override public void onCompletion(MediaPlayer mp) &#123; stopPlaying(); &#125; &#125;); updateSeekBar(); //keep screen on while playing audio getActivity().getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);&#125; ä»¥ä¸Šä¾¿æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼Œæœ‰å…³çš„ä»£ç æˆ‘å·²ç»ä¸Šä¼ åˆ° Github ä¸Šäº†ï¼Œéœ€è¦çš„ ç‚¹å‡»è¿™é‡Œï¼Œå–œæ¬¢çš„è¯ï¼Œæ¬¢è¿Žæ¥æ³¢ star å’Œ forkã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å½•éŸ³</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å©šç¤¼ç­¹å¤‡]]></title>
    <url>%2Fposts%2F95cd02d2.html</url>
    <content type="text"><![CDATA[å³å°†æ­¥å…¥äººç”Ÿçš„ç¬¬ä¸€ä»¶å¤§äº‹ï¼Œåœ¨æ­¤è®°å½•ä¸‹ç‚¹æ»´äº‹ä»¶ï¼š]]></content>
      <categories>
        <category>éšç¬”è®°</category>
      </categories>
      <tags>
        <tag>éšç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android Utilså·¥å…·ç±»æ–¹æ³•å¤§é›†åˆ]]></title>
    <url>%2Fposts%2F1cc851d3.html</url>
    <content type="text"><![CDATA[123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460/** * æä¾›ç²¾ç¡®çš„å°æ•°ä½å››èˆäº”å…¥å¤„ç†ï¼Œä¿ç•™å‡ ä½å°æ•°ã€‚ * * @param v éœ€è¦å››èˆäº”å…¥çš„æ•°å­— * @param scale å°æ•°ç‚¹åŽä¿ç•™å‡ ä½ * @return å››èˆäº”å…¥åŽçš„ç»“æžœ */ public static double round(double v, int scale) &#123; if (scale &lt; 0) &#123; throw new IllegalArgumentException("The scale must be a positive integer or zero"); &#125; BigDecimal b = new BigDecimal(Double.toString(v)); BigDecimal one = new BigDecimal("1"); double bb = b.divide(one, scale, BigDecimal.ROUND_HALF_UP).doubleValue(); return bb; &#125; /** * æä¾›ï¼ˆç›¸å¯¹ï¼‰ç²¾ç¡®çš„é™¤æ³•è¿ç®—ã€‚å½“å‘ç”Ÿé™¤ä¸å°½çš„æƒ…å†µæ—¶ï¼Œç”±scaleå‚æ•°æŒ‡ å®šç²¾åº¦ï¼Œä»¥åŽçš„æ•°å­—å››èˆäº”å…¥ã€‚ * * @param v1 è¢«é™¤æ•° * @param v2 é™¤æ•° * @param scale è¡¨ç¤ºè¡¨ç¤ºéœ€è¦ç²¾ç¡®åˆ°å°æ•°ç‚¹ä»¥åŽå‡ ä½ã€‚ * @return ä¸¤ä¸ªå‚æ•°çš„å•† */ public static double div(double v1, double v2, int scale) &#123; if (scale &lt; 0) &#123; throw new IllegalArgumentException("The scale must be a positive integer or zero"); &#125; BigDecimal b1 = new BigDecimal(Double.toString(v1)); BigDecimal b2 = new BigDecimal(Double.toString(v2)); return b1.divide(b2, scale, BigDecimal.ROUND_HALF_UP).doubleValue(); &#125; /** * æä¾›ç²¾ç¡®çš„ä¹˜æ³•è¿ç®—ã€‚ * * @param v1 è¢«ä¹˜æ•° * @param v2 ä¹˜æ•° * @return ä¸¤ä¸ªå‚æ•°çš„ç§¯ */ public static double mul(double v1, double v2) &#123; BigDecimal b1 = new BigDecimal(Double.toString(v1)); BigDecimal b2 = new BigDecimal(Double.toString(v2)); return b1.multiply(b2).doubleValue(); &#125; /** * æ£€æŸ¥æ‰‹æœºä¸Šæ˜¯å¦å®‰è£…äº†æŒ‡å®šçš„è½¯ä»¶ * * @param context * @param packageName ï¼šåº”ç”¨åŒ…å * @return */ public static boolean isAvilible(Context context, String packageName) &#123; // èŽ·å–packagemanager PackageManager packageManager = context.getPackageManager(); // èŽ·å–æ‰€æœ‰å·²å®‰è£…ç¨‹åºçš„åŒ…ä¿¡æ¯ List&lt;PackageInfo&gt; packageInfos = packageManager.getInstalledPackages(0); // ç”¨äºŽå­˜å‚¨æ‰€æœ‰å·²å®‰è£…ç¨‹åºçš„åŒ…å List&lt;String&gt; packageNames = new ArrayList&lt;String&gt;(); // ä»Žpinfoä¸­å°†åŒ…åå­—é€ä¸€å–å‡ºï¼ŒåŽ‹å…¥pName listä¸­ if (packageInfos != null) &#123; for (int i = 0; i &lt; packageInfos.size(); i++) &#123; String packName = packageInfos.get(i).packageName; packageNames.add(packName); &#125; &#125; // åˆ¤æ–­packageNamesä¸­æ˜¯å¦æœ‰ç›®æ ‡ç¨‹åºçš„åŒ…åï¼Œæœ‰TRUEï¼Œæ²¡æœ‰FALSE return packageNames.contains(packageName); &#125; /** * æ ¹æ®ä¸€ä¸ªç½‘ç»œè¿žæŽ¥(String)èŽ·å–bitmapå›¾åƒ * * @param imageUri * @return */ public static Bitmap getbitmap(String imageUri) &#123; Log.v("", "getbitmap:" + imageUri); // æ˜¾ç¤ºç½‘ç»œä¸Šçš„å›¾ç‰‡ Bitmap bitmap = null; try &#123; URL myFileUrl = new URL(imageUri); HttpURLConnection conn = (HttpURLConnection) myFileUrl .openConnection(); conn.setDoInput(true); conn.connect(); InputStream is = conn.getInputStream(); bitmap = BitmapFactory.decodeStream(is); is.close(); Log.v("", "image download finished." + imageUri); &#125; catch (OutOfMemoryError e) &#123; e.printStackTrace(); bitmap = null; &#125; catch (IOException e) &#123; e.printStackTrace(); Log.v("", "getbitmap bmp fail---"); bitmap = null; &#125; return bitmap; &#125; /** * å°†å­—ç¬¦ä¸²è½¬æ¢æˆBitmapç±»åž‹ * * @param * @return */ public static Bitmap stringtoBitmap(String string) &#123; Bitmap bitmap = null; try &#123; byte[] bitmapArray; bitmapArray = Base64.decode(string, Base64.DEFAULT); bitmap = BitmapFactory.decodeByteArray(bitmapArray, 0, bitmapArray.length); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return bitmap; &#125; /** * å°†Bitmapè½¬æ¢æˆå­—ç¬¦ä¸² * * @param bitmap * @return */ public static String bitmaptoString(Bitmap bitmap) &#123; String string = null; ByteArrayOutputStream bStream = new ByteArrayOutputStream(); bitmap.compress(Bitmap.CompressFormat.PNG, 100, bStream); byte[] bytes = bStream.toByteArray(); string = Base64.encodeToString(bytes, Base64.DEFAULT); return string; &#125; /** * è¿”å›žå½“å‰ç¨‹åºç‰ˆæœ¬å-V2 ä¸‰æ®µä¿®æ”¹---ex 5.2---5.21 * support 7.8.8.1, 7.18.8.1, 17.18.8.1 modified by chenhong, 2018-5-25 */ public static String getAppVersionNameV2(Context context) &#123; String versionCode = ""; try &#123; PackageInfo pi = MyApp.getAppContext().getPackageManager().getPackageInfo(MyApp.getAppContext().getPackageName(), 0); versionCode = pi.versionName; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; if (!TextUtils.isEmpty(versionCode)) &#123; int firstDotIndex = versionCode.indexOf("."); if (firstDotIndex &gt; -1) &#123; String mainVersion = versionCode.substring(0, firstDotIndex); String subVersion = ""; if (versionCode.length() &gt; firstDotIndex + 1) &#123; subVersion = versionCode.substring(firstDotIndex + 1); subVersion = subVersion.replace(".", ""); &#125; versionCode = mainVersion + "." + subVersion; int length = versionCode.length(); int dotIndex = versionCode.indexOf("."); if (dotIndex == length - 1) &#123; versionCode += "00"; &#125; else if (dotIndex == length - 2) &#123; versionCode += "0"; &#125; &#125; else &#123; versionCode += ".00"; &#125; &#125; return versionCode; &#125; /** * èŽ·å–IPåœ°å€ * * @param context * @return */ public static String getIPAddress(Context context) &#123; NetworkInfo info = ((ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo(); if (info != null &amp;&amp; info.isConnected()) &#123; if (info.getType() == ConnectivityManager.TYPE_MOBILE) &#123;//å½“å‰ä½¿ç”¨2G/3G/4Gç½‘ç»œ try &#123; //Enumeration&lt;NetworkInterface&gt; en=NetworkInterface.getNetworkInterfaces(); for (Enumeration&lt;NetworkInterface&gt; en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements(); ) &#123; NetworkInterface intf = en.nextElement(); for (Enumeration&lt;InetAddress&gt; enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements(); ) &#123; InetAddress inetAddress = enumIpAddr.nextElement(); if (!inetAddress.isLoopbackAddress() &amp;&amp; inetAddress instanceof Inet4Address) &#123; return inetAddress.getHostAddress(); &#125; &#125; &#125; &#125; catch (SocketException e) &#123; e.printStackTrace(); &#125; &#125; else if (info.getType() == ConnectivityManager.TYPE_WIFI) &#123;//å½“å‰ä½¿ç”¨æ— çº¿ç½‘ç»œ WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE); WifiInfo wifiInfo = wifiManager.getConnectionInfo(); String ipAddress = intIP2StringIP(wifiInfo.getIpAddress());//å¾—åˆ°IPV4åœ°å€ return ipAddress; &#125; &#125; else &#123; //å½“å‰æ— ç½‘ç»œè¿žæŽ¥,è¯·åœ¨è®¾ç½®ä¸­æ‰“å¼€ç½‘ç»œ &#125; return null; &#125; /** * å°†å¾—åˆ°çš„intç±»åž‹çš„IPè½¬æ¢ä¸ºStringç±»åž‹ * * @param ip * @return */ public static String intIP2StringIP(int ip) &#123; return (ip &amp; 0xFF) + "." + ((ip &gt;&gt; 8) &amp; 0xFF) + "." + ((ip &gt;&gt; 16) &amp; 0xFF) + "." + (ip &gt;&gt; 24 &amp; 0xFF); &#125; /** * èŽ·å–å±å¹•é«˜åº¦ * * @param context * @return */ public static int getWindowHeight(Context context) &#123; WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE); int windowHeight = wm.getDefaultDisplay().getHeight(); return windowHeight; &#125; /** * èŽ·å–å±å¹•å®½åº¦ * * @param context * @return */ public static int getWindowWidth(Context context) &#123; WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE); int windowWidth = wm.getDefaultDisplay().getWidth(); return windowWidth; &#125; /** * jsonå­—ç¬¦ä¸²è½¬map * * @param jsonString * @return */ public static Map transStringToMap(String jsonString) &#123; Gson gson = new Gson(); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map = gson.fromJson(jsonString, map.getClass()); return map; &#125; /** * è®¡ç®—ä¸¤ä¸ªæ—¶é—´ç›¸éš”å¤šå°‘å¤© * * @return */ public static String getDayNumberStr(String nowDate, String createDate) &#123; String str = ""; int strDay = 0; DateFormat df = new SimpleDateFormat("yyyy-MM-dd"); try &#123; Date d1 = df.parse(nowDate); Date d2 = df.parse(createDate); long diff = d1.getTime() - d2.getTime();//è¿™æ ·å¾—åˆ°çš„å·®å€¼æ˜¯å¾®ç§’çº§åˆ« long days = diff / (1000 * 60 * 60 * 24); long hours = (diff - days * (1000 * 60 * 60 * 24)) / (1000 * 60 * 60); long minutes = (diff - days * (1000 * 60 * 60 * 24) - hours * (1000 * 60 * 60)) / (1000 * 60);// System.out.println("" + days + "å¤©" + hours + "å°æ—¶" + minutes + "åˆ†"); str = days + ""; strDay = Integer.parseInt(str) + 1; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return strDay + ""; &#125; /** * èŽ·å¾—å½“å¤©0ç‚¹æ—¶é—´ */ public static int getTimesmorning() &#123; Calendar cal = Calendar.getInstance(); cal.set(Calendar.HOUR_OF_DAY, 0); cal.set(Calendar.SECOND, 0); cal.set(Calendar.MINUTE, 0); cal.set(Calendar.MILLISECOND, 0); return (int) (cal.getTimeInMillis() / 1000); &#125; /** * èŽ·å¾—å½“å¤©24ç‚¹æ—¶é—´ */ public static int getTimesnight() &#123; Calendar cal = Calendar.getInstance(); cal.set(Calendar.HOUR_OF_DAY, 24); cal.set(Calendar.SECOND, 0); cal.set(Calendar.MINUTE, 0); cal.set(Calendar.MILLISECOND, 0); return (int) (cal.getTimeInMillis() / 1000); &#125; /** * èŽ·å¾—å½“å¤©æ—¶é—´ */ public static String getTodayDate() &#123; SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");//è®¾ç½®æ—¥æœŸæ ¼å¼ String date = df.format(new Date());// new Date()ä¸ºèŽ·å–å½“å‰ç³»ç»Ÿæ—¶é—´ return date; &#125; /** * åˆ¤æ–­å½“å‰æ—¶é—´æ˜¯å¦åœ¨æ—¶é—´dateä¹‹å‰ date1 7ç‚¹ date2 8ç‚¹ * æ—¶é—´æ ¼å¼ 2005-4-21 16:16:34 "yyyy-MM-dd HH:mm:ss" * * @param date * @return * @throws ParseException */ public static boolean isDateBefore(String date) throws ParseException &#123; Date date1 = new Date();//å½“å‰æ—¶é—´ DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); return date1.before(df.parse(date)); &#125; /** * åˆ¤æ–­å½“å‰æ—¶é—´æ˜¯å¦åœ¨æ—¶é—´dateä¹‹åŽ date1 8ç‚¹ date2 5ç‚¹ * * @param date * @return * @throws ParseException */ public static boolean isDateAfter(String date) throws ParseException &#123; Date date1 = new Date();//å½“å‰æ—¶é—´ DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); return (df.parse(date)).before(date1); &#125; /** * å¤§å°å†™è½¬æ¢ * * @param UpperCasestr * @return * @throws Exception */ public static String toUpperCase(String UpperCasestr) throws Exception &#123; return UpperCasestr.toUpperCase().toString(); &#125; /** * åŽ»é™¤å­—ç¬¦ä¸²ç©ºæ ¼ * * @return */ public static String removeAllSpace(String str) &#123; String tmpstr = str.replace(" ", ""); return tmpstr; &#125; /** * èŽ·å–å½“å‰ç½‘ç»œç±»åž‹ * * @return */ public static String getNetworkTypeAll() &#123; String strNetworkType = ""; ConnectivityManager cm = (ConnectivityManager) MyApp.mContext.getSystemService(Context.CONNECTIVITY_SERVICE); NetworkInfo networkInfo = cm.getActiveNetworkInfo(); if (networkInfo != null &amp;&amp; networkInfo.isConnected()) &#123; if (networkInfo.getType() == ConnectivityManager.TYPE_WIFI) &#123; strNetworkType = "WIFI"; &#125; else if (networkInfo.getType() == ConnectivityManager.TYPE_MOBILE) &#123; String _strSubTypeName = networkInfo.getSubtypeName(); // TD-SCDMA networkType is 17 int networkType = networkInfo.getSubtype(); switch (networkType) &#123; case TelephonyManager.NETWORK_TYPE_GPRS: case TelephonyManager.NETWORK_TYPE_EDGE: case TelephonyManager.NETWORK_TYPE_CDMA: case TelephonyManager.NETWORK_TYPE_1xRTT: case TelephonyManager.NETWORK_TYPE_IDEN: //api&lt;8 : replace by 11 strNetworkType = "2G"; break; case TelephonyManager.NETWORK_TYPE_UMTS: case TelephonyManager.NETWORK_TYPE_EVDO_0: case TelephonyManager.NETWORK_TYPE_EVDO_A: case TelephonyManager.NETWORK_TYPE_HSDPA: case TelephonyManager.NETWORK_TYPE_HSUPA: case TelephonyManager.NETWORK_TYPE_HSPA: case TelephonyManager.NETWORK_TYPE_EVDO_B: //api&lt;9 : replace by 14 case TelephonyManager.NETWORK_TYPE_EHRPD: //api&lt;11 : replace by 12 case TelephonyManager.NETWORK_TYPE_HSPAP: //api&lt;13 : replace by 15 strNetworkType = "3G"; break; case TelephonyManager.NETWORK_TYPE_LTE: //api&lt;11 : replace by 13 strNetworkType = "4G"; break; default: if (_strSubTypeName.equalsIgnoreCase("TD-SCDMA") || _strSubTypeName.equalsIgnoreCase("WCDMA") || _strSubTypeName.equalsIgnoreCase("CDMA2000")) &#123; strNetworkType = "3G"; &#125; else &#123; strNetworkType = _strSubTypeName; &#125; break; &#125; &#125; &#125; return strNetworkType; &#125; /** * èŽ·å–simå¡è¿è¥å•†ä¿¡æ¯ */ public static String getSimOperator() &#123; String operator = ""; try &#123; TelephonyManager telManager = (TelephonyManager) MyApp.mContext.getSystemService(Context.TELEPHONY_SERVICE); operator = telManager.getSimOperator(); if (operator != null) &#123; if (operator.equals("46000") || operator.equals("46002") || operator.equals("46007")) &#123; operator = "ä¸­å›½ç§»åŠ¨"; &#125; else if (operator.equals("46001")) &#123; operator = "ä¸­å›½è”é€š"; &#125; else if (operator.equals("46003")) &#123; operator = "ä¸­å›½ç”µä¿¡"; &#125; &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); return operator; &#125; return operator; &#125; /** * å¼ºåˆ¶éšè—è¾“å…¥æ³•é”®ç›˜ * * @param context Context * @param view EditText */ public void hideInput(Context context, View view) &#123; InputMethodManager inputMethodManager = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE); inputMethodManager.hideSoftInputFromWindow(view.getWindowToken(), 0); &#125;]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ä»£ç ç‰‡æ®µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[android getè¯·æ±‚å’Œpostè¯·æ±‚åŒºåˆ«]]></title>
    <url>%2Fposts%2Fcec09649.html</url>
    <content type="text"><![CDATA[Getè¯·æ±‚ä¸ŽPostè¯·æ±‚çš„åŒºåˆ«Getæ˜¯å‘æœåŠ¡å™¨å‘ç´¢å–æ•°æ®çš„ä¸€ç§è¯·æ±‚ Getæ˜¯èŽ·å–ä¿¡æ¯ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ä¿¡æ¯ï¼Œç±»ä¼¼æ•°æ®åº“æŸ¥è¯¢åŠŸèƒ½ä¸€æ ·ï¼Œæ•°æ®ä¸ä¼šè¢«ä¿®æ”¹ Getè¯·æ±‚çš„å‚æ•°ä¼šè·Ÿåœ¨urlåŽè¿›è¡Œä¼ é€’ï¼Œè¯·æ±‚çš„æ•°æ®ä¼šé™„åœ¨URLä¹‹åŽï¼Œä»¥?åˆ†å‰²URLå’Œä¼ è¾“æ•°æ®ï¼Œå‚æ•°ä¹‹é—´ä»¥&amp;ç›¸è¿ž,ï¼…XXä¸­çš„XXä¸ºè¯¥ç¬¦å·ä»¥16è¿›åˆ¶è¡¨ç¤ºçš„ASCIIï¼Œå¦‚æžœæ•°æ®æ˜¯è‹±æ–‡å­—æ¯/æ•°å­—ï¼ŒåŽŸæ ·å‘é€ï¼Œå¦‚æžœæ˜¯ç©ºæ ¼ï¼Œè½¬æ¢ä¸º+ï¼Œå¦‚æžœæ˜¯ä¸­æ–‡/å…¶ä»–å­—ç¬¦ï¼Œåˆ™ç›´æŽ¥æŠŠå­—ç¬¦ä¸²ç”¨BASE64åŠ å¯†ã€‚ Getä¼ è¾“çš„æ•°æ®æœ‰å¤§å°é™åˆ¶ï¼Œå› ä¸ºGETæ˜¯é€šè¿‡URLæäº¤æ•°æ®ï¼Œé‚£ä¹ˆGETå¯æäº¤çš„æ•°æ®é‡å°±è·ŸURLçš„é•¿åº¦æœ‰ç›´æŽ¥å…³ç³»äº†ï¼Œä¸åŒçš„æµè§ˆå™¨å¯¹URLçš„é•¿åº¦çš„é™åˆ¶æ˜¯ä¸åŒçš„ã€‚ GETè¯·æ±‚çš„æ•°æ®ä¼šè¢«æµè§ˆå™¨ç¼“å­˜èµ·æ¥ï¼Œç”¨æˆ·åå’Œå¯†ç å°†æ˜Žæ–‡å‡ºçŽ°åœ¨URLä¸Šï¼Œå…¶ä»–äººå¯ä»¥æŸ¥åˆ°åŽ†å²æµè§ˆè®°å½•ï¼Œæ•°æ®ä¸å¤ªå®‰å…¨ã€‚åœ¨æœåŠ¡å™¨ç«¯ï¼Œç”¨Request.QueryStringæ¥èŽ·å–Getæ–¹å¼æäº¤æ¥çš„æ•°æ® Postæ˜¯å‘æœåŠ¡å™¨æäº¤æ•°æ®çš„ä¸€ç§è¯·æ±‚ Postè¯·æ±‚åˆ™ä½œä¸ºhttpæ¶ˆæ¯çš„å®žé™…å†…å®¹å‘é€ç»™webæœåŠ¡å™¨ï¼Œæ•°æ®æ”¾ç½®åœ¨HTML Headerå†…æäº¤ï¼ŒPostæ²¡æœ‰é™åˆ¶æäº¤çš„æ•°æ®ã€‚Postæ¯”Getå®‰å…¨ï¼Œå½“æ•°æ®æ˜¯ä¸­æ–‡æˆ–è€…ä¸æ•æ„Ÿçš„æ•°æ®ï¼Œåˆ™ç”¨getï¼Œå› ä¸ºä½¿ç”¨getï¼Œå‚æ•°ä¼šæ˜¾ç¤ºåœ¨åœ°å€ï¼Œå¯¹äºŽæ•æ„Ÿæ•°æ®å’Œä¸æ˜¯ä¸­æ–‡å­—ç¬¦çš„æ•°æ®ï¼Œåˆ™ç”¨post POSTè¡¨ç¤ºå¯èƒ½ä¿®æ”¹å˜æœåŠ¡å™¨ä¸Šçš„èµ„æºçš„è¯·æ±‚ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œç”¨Postæ–¹å¼æäº¤çš„æ•°æ®åªèƒ½ç”¨Request.Formæ¥èŽ·å–]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Git åˆ‡æ¢è´¦æˆ·]]></title>
    <url>%2Fposts%2F7f469116.html</url>
    <content type="text"><![CDATA[é—®é¢˜ æäº¤ä»£ç ï¼Œä½†githubä¸Šçš„ç»¿æ ¼å­æ²¡æœ‰å˜ç»¿ æ–°è€è´¦æˆ·åˆ‡æ¢ å¦‚æžœä½ ä¸çŸ¥é“çŽ°åœ¨æœ¬åœ°Gitç”¨çš„å¸å·æ˜¯ä»€ä¹ˆï¼Œä½ å¯ä»¥è¾“å…¥ Step 1 æŸ¥çœ‹ç”¨æˆ·å1git config user.name Step 2 æŸ¥çœ‹ç”¨æˆ·é‚®ç®±1git config user.email Step 3 ä¿®æ”¹ç”¨æˆ·åå’Œé‚®ç®±çš„å‘½ä»¤12git config --global user.name "Your_username"git config --global user.email "Your_email" æ³¨æ„user.nameï¼Œuser.email åŽé¢åƒä¸‡è®°å¾—åŠ ç©ºæ ¼ï¼Œå¦åˆ™ä½ å°±æ˜¯æäº¤äº†ï¼ŒGitä¹Ÿä¸ä¼šæé†’ä½ é…ç½®å‡ºé”™]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Webviewé‡Œè®¾ç½®Cookie]]></title>
    <url>%2Fposts%2F3defa4a1.html</url>
    <content type="text"><![CDATA[Androidä¸­WebViewåŠ è½½ç½‘é¡µï¼Œæœ‰æ—¶å€™éœ€è¦é€šè¿‡cookieæƒ³ç½‘é¡µä¼ é€’ä¿¡æ¯ï¼Œè¿™æ—¶å€™è¿™æ ·æ“ä½œã€‚ Step 1 è®¾ç½®æŽ¥æ”¶cookie123CookieManager.setAcceptFileSchemeCookies(true);CookieManager.getInstance().setAcceptCookie(true);CookieManager.setAcceptFileSchemeCookies(true); Step 2 è®¾ç½®cookieçš„å€¼ï¼Œé€šè¿‡setcookieæ–¹æ³•123List&lt;String&gt; cookies = new ArrayList&lt;&gt;();cookies.add("app_key=" + App.getAppKey());cookies.add("os=" + "Android" + Build.VERSION.SDK_INT); Step 3 é€šè¿‡syncæ–¹æ³•ï¼Œå°†cookieåŒæ­¥12345678910111213141516171819if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) &#123; CookieSyncManager.createInstance(context);&#125;CookieManager cookieManager = CookieManager.getInstance();cookieManager.setAcceptCookie(true);if (cookies != null) &#123; for (String cookie : cookies) &#123; cookieManager.setCookie(url, cookie); &#125;&#125;String s = "Domain=.***.com";String s1 = "Path=/";cookieManager.setCookie(url, s);cookieManager.setCookie(url, s1);if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1) &#123; CookieManager.getInstance().flush();&#125; else &#123; CookieSyncManager.getInstance().sync();&#125; &quot;;Domain=.xxxx.xxx.com&quot;+//ä½œç”¨åŸŸï¼ˆåœ¨å“ªä¸ªåŸŸåä¸‹cookieèµ·ä½œç”¨ï¼‰&quot;;Path=/&quot;;//Domainè¿™ä¸ªä½œç”¨åŸŸä¸‹çš„å“ªä¸ªæ–‡ä»¶å¤¹ï¼Œâ€œ/â€ä»£è¡¨æ‰€æœ‰æ–‡ä»¶å¤¹ æ³¨æ„åœ¨è°ƒç”¨è®¾ç½®Cookieä¹‹åŽä¸èƒ½å†è®¾ç½®è¿™ç±»å±žæ€§ï¼Œå¦åˆ™è®¾ç½®Cookieæ— æ•ˆã€‚ 12webView.getSettings().setBuiltInZoomControls(true); webView.getSettings().setJavaScriptEnabled(true); 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class WebviewUtil &#123; public static void setWebCookie(Context context) &#123; CookieManager.setAcceptFileSchemeCookies(true); CookieManager.getInstance().setAcceptCookie(true); CookieManager.setAcceptFileSchemeCookies(true); setCookie(context); &#125; private static void setCookie(Context context) &#123; List&lt;String&gt; cookies = new ArrayList&lt;&gt;(); cookies.add("app_key=" + App.getAppKey()); cookies.add("plat=" + "2"); cookies.add("os=" + "Android" + Build.VERSION.SDK_INT); cookies.add("channel=" + AndroidUtil.getChannel()); cookies.add("cver=" + String.valueOf(App.getVersionCode())); cookies.add("ctype=" + 2); cookies.add("cspec=" + ""); if (AccountManager.hasLogin()) &#123; cookies.add("user_id=" + getUserId()); cookies.add("gz_id=" + getUserId()); &#125; syncCookie(context, ".7gz.com/", cookies); &#125; private static void syncCookie(Context context, String url, List&lt;String&gt; cookies) &#123; if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) &#123; CookieSyncManager.createInstance(context); &#125; CookieManager cookieManager = CookieManager.getInstance(); cookieManager.setAcceptCookie(true); if (cookies != null) &#123; for (String cookie : cookies) &#123; cookieManager.setCookie(url, cookie); &#125; &#125; String s = "Domain=.7gz.com"; String s1 = "Path=/"; cookieManager.setCookie(url, s); cookieManager.setCookie(url, s1); if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1) &#123; CookieManager.getInstance().flush(); &#125; else &#123; CookieSyncManager.getInstance().sync(); &#125; &#125; private static String getUserId() &#123; return AccountManager.getInstance().getAccount().id; &#125; //æ¸…ç©ºæ‰€æœ‰Cookie public static void removeAllCookie(Context context) &#123; CookieSyncManager.createInstance(context); //Create a singleton CookieSyncManager within a context CookieManager cookieManager = CookieManager.getInstance(); // the singleton CookieManager instance cookieManager.removeAllCookie();// Removes all cookies. CookieSyncManager.getInstance().sync(); // forces sync manager to sync now &#125;]]></content>
      <categories>
        <category>Android</category>
        <category>Webview</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Webview</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android åœ†è§’åœ†å½¢ImageView]]></title>
    <url>%2Fposts%2F494f41c5.html</url>
    <content type="text"><![CDATA[æ•ˆæžœé¢„è§ˆ ç‰¹ç‚¹ åŸºäºŽAppCompatImageViewæ‰©å±• æ”¯æŒåœ†è§’ã€åœ†å½¢æ˜¾ç¤º å¯ç»˜åˆ¶è¾¹æ¡†ï¼Œåœ†å½¢æ—¶å¯ç»˜åˆ¶å†…å¤–ä¸¤å±‚è¾¹æ¡† æ”¯æŒè¾¹æ¡†ä¸è¦†ç›–å›¾ç‰‡ å¯ç»˜åˆ¶é®ç½© â€¦â€¦ æ”¯æŒçš„å±žæ€§ã€æ–¹æ³• å±žæ€§å å«ä¹‰ é»˜è®¤å€¼ å¯¹åº”æ–¹æ³• is_circle æ˜¯å¦æ˜¾ç¤ºä¸ºåœ†å½¢ï¼ˆé»˜è®¤ä¸ºçŸ©å½¢ï¼‰ false isCircle() corner_top_left_radius å·¦ä¸Šè§’åœ†è§’åŠå¾„ 0dp setCornerTopLeftRadius() corner_top_right_radius å³ä¸Šè§’åœ†è§’åŠå¾„ 0dp setCornerTopRightRadius() corner_bottom_left_radius å·¦ä¸‹è§’åœ†è§’åŠå¾„ 0dp setCornerBottomLeftRadius() corner_bottom_right_radius å³ä¸‹è§’åœ†è§’åŠå¾„ 0dp setCornerBottomRightRadius() corner_radius ç»Ÿä¸€è®¾ç½®å››ä¸ªè§’çš„åœ†è§’åŠå¾„ 0dp setCornerRadius() border_width è¾¹æ¡†å®½åº¦ 0dp setBorderWidth() border_color è¾¹æ¡†é¢œè‰² #ffffff setBorderColor() inner_border_width ç›¸å½“äºŽå†…å±‚è¾¹æ¡†ï¼ˆis_circleä¸ºtrueæ—¶æ”¯æŒï¼‰ 0dp setInnerBorderWidth() inner_border_color å†…è¾¹æ¡†é¢œè‰² #ffffff setInnerBorderColor() is_cover_src borderã€inner_borderæ˜¯å¦è¦†ç›–å›¾ç‰‡å†…å®¹ false isCoverSrc() mask_color å›¾ç‰‡ä¸Šç»˜åˆ¶çš„é®ç½©é¢œè‰² ä¸è®¾ç½®é¢œè‰²åˆ™ä¸ç»˜åˆ¶ setMaskColor() åŸºæœ¬ç”¨æ³•Step 1. æ·»åŠ JitPackä»“åº“ åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ build.gradle ä¸­æ·»åŠ ä»“åº“: 123456allprojects &#123; repositories &#123; ... maven &#123; url "https://jitpack.io" &#125; &#125;&#125; Step 2. æ·»åŠ é¡¹ç›®ä¾èµ– 123dependencies &#123; implementation 'com.github.zhangmiaocc:CircularImageView:1.0.0'&#125; **Step 3. åœ¨å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ  CornerLabelView 1234567891011&lt;com.zm.library.CircularImageView android:layout_width="100dp" android:layout_height="100dp" android:src="@drawable/rabbit" app:border_color="#008B45" app:border_width="2dp" app:corner_radius="20dp" app:inner_border_color="#FF7F24" app:inner_border_width="4dp" app:is_circle="true" /&gt; æºç ï¼šCircularImageView]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>CircleImageView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AnimationDrawableä½¿ç”¨ç®€ä»‹]]></title>
    <url>%2Fposts%2Fd6df4d7b.html</url>
    <content type="text"><![CDATA[Drawable animation å¯ä»¥åŠ è½½ Drawable èµ„æºå®žçŽ°å¸§åŠ¨ç”»ã€‚AnimationDrawable æ˜¯å®žçŽ° Drawable animations çš„åŸºæœ¬ç±»ã€‚æŽ¨èç”¨ XML æ–‡ä»¶çš„æ–¹æ³•å®žçŽ° Drawable åŠ¨ç”»ï¼Œä¸æŽ¨èåœ¨ä»£ç ä¸­å®žçŽ°ã€‚è¿™ç§ XML æ–‡ä»¶å­˜æ”¾åœ¨å·¥ç¨‹ä¸­ res/drawable/ç›®å½•ä¸‹ã€‚XML æ–‡ä»¶çš„æŒ‡ä»¤(å³å±žæ€§)ä¸ºåŠ¨ç”»æ’­æ”¾çš„é¡ºåºå’Œæ—¶é—´é—´éš”ã€‚ â€‹ åœ¨ XML æ–‡ä»¶ä¸­å…ƒç´ ä¸ºæ ¹èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹å®šä¹‰äº†æ¯ä¸€å¸§ï¼Œè¡¨ç¤ºä¸€ä¸ª drawable èµ„æºçš„å¸§å’Œå¸§é—´éš”ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª XML æ–‡ä»¶çš„å®žä¾‹: 1234567891011121314&lt;animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false"&gt; &lt;item android:drawable="@drawable/loading1" android:duration="100" /&gt; &lt;item android:drawable="@drawable/loading2" android:duration="100" /&gt; &lt;item android:drawable="@drawable/loading3" android:duration="100" /&gt; &lt;item android:drawable="@drawable/loading4" android:duration="100" /&gt; &lt;item android:drawable="@drawable/loading5" android:duration="100" /&gt;&lt;/animation-list&gt; è®¾ç½®Android:oneshot å±žæ€§ä¸º true,è¡¨ç¤ºæ­¤æ¬¡åŠ¨ç”»åªæ‰§è¡Œä¸€æ¬¡ï¼Œæœ€åŽåœç•™åœ¨æœ€åŽä¸€å¸§ã€‚è®¾ç½®ä¸º false åˆ™åŠ¨ç”»å¾ªçŽ¯æ’­æ”¾ã€‚æ–‡ä»¶å¯ä»¥æ·»åŠ ä¸º Image èƒŒæ™¯ï¼Œè§¦å‘çš„æ—¶å€™æ’­æ”¾ã€‚ ä¸‹é¢ç®€å•é€šè¿‡ä¸€ä¸ªä¾‹å­ï¼Œæ¥ç»™ ImageView è®¾ç½®æ¬¡åŠ¨ç”»æ•ˆæžœï¼Œå…·ä½“å®žçŽ°æ–¹æ³•ä¸º é€šè¿‡ View. setBackgroundResource(resID). animation.start(). 12345private AnimationDrawable animationDrawable; img = (ImageView) findViewById(R.id.img); img.setImageResource(R.drawable.anim_loading); animationDrawable = ((AnimationDrawable) img.getDrawable()); animationDrawable.start(); Demo åœ°å€ï¼šhttps://github.com/zhangmiaocc/AnimationDrawable Blog åœ°å€ï¼šhttps://zhangmiao.space/]]></content>
      <categories>
        <category>Android</category>
        <category>Animation</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Animation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidåŠ è½½PDFæ–‡ä»¶çš„ä½¿ç”¨]]></title>
    <url>%2Fposts%2F44884a58.html</url>
    <content type="text"><![CDATA[Android PdfViewerAndroidPdfViewer 1.xå¯åœ¨AndroidPdfViewerV1 repoä¸ŠèŽ·å¾—ï¼Œå¯ä»¥ç‹¬ç«‹å¼€å‘ã€‚ç‰ˆæœ¬1.xä½¿ç”¨ä¸åŒçš„å¼•æ“Žåœ¨ç”»å¸ƒä¸Šç»˜åˆ¶æ–‡æ¡£ï¼Œå› æ­¤å¦‚æžœæ‚¨ä¸å–œæ¬¢2.xç‰ˆæœ¬ï¼Œè¯·å°è¯•1.x. å›¾ä¹¦é¦†åœ¨Androidä¸Šæ˜¾ç¤ºçš„PDFæ–‡æ¡£ï¼Œç”¨animationsï¼Œgesturesï¼Œzoomå’Œdouble tapæ”¯æŒã€‚å®ƒåŸºäºŽPdfiumAndroidæ¥è§£ç PDFæ–‡ä»¶ã€‚é€‚ç”¨äºŽAPI 11ï¼ˆAndroid 3.0ï¼‰åŠæ›´é«˜ç‰ˆæœ¬ã€‚åœ¨Apache License 2.0ä¸‹èŽ·å¾—è®¸å¯ã€‚ 3.1.0-beta.1æœ‰ä»€ä¹ˆæ–°åŠŸèƒ½ï¼Ÿ åˆå¹¶æ‹‰å–è¯·æ±‚ï¼ƒ557ç”¨äºŽæ•æ‰é¡µé¢ï¼ˆé€é¡µæ»šåŠ¨ï¼‰ åˆå¹¶æ‹‰å‡ºè¯·æ±‚ï¼ƒ618ç”¨äºŽå¤œé—´æ¨¡å¼ åˆå¹¶æ‹‰å–è¯·æ±‚ï¼ƒ566 OnLongTapListener å°†PdfiumAndroidæ›´æ–°ä¸º1.9.0ï¼Œè€Œc++_sharedä¸æ˜¯ä½¿ç”¨gnustl_static æ›´æ–°Gradleæ’ä»¶ å°†ç¼–è¯‘SDKå’Œæ”¯æŒåº“æ›´æ–°åˆ°26 å°†æœ€ä½ŽSDKæ›´æ”¹ä¸º14 3.0 APIçš„å˜åŒ– æ¢æˆContants.PRELOAD_COUNTäº†PRELOAD_OFFSET åˆ é™¤PDFView#fitToWidth()ï¼ˆæ²¡æœ‰å‚æ•°çš„å˜ä½“ï¼‰ åˆ é™¤Configurator#invalidPageColor(int)æ–¹æ³•ï¼Œå› ä¸ºæ— æ³•å‘ˆçŽ°æ— æ•ˆé¡µé¢ ä»ŽOnRenderListener#onInitiallyRendered(int)æ–¹æ³•ä¸­åˆ é™¤äº†é¡µé¢å¤§å°å‚æ•°ï¼Œå› ä¸ºæ–‡æ¡£å¯èƒ½å…·æœ‰ä¸åŒçš„é¡µé¢å¤§å° åˆ é™¤PDFView#setSwipeVertical()æ–¹æ³• å®‰è£…æ·»åŠ åˆ°build.gradleï¼š compile &#39;com.github.barteksc:android-pdf-viewer:3.1.0-beta.1&#39; æˆ–è€…å¦‚æžœä½ æƒ³ä½¿ç”¨æ›´ç¨³å®šçš„ç‰ˆæœ¬ï¼š compile &#39;com.github.barteksc:android-pdf-viewer:2.8.2&#39; åº“åœ¨jcenterå­˜å‚¨åº“ä¸­å¯ç”¨ï¼Œå¯èƒ½å®ƒå¾ˆå¿«å°±ä¼šåœ¨Maven Centralä¸­ã€‚ ProGuardçš„å¦‚æžœæ‚¨ä½¿ç”¨çš„æ˜¯ProGuardï¼Œè¯·å°†ä»¥ä¸‹è§„åˆ™æ·»åŠ åˆ°proguardé…ç½®æ–‡ä»¶ä¸­ï¼š 1-keep class com.shockwave.** åœ¨å¸ƒå±€ä¸­åŒ…å«PDFView1234&lt;com.github.barteksc.pdfviewer.PDFView android:id=&quot;@+id/pdfView&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;/&gt; åŠ è½½PDFæ–‡ä»¶æ‰€æœ‰å¯ç”¨é€‰é¡¹éƒ½å¸¦æœ‰é»˜è®¤å€¼ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142pdfView.fromUri(Uri)orpdfView.fromFile(File)orpdfView.fromBytes(byte[])orpdfView.fromStream(InputStream) // stream is written to bytearray - native code cannot use Java StreamsorpdfView.fromSource(DocumentSource)orpdfView.fromAsset(String) .pages(0, 2, 1, 3, 3, 3) // all pages are displayed by default .enableSwipe(true) // allows to block changing pages using swipe .swipeHorizontal(false) .enableDoubletap(true) .defaultPage(0) // allows to draw something on the current page, usually visible in the middle of the screen .onDraw(onDrawListener) // allows to draw something on all pages, separately for every page. Called only for visible pages .onDrawAll(onDrawListener) .onLoad(onLoadCompleteListener) // called after document is loaded and starts to be rendered .onPageChange(onPageChangeListener) .onPageScroll(onPageScrollListener) .onError(onErrorListener) .onPageError(onPageErrorListener) .onRender(onRenderListener) // called after document is rendered for the first time // called on single tap, return true if handled, false to toggle scroll handle visibility .onTap(onTapListener) .onLongPress(onLongPressListener) .enableAnnotationRendering(false) // render annotations (such as comments, colors or forms) .password(null) .scrollHandle(null) .enableAntialiasing(true) // improve rendering a little bit on low-res screens // spacing between pages in dp. To define spacing color, set view background .spacing(0) .autoSpacing(false) // add dynamic spacing to fit each page on its own on the screen .linkHandler(DefaultLinkHandler) .pageFitPolicy(FitPolicy.WIDTH) .pageSnap(true) // snap pages to screen boundaries .pageFling(false) // make a fling change only a single page like ViewPager .nightMode(false) // toggle night mode .load(); æ³¨æ„pages æ˜¯å¯é€‰çš„ï¼Œå®ƒå…è®¸æ‚¨æ ¹æ®éœ€è¦è¿‡æ»¤å’ŒæŽ’åºPDFé¡µé¢ æ»šåŠ¨æ‰‹æŸ„Scroll handleæ˜¯ä»Ž1.xåˆ†æ”¯æ›¿æ¢ScrollBarã€‚ ä»Žç‰ˆæœ¬2.1.0å°†PDFViewæ”¾åœ¨RelativeLayoutä¸­ä»¥ä½¿ç”¨ScrollHandleä¸æ˜¯å¿…éœ€çš„ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•å¸ƒå±€ã€‚ è¦ä½¿ç”¨æ»šåŠ¨æ‰‹æŸ„ï¼Œåªéœ€ä½¿ç”¨æ–¹æ³•æ³¨å†Œå®ƒConfigurator#scrollHandle()ã€‚æ­¤æ–¹æ³•æŽ¥å—ScrollHandleæŽ¥å£çš„å®žçŽ°ã€‚ AndroidPdfVieweré™„å¸¦é»˜è®¤å®žçŽ°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒ .scrollHandle(new DefaultScrollHandle(this))ã€‚ DefaultScrollHandleä½äºŽå³ä¾§ï¼ˆåž‚ç›´æ»šåŠ¨æ—¶ï¼‰æˆ–åº•éƒ¨ï¼ˆæ°´å¹³æ»šåŠ¨æ—¶ï¼‰ã€‚é€šè¿‡ä½¿ç”¨å¸¦æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼ˆnew DefaultScrollHandle(this, true)ï¼‰çš„æž„é€ å‡½æ•°ï¼Œå¯ä»¥å°†å¥æŸ„æ”¾åœ¨å·¦ä¾§æˆ–é¡¶éƒ¨ã€‚ æ‚¨è¿˜å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰æ»šåŠ¨å¥æŸ„ï¼Œåªéœ€å®žçŽ°ScrollHandleç•Œé¢ã€‚æ‰€æœ‰æ–¹æ³•éƒ½è®°å½•ä¸ºæŽ¥å£æºä¸Šçš„Javadocæ³¨é‡Šã€‚ æ–‡ä»¶æ¥æº2.3.0ç‰ˆå¼•å…¥äº†æ–‡æ¡£æºï¼Œå®ƒä»¬åªæ˜¯PDFæ–‡æ¡£çš„æä¾›è€…ã€‚æ¯ä¸ªæä¾›ç¨‹åºéƒ½å®žçŽ°DocumentSourceæŽ¥å£ã€‚é¢„å®šä¹‰çš„æä¾›ç¨‹åºå¯ä»¥åœ¨com.github.barteksc.pdfviewer.sourceåŒ…ä¸­æ‰¾åˆ°ï¼Œå¯ä»¥ç”¨ä½œåˆ›å»ºè‡ªå®šä¹‰æä¾›ç¨‹åºçš„ç¤ºä¾‹ã€‚ é¢„å®šä¹‰çš„æä¾›ç¨‹åºå¯ä»¥ä¸Žé€Ÿè®°æ–¹æ³•ä¸€èµ·ä½¿ç”¨ï¼š 12345pdfView.fromUri(Uri)pdfView.fromFile(File)pdfView.fromBytes(byte[])pdfView.fromStream(InputStream)pdfView.fromAsset(String) è‡ªå®šä¹‰æä¾›ç¨‹åºå¯ä¸ŽpdfView.fromSource(DocumentSource)æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚ é“¾æŽ¥3.0.0ç‰ˆå¼•å…¥äº†å¯¹PDFæ–‡æ¡£ä¸­é“¾æŽ¥çš„æ”¯æŒã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨DefaultLinkHandler å¹¶å•å‡»å¼•ç”¨åŒä¸€æ–‡æ¡£ä¸­çš„é¡µé¢çš„é“¾æŽ¥ä¼šå¯¼è‡´è·³è½¬åˆ°ç›®æ ‡é¡µé¢å¹¶å•å‡»ä»¥æŸä¸ªURIä¸ºç›®æ ‡çš„é“¾æŽ¥å¯¼è‡´åœ¨é»˜è®¤åº”ç”¨ç¨‹åºä¸­æ‰“å¼€å®ƒã€‚ æ‚¨è¿˜å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰é“¾æŽ¥å¤„ç†ç¨‹åºï¼Œåªéœ€å®žçŽ°LinkHandleræŽ¥å£å¹¶ä½¿ç”¨Configurator#linkHandler(LinkHandler)æ–¹æ³•è¿›è¡Œè®¾ç½® ã€‚æŸ¥çœ‹DefaultLinkHandler æºä»¥å®žçŽ°è‡ªå®šä¹‰è¡Œä¸ºã€‚ é¡µé¢ç¬¦åˆæ”¿ç­–ä»Žç‰ˆæœ¬3.0.0å¼€å§‹ï¼Œåº“æ”¯æŒä»¥3ç§æ¨¡å¼å°†é¡µé¢è£…å…¥å±å¹•ï¼š å®½åº¦ - æœ€å®½é¡µé¢çš„å®½åº¦ç­‰äºŽå±å¹•å®½åº¦ é«˜åº¦ - æœ€é«˜é¡µé¢çš„é«˜åº¦ç­‰äºŽå±å¹•é«˜åº¦ BOTH - åŸºäºŽæœ€å®½å’Œæœ€é«˜çš„é¡µé¢ï¼Œæ¯ä¸ªé¡µé¢éƒ½ç¼©æ”¾ä¸ºåœ¨å±å¹•ä¸Šå®Œå…¨å¯è§ é™¤äº†é€‰å®šçš„ç­–ç•¥ä¹‹å¤–ï¼Œæ¯ä¸ªé¡µé¢éƒ½ä¼šç¼©æ”¾åˆ°ç›¸å¯¹äºŽå…¶ä»–é¡µé¢çš„å¤§å°ã€‚ å¯ä»¥ä½¿ç”¨é€‚åˆçš„ç­–ç•¥è¿›è¡Œè®¾ç½®Configurator#pageFitPolicy(FitPolicy)ã€‚é»˜è®¤ç­–ç•¥æ˜¯WIDTHã€‚ å…¶ä»–é€‰é¡¹ä½å›¾è´¨é‡é»˜è®¤æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„ä½å›¾ä½¿ç”¨æ ¼å¼åŽ‹ç¼©RGB_565ä»¥å‡å°‘å†…å­˜æ¶ˆè€—ã€‚ARGB_8888å¯ä»¥ä½¿ç”¨pdfView.useBestQuality(true)æ–¹æ³•å¼ºåˆ¶æ¸²æŸ“ã€‚ åŒå‡»ç¼©æ”¾æœ‰ä¸‰ç§ç¼©æ”¾çº§åˆ«ï¼šåˆ†é’Ÿï¼ˆé»˜è®¤1ï¼‰ï¼Œä¸­é—´ï¼ˆé»˜è®¤1.75ï¼‰å’Œæœ€å¤§ï¼ˆé»˜è®¤3ï¼‰ã€‚åœ¨ç¬¬ä¸€æ¬¡åŒå‡»æ—¶ï¼Œè§†å›¾ç¼©æ”¾åˆ°ä¸­ç­‰æ°´å¹³ï¼Œåœ¨ç¬¬äºŒä¸ªåˆ°æœ€å¤§æ°´å¹³ï¼Œç¬¬ä¸‰ä¸ªè¿”å›žåˆ°æœ€ä½Žæ°´å¹³ã€‚å¦‚æžœæ‚¨å¤„äºŽä¸­çº§å’Œæœ€é«˜çº§åˆ«ä¹‹é—´ï¼Œåˆ™åŒå‡»ä¼šå¯¼è‡´ç¼©æ”¾åˆ°æœ€å¤§å€¼ï¼Œä¾æ­¤ç±»æŽ¨ã€‚ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ›´æ”¹ç¼©æ”¾çº§åˆ«ï¼š 123void setMinZoom(float zoom);void setMidZoom(float zoom);void setMaxZoom(float zoom); å¯èƒ½çš„é—®é¢˜ä¸ºä»€ä¹ˆå¯¼è‡´apkå¤ªå¤§äº†ï¼ŸAndroid PdfViewerä¾èµ–äºŽPdfiumAndroidï¼Œå®ƒæ˜¯è®¸å¤šæž¶æž„çš„æœ¬æœºåº“é›†ï¼ˆå¤§çº¦16 MBï¼‰ã€‚Apkå¿…é¡»åŒ…å«æ‰€æœ‰è¿™äº›åº“ï¼Œä»¥ä¾¿åœ¨å¸‚åœºä¸Šçš„æ¯ä¸ªè®¾å¤‡ä¸Šè¿è¡Œã€‚å¹¸è¿çš„æ˜¯ï¼ŒGoogle Playå…è®¸æˆ‘ä»¬ä¸Šä¼ å¤šä¸ªapksï¼Œä¾‹å¦‚æ¯ä¸ªæž¶æž„ä¸€ä¸ªã€‚æœ‰ä¸€ç¯‡å…³äºŽè‡ªåŠ¨å°†æ‚¨çš„åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºå¤šä¸ªapksçš„æ–‡ç« ï¼Œå¯åœ¨æ­¤å¤„èŽ·å¾—ã€‚æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯ä½¿ç”¨APK Splitsæ”¹è¿›å¤šä¸ªAPKåˆ›å»ºå’Œç‰ˆæœ¬ä»£ç å¤„ç†ï¼Œä½†æ•´ç¯‡æ–‡ç« å€¼å¾—ä¸€è¯»ã€‚æ‚¨åªéœ€è¦åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œæ­¤æ“ä½œï¼Œæ— éœ€åˆ†æ”¯PdfiumAndroidç­‰ã€‚ ä¸ºä»€ä¹ˆæˆ‘æ— æ³•ä»ŽURLæ‰“å¼€PDFï¼Ÿä¸‹è½½æ–‡ä»¶æ˜¯ä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„è¿‡ç¨‹ï¼Œå¿…é¡»çŸ¥é“Activityç”Ÿå‘½å‘¨æœŸï¼Œå¿…é¡»æ”¯æŒä¸€äº›é…ç½®ï¼Œæ•°æ®æ¸…ç†å’Œç¼“å­˜ï¼Œå› æ­¤åˆ›å»ºè¿™æ ·çš„æ¨¡å—å¯èƒ½æœ€ç»ˆä¼šæˆä¸ºæ–°çš„åº“ã€‚ å¦‚ä½•åœ¨é…ç½®æ›´æ”¹åŽæ˜¾ç¤ºä¸Šæ¬¡æ‰“å¼€çš„é¡µé¢ï¼Ÿæ‚¨å¿…é¡»å­˜å‚¨å½“å‰é¡µç ç„¶åŽè¿›è¡Œè®¾ç½®pdfView.defaultPage(page)ï¼Œè¯·å‚é˜…ç¤ºä¾‹åº”ç”¨ç¨‹åº å¦‚ä½•å°†æ–‡æ¡£æ”¾å…¥å±å¹•å®½åº¦ï¼ˆä¾‹å¦‚ï¼Œæ–¹å‘æ›´æ”¹ï¼‰ï¼ŸFitPolicy.WIDTHå¦‚æžœè¦åœ¨å…·æœ‰ä¸åŒé¡µé¢å¤§å°çš„æ–‡æ¡£ä¸­æ”¾ç½®æ‰€éœ€é¡µé¢ï¼Œè¯·ä½¿ç”¨ç­–ç•¥æˆ–æ·»åŠ ä»¥ä¸‹ä»£ç æ®µï¼š 123456Configurator.onRender(new OnRenderListener() &#123; @Override public void onInitiallyRendered(int pages, float pageWidth, float pageHeight) &#123; pdfView.fitToWidth(pageIndex); &#125;&#125;); å¦‚ä½•åƒViewPagerä¸€æ ·æ»šåŠ¨æµè§ˆå•ä¸ªé¡µé¢ï¼Ÿæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è®¾ç½®çš„ç»„åˆæ¥èŽ·å¾—ç±»ä¼¼äºŽViewPagerçš„æ»šåŠ¨å’Œæ‹–åŠ¨è¡Œä¸ºï¼š 1234.swipeHorizontal(true).pageSnap(true).autoSpacing(true).pageFling(true) Demoåœ°å€ï¼šhttps://github.com/zhangmiaocc/AndroidPDFView å‚è€ƒï¼šhttps://github.com/barteksc/AndroidPdfViewer]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>PDF</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[androidæ—¥å¿—æ¡†æž¶Loggerçš„è¯¦ç»†ä½¿ç”¨ï¼ˆç›®å‰æœ€æ–°ç‰ˆ2.1.1ï¼‰]]></title>
    <url>%2Fposts%2Fe28061de.html</url>
    <content type="text"><![CDATA[å‰è¨€åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œlogæ—¥å¿—æ˜¯æ¯ä¸ªäººå¤šä¼šç”¨ä¸Šçš„ã€‚å¹³æ—¶åœ¨å¼€å‘å¤§é¡¹ç›®çš„æ—¶å€™ï¼Œå‡ ä¹Žæ¯ä¸ªç±»å¤šéœ€è¦åŠ logï¼Œç„¶è€Œåœ¨å‘å¸ƒä¹‹å‰ï¼Œè¦æ±‚å…¨éƒ¨åˆ é™¤ï¼ŒçœŸæ˜¯ç´¯ã€‚å› ä¸ºç³»ç»Ÿlogæš‚æ—¶æ²¡æœ‰ç»Ÿä¸€ç®¡ç†çš„æ–¹æ³•ã€‚è¿˜æœ‰å°±æ˜¯ï¼Œç‰¹åˆ«æ˜¯åœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œå¯¹äºŽçº¿ç¨‹å¹¶å‘æˆ–è€…å­çº¿ç¨‹çš„è°ƒè¯•ï¼Œè¿˜æ˜¯åŠ logè°ƒè¯•æ¯”è¾ƒç²¾ç¡®ï¼Œç”¨debugå·¥å…·è°ƒè¯•ç»å¸¸å’Œå®žé™…ä¸ç¬¦åˆã€‚é‚£ä¹ˆï¼Œå¦‚æžœä½¿ç”¨ç³»ç»Ÿlogï¼Œè°ƒè¯•å®Œåˆå¾—æ‰¾å‡ºæ¥åˆ é™¤ï¼Œç´¯++ã€‚ ä½œä¸ºç¨‹åºçŒ¿ï¼Œè¿™ç§ç¬¨æ–¹æ³•è‚¯å®šæ˜¯ä¼šé„™è§†çš„ã€‚å¯¹äºŽè¿™ç§éœ€æ±‚ï¼Œæˆ‘ä»¬è‡ªå·±å°è£…ä¸€ä¸ªç®€å•çš„å·¥å…·åŒ…ã€‚å½“ç„¶è¿™é‡Œä»‹ç»çš„æ˜¯ï¼Œgithubä¸Šå¾ˆå¤šäººç”¨logæ¡†æž¶ï¼šloggerã€‚ ç›¸ä¿¡å¾ˆå¤šäººå¤šç”¨è¿‡ï¼Œè¿™é‡Œç»™è¿˜æ²¡æœ‰å°è¯•è¿‡çš„äººç®€å•ä»‹ç»ä¸‹ï¼Œä½¿ç”¨ä¹Ÿè¶…çº§ç®€å•ã€‚ loggerä½œä¸ºè°ƒè¯•æ¡†æž¶ï¼Œå¯ä»¥æ”¯æŒå¤šç§æ ¼å¼ï¼š çº¿ç¨‹çš„ä¿¡æ¯ ç±»ã€æ–¹æ³•çš„ä¿¡æ¯ æ ¼å¼åŒ–å°† jsonã€xml è¾“å‡º æ”¯æŒå­—ç¬¦ä¸²æ ¼å¼å‚æ•° å„ç§é›†åˆè¾“å‡ºï¼Œlistã€mapã€arrayã€setç­‰ï¼Œï¼ˆåªæ”¯æŒdebugè¾“å‡ºï¼‰ æ”¯æŒä»Žæ—¥å¿—è·³è½¬åˆ°æºç  â€¦â€¦ å¦‚ä¸‹å›¾ï¼ˆå¼•ç”¨åŽŸä½œè€…ï¼‰ï¼š å¯ä»¥çœ‹å‡ºï¼Œå’Œç³»ç»Ÿå¯¹æ¯”ï¼Œå®ƒæœ€å¤§çš„äº®ç‚¹æ˜¯ä¼˜é›…çš„è¾“å‡ºlogä¿¡æ¯ï¼Œå½“ç„¶åŒæ—¶æä¾›å¾ˆå¤šå…¶ä»–ä¿¡æ¯ï¼Œä¸€ç›®äº†ç„¶ï¼Œæ›´æ¸…æ™°ï¼ å¦‚æžœä½ æ¯å¤©è¢«logæŠ˜ç£¨çš„ç”Ÿä¸å¦‚æ­»ï¼Œé‚£ä¹ˆè®©loggeræ¥æ‹¯æ•‘ä½ å§~ ä½œè€…ï¼šOrhan Obut githubï¼šhttps://github.com/orhanobut/logger ç›®å‰ï¼Œå°†è¿‘7.5kä¸ªstarè®©ä»–ä½åˆ—è°ƒè¯•æ¡†æž¶ç¬¬äºŒåï¼Œå±ˆå±…facebookçš„stethoä¹‹åŽ,8.5kä¸ªstarã€‚ä½†è¿™2ä¸ªè°ƒè¯•å·¥å…·åº”ç”¨åœºæ™¯ä¸ç”¨ï¼Œæ‰€ä»¥ç®€å•çš„è°ƒè¯•ï¼Œloggeræ˜¯æœ€ä½³é€‰æ‹©äº†ã€‚è¿™é‡Œç®€å•ä»‹ç»ä¸‹stethoï¼Œå®ƒæ˜¯ä¸€æ¬¾æä¾›åœ¨Chromeå¼€å‘è€…å·¥å…·ä¸Šè°ƒè¯•Android appçš„å¼€æºæ¡†æž¶ï¼Œå¯ä»¥åœ¨ChromeæŸ¥çœ‹æ•°æ®åº“ï¼Œä¸ç”¨æƒ³ä»¥å‰é‚£æ ·æŠŠæ•°æ®åº“å¯¼å‡ºï¼Œç„¶åŽåœ¨ç”¨å·¥å…·æŸ¥çœ‹ï¼›é…åˆç½‘ç»œæ¡†æž¶å¯ä»¥ç›´æŽ¥æ‰“å°æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„æ•°æ®ï¼Œè€Œä¸éœ€è¦ä¸€ä¸ªä¸€ä¸ªæ·»åŠ æ‰“å°å‡ºæ¥ï¼ŒçœåŽ»å¾ˆå¤šç¹ççš„äº‹æƒ…ã€‚æœ‰å…´è¶£çš„å¯ä»¥äº†è§£ï¼š ä½œè€…ï¼šFaceBook å®˜ç½‘åœ°å€ï¼š http://facebook.github.io/stetho/ github https://github.com/facebook/stetho ä½¿ç”¨Loggerä½¿ç”¨æ¡†æž¶ï¼Œæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¦‚æžœå¯ä»¥çœ‹è‹±æ–‡ç‰ˆï¼Œå¯ä»¥ç›´æŽ¥åˆ°https://github.com/orhanobut/loggeräº†è§£ã€‚ loggerç›®å‰çš„æœ€æ–°ç‰ˆæœ¬æ˜¯2.1.1ï¼Œç½‘ä¸Šä¹Ÿå¾ˆå¤šäººä½¿ç”¨1.15çš„ç‰ˆæœ¬ï¼Œå¦‚æžœä½¿ç”¨æœ€æ–°ç‰ˆï¼Œå•ç‹¬ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ˜¯æœ‰æŠ¥é”™çš„ã€‚å› ä¸ºï¼Œæœ€æ–°ç‰ˆåœ¨åˆå§‹åŒ–è¿™å—å’ŒåŽŸæ¥æœ‰äº†è¾ƒå¤§çš„æ”¹åŠ¨ã€‚ ä¸»è¦æ˜¯åˆå§‹åŒ–ã€å’ŒæŽ§åˆ¶Logæ‰“å°è¿™2æ–¹é¢ã€‚è¿™é‡Œä»‹ç»2.11çš„ç‰ˆæœ¬ä½¿ç”¨ï¼Œæ‰€ä»¥æƒ³å‡çº§çš„ä¹Ÿå¯ä»¥å¾€ä¸‹çœ‹çœ‹å“¦ã€‚ 3æ­¥ï¼Œåªè¦3æ­¥ï¼Œä½ å°±å­¦ä¼šä½¿ç”¨Loggerï¼Œè¯·ï¼š 1.å¯¼å…¥ä¾èµ– 1compile 'com.orhanobut:logger:2.1.1' 1Logger.addLogAdapter(new AndroidLogAdapter()); æ³¨ï¼šå¦‚æžœåœ¨Applicationä¸­åˆå§‹åŒ–ï¼Œè®°å¾—ä¿®æ”¹ AndroidManifest.xml ä¸­ application æ ‡ç­¾å±žæ€§ï¼Œæ·»åŠ  android:name=â€.MyApplicationâ€ ï¼Œä¸ç„¶ä¸ä¼šæ‰“å°ã€‚ 3.ä½¿ç”¨ 1Logger.d("hello"); å¦‚å›¾ï¼š å½“ç„¶ï¼Œå¦‚æžœè¿˜æœ‰è¿½æ±‚ï¼Œç»§ç»­å¾€ä¸‹çœ‹çœ‹å®ƒçš„å…¶ä»–åŠŸèƒ½ã€‚ æ”¯æŒçš„æ•°æ®ç±»åž‹æ™®é€šç±»åž‹12345public void testNormal()&#123; Logger.d("DEBUGæ—¥å¿—"); Logger.i("INFOæ—¥å¿—"); Logger.e("ERRORæ—¥å¿—");&#125; Formatç±»åž‹123public void testFormat()&#123; Logger.d("hello %s, luck number is %d", "world", 5); &#125; é›†åˆç±»åž‹é¦–å…ˆçœ‹çœ‹Listï¼š 1234List list = new ArrayList();list.add("hello");list.add("world");Logger.d(list); 1Log.d(TAG, list.toString()); é¦–å…ˆæ˜¯è°ƒç”¨ï¼š 123@Override public void d(Object object) &#123; log(DEBUG, null, Utils.toString(object)); &#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public static String toString(Object object) &#123; if (object == null) &#123; return "null"; &#125; if (!object.getClass().isArray()) &#123; return object.toString(); &#125; if (object instanceof boolean[]) &#123; return Arrays.toString((boolean[]) object); &#125; if (object instanceof byte[]) &#123; return Arrays.toString((byte[]) object); &#125; if (object instanceof char[]) &#123; return Arrays.toString((char[]) object); &#125; if (object instanceof short[]) &#123; return Arrays.toString((short[]) object); &#125; if (object instanceof int[]) &#123; return Arrays.toString((int[]) object); &#125; if (object instanceof long[]) &#123; return Arrays.toString((long[]) object); &#125; if (object instanceof float[]) &#123; return Arrays.toString((float[]) object); &#125; if (object instanceof double[]) &#123; return Arrays.toString((double[]) object); &#125; if (object instanceof Object[]) &#123; return Arrays.deepToString((Object[]) object); &#125; return "Couldn't find a correct type for the object"; &#125; è¿™æ ·å°±ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±è°ƒç”¨toString()ï¼Œç›´æŽ¥å¯ä»¥æ‰“å°äº†ã€‚ å…¶ä»–çš„æ•°æ®ç»“æž„ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œçœ‹å›¾å°±å¯ä»¥äº†ï¼š 123456789101112131415161718192021222324public void testCollections()&#123; /** * Map */ Map map = new HashMap(); map.put("map1","hello"); map.put("map2","world"); Logger.d(map); /** * Set */ Set set = new HashSet(); set.add("hello"); set.add("world"); Logger.d(set); /** * Array */ String [] strs = &#123;"hello", "world"&#125;; Logger.d(strs); &#125; *æ³¨ï¼šæ‰“å°é›†åˆçš„æ—¶å€™ï¼Œç‰¹åˆ«æ˜¯æ•°ç»„æ—¶ï¼Œå‰é¢ä¸è¦æ·»åŠ å…¶ä»–å­—ç¬¦ï¼Œå¦‚ï¼šLogger.d(â€œæ•°ç»„é›†åˆâ€+strs);è¿™æ ·ä¼šæŠŠæ•´ä½“å½“åšä¸€ä¸ªå‚æ•°ï¼Œå¯¼è‡´åˆ¤æ–­é”™è¯¯ï¼Œä¸èƒ½æ­£å¸¸è¾“å‡ºæ•°ç»„ç±»åž‹ã€‚å…¶æ¬¡æ˜¯ï¼Œä½œè€…æç¤ºï¼Œæ‰“å°é›†åˆæ—¶ï¼Œä½¿ç”¨DEBUGç­‰çº§ã€‚* JSONæ•°æ®123456public void testJson()&#123; String jsonDate = "&#123;\"id\":859,\"channelnumber\":681,\"bilingual\":0,\"name\":\"beIN Sports 2 English 600K H265\",\n" +" \"language\":\"EN\",\n" +" \"videotype\":\"MPEG2\",\"audiotype\":\"MPEP1\",\"callsign\":\"beIN Sports 2 English 600K H265\",\"country\":\"cn\"&#125;;"; Logger.json(jsonDate); Log.d(TAG, jsonDate); &#125; XMLæ•°æ®1234567891011121314public void testXml() &#123; String xmlDate = "&lt;province id=\"01\" name=\"åŒ—äº¬\"&gt; \n" + " &lt;city id=\"0101\" name=\"åŒ—äº¬\"&gt; \n" + " &lt;county id=\"010101\" name=\"åŒ—äº¬\" weatherCode=\"101010100\"/&gt; \n" + " &lt;county id=\"010102\" name=\"æµ·æ·€\" weatherCode=\"101010200\"/&gt; \n" + " &lt;county id=\"010103\" name=\"æœé˜³\" weatherCode=\"101010300\"/&gt; \n" + " &lt;county id=\"010110\" name=\"çŸ³æ™¯å±±\" weatherCode=\"101011000\"/&gt; \n" + " &lt;/city&gt; \n" + " &lt;/province&gt; "; Logger.xml(xmlDate); Log.d(TAG, xmlDate); &#125; ä¿®æ”¹é»˜è®¤é…ç½®æœ€æ–°ç‰ˆä¿®æ”¹é…ç½®ï¼Œå’Œæ—§ç‰ˆä¹Ÿæ˜¯æœ‰ä¸åŒï¼Œå¦‚ä¸‹ï¼š 12345678FormatStrategy formatStrategy = PrettyFormatStrategy.newBuilder() .showThreadInfo(false) //ï¼ˆå¯é€‰ï¼‰æ˜¯å¦æ˜¾ç¤ºçº¿ç¨‹ä¿¡æ¯ã€‚ é»˜è®¤å€¼ä¸ºtrue .methodCount(2) // ï¼ˆå¯é€‰ï¼‰è¦æ˜¾ç¤ºçš„æ–¹æ³•è¡Œæ•°ã€‚ é»˜è®¤2 .methodOffset(7) // ï¼ˆå¯é€‰ï¼‰è®¾ç½®è°ƒç”¨å †æ ˆçš„å‡½æ•°åç§»å€¼ï¼Œ0çš„è¯åˆ™ä»Žæ‰“å°è¯¥Logçš„å‡½æ•°å¼€å§‹è¾“å‡ºå †æ ˆä¿¡æ¯ï¼Œé»˜è®¤æ˜¯0 .logStrategy(customLog) //ï¼ˆå¯é€‰ï¼‰æ›´æ”¹è¦æ‰“å°çš„æ—¥å¿—ç­–ç•¥ã€‚ é»˜è®¤LogCat .tag("MyTAG") //ï¼ˆå¯é€‰ï¼‰æ¯ä¸ªæ—¥å¿—çš„å…¨å±€æ ‡è®°ã€‚ é»˜è®¤PRETTY_LOGGERï¼ˆå¦‚ä¸Šå›¾ï¼‰ .build();Logger.addLogAdapter(new AndroidLogAdapter(formatStrategy)); å…·ä½“é…ç½®å¤§å®¶å¯ä»¥è‡ªè¡ŒåŽ»å®žè·µä¸‹ã€‚ä¸€èˆ¬é»˜è®¤å°±å¯ä»¥äº†ï¼Œè¿™é‡Œè¯´ä¸‹ï¼Œä¿®æ”¹å…¨å±€çš„TAGï¼Œå’Œå±€éƒ¨çš„TAGã€‚ 1.ä¿®æ”¹å…¨å±€çš„TAGï¼Œåœ¨åˆå§‹åŒ–çš„applicationä¸­ä¿®æ”¹ï¼Œå¦‚ï¼š 1234FormatStrategy formatStrategy = PrettyFormatStrategy.newBuilder() .tag("MyTAG") .build();Logger.addLogAdapter(new AndroidLogAdapter(formatStrategy)); 2.ä¿®æ”¹å±€éƒ¨çš„TAGï¼Œå“ªé‡Œæ‰“å°å°±åœ¨å“ªé‡Œä¿®æ”¹ï¼Œåªå¯¹å½“å‰æ‰“å°æœ‰æ•ˆï¼Œå¦‚ï¼š 1234public void testNormal()&#123; Logger.t("hello").d("DEBUGæ—¥å¿—"); Logger.i("INFOæ—¥å¿—"); &#125; *æ³¨ï¼šå¦‚æžœå°è¯•ç”¨å±€éƒ¨çš„æ–¹æ³•ï¼Œåœ¨applicationåˆå§‹åŒ–æ—¶ä¿®æ”¹ã€‚å½“ç„¶ï¼Œè¿™æ˜¯æœ‰æ•ˆæžœçš„ï¼Œä½†åªèƒ½ç”¨ä¸€æ¬¡ï¼Œå…¶ä»–æ‰“å°è¿˜æ˜¯ä¼šç”¨å…¨å±€çš„ï¼Œå¯è‡ªè¡Œæµ‹è¯•ã€‚* æŽ§åˆ¶æ‰“å°å¼€å…³è¿™ä¸ªåŠŸèƒ½æ˜¯æœ€å–œæ¬¢çš„äº†ï¼Œå½“æˆ‘ä»¬å‘å¸ƒè½¯ä»¶ï¼Œæˆ–è€…å¤ªå¤šçš„logå½±å“æ€§èƒ½ï¼Œé‚£ä¹ˆå°±å¯ä»¥å…³é—­loggeræ‰“å°ï¼Œåœ¨applicationåˆå§‹åŒ–çš„åœ°æ–¹ï¼š 1234567Logger.addLogAdapter(new AndroidLogAdapter() &#123; @Override public boolean isLoggable(int priority, String tag) &#123; return BuildConfig.DEBUG; &#125;&#125;); é€šè¿‡é€‚é…å™¨æŽ§åˆ¶æ‰“å°ï¼Œåªè¦è¦†ç›–isLoggable()æ–¹æ³•ï¼Œè¿”å›žBuildConfig.DEBUGå³å¯ã€‚è¿™æ ·å­ï¼Œlogå°±ä¸å†æ‰“å°å‡ºæ¥äº†ã€‚ *æ³¨ï¼šè¿”å›žå€¼å¯¼å…¥çš„åŒ…æ˜¯ï¼šimport com.orhanobut.logger.BuildConfig; æœ‰æ—¶é¡ºæ‰‹å¯¼å…¥ï¼šcom.gotechcn.frameworksï¼Œé‚£å°±æ²¡æœ‰æ•ˆæžœã€‚* ä¿å­˜logåˆ°æ–‡ä»¶1Logger.addLogAdapter(new DiskLogAdapter()); é€šè¿‡æ‰“å°ï¼Œæ‰¾åˆ°ä¿å­˜çš„è·¯å¾„ï¼š /storage/emulated/0 ä½†æ‰‹æœºé‡Œé¢å°±æ˜¯æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸çŸ¥é“ä»€ä¹ˆåŽŸå› ï¼ŒçœŸæœºå’Œæ¨¡æ‹Ÿæœºå¤šæ²¡æœ‰ï¼ŒçŸ¥é“å¯ä»¥ç•™è¨€å™¢ï¼Œæ„Ÿè°¢ï¼ å·¥ä½œæµç¨‹åŽŸç†å›¾loggæ¡†æž¶çš„æ•´ä½“æµç¨‹å¦‚å›¾ï¼ˆä½œè€…åŽŸå›¾ï¼‰ï¼š å…¶ä»–å¯¹Logä¿¡æ¯çš„è®¾ç½®ä¸Žè¿‡æ»¤ï¼š Filterï¼šç¼–è¾‘é»˜è®¤æˆ–è€…è‡ªå®šä¹‰çš„æ ‡ç­¾ï¼Œè¿‡æ»¤æ ‡ç­¾ä»¥å¤–çš„ä¿¡æ¯ï¼› Disableï¼šè®¾ç½®user soft wrapsï¼Œå³è®¾ç½®æ¢è¡Œ Settingï¼šè®¾ç½®logå¤´éƒ¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ—¶é—´ã€çº¿ç¨‹PIDã€åŒ…åã€TAGç­‰å¼€å…³è®¾ç½® å¥½äº†ï¼Œå¯¹äºŽLoggeræ¡†æž¶çš„ä»‹ç»å°±åˆ°è¿™é‡Œäº†ã€‚æœ‰æ—¶ä¼šæ›´æ–°ï¼Œè®°å¾—ä½¿ç”¨æ—¶çœ‹çœ‹GitHubå‡çº§äº†æ²¡æœ‰ï¼ŒåŒæ—¶åœ¨ä½¿ç”¨æ˜¯å¦å’Œä»¥å‰å…¼å®¹ã€‚å¯¹äºŽä¸€äº›å…¶ä»–çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æŽ¥çœ‹æºç ï¼Œå…·ä½“æ˜¯å¹²ä»€ä¹ˆç”¨çš„ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>æ¡†æž¶</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Log</tag>
        <tag>æ¡†æž¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Lottie Android For Animation]]></title>
    <url>%2Fposts%2F1444979e.html</url>
    <content type="text"><![CDATA[Lottieæ˜¯ä¸€ä¸ªæ”¯æŒAndroidã€iOSã€React Nativeï¼Œå¹¶ç”± Adobe After Effectsåˆ¶ä½œaepæ ¼å¼çš„åŠ¨ç”»ï¼Œç„¶åŽç»ç”±bodymovinæ’ä»¶è½¬åŒ–æ¸²æŸ“ä¸ºjsonæ ¼å¼å¯è¢«ç§»åŠ¨ç«¯æœ¬åœ°è¯†åˆ«è§£æžçš„Airbnbå¼€æºåº“ã€‚Lottieå®žæ—¶å‘ˆçŽ°After EffectsåŠ¨ç”»æ•ˆæžœï¼Œè®©åº”ç”¨ç¨‹åºå¯ä»¥åƒä½¿ç”¨é™æ€å›¾ç‰‡ä¸€æ ·è½»æ¾åœ°ä½¿ç”¨åŠ¨ç”»ã€‚Lottieæ”¯æŒAPI 14åŠä»¥ä¸Šã€‚ ä¸€ã€é¢„è§ˆ äºŒ ã€åŸºæœ¬ä½¿ç”¨ åœ¨è‡ªå·±é¡¹ç›®moduleçš„build.gradleæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123dependencies &#123; compile 'com.airbnb.android:lottie:2.0.0-beta4'&#125; LottieAnimationViewä½¿ç”¨æœ€ç®€å•çš„æ–¹æ³•æ˜¯: 1234567&lt;com.airbnb.lottie.LottieAnimationView android:id="@+id/animation_view" android:layout_width="wrap_content" android:layout_height="wrap_content" app:lottie_fileName="hello-world.json" app:lottie_loop="true" app:lottie_autoPlay="true" /&gt; å…¶ä¸­lottie_loopå±žæ€§ä¸ºæ˜¯å¦é‡å¤æ— é™æœŸåŠ¨ç”»ï¼Œå½“ä¸ºtrueæ—¶ï¼ŒåŠ¨ç”»æ— é™æ¬¡æ•°æ’­æ”¾ï¼Œä¸ºfalseæ—¶ï¼Œæ’­æ”¾ä¸€æ¬¡ã€‚ æˆ–è€…æŠŠjsonèµ„æºæ”¾åœ¨app/src/main/assetsä¸‹ï¼Œä¹Ÿå¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒ: 1234LottieAnimationView animationView = (LottieAnimationView) findViewById(R.id.animation_view);animationView.setAnimation(&quot;hello-world.json&quot;);animationView.loop(true);animationView.playAnimation(); è¯¥æ–¹æ³•å°†åŠ è½½æ–‡ä»¶å¹¶åœ¨åŽå°è§£æžåŠ¨ç”»ï¼Œåœ¨å®ŒæˆåŽå¼‚æ­¥å¼€å§‹å‘ˆçŽ°ã€‚ å¦‚æžœæ‚¨å¸Œæœ›é‡ç”¨ä¸€ä¸ªåŠ¨ç”»ï¼Œä¾‹å¦‚åœ¨åˆ—è¡¨çš„æ¯ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ–è€…ä»Žä¸€ä¸ªç½‘ç»œè¯·æ±‚JSONObjectä¸­åŠ è½½å®ƒ: 123456789LottieAnimationView animationView = (LottieAnimationView) findViewById(R.id.animation_view);...Cancellable compositionCancellable = LottieComposition.Factory.fromJson(getResources(), jsonObject, (composition) -&gt; &#123; animationView.setComposition(composition); animationView.playAnimation();&#125;);// å–æ¶ˆå¼‚æ­¥åŠ è½½// compositionCancellable.cancel(); ä½ ä¹Ÿå¯ä»¥æŽ§åˆ¶åŠ¨ç”»æ·»åŠ ç›‘å¬ï¼š 1234567891011121314151617181920animationView.addAnimatorUpdateListener((animation) -&gt; &#123; // Do something.&#125;);animationView.playAnimation();...if (animationView.isAnimating()) &#123; // Do something.&#125;...animationView.setProgress(0.5f);...// è‡ªå®šä¹‰åŠ¨ç”»é€Ÿåº¦å’Œæ—¶é•¿ValueAnimator animator = ValueAnimator.ofFloat(0f, 1f) .setDuration(500);animator.addUpdateListener(animation -&gt; &#123; animationView.setProgress(animation.getAnimatedValue());&#125;);animator.start();...animationView.cancelAnimation(); ä½ å¯ä»¥ç»™æ•´ä¸ªåŠ¨ç”»ï¼Œä¸€ä¸ªç‰¹å®šçš„å›¾å±‚ï¼Œæˆ–è€…ä¸€ä¸ªå›¾å±‚çš„ç‰¹å®šå†…å®¹æ·»åŠ ä¸€ä¸ªé¢œè‰²è¿‡æ»¤å™¨ã€‚ 1234567891011121314// ä»»ä½•ç¬¦åˆé¢œè‰²è¿‡æ»¤ç•Œé¢çš„ç±»final PorterDuffColorFilter colorFilter = new PorterDuffColorFilter(Color.RED, PorterDuff.Mode.LIGHTEN);// åœ¨æ•´ä¸ªè§†å›¾ä¸­æ·»åŠ ä¸€ä¸ªé¢œè‰²è¿‡æ»¤å™¨animationView.addColorFilter(colorFilter);//åœ¨ç‰¹å®šçš„å›¾å±‚ä¸­æ·»åŠ ä¸€ä¸ªé¢œè‰²æ»¤é•œanimationView.addColorFilterToLayer("hello_layer", colorFilter);// æ·»åŠ ä¸€ä¸ªå½©è‰²è¿‡æ»¤å™¨ç‰¹æ•ˆâ€œhello_layerâ€ä¸Šçš„å†…å®¹animationView.addColorFilterToContent("hello_layer", "hello", colorFilter);// æ¸…é™¤æ‰€æœ‰çš„é¢œè‰²æ»¤é•œanimationView.clearColorFilters(); æ³¨æ„:é¢œè‰²è¿‡æ»¤å™¨åªé€‚ç”¨äºŽå›¾å±‚ï¼Œå¦‚å›¾åƒå±‚å’Œå®žå±‚ï¼Œä»¥åŠåŒ…å«å¡«å……ã€æè¾¹æˆ–ç»„å†…å®¹çš„å†…å®¹ã€‚ åœ¨å¼•æ“Žç›–ä¸‹,LottieAnimationViewä½¿ç”¨LottieDrawableå‘ˆçŽ°å…¶åŠ¨ç”»ã€‚å¦‚æžœéœ€è¦ï¼Œæ‚¨å¯ä»¥ç›´æŽ¥ä½¿ç”¨å¯ç»˜åˆ¶çš„è¡¨å•: 1234LottieDrawable drawable = new LottieDrawable();LottieComposition.Factory.fromAssetFileName(getContext(), "hello-world.json", (composition) -&gt; &#123; drawable.setComposition(composition);&#125;); å¦‚æžœä½ çš„åŠ¨ç”»ä¼šç»å¸¸é‡ç”¨,LottieAnimationViewå†…ç½®äº†ä¸€ä¸ªå¯é€‰çš„ç¼“å­˜ç­–ç•¥ã€‚ä½¿ç”¨LottieAnimationView .setAnimation(String,CacheStrategy)ã€‚CacheStrategyå¯ä»¥Strong, Weak, æˆ–è€…Noneã€‚LottieAnimationViewå¯¹åŠ è½½å’Œè§£æžçš„åŠ¨ç”»æŒæœ‰å¼ºæˆ–å¼±çš„å‚è€ƒã€‚å¼±æˆ–å¼ºè¡¨ç¤ºç¼“å­˜ä¸­ç»„åˆçš„GCå‚è€ƒå¼ºåº¦ã€‚ ä¸‰ã€Image æ”¯æŒå¦‚æžœæ‚¨çš„åŠ¨ç”»æ˜¯ä»Žassetsä¸­åŠ è½½çš„ï¼Œå¹¶ä¸”æ‚¨çš„å›¾åƒæ–‡ä»¶ä½äºŽassets çš„å­ç›®å½•ä¸­ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å¯¹å›¾åƒè¿›è¡ŒåŠ¨ç”»ã€‚ä½ å¯ä»¥ç”¨LottieAnimationViewæˆ–è€…LottieDrawableå¯¹è±¡è°ƒç”¨setImageAssetsFolder(String)æ–¹æ³•ï¼Œæ˜Žç¡®assetsç›¸å¯¹æ–‡ä»¶å¤¹å†…çš„è·¯å¾„,ç¡®ä¿å›¾åƒbodymovinå‡ºå£ä¸Žä»–ä»¬çš„åå­—ä¸å˜,æ–‡ä»¶å¤¹åº”è¯¥img_ å¼€å¤´ã€‚å¦‚æžœç›´æŽ¥ä½¿ç”¨LottieDrawable,å½“ä½ å®Œæˆæ—¶æ‚¨å¿…é¡»è°ƒç”¨recycleBitmapsã€‚ å¦‚æžœä½ éœ€è¦æä¾›ä½ è‡ªå·±çš„ä½å›¾ï¼Œå¦‚æžœä½ ä»Žç½‘ç»œæˆ–å…¶ä»–åœ°æ–¹ä¸‹è½½ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªå§”æ‰˜æ¥åšè¿™ä¸ª: 12345animationView.setImageAssetDelegate(new ImageAssetDelegate() &#123; @Override public Bitmap fetchBitmap(LottieImageAsset asset) &#123; getBitmap(asset); &#125; &#125;); å››ã€æ€§èƒ½å’Œå†…å­˜å¦‚æžœè¯¥ç»„åˆæ²¡æœ‰é®ç½©æˆ–mattesï¼Œé‚£ä¹ˆæ€§èƒ½å’Œå†…å­˜å¼€é”€åº”è¯¥ç›¸å½“ä¸é”™ã€‚æ²¡æœ‰åˆ›å»ºä»»ä½•ä½å›¾ï¼Œå¤§å¤šæ•°æ“ä½œéƒ½æ˜¯ç®€å•çš„ç”»å¸ƒç»˜åˆ¶æ“ä½œã€‚å¦‚æžœè¿™ä¸ªç»„åˆæœ‰é®ç½©æˆ–mattesï¼Œå°±ä¼šä½¿ç”¨å±å¹•å¤–çš„ç¼“å†²åŒºï¼Œå¹¶ä¸”ä¼šæœ‰ä¸€ä¸ªæ€§èƒ½æ‰“å‡»ã€‚ å¦‚æžœåœ¨ä½ çš„åŠ¨ç”»åˆ—è¡¨ä¸­ä½¿ç”¨,æŽ¨èä½¿ç”¨CacheStrategyï¼Œåœ¨è°ƒç”¨LottieAnimationView.setAnimation(String, CacheStrategy)çš„æ—¶å€™ï¼Œæ‰€ä»¥åŠ¨ç”»ä¸éœ€è¦æ¯æ¬¡éƒ½ååºåˆ—åŒ–ã€‚ äº”ã€Lottieå®˜æ–¹Demoä¸‹è½½https://fir.im/lottiedemo å…­ã€å‚è€ƒèµ„æ–™http://airbnb.design/lottie/ http://www.lottiefiles.com/ https://github.com/airbnb/lottie-android http://www.adobe.com/cn/products/aftereffects.html https://github.com/bodymovin/bodymovin https://github.com/airbnb/lottie-react-native https://github.com/airbnb/lottie-ios https://github.com/airbnb]]></content>
      <categories>
        <category>Android</category>
        <category>Animation</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Animation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Appçš„è®¾è®¡æž¶æž„ï¼šMVC,MVP,MVVMä¸Žæž¶æž„ç»éªŒè°ˆ]]></title>
    <url>%2Fposts%2Faf73114b.html</url>
    <content type="text"><![CDATA[å’ŒMVCæ¡†æž¶æ¨¡å¼ä¸€æ ·ï¼ŒModelæ¨¡åž‹å¤„ç†æ•°æ®ä»£ç ä¸å˜åœ¨Androidçš„Appå¼€å‘ä¸­ï¼Œå¾ˆå¤šäººç»å¸¸ä¼šå¤´ç–¼äºŽAppçš„æž¶æž„å¦‚ä½•è®¾è®¡ï¼š æˆ‘çš„Appéœ€è¦åº”ç”¨è¿™äº›è®¾è®¡æž¶æž„å—ï¼Ÿ MVC,MVPç­‰æž¶æž„è®²çš„æ˜¯ä»€ä¹ˆï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ æœ¬æ–‡å°±æ¥å¸¦ä½ åˆ†æžä¸€ä¸‹è¿™å‡ ä¸ªæž¶æž„çš„ç‰¹æ€§ï¼Œä¼˜ç¼ºç‚¹ï¼Œä»¥åŠAppæž¶æž„è®¾è®¡ä¸­åº”è¯¥æ³¨æ„çš„é—®é¢˜ã€‚ 1.æž¶æž„è®¾è®¡çš„ç›®çš„é€šè¿‡è®¾è®¡ä½¿ç¨‹åºæ¨¡å—åŒ–ï¼Œåšåˆ°æ¨¡å—å†…éƒ¨çš„é«˜èšåˆå’Œæ¨¡å—ä¹‹é—´çš„ä½Žè€¦åˆã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ä½¿å¾—ç¨‹åºåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œå¼€å‘äººå‘˜åªéœ€è¦ä¸“æ³¨äºŽä¸€ç‚¹ï¼Œæé«˜ç¨‹åºå¼€å‘çš„æ•ˆçŽ‡ï¼Œå¹¶ä¸”æ›´å®¹æ˜“è¿›è¡ŒåŽç»­çš„æµ‹è¯•ä»¥åŠå®šä½é—®é¢˜ã€‚ä½†è®¾è®¡ä¸èƒ½è¿èƒŒç›®çš„ï¼Œå¯¹äºŽä¸åŒé‡çº§çš„å·¥ç¨‹ï¼Œå…·ä½“æž¶æž„çš„å®žçŽ°æ–¹å¼å¿…ç„¶æ˜¯ä¸åŒçš„ï¼Œåˆ‡å¿ŒçŠ¯ä¸ºäº†è®¾è®¡è€Œè®¾è®¡ï¼Œä¸ºäº†æž¶æž„è€Œæž¶æž„çš„æ¯›ç—…ã€‚ ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š ä¸€ä¸ªAndroid Appå¦‚æžœåªæœ‰3ä¸ªJavaæ–‡ä»¶ï¼Œé‚£åªéœ€è¦åšç‚¹æ¨¡å—å’Œå±‚æ¬¡çš„åˆ’åˆ†å°±å¯ä»¥ï¼Œå¼•å…¥æ¡†æž¶æˆ–è€…æž¶æž„åè€Œæé«˜äº†å·¥ä½œé‡ï¼Œé™ä½Žäº†ç”Ÿäº§åŠ›ï¼› ä½†å¦‚æžœå½“å‰å¼€å‘çš„Appæœ€ç»ˆä»£ç é‡åœ¨10Wè¡Œä»¥ä¸Šï¼Œæœ¬åœ°éœ€è¦è¿›è¡Œå¤æ‚æ“ä½œï¼ŒåŒæ—¶ä¹Ÿéœ€è¦è€ƒè™‘åˆ°ä¸Žå…¶ä½™çš„Androidå¼€å‘è€…ä»¥åŠåŽå°å¼€å‘äººå‘˜ä¹‹é—´çš„åŒæ­¥é…åˆï¼Œé‚£å°±éœ€è¦åœ¨æž¶æž„ä¸Šè¿›è¡Œä¸€äº›æ€è€ƒï¼ 2.MVCè®¾è®¡æž¶æž„ MVCç®€ä»‹MVCå…¨åæ˜¯Model View Controllerï¼Œå¦‚å›¾ï¼Œæ˜¯æ¨¡åž‹(model)ï¼è§†å›¾(view)ï¼æŽ§åˆ¶å™¨(controller)çš„ç¼©å†™ï¼Œä¸€ç§è½¯ä»¶è®¾è®¡å…¸èŒƒï¼Œç”¨ä¸€ç§ä¸šåŠ¡é€»è¾‘ã€æ•°æ®ã€ç•Œé¢æ˜¾ç¤ºåˆ†ç¦»çš„æ–¹æ³•ç»„ç»‡ä»£ç ï¼Œåœ¨æ”¹è¿›å’Œä¸ªæ€§åŒ–å®šåˆ¶ç•Œé¢åŠç”¨æˆ·äº¤äº’çš„åŒæ—¶ï¼Œä¸éœ€è¦é‡æ–°ç¼–å†™ä¸šåŠ¡é€»è¾‘ã€‚ å…¶ä¸­Må±‚å¤„ç†æ•°æ®ï¼Œä¸šåŠ¡é€»è¾‘ç­‰ï¼›Vå±‚å¤„ç†ç•Œé¢çš„æ˜¾ç¤ºç»“æžœï¼›Cå±‚èµ·åˆ°æ¡¥æ¢çš„ä½œç”¨ï¼Œæ¥æŽ§åˆ¶Vå±‚å’ŒMå±‚é€šä¿¡ä»¥æ­¤æ¥è¾¾åˆ°åˆ†ç¦»è§†å›¾æ˜¾ç¤ºå’Œä¸šåŠ¡é€»è¾‘å±‚ã€‚ Androidä¸­çš„MVCAndroidä¸­ç•Œé¢éƒ¨åˆ†ä¹Ÿé‡‡ç”¨äº†å½“å‰æ¯”è¾ƒæµè¡Œçš„MVCæ¡†æž¶ï¼Œåœ¨Androidä¸­ï¼š è§†å›¾å±‚(View) ä¸€èˆ¬é‡‡ç”¨XMLæ–‡ä»¶è¿›è¡Œç•Œé¢çš„æè¿°ï¼Œè¿™äº›XMLå¯ä»¥ç†è§£ä¸ºAndroidAppçš„Viewã€‚ä½¿ç”¨çš„æ—¶å€™å¯ä»¥éžå¸¸æ–¹ä¾¿çš„å¼•å…¥ã€‚åŒæ—¶ä¾¿äºŽåŽæœŸç•Œé¢çš„ä¿®æ”¹ã€‚é€»è¾‘ä¸­ä¸Žç•Œé¢å¯¹åº”çš„idä¸å˜åŒ–åˆ™ä»£ç ä¸ç”¨ä¿®æ”¹ï¼Œå¤§å¤§å¢žå¼ºäº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚ æŽ§åˆ¶å±‚(Controller) Androidçš„æŽ§åˆ¶å±‚çš„é‡ä»»é€šå¸¸è½åœ¨äº†ä¼—å¤šçš„Activityçš„è‚©ä¸Šã€‚è¿™å¥è¯ä¹Ÿå°±æš—å«äº†ä¸è¦åœ¨Activityä¸­å†™ä»£ç ï¼Œè¦é€šè¿‡Activityäº¤å‰²Modelä¸šåŠ¡é€»è¾‘å±‚å¤„ç†ï¼Œè¿™æ ·åšçš„å¦å¤–ä¸€ä¸ªåŽŸå› æ˜¯Androidä¸­çš„Actiivityçš„å“åº”æ—¶é—´æ˜¯5sï¼Œå¦‚æžœè€—æ—¶çš„æ“ä½œæ”¾åœ¨è¿™é‡Œï¼Œç¨‹åºå°±å¾ˆå®¹æ˜“è¢«å›žæ”¶æŽ‰ã€‚ æ¨¡åž‹å±‚(Model) æˆ‘ä»¬é’ˆå¯¹ä¸šåŠ¡æ¨¡åž‹ï¼Œå»ºç«‹çš„æ•°æ®ç»“æž„å’Œç›¸å…³çš„ç±»ï¼Œå°±å¯ä»¥ç†è§£ä¸ºAndroidAppçš„Modelï¼ŒModelæ˜¯ä¸ŽViewæ— å…³ï¼Œè€Œä¸Žä¸šåŠ¡ç›¸å…³çš„ï¼ˆæ„Ÿè°¢@Xanderçš„è®²è§£ï¼‰ã€‚å¯¹æ•°æ®åº“çš„æ“ä½œã€å¯¹ç½‘ç»œç­‰çš„æ“ä½œéƒ½åº”è¯¥åœ¨Modelé‡Œé¢å¤„ç†ï¼Œå½“ç„¶å¯¹ä¸šåŠ¡è®¡ç®—ç­‰æ“ä½œä¹Ÿæ˜¯å¿…é¡»æ”¾åœ¨çš„è¯¥å±‚çš„ã€‚å°±æ˜¯åº”ç”¨ç¨‹åºä¸­äºŒè¿›åˆ¶çš„æ•°æ®ã€‚ MVCä»£ç å®žä¾‹æˆ‘ä»¬æ¥çœ‹çœ‹MVCåœ¨Androidå¼€å‘ä¸­æ˜¯æ€Žä¹ˆåº”ç”¨çš„å§ï¼ å…ˆä¸Šç•Œé¢å›¾ ControlleræŽ§åˆ¶å™¨&amp;View 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253public class MainActivity extends ActionBarActivity implements OnWeatherListener, View.OnClickListener &#123; private WeatherModel weatherModel; private EditText cityNOInput; private TextView city; ... @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); weatherModel = new WeatherModelImpl(); initView(); &#125; //åˆå§‹åŒ–View private void initView() &#123; cityNOInput = findView(R.id.et_city_no); city = findView(R.id.tv_city); ... findView(R.id.btn_go).setOnClickListener(this); &#125; //æ˜¾ç¤ºç»“æžœ public void displayResult(Weather weather) &#123; WeatherInfo weatherInfo = weather.getWeatherinfo(); city.setText(weatherInfo.getCity()); ... &#125; @Override public void onClick(View v) &#123; switch (v.getId()) &#123; case R.id.btn_go: weatherModel.getWeather(cityNOInput.getText().toString().trim(), this); break; &#125; &#125; @Override public void onSuccess(Weather weather) &#123; displayResult(weather); &#125; @Override public void onError() &#123; Toast.makeText(this, èŽ·å–å¤©æ°”ä¿¡æ¯å¤±è´¥, Toast.LENGTH_SHORT).show(); &#125; private T findView(int id) &#123; return (T) findViewById(id); &#125;&#125; ä»Žä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼ŒActivityæŒæœ‰äº†WeatherModelæ¨¡åž‹çš„å¯¹è±¡ï¼Œå½“ç”¨æˆ·æœ‰ç‚¹å‡»Buttonäº¤äº’çš„æ—¶å€™ï¼ŒActivityä½œä¸ºControlleræŽ§åˆ¶å±‚è¯»å–Viewè§†å›¾å±‚EditTextViewçš„æ•°æ®ï¼Œç„¶åŽå‘Modelæ¨¡åž‹å‘èµ·æ•°æ®è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨WeatherModelå¯¹è±¡çš„æ–¹æ³• getWeatherï¼ˆï¼‰æ–¹æ³•ã€‚å½“Modelæ¨¡åž‹å¤„ç†æ•°æ®ç»“æŸåŽï¼Œé€šè¿‡æŽ¥å£OnWeatherListeneré€šçŸ¥Viewè§†å›¾å±‚æ•°æ®å¤„ç†å®Œæ¯•ï¼ŒViewè§†å›¾å±‚è¯¥æ›´æ–°ç•Œé¢UIäº†ã€‚ç„¶åŽViewè§†å›¾å±‚è°ƒç”¨displayResultï¼ˆï¼‰æ–¹æ³•æ›´æ–°UIã€‚è‡³æ­¤ï¼Œæ•´ä¸ªMVCæ¡†æž¶æµç¨‹å°±åœ¨Activityä¸­ä½“çŽ°å‡ºæ¥äº†ã€‚ Modelæ¨¡åž‹ æ¥çœ‹çœ‹WeatherModelImplä»£ç å®žçŽ° 123456789101112131415161718192021222324252627282930public interface WeatherModel &#123; void getWeather(String cityNumber, OnWeatherListener listener);&#125;................public class WeatherModelImpl implements WeatherModel &#123; /*è¿™éƒ¨åˆ†ä»£ç èŒƒä¾‹æœ‰é—®é¢˜ï¼Œç½‘ç»œè®¿é—®ä¸åº”è¯¥åœ¨Modelä¸­ï¼Œåº”è¯¥æŠŠç½‘ç»œè®¿é—®æ¢æˆä»Žæ•°æ®åº“è¯»å–*/ @Override public void getWeather(String cityNumber, final OnWeatherListener listener) &#123; /*æ•°æ®å±‚æ“ä½œ*/ VolleyRequest.newInstance().newGsonRequest(http://www.weather.com.cn/data/sk/ + cityNumber + .html, Weather.class, new Response.Listener&lt;weather&gt;() &#123; @Override public void onResponse(Weather weather) &#123; if (weather != null) &#123; listener.onSuccess(weather); &#125; else &#123; listener.onError(); &#125; &#125; &#125;, new Response.ErrorListener() &#123; @Override public void onErrorResponse(VolleyError error) &#123; listener.onError(); &#125; &#125;); &#125;&#125; ä»¥ä¸Šä»£ç çœ‹å‡ºï¼Œè¿™é‡Œè®¾è®¡äº†ä¸€ä¸ªWeatherModelæ¨¡åž‹æŽ¥å£ï¼Œç„¶åŽå®žçŽ°äº†æŽ¥å£WeatherModelImplç±»ã€‚controlleræŽ§åˆ¶å™¨activityè°ƒç”¨WeatherModelImplç±»ä¸­çš„æ–¹æ³•å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œç„¶åŽé€šè¿‡å®žçŽ°OnWeatherListeneræŽ¥å£æ¥èŽ·å¾—ç½‘ç»œè¯·æ±‚çš„ç»“æžœé€šçŸ¥Viewè§†å›¾å±‚æ›´æ–°UI ã€‚è‡³æ­¤ï¼ŒActivityå°±å°†Viewè§†å›¾æ˜¾ç¤ºå’ŒModelæ¨¡åž‹æ•°æ®å¤„ç†éš”ç¦»å¼€äº†ã€‚activityæ‹…å½“contronllerå®Œæˆäº†modelå’Œviewä¹‹é—´çš„åè°ƒä½œç”¨ã€‚ è‡³äºŽè¿™é‡Œä¸ºä»€ä¹ˆä¸ç›´æŽ¥è®¾è®¡æˆç±»é‡Œé¢çš„ä¸€ä¸ªgetWeatherï¼ˆï¼‰æ–¹æ³•ç›´æŽ¥è¯·æ±‚ç½‘ç»œæ•°æ®ï¼Ÿä½ è€ƒè™‘ä¸‹è¿™ç§æƒ…å†µï¼šçŽ°åœ¨ä»£ç ä¸­çš„ç½‘ç»œè¯·æ±‚æ˜¯ä½¿ç”¨Volleyæ¡†æž¶æ¥å®žçŽ°çš„ï¼Œå¦‚æžœå“ªå¤©è€æ¿éžè¦ä½ ä½¿ç”¨Afinalæ¡†æž¶å®žçŽ°ç½‘ç»œè¯·æ±‚ï¼Œä½ æ€Žä¹ˆè§£å†³é—®é¢˜ï¼Ÿéš¾é“æ˜¯ä¿®æ”¹ getWeatherï¼ˆï¼‰æ–¹æ³•çš„å®žçŽ°ï¼Ÿ no no noï¼Œè¿™æ ·ä¿®æ”¹ä¸ä»…ç ´åäº†ä»¥å‰çš„ä»£ç ï¼Œè€Œä¸”è¿˜ä¸åˆ©äºŽç»´æŠ¤ï¼Œ è€ƒè™‘åˆ°ä»¥åŽä»£ç çš„æ‰©å±•å’Œç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬é€‰æ‹©è®¾è®¡æŽ¥å£çš„æ–¹å¼æ¥è§£å†³ç€ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å®žçŽ°å¦å¤–ä¸€ä¸ªWeatherModelWithAfinalImplç±»ï¼Œç»§æ‰¿è‡ªWeatherModelï¼Œé‡å†™é‡Œé¢çš„æ–¹æ³•ï¼Œè¿™æ ·ä¸ä»…ä¿ç•™äº†ä»¥å‰çš„WeatherModelImplç±»è¯·æ±‚ç½‘ç»œæ–¹å¼ï¼Œè¿˜å¢žåŠ äº†WeatherModelWithAfinalImplç±»çš„è¯·æ±‚æ–¹å¼ã€‚Activityè°ƒç”¨ä»£ç æ— éœ€è¦ä»»ä½•ä¿®æ”¹ã€‚ 3.MVPè®¾è®¡æž¶æž„åœ¨Appå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸å‡ºçŽ°çš„é—®é¢˜å°±æ˜¯æŸä¸€éƒ¨åˆ†çš„ä»£ç é‡è¿‡å¤§ï¼Œè™½ç„¶åšäº†æ¨¡å—åˆ’åˆ†å’ŒæŽ¥å£éš”ç¦»ï¼Œä½†ä¹Ÿå¾ˆéš¾å®Œå…¨é¿å…ã€‚ä»Žå®žè·µä¸­çœ‹åˆ°ï¼Œè¿™æ›´å¤šçš„å‡ºçŽ°åœ¨UIéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯Activityé‡Œã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ª2000+è¡Œä»¥ä¸ŠåŸºæœ¬ä¸å¸¦æ³¨é‡Šçš„Activityï¼Œæˆ‘çš„ç¬¬ä¸€ååº”å°±æ˜¯æƒ³åã€‚Activityå†…å®¹è¿‡å¤šçš„åŽŸå› å…¶å®žå¾ˆå¥½è§£é‡Šï¼Œå› ä¸ºActivityæœ¬èº«éœ€è¦æ‹…è´Ÿä¸Žç”¨æˆ·ä¹‹é—´çš„æ“ä½œäº¤äº’ï¼Œç•Œé¢çš„å±•ç¤ºï¼Œä¸æ˜¯å•çº¯çš„Controlleræˆ–Viewã€‚è€Œä¸”çŽ°åœ¨å¤§éƒ¨åˆ†çš„Activityè¿˜å¯¹æ•´ä¸ªAppèµ·åˆ°ç±»ä¼¼IOSä¸­çš„ã€ViewControllerã€‘çš„ä½œç”¨ï¼Œè¿™åˆå¸¦å…¥äº†å¤§é‡çš„é€»è¾‘ä»£ç ï¼Œé€ æˆActivityçš„è‡ƒè‚¿ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®©æˆ‘ä»¬å¼•å…¥MVPæ¡†æž¶ã€‚ MVCçš„ç¼ºç‚¹åœ¨Androidå¼€å‘ä¸­ï¼ŒActivityå¹¶ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†çš„MVCæ¨¡å¼ä¸­çš„Controllerï¼Œå®ƒçš„é¦–è¦èŒè´£æ˜¯åŠ è½½åº”ç”¨çš„å¸ƒå±€å’Œåˆå§‹åŒ–ç”¨æˆ· ç•Œé¢ï¼Œå¹¶æŽ¥å—å¹¶å¤„ç†æ¥è‡ªç”¨æˆ·çš„æ“ä½œè¯·æ±‚ï¼Œè¿›è€Œä½œå‡ºå“åº”ã€‚éšç€ç•Œé¢åŠå…¶é€»è¾‘çš„å¤æ‚åº¦ä¸æ–­æå‡ï¼ŒActivityç±»çš„èŒè´£ä¸æ–­å¢žåŠ ï¼Œä»¥è‡´å˜å¾—åºžå¤§è‡ƒè‚¿ã€‚ ä»€ä¹ˆæ˜¯MVP?MVPä»Žæ›´æ—©çš„MVCæ¡†æž¶æ¼”å˜è¿‡æ¥ï¼Œä¸ŽMVCæœ‰ä¸€å®šçš„ç›¸ä¼¼æ€§ï¼šController/Presenterè´Ÿè´£é€»è¾‘çš„å¤„ç†ï¼ŒModelæä¾›æ•°æ®ï¼ŒViewè´Ÿè´£æ˜¾ç¤ºã€‚ MVPæ¡†æž¶ç”±3éƒ¨åˆ†ç»„æˆï¼šViewè´Ÿè´£æ˜¾ç¤ºï¼ŒPresenterè´Ÿè´£é€»è¾‘å¤„ç†ï¼ŒModelæä¾›æ•°æ®ã€‚åœ¨MVPæ¨¡å¼é‡Œé€šå¸¸åŒ…å«3ä¸ªè¦ç´ ï¼ˆåŠ ä¸ŠView interfaceæ˜¯4ä¸ªï¼‰ï¼š View:è´Ÿè´£ç»˜åˆ¶UIå…ƒç´ ã€ä¸Žç”¨æˆ·è¿›è¡Œäº¤äº’(åœ¨Androidä¸­ä½“çŽ°ä¸ºActivity) Model:è´Ÿè´£å­˜å‚¨ã€æ£€ç´¢ã€æ“çºµæ•°æ®(æœ‰æ—¶ä¹Ÿå®žçŽ°ä¸€ä¸ªModel interfaceç”¨æ¥é™ä½Žè€¦åˆ) Presenter:ä½œä¸ºViewä¸ŽModeläº¤äº’çš„ä¸­é—´çº½å¸¦ï¼Œå¤„ç†ä¸Žç”¨æˆ·äº¤äº’çš„è´Ÿè´£é€»è¾‘ã€‚ *View interface:éœ€è¦Viewå®žçŽ°çš„æŽ¥å£ï¼ŒViewé€šè¿‡View interfaceä¸ŽPresenterè¿›è¡Œäº¤äº’ï¼Œé™ä½Žè€¦åˆï¼Œæ–¹ä¾¿è¿›è¡Œå•å…ƒæµ‹è¯• Tipsï¼š*View interfaceçš„å¿…è¦æ€§ å›žæƒ³ä¸€ä¸‹ä½ åœ¨å¼€å‘Androidåº”ç”¨æ—¶æ˜¯å¦‚ä½•å¯¹ä»£ç é€»è¾‘è¿›è¡Œå•å…ƒæµ‹è¯•çš„ï¼Ÿæ˜¯å¦æ¯æ¬¡éƒ½è¦å°†åº”ç”¨éƒ¨ç½²åˆ°Androidæ¨¡æ‹Ÿå™¨æˆ–çœŸæœºä¸Šï¼Œç„¶åŽé€šè¿‡æ¨¡æ‹Ÿç”¨ æˆ·æ“ä½œè¿›è¡Œæµ‹è¯•ï¼Ÿç„¶è€Œç”±äºŽAndroidå¹³å°çš„ç‰¹æ€§ï¼Œæ¯æ¬¡éƒ¨ç½²éƒ½è€—è´¹äº†å¤§é‡çš„æ—¶é—´ï¼Œè¿™ç›´æŽ¥å¯¼è‡´å¼€å‘æ•ˆçŽ‡çš„é™ä½Žã€‚è€Œåœ¨MVPæ¨¡å¼ä¸­ï¼Œå¤„ç†å¤æ‚é€»è¾‘çš„Presenteræ˜¯é€šè¿‡interfaceä¸ŽView(Activity)è¿›è¡Œäº¤äº’çš„ï¼Œè¿™è¯´æ˜Žæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç±»å®žçŽ°è¿™ä¸ªinterfaceæ¥æ¨¡æ‹ŸActivityçš„è¡Œä¸ºå¯¹Presenterè¿›è¡Œå•å…ƒæµ‹è¯•ï¼ŒçœåŽ»äº†å¤§é‡çš„éƒ¨ç½²åŠæµ‹è¯•çš„æ—¶é—´ã€‚ MVC â†’ MVPå½“æˆ‘ä»¬å°†Activityå¤æ‚çš„é€»è¾‘å¤„ç†ç§»è‡³å¦å¤–çš„ä¸€ä¸ªç±»ï¼ˆPresenterï¼‰ä¸­æ—¶ï¼ŒActivityå…¶å®žå°±æ˜¯MVPæ¨¡å¼ä¸­çš„Viewï¼Œå®ƒè´Ÿè´£UIå…ƒç´ çš„åˆå§‹åŒ–ï¼Œå»ºç«‹UIå…ƒç´ ä¸ŽPresenterçš„å…³è”ï¼ˆListenerä¹‹ç±»ï¼‰ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿä¼šå¤„ç†ä¸€äº›ç®€å•çš„é€»è¾‘ï¼ˆå¤æ‚çš„é€»è¾‘äº¤ç”± Presenterå¤„ç†ï¼‰ã€‚ MVPçš„Presenteræ˜¯æ¡†æž¶çš„æŽ§åˆ¶è€…ï¼Œæ‰¿æ‹…äº†å¤§é‡çš„é€»è¾‘æ“ä½œï¼Œè€ŒMVCçš„Controlleræ›´å¤šæ—¶å€™æ‰¿æ‹…ä¸€ç§è½¬å‘çš„ä½œç”¨ã€‚å› æ­¤åœ¨Appä¸­å¼•å…¥MVPçš„åŽŸå› ï¼Œæ˜¯ä¸ºäº†å°†æ­¤å‰åœ¨Activtyä¸­åŒ…å«çš„å¤§é‡é€»è¾‘æ“ä½œæ”¾åˆ°æŽ§åˆ¶å±‚ä¸­ï¼Œé¿å…Activityçš„è‡ƒè‚¿ã€‚ ä¸¤ç§æ¨¡å¼çš„ä¸»è¦åŒºåˆ«ï¼š ï¼ˆæœ€ä¸»è¦åŒºåˆ«ï¼‰Viewä¸ŽModelå¹¶ä¸ç›´æŽ¥äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ä¸ŽPresenteräº¤äº’æ¥ä¸ŽModelé—´æŽ¥äº¤äº’ã€‚è€Œåœ¨MVCä¸­Viewå¯ä»¥ä¸ŽModelç›´æŽ¥äº¤äº’ é€šå¸¸Viewä¸ŽPresenteræ˜¯ä¸€å¯¹ä¸€çš„ï¼Œä½†å¤æ‚çš„Viewå¯èƒ½ç»‘å®šå¤šä¸ªPresenteræ¥å¤„ç†é€»è¾‘ã€‚è€ŒControlleræ˜¯åŸºäºŽè¡Œä¸ºçš„ï¼Œå¹¶ä¸”å¯ä»¥è¢«å¤šä¸ªViewå…±äº«ï¼ŒControllerå¯ä»¥è´Ÿè´£å†³å®šæ˜¾ç¤ºå“ªä¸ªView Presenterä¸ŽViewçš„äº¤äº’æ˜¯é€šè¿‡æŽ¥å£æ¥è¿›è¡Œçš„ï¼Œæ›´æœ‰åˆ©äºŽæ·»åŠ å•å…ƒæµ‹è¯•ã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥å‘çŽ°MVPçš„ä¼˜ç‚¹å¦‚ä¸‹ï¼š 1ã€æ¨¡åž‹ä¸Žè§†å›¾å®Œå…¨åˆ†ç¦»ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹è§†å›¾è€Œä¸å½±å“æ¨¡åž‹ï¼› 2ã€å¯ä»¥æ›´é«˜æ•ˆåœ°ä½¿ç”¨æ¨¡åž‹ï¼Œå› ä¸ºæ‰€æœ‰çš„äº¤äº’éƒ½å‘ç”Ÿåœ¨ä¸€ä¸ªåœ°æ–¹â€”â€”Presenterå†…éƒ¨ï¼› 3ã€æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªPresenterç”¨äºŽå¤šä¸ªè§†å›¾ï¼Œè€Œä¸éœ€è¦æ”¹å˜Presenterçš„é€»è¾‘ã€‚è¿™ä¸ªç‰¹æ€§éžå¸¸çš„æœ‰ç”¨ï¼Œå› ä¸ºè§†å›¾çš„å˜åŒ–æ€»æ˜¯æ¯”æ¨¡åž‹çš„å˜åŒ–é¢‘ç¹ï¼› 4ã€å¦‚æžœæˆ‘ä»¬æŠŠé€»è¾‘æ”¾åœ¨Presenterä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è„±ç¦»ç”¨æˆ·æŽ¥å£æ¥æµ‹è¯•è¿™äº›é€»è¾‘ï¼ˆå•å…ƒæµ‹è¯•ï¼‰ã€‚ å…·ä½“åˆ°Android Appä¸­ï¼Œä¸€èˆ¬å¯ä»¥å°†Appæ ¹æ®ç¨‹åºçš„ç»“æž„è¿›è¡Œçºµå‘åˆ’åˆ†ï¼Œæ ¹æ®MVPå¯ä»¥å°†Appåˆ†åˆ«ä¸ºæ¨¡åž‹å±‚(M)ï¼ŒUIå±‚(V)å’Œé€»è¾‘å±‚(P)ã€‚ UIå±‚ä¸€èˆ¬åŒ…æ‹¬Activityï¼ŒFragmentï¼ŒAdapterç­‰ç›´æŽ¥å’ŒUIç›¸å…³çš„ç±»ï¼ŒUIå±‚çš„Activityåœ¨å¯åŠ¨ä¹‹åŽå®žä¾‹åŒ–ç›¸åº”çš„Presenterï¼ŒAppçš„æŽ§åˆ¶æƒåŽç§»ï¼Œç”±UIè½¬ç§»åˆ°Presenterï¼Œä¸¤è€…ä¹‹é—´çš„é€šä¿¡é€šè¿‡BroadCastã€Handleræˆ–è€…æŽ¥å£å®Œæˆï¼Œåªä¼ é€’äº‹ä»¶å’Œç»“æžœã€‚ ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼ŒUIå±‚é€šçŸ¥é€»è¾‘å±‚ï¼ˆPresenterï¼‰ç”¨æˆ·ç‚¹å‡»äº†ä¸€ä¸ªButtonï¼Œé€»è¾‘å±‚ï¼ˆPresenterï¼‰è‡ªå·±å†³å®šåº”è¯¥ç”¨ä»€ä¹ˆè¡Œä¸ºè¿›è¡Œå“åº”ï¼Œè¯¥æ‰¾å“ªä¸ªæ¨¡åž‹ï¼ˆModelï¼‰åŽ»åšè¿™ä»¶äº‹ï¼Œæœ€åŽé€»è¾‘å±‚ï¼ˆPresenterï¼‰å°†å®Œæˆçš„ç»“æžœæ›´æ–°åˆ°UIå±‚ã€‚ MVPçš„å˜ç§ï¼šPassive ViewMVPçš„å˜ç§æœ‰å¾ˆå¤šï¼Œå…¶ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„æ˜¯Passive Viewæ¨¡å¼ï¼Œå³è¢«åŠ¨è§†å›¾ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼ŒViewå’ŒModelä¹‹é—´ä¸èƒ½ç›´æŽ¥äº¤äº’ï¼ŒViewé€šè¿‡Presenterä¸ŽModelæ‰“äº¤é“ã€‚PresenteræŽ¥å—Viewçš„UIè¯·æ±‚ï¼Œå®Œæˆç®€å•çš„UIå¤„ç†é€»è¾‘ï¼Œå¹¶è°ƒç”¨Modelè¿›è¡Œä¸šåŠ¡å¤„ç†ï¼Œå¹¶è°ƒç”¨Viewå°†ç›¸åº”çš„ç»“æžœåæ˜ å‡ºæ¥ã€‚Viewç›´æŽ¥ä¾èµ–Presenterï¼Œä½†æ˜¯Presenteré—´æŽ¥ä¾èµ–Viewï¼Œå®ƒç›´æŽ¥ä¾èµ–çš„æ˜¯Viewå®žçŽ°çš„æŽ¥å£ã€‚ ç›¸å¯¹äºŽViewçš„è¢«åŠ¨ï¼Œé‚£Presenterå°±æ˜¯ä¸»åŠ¨çš„ä¸€æ–¹ã€‚å¯¹äºŽPresenterçš„ä¸»åŠ¨ï¼Œæœ‰å¦‚ä¸‹çš„ç†è§£ï¼š Presenteræ˜¯æ•´ä¸ªMVPä½“ç³»çš„æŽ§åˆ¶ä¸­å¿ƒï¼Œè€Œä¸æ˜¯å•çº¯çš„å¤„ç†Viewè¯·æ±‚çš„äººï¼› Viewä»…ä»…æ˜¯ç”¨æˆ·äº¤äº’è¯·æ±‚çš„æ±‡æŠ¥è€…ï¼Œå¯¹äºŽå“åº”ç”¨æˆ·äº¤äº’ç›¸å…³çš„é€»è¾‘å’Œæµç¨‹ï¼ŒViewä¸å‚ä¸Žå†³ç­–ï¼ŒçœŸæ­£çš„å†³ç­–è€…æ˜¯Presenterï¼› Viewå‘Presenterå‘é€ç”¨æˆ·äº¤äº’è¯·æ±‚åº”è¯¥é‡‡ç”¨è¿™æ ·çš„å£å»ï¼šâ€œæˆ‘çŽ°åœ¨å°†ç”¨æˆ·äº¤äº’è¯·æ±‚å‘é€ç»™ä½ ï¼Œä½ çœ‹ç€åŠžï¼Œéœ€è¦æˆ‘çš„æ—¶å€™æˆ‘ä¼šååŠ©ä½ â€ï¼Œä¸åº”è¯¥æ˜¯è¿™æ ·ï¼šâ€œæˆ‘çŽ°åœ¨å¤„ç†ç”¨æˆ·äº¤äº’è¯·æ±‚äº†ï¼Œæˆ‘çŸ¥é“è¯¥æ€Žä¹ˆåŠžï¼Œä½†æ˜¯æˆ‘éœ€è¦ä½ çš„æ”¯æŒï¼Œå› ä¸ºå®žçŽ°ä¸šåŠ¡é€»è¾‘çš„Modelåªä¿¡ä»»ä½ â€ï¼› å¯¹äºŽç»‘å®šåˆ°Viewä¸Šçš„æ•°æ®ï¼Œä¸åº”è¯¥æ˜¯Viewä»ŽPresenterä¸Šâ€œæ‹‰â€å›žæ¥çš„ï¼Œåº”è¯¥æ˜¯Presenterä¸»åŠ¨â€œæŽ¨â€ç»™Viewçš„ï¼› Viewå°½å¯èƒ½ä¸ç»´æŠ¤æ•°æ®çŠ¶æ€ï¼Œå› ä¸ºå…¶æœ¬èº«ä»…ä»…å®žçŽ°å•çº¯çš„ã€ç‹¬ç«‹çš„UIæ“ä½œï¼›Presenteræ‰æ˜¯æ•´ä¸ªä½“ç³»çš„åè°ƒè€…ï¼Œå®ƒæ ¹æ®å¤„ç†ç”¨äºŽäº¤äº’çš„é€»è¾‘ç»™Viewå’ŒModelå®‰æŽ’å·¥ä½œã€‚ MVPæž¶æž„å­˜åœ¨çš„é—®é¢˜ä¸Žè§£å†³åŠžæ³• åŠ å…¥æ¨¡æ¿æ–¹æ³•ï¼ˆTemplate Methodï¼‰ è½¬ç§»é€»è¾‘æ“ä½œä¹‹åŽå¯èƒ½éƒ¨åˆ†è¾ƒä¸ºå¤æ‚çš„Activityå†…ä»£ç é‡è¿˜æ˜¯ä¸å°‘ï¼ŒäºŽæ˜¯éœ€è¦åœ¨åˆ†å±‚çš„åŸºç¡€ä¸Šå†åŠ å…¥æ¨¡æ¿æ–¹æ³•ï¼ˆTemplate Methodï¼‰ã€‚ å…·ä½“åšæ³•æ˜¯åœ¨Activityå†…éƒ¨åˆ†å±‚ã€‚å…¶ä¸­æœ€é¡¶å±‚ä¸ºBaseActivityï¼Œä¸åšå…·ä½“æ˜¾ç¤ºï¼Œè€Œæ˜¯æä¾›ä¸€äº›åŸºç¡€æ ·å¼ï¼ŒDialogï¼ŒActionBaråœ¨å†…çš„å†…å®¹ï¼Œå±•çŽ°ç»™ç”¨æˆ·çš„Activityç»§æ‰¿BaseActivityï¼Œé‡å†™BaseActivityé¢„ç•™çš„æ–¹æ³•ã€‚å¦‚æœ‰å¿…è¦å†è¿›è¡ŒäºŒæ¬¡ç»§æ‰¿ï¼ŒAppä¸­Activityä¹‹é—´çš„ç»§æ‰¿æ¬¡æ•°æœ€å¤šä¸è¶…è¿‡3æ¬¡ã€‚ Modelå†…éƒ¨åˆ†å±‚ æ¨¡åž‹å±‚ï¼ˆModelï¼‰ä¸­çš„æ•´ä½“ä»£ç é‡æ˜¯æœ€å¤§çš„ï¼Œä¸€èˆ¬ç”±å¤§é‡çš„Packageç»„æˆï¼Œé’ˆå¯¹è¿™éƒ¨åˆ†éœ€è¦åšçš„å°±æ˜¯åœ¨ç¨‹åºè®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œåšå¥½æ¨¡å—çš„åˆ’åˆ†ï¼Œè¿›è¡ŒæŽ¥å£éš”ç¦»ï¼Œåœ¨å†…éƒ¨è¿›è¡Œåˆ†å±‚ã€‚ å¼ºåŒ–Presenter å¼ºåŒ–Presenterçš„ä½œç”¨ï¼Œå°†æ‰€æœ‰é€»è¾‘æ“ä½œéƒ½æ”¾åœ¨Presenterå†…ä¹Ÿå®¹æ˜“é€ æˆPresenterå†…çš„ä»£ç é‡è¿‡å¤§ï¼Œå¯¹äºŽè¿™ç‚¹ï¼Œæœ‰ä¸€ä¸ªæ–¹æ³•æ˜¯åœ¨UIå±‚å’ŒPresenterä¹‹é—´è®¾ç½®ä¸­ä»‹è€…Mediatorï¼Œå°†ä¾‹å¦‚æ•°æ®æ ¡éªŒã€ç»„è£…åœ¨å†…çš„è½»é‡çº§é€»è¾‘æ“ä½œæ”¾åœ¨Mediatorä¸­ï¼›åœ¨Presenterå’ŒModelä¹‹é—´ä½¿ç”¨ä»£ç†Proxyï¼›é€šè¿‡ä¸Šè¿°ä¸¤è€…åˆ†æ‹…ä¸€éƒ¨åˆ†Presenterçš„é€»è¾‘æ“ä½œï¼Œä½†æ•´ä½“æ¡†æž¶çš„æŽ§åˆ¶æƒè¿˜æ˜¯åœ¨Presenteræ‰‹ä¸­ã€‚Mediatorå’ŒProxyä¸æ˜¯å¿…é¡»çš„ï¼Œåªåœ¨Presenterè´Ÿæ‹…è¿‡å¤§æ—¶æ‰å»ºè®®ä½¿ç”¨ã€‚ æœ€ç»ˆçš„æž¶æž„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š MVPä»£ç å®žä¾‹æˆ‘ä»¬æ¥çœ‹çœ‹MVPåœ¨Androidå¼€å‘ä¸­æ˜¯æ€Žä¹ˆåº”ç”¨çš„å§ï¼ï¼ æˆ‘ä»¬ç”¨å¦ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šã€‚ å…ˆæ¥çœ‹åŒ…ç»“æž„å›¾ å»ºç«‹Bean 1234567891011121314public class UserBean &#123; private String mFirstName; private String mLastName; public UserBean(String firstName, String lastName) &#123; this. mFirstName = firstName; this. mLastName = lastName; &#125; public String getFirstName() &#123; return mFirstName; &#125; public String getLastName() &#123; return mLastName; &#125;&#125; å»ºç«‹Model ï¼ˆå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè¿™é‡ŒæŒ‡æ•°æ®è¯»å†™ï¼‰ï¼Œå…ˆå†™æŽ¥å£ï¼ŒåŽå†™å®žçŽ° 1234567891011public interface IUserModel &#123; void setID(int id); void setFirstName(String firstName); void setLastName(String lastName); int getID(); UserBean load(int id);// é€šè¿‡idè¯»å–userä¿¡æ¯,è¿”å›žä¸€ä¸ªUserBean&#125; å®žçŽ°ä¸åœ¨è¿™é‡Œå†™äº† PresenteræŽ§åˆ¶å™¨ å»ºç«‹presenterï¼ˆä¸»å¯¼å™¨ï¼Œé€šè¿‡iViewå’ŒiModelæŽ¥å£æ“ä½œmodelå’Œviewï¼‰ï¼Œactivityå¯ä»¥æŠŠæ‰€æœ‰é€»è¾‘ç»™presenterå¤„ç†ï¼Œè¿™æ ·javaé€»è¾‘å°±ä»Žæ‰‹æœºçš„activityä¸­åˆ†ç¦»å‡ºæ¥ã€‚ 123456789101112131415161718192021public class UserPresenter &#123; private IUserView mUserView; private IUserModel mUserModel; public UserPresenter(IUserView view) &#123; mUserView = view; mUserModel = new UserModel(); &#125; public void saveUser( int id, String firstName, String lastName) &#123; mUserModel.setID(id); mUserModel.setFirstName(firstName); mUserModel.setLastName(lastName); &#125; public void loadUser( int id) &#123; UserBean user = mUserModel.load(id); mUserView.setFirstName(user.getFirstName()); // é€šè¿‡è°ƒç”¨IUserViewçš„æ–¹æ³•æ¥æ›´æ–°æ˜¾ç¤º mUserView.setLastName(user.getLastName()); &#125;&#125; Viewè§†å›¾ å»ºç«‹viewï¼ˆæ›´æ–°uiä¸­çš„viewçŠ¶æ€ï¼‰ï¼Œè¿™é‡Œåˆ—å‡ºéœ€è¦æ“ä½œå½“å‰viewçš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯æŽ¥å£ 1234567891011public interface IUserView &#123; int getID(); String getFristName(); String getLastName(); void setFirstName(String firstName); void setLastName(String lastName);&#125; activityä¸­å®žçŽ°iviewæŽ¥å£ï¼Œåœ¨å…¶ä¸­æ“ä½œviewï¼Œå®žä¾‹åŒ–ä¸€ä¸ªpresenterå˜é‡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public class MainActivity extends Activity implements OnClickListener,IUserView &#123; UserPresenter presenter; EditText id,first,last; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout. activity_main); findViewById(R.id. save).setOnClickListener( this); findViewById(R.id. load).setOnClickListener( this); id = (EditText) findViewById(R.id. id); first = (EditText) findViewById(R.id. first); last = (EditText) findViewById(R.id. last); presenter = new UserPresenter( this); &#125; @Override public void onClick(View v) &#123; switch (v.getId()) &#123; case R.id. save: presenter.saveUser(getID(), getFristName(), getLastName()); break; case R.id. load: presenter.loadUser(getID()); break; default: break; &#125; &#125; @Override public int getID() &#123; return new Integer( id.getText().toString()); &#125; @Override public String getFristName() &#123; return first.getText().toString(); &#125; @Override public String getLastName() &#123; return last.getText().toString(); &#125; @Override public void setFirstName(String firstName) &#123; first.setText(firstName); &#125; @Override public void setLastName(String lastName) &#123; last.setText(lastName); &#125;&#125; å› æ­¤ï¼ŒActivityåŠä»ŽMVCä¸­çš„Controllerä¸­è§£æ”¾å‡ºæ¥äº†ï¼Œè¿™ä¼šActivityä¸»è¦åšæ˜¾ç¤ºViewçš„ä½œç”¨å’Œç”¨æˆ·äº¤äº’ã€‚æ¯ä¸ªActivityå¯ä»¥æ ¹æ®è‡ªå·±æ˜¾ç¤ºViewçš„ä¸åŒå®žçŽ°Viewè§†å›¾æŽ¥å£IUserViewã€‚ é€šè¿‡å¯¹æ¯”åŒä¸€å®žä¾‹çš„MVCä¸ŽMVPçš„ä»£ç ï¼Œå¯ä»¥è¯å®žMVPæ¨¡å¼çš„ä¸€äº›ä¼˜ç‚¹ï¼š åœ¨MVPä¸­ï¼ŒActivityçš„ä»£ç ä¸è‡ƒè‚¿ï¼› åœ¨MVPä¸­ï¼ŒModel(IUserModelçš„å®žçŽ°ç±»)çš„æ”¹åŠ¨ä¸ä¼šå½±å“Activity(View)ï¼Œä¸¤è€…ä¹Ÿäº’ä¸å¹²æ¶‰ï¼Œè€Œåœ¨MVCä¸­ä¼šï¼› åœ¨MVPä¸­ï¼ŒIUserViewè¿™ä¸ªæŽ¥å£å¯ä»¥å®žçŽ°æ–¹ä¾¿åœ°å¯¹Presenterçš„æµ‹è¯•ï¼› åœ¨MVPä¸­ï¼ŒUserPresenterå¯ä»¥ç”¨äºŽå¤šä¸ªè§†å›¾ï¼Œä½†æ˜¯åœ¨MVCä¸­çš„Activityå°±ä¸è¡Œã€‚ 4.MVCã€MVPä¸ŽMVVMçš„å…³ç³»é¦–å…ˆä»‹ç»ä¸‹MVVMã€‚ MVVMMVVMå¯ä»¥ç®—æ˜¯MVPçš„å‡çº§ç‰ˆï¼Œå…¶ä¸­çš„VMæ˜¯ViewModelçš„ç¼©å†™ï¼ŒViewModelå¯ä»¥ç†è§£æˆæ˜¯Viewçš„æ•°æ®æ¨¡åž‹å’ŒPresenterçš„åˆä½“ï¼ŒViewModelå’ŒViewä¹‹é—´çš„äº¤äº’é€šè¿‡Data Bindingå®Œæˆï¼Œè€ŒData Bindingå¯ä»¥å®žçŽ°åŒå‘çš„äº¤äº’ï¼Œè¿™å°±ä½¿å¾—è§†å›¾å’ŒæŽ§åˆ¶å±‚ä¹‹é—´çš„è€¦åˆç¨‹åº¦è¿›ä¸€æ­¥é™ä½Žï¼Œå…³æ³¨ç‚¹åˆ†ç¦»æ›´ä¸ºå½»åº•ï¼ŒåŒæ—¶å‡è½»äº†Activityçš„åŽ‹åŠ›ã€‚ åœ¨æ¯”è¾ƒä¹‹å‰ï¼Œå…ˆä»Žå›¾ä¸Šçœ‹çœ‹ä¸‰è€…çš„å¼‚åŒã€‚ åˆšå¼€å§‹ç†è§£è¿™äº›æ¦‚å¿µçš„æ—¶å€™è®¤ä¸ºè¿™å‡ ç§æ¨¡å¼è™½ç„¶éƒ½æ˜¯è¦å°†viewå’Œmodelè§£è€¦ï¼Œä½†æ˜¯éžæ­¤å³å½¼ï¼Œæ²¡æœ‰å…³ç³»ï¼Œä¸€ä¸ªåº”ç”¨åªä¼šç”¨ä¸€ç§æ¨¡å¼ã€‚åŽæ¥æ…¢æ…¢å‘çŽ°ä¸–ç•Œç»å¯¹ä¸æ˜¯åªæœ‰é»‘ç™½ä¸¤é¢ï¼Œä¸­é—´æœ€å¤§çš„ä¸€å—å…¶å®žæ˜¯ç°è‰²åœ°å¸¦ï¼ŒåŒæ ·ï¼Œè¿™å‡ ç§æ¨¡å¼çš„è¾¹ç•Œå¹¶éžé‚£ä¹ˆæ˜Žæ˜¾ï¼Œå¯èƒ½ä½ åœ¨è‡ªå·±çš„åº”ç”¨ä¸­éƒ½ä¼šç”¨åˆ°ã€‚å®žé™…ä¸Šä¹Ÿæ ¹æœ¬æ²¡å¿…è¦åŽ»çº ç»“è‡ªå·±åˆ°åº•ç”¨çš„æ˜¯MVCã€MVPè¿˜æ˜¯MVVPï¼Œä¸ç®¡é»‘çŒ«ç™½çŒ«ï¼Œæ‰ä½è€é¼ å°±æ˜¯å¥½çŒ«ã€‚ MVC-&gt;MVP-&gt;MVVMæ¼”è¿›è¿‡ç¨‹MVC -&gt; MVP -&gt; MVVM è¿™å‡ ä¸ªè½¯ä»¶è®¾è®¡æ¨¡å¼æ˜¯ä¸€æ­¥æ­¥æ¼”åŒ–å‘å±•çš„ï¼ŒMVVM æ˜¯ä»Ž MVP çš„è¿›ä¸€æ­¥å‘å±•ä¸Žè§„èŒƒï¼ŒMVP éš”ç¦»äº†MVCä¸­çš„ M ä¸Ž V çš„ç›´æŽ¥è”ç³»åŽï¼Œé  Presenter æ¥ä¸­è½¬ï¼Œæ‰€ä»¥ä½¿ç”¨ MVP æ—¶ P æ˜¯ç›´æŽ¥è°ƒç”¨ View çš„æŽ¥å£æ¥å®žçŽ°å¯¹è§†å›¾çš„æ“ä½œçš„ï¼Œè¿™ä¸ª View æŽ¥å£çš„ä¸œè¥¿ä¸€èˆ¬æ¥è¯´æ˜¯ showDataã€showLoadingç­‰ç­‰ã€‚M ä¸Ž Vå·²ç»éš”ç¦»äº†ï¼Œæ–¹ä¾¿æµ‹è¯•äº†ï¼Œä½†ä»£ç è¿˜ä¸å¤Ÿä¼˜é›…ç®€æ´ï¼Œæ‰€ä»¥ MVVM å°±å¼¥è¡¥äº†è¿™äº›ç¼ºé™·ã€‚åœ¨ MVVM ä¸­å°±å‡ºçŽ°çš„ Data Binding è¿™ä¸ªæ¦‚å¿µï¼Œæ„æ€å°±æ˜¯ View æŽ¥å£çš„ showData è¿™äº›å®žçŽ°æ–¹æ³•å¯ä»¥ä¸å†™äº†ï¼Œé€šè¿‡ Binding æ¥å®žçŽ°ã€‚ åŒå¦‚æžœæŠŠè¿™ä¸‰è€…æ”¾åœ¨ä¸€èµ·æ¯”è¾ƒï¼Œå…ˆè¯´ä¸€ä¸‹ä¸‰è€…çš„å…±åŒç‚¹ï¼Œä¹Ÿå°±æ˜¯Modelå’ŒViewï¼š Modelï¼šæ•°æ®å¯¹è±¡ï¼ŒåŒæ—¶ï¼Œæä¾›æœ¬åº”ç”¨å¤–éƒ¨å¯¹åº”ç”¨ç¨‹åºæ•°æ®çš„æ“ä½œçš„æŽ¥å£ï¼Œä¹Ÿå¯èƒ½åœ¨æ•°æ®å˜åŒ–æ—¶å‘å‡ºå˜æ›´é€šçŸ¥ã€‚Modelä¸ä¾èµ–äºŽViewçš„å®žçŽ°ï¼Œåªè¦å¤–éƒ¨ç¨‹åºè°ƒç”¨Modelçš„æŽ¥å£å°±èƒ½å¤Ÿå®žçŽ°å¯¹æ•°æ®çš„å¢žåˆ æ”¹æŸ¥ã€‚ Viewï¼šUIå±‚ï¼Œæä¾›å¯¹æœ€ç»ˆç”¨æˆ·çš„äº¤äº’æ“ä½œåŠŸèƒ½ï¼ŒåŒ…æ‹¬UIå±•çŽ°ä»£ç åŠä¸€äº›ç›¸å…³çš„ç•Œé¢é€»è¾‘ä»£ç ã€‚ å¼‚ä¸‰è€…çš„å·®å¼‚åœ¨äºŽå¦‚ä½•ç²˜åˆViewå’ŒModelï¼Œå®žçŽ°ç”¨æˆ·çš„äº¤äº’æ“ä½œä»¥åŠå˜æ›´é€šçŸ¥ Controller ControlleræŽ¥æ”¶Viewçš„æ“ä½œäº‹ä»¶ï¼Œæ ¹æ®äº‹ä»¶ä¸åŒï¼Œæˆ–è€…è°ƒç”¨Modelçš„æŽ¥å£è¿›è¡Œæ•°æ®æ“ä½œï¼Œæˆ–è€…è¿›è¡ŒViewçš„è·³è½¬ï¼Œä»Žè€Œä¹Ÿæ„å‘³ç€ä¸€ä¸ªControllerå¯ä»¥å¯¹åº”å¤šä¸ªViewã€‚Controllerå¯¹Viewçš„å®žçŽ°ä¸å¤ªå…³å¿ƒï¼Œåªä¼šè¢«åŠ¨åœ°æŽ¥æ”¶ï¼ŒModelçš„æ•°æ®å˜æ›´ä¸é€šè¿‡Controllerç›´æŽ¥é€šçŸ¥Viewï¼Œé€šå¸¸Viewé‡‡ç”¨è§‚å¯Ÿè€…æ¨¡å¼ç›‘å¬Modelçš„å˜åŒ–ã€‚ Presenter Presenterä¸ŽControllerä¸€æ ·ï¼ŒæŽ¥æ”¶Viewçš„å‘½ä»¤ï¼Œå¯¹Modelè¿›è¡Œæ“ä½œï¼›ä¸ŽControllerä¸åŒçš„æ˜¯Presenterä¼šåä½œç”¨äºŽViewï¼ŒModelçš„å˜æ›´é€šçŸ¥é¦–å…ˆè¢«PresenterèŽ·å¾—ï¼Œç„¶åŽPresenterå†åŽ»æ›´æ–°Viewã€‚ä¸€ä¸ªPresenteråªå¯¹åº”äºŽä¸€ä¸ªViewã€‚æ ¹æ®Presenterå’ŒViewå¯¹é€»è¾‘ä»£ç åˆ†æ‹…çš„ç¨‹åº¦ä¸åŒï¼Œè¿™ç§æ¨¡å¼åˆæœ‰ä¸¤ç§æƒ…å†µï¼šPassive Viewå’ŒSupervisor Controllerã€‚ ViewModel æ³¨æ„è¿™é‡Œçš„â€œModelâ€æŒ‡çš„æ˜¯Viewçš„Modelï¼Œè·ŸMVVMä¸­çš„ä¸€ä¸ªModelä¸æ˜¯ä¸€å›žäº‹ã€‚æ‰€è°“Viewçš„Modelå°±æ˜¯åŒ…å«Viewçš„ä¸€äº›æ•°æ®å±žæ€§å’Œæ“ä½œçš„è¿™ä¹ˆä¸€ä¸ªä¸œä¸œï¼Œè¿™ç§æ¨¡å¼çš„å…³é”®æŠ€æœ¯å°±æ˜¯æ•°æ®ç»‘å®šï¼ˆdata bindingï¼‰ï¼ŒViewçš„å˜åŒ–ä¼šç›´æŽ¥å½±å“ViewModelï¼ŒViewModelçš„å˜åŒ–æˆ–è€…å†…å®¹ä¹Ÿä¼šç›´æŽ¥ä½“çŽ°åœ¨Viewä¸Šã€‚è¿™ç§æ¨¡å¼å®žé™…ä¸Šæ˜¯æ¡†æž¶æ›¿åº”ç”¨å¼€å‘è€…åšäº†ä¸€äº›å·¥ä½œï¼Œå¼€å‘è€…åªéœ€è¦è¾ƒå°‘çš„ä»£ç å°±èƒ½å®žçŽ°æ¯”è¾ƒå¤æ‚çš„äº¤äº’ã€‚ ä¸€ç‚¹å¿ƒå¾—MVPå’ŒMVVMå®Œå…¨éš”ç¦»äº†Modelå’ŒViewï¼Œä½†æ˜¯åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæ•°æ®ä»ŽModelåˆ°ViewModelæˆ–è€…Presenterçš„æ‹·è´å¼€é”€å¾ˆå¤§ï¼Œå¯èƒ½ä¹Ÿä¼šç»“åˆMVCçš„æ–¹å¼ï¼ŒModelç›´æŽ¥é€šçŸ¥Viewè¿›è¡Œå˜æ›´ã€‚åœ¨å®žé™…çš„åº”ç”¨ä¸­å¾ˆæœ‰å¯èƒ½ä½ å·²ç»åœ¨ä¸çŸ¥ä¸è§‰ä¸­å°†å‡ ç§æ¨¡å¼èžåˆåœ¨ä¸€èµ·ï¼Œä½†æ˜¯ä¸ºäº†ä»£ç çš„å¯æ‰©å±•ã€å¯æµ‹è¯•æ€§ï¼Œå¿…é¡»åšåˆ°æ¨¡å—çš„è§£è€¦ï¼Œä¸ç›¸å…³çš„ä»£ç ä¸è¦æ”¾åœ¨ä¸€èµ·ã€‚ç½‘ä¸Šæœ‰ä¸€ä¸ªæ•…äº‹è®²ï¼Œä¸€ä¸ªäººåœ¨ä¸€å®¶å…¬å¸åšä¸€ä¸ªæ–°äº§å“æ—¶ï¼Œä¸€åå¤–åŒ…å…¬å¸çš„æ–°å‘˜å·¥ç›´æŽ¥åœ¨Viewä¸­åšäº†æ•°æ®åº“æŒä¹…åŒ–æ“ä½œï¼Œè€Œä¸”ä¸€ä¸ªhibernateä»£ç å±•å¼€åŽå‘çŽ°ç«Ÿç„¶æœ‰å‡ ç™¾è¡Œçš„SQLè¯­å¥ï¼Œæžå¾—ä»–ä»¬æƒŠè®¶ä¸å·²ï¼Œä¸€æ—¶æˆä¸ºç¬‘è°ˆã€‚ ä¸ªäººç†è§£ï¼Œåœ¨å¹¿ä¹‰åœ°è°ˆè®ºMVCæž¶æž„æ—¶ï¼Œå¹¶éžæŒ‡æœ¬æ–‡ä¸­ä¸¥æ ¼å®šä¹‰çš„MVCï¼Œè€Œæ˜¯æŒ‡çš„MV*ï¼Œä¹Ÿå°±æ˜¯è§†å›¾å’Œæ¨¡åž‹çš„åˆ†ç¦»ï¼Œåªè¦ä¸€ä¸ªæ¡†æž¶æä¾›äº†è§†å›¾å’Œæ¨¡åž‹åˆ†ç¦»çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªMVCæ¡†æž¶ã€‚åœ¨å¼€å‘æ·±å…¥ä¹‹åŽï¼Œå¯ä»¥å†ä½“ä¼šç”¨åˆ°çš„æ¡†æž¶åˆ°åº•æ˜¯MVCã€MVPè¿˜æ˜¯MVVMã€‚ 5. åŸºäºŽAOPçš„æ¡†æž¶è®¾è®¡AOP(Aspect-Oriented Programming, é¢å‘åˆ‡é¢ç¼–ç¨‹)ï¼Œè¯žç”ŸäºŽä¸Šä¸ªä¸–çºª90å¹´ä»£ï¼Œæ˜¯å¯¹OOP(Object-Oriented Programming, é¢å‘å¯¹è±¡ç¼–ç¨‹)çš„è¡¥å……å’Œå®Œå–„ã€‚OOPå¼•å…¥å°è£…ã€ç»§æ‰¿å’Œå¤šæ€æ€§ç­‰æ¦‚å¿µæ¥å»ºç«‹ä¸€ç§å¯¹è±¡å±‚æ¬¡ç»“æž„ï¼Œç”¨ä»¥æ¨¡æ‹Ÿå…¬å…±è¡Œä¸ºçš„ä¸€ä¸ªé›†åˆã€‚å½“æˆ‘ä»¬éœ€è¦ä¸ºåˆ†æ•£çš„å¯¹è±¡å¼•å…¥å…¬å…±è¡Œä¸ºçš„æ—¶å€™ï¼ŒOOPåˆ™æ˜¾å¾—æ— èƒ½ä¸ºåŠ›ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒOOPå…è®¸ä½ å®šä¹‰ä»Žä¸Šåˆ°ä¸‹çš„å…³ç³»ï¼Œä½†å¹¶ä¸é€‚åˆå®šä¹‰ä»Žå·¦åˆ°å³çš„å…³ç³»ã€‚ä¾‹å¦‚æ—¥å¿—åŠŸèƒ½ã€‚æ—¥å¿—ä»£ç å¾€å¾€æ°´å¹³åœ°æ•£å¸ƒåœ¨æ‰€æœ‰å¯¹è±¡å±‚æ¬¡ä¸­ï¼Œè€Œä¸Žå®ƒæ‰€æ•£å¸ƒåˆ°çš„å¯¹è±¡çš„æ ¸å¿ƒåŠŸèƒ½æ¯«æ— å…³ç³»ã€‚å¯¹äºŽå…¶ä»–ç±»åž‹çš„ä»£ç ï¼Œå¦‚å®‰å…¨æ€§ã€å¼‚å¸¸å¤„ç†å’Œé€æ˜Žçš„æŒç»­æ€§ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™ç§æ•£å¸ƒåœ¨å„å¤„çš„æ— å…³çš„ä»£ç è¢«ç§°ä¸ºæ¨ªåˆ‡ï¼ˆCross-Cuttingï¼‰ä»£ç ï¼Œåœ¨OOPè®¾è®¡ä¸­ï¼Œå®ƒå¯¼è‡´äº†å¤§é‡ä»£ç çš„é‡å¤ï¼Œè€Œä¸åˆ©äºŽå„ä¸ªæ¨¡å—çš„é‡ç”¨ã€‚è€ŒAOPæŠ€æœ¯åˆ™æ°æ°ç›¸åï¼Œå®ƒåˆ©ç”¨ä¸€ç§ç§°ä¸ºâ€œæ¨ªåˆ‡â€çš„æŠ€æœ¯ï¼Œå‰–è§£å¼€å°è£…çš„å¯¹è±¡å†…éƒ¨ï¼Œå¹¶å°†é‚£äº›å½±å“äº†å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºå°è£…åˆ°ä¸€ä¸ªå¯é‡ç”¨æ¨¡å—ï¼Œå¹¶å°†å…¶åä¸ºâ€œAspectâ€ï¼Œå³æ–¹é¢ã€‚æ‰€è°“â€œæ–¹é¢â€ï¼Œç®€å•åœ°è¯´ï¼Œå°±æ˜¯å°†é‚£äº›ä¸Žä¸šåŠ¡æ— å…³ï¼Œå´ä¸ºä¸šåŠ¡æ¨¡å—æ‰€å…±åŒè°ƒç”¨çš„é€»è¾‘æˆ–è´£ä»»å°è£…èµ·æ¥ï¼Œä¾¿äºŽå‡å°‘ç³»ç»Ÿçš„é‡å¤ä»£ç ï¼Œé™ä½Žæ¨¡å—é—´çš„è€¦åˆåº¦ï¼Œå¹¶æœ‰åˆ©äºŽæœªæ¥çš„å¯æ“ä½œæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ 5.1 AOPåœ¨Androidä¸­çš„ä½¿ç”¨AOPæŠŠè½¯ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚ä¸šåŠ¡å¤„ç†çš„ä¸»è¦æµç¨‹æ˜¯æ ¸å¿ƒå…³æ³¨ç‚¹ï¼Œä¸Žä¹‹å…³ç³»ä¸å¤§çš„éƒ¨åˆ†æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚æ¨ªåˆ‡å…³æ³¨ç‚¹çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œä»–ä»¬ç»å¸¸å‘ç”Ÿåœ¨æ ¸å¿ƒå…³æ³¨ç‚¹çš„å¤šå¤„ï¼Œè€Œå„å¤„éƒ½åŸºæœ¬ç›¸ä¼¼ã€‚AOPçš„ä½œç”¨åœ¨äºŽåˆ†ç¦»ç³»ç»Ÿä¸­çš„å„ç§å…³æ³¨ç‚¹ï¼Œå°†æ ¸å¿ƒå…³æ³¨ç‚¹å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹åˆ†ç¦»å¼€æ¥ã€‚åœ¨Android Appä¸­ï¼Œå“ªäº›æ˜¯æˆ‘ä»¬éœ€è¦çš„æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Ÿä¸ªäººè®¤ä¸ºä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼šHttp, SharedPreferences, Json, Xml, File, Device, System, Log, æ ¼å¼è½¬æ¢ç­‰ã€‚Android Appçš„éœ€æ±‚å·®åˆ«å¾ˆå¤§ï¼Œä¸åŒçš„éœ€æ±‚æ¨ªåˆ‡å…³æ³¨ç‚¹å¿…ç„¶æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸€èˆ¬çš„Appå·¥ç¨‹ä¸­åº”è¯¥æœ‰ä¸€ä¸ªUtil Packageæ¥å­˜æ”¾ç›¸å…³çš„åˆ‡é¢æ“ä½œï¼Œåœ¨é¡¹ç›®å¤šäº†ä¹‹åŽå¯ä»¥å°†å…¶ä¸­ä½¿ç”¨è¾ƒå¤šçš„Utilå°è£…ä¸ºä¸€ä¸ªJaråŒ…ä¾›å·¥ç¨‹è°ƒç”¨ã€‚ åœ¨ä½¿ç”¨MVPå’ŒAOPå¯¹Appè¿›è¡Œçºµå‘å’Œæ¨ªå‘çš„åˆ‡å‰²ä¹‹åŽï¼Œèƒ½å¤Ÿä½¿å¾—Appæ•´ä½“çš„ç»“æž„æ›´æ¸…æ™°åˆç†ï¼Œé¿å…å±€éƒ¨çš„ä»£ç è‡ƒè‚¿ï¼Œæ–¹ä¾¿å¼€å‘ã€æµ‹è¯•ä»¥åŠåŽç»­çš„ç»´æŠ¤ã€‚ 6. å¹²è´§ï¼šAndroidAppæž¶æž„çš„è®¾è®¡ç»éªŒé¦–å…ˆæ˜¯ä½œè€…æœ€æœ€å–œæ¬¢çš„ä¸€å¥è¯ï¼Œä¹Ÿæ˜¯å¯¹åˆ›ä¸šå…¬å¸ç‰¹åˆ«é€‚ç”¨çš„ä¸€å¥è¯ï¼Œä¹Ÿæ˜¯å¯¹ä¸è¦è¿‡åº¦è®¾è®¡çš„ä¸€ç§è¯ é‡Šï¼š å…ˆå®žçŽ°ï¼Œå†é‡æž„å§ã€‚ç›´æŽ¥è€ƒè™‘ä»£ç ä¸è‡ƒè‚¿å¾—è¯ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ‰èƒ½å†™å¥½äº†å…ˆå®žçŽ°ï¼Œå†é‡æž„å§ã€‚ç›´æŽ¥è€ƒè™‘ä»£ç ä¸è‡ƒè‚¿å¾—è¯ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ‰èƒ½å†™å¥½äº†å…ˆå®žçŽ°ï¼Œå†é‡æž„å§ã€‚ç›´æŽ¥è€ƒè™‘ä»£ç ä¸è‡ƒè‚¿å¾—è¯ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ‰èƒ½å†™å¥½äº†ï¼ˆé‡è¦çš„äº‹æƒ…è¯´ä¸‰é) 6.1 æ•´ä½“æž¶æž„ä»£ç å’Œæ–‡æ¡£è§„èŒƒï¼Œæ ¹æ®éœ€æ±‚è¿›è¡Œæ¨¡å—åˆ’åˆ†ï¼Œç¡®å®šäº¤äº’æ–¹å¼ï¼Œå½¢æˆæŽ¥å£æ–‡æ¡£ï¼Œè¿™äº›è¾ƒä¸ºé€šç”¨çš„å†…å®¹ä¸å†ç»†è¯´ã€‚åšAndroid Appæ—¶ï¼Œä¸€èˆ¬å°†Appè¿›è¡Œçºµå‘å’Œæ¨ªå‘çš„åˆ’åˆ†ã€‚çºµå‘çš„Appç”±UIå±‚ï¼Œé€»è¾‘å±‚å’Œæ¨¡åž‹å±‚æž„æˆï¼Œæ•´ä½“ç»“æž„åŸºäºŽMVPæ€æƒ³(å›¾ç‰‡æ¥è‡ªç½‘ç»œ)ã€‚ UIå±‚å†…éƒ¨å¤šç”¨æ¨¡æ¿æ–¹æ³•ï¼Œä»¥Activityä¸ºä¾‹ä¸€èˆ¬æœ‰BaseActivityï¼Œæä¾›åŒ…æ‹¬ä¸€äº›åŸºç¡€æ ·å¼ï¼ŒDialogï¼ŒActionBaråœ¨å†…çš„å†…å®¹ï¼Œå±•çŽ°çš„Activityéƒ½ä¼šç»§æ‰¿BaseActivityå¹¶å®žçŽ°é¢„ç•™çš„æŽ¥å£ï¼ŒActivityä¹‹é—´çš„ç»§æ‰¿ä¸è¶…è¿‡3æ¬¡ï¼›ä¸ºé¿å…Activityå†…ä»£ç è¿‡å¤šï¼Œå°†Appçš„æ•´ä½“æŽ§åˆ¶æƒåŽç§»ï¼Œä¹Ÿå€Ÿé‰´äº†IOCåšæ³•ï¼Œå¤§é‡çš„é€»è¾‘æ“ä½œæ”¾åœ¨é€»è¾‘å±‚ä¸­ï¼Œé€»è¾‘å±‚å’ŒUIå±‚é€šè¿‡æŽ¥å£æˆ–è€…Broadcastç­‰å®žçŽ°é€šä¿¡ï¼Œåªä¼ é€’ç»“æžœã€‚ä¸€èˆ¬Activityé‡Œçš„ä»£ç é‡éƒ½å¾ˆå¤§ï¼Œé€šè¿‡è¿™ä¸¤ç§æ–¹å¼ä¸€èˆ¬æˆ‘å†™çš„å•ä¸ªActivityå†…ä»£ç é‡ä¸è¶…è¿‡400è¡Œã€‚ é€»è¾‘å±‚å®žçŽ°çš„æ˜¯ç»å¤§éƒ¨åˆ†çš„é€»è¾‘æ“ä½œï¼Œç”±UIå±‚å¯åŠ¨ï¼Œåœ¨å†…éƒ¨é€šè¿‡æŽ¥å£è°ƒç”¨æ¨¡åž‹å±‚çš„æ–¹æ³•ï¼Œåœ¨é€»è¾‘å±‚å†…å¤§é‡ä½¿ç”¨äº†ä»£ç†ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼ŒUIå±‚å‘Šè¯‰é€»è¾‘å±‚æˆ‘éœ€è¦åšçš„äº‹ï¼Œé€»è¾‘å±‚åŽ»æ‰¾ç›¸åº”çš„äºº(æ¨¡åž‹å±‚)åŽ»åšï¼Œæœ€åŽåªå‘Šè¯‰UIè¿™ä»¶äº‹åšçš„ç»“æžœã€‚ æ¨¡åž‹å±‚æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œè¿™éƒ¨åˆ†ä¸€èˆ¬ç”±å¤§é‡çš„Packageç»„æˆï¼Œä»£ç é‡æ˜¯ä¸‰å±‚ä¸­æœ€å¤§çš„ï¼Œéœ€è¦åœ¨å†…éƒ¨è¿›è¡Œåˆ†å±‚ã€‚ æ¨ªå‘çš„åˆ†å‰²ä¾æ®AOPé¢å‘åˆ‡é¢çš„æ€æƒ³ï¼Œä¸»è¦æ˜¯æå–å‡ºå…±ç”¨æ–¹æ³•ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„Utilï¼Œè¿™äº›Utilä¼šåœ¨Appæ•´ä½“ä¸­ç©¿æ’ä½¿ç”¨ã€‚å¾ˆå¤šäººçš„Appéƒ½ä¼šå¼•å…¥è‡ªå·±å°è£…çš„JaråŒ…ï¼Œå°è£…äº†åŒ…æ‹¬æ–‡ä»¶ã€JSONã€SharedPreferenceç­‰åœ¨å†…çš„å¸¸ç”¨æ“ä½œï¼Œè‡ªå·±å†™çš„ç”¨èµ·æ¥é¡ºæ‰‹ï¼Œä¹Ÿå¤§å¹…åº¦é™ä½Žäº†é‡å¤ä½œä¸šã€‚ è¿™æ ·çºµï¼Œæ¨ªä¸¤æ¬¡å¯¹äºŽAppä»£ç çš„åˆ†å‰²å·²ç»èƒ½ä½¿å¾—ç¨‹åºä¸ä¼šè¿‡å¤šå †ç§¯åœ¨ä¸€ä¸ªJavaæ–‡ä»¶é‡Œï¼Œä½†é ä¸€æ¬¡å¼€å‘è¿‡ç¨‹å°±å†™å‡ºé«˜è´¨é‡çš„ä»£ç æ˜¯å¾ˆå›°éš¾çš„ï¼Œè¶ç€é¡¹ç›®çš„é—´æ­‡æœŸï¼Œå¯¹ä»£ç è¿›è¡Œé‡æž„å¾ˆæœ‰å¿…è¦ã€‚ 6.2 ç±»åº“çš„ä½¿ç”¨çŽ°åœ¨æœ‰å¾ˆå¤šå¸®åŠ©å¿«é€Ÿå¼€å‘çš„ç±»åº“ï¼Œæ´»ç”¨è¿™äº›ç±»åº“ä¹Ÿæ˜¯é¿å…ä»£ç è‡ƒè‚¿å’Œæ··ä¹±çš„å¥½æ–¹æ³•ï¼Œä¸‹é¢ç»™é¢˜ä¸»æŽ¨èå‡ ä¸ªå¸¸ç”¨ç±»åº“ã€‚ å‡å°‘Activityä»£ç é‡çš„ä¾èµ–æ³¨å…¥æ¡†æž¶ButterKnife: https://github.com/JakeWharton/butterknife ç®€åŒ–å¯¹äºŽSQliteæ“ä½œçš„å¯¹è±¡å…³ç³»æ˜ å°„æ¡†æž¶OrmLite: https://github.com/j256/ormlite-android å›¾ç‰‡ç¼“å­˜ç±»åº“Fresco(by facebook): https://github.com/facebook/fresco èƒ½ç”¨ç¬¬ä¸‰æ–¹åº“å°±ç”¨ç¬¬ä¸‰æ–¹åº“ã€‚åˆ«ç®¡æ˜¯å¦ç¨³å®šï¼Œæ˜¯å¦è¢«æŒç»­ç»´æŠ¤ï¼Œå› ä¸ºï¼Œä»»ä½•ç¬¬ä¸‰æ–¹åº“çš„ä½œè€…ï¼Œéƒ½èƒ½ç¢¾åŽ‹åˆšå…¥é—¨çš„èœé¸Ÿï¼Œä½ ç»å¯¹å†™ä¸å‡ºæ¯”åˆ«äººæ›´å¥½çš„ä»£ç äº†ã€‚ æœ€åŽé™„ä¸ŠçŸ¥ä¹Žä¸Šé¢ç‚¹èµžæ¬¡æ•°å¾ˆé«˜çš„ä¸€æ®µè¯ï¼š å¦‚æžœâ€œä»Žé›¶å¼€å§‹â€ï¼Œç”¨ä»€ä¹ˆè®¾è®¡æž¶æž„çš„é—®é¢˜å±žäºŽæƒ³å¾—å¤ªå¤šåšå¾—å¤ªå°‘çš„é—®é¢˜ã€‚ ä»Žé›¶å¼€å§‹æ„å‘³ç€ä¸€ä¸ªé¡¹ç›®çš„ä¸»è¦æŠ€æœ¯éš¾ç‚¹æ˜¯åŸºæœ¬åŠŸèƒ½å®žçŽ°ã€‚å½“æ¯ä¸€ä¸ªåŠŸèƒ½éƒ½éœ€è¦è€ƒè™‘å¦‚ä½•åšåˆ°çš„æ—¶å€™ï¼Œæˆ‘è§‰å¾—ä¸€èˆ¬äººéƒ½æ²¡åŠžæ³•è€ƒè™‘å¦‚ä½•åšå¥½ã€‚ å› ä¸ºï¼Œæ‰€æœ‰çš„ä¼˜åŒ–éƒ½æ˜¯ç«™åœ¨æœ€ä¸Šå±‚è¿›è¡Œç»Ÿç­¹è§„åˆ’ã€‚åœ¨è¿™ä¹‹å‰ï¼Œä½ å¿…é¡»å¯¹ä¸‹å±‚çš„æ¯ä¸€ä¸ªæ¨¡å—éƒ½éžå¸¸ç†Ÿæ‚‰ï¼Œè¿›è€Œæç‚¼å¯å¤ç”¨çš„ä»£ç ã€è§„åˆ’é€»è¾‘æµç¨‹ã€‚ æ‰€ä»¥ï¼Œå¦‚æžœçœŸçš„æ˜¯ä»Žé›¶å¼€å§‹ï¼Œåˆ«æƒ³å¤ªå¤šäº† å‚è€ƒæ–‡çŒ®ï¼š 1ã€http://blog.csdn.net/luyi325xyz/article/details/43085409 2ã€http://blog.csdn.net/napolunyishi/article/details/22722345 3ã€https://www.zhihu.com/question/27645587/answer/37579829 4ã€http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0202/2397.html 5ã€http://www.tuicool.com/articles/VJZrYb 6ã€https://www.zhihu.com/question/27645587 7ã€http://blog.csdn.net/luyi325xyz/article/details/43482123 8ã€https://www.zhihu.com/question/30976423 9ã€http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2015/0313/2599.html 10ã€http://www.2cto.com/kf/201506/405766.html 11ã€https://www.zhihu.com/question/19766132 12ã€http://www.cnblogs.com/artech/archive/2010/03/25/1696205.html 13ã€https://segmentfault.com/a/1190000003927200 14ã€http://blog.csdn.net/knxw0001/article/details/39637273 ç‰ˆæƒå£°æ˜Ž å‘¨é¸¿åš]]></content>
      <categories>
        <category>Android</category>
        <category>è®¾è®¡æž¶æž„</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>è®¾è®¡æž¶æž„</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå¼€å‘æ€»ç»“(æ€ç»´å¯¼å›¾)]]></title>
    <url>%2Fposts%2F737b202d.html</url>
    <content type="text"><![CDATA[æ¦‚è¿°ç»“åˆè‡ªå·±çš„ç†è§£ï¼Œç”¨ xmindï¼ˆæ€ç»´å¯¼å›¾å·¥å…·ï¼‰ æ€»ç»“äº† Android åº”ç”¨å¼€å‘çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œæ–¹ä¾¿å¿«é€Ÿæ¢³ç†æ•´ä½“çš„çŸ¥è¯†ä½“ç³»ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>é¢è¯•</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidäº‹ä»¶åˆ†å‘æœºåˆ¶è¯¦è§£æ”»ç•¥ï¼Œæ‚¨å€¼å¾—æ‹¥æœ‰]]></title>
    <url>%2Fposts%2F92ff150b.html</url>
    <content type="text"><![CDATA[å‰è¨€è½¬è‡ªï¼šhttps://blog.csdn.net/carson_ho/article/details/54136311 Androidäº‹ä»¶åˆ†å‘æœºåˆ¶æ˜¯Androidå¼€å‘è€…å¿…é¡»äº†è§£çš„åŸºç¡€ ç½‘ä¸Šæœ‰å¤§é‡å…³äºŽAndroidäº‹ä»¶åˆ†å‘æœºåˆ¶çš„æ–‡ç« ï¼Œä½†å­˜åœ¨ä¸€äº›é—®é¢˜ï¼šå†…å®¹ä¸å…¨ã€æ€è·¯ä¸æ¸…æ™°ã€æ— æºç åˆ†æžã€ç®€å•é—®é¢˜å¤æ‚åŒ–ç­‰ç­‰ ä»Šå¤©ï¼Œæˆ‘å°†å…¨é¢æ€»ç»“Androidçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Œæˆ‘èƒ½ä¿è¯è¿™æ˜¯å¸‚é¢ä¸Šçš„æœ€å…¨é¢ã€æœ€æ¸…æ™°ã€æœ€æ˜“æ‡‚çš„ æœ¬æ–‡ç§‰ç€â€œç»“è®ºå…ˆè¡Œã€è¯¦ç»†åˆ†æžåœ¨åŽâ€çš„åŽŸåˆ™ï¼Œå³å…ˆè®©å¤§å®¶æ„Ÿæ€§è®¤è¯†ï¼Œå†é€šè¿‡ç†æ€§åˆ†æžä»Žè€Œç†è§£é—®é¢˜ï¼› æ‰€ä»¥ï¼Œè¯·å„ä½è¯»è€…å…ˆè®°ä½ç»“è®ºï¼Œå†å¾€ä¸‹ç»§ç»­çœ‹åˆ†æžï¼› æ–‡ç« è¾ƒé•¿ï¼Œé˜…è¯»éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œå»ºè®®æ”¶è—ç­‰å……è¶³æ—¶é—´å†è¿›è¡Œé˜…è¯» ç›®å½• 1. åŸºç¡€è®¤çŸ¥1.1 äº‹ä»¶åˆ†å‘çš„å¯¹è±¡æ˜¯è°ï¼Ÿç­”ï¼šç‚¹å‡»äº‹ä»¶ï¼ˆTouchäº‹ä»¶ï¼‰ å®šä¹‰å½“ç”¨æˆ·è§¦æ‘¸å±å¹•æ—¶ï¼ˆView æˆ– ViewGroupæ´¾ç”Ÿçš„æŽ§ä»¶ï¼‰ï¼Œå°†äº§ç”Ÿç‚¹å‡»äº‹ä»¶ï¼ˆTouchäº‹ä»¶ï¼‰ Touchäº‹ä»¶çš„ç›¸å…³ç»†èŠ‚ï¼ˆå‘ç”Ÿè§¦æ‘¸çš„ä½ç½®ã€æ—¶é—´ç­‰ï¼‰è¢«å°è£…æˆMotionEventå¯¹è±¡ äº‹ä»¶ç±»åž‹ï¼ˆ4ç§ï¼‰ äº‹ä»¶ç±»åž‹ å…·ä½“åŠ¨ä½œ MotionEvent.ACTION_DOWN æŒ‰ä¸‹Viewï¼ˆæ‰€æœ‰äº‹ä»¶çš„å¼€å§‹ï¼‰ MotionEvent.ACTION_UP æŠ¬èµ·Viewï¼ˆä¸ŽDOWNå¯¹åº”ï¼‰ MotionEvent.ACTION_MOVE æ»‘åŠ¨View MotionEvent.ACTION_CANCEL ç»“æŸäº‹ä»¶ï¼ˆéžäººä¸ºåŽŸå› ï¼‰ ç‰¹åˆ«è¯´æ˜Žï¼šäº‹ä»¶åˆ— ä»Žæ‰‹æŒ‡æŽ¥è§¦å±å¹• è‡³ æ‰‹æŒ‡ç¦»å¼€å±å¹•ï¼Œè¿™ä¸ªè¿‡ç¨‹äº§ç”Ÿçš„ä¸€ç³»åˆ—äº‹ä»¶ æ³¨ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œäº‹ä»¶åˆ—éƒ½æ˜¯ä»¥DOWNäº‹ä»¶å¼€å§‹ã€UPäº‹ä»¶ç»“æŸï¼Œä¸­é—´æœ‰æ— æ•°çš„MOVEäº‹ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼š å³å½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼ˆMotionEvent ï¼‰äº§ç”ŸåŽï¼Œç³»ç»Ÿéœ€æŠŠè¿™ä¸ªäº‹ä»¶ä¼ é€’ç»™ä¸€ä¸ªå…·ä½“çš„ View åŽ»å¤„ç†ã€‚ 1.2 äº‹ä»¶åˆ†å‘çš„æœ¬è´¨ç­”ï¼šå°†ç‚¹å‡»äº‹ä»¶ï¼ˆMotionEventï¼‰ä¼ é€’åˆ°æŸä¸ªå…·ä½“çš„View &amp; å¤„ç†çš„æ•´ä¸ªè¿‡ç¨‹ å³ äº‹ä»¶ä¼ é€’çš„è¿‡ç¨‹ = åˆ†å‘è¿‡ç¨‹ã€‚ 1.3 äº‹ä»¶åœ¨å“ªäº›å¯¹è±¡ä¹‹é—´è¿›è¡Œä¼ é€’ï¼Ÿç­”ï¼šActivityã€ViewGroupã€View Androidçš„UIç•Œé¢ç”±Activityã€ViewGroupã€View åŠå…¶æ´¾ç”Ÿç±»ç»„æˆ 1.4 äº‹ä»¶åˆ†å‘çš„é¡ºåºå³ äº‹ä»¶ä¼ é€’çš„é¡ºåºï¼šActivity -&gt; ViewGroup -&gt; View å³ï¼š1ä¸ªç‚¹å‡»äº‹ä»¶å‘ç”ŸåŽï¼Œäº‹ä»¶å…ˆä¼ åˆ°Activityã€å†ä¼ åˆ°ViewGroupã€æœ€ç»ˆå†ä¼ åˆ° View 1.5 äº‹ä»¶åˆ†å‘è¿‡ç¨‹ç”±å“ªäº›æ–¹æ³•åä½œå®Œæˆï¼Ÿç­”ï¼šdispatchTouchEvent() ã€onInterceptTouchEvent()å’ŒonTouchEvent() ä¸‹æ–‡ä¼šå¯¹è¿™3ä¸ªæ–¹æ³•è¿›è¡Œè¯¦ç»†ä»‹ç» 1.6 æ€»ç»“ è‡³æ­¤ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»å¯¹ Androidçš„äº‹ä»¶åˆ†å‘æœ‰äº†æ„Ÿæ€§çš„è®¤çŸ¥ ä¸‹é¢ï¼Œæˆ‘å°†è¯¦ç»†ä»‹ç»Androidäº‹ä»¶åˆ†å‘æœºåˆ¶ 2. äº‹ä»¶åˆ†å‘æœºåˆ¶ æºç åˆ†æž è¯·è°¨è®°ï¼šAndroidäº‹ä»¶åˆ†å‘æµç¨‹ = Activity -&gt; ViewGroup -&gt; View å³ï¼š1ä¸ªç‚¹å‡»äº‹ä»¶å‘ç”ŸåŽï¼Œäº‹ä»¶å…ˆä¼ åˆ°Activityã€å†ä¼ åˆ°ViewGroupã€æœ€ç»ˆå†ä¼ åˆ° View ä»Žä¸Šå¯çŸ¥ï¼Œè¦æƒ³å……åˆ†ç†è§£Androidåˆ†å‘æœºåˆ¶ï¼Œæœ¬è´¨ä¸Šæ˜¯è¦ç†è§£ï¼š Activityå¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶ ViewGroupå¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶ Viewå¯¹ç‚¹å‡»äº‹ä»¶çš„åˆ†å‘æœºåˆ¶ ä¸‹é¢ï¼Œæˆ‘å°†é€šè¿‡æºç ï¼Œå…¨é¢è§£æž äº‹ä»¶åˆ†å‘æœºåˆ¶ å³æŒ‰é¡ºåºè®²è§£ï¼šActivityäº‹ä»¶åˆ†å‘æœºåˆ¶ã€ViewGroupäº‹ä»¶åˆ†å‘æœºåˆ¶ã€Viewäº‹ä»¶åˆ†å‘æœºåˆ¶ 2.1 Activityçš„äº‹ä»¶åˆ†å‘æœºåˆ¶å½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œäº‹ä»¶æœ€å…ˆä¼ åˆ°Activityçš„dispatchTouchEvent()è¿›è¡Œäº‹ä»¶åˆ†å‘ 2.1.1 æºç åˆ†æž123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107/** * æºç åˆ†æžï¼šActivity.dispatchTouchEventï¼ˆï¼‰ */ public boolean dispatchTouchEvent(MotionEvent ev) &#123; // ä¸€èˆ¬äº‹ä»¶åˆ—å¼€å§‹éƒ½æ˜¯DOWNäº‹ä»¶ = æŒ‰ä¸‹äº‹ä»¶ï¼Œæ•…æ­¤å¤„åŸºæœ¬æ˜¯true if (ev.getAction() == MotionEvent.ACTION_DOWN) &#123; onUserInteraction(); // -&gt;&gt;åˆ†æž1 &#125; // -&gt;&gt;åˆ†æž2 if (getWindow().superDispatchTouchEvent(ev)) &#123; return true; // è‹¥getWindow().superDispatchTouchEvent(ev)çš„è¿”å›žtrue // åˆ™Activity.dispatchTouchEventï¼ˆï¼‰å°±è¿”å›žtrueï¼Œåˆ™æ–¹æ³•ç»“æŸã€‚å³ ï¼šè¯¥ç‚¹å‡»äº‹ä»¶åœæ­¢å¾€ä¸‹ä¼ é€’ &amp; äº‹ä»¶ä¼ é€’è¿‡ç¨‹ç»“æŸ // å¦åˆ™ï¼šç»§ç»­å¾€ä¸‹è°ƒç”¨Activity.onTouchEvent &#125; // -&gt;&gt;åˆ†æž4 return onTouchEvent(ev); &#125;/** * åˆ†æž1ï¼šonUserInteraction() * ä½œç”¨ï¼šå®žçŽ°å±ä¿åŠŸèƒ½ * æ³¨ï¼š * a. è¯¥æ–¹æ³•ä¸ºç©ºæ–¹æ³• * b. å½“æ­¤activityåœ¨æ ˆé¡¶æ—¶ï¼Œè§¦å±ç‚¹å‡»æŒ‰homeï¼Œbackï¼Œmenué”®ç­‰éƒ½ä¼šè§¦å‘æ­¤æ–¹æ³• */ public void onUserInteraction() &#123; &#125; // å›žåˆ°æœ€åˆçš„è°ƒç”¨åŽŸå¤„/** * åˆ†æž2ï¼šgetWindow().superDispatchTouchEvent(ev) * è¯´æ˜Žï¼š * a. getWindow() = èŽ·å–Windowç±»çš„å¯¹è±¡ * b. Windowç±»æ˜¯æŠ½è±¡ç±»ï¼Œå…¶å”¯ä¸€å®žçŽ°ç±» = PhoneWindowç±»ï¼›å³æ­¤å¤„çš„Windowç±»å¯¹è±¡ = PhoneWindowç±»å¯¹è±¡ * c. Windowç±»çš„superDispatchTouchEvent() = 1ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»PhoneWindowç±»å®žçŽ° */ @Override public boolean superDispatchTouchEvent(MotionEvent event) &#123; return mDecor.superDispatchTouchEvent(event); // mDecor = é¡¶å±‚Viewï¼ˆDecorViewï¼‰çš„å®žä¾‹å¯¹è±¡ // -&gt;&gt; åˆ†æž3 &#125;/** * åˆ†æž3ï¼šmDecor.superDispatchTouchEvent(event) * å®šä¹‰ï¼šå±žäºŽé¡¶å±‚Viewï¼ˆDecorViewï¼‰ * è¯´æ˜Žï¼š * a. DecorViewç±»æ˜¯PhoneWindowç±»çš„ä¸€ä¸ªå†…éƒ¨ç±» * b. DecorViewç»§æ‰¿è‡ªFrameLayoutï¼Œæ˜¯æ‰€æœ‰ç•Œé¢çš„çˆ¶ç±» * c. FrameLayoutæ˜¯ViewGroupçš„å­ç±»ï¼Œæ•…DecorViewçš„é—´æŽ¥çˆ¶ç±» = ViewGroup */ public boolean superDispatchTouchEvent(MotionEvent event) &#123; return super.dispatchTouchEvent(event); // è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³• = ViewGroupçš„dispatchTouchEvent() // å³ å°†äº‹ä»¶ä¼ é€’åˆ°ViewGroupåŽ»å¤„ç†ï¼Œè¯¦ç»†è¯·çœ‹ViewGroupçš„äº‹ä»¶åˆ†å‘æœºåˆ¶ &#125; // å›žåˆ°æœ€åˆçš„è°ƒç”¨åŽŸå¤„/** * åˆ†æž4ï¼šActivity.onTouchEventï¼ˆï¼‰ * å®šä¹‰ï¼šå±žäºŽé¡¶å±‚Viewï¼ˆDecorViewï¼‰ * è¯´æ˜Žï¼š * a. DecorViewç±»æ˜¯PhoneWindowç±»çš„ä¸€ä¸ªå†…éƒ¨ç±» * b. DecorViewç»§æ‰¿è‡ªFrameLayoutï¼Œæ˜¯æ‰€æœ‰ç•Œé¢çš„çˆ¶ç±» * c. FrameLayoutæ˜¯ViewGroupçš„å­ç±»ï¼Œæ•…DecorViewçš„é—´æŽ¥çˆ¶ç±» = ViewGroup */ public boolean onTouchEvent(MotionEvent event) &#123; // å½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶æœªè¢«Activityä¸‹ä»»ä½•ä¸€ä¸ªViewæŽ¥æ”¶ / å¤„ç†æ—¶ // åº”ç”¨åœºæ™¯ï¼šå¤„ç†å‘ç”Ÿåœ¨Windowè¾¹ç•Œå¤–çš„è§¦æ‘¸äº‹ä»¶ // -&gt;&gt; åˆ†æž5 if (mWindow.shouldCloseOnTouch(this, event)) &#123; finish(); return true; &#125; return false; // å³ åªæœ‰åœ¨ç‚¹å‡»äº‹ä»¶åœ¨Windowè¾¹ç•Œå¤–æ‰ä¼šè¿”å›žtrueï¼Œä¸€èˆ¬æƒ…å†µéƒ½è¿”å›žfalseï¼Œåˆ†æžå®Œæ¯• &#125;/** * åˆ†æž5ï¼šmWindow.shouldCloseOnTouch(this, event) */ public boolean shouldCloseOnTouch(Context context, MotionEvent event) &#123; // ä¸»è¦æ˜¯å¯¹äºŽå¤„ç†è¾¹ç•Œå¤–ç‚¹å‡»äº‹ä»¶çš„åˆ¤æ–­ï¼šæ˜¯å¦æ˜¯DOWNäº‹ä»¶ï¼Œeventçš„åæ ‡æ˜¯å¦åœ¨è¾¹ç•Œå†…ç­‰ if (mCloseOnTouchOutside &amp;&amp; event.getAction() == MotionEvent.ACTION_DOWN &amp;&amp; isOutOfBounds(context, event) &amp;&amp; peekDecorView() != null) &#123; return true; &#125; return false; // è¿”å›žtrueï¼šè¯´æ˜Žäº‹ä»¶åœ¨è¾¹ç•Œå¤–ï¼Œå³ æ¶ˆè´¹äº‹ä»¶ // è¿”å›žfalseï¼šæœªæ¶ˆè´¹ï¼ˆé»˜è®¤ï¼‰&#125;// å›žåˆ°åˆ†æž4è°ƒç”¨åŽŸå¤„ 2.1.2 æ€»ç»“ å½“ä¸€ä¸ªç‚¹å‡»äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä»ŽActivityçš„äº‹ä»¶åˆ†å‘å¼€å§‹ï¼ˆActivity.dispatchTouchEvent()ï¼‰ æ–¹æ³•æ€»ç»“ é‚£ä¹ˆï¼ŒViewGroupçš„dispatchTouchEvent()ä»€ä¹ˆæ—¶å€™è¿”å›žtrue / falseï¼Ÿè¯·ç»§ç»­å¾€ä¸‹çœ‹ViewGroupäº‹ä»¶çš„åˆ†å‘æœºåˆ¶ 2.2 ViewGroupäº‹ä»¶çš„åˆ†å‘æœºåˆ¶ä»Žä¸Šé¢Activityäº‹ä»¶åˆ†å‘æœºåˆ¶å¯çŸ¥ï¼ŒViewGroupäº‹ä»¶åˆ†å‘æœºåˆ¶ä»ŽdispatchTouchEvent()å¼€å§‹ 2.2.1 æºç åˆ†æž Android 5.0åŽï¼ŒViewGroup.dispatchTouchEvent()çš„æºç å‘ç”Ÿäº†å˜åŒ–ï¼ˆæ›´åŠ å¤æ‚ï¼‰ï¼Œä½†åŽŸç†ç›¸åŒï¼› æœ¬æ–‡ä¸ºäº†è®©è¯»è€…å®¹æ˜“ç†è§£ï¼Œæ•…é‡‡ç”¨Android 5.0å‰çš„ç‰ˆæœ¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293/** * æºç åˆ†æžï¼šViewGroup.dispatchTouchEventï¼ˆï¼‰ */ public boolean dispatchTouchEvent(MotionEvent ev) &#123; ... // ä»…è´´å‡ºå…³é”®ä»£ç  // é‡ç‚¹åˆ†æž1ï¼šViewGroupæ¯æ¬¡äº‹ä»¶åˆ†å‘æ—¶ï¼Œéƒ½éœ€è°ƒç”¨onInterceptTouchEvent()è¯¢é—®æ˜¯å¦æ‹¦æˆªäº‹ä»¶ if (disallowIntercept || !onInterceptTouchEvent(ev)) &#123; // åˆ¤æ–­å€¼1ï¼šdisallowIntercept = æ˜¯å¦ç¦ç”¨äº‹ä»¶æ‹¦æˆªçš„åŠŸèƒ½(é»˜è®¤æ˜¯false)ï¼Œå¯é€šè¿‡è°ƒç”¨requestDisallowInterceptTouchEventï¼ˆï¼‰ä¿®æ”¹ // åˆ¤æ–­å€¼2ï¼š !onInterceptTouchEvent(ev) = å¯¹onInterceptTouchEvent()è¿”å›žå€¼å–å // a. è‹¥åœ¨onInterceptTouchEvent()ä¸­è¿”å›žfalseï¼ˆå³ä¸æ‹¦æˆªäº‹ä»¶ï¼‰ï¼Œå°±ä¼šè®©ç¬¬äºŒä¸ªå€¼ä¸ºtrueï¼Œä»Žè€Œè¿›å…¥åˆ°æ¡ä»¶åˆ¤æ–­çš„å†…éƒ¨ // b. è‹¥åœ¨onInterceptTouchEvent()ä¸­è¿”å›žtrueï¼ˆå³æ‹¦æˆªäº‹ä»¶ï¼‰ï¼Œå°±ä¼šè®©ç¬¬äºŒä¸ªå€¼ä¸ºfalseï¼Œä»Žè€Œè·³å‡ºäº†è¿™ä¸ªæ¡ä»¶åˆ¤æ–­ // c. å…³äºŽonInterceptTouchEvent() -&gt;&gt;åˆ†æž1 ev.setAction(MotionEvent.ACTION_DOWN); final int scrolledXInt = (int) scrolledXFloat; final int scrolledYInt = (int) scrolledYFloat; final View[] children = mChildren; final int count = mChildrenCount; // é‡ç‚¹åˆ†æž2 // é€šè¿‡forå¾ªçŽ¯ï¼ŒéåŽ†äº†å½“å‰ViewGroupä¸‹çš„æ‰€æœ‰å­View for (int i = count - 1; i &gt;= 0; i--) &#123; final View child = children[i]; if ((child.mViewFlags &amp; VISIBILITY_MASK) == VISIBLE || child.getAnimation() != null) &#123; child.getHitRect(frame); // åˆ¤æ–­å½“å‰éåŽ†çš„Viewæ˜¯ä¸æ˜¯æ­£åœ¨ç‚¹å‡»çš„Viewï¼Œä»Žè€Œæ‰¾åˆ°å½“å‰è¢«ç‚¹å‡»çš„View // è‹¥æ˜¯ï¼Œåˆ™è¿›å…¥æ¡ä»¶åˆ¤æ–­å†…éƒ¨ if (frame.contains(scrolledXInt, scrolledYInt)) &#123; final float xc = scrolledXFloat - child.mLeft; final float yc = scrolledYFloat - child.mTop; ev.setLocation(xc, yc); child.mPrivateFlags &amp;= ~CANCEL_NEXT_UP_EVENT; // æ¡ä»¶åˆ¤æ–­çš„å†…éƒ¨è°ƒç”¨äº†è¯¥Viewçš„dispatchTouchEvent() // å³ å®žçŽ°äº†ç‚¹å‡»äº‹ä»¶ä»ŽViewGroupåˆ°å­Viewçš„ä¼ é€’ï¼ˆå…·ä½“è¯·çœ‹ä¸‹é¢çš„Viewäº‹ä»¶åˆ†å‘æœºåˆ¶ï¼‰ if (child.dispatchTouchEvent(ev)) &#123; mMotionTarget = child; return true; // è°ƒç”¨å­Viewçš„dispatchTouchEventåŽæ˜¯æœ‰è¿”å›žå€¼çš„ // è‹¥è¯¥æŽ§ä»¶å¯ç‚¹å‡»ï¼Œé‚£ä¹ˆç‚¹å‡»æ—¶ï¼ŒdispatchTouchEventçš„è¿”å›žå€¼å¿…å®šæ˜¯trueï¼Œå› æ­¤ä¼šå¯¼è‡´æ¡ä»¶åˆ¤æ–­æˆç«‹ // äºŽæ˜¯ç»™ViewGroupçš„dispatchTouchEventï¼ˆï¼‰ç›´æŽ¥è¿”å›žäº†trueï¼Œå³ç›´æŽ¥è·³å‡º // å³æŠŠViewGroupçš„ç‚¹å‡»äº‹ä»¶æ‹¦æˆªæŽ‰ &#125; &#125; &#125; &#125; &#125; &#125; boolean isUpOrCancel = (action == MotionEvent.ACTION_UP) || (action == MotionEvent.ACTION_CANCEL); if (isUpOrCancel) &#123; mGroupFlags &amp;= ~FLAG_DISALLOW_INTERCEPT; &#125; final View target = mMotionTarget; // é‡ç‚¹åˆ†æž3 // è‹¥ç‚¹å‡»çš„æ˜¯ç©ºç™½å¤„ï¼ˆå³æ— ä»»ä½•ViewæŽ¥æ”¶äº‹ä»¶ï¼‰ / æ‹¦æˆªäº‹ä»¶ï¼ˆæ‰‹åŠ¨å¤å†™onInterceptTouchEventï¼ˆï¼‰ï¼Œä»Žè€Œè®©å…¶è¿”å›žtrueï¼‰ if (target == null) &#123; ev.setLocation(xf, yf); if ((mPrivateFlags &amp; CANCEL_NEXT_UP_EVENT) != 0) &#123; ev.setAction(MotionEvent.ACTION_CANCEL); mPrivateFlags &amp;= ~CANCEL_NEXT_UP_EVENT; &#125; return super.dispatchTouchEvent(ev); // è°ƒç”¨ViewGroupçˆ¶ç±»çš„dispatchTouchEvent()ï¼Œå³View.dispatchTouchEvent() // å› æ­¤ä¼šæ‰§è¡ŒViewGroupçš„onTouch() -&gt;&gt; onTouchEvent() -&gt;&gt; performClickï¼ˆï¼‰ -&gt;&gt; onClick()ï¼Œå³è‡ªå·±å¤„ç†è¯¥äº‹ä»¶ï¼Œäº‹ä»¶ä¸ä¼šå¾€ä¸‹ä¼ é€’ï¼ˆå…·ä½“è¯·å‚è€ƒViewäº‹ä»¶çš„åˆ†å‘æœºåˆ¶ä¸­çš„View.dispatchTouchEventï¼ˆï¼‰ï¼‰ // æ­¤å¤„éœ€ä¸Žä¸Šé¢åŒºåˆ«ï¼šå­Viewçš„dispatchTouchEventï¼ˆï¼‰ &#125; ... &#125;/** * åˆ†æž1ï¼šViewGroup.onInterceptTouchEvent() * ä½œç”¨ï¼šæ˜¯å¦æ‹¦æˆªäº‹ä»¶ * è¯´æ˜Žï¼š * a. è¿”å›žtrue = æ‹¦æˆªï¼Œå³äº‹ä»¶åœæ­¢å¾€ä¸‹ä¼ é€’ï¼ˆéœ€æ‰‹åŠ¨è®¾ç½®ï¼Œå³å¤å†™onInterceptTouchEventï¼ˆï¼‰ï¼Œä»Žè€Œè®©å…¶è¿”å›žtrueï¼‰ * b. è¿”å›žfalse = ä¸æ‹¦æˆªï¼ˆé»˜è®¤ï¼‰ */ public boolean onInterceptTouchEvent(MotionEvent ev) &#123; return false; &#125; // å›žåˆ°è°ƒç”¨åŽŸå¤„ 2.2.2 æ€»ç»“ ç»“è®ºï¼šAndroidäº‹ä»¶åˆ†å‘æ€»æ˜¯å…ˆä¼ é€’åˆ°ViewGroupã€å†ä¼ é€’åˆ°View è¿‡ç¨‹ï¼šå½“ç‚¹å‡»äº†æŸä¸ªæŽ§ä»¶æ—¶ æ ¸å¿ƒæ–¹æ³•æ€»ç»“ 2.2.3 Demoè®²è§£ å¸ƒå±€å¦‚ä¸‹ æµ‹è¯•ä»£ç  å¸ƒå±€æ–‡ä»¶ï¼šactivity_main.xml 12345678910111213141516171819202122&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:id="@+id/my_layout" android:layout_width="match_parent" android:layout_height="match_parent" xmlns:app="http://schemas.android.com/apk/res-auto" android:focusableInTouchMode="true" android:orientation="vertical"&gt; &lt;Button android:id="@+id/button1" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="æŒ‰é’®1" /&gt; &lt;Button android:id="@+id/button2" android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="æŒ‰é’®2" /&gt;&lt;/LinearLayout&gt; æ ¸å¿ƒä»£ç ï¼šMainActivity.java 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * ViewGroupå¸ƒå±€ï¼ˆmyLayoutï¼‰ä¸­æœ‰2ä¸ªå­View = 2ä¸ªæŒ‰é’® */ public class MainActivity extends AppCompatActivity &#123; Button button1,button2; ViewGroup myLayout; @Override public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); button1 = (Button)findViewById(R.id.button1); button2 = (Button)findViewById(R.id.button2); myLayout = (LinearLayout)findViewById(R.id.my_layout); // 1.ä¸ºViewGroupå¸ƒå±€è®¾ç½®ç›‘å¬äº‹ä»¶ myLayout.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Log.d("TAG", "ç‚¹å‡»äº†ViewGroup"); &#125; &#125;); // 2. ä¸ºæŒ‰é’®1è®¾ç½®ç›‘å¬äº‹ä»¶ button1.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Log.d("TAG", "ç‚¹å‡»äº†button1"); &#125; &#125;); // 3. ä¸ºæŒ‰é’®2è®¾ç½®ç›‘å¬äº‹ä»¶ button2.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Log.d("TAG", "ç‚¹å‡»äº†button2"); &#125; &#125;); &#125;&#125; ç»“æžœæµ‹è¯• ä»Žä¸Šé¢çš„æµ‹è¯•ç»“æžœå‘çŽ°ï¼š ç‚¹å‡»Buttonæ—¶ï¼Œæ‰§è¡ŒButton.onClick()ï¼Œä½†ViewGroupLayoutæ³¨å†Œçš„onTouchï¼ˆï¼‰ä¸ä¼šæ‰§è¡Œ åªæœ‰ç‚¹å‡»ç©ºç™½åŒºåŸŸæ—¶ï¼Œæ‰ä¼šæ‰§è¡ŒViewGroupLayoutçš„onTouchï¼ˆï¼‰ ç»“è®ºï¼šButtonçš„onClick()å°†äº‹ä»¶æ¶ˆè´¹æŽ‰äº†ï¼Œå› æ­¤äº‹ä»¶ä¸ä¼šå†ç»§ç»­å‘ä¸‹ä¼ é€’ã€‚ 2.3 Viewäº‹ä»¶çš„åˆ†å‘æœºåˆ¶ä»Žä¸Šé¢ViewGroupäº‹ä»¶åˆ†å‘æœºåˆ¶çŸ¥é“ï¼ŒViewäº‹ä»¶åˆ†å‘æœºåˆ¶ä»ŽdispatchTouchEvent()å¼€å§‹ 2.3.1 æºç åˆ†æž12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849/** * æºç åˆ†æžï¼šView.dispatchTouchEventï¼ˆï¼‰ */ public boolean dispatchTouchEvent(MotionEvent event) &#123; if (mOnTouchListener != null &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; mOnTouchListener.onTouch(this, event)) &#123; return true; &#125; return onTouchEvent(event); &#125; // è¯´æ˜Žï¼šåªæœ‰ä»¥ä¸‹3ä¸ªæ¡ä»¶éƒ½ä¸ºçœŸï¼ŒdispatchTouchEvent()æ‰è¿”å›žtrueï¼›å¦åˆ™æ‰§è¡ŒonTouchEvent() // 1. mOnTouchListener != null // 2. (mViewFlags &amp; ENABLED_MASK) == ENABLED // 3. mOnTouchListener.onTouch(this, event) // ä¸‹é¢å¯¹è¿™3ä¸ªæ¡ä»¶é€ä¸ªåˆ†æž/** * æ¡ä»¶1ï¼šmOnTouchListener != null * è¯´æ˜Žï¼šmOnTouchListenerå˜é‡åœ¨View.setOnTouchListenerï¼ˆï¼‰æ–¹æ³•é‡Œèµ‹å€¼ */ public void setOnTouchListener(OnTouchListener l) &#123; mOnTouchListener = l; // å³åªè¦æˆ‘ä»¬ç»™æŽ§ä»¶æ³¨å†Œäº†Touchäº‹ä»¶ï¼ŒmOnTouchListenerå°±ä¸€å®šè¢«èµ‹å€¼ï¼ˆä¸ä¸ºç©ºï¼‰&#125; /** * æ¡ä»¶2ï¼š(mViewFlags &amp; ENABLED_MASK) == ENABLED * è¯´æ˜Žï¼š * a. è¯¥æ¡ä»¶æ˜¯åˆ¤æ–­å½“å‰ç‚¹å‡»çš„æŽ§ä»¶æ˜¯å¦enable * b. ç”±äºŽå¾ˆå¤šViewé»˜è®¤enableï¼Œæ•…è¯¥æ¡ä»¶æ’å®šä¸ºtrue *//** * æ¡ä»¶3ï¼šmOnTouchListener.onTouch(this, event) * è¯´æ˜Žï¼šå³ å›žè°ƒæŽ§ä»¶æ³¨å†ŒTouchäº‹ä»¶æ—¶çš„onTouchï¼ˆï¼‰ï¼›éœ€æ‰‹åŠ¨å¤å†™è®¾ç½®ï¼Œå…·ä½“å¦‚ä¸‹ï¼ˆä»¥æŒ‰é’®Buttonä¸ºä¾‹ï¼‰ */ button.setOnTouchListener(new OnTouchListener() &#123; @Override public boolean onTouch(View v, MotionEvent event) &#123; return false; &#125; &#125;); // è‹¥åœ¨onTouchï¼ˆï¼‰è¿”å›žtrueï¼Œå°±ä¼šè®©ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶å…¨éƒ¨æˆç«‹ï¼Œä»Žè€Œä½¿å¾—View.dispatchTouchEventï¼ˆï¼‰ç›´æŽ¥è¿”å›žtrueï¼Œäº‹ä»¶åˆ†å‘ç»“æŸ // è‹¥åœ¨onTouchï¼ˆï¼‰è¿”å›žfalseï¼Œå°±ä¼šä½¿å¾—ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶ä¸å…¨éƒ¨æˆç«‹ï¼Œä»Žè€Œä½¿å¾—View.dispatchTouchEventï¼ˆï¼‰ä¸­è·³å‡ºIfï¼Œæ‰§è¡ŒonTouchEvent(event) æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ï¼šonTouchEvent(event)çš„æºç åˆ†æž è¯¦æƒ…è¯·çœ‹æ³¨é‡Š Android 5.0åŽ View.onTouchEvent()æºç å‘ç”Ÿäº†å˜åŒ–ï¼ˆæ›´åŠ å¤æ‚ï¼‰ï¼Œä½†åŽŸç†ç›¸åŒï¼› æœ¬æ–‡ä¸ºäº†è®©è¯»è€…æ›´å¥½ç†è§£ï¼Œæ‰€ä»¥é‡‡ç”¨Android 5.0å‰çš„ç‰ˆæœ¬ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192/** * æºç åˆ†æžï¼šView.onTouchEventï¼ˆï¼‰ */ public boolean onTouchEvent(MotionEvent event) &#123; final int viewFlags = mViewFlags; if ((viewFlags &amp; ENABLED_MASK) == DISABLED) &#123; return (((viewFlags &amp; CLICKABLE) == CLICKABLE || (viewFlags &amp; LONG_CLICKABLE) == LONG_CLICKABLE)); &#125; if (mTouchDelegate != null) &#123; if (mTouchDelegate.onTouchEvent(event)) &#123; return true; &#125; &#125; // è‹¥è¯¥æŽ§ä»¶å¯ç‚¹å‡»ï¼Œåˆ™è¿›å…¥switchåˆ¤æ–­ä¸­ if (((viewFlags &amp; CLICKABLE) == CLICKABLE || (viewFlags &amp; LONG_CLICKABLE) == LONG_CLICKABLE)) &#123; switch (event.getAction()) &#123; // a. è‹¥å½“å‰çš„äº‹ä»¶ = æŠ¬èµ·Viewï¼ˆä¸»è¦åˆ†æžï¼‰ case MotionEvent.ACTION_UP: boolean prepressed = (mPrivateFlags &amp; PREPRESSED) != 0; ...// ç»è¿‡ç§ç§åˆ¤æ–­ï¼Œæ­¤å¤„çœç•¥ // æ‰§è¡ŒperformClick() -&gt;&gt;åˆ†æž1 performClick(); break; // b. è‹¥å½“å‰çš„äº‹ä»¶ = æŒ‰ä¸‹View case MotionEvent.ACTION_DOWN: if (mPendingCheckForTap == null) &#123; mPendingCheckForTap = new CheckForTap(); &#125; mPrivateFlags |= PREPRESSED; mHasPerformedLongPress = false; postDelayed(mPendingCheckForTap, ViewConfiguration.getTapTimeout()); break; // c. è‹¥å½“å‰çš„äº‹ä»¶ = ç»“æŸäº‹ä»¶ï¼ˆéžäººä¸ºåŽŸå› ï¼‰ case MotionEvent.ACTION_CANCEL: mPrivateFlags &amp;= ~PRESSED; refreshDrawableState(); removeTapCallback(); break; // d. è‹¥å½“å‰çš„äº‹ä»¶ = æ»‘åŠ¨View case MotionEvent.ACTION_MOVE: final int x = (int) event.getX(); final int y = (int) event.getY(); int slop = mTouchSlop; if ((x &lt; 0 - slop) || (x &gt;= getWidth() + slop) || (y &lt; 0 - slop) || (y &gt;= getHeight() + slop)) &#123; // Outside button removeTapCallback(); if ((mPrivateFlags &amp; PRESSED) != 0) &#123; // Remove any future long press/tap checks removeLongPressCallback(); // Need to switch from pressed to not pressed mPrivateFlags &amp;= ~PRESSED; refreshDrawableState(); &#125; &#125; break; &#125; // è‹¥è¯¥æŽ§ä»¶å¯ç‚¹å‡»ï¼Œå°±ä¸€å®šè¿”å›žtrue return true; &#125; // è‹¥è¯¥æŽ§ä»¶ä¸å¯ç‚¹å‡»ï¼Œå°±ä¸€å®šè¿”å›žfalse return false; &#125;/** * åˆ†æž1ï¼šperformClickï¼ˆï¼‰ */ public boolean performClick() &#123; if (mOnClickListener != null) &#123; playSoundEffect(SoundEffectConstants.CLICK); mOnClickListener.onClick(this); return true; // åªè¦æˆ‘ä»¬é€šè¿‡setOnClickListenerï¼ˆï¼‰ä¸ºæŽ§ä»¶Viewæ³¨å†Œ1ä¸ªç‚¹å‡»äº‹ä»¶ // é‚£ä¹ˆå°±ä¼šç»™mOnClickListenerå˜é‡èµ‹å€¼ï¼ˆå³ä¸ä¸ºç©ºï¼‰ // åˆ™ä¼šå¾€ä¸‹å›žè°ƒonClickï¼ˆï¼‰ &amp; performClickï¼ˆï¼‰è¿”å›žtrue &#125; return false; &#125; 2.3.2 æ€»ç»“ æ¯å½“æŽ§ä»¶è¢«ç‚¹å‡»æ—¶ï¼š æ³¨ï¼šonTouchï¼ˆï¼‰çš„æ‰§è¡Œ å…ˆäºŽ onClickï¼ˆï¼‰ æ ¸å¿ƒæ–¹æ³•æ€»ç»“ 2.3.3 Demoè®²è§£ä¸‹é¢æˆ‘å°†ç”¨DemoéªŒè¯ä¸Šè¿°çš„ç»“è®º 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * ç»“è®ºéªŒè¯1ï¼šåœ¨å›žè°ƒonTouch()é‡Œè¿”å›žfalse */ // 1. é€šè¿‡OnTouchListener()å¤å†™onTouch()ï¼Œä»Žè€Œæ‰‹åŠ¨è®¾ç½®è¿”å›žfalse button.setOnTouchListener(new View.OnTouchListener() &#123; @Override public boolean onTouch(View v, MotionEvent event) &#123; System.out.println("æ‰§è¡Œäº†onTouch(), åŠ¨ä½œæ˜¯:" + event.getAction()); return false; &#125; &#125;); // 2. é€šè¿‡ OnClickListenerï¼ˆï¼‰ä¸ºæŽ§ä»¶è®¾ç½®ç‚¹å‡»äº‹ä»¶ï¼Œä¸ºmOnClickListenerå˜é‡èµ‹å€¼ï¼ˆå³ä¸ä¸ºç©ºï¼‰ï¼Œä»Žè€Œå¾€ä¸‹å›žè°ƒonClickï¼ˆï¼‰ button.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; System.out.println("æ‰§è¡Œäº†onClick()"); &#125; &#125;);/** * ç»“è®ºéªŒè¯2ï¼šåœ¨å›žè°ƒonTouch()é‡Œè¿”å›žtrue */ // 1. é€šè¿‡OnTouchListener()å¤å†™onTouch()ï¼Œä»Žè€Œæ‰‹åŠ¨è®¾ç½®è¿”å›žtrue button.setOnTouchListener(new View.OnTouchListener() &#123; @Override public boolean onTouch(View v, MotionEvent event) &#123; System.out.println("æ‰§è¡Œäº†onTouch(), åŠ¨ä½œæ˜¯:" + event.getAction()); return true; &#125; &#125;); // 2. é€šè¿‡ OnClickListenerï¼ˆï¼‰ä¸ºæŽ§ä»¶è®¾ç½®ç‚¹å‡»äº‹ä»¶ï¼Œä¸ºmOnClickListenerå˜é‡èµ‹å€¼ï¼ˆå³ä¸ä¸ºç©ºï¼‰ // ä½†ç”±äºŽdispatchTouchEventï¼ˆï¼‰è¿”å›žtrueï¼Œå³äº‹ä»¶ä¸å†å‘ä¸‹ä¼ é€’ï¼Œæ•…ä¸è°ƒç”¨onClick()ï¼‰ button.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; System.out.println("æ‰§è¡Œäº†onClick()"); &#125; &#125;); æµ‹è¯•ç»“æžœ 2.4 æ€»ç»“ è‹¥æ‚¨å·²ç»çœ‹åˆ°æ­¤å¤„ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å·²ç»èƒ½éžå¸¸ç†Ÿæ‚‰æŽŒæ¡Androidçš„äº‹ä»¶åˆ†å‘æœºåˆ¶äº† å³ï¼šActivityã€ViewGroupã€View çš„äº‹ä»¶åˆ†å‘æœºåˆ¶ 3. å·¥ä½œæµç¨‹ æ€»ç»“ åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘å°†ç»“åˆæºç ï¼Œæ¢³ç†å‡º1ä¸ªäº‹ä»¶åˆ†å‘çš„å·¥ä½œæµç¨‹æ€»ç»“ï¼Œå…·ä½“å¦‚ä¸‹ï¼š å·¦ä¾§è™šçº¿ï¼šå…·å¤‡ç›¸å…³æ€§ &amp; é€å±‚è¿”å›ž ä»¥è§’è‰²ä¸ºæ ¸å¿ƒçš„å›¾è§£è¯´æ˜Ž ä»¥æ–¹æ³•ä¸ºæ ¸å¿ƒçš„å›¾è§£è¯´æ˜Ž 4. æ ¸å¿ƒæ–¹æ³•æ€»ç»“ å·²çŸ¥äº‹ä»¶åˆ†å‘è¿‡ç¨‹çš„æ ¸å¿ƒæ–¹æ³•ä¸ºï¼šdispatchTouchEvent()ã€onInterceptTouchEvent() å’Œ onTouchEvent() ä¸‹é¢ï¼Œæˆ‘å°†ç»“åˆæ€»ç»“çš„å·¥ä½œæµç¨‹ï¼Œå†æ¬¡è¯¦ç»†è®²è§£è¯¥3ä¸ªæ–¹æ³• 4.1 dispatchTouchEvent() ç®€ä»‹ è¿”å›žæƒ…å†µè¯´æ˜Ž æƒ…å†µ1ï¼šé»˜è®¤ æƒ…å†µ2ï¼šè¿”å›žtrue æƒ…å†µ3ï¼šè¿”å›žfalse 4.2 onInterceptTouchEvent() ç®€ä»‹ æ³¨ï¼šActivityã€Viewéƒ½æ— è¯¥æ–¹æ³• è¿”å›žæƒ…å†µè¯´æ˜Ž æƒ…å†µ1ï¼štrue æƒ…å†µ2ï¼šfalseï¼ˆé»˜è®¤ï¼‰ 4.3 onTouchEvent() ç®€ä»‹ è¿”å›žæƒ…å†µè¯´æ˜Ž æƒ…å†µ1ï¼šè¿”å›žtrue æƒ…å†µ2ï¼šè¿”å›žfalseï¼ˆdefaultï¼‰ 4.4 ä¸‰è€…å…³ç³»ä¸‹é¢ï¼Œæˆ‘ç”¨ä¸€æ®µä¼ªä»£ç æ¥é˜è¿°ä¸Šè¿°3ä¸ªæ–¹æ³•çš„å…³ç³» &amp; äº‹ä»¶ä¼ é€’è§„åˆ™ 1234567891011121314151617181920212223242526/** * ç‚¹å‡»äº‹ä»¶äº§ç”ŸåŽ */ // æ­¥éª¤1ï¼šè°ƒç”¨dispatchTouchEventï¼ˆï¼‰ public boolean dispatchTouchEvent(MotionEvent ev) &#123; boolean consume = false; //ä»£è¡¨ æ˜¯å¦ä¼šæ¶ˆè´¹äº‹ä»¶ // æ­¥éª¤2ï¼šåˆ¤æ–­æ˜¯å¦æ‹¦æˆªäº‹ä»¶ if (onInterceptTouchEvent(ev)) &#123; // a. è‹¥æ‹¦æˆªï¼Œåˆ™å°†è¯¥äº‹ä»¶äº¤ç»™å½“å‰Viewè¿›è¡Œå¤„ç† // å³è°ƒç”¨onTouchEvent (ï¼‰æ–¹æ³•åŽ»å¤„ç†ç‚¹å‡»äº‹ä»¶ consume = onTouchEvent (ev) ; &#125; else &#123; // b. è‹¥ä¸æ‹¦æˆªï¼Œåˆ™å°†è¯¥äº‹ä»¶ä¼ é€’åˆ°ä¸‹å±‚ // å³ ä¸‹å±‚å…ƒç´ çš„dispatchTouchEventï¼ˆï¼‰å°±ä¼šè¢«è°ƒç”¨ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ // ç›´åˆ°ç‚¹å‡»äº‹ä»¶è¢«æœ€ç»ˆå¤„ç†ä¸ºæ­¢ consume = child.dispatchTouchEvent (ev) ; &#125; // æ­¥éª¤3ï¼šæœ€ç»ˆè¿”å›žé€šçŸ¥ è¯¥äº‹ä»¶æ˜¯å¦è¢«æ¶ˆè´¹ï¼ˆæŽ¥æ”¶ &amp; å¤„ç†ï¼‰ return consume; &#125; 5. å¸¸è§çš„äº‹ä»¶åˆ†å‘åœºæ™¯ä¸‹é¢ï¼Œæˆ‘å°†é€šè¿‡å®žä¾‹è¯´æ˜Žå¸¸è§çš„äº‹ä»¶ä¼ é€’æƒ…å†µ &amp; æµç¨‹ 5.1 èƒŒæ™¯æè¿° è®¨è®ºçš„å¸ƒå±€å¦‚ä¸‹ï¼š æƒ…æ™¯ ç”¨æˆ·å…ˆè§¦æ‘¸åˆ°å±å¹•ä¸ŠView Cä¸Šçš„æŸä¸ªç‚¹ï¼ˆå›¾ä¸­é»„åŒºï¼‰ Action_DOWNäº‹ä»¶åœ¨æ­¤å¤„äº§ç”Ÿ ç”¨æˆ·ç§»åŠ¨æ‰‹æŒ‡ æœ€åŽç¦»å¼€å±å¹• 5.2 ä¸€èˆ¬çš„äº‹ä»¶ä¼ é€’æƒ…å†µä¸€èˆ¬çš„äº‹ä»¶ä¼ é€’åœºæ™¯æœ‰ï¼š é»˜è®¤æƒ…å†µ å¤„ç†äº‹ä»¶ æ‹¦æˆªDOWNäº‹ä»¶ æ‹¦æˆªåŽç»­äº‹ä»¶ï¼ˆMOVEã€UPï¼‰ åœºæ™¯1ï¼šé»˜è®¤ å³ä¸å¯¹æŽ§ä»¶é‡Œçš„æ–¹æ³•ï¼ˆdispatchTouchEvent()ã€onTouchEvent()ã€onInterceptTouchEvent()ï¼‰è¿›è¡Œé‡å†™ æˆ– æ›´æ”¹è¿”å›žå€¼ é‚£ä¹ˆè°ƒç”¨çš„æ˜¯è¿™3ä¸ªæ–¹æ³•çš„é»˜è®¤å®žçŽ°ï¼šè°ƒç”¨ä¸‹å±‚çš„æ–¹æ³• &amp; é€å±‚è¿”å›ž äº‹ä»¶ä¼ é€’æƒ…å†µï¼šï¼ˆå‘ˆUåž‹ï¼‰ 1.ä»Žä¸Šå¾€ä¸‹è°ƒç”¨dispatchTouchEvent() Activity A -&gt;&gt; ViewGroup B -&gt;&gt; View C2.ä»Žä¸‹å¾€ä¸Šè°ƒç”¨onTouchEvent() View C -&gt;&gt; ViewGroup B -&gt;&gt; Activity A æ³¨ï¼šè™½ç„¶ViewGroup Bçš„onInterceptTouchEventï¼ˆï¼‰å¯¹DOWNäº‹ä»¶è¿”å›žäº†falseï¼Œä½†åŽç»­çš„äº‹ä»¶ï¼ˆMOVEã€UPï¼‰ä¾ç„¶ä¼šä¼ é€’ç»™å®ƒçš„onInterceptTouchEvent() è¿™ä¸€ç‚¹ä¸ŽonTouchEventï¼ˆï¼‰çš„è¡Œä¸ºæ˜¯ä¸ä¸€æ ·çš„ï¼šä¸å†ä¼ é€’ &amp; æŽ¥æ”¶è¯¥äº‹ä»¶åˆ—çš„å…¶ä»–äº‹ä»¶ åœºæ™¯2ï¼šå¤„ç†äº‹ä»¶è®¾View Cå¸Œæœ›å¤„ç†è¯¥ç‚¹å‡»äº‹ä»¶ï¼Œå³ï¼šè®¾ç½®View Cä¸ºå¯ç‚¹å‡»çš„ï¼ˆClickableï¼‰ æˆ– å¤å†™å…¶onTouchEventï¼ˆï¼‰è¿”å›žtrue æœ€å¸¸è§çš„ï¼šè®¾ç½®ButtonæŒ‰é’®æ¥å“åº”ç‚¹å‡»äº‹ä»¶ äº‹ä»¶ä¼ é€’æƒ…å†µï¼šï¼ˆå¦‚ä¸‹å›¾ï¼‰ DOWNäº‹ä»¶è¢«ä¼ é€’ç»™Cçš„onTouchEventæ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›žtrueï¼Œè¡¨ç¤ºå¤„ç†è¯¥äº‹ä»¶ å› ä¸ºView Cæ­£åœ¨å¤„ç†è¯¥äº‹ä»¶ï¼Œé‚£ä¹ˆDOWNäº‹ä»¶å°†ä¸å†å¾€ä¸Šä¼ é€’ç»™ViewGroup B å’Œ Activity Açš„onTouchEvent()ï¼› è¯¥äº‹ä»¶åˆ—çš„å…¶ä»–äº‹ä»¶ï¼ˆMoveã€Upï¼‰ä¹Ÿå°†ä¼ é€’ç»™View Cçš„onTouchEvent() ä¼šé€å±‚å¾€dispatchTouchEvent() è¿”å›žï¼Œæœ€ç»ˆäº‹ä»¶åˆ†å‘ç»“æŸ åœºæ™¯3ï¼šæ‹¦æˆªDOWNäº‹ä»¶å‡è®¾ViewGroup Bå¸Œæœ›å¤„ç†è¯¥ç‚¹å‡»äº‹ä»¶ï¼Œå³ViewGroup Bå¤å†™äº†onInterceptTouchEvent()è¿”å›žtrueã€onTouchEvent()è¿”å›žtrueäº‹ä»¶ä¼ é€’æƒ…å†µï¼šï¼ˆå¦‚ä¸‹å›¾ï¼‰ DOWNäº‹ä»¶è¢«ä¼ é€’ç»™ViewGroup Bçš„onInterceptTouchEvent()ï¼Œè¯¥æ–¹æ³•è¿”å›žtrueï¼Œè¡¨ç¤ºæ‹¦æˆªè¯¥äº‹ä»¶ï¼Œå³è‡ªå·±å¤„ç†è¯¥äº‹ä»¶ï¼ˆäº‹ä»¶ä¸å†å¾€ä¸‹ä¼ é€’ï¼‰ è°ƒç”¨è‡ªèº«çš„onTouchEvent()å¤„ç†äº‹ä»¶ï¼ˆDOWNäº‹ä»¶å°†ä¸å†å¾€ä¸Šä¼ é€’ç»™Activity Açš„onTouchEvent()ï¼‰ è¯¥äº‹ä»¶åˆ—çš„å…¶ä»–äº‹ä»¶ï¼ˆMoveã€Upï¼‰å°†ç›´æŽ¥ä¼ é€’ç»™ViewGroup Bçš„onTouchEvent() æ³¨ï¼š è¯¥äº‹ä»¶åˆ—çš„å…¶ä»–äº‹ä»¶ï¼ˆMoveã€Upï¼‰å°†ä¸ä¼šå†ä¼ é€’ç»™ViewGroup Bçš„onInterceptTouchEventï¼ˆï¼‰ï¼›å› ï¼šè¯¥æ–¹æ³•ä¸€æ—¦è¿”å›žä¸€æ¬¡trueï¼Œå°±å†ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ é€å±‚å¾€dispatchTouchEvent() è¿”å›žï¼Œæœ€ç»ˆäº‹ä»¶åˆ†å‘ç»“æŸ åœºæ™¯4ï¼šæ‹¦æˆªDOWNçš„åŽç»­äº‹ä»¶ç»“è®º è‹¥ ViewGroup æ‹¦æˆªäº†ä¸€ä¸ªåŠè·¯çš„äº‹ä»¶ï¼ˆå¦‚MOVEï¼‰ï¼Œè¯¥äº‹ä»¶å°†ä¼šè¢«ç³»ç»Ÿå˜æˆä¸€ä¸ªCANCELäº‹ä»¶ &amp; ä¼ é€’ç»™ä¹‹å‰å¤„ç†è¯¥äº‹ä»¶çš„å­Viewï¼› è¯¥äº‹ä»¶ä¸ä¼šå†ä¼ é€’ç»™ViewGroup çš„onTouchEvent() åªæœ‰å†åˆ°æ¥çš„äº‹ä»¶æ‰ä¼šä¼ é€’åˆ°ViewGroupçš„onTouchEvent() åœºæ™¯æè¿°ViewGroup B æ— æ‹¦æˆªDOWNäº‹ä»¶ï¼ˆè¿˜æ˜¯View Cæ¥å¤„ç†DOWNäº‹ä»¶ï¼‰ï¼Œä½†å®ƒæ‹¦æˆªäº†æŽ¥ä¸‹æ¥çš„MOVEäº‹ä»¶ å³ DOWNäº‹ä»¶ä¼ é€’åˆ°View Cçš„onTouchEventï¼ˆï¼‰ï¼Œè¿”å›žäº†true å®žä¾‹è®²è§£ åœ¨åŽç»­åˆ°æ¥çš„MOVEäº‹ä»¶ï¼ŒViewGroup B çš„onInterceptTouchEventï¼ˆï¼‰è¿”å›žtrueæ‹¦æˆªè¯¥MOVEäº‹ä»¶ï¼Œä½†è¯¥äº‹ä»¶å¹¶æ²¡æœ‰ä¼ é€’ç»™ViewGroup B ï¼›è¿™ä¸ªMOVEäº‹ä»¶å°†ä¼šè¢«ç³»ç»Ÿå˜æˆä¸€ä¸ªCANCELäº‹ä»¶ä¼ é€’ç»™View Cçš„onTouchEventï¼ˆï¼‰ åŽç»­åˆæ¥äº†ä¸€ä¸ªMOVEäº‹ä»¶ï¼Œè¯¥MOVEäº‹ä»¶æ‰ä¼šç›´æŽ¥ä¼ é€’ç»™ViewGroup B çš„onTouchEvent() åŽç»­äº‹ä»¶å°†ç›´æŽ¥ä¼ é€’ç»™ViewGroup B çš„onTouchEvent()å¤„ç†ï¼Œè€Œä¸ä¼šå†ä¼ é€’ç»™ViewGroup B çš„onInterceptTouchEventï¼ˆï¼‰ï¼Œå› è¯¥æ–¹æ³•ä¸€æ—¦è¿”å›žä¸€æ¬¡trueï¼Œå°±å†ä¹Ÿä¸ä¼šè¢«è°ƒç”¨äº†ã€‚ View Cå†ä¹Ÿä¸ä¼šæ”¶åˆ°è¯¥äº‹ä»¶åˆ—äº§ç”Ÿçš„åŽç»­äº‹ä»¶ è‡³æ­¤ï¼Œå…³äºŽAndroidå¸¸è§çš„äº‹ä»¶ä¼ é€’æƒ…å†µ &amp; æµç¨‹å·²ç»è®²è§£å®Œæ¯•ã€‚ 6. é¢å¤–çŸ¥è¯†6.1 Touchäº‹ä»¶çš„åŽç»­äº‹ä»¶ï¼ˆMOVEã€UPï¼‰å±‚çº§ä¼ é€’ 6.1 Touchäº‹ä»¶çš„åŽç»­äº‹ä»¶ï¼ˆMOVEã€UPï¼‰å±‚çº§ä¼ é€’ è‹¥ç»™æŽ§ä»¶æ³¨å†Œäº†Touchäº‹ä»¶ï¼Œæ¯æ¬¡ç‚¹å‡»éƒ½ä¼šè§¦å‘ä¸€ç³»åˆ—actionäº‹ä»¶ï¼ˆACTION_DOWNï¼ŒACTION_MOVEï¼ŒACTION_UPç­‰ï¼‰ å½“dispatchTouchEventï¼ˆï¼‰äº‹ä»¶åˆ†å‘æ—¶ï¼Œåªæœ‰å‰ä¸€ä¸ªäº‹ä»¶ï¼ˆå¦‚ACTION_DOWNï¼‰è¿”å›žtrueï¼Œæ‰ä¼šæ”¶åˆ°åŽä¸€ä¸ªäº‹ä»¶ï¼ˆACTION_MOVEå’ŒACTION_UPï¼‰ å³å¦‚æžœåœ¨æ‰§è¡ŒACTION_DOWNæ—¶è¿”å›žfalseï¼ŒåŽé¢ä¸€ç³»åˆ—çš„ACTION_MOVEã€ACTION_UPäº‹ä»¶éƒ½ä¸ä¼šæ‰§è¡Œä»Žä¸Šé¢å¯¹äº‹ä»¶åˆ†å‘æœºåˆ¶åˆ†æžçŸ¥ï¼š dispatchTouchEvent()ã€ onTouchEvent() æ¶ˆè´¹äº‹ä»¶ã€ç»ˆç»“äº‹ä»¶ä¼ é€’ï¼ˆè¿”å›žtrueï¼‰ è€ŒonInterceptTouchEvent å¹¶ä¸èƒ½æ¶ˆè´¹äº‹ä»¶ï¼Œå®ƒç›¸å½“äºŽæ˜¯ä¸€ä¸ªåˆ†å‰å£èµ·åˆ°åˆ†æµå¯¼æµçš„ä½œç”¨ï¼Œå¯¹åŽç»­çš„ACTION_MOVEå’ŒACTION_UPäº‹ä»¶æŽ¥æ”¶èµ·åˆ°éžå¸¸å¤§çš„ä½œç”¨ è¯·è®°ä½ï¼šæŽ¥æ”¶äº†ACTION_DOWNäº‹ä»¶çš„å‡½æ•°ä¸ä¸€å®šèƒ½æ”¶åˆ°åŽç»­äº‹ä»¶ï¼ˆACTION_MOVEã€ACTION_UPï¼‰è¿™é‡Œç»™å‡ºACTION_MOVEå’ŒACTION_UPäº‹ä»¶çš„ä¼ é€’ç»“è®ºï¼š ç»“è®º1è‹¥å¯¹è±¡ï¼ˆActivityã€ViewGroupã€Viewï¼‰çš„dispatchTouchEvent()åˆ†å‘äº‹ä»¶åŽæ¶ˆè´¹äº†äº‹ä»¶ï¼ˆè¿”å›žtrueï¼‰ï¼Œé‚£ä¹ˆæ”¶åˆ°ACTION_DOWNçš„å‡½æ•°ä¹Ÿèƒ½æ”¶åˆ°ACTION_MOVEå’ŒACTION_UP é»‘çº¿ï¼šACTION_DOWNäº‹ä»¶ä¼ é€’æ–¹å‘çº¢çº¿ï¼šACTION_MOVE ã€ ACTION_UPäº‹ä»¶ä¼ é€’æ–¹å‘ ç»“è®º2è‹¥å¯¹è±¡ï¼ˆActivityã€ViewGroupã€Viewï¼‰çš„onTouchEvent()å¤„ç†äº†äº‹ä»¶ï¼ˆè¿”å›žtrueï¼‰ï¼Œé‚£ä¹ˆACTION_MOVEã€ACTION_UPçš„äº‹ä»¶ä»Žä¸Šå¾€ä¸‹ä¼ åˆ°è¯¥ViewåŽå°±ä¸å†å¾€ä¸‹ä¼ é€’ï¼Œè€Œæ˜¯ç›´æŽ¥ä¼ ç»™è‡ªå·±çš„onTouchEvent()&amp; ç»“æŸæœ¬æ¬¡äº‹ä»¶ä¼ é€’è¿‡ç¨‹ã€‚ é»‘çº¿ï¼šACTION_DOWNäº‹ä»¶ä¼ é€’æ–¹å‘çº¢çº¿ï¼šACTION_MOVEã€ACTION_UPäº‹ä»¶ä¼ é€’æ–¹å‘ 6.2 onTouch()å’ŒonTouchEvent()çš„åŒºåˆ« è¯¥2ä¸ªæ–¹æ³•éƒ½æ˜¯åœ¨View.dispatchTouchEventï¼ˆï¼‰ä¸­è°ƒç”¨ ä½†onTouchï¼ˆï¼‰ä¼˜å…ˆäºŽonTouchEventæ‰§è¡Œï¼›è‹¥æ‰‹åŠ¨å¤å†™åœ¨onTouchï¼ˆï¼‰ä¸­è¿”å›žtrueï¼ˆå³ å°†äº‹ä»¶æ¶ˆè´¹æŽ‰ï¼‰ï¼Œå°†ä¸ä¼šå†æ‰§è¡ŒonTouchEventï¼ˆï¼‰ æ³¨ï¼šè‹¥1ä¸ªæŽ§ä»¶ä¸å¯ç‚¹å‡»ï¼ˆå³éženableï¼‰ï¼Œé‚£ä¹ˆç»™å®ƒæ³¨å†ŒonTouchäº‹ä»¶å°†æ°¸è¿œå¾—ä¸åˆ°æ‰§è¡Œï¼Œå…·ä½“åŽŸå› çœ‹å¦‚ä¸‹ä»£ç  12345678// &amp;&amp;ä¸ºçŸ­è·¯ä¸Žï¼Œå³å¦‚æžœå‰é¢æ¡ä»¶ä¸ºfalseï¼Œå°†ä¸å†å¾€ä¸‹æ‰§è¡Œ// æ•…ï¼šonTouchï¼ˆï¼‰èƒ½å¤Ÿå¾—åˆ°æ‰§è¡Œéœ€2ä¸ªå‰ææ¡ä»¶ï¼š // 1. mOnTouchListenerçš„å€¼ä¸èƒ½ä¸ºç©º // 2. å½“å‰ç‚¹å‡»çš„æŽ§ä»¶å¿…é¡»æ˜¯enableçš„mOnTouchListener != null &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; mOnTouchListener.onTouch(this, event)// å¯¹äºŽè¯¥ç±»æŽ§ä»¶ï¼Œè‹¥éœ€ç›‘å¬å®ƒçš„touchäº‹ä»¶ï¼Œå°±å¿…é¡»é€šè¿‡åœ¨è¯¥æŽ§ä»¶ä¸­é‡å†™onTouchEventï¼ˆï¼‰æ¥å®žçŽ°12345678 7. æ€»ç»“ é€šè¿‡é˜…è¯»æœ¬æ–‡ï¼Œç›¸ä¿¡æ‚¨å·²ç»å¯ä»¥å…¨é¢äº†è§£Androidäº‹ä»¶åˆ†å‘æœºåˆ¶ ä¸ŽAndroidäº‹ä»¶åˆ†å‘æœ€ç›¸å…³çš„çŸ¥è¯†ï¼šè‡ªå®šä¹‰Viewç³»åˆ—æ–‡ç« è‡ªå®šä¹‰ViewåŸºç¡€ - æœ€æ˜“æ‡‚çš„è‡ªå®šä¹‰ViewåŽŸç†ç³»åˆ—ï¼ˆ1ï¼‰è‡ªå®šä¹‰View Measureè¿‡ç¨‹ - æœ€æ˜“æ‡‚çš„è‡ªå®šä¹‰ViewåŽŸç†ç³»åˆ—ï¼ˆ2ï¼‰è‡ªå®šä¹‰View Layoutè¿‡ç¨‹ - æœ€æ˜“æ‡‚çš„è‡ªå®šä¹‰ViewåŽŸç†ç³»åˆ—ï¼ˆ3ï¼‰è‡ªå®šä¹‰View Drawè¿‡ç¨‹- æœ€æ˜“æ‡‚çš„è‡ªå®šä¹‰ViewåŽŸç†ç³»åˆ—ï¼ˆ4ï¼‰ æŽ¥ä¸‹æ¥æˆ‘å°†ç»§ç»­ä»‹ç»ä¸ŽAndroidäº‹ä»¶åˆ†å‘æœ€ç›¸å…³çš„çŸ¥è¯†ï¼šè‡ªå®šä¹‰Viewï¼Œæœ‰å…´è¶£å¯ä»¥ç»§ç»­å…³æ³¨Carson_Hoçš„å®‰å“å¼€å‘ç¬”è®°]]></content>
      <categories>
        <category>Android</category>
        <category>æºç è§£æž</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SwitchHosts!]]></title>
    <url>%2Fposts%2F1bc98c52.html</url>
    <content type="text"><![CDATA[SwitchHosts! è‹±æ–‡ ä¸»é¡µï¼šhttps://oldj.github.io/SwitchHosts/ è¿™æ˜¯ä¸€ä¸ªç”¨äºŽå¿«é€Ÿåˆ‡æ¢ hosts æ–‡ä»¶çš„å°ç¨‹åºï¼ŒåŸºäºŽ Electron å¼€å‘ï¼ŒåŒæ—¶ä½¿ç”¨äº† Reactã€Ant Design ä»¥åŠ CodeMirror ç­‰æ¡†æž¶/åº“ã€‚ æˆªå›¾ åŠŸèƒ½ç‰¹æ€§ å¿«é€Ÿåˆ‡æ¢ hosts hosts æ–‡ä»¶è¯­æ³•é«˜äº® åœ¨çº¿ hosts æ–¹æ¡ˆ ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡å¿«é€Ÿåˆ‡æ¢ macOS: æ”¯æŒ Alfred workflow å¿«é€Ÿåˆ‡æ¢ å®‰è£…ä¸‹è½½å®‰è£…ä½ å¯ä»¥ç›´æŽ¥ä¸‹è½½æºç åˆ°æœ¬åœ°è¿è¡Œæˆ–ç¼–è¾‘ï¼Œæˆ–è€…åœ¨ä¸‹é¢ä¸‹è½½å¯æ‰§è¡Œç‰ˆæœ¬ï¼š SwitchHosts! ä¸‹è½½åœ°å€1ï¼ˆGitHub releaseï¼‰ SwitchHosts! ä¸‹è½½åœ°å€2ï¼ˆç™¾åº¦ç½‘ç›˜ï¼‰ brewåœ¨ macOS ä¸Šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ brew cast å®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1brew cask install switchhosts æ„Ÿè°¢ @gobinathmã€@iamybj æ›´æ–° brew cask ç‰ˆæœ¬ã€‚ æ–‡ä»¶å¤‡ä»½SwitchHosts! çš„æ•°æ®æ–‡ä»¶åœ¨ ~/.SwitchHosts ç›®å½•ä¸‹ï¼ˆWindows ç”¨æˆ·ä¸ºä¸ªäººä¸»ç›®å½•ä¸‹çš„ .SwitchHosts ç›®å½•ä¸‹ï¼‰ï¼Œå…¶ä¸­ ~/.SwitchHosts/data.json æ˜¯ hosts æ•°æ®æ–‡ä»¶ï¼Œ~/.SwitchHosts/prefereces.json æ˜¯é…ç½®ä¿¡æ¯ã€‚ è¿è¡Œ/æ‰“åŒ…æ–¹æ³•çŽ¯å¢ƒé…ç½® å®‰è£… Node.js çŽ¯å¢ƒï¼› åœ¨æ ¹ç›®å½• ./ ä¸‹ï¼Œè¿è¡Œ npm install å‘½ä»¤ï¼Œå®‰è£…å¼€å‘ä¾èµ–åº“ï¼› åœ¨ ./app ç›®å½•ä¸‹ï¼Œè¿è¡Œ npm install å‘½ä»¤ï¼Œå®‰è£… App è¿è¡Œä¾èµ–åº“ï¼› 12npm installcd app &amp;&amp; npm install &amp;&amp; cd .. æž„å»ºåŠè¿è¡Œ åœ¨ ./ ç›®å½•ä¸‹ï¼Œè¿è¡Œ npm run dll å‘½ä»¤ï¼Œæž„å»ºå…¬å…±æ–‡ä»¶ï¼ˆä»…éœ€åœ¨ç¬¬ä¸€æ¬¡æž„å»ºæˆ–å…¬å…±åº“å‘ç”Ÿæ”¹å˜æ—¶æ‰§è¡Œï¼‰ï¼› åœ¨ ./ ç›®å½•ä¸‹ï¼Œè¿è¡Œ npm run build å‘½ä»¤ï¼Œæž„å»ºæ‰€éœ€æ–‡ä»¶ï¼› åœ¨ ./ ç›®å½•ä¸‹ï¼Œè¿è¡Œ npm start å‘½ä»¤ï¼Œå³å¯è¿è¡Œç¨‹åºã€‚ 1234567891011# create dll filenpm run dll# buildnpm run build# startnpm start# or start in developer modenpm run dev æ‰“åŒ…å‘å¸ƒ å»ºè®®ä½¿ç”¨ electron-packager è¿›è¡Œæ‰“åŒ… 12# install electron-packager for use from clinpm install electron-packager -g åœ¨ ./ ç›®å½•ä¸‹ï¼Œè¿è¡Œ npm run pack å‘½ä»¤ï¼Œæ‰“åŒ…åŽçš„æ–‡ä»¶ä½äºŽ ./dist ç›®å½•ï¼› é¦–æ¬¡æ‰§è¡Œæ­¤å‘½ä»¤å¯èƒ½éœ€è¦èŠ±è´¹è¾ƒå¤šæ—¶é—´ï¼ˆéœ€è¦ä¸‹è½½å¯¹åº”çš„æž„å»ºæ–‡ä»¶ï¼‰ï¼Œä¹Ÿå¯å…ˆæ‰‹åŠ¨ä¸‹è½½å¯¹åº”çš„å‘å¸ƒç‰ˆæœ¬ï¼ˆæ·˜å®é•œåƒï¼‰ï¼Œæ‰‹åŠ¨ä¿å­˜åˆ° ~/.electron ç›®å½•ä¸‹ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ Electron æ–‡æ¡£ã€‚ 123456# packnpm run pack # the packed files will be in ./dist# ä¹Ÿå¯ä»¥åªæ‰“åŒ…ç‰¹å®šå¹³å°çš„ç‰ˆæœ¬ï¼Œå¦‚npm run pack-mac # pack for macOS, the packed files will be in ./distnpm run pack-win # pack for Windows, the packed files will be in ./dist æ‰“åŒ…å®ŒæˆåŽï¼Œå¯è¿è¡Œä»¥ä¸‹å‘½ä»¤å°†ç”Ÿæˆçš„ç¨‹åºåŽ‹ç¼©ä¸º zip æ–‡ä»¶ã€‚ 12# zipnpm run zip # the zipped files will be in ./dist æ›´æ–°åŽ†å²v3.3 2017-05-30 å¼•å…¥ Ant Design é‡å†™éƒ¨åˆ† UI ç»„ä»¶ 2017-04-03 æ”¯æŒé€šè¿‡ Alfred å¿«é€Ÿåˆ‡æ¢ï¼ˆä¸‹è½½ workflowï¼‰ 2017-04-01 ä»£ç é‡æž„ï¼Œå¢žåŠ ã€Œåˆ†ç»„ã€åŠŸèƒ½ v3.2 2016-09-06 ä½¿ç”¨ Electron æ‰“åŒ…ï¼Œå¢žåŠ  Windows ç‰ˆä¸‹è½½ã€‚ v3.1 2016-04-29 æ›´æ–°è‡ªåŠ¨æ¸…é™¤ DNS ç¼“å­˜åŠŸèƒ½ #90ã€‚ 2016-01-15 æœç´¢æ—¶å¢žåŠ æ¨¡ç³Šæœç´¢æ”¯æŒï¼ˆeg. go*le matches googleï¼‰åŠæ­£åˆ™æ”¯æŒï¼ˆeg. /go.*le matches googleï¼‰ã€‚ 2016-01-10 è¿œç¨‹æ–¹æ¡ˆå¯ä»¥è®¾ç½®è‡ªåŠ¨æ›´æ–°æ—¶é—´ã€‚ 2015-12-26 å®žçŽ° Tray èœå•åˆ‡æ¢ã€Dock å›¾æ ‡éšè—ã€æ–¹æ¡ˆå¯¼å…¥å¯¼å‡ºç­‰åŠŸèƒ½ã€‚ 2015-12-20 ä»Ž Electron åˆ‡æ¢è‡³ MacGap ã€‚ v3.0 2015-11-30 å®Œæˆ 3.0 ç‰ˆåŸºæœ¬åŠŸèƒ½ã€‚ v2.0 2013-02-06 è§£å†³ Linux/Mac ä¸‹æ²¡æœ‰ä¿®æ”¹ç³»ç»Ÿ hosts æ–‡ä»¶æƒé™çš„é—®é¢˜ã€‚ 2012-12-27 å¯åŠ¨æ—¶æ£€æŸ¥æ˜¯å¦ä¸ºå•ä¸€å®žä¾‹ï¼Œç¦æ­¢åŒæ—¶è¿è¡Œå¤šä¸ªå®žä¾‹ã€‚ 2012-11-16 æŽ¥å— @charlestang ç½‘å‹çš„ pull requestï¼ŒåŒæ—¶å‚è€ƒäº† @allenm çš„ä¿®æ”¹ï¼Œå®žçŽ°äº† Common Hosts åŠŸèƒ½ã€‚ 2012-11-09 ç®€å•ä¼˜åŒ–ï¼šCommon Hosts ä¸å…è®¸åˆ é™¤ï¼Œä¸å…è®¸â€œåˆ‡æ¢åˆ°â€ï¼Œå°†å³é”®èœå•ç›¸å…³æ¡ç›®ç¦ç”¨ï¼Œå…è®¸æ›´æ¢å›¾æ ‡é¢œè‰²ã€‚ä¿®å¤æ–°å¢žåœ¨çº¿æ–¹æ¡ˆæ—¶ï¼Œurl æ¡†é»˜è®¤ç¦ç”¨çš„å° bugã€‚ 2012-10-09 å¢žåŠ  hosts æ–¹æ¡ˆæ‹–æ‹½æŽ’åºåŠŸèƒ½ã€‚ 2012-10-05 ä¿®å¤åœ¨ä¸­æ–‡ç›®å½•ä¸‹ç¨‹åºæ— æ³•æ­£å¸¸å¯åŠ¨çš„é—®é¢˜ã€‚ 2012-09-30 åˆæ­¥å®Œæˆ 0.2.0 ç‰ˆã€‚ v1.0 2011-12-14 å…è®¸è¾“å…¥è¶…é•¿çš„ hosts æ–¹æ¡ˆã€‚ 2011-10-09 å‘å¸ƒ 0.1.6 ç‰ˆï¼Œä¿®å¤è‹¥å¹² bugï¼Œå¢žåŠ è‡ªåŠ¨æ£€æŸ¥æœ€æ–°ç‰ˆæœ¬çš„åŠŸèƒ½ã€‚ 2011-09-29 å‘å¸ƒ 0.1.5 ç‰ˆï¼Œæ–°å¢ž hosts å†…å®¹è¯­æ³•é«˜äº®ã€‚ 2011-09-28 å‘å¸ƒ 0.1.4 ç‰ˆï¼Œæ–°å¢žâ€œæ·»åŠ â€ã€â€œåˆ é™¤â€æŒ‰é’®ï¼›hosts å†…å®¹ä¿®æ”¹åŽè‡ªåŠ¨ä¿å­˜ï¼›ä¿®å¤è‹¥å¹² bugã€‚ 2011-09-19 å‘å¸ƒ 0.1.3 ç‰ˆï¼Œä¿®å¤è‹¥å¹² bugã€‚ 2011-09-15 å‘å¸ƒ 0.1.2 ç‰ˆï¼Œæ·»åŠ ä¸»é¢æ¿ï¼Œå¯ä»¥åœ¨ä¸»é¢æ¿ä¸Šå¯¹ hosts è¿›è¡Œå¢žåŠ ã€åˆ é™¤ã€ç¼–è¾‘ã€é‡å‘½åç­‰æ“ä½œã€‚ 2011-09-02 å‘å¸ƒ 0.1.0 ç‰ˆï¼Œå®ŒæˆåŸºæœ¬åŠŸèƒ½ã€‚ ç‰ˆæƒæœ¬ç¨‹åºå®Œå…¨å…è´¹ï¼Œå¹¶åŸºäºŽ MIT åè®®å¼€æºã€‚]]></content>
      <categories>
        <category>å·¥å…·</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ConstraintLayoutå®Œå…¨è§£æž,å¿«æ¥ä¼˜åŒ–ä½ çš„å¸ƒå±€å§]]></title>
    <url>%2Fposts%2Fa495ccb1.html</url>
    <content type="text"><![CDATA[Demoåœ°å€ï¼šConstraintLayout ä¸€ã€æ¦‚è¿°ConstraintLayoutå‡ºçŽ°æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä¸è¿‡ä¸€ç›´æ²¡æœ‰ç‰¹åˆ«åŽ»å…³æ³¨ï¼Œä¹Ÿå¤šå¤šå°‘å°‘çœ‹äº†ä¸€äº›æ–‡å­—ä»‹ç»ï¼Œå¤šæ•°éƒ½æ˜¯å¯¹ä½¿ç”¨å¯è§†åŒ–å¸ƒå±€æ‹–æ‹½ï¼Œä¸ªäººå¯¹æ‹–æ‹½ä¸€ç›´ä¸çœ‹å¥½ï¼Œç›´åˆ°å‰æ®µæ—¶é—´çœ‹åˆ°è¯¥æ–‡ï¼š è§£æžConstraintLayoutçš„æ€§èƒ½ä¼˜åŠ¿ éžå¸¸è¯¦å°½çš„ä»‹ç»äº†ConstraintLayoutçš„æ€§èƒ½ä¼˜åŠ¿ï¼ŒäºŽæ˜¯ä¹Žå¼€å§‹å­¦ä¹ äº†ä¸€ä¸‹ConstraintLayoutã€‚ æœ¬æ–‡çš„é‡ç‚¹ä¸åœ¨ä¸Žå¯è§†åŒ–ç•Œé¢çš„å­¦ä¹ ï¼Œè€Œåœ¨äºŽå¦‚ä½•æ‰‹å†™å„ç±»çº¦æŸå¸ƒå±€å±žæ€§ã€‚å¯¹äºŽå¯è§†åŒ–ç•Œé¢å­¦ä¹ æŽ¨èï¼š Androidæ–°ç‰¹æ€§ä»‹ç»ï¼ŒConstraintLayoutå®Œå…¨è§£æž ä¸‹é¢å¼€å§‹è¿›å…¥æ­£é¢˜ï¼Œå¤§å®¶éƒ½çŸ¥é“ï¼Œå½“å¸ƒå±€åµŒå¥—æ·±å…¥æ¯”è¾ƒæ·±çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šä¼´éšç€ä¸€äº›æ€§èƒ½é—®é¢˜ã€‚æ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å»ºè®®ä½¿ç”¨RelativeLayoutæˆ–è€…GridLayoutæ¥ç®€åŒ–æŽ‰å¸ƒå±€çš„æ·±åº¦ã€‚ è€Œå¯¹äºŽç®€åŒ–å¸ƒå±€æ·±åº¦ï¼ŒConstraintLayoutå‡ ä¹Žå¯ä»¥åšåˆ°æžè‡´ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡å®žä¾‹æ¥å°½å¯èƒ½å°†æ‰€æœ‰å¸¸è§çš„å±žæ€§ä¸€æ­¥æ­¥çš„ä»‹ç»æ¸…æ¥šã€‚ é¦–å…ˆéœ€è¦å¼•å…¥æˆ‘ä»¬çš„ConstraintLayoutï¼Œåœ¨build.gradleä¸­åŠ å…¥ï¼š 1compile 'com.android.support.constraint:constraint-layout:1.0.2' äºŒã€æ¥ç¼–å†™ä¸€ä¸ªFeed Itemæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªç®€å•çš„æ–°é—»åˆ—è¡¨ä¸­å¸¸è§çš„feed itemã€‚ çœ‹åˆ°è¿™æ ·çš„å¸ƒå±€ï¼Œå¤§å®¶æ¡ä»¶åå°„åº”è¯¥å°±æ˜¯ä½¿ç”¨RelativeLayoutæ¥åšï¼Œå½“ç„¶äº†ï¼Œæœ¬æ¡ˆä¾‹æˆ‘ä»¬ä½¿ç”¨ConstraintLayoutæ¥å†™ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" xmlns:tools="http://schemas.android.com/tools" android:id="@+id/activity_main" android:layout_width="match_parent" android:layout_height="match_parent" android:background="#11ff0000" tools:context="com.zhy.constrantlayout_learn.MainActivity"&gt; &lt;TextView android:id="@+id/tv1" android:layout_width="140dp" android:layout_height="86dp" android:layout_marginLeft="12dp" android:layout_marginTop="12dp" android:background="#fd3" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintTop_toTopOf="parent" /&gt; &lt;TextView android:id="@+id/tv2" android:layout_width="0dp" android:layout_height="wrap_content" android:layout_marginLeft="8dp" android:layout_marginRight="12dp" android:text="é©¬äº‘:ä¸€å¹´äº¤ç¨Ž170å¤šäº¿é©¬äº‘:ä¸€å¹´äº¤ç¨Ž170å¤šäº¿é©¬äº‘:ä¸€å¹´äº¤ç¨Ž170å¤šäº¿" android:textColor="#000000" android:textSize="16dp" app:layout_constraintLeft_toRightOf="@id/tv1" app:layout_constraintRight_toRightOf="parent" app:layout_constraintTop_toTopOf="@id/tv1" /&gt; &lt;TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginLeft="8dp" android:layout_marginTop="12dp" android:text="8åˆ†é’Ÿå‰" android:textColor="#333" android:textSize="12dp" app:layout_constraintLeft_toRightOf="@id/tv1" app:layout_constraintBottom_toBottomOf="@id/tv1" /&gt;&lt;/android.support.constraint.ConstraintLayout&gt; çœ‹ä¸Šé¢çš„å¸ƒå±€ï¼Œæˆ‘ä»¬å¥½åƒçœ‹åˆ°äº†å‡ ä¸ªæ¨¡å¼çš„å±žæ€§ï¼š é¦–å…ˆæ˜¯tv1ï¼Œæœ‰ä¸¤ä¸ªæ²¡è§è¿‡çš„å±žæ€§ï¼š app:layout_constraintLeft_toLeftOf=&quot;parent&quot; ä»Žå­—é¢ä¸Šçœ‹ï¼ŒæŒ‡çš„æ˜¯è®©è¯¥æŽ§ä»¶çš„å·¦ä¾§ä¸Žçˆ¶å¸ƒå±€å¯¹é½ï¼Œå½“æˆ‘ä»¬å¸Œæœ›æŽ§ä»¶Aä¸ŽæŽ§ä»¶Bå·¦ä¾§å¯¹é½æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥å±žæ€§ã€‚ 1app:layout_constraintLeft_toLeftOf="@id/viewB" ç±»ä¼¼çš„è¿˜æœ‰ä¸ªç›¸ä¼¼çš„å±žæ€§ä¸ºï¼š app:layout_constraintLeft_toRightOf å¾ˆå¥½ç†è§£ï¼Œå³å½“å‰å±žæ€§çš„å·¦ä¾§åœ¨è°çš„å³ä¾§ï¼Œå½“æˆ‘ä»¬å¸Œæœ›æŽ§ä»¶Aåœ¨æŽ§ä»¶Bçš„å³ä¾§æ—¶ï¼Œå¯ä»¥è®¾ç½®ï¼š 1app:layout_constraintLeft_toRightOf="@id/viewB" ä¸Žä¹‹ç±»ä¼¼çš„è¿˜æœ‰å‡ ä¸ªå±žæ€§ï¼š layout_constraintRight_toLeftOf layout_constraintRight_toRightOf layout_constraintTop_toTopOf layout_constraintTop_toBottomOf layout_constraintBottom_toTopOf layout_constraintBottom_toBottomOf layout_constraintBaseline_toBaselineOf ç±»æŽ¨å°±å¯ä»¥äº†ã€‚ çŽ°åœ¨åœ¨å¤´çœ‹åˆšæ‰çš„å¸ƒå±€ï¼š 123456789101112131415tv1è®¾ç½®äº†ï¼šapp:layout_constraintLeft_toLeftOf="parent"app:layout_constraintTop_toTopOf="parent"tv2è®¾ç½®äº†ï¼šapp:layout_constraintLeft_toRightOf="@id/tv1"app:layout_constraintRight_toRightOf="parent"app:layout_constraintTop_toTopOf="@id/tv1"tv3è®¾ç½®äº†ï¼šapp:layout_constraintLeft_toRightOf="@id/tv1"app:layout_constraintBottom_toBottomOf="@id/tv1" æŒ‰ç…§æˆ‘ä»¬åˆšæ‰çš„ç†è§£ï¼Œå†æ¬¡çš„è§£è¯»ä¸‹ï¼š tv1åº”è¯¥æ˜¯åœ¨çˆ¶å¸ƒå±€çš„å·¦ä¸Šè§’ï¼› tv2åœ¨tv1çš„å³ä¾§ï¼Œtv2çš„å³ä¾§å’Œçˆ¶å¸ƒå±€å¯¹å…¶ï¼Œtv2å’Œtv1é¡¶éƒ¨å¯¹é½ï¼› tv3åœ¨tv1çš„å³ä¾§ï¼Œtv3å’Œtv1åº•éƒ¨å¯¹å…¶ã€‚ åˆ°è¿™é‡Œï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œç›®å‰æˆ‘ä»¬å·²ç»å¯ä»¥æŽ§åˆ¶ä»»ä½•ä¸€ä¸ªæŽ§ä»¶ä¸Žå…¶ä»–æŽ§ä»¶é—´çš„ç›¸å¯¹ä½ç½®äº†ï¼Œä»¥åŠä¸Žparenté—´çš„ç›¸å¯¹ä½ç½®ã€‚ å’ŒRLçš„å·®å¼‚å¤§å®¶æ˜¯ä¸æ˜¯è§‰å¾—ç›®å‰æ¥çœ‹å’ŒRelativeLayoutç‰¹åˆ«åƒï¼Ÿ å…¶å®žè¿˜æ˜¯æœ‰å¾ˆæ˜Žæ˜¾çš„åŒºåˆ«çš„ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥çœ‹ä¸€ä¸‹ï¼š 123456789101112131415161718&lt;RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="match_parent" android:layout_height="match_parent"&gt; &lt;Button android:id="@+id/id_btn01" android:layout_width="100dp" android:text="Btn01" android:layout_height="wrap_content" /&gt; &lt;Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_toRightOf="@id/id_btn01" android:text="Btn02" android:layout_alignParentRight="true" /&gt;&lt;/RelativeLayout&gt; é‚£ä¹ˆç»è¿‡æˆ‘ä»¬åˆšæ‰çš„å­¦ä¹ ï¼ŒæŠŠï¼š layout_toRightOf=&quot;@id/id_btn01&quot;ï¼Œlayout_alignParentRight=&quot;true&quot; åˆ†åˆ«æ›¿æ¢ä¸ºï¼š app:layout_constraintLeft_toRightOf=&quot;@id/id_btn01&quot;ï¼Œapp:layout_constraintRight_toRightOf=&quot;parent&quot; æ˜¯ä¸æ˜¯è§‰å¾—so easy ï¼Œä½†æ˜¯æˆ‘ä»¬çœ‹ä¸€ä¸‹æ•ˆæžœå›¾ï¼š æ˜¯ä¸æ˜¯å’Œé¢„æœŸæœ‰ä¸€å®šçš„åŒºåˆ«ï¼Œå‡è®¾ä½ å°†Btn02çš„å®½åº¦è®¾ç½®çš„éžå¸¸å¤§ï¼Œä½ ä¼šå‘çŽ°æ›´åŠ è¯¡å¼‚çš„äº‹æƒ…ï¼š ä½ ä¼šå‘çŽ°Btn02ï¼Œå¥½åƒç–¯äº†ä¸€æ ·ï¼Œæˆ‘ä»¬è®¾ç½®çš„åœ¨btn01å³ä¾§ï¼Œå’Œä¸Žparentå³ä¾§å¯¹é½å®Œå…¨å¤±æ•ˆäº†ï¼ï¼ï¼ åˆ«æ€•ï¼ŒæŽ¥ä¸‹æ¥å°±è®©ä½ è®¤è¯†åˆ°ä¸ºä»€ä¹ˆè¿™ä¸ªæŽ§ä»¶å«åšâ€œConstraintâ€Layoutã€‚ åœ¨å½“æŽ§ä»¶æœ‰è‡ªå·±è®¾ç½®çš„å®½åº¦ï¼Œä¾‹å¦‚warp_contentã€å›ºå®šå€¼æ—¶ï¼Œæˆ‘ä»¬ä¸ºæŽ§ä»¶æ·»åŠ çš„éƒ½æ˜¯çº¦æŸâ€œConstraintâ€ï¼Œè¿™ä¸ªçº¦æŸæœ‰ç‚¹åƒæ©¡çš®ç­‹ä¸€æ ·ä¼šæ‹‰è¿™ä¸ªæŽ§ä»¶ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæ”¹å˜æŽ§ä»¶çš„å°ºå¯¸ï¼ˆRLå¾ˆæ˜Žæ˜¾ä¸æ˜¯è¿™æ ·çš„ï¼‰ã€‚ ä¾‹å¦‚ä¸Šä¾‹ï¼Œå½“btn02çš„å®½åº¦è¾ƒå°æ—¶ï¼Œæˆ‘ä»¬ä¸ºå…¶å·¦ä¾§è®¾ç½®äº†ä¸€ä¸ªçº¦æŸï¼ˆbtn01å³ä¾§ï¼‰ï¼Œå³ä¾§è®¾ç½®äº†ä¸€ä¸ªçº¦æŸï¼ˆparentå³ä¾§å¯¹å…¶ï¼‰ï¼Œå½“ä¸¤ä¸ªçº¦æŸåŒæ—¶ç”Ÿæ•ˆçš„æ—¶å€™ï¼ˆä½ å¯ä»¥è®¤ä¸ºä¸¤è¾¹éƒ½æ˜¯ç›¸åŒçš„ä¸€ä¸ªæ‹‰åŠ›ï¼‰ï¼Œbtn02ä¼šå±…ä¸­ã€‚ å½“btn02ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œä¾ç„¶æ˜¯è¿™ä¸¤ä¸ªåŠ›ï¼Œé‚£ä¹ˆä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¼šé€ æˆå·¦ä¾§å’Œå³ä¾§è¶…å‡ºçš„è·ç¦»ä¸€æ ·å¤§ã€‚ é‚£ä¹ˆçŽ°åœ¨å¤§å®¶è‚¯å®šæœ‰äº›ç–‘é—®ï¼š æ€Žä¹ˆæ ·æ‰èƒ½å’Œä¸Šé¢çš„RLä¸€æ ·ï¼Œå®½åº¦åˆšå¥½å æ®å‰©ä¸‹çš„è·ç¦»å‘¢ï¼ˆbtn01å³ä¾§åˆ°å±å¹•å³ä¾§çš„è·ç¦»ï¼‰ï¼Ÿ è¿™ä¸ªé—®é¢˜ï¼Œé—®å¾—å¾ˆå¥½ï¼Œæˆ‘ä»¬åˆšæ‰æ‰€æœ‰çš„å°è¯•éƒ½æ˜¯åœ¨æŽ§ä»¶è‡ªèº«æ‹¥æœ‰ç‰¹å®šçš„å®½åº¦æƒ…å†µä¸‹æ‰§è¡Œçš„ï¼›é‚£ä¹ˆå¦‚æžœå¸Œæœ›æŽ§ä»¶çš„å®½åº¦æ ¹æ®ç”±çº¦æŸæ¥æŽ§ä»¶ï¼Œä¸å¦¨åŽ»æŽ‰è¿™ä¸ªç‰¹å®šçš„å®½åº¦ï¼Œå³è®¾ç½®ä¸º0è¯•è¯•ï¼Ÿ å¯¹ï¼å½“æˆ‘ä»¬å°†btn02çš„å®½åº¦è®¾ç½®ä¸º0æ—¶ï¼Œä¸€åˆ‡åˆå˜å¾—å¾ˆå®Œç¾Žã€‚ é‚£ä¹ˆè¿™é‡Œï¼Œä½ å¯èƒ½ä¼šé—®0å€¼æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Œå…¶å®žåœ¨ConstraintLayoutä¸­0ä»£è¡¨ï¼šMATCH_CONSTRAINTï¼Œçœ‹åˆ°è¿™ä¸ªå¸¸é‡ï¼Œæ˜¯ä¸æ˜¯çž¬é—´è§‰å¾—å¥½ç†è§£äº†ä¸€ç‚¹ã€‚ æœ€åŽä¸€ä¸ªé—®é¢˜ï¼ŒMATCH_PARENTå“ªåŽ»äº†? çœ‹å®˜ç½‘çš„è§£é‡Šï¼š Important: MATCH_PARENT is not supported for widgets contained in a ConstraintLayout, though similar behavior can be defined by using MATCH_CONSTRAINT with the corresponding left/right or top/bottom constraints being set to â€œparentâ€.` æ‰€ä»¥ä½ å¯ä»¥è®¤ä¸ºï¼šåœ¨ConstraintLayoutä¸­å·²ç»ä¸æ”¯æŒMATCH_PARENTè¿™ä¸ªå€¼äº†ï¼Œä½ å¯ä»¥é€šè¿‡MATCH_CONSTRAINTé…åˆçº¦æŸå®žçŽ°ç±»ä¼¼çš„æ•ˆæžœã€‚ å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œç›®å‰æˆ‘ä»¬å·²ç»çœ‹åˆ°å…¶å·²ç»å’ŒRelativeLayoutåŠ¿å‡åŠ›æ•Œäº†ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹RLåšä¸åˆ°çš„ç‰¹æ€§ã€‚ ä¸‰ã€å¢žåŠ ä¸€ä¸ªbanneræˆ‘ä»¬çŽ°åœ¨ä»¥å¾€åœ¨è¿™ä¸ªfeed itemé¡¶éƒ¨æ·»åŠ ä¸€ä¸ªbannerï¼Œå®½åº¦ä¸ºå æ®æ•´ä¸ªå±å¹•ï¼Œå®½é«˜æ¯”ä¸º16ï¼š6ã€‚ è¿™é‡Œå°´å°¬äº†ï¼Œåœ¨ä¹‹å‰çš„åšæ³•ï¼Œå¾ˆéš¾åœ¨å¸ƒå±€ä¸­è®¾ç½®å®½é«˜æ¯”ï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½éœ€è¦åœ¨ä»£ç ä¸­æ˜¾ç¤ºçš„åŽ»æ“ä½œï¼Œé‚£ä¹ˆå¦‚æžœä½ ç”¨äº†ConstraintLayoutï¼Œå®ƒå°±æ”¯æŒã€‚ çœ‹ä¸€çœ¼å¦‚ä½•æ”¯æŒï¼š 12345678910111213141516171819202122&lt;android.support.constraint.ConstraintLayout ... tools:context="com.zhy.constrantlayout_learn.MainActivity"&gt; &lt;TextView android:id="@+id/banner" android:layout_width="0dp" android:layout_height="0dp" android:background="#765" android:gravity="center" android:text="Banner" app:layout_constraintDimensionRatio="H,16:6" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toRightOf="parent" /&gt; &lt;TextView android:id="@+id/tv1" app:layout_constraintTop_toBottomOf="@id/banner" &gt;&lt;/TextView&gt; ...&lt;/...&gt; æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªbannerï¼Œè¿˜è®°å¾—æˆ‘ä»¬åˆšæ‰æ‰€è¯´çš„ä¹ˆï¼Œä¸è¦ä½¿ç”¨match_parentäº†ï¼Œè€Œæ˜¯è®¾ç½®match_contraintï¼Œå³0ï¼Œè®©çº¦æŸæ¥æŽ§åˆ¶å¸ƒå±€å®½é«˜ã€‚ æ‰€ä»¥æˆ‘ä»¬è®¾ç½®äº†å®½ã€é«˜éƒ½æ˜¯match_contraintï¼Œç„¶åŽè¿™ä¸¤ä¸ªå±žæ€§ï¼š 12app:layout_constraintLeft_toLeftOf="parent"app:layout_constraintRight_toRightOf="parent" è®©æˆ‘ä»¬çš„å®½åº¦å……æ»¡æ•´ä¸ªçˆ¶å¸ƒå±€ï¼Œåœ¨æ·»åŠ ä¸€ä¸ªï¼š 1app:layout_constraintDimensionRatio="16:6" è¯¥å±žæ€§æŒ‡çš„æ˜¯å®½é«˜æ¯”ï¼Œæ‰€ä»¥16ï¼š6å°±å¯ä»¥å®Œæˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚ å¥½äº†çœ‹ä¸‹æ•ˆæžœå›¾ï¼š è¿™ä¸ªå®½é«˜æ¯”å±žæ€§ï¼Œè¿˜æ”¯æŒè¿™æ ·çš„å†™æ³•ï¼š 12app:layout_constraintDimensionRatio="W,16:6"app:layout_constraintDimensionRatio="H,16:6" å¯ä»¥è‡ªå·±è¯•éªŒä¸‹ã€‚ å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åˆæ–°å¢žäº†ä¸€ä¸ªå±žæ€§ï¼Œè¿˜æ˜¯ä¸ªéžå¸¸å®žç”¨çš„å±žæ€§ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬ç»§ç»­ï¼Œå†çœ‹ä¸€ä¸ªä¼¼æ›¾ç›¸è¯†çš„åŠŸèƒ½ã€‚ å››ã€å¢žåŠ å‡ ä¸ªTabçŽ°åœ¨æˆ‘ä»¬å¸Œæœ›åœ¨åº•éƒ¨å¢žåŠ 3ä¸ªtabï¼Œå‡åˆ†ã€‚æ˜¯ä¸æ˜¯æƒ³åˆ°äº†LinearLayoutå’Œweightã€‚ æ²¡é”™ï¼ConstraintLayoutä¹Ÿæ”¯æŒç±»ä¼¼çš„å±žæ€§ã€‚ è™½ç„¶æˆ‘çŸ¥é“ï¼Œä½†æ˜¯å†™åˆ°è¿™æˆ‘è¿˜æ˜¯æœ‰ç‚¹å°æƒŠå–œ~~ çœ‹ä¸‹å¦‚ä½•å®žçŽ°ï¼š 12345678910111213141516171819202122232425262728293031323334&lt;TextView android:id="@+id/tab1" android:layout_width="0dp" android:layout_height="30dp" android:background="#f67" android:gravity="center" android:text="Tab1" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toLeftOf="@+id/tab2" /&gt;&lt;TextView android:id="@+id/tab2" android:layout_width="0dp" android:layout_height="30dp" android:background="#A67" android:gravity="center" android:text="Tab2" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintLeft_toRightOf="@id/tab1" app:layout_constraintRight_toLeftOf="@+id/tab3" /&gt;&lt;TextView android:id="@+id/tab3" android:layout_width="0dp" android:layout_height="30dp" android:background="#767" android:gravity="center" android:text="Tab3" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintLeft_toRightOf="@id/tab2" app:layout_constraintRight_toRightOf="parent" /&gt; æˆ‘ä»¬å¢žåŠ 3ä¸ªtextviewæ¥å†’å……tabã€‚æˆ‘ä»¬çœ‹æ¨ªå‘çš„ä¾èµ–ï¼Œ3ä¸ªtabä¸¤ä¸¤è®¾ç½®äº†çº¦æŸï¼ˆå³ä½ åœ¨æˆ‘ä»¬çš„å·¦è¾¹ï¼Œæˆ‘åœ¨ä½ çš„å³è¾¹ï¼‰ï¼Œæœ€å¤–å±‚çš„è®¾ç½®äº†parentçº¦æŸï¼›å†åŠ ä¸Šæˆ‘ä»¬æŠŠå®½åº¦éƒ½è®¾ç½®ä¸ºäº†match_constraintï¼Œsoï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†3ä¸ªtabç­‰åˆ†ã€‚ çœ‹ä¸€çœ¼æ•ˆæžœå›¾ï¼š ä½ å¯èƒ½ä¼šè¯´ï¼ŒLLé…åˆweightæ›´åŠ çµæ´»ï¼Œå¯ä»¥å•ä¸ªè®¾ç½®å æ®çš„æ¯”ä¾‹ã€‚ å¯¹ï¼Œæ²¡é”™ï¼Œæˆ‘ä»¬ä¹Ÿæ”¯æŒï¼Œæˆ‘ä¸æ˜¯è¿˜æ²¡è¯´å®Œä¹ˆã€‚ çŽ°åœ¨æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªtabè®¾ç½®ä¸€ä¸ªå±žæ€§ï¼š 1app:layout_constraintHorizontal_weight çœ‹åˆ°è¿™ä¸ªåå­—ï¼Œåº”è¯¥å°±æ˜Žç™½äº†å§ï¼Œå‡è®¾æˆ‘ä»¬åˆ†åˆ«è®¾ç½®å€¼ä¸º2ï¼Œ1ï¼Œ1ã€‚ æ•ˆæžœå›¾ä¸ºï¼š æ˜¯ä¸æ˜¯å¾ˆæƒŠå–œï¼Œåˆ«æ€¥ï¼Œåˆšæ‰ä½ è¯´æˆ‘ä¸å¦‚LLï¼ŒçŽ°åœ¨æˆ‘è¦è®©ä½ å†çœ‹ä¸€äº›LLé…åˆweightåšä¸åˆ°çš„ã€‚ è¿™é‡Œéœ€è¦å€ŸåŠ©å‡ å¼ å®˜ç½‘ä¸Šçš„å›¾äº†ï¼š åˆšæ‰æˆ‘ä»¬è¯´äº†ï¼Œ3ä¸ªtabä¸¤ä¸¤è®¾ç½®äº†ä¾èµ–ï¼Œå³ç±»ä¼¼ä¸‹å›¾ï¼š æ¨ªå‘çš„ç›¸å½“äºŽç»„æˆäº†ä¸€ä¸ªé“¾(Chains)ã€‚åœ¨è¿™ä¸ªé“¾çš„æœ€å·¦ä¾§çš„å…ƒç´ æˆä¸ºé“¾å¤´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶èº«ä¸Šè®¾ç½®ä¸€äº›å±žæ€§ï¼Œæ¥å†³å®šè¿™ä¸ªé“¾çš„å±•ç¤ºæ•ˆæžœï¼š è¯¥å±žæ€§ä¸ºï¼š 1layout_constraintHorizontal_chainStyle æˆ‘ä»¬å·²ç»è§è¿‡ä¸€ç§æ•ˆæžœäº†ï¼Œå³æŒ‰ç…§weightç­‰åˆ†ï¼Œå¯ä»¥æˆä¸ºweighted chainã€‚è®¾ç½®æ¡ä»¶ä¸ºï¼š chainStyle=â€spreadâ€ï¼Œæ‰€æœ‰æŽ§ä»¶å®½åº¦è®¾ç½®ä¸ºmatch_constraintï¼Œå› ä¸ºé»˜è®¤å°±æ˜¯spreadï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰æ˜¾ç¤ºè®¾ç½®ã€‚ å…¶å–å€¼è¿˜å¯ä»¥ä¸ºï¼š packed spread_inside æˆ‘è¿˜æ˜¯åˆ†åˆ«æ˜¾ç¤ºä¸€ä¸‹å§ï¼š spread + å®½åº¦éž0 spread + å®½åº¦ä¸º0ï¼Œä¸”å¯ä»¥é€šè¿‡weightæŽ§åˆ¶åˆ†é…æ¯”ä¾‹ï¼ˆä¸Šä¾‹ï¼‰ spread_inside + å®½åº¦éž0 packed + å®½åº¦éž0 å¥½äº†ï¼Œå·®ä¸å¤šäº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¨ªå‘æˆ–è€…çºµå‘ç»„æˆä¸€ä¸ªChainï¼Œç„¶åŽåœ¨Chain headè®¾ç½®chainStyleæ¥æžä¸€äº›äº‹æƒ…ã€‚ å®˜ç½‘æœ‰ä¸ªå›¾ï¼š å‰å››ä¸ªæˆ‘ä»¬éƒ½æ¼”ç¤ºäº†ï¼Œæœ€åŽä¸€ä¸ªè®¾è®¡åˆ°ä¸€ä¸ªæ–°çš„biaså±žæ€§ï¼Œåˆ«æ€¥ï¼Œå’±ä»¬æ…¢æ…¢è¯´~~ å¥½äº†ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å†æ¬¡è§è¯äº†ConstraintLayoutçš„å¼ºå¤§ã€‚ æˆ‘ä»¬æœ€åŽå†çœ‹ä¸€ä¸ªä¾‹å­ã€‚ äº”ã€å¢žåŠ æµ®åŠ¨æŒ‰é’®ä¸€ä¸ªå¾ˆå¸¸è§çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬çŽ°åœ¨å¸Œæœ›åœ¨å³ä¸‹è§’å¢žåŠ ä¸€ä¸ªæµ®åŠ¨æŒ‰é’®ã€‚ çœ‹ä¸‹å¦‚ä½•å®žçŽ°ï¼š 12345678910111213141516&lt;android.support.constraint.ConstraintLayout ... tools:context="com.zhy.constrantlayout_learn.MainActivity"&gt; &lt;TextView android:layout_width="60dp" android:layout_height="60dp" android:background="#612" app:layout_constraintBottom_toBottomOf="parent" app:layout_constraintHorizontal_bias="0.9" app:layout_constraintLeft_toLeftOf="parent" app:layout_constraintRight_toRightOf="parent" app:layout_constraintTop_toTopOf="parent" app:layout_constraintVertical_bias="0.9" /&gt;&lt;/....&gt; æˆ‘ä»¬åœ¨æœ€åŽè¿½åŠ ä¸€ä¸ªTextViewå†’å……æˆ‘ä»¬çš„æµ®åŠ¨æŒ‰é’®ã€‚å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è®¾ç½®äº†å›ºå®šå€¼ï¼Œè¢«è®¾ç½®çº¦æŸä¸ºå³ä¸‹è§’ã€‚ æ­£å¸¸æƒ…å†µæˆ‘ä»¬å¯ä»¥é€šè¿‡marginæ¥è®¾ç½®ä¸Žå³ä¾§ä¸Žåº•éƒ¨çš„è·ç¦»ã€‚ ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬å°è¯•ä½¿ç”¨é‡ä¸ªæ–°çš„å±žæ€§ï¼š 12layout_constraintHorizontal_biaslayout_constraintVertical_bias å³è®¾ç½®ä¸Šä¸‹ä¸¤ä¾§é—´éš™æ¯”ä¾‹åˆ†åˆ«ä¸º90%ä¸Ž10%ã€‚è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬ä¹‹å‰è¯´äº†ï¼Œå†æ²¡æœ‰biasè¿™ä¸ªå±žæ€§çš„æ—¶å€™ï¼Œè¿™ä¸¤ä¾§çš„æ‹‰åŠ›å¤§å°æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä½ å¯ä»¥é€šè¿‡biasæ¥æŽ§åˆ¶å“ªä¸€ä¾§çš„åŠ›è¦å¤§ä¸€äº›æ˜Žç™½äº†ä¹ˆ æ‰€ä»¥ï¼Œè¯¥å±žæ€§å¯ä»¥ç”¨äºŽçº¦æŸä¹‹å‰ï¼ŒæŽ§åˆ¶ä¸¤ä¾§çš„â€œæ‹‰åŠ›â€ã€‚ æˆ‘ä»¬çœ‹ä¸€ä¸‹æ•ˆæžœå›¾ï¼š é‚£ä¹ˆåˆ°è¿™é‡Œï¼ŒConstraintLayoutçš„å±žæ€§æˆ‘ä»¬åŸºæœ¬ä¸Šä»‹ç»å®Œäº†ï¼š æˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435layout_constraintLeft_toLeftOf layout_constraintLeft_toRightOflayout_constraintRight_toLeftOflayout_constraintRight_toRightOflayout_constraintTop_toTopOflayout_constraintTop_toBottomOflayout_constraintBottom_toTopOflayout_constraintBottom_toBottomOf# å³æ–‡ç« çš„baselineå¯¹é½layout_constraintBaseline_toBaselineOf# ä¸Žleft,rightç±»ä¼¼layout_constraintStart_toEndOf layout_constraintStart_toStartOflayout_constraintEnd_toStartOflayout_constraintEnd_toEndOf# marginä¸éœ€è¦è§£é‡Šandroid:layout_marginStartandroid:layout_marginEndandroid:layout_marginLeftandroid:layout_marginTopandroid:layout_marginRightandroid:layout_marginBottomlayout_constraintHorizontal_bias layout_constraintVertical_bias layout_constraintHorizontal_chainStylelayout_constraintVertical_chainStylelayout_constraintVertical_weightGuideline å¥½åƒï¼Œè¿˜æœ‰ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ï¼Œå«Guidelineã€‚ å¥½å§ï¼Œç»§ç»­~ å…­ã€å°è¯•ä½¿ç”¨Guidelineandroid.support.constraint.Guidelineè¯¥ç±»æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ç”¨äºŽè¾…åŠ©å¸ƒå±€ï¼Œå³ç±»ä¼¼ä¸ºè¾…åŠ©çº¿ï¼Œæ¨ªå‘çš„ã€çºµå‘çš„ã€‚è¯¥å¸ƒå±€æ˜¯ä¸ä¼šæ˜¾ç¤ºåˆ°ç•Œé¢ä¸Šçš„ã€‚ æ‰€ä»¥å…¶æœ‰ä¸ªå±žæ€§ä¸ºï¼š android:orientationå–å€¼ä¸ºâ€verticalâ€å’Œâ€horizontalâ€. é™¤æ­¤ä»¥å¤–ï¼Œè¿˜å·®ä¸ªå±žæ€§ï¼Œå†³å®šè¯¥è¾…åŠ©çº¿çš„ä½ç½®ï¼š layout_constraintGuide_begin layout_constraintGuide_end layout_constraintGuide_percent å¯ä»¥é€šè¿‡ä¸Šé¢3ä¸ªå±žæ€§å…¶ä¸­ä¹‹ä¸€æ¥ç¡®å®šå±žæ€§å€¼ä½ç½®ã€‚ begin=30dpï¼Œå³å¯è®¤ä¸ºè·ç¦»é¡¶éƒ¨30dpçš„åœ°æ–¹æœ‰ä¸ªè¾…åŠ©çº¿ï¼Œæ ¹æ®orientationæ¥å†³å®šæ˜¯æ¨ªå‘è¿˜æ˜¯çºµå‘ã€‚ end=30dpï¼Œå³ä¸ºè·ç¦»åº•éƒ¨ã€‚percent=0.8å³ä¸ºè·ç¦»é¡¶éƒ¨80%ã€‚ å¥½äº†ï¼Œä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼Œåˆšæ‰æˆ‘ä»¬çš„æµ®ç‚¹æŒ‰é’®ï¼Œæˆ‘å†³å®šé€šè¿‡ä¸¤æ ¹è¾…åŠ©çº¿æ¥å®šä½ï¼Œä¸€æ ¹æ¨ªå‘è·ç¦»åº•éƒ¨80%ï¼Œä¸€ä¸ªçºµå‘è·ç¦»é¡¶éƒ¨80%ï¼Œæµ®ç‚¹æŒ‰é’®å°±å®šä½åœ¨ä»–ä»¬äº¤å‰çš„åœ°æ–¹ã€‚ 123456789101112131415161718192021222324252627&lt;android.support.constraint.ConstraintLayout ... tools:context="com.zhy.constrantlayout_learn.MainActivity"&gt; &lt;android.support.constraint.Guideline android:id="@+id/guideline_h" android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="horizontal" app:layout_constraintGuide_percent="0.8" /&gt; &lt;android.support.constraint.Guideline android:id="@+id/guideline_w" android:layout_width="wrap_content" android:layout_height="wrap_content" android:orientation="vertical" app:layout_constraintGuide_percent="0.8" /&gt; &lt;TextView android:layout_width="60dp" android:layout_height="60dp" android:background="#612" app:layout_constraintLeft_toRightOf="@id/guideline_w" app:layout_constraintTop_toBottomOf="@id/guideline_h" /&gt;&lt;/....&gt; æˆ‘æ„Ÿè§‰éƒ½ä¸ç”¨è§£é‡Šäº†~~çœ‹çœ¼æ•ˆæžœå›¾å§ï¼š åˆ°æ­¤ï¼Œå±žæ€§åŸºæœ¬ä¸Šè®²å®Œå•¦~ å¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°ç›¸å½“å¤æ‚çš„ä¸€ä¸ªå¸ƒå±€ï¼Œåœ¨ConstraintLayoutä¸­å®Œå…¨æ²¡æœ‰åµŒå¥—ï¼ å…­ã€æ€»ç»“æœ¬æ–‡é€šè¿‡å®žé™…çš„æŒ‰é’®ï¼ŒåŸºæœ¬ä¸Šä»‹ç»äº†ConstraintLayoutæ‰€æ”¯æŒçš„æ‰€æœ‰çš„å±žæ€§ï¼Œå…¨æ–‡æ²¡æœ‰æåŠæ‹–æ‹½ï¼Œå› ä¸ºå½“ç•Œé¢å¤æ‚ä¹‹åŽï¼Œæƒ³è¦å®Œç¾Žçš„æ‹–æ‹½å®žåœ¨æ˜¯å¤ªéš¾äº†ï¼Œè€Œä¸”è°ä¹Ÿä¸æœŸæœ›ï¼Œçœ‹ä¸æ‡‚æ‹–æ‹½å®ŒæˆåŽçš„å¸ƒå±€å±žæ€§å§~ æ‰€ä»¥ï¼Œæˆ‘å»ºè®®è¿˜æ˜¯å°½å¯èƒ½æ‰‹å†™ï¼Œé€šè¿‡æœ¬æ–‡è¿™æ ·ä¸€ä¸ªæµç¨‹ï¼Œè™½ç„¶æ”¯æŒçš„å±žæ€§æœ‰20å¤šä¸ªï¼Œä½†æ˜¯åˆ†ç±»åŽå¹¶ä¸éš¾è®°ï¼Œéš¾è®°ä¹Ÿå¯ä»¥æ‹¿å‡ºæœ¬æ–‡ç¿»ä¸€ç¿»~ å¥½äº†ï¼Œæ€è€ƒäº†åŠå¤©ï¼Œå¦‚ä½•é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹ä»‹ç»å®Œæ‰€æœ‰çš„å±žæ€§ï¼Œæ€»ä½“æ¥è¯´è¿˜æ˜¯å®Œæˆäº†ï¼Œç»™è‡ªå·±ç‚¹ä¸ªèµžã€‚ è½¬è½½äºŽï¼šå¼ é¸¿æ´‹çš„åšå®¢]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[è·‘é©¬ç¯MarqueeViewï¼ˆæ”¯æŒä»»ä½•Viewï¼‰]]></title>
    <url>%2Fposts%2F553b92de.html</url>
    <content type="text"><![CDATA[ç±»ä¼¼TextViewçš„android:ellipsize=â€marqueeâ€çš„è·‘é©¬ç¯æ•ˆæžœ ä»»æ„Viewéƒ½å¯å®žçŽ° æºç ï¼šMarqueeView 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119package com.zm.marqueeview;import android.content.Context;import android.util.AttributeSet;import android.view.LayoutInflater;import android.view.MotionEvent;import android.view.View;import android.view.WindowManager;import android.widget.HorizontalScrollView;import android.widget.LinearLayout;/** * è·‘é©¬ç¯MarqueeView */public class MarqueeView extends HorizontalScrollView implements Runnable &#123; private Context context; private LinearLayout mainLayout;//è·‘é©¬ç¯æ»šåŠ¨éƒ¨åˆ† private int scrollSpeed = 5;//æ»šåŠ¨é€Ÿåº¦ private int scrollDirection = LEFT_TO_RIGHT;//æ»šåŠ¨æ–¹å‘ private int currentX;//å½“å‰xåæ ‡ private int viewMargin = 100;//Viewé—´è· private int viewWidth;//Viewæ€»å®½åº¦ private int screenWidth;//å±å¹•å®½åº¦ public static final int LEFT_TO_RIGHT = 1; public static final int RIGHT_TO_LEFT = 2; public MarqueeView(Context context) &#123; this(context, null); &#125; public MarqueeView(Context context, AttributeSet attrs) &#123; this(context, attrs, 0); &#125; public MarqueeView(Context context, AttributeSet attrs, int defStyle) &#123; super(context, attrs, defStyle); this.context = context; initView(); &#125; void initView() &#123; WindowManager wm = (WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE); screenWidth = wm.getDefaultDisplay().getWidth(); mainLayout = (LinearLayout) LayoutInflater.from(context).inflate(R.layout.scroll_content, null); this.addView(mainLayout); &#125; public void addViewInQueue(View view) &#123; LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT); lp.setMargins(viewMargin, 0, 0, 0); view.setLayoutParams(lp); mainLayout.addView(view); view.measure(0, 0);//æµ‹é‡view viewWidth = viewWidth + view.getMeasuredWidth() + viewMargin; &#125; //å¼€å§‹æ»šåŠ¨ public void startScroll() &#123; removeCallbacks(this); currentX = (scrollDirection == LEFT_TO_RIGHT ? viewWidth : -screenWidth); post(this); &#125; //åœæ­¢æ»šåŠ¨ public void stopScroll() &#123; removeCallbacks(this); &#125; //è®¾ç½®Viewé—´è· public void setViewMargin(int viewMargin) &#123; this.viewMargin = viewMargin; &#125; //è®¾ç½®æ»šåŠ¨é€Ÿåº¦ public void setScrollSpeed(int scrollSpeed) &#123; this.scrollSpeed = scrollSpeed; &#125; //è®¾ç½®æ»šåŠ¨æ–¹å‘ é»˜è®¤ä»Žå·¦å‘å³ public void setScrollDirection(int scrollDirection) &#123; this.scrollDirection = scrollDirection; &#125; @Override public void run() &#123; switch (scrollDirection) &#123; case LEFT_TO_RIGHT: mainLayout.scrollTo(currentX, 0); currentX--; if (-currentX &gt;= screenWidth) &#123; mainLayout.scrollTo(viewWidth, 0); currentX = viewWidth; &#125; break; case RIGHT_TO_LEFT: mainLayout.scrollTo(currentX, 0); currentX++; if (currentX &gt;= viewWidth) &#123; mainLayout.scrollTo(-screenWidth, 0); currentX = -screenWidth; &#125; break; default: break; &#125; postDelayed(this, 50 / scrollSpeed); &#125; @Override public boolean onTouchEvent(MotionEvent ev) &#123; return false; &#125;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ä»£ç ç‰‡æ®µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GoogleæŽ¨èçš„å›¾ç‰‡åŠ è½½åº“Glideä»‹ç»]]></title>
    <url>%2Fposts%2F6abab605.html</url>
    <content type="text"><![CDATA[è‹±æ–‡åŽŸæ–‡ Introduction to Glide, Image Loader Library for Android, recommended by Google åœ¨æ³°å›½ä¸¾è¡Œçš„è°·æ­Œå¼€å‘è€…è®ºå›ä¸Šï¼Œè°·æ­Œä¸ºæˆ‘ä»¬ä»‹ç»äº†ä¸€ä¸ªåå« Glide çš„å›¾ç‰‡åŠ è½½åº“ï¼Œä½œè€…æ˜¯bumptechã€‚è¿™ä¸ªåº“è¢«å¹¿æ³›çš„è¿ç”¨åœ¨googleçš„å¼€æºé¡¹ç›®ä¸­ï¼ŒåŒ…æ‹¬2014å¹´google I/Oå¤§ä¼šä¸Šå‘å¸ƒçš„å®˜æ–¹appã€‚å®ƒçš„æˆåŠŸè®©æˆ‘éžå¸¸æ„Ÿå…´è¶£ã€‚æˆ‘èŠ±äº†ä¸€æ•´æ™šçš„æ—¶é—´æŠŠçŽ©ï¼Œå†³å®šåˆ†äº«ä¸€äº›è‡ªå·±çš„ç»éªŒã€‚åœ¨å¼€å§‹ä¹‹å‰æˆ‘æƒ³è¯´ï¼Œ Glide å’Œ Picasso æœ‰90%çš„ç›¸ä¼¼åº¦ï¼Œå‡†ç¡®çš„è¯´ï¼Œå°±æ˜¯Picassoçš„å…‹éš†ç‰ˆæœ¬ã€‚ä½†æ˜¯åœ¨ç»†èŠ‚ä¸Šè¿˜æ˜¯æœ‰ä¸å°‘åŒºåˆ«çš„ã€‚ å¯¼å…¥åº“ Glide å’Œ Picasso éƒ½åœ¨jcenterä¸Šã€‚åœ¨é¡¹ç›®ä¸­æ·»åŠ ä¾èµ–éžå¸¸ç®€å•ï¼š Glide1234dependencies &#123; compile 'com.github.bumptech.glide:glide:3.5.2' compile 'com.android.support:support-v4:22.0.0'&#125; Picasso123dependencies &#123; compile 'com.squareup.picasso:picasso:2.5.1'&#125; è™½ç„¶ä¸¤è€…çœ‹èµ·æ¥ä¸€æ ·ï¼Œä½†æ˜¯Glideæ›´æ˜“ç”¨ï¼Œå› ä¸ºGlideçš„withæ–¹æ³•ä¸å…‰æŽ¥å—Contextï¼Œè¿˜æŽ¥å—Activity å’Œ Fragmentï¼ŒContextä¼šè‡ªåŠ¨çš„ä»Žä»–ä»¬èŽ·å–ã€‚ åŒæ—¶å°†Activity/Fragmentä½œä¸ºwith()å‚æ•°çš„å¥½å¤„æ˜¯ï¼šå›¾ç‰‡åŠ è½½ä¼šå’ŒActivity/Fragmentçš„ç”Ÿå‘½å‘¨æœŸä¿æŒä¸€è‡´ï¼Œæ¯”å¦‚PausedçŠ¶æ€åœ¨æš‚åœåŠ è½½ï¼Œåœ¨Resumedçš„æ—¶å€™åˆè‡ªåŠ¨é‡æ–°åŠ è½½ã€‚æ‰€ä»¥æˆ‘å»ºè®®ä¼ å‚çš„æ—¶å€™ä¼ é€’Activity å’Œ Fragmentç»™Glideï¼Œè€Œä¸æ˜¯Contextã€‚ é»˜è®¤Bitmapæ ¼å¼æ˜¯RGB_565ä¸‹é¢æ˜¯åŠ è½½å›¾ç‰‡æ—¶å’ŒPicassoçš„æ¯”è¾ƒï¼ˆ1920x1080 åƒç´ çš„å›¾ç‰‡åŠ è½½åˆ°768x432çš„ImageViewä¸­ï¼‰ å¯ä»¥çœ‹åˆ°GlideåŠ è½½çš„å›¾ç‰‡è´¨é‡è¦å·®äºŽPicassoï¼ˆpsï¼šæˆ‘çœ‹ä¸å‡ºæ¥å“ˆï¼‰ï¼Œä¸ºä»€ä¹ˆï¼Ÿè¿™æ˜¯å› ä¸ºGlideé»˜è®¤çš„Bitmapæ ¼å¼æ˜¯RGB_565 ï¼Œæ¯”ARGB_8888æ ¼å¼çš„å†…å­˜å¼€é”€è¦å°ä¸€åŠã€‚ä¸‹é¢æ˜¯Picassoåœ¨ARGB8888ä¸‹ä¸ŽGlideåœ¨RGB565ä¸‹çš„å†…å­˜å¼€é”€å›¾ï¼ˆåº”ç”¨è‡ªèº«å ç”¨äº†8mï¼Œå› æ­¤ä»¥8ä¸ºåŸºå‡†çº¿æ¯”è¾ƒï¼‰ï¼š å¦‚æžœä½ å¯¹é»˜è®¤çš„RGB_565æ•ˆæžœè¿˜æ¯”è¾ƒæ»¡æ„ï¼Œå¯ä»¥ä¸åšä»»ä½•äº‹ï¼Œä½†æ˜¯å¦‚æžœä½ è§‰å¾—éš¾ä»¥æŽ¥å—ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„GlideModuleå°†Bitmapæ ¼å¼è½¬æ¢åˆ°ARGB_8888ï¼š 12345678910111213public class GlideConfiguration implements GlideModule &#123; @Override public void applyOptions(Context context, GlideBuilder builder) &#123; // Apply options to the builder here. builder.setDecodeFormat(DecodeFormat.PREFER_ARGB_8888); &#125; @Override public void registerComponents(Context context, Glide glide) &#123; // register ModelLoaders here. &#125; &#125; åŒæ—¶åœ¨AndroidManifest.xmlä¸­å°†GlideModuleå®šä¹‰ä¸ºmeta-data 1&lt;meta-data android:name="com.inthecheesefactory.lab.glidepicasso.GlideConfiguration" android:value="GlideModule"/&gt; è¿™æ ·çœ‹èµ·æ¥å°±ä¼šå¥½å¾ˆå¤šã€‚æˆ‘ä»¬å†æ¥çœ‹çœ‹å†…å­˜å¼€é”€å›¾ï¼Œè¿™æ¬¡è²Œä¼¼GlideèŠ±è´¹äº†ä¸¤å€äºŽä¸Šæ¬¡çš„å†…å­˜ï¼Œä½†æ˜¯Picassoçš„å†…å­˜å¼€é”€ä»ç„¶è¿œå¤§äºŽGlideã€‚ åŽŸå› åœ¨äºŽPicassoæ˜¯åŠ è½½äº†å…¨å°ºå¯¸çš„å›¾ç‰‡åˆ°å†…å­˜ï¼Œç„¶åŽè®©GPUæ¥å®žæ—¶é‡ç»˜å¤§å°ã€‚è€ŒGlideåŠ è½½çš„å¤§å°å’ŒImageViewçš„å¤§å°æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤æ›´å°ã€‚å½“ç„¶ï¼ŒPicassoä¹Ÿå¯ä»¥æŒ‡å®šåŠ è½½çš„å›¾ç‰‡å¤§å°çš„ï¼š 1234Picasso.with(this) .load("http://nuuneoi.com/uploads/source/playstore/cover.jpg") .resize(768, 432) .into(ivImgPicasso); ä½†æ˜¯é—®é¢˜åœ¨äºŽä½ éœ€è¦ä¸»åŠ¨è®¡ç®—ImageViewçš„å¤§å°ï¼Œæˆ–è€…è¯´ä½ çš„ImageViewå¤§å°æ˜¯å…·ä½“çš„å€¼ï¼ˆè€Œä¸æ˜¯wrap_contentï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥è¿™æ ·ï¼š 12345Picasso.with(this) .load("http://nuuneoi.com/uploads/source/playstore/cover.jpg") .fit() .centerCrop() .into(ivImgPicasso); çŽ°åœ¨Picassoçš„å†…å­˜å¼€é”€å°±å’ŒGlideå·®ä¸å¤šäº†ã€‚ è™½ç„¶å†…å­˜å¼€é”€å·®è·ä¸åˆ°ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªé—®é¢˜ä¸ŠGlideå®ŒèƒœPicassoã€‚å› ä¸ºGlideå¯ä»¥è‡ªåŠ¨è®¡ç®—å‡ºä»»æ„æƒ…å†µä¸‹çš„ImageViewå¤§å°ã€‚ Imageè´¨é‡çš„ç»†èŠ‚è¿™æ˜¯å°†ImageViewè¿˜åŽŸåˆ°çœŸå®žå¤§å°æ—¶çš„æ¯”è¾ƒã€‚ ä½ å¯ä»¥çœ‹åˆ°ï¼ŒGlideåŠ è½½çš„å›¾ç‰‡æ²¡æœ‰Picassoé‚£ä¹ˆå¹³æ»‘ï¼Œæˆ‘è¿˜æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥ç›´è§‚æ”¹å˜å›¾ç‰‡å¤§å°è°ƒæ•´ç®—æ³•çš„æ–¹æ³•ã€‚ä½†æ˜¯è¿™å¹¶ä¸ç®—ä»€ä¹ˆåäº‹ï¼Œå› ä¸ºå¾ˆéš¾å¯Ÿè§‰ã€‚ ç£ç›˜ç¼“å­˜Picassoå’ŒGlideåœ¨ç£ç›˜ç¼“å­˜ç­–ç•¥ä¸Šæœ‰å¾ˆå¤§çš„ä¸åŒã€‚Picassoç¼“å­˜çš„æ˜¯å…¨å°ºå¯¸çš„ï¼Œè€ŒGlideç¼“å­˜çš„æ˜¯è·ŸImageViewå°ºå¯¸ç›¸åŒçš„ã€‚ ä¸Šé¢æåˆ°çš„å¹³æ»‘åº¦çš„é—®é¢˜ä¾ç„¶å­˜åœ¨ï¼Œè€Œä¸”å¦‚æžœåŠ è½½çš„æ˜¯RGB565å›¾ç‰‡ï¼Œé‚£ä¹ˆç¼“å­˜ä¸­çš„å›¾ç‰‡ä¹Ÿæ˜¯RGB565ã€‚æˆ‘å°è¯•å°†ImageViewè°ƒæ•´æˆä¸åŒå¤§å°ï¼Œä½†ä¸ç®¡å¤§å°å¦‚ä½•Picassoåªç¼“å­˜ä¸€ä¸ªå…¨å°ºå¯¸çš„ã€‚Glideåˆ™ä¸åŒï¼Œå®ƒä¼šä¸ºæ¯ç§å¤§å°çš„ImageViewç¼“å­˜ä¸€æ¬¡ã€‚å°½ç®¡ä¸€å¼ å›¾ç‰‡å·²ç»ç¼“å­˜äº†ä¸€æ¬¡ï¼Œä½†æ˜¯å‡å¦‚ä½ è¦åœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹å†æ¬¡ä»¥ä¸åŒå°ºå¯¸æ˜¾ç¤ºï¼Œéœ€è¦é‡æ–°ä¸‹è½½ï¼Œè°ƒæ•´æˆæ–°å°ºå¯¸çš„å¤§å°ï¼Œç„¶åŽå°†è¿™ä¸ªå°ºå¯¸çš„ä¹Ÿç¼“å­˜èµ·æ¥ã€‚å…·ä½“è¯´æ¥å°±æ˜¯ï¼šå‡å¦‚åœ¨ç¬¬ä¸€ä¸ªé¡µé¢æœ‰ä¸€ä¸ª200x200çš„ImageViewï¼Œåœ¨ç¬¬äºŒä¸ªé¡µé¢æœ‰ä¸€ä¸ª100x100çš„ImageViewï¼Œè¿™ä¸¤ä¸ªImageViewæœ¬æ¥æ˜¯è¦æ˜¾ç¤ºåŒä¸€å¼ å›¾ç‰‡ï¼Œå´éœ€è¦ä¸‹è½½ä¸¤æ¬¡ã€‚ä¸è¿‡ï¼Œä½ å¯ä»¥æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œè®©Glideæ—¢ç¼“å­˜å…¨å°ºå¯¸åˆç¼“å­˜å…¶ä»–å°ºå¯¸ï¼š 1234Glide.with(this) .load("http://nuuneoi.com/uploads/source/playstore/cover.jpg") .diskCacheStrategy(DiskCacheStrategy.ALL) .into(ivImgGlide); ä¸‹æ¬¡åœ¨ä»»ä½•ImageViewä¸­åŠ è½½å›¾ç‰‡çš„æ—¶å€™ï¼Œå…¨å°ºå¯¸çš„å›¾ç‰‡å°†ä»Žç¼“å­˜ä¸­å–å‡ºï¼Œé‡æ–°è°ƒæ•´å¤§å°ï¼Œç„¶åŽç¼“å­˜ã€‚Glideçš„è¿™ç§æ–¹å¼ä¼˜ç‚¹æ˜¯åŠ è½½æ˜¾ç¤ºéžå¸¸å¿«ã€‚è€ŒPicassoçš„æ–¹å¼åˆ™å› ä¸ºéœ€è¦åœ¨æ˜¾ç¤ºä¹‹å‰é‡æ–°è°ƒæ•´å¤§å°è€Œå¯¼è‡´ä¸€äº›å»¶è¿Ÿï¼Œå³ä¾¿ä½ æ·»åŠ äº†è¿™æ®µä»£ç æ¥è®©å…¶ç«‹å³æ˜¾ç¤ºï¼š 12// Picasso.noFade(); Picassoå’ŒGlideå„æœ‰æ‰€é•¿ï¼Œä½ æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„ã€‚å¯¹æˆ‘è€Œè¨€ï¼Œæˆ‘æ›´å–œæ¬¢Glideï¼Œå› ä¸ºå®ƒè¿œæ¯”Picassoå¿«ï¼Œè™½ç„¶éœ€è¦æ›´å¤§çš„ç©ºé—´æ¥ç¼“å­˜ã€‚ï¼ˆä»Žä¸Šå›¾ä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒGlideåŠ è½½é€Ÿåº¦è¿œå¿«äºŽPicassoï¼‰ ç‰¹æ€§ä½ å¯ä»¥åšåˆ°å‡ ä¹Žå’ŒPicassoä¸€æ ·å¤šçš„äº‹æƒ…ï¼Œä»£ç ä¹Ÿå‡ ä¹Žä¸€æ ·ã€‚ Image Resizing12345// Picasso.resize(300, 200); //Glide.override(300, 200); Center Cropping12345// Picasso.centerCrop(); // Glide.centerCrop(); Transforming12345// Picasso.transform(new CircleTransform()) // Glide.transform(new CircleTransform(context)) è®¾ç½®å ä½å›¾æˆ–è€…åŠ è½½é”™è¯¯å›¾1234567// Picasso.placeholder(R.drawable.placeholder).error(R.drawable.imagenotfound) // Glide.placeholder(R.drawable.placeholder).error(R.drawable.imagenotfound) å‡ ä¹Žå’ŒPicassoä¸€æ ·ï¼Œä»ŽPicassoè½¬æ¢åˆ°Glideå¯¹ä½ æ¥è¯´å°±æ˜¯å°èœä¸€ç¢Ÿã€‚ æœ‰ä»€ä¹ˆGlideå¯ä»¥åšè€ŒPicassoåšä¸åˆ°Glideå¯ä»¥åŠ è½½GIFåŠ¨æ€å›¾ï¼Œè€ŒPicassoä¸èƒ½ã€‚ åŒæ—¶å› ä¸ºGlideå’ŒActivity/Fragmentçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤gifçš„åŠ¨ç”»ä¹Ÿä¼šè‡ªåŠ¨çš„éšç€Activity/Fragmentçš„çŠ¶æ€æš‚åœã€é‡æ”¾ã€‚Glide çš„ç¼“å­˜åœ¨gifè¿™é‡Œä¹Ÿæ˜¯ä¸€æ ·ï¼Œè°ƒæ•´å¤§å°ç„¶åŽç¼“å­˜ã€‚ä½†æ˜¯ä»Žæˆ‘çš„ä¸€æ¬¡æµ‹è¯•ç»“æžœæ¥çœ‹Glide åŠ¨ç”»ä¼šæ¶ˆè´¹å¤ªå¤šçš„å†…å­˜ï¼Œå› æ­¤è°¨æ…Žä½¿ç”¨ã€‚é™¤äº†gifåŠ¨ç”»ä¹‹å¤–ï¼ŒGlideè¿˜å¯ä»¥å°†ä»»ä½•çš„æœ¬åœ°è§†é¢‘è§£ç æˆä¸€å¼ é™æ€å›¾ç‰‡ã€‚è¿˜æœ‰ä¸€ä¸ªç‰¹æ€§æ˜¯ä½ å¯ä»¥é…ç½®å›¾ç‰‡æ˜¾ç¤ºçš„åŠ¨ç”»ï¼Œè€ŒPicassoåªæœ‰ä¸€ç§åŠ¨ç”»ï¼šfading inã€‚æœ€åŽä¸€ä¸ªæ˜¯å¯ä»¥ä½¿ç”¨thumbnail()äº§ç”Ÿä¸€ä¸ªä½ æ‰€åŠ è½½å›¾ç‰‡çš„thumbnailã€‚å…¶å®žè¿˜æœ‰ä¸€äº›ç‰¹æ€§ï¼Œä¸è¿‡ä¸æ˜¯éžå¸¸é‡è¦ï¼Œæ¯”å¦‚å°†å›¾åƒè½¬æ¢æˆå­—èŠ‚æ•°ç»„ç­‰ã€‚ é…ç½®æœ‰è®¸å¤šå¯ä»¥é…ç½®çš„é€‰é¡¹ï¼Œæ¯”å¦‚å¤§å°ï¼Œç¼“å­˜çš„ç£ç›˜ä½ç½®ï¼Œæœ€å¤§ç¼“å­˜ç©ºé—´ï¼Œä½å›¾æ ¼å¼ç­‰ç­‰ã€‚å¯ä»¥åœ¨è¿™ä¸ªé¡µé¢æŸ¥çœ‹è¿™äº›é…ç½®Configuration ã€‚ åº“çš„å¤§å°Picasso (v2.5.1)çš„å¤§å°çº¦118kbï¼Œè€ŒGlide (v3.5.2)çš„å¤§å°çº¦430kbã€‚ Anyway 312KB difference might not be that significant.ä¸è¿‡312kbçš„å·®è·å¹¶ä¸æ˜¯å¾ˆé‡è¦ã€‚Picassoå’ŒGlideçš„æ–¹æ³•ä¸ªæ•°åˆ†åˆ«æ˜¯840å’Œ2678ä¸ªã€‚ å¿…é¡»æŒ‡å‡ºï¼Œå¯¹äºŽDEXæ–‡ä»¶65535ä¸ªæ–¹æ³•çš„é™åˆ¶æ¥è¯´ï¼Œ2678æ˜¯ä¸€ä¸ªç›¸å½“å¤§çš„æ•°å­—äº†ã€‚å»ºè®®åœ¨ä½¿ç”¨Glideçš„æ—¶å€™å¼€å¯ProGuardã€‚ æ€»ç»“Glideå’ŒPicassoéƒ½æ˜¯éžå¸¸å®Œç¾Žçš„åº“ã€‚GlideåŠ è½½å›¾åƒä»¥åŠç£ç›˜ç¼“å­˜çš„æ–¹å¼éƒ½è¦ä¼˜äºŽPicassoï¼Œé€Ÿåº¦æ›´å¿«ï¼Œå¹¶ä¸”Glideæ›´æœ‰åˆ©äºŽå‡å°‘OutOfMemoryErrorçš„å‘ç”Ÿï¼ŒGIFåŠ¨ç”»æ˜¯Glideçš„æ€æ‰‹é”ã€‚ä¸è¿‡Picassoçš„å›¾ç‰‡è´¨é‡æ›´é«˜ã€‚ä½ æ›´å–œæ¬¢å“ªä¸ªå‘¢ï¼Ÿè™½ç„¶æˆ‘ä½¿ç”¨äº†å¾ˆé•¿æ—¶é—´çš„Picassoï¼Œä½†æ˜¯æˆ‘å¾—æ‰¿è®¤çŽ°åœ¨æˆ‘æ›´å–œæ¬¢Glideã€‚æˆ‘çš„å»ºè®®æ˜¯ä½¿ç”¨Glideï¼Œä½†æ˜¯å°†Bitmapæ ¼å¼æ¢æˆ ARGB_8888ã€è®©Glideç¼“å­˜åŒæ—¶ç¼“å­˜å…¨å°ºå¯¸å’Œæ”¹å˜å°ºå¯¸ä¸¤ç§ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Glide</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Glide</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Studio å®Œç¾Žä¿®æ”¹åº”ç”¨åŒ…å]]></title>
    <url>%2Fposts%2F9b574dca.html</url>
    <content type="text"><![CDATA[æˆ‘ä»¬å¹³æ—¶æ–°å»ºé¡¹ç›®æœ‰äº›æœ‹å‹å¯èƒ½å½“æ—¶å°±æ˜¯éšæ„å†™çš„ä¸€ä¸ªåŒ…åï¼Œç„¶åŽåœ¨é¡¹ç›®è¿‡ç¨‹ä¸­ï¼Œ åˆæ„Ÿè§‰è¿™ä¸ªåŒ…åä¸å¤ªå¥½ï¼Œæ‰€ä»¥å°±è¦å¯¹åŒ…åè¿›è¡Œä¿®æ”¹ã€‚ ä¿®æ”¹æœ€å¤–å±‚åŒ…å ä¿®æ”¹ä¸­é—´å±‚åŒ…å çœ‹åˆ°æ²¡æœ‰ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨settingé‡Œé¢ï¼ŒæŠŠ compact empty middle packages è¿™ä¸ªé€‰é¡¹åŽ»æŽ‰ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬çš„åŒ…çš„å±‚æ¬¡ç»“æž„å°±åˆ†å¼€äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦åŽ»åšç›¸åº”çš„ä¿®æ”¹äº†ã€‚ æ–°å¢žï¼šStudio 3.0 ä¹‹åŽï¼Œsetting ä¸­çš„é€‰é¡¹åå­—è¯¥æˆäº† Hide empty middle packages å¦å¤–è¯´æ˜Žä¸€ç‚¹ï¼Œåœ¨ Studio é‡Œé¢æˆ‘ä»¬çš„ getPackageName å¯¹åº”çš„æ˜¯ applicationId , è€Œmanifest çš„é‚£ä¸ªpackageï¼Œåœ¨è¿™é‡Œçš„ä½œç”¨å…¶å®žæ˜¯ä¸ºäº†å¼•ç”¨å†…éƒ¨èµ„æºæ–‡ä»¶ï¼Œä»¥åŠä¿è¯ Activity ç­‰æºæ–‡ä»¶çš„è·¯å¾„æ­£ç¡®è€Œå·²ï¼Œæ‰€ä»¥ï¼Œåœ¨ Studio ä¸­ä¿®æ”¹å‘å¸ƒç¨‹åºåŒ…åï¼Œåˆ™åªéœ€è¦åœ¨ build æ–‡ä»¶ä¸­ä¿®æ”¹ applicationId å°±å¯ä»¥äº†ã€‚ è¡¥å……åœ¨ Studio 3.0 è¿˜æœ‰ä¸€ç§å¯ç›´æŽ¥é€šè¿‡ Androidmenifest ä¿®æ”¹éƒ¨åˆ†åŒ…åçš„æ–¹æ³•ï¼ˆäº²æµ‹è¿‡ï¼‰ã€‚è¿™é‡Œå°±ä¸ä¸Šå›¾äº†ã€‚è¯­è¨€ç»™å¤§å®¶æè¿°ä¸€ä¸‹ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥åšå®¢ä¸‹æ–¹ç•™è¨€ã€‚ ä¿®æ”¹æµç¨‹å¦‚ä¸‹ï¼šè¿›å…¥ Androidmanifest.xml æ–‡ä»¶ï¼Œæ‰¾åˆ° package åç§°ï¼Œé€‰ä¸­éœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†ã€‚æ¯”å¦‚åŽŸåŒ…åä¸ºcom.zm.androidå¦‚æžœéœ€è¦ä¿®æ”¹ä¸­é—´çš„ zm ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±é€‰ä¸­ zm ,ä¾æ¬¡è¿›è¡Œ å³é”® - &gt; Refactor -&gt; Rename , (Mac å¿«æ·é”®ä¸º fn + shift+F6)ç„¶åŽé€‰æ‹© Rename package , è¾“å…¥è¦ä¿®æ”¹ç›®æ ‡çš„åç§° ï¼Œç›´æŽ¥ç‚¹å‡» Refactor , å·¦ä¸‹æ–¹ç»§ç»­ç‚¹å‡» Do Refactor , ç­‰å¾…ä¿®æ”¹æˆåŠŸ~ï¼]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»¿æ”¯ä»˜å®é¦–é¡µåº”ç”¨ç®¡ç†(æ‹–æ‹½æŽ’åºï¼Œæ·»åŠ åˆ é™¤)]]></title>
    <url>%2Fposts%2Fed9fc033.html</url>
    <content type="text"><![CDATA[MenuManage-Imitate-Alipayä»¿æ”¯ä»˜å®é¦–é¡µåº”ç”¨ç®¡ç†(æ‹–æ‹½æŽ’åºï¼Œæ·»åŠ åˆ é™¤) æ•ˆæžœå›¾ Download Demo]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[debug.keystoreçš„SHA1å’ŒMD5]]></title>
    <url>%2Fposts%2F1a48ee1.html</url>
    <content type="text"><![CDATA[åˆ‡æ¢åˆ°debug.keystoreç›®å½•1cd ~/.android/ æŸ¥çœ‹debug.keystoreçš„SHA1å’ŒMD5æŽ¥ç€è¾“å…¥å¦‚ä¸‹å‘½ä»¤ 1keytool -list -v -keystore ~/.android/debug.keystore -alias androiddebugkey -storepass android -keypass android ç»“æžœå¦‚ä¸‹å›¾]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
        <tag>AndroidStudio</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidè§£å†³qqåˆ†äº«åŽè¿”å›žç¨‹åºå‡ºçŽ°çš„Bug]]></title>
    <url>%2Fposts%2Fa03cc66a.html</url>
    <content type="text"><![CDATA[é—®é¢˜ï¼šå½“æˆ‘ä»¬ä½¿ç”¨qqåˆ†äº«æ—¶ï¼Œåˆ†äº«æˆåŠŸåŽé€‰æ‹©ç•™åœ¨qq,è¿™ä¸ªæ—¶å€™æŒ‰homeé”®ï¼Œå›žåˆ°æ‰‹æœºä¸»ç•Œé¢ï¼Œåœ¨ç‚¹å‡»å›žåˆ°æˆ‘çš„app,è¿™ä¸ªæ—¶å€™ä¼šå‡ºçŽ°ç•Œé¢æ˜¾ç¤ºå‡ºæ¥äº†ï¼Œä½†æ˜¯ä»»ä½•äº‹ä»¶éƒ½ä¸å“åº”ï¼Œå³æŒ‰é’®æ²¡ååº”ã€‚ åˆ†æžï¼šè¿™ä¸ªæ—¶å€™å›žåˆ°æˆ‘ä»¬çš„appæ—¶ï¼Œä¼šå‘çŽ°activityçš„ç”Ÿå‘½å‘¨æœŸåªèµ°äº† onRestart()â€”onStart(),èµ°åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼ŒonResume()å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œæ‰€ä»¥ç•Œé¢ä¸å“åº” è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆä¼šå‘çŽ°qqåˆ†äº«ç”¨åˆ°çš„çš„ä¸€ä¸ªAssistActivity å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼š.: â€“onActivityResult()â€”onStart()â€”onResume() ç»“è®ºï¼šè‡³æ­¤ï¼Œæˆ‘ä»¬å‘çŽ°äº†åŽŸå› ï¼Œæ˜¯è¿™ä¸ªAssistActivityçš„é—®é¢˜ã€‚ è§£å†³ï¼šæˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬ç¨‹åºçš„onStart()æ–¹æ³•åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦‚æžœè¿™ä¸ªAssistActivityå¤„åœ¨æ ˆé¡¶å°±æŠŠå®ƒæ¸…é™¤æŽ‰ã€‚ 123456789101112131415161718192021222324252627@Overrideprotected void onStart() &#123; super.onStart(); Log.i("---share----", "-----start"); if(isNeedRestart())&#123; Intent intent = new Intent(context, this.getClass()); intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); //æ¸…é™¤æ ˆé¡¶çš„activity intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);//ä¸æ˜¾ç¤ºå¤šä½™çš„åŠ¨ç”»ï¼Œå‡è£…æ²¡æœ‰é‡æ–°å¯åŠ¨ //è®°å¾—å¸¦éœ€è¦çš„å‚æ•° startActivity(intent); &#125;&#125;private boolean isNeedRestart()&#123; ActivityManager am = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE); List&lt;ActivityManager.RunningTaskInfo&gt; tasks = am.getRunningTasks(1); if (!tasks.isEmpty()) &#123; ComponentName topActivity = tasks.get(0).topActivity; ActivityManager.RunningTaskInfo taskInfo = tasks.get(0); if (topActivity.getPackageName().equals(context.getPackageName())) &#123; // è‹¥å½“å‰æ ˆé¡¶ç•Œé¢æ˜¯AssistActivityï¼Œåˆ™éœ€è¦æ‰‹åŠ¨å…³é—­ if (topActivity.getClassName().equals("com.tencent.connect.common.AssistActivity")) return true; &#125; &#125; return false;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ä»£ç ç‰‡æ®µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android-ä»ªè¡¨ç›˜æŽ§ä»¶ä»¿èŠéº»ä¿¡ç”¨]]></title>
    <url>%2Fposts%2F8a91974c.html</url>
    <content type="text"><![CDATA[å‰è¨€ç”±äºŽé¡¹ç›®éœ€è¦ä½¿ç”¨åˆ°ä»ªè¡¨ç›˜å›¾è¡¨ï¼Œæ‰€ä»¥å°±æœ¬ç€ä¸€è´¯çš„æ“ä½œæµç¨‹å°±æ¥githubä¸Šé¢æ‰¾ï¼Œç»“æžœå‘çŽ°å¾ˆå¤šå›¾è¡¨æˆ–è€…ä¸æ˜¯æˆ‘éœ€è¦çš„æˆ–è€…æ‰©å±•æ€§ä¸å¼ºï¼Œæ‰€ä»¥å°±è‡ªå·±åŠ¨æ‰‹å†™äº†ä¸€ä¸ªæ‰©å±•æ€§è¾ƒå¼ºçš„ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°æœ‰éœ€è¦çš„äººã€‚ï¼ˆä¸è¿‡æœ¬äººèƒ½åŠ›æœ‰é™ï¼Œæœ‰ä¸è¶³çš„åœ°æ–¹è¿˜è¯·è§è°…ï¼‰ æ•ˆæžœæ¥æºï¼šGithubä¼ é€é—¨ å…ˆå®šä¸ªå°ç›®æ ‡ç”±äºŽæ¯ä¸ªå…¬å¸çš„UIè‚¯å®šéƒ½æœ‰ä¸åŒçš„æƒ³æ³•ï¼Œè®¾è®¡å‡ºæ¥çš„æ•ˆæžœå›¾ä¹Ÿåƒå¥‡ç™¾æ€ªã€‚æ‰€ä»¥æˆ‘ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯èƒ½å†™ä¸€ä¸ªåŸºç±»çš„ä»ªè¡¨ç›˜å›¾è¡¨ï¼Œä¸éœ€è¦æ‡‚å¾—å¤ªå¤šçš„è‡ªå®šä¹‰ViewçŸ¥è¯†ä¹Ÿèƒ½åšå‡ºUIæ‰€éœ€è¦çš„æ•ˆæžœã€‚ æˆ‘å°±æƒ³å°è¯•ç€èƒ½ä¸èƒ½è‡ªå·±å†™ä¸€ä¸ªï¼Œä¸‡ä¸€èƒ½å¸®åŠ©åˆ°å…¶ä»–äººå‘¢ã€‚ï¼ˆæ¢¦æƒ³è¿˜æ˜¯è¦æœ‰çš„ï¼‰ æ‰€ä»¥æˆ‘å°±æŠ½å–äº†ä¸€ä¸ªBaseDashboardViewç±»ï¼Œå¹¶å®žçŽ°äº†ä¸‰ä¸ªStyleçš„ä»ªè¡¨ç›˜å›¾è¡¨ã€‚è€Œè¿™ä¸‰ä¸ªä»ªè¡¨ç›˜é™¤åŽ»ä¸€äº›ç”»ç¬”çš„åˆå§‹åŒ–å’Œå‚æ•°çš„è®¾ç½®ï¼Œç»˜åˆ¶çš„ä»£ç éƒ½åœ¨70è¡Œå†…ã€‚ä¸‹é¢å°±æ¥çœ‹ä¸€ä¸‹å¦‚ä½•å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„ä»ªè¡¨ç›˜å›¾è¡¨å§ã€‚ ç„¶åŽåŽ»åšå§åˆ›å»ºä¸€ä¸ªViewç„¶åŽåŽ»ç»§æ‰¿ BaseDashboardView è¿™æ—¶éœ€è¦å®žçŽ°ä»¥ä¸‹æ–¹æ³•ï¼š 123456789protected abstract void initView();protected abstract void initArcRect(float left, float top, float right, float bottom);protected abstract void drawArc(Canvas canvas, float arcStartAngle, float arcSweepAngle);protected abstract void drawProgressArc(Canvas canvas, float arcStartAngle, float progressSweepAngle);protected abstract void drawText(Canvas canvas, int value, String valueLevel, String currentTime); ç„¶åŽè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ¯ä¸ªæ–¹æ³•éƒ½æ˜¯ä»€ä¹ˆç”¨çš„ã€‚ initView() å°±æ˜¯åˆå§‹åŒ–è®¾ç½®ï¼Œå¦‚åˆ›å»ºç”»ç¬”ç­‰ã€‚ initArcRect(float left, float top, float right, float bottom) åœ¨æˆ‘ä»¬ç»˜åˆ¶åœ†å¼§çš„æ—¶å€™å¯ä»¥ä¼ å…¥Rectå¯¹è±¡æ¥ç¡®å®šåœ†å¼§çš„ç»˜åˆ¶èŒƒå›´ï¼Œéœ€è¦è¿™é‡Œå°±æ˜¯ç»™æˆ‘ä»¬åˆå§‹åŒ–åœ†å¼§çš„åŒºåŸŸçš„ã€‚ å¦‚:mRectArc = new RectF(left, top, right, bottom); drawArc(Canvas canvas, float arcStartAngle, float arcSweepAngle)è¿™æ˜¯å°±æ˜¯å¼€å§‹æ­£å¼çš„ç»˜åˆ¶èƒŒæ™¯åœ†å¼§äº†ï¼ŒarcStartAngleè¡¨ç¤ºåœ†å¼§çš„èµ·å§‹è§’åº¦ï¼ŒarcSweepAngleè¡¨ç¤ºåœ†çŽ¯ä¸€å…±å¤šå°‘åº¦ã€‚æˆ‘ä»¬é€šè¿‡åˆšæ‰çš„Rectå°±å¯ä»¥ç»˜åˆ¶å‡ºä¸€ä¸ªåœ†å¼§å¦‚ï¼šcanvas.drawArc(mRectOuterArc, arcStartAngle, arcSweepAngle, false, mPaintArc);ä½†æ˜¯è¦ä¸»è¦ç”»ç¬”çš„æ ·å¼è¦è®¾ç½®ä¸ºPaint.Style.STROKE drawProgressArc(Canvas canvas, float arcStartAngle, float progressSweepAngle)è€Œè¿™é‡Œæ˜¯ç»˜åˆ¶è¿›åº¦åœ†å¼§çš„åœ°æ–¹ï¼ŒprogressSweepAngleè¿›åº¦çš„å¹…åº¦å·²ç»åœ¨BaseDashboardViewä¸­è®¡ç®—å¥½ï¼Œåªéœ€è¦é€šè¿‡drawArcä¸­çš„ä¸€æ ·ç»˜åˆ¶ä¸ªåœ†å¼§å°±è¡Œã€‚ drawText(Canvas canvas, int value, String valueLevel, String currentTime)åœ¨è¿™é‡Œå¯ä»¥æŠŠæ–‡å­—ç»˜åˆ¶åˆ°ä½ æƒ³è¦ä»–å‡ºçŽ°çš„åœ°æ–¹å°±OKæ‹‰ã€‚æ•°æ®å·²ç»åœ¨BaseDashboardViewä¸­å¤„ç†è¿‡ï¼Œç›´æŽ¥ç»˜åˆ¶å°±å¯ä»¥ã€‚ ç”±äºŽå¾ˆå¤šé€»è¾‘çš„è®¡ç®—å’ŒåŠ¨ç”»éƒ½æ˜¯åœ¨BaseDashboardViewä¸­åŽ»å®žçŽ°ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å®žçŽ°è¿™å‡ ä¸ªæ–¹æ³•ï¼Œç„¶åŽå®žçŽ°ä¸€äº›ç»˜åˆ¶çš„é€»è¾‘å°±å¯ä»¥å’¯ã€‚å¦‚æžœåœ¨ç»˜åˆ¶æ–¹é¢æœ‰ä»€ä¹ˆé—®é¢˜çš„å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹3ä¸ªæ ·å¼çš„DashboardViewï¼Œå¦‚æžœæ˜¯å¯¹åº•å±‚çš„è®¡ç®—æœ‰å…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹BaseDashboardViewã€‚ æŽ¥ä¸‹æ¥å°±åŽ»æ‰©å±•è¿™é‡Œä¸»è¦è¯´ä¸€ä¸ªæ–¹æ³•setCalibration(int[] calibrationNumberText, String[] calibrationBetweenText,int largeCalibrationBetweenNumber) ç„¶åŽä¸»è¦è¯´ä¸€ä¸‹calibrationNumberTextå’ŒcalibrationBetweenTextå‚æ•°ï¼Œä»–ä»¬çš„åˆå§‹é»˜è®¤å€¼æ˜¯ int[]{350, 550, 600, 650, 700, 950}å’ŒString[]{&quot;è¾ƒå·®&quot;, &quot;ä¸­ç­‰&quot;, &quot;è‰¯å¥½&quot;, &quot;ä¼˜ç§€&quot;, &quot;æžå¥½&quot;} é‚£è¿™æ ·å…¶å®žç»„æˆäº†ä¸€ä¸ªåŒºé—´ 350 è¾ƒå·® 550 ä¸­ç­‰ 600 è‰¯å¥½ 650 ä¼˜ç§€ 700 æžå¥½ 950 ä»–çš„æ„æ€ä¸º350-550çš„ä¸ºè¾ƒå·®ï¼Œå…¶ä»–ä¾æ¬¡ç±»æŽ¨ï¼Œä½†æ˜¯æ¯ä¸ªåŒºé—´çš„å¤§å°æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¾ƒå·®çš„åŒºé—´ä¸º550-350=200ï¼Œè€Œä¸­ç­‰åŒºé—´ä¸º650-550=50ã€‚ä½†æ˜¯æ¯ä¸ªåŒºé—´åœ¨å›¾è¡¨ä¸Šæ˜¾ç¤ºçš„åŒºåŸŸå¤§å°ç¡®å®žç›¸åŒçš„ã€‚é‚£ä¹ˆåœ¨è®¡ç®—è¿›åº¦å¹…åº¦çš„æ—¶å€™éœ€è¦åŒºåˆ«è®¡ç®—ã€‚ è€Œæˆ‘çš„å®žçŽ°æ–¹å¼æ˜¯é¦–å…ˆåˆ¤æ–­å½“å‰valueåœ¨ç¬¬å‡ ä¸ªåŒºé—´ä¸­ï¼Œå¦‚å½“å‰value=575ã€‚é‚£ä¹ˆé€šè¿‡å¾ªçŽ¯çš„æ–¹å¼å¯ä»¥çŸ¥é“å½“å‰valueå¤„åœ¨550å’Œ600ä¹‹é—´ã€‚ç„¶åŽé€šè¿‡ (575 - 550) / (600 - 550)å…¬å¼è®¡ç®—å‡ºå½“å‰å€¼åœ¨è¿™ä¸ªåŒºé—´å†…å çš„ç™¾åˆ†æ¯”ã€‚ç„¶åŽé€šè¿‡æ¯ä¸ªåŒºé—´çš„è§’åº¦ç®—å‡ºå½“å‰è¿›åº¦æ¡çš„å¹…åº¦ã€‚ è€Œé™¤äº†åˆ»åº¦çš„æ‰©å±•å…¶å®žè¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„å¯é…ç½®é¡¹ï¼Œå¯ä»¥é€šè¿‡githubè¿›è¡ŒæŸ¥çœ‹ã€‚ å…¬å…±æ–¹æ³•ä»‹ç»12345678910111213141516171819202122232425262728293031323334353637//è®¾ç½®å½“å‰æ•°å€¼ value:æ•°å€¼ isAnim:æ˜¯å¦å¼€å¯ä¸œæ¹– reset:æ˜¯å¦ä»Žå¤´å¼€å§‹è¿›è¡ŒåŠ¨ç”»setValue(int value, boolean isAnim, boolean reset)//è®¾ç½®åŠ¨ç”»æ—¶é•¿ (é»˜è®¤ä¸º2.5ç§’)setProgressAnimTime(long time)//è®¾ç½®åœ†å¼§è§’åº¦ //arcStartAngle:èµ·å§‹è§’åº¦ (é»˜è®¤å€¼: 165)//arcSweepAngle:åœ†å¼§åº¦æ•° (é»˜è®¤å€¼: 210)setArcAngle(float arcStartAngle,float arcSweepAngle)&#123;//è®¾ç½®åˆ»åº¦å±žæ€§//calibrationNumberText æ¯ä¸ªå¤§åˆ»åº¦å¯¹åº”çš„æ•°å€¼ (é»˜è®¤å€¼: int[]&#123;350, 550, 600, 650, 700, 950&#125;)//calibrationBetweenText æ¯ä¸ªå¤§åˆ»åº¦ä¸­é—´çš„æ–‡å­— (é»˜è®¤å€¼: String[]&#123;"è¾ƒå·®", "ä¸­ç­‰", "è‰¯å¥½", "ä¼˜ç§€", "æžå¥½"&#125;)//largeCalibrationBetweenNumber ä¸¤ä¸ªå¤§åˆ»åº¦ä¸­é—´æœ‰å¤šå°‘ä¸ªå°åˆ»åº¦ (é»˜è®¤å€¼: 3)setCalibration(int[] calibrationNumberText, String[] calibrationBetweenText,int largeCalibrationBetweenNumber)//è®¾ç½®æ—¥æœŸæ ¼å¼åŒ–çš„æ ¼å¼ (é»˜è®¤å€¼: yyyy-MM-dd)setDatePattern(String pattern)//è®¾ç½®æ—¶é—´çš„æ˜¾ç¤ºæ ¼å¼ æ ¼å¼(å¦‚: è¯„ä¼°æ—¶é—´ï¼š&#123;date&#125;) &#123;date&#125;ä¸ºå ä½ç¬¦setDateStrPattern(String pattern)//è®¾ç½®æ•°å€¼ç­‰çº§çš„æ¨¡æ¿ æ ¼å¼(å¦‚: ä¿¡ç”¨&#123;level&#125;) &#123;level&#125;ä¸ºå ä½ç¬¦setValueLevelPattern(String pattern)//è®¾ç½®æ•°å€¼çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 60sp white)setValuePaint(float spSize, @ColorInt int color)//è®¾ç½®æ•°å€¼ç­‰çº§çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 25sp white)setValueLevelPaint(float spSize, @ColorInt int color)//è®¾ç½®æ—¥æœŸå¯¹åº”çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 10sp white)setDatePaint(float spSize, @ColorInt int color)//è®¾ç½®ä¸­é—´æ–‡å­—ä¸­é—´çš„é—´è· (é»˜è®¤å€¼: 7dp)setTextSpacing(int spacingDp) Style 1 1234567891011121314151617181920212223242526//è®¾ç½®åœ†çŽ¯ä¹‹é—´çš„è·ç¦» (é»˜è®¤å€¼: 15dp)setArcSpacing(float dpSize)//è®¾ç½®å¤–çŽ¯çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 3dp Color.argb(80, 255, 255, 255))setOuterArcPaint(float dpSize, @ColorInt int color)//è®¾ç½®å†…çŽ¯çš„ç”»ç¬”å±žæ€§(é»˜è®¤å€¼: 10dp Color.argb(80, 255, 255, 255))setInnerArcPaint(float dpSize, @ColorInt int color)//è®¾ç½®è¿›åº¦æ¡çš„é¢œè‰² (é»˜è®¤å€¼: Color.argb(200, 255, 255, 255))setProgressArcColor(@ColorInt int color)//è®¾ç½®è¿›åº¦æ¡çš„ç‚¹çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 3dp white)setProgressPointPaint(float dpRadiusSize,@ColorInt int color)//è®¾ç½®å¤§åˆ»åº¦çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 2dp Color.argb(200, 255, 255, 255))setLargeCalibrationPaint(float dpSize, @ColorInt int color)//è®¾ç½®å°åˆ»åº¦çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 0.5dp Color.argb(100, 255, 255, 255))setSmallCalibrationPaint(float dpSize, @ColorInt int color)//è®¾ç½®åˆ»åº¦æ–‡å­—çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 10sp white)setCalibrationTextPaint(float spSize, @ColorInt int color)//è®¾ç½®å¤§åˆ»åº¦ä¸­é—´çš„æ•°å€¼ç­‰çº§çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 10sp white)setCalibrationBetweenTextPaint(float spSize, @ColorInt int color) Style 2 12345678//è®¾ç½®åœ†çŽ¯é¢œè‰² (é»˜è®¤å€¼: Color.argb(120, 255, 255, 255))setArcColor(@ColorInt int color)//è®¾ç½®è¿›åº¦åœ†çŽ¯çš„é¢œè‰² (é»˜è®¤å€¼: Color.argb(200, 255, 255, 255))setProgressColor(@ColorInt int color)//è®¾ç½®åœ†çŽ¯çš„åˆ»åº¦å¤§å° (é»˜è®¤å€¼: 2.5dp)setArcCalibrationSize(int dpSize) Style 3 1234567891011121314151617181920212223//è®¾ç½®åœ†çŽ¯ä¹‹é—´çš„è·ç¦» (é»˜è®¤å€¼: 10dp)setArcSpacing(float dpSize)//è®¾ç½®å¤–çŽ¯çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 1.5dp Color.argb(80, 255, 255, 255))setOuterArcPaint(float dpSize, @ColorInt int color)//è®¾ç½®å¤–çŽ¯çš„è¿›åº¦é¢œè‰² (é»˜è®¤å€¼: Color.argb(200, 255, 255, 255))setProgressOuterArcColor(@ColorInt int color)//è®¾ç½®å†…çŽ¯çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 1.5dp Color.argb(50, 255, 255, 255))setInnerArcPaint(float dpSize, @ColorInt int color)//è®¾ç½®å†…çŽ¯çš„è¿›åº¦é¢œè‰² (é»˜è®¤å€¼: Color.argb(170, 255, 255, 255))setProgressInnerArcPaint(@ColorInt int color)//è®¾ç½®å†…çŽ¯å®žçº¿å’Œè™šçº¿çŠ¶æ€ (é»˜è®¤å€¼: float[] &#123; 10, 10 &#125;)setInnerArcPathEffect(float[] intervals)//è®¾ç½®è¿›åº¦ç‚¹çš„ç”»ç¬”å±žæ€§ (é»˜è®¤å€¼: 3dp white)setProgressPointPaint(float dpRadiusSize,@ColorInt int color)//è®¾ç½®æŒ‡ç¤ºå™¨é¢œè‰² (é»˜è®¤å€¼: Color.argb(200, 255, 255, 255))setIndicatorPaint(@ColorInt int color)]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­å¤šçº¿ç¨‹åˆ‡æ¢çš„å‡ ç§æ–¹æ³•]]></title>
    <url>%2Fposts%2Ffbda19a9.html</url>
    <content type="text"><![CDATA[æˆ‘ä»¬çŸ¥é“ï¼Œå¤šçº¿ç¨‹æ˜¯Androidå¼€å‘ä¸­å¿…çŽ°çš„åœºæ™¯ï¼Œå¾ˆå¤šåŽŸç”ŸAPIå’Œå¼€æºé¡¹ç›®éƒ½æœ‰å¤šçº¿ç¨‹çš„å†…å®¹ï¼Œè¿™é‡Œç®€å•æ€»ç»“å’ŒæŽ¢è®¨ä¸€ä¸‹å¸¸è§çš„å¤šçº¿ç¨‹åˆ‡æ¢æ–¹å¼ã€‚æˆ‘ä»¬å…ˆå›žé¡¾ä¸€ä¸‹Javaå¤šçº¿ç¨‹çš„å‡ ä¸ªåŸºç¡€å†…å®¹ï¼Œç„¶åŽå†åˆ†æžæ€»ç»“ä¸€äº›ç»å…¸ä»£ç ä¸­å¯¹äºŽçº¿ç¨‹åˆ‡æ¢çš„å®žçŽ°æ–¹å¼ã€‚ å‡ ç‚¹åŸºç¡€å¤šçº¿ç¨‹åˆ‡æ¢ï¼Œå¤§æ¦‚å¯ä»¥åˆ‡åˆ†ä¸ºè¿™æ ·å‡ ä¸ªå†…å®¹ï¼šå¦‚ä½•å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œå¦‚ä½•å®šä¹‰æ¯ä¸ªçº¿ç¨‹çš„ä»»åŠ¡ï¼Œå¦‚ä½•åœ¨çº¿ç¨‹ä¹‹é—´äº’ç›¸é€šä¿¡ã€‚ ThreadThreadå¯ä»¥è§£å†³å¼€å¯å¤šä¸ªçº¿ç¨‹çš„é—®é¢˜ã€‚Threadæ˜¯Javaä¸­å®žçŽ°å¤šçº¿ç¨‹çš„çº¿ç¨‹ç±»ï¼Œæ¯ä¸ªThreadå¯¹è±¡éƒ½å¯ä»¥å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œæ³¨æ„æ˜¯å¯ä»¥å¯åŠ¨ï¼Œä¹Ÿå¯ä»¥ä¸å¯åŠ¨æ–°çº¿ç¨‹ï¼š 12thread.run();//ä¸å¯åŠ¨æ–°çº¿ç¨‹ï¼Œåœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œthread.start();//å¯åŠ¨æ–°çº¿ç¨‹ã€‚ å¦å¤–å°±æ˜¯Threadå­˜åœ¨çº¿ç¨‹ä¼˜å…ˆçº§é—®é¢˜ï¼Œå¦‚æžœä¸ºThreadè®¾ç½®è¾ƒé«˜çš„çº¿ç¨‹ä¼˜å…ˆçº§ï¼Œå°±æœ‰æœºä¼šèŽ·å¾—æ›´å¤šçš„CPUèµ„æºï¼Œæ³¨æ„è¿™é‡Œä¹Ÿæ˜¯æœ‰æœºä¼šï¼Œä¼˜å…ˆçº§é«˜çš„Threadä¸æ˜¯å¿…ç„¶ä¼šå…ˆäºŽå…¶ä»–Threadæ‰§è¡Œï¼Œåªæ˜¯ç³»ç»Ÿä¼šå€¾å‘äºŽç»™å®ƒåˆ†é…æ›´å¤šçš„CPUã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–°å»ºçš„Threadå’Œå½“å‰Threadçš„çº¿ç¨‹ä¼˜å…ˆçº§ä¸€è‡´ã€‚è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§æœ‰ä¸¤ç§æ–¹å¼ï¼š 12thread.setPriority(Thread.MAX_PRIORITY);//1~10ï¼Œé€šè¿‡çº¿ç¨‹è®¾ç½®Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);//-20~19ï¼Œé€šè¿‡è¿›ç¨‹è®¾ç½® è¿™ä¸¤ç§è®¾ç½®æ–¹å¼æ˜¯ç›¸å¯¹ç‹¬ç«‹çš„ï¼Œåœ¨Androidä¸­ï¼Œä¸€èˆ¬å»ºè®®é€šè¿‡Processè¿›ç¨‹è®¾ç½®ä¼˜å…ˆçº§ã€‚ ThreadPoolThreadæœ¬èº«æ˜¯éœ€è¦å ç”¨å†…å­˜çš„ï¼Œå¼€å¯/é”€æ¯è¿‡é‡çš„å·¥ä½œçº¿ç¨‹ä¼šé€ æˆè¿‡é‡çš„èµ„æºæŸè€—ï¼Œè¿™ç§åœºæ™¯æˆ‘ä»¬ä¸€èˆ¬ä¼šé€šè¿‡å¯¹èµ„æºçš„å¤ç”¨æ¥è¿›è¡Œä¼˜åŒ–ï¼Œé’ˆå¯¹IOèµ„æºæˆ‘ä»¬ä¼šåšIOå¤ç”¨ï¼ˆä¾‹å¦‚Httpçš„KeepAliveï¼‰ï¼Œé’ˆå¯¹å†…å­˜æˆ‘ä»¬ä¼šåšå†…å­˜æ± å¤ç”¨ï¼ˆä¾‹å¦‚Frescoçš„å†…å­˜æ± ï¼‰ï¼Œé’ˆå¯¹CPUèµ„æºï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåšçº¿ç¨‹å¤ç”¨ï¼Œä¹Ÿå°±æ˜¯çº¿ç¨‹æ± ã€‚æ‰€ä»¥ï¼Œåœ¨Androidå¼€å‘ä¸­ï¼Œä¸€èˆ¬ä¸ä¼šç›´æŽ¥å¼€å¯å¤§é‡çš„Threadï¼Œè€Œæ˜¯ä¼šä½¿ç”¨ThreadPoolæ¥å¤ç”¨çº¿ç¨‹ã€‚ RunnableRunnableä¸»è¦è§£å†³å¦‚ä½•å®šä¹‰æ¯ä¸ªçº¿ç¨‹çš„å·¥ä½œä»»åŠ¡çš„é—®é¢˜ã€‚Runnableæ˜¯Javaä¸­å®žçŽ°å¤šçº¿ç¨‹çš„æŽ¥å£ï¼Œç›¸å¯¹Threadè€Œè¨€ï¼ŒRunnableæŽ¥å£æ›´å®¹æ˜“æ‰©å±•ï¼ˆä¸éœ€è¦å•ç»§æ‰¿ï¼‰ï¼Œè€Œä¸”ï¼ŒThreadæœ¬èº«ä¹Ÿæ˜¯ä¸€ç§Runnableï¼š 1public class Thread implements Runnable &#123; ç›¸æ¯”Threadè€Œè¨€ï¼ŒRunnableä¸å…³æ³¨å¦‚ä½•è°ƒåº¦çº¿ç¨‹ï¼Œåªå…³å¿ƒå¦‚ä½•å®šä¹‰è¦æ‰§è¡Œçš„å·¥ä½œä»»åŠ¡ï¼Œæ‰€ä»¥åœ¨å®žé™…å¼€å‘ä¸­ï¼Œå¤šä½¿ç”¨RunnableæŽ¥å£å®Œæˆå¤šçº¿ç¨‹å¼€å‘ã€‚ CallableCallableå’ŒRunnableåŸºæœ¬ç±»ä¼¼ï¼Œä½†æ˜¯Callableå¯ä»¥è¿”å›žæ‰§è¡Œç»“æžœã€‚ çº¿ç¨‹é—´é€šä¿¡Threadå’ŒRunnableèƒ½å®žçŽ°åˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹å·¥ä½œï¼ˆRunnableéœ€è¦é¢å¤–æŒ‡æ´¾å·¥ä½œçº¿ç¨‹ï¼‰ï¼Œä½†å®ƒä»¬å®Œæˆä»»åŠ¡åŽå°±ä¼šé€€å‡ºï¼Œå¹¶ä¸æ³¨é‡å¦‚ä½•åœ¨çº¿ç¨‹é—´å®žçŽ°é€šä¿¡ï¼Œæ‰€ä»¥åˆ‡æ¢çº¿ç¨‹æ—¶ï¼Œè¿˜éœ€è¦åœ¨çº¿ç¨‹é—´é€šä¿¡ï¼Œè¿™å°±éœ€è¦ä¸€äº›çº¿ç¨‹é—´é€šä¿¡æœºåˆ¶ã€‚ Futureä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æžœè¦åšç®€å•çš„é€šä¿¡ï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„æ˜¯é€šè¿‡æŽ¥å£å›žè°ƒæ¥å®žçŽ°ã€‚Futureå°±æ˜¯è¿™æ ·ä¸€ç§æŽ¥å£ï¼Œå®ƒå¯ä»¥éƒ¨åˆ†åœ°è§£å†³çº¿ç¨‹é€šä¿¡çš„é—®é¢˜ï¼ŒFutureæŽ¥å£å®šä¹‰äº†doneã€canceledç­‰å›žè°ƒå‡½æ•°ï¼Œå½“å·¥ä½œçº¿ç¨‹çš„ä»»åŠ¡å®Œæˆæ—¶ï¼Œå®ƒä¼šï¼ˆåœ¨å·¥ä½œçº¿ç¨‹ä¸­ï¼‰é€šè¿‡å›žè°ƒå‘ŠçŸ¥æˆ‘ä»¬ï¼Œæˆ‘ä»¬å†é‡‡ç”¨å…¶ä»–æ‰‹æ®µé€šçŸ¥å…¶ä»–çº¿ç¨‹ã€‚ 123456mFuture = new FutureTask&lt;MyBizClass&gt;(runnable) &#123; @Override protected void done() &#123; ...//è¿˜æ˜¯åœ¨å·¥ä½œçº¿ç¨‹é‡Œ &#125;&#125;; ConditionConditionå…¶å®žæ˜¯å’ŒLockä¸€èµ·ä½¿ç”¨çš„ï¼Œä½†å¦‚æžœæŠŠå®ƒè§†ä¸ºä¸€ç§çº¿ç¨‹é—´é€šä¿¡çš„å·¥å…·ï¼Œä¹Ÿè¯´çš„é€šã€‚å› ä¸ºï¼ŒConditionæœ¬èº«å®šä½å°±æ˜¯ä¸€ç§å¤šçº¿ç¨‹é—´åè°ƒé€šä¿¡çš„å·¥å…·ï¼ŒConditionå¯ä»¥åœ¨æŸäº›æ¡ä»¶ä¸‹ï¼Œå”¤é†’ç­‰å¾…çº¿ç¨‹ã€‚ 1234567 Lock lock = new ReentrantLock(); Condition notFull = lock.newCondition(); //å®šä¹‰Lockçš„Condition... while (count == items.length) notFull.await();//ç­‰å¾…conditionçš„çŠ¶æ€... notFull.signal();//è¾¾åˆ°conditionçš„çŠ¶æ€ Handlerå…¶å®žï¼Œæœ€å®Œæ•´çš„çº¿ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„çº¿ç¨‹é—´é€šä¿¡æœºåˆ¶ï¼ŒèŽ«è¿‡äºŽHandleré€šä¿¡æœºåˆ¶ï¼ŒHandleråˆ©ç”¨çº¿ç¨‹å°é—­çš„ThreadLocalç»´æŒä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼ŒHandlerçš„æ ¸å¿ƒæ˜¯é€šè¿‡è¿™ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ¥ä¼ é€’Messageï¼Œä»Žè€Œå®žçŽ°çº¿ç¨‹é—´é€šä¿¡ã€‚ AsyncTaskçš„å¤šçº¿ç¨‹åˆ‡æ¢å›žé¡¾å®Œå¤šçº¿ç¨‹çš„å‡ ä¸ªåŸºç¡€æ¦‚å¿µï¼Œå…ˆæ¥çœ‹çœ‹ç®€å•çš„å¤šçº¿ç¨‹åˆ‡æ¢ï¼ŒAndroidè‡ªå¸¦çš„AsyncTaskã€‚AsyncTaskä¸»è¦åœ¨doInBackgroundå‡½æ•°ä¸­å®šä¹‰å·¥ä½œçº¿ç¨‹çš„å·¥ä½œå†…å®¹ï¼Œåœ¨å…¶ä»–å‡½æ•°ä¸­å®šä¹‰ä¸»çº¿ç¨‹çš„å·¥ä½œå†…å®¹ï¼Œä¾‹å¦‚onPostExecuteï¼Œè¿™é‡Œé¢å¿…ç„¶æ¶‰åŠä¸¤ä¸ªé—®é¢˜ï¼š1.å¦‚ä½•å®žçŽ°æŠŠdoInBackgroundæŠ›ç»™å·¥ä½œçº¿ç¨‹2.å¦‚ä½•å®žçŽ°æŠŠonPostExecuteæŠ›ç»™ä¸»çº¿ç¨‹å…¶å®žéžå¸¸ç®€å•ï¼Œæˆ‘ä»¬å…ˆçœ‹ç¬¬ä¸€ä¸ª 1.å¦‚ä½•å®žçŽ°æŠŠdoInBackgroundæŠ›ç»™å·¥ä½œçº¿ç¨‹åœ¨ä½¿ç”¨AsyncTaskæ—¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåˆ›å»ºä¸€ä¸ªåŸºäºŽAsyncTaskçš„æ‰©å±•ç±»æˆ–åŒ¿åç±»ï¼Œåœ¨å…¶ä¸­å®žçŽ°å‡ ä¸ªæŠ½è±¡å‡½æ•°ï¼Œä¾‹å¦‚ï¼š 1234567891011private class MyTask extends AsyncTask&lt;String, Object, Long&gt; &#123; @Override protected void onPreExecute() &#123;... &#125; @Override protected Long doInBackground(String... params) &#123;... &#125; @Override protected void onProgressUpdate(Object... values) &#123;... &#125; @Override protected void onPostExecute(Long aLong) &#123;... &#125; @Override protected void onCancelled() &#123;... &#125; ç„¶åŽï¼Œæˆ‘ä»¬ä¼šå®žä¾‹åŒ–è¿™ä¸ªAsyncTaskï¼š 1MyTask mTask = new MyTask(); åœ¨AsyncTaskæºç ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œæž„é€ å‡½æ•°é‡Œä¼šåˆ›å»ºä¸€ä¸ªWorkerRunnableï¼š 123456public AsyncTask() &#123; mWorker = new WorkerRunnable&lt;Params, Result&gt;() &#123;//è¿™æ˜¯ä¸€ä¸ªCallable public Result call() throws Exception &#123; ... result = doInBackground(mParams);//åœ¨å·¥ä½œçº¿ç¨‹ä¸­æ‰§è¡Œ ... WorkerRunnableå®žé™…ä¸Šæ˜¯ä¸€ä¸ªCallableå¯¹è±¡ï¼Œæ‰€ä»¥ï¼ŒdoInBackgroundæ˜¯è¢«åŒ…åœ¨ä¸€ä¸ªCallableå¯¹è±¡ä¸­äº†ï¼Œè¿™ä¸ªCallableè¿˜ä¼šè¢«ç»§ç»­åŒ…è£…ï¼Œæœ€ç»ˆè¢«äº¤ç»™ä¸€ä¸ªçº¿ç¨‹æ± åŽ»æ‰§è¡Œï¼š 12345Runnable mActive;...if ((mActive = mTasks.poll()) != null) &#123; THREAD_POOL_EXECUTOR.execute(mActive);//äº¤ç»™çº¿ç¨‹æ± æ‰§è¡Œ&#125; æ¢³ç†ä¸€ä¸‹ï¼Œå¤§è‡´è¿‡ç¨‹ä¸ºï¼šå®šä¹‰doInBackgroundâ€“&gt;è¢«ä¸€ä¸ªCallableè°ƒç”¨â€“&gt;å±‚å±‚åŒ…ä¸ºä¸€ä¸ªRunnableâ€“&gt;äº¤ç»™çº¿ç¨‹æ± æ‰§è¡Œã€‚è¿™æ ·å°±è§£å†³äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å®žçŽ°æŠŠdoInBackgroundæŠ›ç»™å·¥ä½œçº¿ç¨‹ã€‚æˆ‘ä»¬å†æ¥çœ‹ç¬¬äºŒä¸ªé—®é¢˜ã€‚ 2.å¦‚ä½•å®žçŽ°æŠŠonPostExecuteæŠ›ç»™ä¸»çº¿ç¨‹é¦–å…ˆï¼Œæˆ‘ä»¬è¦çŸ¥é“å·¥ä½œä»»åŠ¡ä½•æ—¶æ‰§è¡Œå®Œæ¯•ï¼Œå°±éœ€è¦åœ¨å·¥ä½œå®Œæˆæ—¶è§¦å‘ä¸€ä¸ªæŽ¥å£å›žè°ƒï¼Œä¹Ÿå°±æ˜¯å‰é¢è¯´è¿‡çš„Futureï¼Œè¿˜æ˜¯çœ‹AsyncTaskæºç ï¼š 123456789101112131415public AsyncTask() &#123; mWorker = new WorkerRunnable&lt;Params, Result&gt;() &#123; public Result call() throws Exception &#123; ... &#125;; mFuture = new FutureTask&lt;Result&gt;(mWorker) &#123; @Override protected void done() &#123;//Futureçš„å›žè°ƒ try &#123; postResultIfNotInvoked(get());//get()æ˜¯FutureTaskæŽ¥å£å‡½æ•° ... &#125; &#125;; &#125; è¿™æ ·ï¼Œæˆ‘ä»¬å°±çŸ¥é“å¯ä»¥å¤„ç†onPostExecuteå‡½æ•°äº†ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æŠŠå®ƒæŠ›ç»™ä¸»çº¿ç¨‹ï¼Œä¸»è¦æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132//mWorkerã€mFutureå’Œéƒ½ä¼šæŒ‡å‘postResultå‡½æ•°private Result postResult(Result result) &#123; @SuppressWarnings("unchecked") Message message = getHandler().obtainMessage(MESSAGE_POST_RESULT, new AsyncTaskResult&lt;Result&gt;(this, result)); message.sendToTarget(); return result;&#125;//getHandler()ä¼šæŒ‡å‘InternalHandlerprivate static class InternalHandler extends Handler &#123; public InternalHandler() &#123; super(Looper.getMainLooper());//æŒ‡å‘MainLooper &#125; @SuppressWarnings(&#123;"unchecked", "RawUseOfParameterizedType"&#125;) @Override public void handleMessage(Message msg) &#123; AsyncTaskResult&lt;?&gt; result = (AsyncTaskResult&lt;?&gt;) msg.obj; switch (msg.what) &#123; case MESSAGE_POST_RESULT: // There is only one result result.mTask.finish(result.mData[0]);//é€šè¿‡handleræœºåˆ¶ï¼Œå›žåˆ°ä¸»çº¿ç¨‹ï¼Œè°ƒç”¨finishå‡½æ•° ...&#125;//åœ¨Handlerä¸­ï¼Œæœ€ç»ˆä¼šåœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨finishprivate void finish(Result result) &#123; if (isCancelled()) &#123; onCancelled(result); &#125; else &#123; onPostExecute(result);//è°ƒç”¨onPostExecuteæŽ¥å£å‡½æ•° &#125; mStatus = Status.FINISHED;&#125; ä»Žæºç å¯ä»¥çœ‹åˆ°ï¼Œå…¶å®žAsyncTaskè¿˜æ˜¯é€šè¿‡Handleræœºåˆ¶ï¼ŒæŠŠä»»åŠ¡æŠ›ç»™äº†ä¸»çº¿ç¨‹ã€‚ æ€»ä½“æ¥è¯´ï¼ŒAsyncTaskçš„å¤šçº¿ç¨‹ä»»åŠ¡æ˜¯é€šè¿‡çº¿ç¨‹æ± å®žçŽ°çš„å·¥ä½œçº¿ç¨‹ï¼Œåœ¨å®Œæˆä»»åŠ¡åŽåˆ©ç”¨Futureçš„doneå›žè°ƒæ¥é€šçŸ¥ä»»åŠ¡å®Œæˆï¼Œå¹¶é€šè¿‡handleræœºåˆ¶é€šçŸ¥ä¸»çº¿ç¨‹åŽ»æ‰§è¡ŒonPostExecuteç­‰å›žè°ƒå‡½æ•°ã€‚ EventBusçš„å¤šçº¿ç¨‹åˆ‡æ¢EventBusä¼šä¸ºæ¯ä¸ªè®¢é˜…äº‹ä»¶æ³¨å†Œä¸€ä¸ªç›®æ ‡çº¿ç¨‹ï¼Œæ‰€ä»¥éœ€è¦ä»Žå‘å¸ƒäº‹ä»¶çš„çº¿ç¨‹ä¸­ï¼Œæ ¹æ®æ³¨å†Œä¿¡æ¯ï¼Œå®žæ—¶åˆ‡æ¢åˆ°ç›®æ ‡çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥ï¼Œè¿™æ˜¯ä¸ªå¾ˆå…¸åž‹çš„å¤šçº¿ç¨‹åˆ‡æ¢åœºæ™¯ã€‚æ ¹æ®EventBusæºç ï¼Œå¤šçº¿ç¨‹åˆ‡æ¢çš„ä¸»è¦åˆ¤æ–­ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324switch (subscription.subscriberMethod.threadMode) &#123; case POSTING: invokeSubscriber(subscription, event);//ç›´æŽ¥åœ¨å½“å‰çº¿ç¨‹æ‰§è¡Œ break; case MAIN: if (isMainThread) &#123; invokeSubscriber(subscription, event);//åœ¨å½“å‰ä¸»çº¿ç¨‹æ‰§è¡Œ &#125; else &#123; mainThreadPoster.enqueue(subscription, event);//å½“ç„¶ä¸æ˜¯ä¸»çº¿ç¨‹ï¼Œäº¤ç»™ä¸»çº¿ç¨‹æ‰§è¡Œ &#125; break; case BACKGROUND: if (isMainThread) &#123; backgroundPoster.enqueue(subscription, event);//å½“å‰çº¿ç¨‹ä¸ºä¸»çº¿ç¨‹ï¼Œäº¤ç»™å·¥ä½œçº¿ç¨‹ &#125; else &#123; invokeSubscriber(subscription, event);//ç›´æŽ¥åœ¨å½“å‰å·¥ä½œçº¿ç¨‹æ‰§è¡Œ &#125; break; case ASYNC: asyncPoster.enqueue(subscription, event);//å¼‚æ­¥æ‰§è¡Œ break; default: throw new IllegalStateException("Unknown thread mode: " + subscription.subscriberMethod.threadMode);&#125; æ‰€ä»¥ï¼Œåœ¨EventBusé‡Œï¼Œå¦‚æžœéœ€è¦åšçº¿ç¨‹é—´åˆ‡æ¢ï¼Œä¸»è¦æ˜¯æŠ›ç»™ä¸åŒçš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®žçŽ°çº¿ç¨‹é—´åˆ‡æ¢ã€‚ä»Žä»»åŠ¡é˜Ÿåˆ—åˆ¤æ–­ï¼Œåˆ‡æ¢ç›®æ ‡åŒ…æ‹¬ä¸»çº¿ç¨‹Posterã€backgroundPosterå’ŒasyncPosterè¿™æ ·ä¸‰ç§ã€‚æˆ‘ä»¬å…ˆçœ‹ä»»åŠ¡é˜Ÿåˆ—çš„è®¾è®¡ï¼š ä»»åŠ¡é˜Ÿåˆ—å› ä¸ºEventBusä¸èƒ½åˆ¤æ–­æœ‰å“ªäº›ä»»åŠ¡ä¼šå¹¶è¡Œï¼Œæ‰€ä»¥å®ƒé‡‡ç”¨äº†é˜Ÿåˆ—çš„è®¾è®¡ï¼Œå¤šçº¿ç¨‹ä»»åŠ¡ï¼ˆEventBusçš„äº‹ä»¶ï¼‰ä¼šå…ˆè¿›å…¥é˜Ÿåˆ—ï¼Œç„¶åŽå†å¤„ç†é˜Ÿåˆ—ä¸­çš„å·¥ä½œä»»åŠ¡ï¼Œè¿™æ˜¯å…¸åž‹çš„ç”Ÿäº§â€“æ¶ˆè´¹åœºæ™¯ã€‚ä¸»çº¿ç¨‹Posterã€backgroundPosterå’ŒasyncPosteréƒ½æ˜¯ä»»åŠ¡é˜Ÿåˆ—çš„ä¸åŒå®žçŽ°ã€‚ ä¸»çº¿ç¨‹Posterè´Ÿè´£å¤„ç†ä¸»çº¿ç¨‹çš„mainThreadPosteræ˜¯Handlerçš„å­ç±»ï¼š 1234567891011121314final class HandlerPoster extends Handler &#123;... void enqueue(Subscription subscription, Object event) &#123; ... synchronized (this) &#123;//å› ä¸ºä¸»çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œéœ€è¦çº¿ç¨‹å®‰å…¨ queue.enqueue(pendingPost); ... if (!sendMessage(obtainMessage())) &#123;//ä½œä¸ºhandlerå‘é€æ¶ˆæ¯ ... //åœ¨ä¸»çº¿ç¨‹ä¸­å¤„ç†æ¶ˆæ¯ @Override public void handleMessage(Message msg) &#123; ...&#125; ä»Žæºç å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªPosterå…¶å®žæ˜¯ä¸€ä¸ªHandlerï¼Œå®ƒé‡‡ç”¨äº†å“ªä¸ªçº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå°±å†³å®šäº†å®ƒèƒ½å’Œå“ªä¸ªçº¿ç¨‹é€šä¿¡ï¼Œæˆ‘ä»¬ç¡®è®¤ä¸€ä¸‹ï¼š 123EventBus(EventBusBuilder builder) &#123; ... mainThreadPoster = new HandlerPoster(this, Looper.getMainLooper(), 10);//èŽ·å–ä¸»çº¿ç¨‹çš„MainLooper æ‰€ä»¥ï¼ŒEventBusæ˜¯æ‰©å±•äº†ä¸€ä¸ªHandlerï¼Œä½œä¸ºä¸»çº¿ç¨‹çš„Handlerï¼Œé€šè¿‡Handleræ¶ˆæ¯æœºåˆ¶å®žçŽ°çš„å¤šçº¿ç¨‹åˆ‡æ¢ã€‚å½“ç„¶ï¼Œè¿™ä¸ªHandleræœ¬äº‹ï¼Œåˆå¤šäº†ä¸€å±‚queueã€‚ backgroundPosterå’ŒasyncPosterbackgroundPosterå’ŒasyncPosterå…¶å®žéƒ½æ˜¯ä½¿ç”¨äº†EventBusçš„çº¿ç¨‹æ± ï¼Œé»˜è®¤æ˜¯ä¸ªç¼“å­˜çº¿ç¨‹æ± ï¼š 1private final static ExecutorService DEFAULT_EXECUTOR_SERVICE = Executors.newCachedThreadPool(); æ‰€ä»¥ï¼ŒbackgroundPosterå’ŒasyncPosteréƒ½æ˜¯æŠŠä»»åŠ¡äº¤ç»™çº¿ç¨‹æ± å¤„ç†ï¼Œè¿™æ ·å®žçŽ°çš„å¤šçº¿ç¨‹åˆ‡æ¢ã€‚ä¸è¿‡ï¼ŒbackgroundPosterå’ŒasyncPosterä¹Ÿæœ‰ä¸€äº›ä¸åŒï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨newCachedThreadPoolä¸­ï¼Œæœ€å¤§çº¿ç¨‹æ•°å°±æ˜¯Integerçš„æœ€å¤§å€¼ï¼Œç›¸å½“äºŽä¸è®¾ä¸Šé™ï¼Œæ‰€ä»¥å¯ä»¥å°½å¯èƒ½å¤šçš„å¯åŠ¨çº¿ç¨‹ï¼ŒasyncPosterå°±æ˜¯è¿™æ ·åšçš„ï¼Œenqueuå’Œrunéƒ½æ²¡åšåŒæ­¥ï¼Œä¸ºæ¯ä¸ªäº‹ä»¶å•ç‹¬å¼€å¯æ–°çº¿ç¨‹å¤„ç†ã€‚è€Œåœ¨backgroundPosterä¸­ï¼Œå¯ä»¥å°½é‡å¤ç”¨çº¿ç¨‹ï¼Œä¸»è¦æ–¹æ³•æ˜¯åœ¨runçš„æ—¶å€™ï¼Œåšä¸ª1ç§’çš„ç­‰å¾…ï¼š 1234@Overridepublic void run() &#123; ... PendingPost pendingPost = queue.poll(1000);//å…è®¸ç­‰å¾…1ç§’ å› ä¸ºåšäº†è¿™ä¸€ç§’çš„æŒ‚èµ·ç­‰å¾…ï¼Œåœ¨enqueueå’Œrunæ—¶ï¼Œéƒ½éœ€è¦ç”¨synchronized (this) æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚ å¦å¤–ï¼Œå…¶å®žè¿™é‡Œé¢è¿˜æœ‰ä¸ªå¾ˆé‡è¦çš„ç”¨æ³•ï¼Œå°±æ˜¯Executors.newCachedThreadPool()ä¸­çš„SynchronousQueueï¼š 12345public static ExecutorService newCachedThreadPool() &#123; return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;());//ç”¨äºŽè¾…åŠ©çº¿ç¨‹åˆ‡æ¢çš„é˜»å¡žé˜Ÿåˆ—&#125; è¿™ä¸ªSynchronousQueueï¼Œåœ¨OkHttpä¸­ä¹Ÿä½¿ç”¨äº†ï¼š 12345678//okhttp3.Dispatcheræºç public synchronized ExecutorService executorService() &#123; if (executorService == null) &#123; executorService = new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;(), Util.threadFactory("OkHttp Dispatcher", false));//ç”¨äºŽè¾…åŠ©çº¿ç¨‹åˆ‡æ¢çš„é˜»å¡žé˜Ÿåˆ— &#125; return executorService;&#125; SynchronousQueueä¸Žæ™®é€šé˜Ÿåˆ—ä¸åŒï¼Œä¸æ˜¯æ•°æ®ç­‰çº¿ç¨‹ï¼Œè€Œæ˜¯çº¿ç¨‹ç­‰æ•°æ®ï¼Œè¿™æ ·æ¯æ¬¡å‘SynchronousQueueé‡Œä¼ å…¥æ•°æ®æ—¶ï¼Œéƒ½ä¼šç«‹å³äº¤ç»™ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥æé«˜æ•°æ®å¾—åˆ°å¤„ç†çš„é€Ÿåº¦ã€‚ æ€»çš„æ¥çœ‹ï¼ŒEventBusè¿˜æ˜¯é‡‡ç”¨çº¿ç¨‹æ± å®žçŽ°å·¥ä½œçº¿ç¨‹ï¼Œé‡‡ç”¨handleræœºåˆ¶é€šçŸ¥åˆ°ä¸»çº¿ç¨‹ã€‚ä¸åŒåœ¨äºŽï¼Œå®ƒé‡‡ç”¨çš„queueçš„é˜Ÿåˆ—æ–¹å¼æ¥ç®¡ç†æ‰€æœ‰çš„è·¨çº¿ç¨‹è¯·æ±‚ï¼Œè€Œä¸”å®ƒåˆ©ç”¨äº†SynchronousQueueé˜»å¡žé˜Ÿåˆ—æ¥è¾…åŠ©å®žçŽ°çº¿ç¨‹åˆ‡æ¢ã€‚ RxJavaçš„å¤šçº¿ç¨‹åˆ‡æ¢å…¶å®žåœ¨å¤šçº¿ç¨‹ç®¡ç†è¿™æ–¹é¢ï¼ŒRxJavaçš„çº¿ç¨‹ç®¡ç†èƒ½åŠ›æ˜¯éžå¸¸ä»¤äººèµžå¹çš„ã€‚RxJavaçš„ä¸»è¦æ¦‚å¿µæ˜¯å·¥ä½œæµï¼Œå®ƒå¯ä»¥æŠŠä¸€åºåˆ—å·¥ä½œæµå®šä¹‰åœ¨ä¸€ä¸ªçº¿ç¨‹ç±»åž‹ä¸Šï¼š 123myWorkFlow.getActResponse(myParam) .subscribeOn(Schedulers.io())//æŒ‡å®šçº¿ç¨‹ .xxx//å…¶ä»–æ“ä½œ è¿™ä¸ªæž„å»ºå·¥ä½œæµçš„è¿‡ç¨‹å…¶å®žæŒºå¤æ‚çš„ï¼Œä¸è¿‡å¦‚æžœæˆ‘ä»¬åªçœ‹çº¿ç¨‹æ“ä½œè¿™éƒ¨åˆ†ï¼Œå…¶å®žæµç¨‹éžå¸¸æ¸…æ™°ï¼Œæˆ‘ä»¬è¿½è¸ªä¸€ä¸‹subscribeOnçš„æºç ï¼ˆRxJava2ï¼‰ï¼š 12345678910//è¿›å…¥subscribeOnpublic final Flowable&lt;T&gt; subscribeOn(@NonNull Scheduler scheduler) &#123; ObjectHelper.requireNonNull(scheduler, "scheduler is null"); return subscribeOn(scheduler, !(this instanceof FlowableCreate));&#125;//ç»§ç»­è¿›å…¥subscribeOnpublic final Flowable&lt;T&gt; subscribeOn(@NonNull Scheduler scheduler, boolean requestOn) &#123; ObjectHelper.requireNonNull(scheduler, "scheduler is null"); return RxJavaPlugins.onAssembly(new FlowableSubscribeOn&lt;T&gt;(this, scheduler, requestOn));&#125; ç„¶åŽï¼Œè¿›å…¥FlowableSubscribeOnç±» 1234567891011121314//è¿›å…¥FlowableSubscribeOnç±» public FlowableSubscribeOn(Flowable&lt;T&gt; source, Scheduler scheduler, boolean nonScheduledRequests) &#123; ... this.scheduler = scheduler; ...&#125;@Overridepublic void subscribeActual(final Subscriber&lt;? super T&gt; s) &#123; Scheduler.Worker w = scheduler.createWorker();//æ ¹æ®å‚æ•°å€¼ï¼Œå¦‚Schedulers.io()åˆ›å»ºworker final SubscribeOnSubscriber&lt;T&gt; sos = new SubscribeOnSubscriber&lt;T&gt;(s, w, source, nonScheduledRequests);//æ ¹æ®workeråˆ›å»ºSubscribeOnSubscriber s.onSubscribe(sos); w.schedule(sos);&#125; è¿™ä¸ªSubscribeOnSubscriberæ˜¯ä¸ªå†…éƒ¨ç±»ï¼š 1234567891011 SubscribeOnSubscriber(Subscriber&lt;? super T&gt; actual, Scheduler.Worker worker, Publisher&lt;T&gt; source, boolean requestOn) &#123; ... this.worker = worker; ... &#125;... void requestUpstream(final long n, final Subscription s) &#123; ... worker.schedule(new Request(s, n));//workerä¼šå®‰æŽ’å¦‚ä½•æ‰§è¡Œrunnableï¼ˆRequestæ˜¯ä¸€ä¸ªrunnableï¼‰ ... &#125; è€Œè¿™ä¸ªworkerï¼Œå…¶å®žå°±æ˜¯æˆ‘ä»¬è¾“å…¥çš„çº¿ç¨‹å‚æ•°ï¼Œå¦‚Schedulers.io()ï¼Œè¿™ä¸ªioæ˜¯è¿™æ ·å®šä¹‰çš„ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556//io.reactivex.schedulers.Schedulersæºç  static &#123; SINGLE = RxJavaPlugins.initSingleScheduler(new SingleTask()); COMPUTATION = RxJavaPlugins.initComputationScheduler(new ComputationTask()); IO = RxJavaPlugins.initIoScheduler(new IOTask()); TRAMPOLINE = TrampolineScheduler.instance(); NEW_THREAD = RxJavaPlugins.initNewThreadScheduler(new NewThreadTask()); &#125;... static final class IOTask implements Callable&lt;Scheduler&gt; &#123; @Override public Scheduler call() throws Exception &#123; return IoHolder.DEFAULT; &#125; &#125; static final class NewThreadTask implements Callable&lt;Scheduler&gt; &#123; @Override public Scheduler call() throws Exception &#123; return NewThreadHolder.DEFAULT; &#125; &#125; static final class SingleTask implements Callable&lt;Scheduler&gt; &#123; @Override public Scheduler call() throws Exception &#123; return SingleHolder.DEFAULT; &#125; &#125; static final class ComputationTask implements Callable&lt;Scheduler&gt; &#123; @Override public Scheduler call() throws Exception &#123; return ComputationHolder.DEFAULT; &#125; &#125;... static final class SingleHolder &#123; static final Scheduler DEFAULT = new SingleScheduler(); &#125; static final class ComputationHolder &#123; static final Scheduler DEFAULT = new ComputationScheduler(); &#125; static final class IoHolder &#123; static final Scheduler DEFAULT = new IoScheduler(); &#125; static final class NewThreadHolder &#123; static final Scheduler DEFAULT = new NewThreadScheduler(); &#125; è¿™é‡Œçš„IOï¼Œæœ€ç»ˆä¼šæŒ‡å‘ä¸€ä¸ªSchedulerï¼Œå¦‚IoSchedulerï¼š 1234567891011121314//io.reactivex.internal.schedulers.IoScheduleræºç ... static final class EventLoopWorker extends Scheduler.Worker &#123;//Scheduler.Workerçš„å®žçŽ°ç±» ... @NonNull @Override public Disposable schedule(@NonNull Runnable action, long delayTime, @NonNull TimeUnit unit) &#123; if (tasks.isDisposed()) &#123; // don't schedule, we are unsubscribed return EmptyDisposable.INSTANCE; &#125; return threadWorker.scheduleActual(action, delayTime, unit, tasks);//äº¤ç»™çº¿ç¨‹æ±  &#125; è¿™æ ·ï¼ŒScheculerä¸­çš„å…·ä½“ä»»åŠ¡å°±äº¤ç»™äº†æŸä¸ªçº¿ç¨‹æ± æ¥å¤„ç†ã€‚ éœ€è¦ç‰¹åˆ«è¯´æ˜Žçš„æ˜¯ï¼ŒRxJavaä¸­è°ƒç”¨Androidä¸»çº¿ç¨‹(AndroidSchedulers.mainThread)ï¼Œå…¶å®žè¿˜æ˜¯ä½¿ç”¨äº†Handleræœºåˆ¶ï¼š 123public final class AndroidSchedulers &#123; ... static final Scheduler DEFAULT = new HandlerScheduler(new Handler(Looper.getMainLooper())); è¿™ä¸ªHandlerSchedulerå…¶å®žå°±æ˜¯å®žçŽ°äº†Schedulerå’ŒScheduler.Workerå†…éƒ¨ç±»ã€‚ 123456789101112final class HandlerScheduler extends Scheduler &#123;private final Handler handler;HandlerScheduler(Handler handler) &#123; this.handler = handler;&#125;private static final class HandlerWorker extends Worker &#123; ... @Override public Disposable schedule(Runnable run, long delay, TimeUnit unit) &#123; ... handler.sendMessageDelayed(message, Math.max(0L, unit.toMillis(delay))); æ€»çš„æ¥çœ‹ï¼ŒRxJavaçš„å¤šçº¿ç¨‹åˆ‡æ¢å…¶å®žæ˜¯åˆ©ç”¨äº†Scheculer.Workerè¿™ä¸ªå†…éƒ¨ç±»ï¼ŒæŠŠä»»åŠ¡äº¤ç»™Scheculerçš„WorkeråŽ»åšï¼Œè€Œè¿™ä¸ªScheculerçš„Workeræ˜¯æ ¹æ®å®šä¹‰çš„çº¿ç¨‹æ¥å®žçŽ°äº†ä¸åŒçš„çº¿ç¨‹æ± ï¼Œå…¶å®žè¿˜æ˜¯äº¤ç»™çº¿ç¨‹æ± åŽ»å¤„ç†äº†ã€‚è‡³äºŽä¸»çº¿ç¨‹ï¼ŒRxJavaä¹Ÿæ˜¯ä½¿ç”¨äº†Handleræœºåˆ¶ã€‚ æ€»ç»“å°å°æ€»ç»“ä¸€ä¸‹ï¼ŒåŸºæœ¬ä¸Šæ¥è¯´ï¼ŒAndroidä¸­çš„å¤šçº¿ç¨‹åˆ‡æ¢ï¼Œä¸»è¦ä½¿ç”¨Runnableå’ŒCallableæ¥å®šä¹‰å·¥ä½œå†…å®¹ï¼Œä½¿ç”¨çº¿ç¨‹æ± æ¥å®žçŽ°å¼‚æ­¥å¹¶è¡Œï¼Œä½¿ç”¨Handleræœºåˆ¶æ¥é€šçŸ¥ä¸»çº¿ç¨‹ï¼Œæœ‰äº›åœºæ™¯ä¸‹ä¼šè§†æƒ…å†µéœ€è¦ï¼Œä½¿ç”¨Futureçš„æŽ¥å£å›žè°ƒï¼Œä½¿ç”¨SynchronousQueueé˜»å¡žé˜Ÿåˆ—ç­‰ã€‚ åŽŸæ–‡é“¾æŽ¥ï¼šmp.weixin.qq.com]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Androidçè—ã€‘æŽ¨è10ä¸ªç‚«é…·çš„å¼€æºåº“]]></title>
    <url>%2Fposts%2F78b41fa0.html</url>
    <content type="text"><![CDATA[å‰è¨€æŠ€æœ¯ç¾¤é‡Œé¢ç»å¸¸æœ‰äººé—®åˆ°ä¸€äº›ç‚«é…·çš„UIæ•ˆæžœå®žçŽ°æ–¹æ³•ï¼Œæœ‰æ—¶å€™æˆ‘éƒ½æ˜¯ç»™ä¸€ä¸ªç›¸åŒæˆ–è€…ç›¸ä¼¼æ•ˆæžœçš„Githubé“¾æŽ¥ï¼Œæœ‰åŒå­¦ç§ä¿¡ç»™æˆ‘è¯´ï¼Œå¤§ä½¬ï¼Œæ€Žä¹ˆè¿™äº›æ•ˆæžœä½ éƒ½èƒ½æ‰¾åˆ°ï¼Ÿä½ æ˜¯æ€Žä¹ˆæœç´¢çš„ï¼Œæˆ–è€…æœ‰å…¶ä»–ä»€ä¹ˆç§˜æ–¹ï¼Ÿä¼šåˆ©ç”¨Googleã€ç™¾åº¦ç­‰æœç´¢å·¥å…·æœç´¢æ˜¯ä¸€æ–¹é¢ï¼Œå¦ä¸€ä¸ªé‡è¦çš„æ–¹é¢æ˜¯ï¼šè®°å½•æœè—ï¼Œå½“çœ‹åˆ°ä¸€ä¸ªç‚«é…·çš„æ•ˆæžœçš„æ—¶å€™ï¼Œè®°å¾—æ”¶è—èµ·æ¥ï¼Œè®°å½•åˆ°è‡ªå·±äº‘ç¬”è®°æˆ–è€…æ”¶è—å¤¹é‡Œï¼Œçœ‹å¾—å¤šäº†ï¼Œå°è±¡å°±æ¯”è¾ƒæ·±åˆ»ï¼Œå½“é‡åˆ°ç±»ä¼¼æ•ˆæžœçš„æ—¶å€™ï¼Œåˆ°è‡ªå·±è®°å½•æ”¶è—çš„åœ°æ–¹æ‰¾å°±æ˜¯äº†ã€‚ä»Šå¤©ä¸ºå¤§å®¶æŽ¨èæˆ‘æ‰€æ”¶è—çš„ä¸€äº›ç‚«é…·å®žç”¨çš„æ•ˆæžœçš„å¼€æºåº“ï¼ˆé€‰æ‹©å…¶ä¸­10ä¸ªï¼‰ã€‚ 1ã€ DiscreteScrollViewç®€ä»‹ï¼š DiscreteScrollViewæ˜¯åŸºäºŽRecyclerView å®žçŽ°çš„ä¸€ä¸ªæ¨ªå‘æ»‘åŠ¨åˆ—è¡¨ï¼Œå½“å‰Itemæ˜¾ç¤ºåœ¨å±å¹•ä¸­å¤®å¹¶ä¸”å¯ä»¥å·¦å³æ»‘åŠ¨ï¼Œæœ‰ç‚¹åƒViewPager,ä½†æ˜¯å¯ä»¥å¿«é€Ÿæ»‘åŠ¨ã€‚æä¾›äº†ç®€å•çš„APIæ¥å®žçŽ°ç‚«é…·çš„åŠ¨ç”»æ•ˆæžœã€‚ æ•ˆæžœå±•ç¤ºï¼š 2ã€MaterialViewPagerç®€ä»‹ï¼š å’Œåå­—ä¸€æ ·ï¼ŒMaterial Design æ•ˆæžœçš„ViewPager, æ•ˆæžœå¾ˆnice,è¯·çœ‹gif æ•ˆæžœå±•ç¤º(æœ‰å¤šé‡æ¨¡å¼)ï¼š Titlebar Logo Fading Logo Hide Logo and Toolbar Sticky Toolbar Transparent Toolbar Standard 3ã€BoomMenuç®€ä»‹ï¼š ä¼ ç»Ÿçš„èœå•æ˜¯ä¸æ˜¯çœ‹å¾—æœ‰äº›åŽŒå€¦äº†ï¼Œboom â€¦.çˆ†ç‚¸æ•ˆæžœçš„èœå•äº†è§£ä¸€ä¸‹ï¼ŸåŠŸèƒ½å¼ºå¤§ã€æ•ˆæžœç‚«é…·ï¼Œæœ‰å¾ˆå¤šç§æ¨¡å¼ã€‚ æ•ˆæžœå±•ç¤ºï¼š 4ã€LayoutManagerGroupç®€ä»‹ï¼š è‡ªå®šä¹‰RecyclerView çš„LayoutManagerå®žçŽ°å‡ ç§ç‚«é…·çš„æ•ˆæžœã€‚ æ•ˆæžœå±•ç¤ºï¼š EchelonLayoutManager SkidRightLayoutManager SlideLayoutManager 5ã€Android-SpinKitç®€ä»‹ï¼š Android è‡ªå®šä¹‰View çš„æ–¹å¼å®žçŽ°çš„å„ç§ç‚«é…·çš„åŠ¨ç”»ï¼Œç‰¹åˆ«ç²¾è‡´å’Œä¼˜ç¾Žï¼Œä»¥å‰ä¸“é—¨å†™æ–‡ç« ä»‹ç»è¿‡ã€‚ æ•ˆæžœå±•ç¤ºï¼š 6ã€Matisseç®€ä»‹ï¼š Matisseæ˜¯çŸ¥ä¹Žå¼€æºçš„ä¸€ä¸ªæœ¬åœ°é€‰æ‹©ç…§ç‰‡å’Œè§†é¢‘çš„åº“ï¼ŒUIè®¾è®¡å¾—éžå¸¸ç²¾ç¾Žã€‚æœ‰å¦‚ç‰¹æ€§ï¼š å¯ä»¥åœ¨Fragment/Activity ä¸­ä½¿ç”¨ é€‰æ‹©ç…§ç‰‡çš„æ ¼å¼åŒ…æ‹¬ï¼šPNGã€JPEG ã€GIF.è§†é¢‘æ ¼å¼åŒ…æ‹¬ï¼šMPEG, MP4 æ”¯æŒä¸åŒçš„ä¸»é¢˜å¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰ä¸»é¢˜ æ”¯æŒä¸åŒçš„å›¾ç‰‡åŠ è½½æ–¹å¼ï¼ˆPicassoã€Glideç­‰ï¼‰ è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™ æ•ˆæžœå±•ç¤ºï¼š Zhihu Style Dracula Style Preview 7ã€CosmoCalendarç®€ä»‹ï¼š ä¸€ä¸ªé«˜åº¦è‡ªå®šä¹‰çš„æ—¥åŽ†åº“ï¼ŒUIç²¾ç¾Žï¼Œæ”¯æŒå¤šç§æ¨¡å¼ã€‚ æ•ˆæžœå±•ç¤ºï¼š å•ä¸ªæ—¥æœŸé€‰æ‹© å¤šä¸ªæ—¥æœŸé€‰æ‹© é€‰æ‹©ä¸€ä¸ªèŒƒå›´æ—¥æœŸ è‡ªå®šä¹‰ 8ã€CardStackViewç®€ä»‹ï¼š ä¸‰ç§ç‚«é…·çš„åˆ—è¡¨å¡ç‰‡æ»‘åŠ¨åŠ¨ç”»ï¼Œåˆ†åˆ«ä¸ºï¼šalldown, updown, updownstack æ•ˆæžœå±•ç¤ºï¼š 9ã€CalendarExapleç®€ä»‹ï¼š è¿™æ˜¯ä¸€ä¸ªé«˜ä»¿é’‰é’‰å’Œå°ç±³çš„æ—¥åŽ†æŽ§ä»¶ï¼Œæ”¯æŒå¿«é€Ÿæ»‘åŠ¨ï¼Œç•Œé¢ç¼“å­˜ã€‚æƒ³è¦å®šåˆ¶åŒ–UIï¼Œä½¿ç”¨èµ·æ¥éžå¸¸ç®€å•ï¼Œå°±åƒä½¿ç”¨ListViewä¸€æ · ä¸€äº›ç‰¹ç‚¹ï¼š å¯ä»¥è‡ªå®šä¹‰æ—¥åŽ†æŽ§ä»¶UI æ”¯æŒå¿«é€Ÿæ»‘åŠ¨ æ”¯æŒå†œåŽ†å’Œé˜³åŽ† ç•Œé¢UIç¼“å­˜å’Œæ—¥åŽ†æ•°æ®ç¼“å­˜ æ‰©å±•viewæ”¯æŒlistViewçš„æ»‘åŠ¨ æ•ˆæžœå±•ç¤ºï¼š 10ã€MZBannerViewç®€ä»‹ï¼š ä»¿é­…æ—BannerView,å›¾ç‰‡è½®æ’­æŽ§ä»¶,æ”¯æŒå¤šç§æ¨¡å¼åˆ‡æ¢ï¼šæ™®é€šViewPagerä½¿ç”¨ï¼Œæ™®é€šBannerä½¿ç”¨ï¼Œä»¿é­…æ—Bannerä½¿ç”¨ã€‚ æ•ˆæžœå±•ç¤ºï¼š ç»“å°¾åœ¨æˆ‘ä»¬å¹³æ—¶çš„å·¥ä½œã€å­¦ä¹ ä¸­ï¼Œè¦å…»æˆè®°ç¬”è®°çš„å¥½ä¹ æƒ¯ã€å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚å¹³æ—¶è‡ªå·±é‡åˆ°ä¸€äº›ç‚«é…·çš„æ•ˆæžœï¼Œæˆ‘éƒ½å–œæ¬¢è®°å½•åˆ°ç¬”è®°ä¸­ï¼Œé‡åˆ°ç›¸ä¼¼çš„éœ€æ±‚å°±å¥½æ‰¾äº†ã€‚æœ¬æ–‡è¿™äº›ç‚«é…·çš„æ•ˆæžœæœ‰å…´è¶£çš„å¯ä»¥åŽ»å¯¹åº”çš„Github æŸ¥çœ‹ä½¿ç”¨æ–¹å¼ï¼Œè¯•è¯•æ•ˆæžœï¼Œéƒ½æŒºèµžçš„ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>å¼€æºåº“</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>å¼€æºåº“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç½‘æ˜“ä¸¥é€‰Appæ„Ÿå—Weexå¼€å‘]]></title>
    <url>%2Fposts%2F926ca595.html</url>
    <content type="text"><![CDATA[æ­¤å¤„æ˜¯ demo æºç ï¼šhttps://github.com/zwwill/yanxuan-weex-demo ä¸å¾—ä¸è¯´ï¼Œä½¿ç”¨ Weex å¼€å‘ app å¯¹äºŽæˆ‘ä»¬çº¯å‰ç«¯äººå‘˜æ¥è¯´ï¼Œæ˜¯ä»¶ã€Œå¾ˆçˆ½ã€çš„äº‹æƒ…ï¼Œåªè¦ä½ ç†Ÿæ‚‰äº†ä»–çš„è¯­æ³•ï¼ŒåŸºæœ¬å¯ä»¥åšåˆ°ä¸€å‘¨ä¸Šæ‰‹å†™ appã€‚æžå…¶é€‚åˆäº¤äº’è¦æ±‚ä¸é«˜ï¼Œæ—¶é—´ç´§è¿«ï¼Œäººæ‰‹ä¸è¶³çš„åŒæž„å¼€å‘éœ€æ±‚ã€‚ ä½†æ˜¯ï¼Œå½“ç„¶æœ‰ä½†æ˜¯ï¼Œå¦‚æžœä½ æƒ³å†™å‡ºä¸€ä¸ªå®Œç¾Žçš„ appï¼Œä½ å°±éœ€è¦åœ¨æ€§èƒ½ä¼˜åŒ–ä¸Šä¸‹å¾ˆå¤§çš„åŠŸå¤«ï¼ŒåŒ…æ‹¬åŠ¨ç”»çš„ä¼˜åŒ–ï¼Œè¿‡åœºçš„ä¼˜åŒ–ï¼Œå›¾ç‰‡çš„ä¼˜åŒ–ï¼Œç»†èŠ‚çš„æ‰“ç£¨ç­‰ç­‰ï¼Œå†è€…ï¼Œå°±æ˜¯ä½ éœ€è¦æŽŒæ¡æˆ–è€…ã€Œèƒ½å†™ã€ä¸€äº›åŽŸç”Ÿçš„ä»£ç ï¼Œä¸ç„¶æœ‰äº›åŠŸèƒ½ä½ æ˜¯å®žçŽ°ä¸äº†çš„ï¼Œæ¯”å¦‚ status bar çš„å±žæ€§æ›´æ”¹ï¼Œå¼€åœºåŠ¨ç”»çš„åˆ¶ä½œï¼Œå†…å­˜çš„å›žæ”¶ï¼Œwebview çš„ç›‘å¬ç­‰ç­‰ã€‚ ä¸‹é¢æˆ‘ä»¬å…·ä½“è®²è®²å…¥é—¨çŸ¥è¯† Weex æä¾›äº†å¤šç«¯ä¸€è‡´çš„æŠ€æœ¯æ–¹æ¡ˆã€‚ é¦–å…ˆï¼ŒWeex çš„å¼€å‘å’Œ web å¼€å‘ä½“éªŒå¯ä»¥è¯´æ˜¯å‡ ä¹Žä¸€æ ·ã€‚åŒ…æ‹¬è¯­æ³•è®¾è®¡å’Œå·¥ç¨‹é“¾è·¯ç­‰ã€‚ å…¶æ¬¡ï¼ŒWeex çš„ç»„ä»¶ã€æ¨¡å—è®¾è®¡éƒ½æ˜¯ iOSã€Androidã€Web çš„å¼€å‘è€…å…±åŒè®¨è®ºå‡ºæ¥çš„ï¼Œæœ‰ä¸€å®šçš„é€šç”¨æ€§å’Œæ™®éæ€§ã€‚ Weex å¼€å‘åŒä¸€ä»½ä»£ç ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ç«¯ä¸Šåˆ†åˆ«æ‰§è¡Œï¼Œé¿å…äº†å¤šç«¯çš„é‡å¤ç ”å‘æˆæœ¬ã€‚ åœ¨åŒæž„è¿™æ¡è·¯ä¸Šï¼ŒWeex æ¯” React Nativeåšå¾—æ›´å½»åº•ï¼Œä»–ã€Œå‡ ä¹Žã€åšåˆ°äº†ï¼Œã€Œä½ æ¥ä½¿ç”¨ vue å†™ä¸€ä¸ªwebappï¼Œæˆ‘é¡ºä¾¿ç»™ä½ ç¼–è¯‘æˆäº† ios å’Œ android çš„åŽŸç”Ÿ appã€ è‡³äºŽä¸ºä»€ä¹ˆè¦é€ è¿™ä¸ªè½®å­ï¼Œå®˜æ–¹ç»™äº†ä»¥ä¸‹è¯´æ³• 1ã€ä»Šå¤©åœ¨æŠ€æœ¯ç¤¾åŒºæœ‰å¤§é‡çš„ web å¼€å‘è€…ï¼ŒWeex å¯ä»¥èµ‹èƒ½æ›´å¤šçš„ web å¼€å‘è€…æž„å»ºé«˜æ€§èƒ½å’Œé«˜ä½“éªŒçš„ç§»åŠ¨åº”ç”¨ã€‚2ã€Web å¼€å‘æœ¬èº«å…·æœ‰éžå¸¸å¼ºçš„é«˜æ•ˆçŽ‡å’Œçµæ´»æ€§ï¼Œè¿™å’Œ Weex æƒ³è§£å†³çš„ç§»åŠ¨ç«¯åŠ¨æ€æ€§é—®é¢˜ä¸è°‹è€Œåˆã€‚3ã€Web æ ‡å‡†å’Œå¼€å‘ä½“éªŒæ˜¯å¾ˆå¤šé¡¶å°–è€Œä¼˜ç§€çš„ç§‘æŠ€å…¬å¸å…±åŒè®¨è®ºå’Œå»ºè®¾çš„ç»“æžœï¼Œæœ¬èº«çš„è®¾è®¡å’Œç†å¿µéƒ½æœ‰æžé«˜çš„å“è´¨ä¿éšœ4ã€åŒæ—¶ Weex ä¹Ÿå¸Œæœ›å¯ä»¥å€Ÿæ­¤æœºä¼šåŠªåŠ›ä¸ºæ ‡å‡†è´¡çŒ®ä¸€ç‚¹è‡ªå·±çš„å¾®è–„ä¹‹åŠ›ã€‚5ã€Web æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„æŠ€æœ¯ï¼Œæ ‡å‡†æœ¬èº«å°±æ˜¯ä¸€ç§åŠ›é‡ï¼ŒåŸºäºŽæ ‡å‡†ã€å°Šé‡æ ‡å‡†ã€è´´è¿‘æ ‡å‡†éƒ½æ„å‘³ç€æ‹¥æœ‰æ›´å¤šçš„å¯èƒ½æ€§ã€‚6ã€Web ä»Šå¤©çš„ç”Ÿæ€å’Œç¤¾åŒºæ˜¯éžå¸¸ç¹è£çš„ï¼Œæœ‰å¾ˆå¤šæˆç†Ÿçš„å·¥å…·ã€åº“ã€å·¥ç¨‹ä½“ç³»ã€æœ€ä½³å®žè·µå¯ä»¥ä½¿ç”¨ã€å¼•å…¥å’Œå€Ÿé‰´ã€‚ åœ¨æˆ‘çœ‹æ¥ï¼ŒWeex å…¶å®žæ˜¯ Alibaba å›¢é˜Ÿæé«˜ç”Ÿäº§æ•ˆçŽ‡çš„äº§ç‰©ï¼Œåœ¨æ·˜å®è¿™ç±»è¦æ±‚å¤šç«¯ç»Ÿä¸€è¿­ä»£å¿«é€Ÿçš„éƒ¨é—¨ï¼Œä¸‰ç«¯çº¦å®šä¸€ç§ä¾¿äºŽç»Ÿä¸€çš„è§„èŒƒï¼Œåœ¨åŠ ä¸Šæ—¶é—´çš„å‘é…µï¼Œæ¸æ¸çš„å°±æœ‰äº†æ­¤ç±»è„šæ‰‹æž¶çš„é›å½¢ï¼ŒåŒæ—¶åœ¨è„¸ä¹¦ React Native å¼€æºå¸¦æ¥çš„æžå¤§è½°åŠ¨åŽï¼Œè‡ªå·±ä¹Ÿåä¸ä½äº†å§^_^ å¥½äº†ï¼Œé—²è¯å°±è¯´åˆ°è¿™ï¼Œä¸‹é¢å°±æ¥è®©æˆ‘ä»¬è§£å‰–ä¸€ä¸‹WEEXçš„ä¼˜åŠ£è‰¯èŽ ã€‚ é¢„ç§‘å…¥é—¨ Weex å‰éœ€è¦äº†è§£ä»¥ä¸‹çŸ¥è¯†ï¼Œè¿™æ ·èƒ½å¸®åŠ©ä½ æ›´å¿«çš„æŽŒæ¡Nodeï¼šã€ŠNode.js æ•™ç¨‹ã€‹Vueï¼šã€ŠVue.jså®˜æ–¹æ•™ç¨‹ã€‹ES6ï¼šã€ŠECMAScript 6 å…¥é—¨ã€‹å†è€…å°±æ˜¯ ios å’Œ android å¼€å‘è¯­æ³•çš„å…¥é—¨å’Œç¼–è¾‘å™¨çš„ä½¿ç”¨ çŽ¯å¢ƒç³»ç»ŸçŽ¯å¢ƒè¦æ±‚IOS : MacOS, é»‘è‹¹æžœAndroid :MacOS, Linux, Windows é…ç½®çŽ¯å¢ƒä½ å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£å®‰è£…å¿…é¡»çš„ä¾èµ–çŽ¯å¢ƒ http://weex.apache.org/cn/guide/set-up-env.htmlï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥å®‰è£…ä»¥ä¸‹çŽ¯å¢ƒ node npm weex-toolkit Xcode å®‰è£… Xcode IDE å’Œ Xcode çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆIOS å¼€å‘ä¾èµ–ï¼‰ Android Studio ä¸‹è½½å¿…é¡»çš„æ’ä»¶ï¼š a) JDK1.8+b) Show Package Detailsc) Android SDK Build Toolsd) Android Support Repository é…ç½®åŸºç¡€çŽ¯å¢ƒï¼ša) ANDROID_HOME ï¼ˆå¦‚è¿è¡Œæ˜¯é‡åˆ°é—®é¢˜å¯å‚è€ƒæ­¤æ–‡ http://www.jianshu.com/p/a77396301b22ï¼‰b) JAVA_HOME Hello Weexå®˜æ–¹æ–‡æ¡£ä¸Šçš„å…¥é—¨ Hello world æ˜¯ web ç«¯çš„ï¼Œç´§æŽ¥ç€ä»‹ç»äº†å¦‚ä½•ã€Œé›†æˆ Weex åˆ°å·²æœ‰åº”ç”¨ã€ ä½†æ˜¯ï¼Œèº«ä¸ºä¸€ä¸ª web å‰ç«¯å¼€å‘è€…ï¼Œå¦‚æžœä½ ä¸æ‡‚åŽŸç”Ÿè¯­éŸ³çš„è¯ï¼Œä»‹ç»è¿™äº›å¹¶ä¸èƒ½èµ·åˆ°å¾ˆå¥½çš„å¼•å¯¼ä½œç”¨ï¼Œå› ä¸ºwebå‰ç«¯å¼€å‘è€…éƒ½æœ‰ã€Œä¸€ç»Ÿå‰ç«¯ç•Œã€çš„é‡Žå¿ƒï¼ˆWeb+Android+IOSï¼‰ï¼Œã€Œå¯„äººç¯±ä¸‹ã€åªèƒ½æ˜¯æš‚æ—¶çš„ã€‚ å¿«é€Ÿåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªçº¯ Weex App å¯¹äºŽã€Œçº¯ã€å‰ç«¯åŒå­¦æ¥è¯´ï¼Œæ‰æ˜¯æœ‰æ„æ€çš„äº‹å„¿ã€‚ä½†ï¼š ä¸ºä»€ä¹ˆæ–‡æ¡£è¦è¿™ä¹ˆè®¾è®¡ä¹Ÿæ˜¯è·ŸWeexçš„å®šä½æœ‰å…³çš„ï¼Œè¯»å®Œä¸‹æ–‡åŽç»­ä½ å°±æ…¢æ…¢æ‡‚äº†ï¼ŒåŽé¢æˆ‘å°†åšæ€»ç»“è§£é‡Š å¦‚æžœä½ åœ¨å®˜æ–¹æ•™ç¨‹é‡Œæ²¡æœ‰æ‰¾åˆ°åˆ›å»ºå·¥ç¨‹çš„æ•™ç¨‹ï¼Œå¯ä»¥é˜…è¯»æ­¤æ–‡ã€ŠWeex å¿«é€Ÿåˆ›å»ºå·¥ç¨‹ Hello Worldã€‹ Vue NativeWeex åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­é€‰æ‹©äº†äºŽ Vue 2.0 æ¡æ‰‹ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬çš„ Vue åŠ å…¥äº† Virtual-DOM å’Œé¢„ç¼–è¯‘å™¨çš„è®¾è®¡ï¼Œä½¿å¾—è¯¥æ¡†æž¶åœ¨è¿è¡Œæ—¶èƒ½å¤Ÿè„±ç¦» HTML å’Œ CSS è§£æžï¼Œåªä¾èµ– JavaScriptï¼Œå¦‚æ­¤ï¼ŒVue åœ¨å’Œ Weex åˆä½œåŽï¼Œä¾¿èŽ·å¾—äº†ä½¿ç”¨ JS é¢„ç¼–è¯‘åŽŸç”Ÿçš„ç»„ä»¶ UI çš„èƒ½åŠ›ã€‚ åŒ React Native ä¸€æ ·ï¼Œæœ‰äººä¹Ÿå°† Weex å«åš Vue Nativeã€‚ å¦‚æžœä½ å¯¹ Vue è¿˜ä¸äº†è§£ï¼Œå¯ä»¥å…ˆå­¦ä¹ ã€é¢„ç§‘ã€‘éƒ¨åˆ†æŽ¨èçš„ã€ŠVue.js å®˜æ–¹æ•™ç¨‹ã€‹ã€‚ é‚£ä¹ˆæŽ¥ä¸‹æ¥æˆ‘ä»¬è®²è®²ï¼ŒVue åœ¨ Weex ä¸­çš„ä¸åŒ Vue åœ¨ Weex ä¸­çš„ä¸åŒè™½è¯´ Weex ä½¿ç”¨ Vue è¯­è¨€å†™çš„ï¼Œä½†æ¯•ç«Ÿæ˜¯éœ€è¦åœ¨ä¸åŒå¹³å°é—´è¿è¡Œçš„ï¼Œè™½ç„¶å¤§éƒ¨åˆ†è¯­æ³•éƒ½æœ‰æ”¯æŒï¼Œä½†æ˜¯ä¾ç„¶æœ‰éƒ¨åˆ†è¯­æ³•æ˜¯ä¸åŒçš„ è¯­æ³•å·®å¼‚1ã€â€œhtmlæ ‡ç­¾â€ç›®å‰ Weex æ”¯æŒäº†åŸºæœ¬çš„å®¹å™¨ (div)ã€æ–‡æœ¬ (text)ã€å›¾ç‰‡ (image)ã€è§†é¢‘ (video) ç­‰ç»„ä»¶ï¼Œæ³¨æ„æ˜¯ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ ‡ç­¾ï¼Œè™½ç„¶ä½¿ç”¨èµ·æ¥è·Ÿ html æ ‡ç­¾å¾ˆåƒï¼Œè‡³äºŽå…¶ä»–æ ‡ç­¾åŸºæœ¬å¯ä»¥ä½¿ç”¨ä»¥ä¸Šç»„ä»¶ç»„åˆè€Œæˆã€‚ 2ã€Weex çŽ¯å¢ƒä¸­æ²¡æœ‰ DOMå› ä¸º Weex è§£æž vue å¾—åˆ°çš„å¹¶ä¸æ˜¯ domï¼Œè€Œæ˜¯åŽŸç”Ÿå¸ƒå±€æ ‘ 3ã€æ”¯æŒæœ‰é™çš„äº‹ä»¶å¹¶ä¸æ”¯æŒ Web ä¸­æ‰€æœ‰çš„äº‹ä»¶ç±»åž‹ï¼Œè¯¦æƒ…è¯·å‚è€ƒã€Šé€šç”¨äº‹ä»¶ã€‹ 4ã€æ²¡æœ‰ BOM ä½†å¯ä»¥è°ƒç”¨åŽŸç”Ÿ APIåœ¨ Weex ä¸­èƒ½å¤Ÿè°ƒç”¨ç§»åŠ¨è®¾å¤‡åŽŸç”Ÿ APIï¼Œä½¿ç”¨æ–¹æ³•æ˜¯é€šè¿‡æ³¨å†Œã€è°ƒç”¨æ¨¡å—æ¥å®žçŽ°ã€‚å…¶ä¸­æœ‰ä¸€äº›æ¨¡å—æ˜¯ Weex å†…ç½®çš„ï¼Œå¦‚ clipboard ã€ navigator ã€storage ç­‰ã€‚ã€Šclipboard å‰ªåˆ‡æ¿ã€‹ã€Šnavigator å¯¼èˆªæŽ§åˆ¶ã€‹ã€Šstorage æœ¬åœ°å­˜å‚¨ ã€‹ä¸ºäº†ä¿æŒæ¡†æž¶çš„é€šç”¨æ€§ï¼ŒWeex å†…ç½®çš„åŽŸç”Ÿæ¨¡å—æœ‰é™ï¼Œä¸è¿‡ Weex æä¾›äº†æ¨ªå‘æ‰©å±•çš„èƒ½åŠ›ï¼Œå¯ä»¥æ‰©å±•åŽŸç”Ÿæ¨¡å—ï¼Œå…·ä½“çš„æ‰©å±•æ–¹æ³•è¯·å‚è€ƒã€ŠiOS æ‰©å±•ã€‹ å’Œã€ŠAndroid æ‰©å±•ã€‹ã€‚ æ ·å¼å·®å¼‚Weex ä¸­çš„æ ·å¼æ˜¯ç”±åŽŸç”Ÿæ¸²æŸ“å™¨è§£æžçš„ï¼Œå‡ºäºŽæ€§èƒ½å’ŒåŠŸèƒ½å¤æ‚åº¦çš„è€ƒè™‘ï¼ŒWeex å¯¹ CSS çš„ç‰¹æ€§åšäº†ä¸€äº›å–èˆ1ã€Weex ä¸­åªæ”¯æŒå•ä¸ªç±»åé€‰æ‹©å™¨ï¼Œä¸æ”¯æŒå…³ç³»é€‰æ‹©å™¨ï¼Œä¹Ÿä¸æ”¯æŒå±žæ€§é€‰æ‹©å™¨ã€‚2ã€ç»„ä»¶çº§åˆ«çš„ä½œç”¨åŸŸï¼Œä¸ºäº†ä¿æŒ web å’Œ Native çš„ä¸€è‡´æ€§ï¼Œéœ€è¦&lt;style scoped&gt;å†™æ³•3ã€æ”¯æŒäº†åŸºæœ¬çš„ç›’æ¨¡åž‹å’Œ flexbox å¸ƒå±€ï¼Œè¯¦æƒ…å¯å‚è€ƒWeex é€šç”¨æ ·å¼æ–‡æ¡£ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ ä¸æ”¯æŒdisplay: none;å¯ç”¨opacity: 0;ä»£æ›¿ï¼Œï¼ˆopacity&lt;=0.01æ—¶ï¼Œå…ƒç´ å¯ç‚¹é€ï¼‰ æ ·å¼å±žæ€§æš‚ä¸æ”¯æŒç®€å†™ï¼ˆæé«˜è§£æžæ•ˆçŽ‡ï¼‰ flex å¸ƒå±€éœ€è¦æ³¨æ„ web çš„å…¼å®¹æ€§ css ä¸æ”¯æŒ 3D å˜æ¢ Weex å¼€å‘&amp;è°ƒè¯•Vue è¯­æ³•ä¸¾ä¸ªæ —å­ï¼Œä»¥ä¸‹æ˜¯ä¸¥é€‰App Demoé¦–é¡µçš„ç®€åŒ–ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;template&gt; &lt;div class=&quot;wrapper&quot;&gt; &lt;text class=&quot;iconfont&quot;&gt;î™ &lt;/text&gt; &lt;home-header&gt;&lt;/home-header&gt; &lt;scroller class=&quot;main-list&quot; offset-accuracy=&quot;300px&quot;&gt; &lt;refresher&gt;&lt;/refresher&gt; &lt;div class=&quot;cell-button&quot; @click=&quot;jumpWeb(&apos;https://m.you.163.com&apos;)&quot;&gt; &lt;yx-slider :imageList=&quot;YXBanners&quot; &gt;&lt;/yx-slider&gt; &lt;/div&gt; &lt;div class=&quot;cell-button&quot;&gt; &lt;block-1 :title=&quot;block1.title&quot; :items=&quot;block1.items&quot;&gt;&lt;/block-1&gt; &lt;/div&gt; &lt;/scroller&gt; &lt;/div&gt;&lt;/template&gt;&lt;style scoped&gt; .iconfont &#123; font-family:iconfont; &#125; .main-list&#123; position: fixed; top: 168px; bottom: 90px; left: 0; right: 0; &#125;&lt;/style&gt;&lt;script&gt; var navigator = weex.requireModule(&apos;navigator&apos;); import util from &apos;../../src/assets/util&apos;; import Header from &apos;../components/Header.vue&apos;; import refresher from &apos;../components/refresh.vue&apos;; import YXSlider from &apos;../components/YXSlider.vue&apos;; import Block1 from &apos;../components/Block1.vue&apos;; export default &#123; components: &#123; &apos;home-header&apos;: Header, &apos;refresher&apos;: refresher, &apos;yx-slider&apos;: YXSlider, &apos;block-1&apos;: Block1 &#125;, data () &#123; return &#123; YXBanners: [ &#123; title: &apos;&apos;, src: &apos;http://doc.zwwill.com/yanxuan/imgs/banner-1.jpg&apos;&#125;, &#123; title: &apos;&apos;, src: &apos;http://doc.zwwill.com/yanxuan/imgs/banner-2.jpg&apos;&#125;, &#123; title: &apos;&apos;, src: &apos;http://doc.zwwill.com/yanxuan/imgs/banner-3.jpg&apos;&#125; ] &#125; &#125;, methods: &#123; jumpWeb (_url) &#123; const url = this.$getConfig().bundleUrl; navigator.push(&#123; url: util.setBundleUrl(url, &apos;page/web.js?weburl=&apos;+_url) , animated: &quot;true&quot; &#125;); &#125; &#125; &#125;&lt;/script&gt; å¦‚æžœä»¥ä¸Šä»£ç è„±ç¦»å·¥ç¨‹å•ç‹¬å‡ºçŽ°ï¼ŒåŸºæœ¬ä¸Šæ˜¯æ— æ³•å¾—çŸ¥ä»–æ˜¯ Weex å·¥ç¨‹ã€‚æ­¤å¤„å¯åˆ‡å®žæ„Ÿå—åˆ° Weex çš„ web å¼€å‘ä½“éªŒ åå­˜å®žäº¡çš„&lt;æ ‡ç­¾/&gt;1234567&lt;template&gt; &lt;div&gt; &lt;text v-for=&quot;(v, i) in list&quot; class=&quot;text&quot;&gt;&#123;&#123;v&#125;&#125;&lt;/text&gt; &lt;image style=&quot;&quot; src=&quot;&quot;&gt;&lt;/image&gt; &lt;video class=&quot;video&quot; :src=&quot;src&quot; autoplay controls @start=&quot;onstart&quot; @pause=&quot;onpause&quot; @finish=&quot;onfinish&quot; @fail=&quot;onfail&quot;&gt;&lt;/video&gt; &lt;/div&gt;&lt;/template&gt; Weex å·¥ç¨‹ä¸­å¸¸ç”¨çš„æ ‡ç­¾æœ‰&lt;div /&gt;ï¼Œ&lt;text /&gt;ï¼Œ&lt;image /&gt;ï¼Œ&lt;video /&gt;ï¼ˆç»„ä»¶å¦ç®—ï¼‰ï¼Œç”±æ­¤å››ç§æ ‡ç­¾åŸºæœ¬å¯ä»¥æ»¡è¶³ç»å¤§å¤šæ•°åœºæ™¯çš„éœ€æ±‚ï¼Œè™½è¯´æ­¤æ ‡ç­¾åŒ web å·¥ç¨‹ä¸‹çš„æ ‡ç­¾ç”¨æ³•ä¸€è‡´ï¼Œä½†æ­¤å¤„çš„æ ‡ç­¾å·²ä¸å†æ˜¯æˆ‘ä»¬å‰ç«¯å£ä¸­å¸¸æçš„ html æ ‡ç­¾ï¼Œè€Œä¸”åå­˜å®žäº¡çš„ Weex æ ‡ç­¾ï¼Œç¡®åˆ‡è®²æ˜¯ Weex ç»„ä»¶ã€‚ é€šè¿‡weex-loaderã€vue-loaderã€weex-vue-renderçš„è§£æžæœ€ç»ˆè½¬æ¢è¾“å‡ºçš„ä¾¿æ˜¯å®žé™…çš„ç»„ä»¶ï¼Œæœ‰æ­¤è®¾è®¡åªæ˜¯ä¸ºäº†å®Œæˆã€Œwebå¼€å‘ä½“éªŒã€çš„ç›®æ ‡ã€‚ä½†æ˜¯æˆ‘ä»¬èº«ä¸ºä¸Šå±‚çš„å¼€å‘äººå‘˜è¦æ¸…æ¥šè‡ªå·±æ¯å¤©ã€ŒæŠŠçŽ©ã€çš„åˆ°åº•æ˜¯ä¸ªä»€ä¹ˆã€Œé¬¼ã€ã€‚ é˜‰å‰²ç‰ˆ CSSå…¶å®žç”¨é˜‰å‰²ç‰ˆæ¥å½¢å®¹ Weex çš„ css æ”¯æŒåº¦å¹¶ä¸åˆé€‚ï¼Œä½†å¦‚æžœä»Žã€Œwebå¼€å‘ä½“éªŒã€çš„è§’åº¦æ¥è¡¡é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå½¢å®¹è¯ä¹Ÿæ˜¯å¯ä»¥ç†è§£çš„ã€‚ï¼ˆæ­¤å¤„å¯¹ Weex å¯„æœ‰åŽšæœ›^_^ï¼‰ å•ä½Weex ä¸­çš„æ‰€æœ‰ css å±žæ€§å€¼çš„å•ä½å‡ä¸º pxï¼Œä¹Ÿå¯çœç•¥ä¸å†™ï¼Œç³»ç»Ÿä¼šé»˜è®¤ä¸º px å•ä½ã€‚ é€‰æ‹©å™¨Weex ä¸­åªæ”¯æŒå•ä¸ªç±»åé€‰æ‹©å™¨ï¼Œä¸æ”¯æŒå…³ç³»é€‰æ‹©å™¨ï¼Œä¹Ÿä¸æ”¯æŒå±žæ€§é€‰æ‹©å™¨ã€‚ 123456789101112/* æ”¯æŒå•ä¸ªç±»åé€‰æ‹©å™¨ */.one-class &#123; font-size: 36px;&#125;/* ä¸æ”¯æŒå…³ç³»é€‰æ‹©å™¨ */.parent &gt; .child &#123; padding-top: 10px;&#125;/* ä¸æ”¯æŒå±žæ€§é€‰æ‹©å™¨ï¼Œä¸æ”¯æŒ `v-cloak` æŒ‡ä»¤ */[v-cloak] &#123; color: #FF6600;&#125; è¿™ä¸ªåªæ˜¯å¯¹æ ·å¼å®šä¹‰çš„é™åˆ¶ï¼Œä¸å½±å“æ ·å¼ç±»åçš„ä½¿ç”¨ï¼Œåœ¨æ ‡ç­¾ä¸­å¯ä»¥æ·»åŠ å¤šä¸ªæ ·å¼ç±»åï¼Œå¦‚ï¼š 123&lt;template&gt; &lt;div class=&quot;one two three&quot;&gt;&lt;div&gt;&lt;/template&gt; ç›’æ¨¡åž‹weexæ”¯æŒcssåŸºæœ¬çš„ç›’æ¨¡åž‹ç»“æž„ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ box-sizing å±žæ€§å€¼é»˜è®¤ä¸º border-box marginï¼Œpaddingï¼Œborderç­‰å±žæ€§æš‚ä¸æ”¯æŒåˆå¹¶ç®€å†™ FlexBoxWeex ä¸­å¯¹ flexbox å¸ƒå±€æ”¯æŒåº¦å¾ˆé«˜ï¼Œä½†ä¾ç„¶æœ‰éƒ¨åˆ†å±žæ€§å¹¶ä¸æ”¯æŒï¼Œå¦‚ align-items:baseline;ã€align-content:space-around;ã€align-self:wrap_reverse;ç­‰ã€‚ å…·ä½“ Weex å¯¹ flexbox çš„æ”¯æŒå’Œå¸ƒå±€ç®—æ³•ï¼Œå¯é€šè¿‡æ­¤æ–‡è¿›è¡Œäº†è§£ç”± FlexBox ç®—æ³•å¼ºåŠ›é©±åŠ¨çš„ Weex å¸ƒå±€å¼•æ“Žï¼Œæ­¤å¤„ä¾¿ä¸å†èµ˜è¿°ã€‚ æ˜¾éšæ€§åœ¨ Weex çš„ ios å’Œ android ç«¯ï¼Œå¹¶ä¸æ”¯æŒ display å±žæ€§ã€‚ å› æ­¤ï¼Œä¸èƒ½ä½¿ç”¨ display:none; æ¥æŽ§åˆ¶å…ƒç´ çš„æ˜¾éšæ€§ï¼Œæ‰€ä»¥ vue è¯­æ³•ä¸­çš„ v-show æ¡ä»¶æ¸²æŸ“æ˜¯ä¸ç”Ÿæ•ˆçš„ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ v-if ä»£æ›¿ï¼Œæˆ–è€…ç”¨ opacity:0; æ¥æ¨¡æ‹Ÿã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œioså’Œandroidç«¯å¹¶ä¸èƒ½ä½¿ç”¨ opacity:0; æ¥å®Œå…¨æ¨¡æ‹Ÿ visibility: hidden;ï¼Œå› ä¸ºï¼Œå½“opacity çš„åªå°äºŽç­‰äºŽ 0.01 æ—¶ï¼Œnative æŽ§ä»¶ä¾¿ä¼šæ¶ˆå¤±ï¼Œå ä½ç©ºé—´è¿˜åœ¨ï¼Œä½†ç”¨æˆ·æ— æ³•è¿›è¡Œäº¤äº’æ“ä½œï¼Œç‚¹å‡»æ—¶ä¼šå‘ç”Ÿç‚¹é€æ•ˆæžœã€‚ CSS 3Weex æ”¯æŒ css3 å±žæ€§ï¼Œè™½ç„¶æ”¯æŒå¹¶ä¸å¤Ÿï¼Œä½†ç›¸è¾ƒ React Native çš„ã€Œä¸èƒ½ç”¨ã€å·²ç»æ˜¯å¼ºå¤§å¾ˆå¤šäº†ã€‚ ä»¥ä¸‹å‡ ç§å±žæ€§æˆ‘ä»¬åœ¨å¼€å‘å‰éœ€è¦çŸ¥é“å¥¹çš„æ”¯æŒåº¦ transformï¼šç›®å‰åªæ”¯æŒ 2D è½¬æ¢ transitionï¼šv0.16.0+ çš„ SDK ç‰ˆæœ¬æ”¯æŒcssè¿‡åº¦åŠ¨ç”»ï¼Œå¯æ ¹æ®æƒ…å†µé…åˆå†…å»ºç»„ä»¶ animation å®žçŽ°åŠ¨ç”»äº¤äº’ linear-gradientï¼šç›®å‰åªæ”¯æŒåŒè‰²æ¸å˜è‰² font-familyï¼šWeex ç›®å‰åªæ”¯æŒ ttf å’Œ woff å­—ä½“æ ¼å¼çš„è‡ªå®šä¹‰å­—ä½“ ç¬¬ä¸‰æ–¹å·¥å…·åº“ç”±äºŽä½¿ç”¨äº†å¢žå¼ºç‰ˆçš„ webpak æ‰“åŒ…å·¥å…· weexpackï¼Œæ”¯æŒç¬¬ä¸‰æ–¹æ¡†æž¶ä¹Ÿæ˜¯ä»¶è‡ªç„¶è€Œç„¶çš„äº‹æƒ…ã€‚ å¸¸ç”¨çš„æœ‰ vuexã€vue-router ç­‰ï¼Œå¯æ ¹æ®é¡¹ç›®å®žé™…æƒ…å†µå¼•å…¥éœ€è¦çš„ç¬¬ä¸‰æ–¹å·¥å…·åº“ npm åŒ…ç®¡ç†npm åŒ…ç®¡ç†æ˜¯å‰ç«¯å¼€å‘æœ‹å‹ä»¬å†ç†Ÿæ‚‰ä¸è¿‡çš„åŒ…ç®¡ç†æ–¹å¼äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ React Native å’Œ Weex éƒ½é€‰æ‹©è¿™ç§ç®¡ç†æ–¹å¼çš„åŽŸå› ã€‚ ä»¥ä¸‹æ˜¯æœ¬å·¥ç¨‹çš„ package.json æ–‡ä»¶ï¼Œè¿™é‡Œå°±ä¸åšè®²è§£äº†ï¼Œä¸ç†Ÿæ‚‰çš„æœ‹å‹ç‚¹è¿™é‡Œ-&gt;NPM ä½¿ç”¨ä»‹ç» 1234567891011121314151617181920212223242526272829303132333435363738394041&#123; &quot;name&quot;: &quot;yanxuan-weex&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;a weex project&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;build&quot;: &quot;webpack&quot;, &quot;build_plugin&quot;: &quot;webpack --config ./tools/webpack.config.plugin.js --color&quot;, &quot;dev&quot;: &quot;weex-builder src dist -w&quot;, &quot;serve&quot;: &quot;webpack-dev-server --config webpack.dev.js -p --open&quot; &#125;, &quot;keywords&quot;: [&quot;weex&quot;], &quot;author&quot;: &quot;zwwill&quot;, &quot;license&quot;: &quot;MIT&quot;, &quot;dependencies&quot;: &#123; &quot;vue&quot;: &quot;^2.4.2&quot;, &quot;vue-router&quot;: &quot;^2.7.0&quot;, &quot;vuex&quot;: &quot;^2.1.1&quot;, &quot;vuex-router-sync&quot;: &quot;^4.3.0&quot;, &quot;weex-html5&quot;: &quot;^0.4.1&quot;, &quot;weex-vue-render&quot;: &quot;^0.11.2&quot; &#125;, &quot;devDependencies&quot;: &#123; &quot;babel-core&quot;: &quot;^6.21.0&quot;, &quot;babel-loader&quot;: &quot;^6.2.4&quot;, &quot;babel-plugin-add-module-exports&quot;: &quot;^0.2.1&quot;, &quot;babel-plugin-transform-runtime&quot;: &quot;^6.9.0&quot;, &quot;babel-preset-es2015&quot;: &quot;^6.9.0&quot;, &quot;babel-runtime&quot;: &quot;^6.9.2&quot;, &quot;css-loader&quot;: &quot;^0.26.1&quot;, &quot;history&quot;: &quot;^4.7.2&quot;, &quot;quick-local-ip&quot;: &quot;^1.0.7&quot;, &quot;vue-loader&quot;: &quot;^13.0.4&quot;, &quot;vue-template-compiler&quot;: &quot;^2.4.2&quot;, &quot;webpack&quot;: &quot;^2.7.0&quot;, &quot;webpack-dev-server&quot;: &quot;^2.4.2&quot;, &quot;weex-builder&quot;: &quot;^0.2.7&quot;, &quot;weex-loader&quot;: &quot;^0.4.5&quot;, &quot;weex-router&quot;: &quot;0.0.1&quot; &#125;&#125; UI å°ºå¯¸é€‚é…Weex å®¹å™¨é»˜è®¤çš„æ˜¾ç¤ºå®½åº¦ (viewport) æ˜¯ 750pxï¼Œé¡µé¢ä¸­çš„æ‰€æœ‰ç»„ä»¶éƒ½ä¼šä»¥ 750px ä½œä¸ºæ»¡å±å®½åº¦ã€‚ è¿™å¾ˆåƒç§»åŠ¨è®¾å¤‡çš„é€»è¾‘åƒï¼Œæ¯”å¦‚ iPhone 6 çš„ç‰©ç†åƒç´ å®½ä¸º 750ï¼Œé€»è¾‘åƒç´  Type iPhone 3G iPhone 4 iPhone 6 iPhone 6Plus ç‰©ç†åƒç´  320x480 640x960 750x1134 1080x1920 é€»è¾‘åƒç´  320x480 320x480 375x667 414x736 åƒç´ æ¯” @1x @2x @2x @3x ç±»æ¯”åœ¨ Weex ä¸­ï¼Œå¦‚æžœæ‰€æœ‰çš„æ˜¾ç¤ºå®½åº¦éƒ½æ˜¯ç”¨é»˜è®¤å€¼ 750ï¼Œé‚£ä¹ˆæ˜¾ç¤ºå‡ºæ¥çš„å®žé™…åƒç´ ä¿¡æ¯ä¸º Type iPhone 3G iPhone 4 iPhone 6 iPhone 6Plus ç‰©ç†åƒç´  320x480 640x960 750x1134 1080x1920 æ˜¾ç¤ºåƒç´  750x1125 750x1125 750x1134 750x1333 åƒç´ æ¯” @0.427x @0.85x @1x @1.44x æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨ Weex åš UI é€‚é…æ—¶å°±æ²¡æœ‰æ‰€è°“çš„ @2x å›¾å’Œ @3x å›¾ï¼Œæ‰€æœ‰çš„å°ºå¯¸éƒ½æ˜¯Weexå¸®æˆ‘ä»¬æ ¹æ®750 ä½œä¸ºåŸºæ•°å®½åšçš„ç¼©æ”¾ã€‚ å½“ç„¶ï¼ŒWeex æä¾›äº†æ”¹å˜æ­¤æ˜¾ç¤ºå®½åº¦çš„ APIï¼ŒsetViewportï¼Œé€šè¿‡æ­¤æ–¹æ³•å¯ä»¥æ”¹å˜é¡µé¢çš„æ˜¾ç¤ºå®½åº¦ï¼Œå¯ä»¥å®žçŽ°æ¯ä¸ªé¡µé¢æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ”¹å˜åŸºæ•°é€»è¾‘å°ºå¯¸ å› æ­¤å¯¹äºŽä¸€äº›å›ºå®šçš„ iconï¼Œä¸å»ºè®®ä½¿ç”¨æ™®é€šçš„é™æ€å›¾ç‰‡æˆ–è€…é›ªç¢§å›¾ï¼Œè¿™é‡Œå»ºè®®ä½¿ç”¨çŸ¢é‡çš„å­—ä½“å›¾ç‰‡ï¼Œæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š é€‚é‡å›¾ä¸ä¼šå˜ç³Š ä½¿ç”¨æ–¹ä¾¿ï¼Œé€šè¿‡ css çš„å­—å·æŽ§åˆ¶å¤§å°ï¼Œä¸ç”¨é€‚é…æœºåž‹å’Œå±å¹•å°ºå¯¸ å¼•ç”¨ ttf æ–‡ä»¶ï¼Œä½“ç§¯å°ï¼Œä¸”å®¹æ˜“æ›´æ–° æœ¬åœ°è°ƒè¯•Weex çš„è°ƒè¯•æ–¹å¼æœ‰å¤šç§ï¼Œå¦‚æžœè¯´RNçš„è°ƒè¯•æ¨¡å¼æ˜¯è§£æ”¾äº†åŽŸç”Ÿå¼€å‘çš„è°ƒè¯•ï¼Œé‚£ä¹ˆ Weex çš„è°ƒè¯•æ–¹å¼å¯ä»¥è¯´æ˜¯èµ‹äºˆäº† web æ¨¡å¼è°ƒè¯•åŽŸç”Ÿåº”ç”¨çš„èƒ½åŠ›ã€‚ æ–¹æ³•ä¸€æ­¤æ–¹æ³•å¤šç”¨äºŽè§£å†³ bugï¼Œæ£€æµ‹æŽ§ä»¶çš„å¸ƒå±€é—®é¢˜ 1234# è°ƒè¯•å•ä¸ªé¡µé¢$ weex debug your_weex.vue# è°ƒè¯•æ•´ä¸ªå·¥ç¨‹$weex debug your/path -e App.vue æ‰§è¡Œè°ƒè¯•å‘½ä»¤åŽï¼Œä¼šå°†æŒ‡å®šçš„æ–‡ä»¶æ‰“åŒ…æˆ JSBundleï¼Œå¹¶å¯åŠ¨ä¸€ä¸ª weex Devtool æœåŠ¡ï¼ˆhttp://localhost:8088å¯è®¿é—®ï¼Œå¦‚ä¸‹å›¾ï¼‰ï¼ŒåŒæ—¶å°† JSBundle æ–‡ä»¶ä¼ é€’è‡³è¯¥æœåŠ¡è·Ÿè·¯å¾„ä¸‹çš„weexæ–‡ä»¶å¤¹å†…ï¼ˆhttp://localhost:8088/weex/App.jsï¼Œå®žé™…æ˜¯ä¸‹å›¾å³è¾¹äºŒç»´ç çš„çš„å†…å®¹ï¼‰ã€‚ ä½¿ç”¨ Weex Playground App æ‰«ä¸‹å·¦äºŒç»´ç è¿›å…¥è°ƒè¯•æ¨¡ï¼Œè§ä¸‹å›¾ å†æ¬¡æ‰«ç å³æ–¹äºŒç»´ç ï¼Œç‚¹å‡»ã€inspectorã€‘å³å¯è¿›å…¥è°ƒè¯•æ¨¡å¼ã€‚ æ¯ä¸€ä¸ªæŽ§ä»¶éƒ½æ˜¯ç›¸åŒçš„æ•°æ®ç»“æž„ 1&lt;view class=&quot;WXText&quot; frame=&quot;&#123;&#123;0,0&#125;,&#123;414,736&#125;&#125;&quot; hidden=&quot;NO&quot; alpha=&quot;1&quot; opaque=&quot;YES&quot;&gt;&lt;/view&gt; classï¼šä»£è¡¨åŽŸå£°ç©ºé—´ç±»åž‹ frameï¼šè¡¨ç¤ºç©ºé—´çš„åæ ‡å’Œå¤§å° hiddenï¼šä»£è¡¨æ˜¾éšæ€§ï¼Œcssä¸­visibilityè®¾ç½®çš„å€¼ alphaï¼šä¸é€æ˜Žåº¦ï¼Œcssä¸­opacityè®¾ç½®çš„å€¼ opaqueï¼šé»˜è®¤ä¸ºYESï¼Œæ‰“å¼€ç»˜å›¾ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–çš„å¼€å…³ï¼Œå³ä¸åŽ»è®¡ç®—å¤šé€æ˜Žå—é‡åˆåŽçš„çœŸæ­£é¢œè‰²ï¼Œä»Žè€Œå‡å°GPUçš„åŽ‹åŠ›ï¼Œweexä¸­å…·ä½“æœ‰æ²¡æœ‰åœ°æ–¹å¯ä»¥è®¾ç½®è¿™ä¸ªå¼€å…³æš‚æ—¶ä¸æ¸…æ¥šï¼Œæœ‰çŒŽå¥‡å¿ƒçš„æœ‹å‹å¯ä»¥ç ”ç©¶ä¸‹ã€‚ æ–¹æ³•äºŒæ­¤æ–¹æ³•å¤šç”¨äºŽå¼€å‘è°ƒè¯•ï¼Œè¯•è¯•è§‚å¯Ÿç»“æžœ 1$ weex your_weex.vue å¦‚æžœå‡ºçŽ° access æƒé™æŠ¥é”™ï¼Œä½¿ç”¨ç®¡ç†å‘˜æŒ‡ä»¤ 1$ sudo weex your_weex.vue æ­¤æ—¶æœ¬åœ°åŒæ—¶å¯åŠ¨ä¸€ä¸ªwatchçš„æœåŠ¡å™¨ç”¨äºŽæ£€æŸ¥ä»£ç å˜æ›´ï¼Œè‡ªåŠ¨é‡æ–°æž„å»º JSBundleï¼Œè§†è§‰åŒæ­¥åˆ·æ–°ã€‚ ä¸Šå›¾çœ‹åˆ°çš„æ•ˆæžœå³ä¸ºH5é¡µé¢çš„æ•ˆæžœï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨æ•´ä¸ªå•é¡µç¼–å†™å®ŒæˆåŽåœ¨ä½¿ç”¨ Weex Playground App æ‰«ç æŸ¥çœ‹çœŸæœºæ•ˆæžœï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥åœ¨ç¼–å†™çš„åŒæ—¶ä½¿ç”¨çœŸæœºè§‚å¯Ÿä»£ç çš„è¿è¡Œæ•ˆæžœï¼Œæ¯æ¬¡é‡æ–°æž„å»ºåŒ…åˆ°é‡ç»˜çš„é€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«çš„ã€‚ ä½†å‰ææ˜¯ä½ è¦ä¿è¯ï¼Œä½ çš„æ‰‹æœºå’Œç”µè„‘çš„è¿žåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸‹ï¼Œå¹¶ä¸”ä½¿ç”¨IPè®¿é—®ã€‚ Weex çš„åŽŸç† è™½ç„¶è¯´ï¼ŒWeex å¯ä»¥æŠ¹å¹³ä¸‰ç«¯å¼€å‘çš„å·®å¼‚ï¼Œä½†æ˜¯çŸ¥å…¶ç„¶ä¹Ÿåº”çŸ¥å…¶æ‰€ä»¥ç„¶ä½¿ç”¨èµ·æ¥æ‰èƒ½æ¸¸åˆƒæœ‰ä½™ã€‚ æ‰“åŒ…ç†Ÿæ‚‰ React Native çš„äººéƒ½çŸ¥é“ï¼Œ React Native çš„å‘å¸ƒå®žé™…ä¸Šå°±æ˜¯å‘å¸ƒä¸€ä¸ª JSBundleï¼ŒWeex ä¹Ÿæ˜¯è¿™æ ·ï¼Œä½†ä¸åŒçš„æ˜¯ï¼ŒWeex å°†å·¥ç¨‹è¿›è¡Œåˆ†åŒ…ï¼Œå‘å¸ƒå¤šä¸ª JSBundleã€‚å› ä¸º Weex æ˜¯å•é¡µç‹¬ç«‹å¼€å‘çš„ï¼Œæ¯ä¸ªé¡µé¢éƒ½å°†é€šè¿‡ Weex æ‰“åŒ…å™¨å°† vue/we é¡µé¢æ‰“åŒ…æˆä¸€ä¸ªå•ç‹¬çš„ JSBundleï¼Œè¿™æ ·çš„å¥½å¤„åœ¨äºŽå‡å°‘å•ä¸ª bundle åŒ…çš„å¤§å°ï¼Œä½¿å…¶å˜çš„è¶³å¤Ÿå°å·§è½»é‡ï¼Œæé«˜å¢žé‡æ›´æ–°çš„æ•ˆçŽ‡ã€‚ 123456# ä»…æ‰“åŒ…$ npm run build# æ‰“åŒ…+æž„å»º$ weex build ios# æ‰“åŒ…+æž„å»º+å®‰è£…æ‰§è¡Œ$ weex run ios ä»¥ä¸Šä¸‰ç§å‡ä¼šè§¦å‘ Weex å¯¹å·¥ç¨‹è¿›è¡Œæ‰“åŒ…ã€‚åœ¨æˆ‘ä»¬æ‰§è¡Œäº†ä»¥ä¸Šæ‰“åŒ…å‘½ä»¤åŽï¼Œæ‰€æœ‰çš„å·¥ç¨‹æ–‡ä»¶å°†è¢«å•ç‹¬æ‰“æˆä¸€ä¸ªç‹¬ç«‹çš„ JSBundleï¼Œå¦‚ä¸‹ï¼š æ‰“åŒ…åŽçš„ JSBundle æœ‰ä¸¤ç§æ ¼å¼ 12345678910# ç”±.vueæ–‡ä»¶æ‰“åŒ…å‡ºæ¥çš„åŒ…æ ¼å¼ï¼ˆç®€å†™ï¼‰ï¼Œä½¿ç”¨ vue 2.0 è¯­æ³•ç¼–å†™// &#123; &quot;framework&quot;: &quot;Vue&quot;&#125; /******/ (function(modules) &#123; ......./******/ &#125;)# ç”±.weæ–‡ä»¶æ‰“åŒ…å‡ºæ¥çš„åŒ…æ ¼å¼ï¼ˆç®€å†™ï¼‰ï¼Œä½¿ç”¨ weex è¯­æ³•ç¼–å†™// &#123; &quot;framework&quot;: &quot;Weex&quot; &#125;/******/ (function(modules) &#123; ......./******/ &#125;) ä¸åŒçš„å¤´éƒ¨æ˜¯è¦å‘Šè¯‰ä½¿ç”¨ä»€ä¹ˆè¯­æ³•è§£æžæ­¤JSBundleã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬å‡†å¤‡ã€Œçƒ­æ›´æ–°çš„åŒ…ã€å°±å·²ç»å‡†å¤‡å®Œæ¯•äº†ï¼ŒæŽ¥ä¸‹å°±æ˜¯å‘åŒ…æ‰§è¡Œäº†ã€‚ å‘åŒ…æ‰“åŒ…åŽçš„ JSBundle ä¸€èˆ¬å‘å¸ƒåˆ°å‘åŒ…æœåŠ¡å™¨ä¸Šï¼Œå®¢æˆ·ç«¯ä»ŽæœåŠ¡å™¨æ›´æ–°åŒ…åŽå³å¯åœ¨ä¸‹æ¬¡å¯åŠ¨æ‰§è¡Œæ–°çš„ç‰ˆæœ¬ï¼Œè€Œæ— éœ€é‡æ–°ä¸‹è½½ appï¼Œå› ä¸ºè¿è¡Œä¾èµ–çš„ WeexSDK å·²ç»å­˜åœ¨äºŽå®¢æˆ·ç«¯äº†ï¼Œé™¤éžæ–°åŒ…ä¾èµ–äºŽæ–°çš„ SDKï¼Œè¿™ä¹Ÿæ˜¯çƒ­æ›´æ–°çš„åŸºæœ¬åŽŸç†ã€‚ ã€WeexSDKã€‘åŒ…æ‹¬ ã€JS Frameworkã€‘JSBundle çš„æ‰§è¡ŒçŽ¯å¢ƒ ã€JS-Native Bridgeã€‘ä¸­é—´ä»¶æˆ–è€…å«é€šè®¯æ¡¥æ¢ï¼Œä¹Ÿå«ã€Weex Runtimeã€‘ ã€Native Render Engineã€‘è§£æž js ç«¯å‘å‡ºçš„æŒ‡ä»¤åšåŽŸç”ŸæŽ§ä»¶å¸ƒå±€æ¸²æŸ“ æ‰§è¡ŒWeex çš„ iOS å’Œ Android å®¢æˆ·ç«¯çš„ã€JSFrameworkã€‘ä¸­éƒ½ä¼šè¿è¡Œä¸€ä¸ª JavaScript å¼•æ“Žï¼Œæ¥æ‰§è¡Œ JS bundleï¼ŒåŒæ—¶å‘å„ç«¯çš„æ¸²æŸ“å±‚å‘é€è§„èŒƒåŒ–çš„æŒ‡ä»¤ï¼Œè°ƒåº¦å®¢æˆ·ç«¯çš„æ¸²æŸ“å’Œå…¶å®ƒå„ç§èƒ½åŠ›ã€‚iOS ä¸‹é€‰æ‹©äº† JavaScriptCore å†…æ ¸ï¼Œè€Œåœ¨ Android ä¸‹é€‰æ‹©äº† UC æä¾›çš„ v8 å†…æ ¸ï¼ˆRNä¸¤ç«¯éƒ½æ˜¯JavaScriptCore å†…æ ¸ï¼‰ã€‚ JSBundle è¢« push åˆ°å®¢æˆ·ç«¯åŽå°±ä¼šåœ¨ JSFramework ä¸­æ‰§è¡Œï¼Œæœ€ç»ˆè¾“å‡ºä¸‰ç«¯å¯è¯»æ€§çš„ VNode èŠ‚ç‚¹ï¼Œæ•°æ®ç»“æž„ç®€åŒ–å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526&#123; tag: &apos;div&apos;, data: &#123; staticStyle: &#123; justifyContent: &apos;center&apos; &#125; &#125;, children: [&#123; tag: &apos;text&apos;, data: &#123; staticClass: &apos;txt&apos; &#125;, context: &#123; $options: &#123; style: &#123; freestyle: &#123; textAlign: &apos;center&apos;, fontSize: 200 &#125; &#125; &#125; &#125;, children: [&#123; tag: &apos;&apos;, text: &apos;æ–‡å­—&apos; &#125;] &#125;]&#125; æœ‰äº†ç»Ÿä¸€çš„ VNode èŠ‚ç‚¹ï¼Œå„ç«¯å³å¯æ ¹æ®è‡ªå·±çš„æ–¹æ³•è§£æžæ¸²æŸ“åŽŸç”ŸUIäº†ï¼Œä¹‹å‰çš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯ä¸€è‡´çš„ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ ¼å¼ã€æ‰“åŒ…ç¼–è¯‘è¿‡ç¨‹ã€æ¨¡æ¿æŒ‡ä»¤ã€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€æ•°æ®ç»‘å®šç­‰ã€‚ ç„¶è€Œç”±äºŽç›®æ ‡æ‰§è¡ŒçŽ¯å¢ƒä¸åŒï¼ˆæµè§ˆå™¨å’Œ Weex å®¹å™¨ï¼‰ï¼Œåœ¨æ¸²æŸ“çœŸå®žåŽŸç”Ÿ UI çš„æ—¶å€™è°ƒç”¨çš„æŽ¥å£ä¹Ÿä¸åŒã€‚ æ­¤è¿‡ç¨‹å‘ç”Ÿåœ¨ã€Weex SDKã€‘çš„ã€Weex Runtimeã€‘ä¸­ã€‚ æœ€æ€»ã€Weex Runtimeã€‘å‘èµ·æ¸²æŸ“æŒ‡ä»¤callNative({...})æœ‰RenderEngineå®Œæˆæ¸²æŸ“ æ€»ç»“ä¸€ä¸‹ Weex æ–‡ä»¶åˆ†åŒ…æ‰“åŒ…æˆå•ä¸ª JSBundle æ–‡ä»¶ å‘å¸ƒåˆ°å‘åŒ…æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡çƒ­æ›´æ–° push åˆ°ç”¨æˆ·çš„å®¢æˆ·ç«¯ï¼Œäº¤ç”±ã€Weex SDKã€‘æ‰§è¡Œè§£æž SDK ä¸­çš„ã€JS Frameworkã€‘æ‰§è¡Œ Bundle è„šæœ¬ç”Ÿæˆ Virtual DOM Virtual DOM ç»ç”±å„ç«¯æ‰§è¡ŒçŽ¯å¢ƒã€Weex Runtimeã€‘è§£æžç¿»è¯‘æˆæ‰§è¡ŒæŒ‡ä»¤ ã€Native RenderEngineã€‘æŽ¥æ”¶åˆ°æŒ‡ä»¤åŽæ‰§è¡Œæ¸²æŸ“æ“ä½œï¼Œä½œå‡ºæ¸²æŸ“å‡ºå®Œæ•´çš„ç•Œé¢ å®˜æ–¹é…å›¾ï¼š æ‰©å……é…å›¾ï¼š Weex çš„å·¥ä½œæ¨¡å¼1. å…¨é¡µæ¨¡å¼ç›®å‰æ”¯æŒå•é¡µä½¿ç”¨æˆ–æ•´ä¸ª App ä½¿ç”¨ Weex å¼€å‘ï¼ˆè¿˜ä¸å®Œå–„ï¼Œéœ€è¦å¼€å‘ Router å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼‰ã€‚ æœ¬æ–‡å…ˆè¡Œçš„ä¸¥é€‰ demo ä¾¿æ˜¯ä½¿ç”¨ç¬¬äºŒç§å…¨å±æ¨¡å¼ï¼Œä½¿ç”¨ Weex å¼€å‘æ•´ä¸ª Appï¼ŒæœŸé—´è§¦ç¢°åˆ° Weex çš„åœ¨æ­¤æ¨¡å¼ä¸‹è¯¸å¤šä¸è¶³ï¼Œå¦‚ StatusBar æŽ§åˆ¶ã€Tab åˆ‡æ¢ã€å¼€åœºåŠ¨ç”»è‡ªå®šä¹‰ã€3DTouchã€ Widget ç­‰ç­‰åŽŸç”Ÿçš„ç‰¹è‰²åŠŸèƒ½æ²¡æœ‰çŽ°æˆçš„ APIï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±æ‰©å±•ï¼Œç”šè‡³æ‰©å±•ä¸äº†ã€‚å› æ­¤å¹¶ä¸èƒ½å®Œå…¨â€œç­æŽ‰â€åŽŸç”Ÿã€‚ æ‰€ä»¥ï¼Œç›®å‰åœ¨é˜¿é‡Œå†…éƒ¨ä½¿ç”¨è¾ƒå¤šçš„æ˜¯æ­¤æ¨¡å¼ä¸­çš„å•é¡µæ¨¡å¼ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®˜æ–¹æ–‡æ¡£åœ¨ä»‹ç»åŽŸç†åŽå°±ç›´æŽ¥å¥”å…¥é›†æˆåˆ°åŽŸç”Ÿåº”ç”¨çš„ä¸»é¢˜ä¸ŠåŽ»äº†ã€‚ 2. Native Component æ¨¡å¼æŠŠ Weex å½“ä½œä¸€ä¸ª iOS/Android ç»„ä»¶æ¥ä½¿ç”¨ï¼Œç±»æ¯” ImageViewã€‚è¿™ç±»éœ€æ±‚éå¸ƒæ‰‹æ·˜ä¸»é“¾è·¯ï¼Œå¦‚é¦–é¡µã€ä¸»æœç»“æžœã€äº¤æ˜“ç»„ä»¶åŒ–ç­‰ï¼Œè¿™ç±» Native é¡µé¢ä¸»ä½“å·²ç»å¾ˆç¨³å®šï¼Œä½†æ˜¯å±€éƒ¨åŠ¨æ€åŒ–éœ€æ±‚æ—ºç››å¯¼è‡´é¢‘ç¹å‘ç‰ˆï¼Œè§£å†³è¿™ç±»é—®é¢˜ä¹Ÿæ˜¯ Weex çš„é‡ç‚¹ã€‚ 3. H5 Component æ¨¡å¼åœ¨ H5 ç§ä½¿ç”¨ Weexï¼Œç±»æ¯” WVCã€‚ä¸€äº›è¾ƒå¤æ‚æˆ–ç‰¹æ®Šçš„ H5 é¡µé¢çŸ­æœŸå†…æ— æ³•å®Œå…¨è½¬ä¸º Weex å…¨é¡µæ¨¡å¼ï¼ˆæˆ–RNï¼‰ï¼Œæ¯”å¦‚äº’åŠ¨ç±»é¡µé¢ã€ä¸€äº›å¤æ‚é¢‘é“é¡µç­‰ã€‚è¿™ä¸ªç—›ç‚¹çš„è§£å†³åŠžæ³•æ˜¯ï¼šåœ¨çŽ°æœ‰çš„H5é¡µé¢ä¸Šåšå¾®è°ƒï¼Œå¼•å…¥Native è§£å†³é•¿åˆ—è¡¨å†…å­˜æš´å¢žã€æ»šåŠ¨ä¸æµç•…ã€åŠ¨ç”»/æ‰‹åŠ¿ä½“éªŒå·®ç­‰é—®é¢˜ã€‚ å¦å¤–ï¼ŒWVC å°†ä¼šèžå…¥åˆ° Weex ä¸­ï¼Œæˆä¸º Weex çš„ H5 Components æ¨¡å¼ã€‚ ä¸¥é€‰ App Demo å®žçŽ°è¿‡ç¨‹ä¸­çš„æ„Ÿæƒ³Vue-Router &amp; Tab ç”±äºŽ Weex æ²¡æœ‰å°è£… Tab çš„ç»„ä»¶ï¼Œå› æ­¤ç¬”è€…ä½¿ç”¨äº†å¾ˆå¤šæ–¹æ³•æ¥å®žçŽ°Tabåˆ‡æ¢çš„åŠŸèƒ½ã€‚ 1ã€vue-routerï¼šrouter æ€æƒ³æ–¹ä¾¿ç®¡ç†ï¼Œä½†æ˜¯æ¯æ¬¡åˆ‡æ¢éƒ½æ˜¯æ–°çš„å®žä¾‹ï¼Œæ²¡æœ‰tabæ¨¡å¼2ã€opacityã€visablityï¼šæ­¤å¤„éœ€è¦æ³¨æ„ï¼ŒWeexçš„æ¸²æŸ“æœºåˆ¶å’Œwebæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå¯¹å¤«å±‚è®¾ç½® opacity æˆ–è€…visiablityéšè—æ˜¯æ— æ³•åŒæ—¶éšè—å®šä½ä¸ºposition:fixed; çš„å­å…ƒç´ ã€‚3ã€positionã€transformï¼šæ”¹å˜ tab å±‚çš„ä½ç½®ï¼Œæ­¤æ–¹æ³•åœ¨å®šä½ä¸º position:fixed; çš„å­å…ƒç´ ä¸Šä¾ç„¶æ— æ•ˆã€‚ image &amp; iconfontWeex ä¸­æ‰€æœ‰çš„é™æ€èµ„æºåŸºæœ¬éƒ½æ˜¯ç½‘ç»œèµ„æºï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€å­—ä½“å›¾ç‰‡ç­‰ï¼Œæ‰€ä»¥ä½¿ç”¨ iconfont å›¾æ ‡æ˜¯å†åˆé€‚ä¸è¿‡çš„äº†ã€‚ æ­¤ demo ä¸­æ‰€æœ‰çš„ icon å‡ä½¿ç”¨ çš„iconfontã€‚ æ­¤å¤„å¼ºçƒˆæŽ¨èä¸€ä¸ªç«™ç‚¹ www.iconfont.cnã€‚ åœ¨æ­¤å¹³å°ä½ å¯ä»¥æ‰¾åˆ°å‡ ä¹Žæ‰€æœ‰ä½ éœ€è¦çš„ iconï¼Œä½ ä¹Ÿå¯ä»¥ä¸Šä¼ è‡ªå·±çš„ icon åˆ°è‡ªå·±åˆ›å»ºçš„é¡¹ç›®ä¸­ã€‚åŒæ—¶è¯¥ç³»ç»Ÿè¿˜æä¾›ç”Ÿæˆttfã€woff èµ„æºï¼Œå¹¶ä¸”åšäº† cdn åŠ é€Ÿå’Œ gzip åŽ‹ç¼©ï¼Œæ˜¯ä¸æ˜¯è·Ÿ Weexå¾ˆé…å‘¢ï¼Ÿ ä¸è¿‡ä¹Ÿæœ‰é£Žé™©ï¼Œå°±æ˜¯ï¼Œå¦‚æžœå“ªå¤©é˜¿é‡Œä¸åœ¨ç»´æŠ¤å¹¶å›žæ”¶è¯¥å¹³å°çš„èµ„æºäº†ï¼Œä½ çš„ app å¯èƒ½å°±ä¼šå˜æˆè¿™æ ·ï¼Œå…¨æ˜¯æ–¹æ¡†ï¼Œæˆ–è€… padding æŽ‰ä½  H5 çš„é¡µé¢ å½“ç„¶ï¼Œè¿™ç§åŠæƒ…å†µå‡ºçŽ°çš„å‡ çŽ‡å¾ˆå°ï¼Œå¦‚æžœä½ æ˜¯ä¸€ä¸ªå¤§å…¬å¸ï¼Œä½ æ‰‹ä¸Šæœ‰æ›´å¥½çš„èµ„æºæ€¥é€Ÿæ–¹æ¡ˆï¼Œé‚£å°±è‡ªå·±ä¿å­˜å§ã€‚ webview UIWebViewæ˜¯æˆ‘ä»¬å¼€å‘Appå¸¸ç”¨çš„ä¸€ä¸ªæŽ§ä»¶ï¼Œä¸è¿‡Weexå¸®æˆ‘ä»¬å°è£…å¥½çš„APIæ˜Žæ˜¾æ—¶ä¸å¤Ÿç”¨çš„ï¼Œç›®å‰åªæœ‰pagestartã€pagefinishã€errorï¼Œå¹¶æ²¡æœ‰å°è£…åƒRNé‚£æ ·çš„onShouldStartLoadWithRequestæ‹¦æˆªåœ°å€è¯·æ±‚çš„APIï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œè¿™æœ‰äº›ä¸åˆç†ï¼Œå¹¶ä¸æ¸…æ¥šè½®å­çš„åˆ¶é€ è€…æ˜¯ä»€ä¹ˆæ„å›¾ã€‚ æ€§èƒ½æ€§èƒ½æ˜¯ä¸€ä¸ªå¤§è¯¾é¢˜ï¼Œåœ¨æ­¤å°±ä¸åšå±•å¼€äº†ï¼Œåªç¨å¾®æåŠä¸€äº›æˆ‘ä»¬å¼€å‘éœ€è¦æ³¨æ„çš„å‡ ç‚¹ æ€§èƒ½å½±å“ç‚¹ï¼šUIæ›´æ–°&gt;UIäº‹ä»¶å“åº”&gt;åŽå°è¿ç®— åˆç†ä¼˜åŒ–è¿‡åœº&amp;åŠ¨ç”»ï¼Œè¿‡åœºå’Œ console å®¹æ˜“å¼•èµ· app crash éœ€è¦æ³¨æ„ é™ä½Ž js &lt;-&gt; native çš„é€šä¿¡é¢‘çŽ‡ ä¼˜åŒ–listç»“æž„ï¼Œé™ä½Žé‡æŽ’é‡ç»˜åŽ‹åŠ› æŠŠä¼˜å…ˆçº§ä½Žä¸”è€—æ—¶è¾ƒé•¿çš„å·¥ä½œæŽ¨åŽå¤„ç† Weex çš„çŽ°çŠ¶Weex è§£å†³äº†çš„æˆ‘çš„å‘å¸ƒæˆ‘åšä¸»ï¼ˆçƒ­æ›´æ–°ï¼‰è„šæœ¬è¯­è¨€å¤©ç”Ÿè‡ªå¸¦â€œçƒ­æ›´æ–°â€ï¼ŒWeex é’ˆå¯¹ React Native çš„çƒ­æ›´æ–°ç­–ç•¥åšäº†ä¼˜åŒ–ï¼Œå°† WeexSDK äº‹å…ˆç»‘åˆ°äº†å®¢æˆ·ç«¯ä¸Šï¼Œå¹¶ä¸”å¯¹ JSBundle è¿›è¡Œåˆ†åŒ…å¢žé‡æ›´æ–°ï¼Œå¤§å¤§æé«˜äº†çƒ­æ›´æ–°çš„æ•ˆçŽ‡ã€‚ ä½†ä¼˜ç‚¹ä¹Ÿæ˜¯ç¼ºç‚¹ï¼Œå¦‚æžœæ–°åŒ…ä¾èµ–äºŽå¿ƒçš„ SDKï¼Œæ­¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å‘å¸ƒè¿˜æœ‰æ–° SDK çš„ app åˆ°åº”ç”¨å¸‚åœºï¼Œç”¨æˆ·ä¹Ÿé¡»ä»Žå¸‚åœºæ›´æ–°æ­¤ appã€‚ä¸å¤Ÿéšç€ WeexSDK ç‰ˆæœ¬çš„ç¨³å®šåŽï¼Œç›¸ä¿¡æ­¤ç­–ç•¥çš„ä¼˜åŠ¿å°±ä¼šå‡¸æ˜¾å‡ºæ¥ã€‚ æ€§èƒ½é—®é¢˜Weex æ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰©å±•ã€é«˜æ€§èƒ½æ¡†æž¶ã€‚é›†æˆä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥ç›´æŽ¥åœ¨ HTML5 é¡µé¢åµŒå…¥ï¼Œä¹Ÿå¯åµŒåœ¨åŽŸç”ŸUIä¸­ã€‚ç”±äºŽå’Œ React Native ä¸€æ ·ï¼Œéƒ½ä¼šè°ƒç”¨ Native ç«¯çš„åŽŸç”ŸæŽ§ä»¶ï¼Œæ‰€ä»¥åœ¨æ€§èƒ½ä¸Šæ¯” Hybrid é«˜å‡ºä¸€ä¸ªå±‚æ¬¡ã€‚ ç»Ÿä¸€ä¸‰ç«¯è™½è¯´è¿™æ˜¯ä¸€ä¸ªå¤§èƒ†çš„å®žè·µï¼Œä½†å¯¹äºŽå¤§å‰ç«¯ç¤¾åŒºçš„ç»Ÿä¸€æœ‰ç€æŽ¨åŠ¨ä½œç”¨ï¼Œæ˜¾ç„¶é˜¿é‡Œåœ¨è¿™ä¸€æ–¹é¢å·²ç»è¿ˆå‡ºäº†ç¬¬ä¸€æ­¥ã€‚åŸºæœ¬è§£å†³äº†ä¸‰ç«¯åŒç­‰éœ€æ±‚å¯¼è‡´èµ„æºæµªè´¹çš„ç—›ç‚¹ã€‚ ä½†åŽæœŸå¯èƒ½ä¼šå‡ºçŽ°è¿™ç§çŽ°è±¡ï¼Œå¼€å‘ä¸€ä¸ªä¸‰ç«¯çš„ App ä¼šä»ŽåŽŸæ¥çš„ä¸ªäººå˜æˆå››ä¸ªäººï¼Œå¤šå‡ºæ¥çš„é‚£ä¸€ä¸ªäººè´Ÿè´£å¼€å‘ Weex å•é¡µã€‚ æ„æ€å°±æ˜¯ï¼Œä¸‰ç«¯ç»Ÿä¸€çš„ä¸å¤Ÿå½»åº•ï¼Œä½†å°±ç›®å‰çš„çŽ¯å¢ƒä¸‹ï¼Œè¿™ä¸€å¥æ˜¯æœ€ä¼˜æ–¹æ¡ˆäº†ï¼Œå´æ˜¯æé«˜äº†å¼€å‘æ•ˆçŽ‡ã€‚å¤§å‰ç«¯å°†æ¥å°†å¦‚ä½•ä¸€ç»Ÿä¸‰å›½æˆ‘ä»¬ä¸”è¡Œä¸”è§‚æœ›å§ã€‚ åšæ¸¸æˆå¯¹äºŽä¸€äº›äº¤äº’è§†è§‰ç»Ÿä¸€ä¸”æ²¡æœ‰å¾ˆå¤§çš„æ€§èƒ½éœ€æ±‚çš„æ¸¸æˆï¼ŒWeex è¿˜æ˜¯å¯ä»¥èƒœä»»çš„ã€‚ è¿‘æœŸç¬”è€…å°†å°è¯•å‘å¸ƒä¸€æ¬¾çº¯Weexæž„å»ºçš„ç›Šæ™ºå°æ¸¸æˆï¼Œæ•¬è¯·æœŸå¾…ã€‚ æœ‹å‹ä»¬å¯ä»¥ç”¨è¿™ä¸ªdemoä½“éªŒä¸‹ Weex ç‰ˆæ‰«é›·æ¸¸æˆå¼€å‘ Weex â€œæš‚æ—¶â€æ”¾å¼ƒçš„è™½ç„¶è¯´å¤§ä¸€ç»Ÿäº‹ä»¶ç™¾åˆ©çš„äº‹ï¼Œä½†å¹¶éžæ— ä¸€å®³ã€‚ å·®å¼‚åŒ–å¯¹äºŽä¸€äº›æœ‰å·®å¼‚åŒ–å®Œç¾Žä½“éªŒè¿½æ±‚çš„é¡¹ç›®å°±åªèƒ½æ”¶æ•›æˆ–è€…æ”¾å¼ƒäº†ã€‚ ç‹¬ç«‹çš„ bug ä¿®å¤å¯¹äºŽä¸‰ç«¯åŒæ—¶ä¸Šçº¿ï¼Œä¸€ç«¯å­˜åœ¨ bug çš„æƒ…å†µï¼ŒWeex å¹¶ä¸èƒ½ä¿è¯åšåˆ°ç‰µä¸€å‘è€Œä¸åŠ¨å…¨èº«ã€‚ ä¸ªæ€§åŒ–åŠŸèƒ½æ¯”å¦‚å®‰å“çš„æ³¢çº¹æŒ‰é’®ã€3DTouchã€ Widgetã€iWatchç‰ˆæœ¬ç­‰ï¼Œç›®å‰è¿™äº›åŠŸèƒ½è¿˜æ˜¯æ²¡æœ‰çš„ï¼Œä¸çŸ¥é“ä»¥åŽ Weexæ˜¯å¦å°†å…¶åŠ å…¥åˆ°å®˜æ–¹æ–‡æ¡£ä¸­ã€‚ å£°æ˜Žä»¥ä¸Šå‡ä¸ºä¸ªäººè§è§£ï¼Œä¸ä»£è¡¨å®˜æ–¹ã€‚å¦‚æœ‰ä¸å½“ä¹‹å¤„è¿˜æœ›æŒ‡æ­£ã€‚ å‚è€ƒ[ 1 ] Weexå®˜æ–¹æ–‡æ¡£ - http://weex.apache.org/cn/references/[ 2 ] åœºæ™¯ç ”è¯» - Native æ€§èƒ½ç¨³å®šæ€§æžè‡´ä¼˜åŒ– - https://yq.aliyun.com/articles/69005[ 3 ] é—¨æŸ³ - è¯¦è§£ Weex JS Framework çš„ç¼–è¯‘è¿‡ç¨‹ - https://yq.aliyun.com/articles/59935?spm=5176.8067842.tagmain.66.1QA1fL[ 4 ] é˜¿é‡Œç™¾å· - æ·±åº¦æ­ç§˜é˜¿é‡Œç§»åŠ¨ç«¯é«˜æ€§èƒ½åŠ¨æ€åŒ–æ–¹æ¡ˆWeex - https://segmentfault.com/a/1190000005031818[ 5 ] ä¸€ç¼•æ®‡æµåŒ–éšåŠè¾¹å†°éœœ - Weex æ˜¯å¦‚ä½•åœ¨ iOS å®¢æˆ·ç«¯ä¸Šè·‘èµ·æ¥çš„ - http://www.jianshu.com/p/41cde2c62b81 è½¬è½½è¯·æ ‡æ˜Žå‡ºå¤„ä½œè€…ï¼šæœ¨ç¾½ zwwillé¦–å‘åœ°å€ï¼šhttps://github.com/zwwill/bloâ€¦]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>Weex</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>Weex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Weex åœ¨Androidç«¯çš„å®žè·µ]]></title>
    <url>%2Fposts%2F31c875b0.html</url>
    <content type="text"><![CDATA[ShowPage ShowPage ShowPage ä»€ä¹ˆæ˜¯weex Write Once, Run Everywhere Weexèƒ½å¤Ÿå®Œç¾Žå…¼é¡¾æ€§èƒ½ä¸ŽåŠ¨æ€æ€§ï¼Œè®©ç§»åŠ¨å¼€å‘è€…é€šè¿‡ç®€æ·çš„å‰ç«¯è¯­æ³•å†™å‡ºNativeçº§åˆ«çš„æ€§èƒ½ä½“éªŒï¼Œå¹¶æ”¯æŒiOSã€å®‰å“ã€YunOSåŠWebç­‰å¤šç«¯éƒ¨ç½²ã€‚çœŸæ­£å®žçŽ°ä¸€æ¬¡æ’°å†™ï¼Œå¤šå¹³å°è¿è¡Œã€‚ Weex æä¾›äº†å¤šç«¯ä¸€è‡´çš„æŠ€æœ¯æ–¹æ¡ˆã€‚ é¦–å…ˆ web å¼€å‘ä½“éªŒåœ¨å„ç«¯å½“ä¸­æ˜¯ç›¸åŒçš„ã€‚åŒ…æ‹¬è¯­æ³•è®¾è®¡å’Œå·¥ç¨‹é“¾è·¯ã€‚ å…¶æ¬¡ï¼ŒWeex çš„ç»„ä»¶ã€æ¨¡å—è®¾è®¡éƒ½æ˜¯ iOSã€Androidã€Web çš„å¼€å‘è€…å…±åŒè®¨è®ºå‡ºæ¥çš„ï¼Œæœ‰ä¸€å®šçš„é€šç”¨æ€§å’Œæ™®éæ€§ã€‚ Weex å¼€å‘åŒä¸€ä»½ä»£ç ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ç«¯ä¸Šåˆ†åˆ«æ‰§è¡Œï¼Œé¿å…äº†å¤šç«¯çš„é‡å¤ç ”å‘æˆæœ¬ã€‚ åœ¨åŒæž„è¿™æ¡è·¯ä¸Šï¼ŒWEEXæ¯”ReactNativeåšå¾—æ›´å½»åº•ï¼Œä»–â€œå‡ ä¹Žâ€åšåˆ°äº†ï¼Œâ€œä½ æ¥ä½¿ç”¨vueå†™ä¸€ä¸ªwebappï¼Œæˆ‘é¡ºä¾¿ç»™ä½ ç¼–è¯‘æˆäº†ioså’Œandroidçš„åŽŸç”Ÿappâ€ ä¸ºä»€ä¹ˆè¦ç”¨weexä¸œè¥¿æ˜¯å¥½ä¸œè¥¿ï¼Œå¯¹äºŽç”µå•†è¿™ç±»ç»å¸¸éœ€è¦å˜åŠ¨ APP ç•Œé¢çš„å°¤å…¶é€‚ç”¨ã€‚çœ‹çœ‹å¤©çŒ«ã€æ·˜å®é¦–é¡µä½ å°±çŸ¥é“äº†ã€‚ä½†ä¸€å®šä¸ä¼šé€‚ç”¨äºŽæ‰€æœ‰äººï¼Œéœ€æ±‚åƒå˜ä¸‡åŒ–ï¼Œæ€»æœ‰æ¡†æž¶ç…§é¡¾ä¸åˆ°çš„åœ°æ–¹ã€‚æˆ‘åœ¨ä¸‹é¢ä¹Ÿåˆ—å‡ å¼ æˆ‘ä»¬ç”¨weexåŽçš„é¦–é¡µã€‚ ç”¨åŽŸç”Ÿå¦‚ä½•å®žçŽ°ï¼Ÿå½“æˆ‘æ²¡ç”¨weexçš„æ—¶å€™ï¼Œæˆ‘æƒ³ï¼šè¿™è¿˜éžå¾—ç”¨weexï¼Œæˆ‘ç”¨nativeä¹Ÿèƒ½å®žçŽ°ã€‚æˆ‘æŽ¥ä¸åŒçš„typeå±•çŽ°ä¸åŒçš„UIä¸å°±è¡Œäº†ã€‚è¿™å½“ç„¶å¯ä»¥äº†ï¼Œæˆ‘å§‹ç»ˆç›¸ä¿¡ä¸€ç‚¹ï¼Œéœ€æ±‚é€šè¿‡ä¸åŒçš„æŠ€æœ¯æ‰‹æ®µéƒ½å¯ä»¥å®žçŽ°ï¼Œåªæ˜¯å®žçŽ°æ–¹å¼çš„ç®€æ˜“ç¨‹åº¦å’Œçµæ´»åº¦çš„å·®åˆ«ã€‚ ç”¨weexçš„ä¼˜åŠ¿ï¼Ÿé¦–å…ˆï¼Œweexæ˜¯ç»„ä»¶åŒ–çš„ã€‚ä»€ä¹ˆæ˜¯ç»„ä»¶åŒ–ï¼Ÿå¾ˆå¥½ç†è§£ï¼Œä»–çš„æ¯ä¸€å—å„¿éƒ½æ˜¯ç‹¬ç«‹ï¼Œæˆ‘ä»¬åªéœ€æ ¹æ®ä¸åŒçš„ç±»åž‹ï¼Œå°†ä¸åŒçš„ç»„ä»¶ç»„åˆåœ¨ä¸€èµ·å°±è¡Œäº†ï¼Œè€¦åˆåº¦å¾ˆä½Žï¼Œå½“ä¸€ä¸ªç»„ä»¶å‡ºé—®é¢˜ä¸ä¼šå½±å“å…¶ä»–ç»„ä»¶æ¸²æŸ“ã€‚ä½†å¦‚æžœæˆ‘ç”¨åŽŸç”Ÿå†™ï¼Œè‚¯å®šæ˜¯ä¸€é¡µï¼Œç„¶åŽæ ¹æ®ä¸åŒçš„æ•°æ®ï¼Œå±•çŽ°å‡ºæ¥ï¼Œå¯èƒ½ä¸€ä¸ªæ•°æ®å‡ºé”™ï¼Œæˆ‘è¿™ä¸€æ•´é¡µéƒ½æ˜¯ç©ºç™½çš„ã€‚å…¶æ¬¡ï¼Œweexè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¯ä»¥çƒ­æ›´æ–°è¿™ä¸ªé¡µé¢ï¼Œå‡å¦‚ï¼šçº¿ä¸Šæ—¶çªç„¶åˆæƒ³æ–°å¢žä¸€ç§ç»„ä»¶æ ·å¼ï¼ˆä¾‹å¦‚bannerå§ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™åŽŸç”Ÿç•Œé¢è‚¯å®šè¯´ï¼šç­‰ä¸‹ä¸ªç‰ˆæœ¬è¿­ä»£ç»™ä½ æ–°åŠ ã€‚ä½†weexå°±å¯ä»¥ç›´æŽ¥æ–°å¢žä¸€ç§ç»„ä»¶ï¼Œç„¶åŽå‘ä¸€ä¸ªçƒ­æ›´æ–°æ–‡ä»¶ï¼Œè®©åŽŸç”ŸåŠ è½½æ–°çš„jsæ–‡ä»¶å³å¯ã€‚ Android åµŒå…¥weexé›†æˆweexæœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯æºç é›†æˆï¼Œå¦ä¸€ç§sdkä¾èµ–ã€‚è¿™é‡Œæ²¡æœ‰å‘ï¼Œå°±æŒ‰ç…§æŽ¥å…¥æ–‡æ¡£æŽ¥å…¥å°±è¡Œï¼Œæœ‰ä¸€ç‚¹æ³¨æ„ä¸€ä¸‹ï¼Œç”¨æºç ä¾èµ–å¯ä»¥æ‹¿åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä½†é€šè¿‡æºç ä¾èµ–æ‹¿çš„ç‰ˆæœ¬å°±ä¼šè½åŽä¸€äº›ï¼Œä½†æ¯”è¾ƒç¨³å®šã€‚ 12345678910111213141516171819dependencies &#123; implementation fileTree(dir: &apos;../module_common/libs&apos;, include: [&apos;*.jar&apos;]) implementation &apos;com.android.support:appcompat-v7:27.1.1&apos; //router implementation &apos;com.alibaba:arouter-api:1.3.1&apos; annotationProcessor &apos;com.alibaba:arouter-compiler:1.1.4&apos; implementation &apos;com.alibaba:fastjson:1.2.31&apos; implementation &apos;com.google.code.gson:gson:2.8.5&apos; implementation &apos;com.github.bumptech.glide:glide:4.8.0&apos; annotationProcessor &apos;com.github.bumptech.glide:compiler:4.3.0&apos; implementation &apos;com.taobao.android:weex_sdk:0.20.3.0-beta@aar&apos; // æŽ¥å…¥ weex inspector implementation &apos;com.taobao.android:weex_inspector:0.20.3.0-beta@aar&apos; implementation &apos;com.squareup.okhttp3:okhttp:3.10.0&apos; implementation &apos;com.squareup.okhttp:okhttp:2.3.0&apos; implementation &apos;com.squareup.okhttp:okhttp-ws:2.3.0&apos;&#125; å®žçŽ°ä¸€ä¸ªImageAdapteræŽ¥å…¥weexåŽéœ€è¦è‡ªå·±å®žçŽ°ä¸€ä¸ªImageAdapterï¼Œç”¨äºŽå±•ç¤ºå›¾ç‰‡ï¼Œæˆ‘æ˜¯åŸºäºŽglideæ¡†æž¶çš„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©åŸºäºŽfrescoï¼Œpicassoç­‰ç­‰ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243import android.text.TextUtils;import android.widget.ImageView;import com.bumptech.glide.Glide;import com.taobao.weex.WXSDKManager;import com.taobao.weex.adapter.IWXImgLoaderAdapter;import com.taobao.weex.common.WXImageStrategy;import com.taobao.weex.dom.WXImageQuality;public class ImageAdapter implements IWXImgLoaderAdapter &#123; @Override public void setImage(final String url, final ImageView view, WXImageQuality quality, WXImageStrategy strategy) &#123; //å®žçŽ°è‡ªå·±çš„å›¾ç‰‡ä¸‹è½½ã€‚ WXSDKManager.getInstance().postOnUiThread(new Runnable() &#123; @Override public void run() &#123; if (view == null || view.getLayoutParams() == null) &#123; return; &#125; if (TextUtils.isEmpty(url)) &#123; view.setImageBitmap(null); return; &#125; String temp = url; if (url.startsWith("//")) &#123; temp = "http:" + url; &#125; if (view.getLayoutParams().width &lt;= 0 || view.getLayoutParams().height &lt;= 0) &#123; return; &#125; if (view != null &amp;&amp; view.getContext() != null) &#123; try &#123; Glide.with(view.getContext()).load(temp).into(view); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125;, 0); &#125;&#125; weexåŠ è½½æ–¹å¼æ–‡æ¡£è¯´åªè¯´äº†é€šè¿‡fileçš„å½¢å¼åŠ è½½jsæ–‡ä»¶ï¼Œå…¶å®žæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡URLçš„æ–¹å¼æ¸²æŸ“ï¼Œå½“æˆ‘ä»¬è°ƒè¯•çš„æ—¶å€™å°±éœ€è¦è¿žæŽ¥æœåŠ¡å™¨è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡URLæ–¹å¼åŠ è½½ã€‚ 1234//æ ¹æ®URLæ¸²æŸ“mInstance.renderByUrl(getPageName(), url, options, jsonInitData, WXRenderStrategy.APPEND_ONCE);//æ ¹æ®æ–‡ä»¶æ¸²æŸ“mWXSDKInstance.render(name, WXFileUtils.loadAsset(name+".js", this), null, null, WXRenderStrategy.APPEND_ASYNC); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184/** * weex åŸºç¡€å®¹å™¨ç±» */public abstract class BaseWeexContainerActivity extends AppCompatActivity implements IWXRenderListener, IWeexPageRefresh &#123; private static final String TAG = BaseWeexContainerActivity.class.getSimpleName(); protected String mBundleUrl; private FrameLayout mContainer; protected WXSDKInstance mWXSDKInstance; /** ç½‘ç»œå¼‚å¸¸é¡µé¢ */ private View mEmptyView; /** Loadingé¡µé¢ */ private View mLoadingView; private Handler mHandler = new Handler(); @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.weex_activity_container); mContainer = findViewById(R.id.container); mLoadingView = findViewById(R.id.loading_view); mEmptyView = findViewById(R.id.empty_view); initListeners(); &#125; private void initListeners() &#123; mEmptyView.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; if (!WeexBaseUtil.isInternetConnected(BaseWeexContainerActivity.this)) &#123; ToastUtil.showShort(BaseWeexContainerActivity.this, R.string.net_error); &#125; else &#123; mLoadingView.setVisibility(View.VISIBLE); mEmptyView.setVisibility(View.GONE); mHandler.postDelayed(new Runnable() &#123; @Override public void run() &#123; loadWeexPage(TAG, mBundleUrl); &#125; &#125;, 100); &#125; &#125; &#125;); &#125; protected void loadWeexPage(String pageName, String bundleUrl) &#123; if (!TextUtils.isEmpty(bundleUrl)) &#123; mBundleUrl = bundleUrl; createWeexInstance(); /** * pageName:è‡ªå®šä¹‰ï¼Œä¸€ä¸ªæ ‡ç¤ºç¬¦å·ã€‚ * url:è¿œç¨‹bundle JSçš„ä¸‹è½½åœ°å€ * options:åˆå§‹åŒ–æ—¶ä¼ å…¥WEEXçš„å‚æ•°ï¼Œæ¯”å¦‚ bundle JSåœ°å€ * flag:æ¸²æŸ“ç­–ç•¥ã€‚WXRenderStrategy.APPEND_ASYNC:å¼‚æ­¥ç­–ç•¥å…ˆè¿”å›žå¤–å±‚Viewï¼Œå…¶ä»–Viewæ¸²æŸ“å®ŒæˆåŽè°ƒç”¨onRenderSuccessã€‚ * WXRenderStrategy.APPEND_ONCE æ‰€æœ‰æŽ§ä»¶æ¸²æŸ“å®ŒåŽåŽä¸€æ¬¡æ€§è¿”å›žã€‚ */ Map&lt;String, Object&gt; options = new HashMap&lt;&gt;(); options.put(WXSDKInstance.BUNDLE_URL, mBundleUrl); String jsonData = WeexBaseUtil.convertHttpRequestParamData(mBundleUrl); // èŽ·å–ç¼“å­˜æ–‡ä»¶å final String filename = JsCacheTool.getCacheFilename(mBundleUrl); // æ£€æµ‹ç¼“å­˜æ–‡ä»¶æ˜¯å¦å­˜åœ¨ if (JsCacheTool.checkCacheExist(mBundleUrl)) &#123; // å­˜åœ¨ï¼Œè¯»å–ç¼“å­˜ String template = JsCacheTool.loadLocalCacheData(filename); mWXSDKInstance.render(pageName, template, options, jsonData, WXRenderStrategy.APPEND_ASYNC); &#125; else &#123; // ç¼“å­˜ä¸å­˜åœ¨ï¼Œå¼‚æ­¥ä»ŽæœåŠ¡å™¨æ‹‰å–å¹¶ç¼“å­˜åˆ°æœ¬åœ° mWXSDKInstance.renderByUrl(pageName, mBundleUrl, options, jsonData, WXRenderStrategy.APPEND_ASYNC); JsCacheTool.downloadCacheToFileAsync(mBundleUrl, filename, null); &#125; &#125; &#125; protected void refreshPage() &#123; if (!TextUtils.isEmpty(mBundleUrl)) &#123; createWeexInstance(); Map&lt;String, Object&gt; options = new HashMap&lt;&gt;(); options.put(WXSDKInstance.BUNDLE_URL, mBundleUrl); String jsonData = WeexBaseUtil.convertHttpRequestParamData(mBundleUrl); mWXSDKInstance.renderByUrl(mWXSDKInstance.getWXPerformance().pageName, mBundleUrl, options, jsonData, WXRenderStrategy.APPEND_ASYNC); &#125; &#125; @Override public void onStart() &#123; super.onStart(); if (mWXSDKInstance != null) &#123; mWXSDKInstance.onActivityStart(); &#125; &#125; @Override public void onResume() &#123; super.onResume(); if (mWXSDKInstance != null) &#123; mWXSDKInstance.onActivityResume(); &#125; &#125; @Override public void onPause() &#123; super.onPause(); if (mWXSDKInstance != null) &#123; mWXSDKInstance.onActivityPause(); &#125; &#125; @Override public void onStop() &#123; super.onStop(); if (mWXSDKInstance != null) &#123; mWXSDKInstance.onActivityStop(); &#125; &#125; @Override public void onDestroy() &#123; super.onDestroy(); if (mWXSDKInstance != null) &#123; mWXSDKInstance.onActivityDestroy(); &#125; destoryWeexInstance(); &#125; private void createWeexInstance() &#123; destoryWeexInstance(); if (mWXSDKInstance == null) &#123; mWXSDKInstance = new WXSDKInstance(BaseWeexContainerActivity.this); mWXSDKInstance.registerRenderListener(this); &#125; &#125; private void destoryWeexInstance() &#123; if (mWXSDKInstance != null) &#123; mWXSDKInstance.registerRenderListener(null); mWXSDKInstance.destroy(); mWXSDKInstance = null; &#125; &#125; @Override public void onViewCreated(WXSDKInstance instance, View view) &#123; mLoadingView.setVisibility(View.GONE); mEmptyView.setVisibility(View.GONE); if (mContainer != null) &#123; mContainer.removeAllViews(); mContainer.addView(view); &#125; &#125; @Override public void onRenderSuccess(WXSDKInstance instance, int width, int height) &#123; mLoadingView.setVisibility(View.GONE); mEmptyView.setVisibility(View.GONE); &#125; @Override public void onRefreshSuccess(WXSDKInstance instance, int width, int height) &#123; mLoadingView.setVisibility(View.GONE); mEmptyView.setVisibility(View.GONE); &#125; @Override public void onException(WXSDKInstance instance, String errCode, String msg) &#123; mLoadingView.setVisibility(View.GONE); mEmptyView.setVisibility(View.VISIBLE); if (WXErrorCode.WX_ERR_JS_FRAMEWORK.getErrorCode().equalsIgnoreCase(errCode)) &#123; ToastUtil.showShort(BaseWeexContainerActivity.this, R.string.weex_create_instance_error); &#125; else if (WXErrorCode.WX_DEGRAD_ERR_NETWORK_CHECK_CONTENT_LENGTH_FAILED.getErrorCode().equalsIgnoreCase(errCode)) &#123; ToastUtil.showShort(BaseWeexContainerActivity.this, R.string.weex_network_error); &#125; else if (WXErrorCode.WX_DEGRAD_ERR_BUNDLE_CONTENTTYPE_ERROR.getErrorCode().equalsIgnoreCase(errCode)) &#123; ToastUtil.showShort(BaseWeexContainerActivity.this, R.string.weex_user_intercept_error); &#125; &#125;&#125; Android åµŒå…¥weex devtoolsè°ƒè¯•å·¥å…·1ï¼šå…ˆé€šè¿‡npm install å®‰è£…é¡¹ç›®ä¾èµ–ã€‚ä¹‹åŽè¿è¡Œnpm run devå’Œnpm run serve2ï¼šè¿è¡Œweex debugï¼Œå°±ä¼šå¼€å¯ä¸€ä¸ªchrome çš„ inspect/debug å·¥å…·3ï¼šå®Œæˆä¸Šé¢ä¸¤ä¸ªæ­¥éª¤ï¼ŒæœåŠ¡ç«¯å°±ç›¸å½“äºŽé…ç½®æˆåŠŸäº†ï¼Œä¹‹åŽæˆ‘ä»¬åªéœ€è¦åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­é…å¥½ç›¸åº”çš„åº“ï¼Œå®Œå–„ä»£ç å°±å¯ä»¥äº† Android å®žçŽ°çƒ­è°ƒè¯•åŠŸèƒ½Androidè°ƒè¯•åŠŸèƒ½å¾ˆç®€å•å°±å¯ä»¥å®žçŽ°ï¼Œä½†æ˜¯çƒ­è°ƒè¯•åŠŸèƒ½å´èŠ±æˆ‘ä¸€äº›æ—¶é—´ã€‚ä»€ä¹ˆæ˜¯çƒ­è°ƒè¯•åŠŸèƒ½å‘¢ï¼Ÿå½“æˆ‘ä¿®æ”¹æœåŠ¡å™¨çš„ä»£ç ï¼Œé€šè¿‡åˆ·æ–°æµè§ˆå™¨ï¼ŒAPPç«¯æ•°æ®ä¹Ÿä¼šè·Ÿç€æ”¹å˜ï¼Œè¿™å°±æ˜¯çƒ­è°ƒè¯•ã€‚çƒ­è°ƒè¯•åŠŸèƒ½æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿå…¶å®žå½“æˆ‘åˆ·æ–°æ—¶ï¼Œä¼šåœ¨APPçš„å¹¿æ’­æŽ¥æ”¶å™¨æŽ¥åˆ°ç›¸åº”çš„æŒ‡ä»¤ï¼Œæ­¤æ—¶æˆ‘ä»¬é‡æ–°reloadç›¸åº”çš„jsæ–‡ä»¶å³å¯ã€‚ 1234567891011121314151617181920212223242526272829public void registerBroadcastReceiver(BroadcastReceiver receiver, IntentFilter filter) &#123; mBroadcastReceiver = receiver != null ? receiver : new DefaultBroadcastReceiver(); if (filter == null) &#123; filter = new IntentFilter(); &#125; filter.addAction(IWXDebugProxy.ACTION_DEBUG_INSTANCE_REFRESH); filter.addAction(WXSDKEngine.JS_FRAMEWORK_RELOAD); LocalBroadcastManager.getInstance(getApplicationContext()) .registerReceiver(mBroadcastReceiver, filter); if (mReloadListener == null) &#123; setReloadListener(new WxReloadListener() &#123; @Override public void onReload() &#123; createWeexInstance(); renderPage(); &#125; &#125;); &#125; if (mRefreshListener == null) &#123; setRefreshListener(new WxRefreshListener() &#123; @Override public void onRefresh() &#123; createWeexInstance(); renderPage(); &#125; &#125;); &#125; &#125; weexä¸Šæ‰‹è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼Œå¸Œæœ›æ¯ä¸ªäººéƒ½æœ‰ä¸€ç›´å­¦ä¹ çš„çƒ­æƒ…ä¸Žèƒ½åŠ›~]]></content>
      <categories>
        <category>Android</category>
        <category>Weex</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Weex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Weex ä¸­ä½¿ç”¨Vue.js]]></title>
    <url>%2Fposts%2F937a42e9.html</url>
    <content type="text"><![CDATA[åªå«æœ‰è¿è¡Œæ—¶çš„æž„å»ºç‰ˆæœ¬ å¹³å°çš„å·®å¼‚ æ‰§è¡ŒçŽ¯å¢ƒ DOM æ ·å¼ äº‹ä»¶ Web æ¸²æŸ“å™¨ å•æ–‡ä»¶ç»„ä»¶ ç¼–è¯‘ç›®æ ‡ ä½¿ç”¨weex-loader æ”¯æŒçš„åŠŸèƒ½ å…¨å±€é…ç½® å…¨å±€ API é€‰é¡¹ ç”Ÿå‘½å‘¨æœŸé’©å­ å®žä¾‹å±žæ€§ å®žä¾‹æ–¹æ³• æ¨¡æ¿æŒ‡ä»¤ ç‰¹æ®Šå±žæ€§ å†…ç½®ç»„ä»¶ åœ¨ WeexSDK v0.10.0 ï¼ˆå‘å¸ƒäºŽ 2016 å¹´ 2 æœˆ 17 æ—¥ï¼‰ä»¥åŠåŽç»­çš„ç‰ˆæœ¬ä¸­ï¼Œé›†æˆäº† v2 ç‰ˆæœ¬çš„ Vue.jsã€‚Vue æ˜¯ä¸€å¥—æž„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æž¶ï¼Œè¯¦æƒ…è¯·å‚é˜…å…¶å®˜æ–¹ç½‘ç«™ã€‚ å¦‚æžœæ²¡æœ‰ç‰¹åˆ«æŒ‡ç¤ºï¼Œæ–‡ç« ä¸­çš„ â€œVue.jsâ€ æˆ–è€… â€œVueâ€ éƒ½æŒ‡çš„æ˜¯ v2 ç‰ˆæœ¬çš„ Vueã€‚ åªå«æœ‰è¿è¡Œæ—¶çš„æž„å»ºç‰ˆæœ¬å¦‚æžœä½ ç†Ÿæ‚‰ Vue.jsï¼Œä½ åº”è¯¥çŸ¥é“ Vue.js æœ‰ä¸¤ç§æž„å»ºç‰ˆæœ¬: è¿è¡Œæ—¶ + ç¼–è¯‘å™¨ ä¸Ž åªåŒ…å«è¿è¡Œæ—¶ã€‚å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«åœ¨äºŽç¼–è¯‘å™¨æ˜¯å¦éœ€è¦èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶ç¼–è¯‘ template é€‰é¡¹ã€‚ç”±äºŽè¿è¡Œæ—¶æž„å»ºç‰ˆæœ¬æ¯”å®Œæ•´ç‰ˆæœ¬çš„æž„å»ºç‰ˆæœ¬è½»çº¦ 30%ï¼ˆVue å®˜æ–¹ä¼°ç®—ï¼‰ï¼Œä¸ºäº†æ›´å¥½çš„æ€§èƒ½å’Œæ›´å°çš„ä»£ç ä½“ç§¯ï¼ŒWeex é›†æˆçš„æ˜¯è¿è¡Œæ—¶ç‰ˆæœ¬çš„ Vueã€‚ å…·ä½“æ¥è¯´ï¼Œå·®å¼‚å¦‚ä¸‹ï¼š å®šä¹‰ç»„ä»¶æ—¶ä¸æ”¯æŒ template é€‰é¡¹ã€‚ ä¸æ”¯æŒä½¿ç”¨ x-templatesã€‚ ä¸æ”¯æŒä½¿ç”¨ Vue.compileã€‚ å¹³å°çš„å·®å¼‚Vue.js æœ€åˆæ˜¯ä¸º Web å¹³å°è®¾è®¡çš„ã€‚è™½ç„¶å¯ä»¥åŸºäºŽWeexå¼€å‘åŽŸç”Ÿåº”ç”¨ç¨‹åºï¼Œä½†æ˜¯ä»ç„¶å­˜åœ¨è®¸å¤šWeex ä¸Ž Web å¹³å°çš„å·®å¼‚ã€‚ ä¸Ž Web å¹³å°çš„ä¸»è¦å·®å¼‚æ˜¯: æ‰§è¡ŒçŽ¯å¢ƒã€DOMã€æ ·å¼å’Œäº‹ä»¶ã€‚ æ‰§è¡ŒçŽ¯å¢ƒWeex ä¸»è¦ç”¨äºŽç¼–å†™å¤šé¡µçš„åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªé¡µé¢éƒ½å¯¹åº”äº†åŽŸç”Ÿå¼€å‘ä¸­çš„ View æˆ–è€… Activityï¼Œå¹¶ä¸”ä¿æŒè‡ªå·±çš„ä¸Šä¸‹æ–‡ã€‚å³ä½¿ Weex çš„æ‰€æœ‰é¡µé¢éƒ½ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ª Javascript å¼•æ“Žçš„å®žä¾‹(virtual machine)ï¼Œæ¯ä¸ªé¡µé¢æ˜¯æ‰§è¡ŒçŽ¯å¢ƒä¹Ÿæ˜¯äº’ç›¸éš”ç¦»çš„ï¼ˆåŸºäºŽ Sandbox æŠ€æœ¯ï¼‰ã€‚ ä½¿ç”¨ BroadcastChannel å¯ä»¥å®žçŽ°è·¨é¡µé€šä¿¡ã€‚ å…·ä½“æ¥è®²ï¼Œæ¯ä¸ªé¡µé¢çš„ Vue å˜é‡éƒ½æ˜¯ä¸åŒçš„å®žä¾‹ï¼Œå³ä½¿æ˜¯å†™åœ¨ Vue ä¸Šçš„â€œå…¨å±€â€é…ç½®ï¼ˆVue.config.xxxï¼‰ä¹Ÿåªä¼šå½±å“ Weex ä¸Šçš„å•ä¸ªé¡µé¢ã€‚ åœ¨æ­¤åŸºç¡€ä¸Šï¼Œä¸€äº› Vue çš„ SPA ï¼ˆå•é¡µé¢åº”ç”¨ï¼‰æŠ€æœ¯ï¼Œå¦‚ Vuex å’Œ vue-router ä¹Ÿå°†å•é¡µå†…ç”Ÿæ•ˆã€‚æ›´é€šä¿—åœ°è¯´ï¼Œâ€œé¡µé¢â€æ¦‚å¿µåœ¨ SPA æŠ€æœ¯ä¸­æ˜¯è™šæ‹Ÿçš„ï¼Œä½†åœ¨ Weex ä¸Šå´æ˜¯çœŸå®žçš„ã€‚å³ä¾¿å¦‚æ­¤ï¼ŒVuex å’Œ vue-router éƒ½æ˜¯ç‹¬ç«‹çš„åº“ï¼Œéƒ½æœ‰è‡ªå·±çš„æ¦‚å¿µå’Œä½¿ç”¨åœºæ™¯ï¼Œä»ç„¶å¯ä»¥åœ¨ Weex é‡Œä½¿ç”¨ Vuex å’Œ vue-routerã€‚ DOMå› ä¸ºåœ¨ Android å’Œ iOS ä¸Šæ²¡æœ‰ DOMï¼ˆDocument Object Modelï¼‰ï¼Œå¦‚æžœä½ è¦æ‰‹åŠ¨æ“ä½œå’Œç”Ÿæˆ DOM å…ƒç´ çš„è¯å¯èƒ½ä¼šé‡åˆ°ä¸€äº›å…¼å®¹æ€§é—®é¢˜ã€‚åœ¨ä½ ä½¿ç”¨çŽ°ä»£å‰ç«¯æ¡†æž¶çš„æƒ…å†µä¸‹ï¼Œæ“ä½œæ•°æ®ä¸Žç»„ä»¶è€Œä¸æ˜¯ç”Ÿæˆçš„å…ƒç´ æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„åšæ³•ã€‚ ä¸€äº›ä¸Ž DOM ç›¸å…³çš„ç‰¹æ€§ï¼Œæ¯”å¦‚ v-htmlï¼Œvm.$elï¼Œtemplate é€‰é¡¹ï¼Œåœ¨ä¸åŒçš„å¹³å°ä¸Šå¯èƒ½æ— æ³•èŽ·å¾—ç›¸åŒçš„ååº”ã€‚ å‡†ç¡®æ¥è¯´ï¼Œvm.$elå±žæ€§ç±»åž‹åœ¨webçŽ¯å¢ƒä¸‹æ˜¯HTMLElementï¼Œä½†æ˜¯åœ¨ç§»åŠ¨ç«¯å¹¶æ²¡æœ‰è¿™ä¸ªç±»åž‹ã€‚å®žé™…ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªç”± Weex æ–‡æ¡£å¯¹è±¡æ¨¡åž‹ å®šä¹‰çš„ç‰¹æ®Šæ•°æ®ç»“æž„ã€‚ æ ·å¼æ ·å¼è¡¨å’Œ CSS è§„åˆ™æ˜¯ç”± Weex js æ¡†æž¶å’ŒåŽŸç”Ÿæ¸²æŸ“å¼•æ“Žç®¡ç†çš„ã€‚è¦å®žçŽ°å®Œæ•´çš„ CSS å¯¹è±¡æ¨¡åž‹ï¼ˆCSSOMï¼šCSS Object Modelï¼‰å¹¶æ”¯æŒæ‰€æœ‰çš„ CSS è§„åˆ™æ˜¯éžå¸¸å›°éš¾çš„ï¼Œè€Œä¸”æ²¡æœ‰è¿™ä¸ªå¿…è¦ã€‚ å‡ºçŽ°æ€§èƒ½è€ƒè™‘ï¼ŒWeex ç›®å‰åªæ”¯æŒå•ä¸ªç±»é€‰æ‹©å™¨ï¼Œå¹¶ä¸”åªæ”¯æŒ CSS è§„åˆ™çš„å­é›†ã€‚è¯¦æƒ…è¯·å‚é˜… é€šç”¨æ ·å¼ ä¸Ž æ–‡æœ¬æ ·å¼ã€‚ åœ¨ Weex é‡Œï¼Œ æ¯ä¸€ä¸ª Vue ç»„ä»¶çš„æ ·å¼éƒ½æ˜¯ scopedã€‚ äº‹ä»¶ç›®å‰åœ¨ Weex é‡Œä¸æ”¯æŒäº‹ä»¶å†’æ³¡å’Œæ•èŽ·ï¼Œå› æ­¤ Weex åŽŸç”Ÿç»„ä»¶ä¸æ”¯æŒäº‹ä»¶ä¿®é¥°ç¬¦ï¼Œä¾‹å¦‚.preventï¼Œ.captureï¼Œ.stopï¼Œ.self ã€‚ æ­¤å¤–ï¼ŒæŒ‰é”®ä¿®é¥°ç¬¦ä»¥åŠç³»ç»Ÿä¿®é¥°é”® ä¾‹å¦‚ .enterï¼Œ.tabï¼Œ.ctrlï¼Œ.shift åœ¨ç§»åŠ¨ç«¯åŸºæœ¬æ²¡æœ‰æ„ä¹‰ï¼Œåœ¨ Weex ä¸­ä¹Ÿä¸æ”¯æŒã€‚ Web æ¸²æŸ“å™¨å¦‚æžœä½ æƒ³åœ¨ç½‘ç»œä¸Šå‘ˆçŽ°ä½ çš„é¡µé¢ï¼Œä½ éœ€è¦ weex-vue-render æ¥å®žçŽ°å®ƒã€‚ weex-vue-renderæ˜¯ Vue DSL çš„ Web æ¸²æŸ“å™¨ï¼Œ å®ƒåœ¨ Web ä¸Šå®žçŽ°äº† Weex çš„å†…ç½®ç»„ä»¶å’Œå†…ç½®æ¨¡å—ã€‚è¯¦æƒ…è¯·å‚é˜…è¿™é‡Œã€‚ å•æ–‡ä»¶ç»„ä»¶Vue ä¸­çš„å•æ–‡ä»¶ç»„ä»¶ï¼ˆå³*.vueæ–‡ä»¶ï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶æ ¼å¼ï¼Œæ‰©å±•åä¸º.vueã€‚è¿™ä¸ªæ¨¡æ¿ä¼šåœ¨æž„å»ºæ—¶ä¾¿äºŽåˆ°renderå‡½æ•°é‡Œã€‚ æ­¤å¤–ï¼Œæ‰€æœ‰çš„ç¼–è¾‘å™¨é‡Œéƒ½æ”¯æŒä¸€ä¸ªå¥½çš„è¯­æ³•é«˜äº®æ’ä»¶ã€‚ åœ¨ Weex ä¸­ä½¿ç”¨å•ä¸ªæ–‡ä»¶ç»„ä»¶è¯­æ³•æ˜¯ä¸€ç§å¾ˆå¥½çš„åšæ³•ã€‚ TIP åœ¨ Weex ä¸­ä½¿ç”¨ Vue çš„å•ä¸ªæ–‡ä»¶ç»„ä»¶è¯­æ³•æ˜¯ä¸€ç§æœ€ä½³å®žè·µã€‚ å› ä¸ºé’ˆå¯¹ Weex çš„ Web å¹³å°çš„ç¼–è¯‘å·¥å…·å¹¶ä¸ä¸€æ ·ï¼Œå¦‚æžœä½ ç›´æŽ¥å†™çš„ render å‡½æ•°ï¼Œåˆ™ç»•è¿‡äº† weex-loader ç¼–è¯‘æ¨¡æ¿çš„è¿‡ç¨‹ï¼Œè¿™æ ·çš„è¯ä½ éœ€è¦è‡ªè¡Œå¤„ç†å¹³å°å·®å¼‚çš„ç»†èŠ‚ã€‚ ç¼–è¯‘ç›®æ ‡å› ä¸ºå¹³å°çš„å·®å¼‚ä»¥åŠä¸ºäº†æé«˜ç½‘ç»œæ€§èƒ½ï¼Œ*.vueæ–‡ä»¶éœ€è¦ç”¨ä¸¤ç§ä¸åŒçš„æ–¹å¼æ¥ç¼–è¯‘ï¼š å¯¹äºŽ Web å¹³å°æ¥è¯´ï¼Œä½ å¯ä»¥ç”¨ä»»ä½•æ­£å¼çš„æ–¹å¼æ¥ç¼–è¯‘æºæ–‡ä»¶ï¼Œä¾‹å¦‚ ä½¿ç”¨ Webpack + vue-loader æˆ–è€… Browserify + vueify æ¥ç¼–è¯‘*.vueæ–‡ä»¶ã€‚ å¯¹äºŽå®‰å“ä¸Ž iOS å¹³å°æ¥è¯´ï¼Œ ä½ éœ€è¦ä½¿ç”¨ weex-loader æ¥ç¼–è¯‘*.vueæ–‡ä»¶ã€‚ ä¸åŒçš„å¹³å°ä½¿ç”¨ä¸åŒçš„bundlesï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨å¹³å°åŽŸæœ‰çš„ç‰¹æ€§ï¼Œå‡å°‘æž„å»ºæ—¶çš„å…¼å®¹æ€§ä»£ç ã€‚ä½†æ˜¯æºä»£ç ä»ç„¶æ˜¯ä¸€æ ·çš„ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ç¼–è¯‘å®ƒçš„æ–¹æ³•ã€‚ ä½¿ç”¨weex-loaderweex-loader æ˜¯ä¸€ä¸ª webpack çš„ loaderï¼Œå®ƒèƒ½æŠŠ*.vueæ–‡ä»¶è½¬åŒ–ä¸ºç®€å•çš„javascript æ¨¡å—ç”¨äºŽå®‰å“ä»¥åŠ iOS å¹³å°ã€‚æ‰€æœ‰çš„ç‰¹æ€§å’Œé…ç½®éƒ½æ˜¯è·Ÿ vue-loader ä¸€æ ·çš„ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœ Webpack çš„ entry é…ç½®é¡¹æ˜¯ä¸€ä¸ª *.vue æ–‡ä»¶çš„è¯ï¼Œä½ ä»éœ€è¦ä¼ é€’ä¸€ä¸ªé¢å¤–çš„ entry å‚æ•°ä½œä¸ºæ ‡è®°ã€‚ 1234567891011121314const webpackConfig = &#123; // Add the entry parameter for the .vue file entry: './path/to/App.vue?entry=true' /* ... */ use: &#123; loaders: [&#123; // matches the .vue file path which contains the entry parameter test: /\.vue(\?^^]+)?$/, loaders: ['weex-loader'] &#125;] &#125;&#125; å¦‚æžœä½ çŽ°åœ¨ç”¨çš„æ˜¯.jsæ–‡ä»¶åšå…¥å£æ–‡ä»¶ï¼Œä½ ä¸éœ€è¦å†™é‚£äº›é¢å¤–çš„å‚æ•°ã€‚ æŽ¨è webpack é…ç½®çš„å…¥å£æ–‡ä»¶ä½¿ç”¨ javascript æ–‡ä»¶ã€‚ 123&#123; entry: './path/to/entry.js'&#125; TIP æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹éƒ½ä½¿ç”¨ javascript æ–‡ä»¶ä½œä¸ºå…¥å£æ–‡ä»¶ã€‚ æ”¯æŒçš„åŠŸèƒ½å…¨å±€é…ç½® Vue â€œå…¨å±€â€é…ç½®åªä¼šå½±å“ Weex ä¸Šçš„å•ä¸€é¡µé¢ï¼Œé…ç½®ä¸ä¼šåœ¨ä¸åŒçš„ Weex é¡µé¢ä¹‹é—´å…±äº«ã€‚ Vue å…¨å±€é…ç½® æ˜¯å¦æ”¯æŒ è¯´æ˜Ž Vue.config.silent æ”¯æŒ - Vue.config.optionMergeStrategies æ”¯æŒ - Vue.config.devtools ä¸æ”¯æŒ åªåœ¨ Web çŽ¯å¢ƒä¸‹æ”¯æŒ Vue.config.errorHandler æ”¯æŒ - Vue.config.warnHandler æ”¯æŒ - Vue.config.ignoredElements æ”¯æŒ ä¸æŽ¨è Vue.config.keyCodes ä¸æ”¯æŒ åœ¨ç§»åŠ¨ç«¯æ— ç”¨ Vue.config.performance ä¸æ”¯æŒ ä¸Ž devtools ä¸€æ · Vue.config.productionTip æ”¯æŒ - å…¨å±€ API Vue å…¨å±€ API æ˜¯å¦æ”¯æŒ è¯´æ˜Ž Vue.extend æ”¯æŒ - Vue.nextTick æ”¯æŒ - Vue.set æ”¯æŒ - Vue.delete æ”¯æŒ - Vue.directive æ”¯æŒ - Vue.filter æ”¯æŒ - Vue.component æ”¯æŒ - Vue.use æ”¯æŒ - Vue.mixin æ”¯æŒ - Vue.version æ”¯æŒ - Vue.compile ä¸æ”¯æŒ Weex ç”¨çš„æ˜¯ åªåŒ…å«è¿è¡Œæ—¶æž„å»º é€‰é¡¹ Vue é€‰é¡¹ æ˜¯å¦æ”¯æŒ è¯´æ˜Ž data æ”¯æŒ - props æ”¯æŒ - propsData æ”¯æŒ - computed æ”¯æŒ - methods æ”¯æŒ - watch æ”¯æŒ - el æ”¯æŒ åœ¨ç§»åŠ¨ç«¯elçš„å€¼æ˜¯æ— æ„ä¹‰çš„ template ä¸æ”¯æŒ Weex ç”¨çš„æ˜¯ åªåŒ…å«è¿è¡Œæ—¶æž„å»º render æ”¯æŒ ä¸æŽ¨è renderError æ”¯æŒ - directives æ”¯æŒ - filters æ”¯æŒ - components æ”¯æŒ - parent æ”¯æŒ ä¸æŽ¨è mixins æ”¯æŒ - extends æ”¯æŒ - provide/inject æ”¯æŒ ä¸æŽ¨è name æ”¯æŒ - delimiters æ”¯æŒ ä¸æŽ¨è functional æ”¯æŒ - model æ”¯æŒ - inheritAttrs æ”¯æŒ - comments ä¸æ”¯æŒ - ç”Ÿå‘½å‘¨æœŸé’©å­Vue ç»„ä»¶çš„å®žä¾‹ç”Ÿå‘½å‘¨æœŸé’©å­å°†åœ¨ç‰¹å®šçš„é˜¶æ®µå‘å‡ºï¼Œè¯¦æƒ…è¯·å‚è€ƒ Vue ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå›¾ç¤ºã€‚ Vue ç”Ÿå‘½å‘¨æœŸé’©å­ æ˜¯å¦æ”¯æŒ è¯´æ˜Ž beforeCreate æ”¯æŒ - created æ”¯æŒ - beforeMount æ”¯æŒ - mounted æ”¯æŒ å’Œ Web ç«¯ä¸å®Œå…¨ä¸€æ ·ï¼ˆä¸‹æ–‡æœ‰è¯¦è§£ï¼‰ beforeUpdate æ”¯æŒ - updated æ”¯æŒ - activated ä¸æ”¯æŒ ä¸æ”¯æŒ&lt;keep-alive&gt; deactivated ä¸æ”¯æŒ ä¸æ”¯æŒ&lt;keep-alive&gt; beforeDestroy æ”¯æŒ - destroyed æ”¯æŒ - errorCaptured æ”¯æŒ åœ¨ Vue 2.5.0+ï¼Œ Weex SDK 0.18+ ä¸­æ–°å¢ž å…³äºŽ â€œmountedâ€ ç”Ÿå‘½å‘¨æœŸ å’Œæµè§ˆä¸åŒçš„æ˜¯ï¼ŒWeex çš„æ¸²æŸ“æµç¨‹æ˜¯å¼‚æ­¥çš„ï¼Œè€Œä¸”æ¸²æŸ“å‡ºæ¥çš„ç»“æžœéƒ½æ˜¯åŽŸç”Ÿç³»ç»Ÿä¸­çš„ Viewï¼Œè¿™äº›æ•°æ®éƒ½æ— æ³•è¢« javascript ç›´æŽ¥èŽ·å–åˆ°ã€‚å› æ­¤åœ¨ Weex ä¸Šï¼ŒVue çš„ mounted ç”Ÿå‘½å‘¨æœŸåœ¨å½“å‰ç»„ä»¶çš„ virtual-dom (Vue é‡Œçš„ VNode) æž„å»ºå®ŒæˆåŽå°±ä¼šè§¦å‘ï¼Œæ­¤æ—¶ç›¸åº”çš„åŽŸç”Ÿè§†å›¾æœªå¿…å·²ç»æ¸²æŸ“å®Œæˆã€‚ å®žä¾‹å±žæ€§ Vue å®žä¾‹å±žæ€§ æ˜¯å¦æ”¯æŒ è¯´æ˜Ž vm.$data æ”¯æŒ - vm.$props æ”¯æŒ - vm.$el æ”¯æŒ ç§»åŠ¨ç«¯æ²¡æœ‰HTMLElement vm.$options æ”¯æŒ - vm.$parent æ”¯æŒ - vm.$root æ”¯æŒ - vm.$children æ”¯æŒ - vm.$slots æ”¯æŒ - vm.$scopedSlots æ”¯æŒ - vm.$refs æ”¯æŒ - vm.$isServer æ”¯æŒ æ°¸è¿œæ˜¯false vm.$attrs æ”¯æŒ - vm.$listeners æ”¯æŒ - å®žä¾‹æ–¹æ³• Vue å®žä¾‹æ–¹æ³• æ˜¯å¦æ”¯æŒ è¯´æ˜Ž vm.$watch() æ”¯æŒ - vm.$set() æ”¯æŒ - vm.$delete() æ”¯æŒ - vm.$on() æ”¯æŒ - vm.$once() æ”¯æŒ - vm.$off() æ”¯æŒ - vm.$emit() æ”¯æŒ - vm.$mount() ä¸æ”¯æŒ ä½ ä¸éœ€è¦æ‰‹åŠ¨å®‰è£… Vue å®žä¾‹ vm.$forceUpdate() æ”¯æŒ - vm.$nextTick() æ”¯æŒ - vm.$destroy() æ”¯æŒ - æ¨¡æ¿æŒ‡ä»¤ Vue æŒ‡ä»¤ æ˜¯å¦æ”¯æŒ è¯´æ˜Ž v-text æ”¯æŒ - v-html ä¸æ”¯æŒ Weex ä¸­æ²¡æœ‰ HTML è§£æžå™¨ï¼Œè¿™ä¸æ˜¯å¾ˆå¥½çš„å®žçŽ° v-show ä¸æ”¯æŒ ä¸æ”¯æŒ display: none; v-if æ”¯æŒ - v-else æ”¯æŒ - v-else-if æ”¯æŒ - v-for æ”¯æŒ - v-on æ”¯æŒ ä¸æ”¯æŒäº‹ä»¶ä¿®é¥°ç¬¦ v-bind æ”¯æŒ - v-model æ”¯æŒ - v-pre æ”¯æŒ - v-cloak ä¸æ”¯æŒ åªæ”¯æŒå•ç±»åé€‰æ‹©å™¨ v-once æ”¯æŒ - ç‰¹æ®Šå±žæ€§ Vue ç‰¹æ®Šå±žæ€§ æ˜¯å¦æ”¯æŒ è¯´æ˜Ž key æ”¯æŒ - ref æ”¯æŒ - slot æ”¯æŒ - slot-scope æ”¯æŒ åœ¨ Vue 2.5.0+ï¼Œ Weex SDK 0.18+ ä¸­æ–°å¢ž scope æ”¯æŒ ä¸æŽ¨è is æ”¯æŒ - å†…ç½®ç»„ä»¶ Vue å†…ç½®ç»„ä»¶ æ˜¯å¦æ”¯æŒ è¯´æ˜Ž component æ”¯æŒ - transition ä¸æ”¯æŒ åœ¨ç§»åŠ¨ç«¯ enter ä¸Ž leave çš„æ¦‚å¿µå¯èƒ½æœ‰ç‚¹ä¸åŒï¼Œ å¹¶ä¸” Weex ä¸æ”¯æŒdisplay: none; transition-group ä¸æ”¯æŒ è·Ÿ transition ä¸€æ · keep-alive ä¸æ”¯æŒ ç§»åŠ¨ç«¯çš„åŽŸç”Ÿç»„ä»¶ä¸èƒ½è¢«å‰ç«¯ç¼“å­˜ slot æ”¯æŒ -]]></content>
      <categories>
        <category>Android</category>
        <category>Weex</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Weex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Weex å’Œ Web çš„å¹³å°å·®å¼‚]]></title>
    <url>%2Fposts%2Fb78de55a.html</url>
    <content type="text"><![CDATA[Weex æ˜¯ä¸€ä¸ªè·¨å¹³å°è§£å†³æ–¹æ¡ˆï¼ŒWeb å¹³å°åªæ˜¯å…¶ä¸€ç§è¿è¡ŒçŽ¯å¢ƒï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥åœ¨ Android å’Œ iOS å®¢æˆ·ç«¯ä¸­è¿è¡Œã€‚åŽŸç”Ÿå¼€å‘å¹³å°å’Œ Web å¹³å°ä¹‹é—´çš„å·®å¼‚ï¼Œåœ¨åŠŸèƒ½å’Œå¼€å‘ä½“éªŒä¸Šéƒ½æœ‰ä¸€äº›å·®å¼‚ã€‚ Weex çŽ¯å¢ƒä¸­æ²¡æœ‰ DOMDOMï¼ˆDocument Object Modelï¼‰ï¼Œå³æ–‡æ¡£å¯¹è±¡æ¨¡åž‹ï¼Œæ˜¯ HTML å’Œ XML æ–‡æ¡£çš„ç¼–ç¨‹æŽ¥å£ï¼Œæ˜¯ Web ä¸­çš„æ¦‚å¿µã€‚Weex çš„è¿è¡ŒçŽ¯å¢ƒä»¥åŽŸç”Ÿåº”ç”¨ä¸ºä¸»ï¼Œåœ¨ Android å’Œ iOS çŽ¯å¢ƒä¸­æ¸²æŸ“å‡ºæ¥çš„æ˜¯åŽŸç”Ÿçš„ç»„ä»¶ï¼Œä¸æ˜¯ DOM Elementã€‚ ä¸æ”¯æŒ DOM æ“ä½œåŽŸç”ŸçŽ¯å¢ƒä¸­ä¸æ”¯æŒ Web APIï¼Œæ²¡æœ‰ Element ã€Event ã€File ç­‰å¯¹è±¡ï¼Œè¯¦ç»†åˆ—è¡¨å¯ä»¥å‚è€ƒ Web APIs on MDNã€‚ä¸æ”¯æŒé€‰ä¸­å…ƒç´ ï¼Œå¦‚ document.getElementById ã€ document.querySelector ç­‰ï¼›å½“ç„¶ä¹Ÿä¸æ”¯æŒåŸºäºŽ DOM API çš„ç¨‹åºåº“ï¼ˆå¦‚ jQueryï¼‰ã€‚ æœ‰é™çš„äº‹ä»¶ç±»åž‹Weex æ”¯æŒåœ¨æ ‡ç­¾ä¸Šç»‘å®šäº‹ä»¶ï¼Œå’Œåœ¨æµè§ˆå™¨ä¸­çš„å†™æ³•ä¸€æ ·ï¼Œä½†æ˜¯ Weex ä¸­çš„äº‹ä»¶æ˜¯ç”±åŽŸç”Ÿç»„ä»¶æ•èŽ·å¹¶è§¦å‘çš„ï¼Œè¡Œä¸ºå’Œæµè§ˆå™¨ä¸­æœ‰æ‰€ä¸åŒï¼Œäº‹ä»¶ä¸­çš„å±žæ€§ä¹Ÿå’Œ Web ä¸­æœ‰å·®å¼‚ã€‚ æ”¯æŒ Web ä¸­çš„äº‹ä»¶ç±»åž‹ï¼Œè¯¦æƒ…è¯·å‚è€ƒã€Šé€šç”¨äº‹ä»¶ã€‹ã€‚ ä¸åŒºåˆ†äº‹ä»¶çš„æ•èŽ·é˜¶æ®µå’Œå†’æ³¡é˜¶æ®µï¼Œç›¸å½“äºŽ DOM 0 çº§äº‹ä»¶ã€‚ Weex çŽ¯å¢ƒä¸­æ²¡æœ‰ BOMBOMï¼ˆBrowser Object Modelï¼‰ï¼Œå³æµè§ˆå™¨å¯¹è±¡æ¨¡åž‹ï¼Œæ˜¯æµè§ˆå™¨çŽ¯å¢ƒä¸º javascript æä¾›çš„æŽ¥å£ã€‚Weex åœ¨åŽŸç”Ÿç«¯å¹¶ä¸åŸºäºŽæµè§ˆå™¨è¿è¡Œï¼Œä¸æ”¯æŒæµè§ˆå™¨æä¾›çš„ BOM æŽ¥å£ã€‚ æ²¡æœ‰ window ã€screen å¯¹è±¡Weex ä¸­å¹¶æœªæä¾›æµè§ˆå™¨ä¸­çš„ window å’Œ screen å¯¹è±¡ï¼Œä¸æ”¯æŒä½¿ç”¨å…¨å±€å˜é‡ã€‚å¦‚æžœæ˜¯æƒ³è¦èŽ·å–è®¾å¤‡çš„å±å¹•æˆ–çŽ¯å¢ƒä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ WXEnvironment å˜é‡ã€‚ 1WXEnvironment weexVersion: WeexSDK çš„ç‰ˆæœ¬ã€‚ appName: åº”ç”¨çš„åç§°ã€‚ appVersion: åº”ç”¨çš„ç‰ˆæœ¬ã€‚ platform: è¿è¡Œå¹³å°ï¼Œå¯èƒ½çš„å€¼æ˜¯ Web ã€Android ã€iOS ä¹‹ä¸€ã€‚ osName: ç³»ç»Ÿçš„åç§°ã€‚ osVersion: ç³»ç»Ÿç‰ˆæœ¬ã€‚ deviceWidth: è®¾å¤‡å®½åº¦ã€‚ deviceHeight: è®¾å¤‡é«˜åº¦ã€‚ æ²¡æœ‰ document å¯¹è±¡åœ¨æµè§ˆå™¨ä¸­ document è¡¨ç¤ºäº†å½“å‰æ´»åŠ¨çš„æ–‡æ¡£æ¨¡åž‹ï¼Œåœ¨ Android å’Œ iOS çŽ¯å¢ƒä¸­å¹¶æ²¡æœ‰è¿™ä¸ªå¯¹è±¡ï¼Œä¹Ÿä¸æ”¯æŒä¸Žå…¶ç›¸å…³çš„ DOM æ“ä½œã€‚ æ²¡æœ‰ history ã€location ã€navigator å¯¹è±¡ history ä¿å­˜äº†å½“å‰é¡µé¢çš„åŽ†å²è®°å½•ï¼Œå¹¶ä¸”æä¾›äº†å‰è¿›åŽé€€æ“ä½œã€‚ location è®°å½•äº†å½“å‰é¡µé¢ URL ç›¸å…³çš„ä¿¡æ¯ã€‚ navigator è®°å½•äº†å½“å‰æµè§ˆå™¨ä¸­çš„ä¿¡æ¯ã€‚ è¿™äº›æŽ¥å£ä¸Žæµè§ˆå™¨è‡ªèº«çš„å®žçŽ°æœ‰å…³ï¼Œå¯ä»¥æŽ§åˆ¶é¡µé¢çš„å‰è¿›åŽé€€å¹¶ä¸”èŽ·å–çŠ¶æ€ä¿¡æ¯ã€‚è™½ç„¶åœ¨ Android å’Œ iOS ä¸­ä¹Ÿæœ‰â€œåŽ†å²â€å’Œâ€œå¯¼èˆªâ€çš„æ¦‚å¿µï¼Œä½†æ˜¯å®ƒæ˜¯ç”¨äºŽå¤šä¸ªç®¡ç†è§†å›¾ä¹‹é—´çš„è·³è½¬çš„ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œâ€œå‰è¿›â€ã€â€œåŽé€€â€ä»ç„¶ä¼šå¤„äºŽåŒä¸€ä¸ªé¡µç­¾ä¸­ï¼Œåœ¨åŽŸç”Ÿåº”ç”¨ä¸­â€œå‰è¿›â€ã€â€œåŽé€€â€åˆ™ä¼šçœŸå®žçš„è·³è½¬åˆ°å…¶ä»–é¡µé¢ã€‚ æ­¤å¤– Weex ä¹Ÿæä¾›äº† navigator æ¨¡å—æ¥æ“ä½œé¡µé¢çš„è·³è½¬ï¼Œä½¿ç”¨æ–¹æ³•å‚è€ƒã€Šnavigator å¯¼èˆªæŽ§åˆ¶ã€‹ã€‚ èƒ½å¤Ÿè°ƒç”¨ç§»åŠ¨è®¾å¤‡åŽŸç”Ÿ APIåœ¨ Weex ä¸­èƒ½å¤Ÿè°ƒç”¨ç§»åŠ¨è®¾å¤‡åŽŸç”Ÿ APIï¼Œä½¿ç”¨æ–¹æ³•æ˜¯é€šè¿‡æ³¨å†Œã€è°ƒç”¨æ¨¡å—æ¥å®žçŽ°ã€‚å…¶ä¸­æœ‰ä¸€äº›æ¨¡å—æ˜¯ Weex å†…ç½®çš„ï¼Œå¦‚ clipboard ã€ navigator ã€storage ç­‰ã€‚ ã€Šclipboard å‰ªåˆ‡æ¿ã€‹ ã€Šnavigator å¯¼èˆªæŽ§åˆ¶ã€‹ ã€Šstorage æœ¬åœ°å­˜å‚¨ ã€‹ ä¸ºäº†ä¿æŒæ¡†æž¶çš„é€šç”¨æ€§ï¼ŒWeex å†…ç½®çš„åŽŸç”Ÿæ¨¡å—æœ‰é™ï¼Œä¸è¿‡ Weex æä¾›äº†æ¨ªå‘æ‰©å±•çš„èƒ½åŠ›ï¼Œå¯ä»¥æ‰©å±•åŽŸç”Ÿæ¨¡å—ã€‚ æœ‰äº›æŽ¥å£åœ¨æµè§ˆå™¨çŽ¯å¢ƒä¸­ä¹Ÿå­˜åœ¨ï¼Œä¸è¿‡åœ¨ä½¿ç”¨æ—¶åº”è¯¥æ³¨æ„æµè§ˆå™¨çš„å…¼å®¹æ€§ï¼›å¦‚å‰ªè´´æ¿åŠŸèƒ½ï¼Œå‡ºäºŽå®‰å…¨æ€§è€ƒè™‘ï¼Œç»å¤§å¤šæ•°æµè§ˆå™¨éƒ½é™åˆ¶å…¶ä½¿ç”¨ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Weex</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Weex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Weex é›†æˆåˆ°Androidåº”ç”¨]]></title>
    <url>%2Fposts%2F10965f08.html</url>
    <content type="text"><![CDATA[åœ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ä¹‹å‰ï¼Œè¯·å…ˆç¡®è®¤æ‚¨çš„Androidå¼€å‘çŽ¯å¢ƒæ˜¯okçš„ã€‚ JAVAçŽ¯å¢ƒ, jdk7+ Android Studio NDK r16ã€Cmake 3.9.0+ (å¯é€‰é¡¹ï¼šå¦‚æžœéœ€è¦ç¼–è¯‘WEEXæºç ï¼Œéœ€è¦NDKçŽ¯å¢ƒæ”¯æŒ) 1. è®¾ç½®gradleä¾èµ–1234567891011dependencies &#123; ... // weex sdk and fastjson compile &apos;com.taobao.android:weex_sdk:0.20.0.2@aar&apos; compile &apos;com.alibaba:fastjson:1.1.46.android&apos; //support library dependencies compile &apos;com.android.support:recyclerview-v7:23.1.1&apos; compile &apos;com.android.support:support-v4:23.1.1&apos; compile &apos;com.android.support:appcompat-v7:23.1.1&apos;&#125; 2. é…ç½®æ··æ·†è§„åˆ™æ··æ·†è§„åˆ™å¦‚ä¸‹ï¼Œå»ºè®®å‚è€ƒæœ€æ–°çš„æºç é…ç½® 12345-keep class com.taobao.weex.bridge.** &#123; *; &#125;-keep class com.taobao.weex.layout.** &#123; *; &#125;-keep class com.taobao.weex.WXSDKEngine &#123; *; &#125;-keep class com.taobao.weex.base.SystemMessageHandler &#123; *; &#125;-dontwarn com.taobao.weex.bridge.** 3. å£°æ˜Žæƒé™åœ¨AndroidManifest.xmlä¸­å£°æ˜Žæƒé™ 1234567//ç½‘ç»œ&lt;uses-permission android:name="android.permission.INTERNET"/&gt;&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/&gt;//sdå¡è¯»å†™&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/&gt;&lt;uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/&gt; 4. åˆå§‹åŒ–sdk1234567InitConfig config = new InitConfig.Builder() //å›¾ç‰‡åº“æŽ¥å£ .setImgAdapter(new FrescoImageAdapter()) //ç½‘ç»œåº“æŽ¥å£ .setHttpAdapter(new InterceptWXHttpAdapter()) .build();WXSDKEngine.initialize(applicationContext,config); demoåˆå§‹åŒ–æºç  å…¶å®ƒæ‰©å±•é…ç½®çœ‹è¿™é‡Œ 5. åˆ›å»ºWXSDKInstanceWXSDKInstanceæ˜¯weexæ¸²æŸ“é¡µé¢çš„åŸºæœ¬å•å…ƒï¼Œ é€šè¿‡instance.render(url)æ‹‰å–bundleï¼Œ åœ¨å›žè°ƒIWXRenderListenerçš„onViewCreatedè¿”å›žåˆ›å»ºçš„viewï¼Œ å°†è¿”å›žçš„view æ·»åŠ åˆ°Activityçš„viewä¸Šï¼ˆrootViewï¼‰ å‚è§æºç : WXPageActivity 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657public class MainActivity extends AppCompatActivity implements IWXRenderListener &#123; WXSDKInstance mWXSDKInstance; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); mWXSDKInstance = new WXSDKInstance(this); mWXSDKInstance.registerRenderListener(this); /** * bundleUrl source http://dotwe.org/vue/38e202c16bdfefbdb88a8754f975454c */ String pageName = "WXSample"; String bundleUrl = "http://dotwe.org/raw/dist/38e202c16bdfefbdb88a8754f975454c.bundle.wx"; mWXSDKInstance.renderByUrl(pageName, bundleUrl, null, null,WXRenderStrategy.APPEND_ASYNC); &#125; @Override public void onViewCreated(WXSDKInstance instance, View view) &#123; setContentView(view); &#125; @Override public void onRenderSuccess(WXSDKInstance instance, int width, int height) &#123; &#125; @Override public void onRefreshSuccess(WXSDKInstance instance, int width, int height) &#123; &#125; @Override public void onException(WXSDKInstance instance, String errCode, String msg) &#123; &#125; @Override protected void onResume() &#123; super.onResume(); if(mWXSDKInstance!=null)&#123; mWXSDKInstance.onActivityResume(); &#125; &#125; @Override protected void onPause() &#123; super.onPause(); if(mWXSDKInstance!=null)&#123; mWXSDKInstance.onActivityPause(); &#125; &#125; @Override protected void onStop() &#123; super.onStop(); if(mWXSDKInstance!=null)&#123; mWXSDKInstance.onActivityStop(); &#125; &#125; @Override protected void onDestroy() &#123; super.onDestroy(); if(mWXSDKInstance!=null)&#123; mWXSDKInstance.onActivityDestroy(); &#125; &#125;&#125; 6. è¿è¡Œappè¿è¡Œappï¼Œæ‚¨å°†ä¼šçœ‹åˆ°ä¸€ä¸ª hello world é¡µé¢ã€‚ Hello World Demo æºç  æç¤º: ç‚¹å‡»äºŒç»´ç , å¯ä»¥çœ‹åˆ°æœ€ç»ˆç¼–è¯‘çš„ä»£ç äº§ç‰©ã€‚ 7. æ‰©å±•Androidèƒ½åŠ›Weex æä¾›äº†èƒ½åŠ›æ‰©å±•æœºåˆ¶ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡è¿›è¡Œå®šåˆ¶è‡ªå·±çš„åŠŸèƒ½ã€‚ ä¸»è¦åˆ†ä¸ºï¼š Module æ‰©å±•ï¼Œ éž UI çš„ç‰¹å®šåŠŸèƒ½ã€‚ä¾‹å¦‚ sendHttpã€openURL ç­‰ã€‚ Component æ‰©å±•ï¼Œ å®žçŽ°ç‰¹åˆ«åŠŸèƒ½çš„ Native æŽ§ä»¶ã€‚ä¾‹å¦‚ï¼šRichTextviewï¼ŒRefreshListview ç­‰ã€‚ Adapter æ‰©å±•ï¼Œ Weex å¯¹ä¸€äº›åŸºç¡€åŠŸèƒ½å®žçŽ°äº†ç»Ÿä¸€çš„æŽ¥å£ï¼Œå¯å®žçŽ°è¿™äº›æŽ¥å£æ¥å®šåˆ¶è‡ªå·±çš„ä¸šåŠ¡ã€‚ä¾‹å¦‚ï¼šå›¾ç‰‡ä¸‹è½½ç­‰ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Weex</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Weex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Weex åˆ›å»ºä¸€ä¸ªapp]]></title>
    <url>%2Fposts%2Ffccf4639.html</url>
    <content type="text"><![CDATA[ä»¥ä¸‹æ­¥éª¤å‡è®¾æ‚¨å·²ç»äº†è§£äº† Node.js å’Œ npm çš„åŸºæœ¬çŸ¥è¯†ã€‚å¦‚æžœå¯¹å®ƒä»¬ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥è®¿é—® https://docs.npmjs.com/ æ¥äº†è§£æ›´å¤šå…³äºŽ npm çš„ç”¨æ³•ã€‚ Weex æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…· weex-toolkit æ¥å¸®åŠ©å¼€å‘è€…ä½¿ç”¨ Weexã€‚å®ƒå¯ä»¥ç”¨æ¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®ã€åˆå§‹åŒ– iOS å’Œ Android å¼€å‘çŽ¯å¢ƒã€è°ƒè¯•ã€å®‰è£…æ’ä»¶ç­‰æ“ä½œã€‚ ç›®å‰ weex-toolkit åªæ”¯æŒåˆ›å»º Vue.js çš„é¡¹ç›®ã€‚åˆ›å»º Rax çš„é¡¹ç›®å¯ä»¥ä½¿ç”¨ rax-cliï¼Œå‚è€ƒ Rax çš„å®˜æ–¹ç½‘ç«™ äº†è§£å…¶ç”¨æ³•ã€‚ åˆå§‹åŒ–è¯·ç¡®ä¿ä½ å·²ç»å®‰è£…äº† Node.jsï¼Œç„¶åŽå…¨å±€å®‰è£… weex-toolkitã€‚ 1npm install weex-toolkit -g è¿™æ¡å‘½ä»¤ä¼šå‘ä½ å‘½ä»¤è¡ŒçŽ¯å¢ƒä¸­æ³¨å†Œä¸€ä¸ª weex å‘½ä»¤ã€‚ä½ å¯ä»¥ç”¨ weex create å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªç©ºçš„æ¨¡æ¿é¡¹ç›®ï¼š 1weex create awesome-app å‘½ä»¤æ‰§è¡Œå®Œä»¥åŽï¼Œåœ¨å½“å‰ç›®å½•çš„ awesome-app æ–‡ä»¶å¤¹é‡Œå°±æœ‰äº†ä¸€ä¸ªç©ºçš„ Weex + Vue.js é¡¹ç›®ã€‚ å¼€å‘ä¸‹ä¸€æ­¥å°±æ˜¯è¿›å…¥åˆšåˆšåˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å®‰è£…ä¾èµ–ï¼Œç„¶åŽæ‰§è¡Œ npm startï¼š 123cd awesome-appnpm installnpm start ç„¶åŽå·¥å…·ä¼šå¯åŠ¨ä¸€ä¸ªæœ¬åœ°çš„ web æœåŠ¡ï¼Œç›‘å¬ 8081 ç«¯å£ã€‚ä½ å¯ä»¥æ‰“å¼€ http://localhost:8081 æŸ¥çœ‹é¡µé¢åœ¨ Web ä¸‹çš„æ¸²æŸ“æ•ˆæžœã€‚ æºä»£ç åœ¨ src/ ç›®å½•ä¸­ï¼Œä½ å¯ä»¥åƒä¸€ä¸ªæ™®é€šçš„ Vue.js é¡¹ç›®ä¸€æ ·æ¥å¼€å‘. é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥æ‰“å¼€ http://localhost:8081/preview.html å¼€å¯ä¸€ä¸ªé¢„è§ˆé¡µé¢ï¼Œå®ƒä¼šæŠŠ web ç«¯çš„é¡µé¢æ”¾åœ¨ä¸€ä¸ª iframe ä¸­æ¸²æŸ“ï¼Œè€Œä¸”åœ¨å³ä¾§ç”Ÿæˆä¸€ä¸ªäºŒç»´ç ã€‚ç”¨ Weex playground app æ‰«æè¿™ä¸ªäºŒç»´ç å¯ä»¥çœ‹åˆ°é¡µé¢åœ¨æ‰‹æœºä¸Šæ¸²æŸ“çš„çœŸå®žæ•ˆæžœã€‚ ç¼–è¯‘å’Œè¿è¡Œé»˜è®¤æƒ…å†µä¸‹ weex create å‘½ä»¤å¹¶ä¸åˆå§‹åŒ– iOS å’Œ Android é¡¹ç›®ï¼Œä½ å¯ä»¥é€šè¿‡æ‰§è¡Œ weex platform add æ¥æ·»åŠ ç‰¹å®šå¹³å°çš„é¡¹ç›®ã€‚ 12weex platform add iosweex platform add android ç”±äºŽç½‘ç»œçŽ¯å¢ƒçš„ä¸åŒï¼Œå®‰è£…è¿‡ç¨‹å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚å¦‚æžœå®‰è£…å¤±è´¥ï¼Œè¯·ç¡®ä¿è‡ªå·±çš„ç½‘ç»œçŽ¯å¢ƒç•…é€šã€‚ ä¸ºäº†èƒ½åœ¨æœ¬åœ°æœºå™¨ä¸Šæ‰“å¼€ Android å’Œ iOS é¡¹ç›®ï¼Œä½ åº”è¯¥é…ç½®å¥½å®¢æˆ·ç«¯çš„å¼€å‘çŽ¯å¢ƒã€‚å¯¹äºŽ iOSï¼Œä½ åº”è¯¥å®‰è£…å¹¶ä¸”é…ç½®å¥½ Xcodeã€‚å¯¹äºŽ Androidï¼Œä½ åº”è¯¥å®‰è£…å¹¶ä¸”é…ç½®å¥½ Android Studioã€‚å½“å¼€å‘çŽ¯å¢ƒå‡†å¤‡å°±ç»ªåŽï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥åœ¨æ¨¡æ‹Ÿå™¨æˆ–çœŸå®žè®¾å¤‡ä¸Šå¯åŠ¨åº”ç”¨ï¼š 123weex run iosweex run androidweex run web è°ƒè¯•weex-toolkit è¿˜æä¾›äº†å¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ï¼Œåªéœ€è¦æ‰§è¡Œï¼š 1weex debug è¿™æ¡å‘½ä»¤ä¼šå¯åŠ¨ä¸€ä¸ªè°ƒè¯•æœåŠ¡ï¼Œå¹¶ä¸”åœ¨ Chrome ï¼ˆç›®å‰åªæ”¯æŒåŸºäºŽ V8 å¼•æ“Žçš„æ¡Œé¢æµè§ˆå™¨ï¼‰ ä¸­æ‰“å¼€è°ƒè¯•é¡µé¢ã€‚è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒ weex-toolkit çš„æ–‡æ¡£ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Weex</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Weex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Weex è®¾ç½®å¼€å‘çŽ¯å¢ƒ]]></title>
    <url>%2Fposts%2F55bbc4a4.html</url>
    <content type="text"><![CDATA[ä½¿ç”¨ Weex Online Editor å¯¹ Weex å°é²œæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä½†å¦‚æžœä½ æƒ³æ›´ä¸“ä¸šçš„å¼€å‘ Weexï¼Œä¸‹é¢æ•™ä½ å¦‚ä½•æ­å»ºæœ¬åœ°å¼€å‘çŽ¯å¢ƒè¿›è¡Œ Weex å¼€å‘ã€‚ å®‰è£…ä¾èµ–Weex å®˜æ–¹æä¾›äº†weex-toolkit çš„è„šæ‰‹æž¶å·¥å…·æ¥è¾…åŠ©å¼€å‘å’Œè°ƒè¯•ã€‚ é¦–å…ˆï¼Œä½ éœ€è¦ Node.js å’Œ Weex CLiã€‚ å®‰è£… Node.js æ–¹å¼å¤šç§å¤šæ ·ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯åœ¨ Node.js å®˜ç½‘ ä¸‹è½½å¯æ‰§è¡Œç¨‹åºç›´æŽ¥å®‰è£…å³å¯ã€‚ æ›´å¤šå®‰è£…æ–¹å¼å¯å‚è€ƒ Node.js å®˜æ–¹ä¿¡æ¯ ::: Tip é€šå¸¸ï¼Œå®‰è£…äº† Node.js çŽ¯å¢ƒï¼Œnpm åŒ…ç®¡ç†å·¥å…·ä¹Ÿéšä¹‹å®‰è£…äº†ã€‚å› æ­¤ï¼Œç›´æŽ¥ä½¿ç”¨ npm æ¥å®‰è£… weex-toolkit, ä½ ä¹Ÿå¯ä»¥é€šè¿‡ yarn æ¥è¿›è¡Œå®‰è£…ã€‚ å›½å†…çš„å¼€å‘è€…æŽ¨èå°†npmé•œåƒåˆ‡æ¢è‡³ Taobao NPM é•œåƒã€‚ ::: è¿è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…æœ€æ–°çš„betaç‰ˆæœ¬å·¥å…·ï¼š 12$ npm install -g weex-toolkit@beta$ weex -v // æŸ¥çœ‹å½“å‰weexå·¥å…·ç‰ˆæœ¬ å®‰è£…ç»“æŸåŽä½ å¯ä»¥ç›´æŽ¥ä½¿ç”¨ weex help å‘½ä»¤éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå®ƒä¼šæ˜¾ç¤º weex æ”¯æŒçš„æ‰€æœ‰æŒ‡ä»¤ï¼ŒåŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ weex doctor å‘½ä»¤æ£€æŸ¥ä½ çš„æœ¬åœ°å¼€å‘çŽ¯å¢ƒã€‚ åˆå§‹åŒ–é¡¹ç›®ç„¶åŽåˆå§‹åŒ– Weex é¡¹ç›®ï¼š 1$ weex create awesome-project æ‰§è¡Œå®Œå‘½ä»¤åŽï¼Œåœ¨ awesome-project ç›®å½•ä¸­å·²ç»ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†æ ‡å‡†é¡¹ç›®ç»“æž„ã€‚ å¼€å‘è¿›å…¥é¡¹ç›®æ‰€åœ¨è·¯å¾„ï¼Œå¦‚æžœä½ åœ¨ç”Ÿæˆé¡¹ç›®çš„æ—¶å€™é€‰æ‹©äº†è‡ªåŠ¨å®‰è£…ä¾èµ–ï¼Œåœ¨è¿›å…¥é¡¹ç›®åŽåªéœ€ç›´æŽ¥è¿è¡Œ npm start å°±å¯ä»¥å°†é¡¹ç›®å®Œæ•´è·‘èµ·æ¥ï¼Œå¦åˆ™ï¼Œä½ éœ€è¦é¢„å…ˆåœ¨é¡¹ç›®ä¸­è¿è¡Œä¸€ä¸‹ npm install å®‰è£…é¡¹ç›®æ‰€éœ€ä¾èµ–ã€‚ å…³äºŽ Weex è¯­æ³•éƒ¨åˆ†ï¼Œä½ å¯ä»¥ç›´æŽ¥å‚è€ƒ Vue Guide]]></content>
      <categories>
        <category>Android</category>
        <category>Weex</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Weex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»€ä¹ˆæ˜¯ Weex ï¼Ÿ]]></title>
    <url>%2Fposts%2F96214312.html</url>
    <content type="text"><![CDATA[Weex æ˜¯ä½¿ç”¨æµè¡Œçš„ Web å¼€å‘ä½“éªŒæ¥å¼€å‘é«˜æ€§èƒ½åŽŸç”Ÿåº”ç”¨çš„æ¡†æž¶ã€‚â€œWeexâ€ çš„å‘éŸ³æ˜¯ /wiËks/, å’Œ â€œWeeksâ€œ åŒéŸ³ã€‚ Write Once, Run EverywhereWeex è‡´åŠ›äºŽä½¿å¼€å‘è€…èƒ½åŸºäºŽé€šç”¨è·¨å¹³å°çš„ Web å¼€å‘è¯­è¨€å’Œå¼€å‘ç»éªŒï¼Œæ¥æž„å»º Androidã€iOS å’Œ Web åº”ç”¨ã€‚ç®€å•æ¥è¯´ï¼Œåœ¨é›†æˆäº† WeexSDK ä¹‹åŽï¼Œä½ å¯ä»¥ä½¿ç”¨ JavaScript è¯­è¨€å’Œå‰ç«¯å¼€å‘ç»éªŒæ¥å¼€å‘ç§»åŠ¨åº”ç”¨ã€‚ Weex æ¸²æŸ“å¼•æ“Žä¸Ž DSL è¯­æ³•å±‚æ˜¯åˆ†å¼€çš„ï¼ŒWeex å¹¶ä¸å¼ºä¾èµ–ä»»ä½•ç‰¹å®šçš„å‰ç«¯æ¡†æž¶ã€‚ç›®å‰ Vue.js å’Œ Rax è¿™ä¸¤ä¸ªå‰ç«¯æ¡†æž¶è¢«å¹¿æ³›åº”ç”¨äºŽ Weex é¡µé¢å¼€å‘ï¼ŒåŒæ—¶ Weex ä¹Ÿå¯¹è¿™ä¸¤ä¸ªå‰ç«¯æ¡†æž¶æä¾›äº†æœ€å®Œå–„çš„æ”¯æŒã€‚Weex çš„å¦ä¸€ä¸ªä¸»è¦ç›®æ ‡æ˜¯è·Ÿè¿›æµè¡Œçš„ Web å¼€å‘æŠ€æœ¯å¹¶å°†å…¶å’ŒåŽŸç”Ÿå¼€å‘çš„æŠ€æœ¯ç»“åˆï¼Œå®žçŽ°å¼€å‘æ•ˆçŽ‡å’Œè¿è¡Œæ€§èƒ½çš„é«˜åº¦ç»Ÿä¸€ã€‚åœ¨å¼€å‘é˜¶æ®µï¼Œä¸€ä¸ª Weex é¡µé¢å°±åƒå¼€å‘æ™®é€šç½‘é¡µä¸€æ ·ï¼›åœ¨è¿è¡Œæ—¶ï¼ŒWeex é¡µé¢åˆå……åˆ†åˆ©ç”¨äº†å„ç§æ“ä½œç³»ç»Ÿçš„åŽŸç”Ÿç»„ä»¶å’Œèƒ½åŠ›ã€‚ æ¦‚è¿°æƒ³åˆæ­¥äº†è§£ Weex å…¶å®žéžå¸¸ç®€å•ã€‚ å®‰è£… WeexPlayground. åœ¨ Playground é‡Œï¼Œä½ å¯ä»¥æ‰“å¼€å„ç§ç¤ºä¾‹ã€‚ è®¿é—® Weex online playground. åœ¨è¿™ä¸ªç½‘ç«™ä¸Šï¼Œä½ å¯ä»¥æµè§ˆã€ä¿®æ”¹ã€æ–°å»ºå„ç§åŸºäºŽ Vue.js çš„å•é¡µé¢ä¾‹å­ï¼Œå¹¶ç”¨ WeexPlayground åº”ç”¨æ‰«ç æŸ¥çœ‹å®žæ—¶æ•ˆæžœã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨ Weex å’Œ Vue.js å¼€å‘çš„æœ€ç®€å•çš„ä¾‹å­ã€‚ä½ å¯ä»¥å¤§è‡´äº†è§£ Weex æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ åœ¨ &lt;template&gt; éƒ¨åˆ†ï¼ŒåŒ…å«äº† &lt;div&gt; å…ƒç´ ï¼Œè¿™ä¸ªè¢«å¹¿æ³›åº”ç”¨äºŽ Web é¡µé¢ä¸­ï¼Œåœ¨ Weex é‡Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªé€šç”¨çš„å®¹å™¨ã€‚&lt;text&gt;å…ƒç´ å°±å’Œæ™®é€šçš„ HTML ä¸å¤ªä¸€æ ·äº†ï¼Œå®ƒæä¾›äº†æ˜¾ç¤ºæ–‡æœ¬çš„èƒ½åŠ›ï¼Œåœ¨ Weex ä¸Šï¼Œæ‰€æœ‰æ–‡æœ¬å¿…é¡»æ”¾åœ¨ &lt;text&gt; æ ‡ç­¾ä¸­ã€‚ åœ¨ &lt;style&gt; éƒ¨åˆ†ï¼Œä½ å¯ä»¥å®šä¹‰å„ç§ CSS æ ·å¼ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æ ·å¼åœ¨ Weex é‡Œåªèƒ½ä½œç”¨äºŽå½“å‰ç»„ä»¶ï¼Œscopedã€‚ åŽŸç”Ÿç»„ä»¶åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ&lt;div&gt; å’Œ &lt;text&gt; åœ¨ç§»åŠ¨ç«¯ä¸Šæ¸²æŸ“å‡ºæ¥çš„éƒ½æ˜¯åŽŸç”Ÿç»„ä»¶ï¼Œå……åˆ†åˆ©ç”¨äº†æ“ä½œç³»ç»Ÿç»„ä»¶çš„èƒ½åŠ›ä¸Žæ¸²æŸ“é€Ÿåº¦ã€‚ Weex æä¾›äº†ä¸€å¥—åŸºç¡€çš„å†…ç½®ç»„ä»¶ã€‚ä½ å¯ä»¥å¯¹è¿™äº›åŸºç¡€ç»„ä»¶è¿›è¡Œå°è£…ã€ç»„åˆå½¢æˆè‡ªå·±çš„ç»„ä»¶ï¼›ä¹Ÿå¯ä»¥åˆ›å»ºè‡ªå·±çš„å…¨æ–°ç»„ä»¶æ¥åŒ…è£…æ“ä½œç³»ç»Ÿæä¾›çš„åœ°å›¾ã€è§†é¢‘ç­‰åŠŸèƒ½ã€‚å¯ä»¥è®¿é—® æ‰©å±• iOS èƒ½åŠ› å’Œ æ‰©å±• Android èƒ½åŠ›æ¥äº†è§£å¦‚ä½•åŽ»å®žçŽ°è‡ªå®šä¹‰ç»„ä»¶ã€‚ åœ¨æ¡†æž¶å†…éƒ¨ï¼ŒWeex ä½¿ç”¨åŽŸç”Ÿç»„ä»¶æ¥æ¸²æŸ“ï¼Œå¹¶å°½å¯èƒ½ä¿æŒå¤šå¹³å°ä¸€è‡´æ€§ã€‚ä½†åœ¨ä¸åŒå¹³å°ä¸Šï¼Œæˆ–å¤šæˆ–å°‘ä¼šæœ‰ä¸€äº›æ¸²æŸ“ã€è¡Œä¸ºä¸Šçš„å·®å¼‚ã€‚æ¯”å¦‚å¯¹äºŽ `` ç»„ä»¶ï¼Œåœ¨ä¸åŒå¹³å°ä¸Šçš„è§†è§‰æ•ˆæžœæ˜¯ä¸ä¸€è‡´çš„ã€‚ åŽŸç”Ÿæ¨¡å—å¯¹äºŽé‚£äº›ä¸ä¾èµ–äºŽ UI ç»„ä»¶çš„åŠŸèƒ½ï¼ŒWeex å°†å®ƒä»¬åŒ…è£…æˆå¤šä¸ª æ¨¡å—ï¼Œæ¯”å¦‚ åŠ¨ç”»æ¨¡å—ã€‚åœ¨å‰ç«¯ä»£ç ä¸­ï¼Œä½¿ç”¨ weex.requireModule(&#39;xxx&#39;) å¼•å…¥ä¸€ä¸ªæ¨¡å—ï¼Œä¹‹åŽå°±å¯ä»¥è°ƒç”¨å®ƒæä¾›çš„å„ç§æ–¹æ³•ã€‚Weex æ¨¡å—åŒ…è£…äº†ç½‘ç»œã€å­˜å‚¨ã€å‰ªåˆ‡æ¿ã€å¯¼èˆªç­‰å„ç§åŠŸèƒ½ä¾›å‰ç«¯è°ƒç”¨ã€‚æ¯”å¦‚ä½ å¯ä»¥ä½¿ç”¨ stream æ¨¡å—æ¥èŽ·å– Vue.js çš„ Star æ•°é‡ã€‚ Weex å·²ç»æä¾›äº†ä¸å°‘å†…ç½®æ¨¡å—ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒå°† App ç‰¹æœ‰çš„åŠŸèƒ½åŒ…è£…æˆè‡ªå®šä¹‰æ¨¡å—æä¾›ç»™å‰ç«¯è°ƒç”¨ã€‚å¦‚æžœæƒ³äº†è§£æ€Žä¹ˆåšï¼Œå¯ä»¥æµè§ˆä»¥ä¸‹æ–‡æ¡£ã€‚ æ‰©å±• Web ç»„ä»¶ æ‰©å±• Android èƒ½åŠ› æ‰©å±• iOS èƒ½åŠ› ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„è¿è¡ŒWeex çš„ç›®æ ‡å°±æ˜¯ä½¿ç”¨å¼€å‘è€…åŸºäºŽä¸€ä»½ä»£ç ï¼Œç¼–å†™å‡ºå¯ä»¥è¿è¡Œåœ¨ iOSï¼ŒAndroid å’Œ Web ä¸Šçš„åº”ç”¨ï¼Œå¹¶æœ€å¤§åŒ–åœ°æé«˜å¼€å‘æ•ˆçŽ‡å’Œç®€åŒ–æµ‹è¯•ã€æž„å»ºã€å‘å¸ƒæµç¨‹ã€‚ æœ‰ä¸€äº›åœºæ™¯ï¼Œä½ å¯èƒ½ä»ç„¶éœ€è¦å†™ä¸€äº›å¹³å°ç›¸å…³çš„ä»£ç ã€‚Weex æä¾› WXEnvironment ç”¨æ¥èŽ·å– Weex è¿è¡Œçš„çŽ¯å¢ƒå˜é‡ï¼Œæµè§ˆ Weex çŽ¯å¢ƒå˜é‡ï¼Œäº†è§£æ›´å¤šã€‚ ä½¿ç”¨å‰ç«¯æ¡†æž¶Weex åº”ç”¨éœ€è¦ä¾èµ–å‰ç«¯æ¡†æž¶æ¥ç¼–å†™ï¼Œä½† Weex å¹¶æ²¡æœ‰ç»‘å®šã€é™åˆ¶åœ¨ç‰¹å®šçš„æ¡†æž¶ä¸Šã€‚ç›®å‰ Vue.js å’Œ Rax æ˜¯æœ€å¹¿æ³›åº”ç”¨äºŽ Weex å¼€å‘çš„å‰ç«¯æ¡†æž¶ï¼Œä¹Ÿæ˜¯ç›®å‰åŠŸèƒ½æœ€å…¨ã€æœ€ç¨³å®šçš„æ–¹æ¡ˆã€‚ Vue.js æ˜¯ä¸€ä¸ªä¸æ–­è¿›åŒ–ä¸­çš„å‰ç«¯æ¡†æž¶ã€‚ Rax æ˜¯æä¾›ç±» React è¯­æ³•å’Œå…¼å®¹æ€§çš„å‰ç«¯æ¡†æž¶ã€‚ Vue.js å’Œ Rax éƒ½å·²ç»é›†æˆåˆ° Weex ä¸­ï¼Œå¹¶é»˜è®¤æä¾›ã€‚ å°†è‡ªå·±å–œæ¬¢çš„å‰ç«¯æ¡†æž¶å’Œ Weex è¿›è¡Œç»“åˆæ˜¯å¯ä»¥çš„ï¼Œä½†å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ã€‚æˆ‘ä»¬ä¹Ÿåœ¨ä¸æ–­å¼€å‘å’Œç®€åŒ–è¿™ç§æŽ¥å…¥å·¥ä½œï¼Œå¦‚æžœæƒ³äº†è§£å¦‚ä½•åšï¼Œæˆ–æœ‰ä»»ä½•æƒ³æ³•å¯ä»¥å’Œæˆ‘ä»¬è”ç³»ã€‚ä½ ä¹Ÿå¯ä»¥å…ˆé˜…è¯»ä¸€ä¸‹ ä½¿ç”¨å‰ç«¯æ¡†æž¶ è¿™ç¯‡æ–‡æ¡£äº†è§£å®ƒæ˜¯åšä»€ä¹ˆçš„ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Weex</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Weex</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè®¯å½•èŽ·å–/æ·»åŠ ä¿¡æ¯ AddressBook]]></title>
    <url>%2Fposts%2Fe1546149.html</url>
    <content type="text"><![CDATA[æºç ï¼šAddressBook 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182package com.example.zm.addressbook;import android.content.ContentResolver;import android.content.ContentUris;import android.content.Context;import android.database.Cursor;import android.graphics.Bitmap;import android.graphics.BitmapFactory;import android.net.Uri;import android.provider.ContactsContract;import android.text.TextUtils;import android.util.Log;import org.json.JSONArray;import org.json.JSONException;import org.json.JSONObject;import java.io.InputStream;import java.util.ArrayList;import java.util.List;public class ContactUtil &#123; /** * èŽ·å–è”ç³»äººä¿¡æ¯ï¼Œå¹¶æŠŠæ•°æ®è½¬æ¢æˆjsonæ•°æ® * * @return * @throws JSONException */ public static String getContactInfo(Context context) throws JSONException &#123; JSONObject contactData = null; JSONObject jsonObject = null; JSONArray jsonArray = null; JSONObject jsonObject2 = null; JSONArray jsonArray2 = null; contactData = new JSONObject(); jsonArray = new JSONArray(); String mimetype = ""; int oldrid = -1; int contactId = -1; // 1.æŸ¥è¯¢é€šè®¯å½•æ‰€æœ‰è”ç³»äººä¿¡æ¯ï¼Œé€šè¿‡idæŽ’åºï¼Œæˆ‘ä»¬çœ‹ä¸‹androidè”ç³»äººçš„è¡¨å°±çŸ¥é“ï¼Œæ‰€æœ‰çš„è”ç³»äººçš„æ•°æ®æ˜¯ç”±RAW_CONTACT_IDæ¥ç´¢å¼•å¼€çš„ // æ‰€ä»¥ï¼Œå…ˆèŽ·å–æ‰€æœ‰çš„äººçš„RAW_CONTACT_ID Cursor cursor = context.getContentResolver().query(ContactsContract.Data.CONTENT_URI, null, null, null, ContactsContract.Data.RAW_CONTACT_ID); contactData.put("userId", "11111"); while (cursor.moveToNext()) &#123; contactId = cursor.getInt(cursor.getColumnIndex(ContactsContract.Data.RAW_CONTACT_ID)); if (oldrid != contactId) &#123; jsonObject = new JSONObject(); jsonArray2 = new JSONArray(); jsonArray.put(jsonObject); oldrid = contactId; &#125; mimetype = cursor.getString(cursor.getColumnIndex(ContactsContract.Data.MIMETYPE)); // å–å¾—mimetypeç±»åž‹,æ‰©å±•çš„æ•°æ®éƒ½åœ¨è¿™ä¸ªç±»åž‹é‡Œé¢ Bitmap headPhoto = getHighPhoto(contactId + "", context.getContentResolver()); if (null == headPhoto) &#123; jsonObject.put("headImageUrl", ""); &#125; else &#123; jsonObject.put("headImageUrl", headPhoto); &#125; // åå­— if (ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE.equals(mimetype)) &#123; cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME)); String firstName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME)); String lastname = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME)); String trueName = firstName + lastname; if (TextUtils.isEmpty(trueName)) &#123; jsonObject.put("trueName", ""); &#125; else &#123; jsonObject.put("trueName", trueName); &#125; &#125; // æ˜µç§° if (ContactsContract.CommonDataKinds.Nickname.CONTENT_ITEM_TYPE.equals(mimetype)) &#123; cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Nickname.DISPLAY_NAME)); String nickName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Nickname.NAME)); if (TextUtils.isEmpty(nickName)) &#123; jsonObject.put("nickName", ""); &#125; else &#123; jsonObject.put("nickName", nickName); &#125; &#125; List&lt;AddressBookMoudle.ContactBook&gt; contactList = new ArrayList&lt;AddressBookMoudle.ContactBook&gt;(); // 1.2 èŽ·å–å„ç§ç”µè¯ä¿¡æ¯ if (ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE.equals(mimetype)) &#123; int phoneType = cursor.getInt(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE)); // æ‰‹æœº // ä¸ªäººç”µè¯ if (phoneType == ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE) &#123; String mobile = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)); AddressBookMoudle.ContactBook contactBook = new AddressBookMoudle.ContactBook(); contactBook.setContact(mobile); contactBook.setContactType("0"); contactList.add(contactBook); &#125; &#125; // Email if (ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE.equals(mimetype)) &#123; String mobileEmail = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)); AddressBookMoudle.ContactBook contactBook = new AddressBookMoudle.ContactBook(); contactBook.setContact(mobileEmail); contactBook.setContactType("1"); contactList.add(contactBook); &#125; if (contactList.size() &gt; 0) &#123; for (int i = 0; i &lt; contactList.size(); i++) &#123; jsonObject2 = new JSONObject(); jsonObject2.put("contact", contactList.get(i).getContact()); jsonObject2.put("contactType", contactList.get(i).getContactType()); jsonArray2.put(jsonObject2); &#125; jsonObject.put("contactList", jsonArray2); &#125; // æŸ¥æ‰¾eventåœ°å€ if (ContactsContract.CommonDataKinds.Event.CONTENT_ITEM_TYPE.equals(mimetype)) &#123; // å–å‡ºæ—¶é—´ç±»åž‹ int eventType = cursor.getInt(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Event.TYPE)); // ç”Ÿæ—¥ if (eventType == ContactsContract.CommonDataKinds.Event.TYPE_BIRTHDAY) &#123; String birthday = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Event.START_DATE)); if (TextUtils.isEmpty(birthday)) &#123; jsonObject.put("birthDay", ""); &#125; else &#123; jsonObject.put("birthDay", birthday); &#125; &#125; &#125; // èŽ·å–ç»„ç»‡ä¿¡æ¯ if (ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE.equals(mimetype)) &#123; // å–å‡ºç»„ç»‡ç±»åž‹ int orgType = cursor.getInt(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Organization.TYPE)); // å•ä½ if (orgType == ContactsContract.CommonDataKinds.Organization.TYPE_CUSTOM) &#123; // if (orgType == // Organization.TYPE_WORK) // &#123; String company = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Organization.COMPANY)); if (TextUtils.isEmpty(company)) &#123; jsonObject.put("company", ""); &#125; else &#123; jsonObject.put("company", company); &#125; String jobTitle = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Organization.TITLE)); if (TextUtils.isEmpty(jobTitle)) &#123; jsonObject.put("jobtitle", ""); &#125; else &#123; jsonObject.put("jobtitle", jobTitle); &#125; String department = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Organization.DEPARTMENT)); if (TextUtils.isEmpty(department)) &#123; jsonObject.put("department", ""); &#125; else &#123; jsonObject.put("department", department); &#125; &#125; &#125; &#125; cursor.close(); contactData.put("addressBookList", jsonArray); Log.i("contactData", contactData.toString()); return contactData.toString(); &#125; /** * èŽ·å–è”ç³»äººé«˜æ¸…å¤´åƒ * * @param people_id è”ç³»äººID * @param cr è°ƒç”¨å®¹å™¨ * @return è”ç³»äººçš„é«˜æ¸…å¤´åƒ */ public static Bitmap getHighPhoto(String people_id, ContentResolver cr) &#123; Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, Long.parseLong(people_id)); InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(cr, uri, true); if (input == null) &#123; return null; &#125; return BitmapFactory.decodeStream(input); &#125;&#125; 123456789101112131415161718&#123; "userId": "11111", "addressBookList": [&#123; "headImageUrl": "", "trueName": "å¼ ä¸‰", "company": "åŒ—äº¬xxxæœ‰é™å…¬å¸", "jobtitle": "ç ”å‘å·¥ç¨‹å¸ˆ", "department": "", "contactList": [&#123; "contact": "185 0000 1234", "contactType": "0" &#125;, &#123; "contact": "zhangsan@163.com", "contactType": "1" &#125;], "birthDay": "2018-03-25" &#125;]&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>ä»£ç ç‰‡æ®µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac_VSCodeå¿«æ·é”®]]></title>
    <url>%2Fposts%2F550c573.html</url>
    <content type="text"><![CDATA[å®˜æ–¹å¿«æ·é”® å…¨å±€ å¿«æ·é”® æè¿° Command + Shift + P / F1 æ˜¾ç¤ºå‘½ä»¤é¢æ¿ Command + P å¿«é€Ÿæ‰“å¼€ Command + Shift + N æ‰“å¼€æ–°çª—å£ Command + W å…³é—­çª—å£ åŸºæœ¬ å¿«æ·é”® æè¿° Command + X å‰ªåˆ‡ï¼ˆæœªé€‰ä¸­æ–‡æœ¬çš„æƒ…å†µä¸‹ï¼Œå‰ªåˆ‡å…‰æ ‡æ‰€åœ¨è¡Œï¼‰ Command + C å¤åˆ¶ï¼ˆæœªé€‰ä¸­æ–‡æœ¬çš„æƒ…å†µä¸‹ï¼Œå¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œï¼‰ Option + Shift + F æ ¼å¼åŒ– Option + Up å‘ä¸Šç§»åŠ¨è¡Œ Option + Down å‘ä¸‹ç§»åŠ¨è¡Œ Option + Shift + Up å‘ä¸Šå¤åˆ¶è¡Œ Option + Shift + Down å‘ä¸‹å¤åˆ¶è¡Œ Command + Shift + K åˆ é™¤è¡Œ Command + Enter ä¸‹ä¸€è¡Œæ’å…¥ Command + Shift + Enter ä¸Šä¸€è¡Œæ’å…¥ Command + Shift + \ è·³è½¬åˆ°åŒ¹é…çš„æ‹¬å· Command + [ å‡å°‘ç¼©è¿› Command + ] å¢žåŠ ç¼©è¿› Home è·³è½¬è‡³è¡Œé¦– End è·³è½¬åˆ°è¡Œå°¾ Command + Up è·³è½¬è‡³æ–‡ä»¶å¼€å¤´ Command + Down è·³è½¬è‡³æ–‡ä»¶ç»“å°¾ Ctrl + PgUp æŒ‰è¡Œå‘ä¸Šæ»šåŠ¨ Ctrl + PgDown æŒ‰è¡Œå‘ä¸‹æ»šåŠ¨ Command + PgUp æŒ‰å±å‘ä¸Šæ»šåŠ¨ Command + PgDown æŒ‰å±å‘ä¸‹æ»šåŠ¨ Command + Shift + [ æŠ˜å ä»£ç å— Command + Shift + ] å±•å¼€ä»£ç å— Command + K Command + [ æŠ˜å å…¨éƒ¨å­ä»£ç å— Command + K Command + ] å±•å¼€å…¨éƒ¨å­ä»£ç å— Command + K Command + 0 æŠ˜å å…¨éƒ¨ä»£ç å— Command + K Command + J å±•å¼€å…¨éƒ¨ä»£ç å— Command + K Command + C æ·»åŠ è¡Œæ³¨é‡Š Command + K Command + U ç§»é™¤è¡Œæ³¨é‡Š Command + / æ·»åŠ ã€ç§»é™¤è¡Œæ³¨é‡Š Option + Shift + A æ·»åŠ ã€ç§»é™¤å—æ³¨é‡Š Option + Z è‡ªåŠ¨æ¢è¡Œã€å–æ¶ˆè‡ªåŠ¨æ¢è¡Œ æŸ¥æ‰¾æ›¿æ¢ å¿«æ·é”® æè¿° Command + F æŸ¥æ‰¾ Command + Option + F æ›¿æ¢ Command + G æŸ¥æ‰¾ä¸‹ä¸€ä¸ª Command + Shift + G æŸ¥æ‰¾ä¸Šä¸€ä¸ª Option + Enter é€‰ä¸­æ‰€æœ‰åŒ¹é…é¡¹ Command + D å‘ä¸‹é€‰ä¸­ç›¸åŒå†…å®¹ Command + K Command + D ç§»é™¤å‰ä¸€ä¸ªå‘ä¸‹é€‰ä¸­ç›¸åŒå†…å®¹ å¤šå…‰æ ‡ä¸Žé€‰æ‹© å¿«æ·é”® æè¿° Option + ç‚¹å‡» æ’å…¥å¤šä¸ªå…‰æ ‡ Command + Option + Up å‘ä¸Šæ’å…¥å…‰æ ‡ Command + Option + Down å‘ä¸‹æ’å…¥å…‰æ ‡ Command + U æ’¤é”€ä¸Šä¸€ä¸ªå…‰æ ‡æ“ä½œ Option + Shift + I åœ¨æ‰€é€‰è¡Œçš„è¡Œå°¾æ’å…¥å…‰æ ‡ Command + I é€‰ä¸­å½“å‰è¡Œ Command + Shift + L é€‰ä¸­æ‰€æœ‰ä¸Žå½“å‰é€‰ä¸­å†…å®¹ç›¸åŒéƒ¨åˆ† Command + F2 é€‰ä¸­æ‰€æœ‰ä¸Žå½“å‰é€‰ä¸­å•è¯ç›¸åŒçš„å•è¯ Command + Ctrl + Shift + Left æŠ˜å é€‰ä¸­ Command + Ctrl + Shift + Right å±•å¼€é€‰ä¸­ Alt + Shift + æ‹–åŠ¨é¼ æ ‡ é€‰ä¸­ä»£ç å— Command + Shift + Option + Up åˆ—é€‰æ‹© å‘ä¸Š Command + Shift + Option + Down åˆ—é€‰æ‹© å‘ä¸‹ Command + Shift + Option + Left åˆ—é€‰æ‹© å‘å·¦ Command + Shift + Option + Right åˆ—é€‰æ‹© å‘å³ Command + Shift + Option + PgUp åˆ—é€‰æ‹© å‘ä¸Šç¿»é¡µ Command + Shift + Option + PgDown åˆ—é€‰æ‹© å‘ä¸‹ç¿»é¡µ è¿›é˜¶ å¿«æ·é”® æè¿° Ctrl + Space æ‰“å¼€å»ºè®® Command + Shift + Space å‚æ•°æç¤º Tab Emmet æ’ä»¶ç¼©å†™è¡¥å…¨ Option + Shift + F æ ¼å¼åŒ– Command + K Command + F æ ¼å¼åŒ–é€‰ä¸­å†…å®¹ F12 è·³è½¬åˆ°å£°æ˜Žä½ç½® Option + F12 æŸ¥çœ‹å…·ä½“å£°æ˜Žå†…å®¹ Command + K F12 åˆ†å±æŸ¥çœ‹å…·ä½“å£°æ˜Žå†…å®¹ Command + . å¿«é€Ÿä¿®å¤ Shift + F12 æ˜¾ç¤ºå¼•ç”¨ F2 é‡å‘½åç¬¦å· Command + Shift + . æ›¿æ¢ä¸ºä¸Šä¸€ä¸ªå€¼ Command + Shift + , æ›¿æ¢ä¸ºä¸‹ä¸€ä¸ªå€¼ Command + K Command + X åˆ é™¤è¡Œå°¾å¤šä½™ç©ºæ ¼ Command + K M æ›´æ”¹æ–‡ä»¶è¯­è¨€ å¯¼èˆª å¿«æ·é”® æè¿° Command + T æ˜¾ç¤ºæ‰€æœ‰ç¬¦å· Ctrl + G è·³è½¬è‡³æŸè¡Œ Command + P è·³è½¬åˆ°æŸä¸ªæ–‡ä»¶ Command + Shift + O è·³è½¬åˆ°æŸä¸ªç¬¦å· Command + Shift + M æ‰“å¼€é—®é¢˜é¢æ¿ F8 ä¸‹ä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Šä½ç½® Shift + F8 ä¸Šä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Šä½ç½® Ctrl + Shift + Tab ç¼–è¾‘å™¨åŽ†å²è®°å½• Ctrl + - åŽé€€ Ctrl + Shift + - å‰è¿› Ctrl + Shift + M Tab åˆ‡æ¢ç„¦ç‚¹ ç¼–è¾‘å™¨ç®¡ç† å¿«æ·é”® æè¿° Command + W å…³é—­ç¼–è¾‘å™¨ Command + K F å…³é—­æ–‡ä»¶å¤¹ Command + \ ç¼–è¾‘å™¨åˆ†å± Command + 1 åˆ‡æ¢åˆ°ç¬¬ä¸€åˆ†ç»„ Command + 2 åˆ‡æ¢åˆ°ç¬¬äºŒåˆ†ç»„ Command + 3 åˆ‡æ¢åˆ°ç¬¬ä¸‰åˆ†ç»„ Command + K Command + Left åˆ‡æ¢åˆ°ä¸Šä¸€åˆ†ç»„ Command + K Command + Right åˆ‡æ¢åˆ°ä¸‹ä¸€åˆ†ç»„ Command + K Command + Shift + Left å·¦ç§»ç¼–è¾‘å™¨ Command + K Command + Shift + Right å³ç§»ç¼–è¾‘å™¨ Command + K Left æ¿€æ´»å·¦ä¾§ç¼–è¾‘ç»„ Command + K Right æ¿€æ´»å³ä¾§ç¼–è¾‘ç»„ æ–‡ä»¶ç®¡ç† å¿«æ·é”® æè¿° Command + N æ–°å»ºæ–‡ä»¶ Command + O æ‰“å¼€æ–‡ä»¶ Command + S ä¿å­˜æ–‡ä»¶ Command + Shift + S å¦å­˜ä¸º Command + Option + S å…¨éƒ¨ä¿å­˜ Command + W å…³é—­ Command + K Command + W å…¨éƒ¨å…³é—­ Command + Shift + T é‡æ–°æ‰“å¼€è¢«å…³é—­çš„ç¼–è¾‘å™¨ Command + K Enter ä¿æŒæ‰“å¼€ Ctrl + Tab æ‰“å¼€ä¸‹ä¸€ä¸ª Ctrl + Shift + Tab æ‰“å¼€ä¸Šä¸€ä¸ª Command + K P å¤åˆ¶å½“å‰æ–‡ä»¶è·¯å¾„ Command + K R åœ¨èµ„æºç®¡ç†å™¨ä¸­æŸ¥çœ‹å½“å‰æ–‡ä»¶ Command + K O æ–°çª—å£æ‰“å¼€å½“å‰æ–‡ä»¶ æ˜¾ç¤º å¿«æ·é”® æè¿° Command + Ctrl + F å…¨å±ã€é€€å‡ºå…¨å± Command + Option + 1 åˆ‡æ¢ç¼–è¾‘å™¨åˆ†å±æ–¹å¼ï¼ˆæ¨ªã€ç«–ï¼‰ Command + + æ”¾å¤§ Command + - ç¼©å° Command + B æ˜¾ç¤ºã€éšè—ä¾§è¾¹æ  Command + Shift + E æ˜¾ç¤ºèµ„æºç®¡ç†å™¨ æˆ– åˆ‡æ¢ç„¦ç‚¹ Command + Shift + F æ˜¾ç¤ºæœç´¢æ¡† Ctrl + Shift + G æ˜¾ç¤ºGité¢æ¿ Command + Shift + D æ˜¾ç¤ºè°ƒè¯•é¢æ¿ Command + Shift + X æ˜¾ç¤ºæ’ä»¶é¢æ¿ Command + Shift + H å…¨å±€æœç´¢æ›¿æ¢ Command + Shift + J æ˜¾ç¤ºã€éšè—é«˜çº§æœç´¢ Command + Shift + C æ‰“å¼€æ–°ç»ˆç«¯ Command + Shift + U æ˜¾ç¤ºè¾“å‡ºé¢æ¿ Command + Shift + V Markdowné¢„è§ˆçª—å£ Command + K V åˆ†å±æ˜¾ç¤º Markdowné¢„è§ˆçª—å£ è°ƒè¯• å¿«æ·é”® æè¿° F9 è®¾ç½® æˆ– å–æ¶ˆæ–­ç‚¹ F5 å¼€å§‹ æˆ– ç»§ç»­ F11 è¿›å…¥ Shift + F11 è·³å‡º F10 è·³è¿‡ Command + K Command + I æ˜¾ç¤ºæ‚¬åœä¿¡æ¯ é›†æˆç»ˆç«¯ å¿«æ·é”® æè¿° Ctrl + ` æ˜¾ç¤ºç»ˆç«¯ Ctrl + Shift + ` æ–°å»ºç»ˆç«¯ Command + Up å‘ä¸Šæ»šåŠ¨ Command + Down å‘ä¸‹æ»šåŠ¨ PgUp å‘ä¸Šç¿»é¡µ PgDown å‘ä¸‹ç¿»é¡µ Command + Home æ»šåŠ¨åˆ°é¡¶éƒ¨ Command + End æ»šåŠ¨åˆ°åº•éƒ¨]]></content>
      <categories>
        <category>å¿«æ·é”®</category>
      </categories>
      <tags>
        <tag>å¿«æ·é”®</tag>
        <tag>Mac</tag>
        <tag>VSCode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android ANRé—®é¢˜æ€»ç»“]]></title>
    <url>%2Fposts%2Fe812f6c7.html</url>
    <content type="text"><![CDATA[åœ¨å®žé™…æƒ…å†µä¸­ï¼Œå½“Androidé¡¹ç›®çš„ç”¨æˆ·é‡ç‰¹åˆ«å¤§æ—¶å€™ï¼Œä¸€äº›ç»†å°çš„é—®é¢˜ä¹Ÿä¼šè¢«æ”¾å¤§ï¼ŒANRé—®é¢˜å°±æ˜¯ä¸€ä¸ªå…¸åž‹çš„ä¾‹å­ã€‚ ä¸€äº›ANRé—®é¢˜åªä¼šå‘ç”Ÿåœ¨ç”¨æˆ·å®žé™…ä½¿ç”¨çš„æƒ…æ™¯ï¼Œå½“ç³»ç»Ÿèµ„æºæ¯”è¾ƒç´§å¼ ç­‰ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹æ‰ä¼šé‡åˆ°ï¼Œè€Œè¿™äº›ANRé—®é¢˜æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯å› ä¸ºæˆ‘ä»¬çš„ä»£ç ä¸åˆç†å¯¼è‡´ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬å®šä½é—®é¢˜ï¼Œä¿®å¤é—®é¢˜ï¼Œå¹¶ä¸”åœ¨ä»¥åŽçš„ä»£ç è®¾è®¡ä¸­å°½é‡é¿å…è¿™äº›ä¸åˆç†ã€‚ æœ€è¿‘å·¥ä½œä¸­é›†ä¸­åˆ†æžäº†é¡¹ç›®çš„å¤§é‡çš„ç”¨æˆ·è‡ªåŠ¨ä¸ŠæŠ¥çš„ANRé—®é¢˜æ—¥å¿—ï¼Œè™½ç„¶ç½‘ä¸ŠANRç›¸å…³çš„æ–‡ç« å·²ç»å¾ˆå¤šäº†ï¼Œåœ¨è¿™é‡Œè¿˜æ˜¯åšä¸€ä¸ªæ€»ç»“ã€‚ æçº²ä¸€. ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºçŽ°ANR äºŒ. ANRæœºåˆ¶çš„åŽŸç† ä¸‰. å¦‚ä½•åˆ†æžANRé—®é¢˜ å››. å¦‚ä½•é¿å…ANRé—®é¢˜ ä¸€.ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‡ºçŽ°ANRé—®é¢˜ï¼šANR(Application Not responding)ã€‚Androidä¸­ï¼Œä¸»çº¿ç¨‹(UIçº¿ç¨‹)å¦‚æžœåœ¨è§„å®šæ—¶å†…æ²¡æœ‰å¤„ç†å®Œç›¸åº”å·¥ä½œï¼Œå°±ä¼šå‡ºçŽ°ANRã€‚ å…·ä½“æ¥è¯´ï¼ŒANRä¼šåœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸­å‡ºçŽ°ï¼š è¾“å…¥äº‹ä»¶(æŒ‰é”®å’Œè§¦æ‘¸äº‹ä»¶)5så†…æ²¡è¢«å¤„ç†: Input event dispatching timed out BroadcastReceiverçš„äº‹ä»¶(onRecieveæ–¹æ³•)åœ¨è§„å®šæ—¶é—´å†…æ²¡å¤„ç†å®Œ(å‰å°å¹¿æ’­ä¸º10sï¼ŒåŽå°å¹¿æ’­ä¸º60s)ï¼šTimeout of broadcast BroadcastRecord 07-27 19:18:47.448 1707 1766 W BroadcastQueue: Receiver during timeout: ResolveInfo{ccd831e com.example.qintong.myapplication/.MyBroadCastReciever m=0x108000} 07-27 19:18:47.502 3513 3728 I WtEventController: ANR com.example.qintong.myapplication 7573 service å‰å°20såŽå°200sæœªå®Œæˆå¯åŠ¨ Timeout executing service ContentProviderçš„publishåœ¨10så†…æ²¡è¿›è¡Œå®Œï¼štimeout publishing content providers åœ¨androidæ–‡æ¡£(https://developer.android.com/training/articles/perf-anr.html)ä¸­ï¼Œåªå†™äº†ç¬¬ä¸€ç§å’Œç¬¬äºŒç§æƒ…å†µï¼Œè€Œæ ¹æ®æºç å’Œå®žé™…çš„å®žéªŒï¼Œæˆ‘ä»¬èƒ½å‘çŽ°serviceçš„å¯åŠ¨å’Œproviderçš„publishåŒæ ·ä¼šé€ æˆanré—®é¢˜ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨åŽä¸‰ç§æƒ…å†µï¼Œä»¥BroadcastRevieverä¸ºä¾‹ï¼Œåœ¨onRecieve()æ–¹æ³•æ‰§è¡Œ10ç§’å†…æ²¡å‘ç”Ÿç¬¬ä¸€ç§ANR(ä¹Ÿå°±æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æ²¡æœ‰è¾“å…¥äº‹ä»¶æˆ–è¾“å…¥äº‹ä»¶è¿˜æ²¡åˆ°5s)æ‰ä¼šå‘ç”ŸReceiver timeoutï¼Œå¦åˆ™å°†å…ˆå‘ç”Ÿäº‹ä»¶æ— ç›¸åº”ANRï¼Œæ‰€ä»¥onRecieve()æ˜¯æœ‰å¯èƒ½æ‰§è¡Œä¸åˆ°10så°±å‘ç”ŸANRçš„ï¼Œæ‰€ä»¥ä¸è¦åœ¨onRecieve()æ–¹æ³•é‡Œé¢å¹²æ´»ï¼Œserviceçš„onCreate()å’ŒContentProviderçš„onCreate()ä¹Ÿä¸€æ ·ï¼Œä»–ä»¬éƒ½æ˜¯ä¸»çº¿ç¨‹çš„ï¼Œä¸è¦åœ¨è¿™äº›æ–¹æ³•é‡Œå¹²æ´»ï¼Œè¿™ä¸ªä¼šåœ¨æœ¬æ–‡æœ€åŽå†ç»†è¯´ã€‚ äºŒ.ANRæœºåˆ¶çš„å®žçŽ°åŽŸç†ï¼šæ–‡ç« ï¼šhttp://gityuan.com/2016/07/02/android-anr/ä»Žæºç è§’åº¦è¯¦ç»†çš„åˆ†æžäº†ANRæœºåˆ¶å®žçŽ°çš„åŽŸç†ã€‚å¯¹äºŽä¸Šä¸€ç« è®²åˆ°çš„1-4ä¸­æƒ…å†µï¼Œåˆ†åˆ«æ‰¾åˆ°äº†å…¶æºç ä¸­æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼Œå¯¹äºŽæ¯ä¸€ç§å¤§æ¦‚åŽŸç†å¦‚ä¸‹ï¼š1.åœ¨è¿›è¡Œç›¸å…³æ“ä½œè°ƒç”¨hander.sendMessageAtTime()å‘é€ä¸€ä¸ªANRçš„æ¶ˆæ¯ï¼Œå»¶æ—¶æ—¶é—´ä¸ºANRå‘ç”Ÿçš„æ—¶é—´(å¦‚å‰å°Serviceæ˜¯å½“å‰æ—¶é—´20sä¹‹åŽ)ã€‚2.è¿›è¡Œç›¸å…³çš„æ“ä½œ3.æ“ä½œç»“æŸåŽå‘removeæŽ‰è¯¥æ¡messageã€‚å¦‚æžœç›¸å…³çš„æ“ä½œåœ¨è§„å®šæ—¶é—´æ²¡æœ‰æ‰§è¡Œå®Œæˆï¼Œè¯¥æ¡messageå°†è¢«handlerå–å‡ºå¹¶æ‰§è¡Œï¼Œå°±å‘ç”Ÿäº†ANRã€‚ ä¸‹é¢ä»¥BroadcastReceiverä¸ºä¾‹è¯¦ç»†ä»‹ç»ï¼š BroadcastQueue.processNextBroadcast() 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152 final void processNextBroadcast(boolean fromMsg) &#123; ... synchronized (mService) &#123; ... do &#123; if (mOrderedBroadcasts.size() == 0) &#123; ... if (mService.mProcessesReady &amp;&amp; r.dispatchTime &gt; 0) &#123; long now = SystemClock.uptimeMillis(); if ((numReceivers &gt; 0) &amp;&amp; (now &gt; r.dispatchTime + (2 * mTimeoutPeriod * numReceivers))) &#123; //1.å‘é€å»¶æ—¶æ¶ˆæ¯ broadcastTimeoutLocked(false); // forcibly finish this broadcast forceReceive = true; r.state = BroadcastRecord.IDLE; &#125; &#125; if (r.state != BroadcastRecord.IDLE) &#123; if (DEBUG_BROADCAST) Slog.d(TAG, "processNextBroadcast(" + mQueueName + ") called when not idle (state=" + r.state + ")"); return; &#125; if (r.receivers == null || r.nextReceiver &gt;= numReceivers || r.resultAbort || forceReceive) &#123; // No more receivers for this broadcast! Send the final // result if requested... if (r.resultTo != null) &#123; try &#123; //2. å¤„ç†å¹¿æ’­æ¶ˆæ¯ performReceiveLocked(r.callerApp, r.resultTo, new Intent(r.intent), r.resultCode, r.resultData, r.resultExtras, false, false, r.userId); // Set this to null so that the reference // (local and remote) isn't kept in the mBroadcastHistory. r.resultTo = null; &#125; catch (RemoteException e) &#123; ... &#125; &#125; //3.å–æ¶ˆå»¶æ—¶æ¶ˆæ¯ cancelBroadcastTimeoutLocked(); ... &#125; &#125; while (r == null) ; ... &#125; &#125;&#125; 1.å‘é€å»¶æ—¶æ¶ˆæ¯ï¼šbroadcastTimeoutLocked(false)ï¼š 123456789101112131415161718192021final void broadcastTimeoutLocked(boolean fromMsg) &#123;... long now = SystemClock.uptimeMillis(); if (fromMsg) &#123; if (mService.mDidDexOpt) &#123; // Delay timeouts until dexopt finishes. mService.mDidDexOpt = false; long timeoutTime = SystemClock.uptimeMillis() + mTimeoutPeriod; setBroadcastTimeoutLocked(timeoutTime); return; &#125; if (!mService.mProcessesReady) &#123; return; &#125; long timeoutTime = r.receiverTime + mTimeoutPeriod; if (timeoutTime &gt; now) &#123; setBroadcastTimeoutLocked(timeoutTime); return; &#125; &#125; ä»–è°ƒç”¨äº†setBroadcastTimeoutLocked(long timeoutTime): 1234567final void setBroadcastTimeoutLocked(long timeoutTime) &#123; if (! mPendingBroadcastTimeoutMessage) &#123; Message msg = mHandler.obtainMessage(BROADCAST_TIMEOUT_MSG, this); mHandler.sendMessageAtTime(msg, timeoutTime); mPendingBroadcastTimeoutMessage = true; &#125;&#125; ä¼ å…¥setBroadcastTimeoutLocked(long timeoutTime)çš„æ—¶é—´xxx + mTimeoutPeriodï¼ŒmTimeoutPeriodå°±æ˜¯onRecieve()å¯ä»¥æ‰§è¡Œçš„æ—¶é—´ï¼Œåœ¨BroadcastQueueåˆå§‹åŒ–æ—¶å€™è¢«èµ‹å€¼ï¼Œå‰å°é˜Ÿåˆ—ä¸º10såŽå°é˜Ÿåˆ—ä¸º60sï¼š ActivityManagerService.java: 1234567891011public ActivityManagerService(Context systemContext) &#123; ... static final int BROADCAST_FG_TIMEOUT = 10 * 1000; static final int BROADCAST_BG_TIMEOUT = 60 * 1000; ... mFgBroadcastQueue = new BroadcastQueue(this, mHandler, "foreground", BROADCAST_FG_TIMEOUT, false); mBgBroadcastQueue = new BroadcastQueue(this, mHandler, "background", BROADCAST_BG_TIMEOUT, true); ...&#125; performReceiveLocked()ä¸ºå¹¿æ’­çš„å®žé™…å¤„ç†ï¼Œå°±ä¸å±•å¼€äº† cancelBroadcastTimeoutLocked() ï¼š è¯¥æ–¹æ³•çš„ä¸»è¦å·¥ä½œæ˜¯å½“serviceå¯åŠ¨å®Œæˆï¼Œåˆ™ç§»é™¤æœåŠ¡è¶…æ—¶æ¶ˆæ¯SERVICE_TIMEOUT_MSGã€‚ 123456final void cancelBroadcastTimeoutLocked() &#123; if (mPendingBroadcastTimeoutMessage) &#123; mHandler.removeMessages(BROADCAST_TIMEOUT_MSG, this); mPendingBroadcastTimeoutMessage = false; &#125;&#125; ä¸‰.å¦‚ä½•åˆ†æžANRé—®é¢˜ï¼šä»Žå‰æ–‡å¯ä»¥æ˜Žç¡®ï¼ŒANRé—®é¢˜æ˜¯ç”±äºŽä¸»çº¿ç¨‹çš„ä»»åŠ¡åœ¨è§„å®šæ—¶é—´å†…æ²¡å¤„ç†å®Œä»»åŠ¡ï¼Œè€Œé€ æˆè¿™ç§æƒ…å†µçš„åŽŸå› å¤§è‡´ä¼šæœ‰ä¸€ä¸‹å‡ ç‚¹ï¼š ä¸»çº¿ç¨‹åœ¨åšä¸€äº›è€—æ—¶çš„å·¥ä½œ ä¸»çº¿ç¨‹è¢«å…¶ä»–çº¿ç¨‹é” cpuè¢«å…¶ä»–è¿›ç¨‹å ç”¨ï¼Œè¯¥è¿›ç¨‹æ²¡è¢«åˆ†é…åˆ°è¶³å¤Ÿçš„cpuèµ„æºã€‚ åˆ¤æ–­ä¸€ä¸ªANRå±žäºŽå“ªç§æƒ…å†µä¾¿æ˜¯åˆ†æžANRé—®é¢˜çš„å…³é”®ã€‚é‚£ä¹ˆæ‹¿åˆ°ä¸€ä¸ªanrçš„æ—¥å¿—ï¼Œåº”è¯¥å¦‚ä½•åˆ†æžå‘¢ï¼Ÿ åœ¨å‘ç”ŸANRçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæ”¶é›†ANRç›¸å…³çš„ä¿¡æ¯æä¾›ç»™å¼€å‘è€…ï¼šé¦–å…ˆåœ¨Logä¸­æœ‰ANRç›¸å…³çš„ä¿¡æ¯ï¼Œå…¶æ¬¡ä¼šæ”¶é›†ANRæ—¶çš„CPUä½¿ç”¨æƒ…å†µï¼Œè¿˜ä¼šæ”¶é›†traceä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯å½“æ—¶å„ä¸ªçº¿ç¨‹çš„æ‰§è¡Œæƒ…å†µã€‚traceæ–‡ä»¶ä¿å­˜åˆ°äº†/data/anr/traces.txtä¸­ï¼Œæ­¤å¤–ï¼ŒANRå‰åŽè¯¥è¿›ç¨‹æ‰“å°å‡ºçš„logä¹Ÿæœ‰ä¸€å®šä»·å€¼ã€‚ä¸€èˆ¬æ¥è¯´å¯ä»¥æŒ‰ä¸€ä¸‹æ€è·¯æ¥åˆ†æžï¼š ä»Žlogä¸­æ‰¾åˆ°ANRåç”Ÿçš„ä¿¡æ¯ï¼šå¯ä»¥ä»Žlogä¸­æœç´¢â€œANR inâ€æˆ–â€œam_anrâ€ï¼Œä¼šæ‰¾åˆ°ANRå‘ç”Ÿçš„logï¼Œè¯¥è¡Œä¼šåŒ…å«äº†ANRçš„æ—¶é—´ã€è¿›ç¨‹ã€æ˜¯ä½•ç§ANRç­‰ä¿¡æ¯ï¼Œå¦‚æžœæ˜¯BroadcastReceiverçš„ANRå¯ä»¥æ€€ç–‘BroadCastReceiver.onRecieve()çš„é—®é¢˜ï¼Œå¦‚æžœçš„Serviceæˆ–Providerå°±æ€€ç–‘æ˜¯å¦å…¶onCreate()çš„é—®é¢˜ã€‚ åœ¨è¯¥æ¡logä¹‹åŽä¼šæœ‰CPU usageçš„ä¿¡æ¯ï¼Œè¡¨æ˜Žäº†CPUåœ¨ANRå‰åŽçš„ç”¨é‡ï¼ˆlogä¼šè¡¨æ˜Žæˆªå–ANRçš„æ—¶é—´ï¼‰ï¼Œä»Žå„ç§CPU Usageä¿¡æ¯ä¸­å¤§æ¦‚å¯ä»¥åˆ†æžå¦‚ä¸‹å‡ ç‚¹ï¼š (1). å¦‚æžœæŸäº›è¿›ç¨‹çš„CPUå ç”¨ç™¾åˆ†æ¯”è¾ƒé«˜ï¼Œå‡ ä¹Žå ç”¨äº†æ‰€æœ‰CPUèµ„æºï¼Œè€Œå‘ç”ŸANRçš„è¿›ç¨‹CPUå ç”¨ä¸º0%æˆ–éžå¸¸ä½Žï¼Œåˆ™è®¤ä¸ºCPUèµ„æºè¢«å ç”¨ï¼Œè¿›ç¨‹æ²¡æœ‰è¢«åˆ†é…è¶³å¤Ÿçš„èµ„æºï¼Œä»Žè€Œå‘ç”Ÿäº†ANRã€‚è¿™ç§æƒ…å†µå¤šæ•°å¯ä»¥è®¤ä¸ºæ˜¯ç³»ç»ŸçŠ¶æ€çš„é—®é¢˜ï¼Œå¹¶ä¸æ˜¯ç”±æœ¬åº”ç”¨é€ æˆçš„ã€‚ (2). å¦‚æžœå‘ç”ŸANRçš„è¿›ç¨‹CPUå ç”¨è¾ƒé«˜ï¼Œå¦‚åˆ°äº†80%æˆ–90%ä»¥ä¸Šï¼Œåˆ™å¯ä»¥æ€€ç–‘åº”ç”¨å†…ä¸€äº›ä»£ç ä¸åˆç†æ¶ˆè€—æŽ‰äº†CPUèµ„æºï¼Œå¦‚å‡ºçŽ°äº†æ­»å¾ªçŽ¯æˆ–è€…åŽå°æœ‰è®¸å¤šçº¿ç¨‹æ‰§è¡Œä»»åŠ¡ç­‰ç­‰åŽŸå› ï¼Œè¿™å°±è¦ç»“åˆtraceå’ŒANRå‰åŽçš„logè¿›ä¸€æ­¥åˆ†æžäº†ã€‚ (3). å¦‚æžœCPUæ€»ç”¨é‡ä¸é«˜ï¼Œè¯¥è¿›ç¨‹å’Œå…¶ä»–è¿›ç¨‹çš„å ç”¨è¿‡é«˜ï¼Œè¿™æœ‰ä¸€å®šæ¦‚çŽ‡æ˜¯ç”±äºŽæŸäº›ä¸»çº¿ç¨‹çš„æ“ä½œå°±æ˜¯è€—æ—¶è¿‡é•¿ï¼Œæˆ–è€…æ˜¯ç”±äºŽä¸»è¿›ç¨‹è¢«é”é€ æˆçš„ã€‚ é™¤äº†ä¸Šè¿°çš„æƒ…å†µ(1)ä»¥å¤–ï¼Œåˆ†æžCPU usageä¹‹åŽï¼Œç¡®å®šé—®é¢˜éœ€è¦æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æžtraceæ–‡ä»¶ã€‚traceæ–‡ä»¶è®°å½•äº†å‘ç”ŸANRå‰åŽè¯¥è¿›ç¨‹çš„å„ä¸ªçº¿ç¨‹çš„stackã€‚å¯¹æˆ‘ä»¬åˆ†æžANRé—®é¢˜æœ€æœ‰ä»·å€¼çš„å°±æ˜¯å…¶ä¸­ä¸»çº¿ç¨‹çš„stackï¼Œä¸€èˆ¬ä¸»çº¿ç¨‹çš„traceå¯èƒ½æœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š (1). ä¸»çº¿ç¨‹æ˜¯runningæˆ–è€…nativeè€Œå¯¹åº”çš„æ ˆå¯¹åº”äº†æˆ‘ä»¬åº”ç”¨ä¸­çš„å‡½æ•°ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½å°±æ˜¯æ‰§è¡Œè¯¥å‡½æ•°æ—¶å€™å‘ç”Ÿäº†è¶…æ—¶ã€‚ (2). ä¸»çº¿ç¨‹è¢«block:éžå¸¸æ˜Žæ˜¾çš„çº¿ç¨‹è¢«é”ï¼Œè¿™æ—¶å€™å¯ä»¥çœ‹æ˜¯è¢«å“ªä¸ªçº¿ç¨‹é”äº†ï¼Œå¯ä»¥è€ƒè™‘ä¼˜åŒ–ä»£ç ã€‚å¦‚æžœæ˜¯æ­»é”é—®é¢˜ï¼Œå°±æ›´éœ€è¦åŠæ—¶è§£å†³äº†ã€‚ (3). ç”±äºŽæŠ“traceçš„æ—¶åˆ»å¾ˆæœ‰å¯èƒ½è€—æ—¶æ“ä½œå·²ç»æ‰§è¡Œå®Œäº†ï¼ˆANR -&gt; è€—æ—¶æ“ä½œæ‰§è¡Œå®Œæ¯• -&gt;ç³»ç»ŸæŠ“traceï¼‰ï¼Œè¿™æ—¶å€™çš„traceå°±æ²¡æœ‰ä»€ä¹ˆç”¨äº†ï¼Œä¸»çº¿ç¨‹çš„stackå°±æ˜¯è¿™æ ·çš„ï¼š 123456789101112131415161718192021"main" prio=5 tid=1 Native | group="main" sCount=1 dsCount=0 obj=0x757855c8 self=0xb4d76500 | sysTid=3276 nice=0 cgrp=default sched=0/0 handle=0xb6ff5b34 | state=S schedstat=( 50540218363 186568972172 209049 ) utm=3290 stm=1764 core=3 HZ=100 | stack=0xbe307000-0xbe309000 stackSize=8MB | held mutexes= kernel: (couldn't read /proc/self/task/3276/stack) native: #00 pc 0004099c /system/lib/libc.so (__epoll_pwait+20) native: #01 pc 00019f63 /system/lib/libc.so (epoll_pwait+26) native: #02 pc 00019f71 /system/lib/libc.so (epoll_wait+6) native: #03 pc 00012ce7 /system/lib/libutils.so (_ZN7android6Looper9pollInnerEi+102) native: #04 pc 00012f63 /system/lib/libutils.so (_ZN7android6Looper8pollOnceEiPiS1_PPv+130) native: #05 pc 00086abd /system/lib/libandroid_runtime.so (_ZN7android18NativeMessageQueue8pollOnceEP7_JNIEnvP8_jobjecti+22) native: #06 pc 0000055d /data/dalvik-cache/arm/system@framework@boot.oat (Java_android_os_MessageQueue_nativePollOnce__JI+96) at android.os.MessageQueue.nativePollOnce(Native method) at android.os.MessageQueue.next(MessageQueue.java:323) at android.os.Looper.loop(Looper.java:138) at android.app.ActivityThread.main(ActivityThread.java:5528) at java.lang.reflect.Method.invoke!(Native method) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:740) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:630) å½“ç„¶è¿™ç§æƒ…å†µå¾ˆæœ‰å¯èƒ½æ˜¯ç”±äºŽè¯¥è¿›ç¨‹çš„å…¶ä»–çº¿ç¨‹æ¶ˆè€—æŽ‰äº†CPUèµ„æºï¼Œè¿™å°±éœ€è¦åˆ†æžå…¶ä»–çº¿ç¨‹çš„traceä»¥åŠANRå‰åŽè¯¥è¿›ç¨‹è‡ªå·±è¾“å‡ºçš„logäº†ã€‚ å››.å¦‚ä½•é™ä½ŽANRçš„æ¦‚çŽ‡ï¼šæœ‰ä¸€äº›æ“ä½œæ˜¯å¾ˆå±é™©çš„ï¼Œéžå¸¸å®¹æ˜“å‘ç”ŸANRï¼Œåœ¨å†™ä»£ç æ—¶å€™ä¸€å®šè¦é¿å…ï¼š ä¸»çº¿ç¨‹è¯»å–æ•°æ®ï¼šåœ¨Androidä¸­ä¸»çº¿ç¨‹åŽ»è¯»å–æ•°æ®æ˜¯éžå¸¸ä¸å¥½çš„ï¼ŒAndroidæ˜¯ä¸å…è®¸ä¸»çº¿ç¨‹ä»Žç½‘ç»œè¯»æ•°æ®çš„ï¼Œä½†ç³»ç»Ÿå…è®¸ä¸»çº¿ç¨‹ä»Žæ•°æ®åº“æˆ–è€…å…¶ä»–åœ°æ–¹èŽ·å–æ•°æ®ï¼Œä½†è¿™ç§æ“ä½œANRé£Žé™©å¾ˆå¤§ï¼Œä¹Ÿä¼šé€ æˆæŽ‰å¸§ç­‰ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚ ï¼ˆ1ï¼‰. é¿å…åœ¨ä¸»çº¿ç¨‹query providerï¼Œé¦–å…ˆè¿™ä¼šæ¯”è¾ƒè€—æ—¶ï¼Œå¦å¤–è¿™ä¸ªæ“ä½œprovideré‚£ä¸€æ–¹çš„è¿›ç¨‹å¦‚æžœæŒ‚æŽ‰äº†æˆ–è€…æ­£åœ¨å¯åŠ¨ï¼Œæˆ‘ä»¬åº”ç”¨çš„queryå°±ä¼šå¾ˆé•¿æ—¶é—´ä¸ä¼šè¿”å›žï¼Œæˆ‘ä»¬åº”è¯¥åœ¨å…¶ä»–çº¿ç¨‹ä¸­æ‰§è¡Œæ•°æ®åº“queryã€providerçš„queryç­‰èŽ·å–æ•°æ®çš„æ“ä½œã€‚ ï¼ˆ2ï¼‰. sharePreferenceçš„è°ƒç”¨ï¼šé’ˆå¯¹sharePreferenceçš„ä¼˜åŒ–ç‚¹æœ‰å¾ˆå¤šï¼Œæ–‡ç« http://weishu.me/2016/10/13/sharedpreference-advices/ è¯¦ç»†ä»‹ç»äº†å‡ ç‚¹sharepreferenceä½¿ç”¨æ—¶å€™çš„æ³¨æ„äº‹é¡¹ã€‚é¦–å…ˆsharePreferenceçš„commit()æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œapply()æ–¹æ³•ä¸€èˆ¬æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚æ‰€ä»¥åœ¨ä¸»çº¿ç¨‹ä¸è¦ç”¨å…¶commit()ï¼Œç”¨apply()æ›¿æ¢ã€‚å…¶æ¬¡sharePreferenceçš„å†™æ˜¯å…¨é‡å†™è€Œéžå¢žé‡å†™ï¼Œæ‰€ä»¥å°½é‡éƒ½ä¿®æ”¹å®ŒåŒä¸€applyï¼Œé¿å…æ”¹ä¸€ç‚¹applyä¸€æ¬¡(apply()æ–¹æ³•åœ¨Activity stopçš„æ—¶å€™ä¸»çº¿ç¨‹ä¼šç­‰å¾…å†™å…¥å®Œæˆï¼Œæäº¤å¤šæ¬¡å°±å¾ˆå®¹æ˜“å¡)ã€‚å¹¶ä¸”å­˜å‚¨æ–‡æœ¬ä¹Ÿä¸å®œè¿‡å¤§ï¼Œè¿™æ ·ä¼šå¾ˆæ…¢ã€‚å¦å¤–ï¼Œå¦‚æžœå†™å…¥çš„æ˜¯jsonæˆ–è€…xmlï¼Œç”±äºŽéœ€è¦åŠ å’Œåˆ è½¬ä¹‰ç¬¦å·ï¼Œé€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ã€‚ ä¸è¦åœ¨broadcastRecieverçš„onRecieve()æ–¹æ³•ä¸­å¹²æ´»ï¼Œè¿™ä¸€ç‚¹å¾ˆå®¹æ˜“è¢«å¿½ç•¥ï¼Œå°¤å…¶åº”ç”¨åœ¨åŽå°çš„æ—¶å€™ã€‚ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ç›´æŽ¥å¼€çš„å¼‚æ­¥çº¿ç¨‹æ‰§è¡Œï¼Œä½†æ­¤æ—¶åº”ç”¨å¯èƒ½åœ¨åŽå°ï¼Œç³»ç»Ÿä¼˜å…ˆçº§è¾ƒä½Žï¼Œè¿›ç¨‹å¾ˆå®¹æ˜“è¢«ç³»ç»Ÿæ€æ­»ï¼Œæ‰€ä»¥å¯ä»¥é€‰æ‹©å¼€ä¸ªIntentServiceåŽ»æ‰§è¡Œç›¸åº”æ“ä½œï¼Œå³ä½¿æ˜¯åŽå°Serviceä¹Ÿä¼šæé«˜è¿›ç¨‹ä¼˜å…ˆçº§ï¼Œé™ä½Žè¢«æ€å¯èƒ½æ€§ã€‚ å„ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°éƒ½ä¸åº”è¯¥æœ‰å¤ªè€—æ—¶çš„æ“ä½œï¼Œå³ä½¿å¯¹äºŽåŽå°Serviceæˆ–è€…ContentProvideræ¥è®²ï¼Œåº”ç”¨åœ¨åŽå°è¿è¡Œæ—¶å€™å…¶onCreate()æ—¶å€™ä¸ä¼šæœ‰ç”¨æˆ·è¾“å…¥å¼•èµ·äº‹ä»¶æ— å“åº”ANRï¼Œä½†å…¶æ‰§è¡Œæ—¶é—´è¿‡é•¿ä¹Ÿä¼šå¼•èµ·Serviceçš„ANRå’ŒContentProviderçš„ANRã€‚ å°½é‡é¿å…ä¸»çº¿ç¨‹çš„è¢«é”çš„æƒ…å†µï¼Œåœ¨ä¸€äº›åŒæ­¥çš„æ“ä½œä¸»çº¿ç¨‹æœ‰å¯èƒ½è¢«é”ï¼Œéœ€è¦ç­‰å¾…å…¶ä»–çº¿ç¨‹é‡Šæ”¾ç›¸åº”é”æ‰èƒ½ç»§ç»­æ‰§è¡Œï¼Œè¿™æ ·ä¼šæœ‰ä¸€å®šçš„ANRé£Žé™©ï¼Œå¯¹äºŽè¿™ç§æƒ…å†µæœ‰æ—¶ä¹Ÿå¯ä»¥ç”¨å¼‚æ­¥çº¿ç¨‹æ¥æ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚å¦å¤–ï¼Œ æˆ‘ä»¬è¦é¿å…æ­»é”çš„å‘ç”Ÿ(ä¸»çº¿ç¨‹è¢«æ­»é”åŸºæœ¬å°±ç­‰äºŽè¦å‘ç”ŸANRäº†)ã€‚]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android_SDKç‰ˆæœ¬å·ä¸ŽAPILevelçš„å¯¹åº”å…³ç³»]]></title>
    <url>%2Fposts%2F46f6283e.html</url>
    <content type="text"><![CDATA[ä¸€ã€Androidå„ç‰ˆæœ¬å¯¹åº”çš„SDKç‰ˆæœ¬ å¹³å°ç‰ˆæœ¬ API VERSION_CODE å¤‡æ³¨ Android 9.0 28 Android P Previewï¼ˆ9.0ï¼‰ å¹³å°äº®ç‚¹ Android 8.1 27 Oreoï¼ˆ8.1ï¼‰ å¹³å°äº®ç‚¹ Android 8.0 26 Oreoï¼ˆ8.0ï¼‰ å¹³å°äº®ç‚¹ Android 7.1 25 Nougatï¼ˆç‰›è½§ç³–ï¼‰ å¹³å°äº®ç‚¹ Android 7.0 24 Nï¼ˆç‰›è½§ç³–ï¼‰ å¹³å°äº®ç‚¹ Android 6.0 23 Mï¼ˆæ£‰èŠ±ç³–ï¼‰ å¹³å°äº®ç‚¹ Android 5.1 22 LOLLIPOP_MR1ï¼ˆæ£’æ£’ç³–ï¼‰ å¹³å°äº®ç‚¹ Android 5.0 21 LOLLIPOP ï¼ˆæ£’æ£’ç³–ï¼‰ Android 4.4W 20 KITKAT_WATCHï¼ˆå¥‡å·§å·§å…‹åŠ›ï¼‰ ä»…é™ KitKat for Wearables Android 4.4 19 KITKAT ï¼ˆå¥‡å·§å·§å…‹åŠ›ï¼‰ å¹³å°äº®ç‚¹ Android 4.3 18 JELLY_BEAN_MR2ï¼ˆæžœå†»è±†ï¼‰ å¹³å°äº®ç‚¹ Android 4.2ã€4.2.2 17 JELLY_BEAN_MR1ï¼ˆæžœå†»è±†ï¼‰ å¹³å°äº®ç‚¹ Android 4.1ã€4.1.1 16 JELLY_BEAN ï¼ˆæžœå†»è±†ï¼‰ å¹³å°äº®ç‚¹ Android 4.0.3ã€4.0.4 15 ICE_CREAM_SANDWICH_MR1ï¼ˆå†°æ¿€å‡Œä¸‰æ˜Žæ²»ï¼‰ å¹³å°äº®ç‚¹ Android 4.0ã€4.0.1ã€4.0.2 14 ICE_CREAM_SANDWICHï¼ˆå†°æ¿€å‡Œä¸‰æ˜Žæ²»ï¼‰ Android 3.2 13 HONEYCOMB_MR2 ï¼ˆèœ‚å·¢ï¼‰ Android 3.1.x 12 HONEYCOMB_MR1ï¼ˆèœ‚å·¢ï¼‰ å¹³å°äº®ç‚¹ Android 3.0.x 11 HONEYCOMB ï¼ˆèœ‚å·¢ï¼‰ å¹³å°äº®ç‚¹ Android 2.3.4 Android 2.3.3 10 GINGERBREAD_MR1ï¼ˆå§œé¥¼ï¼‰ å¹³å°äº®ç‚¹ Android 2.3.2 Android 2.3.1 Android 2.3 9 GINGERBREADï¼ˆå§œé¥¼ï¼‰ Android 2.2.x 8 FROYOï¼ˆå†»é…¸å¥¶ï¼‰ å¹³å°äº®ç‚¹ Android 2.1.x 7 ECLAIR_MR1 ï¼ˆåŸƒå…‹æ‹‰ï¼‰ å¹³å°äº®ç‚¹ Android 2.0.1 6 ECLAIR_0_1ï¼ˆåŸƒå…‹æ‹‰ï¼‰ Android 2.0 5 ECLAIRï¼ˆåŸƒå…‹æ‹‰ï¼‰ Android 1.6 4 DONUTï¼ˆç”œç”œåœˆï¼‰ å¹³å°äº®ç‚¹ Android 1.5 3 CUPCAKEï¼ˆçº¸æ¯è›‹ç³•ï¼‰ å¹³å°äº®ç‚¹ Android 1.1 2 BASE_1_1 Android 1.0 1 BASE äºŒã€Androidå„ç‰ˆæœ¬çš„å¸‚åœºå æœ‰çŽ‡å’Œå¯¹åº”JDKç‰ˆæœ¬ Version Codename API Distribution 2.3.3 - 2.3.7 Gingerbread 10 0.3% 4.0.3 - 4.0.4 Ice Cream Sandwich 15 0.4% 4.1.x Jelly Bean 16 1.5% 4.2.x Jelly Bean 17 2.2% 4.3 Jelly Bean 18 0.6% 4.4 KitKat 19 10.3% 5.0 Lollipop 21 4.8% 5.1 Lollipop 22 17.6% 6.0 Marshmallow 23 25.5% 7.0 Nougat 24 22.9% 7.1 Nougat 25 8.2% 8.0 Oreo 26 4.9% 8.1 Oreo 27 0.8% ä»¥ 7 å¤©ä¸ºå‘¨æœŸæ”¶é›†çš„æ•°æ®ï¼ˆæˆªæ­¢äºŽ 2018 å¹´ 1 æœˆ 8 æ—¥ï¼‰ã€‚ æœªæ˜¾ç¤ºä»»ä½•åˆ†å¸ƒä»½é¢ä¸è¶³ 0.1% çš„ç‰ˆæœ¬ã€‚ ä¸‰ã€å±å¹•å°ºå¯¸å’Œå¯†åº¦ ldpi mdpi tvdpi hdpi xhdpi xxhdpi Total Small 0.4% 0.1% 0.5% Normal 0.9% 0.3% 27.3% 39.3% 23.3% 91.1% Large 2.4% 1.5% 0.4% 0.7% 0.5% 5.5% Xlarge 1.8% 0.6% 0.5% 2.9% Total 0.4% 5.1% 1.8% 28.3% 40.5% 23.9% ä»¥ 7 å¤©ä¸ºå‘¨æœŸæ”¶é›†çš„æ•°æ®ï¼ˆæˆªæ­¢äºŽ 2018 å¹´ 1 æœˆ 8 æ—¥ï¼‰ã€‚ æœªæ˜¾ç¤ºä»»ä½•åˆ†å¸ƒä»½é¢ä¸è¶³ 0.1% çš„å±å¹•é…ç½®ã€‚ æ•°æ®æ¥æºï¼šAndroidä¿¡æ¯ä¸­å¿ƒ]]></content>
      <categories>
        <category>Android</category>
        <category>Android Tips</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>SDK</tag>
        <tag>API</tag>
        <tag>Android Tips</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitå¸¸ç”¨å‘½ä»¤]]></title>
    <url>%2Fposts%2F423abe9e.html</url>
    <content type="text"><![CDATA[å¸¸ç”¨gitå‘½ä»¤åˆ‡æ¢åˆ°gitè·¯å¾„ 1$ cd &lt;folder&gt; gitå‘½ä»¤ æè¿° git branch æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ git branch -r æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ git branch zm-develop å»ºç«‹æœ¬åœ°åˆ†æ”¯ git push origin zm-develop:zm-develop å°†æœ¬åœ°æ–°çš„åˆ†æ”¯æŽ¨é€åˆ°gitè¿œç¨‹åˆ†æ”¯ git fetch origin zm-develop:zm-develop æ‹‰å–è¿œç¨‹åˆ†æ”¯å¹¶åˆ›å»ºæœ¬åœ°åˆ†æ”¯ git fetch origin zm-develop:zm-develop æ‹‰å–è¿œç¨‹åˆ†æ”¯å¹¶åˆ›å»ºæœ¬åœ°åˆ†æ”¯ git checkout zm-develop åˆ‡æ¢åˆ°æœ¬åœ°åˆ†æ”¯ git remote -v æŸ¥çœ‹å½“å‰åœ¨å“ªä¸€ä¸ªè¿œç¨‹ä»“åº“ git branch -d zm-develop åˆ é™¤åˆ†æ”¯zm-develop git config â€“list æŸ¥çœ‹é…ç½®ä¿¡æ¯ git status æŸ¥çœ‹é¡¹ç›®çŠ¶æ€ä¿¡æ¯ git log æŸ¥çœ‹æäº¤æ—¥å¿— git reset â€“hard commit_id å®Œæˆæ’¤é”€,åŒæ—¶å°†ä»£ç æ¢å¤åˆ°å‰ä¸€commit_id å¯¹åº”çš„ç‰ˆæœ¬ git reset commit_id å®ŒæˆCommitå‘½ä»¤çš„æ’¤é”€ï¼Œä½†æ˜¯ä¸å¯¹ä»£ç ä¿®æ”¹è¿›è¡Œæ’¤é”€ï¼Œå¯ä»¥ç›´æŽ¥é€šè¿‡git commit é‡æ–°æäº¤å¯¹æœ¬åœ°ä»£ç çš„ä¿®æ”¹]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>å¿«æ·é”®</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç‰ˆæœ¬å·æ¯”è¾ƒversionCompare]]></title>
    <url>%2Fposts%2Fd2f8db9f.html</url>
    <content type="text"><![CDATA[1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * ç‰ˆæœ¬å·æ¯”è¾ƒversionCompareæ–¹æ³•ï¼Œjavaå®žçŽ° * if v1 &gt; v2 , return 1; * if v1 &lt; v2 , return 2; * if equal , return 0; * input error ,return -1; */public class Test &#123; public static void main(String[] versions) &#123; int result1 = versionCompare("0.1.5", "0.1.5"); System.out.print("resultCode1:" + result1); int result2 = versionCompare("0.2.5", "0.1.5"); System.out.print("resultCode1:" + result2); int result3 = versionCompare("0.1.4", "0.1.5"); System.out.print("resultCode1:" + result3); int result4 = versionCompare("0.1.5cæµ‹è¯•", "0.1.5"); System.out.print("resultCode1:" + result4); &#125; public static int versionCompare(String v1, String v2) &#123; Pattern pattern = Pattern.compile("\\d+(\\.\\d+)*"); if (!pattern.matcher(v1).matches() || !pattern.matcher(v2).matches()) &#123; return -1; &#125; String[] str1 = v1.split("\\."); String[] str2 = v2.split("\\."); int length = str1.length &lt; str2.length ? str1.length : str2.length; for (int i = 0; i &lt; length; i++) &#123; int diff = Integer.valueOf(str1[i]) - Integer.valueOf(str2[i]); if (diff == 0) &#123; continue; &#125; else &#123; return diff &gt; 0 ? 1 : 2; &#125; &#125; return 0; &#125;&#125;]]></content>
      <categories>
        <category>Android</category>
        <category>ä»£ç ç‰‡æ®µ</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>Java</tag>
        <tag>ä»£ç ç‰‡æ®µ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidé¢œè‰²é€æ˜Žåº¦è®¾ç½®]]></title>
    <url>%2Fposts%2F54d6d461.html</url>
    <content type="text"><![CDATA[é¢œè‰²ç®€ä»‹Androidä¸­çš„é¢œè‰²å€¼é€šå¸¸éµå¾ªRGB/ARGBæ ‡å‡†ï¼Œä½¿ç”¨æ—¶é€šå¸¸ä»¥â€œ#â€å­—ç¬¦å¼€å¤´ï¼Œä»¥16è¿›åˆ¶è¡¨ç¤ºã€‚å¸¸ç”¨çš„é¢œè‰²å€¼æ ¼å¼ä¸ºï¼š #RGB #ARGB #RRGGBB #AARRGGBBå…¶ä¸­ï¼ŒARGB ä¾æ¬¡ä»£è¡¨é€æ˜Žåº¦ï¼ˆalphaï¼‰ã€çº¢è‰²(red)ã€ç»¿è‰²(green)ã€è“è‰²(blue)ã€‚ä»¥é¢œè‰²å€¼ #FF99CC00 ä¸ºä¾‹ï¼ŒFF æ˜¯é€æ˜Žåº¦ï¼Œ99 æ˜¯çº¢è‰²å€¼ï¼Œ CC æ˜¯ç»¿è‰²å€¼ï¼Œ 00 æ˜¯è“è‰²å€¼ã€‚é€æ˜Žåº¦ é€æ˜Žåº¦åˆ†ä¸º256é˜¶ï¼ˆ0-255ï¼‰ï¼Œè®¡ç®—æœºä¸Šç”¨16è¿›åˆ¶è¡¨ç¤ºä¸ºï¼ˆ00-ffï¼‰ã€‚é€æ˜Žå°±æ˜¯0é˜¶ï¼Œä¸é€æ˜Žå°±æ˜¯255é˜¶,å¦‚æžœ50%é€æ˜Žå°±æ˜¯127é˜¶ï¼ˆ256çš„ä¸€åŠå½“ç„¶æ˜¯128ï¼Œä½†å› ä¸ºæ˜¯ä»Ž0å¼€å§‹ï¼Œæ‰€ä»¥å®žé™…ä¸Šæ˜¯127ï¼‰ã€‚ é€æ˜Žåº¦ å’Œ ä¸é€æ˜Žåº¦ æ˜¯ä¸¤ä¸ªæ¦‚å¿µï¼Œ å®ƒä»¬åŠ èµ·æ¥æ˜¯1ï¼Œæˆ–è€…100%. ARGB ä¸­çš„é€æ˜Žåº¦alphaï¼Œè¡¨ç¤ºçš„æ˜¯ä¸é€æ˜Žåº¦ã€‚ å¦‚ä½•æ¢ç®— UIç»™å‡ºçš„é¢œè‰²æ˜¯#FFFFFFï¼Œé€æ˜Žåº¦ä¸º40%ã€‚ æ¢ç®—è¿‡ç¨‹ï¼š å°†é€æ˜Žåº¦è½¬æ¢æˆä¸é€æ˜Žåº¦(è½¬æ¢æ–¹å¼å‚è€ƒâ€œé€æ˜Žåº¦â€ï¼Œç¬¬2æ¡) ã€‚ä¸é€æ˜Žåº¦ä¸º60% ä¸é€æ˜Žåº¦ä¹˜ä»¥255ã€‚ æˆ‘ä»¬å¾—åˆ°ç»“æžœï¼š153 å°†è®¡ç®—ç»“æžœè½¬æ¢æˆ16è¿›åˆ¶ã€‚å¾—åˆ°æœ€ç»ˆçš„ä¸é€æ˜Žåº¦ï¼š99 å°†ä¸é€æ˜Žåº¦å’Œé¢œè‰²å€¼æ‹¼æŽ¥æˆARGBæ ¼å¼ã€‚å¾—åˆ°æœ€ç»ˆçš„é¢œè‰²å€¼ï¼š #99FFFFFF å¹²è´§ è¯´æ˜Žï¼šåŠé€æ˜Žé¢œè‰²å€¼ä¸åŒäºŽå¹³æ—¶ä½¿ç”¨çš„é¢œè‰²ï¼ŒåŠé€æ˜Žé¢œè‰²å€¼å…±8ä½ï¼Œå‰2ä½æ˜¯é€æ˜Žåº¦ï¼ŒåŽ6ä½æ˜¯é¢œè‰²ã€‚ å‚æ•° é€æ˜Žåº¦ 16è¿›åˆ¶è¡¨ç¤º ä¸é€æ˜Ž 100% FF 95% F2 90% E6 85% D9 80% CC 75% BF 70% B3 65% A6 60% 99 55% 8C åŠé€æ˜Ž 50% 80 45% 73 40% 66 35% 59 30% 4D 25% 40 20% 33 15% 26 10% 1A 5% 0D å…¨é€æ˜Ž 0% 00 ä¸¾ä¾‹ï¼š å…¨é€æ˜Žï¼š#00000000 åŠé€æ˜Žï¼š#80000000 ä¸é€æ˜Žï¼š#FF000000 ç™½è‰²åŠé€æ˜Žï¼š#80FFFFFF çº¢è‰²30%é€æ˜Žï¼š#4Dca0d0d]]></content>
      <categories>
        <category>Android</category>
        <category>View</category>
      </categories>
      <tags>
        <tag>Android</tag>
        <tag>color</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac_iTerm2å‘½ä»¤è¡Œå·¥å…·]]></title>
    <url>%2Fposts%2Fc16bcf6c.html</url>
    <content type="text"><![CDATA[ä¸‹è½½åœ°å€item å®žç”¨å‘½ä»¤ å¤šçª—å£åˆ‡æ¢ command + T åŒä¸ªçª—å£æ¨ªå‘åˆ†å± command + d åŒä¸ªçª—å£ï¼Œç«–å‘åˆ†å± command + shift + d æœç´¢ command + f ç›´æŽ¥æ‰“å¼€æ–‡ä»¶ æŒ‰ä½commandé”®å¹¶ç‚¹å‡»æ–‡ä»¶å è‡ªåŠ¨å¤åˆ¶ ç›´æŽ¥åŒå‡»éœ€è¦å¤åˆ¶çš„æ–‡å­—ï¼Œå³å¯è‡ªåŠ¨å¤åˆ¶]]></content>
      <categories>
        <category>å¿«æ·é”®</category>
      </categories>
      <tags>
        <tag>å¿«æ·é”®</tag>
        <tag>Mac</tag>
        <tag>iTem2</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac_OSXå¿«æ·é”®ä»¥åŠå‘½ä»¤è¡Œ]]></title>
    <url>%2Fposts%2F81828d81.html</url>
    <content type="text"><![CDATA[Mac OSX å¿«æ·é”® å¿«æ·é”® æè¿° ctrl+shift å¿«é€Ÿæ”¾å¤§dockçš„å›¾æ ‡ä¼šæš‚æ—¶æ”¾å¤§ï¼Œè€Œå¦‚æžœä½ å¼€å¯äº†dockæ”¾å¤§ Command+Option+W å°†æ‰€æœ‰çª—å£å…³é—­ Command+W å°†å½“å‰çª—å£å…³é—­(å¯ä»¥å…³é—­Safariæ ‡ç­¾æ ,å¾ˆå®žç”¨) Command+Option+M å°†æ‰€æœ‰çª—å£æœ€å°åŒ– Command+Q å…³é—­å½“å‰åº”ç”¨ç¨‹åº(ç›¸å½“äºŽDocké¼ æ ‡å³é”®æŽ¨å‡º.å¾ˆå®žç”¨) Command+M å°†ç›®å‰ä½¿ç”¨çš„çª—å£æœ€å°åŒ– Command+H éšè—å½“å‰çª—å£æˆ–è€…è½¯ä»¶ Commandï¼‹tab ä¸ºåˆ‡æ¢å½“å‰å·¥ä½œä»»åŠ¡ Controlï¼‹Commandï¼‹S åˆ‡æ¢æŽ§åˆ¶æ¡çš„æ˜¾ç¤ºå’Œéšè— Commandï¼‹i å¸¸è§„ä¿¡æ¯ï¼ˆæ˜¾ç¤ºåŠè®¾ç½®å›¾æ ‡å±žæ€§ï¼‰ Commandï¼‹delete ç§»åˆ°åºŸçº¸ç¯“ï¼ˆåˆ é™¤ï¼‰ Optionion+é¼ æ ‡ æ‹–å›¾åƒæˆ–æ–‡ä»¶å¤¹å¯ä»¥å°†å›¾åƒæˆ–æ–‡ä»¶å¤¹æ‹·è´åˆ°å…¶å®ƒæ–‡ä»¶å¤¹ä¸­ï¼Œè€Œä¸æ˜¯ç§»åŠ¨ Command+Shift+backspace æ¸…ç©ºåºŸçº¸ç¯“(å†åŠ ä¸Šoptionä¸€èµ·æŒ‰èƒ½è·³è¿‡ç¡®è®¤å¯¹è¯æ¡†) Command+N é”®å¯ä»¥å»ºç«‹æ–°æ–‡ä»¶å¤¹ â€œreturnâ€æˆ–â€œenterâ€æˆ–â€œOâ€é”®å¯ä»¥æ‰“å¼€æ‰€é€‰é¡¹ç›® Command+Option+esc é”®å¯ä»¥å¼ºè¡Œé€€å‡ºæ­»æœºç¨‹åº Command+Shift+3 æˆªå›¾(å½“å‰å±å¹•) Command+Shift+4 æˆªå›¾(è‡ªç”±é€‰å–èŒƒå›´) Optionï¼‹F12 å…³æœºçª—å£(èƒ½é€‰æ‹©å…³æœºã€é‡èµ·ã€ç¡çœ ) Command+1 ä»¥å›¾æ ‡æ–¹å¼æ˜¾ç¤º Command+2 ä»¥åˆ†æ æ–¹å¼æ˜¾ç¤º Command+3 ä»¥åˆ—è¡¨æ–¹å¼æ˜¾ç¤º Command+4 ä»¥Cover Flowæ–¹å¼æ˜¾ç¤º returnæˆ–enter é”®å¯ä»¥ç¼–è¾‘æ‰€é€‰å›¾åƒæˆ–æ–‡ä»¶å¤¹çš„åç§° Mac OSX å‘½ä»¤è¡Œç›®å½•æ“ä½œå‘½ä»¤å |åŠŸèƒ½æè¿° |ä½¿ç”¨ä¸¾ä¾‹â€”|:â€“: |mkdir | åˆ›å»ºä¸€ä¸ªç›®å½• | mkdir dirnamermdir | åˆ é™¤ä¸€ä¸ªç›®å½• | rmdir dirnamemvdir | ç§»åŠ¨æˆ–é‡å‘½åä¸€ä¸ªç›®å½• | mvdir dir1 dir2cd | æ”¹å˜å½“å‰ç›®å½• | cd dirnamepwd | æ˜¾ç¤ºå½“å‰ç›®å½•çš„è·¯å¾„å | pwdls | æ˜¾ç¤ºå½“å‰ç›®å½•çš„å†…å®¹ | ls -la æ–‡ä»¶æ“ä½œå‘½ä»¤å |åŠŸèƒ½æè¿° |ä½¿ç”¨ä¸¾ä¾‹â€”|:â€“: |cat | æ˜¾ç¤ºæˆ–è¿žæŽ¥æ–‡ä»¶ | cat filenameod | æ˜¾ç¤ºéžæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ | od -c filenamecp | å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• | cp file1 file2rm | åˆ é™¤æ–‡ä»¶æˆ–ç›®å½• | rm filenamemv | æ”¹å˜æ–‡ä»¶åæˆ–æ‰€åœ¨ç›®å½• | mv file1 file2find | ä½¿ç”¨åŒ¹é…è¡¨è¾¾å¼æŸ¥æ‰¾æ–‡ä»¶ | find . -name â€œ*.câ€ -printfile | æ˜¾ç¤ºæ–‡ä»¶ç±»åž‹ | file filename é€‰æ‹©æ“ä½œå‘½ä»¤å |åŠŸèƒ½æè¿° |ä½¿ç”¨ä¸¾ä¾‹â€”|:â€“: |head | æ˜¾ç¤ºæ–‡ä»¶çš„æœ€åˆå‡ è¡Œ | head -20 filenametail | æ˜¾ç¤ºæ–‡ä»¶çš„æœ€åŽå‡ è¡Œ | tail -15 filenamecut | æ˜¾ç¤ºæ–‡ä»¶æ¯è¡Œä¸­çš„æŸäº›åŸŸ | cut -f1,7 -d: /etc/passwdcolrm | ä»Žæ ‡å‡†è¾“å…¥ä¸­åˆ é™¤è‹¥å¹²åˆ— | colrm 8 20 file2diff | æ¯”è¾ƒå¹¶æ˜¾ç¤ºä¸¤ä¸ªæ–‡ä»¶çš„å·®å¼‚ | diff file1 file2sort | æŽ’åºæˆ–å½’å¹¶æ–‡ä»¶ | sort -d -f -u file1uniq | åŽ»æŽ‰æ–‡ä»¶ä¸­çš„é‡å¤è¡Œ | uniq file1 file2comm | æ˜¾ç¤ºä¸¤æœ‰åºæ–‡ä»¶çš„å…¬å…±å’Œéžå…¬å…±è¡Œ | comm file1 file2wc | ç»Ÿè®¡æ–‡ä»¶çš„å­—ç¬¦æ•°ã€è¯æ•°å’Œè¡Œæ•° | wc filenamenl | ç»™æ–‡ä»¶åŠ ä¸Šè¡Œå· | nl file1 &gt;file2 è¿›ç¨‹æ“ä½œå‘½ä»¤å |åŠŸèƒ½æè¿° |ä½¿ç”¨ä¸¾ä¾‹â€”|:â€“: |ps | æ˜¾ç¤ºè¿›ç¨‹å½“å‰çŠ¶æ€ | ps ukill | ç»ˆæ­¢è¿›ç¨‹ | kill -9 30142 æ—¶é—´æ“ä½œå‘½ä»¤å |åŠŸèƒ½æè¿° |ä½¿ç”¨ä¸¾ä¾‹â€”|:â€“: |date | æ˜¾ç¤ºç³»ç»Ÿçš„å½“å‰æ—¥æœŸå’Œæ—¶é—´ | datecal | æ˜¾ç¤ºæ—¥åŽ† | cal 8 1996time | ç»Ÿè®¡ç¨‹åºçš„æ‰§è¡Œæ—¶é—´ | time a.out ç½‘ç»œä¸Žé€šä¿¡æ“ä½œå‘½ä»¤å |åŠŸèƒ½æè¿° |ä½¿ç”¨ä¸¾ä¾‹â€”|:â€“: |telnet | è¿œç¨‹ç™»å½• | telnet hpc.sp.net.edu.cnrlogin | è¿œç¨‹ç™»å½• | rlogin hostname -l usernamersh | åœ¨è¿œç¨‹ä¸»æœºæ‰§è¡ŒæŒ‡å®šå‘½ä»¤ | rsh f01n03 dateftp | åœ¨æœ¬åœ°ä¸»æœºä¸Žè¿œç¨‹ä¸»æœºä¹‹é—´ä¼ è¾“æ–‡ä»¶ | ftpftp.sp.net.edu.cnrcp | åœ¨æœ¬åœ°ä¸»æœºä¸Žè¿œç¨‹ä¸»æœº ä¹‹é—´å¤åˆ¶æ–‡ä»¶ | rcp file1 host1:file2ping | ç»™ä¸€ä¸ªç½‘ç»œä¸»æœºå‘é€ å›žåº”è¯·æ±‚ | ping hpc.sp.net.edu.cnmail | é˜…è¯»å’Œå‘é€ç”µå­é‚®ä»¶ | mailwrite | ç»™å¦ä¸€ç”¨æˆ·å‘é€æŠ¥æ–‡ | write username pts/1mesg | å…è®¸æˆ–æ‹’ç»æŽ¥æ”¶æŠ¥æ–‡ | mesg n Korn Shell å‘½ä»¤å‘½ä»¤å |åŠŸèƒ½æè¿° |ä½¿ç”¨ä¸¾ä¾‹â€”|:â€“: |history | åˆ—å‡ºæœ€è¿‘æ‰§è¡Œè¿‡çš„ å‡ æ¡å‘½ä»¤åŠç¼–å· | historyr | é‡å¤æ‰§è¡Œæœ€è¿‘æ‰§è¡Œè¿‡çš„ æŸæ¡å‘½ä»¤ | r -2alias | ç»™æŸä¸ªå‘½ä»¤å®šä¹‰åˆ«å | alias del=rm -iunalias | å–æ¶ˆå¯¹æŸä¸ªåˆ«åçš„å®šä¹‰ | unalias del å…¶å®ƒå‘½ä»¤å‘½ä»¤å |åŠŸèƒ½æè¿° |ä½¿ç”¨ä¸¾ä¾‹â€”|:â€“: |uname | æ˜¾ç¤ºæ“ä½œç³»ç»Ÿçš„æœ‰å…³ä¿¡æ¯ | uname -aclear | æ¸…é™¤å±å¹•æˆ–çª—å£å†…å®¹ | clearenv | æ˜¾ç¤ºå½“å‰æ‰€æœ‰è®¾ç½®è¿‡çš„çŽ¯å¢ƒå˜é‡ | envwho | åˆ—å‡ºå½“å‰ç™»å½•çš„æ‰€æœ‰ç”¨æˆ· | whowhoami | æ˜¾ç¤ºå½“å‰æ­£è¿›è¡Œæ“ä½œçš„ç”¨æˆ·å | whoamitty | æ˜¾ç¤ºç»ˆç«¯æˆ–ä¼ªç»ˆç«¯çš„åç§° | ttystty | æ˜¾ç¤ºæˆ–é‡ç½®æŽ§åˆ¶é”®å®šä¹‰ | stty -adu | æŸ¥è¯¢ç£ç›˜ä½¿ç”¨æƒ…å†µ | du -k subdirdf /tmp | æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„æ€»ç©ºé—´å’Œå¯ç”¨ç©ºé—´w | æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ´»åŠ¨çš„æ€»ä¿¡æ¯]]></content>
      <categories>
        <category>å¿«æ·é”®</category>
      </categories>
      <tags>
        <tag>å¿«æ·é”®</tag>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Macç»ˆç«¯å¿«æ·é”®]]></title>
    <url>%2Fposts%2Fc7dcd830.html</url>
    <content type="text"><![CDATA[å¸¸ç”¨çš„å¿«æ·é”® å¿«æ·é”® æè¿° Ctrl + a è·³åˆ°è¡Œé¦– Ctrl + e è·³åˆ°è¡Œå°¾ Ctrl + b å…‰æ ‡å¾€å›ž(Backward)ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ä½ç½® Ctrl + c å–æ¶ˆå½“å‰è¡Œè¾“å…¥çš„å‘½ä»¤ Ctrl + d åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œç›¸å½“äºŽé€šå¸¸çš„Deleteé”® Ctrl + f å…‰æ ‡å‘å‰(Forward)ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦ä½ç½® Ctrl + h é€€æ ¼åˆ é™¤ä¸€ä¸ªå­—ç¬¦ï¼Œç›¸å½“äºŽé€šå¸¸çš„Backspaceé”® Ctrl + k åˆ é™¤å…‰æ ‡ä¹‹å‰åˆ°è¡Œå°¾çš„å­—ç¬¦ Ctrl + l æ¸…å±ï¼Œç›¸å½“äºŽæ‰§è¡Œclearå‘½ä»¤ Ctrl + u åˆ é™¤å…‰æ ‡ä¹‹å‰åˆ°è¡Œé¦–çš„å­—ç¬¦ Ctrl + p è°ƒå‡ºå‘½ä»¤åŽ†å²ä¸­çš„å‰ä¸€æ¡ï¼ˆPreviousï¼‰å‘½ä»¤ï¼Œç›¸å½“äºŽé€šå¸¸çš„ä¸Šç®­å¤´ Ctrl + n è°ƒå‡ºå‘½ä»¤åŽ†å²ä¸­çš„ä¸‹ä¸€æ¡ï¼ˆNextï¼‰å‘½ä»¤ï¼Œç›¸å½“äºŽé€šå¸¸çš„ä¸Šç®­å¤´ Ctrl + r æ˜¾ç¤ºï¼šå·æç¤ºï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥æŸ¥æ‰¾ç›¸å…³åŽ†å²å‘½ä»¤ Ctrl + w åˆ é™¤ä»Žå…‰æ ‡ä½ç½®å‰åˆ°å½“å‰æ‰€å¤„å•è¯ï¼ˆWordï¼‰çš„å¼€å¤´ Ctrl + y ç²˜è´´æœ€åŽä¸€æ¬¡è¢«åˆ é™¤çš„å•è¯ Alt + d åˆ é™¤ä»Žå…‰æ ‡ä½ç½®åˆ°å½“å‰æ‰€å¤„å•è¯çš„æœ«å°¾ Command + K æ¸…å± Command + T æ–°å»ºæ ‡ç­¾ Command +W å…³é—­å½“å‰æ ‡ç­¾é¡µ Command + S ä¿å­˜ç»ˆç«¯è¾“å‡º Command + D åž‚ç›´åˆ†æ°´å¹³åˆ†éš”å½“å‰æ ‡ç­¾é¡µ Command + shift + {æˆ–} å‘å·¦/å‘å³åˆ‡æ¢æ ‡ç­¾]]></content>
      <categories>
        <category>å¿«æ·é”®</category>
      </categories>
      <tags>
        <tag>å¿«æ·é”®</tag>
        <tag>Mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¿®æ”¹NexT_Piscesä¸»é¢˜å†…å®¹åŒºå®½åº¦]]></title>
    <url>%2Fposts%2F88baa841.html</url>
    <content type="text"><![CDATA[é»˜è®¤çš„å®½åº¦è§‰å¾—æœ‰ç‚¹çª„ï¼Œæƒ³æ”¹å®½ä¸€ç‚¹ï¼Œæ‰‹åŠ¨ä¿®æ”¹æ ·å¼åœ¨source/css/_schemes/Picses/_layout.stylæ–‡ä»¶æœ«å°¾æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚ 12345678910111213141516171819202122232425262728293031323334// ä»¥ä¸‹ä¸ºæ–°å¢žä»£ç header&#123; width: 90% !important; &#125;header.post-header &#123; width: auto !important;&#125;.container .main-inner &#123; width: 90%; &#125;.content-wrap &#123; width: calc(100% - 260px); &#125;.header &#123; +tablet() &#123; width: auto !important; &#125; +mobile() &#123; width: auto !important; &#125;&#125;.container .main-inner &#123; +tablet() &#123; width: auto !important; &#125; +mobile() &#123; width: auto !important; &#125;&#125;.content-wrap &#123; +tablet() &#123; width: 100% !important; &#125; +mobile() &#123; width: 100% !important; &#125;&#125;]]></content>
      <categories>
        <category>å»ºç«™</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>å»ºç«™</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Hexoæ­å»ºåšå®¢]]></title>
    <url>%2Fposts%2Feb656981.html</url>
    <content type="text"><![CDATA[å‡†å¤‡å·¥ä½œ Hexoï¼šå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æž¶,å®˜ç½‘æœ‰ä¸­æ–‡æ–‡æ¡£ NexTï¼šHexo é€‚ç”¨çš„ä¸»é¢˜ LeanCloudï¼šæ•°æ®åº“(å¯ä¸ç”¨) GitHubï¼šåšå®¢å°±å‘å¸ƒåœ¨ GitPage å®‰è£…&amp;é…ç½® Hexoå®‰è£… Hexoå…¨å±€å®‰è£… Hexo å®˜æ–¹çš„è„šæ‰‹æž¶ 1$ npm install -g hexo-cli ç„¶åŽåˆå§‹åŒ–åšå®¢ï¼Œå¹¶å®‰è£…ä¾èµ–åŒ… 123$ hexo init &lt;folder&gt;$ cd &lt;folder&gt;$ npm install &lt;folder&gt; å°±æ˜¯åšå®¢çš„æœ¬åœ°æ–‡ä»¶å¤¹ é…ç½® Hexoç½‘ç«™é…ç½®ï¼š /_config.yml ç½‘ç«™ å‚æ•° æè¿° title ç½‘ç«™æ ‡é¢˜ subtitle ç½‘ç«™å‰¯æ ‡é¢˜ description ç½‘ç«™æè¿° author æ‚¨çš„åå­— language ç½‘ç«™ä½¿ç”¨çš„è¯­è¨€ timezone ç½‘ç«™æ—¶åŒº(é»˜è®¤ä¸ºç”µè„‘æ—¶åŒº) avatar(æ­¤å‚æ•°éœ€è‡ªå·±æ·»åŠ ) ç½‘ç«™å¤´åƒåœ°å€ ç½‘å€ å‚æ•° æè¿° é»˜è®¤å€¼ url ç½‘å€ root ç½‘ç«™æ ¹ç›®å½• permalink æ–‡ç« çš„é“¾æŽ¥æ ¼å¼ :year/:month/:day/:title/ ç½‘ç«™å­˜æ”¾åœ¨å­ç›®å½•å¦‚æžœæ‚¨çš„ç½‘ç«™å­˜æ”¾åœ¨å­ç›®å½•ä¸­ï¼Œä¾‹å¦‚http://yoursite.com/blogï¼Œåˆ™è¯·å°†æ‚¨çš„ url è®¾ä¸ºhttp://yoursite.com/blog å¹¶æŠŠroot è®¾ä¸º /blog/ã€‚ ç›®å½• å‚æ•° æè¿° é»˜è®¤å€¼ source_dir èµ„æºæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾å†…å®¹ã€‚ source public_dir å…¬å…±æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨äºŽå­˜æ”¾ç”Ÿæˆçš„ç«™ç‚¹æ–‡ä»¶ã€‚ public _posts_dir é»˜è®¤æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨äºŽå­˜æ”¾ç”Ÿæˆçš„ç«™ç‚¹æ–‡ä»¶ã€‚ _posts tag_dir æ ‡ç­¾æ–‡ä»¶å¤¹ tags category_dir åˆ†ç±»æ–‡ä»¶å¤¹ categories archive_dir å½’æ¡£æ–‡ä»¶å¤¹ archives about_dir å…³äºŽæˆ‘ä»¬æ–‡ä»¶å¤¹ about CNAME åŸŸåæ–‡ä»¶(zhangmiao.space) code_dir Include code æ–‡ä»¶å¤¹ downloads/code i18n_dir å›½é™…åŒ–ï¼ˆi18nï¼‰æ–‡ä»¶å¤¹ :lang skip_render è·³è¿‡æŒ‡å®šæ–‡ä»¶çš„æ¸²æŸ“ï¼Œæ‚¨å¯ä½¿ç”¨ glob è¡¨è¾¾å¼æ¥åŒ¹é…è·¯å¾„ã€‚ æç¤ºå¦‚æžœæ‚¨åˆšåˆšå¼€å§‹æŽ¥è§¦Hexoï¼Œé€šå¸¸æ²¡æœ‰å¿…è¦ä¿®æ”¹è¿™ä¸€éƒ¨åˆ†çš„å€¼ã€‚ åˆ†é¡µ å‚æ•° æè¿° é»˜è®¤å€¼ per_page æ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« é‡ (0 = å…³é—­åˆ†é¡µåŠŸèƒ½) 10 pagination_dir åˆ†é¡µç›®å½• page æ‰©å±• å‚æ•° æè¿° theme å½“å‰ä¸»é¢˜åç§°ã€‚å€¼ä¸º false æ—¶ç¦ç”¨ä¸»é¢˜ deploy éƒ¨ç½²éƒ¨åˆ†çš„è®¾ç½® æ›´å¤šç½‘ç«™å‚æ•°å‚è€ƒï¼šhttps://hexo.io/zh-cn/docs/configuration.html æ·»åŠ ç«™å†…æœç´¢å®‰è£… hexo-generator-searchdb 1$ npm install hexo-generator-searchdb --save ç½‘ç«™é…ç½®ï¼š /_config.yml æ–°å¢žä»¥ä¸‹å†…å®¹åˆ°ä»»æ„ä½ç½®ï¼š 12345search: path: search.xml field: post format: html limit: 10000 æµ‹è¯• Hexoæ–°å»ºæ–‡ç« è¿è¡Œå‘½ä»¤æ–°å»ºä¸€ç¯‡æ–‡ç«  1$ hexo new [layout] &lt;title&gt; å¯åŠ¨æœåŠ¡123$ hexo server æˆ–$ hexo s é€‰é¡¹ æè¿° -p, â€“port é‡è®¾ç«¯å£ -s, â€“static åªä½¿ç”¨é™æ€æ–‡ä»¶ -l, â€“log å¯åŠ¨æ—¥è®°è®°å½•ï¼Œä½¿ç”¨è¦†ç›–è®°å½•æ ¼å¼ å¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼šhttp://localhost:4000/ã€‚ éƒ¨ç½²ç½‘ç«™123$ hexo deploy æˆ–$ $ hexo d é€‰é¡¹ æè¿° -g, â€“generate éƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶ æ¸…é™¤1$ hexo clean æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚åœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åŽï¼‰ï¼Œå¦‚æžœå‘çŽ°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚ æ›´å¤šå‘½ä»¤å‚è€ƒï¼šhttps://hexo.io/zh-cn/docs/commands.html å®‰è£…&amp;é…ç½® NexT ä¸»é¢˜å®‰è£… NexT ä¸»é¢˜ä½¿ç”¨ git å…‹éš†æœ€æ–°ç‰ˆæœ¬ 12$ cd &lt;folder&gt;$ git clone https://github.com/iissnan/hexo-theme-next themes/next æˆ–è€…ç›´æŽ¥å°† hexo-theme-next ä¸‹è½½ä¸‹æ¥æ”¾åˆ° Hexo ç«™ç‚¹ç›®å½•ä¸‹çš„ [themes/next] ç›®å½•ä¸­ å¯ç”¨ NexT ä¸»é¢˜ç½‘ç«™é…ç½®ï¼š /_config.ymlæœç´¢themeå…³é”®å­—ï¼Œå¹¶å°†å…¶å€¼æ›´æ”¹ä¸º next 1theme: next éªŒè¯ NexT ä¸»é¢˜ æœ€å¥½å…ˆä½¿ç”¨ hexo clean æ¸…é™¤ Hexo çš„ç¼“å­˜ã€‚ è¿è¡Œ hexo server å¯åŠ¨æœ¬åœ°ç«™ç‚¹ã€‚æ­¤æ—¶å³å¯ä½¿ç”¨æµè§ˆå™¨è®¿é—® http://localhost:4000 ï¼Œæ£€æŸ¥ç«™ç‚¹æ˜¯å¦æ­£ç¡®è¿è¡Œã€‚ ä¸»é¢˜è®¾å®šä¸»é¢˜é…ç½®ï¼š /theme/next/_config.ymlæœç´¢scheme å…³é”®å­—ï¼Œé€‰æ‹©ä½¿ç”¨çš„ä¸»é¢˜æ ·å¼ï¼Œå°†ä½ éœ€ç”¨å¯ç”¨çš„ scheme å‰é¢æ³¨é‡Š # åŽ»æŽ‰å¹¶å°†å…¶ä»–ä¸¤ä¸ª scheme åŠ ä¸Šæ³¨é‡Šå³å¯ã€‚ Muse - é»˜è®¤ Schemeï¼Œè¿™æ˜¯ NexT æœ€åˆçš„ç‰ˆæœ¬ï¼Œé»‘ç™½ä¸»è°ƒï¼Œå¤§é‡ç•™ç™½ Mist - Muse çš„ç´§å‡‘ç‰ˆæœ¬ï¼Œæ•´æ´æœ‰åºçš„å•æ å¤–è§‚ Pisces - åŒæ  Schemeï¼Œå°å®¶ç¢§çŽ‰ä¼¼çš„æ¸…æ–° 123#scheme: Muse#scheme: Mistscheme: Pisces è®¾ç½® èœå•ä¸»é¢˜é…ç½®ï¼š /theme/next/_config.yml æœç´¢ menu å…³é”®å­— è®¾ç½® å¤´åƒä¸»é¢˜é…ç½®ï¼š /theme/next/_config.yml æ–°å¢žå­—æ®µavatar,å€¼è®¾ç½®æˆå¤´åƒçš„é“¾æŽ¥åœ°å€ è®¾ç½® ä½œè€…åç§°ä¸»é¢˜é…ç½®ï¼š /theme/next/_config.yml æœç´¢ author å…³é”®å­— è®¾ç½® æè¿°ä¸»é¢˜é…ç½®ï¼š /theme/next/_config.yml æœç´¢ description å…³é”®å­— è®¾ç½® é¦–é¡µåˆ—è¡¨æ˜¯å¦æ˜¾ç¤º é˜…è¯»æ›´å¤šä¸»é¢˜é…ç½®ï¼š /theme/next/_config.yml æœç´¢auto_excerpt å…³é”®å­— å°† enable è®¾ç½®ä¸ºtrue length è®¾ç½®ä¸ºæœŸæœ›æˆªå–ä¿ç•™çš„æ–‡ç« é•¿åº¦ é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡ä¸»é¢˜é…ç½®ï¼š /theme/next/_config.yml å‚è€ƒï¼šhttp://theme-next.iissnan.com/third-party-services.html åˆ›å»º GitHubåˆ›å»ºå¥½è´¦å·ä¹‹åŽï¼Œå…ˆåˆ›å»ºä¸€ä¸ªä»“åº“New repositoryè¿›å…¥ Settings ï¼Œæ‰¾åˆ°ä¸‹æ–¹çš„ GitHub Pages ï¼Œç‚¹å‡»Choose a themeé€‰æ‹©ä¸»é¢˜ï¼ˆè¿™ä¸ªæ— æ‰€è°“ï¼Œæœ€åŽéƒ½ä¼šè¢«æ›¿æ¢ï¼‰ï¼ŒSourceæŒ‡å‘çš„å°±æ˜¯ GitPage ç«™ç‚¹æ‰€åœ¨çš„åˆ†æ”¯ã€‚ GitHub ä¼šç»™åˆ†é…ä¸€ä¸ªäºŒçº§åŸŸåï¼ŒGitHub æ˜µç§°+github.io éƒ¨ç½²ç½‘ç«™å®‰è£…hexo-deployer-git 1$ npm install hexo-deployer-git --save é…ç½®ç½‘ç«™é…ç½®ï¼š /_config.yml æœç´¢ deploy å…³é”®å­— typeï¼šgit repoï¼šgithub æäº¤åœ°å€ branchï¼šæäº¤åˆ†æ”¯ éƒ¨ç½²123$ hexo deploy æˆ–$ hexo d å¦‚æžœæƒ³åœ¨éƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆä¸‹é™æ€æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ï¼š 123$ hexo deploy -g æˆ–$ hexo d --generate $ hexo deploy -gä¸Ž$ hexo generate -dçš„æ•ˆæžœå…¶å®žæ˜¯ç›¸åŒçš„ æœ¬åœ°ç«™ç‚¹ä¸è¦æ”¾åœ¨ Git ä¸Šï¼Œå¦åˆ™æ‰§è¡Œ deploy çš„æ—¶å€™ä¼šæŠŠæœ¬åœ°ç«™ç‚¹æäº¤ä¸ŠåŽ»]]></content>
      <categories>
        <category>å»ºç«™</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>å»ºç«™</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2Fposts%2F4a17b156.html</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>å»ºç«™</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
</search>
